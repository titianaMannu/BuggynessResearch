{"sha":"c0eac1e0cba3874b78ae5403eabbaa5558b83e3c","node_id":"MDQ6QmxvYjIwNjM2NDpjMGVhYzFlMGNiYTM4NzRiNzhhZTU0MDNlYWJiYWE1NTU4YjgzZTNj","size":18048,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c0eac1e0cba3874b78ae5403eabbaa5558b83e3c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlOwoKaW1wb3J0\nIGphdmEuaW8uRXh0ZXJuYWxpemFibGU7CmltcG9ydCBqYXZhLmlvLklPRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5pby5PYmplY3RJbnB1dDsKaW1wb3J0IGph\ndmEuaW8uT2JqZWN0T3V0cHV0OwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkRhdGU7CmltcG9y\ndCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2\nYS51dGlsLlNvcnRlZFNldDsKaW1wb3J0IGphdmEudXRpbC5UcmVlU2V0OwoK\naW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLk9iamVjdFV0aWxzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QQ1JlZ2lzdHJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnlDb250ZXh0OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZUNvbnRleHQ7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFSZXBvc2l0b3J5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW1wbEhlbHBlcjsK\nCi8qKgogKiBUaGlzIGNsYXNzIHN0b3JlcyBpbmZvcm1hdGlvbiBhYm91dCBh\nIHBhcnRpY3VsYXIgaW52b2NhdGlvbiBvZgogKiBhIHF1ZXJ5LiBJdCBjb250\nYWlucyBhIHJlZmVyZW5jZSB0byB0aGUgZXh0ZXJuYWwgcHJvcGVydGllcyBv\nZiB0aGUKICogcXVlcnkgdGhhdCB3YXMgZXhlY3V0ZWQsIGFzIHdlbGwgYXMg\nYW55IHBhcmFtZXRlcnMgdXNlZCB0byBleGVjdXRlCiAqIHRoYXQgcXVlcnks\nIHdpdGggb25lIGV4Y2VwdGlvbjogZmlyc3QtY2xhc3Mgb2JqZWN0cyB1c2Vk\nIGFzCiAqIHBhcmFtZXRlciB2YWx1ZXMgYXJlIGNvbnZlcnRlZCB0byBPSURz\nLgogKgogKiBAYXV0aG9yIFBhdHJpY2sgTGluc2tleQogKi8KcHVibGljIGNs\nYXNzIFF1ZXJ5S2V5CiAgICBpbXBsZW1lbnRzIEV4dGVybmFsaXphYmxlIHsK\nCiAgICAvLyBpbml0aWFsaXplIHRoZSBzZXQgb2YgdW5tb2RpZmlhYmxlIGNs\nYXNzZXMuIFRoaXMgYWxsb3dzIHVzCiAgICAvLyB0byBhdm9pZCBjbG9uaW5n\nIGNvbGxlY3Rpb25zIHRoYXQgYXJlIG5vdCBtb2RpZmlhYmxlLAogICAgLy8g\ncHJvdmlkZWQgdGhhdCB0aGV5IGRvIG5vdCBjb250YWluIG11dGFibGUgb2Jq\nZWN0cy4KICAgIHByaXZhdGUgc3RhdGljIENvbGxlY3Rpb24gc191bm1vZCA9\nIG5ldyBIYXNoU2V0KCk7CgogICAgc3RhdGljIHsKICAgICAgICAvLyBoYW5k\nbGUgdGhlIHNldCB0eXBlczsgamRrIHVzZXMgZGlmZmVyZW50IGNsYXNzZXMg\nZm9yIGNvbGxlY3Rpb24sCiAgICAgICAgLy8gc2V0LCBhbmQgc29ydGVkIHNl\ndAogICAgICAgIFRyZWVTZXQgcyA9IG5ldyBUcmVlU2V0KCk7CiAgICAgICAg\nc191bm1vZC5hZGQoQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlQ29sbGVjdGlv\nbihzKS5nZXRDbGFzcygpKTsKICAgICAgICBzX3VubW9kLmFkZChDb2xsZWN0\naW9ucy51bm1vZGlmaWFibGVTZXQocykuZ2V0Q2xhc3MoKSk7CiAgICAgICAg\nc191bm1vZC5hZGQoQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlU29ydGVkU2V0\nKHMpLmdldENsYXNzKCkpOwoKICAgICAgICAvLyBoYW5kbGUgdGhlIGxpc3Qg\ndHlwZXM7IGpkayB1c2VzIGRpZmZlcmVudCBjbGFzc2VzIGZvciBzdGFuZGFy\nZAogICAgICAgIC8vIGFuZCByYW5kb20gYWNjZXNzIGxpc3RzCiAgICAgICAg\nTGlzdCBsID0gbmV3IExpbmtlZExpc3QoKTsKICAgICAgICBzX3VubW9kLmFk\nZChDb2xsZWN0aW9ucy51bm1vZGlmaWFibGVMaXN0KGwpLmdldENsYXNzKCkp\nOwogICAgICAgIGwgPSBuZXcgQXJyYXlMaXN0KDApOwogICAgICAgIHNfdW5t\nb2QuYWRkKENvbGxlY3Rpb25zLnVubW9kaWZpYWJsZUxpc3QobCkuZ2V0Q2xh\nc3MoKSk7CgogICAgICAgIC8vIGhhbmRsZSB0aGUgY29uc3RhbnQgdHlwZXMK\nICAgICAgICBzX3VubW9kLmFkZChDb2xsZWN0aW9ucy5FTVBUWV9TRVQuZ2V0\nQ2xhc3MoKSk7CiAgICAgICAgc191bm1vZC5hZGQoQ29sbGVjdGlvbnMuRU1Q\nVFlfTElTVC5nZXRDbGFzcygpKTsKICAgIH0KCiAgICAvLyBjYWNoaW5nIHN0\nYXRlOyBubyBuZWVkIHRvIGluY2x1ZGUgcGFyYW1ldGVyIGFuZCB2YXJpYWJs\nZSBkZWNsYXJhdGlvbnMKICAgIC8vIGJlY2F1c2UgdGhleSBhcmUgaW1wbGlj\naXQgaW4gdGhlIGZpbHRlcgogICAgcHJpdmF0ZSBTdHJpbmcgX2NhbmRpZGF0\nZUNsYXNzTmFtZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfc3ViY2xhc3NlczsK\nICAgIHByaXZhdGUgU2V0IF9hY2Nlc3NQYXRoQ2xhc3NOYW1lczsKICAgIHBy\naXZhdGUgU3RyaW5nIF9xdWVyeTsKICAgIHByaXZhdGUgYm9vbGVhbiBfaWdu\nb3JlQ2hhbmdlczsKICAgIHByaXZhdGUgTWFwIF9wYXJhbXM7CiAgICBwcml2\nYXRlIGxvbmcgX3JhbmdlU3RhcnQ7CiAgICBwcml2YXRlIGxvbmcgX3Jhbmdl\nRW5kOwoKICAgIC8vICMjIyBwY2w6IDIgTWF5IDIwMDM6IHNob3VsZCB0aGlz\nIHRpbWVvdXQgdGFrZSBpbnRvIGFjY291bnQgdGhlCiAgICAvLyAjIyMgdGlt\nZW91dHMgZm9yIGNsYXNzZXMgaW4gdGhlIGFjY2VzcyBwYXRoIG9mIHRoZSBx\ndWVyeT8KICAgIC8vICMjIyBDdXJyZW50bHksIGl0IG9ubHkgY29uc2lkZXJz\nIHRoZSBjYW5kaWRhdGUgY2xhc3MgYW5kIGl0cwogICAgLy8gIyMjIHN1YmNs\nYXNzZXMuIE5vdGUgdGhhdCB0aGlzIHZhbHVlIGlzIHVzZWQgdG8gZGVjaWRl\nIHdoZXRoZXIKICAgIC8vICMjIyBvciBub3QgT0lEcyBzaG91bGQgYmUgcmVn\naXN0ZXJlZCBmb3IgZXhwaXJhdGlvbiBjYWxsYmFja3MKICAgIHByaXZhdGUg\naW50IF90aW1lb3V0ID0gLTE7CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBr\nZXkgZm9yIHRoZSBnaXZlbiBxdWVyeSwgb3IgbnVsbCBpZiBpdCBpcyBub3Qg\nY2FjaGVhYmxlLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFF1ZXJ5S2V5\nIG5ld0luc3RhbmNlKFF1ZXJ5IHEpIHsKICAgICAgICByZXR1cm4gbmV3SW5z\ndGFuY2UocSwgKE9iamVjdFtdKSBudWxsKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiBhIGtleSBmb3IgdGhlIGdpdmVuIHF1ZXJ5LCBvciBudWxs\nIGlmIGl0IGlzIG5vdCBjYWNoZWFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgUXVlcnlLZXkgbmV3SW5zdGFuY2UoUXVlcnkgcSwgT2JqZWN0W10g\nYXJncykgewogICAgICAgIC8vIGNvbXBpbGUgdG8gbWFrZSBzdXJlIGluZm8g\nZW5jb2RlZCBpbiBxdWVyeSBzdHJpbmcgaXMgYXZhaWxhYmxlCiAgICAgICAg\nLy8gdmlhIEFQSSBjYWxscyAoY2FuZGlkYXRlIGNsYXNzLCByZXN1bHQgY2xh\nc3MsIGV0YykKICAgICAgICBxLmNvbXBpbGUoKTsKICAgICAgICByZXR1cm4g\nbmV3SW5zdGFuY2UocSwgZmFsc2UsIGFyZ3MsIHEuZ2V0Q2FuZGlkYXRlVHlw\nZSgpLAogICAgICAgICAgICBxLmhhc1N1YmNsYXNzZXMoKSwgcS5nZXRTdGFy\ndFJhbmdlKCksIHEuZ2V0RW5kUmFuZ2UoKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gYSBrZXkgZm9yIHRoZSBnaXZlbiBxdWVyeSwgb3IgbnVs\nbCBpZiBpdCBpcyBub3QgY2FjaGVhYmxlLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIFF1ZXJ5S2V5IG5ld0luc3RhbmNlKFF1ZXJ5IHEsIE1hcCBhcmdz\nKSB7CiAgICAgICAgLy8gY29tcGlsZSB0byBtYWtlIHN1cmUgaW5mbyBlbmNv\nZGVkIGluIHF1ZXJ5IHN0cmluZyBpcyBhdmFpbGFibGUKICAgICAgICAvLyB2\naWEgQVBJIGNhbGxzIChjYW5kaWRhdGUgY2xhc3MsIHJlc3VsdCBjbGFzcywg\nZXRjKQogICAgICAgIHEuY29tcGlsZSgpOwogICAgICAgIHJldHVybiBuZXdJ\nbnN0YW5jZShxLCBmYWxzZSwgYXJncywgcS5nZXRDYW5kaWRhdGVUeXBlKCks\nCiAgICAgICAgICAgIHEuaGFzU3ViY2xhc3NlcygpLCBxLmdldFN0YXJ0UmFu\nZ2UoKSwgcS5nZXRFbmRSYW5nZSgpKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiBhIGtleSBmb3IgdGhlIGdpdmVuIHF1ZXJ5LCBvciBudWxsIGlm\nIGl0IGlzIG5vdCBjYWNoZWFibGUuCiAgICAgKi8KICAgIHN0YXRpYyBRdWVy\neUtleSBuZXdJbnN0YW5jZShRdWVyeUNvbnRleHQgcSwgYm9vbGVhbiBwYWNr\nZWQsIE9iamVjdFtdIGFyZ3MsCiAgICAgICAgQ2xhc3MgY2FuZGlkYXRlLCBi\nb29sZWFuIHN1YnMsIGxvbmcgc3RhcnRJZHgsIGxvbmcgZW5kSWR4KSB7CiAg\nICAgICAgUXVlcnlLZXkga2V5ID0gY3JlYXRlS2V5KHEsIHBhY2tlZCwgY2Fu\nZGlkYXRlLCBzdWJzLCBzdGFydElkeCwgZW5kSWR4KTsKICAgICAgICBpZiAo\na2V5ICE9IG51bGwgJiYgc2V0UGFyYW1zKGtleSwgcSwgYXJncykpCiAgICAg\nICAgICAgIHJldHVybiBrZXk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBrZXkgZm9yIHRoZSBnaXZlbiBx\ndWVyeSwgb3IgbnVsbCBpZiBpdCBpcyBub3QgY2FjaGVhYmxlLgogICAgICov\nCiAgICBzdGF0aWMgUXVlcnlLZXkgbmV3SW5zdGFuY2UoUXVlcnlDb250ZXh0\nIHEsIGJvb2xlYW4gcGFja2VkLCBNYXAgYXJncywKICAgICAgICBDbGFzcyBj\nYW5kaWRhdGUsIGJvb2xlYW4gc3VicywgbG9uZyBzdGFydElkeCwgbG9uZyBl\nbmRJZHgpIHsKICAgICAgICBRdWVyeUtleSBrZXkgPSBjcmVhdGVLZXkocSwg\ncGFja2VkLCBjYW5kaWRhdGUsIHN1YnMsIHN0YXJ0SWR4LCBlbmRJZHgpOwog\nICAgICAgIGlmIChrZXkgIT0gbnVsbCAmJiAoYXJncyA9PSBudWxsIHx8IGFy\nZ3MuaXNFbXB0eSgpIHx8CiAgICAgICAgICAgIHNldFBhcmFtcyhrZXksIHEu\nZ2V0U3RvcmVDb250ZXh0KCksIG5ldyBIYXNoTWFwKGFyZ3MpKSkpCiAgICAg\nICAgICAgIHJldHVybiBrZXk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBFeHRyYWN0IHRoZSByZWxldmFudCBpZGVudGlm\neWluZyBpbmZvcm1hdGlvbiBmcm9tCiAgICAgKiA8Y29kZT5xPC9jb2RlPi4g\nVGhpcyBpbmNsdWRlcyBpbmZvcm1hdGlvbiBzdWNoIGFzIGNhbmRpZGF0ZQog\nICAgICogY2xhc3MsIHF1ZXJ5IGZpbHRlciwgZXRjLgogICAgICovCiAgICBw\ncml2YXRlIHN0YXRpYyBRdWVyeUtleSBjcmVhdGVLZXkoUXVlcnlDb250ZXh0\nIHEsIGJvb2xlYW4gcGFja2VkLAogICAgICAgIENsYXNzIGNhbmRpZGF0ZUNs\nYXNzLCBib29sZWFuIHN1YmNsYXNzZXMsIGxvbmcgc3RhcnRJZHgsIGxvbmcg\nZW5kSWR4KSB7CiAgICAgICAgaWYgKGNhbmRpZGF0ZUNsYXNzID09IG51bGwp\nCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAvLyBjYW4gb25s\neSBjYWNoZSBkYXRhc3RvcmUgcXVlcmllcwogICAgICAgIGlmIChxLmdldENh\nbmRpZGF0ZUNvbGxlY3Rpb24oKSAhPSBudWxsKQogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKCiAgICAgICAgLy8gbm8gc3VwcG9ydCBhbHJlYWR5LXBhY2tl\nZCByZXN1bHRzCiAgICAgICAgaWYgKHEuZ2V0UmVzdWx0VHlwZSgpICE9IG51\nbGwgJiYgcGFja2VkKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAg\nICAgLy8gY2FuJ3QgY2FjaGUgbm9uLXNlcmlhbGl6YWJsZSBub24tbWFuYWdl\nZCBjb21wbGV4IHR5cGVzCiAgICAgICAgQ2xhc3NbXSB0eXBlcyA9IHEuZ2V0\nUHJvamVjdGlvblR5cGVzKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCB0eXBlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzd2l0Y2ggKEph\ndmFUeXBlcy5nZXRUeXBlQ29kZSh0eXBlc1tpXSkpIHsKICAgICAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkFSUkFZOgogICAgICAgICAgICAgICAgICAg\nIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQ09MTEVDVElPTjoKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk1B\nUDoKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk9CSkVDVDoKICAg\nICAgICAgICAgICAgICAgICBpZiAoIUltcGxIZWxwZXIuaXNNYW5hZ2VkVHlw\nZSgKICAgICAgICAgICAgICAgICAgICAgICAgcS5nZXRTdG9yZUNvbnRleHQo\nKS5nZXRDb25maWd1cmF0aW9uKCksIHR5cGVzW2ldKSkKICAgICAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIHdl\nIGNhbid0IGNhY2hlIHRoZSBxdWVyeSBpZiB3ZSBkb24ndCBrbm93IHdoaWNo\nIGNsYXNzZXMgYXJlIGluIHRoZQogICAgICAgIC8vIGFjY2VzcyBwYXRoCiAg\nICAgICAgQ2xhc3NNZXRhRGF0YVtdIG1ldGFzID0gcS5nZXRBY2Nlc3NQYXRo\nTWV0YURhdGFzKCk7CiAgICAgICAgaWYgKG1ldGFzLmxlbmd0aCA9PSAwKQog\nICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgU2V0IGFjY2Vzc1Bh\ndGhDbGFzc05hbWVzID0gbmV3IEhhc2hTZXQoKGludCkgKG1ldGFzLmxlbmd0\naCAqIDEuMzMgKyAxKSk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3RoOyBpKysp\nIHsKICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNsYXNzIGNoYW5nZSBmcmFt\nZXdvcmsgZGVhbHMgd2l0aCBsZWFzdC1kZXJpdmVkIHR5cGVzLAogICAgICAg\nICAgICAvLyByZWNvcmQgdGhlIGxlYXN0LWRlcml2ZWQgYWNjZXNzIHBhdGgg\ndHlwZXMKICAgICAgICAgICAgbWV0YSA9IG1ldGFzW2ldOwogICAgICAgICAg\nICBpZiAobWV0YS5nZXREYXRhQ2FjaGUoKSAhPSBudWxsKQogICAgICAgICAg\nICAgICAgYWNjZXNzUGF0aENsYXNzTmFtZXMuYWRkKG1ldGEuZ2V0RGVzY3Jp\nYmVkVHlwZSgpLmdldE5hbWUoKSk7CiAgICAgICAgICAgIHdoaWxlIChtZXRh\nLmdldFBDU3VwZXJjbGFzcygpICE9IG51bGwpCiAgICAgICAgICAgICAgICBt\nZXRhID0gbWV0YS5nZXRQQ1N1cGVyY2xhc3NNZXRhRGF0YSgpOwoKICAgICAg\nICAgICAgLy8gZW5zdXJlIHRoYXQgdGhpcyBtZXRhZGF0YSBpcyBjYWNoZWFi\nbGUKICAgICAgICAgICAgaWYgKG1ldGEuZ2V0RGF0YUNhY2hlKCkgPT0gbnVs\nbCkKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICBh\nY2Nlc3NQYXRoQ2xhc3NOYW1lcy5hZGQobWV0YS5nZXREZXNjcmliZWRUeXBl\nKCkuZ2V0TmFtZSgpKTsKICAgICAgICB9CgogICAgICAgIC8vIGlmIGFueSBv\nZiB0aGUgdHlwZXMgYXJlIGN1cnJlbnRseSBkaXJ0eSwgd2UgY2FuJ3QgY2Fj\naGUgdGhpcyBxdWVyeQogICAgICAgIFN0b3JlQ29udGV4dCBjdHggPSBxLmdl\ndFN0b3JlQ29udGV4dCgpOwogICAgICAgIGlmIChpbnRlcnNlY3RzKGFjY2Vz\nc1BhdGhDbGFzc05hbWVzLCBjdHguZ2V0UGVyc2lzdGVkVHlwZXMoKSkKICAg\nICAgICAgICAgfHwgaW50ZXJzZWN0cyhhY2Nlc3NQYXRoQ2xhc3NOYW1lcywg\nY3R4LmdldFVwZGF0ZWRUeXBlcygpKQogICAgICAgICAgICB8fCBpbnRlcnNl\nY3RzKGFjY2Vzc1BhdGhDbGFzc05hbWVzLCBjdHguZ2V0RGVsZXRlZFR5cGVz\nKCkpKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgLy8gY2Fs\nY3VsYXRlIHRoZSB0aW1lb3V0IGZvciB0aGUga2V5CiAgICAgICAgTWV0YURh\ndGFSZXBvc2l0b3J5IHJlcG9zID0gY3R4LmdldENvbmZpZ3VyYXRpb24oKS4K\nICAgICAgICAgICAgZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsK\nCiAgICAgICAgLy8gd29uJ3QgZmluZCBtZXRhZGF0YSBmb3IgaW50ZXJmYWNl\ncy4KICAgICAgICBpZiAoY2FuZGlkYXRlQ2xhc3MuaXNJbnRlcmZhY2UoKSkK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgbWV0YSA9IHJlcG9z\nLmdldE1ldGFEYXRhKGNhbmRpZGF0ZUNsYXNzLCBjdHguZ2V0Q2xhc3NMb2Fk\nZXIoKSwgdHJ1ZSk7CiAgICAgICAgaW50IHRpbWVvdXQgPSBtZXRhLmdldERh\ndGFDYWNoZVRpbWVvdXQoKTsKICAgICAgICBpZiAoc3ViY2xhc3Nlcykgewog\nICAgICAgICAgICBtZXRhcyA9IG1ldGEuZ2V0UENTdWJjbGFzc01ldGFEYXRh\ncygpOwogICAgICAgICAgICBpbnQgc3ViVGltZW91dDsKICAgICAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBtZXRhcy5sZW5ndGg7IGkrKykgewogICAg\nICAgICAgICAgICAgaWYgKG1ldGFzW2ldLmdldERhdGFDYWNoZSgpID09IG51\nbGwpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAg\nICAgICAgICAgYWNjZXNzUGF0aENsYXNzTmFtZXMuYWRkKG1ldGFzW2ldLmdl\ndERlc2NyaWJlZFR5cGUoKS5nZXROYW1lKCkpOwogICAgICAgICAgICAgICAg\nc3ViVGltZW91dCA9IG1ldGFzW2ldLmdldERhdGFDYWNoZVRpbWVvdXQoKTsK\nICAgICAgICAgICAgICAgIGlmIChzdWJUaW1lb3V0ICE9IC0xICYmIHN1YlRp\nbWVvdXQgPCB0aW1lb3V0KQogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQg\nPSBzdWJUaW1lb3V0OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAg\nICAvLyB0ZXN0cyBhbGwgcGFzc2VkOyBjYWNoZWFibGUKICAgICAgICBRdWVy\neUtleSBrZXkgPSBuZXcgUXVlcnlLZXkoKTsKICAgICAgICBrZXkuX2NhbmRp\nZGF0ZUNsYXNzTmFtZSA9IGNhbmRpZGF0ZUNsYXNzLmdldE5hbWUoKTsKICAg\nICAgICBrZXkuX3N1YmNsYXNzZXMgPSBzdWJjbGFzc2VzOwogICAgICAgIGtl\neS5fYWNjZXNzUGF0aENsYXNzTmFtZXMgPSBhY2Nlc3NQYXRoQ2xhc3NOYW1l\nczsKICAgICAgICBrZXkuX3RpbWVvdXQgPSB0aW1lb3V0OwogICAgICAgIGtl\neS5fcXVlcnkgPSBxLmdldFF1ZXJ5U3RyaW5nKCk7CiAgICAgICAga2V5Ll9p\nZ25vcmVDaGFuZ2VzID0gcS5nZXRJZ25vcmVDaGFuZ2VzKCk7CiAgICAgICAg\na2V5Ll9yYW5nZVN0YXJ0ID0gc3RhcnRJZHg7CiAgICAgICAga2V5Ll9yYW5n\nZUVuZCA9IGVuZElkeDsKICAgICAgICByZXR1cm4ga2V5OwogICAgfQoKICAg\nIC8qKgogICAgICogQ29udmVydCBhbiBhcnJheSBvZiBhcmd1bWVudHMgaW50\nbyB0aGUgY29ycmVzcG9uZGluZyBwYXJhbWV0ZXIKICAgICAqIG1hcCwgYW5k\nIGRvIGFueSBQQyB0byBPSUQgY29udmVyc2lvbiBuZWNlc3NhcnkuCiAgICAg\nKi8KICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4gc2V0UGFyYW1zKFF1ZXJ5\nS2V5IGtleSwgUXVlcnlDb250ZXh0IHEsCiAgICAgICAgT2JqZWN0W10gYXJn\ncykgewogICAgICAgIGlmIChhcmdzID09IG51bGwgfHwgYXJncy5sZW5ndGgg\nPT0gMCkKICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIC8vIENy\nZWF0ZSBhIG1hcCBmb3IgdGhlIGdpdmVuIHBhcmFtZXRlcnMsIGFuZCBjb252\nZXJ0IHRoZQogICAgICAgIC8vIHBhcmFtZXRlciBsaXN0IGludG8gYSBtYXAs\nIHVzaW5nIHRoZSBxdWVyeSdzIHBhcmFtZXRlcgogICAgICAgIC8vIGRlY2xh\ncmF0aW9uIHRvIGRldGVybWluZSBvcmRlcmluZyBldGMuCiAgICAgICAgTWFw\nIHR5cGVzID0gcS5nZXRPcmRlcmVkUGFyYW1ldGVyVHlwZXMoKTsKICAgICAg\nICBNYXAgbWFwID0gbmV3IEhhc2hNYXAoKGludCkgKHR5cGVzLnNpemUoKSAq\nIDEuMzMgKyAxKSk7CiAgICAgICAgaW50IGlkeCA9IDA7CiAgICAgICAgZm9y\nIChJdGVyYXRvciBpdGVyID0gdHlwZXMua2V5U2V0KCkuaXRlcmF0b3IoKTsg\naXRlci5oYXNOZXh0KCk7IGlkeCsrKQogICAgICAgICAgICBtYXAucHV0KGl0\nZXIubmV4dCgpLCBhcmdzW2lkeF0pOwogICAgICAgIHJldHVybiBzZXRQYXJh\nbXMoa2V5LCBxLmdldFN0b3JlQ29udGV4dCgpLCBtYXApOwogICAgfQoKICAg\nIC8qKgogICAgICogQ29udmVydCBwYXJhbWV0ZXJzIHRvIGEgZm9ybSB0aGF0\nIGlzIGNhY2hlYWJsZS4gTXV0YWJsZSBwYXJhbXMKICAgICAqIHdpbGwgYmUg\nY2xvbmVkLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBib29sZWFuIHNl\ndFBhcmFtcyhRdWVyeUtleSBrZXksIFN0b3JlQ29udGV4dCBjdHgsCiAgICAg\nICAgTWFwIHBhcmFtcykgewogICAgICAgIGlmIChwYXJhbXMgPT0gbnVsbCB8\nfCBwYXJhbXMuaXNFbXB0eSgpKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsK\nCiAgICAgICAgTWFwLkVudHJ5IGU7CiAgICAgICAgT2JqZWN0IHY7CiAgICAg\nICAgZm9yIChJdGVyYXRvciBpdGVyID0gcGFyYW1zLmVudHJ5U2V0KCkuaXRl\ncmF0b3IoKTsgaXRlci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGUgPSAo\nTWFwLkVudHJ5KSBpdGVyLm5leHQoKTsKICAgICAgICAgICAgdiA9IGUuZ2V0\nVmFsdWUoKTsKICAgICAgICAgICAgaWYgKEltcGxIZWxwZXIuaXNNYW5hZ2Vh\nYmxlKHYpKSB7CiAgICAgICAgICAgICAgICBpZiAoIWN0eC5pc1BlcnNpc3Rl\nbnQodikgfHwgY3R4LmlzTmV3KHYpIHx8IGN0eC5pc0RlbGV0ZWQodikpCiAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAg\nICAgZS5zZXRWYWx1ZShjdHguZ2V0T2JqZWN0SWQodikpOwogICAgICAgICAg\nICB9CgogICAgICAgICAgICBpZiAodiBpbnN0YW5jZW9mIENvbGxlY3Rpb24p\nIHsKICAgICAgICAgICAgICAgIENvbGxlY3Rpb24gYyA9IChDb2xsZWN0aW9u\nKSB2OwogICAgICAgICAgICAgICAgYm9vbGVhbiBjb250ZW50c0FyZURhdGVz\nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAoYy5pdGVyYXRvcigpLmhh\nc05leHQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgYXNzdW1l\ncyB0aGF0IHRoZSBjb2xsZWN0aW9uIGlzIGhvbW9nZW5lb3VzCiAgICAgICAg\nICAgICAgICAgICAgT2JqZWN0IG8gPSBjLml0ZXJhdG9yKCkubmV4dCgpOwog\nICAgICAgICAgICAgICAgICAgIGlmIChJbXBsSGVscGVyLmlzTWFuYWdlYWJs\nZShvKSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoK\nICAgICAgICAgICAgICAgICAgICAvLyBwY2w6IDI3IEp1biAyMDA0OiBpZiB3\nZSBncm93IHRoaXMgbG9naWMgdG8KICAgICAgICAgICAgICAgICAgICAvLyBo\nYW5kbGUgb3RoZXIgbXV0YWJsZSB0eXBlcyB0aGF0IGFyZSBub3QKICAgICAg\nICAgICAgICAgICAgICAvLyBrbm93biB0byBiZSBjbG9uZWFibGUsIHdlIHdp\nbGwgaGF2ZSB0byBhZGQKICAgICAgICAgICAgICAgICAgICAvLyBsb2dpYyB0\nbyBoYW5kbGUgdGhlbS4gVGhpcyBpcyBiZWNhdXNlIHdlCiAgICAgICAgICAg\nICAgICAgICAgLy8gY2FuJ3QganVzdCBjYXN0IHRvIENsb25lYWJsZSBhbmQg\naW52b2tlCiAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmUoKSwgYXMgY2xv\nbmUoKSBpcyBhIHByb3RlY3RlZCBtZXRob2QKICAgICAgICAgICAgICAgICAg\nICAvLyBpbiBPYmplY3QuCiAgICAgICAgICAgICAgICAgICAgaWYgKG8gaW5z\ndGFuY2VvZiBEYXRlKQogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50\nc0FyZURhdGVzID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgLy8gaWYg\ndGhlIGNvbGxlY3Rpb24gaXMgbm90IGEga25vd24gaW1tdXRhYmxlCiAgICAg\nICAgICAgICAgICAgICAgLy8gdHlwZSwgb3IgaWYgaXQgY29udGFpbnMgbXV0\nYWJsZSBpbnN0YW5jZXMsCiAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmUg\naXQgZm9yIGdvb2QgbWVhc3VyZS4KICAgICAgICAgICAgICAgICAgICBpZiAo\nY29udGVudHNBcmVEYXRlcyB8fCAhc191bm1vZC5jb250YWlucyhjLmdldENs\nYXNzKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgdGhl\nIGNvbGxlY3Rpb24KICAgICAgICAgICAgICAgICAgICAgICAgQ29sbGVjdGlv\nbiBjb3B5OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyBpbnN0YW5j\nZW9mIFNvcnRlZFNldCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNv\ncHkgPSBuZXcgVHJlZVNldCgpOwogICAgICAgICAgICAgICAgICAgICAgICBl\nbHNlIGlmIChjIGluc3RhbmNlb2YgU2V0KQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgY29weSA9IG5ldyBIYXNoU2V0KCk7CiAgICAgICAgICAgICAg\nICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNv\ncHkgPSBuZXcgQXJyYXlMaXN0KGMuc2l6ZSgpKTsKCiAgICAgICAgICAgICAg\nICAgICAgICAgIGlmIChjb250ZW50c0FyZURhdGVzKSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAvLyBtdXN0IGdvIHRocm91Z2ggYnkgaGFuZCBh\nbmQgZG8gdGhlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5\nLCBzaW5jZSBEYXRlIGlzIG11dGFibGUuCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0cjIgPSBjLml0ZXJhdG9yKCk7IGl0\ncjIuaGFzTmV4dCgpOykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBjb3B5LmFkZCgoKERhdGUpIGl0cjIubmV4dCgpKS5jbG9uZSgpKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBjb3B5LmFkZEFsbChjKTsKCiAgICAgICAgICAgICAgICAg\nICAgICAgIGUuc2V0VmFsdWUoY29weSk7CiAgICAgICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHYg\naW5zdGFuY2VvZiBEYXRlKQogICAgICAgICAgICAgICAgZS5zZXRWYWx1ZSgo\nKERhdGUpIHYpLmNsb25lKCkpOwogICAgICAgIH0KCiAgICAgICAga2V5Ll9w\nYXJhbXMgPSBwYXJhbXM7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBQdWJsaWMgY29uc3RydWN0b3IgZm9yIGV4dGVybmFs\naXphdGlvbiBvbmx5LgogICAgICovCiAgICBwdWJsaWMgUXVlcnlLZXkoKSB7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBjYW5kaWRhdGUg\nY2xhc3MgbmFtZSBmb3IgdGhpcyBxdWVyeS4KICAgICAqLwogICAgcHVibGlj\nIFN0cmluZyBnZXRDYW5kaWRhdGVUeXBlTmFtZSgpIHsKICAgICAgICByZXR1\ncm4gX2NhbmRpZGF0ZUNsYXNzTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiB0aGUgYW1vdW50IG9mIHRpbWUgdGhpcyBrZXkgaXMgZ29vZCBm\nb3IuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0VGltZW91dCgpIHsKICAg\nICAgICByZXR1cm4gX3RpbWVvdXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm5zIDxjb2RlPnRydWU8L2NvZGU+IGlmIG1vZGlmaWNhdGlvbnMgdG8g\nYW55IG9mIHRoZQogICAgICogY2xhc3NlcyBpbiA8Y29kZT5jaGFuZ2VkPC9j\nb2RlPiByZXN1bHRzIGluIGEgcG9zc2libGUKICAgICAqIGludmFsaWRhdGlv\nbiBvZiB0aGlzIHF1ZXJ5OyBvdGhlcndpc2UgcmV0dXJucwogICAgICogPGNv\nZGU+ZmFsc2U8L2NvZGU+LiBJbnZhbGlkYXRpb24gaXMgcG9zc2libGUgaWYg\nb25lIG9yIG1vcmUgb2YKICAgICAqIHRoZSBjbGFzc2VzIGluIHRoaXMgcXVl\ncnkga2V5J3MgYWNjZXNzIHBhdGggaGFzIGJlZW4gY2hhbmdlZC4KICAgICAq\nLwogICAgcHVibGljIGJvb2xlYW4gY2hhbmdlSW52YWxpZGF0ZXNRdWVyeShD\nb2xsZWN0aW9uIGNoYW5nZWQpIHsKICAgICAgICByZXR1cm4gaW50ZXJzZWN0\ncyhfYWNjZXNzUGF0aENsYXNzTmFtZXMsIGNoYW5nZWQpOwogICAgfQoKICAg\nIC8qKgogICAgICogV2hldGhlciB0aGUgZ2l2ZW4gc2V0IG9mIGxlYXN0LWRl\ncml2ZWQgY2xhc3MgbmFtZXMgaW50ZXJzZWN0cyB3aXRoCiAgICAgKiB0aGUg\nZ2l2ZW4gc2V0IG9mIGNoYW5nZWQgY2xhc3Nlcy4KICAgICAqLwogICAgcHJp\ndmF0ZSBzdGF0aWMgYm9vbGVhbiBpbnRlcnNlY3RzKENvbGxlY3Rpb24gbmFt\nZXMsIENvbGxlY3Rpb24gY2hhbmdlZCkgewogICAgICAgIENsYXNzIGNsczsK\nICAgICAgICBDbGFzcyBzdXA7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdGVy\nID0gY2hhbmdlZC5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTspIHsKICAg\nICAgICAgICAgY2xzID0gKENsYXNzKSBpdGVyLm5leHQoKTsKICAgICAgICAg\nICAgd2hpbGUgKChzdXAgPSBQQ1JlZ2lzdHJ5LmdldFBlcnNpc3RlbnRTdXBl\ncmNsYXNzKGNscykpICE9IG51bGwpCiAgICAgICAgICAgICAgICBjbHMgPSBz\ndXA7CiAgICAgICAgICAgIGlmIChuYW1lcy5jb250YWlucyhjbHMuZ2V0TmFt\nZSgpKSkKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0K\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBE\nZXRlcm1pbmUgZXF1YWxpdHkgYmFzZWQgb24gaWRlbnRpZnlpbmcgaW5mb3Jt\nYXRpb24uIEtleXMKICAgICAqIGNyZWF0ZWQgZm9yIHF1ZXJpZXMgdGhhdCBz\ncGVjaWZ5IGEgY2FuZGlkYXRlIGNvbGxlY3Rpb24gYXJlCiAgICAgKiBhbHdh\neXMgbm90IGVxdWFsLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBlcXVh\nbHMoT2JqZWN0IG9iKSB7CiAgICAgICAgaWYgKHRoaXMgPT0gb2IpCiAgICAg\nICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGlmIChvYiA9PSBudWxsIHx8\nIGdldENsYXNzKCkgIT0gb2IuZ2V0Q2xhc3MoKSkKICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwoKICAgICAgICBRdWVyeUtleSBvdGhlciA9IChRdWVyeUtl\neSkgb2I7CiAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLmVxdWFscyhfY2Fu\nZGlkYXRlQ2xhc3NOYW1lLAogICAgICAgICAgICBvdGhlci5fY2FuZGlkYXRl\nQ2xhc3NOYW1lKQogICAgICAgICAgICAmJiBfc3ViY2xhc3NlcyA9PSBvdGhl\nci5fc3ViY2xhc3NlcwogICAgICAgICAgICAmJiBfaWdub3JlQ2hhbmdlcyA9\nPSBvdGhlci5faWdub3JlQ2hhbmdlcwogICAgICAgICAgICAmJiBfcmFuZ2VT\ndGFydCA9PSBvdGhlci5fcmFuZ2VTdGFydAogICAgICAgICAgICAmJiBfcmFu\nZ2VFbmQgPT0gb3RoZXIuX3JhbmdlRW5kCiAgICAgICAgICAgICYmIFN0cmlu\nZ1V0aWxzLmVxdWFscyhfcXVlcnksIG90aGVyLl9xdWVyeSkKICAgICAgICAg\nICAgJiYgT2JqZWN0VXRpbHMuZXF1YWxzKF9wYXJhbXMsIG90aGVyLl9wYXJh\nbXMpOwogICAgfQoKICAgIC8qKgogICAgICogRGVmaW5lIGEgaGFzaGluZyBh\nbGdvcml0aG0gY29ycmVzcG9uZGluZyB0byB0aGUge0BsaW5rICNlcXVhbHN9\nCiAgICAgKiBtZXRob2QgZGVmaW5lZCBhYm92ZS4KICAgICAqLwogICAgcHVi\nbGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICBpbnQgY29kZSA9IDM3ICog\nMTcgKyBfY2FuZGlkYXRlQ2xhc3NOYW1lLmhhc2hDb2RlKCk7CiAgICAgICAg\naWYgKF9xdWVyeSAhPSBudWxsKQogICAgICAgICAgICBjb2RlID0gMzcgKiBj\nb2RlICsgX3F1ZXJ5Lmhhc2hDb2RlKCk7CiAgICAgICAgaWYgKF9wYXJhbXMg\nIT0gbnVsbCkKICAgICAgICAgICAgY29kZSA9IDM3ICogY29kZSArIF9wYXJh\nbXMuaGFzaENvZGUoKTsKICAgICAgICByZXR1cm4gY29kZTsKICAgIH0KCiAg\nICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAgICAgIFN0cmluZ0J1\naWxkZXIgYnVmID0gbmV3IFN0cmluZ0J1aWxkZXIoMTAyNCk7CiAgICAgICAg\nYnVmLmFwcGVuZChzdXBlci50b1N0cmluZygpKS4KICAgICAgICAgICAgYXBw\nZW5kKCJbcXVlcnk6WyIpLmFwcGVuZChfcXVlcnkpLmFwcGVuZCgiXSIpLgog\nICAgICAgICAgICBhcHBlbmQoIixhY2Nlc3MgcGF0aDoiKS5hcHBlbmQoX2Fj\nY2Vzc1BhdGhDbGFzc05hbWVzKS4KICAgICAgICAgICAgYXBwZW5kKCIsc3Vi\nczoiKS5hcHBlbmQoX3N1YmNsYXNzZXMpLgogICAgICAgICAgICBhcHBlbmQo\nIixpZ25vcmVDaGFuZ2VzOiIpLmFwcGVuZChfaWdub3JlQ2hhbmdlcykuCiAg\nICAgICAgICAgIGFwcGVuZCgiLHN0YXJ0UmFuZ2U6IikuYXBwZW5kKF9yYW5n\nZVN0YXJ0KS4KICAgICAgICAgICAgYXBwZW5kKCIsZW5kUmFuZ2U6IikuYXBw\nZW5kKF9yYW5nZUVuZCkuCiAgICAgICAgICAgIGFwcGVuZCgiLHRpbWVvdXQ6\nIikuYXBwZW5kKF90aW1lb3V0KS4KICAgICAgICAgICAgYXBwZW5kKCJdIik7\nCiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwogICAgfQoKICAgIC8v\nIC0tLS0tLS0tLS0gRXh0ZXJuYWxpemFibGUgaW1wbGVtZW50YXRpb24gLS0t\nLS0tLS0tLQoKICAgIHB1YmxpYyB2b2lkIHdyaXRlRXh0ZXJuYWwoT2JqZWN0\nT3V0cHV0IG91dCkKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAg\nICAgIG91dC53cml0ZU9iamVjdChfY2FuZGlkYXRlQ2xhc3NOYW1lKTsKICAg\nICAgICBvdXQud3JpdGVCb29sZWFuKF9zdWJjbGFzc2VzKTsKICAgICAgICBv\ndXQud3JpdGVPYmplY3QoX2FjY2Vzc1BhdGhDbGFzc05hbWVzKTsKICAgICAg\nICBvdXQud3JpdGVPYmplY3QoX3F1ZXJ5KTsKICAgICAgICBvdXQud3JpdGVC\nb29sZWFuKF9pZ25vcmVDaGFuZ2VzKTsKICAgICAgICBvdXQud3JpdGVPYmpl\nY3QoX3BhcmFtcyk7CiAgICAgICAgb3V0LndyaXRlTG9uZyhfcmFuZ2VTdGFy\ndCk7CiAgICAgICAgb3V0LndyaXRlTG9uZyhfcmFuZ2VFbmQpOwogICAgICAg\nIG91dC53cml0ZUludChfdGltZW91dCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgcmVhZEV4dGVybmFsKE9iamVjdElucHV0IGluKQogICAgICAgIHRocm93\ncyBJT0V4Y2VwdGlvbiwgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiB7CiAgICAg\nICAgX2NhbmRpZGF0ZUNsYXNzTmFtZSA9IChTdHJpbmcpIGluLnJlYWRPYmpl\nY3QoKTsKICAgICAgICBfc3ViY2xhc3NlcyA9IGluLnJlYWRCb29sZWFuKCk7\nCiAgICAgICAgX2FjY2Vzc1BhdGhDbGFzc05hbWVzID0gKFNldCkgaW4ucmVh\nZE9iamVjdCgpOwogICAgICAgIF9xdWVyeSA9IChTdHJpbmcpIGluLnJlYWRP\nYmplY3QoKTsKICAgICAgICBfaWdub3JlQ2hhbmdlcyA9IGluLnJlYWRCb29s\nZWFuKCk7CiAgICAgICAgX3BhcmFtcyA9IChNYXApIGluLnJlYWRPYmplY3Qo\nKTsKICAgICAgICBfcmFuZ2VTdGFydCA9IGluLnJlYWRMb25nKCk7CiAgICAg\nICAgX3JhbmdlRW5kID0gaW4ucmVhZExvbmcgKCk7CgkJX3RpbWVvdXQgPSBp\nbi5yZWFkSW50ICgpOwoJfQogICAgCiAgICAvKioKICAgICAqIFJldHVybnMg\ndGhlIHNldCBvZiB0aGUgYWNjZXNzUGF0aENsYXNzbmFtZXMgdGhhdCBleGlz\ndHMgaW4gdGhlIHF1ZXJ5CiAgICAgKiBAcmV0dXJuIC0tIFJldHVybnMgYSBz\nZXQgb2YgYWNjZXNzcGF0aCBjbGFzc25hbWVzLgogICAgICovCiAgICBwdWJs\naWMgU2V0PFN0cmluZz4gZ2V0QWNlc3NQYXRoQ2xhc3NOYW1lcygpIHsKICAg\nICAgICByZXR1cm4gdGhpcy5fYWNjZXNzUGF0aENsYXNzTmFtZXM7CiAgICB9\nCn0K\n","encoding":"base64"}

