{"sha":"09b78076dc273bec03b6dfa02581a9cb7f76b4da","node_id":"MDQ6QmxvYjIwNjM2NDowOWI3ODA3NmRjMjczYmVjMDNiNmRmYTAyNTgxYTljYjdmNzZiNGRh","size":10175,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/09b78076dc273bec03b6dfa02581a9cb7f76b4da","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZWU7CgppbXBvcnQgamF2YS51\ndGlsLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi5Ob3RTdXBwb3J0ZWRFeGNlcHRpb247Cmlt\ncG9ydCBqYXZheC50cmFuc2FjdGlvbi5TeXN0ZW1FeGNlcHRpb247CmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXI7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYWJsZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Q\ncml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLklu\ndmFsaWRTdGF0ZUV4Y2VwdGlvbjsKCi8qKgogKiBJbXBsZW1lbnRhdGlvbiBv\nZiB0aGUge0BsaW5rIE1hbmFnZWRSdW50aW1lfSBpbnRlcmZhY2UgdGhhdCBz\nZWFyY2hlcwogKiB0aHJvdWdoIGEgc2V0IG9mIGtub3duIEpOREkgbG9jYXRp\nb25zIGFuZCBtZXRob2QgaW52b2NhdGlvbnMgdG8gbG9jYXRlIHRoZQogKiBh\ncHByb3ByaWF0ZSBtZWNoYW5pc20gZm9yIG9idGFpbmluZyBhIFRyYW5zYWN0\naW9uTWFuYWdlci4KICogIEJ1aWx0IGluIHN1cHBvcnQgaXMgcHJvdmlkZWQg\nZm9yIHRoZSBmb2xsb3dpbmcgQXBwbGljYXRpb24gU2VydmVyczoKICogPHVs\nPgogKiA8bGk+Qmx1ZXN0b25lPC9saT4KICogPGxpPkhQIEFwcGxpY2F0aW9u\nIFNlcnZlcjwvbGk+CiAqIDxsaT5KQm9zczwvbGk+CiAqIDxsaT5KUnVuPC9s\naT4KICogPGxpPk9wZW5FSkI8L2xpPgogKiA8bGk+T3JhY2xlIEFwcGxpY2F0\naW9uIFNlcnZlcjwvbGk+CiAqIDxsaT5PcmlvbjwvbGk+CiAqIDxsaT5TdW5P\nTkU8L2xpPgogKiA8bGk+V2VibG9naWM8L2xpPgogKiA8bGk+V2Vic3BoZXJl\nPC9saT4KICogPC91bD4KICoKICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVh\ndXgKICovCnB1YmxpYyBjbGFzcyBBdXRvbWF0aWNNYW5hZ2VkUnVudGltZSBl\neHRlbmRzIEFic3RyYWN0TWFuYWdlZFJ1bnRpbWUKICAgIGltcGxlbWVudHMg\nTWFuYWdlZFJ1bnRpbWUsIENvbmZpZ3VyYWJsZSB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgU3RyaW5nIFtdIEpORElfTE9DUyA9IG5ldyBTdHJpbmcg\nW117CiAgICAgICAgImphdmF4LnRyYW5zYWN0aW9uLlRyYW5zYWN0aW9uTWFu\nYWdlciIsIC8vIHdlYmxvZ2ljCiAgICAgICAgImphdmE6L1RyYW5zYWN0aW9u\nTWFuYWdlciIsIC8vIGpib3NzICYganJ1bgogICAgICAgICJqYXZhOi9EZWZh\ndWx0RG9tYWluL1RyYW5zYWN0aW9uTWFuYWdlciIsIC8vIGpydW4gdG9vCiAg\nICAgICAgImphdmE6Y29tcC9wbS9UcmFuc2FjdGlvbk1hbmFnZXIiLCAvLyBv\ncmlvbiAmIG9yYWNsZQogICAgICAgICJqYXZhOmNvbXAvVHJhbnNhY3Rpb25N\nYW5hZ2VyIiwgLy8gZ2VuZXJpYwogICAgICAgICJqYXZhOnBtL1RyYW5zYWN0\naW9uTWFuYWdlciIsIC8vIGJvcmxhbmQKICAgICAgICAiamF2YTphcHBzZXJ2\nZXIvVHJhbnNhY3Rpb25NYW5hZ2VyIiwgLy8gR2xhc3NGaXNoCiAgICB9Owog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFtdIE1FVEhPRFMgPSBu\nZXcgU3RyaW5nW117CiAgICAgICAgImNvbS5hcmp1bmEuanRhLkpUQV9UcmFu\nc2FjdGlvbk1hbmFnZXIudHJhbnNhY3Rpb25NYW5hZ2VyIiwgLy8gaHAKICAg\nICAgICAiY29tLmJsdWVzdG9uZS5qdGEuU2FUcmFuc2FjdGlvbk1hbmFnZXJG\nYWN0b3J5LlNhR2V0VHJhbnNhY3Rpb25NYW5hZ2VyIiwKICAgICAgICAib3Jn\nLm9wZW5lamIuT3BlbkVKQi5nZXRUcmFuc2FjdGlvbk1hbmFnZXIiLAogICAg\nICAgICJjb20uc3VuLmp0cy5qdGEuVHJhbnNhY3Rpb25NYW5hZ2VySW1wbC5n\nZXRUcmFuc2FjdGlvbk1hbmFnZXJJbXBsIiwKICAgICAgICAiY29tLmlucHJp\nc2UudmlzaXRyYW5zYWN0Lmp0YS5UcmFuc2FjdGlvbk1hbmFnZXJJbXBsLiIK\nICAgICAgICAgICAgKyAiZ2V0VHJhbnNhY3Rpb25NYW5hZ2VySW1wbCIsIC8v\nIGJvcmxhbmQKICAgIH07CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTWFu\nYWdlZFJ1bnRpbWUgUkVHSVNUUlk7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBXTFNNYW5hZ2VkUnVudGltZSBXTFM7CiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBTdW5PbmVNYW5hZ2VkUnVudGltZSBTVU5PTkU7CiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBXQVNNYW5hZ2VkUnVudGltZSBXQVM7CiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBXQVNSZWdpc3RyeU1hbmFnZWRSdW50aW1lIFdB\nU19SRUc7CgogICAgcHJpdmF0ZSBzdGF0aWMgTG9jYWxpemVyIF9sb2MgPSBM\nb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChBdXRvbWF0aWNNYW5hZ2Vk\nUnVudGltZS5jbGFzcyk7CgogICAgc3RhdGljIHsKICAgICAgICBNYW5hZ2Vk\nUnVudGltZSBtciA9IG51bGw7CgogICAgICAgIG1yID0gbnVsbDsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBtciA9IChNYW5hZ2VkUnVudGltZSkgQ2xh\nc3MuCiAgICAgICAgICAgICAgICBmb3JOYW1lKCJvcmcuYXBhY2hlLm9wZW5q\ncGEuZWUuUmVnaXN0cnlNYW5hZ2VkUnVudGltZSIpLgogICAgICAgICAgICAg\nICAgICAgIG5ld0luc3RhbmNlKCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIHQpIHsKICAgICAgICAgICAgLy8gbWlnaHQgYmUgSlRBIHZlcnNpb24g\nbG93ZXIgdGhhbiAxLjEsIHdoaWNoIGRvZXNuJ3QgaGF2ZSAKICAgICAgICAg\nICAgLy8gVHJhbnNhY3Rpb25TeW5jaHJvbml6YXRpb25SZWdpc3RyeQogICAg\nICAgIH0KICAgICAgICBSRUdJU1RSWSA9IG1yOwoKICAgICAgICBtciA9IG51\nbGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbXIgPSBuZXcgV0xTTWFu\nYWdlZFJ1bnRpbWUoKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkg\newogICAgICAgIH0KICAgICAgICBXTFMgPSAoV0xTTWFuYWdlZFJ1bnRpbWUp\nIG1yOwoKICAgICAgICBtciA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgbXIgPSBuZXcgU3VuT25lTWFuYWdlZFJ1bnRpbWUoKTsKICAgICAg\nICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgIH0KICAgICAgICBT\nVU5PTkUgPSAoU3VuT25lTWFuYWdlZFJ1bnRpbWUpIG1yOwoKICAgICAgICBt\nciA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbXIgPSBuZXcg\nV0FTTWFuYWdlZFJ1bnRpbWUoKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2Fi\nbGUgdCkgewogICAgICAgIH0KICAgICAgICBXQVMgPSAoV0FTTWFuYWdlZFJ1\nbnRpbWUpIG1yOwoKICAgICAgICBtciA9IG51bGw7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgLy8gSW4gYSBXZWJTcGhlcmUgZW52aXJvbm1lbnQgdGhl\nIHRocmVhZCdzIGN1cnJlbnQgY2xhc3Nsb2FkZXIgbWlnaHQKICAgICAgICAg\nICAgLy8gbm90IGhhdmUgYWNjZXNzIHRvIHRoZSBXZWJTcGhlcmUgQVBJcy4g\nSG93ZXZlciB0aGUgInJ1bnRpbWUiCiAgICAgICAgICAgIC8vIGNsYXNzbG9h\nZGVyIHdpbGwgaGF2ZSBhY2Nlc3MgdG8gdGhlbS4KICAgICAgICAgICAgCiAg\nICAgICAgICAgIC8vIFNob3VsZCBub3QgbmVlZCBhIGRvUHJpdiBnZXR0aW5n\nIHRoaXMgY2xhc3MnIGNsYXNzbG9hZGVyCiAgICAgICAgICAgIENsYXNzTG9h\nZGVyIGNsID0gQXV0b21hdGljTWFuYWdlZFJ1bnRpbWUuY2xhc3MuZ2V0Q2xh\nc3NMb2FkZXIoKTsKCiAgICAgICAgICAgIENsYXNzPFdBU1JlZ2lzdHJ5TWFu\nYWdlZFJ1bnRpbWU+IG1yQ2xhc3MgPQogICAgICAgICAgICAgICAgKENsYXNz\nPFdBU1JlZ2lzdHJ5TWFuYWdlZFJ1bnRpbWU+KSBKMkRvUHJpdkhlbHBlcgog\nICAgICAgICAgICAgICAgICAgICAgICAuZ2V0Rm9yTmFtZUFjdGlvbigKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXQVNSZWdpc3RyeU1hbmFn\nZWRSdW50aW1lLmNsYXNzLmdldE5hbWUoKSwKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICB0cnVlLCBjbCkucnVuKCk7CiAgICAgICAgICAgIG1y\nID0gSjJEb1ByaXZIZWxwZXIubmV3SW5zdGFuY2VBY3Rpb24obXJDbGFzcyku\ncnVuKCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAg\nICAgICAgLy8gc2FmZSB0byBpZ25vcmUKICAgICAgICB9CiAgICAgICAgV0FT\nX1JFRyA9IChXQVNSZWdpc3RyeU1hbmFnZWRSdW50aW1lKSBtcjsKICAgIH0K\nCiAgICBwcml2YXRlIENvbmZpZ3VyYXRpb24gX2NvbmYgPSBudWxsOwogICAg\ncHJpdmF0ZSBNYW5hZ2VkUnVudGltZSBfcnVudGltZSA9IG51bGw7CiAgICAK\nICAgIHB1YmxpYyBUcmFuc2FjdGlvbk1hbmFnZXIgZ2V0VHJhbnNhY3Rpb25N\nYW5hZ2VyKCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBp\nZiAoX3J1bnRpbWUgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIF9ydW50\naW1lLmdldFRyYW5zYWN0aW9uTWFuYWdlcigpOwoKICAgICAgICBMaXN0PFRo\ncm93YWJsZT4gZXJyb3JzID0gbmV3IExpbmtlZExpc3Q8VGhyb3dhYmxlPigp\nOwogICAgICAgIFRyYW5zYWN0aW9uTWFuYWdlciB0bSA9IG51bGw7CgogICAg\nICAgIC8vIFRyeSB0aGUgcmVnaXN0cnkgZXh0ZW5zaW9ucyBmaXJzdCBzbyB0\naGF0IGFueSBhcHBsaWNhYmxlIHZlbmRvcgogICAgICAgIC8vIHNwZWNpZmlj\nIGV4dGVuc2lvbnMgYXJlIHVzZWQuCiAgICAgICAgaWYgKFdBU19SRUcgIT0g\nbnVsbCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdG0g\nPSBXQVNfUkVHLmdldFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAgICAgICAg\nICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICAgICAgZXJy\nb3JzLmFkZCh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG0g\nIT0gbnVsbCkgewogICAgICAgICAgICAgICAgX3J1bnRpbWUgPSBXQVNfUkVH\nOwogICAgICAgICAgICAgICAgcmV0dXJuIHRtOwogICAgICAgICAgICB9CiAg\nICAgICAgfQoKICAgICAgICAvLyBUaGVuIHRyeSB0aGUgcmVnaXN0cnksIHdo\naWNoIGlzIHRoZSBvZmZpY2lhbCB3YXkgdG8gb2J0YWluCiAgICAgICAgLy8g\ndHJhbnNhY3Rpb24gc3luY2hyb25pY2F0aW9uIGluIEpUQSAxLjEKICAgICAg\nICBpZiAoUkVHSVNUUlkgIT0gbnVsbCkgewogICAgICAgICAgICB0cnkgewog\nICAgICAgICAgICAgICAgdG0gPSBSRUdJU1RSWS5nZXRUcmFuc2FjdGlvbk1h\nbmFnZXIoKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsK\nICAgICAgICAgICAgICAgIGVycm9ycy5hZGQodCk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgaWYgKHRtICE9IG51bGwpIHsKICAgICAgICAgICAgICAg\nIF9ydW50aW1lID0gUkVHSVNUUlk7CiAgICAgICAgICAgICAgICByZXR1cm4g\ndG07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChXTFMg\nIT0gbnVsbCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\ndG0gPSBXTFMuZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgICAgICBlcnJv\ncnMuYWRkKHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0bSAh\nPSBudWxsKSB7CiAgICAgICAgICAgICAgICBfcnVudGltZSA9IFdMUzsKICAg\nICAgICAgICAgICAgIHJldHVybiB0bTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KCiAgICAgICAgaWYgKFdBUyAhPSBudWxsKSB7CiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICBXQVMuc2V0Q29uZmlndXJhdGlvbihfY29u\nZik7CiAgICAgICAgICAgICAgICBXQVMuc3RhcnRDb25maWd1cmF0aW9uKCk7\nCiAgICAgICAgICAgICAgICBXQVMuZW5kQ29uZmlndXJhdGlvbigpOwogICAg\nICAgICAgICAgICAgdG0gPSBXQVMuZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7\nCiAgICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAg\nICAgICAgICBlcnJvcnMuYWRkKHQpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGlmICh0bSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBfcnVudGlt\nZSA9IFdBUzsKICAgICAgICAgICAgICAgIHJldHVybiB0bTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gdHJ5IHRvIGZpbmQgYSBqbmRp\nIHJ1bnRpbWUKICAgICAgICBKTkRJTWFuYWdlZFJ1bnRpbWUgam1yID0gbmV3\nIEpORElNYW5hZ2VkUnVudGltZSgpOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgSk5ESV9MT0NTLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGpt\nci5zZXRUcmFuc2FjdGlvbk1hbmFnZXJOYW1lKEpORElfTE9DU1tpXSk7CiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0bSA9IGptci5nZXRU\ncmFuc2FjdGlvbk1hbmFnZXIoKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhy\nb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIGVycm9ycy5hZGQodCk7CiAg\nICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRtICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgIF9ydW50aW1lID0gam1yOwogICAgICAgICAgICAgICAg\ncmV0dXJuIHRtOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAv\nLyBsb29rIGZvciBhIG1ldGhvZCBydW50aW1lCiAgICAgICAgSW52b2NhdGlv\nbk1hbmFnZWRSdW50aW1lIGltciA9IG5ldyBJbnZvY2F0aW9uTWFuYWdlZFJ1\nbnRpbWUoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE1FVEhPRFMu\nbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaW1yLnNldENvbmZpZ3VyYXRp\nb24oX2NvbmYpOwogICAgICAgICAgICBpbXIuc2V0VHJhbnNhY3Rpb25NYW5h\nZ2VyTWV0aG9kKE1FVEhPRFNbaV0pOwogICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgdG0gPSBpbXIuZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7\nCiAgICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAg\nICAgICAgICBlcnJvcnMuYWRkKHQpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGlmICh0bSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBfcnVudGlt\nZSA9IGltcjsKICAgICAgICAgICAgICAgIHJldHVybiB0bTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKFNVTk9ORSAhPSBudWxsKSB7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0bSA9IFNVTk9O\nRS5nZXRUcmFuc2FjdGlvbk1hbmFnZXIoKTsKICAgICAgICAgICAgfSBjYXRj\naCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIGVycm9ycy5hZGQo\ndCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRtICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgIF9ydW50aW1lID0gU1VOT05FOwogICAgICAg\nICAgICAgICAgcmV0dXJuIHRtOwogICAgICAgICAgICB9CiAgICAgICAgfQoK\nICAgICAgICBUaHJvd2FibGVbXSB0ID0gKFRocm93YWJsZSBbXSkgZXJyb3Jz\nLnRvQXJyYXkoCiAgICAgICAgICAgIG5ldyBUaHJvd2FibGUgW2Vycm9ycy5z\naXplKCldKTsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0\naW9uKF9sb2MuZ2V0KCJ0bS1ub3QtZm91bmQiKSkuCiAgICAgICAgICAgIHNl\ndEZhdGFsKHRydWUpLnNldE5lc3RlZFRocm93YWJsZXModCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0Q29uZmlndXJhdGlvbihDb25maWd1cmF0aW9u\nIGNvbmYpIHsKICAgICAgICBfY29uZiA9IGNvbmY7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc3RhcnRDb25maWd1cmF0aW9uKCkgewogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24oKSB7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0Um9sbGJhY2tPbmx5KFRocm93YWJsZSBjYXVzZSkKICAg\nICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBjaGVjayB0byBz\nZWUgaWYgdGhlIHJ1bnRpbWUgaXMgY2FjaGVkCiAgICAgICAgaWYgKF9ydW50\naW1lID09IG51bGwpCiAgICAgICAgICAgIGdldFRyYW5zYWN0aW9uTWFuYWdl\ncigpOwoKICAgICAgICBpZiAoX3J1bnRpbWUgIT0gbnVsbCkKICAgICAgICAg\nICAgX3J1bnRpbWUuc2V0Um9sbGJhY2tPbmx5KGNhdXNlKTsKICAgIH0KCiAg\nICBwdWJsaWMgVGhyb3dhYmxlIGdldFJvbGxiYWNrQ2F1c2UoKQogICAgICAg\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIGNoZWNrIHRvIHNlZSBp\nZiB0aGUgcnVudGltZSBpcyBjYWNoZWQKICAgICAgICBpZiAoX3J1bnRpbWUg\nPT0gbnVsbCkKICAgICAgICAgICAgZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7\nCgogICAgICAgIGlmIChfcnVudGltZSAhPSBudWxsKQogICAgICAgICAgICBy\nZXR1cm4gX3J1bnRpbWUuZ2V0Um9sbGJhY2tDYXVzZSgpOwoKICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgIH0KICAgIAogICAgcHVibGljIE9iamVjdCBnZXRU\ncmFuc2FjdGlvbktleSgpIHRocm93cyBFeGNlcHRpb24sIFN5c3RlbUV4Y2Vw\ndGlvbiB7CiAgICAgICAgaWYoX3J1bnRpbWUgPT0gbnVsbCkgCiAgICAgICAg\nICAgIGdldFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAgICAgIAogICAgICAg\nIGlmKF9ydW50aW1lICE9IG51bGwgKQogICAgICAgICAgICByZXR1cm4gX3J1\nbnRpbWUuZ2V0VHJhbnNhY3Rpb25LZXkoKTsKICAgICAgICAKICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIERlbGVnYXRlIG5v\nblRyYW5zYWN0aW9uYWwgd29yayB0byB0aGUgYXBwcm9wcmlhdGUgbWFuYWdl\nZCBydW50aW1lLiBJZiBubwogICAgICogbWFuYWdlZCBydW50aW1lIGlzIGZv\ndW5kIHRoZW4gZGVsZWdhdGUge0BsaW5rIEFic3RyYWN0TWFuYWdlZFJ1bnRp\nbWV9LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBkb05vblRyYW5zYWN0aW9u\nYWxXb3JrKFJ1bm5hYmxlIHJ1bm5hYmxlKQogICAgICAgICAgICB0aHJvd3Mg\nTm90U3VwcG9ydGVkRXhjZXB0aW9uIHsKICAgICAgICAvLyBPYnRhaW4gYSB0\ncmFuc2FjdGlvbiBtYW5hZ2VyIHRvIGluaXRpYWxpemUgdGhlIHJ1bnRpbWUu\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZ2V0VHJhbnNhY3Rpb25NYW5h\nZ2VyKCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgTm90U3VwcG9ydGVkRXhjZXB0aW9uIG5zZSA9CiAgICAgICAgICAg\nICAgICBuZXcgTm90U3VwcG9ydGVkRXhjZXB0aW9uKF9sb2MKICAgICAgICAg\nICAgICAgICAgICAgICAgLmdldCgidG0tdW5hdmFpbGFibGUiLCBfcnVudGlt\nZSkuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgbnNlLmluaXRDYXVzZShl\nKTsKICAgICAgICAgICAgdGhyb3cgbnNlOwogICAgICAgIH0KICAgICAgICBf\ncnVudGltZS5kb05vblRyYW5zYWN0aW9uYWxXb3JrKHJ1bm5hYmxlKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

