{"sha":"77dffd1bc9c56c5f28ae10a0eb1b647638b14482","node_id":"MDQ6QmxvYjIwNjM2NDo3N2RmZmQxYmM5YzU2YzVmMjhhZTEwYTBlYjFiNjQ3NjM4YjE0NDgy","size":11466,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/77dffd1bc9c56c5f28ae10a0eb1b647638b14482","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEuaW8uT2JqZWN0U3RyZWFtRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGls\nLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9y\ndCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0SXRlcmF0\nb3I7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5yb3AuUmVzdWx0\nTGlzdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlJ1bnRpbWVF\neGNlcHRpb25UcmFuc2xhdG9yOwoKLyoqCiAqIERlbGVnYXRpbmcgcmVzdWx0\nIGxpc3QgdGhhdCBjYW4gYWxzbyBwZXJmb3JtIGV4Y2VwdGlvbiB0cmFuc2xh\ndGlvbgogKiBmb3IgdXNlIGluIGZhY2FkZXMuCiAqCiAqIEBzaW5jZSAwLjQu\nMAogKiBAYXV0aG9yIE1hcmMgUHJ1ZCdob21tZWF1eAogKiBAbm9qYXZhZG9j\nCiAqLwpwdWJsaWMgY2xhc3MgRGVsZWdhdGluZ1Jlc3VsdExpc3Q8VD4KICAg\nIGltcGxlbWVudHMgUmVzdWx0TGlzdDxUPiB7CgogICAgcHJpdmF0ZSBmaW5h\nbCBSZXN1bHRMaXN0PFQ+IF9kZWw7CiAgICBwcml2YXRlIGZpbmFsIFJ1bnRp\nbWVFeGNlcHRpb25UcmFuc2xhdG9yIF90cmFuczsKCiAgICAvKioKICAgICAq\nIENvbnN0cnVjdG9yOyBzdXBwbHkgZGVsZWdhdGUuCiAgICAgKi8KICAgIHB1\nYmxpYyBEZWxlZ2F0aW5nUmVzdWx0TGlzdChSZXN1bHRMaXN0PFQ+IGxpc3Qp\nIHsKICAgICAgICB0aGlzKGxpc3QsIG51bGwpOwogICAgfQoKICAgIC8qKgog\nICAgICogQ29uc3RydWN0b3I7IHN1cHBseSBkZWxlZ2F0ZSBhbmQgZXhjZXB0\naW9uIHRyYW5zbGF0b3IuCiAgICAgKi8KICAgIHB1YmxpYyBEZWxlZ2F0aW5n\nUmVzdWx0TGlzdChSZXN1bHRMaXN0PFQ+IGxpc3QsIFJ1bnRpbWVFeGNlcHRp\nb25UcmFuc2xhdG9yIHRyYW5zKSB7CiAgICAgICAgX2RlbCA9IGxpc3Q7CiAg\nICAgICAgX3RyYW5zID0gdHJhbnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdGhlIGRpcmVjdCBkZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGlj\nIFJlc3VsdExpc3Q8VD4gZ2V0RGVsZWdhdGUoKSB7CiAgICAgICAgcmV0dXJu\nIF9kZWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG5hdGl2\nZSBkZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIFJlc3VsdExpc3Q8VD4g\nZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9kZWwg\naW5zdGFuY2VvZiBEZWxlZ2F0aW5nUmVzdWx0TGlzdAogICAgICAgICAgICA/\nICgoRGVsZWdhdGluZ1Jlc3VsdExpc3Q8VD4pIF9kZWwpLmdldElubmVybW9z\ndERlbGVnYXRlKCkgOiBfZGVsOwogICAgfQoKICAgIC8qKgogICAgICogV3Jp\ndGVzIGRlbGVnYXRlLCB3aGljaCBtYXkgaW4gdHVybiB3cml0ZSBhIG5vcm1h\nbCBsaXN0LgogICAgICovCiAgICBwdWJsaWMgT2JqZWN0IHdyaXRlUmVwbGFj\nZSgpCiAgICAgICAgdGhyb3dzIE9iamVjdFN0cmVhbUV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIF9kZWw7CiAgICB9CgogICAgcHVibGljIGludCBoYXNo\nQ29kZSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gZ2V0\nSW5uZXJtb3N0RGVsZWdhdGUoKS5oYXNoQ29kZSgpOwogICAgICAgIH0gY2F0\nY2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cg\ndHJhbnNsYXRlKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewogICAgICAgIGlmIChvdGhl\nciA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBp\nZiAob3RoZXIgaW5zdGFuY2VvZiBEZWxlZ2F0aW5nUmVzdWx0TGlzdCkKICAg\nICAgICAgICAgb3RoZXIgPSAoKERlbGVnYXRpbmdSZXN1bHRMaXN0KSBvdGhl\ncikuZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKTsKICAgICAgICB0cnkgewogICAg\nICAgICAgICByZXR1cm4gZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKS5lcXVhbHMo\nb3RoZXIpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUp\nIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2xhdGUgdGhlIE9wZW5KUEEg\nZXhjZXB0aW9uLgogICAgICovCiAgICBwcm90ZWN0ZWQgUnVudGltZUV4Y2Vw\ndGlvbiB0cmFuc2xhdGUoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAg\nIHJldHVybiAoX3RyYW5zID09IG51bGwpID8gcmUgOiBfdHJhbnMudHJhbnNs\nYXRlKHJlKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1Byb3ZpZGVy\nT3BlbigpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gX2Rl\nbC5pc1Byb3ZpZGVyT3BlbigpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVF\neGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJl\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRVc2Vy\nT2JqZWN0KCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBf\nZGVsLmdldFVzZXJPYmplY3QoKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1l\nRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShy\nZSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBzZXRV\nc2VyT2JqZWN0KE9iamVjdCBvcGFxdWUpIHsKICAgICAgICB0cnkgewogICAg\nICAgICAgICBfZGVsLnNldFVzZXJPYmplY3Qob3BhcXVlKTsKICAgICAgICB9\nIGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRo\ncm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGNsb3NlKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9k\nZWwuY2xvc2UoKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9u\nIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAg\nICAgfQogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzQ2xvc2VkKCkgewog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfZGVsLmlzQ2xvc2Vk\nKCk7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewog\nICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgaW50IHNpemUoKSB7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgcmV0dXJuIF9kZWwuc2l6ZSgpOwogICAgICAgIH0gY2F0Y2gg\nKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJh\nbnNsYXRlKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gaXNFbXB0eSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1\ncm4gX2RlbC5pc0VtcHR5KCk7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4\nY2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBjb250YWlu\ncyhPYmplY3QgbykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVy\nbiBfZGVsLmNvbnRhaW5zKG8pOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVF\neGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJl\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIEl0ZXJhdG9yPFQ+IGl0\nZXJhdG9yKCkgewogICAgICAgIHJldHVybiBsaXN0SXRlcmF0b3IoKTsKICAg\nIH0KCiAgICBwdWJsaWMgT2JqZWN0W10gdG9BcnJheSgpIHsKICAgICAgICB0\ncnkgewogICAgICAgICAgICByZXR1cm4gX2RlbC50b0FycmF5KCk7CiAgICAg\nICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAg\nICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0W10gdG9BcnJheShPYmplY3RbXSBhKSB7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgcmV0dXJuIF9kZWwudG9BcnJheShhKTsKICAg\nICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAg\nICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyBib29sZWFuIGFkZChUIG8pIHsKICAgICAgICB0cnkgewogICAg\nICAgICAgICByZXR1cm4gX2RlbC5hZGQobyk7CiAgICAgICAgfSBjYXRjaCAo\nUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0cmFu\nc2xhdGUocmUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgYm9vbGVh\nbiByZW1vdmUoT2JqZWN0IG8pIHsKICAgICAgICB0cnkgewogICAgICAgICAg\nICByZXR1cm4gX2RlbC5yZW1vdmUobyk7CiAgICAgICAgfSBjYXRjaCAoUnVu\ndGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0cmFuc2xh\ndGUocmUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBj\nb250YWluc0FsbChDb2xsZWN0aW9uPD8+IGMpIHsKICAgICAgICB0cnkgewog\nICAgICAgICAgICByZXR1cm4gX2RlbC5jb250YWluc0FsbChjKTsKICAgICAg\nICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAg\nIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1\nYmxpYyBib29sZWFuIGFkZEFsbChDb2xsZWN0aW9uPD8gZXh0ZW5kcyBUPiBj\nKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIF9kZWwuYWRk\nQWxsKGMpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUp\nIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYWRkQWxsKGludCBpbmRleCwg\nQ29sbGVjdGlvbjw/IGV4dGVuZHMgVD4gYykgewogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIHJldHVybiBfZGVsLmFkZEFsbChpbmRleCwgYyk7CiAgICAg\nICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAg\nICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiByZW1vdmVBbGwoQ29sbGVjdGlvbjw/PiBjKSB7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIF9kZWwucmVtb3ZlQWxs\nKGMpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsK\nICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gcmV0YWluQWxsKENvbGxlY3Rpb248\nPz4gYykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfZGVs\nLnJldGFpbkFsbChjKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0\naW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIF9kZWwuY2xlYXIoKTsKICAgICAgICB9\nIGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRo\ncm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyBUIGdldChpbnQgaW5kZXgpIHsKICAgICAgICB0cnkgewogICAgICAgICAg\nICByZXR1cm4gX2RlbC5nZXQoaW5kZXgpOwogICAgICAgIH0gY2F0Y2ggKFJ1\nbnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNs\nYXRlKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIFQgc2V0KGlu\ndCBpbmRleCwgVCBlbGVtZW50KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgcmV0dXJuIF9kZWwuc2V0KGluZGV4LCBlbGVtZW50KTsKICAgICAgICB9\nIGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRo\ncm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGFkZChpbnQgaW5kZXgsIFQgZWxlbWVudCkgewogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIF9kZWwuYWRkKGluZGV4LCBlbGVtZW50KTsKICAg\nICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAg\nICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyBUIHJlbW92ZShpbnQgaW5kZXgpIHsKICAgICAgICB0cnkgewog\nICAgICAgICAgICByZXR1cm4gX2RlbC5yZW1vdmUoaW5kZXgpOwogICAgICAg\nIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAg\ndGhyb3cgdHJhbnNsYXRlKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIGludCBpbmRleE9mKE9iamVjdCBvKSB7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgcmV0dXJuIF9kZWwuaW5kZXhPZihvKTsKICAgICAgICB9IGNh\ndGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93\nIHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBp\nbnQgbGFzdEluZGV4T2YoT2JqZWN0IG8pIHsKICAgICAgICB0cnkgewogICAg\nICAgICAgICByZXR1cm4gX2RlbC5sYXN0SW5kZXhPZihvKTsKICAgICAgICB9\nIGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRo\ncm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyBMaXN0SXRlcmF0b3I8VD4gbGlzdEl0ZXJhdG9yKCkgewogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRGVsZWdhdGluZ0xpc3RJdGVy\nYXRvcjxUPihfZGVsLmxpc3RJdGVyYXRvcigpKTsKICAgICAgICB9IGNhdGNo\nIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRy\nYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBMaXN0\nSXRlcmF0b3I8VD4gbGlzdEl0ZXJhdG9yKGludCBpbmRleCkgewogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRGVsZWdhdGluZ0xpc3RJ\ndGVyYXRvcjxUPihfZGVsLmxpc3RJdGVyYXRvcihpbmRleCkpOwogICAgICAg\nIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAg\ndGhyb3cgdHJhbnNsYXRlKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIExpc3Q8VD4gc3ViTGlzdChpbnQgZnJvbUluZGV4LCBpbnQgdG9JbmRl\neCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfZGVsLnN1\nYkxpc3QoZnJvbUluZGV4LCB0b0luZGV4KTsKICAgICAgICB9IGNhdGNoIChS\ndW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5z\nbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgU3Ry\naW5nIHRvU3RyaW5nKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJl\ndHVybiBfZGVsLnRvU3RyaW5nKCk7CiAgICAgICAgfSBjYXRjaCAoUnVudGlt\nZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUo\ncmUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIERlbGVnYXRp\nbmcgaXRlcmF0b3IgdGhhdCBhbHNvIHBlcmZvcm1zIGV4Y2VwdGlvbiB0cmFu\nc2xhdGlvbi4KICAgICAqLwogICAgcHVibGljIGNsYXNzIERlbGVnYXRpbmdM\naXN0SXRlcmF0b3I8VD4KICAgICAgICBpbXBsZW1lbnRzIExpc3RJdGVyYXRv\ncjxUPiB7CgogICAgICAgIHByaXZhdGUgZmluYWwgTGlzdEl0ZXJhdG9yPFQ+\nIF9kZWw7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdG9yOyBz\ndXBwbHkgZGVsZWdhdGUuCiAgICAgICAgICovCiAgICAgICAgcHVibGljIERl\nbGVnYXRpbmdMaXN0SXRlcmF0b3IoTGlzdEl0ZXJhdG9yPFQ+IGl0KSB7CiAg\nICAgICAgICAgIF9kZWwgPSBpdDsKICAgICAgICB9CgogICAgICAgIC8qKgog\nICAgICAgICAqIFJldHVybiB0aGUgZGlyZWN0IGRlbGVnYXRlLgogICAgICAg\nICAqLwogICAgICAgIHB1YmxpYyBMaXN0SXRlcmF0b3I8VD4gZ2V0RGVsZWdh\ndGUoKSB7CiAgICAgICAgICAgIHJldHVybiBfZGVsOwogICAgICAgIH0KCiAg\nICAgICAgLyoqCiAgICAgICAgICogUmV0dXJuIHRoZSBuYXRpdmUgZGVsZWdh\ndGUuCiAgICAgICAgICovCiAgICAgICAgcHVibGljIExpc3RJdGVyYXRvcjxU\nPiBnZXRJbm5lcm1vc3REZWxlZ2F0ZSgpIHsKICAgICAgICAgICAgcmV0dXJu\nIF9kZWwgaW5zdGFuY2VvZiBEZWxlZ2F0aW5nTGlzdEl0ZXJhdG9yCiAgICAg\nICAgICAgICAgICA/ICgoRGVsZWdhdGluZ0xpc3RJdGVyYXRvcjxUPikgX2Rl\nbCkuZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKSA6IF9kZWw7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgaW50IGhhc2hDb2RlKCkgewogICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgcmV0dXJuIGdldElubmVybW9zdERlbGVn\nYXRlKCkuaGFzaENvZGUoKTsKICAgICAgICAgICAgfSBjYXRjaCAoUnVudGlt\nZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICAgICAgdGhyb3cgdHJhbnNs\nYXRlKHJlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewogICAgICAgICAg\nICBpZiAob3RoZXIgPT0gdGhpcykKICAgICAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBEZWxlZ2F0\naW5nTGlzdEl0ZXJhdG9yKQogICAgICAgICAgICAgICAgb3RoZXIgPSAoKERl\nbGVnYXRpbmdMaXN0SXRlcmF0b3IpIG90aGVyKS5nZXRJbm5lcm1vc3REZWxl\nZ2F0ZSgpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0\ndXJuIGdldElubmVybW9zdERlbGVnYXRlKCkuZXF1YWxzKG90aGVyKTsKICAg\nICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAg\nICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaGFzTmV4dCgp\nIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBf\nZGVsLmhhc05leHQoKTsKICAgICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4\nY2VwdGlvbiByZSkgewogICAgICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRl\nKHJlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIFQgbmV4dCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nIHJldHVybiBfZGVsLm5leHQoKTsKICAgICAgICAgICAgfSBjYXRjaCAoUnVu\ndGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICAgICAgdGhyb3cgdHJh\nbnNsYXRlKHJlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIGJvb2xlYW4gaGFzUHJldmlvdXMoKSB7CiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX2RlbC5oYXNQcmV2aW91cygp\nOwogICAgICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7\nCiAgICAgICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgVCBwcmV2aW91cygp\nIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBf\nZGVsLnByZXZpb3VzKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVF\neGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAgIHRocm93IHRyYW5zbGF0\nZShyZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBpbnQgbmV4dEluZGV4KCkgewogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgcmV0dXJuIF9kZWwubmV4dEluZGV4KCk7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAg\nICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBpbnQgcHJldmlvdXNJbmRleCgpIHsKICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBfZGVsLnBy\nZXZpb3VzSW5kZXgoKTsKICAgICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4\nY2VwdGlvbiByZSkgewogICAgICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRl\nKHJlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgcmVtb3ZlKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgX2RlbC5yZW1vdmUoKTsKICAgICAgICAgICAgfSBjYXRjaCAoUnVu\ndGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICAgICAgdGhyb3cgdHJh\nbnNsYXRlKHJlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIHZvaWQgc2V0KFQgbykgewogICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgX2RlbC5zZXQobyk7CiAgICAgICAgICAgIH0gY2F0Y2gg\nKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAgIHRocm93\nIHRyYW5zbGF0ZShyZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyB2b2lkIGFkZChUIG8pIHsKICAgICAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgICAgIF9kZWwuYWRkKG8pOwogICAgICAgICAgICB9IGNh\ndGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgICAgICB0\naHJvdyB0cmFuc2xhdGUgKHJlKTsKCQkJfQoJCX0KCX0KfQoK\n","encoding":"base64"}

