{"sha":"7f23a9808d438224e3bcb132cd00fcfc49187e99","node_id":"MDQ6QmxvYjIwNjM2NDo3ZjIzYTk4MDhkNDM4MjI0ZTNiY2IxMzJjZDAwZmNmYzQ5MTg3ZTk5","size":9944,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7f23a9808d438224e3bcb132cd00fcfc49187e99","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgamF2YS5s\nYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZhLmxhbmcucmVm\nbGVjdC5JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uOwppbXBvcnQgamF2YS5s\nYW5nLnJlZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5SZWZsZWN0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXpl\ncjsKCgovKioKICogQSBzdHJhdGVneSB0byBmaWxsIGRhdGEgaW50byBhIHtA\nbGluayBSZXN1bHRTaGFwZX0uCiAqIDxCUj4KICogQXZhaWxhYmxlIHN0cmF0\nZWd5IGltcGxlbWVudGF0aW9ucyBjYW4gZmlsbCBieSBpbnZva2luZyBjb25z\ndHJ1Y3Rvciwgc2V0dGluZyBhcnJheSBlbGVtZW50cywgZGlyZWN0IGFzc2ln\nbm1lbnQsCiAqIGludm9raW5nIHB1dChrZXksdmFsdWUpLXN0eWxlIG1ldGhv\nZCBvbiBNYXAgb3IgZmFjdG9yeS1jb25zdHJ1Y3RlZCBpbnN0YW5jZS4gCiAq\nIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICogCiAqIEBzaW5jZSAyLjAu\nMAogKgogKi8KcHVibGljIGludGVyZmFjZSBGaWxsU3RyYXRlZ3k8VD4gewog\nICAgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZv\nclBhY2thZ2UoRmlsbFN0cmF0ZWd5LmNsYXNzKTsKICAgIAogICAgVCBmaWxs\nKE9iamVjdFtdIGRhdGEsIENsYXNzPD8+W10gdHlwZXMsIFN0cmluZ1tdIGFs\naWFzZXMpOwogICAgCiAgICAKICAgIC8qKgogICAgICogRmlsbHMgYW4gYXJy\nYXkgb2YgZ2l2ZW4gdHlwZS4gCiAgICAgKgogICAgICogQHBhcmFtIDxUPiBt\ndXN0IGJlIGFuIGFycmF5IHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgY2xhc3MgQXJyYXk8VD4gaW1wbGVtZW50cyBGaWxsU3RyYXRlZ3k8VD4g\newogICAgICAgIHByaXZhdGUgZmluYWwgQ2xhc3M8Pz4gY2xzOwogICAgICAg\nIHB1YmxpYyBBcnJheShDbGFzczxUPiBhcnJheUNscykgewogICAgICAgICAg\nICBpZiAoYXJyYXlDbHMgPT0gbnVsbCB8fCAhYXJyYXlDbHMuaXNBcnJheSgp\nKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbihfbG9jLmdldCgiZmlsbC1iYWQtYXJyYXkiLCBhcnJheUNscyku\nZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgdGhpcy5jbHMgPSBhcnJheUNs\ncy5nZXRDb21wb25lbnRUeXBlKCk7CiAgICAgICAgfQogICAgICAgIAogICAg\nICAgIHB1YmxpYyBUIGZpbGwoT2JqZWN0W10gdmFsdWVzLCBDbGFzczw/Pltd\nIHR5cGVzLCBTdHJpbmdbXSBhbGlhc2VzKSB7CiAgICAgICAgICAgIE9iamVj\ndCBhcnJheSA9IGphdmEubGFuZy5yZWZsZWN0LkFycmF5Lm5ld0luc3RhbmNl\nKGNscywgdmFsdWVzLmxlbmd0aCk7CiAgICAgICAgICAgIFN5c3RlbS5hcnJh\neWNvcHkodmFsdWVzLCAwLCBhcnJheSwgMCwgdmFsdWVzLmxlbmd0aCk7CiAg\nICAgICAgICAgIHJldHVybiAoVClhcnJheTsKICAgICAgICB9CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogQ29uc3RydWN0IGFuZCBwb3B1bGF0ZSBhbiBp\nbnN0YW5jZSBieSBpbnZva2luZyB0aGUgcHV0IG1ldGhvZCAKICAgICAqIHdp\ndGggZWFjaCBhbGlhcyBhcyBrZXkgYW5kIGVsZW1lbnQgb2YgdGhlIGdpdmVu\nIGFycmF5IG9mIHZhbHVlcy4KICAgICAqIAogICAgICogVGhlIGluc3RhbmNl\nIGlzIGEgY3JlYXRlZCBieSB0aGUgbm8tYXJndW1lbnQgY29uc3RydWN0b3Ig\nb2YgdGhlIGRlY2xhcmluZyBjbGFzcyBvZiB0aGUgZ2l2ZW4gbWV0aG9kLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE1hcDxUPiBpbXBsZW1l\nbnRzIEZpbGxTdHJhdGVneTxUPiB7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBN\nZXRob2QgcHV0TWV0aG9kOwogICAgICAgIAogICAgICAgIHB1YmxpYyBNYXAo\nTWV0aG9kIHB1dCkgewogICAgICAgICAgICBpZiAocHV0ID09IG51bGwgfHwg\ncHV0LmdldFBhcmFtZXRlclR5cGVzKCkubGVuZ3RoICE9IDIpCiAgICAgICAg\nICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKF9s\nb2MuZ2V0KCJmaWxsLWJhZC1wdXQiLCBwdXQpLmdldE1lc3NhZ2UoKSk7CiAg\nICAgICAgICAgIHB1dE1ldGhvZCA9IHB1dDsKICAgICAgICB9CiAgICAgICAg\nCiAgICAgICAgcHVibGljIFQgZmlsbChPYmplY3RbXSB2YWx1ZXMsIENsYXNz\nPD8+W10gdHlwZXMsIFN0cmluZ1tdIGFsaWFzZXMpIHsKICAgICAgICAgICAg\naW50IGkgPSAwOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nT2JqZWN0IG1hcCA9IHB1dE1ldGhvZC5nZXREZWNsYXJpbmdDbGFzcygpLm5l\nd0luc3RhbmNlKCk7CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwg\ndmFsdWVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgIHB1dE1l\ndGhvZC5pbnZva2UobWFwLCBhbGlhc2VzW2ldLCB2YWx1ZXNbaV0pOwogICAg\nICAgICAgICAgICAgcmV0dXJuIChUKW1hcDsKICAgICAgICAgICAgfSBjYXRj\naCAoSW52b2NhdGlvblRhcmdldEV4Y2VwdGlvbiB0KSB7CiAgICAgICAgICAg\nICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihfbG9jLmdldCgiZmls\nbC1tYXAtZXJyb3IiLCBwdXRNZXRob2QsIGFsaWFzZXNbaV0sIHZhbHVlc1tp\nXSkuZ2V0TWVzc2FnZSgpLCAKICAgICAgICAgICAgICAgICAgICB0LmdldFRh\ncmdldEV4Y2VwdGlvbigpKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhj\nZXB0aW9uKF9sb2MuZ2V0KCJmaWxsLW1hcC1lcnJvciIsIHB1dE1ldGhvZCwg\nYWxpYXNlc1tpXSwgdmFsdWVzW2ldKS5nZXRNZXNzYWdlKCksIAogICAgICAg\nICAgICAgICAgICAgICAgICBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICAKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Qg\nYW5kIHBvcHVsYXRlIGFuIGluc3RhbmNlIGJ5IHRoZSBnaXZlbiBjb25zdHJ1\nY3RvciBhbmQgYXJndW1lbnRzLgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIGNsYXNzIE5ld0luc3RhbmNlPFQ+IGltcGxlbWVudHMgRmlsbFN0cmF0ZWd5\nPFQ+IHsKICAgICAgICBwcml2YXRlIENvbnN0cnVjdG9yPD8gZXh0ZW5kcyBU\nPiBjb25zOwogICAgICAgIHByaXZhdGUgQ2xhc3M8VD4gY2xzOwogICAgICAg\nIAogICAgICAgIHB1YmxpYyBOZXdJbnN0YW5jZShDb25zdHJ1Y3Rvcjw/IGV4\ndGVuZHMgVD4gY29ucykgewogICAgICAgICAgICB0aGlzLmNvbnMgPSBjb25z\nOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBwdWJsaWMgTmV3SW5zdGFu\nY2UoQ2xhc3M8VD4gY2xzKSB7CiAgICAgICAgICAgIHRoaXMuY2xzID0gY2xz\nOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAKICAgICAgICAvKioKICAg\nICAgICAgKiBGaW5kcyBhIGNvbnN0cnVjdG9yIG9mIHRoZSBnaXZlbiBjbGFz\ncyB3aXRoIGdpdmVuIGFyZ3VtZW50IHR5cGVzLgogICAgICAgICAqLwogICAg\nICAgIDxYPiBDb25zdHJ1Y3RvcjxYPiBmaW5kQ29uc3RydWN0b3IoQ2xhc3M8\nWD4gY2xzLCBDbGFzczw/PltdIHR5cGVzKSB7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICByZXR1cm4gY2xzLmdldENvbnN0cnVjdG9yKHR5\ncGVzKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgICAgIENvbnN0cnVjdG9yPD8+W10gY29uc3RydWN0b3JzID0g\nY2xzLmdldENvbnN0cnVjdG9ycygpOwogICAgICAgICAgICAgICAgZm9yIChD\nb25zdHJ1Y3Rvcjw/PiBjb25zIDogY29uc3RydWN0b3JzKSB7CiAgICAgICAg\nICAgICAgICAgICAgQ2xhc3M8Pz5bXSBwYXJhbVR5cGVzID0gY29ucy5nZXRQ\nYXJhbWV0ZXJUeXBlcygpOwogICAgICAgICAgICAgICAgICAgIGJvb2xlYW4g\nbWF0Y2ggPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1U\neXBlcy5sZW5ndGggPT0gdHlwZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGFyYW1UeXBlcy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2gg\nPSBwYXJhbVR5cGVzW2ldLmlzQXNzaWduYWJsZUZyb20oRmlsdGVycy53cmFw\nKHR5cGVzW2ldKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo\nIW1hdGNoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRj\naCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChDb25z\ndHJ1Y3RvcjxYPiljb25zOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhy\nb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oX2xvYy5nZXQoImZpbGwtY3Rvci1u\nb25lIiwgY2xzLCBBcnJheXMudG9TdHJpbmcodHlwZXMpKS5nZXRNZXNzYWdl\nKCkpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBwdWJsaWMgVCBmaWxs\nKE9iamVjdFtdIHZhbHVlcywgQ2xhc3M8Pz5bXSB0eXBlcywgU3RyaW5nW10g\nYWxpYXNlcykgewogICAgICAgICAgICBpZiAoY29ucyA9PSBudWxsKSB7CiAg\nICAgICAgICAgICAgICBjb25zID0gZmluZENvbnN0cnVjdG9yKGNscywgdHlw\nZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkr\nKykgewogICAgICAgICAgICAgICAgICAgIHZhbHVlc1tpXSA9IEZpbHRlcnMu\nY29udmVydCh2YWx1ZXNbaV0sIHR5cGVzW2ldKTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgIHJldHVybiBjb25zLm5ld0luc3RhbmNlKHZh\nbHVlcyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihfbG9j\nLmdldCgiZmlsbC1jdG9yLWVycm9yIiwgY29ucywgQXJyYXlzLnRvU3RyaW5n\nKHZhbHVlcyksIAogICAgICAgICAgICAgICAgICAgICAgICBBcnJheXMudG9T\ndHJpbmcodHlwZXMpKS5nZXRNZXNzYWdlKCksIGUpOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIAogICAgfQogICAgCiAgICAvKioKICAgICAq\nIENyZWF0ZSBhbmQgcG9wdWxhdGUgYSBiZWFuIGJ5IGludm9raW5nIHNldHRl\nciBtZXRob2RzIGlkZW50aWZpZWQgYnkgYWxpYXMgbmFtZSB3aXRoIGVhY2gg\nYXJyYXkKICAgICAqIGVsZW1lbnQgdmFsdWUgYXMgYXJndW1lbnQuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQmVhbjxUPiBpbXBsZW1lbnRz\nIEZpbGxTdHJhdGVneTxUPiB7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBDbGFz\nczxUPiBjbHM7CiAgICAgICAgcHJpdmF0ZSBNZXRob2RbXSBzZXR0ZXJzOwog\nICAgICAgIAogICAgICAgIHB1YmxpYyBCZWFuKENsYXNzPFQ+IGNscykgewog\nICAgICAgICAgICB0aGlzLmNscyA9IGNsczsKICAgICAgICB9CiAgICAKICAg\nICAgICBwdWJsaWMgVCBmaWxsKE9iamVjdFtdIHZhbHVlcywgQ2xhc3M8Pz5b\nXSB0eXBlcywgU3RyaW5nW10gYWxpYXNlcykgewogICAgICAgICAgICBpbnQg\naSA9IDA7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAo\nc2V0dGVycyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0dGVy\ncyA9IG5ldyBNZXRob2RbdmFsdWVzLmxlbmd0aF07CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICBUIGJlYW4gPSBjbHMubmV3SW5zdGFuY2Uo\nKTsKICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB2YWx1ZXMubGVu\nZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGVyc1tp\nXSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRlcnNb\naV0gPSBSZWZsZWN0aW9uLmZpbmRTZXR0ZXIoY2xzLCBhbGlhc2VzW2ldLCBm\nYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0ZXJzW2ld\nID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgUnVudGltZUV4Y2VwdGlvbihfbG9jLmdldCgiZmlsbC1iZWFuLXNldHRl\nciIsIGNscywgYWxpYXNlc1tpXSkuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2V0dGVyc1tpXS5p\nbnZva2UoYmVhbiwgRmlsdGVycy5jb252ZXJ0KHZhbHVlc1tpXSwgdHlwZXNb\naV0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVy\nbiBiZWFuOwogICAgICAgICAgICB9IGNhdGNoIChJbnZvY2F0aW9uVGFyZ2V0\nRXhjZXB0aW9uIHQpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50\naW1lRXhjZXB0aW9uKF9sb2MuZ2V0KCJmaWxsLWJlYW4tZXJyb3IiLCBzZXR0\nZXJzW2ldLCB2YWx1ZXNbaV0sIHR5cGVzW2ldKS5nZXRNZXNzYWdlKCksIAog\nICAgICAgICAgICAgICAgICAgICAgICB0LmdldFRhcmdldEV4Y2VwdGlvbigp\nKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKF9sb2MuZ2V0\nKCJmaWxsLWJlYW4tZXJyb3IiLCBzZXR0ZXJzW2ldLCB2YWx1ZXNbaV0sIHR5\ncGVzW2ldKS5nZXRNZXNzYWdlKCksIAogICAgICAgICAgICAgICAgICAgICAg\nICBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAg\nCiAgICAvKioKICAgICAqIFBvcHVsYXRlIGFuIGluc3RhbmNlIGJ5IHNpbXBs\neSBhc3NpZ25pbmcgdGhlIDAtdGggZWxlbWVudCBvZiB0aGUgaW5wdXQgdmFs\ndWVzLiAgCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXNzaWdu\nPFQ+IGltcGxlbWVudHMgRmlsbFN0cmF0ZWd5PFQ+IHsKICAgICAgICBwdWJs\naWMgVCBmaWxsKE9iamVjdFtdIHZhbHVlcywgQ2xhc3M8Pz5bXSB0eXBlcywg\nU3RyaW5nW10gYWxpYXNlcykgewogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgcmV0dXJuIChUKXZhbHVlc1swXTsKICAgICAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5l\ndyBSdW50aW1lRXhjZXB0aW9uKF9sb2MuZ2V0KCJmaWxsLWFzc2lnbi1lcnJv\nciIsIEFycmF5cy50b1N0cmluZyh2YWx1ZXMpLAogICAgICAgICAgICAgICAg\nICAgICAgICBBcnJheXMudG9TdHJpbmcodHlwZXMpKS5nZXRNZXNzYWdlKCks\nIGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgCiAgICAv\nKioKICAgICAqIFBvcHVsYXRlIGFuIGluc3RhbmNlIGNyZWF0ZWQgYnkgZ2l2\nZW4gZmFjdG9yeSB1c2luZyBhIGdpdmVuIHB1dChrZXksdmFsdWUpIG1ldGhv\nZC4KICAgICAqIElmIHRoZSBmaXJzdCBhcmd1bWVudCBvZiB0aGUgZ2l2ZW4g\ncHV0IG1ldGhvZCBpcyBpbnRlZ2VyIHRoZW4gZmlsbCB0aGUgdmFsdWVzCiAg\nICAgKiBieSBpbmRleCBlbHNlIGZpbGwgdGhlIHZhbHVlcyB3aXRoIGFsaWFz\nIGtleS4gIAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEZhY3Rv\ncnk8VD4gaW1wbGVtZW50cyBGaWxsU3RyYXRlZ3k8VD4gewogICAgICAgIGZp\nbmFsIE9iamVjdEZhY3Rvcnk8VD4gZmFjdG9yeTsKICAgICAgICBmaW5hbCBN\nZXRob2QgcHV0TWV0aG9kOwogICAgICAgIGZpbmFsIGJvb2xlYW4gaXNBcnJh\neTsKICAgICAgICAKICAgICAgICBwdWJsaWMgRmFjdG9yeShPYmplY3RGYWN0\nb3J5PFQ+IGZhY3RvcnksIE1ldGhvZCBwdXQpIHsKICAgICAgICAgICAgdGhp\ncy5mYWN0b3J5ID0gZmFjdG9yeTsKICAgICAgICAgICAgdGhpcy5wdXRNZXRo\nb2QgPSBwdXQ7CiAgICAgICAgICAgIGlmIChwdXQgPT0gbnVsbCB8fCBwdXQu\nZ2V0UGFyYW1ldGVyVHlwZXMoKS5sZW5ndGggIT0gMikKICAgICAgICAgICAg\nICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oX2xvYy5n\nZXQoImZpbGwtZmFjdG9yeS1iYWQtcHV0IiwgcHV0KS5nZXRNZXNzYWdlKCkp\nOwogICAgICAgICAgICBDbGFzczw/PiBrZXlUeXBlID0gcHV0TWV0aG9kLmdl\ndFBhcmFtZXRlclR5cGVzKClbMF07CiAgICAgICAgICAgIHRoaXMuaXNBcnJh\neSA9IGtleVR5cGUgPT0gaW50LmNsYXNzIHx8IGtleVR5cGUgPT0gSW50ZWdl\nci5jbGFzczsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcHVibGljIFQg\nZmlsbChPYmplY3RbXSB2YWx1ZXMsIENsYXNzPD8+W10gdHlwZXMsIFN0cmlu\nZ1tdIGFsaWFzZXMpIHsKICAgICAgICAgICAgaW50IGkgPSAwOwogICAgICAg\nICAgICBPYmplY3Qga2V5ID0gbnVsbDsKICAgICAgICAgICAgVCByZXN1bHQg\nPSBmYWN0b3J5Lm5ld0luc3RhbmNlKCk7CiAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsg\naSsrKSB7CiAgICAgICAgICAgICAgICAgICAga2V5ID0gaXNBcnJheSA/IGkg\nOiBhbGlhc2VzW2ldOwogICAgICAgICAgICAgICAgICAgIHB1dE1ldGhvZC5p\nbnZva2UocmVzdWx0LCBrZXksIEZpbHRlcnMuY29udmVydCh2YWx1ZXNbaV0s\nIHR5cGVzW2ldKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9IGNhdGNoIChJbnZvY2F0\naW9uVGFyZ2V0RXhjZXB0aW9uIHQpIHsKICAgICAgICAgICAgICAgIHRocm93\nIG5ldyBSdW50aW1lRXhjZXB0aW9uKF9sb2MuZ2V0KCJmaWxsLWZhY3Rvcnkt\nZXJyb3IiLCBuZXcgT2JqZWN0W117cHV0TWV0aG9kLCBrZXksIHZhbHVlc1tp\nXSwgCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzW2ldfSkuZ2V0TWVz\nc2FnZSgpLCB0LmdldFRhcmdldEV4Y2VwdGlvbigpKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIHRocm93\nIG5ldyBSdW50aW1lRXhjZXB0aW9uKF9sb2MuZ2V0KCJmaWxsLWZhY3Rvcnkt\nZXJyb3IiLCBuZXcgT2JqZWN0W117cHV0TWV0aG9kLCBrZXksIHZhbHVlc1tp\nXSwgCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzW2ldfSkuZ2V0TWVz\nc2FnZSgpLCBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

