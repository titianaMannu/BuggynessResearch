{"sha":"41e7f0f25375562f50108d8d8cb0a5189921a214","node_id":"MDQ6QmxvYjIwNjM2NDo0MWU3ZjBmMjUzNzU1NjJmNTAxMDhkOGQ4Y2IwYTUxODk5MjFhMjE0","size":5266,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/41e7f0f25375562f50108d8d8cb0a5189921a214","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHM7CgppbXBv\ncnQgamF2YS5pby5TZXJpYWxpemFibGU7CmltcG9ydCBqYXZhLnV0aWwuQ29s\nbGVjdGlvbnM7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkSGFzaE1hcDsKaW1w\nb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuU3RhY2s7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvbGxlY3Rpb25zLm1hcC5MaW5r\nZWRNYXA7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5\nT3BlcmF0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nUmVzdWx0U2hhcGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLlN0b3JlUXVlcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLmV4cHMuQ29udGV4dDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5PcmRlcmVkTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1l\ndGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5t\nZXRhLkZpZWxkTWV0YURhdGE7CgovKioKICogU3RydWN0IHRvIGhvbGQgdGhl\nIHN0YXRlIG9mIGEgcGFyc2VkIGV4cHJlc3Npb24gcXVlcnkuCiAqCiAqIEBh\ndXRob3IgQWJlIFdoaXRlCiAqIEBzaW5jZSAwLjMuMgogKiBAbm9qYXZhZG9j\nCiAqLwpAU3VwcHJlc3NXYXJuaW5ncygic2VyaWFsIikKcHVibGljIGNsYXNz\nIFF1ZXJ5RXhwcmVzc2lvbnMKICAgIGltcGxlbWVudHMgU2VyaWFsaXphYmxl\nIHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBESVNUSU5DVF9BVVRP\nID0gMiA8PCAwOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRElTVElO\nQ1RfVFJVRSA9IDIgPDwgMTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50\nIERJU1RJTkNUX0ZBTFNFID0gMiA8PCAyOwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBWYWx1ZVtdIEVNUFRZX1ZBTFVFUyA9IG5ldyBWYWx1ZVswXTsKCiAg\nICAvKioKICAgICAqIE1hcCBvZiB7QGxpbmsgRmllbGRNZXRhRGF0YX0se0Bs\naW5rIFZhbHVlfSBmb3IgdXBkYXRlIHN0YXRlbWVudHMuCiAgICAgKi8KICAg\nIHB1YmxpYyBNYXA8UGF0aCwgVmFsdWU+IHVwZGF0ZXMgPSBDb2xsZWN0aW9u\ncy5lbXB0eU1hcCgpOwogICAgcHVibGljIGludCBkaXN0aW5jdCA9IERJU1RJ\nTkNUX0FVVE87CiAgICBwdWJsaWMgU3RyaW5nIGFsaWFzID0gbnVsbDsKICAg\nIHB1YmxpYyBWYWx1ZVtdIHByb2plY3Rpb25zID0gRU1QVFlfVkFMVUVTOwog\nICAgcHVibGljIFN0cmluZ1tdIHByb2plY3Rpb25DbGF1c2VzID0gU3RvcmVR\ndWVyeS5FTVBUWV9TVFJJTkdTOwogICAgcHVibGljIFN0cmluZ1tdIHByb2pl\nY3Rpb25BbGlhc2VzID0gU3RvcmVRdWVyeS5FTVBUWV9TVFJJTkdTOwogICAg\ncHVibGljIENsYXNzPD8+IHJlc3VsdENsYXNzID0gbnVsbDsKICAgIHB1Ymxp\nYyBFeHByZXNzaW9uIGZpbHRlciA9IG51bGw7CiAgICBwdWJsaWMgVmFsdWVb\nXSBncm91cGluZyA9IEVNUFRZX1ZBTFVFUzsKICAgIHB1YmxpYyBTdHJpbmdb\nXSBncm91cGluZ0NsYXVzZXMgPSBTdG9yZVF1ZXJ5LkVNUFRZX1NUUklOR1M7\nCiAgICBwdWJsaWMgRXhwcmVzc2lvbiBoYXZpbmcgPSBudWxsOwogICAgcHVi\nbGljIFZhbHVlW10gb3JkZXJpbmcgPSBFTVBUWV9WQUxVRVM7CiAgICBwdWJs\naWMgYm9vbGVhbltdIGFzY2VuZGluZyA9IFN0b3JlUXVlcnkuRU1QVFlfQk9P\nTEVBTlM7CiAgICBwdWJsaWMgU3RyaW5nW10gb3JkZXJpbmdDbGF1c2VzID0g\nU3RvcmVRdWVyeS5FTVBUWV9TVFJJTkdTOwogICAgcHVibGljIFN0cmluZ1td\nIG9yZGVyaW5nQWxpYXNlcyA9IFN0b3JlUXVlcnkuRU1QVFlfU1RSSU5HUzsK\nICAgIHB1YmxpYyBPcmRlcmVkTWFwPE9iamVjdCxDbGFzczw/Pj4gcGFyYW1l\ndGVyVHlwZXMgPSBTdG9yZVF1ZXJ5LkVNUFRZX09SREVSRURfUEFSQU1TOwog\nICAgcHVibGljIGludCBvcGVyYXRpb24gPSBRdWVyeU9wZXJhdGlvbnMuT1Bf\nU0VMRUNUOwogICAgcHVibGljIENsYXNzTWV0YURhdGFbXSBhY2Nlc3NQYXRo\nID0gU3RvcmVRdWVyeS5FTVBUWV9NRVRBUzsKICAgIHB1YmxpYyBTdHJpbmdb\nXSBmZXRjaFBhdGhzID0gU3RvcmVRdWVyeS5FTVBUWV9TVFJJTkdTOwogICAg\ncHVibGljIFN0cmluZ1tdIGZldGNoSW5uZXJQYXRocyA9IFN0b3JlUXVlcnku\nRU1QVFlfU1RSSU5HUzsKICAgIHB1YmxpYyBWYWx1ZVtdIHJhbmdlID0gRU1Q\nVFlfVkFMVUVTOwogICAgcHJpdmF0ZSBCb29sZWFuIF9hZ2dyZWdhdGUgPSBu\ndWxsOwogICAgcHJpdmF0ZSBTdGFjazxDb250ZXh0PiBfY29udGV4dHMgPSBu\ndWxsOwogICAgcHVibGljIE9iamVjdCBzdGF0ZTsKICAgIHB1YmxpYyBSZXN1\nbHRTaGFwZTw/PiBzaGFwZTsKICAgIAogICAgLyoqCiAgICAgKiBTZXQgcmVm\nZXJlbmNlIHRvIHRoZSBKUFFMIHF1ZXJ5IGNvbnRleHRzLgogICAgICogQHBh\ncmFtIGNvbnRleHRzCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldENvbnRl\neHRzKFN0YWNrPENvbnRleHQ+IGNvbnRleHRzKSB7CiAgICAgICAgX2NvbnRl\neHRzID0gY29udGV4dHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIHRoZSBjdXJyZW50IEpQUUwgcXVlcnkgY29udGV4dC4KICAgICAqIEByZXR1\ncm4KICAgICAqLwogICAgcHVibGljIENvbnRleHQgY3R4KCkgewogICAgICAg\nIHJldHVybiBfY29udGV4dHMucGVlaygpOwogICAgfQoKICAgIC8qKgogICAg\nICogV2hldGhlciB0aGlzIGlzIGFuIGFnZ3JlZ2F0ZSByZXN1bHRzLgogICAg\nICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0FnZ3JlZ2F0ZSgpIHsKICAgICAg\nICBpZiAocHJvamVjdGlvbnMubGVuZ3RoID09IDApCiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsgCiAgICAgICAgaWYgKF9hZ2dyZWdhdGUgPT0gbnVsbCkK\nICAgICAgICAgICAgX2FnZ3JlZ2F0ZSA9IChBZ2dyZWdhdGVFeHByZXNzaW9u\nVmlzaXRvci5pc0FnZ3JlZ2F0ZShwcm9qZWN0aW9ucykpCiAgICAgICAgICAg\nICAgICA/IEJvb2xlYW4uVFJVRSA6IEJvb2xlYW4uRkFMU0U7CiAgICAgICAg\ncmV0dXJuIF9hZ2dyZWdhdGUuYm9vbGVhblZhbHVlKCk7ICAgIAogICAgfQog\nICAgCiAgICBwdWJsaWMgYm9vbGVhbiBpc0Rpc3RpbmN0KCkgewogICAgICAg\nIHJldHVybiBkaXN0aW5jdCAhPSBESVNUSU5DVF9GQUxTRTsKICAgIH0KCiAg\nICAvKioKICAgICAqIEFkZCBhbiB1cGRhdGUuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHB1dFVwZGF0ZShQYXRoIHBhdGgsIFZhbHVlIHZhbCkgewogICAg\nICAgIGlmICh1cGRhdGVzID09IENvbGxlY3Rpb25zLkVNUFRZX01BUCkKICAg\nICAgICAgICAgdXBkYXRlcyA9IG5ldyBMaW5rZWRIYXNoTWFwPFBhdGgsIFZh\nbHVlPigpOwogICAgICAgIHVwZGF0ZXMucHV0KHBhdGgsIHZhbCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBWaXNpdG9yIHRvIGRldGVybWluZSB3aGV0aGVy\nIG91ciBwcm9qZWN0aW9ucyBhcmUgYWdncmVnYXRlcy4KICAgICAqLwogICAg\ncHJpdmF0ZSBzdGF0aWMgY2xhc3MgQWdncmVnYXRlRXhwcmVzc2lvblZpc2l0\nb3IKICAgICAgICBleHRlbmRzIEFic3RyYWN0RXhwcmVzc2lvblZpc2l0b3Ig\newogICAgICAgIAogICAgICAgIHByaXZhdGUgVmFsdWUgX3N1YiA9IG51bGw7\nCiAgICAgICAgcHJpdmF0ZSBib29sZWFuIF9hZ2cgPSBmYWxzZTsKCiAgICAg\nICAgLyoqCiAgICAgICAgICogUmV0dXJuIHdoZXRoZXIgdGhlIGdpdmVuIHZh\nbHVlcyBpbmNsdWRlIHByb2plY3Rpb25zLgogICAgICAgICAqLwogICAgICAg\nIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBpc0FnZ3JlZ2F0ZShWYWx1ZVtdIHZh\nbHMpIHsKICAgICAgICAgICAgaWYgKHZhbHMubGVuZ3RoID09IDApCiAgICAg\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIEFnZ3JlZ2F0\nZUV4cHJlc3Npb25WaXNpdG9yIHYgPSBuZXcgQWdncmVnYXRlRXhwcmVzc2lv\nblZpc2l0b3IoKTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2\nYWxzLmxlbmd0aCAmJiAhdi5fYWdnOyBpKyspCiAgICAgICAgICAgICAgICB2\nYWxzW2ldLmFjY2VwdFZpc2l0KHYpOwogICAgICAgICAgICByZXR1cm4gdi5f\nYWdnOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgZW50ZXIoVmFs\ndWUgdmFsKSB7CiAgICAgICAgICAgIGlmIChfYWdnKQogICAgICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgICAgICBpZiAoX3N1YiA9PSBudWxsKSB7CiAg\nICAgICAgICAgICAgICBpZiAodmFsLmlzQWdncmVnYXRlKCkpCiAgICAgICAg\nICAgICAgICAgICAgX2FnZyA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSBp\nZiAodmFsIGluc3RhbmNlb2YgU3VicXVlcnkpCiAgICAgICAgICAgICAgICBf\nc3ViID0gdmFsOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgZXhp\ndChWYWx1ZSB2YWwpIHsKICAgICAgICAgICAgaWYgKHZhbCA9PSBfc3ViKQog\nICAgICAgICAgICAgICAgX3N1YiA9IG51bGw7CiAgICAgICAgfQogICAgfQp9\nCg==\n","encoding":"base64"}

