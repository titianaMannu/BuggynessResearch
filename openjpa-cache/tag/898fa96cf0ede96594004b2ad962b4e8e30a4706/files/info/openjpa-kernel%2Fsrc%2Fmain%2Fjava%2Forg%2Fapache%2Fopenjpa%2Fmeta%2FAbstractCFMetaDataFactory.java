{"sha":"18766983faeb9101e2730804a27d355310982102","node_id":"MDQ6QmxvYjIwNjM2NDoxODc2Njk4M2ZhZWI5MTAxZTI3MzA4MDRhMjdkMzU1MzEwOTgyMTAy","size":33369,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/18766983faeb9101e2730804a27d355310982102","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YTsKCmltcG9ydCBqYXZh\nLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLkZpbGVOb3RGb3VuZEV4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlv\nLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJMRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuVVJMOwppbXBvcnQgamF2YS5zZWN1\ncml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Q\ncml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFy\ncmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZh\nLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwpp\nbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSXRl\ncmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRp\nbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2YS51dGls\nLnppcC5aaXBGaWxlOwppbXBvcnQgamF2YS51dGlsLnppcC5aaXBJbnB1dFN0\ncmVhbTsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdV\ndGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5DbGFz\nc0FyZ1BhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0\nYS5DbGFzc3BhdGhNZXRhRGF0YUl0ZXJhdG9yOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5tZXRhLkZpbGVNZXRhRGF0YUl0ZXJhdG9yOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLk1ldGFEYXRhRmlsdGVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLk1ldGFEYXRh\nSXRlcmF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGEu\nTWV0YURhdGFQYXJzZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLm1ldGEuTWV0YURhdGFTZXJpYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi5tZXRhLlJlc291cmNlTWV0YURhdGFJdGVyYXRvcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5VUkxNZXRhRGF0YUl0\nZXJhdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLlpp\ncEZpbGVNZXRhRGF0YUl0ZXJhdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5tZXRhLlppcFN0cmVhbU1ldGFEYXRhSXRlcmF0b3I7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuRmlsZXM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuSjJEb1ByaXZIZWxwZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuR2VuZXJhbEV4Y2VwdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRp\nb247CmltcG9ydCBzZXJwLnV0aWwuU3RyaW5nczsKCi8qKgogKiBCYXNlIGNs\nYXNzIGZvciBmYWN0b3J5IGltcGxlbWVudGF0aW9ucyBidWlsdCBhcm91bmQg\nWE1MIG1ldGFkYXRhIGZpbGVzCiAqIGluIHRoZSBjb21tb24gZm9tYXQuCiAq\nCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBzaW5jZSAwLjQuMAogKi8KcHVi\nbGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0Q0ZNZXRhRGF0YUZhY3RvcnkK\nICAgIGV4dGVuZHMgQWJzdHJhY3RNZXRhRGF0YUZhY3RvcnkgewoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVy\nLmZvclBhY2thZ2UKICAgICAgICAoQWJzdHJhY3RNZXRhRGF0YUZhY3Rvcnku\nY2xhc3MpOwoKICAgIHByb3RlY3RlZCBDb2xsZWN0aW9uPEZpbGU+IGZpbGVz\nID0gbnVsbDsKICAgIHByb3RlY3RlZCBDb2xsZWN0aW9uPFVSTD4gdXJscyA9\nIG51bGw7CiAgICBwcm90ZWN0ZWQgQ29sbGVjdGlvbjxTdHJpbmc+IHJzcmNz\nID0gbnVsbDsKICAgIHByb3RlY3RlZCBDb2xsZWN0aW9uPFN0cmluZz4gY3Bh\ndGggPSBudWxsOwoKICAgIHByaXZhdGUgU2V0PFN0cmluZz4gX3R5cGVOYW1l\ncyA9IG51bGw7CgogICAgLyoqCiAgICAgKiBTZXQgb2Yge0BsaW5rIEZpbGV9\ncyBvZiBtZXRhZGF0YSBmaWxlcyBvciBkaXJlY3RvcmllcyBzdXBwbGllZCBi\neSB1c2VyLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRGaWxlcyhDb2xs\nZWN0aW9uPEZpbGU+IGZpbGVzKSB7CiAgICAgICAgdGhpcy5maWxlcyA9IGZp\nbGVzOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IG9mIHNlbWljb2xvbi1z\nZXBhcmF0ZWQge0BsaW5rIEZpbGV9cyBvZiBtZXRhZGF0YSBmaWxlcyBvcgog\nICAgICogZGlyZWN0b3JpZXMgc3VwcGxpZWQgYnkgdXNlciB2aWEgYXV0by1j\nb25maWd1cmF0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRGaWxl\ncyhTdHJpbmcgZmlsZXMpIHsKICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNF\nbXB0eShmaWxlcykpCiAgICAgICAgICAgIHRoaXMuZmlsZXMgPSBudWxsOwog\nICAgICAgIGVsc2UgewogICAgICAgICAgICBTdHJpbmdbXSBzdHJzID0gU3Ry\naW5ncy5zcGxpdChmaWxlcywgIjsiLCAwKTsKICAgICAgICAgICAgdGhpcy5m\naWxlcyA9IG5ldyBIYXNoU2V0PEZpbGU+KChpbnQpIChzdHJzLmxlbmd0aCAq\nIDEuMzMgKyAxKSk7CgogICAgICAgICAgICBGaWxlIGZpbGU7CiAgICAgICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3Rycy5sZW5ndGg7IGkrKykgewog\nICAgICAgICAgICAgICAgZmlsZSA9IG5ldyBGaWxlKHN0cnNbaV0pOwogICAg\nICAgICAgICAgICAgaWYgKChBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdl\nZCgKICAgICAgICAgICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5leGlzdHNB\nY3Rpb24oZmlsZSkpKS5ib29sZWFuVmFsdWUoKSkKICAgICAgICAgICAgICAg\nICAgICB0aGlzLmZpbGVzLmFkZChmaWxlKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNldCBvZiB7QGxpbmsgVVJM\nfXMgb2YgbWV0YWRhdGEgZmlsZXMgb3IgamFycyBzdXBwbGllZCBieSB1c2Vy\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRVUkxzKENvbGxlY3Rpb248\nVVJMPiB1cmxzKSB7CiAgICAgICAgdGhpcy51cmxzID0gdXJsczsKICAgIH0K\nCiAgICAvKioKICAgICAqIFNldCBvZiBzZW1pY29sb24tc2VwYXJhdGVkIHtA\nbGluayBVUkx9cyBvZiBtZXRhZGF0YSBmaWxlcyBvciBqYXJzCiAgICAgKiBz\ndXBwbGllZCBieSB1c2VyIHZpYSBhdXRvLWNvbmZpZ3VyYXRpb24uCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHNldFVSTHMoU3RyaW5nIHVybHMpIHsKICAg\nICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eSh1cmxzKSkKICAgICAgICAg\nICAgdGhpcy51cmxzID0gbnVsbDsKICAgICAgICBlbHNlIHsKICAgICAgICAg\nICAgU3RyaW5nW10gc3RycyA9IFN0cmluZ3Muc3BsaXQodXJscywgIjsiLCAw\nKTsKICAgICAgICAgICAgdGhpcy51cmxzID0gbmV3IEhhc2hTZXQ8VVJMPigo\naW50KSAoc3Rycy5sZW5ndGggKiAxLjMzICsgMSkpOwogICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJz\nLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgIHRoaXMudXJscy5h\nZGQobmV3IFVSTChzdHJzW2ldKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKE1h\nbGZvcm1lZFVSTEV4Y2VwdGlvbiBtdWUpIHsKICAgICAgICAgICAgICAgIHRo\ncm93IG5ldyBVc2VyRXhjZXB0aW9uKG11ZSk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgb2YgcmVzb3VyY2Ug\ncGF0aHMgb2YgbWV0YWRhdGEgZmlsZXMgb3IgamFycyBzdXBwbGllZCBieSB1\nc2VyLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRSZXNvdXJjZXMoQ29s\nbGVjdGlvbjxTdHJpbmc+IHJzcmNzKSB7CiAgICAgICAgdGhpcy5yc3JjcyA9\nIHJzcmNzOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IG9mIHNlbWljb2xv\nbi1zZXBhcmF0ZWQgcmVzb3VyY2UgcGF0aHMgb2YgbWV0YWRhdGEgZmlsZXMg\nb3IgamFycwogICAgICogc3VwcGxpZWQgYnkgdXNlciB2aWEgYXV0by1jb25m\naWd1cmF0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRSZXNvdXJj\nZXMoU3RyaW5nIHJzcmNzKSB7CiAgICAgICAgLy8ga2VlcCBsaXN0IG11dGFi\nbGUgc28gc3ViY2xhc3NlcyBjYW4gYWRkIGltcGxpY2l0IGxvY2F0aW9ucwog\nICAgICAgIHRoaXMucnNyY3MgPSAoU3RyaW5nVXRpbHMuaXNFbXB0eShyc3Jj\ncykpID8gbnVsbAogICAgICAgICAgOiBuZXcgQXJyYXlMaXN0PFN0cmluZz4o\nQXJyYXlzLmFzTGlzdChTdHJpbmdzLnNwbGl0KHJzcmNzLCAiOyIsIDApKSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgb2YgY2xhc3NwYXRoIGRpcmVj\ndG9yaWVzIG9yIGphcnMgdG8gc2NhbiBmb3IgbWV0YWRhdGEgc3VwcGxpZWQK\nICAgICAqIGJ5IHVzZXIuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldENs\nYXNzcGF0aFNjYW4oQ29sbGVjdGlvbjxTdHJpbmc+IGNwYXRoKSB7CiAgICAg\nICAgdGhpcy5jcGF0aCA9IGNwYXRoOwogICAgfQoKICAgIC8qKgogICAgICog\nU2V0IG9mIGNsYXNzcGF0aCBkaXJlY3RvcmllcyBvciBqYXJzIHRvIHNjYW4g\nZm9yIG1ldGFkYXRhIHN1cHBsaWVkCiAgICAgKiBieSB1c2VyIHZpYSBhdXRv\nLWNvbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldENs\nYXNzcGF0aFNjYW4oU3RyaW5nIGNwYXRoKSB7CiAgICAgICAgLy8ga2VlcCBs\naXN0IG11dGFibGUgc28gc3ViY2xhc3NlcyBjYW4gYWRkIGltcGxpY2l0IGxv\nY2F0aW9ucwogICAgICAgIHRoaXMuY3BhdGggPSAoU3RyaW5nVXRpbHMuaXNF\nbXB0eShjcGF0aCkpID8gbnVsbAogICAgICAgICAgOiBuZXcgQXJyYXlMaXN0\nPFN0cmluZz4oQXJyYXlzLmFzTGlzdChTdHJpbmdzLnNwbGl0KGNwYXRoLCAi\nOyIsIDApKSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gc3RvcmUoQ2xh\nc3NNZXRhRGF0YVtdIG1ldGFzLCBRdWVyeU1ldGFEYXRhW10gcXVlcmllcywK\nICAgICAgICBTZXF1ZW5jZU1ldGFEYXRhW10gc2VxcywgaW50IG1vZGUsIE1h\ncDxGaWxlLFN0cmluZz4gb3V0cHV0KSB7CiAgICAgICAgaWYgKG1vZGUgPT0g\nTU9ERV9OT05FKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBp\nZiAoaXNNYXBwaW5nT25seUZhY3RvcnkoKSAmJiAobW9kZSAmIE1PREVfTUFQ\nUElORykgPT0gMCkKICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAg\nIGlmICghc3RyaWN0ICYmIChtb2RlICYgTU9ERV9NRVRBKSAhPSAwKQogICAg\nICAgICAgICBtb2RlIHw9IE1PREVfTUFQUElORzsKICAgICAgICBDbGFzczw/\nPiBjbHMgPSAobWV0YXMubGVuZ3RoID09IDApID8gbnVsbCA6IG1ldGFzWzBd\nLmdldERlc2NyaWJlZFR5cGUoKTsKICAgICAgICBDbGFzc0xvYWRlciBsb2Fk\nZXIgPSByZXBvcy5nZXRDb25maWd1cmF0aW9uKCkuCiAgICAgICAgICAgIGdl\ndENsYXNzUmVzb2x2ZXJJbnN0YW5jZSgpLmdldENsYXNzTG9hZGVyKGNscywg\nbnVsbCk7CiAgICAgICAgTWFwPFN0cmluZyxDbGFzc01ldGFEYXRhPiBjbHNO\nYW1lcyA9IG5ldyBIYXNoTWFwPFN0cmluZyxDbGFzc01ldGFEYXRhPgogICAg\nICAgIAkoKGludCkgKG1ldGFzLmxlbmd0aCAqIDEuMzMgKyAxKSk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtZXRhcy5sZW5ndGg7IGkrKykKICAg\nICAgICAgICAgY2xzTmFtZXMucHV0KG1ldGFzW2ldLmdldERlc2NyaWJlZFR5\ncGUoKS5nZXROYW1lKCksIG1ldGFzW2ldKTsKCiAgICAgICAgLy8gYXNzaWdu\nIGRlZmF1bHQgZmlsZXMgaWYgaW4gbWV0YWRhdGEgbW9kZSAoaW4gb3RoZXIg\nbW9kZXMgd2UgYXNzdW1lCiAgICAgICAgLy8gdGhlIGZpbGVzIHdvdWxkIGhh\ndmUgdG8gYmUgcmVhZCBhbHJlYWR5IHRvIGNyZWF0ZSB0aGUgbWV0YWRhdGFz\nKQogICAgICAgIFNldCBtZXRhRmlsZXMgPSBudWxsOwogICAgICAgIFNldCBx\ndWVyeUZpbGVzID0gbnVsbDsKICAgICAgICBpZiAoaXNNYXBwaW5nT25seUZh\nY3RvcnkoKSB8fCAobW9kZSAmIE1PREVfTUVUQSkgIT0gMCkKICAgICAgICAg\nICAgbWV0YUZpbGVzID0gYXNzaWduRGVmYXVsdE1ldGFEYXRhRmlsZXMobWV0\nYXMsIHF1ZXJpZXMsIHNlcXMsIG1vZGUsCiAgICAgICAgICAgICAgICBjbHNO\nYW1lcyk7CiAgICAgICAgaWYgKCFpc01hcHBpbmdPbmx5RmFjdG9yeSgpICYm\nIChtb2RlICYgTU9ERV9RVUVSWSkgIT0gMCkKICAgICAgICAgICAgcXVlcnlG\naWxlcyA9IGFzc2lnbkRlZmF1bHRRdWVyeUZpbGVzKHF1ZXJpZXMsIGNsc05h\nbWVzKTsKCiAgICAgICAgLy8gcGFyc2UgYWxsIGZpbGVzIHRvIGJlIHN1cmUg\nd2UgZG9uJ3QgZGVsZXRlIGV4aXN0aW5nIG1ldGFkYXRhIHdoZW4KICAgICAg\nICAvLyB3cml0aW5nIG91dCBuZXcgbWV0YWRhdGEsIHRoZW4gc2VyaWFsaXpl\nCiAgICAgICAgU2VyaWFsaXplciBzZXI7CiAgICAgICAgUGFyc2VyIHBhcnNl\ncjsKICAgICAgICBpZiAobW9kZSAhPSBNT0RFX1FVRVJZKSB7CiAgICAgICAg\nICAgIGludCBzZXJtb2RlID0gKGlzTWFwcGluZ09ubHlGYWN0b3J5KCkpID8g\nbW9kZSA6IG1vZGUgfCBNT0RFX01FVEE7CiAgICAgICAgICAgIGlmICgobW9k\nZSAmIE1PREVfQU5OX01BUFBJTkcpICE9IDApCiAgICAgICAgICAgICAgICBz\nZXIgPSBuZXdBbm5vdGF0aW9uU2VyaWFsaXplcigpOwogICAgICAgICAgICBl\nbHNlCiAgICAgICAgICAgICAgICBzZXIgPSBuZXdTZXJpYWxpemVyKCk7CiAg\nICAgICAgICAgIHNlci5zZXRNb2RlKHNlcm1vZGUpOwogICAgICAgICAgICBp\nZiAobWV0YUZpbGVzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHBhcnNl\nciA9IG5ld1BhcnNlcihmYWxzZSk7CiAgICAgICAgICAgICAgICBwYXJzZXIu\nc2V0TW9kZShzZXJtb2RlKTsKICAgICAgICAgICAgICAgIHBhcnNlci5zZXRD\nbGFzc0xvYWRlcihsb2FkZXIpOwogICAgICAgICAgICAgICAgcGFyc2UocGFy\nc2VyLCBtZXRhRmlsZXMpOwoKICAgICAgICAgICAgICAgIE1ldGFEYXRhUmVw\nb3NpdG9yeSBwciA9IHBhcnNlci5nZXRSZXBvc2l0b3J5KCk7CiAgICAgICAg\nICAgICAgICBwci5zZXRTb3VyY2VNb2RlKG1vZGUpOwogICAgICAgICAgICAg\nICAgaWYgKGlzTWFwcGluZ09ubHlGYWN0b3J5KCkpCiAgICAgICAgICAgICAg\nICAgICAgcHIuc2V0UmVzb2x2ZShNT0RFX05PTkUpOwogICAgICAgICAgICAg\nICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHByLnNldFJlc29sdmUoTU9E\nRV9NQVBQSU5HLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBzZXIuYWRkQWxs\nKHByKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBtZXRhcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIHNl\nci5hZGRNZXRhRGF0YShtZXRhc1tpXSk7CiAgICAgICAgICAgIGlmICgobW9k\nZSAmIE1PREVfTUFQUElORykgIT0gMCkKICAgICAgICAgICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgc2Vxcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAg\nICAgICAgICBzZXIuYWRkU2VxdWVuY2VNZXRhRGF0YShzZXFzW2ldKTsKICAg\nICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyaWVzLmxlbmd0aDsg\naSsrKQogICAgICAgICAgICAgICAgaWYgKHF1ZXJpZXNbaV0uZ2V0U291cmNl\nTW9kZSgpICE9IE1PREVfUVVFUlkKICAgICAgICAgICAgICAgICAgICAmJiAo\ncXVlcmllc1tpXS5nZXRTb3VyY2VNb2RlKCkgJiBtb2RlKSAhPSAwKQogICAg\nICAgICAgICAgICAgICAgIHNlci5hZGRRdWVyeU1ldGFEYXRhKHF1ZXJpZXNb\naV0pOwoKICAgICAgICAgICAgaW50IGZsYWdzID0gc2VyLlBSRVRUWTsKICAg\nICAgICAgICAgaWYgKChzdG9yZSAmIFNUT1JFX1ZFUkJPU0UpICE9IDApCiAg\nICAgICAgICAgICAgICBmbGFncyB8PSBzZXIuVkVSQk9TRTsKICAgICAgICAg\nICAgc2VyaWFsaXplKHNlciwgb3V0cHV0LCBmbGFncyk7CiAgICAgICAgfQoK\nICAgICAgICAvLyBkbyB3ZSBoYXZlIGFueSBxdWVyaWVzIHN0b3JlZCBpbiBx\ndWVyeSBmaWxlcz8KICAgICAgICBpZiAoIWlzTWFwcGluZ09ubHlGYWN0b3J5\nKCkpIHsKICAgICAgICAgICAgYm9vbGVhbiBxRmlsZXMgPSBxdWVyeUZpbGVz\nICE9IG51bGw7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyAhcUZpbGVz\nICYmIGkgPCBxdWVyaWVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAg\ncUZpbGVzID0gcXVlcmllc1tpXS5nZXRTb3VyY2VNb2RlKCkgPT0gTU9ERV9R\nVUVSWTsKICAgICAgICAgICAgaWYgKHFGaWxlcykgewogICAgICAgICAgICAg\nICAgaWYgKChtb2RlICYgTU9ERV9BTk5fTUFQUElORykgIT0gMCkKICAgICAg\nICAgICAgICAgICAgICBzZXIgPSBuZXdBbm5vdGF0aW9uU2VyaWFsaXplcigp\nOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHNl\nciA9IG5ld1NlcmlhbGl6ZXIoKTsKICAgICAgICAgICAgICAgIHNlci5zZXRN\nb2RlKE1PREVfUVVFUlkpOwogICAgICAgICAgICAgICAgaWYgKHF1ZXJ5Rmls\nZXMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHBhcnNlciA9IG5l\nd1BhcnNlcihmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNl\ndE1vZGUoTU9ERV9RVUVSWSk7CiAgICAgICAgICAgICAgICAgICAgcGFyc2Vy\nLnNldENsYXNzTG9hZGVyKGxvYWRlcik7CiAgICAgICAgICAgICAgICAgICAg\ncGFyc2UocGFyc2VyLCBxdWVyeUZpbGVzKTsKICAgICAgICAgICAgICAgICAg\nICBzZXIuYWRkQWxsKHBhcnNlci5nZXRSZXBvc2l0b3J5KCkpOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBxdWVyaWVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgIGlm\nIChxdWVyaWVzW2ldLmdldFNvdXJjZU1vZGUoKSA9PSBNT0RFX1FVRVJZKQog\nICAgICAgICAgICAgICAgICAgICAgICBzZXIuYWRkUXVlcnlNZXRhRGF0YShx\ndWVyaWVzW2ldKTsKICAgICAgICAgICAgICAgIHNlcmlhbGl6ZShzZXIsIG91\ndHB1dCwgc2VyLlBSRVRUWSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\nZHJvcChDbGFzc1tdIGNscywgaW50IG1vZGUsIENsYXNzTG9hZGVyIGVudkxv\nYWRlcikgewogICAgICAgIGlmIChtb2RlID09IE1PREVfTk9ORSkKICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgaWYgKGlzTWFwcGluZ09ubHlG\nYWN0b3J5KCkgJiYgKG1vZGUgJiBNT0RFX01BUFBJTkcpID09IDApCiAgICAg\nICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgICBQYXJzZXIgcGFyc2VyID0g\nbmV3UGFyc2VyKGZhbHNlKTsKICAgICAgICBNZXRhRGF0YVJlcG9zaXRvcnkg\ncHIgPSBwYXJzZXIuZ2V0UmVwb3NpdG9yeSgpOwogICAgICAgIHByLnNldFNv\ndXJjZU1vZGUoTU9ERV9NQVBQSU5HLCBmYWxzZSk7CiAgICAgICAgcHIuc2V0\nUmVzb2x2ZShNT0RFX01BUFBJTkcsIGZhbHNlKTsKCiAgICAgICAgLy8gcGFy\nc2UgbWV0YWRhdGEgZm9yIGFsbCB0aGVzZSBjbGFzc2VzCiAgICAgICAgaWYg\nKChtb2RlICYgKE1PREVfTUVUQSB8IE1PREVfTUFQUElORykpICE9IDApIHsK\nICAgICAgICAgICAgcGFyc2VyLnNldE1vZGUoKGlzTWFwcGluZ09ubHlGYWN0\nb3J5KCkpID8gbW9kZQogICAgICAgICAgICAgICAgOiBNT0RFX01FVEEgfCBN\nT0RFX01BUFBJTkcgfCBNT0RFX1FVRVJZKTsKICAgICAgICAgICAgcGFyc2Uo\ncGFyc2VyLCBjbHMpOwogICAgICAgIH0KICAgICAgICBpZiAoIWlzTWFwcGlu\nZ09ubHlGYWN0b3J5KCkgJiYgKG1vZGUgJiBNT0RFX1FVRVJZKSAhPSAwKSB7\nCiAgICAgICAgICAgIHBhcnNlci5zZXRNb2RlKE1PREVfUVVFUlkpOwogICAg\nICAgICAgICBwYXJzZShwYXJzZXIsIGNscyk7CiAgICAgICAgfQoKICAgICAg\nICAvLyByZW1vdmUgbWV0YWRhdGFzIGZyb20gcmVwb3NpdG9yeSBvciBjbGVh\nciB0aGVpciBtYXBwaW5ncwogICAgICAgIFNldCBmaWxlcyA9IG5ldyBIYXNo\nU2V0KCk7CiAgICAgICAgU2V0IGNsc05hbWVzID0gbnVsbDsKICAgICAgICBp\nZiAoKG1vZGUgJiAoTU9ERV9NRVRBIHwgTU9ERV9NQVBQSU5HKSkgIT0gMCkg\newogICAgICAgICAgICBjbHNOYW1lcyA9IG5ldyBIYXNoU2V0KChpbnQpIChj\nbHMubGVuZ3RoICogMS4zMyArIDEpKTsKICAgICAgICAgICAgQ2xhc3NNZXRh\nRGF0YSBtZXRhOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNs\ncy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKGNsc1tpXSA9\nPSBudWxsKQogICAgICAgICAgICAgICAgICAgIGNsc05hbWVzLmFkZChudWxs\nKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBj\nbHNOYW1lcy5hZGQoY2xzW2ldLmdldE5hbWUoKSk7CiAgICAgICAgICAgICAg\nICBtZXRhID0gcHIuZ2V0TWV0YURhdGEoY2xzW2ldLCBlbnZMb2FkZXIsIGZh\nbHNlKTsKICAgICAgICAgICAgICAgIGlmIChtZXRhICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgICAgICBpZiAoZ2V0U291cmNlRmlsZShtZXRhKSAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgICAgICAgICBmaWxlcy5hZGQoZ2V0U291\ncmNlRmlsZShtZXRhKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKChtb2Rl\nICYgTU9ERV9NRVRBKSAhPSAwKQogICAgICAgICAgICAgICAgICAgICAgICBw\nci5yZW1vdmVNZXRhRGF0YShtZXRhKTsKICAgICAgICAgICAgICAgICAgICBl\nbHNlIGlmICghaXNNYXBwaW5nT25seUZhY3RvcnkoKSkKICAgICAgICAgICAg\nICAgICAgICAgICAgY2xlYXJNYXBwaW5nKG1ldGEpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyByZW1v\ndmUgcXVlcnkgbW9kZSBtZXRhZGF0YXMgc28gd2UgY2FuIHN0b3JlIHRoZW0g\nc2VwYXJhdGVseQogICAgICAgIFF1ZXJ5TWV0YURhdGFbXSBxdWVyaWVzID0g\ncHIuZ2V0UXVlcnlNZXRhRGF0YXMoKTsKICAgICAgICBMaXN0IHFxcyA9ICgh\naXNNYXBwaW5nT25seUZhY3RvcnkoKSAmJiAobW9kZSAmIE1PREVfUVVFUlkp\nID09IDApCiAgICAgICAgICAgID8gbnVsbCA6IG5ldyBBcnJheUxpc3QoKTsK\nICAgICAgICBib29sZWFuIHJlbTsKICAgICAgICBDbGFzcyBkZWY7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyaWVzLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIGlmICghaXNNYXBwaW5nT25seUZhY3RvcnkoKSAmJiBx\ndWVyaWVzW2ldLmdldFNvdXJjZUZpbGUoKSAhPSBudWxsKQogICAgICAgICAg\nICAgICAgZmlsZXMuYWRkKHF1ZXJpZXNbaV0uZ2V0U291cmNlRmlsZSgpKTsK\nICAgICAgICAgICAgZGVmID0gcXVlcmllc1tpXS5nZXREZWZpbmluZ1R5cGUo\nKTsKICAgICAgICAgICAgcmVtID0gKHF1ZXJpZXNbaV0uZ2V0U291cmNlTW9k\nZSgpICYgbW9kZSkgIT0gMAogICAgICAgICAgICAgICAgJiYgY2xzTmFtZXMu\nY29udGFpbnMoKGRlZiA9PSBudWxsKSA/IG51bGwgOiBkZWYuZ2V0TmFtZSgp\nKTsKICAgICAgICAgICAgaWYgKHJlbSB8fCAoIWlzTWFwcGluZ09ubHlGYWN0\nb3J5KCkKICAgICAgICAgICAgICAgICYmIHF1ZXJpZXNbaV0uZ2V0U291cmNl\nTW9kZSgpID09IE1PREVfUVVFUlkpKQogICAgICAgICAgICAgICAgcHIucmVt\nb3ZlUXVlcnlNZXRhRGF0YShxdWVyaWVzW2ldKTsKICAgICAgICAgICAgaWYg\nKHFxcyAhPSBudWxsICYmIHF1ZXJpZXNbaV0uZ2V0U291cmNlTW9kZSgpID09\nIE1PREVfUVVFUlkgJiYgIXJlbSkKICAgICAgICAgICAgICAgIHFxcy5hZGQo\ncXVlcmllc1tpXSk7CiAgICAgICAgfQoKICAgICAgICAvLyB3cml0ZSBuZXcg\nbWV0YWRhdGEgd2l0aG91dCByZW1vdmVkIGluc3RhbmNlcwogICAgICAgIGJh\nY2t1cEFuZERlbGV0ZShmaWxlcyk7CiAgICAgICAgU2VyaWFsaXplciBzZXI7\nCiAgICAgICAgaWYgKChtb2RlICYgKE1PREVfTUVUQSB8IE1PREVfTUFQUElO\nRykpICE9IDApIHsKICAgICAgICAgICAgc2VyID0gbmV3U2VyaWFsaXplcigp\nOwogICAgICAgICAgICBzZXIuc2V0TW9kZSgoaXNNYXBwaW5nT25seUZhY3Rv\ncnkoKSkgPyBtb2RlIDogbW9kZSB8IE1PREVfTUVUQSk7CiAgICAgICAgICAg\nIHNlci5hZGRBbGwocHIpOwogICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBz\nZXJpYWxpemVyIHJhdGhlciB0aGFuIGZyb20gcmVwb3NpdG9yeSBhYm92ZSBz\nbyB0aGF0CiAgICAgICAgICAgIC8vIGNhbGxpbmcgY29kZSBjYW4gdGFrZSBh\nZHZhbnRhZ2Ugb2YgbWV0YWRhdGEgc3RpbGwgaW4gcmVwb3MKICAgICAgICAg\nICAgaWYgKGlzTWFwcGluZ09ubHlGYWN0b3J5KCkpCiAgICAgICAgICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGNscy5sZW5ndGg7IGkrKykKICAgICAg\nICAgICAgICAgICAgICBzZXIucmVtb3ZlTWV0YURhdGEocHIuZ2V0TWV0YURh\ndGEoY2xzW2ldLCBlbnZMb2FkZXIsCiAgICAgICAgICAgICAgICAgICAgICAg\nIGZhbHNlKSk7CiAgICAgICAgICAgIHNlcmlhbGl6ZShzZXIsIG51bGwsIFNl\ncmlhbGl6ZXIuUFJFVFRZKTsKICAgICAgICB9CiAgICAgICAgaWYgKHFxcyAh\nPSBudWxsICYmICFxcXMuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgIHNlciA9\nIG5ld1NlcmlhbGl6ZXIoKTsKICAgICAgICAgICAgc2VyLnNldE1vZGUoTU9E\nRV9RVUVSWSk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXFz\nLnNpemUoKTsgaSsrKQogICAgICAgICAgICAgICAgc2VyLmFkZFF1ZXJ5TWV0\nYURhdGEoKFF1ZXJ5TWV0YURhdGEpIHFxcy5nZXQoaSkpOwogICAgICAgICAg\nICBzZXJpYWxpemUoc2VyLCBudWxsLCBTZXJpYWxpemVyLlBSRVRUWSk7CiAg\nICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgog\nICAgICogQXNzaWduIGRlZmF1bHQgc291cmNlIGZpbGVzIHRvIHRoZSBnaXZl\nbiBtZXRhZGF0YXMuCiAgICAgKgogICAgICogQHBhcmFtIGNsc05hbWVzIG1h\ncCBvZiBjbGFzcyBuYW1lcyB0byBtZXRhZGF0YXMKICAgICAqIEByZXR1cm4g\nc2V0IG9mIGV4aXN0aW5nIGZpbGVzIHVzZWQgYnkgdGhlc2UgbWV0YWRhdGFz\nLCBvcgogICAgICogbnVsbCBpZiBubyBleGlzdGluZyBmaWxlcwogICAgICov\nCiAgICBwcml2YXRlIFNldCBhc3NpZ25EZWZhdWx0TWV0YURhdGFGaWxlcyhD\nbGFzc01ldGFEYXRhW10gbWV0YXMsCiAgICAgICAgUXVlcnlNZXRhRGF0YVtd\nIHF1ZXJpZXMsIFNlcXVlbmNlTWV0YURhdGFbXSBzZXFzLCBpbnQgbW9kZSwK\nICAgICAgICBNYXAgY2xzTmFtZXMpIHsKICAgICAgICBTZXQgZmlsZXMgPSBu\ndWxsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgaWYgKGdldFNvdXJjZUZpbGUobWV0YXNb\naV0pID09IG51bGwpCiAgICAgICAgICAgICAgICBzZXRTb3VyY2VGaWxlKG1l\ndGFzW2ldLCBkZWZhdWx0U291cmNlRmlsZShtZXRhc1tpXSkpOwogICAgICAg\nICAgICBpZiAoKEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEoyRG9Q\ncml2SGVscGVyCiAgICAgICAgICAgICAgICAuZXhpc3RzQWN0aW9uKGdldFNv\ndXJjZUZpbGUobWV0YXNbaV0pKSkpLmJvb2xlYW5WYWx1ZSgpKSB7CiAgICAg\nICAgICAgICAgICBpZiAoZmlsZXMgPT0gbnVsbCkKICAgICAgICAgICAgICAg\nICAgICBmaWxlcyA9IG5ldyBIYXNoU2V0KCk7CiAgICAgICAgICAgICAgICBm\naWxlcy5hZGQoZ2V0U291cmNlRmlsZShtZXRhc1tpXSkpOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVl\ncmllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAocXVlcmllc1tp\nXS5nZXRTb3VyY2VNb2RlKCkgPT0gTU9ERV9RVUVSWQogICAgICAgICAgICAg\nICAgfHwgKG1vZGUgJiBxdWVyaWVzW2ldLmdldFNvdXJjZU1vZGUoKSkgPT0g\nMCkKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAo\ncXVlcmllc1tpXS5nZXRTb3VyY2VGaWxlKCkgPT0gbnVsbCkKICAgICAgICAg\nICAgICAgIHF1ZXJpZXNbaV0uc2V0U291cmNlKGRlZmF1bHRTb3VyY2VGaWxl\nKHF1ZXJpZXNbaV0sCiAgICAgICAgICAgICAgICAgICAgY2xzTmFtZXMpLCBx\ndWVyaWVzW2ldLmdldFNvdXJjZVNjb3BlKCksCiAgICAgICAgICAgICAgICAg\nICAgcXVlcmllc1tpXS5nZXRTb3VyY2VUeXBlKCkpOwogICAgICAgICAgICBp\nZiAoKEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAg\nICAgICAgSjJEb1ByaXZIZWxwZXIuZXhpc3RzQWN0aW9uKHF1ZXJpZXNbaV0u\nZ2V0U291cmNlRmlsZSgpKSkpCiAgICAgICAgICAgICAgICAuYm9vbGVhblZh\nbHVlKCkpIHsKICAgICAgICAgICAgICAgIGlmIChmaWxlcyA9PSBudWxsKQog\nICAgICAgICAgICAgICAgICAgIGZpbGVzID0gbmV3IEhhc2hTZXQoKTsKICAg\nICAgICAgICAgICAgIGZpbGVzLmFkZChxdWVyaWVzW2ldLmdldFNvdXJjZUZp\nbGUoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCht\nb2RlICYgTU9ERV9NQVBQSU5HKSAhPSAwKSB7CiAgICAgICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgc2Vxcy5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICAgICAgaWYgKGdldFNvdXJjZUZpbGUoc2Vxc1tpXSkgPT0gbnVsbCkKICAg\nICAgICAgICAgICAgICAgICBzZXRTb3VyY2VGaWxlKHNlcXNbaV0sIGRlZmF1\nbHRTb3VyY2VGaWxlKHNlcXNbaV0sCiAgICAgICAgICAgICAgICAgICAgICAg\nIGNsc05hbWVzKSk7CiAgICAgICAgICAgICAgICBpZiAoKEFjY2Vzc0NvbnRy\nb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgICAgIEoyRG9Q\ncml2SGVscGVyLmV4aXN0c0FjdGlvbihnZXRTb3VyY2VGaWxlKHNlcXNbaV0p\nKSkpCiAgICAgICAgICAgICAgICAgICAgLmJvb2xlYW5WYWx1ZSgpKSB7CiAg\nICAgICAgICAgICAgICAgICAgaWYgKGZpbGVzID09IG51bGwpCiAgICAgICAg\nICAgICAgICAgICAgICAgIGZpbGVzID0gbmV3IEhhc2hTZXQoKTsKICAgICAg\nICAgICAgICAgICAgICBmaWxlcy5hZGQoZ2V0U291cmNlRmlsZShzZXFzW2ld\nKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIGZpbGVzOwogICAgfQoKICAgIC8qKgogICAgICog\nQXNzaWduIGRlZmF1bHQgc291cmNlIGZpbGVzIHRvIHRoZSBnaXZlbiBxdWVy\naWVzLgogICAgICoKICAgICAqIEBwYXJhbSBjbHNOYW1lcyBtYXAgb2YgY2xh\nc3MgbmFtZXMgdG8gbWV0YWRhdGFzCiAgICAgKiBAcmV0dXJuIHNldCBvZiBl\neGlzdGluZyBmaWxlcyB1c2VkIGJ5IHRoZXNlIG1ldGFkYXRhcywgb3IKICAg\nICAqIG51bGwgaWYgbm8gZXhpc3RpbmcgZmlsZXMKICAgICAqLwogICAgcHJp\ndmF0ZSBTZXQgYXNzaWduRGVmYXVsdFF1ZXJ5RmlsZXMoUXVlcnlNZXRhRGF0\nYVtdIHF1ZXJpZXMsCiAgICAgICAgTWFwIGNsc05hbWVzKSB7CiAgICAgICAg\nU2V0IGZpbGVzID0gbnVsbDsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIHF1ZXJpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHF1ZXJp\nZXNbaV0uZ2V0U291cmNlTW9kZSgpICE9IE1PREVfUVVFUlkpCiAgICAgICAg\nICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgaWYgKHF1ZXJpZXNbaV0u\nZ2V0U291cmNlRmlsZSgpID09IG51bGwpCiAgICAgICAgICAgICAgICBxdWVy\naWVzW2ldLnNldFNvdXJjZShkZWZhdWx0U291cmNlRmlsZShxdWVyaWVzW2ld\nLCBjbHNOYW1lcyksCiAgICAgICAgICAgICAgICAgICAgcXVlcmllc1tpXS5n\nZXRTb3VyY2VTY29wZSgpLCBxdWVyaWVzW2ldLmdldFNvdXJjZVR5cGUoKSk7\nCiAgICAgICAgICAgIGlmICgoQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVn\nZWQoCiAgICAgICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5leGlzdHNBY3Rp\nb24ocXVlcmllc1tpXS5nZXRTb3VyY2VGaWxlKCkpKSkKICAgICAgICAgICAg\nICAgIC5ib29sZWFuVmFsdWUoKSkgewogICAgICAgICAgICAgICAgaWYgKGZp\nbGVzID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBuZXcg\nSGFzaFNldCgpOwogICAgICAgICAgICAgICAgZmlsZXMuYWRkKHF1ZXJpZXNb\naV0uZ2V0U291cmNlRmlsZSgpKTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICByZXR1cm4gZmlsZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdHJ1ZSBpZiB0aGlzIGZhY3RvcnkgZGVhbHMgb25seSB3aXRoIG1h\ncHBpbmcgZGF0YSwgYW5kIHJlbGllcwogICAgICogb24gYSBzZXBhcmF0ZSBm\nYWN0b3J5IGZvciBtZXRhZGF0YS4KICAgICAqLwogICAgcHJvdGVjdGVkIGJv\nb2xlYW4gaXNNYXBwaW5nT25seUZhY3RvcnkoKSB7CiAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2UgYWxsIGdpdmVu\nIGZpbGVzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBwYXJzZShNZXRh\nRGF0YVBhcnNlciBwYXJzZXIsIENvbGxlY3Rpb24gZmlsZXMpIHsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGZpbGVz\nLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICAgICAg\ncGFyc2VyLnBhcnNlKChGaWxlKSBpdHIubmV4dCgpKTsKICAgICAgICB9IGNh\ndGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgdGhyb3cgbmV3\nIEdlbmVyYWxFeGNlcHRpb24oaW9lKTsKICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBQYXJzZSBhbGwgZ2l2ZW4gY2xhc3NzZXMuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCB2b2lkIHBhcnNlKE1ldGFEYXRhUGFyc2VyIHBhcnNl\nciwgQ2xhc3NbXSBjbHMpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IGNscy5sZW5ndGg7IGkrKykKICAgICAgICAg\nICAgICAgIHBhcnNlci5wYXJzZShjbHNbaV0sIGlzUGFyc2VUb3BEb3duKCkp\nOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgR2VuZXJhbEV4Y2VwdGlvbihpb2UpOwogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcGFyc2UgY2xh\nc3NlcyB0b3AgZG93bi4gRGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBib29sZWFuIGlzUGFyc2VUb3BEb3duKCkgewogICAgICAg\nIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlbGwgdGhl\nIGdpdmVuIHNlcmlhbGllciB0byB3cml0ZSBpdHMgbWV0YWRhdGFzLgogICAg\nICovCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXJpYWxpemUoTWV0YURhdGFTZXJp\nYWxpemVyIHNlciwgTWFwPEZpbGUsIFN0cmluZz4gb3V0cHV0LAogICAgICAg\nIGludCBmbGFncykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmIChv\ndXRwdXQgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHNlci5zZXJpYWxpemUo\nZmxhZ3MpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBzZXIu\nc2VyaWFsaXplKG91dHB1dCwgZmxhZ3MpOwogICAgICAgIH0gY2F0Y2ggKElP\nRXhjZXB0aW9uIGlvZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgR2VuZXJh\nbEV4Y2VwdGlvbihpb2UpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIEJhY2t1cCBhbmQgZGVsZXRlIHRoZSBzb3VyY2UgZmlsZXMgZm9yIHRo\nZSBnaXZlbiBtZXRhZGF0YXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lk\nIGJhY2t1cEFuZERlbGV0ZShDb2xsZWN0aW9uIGZpbGVzKSB7CiAgICAgICAg\nRmlsZSBmaWxlOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gZmlsZXMu\naXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgZmls\nZSA9IChGaWxlKSBpdHIubmV4dCgpOwogICAgICAgICAgICBpZiAoRmlsZXMu\nYmFja3VwKGZpbGUsIGZhbHNlKSAhPSBudWxsKQogICAgICAgICAgICAgICAg\nQWNjZXNzQ29udHJvbGxlcgogICAgICAgICAgICAgICAgICAgIC5kb1ByaXZp\nbGVnZWQoSjJEb1ByaXZIZWxwZXIuZGVsZXRlQWN0aW9uKGZpbGUpKTsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDbGVhciBtYXBwaW5nIGlu\nZm9ybWF0aW9uIGZyb20gdGhlIGdpdmVuIG1ldGFkYXRhLgogICAgICovCiAg\nICBwcm90ZWN0ZWQgdm9pZCBjbGVhck1hcHBpbmcoQ2xhc3NNZXRhRGF0YSBt\nZXRhKSB7CiAgICAgICAgbWV0YS5zZXRTb3VyY2VNb2RlKE1PREVfTUFQUElO\nRywgZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBj\ndXJyZW50IHNvdXJjZSBmaWxlIG9mIHRoZSBnaXZlbiBtZXRhZGF0YS4KICAg\nICAqLwogICAgcHJvdGVjdGVkIEZpbGUgZ2V0U291cmNlRmlsZShDbGFzc01l\ndGFEYXRhIG1ldGEpIHsKICAgICAgICByZXR1cm4gbWV0YS5nZXRTb3VyY2VG\naWxlKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGN1cnJlbnQg\nc291cmNlIGZpbGUgb2YgdGhlIGdpdmVuIG1ldGFkYXRhLgogICAgICovCiAg\nICBwcm90ZWN0ZWQgdm9pZCBzZXRTb3VyY2VGaWxlKENsYXNzTWV0YURhdGEg\nbWV0YSwgRmlsZSBzb3VyY2VGaWxlKSB7CiAgICAgICAgbWV0YS5zZXRTb3Vy\nY2Uoc291cmNlRmlsZSwgbWV0YS5nZXRTb3VyY2VUeXBlKCkpOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBjdXJyZW50IHNvdXJjZSBmaWxl\nIG9mIHRoZSBnaXZlbiBtZXRhZGF0YS4KICAgICAqLwogICAgcHJvdGVjdGVk\nIEZpbGUgZ2V0U291cmNlRmlsZShTZXF1ZW5jZU1ldGFEYXRhIG1ldGEpIHsK\nICAgICAgICByZXR1cm4gbWV0YS5nZXRTb3VyY2VGaWxlKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTZXQgdGhlIGN1cnJlbnQgc291cmNlIGZpbGUgb2Yg\ndGhlIGdpdmVuIG1ldGFkYXRhLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9p\nZCBzZXRTb3VyY2VGaWxlKFNlcXVlbmNlTWV0YURhdGEgbWV0YSwgRmlsZSBz\nb3VyY2VGaWxlKSB7CiAgICAgICAgbWV0YS5zZXRTb3VyY2Uoc291cmNlRmls\nZSwgbWV0YS5nZXRTb3VyY2VTY29wZSgpLAogICAgICAgICAgICBtZXRhLmdl\ndFNvdXJjZVR5cGUoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4g\ndGhlIGRlZmF1bHQgZmlsZSBmb3IgdGhlIGdpdmVuIG1ldGFkYXRhLgogICAg\nICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgRmlsZSBkZWZhdWx0U291cmNl\nRmlsZShDbGFzc01ldGFEYXRhIG1ldGEpOwoKICAgIC8qKgogICAgICogUmV0\ndXJuIGEgZGVmYXVsdCBmaWxlIGZvciB0aGUgZ2l2ZW4gcXVlcnkuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBGaWxlIGRlZmF1bHRTb3VyY2VG\naWxlKFF1ZXJ5TWV0YURhdGEgcXVlcnksCiAgICAgICAgTWFwIGNsc05hbWVz\nKTsKCiAgICAvKioKICAgICAqIFJldHVybiBhIGRlZmF1bHQgZmlsZSBmb3Ig\ndGhlIGdpdmVuIHNlcXVlbmNlLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJz\ndHJhY3QgRmlsZSBkZWZhdWx0U291cmNlRmlsZShTZXF1ZW5jZU1ldGFEYXRh\nIHNlcSwKICAgICAgICBNYXAgY2xzTmFtZXMpOwoKICAgIC8qKgogICAgICog\nQ3JlYXRlIGEgbmV3IG1ldGFkYXRhIHBhcnNlci4KICAgICAqCiAgICAgKiBA\ncGFyYW0gbG9hZGluZyBpZiB0cnVlLCB0aGlzIHdpbGwgYmUgdGhlIGNhY2hl\nZCBwYXJzZXIgdXNlZCBmb3IKICAgICAqIGxvYWRpbmcgbWV0YWRhdGEKICAg\nICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IFBhcnNlciBuZXdQYXJzZXIo\nYm9vbGVhbiBsb2FkaW5nKTsKCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5l\ndyBtZXRhZGF0YSBzZXJpYWxpemVyLgogICAgICovCiAgICBwcm90ZWN0ZWQg\nYWJzdHJhY3QgU2VyaWFsaXplciBuZXdTZXJpYWxpemVyKCk7CgogICAgLyoq\nCiAgICAgKiBDcmVhdGUgYSBuZXcgYW5ub3RhdGlvbiBtZXRhZGF0YSBzZXJp\nYWxpemVyLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgU2VyaWFs\naXplciBuZXdBbm5vdGF0aW9uU2VyaWFsaXplcigpOwoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSBtZXRhZGF0YSB0aGF0IGRlZmluZXMgdGhlIGdpdmVu\nIHF1ZXJ5LCBpZiBhbnkuCiAgICAgKgogICAgICogQHBhcmFtIGNsc05hbWVz\nIG1hcCBvZiBjbGFzcyBuYW1lcyB0byBtZXRhZGF0YXMKICAgICAqLwogICAg\ncHJvdGVjdGVkIENsYXNzTWV0YURhdGEgZ2V0RGVmaW5pbmdNZXRhRGF0YShR\ndWVyeU1ldGFEYXRhIHF1ZXJ5LAogICAgICAgIE1hcCBjbHNOYW1lcykgewog\nICAgICAgIENsYXNzIGRlZiA9IHF1ZXJ5LmdldERlZmluaW5nVHlwZSgpOwog\nICAgICAgIGlmIChkZWYgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIChD\nbGFzc01ldGFEYXRhKSBjbHNOYW1lcy5nZXQoZGVmLmdldE5hbWUoKSk7Cgog\nICAgICAgIE1hcC5FbnRyeSBlbnRyeTsKICAgICAgICBTdHJpbmcgcGtnOwog\nICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gY2xzTmFtZXMuZW50cnlTZXQo\nKS5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBl\nbnRyeSA9IChNYXAuRW50cnkpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIHBr\nZyA9IFN0cmluZ3MuZ2V0UGFja2FnZU5hbWUoKFN0cmluZykgZW50cnkuZ2V0\nS2V5KCkpOwogICAgICAgICAgICBpZiAocGtnLmxlbmd0aCgpID09IDApCiAg\nICAgICAgICAgICAgICByZXR1cm4gKENsYXNzTWV0YURhdGEpIGVudHJ5Lmdl\ndFZhbHVlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAg\nfQoKICAgIHB1YmxpYyBTZXQ8U3RyaW5nPiBnZXRQZXJzaXN0ZW50VHlwZU5h\nbWVzKGJvb2xlYW4gZGV2cGF0aCwgCiAgICAJQ2xhc3NMb2FkZXIgZW52TG9h\nZGVyKSB7CiAgICAgICAgLy8gc29tZSBjb25maWd1cmVkIGxvY2F0aW9ucyBt\naWdodCBiZSBpbXBsaWNpdCBpbiBzcGVjLCBzbyByZXR1cm4KICAgICAgICAv\nLyBudWxsIGlmIHdlIGRvbid0IGZpbmQgYW55IGNsYXNzZXMsIHJhdGhlciB0\naGFuIGlmIHdlIGRvbid0IGhhdmUKICAgICAgICAvLyBhbnkgbG9jYXRpb25z\nCiAgICAgICAgaWYgKF90eXBlTmFtZXMgIT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuIChfdHlwZU5hbWVzLmlzRW1wdHkoKSkgPyBudWxsIDogX3R5cGVO\nYW1lczsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQ2xhc3NMb2FkZXIg\nbG9hZGVyID0gcmVwb3MuZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAg\nICAgICAgZ2V0Q2xhc3NSZXNvbHZlckluc3RhbmNlKCkuZ2V0Q2xhc3NMb2Fk\nZXIoZ2V0Q2xhc3MoKSwKICAgICAgICAgICAgICAgIGVudkxvYWRlcik7CiAg\nICAgICAgICAgIGxvbmcgc3RhcnQgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxs\naXMoKTsKCiAgICAgICAgICAgIFNldCBuYW1lcyA9IHBhcnNlUGVyc2lzdGVu\ndFR5cGVOYW1lcyhsb2FkZXIpOwogICAgICAgICAgICBpZiAobmFtZXMuaXNF\nbXB0eSgpICYmIGRldnBhdGgpCiAgICAgICAgICAgICAgICBzY2FuKG5ldyBD\nbGFzc3BhdGhNZXRhRGF0YUl0ZXJhdG9yKG51bGwsIG5ld01ldGFEYXRhRmls\ndGVyKCkpLAogICAgICAgICAgICAgICAgICAgIG5ld0NsYXNzQXJnUGFyc2Vy\nKCksIG5hbWVzLCBmYWxzZSwgbnVsbCk7CiAgICAgICAgICAgIGVsc2UgLy8g\nd2UgZG9uJ3QgY2FjaGUgYSBmdWxsIGRldiBjcCBzY2FuCiAgICAgICAgICAg\nICAgICBfdHlwZU5hbWVzID0gbmFtZXM7CgogICAgICAgICAgICBpZiAobG9n\nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgICAgICBsb2cudHJhY2Uo\nX2xvYy5nZXQoImZvdW5kLXBjcyIsIFN0cmluZy52YWx1ZU9mKG5hbWVzLnNp\nemUoKSksCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nLnZhbHVlT2YoU3lz\ndGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLSBzdGFydCkpKTsKICAgICAgICAg\nICAgcmV0dXJuIChuYW1lcy5pc0VtcHR5KCkpID8gbnVsbCA6IG5hbWVzOwog\nICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgR2VuZXJhbEV4Y2VwdGlvbihpb2UpOwogICAgICAgIH0K\nICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIHBlcnNpc3RlbnQgdHlwZSBu\nYW1lcy4KICAgICAqLwogICAgcHJvdGVjdGVkIFNldDxTdHJpbmc+IHBhcnNl\nUGVyc2lzdGVudFR5cGVOYW1lcyhDbGFzc0xvYWRlciBsb2FkZXIpCiAgICAg\nICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBDbGFzc0FyZ1BhcnNl\nciBjcGFyc2VyID0gbmV3Q2xhc3NBcmdQYXJzZXIoKTsKICAgICAgICBTdHJp\nbmdbXSBjbHNzOwogICAgICAgIFNldDxTdHJpbmc+IG5hbWVzID0gbmV3IEhh\nc2hTZXQ8U3RyaW5nPigpOwogICAgICAgIGlmIChmaWxlcyAhPSBudWxsKSB7\nCiAgICAgICAgICAgIEZpbGUgZmlsZTsKICAgICAgICAgICAgZm9yIChJdGVy\nYXRvciBpdHIgPSBmaWxlcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykg\newogICAgICAgICAgICAgICAgZmlsZSA9IChGaWxlKSBpdHIubmV4dCgpOwog\nICAgICAgICAgICAgICAgaWYgKChBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmls\nZWdlZChKMkRvUHJpdkhlbHBlcgogICAgICAgICAgICAgICAgICAgIC5pc0Rp\ncmVjdG9yeUFjdGlvbihmaWxlKSkpLmJvb2xlYW5WYWx1ZSgpKSB7CiAgICAg\nICAgICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAg\nICAgICAgICAgICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoInNjYW5u\naW5nLWRpcmVjdG9yeSIsIGZpbGUpKTsKICAgICAgICAgICAgICAgICAgICBz\nY2FuKG5ldyBGaWxlTWV0YURhdGFJdGVyYXRvcihmaWxlLCBuZXdNZXRhRGF0\nYUZpbHRlcigpKSwKICAgICAgICAgICAgICAgICAgICAgICAgY3BhcnNlciwg\nbmFtZXMsIHRydWUsIGZpbGUpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlm\nIChmaWxlLmdldE5hbWUoKS5lbmRzV2l0aCgiLmphciIpKSB7CiAgICAgICAg\nICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAg\nICAgICAgICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoInNjYW5uaW5n\nLWphciIsIGZpbGUpKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgICAgICAgICBaaXBGaWxlIHpGaWxlID0gQWNjZXNzQ29u\ndHJvbGxlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvUHJpdmls\nZWdlZChKMkRvUHJpdkhlbHBlcgogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIC5uZXdaaXBGaWxlQWN0aW9uKGZpbGUpKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgc2NhbihuZXcgWmlwRmlsZU1ldGFEYXRhSXRlcmF0b3Io\nekZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdNZXRhRGF0\nYUZpbHRlcigpKSwgY3BhcnNlciwgbmFtZXMsIHRydWUsIGZpbGUpOwogICAg\nICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRBY3Rpb25FeGNl\ncHRpb24gcGFlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChJ\nT0V4Y2VwdGlvbikgcGFlLmdldEV4Y2VwdGlvbigpOwogICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg\nICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAg\nICAgICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoInNjYW5uaW5nLWZp\nbGUiLCBmaWxlKSk7CiAgICAgICAgICAgICAgICAgICAgY2xzcyA9IGNwYXJz\nZXIucGFyc2VUeXBlTmFtZXMobmV3IEZpbGVNZXRhRGF0YUl0ZXJhdG9yCiAg\nICAgICAgICAgICAgICAgICAgICAgIChmaWxlKSk7CiAgICAgICAgICAgICAg\nICAgICAgTGlzdDxTdHJpbmc+IG5ld05hbWVzID0gQXJyYXlzLmFzTGlzdChj\nbHNzKTsKICAgICAgICAgICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFi\nbGVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy50cmFjZShfbG9j\nLmdldCgic2Nhbi1mb3VuZC1uYW1lcyIsIG5ld05hbWVzLCBmaWxlKSk7CiAg\nICAgICAgICAgICAgICAgICAgbmFtZXMuYWRkQWxsKG5ld05hbWVzKTsKICAg\nICAgICAgICAgICAgICAgICBGaWxlIGYgPSBBY2Nlc3NDb250cm9sbGVyCiAg\nICAgICAgICAgICAgICAgICAgICAgIC5kb1ByaXZpbGVnZWQoSjJEb1ByaXZI\nZWxwZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRBYnNvbHV0\nZUZpbGVBY3Rpb24oZmlsZSkpOwogICAgICAgICAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFBlcnNpc3RlbnRUeXBlTmFt\nZXMoQWNjZXNzQ29udHJvbGxlcgogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlci50b1VSTEFjdGlvbihm\nKSksIGNsc3MpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFByaXZp\nbGVnZWRBY3Rpb25FeGNlcHRpb24gcGFlKSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIHRocm93IChGaWxlTm90Rm91bmRFeGNlcHRpb24pIHBhZS5nZXRF\neGNlcHRpb24oKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgVVJMIHVy\nbDsKICAgICAgICBpZiAodXJscyAhPSBudWxsKSB7CiAgICAgICAgICAgIGZv\nciAoSXRlcmF0b3IgaXRyID0gdXJscy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4\ndCgpOykgewogICAgICAgICAgICAgICAgdXJsID0gKFVSTCkgaXRyLm5leHQo\nKTsKICAgICAgICAgICAgICAgIGlmICgiZmlsZSIuZXF1YWxzKHVybC5nZXRQ\ncm90b2NvbCgpKSkgewogICAgICAgICAgICAgICAgICAgIEZpbGUgZmlsZSA9\nIEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgICAgICAgICAgICAgLmRv\nUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlcgogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgLmdldEFic29sdXRlRmlsZUFjdGlvbihuZXcgRmlsZSh1cmwu\nZ2V0RmlsZSgpKSkpOyAKICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZXMg\nIT0gbnVsbCAmJiBmaWxlcy5jb250YWlucyhmaWxlKSkgewogICAgICAgICAg\nICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9\nIGVsc2UgaWYgKChBY2Nlc3NDb250cm9sbGVyCiAgICAgICAgICAgICAgICAg\nICAgICAgIC5kb1ByaXZpbGVnZWQoSjJEb1ByaXZIZWxwZXIuaXNEaXJlY3Rv\ncnlBY3Rpb24oZmlsZSkpKQogICAgICAgICAgICAgICAgICAgICAgICAuYm9v\nbGVhblZhbHVlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxv\nZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2FubmluZy1kaXJlY3RvcnkiLCBm\naWxlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW4oCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBuZXcgRmlsZU1ldGFEYXRhSXRlcmF0b3Io\nZmlsZSwgbmV3TWV0YURhdGFGaWx0ZXIoKSksCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBjcGFyc2VyLCBuYW1lcywgdHJ1ZSwgZmlsZSk7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICgi\namFyIi5lcXVhbHModXJsLmdldFByb3RvY29sKCkpCiAgICAgICAgICAgICAg\nICAgICAgJiYgdXJsLmdldFBhdGgoKS5lbmRzV2l0aCgiIS8iKSkgewogICAg\nICAgICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAg\nICAgICAgICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2Fu\nbmluZy1qYXItdXJsIiwgdXJsKSk7CiAgICAgICAgICAgICAgICAgICAgc2Nh\nbihuZXcgWmlwRmlsZU1ldGFEYXRhSXRlcmF0b3IodXJsLAogICAgICAgICAg\nICAgICAgICAgICAgICBuZXdNZXRhRGF0YUZpbHRlcigpKSwgY3BhcnNlciwg\nbmFtZXMsIHRydWUsIHVybCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYg\nKHVybC5nZXRQYXRoKCkuZW5kc1dpdGgoIi5qYXIiKSkgewogICAgICAgICAg\nICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAg\nICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2FubmluZy1q\nYXItYXQtdXJsIiwgdXJsKSk7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgICAgICAgICAgICAgSW5wdXRTdHJlYW0gaXMgPSAoSW5w\ndXRTdHJlYW0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBY2Nlc3ND\nb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5vcGVuU3RyZWFtQWN0aW9uKHVy\nbCkpOwogICAgICAgICAgICAgICAgICAgICAgICBzY2FuKG5ldyBaaXBTdHJl\nYW1NZXRhRGF0YUl0ZXJhdG9yKAogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgbmV3IFppcElucHV0U3RyZWFtKGlzKSwKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIG5ld01ldGFEYXRhRmlsdGVyKCkpLCBjcGFyc2VyLCBuYW1l\ncywgdHJ1ZSwgdXJsKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChQ\ncml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uIHBhZSkgewogICAgICAgICAgICAg\nICAgICAgICAgICB0aHJvdyAoSU9FeGNlcHRpb24pIHBhZS5nZXRFeGNlcHRp\nb24oKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVu\nYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9s\nb2MuZ2V0KCJzY2FubmluZy11cmwiLCB1cmwpKTsKICAgICAgICAgICAgICAg\nICAgICBjbHNzID0gY3BhcnNlci5wYXJzZVR5cGVOYW1lcyhuZXcgVVJMTWV0\nYURhdGFJdGVyYXRvcih1cmwpKTsKICAgICAgICAgICAgICAgICAgICBMaXN0\nPFN0cmluZz4gbmV3TmFtZXMgPSBBcnJheXMuYXNMaXN0KGNsc3MpOwogICAg\nICAgICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAg\nICAgICAgICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2Fu\nLWZvdW5kLW5hbWVzIiwgbmV3TmFtZXMsIHVybCkpOwogICAgICAgICAgICAg\nICAgICAgIG5hbWVzLmFkZEFsbChuZXdOYW1lcyk7CiAgICAgICAgICAgICAg\nICAgICAgbWFwUGVyc2lzdGVudFR5cGVOYW1lcyh1cmwsIGNsc3MpOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAg\nIGlmIChyc3JjcyAhPSBudWxsKSB7CiAgICAgICAgICAgIFN0cmluZyByc3Jj\nOwogICAgICAgICAgICBNZXRhRGF0YUl0ZXJhdG9yIG1pdHI7CiAgICAgICAg\nICAgIGZvciAoSXRlcmF0b3IgaXRyID0gcnNyY3MuaXRlcmF0b3IoKTsgaXRy\nLmhhc05leHQoKTspIHsKICAgICAgICAgICAgICAgIHJzcmMgPSAoU3RyaW5n\nKSBpdHIubmV4dCgpOwogICAgICAgICAgICAgICAgaWYgKHJzcmMuZW5kc1dp\ndGgoIi5qYXIiKSkgewogICAgICAgICAgICAgICAgICAgIHVybCA9IEFjY2Vz\nc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgICAg\nICAgICBKMkRvUHJpdkhlbHBlci5nZXRSZXNvdXJjZUFjdGlvbihsb2FkZXIs\nIHJzcmMpKTsgCiAgICAgICAgICAgICAgICAgICAgaWYgKHVybCAhPSBudWxs\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVu\nYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy50cmFj\nZShfbG9jLmdldCgic2Nhbm5pbmctamFyLXN0cmVhbS11cmwiLCB1cmwpKTsK\nICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIElucHV0U3RyZWFtIGlzID0gKElucHV0U3RyZWFtKQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjY2Vzc0NvbnRyb2xs\nZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBKMkRvUHJpdkhlbHBlci5vcGVuU3RyZWFtQWN0aW9uKHVybCkp\nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbihuZXcgWmlwU3Ry\nZWFtTWV0YURhdGFJdGVyYXRvcgogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIChuZXcgWmlwSW5wdXRTdHJlYW0oaXMpLAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIG5ld01ldGFEYXRhRmlsdGVyKCkpLCBjcGFy\nc2VyLCBuYW1lcywgdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICB1cmwpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChQ\ncml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uIHBhZSkgewogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgdGhyb3cgKElPRXhjZXB0aW9uKSBwYWUuZ2V0RXhj\nZXB0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2Fubmlu\nZy1yZXNvdXJjZSIsIHJzcmMpKTsKICAgICAgICAgICAgICAgICAgICBtaXRy\nID0gbmV3IFJlc291cmNlTWV0YURhdGFJdGVyYXRvcihyc3JjLCBsb2FkZXIp\nOwogICAgICAgICAgICAgICAgICAgIHdoaWxlIChtaXRyLmhhc05leHQoKSkg\newogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSAoVVJMKSBtaXRyLm5l\neHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2xzcyA9IGNwYXJzZXIu\ncGFyc2VUeXBlTmFtZXMobmV3IFVSTE1ldGFEYXRhSXRlcmF0b3IKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICh1cmwpKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgTGlzdDxTdHJpbmc+IG5ld05hbWVzID0gQXJyYXlzLmFzTGlz\ndChjbHNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvZy5pc1Ry\nYWNlRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9n\nLnRyYWNlKF9sb2MuZ2V0KCJzY2FuLWZvdW5kLW5hbWVzIiwgbmV3TmFtZXMs\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJzcmMpKTsK\nICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXMuYWRkQWxsKG5ld05hbWVz\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgbWFwUGVyc2lzdGVudFR5cGVO\nYW1lcyh1cmwsIGNsc3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgICAgICBtaXRyLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNwYXRoICE9\nIG51bGwpIHsKICAgICAgICAgICAgU3RyaW5nW10gZGlycyA9IChTdHJpbmdb\nXSkgY3BhdGgudG9BcnJheShuZXcgU3RyaW5nW2NwYXRoLnNpemUoKV0pOwog\nICAgICAgICAgICBzY2FuKG5ldyBDbGFzc3BhdGhNZXRhRGF0YUl0ZXJhdG9y\nKGRpcnMsIG5ld01ldGFEYXRhRmlsdGVyKCkpLAogICAgICAgICAgICAgICAg\nY3BhcnNlciwgbmFtZXMsIHRydWUsIGRpcnMpOwogICAgICAgIH0KICAgICAg\nICBpZiAodHlwZXMgIT0gbnVsbCkKICAgICAgICAgICAgbmFtZXMuYWRkQWxs\nKHR5cGVzKTsKCiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQog\nICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoInBhcnNlLWZvdW5kLW5h\nbWVzIiwgbmFtZXMpKTsKICAgICAgICAKICAgICAgICByZXR1cm4gbmFtZXM7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBTY2FuIGZvciBwZXJzaXN0ZW50IHR5\ncGUgbmFtZXMgdXNpbmcgdGhlIGdpdmVuIG1ldGFkYXRhIGl0ZXJhdG9yLgog\nICAgICovCiAgICBwcml2YXRlIHZvaWQgc2NhbihNZXRhRGF0YUl0ZXJhdG9y\nIG1pdHIsIENsYXNzQXJnUGFyc2VyIGNwYXJzZXIsIFNldCBuYW1lcywKICAg\nICAgICBib29sZWFuIG1hcE5hbWVzLCBPYmplY3QgZGVidWdDb250ZXh0KQog\nICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgTWFwIG1hcDsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBtYXAgPSBjcGFyc2VyLm1hcFR5\ncGVOYW1lcyhtaXRyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAg\nICBtaXRyLmNsb3NlKCk7CiAgICAgICAgfQoKICAgICAgICBNYXAuRW50cnkg\nZW50cnk7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBtYXAuZW50cnlT\nZXQoKS5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAg\nICBlbnRyeSA9IChNYXAuRW50cnkpIGl0ci5uZXh0KCk7CiAgICAgICAgICAg\nIGlmIChtYXBOYW1lcykKICAgICAgICAgICAgICAgIG1hcFBlcnNpc3RlbnRU\neXBlTmFtZXMoZW50cnkuZ2V0S2V5KCksIChTdHJpbmdbXSkKICAgICAgICAg\nICAgICAgICAgICBlbnRyeS5nZXRWYWx1ZSgpKTsKICAgICAgICAgICAgTGlz\ndCBuZXdOYW1lcyA9IEFycmF5cy5hc0xpc3QoKFN0cmluZ1tdKSBlbnRyeS5n\nZXRWYWx1ZSgpKTsKICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxl\nZCgpKQogICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2Fu\nLWZvdW5kLW5hbWVzIiwgbmV3TmFtZXMsIGRlYnVnQ29udGV4dCkpOwogICAg\nICAgICAgICBuYW1lcy5hZGRBbGwobmV3TmFtZXMpOwogICAgICAgIH0KICAg\nIH0KCiAgICAvKioKICAgICAqIEltcGxlbWVudCB0aGlzIG1ldGhvZCB0byBt\nYXAgbWV0YWRhdGEgcmVzb3VyY2VzIHRvIHRoZSBwZXJzaXN0ZW50CiAgICAg\nKiB0eXBlcyBjb250YWluZWQgd2l0aGluIHRoZW0uIFRoZSBtZXRob2Qgd2ls\nbCBiZSBjYWxsZWQgd2hlbgogICAgICoge0BsaW5rICNnZXRQZXJzaXN0ZW50\nVHlwZU5hbWVzfSBpcyBpbnZva2VkLgogICAgICovCiAgICBwcm90ZWN0ZWQg\ndm9pZCBtYXBQZXJzaXN0ZW50VHlwZU5hbWVzKE9iamVjdCByc3JjLCBTdHJp\nbmdbXSBuYW1lcykgewogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEg\nbWV0YWRhdGEgZmlsdGVyIHRoYXQgaWRlbnRpZmllcyBtZXRhZGF0YSByZXNv\ndXJjZXMgd2hlbgogICAgICogcGVyZm9ybWluZyBqYXIgYW5kIGNsYXNzcGF0\naCBzY2Fucy4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IE1ldGFE\nYXRhRmlsdGVyIG5ld01ldGFEYXRhRmlsdGVyKCk7CgogICAgcHVibGljIHZv\naWQgY2xlYXIoKSB7CiAgICAgICAgc3VwZXIuY2xlYXIoKTsKICAgICAgICBf\ndHlwZU5hbWVzID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEludGVy\nbmFsIHBhcnNlciBpbnRlcmZhY2UuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgaW50ZXJmYWNlIFBhcnNlcgogICAgICAgIGV4dGVuZHMgTWV0YURhdGFQ\nYXJzZXIgewoKICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBy\nZXBvc2l0b3J5IGZvciB0aGlzIHBhcnNlci4gSWYgbm9uZSBoYXMgYmVlbiBz\nZXQsCiAgICAgICAgICogY3JlYXRlcyBhIG5ldyByZXBvc2l0b3J5IGFuZCBz\nZXRzIGl0LgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBNZXRhRGF0YVJl\ncG9zaXRvcnkgZ2V0UmVwb3NpdG9yeSgpOwoKICAgICAgICAvKioKICAgICAg\nICAgKiBUaGUgcGFyc2UgbW9kZSBhY2NvcmRpbmcgdG8gdGhlIGV4cGVjdGVk\nIGRvY3VtZW50IHR5cGUuCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHZv\naWQgc2V0TW9kZShpbnQgbW9kZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJ\nbnRlcm5hbCBzZXJpYWxpemVyIGludGVyZmFjZS4KICAgICAqLwogICAgcHVi\nbGljIHN0YXRpYyBpbnRlcmZhY2UgU2VyaWFsaXplcgogICAgICAgIGV4dGVu\nZHMgTWV0YURhdGFTZXJpYWxpemVyIHsKCiAgICAgICAgLyoqCiAgICAgICAg\nICogVGhlIHNlcmlhbGl6YXRpb24gbW9kZSBhY2NvcmRpbmcgdG8gdGhlIGV4\ncGVjdGVkIGRvY3VtZW50IHR5cGUuIFRoZQogICAgICAgICAqIG1vZGUgY29u\nc3RhbnRzIGFjdCBhcyBiaXQgZmxhZ3MsIGFuZCB0aGVyZWZvcmUgY2FuIGJl\nIGNvbWJpbmVkLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB2b2lkIHNl\ndE1vZGUoaW50IG1vZGUpOwoKICAgICAgICAvKioKICAgICAgICAgKiBBZGQg\nYSBjbGFzcyBtZXRhIGRhdGEgdG8gdGhlIHNldCB0byBiZSBzZXJpYWxpemVk\nLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB2b2lkIGFkZE1ldGFEYXRh\nKENsYXNzTWV0YURhdGEgbWV0YSk7CgogICAgICAgIC8qKgogICAgICAgICAq\nIFJlbW92ZSBhIGNsYXNzIG1ldGEgZGF0YSBmcm9tIHRoZSBzZXQgdG8gYmUg\nc2VyaWFsaXplZC4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgYm9vbGVh\nbiByZW1vdmVNZXRhRGF0YShDbGFzc01ldGFEYXRhIG1ldGEpOwoKICAgICAg\nICAvKioKICAgICAgICAgKiBBZGQgYSBzZXF1ZW5jZSBtZXRhIGRhdGEgdG8g\ndGhlIHNldCB0byBiZSBzZXJpYWxpemVkLgogICAgICAgICAqLwogICAgICAg\nIHB1YmxpYyB2b2lkIGFkZFNlcXVlbmNlTWV0YURhdGEoU2VxdWVuY2VNZXRh\nRGF0YSBtZXRhKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQWRkIGEgcXVl\ncnkgbWV0YSBkYXRhIHRvIHRoZSBzZXQgdG8gYmUgc2VyaWFsaXplZC4KICAg\nICAgICAgKi8KICAgICAgICBwdWJsaWMgdm9pZCBhZGRRdWVyeU1ldGFEYXRh\nKFF1ZXJ5TWV0YURhdGEgbWV0YSk7CgogICAgICAgIC8qKgogICAgICAgICAq\nIEFkZCBhbGwgY29tcG9uZW50cyBpbiB0aGUgZ2l2ZW4gcmVwb3NpdG9yeSB0\nbyB0aGUgc2V0IHRvIGJlCiAgICAgICAgICogc2VyaWFsaXplZC4KICAgICAg\nICAgKi8KICAgICAgICBwdWJsaWMgdm9pZCBhZGRBbGwgKE1ldGFEYXRhUmVw\nb3NpdG9yeSByZXBvcyk7CiAgICB9Cn0K\n","encoding":"base64"}

