{"sha":"eba5098ecc7e8e1abb7eae3cb6a1e6a195b9f45f","node_id":"MDQ6QmxvYjIwNjM2NDplYmE1MDk4ZWNjN2U4ZTFhYmI3ZWFlM2NiNmExZTZhMTk1YjlmNDVm","size":4483,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/eba5098ecc7e8e1abb7eae3cb6a1e6a195b9f45f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\namF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwoKaW1wb3J0IG9yZy5h\ncGFjaGUuY29tbW9ucy5sYW5nLk9iamVjdFV0aWxzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5SZWZlcmVuY2VNYXA7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudC5D\nb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcDsKCi8qKgogKiBBbiBvYmplY3Qg\ne0BsaW5rIFZhbHVlfS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1\nYmxpYyBjbGFzcyBPYmplY3RWYWx1ZSBleHRlbmRzIFZhbHVlIHsKCiAgICBw\ncml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXpl\nci5mb3JQYWNrYWdlCiAgICAgICAgKE9iamVjdFZhbHVlLmNsYXNzKTsKCiAg\nICAvLyBjYWNoZSB0aGUgdHlwZXMnIGNsYXNzbG9hZGVyCiAgICBwcml2YXRl\nIHN0YXRpYyBDb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcCBfY2xhc3Nsb2Fk\nZXJDYWNoZSA9CiAgICAgICAgbmV3IENvbmN1cnJlbnRSZWZlcmVuY2VIYXNo\nTWFwKFJlZmVyZW5jZU1hcC5IQVJELCBSZWZlcmVuY2VNYXAuV0VBSyk7Cgog\nICAgcHJpdmF0ZSBPYmplY3QgX3ZhbHVlID0gbnVsbDsKCiAgICBwdWJsaWMg\nT2JqZWN0VmFsdWUoU3RyaW5nIHByb3ApIHsKICAgICAgICBzdXBlcihwcm9w\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBpbnRlcm5hbCB2YWx1ZS4K\nICAgICAqLwogICAgcHVibGljIE9iamVjdCBnZXQoKSB7CiAgICAgICAgcmV0\ndXJuIF92YWx1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBpbnRlcm5h\nbCB2YWx1ZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0KE9iamVjdCBv\nYmopIHsKICAgICAgICBzZXQob2JqLCBmYWxzZSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgaW50ZXJuYWwgdmFsdWUuCiAgICAgKgogICAgICogQHBh\ncmFtIGRlcml2ZWQgaWYgdHJ1ZSwgdGhpcyB2YWx1ZSB3YXMgZGVyaXZlZCBm\ncm9tIG90aGVyIHByb3BlcnRpZXMKICAgICAqLwogICAgcHVibGljIHZvaWQg\nc2V0KE9iamVjdCBvYmosIGJvb2xlYW4gZGVyaXZlZCkgewogICAgICAgIGlm\nICghZGVyaXZlZCkgYXNzZXJ0Q2hhbmdlYWJsZSgpOwogICAgICAgIE9iamVj\ndCBvbGRWYWx1ZSA9IF92YWx1ZTsKICAgICAgICBfdmFsdWUgPSBvYmo7CiAg\nICAgICAgaWYgKCFkZXJpdmVkICYmICFPYmplY3RVdGlscy5lcXVhbHMob2Jq\nLCBvbGRWYWx1ZSkpIHsKICAgICAgICAgICAgb2JqZWN0Q2hhbmdlZCgpOwog\nICAgICAgICAgICB2YWx1ZUNoYW5nZWQoKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBJbnN0YW50aWF0ZSB0aGUgb2JqZWN0IGFzIGFuIGlu\nc3RhbmNlIG9mIHRoZSBnaXZlbiBjbGFzcy4gRXF1aXZhbGVudAogICAgICog\ndG8gPGNvZGU+aW5zdGFudGlhdGUodHlwZSwgY29uZiwgdHJ1ZSk8L2NvZGU+\nLgogICAgICovCiAgICBwdWJsaWMgT2JqZWN0IGluc3RhbnRpYXRlKENsYXNz\nPD8+IHR5cGUsIENvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIHJldHVy\nbiBpbnN0YW50aWF0ZSh0eXBlLCBjb25mLCB0cnVlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEluc3RhbnRpYXRlIHRoZSBvYmplY3QgYXMgYW4gaW5zdGFu\nY2Ugb2YgdGhlIGdpdmVuIGNsYXNzLgogICAgICovCiAgICBwdWJsaWMgT2Jq\nZWN0IGluc3RhbnRpYXRlKENsYXNzPD8+IHR5cGUsIENvbmZpZ3VyYXRpb24g\nY29uZiwgYm9vbGVhbiBmYXRhbCkKICAgIHsKICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbmZpZ3VyZSB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICov\nCiAgICBwdWJsaWMgT2JqZWN0IGNvbmZpZ3VyZShPYmplY3Qgb2JqLCBDb25m\naWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICByZXR1cm4gY29uZmlndXJlKG9i\naiwgY29uZiwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25maWd1\ncmUgdGhlIGdpdmVuIG9iamVjdC4KICAgICAqLwogICAgcHVibGljIE9iamVj\ndCBjb25maWd1cmUoT2JqZWN0IG9iaiwgQ29uZmlndXJhdGlvbiBjb25mLCBi\nb29sZWFuIGZhdGFsKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVk\nT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBB\nbGxvdyBzdWJjbGFzc2VzIHRvIGluc3RhbnRpYXRlIGFkZGl0aW9uYWwgcGx1\nZ2lucy4gVGhpcyBtZXRob2QgZG9lcwogICAgICogbm90IHBlcmZvcm0gY29u\nZmlndXJhdGlvbi4KICAgICAqLwogICAgcHVibGljIE9iamVjdCBuZXdJbnN0\nYW5jZShTdHJpbmcgY2xzTmFtZSwgQ2xhc3M8Pz4gdHlwZSwgQ29uZmlndXJh\ndGlvbiBjb25mLAogICAgICAgICAgICBib29sZWFuIGZhdGFsKSB7CiAgICAg\nICAgQ2xhc3NMb2FkZXIgY2wgPSAoQ2xhc3NMb2FkZXIpIF9jbGFzc2xvYWRl\nckNhY2hlLmdldCh0eXBlKTsKICAgICAgICBpZiAoY2wgPT0gbnVsbCkgewog\nICAgICAgICAgICBjbCA9IEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2Vk\nKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0Q2xhc3NMb2Fk\nZXJBY3Rpb24odHlwZSkpOwogICAgICAgICAgICBpZiAoY2wgPT0gbnVsbCkg\neyAgLy8gU3lzdGVtIGNsYXNzbG9hZGVyIGlzIHJldHVybmVkIGFzIG51bGwK\nICAgICAgICAgICAgICAgIGNsID0gQWNjZXNzQ29udHJvbGxlci5kb1ByaXZp\nbGVnZWQoCiAgICAgICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0\nU3lzdGVtQ2xhc3NMb2FkZXJBY3Rpb24oKSk7IAogICAgICAgICAgICB9CiAg\nICAgICAgICAgIF9jbGFzc2xvYWRlckNhY2hlLnB1dCh0eXBlLCBjbCk7CiAg\nICAgICAgfQogICAgICAgIHJldHVybiBDb25maWd1cmF0aW9ucy5uZXdJbnN0\nYW5jZShjbHNOYW1lLCB0aGlzLCBjb25mLCBjbCwgZmF0YWwpOwogICAgfQoK\nICAgIHB1YmxpYyBDbGFzczw/PiBnZXRWYWx1ZVR5cGUoKSB7CiAgICAgICAg\ncmV0dXJuIE9iamVjdC5jbGFzczsKICAgIH0KCiAgICAvKioKICAgICAqIElt\ncGxlbWVudCB0aGlzIG1ldGhvZCB0byBzeW5jaHJvbml6ZSBpbnRlcm5hbCBk\nYXRhIHdpdGggdGhlIG5ldwogICAgICogb2JqZWN0IHZhbHVlLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgdm9pZCBvYmplY3RDaGFuZ2VkKCkgewogICAgfQoK\nICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0SW50ZXJuYWxTdHJpbmcoKSB7CiAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQg\nc2V0SW50ZXJuYWxTdHJpbmcoU3RyaW5nIHN0cikgewogICAgICAgIGlmIChz\ndHIgPT0gbnVsbCkKICAgICAgICAgICAgc2V0KG51bGwpOwogICAgICAgIGVs\nc2UKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbihfbG9jLmdldCgiY2FudC1zZXQtc3RyaW5nIiwKICAgICAgICAgICAg\nICAgIGdldFByb3BlcnR5KCkpLmdldE1lc3NhZ2UoKSk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIHZvaWQgc2V0SW50ZXJuYWxPYmplY3QoT2JqZWN0IG9iaikg\newogICAgICAgIHNldChvYmopOwogICAgfQp9Cg==\n","encoding":"base64"}

