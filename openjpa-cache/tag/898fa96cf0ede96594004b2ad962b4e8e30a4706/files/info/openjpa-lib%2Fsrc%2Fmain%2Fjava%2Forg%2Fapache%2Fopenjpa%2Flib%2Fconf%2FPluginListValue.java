{"sha":"60df32452819f49e1c7eb49ec4f18325f8a63860","node_id":"MDQ6QmxvYjIwNjM2NDo2MGRmMzI0NTI4MTlmNDllMWM3ZWI0OWVjNGYxODMyNWY4YTYzODYw","size":6228,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/60df32452819f49e1c7eb49ec4f18325f8a63860","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\namF2YS5sYW5nLnJlZmxlY3QuQXJyYXk7CmltcG9ydCBqYXZhLnV0aWwuQXJy\nYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3JnLmFw\nYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CgovKioKICogQSBsaXN0\nIG9mIHBsdWdpbnMuIERlZmF1bHRzIGFuZCBhbGlhc2VzIG9uIHBsdWdpbiBs\naXN0cyBhcHBseSBvbmx5CiAqIHRvIGluZGl2aWR1YWwgY2xhc3MgbmFtZXMu\nCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBzZWUgUGx1Z2luVmFsdWUK\nICovCnB1YmxpYyBjbGFzcyBQbHVnaW5MaXN0VmFsdWUgZXh0ZW5kcyBPYmpl\nY3RWYWx1ZSB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nW10g\nRU1QVFkgPSBuZXcgU3RyaW5nWzBdOwoKICAgIHByaXZhdGUgU3RyaW5nW10g\nX25hbWVzID0gRU1QVFk7CiAgICBwcml2YXRlIFN0cmluZ1tdIF9wcm9wcyA9\nIEVNUFRZOwoKICAgIHB1YmxpYyBQbHVnaW5MaXN0VmFsdWUoU3RyaW5nIHBy\nb3ApIHsKICAgICAgICBzdXBlcihwcm9wKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFRoZSBwbHVnaW4gY2xhc3MgbmFtZXMuCiAgICAgKi8KICAgIHB1Ymxp\nYyBTdHJpbmdbXSBnZXRDbGFzc05hbWVzKCkgewogICAgICAgIHJldHVybiBf\nbmFtZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgcGx1Z2luIGNsYXNz\nIG5hbWVzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRDbGFzc05hbWVz\nKFN0cmluZ1tdIG5hbWVzKSB7CiAgICAgICAgaWYgKG5hbWVzID09IG51bGwp\nCiAgICAgICAgICAgIG5hbWVzID0gRU1QVFk7CiAgICAgICAgX25hbWVzID0g\nbmFtZXM7CiAgICAgICAgc2V0KG51bGwsIHRydWUpOwogICAgICAgIHZhbHVl\nQ2hhbmdlZCgpOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHBsdWdpbiBw\ncm9wZXJ0aWVzLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0UHJv\ncGVydGllcygpIHsKICAgICAgICByZXR1cm4gX3Byb3BzOwogICAgfQoKICAg\nIC8qKgogICAgICogVGhlIHBsdWdpbiBwcm9wZXJ0aWVzLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRQcm9wZXJ0aWVzKFN0cmluZ1tdIHByb3BzKSB7\nCiAgICAgICAgaWYgKHByb3BzID09IG51bGwpCiAgICAgICAgICAgIHByb3Bz\nID0gRU1QVFk7CiAgICAgICAgX3Byb3BzID0gcHJvcHM7CiAgICAgICAgc2V0\nKG51bGwsIHRydWUpOwogICAgICAgIHZhbHVlQ2hhbmdlZCgpOwogICAgfQoK\nICAgIC8qKgogICAgICogSW5zdGFudGlhdGUgdGhlIHBsdWdpbnMgYXMgaW5z\ndGFuY2VzIG9mIHRoZSBnaXZlbiBjbGFzcy4KICAgICAqLwogICAgcHVibGlj\nIE9iamVjdCBpbnN0YW50aWF0ZShDbGFzczw/PiBlbGVtVHlwZSwgQ29uZmln\ndXJhdGlvbiBjb25mLAogICAgICAgIGJvb2xlYW4gZmF0YWwpIHsKICAgICAg\nICBPYmplY3RbXSByZXQ7CiAgICAgICAgaWYgKF9uYW1lcy5sZW5ndGggPT0g\nMCkKICAgICAgICAgICAgcmV0ID0gKE9iamVjdFtdKSBBcnJheS5uZXdJbnN0\nYW5jZShlbGVtVHlwZSwgMCk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAg\nIHJldCA9IChPYmplY3RbXSkgQXJyYXkubmV3SW5zdGFuY2UoZWxlbVR5cGUs\nIF9uYW1lcy5sZW5ndGgpOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IHJldC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgcmV0W2ld\nID0gbmV3SW5zdGFuY2UoX25hbWVzW2ldLCBlbGVtVHlwZSwgY29uZiwgZmF0\nYWwpOwogICAgICAgICAgICAgICAgQ29uZmlndXJhdGlvbnMuY29uZmlndXJl\nSW5zdGFuY2UocmV0W2ldLCBjb25mLCBfcHJvcHNbaV0sCiAgICAgICAgICAg\nICAgICAgICAgZ2V0UHJvcGVydHkoKSk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICAgICAgc2V0KHJldCwgdHJ1ZSk7CiAgICAgICAgcmV0dXJuIHJl\ndDsKICAgIH0KCiAgICAvKioKICAgICAqIE92ZXJyaWRlIHRvIHJlY29nbml6\nZSBhbGlhc2VzIG9mIHRoZSBjbGFzcyBuYW1lIHdpdGhvdXQgdGhlIGF0dGFj\naGVkCiAgICAgKiBwcm9wZXJ0aWVzIHN0cmluZy4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXRTdHJpbmcoKSB7CiAgICAgICAgaWYgKF9uYW1lcy5s\nZW5ndGggPT0gMCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAg\nIFN0cmluZ0J1aWxkZXIgYnVmID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9uYW1lcy5sZW5ndGg7IGkrKykg\newogICAgICAgICAgICBpZiAoaSA+IDApCiAgICAgICAgICAgICAgICBidWYu\nYXBwZW5kKCIsICIpOwogICAgICAgICAgICBidWYuYXBwZW5kKENvbmZpZ3Vy\nYXRpb25zLmdldFBsdWdpbihhbGlhcyhfbmFtZXNbaV0pLCAKICAgICAgICAg\nICAgCQkoaTxfcHJvcHMubGVuZ3RoKSA/IF9wcm9wc1tpXSA6IG51bGwpKTsK\nICAgICAgICB9CiAgICAgICAgaWYgKGJ1Zi5sZW5ndGgoKSA9PSAwKQogICAg\nICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gYnVmLnRvU3Ry\naW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBPdmVycmlkZSB0byByZWNv\nZ25pemUgYWxpYXNlcyBvZiB0aGUgcGx1Z2luIG5hbWUgd2l0aG91dCB0aGUg\nYXR0YWNoZWQKICAgICAqIHByb3BlcnRpZXMgc3RyaW5nLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRTdHJpbmcoU3RyaW5nIHN0cikgewogICAgICAg\nIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHN0cikpCiAgICAgICAgICAgIHN0\nciA9IGdldERlZmF1bHQoKTsKICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNF\nbXB0eShzdHIpKSB7CiAgICAgICAgICAgIF9uYW1lcyA9IEVNUFRZOwogICAg\nICAgICAgICBfcHJvcHMgPSBFTVBUWTsKICAgICAgICAgICAgc2V0KG51bGws\nIHRydWUpOwogICAgICAgICAgICB2YWx1ZUNoYW5nZWQoKTsKICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gc3BsaXQgdXAgdGhl\nIHN0cmluZzsgZWFjaCBlbGVtZW50IG1pZ2h0IGJlIGEgY2xhc3MgbmFtZSwg\nb3IgYQogICAgICAgIC8vIGNsYXNzIG5hbWUgd2l0aCBwcm9wZXJ0aWVzIHNl\ndHRpbmdzCiAgICAgICAgTGlzdDxTdHJpbmc+IHBsdWdpbnMgPSBuZXcgQXJy\nYXlMaXN0PFN0cmluZz4oKTsKICAgICAgICBTdHJpbmdCdWlsZGVyIHBsdWdp\nbiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgYm9vbGVhbiBpblBh\ncmVuID0gZmFsc2U7CiAgICAgICAgY2hhciBjOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgc3RyLmxlbmd0aCgpOyBpKyspIHsKICAgICAgICAgICAg\nYyA9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgIHN3aXRjaCAoYykgewog\nICAgICAgICAgICAgICAgY2FzZSAnKCc6CiAgICAgICAgICAgICAgICAgICAg\naW5QYXJlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmFw\ncGVuZChjKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgICAgIGNhc2UgJyknOgogICAgICAgICAgICAgICAgICAgIGluUGFyZW4g\nPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBwbHVnaW4uYXBwZW5kKGMp\nOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAg\nY2FzZSAnLCc6CiAgICAgICAgICAgICAgICAgICAgaWYgKGluUGFyZW4pCiAg\nICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5hcHBlbmQoYyk7CiAgICAg\nICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIHBsdWdpbnMuYWRkKHBsdWdpbi50b1N0cmluZygpKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgcGx1Z2luID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAg\nIHBsdWdpbi5hcHBlbmQoYyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICAgICAgaWYgKHBsdWdpbi5sZW5ndGgoKSA+IDApCiAgICAgICAgICAgIHBs\ndWdpbnMuYWRkKHBsdWdpbi50b1N0cmluZygpKTsKCiAgICAgICAgLy8gcGFy\nc2UgZWFjaCBwbHVnaW4gZWxlbWVudCBpbnRvIGl0cyBuYW1lIGFuZCBwcm9w\nZXJ0aWVzCiAgICAgICAgTGlzdDxTdHJpbmc+IG5hbWVzID0gbmV3IEFycmF5\nTGlzdDxTdHJpbmc+KCk7CiAgICAgICAgTGlzdDxTdHJpbmc+IHByb3BzID0g\nbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7CiAgICAgICAgU3RyaW5nIGNsc05h\nbWU7CiAgICAgICAgZm9yKFN0cmluZyBzIDogcGx1Z2lucykgeyAKICAgICAg\nICAgICAgY2xzTmFtZSA9IHVuYWxpYXMoQ29uZmlndXJhdGlvbnMuZ2V0Q2xh\nc3NOYW1lKHMpKTsKICAgICAgICAgICAgaWYgKGNsc05hbWUgIT0gbnVsbCkg\newogICAgICAgICAgICAgICAgbmFtZXMuYWRkKGNsc05hbWUpOwogICAgICAg\nICAgICAgICAgcHJvcHMuYWRkKENvbmZpZ3VyYXRpb25zLmdldFByb3BlcnRp\nZXMocykpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIF9uYW1l\ncyA9ICBuYW1lcy50b0FycmF5KG5ldyBTdHJpbmdbbmFtZXMuc2l6ZSgpXSk7\nCiAgICAgICAgX3Byb3BzID0gcHJvcHMudG9BcnJheShuZXcgU3RyaW5nW3By\nb3BzLnNpemUoKV0pOwogICAgICAgIHNldChudWxsLCB0cnVlKTsKICAgICAg\nICB2YWx1ZUNoYW5nZWQoKTsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3M8T2Jq\nZWN0IFtdPiBnZXRWYWx1ZVR5cGUoKSB7CiAgICAgICAgcmV0dXJuIE9iamVj\ndFtdLmNsYXNzOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIG9iamVjdENo\nYW5nZWQoKSB7CiAgICAgICAgT2JqZWN0W10gdmFscyA9IChPYmplY3RbXSkg\nZ2V0KCk7CiAgICAgICAgaWYgKHZhbHMgPT0gbnVsbCB8fCB2YWxzLmxlbmd0\naCA9PSAwKQogICAgICAgICAgICBfbmFtZXMgPSBFTVBUWTsKICAgICAgICBl\nbHNlIHsKICAgICAgICAgICAgX25hbWVzID0gbmV3IFN0cmluZ1t2YWxzLmxl\nbmd0aF07CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdmFscy5s\nZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIF9uYW1lc1tpXSA9ICh2YWxz\nW2ldID09IG51bGwpID8gbnVsbAogICAgICAgICAgICAgICAgICAgIDogdmFs\nc1tpXS5nZXRDbGFzcygpLmdldE5hbWUoKTsKICAgICAgICB9CiAgICAgICAg\nX3Byb3BzID0gRU1QVFk7CiAgICB9CgogICAgcHJvdGVjdGVkIFN0cmluZyBn\nZXRJbnRlcm5hbFN0cmluZygpIHsKICAgICAgICAvLyBzaG91bGQgbmV2ZXIg\nZ2V0IGNhbGxlZAogICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNl\ncHRpb24oKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRJbnRlcm5h\nbFN0cmluZyhTdHJpbmcgc3RyKSB7CiAgICAgICAgLy8gc2hvdWxkIG5ldmVy\nIGdldCBjYWxsZWQKICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhj\nZXB0aW9uKCk7CiAgICB9Cn0K\n","encoding":"base64"}

