{"sha":"10d68d4f7680ef2d1094c24b8e299279e004d06e","node_id":"MDQ6QmxvYjIwNjM2NDoxMGQ2OGQ0Zjc2ODBlZjJkMTA5NGMyNGI4ZTI5OTI3OWUwMDRkMDZl","size":4636,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/10d68d4f7680ef2d1094c24b8e299279e004d06e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\nb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwoKLyoqCiAq\nIEEgcGx1Z2luIHtAbGluayBWYWx1ZX0gY29uc2lzdGluZyBvZiBwbHVnaW4g\nbmFtZSBhbmQgcHJvcGVydGllcy4KICogUGx1Z2lucyBzaG91bGQgYmUgc3Bl\nY2lmaWVkIGluIHRoZSBmb3JtOjxiciAvPgogKiA8Y29kZT4mbHQ7cGx1Z2lu\nLW5hbWUmZ3Q7KCZsdDtwcm9wMSZndDs9Jmx0O3ZhbDEmZ3Q7LCAuLi4pPC9j\nb2RlPjxiciAvPgogKiBCb3RoIHRoZSBwbHVnaW4gbmFtZSBhbmQgcHJvcCBs\naXN0IGFyZSBvcHRpb25hbCwgc28gdGhhdCB0aGUgZm9sbG93aW5nCiAqIGZv\ncm1zIGFyZSBhbHNvIHZhbGlkOjxiciAvPgogKiA8Y29kZT4mbHQ7cGx1Z2lu\nLW5hbWUmZ3Q7PC9jb2RlPjxiciAvPgogKiA8Y29kZT4mbHQ7cHJvcDEmZ3Q7\nPSZsdDt2YWwxJmd0OyAuLi48L2NvZGU+CiAqIERlZmF1bHRzIGFuZCBhbGlh\nc2VzIG9uIHBsdWdpbiB2YWx1ZXMgYXBwbHkgb25seSB0byB0aGUgcGx1Z2lu\nIG5hbWUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xh\nc3MgUGx1Z2luVmFsdWUgZXh0ZW5kcyBPYmplY3RWYWx1ZSB7CgogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIu\nZm9yUGFja2FnZQogICAgICAgIChQbHVnaW5WYWx1ZS5jbGFzcyk7CgogICAg\ncHJpdmF0ZSBmaW5hbCBib29sZWFuIF9zaW5nbGV0b247CiAgICBwcml2YXRl\nIFN0cmluZyBfbmFtZSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfcHJv\ncHMgPSBudWxsOwoKICAgIHB1YmxpYyBQbHVnaW5WYWx1ZShTdHJpbmcgcHJv\ncCwgYm9vbGVhbiBzaW5nbGV0b24pIHsKICAgICAgICBzdXBlcihwcm9wKTsK\nICAgICAgICBfc2luZ2xldG9uID0gc2luZ2xldG9uOwogICAgfQoKICAgIC8q\nKgogICAgICogV2hldGhlciB0aGlzIHZhbHVlIGlzIGEgc2luZ2xldG9uLgog\nICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc1NpbmdsZXRvbigpIHsKICAg\nICAgICByZXR1cm4gX3NpbmdsZXRvbjsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoZSBwbHVnaW4gY2xhc3MgbmFtZS4KICAgICAqLwogICAgcHVibGljIFN0\ncmluZyBnZXRDbGFzc05hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9uYW1lOwog\nICAgfQoKICAgIC8qKgogICAgICogVGhlIHBsdWdpbiBjbGFzcyBuYW1lLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRDbGFzc05hbWUoU3RyaW5nIG5h\nbWUpIHsKICAgICAgICBhc3NlcnRDaGFuZ2VhYmxlKCk7CiAgICAgICAgU3Ry\naW5nIG9sZE5hbWUgPSBfbmFtZTsKICAgICAgICBfbmFtZSA9IG5hbWU7CiAg\nICAgICAgaWYgKCFTdHJpbmdVdGlscy5lcXVhbHMob2xkTmFtZSwgbmFtZSkp\nIHsKICAgICAgICAgICAgaWYgKF9zaW5nbGV0b24pCiAgICAgICAgICAgICAg\nICBzZXQobnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgIHZhbHVlQ2hhbmdlZCgp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBwbHVnaW4g\ncHJvcGVydGllcy4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRQcm9w\nZXJ0aWVzKCkgewogICAgICAgIHJldHVybiBfcHJvcHM7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgcGx1Z2luIHByb3BlcnRpZXMuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldFByb3BlcnRpZXMoU3RyaW5nIHByb3BzKSB7CiAg\nICAgICAgU3RyaW5nIG9sZFByb3BzID0gX3Byb3BzOwogICAgICAgIF9wcm9w\ncyA9IHByb3BzOwogICAgICAgIGlmICghU3RyaW5nVXRpbHMuZXF1YWxzKG9s\nZFByb3BzLCBwcm9wcykpIHsKICAgICAgICAgICAgaWYgKF9zaW5nbGV0b24p\nCiAgICAgICAgICAgICAgICBzZXQobnVsbCwgdHJ1ZSk7CiAgICAgICAgICAg\nIHZhbHVlQ2hhbmdlZCgpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIEluc3RhbnRpYXRlIHRoZSBwbHVnaW4gYXMgYW4gaW5zdGFuY2Ugb2Yg\ndGhlIGdpdmVuIGNsYXNzLgogICAgICovCiAgICBwdWJsaWMgT2JqZWN0IGlu\nc3RhbnRpYXRlKENsYXNzPD8+IHR5cGUsIENvbmZpZ3VyYXRpb24gY29uZiwg\nYm9vbGVhbiBmYXRhbCkKICAgIHsKICAgICAgICBPYmplY3Qgb2JqID0gbmV3\nSW5zdGFuY2UoX25hbWUsIHR5cGUsIGNvbmYsIGZhdGFsKTsKICAgICAgICBD\nb25maWd1cmF0aW9ucy5jb25maWd1cmVJbnN0YW5jZShvYmosIGNvbmYsIF9w\ncm9wcywKICAgICAgICAgICAgKGZhdGFsKSA/IGdldFByb3BlcnR5KCkgOiBu\ndWxsKTsKICAgICAgICBpZiAoX3NpbmdsZXRvbikKICAgICAgICAgICAgc2V0\nKG9iaiwgdHJ1ZSk7CiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbmZpZ3VyZSB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICov\nCiAgICBwdWJsaWMgT2JqZWN0IGNvbmZpZ3VyZShPYmplY3Qgb2JqLCBDb25m\naWd1cmF0aW9uIGNvbmYsIGJvb2xlYW4gZmF0YWwpIHsKICAgICAgICBDb25m\naWd1cmF0aW9ucy5jb25maWd1cmVJbnN0YW5jZShvYmosIGNvbmYsIF9wcm9w\ncywKICAgICAgICAgICAgKGZhdGFsKSA/IGdldFByb3BlcnR5KCkgOiBudWxs\nKTsKICAgICAgICBpZiAoX3NpbmdsZXRvbikKICAgICAgICAgICAgc2V0KG9i\naiwgdHJ1ZSk7CiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0KICAgIAoKICAg\nIHB1YmxpYyB2b2lkIHNldChPYmplY3Qgb2JqLCBib29sZWFuIGRlcml2ZWQp\nIHsKICAgICAgICBpZiAoIV9zaW5nbGV0b24pCiAgICAgICAgICAgIHRocm93\nIG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoIm5vdC1zaW5n\nbGV0b24iLAogICAgICAgICAgICAgICAgZ2V0UHJvcGVydHkoKSkuZ2V0TWVz\nc2FnZSgpKTsKICAgICAgICBzdXBlci5zZXQob2JqLCBkZXJpdmVkKTsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmluZygpIHsKICAgICAgICBy\nZXR1cm4gQ29uZmlndXJhdGlvbnMuZ2V0UGx1Z2luKGFsaWFzKF9uYW1lKSwg\nX3Byb3BzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRTdHJpbmcoU3Ry\naW5nIHN0cikgewogICAgCWFzc2VydENoYW5nZWFibGUoKTsKICAgICAgICBf\nbmFtZSA9IENvbmZpZ3VyYXRpb25zLmdldENsYXNzTmFtZShzdHIpOwogICAg\nICAgIF9uYW1lID0gdW5hbGlhcyhfbmFtZSk7CiAgICAgICAgX3Byb3BzID0g\nQ29uZmlndXJhdGlvbnMuZ2V0UHJvcGVydGllcyhzdHIpOwogICAgICAgIGlm\nIChfc2luZ2xldG9uKQogICAgICAgICAgICBzZXQobnVsbCwgdHJ1ZSk7CiAg\nICAgICAgdmFsdWVDaGFuZ2VkKCk7CiAgICB9CgogICAgcHVibGljIENsYXNz\nPE9iamVjdD4gZ2V0VmFsdWVUeXBlKCkgewogICAgICAgIHJldHVybiBPYmpl\nY3QuY2xhc3M7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgb2JqZWN0Q2hh\nbmdlZCgpIHsKICAgICAgICBPYmplY3Qgb2JqID0gZ2V0KCk7CiAgICAgICAg\nX25hbWUgPSAob2JqID09IG51bGwpID8gdW5hbGlhcyhudWxsKSA6IG9iai5n\nZXRDbGFzcygpLmdldE5hbWUoKTsKICAgICAgICBfcHJvcHMgPSBudWxsOwog\nICAgfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0SW50ZXJuYWxTdHJpbmco\nKSB7CiAgICAgICAgLy8gc2hvdWxkIG5ldmVyIGdldCBjYWxsZWQKICAgICAg\nICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgc2V0SW50ZXJuYWxTdHJpbmcoU3RyaW5nIHN0\ncikgewogICAgICAgIC8vIHNob3VsZCBuZXZlciBnZXQgY2FsbGVkCiAgICAg\nICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwogICAgfQp9\nCg==\n","encoding":"base64"}

