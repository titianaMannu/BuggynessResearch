{"sha":"c8883ff11a862ad47ccd3b370c20f1c2dac34433","node_id":"MDQ6QmxvYjIwNjM2NDpjODg4M2ZmMTFhODYyYWQ0N2NjZDNiMzcwYzIwZjFjMmRhYzM0NDMz","size":5685,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c8883ff11a862ad47ccd3b370c20f1c2dac34433","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpkYmM7CgppbXBvcnQg\namF2YS5pby5QcmludFdyaXRlcjsKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0\nLkNvbnN0cnVjdG9yOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9k\nOwppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3Fs\nLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnNxbC5EYXRhU291cmNlOwoK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5DbG9zZWFibGU7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuQ29uY3JldGVD\nbGFzc0dlbmVyYXRvcjsKCi8qKgogKiBXcmFwcGVyIGFyb3VuZCBhbiBleGlz\ndGluZyBkYXRhIHNvdXJjZS4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgdGhl\nCiAqIG1ldGhvZHMgd2hvc2UgYmVoYXZpb3IgdGhleSBtZWFuIHRvIGNoYW5n\nZS4gVGhlIDxjb2RlPmVxdWFsczwvY29kZT4gYW5kCiAqIDxjb2RlPmhhc2hD\nb2RlPC9jb2RlPiBtZXRob2RzIHBhc3MgdGhyb3VnaCB0byB0aGUgYmFzZSB1\nbmRlcmx5aW5nIGRhdGEgc3RvcmUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRl\nCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgRGVsZWdhdGluZ0RhdGFTb3Vy\nY2UgaW1wbGVtZW50cyBEYXRhU291cmNlLCBDbG9zZWFibGUgewoKICAgIHN0\nYXRpYyBmaW5hbCBDb25zdHJ1Y3RvcjxEZWxlZ2F0aW5nRGF0YVNvdXJjZT4g\nY29uY3JldGVJbXBsOwoKICAgIHN0YXRpYyB7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgY29uY3JldGVJbXBsID0gQ29uY3JldGVDbGFzc0dlbmVyYXRv\nci5nZXRDb25jcmV0ZUNvbnN0cnVjdG9yKERlbGVnYXRpbmdEYXRhU291cmNl\nLmNsYXNzLCBEYXRhU291cmNlLmNsYXNzKTsKICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9u\nSW5Jbml0aWFsaXplckVycm9yKGUpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ncml2YXRlIGZpbmFsIERhdGFTb3VyY2UgX2RzOwogICAgcHJpdmF0ZSBmaW5h\nbCBEZWxlZ2F0aW5nRGF0YVNvdXJjZSBfZGVsOwoKICAgIC8qKgogICAgICog\nQ29uc3RydWN0b3IuIFN1cHBseSB3cmFwcGVkIGRhdGEgc291cmNlLgogICAg\nICovCiAgICBwdWJsaWMgRGVsZWdhdGluZ0RhdGFTb3VyY2UoRGF0YVNvdXJj\nZSBkcykgewogICAgICAgIF9kcyA9IGRzOwoKICAgICAgICBpZiAoX2RzIGlu\nc3RhbmNlb2YgRGVsZWdhdGluZ0RhdGFTb3VyY2UpCiAgICAgICAgICAgIF9k\nZWwgPSAoRGVsZWdhdGluZ0RhdGFTb3VyY2UpIF9kczsKICAgICAgICBlbHNl\nCiAgICAgICAgICAgIF9kZWwgPSBudWxsOwogICAgfQoKICAgIC8qKiAKICAg\nICAqICBDb25zdHJ1Y3RvciBmb3IgdGhlIGNvbmNyZXRlIGltcGxlbWVudGF0\naW9uIG9mIHRoaXMgYWJzdHJhY3QgY2xhc3MuCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgRGVsZWdhdGluZ0RhdGFTb3VyY2UgbmV3SW5zdGFuY2UoRGF0\nYVNvdXJjZSBkcykgewogICAgICAgIHJldHVybiBDb25jcmV0ZUNsYXNzR2Vu\nZXJhdG9yLm5ld0luc3RhbmNlKGNvbmNyZXRlSW1wbCwgZHMpOwogICAgfQoK\nICAgIC8qKiAKICAgICAqICBNYXJrZXIgdG8gZW5mb3JjZSB0aGF0IHN1YmNs\nYXNzZXMgb2YgdGhpcyBjbGFzcyBhcmUgYWJzdHJhY3QuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIGVuZm9yY2VBYnN0cmFjdCgpOwoK\nICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB3cmFwcGVkIGRhdGEgc291cmNl\nLgogICAgICovCiAgICBwdWJsaWMgRGF0YVNvdXJjZSBnZXREZWxlZ2F0ZSgp\nIHsKICAgICAgICByZXR1cm4gX2RzOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIHRoZSBpbm5lci1tb3N0IHdyYXBwZWQgZGVsZWdhdGUuCiAgICAg\nKi8KICAgIHB1YmxpYyBEYXRhU291cmNlIGdldElubmVybW9zdERlbGVnYXRl\nKCkgewogICAgICAgIHJldHVybiAoX2RlbCA9PSBudWxsKSA/IF9kcyA6IF9k\nZWwuZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKTsKICAgIH0KCiAgICBwdWJsaWMg\naW50IGhhc2hDb2RlKCkgewogICAgICAgIHJldHVybiBnZXRJbm5lcm1vc3RE\nZWxlZ2F0ZSgpLmhhc2hDb2RlKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewogICAgICAgIGlmIChvdGhlciA9\nPSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAo\nb3RoZXIgaW5zdGFuY2VvZiBEZWxlZ2F0aW5nRGF0YVNvdXJjZSkKICAgICAg\nICAgICAgb3RoZXIgPSAoKERlbGVnYXRpbmdEYXRhU291cmNlKSBvdGhlciku\nZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKTsKICAgICAgICByZXR1cm4gZ2V0SW5u\nZXJtb3N0RGVsZWdhdGUoKS5lcXVhbHMob3RoZXIpOwogICAgfQoKICAgIHB1\nYmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgU3RyaW5nQnVmZmVy\nIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoImRhdGFzb3VyY2UgIikuIGFwcGVu\nZChoYXNoQ29kZSgpKTsKICAgICAgICBhcHBlbmRJbmZvKGJ1Zik7CiAgICAg\nICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwogICAgfQoKICAgIHByb3RlY3Rl\nZCB2b2lkIGFwcGVuZEluZm8oU3RyaW5nQnVmZmVyIGJ1ZikgewogICAgICAg\nIGlmIChfZGVsICE9IG51bGwpCiAgICAgICAgICAgIF9kZWwuYXBwZW5kSW5m\nbyhidWYpOwogICAgfQoKICAgIHB1YmxpYyBQcmludFdyaXRlciBnZXRMb2dX\ncml0ZXIoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nX2RzLmdldExvZ1dyaXRlcigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndExvZ1dyaXRlcihQcmludFdyaXRlciBvdXQpIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIF9kcy5zZXRMb2dXcml0ZXIob3V0KTsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGdldExvZ2luVGltZW91dCgpIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBfZHMuZ2V0TG9naW5UaW1lb3V0KCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TG9naW5UaW1lb3V0KGludCB0\naW1lb3V0KSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBfZHMuc2V0\nTG9naW5UaW1lb3V0KHRpbWVvdXQpOwogICAgfQoKICAgIHB1YmxpYyBDb25u\nZWN0aW9uIGdldENvbm5lY3Rpb24oKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gX2RzLmdldENvbm5lY3Rpb24oKTsKICAgIH0KCiAg\nICBwdWJsaWMgQ29ubmVjdGlvbiBnZXRDb25uZWN0aW9uKFN0cmluZyB1c2Vy\nLCBTdHJpbmcgcGFzcykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBpZiAodXNlciA9PSBudWxsICYmIHBhc3MgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIF9kcy5nZXRDb25uZWN0aW9uKCk7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgcmV0dXJuIF9kcy5nZXRDb25uZWN0aW9uKHVz\nZXIsIHBhc3MpOwogICAgICAgIH0gY2F0Y2ggKFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uIGV4KSB7CiAgICAgICAgICAgIC8vIE9QRU5KUEEtMTM1\nNAogICAgICAgICAgICAvLyB1bmRlciBzb21lIGNvbmZpZ3VyYXRpb24gX2Rz\nIGlzIENvbW1vbnMgREJDUCBCYXNpYy9Qb29sYWJsZSBEYXRhU291cmNlCiAg\nICAgICAgICAgIC8vIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBnZXRDb25uZWN0\naW9uKHVzZXIsIHBhc3N3b3JkKQogICAgICAgICAgICAvLyBzZWUgaHR0cDov\nL2NvbW1vbnMuYXBhY2hlLm9yZy9kYmNwL2FwaWRvY3Mvb3JnL2FwYWNoZS9j\nb21tb25zL2RiY3AvQmFzaWNEYXRhU291cmNlLmh0bWwKICAgICAgICAgICAg\nLy8gaGVuY2UgdGhpcyB3b3JrYXJvdW5kCiAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgICBpZiAoc2V0QmVhblByb3BlcnR5KF9kcywgInNldFVz\nZXJuYW1lIiwgdXNlcikKICAgICAgICAgICAgICAgICAmJiBzZXRCZWFuUHJv\ncGVydHkoX2RzLCAic2V0UGFzc3dvcmQiLCBwYXNzKSkKICAgICAgICAgICAg\nICAgICAgICByZXR1cm4gX2RzLmdldENvbm5lY3Rpb24oKTsKICAgICAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIHRo\ncm93IGV4OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiBudWxsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9kcyBpbnN0YW5jZW9mIENsb3Nl\nYWJsZSkKICAgICAgICAgICAgKChDbG9zZWFibGUpIF9kcykuY2xvc2UoKTsK\nICAgIH0KCiAgICAvLyBqYXZhLnNxbC5XcmFwcGVyIGltcGxlbWVudGF0aW9u\nIChKREJDIDQpCiAgICBwdWJsaWMgYm9vbGVhbiBpc1dyYXBwZXJGb3IoQ2xh\nc3MgaWZhY2UpIHsKICAgICAgICByZXR1cm4gaWZhY2UuaXNBc3NpZ25hYmxl\nRnJvbShnZXREZWxlZ2F0ZSgpLmdldENsYXNzKCkpOwogICAgfQoKICAgIHB1\nYmxpYyBPYmplY3QgdW53cmFwKENsYXNzIGlmYWNlKSB7CiAgICAgICAgaWYg\nKGlzV3JhcHBlckZvcihpZmFjZSkpCiAgICAgICAgICAgIHJldHVybiBnZXRE\nZWxlZ2F0ZSgpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIG51\nbGw7CiAgICB9CiAgICAKICAgIHByaXZhdGUgYm9vbGVhbiBzZXRCZWFuUHJv\ncGVydHkoT2JqZWN0IHRhcmdldCwgU3RyaW5nIG1ldGhvZCwgT2JqZWN0IHZh\nbCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE1ldGhvZCBzZXR0ZXIg\nPSB0YXJnZXQuZ2V0Q2xhc3MoKS5nZXRNZXRob2QobWV0aG9kLCBuZXcgQ2xh\nc3NbXXt9KTsKICAgICAgICAgICAgc2V0dGVyLmludm9rZSh0YXJnZXQsIHZh\nbCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAg\nICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

