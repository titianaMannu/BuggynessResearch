{"sha":"51d6a598f87d0c76b5bdeac88597b71736facb95","node_id":"MDQ6QmxvYjIwNjM2NDo1MWQ2YTU5OGY4N2QwYzc2YjViZGVhYzg4NTk3YjcxNzM2ZmFjYjk1","size":8613,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/51d6a598f87d0c76b5bdeac88597b71736facb95","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpkYmM7CgppbXBvcnQg\namF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRv\ncjsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLlN0\ncmluZ1Rva2VuaXplcjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuSjJEb1ByaXZIZWxwZXI7CgovKgogKiBMb3RzIG9mIHRoaXMgY291\nbGQgYmUgYWJzdHJhY3RlZCBvdXQgaW50byBhIHdvcmQtd3JhcHBpbmcgY2xh\nc3MuCiAqLwoKLyoqCiAqIENvbnZlcnRzIHNpbmdsZS1saW5lIFNRTCBzdHJp\nbmdzIGludG8gbmljZWx5LWZvcm1hdHRlZAogKiBtdWx0aS1saW5lLCBpbmRl\nbnRlZCBzdGF0ZW1lbnRzLgogKiBFeGFtcGxlOiBmcm9tIFBFUlNPTiB0MCwg\nQ09NUEFOWSB0MSBXSEVSRSB0MC5JRCA9IDEwIEFORCBcCiAqIHQwLkNPTVBB\nTllfSUQgPSB0MS5JRCBBTkQgdDEuTkFNRSA9ICdPcGVuSlBBJzwvY29kZT4g\nYmVjb21lcwogKiA8Y29kZT5TRUxFQ1QgKiBGUk9NIFBFUlNPTiB0MCwgQ09N\nUEFOWSB0MQogKiBXSEVSRSB0MC5JRCA9IDEwIEFORCB0MC5DT01QQU5ZX0lE\nID0gdDEuSUQgQU5EIHQxLk5BTUUgPSAnT3BlbkpQQSdcCiAqIDwvY29kZT4g\nYW5kCiAqIDxjb2RlPklOU0VSVCBJTlRPIFBFUlNPTiBWQUxVRVMoJ1BhdHJp\nY2snLCAnTGluc2tleScsICdPcGVuSlBBJywgXAogKiAnMjAyIDU5NSAyMDY0\nIHgxMTExJyk8L2NvZGU+IGJlY29tZXMKICogPGNvZGU+SU5TRVJUIElOVE8g\nUEVSU09OIFZBTFVFUygnUGF0cmljaycsICdMaW5za2V5JywgJ09wZW5KUEEn\nLCAnMjAyCiAqIDU5NSAyMDY0IHgxMTExJyk8L2NvZGU+IGV0Yy4KICoKICog\nQGF1dGhvciBQYXRyaWNrIExpbnNrZXkKICovCnB1YmxpYyBjbGFzcyBTUUxG\nb3JtYXR0ZXIgewoKICAgIHByaXZhdGUgYm9vbGVhbiBtdWx0aUxpbmUgPSBm\nYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBkb3VibGVTcGFjZSA9IHRydWU7\nCiAgICBwcml2YXRlIFN0cmluZyBuZXdsaW5lID0gSjJEb1ByaXZIZWxwZXIu\nZ2V0TGluZVNlcGFyYXRvcigpOwogICAgcHJpdmF0ZSBpbnQgbGluZUxlbmd0\naCA9IDcyOwogICAgcHJpdmF0ZSBTdHJpbmcgd3JhcEluZGVudCA9ICIgICAg\nICAgICI7CiAgICBwcml2YXRlIFN0cmluZyBjbGF1c2VJbmRlbnQgPSAiICAg\nICI7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nW10gc2VsZWN0\nU2VwYXJhdG9ycyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAiRlJPTSAiLCAi\nV0hFUkUgIiwgIk9SREVSIEJZICIsIC8vICMjIyBpcyB0aGlzIG9yZGVyIGNv\ncnJlY3Q/CiAgICAgICAgIkdST1VQIEJZICIsICJIQVZJTkcgIiwgfTsKCiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBpbnNlcnRTZXBhcmF0\nb3JzID0gbmV3IFN0cmluZ1tdewogICAgICAgICJWQUxVRVMgIiwgfTsKCiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSB1cGRhdGVTZXBhcmF0\nb3JzID0gbmV3IFN0cmluZ1tdewogICAgICAgICJTRVQgIiwgIldIRVJFICIs\nIH07CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nW10gZGVsZXRl\nU2VwYXJhdG9ycyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAiV0hFUkUgIiwg\nfTsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBjcmVhdGVU\nYWJsZVNlcGFyYXRvcnMgPSBuZXcgU3RyaW5nW117CiAgICAgICAgIiggIiwg\nfTsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBjcmVhdGVJ\nbmRleFNlcGFyYXRvcnMgPSBuZXcgU3RyaW5nW117CiAgICAgICAgIk9OICIs\nICIoICIsIH07CgogICAgcHVibGljIHZvaWQgc2V0TmV3bGluZShTdHJpbmcg\ndmFsKSB7CiAgICAgICAgbmV3bGluZSA9IHZhbDsKICAgIH0KCiAgICBwdWJs\naWMgU3RyaW5nIGdldE5ld2xpbmUoKSB7CiAgICAgICAgcmV0dXJuIG5ld2xp\nbmU7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TGluZUxlbmd0aChpbnQg\ndmFsKSB7CiAgICAgICAgbGluZUxlbmd0aCA9IHZhbDsKICAgIH0KCiAgICBw\ndWJsaWMgaW50IGdldExpbmVMZW5ndGgoKSB7CiAgICAgICAgcmV0dXJuIGxp\nbmVMZW5ndGg7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0V3JhcEluZGVu\ndChTdHJpbmcgdmFsKSB7CiAgICAgICAgd3JhcEluZGVudCA9IHZhbDsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFdyYXBJbmRlbnQoKSB7CiAgICAg\nICAgcmV0dXJuIHdyYXBJbmRlbnQ7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0Q2xhdXNlSW5kZW50KFN0cmluZyB2YWwpIHsKICAgICAgICBjbGF1c2VJ\nbmRlbnQgPSB2YWw7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRDbGF1\nc2VJbmRlbnQoKSB7CiAgICAgICAgcmV0dXJuIGNsYXVzZUluZGVudDsKICAg\nIH0KCiAgICAvKioKICAgICAqIElmIHRydWUsIHRoZW4gdHJ5IHRvIHBhcnNl\nIG11bHRpLWxpbmUgU1FMIHN0YXRlbWVudHMuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldE11bHRpTGluZShib29sZWFuIG11bHRpTGluZSkgewogICAg\nICAgIHRoaXMubXVsdGlMaW5lID0gbXVsdGlMaW5lOwogICAgfQoKICAgIC8q\nKgogICAgICogSWYgdHJ1ZSwgdGhlbiB0cnkgdG8gcGFyc2UgbXVsdGktbGlu\nZSBTUUwgc3RhdGVtZW50cy4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4g\nZ2V0TXVsdGlMaW5lKCkgewogICAgICAgIHJldHVybiB0aGlzLm11bHRpTGlu\nZTsKICAgIH0KCiAgICAvKioKICAgICAqIElmIHRydWUsIHRoZW4gb3V0cHV0\nIHR3byBsaW5lcyBhZnRlciBtdWx0aS1saW5lIHN0YXRlbWVudHMuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHNldERvdWJsZVNwYWNlKGJvb2xlYW4gZG91\nYmxlU3BhY2UpIHsKICAgICAgICB0aGlzLmRvdWJsZVNwYWNlID0gZG91Ymxl\nU3BhY2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBJZiB0cnVlLCB0aGVuIG91\ndHB1dCB0d28gbGluZXMgYWZ0ZXIgbXVsdGktbGluZSBzdGF0ZW1lbnRzLgog\nICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXREb3VibGVTcGFjZSgpIHsK\nICAgICAgICByZXR1cm4gdGhpcy5kb3VibGVTcGFjZTsKICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0IHByZXR0eVByaW50KE9iamVjdCBzcWxPYmplY3QpIHsK\nICAgICAgICBpZiAoIW11bHRpTGluZSkgewogICAgICAgICAgICByZXR1cm4g\ncHJldHR5UHJpbnRMaW5lKHNxbE9iamVjdCk7CiAgICAgICAgfSBlbHNlIHsK\nICAgICAgICAgICAgU3RyaW5nQnVpbGRlciBzcWwgPSBuZXcgU3RyaW5nQnVp\nbGRlcihzcWxPYmplY3QudG9TdHJpbmcoKSk7CiAgICAgICAgICAgIFN0cmlu\nZ0J1aWxkZXIgYnVmID0gbmV3IFN0cmluZ0J1aWxkZXIoc3FsLmxlbmd0aCgp\nKTsKCiAgICAgICAgICAgIHdoaWxlIChzcWwubGVuZ3RoKCkgPiAwKSB7CiAg\nICAgICAgICAgICAgICBTdHJpbmcgbGluZSA9IG51bGw7CgogICAgICAgICAg\nICAgICAgaW50IGluZGV4ID0gTWF0aC5tYXgoc3FsLnRvU3RyaW5nKCkuaW5k\nZXhPZigiO1xuIiksCiAgICAgICAgICAgICAgICAgICAgc3FsLnRvU3RyaW5n\nKCkuaW5kZXhPZigiO1xyIikpOwogICAgICAgICAgICAgICAgaWYgKGluZGV4\nID09IC0xKQogICAgICAgICAgICAgICAgICAgIGxpbmUgPSBzcWwudG9TdHJp\nbmcoKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAg\nICBsaW5lID0gc3FsLnN1YnN0cmluZygwLCBpbmRleCArIDIpOwoKICAgICAg\nICAgICAgICAgIC8vIHJlbW92ZSB0aGUgY3VycmVudCBsaW5lIGZyb20gdGhl\nIHNxbCBidWZmZXIKICAgICAgICAgICAgICAgIHNxbC5kZWxldGUoMCwgbGlu\nZS5sZW5ndGgoKSk7CgogICAgICAgICAgICAgICAgYnVmLmFwcGVuZChwcmV0\ndHlQcmludExpbmUobGluZSkpOwogICAgICAgICAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCAxICsgKGdldERvdWJsZVNwYWNlKCkgPyAxIDogMCk7IGkr\nKykKICAgICAgICAgICAgICAgICAgICBidWYuYXBwZW5kKEoyRG9Qcml2SGVs\ncGVyLmdldExpbmVTZXBhcmF0b3IoKSk7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgICAgICB9CiAgICB9\nCgogICAgcHJpdmF0ZSBPYmplY3QgcHJldHR5UHJpbnRMaW5lKE9iamVjdCBz\ncWxPYmplY3QpIHsKICAgICAgICBTdHJpbmcgc3FsID0gc3FsT2JqZWN0LnRv\nU3RyaW5nKCkudHJpbSgpOwogICAgICAgIFN0cmluZyBsb3dlckNhc2VTcWwg\nPSBzcWwudG9Mb3dlckNhc2UoKTsKCiAgICAgICAgU3RyaW5nW10gc2VwYXJh\ndG9yczsKICAgICAgICBpZiAobG93ZXJDYXNlU3FsLnN0YXJ0c1dpdGgoInNl\nbGVjdCIpKQogICAgICAgICAgICBzZXBhcmF0b3JzID0gc2VsZWN0U2VwYXJh\ndG9yczsKICAgICAgICBlbHNlIGlmIChsb3dlckNhc2VTcWwuc3RhcnRzV2l0\naCgiaW5zZXJ0IikpCiAgICAgICAgICAgIHNlcGFyYXRvcnMgPSBpbnNlcnRT\nZXBhcmF0b3JzOwogICAgICAgIGVsc2UgaWYgKGxvd2VyQ2FzZVNxbC5zdGFy\ndHNXaXRoKCJ1cGRhdGUiKSkKICAgICAgICAgICAgc2VwYXJhdG9ycyA9IHVw\nZGF0ZVNlcGFyYXRvcnM7CiAgICAgICAgZWxzZSBpZiAobG93ZXJDYXNlU3Fs\nLnN0YXJ0c1dpdGgoImRlbGV0ZSIpKQogICAgICAgICAgICBzZXBhcmF0b3Jz\nID0gZGVsZXRlU2VwYXJhdG9yczsKICAgICAgICBlbHNlIGlmIChsb3dlckNh\nc2VTcWwuc3RhcnRzV2l0aCgiY3JlYXRlIHRhYmxlIikpCiAgICAgICAgICAg\nIHNlcGFyYXRvcnMgPSBjcmVhdGVUYWJsZVNlcGFyYXRvcnM7CiAgICAgICAg\nZWxzZSBpZiAobG93ZXJDYXNlU3FsLnN0YXJ0c1dpdGgoImNyZWF0ZSBpbmRl\neCIpKQogICAgICAgICAgICBzZXBhcmF0b3JzID0gY3JlYXRlSW5kZXhTZXBh\ncmF0b3JzOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc2VwYXJhdG9ycyA9\nIG5ldyBTdHJpbmdbMF07CgogICAgICAgIGludCBzdGFydCA9IDA7CiAgICAg\nICAgaW50IGVuZCA9IC0xOwogICAgICAgIFN0cmluZ0J1aWxkZXIgY2xhdXNl\nOwogICAgICAgIExpc3Q8U3RyaW5nQnVpbGRlcj4gY2xhdXNlcyA9IG5ldyBB\ncnJheUxpc3Q8U3RyaW5nQnVpbGRlcj4oKTsKICAgICAgICBjbGF1c2VzLmFk\nZChuZXcgU3RyaW5nQnVpbGRlcigpKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IHNlcGFyYXRvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\nZW5kID0gbG93ZXJDYXNlU3FsLmluZGV4T2YoIiAiICsgc2VwYXJhdG9yc1tp\nXS50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgICAgICAgc3RhcnQpOwogICAg\nICAgICAgICBpZiAoZW5kID09IC0xKQogICAgICAgICAgICAgICAgYnJlYWs7\nCgogICAgICAgICAgICBjbGF1c2UgPSBjbGF1c2VzLmdldChjbGF1c2VzLnNp\nemUoKSAtIDEpOwogICAgICAgICAgICBjbGF1c2UuYXBwZW5kKHNxbC5zdWJz\ndHJpbmcoc3RhcnQsIGVuZCkpOwoKICAgICAgICAgICAgY2xhdXNlID0gbmV3\nIFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICAgICAgY2xhdXNlcy5hZGQoY2xh\ndXNlKTsKICAgICAgICAgICAgY2xhdXNlLmFwcGVuZChjbGF1c2VJbmRlbnQp\nOwogICAgICAgICAgICBjbGF1c2UuYXBwZW5kKHNlcGFyYXRvcnNbaV0pOwoK\nICAgICAgICAgICAgc3RhcnQgPSBlbmQgKyAxICsgc2VwYXJhdG9yc1tpXS5s\nZW5ndGgoKTsKICAgICAgICB9CgogICAgICAgIGNsYXVzZSA9IGNsYXVzZXMu\nZ2V0KGNsYXVzZXMuc2l6ZSgpIC0gMSk7CiAgICAgICAgY2xhdXNlLmFwcGVu\nZChzcWwuc3Vic3RyaW5nKHN0YXJ0KSk7CgogICAgICAgIFN0cmluZ0J1aWxk\nZXIgcHAgPSBuZXcgU3RyaW5nQnVpbGRlcihzcWwubGVuZ3RoKCkpOwogICAg\nICAgIGZvciAoSXRlcmF0b3I8U3RyaW5nQnVpbGRlcj4gaXRlciA9IGNsYXVz\nZXMuaXRlcmF0b3IoKTsgaXRlci5oYXNOZXh0KCk7KXsKICAgICAgICAgICAg\ncHAuYXBwZW5kKHdyYXBMaW5lKGl0ZXIubmV4dCgpLnRvU3RyaW5nKCkpKTsK\nICAgICAgICAgICAgaWYgKGl0ZXIuaGFzTmV4dCgpKQogICAgICAgICAgICAg\nICAgcHAuYXBwZW5kKG5ld2xpbmUpOwogICAgICAgIH0KCiAgICAgICAgcmV0\ndXJuIHBwLnRvU3RyaW5nKCk7CiAgICB9CgogICAgcHJpdmF0ZSBTdHJpbmcg\nd3JhcExpbmUoU3RyaW5nIGxpbmUpIHsKICAgICAgICBTdHJpbmdCdWlsZGVy\nIGxpbmVzID0gbmV3IFN0cmluZ0J1aWxkZXIobGluZS5sZW5ndGgoKSk7Cgog\nICAgICAgIC8vIGVuc3VyZSB0aGF0IGFueSBsZWFkaW5nIHdoaXRlc3BhY2Ug\naXMgcHJlc2VydmVkLgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGlu\nZS5sZW5ndGgoKSAmJgogICAgICAgICAgICAobGluZS5jaGFyQXQoaSkgPT0g\nJyAnIHx8IGxpbmUuY2hhckF0KGkpID09ICdcdCcpOyBpKyspIHsKICAgICAg\nICAgICAgbGluZXMuYXBwZW5kKGxpbmUuY2hhckF0KGkpKTsKICAgICAgICB9\nCgogICAgICAgIFN0cmluZ1Rva2VuaXplciB0b2sgPSBuZXcgU3RyaW5nVG9r\nZW5pemVyKGxpbmUpOwogICAgICAgIGludCBsZW5ndGggPSAwOwogICAgICAg\nIFN0cmluZyBlbGVtOwogICAgICAgIHdoaWxlICh0b2suaGFzTW9yZVRva2Vu\ncygpKSB7CiAgICAgICAgICAgIGVsZW0gPSB0b2submV4dFRva2VuKCk7CiAg\nICAgICAgICAgIGxlbmd0aCArPSBlbGVtLmxlbmd0aCgpOwoKICAgICAgICAg\nICAgLy8gaWYgd2Ugd291bGQgaGF2ZSBleGNlZWRlZCB0aGUgbWF4LCB3cml0\nZSBvdXQgYSBuZXdsaW5lCiAgICAgICAgICAgIC8vIGJlZm9yZSB3cml0aW5n\nIHRoZSBlbGVtLgogICAgICAgICAgICBpZiAobGVuZ3RoID49IGxpbmVMZW5n\ndGgpIHsKICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChuZXdsaW5lKTsK\nICAgICAgICAgICAgICAgIGxpbmVzLmFwcGVuZCh3cmFwSW5kZW50KTsKICAg\nICAgICAgICAgICAgIGxpbmVzLmFwcGVuZChlbGVtKTsKICAgICAgICAgICAg\nICAgIGxpbmVzLmFwcGVuZCgnICcpOwogICAgICAgICAgICAgICAgbGVuZ3Ro\nID0gd3JhcEluZGVudC5sZW5ndGgoKSArIGVsZW0ubGVuZ3RoKCkgKyAxOwog\nICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIC8vIGlmIHRoZSBjdXJyZW50IGxlbmd0aCBpcyBncmVhdGVyIHRo\nYW4gdGhlIG1heCwgdGhlbiB0aGUKICAgICAgICAgICAgLy8gbGFzdCB3b3Jk\nIGFsb25lIHdhcyB0b28gbG9uZywgc28ganVzdCB3cml0ZSBvdXQgYQogICAg\nICAgICAgICAvLyBuZXdsaW5lIGFuZCBtb3ZlIG9uLgogICAgICAgICAgICBp\nZiAoZWxlbS5sZW5ndGgoKSA+PSBsaW5lTGVuZ3RoKSB7CiAgICAgICAgICAg\nICAgICBsaW5lcy5hcHBlbmQoZWxlbSk7CiAgICAgICAgICAgICAgICBpZiAo\ndG9rLmhhc01vcmVUb2tlbnMoKSkKICAgICAgICAgICAgICAgICAgICBsaW5l\ncy5hcHBlbmQobmV3bGluZSk7CiAgICAgICAgICAgICAgICBsaW5lcy5hcHBl\nbmQod3JhcEluZGVudCk7CiAgICAgICAgICAgICAgICBsZW5ndGggPSB3cmFw\nSW5kZW50Lmxlbmd0aCgpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAg\nICAgICAgICAgIH0KCiAgICAgICAgICAgIGxpbmVzLmFwcGVuZChlbGVtKTsK\nICAgICAgICAgICAgbGluZXMuYXBwZW5kKCcgJyk7CiAgICAgICAgICAgIGxl\nbmd0aCsrOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGxpbmVzLnRvU3Ry\naW5nKCk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3Ry\naW5nIFtdIGFyZ3MpIHsKICAgICAgICBTUUxGb3JtYXR0ZXIgZm9ybWF0dGVy\nID0gbmV3IFNRTEZvcm1hdHRlcigpOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBTeXN0ZW0u\nb3V0LnByaW50bG4oZm9ybWF0dGVyLnByZXR0eVByaW50KGFyZ3NbaV0pKTsK\nICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

