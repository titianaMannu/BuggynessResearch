{"sha":"f9a1405370d0c6531a6907c0b504979a7f53e017","node_id":"MDQ6QmxvYjIwNjM2NDpmOWExNDA1MzcwZDBjNjUzMWE2OTA3YzBiNTA0OTc5YTdmNTNlMDE3","size":11538,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f9a1405370d0c6531a6907c0b504979a7f53e017","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZh\nLmxhbmcucmVmbGVjdC5JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uOwppbXBv\ncnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGls\nLlNldDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5DYWNoZTsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2VVbml0VXRpbDsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLnNwaS5Mb2FkU3RhdGU7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkF1dG9EZXRhY2g7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQnJva2VyRmFjdG9yeTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRGVsZWdhdGluZ0Jy\nb2tlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkRlbGVnYXRpbmdGZXRjaENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5WYWx1ZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5DbG9zZWFibGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNyaXRlcmlh\nLkNyaXRlcmlhQnVpbGRlckltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuY3JpdGVyaWEuT3BlbkpQQUNyaXRlcmlhQnVpbGRl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5tZXRh\nLk1ldGFtb2RlbEltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UucXVlcnkuT3BlbkpQQVF1ZXJ5QnVpbGRlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeS5RdWVyeUJ1aWxk\nZXJJbXBsOwoKLyoqCiAqIEltcGxlbWVudGF0aW9uIG9mIHtAbGluayBFbnRp\ndHlNYW5hZ2VyRmFjdG9yeX0gdGhhdCBhY3RzIGFzIGEKICogZmFjYWRlIHRv\nIGEge0BsaW5rIEJyb2tlckZhY3Rvcnl9LgogKgogKiBAYXV0aG9yIE1hcmMg\nUHJ1ZCdob21tZWF1eAogKiBAbm9qYXZhZG9jCiAqLwpAU3VwcHJlc3NXYXJu\naW5ncygic2VyaWFsIikKcHVibGljIGNsYXNzIEVudGl0eU1hbmFnZXJGYWN0\nb3J5SW1wbAogICAgaW1wbGVtZW50cyBPcGVuSlBBRW50aXR5TWFuYWdlckZh\nY3RvcnksIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSwKICAgIENs\nb3NlYWJsZSwgUGVyc2lzdGVuY2VVbml0VXRpbCB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZQogICAgICAgIChFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwuY2xhc3Mp\nOwoKICAgIHByaXZhdGUgRGVsZWdhdGluZ0Jyb2tlckZhY3RvcnkgX2ZhY3Rv\ncnkgPSBudWxsOwogICAgcHJpdmF0ZSB0cmFuc2llbnQgQ29uc3RydWN0b3I8\nRmV0Y2hQbGFuPiBfcGxhbiA9IG51bGw7CiAgICBwcml2YXRlIHRyYW5zaWVu\ndCBTdG9yZUNhY2hlIF9jYWNoZSA9IG51bGw7CiAgICBwcml2YXRlIHRyYW5z\naWVudCBRdWVyeVJlc3VsdENhY2hlIF9xdWVyeUNhY2hlID0gbnVsbDsKICAg\nIHByaXZhdGUgdHJhbnNpZW50IE1ldGFtb2RlbEltcGwgX21ldGFNb2RlbDsK\nICAgIAogICAgLyoqCiAgICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIHByb3Zp\nZGVkIGZvciBhdXRvLWluc3RhbnRpYXRpb24uCiAgICAgKi8KICAgIHB1Ymxp\nYyBFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwoKSB7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBTdXBwbHkgZGVsZWdhdGUgb24gY29uc3RydWN0aW9uLgogICAg\nICovCiAgICBwdWJsaWMgRW50aXR5TWFuYWdlckZhY3RvcnlJbXBsKEJyb2tl\nckZhY3RvcnkgZmFjdG9yeSkgewogICAgICAgIHNldEJyb2tlckZhY3Rvcnko\nZmFjdG9yeSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWxlZ2F0ZS4KICAg\nICAqLwogICAgcHVibGljIEJyb2tlckZhY3RvcnkgZ2V0QnJva2VyRmFjdG9y\neSgpIHsKICAgICAgICByZXR1cm4gX2ZhY3RvcnkuZ2V0RGVsZWdhdGUoKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIERlbGVnYXRlIG11c3QgYmUgcHJvdmlk\nZWQgYmVmb3JlIHVzZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0QnJv\na2VyRmFjdG9yeShCcm9rZXJGYWN0b3J5IGZhY3RvcnkpIHsKICAgICAgICBf\nZmFjdG9yeSA9IG5ldyBEZWxlZ2F0aW5nQnJva2VyRmFjdG9yeShmYWN0b3J5\nLAogICAgICAgICAgICBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMuVFJBTlNMQVRP\nUik7CiAgICB9CgogICAgcHVibGljIE9wZW5KUEFDb25maWd1cmF0aW9uIGdl\ndENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9mYWN0b3J5Lmdl\ndENvbmZpZ3VyYXRpb24oKTsKICAgIH0KICAgIAogICAgcHVibGljIE1hcDxT\ndHJpbmcsT2JqZWN0PiBnZXRQcm9wZXJ0aWVzKCkgewogICAgICAgIE1hcDxT\ndHJpbmcsT2JqZWN0PiBwcm9wcyA9IF9mYWN0b3J5LmdldFByb3BlcnRpZXMo\nKTsKICAgICAgICAvLyBjb252ZXJ0IHRvIHVzZXIgcmVhZGFibGUgdmFsdWVz\nCiAgICAgICAgcHJvcHMucHV0QWxsKGNyZWF0ZUVudGl0eU1hbmFnZXIoKS5n\nZXRQcm9wZXJ0aWVzKCkpOwogICAgICAgIHJldHVybiBwcm9wczsKICAgIH0K\nCiAgICBwdWJsaWMgT2JqZWN0IHB1dFVzZXJPYmplY3QoT2JqZWN0IGtleSwg\nT2JqZWN0IHZhbCkgewogICAgICAgIHJldHVybiBfZmFjdG9yeS5wdXRVc2Vy\nT2JqZWN0KGtleSwgdmFsKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdl\ndFVzZXJPYmplY3QoT2JqZWN0IGtleSkgewogICAgICAgIHJldHVybiBfZmFj\ndG9yeS5nZXRVc2VyT2JqZWN0KGtleSk7CiAgICB9CgogICAgcHVibGljIFN0\nb3JlQ2FjaGUgZ2V0U3RvcmVDYWNoZSgpIHsKICAgICAgICBfZmFjdG9yeS5s\nb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKF9jYWNoZSA9\nPSBudWxsKSB7CiAgICAgICAgICAgICAgICBPcGVuSlBBQ29uZmlndXJhdGlv\nbiBjb25mID0gX2ZhY3RvcnkuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAg\nICAgICAgICAgX2NhY2hlID0gbmV3IFN0b3JlQ2FjaGVJbXBsKHRoaXMsCiAg\nICAgICAgICAgICAgICAgICAgY29uZi5nZXREYXRhQ2FjaGVNYW5hZ2VySW5z\ndGFuY2UoKS5nZXRTeXN0ZW1EYXRhQ2FjaGUoKSk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgcmV0dXJuIF9jYWNoZTsKICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICBfZmFjdG9yeS51bmxvY2soKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIFN0b3JlQ2FjaGUgZ2V0U3RvcmVDYWNoZShTdHJp\nbmcgY2FjaGVOYW1lKSB7CiAgICAgICAgcmV0dXJuIG5ldyBTdG9yZUNhY2hl\nSW1wbCh0aGlzLCBfZmFjdG9yeS5nZXRDb25maWd1cmF0aW9uKCkuCiAgICAg\nICAgICAgIGdldERhdGFDYWNoZU1hbmFnZXJJbnN0YW5jZSgpLmdldERhdGFD\nYWNoZShjYWNoZU5hbWUsIHRydWUpKTsKICAgIH0KCiAgICBwdWJsaWMgUXVl\ncnlSZXN1bHRDYWNoZSBnZXRRdWVyeVJlc3VsdENhY2hlKCkgewogICAgICAg\nIF9mYWN0b3J5LmxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBp\nZiAoX3F1ZXJ5Q2FjaGUgPT0gbnVsbCkKICAgICAgICAgICAgICAgIF9xdWVy\neUNhY2hlID0gbmV3IFF1ZXJ5UmVzdWx0Q2FjaGVJbXBsKF9mYWN0b3J5Lgog\nICAgICAgICAgICAgICAgICAgIGdldENvbmZpZ3VyYXRpb24oKS5nZXREYXRh\nQ2FjaGVNYW5hZ2VySW5zdGFuY2UoKS4KICAgICAgICAgICAgICAgICAgICBn\nZXRTeXN0ZW1RdWVyeUNhY2hlKCkpOwogICAgICAgICAgICByZXR1cm4gX3F1\nZXJ5Q2FjaGU7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2Zh\nY3RvcnkudW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBP\ncGVuSlBBRW50aXR5TWFuYWdlclNQSSBjcmVhdGVFbnRpdHlNYW5hZ2VyKCkg\newogICAgICAgIHJldHVybiBjcmVhdGVFbnRpdHlNYW5hZ2VyKG51bGwpOwog\nICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlcyBhbmQgY29uZmlndXJlcyBh\nIGVudGl0eSBtYW5hZ2VyIHdpdGggdGhlIGdpdmVuIHByb3BlcnRpZXMuCiAg\nICAgKiAgCiAgICAgKiBUaGUgcHJvcGVydHkga2V5cyBpbiB0aGUgZ2l2ZW4g\nbWFwIGNhbiBiZSBlaXRoZXIgcXVhbGlmaWVkIG9yIG5vdC4KICAgICAqIAog\nICAgICogQHJldHVybiBsaXN0IG9mIGV4Y2VwdGlvbnMgcmFpc2VkIG9yIGVt\ncHR5IGxpc3QuCiAgICAgKi8KICAgIHB1YmxpYyBPcGVuSlBBRW50aXR5TWFu\nYWdlclNQSSBjcmVhdGVFbnRpdHlNYW5hZ2VyKE1hcCBwcm9wcykgewogICAg\nICAgIGlmIChwcm9wcyA9PSBudWxsKQogICAgICAgICAgICBwcm9wcyA9IENv\nbGxlY3Rpb25zLkVNUFRZX01BUDsKICAgICAgICBlbHNlIGlmICghcHJvcHMu\naXNFbXB0eSgpKQogICAgICAgICAgICBwcm9wcyA9IG5ldyBIYXNoTWFwKHBy\nb3BzKTsKCiAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IGdl\ndENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBTdHJpbmcgdXNlciA9IChTdHJp\nbmcpIENvbmZpZ3VyYXRpb25zLnJlbW92ZVByb3BlcnR5KCJDb25uZWN0aW9u\nVXNlck5hbWUiLCBwcm9wcyk7CiAgICAgICAgaWYgKHVzZXIgPT0gbnVsbCkK\nICAgICAgICAgICAgdXNlciA9IGNvbmYuZ2V0Q29ubmVjdGlvblVzZXJOYW1l\nKCk7CiAgICAgICAgU3RyaW5nIHBhc3MgPSAoU3RyaW5nKSBDb25maWd1cmF0\naW9ucy5yZW1vdmVQcm9wZXJ0eSgiQ29ubmVjdGlvblBhc3N3b3JkIiwgcHJv\ncHMpOwogICAgICAgIGlmIChwYXNzID09IG51bGwpCiAgICAgICAgICAgIHBh\nc3MgPSBjb25mLmdldENvbm5lY3Rpb25QYXNzd29yZCgpOwoKICAgICAgICBT\ndHJpbmcgc3RyID0gKFN0cmluZykgQ29uZmlndXJhdGlvbnMucmVtb3ZlUHJv\ncGVydHkoIlRyYW5zYWN0aW9uTW9kZSIsIHByb3BzKTsKICAgICAgICBib29s\nZWFuIG1hbmFnZWQ7CiAgICAgICAgaWYgKHN0ciA9PSBudWxsKQogICAgICAg\nICAgICBtYW5hZ2VkID0gY29uZi5pc1RyYW5zYWN0aW9uTW9kZU1hbmFnZWQo\nKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgVmFsdWUgdmFsID0gY29u\nZi5nZXRWYWx1ZSgiVHJhbnNhY3Rpb25Nb2RlIik7CiAgICAgICAgICAgIG1h\nbmFnZWQgPSBCb29sZWFuLnBhcnNlQm9vbGVhbih2YWwudW5hbGlhcyhzdHIp\nKTsKICAgICAgICB9CgogICAgICAgIE9iamVjdCBvYmogPSBDb25maWd1cmF0\naW9ucy5yZW1vdmVQcm9wZXJ0eSgiQ29ubmVjdGlvblJldGFpbk1vZGUiLCBw\ncm9wcyk7CiAgICAgICAgaW50IHJldGFpbk1vZGU7CiAgICAgICAgaWYgKG9i\naiBpbnN0YW5jZW9mIE51bWJlcikgewogICAgICAgICAgICByZXRhaW5Nb2Rl\nID0gKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKTsKICAgICAgICB9IGVsc2Ug\naWYgKG9iaiA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldGFpbk1vZGUgPSBj\nb25mLmdldENvbm5lY3Rpb25SZXRhaW5Nb2RlQ29uc3RhbnQoKTsKICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICBWYWx1ZSB2YWwgPSBjb25mLmdldFZh\nbHVlKCJDb25uZWN0aW9uUmV0YWluTW9kZSIpOwogICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgcmV0YWluTW9kZSA9IEludGVnZXIucGFyc2VJ\nbnQodmFsLnVuYWxpYXMoKFN0cmluZykgb2JqKSk7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgQXJndW1lbnRFeGNlcHRpb24oX2xvYy5nZXQoImJhZC1lbS1wcm9wIiwg\nIm9wZW5qcGEuQ29ubmVjdGlvblJldGFpbk1vZGUiLCBvYmopLAogICAgICAg\nICAgICAgICAgICAgIG5ldyBUaHJvd2FibGVbXXsgZSB9LCBvYmosIHRydWUp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBCcm9rZXIgYnJv\na2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKHVzZXIsIHBhc3MsIG1hbmFnZWQs\nIHJldGFpbk1vZGUsIGZhbHNlKTsKICAgICAgICAgICAgCiAgICAgICAgLy8g\nYWRkIGF1dG9kZXRhY2ggZm9yIGNsb3NlIGFuZCByb2xsYmFjayBjb25kaXRp\nb25zIHRvIHRoZSBjb25maWd1cmF0aW9uCiAgICAgICAgYnJva2VyLnNldEF1\ndG9EZXRhY2goQXV0b0RldGFjaC5ERVRBQ0hfQ0xPU0UsIHRydWUpOwogICAg\nICAgIGJyb2tlci5zZXRBdXRvRGV0YWNoKEF1dG9EZXRhY2guREVUQUNIX1JP\nTExCQUNLLCB0cnVlKTsKICAgICAgICBicm9rZXIuc2V0RGV0YWNoZWROZXco\nZmFsc2UpOwogICAgICAgIAogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nU1BJIGVtID0gbmV3RW50aXR5TWFuYWdlckltcGwoYnJva2VyKTsKCiAgICAg\nICAgLy8gYWxsb3cgc2V0dGluZyBvZiBvdGhlciBiZWFuIHByb3BlcnRpZXMg\nb2YgRU0KICAgICAgICBmb3IgKE9iamVjdCBrZXkgOiBwcm9wcy5rZXlTZXQo\nKSkgewogICAgICAgICAgICBlbS5zZXRQcm9wZXJ0eShrZXkudG9TdHJpbmco\nKSwgcHJvcHMuZ2V0KGtleSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\nZW07CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IGVu\ndGl0eSBtYW5hZ2VyIGFyb3VuZCB0aGUgZ2l2ZW4gYnJva2VyLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgRW50aXR5TWFuYWdlckltcGwgbmV3RW50aXR5TWFu\nYWdlckltcGwoQnJva2VyIGJyb2tlcikgewogICAgICAgIHJldHVybiBuZXcg\nRW50aXR5TWFuYWdlckltcGwodGhpcywgYnJva2VyKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBhZGRMaWZlY3ljbGVMaXN0ZW5lcihPYmplY3QgbGlzdGVu\nZXIsIENsYXNzLi4uIGNsYXNzZXMpIHsKICAgICAgICBfZmFjdG9yeS5hZGRM\naWZlY3ljbGVMaXN0ZW5lcihsaXN0ZW5lciwgY2xhc3Nlcyk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgcmVtb3ZlTGlmZWN5Y2xlTGlzdGVuZXIoT2JqZWN0\nIGxpc3RlbmVyKSB7CiAgICAgICAgX2ZhY3RvcnkucmVtb3ZlTGlmZWN5Y2xl\nTGlzdGVuZXIobGlzdGVuZXIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFk\nZFRyYW5zYWN0aW9uTGlzdGVuZXIoT2JqZWN0IGxpc3RlbmVyKSB7CiAgICAg\nICAgX2ZhY3RvcnkuYWRkVHJhbnNhY3Rpb25MaXN0ZW5lcihsaXN0ZW5lcik7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgcmVtb3ZlVHJhbnNhY3Rpb25MaXN0\nZW5lcihPYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICBfZmFjdG9yeS5yZW1v\ndmVUcmFuc2FjdGlvbkxpc3RlbmVyKGxpc3RlbmVyKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBjbG9zZSgpIHsKICAgICAgICBfZmFjdG9yeS5jbG9zZSgp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzT3BlbigpIHsKICAgICAg\nICByZXR1cm4gIV9mYWN0b3J5LmlzQ2xvc2VkKCk7CiAgICB9CgogICAgcHVi\nbGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1cm4gKF9mYWN0b3J5\nID09IG51bGwpID8gMCA6IF9mYWN0b3J5Lmhhc2hDb2RlKCk7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewogICAg\nICAgIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICBpZiAoKG90aGVyID09IG51bGwpIHx8IChvdGhlci5nZXRD\nbGFzcygpICE9IHRoaXMuZ2V0Q2xhc3MoKSkpCiAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKICAgICAgICBpZiAoX2ZhY3RvcnkgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiBfZmFjdG9yeS5l\ncXVhbHMoKChFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwpIG90aGVyKS5fZmFj\ndG9yeSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBzdG9yZS1z\ncGVjaWZpYyBmYWNhZGUgZm9yIHRoZSBnaXZlbiBmZXRjaCBjb25maWd1cmF0\naW9uLgoJICogSWYgbm8gZmFjYWRlIGNsYXNzIGV4aXN0cywgd2UgdXNlIHRo\nZSBkZWZhdWx0IHtAbGluayBGZXRjaFBsYW59LgogICAgICovCiAgICBGZXRj\naFBsYW4gdG9GZXRjaFBsYW4oQnJva2VyIGJyb2tlciwgRmV0Y2hDb25maWd1\ncmF0aW9uIGZldGNoKSB7CiAgICAgICAgaWYgKGZldGNoID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBpZiAoZmV0Y2ggaW5z\ndGFuY2VvZiBEZWxlZ2F0aW5nRmV0Y2hDb25maWd1cmF0aW9uKQogICAgICAg\nICAgICBmZXRjaCA9ICgoRGVsZWdhdGluZ0ZldGNoQ29uZmlndXJhdGlvbikg\nZmV0Y2gpLgogICAgICAgICAgICAgICAgZ2V0SW5uZXJtb3N0RGVsZWdhdGUo\nKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKF9wbGFuID09IG51\nbGwpIHsKICAgICAgICAgICAgICAgIENsYXNzIHN0b3JlVHlwZSA9IChicm9r\nZXIgPT0gbnVsbCkgPyBudWxsIDogYnJva2VyLgogICAgICAgICAgICAgICAg\nICAgIGdldFN0b3JlTWFuYWdlcigpLmdldElubmVybW9zdERlbGVnYXRlKCku\nZ2V0Q2xhc3MoKTsKICAgICAgICAgICAgICAgIENsYXNzIGNscyA9IF9mYWN0\nb3J5LmdldENvbmZpZ3VyYXRpb24oKS4KICAgICAgICAgICAgICAgICAgICBn\nZXRTdG9yZUZhY2FkZVR5cGVSZWdpc3RyeSgpLgogICAgICAgICAgICAgICAg\nICAgIGdldEltcGxlbWVudGF0aW9uKEZldGNoUGxhbi5jbGFzcywgc3RvcmVU\neXBlLCAKICAgICAgICAgICAgICAgICAgICAJCUZldGNoUGxhbkltcGwuY2xh\nc3MpOwogICAgICAgICAgICAgICAgX3BsYW4gPSBjbHMuZ2V0Q29uc3RydWN0\nb3IoRmV0Y2hDb25maWd1cmF0aW9uLmNsYXNzKTsKICAgICAgICAgICAgfQog\nICAgICAgICAgICByZXR1cm4gX3BsYW4ubmV3SW5zdGFuY2UoZmV0Y2gpOwog\nICAgICAgIH0gY2F0Y2ggKEludm9jYXRpb25UYXJnZXRFeGNlcHRpb24gaXRl\nKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50\nb1BlcnNpc3RlbmNlRXhjZXB0aW9uCiAgICAgICAgICAgICAgICAoaXRlLmdl\ndFRhcmdldEV4Y2VwdGlvbigpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlv\nbnMudG9QZXJzaXN0ZW5jZUV4Y2VwdGlvbihlKTsKICAgICAgICB9Cgl9Cgog\nICAgcHVibGljIENhY2hlIGdldENhY2hlKCkgewogICAgICAgIHJldHVybiBn\nZXRTdG9yZUNhY2hlKCk7CiAgICB9CgogICAgcHVibGljIE9wZW5KUEFDcml0\nZXJpYUJ1aWxkZXIgZ2V0Q3JpdGVyaWFCdWlsZGVyKCkgewogICAgICAgIHJl\ndHVybiBuZXcgQ3JpdGVyaWFCdWlsZGVySW1wbCgpLnNldE1ldGFNb2RlbChn\nZXRNZXRhbW9kZWwoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBPcGVuSlBB\nUXVlcnlCdWlsZGVyIGdldER5bmFtaWNRdWVyeUJ1aWxkZXIoKSB7CiAgICAg\nICAgcmV0dXJuIG5ldyBRdWVyeUJ1aWxkZXJJbXBsKHRoaXMpOwogICAgfQoK\nICAgIHB1YmxpYyBTZXQ8U3RyaW5nPiBnZXRTdXBwb3J0ZWRQcm9wZXJ0aWVz\nKCkgewogICAgICAgIHJldHVybiBfZmFjdG9yeS5nZXRTdXBwb3J0ZWRQcm9w\nZXJ0aWVzKCk7CiAgICB9CgogICAgcHVibGljIE1ldGFtb2RlbEltcGwgZ2V0\nTWV0YW1vZGVsKCkgewogICAgICAgIGlmIChfbWV0YU1vZGVsID09IG51bGwp\nIHsKICAgICAgICAgICAgX21ldGFNb2RlbCA9IG5ldyBNZXRhbW9kZWxJbXBs\nKGdldENvbmZpZ3VyYXRpb24oKQogICAgICAgICAgICAgICAgLmdldE1ldGFE\nYXRhUmVwb3NpdG9yeUluc3RhbmNlKCkpOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gX21ldGFNb2RlbDsKICAgIH0KCiAgICBwdWJsaWMgUGVyc2lzdGVu\nY2VVbml0VXRpbCBnZXRQZXJzaXN0ZW5jZVVuaXRVdGlsKCkgewogICAgICAg\nIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBp\nZGVudGlmaWVyIGZvciB0aGUgc3BlY2lmaWVkIGVudGl0eS4gIElmIG5vdCBt\nYW5hZ2VkIGJ5IGFueQogICAgICogb2YgdGhlIGVtJ3MgaW4gdGhpcyBQVSBv\nciBub3QgcGVyc2lzdGVuY2UgY2FwYWJsZSwgcmV0dXJuIG51bGwuCiAgICAg\nKi8KICAgIHB1YmxpYyBPYmplY3QgZ2V0SWRlbnRpZmllcihPYmplY3QgZW50\naXR5KSB7CiAgICAgICAgcmV0dXJuIE9wZW5KUEFQZXJzaXN0ZW5jZVV0aWwu\nZ2V0SWRlbnRpZmllcih0aGlzLCBlbnRpdHkpOwogICAgfQoKICAgIHB1Ymxp\nYyBib29sZWFuIGlzTG9hZGVkKE9iamVjdCBlbnRpdHkpIHsKICAgICAgICBy\nZXR1cm4gaXNMb2FkZWQoZW50aXR5LCBudWxsKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBpc0xvYWRlZChPYmplY3QgZW50aXR5LCBTdHJpbmcgYXR0\ncmlidXRlKSB7CiAgICAgICAgaWYgKGVudGl0eSA9PSBudWxsKSB7CiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIChPcGVuSlBBUGVyc2lzdGVuY2VVdGlsLmlzTWFuYWdlZEJ5KHRoaXMsIGVu\ndGl0eSkgJiYKICAgICAgICAgICAgICAgIChPcGVuSlBBUGVyc2lzdGVuY2VV\ndGlsLmlzTG9hZGVkKGVudGl0eSwgYXR0cmlidXRlKSA9PSBMb2FkU3RhdGUu\nTE9BREVEKSk7CiAgICB9Cn0K\n","encoding":"base64"}

