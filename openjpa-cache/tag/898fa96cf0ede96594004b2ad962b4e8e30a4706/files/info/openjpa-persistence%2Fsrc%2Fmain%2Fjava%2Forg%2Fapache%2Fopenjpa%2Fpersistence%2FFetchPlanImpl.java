{"sha":"3c8712d1bb9593f668aba7c38e43f0495fff114d","node_id":"MDQ6QmxvYjIwNjM2NDozYzg3MTJkMWJiOTU5M2Y2NjhhYmE3YzM4ZTQzZjA0OTVmZmYxMTRk","size":14003,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3c8712d1bb9593f668aba7c38e43f0495fff114d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJh\neXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEu\ndXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLkxvY2tNb2RlVHlwZTsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLlBlc3NpbWlzdGljTG9ja1Njb3BlOwoKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRGF0YUNhY2hlUmV0cmlldmVN\nb2RlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5EYXRhQ2Fj\naGVTdG9yZU1vZGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkRlbGVnYXRpbmdGZXRjaENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnlGbHVzaE1vZGVzOwoK\nLyoqCiAqIEltcGxlbWVudHMgRmV0Y2hQbGFuIHZpYSBkZWxlZ2F0aW9uIHRv\nIEZldGNoQ29uZmlndXJhdGlvbi4KICoKICogQGF1dGhvciBBYmUgV2hpdGUK\nICogQGF1dGhvciBQaW5ha2kgUG9kZGFyCiAqIEBzaW5jZSAwLjQuMQogKiBA\nbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgRmV0Y2hQbGFuSW1wbAoJaW1w\nbGVtZW50cyBGZXRjaFBsYW4gewoKICAgIHByaXZhdGUgZmluYWwgRGVsZWdh\ndGluZ0ZldGNoQ29uZmlndXJhdGlvbiBfZmV0Y2g7CiAgICAKICAgIC8qKgog\nICAgICogU3RydWN0dXJlIGhvbGRzIHJhbmtpbmcgb2YgZXF1aXZhbGVudCBo\naW50IGtleXMuIEVhY2ggZW50cnkgdmFsdWUgaXMgYSBsaXN0IG9mIG90aGVy\nIGtleXMgdGhhdCBhcmUgaGlnaGVyIHJhbmsKICAgICAqIHRoYW4gdGhlIGVu\ndHJ5IGtleS4gICAKICAgICAqLwogICAgcHJvdGVjdGVkIHN0YXRpYyBNYXA8\nU3RyaW5nLCBMaXN0PFN0cmluZz4+IF9wcmVjZWRlbmNlID0gbmV3IEhhc2hN\nYXA8U3RyaW5nLCBMaXN0PFN0cmluZz4+KCk7CiAgICAKICAgIC8qKgogICAg\nICogU3RydWN0dXJlIGhvbGRzIG9uZSBvciBtb3JlIGNvbnZlcnRlcnMgZm9y\nIGEgdXNlci1zcGVjaWZpZWQgaGludCB2YWx1ZS4gCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBzdGF0aWMgTWFwPFN0cmluZyxIaW50VmFsdWVDb252ZXJ0ZXJb\nXT4gX2hpbnRzID0gbmV3IEhhc2hNYXA8U3RyaW5nLEhpbnRWYWx1ZUNvbnZl\ncnRlcltdPigpOwogICAgCiAgICAvKioKICAgICAqIFN0YXRpY2FsbHkgcmVn\naXN0ZXJzIHN1cHBvcnRlZCBoaW50IGtleXMgd2l0aCB0aGVpciByYW5raW5n\nIGFuZCBjb252ZXJ0ZXJzLiAKICAgICAqLwogICAgc3RhdGljIHsKICAgICAg\nICByZWdpc3RlckhpbnQobmV3IFN0cmluZ1tdeyJvcGVuanBhLkZldGNoUGxh\nbi5FeHRlbmRlZFBhdGhMb29rdXAifSwgCiAgICAgICAgICAgICAgICBuZXcg\nSGludFZhbHVlQ29udmVydGVyLlN0cmluZ1RvQm9vbGVhbigpKTsKICAgICAg\nICByZWdpc3RlckhpbnQobmV3IFN0cmluZ1tdeyJvcGVuanBhLkZldGNoQmF0\nY2hTaXplIiwgIm9wZW5qcGEuRmV0Y2hQbGFuLkZldGNoQmF0Y2hTaXplIn0s\nIAogICAgICAgICAgICAgICAgbmV3IEhpbnRWYWx1ZUNvbnZlcnRlci5TdHJp\nbmdUb0ludGVnZXIoKSk7CiAgICAgICAgcmVnaXN0ZXJIaW50KG5ldyBTdHJp\nbmdbXXsib3BlbmpwYS5NYXhGZXRjaERlcHRoIiwgIm9wZW5qcGEuRmV0Y2hQ\nbGFuLk1heEZldGNoRGVwdGgifSwgCiAgICAgICAgICAgICAgICBuZXcgSGlu\ndFZhbHVlQ29udmVydGVyLlN0cmluZ1RvSW50ZWdlcigpKTsKICAgICAgICBy\nZWdpc3RlckhpbnQobmV3IFN0cmluZ1tdeyJvcGVuanBhLkxvY2tUaW1lb3V0\nIiwgIm9wZW5qcGEuRmV0Y2hQbGFuLkxvY2tUaW1lb3V0IiwgCiAgICAgICAg\nICAgICAgICAiamF2YXgucGVyc2lzdGVuY2UubG9jay50aW1lb3V0In0sIG5l\ndyBIaW50VmFsdWVDb252ZXJ0ZXIuU3RyaW5nVG9JbnRlZ2VyKCkpOwogICAg\nICAgIHJlZ2lzdGVySGludChuZXcgU3RyaW5nW117Im9wZW5qcGEuUXVlcnlU\naW1lb3V0IiwgIm9wZW5qcGEuRmV0Y2hQbGFuLlF1ZXJ5VGltZW91dCIsIAog\nICAgICAgICAgICAgICAgImphdmF4LnBlcnNpc3RlbmNlLnF1ZXJ5LnRpbWVv\ndXQifSwgbmV3IEhpbnRWYWx1ZUNvbnZlcnRlci5TdHJpbmdUb0ludGVnZXIo\nKSk7CiAgICAgICAgcmVnaXN0ZXJIaW50KG5ldyBTdHJpbmdbXXsib3Blbmpw\nYS5GbHVzaEJlZm9yZVF1ZXJpZXMiLCAib3BlbmpwYS5GZXRjaFBsYW4uRmx1\nc2hCZWZvcmVRdWVyaWVzIn0sIAogICAgICAgICAgICAgICAgbmV3IEhpbnRW\nYWx1ZUNvbnZlcnRlci5TdHJpbmdUb0ludGVnZXIoCiAgICAgICAgICAgICAg\nICAgICBuZXcgU3RyaW5nW10geyIwIiwgIjEiLCAiMiJ9LAogICAgICAgICAg\nICAgICAgICAgbmV3IGludFtde1F1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9UUlVF\nLCBRdWVyeUZsdXNoTW9kZXMuRkxVU0hfRkFMU0UsIAogICAgICAgICAgICAg\nICAgICAgICAgICAgICBRdWVyeUZsdXNoTW9kZXMuRkxVU0hfV0lUSF9DT05O\nRUNUSU9OfSkpOwogICAgICAgIHJlZ2lzdGVySGludChuZXcgU3RyaW5nW117\nIm9wZW5qcGEuUmVhZExvY2tNb2RlIiwgIm9wZW5qcGEuRmV0Y2hQbGFuLlJl\nYWRMb2NrTW9kZSJ9LAogICAgICAgICAgICAgICAgbmV3IE1peGVkTG9ja0xl\ndmVsc0hlbHBlcigpKTsKICAgICAgICByZWdpc3RlckhpbnQobmV3IFN0cmlu\nZ1tdeyJvcGVuanBhLlJlYWRMb2NrTGV2ZWwiLCAib3BlbmpwYS5GZXRjaFBs\nYW4uUmVhZExvY2tMZXZlbCJ9LAogICAgICAgICAgICAgICAgbmV3IE1peGVk\nTG9ja0xldmVsc0hlbHBlcigpKTsKICAgICAgICByZWdpc3RlckhpbnQobmV3\nIFN0cmluZ1tdeyJvcGVuanBhLldyaXRlTG9ja01vZGUiLCAib3BlbmpwYS5G\nZXRjaFBsYW4uV3JpdGVMb2NrTW9kZSJ9LCAKICAgICAgICAgICAgICAgIG5l\ndyBNaXhlZExvY2tMZXZlbHNIZWxwZXIoKSk7CiAgICAgICAgcmVnaXN0ZXJI\naW50KG5ldyBTdHJpbmdbXXsib3BlbmpwYS5Xcml0ZUxvY2tMZXZlbCIsICJv\ncGVuanBhLkZldGNoUGxhbi5Xcml0ZUxvY2tMZXZlbCJ9LCAKICAgICAgICAg\nICAgICAgIG5ldyBNaXhlZExvY2tMZXZlbHNIZWxwZXIoKSk7CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogUmVnaXN0ZXJzIGEgaGludCBrZXkgd2l0aCBp\ndHMgdmFsdWUgY29udmVydGVycy4gCiAgICAgKiAKICAgICAqIEBwYXJhbSBr\nZXlzIGEgc2V0IG9mIGtleXMgaW4gaW5jcmVhc2luZyBvcmRlciBvZiByYW5r\naW5nLiBDYW4gbm90IGJlIG51bGwgb3IgZW1wdHkuCiAgICAgKiAKICAgICAq\nIEBwYXJhbSBjb252ZXJ0ZXJzIGFycmF5IG9mIGNvbnZlcnRlcnMgdGhhdCBh\ncmUgYXR0ZW1wdHMgaW4gb3JkZXIgdG8gY29udmVydCBhIHVzZXItc3BlY2lm\naWVkIGhpbnQgdmFsdWUKICAgICAqIHRvIGEgdmFsdWUgdGhhdCBpcyBjb25z\ndW1hYmxlIGJ5IHRoZSBrZXJuZWwuCiAgICAgKi8KICAgIHByb3RlY3RlZCBz\ndGF0aWMgdm9pZCByZWdpc3RlckhpbnQoU3RyaW5nW10ga2V5cywgSGludFZh\nbHVlQ29udmVydGVyLi4uIGNvbnZlcnRlcnMpIHsKICAgICAgICBmb3IgKFN0\ncmluZyBrZXkgOiBrZXlzKSB7CiAgICAgICAgICAgIF9oaW50cy5wdXQoa2V5\nLCBjb252ZXJ0ZXJzKTsKICAgICAgICB9CiAgICAgICAgaWYgKGtleXMubGVu\nZ3RoID4gMSkgewogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGtl\neXMubGVuZ3RoLTE7IGkrKykgewogICAgICAgICAgICAgICAgTGlzdDxTdHJp\nbmc+IGxpc3QgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oa2V5cy5sZW5ndGgt\naS0xKTsKICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpKzE7IGogPCBr\nZXlzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgbGlzdC5h\nZGQoa2V5c1tqXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICBfcHJlY2VkZW5jZS5wdXQoa2V5c1tpXSwgbGlzdCk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQ29uc3Ry\ndWN0b3I7IHN1cHBseSBkZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIEZl\ndGNoUGxhbkltcGwoRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAg\nICAgX2ZldGNoID0gbmV3RGVsZWdhdGluZ0ZldGNoQ29uZmlndXJhdGlvbihm\nZXRjaCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBuZXcgZXhj\nZXB0aW9uLXRyYW5zbGF0aW5nIGRlbGVnYXRpbmcgZmV0Y2ggY29uZmlndXJh\ndGlvbi4KICAgICAqLwogICAgcHJvdGVjdGVkIERlbGVnYXRpbmdGZXRjaENv\nbmZpZ3VyYXRpb24gbmV3RGVsZWdhdGluZ0ZldGNoQ29uZmlndXJhdGlvbihG\nZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gpIHsKICAgICAgICByZXR1cm4gbmV3\nIERlbGVnYXRpbmdGZXRjaENvbmZpZ3VyYXRpb24oZmV0Y2gsIFBlcnNpc3Rl\nbmNlRXhjZXB0aW9ucy5UUkFOU0xBVE9SKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIERlbGVnYXRlLgogICAgICovCiAgICBwdWJsaWMgRmV0Y2hDb25maWd1\ncmF0aW9uIGdldERlbGVnYXRlKCkgewogICAgICAgIHJldHVybiBfZmV0Y2gu\nZ2V0RGVsZWdhdGUoKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldE1heEZl\ndGNoRGVwdGgoKSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaC5nZXRNYXhGZXRj\naERlcHRoKCk7CiAgICB9CgogICAgcHVibGljIEZldGNoUGxhbiBzZXRNYXhG\nZXRjaERlcHRoKGludCBkZXB0aCkgewogICAgICAgIF9mZXRjaC5zZXRNYXhG\nZXRjaERlcHRoKGRlcHRoKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0K\nCiAgICBwdWJsaWMgaW50IGdldEZldGNoQmF0Y2hTaXplKCkgewogICAgICAg\nIHJldHVybiBfZmV0Y2guZ2V0RmV0Y2hCYXRjaFNpemUoKTsKICAgIH0KCiAg\nICBwdWJsaWMgRmV0Y2hQbGFuIHNldEZldGNoQmF0Y2hTaXplKGludCBmZXRj\naEJhdGNoU2l6ZSkgewogICAgICAgIF9mZXRjaC5zZXRGZXRjaEJhdGNoU2l6\nZShmZXRjaEJhdGNoU2l6ZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9\nCgogICAgcHVibGljIGJvb2xlYW4gZ2V0UXVlcnlSZXN1bHRDYWNoZUVuYWJs\nZWQoKSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaC5nZXRRdWVyeUNhY2hlRW5h\nYmxlZCgpOwogICAgfQoKICAgIHB1YmxpYyBGZXRjaFBsYW4gc2V0UXVlcnlS\nZXN1bHRDYWNoZUVuYWJsZWQoYm9vbGVhbiBjYWNoZSkgewogICAgICAgIF9m\nZXRjaC5zZXRRdWVyeUNhY2hlRW5hYmxlZChjYWNoZSk7CiAgICAgICAgcmV0\ndXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0UXVlcnlS\nZXN1bHRDYWNoZSgpIHsKICAgICAgICByZXR1cm4gZ2V0UXVlcnlSZXN1bHRD\nYWNoZUVuYWJsZWQoKTsKICAgIH0KCiAgICBwdWJsaWMgRmV0Y2hQbGFuIHNl\ndFF1ZXJ5UmVzdWx0Q2FjaGUoYm9vbGVhbiBjYWNoZSkgewogICAgICAgIHJl\ndHVybiBzZXRRdWVyeVJlc3VsdENhY2hlRW5hYmxlZChjYWNoZSk7CiAgICB9\nCgogICAgcHVibGljIENvbGxlY3Rpb248U3RyaW5nPiBnZXRGZXRjaEdyb3Vw\ncygpIHsKICAgICAgICByZXR1cm4gX2ZldGNoLmdldEZldGNoR3JvdXBzKCk7\nCiAgICB9CgogICAgcHVibGljIEZldGNoUGxhbiBhZGRGZXRjaEdyb3VwKFN0\ncmluZyBncm91cCkgewogICAgICAgIF9mZXRjaC5hZGRGZXRjaEdyb3VwKGdy\nb3VwKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBwdWJsaWMg\nRmV0Y2hQbGFuIGFkZEZldGNoR3JvdXBzKFN0cmluZy4uLiBncm91cHMpIHsK\nICAgICAgICByZXR1cm4gYWRkRmV0Y2hHcm91cHMoQXJyYXlzLmFzTGlzdChn\ncm91cHMpKTsKICAgIH0KCiAgICBwdWJsaWMgRmV0Y2hQbGFuIGFkZEZldGNo\nR3JvdXBzKENvbGxlY3Rpb24gZ3JvdXBzKSB7CiAgICAgICAgX2ZldGNoLmFk\nZEZldGNoR3JvdXBzKGdyb3Vwcyk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAg\nICB9CgogICAgcHVibGljIEZldGNoUGxhbiByZW1vdmVGZXRjaEdyb3VwKFN0\ncmluZyBncm91cCkgewogICAgICAgIF9mZXRjaC5yZW1vdmVGZXRjaEdyb3Vw\nKGdyb3VwKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBwdWJs\naWMgRmV0Y2hQbGFuIHJlbW92ZUZldGNoR3JvdXBzKFN0cmluZy4uLiBncm91\ncHMpIHsKICAgICAgICByZXR1cm4gcmVtb3ZlRmV0Y2hHcm91cHMoQXJyYXlz\nLmFzTGlzdChncm91cHMpKTsKICAgIH0KCiAgICBwdWJsaWMgRmV0Y2hQbGFu\nIHJlbW92ZUZldGNoR3JvdXBzKENvbGxlY3Rpb24gZ3JvdXBzKSB7CiAgICAg\nICAgX2ZldGNoLnJlbW92ZUZldGNoR3JvdXBzKGdyb3Vwcyk7CiAgICAgICAg\ncmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIEZldGNoUGxhbiBjbGVh\nckZldGNoR3JvdXBzKCkgewogICAgICAgIF9mZXRjaC5jbGVhckZldGNoR3Jv\ndXBzKCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGlj\nIEZldGNoUGxhbiByZXNldEZldGNoR3JvdXBzKCkgewogICAgICAgIF9mZXRj\naC5yZXNldEZldGNoR3JvdXBzKCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAg\nICB9CgogICAgcHVibGljIENvbGxlY3Rpb248U3RyaW5nPiBnZXRGaWVsZHMo\nKSB7CiAgICAgICAgcmV0dXJuIChDb2xsZWN0aW9uPFN0cmluZz4pIF9mZXRj\naC5nZXRGaWVsZHMoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNG\naWVsZChTdHJpbmcgZmllbGQpIHsKICAgICAgICByZXR1cm4gX2ZldGNoLmhh\nc0ZpZWxkKGZpZWxkKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNG\naWVsZChDbGFzcyBjbHMsIFN0cmluZyBmaWVsZCkgewogICAgICAgIHJldHVy\nbiBoYXNGaWVsZCh0b0ZpZWxkTmFtZShjbHMsIGZpZWxkKSk7CiAgICB9Cgog\nICAgcHVibGljIEZldGNoUGxhbiBhZGRGaWVsZChTdHJpbmcgZmllbGQpIHsK\nICAgICAgICBfZmV0Y2guYWRkRmllbGQoZmllbGQpOwogICAgICAgIHJldHVy\nbiB0aGlzOwogICAgfQoKICAgIHB1YmxpYyBGZXRjaFBsYW4gYWRkRmllbGQo\nQ2xhc3MgY2xzLCBTdHJpbmcgZmllbGQpIHsKICAgICAgICByZXR1cm4gYWRk\nRmllbGQodG9GaWVsZE5hbWUoY2xzLCBmaWVsZCkpOwogICAgfQoKICAgIHB1\nYmxpYyBGZXRjaFBsYW4gYWRkRmllbGRzKFN0cmluZy4uLiBmaWVsZHMpIHsK\nICAgICAgICByZXR1cm4gYWRkRmllbGRzKEFycmF5cy5hc0xpc3QoZmllbGRz\nKSk7CiAgICB9CgogICAgcHVibGljIEZldGNoUGxhbiBhZGRGaWVsZHMoQ2xh\nc3MgY2xzLCBTdHJpbmcuLi4gZmllbGRzKSB7CiAgICAgICAgcmV0dXJuIGFk\nZEZpZWxkcyhjbHMsIEFycmF5cy5hc0xpc3QoZmllbGRzKSk7CiAgICB9Cgog\nICAgcHVibGljIEZldGNoUGxhbiBhZGRGaWVsZHMoQ29sbGVjdGlvbiBmaWVs\nZHMpIHsKICAgICAgICBfZmV0Y2guYWRkRmllbGRzKGZpZWxkcyk7CiAgICAg\nICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIEZldGNoUGxhbiBh\nZGRGaWVsZHMoQ2xhc3MgY2xzLCBDb2xsZWN0aW9uIGZpZWxkcykgewogICAg\nICAgIHJldHVybiBhZGRGaWVsZHModG9GaWVsZE5hbWVzKGNscywgZmllbGRz\nKSk7CiAgICB9CgogICAgcHVibGljIEZldGNoUGxhbiByZW1vdmVGaWVsZChT\ndHJpbmcgZmllbGQpIHsKICAgICAgICBfZmV0Y2gucmVtb3ZlRmllbGQoZmll\nbGQpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHB1YmxpYyBG\nZXRjaFBsYW4gcmVtb3ZlRmllbGQoQ2xhc3MgY2xzLCBTdHJpbmcgZmllbGQp\nIHsKICAgICAgICByZXR1cm4gcmVtb3ZlRmllbGQodG9GaWVsZE5hbWUoY2xz\nLCBmaWVsZCkpOwogICAgfQoKICAgIHB1YmxpYyBGZXRjaFBsYW4gcmVtb3Zl\nRmllbGRzKFN0cmluZy4uLiBmaWVsZHMpIHsKICAgICAgICByZXR1cm4gcmVt\nb3ZlRmllbGRzKEFycmF5cy5hc0xpc3QoZmllbGRzKSk7CiAgICB9CgogICAg\ncHVibGljIEZldGNoUGxhbiByZW1vdmVGaWVsZHMoQ2xhc3MgY2xzLCBTdHJp\nbmcuLi4gZmllbGRzKSB7CiAgICAgICAgcmV0dXJuIHJlbW92ZUZpZWxkcyhj\nbHMsIEFycmF5cy5hc0xpc3QoZmllbGRzKSk7CiAgICB9CgogICAgcHVibGlj\nIEZldGNoUGxhbiByZW1vdmVGaWVsZHMoQ29sbGVjdGlvbiBmaWVsZHMpIHsK\nICAgICAgICBfZmV0Y2gucmVtb3ZlRmllbGRzKGZpZWxkcyk7CiAgICAgICAg\ncmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIEZldGNoUGxhbiByZW1v\ndmVGaWVsZHMoQ2xhc3MgY2xzLCBDb2xsZWN0aW9uIGZpZWxkcykgewogICAg\nICAgIHJldHVybiByZW1vdmVGaWVsZHModG9GaWVsZE5hbWVzKGNscywgZmll\nbGRzKSk7CiAgICB9CgogICAgcHVibGljIEZldGNoUGxhbiBjbGVhckZpZWxk\ncygpIHsKICAgICAgICBfZmV0Y2guY2xlYXJGaWVsZHMoKTsKICAgICAgICBy\nZXR1cm4gdGhpczsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcg\ndG9GaWVsZE5hbWUoQ2xhc3MgY2xzLCBTdHJpbmcgZmllbGQpIHsKICAgICAg\nICByZXR1cm4gY2xzLmdldE5hbWUoKSArICIuIiArIGZpZWxkOwogICAgfQoK\nICAgIHByaXZhdGUgc3RhdGljIENvbGxlY3Rpb24gdG9GaWVsZE5hbWVzKENs\nYXNzIGNscywgQ29sbGVjdGlvbiBmaWVsZHMpIHsKICAgICAgICBpZiAoZmll\nbGRzLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJuIGZpZWxkczsKICAg\nICAgICBDb2xsZWN0aW9uIG5hbWVzID0gbmV3IEFycmF5TGlzdChmaWVsZHMp\nOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gZmllbGRzLml0ZXJhdG9y\nKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICBuYW1lcy5hZGQodG9G\naWVsZE5hbWUoY2xzLCAoU3RyaW5nKSBpdHIubmV4dCgpKSk7CiAgICAgICAg\ncmV0dXJuIG5hbWVzOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0TG9ja1Rp\nbWVvdXQoKSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaC5nZXRMb2NrVGltZW91\ndCgpOwogICAgfQoKICAgIHB1YmxpYyBGZXRjaFBsYW4gc2V0TG9ja1RpbWVv\ndXQoaW50IHRpbWVvdXQpIHsKICAgICAgICBfZmV0Y2guc2V0TG9ja1RpbWVv\ndXQodGltZW91dCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAg\ncHVibGljIFBlc3NpbWlzdGljTG9ja1Njb3BlIGdldExvY2tTY29wZSgpIHsK\nICAgICAgICByZXR1cm4gTG9ja1Njb3Blc0hlbHBlci5mcm9tTG9ja1Njb3Bl\nKF9mZXRjaC5nZXRMb2NrU2NvcGUoKSk7CiAgICB9CgogICAgcHVibGljIEZl\ndGNoUGxhbiBzZXRMb2NrU2NvcGUoUGVzc2ltaXN0aWNMb2NrU2NvcGUgc2Nv\ncGUpIHsKICAgICAgICBfZmV0Y2guc2V0TG9ja1Njb3BlKExvY2tTY29wZXNI\nZWxwZXIudG9Mb2NrU2NvcGUoc2NvcGUpKTsKICAgICAgICByZXR1cm4gdGhp\nczsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFF1ZXJ5VGltZW91dCgpIHsK\nICAgICAgICByZXR1cm4gX2ZldGNoLmdldFF1ZXJ5VGltZW91dCgpOwogICAg\nfQoKICAgIHB1YmxpYyBGZXRjaFBsYW4gc2V0UXVlcnlUaW1lb3V0KGludCB0\naW1lb3V0KSB7CiAgICAgICAgX2ZldGNoLnNldFF1ZXJ5VGltZW91dCh0aW1l\nb3V0KTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBwdWJsaWMg\nTG9ja01vZGVUeXBlIGdldFJlYWRMb2NrTW9kZSgpIHsKICAgICAgICByZXR1\ncm4gTWl4ZWRMb2NrTGV2ZWxzSGVscGVyLmZyb21Mb2NrTGV2ZWwoX2ZldGNo\nLmdldFJlYWRMb2NrTGV2ZWwoKSk7CiAgICB9CgogICAgcHVibGljIEZldGNo\nUGxhbiBzZXRSZWFkTG9ja01vZGUoTG9ja01vZGVUeXBlIG1vZGUpIHsKICAg\nICAgICBfZmV0Y2guc2V0UmVhZExvY2tMZXZlbChNaXhlZExvY2tMZXZlbHNI\nZWxwZXIudG9Mb2NrTGV2ZWwobW9kZSkpOwogICAgICAgIHJldHVybiB0aGlz\nOwogICAgfQoKICAgIHB1YmxpYyBMb2NrTW9kZVR5cGUgZ2V0V3JpdGVMb2Nr\nTW9kZSgpIHsKICAgICAgICByZXR1cm4gTWl4ZWRMb2NrTGV2ZWxzSGVscGVy\nLmZyb21Mb2NrTGV2ZWwoX2ZldGNoLmdldFdyaXRlTG9ja0xldmVsKCkpOwog\nICAgfQoKICAgIHB1YmxpYyBGZXRjaFBsYW4gc2V0V3JpdGVMb2NrTW9kZShM\nb2NrTW9kZVR5cGUgbW9kZSkgewogICAgICAgIF9mZXRjaC5zZXRXcml0ZUxv\nY2tMZXZlbChNaXhlZExvY2tMZXZlbHNIZWxwZXIudG9Mb2NrTGV2ZWwobW9k\nZSkpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgCiAgICBwdWJs\naWMgYm9vbGVhbiBnZXRFeHRlbmRlZFBhdGhMb29rdXAoKSB7CiAgICAgICAg\ncmV0dXJuIF9mZXRjaC5nZXRFeHRlbmRlZFBhdGhMb29rdXAoKTsKICAgIH0K\nICAgIAogICAgcHVibGljIEZldGNoUGxhbiBzZXRFeHRlbmRlZFBhdGhMb29r\ndXAoYm9vbGVhbiBmbGFnKSB7CiAgICAgICAgX2ZldGNoLnNldEV4dGVuZGVk\nUGF0aExvb2t1cChmbGFnKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0K\nCiAgICBwdWJsaWMgT2JqZWN0IGdldEhpbnQoU3RyaW5nIGtleSkgewogICAg\nICAgIHJldHVybiBfZmV0Y2guZ2V0SGludChrZXkpOwogICAgfQogICAgCiAg\nICAvKioKICAgICAqIFNldHMgdGhlIGhpbnQgYWZ0ZXIgY29udmVydGluZyB0\naGUgdmFsdWUgYXBwcm9wcmlhdGVseS4KICAgICAqIElmIGEgaGlnaGVyIHJh\nbmtpbmcgZXF1aXZhbGVudCBoaW50IGlzIGFscmVhZHkgc2V0LCB0aGVuIGJ5\ncGFzc2VzIHRoaXMgaGludC4gCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndEhpbnQoU3RyaW5nIGtleSwgT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgaWYg\nKCFpc1JlY29nbml6ZWRIaW50KGtleSkpCiAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICBpZiAoX3ByZWNlZGVuY2UuY29udGFpbnNLZXkoa2V5KSkgewog\nICAgICAgICAgICBMaXN0PFN0cmluZz4gaGlnaGVyS2V5cyA9IF9wcmVjZWRl\nbmNlLmdldChrZXkpOwogICAgICAgICAgICBmb3IgKFN0cmluZyBoaWdoZXJL\nZXkgOiBoaWdoZXJLZXlzKSB7CiAgICAgICAgICAgICAgICBpZiAoX2ZldGNo\nLmlzSGludFNldChoaWdoZXJLZXkpKQogICAgICAgICAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBPYmplY3Qg\nbmV3VmFsdWUgPSBjb252ZXJ0SGludFZhbHVlKGtleSwgdmFsdWUpOyAKICAg\nICAgICBfZmV0Y2guc2V0SGludChrZXksIG5ld1ZhbHVlLCB2YWx1ZSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0SGludHMoTWFwPFN0cmluZywgT2Jq\nZWN0PiBoaW50cykgewogICAgICAgIGlmIChoaW50cyA9PSBudWxsIHx8IGhp\nbnRzLmlzRW1wdHkoKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAg\nfQogICAgICAgIGZvciAoTWFwLkVudHJ5PFN0cmluZyxPYmplY3Q+IGhpbnQg\nOiBoaW50cy5lbnRyeVNldCgpKSB7CiAgICAgICAgICAgIHNldEhpbnQoaGlu\ndC5nZXRLZXkoKSwgaGludC5nZXRWYWx1ZSgpKTsKICAgICAgICB9CiAgICB9\nCiAgICAKICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBPYmplY3Q+IGdldEhpbnRz\nKCkgewogICAgICAgIHJldHVybiBfZmV0Y2guZ2V0SGludHMoKTsKICAgIH0K\nICAgIAogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1\ncm4gX2ZldGNoLmhhc2hDb2RlKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewogICAgICAgIGlmIChvdGhlciA9\nPSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAo\nIShvdGhlciBpbnN0YW5jZW9mIEZldGNoUGxhbkltcGwpKQogICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIF9mZXRjaC5lcXVhbHMo\nKChGZXRjaFBsYW5JbXBsKSBvdGhlcikuX2ZldGNoKTsKICAgIH0KCiAgICBw\ndWJsaWMgRGF0YUNhY2hlUmV0cmlldmVNb2RlIGdldENhY2hlUmV0cmlldmVN\nb2RlKCkgewogICAgICAgIHJldHVybiBfZmV0Y2guZ2V0Q2FjaGVSZXRyaWV2\nZU1vZGUoKTsKICAgIH0KCiAgICBwdWJsaWMgRGF0YUNhY2hlU3RvcmVNb2Rl\nIGdldENhY2hlU3RvcmVNb2RlKCkgewogICAgICAgIHJldHVybiBfZmV0Y2gu\nZ2V0Q2FjaGVTdG9yZU1vZGUoKTsKICAgIH0KCiAgICBwdWJsaWMgRmV0Y2hQ\nbGFuIHNldENhY2hlU3RvcmVNb2RlKERhdGFDYWNoZVN0b3JlTW9kZSBtb2Rl\nKSB7CiAgICAgICAgX2ZldGNoLnNldENhY2hlU3RvcmVNb2RlKG1vZGUpOwog\nICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHB1YmxpYyBGZXRjaFBs\nYW4gc2V0Q2FjaGVSZXRyaWV2ZU1vZGUoRGF0YUNhY2hlUmV0cmlldmVNb2Rl\nIG1vZGUpIHsKICAgICAgICBfZmV0Y2guc2V0Q2FjaGVSZXRyaWV2ZU1vZGUo\nbW9kZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgT2JqZWN0\nIGNvbnZlcnRIaW50VmFsdWUoU3RyaW5nIGtleSwgT2JqZWN0IHZhbHVlKSB7\nCiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBudWxsOwogICAgICAgIEhpbnRWYWx1ZUNvbnZlcnRlcltdIGNvbnZlcnRl\ncnMgPSBfaGludHMuZ2V0KGtleSk7CiAgICAgICAgaWYgKGNvbnZlcnRlcnMg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgIGZv\nciAoSGludFZhbHVlQ29udmVydGVyIGNvbnZlcnRlciA6IGNvbnZlcnRlcnMp\nIHsKICAgICAgICAgICAgaWYgKGNvbnZlcnRlci5jYW5Db252ZXJ0KHZhbHVl\nLmdldENsYXNzKCkpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29udmVy\ndGVyLmNvbnZlcnQodmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIAogICAgYm9vbGVhbiBp\nc1JlY29nbml6ZWRIaW50KFN0cmluZyBrZXkpIHsKICAgICAgICBpZiAoa2V5\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBp\nZiAoX2hpbnRzLmNvbnRhaW5zS2V5KGtleSkpCiAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgIHJldHVybiBrZXkuc3RhcnRzV2l0aCgib3Blbmpw\nYS4iKTsKICAgIH0KICAgIAogICAgYm9vbGVhbiBpbnRlcnNlY3RzKENvbGxl\nY3Rpb248U3RyaW5nPiBrZXlzLCBDb2xsZWN0aW9uPFN0cmluZz4gYikgewog\nICAgICAgIGlmIChrZXlzID09IG51bGwgfHwga2V5cy5pc0VtcHR5KCkgfHwg\nYiA9PSBudWxsIHx8IGIuaXNFbXB0eSgpKQogICAgICAgICAgICByZXR1cm4g\nZmFsc2U7CiAgICAgICAgZm9yIChTdHJpbmcga2V5IDoga2V5cykgewogICAg\nICAgICAgICBpZiAoYi5jb250YWlucyhrZXkpKQogICAgICAgICAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsK\nICAgIH0KfQo=\n","encoding":"base64"}

