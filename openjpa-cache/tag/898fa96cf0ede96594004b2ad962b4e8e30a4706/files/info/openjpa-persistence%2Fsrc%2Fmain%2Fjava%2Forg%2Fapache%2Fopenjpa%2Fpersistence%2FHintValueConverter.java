{"sha":"847dd81cc2a0c165a0181dea5952ed3dccdb183d","node_id":"MDQ6QmxvYjIwNjM2NDo4NDdkZDgxY2MyYTBjMTY1YTAxODFkZWE1OTUyZWQzZGNjZGIxODNk","size":6391,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/847dd81cc2a0c165a0181dea5952ed3dccdb183d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5czsKCgovKioKICogQ29udmVydHMgYSBnaXZl\nbiB1c2VyLXNwZWNpZmllZCB2YWx1ZSB0byBhIHRhcmdldCB0eXBlIGNvbnN1\nbWFibGUgYnkgdGhlIGtlcm5lbC4KICogVXNlZCBieSBoaW50IHByb2Nlc3Np\nbmcuCiAqIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICogQHNpbmNlIDIu\nMC4wCiAqIEB1bnB1Ymxpc2hlZAogKi8KcHVibGljIGludGVyZmFjZSBIaW50\nVmFsdWVDb252ZXJ0ZXIgewogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRoZSB1\nc2VyLXNwZWNpZmllZCB2YWx1ZSB0byBhIGtlcm5lbCBjb25zdW1hYmxlIHZh\nbHVlLgogICAgICogIAogICAgICogQHBhcmFtIG9yaWdpbmFsIHRoZSB1c2Vy\nLXNwZWNpZmllZCB2YWx1ZQogICAgICogQHJldHVybiBhbiBlcXVpdmFsZW50\nIHZhbHVlIGNvbnN1bWFibGUgYnkgYSBrZXJuZWwgY29uc3RydWN0LgogICAg\nICogCiAgICAgKiBAZXhjZXB0aW9uIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbiBpZiB0aGUgZ2l2ZW4gdmFsdWUgY2FuIG5vdCBiZSBjb252ZXJ0ZWQuCiAg\nICAgKi8KICAgIE9iamVjdCBjb252ZXJ0KE9iamVjdCBvcmlnaW5hbCk7CiAg\nICAKICAgIC8qKgogICAgICogQWZmaXJtIGlmIHRoaXMgcmVjZWl2ZXIgY2Fu\nIGNvbnZlcnQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiB0eXBlLgogICAgICov\nCiAgICBib29sZWFuIGNhbkNvbnZlcnQoQ2xhc3M8Pz4gdHlwZSk7CiAgICAK\nICAgIC8qKgogICAgICogQ29udmVydCB0aGUgZW51bSB2YWx1ZSB0byBhbiBl\nbnVtZXJhdGVkIHNldCBvZiBjb25zdGFudHMuCiAgICAgKiAKICAgICAqIEBh\ndXRob3IgUGluYWtpIFBvZGRhcgogICAgICoKICAgICAqLwogICAgc3RhdGlj\nIGNsYXNzIEVudW1Ub0ludGVnZXIgaW1wbGVtZW50cyBIaW50VmFsdWVDb252\nZXJ0ZXIgewogICAgICAgIHByaXZhdGUgQ2xhc3M8PyBleHRlbmRzIEVudW08\nPz4+IF90eXBlOwogICAgICAgIHByaXZhdGUgSW50ZWdlcltdIG1hcDsKICAg\nICAgICAKICAgICAgICBwdWJsaWMgRW51bVRvSW50ZWdlcihDbGFzczw/IGV4\ndGVuZHMgRW51bTw/Pj4gZW51bVR5cGUsIGludFtdIG51bWJlcnMpIHsKICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF90eXBlID0gZW51bVR5\ncGU7CiAgICAgICAgICAgICAgICBFbnVtPD8+W10gdmFsdWVzID0gKEVudW08\nPz5bXSllbnVtVHlwZS5nZXRNZXRob2QoInZhbHVlcyIsIG51bGwpLmludm9r\nZShudWxsLCAoQ2xhc3M8Pz5bXSludWxsKTsKICAgICAgICAgICAgICAgIG1h\ncCA9IG5ldyBJbnRlZ2VyW3ZhbHVlcy5sZW5ndGhdOwogICAgICAgICAgICAg\nICAgaW50IGkgPSAwOwogICAgICAgICAgICAgICAgZm9yIChFbnVtPD8+IHYg\nOiB2YWx1ZXMpIHsKICAgICAgICAgICAgICAgICAgICBtYXBbdi5vcmRpbmFs\nKCldID0gbnVtYmVyc1tpKytdOwogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAg\ndGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oZSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcHVibGljIE9iamVjdCBjb252\nZXJ0KE9iamVjdCBlKSB7CiAgICAgICAgICAgIGlmIChlLmdldENsYXNzKCkg\nPT0gX3R5cGUpCiAgICAgICAgICAgICAgICByZXR1cm4gbWFwWygoRW51bTw/\nPillKS5vcmRpbmFsKCldOwogICAgICAgICAgICByZXR1cm4gZTsKICAgICAg\nICB9CiAgICAgICAgCiAgICAgICAgcHVibGljIGJvb2xlYW4gY2FuQ29udmVy\ndChDbGFzczw/PiB0eXBlKSB7CiAgICAgICAgICAgIHJldHVybiBFbnVtLmNs\nYXNzLmlzQXNzaWduYWJsZUZyb20odHlwZSk7CiAgICAgICAgfQogICAgfQog\nICAgCiAgICAvKioKICAgICAqIENvbnZlcnRzIGFuIE9wZW5KUEEgc3BlY2lm\naWMgZW51bSB0byBhbiBlcXVpdmFsZW50IGtlcm5lbCBjb25zdGFudC4KICAg\nICAqIAogICAgICogQGF1dGhvciBQaW5ha2kgUG9kZGFyCiAgICAgKgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE9wZW5KUEFFbnVtVG9JbnRl\nZ2VyIGltcGxlbWVudHMgSGludFZhbHVlQ29udmVydGVyIHsKICAgICAgICBw\ncml2YXRlIE9wZW5KUEFFbnVtPD8+IF9wcm90b3R5cGU7CiAgICAgICAgCiAg\nICAgICAgcHVibGljIE9wZW5KUEFFbnVtVG9JbnRlZ2VyKE9wZW5KUEFFbnVt\nPD8+IHByb3RvdHlwZSkgewogICAgICAgICAgICBfcHJvdG90eXBlID0gcHJv\ndG90eXBlOwogICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgcHVibGlj\nIE9iamVjdCBjb252ZXJ0KE9iamVjdCBlKSB7CiAgICAgICAgICAgIGlmIChl\nLmdldENsYXNzKCkgPT0gX3Byb3RvdHlwZS5nZXRDbGFzcygpKQogICAgICAg\nICAgICAgICAgcmV0dXJuICgoT3BlbkpQQUVudW08RW51bTw/Pj4pZSkudG9L\nZXJuZWxDb25zdGFudCgpOwogICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9m\nIFN0cmluZykgewogICAgICAgICAgICAgICAgcmV0dXJuIF9wcm90b3R5cGUu\nY29udmVydFRvS2VybmVsQ29uc3RhbnQoZS50b1N0cmluZygpKTsKICAgICAg\nICAgICAgfQogICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEludGVnZXIp\nIHsKICAgICAgICAgICAgICAgIHJldHVybiBfcHJvdG90eXBlLmNvbnZlcnRU\nb0tlcm5lbENvbnN0YW50KChJbnRlZ2VyKWUpOwogICAgICAgICAgICB9CiAg\nICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0KICAgICAgICAKICAgICAg\nICBwdWJsaWMgYm9vbGVhbiBjYW5Db252ZXJ0KENsYXNzPD8+IHR5cGUpIHsK\nICAgICAgICAgICAgcmV0dXJuIE9wZW5KUEFFbnVtLmNsYXNzLmlzQXNzaWdu\nYWJsZUZyb20odHlwZSkgCiAgICAgICAgICAgICAgICB8fCB0eXBlID09IFN0\ncmluZy5jbGFzcyAKICAgICAgICAgICAgICAgIHx8IHR5cGUgPT0gSW50ZWdl\nci5jbGFzcwogICAgICAgICAgICAgICAgfHwgdHlwZSA9PSBpbnQuY2xhc3M7\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ29udmVydHMgYSBT\ndHJpbmcgdG8gYW4gaW50ZWdlci4KICAgICAqIAogICAgICogQGF1dGhvciBQ\naW5ha2kgUG9kZGFyCiAgICAgKgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIGNsYXNzIFN0cmluZ1RvSW50ZWdlciBpbXBsZW1lbnRzIEhpbnRWYWx1ZUNv\nbnZlcnRlciB7CiAgICAgICAgcHJpdmF0ZSBTdHJpbmdbXSBzdHJpbmdzOwog\nICAgICAgIHByaXZhdGUgSW50ZWdlcltdIG51bWJlcnM7CiAgICAgICAgCiAg\nICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0IGEgY29udmVydGVyIHRo\nYXQgd2lsbCBzaW1wbHkgdHJhbnNsYXRlIGEgbnVtZXJpYyBzdHJpbmcgdG8g\nYSBpbnRlZ2VyLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBTdHJpbmdU\nb0ludGVnZXIoKSB7CiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICAK\nICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3QgYSBjb252ZXJ0ZXIg\ndGhhdCB3aWxsIHRyYW5zbGF0ZSBhbnkgb2YgdGhlIGdpdmVuIHN0cmluZ3Mg\ndG8gY29ycmVzcG9uZGluZyBpbnRlZ2VyLgogICAgICAgICAqIEJvdGggYXJy\nYXlzIG11c3Qgbm90IGJlIG51bGwsIG11c3Qgbm90IGNvbnRhaW4gbnVsbCBl\nbGVtZW50cyBhbmQgbXVzdCBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbi4KICAg\nICAgICAgKiAKICAgICAgICAgKiBAcGFyYW0gc3RyaW5ncwogICAgICAgICAq\nIEBwYXJhbSBudW1iZXJzCiAgICAgICAgICovCiAgICAgICAgcHVibGljIFN0\ncmluZ1RvSW50ZWdlcihTdHJpbmdbXSBzdHJpbmdzLCBpbnRbXSBudW1iZXJz\nKSB7CiAgICAgICAgICAgIGlmIChzdHJpbmdzID09IG51bGwgfHwgbnVtYmVy\ncyA9PSBudWxsIHx8IHN0cmluZ3MubGVuZ3RoICE9IG51bWJlcnMubGVuZ3Ro\nKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbigpOwogICAgICAgICAgICB0aGlzLnN0cmluZ3MgPSBuZXcgU3Ry\naW5nW3N0cmluZ3MubGVuZ3RoXTsKICAgICAgICAgICAgdGhpcy5udW1iZXJz\nID0gbmV3IEludGVnZXJbbnVtYmVycy5sZW5ndGhdOwogICAgICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgICAgIHRoaXMuc3RyaW5nc1tpXSA9IHN0cmluZ3NbaV07CiAg\nICAgICAgICAgICAgICB0aGlzLm51bWJlcnNbaV0gPSBudW1iZXJzW2ldOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHB1Ymxp\nYyBPYmplY3QgY29udmVydChPYmplY3QgcykgewogICAgICAgICAgICBpZiAo\ncyBpbnN0YW5jZW9mIFN0cmluZyA9PSBmYWxzZSkKICAgICAgICAgICAgICAg\nIHJldHVybiBzOwogICAgICAgICAgICBTdHJpbmcgc3RyID0gcy50b1N0cmlu\nZygpOwogICAgICAgICAgICBpZiAoc3RyaW5ncyA9PSBudWxsKSB7CiAgICAg\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBJ\nbnRlZ2VyLnBhcnNlSW50KHN0cik7CiAgICAgICAgICAgICAgICB9IGNhdGNo\nIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAg\nICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkNhbiBu\nb3QgY29udmVydCAiICsgc3RyICsgIiAuIEV4cGVjdGVkIGEgbnVtZXJpYyBz\ndHJpbmciKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAg\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBp\nKyspICB7CiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nc1tpXS5lcXVhbHNJ\nZ25vcmVDYXNlKHN0cikpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51\nbWJlcnNbaV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgbmV3\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiQ2FuIG5vdCBjb252ZXJ0ICIg\nKyBzdHIgKyAiIC4gVmFsaWQgaW5wdXQgaXMgIiArIAogICAgICAgICAgICAg\nICAgICAgIEFycmF5cy50b1N0cmluZyhzdHJpbmdzKSk7CiAgICAgICAgfQog\nICAgICAgIAogICAgICAgIHB1YmxpYyBib29sZWFuIGNhbkNvbnZlcnQoQ2xh\nc3M8Pz4gY2xzKSB7CiAgICAgICAgICAgIHJldHVybiBTdHJpbmcuY2xhc3Mg\nPT0gY2xzOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHN0YXRp\nYyBjbGFzcyBTdHJpbmdUb0Jvb2xlYW4gaW1wbGVtZW50cyBIaW50VmFsdWVD\nb252ZXJ0ZXIgewogICAgICAgIHB1YmxpYyBPYmplY3QgY29udmVydChPYmpl\nY3QgdikgewogICAgICAgICAgICBpZiAodiBpbnN0YW5jZW9mIFN0cmluZykK\nICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuLnZhbHVlT2Yodi50b1N0\ncmluZygpKTsKICAgICAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBCb29sZWFu\nKQogICAgICAgICAgICAgICAgcmV0dXJuIHY7CiAgICAgICAgICAgIHJldHVy\nbiB2OwogICAgICAgIH0KICAgICAgICAKICAgICAgICBwdWJsaWMgYm9vbGVh\nbiBjYW5Db252ZXJ0KENsYXNzPD8+IGNscykgewogICAgICAgICAgICByZXR1\ncm4gU3RyaW5nLmNsYXNzID09IGNscyB8fCBCb29sZWFuLmNsYXNzID09IGNs\ncyB8fCBib29sZWFuLmNsYXNzID09IGNsczsKICAgICAgICB9CiAgICB9Cgp9\nCg==\n","encoding":"base64"}

