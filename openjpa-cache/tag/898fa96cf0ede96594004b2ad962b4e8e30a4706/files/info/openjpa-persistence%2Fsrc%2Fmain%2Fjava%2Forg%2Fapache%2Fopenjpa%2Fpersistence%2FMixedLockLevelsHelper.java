{"sha":"b1a44a9d38eda38594432c27592a3ed2212dbcbb","node_id":"MDQ6QmxvYjIwNjM2NDpiMWE0NGE5ZDM4ZWRhMzg1OTQ0MzJjMjc1OTJhM2VkMjIxMmRiY2Ji","size":4876,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b1a44a9d38eda38594432c27592a3ed2212dbcbb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZTsKCmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5Mb2NrTW9kZVR5cGU7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5GZXRjaENvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk1peGVkTG9ja0xldmVsczsK\nCi8qKgogKiBIZWxwZXIgbWV0aG9kcyB0cmFuc2xhdGUgYmV0d2VlbiBKUEEt\nZGVmaW5lZCBsb2NrIG1vZGUgYW5kIE9wZW5KUEEgCiAqIGludGVybmFsIGxv\nY2sgbGV2ZWxzLgogKgogKiBAYXV0aG9yIEFsYmVydCBMZWUKICogQHNpbmNl\nIDIuMC4wCiAqLwpwdWJsaWMgY2xhc3MgTWl4ZWRMb2NrTGV2ZWxzSGVscGVy\nIGltcGxlbWVudHMgSGludFZhbHVlQ29udmVydGVyIHsKICAgIC8qKgogICAg\nICogVHJhbnNsYXRlcyBqYXZheC5wZXJzaXN0ZW5jZSBMb2NrTW9kZVR5cGUg\ndG8gaW50ZXJuYWwgbG9jayBsZXZlbC4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBpbnQgdG9Mb2NrTGV2ZWwoTG9ja01vZGVUeXBlIG1vZGUpIHsKICAg\nICAgICBpZiAobW9kZSA9PSBudWxsIHx8IG1vZGUgPT0gTG9ja01vZGVUeXBl\nLk5PTkUpCiAgICAgICAgICAgIHJldHVybiBNaXhlZExvY2tMZXZlbHMuTE9D\nS19OT05FOwogICAgICAgIGlmIChtb2RlID09IExvY2tNb2RlVHlwZS5SRUFE\nKQogICAgICAgICAgICByZXR1cm4gTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUkVB\nRDsKICAgICAgICBpZiAobW9kZSA9PSBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJ\nQykKICAgICAgICAgICAgcmV0dXJuIE1peGVkTG9ja0xldmVscy5MT0NLX09Q\nVElNSVNUSUM7CiAgICAgICAgaWYgKG1vZGUgPT0gTG9ja01vZGVUeXBlLldS\nSVRFKQogICAgICAgICAgICByZXR1cm4gTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tf\nV1JJVEU7CiAgICAgICAgaWYgKG1vZGUgPT0gTG9ja01vZGVUeXBlLk9QVElN\nSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKQogICAgICAgICAgICByZXR1cm4gTWl4\nZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQ7\nCiAgICAgICAgaWYgKG1vZGUgPT0gTG9ja01vZGVUeXBlLlBFU1NJTUlTVElD\nX1JFQUQpCiAgICAgICAgICAgIHJldHVybiBNaXhlZExvY2tMZXZlbHMuTE9D\nS19QRVNTSU1JU1RJQ19SRUFEOwogICAgICAgIGlmIChtb2RlID09IExvY2tN\nb2RlVHlwZS5QRVNTSU1JU1RJQ19XUklURSkKICAgICAgICAgICAgcmV0dXJu\nIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1dSSVRFOwogICAg\nICAgIHJldHVybiBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19G\nT1JDRV9JTkNSRU1FTlQ7CiAgICB9CiAgICAKICAgIHB1YmxpYyBzdGF0aWMg\naW50IHRvTG9ja0xldmVsKGludCBtb2RlKSB7CiAgICAgICAgc3dpdGNoICht\nb2RlKSB7CiAgICAgICAgY2FzZSBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJ\nTUlTVElDOgogICAgICAgIGNhc2UgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BU\nSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQ6CiAgICAgICAgY2FzZSBNaXhlZExv\nY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQ6CiAg\nICAgICAgY2FzZSBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19S\nRUFEOgogICAgICAgIGNhc2UgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lN\nSVNUSUNfV1JJVEU6CiAgICAgICAgY2FzZSBNaXhlZExvY2tMZXZlbHMuTE9D\nS19OT05FOgogICAgICAgIGNhc2UgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUkVB\nRDoKICAgICAgICBjYXNlIE1peGVkTG9ja0xldmVscy5MT0NLX1dSSVRFOgog\nICAgICAgIGNhc2UgRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQ6CiAgICAg\nICAgICAgIHJldHVybiBtb2RlOwogICAgICAgICBkZWZhdWx0OgogICAgICAg\nICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiVW5r\nbm93biBsb2NrIGxldmVsICIgKyBtb2RlKTsKICAgICAgICB9CiAgICB9CgoK\nICAgIC8qKgogICAgICogVHJhbnNsYXRlcyBpbnRlcm5hbCBsb2NrIGxldmVs\nIHRvIGphdmF4LnBlcnNpc3RlbmNlIExvY2tNb2RlVHlwZS4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBMb2NrTW9kZVR5cGUgZnJvbUxvY2tMZXZlbChp\nbnQgbGV2ZWwpIHsKICAgICAgICBpZiAobGV2ZWwgPCBNaXhlZExvY2tMZXZl\nbHMuTE9DS19SRUFEKQogICAgICAgICAgICByZXR1cm4gTG9ja01vZGVUeXBl\nLk5PTkU7CiAgICAgICAgaWYgKGxldmVsIDwgTWl4ZWRMb2NrTGV2ZWxzLkxP\nQ0tfT1BUSU1JU1RJQykKICAgICAgICAgICAgcmV0dXJuIExvY2tNb2RlVHlw\nZS5SRUFEOwogICAgICAgIGlmIChsZXZlbCA8IE1peGVkTG9ja0xldmVscy5M\nT0NLX1dSSVRFKQogICAgICAgICAgICByZXR1cm4gTG9ja01vZGVUeXBlLk9Q\nVElNSVNUSUM7CiAgICAgICAgaWYgKGxldmVsIDwgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpCiAgICAgICAgICAg\nIHJldHVybiBMb2NrTW9kZVR5cGUuV1JJVEU7CiAgICAgICAgaWYgKGxldmVs\nIDwgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfUkVBRCkKICAg\nICAgICAgICAgcmV0dXJuIExvY2tNb2RlVHlwZS5PUFRJTUlTVElDX0ZPUkNF\nX0lOQ1JFTUVOVDsKICAgICAgICBpZiAobGV2ZWwgPCBNaXhlZExvY2tMZXZl\nbHMuTE9DS19QRVNTSU1JU1RJQ19XUklURSkKICAgICAgICAgICAgcmV0dXJu\nIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19SRUFEOwogICAgICAgIGlmIChs\nZXZlbCA8IE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX0ZPUkNF\nX0lOQ1JFTUVOVCkKICAgICAgICAgICAgcmV0dXJuIExvY2tNb2RlVHlwZS5Q\nRVNTSU1JU1RJQ19XUklURTsKICAgICAgICByZXR1cm4gTG9ja01vZGVUeXBl\nLlBFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVDsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBjYW5Db252ZXJ0KENsYXNzPD8+IHR5cGUpIHsKICAgICAg\nICByZXR1cm4gdHlwZSA9PSBMb2NrTW9kZVR5cGUuY2xhc3MgfHwgdHlwZSA9\nPSBTdHJpbmcuY2xhc3MgfHwgdHlwZSA9PSBJbnRlZ2VyLmNsYXNzIHx8IHR5\ncGUgPT0gaW50LmNsYXNzOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgY29u\ndmVydChPYmplY3Qgb3JpZ2luYWwpIHsKICAgICAgICBpZiAob3JpZ2luYWwg\naW5zdGFuY2VvZiBMb2NrTW9kZVR5cGUpCiAgICAgICAgICAgIHJldHVybiBN\naXhlZExvY2tMZXZlbHNIZWxwZXIudG9Mb2NrTGV2ZWwoKExvY2tNb2RlVHlw\nZSlvcmlnaW5hbCk7CiAgICAgICAgaWYgKG9yaWdpbmFsIGluc3RhbmNlb2Yg\nU3RyaW5nKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBp\nbnQgdmFsdWUgPSBJbnRlZ2VyLnBhcnNlSW50KG9yaWdpbmFsLnRvU3RyaW5n\nKCkpOwogICAgICAgICAgICAgICAgcmV0dXJuIE1peGVkTG9ja0xldmVsc0hl\nbHBlci50b0xvY2tMZXZlbCh2YWx1ZSk7CiAgICAgICAgICAgIH0gY2F0Y2gg\nKE51bWJlckZvcm1hdEV4Y2VwdGlvbiBuZmUpIHsKICAgICAgICAgICAgICAg\nIGlmICgibm9uZSIuZXF1YWxzSWdub3JlQ2FzZShvcmlnaW5hbC50b1N0cmlu\nZygpKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBNaXhlZExvY2tM\nZXZlbHMuTE9DS19OT05FOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgcmV0dXJuIE1peGVkTG9ja0xldmVsc0hlbHBlci50b0xvY2tMZXZl\nbCgKICAgICAgICAgICAgICAgICAgICAgICAgTG9ja01vZGVUeXBlLnZhbHVl\nT2Yob3JpZ2luYWwudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpLnJlcGxhY2Uo\nJy0nLCAnXycpKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAg\naWYgKG9yaWdpbmFsIGluc3RhbmNlb2YgSW50ZWdlcikgewogICAgICAgICAg\nICByZXR1cm4gTWl4ZWRMb2NrTGV2ZWxzSGVscGVyLnRvTG9ja0xldmVsKChJ\nbnRlZ2VyKW9yaWdpbmFsKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAg\ndGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiY2FuIG5vdCBj\nb252ZXJ0ICIgKyBvcmlnaW5hbCArICIgb2YgIiArIG9yaWdpbmFsLmdldENs\nYXNzKCkpOwogICAgfQp9Cg==\n","encoding":"base64"}

