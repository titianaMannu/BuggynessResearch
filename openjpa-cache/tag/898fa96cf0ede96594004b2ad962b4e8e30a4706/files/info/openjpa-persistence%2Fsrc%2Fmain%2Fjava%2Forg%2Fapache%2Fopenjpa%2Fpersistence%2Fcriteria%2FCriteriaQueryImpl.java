{"sha":"91664be98c6a20c96523e18ff5fc178d3c3c6e11","node_id":"MDQ6QmxvYjIwNjM2NDo5MTY2NGJlOThjNmEyMGM5NjUyM2UxOGZmNWZjMTc4ZDNjM2M2ZTEx","size":24422,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/91664be98c6a20c96523e18ff5fc178d3c3c6e11","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEu\ndXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5I\nYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZEhhc2hTZXQ7CmltcG9y\ndCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9y\ndCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2YS51dGlsLlN0YWNrOwoKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNyaXRlcmlhLkFic3RyYWN0UXVlcnk7\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5Dcml0ZXJpYVF1\nZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3JpdGVyaWEuRXhwcmVz\nc2lvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNyaXRlcmlhLkZldGNo\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3JpdGVyaWEuRnJvbTsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNyaXRlcmlhLkpvaW47CmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5PcmRlcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLmNyaXRlcmlhLlBhcmFtZXRlckV4cHJlc3Npb247Cmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5QcmVkaWNhdGU7Cmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5Sb290OwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuY3JpdGVyaWEuU2VsZWN0aW9uOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuY3JpdGVyaWEuU3VicXVlcnk7CmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuRW50aXR5VHlwZTsKCmltcG9y\ndCBvcmcuYXBhY2hlLmNvbW1vbnMuY29sbGVjdGlvbnMubWFwLkxpbmtlZE1h\ncDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RvcmVRdWVy\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5Db250\nZXh0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5leHBzLkV4\ncHJlc3Npb25GYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5leHBzLlF1ZXJ5RXhwcmVzc2lvbnM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEua2VybmVsLmV4cHMuVmFsdWU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLk9yZGVyZWRNYXA7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YS5NZXRhbW9kZWxJbXBsOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLm1ldGEuVHlw\nZXM7CgovKioKICogQ3JpdGVyaWEgcXVlcnkgaW1wbGVtZW50YXRpb24uCiAq\nIAogKiBDb2xsZWN0cyBjbGF1c2VzIG9mIGNyaXRlcmlhIHF1ZXJ5IChlLmcu\nIHNlbGVjdCBwcm9qZWN0aW9ucywgZnJvbS9qb2luLCAKICogd2hlcmUgY29u\nZGl0aW9ucywgb3JkZXIgYnkpLgogKiBFdmVudHVhbGx5IHRyYW5zbGF0ZXMg\ndGhlc2UgY2xhdXNlcyB0byBhIHNpbWlsYXIgZm9ybSBvZiBFeHByZXNzaW9u\nIHRyZWUKICogdGhhdCBjYW4gYmUgaW50ZXJwcmV0ZWQgYW5kIGV4ZWN1dGVk\nIGFnYWluc3QgYSBkYXRhIHN0b3JlIGJ5IE9wZW5KUEEga2VybmVsLgogKiAg\nIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICogQGF1dGhvciBGYXkgV2Fu\nZwogKgogKiBAc2luY2UgMi4wLjAKICovCmNsYXNzIENyaXRlcmlhUXVlcnlJ\nbXBsPFQ+IGltcGxlbWVudHMgT3BlbkpQQUNyaXRlcmlhUXVlcnk8VD4sIEFs\naWFzQ29udGV4dCB7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6\nZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlKENyaXRlcmlhUXVlcnlJ\nbXBsLmNsYXNzKTsKICAgIAogICAgcHJpdmF0ZSBmaW5hbCBNZXRhbW9kZWxJ\nbXBsICBfbW9kZWw7CiAgICBwcml2YXRlIFNldDxSb290PD8+PiAgICAgICAg\nX3Jvb3RzOwogICAgcHJpdmF0ZSBQcmVkaWNhdGVJbXBsICAgICAgIF93aGVy\nZTsKICAgIHByaXZhdGUgTGlzdDxPcmRlcj4gICAgICAgICBfb3JkZXJzOwog\nICAgcHJpdmF0ZSBPcmRlcmVkTWFwPE9iamVjdCwgQ2xhc3M8Pz4+IF9wYXJh\nbXM7IC8qPFBhcmFtZXRlckV4cHJlc3Npb248Pz4sIENsYXNzPD8+PiovIAog\nICAgcHJpdmF0ZSBTZWxlY3Rpb248PyBleHRlbmRzIFQ+IF9zZWxlY3Rpb247\nCiAgICBwcml2YXRlIExpc3Q8U2VsZWN0aW9uPD8+PiAgX3NlbGVjdGlvbnM7\nCiAgICBwcml2YXRlIExpc3Q8RXhwcmVzc2lvbjw/Pj4gX2dyb3VwczsKICAg\nIHByaXZhdGUgUHJlZGljYXRlSW1wbCAgICAgICBfaGF2aW5nOwogICAgcHJp\ndmF0ZSBMaXN0PFN1YnF1ZXJ5PD8+PiAgIF9zdWJxdWVyaWVzOwogICAgcHJp\ndmF0ZSBib29sZWFuICAgICAgICAgICAgIF9kaXN0aW5jdDsKICAgIHByaXZh\ndGUgZmluYWwgU3VicXVlcnlJbXBsPD8+IF9kZWxlZ2F0b3I7CiAgICBwcml2\nYXRlIGZpbmFsIENsYXNzPFQ+ICAgICAgX3Jlc3VsdENsYXNzOwogICAgcHJp\ndmF0ZSBib29sZWFuICAgICAgICAgICAgIF9jb21waWxlZDsKCiAgICAvLyBB\nbGlhc0NvbnRleHQKICAgIHByaXZhdGUgaW50IGFsaWFzQ291bnQgPSAwOwog\nICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIEFMSUFTX0JBU0UgPSAiYXV0b0Fs\naWFzIjsKICAgIAogICAgcHJpdmF0ZSBNYXA8U2VsZWN0aW9uPD8+LFZhbHVl\nPiBfdmFyaWFibGVzID0gbmV3IEhhc2hNYXA8U2VsZWN0aW9uPD8+LCBWYWx1\nZT4oKTsKICAgIHByaXZhdGUgTWFwPFNlbGVjdGlvbjw/PixWYWx1ZT4gX3Zh\nbHVlcyAgICA9IG5ldyBIYXNoTWFwPFNlbGVjdGlvbjw/PiwgVmFsdWU+KCk7\nCiAgICBwcml2YXRlIE1hcDxTZWxlY3Rpb248Pz4sU3RyaW5nPiBfYWxpYXNl\ncyAgPSBudWxsOwogICAgcHJpdmF0ZSBNYXA8U2VsZWN0aW9uPD8+LFZhbHVl\nPiBfcm9vdFZhcmlhYmxlcyA9IG5ldyBIYXNoTWFwPFNlbGVjdGlvbjw/Piwg\nVmFsdWU+KCk7CiAgICAKICAgIC8vIFN1YnF1ZXJ5Q29udGV4dAogICAgcHJp\ndmF0ZSBTdGFjazxDb250ZXh0PiBfY29udGV4dHMgPSBudWxsOwogICAgCiAg\nICBwdWJsaWMgQ3JpdGVyaWFRdWVyeUltcGwoTWV0YW1vZGVsSW1wbCBtb2Rl\nbCwgQ2xhc3M8VD4gcmVzdWx0Q2xhc3MpIHsKICAgICAgICB0aGlzLl9tb2Rl\nbCA9IG1vZGVsOwogICAgICAgIHRoaXMuX3Jlc3VsdENsYXNzID0gcmVzdWx0\nQ2xhc3M7CiAgICAgICAgdGhpcy5fZGVsZWdhdG9yID0gbnVsbDsKICAgICAg\nICBfYWxpYXNlcyA9IG5ldyBIYXNoTWFwPFNlbGVjdGlvbjw/PiwgU3RyaW5n\nPigpOyAKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBVc2VkIGJ5IGEgc3Vi\ncXVlcnkgdG8gZGVsZWdhdGUgdG8gdGhpcyByZWNlaXZlci4KICAgICAqIAog\nICAgICogQHBhcmFtIG1vZGVsIHRoZSBtZXRhbW9kZWwgZGVmaW5lcyB0aGUg\nc2NvcGUgb2YgYWxsIHBlcnNpc3RlbnQgZW50aXR5IHJlZmVyZW5jZXMuCiAg\nICAgKiBAcGFyYW0gZGVsZWdhdG9yIHRoZSBzdWJxdWVyeSB3aGljaCB3aWxs\nIGRlbGVnYXRlIHRvIHRoaXMgcmVjZWl2ZXIuCiAgICAgKi8KICAgIENyaXRl\ncmlhUXVlcnlJbXBsKE1ldGFtb2RlbEltcGwgbW9kZWwsIFN1YnF1ZXJ5SW1w\nbDxUPiBkZWxlZ2F0b3IpIHsKICAgICAgICB0aGlzLl9tb2RlbCA9IG1vZGVs\nOwogICAgICAgIHRoaXMuX3Jlc3VsdENsYXNzID0gZGVsZWdhdG9yLmdldEph\ndmFUeXBlKCk7CiAgICAgICAgX2RlbGVnYXRvciA9IGRlbGVnYXRvcjsKICAg\nICAgICBfYWxpYXNlcyA9IGdldEFsaWFzZXMoKTsKICAgIH0KICAgIAogICAg\nLyoqCiAgICAgKiBHZXRzIHRoZSBzdWJxdWVyeSwgaWYgYW55LCB3aGljaCBp\ncyBkZWxlZ2F0aW5nIHRvIHRoaXMgcmVjZWl2ZXIuCiAgICAgKi8KICAgIFN1\nYnF1ZXJ5SW1wbDw/PiBnZXREZWxlZ2F0b3IoKSB7CiAgICAgICAgcmV0dXJu\nIF9kZWxlZ2F0b3I7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogR2V0cyB0\naGUgbWV0YW1vZGVsIHdoaWNoIGRlZmluZXMgdGhlIHNjb3BlIG9mIGFsbCBw\nZXJzaXN0ZW50IGVudGl0eSByZWZlcmVuY2VzLgogICAgICovCiAgICBwdWJs\naWMgTWV0YW1vZGVsSW1wbCBnZXRNZXRhbW9kZWwoKSB7CiAgICAgICAgcmV0\ndXJuIF9tb2RlbDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBHZXRzIHRo\nZSBzdGFjayBvZiBjb250ZXh0cyB1c2VkIGJ5IHRoaXMgcXVlcnkuCiAgICAg\nKi8KICAgIFN0YWNrPENvbnRleHQ+IGdldENvbnRleHRzKCkgewogICAgICAg\nIHJldHVybiBfY29udGV4dHM7CiAgICB9CiAgICAKICAgIC8qKgogICAgICog\nU2V0cyB3aGV0aGVyIHRoaXMgcXVlcnkgYXMgZGlzdGluY3QuCiAgICAgKi8K\nICAgIHB1YmxpYyBDcml0ZXJpYVF1ZXJ5PFQ+IGRpc3RpbmN0KGJvb2xlYW4g\nZGlzdGluY3QpIHsKICAgICAgICBfZGlzdGluY3QgPSBkaXN0aW5jdDsKICAg\nICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEdldHMg\ndGhlIGxpc3Qgb2Ygb3JkZXJpbmcgZWxlbWVudHMuCiAgICAgKiAKICAgICAq\nIEByZXR1cm4gRW1wdHkgbGlzdCBpZiB0aGVyZSBpcyBubyBvcmRlcmluZyBl\nbGVtZW50cy4KICAgICAqIFRoZSByZXR1cm5lZCBsaXN0IGlmIG11dGFibGUg\nYnV0IG11dGF0aW9uIGhhcyBubyBpbXBhY3Qgb24gdGhpcyBxdWVyeS4KICAg\nICAqLwogICAgcHVibGljIExpc3Q8T3JkZXI+IGdldE9yZGVyTGlzdCgpIHsK\nICAgICAgICByZXR1cm4gRXhwcmVzc2lvbnMucmV0dXJuQ29weShfb3JkZXJz\nKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHNlbGVj\ndGlvbiBvZiB0aGUgcXVlcnkKICAgICAqIEByZXR1cm4gdGhlIGl0ZW0gdG8g\nYmUgcmV0dXJuZWQgaW4gdGhlIHF1ZXJ5IHJlc3VsdAogICAgICovCiAgICBw\ndWJsaWMgU2VsZWN0aW9uPFQ+IGdldFNlbGVjdGlvbigpIHsKICAgICAgICBy\nZXR1cm4gKFNlbGVjdGlvbjxUPilfc2VsZWN0aW9uOwogICAgfQogICAgCiAg\nICAvKioKICAgICAqIFNwZWNpZnkgdGhlIGl0ZW1zIHRoYXQgYXJlIHRvIGJl\nIHJldHVybmVkIGluIHRoZSBxdWVyeSByZXN1bHQuCiAgICAgKiBSZXBsYWNl\ncyB0aGUgcHJldmlvdXNseSBzcGVjaWZpZWQgc2VsZWN0aW9uKHMpLCBpZiBh\nbnkuCiAgICAgKgogICAgICogVGhlIHR5cGUgb2YgdGhlIHJlc3VsdCBvZiB0\naGUgcXVlcnkgZXhlY3V0aW9uIGRlcGVuZHMgb24KICAgICAqIHRoZSBzcGVj\naWZpY2F0aW9uIG9mIHRoZSBjcml0ZXJpYSBxdWVyeSBvYmplY3QgYXMgd2Vs\nbCBhcyB0aGUKICAgICAqIGFyZ3VtZW50cyB0byB0aGUgbXVsdGlzZWxlY3Qg\nbWV0aG9kIGFzIGZvbGxvd3M6CiAgICAgKgogICAgICogSWYgdGhlIHR5cGUg\nb2YgdGhlIGNyaXRlcmlhIHF1ZXJ5IGlzIENyaXRlcmlhUXVlcnk8VHVwbGU+\nLAogICAgICogYSBUdXBsZSBvYmplY3QgY29ycmVzcG9uZGluZyB0byB0aGUg\nYXJndW1lbnRzIG9mIHRoZSAKICAgICAqIG11bHRpc2VsZWN0IG1ldGhvZCB3\naWxsIGJlIGluc3RhbnRpYXRlZCBhbmQgcmV0dXJuZWQgZm9yIAogICAgICog\nZWFjaCByb3cgdGhhdCByZXN1bHRzIGZyb20gdGhlIHF1ZXJ5IGV4ZWN1dGlv\nbi4KICAgICAqCiAgICAgKiBJZiB0aGUgdHlwZSBvZiB0aGUgY3JpdGVyaWEg\ncXVlcnkgaXMgQ3JpdGVyaWFRdWVyeTxYPiBmb3IKICAgICAqIHNvbWUgdXNl\nci1kZWZpbmVkIGNsYXNzIFgsIHRoZW4gdGhlIGFyZ3VtZW50cyB0byB0aGUg\nCiAgICAgKiBtdWx0aXNlbGVjdCBtZXRob2Qgd2lsbCBiZSBwYXNzZWQgdG8g\ndGhlIFggY29uc3RydWN0b3IgYW5kIAogICAgICogYW4gaW5zdGFuY2Ugb2Yg\ndHlwZSBYIHdpbGwgYmUgcmV0dXJuZWQgZm9yIGVhY2ggcm93LiAgCiAgICAg\nKiBUaGUgSWxsZWdhbFN0YXRlRXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duIGlm\nIGEgY29uc3RydWN0b3IgCiAgICAgKiBmb3IgdGhlIGdpdmVuIGFyZ3VtZW50\nIHR5cGVzIGRvZXMgbm90IGV4aXN0LgogICAgICoKICAgICAqIElmIHRoZSB0\neXBlIG9mIHRoZSBjcml0ZXJpYSBxdWVyeSBpcyBDcml0ZXJpYVF1ZXJ5PFhb\nXT4gZm9yCiAgICAgKiBzb21lIGNsYXNzIFgsIGFuIGluc3RhbmNlIG9mIHR5\ncGUgWFtdIHdpbGwgYmUgcmV0dXJuZWQgZm9yIAogICAgICogZWFjaCByb3cu\nICBUaGUgZWxlbWVudHMgb2YgdGhlIGFycmF5IHdpbGwgY29ycmVzcG9uZCB0\nbyB0aGUgCiAgICAgKiBhcmd1bWVudHMgb2YgdGhlIG11bHRpc2VsZWN0IG1l\ndGhvZC4gICAgVGhlIAogICAgICogSWxsZWdhbFN0YXRlRXhjZXB0aW9uIHdp\nbGwgYmUgdGhyb3duIGlmIHRoZSBhcmd1bWVudHMgdG8gdGhlIAogICAgICog\nbXVsdGlzZWxlY3QgbWV0aG9kIGFyZSBub3Qgb2YgdHlwZSBYLgogICAgICoK\nICAgICAqIElmIHRoZSB0eXBlIG9mIHRoZSBjcml0ZXJpYSBxdWVyeSBpcyBD\ncml0ZXJpYVF1ZXJ5PE9iamVjdD4sCiAgICAgKiBhbmQgb25seSBhIHNpbmds\nZSBhcmd1bWVudCBpcyBwYXNzZWQgdG8gdGhlIG11bHRpc2VsZWN0IAogICAg\nICogbWV0aG9kLCBhbiBpbnN0YW5jZSBvZiB0eXBlIE9iamVjdCB3aWxsIGJl\nIHJldHVybmVkIGZvciAKICAgICAqIGVhY2ggcm93LgogICAgICoKICAgICAq\nIElmIHRoZSB0eXBlIG9mIHRoZSBjcml0ZXJpYSBxdWVyeSBpcyBDcml0ZXJp\nYVF1ZXJ5PE9iamVjdD4sCiAgICAgKiBhbmQgbW9yZSB0aGFuIG9uZSBhcmd1\nbWVudCBpcyBwYXNzZWQgdG8gdGhlIG11bHRpc2VsZWN0IAogICAgICogbWV0\naG9kLCBhbiBpbnN0YW5jZSBvZiB0eXBlIE9iamVjdFtdIHdpbGwgYmUgaW5z\ndGFudGlhdGVkIAogICAgICogYW5kIHJldHVybmVkIGZvciBlYWNoIHJvdy4g\nIFRoZSBlbGVtZW50cyBvZiB0aGUgYXJyYXkgd2lsbAogICAgICogY29ycmVz\ncG9uZCB0byB0aGUgYXJndW1lbnRzIHRvIHRoZSBtdWx0aXNlbGVjdCBtZXRo\nb2QuCiAgICAgKgogICAgICogQHBhcmFtIHNlbGVjdGlvbnMgIGV4cHJlc3Np\nb25zIHNwZWNpZnlpbmcgdGhlIGl0ZW1zIHRoYXQKICAgICAqICAgICAgICBh\ncmUgcmV0dXJuZWQgaW4gdGhlIHF1ZXJ5IHJlc3VsdAogICAgICogQHJldHVy\nbiB0aGUgbW9kaWZpZWQgcXVlcnkKICAgICAqLwogICAgcHVibGljIENyaXRl\ncmlhUXVlcnk8VD4gbXVsdGlzZWxlY3QoU2VsZWN0aW9uPD8+Li4uIHNlbGVj\ndGlvbnMpIHsKICAgICAgICBfc2VsZWN0aW9ucyA9IEFycmF5cy5hc0xpc3Qo\nc2VsZWN0aW9ucyk7IC8vIGRvIG5vdCB0ZWxlc2NvcGUKICAgICAgICBfc2Vs\nZWN0aW9uICA9IG5ldyBDb21wb3VuZFNlbGVjdGlvbnMuTXVsdGlTZWxlY3Rp\nb24oX3Jlc3VsdENsYXNzLCBzZWxlY3Rpb25zKTsKICAgICAgICByZXR1cm4g\ndGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIFJlZ2lzdGVycyB0aGUgZ2l2\nZW4gcGFyYW1ldGVyLgogICAgICovCiAgICB2b2lkIHJlZ2lzdGVyUGFyYW1l\ndGVyKFBhcmFtZXRlckV4cHJlc3Npb25JbXBsPD8+IHApIHsKICAgICAgICBp\nZiAoX3BhcmFtcyA9PSBudWxsKQogICAgICAgICAgICBfcGFyYW1zID0gbmV3\nIE9yZGVyZWRNYXAvKjxQYXJhbWV0ZXJFeHByZXNzaW9uPD8+LCBDbGFzczw/\nPiovKCk7CiAgICAgICAgaWYgKCFfcGFyYW1zLmNvbnRhaW5zS2V5KHApKSB7\nCiAgICAgICAgICAgIHAuc2V0SW5kZXgoX3BhcmFtcy5zaXplKCkpOwogICAg\nICAgICAgICBfcGFyYW1zLnB1dChwLCBwLmdldEphdmFUeXBlKCkpOwogICAg\nICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIFNldDxQYXJhbWV0ZXJFeHBy\nZXNzaW9uPD8+PiBnZXRQYXJhbWV0ZXJzKCkgewogICAgICAgIGNvbGxlY3RQ\nYXJhbWV0ZXJzKG5ldyBDcml0ZXJpYUV4cHJlc3Npb25WaXNpdG9yLlBhcmFt\nZXRlclZpc2l0b3IodGhpcykpOwogICAgICAgIHJldHVybiBfcGFyYW1zID09\nIG51bGwgPyBDb2xsZWN0aW9ucy5FTVBUWV9TRVQgOiBfcGFyYW1zLmtleVNl\ndCgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBzZWxlY3Rp\nb24gaXRlbXMgb2YgdGhlIHF1ZXJ5IGFzIGEgbGlzdAogICAgICogQHJldHVy\nbiB0aGUgc2VsZWN0aW9uIGl0ZW1zIG9mIHRoZSBxdWVyeSBhcyBhIGxpc3QK\nICAgICAqLwogICAgcHVibGljIExpc3Q8U2VsZWN0aW9uPD8+PiBnZXRTZWxl\nY3Rpb25MaXN0KCkgewogICAgICAgIHJldHVybiBFeHByZXNzaW9ucy5yZXR1\ncm5Db3B5KF9zZWxlY3Rpb25zKTsKICAgIH0KCiAgICBwdWJsaWMgQ3JpdGVy\naWFRdWVyeTxUPiBncm91cEJ5KEV4cHJlc3Npb248Pz4uLi4gZ3JvdXBpbmcp\nIHsKICAgIAlpZiAoZ3JvdXBpbmcgPT0gbnVsbCkgewogICAgCSAgICBfZ3Jv\ndXBzID0gbnVsbDsKICAgIAkgICAgcmV0dXJuIHRoaXM7CiAgICAJfQogICAg\nICAgIF9ncm91cHMgPSBuZXcgQXJyYXlMaXN0PEV4cHJlc3Npb248Pz4+KCk7\nCiAgICAJZm9yIChFeHByZXNzaW9uPD8+IGUgOiBncm91cGluZykKICAgIAkJ\nX2dyb3Vwcy5hZGQoZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyBDcml0ZXJpYVF1ZXJ5PFQ+IGdyb3VwQnkoTGlzdDxF\neHByZXNzaW9uPD8+PiBncm91cGluZykgewogICAgICAgIGlmIChncm91cGlu\nZyA9PSBudWxsKSB7CiAgICAgICAgICAgIF9ncm91cHMgPSBudWxsOwogICAg\nICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgX2dyb3Vw\ncyA9IG5ldyBBcnJheUxpc3Q8RXhwcmVzc2lvbjw/Pj4oKTsKICAgICAgICBm\nb3IgKEV4cHJlc3Npb248Pz4gZSA6IGdyb3VwaW5nKQogICAgICAgICAgICBf\nZ3JvdXBzLmFkZChlKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCgog\nICAgcHVibGljIENyaXRlcmlhUXVlcnk8VD4gaGF2aW5nKEV4cHJlc3Npb248\nQm9vbGVhbj4gcmVzdHJpY3Rpb24pIHsKICAgICAgICBfaGF2aW5nID0gKFBy\nZWRpY2F0ZUltcGwpcmVzdHJpY3Rpb247CiAgICAgICAgcmV0dXJuIHRoaXM7\nCiAgICB9CgogICAgcHVibGljIENyaXRlcmlhUXVlcnk8VD4gaGF2aW5nKFBy\nZWRpY2F0ZS4uLiByZXN0cmljdGlvbnMpIHsKICAgICAgICBpZiAocmVzdHJp\nY3Rpb25zID09IG51bGwpIHsKICAgICAgICAgICAgX2hhdmluZyA9IG51bGw7\nCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KICAgICAgICBf\naGF2aW5nID0gbmV3IFByZWRpY2F0ZUltcGwuQW5kKCk7CiAgICAgICAgZm9y\nIChQcmVkaWNhdGUgcCA6IHJlc3RyaWN0aW9ucykKICAgICAgICAJX2hhdmlu\nZy5hZGQocCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVi\nbGljIENyaXRlcmlhUXVlcnk8VD4gb3JkZXJCeShPcmRlci4uLiBvcmRlcnMp\nIHsKICAgICAgICBpZiAob3JkZXJzID09IG51bGwpIHsKICAgICAgICAgICAg\nX29yZGVycyA9IG51bGw7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAg\nICAgIH0KICAgICAgICBfb3JkZXJzID0gbmV3IEFycmF5TGlzdDxPcmRlcj4o\nKTsKICAgICAgICBmb3IgKE9yZGVyIG8gOiBvcmRlcnMpIHsKICAgICAgICAg\nICAgX29yZGVycy5hZGQobyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0\naGlzOwogICAgfQogICAgCiAgICBwdWJsaWMgQ3JpdGVyaWFRdWVyeTxUPiBv\ncmRlckJ5KExpc3Q8T3JkZXI+IG9yZGVycykgewogICAgICAgIGlmIChvcmRl\ncnMgPT0gbnVsbCkgewogICAgICAgICAgICBfb3JkZXJzID0gbnVsbDsKICAg\nICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICAgIF9vcmRl\ncnMgPSBuZXcgQXJyYXlMaXN0PE9yZGVyPigpOwogICAgICAgIGZvciAoT3Jk\nZXIgbyA6IG9yZGVycykgewogICAgICAgICAgICBfb3JkZXJzLmFkZChvKTsK\nICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAKICAg\nIC8qKgogICAgICogU3BlY2lmeSB0aGUgaXRlbSB0aGF0IGlzIHRvIGJlIHJl\ndHVybmVkIGluIHRoZSBxdWVyeSByZXN1bHQuCiAgICAgKiBSZXBsYWNlcyB0\naGUgcHJldmlvdXNseSBzcGVjaWZpZWQgc2VsZWN0aW9uKHMpLCBpZiBhbnku\nCiAgICAgKiBAcGFyYW0gc2VsZWN0aW9uICBzZWxlY3Rpb24gc3BlY2lmeWlu\nZyB0aGUgaXRlbSB0aGF0CiAgICAgKiAgICAgICAgaXMgdG8gYmUgcmV0dXJu\nZWQgaW4gdGhlIHF1ZXJ5IHJlc3VsdAogICAgICogQHJldHVybiB0aGUgbW9k\naWZpZWQgcXVlcnkKICAgICAqLwogICAgcHVibGljIENyaXRlcmlhUXVlcnk8\nVD4gc2VsZWN0KFNlbGVjdGlvbjw/IGV4dGVuZHMgVD4gc2VsZWN0aW9uKSB7\nCiAgICAgICAgX3NlbGVjdGlvbiA9IHNlbGVjdGlvbjsKICAgICAgICBfc2Vs\nZWN0aW9ucyA9IG5ldyBBcnJheUxpc3Q8U2VsZWN0aW9uPD8+PigpOwogICAg\nICAgIF9zZWxlY3Rpb25zLmFkZChzZWxlY3Rpb24pOwogICAgICAgIHJldHVy\nbiB0aGlzOwogICAgfQoKICAgIHB1YmxpYyBDcml0ZXJpYVF1ZXJ5PFQ+IHdo\nZXJlKEV4cHJlc3Npb248Qm9vbGVhbj4gcmVzdHJpY3Rpb24pIHsKICAgICAg\nICBpbnZhbGlkYXRlQ29tcGlsYXRpb24oKTsKICAgICAgICBpZiAocmVzdHJp\nY3Rpb24gPT0gbnVsbCkgewogICAgICAgICAgICBfd2hlcmUgPSBudWxsOwog\nICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgX3do\nZXJlID0gKFByZWRpY2F0ZUltcGwpcmVzdHJpY3Rpb247CiAgICAgICAgcmV0\ndXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIENyaXRlcmlhUXVlcnk8VD4g\nd2hlcmUoUHJlZGljYXRlLi4uIHJlc3RyaWN0aW9ucykgewogICAgICAgIGlu\ndmFsaWRhdGVDb21waWxhdGlvbigpOwogICAgICAgIGlmIChyZXN0cmljdGlv\nbnMgPT0gbnVsbCkgewogICAgICAgICAgICBfd2hlcmUgPSBudWxsOwogICAg\nICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgX3doZXJl\nID0gbmV3IFByZWRpY2F0ZUltcGwuQW5kKHJlc3RyaWN0aW9ucyk7CiAgICAg\nICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIDxYPiBSb290PFg+\nIGZyb20oRW50aXR5VHlwZTxYPiBlbnRpdHkpIHsKICAgICAgICBSb290SW1w\nbDxYPiByb290ID0gbmV3IFJvb3RJbXBsPFg+KChUeXBlcy5FbnRpdHk8WD4p\nZW50aXR5KTsKICAgICAgICBhZGRSb290KHJvb3QpOwogICAgICAgIHJldHVy\nbiByb290OwogICAgfQoKICAgIAogICAgcHVibGljIDxYPiBSb290PFg+IGZy\nb20oQ2xhc3M8WD4gY2xzKSB7CiAgICAgICAgRW50aXR5VHlwZTxYPiBlbnRp\ndHkgPSBfbW9kZWwuZW50aXR5KGNscyk7CiAgICAgICAgaWYgKGVudGl0eSA9\nPSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50\nRXhjZXB0aW9uKF9sb2MuZ2V0KCJyb290LW5vbi1lbnRpdHkiLCBjbHMpLmdl\ndE1lc3NhZ2UoKSk7CiAgICAgICAgcmV0dXJuIGZyb20oZW50aXR5KTsKICAg\nIH0KCiAgICBwdWJsaWMgTGlzdDxFeHByZXNzaW9uPD8+PiBnZXRHcm91cExp\nc3QoKSB7CiAgICAgICAgcmV0dXJuIEV4cHJlc3Npb25zLnJldHVybkNvcHko\nX2dyb3Vwcyk7CiAgICB9CgogICAgcHVibGljIFByZWRpY2F0ZUltcGwgZ2V0\nR3JvdXBSZXN0cmljdGlvbigpIHsKICAgICAgICByZXR1cm4gX2hhdmluZzsK\nICAgIH0KCiAgICBwdWJsaWMgUHJlZGljYXRlSW1wbCBnZXRSZXN0cmljdGlv\nbigpIHsKICAgICAgICByZXR1cm4gX3doZXJlOwogICAgfQoKICAgIHB1Ymxp\nYyBTZXQ8Um9vdDw/Pj4gZ2V0Um9vdHMoKSB7CiAgICAgICAgcmV0dXJuIEV4\ncHJlc3Npb25zLnJldHVybkNvcHkoX3Jvb3RzKTsKICAgIH0KCiAgICBwdWJs\naWMgUm9vdDw/PiBnZXRSb290KCkgewogICAgICAgIGFzc2VydFJvb3QoKTsK\nICAgICAgICByZXR1cm4gX3Jvb3RzLml0ZXJhdG9yKCkubmV4dCgpOwogICAg\nfQogICAgCiAgICBSb290PD8+IGdldFJvb3QoYm9vbGVhbiBtdXN0RXhpc3Qp\nIHsKICAgICAgICBpZiAobXVzdEV4aXN0KSB7CiAgICAgICAgICAgIHJldHVy\nbiBnZXRSb290KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfcm9vdHMg\nPT0gbnVsbCB8fCBfcm9vdHMuaXNFbXB0eSgpID8gbnVsbCA6IF9yb290cy5p\ndGVyYXRvcigpLm5leHQoKTsKICAgIH0KICAgIAogICAgdm9pZCBhZGRSb290\nKFJvb3RJbXBsPD8+IHJvb3QpIHsKICAgICAgICBpZiAoX3Jvb3RzID09IG51\nbGwpIHsKICAgICAgICAgICAgX3Jvb3RzID0gbmV3IExpbmtlZEhhc2hTZXQ8\nUm9vdDw/Pj4oKTsKICAgICAgICB9CiAgICAgICAgX3Jvb3RzLmFkZChyb290\nKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBBZmZpcm1zIGlmIHNlbGVj\ndGlvbiBvZiB0aGlzIHF1ZXJ5IGlzIGRpc3RpbmN0LgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiBpc0Rpc3RpbmN0KCkgewogICAgICAgIHJldHVybiBf\nZGlzdGluY3Q7CiAgICB9CgogICAgcHVibGljIDxVPiBTdWJxdWVyeTxVPiBz\ndWJxdWVyeShDbGFzczxVPiB0eXBlKSB7CiAgICAgICAgaWYgKF9zdWJxdWVy\naWVzID09IG51bGwpCiAgICAgICAgICAgIF9zdWJxdWVyaWVzID0gbmV3IEFy\ncmF5TGlzdDxTdWJxdWVyeTw/Pj4oKTsKICAgICAgICBTdWJxdWVyeTxVPiBz\ndWJxdWVyeSA9IG5ldyBTdWJxdWVyeUltcGw8VT4odHlwZSwgdGhpcyk7CiAg\nICAgICAgX3N1YnF1ZXJpZXMuYWRkKHN1YnF1ZXJ5KTsKICAgICAgICByZXR1\ncm4gc3VicXVlcnk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0dXJu\nIG1hcCB3aGVyZSBrZXkgaXMgdGhlIHBhcmFtZXRlciBleHByZXNzaW9uIGl0\nc2VsZiBhbmQgdmFsdWUgaXMgdGhlIGV4cGVjdGVkIHR5cGUuCiAgICAgKiBF\nbXB0eSBtYXAgaWYgbm8gcGFyYW1ldGVyIGhhcyBiZWVuIGRlY2xhcmVkLiAK\nICAgICAqLwogICAgcHVibGljIE9yZGVyZWRNYXA8T2JqZWN0LCBDbGFzczw/\nPj4gZ2V0UGFyYW1ldGVyVHlwZXMoKSB7CiAgICAgICAgY29sbGVjdFBhcmFt\nZXRlcnMobmV3IENyaXRlcmlhRXhwcmVzc2lvblZpc2l0b3IuUGFyYW1ldGVy\nVmlzaXRvcih0aGlzKSk7CiAgICAgICAgcmV0dXJuIF9wYXJhbXMgPT0gbnVs\nbCA/IFN0b3JlUXVlcnkuRU1QVFlfT1JERVJFRF9QQVJBTVMgOiBfcGFyYW1z\nOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFBvcHVsYXRlIGEga2VybmVs\nIGV4cHJlc3Npb24gdHJlZSBieSB0cmFuc2xhdGluZyB0aGUgY29tcG9uZW50\ncyBvZiB0aGlzCiAgICAgKiByZWNlaXZlciB3aXRoIHRoZSBoZWxwIG9mIHRo\nZSBnaXZlbiB7QGxpbmsgRXhwcmVzc2lvbkZhY3Rvcnl9LgogICAgICovCiAg\nICBRdWVyeUV4cHJlc3Npb25zIGdldFF1ZXJ5RXhwcmVzc2lvbnMoRXhwcmVz\nc2lvbkZhY3RvcnkgZmFjdG9yeSkgewogICAgICAgIF9jb250ZXh0cyA9IG5l\ndyBTdGFjazxDb250ZXh0PigpOwogICAgICAgIENvbnRleHQgY29udGV4dCA9\nIG5ldyBDb250ZXh0KG51bGwsIG51bGwsIG51bGwpOwogICAgICAgIF9jb250\nZXh0cy5wdXNoKGNvbnRleHQpOwogICAgICAgIHJldHVybiBuZXcgQ3JpdGVy\naWFFeHByZXNzaW9uQnVpbGRlcigpLmdldFF1ZXJ5RXhwcmVzc2lvbnMoZmFj\ndG9yeSwgdGhpcyk7CiAgICB9ICAgIAogICAgCiAgICBwdWJsaWMgdm9pZCBh\nc3NlcnRSb290KCkgewogICAgICAgIGlmIChfcm9vdHMgPT0gbnVsbCB8fCBf\ncm9vdHMuaXNFbXB0eSgpKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdh\nbFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJyb290LXVuZGVmaW5lZCIpLmdl\ndE1lc3NhZ2UoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGFzc2Vy\ndFNlbGVjdGlvbigpIHsKICAgICAgICBpZiAoX3NlbGVjdGlvbiA9PSBudWxs\nICYmICFpc0RlZmF1bHRQcm9qZWN0aW9uKCkpCiAgICAgICAgICAgIHRocm93\nIG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoInNlbGVjdC11\nbmRlZmluZWQiKS5nZXRNZXNzYWdlKCkpOwogICAgfQogICAgCiAgICAvLwog\nICAgLy8gU3VicXVlcnlDb250ZXh0CiAgICAvLwogICAgdm9pZCBzZXRDb250\nZXh0cyhTdGFjazxDb250ZXh0PiBjb250ZXh0cykgewogICAgICAgIF9jb250\nZXh0cyA9IGNvbnRleHRzOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEdl\ndHMgZWl0aGVyIHRoaXMgcXVlcnkgaXRzZWxmIGlmIHRoaXMgaXMgbm90IGEg\nY2FwdGl2ZSBxdWVyeSBmb3IKICAgICAqIGEgc3VicXVlcnkuIE90aGVyd2lz\nZSBnZXRzIHRoZSBwYXJlbnQgcXVlcnkgb2YgdGhlIGRlbGVnYXRpbmcKICAg\nICAqIHN1YnF1ZXJ5LgogICAgICovCiAgICBDcml0ZXJpYVF1ZXJ5SW1wbDw/\nPiBnZXRBbmNlc3RvcigpIHsKICAgICAgICBpZiAoX2RlbGVnYXRvciA9PSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICBBYnN0cmFj\ndFF1ZXJ5PD8+IHBhcmVudCA9IF9kZWxlZ2F0b3IuZ2V0UGFyZW50KCk7CiAg\nICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIENyaXRlcmlhUXVlcnlJbXBs\nKSAKICAgICAgICAgICAgcmV0dXJuIChDcml0ZXJpYVF1ZXJ5SW1wbDw/Pilw\nYXJlbnQ7CiAgICAgICAgLy8gcGFyZW50IGlzIGEgU3VicXVlcnlJbXBsICAg\nIAogICAgICAgIHJldHVybiAoKFN1YnF1ZXJ5SW1wbDw/PilwYXJlbnQpLmdl\ndERlbGVnYXRlKCkuZ2V0QW5jZXN0b3IoKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIE1hcDxTZWxlY3Rpb248Pz4sU3RyaW5nPiBnZXRBbGlhc2VzKCkgewog\nICAgICAgIENyaXRlcmlhUXVlcnlJbXBsPD8+IGMgPSBnZXRBbmNlc3Rvcigp\nOwogICAgICAgIGlmIChjLl9hbGlhc2VzID09IG51bGwpCiAgICAgICAgICAg\nIGMuX2FsaWFzZXMgPSBuZXcgSGFzaE1hcDxTZWxlY3Rpb248Pz4sIFN0cmlu\nZz4oKTsKICAgICAgICByZXR1cm4gYy5fYWxpYXNlczsKICAgIH0KICAgIAog\nICAgLyoqCiAgICAgKiBHZXRzIHRoZSBjdXJyZW50IGNvbnRleHQuCiAgICAg\nKi8KICAgIENvbnRleHQgY3R4KCkgewogICAgICAgIHJldHVybiBfY29udGV4\ndHMucGVlaygpOwogICAgfQogICAgCiAgICAvLwogICAgLy8gQWxpYXNDb250\nZXh0IG1hbmFnZW1lbnQKICAgIC8vCiAgICAKICAgIC8qKgogICAgICogR2V0\ncyB0aGUgYWxpYXMgb2YgdGhlIGdpdmVuIG5vZGUuIENyZWF0ZXMgYW4gYXV0\nb21hdGljIGFsaWFzLCBpZiBuZWNlc3NhcnkuCiAgICAgKi8KICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0QWxpYXMoU2VsZWN0aW9uPD8+IHNlbGVjdGlvbikgewog\nICAgICAgIFN0cmluZyBhbGlhcyA9IHNlbGVjdGlvbi5nZXRBbGlhcygpOwog\nICAgICAgIGlmIChhbGlhcyAhPSBudWxsKSB7CiAgICAgICAgICAgIF9hbGlh\nc2VzLnB1dChzZWxlY3Rpb24sIGFsaWFzKTsKICAgICAgICAgICAgcmV0dXJu\nIGFsaWFzOwogICAgICAgIH0KICAgICAgICBhbGlhcyA9IEFMSUFTX0JBU0Ug\nKyAoKythbGlhc0NvdW50KTsKICAgICAgICB3aGlsZSAoX2FsaWFzZXMuY29u\ndGFpbnNWYWx1ZShhbGlhcykpCiAgICAgICAgICAgIGFsaWFzID0gQUxJQVNf\nQkFTRSArICgrK2FsaWFzQ291bnQpOwogICAgICAgICgoU2VsZWN0aW9uSW1w\nbDw/PilzZWxlY3Rpb24pLnNldEF1dG9BbGlhcyhhbGlhcyk7CiAgICAgICAg\nX2FsaWFzZXMucHV0KHNlbGVjdGlvbiwgYWxpYXMpOwogICAgICAgIHJldHVy\nbiBfYWxpYXNlcy5nZXQoc2VsZWN0aW9uKTsKICAgIH0KICAgIAogICAgLyoq\nCiAgICAgKiBSZWdpc3RlciB0aGUgZ2l2ZW4gdmFyaWFibGUgb2YgZ2l2ZW4g\ncGF0aCB2YWx1ZSBhZ2FpbnN0IHRoZSBnaXZlbiBub2RlLgogICAgICogSWYg\ndGhlIGdpdmVuIG5vZGUgaGFzIG5vIGFsaWFzIHRoZW4gYW4gYWxpYXMgaXMg\nc2V0IHRvIHRoZSBnaXZlbiBub2RlLgogICAgICogSWYgdGhlIHZhcmlhYmxl\nIG9yIHRoZSBwYXRoIGhhcyBub24tbnVsbCBhbGlhcywgdGhlbiB0aGF0IGFs\naWFzIG11c3QKICAgICAqIGJlIGVxdWFsIHRvIHRoZSBhbGlhcyBvZiB0aGUg\nZ2l2ZW4gbm9kZS4gT3RoZXJ3aXNlLCB0aGUgbm9kZSBhbGlhcyBpcyBzZXQK\nICAgICAqIG9uIHRoZSB2YXJpYWJsZSBhbmQgcGF0aC4gIAogICAgICovCiAg\nICBwdWJsaWMgdm9pZCByZWdpc3RlclZhcmlhYmxlKFNlbGVjdGlvbjw/PiBu\nb2RlLCBWYWx1ZSB2YXIsIFZhbHVlIHBhdGgpIHsKICAgICAgICBpZiAoaXNS\nZWdpc3RlcmVkKG5vZGUpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBSdW50\naW1lRXhjZXB0aW9uKG5vZGUgKyAiIGlzIGFscmVhZHkgYm91bmQiKTsKICAg\nICAgICB9CiAgICAgICAgaWYgKCF2YXIuaXNWYXJpYWJsZSgpKQogICAgICAg\nICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbih2YXIuZ2V0Q2xhc3Mo\nKSArICIgaXMgbm90IGEgdmFyaWFibGUiKTsKICAgICAgICBpZiAodmFyLmdl\ndFBhdGgoKSAhPSBwYXRoKQogICAgICAgICAgICB0aHJvdyBuZXcgUnVudGlt\nZUV4Y2VwdGlvbih2YXIgKyAiIGRvZXMgbm90IG1hdGNoIGdpdmVuICIgKyBw\nYXRoICsgIiBWYXJpYWJsZSBwYXRoIGlzICIgKyB2YXIuZ2V0UGF0aCgpKTsK\nICAgICAgICBTdHJpbmcgYWxpYXMgPSBnZXRBbGlhcyhub2RlKTsKICAgICAg\nICAKICAgICAgICBpZiAoIWFsaWFzLmVxdWFscyh2YXIuZ2V0QWxpYXMoKSkp\nIHsKICAgICAgICAgICAgaWYgKHZhci5nZXRBbGlhcygpID09IG51bGwpCiAg\nICAgICAgICAgICAgICB2YXIuc2V0QWxpYXMoYWxpYXMpOwogICAgICAgICAg\nICBlbHNlCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2Vw\ndGlvbigiVmFyaWFibGUgYWxpYXMgIiArIHZhci5nZXRBbGlhcygpICsgCiAg\nICAgICAgICAgICAgICAiIGRvZXMgbm90IG1hdGNoIGV4cGVjdGVkIHNlbGVj\ndGlvbiBhbGlhcyAiICsgYWxpYXMpOwogICAgICAgIH0KICAgICAgICBpZiAo\nIWFsaWFzLmVxdWFscyhwYXRoLmdldEFsaWFzKCkpKSB7CiAgICAgICAgICAg\nIGlmIChwYXRoLmdldEFsaWFzKCkgPT0gbnVsbCkgCiAgICAgICAgICAgICAg\nICBwYXRoLnNldEFsaWFzKGFsaWFzKTsKICAgICAgICAgICAgZWxzZQogICAg\nICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oIlBhdGgg\nYWxpYXMgIiArIHBhdGguZ2V0QWxpYXMoKSArIAogICAgICAgICAgICAgICAg\nIiBkb2VzIG5vdCBtYXRjaCBleHBlY3RlZCBzZWxlY3Rpb24gYWxpYXMgIiAr\nIGFsaWFzKTsKICAgICAgICB9CiAgICAgICAgX3ZhcmlhYmxlcy5wdXQobm9k\nZSwgdmFyKTsKICAgICAgICBfdmFsdWVzLnB1dChub2RlLCBwYXRoKTsKICAg\nICAgICBfYWxpYXNlcy5wdXQobm9kZSwgYWxpYXMpOwogICAgICAgIC8vIGFk\nZCB0byBjb250ZXh0CiAgICAgICAgY3R4KCkuYWRkU2NoZW1hKGFsaWFzLCB2\nYXIuZ2V0TWV0YURhdGEoKSk7CiAgICAgICAgY3R4KCkuYWRkVmFyaWFibGUo\nYWxpYXMsIHZhcik7CiAgICB9CiAgICAKICAgIHB1YmxpYyBib29sZWFuIGlz\nUmVnaXN0ZXJlZChTZWxlY3Rpb248Pz4gc2VsZWN0aW9uKSB7CiAgICAgICAg\naWYgKF92YXJpYWJsZXMuY29udGFpbnNLZXkoc2VsZWN0aW9uKSkKICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgU3VicXVlcnlJbXBsPD8+IGRl\nbGVnYXRvciA9IGdldERlbGVnYXRvcigpOwogICAgICAgIHJldHVybiAoZGVs\nZWdhdG9yID09IG51bGwpID8gZmFsc2UgOiBnZXREZWxlZ2F0b3JQYXJlbnQo\nKS5pc1JlZ2lzdGVyZWQoc2VsZWN0aW9uKTsKICAgIH0KCiAgICBwdWJsaWMg\nVmFsdWUgZ2V0UmVnaXN0ZXJlZFZhcmlhYmxlKFNlbGVjdGlvbjw/PiBzZWxl\nY3Rpb24pIHsKICAgICAgICBWYWx1ZSB2YXIgPSBfdmFyaWFibGVzLmdldChz\nZWxlY3Rpb24pOwogICAgICAgIGlmICh2YXIgIT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIHZhcjsKICAgICAgICBTdWJxdWVyeUltcGw8Pz4gZGVsZWdh\ndG9yID0gZ2V0RGVsZWdhdG9yKCk7CiAgICAgICAgcmV0dXJuIChkZWxlZ2F0\nb3IgPT0gbnVsbCkgPyBudWxsIDogZ2V0RGVsZWdhdG9yUGFyZW50KCkuZ2V0\nUmVnaXN0ZXJlZFZhcmlhYmxlKHNlbGVjdGlvbik7CiAgICB9CgogICAgcHVi\nbGljIFZhbHVlIGdldFJlZ2lzdGVyZWRWYWx1ZShTZWxlY3Rpb248Pz4gc2Vs\nZWN0aW9uKSB7CiAgICAgICAgVmFsdWUgdmFsID0gX3ZhbHVlcy5nZXQoc2Vs\nZWN0aW9uKTsKICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAg\nIHJldHVybiB2YWw7CiAgICAgICAgU3VicXVlcnlJbXBsPD8+IGRlbGVnYXRv\nciA9IGdldERlbGVnYXRvcigpOwogICAgICAgIHJldHVybiAoZGVsZWdhdG9y\nID09IG51bGwpID8gbnVsbCA6IGdldERlbGVnYXRvclBhcmVudCgpLmdldFJl\nZ2lzdGVyZWRWYWx1ZShzZWxlY3Rpb24pOwogICAgfQoKICAgIC8qKgogICAg\nICogUmVnaXN0ZXJzIGEgdmFyaWFibGUgZm9yIHRoZSBnaXZlbiByb290IGV4\ncHJlc3Npb24uCiAgICAgKiBBIHJvb3QgZXhwcmVzc2lvbiBpcyByZWdpc3Rl\ncmVkIG9ubHkgZm9yIGNyb3NzIGpvaW4uICAKICAgICAqIEBwYXJhbSByb290\nCiAgICAgKiBAcGFyYW0gdmFyCiAgICAgKi8KICAgIHZvaWQgcmVnaXN0ZXJS\nb290KFJvb3Q8Pz4gcm9vdCwgVmFsdWUgdmFyKSB7CiAgICAgICAgaWYgKHZh\nciA9PSBudWxsIHx8ICF2YXIuaXNWYXJpYWJsZSgpKQogICAgICAgICAgICB0\naHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJBdHRlbXB0IHRv\nIHJlZ2lzdGVyIG5vbi12YXJpYWJsZSAiICsgdmFyKTsKICAgICAgICBfcm9v\ndFZhcmlhYmxlcy5wdXQocm9vdCwgdmFyKTsKICAgICAgICBTdHJpbmcgYWxp\nYXMgPSB2YXIuZ2V0TmFtZSgpOwogICAgICAgIGN0eCgpLmFkZFNjaGVtYShh\nbGlhcywgdmFyLmdldE1ldGFEYXRhKCkpOwogICAgICAgIGN0eCgpLmFkZFZh\ncmlhYmxlKGFsaWFzLCB2YXIpOwogICAgfQogICAgCiAgICAvKioKICAgICAq\nIEdldHMgdGhlIHJlZ2lzdGVyZWQgdmFyaWFibGUgZm9yIHRoZSBnaXZlbiBy\nb290LiAKICAgICAqLwogICAgcHVibGljIFZhbHVlIGdldFJlZ2lzdGVyZWRS\nb290VmFyaWFibGUoUm9vdDw/PiByb290KSB7CiAgICAgICAgVmFsdWUgdmFy\nID0gX3Jvb3RWYXJpYWJsZXMuZ2V0KHJvb3QpOwogICAgICAgIGlmICh2YXIg\nIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHZhcjsKICAgICAgICBTdWJx\ndWVyeUltcGw8Pz4gZGVsZWdhdG9yID0gZ2V0RGVsZWdhdG9yKCk7CiAgICAg\nICAgcmV0dXJuIChkZWxlZ2F0b3IgPT0gbnVsbCkgPyBudWxsIDogZ2V0RGVs\nZWdhdG9yUGFyZW50KCkuZ2V0UmVnaXN0ZXJlZFJvb3RWYXJpYWJsZShyb290\nKTsKICAgIH0KICAgIAogICAgQ3JpdGVyaWFRdWVyeUltcGw8Pz4gZ2V0RGVs\nZWdhdG9yUGFyZW50KCkgewogICAgICAgIEFic3RyYWN0UXVlcnk8Pz4gcGFy\nZW50ID0gX2RlbGVnYXRvci5nZXRQYXJlbnQoKTsKICAgICAgICBpZiAocGFy\nZW50IGluc3RhbmNlb2YgQ3JpdGVyaWFRdWVyeUltcGwpIAogICAgICAgICAg\nICByZXR1cm4gKChDcml0ZXJpYVF1ZXJ5SW1wbDw/PilwYXJlbnQpOwogICAg\nICAgIC8vIHBhcmVudCBpcyBhIFN1YnF1ZXJ5SW1wbCAgICAKICAgICAgICBy\nZXR1cm4gKChTdWJxdWVyeUltcGw8Pz4pcGFyZW50KS5nZXREZWxlZ2F0ZSgp\nOwogICAgfQogICAgCiAgICBwdWJsaWMgQ2xhc3M8VD4gZ2V0UmVzdWx0VHlw\nZSgpIHsKICAgICAgICByZXR1cm4gX3Jlc3VsdENsYXNzOwogICAgfQoKICAg\nIHB1YmxpYyBDcml0ZXJpYVF1ZXJ5PFQ+IG11bHRpc2VsZWN0KExpc3Q8U2Vs\nZWN0aW9uPD8+PiBsaXN0KSB7CiAgICAgICAgcmV0dXJuIG11bHRpc2VsZWN0\nKGxpc3QudG9BcnJheShuZXcgU2VsZWN0aW9uPD8+W2xpc3Quc2l6ZSgpXSkp\nOwogICAgfQogICAgCiAgICBib29sZWFuIGlzTXVsdGlzZWxlY3QoKSB7CiAg\nICAgICAgcmV0dXJuIF9zZWxlY3Rpb24gaW5zdGFuY2VvZiBDb21wb3VuZFNl\nbGVjdGlvbnMuTXVsdGlTZWxlY3Rpb247CiAgICB9CiAgICAKICAgIHByb3Rl\nY3RlZCBib29sZWFuIGlzRGVmYXVsdFByb2plY3Rpb24oKSB7CiAgICAgICAg\naWYgKF9zZWxlY3Rpb25zID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJu\nIGdldFJvb3RzKCkuc2l6ZSgpID09IDEgCiAgICAgICAgICAgICAgICYmIChn\nZXRSb290KCkuZ2V0TW9kZWwoKS5nZXRKYXZhVHlwZSgpID09IF9yZXN1bHRD\nbGFzcyB8fAogICAgICAgICAgICAgICAgICAgX3Jlc3VsdENsYXNzID09IE9i\namVjdC5jbGFzcyk7CiAgICAgICAgfSAKICAgICAgICBpZiAoX3NlbGVjdGlv\nbnMuc2l6ZSgpICE9IDEpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgIH0KICAgICAgICBTZWxlY3Rpb248Pz4gc2VsID0gX3NlbGVjdGlv\nbnMuZ2V0KDApOwogICAgICAgIGlmICghZ2V0Um9vdHMoKS5pc0VtcHR5KCkg\nJiYgc2VsID09IGdldFJvb3QoKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICB9CiAgICAgICAgaWYgKChzZWwgaW5zdGFuY2VvZiBGcm9t\nPD8sPz4pICYmICgoRnJvbTw/LD8+KXNlbCkuaXNDb3JyZWxhdGVkKCkpIHsK\nICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJl\ndHVybiBmYWxzZTsKICAgIH0KICAgIAogICAgdm9pZCBpbnZhbGlkYXRlQ29t\ncGlsYXRpb24oKSB7CiAgICAgICAgX2NvbXBpbGVkID0gZmFsc2U7CiAgICAg\nICAgX3BhcmFtcyAgID0gbnVsbDsKICAgIH0KICAgIAogICAgLyoqCiAgICAg\nKiBDb21waWxlcyB0byB2ZXJpZnkgdGhhdCBhdCBsZWFzdCBvbmUgcm9vdCBp\ncyBkZWZpbmVkLCBhIHNlbGVjdGlvbiB0ZXJtIGlzIHByZXNlbnQKICAgICAq\nIGFuZCwgbW9zdCBpbXBvcnRhbnRseSwgY29sbGVjdHMgYWxsIHRoZSBwYXJh\nbWV0ZXJzIHNvIHRoYXQgdGhleSBjYW4gYmUgYm91bmQgdG8KICAgICAqIHRo\nZSBleGVjdXRhYmxlIHF1ZXJ5LiAKICAgICAqLwogICAgcHVibGljIE9wZW5K\nUEFDcml0ZXJpYVF1ZXJ5PFQ+IGNvbXBpbGUoKSB7CiAgICAgICAgaWYgKF9j\nb21waWxlZCkKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgYXNz\nZXJ0Um9vdCgpOwogICAgICAgIGFzc2VydFNlbGVjdGlvbigpOwogICAgICAg\nIGNvbGxlY3RQYXJhbWV0ZXJzKG5ldyBDcml0ZXJpYUV4cHJlc3Npb25WaXNp\ndG9yLlBhcmFtZXRlclZpc2l0b3IodGhpcykpOwogICAgICAgIF9jb21waWxl\nZCA9IHRydWU7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAKICAg\nIHByaXZhdGUgdm9pZCBjb2xsZWN0UGFyYW1ldGVycyhDcml0ZXJpYUV4cHJl\nc3Npb25WaXNpdG9yIHZpc2l0b3IpIHsKICAgICAgICBpZiAoX2NvbXBpbGVk\nKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKF93aGVyZSAhPSBu\ndWxsKSB7CiAgICAgICAgICAgIF93aGVyZS5hY2NlcHRWaXNpdCh2aXNpdG9y\nKTsKICAgICAgICB9CiAgICAgICAgaWYgKF9oYXZpbmcgIT0gbnVsbCkgewog\nICAgICAgICAgICBfaGF2aW5nLmFjY2VwdFZpc2l0KHZpc2l0b3IpOwogICAg\nICAgIH0KICAgICAgICAKICAgICAgICBpZiAoX3N1YnF1ZXJpZXMgIT0gbnVs\nbCkgewogICAgICAgICAgICBmb3IgKFN1YnF1ZXJ5PD8+IHN1YnEgOiBfc3Vi\ncXVlcmllcykgewogICAgICAgICAgICAgICAgKChTdWJxdWVyeUltcGw8Pz4p\nc3VicSkuZ2V0RGVsZWdhdGUoKS5jb2xsZWN0UGFyYW1ldGVycyh2aXNpdG9y\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoq\nCiAgICAgKiBHZXRzIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhl\nIHF1ZXJ5LgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIHRvQ1FMKCkgewog\nICAgICAgIFN0cmluZ0J1aWxkZXIgYnVmZmVyID0gbmV3IFN0cmluZ0J1aWxk\nZXIoKTsKICAgICAgICByZW5kZXIoYnVmZmVyLCBfcm9vdHMsIG51bGwpOwog\nICAgICAgIHJldHVybiBidWZmZXIudG9TdHJpbmcoKS50cmltKCk7CiAgICB9\nCiAgICAKICAgIHZvaWQgcmVuZGVyKFN0cmluZ0J1aWxkZXIgYnVmZmVyLCBT\nZXQ8Um9vdDw/Pj4gcm9vdHMsIExpc3Q8Sm9pbjw/LD8+PiBjb3JyZWxhdGVk\nSm9pbnMpIHsKICAgICAgICBidWZmZXIuYXBwZW5kKCJTRUxFQ1QgIik7CiAg\nICAgICAgaWYgKGlzRGlzdGluY3QoKSkgYnVmZmVyLmFwcGVuZCgiIERJU1RJ\nTkNUICIpOwogICAgICAgIGJ1ZmZlci5hcHBlbmQoX3NlbGVjdGlvbiAhPSBu\ndWxsID8gKChDcml0ZXJpYUV4cHJlc3Npb24pX3NlbGVjdGlvbikuYXNQcm9q\nZWN0aW9uKHRoaXMpIDogIioiKTsKICAgICAgICBidWZmZXIuYXBwZW5kKCIg\nRlJPTSAiKTsKICAgICAgICByZW5kZXJSb290cyhidWZmZXIsIHJvb3RzKTsK\nICAgICAgICByZW5kZXJKb2lucyhidWZmZXIsIGNvcnJlbGF0ZWRKb2lucyk7\nCiAgICAgICAgaWYgKF93aGVyZSAhPSBudWxsKSB7CiAgICAgICAgICAgIGJ1\nZmZlci5hcHBlbmQoIiBXSEVSRSAiKS5hcHBlbmQoX3doZXJlLmFzVmFsdWUo\ndGhpcykpOwogICAgICAgIH0KICAgICAgICBpZiAoX29yZGVycyAhPSBudWxs\nKSB7CiAgICAgICAgICAgIGJ1ZmZlci5hcHBlbmQoIiBPUkRFUiBCWSAiKTsK\nICAgICAgICAgICAgZm9yIChPcmRlciBvcmRlckJ5IDogZ2V0T3JkZXJMaXN0\nKCkpIHsKICAgICAgICAgICAgICAgIGJ1ZmZlci5hcHBlbmQoKChDcml0ZXJp\nYUV4cHJlc3Npb24pb3JkZXJCeSkuYXNWYWx1ZSh0aGlzKSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKF9ncm91cHMgIT0gbnVsbCkg\newogICAgICAgICAgICBidWZmZXIuYXBwZW5kKCIgR1JPVVAgQlkgIik7CiAg\nICAgICAgICAgIGZvciAoRXhwcmVzc2lvbjw/PiBncm91cEJ5IDogZ2V0R3Jv\ndXBMaXN0KCkpIHsKICAgICAgICAgICAgICAgIGJ1ZmZlci5hcHBlbmQoKChD\ncml0ZXJpYUV4cHJlc3Npb24pZ3JvdXBCeSkuYXNWYWx1ZSh0aGlzKSk7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKF9oYXZpbmcgIT0g\nbnVsbCkgewogICAgICAgICAgICBidWZmZXIuYXBwZW5kKCIgSEFWSU5HICIp\nOwogICAgICAgICAgICBidWZmZXIuYXBwZW5kKF9oYXZpbmcuYXNWYWx1ZSh0\naGlzKSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQg\ncmVuZGVySm9pbnMoU3RyaW5nQnVpbGRlciBidWZmZXIsIENvbGxlY3Rpb248\nSm9pbjw/LD8+PiBqb2lucykgewogICAgICAgIGlmIChqb2lucyA9PSBudWxs\nKSByZXR1cm47CiAgICAgICAgZm9yIChKb2luIGogOiBqb2lucykgewogICAg\nICAgICAgICBidWZmZXIuYXBwZW5kKCgoQ3JpdGVyaWFFeHByZXNzaW9uKWop\nLmFzVmFyaWFibGUodGhpcykpLmFwcGVuZCgiICIpOwogICAgICAgICAgICBy\nZW5kZXJKb2lucyhidWZmZXIsIGouZ2V0Sm9pbnMoKSk7CiAgICAgICAgICAg\nIHJlbmRlckZldGNoZXMoYnVmZmVyLCBqLmdldEZldGNoZXMoKSk7CiAgICAg\nICAgfQogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgcmVuZGVyUm9vdHMo\nU3RyaW5nQnVpbGRlciBidWZmZXIsIENvbGxlY3Rpb248Um9vdDw/Pj4gcm9v\ndHMpIHsKICAgICAgICBpZiAocm9vdHMgPT0gbnVsbCkgcmV0dXJuOwogICAg\nICAgIGludCBpID0gMDsKICAgICAgICBmb3IgKFJvb3QgciA6IHJvb3RzKSB7\nCiAgICAgICAgICAgIGJ1ZmZlci5hcHBlbmQoKChFeHByZXNzaW9uSW1wbDw/\nPilyKS5hc1ZhcmlhYmxlKHRoaXMpKTsKICAgICAgICAgICAgaWYgKCsraSAh\nPSByb290cy5zaXplKCkpIGJ1ZmZlci5hcHBlbmQoIiwgIik7CiAgICAgICAg\nICAgIHJlbmRlckpvaW5zKGJ1ZmZlciwgci5nZXRKb2lucygpKTsKICAgICAg\nICAgICAgcmVuZGVyRmV0Y2hlcyhidWZmZXIsIHIuZ2V0RmV0Y2hlcygpKTsK\nICAgICAgICB9CiAgICB9CiAgICBwcml2YXRlIHZvaWQgcmVuZGVyRmV0Y2hl\ncyhTdHJpbmdCdWlsZGVyIGJ1ZmZlciwgU2V0PEZldGNoPiBmZXRjaGVzKSB7\nCiAgICAgICAgaWYgKGZldGNoZXMgPT0gbnVsbCkgcmV0dXJuOwogICAgICAg\nIGZvciAoRmV0Y2ggaiA6IGZldGNoZXMpIHsKICAgICAgICAgICAgYnVmZmVy\nLmFwcGVuZCgoKEV4cHJlc3Npb25JbXBsPD8+KWopLmFzVmFsdWUodGhpcykp\nLmFwcGVuZCgiICIpOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

