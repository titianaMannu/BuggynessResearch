{"sha":"957f96becc2f1732cdd90c3035932fc833a5d189","node_id":"MDQ6QmxvYjIwNjM2NDo5NTdmOTZiZWNjMmYxNzMyY2RkOTBjMzAzNTkzMmZjODMzYTVkMTg5","size":10608,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/957f96becc2f1732cdd90c3035932fc833a5d189","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWE7\nCgppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CgppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuY3JpdGVyaWEuQ29sbGVjdGlvbkpvaW47CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5GZXRjaDsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLmNyaXRlcmlhLkZyb207CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5jcml0ZXJpYS5Kb2luOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nY3JpdGVyaWEuSm9pblR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5j\ncml0ZXJpYS5MaXN0Sm9pbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNy\naXRlcmlhLk1hcEpvaW47CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0\nZXJpYS5TZXRKb2luOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0YW1v\nZGVsLkF0dHJpYnV0ZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLm1ldGFt\nb2RlbC5Db2xsZWN0aW9uQXR0cmlidXRlOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UubWV0YW1vZGVsLkxpc3RBdHRyaWJ1dGU7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5tZXRhbW9kZWwuTWFuYWdlZFR5cGU7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuTWFwQXR0cmlidXRlOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLlBsdXJhbEF0dHJpYnV0ZTsK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5TZXRBdHRyaWJ1\ndGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuU2luZ3Vs\nYXJBdHRyaWJ1dGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9k\nZWwuVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5U\neXBlLlBlcnNpc3RlbmNlVHlwZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UubWV0YS5BYnN0cmFjdE1hbmFnZWRUeXBlOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLm1ldGEuTWVtYmVy\nczsKCi8qKgogKiBSZXByZXNlbnRzIGEgYm91bmQgdHlwZSwgdXN1YWxseSBh\nbiBlbnRpdHkgdGhhdCBhcHBlYXJzIGluIHRoZSBmcm9tIGNsYXVzZSwgCiAq\nIGJ1dCBtYXkgYWxzbyBiZSBhbiBlbWJlZGRhYmxlIGJlbG9uZ2luZyB0byBh\nbiBlbnRpdHkgaW4gdGhlIGZyb20gY2xhdXNlLiAKICogU2VydmVzIGFzIGEg\nZmFjdG9yeSBmb3IgSm9pbnMgb2YgYXNzb2NpYXRpb25zLCBlbWJlZGRhYmxl\ncyBhbmQgY29sbGVjdGlvbnMgCiAqIGJlbG9uZ2luZyB0byB0aGUgdHlwZSwg\nYW5kIGZvciBQYXRocyBvZiBhdHRyaWJ1dGVzIGJlbG9uZ2luZyB0byB0aGUg\ndHlwZS4KICogCiAqIEBwYXJhbSA8Wj4gdGhlIHBhcmVudCB0eXBlIG9mIHRo\naXMgcmVjZWl2ZXIKICogQHBhcmFtIDxYPiB0aGUgdHlwZSByZXByZXNlbnRl\nZCBieSB0aGlzIHJlY2VpdmVyIAogKi8KCmNsYXNzIEZyb21JbXBsPFosWD4g\nZXh0ZW5kcyBQYXRoSW1wbDxaLFg+IGltcGxlbWVudHMgRnJvbTxaLFg+IHsK\nICAgIHByaXZhdGUgamF2YS51dGlsLlNldDxKb2luPFgsID8+PiBfam9pbnM7\nCiAgICBwcml2YXRlIGphdmEudXRpbC5TZXQ8RmV0Y2g8WCwgPz4+IF9mZXRj\naGVzOwogICAgcHJpdmF0ZSBUeXBlPFg+IHR5cGU7CiAgICAKICAgIC8qKgog\nICAgICogU3VwcGx5IHRoZSBub24tbnVsbCBtYW5hZ2VkIHR5cGUuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBGcm9tSW1wbChBYnN0cmFjdE1hbmFnZWRUeXBl\nPFg+IHR5cGUpIHsKICAgICAgICBzdXBlcih0eXBlLmdldEphdmFUeXBlKCkp\nOwogICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB9CiAgICAKICAgIHBy\nb3RlY3RlZCBGcm9tSW1wbChQYXRoSW1wbDw/LFo+IHBhcmVudCwgTWVtYmVy\ncy5NZW1iZXI8PyBzdXBlciBaLCA/PiBtLCBDbGFzczxYPiB4KSB7CiAgICAg\nICAgc3VwZXIocGFyZW50LCBtLCB4KTsKICAgICAgICB0aGlzLnR5cGUgPSAo\nVHlwZTxYPiltLmdldFR5cGUoKTsKICAgIH0KICAgIAogICAgQE92ZXJyaWRl\nCiAgICBwdWJsaWMgVHlwZTw/PiBnZXRUeXBlKCkgewogICAgICAgIHJldHVy\nbiB0eXBlOwogICAgfQogICAgCiAgICAvKioKICAgICAqICBSZXR1cm4gdGhl\nIGpvaW5zIHRoYXQgaGF2ZSBiZWVuIG1hZGUgZnJvbSB0aGlzIHJlY2VpdmVy\nLgogICAgICovCiAgICBwdWJsaWMgamF2YS51dGlsLlNldDxKb2luPFgsID8+\nPiBnZXRKb2lucygpIHsKICAgICAgICByZXR1cm4gRXhwcmVzc2lvbnMucmV0\ndXJuQ29weShfam9pbnMpOwogICAgfQoKICAgIC8qKgogICAgICogIEpvaW4g\ndG8gdGhlIGdpdmVuIGF0dHJpYnV0ZSB1c2luZyBhbiBpbm5lciBqb2luLgog\nICAgICovCiAgICBwdWJsaWMgPFk+IEpvaW48WCwgWT4gam9pbihTaW5ndWxh\nckF0dHJpYnV0ZTw/IHN1cGVyIFgsIFk+IGF0dHJpYnV0ZSkgewogICAgICAg\nIHJldHVybiBqb2luKGF0dHJpYnV0ZSwgSm9pblR5cGUuSU5ORVIpOwogICAg\nfQoKICAgIC8qKgogICAgICogIEpvaW4gdG8gdGhlIGdpdmVuIGF0dHJpYnV0\nZSB1c2luZyB0aGUgZ2l2ZW4gam9pbiB0eXBlLgogICAgICovCiAgICBwdWJs\naWMgPFk+IEpvaW48WCwgWT4gam9pbihTaW5ndWxhckF0dHJpYnV0ZTw/IHN1\ncGVyIFgsIFk+IGF0dHJpYnV0ZSwgSm9pblR5cGUganQpIHsKICAgICAgICBK\nb2luPFgsIFk+IGpvaW4gPSBuZXcgSm9pbnMuU2luZ3VsYXJKb2luPFgsWT4o\ndGhpcywgCiAgICAgICAgICAgICAgICAoTWVtYmVycy5TaW5ndWxhckF0dHJp\nYnV0ZUltcGw8PyBzdXBlciBYLCBZPikgYXR0cmlidXRlLCBqdCk7CiAgICAg\nICAgYWRkSm9pbihqb2luKTsKICAgICAgICAKICAgICAgICByZXR1cm4gam9p\nbjsKICAgIH0KCiAgICAvKioKICAgICAqICBKb2luIHRvIHRoZSBnaXZlbiBD\nb2xsZWN0aW9uLXZhbHVlZCBhdHRyaWJ1dGUgdXNpbmcgYW4gaW5uZXIgam9p\nbi4KICAgICAqLwogICAgcHVibGljIDxZPiBDb2xsZWN0aW9uSm9pbjxYLCBZ\nPiBqb2luKENvbGxlY3Rpb25BdHRyaWJ1dGU8PyBzdXBlciBYLCBZPiBjb2xs\nZWN0aW9uKSB7CiAgICAgICAgcmV0dXJuIGpvaW4oY29sbGVjdGlvbiwgSm9p\nblR5cGUuSU5ORVIpOwogICAgfQoKICAgIC8qKgogICAgICogIEpvaW4gdG8g\ndGhlIGdpdmVuIENvbGxlY3Rpb24tdmFsdWVkIGF0dHJpYnV0ZSB1c2luZyB0\naGUgZ2l2ZW4gCiAgICAgKiAgam9pbiB0eXBlLgogICAgICovCiAgICBwdWJs\naWMgPFk+IENvbGxlY3Rpb25Kb2luPFgsIFk+IGpvaW4oQ29sbGVjdGlvbkF0\ndHJpYnV0ZTw/IHN1cGVyIFgsIFk+IGNvbGxlY3Rpb24sIAogICAgICAgIEpv\naW5UeXBlIGp0KSB7CiAgICAgICAgQ29sbGVjdGlvbkpvaW48WCwgWT4gam9p\nbiA9IG5ldyBKb2lucy5Db2xsZWN0aW9uPFgsIFk+KHRoaXMsIAogICAgICAg\nICAgICAgKE1lbWJlcnMuQ29sbGVjdGlvbkF0dHJpYnV0ZUltcGw8PyBzdXBl\nciBYLCBZPiljb2xsZWN0aW9uLCBqdCk7CiAgICAgICAgYWRkSm9pbihqb2lu\nKTsKICAgICAgICAgCiAgICAgICAgIHJldHVybiBqb2luOwogICAgfQoKICAg\nIC8qKgogICAgICogIEpvaW4gdG8gdGhlIGdpdmVuIFNldC12YWx1ZWQgYXR0\ncmlidXRlIHVzaW5nIGFuIGlubmVyIGpvaW4uCiAgICAgKi8KICAgIHB1Ymxp\nYyA8WT4gU2V0Sm9pbjxYLFk+IGpvaW4oU2V0QXR0cmlidXRlPD8gc3VwZXIg\nWCwgWT4gc2V0KSB7CiAgICAgICAgcmV0dXJuIGpvaW4oc2V0LCBKb2luVHlw\nZS5JTk5FUik7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogIEpvaW4gdG8g\ndGhlIGdpdmVuIFNldC12YWx1ZWQgYXR0cmlidXRlIHVzaW5nIHRoZSBnaXZl\nbiBqb2luIHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyA8WT4gU2V0Sm9pbjxY\nLFk+IGpvaW4oU2V0QXR0cmlidXRlPD8gc3VwZXIgWCwgWT4gc2V0LCBKb2lu\nVHlwZSBqdCkgewogICAgICAgIFNldEpvaW48WCwgWT4gam9pbiA9IG5ldyBK\nb2lucy5TZXQ8WCwgWT4odGhpcywgKE1lbWJlcnMuU2V0QXR0cmlidXRlSW1w\nbDw/IHN1cGVyIFgsIFk+KXNldCwganQpOwogICAgICAgIGFkZEpvaW4oam9p\nbik7ICAgIAogICAgICAgIHJldHVybiBqb2luOwogICAgfQoKICAgIC8qKgog\nICAgICogIEpvaW4gdG8gdGhlIGdpdmVuIExpc3QtdmFsdWVkIGF0dHJpYnV0\nZSB1c2luZyBhbiBpbm5lciBqb2luLgogICAgICovCiAgICBwdWJsaWMgPFk+\nIExpc3RKb2luPFgsWT4gam9pbihMaXN0QXR0cmlidXRlPD8gc3VwZXIgWCwg\nWT4gbGlzdCkgewogICAgICAgIHJldHVybiBqb2luKGxpc3QsIEpvaW5UeXBl\nLklOTkVSKTsKICAgIH0KCiAgICAvKioKICAgICAqICBKb2luIHRvIHRoZSBn\naXZlbiBMaXN0LXZhbHVlZCBhdHRyaWJ1dGUgdXNpbmcgdGhlIGdpdmVuIGpv\naW4gdHlwZS4KICAgICAqLwogICAgcHVibGljIDxZPiBMaXN0Sm9pbjxYLFk+\nIGpvaW4oTGlzdEF0dHJpYnV0ZTw/IHN1cGVyIFgsIFk+IGxpc3QsIEpvaW5U\neXBlIGp0KSB7CiAgICAgICAgTGlzdEpvaW48WCwgWT4gam9pbiA9IG5ldyBK\nb2lucy5MaXN0PFgsIFk+KHRoaXMsIChNZW1iZXJzLkxpc3RBdHRyaWJ1dGVJ\nbXBsPD8gc3VwZXIgWCwgWT4pbGlzdCwganQpOwogICAgICAgIGFkZEpvaW4o\nam9pbik7ICAgIAogICAgICAgIHJldHVybiBqb2luOwogICAgfQogICAgCiAg\nICAvKioKICAgICAqICBKb2luIHRvIHRoZSBnaXZlbiBNYXAtdmFsdWVkIGF0\ndHJpYnV0ZSB1c2luZyBhbiBpbm5lciBqb2luLgogICAgICovCiAgICBwdWJs\naWMgPEssVj4gTWFwSm9pbjxYLEssVj4gam9pbihNYXBBdHRyaWJ1dGU8PyBz\ndXBlciBYLEssVj4gbWFwKSB7CiAgICAgICAgcmV0dXJuIGpvaW4obWFwLCBK\nb2luVHlwZS5JTk5FUik7CiAgICB9CgogICAgLyoqCiAgICAgKiAgSm9pbiB0\nbyB0aGUgZ2l2ZW4gTWFwLXZhbHVlZCBhdHRyaWJ1dGUgdXNpbmcgdGhlIGdp\ndmVuIGpvaW4gdHlwZS4KICAgICAqLwogICAgcHVibGljIDxLLFY+IE1hcEpv\naW48WCxLLFY+IGpvaW4oTWFwQXR0cmlidXRlPD8gc3VwZXIgWCxLLFY+IG1h\ncCwgSm9pblR5cGUganQpIHsKICAgICAgICBNYXBKb2luPFgsSyxWPiBqb2lu\nID0gbmV3IEpvaW5zLk1hcDxYLEssVj4odGhpcywgKE1lbWJlcnMuTWFwQXR0\ncmlidXRlSW1wbDw/IHN1cGVyIFgsSyxWPiltYXAsIGp0KTsKICAgICAgICBh\nZGRKb2luKGpvaW4pOyAgICAKICAgICAgICByZXR1cm4gam9pbjsKICAgIH0K\nICAgIAogICAgLy8gU3RyaW5nIGJhc2VkIGNvdW50ZXJwYXJ0cwoKICAgIHB1\nYmxpYyA8VyxZPiBKb2luPFcsWT4gam9pbihTdHJpbmcgYXR0cikgewogICAg\nICAgIHJldHVybiBqb2luKGF0dHIsIEpvaW5UeXBlLklOTkVSKTsKICAgIH0K\nCiAgICBwdWJsaWMgPFcsWT4gSm9pbjxXLFk+IGpvaW4oU3RyaW5nIG5hbWUs\nIEpvaW5UeXBlIGp0KSB7CiAgICAgICAgYXNzZXJ0Sm9pbmFibGUodHlwZSk7\nCiAgICAgICAgTWFuYWdlZFR5cGU8WD4gbVR5cGUgPSAoTWFuYWdlZFR5cGU8\nWD4pdHlwZTsKICAgICAgICBBdHRyaWJ1dGU8PywgPz4gYXR0ciA9IG1UeXBl\nLmdldEF0dHJpYnV0ZShuYW1lKTsKICAgICAgICBhc3NlcnRKb2luYWJsZShh\ndHRyLmdldERlY2xhcmluZ1R5cGUoKSk7CiAgICAgICAgaWYgKGF0dHIgaW5z\ndGFuY2VvZiBTaW5ndWxhckF0dHJpYnV0ZSkgewogICAgICAgICAgICByZXR1\ncm4gam9pbigoU2luZ3VsYXJBdHRyaWJ1dGUpYXR0ciwganQpOwogICAgICAg\nIH0gZWxzZSBpZiAoYXR0ciBpbnN0YW5jZW9mIExpc3RBdHRyaWJ1dGUpIHsK\nICAgICAgICAgICAgcmV0dXJuIGpvaW4oKExpc3RBdHRyaWJ1dGUpYXR0ciwg\nanQpOwogICAgICAgIH0gZWxzZSBpZiAoYXR0ciBpbnN0YW5jZW9mIFNldEF0\ndHJpYnV0ZSkgewogICAgICAgICAgICByZXR1cm4gam9pbigoU2V0QXR0cmli\ndXRlKWF0dHIsIGp0KTsKICAgICAgICB9IGVsc2UgaWYgKGF0dHIgaW5zdGFu\nY2VvZiBDb2xsZWN0aW9uQXR0cmlidXRlKSB7CiAgICAgICAgICAgIHJldHVy\nbiBqb2luKChDb2xsZWN0aW9uQXR0cmlidXRlKWF0dHIsIGp0KTsKICAgICAg\nICB9IGVsc2UgaWYgKGF0dHIgaW5zdGFuY2VvZiBNYXBBdHRyaWJ1dGUpIHsK\nICAgICAgICAgICAgcmV0dXJuIGpvaW4oKE1hcEF0dHJpYnV0ZSlhdHRyLCBq\ndCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihuYW1lKTsKICAgICAgICB9CiAgICB9\nCgoKICAgIHB1YmxpYyA8VyxZPiBDb2xsZWN0aW9uSm9pbjxXLCBZPiBqb2lu\nQ29sbGVjdGlvbihTdHJpbmcgYXR0cikgewogICAgICAgIGFzc2VydEpvaW5h\nYmxlKHR5cGUpOwogICAgICAgIHJldHVybiAoQ29sbGVjdGlvbkpvaW48VyxZ\nPilqb2luKCgoTWFuYWdlZFR5cGU8WD4pdHlwZSkuZ2V0Q29sbGVjdGlvbihh\ndHRyKSwgSm9pblR5cGUuSU5ORVIpOwogICAgfQoKICAgIHB1YmxpYyA8VyxZ\nPiBDb2xsZWN0aW9uSm9pbjxXLCBZPiBqb2luQ29sbGVjdGlvbihTdHJpbmcg\nYXR0ciwgSm9pblR5cGUganQpIHsKICAgICAgICBhc3NlcnRKb2luYWJsZSh0\neXBlKTsKICAgICAgICByZXR1cm4gKENvbGxlY3Rpb25Kb2luPFcsWT4pam9p\nbigoKE1hbmFnZWRUeXBlPFg+KXR5cGUpLmdldENvbGxlY3Rpb24oYXR0ciks\nIGp0KTsKICAgIH0KCiAgICBwdWJsaWMgPFcsWT4gTGlzdEpvaW48VywgWT4g\nam9pbkxpc3QoU3RyaW5nIGF0dHIpIHsKICAgICAgICBhc3NlcnRKb2luYWJs\nZSh0eXBlKTsKICAgICAgICByZXR1cm4gKExpc3RKb2luPFcsWT4pam9pbigo\nKE1hbmFnZWRUeXBlPFg+KXR5cGUpLmdldExpc3QoYXR0ciksIEpvaW5UeXBl\nLklOTkVSKTsKICAgIH0KCiAgICBwdWJsaWMgPFcsWT4gTGlzdEpvaW48VyxZ\nPiBqb2luTGlzdChTdHJpbmcgYXR0ciwgSm9pblR5cGUganQpIHsKICAgICAg\nICBhc3NlcnRKb2luYWJsZSh0eXBlKTsKICAgICAgICByZXR1cm4gKExpc3RK\nb2luPFcsWT4pam9pbigoKE1hbmFnZWRUeXBlPFg+KXR5cGUpLmdldExpc3Qo\nYXR0ciksIGp0KTsKICAgIH0KCiAgICBwdWJsaWMgPFcsSyxWPiBNYXBKb2lu\nPFcsSyxWPiBqb2luTWFwKFN0cmluZyBhdHRyKSB7CiAgICAgICAgYXNzZXJ0\nSm9pbmFibGUodHlwZSk7CiAgICAgICAgcmV0dXJuIChNYXBKb2luPFcsSyxW\nPilqb2luKCgoTWFuYWdlZFR5cGU8WD4pdHlwZSkuZ2V0TWFwKGF0dHIpKTsK\nICAgIH0KCiAgICBwdWJsaWMgPFcsSyxWPiBNYXBKb2luPFcsSyxWPiAgam9p\nbk1hcChTdHJpbmcgYXR0ciwgSm9pblR5cGUganQpIHsKICAgICAgICBhc3Nl\ncnRKb2luYWJsZSh0eXBlKTsKICAgICAgICByZXR1cm4gKE1hcEpvaW48VyxL\nLFY+KWpvaW4oKChNYW5hZ2VkVHlwZTxYPil0eXBlKS5nZXRNYXAoYXR0cikp\nOwogICAgfQoKICAgIHB1YmxpYyA8VyxZPiBTZXRKb2luPFcsIFk+ICBqb2lu\nU2V0KFN0cmluZyBhdHRyKSB7CiAgICAgICAgYXNzZXJ0Sm9pbmFibGUodHlw\nZSk7CiAgICAgICAgcmV0dXJuIChTZXRKb2luPFcsIFk+KWpvaW4oKChNYW5h\nZ2VkVHlwZTxYPil0eXBlKS5nZXRTZXQoYXR0cikpOwogICAgfQoKICAgIHB1\nYmxpYyA8VyxZPiBTZXRKb2luPFcsIFk+ICBqb2luU2V0KFN0cmluZyBhdHRy\nLCBKb2luVHlwZSBqdCkgewogICAgICAgIGFzc2VydEpvaW5hYmxlKHR5cGUp\nOwogICAgICAgIHJldHVybiAoU2V0Sm9pbjxXLCBZPilqb2luKCgoTWFuYWdl\nZFR5cGU8WD4pdHlwZSkuZ2V0U2V0KGF0dHIpLCBqdCk7CiAgICB9CiAgICAK\nICAgIHZvaWQgYXNzZXJ0Sm9pbmFibGUoVHlwZTw/PiB0eXBlKSB7CiAgICAg\nICAgaWYgKHR5cGUuZ2V0UGVyc2lzdGVuY2VUeXBlKCkgPT0gUGVyc2lzdGVu\nY2VUeXBlLkJBU0lDKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24odGhpcyArICIgaXMgYSBiYXNpYyBwYXRoIGFu\nZCBjYW4gbm90IGJlIG5hdmlnYXRlZCB0byAiKTsKICAgICAgICB9CiAgICB9\nCgogICAgcHJpdmF0ZSB2b2lkIGFkZEpvaW4oSm9pbjxYLD8+IGpvaW4pIHsK\nICAgICAgICBpZiAoX2pvaW5zID09IG51bGwpCiAgICAgICAgICAgIF9qb2lu\ncyA9IG5ldyBIYXNoU2V0PEpvaW48WCw/Pj4oKTsKICAgICAgICAgX2pvaW5z\nLmFkZChqb2luKTsKICAgIH0KICAgIAogICAgCiAgICBwdWJsaWMgPFk+IEZl\ndGNoPFgsIFk+IGZldGNoKFNpbmd1bGFyQXR0cmlidXRlPD8gc3VwZXIgWCwg\nWT4gYXNzb2MsIEpvaW5UeXBlIGp0KSB7CiAgICAgICAgcmV0dXJuIGFkZEZl\ndGNoKChNZW1iZXJzLk1lbWJlcjw/IHN1cGVyIFgsIFk+KWFzc29jLCBqdCk7\nCiAgICB9CgogICAgcHVibGljIDxZPiBGZXRjaDxYLFk+IGZldGNoKFNpbmd1\nbGFyQXR0cmlidXRlPD8gc3VwZXIgWCwgWT4gYXNzb2MpIHsKICAgICAgICBy\nZXR1cm4gZmV0Y2goYXNzb2MsIEpvaW5UeXBlLklOTkVSKTsKICAgIH0KCiAg\nICBwdWJsaWMgPFk+IEZldGNoPFgsIFk+IGZldGNoKFBsdXJhbEF0dHJpYnV0\nZTw/IHN1cGVyIFgsID8sIFk+IGFzc29jLAogICAgICAgIEpvaW5UeXBlIGp0\nKSB7CiAgICAgICAgcmV0dXJuIGFkZEZldGNoKChNZW1iZXJzLk1lbWJlcjw/\nIHN1cGVyIFgsIFk+KWFzc29jLCBqdCk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyA8WT4gRmV0Y2g8WCxZPiBmZXRjaChQbHVyYWxBdHRyaWJ1dGU8PyBzdXBl\nciBYLCA/LCBZPiBhc3NvYykgewogICAgICAgIHJldHVybiBmZXRjaChhc3Nv\nYywgSm9pblR5cGUuSU5ORVIpOwogICAgfQoKICAgIC8vU3RyaW5nLWJhc2Vk\nOgoKICAgIHB1YmxpYyA8WCxZPiBGZXRjaDxYLCBZPiBmZXRjaChTdHJpbmcg\nYXNzb2NOYW1lKSB7CiAgICAgICAgcmV0dXJuIGZldGNoKGFzc29jTmFtZSwg\nSm9pblR5cGUuSU5ORVIpOwogICAgfQoKICAgIHB1YmxpYyA8WCxZPiBGZXRj\naDxYLCBZPiBmZXRjaChTdHJpbmcgbmFtZSwgSm9pblR5cGUganQpIHsKICAg\nICAgICBhc3NlcnRKb2luYWJsZSh0eXBlKTsKICAgICAgICBBdHRyaWJ1dGU8\nPyBzdXBlciBYLD8+IGF0dHIgPSAoKE1hbmFnZWRUeXBlPFg+KXR5cGUpLmdl\ndEF0dHJpYnV0ZShuYW1lKTsKICAgICAgICBpZiAoYXR0ci5pc0NvbGxlY3Rp\nb24oKSkgewogICAgICAgICAgICByZXR1cm4gZmV0Y2goKFBsdXJhbEF0dHJp\nYnV0ZSlhdHRyLCBqdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg\ncmV0dXJuIGZldGNoKCgoU2luZ3VsYXJBdHRyaWJ1dGUpYXR0ciksIGp0KTsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGphdmEudXRpbC5TZXQ8RmV0\nY2g8WCwgPz4+IGdldEZldGNoZXMoKSB7CiAgICAgICAgcmV0dXJuIEV4cHJl\nc3Npb25zLnJldHVybkNvcHkoX2ZldGNoZXMpOwogICAgfQogICAgCiAgICBw\ncml2YXRlIDxZPiBGZXRjaDxYLFk+IGFkZEZldGNoKE1lbWJlcnMuTWVtYmVy\nPD8gc3VwZXIgWCwgWT4gbWVtYmVyLCAKICAgICAgICAgICAgSm9pblR5cGUg\nanQpIHsKICAgICAgICBGZXRjaDxYLFk+IGZldGNoID0gbmV3IEZldGNoUGF0\naEltcGwodGhpcywgbWVtYmVyLCBqdCk7CiAgICAgICAgaWYgKF9mZXRjaGVz\nID09IG51bGwpCiAgICAgICAgICAgIF9mZXRjaGVzID0gbmV3IEhhc2hTZXQ8\nRmV0Y2g8WCw/Pj4oKTsKICAgICAgICBfZmV0Y2hlcy5hZGQoZmV0Y2gpOwog\nICAgICAgIHJldHVybiBmZXRjaDsKICAgIH0KICAgIAogICAgcHVibGljIHZv\naWQgYWNjZXB0VmlzaXQoQ3JpdGVyaWFFeHByZXNzaW9uVmlzaXRvciB2aXNp\ndG9yKSB7CiAgICAgICAgRXhwcmVzc2lvbnMuYWNjZXB0VmlzaXQodmlzaXRv\nciwgdGhpcywgCiAgICAgICAgICAgIF9qb2lucyA9PSBudWxsID8gbnVsbCA6\nIF9qb2lucy50b0FycmF5KG5ldyBFeHByZXNzaW9uSW1wbDw/Pltfam9pbnMu\nc2l6ZSgpXSkpOwogICAgfQogICAgCiAgICBwdWJsaWMgRnJvbTxaLFg+IGdl\ndENvcnJlbGF0aW9uUGFyZW50KCkgewogICAgICAgIHJldHVybiAoRnJvbTxa\nLFg+KWdldENvcnJlbGF0ZWRQYXRoKCk7CiAgICB9Cn0K\n","encoding":"base64"}

