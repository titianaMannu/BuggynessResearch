{"sha":"8b6f8d4de774bcf5f1f05a2ab40adef7d76a0da7","node_id":"MDQ6QmxvYjIwNjM2NDo4YjZmOGQ0ZGU3NzRiY2Y1ZjFmMDVhMmFiNDBhZGVmN2Q3NmEwZGE3","size":39171,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8b6f8d4de774bcf5f1f05a2ab40adef7d76a0da7","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YTsK\nCmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0\naC5CaWdJbnRlZ2VyOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKaW1wb3J0\nIGphdmEudXRpbC5DYWxlbmRhcjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0\naW9uOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2\nYS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0\nIGphdmEudXRpbC5Mb2NhbGU7CmltcG9ydCBqYXZhLnV0aWwuVHJlZVNldDsK\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuQXR0cmlidXRl\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLkNvbGxlY3Rp\nb25BdHRyaWJ1dGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9k\nZWwuTGlzdEF0dHJpYnV0ZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLm1l\ndGFtb2RlbC5NYW5hZ2VkVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLm1ldGFtb2RlbC5NYXBBdHRyaWJ1dGU7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5tZXRhbW9kZWwuUGx1cmFsQXR0cmlidXRlOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UubWV0YW1vZGVsLlNldEF0dHJpYnV0ZTsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5TaW5ndWxhckF0dHJpYnV0ZTsK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5QbHVyYWxBdHRy\naWJ1dGUuQ29sbGVjdGlvblR5cGU7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5GaWx0ZXJzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5GaWVsZE1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuSmF2YVR5cGVzOwoKLyoqCiAqIEltcGxlbWVudHMgdGhlIG1h\nbmFnZWQgcGVyc2lzdGVudCB0eXBlIGFuZCBpdHMgYXR0cmlidXRlcy4KICog\nCiAqIFByb3ZpZGVzIGlkZW50aXR5IGFuZCB2ZXJzaW9uIGF0dHJpYnV0ZSBm\nYWNpbGl0aWVzIGZvciBJZGVudGlmaWFibGUgdHlwZSBidXQgZG9lcyBub3QK\nICogaW1wbGVtZW50IGl0LgogKiAKICogQGF1dGhvciBQaW5ha2kgUG9kZGFy\nCiAqCiAqIEBwYXJhbSA8WD4gdGhlIAogKi8KcHVibGljIGFic3RyYWN0IGNs\nYXNzIEFic3RyYWN0TWFuYWdlZFR5cGU8WD4gZXh0ZW5kcyBUeXBlcy5CYXNl\nVHlwZTxYPiAKICAgIGltcGxlbWVudHMgTWFuYWdlZFR5cGU8WD4gewogICAg\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExv\nY2FsaXplci5mb3JQYWNrYWdlKEFic3RyYWN0TWFuYWdlZFR5cGUuY2xhc3Mp\nOwogICAgcHVibGljIGZpbmFsIE1ldGFtb2RlbEltcGwgbW9kZWw7CiAgICBw\ndWJsaWMgZmluYWwgQ2xhc3NNZXRhRGF0YSBtZXRhOwoKICAgIHByaXZhdGUg\namF2YS51dGlsLlNldDxBdHRyaWJ1dGU8PyBzdXBlciBYLCA/Pj4gYXR0cnMg\nPSBuZXcgSGFzaFNldDxBdHRyaWJ1dGU8PyBzdXBlciBYLCA/Pj4oKTsKCiAg\nICBwcml2YXRlIGZpbmFsIERlY2xhcmVkQXR0cmlidXRlRmlsdGVyPFg+IGRl\nY2xhcmVkQXR0cmlidXRlRmlsdGVyOwogICAgcHJpdmF0ZSBmaW5hbCBTaW5n\ndWxhckF0dHJpYnV0ZUZpbHRlcjxYPiBzaW5ndWxhckF0dHJpYnV0ZUZpbHRl\ncjsKICAgIHByaXZhdGUgZmluYWwgU2luZ3VsYXJBdHRyaWJ1dGVGaWx0ZXI8\nWD4gcGx1cmFsQXR0cmlidXRlRmlsdGVyOwogICAgCiAgICAvKioKICAgICAq\nIEEgcHJvdGVjdGVkIGNvbnN0cnVjdG9yIGZvciBjcmVhdGluZyBwc3Vkby1t\nYW5hZ2VkIHR5cGVzLgogICAgICovCiAgICBwcm90ZWN0ZWQgQWJzdHJhY3RN\nYW5hZ2VkVHlwZShDbGFzczxYPiBjbHMsIE1ldGFtb2RlbEltcGwgbW9kZWwp\nIHsKICAgICAgICBzdXBlcihjbHMpOwogICAgICAgIHRoaXMubW9kZWwgPSBt\nb2RlbDsKICAgICAgICB0aGlzLm1ldGEgPSBudWxsOwogICAgICAgIGRlY2xh\ncmVkQXR0cmlidXRlRmlsdGVyID0gbnVsbDsKICAgICAgICBzaW5ndWxhckF0\ndHJpYnV0ZUZpbHRlciA9IG51bGw7CiAgICAgICAgcGx1cmFsQXR0cmlidXRl\nRmlsdGVyICAgPSBudWxsOwogICAgfQogICAgCiAgICAvKioKICAgICAqIENv\nbnN0cnVjdCBhIG1hbmFnZWQgdHlwZS4gVGhlIHN1cHBsaWVkIG1ldGFkYXRh\nIG11c3QgYmUgcmVzb2x2ZWQgaS5lLiBhbGwKICAgICAqIGl0cyBmaWVsZHMg\ncG9wdWxhdGVkLiBCZWNhdXNlIHRoaXMgcmVjZWl2ZXIgd2lsbCBwb3B1bGF0\nZSBpdHMgYXR0cmlidXRlcwogICAgICogY29ycmVzcG9uZGluZyB0byB0aGUg\nYXZhaWxhYmxlIGZpZWxkcyBvZiB0aGUgbWV0YWRhdGEuCiAgICAgKiAKICAg\nICAqLwogICAgcHVibGljIEFic3RyYWN0TWFuYWdlZFR5cGUoQ2xhc3NNZXRh\nRGF0YSBtZXRhLCBNZXRhbW9kZWxJbXBsIG1vZGVsKSB7CiAgICAgICAgc3Vw\nZXIoKENsYXNzPFg+KSBtZXRhLmdldERlc2NyaWJlZFR5cGUoKSk7CgogICAg\nICAgIHRoaXMubW9kZWwgPSBtb2RlbDsKICAgICAgICB0aGlzLm1ldGEgPSBt\nZXRhOwogICAgICAgIEZpZWxkTWV0YURhdGFbXSBmbWRzID0gbWV0YS5nZXRG\naWVsZHMoKTsKICAgICAgICBmb3IgKEZpZWxkTWV0YURhdGEgZiA6IGZtZHMp\nIHsKICAgICAgICAgICAgaW50IGRlY0NvZGUgPSBmLmdldERlY2xhcmVkVHlw\nZUNvZGUoKTsKICAgICAgICAgICAgc3dpdGNoIChkZWNDb2RlKSB7CiAgICAg\nICAgICAgIGNhc2UgSmF2YVR5cGVzLkJPT0xFQU46CiAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLkJPT0xFQU5fT0JKOgogICAgICAgICAgICAgICAgYXR0\ncnMuYWRkKG5ldyBNZW1iZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1wbDxYLCBC\nb29sZWFuPih0aGlzLCBmKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQllURToKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuQllURV9PQko6CiAgICAgICAgICAgICAgICBhdHRycy5h\nZGQobmV3IE1lbWJlcnMuU2luZ3VsYXJBdHRyaWJ1dGVJbXBsPFgsIEJ5dGU+\nKHRoaXMsIGYpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICBjYXNlIEphdmFUeXBlcy5DSEFSOgogICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5DSEFSX09CSjoKICAgICAgICAgICAgICAgIGF0dHJzLmFkZChuZXcg\nTWVtYmVycy5TaW5ndWxhckF0dHJpYnV0ZUltcGw8WCwgQ2hhcmFjdGVyPih0\naGlzLCBmKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuRE9VQkxFOgogICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5ET1VCTEVfT0JKOgogICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5l\ndyBNZW1iZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1wbDxYLCBEb3VibGU+KHRo\naXMsIGYpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBj\nYXNlIEphdmFUeXBlcy5GTE9BVDoKICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuRkxPQVRfT0JKOgogICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBN\nZW1iZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1wbDxYLCBGbG9hdD4odGhpcywg\nZikpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2Ug\nSmF2YVR5cGVzLklOVDoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuSU5U\nX09CSjoKICAgICAgICAgICAgICAgIGF0dHJzLmFkZChuZXcgTWVtYmVycy5T\naW5ndWxhckF0dHJpYnV0ZUltcGw8WCwgSW50ZWdlcj4odGhpcywgZikpOwog\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkxPTkc6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxPTkdfT0JK\nOgogICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBNZW1iZXJzLlNpbmd1\nbGFyQXR0cmlidXRlSW1wbDxYLCBMb25nPih0aGlzLCBmKSk7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hP\nUlQ6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNIT1JUX09CSjoKICAg\nICAgICAgICAgICAgIGF0dHJzLmFkZChuZXcgTWVtYmVycy5TaW5ndWxhckF0\ndHJpYnV0ZUltcGw8WCwgU2hvcnQ+KHRoaXMsIGYpKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5TVFJJTkc6\nCiAgICAgICAgICAgICAgICBhdHRycy5hZGQobmV3IE1lbWJlcnMuU2luZ3Vs\nYXJBdHRyaWJ1dGVJbXBsPFgsIFN0cmluZz4odGhpcywgZikpOwogICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk5V\nTUJFUjoKICAgICAgICAgICAgICAgIGF0dHJzLmFkZChuZXcgTWVtYmVycy5T\naW5ndWxhckF0dHJpYnV0ZUltcGw8WCwgTnVtYmVyPih0aGlzLCBmKSk7CiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuREFURToKICAgICAgICAgICAgICAgIGF0dHJzLmFkZChuZXcgTWVtYmVy\ncy5TaW5ndWxhckF0dHJpYnV0ZUltcGw8WCwgRGF0ZT4odGhpcywgZikpOwog\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkNBTEVOREFSOgogICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBN\nZW1iZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1wbDxYLCBDYWxlbmRhcj4odGhp\ncywgZikpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLkJJR0RFQ0lNQUw6CiAgICAgICAgICAgICAgICBhdHRy\ncy5hZGQobmV3IE1lbWJlcnMuU2luZ3VsYXJBdHRyaWJ1dGVJbXBsPFgsIEJp\nZ0RlY2ltYWw+KHRoaXMsIGYpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CSUdJTlRFR0VSOgogICAgICAg\nICAgICAgICAgYXR0cnMuYWRkKG5ldyBNZW1iZXJzLlNpbmd1bGFyQXR0cmli\ndXRlSW1wbDxYLCBCaWdJbnRlZ2VyPih0aGlzLCBmKSk7CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9DQUxF\nOgogICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBNZW1iZXJzLlNpbmd1\nbGFyQXR0cmlidXRlSW1wbDxYLCBMb2NhbGU+KHRoaXMsIGYpKTsKICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5P\nQkpFQ1Q6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk9JRDoKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuUEM6CiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLlBDX1VOVFlQRUQ6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLklOUFVUX1JFQURFUjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuSU5Q\nVVRfU1RSRUFNOgogICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBNZW1i\nZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1wbCh0aGlzLCBmKSk7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQVJS\nQVk6CiAgICAgICAgICAgICAgICBhdHRycy5hZGQobmV3IE1lbWJlcnMuTGlz\ndEF0dHJpYnV0ZUltcGwodGhpcywgZikpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkNPTExFQ1RJT046CiAg\nICAgICAgICAgICAgICBzd2l0Y2ggKE1ldGFtb2RlbEltcGwuY2F0ZWdvcml6\nZUNvbGxlY3Rpb24oZi5nZXREZWNsYXJlZFR5cGUoKSkpIHsKICAgICAgICAg\nICAgICAgIGNhc2UgQ09MTEVDVElPTjoKICAgICAgICAgICAgICAgICAgICBh\ndHRycy5hZGQobmV3IE1lbWJlcnMuQ29sbGVjdGlvbkF0dHJpYnV0ZUltcGwo\ndGhpcywgZikpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICAgICAgY2FzZSBMSVNUOgogICAgICAgICAgICAgICAgICAgIGF0dHJz\nLmFkZChuZXcgTWVtYmVycy5MaXN0QXR0cmlidXRlSW1wbCh0aGlzLCBmKSk7\nCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBj\nYXNlIFNFVDoKICAgICAgICAgICAgICAgICAgICBhdHRycy5hZGQobmV3IE1l\nbWJlcnMuU2V0QXR0cmlidXRlSW1wbCh0aGlzLCBmKSk7CiAgICAgICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTUFQOgog\nICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBNZW1iZXJzLk1hcEF0dHJp\nYnV0ZUltcGwodGhpcywgZikpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkVOVU06CiAgICAgICAgICAgICAg\nICBhdHRycy5hZGQobmV3IE1lbWJlcnMuU2luZ3VsYXJBdHRyaWJ1dGVJbXBs\nKHRoaXMsIGYpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICBkZWZhdWx0OgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxT\ndGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgiZmllbGQtdW5yZWNvZ25pemVkIiwK\nICAgICAgICAgICAgICAgICAgICAgICAgZi5nZXRGdWxsTmFtZShmYWxzZSks\nIGRlY0NvZGUpLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICAgICAgZGVjbGFyZWRBdHRyaWJ1dGVGaWx0ZXIgPSBuZXcgRGVj\nbGFyZWRBdHRyaWJ1dGVGaWx0ZXI8WD4odGhpcyk7CiAgICAgICAgc2luZ3Vs\nYXJBdHRyaWJ1dGVGaWx0ZXIgPSBuZXcgU2luZ3VsYXJBdHRyaWJ1dGVGaWx0\nZXI8WD4oKTsKICAgICAgICBwbHVyYWxBdHRyaWJ1dGVGaWx0ZXIgPSBuZXcg\nU2luZ3VsYXJBdHRyaWJ1dGVGaWx0ZXI8WD4oKS5pbnZlcnNlKCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYXR0cmlidXRlcyBv\nZiB0aGUgbWFuYWdlZCB0eXBlIGluY2x1ZGluZyBhdHRyaWJ1dGVzIG9mIHRo\nZSBzdXBlciB0eXBlLgogICAgICogCiAgICAgKi8KICAgIHB1YmxpYyBqYXZh\nLnV0aWwuU2V0PEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+PiBnZXRBdHRyaWJ1\ndGVzKCkgewogICAgICAgIHJldHVybiBDb2xsZWN0aW9ucy51bm1vZGlmaWFi\nbGVTZXQoYXR0cnMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBh\nbGwgdGhlIGF0dHJpYnV0ZXMgZGVjbGFyZWQgYnkgdGhpcyBtYW5hZ2VkIHR5\ncGUgb25seS4KICAgICAqIAogICAgICovCiAgICBwdWJsaWMgamF2YS51dGls\nLlNldDxBdHRyaWJ1dGU8WCwgPz4+IGdldERlY2xhcmVkQXR0cmlidXRlcygp\nIHsKICAgICAgICByZXR1cm4gZmlsdGVyKGF0dHJzLCBuZXcgVHJlZVNldDxB\ndHRyaWJ1dGU8WCwgPz4+KCksCiAgICAgICAgICAgICAgICBkZWNsYXJlZEF0\ndHJpYnV0ZUZpbHRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIHRoZSBzaW5nbGUtdmFsdWVkIGF0dHJpYnV0ZXMgb2YgdGhlIG1hbmFnZWQg\ndHlwZS4KICAgICAqIAogICAgICovCiAgICBwdWJsaWMgamF2YS51dGlsLlNl\ndDxTaW5ndWxhckF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+PiBnZXRTaW5ndWxh\nckF0dHJpYnV0ZXMoKSB7CiAgICAgICAgcmV0dXJuIGZpbHRlcihhdHRycywg\nbmV3IFRyZWVTZXQ8U2luZ3VsYXJBdHRyaWJ1dGU8PyBzdXBlciBYLCA/Pj4o\nKSwKICAgICAgICAgICAgICAgIHNpbmd1bGFyQXR0cmlidXRlRmlsdGVyKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHNpbmdsZS12YWx1\nZWQgYXR0cmlidXRlcyBkZWNsYXJlZCBieSB0aGUgbWFuYWdlZCB0eXBlLgog\nICAgICogCiAgICAgKi8KICAgIHB1YmxpYyBqYXZhLnV0aWwuU2V0PFNpbmd1\nbGFyQXR0cmlidXRlPFgsID8+PiBnZXREZWNsYXJlZFNpbmd1bGFyQXR0cmli\ndXRlcygpIHsKICAgICAgICByZXR1cm4gZmlsdGVyKGF0dHJzLCBuZXcgVHJl\nZVNldDxTaW5ndWxhckF0dHJpYnV0ZTxYLCA/Pj4oKSwKICAgICAgICAgICAg\nICAgIGRlY2xhcmVkQXR0cmlidXRlRmlsdGVyLCAKICAgICAgICAgICAgICAg\nIHNpbmd1bGFyQXR0cmlidXRlRmlsdGVyKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybnMgdGhlIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSBh\nbmQgSmF2YSB0eXBlLgogICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3Rz\nCiAgICAgKi8KICAgIHB1YmxpYyA8WT4gQXR0cmlidXRlPD8gc3VwZXIgWCwg\nWT4gZ2V0QXR0cmlidXRlKFN0cmluZyBuYW1lLCBDbGFzczxZPiB0eXBlKSB7\nCiAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gcmVzdWx0ID0gcGlj\nayhhdHRycywKICAgICAgICAgICAgICAgIG5ldyBBdHRyaWJ1dGVOYW1lRmls\ndGVyPFg+KG5hbWUpLAogICAgICAgICAgICAgICAgbmV3IEF0dHJpYnV0ZVR5\ncGVGaWx0ZXI8WCwgWT4odHlwZSkpOwogICAgICAgIGlmIChyZXN1bHQgPT0g\nbnVsbCkKICAgICAgICAgICAgbm90Rm91bmRFeGNlcHRpb24oImF0dHItbm90\nLWZvdW5kIiwgbmFtZSwgdHlwZSk7CiAgICAgICAgCiAgICAgICAgcmV0dXJu\nIChBdHRyaWJ1dGU8PyBzdXBlciBYLCBZPilyZXN1bHQ7CiAgICB9CiAgICAK\nICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgc2luZ2xlLXZhbHVlZCBhdHRy\naWJ1dGUgb2YgdGhlIGdpdmVuIG5hbWUgYW5kIEphdmEgdHlwZS4KICAgICAq\nIAogICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlm\nIG5vIHN1Y2ggYXR0cmlidXRlIGV4aXN0cwogICAgICovCiAgICBwdWJsaWMg\nPFk+IFNpbmd1bGFyQXR0cmlidXRlPD8gc3VwZXIgWCwgWT4gZ2V0U2luZ3Vs\nYXJBdHRyaWJ1dGUoU3RyaW5nIG5hbWUsIENsYXNzPFk+IHR5cGUpIHsKICAg\nICAgICBBdHRyaWJ1dGU8PyBzdXBlciBYLCA/PiByZXN1bHQgPSBwaWNrKGF0\ndHJzLAogICAgICAgICAgICAgICAgbmV3IEF0dHJpYnV0ZU5hbWVGaWx0ZXI8\nWD4obmFtZSksCiAgICAgICAgICAgICAgICBuZXcgQXR0cmlidXRlVHlwZUZp\nbHRlcjxYLCBZPih0eXBlKSwgCiAgICAgICAgICAgICAgICBzaW5ndWxhckF0\ndHJpYnV0ZUZpbHRlcik7CiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKQog\nICAgICAgICAgICBub3RGb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91bmQt\nc2luZ2xlIiwgbmFtZSwgdHlwZSk7CiAgICAgICAgIAogICAgICAgIHJldHVy\nbiAoU2luZ3VsYXJBdHRyaWJ1dGU8PyBzdXBlciBYLCBZPikgcmVzdWx0Owog\nICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGRlY2xhcmVk\nIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSBhbmQgSmF2YSB0eXBlLgog\nICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3RzCiAgICAgKi8KICAgIHB1\nYmxpYyA8WT4gQXR0cmlidXRlPFgsIFk+IGdldERlY2xhcmVkQXR0cmlidXRl\nKFN0cmluZyBuYW1lLCBDbGFzczxZPiB0eXBlKSB7CiAgICAgICAgQXR0cmli\ndXRlPD8gc3VwZXIgWCwgPz4gcmVzdWx0ID0gcGljayhhdHRycywKICAgICAg\nICAgICAgICAgIG5ldyBBdHRyaWJ1dGVOYW1lRmlsdGVyPFg+KG5hbWUpLAog\nICAgICAgICAgICAgICAgbmV3IEF0dHJpYnV0ZVR5cGVGaWx0ZXI8WCwgWT4o\ndHlwZSksIAogICAgICAgICAgICAgICAgZGVjbGFyZWRBdHRyaWJ1dGVGaWx0\nZXIpOwogICAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCkKICAgICAgICAgICAg\nbm90Rm91bmRFeGNlcHRpb24oImF0dHItbm90LWZvdW5kLWRlY2wtc2luZ2xl\nIixuYW1lLCB0eXBlKTsKICAgICAgICAgICAgCiAgICAgICAgcmV0dXJuIChB\ndHRyaWJ1dGU8WCwgWT4pIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybnMgdGhlIGRlY2xhcmVkIHNpbmdsZS12YWx1ZWQgYXR0cmlidXRl\nIG9mIHRoZSBnaXZlbiBuYW1lIGFuZCBKYXZhIHR5cGUuCiAgICAgKiAKICAg\nICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uICBpZiBubyBz\ndWNoIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwogICAgcHVibGljIDxZPiBT\naW5ndWxhckF0dHJpYnV0ZTxYLCBZPiBnZXREZWNsYXJlZFNpbmd1bGFyQXR0\ncmlidXRlKFN0cmluZyBuYW1lLCBDbGFzczxZPiB0eXBlKSB7CiAgICAgICAg\nQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gcmVzdWx0ID0gcGljayhhdHRycywK\nICAgICAgICAgICAgICAgIG5ldyBBdHRyaWJ1dGVOYW1lRmlsdGVyPFg+KG5h\nbWUpLAogICAgICAgICAgICAgICAgbmV3IEF0dHJpYnV0ZVR5cGVGaWx0ZXI8\nWCwgWT4odHlwZSksIAogICAgICAgICAgICAgICAgZGVjbGFyZWRBdHRyaWJ1\ndGVGaWx0ZXIsCiAgICAgICAgICAgICAgICBzaW5ndWxhckF0dHJpYnV0ZUZp\nbHRlcik7CiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKQogICAgICAgICAg\nICBub3RGb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91bmQtZGVjbC1zaW5n\nbGUiLG5hbWUsIHR5cGUpOwoKICAgICAgICByZXR1cm4gKFNpbmd1bGFyQXR0\ncmlidXRlPFgsIFk+KSByZXN1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm5zIGFsbCBjb2xsZWN0aW9uLXZhbHVlZCBhdHRyaWJ1dGVzIG9mIHRo\nZSBtYW5hZ2VkIHR5cGUuCiAgICAgKiAKICAgICAqLwogICAgcHVibGljIGph\ndmEudXRpbC5TZXQ8UGx1cmFsQXR0cmlidXRlPD8gc3VwZXIgWCwgPywgPz4+\nIGdldFBsdXJhbEF0dHJpYnV0ZXMoKSB7CiAgICAgICAgcmV0dXJuIGZpbHRl\ncihhdHRycywgbmV3IEhhc2hTZXQ8UGx1cmFsQXR0cmlidXRlPD8gc3VwZXIg\nWCwgPywgPz4+KCksCiAgICAgICAgICAgICAgICBwbHVyYWxBdHRyaWJ1dGVG\naWx0ZXIpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFsbCBjb2xs\nZWN0aW9uLXZhbHVlZCBhdHRyaWJ1dGVzIGRlY2xhcmVkIGJ5IHRoZSBtYW5h\nZ2VkIHR5cGUuCiAgICAgKiAKICAgICAqLwogICAgcHVibGljIGphdmEudXRp\nbC5TZXQ8UGx1cmFsQXR0cmlidXRlPFgsID8sID8+PiBnZXREZWNsYXJlZFBs\ndXJhbEF0dHJpYnV0ZXMoKSB7CiAgICAgICAgcmV0dXJuIGZpbHRlcihhdHRy\ncywgbmV3IEhhc2hTZXQ8UGx1cmFsQXR0cmlidXRlPFgsID8sID8+PigpLAog\nICAgICAgICAgICAgICAgZGVjbGFyZWRBdHRyaWJ1dGVGaWx0ZXIsIAogICAg\nICAgICAgICAgICAgcGx1cmFsQXR0cmlidXRlRmlsdGVyKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybnMgdGhlIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2\nZW4gbmFtZSwgb2YgdHlwZSBqYXZhLnV0aWwuQ29sbGVjdGlvbiBhbmQgY29u\ndGFpbnMgdGhlCiAgICAgKiBnaXZlbiBlbGVtZW50IHR5cGUuCiAgICAgKiAK\nICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uICBpZiBu\nbyBzdWNoIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwogICAgcHVibGljIDxF\nPiBDb2xsZWN0aW9uQXR0cmlidXRlPD8gc3VwZXIgWCwgRT4gZ2V0Q29sbGVj\ndGlvbihTdHJpbmcgbmFtZSwgQ2xhc3M8RT4gZWxlbWVudFR5cGUpIHsKICAg\nICAgICBBdHRyaWJ1dGU8PyBzdXBlciBYLCA/PiByZXN1bHQgPSBwaWNrKGF0\ndHJzLAogICAgICAgICAgICAgICAgbmV3IFBsdXJhbENhdGVnb3J5RmlsdGVy\nPFg+KENvbGxlY3Rpb25UeXBlLkNPTExFQ1RJT04pLAogICAgICAgICAgICAg\nICAgbmV3IEVsZW1lbnRUeXBlRmlsdGVyPFgsIEU+KGVsZW1lbnRUeXBlKSwK\nICAgICAgICAgICAgICAgIG5ldyBBdHRyaWJ1dGVOYW1lRmlsdGVyPFg+KG5h\nbWUpKTsKICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpCiAgICAgICAgICAg\nIG5vdEZvdW5kRXhjZXB0aW9uKCJhdHRyLW5vdC1mb3VuZC1jb2xsIiwgbmFt\nZSwgZWxlbWVudFR5cGUpOwoKICAgICAgICByZXR1cm4gKENvbGxlY3Rpb25B\ndHRyaWJ1dGU8PyBzdXBlciBYLCBFPikgcmVzdWx0OwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJucyB0aGUgYXR0cmlidXRlIG9mIHRoZSBnaXZlbiBu\nYW1lLCBvZiB0eXBlIGphdmEudXRpbC5TZXQgYW5kIGNvbnRhaW5zIHRoZQog\nICAgICogZ2l2ZW4gZWxlbWVudCB0eXBlLgogICAgICogCiAgICAgKiBAdGhy\nb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRy\naWJ1dGUgZXhpc3RzCiAgICAgKi8KICAgIHB1YmxpYyA8RT4gU2V0QXR0cmli\ndXRlPD8gc3VwZXIgWCwgRT4gZ2V0U2V0KFN0cmluZyBuYW1lLCBDbGFzczxF\nPiBlbGVtZW50VHlwZSkgewogICAgICAgIEF0dHJpYnV0ZTw/IHN1cGVyIFgs\nID8+IHJlc3VsdCA9IHBpY2soYXR0cnMsCiAgICAgICAgICAgICAgICBuZXcg\nUGx1cmFsQ2F0ZWdvcnlGaWx0ZXI8WD4oQ29sbGVjdGlvblR5cGUuU0VUKSwK\nICAgICAgICAgICAgICAgIG5ldyBFbGVtZW50VHlwZUZpbHRlcjxYLCBFPihl\nbGVtZW50VHlwZSksCiAgICAgICAgICAgICAgICBuZXcgQXR0cmlidXRlTmFt\nZUZpbHRlcjxYPihuYW1lKSk7CiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxs\nKQogICAgICAgICAgICBub3RGb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91\nbmQtc2V0IixuYW1lLCBlbGVtZW50VHlwZSk7CgogICAgICAgIHJldHVybiAo\nU2V0QXR0cmlidXRlPD8gc3VwZXIgWCwgRT4pIHJlc3VsdDsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybnMgdGhlIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2\nZW4gbmFtZSwgb2YgdHlwZSBqYXZhLnV0aWwuTGlzdCBhbmQgY29udGFpbnMg\ndGhlCiAgICAgKiBnaXZlbiBlbGVtZW50IHR5cGUuCiAgICAgKiAKICAgICAq\nIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uICBpZiBubyBzdWNo\nIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwogICAgcHVibGljIDxFPiBMaXN0\nQXR0cmlidXRlPD8gc3VwZXIgWCwgRT4gZ2V0TGlzdChTdHJpbmcgbmFtZSwg\nQ2xhc3M8RT4gZWxlbWVudFR5cGUpIHsKICAgICAgICBBdHRyaWJ1dGU8PyBz\ndXBlciBYLCA/PiByZXN1bHQgPSBwaWNrKGF0dHJzLAogICAgICAgICAgICAg\nICAgbmV3IFBsdXJhbENhdGVnb3J5RmlsdGVyPFg+KENvbGxlY3Rpb25UeXBl\nLkxJU1QpLAogICAgICAgICAgICAgICAgbmV3IEVsZW1lbnRUeXBlRmlsdGVy\nPFgsIEU+KGVsZW1lbnRUeXBlKSwKICAgICAgICAgICAgICAgIG5ldyBBdHRy\naWJ1dGVOYW1lRmlsdGVyPFg+KG5hbWUpKTsKICAgICAgICBpZiAocmVzdWx0\nID09IG51bGwpCiAgICAgICAgICAgIG5vdEZvdW5kRXhjZXB0aW9uKCJhdHRy\nLW5vdC1mb3VuZC1saXN0IixuYW1lLCBlbGVtZW50VHlwZSk7CgogICAgICAg\nIHJldHVybiAoTGlzdEF0dHJpYnV0ZTw/IHN1cGVyIFgsIEU+KSByZXN1bHQ7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUg\nb2YgdGhlIGdpdmVuIG5hbWUsIG9mIHR5cGUgamF2YS51dGlsLk1hcCBhbmQg\nY29udGFpbnMgdGhlCiAgICAgKiBnaXZlbiBrZXkvdmFsdWUgdHlwZS4KICAg\nICAqIAogICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24g\nIGlmIG5vIHN1Y2ggYXR0cmlidXRlIGV4aXN0cwogICAgICovCiAgICBwdWJs\naWMgPEssIFY+IE1hcEF0dHJpYnV0ZTw/IHN1cGVyIFgsIEssIFY+IGdldE1h\ncChTdHJpbmcgbmFtZSwgQ2xhc3M8Sz4ga2V5VHlwZSwgCiAgICAgICAgQ2xh\nc3M8Vj4gdmFsdWVUeXBlKSB7CiAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIg\nWCwgPz4gcmVzdWx0ID0gcGljayhhdHRycywKICAgICAgICAgICAgICAgIG5l\ndyBBdHRyaWJ1dGVOYW1lRmlsdGVyPFg+KG5hbWUpLAogICAgICAgICAgICAg\nICAgbmV3IFBsdXJhbENhdGVnb3J5RmlsdGVyPFg+KENvbGxlY3Rpb25UeXBl\nLk1BUCksCiAgICAgICAgICAgICAgICBuZXcgRW50cnlUeXBlRmlsdGVyPFgs\nIEssIFY+KGtleVR5cGUsIHZhbHVlVHlwZSkpOwogICAgICAgIGlmIChyZXN1\nbHQgPT0gbnVsbCkKICAgICAgICAgICAgbm90Rm91bmRFeGNlcHRpb24oImF0\ndHItbm90LWZvdW5kLW1hcCIsIG5hbWUsIGtleVR5cGUsIHZhbHVlVHlwZSk7\nCgogICAgICAgIHJldHVybiAoTWFwQXR0cmlidXRlPD8gc3VwZXIgWCwgSywg\nVj4pIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhl\nIGRlY2xhcmVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSwgb2YgdHlw\nZSBqYXZhLnV0aWwuQ29sbGVjdGlvbiBhbmQgY29udGFpbnMgCiAgICAgKiB0\naGUgZ2l2ZW4gZWxlbWVudCB0eXBlLgogICAgICogCiAgICAgKiBAdGhyb3dz\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1\ndGUgZXhpc3RzCiAgICAgKi8KICAgIHB1YmxpYyA8RT4gQ29sbGVjdGlvbkF0\ndHJpYnV0ZTxYLCBFPiBnZXREZWNsYXJlZENvbGxlY3Rpb24oU3RyaW5nIG5h\nbWUsICBDbGFzczxFPiBlbGVtZW50VHlwZSkgewogICAgICAgIEF0dHJpYnV0\nZTw/IHN1cGVyIFgsID8+IHJlc3VsdCA9IHBpY2soYXR0cnMsIAogICAgICAg\nICAgICAgICAgZGVjbGFyZWRBdHRyaWJ1dGVGaWx0ZXIsCiAgICAgICAgICAg\nICAgICBuZXcgUGx1cmFsQ2F0ZWdvcnlGaWx0ZXI8WD4oQ29sbGVjdGlvblR5\ncGUuQ09MTEVDVElPTiksCiAgICAgICAgICAgICAgICBuZXcgRWxlbWVudFR5\ncGVGaWx0ZXI8WCwgRT4oZWxlbWVudFR5cGUpLAogICAgICAgICAgICAgICAg\nbmV3IEF0dHJpYnV0ZU5hbWVGaWx0ZXI8WD4obmFtZSkpOwogICAgICAgIGlm\nIChyZXN1bHQgPT0gbnVsbCkKICAgICAgICAgICAgbm90Rm91bmRFeGNlcHRp\nb24oImF0dHItbm90LWZvdW5kLWRlY2wtY29sbCIsIG5hbWUsIGVsZW1lbnRU\neXBlKTsKCiAgICAgICAgcmV0dXJuIChDb2xsZWN0aW9uQXR0cmlidXRlPFgs\nIEU+KSByZXN1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRo\nZSBkZWNsYXJlZCBhdHRyaWJ1dGUgb2YgdGhlIGdpdmVuIG5hbWUsIG9mIHR5\ncGUgamF2YS51dGlsLlNldCBhbmQgY29udGFpbnMgCiAgICAgKiB0aGUgZ2l2\nZW4gZWxlbWVudCB0eXBlLgogICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhp\nc3RzCiAgICAgKi8KICAgIHB1YmxpYyA8RT4gU2V0QXR0cmlidXRlPFgsIEU+\nIGdldERlY2xhcmVkU2V0KFN0cmluZyBuYW1lLCBDbGFzczxFPiBlbGVtZW50\nVHlwZSkgewogICAgICAgIEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IHJlc3Vs\ndCA9IHBpY2soYXR0cnMsIAogICAgICAgICAgICAgICAgZGVjbGFyZWRBdHRy\naWJ1dGVGaWx0ZXIsCiAgICAgICAgICAgICAgICBuZXcgUGx1cmFsQ2F0ZWdv\ncnlGaWx0ZXI8WD4oQ29sbGVjdGlvblR5cGUuU0VUKSwKICAgICAgICAgICAg\nICAgIG5ldyBBdHRyaWJ1dGVOYW1lRmlsdGVyPFg+KG5hbWUpKTsKICAgICAg\nICBpZiAocmVzdWx0ID09IG51bGwpCiAgICAgICAgICAgIG5vdEZvdW5kRXhj\nZXB0aW9uKCJhdHRyLW5vdC1mb3VuZC1kZWNsLXNldCIsIG5hbWUsIGVsZW1l\nbnRUeXBlKTsKCiAgICAgICAgcmV0dXJuIChTZXRBdHRyaWJ1dGU8WCwgRT4p\nIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGRl\nY2xhcmVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSwgb2YgdHlwZSBq\nYXZhLnV0aWwuTGlzdCBhbmQgY29udGFpbnMgCiAgICAgKiB0aGUgZ2l2ZW4g\nZWxlbWVudCB0eXBlLgogICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3Rz\nCiAgICAgKi8KICAgIHB1YmxpYyA8RT4gTGlzdEF0dHJpYnV0ZTxYLCBFPiBn\nZXREZWNsYXJlZExpc3QoU3RyaW5nIG5hbWUsIENsYXNzPEU+IGVsZW1lbnRU\neXBlKSB7CiAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gcmVzdWx0\nID0gcGljayhhdHRycywgCiAgICAgICAgICAgICAgICBkZWNsYXJlZEF0dHJp\nYnV0ZUZpbHRlciwKICAgICAgICAgICAgICAgIG5ldyBQbHVyYWxDYXRlZ29y\neUZpbHRlcjxYPihDb2xsZWN0aW9uVHlwZS5MSVNUKSwKICAgICAgICAgICAg\nICAgIG5ldyBFbGVtZW50VHlwZUZpbHRlcjxYLCBFPihlbGVtZW50VHlwZSks\nCiAgICAgICAgICAgICAgICBuZXcgQXR0cmlidXRlTmFtZUZpbHRlcjxYPihu\nYW1lKSk7CiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKQogICAgICAgICAg\nICBub3RGb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91bmQtZGVjbC1saXN0\nIiwgbmFtZSwgZWxlbWVudFR5cGUpOwoKICAgICAgICByZXR1cm4gKExpc3RB\ndHRyaWJ1dGU8WCwgRT4pIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybnMgdGhlIGRlY2xhcmVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4g\nbmFtZSwgb2YgdHlwZSBqYXZhLnV0aWwuTWFwIGFuZCBjb250YWlucyAKICAg\nICAqIHRoZSBnaXZlbiBrZXkvdmFsdWUgdHlwZS4KICAgICAqIAogICAgICog\nQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2gg\nYXR0cmlidXRlIGV4aXN0cwogICAgICovCiAgICBwdWJsaWMgPEssIFY+IE1h\ncEF0dHJpYnV0ZTxYLCBLLCBWPiBnZXREZWNsYXJlZE1hcChTdHJpbmcgbmFt\nZSwgQ2xhc3M8Sz4ga2V5VHlwZSwgCiAgICAgICAgQ2xhc3M8Vj4gdmFsdWVU\neXBlKSB7CiAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gcmVzdWx0\nID0gcGljayhhdHRycywKICAgICAgICAgICAgICAgIGRlY2xhcmVkQXR0cmli\ndXRlRmlsdGVyLAogICAgICAgICAgICAgICAgbmV3IEF0dHJpYnV0ZU5hbWVG\naWx0ZXI8WD4obmFtZSksCiAgICAgICAgICAgICAgICBuZXcgUGx1cmFsQ2F0\nZWdvcnlGaWx0ZXI8WD4oQ29sbGVjdGlvblR5cGUuTUFQKSwKICAgICAgICAg\nICAgICAgIG5ldyBFbnRyeVR5cGVGaWx0ZXI8WCwgSywgVj4oa2V5VHlwZSwg\ndmFsdWVUeXBlKSk7CiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKQogICAg\nICAgICAgICBub3RGb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91bmQtZGVj\nbC1tYXAiLCBuYW1lLCBrZXlUeXBlLCB2YWx1ZVR5cGUpOwoKICAgICAgICBy\nZXR1cm4gKE1hcEF0dHJpYnV0ZTxYLCBLLCBWPikgcmVzdWx0OwogICAgfQoK\nICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAg\nLy8gTm8gdHlwZSBjaGVja2luZwogICAgLy8gPT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09CiAgICAKICAgIC8qKgogICAgICogUmV0dXJucyB0\naGUgYXR0cmlidXRlIG9mIHRoZSBnaXZlbiBuYW1lIG9mIGFueSB0eXBlLgog\nICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3RzCiAgICAgKi8KICAgIHB1\nYmxpYyBBdHRyaWJ1dGU8PyBzdXBlciBYLCA/PiBnZXRBdHRyaWJ1dGUoU3Ry\naW5nIG5hbWUpIHsKICAgICAgICByZXR1cm4gZ2V0QXR0cmlidXRlKG5hbWUs\nIG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZGVj\nbGFyZWQgYXR0cmlidXRlIG9mIHRoZSBnaXZlbiBuYW1lIG9mIGFueSB0eXBl\nLgogICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3RzCiAgICAgKi8KICAg\nIHB1YmxpYyBBdHRyaWJ1dGU8WCwgPz4gZ2V0RGVjbGFyZWRBdHRyaWJ1dGUo\nU3RyaW5nIG5hbWUpIHsKICAgICAgICByZXR1cm4gZ2V0RGVjbGFyZWRBdHRy\naWJ1dGUobmFtZSwgbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm5zIHRoZSBzaW5nbGUtdmFsdWVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4g\nbmFtZSBvZiBhbnkgdHlwZS4KICAgICAqIAogICAgICogQHRocm93cyBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2ggYXR0cmlidXRlIGV4\naXN0cwogICAgICovCiAgICBwdWJsaWMgU2luZ3VsYXJBdHRyaWJ1dGU8PyBz\ndXBlciBYLCA/PiBnZXRTaW5ndWxhckF0dHJpYnV0ZShTdHJpbmcgbmFtZSkg\newogICAgICAgIHJldHVybiBnZXRTaW5ndWxhckF0dHJpYnV0ZShuYW1lLCBu\ndWxsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGRlY2xh\ncmVkLCBzaW5nbGUtdmFsdWVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFt\nZSBvZiBhbnkgdHlwZS4KICAgICAqIAogICAgICogQHRocm93cyBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2ggYXR0cmlidXRlIGV4aXN0\ncwogICAgICovCiAgICBwdWJsaWMgU2luZ3VsYXJBdHRyaWJ1dGU8WCwgPz4g\nZ2V0RGVjbGFyZWRTaW5ndWxhckF0dHJpYnV0ZShTdHJpbmcgbmFtZSkgewog\nICAgICAgIHJldHVybiBnZXREZWNsYXJlZFNpbmd1bGFyQXR0cmlidXRlKG5h\nbWUsIG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUg\nYXR0cmlidXRlIG9mIHRoZSBnaXZlbiBuYW1lIGFuZCBvZiB0eXBlIGphdmEu\ndXRpbC5Db2xsZWN0aW9uLgogICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhp\nc3RzCiAgICAgKi8KICAgIHB1YmxpYyBDb2xsZWN0aW9uQXR0cmlidXRlPD8g\nc3VwZXIgWCwgPz4gZ2V0Q29sbGVjdGlvbihTdHJpbmcgbmFtZSkgewogICAg\nICAgIHJldHVybiBnZXRDb2xsZWN0aW9uKG5hbWUsIG51bGwpOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYXR0cmlidXRlIG9mIHRoZSBn\naXZlbiBuYW1lIGFuZCBvZiB0eXBlIGphdmEudXRpbC5TZXQuCiAgICAgKiAK\nICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uICBpZiBu\nbyBzdWNoIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwogICAgcHVibGljIFNl\ndEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IGdldFNldChTdHJpbmcgbmFtZSkg\newogICAgICAgIHJldHVybiBnZXRTZXQobmFtZSwgbnVsbCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgb2YgdGhlIGdp\ndmVuIG5hbWUgYW5kIG9mIHR5cGUgamF2YS51dGlsLkxpc3QuCiAgICAgKiAK\nICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uICBpZiBu\nbyBzdWNoIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwogICAgcHVibGljIExp\nc3RBdHRyaWJ1dGU8PyBzdXBlciBYLCA/PiBnZXRMaXN0KFN0cmluZyBuYW1l\nKSB7CiAgICAgICAgcmV0dXJuIGdldExpc3QobmFtZSwgbnVsbCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgb2YgdGhl\nIGdpdmVuIG5hbWUgYW5kIG9mIHR5cGUgamF2YS51dGlsLk1hcC4KICAgICAq\nIAogICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlm\nIG5vIHN1Y2ggYXR0cmlidXRlIGV4aXN0cwogICAgICovCiAgICBwdWJsaWMg\nTWFwQXR0cmlidXRlPD8gc3VwZXIgWCwgPywgPz4gZ2V0TWFwKFN0cmluZyBu\nYW1lKSB7CiAgICAgICAgcmV0dXJuIGdldE1hcChuYW1lLCBudWxsLCBudWxs\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGRlY2xhcmVk\nIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSBhbmQgb2YgdHlwZSBqYXZh\nLnV0aWwuQ29sbGVjdGlvbi4KICAgICAqIAogICAgICogQHRocm93cyBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2ggYXR0cmlidXRlIGV4\naXN0cwogICAgICovCiAgICBwdWJsaWMgQ29sbGVjdGlvbkF0dHJpYnV0ZTxY\nLCA/PiBnZXREZWNsYXJlZENvbGxlY3Rpb24oU3RyaW5nIG5hbWUpIHsKICAg\nICAgICByZXR1cm4gZ2V0RGVjbGFyZWRDb2xsZWN0aW9uKG5hbWUsIG51bGwp\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZGVjbGFyZWQg\nYXR0cmlidXRlIG9mIHRoZSBnaXZlbiBuYW1lIGFuZCBvZiB0eXBlIGphdmEu\ndXRpbC5TZXQuCiAgICAgKiAKICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uICBpZiBubyBzdWNoIGF0dHJpYnV0ZSBleGlzdHMKICAg\nICAqLwogICAgcHVibGljIFNldEF0dHJpYnV0ZTxYLCA/PiBnZXREZWNsYXJl\nZFNldChTdHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiBnZXREZWNsYXJl\nZFNldChuYW1lLCBudWxsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgdGhlIGRlY2xhcmVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSBh\nbmQgb2YgdHlwZSBqYXZhLnV0aWwuTGlzdC4KICAgICAqIAogICAgICogQHRo\ncm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2ggYXR0\ncmlidXRlIGV4aXN0cwogICAgICovCiAgICBwdWJsaWMgTGlzdEF0dHJpYnV0\nZTxYLCA/PiBnZXREZWNsYXJlZExpc3QoU3RyaW5nIG5hbWUpIHsKICAgICAg\nICByZXR1cm4gZ2V0RGVjbGFyZWRMaXN0KG5hbWUsIG51bGwpOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZGVjbGFyZWQgYXR0cmlidXRl\nIG9mIHRoZSBnaXZlbiBuYW1lIGFuZCBvZiB0eXBlIGphdmEudXRpbC5NYXAu\nCiAgICAgKiAKICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0\naW9uICBpZiBubyBzdWNoIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwogICAg\ncHVibGljIE1hcEF0dHJpYnV0ZTxYLCA/LCA/PiBnZXREZWNsYXJlZE1hcChT\ndHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiBnZXREZWNsYXJlZE1hcChu\nYW1lLCBudWxsLCBudWxsKTsKICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBQcmltYXJ5IEtleSBhbmQgVmVyc2lv\nbiBBdHRyaWJ1dGUgcmVsYXRlZCBmdW5jdGlvbnMKICAgIC8vLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogICBSZXR1cm5z\nIHRoZSBhdHRyaWJ1dGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGlkIGNsYXNz\nIG9mIHRoZSBpZGVudGlmaWFibGUgdHlwZS4KICAgICAqICAgCiAgICAgKiAg\nIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHRoZSB0aGlz\nIHR5cGUgaXMgbm90IHVzaW5nIGFuIGlkIGNsYXNzCiAgICAgKi8KICAgIHB1\nYmxpYyBmaW5hbCBqYXZhLnV0aWwuU2V0PFNpbmd1bGFyQXR0cmlidXRlPD8g\nc3VwZXIgWCwgPz4+IGdldElkQ2xhc3NBdHRyaWJ1dGVzKCkgewogICAgICAg\nIGlmIChtZXRhLmlzT3BlbkpQQUlkZW50aXR5KCkpCiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24obWV0YSArICIgZG9l\ncyBub3QgdXNlIElkQ2xhc3MuIE9iamVjdCBJZCB0eXBlID0gIiArIAogICAg\nICAgICAgICAgICAgbWV0YS5nZXRPYmplY3RJZFR5cGUoKSArICIgSWRlbnRp\ndHkgVHlwZSA9ICIgKyBtZXRhLmdldElkZW50aXR5VHlwZSgpKTsKICAgICAg\nICByZXR1cm4gZmlsdGVyKGF0dHJzLCBuZXcgSGFzaFNldDxTaW5ndWxhckF0\ndHJpYnV0ZTw/IHN1cGVyIFgsID8+PigpLAogICAgICAgICAgICAgICAgbmV3\nIElkQXR0cmlidXRlRmlsdGVyPFg+KCkpOwogICAgfQogICAgCiAgICAvKioK\nICAgICAqICBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgb2YgZ2l2ZW4gdHlwZSB0\naGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBpZCBhdHRyaWJ1dGUgb2YgdGhpcyAK\nICAgICAqICBpZGVudGlmaWFibGUgbWFuYWdlZCB0eXBlLgogICAgICogIAog\nICAgICogIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIG5v\nIHN1Y2ggYXR0cmlidXRlIGV4aXN0cwogICAgICovCiAgICAgcHVibGljIGZp\nbmFsIDxZPiBTaW5ndWxhckF0dHJpYnV0ZTw/IHN1cGVyIFgsIFk+IGdldElk\nKENsYXNzPFk+IHR5cGUpIHsKICAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIg\nWCwgPz4gcmVzdWx0ID0gIHBpY2soYXR0cnMsIAogICAgICAgICAgICAgICAg\nIG5ldyBBdHRyaWJ1dGVUeXBlRmlsdGVyPFgsIFk+KHR5cGUpLCAKICAgICAg\nICAgICAgICAgICBuZXcgSWRBdHRyaWJ1dGVGaWx0ZXI8WD4oKSk7CiAgICAg\nICAgIGlmIChyZXN1bHQgIT0gbnVsbCkKICAgICAgICAgICAgIHJldHVybiAo\nU2luZ3VsYXJBdHRyaWJ1dGU8PyBzdXBlciBYLCBZPikgcmVzdWx0OwogICAg\nICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7CiAg\nICAgfQogICAgIAogICAgIC8qKgogICAgICAqICBSZXR1cm5zIHRoZSBkZWNs\nYXJlZCBhdHRyaWJ1dGUgb2YgZ2l2ZW4gdHlwZSB0aGF0IGNvcnJlc3BvbmRz\nIHRvIHRoZSBpZCBhdHRyaWJ1dGUgb2YgdGhpcyAKICAgICAgKiAgaWRlbnRp\nZmlhYmxlIG1hbmFnZWQgdHlwZS4KICAgICAgKiAgCiAgICAgICogIEB0aHJv\nd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIG5vIHN1Y2ggYXR0cmli\ndXRlIGV4aXN0cwogICAgICAqLwogICAgIHB1YmxpYyBmaW5hbCA8WT4gU2lu\nZ3VsYXJBdHRyaWJ1dGU8WCwgWT4gZ2V0RGVjbGFyZWRJZChDbGFzczxZPiB0\neXBlKSB7CiAgICAgICAgIEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IHJlc3Vs\ndCA9ICBwaWNrKGF0dHJzLCAKICAgICAgICAgICAgICAgICBkZWNsYXJlZEF0\ndHJpYnV0ZUZpbHRlciwKICAgICAgICAgICAgICAgICBuZXcgQXR0cmlidXRl\nVHlwZUZpbHRlcjxYLCBZPih0eXBlKSwgCiAgICAgICAgICAgICAgICAgbmV3\nIElkQXR0cmlidXRlRmlsdGVyPFg+KCkpOwogICAgICAgICBpZiAocmVzdWx0\nICE9IG51bGwpCiAgICAgICAgICAgICByZXR1cm4gKFNpbmd1bGFyQXR0cmli\ndXRlPFgsIFk+KSByZXN1bHQ7CiAgICAgICAgIHRocm93IG5ldyBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24oKTsKICAgICB9CiAgICAgCiAgICAgLyoqCiAg\nICAgICogIFJldHVybnMgdGhlIGF0dHJpYnV0ZSBvZiBnaXZlbiB0eXBlIHRo\nYXQgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb24gYXR0cmlidXRlIG9mIHRo\naXMgCiAgICAgICogIG1hbmFnZWQgdHlwZS4KICAgICAgKiAgCiAgICAgICog\nIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIG5vIHN1Y2gg\nYXR0cmlidXRlIGV4aXN0cwogICAgICAqLwogICAgIHB1YmxpYyA8WT4gU2lu\nZ3VsYXJBdHRyaWJ1dGU8PyBzdXBlciBYLCBZPiBnZXRWZXJzaW9uKENsYXNz\nPFk+IHR5cGUpIHsKICAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4g\ncmVzdWx0ID0gcGljayhhdHRycywgCiAgICAgICAgICAgICAgICAgbmV3IFZl\ncnNpb25BdHRyaWJ1dGVGaWx0ZXI8WD4oKSwgCiAgICAgICAgICAgICAgICAg\nbmV3IEF0dHJpYnV0ZVR5cGVGaWx0ZXI8WCxZPih0eXBlKSk7CiAgICAgICAg\nIGlmIChyZXN1bHQgPT0gbnVsbCkgCiAgICAgICAgICAgICBub3RGb3VuZEV4\nY2VwdGlvbigidmVyc2lvbi1ub3QtZm91bmQiLCAiIiwgdHlwZSk7CiAgICAg\nICAgIHJldHVybiAoU2luZ3VsYXJBdHRyaWJ1dGU8PyBzdXBlciBYLCBZPily\nZXN1bHQ7CiAgICAgfQoKICAgICAvKioKICAgICAgKiAgUmV0dXJucyB0aGUg\nZGVjbGFyZWQgYXR0cmlidXRlIG9mIGdpdmVuIHR5cGUgdGhhdCBjb3JyZXNw\nb25kcyB0byB0aGUgdmVyc2lvbiBhdHRyaWJ1dGUgb2YgCiAgICAgICogIHRo\naXMgbWFuYWdlZCB0eXBlLgogICAgICAqICAKICAgICAgKiAgQHRocm93cyBJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgbm8gc3VjaCBhdHRyaWJ1dGUg\nZXhpc3RzCiAgICAgICovCiAgICAgcHVibGljIDxZPiBTaW5ndWxhckF0dHJp\nYnV0ZTxYLCBZPiBnZXREZWNsYXJlZFZlcnNpb24oQ2xhc3M8WT4gdHlwZSkg\newogICAgICAgICBBdHRyaWJ1dGU8PyBzdXBlciBYLCA/PiByZXN1bHQgPSBw\naWNrKGF0dHJzLAogICAgICAgICAgICAgICAgIGRlY2xhcmVkQXR0cmlidXRl\nRmlsdGVyLAogICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uQXR0cmlidXRl\nRmlsdGVyPFg+KCksIAogICAgICAgICAgICAgICAgIG5ldyBBdHRyaWJ1dGVU\neXBlRmlsdGVyPFgsWT4odHlwZSkpOwogICAgICAgICBpZiAocmVzdWx0ID09\nIG51bGwpIAogICAgICAgICAgICAgbm90Rm91bmRFeGNlcHRpb24oImRlY2wt\ndmVyc2lvbi1ub3QtZm91bmQiLCAiIiwgdHlwZSk7CiAgICAgICAgIHJldHVy\nbiAoU2luZ3VsYXJBdHRyaWJ1dGU8WCwgWT4pcmVzdWx0OwogICAgIH0KCiAg\nICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIFN1cHBvcnQg\nZnVuY3Rpb25zCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAg\nICBGaWVsZE1ldGFEYXRhIGdldEZpZWxkKFN0cmluZyBuYW1lKSB7CiAgICAg\nICAgcmV0dXJuIGdldEZpZWxkKG5hbWUsIG51bGwsIG51bGwsIG51bGwsIGZh\nbHNlKTsKICAgIH0KCiAgICBGaWVsZE1ldGFEYXRhIGdldEZpZWxkKFN0cmlu\nZyBuYW1lLCBDbGFzcyB0eXBlKSB7CiAgICAgICAgcmV0dXJuIGdldEZpZWxk\nKG5hbWUsIHR5cGUsIG51bGwsIG51bGwsIGZhbHNlKTsKICAgIH0KCiAgICBG\naWVsZE1ldGFEYXRhIGdldEZpZWxkKFN0cmluZyBuYW1lLCBDbGFzcyB0eXBl\nLCBib29sZWFuIGRlY2xhcmVkT25seSkgewogICAgICAgIHJldHVybiBnZXRG\naWVsZChuYW1lLCB0eXBlLCBudWxsLCBudWxsLCBkZWNsYXJlZE9ubHkpOwog\nICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBmaWVsZCBvZiB0aGUgZ2l2\nZW4gbmFtZSBhZnRlciB2YWxpZGF0aW5nIHRoZSBjb25kaXRpb25zLiBudWxs\nCiAgICAgKiB2YWx1ZSBvbiBhbnkgY29uZGl0aW9uIGltcGxpZXMgbm90IHRv\nIHZhbGlkYXRlLgogICAgICogCiAgICAgKiBAcGFyYW0gbmFtZSBzaW1wbGUg\nbmFtZSBpLmUuIHdpdGhvdXQgdGhlIGNsYXNzIG5hbWUKICAgICAqIEBwYXJh\nbSB0eXBlIHRoZSBleHBlY3RlZCB0eXBlIG9mIHRoZSBmaWVsZC4KICAgICAq\nIEBwYXJhbSBlbGVtZW50CiAgICAgKiAgICAgICAgICAgIHRoZSBleHBlY3Rl\nZCBlbGVtZW50IHR5cGUgb2YgdGhlIGZpZWxkLgogICAgICogQHBhcmFtIGtl\neQogICAgICogICAgICAgICAgICB0aGUgZXhwZWN0ZWQga2V5IHR5cGUgb2Yg\ndGhlIGZpZWxkLgogICAgICogQHBhcmFtIGRlY2xhcmVkCiAgICAgKiAgICAg\nICAgICAgIGlzIHRoaXMgZmllbGQgZGVjbGFyZWQgaW4gdGhpcyByZWNlaXZl\ncgogICAgICogCiAgICAgKiBAZXhjZXB0aW9uIElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbgogICAgICogICAgICAgICAgICAgICAgaWYgYW55IG9mIHRoZSB2\nYWxpZGF0aW9uIGZhaWxzLgogICAgICogCiAgICAgKi8KICAgIEZpZWxkTWV0\nYURhdGEgZ2V0RmllbGQoU3RyaW5nIG5hbWUsIENsYXNzPD8+IHR5cGUsIENs\nYXNzPD8+IGVsZW1lbnRUeXBlLAogICAgICAgICAgICBDbGFzczw/PiBrZXlU\neXBlLCBib29sZWFuIGRlY2wpIHsKICAgICAgICBGaWVsZE1ldGFEYXRhIGZt\nZCA9IGRlY2wgPyBtZXRhLmdldERlY2xhcmVkRmllbGQobmFtZSkgOiBtZXRh\nCiAgICAgICAgICAgICAgICAuZ2V0RmllbGQobmFtZSk7CgogICAgICAgIGlm\nIChmbWQgPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoZGVjbCAmJiBtZXRh\nLmdldEZpZWxkKG5hbWUpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRo\ncm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oX2xvYy5nZXQoImZp\nZWxkLW5vdC1kZWNsIiwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSwg\nY2xzLCBtZXRhLmdldEZpZWxkKG5hbWUpLmdldERlY2xhcmluZ1R5cGUoKSkK\nICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1lc3NhZ2UoKSk7CiAgICAg\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0KCJmaWVsZC1taXNzaW5n\nIiwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSwgbWV0YS5nZXREZXNj\ncmliZWRUeXBlKCksCiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5cy50\nb1N0cmluZyhtZXRhLmdldEZpZWxkTmFtZXMoKSkpLmdldE1lc3NhZ2UoKSk7\nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHlwZSgi\nZmllbGQtdHlwZS1taXNtYXRjaCIsIGZtZCwgZm1kLmdldERlY2xhcmVkVHlw\nZSgpLCB0eXBlKTsKICAgICAgICBhc3NlcnRUeXBlKCJmaWVsZC1lbGVtZW50\nLXR5cGUtbWlzbWF0Y2giLCBmbWQsIGZtZC5nZXRFbGVtZW50KCkKICAgICAg\nICAgICAgICAgIC5nZXREZWNsYXJlZFR5cGUoKSwgZWxlbWVudFR5cGUpOwog\nICAgICAgIGFzc2VydFR5cGUoImZpZWxkLWtleS10eXBlLW1pc21hdGNoIiwg\nZm1kLCBmbWQuZ2V0S2V5KCkKICAgICAgICAgICAgICAgIC5nZXREZWNsYXJl\nZFR5cGUoKSwga2V5VHlwZSk7CiAgICAgICAgcmV0dXJuIGZtZDsKICAgIH0K\nCiAgICB2b2lkIGFzc2VydFR5cGUoU3RyaW5nIG1zZywgRmllbGRNZXRhRGF0\nYSBmbWQsIENsYXNzPD8+IGFjdHVhbCwKICAgICAgICAgICAgQ2xhc3M8Pz4g\nZXhwZWN0ZWQpIHsKICAgICAgICBpZiAoZXhwZWN0ZWQgIT0gbnVsbCAmJiAh\nZXhwZWN0ZWQuaXNBc3NpZ25hYmxlRnJvbShhY3R1YWwpKSB7CiAgICAgICAg\nICAgIGlmICh3cmFwKGV4cGVjdGVkKSAhPSB3cmFwKGFjdHVhbCkpIHsKICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24oX2xvYy5nZXQobXNnLCBmbWQuZ2V0TmFtZSgpLAogICAgICAgICAgICAg\nICAgICAgICAgICBhY3R1YWwsIGV4cGVjdGVkKS5nZXRNZXNzYWdlKCkpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIENsYXNzPD8+IHdy\nYXAoQ2xhc3M8Pz4gYykgewogICAgICAgIGlmIChjLmlzUHJpbWl0aXZlKCkp\nIHsKICAgICAgICAgICAgaWYgKGMgPT0gaW50LmNsYXNzKQogICAgICAgICAg\nICAgICAgcmV0dXJuIEludGVnZXIuY2xhc3M7CiAgICAgICAgICAgIGlmIChj\nID09IGxvbmcuY2xhc3MpCiAgICAgICAgICAgICAgICByZXR1cm4gTG9uZy5j\nbGFzczsKICAgICAgICAgICAgaWYgKGMgPT0gYm9vbGVhbi5jbGFzcykKICAg\nICAgICAgICAgICAgIHJldHVybiBCb29sZWFuLmNsYXNzOwogICAgICAgICAg\nICBpZiAoYyA9PSBieXRlLmNsYXNzKQogICAgICAgICAgICAgICAgcmV0dXJu\nIEJ5dGUuY2xhc3M7CiAgICAgICAgICAgIGlmIChjID09IGNoYXIuY2xhc3Mp\nCiAgICAgICAgICAgICAgICByZXR1cm4gQ2hhcmFjdGVyLmNsYXNzOwogICAg\nICAgICAgICBpZiAoYyA9PSBkb3VibGUuY2xhc3MpCiAgICAgICAgICAgICAg\nICByZXR1cm4gRG91YmxlLmNsYXNzOwogICAgICAgICAgICBpZiAoYyA9PSBm\nbG9hdC5jbGFzcykKICAgICAgICAgICAgICAgIHJldHVybiBGbG9hdC5jbGFz\nczsKICAgICAgICAgICAgaWYgKGMgPT0gc2hvcnQuY2xhc3MpCiAgICAgICAg\nICAgICAgICByZXR1cm4gU2hvcnQuY2xhc3M7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiBjOwogICAgfQogICAgCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tCiAgICAvLyBFeGNlcHRpb24gaGFuZGxpbmcKICAgIC8v\nIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHByaXZhdGUgdm9p\nZCBub3RGb3VuZEV4Y2VwdGlvbihTdHJpbmcgbXNnLCBTdHJpbmcgbmFtZSwg\nQ2xhc3M8Pz4gdDEpIHsKICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uKAogICAgICAgICAgICBfbG9jLmdldChtc2csIG5hbWUs\nICh0MSA9PSBudWxsID8gImFueSIgOiB0MS5nZXROYW1lKCkpLCBtZXRhKS5n\nZXRNZXNzYWdlKCkpOwogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgbm90\nRm91bmRFeGNlcHRpb24oU3RyaW5nIG1zZywgU3RyaW5nIG5hbWUsIENsYXNz\nPD8+IHQxLCBDbGFzczw/PiB0MikgewogICAgICAgIHRocm93IG5ldyBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24oCiAgICAgICAgICAgIF9sb2MuZ2V0KG1z\nZywgbmV3IE9iamVjdFtde25hbWUsICh0MSA9PSBudWxsID8gImFueSIgOiB0\nMS5nZXROYW1lKCkpLCAKICAgICAgICAgICAgICAgICAgICAodDIgPT0gbnVs\nbCA/ICJhbnkiIDogdDEuZ2V0TmFtZSgpKSwgbWV0YX0pLmdldE1lc3NhZ2Uo\nKSk7CiAgICB9CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLQogICAgLy8gQXR0cmlidXRlIGZpbHRlcmluZwogICAgLy8gLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogQWZmaXJtcyBp\nZiBhIGdpdmVuIGVsZW1lbnQgc2F0aXNmeSBhIGNvbmRpdGlvbi4KICAgICAq\nIAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGludGVyZmFjZSBGaWx0ZXI8\nVD4gewogICAgICAgIGJvb2xlYW4gc2VsZWN0cyhUIGF0dHIpOwoKICAgICAg\nICBGaWx0ZXI8VD4gaW52ZXJzZSgpOwogICAgfQogICAgCgogICAgLyoqCiAg\nICAgKiBBcHBsaWVzIGNoYWluIG9mIGZpbHRlcnMgQU5EZWQgb24gdGhlIGdp\ndmVuIGNvbGxlY3Rpb24gdG8gcG9wdWxhdGUgdGhlIGdpdmVuIHJlc3VsdC4K\nICAgICAqIEEgbnVsbCBmaWx0ZXIgZXZhbHVhdGVzIGFsd2F5cyBUUlVFLgog\nICAgICogVGhlIGFyZ3VtZW50cyBhcmUgbm90IHBhc3NlZCBhcyB2YXJpYWJs\nZSBhcmd1bWVudCBsaXN0IHRvIHN1cHByZXNzIHdhcm5pbmdzIGluIGluIHRo\nZSBjYWxsZXIKICAgICAqIGZvciBnZW5lcmljIHZhcmFyZ3MgYXJyYXkgY29u\nc3RydWN0aW9uLgogICAgICovCiAgICAKICAgIHB1YmxpYyBzdGF0aWMgPFQs\nIEMgZXh0ZW5kcyBqYXZhLnV0aWwuQ29sbGVjdGlvbjxFPiwgRT4gQyBmaWx0\nZXIoQ29sbGVjdGlvbjxUPiBvcmlnaW5hbCwgCiAgICAgICAgQyByZXN1bHQs\nIEZpbHRlcjxUPiBmMSwgRmlsdGVyPFQ+IGYyLCBGaWx0ZXI8VD4gZjMsIEZp\nbHRlcjxUPiBmNCkgewogICAgICAgIGZvciAoVCB0IDogb3JpZ2luYWwpIHsK\nICAgICAgICAgICAgaWYgKChmMSA9PSBudWxsIHx8IGYxLnNlbGVjdHModCkp\nICYmIChmMiA9PSBudWxsIHx8IGYyLnNlbGVjdHModCkpIAogICAgICAgICAg\nICAgJiYgKGYzID09IG51bGwgfHwgZjMuc2VsZWN0cyh0KSkgJiYgKGY0ID09\nIG51bGwgfHwgZjQuc2VsZWN0cyh0KSkpCiAgICAgICAgICAgICAgICByZXN1\nbHQuYWRkKChFKSB0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3Vs\ndDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBBcHBsaWVzIGNoYWluIG9m\nIGZpbHRlcnMgQU5EZWQgb24gdGhlIGdpdmVuIGNvbGxlY3Rpb24gdG8gcGlj\nayBhIHNpbmdsZSBlbGVtZW50LgogICAgICogQSBudWxsIGZpbHRlciBldmFs\ndWF0ZXMgYWx3YXlzIFRSVUUuCiAgICAgKiBUaGUgYXJndW1lbnRzIGFyZSBu\nb3QgcGFzc2VkIGFzIHZhcmlhYmxlIGFyZ3VtZW50IGxpc3QgdG8gc3VwcHJl\nc3Mgd2FybmluZ3MgaW4gaW4gdGhlIGNhbGxlcgogICAgICogZm9yIGdlbmVy\naWMgdmFyYXJncyBhcnJheSBjb25zdHJ1Y3Rpb24uCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgPFQ+IFQgcGljayhDb2xsZWN0aW9uPFQ+IG9yaWdpbmFs\nLCBGaWx0ZXI8VD4gZjEsIEZpbHRlcjxUPiBmMiwgRmlsdGVyPFQ+IGYzLCAK\nICAgICAgICBGaWx0ZXI8VD4gZjQpIHsKICAgICAgICBmb3IgKFQgdCA6IG9y\naWdpbmFsKSB7CiAgICAgICAgICAgIGlmICgoZjEgPT0gbnVsbCB8fCBmMS5z\nZWxlY3RzKHQpKSAmJiAoZjIgPT0gbnVsbCB8fCBmMi5zZWxlY3RzKHQpKSAK\nICAgICAgICAgICAgICYmIChmMyA9PSBudWxsIHx8IGYzLnNlbGVjdHModCkp\nICYmIChmNCA9PSBudWxsIHx8IGY0LnNlbGVjdHModCkpKQogICAgICAgICAg\nICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxs\nOwogICAgfQogICAgCiAgICBzdGF0aWMgPFQsIEMgZXh0ZW5kcyBqYXZhLnV0\naWwuQ29sbGVjdGlvbjxFPiwgRT4gQyBmaWx0ZXIoQ29sbGVjdGlvbjxUPiBv\ncmlnaW5hbCwgCiAgICAgICAgICAgIEMgcmVzdWx0LCBGaWx0ZXI8VD4gZjEp\nIHsKICAgICAgICByZXR1cm4gZmlsdGVyKG9yaWdpbmFsLCByZXN1bHQsIGYx\nLCBudWxsLCBudWxsLCBudWxsKTsKICAgIH0KICAgIAogICAgc3RhdGljIDxU\nLCBDIGV4dGVuZHMgamF2YS51dGlsLkNvbGxlY3Rpb248RT4sIEU+IEMgZmls\ndGVyKENvbGxlY3Rpb248VD4gb3JpZ2luYWwsIAogICAgICAgICAgICBDIHJl\nc3VsdCwgRmlsdGVyPFQ+IGYxLCBGaWx0ZXI8VD4gZjIpIHsKICAgICAgICBy\nZXR1cm4gZmlsdGVyKG9yaWdpbmFsLCByZXN1bHQsIGYxLCBmMiwgbnVsbCwg\nbnVsbCk7CiAgICB9CiAgICAKICAgIHN0YXRpYyA8VCwgQyBleHRlbmRzIGph\ndmEudXRpbC5Db2xsZWN0aW9uPEU+LCBFPiBDIGZpbHRlcihDb2xsZWN0aW9u\nPFQ+IG9yaWdpbmFsLCAKICAgICAgICAgICAgQyByZXN1bHQsIEZpbHRlcjxU\nPiBmMSwgRmlsdGVyPFQ+IGYyLCBGaWx0ZXI8VD4gZjMpIHsKICAgICAgICBy\nZXR1cm4gZmlsdGVyKG9yaWdpbmFsLCByZXN1bHQsIGYxLCBmMiwgZjMsIG51\nbGwpOwogICAgfQogICAgCiAgICBzdGF0aWMgPFQ+IFQgcGljayhDb2xsZWN0\naW9uPFQ+IG9yaWdpbmFsLCBGaWx0ZXI8VD4gZjEpIHsKICAgICAgICByZXR1\ncm4gcGljayhvcmlnaW5hbCwgZjEsIG51bGwsIG51bGwsIG51bGwpOwogICAg\nfQoKICAgIHN0YXRpYyA8VD4gVCBwaWNrKENvbGxlY3Rpb248VD4gb3JpZ2lu\nYWwsIEZpbHRlcjxUPiBmMSwgRmlsdGVyPFQ+IGYyKSB7CiAgICAgICAgcmV0\ndXJuIHBpY2sob3JpZ2luYWwsIGYxLCBmMiwgbnVsbCwgbnVsbCk7CiAgICB9\nCiAgICAKICAgIHN0YXRpYyA8VD4gVCBwaWNrKENvbGxlY3Rpb248VD4gb3Jp\nZ2luYWwsIEZpbHRlcjxUPiBmMSwgRmlsdGVyPFQ+IGYyLCBGaWx0ZXI8VD4g\nZjMpIHsKICAgICAgICByZXR1cm4gcGljayhvcmlnaW5hbCwgZjEsIGYyLCBm\nMywgbnVsbCk7CiAgICB9CiAgICAKCiAgICAvKioKICAgICAqIEFmZmlybXMg\naWYgdGhlIGdpdmVuIGF0dHJpYnV0ZSBpcyBhIFNpbmd1bGFyIGF0dHJpYnV0\nZS4KICAgICAqIAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGNs\nYXNzIFNpbmd1bGFyQXR0cmlidXRlRmlsdGVyPFg+IGltcGxlbWVudHMKICAg\nICAgICAgICAgRmlsdGVyPEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+PiB7CiAg\nICAgICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9pbnZlcnQ7CgogICAgICAg\nIHB1YmxpYyBTaW5ndWxhckF0dHJpYnV0ZUZpbHRlcigpIHsKICAgICAgICAg\nICAgdGhpcyhmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgU2lu\nZ3VsYXJBdHRyaWJ1dGVGaWx0ZXIoYm9vbGVhbiBpbnZlcnRlZCkgewogICAg\nICAgICAgICBfaW52ZXJ0ID0gaW52ZXJ0ZWQ7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgYm9vbGVhbiBzZWxlY3RzKEF0dHJpYnV0ZTw/IHN1cGVyIFgs\nID8+IGF0dHIpIHsKICAgICAgICAgICAgcmV0dXJuIF9pbnZlcnQgPyBhdHRy\nLmlzQ29sbGVjdGlvbigpIDogIWF0dHIuaXNDb2xsZWN0aW9uKCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgU2luZ3VsYXJBdHRyaWJ1dGVGaWx0ZXI8\nWD4gaW52ZXJzZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW5ndWxh\nckF0dHJpYnV0ZUZpbHRlcjxYPighX2ludmVydCk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgY2xhc3MgRGVjbGFyZWRBdHRy\naWJ1dGVGaWx0ZXI8WD4gaW1wbGVtZW50cwogICAgICAgICAgICBGaWx0ZXI8\nQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4+IHsKICAgICAgICBwcml2YXRlIGZp\nbmFsIE1hbmFnZWRUeXBlPFg+IG93bmVyOwogICAgICAgIHByaXZhdGUgZmlu\nYWwgYm9vbGVhbiBfaW52ZXJ0OwoKICAgICAgICBEZWNsYXJlZEF0dHJpYnV0\nZUZpbHRlcihNYW5hZ2VkVHlwZTxYPiBvd25lcikgewogICAgICAgICAgICB0\naGlzKG93bmVyLCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBEZWNsYXJl\nZEF0dHJpYnV0ZUZpbHRlcihNYW5hZ2VkVHlwZTxYPiBvd25lciwgYm9vbGVh\nbiBpbnZlcnRlZCkgewogICAgICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7\nCiAgICAgICAgICAgIF9pbnZlcnQgPSBpbnZlcnRlZDsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBib29sZWFuIHNlbGVjdHMoQXR0cmlidXRlPD8gc3Vw\nZXIgWCwgPz4gYXR0cikgewogICAgICAgICAgICByZXR1cm4gX2ludmVydCA/\nIGF0dHIuZ2V0RGVjbGFyaW5nVHlwZSgpICE9IG93bmVyIDogYXR0cgogICAg\nICAgICAgICAgICAgICAgIC5nZXREZWNsYXJpbmdUeXBlKCkgPT0gb3duZXI7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgRGVjbGFyZWRBdHRyaWJ1dGVG\naWx0ZXI8WD4gaW52ZXJzZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBE\nZWNsYXJlZEF0dHJpYnV0ZUZpbHRlcjxYPihvd25lciwgIV9pbnZlcnQpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNlbGVjdHMgaWYgdGhl\nIGF0dHJpYnV0ZSB0eXBlIG1hdGNoZXMgdGhlIGdpdmVuIEphdmEgY2xhc3Mu\nCiAgICAgKiBudWxsIG1hdGNoZXMgYW55IHR5cGUuCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgY2xhc3MgQXR0cmlidXRlVHlwZUZpbHRlcjxY\nLCBZPiBpbXBsZW1lbnRzIEZpbHRlcjxBdHRyaWJ1dGU8PyBzdXBlciBYLCA/\nPj4gewogICAgICAgIHByaXZhdGUgZmluYWwgQ2xhc3M8WT4gX3R5cGU7CiAg\nICAgICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9pbnZlcnQ7CgogICAgICAg\nIHB1YmxpYyBBdHRyaWJ1dGVUeXBlRmlsdGVyKENsYXNzPFk+IHR5cGUpIHsK\nICAgICAgICAgICAgdGhpcyh0eXBlLCBmYWxzZSk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgQXR0cmlidXRlVHlwZUZpbHRlcihDbGFzczxZPiB0eXBl\nLCBib29sZWFuIGludmVydGVkKSB7CiAgICAgICAgICAgIF90eXBlID0gdHlw\nZTsKICAgICAgICAgICAgX2ludmVydCA9IGludmVydGVkOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIGJvb2xlYW4gc2VsZWN0cyhBdHRyaWJ1dGU8PyBz\ndXBlciBYLCA/PiBhdHRyKSB7CiAgICAgICAgICAgIGJvb2xlYW4gcmVzdWx0\nID0gX3R5cGUgPT0gbnVsbCB8fCBGaWx0ZXJzLmNhbkNvbnZlcnQoYXR0ci5n\nZXRKYXZhVHlwZSgpLCBfdHlwZSwgZmFsc2UpOwogICAgICAgICAgICByZXR1\ncm4gX2ludmVydCA/ICFyZXN1bHQgOiByZXN1bHQ7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgQXR0cmlidXRlVHlwZUZpbHRlcjxYLCBZPiBpbnZlcnNl\nKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZVR5cGVGaWx0\nZXI8WCwgWT4oX3R5cGUsICFfaW52ZXJ0KTsKICAgICAgICB9ICAgICAgICAK\nICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGNsYXNzIEF0dHJpYnV0\nZU5hbWVGaWx0ZXI8WD4gaW1wbGVtZW50cwogICAgICAgICAgICBGaWx0ZXI8\nQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4+IHsKICAgICAgICBwcml2YXRlIGZp\nbmFsIFN0cmluZyBfbmFtZTsKICAgICAgICBwcml2YXRlIGZpbmFsIGJvb2xl\nYW4gX2ludmVydDsKCiAgICAgICAgcHVibGljIEF0dHJpYnV0ZU5hbWVGaWx0\nZXIoU3RyaW5nIG5hbWUpIHsKICAgICAgICAgICAgdGhpcyhuYW1lLCBmYWxz\nZSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgQXR0cmlidXRlTmFtZUZp\nbHRlcihTdHJpbmcgbmFtZSwgYm9vbGVhbiBpbnZlcnRlZCkgewogICAgICAg\nICAgICBfbmFtZSA9IG5hbWU7CiAgICAgICAgICAgIF9pbnZlcnQgPSBpbnZl\ncnRlZDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIHNlbGVj\ndHMoQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gYXR0cikgewogICAgICAgICAg\nICByZXR1cm4gX2ludmVydCA/ICFhdHRyLmdldE5hbWUoKS5lcXVhbHMoX25h\nbWUpIDogYXR0ci5nZXROYW1lKCkKICAgICAgICAgICAgICAgICAgICAuZXF1\nYWxzKF9uYW1lKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBBdHRyaWJ1\ndGVOYW1lRmlsdGVyPFg+IGludmVyc2UoKSB7CiAgICAgICAgICAgIHJldHVy\nbiBuZXcgQXR0cmlidXRlTmFtZUZpbHRlcjxYPihfbmFtZSwgIV9pbnZlcnQp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGNs\nYXNzIFBsdXJhbENhdGVnb3J5RmlsdGVyPFg+IGltcGxlbWVudHMKICAgICAg\nICAgICAgRmlsdGVyPEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+PiB7CiAgICAg\nICAgcHJpdmF0ZSBmaW5hbCBDb2xsZWN0aW9uVHlwZSBfY2F0ZWdvcnk7CiAg\nICAgICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9pbnZlcnQ7CgogICAgICAg\nIHB1YmxpYyBQbHVyYWxDYXRlZ29yeUZpbHRlcihDb2xsZWN0aW9uVHlwZSBj\nYXRlZ29yeSkgewogICAgICAgICAgICB0aGlzKGNhdGVnb3J5LCBmYWxzZSk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgUGx1cmFsQ2F0ZWdvcnlGaWx0\nZXIoQ29sbGVjdGlvblR5cGUgY2F0ZWdvcnksIGJvb2xlYW4gaW52ZXJ0ZWQp\nIHsKICAgICAgICAgICAgX2NhdGVnb3J5ID0gY2F0ZWdvcnk7CiAgICAgICAg\nICAgIF9pbnZlcnQgPSBpbnZlcnRlZDsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBib29sZWFuIHNlbGVjdHMoQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4g\nYXR0cikgewogICAgICAgICAgICBib29sZWFuIHJlc3VsdCA9IChhdHRyIGlu\nc3RhbmNlb2YgUGx1cmFsQXR0cmlidXRlPD8sID8sID8+KQogICAgICAgICAg\nICAgICAgICAgICYmICgoUGx1cmFsQXR0cmlidXRlPD8sID8sID8+KSBhdHRy\nKS5nZXRDb2xsZWN0aW9uVHlwZSgpID09IF9jYXRlZ29yeTsKICAgICAgICAg\nICAgcmV0dXJuIF9pbnZlcnQgPyAhcmVzdWx0IDogcmVzdWx0OwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIFBsdXJhbENhdGVnb3J5RmlsdGVyPFg+IGlu\ndmVyc2UoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUGx1cmFsQ2F0ZWdv\ncnlGaWx0ZXI8WD4oX2NhdGVnb3J5LCAhX2ludmVydCk7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogU2VsZWN0cyBwbHVyYWwgYXR0cmlidXRl\nIG9mIGdpdmVuIGVsZW1lbnQgdHlwZS4KICAgICAqIG51bGwgZWxlbWVudCB0\neXBlIGltcGx5IDxlbT5hbnk8L2VtPiBlbGVtZW50IHR5cGUuCiAgICAgKi8K\nICAgIAogICAgcHVibGljIHN0YXRpYyBmaW5hbCBjbGFzcyBFbGVtZW50VHlw\nZUZpbHRlcjxYLCBFPiBpbXBsZW1lbnRzIEZpbHRlcjxBdHRyaWJ1dGU8PyBz\ndXBlciBYLCA/Pj4gewogICAgICAgIHByaXZhdGUgZmluYWwgQ2xhc3M8RT4g\nX2VsZW1lbnRUeXBlOwogICAgICAgIHByaXZhdGUgZmluYWwgYm9vbGVhbiBf\naW52ZXJ0OwoKICAgICAgICBwdWJsaWMgRWxlbWVudFR5cGVGaWx0ZXIoQ2xh\nc3M8RT4gZVR5cGUpIHsKICAgICAgICAgICAgdGhpcyhlVHlwZSwgZmFsc2Up\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIEVsZW1lbnRUeXBlRmlsdGVy\nKENsYXNzPEU+IGVUeXBlLCBib29sZWFuIGludmVydGVkKSB7CiAgICAgICAg\nICAgIF9lbGVtZW50VHlwZSA9IGVUeXBlOwogICAgICAgICAgICBfaW52ZXJ0\nID0gaW52ZXJ0ZWQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVh\nbiBzZWxlY3RzKEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IGF0dHIpIHsKICAg\nICAgICAgICAgYm9vbGVhbiByZXN1bHQgPSAoYXR0ciBpbnN0YW5jZW9mIFBs\ndXJhbEF0dHJpYnV0ZTw/LCA/LCA/PikKICAgICAgICAgICAgICAgICAgICAm\nJiAoX2VsZW1lbnRUeXBlID09IG51bGwgCiAgICAgICAgICAgICAgICAgICAg\nfHwgKChQbHVyYWxBdHRyaWJ1dGU8PywgPywgPz4pIGF0dHIpLmdldEVsZW1l\nbnRUeXBlKCkuZ2V0SmF2YVR5cGUoKSAKICAgICAgICAgICAgICAgICAgICAg\nICAgID09IF9lbGVtZW50VHlwZSk7CiAgICAgICAgICAgIHJldHVybiBfaW52\nZXJ0ID8gIXJlc3VsdCA6IHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBFbGVtZW50VHlwZUZpbHRlcjxYLCBFPiBpbnZlcnNlKCkgewogICAg\nICAgICAgICByZXR1cm4gbmV3IEVsZW1lbnRUeXBlRmlsdGVyPFgsIEU+KF9l\nbGVtZW50VHlwZSwgIV9pbnZlcnQpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgc3RhdGljIGZpbmFsIGNsYXNzIEVudHJ5VHlwZUZpbHRlcjxYLCBL\nLCBWPiBpbXBsZW1lbnRzCiAgICAgICAgICAgIEZpbHRlcjxBdHRyaWJ1dGU8\nPyBzdXBlciBYLCA/Pj4gewogICAgICAgIHByaXZhdGUgZmluYWwgQ2xhc3M8\nSz4gX2tleVR5cGU7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBDbGFzczxWPiBf\ndmFsdWVUeXBlOwogICAgICAgIHByaXZhdGUgZmluYWwgYm9vbGVhbiBfaW52\nZXJ0OwoKICAgICAgICBwdWJsaWMgRW50cnlUeXBlRmlsdGVyKENsYXNzPEs+\nIGtUeXBlLCBDbGFzczxWPiB2VHlwZSkgewogICAgICAgICAgICB0aGlzKGtU\neXBlLCB2VHlwZSwgZmFsc2UpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIEVudHJ5VHlwZUZpbHRlcihDbGFzczxLPiBrVHlwZSwgQ2xhc3M8Vj4gdlR5\ncGUsIGJvb2xlYW4gaW52ZXJ0ZWQpIHsKICAgICAgICAgICAgX2tleVR5cGUg\nPSBrVHlwZTsKICAgICAgICAgICAgX3ZhbHVlVHlwZSA9IHZUeXBlOwogICAg\nICAgICAgICBfaW52ZXJ0ID0gaW52ZXJ0ZWQ7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgYm9vbGVhbiBzZWxlY3RzKEF0dHJpYnV0ZTw/IHN1cGVyIFgs\nID8+IGF0dHIpIHsKICAgICAgICAgICAgYm9vbGVhbiByZXN1bHQgPSAoYXR0\nciBpbnN0YW5jZW9mIE1hcEF0dHJpYnV0ZTw/LCA/LCA/PikKICAgICAgICAg\nICAgICAgICAgICAmJiAoX2tleVR5cGUgPT0gbnVsbCAKICAgICAgICAgICAg\nICAgICAgICB8fCAoKE1hcEF0dHJpYnV0ZTw/LCA/LCA/PikgYXR0cikuZ2V0\nS2V5VHlwZSgpLmdldEphdmFUeXBlKCkgPT0gX2tleVR5cGUpCiAgICAgICAg\nICAgICAgICAgICAgJiYgKF92YWx1ZVR5cGUgPT0gbnVsbCAKICAgICAgICAg\nICAgICAgICAgICB8fCAoKE1hcEF0dHJpYnV0ZTw/LCA/LCA/PikgYXR0ciku\nZ2V0RWxlbWVudFR5cGUoKS5nZXRKYXZhVHlwZSgpID09IF92YWx1ZVR5cGUp\nOwogICAgICAgICAgICByZXR1cm4gX2ludmVydCA/ICFyZXN1bHQgOiByZXN1\nbHQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgRW50cnlUeXBlRmlsdGVy\nPFgsIEssIFY+IGludmVyc2UoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcg\nRW50cnlUeXBlRmlsdGVyPFgsIEssIFY+KF9rZXlUeXBlLCBfdmFsdWVUeXBl\nLCAhX2ludmVydCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgY2xhc3MgSWRBdHRyaWJ1dGVGaWx0ZXI8WD4gaW1wbGVtZW50\ncwogICAgICAgICAgICBGaWx0ZXI8QXR0cmlidXRlPD8gc3VwZXIgWCwgPz4+\nIHsKICAgICAgICBwcml2YXRlIGZpbmFsIGJvb2xlYW4gX2ludmVydDsKCiAg\nICAgICAgcHVibGljIElkQXR0cmlidXRlRmlsdGVyKCkgewogICAgICAgICAg\nICB0aGlzKGZhbHNlKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBJZEF0\ndHJpYnV0ZUZpbHRlcihib29sZWFuIGludmVydGVkKSB7CiAgICAgICAgICAg\nIF9pbnZlcnQgPSBpbnZlcnRlZDsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBib29sZWFuIHNlbGVjdHMoQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gYXR0\ncikgewogICAgICAgICAgICBib29sZWFuIHJlc3VsdCA9ICgoTWVtYmVycy5N\nZW1iZXI8PywgPz4pIGF0dHIpLmZtZC5pc1ByaW1hcnlLZXkoKTsKICAgICAg\nICAgICAgcmV0dXJuIF9pbnZlcnQgPyAhcmVzdWx0IDogcmVzdWx0OwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIElkQXR0cmlidXRlRmlsdGVyPFg+IGlu\ndmVyc2UoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgSWRBdHRyaWJ1dGVG\naWx0ZXI8WD4oIV9pbnZlcnQpOwogICAgICAgIH0KICAgIH0KICAgIAogICAg\ncHVibGljIHN0YXRpYyBmaW5hbCBjbGFzcyBWZXJzaW9uQXR0cmlidXRlRmls\ndGVyPFg+IGltcGxlbWVudHMgRmlsdGVyPEF0dHJpYnV0ZTw/IHN1cGVyIFgs\nID8+PiB7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9pbnZlcnQ7\nCgogICAgICAgIHB1YmxpYyBWZXJzaW9uQXR0cmlidXRlRmlsdGVyKCkgewog\nICAgICAgICAgICB0aGlzKGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgCiAg\nICAgICAgcHVibGljIFZlcnNpb25BdHRyaWJ1dGVGaWx0ZXIoYm9vbGVhbiBp\nbnZlcnRlZCkgewogICAgICAgICAgICBfaW52ZXJ0ID0gaW52ZXJ0ZWQ7CiAg\nICAgICAgfQogICAgICAgIAogICAgICAgIHB1YmxpYyBib29sZWFuIHNlbGVj\ndHMoQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gYXR0cikgewogICAgICAgICAg\nICBGaWVsZE1ldGFEYXRhIGZtZCA9ICgoTWVtYmVycy5NZW1iZXI8PywgPz4p\nIGF0dHIpLmZtZDsKICAgICAgICAgICAgYm9vbGVhbiByZXN1bHQgPSBmbWQu\naXNWZXJzaW9uKCk7CiAgICAgICAgICAgIHJldHVybiBfaW52ZXJ0ID8gIXJl\nc3VsdCA6IHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcHVi\nbGljIElkQXR0cmlidXRlRmlsdGVyPFg+IGludmVyc2UoKSB7CiAgICAgICAg\nICAgIHJldHVybiBuZXcgSWRBdHRyaWJ1dGVGaWx0ZXI8WD4oIV9pbnZlcnQp\nOwogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

