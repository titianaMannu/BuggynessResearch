{"sha":"3c53a0f5cf063cf2c1c6aeee2f75f818118b3820","node_id":"MDQ6QmxvYjIwNjM2NDozYzUzYTBmNWNmMDYzY2YyYzFjNmFlZWUyZjc1ZjgxODExOGIzODIw","size":20409,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3c53a0f5cf063cf2c1c6aeee2f75f818118b3820","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YTsK\nCmltcG9ydCBzdGF0aWMgamF2YXgubGFuZy5tb2RlbC5Tb3VyY2VWZXJzaW9u\nLlJFTEVBU0VfNjsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZh\nLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5PdXRwdXRTdHJlYW07\nCmltcG9ydCBqYXZhLmlvLlByaW50V3JpdGVyOwppbXBvcnQgamF2YS5uZXQu\nVVJJOwppbXBvcnQgamF2YS5uZXQuVVJMOwppbXBvcnQgamF2YS51dGlsLkFy\ncmF5czsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGph\ndmEudXRpbC5EYXRlOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBq\nYXZhLnV0aWwuU2V0OwoKaW1wb3J0IGphdmF4LmFubm90YXRpb24uR2VuZXJh\ndGVkOwppbXBvcnQgamF2YXguYW5ub3RhdGlvbi5wcm9jZXNzaW5nLkFic3Ry\nYWN0UHJvY2Vzc29yOwppbXBvcnQgamF2YXguYW5ub3RhdGlvbi5wcm9jZXNz\naW5nLlByb2Nlc3NpbmdFbnZpcm9ubWVudDsKaW1wb3J0IGphdmF4LmFubm90\nYXRpb24ucHJvY2Vzc2luZy5Sb3VuZEVudmlyb25tZW50OwppbXBvcnQgamF2\nYXguYW5ub3RhdGlvbi5wcm9jZXNzaW5nLlN1cHBvcnRlZEFubm90YXRpb25U\neXBlczsKaW1wb3J0IGphdmF4LmFubm90YXRpb24ucHJvY2Vzc2luZy5TdXBw\nb3J0ZWRPcHRpb25zOwppbXBvcnQgamF2YXguYW5ub3RhdGlvbi5wcm9jZXNz\naW5nLlN1cHBvcnRlZFNvdXJjZVZlcnNpb247CmltcG9ydCBqYXZheC5sYW5n\nLm1vZGVsLmVsZW1lbnQuRWxlbWVudDsKaW1wb3J0IGphdmF4LmxhbmcubW9k\nZWwuZWxlbWVudC5UeXBlRWxlbWVudDsKaW1wb3J0IGphdmF4LmxhbmcubW9k\nZWwudHlwZS5UeXBlS2luZDsKaW1wb3J0IGphdmF4LmxhbmcubW9kZWwudHlw\nZS5UeXBlTWlycm9yOwppbXBvcnQgamF2YXgubGFuZy5tb2RlbC51dGlsLkVs\nZW1lbnRzOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLlN0\nYXRpY01ldGFtb2RlbDsKaW1wb3J0IGphdmF4LnRvb2xzLkphdmFDb21waWxl\ncjsKaW1wb3J0IGphdmF4LnRvb2xzLkphdmFGaWxlT2JqZWN0OwppbXBvcnQg\namF2YXgudG9vbHMuU3RhbmRhcmRKYXZhRmlsZU1hbmFnZXI7CmltcG9ydCBq\nYXZheC50b29scy5TdGFuZGFyZExvY2F0aW9uOwppbXBvcnQgamF2YXgudG9v\nbHMuVG9vbFByb3ZpZGVyOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbWV0YS5NZXRhRGF0YUZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2VNZXRhRGF0YUZhY3Rvcnk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudXRpbC5Tb3Vy\nY2VDb2RlOwoKLyoqCiAqIEFubm90YXRpb24gcHJvY2Vzc2luZyB0b29sIGdl\nbmVyYXRlcyBzb3VyY2UgY29kZSBmb3IgYSBtZXRhLW1vZGVsIGNsYXNzIGdp\ndmVuIAogKiB0aGUgYW5ub3RhdGVkIHNvdXJjZSBjb2RlIG9mIHBlcnNpc3Rl\nbnQgZW50aXR5LgogKiA8cD4KICogVGhpcyB0b29sIGlzIGludm9rZWQgZHVy\naW5nIGNvbXBpbGF0aW9uIGZvciBKREs2IGNvbXBpbGVyIGlmIE9wZW5KUEEg\nYW5kIEpQQSAKICogbGlicmFyaWVzIGFyZSBzcGVjaWZpZWQgaW4gdGhlIGNv\nbXBpbGVyIDxjb2RlPi1wcm9jZXNzb3JwYXRoPC9jb2RlPiBvcHRpb24uCiAq\nIDxicj4KICogPEI+VXNhZ2U8L0I+PGJyPgogKiA8Y29kZT4kIGphdmFjIC1w\ncm9jZXNzb3JwYXRoIHBhdGgvdG8vb3BlbmpwYS1hbGwuamFyIG15cGFja2Fn\nZS9NeUVudGl0eS5qYXZhPC9jb2RlPjxicj4KICogd2lsbCBnZW5lcmF0ZSBz\nb3VyY2UgY29kZSBmb3IgY2Fub25pY2FsIG1ldGEtbW9kZWwgY2xhc3MgPGNv\nZGU+bXlwYWNrYWdlLk15RW50aXR5Xy5qYXZhPC9jb2RlPi4KICogPHA+CiAq\nIFRoZSBBbm5vdGF0aW9uIFByb2Nlc3NvciByZWNvZ25pemVzIHRoZSBmb2xs\nb3dpbmcgb3B0aW9ucyAobm9uZSBvZiB0aGVtIGFyZSBtYW5kYXRvcnkpOgog\nKiA8TEk+PGNvZGU+LUFsb2c9VFJBQ0V8SU5GT3xXQVJOfEVSUk9SPC9jb2Rl\nPjxicj4KICogVGhlIGxvZ2dpbmcgbGV2ZWwuIERlZmF1bHQgaXMgPGNvZGU+\nV0FSTjwvY29kZT4uCiAqIDxMST4tQXNvdXJjZT0mbHQ7biZndDs8YnI+CiAq\nIHdoZXJlICZsdDtuJmd0OyBkZW5vdGVzIHRoZSBpbnRlZ3JhbCBudW1iZXIg\nZm9yIEphdmEgc291cmNlIHZlcnNpb24gb2YgdGhlIGdlbmVyYXRlZCBjb2Rl\nLiAKICogRGVmYXVsdCBpcyA8Y29kZT42PC9jb2RlPi4KICogPExJPi1BbmFt\naW5nPWNsYXNzIG5hbWUgPGJyPgogKiBmdWxseS1xdWFsaWZpZWQgbmFtZSBv\nZiBhIGNsYXNzIGltcGxlbWVudGluZyA8Y29kZT5vcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5NZXRhRGF0YUZhY3Rvcnk8L2NvZGU+IHRoYXQgZGV0ZXJtaW5l\ncwogKiB0aGUgbmFtZSBvZiBhIG1ldGEtY2xhc3MgZ2l2ZW4gdGhlIG5hbWUg\nb2YgdGhlIG9yaWdpbmFsIHBlcnNpc3RlbnQgSmF2YSBlbnRpdHkgY2xhc3Mu\nIERlZmF1bHRzIHRvCiAqIDxjb2RlPm9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5QZXJzaXN0ZW5jZU1ldGFEYXRhRmFjdG9yeTwvY29kZT4gd2hp\nY2ggYXBwZW5kcyBhIHVuZGVyc2NvcmUgY2hhcmFjdGVyCiAqICg8Y29kZT5f\nPC9jb2RlPikgdG8gdGhlIG9yaWdpbmFsIEphdmEgY2xhc3MgbmFtZS4gCiAq\nIDxMST4tQWhlYWRlcj0mbHQ7dXJsJmd0Ozxicj4KICogQSB1cmwgd2hvc2Ug\nY29udGVudCB3aWxsIGFwcGVhciBhcyBjb21tZW50IGhlYWRlciB0byB0aGUg\nZ2VuZXJhdGVkIGZpbGUocykuIFJlY29nbml6ZXMgc3BlY2lhbCB2YWx1ZQog\nKiA8Y29kZT5BU0w8L2NvZGU+IGZvciBBcGFjaGUgU291cmNlIExpY2Vuc2Ug\naGVhZGVyIGFzIGNvbW1lbnQuIEJ5IGRlZmF1bHQgYWRkcyBhIE9wZW5KUEEg\ncHJvcHJpZXRhcnkgICAKICogdGV4dC4KICogPExJPi1Bb3V0PWRpcjxicj4K\nICogQSBkaXJlY3RvcnkgaW4gdGhlIGxvY2FsIGZpbGUgc3lzdGVtLiBUaGUg\nZ2VuZXJhdGVkIGZpbGVzIHdpbGwgYmUgd3JpdHRlbiA8ZW0+cmVsYXRpdmU8\nL2VtPiB0byB0aGlzIGRpcmVjdG9yeQogKiBhY2NvcmRpbmcgdG8gdGhlIHBh\nY2thZ2Ugc3RydWN0dXJlIGkuZS4gaWYgPGNvZGU+ZGlyPC9jb2RlPiBpcyBz\ncGVjaWZpZWQgYXMgPGNvZGU+L215cHJvamVjdC9nZW5lcmF0ZWQtc3JjPC9j\nb2RlPgogKiB0aGVuIHRoZSBnZW5lcmF0ZWQgc291cmNlIGNvZGUgd2lsbCBi\nZSB3cml0dGVuIHRvIDxjb2RlPi9teXByb2plY3QvZ2VuZXJhdGVkLXNyYy9t\neXBhY2thZ2UvTXlFbnRpdHlfLmphdmE8L2NvZGU+LgogKiBJZiB0aGlzIG9w\ndGlvbiBpcyBub3Qgc3BlY2lmaWVkLCB0aGVuIGFuIGF0dGVtcHQgd2lsbCBi\nZSBtYWRlIHRvIHdyaXRlIHRoZSBnZW5lcmF0ZWQgc291cmNlIGZpbGUgaW4g\ndGhlIHNhbWUKICogZGlyZWN0b3J5IG9mIHRoZSBzb3VyY2UgY29kZSBvZiBv\ncmlnaW5hbCBjbGFzcyA8Y29kZT5teXBhY2thZ2UuTXlFbnRpdHk8L2NvZGU+\nLiBUaGUgc291cmNlIGNvZGUgbG9jYXRpb24gZm9yIAogKiA8Y29kZT5teXBh\nY2thZ2UuTXlFbnRpdHk8L2NvZGU+IGNhbiBvbmx5IGJlIGRldGVybWluZWQg\nZm9yIFN1biBKREs2IGFuZCA8Y29kZT50b29scy5qYXI8L2NvZGU+IGJlaW5n\nIGF2YWlsYWJsZSAKICogdG8gdGhlIGNvbXBpbGVyIGNsYXNzcGF0aC4gSWYg\ndGhlIHNvdXJjZSBjb2RlIGxvY2F0aW9uIGZvciB0aGUgb3JpZ2luYWwgY2xh\nc3MgY2FuIG5vdCBiZSBkZXRlcm1pbmVkLCBhbmQgdGhlIAogKiBvcHRpb24g\naXMgbm90IHNwZWNpZmllZCwgdGhlbiB0aGUgZ2VuZXJhdGVkIHNvdXJjZSBj\nb2RlIGlzIHdyaXR0ZW4gcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgZGlyZWN0\nb3J5IGFjY29yZGluZyAKICogdG8gdGhlIHBhY2thZ2Ugc3RydWN0dXJlLiAg\nCiAqIDxicj4KICogQGF1dGhvciBQaW5ha2kgUG9kZGFyCiAqIAogKiBAc2lu\nY2UgMi4wLjAKICogCiAqLwpAU3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzKHsg\nCiAgICAiamF2YXgucGVyc2lzdGVuY2UuRW50aXR5IiwKICAgICJqYXZheC5w\nZXJzaXN0ZW5jZS5FbWJlZGRhYmxlIiwgCiAgICAiamF2YXgucGVyc2lzdGVu\nY2UuTWFwcGVkU3VwZXJjbGFzcyIgfSkKQFN1cHBvcnRlZE9wdGlvbnMoIHsg\nImxvZyIsICJvdXQiLCAic291cmNlIiwgIm5hbWluZyIsICJoZWFkZXIiIH0p\nCkBTdXBwb3J0ZWRTb3VyY2VWZXJzaW9uKFJFTEVBU0VfNikKCnB1YmxpYyBj\nbGFzcyBBbm5vdGF0aW9uUHJvY2Vzc29yNiBleHRlbmRzIEFic3RyYWN0UHJv\nY2Vzc29yIHsKICAgIHByaXZhdGUgU291cmNlQW5ub3RhdGlvbkhhbmRsZXIg\naGFuZGxlcjsKICAgIHByaXZhdGUgU3RhbmRhcmRKYXZhRmlsZU1hbmFnZXIg\nZmlsZU1hbmFnZXI7CiAgICBwcml2YXRlIGJvb2xlYW4gaXNVc2VyU3BlY2lm\naWVkT3V0cHV0TG9jYXRpb24gPSBmYWxzZTsKICAgIHByaXZhdGUgTWV0YURh\ndGFGYWN0b3J5IGZhY3Rvcnk7CiAgICBwcml2YXRlIGludCBnZW5lcmF0ZWRT\nb3VyY2VWZXJzaW9uID0gNjsKICAgIHByaXZhdGUgQ29tcGlsZVRpbWVMb2dn\nZXIgbG9nZ2VyOwogICAgcHJpdmF0ZSBTdHJpbmcgaGVhZGVyOwogICAgcHJp\ndmF0ZSBzdGF0aWMgTG9jYWxpemVyIF9sb2MgPSAgTG9jYWxpemVyLmZvclBh\nY2thZ2UoQW5ub3RhdGlvblByb2Nlc3NvcjYuY2xhc3MpOwoKICAgIC8qKgog\nICAgICogQ2F0ZWdvcnkgb2YgbWVtYmVycyBhcyBwZXIgSlBBIDIuMCB0eXBl\nIHN5c3RlbS4KICAgICAqIAogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBl\nbnVtIFR5cGVDYXRlZ29yeSB7CiAgICAgICAgQVRUUklCVVRFKCJqYXZheC5w\nZXJzaXN0ZW5jZS5tZXRhbW9kZWwuU2luZ3VsYXJBdHRyaWJ1dGUiKSwgCiAg\nICAgICAgQ09MTEVDVElPTigiamF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVs\nLkNvbGxlY3Rpb25BdHRyaWJ1dGUiKSwgCiAgICAgICAgU0VUKCJqYXZheC5w\nZXJzaXN0ZW5jZS5tZXRhbW9kZWwuU2V0QXR0cmlidXRlIiksIAogICAgICAg\nIExJU1QoImphdmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5MaXN0QXR0cmli\ndXRlIiksIAogICAgICAgIE1BUCgiamF2YXgucGVyc2lzdGVuY2UubWV0YW1v\nZGVsLk1hcEF0dHJpYnV0ZSIpOwoKICAgICAgICBwcml2YXRlIFN0cmluZyB0\neXBlOwoKICAgICAgICBwcml2YXRlIFR5cGVDYXRlZ29yeShTdHJpbmcgdHlw\nZSkgewogICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIFN0cmluZyBnZXRNZXRhTW9kZWxUeXBlKCkgewog\nICAgICAgICAgICByZXR1cm4gdHlwZTsKICAgICAgICB9CiAgICB9CiAgICAK\nICAgIC8qKgogICAgICogRW51bWVyYXRlcyBhdmFpbGFibGUgamF2YS51dGls\nLiogY29sbGVjdGlvbiBjbGFzc2VzIHRvIGNhdGVnb3JpemUgdGhlbQogICAg\nICogaW50byBjb3JyZXNwb25kaW5nIEpQQSBtZXRhLW1vZGVsIG1lbWJlciB0\neXBlLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBMaXN0PFN0cmluZz4g\nQ0xBU1NOQU1FU19MSVNUID0gQXJyYXlzLmFzTGlzdCgKICAgICAgICBuZXcg\nU3RyaW5nW117CiAgICAgICAgImphdmEudXRpbC5MaXN0IiwgImphdmEudXRp\nbC5BYnN0cmFjdExpc3QiLCAKICAgICAgICAiamF2YS51dGlsLkFic3RyYWN0\nU2VxdWVudGlhbExpc3QiLCAiamF2YS51dGlsLkFycmF5TGlzdCIsIAogICAg\nICAgICJqYXZhLnV0aWwuU3RhY2siLCAiamF2YS51dGlsLlZlY3RvciJ9KTsK\nICAgIHByaXZhdGUgc3RhdGljIExpc3Q8U3RyaW5nPiBDTEFTU05BTUVTX1NF\nVCA9IEFycmF5cy5hc0xpc3QoCiAgICAgICAgbmV3IFN0cmluZ1tdewogICAg\nICAgICJqYXZhLnV0aWwuU2V0IiwgImphdmEudXRpbC5BYnN0cmFjdFNldCIs\nICJqYXZhLnV0aWwuRW51bVNldCIsIAogICAgICAgICJqYXZhLnV0aWwuSGFz\naFNldCIsICJqYXZhLnV0aWwuTGlua2VkTGlzdCIsICJqYXZhLnV0aWwuTGlu\na2VkSGFzaFNldCIsIAogICAgICAgICJqYXZhLnV0aWwuU29ydGVkU2V0Iiwg\nImphdmEudXRpbC5UcmVlU2V0In0pOwogICAgcHJpdmF0ZSBzdGF0aWMgTGlz\ndDxTdHJpbmc+IENMQVNTTkFNRVNfTUFQID0gQXJyYXlzLmFzTGlzdCgKICAg\nICAgICBuZXcgU3RyaW5nW117CiAgICAgICAgImphdmEudXRpbC5NYXAiLCAi\namF2YS51dGlsLkFic3RyYWN0TWFwIiwgImphdmEudXRpbC5FbnVtTWFwIiwg\nCiAgICAgICAgImphdmEudXRpbC5IYXNoTWFwIiwgICJqYXZhLnV0aWwuSGFz\naHRhYmxlIiwgCiAgICAgICAgImphdmEudXRpbC5JZGVudGl0eUhhc2hNYXAi\nLCAgImphdmEudXRpbC5MaW5rZWRIYXNoTWFwIiwgCiAgICAgICAgImphdmEu\ndXRpbC5Qcm9wZXJ0aWVzIiwgImphdmEudXRpbC5Tb3J0ZWRNYXAiLCAKICAg\nICAgICAiamF2YS51dGlsLlRyZWVNYXAifSk7CiAgICBwcml2YXRlIHN0YXRp\nYyBMaXN0PFN0cmluZz4gQ0xBU1NOQU1FU19DT0xMRUNUSU9OID0gQXJyYXlz\nLmFzTGlzdCgKICAgICAgICBuZXcgU3RyaW5nW117CiAgICAgICAgImphdmEu\ndXRpbC5Db2xsZWN0aW9uIiwgImphdmEudXRpbC5BYnN0cmFjdENvbGxlY3Rp\nb24iLCAKICAgICAgICAiamF2YS51dGlsLkFic3RyYWN0UXVldWUiLCAiamF2\nYS51dGlsLlF1ZXVlIiwgCiAgICAgICAgImphdmEudXRpbC5Qcmlvcml0eVF1\nZXVlIn0pOwogICAgCiAgICAvKioKICAgICAqIEdldHMgdGhlIGZ1bGx5LXF1\nYWxpZmllZCBuYW1lIG9mIG1lbWJlciBjbGFzcyBpbiBKUEEgMi4wIHR5cGUg\nc3lzdGVtLAogICAgICogZ2l2ZW4gdGhlIGZ1bGx5LXF1YWxpZmllZCBuYW1l\nIG9mIGEgSmF2YSBjbGFzcy4KICAgICAqICAKICAgICAqLwogICAgcHJpdmF0\nZSBUeXBlQ2F0ZWdvcnkgdG9NZXRhTW9kZWxUeXBlQ2F0ZWdvcnkoVHlwZU1p\ncnJvciBtaXJyb3IsIAogICAgICAgIFN0cmluZyBuYW1lKSB7CiAgICAgICAg\naWYgKG1pcnJvci5nZXRLaW5kKCkgPT0gVHlwZUtpbmQuQVJSQVkpCiAgICAg\nICAgICAgIHJldHVybiBUeXBlQ2F0ZWdvcnkuTElTVDsKICAgICAgICBpZiAo\nQ0xBU1NOQU1FU19DT0xMRUNUSU9OLmNvbnRhaW5zKG5hbWUpKQogICAgICAg\nICAgICByZXR1cm4gVHlwZUNhdGVnb3J5LkNPTExFQ1RJT047CiAgICAgICAg\naWYgKENMQVNTTkFNRVNfTElTVC5jb250YWlucyhuYW1lKSkKICAgICAgICAg\nICAgcmV0dXJuIFR5cGVDYXRlZ29yeS5MSVNUOwogICAgICAgIGlmIChDTEFT\nU05BTUVTX1NFVC5jb250YWlucyhuYW1lKSkKICAgICAgICAgICAgcmV0dXJu\nIFR5cGVDYXRlZ29yeS5TRVQ7CiAgICAgICAgaWYgKENMQVNTTkFNRVNfTUFQ\nLmNvbnRhaW5zKG5hbWUpKQogICAgICAgICAgICByZXR1cm4gVHlwZUNhdGVn\nb3J5Lk1BUDsKICAgICAgICByZXR1cm4gVHlwZUNhdGVnb3J5LkFUVFJJQlVU\nRTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBJbml0aWFsaXphdGlvbi4K\nICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgc3luY2hyb25pemVk\nIHZvaWQgaW5pdChQcm9jZXNzaW5nRW52aXJvbm1lbnQgcHJvY2Vzc2luZ0Vu\ndikgewogICAgICAgIHN1cGVyLmluaXQocHJvY2Vzc2luZ0Vudik7CiAgICAg\nICAgbG9nZ2VyID0gbmV3IENvbXBpbGVUaW1lTG9nZ2VyKHByb2Nlc3NpbmdF\nbnYpOwogICAgICAgIGxvZ2dlci5pbmZvKF9sb2MuZ2V0KCJtbWctdG9vbC1i\nYW5uZXIiKSk7CiAgICAgICAgc2V0U291cmNlVmVyc2lvbigpOwogICAgICAg\nIHNldEZpbGVNYW5hZ2VyKCk7CiAgICAgICAgc2V0TmFtaW5nUG9saWN5KCk7\nCiAgICAgICAgc2V0SGVhZGVyKCk7CiAgICAgICAgaGFuZGxlciA9IG5ldyBT\nb3VyY2VBbm5vdGF0aW9uSGFuZGxlcihwcm9jZXNzaW5nRW52LCBsb2dnZXIp\nOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFRoZSBlbnRyeSBwb2ludCBm\nb3IgamF2YSBjb21waWxlci4KICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBw\ndWJsaWMgYm9vbGVhbiBwcm9jZXNzKFNldDw/IGV4dGVuZHMgVHlwZUVsZW1l\nbnQ+IGFubm9zLAogICAgICAgIFJvdW5kRW52aXJvbm1lbnQgcm91bmRFbnYp\nIHsKICAgICAgICBpZiAoIXJvdW5kRW52LnByb2Nlc3NpbmdPdmVyKCkpIHsK\nICAgICAgICAgICAgU2V0PD8gZXh0ZW5kcyBFbGVtZW50PiBlbGVtZW50cyA9\nIHJvdW5kRW52LmdldFJvb3RFbGVtZW50cygpOwogICAgICAgICAgICBmb3Ig\nKEVsZW1lbnQgZSA6IGVsZW1lbnRzKSB7CiAgICAgICAgICAgICAgICBwcm9j\nZXNzKChUeXBlRWxlbWVudCkgZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBH\nZW5lcmF0ZSBtZXRhLW1vZGVsIHNvdXJjZSBjb2RlIGZvciB0aGUgZ2l2ZW4g\ndHlwZS4KICAgICAqIAogICAgICogQHJldHVybiB0cnVlIGlmIGNvZGUgaXMg\nZ2VuZXJhdGVkIGZvciB0aGUgZ2l2ZW4gZWxlbWVudC4gZmFsc2Ugb3RoZXJ3\naXNlLgogICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gcHJvY2VzcyhUeXBl\nRWxlbWVudCBlKSB7CiAgICAJaWYgKCFoYW5kbGVyLmlzQW5ub3RhdGVkQXNF\nbnRpdHkoZSkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nIH0KCiAgICAgICAgRWxlbWVudHMgZVV0aWxzID0gcHJvY2Vzc2luZ0Vudi5n\nZXRFbGVtZW50VXRpbHMoKTsKICAgICAgICBTdHJpbmcgb3JpZ2luYWxDbGFz\ncyA9IGVVdGlscy5nZXRCaW5hcnlOYW1lKChUeXBlRWxlbWVudCkgZSkudG9T\ndHJpbmcoKTsKICAgICAgICBTdHJpbmcgb3JpZ2luYWxTaW1wbGVDbGFzcyA9\nIGUuZ2V0U2ltcGxlTmFtZSgpLnRvU3RyaW5nKCk7CiAgICAgICAgU3RyaW5n\nIG1ldGFDbGFzcyA9IGZhY3RvcnkuZ2V0TWV0YU1vZGVsQ2xhc3NOYW1lKG9y\naWdpbmFsQ2xhc3MpOwoKICAgICAgICBTb3VyY2VDb2RlIHNvdXJjZSA9IG5l\ndyBTb3VyY2VDb2RlKG1ldGFDbGFzcyk7CiAgICAgICAgY29tbWVudChzb3Vy\nY2UpOwogICAgICAgIGFubm90YXRlKHNvdXJjZSwgb3JpZ2luYWxDbGFzcyk7\nCiAgICAgICAgVHlwZUVsZW1lbnQgc3VwQ2xzID0gaGFuZGxlci5nZXRQZXJz\naXN0ZW50U3VwZXJ0eXBlKGUpOwogICAgICAgIGlmIChzdXBDbHMgIT0gbnVs\nbCkgewogICAgICAgICAgICBTdHJpbmcgc3VwZXJOYW1lID0gZmFjdG9yeS5n\nZXRNZXRhTW9kZWxDbGFzc05hbWUoCiAgICAgICAgICAgICAgICAgICAgc3Vw\nQ2xzLnRvU3RyaW5nKCkpOwogICAgICAgICAgICBzb3VyY2UuZ2V0VG9wTGV2\nZWxDbGFzcygpLnNldFN1cGVyKHN1cGVyTmFtZSk7CiAgICAgICAgfQogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIFByaW50V3JpdGVyIHdyaXRlciA9IGNy\nZWF0ZVNvdXJjZUZpbGUob3JpZ2luYWxDbGFzcywgbWV0YUNsYXNzLCBlKTsK\nICAgICAgICAgICAgU291cmNlQ29kZS5DbGFzcyBtb2RlbENsYXNzID0gc291\ncmNlLmdldFRvcExldmVsQ2xhc3MoKTsKICAgICAgICAgICAgU2V0PD8gZXh0\nZW5kcyBFbGVtZW50PiBtZW1iZXJzID0gaGFuZGxlci5nZXRQZXJzaXN0ZW50\nTWVtYmVycyhlKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGZvciAoRWxl\nbWVudCBtIDogbWVtYmVycykgewogICAgICAgICAgICAgICAgVHlwZU1pcnJv\nciBkZWNsICA9IGhhbmRsZXIuZ2V0RGVjbGFyZWRUeXBlKG0pOwogICAgICAg\nICAgICAgICAgU3RyaW5nIGZpZWxkTmFtZSA9IGhhbmRsZXIuZ2V0UGVyc2lz\ndGVudE1lbWJlck5hbWUobSk7CiAgICAgICAgICAgICAgICBTdHJpbmcgZmll\nbGRUeXBlID0gaGFuZGxlci5nZXREZWNsYXJlZFR5cGVOYW1lKGRlY2wpOwog\nICAgICAgICAgICAgICAgVHlwZUNhdGVnb3J5IHR5cGVDYXRlZ29yeSA9IHRv\nTWV0YU1vZGVsVHlwZUNhdGVnb3J5KGRlY2wsIGZpZWxkVHlwZSk7CiAgICAg\nICAgICAgICAgICBTdHJpbmcgbWV0YU1vZGVsVHlwZSA9IHR5cGVDYXRlZ29y\neS5nZXRNZXRhTW9kZWxUeXBlKCk7CiAgICAgICAgICAgICAgICBTb3VyY2VD\nb2RlLkZpZWxkIG1vZGVsRmllbGQgPSBudWxsOwogICAgICAgICAgICAgICAg\nc3dpdGNoICh0eXBlQ2F0ZWdvcnkpIHsKICAgICAgICAgICAgICAgIGNhc2Ug\nQVRUUklCVVRFOgogICAgICAgICAgICAgICAgICAgIG1vZGVsRmllbGQgPSBt\nb2RlbENsYXNzLmFkZEZpZWxkKGZpZWxkTmFtZSwgbWV0YU1vZGVsVHlwZSk7\nCiAgICAgICAgICAgICAgICAgICAgbW9kZWxGaWVsZC5hZGRQYXJhbWV0ZXIo\nb3JpZ2luYWxTaW1wbGVDbGFzcykKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgLmFkZFBhcmFtZXRlcihmaWVsZFR5cGUpOwogICAgICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBDT0xMRUNUSU9O\nOgogICAgICAgICAgICAgICAgY2FzZSBMSVNUOgogICAgICAgICAgICAgICAg\nY2FzZSBTRVQ6CiAgICAgICAgICAgICAgICAgICAgVHlwZU1pcnJvciBwYXJh\nbSAgID0gaGFuZGxlci5nZXRUeXBlUGFyYW1ldGVyKG0sIGRlY2wsIDAsIHRy\ndWUpOwogICAgICAgICAgICAgICAgICAgIFN0cmluZyBlbGVtZW50VHlwZSA9\nIGhhbmRsZXIuZ2V0RGVjbGFyZWRUeXBlTmFtZShwYXJhbSk7CiAgICAgICAg\nICAgICAgICAgICAgbW9kZWxGaWVsZCA9IG1vZGVsQ2xhc3MuYWRkRmllbGQo\nZmllbGROYW1lLCBtZXRhTW9kZWxUeXBlKTsKICAgICAgICAgICAgICAgICAg\nICBtb2RlbEZpZWxkLmFkZFBhcmFtZXRlcihvcmlnaW5hbFNpbXBsZUNsYXNz\nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkUGFyYW1ldGVy\nKGVsZW1lbnRUeXBlKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIGNhc2UgTUFQOgogICAgICAgICAgICAgICAgICAgIFR5\ncGVNaXJyb3Iga2V5ICAgPSBoYW5kbGVyLmdldFR5cGVQYXJhbWV0ZXIobSwg\nZGVjbCwgMCwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIFR5cGVNaXJy\nb3IgdmFsdWUgPSBoYW5kbGVyLmdldFR5cGVQYXJhbWV0ZXIobSwgZGVjbCwg\nMSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGtleVR5cGUg\nPSBoYW5kbGVyLmdldERlY2xhcmVkVHlwZU5hbWUoa2V5KTsKICAgICAgICAg\nICAgICAgICAgICBTdHJpbmcgdmFsdWVUeXBlID0gaGFuZGxlci5nZXREZWNs\nYXJlZFR5cGVOYW1lKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBtb2Rl\nbEZpZWxkID0gbW9kZWxDbGFzcy5hZGRGaWVsZChmaWVsZE5hbWUsIG1ldGFN\nb2RlbFR5cGUpOwogICAgICAgICAgICAgICAgICAgIG1vZGVsRmllbGQuYWRk\nUGFyYW1ldGVyKG9yaWdpbmFsU2ltcGxlQ2xhc3MpCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIC5hZGRQYXJhbWV0ZXIoa2V5VHlwZSkKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFBhcmFtZXRlcih2YWx1ZVR5\ncGUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgbW9kZWxGaWVsZC5tYWtlUHVibGljKCku\nbWFrZVN0YXRpYygpLm1ha2VWb2xhdGlsZSgpOwogICAgICAgICAgICB9CiAg\nICAgICAgICAgIHNvdXJjZS53cml0ZSh3cml0ZXIpOwogICAgICAgICAgICB3\ncml0ZXIuZmx1c2goKTsKICAgICAgICAgICAgd3JpdGVyLmNsb3NlKCk7CiAg\nICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlMSkgewogICAgICAgICAgICBsb2dnZXIuZXJyb3IoX2xvYy5nZXQo\nIm1tZy1wcm9jZXNzLWVycm9yIiwgZS5nZXRRdWFsaWZpZWROYW1lKCkpLCBl\nMSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGZpbmFs\nbHkgewoKICAgICAgICB9CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBh\nbm5vdGF0ZShTb3VyY2VDb2RlIHNvdXJjZSwgU3RyaW5nIG9yaWdpbmFsQ2xh\nc3MpIHsKICAgICAgICBTb3VyY2VDb2RlLkNsYXNzIGNscyA9IHNvdXJjZS5n\nZXRUb3BMZXZlbENsYXNzKCk7CiAgICAgICAgY2xzLmFkZEFubm90YXRpb24o\nU3RhdGljTWV0YW1vZGVsLmNsYXNzLmdldE5hbWUoKSkKICAgICAgICAgICAg\nLmFkZEFyZ3VtZW50KCJ2YWx1ZSIsIG9yaWdpbmFsQ2xhc3MgKyAiLmNsYXNz\nIiwgZmFsc2UpOwogICAgICAgIGlmIChnZW5lcmF0ZWRTb3VyY2VWZXJzaW9u\nID49IDYpIHsKICAgICAgICAgICAgY2xzLmFkZEFubm90YXRpb24oR2VuZXJh\ndGVkLmNsYXNzLmdldE5hbWUoKSkKICAgICAgICAgICAgLmFkZEFyZ3VtZW50\nKCJ2YWx1ZSIsIHRoaXMuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpCiAgICAgICAg\nICAgIC5hZGRBcmd1bWVudCgiZGF0ZSIsIG5ldyBEYXRlKCkudG9TdHJpbmco\nKSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgY29t\nbWVudChTb3VyY2VDb2RlIHNvdXJjZSkgewogICAgICAgIGlmIChoZWFkZXIg\nIT0gbnVsbCkKICAgICAgICAgICAgc291cmNlLmFkZENvbW1lbnQoZmFsc2Us\nIGhlYWRlcik7CiAgICAgICAgU3RyaW5nIGRlZmF1bHRIZWFkZXIgPSBfbG9j\nLmdldCgibW1nLXRvb2wtc2lnbiIpLmdldE1lc3NhZ2UoKTsKICAgICAgICBz\nb3VyY2UuYWRkQ29tbWVudChmYWxzZSwgZGVmYXVsdEhlYWRlcik7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogUGFyc2UgYW5ub3RhdGlvbiBwcm9jZXNz\nb3Igb3B0aW9uIDxjb2RlPi1Bc291cmNlPW48L2NvZGU+IHRvIGRldGVjdAog\nICAgICogdGhlIHNvdXJjZSB2ZXJzaW9uIGZvciB0aGUgZ2VuZXJhdGVkIGNs\nYXNzZXMuIAogICAgICogbiBtdXN0IGJlIGEgaW50ZWdlci4gRGVmYXVsdCBv\nciB3cm9uZyBzcGVjaWZpY2F0aW9uIHJldHVybnMgNi4KICAgICAqLwogICAg\ncHJpdmF0ZSB2b2lkIHNldFNvdXJjZVZlcnNpb24oKSB7CiAgICAgICAgU3Ry\naW5nIHZlcnNpb24gPSBwcm9jZXNzaW5nRW52LmdldE9wdGlvbnMoKS5nZXQo\nInNvdXJjZSIpOwogICAgICAgIGlmICh2ZXJzaW9uICE9IG51bGwpIHsKICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGdlbmVyYXRlZFNvdXJj\nZVZlcnNpb24gPSBJbnRlZ2VyLnBhcnNlSW50KHZlcnNpb24pOwogICAgICAg\nICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICAgICAgbG9nZ2VyLndhcm4oX2xvYy5nZXQoIm1tZy1iYWQtc291\ncmNlIiwgdmVyc2lvbiwgNikpOwogICAgICAgICAgICAgICAgZ2VuZXJhdGVk\nU291cmNlVmVyc2lvbiA9IDY7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICBnZW5lcmF0ZWRTb3VyY2VWZXJzaW9uID0gNjsK\nICAgICAgICB9CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBzZXROYW1p\nbmdQb2xpY3koKSB7CiAgICAgICAgU3RyaW5nIHBvbGljeSA9IHByb2Nlc3Np\nbmdFbnYuZ2V0T3B0aW9ucygpLmdldCgibmFtaW5nIik7CiAgICAgICAgaWYg\nKHBvbGljeSAhPSBudWxsKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgICAgICBmYWN0b3J5ID0gKE1ldGFEYXRhRmFjdG9yeSlDbGFzcy5mb3JO\nYW1lKHBvbGljeSkubmV3SW5zdGFuY2UoKTsKICAgICAgICAgICAgfSBjYXRj\naCAoVGhyb3dhYmxlIGUpIHsKICAgICAgICAgICAgICAgIGxvZ2dlci53YXJu\nKF9sb2MuZ2V0KCJtbWctYmFkLW5hbWluZyIsIHBvbGljeSwgZSkpOwogICAg\nICAgICAgICAgICAgZmFjdG9yeSA9IG5ldyBQZXJzaXN0ZW5jZU1ldGFEYXRh\nRmFjdG9yeSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgZmFjdG9yeSA9IG5ldyBQZXJzaXN0ZW5jZU1ldGFEYXRhRmFj\ndG9yeSgpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHJpdmF0ZSB2b2lk\nIHNldEhlYWRlcigpIHsKICAgICAgICBTdHJpbmcgaGVhZGVyT3B0aW9uID0g\ncHJvY2Vzc2luZ0Vudi5nZXRPcHRpb25zKCkuZ2V0KCJoZWFkZXIiKTsKICAg\nICAgICBpZiAoaGVhZGVyT3B0aW9uID09IG51bGwpIHsKICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoIkFTTCIuZXF1YWxzSWdu\nb3JlQ2FzZShoZWFkZXJPcHRpb24pKSB7CiAgICAgICAgICAgIGhlYWRlciA9\nIF9sb2MuZ2V0KCJtbWctYXNsLWhlYWRlciIpLmdldE1lc3NhZ2UoKTsKICAg\nICAgICB9IGVsc2UgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgVVJMIHVybCA9IG5ldyBVUkwoaGVhZGVyT3B0aW9uKTsKICAgICAgICAg\nICAgICAgIGhlYWRlciA9IHVybC5nZXRDb250ZW50KCkudG9TdHJpbmcoKTsK\nICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAg\nICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgCiAg\nICBwcml2YXRlIHZvaWQgc2V0RmlsZU1hbmFnZXIoKSB7CiAgICAgICAgSmF2\nYUNvbXBpbGVyIGNvbXBpbGVyID0gVG9vbFByb3ZpZGVyLmdldFN5c3RlbUph\ndmFDb21waWxlcigpOwogICAgICAgIGZpbGVNYW5hZ2VyID0gY29tcGlsZXIu\nZ2V0U3RhbmRhcmRGaWxlTWFuYWdlcihudWxsLCBudWxsLCBudWxsKTsKICAg\nICAgICBTdHJpbmcgb3V0RGlyID0gcHJvY2Vzc2luZ0Vudi5nZXRPcHRpb25z\nKCkuZ2V0KCJvdXQiKTsKICAgICAgICBpZiAob3V0RGlyICE9IG51bGwpCiAg\nICAgICAgICAgaXNVc2VyU3BlY2lmaWVkT3V0cHV0TG9jYXRpb24gPSBzZXRT\nb3VyY2VPdXRwdXREaXJlY3RvcnkobmV3IEZpbGUob3V0RGlyKSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgZmlsZSB3aGVyZSBzb3VyY2Ug\nY29kZSBvZiB0aGUgZ2l2ZW4gbWV0YUNsYXNzIHdpbGwgYmUgd3JpdHRlbi4K\nICAgICAqIAogICAgICovCiAgICBwcml2YXRlIFByaW50V3JpdGVyIGNyZWF0\nZVNvdXJjZUZpbGUoU3RyaW5nIG9yaWdpbmFsQ2xhc3MsIFN0cmluZyBtZXRh\nQ2xhc3MsIFR5cGVFbGVtZW50IGUpIAogICAgICAgIHRocm93cyBJT0V4Y2Vw\ndGlvbiB7CiAgICAgICAgaWYgKCFpc1VzZXJTcGVjaWZpZWRPdXRwdXRMb2Nh\ndGlvbikgewogICAgICAgICAgICBzZXRTb3VyY2VPdXRwdXREaXJlY3Rvcnko\nT3V0cHV0UGF0aC5nZXRBYnNvbHV0ZURpcmVjdG9yeShwcm9jZXNzaW5nRW52\nLCBlKSk7CiAgICAgICAgfQogICAgICAgIEphdmFGaWxlT2JqZWN0IGphdmFG\naWxlID0gZmlsZU1hbmFnZXIuZ2V0SmF2YUZpbGVGb3JPdXRwdXQoU3RhbmRh\ncmRMb2NhdGlvbi5TT1VSQ0VfT1VUUFVULCAKICAgICAgICAgICAgbWV0YUNs\nYXNzLCBKYXZhRmlsZU9iamVjdC5LaW5kLlNPVVJDRSwgCiAgICAgICAgICAg\nIG51bGwpOyAvLyBkbyBub3QgdXNlIHNpYmxpbmcgaGludCBiZWNhdXNlIG9m\nIGluZGV0ZXJtaW5hYmxlIGJlaGF2aW9yIGFjcm9zcyBKREsgCiAgICAgICAg\nbG9nZ2VyLmluZm8oX2xvYy5nZXQoIm1tZy1wcm9jZXNzIiwgamF2YUZpbGUu\ndG9VcmkoKSkpOwogICAgICAgIE91dHB1dFN0cmVhbSBvdXQgPSBqYXZhRmls\nZS5vcGVuT3V0cHV0U3RyZWFtKCk7CiAgICAgICAgUHJpbnRXcml0ZXIgd3Jp\ndGVyID0gbmV3IFByaW50V3JpdGVyKG91dCk7CiAgICAgICAgcmV0dXJuIHdy\naXRlcjsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBvdXRw\ndXQgZGlyZWN0b3J5IGZvciBnZW5lcmF0ZWQgc291cmNlIGZpbGVzLgogICAg\nICogVHJpZXMgdG8gY3JlYXRlIHRoZSBkaXJlY3Rvcnkgc3RydWN0dXJlIGlm\nIGRvZXMgbm90IGV4aXN0LgogICAgICogCiAgICAgKiBAcmV0dXJuIHRydWUg\naWYgdGhlIG91dHB1dCBoYXMgYmVlbiBzZXQgc3VjY2Vzc2Z1bGx5LgogICAg\nICovCiAgICBib29sZWFuIHNldFNvdXJjZU91dHB1dERpcmVjdG9yeShGaWxl\nIG91dERpcikgewogICAgICAgIGlmIChvdXREaXIgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmICghb3V0RGlyLmV4aXN0\ncygpKSB7CiAgICAgICAgICAgIGlmICghb3V0RGlyLm1rZGlycygpKSB7CiAg\nICAgICAgICAgICAgICBsb2dnZXIud2FybihfbG9jLmdldCgibW1nLWJhZC1v\ndXQiLCBvdXREaXIsIFN0YW5kYXJkTG9jYXRpb24uU09VUkNFX09VVFBVVCkp\nOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZpbGVNYW5h\nZ2VyLnNldExvY2F0aW9uKFN0YW5kYXJkTG9jYXRpb24uU09VUkNFX09VVFBV\nVCwgQ29sbGVjdGlvbnMuc2luZ2xldG9uKG91dERpcikpOwogICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIGxvZ2dlci53YXJuKF9sb2MuZ2V0KCJtbWctYmFk\nLW91dCIsIG91dERpciwgU3RhbmRhcmRMb2NhdGlvbi5TT1VSQ0VfT1VUUFVU\nKSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogQW4gdXRpbGl0eSBjbGFzcyB0byBkZXRl\ncm1pbmUgdGhlIHNvdXJjZSBmaWxlIGNvcnJlc3BvbmRpbmcgdG8gYSB7QGxp\nbmsgVHlwZUVsZW1lbnR9LgogICAgICogVGhlIHV0aWxpdHkgdXNlcyBTdW4g\nSkRLIGludGVybmFsIEFQSSAoY29tLnN1bi50b29scy4qKSBhbmQgaGVuY2Ug\nd29ya3MgcmVmbGVjdGl2ZWx5CiAgICAgKiB0byBhdm9pZCBjb21waWxlLXRp\nbWUgZGVwZW5kZW5jeS4KICAgICAqICAgCiAgICAgKiBAYXV0aG9yIFBpbmFr\naSBQb2RkYXIKICAgICAqCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgY2xh\nc3MgT3V0cHV0UGF0aCB7CiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgQ2xhc3M8\nPz4gdHJlZXMgPSBudWxsOwogICAgICAgIHN0YXRpYyB7CiAgICAgICAgICAg\nIHRyeSB7CiAgICAgICAgICAgICAgICB0cmVlcyA9IENsYXNzLmZvck5hbWUo\nImNvbS5zdW4uc291cmNlLnV0aWwuVHJlZXMiKTsKICAgICAgICAgICAgfSBj\nYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIAogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8qKgogICAgICAg\nICAqIEdldHMgdGhlIGRpcmVjdG9yeSByZWxhdGl2ZSB0byB0aGUgSmF2YSBz\nb3VyY2UgZmlsZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBUeXBlRWxlbWVudC4K\nICAgICAgICAgKiAKICAgICAgICAgKiBAcmV0dXJuIG51bGwgaWYgdGhlIGNv\nbS5zdW4uc291cmNlLnV0aWwuKiBwYWNrYWdlIGlzIG5vdCBhdmFpbGFibGUg\nb3IgdGhlIGdpdmVuIFR5cGVFbGVtZW50CiAgICAgICAgICogZG9lcyBub3Qg\nY29ycmVzcG9uZCB0byBhIGNvbXBpbGF0aW9uIHVuaXQgYXNzb2NpYXRlZCB0\nbyBhIHNvdXJjZSBmaWxlLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBz\ndGF0aWMgRmlsZSBnZXRBYnNvbHV0ZURpcmVjdG9yeShQcm9jZXNzaW5nRW52\naXJvbm1lbnQgZW52LCBUeXBlRWxlbWVudCBlKSB7CiAgICAgICAgICAgIGlm\nICh0cmVlcyA9PSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBUcmVlcyBy\nb290ID0gVHJlZXMuaW5zdGFuY2UoZW52KTsKICAgICAgICAgICAgICAgIE9i\namVjdCByb290ID0gdHJlZXMuZ2V0TWV0aG9kKCJpbnN0YW5jZSIsIG5ldyBD\nbGFzc1tde1Byb2Nlc3NpbmdFbnZpcm9ubWVudC5jbGFzc30pCiAgICAgICAg\nICAgICAgICAgICAgLmludm9rZShudWxsLCBlbnYpOwogICAgICAgICAgICAg\nICAgCiAgICAgICAgICAgICAgICAvLyBUcmVlUGF0aCBwYXRoID0gcm9vdC5n\nZXRQYXRoKGUpOwogICAgICAgICAgICAgICAgT2JqZWN0IHBhdGggPSByb290\nLmdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXRQYXRoIiwgbmV3IENsYXNzW117\nRWxlbWVudC5jbGFzc30pCiAgICAgICAgICAgICAgICAgICAgLmludm9rZShy\nb290LCBlKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8g\nQ29tcGlsYXRpb25Vbml0VHJlZSB1bml0ID0gcGF0aC5nZXRDb21waWxhdGlv\nblVuaXQoKTsKICAgICAgICAgICAgICAgIE9iamVjdCB1bml0ID0gcGF0aC5n\nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0Q29tcGlsYXRpb25Vbml0IiwgKENs\nYXNzW10pbnVsbCkKICAgICAgICAgICAgICAgICAgICAuaW52b2tlKHBhdGgs\nIChPYmplY3RbXSludWxsKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAg\nICAgICAgLy8gSmF2YUZpbGVPYmplY3QgZiA9IHVuaXQuZ2V0U291cmNlRmls\nZSgpOwogICAgICAgICAgICAgICAgSmF2YUZpbGVPYmplY3QgZiA9IChKYXZh\nRmlsZU9iamVjdCl1bml0LmdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXRTb3Vy\nY2VGaWxlIiwgKENsYXNzW10pbnVsbCkKICAgICAgICAgICAgICAgICAgICAu\naW52b2tlKHVuaXQsIChPYmplY3RbXSludWxsKTsKICAgICAgICAgICAgICAg\nIAogICAgICAgICAgICAgICAgVVJJIHVyaSA9IGYudG9VcmkoKTsKICAgICAg\nICAgICAgICAgIEZpbGUgZGlyID0gZ2V0UGFyZW50RmlsZShuZXcgRmlsZSh1\ncmkudG9VUkwoKS5nZXRQYXRoKCkpLCAKICAgICAgICAgICAgICAgICAgICAg\nICAgcGFja2FnZURlcHRoKGUuZ2V0UXVhbGlmaWVkTmFtZSgpLnRvU3RyaW5n\nKCkpKTsKICAgICAgICAgICAgICAgIHJldHVybiBkaXI7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgICAgICByZXR1\ncm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAg\nICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBwYXJlbnQgb2YgdGhlIGdp\ndmVuIGZpbGUgcmVjdXJzaXZlbHkgdHJhdmVyc2luZyB0byBnaXZlbiBudW1i\nZXIgb2YgbGV2ZWxzLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzdGF0\naWMgRmlsZSBnZXRQYXJlbnRGaWxlKEZpbGUgZiwgaW50IG4pIHsKICAgICAg\nICAgICAgaWYgKG4gPCAwKQogICAgICAgICAgICAgICAgcmV0dXJuIGY7CiAg\nICAgICAgICAgIGlmIChuID09IDApCiAgICAgICAgICAgICAgICByZXR1cm4g\nZi5nZXRQYXJlbnRGaWxlKCk7CiAgICAgICAgICAgIHJldHVybiBnZXRQYXJl\nbnRGaWxlKGYuZ2V0UGFyZW50RmlsZSgpLCBuLTEpOwogICAgICAgIH0KICAg\nICAgICAKICAgICAgICBwdWJsaWMgc3RhdGljIGludCBwYWNrYWdlRGVwdGgo\nU3RyaW5nIHMpIHsKICAgICAgICAgICAgU3RyaW5nIHBrZyA9IGdldFBhY2th\nZ2VOYW1lKHMpOwogICAgICAgICAgICBpZiAocGtnID09IG51bGwpCiAgICAg\nICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgaW50IGRlcHRoID0g\nMTsKICAgICAgICAgICAgaW50IGkgPSAwOwogICAgICAgICAgICB3aGlsZSAo\nKGkgPSBwa2cuaW5kZXhPZignLicpKSAhPSAtMSkgewogICAgICAgICAgICAg\nICAgZGVwdGgrKzsKICAgICAgICAgICAgICAgIHBrZyA9IHBrZy5zdWJzdHJp\nbmcoaSsxKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZGVw\ndGg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHB1YmxpYyBzdGF0aWMg\nU3RyaW5nIGdldFBhY2thZ2VOYW1lKFN0cmluZyBzKSB7CiAgICAgICAgICAg\nIGlmIChzID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICAgICAgaW50IGkgPSBzLmxhc3RJbmRleE9mKCcuJyk7CiAgICAg\nICAgICAgIHJldHVybiAoaSA9PSAtMSkgPyBudWxsIDogcy5zdWJzdHJpbmco\nMCwgaSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHB1YmxpYyBzdGF0\naWMgU3RyaW5nIGdldFNpbXBsZU5hbWUoU3RyaW5nIHMpIHsKICAgICAgICAg\nICAgaWYgKHMgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgICAgICBpbnQgaSA9IHMubGFzdEluZGV4T2YoJy4nKTsKICAg\nICAgICAgICAgcmV0dXJuIChpID09IC0xKSA/IHMgOiBzLnN1YnN0cmluZyhp\nKzEpOwogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

