{"sha":"68484e104ec9eecbef28a0a198a70029ec998060","node_id":"MDQ6QmxvYjIwNjM2NDo2ODQ4NGUxMDRlYzllZWNiZWYyOGEwYTE5OGE3MDAyOWVjOTk4MDYw","size":11569,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/68484e104ec9eecbef28a0a198a70029ec998060","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnk7\nCgppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1wb3J0IGphdmEuc3FsLlRpbWVz\ndGFtcDsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZh\nLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkNhbGVuZGFyOwppbXBv\ncnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkNv\nbXBhcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsKaW1wb3J0IGphdmEu\ndXRpbC5MaW5rZWRMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKCi8q\nKgogKiBJbXBsZW1lbnRzIFF1ZXJ5RGVmaW5pdGlvbi4KICogCiAqIEBhdXRo\nb3IgUGluYWtpIFBvZGRhcgogKgogKi8KcHVibGljIGNsYXNzIFF1ZXJ5RGVm\naW5pdGlvbkltcGwgZXh0ZW5kcyBFeHByZXNzaW9uSW1wbCAKICAgIGltcGxl\nbWVudHMgUXVlcnlEZWZpbml0aW9uLCBFeHByZXNzaW9uICB7Cglwcml2YXRl\nIGZpbmFsIFF1ZXJ5QnVpbGRlckltcGwgX2J1aWxkZXI7Cglwcml2YXRlIExp\nc3Q8QWJzdHJhY3REb21haW5PYmplY3Q+IF9kb21haW5zOwoJcHJpdmF0ZSBM\naXN0PFBhdGhFeHByZXNzaW9uPiBfZ3JvdXBCeXM7Cglwcml2YXRlIExpc3Q8\nT3JkZXJhYmxlSXRlbT4gX29yZGVyQnlzOwoJcHJpdmF0ZSBMaXN0PFNlbGVj\ndEl0ZW0+ICBfcHJvamVjdGlvbnM7Cglwcml2YXRlIGJvb2xlYW4gIF9kaXN0\naW5jdDsKCXByaXZhdGUgUHJlZGljYXRlIF93aGVyZTsKCXByaXZhdGUgUHJl\nZGljYXRlIF9oYXZpbmc7CgkKCXByaXZhdGUgc3RhdGljIGVudW0gVmlzaXQg\ne1BST0pFQ1RJT04sIEVYUFJFU1NJT04sIEpPSU5BQkxFfTsKCQoJcHJvdGVj\ndGVkIHN0YXRpYyBMb2NhbGl6ZXIgX2xvYyA9IAoJCUxvY2FsaXplci5mb3JQ\nYWNrYWdlKFF1ZXJ5RGVmaW5pdGlvbkltcGwuY2xhc3MpOwoJCgkvKioKCSAq\nIAoJICogQHBhcmFtIGJ1aWxkZXIKCSAqLwoJcHJvdGVjdGVkIFF1ZXJ5RGVm\naW5pdGlvbkltcGwoUXVlcnlCdWlsZGVySW1wbCBidWlsZGVyKSB7CgkJX2J1\naWxkZXIgPSBidWlsZGVyOwoJfQoJCgkvKioKCSAqIFJvb3QgZG9tYWluIG9i\namVjdCBoYXMgbm8gcGFyZW50LCBubyBwYXRoIGJ1dCBhIG5vbi1udWxsIENs\nYXNzLgoJICovCglwdWJsaWMgRG9tYWluT2JqZWN0IGFkZFJvb3QoQ2xhc3Mg\nY2xzKSB7CgkJUm9vdFBhdGggcm9vdCA9IG5ldyBSb290UGF0aCh0aGlzLCBj\nbHMpOwoJCWFkZERvbWFpbihyb290KTsKCQlyZXR1cm4gcm9vdDsKCX0KCQoJ\ncHVibGljIERvbWFpbk9iamVjdCBhZGRTdWJxdWVyeVJvb3QoUGF0aEV4cHJl\nc3Npb24gcGF0aCkgewoJCUFic3RyYWN0UGF0aCBpbXBsID0gKEFic3RyYWN0\nUGF0aClwYXRoOwoJCUxpbmtlZExpc3Q8QWJzdHJhY3RQYXRoPiBwYXRocyA9\nIGltcGwuc3BsaXQoKTsKCQlRdWVyeURlZmluaXRpb25JbXBsIG93bmVyID0g\naW1wbC5nZXRPd25lcigpOwoJCWludCBpID0gMDsKCQl3aGlsZSAoaSA8IHBh\ndGhzLnNpemUoKSAmJiBvd25lci5oYXNEb21haW4ocGF0aHMuZ2V0KGkpKSkg\newoJCQlpKys7CgkJfQoJCQoJCUFic3RyYWN0UGF0aCBuZXh0ID0gcGF0aHMu\nZ2V0KGkpOwoJCURvbWFpbk9iamVjdCBuZXdSb290ID0gbmV3IE5hdmlnYXRp\nb25QYXRoKHRoaXMsIAogICAgICAgICAgICAgICAgbmV4dC5nZXRQYXJlbnQo\nKSwgbmV4dC5nZXRMYXN0U2VnbWVudCgpLnRvU3RyaW5nKCkpOwoJCWFkZERv\nbWFpbigoQWJzdHJhY3REb21haW5PYmplY3QpbmV3Um9vdCk7CgkJaSsrOwoJ\nCWZvciAoOyBpIDwgcGF0aHMuc2l6ZSgpOyBpKyspIHsKCQkJbmV4dCA9IHBh\ndGhzLmdldChpKTsKICAgICAgICAgICAgbmV3Um9vdCA9IG5ld1Jvb3Quam9p\nbihuZXh0LmdldExhc3RTZWdtZW50KCkudG9TdHJpbmcoKSk7CgkJfQoJCXJl\ndHVybiBuZXdSb290OwoJfQoJCglib29sZWFuIGhhc0RvbWFpbihQYXRoRXhw\ncmVzc2lvbiBwYXRoKSB7CgkJcmV0dXJuIF9kb21haW5zICE9IG51bGwgJiYg\nX2RvbWFpbnMuY29udGFpbnMocGF0aCk7Cgl9CgkKCXByb3RlY3RlZCA8VCBl\neHRlbmRzIEFic3RyYWN0RG9tYWluT2JqZWN0PiBUIGFkZERvbWFpbihUIHBh\ndGgpIHsKCQlpZiAoX2RvbWFpbnMgPT0gbnVsbCkKCQkJX2RvbWFpbnMgPSBu\nZXcgQXJyYXlMaXN0PEFic3RyYWN0RG9tYWluT2JqZWN0PigpOwoJCV9kb21h\naW5zLmFkZChwYXRoKTsKCQlyZXR1cm4gcGF0aDsKCX0KCglwdWJsaWMgU3Vi\ncXVlcnkgYWxsKCkgewoJCXJldHVybiBuZXcgQWxsRXhwcmVzc2lvbih0aGlz\nKTsKCX0KCglwdWJsaWMgU3VicXVlcnkgYW55KCkgewoJCXJldHVybiBuZXcg\nQW55RXhwcmVzc2lvbih0aGlzKTsKCX0KCglwdWJsaWMgRXhwcmVzc2lvbiBj\nb2FsZXNjZShFeHByZXNzaW9uLi4uIGV4cCkgewoJCXRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwoJfQoKCXB1YmxpYyBFeHBy\nZXNzaW9uIGNvYWxlc2NlKFN0cmluZy4uLiBleHApIHsKCQl0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKCX0KCglwdWJsaWMg\nRXhwcmVzc2lvbiBjb2FsZXNjZShEYXRlLi4uIGV4cCkgewoJCXRocm93IG5l\ndyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwoJfQoKCXB1Ymxp\nYyBFeHByZXNzaW9uIGNvYWxlc2NlKENhbGVuZGFyLi4uIGV4cCkgewoJCXRo\ncm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwoJfQoK\nCXB1YmxpYyBFeHByZXNzaW9uIGN1cnJlbnREYXRlKCkgewoJCXJldHVybiBu\nZXcgQ3VycmVudFRpbWVFeHByZXNzaW9uKERhdGUuY2xhc3MpOwoJfQoKCXB1\nYmxpYyBFeHByZXNzaW9uIGN1cnJlbnRUaW1lKCkgewoJCXJldHVybiBuZXcg\nQ3VycmVudFRpbWVFeHByZXNzaW9uKFRpbWUuY2xhc3MpOwoJfQoKCXB1Ymxp\nYyBFeHByZXNzaW9uIGN1cnJlbnRUaW1lc3RhbXAoKSB7CgkJcmV0dXJuIG5l\ndyBDdXJyZW50VGltZUV4cHJlc3Npb24oVGltZXN0YW1wLmNsYXNzKTsKCX0K\nCglwdWJsaWMgUHJlZGljYXRlIGV4aXN0cygpIHsKCQlyZXR1cm4gbmV3IEV4\naXN0c0V4cHJlc3Npb24odGhpcyk7Cgl9CgoJcHVibGljIENhc2VFeHByZXNz\naW9uIGdlbmVyYWxDYXNlKCkgewoJCXJldHVybiBuZXcgQ2FzZUV4cHJlc3Np\nb25JbXBsKCk7Cgl9CgoJcHVibGljIFF1ZXJ5RGVmaW5pdGlvbiBncm91cEJ5\nKFBhdGhFeHByZXNzaW9uLi4uIHBhdGhFeHBycykgewoJCWlmIChfZ3JvdXBC\neXMgPT0gbnVsbCkgewoJCQlfZ3JvdXBCeXMgPSBuZXcgQXJyYXlMaXN0PFBh\ndGhFeHByZXNzaW9uPigpOwoJCX0gZWxzZSB7CgkJCV9ncm91cEJ5cy5jbGVh\ncigpOwoJCX0KCQlmb3IgKFBhdGhFeHByZXNzaW9uIGUgOiBwYXRoRXhwcnMp\nCgkJCV9ncm91cEJ5cy5hZGQoZSk7CgkJcmV0dXJuIHRoaXM7Cgl9CgoJcHVi\nbGljIFF1ZXJ5RGVmaW5pdGlvbiBncm91cEJ5KExpc3Q8UGF0aEV4cHJlc3Np\nb24+IHBhdGhFeHByTGlzdCkgewoJCWlmIChfZ3JvdXBCeXMgPT0gbnVsbCkg\newoJCQlfZ3JvdXBCeXMgPSBuZXcgQXJyYXlMaXN0PFBhdGhFeHByZXNzaW9u\nPigpOwoJCX0gZWxzZSB7CgkJCV9ncm91cEJ5cy5jbGVhcigpOwoJCX0KCQlm\nb3IgKFBhdGhFeHByZXNzaW9uIGUgOiBwYXRoRXhwckxpc3QpCgkJCV9ncm91\ncEJ5cy5hZGQoZSk7CgkJcmV0dXJuIHRoaXM7Cgl9CgoJcHVibGljIFF1ZXJ5\nRGVmaW5pdGlvbiBoYXZpbmcoUHJlZGljYXRlIHByZWRpY2F0ZSkgewoJCV9o\nYXZpbmcgPSBwcmVkaWNhdGU7CgkJcmV0dXJuIHRoaXM7Cgl9CgoJcHVibGlj\nIEV4cHJlc3Npb24gbGl0ZXJhbChTdHJpbmcgcykgewoJCXJldHVybiBuZXcg\nTGl0ZXJhbEV4cHJlc3Npb24ocyk7Cgl9CgoJcHVibGljIEV4cHJlc3Npb24g\nbGl0ZXJhbChOdW1iZXIgbikgewoJCXJldHVybiBuZXcgTGl0ZXJhbEV4cHJl\nc3Npb24obik7Cgl9CgoJcHVibGljIEV4cHJlc3Npb24gbGl0ZXJhbChib29s\nZWFuIGIpIHsKCQlyZXR1cm4gbmV3IExpdGVyYWxFeHByZXNzaW9uKGIpOwoJ\nfQoKCXB1YmxpYyBFeHByZXNzaW9uIGxpdGVyYWwoQ2FsZW5kYXIgYykgewoJ\nCXJldHVybiBuZXcgTGl0ZXJhbEV4cHJlc3Npb24oYyk7Cgl9CgoJcHVibGlj\nIEV4cHJlc3Npb24gbGl0ZXJhbChEYXRlIGQpIHsKCQlyZXR1cm4gbmV3IExp\ndGVyYWxFeHByZXNzaW9uKGQpOwoJfQoKCXB1YmxpYyBFeHByZXNzaW9uIGxp\ndGVyYWwoY2hhciBjKSB7CgkJcmV0dXJuIG5ldyBMaXRlcmFsRXhwcmVzc2lv\nbihjKTsKCX0KCglwdWJsaWMgRXhwcmVzc2lvbiBsaXRlcmFsKENsYXNzIGNs\ncykgewoJCXJldHVybiBuZXcgTGl0ZXJhbEV4cHJlc3Npb24oY2xzKTsKCX0K\nCglwdWJsaWMgRXhwcmVzc2lvbiBsaXRlcmFsKEVudW08Pz4gZSkgewoJCXJl\ndHVybiBuZXcgTGl0ZXJhbEV4cHJlc3Npb24oZSk7Cgl9CgoJcHVibGljIEV4\ncHJlc3Npb24gbnVsbExpdGVyYWwoKSB7CgkJcmV0dXJuIG5ldyBMaXRlcmFs\nRXhwcmVzc2lvbihudWxsKTsKCX0KCglwdWJsaWMgU2VsZWN0SXRlbSBuZXdJ\nbnN0YW5jZShDbGFzcyBjbHMsIFNlbGVjdEl0ZW0uLi4gYXJncykgewoJCXJl\ndHVybiBuZXcgTmV3SW5zdGFuY2UoY2xzLCBhcmdzKTsKCX0KCglwdWJsaWMg\nRXhwcmVzc2lvbiBudWxsaWYoRXhwcmVzc2lvbiBleHAxLCBFeHByZXNzaW9u\nIGV4cDIpIHsKCQl0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNl\ncHRpb24oKTsKCX0KCglwdWJsaWMgRXhwcmVzc2lvbiBudWxsaWYoTnVtYmVy\nIGFyZzEsIE51bWJlciBhcmcyKSB7CgkJdGhyb3cgbmV3IFVuc3VwcG9ydGVk\nT3BlcmF0aW9uRXhjZXB0aW9uKCk7Cgl9CgoJcHVibGljIEV4cHJlc3Npb24g\nbnVsbGlmKFN0cmluZyBhcmcxLCBTdHJpbmcgYXJnMikgewoJCXRocm93IG5l\ndyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwoJfQoKCXB1Ymxp\nYyBFeHByZXNzaW9uIG51bGxpZihEYXRlIGFyZzEsIERhdGUgYXJnMikgewoJ\nCXRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwoJ\nfQoKCXB1YmxpYyBFeHByZXNzaW9uIG51bGxpZihDYWxlbmRhciBhcmcxLCBD\nYWxlbmRhciBhcmcyKSB7CgkJdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7Cgl9CgoJcHVibGljIEV4cHJlc3Npb24gbnVsbGlm\nKENsYXNzIGFyZzEsIENsYXNzIGFyZzIpIHsKCQl0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKCX0KCglwdWJsaWMgRXhwcmVz\nc2lvbiBudWxsaWYoRW51bTw/PiBhcmcxLCBFbnVtPD8+IGFyZzIpIHsKCQl0\naHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKCX0K\nCglwdWJsaWMgUXVlcnlEZWZpbml0aW9uIG9yZGVyQnkoT3JkZXJCeUl0ZW0u\nLi4gb3JkZXJCeUl0ZW1zKSB7CgkJaWYgKF9vcmRlckJ5cyA9PSBudWxsKQoJ\nCQlfb3JkZXJCeXMgPSBuZXcgQXJyYXlMaXN0PE9yZGVyYWJsZUl0ZW0+KCk7\nCgkJZWxzZQoJCQlfb3JkZXJCeXMuY2xlYXIoKTsKCQlmb3IgKE9yZGVyQnlJ\ndGVtIGkgOiBvcmRlckJ5SXRlbXMpIHsKCQkJaWYgKGkgaW5zdGFuY2VvZiBP\ncmRlcmFibGVJdGVtKQoJCQkJX29yZGVyQnlzLmFkZCgoT3JkZXJhYmxlSXRl\nbSlpKTsKCQkJZWxzZQogICAgICAgICAgICAgICAgX29yZGVyQnlzLmFkZChu\nZXcgT3JkZXJhYmxlSXRlbSgoRXhwcmVzc2lvbkltcGwpaSkpOwoJCX0KCQly\nZXR1cm4gdGhpczsKCX0KCglwdWJsaWMgUXVlcnlEZWZpbml0aW9uIG9yZGVy\nQnkoTGlzdDxPcmRlckJ5SXRlbT4gb3JkZXJCeUl0ZW1MaXN0KSB7CgkJaWYg\nKF9vcmRlckJ5cyA9PSBudWxsKQoJCQlfb3JkZXJCeXMgPSBuZXcgQXJyYXlM\naXN0PE9yZGVyYWJsZUl0ZW0+KCk7CgkJZWxzZQoJCQlfb3JkZXJCeXMuY2xl\nYXIoKTsKCQlmb3IgKE9yZGVyQnlJdGVtIGkgOiBvcmRlckJ5SXRlbUxpc3Qp\nIHsKCQkJaWYgKGkgaW5zdGFuY2VvZiBPcmRlcmFibGVJdGVtKQoJCQkJX29y\nZGVyQnlzLmFkZCgoT3JkZXJhYmxlSXRlbSlpKTsKCQkJZWxzZQogICAgICAg\nICAgICAgICAgX29yZGVyQnlzLmFkZChuZXcgT3JkZXJhYmxlSXRlbSgoRXhw\ncmVzc2lvbkltcGwpaSwgbnVsbCkpOwoJCX0KCQlyZXR1cm4gdGhpczsKCX0K\nCglwdWJsaWMgRXhwcmVzc2lvbiBwYXJhbShTdHJpbmcgbmFtZSkgewoJCXJl\ndHVybiBuZXcgUGFyYW1ldGVyRXhwcmVzc2lvbihuYW1lKTsKCX0KCglwdWJs\naWMgUHJlZGljYXRlIHByZWRpY2F0ZShib29sZWFuIGIpIHsKCQlyZXR1cm4g\nbnVsbDsKCX0KCglwdWJsaWMgUXVlcnlEZWZpbml0aW9uIHNlbGVjdChTZWxl\nY3RJdGVtLi4uIGl0ZW1zKSB7CiAgICAgICAgcmV0dXJuIHNlbGVjdChpdGVt\ncyA9PSBudWxsID8gbnVsbCA6IEFycmF5cy5hc0xpc3QoaXRlbXMpLCBmYWxz\nZSk7Cgl9CgoJcHVibGljIFF1ZXJ5RGVmaW5pdGlvbiBzZWxlY3QoTGlzdDxT\nZWxlY3RJdGVtPiBpdGVtcykgewoJCXJldHVybiBzZWxlY3QoaXRlbXMsIGZh\nbHNlKTsKCX0KCglwdWJsaWMgUXVlcnlEZWZpbml0aW9uIHNlbGVjdERpc3Rp\nbmN0KFNlbGVjdEl0ZW0uLi4gaXRlbXMpIHsKICAgICAgICByZXR1cm4gc2Vs\nZWN0KGl0ZW1zID09IG51bGwgPyBudWxsIDogQXJyYXlzLmFzTGlzdChpdGVt\ncyksIHRydWUpOwoJfQoKCXB1YmxpYyBRdWVyeURlZmluaXRpb24gc2VsZWN0\nRGlzdGluY3QoTGlzdDxTZWxlY3RJdGVtPiBpdGVtcykgewoJCXJldHVybiBz\nZWxlY3QoaXRlbXMsIHRydWUpOwoJfQoJCiAgICBwcml2YXRlIFF1ZXJ5RGVm\naW5pdGlvbiBzZWxlY3QoTGlzdDxTZWxlY3RJdGVtPiBpdGVtcywgYm9vbGVh\nbiBpc0Rpc3RpbmN0KSB7CgkJaWYgKF9wcm9qZWN0aW9ucyA9PSBudWxsKSB7\nCgkJCV9wcm9qZWN0aW9ucyA9IG5ldyBBcnJheUxpc3Q8U2VsZWN0SXRlbT4o\nKTsKCQl9IGVsc2UgewoJCQlfcHJvamVjdGlvbnMuY2xlYXIoKTsKCQl9CgkJ\nX2Rpc3RpbmN0ID0gaXNEaXN0aW5jdDsKCQlmb3IgKFNlbGVjdEl0ZW0gaXRl\nbSA6IGl0ZW1zKQoJCQlfcHJvamVjdGlvbnMuYWRkKGl0ZW0pOwoJCXJldHVy\nbiB0aGlzOwoJfQoKCXB1YmxpYyBDYXNlRXhwcmVzc2lvbiBzaW1wbGVDYXNl\nKEV4cHJlc3Npb24gY2FzZU9wZXJhbmQpIHsKCQlyZXR1cm4gbmV3IENhc2VF\neHByZXNzaW9uSW1wbChjYXNlT3BlcmFuZCk7Cgl9CgoJcHVibGljIENhc2VF\neHByZXNzaW9uIHNpbXBsZUNhc2UoTnVtYmVyIGNhc2VPcGVyYW5kKSB7CgkJ\ncmV0dXJuIG5ldyBDYXNlRXhwcmVzc2lvbkltcGwoY2FzZU9wZXJhbmQpOwoJ\nfQoKCXB1YmxpYyBDYXNlRXhwcmVzc2lvbiBzaW1wbGVDYXNlKFN0cmluZyBj\nYXNlT3BlcmFuZCkgewoJCXJldHVybiBuZXcgQ2FzZUV4cHJlc3Npb25JbXBs\nKGNhc2VPcGVyYW5kKTsKCX0KCglwdWJsaWMgQ2FzZUV4cHJlc3Npb24gc2lt\ncGxlQ2FzZShEYXRlIGNhc2VPcGVyYW5kKSB7CgkJcmV0dXJuIG5ldyBDYXNl\nRXhwcmVzc2lvbkltcGwoY2FzZU9wZXJhbmQpOwoJfQoKCXB1YmxpYyBDYXNl\nRXhwcmVzc2lvbiBzaW1wbGVDYXNlKENhbGVuZGFyIGNhc2VPcGVyYW5kKSB7\nCgkJcmV0dXJuIG5ldyBDYXNlRXhwcmVzc2lvbkltcGwoY2FzZU9wZXJhbmQp\nOwoJfQoKCXB1YmxpYyBDYXNlRXhwcmVzc2lvbiBzaW1wbGVDYXNlKENsYXNz\nIGNhc2VPcGVyYW5kKSB7CgkJcmV0dXJuIG5ldyBDYXNlRXhwcmVzc2lvbklt\ncGwoY2FzZU9wZXJhbmQpOwoJfQoKCXB1YmxpYyBDYXNlRXhwcmVzc2lvbiBz\naW1wbGVDYXNlKEVudW08Pz4gY2FzZU9wZXJhbmQpIHsKCQlyZXR1cm4gbmV3\nIENhc2VFeHByZXNzaW9uSW1wbChjYXNlT3BlcmFuZCk7Cgl9CgoJcHVibGlj\nIFN1YnF1ZXJ5IHNvbWUoKSB7CgkJcmV0dXJuIG5ldyBTb21lRXhwcmVzc2lv\nbih0aGlzKTsKCX0KCglwdWJsaWMgUXVlcnlEZWZpbml0aW9uIHdoZXJlKFBy\nZWRpY2F0ZSBwcmVkaWNhdGUpIHsKCQlfd2hlcmUgPSBwcmVkaWNhdGU7CgkJ\ncmV0dXJuIHRoaXM7Cgl9CgkKCXByaXZhdGUgTGlzdDxTZWxlY3RJdGVtPiBn\nZXRQcm9qZWN0aW9ucygpIHsKCQlpZiAoX3Byb2plY3Rpb25zID09IG51bGwp\nIHsKICAgICAgICAgICAgTGlzdDxTZWxlY3RJdGVtPiBkZWZhdWx0UHJvamVj\ndGlvbiA9IG5ldyBBcnJheUxpc3Q8U2VsZWN0SXRlbT4oKTsKCQkJZGVmYXVs\ndFByb2plY3Rpb24uYWRkKF9kb21haW5zLmdldCgwKSk7CgkJCXJldHVybiBk\nZWZhdWx0UHJvamVjdGlvbjsKCQl9CgkJcmV0dXJuIF9wcm9qZWN0aW9uczsK\nCX0KCglAT3ZlcnJpZGUKCXB1YmxpYyBTdHJpbmcgYXNFeHByZXNzaW9uKEFs\naWFzQ29udGV4dCBjdHgpIHsKCQljdHgucHVzaCh0aGlzKTsKCQlTdHJpbmdC\ndWlsZGVyIGJ1ZmZlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CgkJcmVnaXN0\nZXJEb21haW5zKGN0eCk7CgkJU3RyaW5nIHNlbGVjdCA9IF9kaXN0aW5jdCA/\nICJTRUxFQ1QgRElTVElOQ1QgIiA6ICJTRUxFQ1QgIjsKICAgICAgICBmaWxs\nQnVmZmVyKHNlbGVjdCwgYnVmZmVyLCBjdHgsIGdldFByb2plY3Rpb25zKCks\nIFZpc2l0LlBST0pFQ1RJT04pOwoJCWZpbGxCdWZmZXIoIiBGUk9NICIsIGJ1\nZmZlciwgY3R4LCBfZG9tYWlucywgVmlzaXQuSk9JTkFCTEUpOwoJCWZpbGxC\ndWZmZXIoIiBXSEVSRSAiLCBidWZmZXIsIGN0eCwgX3doZXJlKTsKICAgICAg\nICBmaWxsQnVmZmVyKCIgR1JPVVAgQlkgIiwgYnVmZmVyLCBjdHgsIF9ncm91\ncEJ5cywgVmlzaXQuRVhQUkVTU0lPTik7CgkJZmlsbEJ1ZmZlcigiIEhBVklO\nRyAiLCBidWZmZXIsIGN0eCwgX2hhdmluZyk7CiAgICAgICAgZmlsbEJ1ZmZl\ncigiIE9SREVSIEJZICIsIGJ1ZmZlciwgY3R4LCBfb3JkZXJCeXMsIFZpc2l0\nLkVYUFJFU1NJT04pOwoJCQoJCXJldHVybiBidWZmZXIudG9TdHJpbmcoKTsK\nCX0KCQoJcHVibGljIFN0cmluZyBhc1Byb2plY3Rpb24oQWxpYXNDb250ZXh0\nIGN0eCkgewoJCXJldHVybiBhc0V4cHJlc3Npb24oY3R4KTsKCX0KCQogICAg\ncHVibGljIHZvaWQgZmlsbEJ1ZmZlcihTdHJpbmcgaGVhZGVyLCBTdHJpbmdC\ndWlsZGVyIGJ1ZmZlciwgQWxpYXNDb250ZXh0IGN0eCwKCQlMaXN0IGxpc3Qs\nIFZpc2l0IHZpc2l0KSB7CgkJaWYgKGxpc3QgPT0gbnVsbCB8fCBsaXN0Lmlz\nRW1wdHkoKSkKCQkJcmV0dXJuOwoJCWJ1ZmZlci5hcHBlbmQoaGVhZGVyKTsK\nCQlmb3IgKGludCBpID0gMDsgaSA8IGxpc3Quc2l6ZSgpOyBpKyspIHsKCQkJ\nVmlzaXRhYmxlIHYgPSAoVmlzaXRhYmxlKWxpc3QuZ2V0KGkpOwoJCQlzd2l0\nY2godmlzaXQpIHsKCQkJY2FzZSBQUk9KRUNUSU9OIDogYnVmZmVyLmFwcGVu\nZCh2LmFzUHJvamVjdGlvbihjdHgpKQogICAgICAgICAgICAgICAgICAgICAg\nIC5hcHBlbmQoaSAhPSBsaXN0LnNpemUoKS0xID8gIiwgIiA6ICIgIik7CgkJ\nCQlicmVhazsKCQkJY2FzZSBFWFBSRVNTSU9OIDogYnVmZmVyLmFwcGVuZCh2\nLmFzRXhwcmVzc2lvbihjdHgpKQogICAgICAgICAgICAgICAgICAgICAgICAu\nYXBwZW5kKGkgIT0gbGlzdC5zaXplKCktMSA/ICIsICIgOiAiICIpOwoJCQkJ\nYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSk9JTkFCTEUgICA6IGJ1ZmZlci5h\ncHBlbmQoaSA+IDAgJiYgdiBpbnN0YW5jZW9mIFJvb3RQYXRoID8gCiAgICAg\nICAgICAgICAgICAgICAgICAgICIsICIgOiAiICIpLmFwcGVuZCh2LmFzSm9p\nbmFibGUoY3R4KSk7CgkJCQlicmVhazsKCQkJfQoJCX0KCX0KCQogICAgcHVi\nbGljIHZvaWQgZmlsbEJ1ZmZlcihTdHJpbmcgaGVhZGVyLCBTdHJpbmdCdWls\nZGVyIGJ1ZmZlciwgQWxpYXNDb250ZXh0IGN0eCwKCQkJUHJlZGljYXRlIHAp\nIHsKCQlpZiAocCA9PSBudWxsKQoJCQlyZXR1cm47CgkJVmlzaXRhYmxlIHYg\nPSAoVmlzaXRhYmxlKXA7CgkJYnVmZmVyLmFwcGVuZChoZWFkZXIpOwoJCWJ1\nZmZlci5hcHBlbmQodi5hc0V4cHJlc3Npb24oY3R4KSk7Cgl9CgkKCS8qKgog\nICAgICogUmVnaXN0ZXJzIGVhY2ggZG9tYWluIHdpdGggYW4gYWxpYXMuIEFs\nc28gc2V0IGFsaWFzIGZvciBvcmRlciBieSBpdGVtcwoJICogdGhhdCBhcmUg\ncHJvamVjdGVkLgoJICovCglwcml2YXRlIHZvaWQgcmVnaXN0ZXJEb21haW5z\nKEFsaWFzQ29udGV4dCBjdHgpIHsKCQlpZiAoX2RvbWFpbnMgIT0gbnVsbCkg\newoJCQlDb2xsZWN0aW9ucy5zb3J0KF9kb21haW5zLCBuZXcgRG9tYWluU29y\ndGVyKCkpOwoJCQlmb3IgKEFic3RyYWN0RG9tYWluT2JqZWN0IGRvbWFpbiA6\nIF9kb21haW5zKSB7CgkJCQljdHguc2V0QWxpYXMoZG9tYWluKTsKCQkJfQoJ\nCX0KCQlpZiAoX29yZGVyQnlzICE9IG51bGwpIHsKCQkJZm9yIChPcmRlcmFi\nbGVJdGVtIG8gOiBfb3JkZXJCeXMpIHsKCQkJCUV4cHJlc3Npb25JbXBsIGUg\nPSBvLmdldEV4cHJlc3Npb24oKTsKICAgICAgICAgICAgICAgIGlmIChfcHJv\namVjdGlvbnMgIT0gbnVsbCAmJiBfcHJvamVjdGlvbnMuY29udGFpbnMoZSkp\nCgkJCQkJY3R4LnNldEFsaWFzKGUpOwoJCQl9CgkJfQoJfQoJCglzdGF0aWMg\nY2xhc3MgRG9tYWluU29ydGVyIGltcGxlbWVudHMgQ29tcGFyYXRvcjxBYnN0\ncmFjdERvbWFpbk9iamVjdD4gewoJCXN0YXRpYyBMaXN0PENsYXNzPiBfb3Jk\nZXIgPSBBcnJheXMuYXNMaXN0KG5ldyBDbGFzc1tdIHsKICAgICAgICAgICAg\nICAgIFJvb3RQYXRoLmNsYXNzLCBOYXZpZ2F0aW9uUGF0aC5jbGFzcywgT3Bl\ncmF0b3JQYXRoLmNsYXNzLCAKCQkJCUpvaW5QYXRoLmNsYXNzLCBGZXRjaFBh\ndGguY2xhc3MsIH0gKTsKCQkKICAgICAgICBwdWJsaWMgaW50IGNvbXBhcmUo\nQWJzdHJhY3REb21haW5PYmplY3QgYSwgQWJzdHJhY3REb21haW5PYmplY3Qg\nYikgewogICAgICAgICAgICByZXR1cm4gX29yZGVyLmluZGV4T2YoYS5nZXRD\nbGFzcygpKSAtIF9vcmRlci5pbmRleE9mKGIuZ2V0Q2xhc3MoKSk7CgkJfQoJ\nfQp9Cg==\n","encoding":"base64"}

