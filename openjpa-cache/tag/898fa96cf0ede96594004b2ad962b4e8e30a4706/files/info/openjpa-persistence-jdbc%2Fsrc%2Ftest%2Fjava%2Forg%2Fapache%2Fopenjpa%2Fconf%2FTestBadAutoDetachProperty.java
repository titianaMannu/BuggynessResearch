{"sha":"d2363b977d566d628e0875325eb0604a6a023306","node_id":"MDQ6QmxvYjIwNjM2NDpkMjM2M2I5NzdkNTY2ZDYyOGUwODc1MzI1ZWIwNjA0YTZhMDIzMzA2","size":4784,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d2363b977d566d628e0875325eb0604a6a023306","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZjsKCmltcG9ydCBqYXZh\nLnV0aWwuSGFzaE1hcDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRp\ndHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFu\nYWdlckZhY3Rvcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5QZXJzaXN0\nZW5jZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNlRXhj\nZXB0aW9uOwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0Q2FzZTsKCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuUGFyc2VFeGNlcHRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5OwoKcHVibGljIGNsYXNzIFRlc3RC\nYWRBdXRvRGV0YWNoUHJvcGVydHkgZXh0ZW5kcyBUZXN0Q2FzZSB7CiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RW1wdHlWYWx1ZSgpIHsKICAgICAgICBIYXNoTWFw\nIHByb3BzID0gbmV3IEhhc2hNYXAoU3lzdGVtLmdldFByb3BlcnRpZXMoKSk7\nCiAgICAgICAgcHJvcHMucHV0KCJvcGVuanBhLkF1dG9EZXRhY2giLCAiIik7\nCiAgICAgICAgRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mID0gKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSkgUGVyc2lzdGVuY2UKICAgICAgICAgICAg\nICAgIC5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgidGVzdCIsIHByb3Bz\nKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIGVtZi5j\nbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RDb21tYU9ubHlW\nYWx1ZSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBIYXNoTWFwIHBy\nb3BzID0gbmV3IEhhc2hNYXAoU3lzdGVtLmdldFByb3BlcnRpZXMoKSk7CiAg\nICAgICAgICAgIHByb3BzLnB1dCgib3BlbmpwYS5BdXRvRGV0YWNoIiwgIiwi\nKTsKICAgICAgICAgICAgRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mID0gKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSkgUGVyc2lzdGVuY2UKICAgICAg\nICAgICAgICAgICAgICAuY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkoInRl\nc3QiLCBwcm9wcyk7CiAgICAgICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBlbS5jbG9z\nZSgpOwogICAgICAgICAgICBlbWYuY2xvc2UoKTsKICAgICAgICB9IGNhdGNo\nIChQZXJzaXN0ZW5jZUV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIFRocm93\nYWJsZSBjYXVzZSA9IGUuZ2V0Q2F1c2UoKTsKICAgICAgICAgICAgaWYgKGNh\ndXNlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIC8vIEdlcm9uaW1vIFBl\ncnNpc3RlbmNlLmNsYXNzIHNpbmdsZSBwcm92aWRlciBzZW1hbnRpY3MKICAg\nICAgICAgICAgICAgIHdoaWxlIChjYXVzZSBpbnN0YW5jZW9mIFBlcnNpc3Rl\nbmNlRXhjZXB0aW9uKQogICAgICAgICAgICAgICAgICAgIGNhdXNlID0gKChQ\nZXJzaXN0ZW5jZUV4Y2VwdGlvbikgY2F1c2UpLmdldENhdXNlKCk7CiAgICAg\nICAgICAgICAgICBpZiAoIShjYXVzZSBpbnN0YW5jZW9mIFBhcnNlRXhjZXB0\naW9uKSkgewogICAgICAgICAgICAgICAgICAgIGZhaWwoIlNob3VsZCBoYXZl\nIGNhdWdodCBQZXJzaXN0ZW5jZUV4Y2VwdGlvbiB3aG9zZSBjYXVzZSB3YXMg\nIiArICJhIFBhcnNlRXhjZXB0aW9uLiAiCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICArICJJbnN0ZWFkIHRoZSBjYXVzZSB3YXM6ICIgKyBjYXVzZSk7\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAg\nICAgICAgICAgICAvLyBHZXJvbmltbyBQZXJzaXN0ZW5jZS5jbGFzcyBtdWx0\naXBsZSBwcm92aWRlcnMgc2VtYW50aWNzCiAgICAgICAgICAgICAgICBTdHJp\nbmcgbXNnID0gZS5nZXRNZXNzYWdlKCk7CiAgICAgICAgICAgICAgICBpZiAo\nbXNnLmluZGV4T2YoIm9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5QYXJz\nZUV4Y2VwdGlvbiIpID09IC0xKQogICAgICAgICAgICAgICAgICAgIGZhaWwo\nIlNob3VsZCBoYXZlIGNhdWdodCBQZXJzaXN0ZW5jZUV4Y2VwdGlvbiB3aG9z\nZSBjYXVzZSB3YXMgIiArICJhIFBhcnNlRXhjZXB0aW9uLiAiCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICArICJJbnN0ZWFkIHRoZSBjYXVzZSB3YXM6\nICIgKyBjYXVzZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChS\ndW50aW1lRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbCgiU2hvdWxk\nIGhhdmUgY2F1Z2h0IGEgUGVyc2lzdGVuY2VFeGNlcHRpb24sIGluc3RlYWQg\nY2F1Z2h0OiAiCiAgICAgICAgICAgICAgICAgICAgKyBlKTsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVtcHR5SXRlbVZhbHVlKCkg\newogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEhhc2hNYXAgcHJvcHMgPSBu\nZXcgSGFzaE1hcChTeXN0ZW0uZ2V0UHJvcGVydGllcygpKTsKICAgICAgICAg\nICAgcHJvcHMucHV0KCJvcGVuanBhLkF1dG9EZXRhY2giLCAiY2xvc2UsLGNv\nbW1pdCIpOwogICAgICAgICAgICBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYg\nPSAoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5KSBQZXJzaXN0ZW5jZQog\nICAgICAgICAgICAgICAgICAgIC5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9y\neSgidGVzdCIsIHByb3BzKTsKICAgICAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIGVt\nLmNsb3NlKCk7CiAgICAgICAgICAgIGVtZi5jbG9zZSgpOwogICAgICAgIH0g\nY2F0Y2ggKFBlcnNpc3RlbmNlRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nVGhyb3dhYmxlIGNhdXNlID0gZS5nZXRDYXVzZSgpOwogICAgICAgICAgICBp\nZiAoY2F1c2UgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgLy8gR2Vyb25p\nbW8gUGVyc2lzdGVuY2UuY2xhc3Mgc2luZ2xlIHByb3ZpZGVyIHNlbWFudGlj\ncwogICAgICAgICAgICAgICAgd2hpbGUgKGNhdXNlIGluc3RhbmNlb2YgUGVy\nc2lzdGVuY2VFeGNlcHRpb24pCiAgICAgICAgICAgICAgICAgICAgY2F1c2Ug\nPSAoKFBlcnNpc3RlbmNlRXhjZXB0aW9uKSBjYXVzZSkuZ2V0Q2F1c2UoKTsK\nICAgICAgICAgICAgICAgIGlmICghKGNhdXNlIGluc3RhbmNlb2YgUGFyc2VF\neGNlcHRpb24pKSB7CiAgICAgICAgICAgICAgICAgICAgZmFpbCgiU2hvdWxk\nIGhhdmUgY2F1Z2h0IFBlcnNpc3RlbmNlRXhjZXB0aW9uIHdob3NlIGNhdXNl\nIHdhcyAiICsgImEgUGFyc2VFeGNlcHRpb24uICIKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICsgIkluc3RlYWQgdGhlIGNhdXNlIHdhczogIiArIGNh\ndXNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsK\nICAgICAgICAgICAgICAgIC8vIEdlcm9uaW1vIFBlcnNpc3RlbmNlLmNsYXNz\nIG11bHRpcGxlIHByb3ZpZGVycyBzZW1hbnRpY3MKICAgICAgICAgICAgICAg\nIFN0cmluZyBtc2cgPSBlLmdldE1lc3NhZ2UoKTsKICAgICAgICAgICAgICAg\nIGlmIChtc2cuaW5kZXhPZigib3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLlBhcnNlRXhjZXB0aW9uIikgPT0gLTEpCiAgICAgICAgICAgICAgICAgICAg\nZmFpbCgiU2hvdWxkIGhhdmUgY2F1Z2h0IFBlcnNpc3RlbmNlRXhjZXB0aW9u\nIHdob3NlIGNhdXNlIHdhcyAiICsgImEgUGFyc2VFeGNlcHRpb24uICIKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICsgIkluc3RlYWQgdGhlIGNhdXNl\nIHdhczogIiArIGNhdXNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0\nY2ggKFJ1bnRpbWVFeGNlcHRpb24gZSkgewogICAgICAgICAgICBmYWlsKCJT\naG91bGQgaGF2ZSBjYXVnaHQgYSBQZXJzaXN0ZW5jZUV4Y2VwdGlvbiwgaW5z\ndGVhZCBjYXVnaHQ6ICIKICAgICAgICAgICAgICAgICAgICArIGUpOwogICAg\nICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

