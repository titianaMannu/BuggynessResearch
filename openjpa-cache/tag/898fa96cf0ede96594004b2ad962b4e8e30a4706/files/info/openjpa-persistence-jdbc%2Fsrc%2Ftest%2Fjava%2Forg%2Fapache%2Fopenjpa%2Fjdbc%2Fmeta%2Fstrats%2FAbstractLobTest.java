{"sha":"aa743e543c49644e1517ba1dca48008d9369bdd2","node_id":"MDQ6QmxvYjIwNjM2NDphYTc0M2U1NDNjNDk2NDRlMTUxN2JhMWRjYTQ4MDA4ZDkzNjliZGQy","size":10295,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/aa743e543c49644e1517ba1dca48008d9369bdd2","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\nCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHM7\nCgppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRp\nbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQg\namF2YS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50\naXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5OwoK\naW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3Vy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlLkRh\ndGFDYWNoZVBDRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuTXlTUUxEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc3FsLk9yYWNsZURpY3Rpb25hcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMU2VydmVyRGljdGlvbmFyeTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuSlBBRmFj\nYWRlSGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7Cgov\nKioKICogVGhpcyBhYnN0cmFjdCBjbGFzcyBkZWZpbmVzIGFsbCB0aGUgdGVz\ndHMgZm9yIExPQiBzdHJlYW1pbmcuCiAqCiAqIEBhdXRob3IgSWduYWNpbyBB\nbmRyZXUKICogQHNpbmNlIDEuMS4wCiAqLwoKcHVibGljIGFic3RyYWN0IGNs\nYXNzIEFic3RyYWN0TG9iVGVzdCBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNl\nIHsKCiAgICBwcm90ZWN0ZWQgTGlzdDxDbGFzczw/IGV4dGVuZHMgREJEaWN0\naW9uYXJ5Pj4gc3VwcG9ydGVkRGF0YWJhc2VzID0KICAgICAgICBuZXcgQXJy\nYXlMaXN0PENsYXNzPD8gZXh0ZW5kcyBEQkRpY3Rpb25hcnk+PgogICAgICAg\nICAgICAoQXJyYXlzLmFzTGlzdChNeVNRTERpY3Rpb25hcnkuY2xhc3MsIE9y\nYWNsZURpY3Rpb25hcnkuY2xhc3MsIFNRTFNlcnZlckRpY3Rpb25hcnkuY2xh\nc3MpKTsKICAgICAgICAKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgc2V0U3VwcG9ydGVkRGF0YWJhc2VzKHN1\ncHBvcnRlZERhdGFiYXNlcy50b0FycmF5KG5ldyBDbGFzczw/PltdIHt9KSk7\nCiAgICAgICAgaWYgKGlzVGVzdHNEaXNhYmxlZCgpKSB7CiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHN1cGVyLnNldFVwKGdldExv\nYkVudGl0eUNsYXNzKCksIENMRUFSX1RBQkxFUywKICAgICAgICAgICAgIm9w\nZW5qcGEuRGF0YUNhY2hlIiwgInRydWUiLAogICAgICAgICAgICAib3Blbmpw\nYS5SZW1vdGVDb21taXRQcm92aWRlciIsICJzanZtIiwKICAgICAgICAgICAg\nIm9wZW5qcGEuQ29ubmVjdGlvblJldGFpbk1vZGUiLCAidHJhbnNhY3Rpb24i\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbnNlcnQoTG9iRW50aXR5IGxl\nKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgIGVtLnBlcnNpc3QobGUpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW5zZXJ0KCkgewogICAgICAgIGlu\nc2VydChuZXdMb2JFbnRpdHkoY3JlYXRlTG9iRGF0YSgpLCAxKSk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdEluc2VydEFuZFNlbGVjdCgpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIHMgPSBjcmVhdGVMb2JE\nYXRhKCk7CiAgICAgICAgaW5zZXJ0KG5ld0xvYkVudGl0eShzLCAxKSk7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoK\nICAgICAgICBRdWVyeSBxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KGdldFNlbGVj\ndFF1ZXJ5KCkpOwogICAgICAgIExvYkVudGl0eSBlbnRpdHkgPSAoTG9iRW50\naXR5KSBxdWVyeS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKGVudGl0eS5nZXRTdHJlYW0oKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKHMsIGdldFN0cmVhbUNvbnRlbnRBc1N0cmluZyhlbnRpdHkuZ2V0U3Ry\nZWFtKCkpKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdEluc2VydE51bGwoKSB7CiAgICAgICAgaW5zZXJ0KG5ld0xvYkVudGl0\neShudWxsLCAxKSk7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIExvYkVudGl0eSBsZSA9IChMb2JFbnRp\ndHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xhc3MoKSwgMSk7CiAgICAgICAg\nYXNzZXJ0TnVsbChsZS5nZXRTdHJlYW0oKSk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RVcGRhdGUoKSB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgICAgIGluc2VydChuZXdMb2JFbnRpdHkoY3JlYXRlTG9i\nRGF0YSgpLCAxKSk7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIExvYkVudGl0eSBlbnRpdHkgPSAoTG9i\nRW50aXR5KSBlbS5maW5kKGdldExvYkVudGl0eUNsYXNzKCksIDEpOwogICAg\nICAgIFN0cmluZyBzdHJpbmcgPSBjcmVhdGVMb2JEYXRhMigpOwogICAgICAg\nIGNoYW5nZVN0cmVhbShlbnRpdHksIHN0cmluZyk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW50aXR5\nID0gKExvYkVudGl0eSkgZW0uZmluZChnZXRMb2JFbnRpdHlDbGFzcygpLCAx\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoc3RyaW5nLCBnZXRTdHJlYW1Db250\nZW50QXNTdHJpbmcoZW50aXR5LmdldFN0cmVhbSgpKSk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RVcGRhdGVXaXRoTnVsbCgp\nIHsKICAgICAgICBpbnNlcnQobmV3TG9iRW50aXR5KGNyZWF0ZUxvYkRhdGEo\nKSwgMSkpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBMb2JFbnRpdHkgZW50aXR5ID0gKExvYkVudGl0\neSkgZW0uZmluZChnZXRMb2JFbnRpdHlDbGFzcygpLCAxKTsKICAgICAgICBl\nbnRpdHkuc2V0U3RyZWFtKG51bGwpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVudGl0eSA9IChMb2JF\nbnRpdHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xhc3MoKSwgMSk7CiAgICAg\nICAgYXNzZXJ0TnVsbChlbnRpdHkuZ2V0U3RyZWFtKCkpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFVwZGF0ZUFOdWxs\nT2JqZWN0V2l0aG91dE51bGwoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAg\nICAgIGluc2VydChuZXdMb2JFbnRpdHkobnVsbCwgMSkpOwogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBM\nb2JFbnRpdHkgZW50aXR5ID0gKExvYkVudGl0eSkgZW0uZmluZChnZXRMb2JF\nbnRpdHlDbGFzcygpLCAxKTsKICAgICAgICBTdHJpbmcgc3RyaW5nID0gY3Jl\nYXRlTG9iRGF0YTIoKTsKICAgICAgICBjaGFuZ2VTdHJlYW0oZW50aXR5LCBz\ndHJpbmcpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIGVudGl0eSA9IChMb2JFbnRpdHkpIGVtLmZpbmQo\nZ2V0TG9iRW50aXR5Q2xhc3MoKSwgMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKHN0cmluZywgZ2V0U3RyZWFtQ29udGVudEFzU3RyaW5nKGVudGl0eS5nZXRT\ndHJlYW0oKSkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdERlbGV0ZSgpIHsKICAgICAgICBpbnNlcnQobmV3TG9iRW50\naXR5KGNyZWF0ZUxvYkRhdGEoKSwgMSkpOwogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBMb2JFbnRpdHkg\nZW50aXR5ID0gKExvYkVudGl0eSkgZW0uZmluZChnZXRMb2JFbnRpdHlDbGFz\ncygpLCAxKTsKICAgICAgICBlbS5yZW1vdmUoZW50aXR5KTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBR\ndWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoZ2V0U2VsZWN0UXVlcnkoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDAsIHEuZ2V0UmVzdWx0TGlzdCgpLnNpemUo\nKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0TGlmZUN5Y2xlSW5zZXJ0Rmx1c2hNb2RpZnkoKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIExv\nYkVudGl0eSBsZSA9IG5ld0xvYkVudGl0eShjcmVhdGVMb2JEYXRhKCksIDEp\nOwogICAgICAgIGVtLnBlcnNpc3QobGUpOwogICAgICAgIGVtLmZsdXNoKCk7\nCiAgICAgICAgY2hhbmdlU3RyZWFtKGxlLCBjcmVhdGVMb2JEYXRhMigpKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdExpZmVD\neWNsZUxvYWRGbHVzaE1vZGlmeUZsdXNoKCkgewogICAgICAgIGluc2VydChu\nZXdMb2JFbnRpdHkoY3JlYXRlTG9iRGF0YSgpLCAxKSk7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIExv\nYkVudGl0eSBlbnRpdHkgPSAoTG9iRW50aXR5KSBlbS5maW5kKGdldExvYkVu\ndGl0eUNsYXNzKCksIDEpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAg\nY2hhbmdlU3RyZWFtKGVudGl0eSwgY3JlYXRlTG9iRGF0YTIoKSk7CiAgICAg\nICAgZW0uZmx1c2goKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdFJlYWRpbmdNdWx0aXBsZVRpbWVzV2l0aEFTaW5nbGVDb25u\nZWN0aW9uKCkKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIGluc2VydChuZXdMb2JFbnRpdHkoY3JlYXRlTG9iRGF0YSgpLCAxKSk7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIExvYkVudGl0eSBsZSA9IChMb2JFbnRpdHkpIGVtLmZpbmQoZ2V0\nTG9iRW50aXR5Q2xhc3MoKSwgMSk7CiAgICAgICAgU3RyaW5nIHN0cmluZyA9\nIGNyZWF0ZUxvYkRhdGEyKCk7CiAgICAgICAgY2hhbmdlU3RyZWFtKGxlLCBz\ndHJpbmcpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIGxlID0gKExvYkVudGl0eSkgZW0uZmluZChnZXRM\nb2JFbnRpdHlDbGFzcygpLCAxKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGxl\nLmdldFN0cmVhbSgpKTsKICAgICAgICBMb2JFbnRpdHkgZW50aXR5ID0gbmV3\nTG9iRW50aXR5KGNyZWF0ZUxvYkRhdGEoKSwgMik7CiAgICAgICAgZW0ucGVy\nc2lzdChlbnRpdHkpOwogICAgICAgIGFzc2VydEVxdWFscyhzdHJpbmcsIGdl\ndFN0cmVhbUNvbnRlbnRBc1N0cmluZyhsZS5nZXRTdHJlYW0oKSkpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGF0YUNhY2hl\nKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIExvYkVudGl0eSBsZSA9IG5ld0xvYkVu\ndGl0eShjcmVhdGVMb2JEYXRhKCksIDEpOwogICAgICAgIGVtLnBlcnNpc3Qo\nbGUpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAg\nICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IGVtZi5nZXRDb25m\naWd1cmF0aW9uKCk7CiAgICAgICAgT2JqZWN0IG8gPSBlbS5nZXRPYmplY3RJ\nZChsZSk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gSlBBRmFjYWRl\nSGVscGVyLmdldE1ldGFEYXRhKGxlKTsKICAgICAgICBPYmplY3Qgb2JqZWN0\nSWQgPSBKUEFGYWNhZGVIZWxwZXIudG9PcGVuSlBBT2JqZWN0SWQobWV0YSwg\nbyk7CiAgICAgICAgRGF0YUNhY2hlUENEYXRhIHBjZCA9CiAgICAgICAgICAg\nIGNvbmYuZ2V0RGF0YUNhY2hlTWFuYWdlckluc3RhbmNlKCkKICAgICAgICAg\nICAgICAgIC5nZXRTeXN0ZW1EYXRhQ2FjaGUoKS5nZXQob2JqZWN0SWQpOwog\nICAgICAgIGFzc2VydEZhbHNlKHBjZC5pc0xvYWRlZChtZXRhLmdldEZpZWxk\nKCJzdHJlYW0iKS5nZXRJbmRleCgpKSk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2V0UmVzZXRBbmRGbHVzaCgp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIExvYkVudGl0eSBsZSA9\nIG5ld0xvYkVudGl0eShjcmVhdGVMb2JEYXRhKCksIDEpOwogICAgICAgIGVt\nLnBlcnNpc3QobGUpOwogICAgICAgIFN0cmluZyBzdHJpbmcgPSBjcmVhdGVM\nb2JEYXRhMigpOwogICAgICAgIGNoYW5nZVN0cmVhbShsZSwgc3RyaW5nKTsK\nICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIExvYkVudGl0eSBlbnRpdHkg\nPSAoTG9iRW50aXR5KSBlbS5maW5kKGdldExvYkVudGl0eUNsYXNzKCksIDEp\nOwogICAgICAgIGFzc2VydEVxdWFscyhzdHJpbmcsIGdldFN0cmVhbUNvbnRl\nbnRBc1N0cmluZyhlbnRpdHkuZ2V0U3RyZWFtKCkpKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFNldEZsdXNoQW5kUmVzZXQo\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBMb2JFbnRpdHkgbGUg\nPSBuZXdMb2JFbnRpdHkoY3JlYXRlTG9iRGF0YSgpLCAxKTsKICAgICAgICBl\nbS5wZXJzaXN0KGxlKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIFN0\ncmluZyBzdHJpbmcgPSBjcmVhdGVMb2JEYXRhMigpOwogICAgICAgIGNoYW5n\nZVN0cmVhbShsZSwgc3RyaW5nKTsKICAgICAgICBMb2JFbnRpdHkgZW50aXR5\nID0gKExvYkVudGl0eSkgZW0uZmluZChnZXRMb2JFbnRpdHlDbGFzcygpLCAx\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoc3RyaW5nLCBnZXRTdHJlYW1Db250\nZW50QXNTdHJpbmcoZW50aXR5LmdldFN0cmVhbSgpKSk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgY3JlYXRlTG9iRGF0YSgp\nIHsKICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMucmVwZWF0KCJvb09PT09v\nbywgIiwgMzAwMCk7CiAgICB9CgogICAgcHJvdGVjdGVkIFN0cmluZyBjcmVh\ndGVMb2JEYXRhMigpIHsKICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMucmVw\nZWF0KCJpaUlJSUlpaSwgIiwgMTAwMCk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIGFic3RyYWN0IENsYXNzIGdldExvYkVudGl0eUNsYXNzKCk7CgogICAgcHJv\ndGVjdGVkIGFic3RyYWN0IFN0cmluZyBnZXRTdHJlYW1Db250ZW50QXNTdHJp\nbmcoT2JqZWN0IG8pCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uOwoKICAg\nIHByb3RlY3RlZCBhYnN0cmFjdCBMb2JFbnRpdHkgbmV3TG9iRW50aXR5KFN0\ncmluZyBzLCBpbnQgaWQpOwoKICAgIHByb3RlY3RlZCBhYnN0cmFjdCBMb2JF\nbnRpdHkgbmV3TG9iRW50aXR5Rm9yTG9hZENvbnRlbnQoU3RyaW5nIHMsIGlu\ndCBpZCk7CgogICAgcHJvdGVjdGVkIGFic3RyYWN0IFN0cmluZyBnZXRTZWxl\nY3RRdWVyeSgpOwoKICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIGNoYW5n\nZVN0cmVhbShMb2JFbnRpdHkgbGUsIFN0cmluZyBzKTsKfQo=\n","encoding":"base64"}

