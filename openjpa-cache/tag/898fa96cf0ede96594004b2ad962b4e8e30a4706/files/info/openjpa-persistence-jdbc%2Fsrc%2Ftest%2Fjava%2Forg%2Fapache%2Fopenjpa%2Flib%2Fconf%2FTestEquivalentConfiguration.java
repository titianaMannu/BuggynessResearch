{"sha":"3dbb29da2eb5592e5c86f6f210b0cbe5042342a0","node_id":"MDQ6QmxvYjIwNjM2NDozZGJiMjlkYTJlYjU1OTJlNWM4NmY2ZjIxMGIwY2JlNTA0MjM0MmEw","size":13932,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3dbb29da2eb5592e5c86f6f210b0cbe5042342a0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZjsKCmltcG9ydCBqYXZh\nLnV0aWwuUHJvcGVydGllczsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5\nTWFuYWdlckZhY3Rvcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5QZXJz\naXN0ZW5jZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVu\nSlBBQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5l\nbmhhbmNlLlRlc3RFbmhhbmNlbWVudFdpdGhNdWx0aXBsZVBVczsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5EYXRhU291cmNlRmFj\ndG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EZXJi\neURpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0\nZW5jZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5j\nb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LkFsbG93RmFpbHVyZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LkRhdGFi\nYXNlUGxhdGZvcm07CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsKCmltcG9ydCBqdW5pdC5m\ncmFtZXdvcmsuVGVzdENhc2U7CgovKioKICogVGVzdHMgdGhhdCBjb25maWd1\ncmF0aW9uIHByb3BlcnRpZXMgY2FuIGJlIHNwZWNpZmllZCBib3RoIGFzIG5l\ndwogKiBqYXZheC5wZXJzaXN0ZW5jZS4qIG5hbWVzcGFjZSBhbmQgb2xkIG9w\nZW5qcGEuKiBuYW1lc3BhY2UuIFRoZSB0d28gc3R5bGUgY2FuCiAqIGFsc28g\nYmUgbWl4ZWQgd2hlcmUgb25lIHByb3BlcnR5IGlzIGluIGphdmF4LiogbmFt\nZXNwYWNlIHRoZSBvdGhlciBpbgogKiBvcGVuanBhLiouIEJ1dCBzYW1lIHBy\nb3BlcnR5IGNhbiBub3QgYmUgc3BlY2lmaWVkIGluIGJvdGggc3R5bGUuCiAq\nIAogKiBUZXN0cyB3aXRoIGRpZmZlcmVudCBjb25maWd1cmF0aW9uIHNvdXJj\nZXMgc3VjaCBhcyBwZXJzaXN0ZW5jZS54bWwsIFN5c3RlbQogKiBwcm9wZXJ0\naWVzIGFuZCBydW50aW1lIHByb3BlcnRpZXMuCiAqIAogKiBAYXV0aG9yIFBp\nbmFraSBQb2RkYXIKICogCiAqLwoKQERhdGFiYXNlUGxhdGZvcm0oIm9yZy5h\ncGFjaGUuZGVyYnkuamRiYy5FbWJlZGRlZERyaXZlciIpCnB1YmxpYyBjbGFz\ncyBUZXN0RXF1aXZhbGVudENvbmZpZ3VyYXRpb24gZXh0ZW5kcyBTaW5nbGVF\nTUZUZXN0Q2FzZSB7CiAgICBwcml2YXRlIEVudGl0eU1hbmFnZXJGYWN0b3J5\nIGVtZjsKCiAgICBwcml2YXRlIFByb3BlcnRpZXMgX3N5c3RlbTsKCiAgICBw\ncml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgT0xEX1NUWUxFX1VSTF9LRVkg\nICAgPSAib3BlbmpwYS5Db25uZWN0aW9uVVJMIjsKICAgIHByaXZhdGUgc3Rh\ndGljIGZpbmFsIFN0cmluZyBPTERfU1RZTEVfRFJJVkVSX0tFWSA9CiAgICAg\nICAgIm9wZW5qcGEuQ29ubmVjdGlvbkRyaXZlck5hbWUiOwogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgU3RyaW5nIE5FV19TVFlMRV9EUklWRVJfS0VZID0K\nICAgICAgICAiamF2YXgucGVyc2lzdGVuY2UuamRiYy5kcml2ZXIiOwogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIE5FV19TVFlMRV9VUkxfS0VZ\nICAgID0KICAgICAgICAiamF2YXgucGVyc2lzdGVuY2UuamRiYy51cmwiOwoK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZ1tdIEtFWVMgPSB7IAog\nICAgICAgIE9MRF9TVFlMRV9EUklWRVJfS0VZLCBPTERfU1RZTEVfVVJMX0tF\nWSwgCiAgICAgICAgTkVXX1NUWUxFX0RSSVZFUl9LRVksIE5FV19TVFlMRV9V\nUkxfS0VZIH07CgogICAgLy8gTk9URTogTm9uLXN0YW5kYXJkIG5hbWluZyBi\nZWNhdXNlIGFub3RoZXIgdGVzdCBpbiB0aGUgaGFybmVzcyBzY2FucyBhbGwg\nCiAgICAvLyBNRVRBLUlORi9wZXJzaXN0ZW5jZS54bWwgYW5kIGZhaWxzIGFz\nIHRoaXMgZmlsZSBjb250YWlucyBjb25mbGljdGluZwogICAgLy8gcHJvcGVy\ndHkga2V5cyBmb3IgdGVzdGluZy4KICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIFN0cmluZyBQRVJTSVNURU5DRV9VTklUID0KICAgICAgICAib3JnL2FwYWNo\nZS9vcGVuanBhL2xpYi9jb25mL01FVEEtSU5GL3BlcnNpc3RlbmNlLWNvbmZp\nZy54bWwiOwogICAgCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nT0xEX1NUWUxFX1VOSVRfTkFNRSA9ICJvbGQtc3R5bGUiOwogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgU3RyaW5nIE5FV19TVFlMRV9VTklUX05BTUUgPSAi\nbmV3LXN0eWxlIjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBN\nSVhFRF9TVFlMRV9VTklUX05BTUUgPSAibWl4ZWQtc3R5bGUiOwogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIENPTkZMSUNUX1NUWUxFX1VOSVRf\nTkFNRSA9ICJjb25mbGljdC1zdHlsZSI7CgogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgU3RyaW5nIFNZU1RFTV9DT05GSUdVUkVEX1VOSVRfTkFNRSAgPQog\nICAgICAgICJzeXN0ZW0tY29uZmlndXJlZCI7CiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBTdHJpbmcgUlVOVElNRV9DT05GSUdVUkVEX1VOSVRfTkFNRSA9\nCiAgICAgICAgInJ1bnRpbWUtY29uZmlndXJlZCI7CiAgICAKICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIFN0cmluZyBVUkwgICAgPQogICAgICAgICJqZGJj\nOmRlcmJ5OnRhcmdldC9kYXRhYmFzZS9vcGVuanBhLXRlc3QtZGF0YWJhc2U7\nY3JlYXRlPXRydWUiOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5n\nIERSSVZFUiA9ICJvcmcuYXBhY2hlLmRlcmJ5LmpkYmMuRW1iZWRkZWREcml2\nZXIiOwoKICAgIC8qKgogICAgICogRXJhc2UgdGhhdCBTeXN0ZW0gcHJvcGVy\ndGllcyB0byBlbnN1cmUgdGhleSBhcmUgbm90IGltcGFjdGluZyB0aGUKICAg\nICAqIGNvbmZpZ3VyYXRpb24gYXMgdGVzdCBoYXJuZXNzIGluc2VydHMgdGhl\nIFN5c3RlbSBwcm9wZXJ0aWVzIGZvcgogICAgICogY29ubmVjdGlvbiBwYXJh\nbWV0ZXJzLgogICAgICovCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lk\nIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gT25seSBy\ndW4gb24gRGVyYnkKICAgICAgICBzZXRTdXBwb3J0ZWREYXRhYmFzZXMoCiAg\nICAgICAgICAgIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EZXJieURp\nY3Rpb25hcnkuY2xhc3MpOwogICAgICAgIF9zeXN0ZW0gPSBiYWNrdXAoKTsK\nICAgICAgICBjbGVhcihfc3lzdGVtKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUK\nICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlvbiB7\nCiAgICAgICAgcmVzdG9yZShfc3lzdGVtKTsKICAgICAgICBzdXBlci50ZWFy\nRG93bigpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFRlc3RzIHRoYXQg\nb3BlbmpwYS4qIG5hbWVzcGFjZSBjYW4gYmUgdXNlZCBmb3IgcGVyc2lzdGVu\nY2UueG1sLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0T2xkU3R5bGVQ\nZXJzaXN0ZW5jZVVuaXRDb25maWd1cmF0aW9uKCkgewogICAgICAgIGVtZiA9\nIE9wZW5KUEFQZXJzaXN0ZW5jZS5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9y\neShPTERfU1RZTEVfVU5JVF9OQU1FLAogICAgICAgICAgICBQRVJTSVNURU5D\nRV9VTklUKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbWYpOwogICAgICAg\nIGFzc2VydFRydWUoY29udGFpbnNQcm9wZXJ0eShPTERfU1RZTEVfRFJJVkVS\nX0tFWSkpOwogICAgICAgIGFzc2VydFRydWUoY29udGFpbnNQcm9wZXJ0eShP\nTERfU1RZTEVfVVJMX0tFWSkpOwogICAgICAgIGFzc2VydEZhbHNlKGNvbnRh\naW5zUHJvcGVydHkoTkVXX1NUWUxFX0RSSVZFUl9LRVkpKTsKICAgICAgICBh\nc3NlcnRGYWxzZShjb250YWluc1Byb3BlcnR5KE5FV19TVFlMRV9VUkxfS0VZ\nKSk7CgogICAgICAgIHZlcmlmeURhdGFiYXNlQ29ubmVjdGlvbigpOwogICAg\nfQoKICAgIC8qKgogICAgICogVGVzdHMgdGhhdCBqYXZheC4qIG5hbWVzcGFj\nZSBjYW4gYmUgdXNlZCBmb3IgcGVyc2lzdGVuY2UueG1sLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0TmV3U3R5bGVQZXJzaXN0ZW5jZVVuaXRDb25m\naWd1cmF0aW9uKCkgewogICAgICAgIGVtZiA9IE9wZW5KUEFQZXJzaXN0ZW5j\nZS5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeShORVdfU1RZTEVfVU5JVF9O\nQU1FLAogICAgICAgICAgICBQRVJTSVNURU5DRV9VTklUKTsKCiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChlbWYpOwogICAgICAgIGFzc2VydFRydWUoY29udGFp\nbnNQcm9wZXJ0eShORVdfU1RZTEVfRFJJVkVSX0tFWSkpOwogICAgICAgIGFz\nc2VydFRydWUoY29udGFpbnNQcm9wZXJ0eShORVdfU1RZTEVfVVJMX0tFWSkp\nOwogICAgICAgIGFzc2VydEZhbHNlKGNvbnRhaW5zUHJvcGVydHkoT0xEX1NU\nWUxFX0RSSVZFUl9LRVkpKTsKICAgICAgICBhc3NlcnRGYWxzZShjb250YWlu\nc1Byb3BlcnR5KE9MRF9TVFlMRV9VUkxfS0VZKSk7CgogICAgICAgIHZlcmlm\neURhdGFiYXNlQ29ubmVjdGlvbigpOwogICAgfQoKICAgIC8qKgogICAgICog\nVGVzdHMgdGhhdCBvcGVuanBhLiogYW5kIGphdmF4LiogbmFtZXNwYWNlIGNh\nbiBib3RoIGJlIHVzZWQgZm9yCiAgICAgKiBwZXJzaXN0ZW5jZS54bWwuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RNaXhlZFN0eWxlUGVyc2lzdGVu\nY2VVbml0Q29uZmlndXJhdGlvbigpIHsKICAgICAgICBlbWYgPSBPcGVuSlBB\nUGVyc2lzdGVuY2UuY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkoCiAgICAg\nICAgICAgIE1JWEVEX1NUWUxFX1VOSVRfTkFNRSwgUEVSU0lTVEVOQ0VfVU5J\nVCk7CgogICAgICAgIGFzc2VydE5vdE51bGwoZW1mKTsKICAgICAgICBhc3Nl\ncnRUcnVlKGNvbnRhaW5zUHJvcGVydHkoTkVXX1NUWUxFX0RSSVZFUl9LRVkp\nKTsKICAgICAgICBhc3NlcnRGYWxzZShjb250YWluc1Byb3BlcnR5KE5FV19T\nVFlMRV9VUkxfS0VZKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UoY29udGFpbnNQ\ncm9wZXJ0eShPTERfU1RZTEVfRFJJVkVSX0tFWSkpOwogICAgICAgIGFzc2Vy\ndFRydWUoY29udGFpbnNQcm9wZXJ0eShPTERfU1RZTEVfVVJMX0tFWSkpOwoK\nICAgICAgICB2ZXJpZnlEYXRhYmFzZUNvbm5lY3Rpb24oKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFRlc3RzIHRoYXQgb3BlbmpwYS4qIGFuZCBqYXZheC4q\nIG5hbWVzcGFjZSBjYW4gbm90IGJvdGggYmUgdXNlZCBmb3IgdGhlCiAgICAg\nKiBzYW1lIHByb3BlcnR5IGluIHBlcnNpc3RlbmNlLnhtbC4KICAgICAqIAog\nICAgICovCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RDb25mbGljdFN0eWxl\nUGVyc2lzdGVuY2VVbml0Q29uZmlndXJhdGlvbigpIHsKICAgICAgICB0cnkg\newogICAgICAgICAgICBlbWYgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY3JlYXRl\nRW50aXR5TWFuYWdlckZhY3RvcnkoCiAgICAgICAgICAgICAgICBDT05GTElD\nVF9TVFlMRV9VTklUX05BTUUsIFBFUlNJU1RFTkNFX1VOSVQpOwogICAgICAg\nICAgICBmYWlsKCk7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlv\nbiBleCkgewogICAgICAgICAgICAvLyBnb29kCiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogVGVzdHMgdGhhdCBqYXZheC4qIG5hbWVzcGFjZSBj\nYW4gYmUgdXNlZCBmb3IgU3lzdGVtIHByb3BlcnRpZXMuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHRlc3ROZXdTdHlsZVN5c3RlbVByb3BlcnR5Q29uZmln\ndXJhdGlvbigpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBTeXN0ZW0u\nc2V0UHJvcGVydHkoTkVXX1NUWUxFX0RSSVZFUl9LRVksIERSSVZFUik7CiAg\nICAgICAgICAgIFN5c3RlbS5zZXRQcm9wZXJ0eShORVdfU1RZTEVfVVJMX0tF\nWSwgVVJMKTsKCiAgICAgICAgICAgIGVtZiA9IE9wZW5KUEFQZXJzaXN0ZW5j\nZS5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgKICAgICAgICAgICAgICAg\nIFNZU1RFTV9DT05GSUdVUkVEX1VOSVRfTkFNRSwgUEVSU0lTVEVOQ0VfVU5J\nVCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgU3lzdGVtLmdl\ndFByb3BlcnRpZXMoKS5yZW1vdmUoTkVXX1NUWUxFX0RSSVZFUl9LRVkpOwog\nICAgICAgICAgICBTeXN0ZW0uZ2V0UHJvcGVydGllcygpLnJlbW92ZShORVdf\nU1RZTEVfVVJMX0tFWSk7CiAgICAgICAgfQoKICAgICAgICBhc3NlcnROb3RO\ndWxsKGVtZik7CiAgICAgICAgYXNzZXJ0VHJ1ZShjb250YWluc1Byb3BlcnR5\nKE5FV19TVFlMRV9EUklWRVJfS0VZKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShj\nb250YWluc1Byb3BlcnR5KE5FV19TVFlMRV9VUkxfS0VZKSk7CiAgICAgICAg\nYXNzZXJ0RmFsc2UoY29udGFpbnNQcm9wZXJ0eShPTERfU1RZTEVfRFJJVkVS\nX0tFWSkpOwogICAgICAgIGFzc2VydEZhbHNlKGNvbnRhaW5zUHJvcGVydHko\nT0xEX1NUWUxFX1VSTF9LRVkpKTsKCiAgICAgICAgdmVyaWZ5RGF0YWJhc2VD\nb25uZWN0aW9uKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUZXN0cyB0aGF0\nIG9wZW5qcGEuKiBuYW1lc3BhY2UgY2FuIGJlIHVzZWQgZm9yIFN5c3RlbSBw\ncm9wZXJ0aWVzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0T2xkU3R5\nbGVTeXN0ZW1Qcm9wZXJ0eUNvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgU3lzdGVtLnNldFByb3BlcnR5KE9MRF9TVFlMRV9E\nUklWRVJfS0VZLCBEUklWRVIpOwogICAgICAgICAgICBTeXN0ZW0uc2V0UHJv\ncGVydHkoT0xEX1NUWUxFX1VSTF9LRVksIFVSTCk7CgogICAgICAgICAgICBl\nbWYgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY3JlYXRlRW50aXR5TWFuYWdlckZh\nY3RvcnkoCiAgICAgICAgICAgICAgICBTWVNURU1fQ09ORklHVVJFRF9VTklU\nX05BTUUsIFBFUlNJU1RFTkNFX1VOSVQpOwogICAgICAgIH0gZmluYWxseSB7\nCiAgICAgICAgICAgIFN5c3RlbS5nZXRQcm9wZXJ0aWVzKCkucmVtb3ZlKE9M\nRF9TVFlMRV9EUklWRVJfS0VZKTsKICAgICAgICAgICAgU3lzdGVtLmdldFBy\nb3BlcnRpZXMoKS5yZW1vdmUoT0xEX1NUWUxFX1VSTF9LRVkpOwogICAgICAg\nIH0KICAgICAgICBhc3NlcnROb3ROdWxsKGVtZik7CiAgICAgICAgYXNzZXJ0\nRmFsc2UoY29udGFpbnNQcm9wZXJ0eShORVdfU1RZTEVfRFJJVkVSX0tFWSkp\nOwogICAgICAgIGFzc2VydEZhbHNlKGNvbnRhaW5zUHJvcGVydHkoTkVXX1NU\nWUxFX1VSTF9LRVkpKTsKICAgICAgICBhc3NlcnRUcnVlKGNvbnRhaW5zUHJv\ncGVydHkoT0xEX1NUWUxFX0RSSVZFUl9LRVkpKTsKICAgICAgICBhc3NlcnRU\ncnVlKGNvbnRhaW5zUHJvcGVydHkoT0xEX1NUWUxFX1VSTF9LRVkpKTsKCiAg\nICAgICAgdmVyaWZ5RGF0YWJhc2VDb25uZWN0aW9uKCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUZXN0cyB0aGF0IG9wZW5qcGEuKiBhbmQgamF2YXguKiBu\nYW1lc3BhY2UgY2FuIGJvdGggYmUgdXNlZCBmb3IgU3lzdGVtCiAgICAgKiBw\ncm9wZXJ0aWVzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWl4ZWRT\ndHlsZVN5c3RlbVByb3BlcnR5Q29uZmlndXJhdGlvbigpIHsKICAgICAgICBT\neXN0ZW0uc2V0UHJvcGVydHkoT0xEX1NUWUxFX0RSSVZFUl9LRVksIERSSVZF\nUik7CiAgICAgICAgU3lzdGVtLnNldFByb3BlcnR5KE5FV19TVFlMRV9VUkxf\nS0VZLCBVUkwpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGVtZiA9IE9w\nZW5KUEFQZXJzaXN0ZW5jZS5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgK\nICAgICAgICAgICAgICAgIFNZU1RFTV9DT05GSUdVUkVEX1VOSVRfTkFNRSwg\nUEVSU0lTVEVOQ0VfVU5JVCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAg\nICAgICAgU3lzdGVtLmdldFByb3BlcnRpZXMoKS5yZW1vdmUoT0xEX1NUWUxF\nX0RSSVZFUl9LRVkpOwogICAgICAgICAgICBTeXN0ZW0uZ2V0UHJvcGVydGll\ncygpLnJlbW92ZShORVdfU1RZTEVfVVJMX0tFWSk7CiAgICAgICAgfQoKICAg\nICAgICBhc3NlcnROb3ROdWxsKGVtZik7CiAgICAgICAgYXNzZXJ0RmFsc2Uo\nY29udGFpbnNQcm9wZXJ0eShORVdfU1RZTEVfRFJJVkVSX0tFWSkpOwogICAg\nICAgIGFzc2VydFRydWUoY29udGFpbnNQcm9wZXJ0eShORVdfU1RZTEVfVVJM\nX0tFWSkpOwogICAgICAgIGFzc2VydFRydWUoY29udGFpbnNQcm9wZXJ0eShP\nTERfU1RZTEVfRFJJVkVSX0tFWSkpOwogICAgICAgIGFzc2VydEZhbHNlKGNv\nbnRhaW5zUHJvcGVydHkoT0xEX1NUWUxFX1VSTF9LRVkpKTsKCiAgICAgICAg\ndmVyaWZ5RGF0YWJhc2VDb25uZWN0aW9uKCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUZXN0cyB0aGF0IG9wZW5qcGEuKiBhbmQgamF2YXguKiBuYW1lc3Bh\nY2UgY2FuIG5vdCBib3RoIGJlIHVzZWQgZm9yIHRoZQogICAgICogc2FtZSBw\ncm9wZXJ0eSBpbiBTeXN0ZW0gY29uZmlndXJhdGlvbi4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgdGVzdENvbmZsaWN0U3R5bGVTeXN0ZW1Qcm9wZXJ0eUNv\nbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgU3lzdGVtLnNldFByb3BlcnR5KE9M\nRF9TVFlMRV9EUklWRVJfS0VZLCBEUklWRVIpOwogICAgICAgIFN5c3RlbS5z\nZXRQcm9wZXJ0eShORVdfU1RZTEVfRFJJVkVSX0tFWSwgRFJJVkVSKTsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBlbWYgPSBPcGVuSlBBUGVyc2lzdGVu\nY2UuY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkoCiAgICAgICAgICAgICAg\nICBTWVNURU1fQ09ORklHVVJFRF9VTklUX05BTUUsIFBFUlNJU1RFTkNFX1VO\nSVQpOwogICAgICAgICAgICBmYWlsKCk7CiAgICAgICAgfSBjYXRjaCAoUnVu\ndGltZUV4Y2VwdGlvbiBleCkgewogICAgICAgICAgICAvLyBnb29kCiAgICAg\nICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgU3lzdGVtLmdldFByb3BlcnRp\nZXMoKS5yZW1vdmUoT0xEX1NUWUxFX0RSSVZFUl9LRVkpOwogICAgICAgICAg\nICBTeXN0ZW0uZ2V0UHJvcGVydGllcygpLnJlbW92ZShORVdfU1RZTEVfRFJJ\nVkVSX0tFWSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVGVz\ndHMgdGhhdCBvcGVuanBhLiogbmFtZXNwYWNlIGNhbiBiZSB1c2VkIGZvciBy\ndW50aW1lIGNvbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHRlc3RPbGRTdHlsZVJ1bnRpbWVQcm9wZXJ0eUNvbmZpZ3VyYXRpb24oKSB7\nCiAgICAgICAgUHJvcGVydGllcyBjb25mID0gbmV3IFByb3BlcnRpZXMoKTsK\nICAgICAgICBjb25mLnNldFByb3BlcnR5KE9MRF9TVFlMRV9EUklWRVJfS0VZ\nLCBEUklWRVIpOwogICAgICAgIGNvbmYuc2V0UHJvcGVydHkoT0xEX1NUWUxF\nX1VSTF9LRVksIFVSTCk7CgogICAgICAgIGVtZiA9IE9wZW5KUEFQZXJzaXN0\nZW5jZS5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgKICAgICAgICAgICAg\nICAgIFJVTlRJTUVfQ09ORklHVVJFRF9VTklUX05BTUUsIFBFUlNJU1RFTkNF\nX1VOSVQsIGNvbmYpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKGVtZik7CiAg\nICAgICAgYXNzZXJ0VHJ1ZShjb250YWluc1Byb3BlcnR5KE9MRF9TVFlMRV9E\nUklWRVJfS0VZKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShjb250YWluc1Byb3Bl\ncnR5KE9MRF9TVFlMRV9VUkxfS0VZKSk7CiAgICAgICAgYXNzZXJ0RmFsc2Uo\nY29udGFpbnNQcm9wZXJ0eShORVdfU1RZTEVfRFJJVkVSX0tFWSkpOwogICAg\nICAgIGFzc2VydEZhbHNlKGNvbnRhaW5zUHJvcGVydHkoTkVXX1NUWUxFX1VS\nTF9LRVkpKTsKCiAgICAgICAgdmVyaWZ5RGF0YWJhc2VDb25uZWN0aW9uKCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUZXN0cyB0aGF0IGphdmF4LiogbmFt\nZXNwYWNlIGNhbiBiZSB1c2VkIGZvciBydW50aW1lIGNvbmZpZ3VyYXRpb24u\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3ROZXdTdHlsZVJ1bnRpbWVQ\ncm9wZXJ0eUNvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgUHJvcGVydGllcyBj\nb25mID0gbmV3IFByb3BlcnRpZXMoKTsKICAgICAgICBjb25mLnNldFByb3Bl\ncnR5KE5FV19TVFlMRV9EUklWRVJfS0VZLCBEUklWRVIpOwogICAgICAgIGNv\nbmYuc2V0UHJvcGVydHkoTkVXX1NUWUxFX1VSTF9LRVksIFVSTCk7CgogICAg\nICAgIGVtZiA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jcmVhdGVFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSgKICAgICAgICAgICAgUlVOVElNRV9DT05GSUdVUkVEX1VO\nSVRfTkFNRSwgUEVSU0lTVEVOQ0VfVU5JVCwgY29uZik7CgogICAgICAgIGFz\nc2VydE5vdE51bGwoZW1mKTsKICAgICAgICBhc3NlcnRGYWxzZShjb250YWlu\nc1Byb3BlcnR5KE9MRF9TVFlMRV9EUklWRVJfS0VZKSk7CiAgICAgICAgYXNz\nZXJ0RmFsc2UoY29udGFpbnNQcm9wZXJ0eShPTERfU1RZTEVfVVJMX0tFWSkp\nOwogICAgICAgIGFzc2VydFRydWUoY29udGFpbnNQcm9wZXJ0eShORVdfU1RZ\nTEVfRFJJVkVSX0tFWSkpOwogICAgICAgIGFzc2VydFRydWUoY29udGFpbnNQ\ncm9wZXJ0eShORVdfU1RZTEVfVVJMX0tFWSkpOwoKICAgICAgICB2ZXJpZnlE\nYXRhYmFzZUNvbm5lY3Rpb24oKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRl\nc3RzIHRoYXQgb3BlbmpwYS4qIGFuZCBqYXZheC4qIG5hbWVzcGFjZSBjYW4g\nYm90aCBiZSB1c2VkIGZvciBydW50aW1lCiAgICAgKiBjb25maWd1cmF0aW9u\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWl4ZWRTdHlsZVJ1bnRp\nbWVQcm9wZXJ0eUNvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgUHJvcGVydGll\ncyBjb25mID0gbmV3IFByb3BlcnRpZXMoKTsKICAgICAgICBjb25mLnNldFBy\nb3BlcnR5KE9MRF9TVFlMRV9EUklWRVJfS0VZLCBEUklWRVIpOwogICAgICAg\nIGNvbmYuc2V0UHJvcGVydHkoTkVXX1NUWUxFX1VSTF9LRVksIFVSTCk7Cgog\nICAgICAgIGVtZiA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jcmVhdGVFbnRpdHlN\nYW5hZ2VyRmFjdG9yeSgKICAgICAgICAgICAgUlVOVElNRV9DT05GSUdVUkVE\nX1VOSVRfTkFNRSwgUEVSU0lTVEVOQ0VfVU5JVCwgY29uZik7CgogICAgICAg\nIGFzc2VydE5vdE51bGwoZW1mKTsKICAgICAgICBhc3NlcnRUcnVlKGNvbnRh\naW5zUHJvcGVydHkoT0xEX1NUWUxFX0RSSVZFUl9LRVkpKTsKICAgICAgICBh\nc3NlcnRGYWxzZShjb250YWluc1Byb3BlcnR5KE9MRF9TVFlMRV9VUkxfS0VZ\nKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UoY29udGFpbnNQcm9wZXJ0eShORVdf\nU1RZTEVfRFJJVkVSX0tFWSkpOwogICAgICAgIGFzc2VydFRydWUoY29udGFp\nbnNQcm9wZXJ0eShORVdfU1RZTEVfVVJMX0tFWSkpOwoKICAgICAgICB2ZXJp\nZnlEYXRhYmFzZUNvbm5lY3Rpb24oKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRlc3RzIHRoYXQgb3BlbmpwYS4qIGFuZCBqYXZheC4qIG5hbWVzcGFjZSBj\nYW4gbm90IGJvdGggYmUgdXNlZCBmb3IgdGhlCiAgICAgKiBzYW1lIHByb3Bl\ncnR5IGluIHJ1bnRpbWUgY29uZmlndXJhdGlvbi4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgdGVzdENvbmZsaWN0U3R5bGVSdW50aW1lUHJvcGVydHlDb25m\naWd1cmF0aW9uKCkgewogICAgICAgIFByb3BlcnRpZXMgY29uZiA9IG5ldyBQ\ncm9wZXJ0aWVzKCk7CiAgICAgICAgY29uZi5zZXRQcm9wZXJ0eShPTERfU1RZ\nTEVfRFJJVkVSX0tFWSwgRFJJVkVSKTsKICAgICAgICBjb25mLnNldFByb3Bl\ncnR5KE5FV19TVFlMRV9EUklWRVJfS0VZLCBEUklWRVIpOwoKICAgICAgICB0\ncnkgewogICAgICAgICAgICBlbWYgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY3Jl\nYXRlRW50aXR5TWFuYWdlckZhY3RvcnkoCiAgICAgICAgICAgICAgICBSVU5U\nSU1FX0NPTkZJR1VSRURfVU5JVF9OQU1FLCBQRVJTSVNURU5DRV9VTklULCBj\nb25mKTsKICAgICAgICAgICAgZmFpbCgpOwogICAgICAgIH0gY2F0Y2ggKFJ1\nbnRpbWVFeGNlcHRpb24gZXgpIHsKICAgICAgICAgICAgLy8gZ29vZAogICAg\nICAgIH0KICAgIH0KCiAgICB2b2lkIHZlcmlmeURhdGFiYXNlQ29ubmVjdGlv\nbigpIHsKICAgICAgICBTdHJpbmcgZHJpdmVyID0gT3BlbkpQQVBlcnNpc3Rl\nbmNlLmNhc3QoZW1mKS5nZXRDb25maWd1cmF0aW9uKCkKICAgICAgICAgICAg\nICAgIC5nZXRDb25uZWN0aW9uRHJpdmVyTmFtZSgpOwogICAgICAgIAogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICBlbS5mbHVzaCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7CiAgICB9CgogICAgYm9vbGVhbiBjb250YWluc1Byb3BlcnR5\nKFN0cmluZyBrZXkpIHsKICAgICAgICByZXR1cm4gZ2V0Q29uZmlndXJhdGlv\nbigpLnRvUHJvcGVydGllcyh0cnVlKS5jb250YWluc0tleShrZXkpOwogICAg\nfQogICAgCiAgICBPcGVuSlBBQ29uZmlndXJhdGlvbiBnZXRDb25maWd1cmF0\naW9uKCkgewogICAgICAgIHJldHVybiAoKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeVNQSSlPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChlbWYpKQogICAg\nICAgICAgICAuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgfQoKICAgIFByb3Bl\ncnRpZXMgYmFja3VwKCkgewogICAgICAgIFByb3BlcnRpZXMgcCA9IG5ldyBQ\ncm9wZXJ0aWVzKCk7CiAgICAgICAgZm9yIChTdHJpbmcga2V5IDogS0VZUykg\newogICAgICAgICAgICBpZiAoU3lzdGVtLmdldFByb3BlcnR5KGtleSkgIT0g\nbnVsbCkgewogICAgICAgICAgICAgICAgcC5zZXRQcm9wZXJ0eShrZXksIFN5\nc3RlbS5nZXRQcm9wZXJ0eShrZXkpKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgICAgICByZXR1cm4gcDsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQg\nY2xlYXIoUHJvcGVydGllcyBwKSB7CiAgICAgICAgZm9yIChPYmplY3Qga2V5\nIDogcC5rZXlTZXQoKSkgewogICAgICAgICAgICBTeXN0ZW0uZ2V0UHJvcGVy\ndGllcygpLnJlbW92ZShrZXkpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2\nYXRlIHZvaWQgcmVzdG9yZShQcm9wZXJ0aWVzIHApIHsKICAgICAgICBmb3Ig\nKE9iamVjdCBrZXkgOiBwLmtleVNldCgpKSB7CiAgICAgICAgICAgIFN5c3Rl\nbS5zZXRQcm9wZXJ0eShrZXkudG9TdHJpbmcoKSwgcC5nZXQoa2V5KS50b1N0\ncmluZygpKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

