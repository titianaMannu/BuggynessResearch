{"sha":"96ced562cdc4196d96ff207774aec060417ca6da","node_id":"MDQ6QmxvYjIwNjM2NDo5NmNlZDU2MmNkYzQxOTZkOTZmZjIwNzc3NGFlYzA2MDQxN2NhNmRh","size":11920,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/96ced562cdc4196d96ff207774aec060417ca6da","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwu\nTGlzdDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLlR1cGxlOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuVHlwZWRRdWVyeTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNy\naXRlcmlhLkNyaXRlcmlhUXVlcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5jcml0ZXJpYS5FeHByZXNzaW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuT3JkZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5j\ncml0ZXJpYS5QcmVkaWNhdGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5j\ncml0ZXJpYS5Sb290OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3JpdGVy\naWEuU2VsZWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CgovKioKICogVGVzdCBlZGl0\naW5nIG9mIENyaXRlcmlhIFF1ZXJ5LgogKiAKICogVGhlIHRlc3RzIGNvbnN0\ncnVjdCBhIENyaXRlcmlhUXVlcnkgYW5kIHRha2VzIGEgcGFpciBvZiBKUFFM\nIFN0cmluZy4KICogVGhlIENyaXRlcmlhIFF1ZXJ5IGlzIGV4ZWN1dGVkIGFu\nZCBpdHMgdGFyZ2V0IFNRTCBpcyBjb21wYXJlZCB3aXRoIHRoYXQgb2YgdGhl\nIGZpcnN0IG9mIHRoZSBKUFFMIFN0cmluZyBwYWlyLgogKiBUaGVuIHRoZSBz\nYW1lIENyaXRlcmlhIFF1ZXJ5IGlzIGVkaXRlZCBhbmQgdGhlIHRhcmdldCBT\nUUwgb2YgdGhlIGVkaXRlZCB2ZXJzaW9uIGlzIGNvbXBhcmVkIHdpdGggdGhh\ndCBvZiB0aGUgc2Vjb25kIAogKiBvZiB0aGUgSlBRTCBTdHJpbmcgcGFpci4K\nICogCiAqIEFsc28gdGVzdCBib3VuZGFyeSBjYXNlcyB3aGVyZSBub3RoaW5n\nIGlzIHNlbGVjdGVkIGV0Yy4KICogCiAqIEBhdXRob3IgUGluYWtpIFBvZGRh\ncgogKgogKi8KcHVibGljIGNsYXNzIFRlc3RFZGl0IGV4dGVuZHMgQ3JpdGVy\naWFUZXN0IHsKICAgIAogICAgcHVibGljIHZvaWQgdGVzdFdoZXJlQ29uZGl0\naW9uRWRpdGVkVG9BZGRPcigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJz\nZWxlY3QgcCBmcm9tIFBlcnNvbiBwIHdoZXJlIHAubmFtZT0nWFlaJyI7CiAg\nICAgICAgU3RyaW5nIGVkaXRlZGpwcWwgPSAic2VsZWN0IHAgZnJvbSBQZXJz\nb24gcCB3aGVyZSBwLm5hbWU9J1hZWicgb3IgcC5uYW1lPSdBQkMnIjsKICAg\nICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFBlcnNvbj4gYyA9IGNiLmNy\nZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAgICAgICAgUm9vdDxQZXJzb24+\nIHAgPSBjLmZyb20oUGVyc29uLmNsYXNzKTsKICAgICAgICBjLndoZXJlKGNi\nLmVxdWFsKHAuZ2V0KFBlcnNvbl8ubmFtZSksICJYWVoiKSk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICAgICAg\nCiAgICAgICAgUHJlZGljYXRlIHdoZXJlID0gYy5nZXRSZXN0cmljdGlvbigp\nOwogICAgICAgIGMud2hlcmUoY2Iub3Iod2hlcmUsIGNiLmVxdWFsKHAuZ2V0\nKFBlcnNvbl8ubmFtZSksICJBQkMiKSkpOwogICAgICAgIAogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKGMsIGVkaXRlZGpwcWwpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0V2hlcmVDb25kaXRpb25FZGl0ZWRUb0FkZEFu\nZCgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgcCBmcm9tIFBl\ncnNvbiBwIHdoZXJlIHAubmFtZT0nWFlaJyI7CiAgICAgICAgU3RyaW5nIGVk\naXRlZGpwcWwgPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLm5h\nbWU9J1hZWicgYW5kIHAubmFtZT0nQUJDJyI7CiAgICAgICAgCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxQZXJzb24+IGMgPSBjYi5jcmVhdGVRdWVyeShQZXJz\nb24uY2xhc3MpOwogICAgICAgIFJvb3Q8UGVyc29uPiBwID0gYy5mcm9tKFBl\ncnNvbi5jbGFzcyk7CiAgICAgICAgYy53aGVyZShjYi5lcXVhbChwLmdldChQ\nZXJzb25fLm5hbWUpLCAiWFlaIikpOwogICAgICAgIAogICAgICAgIGFzc2Vy\ndEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgICAgIAogICAgICAgIFByZWRp\nY2F0ZSB3aGVyZSA9IGMuZ2V0UmVzdHJpY3Rpb24oKTsKICAgICAgICBjLndo\nZXJlKGNiLmFuZCh3aGVyZSwgY2IuZXF1YWwocC5nZXQoUGVyc29uXy5uYW1l\nKSwgIkFCQyIpKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVu\nY2UoYywgZWRpdGVkanBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RXaGVyZUNvbmRpdGlvbkVkaXRlZFRvUmVtb3ZlQW5kKCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAgd2hl\ncmUgcC5uYW1lPSdYWVonIGFuZCBwLm5hbWU9J0FCQyciOwogICAgICAgIFN0\ncmluZyBlZGl0ZWRqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAgd2hl\ncmUgcC5uYW1lPSdYWVonIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PFBlcnNvbj4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7\nCiAgICAgICAgUm9vdDxQZXJzb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNz\nKTsKICAgICAgICBQcmVkaWNhdGUgcDEgPSBjYi5lcXVhbChwLmdldChQZXJz\nb25fLm5hbWUpLCAiWFlaIik7CiAgICAgICAgUHJlZGljYXRlIHAyID0gY2Iu\nZXF1YWwocC5nZXQoUGVyc29uXy5uYW1lKSwgIkFCQyIpOwogICAgICAgIGMu\nd2hlcmUocDEscDIpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKGMsIGpwcWwpOwogICAgICAgIAogICAgICAgIFByZWRpY2F0ZSB3aGVy\nZSA9IGMuZ2V0UmVzdHJpY3Rpb24oKTsKICAgICAgICBMaXN0PEV4cHJlc3Np\nb248Qm9vbGVhbj4+IGV4cHJzID0gd2hlcmUuZ2V0RXhwcmVzc2lvbnMoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMiwgZXhwcnMuc2l6ZSgpKTsKICAgICAg\nICBhc3NlcnRUcnVlKGV4cHJzLmNvbnRhaW5zKHAxKSk7CiAgICAgICAgYXNz\nZXJ0VHJ1ZShleHBycy5jb250YWlucyhwMikpOwogICAgICAgIGV4cHJzLnJl\nbW92ZShwMSk7CiAgICAgICAgLy8gZWRpdGluZyBmcm9tIHRoZSBsaXN0IGRv\nZXMgbm90IGltcGFjdCB0aGUgcXVlcnkgCiAgICAgICAgYXNzZXJ0RXF1aXZh\nbGVuY2UoYywganBxbCk7CiAgICAgICAgCiAgICAgICAgYy53aGVyZShwMSk7\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywgZWRpdGVkanBxbCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVkaXRPcmRlckJ5KCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAgT1JE\nRVIgQlkgcC5uYW1lIjsKICAgICAgICBTdHJpbmcgZWRpdGVkanBxbCA9ICJz\nZWxlY3QgcCBmcm9tIFBlcnNvbiBwIE9SREVSIEJZIHAubmFtZSwgcC5pZCBE\nRVNDIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFBlcnNvbj4g\nYyA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAgICAgICAgUm9v\ndDxQZXJzb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNzKTsKICAgICAgICBj\nLm9yZGVyQnkoY2IuYXNjKHAuZ2V0KFBlcnNvbl8ubmFtZSkpKTsKICAgICAg\nICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAgICAg\nICAKICAgICAgICBMaXN0PE9yZGVyPiBvcmRlcnMgPSBjLmdldE9yZGVyTGlz\ndCgpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBvcmRlcnMuc2l6ZSgpKTsK\nICAgICAgICBvcmRlcnMuYWRkKGNiLmRlc2MocC5nZXQoUGVyc29uXy5pZCkp\nKTsKICAgICAgICAvLyBlZGl0aW5nIHRoZSBsaXN0IGRvZXMgbm90IGltcGFj\ndCBxdWVyeQogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwog\nICAgICAgIAogICAgICAgIC8vIGFkZGluZyB0aGUgbW9kaWZpZWQgbGlzdCBi\nYWNrIGRvZXMgCiAgICAgICAgYy5vcmRlckJ5KG9yZGVycy50b0FycmF5KG5l\ndyBPcmRlcltvcmRlcnMuc2l6ZSgpXSkpOwogICAgICAgIAogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKGMsIGVkaXRlZGpwcWwpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RWRpdGVkVG9BZGRNdWx0aXNlbGVjdGlvblRl\ncm0oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IHAgZnJvbSBQ\nZXJzb24gcCI7CiAgICAgICAgU3RyaW5nIGVkaXRlZGpwcWwgPSAic2VsZWN0\nIHAscC5uYW1lIGZyb20gUGVyc29uIHAiOwogICAgICAgIAogICAgICAgIENy\naXRlcmlhUXVlcnk8VHVwbGU+IGMgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7\nCiAgICAgICAgUm9vdDxQZXJzb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNz\nKTsKICAgICAgICBjLm11bHRpc2VsZWN0KHApOwogICAgICAgIAogICAgICAg\nIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgICAgIAogICAgICAg\nIExpc3Q8U2VsZWN0aW9uPD8+PiB0ZXJtcyA9IGMuZ2V0U2VsZWN0aW9uKCku\nZ2V0Q29tcG91bmRTZWxlY3Rpb25JdGVtcygpOwogICAgICAgIHRlcm1zLmFk\nZChwLmdldChQZXJzb25fLm5hbWUpKTsKICAgICAgICAvLyBlZGl0aW5nIHRo\nZSBsaXN0IGRvZXMgbm90IGltcGFjdCBxdWVyeQogICAgICAgIGFzc2VydEVx\ndWl2YWxlbmNlKGMsIGpwcWwpOwogICAgICAgIAogICAgICAgIGMubXVsdGlz\nZWxlY3QocCwgcC5nZXQoUGVyc29uXy5uYW1lKSk7CiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UoYywgZWRpdGVkanBxbCk7CiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIHRlc3RTaW5nbGVTZWxlY3Rpb25IYXNOb0NvbXBvdW5kSXRl\nbXMoKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+IGMgPSBjYi5j\ncmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIFJvb3Q8UGVyc29u\nPiBwID0gYy5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgYy5zZWxlY3Qo\ncCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgU2VsZWN0aW9uPFBlcnNv\nbj4gdGVybSA9IGMuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICAgIHRlcm0u\nZ2V0Q29tcG91bmRTZWxlY3Rpb25JdGVtcygpOwogICAgICAgICAgICBmYWls\nKCJFeHBlY3RlZCB0byBmYWlsIGJlY2F1c2UgcHJpbWFyeSBzZWxlY3Rpb24g\naGFzIG5vIGNvbXBvdW5kIHRlcm1zIik7CiAgICAgICAgfSBjYXRjaCAoSWxs\nZWdhbFN0YXRlRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gZ29vZAog\nICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDYW5kaWRhdGUg\nY2xhc3MgaXMgaW1wbGljaXRseSBzZWxlY3RlZCBidXQgYSBudWxsIGlzIHJl\ndHVybmVkIGJ5IGdldFNlbGVjdGlvbigpCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHRlc3RDYW5kaWRhdGVDbGFzc0lzSW1wbGljaXRseVNlbGVjdGVkRm9y\nRW50aXR5UXVlcnkoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0\nIHAgZnJvbSBQZXJzb24gcCI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJz\nb24+IGMgPSBjYi5jcmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAg\nIFJvb3Q8UGVyc29uPiBwID0gYy5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAg\nICAgU2VsZWN0aW9uPFBlcnNvbj4gdGVybSA9IGMuZ2V0U2VsZWN0aW9uKCk7\nCiAgICAgICAgYXNzZXJ0TnVsbCh0ZXJtKTsKICAgICAgICAKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgdGVzdENhbmRpZGF0ZUNsYXNzSXNOb3RJbXBsaWNpdGx5U2Vs\nZWN0ZWRGb3JOb25FbnRpdHlRdWVyeSgpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJzZWxlY3QgcCBmcm9tIFBlcnNvbiBwIjsKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PFR1cGxlPiBjID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAg\nICAgIFJvb3Q8UGVyc29uPiBwID0gYy5mcm9tKFBlcnNvbi5jbGFzcyk7CiAg\nICAgICAgU2VsZWN0aW9uPFR1cGxlPiB0ZXJtID0gYy5nZXRTZWxlY3Rpb24o\nKTsKICAgICAgICBhc3NlcnROdWxsKHRlcm0pOwogICAgICAgIAogICAgICAg\nIGFzc2VydEZhaWxzKCJFeHBlY3RlZCB0byBmYWlsIHdpdGhvdXQgYSBwcm9q\nZWN0aW9uIHRlcm0iLCBjKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFJvb3RJc05vdEltcGxpY2l0bHlEZWZpbmVkKCkgewogICAgICAgIENy\naXRlcmlhUXVlcnk8UGVyc29uPiBjID0gY2IuY3JlYXRlUXVlcnkoUGVyc29u\nLmNsYXNzKTsKICAgICAgICBTZWxlY3Rpb248UGVyc29uPiB0ZXJtID0gYy5n\nZXRTZWxlY3Rpb24oKTsKICAgICAgICBhc3NlcnROdWxsKHRlcm0pOwogICAg\nICAgIAogICAgICAgIGFzc2VydEZhaWxzKCJFeHBlY3RlZCB0byBmYWlsIHdp\ndGhvdXQgYSBkZWZpbmVkIHJvb3QiLCBjKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgdGVzdEVkaXRQYXJhbWV0ZXJpemVkUHJlZGljYXRlKCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAg\nd2hlcmUgcC5uYW1lPTpwMSI7CiAgICAgICAgU3RyaW5nIGVkaXRlZGpwcWwg\nPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLm5hbWU9OnAxIGFu\nZCBwLm5hbWU9OnAyIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPFBlcnNvbj4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAg\nICAgICAgUm9vdDxQZXJzb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNzKTsK\nICAgICAgICBjLndoZXJlKGNiLmVxdWFsKHAuZ2V0KFBlcnNvbl8ubmFtZSks\nIGNiLnBhcmFtZXRlcihTdHJpbmcuY2xhc3MsICJwMSIpKSk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UobmV3IFF1ZXJ5RGVjb3JhdG9y\nKCkgewogICAgICAgICAgICBwdWJsaWMgdm9pZCBkZWNvcmF0ZShRdWVyeSBx\nKSB7CiAgICAgICAgICAgICAgICBxLnNldFBhcmFtZXRlcigicDEiLCAiWFla\nIik7CiAgICAgICAgICAgIH0KICAgICAgICB9LCBjLCBqcHFsKTsKICAgICAg\nICAKICAgICAgICBQcmVkaWNhdGUgd2hlcmUgPSBjLmdldFJlc3RyaWN0aW9u\nKCk7CiAgICAgICAgYy53aGVyZShjYi5hbmQod2hlcmUsIGNiLmVxdWFsKHAu\nZ2V0KFBlcnNvbl8ubmFtZSksIGNiLnBhcmFtZXRlcihTdHJpbmcuY2xhc3Ms\nICJwMiIpKSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKG5ldyBRdWVyeURlY29yYXRvcigpIHsKICAgICAgICAgICAgcHVibGljIHZv\naWQgZGVjb3JhdGUoUXVlcnkgcSkgewogICAgICAgICAgICAgICAgcS5zZXRQ\nYXJhbWV0ZXIoInAxIiwgIk1OTyIpOwogICAgICAgICAgICAgICAgcS5zZXRQ\nYXJhbWV0ZXIoInAyIiwgIkFCQyIpOwogICAgICAgICAgICB9CiAgICAgICAg\nfSwgYywgZWRpdGVkanBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFZGl0UGFyYW1ldGVyaXplZFByZWRpY2F0ZVJlcGxhY2VkKCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAg\nd2hlcmUgcC5uYW1lPTpwMSBhbmQgcC5uYW1lPTpwMiI7CiAgICAgICAgU3Ry\naW5nIGVkaXRlZGpwcWwgPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVy\nZSBwLm5hbWU9OnAzIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPFBlcnNvbj4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAg\nICAgICAgUm9vdDxQZXJzb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNzKTsK\nICAgICAgICBjLndoZXJlKGNiLmFuZChjYi5lcXVhbChwLmdldChQZXJzb25f\nLm5hbWUpLCBjYi5wYXJhbWV0ZXIoU3RyaW5nLmNsYXNzLCAicDEiKSksCiAg\nICAgICAgICAgICAgICAgICAgICAgY2IuZXF1YWwocC5nZXQoUGVyc29uXy5u\nYW1lKSwgY2IucGFyYW1ldGVyKFN0cmluZy5jbGFzcywgInAyIikpKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDIsYy5nZXRQYXJhbWV0ZXJzKCkuc2l6ZSgp\nKTsKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShuZXcgUXVlcnlEZWNvcmF0\nb3IoKSB7CiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGRlY29yYXRlKFF1ZXJ5\nIHEpIHsKICAgICAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKCJwMSIsICJY\nWVoiKTsKICAgICAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKCJwMiIsICJB\nQkMiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIGMsIGpwcWwpOwogICAg\nICAgIAogICAgICAgIGMud2hlcmUoY2IuZXF1YWwocC5nZXQoUGVyc29uXy5u\nYW1lKSwgY2IucGFyYW1ldGVyKFN0cmluZy5jbGFzcywgInAzIikpKTsKICAg\nICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShuZXcgUXVlcnlEZWNv\ncmF0b3IoKSB7CiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGRlY29yYXRlKFF1\nZXJ5IHEpIHsKICAgICAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKCJwMyIs\nICJNTk8iKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIGMsIGVkaXRlZGpw\ncWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RWRpdFBhcmFt\nZXRlcml6ZWRQcmVkaWNhdGVSZW1vdmVkKCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAgd2hlcmUgcC5uYW1lPTpw\nMSBhbmQgcC5uYW1lPTpwMiI7CiAgICAgICAgU3RyaW5nIGVkaXRlZGpwcWwg\nPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLm5hbWU9OnAxIjsK\nICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFBlcnNvbj4gYyA9IGNi\nLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAgICAgICAgUm9vdDxQZXJz\nb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNzKTsKICAgICAgICBjLndoZXJl\nKGNiLmFuZChjYi5lcXVhbChwLmdldChQZXJzb25fLm5hbWUpLCBjYi5wYXJh\nbWV0ZXIoU3RyaW5nLmNsYXNzLCAicDEiKSksCiAgICAgICAgICAgICAgICAg\nICAgICAgY2IuZXF1YWwocC5nZXQoUGVyc29uXy5uYW1lKSwgY2IucGFyYW1l\ndGVyKFN0cmluZy5jbGFzcywgInAyIikpKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDIsYy5nZXRQYXJhbWV0ZXJzKCkuc2l6ZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVpdmFsZW5jZShuZXcgUXVlcnlEZWNvcmF0b3IoKSB7CiAgICAgICAg\nICAgIHB1YmxpYyB2b2lkIGRlY29yYXRlKFF1ZXJ5IHEpIHsKICAgICAgICAg\nICAgICAgIHEuc2V0UGFyYW1ldGVyKCJwMSIsICJYWVoiKTsKICAgICAgICAg\nICAgICAgIHEuc2V0UGFyYW1ldGVyKCJwMiIsICJBQkMiKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0sIGMsIGpwcWwpOwogICAgICAgIAogICAgICAgIGMu\nd2hlcmUoY2IuZXF1YWwocC5nZXQoUGVyc29uXy5uYW1lKSwgY2IucGFyYW1l\ndGVyKFN0cmluZy5jbGFzcywgInAxIikpKTsKICAgICAgICAKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShuZXcgUXVlcnlEZWNvcmF0b3IoKSB7CiAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIGRlY29yYXRlKFF1ZXJ5IHEpIHsKICAgICAg\nICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKCJwMSIsICJNTk8iKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0sIGMsIGVkaXRlZGpwcWwpOwogICAgfQogICAg\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2VyYWNoV2l0aGluUmVzdWx0KCkgewog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBl\nbS5jcmVhdGVRdWVyeSgiREVMRVRFIEZST00gUGVyc29uIHAiKS5leGVjdXRl\nVXBkYXRlKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgUGVyc29uIHAxID0gbmV3IFBlcnNvbigpOyBwMS5zZXROYW1lKCJQaW5h\na2kiKTsKICAgICAgICBQZXJzb24gcDIgPSBuZXcgUGVyc29uKCk7IHAyLnNl\ndE5hbWUoIlBhY2lubyIpOwogICAgICAgIFBlcnNvbiBwMyA9IG5ldyBQZXJz\nb24oKTsgcDMuc2V0TmFtZSgiVG9tIik7CiAgICAgICAgUGVyc29uIHA0ID0g\nbmV3IFBlcnNvbigpOyBwNC5zZXROYW1lKCJEaWNrIik7CiAgICAgICAgZW0u\ncGVyc2lzdChwMSk7IGVtLnBlcnNpc3QocDIpO2VtLnBlcnNpc3QocDMpOyBl\nbS5wZXJzaXN0KHA0KTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8UGVyc29u\nPiBjID0gY2IuY3JlYXRlUXVlcnkoUGVyc29uLmNsYXNzKTsKICAgICAgICBS\nb290PFBlcnNvbj4gcCA9IGMuZnJvbShQZXJzb24uY2xhc3MpOwogICAgICAg\nIGMuc2VsZWN0KHApOwogICAgICAgIFByZWRpY2F0ZSBsaWtlID0gY2IubGlr\nZShwLmdldChQZXJzb25fLm5hbWUpLCBjYi5wYXJhbWV0ZXIoU3RyaW5nLmNs\nYXNzLCAicGF0dGVybiIpKTsKICAgICAgICBjLndoZXJlKGxpa2UpOwogICAg\nICAgIFR5cGVkUXVlcnk8UGVyc29uPiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGMp\nLnNldFBhcmFtZXRlcigicGF0dGVybiIsICJQJSIpOwogICAgICAgIExpc3Q8\nUGVyc29uPiByMSA9IHExLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMiwgcjEuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBQcmVk\naWNhdGUgZXhhY3QgPSBjYi5lcXVhbChwLmdldChQZXJzb25fLm5hbWUpLCBj\nYi5wYXJhbWV0ZXIoU3RyaW5nLmNsYXNzLCAiZXhhY3QiKSk7CiAgICAgICAg\nYy53aGVyZShsaWtlLCBleGFjdCk7CiAgICAgICAgVHlwZWRRdWVyeTxQZXJz\nb24+IHEyID0gZW0uY3JlYXRlUXVlcnkoYykuc2V0UGFyYW1ldGVyKCJwYXR0\nZXJuIiwgIlAlIikuc2V0UGFyYW1ldGVyKCJleGFjdCIsIlBpbmFraSIpOwog\nICAgICAgIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHEyKS5zZXRDYW5kaWRh\ndGVDb2xsZWN0aW9uKHIxKTsKICAgICAgICBhdWRpdG9yLmNsZWFyKCk7CiAg\nICAgICAgTGlzdDxQZXJzb24+IHIyID0gcTIuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIGFzc2VydFRydWUoYXVkaXRvci5nZXRTUUxzKCkuaXNFbXB0eSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcjIuc2l6ZSgpKTsKICAgIH0K\nICAgIAogICAgdm9pZCBhc3NlcnRGYWlscyhTdHJpbmcgbWVzc2FnZSwgQ3Jp\ndGVyaWFRdWVyeTw/PiBjKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nZW0uY3JlYXRlUXVlcnkoYyk7CiAgICAgICAgICAgIGZhaWwobWVzc2FnZSk7\nIAogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIC8vIGdvb2QKICAgICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

