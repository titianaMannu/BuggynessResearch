{"sha":"6ad6d78c77e225569e3b1b07c43d86f0054c5a66","node_id":"MDQ6QmxvYjIwNjM2NDo2YWQ2ZDc4Yzc3ZTIyNTU2OWUzYjFiMDdjNDNkODZmMDA1NGM1YTY2","size":9993,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6ad6d78c77e225569e3b1b07c43d86f0054c5a66","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWEu\ncmVzdWx0czsKCmltcG9ydCBqYXZhLnRleHQuRGF0ZUZvcm1hdDsKaW1wb3J0\nIGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5E\nYXRlOwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0\naWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5Mb2NhbGU7CgppbXBvcnQgamF2\nYXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLlF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuVHVw\nbGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5UeXBlZFF1ZXJ5OwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuY3JpdGVyaWEuQ3JpdGVyaWFRdWVyeTsK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNyaXRlcmlhLkpvaW47CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5Dcml0ZXJpYUJ1aWxkZXI7\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5Sb290OwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmds\nZUVNRlRlc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3RUeXBlZFJlc3VsdHMg\nZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7CgogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgaW50IE5fT1JERVJTID0gMTU7CiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBpbnQgTl9JVEVNU19QRVJfT1JERVIgPSAzOwoKICAgIC8vIHVz\nZSBzaG9ydCBkYXRhIGZvcm1hdAogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nU3RyaW5nW10gT1JERVJfREFURVMgPQogICAgICAgIHsgIjMvMTIvMjAwOCAx\nOjAwIFBNIiwgIjEwLzAxLzIwMDggMTo1MSBBTSIsICIxMi8xMi8yMDA4IDEw\nOjAxIEFNIiwgIjUvMjEvMjAwOSAzOjIzIFBNIiB9OwoKICAgIERhdGVGb3Jt\nYXQgZGYgPSBEYXRlRm9ybWF0LmdldERhdGVJbnN0YW5jZShEYXRlRm9ybWF0\nLlNIT1JULCBMb2NhbGUuVVMpOwoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc2V0VXAoQ0xFQVJfVEFCTEVT\nLCBPcmRlci5jbGFzcywgSXRlbS5jbGFzcywgU2hvcC5jbGFzcywgUHJvZHVj\nZXIuY2xhc3MsCiAgICAgICAgICAgICAib3BlbmpwYS5EeW5hbWljRW5oYW5j\nZXJBZ2VudCIsICJmYWxzZSIpOwogICAgICAgIHBvcHVsYXRlKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgcG9wdWxhdGUoKSB0aHJvd3MgUGFyc2VFeGNl\ncHRpb24gewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBTaG9wIHMgPSBuZXcgU2hvcCgpOwogICAgICAg\nIE9yZGVyIG9yZGVyOwogICAgICAgIEl0ZW0gaXRlbTsKICAgICAgICBQcm9k\ndWNlciBwOwoKICAgICAgICBzLnNldElkKDEpOwogICAgICAgIHMuc2V0TmFt\nZSgiZUJheS5jb20iKTsKICAgICAgICBzLnNldE9yZGVycyhuZXcgSGFzaFNl\ndDxPcmRlcj4oKSk7CgogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IE5f\nT1JERVJTOyBpKyspIHsKICAgICAgICAgICAgb3JkZXIgPSBuZXcgT3JkZXIo\nKTsKICAgICAgICAgICAgb3JkZXIuc2V0SWQoaSk7CiAgICAgICAgICAgIG9y\nZGVyLnNldERhdGUoZGYucGFyc2UoT1JERVJfREFURVNbaSAlIE9SREVSX0RB\nVEVTLmxlbmd0aF0pKTsKICAgICAgICAgICAgb3JkZXIuc2V0RmlsbGVkKGkg\nJSAyID09IDAgPyB0cnVlIDogZmFsc2UpOwogICAgICAgICAgICBvcmRlci5z\nZXRTaG9wKHMpOwogICAgICAgICAgICBvcmRlci5zZXRJdGVtcyhuZXcgSGFz\naFNldDxJdGVtPigpKTsKICAgICAgICAgICAgcy5nZXRPcmRlcnMoKS5hZGQo\nb3JkZXIpOwogICAgICAgICAgICBmb3IgKGludCBqID0gMTsgaiA8PSBOX0lU\nRU1TX1BFUl9PUkRFUjsgaisrKSB7CiAgICAgICAgICAgICAgICBpdGVtID0g\nbmV3IEl0ZW0oKTsKICAgICAgICAgICAgICAgIGl0ZW0uc2V0T3JkZXIob3Jk\nZXIpOwogICAgICAgICAgICAgICAgb3JkZXIuZ2V0SXRlbXMoKS5hZGQoaXRl\nbSk7CiAgICAgICAgICAgICAgICBwID0gbmV3IFByb2R1Y2VyKCk7CiAgICAg\nICAgICAgICAgICBwLnNldE5hbWUoImZpbGxlciIpOwogICAgICAgICAgICAg\nICAgcC5zZXRJdGVtKGl0ZW0pOwogICAgICAgICAgICAgICAgaXRlbS5zZXRQ\ncm9kdWN0KHApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVt\nLnBlcnNpc3Qocyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3Vw\nZXIudGVhckRvd24oKTsKICAgIH0KCiAgICAvKioKICAgICAqIFZlcmlmeSB0\naGF0IGEgcXVlcnkgdXNpbmcgYSBkYXRlIGZpZWxkIHdvcmtzIHRoZSBzYW1l\nIHdpdGggSlBRTCwgSlBRTCAodHlwZWQpLCBDcml0ZXJpYSAodHlwZWQpLCBh\nbmQgdmlhIGEKICAgICAqIE5hdGl2ZVF1ZXJ5CiAgICAgKiAKICAgICAqIEB0\naHJvd3MgRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RU\neXBlZEpQUUxRdWVyeSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgUXVlcnkganBx\nbFF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnkoIlNlbGVjdCBvIGZyb20gT3JkZXIg\nbyB3aGVyZSBvLmZpbGxlZCA9IHRydWUiKTsKICAgICAgICAvLyBEb24ndCBz\ndXBwcmVzcyB3YXJuaW5ncy4KICAgICAgICBMaXN0PE9yZGVyPiBqcHFsUmVz\ndWx0cyA9IGpwcWxRdWVyeS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKE5fT1JERVJTIC8gMiwganBxbFJlc3VsdHMuc2l6ZSgpKTsK\nCiAgICAgICAgVHlwZWRRdWVyeTxPcmRlcj4ganBxbFR5cGVkUXVlcnkgPSBl\nbS5jcmVhdGVRdWVyeSgiU2VsZWN0IG8gZnJvbSBPcmRlciBvIHdoZXJlIG8u\nZmlsbGVkID0gdHJ1ZSIsIE9yZGVyLmNsYXNzKTsKICAgICAgICBMaXN0PE9y\nZGVyPiBqcHFsVHlwZWRSZXN1bHRzID0ganBxbFR5cGVkUXVlcnkuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscyhOX09SREVSUyAvIDIs\nIGpwcWxUeXBlZFJlc3VsdHMuc2l6ZSgpKTsKCiAgICAgICAgLy8gY3JlYXRl\nIHRoZSBzYW1lIHF1ZXJ5IGFuZCBnZXQgdHlwZWQgcmVzdWx0cy4KICAgICAg\nICBDcml0ZXJpYUJ1aWxkZXIgcWIgPSBlbS5nZXRDcml0ZXJpYUJ1aWxkZXIo\nKTsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9yZGVyPiBjcSA9IHFiLmNyZWF0\nZVF1ZXJ5KE9yZGVyLmNsYXNzKTsKICAgICAgICBSb290PE9yZGVyPiBvcmRl\nciA9IGNxLmZyb20oT3JkZXIuY2xhc3MpOwogICAgICAgIGNxLnNlbGVjdChv\ncmRlcikud2hlcmUocWIuZXF1YWwob3JkZXIuZ2V0KE9yZGVyXy5maWxsZWQp\nLCBCb29sZWFuLlRSVUUpKTsKCiAgICAgICAgVHlwZWRRdWVyeTxPcmRlcj4g\ndHlwZWRDcml0ZXJpYVF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnkoY3EpOwogICAg\nICAgIExpc3Q8T3JkZXI+IHR5cGVkQ3JpdGVyaWFSZXN1bHRzID0gdHlwZWRD\ncml0ZXJpYVF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoTl9PUkRFUlMgLyAyLCB0eXBlZENyaXRlcmlhUmVzdWx0cy5zaXpl\nKCkpOwoKICAgICAgICBRdWVyeSBuYXRpdmVRID0gZW0uY3JlYXRlTmF0aXZl\nUXVlcnkoIlNFTEVDVCAqIEZST00gQ1JJVF9SRVNfT1JEIG8gV0hFUkUgKG8u\nZmlsbGVkID0gMSkiLCBPcmRlci5jbGFzcyk7CiAgICAgICAgLy8gRG9uJ3Qg\nc3VwcHJlc3Mgd2FybmluZ3MuCiAgICAgICAgTGlzdDxPcmRlcj4gdHlwZWRO\nYXRpdmVSZXN1bHRzID0gbmF0aXZlUS5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKE5fT1JERVJTIC8gMiwgdHlwZWROYXRpdmVSZXN1\nbHRzLnNpemUoKSk7CgogICAgICAgIGZvciAoT3JkZXIgbyA6IGpwcWxSZXN1\nbHRzKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoanBxbFR5cGVkUmVzdWx0\ncy5jb250YWlucyhvKSk7CiAgICAgICAgICAgIGFzc2VydFRydWUodHlwZWRD\ncml0ZXJpYVJlc3VsdHMuY29udGFpbnMobykpOwogICAgICAgICAgICBhc3Nl\ncnRUcnVlKHR5cGVkTmF0aXZlUmVzdWx0cy5jb250YWlucyhvKSk7CiAgICAg\nICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBWZXJpZnkgdGhhdCBhIHF1ZXJ5IHVzaW5nIGEgZGF0ZSBmaWVsZCB3b3Jr\ncyB0aGUgc2FtZSB3aXRoIEpQUUwsIEpQUUwgKHR5cGVkKSwgQ3JpdGVyaWEg\nKHR5cGVkKSwgYW5kIHZpYSBhCiAgICAgKiBOYXRpdmVRdWVyeQogICAgICog\nCiAgICAgKiBAdGhyb3dzIEV4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RGF0ZVF1ZXJ5KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgRGF0ZSBtYXhEYXRlID0gZGYucGFyc2UoT1JERVJfREFU\nRVNbMl0pOwogICAgICAgIAogICAgICAgIFF1ZXJ5IGpwcWxRdWVyeSA9IGVt\nLmNyZWF0ZVF1ZXJ5KCJTZWxlY3QgbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5k\nYXRlIDwgOm1heERhdGUiKTsKICAgICAgICBqcHFsUXVlcnkuc2V0UGFyYW1l\ndGVyKCJtYXhEYXRlIiwgbWF4RGF0ZSk7CiAgICAgICAgTGlzdDxPcmRlcj4g\nanBxbFJlc3VsdHMgPSBqcHFsUXVlcnkuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgIGFzc2VydEVxdWFscyhOX09SREVSUyAvIDIsIGpwcWxSZXN1bHRzLnNp\nemUoKSk7CgogICAgICAgIFR5cGVkUXVlcnk8T3JkZXI+IHR5cGVkSnBxbFF1\nZXJ5ID0gZW0uY3JlYXRlUXVlcnkoIlNlbGVjdCBvIGZyb20gT3JkZXIgbyB3\naGVyZSBvLmRhdGUgPCA6bWF4RGF0ZSIsIE9yZGVyLmNsYXNzKTsKICAgICAg\nICB0eXBlZEpwcWxRdWVyeS5zZXRQYXJhbWV0ZXIoIm1heERhdGUiLCBtYXhE\nYXRlKTsKICAgICAgICBMaXN0PE9yZGVyPiB0eXBlZEpwcWxSZXN1bHRzID0g\ndHlwZWRKcHFsUXVlcnkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhOX09SREVSUyAvIDIsIHR5cGVkSnBxbFJlc3VsdHMuc2l6ZSgp\nKTsKCiAgICAgICAgQ3JpdGVyaWFCdWlsZGVyIHFiID0gZW0uZ2V0Q3JpdGVy\naWFCdWlsZGVyKCk7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxPcmRlcj4gY3Jp\ndGVyaWFRdWVyeSA9IHFiLmNyZWF0ZVF1ZXJ5KE9yZGVyLmNsYXNzKTsKICAg\nICAgICBSb290PE9yZGVyPiBvcmRlciA9IGNyaXRlcmlhUXVlcnkuZnJvbShP\ncmRlci5jbGFzcyk7CiAgICAgICAgY3JpdGVyaWFRdWVyeS5zZWxlY3Qob3Jk\nZXIpLndoZXJlKHFiLmxlc3NUaGFuKG9yZGVyLmdldChPcmRlcl8uZGF0ZSks\nIHFiLnBhcmFtZXRlcihEYXRlLmNsYXNzLCAibWF4RGF0ZSIpKSk7CiAgICAg\nICAgVHlwZWRRdWVyeTxPcmRlcj4gdHEgPSBlbS5jcmVhdGVRdWVyeShjcml0\nZXJpYVF1ZXJ5KTsKICAgICAgICB0cS5zZXRQYXJhbWV0ZXIoIm1heERhdGUi\nLCBtYXhEYXRlKTsKICAgICAgICBMaXN0PE9yZGVyPiBjcml0ZXJpYVJlc3Vs\ndHMgPSB0cS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKE5fT1JERVJTIC8gMiwgY3JpdGVyaWFSZXN1bHRzLnNpemUoKSk7CgogICAg\nICAgIFF1ZXJ5IG5hdGl2ZVF1ZXJ5ID0gZW0uY3JlYXRlTmF0aXZlUXVlcnko\nIlNlbGVjdCAqIGZyb20gQ1JJVF9SRVNfT1JEIG8gV0hFUkUgKG8uY2RhdGUg\nPCA/MSkiLCBPcmRlci5jbGFzcyk7CiAgICAgICAgbmF0aXZlUXVlcnkuc2V0\nUGFyYW1ldGVyKDEsIG1heERhdGUpOwogICAgICAgIExpc3Q8T3JkZXI+IG5h\ndGl2ZVJlc3VsdHMgPSBuYXRpdmVRdWVyeS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKE5fT1JERVJTIC8gMiwgbmF0aXZlUmVzdWx0\ncy5zaXplKCkpOwoKICAgICAgICBmb3IgKE9yZGVyIG8gOiBqcHFsUmVzdWx0\ncykgewogICAgICAgICAgICBhc3NlcnRUcnVlKHR5cGVkSnBxbFJlc3VsdHMu\nY29udGFpbnMobykpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGNyaXRlcmlh\nUmVzdWx0cy5jb250YWlucyhvKSk7CiAgICAgICAgICAgIGFzc2VydFRydWUo\nbmF0aXZlUmVzdWx0cy5jb250YWlucyhvKSk7CiAgICAgICAgfQogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUZXN0Y2FzZSB0\nbyB2ZXJpZnkgdGhhdCBzZWxlY3RpbmcgbXVsdGlwbGUgcmVzdWx0cyBpbiBh\nIHZhcmlldHkgb2Ygd2F5cyByZXR1cm5zIHRoZSBzYW1lIHJlc3VsdHMuIFJl\nc3VsdHMgYXJlCiAgICAgKiByZXR1cm5lZCB2aWEgYSBub3JtYWwgT2JqZWN0\nIFtdIChKUFFMKSwgVHVwbGUgKENyaXRlcmlhKSwgYW5kIGEgY3VzdG9tIHR1\ncGxlIChDcml0ZXJpYS5jb25zdHJ1Y3QpCiAgICAgKiAKICAgICAqIEB0aHJv\nd3MgRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RNdWx0\naVNlbGVjdCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIGdldCBy\nZXN1bHRzIGZyb20gdHJhZGl0aW9uYWwgSlBRTAogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIFF1ZXJ5IGpwcWxRdWVyeSA9CiAgICAgICAgICAgIGVtLmNyZWF0ZVF1ZXJ5\nKCJTRUxFQ1QgbywgcCBmcm9tIE9yZGVyIG8gSk9JTiBvLml0ZW1zIGkgSk9J\nTiBpLnByb2R1Y2VyIHAgV0hFUkUgby5maWxsZWQgPSB0cnVlIik7CiAgICAg\nICAgLy8gZG9uJ3Qgc3VwcHJlc3Mgd2FybmluZ3MuCiAgICAgICAgTGlzdDxP\nYmplY3RbXT4ganBxbFJlc3VsdHMgPSBqcHFsUXVlcnkuZ2V0UmVzdWx0TGlz\ndCgpOwoKICAgICAgICAvLyBHZXQgcmVzdWx0cyB1c2luZyBUdXBsZQogICAg\nICAgIENyaXRlcmlhQnVpbGRlciBxYiA9IGVtLmdldENyaXRlcmlhQnVpbGRl\ncigpOwogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IGNyaXRlcmlhUXVl\ncnkgPSBxYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxPcmRl\ncj4gb3JkZXIgPSBjcml0ZXJpYVF1ZXJ5LmZyb20oT3JkZXIuY2xhc3MpOwog\nICAgICAgIEpvaW48SXRlbSwgUHJvZHVjZXI+IHByb2R1Y2VyID0gb3JkZXIu\nam9pbihPcmRlcl8uaXRlbXMpLmpvaW4oSXRlbV8ucHJvZHVjZXIpOwogICAg\nICAgIGNyaXRlcmlhUXVlcnkuc2VsZWN0KHFiLnR1cGxlKG9yZGVyLCBwcm9k\ndWNlcikpOwogICAgICAgIGNyaXRlcmlhUXVlcnkud2hlcmUocWIuZXF1YWwo\nb3JkZXIuZ2V0KE9yZGVyXy5maWxsZWQpLCBCb29sZWFuLlRSVUUpKTsKICAg\nICAgICBUeXBlZFF1ZXJ5PFR1cGxlPiBlcSA9IGVtLmNyZWF0ZVF1ZXJ5KGNy\naXRlcmlhUXVlcnkpOwogICAgICAgIExpc3Q8VHVwbGU+IGNyaXRlcmlhUmVz\ndWx0cyA9IGVxLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgLy8gR2V0IHJl\nc3VsdHMgdXNpbmcgY3VzdG9tIGNsYXNzCiAgICAgICAgQ3JpdGVyaWFRdWVy\neTxPcmRlclByb2R1Y2VyPiBjb25zdHJ1Y3RRdWVyeSA9IHFiLmNyZWF0ZVF1\nZXJ5KE9yZGVyUHJvZHVjZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8T3JkZXI+\nIG9yZGVyMiA9IGNvbnN0cnVjdFF1ZXJ5LmZyb20oT3JkZXIuY2xhc3MpOwog\nICAgICAgIEpvaW48SXRlbSwgUHJvZHVjZXI+IHByb2R1Y2VyMiA9IG9yZGVy\nLmpvaW4oT3JkZXJfLml0ZW1zKS5qb2luKEl0ZW1fLnByb2R1Y2VyKTsKICAg\nICAgICBjb25zdHJ1Y3RRdWVyeS5zZWxlY3QocWIuY29uc3RydWN0KE9yZGVy\nUHJvZHVjZXIuY2xhc3MsIG9yZGVyMiwgcHJvZHVjZXIyKSk7CiAgICAgICAg\nY29uc3RydWN0UXVlcnkud2hlcmUocWIuZXF1YWwob3JkZXIyLmdldChPcmRl\ncl8uZmlsbGVkKSwgQm9vbGVhbi5UUlVFKSk7CiAgICAgICAgVHlwZWRRdWVy\neTxPcmRlclByb2R1Y2VyPiB0eXBlZFF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnko\nY29uc3RydWN0UXVlcnkpOwogICAgICAgIExpc3Q8T3JkZXJQcm9kdWNlcj4g\nY29uc3RydWN0UmVzdWx0cyA9IHR5cGVkUXVlcnkuZ2V0UmVzdWx0TGlzdCgp\nOwoKICAgICAgICBhc3NlcnRFcXVhbHMoTl9PUkRFUlMgLyAyICogTl9JVEVN\nU19QRVJfT1JERVIsIGpwcWxSZXN1bHRzLnNpemUoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKE5fT1JERVJTIC8gMiAqIE5fSVRFTVNfUEVSX09SREVSLCBj\ncml0ZXJpYVJlc3VsdHMuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nTl9PUkRFUlMgLyAyICogTl9JVEVNU19QRVJfT1JERVIsIGNvbnN0cnVjdFJl\nc3VsdHMuc2l6ZSgpKTsKCiAgICAgICAgZm9yIChPYmplY3RbXSBvcyA6IGpw\ncWxSZXN1bHRzKSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygyLCBvcy5s\nZW5ndGgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKG9zWzBdIGluc3RhbmNl\nb2YgT3JkZXIpOwogICAgICAgICAgICBhc3NlcnRUcnVlKG9zWzFdIGluc3Rh\nbmNlb2YgUHJvZHVjZXIpOwogICAgICAgIH0KCiAgICAgICAgLy8gY2hlYXAg\nd2F5IHRvIGVuc3VyZSB0aGF0IHdlIGhhdmUgdGhlIHNhbWUgY29udGVudHMu\nCiAgICAgICAgLy8gaWYgbmVlZGVkIGFuIG9yZGVyQnkgY2xhdXNlIGNhbiBi\nZSBhZGRlZCB0byBtYWtlIHRoaXMgbW9yZSByb2J1c3QuCiAgICAgICAgT2Jq\nZWN0W10ganBxbFR1cGxlOwogICAgICAgIFR1cGxlIGNyaXRlcmlhVHVwbGU7\nCiAgICAgICAgT3JkZXJQcm9kdWNlciBjb25zdHJ1Y3RUdXBsZTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGpwcWxSZXN1bHRzLnNpemUoKTsgaSsr\nKSB7CiAgICAgICAgICAgIGpwcWxUdXBsZSA9IGpwcWxSZXN1bHRzLmdldChp\nKTsKICAgICAgICAgICAgY3JpdGVyaWFUdXBsZSA9IGNyaXRlcmlhUmVzdWx0\ncy5nZXQoaSk7CiAgICAgICAgICAgIGNvbnN0cnVjdFR1cGxlID0gY29uc3Ry\ndWN0UmVzdWx0cy5nZXQoaSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhq\ncHFsVHVwbGVbMF0sIGNyaXRlcmlhVHVwbGUuZ2V0KDApKTsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKGpwcWxUdXBsZVsxXSwgY3JpdGVyaWFUdXBsZS5n\nZXQoMSkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoanBxbFR1cGxlWzBd\nLCBjb25zdHJ1Y3RUdXBsZS5nZXRPcmRlcigpKTsKICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKGpwcWxUdXBsZVsxXSwgY29uc3RydWN0VHVwbGUuZ2V0UHJv\nZHVjZXIoKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCn0K\n","encoding":"base64"}

