{"sha":"06262894f462e71ebe8033926adce1998a1c61a8","node_id":"MDQ6QmxvYjIwNjM2NDowNjI2Mjg5NGY0NjJlNzFlYmU4MDMzOTI2YWRjZTE5OThhMWM2MWE4","size":4591,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/06262894f462e71ebe8033926adce1998a1c61a8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNh\nY2hlOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGls\nLk1hcDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5K\nUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5zaW1wbGUuQWxsRmllbGRUeXBlczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNp\nbmdsZUVNRlRlc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3RCdWxrSlBRTEFu\nZERhdGFDYWNoZQogICAgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7Cgog\nICAgcHJpdmF0ZSBPYmplY3Qgb2lkOwoKICAgIHB1YmxpYyB2b2lkIHNldFVw\nKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc2V0VXAoIm9wZW5qcGEu\nRGF0YUNhY2hlIiwgInRydWUiLAogICAgICAgICAgICAib3BlbmpwYS5RdWVy\neUNhY2hlIiwgInRydWUiLAogICAgICAgICAgICAib3BlbmpwYS5SZW1vdGVD\nb21taXRQcm92aWRlciIsICJzanZtIiwKICAgICAgICAgICAgQ0xFQVJfVEFC\nTEVTLAogICAgICAgICAgICBBbGxGaWVsZFR5cGVzLmNsYXNzLCBDYXNjYWRl\nUGFyZW50LmNsYXNzLCBDYXNjYWRlQ2hpbGQuY2xhc3MpOwoKICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIEFsbEZpZWxkVHlwZXMgcGMgPSBuZXcgQWxsRmllbGRUeXBlcygp\nOwogICAgICAgIHBjLnNldFN0cmluZ0ZpZWxkKCJEZWxldGVNZSIpOwogICAg\nICAgIGVtLnBlcnNpc3QocGMpOwogICAgICAgIG9pZCA9IGVtLmdldE9iamVj\ndElkKHBjKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdEJ1bGtEZWxldGUoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBMaXN0IHJlc3Vs\ndCA9IGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgbyBGUk9NIEFsbEZpZWxkVHlw\nZXMgbyIpCiAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIHJlc3VsdC5zaXplKCkpOwogICAgICAgIGVtLmNy\nZWF0ZVF1ZXJ5KCJERUxFVEUgRlJPTSBBbGxGaWVsZFR5cGVzIG8iKS5leGVj\ndXRlVXBkYXRlKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIC8vIHRoaXMgYXNzdW1l\ncyB0aGF0IHdlIGludmFsaWRhdGUgdGhlIGNhY2hlLCByYXRoZXIgdGhhbiB1\ncGRhdGUgaXQKICAgICAgICAvLyBhY2NvcmRpbmcgdG8gdGhlIGJ1bGsgcnVs\nZS4KICAgICAgICBhc3NlcnRGYWxzZShPcGVuSlBBUGVyc2lzdGVuY2UuY2Fz\ndChlbWYpLmdldFN0b3JlQ2FjaGUoKQogICAgICAgICAgICAuY29udGFpbnMo\nQWxsRmllbGRUeXBlcy5jbGFzcywgb2lkKSk7CgogICAgICAgIGFzc2VydE51\nbGwoZW0uZmluZChBbGxGaWVsZFR5cGVzLmNsYXNzLCBvaWQpKTsKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RCdWxr\nVXBkYXRlKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIExpc3QgcmVzdWx0ID0gZW0u\nY3JlYXRlUXVlcnkoIlNFTEVDVCBvIEZST00gQWxsRmllbGRUeXBlcyBvICIK\nICAgICAgICAgICAgKyAiV0hFUkUgby5pbnRGaWVsZCA9IDAiKS5nZXRSZXN1\nbHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3VsdC5zaXpl\nKCkpOwogICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KCJVUERBVEUgQWxsRmllbGRU\neXBlcyBvIFNFVCBvLmludEZpZWxkID0gMTAiKQogICAgICAgICAgICAuZXhl\nY3V0ZVVwZGF0ZSgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAgICAvLyB0aGlzIGFzc3Vt\nZXMgdGhhdCB3ZSBpbnZhbGlkYXRlIHRoZSBjYWNoZSwgcmF0aGVyIHRoYW4g\ndXBkYXRlIGl0CiAgICAgICAgLy8gYWNjb3JkaW5nIHRvIHRoZSBidWxrIHJ1\nbGUuCiAgICAgICAgYXNzZXJ0RmFsc2UoT3BlbkpQQVBlcnNpc3RlbmNlLmNh\nc3QoZW1mKS5nZXRTdG9yZUNhY2hlKCkKICAgICAgICAgICAgLmNvbnRhaW5z\nKEFsbEZpZWxkVHlwZXMuY2xhc3MsIG9pZCkpOwoKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RCdWxrRGVsZXRlT2ZD\nYXNjYWRpbmdFbnRpdHkoKSB7CiAgICAgICAgQ2FzY2FkZVBhcmVudCBwYXJl\nbnQgPSBuZXcgQ2FzY2FkZVBhcmVudCgpOwogICAgICAgIHBhcmVudC5zZXRO\nYW1lKCJwYXJlbnQiKTsKICAgICAgICBDYXNjYWRlQ2hpbGQgY2hpbGQgPSBu\nZXcgQ2FzY2FkZUNoaWxkKCk7CiAgICAgICAgY2hpbGQuc2V0TmFtZSgiY2hp\nbGQiKTsKICAgICAgICBwYXJlbnQuc2V0Q2hpbGQoY2hpbGQpOwoKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgZW0ucGVyc2lzdChwYXJlbnQpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIG8gRlJPTSBDYXNj\nYWRlUGFyZW50IG8iKS4KICAgICAgICAgICAgZ2V0UmVzdWx0TGlzdCgpLnNp\nemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGVtLmNyZWF0ZVF1ZXJ5\nKCJTRUxFQ1QgbyBGUk9NIENhc2NhZGVDaGlsZCBvIikuCiAgICAgICAgICAg\nIGdldFJlc3VsdExpc3QoKS5zaXplKCkpOwogICAgICAgIGVtLmNsb3NlKCk7\nCgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0u\nY3JlYXRlUXVlcnkoIkRFTEVURSBGUk9NIENhc2NhZGVQYXJlbnQgbyIpLmV4\nZWN1dGVVcGRhdGUoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMCwgZW0uY3JlYXRlUXVlcnkoIlNFTEVDVCBvIEZST00gQ2FzY2FkZVBhcmVu\ndCBvIikuCiAgICAgICAgICAgIGdldFJlc3VsdExpc3QoKS5zaXplKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscygwLCBlbS5jcmVhdGVRdWVyeSgiU0VMRUNU\nIG8gRlJPTSBDYXNjYWRlQ2hpbGQgbyIpLgogICAgICAgICAgICBnZXRSZXN1\nbHRMaXN0KCkuc2l6ZSgpKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQp9\nCg==\n","encoding":"base64"}

