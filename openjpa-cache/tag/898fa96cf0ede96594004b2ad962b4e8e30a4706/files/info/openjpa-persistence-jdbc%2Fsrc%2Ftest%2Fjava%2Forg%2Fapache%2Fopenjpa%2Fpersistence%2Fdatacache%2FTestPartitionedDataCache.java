{"sha":"caa8af7a794037c0f575818f5513856e680d7a55","node_id":"MDQ6QmxvYjIwNjM2NDpjYWE4YWY3YTc5NDAzN2MwZjU3NTgxOGY1NTEzODU2ZTY4MGQ3YTU1","size":4657,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/caa8af7a794037c0f575818f5513856e680d7a55","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kYXRhY2FjaGU7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5DYWNoZURp\nc3RyaWJ1dGlvblBvbGljeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5k\nYXRhY2FjaGUuQ29uY3VycmVudERhdGFDYWNoZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5kYXRhY2FjaGUuRGF0YUNhY2hlOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5QYXJ0aXRpb25lZERhdGFDYWNoZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRl\nTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5TdG9yZUNhY2hlSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnV0aWwuVXNlckV4Y2VwdGlvbjsKCnB1YmxpYyBj\nbGFzcyBUZXN0UGFydGl0aW9uZWREYXRhQ2FjaGUgZXh0ZW5kcyBTaW5nbGVF\nTUZUZXN0Q2FzZSB7CiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAg\nICBzdXBlci5zZXRVcCgib3BlbmpwYS5EYXRhQ2FjaGUiLCAicGFydGl0aW9u\nZWQoUGFydGl0aW9uVHlwZT1jb25jdXJyZW50LHBhcnRpdGlvbnM9IisKICAg\nICAgICAgICAgICAgICInKG5hbWU9YSxjYWNoZVNpemU9MTAwKSwobmFtZT1i\nLGNhY2hlU2l6ZT0yMDApJykiLAogICAgICAgICAgICAgICAgICAgICJvcGVu\nanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVyIiwgInNqdm0iLAogICAgICAgICJv\ncGVuanBhLkRhdGFDYWNoZU1hbmFnZXIiLCAKICAgICAgICAiRGlzdHJpYnV0\naW9uUG9saWN5PW9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kYXRh\nY2FjaGUuVGVzdFBhcnRpdGlvbmVkRGF0YUNhY2hlJFRlc3RQb2xpY3kiKTsK\nICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFByb3BlcnR5UGFyc2lu\nZygpIHsKICAgICAgICBQYXJ0aXRpb25lZERhdGFDYWNoZSBjYWNoZSA9IG5l\ndyBQYXJ0aXRpb25lZERhdGFDYWNoZSgpOwogICAgICAgIFN0cmluZyBiYWRQ\ncm9wZXJ0eSA9ICIobmFtZT1hLGNhY2hlU2l6ZT0xMDApLChuYW1lPWIsY2Fj\naGVTaXplPTIwMCI7Ly8gbWlzc2luZyBsYXN0IGJyYWNrZXQKICAgICAgICB0\ncnkgewogICAgICAgICAgICBjYWNoZS5zZXRQYXJ0aXRpb25zKGJhZFByb3Bl\ncnR5KTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgcGFyc2UgZXJyb3Ig\nb24gIiArIGJhZFByb3BlcnR5KTsKICAgICAgICB9IGNhdGNoIChVc2VyRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKGUp\nOwogICAgICAgIH0KICAgICAgICBiYWRQcm9wZXJ0eSA9ICIobmFtZT1hLGNh\nY2hlU2l6ZT0xMDApKG5hbWU9YixjYWNoZVNpemU9MjAwKSI7Ly8gbWlzc2lu\nZyBjb21tYQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNhY2hlLnNldFBh\ncnRpdGlvbnMoYmFkUHJvcGVydHkpOwogICAgICAgICAgICBmYWlsKCJFeHBl\nY3RlZCBwYXJzZSBlcnJvciBvbiAiICsgYmFkUHJvcGVydHkpOwogICAgICAg\nIH0gY2F0Y2ggKFVzZXJFeGNlcHRpb24gZSkgewogICAgICAgICAgICBTeXN0\nZW0uZXJyLnByaW50bG4oZSk7CiAgICAgICAgfQogICAgICAgIGJhZFByb3Bl\ncnR5ID0gIihjYWNoZVNpemU9MTAwKSwobmFtZT1iLGNhY2hlU2l6ZT0yMDAp\nIjsvLyBtaXNzaW5nIG5hbWUKICAgICAgICB0cnkgewogICAgICAgICAgICBj\nYWNoZS5zZXRQYXJ0aXRpb25zKGJhZFByb3BlcnR5KTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0ZWQgcGFyc2UgZXJyb3Igb24gIiArIGJhZFByb3BlcnR5\nKTsKICAgICAgICB9IGNhdGNoIChVc2VyRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgU3lzdGVtLmVyci5wcmludGxuKGUpOwogICAgICAgIH0KICAgICAg\nICBiYWRQcm9wZXJ0eSA9ICIobmFtZT1hLGNhY2hlU2l6ZT0xMDApLChuYW1l\nPWEsY2FjaGVTaXplPTIwMCkiOy8vIGR1cGxpY2F0ZSBuYW1lCiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgY2FjaGUuc2V0UGFydGl0aW9ucyhiYWRQcm9w\nZXJ0eSk7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGVkIHBhcnNlIGVycm9y\nIG9uICIgKyBiYWRQcm9wZXJ0eSk7CiAgICAgICAgfSBjYXRjaCAoVXNlckV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihl\nKTsKICAgICAgICB9CiAgICAgICAgYmFkUHJvcGVydHkgPSAiKG5hbWU9ZGVm\nYXVsdCxjYWNoZVNpemU9MTAwKSwobmFtZT1hLGNhY2hlU2l6ZT0yMDApIjsv\nLyBkZWZhdWx0IG5hbWUKICAgICAgICB0cnkgewogICAgICAgICAgICBjYWNo\nZS5zZXRQYXJ0aXRpb25zKGJhZFByb3BlcnR5KTsKICAgICAgICAgICAgZmFp\nbCgiRXhwZWN0ZWQgcGFyc2UgZXJyb3Igb24gIiArIGJhZFByb3BlcnR5KTsK\nICAgICAgICB9IGNhdGNoIChVc2VyRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgU3lzdGVtLmVyci5wcmludGxuKGUpOwogICAgICAgIH0KICAgICAgICAK\nICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFBvbGljeSgpIHsKICAg\nICAgICBDYWNoZURpc3RyaWJ1dGlvblBvbGljeSBwb2xpY3kgPSBlbWYuZ2V0\nQ29uZmlndXJhdGlvbigpLmdldERhdGFDYWNoZU1hbmFnZXJJbnN0YW5jZSgp\nLmdldERpc3RyaWJ1dGlvblBvbGljeSgpOwogICAgICAgIGFzc2VydE5vdE51\nbGwocG9saWN5KTsKICAgICAgICBhc3NlcnRUcnVlKHBvbGljeS5nZXRDbGFz\ncygpICsgIiBub3QgVGVzdFBvbGljeSIsIHBvbGljeSBpbnN0YW5jZW9mIFRl\nc3RQb2xpY3kpOwogICAgICAgIAogICAgfQogICAgcHVibGljIHZvaWQgdGVz\ndFBsdWdpbkNvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgRGF0YUNhY2hlIGNh\nY2hlID0gKChTdG9yZUNhY2hlSW1wbCllbWYuZ2V0U3RvcmVDYWNoZSgpKS5n\nZXREZWxlZ2F0ZSgpOwogICAgICAgIGFzc2VydFRydWUoY2FjaGUgaW5zdGFu\nY2VvZiBQYXJ0aXRpb25lZERhdGFDYWNoZSk7CiAgICAgICAgYXNzZXJ0RmFs\nc2UoY2FjaGUuZ2V0UGFydGl0aW9uTmFtZXMoKS5pc0VtcHR5KCkpOwogICAg\nICAgIGFzc2VydE5vdE51bGwoY2FjaGUuZ2V0UGFydGl0aW9uKCJhIiwgZmFs\nc2UpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGNhY2hlLmdldFBhcnRpdGlv\nbigiYiIsIGZhbHNlKSk7CiAgICAgICAgYXNzZXJ0TnVsbChjYWNoZS5nZXRQ\nYXJ0aXRpb24oImMiLCBmYWxzZSkpOwogICAgICAgIGFzc2VydENhY2hlQ29u\nZmlndXJhdGlvbigiYSIsIDEwMCk7CiAgICAgICAgYXNzZXJ0Q2FjaGVDb25m\naWd1cmF0aW9uKCJiIiwgMjAwKTsKICAgIH0KICAgIAogICAgdm9pZCBhc3Nl\ncnRDYWNoZUNvbmZpZ3VyYXRpb24oU3RyaW5nIG5hbWUsIGludCBzaXplKSB7\nCiAgICAgICAgRGF0YUNhY2hlIGNhY2hlID0gZW1mLmdldENvbmZpZ3VyYXRp\nb24oKS5nZXREYXRhQ2FjaGVNYW5hZ2VySW5zdGFuY2UoKS5nZXREYXRhQ2Fj\naGUobmFtZSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChjYWNoZSk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZShjYWNoZSBpbnN0YW5jZW9mIENvbmN1cnJlbnREYXRh\nQ2FjaGUpOwogICAgICAgIGFzc2VydEVxdWFscyhzaXplLCAoKENvbmN1cnJl\nbnREYXRhQ2FjaGUpY2FjaGUpLmdldENhY2hlU2l6ZSgpKTsKICAgIH0KICAg\nIAogICAgcHVibGljIHN0YXRpYyBjbGFzcyBUZXN0UG9saWN5IGltcGxlbWVu\ndHMgQ2FjaGVEaXN0cmlidXRpb25Qb2xpY3kgewoKICAgICAgICBwdWJsaWMg\nU3RyaW5nIHNlbGVjdENhY2hlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIE9i\namVjdCBjb250ZXh0KSB7CiAgICAgICAgICAgIHJldHVybiAiYSI7CiAgICAg\nICAgfQogICAgICAgIAogICAgfQp9Cg==\n","encoding":"base64"}

