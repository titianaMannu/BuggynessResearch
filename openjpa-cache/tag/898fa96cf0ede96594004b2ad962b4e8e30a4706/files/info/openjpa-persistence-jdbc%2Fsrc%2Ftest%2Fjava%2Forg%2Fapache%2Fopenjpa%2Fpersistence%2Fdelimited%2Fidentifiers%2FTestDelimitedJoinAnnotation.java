{"sha":"ab5b9f42516980be77c074f2797934935cf9ab69","node_id":"MDQ6QmxvYjIwNjM2NDphYjViOWY0MjUxNjk4MGJlNzdjMDc0ZjI3OTc5MzQ5MzVjZjlhYjY5","size":5058,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ab5b9f42516980be77c074f2797934935cf9ab69","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kZWxpbWl0ZWQu\naWRlbnRpZmllcnM7CgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS50ZXN0LlNRTExpc3RlbmVyVGVzdENhc2U7CgpwdWJs\naWMgY2xhc3MgVGVzdERlbGltaXRlZEpvaW5Bbm5vdGF0aW9uIGV4dGVuZHMg\nU1FMTGlzdGVuZXJUZXN0Q2FzZSB7CiAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBlbTsKICAgIGludCBpZCA9IDA7CiAgICBFbnRpdHlIIGVudGl0eUg7CiAg\nICBFbnRpdHlJIGVudGl0eUk7CiAgICBFbnRpdHlJMiBlbnRpdHlJMjsKICAg\nIEVudGl0eUkzIGVudGl0eUkzOwogICAgRW50aXR5STQgZW50aXR5STQ7CiAg\nICAKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBzZXRTdXBwb3J0ZWREYXRhYmFzZXMo\nCiAgICAgICAgICAgIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EZXJi\neURpY3Rpb25hcnkuY2xhc3MsCiAgICAgICAgICAgIG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5EQjJEaWN0aW9uYXJ5LmNsYXNzKTsKICAgICAgICBp\nZiAoaXNUZXN0c0Rpc2FibGVkKCkpIHsKICAgICAgICAgICAgcmV0dXJuOwog\nICAgICAgIH0KICAgICAgICAKICAgICAgICBzdXBlci5zZXRVcCgKICAgICAg\nICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRlbGltaXRl\nZC5pZGVudGlmaWVycy5FbnRpdHlILmNsYXNzLAogICAgICAgICAgICBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGVsaW1pdGVkLmlkZW50aWZp\nZXJzLkVudGl0eUkuY2xhc3MsCiAgICAgICAgICAgIG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5kZWxpbWl0ZWQuaWRlbnRpZmllcnMuRW50aXR5\nSTIuY2xhc3MsCiAgICAgICAgICAgIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5kZWxpbWl0ZWQuaWRlbnRpZmllcnMuRW50aXR5STMuY2xhc3Ms\nCiAgICAgICAgICAgIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5k\nZWxpbWl0ZWQuaWRlbnRpZmllcnMuRW50aXR5STQuY2xhc3MsCiAgICAgICAg\nICAgIERST1BfVEFCTEVTKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGVtZik7\nCiAgICAgICAgCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIGFzc2VydE5vdE51bGwoZW0pOwogICAgfQogICAgCiAg\nICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBPcGVuSlBBRW50aXR5TWFuYWdl\nckZhY3RvcnlTUEkgY3JlYXRlRU1GKGZpbmFsIE9iamVjdC4uLiBwcm9wcykg\newogICAgICAgIHJldHVybiBjcmVhdGVOYW1lZEVNRigiZGVsaW1pdGVkLWlk\nZW50aWZpZXJzIiwgcHJvcHMpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCBjcmVhdGVIYW5kSShpbnQgaWQpIHsKICAgICAgICBlbnRpdHlIID0gbmV3\nIEVudGl0eUgoaWQpOwogICAgICAgIGVudGl0eUguc2V0TmFtZSgiZWgiKTsK\nICAgICAgICBlbnRpdHlILnNldFNlY05hbWUoInNlY05hbWUxIik7CiAgICAg\nICAgCiAgICAgICAgZW50aXR5SSA9IG5ldyBFbnRpdHlJKGlkKTsKICAgICAg\nICBlbnRpdHlJLnNldE5hbWUoImVpIik7CiAgICAgICAgCiAgICAgICAgZW50\naXR5STIgPSBuZXcgRW50aXR5STIoaWQpOwogICAgICAgIGVudGl0eUkyLnNl\ndE5hbWUoImVpMiIpOwogICAgICAgIAogICAgICAgIGVudGl0eUkzID0gbmV3\nIEVudGl0eUkzKGlkKTsKICAgICAgICBlbnRpdHlJMy5zZXROYW1lKCJlaTMi\nKTsKICAgICAgICAKICAgICAgICBlbnRpdHlJNCA9IG5ldyBFbnRpdHlJNChp\nZCk7CiAgICAgICAgZW50aXR5STQuc2V0TmFtZSgiZWk0Iik7CiAgICAgICAg\nCiAgICAgICAgZW50aXR5SC5hZGRFbnRpdHlJKGVudGl0eUkpOwogICAgICAg\nIGVudGl0eUkuYWRkRW50aXR5SChlbnRpdHlIKTsKICAgICAgICAKICAgICAg\nICBlbnRpdHlILnNldEVudGl0eUkyKGVudGl0eUkyKTsKICAgICAgICAKICAg\nICAgICBlbnRpdHlILmFkZE1hcFZhbHVlcyhlbnRpdHlJMywgZW50aXR5STQp\nOwogICAgICAgIGVudGl0eUguYWRkTWFwMlZhbHVlcyhlbnRpdHlJNCwgZW50\naXR5STMpOwogICAgICAgIAogICAgICAgIGVudGl0eUkyLnNldEVudGl0eUkz\nKGVudGl0eUkzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q3JlYXRl\nKCkgewogICAgICAgIGlkKys7CiAgICAgICAgY3JlYXRlSGFuZEkoaWQpOwog\nICAgICAgIC8vIFRPRE86IE1heWJlIGNyZWF0ZSBhbm90aGVyIG9uZS4KICAg\nICAgICAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgZW0ucGVyc2lzdChlbnRpdHlIKTsKICAgICAgICBlbS5wZXJzaXN0\nKGVudGl0eUkpOwogICAgICAgIGVtLnBlcnNpc3QoZW50aXR5STIpOwogICAg\nICAgIGVtLnBlcnNpc3QoZW50aXR5STMpOwogICAgICAgIGVtLnBlcnNpc3Qo\nZW50aXR5STQpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CiAgICAgICAgCiAgICAgICAgcnVuUXVlcmllcygpOwogICAgfQogICAg\nCiAgICBwcml2YXRlIHZvaWQgcnVuUXVlcmllcygpIHsKICAgICAgICBlbS5j\nbGVhcigpOwogICAgICAgIHF1ZXJ5Sm9pblRhYmxlKCk7CiAgICAgICAgZW0u\nY2xlYXIoKTsKICAgICAgICBxdWVyeUpvaW5Db2x1bW4oKTsKICAgICAgICBl\nbS5jbGVhcigpOwogICAgICAgIHF1ZXJ5U2Vjb25kYXJ5VGFibGVWYWx1ZSgp\nOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgcXVlcnlNYXBWYWx1ZSgp\nOwogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgcXVlcnlKb2luVGFibGUo\nKSB7CiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0KICAgICAgICAgICAgIlNFTEVD\nVCBoICIgKwogICAgICAgICAgICAiRlJPTSBFbnRpdHlIIGggSk9JTiBoLmVu\ndGl0eUlzIGkgIiArCiAgICAgICAgICAgICJXSEVSRSBpLm5hbWUgPSAnZWkn\nIjsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpOwog\nICAgICAgIExpc3Q8RW50aXR5SD4gcmVzdWx0cyA9IChMaXN0PEVudGl0eUg+\nKXEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscygxLHJl\nc3VsdHMuc2l6ZSgpKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcXVlcnlK\nb2luQ29sdW1uKCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9IAogICAgICAg\nICAgICAiU0VMRUNUIGggIiArCiAgICAgICAgICAgICJGUk9NIEVudGl0eUgg\naCBKT0lOIGguZW50aXR5STIgaTIgIiArCiAgICAgICAgICAgICJXSEVSRSBp\nMi5uYW1lID0gJ2VpMiciOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVR\ndWVyeShxdWVyeSk7CiAgICAgICAgTGlzdDxFbnRpdHlIPiByZXN1bHRzID0g\nKExpc3Q8RW50aXR5SD4pcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEscmVzdWx0cy5zaXplKCkpOwogICAgfQoKICAgIHByaXZh\ndGUgdm9pZCBxdWVyeVNlY29uZGFyeVRhYmxlVmFsdWUoKSB7CiAgICAgICAg\nU3RyaW5nIHF1ZXJ5ID0gCiAgICAgICAgICAgICJTRUxFQ1QgaCAiICsKICAg\nICAgICAgICAgIkZST00gRW50aXR5SCBoICIgKwogICAgICAgICAgICAiV0hF\nUkUgaC5zZWNOYW1lID0gJ3NlY05hbWUxJyI7CiAgICAgICAgUXVlcnkgcSA9\nIGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KTsKICAgICAgICBMaXN0PEVudGl0eUg+\nIHJlc3VsdHMgPSAoTGlzdDxFbnRpdHlIPilxLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMSxyZXN1bHRzLnNpemUoKSk7CiAgICB9\nCgogICAgcHJpdmF0ZSB2b2lkIHF1ZXJ5TWFwVmFsdWUoKSB7CiAgICAgICAg\nU3RyaW5nIHF1ZXJ5ID0KICAgICAgICAgICAgIlNFTEVDVCBoICIgKwogICAg\nICAgICAgICAiRlJPTSBFbnRpdHlIIGgsIElOKGgubWFwMikgbSAiICsKICAg\nICAgICAgICAgIldIRVJFIG0ubmFtZSA9ICdlaTMnIjsKICAgICAgICBRdWVy\neSBxID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpOwogICAgICAgIExpc3Q8RW50\naXR5SD4gcmVzdWx0cyA9IChMaXN0PEVudGl0eUg+KXEuZ2V0UmVzdWx0TGlz\ndCgpOwogICAgICAgIGFzc2VydEVxdWFscygxLHJlc3VsdHMuc2l6ZSgpKTsK\nICAgIH0KICAgIAogICAgCn0K\n","encoding":"base64"}

