{"sha":"34d14a5e877ae2ee5829ef9ca9d29559c3ddc00a","node_id":"MDQ6QmxvYjIwNjM2NDozNGQxNGE1ZTg3N2FlMmVlNTgyOWVmOWNhOWQyOTU1OWMzZGRjMDBh","size":3673,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/34d14a5e877ae2ee5829ef9ca9d29559c3ddc00a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kZXRhY2htZW50\nOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlBlcnNpc3Rl\nbmNlQ2FwYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlclNQSTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kZXRhY2htZW50Lm1vZGVsLk5vRGV0\nYWNoZWRTdGF0ZUVudGl0eUZpZWxkQWNjZXNzOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRldGFjaG1lbnQubW9kZWwuTm9EZXRh\nY2hlZFN0YXRlRW50aXR5UHJvcGVydHlBY2Nlc3M7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2Fz\nZTsKCnB1YmxpYyBjbGFzcyBUZXN0RGV0YWNoTm9TdGF0ZUZpZWxkIGV4dGVu\nZHMgU2luZ2xlRU1GVGVzdENhc2UgewoKICAgIEBPdmVycmlkZQogICAgcHJv\ndGVjdGVkIHZvaWQgc2V0VXAoT2JqZWN0Li4uIHByb3BzKSB7CiAgICAgICAg\nc3VwZXIuc2V0VXAoRFJPUF9UQUJMRVMsICJvcGVuanBhLkRldGFjaFN0YXRl\nIiwgImxvYWRlZChEZXRhY2hlZFN0YXRlRmllbGQ9ZmFsc2UpIiwKICAgICAg\nICAgICAgTm9EZXRhY2hlZFN0YXRlRW50aXR5UHJvcGVydHlBY2Nlc3MuY2xh\nc3MsIE5vRGV0YWNoZWRTdGF0ZUVudGl0eUZpZWxkQWNjZXNzLmNsYXNzKTsK\nICAgICAgICBsb2FkREIoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMg\ndGVzdGNhc2Ugd2FzIGFkZGVkIGZvciBPUEVOSlBBLTE0MDAuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHRlc3RJc0RldGNoZWROb1N0YXRlTWFuYWdlclpl\ncm9WZXJzaW9uRmllbGQoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXJTUEkgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIE5vRGV0YWNoZWRTdGF0ZUVudGl0eVByb3BlcnR5QWNjZXNzIHByb3BlcnR5\nID0gZW0uZmluZChOb0RldGFjaGVkU3RhdGVFbnRpdHlQcm9wZXJ0eUFjY2Vz\ncy5jbGFzcywgMSk7CiAgICAgICAgTm9EZXRhY2hlZFN0YXRlRW50aXR5Rmll\nbGRBY2Nlc3MgZmllbGQgPSBlbS5maW5kKE5vRGV0YWNoZWRTdGF0ZUVudGl0\neUZpZWxkQWNjZXNzLmNsYXNzLCAxKTsKICAgICAgICBlbS5jbG9zZSgpOwoK\nICAgICAgICBQZXJzaXN0ZW5jZUNhcGFibGUgcGNQcm9wZXJ0eSA9IChQZXJz\naXN0ZW5jZUNhcGFibGUpIHByb3BlcnR5OwogICAgICAgIFBlcnNpc3RlbmNl\nQ2FwYWJsZSBwY0ZpZWxkID0gKFBlcnNpc3RlbmNlQ2FwYWJsZSkgZmllbGQ7\nCgogICAgICAgIGFzc2VydFRydWUocGNQcm9wZXJ0eS5wY0lzRGV0YWNoZWQo\nKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwY0ZpZWxkLnBjSXNEZXRhY2hlZCgp\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgdGVzdGNhc2Ugd2FzIGFk\nZGVkIGZvciBPUEVOSlBBLTE0MDAuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHRlc3RQZXJzaXN0UmVsYXRpb25zaGlwVG9EZXRjaGVkRW50aXR5WmVyb1Zl\ncnNpb24oKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE5vRGV0YWNo\nZWRTdGF0ZUVudGl0eVByb3BlcnR5QWNjZXNzIHByb3BlcnR5ID0gZW0uZmlu\nZChOb0RldGFjaGVkU3RhdGVFbnRpdHlQcm9wZXJ0eUFjY2Vzcy5jbGFzcywg\nMSk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgLy8gTWFrZSBzdXJl\nIHdlIGRvbid0IGhpdCBhbnkgZXhjZXB0aW9ucyB3aGVuIHBlcnNpc3Rpbmcg\nYSByZWxhdGlvbnNoaXAgdG8gYSBkZXRhY2hlZAogICAgICAgIC8vIGVudGl0\neS4KICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIE5v\nRGV0YWNoZWRTdGF0ZUVudGl0eUZpZWxkQWNjZXNzIGZpZWxkID0gZW0uZmlu\nZChOb0RldGFjaGVkU3RhdGVFbnRpdHlGaWVsZEFjY2Vzcy5jbGFzcywgMSk7\nCiAgICAgICAgZmllbGQuc2V0UmVsYXRpb25zaGlwKHByb3BlcnR5KTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVt\nLmNsb3NlKCk7CgogICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSByZWxh\ndGlvbnNoaXAgd2FzIHBlcnNpc3RlZAogICAgICAgIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBmaWVsZCA9IGVtLmZpbmQoTm9E\nZXRhY2hlZFN0YXRlRW50aXR5RmllbGRBY2Nlc3MuY2xhc3MsIDEpOwogICAg\nICAgIHByb3BlcnR5ID0gZmllbGQuZ2V0UmVsYXRpb25zaGlwKCk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChwcm9wZXJ0eSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIHByb3BlcnR5LmdldElkKCkpOwoKICAgIH0KCiAgICB2b2lkIGxv\nYWREQigpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlclNQSSBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLmNyZWF0ZU5hdGl2ZVF1\nZXJ5KCJJTlNFUlQgSU5UTyBQcm9wZXJ0eUFjY2Vzc05vRGV0YWNoZWRTdGF0\nZSAoSUQsVkVSU0lPTikgVkFMVUVTICgxLDApIikKICAgICAgICAgICAgLmV4\nZWN1dGVVcGRhdGUoKTsKICAgICAgICBlbS5jcmVhdGVOYXRpdmVRdWVyeSgi\nSU5TRVJUIElOVE8gRmllbGRBY2Nlc3NOb0RldGFjaGVkU3RhdGUgKElELFZF\nUlNJT04pIFZBTFVFUyAoMSwwKSIpCiAgICAgICAgICAgIC5leGVjdXRlVXBk\nYXRlKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsK\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

