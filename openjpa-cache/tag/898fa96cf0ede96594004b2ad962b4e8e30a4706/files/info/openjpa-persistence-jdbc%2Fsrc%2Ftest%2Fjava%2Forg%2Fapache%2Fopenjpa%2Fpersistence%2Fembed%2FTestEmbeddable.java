{"sha":"96d329e746fc5e0654616d6d5150ca2c2797a5e1","node_id":"MDQ6QmxvYjIwNjM2NDo5NmQzMjllNzQ2ZmM1ZTA2NTQ2MTZkNmQ1MTUwY2EyYzI3OTdhNWUx","size":105644,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/96d329e746fc5e0654616d6d5150ca2c2797a5e1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5lbWJlZDsKCmlt\ncG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuU1FM\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wOwppbXBvcnQg\namF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7\nCmltcG9ydCBqYXZhLnV0aWwuQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwu\nQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwppbXBvcnQgamF2\nYS51dGlsLkdyZWdvcmlhbkNhbGVuZGFyOwppbXBvcnQgamF2YS51dGlsLkhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEu\ndXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEu\ndXRpbC5TZXQ7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFu\nYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJG\nYWN0b3J5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5VHJhbnNh\nY3Rpb247CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5NYXBw\naW5nVG9vbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEu\nTWFwcGluZ1Rvb2wuRmxhZ3M7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLk9yYWNsZURpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuQXJndW1lbnRFeGNlcHRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVu\ndGl0eU1hbmFnZXJTUEk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UudGVzdC5TUUxMaXN0ZW5lclRlc3RDYXNlOwoKcHVibGljIGNs\nYXNzIFRlc3RFbWJlZGRhYmxlIGV4dGVuZHMgU1FMTGlzdGVuZXJUZXN0Q2Fz\nZSB7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBDYWxlbmRhciBjYWwgPSBu\nZXcgR3JlZ29yaWFuQ2FsZW5kYXIoKTsKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIEludGVnZXIgdGltZUhhc2ggPSBuZXcgSW50ZWdlcihjYWwuaGFzaENv\nZGUoKSk7CiAgICBwdWJsaWMgaW50IG51bUVtYmVkZGFibGVzID0gMTsKICAg\nIHB1YmxpYyBpbnQgbnVtQmFzaWNUeXBlcyA9IDE7CiAgICBwdWJsaWMgaW50\nIG51bVByb2dyYW1NYW5hZ2VycyA9IDI7CiAgICBwdWJsaWMgaW50IG51bU5p\nY2tOYW1lcyA9IDM7CiAgICBwdWJsaWMgaW50IG51bUVtcGxveWVlc1BlclBo\nb25lTnVtYmVyID0gMTsKICAgIHB1YmxpYyBpbnQgbnVtUGhvbmVOdW1iZXJz\nUGVyRW1wbG95ZWUgPSAyOwogICAgcHVibGljIGludCBudW1FbXBsb3llZXNQ\nZXJQcm9ncmFtTWFuYWdlciA9IDI7CiAgICBwdWJsaWMgaW50IG51bUVtcGxv\neWVlcyA9IG51bVByb2dyYW1NYW5hZ2VycwogICAgICAgICogbnVtRW1wbG95\nZWVzUGVyUHJvZ3JhbU1hbmFnZXI7CiAgICBwdWJsaWMgaW50IG51bVBob25l\nTnVtYmVycyA9IG51bUVtcGxveWVlcyAqIG51bVBob25lTnVtYmVyc1BlckVt\ncGxveWVlOwogICAgcHVibGljIGludCBudW1EZXBhcnRtZW50cyA9IDI7CiAg\nICBwdWJsaWMgaW50IG51bUVtcGxveWVlc1BlckRlcHQgPSAyOwogICAgcHVi\nbGljIGludCBudW1JdGVtcyA9IDI7CiAgICBwdWJsaWMgaW50IG51bUltYWdl\nc1Blckl0ZW0gPSAzOwogICAgcHVibGljIGludCBudW1Db21wYW55ID0gMjsK\nICAgIHB1YmxpYyBpbnQgbnVtRGl2aXNpb25zUGVyQ28gPSAyOwogICAgcHVi\nbGljIGludCBJRCA9IDE7CiAgICBwdWJsaWMgaW50IGl0ZW1JZCA9IDE7CiAg\nICBwdWJsaWMgaW50IGNvbXBJZCA9IDE7CiAgICBwdWJsaWMgaW50IGRpdklk\nID0gMTsKICAgIHB1YmxpYyBpbnQgdnBJZCA9IDE7CiAgICBwdWJsaWMgaW50\nIGRlcHRJZCA9IDE7CiAgICBwdWJsaWMgaW50IGVtcElkID0gMTsKICAgIHB1\nYmxpYyBpbnQgcGhvbmVJZCA9IDE7CiAgICBwdWJsaWMgaW50IHBtSWQgPSAx\nOwogICAgcHVibGljIGludCBwYXJraW5nU3BvdElkID0gMTsKICAgIHB1Ymxp\nYyBNYXA8SW50ZWdlciwgUGhvbmVOdW1iZXI+IHBob25lcyA9CiAgICAgICAg\nbmV3IEhhc2hNYXA8SW50ZWdlciwgUGhvbmVOdW1iZXI+KCk7CiAgICBwdWJs\naWMgTWFwPEludGVnZXIsIEVtcGxveWVlPiBlbXBsb3llZXMgPSBuZXcgSGFz\naE1hcDxJbnRlZ2VyLCBFbXBsb3llZT4oKTsKCiAgICBwdWJsaWMgdm9pZCBz\nZXRVcCgpIHsKICAgICAgICBzZXRVcChFbWJlZC5jbGFzcywgRW1iZWRfQ29s\nbF9FbWJlZC5jbGFzcywgRW1iZWRfQ29sbF9JbnRlZ2VyLmNsYXNzLCAKICAg\nICAgICAgICAgRW1iZWRfRW1iZWQuY2xhc3MsIEVtYmVkX0VtYmVkX1RvTWFu\neS5jbGFzcywgRW1iZWRfVG9NYW55LmNsYXNzLCAKICAgICAgICAgICAgRW1i\nZWRfVG9PbmUuY2xhc3MsIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZS5jbGFz\ncywgCiAgICAgICAgICAgIEVudGl0eUFfQ29sbF9TdHJpbmcuY2xhc3MsIEVu\ndGl0eUFfRW1iZWRfQ29sbF9FbWJlZC5jbGFzcywgCiAgICAgICAgICAgIEVu\ndGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyLmNsYXNzLCBFbnRpdHlBX0VtYmVk\nX0VtYmVkLmNsYXNzLCAKICAgICAgICAgICAgRW50aXR5QV9FbWJlZF9FbWJl\nZF9Ub01hbnkuY2xhc3MsIEVudGl0eUFfRW1iZWRfVG9NYW55LmNsYXNzLCAK\nICAgICAgICAgICAgRW50aXR5QV9FbWJlZF9Ub09uZS5jbGFzcywgRW50aXR5\nQjEuY2xhc3MsIAogICAgICAgICAgICBFbnRpdHlBX0NvbGxfRW1iZWRfRW1i\nZWQuY2xhc3MsIENvbnRhY3RJbmZvLmNsYXNzLAogICAgICAgICAgICBFbXBs\nb3llZS5jbGFzcywgSm9iSW5mby5jbGFzcywgTG9jYXRpb25EZXRhaWxzLmNs\nYXNzLAogICAgICAgICAgICBQYXJraW5nU3BvdC5jbGFzcywgUGhvbmVOdW1i\nZXIuY2xhc3MsIFByb2dyYW1NYW5hZ2VyLmNsYXNzLAogICAgICAgICAgICBE\nZXBhcnRtZW50MS5jbGFzcywgRW1wbG95ZWUxLmNsYXNzLCBEZXBhcnRtZW50\nMi5jbGFzcywKICAgICAgICAgICAgRW1wbG95ZWUyLmNsYXNzLCBFbXBsb3ll\nZVBLMi5jbGFzcywgRGVwYXJ0bWVudDMuY2xhc3MsCiAgICAgICAgICAgIEVt\ncGxveWVlMy5jbGFzcywgRW1wbG95ZWVOYW1lMy5jbGFzcywgSXRlbTEuY2xh\nc3MsIEl0ZW0yLmNsYXNzLAogICAgICAgICAgICBJdGVtMy5jbGFzcywgSXRl\nbTQuY2xhc3MsIEl0ZW01LmNsYXNzLCBGaWxlTmFtZTQuY2xhc3MsIAogICAg\nICAgICAgICBDb21wYW55MS5jbGFzcywgQ29tcGFueTIuY2xhc3MsIERpdmlz\naW9uLmNsYXNzLCAgIAogICAgICAgICAgICBWaWNlUHJlc2lkZW50LmNsYXNz\nLCBFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lLmNsYXNzLAogICAgICAgICAg\nICBFbWJlZF9NYXBwZWRUb09uZS5jbGFzcywgRW1iZWRfTWFwcGVkVG9PbmVD\nYXNjYWRlRGVsZXRlLmNsYXNzLCAKICAgICAgICAgICAgRW50aXR5QV9FbWJl\nZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUuY2xhc3MsIEVudGl0eUIyLmNs\nYXNzLCAKICAgICAgICAgICAgQm9vay5jbGFzcywgTGlzdGluZy5jbGFzcywg\nU2VsbGVyLmNsYXNzLAogICAgICAgICAgICBFbnRpdHlBX0VtYmVkX0NvbGxf\nTWFwLmNsYXNzLCBFbWJlZF9Db2xsX01hcC5jbGFzcywKICAgICAgICAgICAg\nRW50aXR5QV9FbWJlZF9Db21wbGV4LmNsYXNzLCBBLmNsYXNzLCBDTEVBUl9U\nQUJMRVMpOwogICAgICAgICAgICBzcWwuY2xlYXIoKTsKICAgICAgICAgICAg\nREJEaWN0aW9uYXJ5IGRpY3QgPSAoKEpEQkNDb25maWd1cmF0aW9uKWVtZi5n\nZXRDb25maWd1cmF0aW9uKCkpLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7\nCiAgICAgICAgICAgIGlmIChkaWN0LmdldENsYXNzKCkuZ2V0TmFtZSgpLmlu\nZGV4T2YoIm9yYWNsZSIpICE9IC0xKSB7CiAgICAgICAgICAgICAgICAoKE9y\nYWNsZURpY3Rpb25hcnkpZGljdCkudXNlVHJpZ2dlcnNGb3JBdXRvQXNzaWdu\nID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RHcm91cEJ5RW1iZWQoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgU3RyaW5n\nIHF1ZXJ5W10gPSB7CiAgICAgICAgICAgICAgICAic2VsZWN0IEtFWShlKSBm\ncm9tIERlcGFydG1lbnQzIGQgam9pbiBkLmVtcHMgZSBncm91cCBieSBLRVko\nZSkiLAogICAgICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gRW50\naXR5QV9FbWJlZF9FbWJlZCBhIGdyb3VwIGJ5IGEuZW1iZWQiLAogICAgICAg\nICAgICAgICAgInNlbGVjdCBlIGZyb20gRW50aXR5QV9FbWJlZF9FbWJlZCBh\nIGpvaW4gYS5lbWJlZCBlIGdyb3VwIGJ5IGUiLAogICAgICAgIH07CiAgICAg\nICAgTGlzdCBycyA9IG51bGw7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBxdWVyeS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSkuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgICAgICB9IGNhdGNoKEFyZ3VtZW50RXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRs\nbihlLmdldE1lc3NhZ2UoKSk7IC8vIGFzIGV4cGVjdGVkIDogR3JvdXAgYnkg\nZW1iZWRkYWJsZSBmaWVsZCBpcyBub3QgYWxsb3dlZAogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEtleUVtYmVkZGFibGVDb21wYXJlKCkgewogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIFN0cmluZyBxdWVyeVtdID0gewogICAgICAgICAgICAgICAg\nInNlbGVjdCBvIGZyb20gQ29tcGFueTEgYyBqb2luIGMub3JnYW5pemF0aW9u\nIG8gd2hlcmUgS0VZKG8pID0gPzEiLAogICAgICAgICAgICAgICAgInNlbGVj\ndCBkIGZyb20gRGVwYXJ0bWVudDMgZCBqb2luIGQuZW1wcyBlIHdoZXJlIEtF\nWShlKSA9ID8gMSIKICAgICAgICB9OwogICAgICAgIExpc3QgcnMgPSBudWxs\nOwogICAgICAgIERpdmlzaW9uIGQgPSBuZXcgRGl2aXNpb24oKTsKICAgICAg\nICBkLnNldElkKDEwKTsKICAgICAgICBkLnNldE5hbWUoImRpdmlzaW9uIDEw\nIik7CiAgICAgICAgRW1wbG95ZWVOYW1lMyBuYW1lID0gbmV3IEVtcGxveWVl\nTmFtZTMoImZuYW1lMSIsICJsbmFtZTEiKTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHN3\naXRjaCAoaSkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAg\nICAvLyBEaXZpc2lvbiBpcyBhbiBlbWJlZGRhYmxlIGFzIHdlbGwgYXMgYW4g\nZW50aXR5LCBjb21wYXJpc29uIGlzIGFsbG93ZWQKICAgICAgICAgICAgICAg\nIHJzID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0pLnNldFBhcmFtZXRlcigx\nLCBkKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ld\nKS5zZXRQYXJhbWV0ZXIoMSwgbmFtZSkuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgICAgICAgICAgfSBjYXRjaChBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgICAgICAgICAgLy8gYXMgZXhwZWN0ZWQgOiBjb21wYXJlIGVt\nYmVkZGFibGUgaXMgbm90IGFsbG93ZWQKICAgICAgICAgICAgICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oZS5nZXRNZXNzYWdlKCkpOyAKICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7ICAgICAgICAKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW50aXR5QV9FbWJlZF9Db2xsX01hcCgp\nIHsKICAgICAgICBxdWVyeUVudGl0eUFfRW1iZWRfQ29sbF9NYXAoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeUVudGl0eUFfRW1iZWRfQ29sbF9N\nYXAoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgU3RyaW5nIHF1ZXJ5W10gPSB7CiAg\nICAgICAgICAgICAgICAic2VsZWN0IGUgZnJvbSBFbnRpdHlBX0VtYmVkX0Nv\nbGxfTWFwIGEgam9pbiBhLmVtYmVkIGUgIiArCiAgICAgICAgICAgICAgICAi\nam9pbiBlLm1hcEtleUludGVnZXIgaSB3aGVyZSB2YWx1ZShpKSA+IDAgIiwK\nICAgICAgICAgICAgfTsKICAgICAgICBMaXN0IHJzID0gbnVsbDsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAg\nICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0pLmdldFJl\nc3VsdExpc3QoKTsKICAgICAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICB9\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RW50aXR5QV9Db2xsX1N0cmluZygpIHsKICAgICAgICBjcmVhdGVFbnRp\ndHlBX0NvbGxfU3RyaW5nKCk7CiAgICAgICAgcXVlcnlFbnRpdHlBX0NvbGxf\nU3RyaW5nKCk7CiAgICAgICAgZmluZEVudGl0eUFfQ29sbF9TdHJpbmcoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW50aXR5QV9FbWJlZF9Ub09u\nZSgpIHsKICAgICAgICBjcmVhdGVFbnRpdHlBX0VtYmVkX1RvT25lKCk7CiAg\nICAgICAgcXVlcnlFbnRpdHlBX0VtYmVkX1RvT25lKCk7CiAgICAgICAgZmlu\nZEVudGl0eUFfRW1iZWRfVG9PbmUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZSgpIHsKICAgICAgICBj\ncmVhdGVFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lKCk7CiAgICAgICAgcXVl\ncnlFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lKCk7CiAgICAgICAgZmluZEVu\ndGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKCkgewogICAgICAg\nIGNyZWF0ZUVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSgpOwogICAgICAgIHF1\nZXJ5RW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKCk7CiAgICAgICAgZmluZEVu\ndGl0eUFfQ29sbF9FbWJlZF9Ub09uZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RFbnRpdHlBX0VtYmVkX1RvTWFueSgpIHsKICAgICAgICBjcmVh\ndGVFbnRpdHlBX0VtYmVkX1RvTWFueSgpOwogICAgICAgIHF1ZXJ5RW50aXR5\nQV9FbWJlZF9Ub01hbnkoKTsKICAgICAgICBmaW5kRW50aXR5QV9FbWJlZF9U\nb01hbnkoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW50aXR5QV9F\nbWJlZF9FbWJlZF9Ub01hbnkoKSB7CiAgICAgICAgY3JlYXRlRW50aXR5QV9F\nbWJlZF9FbWJlZF9Ub01hbnkoKTsKICAgICAgICBxdWVyeUVudGl0eUFfRW1i\nZWRfRW1iZWRfVG9NYW55KCk7CiAgICAgICAgZmluZEVudGl0eUFfRW1iZWRf\nRW1iZWRfVG9NYW55KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVu\ndGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKCkgewogICAgICAgIGNyZWF0ZUVu\ndGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKCk7CiAgICAgICAgcXVlcnlFbnRp\ndHlBX0VtYmVkX0NvbGxfSW50ZWdlcigpOwogICAgICAgIGZpbmRFbnRpdHlB\nX0VtYmVkX0NvbGxfSW50ZWdlcigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFbnRpdHlBX0VtYmVkX0VtYmVkKCkgewogICAgICAgIGNyZWF0ZUVu\ndGl0eUFfRW1iZWRfRW1iZWQoKTsKICAgICAgICBxdWVyeUVudGl0eUFfRW1i\nZWRfRW1iZWQoKTsKICAgICAgICBmaW5kRW50aXR5QV9FbWJlZF9FbWJlZCgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbnRpdHlBX0NvbGxfRW1i\nZWRfRW1iZWQoKSB7CiAgICAgICAgY3JlYXRlRW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkKCk7CiAgICAgICAgcXVlcnlFbnRpdHlBX0NvbGxfRW1iZWRfRW1i\nZWQoKTsKICAgICAgICBmaW5kRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVudGl0eUFfRW1iZWRfQ29s\nbF9FbWJlZCgpIHsKICAgICAgICBjcmVhdGVFbnRpdHlBX0VtYmVkX0NvbGxf\nRW1iZWQoKTsKICAgICAgICBxdWVyeUVudGl0eUFfRW1iZWRfQ29sbF9FbWJl\nZCgpOwogICAgICAgIGZpbmRFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQoKTsK\nICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEVtcGxveWVlKCkgewog\nICAgICAgIGNyZWF0ZUVtcGxveWVlT2JqKCk7CiAgICAgICAgcXVlcnlFbXBs\nb3llZU9iaigpOwogICAgICAgIGZpbmRFbXBsb3llZU9iaigpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RNYXBLZXkoKSB7CiAgICAgICAgY3JlYXRl\nT2JqTWFwS2V5KCk7CiAgICAgICAgcXVlcnlPYmpNYXBLZXkoKTsKICAgICAg\nICBmaW5kT2JqTWFwS2V5KCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RNYXBLZXlDbGFzcygpIHsKICAgICAgICBjcmVhdGVPYmpNYXBLZXlD\nbGFzcygpOwogICAgICAgIHF1ZXJ5T2JqTWFwS2V5Q2xhc3MoKTsKICAgICAg\nICBmaW5kT2JqTWFwS2V5Q2xhc3MoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0TWFwS2V5RW51bWVyYXRlZCgpIHsKICAgICAgICBjcmVhdGVPYmpN\nYXBLZXlFbnVtZXJhdGVkKCk7CiAgICAgICAgZmluZE9iak1hcEtleUVudW1l\ncmF0ZWQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWFwS2V5VGVt\ncG9yYWwoKSB7CiAgICAgICAgY3JlYXRlT2JqTWFwS2V5VGVtcG9yYWwoKTsK\nICAgICAgICBmaW5kT2JqTWFwS2V5VGVtcG9yYWwoKTsKICAgICAgICBxdWVy\neU9iak1hcEtleVRlbXBvcmFsKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlKCkg\newogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNj\nYWRlRGVsZXRlKCk7CiAgICAgICAgdXBkYXRlRW50aXR5QV9FbWJlZF9NYXBw\nZWRUb09uZUNhc2NhZGVEZWxldGUoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdEVtYmVkZGFibGVDb250YWluaW5nUmVsYXRpb25XaXRoR2Vu\nZXJhdGVkS2V5KCkgCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBTUUxF\neGNlcHRpb24gewogICAgICAgIGNyZWF0ZUVtYmVkZGFibGVDb250YWluaW5n\nUmVsYXRpb25XaXRoR2VuZXJhdGVkS2V5KCk7CiAgICB9CgogICAgLyoKICAg\nICAqIENyZWF0ZSBFbnRpdHlBX0NvbGxfU3RyaW5nCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfQ29sbF9TdHJpbmcoKSB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRy\nYW5zYWN0aW9uKCk7CiAgICAgICAgY3JlYXRlRW50aXR5QV9Db2xsX1N0cmlu\nZyhlbSwgSUQpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5m\nbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0Nv\nbGxfU3RyaW5nKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAg\nIEVudGl0eUFfQ29sbF9TdHJpbmcgYSA9IG5ldyBFbnRpdHlBX0NvbGxfU3Ry\naW5nKCk7CiAgICAgICAgYS5zZXRJZChpZCk7CiAgICAgICAgYS5zZXROYW1l\nKCJhIiArIGlkKTsKICAgICAgICBhLnNldEFnZShpZCk7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBudW1CYXNpY1R5cGVzOyBpKyspCiAgICAgICAg\nICAgIGEuYWRkTmlja05hbWUoIm5pY2tOYW1lXyIgKyBpZCArIGkpOwogICAg\nICAgIGEuYWRkQ3JlZGl0UmF0aW5nKEVudGl0eUFfQ29sbF9TdHJpbmcuQ3Jl\nZGl0UmF0aW5nLlBPT1IpOwogICAgICAgIGEuYWRkVGltZXN0YW1wKG5ldyBU\naW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpKTsKICAgICAg\nICBhLmFkZExvYigibG9iIik7CiAgICAgICAgZW0ucGVyc2lzdChhKTsKICAg\nIH0KCiAgICAvKgogICAgICogQ3JlYXRlIEVudGl0eUFfRW1iZWRfVG9PbmUK\nICAgICAqLwogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9U\nb09uZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0\ncmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBjcmVhdGVFbnRp\ndHlBX0VtYmVkX1RvT25lKGVtLCBJRCk7CiAgICAgICAgdHJhbi5iZWdpbigp\nOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsK\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNy\nZWF0ZUVudGl0eUFfRW1iZWRfVG9PbmUoRW50aXR5TWFuYWdlciBlbSwgaW50\nIGlkKSB7CiAgICAgICAgRW50aXR5QV9FbWJlZF9Ub09uZSBhID0gbmV3IEVu\ndGl0eUFfRW1iZWRfVG9PbmUoKTsKICAgICAgICBhLnNldElkKGlkKTsKICAg\nICAgICBhLnNldE5hbWUoImEiICsgaWQpOwogICAgICAgIGEuc2V0QWdlKGlk\nKTsKICAgICAgICBFbWJlZF9Ub09uZSBlbWJlZCA9IGNyZWF0ZUVtYmVkX1Rv\nT25lKGVtLCBpZCk7CiAgICAgICAgYS5zZXRFbWJlZChlbWJlZCk7CiAgICAg\nICAgZW0ucGVyc2lzdChhKTsKICAgIH0KCiAgICBwdWJsaWMgRW1iZWRfVG9P\nbmUgY3JlYXRlRW1iZWRfVG9PbmUoRW50aXR5TWFuYWdlciBlbSwgaW50IGlk\nKSB7CiAgICAgICAgRW1iZWRfVG9PbmUgZW1iZWQgPSBuZXcgRW1iZWRfVG9P\nbmUoKTsKICAgICAgICBlbWJlZC5zZXROYW1lMSgibmFtZTEiKTsKICAgICAg\nICBlbWJlZC5zZXROYW1lMigibmFtZTIiKTsKICAgICAgICBlbWJlZC5zZXRO\nYW1lMygibmFtZTMiKTsKICAgICAgICBFbnRpdHlCMSBiID0gbmV3IEVudGl0\neUIxKCk7CiAgICAgICAgYi5zZXRJZChpZCk7CiAgICAgICAgYi5zZXROYW1l\nKCJiIiArIGlkKTsKICAgICAgICBlbWJlZC5zZXRFbnRpdHlCKGIpOwogICAg\nICAgIGVtLnBlcnNpc3QoYik7CiAgICAgICAgcmV0dXJuIGVtYmVkOwogICAg\nfQoKICAgIC8qCiAgICAgKiBDcmVhdGUgRW50aXR5QV9FbWJlZF9NYXBwZWRU\nb09uZQogICAgICovCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0Vt\nYmVkX01hcHBlZFRvT25lKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRy\nYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAg\nIGNyZWF0ZUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUoZW0sIElEKTsKICAg\nICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAg\nICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9NYXBwZWRUb09u\nZShFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBFbnRpdHlB\nX0VtYmVkX01hcHBlZFRvT25lIGEgPSBuZXcgRW50aXR5QV9FbWJlZF9NYXBw\nZWRUb09uZSgpOwogICAgICAgIGEuc2V0SWQoaWQpOwogICAgICAgIGEuc2V0\nTmFtZSgiYSIgKyBpZCk7CiAgICAgICAgYS5zZXRBZ2UoaWQpOwogICAgICAg\nIEVtYmVkX01hcHBlZFRvT25lIGVtYmVkID0gY3JlYXRlRW1iZWRfTWFwcGVk\nVG9PbmUoZW0sIGlkLCBhKTsKICAgICAgICBhLnNldEVtYmVkKGVtYmVkKTsK\nICAgICAgICBlbS5wZXJzaXN0KGEpOwogICAgfQoKICAgIHB1YmxpYyBFbWJl\nZF9NYXBwZWRUb09uZSBjcmVhdGVFbWJlZF9NYXBwZWRUb09uZShFbnRpdHlN\nYW5hZ2VyIGVtLCBpbnQgaWQsIAogICAgICAgIEVudGl0eUFfRW1iZWRfTWFw\ncGVkVG9PbmUgYSkgewogICAgICAgIEVtYmVkX01hcHBlZFRvT25lIGVtYmVk\nID0gbmV3IEVtYmVkX01hcHBlZFRvT25lKCk7CiAgICAgICAgZW1iZWQuc2V0\nTmFtZTEoIm5hbWUxIik7CiAgICAgICAgZW1iZWQuc2V0TmFtZTIoIm5hbWUy\nIik7CiAgICAgICAgZW1iZWQuc2V0TmFtZTMoIm5hbWUzIik7CiAgICAgICAg\nRW50aXR5QjEgYiA9IG5ldyBFbnRpdHlCMSgpOwogICAgICAgIGIuc2V0SWQo\naWQpOwogICAgICAgIGIuc2V0TmFtZSgiYm0iICsgaWQpOwogICAgICAgIGIu\nc2V0RW50aXR5QShhKTsKICAgICAgICBlbWJlZC5zZXRNYXBwZWRFbnRpdHlC\nKGIpOwogICAgICAgIGVtLnBlcnNpc3QoYik7CiAgICAgICAgcmV0dXJuIGVt\nYmVkOwogICAgfQoKICAgIC8qCiAgICAgKiBDcmVhdGUgRW50aXR5QV9FbWJl\nZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVE\nZWxldGUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24g\ndHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgY3JlYXRlRW50\naXR5QV9FbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUoZW0sIElEKTsK\nICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAg\nICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9NYXBwZWRU\nb09uZUNhc2NhZGVEZWxldGUoRW50aXR5TWFuYWdlciBlbSwgCiAgICAgICAg\naW50IGlkKSB7CiAgICAgICAgRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZUNh\nc2NhZGVEZWxldGUgYSA9IAogICAgICAgICAgICBuZXcgRW50aXR5QV9FbWJl\nZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUoKTsKICAgICAgICBhLnNldElk\nKGlkKTsKICAgICAgICBhLnNldE5hbWUoImEiICsgaWQpOwogICAgICAgIGEu\nc2V0QWdlKGlkKTsKICAgICAgICBFbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVE\nZWxldGUgZW1iZWQgPSAKICAgICAgICAgICAgY3JlYXRlRW1iZWRfTWFwcGVk\nVG9PbmVEZWxldGVDYXNjYWRlKGVtLCBpZCwgYSk7CiAgICAgICAgYS5zZXRF\nbWJlZChlbWJlZCk7CiAgICAgICAgZW0ucGVyc2lzdChhKTsKICAgIH0KCiAg\nICBwdWJsaWMgRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlIGNyZWF0\nZUVtYmVkX01hcHBlZFRvT25lRGVsZXRlQ2FzY2FkZSgKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtLCBpbnQgaWQsIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9P\nbmVDYXNjYWRlRGVsZXRlIGEpIHsKICAgICAgICBFbWJlZF9NYXBwZWRUb09u\nZUNhc2NhZGVEZWxldGUgZW1iZWQgPQogICAgICAgICAgICBuZXcgRW1iZWRf\nTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlKCk7CiAgICAgICAgZW1iZWQuc2V0\nTmFtZTEoIm5hbWUxIik7CiAgICAgICAgZW1iZWQuc2V0TmFtZTIoIm5hbWUy\nIik7CiAgICAgICAgZW1iZWQuc2V0TmFtZTMoIm5hbWUzIik7CiAgICAgICAg\nRW50aXR5QjIgYiA9IG5ldyBFbnRpdHlCMigpOwogICAgICAgIGIuc2V0SWQo\naWQpOwogICAgICAgIGIuc2V0TmFtZSgiYm0iICsgaWQpOwogICAgICAgIGIu\nc2V0RW50aXR5QShhKTsKICAgICAgICBlbWJlZC5zZXRNYXBwZWRFbnRpdHlC\nKGIpOwogICAgICAgIGVtLnBlcnNpc3QoYik7CiAgICAgICAgcmV0dXJuIGVt\nYmVkOwogICAgfQogICAgCiAgICAvKgogICAgICogVXBkYXRlIEVudGl0eUFf\nRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHVwZGF0ZUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNj\nYWRlRGVsZXRlKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0\naW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHVwZGF0\nZUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlKGVtLCBJ\nRCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7\nCiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbGVhcigpOwog\nICAgICAgIAogICAgICAgIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNj\nYWRlRGVsZXRlIGEgPSAKICAgICAgICAgICAgZW0uZmluZChFbnRpdHlBX0Vt\nYmVkX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZS5jbGFzcywgSUQpOwogICAg\nICAgIGFzc2VydE5vdE51bGwoYSk7CiAgICAgICAgCiAgICAgICAgRW50aXR5\nQjIgYjIgPSBlbS5maW5kKEVudGl0eUIyLmNsYXNzLCBJRCk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChiMik7CiAgICAgICAgCiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB1cGRhdGVFbnRpdHlBX0VtYmVk\nX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZShFbnRpdHlNYW5hZ2VyIGVtLCAK\nICAgICAgICBpbnQgaWQpIHsKICAgICAgICBFbnRpdHlBX0VtYmVkX01hcHBl\nZFRvT25lQ2FzY2FkZURlbGV0ZSBhID0gCiAgICAgICAgICAgIGVtLmZpbmQo\nRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUuY2xhc3Ms\nIGlkKTsKICAgICAgICBhLnNldE5hbWUoIm5ld2EiICsgaWQpOwogICAgICAg\nIGEuc2V0QWdlKGlkICsgMSk7CiAgICAgICAgRW1iZWRfTWFwcGVkVG9PbmVD\nYXNjYWRlRGVsZXRlIGVtYmVkID0gCiAgICAgICAgICAgIGNyZWF0ZUVtYmVk\nX01hcHBlZFRvT25lRGVsZXRlQ2FzY2FkZShlbSwgaWQrMSwgYSk7CiAgICAg\nICAgYS5zZXRFbWJlZChlbWJlZCk7CiAgICB9CiAgICAKICAgIC8qCiAgICAg\nKiBDcmVhdGUgRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSgp\nIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0g\nZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBjcmVhdGVFbnRpdHlBX0Nv\nbGxfRW1iZWRfVG9PbmUoZW0sIElEKTsKICAgICAgICB0cmFuLmJlZ2luKCk7\nCiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3Jl\nYXRlRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKEVudGl0eU1hbmFnZXIgZW0s\nIGludCBpZCkgewogICAgICAgIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBh\nID0gbmV3IEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSgpOwogICAgICAgIGEu\nc2V0SWQoaWQpOwogICAgICAgIGEuc2V0TmFtZSgiYSIgKyBpZCk7CiAgICAg\nICAgYS5zZXRBZ2UoaWQpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nbnVtRW1iZWRkYWJsZXM7IGkrKykgewogICAgICAgICAgICBFbWJlZF9Ub09u\nZSBlbWJlZCA9IGNyZWF0ZUVtYmVkX1RvT25lKGVtLCBpK2lkKTsKICAgICAg\nICAgICAgYS5hZGRFbWJlZDFUb09uZShlbWJlZCk7CiAgICAgICAgfQogICAg\nICAgIGVtLnBlcnNpc3QoYSk7CiAgICB9CgogICAgLyoKICAgICAqIENyZWF0\nZSBFbnRpdHlBX0VtYmVkX1RvTWFueQogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBjcmVhdGVFbnRpdHlBX0VtYmVkX1RvTWFueSgpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rp\nb24oKTsKICAgICAgICBjcmVhdGVFbnRpdHlBX0VtYmVkX1RvTWFueShlbSwg\nSUQpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgp\nOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX1Rv\nTWFueShFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBFbnRp\ndHlBX0VtYmVkX1RvTWFueSBhID0gbmV3IEVudGl0eUFfRW1iZWRfVG9NYW55\nKCk7CiAgICAgICAgYS5zZXRJZChpZCk7CiAgICAgICAgYS5zZXROYW1lKCJh\nIiArIGlkKTsKICAgICAgICBhLnNldEFnZShpZCk7CiAgICAgICAgRW1iZWRf\nVG9NYW55IGVtYmVkID0gY3JlYXRlRW1iZWRfVG9NYW55KGVtLCBpZCk7CiAg\nICAgICAgYS5zZXRFbWJlZChlbWJlZCk7CiAgICAgICAgZW0ucGVyc2lzdChh\nKTsKICAgIH0KCiAgICBwdWJsaWMgRW1iZWRfVG9NYW55IGNyZWF0ZUVtYmVk\nX1RvTWFueShFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBF\nbWJlZF9Ub01hbnkgZW1iZWQgPSBuZXcgRW1iZWRfVG9NYW55KCk7CiAgICAg\nICAgZW1iZWQuc2V0TmFtZTEoIm5hbWUxIik7CiAgICAgICAgZW1iZWQuc2V0\nTmFtZTIoIm5hbWUyIik7CiAgICAgICAgZW1iZWQuc2V0TmFtZTMoIm5hbWUz\nIik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbWJlZGRhYmxl\nczsgaSsrKSB7CiAgICAgICAgICAgIEVudGl0eUIxIGIgPSBuZXcgRW50aXR5\nQjEoKTsKICAgICAgICAgICAgYi5zZXRJZChpZCArIGkpOwogICAgICAgICAg\nICBiLnNldE5hbWUoImIiICsgaWQgKyBpKTsKICAgICAgICAgICAgZW1iZWQu\nYWRkRW50aXR5QihiKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChiKTsKICAg\nICAgICB9CiAgICAgICAgcmV0dXJuIGVtYmVkOwogICAgfQoKICAgLyoKICAg\nICAqIENyZWF0ZSBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueQogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX0VtYmVkX1Rv\nTWFueSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0\ncmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBjcmVhdGVFbnRp\ndHlBX0VtYmVkX0VtYmVkX1RvTWFueShlbSwgSUQpOwogICAgICAgIHRyYW4u\nYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29t\nbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueShFbnRpdHlN\nYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBFbnRpdHlBX0VtYmVkX0Vt\nYmVkX1RvTWFueSBhID0gbmV3IEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55\nKCk7CiAgICAgICAgYS5zZXRJZChpZCk7CiAgICAgICAgYS5zZXROYW1lKCJh\nIiArIGlkKTsKICAgICAgICBhLnNldEFnZShpZCk7CiAgICAgICAgRW1iZWRf\nRW1iZWRfVG9NYW55IGVtYmVkID0gY3JlYXRlRW1iZWRfRW1iZWRfVG9NYW55\nKGVtLCBpZCk7CiAgICAgICAgYS5zZXRFbWJlZChlbWJlZCk7CiAgICAgICAg\nZW0ucGVyc2lzdChhKTsKICAgIH0KCiAgICBwdWJsaWMgRW1iZWRfRW1iZWRf\nVG9NYW55IGNyZWF0ZUVtYmVkX0VtYmVkX1RvTWFueShFbnRpdHlNYW5hZ2Vy\nIGVtLAogICAgICAgICAgICBpbnQgaWQpIHsKICAgICAgICBFbWJlZF9FbWJl\nZF9Ub01hbnkgZW1iZWQgPSBuZXcgRW1iZWRfRW1iZWRfVG9NYW55KCk7CiAg\nICAgICAgZW1iZWQuc2V0SW50VmFsMSgxKTsKICAgICAgICBlbWJlZC5zZXRJ\nbnRWYWwyKDIpOwogICAgICAgIGVtYmVkLnNldEludFZhbDMoMyk7CiAgICAg\nICAgRW1iZWRfVG9NYW55IGVtYmVkX1RvTWFueSA9IGNyZWF0ZUVtYmVkX1Rv\nTWFueShlbSwgaWQpOwogICAgICAgIGVtYmVkLnNldEVtYmVkKGVtYmVkX1Rv\nTWFueSk7CiAgICAgICAgcmV0dXJuIGVtYmVkOwogICAgfQogICAgCiAgICAv\nKgogICAgICogQ3JlYXRlIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfQ29s\nbF9JbnRlZ2VyKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0\naW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGNyZWF0\nZUVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKGVtLCBJRCk7CiAgICAgICAg\ndHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJh\nbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKEVu\ndGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIEVudGl0eUFfRW1i\nZWRfQ29sbF9JbnRlZ2VyIGEgPSBuZXcgRW50aXR5QV9FbWJlZF9Db2xsX0lu\ndGVnZXIoKTsKICAgICAgICBhLnNldElkKGlkKTsKICAgICAgICBhLnNldE5h\nbWUoImEiICsgaWQpOwogICAgICAgIGEuc2V0QWdlKGlkKTsKICAgICAgICBF\nbWJlZF9Db2xsX0ludGVnZXIgZW1iZWQgPSBjcmVhdGVFbWJlZF9Db2xsX0lu\ndGVnZXIoZW0sIGlkKTsKICAgICAgICBhLnNldEVtYmVkKGVtYmVkKTsKICAg\nICAgICBlbS5wZXJzaXN0KGEpOwogICAgfQoKICAgIHB1YmxpYyBFbWJlZF9D\nb2xsX0ludGVnZXIgY3JlYXRlRW1iZWRfQ29sbF9JbnRlZ2VyKEVudGl0eU1h\nbmFnZXIgZW0sCiAgICAgICAgICAgIGludCBpZCkgewogICAgICAgIEVtYmVk\nX0NvbGxfSW50ZWdlciBlbWJlZCA9IG5ldyBFbWJlZF9Db2xsX0ludGVnZXIo\nKTsKICAgICAgICBlbWJlZC5zZXRJbnRWYWwxKGlkKjEwICsgMSk7CiAgICAg\nICAgZW1iZWQuc2V0SW50VmFsMihpZCoxMCArIDIpOwogICAgICAgIGVtYmVk\nLnNldEludFZhbDMoaWQqMTAgKyAzKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IG51bUJhc2ljVHlwZXM7IGkrKykgewogICAgICAgICAgICBlbWJl\nZC5hZGRPdGhlckludFZhbChpZCAqIDEwMCArIGkpOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gZW1iZWQ7CiAgICB9CgogICAgLyoKICAgICAqIENyZWF0\nZSBFbnRpdHlBX0VtYmVkX0VtYmVkCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIGNyZWF0ZUVudGl0eUFfRW1iZWRfRW1iZWQoKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9u\nKCk7CiAgICAgICAgY3JlYXRlRW50aXR5QV9FbWJlZF9FbWJlZChlbSwgSUQp\nOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwog\nICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX0VtYmVk\nKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIEVudGl0eUFf\nRW1iZWRfRW1iZWQgYSA9IG5ldyBFbnRpdHlBX0VtYmVkX0VtYmVkKCk7CiAg\nICAgICAgYS5zZXRJZChpZCk7CiAgICAgICAgYS5zZXROYW1lKCJhIiArIGlk\nKTsKICAgICAgICBhLnNldEFnZShpZCk7CiAgICAgICAgRW1iZWRfRW1iZWQg\nZW1iZWQgPSBjcmVhdGVFbWJlZF9FbWJlZChlbSwgaWQsIDApOwogICAgICAg\nIGEuc2V0RW1iZWQoZW1iZWQpOwogICAgICAgIGVtLnBlcnNpc3QoYSk7CiAg\nICB9CgogICAgcHVibGljIEVtYmVkX0VtYmVkIGNyZWF0ZUVtYmVkX0VtYmVk\nKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCwgaW50IGlkeCkgewogICAgICAg\nIEVtYmVkX0VtYmVkIGVtYmVkID0gbmV3IEVtYmVkX0VtYmVkKCk7CiAgICAg\nICAgZW1iZWQuc2V0SW50VmFsMShpZCAqIDEwMCArIGlkeCAqIDEwICsgMSk7\nCiAgICAgICAgZW1iZWQuc2V0SW50VmFsMihpZCAqIDEwMCArIGlkeCAqIDEw\nICsgMik7CiAgICAgICAgZW1iZWQuc2V0SW50VmFsMyhpZCAqIDEwMCArIGlk\neCAqIDEwICsgMyk7CiAgICAgICAgRW1iZWQgZW1iZWQxID0gY3JlYXRlRW1i\nZWQoaWQsIGlkeCk7CiAgICAgICAgZW1iZWQuc2V0RW1iZWQoZW1iZWQxKTsK\nICAgICAgICByZXR1cm4gZW1iZWQ7CiAgICB9CgogICAgcHVibGljIEVtYmVk\nIGNyZWF0ZUVtYmVkKGludCBpZCwgaW50IGlkeCkgewogICAgICAgIEVtYmVk\nIGVtYmVkID0gbmV3IEVtYmVkKCk7CiAgICAgICAgZW1iZWQuc2V0SW50VmFs\nMShpZCAqIDEwMCArIGlkeCAqIDEwICsgNCk7CiAgICAgICAgZW1iZWQuc2V0\nSW50VmFsMihpZCAqIDEwMCArIGlkeCAqIDEwICsgNSk7CiAgICAgICAgZW1i\nZWQuc2V0SW50VmFsMyhpZCAqIDEwMCArIGlkeCAqIDEwICsgNik7CiAgICAg\nICAgcmV0dXJuIGVtYmVkOwogICAgfQoKICAgIC8qCiAgICAgKiBDcmVhdGUg\nRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIGNyZWF0ZUVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCgpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJh\nbnNhY3Rpb24oKTsKICAgICAgICBjcmVhdGVFbnRpdHlBX0NvbGxfRW1iZWRf\nRW1iZWQoZW0sIElEKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAg\nZW0uZmx1c2goKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5\nQV9Db2xsX0VtYmVkX0VtYmVkKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkg\newogICAgICAgIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhID0gbmV3IEVu\ndGl0eUFfQ29sbF9FbWJlZF9FbWJlZCgpOwogICAgICAgIGEuc2V0SWQoaWQp\nOwogICAgICAgIGEuc2V0TmFtZSgiYSIgKyBpZCk7CiAgICAgICAgYS5zZXRB\nZ2UoaWQpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRW1iZWRk\nYWJsZXM7IGkrKykgewogICAgICAgICAgICBFbWJlZF9FbWJlZCBlbWJlZCA9\nIGNyZWF0ZUVtYmVkX0VtYmVkKGVtLCBpZCwgaSk7CiAgICAgICAgICAgIGEu\nYWRkRW1iZWQoZW1iZWQpOwogICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0\nKGEpOwogICAgfQoKICAgIC8qCiAgICAgKiBDcmVhdGUgRW50aXR5QV9FbWJl\nZF9Db2xsX0VtYmVkCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVu\ndGl0eUFfRW1iZWRfQ29sbF9FbWJlZCgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBF\nbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsK\nICAgICAgICBjcmVhdGVFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQoZW0sIElE\nKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsK\nICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9Db2xs\nX0VtYmVkKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIEVu\ndGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBhID0gbmV3IEVudGl0eUFfRW1iZWRf\nQ29sbF9FbWJlZCgpOwogICAgICAgIGEuc2V0SWQoaWQpOwogICAgICAgIGEu\nc2V0TmFtZSgiYSIgKyBpZCk7CiAgICAgICAgYS5zZXRBZ2UoaWQpOwogICAg\nICAgIEVtYmVkX0NvbGxfRW1iZWQgZW1iZWQgPSBjcmVhdGVFbWJlZF9Db2xs\nX0VtYmVkKGVtLCBpZCk7CiAgICAgICAgYS5zZXRFbWJlZChlbWJlZCk7CiAg\nICAgICAgZW0ucGVyc2lzdChhKTsKICAgIH0KCiAgICBwdWJsaWMgRW1iZWRf\nQ29sbF9FbWJlZCBjcmVhdGVFbWJlZF9Db2xsX0VtYmVkKEVudGl0eU1hbmFn\nZXIgZW0sIGludCBpZCkgewogICAgICAgIEVtYmVkX0NvbGxfRW1iZWQgZW1i\nZWQgPSBuZXcgRW1iZWRfQ29sbF9FbWJlZCgpOwogICAgICAgIGVtYmVkLnNl\ndEludFZhbDEoaWQgKiAxMCArIDEpOwogICAgICAgIGVtYmVkLnNldEludFZh\nbDIoaWQgKiAxMCArIDIpOwogICAgICAgIGVtYmVkLnNldEludFZhbDMoaWQg\nKiAxMCArIDMpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRW1i\nZWRkYWJsZXM7IGkrKykgewogICAgICAgICAgICBFbWJlZCBlbWJlZDEgPSBj\ncmVhdGVFbWJlZChpZCwgaSk7CiAgICAgICAgICAgIGVtYmVkLmFkZEVtYmVk\nKGVtYmVkMSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBlbWJlZDsKICAg\nIH0KCiAgICAvKgogICAgICogQ3JlYXRlIEVtcGxveWVlCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIGNyZWF0ZUVtcGxveWVlT2JqKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2Fj\ndGlvbigpOwogICAgICAgIGNyZWF0ZVBob25lTnVtYmVycyhlbSk7CiAgICAg\nICAgY3JlYXRlRW1wbG95ZWVzKGVtKTsKICAgICAgICBjcmVhdGVQcm9ncmFt\nTWFuYWdlcnMoZW0pOwogICAgICAgIAogICAgICAgIHRyYW4uYmVnaW4oKTsK\nICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAg\nICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\nY3JlYXRlUHJvZ3JhbU1hbmFnZXJzKEVudGl0eU1hbmFnZXIgZW0pIHsKICAg\nICAgICBlbXBJZCA9IDE7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBu\ndW1Qcm9ncmFtTWFuYWdlcnM7IGkrKykKICAgICAgICAgICAgY3JlYXRlUHJv\nZ3JhbU1hbmFnZXIoZW0sIHBtSWQrKyk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIGNyZWF0ZVByb2dyYW1NYW5hZ2VyKEVudGl0eU1hbmFnZXIgZW0s\nIGludCBpZCkgewogICAgICAgIFByb2dyYW1NYW5hZ2VyIHBtID0gbmV3IFBy\nb2dyYW1NYW5hZ2VyKCk7CiAgICAgICAgcG0uc2V0SWQoaWQpOwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRW1wbG95ZWVzUGVyUHJvZ3JhbU1h\nbmFnZXI7IGkrKykgewogICAgICAgICAgICBFbXBsb3llZSBlID0gZW1wbG95\nZWVzLmdldChlbXBJZCsrKTsKICAgICAgICAgICAgcG0uYWRkTWFuYWdlKGUp\nOwogICAgICAgICAgICBKb2JJbmZvIGpvYkluZm8gPSBuZXcgSm9iSW5mbygp\nOwogICAgICAgICAgICBqb2JJbmZvLnNldEpvYkRlc2NyaXB0aW9uKCJqb2JE\nZXNjcmlwdGlvbiIgKyBlLmdldEVtcElkKCkpOwogICAgICAgICAgICBqb2JJ\nbmZvLnNldFByb2dyYW1NYW5hZ2VyKHBtKTsKICAgICAgICAgICAgZS5zZXRK\nb2JJbmZvKGpvYkluZm8pOwogICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0\nKHBtKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgY3JlYXRlRW1wbG95\nZWVzKEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBwaG9uZUlkID0gMTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUVtcGxveWVlczsgaSsr\nKSB7CiAgICAgICAgICAgIEVtcGxveWVlIGUgPSBjcmVhdGVFbXBsb3llZShl\nbSwgZW1wSWQrKyk7CiAgICAgICAgICAgIGVtcGxveWVlcy5wdXQoZS5nZXRF\nbXBJZCgpLCBlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIEVtcGxv\neWVlIGNyZWF0ZUVtcGxveWVlKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkg\newogICAgICAgIEVtcGxveWVlIGUgPSBuZXcgRW1wbG95ZWUoKTsKICAgICAg\nICBlLnNldEVtcElkKGlkKTsKICAgICAgICBDb250YWN0SW5mbyBjb250YWN0\nSW5mbyA9IG5ldyBDb250YWN0SW5mbygpOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgbnVtUGhvbmVOdW1iZXJzUGVyRW1wbG95ZWU7IGkrKykgeyAK\nICAgICAgICAgICAgUGhvbmVOdW1iZXIgcGhvbmVOdW1iZXIgPSBwaG9uZXMu\nZ2V0KHBob25lSWQrKyk7CiAgICAgICAgICAgIGNvbnRhY3RJbmZvLmFkZFBo\nb25lTnVtYmVyKHBob25lTnVtYmVyKTsKICAgICAgICAgICAgZS5zZXRDb250\nYWN0SW5mbyhjb250YWN0SW5mbyk7CiAgICAgICAgICAgIHBob25lTnVtYmVy\nLmFkZEVtcGxveWVlcyhlKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChwaG9u\nZU51bWJlcik7CiAgICAgICAgfQogICAgICAgIFBhcmtpbmdTcG90IHBhcmtp\nbmdTcG90ID0gY3JlYXRlUGFya2luZ1Nwb3QoZW0sIHBhcmtpbmdTcG90SWQr\nKyk7CiAgICAgICAgTG9jYXRpb25EZXRhaWxzIGxvY2F0aW9uID0gbmV3IExv\nY2F0aW9uRGV0YWlscygpOwogICAgICAgIGxvY2F0aW9uLnNldE9mZmljZU51\nbWJlcihpZCk7CiAgICAgICAgbG9jYXRpb24uc2V0UGFya2luZ1Nwb3QocGFy\na2luZ1Nwb3QpOwogICAgICAgIGUuc2V0TG9jYXRpb25EZXRhaWxzKGxvY2F0\naW9uKTsKICAgICAgICBwYXJraW5nU3BvdC5zZXRBc3NpZ25lZFRvKGUpOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtTmlja05hbWVzOyBpKysp\nCiAgICAgICAgICAgIGUuYWRkTmlja05hbWUoIm5pY2tOYW1lIiArIGlkICsg\naSk7CiAgICAgICAgZW0ucGVyc2lzdChwYXJraW5nU3BvdCk7CiAgICAgICAg\nZW0ucGVyc2lzdChlKTsKICAgICAgICByZXR1cm4gZTsKICAgIH0KICAgIAog\nICAgcHVibGljIHZvaWQgY3JlYXRlUGhvbmVOdW1iZXJzKEVudGl0eU1hbmFn\nZXIgZW0pIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bVBob25l\nTnVtYmVyczsgaSsrKSB7CiAgICAgICAgICAgIFBob25lTnVtYmVyIHAgPSBu\nZXcgUGhvbmVOdW1iZXIoKTsKICAgICAgICAgICAgcC5zZXROdW1iZXIocGhv\nbmVJZCsrKTsKICAgICAgICAgICAgcGhvbmVzLnB1dChwLmdldE51bWJlcigp\nLCBwKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChwKTsKICAgICAgICB9CiAg\nICB9ICAgIAogICAgCiAgICBwdWJsaWMgUGFya2luZ1Nwb3QgY3JlYXRlUGFy\na2luZ1Nwb3QoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAg\nUGFya2luZ1Nwb3QgcCA9IG5ldyBQYXJraW5nU3BvdCgpOwogICAgICAgIHAu\nc2V0SWQoaWQpOwogICAgICAgIHAuc2V0R2FyYWdlKCJnYXJhZ2UiICsgaWQp\nOwogICAgICAgIGVtLnBlcnNpc3QocCk7CiAgICAgICAgcmV0dXJuIHA7CiAg\nICB9ICAgIAoKICAgIHB1YmxpYyB2b2lkIGZpbmRFbXBsb3llZU9iaigpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBQcm9ncmFtTWFuYWdlciBwbSA9IGVtLmZpbmQo\nUHJvZ3JhbU1hbmFnZXIuY2xhc3MsIDEpOwogICAgICAgIGFzc2VydFByb2dy\nYW1NYW5hZ2VyKHBtKTsKCiAgICAgICAgcG0gPSBlbS5maW5kKFByb2dyYW1N\nYW5hZ2VyLmNsYXNzLCAyKTsKICAgICAgICBhc3NlcnRQcm9ncmFtTWFuYWdl\ncihwbSk7CgogICAgICAgIEVtcGxveWVlIGUgPSBlbS5maW5kKEVtcGxveWVl\nLmNsYXNzLCAxKTsKICAgICAgICBhc3NlcnRFbXBsb3llZShlKTsKICAgICAg\nICAKICAgICAgICBQaG9uZU51bWJlciBwID0gZW0uZmluZChQaG9uZU51bWJl\nci5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0UGhvbmVOdW1iZXIocCk7CiAg\nICAgICAgCiAgICAgICAgUGFya2luZ1Nwb3QgcHMgPSBlbS5maW5kKFBhcmtp\nbmdTcG90LmNsYXNzLCAxKTsKICAgICAgICBhc3NlcnRQYXJraW5nU3BvdChw\ncyk7CiAgICAgICAKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCBxdWVyeUVtcGxveWVlT2JqKCkgewogICAgICAgIHF1\nZXJ5UHJvZ3JhbU1hbmFnZXIoZW1mKTsKICAgICAgICBxdWVyeUVtcGxveWVl\nT2JqKGVtZik7CiAgICAgICAgcXVlcnlQaG9uZU51bWJlcihlbWYpOwogICAg\nICAgIHF1ZXJ5UGFya2luZ1Nwb3QoZW1mKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgcXVlcnlQYXJraW5nU3BvdChFbnRpdHlNYW5hZ2VyRmFjdG9y\neSBlbWYpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0\ncmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2lu\nKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3Qg\ncCBmcm9tIFBhcmtpbmdTcG90IHAiKTsKICAgICAgICBMaXN0PFBhcmtpbmdT\ncG90PiBwcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoUGFy\na2luZ1Nwb3QgcCA6IHBzKXsKICAgICAgICAgICAgYXNzZXJ0UGFya2luZ1Nw\nb3QocCk7CiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgcXVl\ncnlQcm9ncmFtTWFuYWdlcihFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0u\nZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAg\nICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgcG0gZnJvbSBQ\ncm9ncmFtTWFuYWdlciBwbSIpOwogICAgICAgIExpc3Q8UHJvZ3JhbU1hbmFn\nZXI+IHBtcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoUHJv\nZ3JhbU1hbmFnZXIgcG0gOiBwbXMpewogICAgICAgICAgICBhc3NlcnRQcm9n\ncmFtTWFuYWdlcihwbSk7CiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBxdWVyeVBob25lTnVtYmVyKEVudGl0eU1hbmFnZXJGYWN0b3J5IGVtZikg\newogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBl\nbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAg\nICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBwIGZyb20g\nUGhvbmVOdW1iZXIgcCIpOwogICAgICAgIExpc3Q8UGhvbmVOdW1iZXI+IHBz\nID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChQaG9uZU51bWJl\nciBwIDogcHMpewogICAgICAgICAgICBhc3NlcnRQaG9uZU51bWJlcihwKTsK\nICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW1wbG95ZWVP\nYmooRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9u\nKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEgPSBl\nbS5jcmVhdGVRdWVyeSgic2VsZWN0IGUgZnJvbSBFbXBsb3llZSBlIik7CiAg\nICAgICAgTGlzdDxFbXBsb3llZT4gZXMgPSBxLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICBmb3IgKEVtcGxveWVlIGUgOiBlcyl7CiAgICAgICAgICAgIGFz\nc2VydEVtcGxveWVlKGUpOwogICAgICAgIH0KICAgICAgICB0cmFuLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgLy8gdGVzdCByYW5n\nZSB2YXJpYWJsZSBvdmVyIGVsZW1lbnQgY29sbGVjdGlvbgogICAgICAgIFN0\ncmluZ1tdIHF1ZXJ5ID0gewogICAgICAgICAgICAic2VsZWN0IGUgZnJvbSBF\nbXBsb3llZSBlLCBpbiAoZS5uaWNrTmFtZXMpIG4gIiArCiAgICAgICAgICAg\nICAgICAiIHdoZXJlIG4gbGlrZSAnJTEnIiwgIAogICAgICAgIH07CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykgewog\nICAgICAgICAgICBlcyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5nZXRS\nZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGZvciAoRW1wbG95ZWUgZSA6IGVz\nKXsKICAgICAgICAgICAgICAgIGFzc2VydEVtcGxveWVlKGUpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgYXNzZXJ0UHJvZ3JhbU1hbmFnZXIoUHJvZ3JhbU1h\nbmFnZXIgcG0pIHsKICAgICAgICBpbnQgaWQgPSBwbS5nZXRJZCgpOwogICAg\nICAgIENvbGxlY3Rpb248RW1wbG95ZWU+IGVzID0gcG0uZ2V0TWFuYWdlcygp\nOwogICAgICAgIGFzc2VydEVxdWFscyhudW1FbXBsb3llZXNQZXJQcm9ncmFt\nTWFuYWdlciwgZXMuc2l6ZSgpKTsKICAgICAgICBmb3IgKEVtcGxveWVlIGUg\nOiBlcykgewogICAgICAgICAgICBhc3NlcnRFbXBsb3llZShlKTsKICAgICAg\nICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGFzc2VydEVtcGxveWVl\nKEVtcGxveWVlIGUpIHsKICAgICAgICBpbnQgaWQgPSBlLmdldEVtcElkKCk7\nCiAgICAgICAgQ29udGFjdEluZm8gYyA9IGUuZ2V0Q29udGFjdEluZm8oKTsK\nICAgICAgICBMaXN0PFBob25lTnVtYmVyPiBwaG9uZXMgPSBjLmdldFBob25l\nTnVtYmVycygpOwogICAgICAgIGFzc2VydEVxdWFscyhudW1QaG9uZU51bWJl\ncnNQZXJFbXBsb3llZSwgcGhvbmVzLnNpemUoKSk7CiAgICAgICAgZm9yIChQ\naG9uZU51bWJlciBwIDogcGhvbmVzKSB7CiAgICAgICAgICAgIGFzc2VydFBo\nb25lTnVtYmVyKHApOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBMb2Nh\ndGlvbkRldGFpbHMgbG9jID0gZS5nZXRMb2NhdGlvbkRldGFpbHMoKTsKICAg\nICAgICBpbnQgb2ZmaWNlTnVtYmVyID0gbG9jLmdldE9mZmljZU51bWJlcigp\nOwogICAgICAgIFBhcmtpbmdTcG90IHAgPSBsb2MuZ2V0UGFya2luZ1Nwb3Qo\nKTsKICAgICAgICBhc3NlcnRQYXJraW5nU3BvdChwKTsKICAgICAgICBQcm9n\ncmFtTWFuYWdlciBwbSA9IGUuZ2V0Sm9iSW5mbygpLmdldFByb2dyYW1NYW5h\nZ2VyKCk7CiAgICAgICAgU2V0PFN0cmluZz4gbmlja05hbWVzID0gZS5nZXRO\naWNrTmFtZXMoKTsKICAgICAgICBhc3NlcnRFcXVhbHMobnVtTmlja05hbWVz\nLCBuaWNrTmFtZXMuc2l6ZSgpKTsKICAgICAgICAKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgYXNzZXJ0UGhvbmVOdW1iZXIoUGhvbmVOdW1iZXIgcCkg\newogICAgICAgIGludCBudW1iZXIgPSBwLmdldE51bWJlcigpOwogICAgICAg\nIENvbGxlY3Rpb248RW1wbG95ZWU+IGVzID0gcC5nZXRFbXBsb3llZXMoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMobnVtRW1wbG95ZWVzUGVyUGhvbmVOdW1i\nZXIsIGVzLnNpemUoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGFz\nc2VydFBhcmtpbmdTcG90KFBhcmtpbmdTcG90IHApIHsKICAgICAgICBTdHJp\nbmcgZ2FyYWdlID0gcC5nZXRHYXJhZ2UoKTsKICAgICAgICBFbXBsb3llZSBl\nID0gcC5nZXRBc3NpZ25lZFRvKCk7CiAgICB9CiAgICAKICAgIC8qCiAgICAg\nKiBGaW5kIEVudGl0eUFfQ29sbF9TdHJpbmcKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgZmluZEVudGl0eUFfQ29sbF9TdHJpbmcoKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgRW50aXR5QV9Db2xsX1N0cmluZyBhID0gZW0uZmluZChFbnRpdHlB\nX0NvbGxfU3RyaW5nLmNsYXNzLCBJRCk7CiAgICAgICAgY2hlY2tFbnRpdHlB\nX0NvbGxfU3RyaW5nKGEpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgLyoKICAgICAqIEZpbmQgRW50aXR5QV9FbWJlZF9Ub09uZQogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBmaW5kRW50aXR5QV9FbWJlZF9Ub09uZSgpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBFbnRpdHlBX0VtYmVkX1RvT25lIGEgPSBlbS5m\naW5kKEVudGl0eUFfRW1iZWRfVG9PbmUuY2xhc3MsIElEKTsKICAgICAgICBj\naGVja0VudGl0eUFfRW1iZWRfVG9PbmUoYSk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnJlbW92ZShhKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIC8v\nZGVsZXRlIGNhc2NhZGUKICAgICAgICBFbnRpdHlCMSBiID0gZW0uZmluZChF\nbnRpdHlCMS5jbGFzcywgSUQpOwogICAgICAgIGFzc2VydE51bGwoYik7CiAg\nICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAgICogRmluZCBF\nbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIGZpbmRFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lKCkgewogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUgYSA9CiAgICAg\nICAgICAgIGVtLmZpbmQoRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZS5jbGFz\ncywgSUQpOwogICAgICAgIGNoZWNrRW50aXR5QV9FbWJlZF9NYXBwZWRUb09u\nZShhKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAg\nKiBGaW5kIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZQogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBmaW5kRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBhID0K\nICAgICAgICAgICAgZW0uZmluZChFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUu\nY2xhc3MsIElEKTsKICAgICAgICBjaGVja0VudGl0eUFfQ29sbF9FbWJlZF9U\nb09uZShhKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAg\nICAgKiBGaW5kIEVudGl0eUFfRW1iZWRfVG9NYW55CiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIGZpbmRFbnRpdHlBX0VtYmVkX1RvTWFueSgpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBFbnRpdHlBX0VtYmVkX1RvTWFueSBhID0gZW0uZmluZChF\nbnRpdHlBX0VtYmVkX1RvTWFueS5jbGFzcywgSUQpOwogICAgICAgIGNoZWNr\nRW50aXR5QV9FbWJlZF9Ub01hbnkoYSk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICAvKgogICAgICogRmluZCBFbnRpdHlBX0VtYmVkX0VtYmVk\nX1RvTWFueQogICAgICovCiAgICBwdWJsaWMgdm9pZCBmaW5kRW50aXR5QV9F\nbWJlZF9FbWJlZF9Ub01hbnkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5\nQV9FbWJlZF9FbWJlZF9Ub01hbnkgYSA9CiAgICAgICAgICAgIGVtLmZpbmQo\nRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkuY2xhc3MsIElEKTsKICAgICAg\nICBjaGVja0VudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55KGEpOwogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyoKICAgICAqIEZpbmQgRW50aXR5\nQV9FbWJlZF9Db2xsX0ludGVnZXIKICAgICAqLwogICAgcHVibGljIHZvaWQg\nZmluZEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEgPQogICAgICAg\nICAgICBlbS5maW5kKEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyLmNsYXNz\nLCBJRCk7CiAgICAgICAgY2hlY2tFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdl\ncihhKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAg\nKiBGaW5kIEVudGl0eUFfRW1iZWRfRW1iZWQKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgZmluZEVudGl0eUFfRW1iZWRfRW1iZWQoKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgRW50aXR5QV9FbWJlZF9FbWJlZCBhID0gZW0uZmluZChFbnRpdHlB\nX0VtYmVkX0VtYmVkLmNsYXNzLCBJRCk7CiAgICAgICAgY2hlY2tFbnRpdHlB\nX0VtYmVkX0VtYmVkKGEpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgLyoKICAgICAqIEZpbmQgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIGZpbmRFbnRpdHlBX0NvbGxfRW1iZWRf\nRW1iZWQoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkIGEgPQogICAgICAgICAgICBlbS5maW5kKEVudGl0eUFfQ29sbF9F\nbWJlZF9FbWJlZC5jbGFzcywgSUQpOwogICAgICAgIGNoZWNrRW50aXR5QV9D\nb2xsX0VtYmVkX0VtYmVkKGEpOwogICAgICAgIAogICAgICAgIGVtLmNsZWFy\nKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAg\nICAgIEVtYmVkX0VtYmVkIGVtYmVkID0gY3JlYXRlRW1iZWRfRW1iZWQoZW0s\nIElELCAxMDApOwogICAgICAgIGEuYWRkRW1iZWQoZW1iZWQpOwogICAgICAg\nIGVtLm1lcmdlKGEpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAg\nICogRmluZCBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQKICAgICAqLwogICAg\ncHVibGljIHZvaWQgZmluZEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZCgpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQgYSA9\nCiAgICAgICAgICAgIGVtLmZpbmQoRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVk\nLmNsYXNzLCBJRCk7CiAgICAgICAgY2hlY2tFbnRpdHlBX0VtYmVkX0NvbGxf\nRW1iZWQoYSk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgog\nICAgICogY2hlY2sgRW50aXR5QV9Db2xsX1N0cmluZwogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBjaGVja0VudGl0eUFfQ29sbF9TdHJpbmcoRW50aXR5QV9D\nb2xsX1N0cmluZyBhKSB7CiAgICAgICAgaW50IGlkID0gYS5nZXRJZCgpOwog\nICAgICAgIFN0cmluZyBuYW1lID0gYS5nZXROYW1lKCk7CiAgICAgICAgaW50\nIGFnZSA9IGEuZ2V0QWdlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGlk\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImEiICsgaWQgLG5hbWUpOwogICAg\nICAgIGFzc2VydEVxdWFscygxLCBhZ2UpOwogICAgICAgIFNldDxTdHJpbmc+\nIG5pY2tOYW1lcyA9IGEuZ2V0Tmlja05hbWVzKCk7CiAgICAgICAgZm9yIChT\ndHJpbmcgbmlja05hbWUgOiBuaWNrTmFtZXMpCiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscygibmlja05hbWVfIiArIGlkICsgIjAiLCBuaWNrTmFtZSk7CiAg\nICAgICAgTGlzdDxFbnRpdHlBX0NvbGxfU3RyaW5nLkNyZWRpdFJhdGluZz4g\nY3IgPSBhLmdldENyZWRpdFJhdGluZygpOwogICAgICAgIGZvciAoRW50aXR5\nQV9Db2xsX1N0cmluZy5DcmVkaXRSYXRpbmcgYyA6IGNyKQogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoIlBPT1IiLCBjLnRvU3RyaW5nKCkpOwogICAgfQoK\nICAgIC8qCiAgICAgKiBjaGVjayBFbnRpdHlBX0VtYmVkX1RvT25lCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIGNoZWNrRW50aXR5QV9FbWJlZF9Ub09uZShF\nbnRpdHlBX0VtYmVkX1RvT25lIGEpIHsKICAgICAgICBpbnQgaWQgPSBhLmdl\ndElkKCk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBhLmdldE5hbWUoKTsKICAg\nICAgICBpbnQgYWdlID0gYS5nZXRBZ2UoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMSwgaWQpOwogICAgICAgIGFzc2VydEVxdWFscygiYSIgKyBpZCAsbmFt\nZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGFnZSk7CiAgICAgICAgRW1i\nZWRfVG9PbmUgZW1iZWQgPSBhLmdldEVtYmVkKCk7CiAgICAgICAgY2hlY2tF\nbWJlZF9Ub09uZShlbWJlZCk7CiAgICB9CgogICAgLyoKICAgICAqIGNoZWNr\nIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgY2hlY2tFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lKEVudGl0eUFf\nRW1iZWRfTWFwcGVkVG9PbmUgYSkgewogICAgICAgIGludCBpZCA9IGEuZ2V0\nSWQoKTsKICAgICAgICBTdHJpbmcgbmFtZSA9IGEuZ2V0TmFtZSgpOwogICAg\nICAgIGludCBhZ2UgPSBhLmdldEFnZSgpOwogICAgICAgIGFzc2VydEVxdWFs\ncygxLCBpZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJhIiArIGlkICxuYW1l\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYWdlKTsKICAgICAgICBFbWJl\nZF9NYXBwZWRUb09uZSBlbWJlZCA9IGEuZ2V0RW1iZWQoKTsKICAgICAgICBj\naGVja0VtYmVkX01hcHBlZFRvT25lKGVtYmVkKTsKICAgIH0KCiAgICAvKgog\nICAgICogY2hlY2sgRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIGNoZWNrRW50aXR5QV9Db2xsX0VtYmVkX1RvT25l\nKEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBhKSB7CiAgICAgICAgaW50IGlk\nID0gYS5nZXRJZCgpOwogICAgICAgIFN0cmluZyBuYW1lID0gYS5nZXROYW1l\nKCk7CiAgICAgICAgaW50IGFnZSA9IGEuZ2V0QWdlKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIGlkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImEiICsg\naWQgLG5hbWUpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBhZ2UpOwogICAg\nICAgIFNldDxFbWJlZF9Ub09uZT4gZW1iZWRzID0gYS5nZXRFbWJlZDFUb09u\nZXMoKTsKICAgICAgICBmb3IgKEVtYmVkX1RvT25lIGVtYmVkIDogZW1iZWRz\nKQogICAgICAgICAgICBjaGVja0VtYmVkX1RvT25lKGVtYmVkKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBjaGVja0VtYmVkX1RvT25lKEVtYmVkX1RvT25l\nIGVtYmVkKSB7CiAgICAgICAgU3RyaW5nIG5hbWUxID0gZW1iZWQuZ2V0TmFt\nZTEoKTsKICAgICAgICBTdHJpbmcgbmFtZTIgPSBlbWJlZC5nZXROYW1lMigp\nOwogICAgICAgIFN0cmluZyBuYW1lMyA9IGVtYmVkLmdldE5hbWUzKCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJuYW1lMSIsIG5hbWUxKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoIm5hbWUyIiwgbmFtZTIpOwogICAgICAgIGFzc2VydEVx\ndWFscygibmFtZTMiLCBuYW1lMyk7CiAgICAgICAgRW50aXR5QjEgYiA9IGVt\nYmVkLmdldEVudGl0eUIoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYi5n\nZXRJZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImIiICsgYi5nZXRJZCgp\nLCBiLmdldE5hbWUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2hlY2tF\nbWJlZF9NYXBwZWRUb09uZShFbWJlZF9NYXBwZWRUb09uZSBlbWJlZCkgewog\nICAgICAgIFN0cmluZyBuYW1lMSA9IGVtYmVkLmdldE5hbWUxKCk7CiAgICAg\nICAgU3RyaW5nIG5hbWUyID0gZW1iZWQuZ2V0TmFtZTIoKTsKICAgICAgICBT\ndHJpbmcgbmFtZTMgPSBlbWJlZC5nZXROYW1lMygpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygibmFtZTEiLCBuYW1lMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJuYW1lMiIsIG5hbWUyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIm5hbWUz\nIiwgbmFtZTMpOwogICAgICAgIEVudGl0eUIxIGIgPSBlbWJlZC5nZXRNYXBw\nZWRFbnRpdHlCKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGIuZ2V0SWQo\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJibSIgKyBiLmdldElkKCksIGIu\nZ2V0TmFtZSgpKTsKICAgIH0KCiAgICAvKgogICAgICogY2hlY2sgRW50aXR5\nQV9FbWJlZF9Ub01hbnkKICAgICAqLwogICAgcHVibGljIHZvaWQgY2hlY2tF\nbnRpdHlBX0VtYmVkX1RvTWFueShFbnRpdHlBX0VtYmVkX1RvTWFueSBhKSB7\nCiAgICAgICAgaW50IGlkID0gYS5nZXRJZCgpOwogICAgICAgIFN0cmluZyBu\nYW1lID0gYS5nZXROYW1lKCk7CiAgICAgICAgaW50IGFnZSA9IGEuZ2V0QWdl\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGlkKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoImEiICsgaWQgLG5hbWUpOwogICAgICAgIGFzc2VydEVxdWFs\ncygxLCBhZ2UpOwogICAgICAgIEVtYmVkX1RvTWFueSBlbWJlZCA9IGEuZ2V0\nRW1iZWQoKTsKICAgICAgICBjaGVja0VtYmVkX1RvTWFueShlbWJlZCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgY2hlY2tFbWJlZF9Ub01hbnkoRW1iZWRf\nVG9NYW55IGVtYmVkKSB7CiAgICAgICAgU3RyaW5nIG5hbWUxID0gZW1iZWQu\nZ2V0TmFtZTEoKTsKICAgICAgICBTdHJpbmcgbmFtZTIgPSBlbWJlZC5nZXRO\nYW1lMigpOwogICAgICAgIFN0cmluZyBuYW1lMyA9IGVtYmVkLmdldE5hbWUz\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJuYW1lMSIsIG5hbWUxKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoIm5hbWUyIiwgbmFtZTIpOwogICAgICAgIGFz\nc2VydEVxdWFscygibmFtZTMiLCBuYW1lMyk7CiAgICAgICAgTGlzdDxFbnRp\ndHlCMT4gYnMgPSBlbWJlZC5nZXRFbnRpdHlCcygpOwogICAgICAgIGZvciAo\nRW50aXR5QjEgYiA6IGJzKSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygx\nLCBiLmdldElkKCkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoImIiICsg\nYi5nZXRJZCgpICsgIjAiLCBiLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qCiAgICAgKiBjaGVjayBFbnRpdHlBX0VtYmVkX0VtYmVkX1Rv\nTWFueQogICAgICovCiAgICBwdWJsaWMgdm9pZCBjaGVja0VudGl0eUFfRW1i\nZWRfRW1iZWRfVG9NYW55KEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55IGEp\nIHsKICAgICAgICBpbnQgaWQgPSBhLmdldElkKCk7CiAgICAgICAgU3RyaW5n\nIG5hbWUgPSBhLmdldE5hbWUoKTsKICAgICAgICBpbnQgYWdlID0gYS5nZXRB\nZ2UoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaWQpOwogICAgICAgIGFz\nc2VydEVxdWFscygiYSIgKyBpZCAsbmFtZSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIGFnZSk7CiAgICAgICAgRW1iZWRfRW1iZWRfVG9NYW55IGVtYmVk\nID0gYS5nZXRFbWJlZCgpOwogICAgICAgIGNoZWNrRW1iZWRfRW1iZWRfVG9N\nYW55KGVtYmVkKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgY2hlY2tF\nbWJlZF9FbWJlZF9Ub01hbnkoRW1iZWRfRW1iZWRfVG9NYW55IGVtYmVkKSB7\nCiAgICAgICAgaW50IGludFZhbDEgPSBlbWJlZC5nZXRJbnRWYWwxKCk7CiAg\nICAgICAgaW50IGludFZhbDIgPSBlbWJlZC5nZXRJbnRWYWwyKCk7CiAgICAg\nICAgaW50IGludFZhbDMgPSBlbWJlZC5nZXRJbnRWYWwzKCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIGludFZhbDEpOwogICAgICAgIGFzc2VydEVxdWFs\ncygyLCBpbnRWYWwyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgaW50VmFs\nMyk7CiAgICAgICAgRW1iZWRfVG9NYW55IGVtYmVkMSA9IGVtYmVkLmdldEVt\nYmVkKCk7CiAgICAgICAgY2hlY2tFbWJlZF9Ub01hbnkoZW1iZWQxKTsKICAg\nIH0KICAgIAogICAgLyoKICAgICAqIGNoZWNrIEVudGl0eUFfRW1iZWRfQ29s\nbF9JbnRlZ2VyCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNoZWNrRW50aXR5\nQV9FbWJlZF9Db2xsX0ludGVnZXIoRW50aXR5QV9FbWJlZF9Db2xsX0ludGVn\nZXIgYSkgewogICAgICAgIGludCBpZCA9IGEuZ2V0SWQoKTsKICAgICAgICBT\ndHJpbmcgbmFtZSA9IGEuZ2V0TmFtZSgpOwogICAgICAgIGludCBhZ2UgPSBh\nLmdldEFnZSgpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBpZCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJhIiArIGlkICxuYW1lKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMSwgYWdlKTsKICAgICAgICBFbWJlZF9Db2xsX0ludGVnZXIg\nZW1iZWQgPSBhLmdldEVtYmVkKCk7CiAgICAgICAgY2hlY2tFbWJlZF9JbnRl\nZ2VycyhlbWJlZCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2hlY2tFbWJl\nZF9JbnRlZ2VycyhFbWJlZF9Db2xsX0ludGVnZXIgZW1iZWQpIHsKICAgICAg\nICBpbnQgaW50VmFsMSA9IGVtYmVkLmdldEludFZhbDEoKTsKICAgICAgICBp\nbnQgaW50VmFsMiA9IGVtYmVkLmdldEludFZhbDIoKTsKICAgICAgICBpbnQg\naW50VmFsMyA9IGVtYmVkLmdldEludFZhbDMoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMTEsIGludFZhbDEpOwogICAgICAgIGFzc2VydEVxdWFscygxMiwg\naW50VmFsMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEzLCBpbnRWYWwzKTsK\nICAgICAgICBTZXQ8SW50ZWdlcj4gaW50VmFscyA9IGVtYmVkLmdldE90aGVy\nSW50VmFscygpOwogICAgICAgIGZvciAoSW50ZWdlciBpbnRWYWwgOiBpbnRW\nYWxzKSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygxMDAsIGludFZhbC5p\nbnRWYWx1ZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoKICAgICAqIGNo\nZWNrIEVudGl0eUFfRW1iZWRfRW1iZWQKICAgICAqLwogICAgcHVibGljIHZv\naWQgY2hlY2tFbnRpdHlBX0VtYmVkX0VtYmVkKEVudGl0eUFfRW1iZWRfRW1i\nZWQgYSkgewogICAgICAgIGludCBpZCA9IGEuZ2V0SWQoKTsKICAgICAgICBT\ndHJpbmcgbmFtZSA9IGEuZ2V0TmFtZSgpOwogICAgICAgIGludCBhZ2UgPSBh\nLmdldEFnZSgpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBpZCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJhIiArIGlkICxuYW1lKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMSwgYWdlKTsKICAgICAgICBFbWJlZF9FbWJlZCBlbWJlZCA9\nIGEuZ2V0RW1iZWQoKTsKICAgICAgICBjaGVja0VtYmVkX0VtYmVkKGVtYmVk\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjaGVja0VtYmVkX0VtYmVkKEVt\nYmVkX0VtYmVkIGVtYmVkKSB7CiAgICAgICAgaW50IGludFZhbDEgPSBlbWJl\nZC5nZXRJbnRWYWwxKCk7CiAgICAgICAgaW50IGludFZhbDIgPSBlbWJlZC5n\nZXRJbnRWYWwyKCk7CiAgICAgICAgaW50IGludFZhbDMgPSBlbWJlZC5nZXRJ\nbnRWYWwzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwMSwgaW50VmFsMSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwMiwgaW50VmFsMik7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEwMywgaW50VmFsMyk7CiAgICAgICAgRW1iZWQgZW1i\nZWQxID0gZW1iZWQuZ2V0RW1iZWQoKTsKICAgICAgICBjaGVja0VtYmVkKGVt\nYmVkMSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2hlY2tFbWJlZChFbWJl\nZCBlbWJlZCkgewogICAgICAgIGludCBpbnRWYWwxID0gZW1iZWQuZ2V0SW50\nVmFsMSgpOwogICAgICAgIGludCBpbnRWYWwyID0gZW1iZWQuZ2V0SW50VmFs\nMigpOwogICAgICAgIGludCBpbnRWYWwzID0gZW1iZWQuZ2V0SW50VmFsMygp\nOwogICAgICAgIGFzc2VydEVxdWFscygxMDQsIGludFZhbDEpOwogICAgICAg\nIGFzc2VydEVxdWFscygxMDUsIGludFZhbDIpOwogICAgICAgIGFzc2VydEVx\ndWFscygxMDYsIGludFZhbDMpOwogICAgfQoKICAgIC8qCiAgICAgKiBjaGVj\nayBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgY2hlY2tFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQoRW50aXR5QV9D\nb2xsX0VtYmVkX0VtYmVkIGEpIHsKICAgICAgICBpbnQgaWQgPSBhLmdldElk\nKCk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBhLmdldE5hbWUoKTsKICAgICAg\nICBpbnQgYWdlID0gYS5nZXRBZ2UoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgaWQpOwogICAgICAgIGFzc2VydEVxdWFscygiYSIgKyBpZCAsbmFtZSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGFnZSk7CiAgICAgICAgTGlzdDxF\nbWJlZF9FbWJlZD4gZW1iZWRzID0gYS5nZXRFbWJlZHMoKTsKICAgICAgICBm\nb3IgKEVtYmVkX0VtYmVkIGVtYmVkIDogZW1iZWRzKQogICAgICAgICAgICBj\naGVja0VtYmVkX0VtYmVkKGVtYmVkKTsKICAgIH0KCiAgICAvKgogICAgICog\nY2hlY2sgRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIGNoZWNrRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkKEVudGl0\neUFfRW1iZWRfQ29sbF9FbWJlZCBhKSB7CiAgICAgICAgaW50IGlkID0gYS5n\nZXRJZCgpOwogICAgICAgIFN0cmluZyBuYW1lID0gYS5nZXROYW1lKCk7CiAg\nICAgICAgaW50IGFnZSA9IGEuZ2V0QWdlKCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIGlkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImEiICsgaWQgLG5h\nbWUpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBhZ2UpOwogICAgICAgIEVt\nYmVkX0NvbGxfRW1iZWQgZW1iZWQgPSBhLmdldEVtYmVkKCk7CiAgICAgICAg\nY2hlY2tFbWJlZF9Db2xsX0VtYmVkKGVtYmVkKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBjaGVja0VtYmVkX0NvbGxfRW1iZWQoRW1iZWRfQ29sbF9FbWJl\nZCBlbWJlZCkgewogICAgICAgIGludCBpbnRWYWwxID0gZW1iZWQuZ2V0SW50\nVmFsMSgpOwogICAgICAgIGludCBpbnRWYWwyID0gZW1iZWQuZ2V0SW50VmFs\nMigpOwogICAgICAgIGludCBpbnRWYWwzID0gZW1iZWQuZ2V0SW50VmFsMygp\nOwogICAgICAgIGFzc2VydEVxdWFscygxMSwgaW50VmFsMSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEyLCBpbnRWYWwyKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMTMsIGludFZhbDMpOwogICAgICAgIExpc3Q8RW1iZWQ+IGVtYmVkcyA9\nIGVtYmVkLmdldEVtYmVkcygpOwogICAgICAgIGZvciAoRW1iZWQgZW1iZWQx\nIDogZW1iZWRzKQogICAgICAgICAgICBjaGVja0VtYmVkKGVtYmVkMSk7CiAg\nICB9CgogICAgLyoKICAgICAqIFF1ZXJ5IEVudGl0eUFfQ29sbF9TdHJpbmcK\nICAgICAqLwogICAgcHVibGljIHZvaWQgcXVlcnlFbnRpdHlBX0NvbGxfU3Ry\naW5nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIFN0cmluZ1tdIHF1ZXJ5ID0gewog\nICAgICAgICAgICAic2VsZWN0IGUgZnJvbSAiICsKICAgICAgICAgICAgICAg\nICIgRW50aXR5QV9Db2xsX1N0cmluZyBhICIgKwogICAgICAgICAgICAgICAg\nIiAsIGluIChhLm5pY2tOYW1lcykgZSBvcmRlciBieSBhLmlkIiwKICAgICAg\nICAgICAgInNlbGVjdCBlIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVu\ndGl0eUFfQ29sbF9TdHJpbmcgYSAiICsKICAgICAgICAgICAgICAgICIgLCBp\nbiAoYS5uaWNrTmFtZXMpIGUgb3JkZXIgYnkgYS5pZCIsCiAgICAgICAgICAg\nICJzZWxlY3QgZSBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlB\nX0NvbGxfU3RyaW5nIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEu\nbmlja05hbWVzKSBlIG9yZGVyIGJ5IGUiLAogICAgICAgICAgICAic2VsZWN0\nIGEgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX1N0\ncmluZyBhICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBhLm5pY2tOYW1l\ncyBJUyBFTVBUWSBvcmRlciBieSBhIiwKICAgICAgICAgICAgInNlbGVjdCBh\nIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9TdHJp\nbmcgYSAiICsKICAgICAgICAgICAgICAgICIgV0hFUkUgZXhpc3RzIChzZWxl\nY3QgbiBmcm9tIEVudGl0eUFfQ29sbF9TdHJpbmcgYSwgIiArCiAgICAgICAg\nICAgICAgICAiIGluIChhLm5pY2tOYW1lcykgbiB3aGVyZSBuIGxpa2UgJyUx\nJykgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGEiLAogICAgICAg\nIH07CiAgICAgICAgTGlzdCBycyA9IG51bGw7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBy\ncyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgICAgIHN3aXRjaCAoaSkgewogICAgICAgICAgICBjYXNlIDA6\nCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAyOgogICAg\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShycy5zaXplKCkgPiAwKTsKICAgICAg\nICAgICAgICAgIE9iamVjdCBvYmogPSBycy5nZXQoMCk7CiAgICAgICAgICAg\nICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0YW5jZW9mIFN0cmluZyk7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAg\nICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKHJzLnNp\nemUoKSA9PSAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbS5jbGVh\ncigpOwogICAgICAgIH0KICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFu\nID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7\nCiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgYSBm\ncm9tIEVudGl0eUFfQ29sbF9TdHJpbmcgYSIpOwogICAgICAgIExpc3Q8RW50\naXR5QV9Db2xsX1N0cmluZz4gYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAg\nICAgICBmb3IgKEVudGl0eUFfQ29sbF9TdHJpbmcgYSA6IGFzKSB7CiAgICAg\nICAgICAgIGNoZWNrRW50aXR5QV9Db2xsX1N0cmluZyhhKTsKICAgICAgICB9\nCiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQoKICAgIC8qCiAgICAgKiBRdWVyeSBFbnRpdHlBX0VtYmVkX1RvT25l\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9U\nb09uZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAvLyB0ZXN0IHNlbGVjdCBlbWJl\nZCBvYmplY3QKICAgICAgICBTdHJpbmdbXSBxdWVyeSA9IHsKICAgICAgICAg\nICAgInNlbGVjdCBhLmVtYmVkIGZyb20gIiArCiAgICAgICAgICAgICAgICAi\nIEVudGl0eUFfRW1iZWRfVG9PbmUgYSAiLAogICAgICAgICAgICAic2VsZWN0\nIGEuZW1iZWQgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9F\nbWJlZF9Ub09uZSBhICIsCiAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tIEVu\ndGl0eUFfRW1iZWRfVG9PbmUgYSAiICsKICAgICAgICAgICAgICAgICIgam9p\nbiBhLmVtYmVkIGUgam9pbiBlLmIgYiB3aGVyZSBlLmIuaWQgPiAwIG9yZGVy\nIGJ5IGEuaWQiLAogICAgICAgICAgICAic2VsZWN0IGUgZnJvbSBFbnRpdHlB\nX0VtYmVkX1RvT25lIGEgIiArCiAgICAgICAgICAgICAgICAiIGpvaW4gYS5l\nbWJlZCBlIGpvaW4gZS5iIGIgd2hlcmUgZS5iLmlkID4gMCBvcmRlciBieSBh\nLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gIiArCiAg\nICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfVG9PbmUgYSBPUkRFUiBC\nWSBhLmVtYmVkIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20g\nIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfVG9PbmUgYSBX\nSEVSRSBhLmVtYmVkLmIgSVMgTk9UIE5VTEwgIiArCiAgICAgICAgICAgICAg\nICAiIE9SREVSIEJZIGEuZW1iZWQiLAogICAgICAgICAgICAic2VsZWN0IGEu\nZW1iZWQgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJl\nZF9Ub09uZSBhIFdIRVJFIGV4aXN0cyAiICsKICAgICAgICAgICAgICAgICIg\nKHNlbGVjdCBhIGZyb20gRW50aXR5QV9FbWJlZF9Ub09uZSBhICIgKwogICAg\nICAgICAgICAgICAgIiB3aGVyZSBhLmVtYmVkLmIgSVMgTk9UIE5VTEwpICIg\nKwogICAgICAgICAgICAgICAgIiBPUkRFUiBCWSBhLmVtYmVkIiwKICAgICAg\nICB9OwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgTGlzdDxPYmplY3RbXT4gcnMgPSBudWxs\nOwogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGFzc2VydFRydWUocnMuc2l6\nZSgpID4gMCk7CiAgICAgICAgICAgIE9iamVjdCBvYmogPSBycy5nZXQoMCk7\nCiAgICAgICAgICAgIGFzc2VydFRydWUob2JqIGluc3RhbmNlb2YgRW1iZWRf\nVG9PbmUpOwogICAgICAgICAgICBhc3NlcnRUcnVlKCgoRW1iZWRfVG9PbmUp\nIG9iaikuZ2V0RW50aXR5QigpICE9IG51bGwpOwogICAgICAgICAgICBlbS5j\nbGVhcigpOwogICAgICAgIH0KICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0\ncmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2lu\nKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3Qg\nYSBmcm9tIEVudGl0eUFfRW1iZWRfVG9PbmUgYSIpOwogICAgICAgIExpc3Q8\nRW50aXR5QV9FbWJlZF9Ub09uZT4gYXMgPSBxLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICBmb3IgKEVudGl0eUFfRW1iZWRfVG9PbmUgYSA6IGFzKSB7CiAg\nICAgICAgICAgIGNoZWNrRW50aXR5QV9FbWJlZF9Ub09uZShhKTsKICAgICAg\nICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIC8qCiAgICAgKiBRdWVyeSBFbnRpdHlBX0VtYmVkX01h\ncHBlZFRvT25lCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5\nQV9FbWJlZF9NYXBwZWRUb09uZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAvLyB0\nZXN0IHNlbGVjdCBlbWJlZCBvYmplY3QKICAgICAgICBTdHJpbmdbXSBxdWVy\neSA9IHsKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gIiArCiAg\nICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUgYSAi\nLAogICAgICAgICAgICAic2VsZWN0IGUgZnJvbSBFbnRpdHlBX0VtYmVkX01h\ncHBlZFRvT25lIGEgIiArCiAgICAgICAgICAgICAgICAiIGpvaW4gYS5lbWJl\nZCBlIGpvaW4gZS5ibSBibSB3aGVyZSBlLmJtLmlkID4gMCBvcmRlciBieSBh\nLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGFzIGUgZnJvbSAi\nICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9NYXBwZWRUb09u\nZSBhIE9SREVSIEJZIGUiLAogICAgICAgICAgICAic2VsZWN0IGEuZW1iZWQg\nZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9NYXBw\nZWRUb09uZSBhIFdIRVJFIGEuZW1iZWQuYm0gSVMgTk9UIE5VTEwiLAogICAg\nICAgICAgICAic2VsZWN0IGEuZW1iZWQgZnJvbSAiICsKICAgICAgICAgICAg\nICAgICIgRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZSBhICIgKwogICAgICAg\nICAgICAgICAgIiBXSEVSRSBleGlzdHMgIiArCiAgICAgICAgICAgICAgICAi\nIChzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUgYSAi\nICsKICAgICAgICAgICAgICAgICIgd2hlcmUgYS5lbWJlZC5ibSBJUyBOT1Qg\nTlVMTCkiLAogICAgICAgIH07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBxdWVyeS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBMaXN0PE9iamVj\ndFtdPiBycyA9IG51bGw7CiAgICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVl\ncnkocXVlcnlbaV0pLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZShycy5zaXplKCkgPiAwKTsKICAgICAgICAgICAgT2JqZWN0IG9i\naiA9IHJzLmdldCgwKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvYmogaW5z\ndGFuY2VvZiBFbWJlZF9NYXBwZWRUb09uZSk7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoKChFbWJlZF9NYXBwZWRUb09uZSkgb2JqKS5nZXRNYXBwZWRFbnRp\ndHlCKCkgIT0gbnVsbCk7CiAgICAgICAgICAgIGVtLmNsZWFyKCk7CiAgICAg\nICAgfQogICAgICAgIFN0cmluZ1tdIHF1ZXJ5MiA9IHsKICAgICAgICAgICAg\nLy8gZW1iZWRkYWJsZSBpbiBjb25kaXRpb25hbCBleHByZXNzaW9uIHNob3Vs\nZCBmYWlsCiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBmcm9tICIgKwog\nICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lIGEg\nIiArCiAgICAgICAgICAgICAgICAiIFdIRVJFIGV4aXN0cyAiICsKICAgICAg\nICAgICAgICAgICIgKHNlbGVjdCBlIGZyb20gRW50aXR5QV9FbWJlZF9NYXBw\nZWRUb09uZSBhIiArCiAgICAgICAgICAgICAgICAiIGpvaW4gYS5lbWJlZCBl\nICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBlLmJtIElTIE5PVCBOVUxM\nKSIsCiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBmcm9tICIgKwogICAg\nICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lIGEgIiAr\nCiAgICAgICAgICAgICAgICAiIFdIRVJFIGV4aXN0cyAiICsKICAgICAgICAg\nICAgICAgICIgKHNlbGVjdCBhLmVtYmVkIGZyb20gRW50aXR5QV9FbWJlZF9N\nYXBwZWRUb09uZSBhICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBhLmVt\nYmVkLmJtIElTIE5PVCBOVUxMKSIsCiAgICAgICAgfTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IHF1ZXJ5Mi5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICBMaXN0PE9iamVjdFtdPiBycyA9IG51bGw7CiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5\nMltpXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICB9IGNhdGNoIChB\ncmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAvLyBhcyBl\neHBlY3RlZAogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBFbnRp\ndHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAg\nICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0\nZVF1ZXJ5KCJzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9P\nbmUgYSIpOwogICAgICAgIExpc3Q8RW50aXR5QV9FbWJlZF9NYXBwZWRUb09u\nZT4gYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0\neUFfRW1iZWRfTWFwcGVkVG9PbmUgYSA6IGFzKSB7CiAgICAgICAgICAgIGNo\nZWNrRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZShhKTsKICAgICAgICB9CiAg\nICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIC8qCiAgICAgKiBRdWVyeSBFbnRpdHlBX0NvbGxfRW1iZWRfVG9P\nbmUKICAgICAqLwogICAgcHVibGljIHZvaWQgcXVlcnlFbnRpdHlBX0NvbGxf\nRW1iZWRfVG9PbmUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgLy8gdGVzdCBzZWxl\nY3QgZW1iZWQgb2JqZWN0IGZyb20gZWxlbWVudCBjb2xsZWN0aW9uCiAgICAg\nICAgU3RyaW5nW10gcXVlcnkgPSB7CiAgICAgICAgICAgICJzZWxlY3QgZSwg\nZS5iIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9F\nbWJlZF9Ub09uZSBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVt\nYmVkMXMpIGUgb3JkZXIgYnkgZS5uYW1lMSIsCiAgICAgICAgICAgICJzZWxl\nY3QgZSwgYS5pZCBmcm9tIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBhICIg\nKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkMXMpIGUgd2hlcmUg\nZS5iLmlkID4gMCBvcmRlciBieSBhLmlkIiwKICAgICAgICAgICAgInNlbGVj\ndCBlLCBlLmIuaWQgIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0\neUFfQ29sbF9FbWJlZF9Ub09uZSBhICIgKwogICAgICAgICAgICAgICAgIiAs\nIGluIChhLmVtYmVkMXMpIGUgd2hlcmUgZS5uYW1lMSBsaWtlICclMSciICsK\nICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZS5uYW1lMyIsCiAgICAgICAg\nICAgICJzZWxlY3QgZSwgZS5iLmlkICBmcm9tICIgKwogICAgICAgICAgICAg\nICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUgYSAiICsKICAgICAgICAg\nICAgICAgICIgLCBpbiAoYS5lbWJlZDFzKSBlIHdoZXJlIGUubmFtZTEgbGlr\nZSAnJTEnIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUiLAogICAg\nICAgICAgICAic2VsZWN0IGUsIGUuYi5pZCAgZnJvbSAiICsKICAgICAgICAg\nICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lIGEgIiArCiAgICAg\nICAgICAgICAgICAiICwgaW4gKGEuZW1iZWQxcykgZSB3aGVyZSBlLm5hbWUx\nIGxpa2UgJyUxJyBhbmQiICsKICAgICAgICAgICAgICAgICIgYS5lbWJlZDFz\nIElTIE5PVCBFTVBUWSBhbmQgIiArCiAgICAgICAgICAgICAgICAiIGUuYiBJ\nUyBOT1QgTlVMTCAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZSIs\nCiAgICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgcXVlcnkgd29ya3MgaW4g\nREIyIGJ1dCBub3QgaW4gRGVyYnk6CiAgICAgICAgICAgIC8vIGJlY2F1c2Ug\nRGVyYnkgc3VicXVlcnkgaXMgb25seSBhbGxvd2VkIHRvIAogICAgICAgICAg\nICAvLyByZXR1cm4gYSBzaW5nbGUgY29sdW1uLiAKICAgICAgICAgICAgLyoK\nICAgICAgICAgICAgInNlbGVjdCBlLCBlLmIuaWQgIGZyb20gIiArCiAgICAg\nICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBhICIgKwog\nICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkMXMpIGUgd2hlcmUgIiAr\nCiAgICAgICAgICAgICAgICAiIGV4aXN0cyAoc2VsZWN0IGEuZW1iZWQxcyBm\ncm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRf\nVG9PbmUgYSkgYW5kICIgKwogICAgICAgICAgICAgICAgIiBleGlzdHMgKHNl\nbGVjdCBlLmIgZnJvbSBhLmVtYmVkMXMgZSkgIiArCiAgICAgICAgICAgICAg\nICAiIG9yZGVyIGJ5IGUiLAogICAgICAgICAgICAqLwogICAgICAgIH07CiAg\nICAgICAgTGlzdDxPYmplY3RbXT4gcnMgPSBudWxsOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSkuZ2V0UmVzdWx0TGlz\ndCgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKHJzLnNpemUoKSA+IDApOwog\nICAgICAgICAgICBPYmplY3Qgb2JqID0gKChPYmplY3RbXSkgcnMuZ2V0KDAp\nKVswXTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvYmogaW5zdGFuY2VvZiBF\nbWJlZF9Ub09uZSk7CiAgICAgICAgICAgIGFzc2VydFRydWUoKChFbWJlZF9U\nb09uZSkgb2JqKS5nZXRFbnRpdHlCKCkgIT0gbnVsbCk7CiAgICAgICAgICAg\nIHN3aXRjaCAoaSkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAg\nICAgICBPYmplY3QgYiA9ICgoT2JqZWN0W10pIHJzLmdldCgwKSlbMV07CiAg\nICAgICAgICAgICAgICBhc3NlcnRUcnVlKGIgaW5zdGFuY2VvZiBFbnRpdHlC\nMSk7CiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoKChFbnRpdHlCMSkg\nYikuZ2V0SWQoKSwKICAgICAgICAgICAgICAgICAgICAoKEVtYmVkX1RvT25l\nKSBvYmopLmdldEVudGl0eUIoKS5nZXRJZCgpKTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVtLmNsZWFyKCk7\nCiAgICAgICAgfQogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBl\nbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAg\nICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBhIGZyb20g\nRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lIGEiKTsKICAgICAgICBMaXN0PEVu\ndGl0eUFfQ29sbF9FbWJlZF9Ub09uZT4gYXMgPSBxLmdldFJlc3VsdExpc3Qo\nKTsKICAgICAgICBmb3IgKEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBhIDog\nYXMpIHsKICAgICAgICAgICAgY2hlY2tFbnRpdHlBX0NvbGxfRW1iZWRfVG9P\nbmUoYSk7CiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAgICogUXVlcnkgRW50\naXR5QV9FbWJlZF9Ub01hbnkKICAgICAqLwogICAgcHVibGljIHZvaWQgcXVl\ncnlFbnRpdHlBX0VtYmVkX1RvTWFueSgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAv\nLyB0ZXN0IHNlbGVjdCBlbWJlZGRhYmxlCiAgICAgICAgU3RyaW5nIHF1ZXJ5\nW10gPSB7CiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBmcm9tIEVudGl0\neUFfRW1iZWRfVG9NYW55IGEiLAogICAgICAgICAgICAic2VsZWN0IGUgZnJv\nbSBFbnRpdHlBX0VtYmVkX1RvTWFueSBhIGpvaW4gYS5lbWJlZCBlIiwKICAg\nICAgICAgICAgInNlbGVjdCBiIGZyb20gRW50aXR5QV9FbWJlZF9Ub01hbnkg\nYSBqb2luIGEuZW1iZWQuYnMiICsKICAgICAgICAgICAgICAgICIgYiIsCiAg\nICAgICAgICAgICJzZWxlY3QgZSBmcm9tIEVudGl0eUFfRW1iZWRfVG9NYW55\nIGEgam9pbiBhLmVtYmVkIGUgIiArCiAgICAgICAgICAgICAgICAiIHdoZXJl\nIGUubmFtZTEgbGlrZSAnJTEnIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVt\nYmVkIGZyb20gRW50aXR5QV9FbWJlZF9Ub01hbnkgYSBPUkRFUiBCWSBhLmVt\nYmVkIiwKICAgICAgICAgICAgInNlbGVjdCBlIGZyb20gRW50aXR5QV9FbWJl\nZF9Ub01hbnkgYSBqb2luIGEuZW1iZWQgZSBPUkRFUiBCWSBlIiwKICAgICAg\nICAgICAgInNlbGVjdCBiIGZyb20gRW50aXR5QV9FbWJlZF9Ub01hbnkgYSBq\nb2luIGEuZW1iZWQuYnMiICsKICAgICAgICAgICAgICAgICIgYiBPUkRFUiBC\nWSBiIiwKICAgICAgICAgICAgInNlbGVjdCBlIGZyb20gRW50aXR5QV9FbWJl\nZF9Ub01hbnkgYSBqb2luIGEuZW1iZWQgZSAiICsKICAgICAgICAgICAgICAg\nICIgV0hFUkUgZS5icyBJUyBOT1QgRU1QVFkgT1JERVIgQlkgZSIsCiAgICAg\nICAgICAgICJzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRfVG9NYW55IGEg\nIiArCiAgICAgICAgICAgICAgICAiIFdIRVJFIGV4aXN0cyAoc2VsZWN0IGEg\nZnJvbSBFbnRpdHlBX0VtYmVkX1RvTWFueSBhIiArCiAgICAgICAgICAgICAg\nICAiIHdoZXJlIGEuZW1iZWQuYnMgSVMgTk9UIEVNUFRZKSBPUkRFUiBCWSBh\nIiwKICAgICAgICAgICAgInNlbGVjdCBhIGZyb20gRW50aXR5QV9FbWJlZF9U\nb01hbnkgYSAiICsKICAgICAgICAgICAgICAgICIgV0hFUkUgZXhpc3RzIChz\nZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRfVG9NYW55IGEiICsKICAgICAg\nICAgICAgICAgICIgd2hlcmUgYS5lbWJlZC5icyBJUyBOT1QgRU1QVFkpIE9S\nREVSIEJZIGEiLAogICAgICAgICAgICB9OwogICAgICAgIExpc3QgcnMgPSBu\ndWxsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVy\neVtpXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBhc3NlcnRUcnVl\nKHJzLnNpemUoKSA+IDApOwogICAgICAgICAgICBPYmplY3Qgb2JqID0gcnMu\nZ2V0KDApOwogICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAg\nY2FzZSAwOgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2Ug\nNDoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlIDc6CiAg\nICAgICAgICAgICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0YW5jZW9mIEVtYmVk\nX1RvTWFueSk7CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKCgoRW1iZWRf\nVG9NYW55KSBvYmopLmdldEVudGl0eUJzKCkuc2l6ZSgpID4gMCk7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAg\nICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKG9iaiBp\nbnN0YW5jZW9mIEVudGl0eUIxKTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgOToKICAgICAg\nICAgICAgICAgIGFzc2VydFRydWUob2JqIGluc3RhbmNlb2YgRW50aXR5QV9F\nbWJlZF9Ub01hbnkpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIH0KICAgICAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICB9CiAgICAg\nICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9u\nKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEgPSBl\nbS5jcmVhdGVRdWVyeSgic2VsZWN0IGEgZnJvbSBFbnRpdHlBX0VtYmVkX1Rv\nTWFueSBhIik7CiAgICAgICAgTGlzdDxFbnRpdHlBX0VtYmVkX1RvTWFueT4g\nYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFf\nRW1iZWRfVG9NYW55IGEgOiBhcykgewogICAgICAgICAgICBjaGVja0VudGl0\neUFfRW1iZWRfVG9NYW55KGEpOwogICAgICAgIH0KICAgICAgICB0cmFuLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyoKICAg\nICAqIFF1ZXJ5IEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55CiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9FbWJlZF9Ub01h\nbnkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgLy8gdGVzdCBzZWxlY3QgZW1iZWRk\nYWJsZQogICAgICAgIFN0cmluZyBxdWVyeVtdID0gewogICAgICAgICAgICAi\nc2VsZWN0IGEuZW1iZWQgZnJvbSBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFu\neSBhIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gRW50aXR5\nQV9FbWJlZF9FbWJlZF9Ub01hbnkgYSIgKwogICAgICAgICAgICAgICAgIiB3\naGVyZSBhLmVtYmVkLmVtYmVkLm5hbWUxIGxpa2UgJyUxJyAiLAogICAgICAg\nICAgICAic2VsZWN0IGEuZW1iZWQuZW1iZWQgZnJvbSBFbnRpdHlBX0VtYmVk\nX0VtYmVkX1RvTWFueSBhIiwKICAgICAgICAgICAgInNlbGVjdCBiIGZyb20g\nRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSBqb2luIGEuZW1iZWQuZW1i\nZWQuYnMiICsKICAgICAgICAgICAgICAgICIgYiIsCiAgICAgICAgICAgICJz\nZWxlY3QgYS5lbWJlZC5lbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWRf\nVG9NYW55IGEgIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlIGEuZW1iZWQu\nZW1iZWQubmFtZTEgbGlrZSAnJTEnIiwKICAgICAgICAgICAgInNlbGVjdCBl\nMiBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55IGEgIiArCiAgICAg\nICAgICAgICAgICAiIGxlZnQgam9pbiBhLmVtYmVkIGUxIGxlZnQgam9pbiBl\nMS5lbWJlZCBlMiIsCiAgICAgICAgICAgICJzZWxlY3QgZTIgZnJvbSBFbnRp\ndHlBX0VtYmVkX0VtYmVkX1RvTWFueSBhICIgKwogICAgICAgICAgICAgICAg\nIiBqb2luIGEuZW1iZWQgZTEgam9pbiBlMS5lbWJlZCBlMiIsCiAgICAgICAg\nICAgICJzZWxlY3QgYS5lbWJlZCBhcyBlIGZyb20gRW50aXR5QV9FbWJlZF9F\nbWJlZF9Ub01hbnkgYSBPUkRFUiBCWSBlIiwKICAgICAgICAgICAgInNlbGVj\ndCBhLmVtYmVkLmVtYmVkIGFzIGUgZnJvbSBFbnRpdHlBX0VtYmVkX0VtYmVk\nX1RvTWFueSBhICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBhLmVtYmVk\nLmVtYmVkLm5hbWUxIGxpa2UgJyUxJyBPUkRFUiBCWSBlIiwKICAgICAgICAg\nICAgInNlbGVjdCBhLmVtYmVkIGZyb20gRW50aXR5QV9FbWJlZF9FbWJlZF9U\nb01hbnkgYSAiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgYS5lbWJlZC5l\nbWJlZC5icyBJUyBOT1QgRU1QVFkiLAogICAgICAgICAgICAic2VsZWN0IGEu\nZW1iZWQgZnJvbSBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueSBhICIgKwog\nICAgICAgICAgICAgICAgIiB3aGVyZSBleGlzdHMgKHNlbGVjdCBhLmVtYmVk\nLmVtYmVkLmJzIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFf\nRW1iZWRfRW1iZWRfVG9NYW55IGEpIiwKICAgICAgICAgICAgInNlbGVjdCBi\nIGZyb20gRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSBqb2luIGEuZW1i\nZWQuZW1iZWQuYnMiICsKICAgICAgICAgICAgICAgICIgYiIsCiAgICAgICAg\nfTsKICAgICAgICBMaXN0IHJzID0gbnVsbDsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHJz\nID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0pLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShycy5zaXplKCkgPiAwKTsKICAgICAg\nICAgICAgT2JqZWN0IG9iaiA9IHJzLmdldCgwKTsKICAgICAgICAgICAgc3dp\ndGNoIChpKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY2Fz\nZSAxOgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgOToK\nICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGFzc2VydFRy\ndWUob2JqIGluc3RhbmNlb2YgRW1iZWRfRW1iZWRfVG9NYW55KTsKICAgICAg\nICAgICAgICAgIGFzc2VydFRydWUoKChFbWJlZF9FbWJlZF9Ub01hbnkpIG9i\naikuZ2V0RW1iZWQoKS5nZXRFbnRpdHlCcygpLgogICAgICAgICAgICAgICAg\nICAgIHNpemUoKSA+IDApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAg\nICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2Fz\nZSA4OgogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvYmogaW5zdGFuY2Vv\nZiBFbWJlZF9Ub01hbnkpOwogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgo\nKEVtYmVkX1RvTWFueSkgb2JqKS5nZXRFbnRpdHlCcygpLnNpemUoKSA+IDAp\nOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoK\nICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGFzc2VydFRy\ndWUob2JqIGluc3RhbmNlb2YgRW50aXR5QjEpOwogICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIH0gICAgICAgIAogICAgICAgICAgICBlbS5j\nbGVhcigpOwogICAgICAgIH0KICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0\ncmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2lu\nKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3Qg\nYSBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55IGEiKTsKICAgICAg\nICBMaXN0PEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55PiBhcyA9IHEuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoRW50aXR5QV9FbWJlZF9FbWJl\nZF9Ub01hbnkgYSA6IGFzKSB7CiAgICAgICAgICAgIGNoZWNrRW50aXR5QV9F\nbWJlZF9FbWJlZF9Ub01hbnkoYSk7CiAgICAgICAgfQogICAgICAgIHRyYW4u\nY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgog\nICAgICogUXVlcnkgRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIKICAgICAq\nLwogICAgcHVibGljIHZvaWQgcXVlcnlFbnRpdHlBX0VtYmVkX0NvbGxfSW50\nZWdlcigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAvLyB0ZXN0IHNlbGVjdCBlbWJl\nZCBvYmplY3QgZnJvbSBlbGVtZW50IGNvbGxlY3Rpb24gaW4gZW1iZWRkYWJs\nZSBvYmplY3QKICAgICAgICBTdHJpbmdbXSBxdWVyeSA9IHsKICAgICAgICAg\nICAgInNlbGVjdCBlLCBhLmlkIGZyb20gIiArCiAgICAgICAgICAgICAgICAi\nIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEgIiArCiAgICAgICAgICAg\nICAgICAiICwgaW4gKGEuZW1iZWQub3RoZXJJbnRWYWxzKSBlIG9yZGVyIGJ5\nIGUiLAogICAgICAgICAgICAic2VsZWN0IGUsIGEuaWQgZnJvbSAiICsKICAg\nICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIgYSAi\nICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZC5vdGhlckludFZh\nbHMpIGUgb3JkZXIgYnkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgYS5p\nZCBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0Nv\nbGxfSW50ZWdlciBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVt\nYmVkLm90aGVySW50VmFscykgZSBvcmRlciBieSBhLmlkIiwKICAgICAgICAg\nICAgInNlbGVjdCBlLCBhLmVtYmVkLmludFZhbDEgZnJvbSBFbnRpdHlBX0Vt\nYmVkX0NvbGxfSW50ZWdlciBhICIgKwogICAgICAgICAgICAgICAgIiAsIGlu\nIChhLmVtYmVkLm90aGVySW50VmFscykgZSBvcmRlciBieSBhLmlkIiwKICAg\nICAgICAgICAgInNlbGVjdCBlLCBhLmVtYmVkLmludFZhbDIgZnJvbSAiICsK\nICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIg\nYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZC5vdGhlcklu\ndFZhbHMpIGUgb3JkZXIgYnkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgZSwg\nYS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVu\ndGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEgIiArCiAgICAgICAgICAgICAg\nICAiICwgaW4gKGEuZW1iZWQub3RoZXJJbnRWYWxzKSBlICIgKwogICAgICAg\nICAgICAgICAgIiBXSEVSRSBhLmVtYmVkLm90aGVySW50VmFscyBJUyBOT1Qg\nRU1QVFkgb3JkZXIgYnkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgYS5l\nbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0\neUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEgIiArCiAgICAgICAgICAgICAgICAi\nICwgaW4gKGEuZW1iZWQub3RoZXJJbnRWYWxzKSBlICIgKwogICAgICAgICAg\nICAgICAgIiBXSEVSRSBleGlzdHMgKHNlbGVjdCBhIGZyb20gIiArCiAgICAg\nICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEgIiAr\nCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWQub3RoZXJJbnRWYWxz\nKSBlICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBlID4gMCkgb3JkZXIg\nYnkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgYTAuaW50VmFsMiBmcm9t\nIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEgIiArCiAgICAgICAgICAg\nICAgICAiSk9JTiBhLmVtYmVkIGEwIEpPSU4gYTAub3RoZXJJbnRWYWxzIGUg\nV0hFUkUgZXhpc3RzIChzZWxlY3QgYSBmcm9tICIgKwogICAgICAgICAgICAg\nICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlciBhIEpPSU4gYS5lbWJl\nZCBhMCBKT0lOIGEwLm90aGVySW50VmFscyBlICIgKwogICAgICAgICAgICAg\nICAgIiB3aGVyZSBlID4gMCkgb3JkZXIgYnkgZSIsCiAgICAgICAgfTsKICAg\nICAgICBMaXN0PE9iamVjdFtdPiBycyA9IG51bGw7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5nZXRSZXN1bHRMaXN0\nKCk7CiAgICAgICAgICAgIGFzc2VydFRydWUocnMuc2l6ZSgpID4gMCk7CiAg\nICAgICAgICAgIE9iamVjdCBvYmogPSAoKE9iamVjdFtdKSBycy5nZXQoMCkp\nWzBdOwogICAgICAgICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0YW5jZW9mIElu\ndGVnZXIpOwogICAgICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIH0KCiAg\nICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0\naW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEg\nPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGEgZnJvbSBFbnRpdHlBX0VtYmVk\nX0NvbGxfSW50ZWdlciBhIik7CiAgICAgICAgTGlzdDxFbnRpdHlBX0VtYmVk\nX0NvbGxfSW50ZWdlcj4gYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICBmb3IgKEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEgOiBhcykgewog\nICAgICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKGEp\nOwogICAgICAgIH0KICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgLyoKICAgICAqIFF1ZXJ5IEVudGl0eUFf\nRW1iZWRfRW1iZWQKICAgICAqLwogICAgcHVibGljIHZvaWQgcXVlcnlFbnRp\ndHlBX0VtYmVkX0VtYmVkKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIC8vIHRlc3Qg\nc2VsZWN0IGVtYmVkZGFibGUKICAgICAgICBTdHJpbmcgcXVlcnlbXSA9IHsK\nICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gRW50aXR5QV9FbWJl\nZF9FbWJlZCBhIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkLmVtYmVk\nIGZyb20gRW50aXR5QV9FbWJlZF9FbWJlZCBhIiwKICAgICAgICAgICAgInNl\nbGVjdCBhLmVtYmVkIGFzIGUgZnJvbSBFbnRpdHlBX0VtYmVkX0VtYmVkIGEg\nT1JERVIgQlkgZSIsCiAgICAgICAgfTsKICAgICAgICBTdHJpbmcgcXVlcnky\nW10gPSB7CiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBmcm9tIEVudGl0\neUFfRW1iZWRfRW1iZWQgYSBXSEVSRSBhLmVtYmVkLmVtYmVkICIgKwogICAg\nICAgICAgICAgICAgIiBJUyBOT1QgTlVMTCIsCiAgICAgICAgICAgICJzZWxl\nY3QgYS5lbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWQgYSAiICsgIiBX\nSEVSRSBleGlzdHMgIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgYS5l\nbWJlZC5lbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWQgYSIgKwogICAg\nICAgICAgICAgICAgIiB3aGVyZSBhLmVtYmVkIElTIE5PVCBOVUxMKSAiLAog\nICAgICAgIH07CiAgICAgICAgTGlzdCBycyA9IG51bGw7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5nZXRSZXN1bHRM\naXN0KCk7CiAgICAgICAgICAgIGFzc2VydFRydWUocnMuc2l6ZSgpID4gMCk7\nCiAgICAgICAgICAgIHN3aXRjaCAoaSkgewogICAgICAgICAgICBjYXNlIDA6\nCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGFzc2VydFRy\ndWUocnMuZ2V0KDApIGluc3RhbmNlb2YgRW1iZWRfRW1iZWQpOwogICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAg\nICAgICAgIGFzc2VydFRydWUocnMuZ2V0KDApIGluc3RhbmNlb2YgRW1iZWQp\nOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgZW0uY2xlYXIoKTsKICAgICAgICB9CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBxdWVyeTIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVl\ncnkyW2ldKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIH0gY2F0Y2go\nQXJndW1lbnRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgLy8gYXMg\nZXhwZWN0ZWQ6IGNvbXBhcmlzb24gb3ZlciBlbWJlZGRlZCBvYmplY3QgaXMg\nbm90IGFsbG93ZWQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBF\nbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsK\nICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNy\nZWF0ZVF1ZXJ5KCJzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWQg\nYSIpOwogICAgICAgIExpc3Q8RW50aXR5QV9FbWJlZF9FbWJlZD4gYXMgPSBx\nLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFfRW1iZWRf\nRW1iZWQgYSA6IGFzKSB7CiAgICAgICAgICAgIGNoZWNrRW50aXR5QV9FbWJl\nZF9FbWJlZChhKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsK\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAgKiBRdWVy\neSBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgcXVlcnlFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQoKSB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgLy8gdGVzdCBzZWxlY3QgZW1iZWQgb2JqZWN0IGZyb20g\nZWxlbWVudCBjb2xsZWN0aW9uCiAgICAgICAgU3RyaW5nW10gcXVlcnkgPSB7\nCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmlu\ndFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xs\nX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEu\nZW1iZWRzKSBlIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJz\nZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsK\nICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEg\nIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIG9yZGVy\nIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgYS5pZCBm\ncm9tIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAg\nICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBvcmRlciBieSBhLmlkIiwKICAg\nICAgICAgICAgInNlbGVjdCBlLCBhLmlkIGZyb20gRW50aXR5QV9Db2xsX0Vt\nYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1i\nZWRzKSBlIG9yZGVyIGJ5IGUgZGVzYyIsCiAgICAgICAgICAgICJzZWxlY3Qg\nZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAg\nICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAg\nICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGEuZW1i\nZWRzIElTIE5PVCBFTVBUWSAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIg\nYnkgZS5pbnRWYWwzIiwKICAgICAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBx\ndWVyeSB3b3JrcyBpbiBEQjIgYnV0IG5vdCBpbiBEZXJieSwKICAgICAgICAg\nICAgLy8gYmVjYXVzZSBEZXJieSBzdWJxdWVyeSBpcyBvbmx5IGFsbG93ZWQg\ndG8gCiAgICAgICAgICAgIC8vIHJldHVybiBhIHNpbmdsZSBjb2x1bW4uIAog\nICAgICAgICAgICAvKgogICAgICAgICAgICAic2VsZWN0IGUsIGUuaW50VmFs\nMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAgICAi\nIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAgICAg\nICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBleGlzdHMgKHNlbGVjdCBh\nLmVtYmVkcyAiICsKICAgICAgICAgICAgICAgICIgZnJvbSBFbnRpdHlBX0Nv\nbGxfRW1iZWRfRW1iZWQgYSkgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVy\nIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICovCiAgICAgICAgfTsKICAg\nICAgICBTdHJpbmdbXSBxdWVyeTIgPSB7CiAgICAgICAgICAgICJzZWxlY3Qg\nZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAg\nICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAg\nICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50\nVmFsMSA8IEFOWSAoc2VsZWN0IGUyLmludFZhbDIgIiArCiAgICAgICAgICAg\nICAgICAiIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGExLCBpbiAo\nYTEuZW1iZWRzKSBlMikgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5\nIGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwx\nLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIg\nRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAg\nICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50VmFsMSA8IEFMTCAo\nc2VsZWN0IGUyLmludFZhbDIgIiArCiAgICAgICAgICAgICAgICAiIGZyb20g\nRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGExLCBpbiAoYTEuZW1iZWRzKSBl\nMikgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIs\nCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmlu\ndFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xs\nX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEu\nZW1iZWRzKSBlIFdIRVJFIGUuaW50VmFsMSA8PSBTT01FICIgKwogICAgICAg\nICAgICAgICAgIiAoc2VsZWN0IGUyLmludFZhbDIgIiArCiAgICAgICAgICAg\nICAgICAiIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGExLCBpbiAo\nYTEuZW1iZWRzKSBlMikgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5\nIGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwx\nLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIg\nRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAg\nICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50VmFsMSA+IEFMTCAo\nc2VsZWN0IGUyLmludFZhbDIgIiArCiAgICAgICAgICAgICAgICAiIGZyb20g\nRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGExLCBpbiAoYTEuZW1iZWRzKSBl\nMikgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIs\nCiAgICAgICAgICAgIC8vIG5vbi1jb3JlbGF0ZWQgc3VicXVlcnk6CiAgICAg\nICAgICAgIC8vIEZpeGVkIGluIE9QRU5KUEEtMTE4NToga25vd24gcHJvYmxl\nbSBpbiB0YWJsZSBhbGlhcyByZXNvbHV0aW9uIGZvciBzdWJxdWVyeQogICAg\nICAgICAgICAvLyAgICAgICB0aGUgZ2VuYXJhdGVkIFNRTCBzdWJxdWVyeSBz\naG91bGQgYmUgbm9uLWNvcmVsYXRlZCwKICAgICAgICAgICAgLy8gICAgICAg\nYnV0IGdlbmVyYXRlZCBjb3JlbGF0ZWQgc3VicXVlcnkuCiAgICAgICAgICAg\nICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAi\nICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVk\nIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdI\nRVJFIGUuaW50VmFsMSA8IEFOWSAoc2VsZWN0IGUuaW50VmFsMiAiICsKICAg\nICAgICAgICAgICAgICIgZnJvbSBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQg\nYSwgaW4gKGEuZW1iZWRzKSBlKSAiICsKICAgICAgICAgICAgICAgICIgb3Jk\nZXIgYnkgZS5pbnRWYWwzIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBlLmlu\ndFZhbDEsIGUuZW1iZWQuaW50VmFsMiBmcm9tICIgKwogICAgICAgICAgICAg\nICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQgYSAiICsKICAgICAgICAg\nICAgICAgICIgLCBpbiAoYS5lbWJlZHMpIGUgV0hFUkUgZS5pbnRWYWwxIDwg\nQUxMIChzZWxlY3QgZS5pbnRWYWwyICIgKwogICAgICAgICAgICAgICAgIiBm\ncm9tIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhLCBpbiAoYS5lbWJlZHMp\nIGUpICIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBlLmludFZhbDMi\nLAogICAgICAgICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5p\nbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29s\nbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChh\nLmVtYmVkcykgZSBXSEVSRSBlLmludFZhbDEgPD0gU09NRSAiICsKICAgICAg\nICAgICAgICAgICIgKHNlbGVjdCBlLmludFZhbDIgIiArCiAgICAgICAgICAg\nICAgICAiIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEsIGluIChh\nLmVtYmVkcykgZSkgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUu\naW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBl\nLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50\naXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAi\nICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50VmFsMSA+IEFMTCAoc2Vs\nZWN0IGUuaW50VmFsMiAiICsKICAgICAgICAgICAgICAgICIgZnJvbSBFbnRp\ndHlBX0NvbGxfRW1iZWRfRW1iZWQgYSwgaW4gKGEuZW1iZWRzKSBlKSAiICsK\nICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZS5pbnRWYWwzIiwKICAgICAg\nICAgICAgLy8gY29yZWxhdGVkIHN1YnF1ZXJ5OgogICAgICAgICAgICAvLyBG\naXhlZCBpbiBPUEVOSlBBLTExODU6IGtub3duIHByb2JsZW0gaW4gdGFibGUg\nYWxpYXMgcmVzb2x1dGlvbiBmb3Igc3VicXVlcnkKICAgICAgICAgICAgLy8g\nICAgICAgdGhlIGdlbmFyYXRlZCBTUUwgc3VicXVlcnkgc2hvdWxkIGJlIGNv\ncmVsYXRlZCwKICAgICAgICAgICAgLy8gICAgICAgYnV0IGdlbmVyYXRlZCBu\nb24tY29yZWxhdGVkIHN1YnF1ZXJ5LgogICAgICAgICAgICAic2VsZWN0IGUs\nIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAg\nICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAg\nICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBlLmludFZh\nbDEgPCBBTlkgKHNlbGVjdCBlMi5pbnRWYWwyICIgKwogICAgICAgICAgICAg\nICAgIiBmcm9tIGluKGEuZW1iZWRzKSBlMikgIiArCiAgICAgICAgICAgICAg\nICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3Qg\nZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAg\nICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAg\nICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50\nVmFsMSA8IEFMTCAoc2VsZWN0IGUyLmludFZhbDIgIiArCiAgICAgICAgICAg\nICAgICAiIGZyb20gYS5lbWJlZHMgZTIpICIgKwogICAgICAgICAgICAgICAg\nIiBvcmRlciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAic2VsZWN0IGUs\nIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAg\nICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAg\nICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBlLmludFZh\nbDEgPD0gU09NRSAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBlMi5p\nbnRWYWwyICIgKwogICAgICAgICAgICAgICAgIiBmcm9tIGluKGEuZW1iZWRz\nKSBlMikgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUuaW50VmFs\nMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVk\nLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9D\nb2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4g\nKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50VmFsMSA+IEFMTCAoc2VsZWN0IGUy\nLmludFZhbDIgIiArCiAgICAgICAgICAgICAgICAiIGZyb20gYS5lbWJlZHMg\nZTIpICIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBlLmludFZhbDMi\nLAogICAgICAgIH07CiAgICAgICAgU3RyaW5nW10gcXVlcnkzID0gewogICAg\nICAgICAgICAvLyBxdWVyeSB3aXRoIHBhcmFtZXRlciBvZiBlbWJlZGRhYmxl\nIG9iamVjdAogICAgICAgICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5l\nbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0\neUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAs\nIGluIChhLmVtYmVkcykgZSBXSEVSRSA/MSBNRU1CRVIgT0YgYS5lbWJlZHMg\nIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAg\nICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZh\nbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0Vt\nYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiIGxlZnQgam9pbiBh\nLmVtYmVkcyBlIFdIRVJFID8xIE1FTUJFUiBPRiBhLmVtYmVkcyAiICsKICAg\nICAgICAgICAgICAgICIgb3JkZXIgYnkgZS5pbnRWYWwzIiwKICAgICAgICAg\nICAgInNlbGVjdCBlLCBlLmludFZhbDEsIGUuZW1iZWQuaW50VmFsMiBmcm9t\nICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRfRW1i\nZWQgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZHMpIGUg\nV0hFUkUgPzEgPSBlICIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBl\nLmludFZhbDMiLAogICAgICAgIH07CgogICAgICAgIExpc3QgcnMgPSBudWxs\nOwogICAgICAgIE9iamVjdCBvYmogPSBudWxsOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\ncnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSkuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgICAgICBhc3NlcnRUcnVlKHJzLnNpemUoKSA+IDApOwogICAg\nICAgICAgICBvYmogPSAoKE9iamVjdFtdKSBycy5nZXQoMCkpWzBdOwogICAg\nICAgICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0YW5jZW9mIEVtYmVkX0VtYmVk\nKTsKICAgICAgICB9CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVy\neTIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVR\ndWVyeShxdWVyeTJbaV0pLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAg\naWYgKHJzLnNpemUoKSA+IDApIHsKICAgICAgICAgICAgICAgIG9iaiA9ICgo\nT2JqZWN0W10pIHJzLmdldCgwKSlbMF07CiAgICAgICAgICAgICAgICBhc3Nl\ncnRUcnVlKG9iaiBpbnN0YW5jZW9mIEVtYmVkX0VtYmVkKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1\nZXJ5My5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5M1tpXSkuc2V0UGFyYW1l\ndGVyKDEsIG9iaikuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICB9IGNh\ndGNoKEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIC8v\nIGFzIGV4cGVjdGVkOiBjb21wYXJpc29uIG92ZXIgZW1iZWRkZWQgb2JqZWN0\nIGlzIG5vdCBhbGxvd2VkCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAg\nICAgIGVtLmNsZWFyKCk7CgogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRy\nYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4o\nKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBh\nIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEiKTsKICAgICAgICBM\naXN0PEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZD4gYXMgPSBxLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFfQ29sbF9FbWJlZF9FbWJl\nZCBhIDogYXMpIHsKICAgICAgICAgICAgY2hlY2tFbnRpdHlBX0NvbGxfRW1i\nZWRfRW1iZWQoYSk7CiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAgICogUXVl\ncnkgRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkKCkgewogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIC8vIHRlc3Qgc2VsZWN0IGVtYmVkIG9iamVjdCBmcm9t\nIGVsZW1lbnQgY29sbGVjdGlvbiBpbiBlbWJlZGRhYmxlIG9iamVjdAogICAg\nICAgIFN0cmluZ1tdIHF1ZXJ5ID0gewogICAgICAgICAgICAic2VsZWN0IGUs\nIGUuaW50VmFsMSwgZS5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAg\nICAiIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBhICIgKwogICAgICAgICAg\nICAgICAgIiAsIGluIChhLmVtYmVkLmVtYmVkcykgZSBvcmRlciBieSBlIiwK\nICAgICAgICAgICAgInNlbGVjdCBlLCBlLmludFZhbDEgZnJvbSAiICsKICAg\nICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkIGEgIiAr\nCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWQuZW1iZWRzKSBlIG9y\nZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgYS5p\nZCBmcm9tIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBhICIgKwogICAgICAg\nICAgICAgICAgIiAsIGluIChhLmVtYmVkLmVtYmVkcykgZSBvcmRlciBieSBh\nLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBlLmludFZhbDEsIGUuaW50\nVmFsMiBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVk\nX0NvbGxfRW1iZWQgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5l\nbWJlZC5lbWJlZHMpIGUgb3JkZXIgYnkgZS5pbnRWYWwzIiwKICAgICAgICAg\nICAgInNlbGVjdCBlLCBlLmludFZhbDEsIGUuaW50VmFsMiBmcm9tICIgKwog\nICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQgYSAi\nICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZC5lbWJlZHMpIGUg\nd2hlcmUgYS5lbWJlZC5lbWJlZHMgSVMgTk9UIEVNUFRZIiArCiAgICAgICAg\nICAgICAgICAiIG9yZGVyIGJ5IGUiLAogICAgICAgICAgICAic2VsZWN0IGUs\nIGUuaW50VmFsMSwgZS5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAg\nICAiIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBhICIgKwogICAgICAgICAg\nICAgICAgIiAsIGluIChhLmVtYmVkLmVtYmVkcykgZSB3aGVyZSBleGlzdHMg\nKHNlbGVjdCBlLmludFZhbDEgIiArCiAgICAgICAgICAgICAgICAiIGZyb20g\nRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkIGEsIGluIChhLmVtYmVkLmVtYmVk\ncykgZSAiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgZS5pbnRWYWwyID0g\nMTA1KSAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZSIsCiAgICAg\nICAgICAgICJzZWxlY3QgZSwgYSBmcm9tICIgKwogICAgICAgICAgICAgICAg\nIiBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQgYSAiICsKICAgICAgICAgICAg\nICAgICIgLCBpbiAoYS5lbWJlZC5lbWJlZHMpIGUgIiArCiAgICAgICAgICAg\nICAgICAiIHdoZXJlIGUuaW50VmFsMSA9IFNPTUUgIiArCiAgICAgICAgICAg\nICAgICAiIChzZWxlY3QgZTIuaW50VmFsMSBmcm9tICIgKwogICAgICAgICAg\nICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQgYTIgIiArCiAgICAg\nICAgICAgICAgICAiICwgaW4gKGEyLmVtYmVkLmVtYmVkcykgZTIpICIgKwog\nICAgICAgICAgICAgICAgIiBvcmRlciBieSBlIiwKICAgICAgICB9OwogICAg\nICAgIFN0cmluZ1tdIHF1ZXJ5MiA9IHsKICAgICAgICAgICAgInNlbGVjdCBl\nLCBhIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRf\nQ29sbF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVt\nYmVkLmVtYmVkcykgZSAiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgZSA9\nID8xIG9yZGVyIGJ5IGUiLAogICAgICAgIH07CiAgICAgICAgTGlzdDxPYmpl\nY3RbXT4gcnMgPSBudWxsOwogICAgICAgIEVudGl0eUFfRW1iZWRfQ29sbF9F\nbWJlZCBlYSA9IG51bGw7CiAgICAgICAgT2JqZWN0IG9iaiA9IG51bGw7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykg\newogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGFzc2VydFRydWUocnMuc2l6\nZSgpID4gMCk7CiAgICAgICAgICAgIG9iaiA9ICgoT2JqZWN0W10pIHJzLmdl\ndCgwKSlbMF07CiAgICAgICAgICAgIGFzc2VydFRydWUob2JqIGluc3RhbmNl\nb2YgRW1iZWQpOwogICAgICAgICAgICBpZiAoaSA9PSBxdWVyeS5sZW5ndGgt\nMSkKICAgICAgICAgICAgICAgIGVhID0gKEVudGl0eUFfRW1iZWRfQ29sbF9F\nbWJlZCkgKChPYmplY3RbXSkgcnMuZ2V0KDApKVsxXTsKICAgICAgICB9Cgog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkyLmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJzID0gZW0uY3Jl\nYXRlUXVlcnkocXVlcnkyW2ldKS4KICAgICAgICAgICAgICAgIHNldFBhcmFt\nZXRlcigxLCAoRW1iZWQpIG9iaikuCiAgICAgICAgICAgICAgICBnZXRSZXN1\nbHRMaXN0KCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEFyZ3VtZW50RXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgICAgIC8vIGV4cGVjdGVkIGV4Y2VwdGlv\nbjogY29tcGFyaXNvbiBvdmVyIGVtYmVkZGVkIG9iamVjdCBpcyBub3QgYWxs\nb3dlZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBhIGZyb20g\nIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJl\nZCBhICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBhLmVtYmVkID0gPzEg\nb3JkZXIgYnkgZSIpLgogICAgICAgICAgICAgICAgc2V0UGFyYW1ldGVyKDEs\nIGVhLmdldEVtYmVkKCkpLgogICAgICAgICAgICAgICAgZ2V0UmVzdWx0TGlz\ndCgpOwogICAgICAgIH0gY2F0Y2ggKEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgLy8gZXhwZWN0ZWQgZXhjZXB0aW9uOiBjb21wYXJpc29u\nIG92ZXIgZW1iZWRkZWQgb2JqZWN0IGlzIG5vdCBhbGxvd2VkCiAgICAgICAg\nfQogICAgICAgIGVtLmNsZWFyKCk7CgogICAgICAgIEVudGl0eVRyYW5zYWN0\naW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4u\nYmVnaW4oKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNl\nbGVjdCBhIGZyb20gRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkIGEiKTsKICAg\nICAgICBMaXN0PEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZD4gYXMgPSBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFfRW1iZWRfQ29s\nbF9FbWJlZCBhIDogYXMpIHsKICAgICAgICAgICAgY2hlY2tFbnRpdHlBX0Vt\nYmVkX0NvbGxfRW1iZWQoYSk7CiAgICAgICAgfQogICAgICAgIHRyYW4uY29t\nbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgY3JlYXRlT2JqTWFwS2V5KCkgewogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRGVwYXJ0bWVudHM7\nIGkrKykKICAgICAgICAgICAgY3JlYXRlRGVwYXJ0bWVudDEoZW0sIGRlcHRJ\nZCsrKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bURlcGFydG1l\nbnRzOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZURlcGFydG1lbnQyKGVtLCBk\nZXB0SWQrKyk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1EZXBh\ncnRtZW50czsgaSsrKQogICAgICAgICAgICBjcmVhdGVEZXBhcnRtZW50Myhl\nbSwgZGVwdElkKyspOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBl\nbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVPYmpNYXBL\nZXlFbnVtZXJhdGVkKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5z\nYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIEl0\nZW00IGl0ZW0gPSBuZXcgSXRlbTQoKTsKICAgICAgICBpdGVtLnNldElkKDEp\nOwogICAgICAgIEZpbGVOYW1lNCBmaWxlTmFtZTEgPSBuZXcgRmlsZU5hbWU0\nKCJmaWxlIiArIDEsICJmaWxlIiArIDEpOwogICAgICAgIGl0ZW0uYWRkSW1h\nZ2UoSXRlbTQuQ2F0YWdvcnkuQTEsIGZpbGVOYW1lMSk7CgogICAgICAgIEZp\nbGVOYW1lNCBmaWxlTmFtZTIgPSBuZXcgRmlsZU5hbWU0KCJmaWxlIiArIDIs\nICJmaWxlIiArIDIpOwogICAgICAgIGl0ZW0uYWRkSW1hZ2UoSXRlbTQuQ2F0\nYWdvcnkuQTIsIGZpbGVOYW1lMik7CgogICAgICAgIEZpbGVOYW1lNCBmaWxl\nTmFtZTMgPSBuZXcgRmlsZU5hbWU0KCJmaWxlIiArIDMsICJmaWxlIiArIDMp\nOwogICAgICAgIGl0ZW0uYWRkSW1hZ2UoSXRlbTQuQ2F0YWdvcnkuQTMsIGZp\nbGVOYW1lMyk7CgogICAgICAgIGVtLnBlcnNpc3QoaXRlbSk7CiAgICAgICAg\ndHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJh\nbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCBjcmVhdGVPYmpNYXBLZXlUZW1wb3JhbCgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0\nVHJhbnNhY3Rpb24oKTsKICAgICAgICBJdGVtNSBpdGVtID0gbmV3IEl0ZW01\nKCk7CiAgICAgICAgaXRlbS5zZXRJZCgxKTsKICAgICAgICBsb25nIHRzID0g\nU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CiAgICAgICAgVGltZXN0YW1w\nIHRzMSA9IG5ldyBUaW1lc3RhbXAodHMpOwogICAgICAgIFRpbWVzdGFtcCB0\nczIgPSBuZXcgVGltZXN0YW1wKHRzKzEwMDAwMDApOwogICAgICAgIFRpbWVz\ndGFtcCB0czMgPSBuZXcgVGltZXN0YW1wKHRzKzIwMDAwMDApOwogICAgICAg\nIAogICAgICAgIEZpbGVOYW1lNCBmaWxlTmFtZTEgPSBuZXcgRmlsZU5hbWU0\nKCJmaWxlIiArIDEsICJmaWxlIiArIDEpOwogICAgICAgIGl0ZW0uYWRkSW1h\nZ2UodHMxLCBmaWxlTmFtZTEpOwoKICAgICAgICBGaWxlTmFtZTQgZmlsZU5h\nbWUyID0gbmV3IEZpbGVOYW1lNCgiZmlsZSIgKyAyLCAiZmlsZSIgKyAyKTsK\nICAgICAgICBpdGVtLmFkZEltYWdlKHRzMiwgZmlsZU5hbWUyKTsKCiAgICAg\nICAgRmlsZU5hbWU0IGZpbGVOYW1lMyA9IG5ldyBGaWxlTmFtZTQoImZpbGUi\nICsgMywgImZpbGUiICsgMyk7CiAgICAgICAgaXRlbS5hZGRJbWFnZSh0czMs\nIGZpbGVOYW1lMyk7CgogICAgICAgIGVtLnBlcnNpc3QoaXRlbSk7CiAgICAg\nICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAg\ndHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGNyZWF0ZU9iak1hcEtleUNsYXNzKCkgewogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFu\nc2FjdGlvbigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtSXRl\nbXM7IGkrKykKICAgICAgICAgICAgY3JlYXRlSXRlbTEoZW0sIGl0ZW1JZCsr\nKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUl0ZW1zOyBpKysp\nCiAgICAgICAgICAgIGNyZWF0ZUl0ZW0yKGVtLCBpdGVtSWQrKyk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1JdGVtczsgaSsrKQogICAgICAg\nICAgICBjcmVhdGVJdGVtMyhlbSwgaXRlbUlkKyspOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgbnVtQ29tcGFueTsgaSsrKQogICAgICAgICAgICBj\ncmVhdGVDb21wYW55MShlbSwgY29tcElkKyspOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgbnVtQ29tcGFueTsgaSsrKQogICAgICAgICAgICBjcmVh\ndGVDb21wYW55MihlbSwgY29tcElkKyspOwogICAgICAgIHRyYW4uYmVnaW4o\nKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7\nCiAgICAgICAgYm9vbGVhbiBmb3VuZCA9IGZhbHNlOwogICAgICAgIGZvciAo\nU3RyaW5nIHNxbFN0ciA6IHNxbCkgewogICAgICAgICAgICBpZiAoc3FsU3Ry\nLnRvVXBwZXJDYXNlKCkuaW5kZXhPZigiSVRFTTJfWFhYIikgIT0gLTEpIHsK\nICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICB9IAogICAgICAgICAgICBpZiAoc3FsU3Ry\nLnRvVXBwZXJDYXNlKCkuaW5kZXhPZigiSVRFTTJfSU1BR0VTIikgIT0gLTEp\nIHsKICAgICAgICAgICAgICAgIGZvdW5kID0gZmFsc2U7CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBp\nZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGZhaWwoIlRhYmxlIG5hbWUgSVRF\nTTJfSU1HIHNwZWNpZmllZCBpbiB0aGUgTWFwS2V5Q29sdW1uIGFubm90YXRp\nb24gaXMgbm90IGhvbm9yZWQiKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVJdGVtMShFbnRp\ndHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBJdGVtMSBpdGVtID0g\nbmV3IEl0ZW0xKCk7CiAgICAgICAgaXRlbS5zZXRJZChpZCk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBudW1JbWFnZXNQZXJJdGVtOyBpKyspIHsK\nICAgICAgICAgICAgaXRlbS5hZGRJbWFnZSgiaW1hZ2UiICsgaWQgKyBpLCAi\nZmlsZSIgKyBpZCArIGkpOwogICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0\nKGl0ZW0pOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVJdGVt\nMihFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBJdGVtMiBp\ndGVtID0gbmV3IEl0ZW0yKCk7CiAgICAgICAgaXRlbS5zZXRJZChpZCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1JbWFnZXNQZXJJdGVtOyBp\nKyspIHsKICAgICAgICAgICAgaXRlbS5hZGRJbWFnZSgiaW1hZ2UiICsgaWQg\nKyBpLCAiZmlsZSIgKyBpZCArIGkpOwogICAgICAgIH0KICAgICAgICBlbS5w\nZXJzaXN0KGl0ZW0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUl0\nZW0zKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIEl0ZW0z\nIGl0ZW0gPSBuZXcgSXRlbTMoKTsKICAgICAgICBpdGVtLnNldElkKGlkKTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUltYWdlc1Blckl0ZW07\nIGkrKykgewogICAgICAgICAgICBpdGVtLmFkZEltYWdlKCJpbWFnZSIgKyBp\nZCArIGksICJmaWxlIiArIGlkICsgaSk7CiAgICAgICAgfQogICAgICAgIGVt\nLnBlcnNpc3QoaXRlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3JlYXRl\nQ29tcGFueTEoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAg\nQ29tcGFueTEgYyA9IG5ldyBDb21wYW55MSgpOwogICAgICAgIGMuc2V0SWQo\naWQpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRGl2aXNpb25z\nUGVyQ287IGkrKykgewogICAgICAgICAgICBEaXZpc2lvbiBkID0gY3JlYXRl\nRGl2aXNpb24oZW0sIGRpdklkKyspOwogICAgICAgICAgICBWaWNlUHJlc2lk\nZW50IHZwID0gY3JlYXRlVmljZVByZXNpZGVudChlbSwgdnBJZCsrKTsKICAg\nICAgICAgICAgYy5hZGRUb09yZ2FuaXphdGlvbihkLCB2cCk7CiAgICAgICAg\nICAgIGVtLnBlcnNpc3QoZCk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QodnAp\nOwogICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0KGMpOwogICAgfQogICAg\nCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVDb21wYW55MihFbnRpdHlNYW5hZ2Vy\nIGVtLCBpbnQgaWQpIHsKICAgICAgICBDb21wYW55MiBjID0gbmV3IENvbXBh\nbnkyKCk7CiAgICAgICAgYy5zZXRJZChpZCk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBudW1EaXZpc2lvbnNQZXJDbzsgaSsrKSB7CiAgICAgICAg\nICAgIERpdmlzaW9uIGQgPSBjcmVhdGVEaXZpc2lvbihlbSwgZGl2SWQrKyk7\nCiAgICAgICAgICAgIFZpY2VQcmVzaWRlbnQgdnAgPSBjcmVhdGVWaWNlUHJl\nc2lkZW50KGVtLCB2cElkKyspOwogICAgICAgICAgICBjLmFkZFRvT3JnYW5p\nemF0aW9uKGQsIHZwKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChkKTsKICAg\nICAgICAgICAgZW0ucGVyc2lzdCh2cCk7CiAgICAgICAgfQogICAgICAgIGVt\nLnBlcnNpc3QoYyk7CiAgICB9CgogICAgcHVibGljIERpdmlzaW9uIGNyZWF0\nZURpdmlzaW9uKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAg\nIERpdmlzaW9uIGQgPSBuZXcgRGl2aXNpb24oKTsKICAgICAgICBkLnNldElk\nKGlkKTsKICAgICAgICBkLnNldE5hbWUoImQiICsgaWQpOwogICAgICAgIHJl\ndHVybiBkOwogICAgfQogICAgCiAgICBwdWJsaWMgVmljZVByZXNpZGVudCBj\ncmVhdGVWaWNlUHJlc2lkZW50KEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkg\newogICAgICAgIFZpY2VQcmVzaWRlbnQgdnAgPSBuZXcgVmljZVByZXNpZGVu\ndCgpOwogICAgICAgIHZwLnNldElkKGlkKTsKICAgICAgICB2cC5zZXROYW1l\nKCJ2cCIgKyBpZCk7CiAgICAgICAgcmV0dXJuIHZwOwogICAgfSAgICAKCiAg\nICBwdWJsaWMgdm9pZCBjcmVhdGVEZXBhcnRtZW50MShFbnRpdHlNYW5hZ2Vy\nIGVtLCBpbnQgaWQpIHsKICAgICAgICBEZXBhcnRtZW50MSBkID0gbmV3IERl\ncGFydG1lbnQxKCk7CiAgICAgICAgZC5zZXREZXB0SWQoaWQpOwogICAgICAg\nIE1hcCBlbXBzID0gbmV3IEhhc2hNYXAoKTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IG51bUVtcGxveWVlc1BlckRlcHQ7IGkrKykgewogICAgICAg\nICAgICBFbXBsb3llZTEgZSA9IGNyZWF0ZUVtcGxveWVlMShlbSwgZW1wSWQr\nKyk7CiAgICAgICAgICAgIC8vZC5hZGRFbXBsb3llZTEoZSk7CiAgICAgICAg\nICAgIGVtcHMucHV0KGUuZ2V0RW1wSWQoKSwgZSk7CiAgICAgICAgICAgIGUu\nc2V0RGVwYXJ0bWVudChkKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChlKTsK\nICAgICAgICB9CiAgICAgICAgZC5zZXRFbXBNYXAoZW1wcyk7CiAgICAgICAg\nZW0ucGVyc2lzdChkKTsKICAgIH0KICAgIAogICAgcHVibGljIEVtcGxveWVl\nMSBjcmVhdGVFbXBsb3llZTEoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7\nCiAgICAgICAgRW1wbG95ZWUxIGUgPSBuZXcgRW1wbG95ZWUxKCk7CiAgICAg\nICAgZS5zZXRFbXBJZChpZCk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZURlcGFydG1lbnQyKEVudGl0eU1h\nbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIERlcGFydG1lbnQyIGQgPSBu\nZXcgRGVwYXJ0bWVudDIoKTsKICAgICAgICBkLnNldERlcHRJZChpZCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbXBsb3llZXNQZXJEZXB0\nOyBpKyspIHsKICAgICAgICAgICAgRW1wbG95ZWUyIGUgPSBjcmVhdGVFbXBs\nb3llZTIoZW0sIGVtcElkKyspOwogICAgICAgICAgICBkLmFkZEVtcGxveWVl\nKGUpOwogICAgICAgICAgICBlLnNldERlcGFydG1lbnQoZCk7CiAgICAgICAg\nICAgIGVtLnBlcnNpc3QoZSk7CiAgICAgICAgfQogICAgICAgIGVtLnBlcnNp\nc3QoZCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBFbXBsb3llZTIgY3JlYXRl\nRW1wbG95ZWUyKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAg\nIEVtcGxveWVlMiBlID0gbmV3IEVtcGxveWVlMigiZSIgKyBpZCwgbmV3IERh\ndGUoKSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIGNyZWF0ZURlcGFydG1lbnQzKEVudGl0eU1hbmFnZXIgZW0sIGlu\ndCBpZCkgewogICAgICAgIERlcGFydG1lbnQzIGQgPSBuZXcgRGVwYXJ0bWVu\ndDMoKTsKICAgICAgICBkLnNldERlcHRJZChpZCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBudW1FbXBsb3llZXNQZXJEZXB0OyBpKyspIHsKICAg\nICAgICAgICAgRW1wbG95ZWUzIGUgPSBjcmVhdGVFbXBsb3llZTMoZW0sIGVt\ncElkKyspOwogICAgICAgICAgICBkLmFkZEVtcGxveWVlKGUpOwogICAgICAg\nICAgICBlLnNldERlcGFydG1lbnQoZCk7CiAgICAgICAgICAgIGVtLnBlcnNp\nc3QoZSk7CiAgICAgICAgfQogICAgICAgIGVtLnBlcnNpc3QoZCk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyBFbXBsb3llZTMgY3JlYXRlRW1wbG95ZWUzKEVu\ndGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIEVtcGxveWVlMyBl\nID0gbmV3IEVtcGxveWVlMygpOwogICAgICAgIEVtcGxveWVlTmFtZTMgbmFt\nZSA9IG5ldyBFbXBsb3llZU5hbWUzKCJmIiArIGlkLCAibCIgKyBpZCk7CiAg\nICAgICAgZS5zZXRFbXBJZChpZCk7CiAgICAgICAgZS5zZXROYW1lKG5hbWUp\nOwogICAgICAgIHJldHVybiBlOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGZp\nbmRPYmpNYXBLZXkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRGVwYXJ0bWVudDEg\nZDEgPSBlbS5maW5kKERlcGFydG1lbnQxLmNsYXNzLCAxKTsKICAgICAgICBh\nc3NlcnREZXBhcnRtZW50MShkMSk7CiAgICAgICAgCiAgICAgICAgRW1wbG95\nZWUxIGUxID0gZW0uZmluZChFbXBsb3llZTEuY2xhc3MsIDEpOwogICAgICAg\nIGFzc2VydEVtcGxveWVlMShlMSk7CiAgICAgICAgCiAgICAgICAgRGVwYXJ0\nbWVudDIgZDIgPSBlbS5maW5kKERlcGFydG1lbnQyLmNsYXNzLCAzKTsKICAg\nICAgICBhc3NlcnREZXBhcnRtZW50MihkMik7CiAgICAgICAgCiAgICAgICAg\nTWFwIGVtcHMgPSBkMi5nZXRFbXBNYXAoKTsKICAgICAgICBTZXQ8RW1wbG95\nZWVQSzI+IGtleXMgPSBlbXBzLmtleVNldCgpOwogICAgICAgIGZvciAoRW1w\nbG95ZWVQSzIga2V5IDoga2V5cykgewogICAgICAgICAgICBFbXBsb3llZTIg\nZTIgPSBlbS5maW5kKEVtcGxveWVlMi5jbGFzcywga2V5KTsKICAgICAgICAg\nICAgYXNzZXJ0RW1wbG95ZWUyKGUyKTsKICAgICAgICB9CiAgICAgICAgCiAg\nICAgICAgRGVwYXJ0bWVudDMgZDMgPSBlbS5maW5kKERlcGFydG1lbnQzLmNs\nYXNzLCA1KTsKICAgICAgICBhc3NlcnREZXBhcnRtZW50MyhkMyk7CiAgICAg\nICAgCiAgICAgICAgRW1wbG95ZWUzIGUzID0gZW0uZmluZChFbXBsb3llZTMu\nY2xhc3MsIDkpOwogICAgICAgIGFzc2VydEVtcGxveWVlMyhlMyk7CiAgICAg\nICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgYXNzZXJ0RGVwYXJ0bWVudDEoRGVwYXJ0bWVudDEgZCkgewogICAg\nICAgIGludCBpZCA9IGQuZ2V0RGVwdElkKCk7CiAgICAgICAgTWFwPEludGVn\nZXIsIEVtcGxveWVlMT4gZXMgPSBkLmdldEVtcE1hcCgpOwogICAgICAgIGFz\nc2VydEVxdWFscygyLGVzLnNpemUoKSk7CiAgICAgICAgU2V0IGtleXMgPSBl\ncy5rZXlTZXQoKTsKICAgICAgICBmb3IgKE9iamVjdCBvYmogOiBrZXlzKSB7\nCiAgICAgICAgICAgIEludGVnZXIgZW1wSWQgPSAoSW50ZWdlcikgb2JqOwog\nICAgICAgICAgICBFbXBsb3llZTEgZSA9IGVzLmdldChlbXBJZCk7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscyhlbXBJZC5pbnRWYWx1ZSgpLCBlLmdldEVt\ncElkKCkpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\nYXNzZXJ0RGVwYXJ0bWVudDIoRGVwYXJ0bWVudDIgZCkgewogICAgICAgIGlu\ndCBpZCA9IGQuZ2V0RGVwdElkKCk7CiAgICAgICAgTWFwPEVtcGxveWVlUEsy\nLCBFbXBsb3llZTI+IGVzID0gZC5nZXRFbXBNYXAoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMixlcy5zaXplKCkpOwogICAgICAgIFNldDxFbXBsb3llZVBL\nMj4ga2V5cyA9IGVzLmtleVNldCgpOwogICAgICAgIGZvciAoRW1wbG95ZWVQ\nSzIgcGsgOiBrZXlzKSB7CiAgICAgICAgICAgIEVtcGxveWVlMiBlID0gZXMu\nZ2V0KHBrKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHBrLCBlLmdldEVt\ncFBLKCkpOwogICAgICAgIH0KICAgIH0gICAKCiAgICBwdWJsaWMgdm9pZCBh\nc3NlcnREZXBhcnRtZW50MyhEZXBhcnRtZW50MyBkKSB7CiAgICAgICAgaW50\nIGlkID0gZC5nZXREZXB0SWQoKTsKICAgICAgICBNYXA8RW1wbG95ZWVOYW1l\nMywgRW1wbG95ZWUzPiBlcyA9IGQuZ2V0RW1wbG95ZWVzKCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsZXMuc2l6ZSgpKTsKICAgICAgICBTZXQ8RW1wbG95\nZWVOYW1lMz4ga2V5cyA9IGVzLmtleVNldCgpOwogICAgICAgIGZvciAoRW1w\nbG95ZWVOYW1lMyBrZXkgOiBrZXlzKSB7CiAgICAgICAgICAgIEVtcGxveWVl\nMyBlID0gZXMuZ2V0KGtleSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhr\nZXksIGUuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIGFzc2VydEVtcGxveWVlMShFbXBsb3llZTEgZSkgewogICAg\nICAgIGludCBpZCA9IGUuZ2V0RW1wSWQoKTsKICAgICAgICBEZXBhcnRtZW50\nMSBkID0gZS5nZXREZXBhcnRtZW50KCk7CiAgICAgICAgYXNzZXJ0RGVwYXJ0\nbWVudDEoZCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGFzc2VydEVt\ncGxveWVlMihFbXBsb3llZTIgZSkgewogICAgICAgIEVtcGxveWVlUEsyIHBr\nID0gZS5nZXRFbXBQSygpOwogICAgICAgIERlcGFydG1lbnQyIGQgPSBlLmdl\ndERlcGFydG1lbnQoKTsKICAgICAgICBhc3NlcnREZXBhcnRtZW50MihkKTsK\nICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgYXNzZXJ0RW1wbG95ZWUzKEVt\ncGxveWVlMyBlKSB7CiAgICAgICAgaW50IGlkID0gZS5nZXRFbXBJZCgpOwog\nICAgICAgIERlcGFydG1lbnQzIGQgPSBlLmdldERlcGFydG1lbnQoKTsKICAg\nICAgICBhc3NlcnREZXBhcnRtZW50MyhkKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBxdWVyeU9iak1hcEtleSgpIHsKICAgICAgICBxdWVyeURlcGFydG1l\nbnQoZW1mKTsKICAgICAgICBxdWVyeUVtcGxveWVlKGVtZik7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RGVwYXJ0bWVudChFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFu\nc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0\ncmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcTEgPSBlbS5jcmVhdGVRdWVy\neSgic2VsZWN0IGQgZnJvbSBEZXBhcnRtZW50MSBkIik7CiAgICAgICAgTGlz\ndDxEZXBhcnRtZW50MT4gZHMxID0gcTEuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgIGZvciAoRGVwYXJ0bWVudDEgZCA6IGRzMSl7CiAgICAgICAgICAgIGFz\nc2VydERlcGFydG1lbnQxKGQpOwogICAgICAgIH0KICAgICAgICAKICAgICAg\nICBRdWVyeSBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERl\ncGFydG1lbnQyIGQiKTsKICAgICAgICBMaXN0PERlcGFydG1lbnQyPiBkczIg\nPSBxMi5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChEZXBhcnRtZW50\nMiBkIDogZHMyKXsKICAgICAgICAgICAgYXNzZXJ0RGVwYXJ0bWVudDIoZCk7\nCiAgICAgICAgfQoKICAgICAgICBRdWVyeSBxMyA9IGVtLmNyZWF0ZVF1ZXJ5\nKCJzZWxlY3QgZCBmcm9tIERlcGFydG1lbnQzIGQiKTsKICAgICAgICBMaXN0\nPERlcGFydG1lbnQzPiBkczMgPSBxMy5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgZm9yIChEZXBhcnRtZW50MyBkIDogZHMzKXsKICAgICAgICAgICAgYXNz\nZXJ0RGVwYXJ0bWVudDMoZCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAg\nIHRyYW4uY29tbWl0KCk7CgogICAgICAgIFN0cmluZyBxdWVyeVtdID0gewog\nICAgICAgICAgICAic2VsZWN0IGQgZnJvbSBEZXBhcnRtZW50MSBkIGpvaW4g\nZC5lbXBNYXAgZSAiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgS0VZKGUp\nID4gMSBvcmRlciBieSBkIiwKICAgICAgICAgICAgInNlbGVjdCBkIGZyb20g\nRGVwYXJ0bWVudDEgZCBqb2luIGQuZW1wTWFwIGUiICsKICAgICAgICAgICAg\nICAgICIgd2hlcmUgZC5kZXB0SWQgPSBLRVkoZSkgb3JkZXIgYnkgZCIsCiAg\nICAgICAgICAgICJzZWxlY3QgZCBmcm9tIERlcGFydG1lbnQxIGQgIiArCiAg\nICAgICAgICAgICAgICAiIHdoZXJlIGQuZGVwdElkIDwgQU5ZICIgKwogICAg\nICAgICAgICAgICAgIiAoc2VsZWN0IEtFWShlKSBmcm9tIGluKGQuZW1wTWFw\nKSBlKSAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZCIsCiAgICAg\nICAgICAgICJzZWxlY3QgZCBmcm9tIERlcGFydG1lbnQxIGQgIiArCiAgICAg\nICAgICAgICAgICAiIHdoZXJlIGQuZGVwdElkIDwgU09NRSAiICsKICAgICAg\nICAgICAgICAgICIgKHNlbGVjdCBLRVkoZSkgZnJvbSBEZXBhcnRtZW50MSBk\nMSwgaW4oZDEuZW1wTWFwKSBlKSAiICsKICAgICAgICAgICAgICAgICIgb3Jk\nZXIgYnkgZCIsCiAgICAgICAgfTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGRzMSA9IGVt\nLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgICAgIGFzc2VydERlcGFydG1lbnQxKGRzMS5nZXQoMCkpOwogICAgICAg\nIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHF1ZXJ5RW1wbG95ZWUoRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdl\ndFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAg\nIFF1ZXJ5IHExID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBlIGZyb20gRW1w\nbG95ZWUxIGUiKTsKICAgICAgICBMaXN0PEVtcGxveWVlMT4gZXMxID0gcTEu\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoRW1wbG95ZWUxIGUgOiBl\nczEpewogICAgICAgICAgICBhc3NlcnRFbXBsb3llZTEoZSk7CiAgICAgICAg\nfQoKICAgICAgICBRdWVyeSBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3Qg\nZSBmcm9tIEVtcGxveWVlMiBlIik7CiAgICAgICAgTGlzdDxFbXBsb3llZTI+\nIGVzMiA9IHEyLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVtcGxv\neWVlMiBlIDogZXMyKXsKICAgICAgICAgICAgYXNzZXJ0RW1wbG95ZWUyKGUp\nOwogICAgICAgIH0KCiAgICAgICAgUXVlcnkgcTMgPSBlbS5jcmVhdGVRdWVy\neSgic2VsZWN0IGUgZnJvbSBFbXBsb3llZTMgZSIpOwogICAgICAgIExpc3Q8\nRW1wbG95ZWUzPiBlczMgPSBxMy5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nZm9yIChFbXBsb3llZTMgZSA6IGVzMyl7CiAgICAgICAgICAgIGFzc2VydEVt\ncGxveWVlMyhlKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsK\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCBmaW5kT2JqTWFwS2V5Q2xhc3MoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgCiAg\nICAgICAgSXRlbTEgaXRlbTEgPSBlbS5maW5kKEl0ZW0xLmNsYXNzLCAxKTsK\nICAgICAgICBhc3NlcnRJdGVtMShpdGVtMSk7CiAgICAgICAgCiAgICAgICAg\nSXRlbTIgaXRlbTIgPSBlbS5maW5kKEl0ZW0yLmNsYXNzLCAzKTsKICAgICAg\nICBhc3NlcnRJdGVtMihpdGVtMik7CiAgICAgICAgCiAgICAgICAgSXRlbTMg\naXRlbTMgPSBlbS5maW5kKEl0ZW0zLmNsYXNzLCA1KTsKICAgICAgICBhc3Nl\ncnRJdGVtMyhpdGVtMyk7CgogICAgICAgIENvbXBhbnkxIGMxID0gZW0uZmlu\nZChDb21wYW55MS5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0Q29tcGFueTEo\nYzEpOwogICAgICAgIAogICAgICAgIENvbXBhbnkyIGMyID0gZW0uZmluZChD\nb21wYW55Mi5jbGFzcywgMyk7CiAgICAgICAgYXNzZXJ0Q29tcGFueTIoYzIp\nOwoKICAgICAgICBEaXZpc2lvbiBkID0gZW0uZmluZChEaXZpc2lvbi5jbGFz\ncywgMSk7CiAgICAgICAgYXNzZXJ0RGl2aXNpb24oZCk7CiAgICAgICAgCiAg\nICAgICAgVmljZVByZXNpZGVudCB2cCA9IGVtLmZpbmQoVmljZVByZXNpZGVu\ndC5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0VmljZVByZXNpZGVudCh2cCk7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGFzc2VydEl0ZW0xKEl0ZW0x\nIGl0ZW0pIHsKICAgICAgICBpbnQgaWQgPSBpdGVtLmdldElkKCk7CiAgICAg\nICAgTWFwIGltYWdlcyA9IGl0ZW0uZ2V0SW1hZ2VzKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKG51bUltYWdlc1Blckl0ZW0sIGltYWdlcy5zaXplKCkpOwog\nICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRJdGVtMihJdGVtMiBp\ndGVtKSB7CiAgICAgICAgaW50IGlkID0gaXRlbS5nZXRJZCgpOwogICAgICAg\nIE1hcCBpbWFnZXMgPSBpdGVtLmdldEltYWdlcygpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhudW1JbWFnZXNQZXJJdGVtLCBpbWFnZXMuc2l6ZSgpKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRJdGVtMyhJdGVtMyBpdGVtKSB7\nCiAgICAgICAgaW50IGlkID0gaXRlbS5nZXRJZCgpOwogICAgICAgIE1hcCBp\nbWFnZXMgPSBpdGVtLmdldEltYWdlcygpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhudW1JbWFnZXNQZXJJdGVtLCBpbWFnZXMuc2l6ZSgpKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBhc3NlcnRDb21wYW55MShDb21wYW55MSBjKSB7CiAg\nICAgICAgaW50IGlkID0gYy5nZXRJZCgpOwogICAgICAgIE1hcCBvcmdhbml6\nYXRpb24gPSBjLmdldE9yZ2FuaXphdGlvbigpOwogICAgICAgIGFzc2VydEVx\ndWFscygyLG9yZ2FuaXphdGlvbi5zaXplKCkpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCBhc3NlcnRDb21wYW55MihDb21wYW55MiBjKSB7CiAgICAg\nICAgaW50IGlkID0gYy5nZXRJZCgpOwogICAgICAgIE1hcCBvcmdhbml6YXRp\nb24gPSBjLmdldE9yZ2FuaXphdGlvbigpOwogICAgICAgIGFzc2VydEVxdWFs\ncygyLG9yZ2FuaXphdGlvbi5zaXplKCkpOwogICAgfSAgICAKICAgIAogICAg\ncHVibGljIHZvaWQgYXNzZXJ0RGl2aXNpb24oRGl2aXNpb24gZCkgewogICAg\nICAgIGludCBpZCA9IGQuZ2V0SWQoKTsKICAgICAgICBTdHJpbmcgbmFtZSA9\nIGQuZ2V0TmFtZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFzc2VydFZp\nY2VQcmVzaWRlbnQoVmljZVByZXNpZGVudCB2cCkgewogICAgICAgIGludCBp\nZCA9IHZwLmdldElkKCk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSB2cC5nZXRO\nYW1lKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcXVlcnlPYmpNYXBLZXlD\nbGFzcygpIHsKICAgICAgICBxdWVyeUl0ZW0oZW1mKTsKICAgICAgICBxdWVy\neUNvbXBhbnkoZW1mKTsKICAgICAgICBxdWVyeURpdmlzaW9uKGVtZik7CiAg\nICAgICAgcXVlcnlWaWNlUHJlc2lkZW50KGVtZik7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIGZpbmRPYmpNYXBLZXlFbnVtZXJhdGVkKCkgewogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIEl0ZW00IGl0ZW0gPSBlbS5maW5kKEl0ZW00LmNsYXNz\nLCAxKTsKICAgICAgICBGaWxlTmFtZTQgZmlsZU5hbWUxID0gaXRlbS5nZXRJ\nbWFnZShJdGVtNC5DYXRhZ29yeS5BMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJmaWxlMSIsIGZpbGVOYW1lMS5nZXRGTmFtZSgpKTsgICAgICAgCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJmaWxlMSIsIGZpbGVOYW1lMS5nZXRMTmFtZSgp\nKTsgICAgICAgCiAgICAgICAgCiAgICAgICAgRmlsZU5hbWU0IGZpbGVOYW1l\nMiA9IGl0ZW0uZ2V0SW1hZ2UoSXRlbTQuQ2F0YWdvcnkuQTIpOwogICAgICAg\nIGFzc2VydEVxdWFscygiZmlsZTIiLCBmaWxlTmFtZTIuZ2V0Rk5hbWUoKSk7\nICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygiZmlsZTIiLCBmaWxlTmFt\nZTIuZ2V0TE5hbWUoKSk7ICAgICAgIAogICAgICAgIAogICAgICAgIEZpbGVO\nYW1lNCBmaWxlTmFtZTMgPSBpdGVtLmdldEltYWdlKEl0ZW00LkNhdGFnb3J5\nLkEzKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImZpbGUzIiwgZmlsZU5hbWUz\nLmdldEZOYW1lKCkpOyAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoImZp\nbGUzIiwgZmlsZU5hbWUzLmdldExOYW1lKCkpOyAgICAgICAKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBmaW5kT2JqTWFwS2V5VGVtcG9yYWwoKSB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgSXRlbTUgaXRlbSA9IGVtLmZpbmQoSXRlbTUuY2xhc3Ms\nIDEpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBpdGVtLmdldEltYWdlcygp\nLnNpemUoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5T2Jq\nTWFwS2V5VGVtcG9yYWwoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgU3RyaW5nIGpw\ncWwgPSAiU0VMRUNUIFZBTFVFKGltZykgRlJPTSBJdGVtNSBpdGVtLCBJTiAo\naXRlbS5pbWFnZXMpIGltZyAiICsgCiAgICAgICAgICAgICJXSEVSRSBpbWcu\nZk5hbWUgPSA6Zk5hbWUgYW5kIGl0ZW0uaWQgPSA6aWQiOwogICAgICAgIFF1\nZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBxLnNldFBh\ncmFtZXRlcigiZk5hbWUiLCAiZmlsZTEiKTsKICAgICAgICBxLnNldFBhcmFt\nZXRlcigiaWQiLCAxKTsKICAgICAgICBMaXN0IGNvbGwgPSBxLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgY29sbC5zaXplKCkp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5SXRlbShFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFu\nc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0\ncmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcTEgPSBlbS5jcmVhdGVRdWVy\neSgic2VsZWN0IGkgZnJvbSBJdGVtMSBpIik7CiAgICAgICAgTGlzdDxJdGVt\nMT4gaXMxID0gcTEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoSXRl\nbTEgaXRlbSA6IGlzMSl7CiAgICAgICAgICAgIGFzc2VydEl0ZW0xKGl0ZW0p\nOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBRdWVyeSBxMiA9IGVtLmNy\nZWF0ZVF1ZXJ5KCJzZWxlY3QgaSBmcm9tIEl0ZW0yIGkiKTsKICAgICAgICBM\naXN0PEl0ZW0yPiBpczIgPSBxMi5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nZm9yIChJdGVtMiBpdGVtIDogaXMyKXsKICAgICAgICAgICAgYXNzZXJ0SXRl\nbTIoaXRlbSk7CiAgICAgICAgfQoKICAgICAgICBRdWVyeSBxMyA9IGVtLmNy\nZWF0ZVF1ZXJ5KCJzZWxlY3QgaSBmcm9tIEl0ZW0zIGkiKTsKICAgICAgICBM\naXN0PEl0ZW0zPiBpczMgPSBxMy5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nZm9yIChJdGVtMyBpdGVtIDogaXMzKXsKICAgICAgICAgICAgYXNzZXJ0SXRl\nbTMoaXRlbSk7CiAgICAgICAgfQoKICAgICAgICB0cmFuLmNvbW1pdCgpOwoK\nICAgICAgICBTdHJpbmcgaW1hZ2VLZXkxID0gKFN0cmluZykgaXMxLmdldCgw\nKS5nZXRJbWFnZXMoKS4KICAgICAgICAgICAga2V5U2V0KCkudG9BcnJheSgp\nWzBdOwogICAgICAgIFN0cmluZyBpbWFnZUtleTIgPSAoU3RyaW5nKSBpczIu\nZ2V0KDApLmdldEltYWdlcygpLgogICAgICAgICAgICBrZXlTZXQoKS50b0Fy\ncmF5KClbMF07CiAgICAgICAgU3RyaW5nIGltYWdlS2V5MyA9IChTdHJpbmcp\nIGlzMy5nZXQoMCkuZ2V0SW1hZ2VzKCkuCiAgICAgICAgICAgIGtleVNldCgp\nLnRvQXJyYXkoKVswXTsKICAgICAgICBTdHJpbmdbXSBxdWVyeSA9IHsKICAg\nICAgICAgICAgInNlbGVjdCBpIGZyb20gSXRlbTEgaSIgKwogICAgICAgICAg\nICAgICAgIiB3aGVyZSA/MSA9IGFueSAiICsKICAgICAgICAgICAgICAgICIg\nKHNlbGVjdCBLRVkoZSkgZnJvbSBJdGVtMSBpLCBpbihpLmltYWdlcykgZSkg\nIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGkiLAogICAgICAgICAg\nICAic2VsZWN0IGkgZnJvbSBJdGVtMSBpIiArCiAgICAgICAgICAgICAgICAi\nIHdoZXJlIGV4aXN0cyAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBl\nIGZyb20gSXRlbTEgaSwgaW4oaS5pbWFnZXMpIGUiICsKICAgICAgICAgICAg\nICAgICIgICB3aGVyZSA/MSA9IEtFWShlKSkgIiArCiAgICAgICAgICAgICAg\nICAiIG9yZGVyIGJ5IGkiLAogICAgICAgIH07CiAgICAgICAgU3RyaW5nW10g\ncXVlcnkyID0gewogICAgICAgICAgICAic2VsZWN0IGkgZnJvbSBJdGVtMiBp\nIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlID8xID0gYW55ICIgKwogICAg\nICAgICAgICAgICAgIiAoc2VsZWN0IEtFWShlKSBmcm9tIEl0ZW0yIGksIGlu\nKGkuaW1hZ2VzKSBlKSAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkg\naSIsCiAgICAgICAgICAgICJzZWxlY3QgaSBmcm9tIEl0ZW0yIGkiICsKICAg\nICAgICAgICAgICAgICIgd2hlcmUgZXhpc3RzICIgKwogICAgICAgICAgICAg\nICAgIiAoc2VsZWN0IGUgZnJvbSBJdGVtMiBpLCBpbihpLmltYWdlcykgZSIg\nKwogICAgICAgICAgICAgICAgIiAgIHdoZXJlID8xID0gS0VZKGUpKSAiICsK\nICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgaSIsCiAgICAgICAgfTsKICAg\nICAgICBTdHJpbmdbXSBxdWVyeTMgPSB7CiAgICAgICAgICAgICJzZWxlY3Qg\naSBmcm9tIEl0ZW0zIGkiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgPzEg\nPSBhbnkgIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgS0VZKGUpIGZy\nb20gSXRlbTMgaSwgaW4oaS5pbWFnZXMpIGUpICIgKwogICAgICAgICAgICAg\nICAgIiBvcmRlciBieSBpIiwKICAgICAgICAgICAgInNlbGVjdCBpIGZyb20g\nSXRlbTMgaSIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBleGlzdHMgIiAr\nCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgZSBmcm9tIEl0ZW0zIGksIGlu\nKGkuaW1hZ2VzKSBlIiArCiAgICAgICAgICAgICAgICAiICAgd2hlcmUgPzEg\nPSBLRVkoZSkpICIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBpIiwK\nICAgICAgICB9OwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVh\ndGVRdWVyeShxdWVyeVtpXSk7CiAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVy\nKDEsIGltYWdlS2V5MSk7CiAgICAgICAgICAgIGlzMSA9IHEuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgICAgICBmb3IgKEl0ZW0xIGl0ZW0gOiBpczEpewog\nICAgICAgICAgICAgICAgYXNzZXJ0SXRlbTEoaXRlbSk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVy\neTIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgUXVlcnkgcSA9IGVtLmNy\nZWF0ZVF1ZXJ5KHF1ZXJ5MltpXSk7CiAgICAgICAgICAgIHEuc2V0UGFyYW1l\ndGVyKDEsIGltYWdlS2V5Mik7CiAgICAgICAgICAgIGlzMiA9IHEuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgICAgICBmb3IgKEl0ZW0yIGl0ZW0gOiBpczIp\newogICAgICAgICAgICAgICAgYXNzZXJ0SXRlbTIoaXRlbSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBx\ndWVyeTMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgUXVlcnkgcSA9IGVt\nLmNyZWF0ZVF1ZXJ5KHF1ZXJ5M1tpXSk7CiAgICAgICAgICAgIHEuc2V0UGFy\nYW1ldGVyKDEsIGltYWdlS2V5Myk7CiAgICAgICAgICAgIGlzMyA9IHEuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgICAgICBmb3IgKEl0ZW0zIGl0ZW0gOiBp\nczMpewogICAgICAgICAgICAgICAgYXNzZXJ0SXRlbTMoaXRlbSk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBxdWVyeUNvbXBhbnkoRW50aXR5TWFuYWdlckZh\nY3RvcnkgZW1mKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rp\nb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5i\nZWdpbigpOwogICAgICAgIFF1ZXJ5IHExID0gZW0uY3JlYXRlUXVlcnkoInNl\nbGVjdCBjIGZyb20gQ29tcGFueTEgYyIpOwogICAgICAgIExpc3Q8Q29tcGFu\neTE+IGNzMSA9IHExLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKENv\nbXBhbnkxIGMgOiBjczEpewogICAgICAgICAgICBhc3NlcnRDb21wYW55MShj\nKTsKICAgICAgICB9CiAgICAgICAgUXVlcnkgcTIgPSBlbS5jcmVhdGVRdWVy\neSgic2VsZWN0IGMgZnJvbSBDb21wYW55MiBjIik7CiAgICAgICAgTGlzdDxD\nb21wYW55Mj4gY3MyID0gcTIuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZv\nciAoQ29tcGFueTIgYyA6IGNzMil7CiAgICAgICAgICAgIGFzc2VydENvbXBh\nbnkyKGMpOwogICAgICAgIH0KICAgICAgICB0cmFuLmNvbW1pdCgpOwoKICAg\nICAgICBlbS5jbGVhcigpOwogICAgICAgIC8vIHRlc3QgS0VZKGUpIGluIHN1\nYnF1ZXJ5CiAgICAgICAgRGl2aXNpb24gZDEgPSAoRGl2aXNpb24pICgoQ29t\ncGFueTEpIGNzMS5nZXQoMCkpLmdldE9yZ2FuaXphdGlvbigpLgogICAgICAg\nICAgICBrZXlTZXQoKS50b0FycmF5KClbMF07CiAgICAgICAgRGl2aXNpb24g\nZDIgPSAoRGl2aXNpb24pICgoQ29tcGFueTIpIGNzMi5nZXQoMCkpLmdldE9y\nZ2FuaXphdGlvbigpLgogICAgICAgICAgICBrZXlTZXQoKS50b0FycmF5KClb\nMF07CiAgICAgICAgU3RyaW5nW10gcXVlcnkgPSB7CiAgICAgICAgICAgICJz\nZWxlY3QgYyBmcm9tIENvbXBhbnkxIGMsIGluKGMub3JnYW5pemF0aW9uKSBk\nICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBLRVkoZCkgPSA/MSIsCiAg\nICAgICAgICAgICJzZWxlY3QgYyBmcm9tIENvbXBhbnkxIGMgIiArCiAgICAg\nICAgICAgICAgICAiIHdoZXJlID8xID0gIiArCiAgICAgICAgICAgICAgICAi\nIChzZWxlY3QgS0VZKGQpIGZyb20gQ29tcGFueTEgYywgaW4oYy5vcmdhbml6\nYXRpb24pIGQiICsKICAgICAgICAgICAgICAgICIgICB3aGVyZSBkLmlkID0g\nMSkiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgYyAiLCAgCiAgICAg\nICAgICAgICJzZWxlY3QgYyBmcm9tIENvbXBhbnkxIGMgd2hlcmUgZXhpc3Rz\nIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgZCBmcm9tIGluKGMub3Jn\nYW5pemF0aW9uKSBkIiArCiAgICAgICAgICAgICAgICAiICB3aGVyZSBLRVko\nZCkgPSA/MSkiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgYyAiLCAg\nCiAgICAgICAgICAgICJzZWxlY3QgYyBmcm9tIENvbXBhbnkxIGMgd2hlcmUg\nZXhpc3RzIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgZCBmcm9tIGMu\nb3JnYW5pemF0aW9uIGQiICsKICAgICAgICAgICAgICAgICIgIHdoZXJlIEtF\nWShkKSA9ID8xKSIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBjICIs\nICAKICAgICAgICB9OwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVl\ncnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgUXVlcnkgcSA9IGVtLmNy\nZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKTsKICAgICAgICAgICAgcS5zZXRQYXJhbWV0\nZXIoMSwgZDEpOwogICAgICAgICAgICBjczEgPSBxLmdldFJlc3VsdExpc3Qo\nKTsKICAgICAgICAgICAgZm9yIChDb21wYW55MSBjIDogY3MxKXsKICAgICAg\nICAgICAgICAgIGFzc2VydENvbXBhbnkxKGMpOwogICAgICAgICAgICB9CiAg\nICAgICAgfQoKICAgICAgICBTdHJpbmdbXSBxdWVyeTIgPSB7CiAgICAgICAg\nICAgICJzZWxlY3QgYyBmcm9tIENvbXBhbnkyIGMiICsKICAgICAgICAgICAg\nICAgICIgd2hlcmUgPzEgPSAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVj\ndCBLRVkoZCkgZnJvbSBDb21wYW55MiBjLCBpbihjLm9yZ2FuaXphdGlvbikg\nZCIgKwogICAgICAgICAgICAgICAgIiAgIHdoZXJlIGQuaWQgPSAzKSIgKwog\nICAgICAgICAgICAgICAgIiBvcmRlciBieSBjICIsICAKICAgICAgICAgICAg\nInNlbGVjdCBjIGZyb20gQ29tcGFueTIgYyB3aGVyZSBleGlzdHMiICsKICAg\nICAgICAgICAgICAgICIgKHNlbGVjdCBkIGZyb20gaW4oYy5vcmdhbml6YXRp\nb24pIGQiICsKICAgICAgICAgICAgICAgICIgIHdoZXJlIEtFWShkKSA9ID8x\nKSIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBjICIsICAKICAgICAg\nICAgICAgInNlbGVjdCBjIGZyb20gQ29tcGFueTIgYyB3aGVyZSBleGlzdHMi\nICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBkIGZyb20gYy5vcmdhbml6\nYXRpb24gZCIgKwogICAgICAgICAgICAgICAgIiAgd2hlcmUgS0VZKGQpID0g\nPzEpIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGMgIiwgIAogICAg\nICAgIH07CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkyLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVR\ndWVyeShxdWVyeTJbaV0pOwogICAgICAgICAgICBxLnNldFBhcmFtZXRlcigx\nLCBkMik7CiAgICAgICAgICAgIGNzMiA9IHEuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgICAgICBmb3IgKENvbXBhbnkyIGMgOiBjczIpewogICAgICAgICAg\nICAgICAgYXNzZXJ0Q29tcGFueTIoYyk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBxdWVyeURpdmlzaW9uKEVudGl0eU1hbmFnZXJGYWN0b3J5IGVtZikgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5n\nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAg\nICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRGl2\naXNpb24gZCIpOwogICAgICAgIExpc3Q8RGl2aXNpb24+IGRzID0gcS5nZXRS\nZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChEaXZpc2lvbiBkIDogZHMpewog\nICAgICAgICAgICBhc3NlcnREaXZpc2lvbihkKTsKICAgICAgICB9CiAgICAg\nICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHF1ZXJ5VmljZVByZXNpZGVudChFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFu\nc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0\ncmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5\nKCJzZWxlY3QgdnAgZnJvbSBWaWNlUHJlc2lkZW50IHZwIik7CiAgICAgICAg\nTGlzdDxWaWNlUHJlc2lkZW50PiB2cHMgPSBxLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICBmb3IgKFZpY2VQcmVzaWRlbnQgdnAgOiB2cHMpewogICAgICAg\nICAgICBhc3NlcnRWaWNlUHJlc2lkZW50KHZwKTsKICAgICAgICB9CiAgICAg\nICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQog\nICAgCiAgICAvKioKICAgICAqIFRvIHJ1biB0aGlzIG1ldGhvZCBvbiBPcmFj\nbGUgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSB0aGUgYXV0aG9yaXR5CiAg\nICAgKiB0byBjcmVhdGUgdHJpZ2dlcnMuICBleC4gIEdSQU5UIENSRUFURSBU\nUklHR0VSIFRPICJTQ09UVCIKICAgICAqLwogICAgcHVibGljIHZvaWQgY3Jl\nYXRlRW1iZWRkYWJsZUNvbnRhaW5pbmdSZWxhdGlvbldpdGhHZW5lcmF0ZWRL\nZXkoKSAKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgCiAgICAgICAgT3BlbkpQQUVudGl0eU1h\nbmFnZXJTUEkgb2plbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlclNQSSllbTsK\nICAgICAgICBKREJDQ29uZmlndXJhdGlvbiBjb25mID0gKEpEQkNDb25maWd1\ncmF0aW9uKSBvamVtLmdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBEQkRp\nY3Rpb25hcnkgZGljdCA9IGNvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2Uo\nKTsKICAgICAgICBpZiAoZGljdCBpbnN0YW5jZW9mIE9yYWNsZURpY3Rpb25h\ncnkpIHsKICAgICAgICAgICAgcmVjcmVhdGVPcmFjbGVBcnRpZmFjdHMoKE9y\nYWNsZURpY3Rpb25hcnkpZGljdCwgY29uZik7ICAgICAgICAgICAgICAgIAog\nICAgICAgIH0KICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0u\nZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICAKICAgICAgICBCb29rIGIgPSBu\nZXcgQm9vaygxNTkwNTk2NDU1KTsKICAgICAgICBTZWxsZXIgYm9iID0gbmV3\nIFNlbGxlcigiQm9iJ3MgYm9va3MhIik7CiAgICAgICAgU2VsbGVyIGppbSA9\nIG5ldyBTZWxsZXIoIkppbSdzIGJvb2tzISIpOwogICAgICAgIFNlbGxlciBt\naWtlID0gbmV3IFNlbGxlcigiTWlrZXMncyBib29rcyEiKTsKICAgICAgICBi\nLmFkZExpc3RpbmcobmV3IExpc3RpbmcoYm9iICwgNDQuMTUpKTsKICAgICAg\nICBiLmFkZExpc3RpbmcobmV3IExpc3RpbmcoamltICwgMzQuMTUpKTsKICAg\nICAgICBiLmFkZExpc3RpbmcobmV3IExpc3RpbmcobWlrZSAsIDE0LjE1KSk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAg\nIGVtLnBlcnNpc3QoYik7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICBpbnQgaWQgPSBiLmdldElkKCk7CiAgICAgICAg\nZW0uY2xlYXIoKTsKICAgICAgICBCb29rIGIyID0gZW0uZmluZChCb29rLmNs\nYXNzLCBpZCk7CiAgICAgICAgU2V0PExpc3Rpbmc+IGxpc3RpbmdzID0gYjIu\nZ2V0TGlzdGluZ3MoKTsKICAgICAgICBmb3IgKExpc3RpbmcgbGlzdGluZyA6\nIGxpc3RpbmdzKSB7CiAgICAgICAgICAgIFNlbGxlciBzZWxsZXIgPSBsaXN0\naW5nLmdldFNlbGxlcigpOwogICAgICAgICAgICBhc3NlcnROb3ROdWxsKHNl\nbGxlcik7CiAgICAgICAgICAgIGFzc2VydFRydWUoc2VsbGVyLmdldElkKCkg\nIT0gMCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qCiAgICAgKiBUaGlzIG1l\ndGhvZCB1c2VzIHRoZSBtYXBwaW5nIHRvb2wgdG8gcmVnZW5lcmF0ZSBPcmFj\nbGUgZGIgYXJ0aWZhY3RzCiAgICAgKiB3aXRoIHRoZSB1c2VUcmlnZ2Vyc0Zv\nckF1dG9Bc3NpZ24gZGIgb3B0aW9uIGVuYWJsZWQuCiAgICAgKi8KICAgIHBy\naXZhdGUgdm9pZCByZWNyZWF0ZU9yYWNsZUFydGlmYWN0cyhPcmFjbGVEaWN0\naW9uYXJ5IGRpY3QsIAogICAgICAgIEpEQkNDb25maWd1cmF0aW9uIGNvbmYp\nIHRocm93cyBJT0V4Y2VwdGlvbiwgU1FMRXhjZXB0aW9uIHsKICAgICAgICBk\naWN0LnVzZVRyaWdnZXJzRm9yQXV0b0Fzc2lnbiA9IHRydWU7CiAgICAgICAg\nRmxhZ3MgZmxhZ3MgPSBuZXcgTWFwcGluZ1Rvb2wuRmxhZ3MoKTsKICAgICAg\nICBmbGFncy5kcm9wVGFibGVzID0gdHJ1ZTsKICAgICAgICBmbGFncy5zY2hl\nbWFBY3Rpb24gPSAiZHJvcCxhZGQiOwogICAgICAgIGZsYWdzLnNlcXVlbmNl\ncyA9IHRydWU7CiAgICAgICAgZmxhZ3MuaWdub3JlRXJyb3JzID0gdHJ1ZTsK\nICAgICAgICBmbGFncy5kcm9wU2VxdWVuY2VzID0gdHJ1ZTsKICAgICAgICBN\nYXBwaW5nVG9vbC5ydW4oIAogICAgICAgICAgICBjb25mLCAKICAgICAgICAg\nICAgbmV3IFN0cmluZ1tdIHsgIm9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5lbWJlZC5Cb29rIiB9LAogICAgICAgICAgICBmbGFncywKICAgICAg\nICAgICAgY29uZi5nZXRDbGFzc1Jlc29sdmVySW5zdGFuY2UoKS4KICAgICAg\nICAgICAgZ2V0Q2xhc3NMb2FkZXIoTWFwcGluZ1Rvb2wuY2xhc3MsIG51bGwp\nKTsgICAgICAgIAogICAgfQoKICAgIC8qCiAgICAgKiBFbnRpdHlBX0VtYmVk\nX0NvbXBsZXggcm91dGluZXMKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVz\ndEVudGl0eUFfRW1iZWRfQ29tcGxleCgpIHsKICAgICAgICBnZXRMb2coKS50\ncmFjZSgidGVzdEVudGl0eUFfRW1iZWRfQ29tcGxleCgpIC0gZW50ZXJlZCIp\nOwogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRfQ29tcGxleChudWxsKTsK\nICAgICAgICBxdWVyeUVudGl0eUFfRW1iZWRfQ29tcGxleChudWxsKTsKICAg\nICAgICBmaW5kRW50aXR5QV9FbWJlZF9Db21wbGV4KG51bGwpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RFbnRpdHlBX0VtYmVkX0NvbXBsZXgyKCkg\newogICAgICAgIGdldExvZygpLnRyYWNlKCJ0ZXN0RW50aXR5QV9FbWJlZF9D\nb21wbGV4MigpIC0gZW50ZXJlZCIpOwogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmNs\nZWFyKCk7CiAgICAgICAgY3JlYXRlRW50aXR5QV9FbWJlZF9Db21wbGV4KGVt\nKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIC8vcXVlcnlFbnRpdHlB\nX0VtYmVkX0NvbXBsZXgoZW0pOwogICAgICAgIC8vZW0uY2xlYXIoKTsKICAg\nICAgICBmaW5kRW50aXR5QV9FbWJlZF9Db21wbGV4KGVtKTsKICAgICAgICBl\nbS5jbGVhcigpOwogICAgICAgIHVwZGF0ZUVudGl0eUFfRW1iZWRfQ29tcGxl\neChlbSk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICBmaW5kRW50aXR5\nQV9FbWJlZF9Db21wbGV4KGVtKTsKICAgICAgICBlbS5jbGVhcigpOwogICAg\nICAgIHJlbW92ZUVudGl0eUFfRW1iZWRfQ29tcGxleChlbSk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRp\ndHlBX0VtYmVkX0NvbXBsZXgoRW50aXR5TWFuYWdlciBlbSkgewogICAgICAg\nIEJvb2xlYW4gZW1DbG9zZSA9IGZhbHNlOwogICAgICAgIGlmIChlbSA9PSBu\ndWxsKSB7CiAgICAgICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICAgICAgZW1DbG9zZSA9IHRydWU7CiAgICAgICAgfQog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBj\ncmVhdGVFbnRpdHlBX0VtYmVkX0NvbXBsZXgoZW0sIElEKTsKICAgICAgICAv\nL2VtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5mbHVz\naCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAg\nICAgICAgaWYgKGVtQ2xvc2UpIHsKICAgICAgICAgICAgZW0uY2xvc2UoKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5\nQV9FbWJlZF9Db21wbGV4KEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewog\nICAgICAgIGdldExvZygpLnRyYWNlKCJjcmVhdGVFbnRpdHlBX0VtYmVkX0Nv\nbXBsZXgoKSAtIGVudGVyZWQiKTsKICAgICAgICBFbnRpdHlBX0VtYmVkX0Nv\nbXBsZXggYSA9IG5ldyBFbnRpdHlBX0VtYmVkX0NvbXBsZXgoKTsKICAgICAg\nICBhLnNldElkKGlkKTsKICAgICAgICBhLnNldE5hbWUoImEiICsgaWQpOwog\nICAgICAgIGEuc2V0QWdlKGlkKTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IG51bUJhc2ljVHlwZXM7IGkrKykgewogICAgICAgICAgICBhLmFkZE5p\nY2tOYW1lKCJuaWNrTmFtZV8iICsgaWQgKyBpKTsKICAgICAgICB9CiAgICAg\nICAgYS5hZGRDcmVkaXRSYXRpbmcoRW50aXR5QV9FbWJlZF9Db21wbGV4LkNy\nZWRpdFJhdGluZy5QT09SKTsKICAgICAgICBhLmFkZFRpbWVzdGFtcChuZXcg\nVGltZXN0YW1wKGNhbC5nZXRUaW1lSW5NaWxsaXMoKSkpOwogICAgICAgIGEu\nYWRkTG9iKCJsb2JfMCIpOwogICAgICAgIGEuc2V0RW1iZWQoY3JlYXRlRW1i\nZWRfRW1iZWQoZW0sIG51bUVtYmVkZGFibGVzLCAwKSk7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBudW1FbWJlZGRhYmxlczsgaSsrKSB7CiAgICAg\nICAgICAgIEVtYmVkX0VtYmVkIGVtYmVkID0gY3JlYXRlRW1iZWRfRW1iZWQo\nZW0sIGlkLCBpKTsKICAgICAgICAgICAgYS5hZGRFbWJlZChlbWJlZCk7CiAg\nICAgICAgfQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRW1iZWRk\nYWJsZXM7IGkrKykgewogICAgICAgICAgICBFbWJlZF9Ub09uZSBlbWJlZCA9\nIGNyZWF0ZUVtYmVkX1RvT25lKGVtLCBpK2lkKTsKICAgICAgICAgICAgYS5h\nZGRFbWJlZDFUb09uZXMoZW1iZWQpOwogICAgICAgIH0KICAgICAgICBhLnNl\ndFRyYW5zaWVudEphdmFWYWx1ZSh0aW1lSGFzaCk7CiAgICAgICAgYS5zZXRU\ncmFuc2llbnRWYWx1ZSh0aW1lSGFzaCk7CiAgICAgICAgZW0ucGVyc2lzdChh\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjaGVja0VudGl0eUFfRW1iZWRf\nQ29tcGxleChFbnRpdHlBX0VtYmVkX0NvbXBsZXggYSkgewogICAgICAgIGdl\ndExvZygpLnRyYWNlKCJjaGVja0VudGl0eUFfRW1iZWRfQ29tcGxleCgpIC0g\nZW50ZXJlZCIpOwogICAgICAgIGludCBpZCA9IGEuZ2V0SWQoKTsKICAgICAg\nICBTdHJpbmcgbmFtZSA9IGEuZ2V0TmFtZSgpOwogICAgICAgIGludCBhZ2Ug\nPSBhLmdldEFnZSgpOwogICAgICAgIGFzc2VydEVxdWFscyhJRCwgaWQpOwog\nICAgICAgIGFzc2VydEVxdWFscygiYSIgKyBpZCAsbmFtZSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKElELCBhZ2UpOwogICAgICAgIFNldDxTdHJpbmc+IG5p\nY2tOYW1lcyA9IGEuZ2V0Tmlja05hbWVzKCk7CiAgICAgICAgZm9yIChTdHJp\nbmcgbmlja05hbWUgOiBuaWNrTmFtZXMpIHsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJuaWNrTmFtZV8iICsgaWQgKyAiMCIsIG5pY2tOYW1lKTsKICAg\nICAgICB9CiAgICAgICAgTGlzdDxFbnRpdHlBX0VtYmVkX0NvbXBsZXguQ3Jl\nZGl0UmF0aW5nPiBjciA9IGEuZ2V0Q3JlZGl0UmF0aW5nKCk7CiAgICAgICAg\nZm9yIChFbnRpdHlBX0VtYmVkX0NvbXBsZXguQ3JlZGl0UmF0aW5nIGMgOiBj\ncikgewogICAgICAgICAgICBhc3NlcnRFcXVhbHMoIlBPT1IiLCBjLnRvU3Ry\naW5nKCkpOwogICAgICAgIH0KICAgICAgICBMaXN0PFRpbWVzdGFtcD4gdHN0\nYW1wcyA9IGEuZ2V0VGltZXN0YW1wcygpOwogICAgICAgIGZvciAoVGltZXN0\nYW1wIHRzIDogdHN0YW1wcykgewogICAgICAgICAgICBhc3NlcnROb3RFcXVh\nbHMoMCwgdHMuZ2V0VGltZSgpKTsKICAgICAgICB9CiAgICAgICAgTGlzdDxT\ndHJpbmc+IGxvYnMgPSBhLmdldExvYnMoKTsKICAgICAgICBpbnQgaSA9IDA7\nCiAgICAgICAgZm9yIChTdHJpbmcgbG9iIDogbG9icykgewogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoImxvYl8iICsgaSsrLCBsb2IpOwogICAgICAgIH0K\nICAgICAgICBFbWJlZF9FbWJlZCBlbWJlZGRlZCA9IGEuZ2V0RW1iZWQoKTsK\nICAgICAgICBjaGVja0VtYmVkX0VtYmVkKGVtYmVkZGVkKTsKICAgICAgICBM\naXN0PEVtYmVkX0VtYmVkPiBlbWJlZHMgPSBhLmdldEVtYmVkcygpOwogICAg\nICAgIGZvciAoRW1iZWRfRW1iZWQgZW1iZWQgOiBlbWJlZHMpIHsKICAgICAg\nICAgICAgY2hlY2tFbWJlZF9FbWJlZChlbWJlZCk7CiAgICAgICAgfQogICAg\nICAgIFNldDxFbWJlZF9Ub09uZT4gZW1iZWRPbmVzID0gYS5nZXRFbWJlZDFU\nb09uZXMoKTsKICAgICAgICBmb3IgKEVtYmVkX1RvT25lIGVtYmVkIDogZW1i\nZWRPbmVzKSB7CiAgICAgICAgICAgIGNoZWNrRW1iZWRfVG9PbmUoZW1iZWQp\nOwogICAgICAgIH0KICAgICAgICBhc3NlcnROb3RFcXVhbHMoYS5nZXRUcmFu\nc2llbnRKYXZhVmFsdWUoKSwgdGltZUhhc2gpOwogICAgICAgIGFzc2VydE5v\ndEVxdWFscyhhLmdldFRyYW5zaWVudFZhbHVlKCksIHRpbWVIYXNoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBmaW5kRW50aXR5QV9FbWJlZF9Db21wbGV4\nKEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBCb29sZWFuIGVtQ2xvc2Ug\nPSBmYWxzZTsKICAgICAgICBnZXRMb2coKS50cmFjZSgiZmluZEVudGl0eUFf\nRW1iZWRfQ29tcGxleCgpIC0gZW50ZXJlZCIpOwogICAgICAgIGlmIChlbSA9\nPSBudWxsKSB7CiAgICAgICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICAgICAgZW1DbG9zZSA9IHRydWU7CiAgICAgICAg\nfQogICAgICAgIEVudGl0eUFfRW1iZWRfQ29tcGxleCBhID0gZW0uZmluZChF\nbnRpdHlBX0VtYmVkX0NvbXBsZXguY2xhc3MsIElEKTsKICAgICAgICBjaGVj\na0VudGl0eUFfRW1iZWRfQ29tcGxleChhKTsKICAgICAgICBpZiAoZW1DbG9z\nZSkgewogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB1cGRhdGVFbnRpdHlBX0VtYmVkX0NvbXBsZXgo\nRW50aXR5TWFuYWdlciBlbSkgewogICAgICAgIEJvb2xlYW4gZW1DbG9zZSA9\nIGZhbHNlOwogICAgICAgIGdldExvZygpLnRyYWNlKCJ1cGRhdGVFbnRpdHlB\nX0VtYmVkX0NvbXBsZXgoKSAtIGVudGVyZWQiKTsKICAgICAgICBpZiAoZW0g\nPT0gbnVsbCkgewogICAgICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgICAgIGVtQ2xvc2UgPSB0cnVlOwogICAgICAg\nIH0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgRW50aXR5QV9FbWJlZF9Db21wbGV4IGEgPSBlbS5maW5kKEVudGl0eUFf\nRW1iZWRfQ29tcGxleC5jbGFzcywgSUQpOwogICAgICAgIGNoZWNrRW50aXR5\nQV9FbWJlZF9Db21wbGV4KGEpOwogICAgICAgIGZvciAoaW50IGkgPSAxOyBp\nIDwgbnVtRW1iZWRkYWJsZXM7IGkrKykgewogICAgICAgICAgICBhLmFkZExv\nYigibG9iXyIgKyBpKTsKICAgICAgICB9CiAgICAgICAgYS5zZXRUcmFuc2ll\nbnRKYXZhVmFsdWUoMjAwOSk7CiAgICAgICAgYS5zZXRUcmFuc2llbnRWYWx1\nZSgyMDA5KTsKICAgICAgICBlbS5wZXJzaXN0KGEpOwogICAgICAgIGVtLmZs\ndXNoKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsK\nICAgICAgICBpZiAoZW1DbG9zZSkgewogICAgICAgICAgICBlbS5jbG9zZSgp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZW1vdmVFbnRp\ndHlBX0VtYmVkX0NvbXBsZXgoRW50aXR5TWFuYWdlciBlbSkgewogICAgICAg\nIEJvb2xlYW4gZW1DbG9zZSA9IGZhbHNlOwogICAgICAgIGdldExvZygpLnRy\nYWNlKCJyZW1vdmVFbnRpdHlBX0VtYmVkX0NvbXBsZXgoKSAtIGVudGVyZWQi\nKTsKICAgICAgICBpZiAoZW0gPT0gbnVsbCkgewogICAgICAgICAgICBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIGVtQ2xv\nc2UgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgRW50aXR5QV9FbWJlZF9Db21wbGV4IGEg\nPSBlbS5maW5kKEVudGl0eUFfRW1iZWRfQ29tcGxleC5jbGFzcywgSUQpOwog\nICAgICAgIGNoZWNrRW50aXR5QV9FbWJlZF9Db21wbGV4KGEpOwogICAgICAg\nIGVtLnJlbW92ZShhKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIo\nKTsKICAgICAgICBhID0gZW0uZmluZChFbnRpdHlBX0VtYmVkX0NvbXBsZXgu\nY2xhc3MsIElEKTsKICAgICAgICBhc3NlcnROdWxsKCJFbnRpdHkgc2hvdWxk\nIG5vIGxvbmdlciBleGlzdCIsIGEpOwogICAgICAgIGlmIChlbUNsb3NlKSB7\nCiAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9Db21wbGV4KEVudGl0\neU1hbmFnZXIgZW0pIHsKICAgICAgICBCb29sZWFuIGVtQ2xvc2UgPSBmYWxz\nZTsKICAgICAgICBnZXRMb2coKS50cmFjZSgicXVlcnlFbnRpdHlBX0VtYmVk\nX0NvbXBsZXgoKSAtIGVudGVyZWQiKTsKICAgICAgICBpZiAoZW0gPT0gbnVs\nbCkgewogICAgICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgICAgIGVtQ2xvc2UgPSB0cnVlOwogICAgICAgIH0KICAg\nICAgICBTdHJpbmdbXSBxdWVyeSA9IHsKICAgICAgICAgICAgInNlbGVjdCBl\nIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29t\ncGxleCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLm5pY2tOYW1l\ncykgZSBvcmRlciBieSBhLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBlIGZy\nb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29tcGxl\neCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLm5pY2tOYW1lcykg\nZSBvcmRlciBieSBhLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBlIGZyb20g\nIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29tcGxleCBh\nICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLm5pY2tOYW1lcykgZSBv\ncmRlciBieSBlIiwKICAgICAgICAgICAgInNlbGVjdCBhIGZyb20gIiArCiAg\nICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29tcGxleCBhICIgKwog\nICAgICAgICAgICAgICAgIiBXSEVSRSBhLm5pY2tOYW1lcyBJUyBFTVBUWSBv\ncmRlciBieSBhIiwKICAgICAgICAgICAgInNlbGVjdCBhIGZyb20gIiArCiAg\nICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29tcGxleCBhICIgKwog\nICAgICAgICAgICAgICAgIiBXSEVSRSBleGlzdHMgKHNlbGVjdCBuIGZyb20g\nRW50aXR5QV9FbWJlZF9Db21wbGV4IGEsICIgKwogICAgICAgICAgICAgICAg\nIiBpbiAoYS5uaWNrTmFtZXMpIG4gd2hlcmUgbiBsaWtlICclMScpICIgKwog\nICAgICAgICAgICAgICAgIiBvcmRlciBieSBhIiwKICAgICAgICB9OwogICAg\nICAgIExpc3QgcnMgPSBudWxsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcnMgPSBlbS5j\ncmVhdGVRdWVyeShxdWVyeVtpXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAg\nICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAg\nICAgIGFzc2VydFRydWUocnMuc2l6ZSgpID4gMCk7CiAgICAgICAgICAgICAg\nICBPYmplY3Qgb2JqID0gcnMuZ2V0KDApOwogICAgICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZShvYmogaW5zdGFuY2VvZiBTdHJpbmcpOwogICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2Fz\nZSA0OgogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZShycy5zaXplKCkgPT0g\nMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW0uY2xlYXIoKTsKICAg\nICAgICB9CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGEgZnJv\nbSBFbnRpdHlBX0VtYmVkX0NvbXBsZXggYSIpOwogICAgICAgIExpc3Q8RW50\naXR5QV9FbWJlZF9Db21wbGV4PiBhcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIGZvciAoRW50aXR5QV9FbWJlZF9Db21wbGV4IGEgOiBhcykgewog\nICAgICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRfQ29tcGxleChhKTsKICAg\nICAgICB9CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsK\nICAgICAgICBpZiAoZW1DbG9zZSkgewogICAgICAgICAgICBlbS5jbG9zZSgp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKgogICAgICogRW50aXR5QV9FbWJl\nZF9Db21wbGV4IHJvdXRpbmVzCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRl\nc3RFbWJlZGRhYmxlQ29sbFVzaW5nQXJyYXlzQXNMaXN0KCkgewogICAgICAg\nIGdldExvZygpLnRyYWNlKCJ0ZXN0RW1iZWRkYWJsZUNvbGxVc2luZ0FycmF5\nc0FzTGlzdCgpIC0gZW50ZXJlZCIpOwogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0\neVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAg\nICAgIEVtYmVkX0VtYmVkW10gZW1iZWRBcnJheSA9IG5ldyBFbWJlZF9FbWJl\nZFs1XTsKICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IDU7IGkrKykgewog\nICAgICAgICAgZW1iZWRBcnJheVtpXSA9IG5ldyBFbWJlZF9FbWJlZCgpOwog\nICAgICAgICAgZW1iZWRBcnJheVtpXS5zZXRJbnRWYWwxKGkpOwogICAgICAg\nIH0KICAgICAgICAKICAgICAgICBMaXN0IGVtYmVkTGlzdCA9IEFycmF5cy5h\nc0xpc3QoZW1iZWRBcnJheSk7CiAgICAgICAgRW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkIGExID0gbmV3IEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCgpOwog\nICAgICAgIGExLnNldElkKDEpOwogICAgICAgIGExLnNldEFnZSgxKTsKICAg\nICAgICBhMS5zZXROYW1lKCJuYW1lIiArIDEpOwogICAgICAgIGExLnNldEVt\nYmVkcyhlbWJlZExpc3QpOwogICAgICAgIAogICAgICAgIGVtLnBlcnNpc3Qo\nYTEpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgp\nOwogICAgICAgIHRyYW4uY29tbWl0KCk7CgogICAgICAgIC8vdXBkYXRlCiAg\nICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIEVtYmVkX0VtYmVkIGVtYmVk\nMSA9IG5ldyBFbWJlZF9FbWJlZCgpOwogICAgICAgIGVtYmVkMS5zZXRJbnRW\nYWwxKDEwMCk7CiAgICAgICAgYTEuYWRkRW1iZWQoZW1iZWQxKTsKICAgICAg\nICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAg\nCiAgICAgICAgLy9maW5kCiAgICAgICAgRW50aXR5QV9Db2xsX0VtYmVkX0Vt\nYmVkIGZpbmRBID0gZW0uZmluZChFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQu\nY2xhc3MsIDEpOwogICAgICAgIGFzc2VydEVxdWFscyg2LCBmaW5kQS5nZXRF\nbWJlZHMoKS5zaXplKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgLyoKICAgICAqIHRlc3QgdGhlIGRlZmF1bHQgbmFtZSBmb3IgZWxlbWVu\ndCBjb2xsZWN0aW9uIHRhYmxlCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRl\nc3REZWZhdWx0TmFtZUZvckVsZW1lbnRDb2xsZWN0aW9uKCkgewogICAgICAg\nIGdldExvZygpLnRyYWNlKCJ0ZXN0RGVmYXVsdE5hbWVGb3JFbGVtZW50Q29s\nbGVjdGlvbigpIC0gZW50ZXJlZCIpOwogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0\neVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAg\nICAgIHRyYW4uYmVnaW4oKTsgCiAgICAgICAgQSBhID0gbmV3IEEoKTsKICAg\nICAgICBhLnNldElkKCIxIik7CiAgICAgICAgRW1iZWQgZW1iZWQgPSBuZXcg\nRW1iZWQoKTsKICAgICAgICBlbWJlZC5zZXRJbnRWYWwxKDEpOwogICAgICAg\nIGVtYmVkLnNldEludFZhbDIoMik7CiAgICAgICAgZW1iZWQuc2V0SW50VmFs\nMygzKTsKICAgICAgICBTZXQgZW1iZWRzID0gbmV3IEhhc2hTZXQoKTsKICAg\nICAgICBlbWJlZHMuYWRkKGVtYmVkKTsKICAgICAgICBhLnNldEVtYmVkcyhl\nbWJlZHMpOwogICAgICAgIENvbGxlY3Rpb248RGF0ZT4gZGF0ZXMgPSBuZXcg\nQXJyYXlMaXN0PERhdGU+KCk7CiAgICAgICAgZGF0ZXMuYWRkKG5ldyBEYXRl\nKCkpOwogICAgICAgIGEuc2V0Q29sbGVjdGlvbkRhdGUoZGF0ZXMpOwogICAg\nICAgIGVtLnBlcnNpc3QoYSk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAg\nICAgICBib29sZWFuIGZvdW5kID0gZmFsc2U7CiAgICAgICAgZm9yIChTdHJp\nbmcgc3FsU3RyIDogc3FsKSB7CiAgICAgICAgICAgIGlmIChzcWxTdHIudG9V\ncHBlckNhc2UoKS5pbmRleE9mKCJBX0VNQkVEUyIpICE9IC0xKSB7CiAgICAg\nICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgfSAKICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHJ1\nZShmb3VuZCk7CiAgICAgICAgCiAgICAgICAgZm91bmQgPSBmYWxzZTsKICAg\nICAgICBmb3IgKFN0cmluZyBzcWxTdHIgOiBzcWwpIHsKICAgICAgICAgICAg\naWYgKHNxbFN0ci50b1VwcGVyQ2FzZSgpLmluZGV4T2YoIlZBTFVFIikgIT0g\nLTEpIHsKICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICB9IAogICAgICAgIH0KICAgICAg\nICBhc3NlcnRUcnVlKGZvdW5kKTsKICAgIH0KfQo=\n","encoding":"base64"}

