{"sha":"e9a1894b4e8efb092ff665153dc879dc3f1a76fb","node_id":"MDQ6QmxvYjIwNjM2NDplOWExODk0YjRlOGVmYjA5MmZmNjY1MTUzZGM4NzlkYzNmMWE3NmZi","size":7023,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e9a1894b4e8efb092ff665153dc879dc3f1a76fb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZW5oYW5j\nZS5pZGVudGl0eTsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RD\nYXNlOwoKLyoqCiAqIFRlc3RzIGVudGl0aWVzIHdpdGggY29tcG91bmQga2V5\ncyB0aGF0IGluY2x1ZGUgZW50aXR5IHJlbGF0aW9uc2hpcCBhdAogKiBtb3Jl\nIHRoYW4gb25lIGxldmVsLgogKiAKICogUGFnZSBoYXMgYSBjb21wb3VuZCBp\nZGVudGl0eSB0byBCb29rIHdoaWNoIGluIHR1cm4gdXNlcyBhIGNvbXBvdW5k\nIGlkZW50aXR5IAogKiB0byBMaWJyYXJ5LgogKiAKICogVGVzdCBjYXNlIGFu\nZCBkb21haW4gY2xhc3NlcyB3ZXJlIG9yaWdpbmFsbHkgcGFydCBvZiB0aGUg\ncmVwb3J0ZWQgaXNzdWUgCiAqIDxBIGhyZWY9Imh0dHBzOi8vaXNzdWVzLmFw\nYWNoZS5vcmcvamlyYS9icm93c2UvT1BFTkpQQS0yMDciPk9QRU5KUEEtMjA3\nPC9BPgogKiAKICogQGF1dGhvciBKZWZmcmV5IEJsYXR0bWFuCiAqIEBhdXRo\nb3IgUGluYWtpIFBvZGRhcgogKiAKICovCkBTdXBwcmVzc1dhcm5pbmdzKCJ1\nbmNoZWNrZWQiKQpwdWJsaWMgY2xhc3MgVGVzdE11bHRpcGxlTGV2ZWxEZXJp\ndmVkSWRlbnRpdHkgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7Cglwcml2\nYXRlIHN0YXRpYyBTdHJpbmcgTElCUkFSWV9OQU1FID0gIkxJQiI7Cglwcml2\nYXRlIHN0YXRpYyBTdHJpbmcgQk9PS19OQU1FICAgID0gImZvbyI7Cglwcml2\nYXRlIHN0YXRpYyBpbnQgICAgTlVNX1BBR0VTICAgID0gMzsKCQoJcHVibGlj\nIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdXBl\nci5zZXRVcChDTEVBUl9UQUJMRVMsIExpYnJhcnkuY2xhc3MsIEJvb2suY2xh\nc3MsIFBhZ2UuY2xhc3MsCiAgICAgICAgICAgICAgICAib3BlbmpwYS5SdW50\naW1lVW5lbmhhbmNlZENsYXNzZXMiLCAidW5zdXBwb3J0ZWQiKTsKCQljcmVh\ndGUoKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdE1lcmdlKCkgewogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIAogICAgICAgIExpYnJhcnkgbGliID0gbmV3IExpYnJhcnko\nKTsKICAgICAgICBsaWIuc2V0TmFtZSgiQ29uZ3Jlc3MgTGlicmFyeSIpOwoK\nICAgICAgICBCb29rIGJvb2sgPSBuZXcgQm9vaygpOwogICAgICAgIGJvb2su\nc2V0TmFtZSgiS2l0ZSBSdW5uZXIiKTsKICAgICAgICBib29rLnNldExpYnJh\ncnkobGliKTsKICAgICAgICBlbS5tZXJnZShib29rKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGVtLm1lcmdlKGJvb2spOwogICAgICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2Uo\nKTsKICAgICAgICAgICAgZmFpbCgiRmFpbCB0byBtZXJnZSB0d2ljZTogIiAr\nIGUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICB9Cgl9CgkKCXB1YmxpYyB2b2lk\nIHRlc3RQZXJzaXN0KCkgewoJCWNyZWF0ZSgpOwoJfQoKCXB1YmxpYyB2b2lk\nIHRlc3RRdWVyeVJvb3RMZXZlbCgpIHsKCQlFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCQlMaXN0PExpYnJhcnk+IGxp\nc3QgPSBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIHAgRlJPTSBMaWJyYXJ5IHAi\nKQoJCQkJCQkJICAgLmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnRGYWxzZShs\naXN0LmlzRW1wdHkoKSk7CgkJTGlicmFyeSBsaWIgPSAoTGlicmFyeSkgbGlz\ndC5nZXQoMCk7CgkJYXNzZXJ0Tm90TnVsbChsaWIuZ2V0Qm9vayhCT09LX05B\nTUUpKTsKCQlhc3NlcnROb3ROdWxsKGxpYi5nZXRCb29rKEJPT0tfTkFNRSku\nZ2V0UGFnZSgxKSk7Cgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RRdWVyeUludGVy\nbWVkaWF0ZUxldmVsKCkgewoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwoJCUxpc3Q8Qm9vaz4gbGlzdCA9IGVtLmNy\nZWF0ZVF1ZXJ5KCJTRUxFQ1QgcCBGUk9NIEJvb2sgcCIpCgkJCQkJCQkgICAu\nZ2V0UmVzdWx0TGlzdCgpOwoJCWFzc2VydEZhbHNlKGxpc3QuaXNFbXB0eSgp\nKTsKCQlCb29rIGJvb2sgPSBsaXN0LmdldCgwKTsKCQlMaWJyYXJ5IGxpYiA9\nIGJvb2suZ2V0TGlicmFyeSgpOwoJCWZvciAoaW50IGk9MTsgaTw9TlVNX1BB\nR0VTOyBpKyspIHsKCQkJUGFnZSBwYWdlID0gYm9vay5nZXRQYWdlKGkpOwoJ\nCQlhc3NlcnROb3ROdWxsKHBhZ2UpOwoJCQlhc3NlcnRFcXVhbHMoYm9vaywg\ncGFnZS5nZXRCb29rKCkpOwoJCQlhc3NlcnRFcXVhbHMobGliLCBwYWdlLmdl\ndEJvb2soKS5nZXRMaWJyYXJ5KCkpOwogICAgICAgICAgICBhc3NlcnRFcXVh\nbHMocGFnZSwgcGFnZS5nZXRCb29rKCkuZ2V0UGFnZShwYWdlLmdldE51bWJl\ncigpKSk7CgkJfQoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0UXVlcnlMZWFmTGV2\nZWwoKSB7CgkJRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CgkJTGlzdDxQYWdlPiBsaXN0ID0gZW0uY3JlYXRlUXVlcnko\nIlNFTEVDVCBwIEZST00gUGFnZSBwIikKCQkJCQkJCSAgIC5nZXRSZXN1bHRM\naXN0KCk7CgkJYXNzZXJ0RmFsc2UobGlzdC5pc0VtcHR5KCkpOwoJCUJvb2sg\nYm9vayA9IGxpc3QuZ2V0KDApLmdldEJvb2soKTsKCQlMaWJyYXJ5IGxpYiA9\nIGJvb2suZ2V0TGlicmFyeSgpOwoJCWZvciAoUGFnZSBwYWdlIDogbGlzdCkg\newoJCQlhc3NlcnRFcXVhbHMoYm9vaywgcGFnZS5nZXRCb29rKCkpOwoJCQlh\nc3NlcnRFcXVhbHMobGliLCBwYWdlLmdldEJvb2soKS5nZXRMaWJyYXJ5KCkp\nOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMocGFnZSwgcGFnZS5nZXRCb29r\nKCkuZ2V0UGFnZShwYWdlLmdldE51bWJlcigpKSk7CgkJfQoJfQoKCXB1Ymxp\nYyB2b2lkIHRlc3RGaW5kUm9vdE5vZGUoKSB7CgkJRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJTGlicmFyeSBsaWIg\nPSBlbS5maW5kKExpYnJhcnkuY2xhc3MsIExJQlJBUllfTkFNRSk7CgkJYXNz\nZXJ0Tm90TnVsbChsaWIpOwoJCWFzc2VydE5vdE51bGwobGliLmdldEJvb2so\nQk9PS19OQU1FKSk7CgkJYXNzZXJ0Tm90TnVsbChsaWIuZ2V0Qm9vayhCT09L\nX05BTUUpLmdldFBhZ2UoMSkpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0Rmlu\nZEludGVybWVkaWF0ZU5vZGUoKSB7CgkJRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJCgkJQm9va0lkIGJvb2tJZCA9\nIG5ldyBCb29rSWQoKTsKCQlib29rSWQuc2V0TGlicmFyeShMSUJSQVJZX05B\nTUUpOwoJCWJvb2tJZC5zZXROYW1lKEJPT0tfTkFNRSk7CgkJQm9vayBib29r\nID0gZW0uZmluZChCb29rLmNsYXNzLCBib29rSWQpOwoJCWFzc2VydE5vdE51\nbGwoYm9vayk7Cgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RGaW5kTGVhZk5vZGUo\nKSB7CgkJRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CgkJCgkJQm9va0lkIGJvb2tJZCA9IG5ldyBCb29rSWQoKTsKCQli\nb29rSWQuc2V0TGlicmFyeShMSUJSQVJZX05BTUUpOwoJCWJvb2tJZC5zZXRO\nYW1lKEJPT0tfTkFNRSk7CgkJUGFnZUlkIHBhZ2VJZCA9IG5ldyBQYWdlSWQo\nKTsKCQlwYWdlSWQuc2V0Qm9vayhib29rSWQpOwoJCXBhZ2VJZC5zZXROdW1i\nZXIoMik7CgkJUGFnZSBwYWdlID0gZW0uZmluZChQYWdlLmNsYXNzLCBwYWdl\nSWQpOwoJCWFzc2VydE5vdE51bGwocGFnZSk7Cgl9CgkKCXB1YmxpYyB2b2lk\nIHRlc3RVcGRhdGUoKSB7CgkJRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwoJCUJvb2tJZCBib29rSWQgPSBuZXcgQm9va0lkKCk7CgkJYm9va0lk\nLnNldExpYnJhcnkoTElCUkFSWV9OQU1FKTsKCQlib29rSWQuc2V0TmFtZShC\nT09LX05BTUUpOwoJCUJvb2sgYm9vayA9IGVtLmZpbmQoQm9vay5jbGFzcywg\nYm9va0lkKTsKCQlhc3NlcnROb3ROdWxsKGJvb2spOwoJCWJvb2suc2V0QXV0\naG9yKCJtb2RpZml5IEF1dGhvciIpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7Cgl9CgkKCXB1YmxpYyB2b2lkIHRlc3REZWxldGVSb290KCkg\newoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCQlMaWJyYXJ5\nIGxpYiA9IGVtLmZpbmQoTGlicmFyeS5jbGFzcywgTElCUkFSWV9OQU1FKTsK\nCQllbS5yZW1vdmUobGliKTsKCQllbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwoJCQoJICAgIGFzc2VydEVxdWFscygwLCBjb3VudChMaWJyYXJ5LmNs\nYXNzKSk7CgkgICAgYXNzZXJ0RXF1YWxzKDAsIGNvdW50KEJvb2suY2xhc3Mp\nKTsKCSAgICBhc3NlcnRFcXVhbHMoMCwgY291bnQoUGFnZS5jbGFzcykpOwoJ\nfQoJCglwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlTGVhZk9idGFpbmVkQnlRdWVy\neSgpIHsKCQlFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKCQllbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgUGFnZSBwYWdlID0gKFBhZ2UpZW0uY3JlYXRlUXVlcnkoCiAgICAgICAg\nICAgICAgICAiU0VMRUNUIHAgRlJPTSBQYWdlIHAgV0hFUkUgcC5udW1iZXI9\nMiIpLmdldFNpbmdsZVJlc3VsdCgpOwoJCWFzc2VydE5vdE51bGwocGFnZSk7\nCgkJZW0ucmVtb3ZlKHBhZ2UpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CgkJCgkgICAgYXNzZXJ0RXF1YWxzKDEsIGNvdW50KExpYnJhcnku\nY2xhc3MpKTsKCSAgICBhc3NlcnRFcXVhbHMoMSwgY291bnQoQm9vay5jbGFz\ncykpOwoJICAgIGFzc2VydEVxdWFscyhOVU1fUEFHRVMtMSwgY291bnQoUGFn\nZS5jbGFzcykpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlTGVhZk9i\ndGFpbmVkQnlGaW5kKCkgewoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKCQlCb29rSWQgYm9va0lkID0gbmV3IEJvb2tJZCgpOwoJCWJvb2tJ\nZC5zZXRMaWJyYXJ5KExJQlJBUllfTkFNRSk7CgkJYm9va0lkLnNldE5hbWUo\nQk9PS19OQU1FKTsKCQlQYWdlSWQgcGFnZUlkID0gbmV3IFBhZ2VJZCgpOwoJ\nCXBhZ2VJZC5zZXRCb29rKGJvb2tJZCk7CgkJcGFnZUlkLnNldE51bWJlcigy\nKTsKCQlQYWdlIHBhZ2UgPSBlbS5maW5kKFBhZ2UuY2xhc3MsIHBhZ2VJZCk7\nCgkJYXNzZXJ0Tm90TnVsbChwYWdlKTsKCQllbS5yZW1vdmUocGFnZSk7CgkJ\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCQkKCSAgICBhc3NlcnRF\ncXVhbHMoMSwgY291bnQoTGlicmFyeS5jbGFzcykpOwoJICAgIGFzc2VydEVx\ndWFscygxLCBjb3VudChCb29rLmNsYXNzKSk7CgkgICAgYXNzZXJ0RXF1YWxz\nKE5VTV9QQUdFUy0xLCBjb3VudChQYWdlLmNsYXNzKSk7Cgl9CgoJCgkvKioK\nCSAqIENyZWF0ZSBhIExpYnJhcnkgd2l0aCBhIEJvb2sgYW5kIHRocmVlIFBh\nZ2VzLgoJICovCglwdWJsaWMgdm9pZCBjcmVhdGUoKSB7CgkJaWYgKGNvdW50\nKExpYnJhcnkuY2xhc3MpID4gMCkKCQkJcmV0dXJuOwoJCQoJCUVudGl0eU1h\nbmFnZXIgZW0gPSBudWxsOwoJCWVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKCQllbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgkJCgkJTGli\ncmFyeSBsaWIgPSBuZXcgTGlicmFyeSgpOwoJCWxpYi5zZXROYW1lKExJQlJB\nUllfTkFNRSk7CgoJCUJvb2sgYm9vayA9IG5ldyBCb29rKCk7CgkJYm9vay5z\nZXROYW1lKEJPT0tfTkFNRSk7CgkJbGliLmFkZEJvb2soYm9vayk7CgkJZm9y\nIChpbnQgaSA9IDE7IGkgPD0gTlVNX1BBR0VTOyBpKyspIHsKCQkJUGFnZSBw\nYWdlID0gbmV3IFBhZ2UoKTsKCQkJcGFnZS5zZXROdW1iZXIoaSk7CgkJCWJv\nb2suYWRkUGFnZShwYWdlKTsKCQl9CgkJZW0ucGVyc2lzdChsaWIpOwoJCWVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgoJCWVtLmNsZWFyKCk7Cgl9\nCn0K\n","encoding":"base64"}

