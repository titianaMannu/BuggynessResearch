{"sha":"0a153dd92d1d0f32a0fd2c7236d670dc88a49785","node_id":"MDQ6QmxvYjIwNjM2NDowYTE1M2RkOTJkMWQwZjMyYTBmZDJjNzIzNmQ2NzBkYzg4YTQ5Nzg1","size":4149,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0a153dd92d1d0f32a0fd2c7236d670dc88a49785","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5v\ncmFjbGU7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdl\ncjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNlRXhjZXB0\naW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLk9yYWNsZURpY3Rpb25hcnk7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQ\nQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuRGF0\nYWJhc2VQbGF0Zm9ybTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3Rz\nIGlkZW50aXR5IHZhbHVlIGFzc2lnbm1lbnQgd2l0aCBJREVOVElUWSBzdHJh\ndGVneSBzcGVjaWZpY2FsbHkgZm9yCiAqIE9yYWNsZSBkYXRhYmFzZS4gSURF\nTlRJVFkgc3RyYXRlZ3kgZm9yIG1vc3QgZGF0YWJhc2UgcGxhdGZvcm1zIGlz\nIHN1cHBvcnRlZAogKiB3aXRoIGF1dG8taW5jcmVtZW50IGNhcGFiaWxpdGll\ncy4gQXMgT3JhY2xlIGRvZXMgbm90IG5hdGl2ZWx5IHN1cHBvcnQKICogYXV0\nby1pbmNyZW1lbnQsIHRoZSBzYW1lIGVmZmVjdCBpcyBhY2hpZXZlZCBieSBh\nIGNvbWJpbmF0aW9uIG9mIGEgZGF0YWJhc2UKICogc2VxdWVuY2UgYW5kIGEg\ncHJlLWluc2VydCBkYXRhYmFzZSB0cmlnZ2VyIFsxXS4KICogCiAqIFRoaXMg\ndGVzdCB2ZXJpZmllcyB0aGF0IGEgcGVyc2lzdGVudCBlbnRpdHkgdXNpbmcg\nSURFTlRJVFkgZ2VuZXJhdGlvbiB0eXBlCiAqIGlzIGFsbG9jYXRpbmcgaWRl\nbnRpdGllcyBpbiBtb25vdG9uaWMgc2VxdWVuY2Ugb24gT3JhY2xlIHBsYXRm\nb3JtLgogKiAKICogWzFdIGh0dHA6Ly9qZW4uZmx1eGNhcGFjaXRvci5uZXQv\nZ2Vlay9hdXRvaW5jci5odG1sCiAqIAogKiBAYXV0aG9yIFBpbmFraSBQb2Rk\nYXIKICogCiAqLwoKQERhdGFiYXNlUGxhdGZvcm0oIm9yYWNsZS5qZGJjLmRy\naXZlci5PcmFjbGVEcml2ZXIiKQpwdWJsaWMgY2xhc3MgVGVzdEF1dG9JbmNy\nZW1lbnQgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7CgogICAgcHVibGlj\nIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBP\nbmx5IHJ1biBvbiBPcmFjbGUKICAgICAgICBzZXRTdXBwb3J0ZWREYXRhYmFz\nZXMoCiAgICAgICAgICAgIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5P\ncmFjbGVEaWN0aW9uYXJ5LmNsYXNzKTsKICAgICAgICBpZiAoaXNUZXN0c0Rp\nc2FibGVkKCkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAg\nICAgICAgaWYgKCJ0ZXN0QXV0b0luY3JlbWVudElkZW50aXR5V2l0aE5hbWVk\nU2VxdWVuY2UiLmVxdWFscyhnZXROYW1lKCkpKSB7CiAgICAgICAgICAgIFN0\ncmluZyBzZXF1ZW5jZSA9ICJhdXRvSW5jcmVtZW50U2VxdWVuY2UiOwogICAg\nICAgICAgICBjcmVhdGVTZXF1ZW5jZShzZXF1ZW5jZSk7CgkJCXN1cGVyLnNl\ndFVwKENMRUFSX1RBQkxFUywgUE9iamVjdC5jbGFzcywKCQkJICAgICJvcGVu\nanBhLmpkYmMuREJEaWN0aW9uYXJ5IiwKCQkJICAgICJvcmFjbGUoVXNlVHJp\nZ2dlcnNGb3JBdXRvQXNzaWduPXRydWUsYXV0b0Fzc2lnblNlcXVlbmNlTmFt\nZT0iICsgc2VxdWVuY2UgKyAiKSIpOwoJCX0gZWxzZSB7CgkJCXN1cGVyLnNl\ndFVwKENMRUFSX1RBQkxFUywgUE9iamVjdE5hdGl2ZS5jbGFzcywKCQkJCQki\nb3BlbmpwYS5qZGJjLkRCRGljdGlvbmFyeSIsCiAgICAgICAgICAgICAgICAg\nICAgIm9yYWNsZShVc2VUcmlnZ2Vyc0ZvckF1dG9Bc3NpZ249dHJ1ZSkiKTsK\nCQl9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEF1dG9JbmNyZW1lbnRJ\nZGVudGl0eVdpdGhOYW1lZFNlcXVlbmNlKCkgewoJCUVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKCQlQT2JqZWN0IHBjMSA9IG5ldyBQT2JqZWN0\nKCk7CgkJUE9iamVjdCBwYzIgPSBuZXcgUE9iamVjdCgpOwoJCWVtLnBlcnNp\nc3QocGMxKTsKCQllbS5wZXJzaXN0KHBjMik7CgkJZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKCgkJYXNzZXJ0RXF1YWxzKDEsIE1hdGguYWJzKHBj\nMS5nZXRJZCgpIC0gcGMyLmdldElkKCkpKTsKCX0KCglwdWJsaWMgdm9pZCB0\nZXN0QXV0b0luY3JlbWVudElkZW50aXR5V2l0aE5hdGl2ZVNlcXVlbmNlKCkg\newoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCQlQT2JqZWN0\nTmF0aXZlIHBjMSA9IG5ldyBQT2JqZWN0TmF0aXZlKCk7CgkJUE9iamVjdE5h\ndGl2ZSBwYzIgPSBuZXcgUE9iamVjdE5hdGl2ZSgpOwoJCWVtLnBlcnNpc3Qo\ncGMxKTsKCQllbS5wZXJzaXN0KHBjMik7CgkJZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKCgkJYXNzZXJ0RXF1YWxzKDEsIE1hdGguYWJzKHBjMS5n\nZXRJZCgpIC0gcGMyLmdldElkKCkpKTsKCX0KCiAgICAvKioKICAgICAqIENy\nZWF0ZSBzZXF1ZW5jZSBzbyB0aGF0IHRoZSB0ZXN0IGRvZXMgbm90IHJlcXVp\ncmUgbWFudWFsIGludGVydmVudGlvbiBpbiBkYXRhYmFzZS4KICAgICAqLwog\nICAgcHJpdmF0ZSB2b2lkIGNyZWF0ZVNlcXVlbmNlKFN0cmluZyBzZXF1ZW5j\nZSkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSBm\nYWN0b3J5U1BJID0gY3JlYXRlRU1GKCk7CiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXJTUEkgZW0gPSBmYWN0b3J5U1BJLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgICAgICBRdWVyeSBxID0gZW0uY3Jl\nYXRlTmF0aXZlUXVlcnkoIkNSRUFURSBTRVFVRU5DRSAiICsgc2VxdWVuY2Ug\nKyAiIFNUQVJUIFdJVEggMSIpOwogICAgICAgICAgICBxLmV4ZWN1dGVVcGRh\ndGUoKTsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICB9IGNhdGNoIChQZXJzaXN0ZW5jZUV4Y2VwdGlvbiBlKSB7\nICAgICAgICAgIAogICAgICAgICAgICAvLyBTZXF1ZW5jZSBwcm9iYWJseSBl\neGlzdHMuCiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJh\nY2soKTsKICAgICAgICB9CiAgICAgICAgY2xvc2VFTUYoZmFjdG9yeVNQSSk7\nCiAgICB9Cn0K\n","encoding":"base64"}

