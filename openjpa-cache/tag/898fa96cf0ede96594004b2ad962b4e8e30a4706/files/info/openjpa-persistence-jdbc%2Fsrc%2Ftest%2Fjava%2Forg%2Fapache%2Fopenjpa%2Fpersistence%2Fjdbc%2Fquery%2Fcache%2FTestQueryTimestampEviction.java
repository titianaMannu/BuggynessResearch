{"sha":"af99460ce4a0fcbe7f6ecd2db2f393133536e17a","node_id":"MDQ6QmxvYjIwNjM2NDphZjk5NDYwY2U0YTBmY2JlN2Y2ZWNkMmRiMmYzOTMxMzM1MzZlMTdh","size":3514,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/af99460ce4a0fcbe7f6ecd2db2f393133536e17a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5x\ndWVyeS5jYWNoZTsKCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5Db25jdXJyZW50\nUXVlcnlDYWNoZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5kYXRhY2Fj\naGUuUXVlcnlDYWNoZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5kYXRh\nY2FjaGUuVHlwZXNDaGFuZ2VkRXZlbnQ7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuZGF0YWNhY2hlLkFic3RyYWN0UXVlcnlDYWNoZS5FdmljdFBvbGlj\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0Nv\nbmZpZ3VyYXRpb247CgpwdWJsaWMgY2xhc3MgVGVzdFF1ZXJ5VGltZXN0YW1w\nRXZpY3Rpb24gZXh0ZW5kcyBBYnN0cmFjdFF1ZXJ5Q2FjaGVUZXN0IHsKICAg\nIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgc3VwZXIuc2V0VXAoCiAgICAgICAgICAgICAgICAib3BlbmpwYS5EYXRh\nQ2FjaGUiLCAidHJ1ZSIsCiAgICAgICAgICAgICAgICAib3BlbmpwYS5RdWVy\neUNhY2hlIiwgInRydWUoQ2FjaGVTaXplPTEwMDAsIEV2aWN0UG9saWN5PSd0\naW1lc3RhbXAnKSIsCiAgICAgICAgICAgICAgICAib3BlbmpwYS5SZW1vdGVD\nb21taXRQcm92aWRlciIsICJzanZtIik7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBWZXJpZnkgdGhhdCB0aGUgcGVyc2lzdGVudCB1bml0IHByb3BlcnR5IGNv\nbmZpZ3VyYXRpb24gaXMgZW5hYmxpbmcKICAgICAqIHRoZSBUSU1FU1RBTVAg\nRXZpY3Rpb24gUG9saWN5LgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nVGltZXN0YW1wRXZpY3Rpb25FbmFibGVtZW50KCkgewogICAgICAgIENvbmN1\ncnJlbnRRdWVyeUNhY2hlIHFjID0gZ2V0UXVlcnlDYWNoZSgpOwogICAgICAg\nIEV2aWN0UG9saWN5IGVwID0gcWMuZ2V0RXZpY3RQb2xpY3koKTsKICAgICAg\nICBhc3NlcnRUcnVlKGVwID09IEV2aWN0UG9saWN5LlRJTUVTVEFNUCk7CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RMb2FkUXVlcmllcygpIHsK\nICAgICAgICAvLyBOb3QgYWxsIGRhdGFiYXNlcyBzdXBwb3J0IEdlbmVyYXRp\nb25UeXBlLklERU5USVRZIGNvbHVtbihzKQogICAgICAgIGlmICghKChKREJD\nQ29uZmlndXJhdGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKSkuCiAgICAg\nICAgICAgIGdldERCRGljdGlvbmFyeUluc3RhbmNlKCkuc3VwcG9ydHNBdXRv\nQXNzaWduKSB7CiAgICAgICAgCXJldHVybjsKICAgICAgICB9ICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgbG9hZFF1ZXJ5Q2Fj\naGUoKTsKICAgICAgICBpbnQgY2FjaGVTaXplQmVmb3JlVXBkYXRlID0gcXVl\ncnlDYWNoZUdldCgpOwogICAgICAgIHVwZGF0ZUFuRW50aXR5KCk7CiAgICAg\nICAgaW50IGNhY2hlU2l6ZUFmdGVyVXBkYXRlID0gcXVlcnlDYWNoZUdldCgp\nOwoKICAgICAgICAvLyBJZiBldmljdFBvbGljeSBpcyB0aW1lc3RhbXAgdGhl\nIHF1ZXJ5Y2FjaGUgc2l6ZSBzaG91bGQgYmUgZXF1YWwgdG8KICAgICAgICAv\nLyBjYWNoZVNpemVCZWZvcmVVcGRhdGUgdmFsdWUuCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGNhY2hlU2l6ZUJlZm9yZVVwZGF0ZSwgY2FjaGVTaXplQWZ0ZXJV\ncGRhdGUpOwoKICAgICAgICB0aGlzLnJlY3JlYXRlRGF0YSA9IGZhbHNlOwog\nICAgfQoKICAgIC8qKgogICAgICogVGhpcyB0ZXN0Y2FzZSB3YXMgYWRkZWQg\nZm9yIE9QRU5KUEEtMTM3OS4gUHJpb3IgdG8gdGhpcyBmaXgsIHRoZSBtYWlu\nIHRocmVhZCBob2xkcyBhIGxvY2sgb24KICAgICAqIHRoZSBRdWVyeUNhY2hl\nIHdoaWNoIGl0IG5ldmVyIHJlbGVhc2VkLiBBcyBhIHJlc3VsdCwgdGhyZWFk\nIHQyIHdpbGwgbmV2ZXIgc3VjY2Vzc2Z1bGx5IG9idGFpbgogICAgICogdGhl\nIHdyaXRlTG9jaygpLgogICAgICogCiAgICAgKiBUaGUgbWFpbiB0aHJlYWQg\naG9sZHMgdGhlIHdyaXRlTG9jayBiZWNhdXNlIHNldFVwKC4uKSBjYWxscyBk\nZWxldGVBbGxEYXRhKCkgd2hpY2ggZXZlbnR1YWxseQogICAgICogcmVzdWx0\ncyBpbiBBYnN0cmFjdFF1ZXJ5Q2FjaGUub25UeXBlc0NoYW5nZXMoVHlwZXND\naGFuZ2VkRXZlbnQpIGJlaW5nIGNhbGxlZC4KICAgICAqIAogICAgICogQHRo\ncm93cyBFeGNlcHRpb24KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdFdy\naXRlTG9jaygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGZpbmFsIFF1\nZXJ5Q2FjaGUgcWMgPSBlbWYuZ2V0Q29uZmlndXJhdGlvbigpLmdldERhdGFD\nYWNoZU1hbmFnZXJJbnN0YW5jZSgpLmdldFN5c3RlbVF1ZXJ5Q2FjaGUoKTsK\nICAgICAgICBUaHJlYWQgdDIgPSBuZXcgVGhyZWFkKCkgewogICAgICAgICAg\nICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICBxYy53cml0\nZUxvY2soKTsKICAgICAgICAgICAgICAgIHFjLndyaXRlVW5sb2NrKCk7CiAg\nICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHQyLnN0YXJ0KCk7CiAg\nICAgICAgdDIuam9pbig1MDAwKTsKICAgICAgICAKICAgICAgICBpZiAodDIu\nZ2V0U3RhdGUoKS5lcXVhbHMoamF2YS5sYW5nLlRocmVhZC5TdGF0ZS5XQUlU\nSU5HKSkgewogICAgICAgICAgICBmYWlsKCJUaGUgdGhyZWFkIGlzIHN0aWxs\nIHdhaXRpbmcgb24gYSB3cml0ZUxvY2soKSEiKTsKICAgICAgICB9CiAgICB9\nCn0KCg==\n","encoding":"base64"}

