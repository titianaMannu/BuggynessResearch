{"sha":"87cd9cd84a29069632ce557ea9e0aa6e92e4ddfe","node_id":"MDQ6QmxvYjIwNjM2NDo4N2NkOWNkODRhMjkwNjk2MzJjZTU1N2VhOWUwYWE2ZTkyZTRkZGZl","size":6860,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/87cd9cd84a29069632ce557ea9e0aa6e92e4ddfe","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5tZXJnZTsKCmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5tZXJnZS5tb2RlbC5U\nb3k7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWVy\nZ2UubW9kZWwuVG95Qm94OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xh\nc3MgVGVzdENhc2NhZGVPbmVUb01hbnlNZXJnZSBleHRlbmRzIFNpbmdsZUVN\nRlRlc3RDYXNlIHsKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAg\nIHNldFVwKFRveS5jbGFzcywgVG95Qm94LmNsYXNzLCBDTEVBUl9UQUJMRVMp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9m\nIFRveSBhbmQgVG95Ym94LCBlc3RhYmxpc2ggdGhlIGJpZGlyZWN0aW9uYWwg\ncmVsYXRpb25zaGlwIGJldHdlZW4gdGhlIHR3bywgYW5kIGNhbGwKICAgICAq\nIGVtLm1lcmdlKCkgb24gdGhlIGluc3RhbmNlIG9mIFRveWJveC4gVGhlIG1l\ncmdlIHNob3VsZCBjYXNjYWRlIGFjcm9zcyB0aGUgaW52ZXJzZSByZWxhdGlv\nbnNoaXAsIGFkZGluZyBib3RoCiAgICAgKiBlbnRpdGllcyB0byB0aGUgcGVy\nc2lzdGVuY2UgY29udGV4dC4gVGhlIHJlZmVyZW5jZSB0byBUb3kgYnkgdGhl\nIG93bmluZyBzaWRlIG9mIHRoZSByZWxhdGlvbnNoaXAgc2hvdWxkIGJlCiAg\nICAgKiB1cGRhdGVkIHRvIHBvaW50IHRvIHRoZSBtYW5hZ2VkIGluc3RhbmNl\nIChUb3knIGJlY2F1c2Ugb2YgdGhlIG1lcmdlIG9wKS4KICAgICAqIAogICAg\nICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25lVG9NYW55Q2FzY2FkZU1lcmdl\nU2luZ2xlRW50aXR5KCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAgICB0cnkgewogICAg\nICAgICAgICAvLyBDcmVhdGUgdG95CiAgICAgICAgICAgIFRveSB0b3kgPSBu\nZXcgVG95KDEpOwogICAgICAgICAgICB0b3kuc2V0VG95TmFtZSgiVG95IFRy\nYWluIik7CgogICAgICAgICAgICAvLyBDcmVhdGUgdG95Ym94CiAgICAgICAg\nICAgIFRveUJveCB0b3lib3ggPSBuZXcgVG95Qm94KDEpOwogICAgICAgICAg\nICB0b3lib3guc2V0T3duZXJOYW1lKCJFdmFuIik7CgogICAgICAgICAgICAv\nLyBFc3RhYmxpc2ggcmVsYXRpb25zaGlwCiAgICAgICAgICAgIHRveS5zZXRU\nb3lib3godG95Ym94KTsKICAgICAgICAgICAgdG95Ym94LmdldFRveUxpc3Qo\nKS5hZGQodG95KTsKCiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIG1lcmdl\nCiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICAgICAgVG95Qm94IG1lcmdlZFRveUJveCA9IGVtLm1lcmdlKHRveWJv\neCk7CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoIkFzc2VydCBlbS5tZXJn\nZSgpIGRpZG4ndCByZXR1cm4gbnVsbCIsIG1lcmdlZFRveUJveCk7CgogICAg\nICAgICAgICAvLyBWZXJpZnkgdGhlIG1lcmdlCiAgICAgICAgICAgIFRveUJv\neCB0b3lib3hGaW5kID0gZW0uZmluZChUb3lCb3guY2xhc3MsIDEpOwogICAg\nICAgICAgICBUb3kgdG95RmluZCA9IGVtLmZpbmQoVG95LmNsYXNzLCAxKTsK\nICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiQXNzZXJ0IGVtLmZpbmQoKSBm\nb3IgVG95Qm94KGlkPTEpIGRpZCBub3QgcmV0dXJuIG51bGwuIiwgdG95Ym94\nRmluZCk7CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoIkFzc2VydCBlbS5m\naW5kKCkgZm9yIFRveShpZD0xKSBkaWQgbm90IHJldHVybiBudWxsLiIsIHRv\neUZpbmQpOwogICAgICAgICAgICBhc3NlcnRUcnVlKCJBc3NlcnQgZW0uZmlu\nZCgpIHJldHVybnMgdGhlIFRveUJveCByZXR1cm5lZCBieSBlbS5tZXJnZSgp\nIiwgbWVyZ2VkVG95Qm94ID09IHRveWJveEZpbmQpOwogICAgICAgICAgICBh\nc3NlcnRUcnVlKCJBc3NlcnQgdGFoYXQgVG95Qm94KGlkPTEpLnRveUxpc3Qg\naXMgc2l6ZSAxIiwgdG95Ym94RmluZC5nZXRUb3lMaXN0KCkuc2l6ZSgpID09\nIDEpOwogICAgICAgICAgICBhc3NlcnRUcnVlKCJBc3NlcnQgdGhhdCBUb3lC\nb3goaWQ9MSkudG95TGlzdCBjb250YWlucyB0aGUgbWFuYWdlZCBUb3koaWQ9\nMSkuIiwgdG95Ym94RmluZC5nZXRUb3lMaXN0KCkKICAgICAgICAgICAgICAg\nIC5jb250YWlucyh0b3lGaW5kKSk7CiAgICAgICAgICAgIGFzc2VydFRydWUo\nIkFzc2VydCB0aGF0IFRveShpZD0xKSByZWZlcmVuY2VzIHRoZSBtYW5hZ2Vk\nIFRveUJveChpZD0xKS4iLCB0b3lGaW5kLmdldFRveWJveCgpID09IHRveWJv\neEZpbmQpOwoKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKCiAgICAgICAgICAgIC8vIFZlcmlmeSBzdWNjZXNzZnVsIHNhdmUg\ndG8gdGhlIGRhdGFiYXNlCiAgICAgICAgICAgIGVtLmNsZWFyKCk7CiAgICAg\nICAgICAgIGFzc2VydE5vdE51bGwoIkFzc2VydCBlbS5maW5kKFRveS5jbGFz\ncywgMSkgZG9lc24ndCByZXR1cm4gbnVsbC4iLCBlbS5maW5kKFRveS5jbGFz\ncywgMSkpOwogICAgICAgICAgICBhc3NlcnROb3ROdWxsKCJBc3NlcnQgZW0u\nZmluZChUb3lCb3guY2xhc3MsIDEpIGRvZXNuJ3QgcmV0dXJuIG51bGwuIiwg\nZW0uZmluZChUb3lCb3guY2xhc3MsIDEpKTsKICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICBpZiAoZW0gIT0gbnVsbCkgewogICAgICAgICAgICAg\nICAgaWYgKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAg\nICAgICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7\nCiAgICAgICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGFuIGluc3Rh\nbmNlIG9mIFRveXMgKDIpIGFuZCBUb3lib3gsIGVzdGFibGlzaCB0aGUgYmlk\naXJlY3Rpb25hbCByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgdHdvLCBhbmQg\nY2FsbAogICAgICogZW0ubWVyZ2UoKSBvbiB0aGUgaW5zdGFuY2Ugb2YgVG95\nYm94LiBUaGUgbWVyZ2Ugc2hvdWxkIGNhc2NhZGUgYWNyb3NzIHRoZSBpbnZl\ncnNlIHJlbGF0aW9uc2hpcCwgYWRkaW5nIGFsbAogICAgICogZW50aXRpZXMg\ndG8gdGhlIHBlcnNpc3RlbmNlIGNvbnRleHQuIFRoZSByZWZlcmVuY2UgdG8g\ndGhlIFRveXMgYnkgdGhlIG93bmluZyBzaWRlIG9mIHRoZSByZWxhdGlvbnNo\naXAgc2hvdWxkIGJlCiAgICAgKiB1cGRhdGVkIHRvIHBvaW50IHRvIHRoZSBt\nYW5hZ2VkIGluc3RhbmNlIChUb3knIGJlY2F1c2Ugb2YgdGhlIG1lcmdlIG9w\nKS4KICAgICAqIAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25lVG9N\nYW55Q2FzY2FkZU1lcmdlRG91YmxlRW50aXR5KCkgewogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAg\nICAgICB0cnkgewogICAgICAgICAgICAvLyBDcmVhdGUgdG95cwogICAgICAg\nICAgICBUb3kgdG95MSA9IG5ldyBUb3koMSk7CiAgICAgICAgICAgIHRveTEu\nc2V0VG95TmFtZSgiVG95IFRyYWluIik7CgogICAgICAgICAgICBUb3kgdG95\nMiA9IG5ldyBUb3koMik7CiAgICAgICAgICAgIHRveTIuc2V0VG95TmFtZSgi\nVG95IFBsYW5lIik7CgogICAgICAgICAgICAvLyBDcmVhdGUgdG95Ym94CiAg\nICAgICAgICAgIFRveUJveCB0b3lib3ggPSBuZXcgVG95Qm94KDEpOwogICAg\nICAgICAgICB0b3lib3guc2V0T3duZXJOYW1lKCJFdmFuIik7CgogICAgICAg\nICAgICAvLyBFc3RhYmxpc2ggcmVsYXRpb25zaGlwCiAgICAgICAgICAgIHRv\neTEuc2V0VG95Ym94KHRveWJveCk7CiAgICAgICAgICAgIHRveTIuc2V0VG95\nYm94KHRveWJveCk7CiAgICAgICAgICAgIHRveWJveC5nZXRUb3lMaXN0KCku\nYWRkKHRveTEpOwogICAgICAgICAgICB0b3lib3guZ2V0VG95TGlzdCgpLmFk\nZCh0b3kyKTsKCiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIG1lcmdlCiAg\nICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICAgICAgVG95Qm94IG1lcmdlZFRveUJveCA9IGVtLm1lcmdlKHRveWJveCk7\nCiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoIkFzc2VydCBlbS5tZXJnZSgp\nIGRpZG4ndCByZXR1cm4gbnVsbCIsIG1lcmdlZFRveUJveCk7CiAgICAgICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgogICAgICAgICAg\nICAvLyBWZXJpZnkgdGhlIG1lcmdlCiAgICAgICAgICAgIFRveUJveCB0b3li\nb3hGaW5kID0gZW0uZmluZChUb3lCb3guY2xhc3MsIDEpOwogICAgICAgICAg\nICBUb3kgdG95MUZpbmQgPSBlbS5maW5kKFRveS5jbGFzcywgMSk7CiAgICAg\nICAgICAgIFRveSB0b3kyRmluZCA9IGVtLmZpbmQoVG95LmNsYXNzLCAyKTsK\nICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiQXNzZXJ0IGVtLmZpbmQoKSBm\nb3IgVG95Qm94KGlkPTEpIGRpZCBub3QgcmV0dXJuIG51bGwuIiwgdG95Ym94\nRmluZCk7CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoIkFzc2VydCBlbS5m\naW5kKCkgZm9yIFRveShpZD0xKSBkaWQgbm90IHJldHVybiBudWxsLiIsIHRv\neTFGaW5kKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiQXNzZXJ0IGVt\nLmZpbmQoKSBmb3IgVG95KGlkPTIpIGRpZCBub3QgcmV0dXJuIG51bGwuIiwg\ndG95MkZpbmQpOwogICAgICAgICAgICBhc3NlcnRUcnVlKCJBc3NlcnQgZW0u\nZmluZCgpIHJldHVybnMgdGhlIFRveUJveCByZXR1cm5lZCBieSBlbS5tZXJn\nZSgpIiwgbWVyZ2VkVG95Qm94ID09IHRveWJveEZpbmQpOwogICAgICAgICAg\nICBhc3NlcnRUcnVlKCJBc3NlcnQgdGFoYXQgVG95Qm94KGlkPTEpLnRveUxp\nc3QgaXMgc2l6ZSAyIiwgdG95Ym94RmluZC5nZXRUb3lMaXN0KCkuc2l6ZSgp\nID09IDIpOwogICAgICAgICAgICBhc3NlcnRUcnVlKCJBc3NlcnQgdGhhdCBU\nb3lCb3goaWQ9MSkudG95TGlzdCBjb250YWlucyB0aGUgbWFuYWdlZCBUb3ko\naWQ9MSkuIiwgdG95Ym94RmluZC5nZXRUb3lMaXN0KCkKICAgICAgICAgICAg\nICAgIC5jb250YWlucyh0b3kxRmluZCkpOwogICAgICAgICAgICBhc3NlcnRU\ncnVlKCJBc3NlcnQgdGhhdCBUb3lCb3goaWQ9MSkudG95TGlzdCBjb250YWlu\ncyB0aGUgbWFuYWdlZCBUb3koaWQ9MikuIiwgdG95Ym94RmluZC5nZXRUb3lM\naXN0KCkKICAgICAgICAgICAgICAgIC5jb250YWlucyh0b3kyRmluZCkpOwog\nICAgICAgICAgICBhc3NlcnRUcnVlKCJBc3NlcnQgdGhhdCBUb3koaWQ9MSkg\ncmVmZXJlbmNlcyB0aGUgbWFuYWdlZCBUb3lCb3goaWQ9MSkuIiwKICAgICAg\nICAgICAgICAgIHRveTFGaW5kLmdldFRveWJveCgpID09IHRveWJveEZpbmQp\nOwogICAgICAgICAgICBhc3NlcnRUcnVlKCJBc3NlcnQgdGhhdCBUb3koaWQ9\nMikgcmVmZXJlbmNlcyB0aGUgbWFuYWdlZCBUb3lCb3goaWQ9MSkuIiwgCiAg\nICAgICAgICAgICAgICB0b3kyRmluZC5nZXRUb3lib3goKSA9PSB0b3lib3hG\naW5kKTsKCiAgICAgICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgICAgIGFz\nc2VydE5vdE51bGwoIkFzc2VydCBlbS5maW5kKFRveS5jbGFzcywgMSkgZG9l\nc24ndCByZXR1cm4gbnVsbC4iLCBlbS5maW5kKFRveS5jbGFzcywgMSkpOwog\nICAgICAgICAgICBhc3NlcnROb3ROdWxsKCJBc3NlcnQgZW0uZmluZChUb3ku\nY2xhc3MsIDIpIGRvZXNuJ3QgcmV0dXJuIG51bGwuIiwgZW0uZmluZChUb3ku\nY2xhc3MsIDIpKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiQXNzZXJ0\nIGVtLmZpbmQoVG95Qm94LmNsYXNzLCAxKSBkb2Vzbid0IHJldHVybiBudWxs\nLiIsIGVtLmZpbmQoVG95Qm94LmNsYXNzLCAxKSk7CiAgICAgICAgfSBmaW5h\nbGx5IHsKICAgICAgICAgICAgaWYgKGVtICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgIGlmIChlbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpCiAg\nICAgICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFj\naygpOwogICAgICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

