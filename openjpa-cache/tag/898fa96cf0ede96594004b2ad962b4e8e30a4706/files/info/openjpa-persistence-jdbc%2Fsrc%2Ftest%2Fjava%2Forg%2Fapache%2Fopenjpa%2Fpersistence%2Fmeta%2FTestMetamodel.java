{"sha":"15ad085e9e7c3cf89e6d64f1ddcc55ac2e28d59f","node_id":"MDQ6QmxvYjIwNjM2NDoxNWFkMDg1ZTllN2MzY2Y4OWU2ZDY0ZjFkZGNjNTVhYzJlMjhkNTlm","size":20128,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/15ad085e9e7c3cf89e6d64f1ddcc55ac2e28d59f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YTsKCmlt\ncG9ydCBqYXZhLmxhbmcucmVmbGVjdC5GaWVsZDsKaW1wb3J0IGphdmEubGFu\nZy5yZWZsZWN0Lkludm9jYXRpb25UYXJnZXRFeGNlcHRpb247CmltcG9ydCBq\nYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7CmltcG9ydCBqYXZhLmxhbmcucmVm\nbGVjdC5Nb2RpZmllcjsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRh\nbW9kZWwuQXR0cmlidXRlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0\nYW1vZGVsLkNvbGxlY3Rpb25BdHRyaWJ1dGU7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5tZXRhbW9kZWwuRW50aXR5VHlwZTsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLm1ldGFtb2RlbC5JZGVudGlmaWFibGVUeXBlOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLkxpc3RBdHRyaWJ1dGU7Cmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuTWFuYWdlZFR5cGU7\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuU2V0QXR0cmli\ndXRlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLlNpbmd1\nbGFyQXR0cmlidXRlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0YW1v\nZGVsLkF0dHJpYnV0ZS5QZXJzaXN0ZW50QXR0cmlidXRlVHlwZTsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5CaW5kYWJsZS5CaW5kYWJs\nZVR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuUGx1\ncmFsQXR0cmlidXRlLkNvbGxlY3Rpb25UeXBlOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UubWV0YW1vZGVsLlR5cGUuUGVyc2lzdGVuY2VUeXBlOwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZW5oYW5jZS5p\nZGVudGl0eS5Cb29rOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmVuaGFuY2UuaWRlbnRpdHkuQm9va0lkOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmVuaGFuY2UuaWRlbnRpdHkuTGli\ncmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5l\nbmhhbmNlLmlkZW50aXR5LlBhZ2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UucmVsYXRpb25zLk9uZU9uZUNoaWxkOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnJlbGF0aW9ucy5PbmVP\nbmVQYXJlbnQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsKCi8qKgogKiBUZXN0cyBKUEEg\nMi4wIE1ldGFtb2RlbC4KICogCiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcgog\nKgogKi8KcHVibGljIGNsYXNzIFRlc3RNZXRhbW9kZWwgZXh0ZW5kcyBTaW5n\nbGVFTUZUZXN0Q2FzZSB7CiAgICBwcml2YXRlIHN0YXRpYyBNZXRhbW9kZWxJ\nbXBsIG1vZGVsOwogICAgCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAg\nICAgICBpZiAobW9kZWwgPT0gbnVsbCkgewogICAgCXN1cGVyLnNldFVwKAog\nICAgCSAgICAgICAgIm9wZW5qcGEuUnVudGltZVVuZW5oYW5jZWRDbGFzc2Vz\nIiwgInVuc3VwcG9ydGVkIiwKICAgIAkgICAgICAgICJvcGVuanBhLkR5bmFt\naWNFbmhhbmNlbWVudEFnZW50IiwgImZhbHNlIiwKICAgIAkJCUltcGxpY2l0\nRmllbGRBY2Nlc3NNYXBwZWRTdXBlcmNsYXNzLmNsYXNzLAogICAgCSAgICAg\nICAgSW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2UuY2xhc3MsIAogICAgCSAgICAg\nICAgSW1wbGljaXRGaWVsZEFjY2Vzc1N1YmNsYXNzLmNsYXNzLAogICAgCSAg\nICAgICAgRXhwbGljaXRGaWVsZEFjY2Vzcy5jbGFzcywgCiAgICAJICAgICAg\nICBFeHBsaWNpdFByb3BlcnR5QWNjZXNzLmNsYXNzLAogICAgCSAgICAgICAg\nRW1iZWQwLmNsYXNzLCAKICAgIAkgICAgICAgIEVtYmVkMS5jbGFzcywKICAg\nIAkgICAgICAgIE9uZU9uZVBhcmVudC5jbGFzcywKICAgIAkgICAgICAgIE9u\nZU9uZUNoaWxkLmNsYXNzLAogICAgCSAgICAgICAgQm9vay5jbGFzcywKICAg\nIAkgICAgICAgIExpYnJhcnkuY2xhc3MsCiAgICAJICAgICAgICBQYWdlLmNs\nYXNzKTsKICAgIAllbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIG1vZGVsID0gKE1ldGFtb2RlbEltcGwpZW1mLmdldE1ldGFtb2RlbCgpOwog\nICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE1ldGFN\nb2RlbEZvckRvbWFpbkNsYXNzZXNFeGlzdCgpIHsKICAgICAgICBhc3NlcnRG\nYWxzZShtb2RlbC5nZXRFbnRpdGllcygpLmlzRW1wdHkoKSk7CiAgICAgICAg\nYXNzZXJ0RmFsc2UobW9kZWwuZ2V0RW1iZWRkYWJsZXMoKS5pc0VtcHR5KCkp\nOwogICAgICAgIGFzc2VydEZhbHNlKG1vZGVsLmdldE1hbmFnZWRUeXBlcygp\nLmlzRW1wdHkoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RN\nZXRhQ2xhc3NGaWVsZHNBcmVQb3B1bGF0ZWQoKSB7CiAgICAgICAgRW50aXR5\nVHlwZTxJbXBsaWNpdEZpZWxkQWNjZXNzU3ViY2xhc3M+IG0gPSAgbW9kZWwu\nZW50aXR5KEltcGxpY2l0RmllbGRBY2Nlc3NTdWJjbGFzcy5jbGFzcyk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChtKTsKICAgICAgICBDbGFzczw/PiBtQ2xz\nID0gbS5nZXRKYXZhVHlwZSgpOwogICAgICAgIGFzc2VydFNhbWUoSW1wbGlj\naXRGaWVsZEFjY2Vzc1N1YmNsYXNzLmNsYXNzLCBtQ2xzKTsKICAgICAgICAK\nICAgICAgICBDbGFzczw/PiBtMkNscyA9IG1vZGVsLmdldFJlcG9zaXRvcnko\nKS5nZXRNZXRhTW9kZWwobUNscywgdHJ1ZSk7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbChtMkNscyk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgRmllbGQg\nZjIgPSBnZXRTdGF0aWNGaWVsZChtMkNscywgImJhc2UiKTsKICAgICAgICAg\nICAgYXNzZXJ0Tm90TnVsbChmMik7CiAgICAgICAgICAgIE9iamVjdCB2YWx1\nZSA9IGYyLmdldChudWxsKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCh2\nYWx1ZSk7CiAgICAgICAgICAgIGFzc2VydFRydWUoQXR0cmlidXRlLmNsYXNz\nLmlzQXNzaWduYWJsZUZyb20odmFsdWUuZ2V0Q2xhc3MoKSkpOwogICAgICAg\nIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIHQucHJpbnRT\ndGFja1RyYWNlKCk7CiAgICAgICAgICAgIGZhaWwoKTsKICAgICAgICB9CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3REb21haW5DbGFzc0NhdGVn\nb3JpemVkSW5QZXJzaXN0ZW50Q2F0ZWdvcnkoKSB7CiAgICAJYXNzZXJ0Q2F0\nZWdvcnkoUGVyc2lzdGVuY2VUeXBlLk1BUFBFRF9TVVBFUkNMQVNTLCBJbXBs\naWNpdEZpZWxkQWNjZXNzTWFwcGVkU3VwZXJjbGFzcy5jbGFzcyk7CiAgICAJ\nYXNzZXJ0Q2F0ZWdvcnkoUGVyc2lzdGVuY2VUeXBlLkVOVElUWSwgSW1wbGlj\naXRGaWVsZEFjY2Vzc0Jhc2UuY2xhc3MpOwogICAgCWFzc2VydENhdGVnb3J5\nKFBlcnNpc3RlbmNlVHlwZS5FTlRJVFksIEltcGxpY2l0RmllbGRBY2Nlc3NT\ndWJjbGFzcy5jbGFzcyk7CiAgICAJYXNzZXJ0Q2F0ZWdvcnkoUGVyc2lzdGVu\nY2VUeXBlLkVNQkVEREFCTEUsIEVtYmVkMC5jbGFzcyk7CiAgICAJYXNzZXJ0\nQ2F0ZWdvcnkoUGVyc2lzdGVuY2VUeXBlLkVNQkVEREFCTEUsIEVtYmVkMS5j\nbGFzcyk7CiAgICAJCiAgICAgICAgYXNzZXJ0Tm90TnVsbChtb2RlbC5lbnRp\ndHkoSW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2UuY2xhc3MpKTsKICAgICAgICBh\nc3NlcnROb3ROdWxsKG1vZGVsLmVudGl0eShJbXBsaWNpdEZpZWxkQWNjZXNz\nU3ViY2xhc3MuY2xhc3MpKTsgICAgICAKICAgICAgICBhc3NlcnROb3ROdWxs\nKG1vZGVsLmVtYmVkZGFibGUoRW1iZWQwLmNsYXNzKSk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChtb2RlbC5lbWJlZGRhYmxlKEVtYmVkMS5jbGFzcykpOwog\nICAgICAgIAogICAgICAgIGphdmEudXRpbC5TZXQ8TWFuYWdlZFR5cGU8Pz4+\nIG1hbmFnZWRUeXBlcyA9IG1vZGVsLmdldE1hbmFnZWRUeXBlcygpOwogICAg\nICAgIG1hbmFnZWRUeXBlcy5yZW1vdmVBbGwobW9kZWwuZ2V0RW1iZWRkYWJs\nZXMoKSk7CiAgICAgICAgbWFuYWdlZFR5cGVzLnJlbW92ZUFsbChtb2RlbC5n\nZXRFbnRpdGllcygpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKG1vZGVsLm1h\nbmFnZWRUeXBlKEltcGxpY2l0RmllbGRBY2Nlc3NNYXBwZWRTdXBlcmNsYXNz\nLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShtYW5hZ2VkVHlwZXMuY29u\ndGFpbnMobW9kZWwubWFuYWdlZFR5cGUoSW1wbGljaXRGaWVsZEFjY2Vzc01h\ncHBlZFN1cGVyY2xhc3MuY2xhc3MpKSk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RHZXRBdHRyaWJ1dGVCeU5hbWVBbmRUeXBlRnJvbU1ldGFD\nbGFzcygpIHsKICAgICAgICBNYW5hZ2VkVHlwZTxJbXBsaWNpdEZpZWxkQWNj\nZXNzQmFzZT4gZTAgPSBtb2RlbC5lbnRpdHkoSW1wbGljaXRGaWVsZEFjY2Vz\nc0Jhc2UuY2xhc3MpOwogICAgICAgIGFzc2VydE5vdE51bGwoZTAuZ2V0QXR0\ncmlidXRlKCJmMCIpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGUwLmdldFNp\nbmd1bGFyQXR0cmlidXRlKCJmMCIsIFN0cmluZy5jbGFzcykpOwogICAgICAg\nIGFzc2VydFNhbWUoZTAuZ2V0QXR0cmlidXRlKCJmMCIpLCBlMC5nZXRTaW5n\ndWxhckF0dHJpYnV0ZSgiZjAiLCBTdHJpbmcuY2xhc3MpKTsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBlMC5nZXRTaW5ndWxhckF0dHJpYnV0ZSgiZjAi\nLCBFeHBsaWNpdEZpZWxkQWNjZXNzLmNsYXNzKTsKICAgICAgICAgICAgZmFp\nbCgiRXhwZWN0ZWQgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIik7CiAgICAg\nICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgLy8gZ29vZAogICAgICAgIH0KICAgICAgICBNYW5hZ2VkVHlw\nZTxJbXBsaWNpdEZpZWxkQWNjZXNzU3ViY2xhc3M+IGUxID0gbW9kZWwuZW50\naXR5KEltcGxpY2l0RmllbGRBY2Nlc3NTdWJjbGFzcy5jbGFzcyk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChlMS5nZXRBdHRyaWJ1dGUoImYwIikpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0QXR0cmlidXRlQnlEZWNsYXJh\ndGlvbigpIHsKICAgICAgICBNYW5hZ2VkVHlwZTxJbXBsaWNpdEZpZWxkQWNj\nZXNzQmFzZT4gZTAgPSBtb2RlbC5lbnRpdHkoSW1wbGljaXRGaWVsZEFjY2Vz\nc0Jhc2UuY2xhc3MpOwogICAgICAgIE1hbmFnZWRUeXBlPEltcGxpY2l0Rmll\nbGRBY2Nlc3NTdWJjbGFzcz4gZTEgPSBtb2RlbC5lbnRpdHkoSW1wbGljaXRG\naWVsZEFjY2Vzc1N1YmNsYXNzLmNsYXNzKTsKICAgICAgICBhc3NlcnROb3RO\ndWxsKGUwLmdldEF0dHJpYnV0ZSgiZjAiKSk7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbChlMS5nZXRBdHRyaWJ1dGUoImYwIikpOwogICAgICAgIFN5c3RlbS5l\ncnIucHJpbnRsbihlMC5nZXRBdHRyaWJ1dGUoImYwIikpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoZTAuZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoImYwIiwgU3Ry\naW5nLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlMS5nZXRTaW5n\ndWxhckF0dHJpYnV0ZSgiZjAiLCBTdHJpbmcuY2xhc3MpKTsKICAgICAgICBh\nc3NlcnRTYW1lKGUwLmdldEF0dHJpYnV0ZSgiZjAiKSwgZTAuZ2V0U2luZ3Vs\nYXJBdHRyaWJ1dGUoImYwIiwgU3RyaW5nLmNsYXNzKSk7CiAgICAgICAgYXNz\nZXJ0U2FtZShlMS5nZXRBdHRyaWJ1dGUoImYwIiksIGUxLmdldFNpbmd1bGFy\nQXR0cmlidXRlKCJmMCIsIFN0cmluZy5jbGFzcykpOwogICAgICAgIGFzc2Vy\ndE5vdFNhbWUoZTAuZ2V0QXR0cmlidXRlKCJmMCIpLCBlMS5nZXRBdHRyaWJ1\ndGUoImYwIikpOwogICAgICAgIGFzc2VydE5vdFNhbWUoZTAuZ2V0U2luZ3Vs\nYXJBdHRyaWJ1dGUoImYwIiwgU3RyaW5nLmNsYXNzKSwgZTEuZ2V0U2luZ3Vs\nYXJBdHRyaWJ1dGUoImYwIiwgU3RyaW5nLmNsYXNzKSk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChlMC5nZXREZWNsYXJlZEF0dHJpYnV0ZSgiZjAiKSk7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZTEuZ2V0RGVjbGFyZWRBdHRyaWJ1\ndGUoImYwIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGVkIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbiIpOwogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIGdvb2QKICAg\nICAgICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQQ0NvbGxl\nY3Rpb24oKSB7CiAgICAgICAgTWFuYWdlZFR5cGU8SW1wbGljaXRGaWVsZEFj\nY2Vzc0Jhc2U+IGUwID0gbW9kZWwuZW50aXR5KEltcGxpY2l0RmllbGRBY2Nl\nc3NCYXNlLmNsYXNzKTsKICAgICAgICBNYW5hZ2VkVHlwZTxFeHBsaWNpdEZp\nZWxkQWNjZXNzPiByMSA9IG1vZGVsLmVudGl0eShFeHBsaWNpdEZpZWxkQWNj\nZXNzLmNsYXNzKTsKICAgICAgICBDb2xsZWN0aW9uQXR0cmlidXRlPD8sPz4g\ncmVsQ29sbCA9IGUwLmdldENvbGxlY3Rpb24oImNvbGxlY3Rpb25SZWxhdGlv\nbiIsIEV4cGxpY2l0RmllbGRBY2Nlc3MuY2xhc3MpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuUGx1cmFsQXR0\ncmlidXRlLkNvbGxlY3Rpb25UeXBlLkNPTExFQ1RJT04sIAogICAgICAgICAg\nICAgICAgcmVsQ29sbC5nZXRDb2xsZWN0aW9uVHlwZSgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoZTAsIHJlbENvbGwuZ2V0RGVjbGFyaW5nVHlwZSgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMocjEsIHJlbENvbGwuZ2V0RWxlbWVudFR5\ncGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEV4cGxpY2l0RmllbGRBY2Nl\nc3MuY2xhc3MsIHJlbENvbGwuZ2V0QmluZGFibGVKYXZhVHlwZSgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoQmluZGFibGVUeXBlLlBMVVJBTF9BVFRSSUJV\nVEUsIHJlbENvbGwuZ2V0QmluZGFibGVUeXBlKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhBdHRyaWJ1dGUuUGVyc2lzdGVudEF0dHJpYnV0ZVR5cGUuT05F\nX1RPX01BTlksIHJlbENvbGwuZ2V0UGVyc2lzdGVudEF0dHJpYnV0ZVR5cGUo\nKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQQ0xpc3QoKSB7\nCiAgICAgICAgTWFuYWdlZFR5cGU8SW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2U+\nIGUwID0gbW9kZWwuZW50aXR5KEltcGxpY2l0RmllbGRBY2Nlc3NCYXNlLmNs\nYXNzKTsKICAgICAgICBNYW5hZ2VkVHlwZTxFeHBsaWNpdEZpZWxkQWNjZXNz\nPiByMSA9IG1vZGVsLmVudGl0eShFeHBsaWNpdEZpZWxkQWNjZXNzLmNsYXNz\nKTsKICAgICAgICBMaXN0QXR0cmlidXRlPD8sID8+IHJlbExpc3QgPSBlMC5n\nZXRMaXN0KCJsaXN0UmVsYXRpb24iLCBFeHBsaWNpdEZpZWxkQWNjZXNzLmNs\nYXNzKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoQ29sbGVjdGlv\nblR5cGUuTElTVCwgcmVsTGlzdC5nZXRDb2xsZWN0aW9uVHlwZSgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoZTAsIHJlbExpc3QuZ2V0RGVjbGFyaW5nVHlw\nZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMocjEsIHJlbExpc3QuZ2V0RWxl\nbWVudFR5cGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEV4cGxpY2l0Rmll\nbGRBY2Nlc3MuY2xhc3MsIHJlbExpc3QuZ2V0QmluZGFibGVKYXZhVHlwZSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoQmluZGFibGVUeXBlLlBMVVJBTF9B\nVFRSSUJVVEUsIHJlbExpc3QuZ2V0QmluZGFibGVUeXBlKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscyhQZXJzaXN0ZW50QXR0cmlidXRlVHlwZS5PTkVfVE9f\nTUFOWSwgcmVsTGlzdC5nZXRQZXJzaXN0ZW50QXR0cmlidXRlVHlwZSgpKTsK\nICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFBDU2V0KCkgewogICAg\nICAgIE1hbmFnZWRUeXBlPEltcGxpY2l0RmllbGRBY2Nlc3NCYXNlPiBlMCA9\nIG1vZGVsLmVudGl0eShJbXBsaWNpdEZpZWxkQWNjZXNzQmFzZS5jbGFzcyk7\nCiAgICAgICAgTWFuYWdlZFR5cGU8RXhwbGljaXRGaWVsZEFjY2Vzcz4gcjEg\nPSBtb2RlbC5lbnRpdHkoRXhwbGljaXRGaWVsZEFjY2Vzcy5jbGFzcyk7CiAg\nICAgICAgU2V0QXR0cmlidXRlPD8sID8+IHJlbFNldCA9IGUwLmdldFNldCgi\nc2V0UmVsYXRpb24iLCBFeHBsaWNpdEZpZWxkQWNjZXNzLmNsYXNzKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoamF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVs\nLlBsdXJhbEF0dHJpYnV0ZS5Db2xsZWN0aW9uVHlwZS5TRVQsIHJlbFNldC5n\nZXRDb2xsZWN0aW9uVHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZTAs\nIHJlbFNldC5nZXREZWNsYXJpbmdUeXBlKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscyhyMSwgcmVsU2V0LmdldEVsZW1lbnRUeXBlKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyhFeHBsaWNpdEZpZWxkQWNjZXNzLmNsYXNzLCByZWxTZXQu\nZ2V0QmluZGFibGVKYXZhVHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nQmluZGFibGVUeXBlLlBMVVJBTF9BVFRSSUJVVEUsIHJlbFNldC5nZXRCaW5k\nYWJsZVR5cGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFBlcnNpc3RlbnRB\ndHRyaWJ1dGVUeXBlLk9ORV9UT19NQU5ZLCByZWxTZXQuZ2V0UGVyc2lzdGVu\ndEF0dHJpYnV0ZVR5cGUoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3REZWNsYXJlZEZpZWxkcygpIHsKICAgICAgICBNYW5hZ2VkVHlwZTxJ\nbXBsaWNpdEZpZWxkQWNjZXNzU3ViY2xhc3M+IGUxID0gbW9kZWwuZW50aXR5\nKEltcGxpY2l0RmllbGRBY2Nlc3NTdWJjbGFzcy5jbGFzcyk7CiAgICAgICAg\namF2YS51dGlsLlNldDw/PiBhbGwgPSBlMS5nZXRBdHRyaWJ1dGVzKCk7CiAg\nICAgICAgamF2YS51dGlsLlNldDw/PiBkZWNsID0gZTEuZ2V0RGVjbGFyZWRB\ndHRyaWJ1dGVzKCk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgiQWxsIGZpZWxkcyAi\nICsgYWxsICsgIlxyXG5EZWNsYXJlZCBmaWVsZHMgIiArIGRlY2wgKyAiXHJc\nbiIrCiAgICAgICAgICJleHBlY2V0ZCBub3QgYWxsIGZpZWxkcyBhcyBkZWNs\nYXJlZCIsIGFsbC5zaXplKCkgPiBkZWNsLnNpemUoKSk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3ROb25FeGlzdGVudEZpZWxkKCkgewogICAg\nICAgIE1hbmFnZWRUeXBlPEltcGxpY2l0RmllbGRBY2Nlc3NCYXNlPiBlMCA9\nIG1vZGVsLmVudGl0eShJbXBsaWNpdEZpZWxkQWNjZXNzQmFzZS5jbGFzcyk7\nCiAgICAgICAgTWFuYWdlZFR5cGU8SW1wbGljaXRGaWVsZEFjY2Vzc1N1YmNs\nYXNzPiBlMSA9IG1vZGVsLmVudGl0eShJbXBsaWNpdEZpZWxkQWNjZXNzU3Vi\nY2xhc3MuY2xhc3MpOwogICAgICAgIGFzc2VydEZhaWxzKGUwLCAieHl6Iiwg\nZmFsc2UpOwogICAgICAgIGFzc2VydEZhaWxzKGUxLCAiZjAiLCB0cnVlKTsK\nICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBUZXN0IGFsbCBhdHRyaWJ1dGUg\nZ2V0dGVycyBvZiBNYW5hZ2VkVHlwZSBmb3IgdmFsaWQgaW5wdXRzLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0QXR0cmlidXRlR2V0dGVyc0ZvclZh\nbGlkSW5wdXQoKSB7CiAgICAgICAgSWRlbnRpZmlhYmxlVHlwZTxJbXBsaWNp\ndEZpZWxkQWNjZXNzU3ViY2xhc3M+IHN1YkNsYXNzID0gbW9kZWwuZW50aXR5\nKEltcGxpY2l0RmllbGRBY2Nlc3NTdWJjbGFzcy5jbGFzcyk7CiAgICAgICAg\nSWRlbnRpZmlhYmxlVHlwZTxJbXBsaWNpdEZpZWxkQWNjZXNzQmFzZT4gc3Vw\nZXJDbGFzcyA9IG1vZGVsLmVudGl0eShJbXBsaWNpdEZpZWxkQWNjZXNzQmFz\nZS5jbGFzcyk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKHN1cGVy\nQ2xhc3MsIHN1YkNsYXNzLmdldFN1cGVydHlwZSgpKTsKICAgICAgICAKICAg\nICAgICBhc3NlcnROb3ROdWxsKHN1YkNsYXNzLmdldEF0dHJpYnV0ZSgiZjAi\nKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdXBlckNsYXNzLmdldEF0dHJp\nYnV0ZSgiZjAiKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdWJDbGFzcy5n\nZXRBdHRyaWJ1dGUoIm1hcFJlbGF0aW9uS2V5RW1iZWRkZWQiKSk7CiAgICAg\nICAgCiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdWJDbGFzcy5nZXRBdHRyaWJ1\ndGVzKCkpOwogICAgICAgIGFzc2VydE5vdE51bGwoc3VwZXJDbGFzcy5nZXRB\ndHRyaWJ1dGVzKCkpOwogICAgICAgIGFzc2VydEVxdWFscygxNCwgc3ViQ2xh\nc3MuZ2V0QXR0cmlidXRlcygpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEyLCBzdXBlckNsYXNzLmdldEF0dHJpYnV0ZXMoKS5zaXplKCkpOwog\nICAgICAgIAogICAgICAgIGFzc2VydE5vdE51bGwoc3VwZXJDbGFzcy5nZXRD\nb2xsZWN0aW9uKCJjb2xsZWN0aW9uUmVsYXRpb24iKSk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChzdXBlckNsYXNzLmdldENvbGxlY3Rpb24oImNvbGxlY3Rp\nb25SZWxhdGlvbiIsIEV4cGxpY2l0RmllbGRBY2Nlc3MuY2xhc3MpKTsKICAg\nICAgICAKICAgICAgICBhc3NlcnROb3ROdWxsKHN1YkNsYXNzLmdldFBsdXJh\nbEF0dHJpYnV0ZXMoKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdXBlckNs\nYXNzLmdldFBsdXJhbEF0dHJpYnV0ZXMoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDYsIHN1YkNsYXNzLmdldFBsdXJhbEF0dHJpYnV0ZXMoKS5zaXplKCkp\nOwogICAgICAgIGFzc2VydEVxdWFscyg1LCBzdXBlckNsYXNzLmdldFBsdXJh\nbEF0dHJpYnV0ZXMoKS5zaXplKCkpOwogICAgICAgIAogICAgICAgIGFzc2Vy\ndE5vdE51bGwoc3ViQ2xhc3MuZ2V0RGVjbGFyZWRBdHRyaWJ1dGUoIm1hcFJl\nbGF0aW9uS2V5RW1iZWRkZWQiKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nTm90TnVsbChzdWJDbGFzcy5nZXREZWNsYXJlZEF0dHJpYnV0ZXMoKSk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChzdXBlckNsYXNzLmdldERlY2xhcmVkQXR0\ncmlidXRlcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgc3ViQ2xhc3Mu\nZ2V0RGVjbGFyZWRBdHRyaWJ1dGVzKCkuc2l6ZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoOSwgc3VwZXJDbGFzcy5nZXREZWNsYXJlZEF0dHJpYnV0ZXMo\nKS5zaXplKCkpOwogICAgICAgIAogICAgICAgIGFzc2VydE5vdE51bGwoc3Vw\nZXJDbGFzcy5nZXREZWNsYXJlZENvbGxlY3Rpb24oImNvbGxlY3Rpb25SZWxh\ndGlvbiIpKTsKICAgICAgICAKICAgICAgICBhc3NlcnROb3ROdWxsKHN1YkNs\nYXNzLmdldERlY2xhcmVkUGx1cmFsQXR0cmlidXRlcygpKTsKICAgICAgICBh\nc3NlcnROb3ROdWxsKHN1cGVyQ2xhc3MuZ2V0RGVjbGFyZWRQbHVyYWxBdHRy\naWJ1dGVzKCkpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBzdWJDbGFzcy5n\nZXREZWNsYXJlZFBsdXJhbEF0dHJpYnV0ZXMoKS5zaXplKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscyg1LCBzdXBlckNsYXNzLmdldERlY2xhcmVkUGx1cmFs\nQXR0cmlidXRlcygpLnNpemUoKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nTm90TnVsbChzdXBlckNsYXNzLmdldERlY2xhcmVkTGlzdCgibGlzdFJlbGF0\naW9uIikpOwogICAgICAgIGFzc2VydE5vdE51bGwoc3VwZXJDbGFzcy5nZXRE\nZWNsYXJlZExpc3QoImxpc3RSZWxhdGlvbiIsIEV4cGxpY2l0RmllbGRBY2Nl\nc3MuY2xhc3MpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHN1cGVyQ2xhc3Mu\nZ2V0RGVjbGFyZWRNYXAoIm1hcFJlbGF0aW9uS2V5QmFzaWMiKSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChzdXBlckNsYXNzLmdldERlY2xhcmVkTWFwKCJt\nYXBSZWxhdGlvbktleUJhc2ljIiwgSW50ZWdlci5jbGFzcywgRXhwbGljaXRG\naWVsZEFjY2Vzcy5jbGFzcykpOwogICAgICAgIGFzc2VydE5vdE51bGwoc3Vw\nZXJDbGFzcy5nZXREZWNsYXJlZFNldCgic2V0UmVsYXRpb24iKSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChzdXBlckNsYXNzLmdldERlY2xhcmVkU2V0KCJz\nZXRSZWxhdGlvbiIsIEV4cGxpY2l0RmllbGRBY2Nlc3MuY2xhc3MpKTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKHN1cGVyQ2xhc3MuZ2V0RGVjbGFyZWRTaW5n\ndWxhckF0dHJpYnV0ZSgib25lMm9uZVJlbGF0aW9uIikpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoc3VwZXJDbGFzcy5nZXREZWNsYXJlZFNpbmd1bGFyQXR0\ncmlidXRlKCJvbmUyb25lUmVsYXRpb24iLCBFeHBsaWNpdEZpZWxkQWNjZXNz\nLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdXBlckNsYXNzLmdl\ndERlY2xhcmVkU2luZ3VsYXJBdHRyaWJ1dGVzKCkpOwogICAgICAgIAogICAg\nICAgIAogICAgICAgIGFzc2VydE5vdE51bGwoc3ViQ2xhc3MuZ2V0TGlzdCgi\nbGlzdFJlbGF0aW9uIikpOwogICAgICAgIGFzc2VydE5vdE51bGwoc3ViQ2xh\nc3MuZ2V0TGlzdCgibGlzdFJlbGF0aW9uIiwgRXhwbGljaXRGaWVsZEFjY2Vz\ncy5jbGFzcykpOwogICAgICAgIGFzc2VydE5vdE51bGwoc3ViQ2xhc3MuZ2V0\nTWFwKCJtYXBSZWxhdGlvbktleUJhc2ljIikpOwogICAgICAgIGFzc2VydE5v\ndE51bGwoc3ViQ2xhc3MuZ2V0TWFwKCJtYXBSZWxhdGlvbktleUJhc2ljIiwg\nSW50ZWdlci5jbGFzcywgRXhwbGljaXRGaWVsZEFjY2Vzcy5jbGFzcykpOwog\nICAgICAgIGFzc2VydE5vdE51bGwoc3ViQ2xhc3MuZ2V0UGVyc2lzdGVuY2VU\neXBlKCkpOwogICAgICAgIGFzc2VydE5vdE51bGwoc3ViQ2xhc3MuZ2V0U2V0\nKCJzZXRSZWxhdGlvbiIpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHN1YkNs\nYXNzLmdldFNldCgic2V0UmVsYXRpb24iLCBFeHBsaWNpdEZpZWxkQWNjZXNz\nLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdWJDbGFzcy5nZXRT\naW5ndWxhckF0dHJpYnV0ZSgib25lMm9uZVJlbGF0aW9uIikpOwogICAgICAg\nIGFzc2VydE5vdE51bGwoc3ViQ2xhc3MuZ2V0U2luZ3VsYXJBdHRyaWJ1dGUo\nIm9uZTJvbmVSZWxhdGlvbiIsIEV4cGxpY2l0RmllbGRBY2Nlc3MuY2xhc3Mp\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHN1YkNsYXNzLmdldFNpbmd1bGFy\nQXR0cmlidXRlcygpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVz\ndFNpbXBsZUlkQXR0cmlidXRlcygpIHsKICAgICAgICBJZGVudGlmaWFibGVU\neXBlPE9uZU9uZVBhcmVudD4gZW50aXR5ID0gbW9kZWwuZW50aXR5KE9uZU9u\nZVBhcmVudC5jbGFzcyk7CiAgICAgICAgZm9yIChBdHRyaWJ1dGU8PyBzdXBl\nciBPbmVPbmVQYXJlbnQsPz4gYSA6IGVudGl0eS5nZXRBdHRyaWJ1dGVzKCkp\nIHsKICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKGEuZ2V0TmFtZSgp\nKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbnRpdHkuZ2V0\nSWQobG9uZy5jbGFzcykpOwogICAgICAgIGFzc2VydE5vdE51bGwoZW50aXR5\nLmdldERlY2xhcmVkSWQobG9uZy5jbGFzcykpOwogICAgICAgIGFzc2VydFRy\ndWUoZW50aXR5Lmhhc1NpbmdsZUlkQXR0cmlidXRlKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyhsb25nLmNsYXNzLCBlbnRpdHkuZ2V0SWRUeXBlKCkuZ2V0\nSmF2YVR5cGUoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RW\nZXJzaW9uQXR0cmlidXRlcygpIHsKICAgICAgICBJZGVudGlmaWFibGVUeXBl\nPE9uZU9uZVBhcmVudD4gZW50aXR5ID0gbW9kZWwuZW50aXR5KE9uZU9uZVBh\ncmVudC5jbGFzcyk7CiAgICAgICAgZm9yIChBdHRyaWJ1dGU8PyBzdXBlciBP\nbmVPbmVQYXJlbnQsPz4gYSA6IGVudGl0eS5nZXRBdHRyaWJ1dGVzKCkpIHsK\nICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKGEuZ2V0TmFtZSgpKTsK\nICAgICAgICB9CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbnRpdHkuZ2V0VmVy\nc2lvbihJbnRlZ2VyLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChl\nbnRpdHkuZ2V0RGVjbGFyZWRWZXJzaW9uKEludGVnZXIuY2xhc3MpKTsKICAg\nICAgICBhc3NlcnRUcnVlKGVudGl0eS5oYXNWZXJzaW9uQXR0cmlidXRlKCkp\nOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0SWRDbGFzc0F0dHJp\nYnV0ZXMoKSB7CiAgICAgICAgSWRlbnRpZmlhYmxlVHlwZTxCb29rPiBlbnRp\ndHkgPSBtb2RlbC5lbnRpdHkoQm9vay5jbGFzcyk7CiAgICAgICAgCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDIsIGVudGl0eS5nZXRJZENsYXNzQXR0cmlidXRl\ncygpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbnRpdHkuZ2V0\nSWQoU3RyaW5nLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbnRp\ndHkuZ2V0SWQoTGlicmFyeS5jbGFzcykpOwogICAgICAgIGFzc2VydE5vdE51\nbGwoZW50aXR5LmdldERlY2xhcmVkSWQoU3RyaW5nLmNsYXNzKSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChlbnRpdHkuZ2V0RGVjbGFyZWRJZChMaWJyYXJ5\nLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEJvb2tJZC5jbGFzcywg\nZW50aXR5LmdldElkVHlwZSgpLmdldEphdmFUeXBlKCkpOwogICAgICAgIGFz\nc2VydEZhbHNlKGVudGl0eS5oYXNTaW5nbGVJZEF0dHJpYnV0ZSgpKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0QmFzaWNBdHRyaWJ1dGVUeXBlKCkg\newogICAgICAgIE1hbmFnZWRUeXBlPEltcGxpY2l0RmllbGRBY2Nlc3NCYXNl\nPiBlMCA9IG1vZGVsLmVudGl0eShJbXBsaWNpdEZpZWxkQWNjZXNzQmFzZS5j\nbGFzcyk7CiAgICAgICAgU2luZ3VsYXJBdHRyaWJ1dGU8SW1wbGljaXRGaWVs\nZEFjY2Vzc0Jhc2UsPz4gcEludCA9IGUwLmdldERlY2xhcmVkU2luZ3VsYXJB\ndHRyaWJ1dGUoInByaW1pdGl2ZUludCIpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhQZXJzaXN0ZW50QXR0cmlidXRlVHlwZS5CQVNJQywgcEludC5nZXRQZXJz\naXN0ZW50QXR0cmlidXRlVHlwZSgpKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdE5vdEZvdW5kRXJyb3JNZXNzYWdlKCkgewogICAgICAgIElk\nZW50aWZpYWJsZVR5cGU8SW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2U+IGUwID0g\nbW9kZWwuZW50aXR5KEltcGxpY2l0RmllbGRBY2Nlc3NCYXNlLmNsYXNzKTsK\nICAgICAgICBTdHJpbmcgbmFtZSA9ICJ1bmtub3duIjsKICAgICAgICB0cnkg\newogICAgICAgICAgTWV0aG9kW10gZ2V0dGVycyA9IHsKICAgICAgICAgICAg\nZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldEF0dHJpYnV0ZSIsICAgICAg\nICAgIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzc30pLAogICAgICAgICAg\nICBlMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0Q29sbGVjdGlvbiIsICAg\nICAgICAgbmV3IENsYXNzPD8+W117U3RyaW5nLmNsYXNzfSksCiAgICAgICAg\nICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXRMaXN0IiwgICAgICAg\nICAgICAgICBuZXcgQ2xhc3M8Pz5bXXtTdHJpbmcuY2xhc3N9KSwKICAgICAg\nICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldFNldCIsICAgICAg\nICAgICAgICAgIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzc30pLAogICAg\nICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0U2luZ3VsYXJB\ndHRyaWJ1dGUiLCAgbmV3IENsYXNzPD8+W117U3RyaW5nLmNsYXNzfSksCiAg\nICAgICAgICAgIAogICAgICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhv\nZCgiZ2V0RGVjbGFyZWRBdHRyaWJ1dGUiLCAgbmV3IENsYXNzPD8+W117U3Ry\naW5nLmNsYXNzfSksCiAgICAgICAgICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0\naG9kKCJnZXREZWNsYXJlZENvbGxlY3Rpb24iLCBuZXcgQ2xhc3M8Pz5bXXtT\ndHJpbmcuY2xhc3N9KSwKICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRN\nZXRob2QoImdldERlY2xhcmVkTGlzdCIsICAgICAgIG5ldyBDbGFzczw/Pltd\ne1N0cmluZy5jbGFzc30pLAogICAgICAgICAgICBlMC5nZXRDbGFzcygpLmdl\ndE1ldGhvZCgiZ2V0RGVjbGFyZWRTZXQiLCAgICAgICAgbmV3IENsYXNzPD8+\nW117U3RyaW5nLmNsYXNzfSksCiAgICAgICAgICAgIGUwLmdldENsYXNzKCku\nZ2V0TWV0aG9kKCJnZXREZWNsYXJlZFNpbmd1bGFyQXR0cmlidXRlIiwgbmV3\nIENsYXNzPD8+W117U3RyaW5nLmNsYXNzfSksCiAgICAgICAgICAgIAogICAg\nICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0QXR0cmlidXRl\nIiwgICAgICAgICAgbmV3IENsYXNzPD8+W117U3RyaW5nLmNsYXNzLCBDbGFz\ncy5jbGFzc30pLAogICAgICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhv\nZCgiZ2V0Q29sbGVjdGlvbiIsICAgICAgICAgbmV3IENsYXNzPD8+W117U3Ry\naW5nLmNsYXNzLCBDbGFzcy5jbGFzc30pLAogICAgICAgICAgICBlMC5nZXRD\nbGFzcygpLmdldE1ldGhvZCgiZ2V0TGlzdCIsICAgICAgICAgICAgICAgbmV3\nIENsYXNzPD8+W117U3RyaW5nLmNsYXNzLCBDbGFzcy5jbGFzc30pLAogICAg\nICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0U2V0IiwgICAg\nICAgICAgICAgICAgbmV3IENsYXNzPD8+W117U3RyaW5nLmNsYXNzLCBDbGFz\ncy5jbGFzc30pLAogICAgICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhv\nZCgiZ2V0U2luZ3VsYXJBdHRyaWJ1dGUiLCAgbmV3IENsYXNzPD8+W117U3Ry\naW5nLmNsYXNzLCBDbGFzcy5jbGFzc30pLAogICAgICAgICAgICAKICAgICAg\nICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldERlY2xhcmVkQXR0\ncmlidXRlIiwgIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzcywgQ2xhc3Mu\nY2xhc3N9KSwKICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2Qo\nImdldERlY2xhcmVkQ29sbGVjdGlvbiIsIG5ldyBDbGFzczw/Pltde1N0cmlu\nZy5jbGFzcywgQ2xhc3MuY2xhc3N9KSwKICAgICAgICAgICAgZTAuZ2V0Q2xh\nc3MoKS5nZXRNZXRob2QoImdldERlY2xhcmVkTGlzdCIsICAgICAgIG5ldyBD\nbGFzczw/Pltde1N0cmluZy5jbGFzcywgQ2xhc3MuY2xhc3N9KSwKICAgICAg\nICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldERlY2xhcmVkU2V0\nIiwgICAgICAgIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzcywgQ2xhc3Mu\nY2xhc3N9KSwKICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2Qo\nImdldERlY2xhcmVkU2luZ3VsYXJBdHRyaWJ1dGUiLCBuZXcgQ2xhc3M8Pz5b\nXXtTdHJpbmcuY2xhc3MsIENsYXNzLmNsYXNzfSksCgogICAgICAgICAgICBl\nMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0TWFwIiwgICAgICAgICAgbmV3\nIENsYXNzPD8+W117U3RyaW5nLmNsYXNzfSksCiAgICAgICAgICAgIGUwLmdl\ndENsYXNzKCkuZ2V0TWV0aG9kKCJnZXRNYXAiLCAgICAgICAgICBuZXcgQ2xh\nc3M8Pz5bXXtTdHJpbmcuY2xhc3MsIENsYXNzLmNsYXNzLCBDbGFzcy5jbGFz\nc30pLAogICAgICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0\nRGVjbGFyZWRNYXAiLCAgbmV3IENsYXNzPD8+W117U3RyaW5nLmNsYXNzfSks\nCiAgICAgICAgICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXREZWNs\nYXJlZE1hcCIsICBuZXcgQ2xhc3M8Pz5bXXtTdHJpbmcuY2xhc3MsIENsYXNz\nLmNsYXNzLCBDbGFzcy5jbGFzc30pLAogICAgICAgICAgfTsKLy8gICAgICAg\nICAgICAgICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXREZWNsYXJl\nZFZlcnNpb24iLCBuZXcgQ2xhc3M8Pz5bXXtDbGFzcy5jbGFzc30pLAogICAg\nICAgIAogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZ2V0dGVycy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICBPYmplY3RbXSBhcmdzOwogICAgICAg\nICAgICBpZiAoaSA8IDEwKSB7CiAgICAgICAgICAgICAgICBhcmdzID0gbmV3\nIE9iamVjdFtde25hbWV9OwogICAgICAgICAgICB9IGVsc2UgaWYgKGkgPCAy\nMCkgewogICAgICAgICAgICAgICAgYXJncyA9IG5ldyBPYmplY3RbXXtuYW1l\nLCBPYmplY3QuY2xhc3N9OwogICAgICAgICAgICB9IGVsc2UgaWYgKGklMiA9\nPSAwKSB7CiAgICAgICAgICAgICAgICBhcmdzID0gbmV3IE9iamVjdFtde25h\nbWV9OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXJn\ncyA9IG5ldyBPYmplY3RbXXtuYW1lLCBPYmplY3QuY2xhc3MsIFN0cmluZy5j\nbGFzc307CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgIGdldHRlcnNbaV0uaW52b2tlKGUwLCBhcmdzKTsKICAgICAg\nICAgICAgICAgIGZhaWwoKTsKICAgICAgICAgICAgfSAgY2F0Y2ggKEludm9j\nYXRpb25UYXJnZXRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICBTeXN0\nZW0uZXJyLnByaW50bG4oIkV4cGVjZXRlZDoiICsgZS5nZXRUYXJnZXRFeGNl\ncHRpb24oKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZS5wcmludFN0YWNr\nVHJhY2UoKTsKICAgICAgICAgICAgZmFpbCgpOwogICAgICAgIH0KICAgIH0K\nICAgIAogICAgdm9pZCBhc3NlcnRGYWlscyhNYW5hZ2VkVHlwZTw/PiB0eXBl\nLCBTdHJpbmcgbmFtZSwgYm9vbGVhbiBkZWMpIHsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBBdHRyaWJ1dGU8Pyw/PiBhID0gZGVjID8gdHlwZS5nZXRE\nZWNsYXJlZEF0dHJpYnV0ZShuYW1lKSAKICAgICAgICAgICAgICAgIDogdHlw\nZS5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgICAgICAgICAgIGZhaWwoIkV4cGVj\ndGVkIHRvIGZhaWwgIiArIG5hbWUgKyAiIG9uICIgKyB0eXBlKTsKICAgICAg\nICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oIkV4cGVjZXRlZDoiICsgZSk7\nCiAgICAgICAgfQogICAgfQogICAgCiAgICBQZXJzaXN0ZW5jZVR5cGUgY2F0\nZWdvcml6ZShDbGFzczw/PiBjKSB7CiAgICAgICAgQWJzdHJhY3RNYW5hZ2Vk\nVHlwZTw/PiB0eXBlID0gKEFic3RyYWN0TWFuYWdlZFR5cGU8Pz4pbW9kZWwu\nZ2V0VHlwZShjKTsKICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEgPSB0eXBl\nLm1ldGE7CiAgICAgICAgcmV0dXJuIE1ldGFtb2RlbEltcGwuZ2V0UGVyc2lz\ndGVuY2VUeXBlKG1ldGEpOwogICAgfQogICAgCiAgICB2b2lkIGFzc2VydENh\ndGVnb3J5KFBlcnNpc3RlbmNlVHlwZSBjYXRlZ29yeSwgQ2xhc3M8Pz4gY2xz\nKSB7CiAgICAJYXNzZXJ0RXF1YWxzKGNscy50b1N0cmluZygpLCBjYXRlZ29y\neSwgY2F0ZWdvcml6ZShjbHMpKTsKICAgIH0KICAgIAogICAgRmllbGQgZ2V0\nU3RhdGljRmllbGQoQ2xhc3M8Pz4gY2xzLCBTdHJpbmcgbmFtZSkgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIEZpZWxkW10gZmRzID0gY2xzLmdldERl\nY2xhcmVkRmllbGRzKCk7CiAgICAgICAgICAgIGZvciAoRmllbGQgZiA6IGZk\ncykgewogICAgICAgICAgICAgICAgaW50IG1vZHMgPSBmLmdldE1vZGlmaWVy\ncygpOwogICAgICAgICAgICAgICAgaWYgKGYuZ2V0TmFtZSgpLmVxdWFscyhu\nYW1lKSAmJiBNb2RpZmllci5pc1N0YXRpYyhtb2RzKSkKICAgICAgICAgICAg\nICAgICAgICByZXR1cm4gZjsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQogICAgICAgIHJldHVybiBu\ndWxsOwogICAgfQp9Cg==\n","encoding":"base64"}

