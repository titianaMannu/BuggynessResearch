{"sha":"26aa9e2b32d9081379aa5fa6449329b81c328128","node_id":"MDQ6QmxvYjIwNjM2NDoyNmFhOWUyYjMyZDkwODEzNzlhYTVmYTY0NDkzMjliODFjMzI4MTI4","size":11374,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/26aa9e2b32d9081379aa5fa6449329b81c328128","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeTsKCmlt\ncG9ydCBqYXZhLnV0aWwuKjsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29u\nZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNx\nbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuRGVyYnlEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1UZXN0Q2FzZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5zaW1wbGUuQWxsRmll\nbGRUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5Bcmd1bWVudEV4Y2VwdGlvbjsKCi8qKgogKiA8cD5UZXN0cyBncm91cGlu\nZyBhbmQgaGF2aW5nIGNhcGFiaWxpdGllcy48L3A+CiAqCiAqIEBhdXRob3Ig\nQWJlIFdoaXRlCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgR3JvdXBpbmdU\nZXN0Q2FzZQogICAgZXh0ZW5kcyBTaW5nbGVFTVRlc3RDYXNlIHsKCiAgICBw\ncm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBwcmVwYXJlUXVlcnkoUXVlcnkgcSk7\nCgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgc3VwZXIuc2V0\nVXAoQWxsRmllbGRUeXBlcy5jbGFzcywgQ0xFQVJfVEFCTEVTLAogICAgICAg\nICAgICAib3BlbmpwYS5Db21wYXRpYmlsaXR5IiwgIkpQUUw9d2FybiIpOwoK\nICAgICAgICBBbGxGaWVsZFR5cGVzIHBjMSA9IG5ldyBBbGxGaWVsZFR5cGVz\nKCk7CiAgICAgICAgQWxsRmllbGRUeXBlcyBwYzIgPSBuZXcgQWxsRmllbGRU\neXBlcygpOwogICAgICAgIEFsbEZpZWxkVHlwZXMgcGMzID0gbmV3IEFsbEZp\nZWxkVHlwZXMoKTsKICAgICAgICBBbGxGaWVsZFR5cGVzIHBjNCA9IG5ldyBB\nbGxGaWVsZFR5cGVzKCk7CgogICAgICAgIC8vIHBjMSBhbmQgcGMyLCBwYzMg\nYW5kIHBjNCBncm91cGVkIG9uIGludEZpZWxkLCBzaG9ydEZpZWxkCiAgICAg\nICAgcGMxLnNldEludEZpZWxkKDEpOwogICAgICAgIHBjMS5zZXRTaG9ydEZp\nZWxkKChzaG9ydCkgLTEpOwogICAgICAgIHBjMi5zZXRJbnRGaWVsZCgxKTsK\nICAgICAgICBwYzIuc2V0U2hvcnRGaWVsZCgoc2hvcnQpIC0xKTsKICAgICAg\nICBwYzMuc2V0SW50RmllbGQoMik7CiAgICAgICAgcGMzLnNldFNob3J0Rmll\nbGQoKHNob3J0KSAtMik7CiAgICAgICAgcGM0LnNldEludEZpZWxkKDIpOwog\nICAgICAgIHBjNC5zZXRTaG9ydEZpZWxkKChzaG9ydCkgLTIpOwoKICAgICAg\nICAvLyBwYzEgYW5kIHBjMiBncm91cGVkIG9uIHN0cmluZ0ZpZWxkCiAgICAg\nICAgcGMxLnNldFN0cmluZ0ZpZWxkKCJhYmMiKTsKICAgICAgICBwYzIuc2V0\nU3RyaW5nRmllbGQoImFjZCIpOwogICAgICAgIHBjMy5zZXRTdHJpbmdGaWVs\nZCgiZGVmIik7CiAgICAgICAgcGM0LnNldFN0cmluZ0ZpZWxkKCJlZmciKTsK\nCiAgICAgICAgLy8gcGMyIGFuZCBwYzMgZ3JvdXBlZCBvbiBieXRlRmllbGQK\nICAgICAgICBwYzIuc2V0Qnl0ZUZpZWxkKChieXRlKSAxKTsKICAgICAgICBw\nYzMuc2V0Qnl0ZUZpZWxkKChieXRlKSAxKTsKICAgICAgICBwYzEuc2V0Qnl0\nZUZpZWxkKChieXRlKSAwKTsKICAgICAgICBwYzQuc2V0Qnl0ZUZpZWxkKChi\neXRlKSAyKTsKCiAgICAgICAgLy8gbG9uZ0ZpZWxkIGlzIHVuaXF1ZSBpZAog\nICAgICAgIHBjMS5zZXRMb25nRmllbGQoMUwpOwogICAgICAgIHBjMi5zZXRM\nb25nRmllbGQoMkwpOwogICAgICAgIHBjMy5zZXRMb25nRmllbGQoM0wpOwog\nICAgICAgIHBjNC5zZXRMb25nRmllbGQoNEwpOwoKICAgICAgICAvLyBzZXQg\ndXAgc29tZSByZWxhdGlvbnMKICAgICAgICBwYzEuc2V0U2VsZk9uZU9uZShw\nYzQpOwogICAgICAgIHBjMi5zZXRTZWxmT25lT25lKHBjMyk7CiAgICAgICAg\ncGMzLnNldFNlbGZPbmVPbmUocGMyKTsKICAgICAgICBwYzQuc2V0U2VsZk9u\nZU9uZShwYzEpOwoKICAgICAgICAvLyBpZiB2YXJpYWJsZSB0ZXN0aW5nLCBz\nZXQgdXAgc29tZSAxLU1zIGluc3RlYWQgb2YgdGhlIDEtMXMgYWJvdmUKICAg\nICAgICBpZiAoZ2V0TmFtZSgpLnN0YXJ0c1dpdGgoInRlc3RWYXJpYWJsZSIp\nKSB7CiAgICAgICAgICAgIHBjMS5zZXRTZWxmT25lT25lKHBjMSk7CiAgICAg\nICAgICAgIHBjMi5zZXRTZWxmT25lT25lKHBjMSk7CiAgICAgICAgICAgIHBj\nMS5nZXRTZWxmT25lTWFueSgpLmFkZChwYzEpOwogICAgICAgICAgICBwYzEu\nZ2V0U2VsZk9uZU1hbnkoKS5hZGQocGMyKTsKCiAgICAgICAgICAgIHBjMy5z\nZXRTZWxmT25lT25lKHBjMyk7CiAgICAgICAgICAgIHBjNC5zZXRTZWxmT25l\nT25lKHBjMyk7CiAgICAgICAgICAgIHBjMy5nZXRTZWxmT25lTWFueSgpLmFk\nZChwYzMpOwogICAgICAgICAgICBwYzMuZ2V0U2VsZk9uZU1hbnkoKS5hZGQo\ncGM0KTsKICAgICAgICB9CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KHBjMSk7CiAg\nICAgICAgZW0ucGVyc2lzdChwYzIpOwogICAgICAgIGVtLnBlcnNpc3QocGMz\nKTsKICAgICAgICBlbS5wZXJzaXN0KHBjNCk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTaW1wbGVHcm91cCgpIHsKICAgICAg\nICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBvLmludEZpZWxk\nIGZyb20gQWxsRmllbGRUeXBlcyBvICIgKwogICAgICAgICAgICAiZ3JvdXAg\nYnkgby5pbnRGaWVsZCBvcmRlciBieSBvLmludEZpZWxkIGFzYyIpOwogICAg\nICAgIHByZXBhcmVRdWVyeShxKTsKICAgICAgICBMaXN0IHJlcyA9IHEuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscygyLCByZXMuc2l6\nZSgpKTsKICAgICAgICBJdGVyYXRvciBpdHIgPSByZXMuaXRlcmF0b3IoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMobmV3IEludGVnZXIoMSksIGl0ci5uZXh0\nKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhuZXcgSW50ZWdlcigyKSwgaXRy\nLm5leHQoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZSghaXRyLmhhc05leHQoKSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE9yZGVyQnlBZ2dyZWdhdGUo\nKSB7CiAgICAgICAgLy8gdGhpcyBpcyBhbiBleHRlbnNpb24gb2YgSlBRTAog\nICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IHN1bShv\nLnNob3J0RmllbGQpICIgKwogICAgICAgICAgICAiZnJvbSBBbGxGaWVsZFR5\ncGVzIG8iCiAgICAgICAgICAgICsgIiBncm91cCBieSBvLmludEZpZWxkIG9y\nZGVyIGJ5IHN1bShvLnNob3J0RmllbGQpIGFzYyIpOwogICAgICAgIHByZXBh\ncmVRdWVyeShxKTsKICAgICAgICAvLyB0aGlzIG1pZ2h0IGZhaWwgaW4gTXlT\nUUwKICAgICAgICBMaXN0IHJlcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgIGFzc2VydEVxdWFscygyLCByZXMuc2l6ZSgpKTsKICAgICAgICBJdGVy\nYXRvciBpdHIgPSByZXMuaXRlcmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMobmV3IExvbmcoLTQpLCBpdHIubmV4dCgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMobmV3IExvbmcoLTIpLCBpdHIubmV4dCgpKTsKICAgICAgICBhc3Nl\ncnRUcnVlKCFpdHIuaGFzTmV4dCgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0Q29tcG91bmRHcm91cFNhbWUoKSB7CiAgICAgICAgUXVlcnkgcSA9\nIGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3Qgby5pbnRGaWVsZCBmcm9tIEFsbEZp\nZWxkVHlwZXMgbyAiICsKICAgICAgICAgICAgImdyb3VwIGJ5IG8uaW50Rmll\nbGQsIG8uc2hvcnRGaWVsZCBvcmRlciBieSBvLnNob3J0RmllbGQgYXNjIik7\nCiAgICAgICAgcHJlcGFyZVF1ZXJ5KHEpOwogICAgICAgIExpc3QgcmVzID0g\ncS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHJl\ncy5zaXplKCkpOwogICAgICAgIEl0ZXJhdG9yIGl0ciA9IHJlcy5pdGVyYXRv\ncigpOwogICAgICAgIGFzc2VydEVxdWFscyhuZXcgSW50ZWdlcigyKSwgaXRy\nLm5leHQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ldyBJbnRlZ2VyKDEp\nLCBpdHIubmV4dCgpKTsKICAgICAgICBhc3NlcnRUcnVlKCFpdHIuaGFzTmV4\ndCgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29tcG91bmRHcm91\ncERpZmZlcmVudCgpIHsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVl\ncnkoInNlbGVjdCBvLmludEZpZWxkIGZyb20gQWxsRmllbGRUeXBlcyBvICIg\nKwogICAgICAgICAgICAiZ3JvdXAgYnkgby5pbnRGaWVsZCwgby5ieXRlRmll\nbGQgb3JkZXIgYnkgby5pbnRGaWVsZCBhc2MiKTsKICAgICAgICBwcmVwYXJl\nUXVlcnkocSk7CiAgICAgICAgTGlzdCByZXMgPSBxLmdldFJlc3VsdExpc3Qo\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNCwgcmVzLnNpemUoKSk7CiAgICAg\nICAgSXRlcmF0b3IgaXRyID0gcmVzLml0ZXJhdG9yKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKG5ldyBJbnRlZ2VyKDEpLCBpdHIubmV4dCgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMobmV3IEludGVnZXIoMSksIGl0ci5uZXh0KCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyhuZXcgSW50ZWdlcigyKSwgaXRyLm5leHQo\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ldyBJbnRlZ2VyKDIpLCBpdHIu\nbmV4dCgpKTsKICAgICAgICBhc3NlcnRUcnVlKCFpdHIuaGFzTmV4dCgpKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGlmZmVyZW50R3JvdXBMZW5n\ndGhzKCkgewogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2Vs\nZWN0IG8uYnl0ZUZpZWxkIGZyb20gQWxsRmllbGRUeXBlcyBvIgogICAgICAg\nICAgICArICIgZ3JvdXAgYnkgby5ieXRlRmllbGQgb3JkZXIgYnkgby5ieXRl\nRmllbGQgYXNjIik7CiAgICAgICAgcHJlcGFyZVF1ZXJ5KHEpOwogICAgICAg\nIExpc3QgcmVzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDMsIHJlcy5zaXplKCkpOwogICAgICAgIEl0ZXJhdG9yIGl0ciA9\nIHJlcy5pdGVyYXRvcigpOwogICAgICAgIGFzc2VydEVxdWFscygoYnl0ZSkg\nMCwgaXRyLm5leHQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKChieXRlKSAx\nLCBpdHIubmV4dCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoKGJ5dGUpIDIs\nIGl0ci5uZXh0KCkpOwogICAgICAgIGFzc2VydFRydWUoIWl0ci5oYXNOZXh0\nKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RHcm91cFJlbGF0aW9u\nRmllbGQoKSB7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJz\nZWxlY3Qgby5zZWxmT25lT25lLmludEZpZWxkICIgKwogICAgICAgICAgICAi\nZnJvbSBBbGxGaWVsZFR5cGVzIG8gZ3JvdXAgYnkgby5zZWxmT25lT25lLmlu\ndEZpZWxkICIgKwogICAgICAgICAgICAib3JkZXIgYnkgby5zZWxmT25lT25l\nLmludEZpZWxkIGFzYyIpOwogICAgICAgIHByZXBhcmVRdWVyeShxKTsKICAg\nICAgICBMaXN0IHJlcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFz\nc2VydEVxdWFscygyLCByZXMuc2l6ZSgpKTsKICAgICAgICBJdGVyYXRvciBp\ndHIgPSByZXMuaXRlcmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVhbHMobmV3\nIEludGVnZXIoMSksIGl0ci5uZXh0KCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhuZXcgSW50ZWdlcigyKSwgaXRyLm5leHQoKSk7CiAgICAgICAgYXNzZXJ0\nVHJ1ZSghaXRyLmhhc05leHQoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdFN1YnN0cmluZ0luR3JvdXBCeSgpIHsKICAgICAgICAvLyB0aGlzIGlz\nIGFuIGV4dGVuc2lvbiBvZiBKUFFMCiAgICAgICAgUXVlcnkgcSA9IGVtLmNy\nZWF0ZVF1ZXJ5KCJzZWxlY3Qgc3Vic3RyaW5nKG8uc3RyaW5nRmllbGQsIDEs\nIDEpLCAiICsKICAgICAgICAgICAgImNvdW50KG8pIGZyb20gQWxsRmllbGRU\neXBlcyBvICIgKwogICAgICAgICAgICAiZ3JvdXAgYnkgc3Vic3RyaW5nKG8u\nc3RyaW5nRmllbGQsIDEsIDEpIik7CiAgICAgICAgcHJlcGFyZVF1ZXJ5KHEp\nOwogICAgICAgIExpc3QgcmVzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDMsIHJlcy5zaXplKCkpOwoKICAgICAgICBxID0g\nZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBzdWJzdHJpbmcoby5zdHJpbmdGaWVs\nZCwgMSwgMiksIGNvdW50KG8pICIgKwogICAgICAgICAgICAiZnJvbSBBbGxG\naWVsZFR5cGVzIG8gZ3JvdXAgYnkgc3Vic3RyaW5nKG8uc3RyaW5nRmllbGQs\nIDEsIDIpIik7CiAgICAgICAgcHJlcGFyZVF1ZXJ5KHEpOwogICAgICAgIHJl\ncyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscyg0\nLCByZXMuc2l6ZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0R3Jv\ndXBlZEFnZ3JlZ2F0ZSgpIHsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRl\nUXVlcnkoInNlbGVjdCBjb3VudChvKSBmcm9tIEFsbEZpZWxkVHlwZXMgbyAi\nICsKICAgICAgICAgICAgImdyb3VwIGJ5IG8uYnl0ZUZpZWxkIG9yZGVyIGJ5\nIG8uYnl0ZUZpZWxkIGFzYyIpOwogICAgICAgIHByZXBhcmVRdWVyeShxKTsK\nICAgICAgICBMaXN0IHJlcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nIGFzc2VydEVxdWFscygzLCByZXMuc2l6ZSgpKTsKICAgICAgICBJdGVyYXRv\nciBpdHIgPSByZXMuaXRlcmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nbmV3IExvbmcoMSksIGl0ci5uZXh0KCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhuZXcgTG9uZygyKSwgaXRyLm5leHQoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKG5ldyBMb25nKDEpLCBpdHIubmV4dCgpKTsKICAgICAgICBhc3NlcnRU\ncnVlKCFpdHIuaGFzTmV4dCgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0R3JvdXBlZFJlbGF0aW9uQWdncmVnYXRlKCkgewogICAgICAgIFF1ZXJ5\nIHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGNvdW50KG8pLCBtYXgoby5z\nZWxmT25lT25lLmxvbmdGaWVsZCkiCiAgICAgICAgICAgICsgIiBmcm9tIEFs\nbEZpZWxkVHlwZXMgbyBncm91cCBieSBvLmludEZpZWxkIgogICAgICAgICAg\nICArICIgb3JkZXIgYnkgby5pbnRGaWVsZCBhc2MiKTsKICAgICAgICBMaXN0\nIHJlcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFs\ncygyLCByZXMuc2l6ZSgpKTsKICAgICAgICBJdGVyYXRvciBpdHIgPSByZXMu\naXRlcmF0b3IoKTsKICAgICAgICBPYmplY3RbXSBvID0gKE9iamVjdFtdKSBp\ndHIubmV4dCgpOwogICAgICAgIGFzc2VydEVxdWFscyhuZXcgTG9uZygyKSwg\nb1swXSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ldyBMb25nKDQpLCBvWzFd\nKTsKICAgICAgICBvID0gKE9iamVjdFtdKSBpdHIubmV4dCgpOwogICAgICAg\nIGFzc2VydEVxdWFscyhuZXcgTG9uZygyKSwgb1swXSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKG5ldyBMb25nKDIpLCBvWzFdKTsKICAgICAgICBhc3NlcnRU\ncnVlKCFpdHIuaGFzTmV4dCgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0R3JvdXBlZE1peGVkUHJvamVjdGlvbigpIHsKICAgICAgICBRdWVyeSBx\nID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBjb3VudChvKSwgby5zaG9ydEZp\nZWxkICIgKwogICAgICAgICAgICAiZnJvbSBBbGxGaWVsZFR5cGVzIG8gZ3Jv\ndXAgYnkgby5pbnRGaWVsZCwgby5zaG9ydEZpZWxkICIgKwogICAgICAgICAg\nICAib3JkZXIgYnkgby5pbnRGaWVsZCBhc2MiKTsKICAgICAgICBwcmVwYXJl\nUXVlcnkocSk7CiAgICAgICAgTGlzdCByZXMgPSBxLmdldFJlc3VsdExpc3Qo\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcmVzLnNpemUoKSk7CiAgICAg\nICAgSXRlcmF0b3IgaXRyID0gcmVzLml0ZXJhdG9yKCk7CiAgICAgICAgT2Jq\nZWN0W10gbyA9IChPYmplY3RbXSkgaXRyLm5leHQoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMobmV3IExvbmcoMiksIG9bMF0pOwogICAgICAgIGFzc2VydEVx\ndWFscyhuZXcgU2hvcnQoKHNob3J0KSAtMSksIG9bMV0pOwogICAgICAgIG8g\nPSAoT2JqZWN0W10pIGl0ci5uZXh0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKG5ldyBMb25nKDIpLCBvWzBdKTsKICAgICAgICBhc3NlcnRFcXVhbHMobmV3\nIFNob3J0KChzaG9ydCkgLTIpLCBvWzFdKTsKICAgICAgICBhc3NlcnRUcnVl\nKCFpdHIuaGFzTmV4dCgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nU2ltcGxlSGF2aW5nKCkgewogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVR\ndWVyeSgic2VsZWN0IG8uaW50RmllbGQgZnJvbSBBbGxGaWVsZFR5cGVzIG8g\nIiArCiAgICAgICAgICAgICJncm91cCBieSBvLmludEZpZWxkIGhhdmluZyBv\nLmludEZpZWxkIDwgMiIpOwogICAgICAgIHByZXBhcmVRdWVyeShxKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMobmV3IEludGVnZXIoMSksIHEuZ2V0U2luZ2xl\nUmVzdWx0KCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RBZ2dyZWdh\ndGVIYXZpbmcoKSB7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5\nKCJzZWxlY3Qgby5ieXRlRmllbGQgZnJvbSBBbGxGaWVsZFR5cGVzIG8gIiAr\nCiAgICAgICAgICAgICJncm91cCBieSBvLmJ5dGVGaWVsZCBoYXZpbmcgY291\nbnQobykgPiAxIik7CiAgICAgICAgcHJlcGFyZVF1ZXJ5KHEpOwogICAgICAg\nIGFzc2VydEVxdWFscyhuZXcgQnl0ZSgoYnl0ZSkgMSksIHEuZ2V0U2luZ2xl\nUmVzdWx0KCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNaXhlZEhh\ndmluZygpIHsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNl\nbGVjdCBvLmJ5dGVGaWVsZCBmcm9tIEFsbEZpZWxkVHlwZXMgbyAiICsKICAg\nICAgICAgICAgImdyb3VwIGJ5IG8uYnl0ZUZpZWxkIGhhdmluZyBjb3VudChv\nKSA+IDEgb3Igby5ieXRlRmllbGQgPSAwICIgKwogICAgICAgICAgICAib3Jk\nZXIgYnkgby5ieXRlRmllbGQgYXNjIik7CiAgICAgICAgcHJlcGFyZVF1ZXJ5\nKHEpOwogICAgICAgIExpc3QgcmVzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDIsIHJlcy5zaXplKCkpOwogICAgICAgIEl0\nZXJhdG9yIGl0ciA9IHJlcy5pdGVyYXRvcigpOwogICAgICAgIGFzc2VydEVx\ndWFscyhuZXcgQnl0ZSgoYnl0ZSkgMCksIGl0ci5uZXh0KCkpOwogICAgICAg\nIGFzc2VydEVxdWFscyhuZXcgQnl0ZSgoYnl0ZSkgMSksIGl0ci5uZXh0KCkp\nOwogICAgICAgIGFzc2VydFRydWUoIWl0ci5oYXNOZXh0KCkpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RWYXJpYWJsZUdyb3VwKCkgewogICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IG1heChvdGhlci5s\nb25nRmllbGQpICIgKwogICAgICAgICAgICAiZnJvbSBBbGxGaWVsZFR5cGVz\nIG8sIEFsbEZpZWxkVHlwZXMgb3RoZXIgIiArCiAgICAgICAgICAgICJ3aGVy\nZSBvdGhlciBtZW1iZXIgb2Ygby5zZWxmT25lTWFueSAiICsKICAgICAgICAg\nICAgImdyb3VwIGJ5IG90aGVyLmludEZpZWxkIG9yZGVyIGJ5IG90aGVyLmlu\ndEZpZWxkIGFzYyIpOwogICAgICAgIHByZXBhcmVRdWVyeShxKTsKICAgICAg\nICBMaXN0IHJlcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygyLCByZXMuc2l6ZSgpKTsKICAgICAgICBJdGVyYXRvciBpdHIg\nPSByZXMuaXRlcmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVhbHMobmV3IExv\nbmcoMiksIGl0ci5uZXh0KCkpOwogICAgICAgIGFzc2VydEVxdWFscyhuZXcg\nTG9uZyg0KSwgaXRyLm5leHQoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZSghaXRy\nLmhhc05leHQoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFZhcmlh\nYmxlSGF2aW5nKCkgewogICAgICAgIEpEQkNDb25maWd1cmF0aW9uIGNvbmYg\nPSAoSkRCQ0NvbmZpZ3VyYXRpb24pIGVtLmdldENvbmZpZ3VyYXRpb24oKTsK\nICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9IGNvbmYuZ2V0REJEaWN0aW9u\nYXJ5SW5zdGFuY2UoKTsKICAgICAgICBpZiAoZGljdCBpbnN0YW5jZW9mIERl\ncmJ5RGljdGlvbmFyeSkgewogICAgICAgICAgICAvLyBUaGlzIHRlc3QgZmFp\nbHMgb24gRGVyYnkgMTAuNS4zLjAsIHNvIGp1c3Qgc2tpcCBpdC4uLgogICAg\nICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBRdWVyeSBxID0g\nZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBtYXgoby5sb25nRmllbGQpLCBvdGhl\nci5ieXRlRmllbGQgIiArCiAgICAgICAgICAgICJmcm9tIEFsbEZpZWxkVHlw\nZXMgbywgQWxsRmllbGRUeXBlcyBvdGhlciAiICsKICAgICAgICAgICAgIndo\nZXJlIG90aGVyIG1lbWJlciBvZiBvLnNlbGZPbmVNYW55ICIgKwogICAgICAg\nICAgICAiZ3JvdXAgYnkgb3RoZXIuYnl0ZUZpZWxkIGhhdmluZyBzdW0ob3Ro\nZXIuaW50RmllbGQpID0gMiIpOwogICAgICAgIHByZXBhcmVRdWVyeShxKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMobmV3IExvbmcoMyksICgoT2JqZWN0W10p\ncS5nZXRTaW5nbGVSZXN1bHQoKSlbMF0pOwogICAgfQp9Cg==\n","encoding":"base64"}

