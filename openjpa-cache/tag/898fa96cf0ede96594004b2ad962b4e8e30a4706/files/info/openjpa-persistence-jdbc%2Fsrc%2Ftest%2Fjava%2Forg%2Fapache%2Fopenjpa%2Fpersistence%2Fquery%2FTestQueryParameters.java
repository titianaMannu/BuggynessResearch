{"sha":"3e8fe4bf71d3b6fb0776ef68ff14e737dfc084d8","node_id":"MDQ6QmxvYjIwNjM2NDozZThmZTRiZjcxZDNiNmZiMDc3NmVmNjhmZjE0ZTczN2RmYzA4NGQ4","size":15323,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3e8fe4bf71d3b6fb0776ef68ff14e737dfc084d8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeTsKCmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuUGFyYW1ldGVyOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuUXVlcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0\nZXJpYS5Dcml0ZXJpYVF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nY3JpdGVyaWEuUGFyYW1ldGVyRXhwcmVzc2lvbjsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLmNyaXRlcmlhLlByZWRpY2F0ZTsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLmNyaXRlcmlhLkNyaXRlcmlhQnVpbGRlcjsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLmNyaXRlcmlhLlJvb3Q7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5tZXRhbW9kZWwuRW50aXR5VHlwZTsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5NZXRhbW9kZWw7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuU2luZ3VsYXJBdHRyaWJ1dGU7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeUxhbmd1YWdl\nczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuanBxbC5KUFFM\nUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuUGFyYW1l\ndGVySW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3RzIHF1ZXJ5\nIHBhcmFtZXRlcnMuCiAqIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICoK\nICovCnB1YmxpYyBjbGFzcyBUZXN0UXVlcnlQYXJhbWV0ZXJzIGV4dGVuZHMg\nU2luZ2xlRU1GVGVzdENhc2UgewogICAgcHJpdmF0ZSBzdGF0aWMgT3BlbkpQ\nQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIG9lbWY7CiAgICBwcml2YXRlIEVu\ndGl0eU1hbmFnZXIgZW07CiAgICAKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkg\newogICAgICAgIGlmIChvZW1mID09IG51bGwpIHsKICAgICAgICAgICAgc3Vw\nZXIuc2V0VXAoU2ltcGxlRW50aXR5LmNsYXNzLCAib3BlbmpwYS5EeW5hbWlj\nRW5oYW5jZW1lbnRBZ2VudCIsICJmYWxzZSIpOwogICAgICAgICAgICBvZW1m\nID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSlPcGVuSlBBUGVy\nc2lzdGVuY2UuY2FzdChlbWYpOwogICAgICAgIH0KICAgICAgICBlbSA9IG9l\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCB0ZWFyRG93bigpIHsKICAgICAgICAvLyBkbyBub3QgY2xvc2Ug\ndGhlIGZhY3RvcnkKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE5h\nbWVkUGFyYW1ldGVyVXNpbmdSZXNlcnZlZFdvcmQoKSB7CiAgICAgICAgU3Ry\naW5nIGpwcWwgPSAic2VsZWN0IGUgZnJvbSBzaW1wbGUgZSBXSEVSRSBlLmlk\nPTprZXkgYW5kIGUubmFtZT06dmFsdWUiOwogICAgICAgIFF1ZXJ5IHEgPSBl\nbS5jcmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5zZXRQ\nYXJhbWV0ZXIoImtleSIsIDEwMCkKICAgICAgICAgICAgICAgICAgICAuc2V0\nUGFyYW1ldGVyKCJ2YWx1ZSIsICJYWVoiKTsKICAgICAgICAKICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgcS5nZXRQYXJhbWV0ZXJzKCkuc2l6ZSgpKTsKICAg\nICAgICBQYXJhbWV0ZXI8Pz4gcGFyYW0xID0gcS5nZXRQYXJhbWV0ZXIoImtl\neSIpOwogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTIgPSBxLmdldFBhcmFt\nZXRlcigidmFsdWUiKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMo\nMTAwLCBxLmdldFBhcmFtZXRlclZhbHVlKCJrZXkiKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEwMCwgcS5nZXRQYXJhbWV0ZXJWYWx1ZShwYXJhbTEpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoIlhZWiIsIHEuZ2V0UGFyYW1ldGVyVmFs\ndWUoInZhbHVlIikpOwogICAgICAgIGFzc2VydEVxdWFscygiWFlaIiwgcS5n\nZXRQYXJhbWV0ZXJWYWx1ZShwYXJhbTIpKTsKICAgICAgICAKICAgICAgICBx\nLmdldFJlc3VsdExpc3QoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFBvc2l0aW9uYWxQYXJhbWV0ZXJJbkpQUUxRdWVyeSgpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9ICJzZWxlY3QgZSBmcm9tIHNpbXBsZSBlIFdIRVJF\nIGUuaWQ9PzEgYW5kIGUubmFtZT0/MiI7CiAgICAgICAgUXVlcnkgcSA9IGVt\nLmNyZWF0ZVF1ZXJ5KGpwcWwpCiAgICAgICAgICAgICAgICAgICAgLnNldFBh\ncmFtZXRlcigxLCAxMDApCiAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFt\nZXRlcigyLCAiWFlaIik7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDIsIHEuZ2V0UGFyYW1ldGVycygpLnNpemUoKSk7CiAgICAgICAgUGFyYW1l\ndGVyPD8+IHBhcmFtMSA9IHEuZ2V0UGFyYW1ldGVyKDEpOwogICAgICAgIFBh\ncmFtZXRlcjw/PiBwYXJhbTIgPSBxLmdldFBhcmFtZXRlcigyKTsKICAgICAg\nICAKICAgICAgICBhc3NlcnRFcXVhbHMoMTAwLCBxLmdldFBhcmFtZXRlclZh\nbHVlKDEpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMTAwLCBxLmdldFBhcmFt\nZXRlclZhbHVlKHBhcmFtMSkpOwogICAgICAgIGFzc2VydEVxdWFscygiWFla\nIiwgcS5nZXRQYXJhbWV0ZXJWYWx1ZSgyKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJYWVoiLCBxLmdldFBhcmFtZXRlclZhbHVlKHBhcmFtMikpOwogICAg\nICAgIAogICAgICAgIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0TmFtZWRQYXJhbWV0ZXJJbkpQUUxRdWVyeSgp\nIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgZSBmcm9tIHNpbXBs\nZSBlIFdIRVJFIGUuaWQ9OmlkIGFuZCBlLm5hbWU9Om5hbWUiOwogICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgICAg\nICAgICAgIC5zZXRQYXJhbWV0ZXIoImlkIiwgMTAwKQogICAgICAgICAgICAg\nICAgICAgIC5zZXRQYXJhbWV0ZXIoIm5hbWUiLCAiWFlaIik7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHEuZ2V0UGFyYW1ldGVycygpLnNp\nemUoKSk7CiAgICAgICAgUGFyYW1ldGVyPD8+IHBhcmFtMSA9IHEuZ2V0UGFy\nYW1ldGVyKCJpZCIpOwogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTIgPSBx\nLmdldFBhcmFtZXRlcigibmFtZSIpOwogICAgICAgIAogICAgICAgIGFzc2Vy\ndEVxdWFscygxMDAsIHEuZ2V0UGFyYW1ldGVyVmFsdWUoImlkIikpOwogICAg\nICAgIGFzc2VydEVxdWFscygxMDAsIHEuZ2V0UGFyYW1ldGVyVmFsdWUocGFy\nYW0xKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJYWVoiLCBxLmdldFBhcmFt\nZXRlclZhbHVlKCJuYW1lIikpOwogICAgICAgIGFzc2VydEVxdWFscygiWFla\nIiwgcS5nZXRQYXJhbWV0ZXJWYWx1ZShwYXJhbTIpKTsKICAgICAgICAKICAg\nICAgICBxLmdldFJlc3VsdExpc3QoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdFBvc2l0aW9uYWxQYXJhbWV0ZXJNaXNzaW5nSW5KUFFMUXVl\ncnkoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUgZnJvbSBz\naW1wbGUgZSBXSEVSRSBlLmlkPT8xIGFuZCBlLm5hbWU9PzIiOwogICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgICAg\nICAgICAgIC5zZXRQYXJhbWV0ZXIoMSwgMTAwKQogICAgICAgICAgICAgICAg\nICAgIC5zZXRQYXJhbWV0ZXIoMiwgIlhZWiIpOwogICAgICAgIAogICAgICAg\nIGFzc2VydFNldFBhcmFtZXRlckZhaWxzKHEsIDMsIDEwMCk7IC8vIHdyb25n\nIHBvc2l0aW9uCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3ROYW1l\nZFBhcmFtZXRlck1pc3NpbmdJbkpQUUxRdWVyeSgpIHsKICAgICAgICBTdHJp\nbmcganBxbCA9ICJzZWxlY3QgZSBmcm9tIHNpbXBsZSBlIFdIRVJFIGUuaWQ9\nOmlkIGFuZCBlLm5hbWU9Om5hbWUiOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5j\ncmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJh\nbWV0ZXIoImlkIiwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJh\nbWV0ZXIoIm5hbWUiLCAiWFlaIik7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nU2V0UGFyYW1ldGVyRmFpbHMocSwgInh5eiIsIDEwMCk7IC8vIHdyb25nIG5h\nbWUKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFBvc2l0aW9uYWxQ\nYXJhbWV0ZXJXcm9uZ1ZhbHVlSW5KUFFMUXVlcnkoKSB7CiAgICAgICAgU3Ry\naW5nIGpwcWwgPSAic2VsZWN0IGUgZnJvbSBzaW1wbGUgZSBXSEVSRSBlLmlk\nPT8xIGFuZCBlLm5hbWU9PzIiOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVh\ndGVRdWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0\nZXIoMSwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIo\nMiwgIlhZWiIpOwogICAgICAgIAogICAgICAgIGFzc2VydFNldFBhcmFtZXRl\nckZhaWxzKHEsIDEsICJYWVoiKTsgLy8gd3JvbmcgdmFsdWUKICAgICAgICBh\nc3NlcnRTZXRQYXJhbWV0ZXJGYWlscyhxLCAyLCAxMDApOyAvLyB3cm9uZyB2\nYWx1ZQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TmFtZWRQYXJh\nbWV0ZXJXcm9uZ1ZhbHVlSW5KUFFMUXVlcnkoKSB7CiAgICAgICAgU3RyaW5n\nIGpwcWwgPSAic2VsZWN0IGUgZnJvbSBzaW1wbGUgZSBXSEVSRSBlLmlkPTpp\nZCBhbmQgZS5uYW1lPTpuYW1lIjsKICAgICAgICBRdWVyeSBxID0gZW0uY3Jl\nYXRlUXVlcnkoanBxbCkKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1l\ndGVyKCJpZCIsIDEwMCkKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1l\ndGVyKCJuYW1lIiwgIlhZWiIpOwogICAgICAgIAogICAgICAgIGFzc2VydFNl\ndFBhcmFtZXRlckZhaWxzKHEsICJpZCIsICJYWVoiKTsgLy8gd3JvbmcgdmFs\ndWUKICAgICAgICBhc3NlcnRTZXRQYXJhbWV0ZXJGYWlscyhxLCAibmFtZSIs\nIDEwMCk7IC8vIHdyb25nIHZhbHVlCiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdFBvc2l0aW9uYWxQYXJhbWV0ZXJWYWx1ZVR5cGVJbkpQUUxRdWVyeSgp\nIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgZSBmcm9tIHNpbXBs\nZSBlIFdIRVJFIGUuaWQ9PzEgYW5kIGUubmFtZT0/MiI7CiAgICAgICAgUXVl\ncnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpCiAgICAgICAgICAgICAgICAg\nICAgLnNldFBhcmFtZXRlcigxLCAxMDApCiAgICAgICAgICAgICAgICAgICAg\nLnNldFBhcmFtZXRlcigyLCAiWFlaIik7CiAgICAgICAgCiAgICAgICAgUGFy\nYW1ldGVyPD8+IHBhcmFtMSA9IHEuZ2V0UGFyYW1ldGVyKDEpOwogICAgICAg\nIGFzc2VydFRydWUocGFyYW0xIGluc3RhbmNlb2YgUGFyYW1ldGVySW1wbCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKGxvbmcuY2xhc3MsIHBhcmFtMS5nZXRQ\nYXJhbWV0ZXJUeXBlKCkpOwogICAgICAgIAogICAgICAgIFBhcmFtZXRlcjw/\nPiBwYXJhbTIgPSBxLmdldFBhcmFtZXRlcigyKTsKICAgICAgICBhc3NlcnRU\ncnVlKHBhcmFtMiBpbnN0YW5jZW9mIFBhcmFtZXRlckltcGwpOwogICAgICAg\nIGFzc2VydEVxdWFscyhTdHJpbmcuY2xhc3MsIHBhcmFtMi5nZXRQYXJhbWV0\nZXJUeXBlKCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TmFt\nZWRQYXJhbWV0ZXJWYWx1ZVR5cGVJbkpQUUxRdWVyeSgpIHsKICAgICAgICBT\ndHJpbmcganBxbCA9ICJzZWxlY3QgZSBmcm9tIHNpbXBsZSBlIFdIRVJFIGUu\naWQ9OmlkIGFuZCBlLm5hbWU9Om5hbWUiOwogICAgICAgIFF1ZXJ5IHEgPSBl\nbS5jcmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5zZXRQ\nYXJhbWV0ZXIoImlkIiwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5zZXRQ\nYXJhbWV0ZXIoIm5hbWUiLCAiWFlaIik7CiAgICAgICAgCiAgICAgICAgUGFy\nYW1ldGVyPD8+IHBhcmFtMSA9IHEuZ2V0UGFyYW1ldGVyKCJpZCIpOwogICAg\nICAgIGFzc2VydFRydWUocGFyYW0xIGluc3RhbmNlb2YgUGFyYW1ldGVySW1w\nbCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGxvbmcuY2xhc3MsIHBhcmFtMS5n\nZXRQYXJhbWV0ZXJUeXBlKCkpOwogICAgICAgIAogICAgICAgIFBhcmFtZXRl\ncjw/PiBwYXJhbTIgPSBxLmdldFBhcmFtZXRlcigibmFtZSIpOwogICAgICAg\nIGFzc2VydFRydWUocGFyYW0yIGluc3RhbmNlb2YgUGFyYW1ldGVySW1wbCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKFN0cmluZy5jbGFzcywgcGFyYW0yLmdl\ndFBhcmFtZXRlclR5cGUoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3ROYW1lZFBhcmFtZXRlckluUHJlcGFyZWRRdWVyeSgpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9ICJzZWxlY3QgeCBmcm9tIHNpbXBsZSB4IFdIRVJF\nIHguaWQ9OmlkIGFuZCB4Lm5hbWU9Om5hbWUiOwogICAgICAgIFF1ZXJ5IHEg\nPSBlbS5jcmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoImlkIiwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoIm5hbWUiLCAiWFlaIik7CiAgICAgICAgcS5nZXRSZXN1\nbHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKEpQUUxQ\nYXJzZXIuTEFOR19KUFFMLCBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChxKS5n\nZXRMYW5ndWFnZSgpKTsKICAgICAgICAKICAgICAgICBRdWVyeSBxMiA9IGVt\nLmNyZWF0ZVF1ZXJ5KGpwcWwpCiAgICAgICAgICAgICAgICAgICAgIC5zZXRQ\nYXJhbWV0ZXIoImlkIiwgMjAwKQogICAgICAgICAgICAgICAgICAgICAuc2V0\nUGFyYW1ldGVyKCJuYW1lIiwgIlpYWSIpOwogICAgICAgIAogICAgICAgIGFz\nc2VydEVxdWFscyhRdWVyeUxhbmd1YWdlcy5MQU5HX1BSRVBBUkVEX1NRTCwg\nT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QocTIpLmdldExhbmd1YWdlKCkpOwog\nICAgICAgIHEyLmdldFJlc3VsdExpc3QoKTsKICAgIH0KICAgIAogICAgLy8t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLQogICAgLy8gU2ltaWxhciB0ZXN0cyB3aXRoIE5hbWVkUXVlcnkKICAgIC8v\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0KICAgIHB1YmxpYyB2b2lkIHRlc3RQb3NpdGlvbmFsUGFyYW1ldGVySW5O\nYW1lZFF1ZXJ5KCkgewogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVOYW1l\nZFF1ZXJ5KFNpbXBsZUVudGl0eS5OQU1FRF9RVUVSWV9XSVRIX1BPU0lUSU9O\nQUxfUEFSQU1TKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIo\nMSwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMiwg\nIlhZWiIpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygyLCBxLmdl\ndFBhcmFtZXRlcnMoKS5zaXplKCkpOwogICAgICAgIFBhcmFtZXRlcjw/PiBw\nYXJhbTEgPSBxLmdldFBhcmFtZXRlcigxKTsKICAgICAgICBQYXJhbWV0ZXI8\nPz4gcGFyYW0yID0gcS5nZXRQYXJhbWV0ZXIoMik7CiAgICAgICAgCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEwMCwgcS5nZXRQYXJhbWV0ZXJWYWx1ZSgxKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwMCwgcS5nZXRQYXJhbWV0ZXJWYWx1\nZShwYXJhbTEpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlhZWiIsIHEuZ2V0\nUGFyYW1ldGVyVmFsdWUoMikpOwogICAgICAgIGFzc2VydEVxdWFscygiWFla\nIiwgcS5nZXRQYXJhbWV0ZXJWYWx1ZShwYXJhbTIpKTsKICAgICAgICAKICAg\nICAgICBxLmdldFJlc3VsdExpc3QoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdE5hbWVkUGFyYW1ldGVySW5OYW1lZFF1ZXJ5KCkgewogICAg\nICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KFNpbXBsZUVudGl0\neS5OQU1FRF9RVUVSWV9XSVRIX05BTUVEX1BBUkFNUykKICAgICAgICAgICAg\nICAgICAgICAuc2V0UGFyYW1ldGVyKCJpZCIsIDEwMCkKICAgICAgICAgICAg\nICAgICAgICAuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIlhZWiIpOwogICAgICAg\nIAogICAgICAgIGFzc2VydEVxdWFscygyLCBxLmdldFBhcmFtZXRlcnMoKS5z\naXplKCkpOwogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTEgPSBxLmdldFBh\ncmFtZXRlcigiaWQiKTsKICAgICAgICBQYXJhbWV0ZXI8Pz4gcGFyYW0yID0g\ncS5nZXRQYXJhbWV0ZXIoIm5hbWUiKTsKICAgICAgICAKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMTAwLCBxLmdldFBhcmFtZXRlclZhbHVlKCJpZCIpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMTAwLCBxLmdldFBhcmFtZXRlclZhbHVlKHBh\ncmFtMSkpOwogICAgICAgIGFzc2VydEVxdWFscygiWFlaIiwgcS5nZXRQYXJh\nbWV0ZXJWYWx1ZSgibmFtZSIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlhZ\nWiIsIHEuZ2V0UGFyYW1ldGVyVmFsdWUocGFyYW0yKSk7CiAgICAgICAgCiAg\nICAgICAgcS5nZXRSZXN1bHRMaXN0KCk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RQb3NpdGlvbmFsUGFyYW1ldGVyTWlzc2luZ0luTmFtZWRR\ndWVyeSgpIHsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlTmFtZWRRdWVy\neShTaW1wbGVFbnRpdHkuTkFNRURfUVVFUllfV0lUSF9QT1NJVElPTkFMX1BB\nUkFNUykKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKDEsIDEw\nMCkKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKDIsICJYWVoi\nKTsKICAgICAgICAKICAgICAgICBhc3NlcnRTZXRQYXJhbWV0ZXJGYWlscyhx\nLCAzLCAxMDApOyAvLyB3cm9uZyBwb3NpdGlvbgogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0TmFtZWRQYXJhbWV0ZXJNaXNzaW5nSW5OYW1lZFF1\nZXJ5KCkgewogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5\nKFNpbXBsZUVudGl0eS5OQU1FRF9RVUVSWV9XSVRIX05BTUVEX1BBUkFNUykK\nICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJpZCIsIDEwMCkK\nICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIlhZ\nWiIpOwogICAgICAgIAogICAgICAgIGFzc2VydFNldFBhcmFtZXRlckZhaWxz\nKHEsICJ4eXoiLCAxMDApOyAvLyB3cm9uZyBuYW1lCiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RQb3NpdGlvbmFsUGFyYW1ldGVyV3JvbmdWYWx1\nZUluTmFtZWRRdWVyeSgpIHsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRl\nTmFtZWRRdWVyeShTaW1wbGVFbnRpdHkuTkFNRURfUVVFUllfV0lUSF9QT1NJ\nVElPTkFMX1BBUkFNUykKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1l\ndGVyKDEsIDEwMCkKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVy\nKDIsICJYWVoiKTsKICAgICAgICAKICAgICAgICBhc3NlcnRTZXRQYXJhbWV0\nZXJGYWlscyhxLCAxLCAiWFlaIik7IC8vIHdyb25nIHZhbHVlCiAgICAgICAg\nYXNzZXJ0U2V0UGFyYW1ldGVyRmFpbHMocSwgMiwgMTAwKTsgLy8gd3Jvbmcg\ndmFsdWUKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE5hbWVkUGFy\nYW1ldGVyV3JvbmdWYWx1ZUluTmFtZWRRdWVyeSgpIHsKICAgICAgICBRdWVy\neSBxID0gZW0uY3JlYXRlTmFtZWRRdWVyeShTaW1wbGVFbnRpdHkuTkFNRURf\nUVVFUllfV0lUSF9OQU1FRF9QQVJBTVMpCiAgICAgICAgICAgICAgICAgICAg\nLnNldFBhcmFtZXRlcigiaWQiLCAxMDApCiAgICAgICAgICAgICAgICAgICAg\nLnNldFBhcmFtZXRlcigibmFtZSIsICJYWVoiKTsKICAgICAgICAKICAgICAg\nICBhc3NlcnRTZXRQYXJhbWV0ZXJGYWlscyhxLCAiaWQiLCAiWFlaIik7IC8v\nIHdyb25nIHZhbHVlCiAgICAgICAgYXNzZXJ0U2V0UGFyYW1ldGVyRmFpbHMo\ncSwgIm5hbWUiLCAxMDApOyAvLyB3cm9uZyB2YWx1ZQogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RQb3NpdGlvbmFsUGFyYW1ldGVyVmFsdWVUeXBlSW5O\nYW1lZFF1ZXJ5KCkgewogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVOYW1l\nZFF1ZXJ5KFNpbXBsZUVudGl0eS5OQU1FRF9RVUVSWV9XSVRIX1BPU0lUSU9O\nQUxfUEFSQU1TKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIo\nMSwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMiwg\nIlhZWiIpOwogICAgICAgIAogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTEg\nPSBxLmdldFBhcmFtZXRlcigxKTsKICAgICAgICBhc3NlcnRUcnVlKHBhcmFt\nMSBpbnN0YW5jZW9mIFBhcmFtZXRlckltcGwpOwogICAgICAgIGFzc2VydEVx\ndWFscyhsb25nLmNsYXNzLCBwYXJhbTEuZ2V0UGFyYW1ldGVyVHlwZSgpKTsK\nICAgICAgICAKICAgICAgICBQYXJhbWV0ZXI8Pz4gcGFyYW0yID0gcS5nZXRQ\nYXJhbWV0ZXIoMik7CiAgICAgICAgYXNzZXJ0VHJ1ZShwYXJhbTIgaW5zdGFu\nY2VvZiBQYXJhbWV0ZXJJbXBsKTsKICAgICAgICBhc3NlcnRFcXVhbHMoU3Ry\naW5nLmNsYXNzLCBwYXJhbTIuZ2V0UGFyYW1ldGVyVHlwZSgpKTsKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdE5hbWVkUGFyYW1ldGVyVmFsdWVU\neXBlSW5OYW1lZFF1ZXJ5KCkgewogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVh\ndGVOYW1lZFF1ZXJ5KFNpbXBsZUVudGl0eS5OQU1FRF9RVUVSWV9XSVRIX05B\nTUVEX1BBUkFNUykKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVy\nKCJpZCIsIDEwMCkKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVy\nKCJuYW1lIiwgIlhZWiIpOwogICAgICAgIAogICAgICAgIFBhcmFtZXRlcjw/\nPiBwYXJhbTEgPSBxLmdldFBhcmFtZXRlcigiaWQiKTsKICAgICAgICBhc3Nl\ncnRUcnVlKHBhcmFtMSBpbnN0YW5jZW9mIFBhcmFtZXRlckltcGwpOwogICAg\nICAgIGFzc2VydEVxdWFscyhsb25nLmNsYXNzLCBwYXJhbTEuZ2V0UGFyYW1l\ndGVyVHlwZSgpKTsKICAgICAgICAKICAgICAgICBQYXJhbWV0ZXI8Pz4gcGFy\nYW0yID0gcS5nZXRQYXJhbWV0ZXIoIm5hbWUiKTsKICAgICAgICBhc3NlcnRU\ncnVlKHBhcmFtMiBpbnN0YW5jZW9mIFBhcmFtZXRlckltcGwpOwogICAgICAg\nIGFzc2VydEVxdWFscyhTdHJpbmcuY2xhc3MsIHBhcmFtMi5nZXRQYXJhbWV0\nZXJUeXBlKCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q3Jp\ndGVyaWFRdWVyeVdpdGhOYW1lZFBhcmFtZXRlcigpIHsKICAgICAgICBNZXRh\nbW9kZWwgbW9kZWwgPSBvZW1mLmdldE1ldGFtb2RlbCgpOwogICAgICAgIEVu\ndGl0eVR5cGU8U2ltcGxlRW50aXR5PiBlbnRpdHkgPSBtb2RlbC5lbnRpdHko\nU2ltcGxlRW50aXR5LmNsYXNzKTsKICAgICAgICBTaW5ndWxhckF0dHJpYnV0\nZTxTaW1wbGVFbnRpdHksIExvbmc+IGlkID0gCiAgICAgICAgICAgIChTaW5n\ndWxhckF0dHJpYnV0ZTxTaW1wbGVFbnRpdHksIExvbmc+KWVudGl0eS5nZXRT\naW5ndWxhckF0dHJpYnV0ZSgiaWQiKTsKICAgICAgICBTaW5ndWxhckF0dHJp\nYnV0ZTxTaW1wbGVFbnRpdHksIFN0cmluZz4gbmFtZSA9IAogICAgICAgICAg\nICAoU2luZ3VsYXJBdHRyaWJ1dGU8U2ltcGxlRW50aXR5LCBTdHJpbmc+KWVu\ndGl0eS5nZXRTaW5ndWxhckF0dHJpYnV0ZSgibmFtZSIpOwogICAgICAgIAog\nICAgICAgIENyaXRlcmlhQnVpbGRlciBjYiA9IG9lbWYuZ2V0Q3JpdGVyaWFC\ndWlsZGVyKCk7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxTaW1wbGVFbnRpdHk+\nIGMgPSBjYi5jcmVhdGVRdWVyeShTaW1wbGVFbnRpdHkuY2xhc3MpOwogICAg\nICAgIFJvb3Q8U2ltcGxlRW50aXR5PiByb290ID0gYy5mcm9tKFNpbXBsZUVu\ndGl0eS5jbGFzcyk7CiAgICAgICAgUGFyYW1ldGVyRXhwcmVzc2lvbjxMb25n\nPiBwYXJhbTEgPSBjYi5wYXJhbWV0ZXIobG9uZy5jbGFzcywgImlkIik7CiAg\nICAgICAgUGFyYW1ldGVyRXhwcmVzc2lvbjxTdHJpbmc+IHBhcmFtMiA9IGNi\nLnBhcmFtZXRlcihTdHJpbmcuY2xhc3MsICJuYW1lIik7CiAgICAgICAgUHJl\nZGljYXRlIHAxID0gY2IuZXF1YWwocm9vdC5nZXQoaWQpLCBwYXJhbTEpOwog\nICAgICAgIFByZWRpY2F0ZSBwMiA9IGNiLmVxdWFsKHJvb3QuZ2V0KG5hbWUp\nLCBwYXJhbTIpOwogICAgICAgIGMud2hlcmUoY2IuYW5kKHAxLHAyKSk7CiAg\nICAgICAgCiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGMpOwog\nICAgICAgIGFzc2VydEVxdWFscygyLCBxLmdldFBhcmFtZXRlcnMoKS5zaXpl\nKCkpOwogICAgICAgIGFzc2VydFRydWUocS5nZXRQYXJhbWV0ZXJzKCkuY29u\ndGFpbnMocGFyYW0xKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShxLmdldFBhcmFt\nZXRlcnMoKS5jb250YWlucyhwYXJhbTIpKTsKICAgICAgICBhc3NlcnROb3RO\ndWxsKHEuZ2V0UGFyYW1ldGVyKCJpZCIpKTsKICAgICAgICBhc3NlcnROb3RO\ndWxsKHEuZ2V0UGFyYW1ldGVyKCJuYW1lIikpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0Q3JpdGVyaWFRdWVyeVdpdGhVbm5hbWVkUGFyYW1l\ndGVyKCkgewogICAgICAgIE1ldGFtb2RlbCBtb2RlbCA9IG9lbWYuZ2V0TWV0\nYW1vZGVsKCk7CiAgICAgICAgRW50aXR5VHlwZTxTaW1wbGVFbnRpdHk+IGVu\ndGl0eSA9IG1vZGVsLmVudGl0eShTaW1wbGVFbnRpdHkuY2xhc3MpOwogICAg\nICAgIFNpbmd1bGFyQXR0cmlidXRlPFNpbXBsZUVudGl0eSwgTG9uZz4gaWQg\nPSAKICAgICAgICAgICAgKFNpbmd1bGFyQXR0cmlidXRlPFNpbXBsZUVudGl0\neSwgTG9uZz4pZW50aXR5LmdldFNpbmd1bGFyQXR0cmlidXRlKCJpZCIpOwog\nICAgICAgIFNpbmd1bGFyQXR0cmlidXRlPFNpbXBsZUVudGl0eSwgU3RyaW5n\nPiBuYW1lID0gCiAgICAgICAgICAgIChTaW5ndWxhckF0dHJpYnV0ZTxTaW1w\nbGVFbnRpdHksIFN0cmluZz4pZW50aXR5LmdldFNpbmd1bGFyQXR0cmlidXRl\nKCJuYW1lIik7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFCdWlsZGVyIGNi\nID0gb2VtZi5nZXRDcml0ZXJpYUJ1aWxkZXIoKTsKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PFNpbXBsZUVudGl0eT4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KFNpbXBs\nZUVudGl0eS5jbGFzcyk7CiAgICAgICAgUm9vdDxTaW1wbGVFbnRpdHk+IHJv\nb3QgPSBjLmZyb20oU2ltcGxlRW50aXR5LmNsYXNzKTsKICAgICAgICBQYXJh\nbWV0ZXJFeHByZXNzaW9uPExvbmc+IHBhcmFtMSA9IGNiLnBhcmFtZXRlcihs\nb25nLmNsYXNzKTsKICAgICAgICBQYXJhbWV0ZXJFeHByZXNzaW9uPFN0cmlu\nZz4gcGFyYW0yID0gY2IucGFyYW1ldGVyKFN0cmluZy5jbGFzcyk7CiAgICAg\nICAgUHJlZGljYXRlIHAxID0gY2IuZXF1YWwocm9vdC5nZXQoaWQpLCBwYXJh\nbTEpOwogICAgICAgIFByZWRpY2F0ZSBwMiA9IGNiLmVxdWFsKHJvb3QuZ2V0\nKG5hbWUpLCBwYXJhbTIpOwogICAgICAgIGMud2hlcmUoY2IuYW5kKHAxLHAy\nKSk7CiAgICAgICAgCiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5\nKGMpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBxLmdldFBhcmFtZXRlcnMo\nKS5zaXplKCkpOwogICAgICAgIGFzc2VydFRydWUocS5nZXRQYXJhbWV0ZXJz\nKCkuY29udGFpbnMocGFyYW0xKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShxLmdl\ndFBhcmFtZXRlcnMoKS5jb250YWlucyhwYXJhbTIpKTsKICAgIH0KCiAgICAK\nICAgIAogICAgdm9pZCBhc3NlcnRTZXRQYXJhbWV0ZXJGYWlscyhRdWVyeSBx\nLCBTdHJpbmcgbmFtZSwgT2JqZWN0IHYpIHsKICAgICAgICB0cnkgewogICAg\nICAgICAgICBxLnNldFBhcmFtZXRlcihuYW1lLCB2KTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0ZWQgIiArIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5j\nbGFzcy5nZXROYW1lKCkpOwogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIGdvb2QKICAgICAg\nICAgICAgU3lzdGVtLmVyci5wcmludGxuKCJGb2xsb3dpbmcgaXMgZXhwZWNl\ndGVkIGV4Y2VwdGlvbiwgcHJpbnRpbmcgdG8gdmVyaWZ5IGVycm9yIG1lc3Nh\nZ2UiKTsKICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKGUpOwogICAg\nICAgIH0gCiAgICB9CiAgICAKICAgIHZvaWQgYXNzZXJ0U2V0UGFyYW1ldGVy\nRmFpbHMoUXVlcnkgcSwgaW50IHBvcywgT2JqZWN0IHYpIHsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBxLnNldFBhcmFtZXRlcihwb3MsIHYpOwogICAg\nICAgICAgICBmYWlsKCJFeHBlY3RlZCAiICsgSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uLmNsYXNzLmdldE5hbWUoKSk7CiAgICAgICAgfSBjYXRjaCAoSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gZ29v\nZAogICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oIkZvbGxvd2luZyBp\ncyBleHBlY2V0ZWQgZXhjZXB0aW9uLCBwcmludGluZyB0byB2ZXJpZnkgZXJy\nb3IgbWVzc2FnZSIpOwogICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4o\nZSk7CiAgICAgICAgfSAKICAgIH0KfQo=\n","encoding":"base64"}

