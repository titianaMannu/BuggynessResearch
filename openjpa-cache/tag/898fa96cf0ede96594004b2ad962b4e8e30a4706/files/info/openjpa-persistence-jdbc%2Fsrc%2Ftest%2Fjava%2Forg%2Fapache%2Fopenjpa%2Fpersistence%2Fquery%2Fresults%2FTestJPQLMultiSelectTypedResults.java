{"sha":"5165716a6487f0fae5e32897c0cd4e1abc81fd9f","node_id":"MDQ6QmxvYjIwNjM2NDo1MTY1NzE2YTY0ODdmMGZhZTVlMzI4OTdjMGNkNGUxYWJjODFmZDlm","size":6340,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5165716a6487f0fae5e32897c0cd4e1abc81fd9f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnkucmVz\ndWx0czsKCmltcG9ydCBqYXZhLnRleHQuRGF0ZUZvcm1hdDsKaW1wb3J0IGph\ndmEudGV4dC5QYXJzZUV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNo\nU2V0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwu\nTG9jYWxlOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWEuUGVyc29u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNyaXRl\ncmlhLnJlc3VsdHMuQmFyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmNyaXRlcmlhLnJlc3VsdHMuRm9vOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNyaXRlcmlhLnJlc3VsdHMuRm9v\nQmFyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNy\naXRlcmlhLnJlc3VsdHMuSXRlbTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5yZXN1bHRzLk9yZGVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNyaXRlcmlhLnJlc3Vs\ndHMuUHJvZHVjZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuY3JpdGVyaWEucmVzdWx0cy5TaG9wOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7\nCgpwdWJsaWMgY2xhc3MgVGVzdEpQUUxNdWx0aVNlbGVjdFR5cGVkUmVzdWx0\ncyBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBpbnQgTl9PUkRFUlMgPSAxNTsKICAgIHByaXZhdGUgc3Rh\ndGljIGZpbmFsIGludCBOX0lURU1TX1BFUl9PUkRFUiA9IDM7CgogICAgLy8g\ndXNlIHNob3J0IGRhdGEgZm9ybWF0CiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBTdHJpbmdbXSBPUkRFUl9EQVRFUyA9CiAgICAgICAgeyAiMy8xMi8yMDA4\nIDE6MDAgUE0iLCAiMTAvMDEvMjAwOCAxOjUxIEFNIiwgIjEyLzEyLzIwMDgg\nMTA6MDEgQU0iLCAiNS8yMS8yMDA5IDM6MjMgUE0iIH07CgogICAgRGF0ZUZv\ncm1hdCBkZiA9IERhdGVGb3JtYXQuZ2V0RGF0ZUluc3RhbmNlKERhdGVGb3Jt\nYXQuU0hPUlQsIExvY2FsZS5VUyk7CgogICAgcHVibGljIHZvaWQgc2V0VXAo\nKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzZXRVcChDTEVBUl9UQUJM\nRVMsIE9yZGVyLmNsYXNzLCBJdGVtLmNsYXNzLCBTaG9wLmNsYXNzLCBQcm9k\ndWNlci5jbGFzcywKICAgICAgICAgICAgICBQZXJzb24uY2xhc3MsIEZvby5j\nbGFzcywgQmFyLmNsYXNzLAogICAgICAgICAgICAgIm9wZW5qcGEuRHluYW1p\nY0VuaGFuY2VyQWdlbnQiLCAiZmFsc2UiKTsKICAgICAgICBwb3B1bGF0ZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBvcHVsYXRlKCkgdGhyb3dzIFBh\ncnNlRXhjZXB0aW9uIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgU2hvcCBzID0gbmV3IFNob3AoKTsK\nICAgICAgICBPcmRlciBvcmRlcjsKICAgICAgICBJdGVtIGl0ZW07CiAgICAg\nICAgUHJvZHVjZXIgcDsKCiAgICAgICAgcy5zZXRJZCgxKTsKICAgICAgICBz\nLnNldE5hbWUoImVCYXkuY29tIik7CiAgICAgICAgcy5zZXRPcmRlcnMobmV3\nIEhhc2hTZXQ8T3JkZXI+KCkpOwoKICAgICAgICBmb3IgKGludCBpID0gMTsg\naSA8PSBOX09SREVSUzsgaSsrKSB7CiAgICAgICAgICAgIG9yZGVyID0gbmV3\nIE9yZGVyKCk7CiAgICAgICAgICAgIG9yZGVyLnNldElkKGkpOwogICAgICAg\nICAgICBvcmRlci5zZXREYXRlKGRmLnBhcnNlKE9SREVSX0RBVEVTW2kgJSBP\nUkRFUl9EQVRFUy5sZW5ndGhdKSk7CiAgICAgICAgICAgIG9yZGVyLnNldEZp\nbGxlZChpICUgMiA9PSAwID8gdHJ1ZSA6IGZhbHNlKTsKICAgICAgICAgICAg\nb3JkZXIuc2V0U2hvcChzKTsKICAgICAgICAgICAgb3JkZXIuc2V0SXRlbXMo\nbmV3IEhhc2hTZXQ8SXRlbT4oKSk7CiAgICAgICAgICAgIHMuZ2V0T3JkZXJz\nKCkuYWRkKG9yZGVyKTsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDE7IGog\nPD0gTl9JVEVNU19QRVJfT1JERVI7IGorKykgewogICAgICAgICAgICAgICAg\naXRlbSA9IG5ldyBJdGVtKCk7CiAgICAgICAgICAgICAgICBpdGVtLnNldE9y\nZGVyKG9yZGVyKTsKICAgICAgICAgICAgICAgIG9yZGVyLmdldEl0ZW1zKCku\nYWRkKGl0ZW0pOwogICAgICAgICAgICAgICAgcCA9IG5ldyBQcm9kdWNlcigp\nOwogICAgICAgICAgICAgICAgcC5zZXROYW1lKCJmaWxsZXIiKTsKICAgICAg\nICAgICAgICAgIHAuc2V0SXRlbShpdGVtKTsKICAgICAgICAgICAgICAgIGl0\nZW0uc2V0UHJvZHVjdChwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICBlbS5wZXJzaXN0KHMpOwogICAgICAgIFBlcnNvbiBwZXJzb24gPSBu\nZXcgUGVyc29uKCJUZXN0IFJlc3VsdCBTaGFwZSIpOwogICAgICAgIGVtLnBl\ncnNpc3QocGVyc29uKTsKICAgICAgICAKICAgICAgICBGb28gZm9vID0gbmV3\nIEZvbygxMDBMLCAiVGVzdCBGb28iKTsKICAgICAgICBCYXIgYmFyID0gbmV3\nIEJhcigyMDBMLCAiVGVzdCBCYXIiKTsKICAgICAgICBmb28uc2V0QmFyKGJh\ncik7CiAgICAgICAgZW0ucGVyc2lzdChmb28pOwogICAgICAgIGVtLnBlcnNp\nc3QoYmFyKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVhckRvd24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdXBlci50\nZWFyRG93bigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNdWx0aXBs\nZUNvbnN0cnVjdG9yKCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9ICJTRUxF\nQ1QgTkVXIEZvbyhmLmZpZCxmLmZpbnQpLCBiLCBORVcgRm9vQmFyKGYuZmlk\nLCBiLmJpZCkgIiArCiAgICAgICAgICAgICAgICAgICAgImZyb20gRm9vIGYg\nSk9JTiBmLmJhciBiIFdIRVJFIGYuYmFyPWIiOwogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIFF1ZXJ5IGpwcWxRdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KTsKICAg\nICAgICBMaXN0PE9iamVjdFtdPiByZXN1bHQgPSBqcHFsUXVlcnkuZ2V0UmVz\ndWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnRGYWxzZShyZXN1bHQuaXNFbXB0\neSgpKTsKICAgICAgICBmb3IgKE9iamVjdFtdIHJvdyA6IHJlc3VsdCkgewog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoMywgcm93Lmxlbmd0aCk7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoIjAtdGggZWxlbWVudCAiICsgcm93WzBdLmdl\ndENsYXNzKCkgKyAiIGlzIG5vdCBGb28iLCByb3dbMF0gaW5zdGFuY2VvZiBG\nb28pOwogICAgICAgICAgICBhc3NlcnRUcnVlKCIxLXN0IGVsZW1lbnQgIiAr\nIHJvd1sxXS5nZXRDbGFzcygpICsgIiBpcyBub3QgQmFyIiwgcm93WzFdIGlu\nc3RhbmNlb2YgQmFyKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiMi1uZCBl\nbGVtZW50ICIgKyByb3dbMl0uZ2V0Q2xhc3MoKSArICIgaXMgbm90IEZvb0Jh\nciIsIHJvd1syXSBpbnN0YW5jZW9mIEZvb0Jhcik7CiAgICAgICAgfQogICAg\nICAgIAogICAgfQogICAgcHVibGljIHZvaWQgdGVzdE11bHRpcGxlQ29uc3Ry\ndWN0b3JNaXhXaXRoTXVsdGlTZWxlY3QoKSB7CiAgICAgICAgU3RyaW5nIHF1\nZXJ5ID0gIlNFTEVDVCBORVcgUGVyc29uKHAubmFtZSksIHAuaWQsIE5FVyBQ\nZXJzb24ocC5uYW1lKSwgcC5uYW1lIEZST00gUGVyc29uIHAgT1JERVIgQlkg\ncC5uYW1lIjsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBRdWVyeSBqcHFsUXVlcnkgPSBl\nbS5jcmVhdGVRdWVyeShxdWVyeSk7CiAgICAgICAgTGlzdDxPYmplY3RbXT4g\ncmVzdWx0ID0ganBxbFF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKICAgICAgICBh\nc3NlcnRUcnVlKCFyZXN1bHQuaXNFbXB0eSgpKTsKICAgICAgICBmb3IgKE9i\namVjdFtdIHJvdyA6IHJlc3VsdCkgewogICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoNCwgcm93Lmxlbmd0aCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoUGVyc29uLmNsYXNzLCAgcm93WzBdLmdldENsYXNzKCkp\nOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoSW50ZWdlci5jbGFzcywgcm93\nWzFdLmdldENsYXNzKCkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoUGVy\nc29uLmNsYXNzLCAgcm93WzJdLmdldENsYXNzKCkpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoU3RyaW5nLmNsYXNzLCAgcm93WzNdLmdldENsYXNzKCkp\nOwogICAgICAgICAgICAKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCgoUGVy\nc29uKXJvd1swXSkuZ2V0TmFtZSgpLCAoKFBlcnNvbilyb3dbMl0pLmdldE5h\nbWUoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygoKFBlcnNvbilyb3db\nMF0pLmdldE5hbWUoKSwgcm93WzNdKTsKICAgICAgICB9CiAgICB9CiAgICAv\nKioKICAgICAqIFRlc3RjYXNlIHRvIHZlcmlmeSB0aGF0IHNlbGVjdGluZyBt\ndWx0aXBsZSByZXN1bHRzIGluIGEgdmFyaWV0eSBvZiB3YXlzIHJldHVybnMg\ndGhlIHNhbWUgcmVzdWx0cy4gUmVzdWx0cyBhcmUKICAgICAqIHJldHVybmVk\nIHZpYSBhIG5vcm1hbCBPYmplY3QgW10gKEpQUUwpLgogICAgICogCiAgICAg\nKiBAdGhyb3dzIEV4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0\nZXN0TXVsdGlTZWxlY3QoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAv\nLyBnZXQgcmVzdWx0cyBmcm9tIHRyYWRpdGlvbmFsIEpQUUwKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBRdWVyeSBqcHFsUXVlcnkgPQogICAgICAgICAgICBlbS5jcmVh\ndGVRdWVyeSgiU0VMRUNUIG8sIHAgZnJvbSBPcmRlciBvIEpPSU4gby5pdGVt\ncyBpIEpPSU4gaS5wcm9kdWNlciBwIFdIRVJFIG8uZmlsbGVkID0gdHJ1ZSIp\nOwogICAgICAgIC8vIGRvbid0IHN1cHByZXNzIHdhcm5pbmdzLgogICAgICAg\nIExpc3Q8T2JqZWN0W10+IGpwcWxSZXN1bHRzID0ganBxbFF1ZXJ5LmdldFJl\nc3VsdExpc3QoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKE5fT1JERVJTIC8g\nMiAqIE5fSVRFTVNfUEVSX09SREVSLCBqcHFsUmVzdWx0cy5zaXplKCkpOwoK\nICAgICAgICBmb3IgKE9iamVjdFtdIG9zIDoganBxbFJlc3VsdHMpIHsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIG9zLmxlbmd0aCk7CiAgICAgICAg\nICAgIGFzc2VydFRydWUob3NbMF0gaW5zdGFuY2VvZiBPcmRlcik7CiAgICAg\nICAgICAgIGFzc2VydFRydWUob3NbMV0gaW5zdGFuY2VvZiBQcm9kdWNlcik7\nCiAgICAgICAgfQoKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

