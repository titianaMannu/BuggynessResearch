{"sha":"9c787c7b3131aea9fca1a868a36c2d06f1d41aab","node_id":"MDQ6QmxvYjIwNjM2NDo5Yzc4N2M3YjMxMzFhZWE5ZmNhMWE4NjhhMzZjMmQwNmYxZDQxYWFi","size":13165,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9c787c7b3131aea9fca1a868a36c2d06f1d41aab","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1sbWFw\ncGluZy5xdWVyeTsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5\nOwoKaW1wb3J0IGp1bml0LnRleHR1aS5UZXN0UnVubmVyOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9u\nYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlclNQSTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmds\nZUVNRlRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLnhtbG1hcHBpbmcuZW50aXRpZXMuQ3VzdG9tZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1sbWFwcGluZy5lbnRp\ndGllcy5FQWRkcmVzczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS54bWxtYXBwaW5nLmVudGl0aWVzLk9yZGVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnhtbG1hcHBpbmcuZW50aXRp\nZXMuQ3VzdG9tZXIuQ3JlZGl0UmF0aW5nOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLnhtbG1hcHBpbmcueG1sYmluZGluZ3MubXlh\nZGRyZXNzLkFkZHJlc3M7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UueG1sbWFwcGluZy54bWxiaW5kaW5ncy5teWFkZHJlc3MuQ0FO\nQWRkcmVzczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS54bWxtYXBwaW5nLnhtbGJpbmRpbmdzLm15YWRkcmVzcy5PYmplY3RGYWN0\nb3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnht\nbG1hcHBpbmcueG1sYmluZGluZ3MubXlhZGRyZXNzLlVTQUFkZHJlc3M7Cgov\nKioKICogVGVzdCBxdWVyeSB3aXRoIHByZWRpY2F0ZXMgb24gcGVyc2lzdGVu\ndCBmaWVsZCBtYXBwZWQgdG8gWE1MIGNvbHVtbi4KICogU2FtcGxlcyBvZiBw\nbGF0Zm9ybSBzcGVjaWZpYyBzcWxzIGFyZSB1bmRlciByZXNvdXJjZXMgaW4K\nICogVGVzdFhNTEN1c3RvbWVyT3JkZXIuW2RibmFtZV0gZmlsZXMuCiAqIAog\nKiBAYXV0aG9yIENhdGFsaW5hIFdlaQogKiBAYXV0aG9yIE1pbG9zeiBUeWxl\nbmRhCiAqIEBzaW5jZSAxLjAuMAogKi8KcHVibGljIGNsYXNzIFRlc3RYTUxD\ndXN0b21lck9yZGVyCiAgICBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsK\nICAgIAogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IE9SREVSXzFfT0lE\nID0gMTA7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBkb3VibGUgT1JERVJf\nMV9BTU9VTlQgPSA4NTA7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBib29s\nZWFuIE9SREVSXzFfREVMSVZFUkVEID0gZmFsc2U7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgaW50IE9SREVSXzJfT0lEID0gMjA7CiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBkb3VibGUgT1JERVJfMl9BTU9VTlQgPSAxMDAwOwog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgYm9vbGVhbiBPUkRFUl8yX0RFTElW\nRVJFRCA9IGZhbHNlOwoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAg\nICAgIHNldFVwKEN1c3RvbWVyLmNsYXNzLCBDdXN0b21lci5DdXN0b21lcktl\neS5jbGFzcywgT3JkZXIuY2xhc3MsCiAgICAgICAgICAgIEVBZGRyZXNzLmNs\nYXNzLCBEUk9QX1RBQkxFUyk7ICAvLyB0ZXN0IGNyZWF0ZSB0YWJsZSBEREwg\nZm9yIFhNTCBjb2x1bW4KCiAgICAgICAgLy8gc2tpcCB0ZXN0IGlmIGRpY3Rp\nb25hcnkgaGFzIG5vIHN1cHBvcnQgZm9yIFhNTCBjb2x1bW4gdHlwZQogICAg\nICAgIHNldFRlc3RzRGlzYWJsZWQoIWRpY3Rpb25hcnlTdXBwb3J0c1hNTENv\nbHVtbigpKTsKICAgICAgICBpZiAoaXNUZXN0c0Rpc2FibGVkKCkpIHsKICAg\nICAgICAgICAgZ2V0TG9nKCkudHJhY2UoIlRlc3RYTUxDdXN0b21lck9yZGVy\nKCkgLSBTa2lwcGluZyBhbGwgdGVzdHMgLSBObyBYTUwgQ29sdW1uIHN1cHBv\ncnQiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7\nCiAgICAgICAgcGVyc2lzdEVudGl0aWVzKGVtKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0WE1MRmllbGRQcm9qZWN0aW9uKCkgewogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIExpc3Q8QWRkcmVzcz4gYWRkcnMgPSBlbS5jcmVhdGVRdWVy\neSgKICAgICAgICAgICAgInNlbGVjdCBvLnNoaXBBZGRyZXNzIGZyb20gT3Jk\nZXIgbyBvcmRlciBieSBvLm9pZCIpCiAgICAgICAgICAgIC5nZXRSZXN1bHRM\naXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIGFkZHJz\nLnNpemUoKSk7CiAgICAgICAgCiAgICAgICAgQWRkcmVzcyBhZGRyZXNzRnJv\nbURiID0gYWRkcnMuZ2V0KDApOwogICAgICAgIEFkZHJlc3MgYWRkcmVzcyA9\nIGNyZWF0ZVVTQUFkZHJlc3MoIkhhcnJ5J3MgQXV0byIpOwogICAgICAgIGFz\nc2VydEVxdWFscyhhZGRyZXNzLnRvU3RyaW5nKCksIGFkZHJlc3NGcm9tRGIu\ndG9TdHJpbmcoKSk7CiAgICAgICAgCiAgICAgICAgYWRkcmVzc0Zyb21EYiA9\nIGFkZHJzLmdldCgxKTsKICAgICAgICBhZGRyZXNzID0gY3JlYXRlQ0FOQWRk\ncmVzcygiQSZKIEF1dG8iKTsKICAgICAgICBhc3NlcnRFcXVhbHMoYWRkcmVz\ncy50b1N0cmluZygpLCBhZGRyZXNzRnJvbURiLnRvU3RyaW5nKCkpOwogICAg\nICAgIAogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIEBTdXBw\ncmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIHZvaWQgdGVz\ndFhNTEZpZWxkSW5FbnRpdHkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgTGlzdDxP\ncmRlcj4gb3JkZXJzID0gZW0uY3JlYXRlUXVlcnkoCiAgICAgICAgICAgICJz\nZWxlY3QgbyBmcm9tIE9yZGVyIG8gb3JkZXIgYnkgby5vaWQiKQogICAgICAg\nICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIAogICAgICAgIGFzc2Vy\ndEVxdWFscygyLCBvcmRlcnMuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBP\ncmRlciBvcmRlckZyb21EYiA9IG9yZGVycy5nZXQoMCk7CiAgICAgICAgQWRk\ncmVzcyBhZGRyZXNzRnJvbURiID0gb3JkZXJGcm9tRGIuZ2V0U2hpcEFkZHJl\nc3MoKTsKICAgICAgICBBZGRyZXNzIGFkZHJlc3MgPSBjcmVhdGVVU0FBZGRy\nZXNzKCJIYXJyeSdzIEF1dG8iKTsKICAgICAgICBhc3NlcnRFcXVhbHMoYWRk\ncmVzcy50b1N0cmluZygpLCBhZGRyZXNzRnJvbURiLnRvU3RyaW5nKCkpOwog\nICAgICAgIAogICAgICAgIG9yZGVyRnJvbURiID0gb3JkZXJzLmdldCgxKTsK\nICAgICAgICBhZGRyZXNzRnJvbURiID0gb3JkZXJGcm9tRGIuZ2V0U2hpcEFk\nZHJlc3MoKTsKICAgICAgICBhZGRyZXNzID0gY3JlYXRlQ0FOQWRkcmVzcygi\nQSZKIEF1dG8iKTsKICAgICAgICBhc3NlcnRFcXVhbHMoYWRkcmVzcy50b1N0\ncmluZygpLCBhZGRyZXNzRnJvbURiLnRvU3RyaW5nKCkpOwogICAgICAgIAog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgQFN1cHByZXNzV2Fybmlu\nZ3MoInVuY2hlY2tlZCIpCiAgICBwdWJsaWMgdm9pZCB0ZXN0WE1MU3RyaW5n\nVG9YTUxTdHJpbmdDb21wYXJpc29uKCkgewogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIExp\nc3Q8T2JqZWN0W10+IG9yZGVycyA9IGVtLmNyZWF0ZVF1ZXJ5KAogICAgICAg\nICAgICAic2VsZWN0IG8sIG8yIGZyb20gT3JkZXIgbywgT3JkZXIgbzIgd2hl\ncmUgby5zaGlwQWRkcmVzcy5jaXR5ICIgKwogICAgICAgICAgICAiPSBvMi5z\naGlwQWRkcmVzcy5jaXR5IG9yZGVyIGJ5IG8ub2lkIikKICAgICAgICAgICAg\nLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVh\nbHMoMiwgb3JkZXJzLnNpemUoKSk7CgogICAgICAgIE9iamVjdFtdIG9yZGVy\nc0Zyb21EYiA9IG9yZGVycy5nZXQoMCk7CiAgICAgICAgT3JkZXIgb3JkZXIx\nID0gKE9yZGVyKSBvcmRlcnNGcm9tRGJbMF07CiAgICAgICAgT3JkZXIgb3Jk\nZXIyID0gKE9yZGVyKSBvcmRlcnNGcm9tRGJbMV07CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKE9SREVSXzFfT0lELCBvcmRlcjEuZ2V0T2lkKCkpOwogICAgICAg\nIGFzc2VydE9yZGVyc0VxdWFsKG9yZGVyMSwgb3JkZXIyKTsKCiAgICAgICAg\nb3JkZXJzRnJvbURiID0gb3JkZXJzLmdldCgxKTsKICAgICAgICBvcmRlcjEg\nPSAoT3JkZXIpIG9yZGVyc0Zyb21EYlswXTsKICAgICAgICBvcmRlcjIgPSAo\nT3JkZXIpIG9yZGVyc0Zyb21EYlsxXTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nT1JERVJfMl9PSUQsIG9yZGVyMS5nZXRPaWQoKSk7CiAgICAgICAgYXNzZXJ0\nT3JkZXJzRXF1YWwob3JkZXIxLCBvcmRlcjIpOwogICAgICAgIAogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgQFN1cHByZXNzV2FybmluZ3MoInVu\nY2hlY2tlZCIpCiAgICBwdWJsaWMgdm9pZCB0ZXN0WE1MU3RyaW5nVG9FbWJl\nZGRlZFN0cmluZ0NvbXBhcmlzb24oKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgTGlz\ndDxPcmRlcj4gb3JkZXJzID0gZW0uY3JlYXRlUXVlcnkoCiAgICAgICAgICAg\nICJzZWxlY3QgbyBmcm9tIE9yZGVyIG8sIEN1c3RvbWVyIGMgd2hlcmUgby5z\naGlwQWRkcmVzcy5jaXR5ICIgKwogICAgICAgICAgICAiPSBjLmFkZHJlc3Mu\nY2l0eSIpCiAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIG9yZGVycy5zaXplKCkpOwogICAg\nICAgIE9yZGVyIG9yZGVyID0gb3JkZXJzLmdldCgwKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoT1JERVJfMV9PSUQsIG9yZGVyLmdldE9pZCgpKTsKICAgICAg\nICAKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIEBTdXBwcmVzc1dh\ncm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIHZvaWQgdGVzdFhNTFN0\ncmluZ1RvQ29uc3RhbnRTdHJpbmdDb21wYXJpc29uKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIExpc3Q8T3JkZXI+IG9yZGVycyA9IGVtLmNyZWF0ZVF1ZXJ5KAog\nICAgICAgICAgICAic2VsZWN0IG8gZnJvbSBPcmRlciBvIHdoZXJlIG8uc2hp\ncEFkZHJlc3MuY2l0eSA9ICdTYW4gSm9zZSciKQogICAgICAgICAgICAuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygx\nLCBvcmRlcnMuc2l6ZSgpKTsKICAgICAgICBPcmRlciBvcmRlciA9IG9yZGVy\ncy5nZXQoMCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKE9SREVSXzFfT0lELCBv\ncmRlci5nZXRPaWQoKSk7CiAgICAgICAgCiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikKICAg\nIHB1YmxpYyB2b2lkIHRlc3RYTUxTdHJpbmdUb1BhcmFtZXRlclN0cmluZ0Nv\nbXBhcmlzb24oKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgUXVlcnkgcXVlcnkgPSBl\nbS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAgInNlbGVjdCBvIGZyb20gT3Jk\nZXIgbyB3aGVyZSBvLnNoaXBBZGRyZXNzLmNpdHkgPSA6Y2l0eSIpOwogICAg\nICAgIHF1ZXJ5LnNldFBhcmFtZXRlcigiY2l0eSIsICJTYW4gSm9zZSIpOwog\nICAgICAgIExpc3Q8T3JkZXI+IG9yZGVycyA9IHF1ZXJ5LmdldFJlc3VsdExp\nc3QoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIG9yZGVycy5zaXplKCkp\nOwogICAgICAgIE9yZGVyIG9yZGVyID0gb3JkZXJzLmdldCgwKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoT1JERVJfMV9PSUQsIG9yZGVyLmdldE9pZCgpKTsK\nICAgICAgICAKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIEBTdXBw\ncmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIHZvaWQgdGVz\ndFBhcmFtZXRlclN0cmluZ1RvWE1MU3RyaW5nQ29tcGFyaXNvbigpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBRdWVyeSBxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KAog\nICAgICAgICAgICAic2VsZWN0IG8gZnJvbSBPcmRlciBvIHdoZXJlIDpjaXR5\nID0gby5zaGlwQWRkcmVzcy5jaXR5Iik7CiAgICAgICAgcXVlcnkuc2V0UGFy\nYW1ldGVyKCJjaXR5IiwgIlNhbiBKb3NlIik7CiAgICAgICAgTGlzdDxPcmRl\ncj4gb3JkZXJzID0gcXVlcnkuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgb3JkZXJzLnNpemUoKSk7CiAgICAgICAgT3JkZXIg\nb3JkZXIgPSBvcmRlcnMuZ2V0KDApOwogICAgICAgIGFzc2VydEVxdWFscyhP\nUkRFUl8xX09JRCwgb3JkZXIuZ2V0T2lkKCkpOwogICAgICAgIAogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFVwZGF0\nZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CgogICAgICAgIE9yZGVyIG9yZGVyID0gZW0uZmluZChPcmRlci5j\nbGFzcywgT1JERVJfMV9PSUQpOwogICAgICAgIFVTQUFkZHJlc3MgYWRkcmVz\ncyA9IChVU0FBZGRyZXNzKSBvcmRlci5nZXRTaGlwQWRkcmVzcygpOwogICAg\nICAgIGFkZHJlc3Muc2V0Q2l0eSgiQ3VwZXJ0aW5vIik7CiAgICAgICAgYWRk\ncmVzcy5zZXRaSVAoOTUwMTQpOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIG9yZGVyID0gZW0uZmlu\nZChPcmRlci5jbGFzcywgT1JERVJfMV9PSUQpOwogICAgICAgIGFkZHJlc3Mg\nPSAoVVNBQWRkcmVzcykgb3JkZXIuZ2V0U2hpcEFkZHJlc3MoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoIkN1cGVydGlubyIsIGFkZHJlc3MuZ2V0Q2l0eSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoOTUwMTQsIGFkZHJlc3MuZ2V0WklQ\nKCkpOwogICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0TnVsbGlmeSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIE9yZGVyIG9yZGVyID0g\nZW0uZmluZChPcmRlci5jbGFzcywgT1JERVJfMV9PSUQpOwogICAgICAgIG9y\nZGVyLnNldFNoaXBBZGRyZXNzKG51bGwpOwoKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAg\nICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIG9yZGVyID0g\nZW0uZmluZChPcmRlci5jbGFzcywgT1JERVJfMV9PSUQpOwogICAgICAgIEFk\nZHJlc3MgYWRkcmVzcyA9IG9yZGVyLmdldFNoaXBBZGRyZXNzKCk7CiAgICAg\nICAgYXNzZXJ0TnVsbChhZGRyZXNzKTsKICAgICAgICAKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFhNTFN0cmluZ1RvQ29uc3Rh\nbnRJbnRDb21wYXJpc29uKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KAogICAgICAgICAgICAgICAgInNl\nbGVjdCBvIGZyb20gT3JkZXIgbyB3aGVyZSBvLnNoaXBBZGRyZXNzLmNpdHkg\nPSA5NTE0MSIpCiAgICAgICAgICAgICAgICAuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpYWUp\nIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZmluYWxseSB7CiAg\nICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQogICAgICAgIGZhaWwo\nImNyZWF0ZVF1ZXJ5IHNob3VsZCB0aHJvdyBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24uIik7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFhNTExpc3RU\nb0NvbnN0YW50U3RyaW5nQ29tcGFyaXNvbigpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBlbS5jcmVhdGVRdWVyeSgKICAgICAgICAg\nICAgICAgICJzZWxlY3QgbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5zaGlwQWRk\ncmVzcy5zdHJlZXQgIgogICAgICAgICAgICAgICAgICAgICsgIj0gJzU1NSBC\nYWlsZXknIikuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIH0gY2F0Y2ggKEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpYWUpIHsKICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICAgICAgfQogICAgICAgIGZhaWwoImNyZWF0ZVF1ZXJ5IHNob3Vs\nZCB0aHJvdyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdFN1YmNsYXNzUHJvcGVydHlJblhNTEZpZWxk\nQ29tcGFyaXNvbigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBlbS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAgICAgICJzZWxlY3Qg\nbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5zaGlwQWRkcmVzcy56aXAgPSA5NTE0\nMSIpCiAgICAgICAgICAgICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpYWUpIHsKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAg\nICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQogICAgICAgIGZhaWwoImNyZWF0\nZVF1ZXJ5IHNob3VsZCB0aHJvdyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nIik7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5n\nW10gYXJncykgewogICAgICAgIFRlc3RSdW5uZXIucnVuKFRlc3RYTUxDdXN0\nb21lck9yZGVyLmNsYXNzKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcGVy\nc2lzdEVudGl0aWVzKEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBDdXN0\nb21lciBjMiA9IG5ldyBDdXN0b21lcigpOwogICAgICAgIGMyLnNldENpZCgg\nbmV3IEN1c3RvbWVyLkN1c3RvbWVyS2V5KCJVU0EiLCAyKSApOwogICAgICAg\nIGMyLnNldE5hbWUoIkEmSiBBdXRvIik7CiAgICAgICAgYzIuc2V0UmF0aW5n\nKCBDcmVkaXRSYXRpbmcuR09PRCApOwogICAgICAgIGMyLnNldEFkZHJlc3Mo\nbmV3IEVBZGRyZXNzKCIyNDgwIENhbXBiZWxsIEF2ZSIsICJDYW1wYmVsbCIs\nICJDQSIKICAgICAgICAgICAgICAgICwgIjk1MTIzIikpOwogICAgICAgIGVt\nLnBlcnNpc3QoYzIpOwoKICAgICAgICBDdXN0b21lciBjMSA9IG5ldyBDdXN0\nb21lcigpOwogICAgICAgIGMxLnNldENpZCggbmV3IEN1c3RvbWVyLkN1c3Rv\nbWVyS2V5KCJVU0EiLCAxKSApOwogICAgICAgIGMxLnNldE5hbWUoIkhhcnJ5\nJ3MgQXV0byIpOwogICAgICAgIGMxLnNldFJhdGluZyggQ3JlZGl0UmF0aW5n\nLkdPT0QgKTsKICAgICAgICBjMS5zZXRBZGRyZXNzKCBuZXcgRUFkZHJlc3Mo\nIjEyNTAwIE1vbnRlcmV5IiwgIlNhbiBKb3NlIiwgIkNBIiwKICAgICAgICAg\nICAgICAgICI5NTE0MSIpKTsKICAgICAgICBlbS5wZXJzaXN0KGMxKTsKCiAg\nICAgICAgT3JkZXIgbzEgPSBuZXcgT3JkZXIoT1JERVJfMV9PSUQsIE9SREVS\nXzFfQU1PVU5ULCBPUkRFUl8xX0RFTElWRVJFRCwKICAgICAgICAgICAgICAg\nIGMxKTsKICAgICAgICBvMS5zZXRTaGlwQWRkcmVzcyhjcmVhdGVVU0FBZGRy\nZXNzKGMxLmdldE5hbWUoKSkpOwogICAgICAgIGVtLnBlcnNpc3QobzEpOwoK\nICAgICAgICBPcmRlciBvMiA9IG5ldyBPcmRlcihPUkRFUl8yX09JRCwgT1JE\nRVJfMl9BTU9VTlQsIE9SREVSXzJfREVMSVZFUkVELAogICAgICAgICAgICAg\nICAgYzEpOwogICAgICAgIG8yLnNldFNoaXBBZGRyZXNzKGNyZWF0ZUNBTkFk\nZHJlc3MoYzIuZ2V0TmFtZSgpKSk7CiAgICAgICAgZW0ucGVyc2lzdChvMik7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayB3aGV0aGVyIERCRGljdGlv\nbmFyeSBzdXBwb3J0cyBYTUwgY29sdW1uLgogICAgICogVGhpcyBpcyBkb25l\nIGJ5IGZvcmNpbmcgdGhlIGV4ZWN1dGlvbiBvZgogICAgICoge0BsaW5rIERC\nRGljdGlvbmFyeSNjb25uZWN0ZWRDb25maWd1cmF0aW9uKENvbm5lY3Rpb24p\nfS4KICAgICAqIFRoaXMgaXMgd2hlcmUgc29tZSBkaWN0aW9uYXJpZXMgYWN0\ndWFsbHkgZGV0ZXJtaW5lIHdoZXRoZXIgWE1MIGNvbHVtbiBpcwogICAgICog\nc3VwcG9ydGVkLgogICAgICogQHJldHVybiB0cnVlIGlmIHtAbGluayBEQkRp\nY3Rpb25hcnl9IHN1cHBvcnRzIFhNTCBjb2x1bW4KICAgICAqLwogICAgcHJp\ndmF0ZSBib29sZWFuIGRpY3Rpb25hcnlTdXBwb3J0c1hNTENvbHVtbigpIHsK\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0g\nY3JlYXRlRU1GKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIERCRGlj\ndGlvbmFyeSBkaWN0ID0gKChKREJDQ29uZmlndXJhdGlvbikgZW0uZ2V0Q29u\nZmlndXJhdGlvbigpKQogICAgICAgICAgICAuZ2V0REJEaWN0aW9uYXJ5SW5z\ndGFuY2UoKTsKICAgICAgICBjbG9zZUVNRihlbWYpOwogICAgICAgIHJldHVy\nbiBkaWN0LnN1cHBvcnRzWE1MQ29sdW1uOwogICAgfQogICAgCiAgICBwcml2\nYXRlIFVTQUFkZHJlc3MgY3JlYXRlVVNBQWRkcmVzcyhTdHJpbmcgbmFtZSkg\newogICAgICAgIFVTQUFkZHJlc3MgYWRkcmVzcyA9IG5ldyBPYmplY3RGYWN0\nb3J5KCkuY3JlYXRlVVNBQWRkcmVzcygpOwogICAgICAgIGFkZHJlc3Muc2V0\nTmFtZShuYW1lKTsKICAgICAgICBhZGRyZXNzLmdldFN0cmVldCgpLmFkZCgi\nMTI1MDAgTW9udGVyZXkiKTsKICAgICAgICBhZGRyZXNzLnNldENpdHkoIlNh\nbiBKb3NlIik7CiAgICAgICAgYWRkcmVzcy5zZXRTdGF0ZSgiQ0EiKTsKICAg\nICAgICBhZGRyZXNzLnNldFpJUChuZXcgSW50ZWdlcigiOTUxNDEiKSk7CiAg\nICAgICAgcmV0dXJuIGFkZHJlc3M7CiAgICB9CgogICAgcHJpdmF0ZSBDQU5B\nZGRyZXNzIGNyZWF0ZUNBTkFkZHJlc3MoU3RyaW5nIG5hbWUpIHsKICAgICAg\nICBDQU5BZGRyZXNzIGFkZHJlc3MgPSBuZXcgT2JqZWN0RmFjdG9yeSgpLmNy\nZWF0ZUNBTkFkZHJlc3MoKTsKICAgICAgICBhZGRyZXNzLnNldE5hbWUobmFt\nZSk7CiAgICAgICAgYWRkcmVzcy5nZXRTdHJlZXQoKS5hZGQoIjEyMyBXYXJk\nZW4gUm9hZCIpOwogICAgICAgIGFkZHJlc3Muc2V0Q2l0eSgiTWFya2hhbSIp\nOwogICAgICAgIGFkZHJlc3Muc2V0UG9zdGFsQ29kZSgiTDZHIDFDNyIpOwog\nICAgICAgIGFkZHJlc3Muc2V0UHJvdmluY2UoIk9OIik7CiAgICAgICAgcmV0\ndXJuIGFkZHJlc3M7CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBhc3Nl\ncnRPcmRlcnNFcXVhbChPcmRlciBvMSwgT3JkZXIgbzIpIHsKICAgICAgICBh\nc3NlcnRFcXVhbHMobzEuZ2V0T2lkKCksIG8yLmdldE9pZCgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMobzEuZ2V0QW1vdW50KCksIG8yLmdldEFtb3VudCgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMobzEuaXNEZWxpdmVyZWQoKSwgbzIu\naXNEZWxpdmVyZWQoKSk7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

