{"sha":"ffa6d2cef4224cf7217c4bdc3baa14504de4ea3d","node_id":"MDQ6QmxvYjIwNjM2NDpmZmE2ZDJjZWY0MjI0Y2Y3MjE3YzRiZGMzYmFhMTQ1MDRkZTRlYTNk","size":108176,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ffa6d2cef4224cf7217c4bdc3baa14504de4ea3d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5sb2NrbWdyOwoK\naW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZhLnNxbC5S\nZXN1bHRTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKCmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuTG9ja01vZGVUeXBlOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuUXVlcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYu\nT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkVhZ2VyRmV0Y2hNb2RlczsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDRmV0Y2hD\nb25maWd1cmF0aW9uSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLmtlcm5lbC5MUlNTaXplczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5Kb2luU3ludGF4ZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuTWl4ZWRMb2NrTGV2ZWxzOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeUZsdXNoTW9kZXM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuRW50aXR5TWFu\nYWdlckltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuamRiYy5GZXRjaERpcmVjdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLkZldGNoTW9k\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJj\nLklzb2xhdGlvbkxldmVsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmpkYmMuSkRCQ0ZldGNoUGxhbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLkpvaW5TeW50YXg7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5MUlNTaXpl\nQWxnb3JpdGhtOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmpkYmMuUmVzdWx0U2V0VHlwZTsKCi8qKgogKiBUZXN0IEZldGNoUGxh\nbiBhbmQgRmV0Y2hDb25maWd1cmF0aW9uIGhpbnRzIHByb2Nlc3NpbmcgZm9y\nIHVzZSBpbgogKiBKUEEgMi4wIGVtLmZpbmQvcmVmcmVzaC9sb2NrKC4uLiBN\nYXApIGFuZCBxdWVyeS5YKC4uLiBNYXApIG1ldGhvZHMuCiAqCiAqIFN1cHBv\ncnRlZCBoaW50czoKICogICBqYXZheC5wZXJzaXN0ZW5jZS5sb2NrLnRpbWVv\ndXQKICogICBqYXZheC5wZXJzaXN0ZW5jZS5xdWVyeS50aW1lb3V0CiAqICAg\nb3BlbmpwYS5FeHRlbmRlZFBhdGhMb29rdXAgKD8pCiAqICAgb3BlbmpwYS5G\nZXRjaEJhdGNoU2l6ZQogKiAgIG9wZW5qcGEuRmV0Y2hQbGFuLkVhZ2VyRmV0\nY2hNb2RlCiAqICAgb3BlbmpwYS5GZXRjaFBsYW4uRXh0ZW5kZWRQYXRoTG9v\na3VwICg/KQogKiAgIG9wZW5qcGEuRmV0Y2hQbGFuLkZldGNoQmF0Y2hTaXpl\nCiAqICAgb3BlbmpwYS5GZXRjaFBsYW4uRmV0Y2hEaXJlY3Rpb24KICogICBv\ncGVuanBhLkZldGNoUGxhbi5Jc29sYXRpb24KICogICBvcGVuanBhLkZldGNo\nUGxhbi5Kb2luU3ludGF4CiAqICAgb3BlbmpwYS5GZXRjaFBsYW4uTFJTU2l6\nZQogKiAgIG9wZW5qcGEuRmV0Y2hQbGFuLkxSU1NpemVBbGdvcml0aG0KICog\nICBvcGVuanBhLkZldGNoUGxhbi5Mb2NrVGltZW91dAogKiAgIG9wZW5qcGEu\nRmV0Y2hQbGFuLk1heEZldGNoRGVwdGgKICogICBvcGVuanBhLkZldGNoUGxh\nbi5RdWVyeVRpbWVvdXQKICogICBvcGVuanBhLkZldGNoUGxhbi5SZWFkTG9j\na01vZGUKICogICBvcGVuanBhLkZldGNoUGxhbi5SZXN1bHRTZXRUeXBlCiAq\nICAgb3BlbmpwYS5GZXRjaFBsYW4uU3ViY2xhc3NGZXRjaE1vZGUKICogICBv\ncGVuanBhLkZldGNoUGxhbi5Xcml0ZUxvY2tNb2RlCiAqICAgb3BlbmpwYS5G\nbHVzaEJlZm9yZVF1ZXJpZXMKICogICBvcGVuanBhLkxvY2tUaW1lb3V0CiAq\nICAgb3BlbmpwYS5NYXhGZXRjaERlcHRoCiAqICAgb3BlbmpwYS5RdWVyeVRp\nbWVvdXQKICogICBvcGVuanBhLlJlYWRMb2NrTGV2ZWwKICogICBvcGVuanBh\nLldyaXRlTG9ja0xldmVsCiAqICAgb3BlbmpwYS5qZGJjLkVhZ2VyRmV0Y2hN\nb2RlCiAqICAgb3BlbmpwYS5qZGJjLkZldGNoRGlyZWN0aW9uCiAqICAgb3Bl\nbmpwYS5qZGJjLkpvaW5TeW50YXgKICogICBvcGVuanBhLmpkYmMuTFJTU2l6\nZQogKiAgIG9wZW5qcGEuamRiYy5SZXN1bHRTZXRUeXBlCiAqICAgb3Blbmpw\nYS5qZGJjLlN1YmNsYXNzRmV0Y2hNb2RlCiAqICAgb3BlbmpwYS5qZGJjLlRy\nYW5zYWN0aW9uSXNvbGF0aW9uCiAqLwpwdWJsaWMgY2xhc3MgVGVzdEZldGNo\nSGludHMgZXh0ZW5kcyBTZXF1ZW5jZWRBY3Rpb25zVGVzdCB7CiAgICBwdWJs\naWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChMb2NrRW1wbG95ZWUu\nY2xhc3MKICAgICAgICAgICAgLCAib3BlbmpwYS5Mb2NrTWFuYWdlciIsICJt\naXhlZCIKICAgICAgICAgICAgKTsKICAgICAgICBjb21tb25TZXRVcCgpOwog\nICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuRmV0Y2hC\nYXRjaFNpemUiIGhpbnQKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdEZl\ndGNoQmF0Y2hTaXplSGludCgpIHsKICAgICAgICBTdHJpbmcgaGludE5hbWUg\nPSAib3BlbmpwYS5GZXRjaEJhdGNoU2l6ZSI7CgogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFu\nYWdlcillbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRjaFBsYW4g\nZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxhbigpOwog\nICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcgPSAo\nSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAgICAgICgoRW50\naXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hDb25m\naWd1cmF0aW9uKCk7CgogICAgICAgIGZldGNoQmF0Y2hTaXplSGludFRlc3Qo\nZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAiLTEiLCAtMSk7CiAgICAgICAg\nZmV0Y2hCYXRjaFNpemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsIC0xLCAtMSk7CiAgICAgICAgZmV0Y2hCYXRjaFNpemVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICIxMDAiLCAxMDApOwogICAgICAg\nIGZldGNoQmF0Y2hTaXplSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCAxMDAsIDEwMCk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4eHgiKTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIp\nOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAg\nICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlz\nQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEZldGNoQmF0Y2hTaXpl\nKDk5OSk7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIEZl\ndGNoQ29uZmlndXJhdGlvbi5ERUZBVUxUKTsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKGZQbGFuLmdldEZldGNoQmF0Y2hTaXplKCksIC0xKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBmYWlsKCJV\nbmV4cGVjdGVkICIgKyBlLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAgICAg\nICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKiBHb29kCiAg\nICAgKiBUZXN0ICJvcGVuanBhLkZldGNoUGxhbi5GZXRjaEJhdGNoU2l6ZSIg\naGludAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hQbGFuRmV0\nY2hCYXRjaFNpemVIaW50KCkgewogICAgICAgIFN0cmluZyBoaW50TmFtZSA9\nICJvcGVuanBhLkZldGNoUGxhbi5GZXRjaEJhdGNoU2l6ZSI7CgogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBB\nRW50aXR5TWFuYWdlcillbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNG\nZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNo\nUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZD\nb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAg\nICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0\nRmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAgIGZldGNoQmF0Y2hTaXpl\nSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAiMCIsIDApOwog\nICAgICAgIGZldGNoQmF0Y2hTaXplSGludFRlc3QoZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCAwLCAwKTsKICAgICAgICBmZXRjaEJhdGNoU2l6ZUhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIjUwMCIsIDUwMCk7CiAg\nICAgICAgZmV0Y2hCYXRjaFNpemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsIDUwMCwgNTAwKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAg\nICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAgICAg\nICAgICBmYWlsKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIs\nCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xh\nc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0RmV0Y2hCYXRj\naFNpemUoOTk5KTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoZlBsYW4uZ2V0RmV0Y2hCYXRjaFNpemUoKSwgLTEpOwog\nICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGZh\naWwoIlVuZXhwZWN0ZWQgIiArIGUuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpOwog\nICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHByaXZh\ndGUgdm9pZCBmZXRjaEJhdGNoU2l6ZUhpbnRUZXN0KEpEQkNGZXRjaFBsYW4g\nZlBsYW4sCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNv\nbmZpZywgU3RyaW5nIGhpbnQsIE9iamVjdCB2YWx1ZSwKICAgICAgICBpbnQg\nZXhwZWN0ZWQpIHsKICAgICAgICBmQ29uZmlnLnNldEZldGNoQmF0Y2hTaXpl\nKDk5OSk7CiAgICAgICAgZlBsYW4uc2V0SGludChoaW50LCB2YWx1ZSk7CiAg\nICAgICAgT2JqZWN0IGdldFZhbHVlID0gZlBsYW4uZ2V0SGludChoaW50KTsK\nICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUuZ2V0Q2xhc3MoKSwgZ2V0VmFs\ndWUuZ2V0Q2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVlLCBn\nZXRWYWx1ZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkLCBmUGxh\nbi5nZXRGZXRjaEJhdGNoU2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nZXhwZWN0ZWQsIGZDb25maWcuZ2V0RmV0Y2hCYXRjaFNpemUoKSk7CiAgICB9\nCgogICAgLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5GZXRjaFBsYW4u\nRWFnZXJGZXRjaE1vZGUiIGhpbnQKICAgICAqLwogICAgcHVibGljIHZvaWQg\ndGVzdEZldGNoUGxhbkVhZ2VyRmV0Y2hNb2RlSGludCgpIHsKICAgICAgICBT\ndHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5GZXRjaFBsYW4uRWFnZXJGZXRj\naE1vZGUiOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtLmdldERlbGVnYXRl\nKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQ\nbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29u\nZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0Y2hDb25maWd1cmF0\naW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5hZ2VySW1wbCkgb2Vt\nKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsKCiAgICAg\nICAgZWFnZXJGZXRjaE1vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGlu\ndE5hbWUsICJub25lIiwKICAgICAgICAgICAgRmV0Y2hNb2RlLk5PTkUsIEVh\nZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9OT05FKTsKICAgICAgICBlYWdlckZldGNo\nTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgRmV0Y2hN\nb2RlLk5PTkUubmFtZSgpLAogICAgICAgICAgICBGZXRjaE1vZGUuTk9ORSwg\nRWFnZXJGZXRjaE1vZGVzLkVBR0VSX05PTkUpOwogICAgICAgIGVhZ2VyRmV0\nY2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBGZXRj\naE1vZGUuTk9ORSwKICAgICAgICAgICAgRmV0Y2hNb2RlLk5PTkUsIEVhZ2Vy\nRmV0Y2hNb2Rlcy5FQUdFUl9OT05FKTsKCiAgICAgICAgZWFnZXJGZXRjaE1v\nZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJwYXJhbGxl\nbCIsCiAgICAgICAgICAgIEZldGNoTW9kZS5QQVJBTExFTCwgRWFnZXJGZXRj\naE1vZGVzLkVBR0VSX1BBUkFMTEVMKTsKICAgICAgICBlYWdlckZldGNoTW9k\nZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgRmV0Y2hNb2Rl\nLlBBUkFMTEVMCiAgICAgICAgICAgIC5uYW1lKCksIEZldGNoTW9kZS5QQVJB\nTExFTCwgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX1BBUkFMTEVMKTsKICAgICAg\nICBlYWdlckZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwgRmV0Y2hNb2RlLlBBUkFMTEVMLAogICAgICAgICAgICBGZXRjaE1v\nZGUuUEFSQUxMRUwsIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9QQVJBTExFTCk7\nCgogICAgICAgIGVhZ2VyRmV0Y2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLCAiam9pbiIsCiAgICAgICAgICAgIEZldGNoTW9kZS5K\nT0lOLCBFYWdlckZldGNoTW9kZXMuRUFHRVJfSk9JTik7CiAgICAgICAgZWFn\nZXJGZXRjaE1vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUs\nIEZldGNoTW9kZS5KT0lOLm5hbWUoKSwKICAgICAgICAgICAgRmV0Y2hNb2Rl\nLkpPSU4sIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9KT0lOKTsKICAgICAgICBl\nYWdlckZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgRmV0Y2hNb2RlLkpPSU4sCiAgICAgICAgICAgIEZldGNoTW9kZS5KT0lO\nLCBFYWdlckZldGNoTW9kZXMuRUFHRVJfSk9JTik7CgogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIp\nOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXki\nKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBl\neGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7\nCiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNl\ndEhpbnQoaGludE5hbWUsICIxMjM0NSIpOwogICAgICAgICAgICBmUGxhbi5z\nZXRIaW50KGhpbnROYW1lLCAiNjc4OTAiKTsKICAgICAgICAgICAgZmFpbCgi\nRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAg\nICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWdu\nYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsK\nICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTMpOwogICAg\nICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlv\nbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAg\nICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKiBHb29kCiAg\nICAgKiBUZXN0ICJvcGVuanBhLmpkYmMuRWFnZXJGZXRjaE1vZGUiIGhpbnQK\nICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdEpkYmNFYWdlckZldGNoTW9k\nZUhpbnQoKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5qcGEu\namRiYy5FYWdlckZldGNoTW9kZSI7CgogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikg\nZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFu\nID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRGZXRjaFBsYW4oKTsKICAgICAg\nICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNG\nZXRjaENvbmZpZ3VyYXRpb25JbXBsKQogICAgICAgICAgICAoKEVudGl0eU1h\nbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJh\ndGlvbigpOwoKICAgICAgICBlYWdlckZldGNoTW9kZUhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1\nZU9mKEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9OT05FKSwgRmV0Y2hNb2RlLk5P\nTkUsCiAgICAgICAgICAgIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9OT05FKTsK\nICAgICAgICBlYWdlckZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmln\nLCBoaW50TmFtZSwKICAgICAgICAgICAgRWFnZXJGZXRjaE1vZGVzLkVBR0VS\nX05PTkUsIEZldGNoTW9kZS5OT05FLAogICAgICAgICAgICBFYWdlckZldGNo\nTW9kZXMuRUFHRVJfTk9ORSk7CgogICAgICAgIGVhZ2VyRmV0Y2hNb2RlSGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBF\nYWdlckZldGNoTW9kZXMuRUFHRVJfUEFSQUxMRUwsIEZldGNoTW9kZS5QQVJB\nTExFTCwKICAgICAgICAgICAgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX1BBUkFM\nTEVMKTsKICAgICAgICBlYWdlckZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9m\nKEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9QQVJBTExFTCksIEZldGNoTW9kZS5Q\nQVJBTExFTCwKICAgICAgICAgICAgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX1BB\nUkFMTEVMKTsKCiAgICAgICAgZWFnZXJGZXRjaE1vZGVIaW50VGVzdChmUGxh\nbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAudmFs\ndWVPZihFYWdlckZldGNoTW9kZXMuRUFHRVJfSk9JTiksIEZldGNoTW9kZS5K\nT0lOLAogICAgICAgICAgICBFYWdlckZldGNoTW9kZXMuRUFHRVJfSk9JTik7\nCiAgICAgICAgZWFnZXJGZXRjaE1vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsCiAgICAgICAgICAgIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdF\nUl9KT0lOLCBGZXRjaE1vZGUuSk9JTiwKICAgICAgICAgICAgRWFnZXJGZXRj\naE1vZGVzLkVBR0VSX0pPSU4pOwoKICAgICAgICB0cnkgewogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4eHgiKTsKICAgICAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5eXl5Iik7CiAgICAgICAg\nICAgIGZhaWwoIkV4cGVjdGluZyBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwK\nICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFz\ncy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0K\nICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnRO\nYW1lLCAiMTIzNDUiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50\nTmFtZSwgIjY3ODkwIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBh\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVn\naHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUu\nZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAg\nICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMSk7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAgICAgZmFp\nbCgiRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwog\nICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFz\nc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAg\nICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNz\naWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIEZl\ndGNoQ29uZmlndXJhdGlvbi5ERUZBVUxUKTsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKGZQbGFuLmdldEVhZ2VyRmV0Y2hNb2RlKCksIEZldGNoTW9kZS5Q\nQVJBTExFTCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgICBmYWlsKCJVbmV4cGVjdGVkICIgKyBlLmdldENsYXNzKCku\nZ2V0TmFtZSgpKTsKICAgICAgICB9CgogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgcHJpdmF0ZSB2b2lkIGVhZ2VyRmV0Y2hNb2RlSGludFRlc3Qo\nSkRCQ0ZldGNoUGxhbiBmUGxhbiwKICAgICAgICBKREJDRmV0Y2hDb25maWd1\ncmF0aW9uSW1wbCBmQ29uZmlnLCBTdHJpbmcgaGludCwgT2JqZWN0IHZhbHVl\nLAogICAgICAgIE9iamVjdCBleHBlY3RlZFZhbHVlLCBpbnQgZXhwZWN0ZWQp\nIHsKICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnQsIHZhbHVlKTsKICAgICAg\nICBPYmplY3QgZ2V0VmFsdWUgPSBmUGxhbi5nZXRIaW50KGhpbnQpOwogICAg\nICAgIGFzc2VydEVxdWFscyh2YWx1ZS5nZXRDbGFzcygpLCBnZXRWYWx1ZS5n\nZXRDbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUsIGdldFZh\nbHVlKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRWYWx1ZSwgZlBs\nYW4uZ2V0RWFnZXJGZXRjaE1vZGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKGV4cGVjdGVkLCBmQ29uZmlnLmdldEVhZ2VyRmV0Y2hNb2RlKCkpOwogICAg\nfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuRmV0Y2hQbGFu\nLkpvaW5TeW50YXgiIGhpbnQKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVz\ndEZldGNoUGxhbkpvaW5TeW50YXhIaW50KCkgewogICAgICAgIFN0cmluZyBo\naW50TmFtZSA9ICJvcGVuanBhLkZldGNoUGxhbi5Kb2luU3ludGF4IjsKCiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKWVtLmdldERlbGVnYXRlKCk7CiAgICAgICAg\nSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0\nRmV0Y2hQbGFuKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbklt\ncGwgZkNvbmZpZyA9IChKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAg\nICAgICAgICAgKChFbnRpdHlNYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIo\nKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgam9pblN5bnRh\neEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgInNxbDkyIiwK\nICAgICAgICAgICAgSm9pblN5bnRheC5TUUw5MiwgSm9pblN5bnRheGVzLlNZ\nTlRBWF9TUUw5Mik7CiAgICAgICAgam9pblN5bnRheEhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwgSm9pblN5bnRheC5TUUw5Mi5uYW1lKCks\nCiAgICAgICAgICAgIEpvaW5TeW50YXguU1FMOTIsIEpvaW5TeW50YXhlcy5T\nWU5UQVhfU1FMOTIpOwogICAgICAgIGpvaW5TeW50YXhIaW50VGVzdChmUGxh\nbiwgZkNvbmZpZywgaGludE5hbWUsIEpvaW5TeW50YXguU1FMOTIsCiAgICAg\nICAgICAgIEpvaW5TeW50YXguU1FMOTIsIEpvaW5TeW50YXhlcy5TWU5UQVhf\nU1FMOTIpOwoKICAgICAgICBqb2luU3ludGF4SGludFRlc3QoZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLCAidHJhZGl0aW9uYWwiLAogICAgICAgICAgICBK\nb2luU3ludGF4LlRSQURJVElPTkFMLCBKb2luU3ludGF4ZXMuU1lOVEFYX1RS\nQURJVElPTkFMKTsKICAgICAgICBqb2luU3ludGF4SGludFRlc3QoZlBsYW4s\nIGZDb25maWcsIGhpbnROYW1lLCBKb2luU3ludGF4LlRSQURJVElPTkFMCiAg\nICAgICAgICAgIC5uYW1lKCksIEpvaW5TeW50YXguVFJBRElUSU9OQUwsIEpv\naW5TeW50YXhlcy5TWU5UQVhfVFJBRElUSU9OQUwpOwogICAgICAgIGpvaW5T\neW50YXhIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIEpvaW5T\neW50YXguVFJBRElUSU9OQUwsCiAgICAgICAgICAgIEpvaW5TeW50YXguVFJB\nRElUSU9OQUwsIEpvaW5TeW50YXhlcy5TWU5UQVhfVFJBRElUSU9OQUwpOwoK\nICAgICAgICBqb2luU3ludGF4SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCAiZGF0YWJhc2UiLAogICAgICAgICAgICBKb2luU3ludGF4LkRB\nVEFCQVNFLCBKb2luU3ludGF4ZXMuU1lOVEFYX0RBVEFCQVNFKTsKICAgICAg\nICBqb2luU3ludGF4SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLAogICAgICAgICAgICBKb2luU3ludGF4LkRBVEFCQVNFLm5hbWUoKSwgSm9p\nblN5bnRheC5EQVRBQkFTRSwKICAgICAgICAgICAgSm9pblN5bnRheGVzLlNZ\nTlRBWF9EQVRBQkFTRSk7CiAgICAgICAgam9pblN5bnRheEhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgSm9pblN5bnRheC5EQVRBQkFTRSwK\nICAgICAgICAgICAgSm9pblN5bnRheC5EQVRBQkFTRSwgSm9pblN5bnRheGVz\nLlNZTlRBWF9EQVRBQkFTRSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAg\nICAgZmFpbCgiRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u\nLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAog\nICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNz\nLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5h\nbWUsICIxMjM0NSIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnRO\nYW1lLCAiNjc4OTAiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEg\nSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdo\ndCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5n\nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0xKTsKICAgICAgICAgICAg\nZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAgICBmYWls\nKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAg\nICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAg\nICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3Np\nZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBUZXN0ICJv\ncGVuanBhLmpkYmMuSm9pblN5bnRheCIgaGludAogICAgICovCiAgICBwdWJs\naWMgdm9pZCB0ZXN0SmRiY0pvaW5TeW50YXhIaW50KCkgewogICAgICAgIFN0\ncmluZyBoaW50TmFtZSA9ICJvcGVuanBhLmpkYmMuSm9pblN5bnRheCI7Cgog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChP\ncGVuSlBBRW50aXR5TWFuYWdlcikgZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAg\nICBKREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5n\nZXRGZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9u\nSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKQog\nICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tl\ncigpLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAgICAgICBqb2luU3lu\ndGF4SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcK\nICAgICAgICAgICAgLnZhbHVlT2YoSm9pblN5bnRheGVzLlNZTlRBWF9TUUw5\nMiksIEpvaW5TeW50YXguU1FMOTIsCiAgICAgICAgICAgIEpvaW5TeW50YXhl\ncy5TWU5UQVhfU1FMOTIpOwogICAgICAgIGpvaW5TeW50YXhIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIEpvaW5TeW50YXhlcy5TWU5UQVhf\nU1FMOTIsCiAgICAgICAgICAgIEpvaW5TeW50YXguU1FMOTIsIEpvaW5TeW50\nYXhlcy5TWU5UQVhfU1FMOTIpOwoKICAgICAgICBqb2luU3ludGF4SGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAg\nICAgLnZhbHVlT2YoSm9pblN5bnRheGVzLlNZTlRBWF9UUkFESVRJT05BTCks\nIEpvaW5TeW50YXguVFJBRElUSU9OQUwsCiAgICAgICAgICAgIEpvaW5TeW50\nYXhlcy5TWU5UQVhfVFJBRElUSU9OQUwpOwogICAgICAgIGpvaW5TeW50YXhI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAg\nIEpvaW5TeW50YXhlcy5TWU5UQVhfVFJBRElUSU9OQUwsIEpvaW5TeW50YXgu\nVFJBRElUSU9OQUwsCiAgICAgICAgICAgIEpvaW5TeW50YXhlcy5TWU5UQVhf\nVFJBRElUSU9OQUwpOwoKICAgICAgICBqb2luU3ludGF4SGludFRlc3QoZlBs\nYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAgLnZh\nbHVlT2YoSm9pblN5bnRheGVzLlNZTlRBWF9EQVRBQkFTRSksIEpvaW5TeW50\nYXguREFUQUJBU0UsCiAgICAgICAgICAgIEpvaW5TeW50YXhlcy5TWU5UQVhf\nREFUQUJBU0UpOwogICAgICAgIGpvaW5TeW50YXhIaW50VGVzdChmUGxhbiwg\nZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIEpvaW5TeW50YXhlcy5T\nWU5UQVhfREFUQUJBU0UsIEpvaW5TeW50YXguREFUQUJBU0UsCiAgICAgICAg\nICAgIEpvaW5TeW50YXhlcy5TWU5UQVhfREFUQUJBU0UpOwoKICAgICAgICB0\ncnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4\neHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5\neXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0\nZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3Mo\nKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxh\nbi5zZXRIaW50KGhpbnROYW1lLCAiMTIzNDUiKTsKICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgIjY3ODkwIik7CiAgICAgICAgICAgIGZh\naWwoIkV4cGVjdGluZyBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBh\nc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAg\nICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fz\nc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAg\nICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAt\nMSk7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsK\nICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50\nRXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNl\ncHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0\naW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAg\nICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhp\nbnQoaGludE5hbWUsIEZldGNoQ29uZmlndXJhdGlvbi5ERUZBVUxUKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKGZDb25maWcuZ2V0Sm9pblN5bnRheCgp\nLAogICAgICAgICAgICAgICAgKChKREJDQ29uZmlndXJhdGlvbikgZkNvbmZp\nZy5nZXRDb250ZXh0KCkuZ2V0Q29uZmlndXJhdGlvbigpKQogICAgICAgICAg\nICAgICAgICAgIC5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpLmpvaW5TeW50\nYXgpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIGZhaWwoIlVuZXhwZWN0ZWQgIiArIGUuZ2V0Q2xhc3MoKS5nZXROYW1l\nKCkpOwogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHByaXZhdGUgdm9pZCBqb2luU3ludGF4SGludFRlc3QoSkRCQ0ZldGNoUGxh\nbiBmUGxhbiwKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBm\nQ29uZmlnLCBTdHJpbmcgaGludCwgT2JqZWN0IHZhbHVlLAogICAgICAgIE9i\namVjdCBleHBlY3RlZFZhbHVlLCBpbnQgZXhwZWN0ZWQpIHsKICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnQsIHZhbHVlKTsKICAgICAgICBPYmplY3QgZ2V0\nVmFsdWUgPSBmUGxhbi5nZXRIaW50KGhpbnQpOwogICAgICAgIGFzc2VydEVx\ndWFscyh2YWx1ZS5nZXRDbGFzcygpLCBnZXRWYWx1ZS5nZXRDbGFzcygpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUsIGdldFZhbHVlKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRWYWx1ZSwgZlBsYW4uZ2V0Sm9pblN5\nbnRheCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWQsIGZDb25m\naWcuZ2V0Sm9pblN5bnRheCgpKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAg\nKiBUZXN0ICJvcGVuanBhLkZldGNoUGxhbi5GZXRjaERpcmVjdGlvbiIgaGlu\ndAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hQbGFuRmV0Y2hE\naXJlY3Rpb25IaW50KCkgewogICAgICAgIFN0cmluZyBoaW50TmFtZSA9ICJv\ncGVuanBhLkZldGNoUGxhbi5GZXRjaERpcmVjdGlvbiI7CgogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50\naXR5TWFuYWdlcikgZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAgICBKREJDRmV0\nY2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRGZXRjaFBs\nYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29u\nZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKQogICAgICAgICAg\nICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tlcigpLmdldEZl\ndGNoQ29uZmlndXJhdGlvbigpOwoKICAgICAgICBmZXRjaERpcmVjdGlvbkhp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgImZvcndhcmQiLAog\nICAgICAgICAgICBGZXRjaERpcmVjdGlvbi5GT1JXQVJELCBSZXN1bHRTZXQu\nRkVUQ0hfRk9SV0FSRCk7CiAgICAgICAgZmV0Y2hEaXJlY3Rpb25IaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIEZldGNoRGlyZWN0aW9uLkZP\nUldBUkQKICAgICAgICAgICAgLm5hbWUoKSwgRmV0Y2hEaXJlY3Rpb24uRk9S\nV0FSRCwgUmVzdWx0U2V0LkZFVENIX0ZPUldBUkQpOwogICAgICAgIGZldGNo\nRGlyZWN0aW9uSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAog\nICAgICAgICAgICBGZXRjaERpcmVjdGlvbi5GT1JXQVJELCBGZXRjaERpcmVj\ndGlvbi5GT1JXQVJELAogICAgICAgICAgICBSZXN1bHRTZXQuRkVUQ0hfRk9S\nV0FSRCk7CgogICAgICAgIGZldGNoRGlyZWN0aW9uSGludFRlc3QoZlBsYW4s\nIGZDb25maWcsIGhpbnROYW1lLCAicmV2ZXJzZSIsCiAgICAgICAgICAgIEZl\ndGNoRGlyZWN0aW9uLlJFVkVSU0UsIFJlc3VsdFNldC5GRVRDSF9SRVZFUlNF\nKTsKICAgICAgICBmZXRjaERpcmVjdGlvbkhpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgRmV0Y2hEaXJlY3Rpb24uUkVWRVJTRQogICAgICAg\nICAgICAubmFtZSgpLCBGZXRjaERpcmVjdGlvbi5SRVZFUlNFLCBSZXN1bHRT\nZXQuRkVUQ0hfUkVWRVJTRSk7CiAgICAgICAgZmV0Y2hEaXJlY3Rpb25IaW50\nVGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIEZl\ndGNoRGlyZWN0aW9uLlJFVkVSU0UsIEZldGNoRGlyZWN0aW9uLlJFVkVSU0Us\nCiAgICAgICAgICAgIFJlc3VsdFNldC5GRVRDSF9SRVZFUlNFKTsKCiAgICAg\nICAgZmV0Y2hEaXJlY3Rpb25IaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGlu\ndE5hbWUsICJ1bmtub3duIiwKICAgICAgICAgICAgRmV0Y2hEaXJlY3Rpb24u\nVU5LTk9XTiwgUmVzdWx0U2V0LkZFVENIX1VOS05PV04pOwogICAgICAgIGZl\ndGNoRGlyZWN0aW9uSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLCBGZXRjaERpcmVjdGlvbi5VTktOT1dOCiAgICAgICAgICAgIC5uYW1lKCks\nIEZldGNoRGlyZWN0aW9uLlVOS05PV04sIFJlc3VsdFNldC5GRVRDSF9VTktO\nT1dOKTsKICAgICAgICBmZXRjaERpcmVjdGlvbkhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgRmV0Y2hEaXJlY3Rpb24u\nVU5LTk9XTiwgRmV0Y2hEaXJlY3Rpb24uVU5LTk9XTiwKICAgICAgICAgICAg\nUmVzdWx0U2V0LkZFVENIX1VOS05PV04pOwoKICAgICAgICB0cnkgewogICAg\nICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4eHgiKTsKICAg\nICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5eXl5Iik7CiAg\nICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0\naW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAg\nICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnROYW1lLCAiMTIzNDUiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGlu\ndChoaW50TmFtZSwgIjY3ODkwIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVj\ndGluZyBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVl\nKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAg\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVG\ncm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewog\nICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMSk7CiAgICAg\nICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAg\nICAgZmFpbCgiRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u\nLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAog\nICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNz\nLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyogR29vZAogICAgICog\nVGVzdCAib3BlbmpwYS5qZGJjLkZldGNoRGlyZWN0aW9uIiBoaW50CiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RKZGJjRmV0Y2hEaXJlY3Rpb25IaW50\nKCkgewogICAgICAgIFN0cmluZyBoaW50TmFtZSA9ICJvcGVuanBhLmpkYmMu\nRmV0Y2hEaXJlY3Rpb24iOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtLmdl\ndERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChK\nREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0Y2hD\nb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5hZ2Vy\nSW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24o\nKTsKCiAgICAgICAgZmV0Y2hEaXJlY3Rpb25IaW50VGVzdChmUGxhbiwgZkNv\nbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAudmFsdWVPZihS\nZXN1bHRTZXQuRkVUQ0hfRk9SV0FSRCksIEZldGNoRGlyZWN0aW9uLkZPUldB\nUkQsCiAgICAgICAgICAgIFJlc3VsdFNldC5GRVRDSF9GT1JXQVJEKTsKICAg\nICAgICBmZXRjaERpcmVjdGlvbkhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwKICAgICAgICAgICAgUmVzdWx0U2V0LkZFVENIX0ZPUldBUkQs\nIEZldGNoRGlyZWN0aW9uLkZPUldBUkQsCiAgICAgICAgICAgIFJlc3VsdFNl\ndC5GRVRDSF9GT1JXQVJEKTsKCiAgICAgICAgZmV0Y2hEaXJlY3Rpb25IaW50\nVGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAg\nICAgICAudmFsdWVPZihSZXN1bHRTZXQuRkVUQ0hfUkVWRVJTRSksIEZldGNo\nRGlyZWN0aW9uLlJFVkVSU0UsCiAgICAgICAgICAgIFJlc3VsdFNldC5GRVRD\nSF9SRVZFUlNFKTsKICAgICAgICBmZXRjaERpcmVjdGlvbkhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgUmVzdWx0U2V0\nLkZFVENIX1JFVkVSU0UsIEZldGNoRGlyZWN0aW9uLlJFVkVSU0UsCiAgICAg\nICAgICAgIFJlc3VsdFNldC5GRVRDSF9SRVZFUlNFKTsKCiAgICAgICAgZmV0\nY2hEaXJlY3Rpb25IaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUs\nIFN0cmluZwogICAgICAgICAgICAudmFsdWVPZihSZXN1bHRTZXQuRkVUQ0hf\nVU5LTk9XTiksIEZldGNoRGlyZWN0aW9uLlVOS05PV04sCiAgICAgICAgICAg\nIFJlc3VsdFNldC5GRVRDSF9VTktOT1dOKTsKICAgICAgICBmZXRjaERpcmVj\ndGlvbkhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAg\nICAgICAgUmVzdWx0U2V0LkZFVENIX1VOS05PV04sIEZldGNoRGlyZWN0aW9u\nLlVOS05PV04sCiAgICAgICAgICAgIFJlc3VsdFNldC5GRVRDSF9VTktOT1dO\nKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludCho\naW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQo\naGludE5hbWUsICJ5eXl5eSIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3Rp\nbmcgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgi\nQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJv\nbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjEyMzQ1Iik7CiAg\nICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICI2Nzg5MCIpOwog\nICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2Vw\ndGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAg\nICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGlu\ndChoaW50TmFtZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhp\nbnROYW1lLCAtMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQg\nZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0\nQ2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCBGZXRjaENvbmZpZ3VyYXRpb24u\nREVGQVVMVCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhmQ29uZmlnLmdl\ndEZldGNoRGlyZWN0aW9uKCksIFJlc3VsdFNldC5GRVRDSF9GT1JXQVJEKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBm\nYWlsKCJVbmV4cGVjdGVkICIgKyBlLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsK\nICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwcml2\nYXRlIHZvaWQgZmV0Y2hEaXJlY3Rpb25IaW50VGVzdChKREJDRmV0Y2hQbGFu\nIGZQbGFuLAogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZD\nb25maWcsIFN0cmluZyBoaW50LCBPYmplY3QgdmFsdWUsCiAgICAgICAgT2Jq\nZWN0IGV4cGVjdGVkVmFsdWUsIGludCBleHBlY3RlZCkgewogICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludCwgdmFsdWUpOwogICAgICAgIE9iamVjdCBnZXRW\nYWx1ZSA9IGZQbGFuLmdldEhpbnQoaGludCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKHZhbHVlLmdldENsYXNzKCksIGdldFZhbHVlLmdldENsYXNzKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZSwgZ2V0VmFsdWUpOwogICAgICAg\nIGFzc2VydEVxdWFscyhleHBlY3RlZFZhbHVlLCBmUGxhbi5nZXRGZXRjaERp\ncmVjdGlvbigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWQsIGZD\nb25maWcuZ2V0RmV0Y2hEaXJlY3Rpb24oKSk7CiAgICB9CgogICAgLyogR29v\nZAogICAgICogVGVzdCAib3BlbmpwYS5GZXRjaFBsYW4uSXNvbGF0aW9uIiBo\naW50CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFBsYW5Jc29s\nYXRpb25IaW50KCkgewogICAgICAgIFN0cmluZyBoaW50TmFtZSA9ICJvcGVu\nanBhLkZldGNoUGxhbi5Jc29sYXRpb24iOwoKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFn\nZXIpIGVtLmdldERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBm\nUGxhbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAg\nICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChK\nREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRp\ndHlNYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZp\nZ3VyYXRpb24oKTsKCiAgICAgICAgaXNvbGF0aW9uSGludFRlc3Qob2VtLCBm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJkZWZhdWx0IiwKICAgICAgICAg\nICAgSXNvbGF0aW9uTGV2ZWwuREVGQVVMVCwgLTEpOwogICAgICAgIGlzb2xh\ndGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAi\nREVGQVVMVCIsCiAgICAgICAgICAgIElzb2xhdGlvbkxldmVsLkRFRkFVTFQs\nIC0xKTsKICAgICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwu\nREVGQVVMVCwgSXNvbGF0aW9uTGV2ZWwuREVGQVVMVCwgLTEpOwoKICAgICAg\nICBib29sZWFuIHN1cHBvcnRJc29sYXRpb25Gb3JVcGRhdGUgPSAoKEpEQkND\nb25maWd1cmF0aW9uKSBmQ29uZmlnCiAgICAgICAgICAgIC5nZXRDb250ZXh0\nKCkuZ2V0Q29uZmlndXJhdGlvbigpKS5nZXREQkRpY3Rpb25hcnlJbnN0YW5j\nZSgpCiAgICAgICAgICAgIC5zdXBwb3J0c0lzb2xhdGlvbkZvclVwZGF0ZSgp\nOwogICAgICAgIGlmIChzdXBwb3J0SXNvbGF0aW9uRm9yVXBkYXRlKSB7CiAg\nICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLCAibm9uZSIsCiAgICAgICAgICAgICAgICBJc29sYXRp\nb25MZXZlbC5OT05FLCBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX05PTkUpOwog\nICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgIk5PTkUiLAogICAgICAgICAgICAgICAgSXNvbGF0\naW9uTGV2ZWwuTk9ORSwgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9OT05FKTsK\nICAgICAgICAgICAgaXNvbGF0aW9uSGludFRlc3Qob2VtLCBmUGxhbiwgZkNv\nbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgICAgICBJc29sYXRpb25MZXZl\nbC5OT05FLCBJc29sYXRpb25MZXZlbC5OT05FLAogICAgICAgICAgICAgICAg\nQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9OT05FKTsKCiAgICAgICAgICAgIGlz\nb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLAogICAgICAgICAgICAgICAgInJlYWQtdW5jb21taXR0ZWQiLCBJc29sYXRp\nb25MZXZlbC5SRUFEX1VOQ09NTUlUVEVELAogICAgICAgICAgICAgICAgQ29u\nbmVjdGlvbi5UUkFOU0FDVElPTl9SRUFEX1VOQ09NTUlUVEVEKTsKICAgICAg\nICAgICAgaXNvbGF0aW9uSGludFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsCiAgICAgICAgICAgICAgICAiUkVBRF9VTkNPTU1JVFRFRCIs\nIElzb2xhdGlvbkxldmVsLlJFQURfVU5DT01NSVRURUQsCiAgICAgICAgICAg\nICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JFQURfVU5DT01NSVRURUQp\nOwogICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgICAgIElzb2xhdGlvbkxl\ndmVsLlJFQURfVU5DT01NSVRURUQsCiAgICAgICAgICAgICAgICBJc29sYXRp\nb25MZXZlbC5SRUFEX1VOQ09NTUlUVEVELAogICAgICAgICAgICAgICAgQ29u\nbmVjdGlvbi5UUkFOU0FDVElPTl9SRUFEX1VOQ09NTUlUVEVEKTsKCiAgICAg\nICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCAicmVhZC1jb21taXR0ZWQiLAogICAgICAgICAgICAgICAg\nSXNvbGF0aW9uTGV2ZWwuUkVBRF9DT01NSVRURUQsCiAgICAgICAgICAgICAg\nICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JFQURfQ09NTUlUVEVEKTsKICAg\nICAgICAgICAgaXNvbGF0aW9uSGludFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsICJSRUFEX0NPTU1JVFRFRCIsCiAgICAgICAgICAgICAg\nICBJc29sYXRpb25MZXZlbC5SRUFEX0NPTU1JVFRFRCwKICAgICAgICAgICAg\nICAgIENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVBRF9DT01NSVRURUQpOwog\nICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgICAgIElzb2xhdGlvbkxldmVs\nLlJFQURfQ09NTUlUVEVELCBJc29sYXRpb25MZXZlbC5SRUFEX0NPTU1JVFRF\nRCwKICAgICAgICAgICAgICAgIENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVB\nRF9DT01NSVRURUQpOwoKICAgICAgICAgICAgaXNvbGF0aW9uSGludFRlc3Qo\nb2VtLCBmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJyZXBlYXRhYmxlLXJl\nYWQiLAogICAgICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuUkVQRUFUQUJM\nRV9SRUFELAogICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5UUkFOU0FDVElP\nTl9SRVBFQVRBQkxFX1JFQUQpOwogICAgICAgICAgICBpc29sYXRpb25IaW50\nVGVzdChvZW0sIGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIlJFUEVBVEFC\nTEVfUkVBRCIsCiAgICAgICAgICAgICAgICBJc29sYXRpb25MZXZlbC5SRVBF\nQVRBQkxFX1JFQUQsCiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5T\nQUNUSU9OX1JFUEVBVEFCTEVfUkVBRCk7CiAgICAgICAgICAgIGlzb2xhdGlv\nbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAg\nICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuUkVQRUFUQUJMRV9SRUFELCBJ\nc29sYXRpb25MZXZlbC5SRVBFQVRBQkxFX1JFQUQsCiAgICAgICAgICAgICAg\nICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JFUEVBVEFCTEVfUkVBRCk7Cgog\nICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgInNlcmlhbGl6YWJsZSIsCiAgICAgICAgICAgICAg\nICBJc29sYXRpb25MZXZlbC5TRVJJQUxJWkFCTEUsCiAgICAgICAgICAgICAg\nICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1NFUklBTElaQUJMRSk7CiAgICAg\nICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCAiU0VSSUFMSVpBQkxFIiwKICAgICAgICAgICAgICAgIElz\nb2xhdGlvbkxldmVsLlNFUklBTElaQUJMRSwKICAgICAgICAgICAgICAgIENv\nbm5lY3Rpb24uVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKTsKICAgICAgICAg\nICAgaXNvbGF0aW9uSGludFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGlu\ndE5hbWUsCiAgICAgICAgICAgICAgICBJc29sYXRpb25MZXZlbC5TRVJJQUxJ\nWkFCTEUsIElzb2xhdGlvbkxldmVsLlNFUklBTElaQUJMRSwKICAgICAgICAg\nICAgICAgIENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKTsK\nICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNl\ndEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBmUGxhbi5z\nZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgi\nRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAg\nICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWdu\nYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICIxMjM0\nNSIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiNjc4\nOTAiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVj\ndGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNz\nKCkpKTsKICAgICAgICB9CiAgICAgICAgLy8gSXMgbm90IC0xIGlzIHZhbGlk\nIHZhbHVlIGZvciB0cmFuc2FjdGlvbiBpc29sYXRpb24gbGV2ZWw/Ci8vICAg\nICAgICB0cnkgewovLyAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5h\nbWUsIC0xKTsKLy8gICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCAtMSk7Ci8vICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7Ci8vICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewovLyAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdo\ndCBleHBlY3RlZCBleGNlcHRpb24iLAovLyAgICAgICAgICAgICAgICBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShl\nLmdldENsYXNzKCkpKTsKLy8gICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuamRi\nYy5UcmFuc2FjdGlvbklzb2xhdGlvbiIgaGludAogICAgICovCiAgICBwdWJs\naWMgdm9pZCB0ZXN0SmRiY1RyYW5zYWN0aW9uSXNvbGF0aW9uSGludCgpIHsK\nICAgICAgICBTdHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5qZGJjLlRyYW5z\nYWN0aW9uSXNvbGF0aW9uIjsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBlbS5n\nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAo\nSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxhbigpOwogICAgICAgIEpE\nQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAgICAgICgoRW50aXR5TWFuYWdl\nckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9u\nKCk7CgogICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLCAiLTEiLAogICAgICAgICAgICBJc29sYXRpb25M\nZXZlbC5ERUZBVUxULCAtMSk7CiAgICAgICAgaXNvbGF0aW9uSGludFRlc3Qo\nb2VtLCBmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIC0xLAogICAgICAgICAg\nICBJc29sYXRpb25MZXZlbC5ERUZBVUxULCAtMSk7CgogICAgICAgIGJvb2xl\nYW4gc3VwcG9ydElzb2xhdGlvbkZvclVwZGF0ZSA9ICgoSkRCQ0NvbmZpZ3Vy\nYXRpb24pIGZDb25maWcKICAgICAgICAgICAgLmdldENvbnRleHQoKS5nZXRD\nb25maWd1cmF0aW9uKCkpLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCkKICAg\nICAgICAgICAgLnN1cHBvcnRzSXNvbGF0aW9uRm9yVXBkYXRlKCk7CiAgICAg\nICAgaWYgKHN1cHBvcnRJc29sYXRpb25Gb3JVcGRhdGUpIHsKICAgICAgICAg\nICAgaXNvbGF0aW9uSGludFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGlu\ndE5hbWUsIFN0cmluZwogICAgICAgICAgICAgICAgLnZhbHVlT2YoQ29ubmVj\ndGlvbi5UUkFOU0FDVElPTl9OT05FKSwgSXNvbGF0aW9uTGV2ZWwuTk9ORSwK\nICAgICAgICAgICAgICAgIENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fTk9ORSk7\nCiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5U\nUkFOU0FDVElPTl9OT05FLCBJc29sYXRpb25MZXZlbC5OT05FLAogICAgICAg\nICAgICAgICAgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9OT05FKTsKCiAgICAg\nICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAgICAgIC52YWx1ZU9mKENv\nbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVBRF9VTkNPTU1JVFRFRCksCiAgICAg\nICAgICAgICAgICBJc29sYXRpb25MZXZlbC5SRUFEX1VOQ09NTUlUVEVELAog\nICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9SRUFEX1VO\nQ09NTUlUVEVEKTsKICAgICAgICAgICAgaXNvbGF0aW9uSGludFRlc3Qob2Vt\nLCBmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgICAgICBD\nb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JFQURfVU5DT01NSVRURUQsCiAgICAg\nICAgICAgICAgICBJc29sYXRpb25MZXZlbC5SRUFEX1VOQ09NTUlUVEVELAog\nICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9SRUFEX1VO\nQ09NTUlUVEVEKTsKCiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9l\nbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAg\nICAgICAgIC52YWx1ZU9mKENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVBRF9D\nT01NSVRURUQpLAogICAgICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuUkVB\nRF9DT01NSVRURUQsCiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5T\nQUNUSU9OX1JFQURfQ09NTUlUVEVEKTsKICAgICAgICAgICAgaXNvbGF0aW9u\nSGludFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAg\nICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JFQURfQ09NTUlU\nVEVELAogICAgICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuUkVBRF9DT01N\nSVRURUQsCiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9O\nX1JFQURfQ09NTUlUVEVEKTsKCiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRU\nZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAg\nICAgICAgICAgICAgIC52YWx1ZU9mKENvbm5lY3Rpb24uVFJBTlNBQ1RJT05f\nUkVQRUFUQUJMRV9SRUFEKSwKICAgICAgICAgICAgICAgIElzb2xhdGlvbkxl\ndmVsLlJFUEVBVEFCTEVfUkVBRCwKICAgICAgICAgICAgICAgIENvbm5lY3Rp\nb24uVFJBTlNBQ1RJT05fUkVQRUFUQUJMRV9SRUFEKTsKICAgICAgICAgICAg\naXNvbGF0aW9uSGludFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsCiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JF\nUEVBVEFCTEVfUkVBRCwKICAgICAgICAgICAgICAgIElzb2xhdGlvbkxldmVs\nLlJFUEVBVEFCTEVfUkVBRCwKICAgICAgICAgICAgICAgIENvbm5lY3Rpb24u\nVFJBTlNBQ1RJT05fUkVQRUFUQUJMRV9SRUFEKTsKCiAgICAgICAgICAgIGlz\nb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLCBTdHJpbmcKICAgICAgICAgICAgICAgIC52YWx1ZU9mKENvbm5lY3Rpb24u\nVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKSwKICAgICAgICAgICAgICAgIElz\nb2xhdGlvbkxldmVsLlNFUklBTElaQUJMRSwKICAgICAgICAgICAgICAgIENv\nbm5lY3Rpb24uVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKTsKICAgICAgICAg\nICAgaXNvbGF0aW9uSGludFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGlu\ndE5hbWUsCiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9O\nX1NFUklBTElaQUJMRSwKICAgICAgICAgICAgICAgIElzb2xhdGlvbkxldmVs\nLlNFUklBTElaQUJMRSwKICAgICAgICAgICAgICAgIENvbm5lY3Rpb24uVFJB\nTlNBQ1RJT05fU0VSSUFMSVpBQkxFKTsKICAgICAgICB9CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInh4eHh4\nIik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ5eXl5\neSIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVk\nIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkp\nKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4u\nc2V0SGludChoaW50TmFtZSwgIjEyMzQ1Iik7CiAgICAgICAgICAgIGZQbGFu\nLnNldEhpbnQoaGludE5hbWUsICI2Nzg5MCIpOwogICAgICAgICAgICBmYWls\nKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBh\nc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAg\nICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fz\nc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAg\nICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAt\nMik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0zKTsK\nICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4\nY2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsK\nICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0\nSGludChoaW50TmFtZSwgRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQpOwog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoSXNvbGF0aW9uTGV2ZWwuREVGQVVM\nVCwgZlBsYW4uZ2V0SXNvbGF0aW9uKCkpOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoLTEsIGZDb25maWcuZ2V0SXNvbGF0aW9uKCkpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGZhaWwoIlVuZXhw\nZWN0ZWQgIiArIGUuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpOwogICAgICAgIH0K\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5p\nbmdzKCJkZXByZWNhdGlvbiIpCiAgICBwcml2YXRlIHZvaWQgaXNvbGF0aW9u\nSGludFRlc3QoT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtLAogICAgICAgIEpE\nQkNGZXRjaFBsYW4gZlBsYW4sIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBs\nIGZDb25maWcsIFN0cmluZyBoaW50LAogICAgICAgIE9iamVjdCB2YWx1ZSwg\nT2JqZWN0IGV4cGVjdGVkVmFsdWUsIGludCBleHBlY3RlZCkgewogICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludCwgdmFsdWUpOwogICAgICAgIE9iamVjdCBn\nZXRWYWx1ZSA9IGZQbGFuLmdldEhpbnQoaGludCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKHZhbHVlLmdldENsYXNzKCksIGdldFZhbHVlLmdldENsYXNzKCkp\nOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZSwgZ2V0VmFsdWUpOwogICAg\nICAgIGFzc2VydEVxdWFscyhleHBlY3RlZFZhbHVlLCBmUGxhbi5nZXRJc29s\nYXRpb24oKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkLCBmQ29u\nZmlnLmdldElzb2xhdGlvbigpKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAg\nKiBUZXN0ICJvcGVuanBhLkZldGNoUGxhbi5MUlNTaXplQWxnb3JpdGhtIiBo\naW50CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFBsYW5MUlNT\naXplQWxnb3JpdGhtSGludCgpIHsKICAgICAgICBTdHJpbmcgaGludE5hbWUg\nPSAib3BlbmpwYS5GZXRjaFBsYW4uTFJTU2l6ZUFsZ29yaXRobSI7CgogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVu\nSlBBRW50aXR5TWFuYWdlcikgZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAgICBK\nREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRG\nZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1w\nbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKQogICAg\nICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tlcigp\nLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAgICAgICBscnNTaXplSGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAicXVlcnkiLAogICAg\nICAgICAgICBMUlNTaXplQWxnb3JpdGhtLlFVRVJZLCBMUlNTaXplcy5TSVpF\nX1FVRVJZKTsKICAgICAgICBscnNTaXplSGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLCBMUlNTaXplQWxnb3JpdGhtLlFVRVJZLm5hbWUoKSwK\nICAgICAgICAgICAgTFJTU2l6ZUFsZ29yaXRobS5RVUVSWSwgTFJTU2l6ZXMu\nU0laRV9RVUVSWSk7CiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwgTFJTU2l6ZUFsZ29yaXRobS5RVUVSWSwKICAg\nICAgICAgICAgTFJTU2l6ZUFsZ29yaXRobS5RVUVSWSwgTFJTU2l6ZXMuU0la\nRV9RVUVSWSk7CgogICAgICAgIGxyc1NpemVIaW50VGVzdChmUGxhbiwgZkNv\nbmZpZywgaGludE5hbWUsICJsYXN0IiwKICAgICAgICAgICAgTFJTU2l6ZUFs\nZ29yaXRobS5MQVNULCBMUlNTaXplcy5TSVpFX0xBU1QpOwogICAgICAgIGxy\nc1NpemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIExSU1Np\nemVBbGdvcml0aG0uTEFTVC5uYW1lKCksCiAgICAgICAgICAgIExSU1NpemVB\nbGdvcml0aG0uTEFTVCwgTFJTU2l6ZXMuU0laRV9MQVNUKTsKICAgICAgICBs\ncnNTaXplSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBMUlNT\naXplQWxnb3JpdGhtLkxBU1QsCiAgICAgICAgICAgIExSU1NpemVBbGdvcml0\naG0uTEFTVCwgTFJTU2l6ZXMuU0laRV9MQVNUKTsKCiAgICAgICAgbHJzU2l6\nZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgInVua25vd24i\nLAogICAgICAgICAgICBMUlNTaXplQWxnb3JpdGhtLlVOS05PV04sIExSU1Np\nemVzLlNJWkVfVU5LTk9XTik7CiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgTFJTU2l6ZUFsZ29yaXRobS5VTktO\nT1dOCiAgICAgICAgICAgIC5uYW1lKCksIExSU1NpemVBbGdvcml0aG0uVU5L\nTk9XTiwgTFJTU2l6ZXMuU0laRV9VTktOT1dOKTsKICAgICAgICBscnNTaXpl\nSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBMUlNTaXplQWxn\nb3JpdGhtLlVOS05PV04sCiAgICAgICAgICAgIExSU1NpemVBbGdvcml0aG0u\nVU5LTk9XTiwgTFJTU2l6ZXMuU0laRV9VTktOT1dOKTsKCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInh4eHh4\nIik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ5eXl5\neSIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0\nZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3Mo\nKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxh\nbi5zZXRIaW50KGhpbnROYW1lLCAiMTIzNDUiKTsKICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgIjY3ODkwIik7CiAgICAgICAgICAgIGZh\naWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIp\nOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAg\nICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlz\nQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUs\nIC0xKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTIp\nOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgdW5leHBlY3Rl\nZCBleGNlcHRpb24gIiArIGUsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENs\nYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0K\nCiAgICAvKiBHb29kCiAgICAgKiBUZXN0ICJvcGVuanBhLkZldGNoUGxhbi5M\nUlNTaXplIiBoaW50CiAgICAgKi8KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJk\nZXByZWNhdGlvbiIpCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hQbGFuTFJT\nU2l6ZUhpbnQoKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5q\ncGEuRmV0Y2hQbGFuLkxSU1NpemUiOwoKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIp\nIGVtLmdldERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxh\nbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAg\nICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJD\nRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlN\nYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3Vy\nYXRpb24oKTsKCiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKExS\nU1NpemVzLlNJWkVfUVVFUlkpLCBMUlNTaXplQWxnb3JpdGhtLlFVRVJZLAog\nICAgICAgICAgICBMUlNTaXplcy5TSVpFX1FVRVJZKTsKICAgICAgICBscnNT\naXplSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBMUlNTaXpl\ncy5TSVpFX1FVRVJZLAogICAgICAgICAgICBMUlNTaXplQWxnb3JpdGhtLlFV\nRVJZLCBMUlNTaXplcy5TSVpFX1FVRVJZKTsKCiAgICAgICAgbHJzU2l6ZUhp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAg\nICAgICAgIC52YWx1ZU9mKExSU1NpemVzLlNJWkVfTEFTVCksIExSU1NpemVB\nbGdvcml0aG0uTEFTVCwKICAgICAgICAgICAgTFJTU2l6ZXMuU0laRV9MQVNU\nKTsKICAgICAgICBscnNTaXplSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCBMUlNTaXplcy5TSVpFX0xBU1QsCiAgICAgICAgICAgIExSU1Np\nemVBbGdvcml0aG0uTEFTVCwgTFJTU2l6ZXMuU0laRV9MQVNUKTsKCiAgICAg\nICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwg\nU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKExSU1NpemVzLlNJWkVfVU5L\nTk9XTiksIExSU1NpemVBbGdvcml0aG0uVU5LTk9XTiwKICAgICAgICAgICAg\nTFJTU2l6ZXMuU0laRV9VTktOT1dOKTsKICAgICAgICBscnNTaXplSGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBMUlNTaXplcy5TSVpFX1VO\nS05PV04sCiAgICAgICAgICAgIExSU1NpemVBbGdvcml0aG0uVU5LTk9XTiwg\nTFJTU2l6ZXMuU0laRV9VTktOT1dOKTsKCiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAg\nICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAg\nICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0\naW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAg\nICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnROYW1lLCAiMTIzNDUiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGlu\ndChoaW50TmFtZSwgIjY3ODkwIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVj\ndGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAg\nICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJs\nZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0xKTsKICAg\nICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAg\nICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9u\nIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5j\nbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAg\nIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhp\nbnROYW1lLCBGZXRjaENvbmZpZ3VyYXRpb24uREVGQVVMVCk7CiAgICAgICAg\nICAgIGFzc2VydEVxdWFscyhMUlNTaXplQWxnb3JpdGhtLlFVRVJZLCBmUGxh\nbi5nZXRMUlNTaXplQWxnb3JpdGhtKCkpOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoTFJTU2l6ZXMuU0laRV9RVUVSWSwgZlBsYW4uZ2V0TFJTU2l6ZSgp\nKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKExSU1NpemVzLlNJWkVfUVVF\nUlksIGZDb25maWcuZ2V0TFJTU2l6ZSgpKTsKICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgp\nOwogICAgICAgICAgICBmYWlsKCJVbmV4cGVjdGVkICIgKyBlLmdldENsYXNz\nKCkuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBUZXN0ICJvcGVuanBhLmpkYmMu\nTFJTU2l6ZSIgaGludAogICAgICovCiAgICBAU3VwcHJlc3NXYXJuaW5ncygi\nZGVwcmVjYXRpb24iKQogICAgcHVibGljIHZvaWQgdGVzdEpkYmNMUlNTaXpl\nSGludCgpIHsKICAgICAgICBTdHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5q\nZGJjLkxSU1NpemUiOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtLmdldERl\nbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJD\nRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgSkRCQ0Zl\ndGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0Y2hDb25m\naWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5hZ2VySW1w\nbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsK\nCiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKExSU1NpemVzLlNJ\nWkVfUVVFUlkpLCBMUlNTaXplQWxnb3JpdGhtLlFVRVJZLAogICAgICAgICAg\nICBMUlNTaXplcy5TSVpFX1FVRVJZKTsKICAgICAgICBscnNTaXplSGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBMUlNTaXplcy5TSVpFX1FV\nRVJZLAogICAgICAgICAgICBMUlNTaXplQWxnb3JpdGhtLlFVRVJZLCBMUlNT\naXplcy5TSVpFX1FVRVJZKTsKCiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52\nYWx1ZU9mKExSU1NpemVzLlNJWkVfTEFTVCksIExSU1NpemVBbGdvcml0aG0u\nTEFTVCwKICAgICAgICAgICAgTFJTU2l6ZXMuU0laRV9MQVNUKTsKICAgICAg\nICBscnNTaXplSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBM\nUlNTaXplcy5TSVpFX0xBU1QsCiAgICAgICAgICAgIExSU1NpemVBbGdvcml0\naG0uTEFTVCwgTFJTU2l6ZXMuU0laRV9MQVNUKTsKCiAgICAgICAgbHJzU2l6\nZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAg\nICAgICAgICAgIC52YWx1ZU9mKExSU1NpemVzLlNJWkVfVU5LTk9XTiksIExS\nU1NpemVBbGdvcml0aG0uVU5LTk9XTiwKICAgICAgICAgICAgTFJTU2l6ZXMu\nU0laRV9VTktOT1dOKTsKICAgICAgICBscnNTaXplSGludFRlc3QoZlBsYW4s\nIGZDb25maWcsIGhpbnROYW1lLCBMUlNTaXplcy5TSVpFX1VOS05PV04sCiAg\nICAgICAgICAgIExSU1NpemVBbGdvcml0aG0uVU5LTk9XTiwgTFJTU2l6ZXMu\nU0laRV9VTktOT1dOKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAgICAgICAgICBm\nYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4i\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAg\nICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5p\nc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAg\nICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCAiMTIzNDUiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgIjY3ODkwIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEg\nSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdo\ndCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5n\nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0xKTsKICAgICAgICAgICAg\nZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAgICBmYWls\nKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBh\nc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAg\nICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fz\nc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAg\nICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCBG\nZXRjaENvbmZpZ3VyYXRpb24uREVGQVVMVCk7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhMUlNTaXplQWxnb3JpdGhtLlFVRVJZLCBmUGxhbi5nZXRMUlNT\naXplQWxnb3JpdGhtKCkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoTFJT\nU2l6ZXMuU0laRV9RVUVSWSwgZlBsYW4uZ2V0TFJTU2l6ZSgpKTsKICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKExSU1NpemVzLlNJWkVfUVVFUlksIGZDb25m\naWcuZ2V0TFJTU2l6ZSgpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAg\nICAgICBmYWlsKCJVbmV4cGVjdGVkICIgKyBlLmdldENsYXNzKCkuZ2V0TmFt\nZSgpKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAg\nICBAU3VwcHJlc3NXYXJuaW5ncygiZGVwcmVjYXRpb24iKQogICAgcHJpdmF0\nZSB2b2lkIGxyc1NpemVIaW50VGVzdChKREJDRmV0Y2hQbGFuIGZQbGFuLAog\nICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcsIFN0\ncmluZyBoaW50LCBPYmplY3QgdmFsdWUsCiAgICAgICAgT2JqZWN0IGV4cGVj\ndGVkVmFsdWUsIGludCBleHBlY3RlZCkgewogICAgICAgIGZQbGFuLnNldEhp\nbnQoaGludCwgdmFsdWUpOwogICAgICAgIE9iamVjdCBnZXRWYWx1ZSA9IGZQ\nbGFuLmdldEhpbnQoaGludCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVl\nLmdldENsYXNzKCksIGdldFZhbHVlLmdldENsYXNzKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyh2YWx1ZSwgZ2V0VmFsdWUpOwogICAgICAgIGFzc2VydEVx\ndWFscyhleHBlY3RlZFZhbHVlLCBmUGxhbi5nZXRMUlNTaXplQWxnb3JpdGht\nKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhleHBlY3RlZCwgZlBsYW4uZ2V0\nTFJTU2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWQsIGZD\nb25maWcuZ2V0TFJTU2l6ZSgpKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAg\nKiBUZXN0ICJvcGVuanBhLkZldGNoUGxhbi5NYXhGZXRjaERlcHRoIiBoaW50\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFBsYW5NYXhGZXRj\naERlcHRoSGludCgpIHsKICAgICAgICBTdHJpbmcgaGludE5hbWUgPSAib3Bl\nbmpwYS5GZXRjaFBsYW4uTWF4RmV0Y2hEZXB0aCI7CgogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5\nTWFuYWdlcillbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRjaFBs\nYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxhbigp\nOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcg\nPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAgICAgICgo\nRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hD\nb25maWd1cmF0aW9uKCk7CgogICAgICAgIG1heEZldGNoRGVwdGhIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICItMSIsIC0xKTsKICAgICAg\nICBtYXhGZXRjaERlcHRoSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCAtMSwgLTEpOwogICAgICAgIG1heEZldGNoRGVwdGhIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICI1MDAiLCA1MDApOwogICAgICAg\nIG1heEZldGNoRGVwdGhIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsIDUwMCwgNTAwKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAgICAgICAgICBm\nYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4i\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAg\nICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5p\nc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAg\nICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCBGZXRjaENvbmZpZ3VyYXRpb24uREVGQVVMVCk7CiAgICAgICAgICAgIGFz\nc2VydEVxdWFscygtMSwgZlBsYW4uZ2V0TWF4RmV0Y2hEZXB0aCgpKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKC0xLCBmQ29uZmlnLmdldE1heEZldGNo\nRGVwdGgoKSk7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbCgiVW5leHBlY3RlZCBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfQogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgLyogR29vZAogICAgICogVGVzdCAib3Bl\nbmpwYS5NYXhGZXRjaERlcHRoIiBoaW50CiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHRlc3RNYXhGZXRjaERlcHRoSGludCgpIHsKICAgICAgICBTdHJpbmcg\naGludE5hbWUgPSAib3BlbmpwYS5NYXhGZXRjaERlcHRoIjsKCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKWVtLmdldERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0Zl\ndGNoUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQ\nbGFuKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNv\nbmZpZyA9IChKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAg\nICAgKChFbnRpdHlNYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRG\nZXRjaENvbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgbWF4RmV0Y2hEZXB0aEhp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIi0xIiwgLTEpOwog\nICAgICAgIG1heEZldGNoRGVwdGhIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsIC0xLCAtMSk7CiAgICAgICAgbWF4RmV0Y2hEZXB0aEhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIjEwMCIsIDEwMCk7CiAg\nICAgICAgbWF4RmV0Y2hEZXB0aEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwgMTAwLCAxMDApOwoKICAgICAgICB0cnkgewogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4eHgiKTsKICAgICAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5eXl5Iik7CiAgICAgICAg\nICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0\naW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24i\nLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNs\nYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAg\nfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGlu\ndE5hbWUsIEZldGNoQ29uZmlndXJhdGlvbi5ERUZBVUxUKTsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKC0xLCBmUGxhbi5nZXRNYXhGZXRjaERlcHRoKCkp\nOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoLTEsIGZDb25maWcuZ2V0TWF4\nRmV0Y2hEZXB0aCgpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICBmYWlsKCJVbmV4cGVjdGVkICIgKyBlLmdldENsYXNz\nKCkuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICBwcml2YXRlIHZvaWQgbWF4RmV0Y2hEZXB0aEhpbnRUZXN0\nKEpEQkNGZXRjaFBsYW4gZlBsYW4sCiAgICAgICAgSkRCQ0ZldGNoQ29uZmln\ndXJhdGlvbkltcGwgZkNvbmZpZywgU3RyaW5nIGhpbnQsIE9iamVjdCB2YWx1\nZSwKICAgICAgICBpbnQgZXhwZWN0ZWQpIHsKICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnQsIHZhbHVlKTsKICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBm\nUGxhbi5nZXRIaW50KGhpbnQpOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1\nZS5nZXRDbGFzcygpLCBnZXRWYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHModmFsdWUsIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoZXhwZWN0ZWQsIGZQbGFuLmdldE1heEZldGNoRGVwdGgoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkLCBmQ29uZmlnLmdldE1heEZl\ndGNoRGVwdGgoKSk7CiAgICB9CgogICAgLyogR29vZAogICAgICogVGVzdCAi\nb3BlbmpwYS5Mb2NrVGltZW91dCIgaGludAogICAgICovCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0TG9ja1RpbWVvdXRIaW50KCkgewogICAgICAgIFN0cmluZyBo\naW50TmFtZSA9ICJvcGVuanBhLkxvY2tUaW1lb3V0IjsKCiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKWVtLmdldERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNo\nUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFu\nKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZp\nZyA9IChKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAg\nKChFbnRpdHlNYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRj\naENvbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgbG9ja1RpbWVvdXRIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICItMSIsIC0xKTsKICAgICAg\nICBsb2NrVGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgLTEsIC0xKTsKICAgICAgICBsb2NrVGltZW91dEhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwgIjAiLCAwKTsKICAgICAgICBsb2NrVGlt\nZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgMCwgMCk7\nCiAgICAgICAgbG9ja1RpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsICIxMDAiLCAxMDApOwogICAgICAgIGxvY2tUaW1lb3V0SGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAxMDAsIDEwMCk7Cgog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5h\nbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnRO\nYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEg\nYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1\nZ2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShl\nLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMyk7CiAgICAgICAgICAgIGZh\naWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIp\nOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAg\nICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlz\nQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUs\nIEZldGNoQ29uZmlndXJhdGlvbi5ERUZBVUxUKTsKICAgICAgICAgICAgaW50\nIGRlZlRpbWVvdXQgPSBmQ29uZmlnLmdldENvbnRleHQoKS5nZXRDb25maWd1\ncmF0aW9uKCkKICAgICAgICAgICAgICAgIC5nZXRMb2NrVGltZW91dCgpOwog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoZGVmVGltZW91dCwgZlBsYW4uZ2V0\nTG9ja1RpbWVvdXQoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhkZWZU\naW1lb3V0LCBmQ29uZmlnLmdldExvY2tUaW1lb3V0KCkpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGZhaWwoIlVuZXhw\nZWN0ZWQgIiArIGUuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpOwogICAgICAgIH0K\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAq\nIFRlc3QgIm9wZW5qcGEuRmV0Y2hQbGFuLkxvY2tUaW1lb3V0IiBoaW50CiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFBsYW5Mb2NrVGltZW91\ndEhpbnQoKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5qcGEu\nRmV0Y2hQbGFuLkxvY2tUaW1lb3V0IjsKCiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKWVtLmdldERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxh\nbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAg\nICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJD\nRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlN\nYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3Vy\nYXRpb24oKTsKCiAgICAgICAgbG9ja1RpbWVvdXRIaW50VGVzdChmUGxhbiwg\nZkNvbmZpZywgaGludE5hbWUsICItMSIsIC0xKTsKICAgICAgICBsb2NrVGlt\nZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgLTEsIC0x\nKTsKICAgICAgICBsb2NrVGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmln\nLCBoaW50TmFtZSwgIjAiLCAwKTsKICAgICAgICBsb2NrVGltZW91dEhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgMCwgMCk7CiAgICAgICAg\nbG9ja1RpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUs\nICIxNTAwIiwgMTUwMCk7CiAgICAgICAgbG9ja1RpbWVvdXRIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIDE1MDAsIDE1MDApOwoKICAgICAg\nICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAi\neHh4eHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nInl5eXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBl\neHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRD\nbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgLTMpOwogICAgICAgICAgICBmYWlsKCJF\neHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3Nl\ncnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAg\nICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2ln\nbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0\ncnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCBGZXRj\naENvbmZpZ3VyYXRpb24uREVGQVVMVCk7CiAgICAgICAgICAgIGludCBkZWZU\naW1lb3V0ID0gZkNvbmZpZy5nZXRDb250ZXh0KCkuZ2V0Q29uZmlndXJhdGlv\nbigpCiAgICAgICAgICAgICAgICAuZ2V0TG9ja1RpbWVvdXQoKTsKICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKGRlZlRpbWVvdXQsIGZQbGFuLmdldExvY2tU\naW1lb3V0KCkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoZGVmVGltZW91\ndCwgZkNvbmZpZy5nZXRMb2NrVGltZW91dCgpKTsKICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBmYWlsKCJVbmV4cGVjdGVk\nICIgKyBlLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBUZXN0\nICJqYXZheC5wZXJzaXN0ZW5jZS5sb2NrLnRpbWVvdXQiIGhpbnQKICAgICAq\nLwogICAgcHVibGljIHZvaWQgdGVzdEphdmF4TG9ja1RpbWVvdXRIaW50KCkg\newogICAgICAgIFN0cmluZyBoaW50TmFtZSA9ICJqYXZheC5wZXJzaXN0ZW5j\nZS5sb2NrLnRpbWVvdXQiOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpZW0uZ2V0\nRGVsZWdhdGUoKTsKICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpE\nQkNGZXRjaFBsYW4pIG9lbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBKREJD\nRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRjaENv\nbmZpZ3VyYXRpb25JbXBsKQogICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJ\nbXBsKSBvZW0pLmdldEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlvbigp\nOwoKICAgICAgICBsb2NrVGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmln\nLCBoaW50TmFtZSwgIi0xIiwgLTEpOwogICAgICAgIGxvY2tUaW1lb3V0SGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAtMSwgLTEpOwogICAg\nICAgIGxvY2tUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCAiMCIsIDApOwogICAgICAgIGxvY2tUaW1lb3V0SGludFRlc3QoZlBs\nYW4sIGZDb25maWcsIGhpbnROYW1lLCAwLCAwKTsKICAgICAgICBsb2NrVGlt\nZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIjIwMDAi\nLCAyMDAwKTsKICAgICAgICBsb2NrVGltZW91dEhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwgMjAwMCwgMjAwMCk7CgogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIp\nOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXki\nKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVk\nIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkp\nKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4u\nc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnROYW1lLCAtMyk7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGlu\nZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUo\nIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAg\nSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZy\nb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29uZmln\ndXJhdGlvbi5ERUZBVUxUKTsKICAgICAgICAgICAgaW50IGRlZlRpbWVvdXQg\nPSBmQ29uZmlnLmdldENvbnRleHQoKS5nZXRDb25maWd1cmF0aW9uKCkKICAg\nICAgICAgICAgICAgIC5nZXRMb2NrVGltZW91dCgpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoZGVmVGltZW91dCwgZlBsYW4uZ2V0TG9ja1RpbWVvdXQo\nKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhkZWZUaW1lb3V0LCBmQ29u\nZmlnLmdldExvY2tUaW1lb3V0KCkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIGZhaWwoIlVuZXhwZWN0ZWQgIiArIGUu\nZ2V0Q2xhc3MoKS5nZXROYW1lKCkpOwogICAgICAgIH0KICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBsb2NrVGltZW91dEhp\nbnRUZXN0KEpEQkNGZXRjaFBsYW4gZlBsYW4sCiAgICAgICAgSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZywgU3RyaW5nIGhpbnQsIE9iamVj\ndCB2YWx1ZSwKICAgICAgICBpbnQgZXhwZWN0ZWQpIHsKICAgICAgICBmUGxh\nbi5zZXRIaW50KGhpbnQsIHZhbHVlKTsKICAgICAgICBPYmplY3QgZ2V0VmFs\ndWUgPSBmUGxhbi5nZXRIaW50KGhpbnQpOwogICAgICAgIGFzc2VydEVxdWFs\ncyh2YWx1ZS5nZXRDbGFzcygpLCBnZXRWYWx1ZS5nZXRDbGFzcygpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHModmFsdWUsIGdldFZhbHVlKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoZXhwZWN0ZWQsIGZQbGFuLmdldExvY2tUaW1lb3V0KCkp\nOwogICAgICAgIGFzc2VydEVxdWFscyhleHBlY3RlZCwgZkNvbmZpZy5nZXRM\nb2NrVGltZW91dCgpKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBUZXN0\nICJvcGVuanBhLlF1ZXJ5VGltZW91dCIgaGludAogICAgICovCiAgICBwdWJs\naWMgdm9pZCB0ZXN0UXVlcnlUaW1lb3V0SGludCgpIHsKICAgICAgICBTdHJp\nbmcgaGludE5hbWUgPSAib3BlbmpwYS5RdWVyeVRpbWVvdXQiOwoKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAgICBKREJD\nRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRGZXRj\naFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBm\nQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKQogICAgICAg\nICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tlcigpLmdl\ndEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAgICAgICBxdWVyeVRpbWVvdXRI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICItMSIsIC0xKTsK\nICAgICAgICBxdWVyeVRpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsIC0xLCAtMSk7CiAgICAgICAgcXVlcnlUaW1lb3V0SGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAiMCIsIDApOwogICAgICAg\nIHF1ZXJ5VGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgMCwgMCk7CiAgICAgICAgcXVlcnlUaW1lb3V0SGludFRlc3QoZlBsYW4s\nIGZDb25maWcsIGhpbnROYW1lLCAiMTAwIiwgMTAwKTsKICAgICAgICBxdWVy\neVRpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIDEw\nMCwgMTAwKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0\nSGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAgICAgIGZQbGFuLnNl\ndEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAgICAgICAgICBmYWlsKCJF\neHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3Nl\ncnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAg\nICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2ln\nbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0\ncnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMik7\nCiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0zKTsKICAg\nICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2Vw\ndGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAg\nICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGlu\ndChoaW50TmFtZSwgRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQpOwogICAg\nICAgICAgICBpbnQgZGVmVGltZW91dCA9IGZDb25maWcuZ2V0Q29udGV4dCgp\nLmdldENvbmZpZ3VyYXRpb24oKQogICAgICAgICAgICAgICAgLmdldFF1ZXJ5\nVGltZW91dCgpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoZGVmVGltZW91\ndCwgZlBsYW4uZ2V0UXVlcnlUaW1lb3V0KCkpOwogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoZGVmVGltZW91dCwgZkNvbmZpZy5nZXRRdWVyeVRpbWVvdXQo\nKSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgZmFpbCgiVW5leHBlY3RlZCAiICsgZS5nZXRDbGFzcygpLmdldE5hbWUo\nKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAg\nLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5GZXRjaFBsYW4uUXVlcnlU\naW1lb3V0IiBoaW50CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRj\naFBsYW5RdWVyeVRpbWVvdXRIaW50KCkgewogICAgICAgIFN0cmluZyBoaW50\nTmFtZSA9ICJvcGVuanBhLkZldGNoUGxhbi5RdWVyeVRpbWVvdXQiOwoKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAoT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAgICBK\nREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRG\nZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1w\nbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKQogICAg\nICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tlcigp\nLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAgICAgICBxdWVyeVRpbWVv\ndXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICItMSIsIC0x\nKTsKICAgICAgICBxdWVyeVRpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsIC0xLCAtMSk7CiAgICAgICAgcXVlcnlUaW1lb3V0SGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAiMCIsIDApOwogICAg\nICAgIHF1ZXJ5VGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwgMCwgMCk7CiAgICAgICAgcXVlcnlUaW1lb3V0SGludFRlc3QoZlBs\nYW4sIGZDb25maWcsIGhpbnROYW1lLCAiMTUwMCIsIDE1MDApOwogICAgICAg\nIHF1ZXJ5VGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgMTUwMCwgMTUwMCk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAg\nICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3Mu\naXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgLTIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAt\nMyk7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3Rl\nZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50\nRXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygp\nKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFu\nLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29uZmlndXJhdGlvbi5ERUZBVUxU\nKTsKICAgICAgICAgICAgaW50IGRlZlRpbWVvdXQgPSBmQ29uZmlnLmdldENv\nbnRleHQoKS5nZXRDb25maWd1cmF0aW9uKCkKICAgICAgICAgICAgICAgIC5n\nZXRRdWVyeVRpbWVvdXQoKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRl\nZlRpbWVvdXQsIGZQbGFuLmdldFF1ZXJ5VGltZW91dCgpKTsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKGRlZlRpbWVvdXQsIGZDb25maWcuZ2V0UXVlcnlU\naW1lb3V0KCkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgIGZhaWwoIlVuZXhwZWN0ZWQgIiArIGUuZ2V0Q2xhc3MoKS5n\nZXROYW1lKCkpOwogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgImphdmF4LnBlcnNpc3RlbmNl\nLnF1ZXJ5LnRpbWVvdXQiIGhpbnQKICAgICAqLwogICAgcHVibGljIHZvaWQg\ndGVzdEphdmF4UXVlcnlUaW1lb3V0SGludCgpIHsKICAgICAgICBTdHJpbmcg\naGludE5hbWUgPSAiamF2YXgucGVyc2lzdGVuY2UucXVlcnkudGltZW91dCI7\nCgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9\nIChPcGVuSlBBRW50aXR5TWFuYWdlcillbS5nZXREZWxlZ2F0ZSgpOwogICAg\nICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2Vt\nLmdldEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRp\nb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwp\nCiAgICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJv\na2VyKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAgIHF1ZXJ5\nVGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIi0x\nIiwgLTEpOwogICAgICAgIHF1ZXJ5VGltZW91dEhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwgLTEsIC0xKTsKICAgICAgICBxdWVyeVRpbWVv\ndXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICIwIiwgMCk7\nCiAgICAgICAgcXVlcnlUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCAwLCAwKTsKICAgICAgICBxdWVyeVRpbWVvdXRIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICIyMDAwIiwgMjAwMCk7CiAg\nICAgICAgcXVlcnlUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCAyMDAwLCAyMDAwKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAg\nICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAgICAg\nICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9u\nIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5j\nbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAg\nIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhp\nbnROYW1lLCAtMik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5h\nbWUsIC0zKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4\ncGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENs\nYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nZlBsYW4uc2V0SGludChoaW50TmFtZSwgRmV0Y2hDb25maWd1cmF0aW9uLkRF\nRkFVTFQpOwogICAgICAgICAgICBpbnQgZGVmVGltZW91dCA9IGZDb25maWcu\nZ2V0Q29udGV4dCgpLmdldENvbmZpZ3VyYXRpb24oKQogICAgICAgICAgICAg\nICAgLmdldFF1ZXJ5VGltZW91dCgpOwogICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoZGVmVGltZW91dCwgZlBsYW4uZ2V0UXVlcnlUaW1lb3V0KCkpOwogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoZGVmVGltZW91dCwgZkNvbmZpZy5nZXRR\ndWVyeVRpbWVvdXQoKSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgZmFpbCgiVW5leHBlY3RlZCAiICsgZS5nZXRDbGFz\ncygpLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHF1ZXJ5VGltZW91dEhpbnRUZXN0\nKEpEQkNGZXRjaFBsYW4gZlBsYW4sCiAgICAgICAgSkRCQ0ZldGNoQ29uZmln\ndXJhdGlvbkltcGwgZkNvbmZpZywgU3RyaW5nIGhpbnQsIE9iamVjdCB2YWx1\nZSwKICAgICAgICBpbnQgZXhwZWN0ZWQpIHsKICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnQsIHZhbHVlKTsKICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBm\nUGxhbi5nZXRIaW50KGhpbnQpOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1\nZS5nZXRDbGFzcygpLCBnZXRWYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHModmFsdWUsIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoZXhwZWN0ZWQsIGZQbGFuLmdldFF1ZXJ5VGltZW91dCgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWQsIGZDb25maWcuZ2V0UXVlcnlU\naW1lb3V0KCkpOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9w\nZW5qcGEuRmV0Y2hQbGFuLlJlc3VsdFNldFR5cGUiIGhpbnQKICAgICAqLwog\nICAgcHVibGljIHZvaWQgdGVzdEZldGNoUGxhblJlc3VsdFNldFR5cGVIaW50\nKCkgewogICAgICAgIFN0cmluZyBoaW50TmFtZSA9ICJvcGVuanBhLkZldGNo\nUGxhbi5SZXN1bHRTZXRUeXBlIjsKCiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWVt\nLmdldERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9\nIChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAg\nSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0\nY2hDb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5h\nZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRp\nb24oKTsKCiAgICAgICAgcmVzdWx0U2V0VHlwZUhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgUmVzdWx0U2V0VHlwZS5G\nT1JXQVJEX09OTFkubmFtZSgpLCBSZXN1bHRTZXRUeXBlLkZPUldBUkRfT05M\nWSwKICAgICAgICAgICAgUmVzdWx0U2V0LlRZUEVfRk9SV0FSRF9PTkxZKTsK\nICAgICAgICByZXN1bHRTZXRUeXBlSGludFRlc3QoZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLAogICAgICAgICAgICBSZXN1bHRTZXRUeXBlLkZPUldBUkRf\nT05MWSwgUmVzdWx0U2V0VHlwZS5GT1JXQVJEX09OTFksCiAgICAgICAgICAg\nIFJlc3VsdFNldC5UWVBFX0ZPUldBUkRfT05MWSk7CgogICAgICAgIHJlc3Vs\ndFNldFR5cGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAg\nICAgICAgICAgIFJlc3VsdFNldFR5cGUuU0NST0xMX1NFTlNJVElWRS5uYW1l\nKCksCiAgICAgICAgICAgIFJlc3VsdFNldFR5cGUuU0NST0xMX1NFTlNJVElW\nRSwgUmVzdWx0U2V0LlRZUEVfU0NST0xMX1NFTlNJVElWRSk7CiAgICAgICAg\ncmVzdWx0U2V0VHlwZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwKICAgICAgICAgICAgUmVzdWx0U2V0VHlwZS5TQ1JPTExfU0VOU0lUSVZF\nLCBSZXN1bHRTZXRUeXBlLlNDUk9MTF9TRU5TSVRJVkUsCiAgICAgICAgICAg\nIFJlc3VsdFNldC5UWVBFX1NDUk9MTF9TRU5TSVRJVkUpOwoKICAgICAgICBy\nZXN1bHRTZXRUeXBlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLAogICAgICAgICAgICBSZXN1bHRTZXRUeXBlLlNDUk9MTF9JTlNFTlNJVElW\nRS5uYW1lKCksCiAgICAgICAgICAgIFJlc3VsdFNldFR5cGUuU0NST0xMX0lO\nU0VOU0lUSVZFLAogICAgICAgICAgICBSZXN1bHRTZXQuVFlQRV9TQ1JPTExf\nSU5TRU5TSVRJVkUpOwogICAgICAgIHJlc3VsdFNldFR5cGVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIFJlc3VsdFNl\ndFR5cGUuU0NST0xMX0lOU0VOU0lUSVZFLCBSZXN1bHRTZXRUeXBlLlNDUk9M\nTF9JTlNFTlNJVElWRSwKICAgICAgICAgICAgUmVzdWx0U2V0LlRZUEVfU0NS\nT0xMX0lOU0VOU0lUSVZFKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nZlBsYW4uc2V0SGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAgICAgICAg\nICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwK\nICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFz\ncy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0K\nICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnRO\nYW1lLCAiMTIzNDUiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50\nTmFtZSwgIjY3ODkwIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBh\nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNh\ndWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20o\nZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0xKTsKICAgICAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAgICBm\nYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4i\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICBhc3NlcnRUcnVlKCJDYXVnaHQgdW5leHBlY3RlZCBleGNlcHRpb24gIiAr\nIGUsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAg\nICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKiBHb29kCiAg\nICAgKiBUZXN0ICJvcGVuanBhLmpkYmMuUmVzdWx0U2V0VHlwZSIgaGludAog\nICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0SmRiY1Jlc3VsdFNldFR5cGVI\naW50KCkgewogICAgICAgIFN0cmluZyBoaW50TmFtZSA9ICJvcGVuanBhLmpk\nYmMuUmVzdWx0U2V0VHlwZSI7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgZW0u\nZ2V0RGVsZWdhdGUoKTsKICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuID0g\nKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBK\nREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRj\naENvbmZpZ3VyYXRpb25JbXBsKQogICAgICAgICAgICAoKEVudGl0eU1hbmFn\nZXJJbXBsKSBvZW0pLmdldEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlv\nbigpOwoKICAgICAgICByZXN1bHRTZXRUeXBlSGludFRlc3QoZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVlT2Yo\nUmVzdWx0U2V0LlRZUEVfRk9SV0FSRF9PTkxZKSwgUmVzdWx0U2V0VHlwZS5G\nT1JXQVJEX09OTFksCiAgICAgICAgICAgIFJlc3VsdFNldC5UWVBFX0ZPUldB\nUkRfT05MWSk7CiAgICAgICAgcmVzdWx0U2V0VHlwZUhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgUmVzdWx0U2V0LlRZ\nUEVfRk9SV0FSRF9PTkxZLCBSZXN1bHRTZXRUeXBlLkZPUldBUkRfT05MWSwK\nICAgICAgICAgICAgUmVzdWx0U2V0LlRZUEVfRk9SV0FSRF9PTkxZKTsKCiAg\nICAgICAgcmVzdWx0U2V0VHlwZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKFJlc3VsdFNl\ndC5UWVBFX1NDUk9MTF9TRU5TSVRJVkUpLAogICAgICAgICAgICBSZXN1bHRT\nZXRUeXBlLlNDUk9MTF9TRU5TSVRJVkUsIFJlc3VsdFNldC5UWVBFX1NDUk9M\nTF9TRU5TSVRJVkUpOwogICAgICAgIHJlc3VsdFNldFR5cGVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIFJlc3VsdFNl\ndC5UWVBFX1NDUk9MTF9TRU5TSVRJVkUsIFJlc3VsdFNldFR5cGUuU0NST0xM\nX1NFTlNJVElWRSwKICAgICAgICAgICAgUmVzdWx0U2V0LlRZUEVfU0NST0xM\nX1NFTlNJVElWRSk7CgogICAgICAgIHJlc3VsdFNldFR5cGVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAu\ndmFsdWVPZihSZXN1bHRTZXQuVFlQRV9TQ1JPTExfSU5TRU5TSVRJVkUpLAog\nICAgICAgICAgICBSZXN1bHRTZXRUeXBlLlNDUk9MTF9JTlNFTlNJVElWRSwK\nICAgICAgICAgICAgUmVzdWx0U2V0LlRZUEVfU0NST0xMX0lOU0VOU0lUSVZF\nKTsKICAgICAgICByZXN1bHRTZXRUeXBlSGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLAogICAgICAgICAgICBSZXN1bHRTZXQuVFlQRV9TQ1JP\nTExfSU5TRU5TSVRJVkUsIFJlc3VsdFNldFR5cGUuU0NST0xMX0lOU0VOU0lU\nSVZFLAogICAgICAgICAgICBSZXN1bHRTZXQuVFlQRV9TQ1JPTExfSU5TRU5T\nSVRJVkUpOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnROYW1lLCAieHh4eHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0\nSGludChoaW50TmFtZSwgInl5eXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4\ncGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAg\nICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWdu\nYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICIxMjM0\nNSIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiNjc4\nOTAiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVj\ndGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNz\nKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5z\nZXRIaW50KGhpbnROYW1lLCAtMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVj\ndGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAg\nICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJs\nZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29u\nZmlndXJhdGlvbi5ERUZBVUxUKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKFJlc3VsdFNldC5UWVBFX0ZPUldBUkRfT05MWSwgZkNvbmZpZwogICAgICAg\nICAgICAgICAgLmdldFJlc3VsdFNldFR5cGUoKSk7CiAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbCgiVW5leHBlY3Rl\nZCAiICsgZS5nZXRDbGFzcygpLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHJlc3Vs\ndFNldFR5cGVIaW50VGVzdChKREJDRmV0Y2hQbGFuIGZQbGFuLAogICAgICAg\nIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcsIFN0cmluZyBo\naW50LCBPYmplY3QgdmFsdWUsCiAgICAgICAgT2JqZWN0IGV4cGVjdGVkVmFs\ndWUsIGludCBleHBlY3RlZCkgewogICAgICAgIGZQbGFuLnNldEhpbnQoaGlu\ndCwgdmFsdWUpOwogICAgICAgIE9iamVjdCBnZXRWYWx1ZSA9IGZQbGFuLmdl\ndEhpbnQoaGludCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVlLmdldENs\nYXNzKCksIGdldFZhbHVlLmdldENsYXNzKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscyh2YWx1ZSwgZ2V0VmFsdWUpOwogICAgICAgIGFzc2VydEVxdWFscyhl\neHBlY3RlZFZhbHVlLCBmUGxhbi5nZXRSZXN1bHRTZXRUeXBlKCkpOwogICAg\nICAgIGFzc2VydEVxdWFscyhleHBlY3RlZCwgZkNvbmZpZy5nZXRSZXN1bHRT\nZXRUeXBlKCkpOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9w\nZW5qcGEuRmV0Y2hQbGFuLlN1YmNsYXNzRmV0Y2hNb2RlIiBoaW50CiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFBsYW5TdWJjbGFzc0ZldGNo\nTW9kZUhpbnQoKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5q\ncGEuRmV0Y2hQbGFuLlN1YmNsYXNzRmV0Y2hNb2RlIjsKCiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKWVtLmdldERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNo\nUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFu\nKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZp\nZyA9IChKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAg\nKChFbnRpdHlNYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRj\naENvbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgc3ViY2xhc3NGZXRjaE1vZGVI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJub25lIiwKICAg\nICAgICAgICAgRmV0Y2hNb2RlLk5PTkUsIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdF\nUl9OT05FKTsKICAgICAgICBzdWJjbGFzc0ZldGNoTW9kZUhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgRmV0Y2hNb2RlLk5PTkUKICAgICAg\nICAgICAgLm5hbWUoKSwgRmV0Y2hNb2RlLk5PTkUsIEVhZ2VyRmV0Y2hNb2Rl\ncy5FQUdFUl9OT05FKTsKICAgICAgICBzdWJjbGFzc0ZldGNoTW9kZUhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgRmV0Y2hNb2RlLk5PTkUs\nCiAgICAgICAgICAgIEZldGNoTW9kZS5OT05FLCBFYWdlckZldGNoTW9kZXMu\nRUFHRVJfTk9ORSk7CgogICAgICAgIHN1YmNsYXNzRmV0Y2hNb2RlSGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAicGFyYWxsZWwiLAogICAg\nICAgICAgICBGZXRjaE1vZGUuUEFSQUxMRUwsIEVhZ2VyRmV0Y2hNb2Rlcy5F\nQUdFUl9QQVJBTExFTCk7CiAgICAgICAgc3ViY2xhc3NGZXRjaE1vZGVIaW50\nVGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIEZldGNoTW9kZS5QQVJB\nTExFTAogICAgICAgICAgICAubmFtZSgpLCBGZXRjaE1vZGUuUEFSQUxMRUws\nIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9QQVJBTExFTCk7CiAgICAgICAgc3Vi\nY2xhc3NGZXRjaE1vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsIEZldGNoTW9kZS5QQVJBTExFTCwKICAgICAgICAgICAgRmV0Y2hNb2Rl\nLlBBUkFMTEVMLCBFYWdlckZldGNoTW9kZXMuRUFHRVJfUEFSQUxMRUwpOwoK\nICAgICAgICBzdWJjbGFzc0ZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgImpvaW4iLAogICAgICAgICAgICBGZXRjaE1vZGUu\nSk9JTiwgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX0pPSU4pOwogICAgICAgIHN1\nYmNsYXNzRmV0Y2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCBGZXRjaE1vZGUuSk9JTgogICAgICAgICAgICAubmFtZSgpLCBGZXRj\naE1vZGUuSk9JTiwgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX0pPSU4pOwogICAg\nICAgIHN1YmNsYXNzRmV0Y2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCBGZXRjaE1vZGUuSk9JTiwKICAgICAgICAgICAgRmV0Y2hN\nb2RlLkpPSU4sIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9KT0lOKTsKCiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nInh4eHh4Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUs\nICJ5eXl5eSIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQg\nZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0\nQ2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiMTIzNDUiKTsKICAgICAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjY3ODkwIik7CiAgICAgICAg\nICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0\naW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24i\nLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNs\nYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAg\nfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGlu\ndE5hbWUsIC0xKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgLTIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhw\nZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xh\nc3MoKSkpOwogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuamRiYy5TdWJjbGFz\nc0ZldGNoTW9kZSIgaGludAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nSmRiY1N1YmNsYXNzRmV0Y2hNb2RlSGludCgpIHsKICAgICAgICBTdHJpbmcg\naGludE5hbWUgPSAib3BlbmpwYS5qZGJjLlN1YmNsYXNzRmV0Y2hNb2RlIjsK\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0g\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBlbS5nZXREZWxlZ2F0ZSgpOwogICAg\nICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2Vt\nLmdldEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRp\nb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwp\nCiAgICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJv\na2VyKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAgIHN1YmNs\nYXNzRmV0Y2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoRWFnZXJGZXRjaE1vZGVz\nLkVBR0VSX05PTkUpLCBGZXRjaE1vZGUuTk9ORSwKICAgICAgICAgICAgRWFn\nZXJGZXRjaE1vZGVzLkVBR0VSX05PTkUpOwogICAgICAgIHN1YmNsYXNzRmV0\nY2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAg\nICAgICAgICBFYWdlckZldGNoTW9kZXMuRUFHRVJfTk9ORSwgRmV0Y2hNb2Rl\nLk5PTkUsCiAgICAgICAgICAgIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9OT05F\nKTsKCiAgICAgICAgc3ViY2xhc3NGZXRjaE1vZGVIaW50VGVzdChmUGxhbiwg\nZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAudmFsdWVP\nZihFYWdlckZldGNoTW9kZXMuRUFHRVJfUEFSQUxMRUwpLCBGZXRjaE1vZGUu\nUEFSQUxMRUwsCiAgICAgICAgICAgIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9Q\nQVJBTExFTCk7CiAgICAgICAgc3ViY2xhc3NGZXRjaE1vZGVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIEVhZ2VyRmV0\nY2hNb2Rlcy5FQUdFUl9QQVJBTExFTCwgRmV0Y2hNb2RlLlBBUkFMTEVMLAog\nICAgICAgICAgICBFYWdlckZldGNoTW9kZXMuRUFHRVJfUEFSQUxMRUwpOwoK\nICAgICAgICBzdWJjbGFzc0ZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKEVh\nZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9KT0lOKSwgRmV0Y2hNb2RlLkpPSU4sCiAg\nICAgICAgICAgIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9KT0lOKTsKICAgICAg\nICBzdWJjbGFzc0ZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwKICAgICAgICAgICAgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX0pP\nSU4sIEZldGNoTW9kZS5KT0lOLAogICAgICAgICAgICBFYWdlckZldGNoTW9k\nZXMuRUFHRVJfSk9JTik7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAg\nICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3Mu\naXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgIjEyMzQ1Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5h\nbWUsICI2Nzg5MCIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBh\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVn\naHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUu\nZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAg\nICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMSk7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAgICAgZmFp\nbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAg\nICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNB\nc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQpOwogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoRWFnZXJGZXRjaE1vZGVzLkVBR0VSX0pPSU4sIGZDb25maWcK\nICAgICAgICAgICAgICAgIC5nZXRTdWJjbGFzc0ZldGNoTW9kZSgpKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBmYWls\nKCJVbmV4cGVjdGVkICIgKyBlLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAg\nICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwcml2YXRl\nIHZvaWQgc3ViY2xhc3NGZXRjaE1vZGVIaW50VGVzdChKREJDRmV0Y2hQbGFu\nIGZQbGFuLAogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZD\nb25maWcsIFN0cmluZyBoaW50LCBPYmplY3QgdmFsdWUsCiAgICAgICAgT2Jq\nZWN0IGV4cGVjdGVkVmFsdWUsIGludCBleHBlY3RlZCkgewogICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludCwgdmFsdWUpOwogICAgICAgIE9iamVjdCBnZXRW\nYWx1ZSA9IGZQbGFuLmdldEhpbnQoaGludCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKHZhbHVlLmdldENsYXNzKCksIGdldFZhbHVlLmdldENsYXNzKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZSwgZ2V0VmFsdWUpOwogICAgICAg\nIGFzc2VydEVxdWFscyhleHBlY3RlZFZhbHVlLCBmUGxhbi5nZXRTdWJjbGFz\nc0ZldGNoTW9kZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWQs\nIGZDb25maWcuZ2V0U3ViY2xhc3NGZXRjaE1vZGUoKSk7CiAgICB9CgogICAg\nLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5GbHVzaEJlZm9yZVF1ZXJp\nZXMiIGhpbnQKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdEZsdXNoQmVm\nb3JlUXVlcmllc0hpbnQoKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0g\nIm9wZW5qcGEuRmx1c2hCZWZvcmVRdWVyaWVzIjsKCiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyKSBlbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRjaFBs\nYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxhbigp\nOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcg\nPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAgICAgICgo\nRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hD\nb25maWd1cmF0aW9uKCk7CgogICAgICAgIGZsdXNoQmVmb3JlUXVlcmllc0hp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAg\nICAgICAgIC52YWx1ZU9mKFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9UUlVFKSwg\nUXVlcnlGbHVzaE1vZGVzLkZMVVNIX1RSVUUpOwogICAgICAgIGZsdXNoQmVm\nb3JlUXVlcmllc0hpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwK\nICAgICAgICAgICAgUXVlcnlGbHVzaE1vZGVzLkZMVVNIX1RSVUUsIFF1ZXJ5\nRmx1c2hNb2Rlcy5GTFVTSF9UUlVFKTsKCiAgICAgICAgZmx1c2hCZWZvcmVR\ndWVyaWVzSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJp\nbmcKICAgICAgICAgICAgLnZhbHVlT2YoUXVlcnlGbHVzaE1vZGVzLkZMVVNI\nX0ZBTFNFKSwgUXVlcnlGbHVzaE1vZGVzLkZMVVNIX0ZBTFNFKTsKICAgICAg\nICBmbHVzaEJlZm9yZVF1ZXJpZXNIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsCiAgICAgICAgICAgIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9G\nQUxTRSwgUXVlcnlGbHVzaE1vZGVzLkZMVVNIX0ZBTFNFKTsKCiAgICAgICAg\nZmx1c2hCZWZvcmVRdWVyaWVzSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoUXVlcnlGbHVz\naE1vZGVzLkZMVVNIX1dJVEhfQ09OTkVDVElPTiksCiAgICAgICAgICAgIFF1\nZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9XSVRIX0NPTk5FQ1RJT04pOwogICAgICAg\nIGZsdXNoQmVmb3JlUXVlcmllc0hpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwKICAgICAgICAgICAgUXVlcnlGbHVzaE1vZGVzLkZMVVNIX1dJ\nVEhfQ09OTkVDVElPTiwKICAgICAgICAgICAgUXVlcnlGbHVzaE1vZGVzLkZM\nVVNIX1dJVEhfQ09OTkVDVElPTik7CgogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAg\nICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAg\nICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlv\nbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAg\nICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludCho\naW50TmFtZSwgIjEyMzQ1Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQo\naGludE5hbWUsICI2Nzg5MCIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3Rp\nbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVl\nKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAg\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVG\ncm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewog\nICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMSk7CiAgICAg\nICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAg\nICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIs\nCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xh\nc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50\nTmFtZSwgRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQpOwogICAgICAgICAg\nICBmQ29uZmlnLmdldEZsdXNoQmVmb3JlUXVlcmllcygpOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoUXVlcnlGbHVzaE1vZGVzLkZMVVNIX1RSVUUsIGZD\nb25maWcKICAgICAgICAgICAgICAgIC5nZXRGbHVzaEJlZm9yZVF1ZXJpZXMo\nKSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgZmFpbCgiVW5leHBlY3RlZCAiICsgZS5nZXRDbGFzcygpLmdldE5hbWUo\nKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAg\ncHJpdmF0ZSB2b2lkIGZsdXNoQmVmb3JlUXVlcmllc0hpbnRUZXN0KEpEQkNG\nZXRjaFBsYW4gZlBsYW4sCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlv\nbkltcGwgZkNvbmZpZywgU3RyaW5nIGhpbnQsIE9iamVjdCB2YWx1ZSwKICAg\nICAgICBpbnQgZXhwZWN0ZWQpIHsKICAgICAgICBmUGxhbi5zZXRIaW50KGhp\nbnQsIHZhbHVlKTsKICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBmUGxhbi5n\nZXRIaW50KGhpbnQpOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZS5nZXRD\nbGFzcygpLCBnZXRWYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHModmFsdWUsIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nZXhwZWN0ZWQsIGZDb25maWcuZ2V0Rmx1c2hCZWZvcmVRdWVyaWVzKCkpOwog\nICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuUmVhZExv\nY2tMZXZlbCIgaGludAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVh\nZExvY2tMZXZlbEhpbnQoKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0g\nIm9wZW5qcGEuUmVhZExvY2tMZXZlbCI7CgogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdl\ncillbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRjaFBsYW4gZlBs\nYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxhbigpOwogICAg\nICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcgPSAoSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAgICAgICgoRW50aXR5\nTWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hDb25maWd1\ncmF0aW9uKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwoKICAgICAgICByZWFkTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoTWl4\nZWRMb2NrTGV2ZWxzLkxPQ0tfTk9ORSksIExvY2tNb2RlVHlwZS5OT05FLAog\nICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19OT05FKTsKICAgICAg\nICByZWFkTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19OT05FLCBM\nb2NrTW9kZVR5cGUuTk9ORSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfTk9ORSk7CgogICAgICAgIHJlYWRMb2NrTGV2ZWxIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAu\ndmFsdWVPZihNaXhlZExvY2tMZXZlbHMuTE9DS19SRUFEKSwgTG9ja01vZGVU\neXBlLlJFQUQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1JF\nQUQpOwogICAgICAgIHJlYWRMb2NrTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNv\nbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5M\nT0NLX1JFQUQsIExvY2tNb2RlVHlwZS5SRUFELAogICAgICAgICAgICBNaXhl\nZExvY2tMZXZlbHMuTE9DS19SRUFEKTsKCiAgICAgICAgcmVhZExvY2tMZXZl\nbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAg\nICAgICAgICAgIC52YWx1ZU9mKE1peGVkTG9ja0xldmVscy5MT0NLX1dSSVRF\nKSwgTG9ja01vZGVUeXBlLldSSVRFLAogICAgICAgICAgICBNaXhlZExvY2tM\nZXZlbHMuTE9DS19XUklURSk7CiAgICAgICAgcmVhZExvY2tMZXZlbEhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTWl4\nZWRMb2NrTGV2ZWxzLkxPQ0tfV1JJVEUsIExvY2tNb2RlVHlwZS5XUklURSwK\nICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfV1JJVEUpOwoKICAg\nICAgICByZWFkTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoTWl4ZWRMb2Nr\nTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQyksIExvY2tNb2RlVHlwZS5PUFRJTUlT\nVElDLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlT\nVElDKTsKICAgICAgICByZWFkTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMu\nTE9DS19PUFRJTUlTVElDLCBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQywKICAg\nICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQyk7Cgog\nICAgICAgIHJlYWRMb2NrTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAudmFsdWVPZihNaXhlZExv\nY2tMZXZlbHMuTE9DS19PUFRJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCksCiAg\nICAgICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElDX0ZPUkNFX0lOQ1JF\nTUVOVCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1J\nU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwogICAgICAgIHJlYWRMb2NrTGV2ZWxI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAg\nIE1peGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNUSUNfRk9SQ0VfSU5DUkVN\nRU5ULAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQ19GT1JD\nRV9JTkNSRU1FTlQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NL\nX09QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKTsKCiAgICAgICAgcmVhZExv\nY2tMZXZlbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAg\nICAgICAgICAgU3RyaW5nLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tf\nUEVTU0lNSVNUSUNfUkVBRCksCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5Q\nRVNTSU1JU1RJQ19SRUFELAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMu\nTE9DS19QRVNTSU1JU1RJQ19SRUFEKTsKICAgICAgICByZWFkTG9ja0xldmVs\nSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAg\nICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19SRUFELAogICAg\nICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfUkVBRCwKICAgICAg\nICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfUkVBRCk7\nCgogICAgICAgIHJlYWRMb2NrTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsCiAgICAgICAgICAgIFN0cmluZy52YWx1ZU9mKE1peGVk\nTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1dSSVRFKSwKICAgICAgICAg\nICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1dSSVRFLAogICAgICAgICAg\nICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19XUklURSk7CiAg\nICAgICAgcmVhZExvY2tMZXZlbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVT\nU0lNSVNUSUNfV1JJVEUsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNT\nSU1JU1RJQ19XUklURSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxP\nQ0tfUEVTU0lNSVNUSUNfV1JJVEUpOwoKICAgICAgICByZWFkTG9ja0xldmVs\nSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAg\nICAgICAgICAgLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lN\nSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKSwKICAgICAgICAgICAgTG9ja01vZGVU\neXBlLlBFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAg\nTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfRk9SQ0VfSU5DUkVN\nRU5UKTsKICAgICAgICByZWFkTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMu\nTE9DS19QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAgICAgICAg\nIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAg\nICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX0ZP\nUkNFX0lOQ1JFTUVOVCk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAg\nICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3Mu\naXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgIjEyMzQ1Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5h\nbWUsICI2Nzg5MCIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBh\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVn\naHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUu\nZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAg\nICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMSk7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAgICAgZmFp\nbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAg\nICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNB\nc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQpOwogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUkVBRCwgZkNvbmZpZy5n\nZXRSZWFkTG9ja0xldmVsKCkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIGZhaWwoIlVuZXhwZWN0ZWQgIiArIGUuZ2V0\nQ2xhc3MoKS5nZXROYW1lKCkpOwogICAgICAgIH0KICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcmVhZExvY2tMZXZlbEhpbnRUZXN0\nKEpEQkNGZXRjaFBsYW4gZlBsYW4sCiAgICAgICAgSkRCQ0ZldGNoQ29uZmln\ndXJhdGlvbkltcGwgZkNvbmZpZywgU3RyaW5nIGhpbnQsIE9iamVjdCB2YWx1\nZSwKICAgICAgICBPYmplY3QgZXhwZWN0ZWRNb2RlLCBpbnQgZXhwZWN0ZWRM\nZXZlbCkgewogICAgICAgIGZQbGFuLnNldEhpbnQoaGludCwgdmFsdWUpOwog\nICAgICAgIE9iamVjdCBnZXRWYWx1ZSA9IGZQbGFuLmdldEhpbnQoaGludCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVlLmdldENsYXNzKCksIGdldFZh\nbHVlLmdldENsYXNzKCkpOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZSwg\nZ2V0VmFsdWUpOwogICAgICAgIGFzc2VydEVxdWFscyhleHBlY3RlZE1vZGUs\nIGZQbGFuLmdldFJlYWRMb2NrTW9kZSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoZXhwZWN0ZWRMZXZlbCwgZkNvbmZpZy5nZXRSZWFkTG9ja0xldmVsKCkp\nOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuV3Jp\ndGVMb2NrTGV2ZWwiIGhpbnQKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVz\ndFdyaXRlTG9ja0xldmVsSGludCgpIHsKICAgICAgICBTdHJpbmcgaGludE5h\nbWUgPSAib3BlbmpwYS5Xcml0ZUxvY2tMZXZlbCI7CgogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5\nTWFuYWdlcillbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRjaFBs\nYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxhbigp\nOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcg\nPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAgICAgICgo\nRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hD\nb25maWd1cmF0aW9uKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwoKICAgICAgICB3cml0ZUxvY2tMZXZlbEhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1\nZU9mKE1peGVkTG9ja0xldmVscy5MT0NLX05PTkUpLCBMb2NrTW9kZVR5cGUu\nTk9ORSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfTk9ORSk7\nCiAgICAgICAgd3JpdGVMb2NrTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NL\nX05PTkUsIExvY2tNb2RlVHlwZS5OT05FLAogICAgICAgICAgICBNaXhlZExv\nY2tMZXZlbHMuTE9DS19OT05FKTsKCiAgICAgICAgd3JpdGVMb2NrTGV2ZWxI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAg\nICAgICAgICAudmFsdWVPZihNaXhlZExvY2tMZXZlbHMuTE9DS19SRUFEKSwg\nTG9ja01vZGVUeXBlLlJFQUQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVs\ncy5MT0NLX1JFQUQpOwogICAgICAgIHdyaXRlTG9ja0xldmVsSGludFRlc3Qo\nZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBNaXhlZExv\nY2tMZXZlbHMuTE9DS19SRUFELCBMb2NrTW9kZVR5cGUuUkVBRCwKICAgICAg\nICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUkVBRCk7CgogICAgICAgIHdy\naXRlTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfV1JJVEUpLCBMb2NrTW9kZVR5cGUuV1JJVEUsCiAgICAgICAgICAg\nIE1peGVkTG9ja0xldmVscy5MT0NLX1dSSVRFKTsKICAgICAgICB3cml0ZUxv\nY2tMZXZlbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAg\nICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfV1JJVEUsIExvY2tNb2Rl\nVHlwZS5XUklURSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tf\nV1JJVEUpOwoKICAgICAgICB3cml0ZUxvY2tMZXZlbEhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1\nZU9mKE1peGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNUSUMpLCBMb2NrTW9k\nZVR5cGUuT1BUSU1JU1RJQywKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfT1BUSU1JU1RJQyk7CiAgICAgICAgd3JpdGVMb2NrTGV2ZWxIaW50\nVGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIE1p\neGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNUSUMsIExvY2tNb2RlVHlwZS5P\nUFRJTUlTVElDLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19P\nUFRJTUlTVElDKTsKCiAgICAgICAgd3JpdGVMb2NrTGV2ZWxIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAu\ndmFsdWVPZihNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlTVElDX0ZPUkNF\nX0lOQ1JFTUVOVCksCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlT\nVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2\nZWxzLkxPQ0tfT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwogICAgICAg\nIHdyaXRlTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlT\nVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAgTG9ja01vZGVUeXBl\nLk9QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULAogICAgICAgICAgICBNaXhl\nZExvY2tMZXZlbHMuTE9DS19PUFRJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCk7\nCgogICAgICAgIHdyaXRlTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLAogICAgICAgICAgICBTdHJpbmcudmFsdWVPZihNaXhl\nZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19SRUFEKSwKICAgICAgICAg\nICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1JFQUQsCiAgICAgICAgICAg\nIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1JFQUQpOwogICAg\nICAgIHdyaXRlTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNT\nSU1JU1RJQ19SRUFELAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lN\nSVNUSUNfUkVBRCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tf\nUEVTU0lNSVNUSUNfUkVBRCk7CgogICAgICAgIHdyaXRlTG9ja0xldmVsSGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBT\ndHJpbmcudmFsdWVPZihNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJ\nQ19XUklURSksCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJ\nQ19XUklURSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVT\nU0lNSVNUSUNfV1JJVEUpOwogICAgICAgIHdyaXRlTG9ja0xldmVsSGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBNaXhl\nZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19XUklURSwKICAgICAgICAg\nICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1dSSVRFLAogICAgICAgICAg\nICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19XUklURSk7Cgog\nICAgICAgIHdyaXRlTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoTWl4ZWRM\nb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKSwK\nICAgICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX0ZPUkNFX0lO\nQ1JFTUVOVCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVT\nU0lNSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKTsKICAgICAgICB3cml0ZUxvY2tM\nZXZlbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAg\nICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfRk9SQ0Vf\nSU5DUkVNRU5ULAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNU\nSUNfRk9SQ0VfSU5DUkVNRU5ULAogICAgICAgICAgICBNaXhlZExvY2tMZXZl\nbHMuTE9DS19QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwoKICAgICAg\nICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAi\neHh4eHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nInl5eXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBl\neHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRD\nbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICIxMjM0NSIpOwogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiNjc4OTAiKTsKICAgICAgICAg\nICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIs\nCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xh\nc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50\nTmFtZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCAtMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBl\nY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFz\ncygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29uZmlndXJhdGlvbi5ERUZB\nVUxUKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKE1peGVkTG9ja0xldmVs\ncy5MT0NLX1dSSVRFLCBmQ29uZmlnCiAgICAgICAgICAgICAgICAuZ2V0V3Jp\ndGVMb2NrTGV2ZWwoKSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgZmFpbCgiVW5leHBlY3RlZCAiICsgZS5nZXRDbGFz\ncygpLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIHByaXZhdGUgdm9pZCB3cml0ZUxvY2tMZXZlbEhpbnRUZXN0KEpE\nQkNGZXRjaFBsYW4gZlBsYW4sCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJh\ndGlvbkltcGwgZkNvbmZpZywgU3RyaW5nIGhpbnQsIE9iamVjdCB2YWx1ZSwK\nICAgICAgICBPYmplY3QgZXhwZWN0ZWRNb2RlLCBpbnQgZXhwZWN0ZWRMZXZl\nbCkgewogICAgICAgIGZQbGFuLnNldEhpbnQoaGludCwgdmFsdWUpOwogICAg\nICAgIE9iamVjdCBnZXRWYWx1ZSA9IGZQbGFuLmdldEhpbnQoaGludCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVlLmdldENsYXNzKCksIGdldFZhbHVl\nLmdldENsYXNzKCkpOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZSwgZ2V0\nVmFsdWUpOwogICAgICAgIGFzc2VydEVxdWFscyhleHBlY3RlZE1vZGUsIGZQ\nbGFuLmdldFdyaXRlTG9ja01vZGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKGV4cGVjdGVkTGV2ZWwsIGZDb25maWcuZ2V0V3JpdGVMb2NrTGV2ZWwoKSk7\nCiAgICB9CgogICAgLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5GZXRj\naFBsYW4uUmVhZExvY2tNb2RlIiBoaW50CiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHRlc3RGZXRjaFBsYW5SZWFkTG9ja01vZGVIaW50SW5UeCgpIHsKICAg\nICAgICBmZXRjaFBsYW5SZWFkTG9ja01vZGVIaW50KHRydWUpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFBsYW5SZWFkTG9ja01vZGVIaW50\nTm90SW5UeCgpIHsKICAgICAgICBmZXRjaFBsYW5SZWFkTG9ja01vZGVIaW50\nKGZhbHNlKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZmV0Y2hQbGFuUmVh\nZExvY2tNb2RlSGludChib29sZWFuIGluVHJhbnNhY3Rpb24pIHsKICAgICAg\nICBTdHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5GZXRjaFBsYW4uUmVhZExv\nY2tNb2RlIjsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBlbS5nZXREZWxlZ2F0\nZSgpOwogICAgICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNo\nUGxhbikgb2VtLmdldEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENv\nbmZpZ3VyYXRpb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJh\ndGlvbkltcGwpCiAgICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9l\nbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CiAgICAg\nICAgaWYoaW5UcmFuc2FjdGlvbikKICAgICAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwoKICAgICAgICByZWFkTG9ja01vZGVIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJub25lIiwKICAgICAgICAg\nICAgTG9ja01vZGVUeXBlLk5PTkUsIE1peGVkTG9ja0xldmVscy5MT0NLX05P\nTkUpOwogICAgICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgTG9ja01vZGVUeXBlLk5PTkUsCiAgICAgICAgICAg\nIExvY2tNb2RlVHlwZS5OT05FLCBNaXhlZExvY2tMZXZlbHMuTE9DS19OT05F\nKTsKICAgICAgICByZWFkTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5OT05FLm5h\nbWUoKSwgTG9ja01vZGVUeXBlLk5PTkUsCiAgICAgICAgICAgIE1peGVkTG9j\na0xldmVscy5MT0NLX05PTkUpOwoKICAgICAgICByZWFkTG9ja01vZGVIaW50\nVGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJyZWFkIiwKICAgICAg\nICAgICAgTG9ja01vZGVUeXBlLlJFQUQsIE1peGVkTG9ja0xldmVscy5MT0NL\nX1JFQUQpOwogICAgICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwgTG9ja01vZGVUeXBlLlJFQUQsCiAgICAgICAg\nICAgIExvY2tNb2RlVHlwZS5SRUFELCBNaXhlZExvY2tMZXZlbHMuTE9DS19S\nRUFEKTsKICAgICAgICByZWFkTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNv\nbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5SRUFE\nLm5hbWUoKSwgTG9ja01vZGVUeXBlLlJFQUQsCiAgICAgICAgICAgIE1peGVk\nTG9ja0xldmVscy5MT0NLX1JFQUQpOwoKICAgICAgICByZWFkTG9ja01vZGVI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJ3cml0ZSIsCiAg\nICAgICAgICAgIExvY2tNb2RlVHlwZS5XUklURSwgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfV1JJVEUpOwogICAgICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgTG9ja01vZGVUeXBlLldSSVRFLAog\nICAgICAgICAgICBMb2NrTW9kZVR5cGUuV1JJVEUsIE1peGVkTG9ja0xldmVs\ncy5MT0NLX1dSSVRFKTsKICAgICAgICByZWFkTG9ja01vZGVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIExvY2tNb2RlVHlwZS5XUklURQog\nICAgICAgICAgICAubmFtZSgpLCBMb2NrTW9kZVR5cGUuV1JJVEUsIE1peGVk\nTG9ja0xldmVscy5MT0NLX1dSSVRFKTsKCiAgICAgICAgcmVhZExvY2tNb2Rl\nSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAib3B0aW1pc3Rp\nYyIsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElDLCBNaXhl\nZExvY2tMZXZlbHMuTE9DS19PUFRJTUlTVElDKTsKICAgICAgICByZWFkTG9j\na01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIExvY2tN\nb2RlVHlwZS5PUFRJTUlTVElDLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUu\nT1BUSU1JU1RJQywgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQyk7\nCiAgICAgICAgcmVhZExvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQwogICAgICAgICAg\nICAubmFtZSgpLCBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQywgTWl4ZWRMb2Nr\nTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQyk7CgogICAgICAgIHJlYWRMb2NrTW9k\nZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAg\nICAgIm9wdGltaXN0aWMtZm9yY2UtaW5jcmVtZW50IiwKICAgICAgICAgICAg\nTG9ja01vZGVUeXBlLk9QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULAogICAg\nICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlTVElDX0ZPUkNF\nX0lOQ1JFTUVOVCk7CiAgICAgICAgcmVhZExvY2tNb2RlSGludFRlc3QoZlBs\nYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBMb2NrTW9kZVR5\ncGUuT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAgICAgICAgIExv\nY2tNb2RlVHlwZS5PUFRJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAg\nICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQ19GT1JDRV9J\nTkNSRU1FTlQpOwogICAgICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTG9ja01vZGVUeXBl\nLk9QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULm5hbWUoKSwKICAgICAgICAg\nICAgTG9ja01vZGVUeXBlLk9QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULAog\nICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlTVElDX0ZP\nUkNFX0lOQ1JFTUVOVCk7CgogICAgICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgInBlc3Np\nbWlzdGljLXJlYWQiLCBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfUkVBRCwK\nICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNf\nUkVBRCk7CiAgICAgICAgcmVhZExvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVT\nU0lNSVNUSUNfUkVBRCwgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1JFQUQs\nCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElD\nX1JFQUQpOwogICAgICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTG9ja01vZGVUeXBlLlBF\nU1NJTUlTVElDX1JFQUQubmFtZSgpLAogICAgICAgICAgICBMb2NrTW9kZVR5\ncGUuUEVTU0lNSVNUSUNfUkVBRCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2\nZWxzLkxPQ0tfUEVTU0lNSVNUSUNfUkVBRCk7CgogICAgICAgIHJlYWRMb2Nr\nTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAg\nICAgICAgInBlc3NpbWlzdGljLXdyaXRlIiwgTG9ja01vZGVUeXBlLlBFU1NJ\nTUlTVElDX1dSSVRFLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9D\nS19QRVNTSU1JU1RJQ19XUklURSk7CiAgICAgICAgcmVhZExvY2tNb2RlSGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBM\nb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfV1JJVEUsIExvY2tNb2RlVHlwZS5Q\nRVNTSU1JU1RJQ19XUklURSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfUEVTU0lNSVNUSUNfV1JJVEUpOwogICAgICAgIHJlYWRMb2NrTW9k\nZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAg\nICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1dSSVRFLm5hbWUoKSwKICAg\nICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1dSSVRFLAogICAg\nICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19XUklU\nRSk7CgogICAgICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgInBlc3NpbWlzdGljLWZvcmNl\nLWluY3JlbWVudCIsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1J\nU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAgICAgICAgIE1peGVkTG9ja0xl\ndmVscy5MT0NLX1BFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCk7CiAgICAg\nICAgcmVhZExvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfRk9S\nQ0VfSU5DUkVNRU5ULAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lN\nSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULAogICAgICAgICAgICBNaXhlZExvY2tM\nZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwogICAg\nICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwKICAgICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX0ZP\nUkNFX0lOQ1JFTUVOVC5uYW1lKCksCiAgICAgICAgICAgIExvY2tNb2RlVHlw\nZS5QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAgICAgICAgIE1p\neGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVO\nVCk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQo\naGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0\naW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAg\nICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxl\nRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjEyMzQ1Iik7\nCiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICI2Nzg5MCIp\nOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQg\nZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkp\nOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5z\nZXRIaW50KGhpbnROYW1lLCAtMSk7CiAgICAgICAgICAgIGZQbGFuLnNldEhp\nbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5n\nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgi\nQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJv\nbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgaWYoaW5UcmFu\nc2FjdGlvbikKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xs\nYmFjaygpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0\nZSB2b2lkIHJlYWRMb2NrTW9kZUhpbnRUZXN0KEpEQkNGZXRjaFBsYW4gZlBs\nYW4sCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZp\nZywgU3RyaW5nIGhpbnQsIE9iamVjdCB2YWx1ZSwKICAgICAgICBPYmplY3Qg\nZXhwZWN0ZWRNb2RlLCBpbnQgZXhwZWN0ZWRMZXZlbCkgewogICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludCwgdmFsdWUpOwogICAgICAgIE9iamVjdCBnZXRW\nYWx1ZSA9IGZQbGFuLmdldEhpbnQoaGludCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKHZhbHVlLmdldENsYXNzKCksIGdldFZhbHVlLmdldENsYXNzKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZSwgZ2V0VmFsdWUpOwogICAgICAg\nIGFzc2VydEVxdWFscyhleHBlY3RlZE1vZGUsIGZQbGFuLmdldFJlYWRMb2Nr\nTW9kZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRMZXZlbCwg\nZkNvbmZpZy5nZXRSZWFkTG9ja0xldmVsKCkpOwogICAgfQoKICAgIC8qIEdv\nb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuRmV0Y2hQbGFuLldyaXRlTG9ja01v\nZGUiIGhpbnQKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdEZldGNoUGxh\nbldyaXRlTG9ja01vZGVIaW50SW5UeCgpIHsKICAgICAgICBmZXRjaFBsYW5X\ncml0ZUxvY2tNb2RlSGludCh0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RmV0Y2hQbGFuV3JpdGVMb2NrTW9kZUhpbnROb3RJblR4KCkgewog\nICAgICAgIGZldGNoUGxhbldyaXRlTG9ja01vZGVIaW50KGZhbHNlKTsKICAg\nIH0KCiAgICBwcml2YXRlIHZvaWQgZmV0Y2hQbGFuV3JpdGVMb2NrTW9kZUhp\nbnQoYm9vbGVhbiBpblRyYW5zYWN0aW9uKSB7CiAgICAgICAgU3RyaW5nIGhp\nbnROYW1lID0gIm9wZW5qcGEuRmV0Y2hQbGFuLldyaXRlTG9ja01vZGUiOwoK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAg\nICBKREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5n\nZXRGZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9u\nSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKQog\nICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tl\ncigpLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwogICAgICAgIGlmKGluVHJh\nbnNhY3Rpb24pCiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKCiAgICAgICAgd3JpdGVMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwgIm5vbmUiLAogICAgICAgICAgICBMb2NrTW9k\nZVR5cGUuTk9ORSwgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfTk9ORSk7CiAgICAg\nICAgd3JpdGVMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwgTG9ja01vZGVUeXBlLk5PTkUsCiAgICAgICAgICAgIExvY2tNb2Rl\nVHlwZS5OT05FLCBNaXhlZExvY2tMZXZlbHMuTE9DS19OT05FKTsKICAgICAg\nICB3cml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCBMb2NrTW9kZVR5cGUuTk9ORQogICAgICAgICAgICAubmFtZSgpLCBM\nb2NrTW9kZVR5cGUuTk9ORSwgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfTk9ORSk7\nCgogICAgICAgIHdyaXRlTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsICJyZWFkIiwKICAgICAgICAgICAgTG9ja01vZGVUeXBl\nLlJFQUQsIE1peGVkTG9ja0xldmVscy5MT0NLX1JFQUQpOwogICAgICAgIHdy\naXRlTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUs\nIExvY2tNb2RlVHlwZS5SRUFELAogICAgICAgICAgICBMb2NrTW9kZVR5cGUu\nUkVBRCwgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUkVBRCk7CiAgICAgICAgd3Jp\ndGVMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwg\nTG9ja01vZGVUeXBlLlJFQUQKICAgICAgICAgICAgLm5hbWUoKSwgTG9ja01v\nZGVUeXBlLlJFQUQsIE1peGVkTG9ja0xldmVscy5MT0NLX1JFQUQpOwoKICAg\nICAgICB3cml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCAid3JpdGUiLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuV1JJ\nVEUsIE1peGVkTG9ja0xldmVscy5MT0NLX1dSSVRFKTsKICAgICAgICB3cml0\nZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBM\nb2NrTW9kZVR5cGUuV1JJVEUsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5X\nUklURSwgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfV1JJVEUpOwogICAgICAgIHdy\naXRlTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUs\nIExvY2tNb2RlVHlwZS5XUklURQogICAgICAgICAgICAubmFtZSgpLCBMb2Nr\nTW9kZVR5cGUuV1JJVEUsIE1peGVkTG9ja0xldmVscy5MT0NLX1dSSVRFKTsK\nCiAgICAgICAgd3JpdGVMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmln\nLCBoaW50TmFtZSwKICAgICAgICAgICAgIm9wdGltaXN0aWMiLCBMb2NrTW9k\nZVR5cGUuT1BUSU1JU1RJQywKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfT1BUSU1JU1RJQyk7CiAgICAgICAgd3JpdGVMb2NrTW9kZUhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTG9j\na01vZGVUeXBlLk9QVElNSVNUSUMsIExvY2tNb2RlVHlwZS5PUFRJTUlTVElD\nLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlTVElD\nKTsKICAgICAgICB3cml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLCBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQwogICAgICAg\nICAgICAubmFtZSgpLCBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQywgTWl4ZWRM\nb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQyk7CgogICAgICAgIHdyaXRlTG9j\na01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAg\nICAgICAgICJvcHRpbWlzdGljLWZvcmNlLWluY3JlbWVudCIsCiAgICAgICAg\nICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwK\nICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQ19G\nT1JDRV9JTkNSRU1FTlQpOwogICAgICAgIHdyaXRlTG9ja01vZGVIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIExvY2tN\nb2RlVHlwZS5PUFRJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAg\nICAgTG9ja01vZGVUeXBlLk9QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULAog\nICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlTVElDX0ZP\nUkNFX0lOQ1JFTUVOVCk7CiAgICAgICAgd3JpdGVMb2NrTW9kZUhpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTG9ja01v\nZGVUeXBlLk9QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULm5hbWUoKSwKICAg\nICAgICAgICAgTG9ja01vZGVUeXBlLk9QVElNSVNUSUNfRk9SQ0VfSU5DUkVN\nRU5ULAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlT\nVElDX0ZPUkNFX0lOQ1JFTUVOVCk7CgogICAgICAgIHdyaXRlTG9ja01vZGVI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAg\nICJwZXNzaW1pc3RpYy1yZWFkIiwgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElD\nX1JFQUQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJ\nTUlTVElDX1JFQUQpOwogICAgICAgIHdyaXRlTG9ja01vZGVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIExvY2tNb2Rl\nVHlwZS5QRVNTSU1JU1RJQ19SRUFELCBMb2NrTW9kZVR5cGUuUEVTU0lNSVNU\nSUNfUkVBRCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVT\nU0lNSVNUSUNfUkVBRCk7CiAgICAgICAgd3JpdGVMb2NrTW9kZUhpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTG9ja01v\nZGVUeXBlLlBFU1NJTUlTVElDX1JFQUQubmFtZSgpLAogICAgICAgICAgICBM\nb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfUkVBRCwKICAgICAgICAgICAgTWl4\nZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfUkVBRCk7CgogICAgICAg\nIHdyaXRlTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsCiAgICAgICAgICAgICJwZXNzaW1pc3RpYy13cml0ZSIsIExvY2tNb2Rl\nVHlwZS5QRVNTSU1JU1RJQ19XUklURSwKICAgICAgICAgICAgTWl4ZWRMb2Nr\nTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfV1JJVEUpOwogICAgICAgIHdyaXRl\nTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAg\nICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19XUklURSwgTG9j\na01vZGVUeXBlLlBFU1NJTUlTVElDX1dSSVRFLAogICAgICAgICAgICBNaXhl\nZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19XUklURSk7CiAgICAgICAg\nd3JpdGVMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwKICAgICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1dSSVRF\nLm5hbWUoKSwKICAgICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElD\nX1dSSVRFLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNT\nSU1JU1RJQ19XUklURSk7CgogICAgICAgIHdyaXRlTG9ja01vZGVIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgICJwZXNz\naW1pc3RpYy1mb3JjZS1pbmNyZW1lbnQiLAogICAgICAgICAgICBMb2NrTW9k\nZVR5cGUuUEVTU0lNSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULAogICAgICAgICAg\nICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19GT1JDRV9JTkNS\nRU1FTlQpOwogICAgICAgIHdyaXRlTG9ja01vZGVIaW50VGVzdChmUGxhbiwg\nZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5Q\nRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAgICAgICAgIExvY2tN\nb2RlVHlwZS5QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAgICAg\nICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX0ZPUkNFX0lO\nQ1JFTUVOVCk7CiAgICAgICAgd3JpdGVMb2NrTW9kZUhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTG9ja01vZGVUeXBl\nLlBFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVC5uYW1lKCksCiAgICAgICAg\nICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQs\nCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElD\nX0ZPUkNFX0lOQ1JFTUVOVCk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAg\nICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIs\nCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xh\nc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50\nTmFtZSwgIjEyMzQ1Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGlu\ndE5hbWUsICI2Nzg5MCIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3Rpbmcg\nYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJD\nYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9t\nKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAg\nICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMSk7CiAgICAgICAg\nICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAg\nICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3Mu\naXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAg\nICAgICAgaWYoaW5UcmFuc2FjdGlvbikKICAgICAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgcHJpdmF0ZSB2b2lkIHdyaXRlTG9ja01vZGVIaW50VGVzdChK\nREJDRmV0Y2hQbGFuIGZQbGFuLAogICAgICAgIEpEQkNGZXRjaENvbmZpZ3Vy\nYXRpb25JbXBsIGZDb25maWcsIFN0cmluZyBoaW50LCBPYmplY3QgdmFsdWUs\nCiAgICAgICAgT2JqZWN0IGV4cGVjdGVkTW9kZSwgT2JqZWN0IGV4cGVjdGVk\nTGV2ZWwpIHsKICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnQsIHZhbHVlKTsK\nICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBmUGxhbi5nZXRIaW50KGhpbnQp\nOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZS5nZXRDbGFzcygpLCBnZXRW\nYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUs\nIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRNb2Rl\nLCBmUGxhbi5nZXRXcml0ZUxvY2tNb2RlKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscyhleHBlY3RlZExldmVsLCBmQ29uZmlnLmdldFdyaXRlTG9ja0xldmVs\nKCkpOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgcHJlY2VuZGVu\nY2Ugb3JkZXIgb2Ygc2ltaWxpYXIvZXF1aXZhbGVudCBMb2NrVGltZW91dCBo\naW50cy4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdFNpbWlsaWFyTG9j\na1RpbWVvdXRIaW50cygpIHsKICAgICAgICBTdHJpbmcgSmF2YXhMb2NrVGlt\nZW91dCA9ICJqYXZheC5wZXJzaXN0ZW5jZS5sb2NrLnRpbWVvdXQiOwogICAg\nICAgIFN0cmluZyBPcGVuSlBBTG9ja1RpbWVvdXQgPSAib3BlbmpwYS5Mb2Nr\nVGltZW91dCI7CiAgICAgICAgU3RyaW5nIEZldGNoUGxhbkxvY2tUaW1lb3V0\nID0gIm9wZW5qcGEuRmV0Y2hQbGFuLkxvY2tUaW1lb3V0IjsKCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKWVtLmdldERlbGVnYXRlKCk7CgogICAgICAgIHNpbWls\nYXJMb2NrVGltZW91dEhpbnRzVGVzdChvZW0sIEphdmF4TG9ja1RpbWVvdXQs\nIDMzMywKICAgICAgICAgICAgSmF2YXhMb2NrVGltZW91dCwgMzMzLAogICAg\nICAgICAgICBPcGVuSlBBTG9ja1RpbWVvdXQsIDExMSwKICAgICAgICAgICAg\nRmV0Y2hQbGFuTG9ja1RpbWVvdXQsIDIyMik7CiAgICAgICAgc2ltaWxhckxv\nY2tUaW1lb3V0SGludHNUZXN0KG9lbSwgSmF2YXhMb2NrVGltZW91dCwgMzMz\nLAogICAgICAgICAgICBPcGVuSlBBTG9ja1RpbWVvdXQsIDExMSwKICAgICAg\nICAgICAgRmV0Y2hQbGFuTG9ja1RpbWVvdXQsIDIyMiwKICAgICAgICAgICAg\nSmF2YXhMb2NrVGltZW91dCwgMzMzKTsKICAgICAgICBzaW1pbGFyTG9ja1Rp\nbWVvdXRIaW50c1Rlc3Qob2VtLCBKYXZheExvY2tUaW1lb3V0LCAzMzMsCiAg\nICAgICAgICAgIEphdmF4TG9ja1RpbWVvdXQsIDMzMywKICAgICAgICAgICAg\nRmV0Y2hQbGFuTG9ja1RpbWVvdXQsIDIyMiwKICAgICAgICAgICAgT3BlbkpQ\nQUxvY2tUaW1lb3V0LCAxMTEpOwogICAgICAgIHNpbWlsYXJMb2NrVGltZW91\ndEhpbnRzVGVzdChvZW0sIEZldGNoUGxhbkxvY2tUaW1lb3V0LCAyMjIsCiAg\nICAgICAgICAgIE9wZW5KUEFMb2NrVGltZW91dCwgMTExLAogICAgICAgICAg\nICBGZXRjaFBsYW5Mb2NrVGltZW91dCwgMjIyKTsKICAgICAgICBzaW1pbGFy\nTG9ja1RpbWVvdXRIaW50c1Rlc3Qob2VtLCBGZXRjaFBsYW5Mb2NrVGltZW91\ndCwgMjIyLAogICAgICAgICAgICBGZXRjaFBsYW5Mb2NrVGltZW91dCwgMjIy\nLAogICAgICAgICAgICBPcGVuSlBBTG9ja1RpbWVvdXQsIDExMSk7CiAgICAg\nICAgc2ltaWxhckxvY2tUaW1lb3V0SGludHNUZXN0KG9lbSwgT3BlbkpQQUxv\nY2tUaW1lb3V0LCAxMTEsCiAgICAgICAgICAgIE9wZW5KUEFMb2NrVGltZW91\ndCwgMTExKTsKICAgICAgICBzaW1pbGFyTG9ja1RpbWVvdXRIaW50c1Rlc3Qo\nb2VtLCBGZXRjaFBsYW5Mb2NrVGltZW91dCwgMjIyLAogICAgICAgICAgICBG\nZXRjaFBsYW5Mb2NrVGltZW91dCwgMjIyKTsKICAgICAgICBzaW1pbGFyTG9j\na1RpbWVvdXRIaW50c1Rlc3Qob2VtLCBKYXZheExvY2tUaW1lb3V0LCAzMzMs\nCiAgICAgICAgICAgIEphdmF4TG9ja1RpbWVvdXQsIDMzMyk7CgogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgQFN1cHByZXNzV2FybmluZ3MoImRl\ncHJlY2F0aW9uIikKICAgIHByaXZhdGUgdm9pZCBzaW1pbGFyTG9ja1RpbWVv\ndXRIaW50c1Rlc3QoT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtLCBTdHJpbmcg\nd2lubmVyLCAKICAgICAgICBPYmplY3QgZXhwZWN0ZWQsIE9iamVjdC4uLiBo\naW50TnZhbHVlcykgewogICAgICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAo\nSkRCQ0ZldGNoUGxhbikgb2VtLnB1c2hGZXRjaFBsYW4oKTsKICAgICAgICBK\nREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRj\naENvbmZpZ3VyYXRpb25JbXBsKSBmUGxhbgogICAgICAgICAgICAuZ2V0RGVs\nZWdhdGUoKTsKCiAgICAgICAgZm9yKCBpbnQgaSA9IDAgOyBpIDwgaGludE52\nYWx1ZXMubGVuZ3RoIDsgaSArPSAyKSB7CiAgICAgICAgICAgIGZQbGFuLnNl\ndEhpbnQoKFN0cmluZyloaW50TnZhbHVlc1tpXSwgaGludE52YWx1ZXNbaSsx\nXSk7CiAgICAgICAgfQogICAgICAgIGZvciggaW50IGkgPSAwIDsgaSA8IGhp\nbnROdmFsdWVzLmxlbmd0aCA7IGkgKz0gMikgewogICAgICAgICAgICBTdHJp\nbmcgaGludE5hbWUgPSAoU3RyaW5nKWhpbnROdmFsdWVzW2ldOwogICAgICAg\nICAgICBPYmplY3QgZXhwZWN0ZWRWYWx1ZSA9IGhpbnROdmFsdWVzW2krMV07\nCiAgICAgICAgICAgIE9iamVjdCBnZXRWYWx1ZSA9IGZQbGFuLmdldEhpbnQo\naGludE5hbWUpOwogICAgICAgICAgICBpZiAoaGludE5hbWUuZXF1YWxzKHdp\nbm5lcikpIHsKICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhleHBlY3Rl\nZFZhbHVlLmdldENsYXNzKCksIGdldFZhbHVlLmdldENsYXNzKCkpOwogICAg\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkVmFsdWUsIGdldFZh\nbHVlKTsKICAgICAgICAgICAgfSAKICAgICAgICB9CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGV4cGVjdGVkLCBmUGxhbi5nZXRMb2NrVGltZW91dCgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWQsIGZDb25maWcuZ2V0TG9ja1Rp\nbWVvdXQoKSk7CgogICAgICAgIG9lbS5wb3BGZXRjaFBsYW4oKTsKICAgIH0K\nCiAgICAvKiBHb29kCiAgICAgKiBUZXN0IHByZWNlbmRlbmNlIG9yZGVyIG9m\nIHNpbWlsaWFyL2VxdWl2YWxlbnQgUXVlcnlUaW1lb3V0IGhpbnRzLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2ltaWxpYXJRdWVyeVRpbWVvdXRI\naW50cygpIHsKICAgICAgICBTdHJpbmcgSmF2YXhRdWVyeVRpbWVvdXQgPSAi\namF2YXgucGVyc2lzdGVuY2UucXVlcnkudGltZW91dCI7CiAgICAgICAgU3Ry\naW5nIE9wZW5KUEFRdWVyeVRpbWVvdXQgPSAib3BlbmpwYS5RdWVyeVRpbWVv\ndXQiOwogICAgICAgIFN0cmluZyBGZXRjaFBsYW5RdWVyeVRpbWVvdXQgPSAi\nb3BlbmpwYS5GZXRjaFBsYW4uUXVlcnlUaW1lb3V0IjsKCiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKWVtLmdldERlbGVnYXRlKCk7CgogICAgICAgIHNpbWlsYXJR\ndWVyeVRpbWVvdXRIaW50c1Rlc3Qob2VtLCBKYXZheFF1ZXJ5VGltZW91dCwg\nMzMzLCAKICAgICAgICAgICAgSmF2YXhRdWVyeVRpbWVvdXQsIDMzMywKICAg\nICAgICAgICAgT3BlbkpQQVF1ZXJ5VGltZW91dCwgMTExLAogICAgICAgICAg\nICBGZXRjaFBsYW5RdWVyeVRpbWVvdXQsIDIyMik7CiAgICAgICAgc2ltaWxh\nclF1ZXJ5VGltZW91dEhpbnRzVGVzdChvZW0sIEphdmF4UXVlcnlUaW1lb3V0\nLCAzMzMsIAogICAgICAgICAgICBPcGVuSlBBUXVlcnlUaW1lb3V0LCAxMTEs\nCiAgICAgICAgICAgIEZldGNoUGxhblF1ZXJ5VGltZW91dCwgMjIyLAogICAg\nICAgICAgICBKYXZheFF1ZXJ5VGltZW91dCwgMzMzKTsKICAgICAgICBzaW1p\nbGFyUXVlcnlUaW1lb3V0SGludHNUZXN0KG9lbSwgSmF2YXhRdWVyeVRpbWVv\ndXQsIDMzMywgCiAgICAgICAgICAgIEphdmF4UXVlcnlUaW1lb3V0LCAzMzMs\nCiAgICAgICAgICAgIEZldGNoUGxhblF1ZXJ5VGltZW91dCwgMjIyLAogICAg\nICAgICAgICBPcGVuSlBBUXVlcnlUaW1lb3V0LCAxMTEpOwogICAgICAgIHNp\nbWlsYXJRdWVyeVRpbWVvdXRIaW50c1Rlc3Qob2VtLCBGZXRjaFBsYW5RdWVy\neVRpbWVvdXQsIDIyMiwgCiAgICAgICAgICAgIE9wZW5KUEFRdWVyeVRpbWVv\ndXQsIDExMSwKICAgICAgICAgICAgRmV0Y2hQbGFuUXVlcnlUaW1lb3V0LCAy\nMjIpOwogICAgICAgIHNpbWlsYXJRdWVyeVRpbWVvdXRIaW50c1Rlc3Qob2Vt\nLCBGZXRjaFBsYW5RdWVyeVRpbWVvdXQsIDIyMiwgCiAgICAgICAgICAgIEZl\ndGNoUGxhblF1ZXJ5VGltZW91dCwgMjIyLAogICAgICAgICAgICBPcGVuSlBB\nUXVlcnlUaW1lb3V0LCAxMTEpOwogICAgICAgIHNpbWlsYXJRdWVyeVRpbWVv\ndXRIaW50c1Rlc3Qob2VtLCBPcGVuSlBBUXVlcnlUaW1lb3V0LCAxMTEsIAog\nICAgICAgICAgICBPcGVuSlBBUXVlcnlUaW1lb3V0LCAxMTEpOwogICAgICAg\nIHNpbWlsYXJRdWVyeVRpbWVvdXRIaW50c1Rlc3Qob2VtLCBGZXRjaFBsYW5R\ndWVyeVRpbWVvdXQsIDIyMiwgCiAgICAgICAgICAgIEZldGNoUGxhblF1ZXJ5\nVGltZW91dCwgMjIyKTsKICAgICAgICBzaW1pbGFyUXVlcnlUaW1lb3V0SGlu\ndHNUZXN0KG9lbSwgSmF2YXhRdWVyeVRpbWVvdXQsIDMzMywgCiAgICAgICAg\nICAgIEphdmF4UXVlcnlUaW1lb3V0LCAzMzMpOwoKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJkZXByZWNhdGlv\nbiIpCiAgICBwcml2YXRlIHZvaWQgc2ltaWxhclF1ZXJ5VGltZW91dEhpbnRz\nVGVzdChPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0sIFN0cmluZyB3aW5uZXIs\nIAogICAgICAgIE9iamVjdCBleHBlY3RlZCwgT2JqZWN0Li4uIGhpbnROdmFs\ndWVzKSB7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJDRmV0\nY2hQbGFuKSBvZW0ucHVzaEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRj\naENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmln\ndXJhdGlvbkltcGwpIGZQbGFuCiAgICAgICAgICAgIC5nZXREZWxlZ2F0ZSgp\nOwoKICAgICAgICBmb3IoIGludCBpID0gMCA7IGkgPCBoaW50TnZhbHVlcy5s\nZW5ndGggOyBpICs9IDIpIHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludCgo\nU3RyaW5nKWhpbnROdmFsdWVzW2ldLCBoaW50TnZhbHVlc1tpKzFdKTsKICAg\nICAgICB9CiAgICAgICAgZm9yKCBpbnQgaSA9IDAgOyBpIDwgaGludE52YWx1\nZXMubGVuZ3RoIDsgaSArPSAyKSB7CiAgICAgICAgICAgIFN0cmluZyBoaW50\nTmFtZSA9IChTdHJpbmcpaGludE52YWx1ZXNbaV07CiAgICAgICAgICAgIE9i\namVjdCBleHBlY3RlZFZhbHVlID0gaGludE52YWx1ZXNbaSsxXTsKICAgICAg\nICAgICAgT2JqZWN0IGdldFZhbHVlID0gZlBsYW4uZ2V0SGludChoaW50TmFt\nZSk7CiAgICAgICAgICAgIGlmIChoaW50TmFtZS5lcXVhbHMod2lubmVyKSkg\newogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkVmFsdWUu\nZ2V0Q2xhc3MoKSwgZ2V0VmFsdWUuZ2V0Q2xhc3MoKSk7CiAgICAgICAgICAg\nICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRWYWx1ZSwgZ2V0VmFsdWUpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFzc2VydEVxdWFscyhl\neHBlY3RlZCwgZlBsYW4uZ2V0UXVlcnlUaW1lb3V0KCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyhleHBlY3RlZCwgZkNvbmZpZy5nZXRRdWVyeVRpbWVvdXQo\nKSk7CgogICAgICAgIG9lbS5wb3BGZXRjaFBsYW4oKTsKICAgIH0KCiAgICAv\nKgogICAgICogVGVzdCB2YXJpb3VzIGZvcm1zIHNldEhpbnQgYXJndW1lbnQu\nCiAgICAgKi8KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJkZXByZWNhdGlvbiIp\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2V0SGludEFkZEhpbnRzQXJndW1lbnQo\nKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2Vt\nID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWVtLmdldERlbGVnYXRlKCk7CiAg\nICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQbGFuKSBv\nZW0uZ2V0RmV0Y2hQbGFuKCk7CgogICAgICAgIGZQbGFuLnNldEhpbnQoInVu\ncmVjb2duaXplZC5wcm9wLm5hbWUiLCAidW5yZWNvZ25pemVkLnByb3AudmFs\ndWUiKTsKICAgICAgICBhc3NlcnRFcXVhbHMobnVsbCwgZlBsYW4uZ2V0SGlu\ndCgidW5yZWNvZ25pemVkLnByb3AubmFtZSIpKTsKCgogICAgICAgIE9wZW5K\nUEFDb25maWd1cmF0aW9uIGNvbmYgPSBvZW0uZ2V0Q29uZmlndXJhdGlvbigp\nOwogICAgICAgIGlmIChjb25mIGluc3RhbmNlb2YgSkRCQ0NvbmZpZ3VyYXRp\nb24KICAgICAgICAgICAgJiYgKChKREJDQ29uZmlndXJhdGlvbikgY29uZiku\nZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKQogICAgICAgICAgICAgICAgLnN1\ncHBvcnRzSXNvbGF0aW9uRm9yVXBkYXRlKCkpIHsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoIm9wZW5qcGEuamRi\nYy5UcmFuc2FjdGlvbklzb2xhdGlvbiIsIDk5OTkpOwogICAgICAgICAgICAg\nICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24uIik7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhj\nZXB0aW9uIiwKICAgICAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkp\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgZlBsYW4uc2V0SGludCgib3BlbmpwYS5GZXRjaFBsYW4uSXNv\nbGF0aW9uIiwgbmV3IEludGVnZXIoMTMpKTsKICAgICAgICAgICAgZlBsYW4u\nc2V0SGludCgib3BlbmpwYS5GZXRjaFBsYW4uSXNvbGF0aW9uIiwgbmV3IElu\ndGVnZXIoMTQpKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBl\neHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRD\nbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCgogICAgLyoKICAgICAqIFRlc3QgaW52YWxpZCBoaW50IHZpYSBRdWVyeSBp\nbnRlcmZhY2UuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RJbnZhbGlk\nUXVlcnlTZXRIaW50KCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcillbS5nZXRE\nZWxlZ2F0ZSgpOwogICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBv\nZW0pLmdldEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAg\nICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBvIGZyb20g\nTG9ja0VtcGxveWVlIG8iKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBx\nLnNldEhpbnQoIm9wZW5qcGEuRmV0Y2hQbGFuLklzb2xhdGlvbiIsICJ5eXl5\neSIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVk\nIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkp\nKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KfQo=\n","encoding":"base64"}

