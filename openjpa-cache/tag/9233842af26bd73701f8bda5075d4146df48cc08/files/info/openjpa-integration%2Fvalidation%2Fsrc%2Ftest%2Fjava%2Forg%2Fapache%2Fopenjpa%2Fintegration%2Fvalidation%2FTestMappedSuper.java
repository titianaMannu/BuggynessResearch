{"sha":"10303bf0414795c4497c4d33f47afb01f0c02df9","node_id":"MDQ6QmxvYjIwNjM2NDoxMDMwM2JmMDQxNDc5NWM0NDk3YzRkMzNmNDdhZmIwMWYwYzAyZGY5","size":3692,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/10303bf0414795c4497c4d33f47afb01f0c02df9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuaW50ZWdyYXRpb24udmFsaWRh\ndGlvbjsKCmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZh\nLnV0aWwuU2V0OwoKaW1wb3J0IGphdmF4LnZhbGlkYXRpb24uQ29uc3RyYWlu\ndFZpb2xhdGlvbjsKaW1wb3J0IGphdmF4LnZhbGlkYXRpb24uQ29uc3RyYWlu\ndFZpb2xhdGlvbkV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1h\nbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LkFsbG93RmFpbHVyZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlBlcnNp\nc3RlbmNlVGVzdENhc2U7CgoKcHVibGljIGNsYXNzIFRlc3RNYXBwZWRTdXBl\nciBleHRlbmRzIFBlcnNpc3RlbmNlVGVzdENhc2UgewoKICAgIC8qCiAgICAg\nKiBWZXJpZnkgY29uc3RyYWludHMgZGVmaW5lZCB2aWEgWE1MIG9uIGEgbWFw\ncGVkIHN1cGVyY2xhc3MgYXJlIHZhbGlkYXRlZC4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgdGVzdE1hcHBlZFN1cGVyWE1MQ29uc3RyYWludCgpIHsKICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0gKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkgCiAgICAgICAgT3BlbkpQ\nQVBlcnNpc3RlbmNlLmNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KAogICAg\nICAgICAgICAgICAgIlhNTENvbnN0cmFpbnRQVSIsCiAgICAgICAgICAgICAg\nICAib3JnL2FwYWNoZS9vcGVuanBhL2ludGVncmF0aW9uL3ZhbGlkYXRpb24v\ncGVyc2lzdGVuY2UueG1sIik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbWYp\nOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGVtKTsK\nICAgICAgICAKICAgICAgICBYTUxCYXNlIGJlID0gbmV3IFhNTEJhc2UoKTsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoYmUpOwogICAgICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgICAg\nICBmYWlsKCJTaG91bGQgaGF2ZSBjYXVnaHQgYSBDb25zdHJhaW50VmlvbGF0\naW9uRXhjZXB0aW9uIik7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChDb25z\ndHJhaW50VmlvbGF0aW9uRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgY2hl\nY2tDVkUoZSwgInN1cGVyU3RyVmFsdWUiLCAic3RyVmFsdWUiKTsKICAgICAg\nICAgICAgaWYgKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkgewog\nICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5zZXRSb2xsYmFj\na09ubHkoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbCgiU2hvdWxkIGhh\ndmUgY2F1Z2h0IGEgQ29uc3RyYWludFZpb2xhdGlvbkV4Y2VwdGlvbiwgYnV0\nIGluc3RlYWQgY2F1Z2h0IEV4Y2VwdGlvbj0iICsgZSk7CiAgICAgICAgfQog\nICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICBpZiAoZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5pc0FjdGl2ZSgpKSB7CiAgICAgICAgICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgaWYgKGVtZiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBjbGVh\ncihlbWYpOwogICAgICAgICAgICAgICAgY2xvc2VFTUYoZW1mKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgcHJpdmF0ZSB2b2lk\nIGNoZWNrQ1ZFKENvbnN0cmFpbnRWaW9sYXRpb25FeGNlcHRpb24gZSwKICAg\nICAgICBTdHJpbmcuLi4gdmlvUHJvcGVydGllcykgewogICAgICAgIFNldDxD\nb25zdHJhaW50VmlvbGF0aW9uPD8+PmN2cyA9IGUuZ2V0Q29uc3RyYWludFZp\nb2xhdGlvbnMoKTsKICAgICAgICBpZiAodmlvUHJvcGVydGllcy5sZW5ndGgg\nPT0gMCAmJiBjdnMgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwogICAg\nICAgIGFzc2VydEVxdWFscyh2aW9Qcm9wZXJ0aWVzLmxlbmd0aCwgY3ZzLnNp\nemUoKSk7CiAgICAgICAgSXRlcmF0b3I8Q29uc3RyYWludFZpb2xhdGlvbjw/\nPj4gaSA9IAogICAgICAgICAgICAoSXRlcmF0b3I8Q29uc3RyYWludFZpb2xh\ndGlvbjw/Pj4pIGN2cy5pdGVyYXRvcigpOwogICAgICAgIHdoaWxlIChpLmhh\nc05leHQoKSkgewogICAgICAgICAgICBDb25zdHJhaW50VmlvbGF0aW9uPD8+\nIHYgPSAoQ29uc3RyYWludFZpb2xhdGlvbjw/PilpLm5leHQoKTsKICAgICAg\nICAgICAgYm9vbGVhbiBmb3VuZCA9IGZhbHNlOwogICAgICAgICAgICBmb3Ig\nKFN0cmluZyB2aW8gOiB2aW9Qcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgICAg\nICBpZiAodi5nZXRQcm9wZXJ0eVBhdGgoKS50b1N0cmluZygpLmNvbXBhcmVU\nbyh2aW8pID09IDApIHsKICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRy\ndWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFmb3VuZCkgewog\nICAgICAgICAgICAgICAgZmFpbCgiVW5leHBlY3RlZCBDb25zdHJhaW50Vmlv\nbGF0aW9uIGZvcjogIiArIAogICAgICAgICAgICAgICAgICAgIHYuZ2V0UHJv\ncGVydHlQYXRoKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoK\nfQo=\n","encoding":"base64"}

