{"sha":"110a60aad993d60ab7639025c952a329cdc36144","node_id":"MDQ6QmxvYjIwNjM2NDoxMTBhNjBhYWQ5OTNkNjBhYjc2MzkwMjVjOTUyYTMyOWNkYzM2MTQ0","size":9786,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/110a60aad993d60ab7639025c952a329cdc36144","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuaW50ZWdyYXRpb24udmFsaWRh\ndGlvbjsKCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEu\ndXRpbC5NYXA7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFu\nYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLnNwaS5WYWxpZGF0aW9u\nTW9kZTsKaW1wb3J0IGphdmF4LnZhbGlkYXRpb24uVmFsaWRhdGlvbjsKaW1w\nb3J0IGphdmF4LnZhbGlkYXRpb24uVmFsaWRhdG9yRmFjdG9yeTsKCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50\naXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEk7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3Rl\nbmNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRl\nc3QuU2luZ2xlRU1GVGVzdENhc2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudmFsaWRhdGlvbi5WYWxpZGF0aW5nTGlmZWN5Y2xlRXZlbnRNYW5hZ2Vy\nOwoKLyoqCiAqIFRlc3RzIHRoZSBuZXcgQmVhbiBWYWxpZGF0aW9uIEZhY3Rv\ncnkgc3VwcG9ydCBpbiB0aGUgSlBBIDIuMCBzcGVjIGJ5CiAqIGZvY3VzaW5n\nIG9uIHRoZSBmb2xsb3dpbmcgVmFsaWRhdGlvbiBQcm92aWRlciBzY2VuYXJp\nb3M6CiAqICAgMSkgTW9kZSBvZiBOT05FIHdpbGwgY3JlYXRlIGEgTGlmZWN5\nY2xlRXZlbnRNYW5hZ2VyCiAqICAgMikgTW9kZSBvZiBBVVRPIHdpbGwgY3Jl\nYXRlIGEgVmFsaWRhdGluZ0xpZmVjeWNsZUV2ZW50TWFuYWdlcgogKiAgIDMp\nIE1hcCBtb2RlIG9mIENBTExCQUNLIHdpbGwgY3JlYXRlIGEgVmFsaWRhdGlu\nZ0xpZmVjeWNsZUV2ZW50TWFuYWdlcgogKiAgIDQpIFZlcmlmeSBhIHBhc3Nl\nZCBpbiBWYWxpZGF0b3JGYWN0b3J5IGlzIHVzZWQKICogCiAqIEB2ZXJzaW9u\nICRSZXYkICREYXRlJAogKi8KcHVibGljIGNsYXNzIFRlc3RWYWxpZGF0aW5n\nTEVNIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoKICAgIEBPdmVycmlk\nZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgc3VwZXIuc2V0\nVXAoQ0xFQVJfVEFCTEVTLCBTaW1wbGVFbnRpdHkuY2xhc3MpOwoKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gbnVsbDsKICAgICAgICAvLyBjcmVhdGUg\nc29tZSBpbml0aWFsIGVudGl0aWVzCiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAg\nICBhc3NlcnROb3ROdWxsKGVtKTsKICAgICAgICAgICAgZ2V0TG9nKCkudHJh\nY2UoInNldHVwKCkgLSBjcmVhdGluZyAxIFNpbXBsZUVudGl0eSIpOwogICAg\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAg\nICAgIFNpbXBsZUVudGl0eSBzZSA9IG5ldyBTaW1wbGVFbnRpdHkoImVudGl0\neSIsIjEiKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChzZSk7CiAgICAgICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbCgic2V0dXAo\nKSAtIFVuZXhwZWN0ZWQgRXhjZXB0aW9uIC0gIiArIGUpOwogICAgICAgIH0g\nZmluYWxseSB7CiAgICAgICAgICAgIGlmICgoZW0gIT0gbnVsbCkgJiYgZW0u\naXNPcGVuKCkpIHsKICAgICAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTY2Vu\nYXJpbyBiZWluZyB0ZXN0ZWQ6CiAgICAgKiAgIDEpIE1vZGUgb2YgTk9ORSB3\naWxsIGNyZWF0ZSBhIExpZmVjeWNsZUV2ZW50TWFuYWdlcgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0VmFsaWRhdGluZ0xFTTEoKSB7CiAgICAgICAg\nZ2V0TG9nKCkudHJhY2UoInRlc3RWYWxpZGF0aW5nTEVNMSgpIC0gTk9ORSIp\nOwogICAgICAgIC8vIGNyZWF0ZSBvdXIgRU1GCiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5U1BJIGVtZiA9IChPcGVuSlBBRW50aXR5TWFu\nYWdlckZhY3RvcnlTUEkpCiAgICAgICAgICAgIE9wZW5KUEFQZXJzaXN0ZW5j\nZS5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgKICAgICAgICAgICAgICAg\nICJzaW1wbGUtbm9uZS1tb2RlIiwKICAgICAgICAgICAgICAgICJvcmcvYXBh\nY2hlL29wZW5qcGEvaW50ZWdyYXRpb24vdmFsaWRhdGlvbi9wZXJzaXN0ZW5j\nZS54bWwiKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGVtZik7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBudWxsOwogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIC8vIGNyZWF0ZSBFTQogICAgICAgICAgICBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIGFzc2VydE5v\ndE51bGwoZW0pOwogICAgICAgICAgICAvLyB2ZXJpZnkgY3JlYXRlZCBMaWZl\nY3ljbGVFdmVudE1hbmFnZXIgdHlwZQogICAgICAgICAgICBPcGVuSlBBQ29u\nZmlndXJhdGlvbiBjb25mID0gZW0uZ2V0Q29uZmlndXJhdGlvbigpOwogICAg\nICAgICAgICBhc3NlcnROb3ROdWxsKGNvbmYpOwogICAgICAgICAgICBhc3Nl\ncnRUcnVlKCJWYWxpZGF0aW9uTW9kZSIsCiAgICAgICAgICAgICAgICBjb25m\nLmdldFZhbGlkYXRpb25Nb2RlKCkuZXF1YWxzSWdub3JlQ2FzZSgiTk9ORSIp\nKTsKICAgICAgICAgICAgQ2xhc3M8Pz4gbGVtID0gY29uZi5nZXRMaWZlY3lj\nbGVFdmVudE1hbmFnZXJJbnN0YW5jZSgpLmdldENsYXNzKCk7CiAgICAgICAg\nICAgIGFzc2VydE5vdE51bGwobGVtKTsKICAgICAgICAgICAgYXNzZXJ0RmFs\nc2UoIkV4cGVjdGVkIGEgTGlmZWN5Y2xlRXZlbnRNYW5hZ2VyIGluc3RhbmNl\nIiwgCiAgICAgICAgICAgICAgICBWYWxpZGF0aW5nTGlmZWN5Y2xlRXZlbnRN\nYW5hZ2VyLmNsYXNzLmlzQXNzaWduYWJsZUZyb20obGVtKSk7CiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbCgiVW5l\neHBlY3RlZCB0ZXN0VmFsaWRhdGluZ0xFTTEoKSBleGNlcHRpb24gPSAiICsg\nZSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKChlbSAh\nPSBudWxsKSAmJiBlbS5pc09wZW4oKSkgewogICAgICAgICAgICAgICAgZW0u\nY2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjbGVhbnVwKGVt\nZik7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2NlbmFyaW8g\nYmVpbmcgdGVzdGVkOgogICAgICogICAyKSBNb2RlIG9mIEFVVE8gd2lsbCBj\ncmVhdGUgYSBWYWxpZGF0aW5nTGlmZWN5Y2xlRXZlbnRNYW5hZ2VyCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RWYWxpZGF0aW5nTEVNMigpIHsKICAg\nICAgICBnZXRMb2coKS50cmFjZSgidGVzdFZhbGlkYXRpbmdMRU0yKCkgLSBB\nVVRPIik7CiAgICAgICAgLy8gY3JlYXRlIG91ciBFTUYKICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0gKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeVNQSSkKICAgICAgICAgICAgT3BlbkpQQVBlcnNp\nc3RlbmNlLmNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KAogICAgICAgICAg\nICAgICAgInNpbXBsZS1hdXRvLW1vZGUiLAogICAgICAgICAgICAgICAgIm9y\nZy9hcGFjaGUvb3BlbmpwYS9pbnRlZ3JhdGlvbi92YWxpZGF0aW9uL3BlcnNp\nc3RlbmNlLnhtbCIpOwogICAgICAgIGFzc2VydE5vdE51bGwoZW1mKTsKICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IG51bGw7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgLy8gY3JlYXRlIEVNCiAgICAgICAgICAgIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgICAgYXNz\nZXJ0Tm90TnVsbChlbSk7CiAgICAgICAgICAgIC8vIHZlcmlmeSBjcmVhdGVk\nIExpZmVjeWNsZUV2ZW50TWFuYWdlciB0eXBlCiAgICAgICAgICAgIE9wZW5K\nUEFDb25maWd1cmF0aW9uIGNvbmYgPSBlbS5nZXRDb25maWd1cmF0aW9uKCk7\nCiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoY29uZik7CiAgICAgICAgICAg\nIGFzc2VydFRydWUoIlZhbGlkYXRpb25Nb2RlIiwKICAgICAgICAgICAgICAg\nIGNvbmYuZ2V0VmFsaWRhdGlvbk1vZGUoKS5lcXVhbHNJZ25vcmVDYXNlKCJB\nVVRPIikpOwogICAgICAgICAgICBDbGFzczw/PiBsZW0gPSBjb25mLmdldExp\nZmVjeWNsZUV2ZW50TWFuYWdlckluc3RhbmNlKCkuZ2V0Q2xhc3MoKTsKICAg\nICAgICAgICAgYXNzZXJ0Tm90TnVsbChsZW0pOwogICAgICAgICAgICBhc3Nl\ncnRUcnVlKCJFeHBlY3RlZCBhIFZhbGlkYXRpbmdMaWZlY3ljbGVFdmVudE1h\nbmFnZXIgaW5zdGFuY2UiLCAKICAgICAgICAgICAgICAgIFZhbGlkYXRpbmdM\naWZlY3ljbGVFdmVudE1hbmFnZXIuY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShs\nZW0pKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICBmYWlsKCJVbmV4cGVjdGVkIHRlc3RWYWxpZGF0aW5nTEVNMigpIGV4\nY2VwdGlvbiA9ICIgKyBlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICBpZiAoKGVtICE9IG51bGwpICYmIGVtLmlzT3BlbigpKSB7CiAgICAg\nICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGNsZWFudXAoZW1mKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTY2VuYXJpbyBiZWluZyB0ZXN0ZWQ6CiAgICAgKiAgIDMpIE1hcCBt\nb2RlIG9mIENBTExCQUNLIHdpbGwgY3JlYXRlIGEgVmFsaWRhdGluZ0xpZmVj\neWNsZUV2ZW50TWFuYWdlcgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nVmFsaWRhdGluZ0xFTTMoKSB7CiAgICAgICAgZ2V0TG9nKCkudHJhY2UoInRl\nc3RWYWxpZGF0aW5nTEVNMygpIC0gQ0FMTEJBQ0siKTsKICAgICAgICAvLyBj\ncmVhdGUgdGhlIE1hcCB0byB0ZXN0IG92ZXJyaWRlcwogICAgICAgIC8vICAg\nSnVzdCB1c2UgY3VycmVudCBjbGFzcyBvYmplY3QsIGFzIHdlIGhhdmUgbm8g\ncHJvdmlkZXIgdG8gdGVzdCB3aXRoCiAgICAgICAgTWFwPFN0cmluZyxPYmpl\nY3Q+IHByb3BzID0gbmV3IEhhc2hNYXA8U3RyaW5nLE9iamVjdD4oKTsKICAg\nICAgICBwcm9wcy5wdXQoImphdmF4LnBlcnNpc3RlbmNlLnZhbGlkYXRpb24u\nbW9kZSIsCiAgICAgICAgICAgIFN0cmluZy52YWx1ZU9mKFZhbGlkYXRpb25N\nb2RlLkNBTExCQUNLKSk7CiAgICAgICAgLy8gY3JlYXRlIG91ciBFTUYgdy8g\ncHJvcHMKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkg\nZW1mID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkKICAgICAg\nICAgICAgT3BlbkpQQVBlcnNpc3RlbmNlLmNyZWF0ZUVudGl0eU1hbmFnZXJG\nYWN0b3J5KAogICAgICAgICAgICAgICAgInNpbXBsZS1ub25lLW1vZGUiLAog\nICAgICAgICAgICAgICAgIm9yZy9hcGFjaGUvb3BlbmpwYS9pbnRlZ3JhdGlv\nbi92YWxpZGF0aW9uL3BlcnNpc3RlbmNlLnhtbCIsCiAgICAgICAgICAgICAg\nICBwcm9wcyk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbWYpOwogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gbnVsbDsKICAgICAgICB0cnkg\newogICAgICAgICAgICAvLyBjcmVhdGUgRU0KICAgICAgICAgICAgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBhc3NlcnRO\nb3ROdWxsKGVtKTsKICAgICAgICAgICAgLy8gdmVyaWZ5IGNyZWF0ZWQgTGlm\nZWN5Y2xlRXZlbnRNYW5hZ2VyIHR5cGUKICAgICAgICAgICAgT3BlbkpQQUNv\nbmZpZ3VyYXRpb24gY29uZiA9IGVtLmdldENvbmZpZ3VyYXRpb24oKTsKICAg\nICAgICAgICAgYXNzZXJ0Tm90TnVsbChjb25mKTsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZSgiVmFsaWRhdGlvbk1vZGUiLAogICAgICAgICAgICAgICAgY29u\nZi5nZXRWYWxpZGF0aW9uTW9kZSgpLmVxdWFsc0lnbm9yZUNhc2UoIkNBTExC\nQUNLIikpOwogICAgICAgICAgICBDbGFzczw/PiBsZW0gPSBjb25mLmdldExp\nZmVjeWNsZUV2ZW50TWFuYWdlckluc3RhbmNlKCkuZ2V0Q2xhc3MoKTsKICAg\nICAgICAgICAgYXNzZXJ0Tm90TnVsbChsZW0pOwogICAgICAgICAgICBhc3Nl\ncnRUcnVlKCJFeHBlY3RlZCBhIFZhbGlkYXRpbmdMaWZlY3ljbGVFdmVudE1h\nbmFnZXIgaW5zdGFuY2UiLCAKICAgICAgICAgICAgICAgIFZhbGlkYXRpbmdM\naWZlY3ljbGVFdmVudE1hbmFnZXIuY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShs\nZW0pKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICBmYWlsKCJVbmV4cGVjdGVkIHRlc3RWYWxpZGF0aW5nTEVNMygpIGV4\nY2VwdGlvbiA9ICIgKyBlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICBpZiAoKGVtICE9IG51bGwpICYmIGVtLmlzT3BlbigpKSB7CiAgICAg\nICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGNsZWFudXAoZW1mKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTY2VuYXJpbyBiZWluZyB0ZXN0ZWQ6CiAgICAgKiAgIDQpIFZlcmlm\neSBhIHBhc3NlZCBpbiBWYWxpZGF0b3JGYWN0b3J5IGlzIHVzZWQKICAgICAq\nLwogICAgcHVibGljIHZvaWQgdGVzdFZhbGlkYXRpbmdMRU00KCkgewogICAg\nICAgIGdldExvZygpLnRyYWNlKCJ0ZXN0VmFsaWRhdGluZ0xFTTQoKSAtIHBy\nb3ZpZGVkIFZhbGlkYXRvckZhY3RvcnkiKTsKICAgICAgICAvLyBjcmVhdGUg\nYSBkZWZhdWx0IGZhY3RvcnkgdG8gcGFzcyBpbgogICAgICAgIFZhbGlkYXRv\nckZhY3RvcnkgZmFjdG9yeSA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgZmFjdG9yeSA9IFZhbGlkYXRpb24uYnVpbGREZWZhdWx0VmFsaWRh\ndG9yRmFjdG9yeSgpOwogICAgICAgIH0gY2F0Y2ggKGphdmF4LnZhbGlkYXRp\nb24uVmFsaWRhdGlvbkV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGZhaWwo\nInRlc3RWYWxpZGF0aW5nTEVNNCgpIC0gbm8gdmFsaWRhdGlvbiBwcm92aWRl\ncnMgZm91bmQiICsgZSk7CiAgICAgICAgfQogICAgICAgIGFzc2VydE5vdE51\nbGwoZmFjdG9yeSk7CiAgICAgICAgLy8gY3JlYXRlIHRoZSBNYXAgdG8gdGVz\ndCBvdmVycmlkZXMKICAgICAgICBNYXA8U3RyaW5nLE9iamVjdD4gcHJvcHMg\nPSBuZXcgSGFzaE1hcDxTdHJpbmcsT2JqZWN0PigpOwogICAgICAgIHByb3Bz\nLnB1dCgiamF2YXgucGVyc2lzdGVuY2UudmFsaWRhdGlvbi5mYWN0b3J5Iiwg\nZmFjdG9yeSk7CiAgICAgICAgLy8gY3JlYXRlIG91ciBFTUYgdy8gcHJvcHMK\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0g\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkKICAgICAgICAgICAg\nT3BlbkpQQVBlcnNpc3RlbmNlLmNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5\nKAogICAgICAgICAgICAgICAgInNpbXBsZS1hdXRvLW1vZGUiLAogICAgICAg\nICAgICAgICAgIm9yZy9hcGFjaGUvb3BlbmpwYS9pbnRlZ3JhdGlvbi92YWxp\nZGF0aW9uL3BlcnNpc3RlbmNlLnhtbCIsCiAgICAgICAgICAgICAgICBwcm9w\ncyk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbWYpOwogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIGVtID0gbnVsbDsKICAgICAgICB0cnkgewogICAg\nICAgICAgICAvLyBjcmVhdGUgRU0KICAgICAgICAgICAgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBhc3NlcnROb3ROdWxs\nKGVtKTsKICAgICAgICAgICAgLy8gdmVyaWZ5IGV4cGVjdGVkIHZhbGlkYXRp\nb24gY29uZmlnIGl0ZW1zCiAgICAgICAgICAgIE9wZW5KUEFDb25maWd1cmF0\naW9uIGNvbmYgPSBlbS5nZXRDb25maWd1cmF0aW9uKCk7CiAgICAgICAgICAg\nIGFzc2VydE5vdE51bGwoY29uZik7CiAgICAgICAgICAgIGFzc2VydFRydWUo\nIlZhbGlkYXRpb25Nb2RlIiwKICAgICAgICAgICAgICAgIGNvbmYuZ2V0VmFs\naWRhdGlvbk1vZGUoKS5lcXVhbHNJZ25vcmVDYXNlKCJBVVRPIikpOwogICAg\nICAgICAgICBDbGFzczw/PiBsZW0gPSBjb25mLmdldExpZmVjeWNsZUV2ZW50\nTWFuYWdlckluc3RhbmNlKCkuZ2V0Q2xhc3MoKTsKICAgICAgICAgICAgYXNz\nZXJ0Tm90TnVsbChsZW0pOwogICAgICAgICAgICBhc3NlcnRUcnVlKCJFeHBl\nY3RlZCBhIFZhbGlkYXRpbmdMaWZlY3ljbGVFdmVudE1hbmFnZXIgaW5zdGFu\nY2UiLCAKICAgICAgICAgICAgICAgIFZhbGlkYXRpbmdMaWZlY3ljbGVFdmVu\ndE1hbmFnZXIuY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShsZW0pKTsKICAgICAg\nICAgICAgLy8gdmVyaWZ5IGZhY3RvcnkgbWF0Y2hlcwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoIkV4cGVjdGVkIHNhbWUgVmFsaWRhdG9yRmFjdG9yeSBp\nbnN0YW5jZSIsCiAgICAgICAgICAgICAgICBmYWN0b3J5LCBjb25mLmdldFZh\nbGlkYXRpb25GYWN0b3J5SW5zdGFuY2UoKSk7CiAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbCgiVW5leHBlY3RlZCB0\nZXN0VmFsaWRhdGluZ0xFTTQoKSBleGNlcHRpb24gPSAiICsgZSk7CiAgICAg\nICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKChlbSAhPSBudWxsKSAm\nJiBlbS5pc09wZW4oKSkgewogICAgICAgICAgICAgICAgZW0uY2xvc2UoKTsK\nICAgICAgICAgICAgfQogICAgICAgICAgICBjbGVhbnVwKGVtZik7CiAgICAg\nICAgfQogICAgfQoKICAgIAogICAgLyoqCiAgICAgKiBIZWxwZXIgbWV0aG9k\nIHRvIHJlbW92ZSBlbnRpdGllcyBhbmQgY2xvc2UgdGhlIGVtZiBhbiBhbnkg\nb3BlbiBlbSdzLgogICAgICogQHBhcmFtIGVtZgogICAgICovCiAgICBwcml2\nYXRlIHZvaWQgY2xlYW51cChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlT\nUEkgZW1mKSB7CiAgICAgICAgY2xlYXIoZW1mKTsKICAgICAgICBjbG9zZUVN\nRihlbWYpOwogICAgfSAgICAKCn0K\n","encoding":"base64"}

