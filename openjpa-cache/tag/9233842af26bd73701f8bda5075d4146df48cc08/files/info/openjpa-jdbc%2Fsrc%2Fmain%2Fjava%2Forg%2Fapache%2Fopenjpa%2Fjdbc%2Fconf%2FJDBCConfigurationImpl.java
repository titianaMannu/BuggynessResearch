{"sha":"f2b369e4a10cd190e13a25c3cf6c70c266366c54","node_id":"MDQ6QmxvYjIwNjM2NDpmMmIzNjllNGExMGNkMTkwZTEzYTI1YzNjZjZjNzBjMjY2MzY2YzU0","size":33258,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f2b369e4a10cd190e13a25c3cf6c70c266366c54","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mOwoKaW1wb3J0\nIGphdmEuc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRT\nZXQ7CmltcG9ydCBqYXZheC5zcWwuRGF0YVNvdXJjZTsKCmltcG9ydCBvcmcu\nYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uSW1wbDsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5CYXRjaGlu\nZ0NvbnN0cmFpbnRVcGRhdGVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMua2VybmVsLkJhdGNoaW5nT3BlcmF0aW9uT3JkZXJVcGRh\ndGVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2Vy\nbmVsLkVhZ2VyRmV0Y2hNb2RlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLmtlcm5lbC5KREJDQnJva2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5MUlNTaXplczsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5QZXNzaW1pc3RpY0xvY2tN\nYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVs\nLlVwZGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLk1hcHBpbmdEZWZhdWx0czsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLm1ldGEuTWFwcGluZ1JlcG9zaXRvcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuRGF0YVNvdXJjZUZhY3Rvcnk7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuRHJpdmVy\nRGF0YVNvdXJjZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5TY2hlbWFGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnlGYWN0b3J5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEZhY3Rvcnk7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlckltcGw7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkZpbmRlckNhY2hlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5QcmVwYXJlZFF1ZXJ5Q2FjaGU7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlQ29udGV4\ndDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5JbnRWYWx1\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5PYmplY3RW\nYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5QbHVn\naW5WYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Q\ncm9kdWN0RGVyaXZhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmNvbmYuU3RyaW5nTGlzdFZhbHVlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi5jb25mLlN0cmluZ1ZhbHVlOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5qZGJjLkNvbm5lY3Rpb25EZWNvcmF0b3I7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpkYmMuRGVjb3JhdGluZ0RhdGFT\nb3VyY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpkYmMuSkRC\nQ0xpc3RlbmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cu\nTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2Fs\naXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLk1ldGFEYXRh\nRmFjdG9yeTsKCi8qKgogKiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIHRo\nZSB7QGxpbmsgSkRCQ0NvbmZpZ3VyYXRpb259IGludGVyZmFjZS4KICoKICog\nQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgKICogQGF1dGhvciBBYmUgV2hp\ndGUKICovCnB1YmxpYyBjbGFzcyBKREJDQ29uZmlndXJhdGlvbkltcGwKICAg\nIGV4dGVuZHMgT3BlbkpQQUNvbmZpZ3VyYXRpb25JbXBsCiAgICBpbXBsZW1l\nbnRzIEpEQkNDb25maWd1cmF0aW9uIHsKCiAgICBwdWJsaWMgU3RyaW5nVmFs\ndWUgc2NoZW1hOwogICAgcHVibGljIFN0cmluZ0xpc3RWYWx1ZSBzY2hlbWFz\nOwogICAgcHVibGljIEludFZhbHVlIHRyYW5zYWN0aW9uSXNvbGF0aW9uOwog\nICAgcHVibGljIEludFZhbHVlIHJlc3VsdFNldFR5cGU7CiAgICBwdWJsaWMg\nSW50VmFsdWUgZmV0Y2hEaXJlY3Rpb247CiAgICBwdWJsaWMgRmV0Y2hNb2Rl\nVmFsdWUgZWFnZXJGZXRjaE1vZGU7CiAgICBwdWJsaWMgRmV0Y2hNb2RlVmFs\ndWUgc3ViY2xhc3NGZXRjaE1vZGU7CiAgICBwdWJsaWMgSW50VmFsdWUgbHJz\nU2l6ZTsKICAgIHB1YmxpYyBTdHJpbmdWYWx1ZSBzeW5jaHJvbml6ZU1hcHBp\nbmdzOwogICAgcHVibGljIE9iamVjdFZhbHVlIGpkYmNMaXN0ZW5lclBsdWdp\nbnM7CiAgICBwdWJsaWMgT2JqZWN0VmFsdWUgY29ubmVjdGlvbkRlY29yYXRv\nclBsdWdpbnM7CiAgICBwdWJsaWMgUGx1Z2luVmFsdWUgZGJkaWN0aW9uYXJ5\nUGx1Z2luOwogICAgcHVibGljIE9iamVjdFZhbHVlIHVwZGF0ZU1hbmFnZXJQ\nbHVnaW47CiAgICBwdWJsaWMgT2JqZWN0VmFsdWUgc2NoZW1hRmFjdG9yeVBs\ndWdpbjsKICAgIHB1YmxpYyBPYmplY3RWYWx1ZSBzcWxGYWN0b3J5UGx1Z2lu\nOwogICAgcHVibGljIE9iamVjdFZhbHVlIG1hcHBpbmdEZWZhdWx0c1BsdWdp\nbjsKICAgIHB1YmxpYyBQbHVnaW5WYWx1ZSBkcml2ZXJEYXRhU291cmNlUGx1\nZ2luOwogICAgcHVibGljIE1hcHBpbmdGYWN0b3J5VmFsdWUgbWFwcGluZ0Zh\nY3RvcnlQbHVnaW47CgogICAgLy8gdXNlZCBpbnRlcm5hbGx5CiAgICBwcml2\nYXRlIFN0cmluZyBmaXJzdFVzZXIgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJp\nbmcgZmlyc3RQYXNzID0gbnVsbDsKICAgIHByaXZhdGUgRGVjb3JhdGluZ0Rh\ndGFTb3VyY2UgZGF0YVNvdXJjZSA9IG51bGw7CiAgICBwcml2YXRlIERlY29y\nYXRpbmdEYXRhU291cmNlIGRhdGFTb3VyY2UyID0gbnVsbDsKCiAgICAvKioK\nICAgICAqIERlZmF1bHQgY29uc3RydWN0b3IuIEF0dGVtcHRzIHRvIGxvYWQg\nZGVmYXVsdCBwcm9wZXJ0aWVzLgogICAgICovCiAgICBwdWJsaWMgSkRCQ0Nv\nbmZpZ3VyYXRpb25JbXBsKCkgewogICAgICAgIHRoaXModHJ1ZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBA\ncGFyYW0gbG9hZEdsb2JhbHMgd2hldGhlciB0byBhdHRlbXB0IHRvIGxvYWQg\ndGhlIGdsb2JhbCBwcm9wZXJ0aWVzCiAgICAgKi8KICAgIHB1YmxpYyBKREJD\nQ29uZmlndXJhdGlvbkltcGwoYm9vbGVhbiBsb2FkR2xvYmFscykgewogICAg\nICAgIHRoaXModHJ1ZSwgbG9hZEdsb2JhbHMpOwogICAgfQoKICAgIC8qKgog\nICAgICogQ29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIGRlcml2\nYXRpb25zIHdoZXRoZXIgdG8gYXBwbHkgcHJvZHVjdCBkZXJpdmF0aW9ucwog\nICAgICogQHBhcmFtIGxvYWRHbG9iYWxzIHdoZXRoZXIgdG8gYXR0ZW1wdCB0\nbyBsb2FkIHRoZSBnbG9iYWwgcHJvcGVydGllcwogICAgICovCiAgICBwdWJs\naWMgSkRCQ0NvbmZpZ3VyYXRpb25JbXBsKGJvb2xlYW4gZGVyaXZhdGlvbnMs\nIGJvb2xlYW4gbG9hZEdsb2JhbHMpIHsKICAgICAgICBzdXBlcihmYWxzZSwg\nZmFsc2UpOwogICAgICAgIFN0cmluZ1tdIGFsaWFzZXM7CgogICAgICAgIHNj\naGVtYSA9IGFkZFN0cmluZygiamRiYy5TY2hlbWEiKTsKICAgICAgICBzY2hl\nbWFzID0gYWRkU3RyaW5nTGlzdCgiamRiYy5TY2hlbWFzIik7CgogICAgICAg\nIHRyYW5zYWN0aW9uSXNvbGF0aW9uID0gYWRkSW50KCJqZGJjLlRyYW5zYWN0\naW9uSXNvbGF0aW9uIik7CiAgICAgICAgYWxpYXNlcyA9IG5ldyBTdHJpbmdb\nXXsKICAgICAgICAgICAgImRlZmF1bHQiLCBTdHJpbmcudmFsdWVPZigtMSks\nCiAgICAgICAgICAgICJub25lIiwgU3RyaW5nLnZhbHVlT2YoQ29ubmVjdGlv\nbi5UUkFOU0FDVElPTl9OT05FKSwKICAgICAgICAgICAgInJlYWQtY29tbWl0\ndGVkIiwgU3RyaW5nLnZhbHVlT2YKICAgICAgICAgICAgKENvbm5lY3Rpb24u\nVFJBTlNBQ1RJT05fUkVBRF9DT01NSVRURUQpLAogICAgICAgICAgICAicmVh\nZC11bmNvbW1pdHRlZCIsIFN0cmluZy52YWx1ZU9mCiAgICAgICAgICAgIChD\nb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JFQURfVU5DT01NSVRURUQpLAogICAg\nICAgICAgICAicmVwZWF0YWJsZS1yZWFkIiwgU3RyaW5nLnZhbHVlT2YKICAg\nICAgICAgICAgKENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVQRUFUQUJMRV9S\nRUFEKSwKICAgICAgICAgICAgInNlcmlhbGl6YWJsZSIsIFN0cmluZy52YWx1\nZU9mKENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKQogICAg\nICAgIH07CiAgICAgICAgdHJhbnNhY3Rpb25Jc29sYXRpb24uc2V0QWxpYXNl\ncyhhbGlhc2VzKTsKICAgICAgICB0cmFuc2FjdGlvbklzb2xhdGlvbi5zZXRE\nZWZhdWx0KGFsaWFzZXNbMF0pOwogICAgICAgIHRyYW5zYWN0aW9uSXNvbGF0\naW9uLnNldCgtMSk7CiAgICAgICAgdHJhbnNhY3Rpb25Jc29sYXRpb24uc2V0\nQWxpYXNMaXN0Q29tcHJlaGVuc2l2ZSh0cnVlKTsKCiAgICAgICAgcmVzdWx0\nU2V0VHlwZSA9IGFkZEludCgiamRiYy5SZXN1bHRTZXRUeXBlIik7CiAgICAg\nICAgYWxpYXNlcyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAgImZvcndh\ncmQtb25seSIsIFN0cmluZy52YWx1ZU9mKFJlc3VsdFNldC5UWVBFX0ZPUldB\nUkRfT05MWSksCiAgICAgICAgICAgICJzY3JvbGwtc2Vuc2l0aXZlIiwgU3Ry\naW5nLnZhbHVlT2YKICAgICAgICAgICAgKFJlc3VsdFNldC5UWVBFX1NDUk9M\nTF9TRU5TSVRJVkUpLAogICAgICAgICAgICAic2Nyb2xsLWluc2Vuc2l0aXZl\nIiwgU3RyaW5nLnZhbHVlT2YKICAgICAgICAgICAgKFJlc3VsdFNldC5UWVBF\nX1NDUk9MTF9JTlNFTlNJVElWRSksCiAgICAgICAgfTsKICAgICAgICByZXN1\nbHRTZXRUeXBlLnNldEFsaWFzZXMoYWxpYXNlcyk7CiAgICAgICAgcmVzdWx0\nU2V0VHlwZS5zZXREZWZhdWx0KGFsaWFzZXNbMF0pOwogICAgICAgIHJlc3Vs\ndFNldFR5cGUuc2V0KFJlc3VsdFNldC5UWVBFX0ZPUldBUkRfT05MWSk7CiAg\nICAgICAgcmVzdWx0U2V0VHlwZS5zZXRBbGlhc0xpc3RDb21wcmVoZW5zaXZl\nKHRydWUpOwoKICAgICAgICBmZXRjaERpcmVjdGlvbiA9IGFkZEludCgiamRi\nYy5GZXRjaERpcmVjdGlvbiIpOwogICAgICAgIGFsaWFzZXMgPSBuZXcgU3Ry\naW5nW117CiAgICAgICAgICAgICJmb3J3YXJkIiwgU3RyaW5nLnZhbHVlT2Yo\nUmVzdWx0U2V0LkZFVENIX0ZPUldBUkQpLAogICAgICAgICAgICAicmV2ZXJz\nZSIsIFN0cmluZy52YWx1ZU9mKFJlc3VsdFNldC5GRVRDSF9SRVZFUlNFKSwK\nICAgICAgICAgICAgInVua25vd24iLCBTdHJpbmcudmFsdWVPZihSZXN1bHRT\nZXQuRkVUQ0hfVU5LTk9XTiksCiAgICAgICAgfTsKICAgICAgICBmZXRjaERp\ncmVjdGlvbi5zZXRBbGlhc2VzKGFsaWFzZXMpOwogICAgICAgIGZldGNoRGly\nZWN0aW9uLnNldERlZmF1bHQoYWxpYXNlc1swXSk7CiAgICAgICAgZmV0Y2hE\naXJlY3Rpb24uc2V0KFJlc3VsdFNldC5GRVRDSF9GT1JXQVJEKTsKICAgICAg\nICBmZXRjaERpcmVjdGlvbi5zZXRBbGlhc0xpc3RDb21wcmVoZW5zaXZlKHRy\ndWUpOwoKICAgICAgICBlYWdlckZldGNoTW9kZSA9IG5ldyBGZXRjaE1vZGVW\nYWx1ZSgiamRiYy5FYWdlckZldGNoTW9kZSIpOwogICAgICAgIGVhZ2VyRmV0\nY2hNb2RlLnNldERlZmF1bHQoRmV0Y2hNb2RlVmFsdWUuRUFHRVJfUEFSQUxM\nRUwpOwogICAgICAgIGVhZ2VyRmV0Y2hNb2RlLnNldChFYWdlckZldGNoTW9k\nZXMuRUFHRVJfUEFSQUxMRUwpOwogICAgICAgIGFkZFZhbHVlKGVhZ2VyRmV0\nY2hNb2RlKTsKCiAgICAgICAgc3ViY2xhc3NGZXRjaE1vZGUgPSBuZXcgRmV0\nY2hNb2RlVmFsdWUoImpkYmMuU3ViY2xhc3NGZXRjaE1vZGUiKTsKICAgICAg\nICBzdWJjbGFzc0ZldGNoTW9kZS5zZXREZWZhdWx0KEZldGNoTW9kZVZhbHVl\nLkVBR0VSX0pPSU4pOwogICAgICAgIHN1YmNsYXNzRmV0Y2hNb2RlLnNldChF\nYWdlckZldGNoTW9kZXMuRUFHRVJfSk9JTik7CiAgICAgICAgYWRkVmFsdWUo\nc3ViY2xhc3NGZXRjaE1vZGUpOwoKICAgICAgICBscnNTaXplID0gYWRkSW50\nKCJqZGJjLkxSU1NpemUiKTsKICAgICAgICBhbGlhc2VzID0gbmV3IFN0cmlu\nZ1tdewogICAgICAgICAgICAicXVlcnkiLCBTdHJpbmcudmFsdWVPZihMUlNT\naXplcy5TSVpFX1FVRVJZKSwKICAgICAgICAgICAgInVua25vd24iLCBTdHJp\nbmcudmFsdWVPZihMUlNTaXplcy5TSVpFX1VOS05PV04pLAogICAgICAgICAg\nICAibGFzdCIsIFN0cmluZy52YWx1ZU9mKExSU1NpemVzLlNJWkVfTEFTVCks\nCiAgICAgICAgfTsKICAgICAgICBscnNTaXplLnNldEFsaWFzZXMoYWxpYXNl\ncyk7CiAgICAgICAgbHJzU2l6ZS5zZXREZWZhdWx0KGFsaWFzZXNbMF0pOwog\nICAgICAgIGxyc1NpemUuc2V0KExSU1NpemVzLlNJWkVfUVVFUlkpOwogICAg\nICAgIGxyc1NpemUuc2V0QWxpYXNMaXN0Q29tcHJlaGVuc2l2ZSh0cnVlKTsK\nCiAgICAgICAgc3luY2hyb25pemVNYXBwaW5ncyA9IGFkZFN0cmluZygiamRi\nYy5TeW5jaHJvbml6ZU1hcHBpbmdzIik7CiAgICAgICAgYWxpYXNlcyA9IG5l\ndyBTdHJpbmdbXXsgImZhbHNlIiwgbnVsbCB9OwogICAgICAgIHN5bmNocm9u\naXplTWFwcGluZ3Muc2V0QWxpYXNlcyhhbGlhc2VzKTsKICAgICAgICBzeW5j\naHJvbml6ZU1hcHBpbmdzLnNldERlZmF1bHQoYWxpYXNlc1swXSk7CgogICAg\nICAgIGpkYmNMaXN0ZW5lclBsdWdpbnMgPSBhZGRQbHVnaW5MaXN0KCJqZGJj\nLkpEQkNMaXN0ZW5lcnMiKTsKICAgICAgICBqZGJjTGlzdGVuZXJQbHVnaW5z\nLnNldEluc3RhbnRpYXRpbmdHZXR0ZXIoImdldEpEQkNMaXN0ZW5lckluc3Rh\nbmNlcyIpOwoKICAgICAgICBjb25uZWN0aW9uRGVjb3JhdG9yUGx1Z2lucyA9\nIGFkZFBsdWdpbkxpc3QKICAgICAgICAgICAgKCJqZGJjLkNvbm5lY3Rpb25E\nZWNvcmF0b3JzIik7CiAgICAgICAgY29ubmVjdGlvbkRlY29yYXRvclBsdWdp\nbnMuc2V0SW5zdGFudGlhdGluZ0dldHRlcgogICAgICAgICAgICAoImdldENv\nbm5lY3Rpb25EZWNvcmF0b3JJbnN0YW5jZXMiKTsKCiAgICAgICAgZGJkaWN0\naW9uYXJ5UGx1Z2luID0gYWRkUGx1Z2luKCJqZGJjLkRCRGljdGlvbmFyeSIs\nIHRydWUpOwogICAgICAgIGFsaWFzZXMgPSBuZXcgU3RyaW5nW117CiAgICAg\nICAgICAgICJhY2Nlc3MiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3Fs\nLkFjY2Vzc0RpY3Rpb25hcnkiLAogICAgICAgICAgICAiZGIyIiwgIm9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EQjJEaWN0aW9uYXJ5IiwKICAgICAg\nICAgICAgImRlcmJ5IiwgIm9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5E\nZXJieURpY3Rpb25hcnkiLAogICAgICAgICAgICAiZW1wcmVzcyIsICJvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuRW1wcmVzc0RpY3Rpb25hcnkiLAog\nICAgICAgICAgICAiZm94cHJvIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5Gb3hQcm9EaWN0aW9uYXJ5IiwKICAgICAgICAgICAgImgyIiwgIm9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5IMkRpY3Rpb25hcnkiLAogICAg\nICAgICAgICAiaHNxbCIsICJvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwu\nSFNRTERpY3Rpb25hcnkiLAogICAgICAgICAgICAiaW5mb3JtaXgiLCAib3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkluZm9ybWl4RGljdGlvbmFyeSIs\nCiAgICAgICAgICAgICJpbmdyZXMiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLkluZ3Jlc0RpY3Rpb25hcnkiLAogICAgICAgICAgICAiamRhdGFz\ndG9yZSIsICJvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSkRhdGFTdG9y\nZURpY3Rpb25hcnkiLAogICAgICAgICAgICAibXlzcWwiLCAib3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc3FsLk15U1FMRGljdGlvbmFyeSIsCiAgICAgICAg\nICAgICJvcmFjbGUiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLk9y\nYWNsZURpY3Rpb25hcnkiLAogICAgICAgICAgICAicG9pbnRiYXNlIiwgIm9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Qb2ludGJhc2VEaWN0aW9uYXJ5\nIiwKICAgICAgICAgICAgInBvc3RncmVzIiwgIm9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5Qb3N0Z3Jlc0RpY3Rpb25hcnkiLAogICAgICAgICAgICAi\nc3Fsc2VydmVyIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TUUxT\nZXJ2ZXJEaWN0aW9uYXJ5IiwKICAgICAgICAgICAgInN5YmFzZSIsICJvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU3liYXNlRGljdGlvbmFyeSIsCiAg\nICAgICAgfTsKICAgICAgICBkYmRpY3Rpb25hcnlQbHVnaW4uc2V0QWxpYXNl\ncyhhbGlhc2VzKTsKICAgICAgICBkYmRpY3Rpb25hcnlQbHVnaW4uc2V0SW5z\ndGFudGlhdGluZ0dldHRlcigiZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UiKTsK\nCiAgICAgICAgdXBkYXRlTWFuYWdlclBsdWdpbiA9IGFkZFBsdWdpbigiamRi\nYy5VcGRhdGVNYW5hZ2VyIiwgdHJ1ZSk7CiAgICAgICAgYWxpYXNlcyA9IG5l\ndyBTdHJpbmdbXXsKICAgICAgICAgICAgImRlZmF1bHQiLAogICAgICAgICAg\nICBCYXRjaGluZ0NvbnN0cmFpbnRVcGRhdGVNYW5hZ2VyLmNsYXNzLmdldE5h\nbWUoKSwKICAgICAgICAgICAgIm9wZXJhdGlvbi1vcmRlciIsCiAgICAgICAg\nICAgICJvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuT3BlcmF0aW9u\nT3JkZXJVcGRhdGVNYW5hZ2VyIiwKICAgICAgICAgICAgImNvbnN0cmFpbnQi\nLAogICAgICAgICAgICAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVs\nLkNvbnN0cmFpbnRVcGRhdGVNYW5hZ2VyIiwKICAgICAgICAgICAgImJhdGNo\naW5nLWNvbnN0cmFpbnQiLAogICAgICAgICAgICBCYXRjaGluZ0NvbnN0cmFp\nbnRVcGRhdGVNYW5hZ2VyLmNsYXNzLmdldE5hbWUoKSwKICAgICAgICAgICAg\nImJhdGNoaW5nLW9wZXJhdGlvbi1vcmRlciIsCiAgICAgICAgICAgIEJhdGNo\naW5nT3BlcmF0aW9uT3JkZXJVcGRhdGVNYW5hZ2VyLmNsYXNzLmdldE5hbWUo\nKSwKICAgICAgICB9OwogICAgICAgIHVwZGF0ZU1hbmFnZXJQbHVnaW4uc2V0\nQWxpYXNlcyhhbGlhc2VzKTsKICAgICAgICB1cGRhdGVNYW5hZ2VyUGx1Z2lu\nLnNldERlZmF1bHQoYWxpYXNlc1swXSk7CiAgICAgICAgdXBkYXRlTWFuYWdl\nclBsdWdpbi5zZXRTdHJpbmcoYWxpYXNlc1swXSk7CiAgICAgICAgdXBkYXRl\nTWFuYWdlclBsdWdpbi5zZXRJbnN0YW50aWF0aW5nR2V0dGVyKCJnZXRVcGRh\ndGVNYW5hZ2VySW5zdGFuY2UiKTsKCiAgICAgICAgZHJpdmVyRGF0YVNvdXJj\nZVBsdWdpbiA9IGFkZFBsdWdpbigiamRiYy5Ecml2ZXJEYXRhU291cmNlIiwg\nZmFsc2UpOwogICAgICAgIGFsaWFzZXMgPSBuZXcgU3RyaW5nW117CiAgICAg\nICAgICAgICJzaW1wbGUiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLlNpbXBsZURyaXZlckRhdGFTb3VyY2UiLAogICAgICAgIH07CiAgICAg\nICAgZHJpdmVyRGF0YVNvdXJjZVBsdWdpbi5zZXRBbGlhc2VzKGFsaWFzZXMp\nOwogICAgICAgIGRyaXZlckRhdGFTb3VyY2VQbHVnaW4uc2V0RGVmYXVsdChh\nbGlhc2VzWzBdKTsKICAgICAgICBkcml2ZXJEYXRhU291cmNlUGx1Z2luLnNl\ndFN0cmluZyhhbGlhc2VzWzBdKTsKCiAgICAgICAgc2NoZW1hRmFjdG9yeVBs\ndWdpbiA9IGFkZFBsdWdpbigiamRiYy5TY2hlbWFGYWN0b3J5IiwgdHJ1ZSk7\nCiAgICAgICAgYWxpYXNlcyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAg\nImR5bmFtaWMiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkR5\nbmFtaWNTY2hlbWFGYWN0b3J5IiwKICAgICAgICAgICAgIm5hdGl2ZSIsICJv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuTGF6eVNjaGVtYUZhY3Rv\ncnkiLAogICAgICAgICAgICAiZmlsZSIsICJvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zY2hlbWEuRmlsZVNjaGVtYUZhY3RvcnkiLAogICAgICAgICAgICAi\ndGFibGUiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxl\nU2NoZW1hRmFjdG9yeSIsCiAgICAgICAgICAgIC8vIGRlcHJlY2F0ZWQgYWxp\nYXMKICAgICAgICAgICAgImRiIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5UYWJsZVNjaGVtYUZhY3RvcnkiLAogICAgICAgIH07CiAgICAg\nICAgc2NoZW1hRmFjdG9yeVBsdWdpbi5zZXRBbGlhc2VzKGFsaWFzZXMpOwog\nICAgICAgIHNjaGVtYUZhY3RvcnlQbHVnaW4uc2V0RGVmYXVsdChhbGlhc2Vz\nWzBdKTsKICAgICAgICBzY2hlbWFGYWN0b3J5UGx1Z2luLnNldFN0cmluZyhh\nbGlhc2VzWzBdKTsKICAgICAgICBzY2hlbWFGYWN0b3J5UGx1Z2luLnNldElu\nc3RhbnRpYXRpbmdHZXR0ZXIoImdldFNjaGVtYUZhY3RvcnlJbnN0YW5jZSIp\nOwoKICAgICAgICBzcWxGYWN0b3J5UGx1Z2luID0gYWRkUGx1Z2luKCJqZGJj\nLlNRTEZhY3RvcnkiLCB0cnVlKTsKICAgICAgICBhbGlhc2VzID0gbmV3IFN0\ncmluZ1tdewogICAgICAgICAgICAiZGVmYXVsdCIsICJvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zcWwuU1FMRmFjdG9yeUltcGwiLAogICAgICAgIH07CiAg\nICAgICAgc3FsRmFjdG9yeVBsdWdpbi5zZXRBbGlhc2VzKGFsaWFzZXMpOwog\nICAgICAgIHNxbEZhY3RvcnlQbHVnaW4uc2V0RGVmYXVsdChhbGlhc2VzWzBd\nKTsKICAgICAgICBzcWxGYWN0b3J5UGx1Z2luLnNldFN0cmluZyhhbGlhc2Vz\nWzBdKTsKICAgICAgICBzcWxGYWN0b3J5UGx1Z2luLnNldEluc3RhbnRpYXRp\nbmdHZXR0ZXIoImdldFNRTEZhY3RvcnlJbnN0YW5jZSIpOwoKICAgICAgICBt\nYXBwaW5nRmFjdG9yeVBsdWdpbiA9IG5ldyBNYXBwaW5nRmFjdG9yeVZhbHVl\nKCJqZGJjLk1hcHBpbmdGYWN0b3J5Iik7CiAgICAgICAgYWRkVmFsdWUobWFw\ncGluZ0ZhY3RvcnlQbHVnaW4pOwoKICAgICAgICBtYXBwaW5nRGVmYXVsdHNQ\nbHVnaW4gPSBhZGRQbHVnaW4oImpkYmMuTWFwcGluZ0RlZmF1bHRzIiwgdHJ1\nZSk7CiAgICAgICAgYWxpYXNlcyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAg\nICAgImRlZmF1bHQiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5N\nYXBwaW5nRGVmYXVsdHNJbXBsIiwKICAgICAgICB9OwogICAgICAgIG1hcHBp\nbmdEZWZhdWx0c1BsdWdpbi5zZXRBbGlhc2VzKGFsaWFzZXMpOwogICAgICAg\nIG1hcHBpbmdEZWZhdWx0c1BsdWdpbi5zZXREZWZhdWx0KGFsaWFzZXNbMF0p\nOwogICAgICAgIG1hcHBpbmdEZWZhdWx0c1BsdWdpbi5zZXRTdHJpbmcoYWxp\nYXNlc1swXSk7CiAgICAgICAgbWFwcGluZ0RlZmF1bHRzUGx1Z2luLnNldElu\nc3RhbnRpYXRpbmdHZXR0ZXIKICAgICAgICAgICAgKCJnZXRNYXBwaW5nRGVm\nYXVsdHNJbnN0YW5jZSIpOwoKICAgICAgICAvLyBzZXQgdXAgYnJva2VyIGZh\nY3RvcnkgZGVmYXVsdHMKICAgICAgICBicm9rZXJGYWN0b3J5UGx1Z2luLnNl\ndEFsaWFzKCJqZGJjIiwgSkRCQ0Jyb2tlckZhY3RvcnkuY2xhc3MuZ2V0TmFt\nZSgpKTsKICAgICAgICBicm9rZXJGYWN0b3J5UGx1Z2luLnNldERlZmF1bHQo\nImpkYmMiKTsKICAgICAgICBicm9rZXJGYWN0b3J5UGx1Z2luLnNldFN0cmlu\nZygiamRiYyIpOwoKICAgICAgICAvLyBzZXQgbmV3IGRlZmF1bHQgZm9yIG1h\ncHBpbmcgcmVwb3MKICAgICAgICBtZXRhUmVwb3NpdG9yeVBsdWdpbi5zZXRB\nbGlhcygiZGVmYXVsdCIsCiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5tZXRhLk1hcHBpbmdSZXBvc2l0b3J5Iik7CiAgICAgICAgbWV0\nYVJlcG9zaXRvcnlQbHVnaW4uc2V0RGVmYXVsdCgiZGVmYXVsdCIpOwogICAg\nICAgIG1ldGFSZXBvc2l0b3J5UGx1Z2luLnNldFN0cmluZygiZGVmYXVsdCIp\nOwoKICAgICAgICAvLyBzZXQgbmV3IGRlZmF1bHQgZm9yIGxvY2sgbWFuYWdl\ncgogICAgICAgIGxvY2tNYW5hZ2VyUGx1Z2luLnNldEFsaWFzKCJwZXNzaW1p\nc3RpYyIsCiAgICAgICAgICAgIFBlc3NpbWlzdGljTG9ja01hbmFnZXIuY2xh\nc3MuZ2V0TmFtZSgpKTsKICAgICAgICBsb2NrTWFuYWdlclBsdWdpbi5zZXRE\nZWZhdWx0KCJwZXNzaW1pc3RpYyIpOwogICAgICAgIGxvY2tNYW5hZ2VyUGx1\nZ2luLnNldFN0cmluZygicGVzc2ltaXN0aWMiKTsKCiAgICAgICAgLy8gbmF0\naXZlIHNhdmVwb2ludCBtYW5hZ2VyIG9wdGlvbnMKICAgICAgICBzYXZlcG9p\nbnRNYW5hZ2VyUGx1Z2luLnNldEFsaWFzKCJqZGJjIiwKICAgICAgICAgICAg\nIm9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDM1NhdmVwb2lu\ndE1hbmFnZXIiKTsKCiAgICAgICAgLy8gc2V0IG5ldyBhbGlhc2VzIGFuZCBk\nZWZhdWx0cyBmb3Igc2VxdWVuY2UKICAgICAgICBzZXFQbHVnaW4uc2V0QWxp\nYXNlcyhKREJDU2VxVmFsdWUuQUxJQVNFUyk7CiAgICAgICAgc2VxUGx1Z2lu\nLnNldERlZmF1bHQoSkRCQ1NlcVZhbHVlLkFMSUFTRVNbMF0pOwogICAgICAg\nIHNlcVBsdWdpbi5zZXRTdHJpbmcoSkRCQ1NlcVZhbHVlLkFMSUFTRVNbMF0p\nOwogICAgICAgIAogICAgICAgIC8vIFRoaXMgcGx1Zy1pbiBpcyBkZWNsYXJl\nZCBpbiBzdXBlcmNsYXNzIGJ1dCBkZWZpbmVkIGhlcmUKICAgICAgICAvLyBi\nZWNhdXNlIFByZXBhcmVkUXVlcnlDYWNoZSBpcyBjdXJyZW50bHkgYXZhaWxh\nYmxlIGZvciBKREJDCiAgICAgICAgLy8gYmFja2VuZCBvbmx5CiAgICAgICAg\ncHJlcGFyZWRRdWVyeUNhY2hlUGx1Z2luID0gYWRkUGx1Z2luKCJqZGJjLlF1\nZXJ5U1FMQ2FjaGUiLCB0cnVlKTsKICAgICAgICBhbGlhc2VzID0gbmV3IFN0\ncmluZ1tdIHsKICAgICAgICAgICAgInRydWUiLCAib3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMua2VybmVsLlByZXBhcmVkUXVlcnlDYWNoZUltcGwiLAogICAg\nICAgICAgICAiZmFsc2UiLCBudWxsCiAgICAgICAgfTsKICAgICAgICBwcmVw\nYXJlZFF1ZXJ5Q2FjaGVQbHVnaW4uc2V0QWxpYXNlcyhhbGlhc2VzKTsKICAg\nICAgICBwcmVwYXJlZFF1ZXJ5Q2FjaGVQbHVnaW4uc2V0QWxpYXNMaXN0Q29t\ncHJlaGVuc2l2ZSh0cnVlKTsKICAgICAgICBwcmVwYXJlZFF1ZXJ5Q2FjaGVQ\nbHVnaW4uc2V0RGVmYXVsdChhbGlhc2VzWzBdKTsKICAgICAgICBwcmVwYXJl\nZFF1ZXJ5Q2FjaGVQbHVnaW4uc2V0Q2xhc3NOYW1lKGFsaWFzZXNbMV0pOwog\nICAgICAgIHByZXBhcmVkUXVlcnlDYWNoZVBsdWdpbi5zZXREeW5hbWljKHRy\ndWUpOwogICAgICAgIHByZXBhcmVkUXVlcnlDYWNoZVBsdWdpbi5zZXRJbnN0\nYW50aWF0aW5nR2V0dGVyKAogICAgICAgICAgICAgICAgImdldFF1ZXJ5U1FM\nQ2FjaGVJbnN0YW5jZSIpOwoKICAgICAgICBmaW5kZXJDYWNoZVBsdWdpbiA9\nIGFkZFBsdWdpbigiamRiYy5GaW5kZXJDYWNoZSIsIHRydWUpOwogICAgICAg\nIGFsaWFzZXMgPSBuZXcgU3RyaW5nW10gewogICAgICAgICAgICAidHJ1ZSIs\nICJvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuRmluZGVyQ2FjaGVJ\nbXBsIiwKICAgICAgICAgICAgImZhbHNlIiwgbnVsbAogICAgICAgIH07CiAg\nICAgICAgZmluZGVyQ2FjaGVQbHVnaW4uc2V0QWxpYXNlcyhhbGlhc2VzKTsK\nICAgICAgICBmaW5kZXJDYWNoZVBsdWdpbi5zZXRBbGlhc0xpc3RDb21wcmVo\nZW5zaXZlKHRydWUpOwogICAgICAgIGZpbmRlckNhY2hlUGx1Z2luLnNldERl\nZmF1bHQoYWxpYXNlc1swXSk7CiAgICAgICAgZmluZGVyQ2FjaGVQbHVnaW4u\nc2V0Q2xhc3NOYW1lKGFsaWFzZXNbMV0pOwogICAgICAgIGZpbmRlckNhY2hl\nUGx1Z2luLnNldER5bmFtaWModHJ1ZSk7CiAgICAgICAgZmluZGVyQ2FjaGVQ\nbHVnaW4uc2V0SW5zdGFudGlhdGluZ0dldHRlcigiZ2V0RmluZGVyQ2FjaGVJ\nbnN0YW5jZSIpOwoKICAgICAgICAvLyB0aGlzIHN0YXRpYyBpbml0aWFsaXpl\nciBpcyB0byBnZXQgcGFzdCBhIHdlaXJkCiAgICAgICAgLy8gQ2xhc3NDaXJj\ndWxhcml0eUVycm9yIHRoYXQgaGFwcGVucyBvbmx5IHVuZGVyIElCTSdzCiAg\nICAgICAgLy8gSkRLIDEuMy4xIG9uIExpbnV4IGZyb20gd2l0aGluIHRoZSBK\nUnVuIENsYXNzTG9hZGVyOwogICAgICAgIC8vIHdoaWxlIGV4YWN0IGNhdXNl\ncyBhcmUgdW5rbm93biwgaXQgaXMgYWxtb3N0IGNlcnRhaW5seQogICAgICAg\nIC8vIGEgYnVnIGluIEpSdW4sIGFuZCB3ZSBjYW4gZ2V0IGFyb3VuZCBpdCBi\neSBmb3JjaW5nCiAgICAgICAgLy8gSW5zdHJ1Y3Rpb24uY2xhc3MgdG8gYmUg\nbG9hZGVkIGFuZCBpbml0aWFsaXplZAogICAgICAgIC8vIGJlZm9yZSBUeXBl\nZEluc3RydWN0aW9uLmNsYXNzCiAgICAgICAgdHJ5IHsgc2VycC5ieXRlY29k\nZS5sb3dsZXZlbC5FbnRyeS5jbGFzcy5nZXROYW1lKCk7IH0gCiAgICAgICAg\nY2F0Y2ggKFRocm93YWJsZSB0KSB7fQogICAgICAgIHRyeSB7IHNlcnAuYnl0\nZWNvZGUuSW5zdHJ1Y3Rpb24uY2xhc3MuZ2V0TmFtZSgpOyB9IAogICAgICAg\nIGNhdGNoIChUaHJvd2FibGUgdCkge30KCiAgICAgICAgc3VwcG9ydGVkT3B0\naW9ucygpLmFkZChPUFRJT05fUVVFUllfU1FMKTsKICAgICAgICBzdXBwb3J0\nZWRPcHRpb25zKCkuYWRkKE9QVElPTl9KREJDX0NPTk5FQ1RJT04pOwogICAg\nICAgIHN1cHBvcnRlZE9wdGlvbnMoKS5yZW1vdmUoT1BUSU9OX1ZBTFVFX0lO\nQ1JFTUVOVCk7CiAgICAgICAgc3VwcG9ydGVkT3B0aW9ucygpLnJlbW92ZShP\nUFRJT05fTlVMTF9DT05UQUlORVIpOwoKICAgICAgICBpZiAoZGVyaXZhdGlv\nbnMpCiAgICAgICAgICAgIFByb2R1Y3REZXJpdmF0aW9ucy5iZWZvcmVDb25m\naWd1cmF0aW9uTG9hZCh0aGlzKTsKICAgICAgICBpZiAobG9hZEdsb2JhbHMp\nCiAgICAgICAgICAgIGxvYWRHbG9iYWxzKCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDb3B5IGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIHB1YmxpYyBKREJD\nQ29uZmlndXJhdGlvbkltcGwoSkRCQ0NvbmZpZ3VyYXRpb24gY29uZikgewog\nICAgICAgIHRoaXModHJ1ZSwgZmFsc2UpOwogICAgICAgIGlmIChjb25mICE9\nIG51bGwpCiAgICAgICAgICAgIGZyb21Qcm9wZXJ0aWVzKGNvbmYudG9Qcm9w\nZXJ0aWVzKGZhbHNlKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0U2No\nZW1hKFN0cmluZyBzY2hlbWEpIHsKICAgICAgICB0aGlzLnNjaGVtYS5zZXRT\ndHJpbmcoc2NoZW1hKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFNj\naGVtYSgpIHsKICAgICAgICByZXR1cm4gc2NoZW1hLmdldFN0cmluZygpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFNjaGVtYXMoU3RyaW5nIHNjaGVt\nYXMpIHsKICAgICAgICB0aGlzLnNjaGVtYXMuc2V0U3RyaW5nKHNjaGVtYXMp\nOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0U2NoZW1hcygpIHsKICAg\nICAgICByZXR1cm4gc2NoZW1hcy5nZXRTdHJpbmcoKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRTY2hlbWFzKFN0cmluZ1tdIHNjaGVtYXMpIHsKICAg\nICAgICB0aGlzLnNjaGVtYXMuc2V0KHNjaGVtYXMpOwogICAgfQoKICAgIHB1\nYmxpYyBTdHJpbmdbXSBnZXRTY2hlbWFzTGlzdCgpIHsKICAgICAgICByZXR1\ncm4gc2NoZW1hcy5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRU\ncmFuc2FjdGlvbklzb2xhdGlvbihTdHJpbmcgdHJhbnNhY3Rpb25Jc29sYXRp\nb24pIHsKICAgICAgICB0aGlzLnRyYW5zYWN0aW9uSXNvbGF0aW9uLnNldFN0\ncmluZyh0cmFuc2FjdGlvbklzb2xhdGlvbik7CiAgICB9CgogICAgcHVibGlj\nIFN0cmluZyBnZXRUcmFuc2FjdGlvbklzb2xhdGlvbigpIHsKICAgICAgICBy\nZXR1cm4gdHJhbnNhY3Rpb25Jc29sYXRpb24uZ2V0U3RyaW5nKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0VHJhbnNhY3Rpb25Jc29sYXRpb24oaW50\nIHRyYW5zYWN0aW9uSXNvbGF0aW9uKSB7CiAgICAgICAgdGhpcy50cmFuc2Fj\ndGlvbklzb2xhdGlvbi5zZXQodHJhbnNhY3Rpb25Jc29sYXRpb24pOwogICAg\nfQoKICAgIHB1YmxpYyBpbnQgZ2V0VHJhbnNhY3Rpb25Jc29sYXRpb25Db25z\ndGFudCgpIHsKICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Jc29sYXRpb24u\nZ2V0KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UmVzdWx0U2V0VHlw\nZShTdHJpbmcgcmVzdWx0U2V0VHlwZSkgewogICAgICAgIHRoaXMucmVzdWx0\nU2V0VHlwZS5zZXRTdHJpbmcocmVzdWx0U2V0VHlwZSk7CiAgICB9CgogICAg\ncHVibGljIFN0cmluZyBnZXRSZXN1bHRTZXRUeXBlKCkgewogICAgICAgIHJl\ndHVybiByZXN1bHRTZXRUeXBlLmdldFN0cmluZygpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldFJlc3VsdFNldFR5cGUoaW50IHJlc3VsdFNldFR5cGUp\nIHsKICAgICAgICB0aGlzLnJlc3VsdFNldFR5cGUuc2V0KHJlc3VsdFNldFR5\ncGUpOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0UmVzdWx0U2V0VHlwZUNv\nbnN0YW50KCkgewogICAgICAgIHJldHVybiByZXN1bHRTZXRUeXBlLmdldCgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEZldGNoRGlyZWN0aW9uKFN0\ncmluZyBmZXRjaERpcmVjdGlvbikgewogICAgICAgIHRoaXMuZmV0Y2hEaXJl\nY3Rpb24uc2V0U3RyaW5nKGZldGNoRGlyZWN0aW9uKTsKICAgIH0KCiAgICBw\ndWJsaWMgU3RyaW5nIGdldEZldGNoRGlyZWN0aW9uKCkgewogICAgICAgIHJl\ndHVybiBmZXRjaERpcmVjdGlvbi5nZXRTdHJpbmcoKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRGZXRjaERpcmVjdGlvbihpbnQgZmV0Y2hEaXJlY3Rp\nb24pIHsKICAgICAgICB0aGlzLmZldGNoRGlyZWN0aW9uLnNldChmZXRjaERp\ncmVjdGlvbik7CiAgICB9CgogICAgcHVibGljIGludCBnZXRGZXRjaERpcmVj\ndGlvbkNvbnN0YW50KCkgewogICAgICAgIHJldHVybiBmZXRjaERpcmVjdGlv\nbi5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRFYWdlckZldGNo\nTW9kZShTdHJpbmcgZWFnZXJGZXRjaE1vZGUpIHsKICAgICAgICB0aGlzLmVh\nZ2VyRmV0Y2hNb2RlLnNldFN0cmluZyhlYWdlckZldGNoTW9kZSk7CiAgICB9\nCgogICAgcHVibGljIFN0cmluZyBnZXRFYWdlckZldGNoTW9kZSgpIHsKICAg\nICAgICByZXR1cm4gZWFnZXJGZXRjaE1vZGUuZ2V0U3RyaW5nKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0RWFnZXJGZXRjaE1vZGUoaW50IGVhZ2Vy\nRmV0Y2hNb2RlKSB7CiAgICAgICAgdGhpcy5lYWdlckZldGNoTW9kZS5zZXQo\nZWFnZXJGZXRjaE1vZGUpOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0RWFn\nZXJGZXRjaE1vZGVDb25zdGFudCgpIHsKICAgICAgICByZXR1cm4gZWFnZXJG\nZXRjaE1vZGUuZ2V0KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0U3Vi\nY2xhc3NGZXRjaE1vZGUoU3RyaW5nIHN1YmNsYXNzRmV0Y2hNb2RlKSB7CiAg\nICAgICAgdGhpcy5zdWJjbGFzc0ZldGNoTW9kZS5zZXRTdHJpbmcoc3ViY2xh\nc3NGZXRjaE1vZGUpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3Vi\nY2xhc3NGZXRjaE1vZGUoKSB7CiAgICAgICAgcmV0dXJuIHN1YmNsYXNzRmV0\nY2hNb2RlLmdldFN0cmluZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndFN1YmNsYXNzRmV0Y2hNb2RlKGludCBzdWJjbGFzc0ZldGNoTW9kZSkgewog\nICAgICAgIHRoaXMuc3ViY2xhc3NGZXRjaE1vZGUuc2V0KHN1YmNsYXNzRmV0\nY2hNb2RlKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFN1YmNsYXNzRmV0\nY2hNb2RlQ29uc3RhbnQoKSB7CiAgICAgICAgcmV0dXJuIHN1YmNsYXNzRmV0\nY2hNb2RlLmdldCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldExSU1Np\nemUoU3RyaW5nIGxyc1NpemUpIHsKICAgICAgICB0aGlzLmxyc1NpemUuc2V0\nU3RyaW5nKGxyc1NpemUpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0\nTFJTU2l6ZSgpIHsKICAgICAgICByZXR1cm4gbHJzU2l6ZS5nZXRTdHJpbmco\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRMUlNTaXplKGludCBscnNT\naXplKSB7CiAgICAgICAgdGhpcy5scnNTaXplLnNldChscnNTaXplKTsKICAg\nIH0KCiAgICBwdWJsaWMgaW50IGdldExSU1NpemVDb25zdGFudCgpIHsKICAg\nICAgICByZXR1cm4gbHJzU2l6ZS5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRTeW5jaHJvbml6ZU1hcHBpbmdzKFN0cmluZyBzeW5jaHJvbml6\nZU1hcHBpbmdzKSB7CiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZU1hcHBpbmdz\nLnNldChzeW5jaHJvbml6ZU1hcHBpbmdzKTsKICAgIH0KCiAgICBwdWJsaWMg\nU3RyaW5nIGdldFN5bmNocm9uaXplTWFwcGluZ3MoKSB7CiAgICAgICAgcmV0\ndXJuIHN5bmNocm9uaXplTWFwcGluZ3MuZ2V0KCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0SkRCQ0xpc3RlbmVycyhTdHJpbmcgamRiY0xpc3RlbmVy\ncykgewogICAgICAgIGpkYmNMaXN0ZW5lclBsdWdpbnMuc2V0U3RyaW5nKGpk\nYmNMaXN0ZW5lcnMpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0SkRC\nQ0xpc3RlbmVycygpIHsKICAgICAgICByZXR1cm4gamRiY0xpc3RlbmVyUGx1\nZ2lucy5nZXRTdHJpbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRK\nREJDTGlzdGVuZXJzKEpEQkNMaXN0ZW5lcltdIGxpc3RlbmVycykgewogICAg\nICAgIGpkYmNMaXN0ZW5lclBsdWdpbnMuc2V0KGxpc3RlbmVycyk7CiAgICB9\nCgogICAgcHVibGljIEpEQkNMaXN0ZW5lcltdIGdldEpEQkNMaXN0ZW5lcklu\nc3RhbmNlcygpIHsKICAgICAgICBpZiAoamRiY0xpc3RlbmVyUGx1Z2lucy5n\nZXQoKSA9PSBudWxsKQogICAgICAgICAgICBqZGJjTGlzdGVuZXJQbHVnaW5z\nLmluc3RhbnRpYXRlKEpEQkNMaXN0ZW5lci5jbGFzcywgdGhpcyk7CiAgICAg\nICAgcmV0dXJuIChKREJDTGlzdGVuZXJbXSkgamRiY0xpc3RlbmVyUGx1Z2lu\ncy5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRDb25uZWN0aW9u\nRGVjb3JhdG9ycyhTdHJpbmcgY29ubmVjdGlvbkRlY29yYXRvcnMpIHsKICAg\nICAgICBjb25uZWN0aW9uRGVjb3JhdG9yUGx1Z2lucy5zZXRTdHJpbmcoY29u\nbmVjdGlvbkRlY29yYXRvcnMpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcg\nZ2V0Q29ubmVjdGlvbkRlY29yYXRvcnMoKSB7CiAgICAgICAgcmV0dXJuIGNv\nbm5lY3Rpb25EZWNvcmF0b3JQbHVnaW5zLmdldFN0cmluZygpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldENvbm5lY3Rpb25EZWNvcmF0b3JzKENvbm5l\nY3Rpb25EZWNvcmF0b3JbXSBkZWNvcmF0b3JzKSB7CiAgICAgICAgY29ubmVj\ndGlvbkRlY29yYXRvclBsdWdpbnMuc2V0KGRlY29yYXRvcnMpOwogICAgfQoK\nICAgIHB1YmxpYyBDb25uZWN0aW9uRGVjb3JhdG9yW10gZ2V0Q29ubmVjdGlv\nbkRlY29yYXRvckluc3RhbmNlcygpIHsKICAgICAgICBpZiAoY29ubmVjdGlv\nbkRlY29yYXRvclBsdWdpbnMuZ2V0KCkgPT0gbnVsbCkgewogICAgICAgICAg\nICBjb25uZWN0aW9uRGVjb3JhdG9yUGx1Z2lucy5pbnN0YW50aWF0ZQogICAg\nICAgICAgICAgICAgKENvbm5lY3Rpb25EZWNvcmF0b3IuY2xhc3MsIHRoaXMp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKENvbm5lY3Rpb25EZWNvcmF0\nb3JbXSkgY29ubmVjdGlvbkRlY29yYXRvclBsdWdpbnMuZ2V0KCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0REJEaWN0aW9uYXJ5KFN0cmluZyBkYmRp\nY3Rpb25hcnkpIHsKICAgICAgICBkYmRpY3Rpb25hcnlQbHVnaW4uc2V0U3Ry\naW5nKGRiZGljdGlvbmFyeSk7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBn\nZXREQkRpY3Rpb25hcnkoKSB7CiAgICAgICAgcmV0dXJuIGRiZGljdGlvbmFy\neVBsdWdpbi5nZXRTdHJpbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXREQkRpY3Rpb25hcnkoREJEaWN0aW9uYXJ5IGRiZGljdGlvbmFyeSkgewog\nICAgICAgIC8vIHdlIGNhbid0IGFsbG93IHRoZSBkaWN0aW9uYXJ5IHRvIGJl\nIHNldCBhZnRlciB0aGUgY29ubmVjdGlvbgogICAgICAgIC8vIGZhY3Rvcnks\nIGR1ZSB0byBpbml0aWFsaXphdGlvbiBpc3N1ZXMKICAgICAgICBpZiAoY29u\nbmVjdGlvbkZhY3RvcnkuZ2V0KCkgIT0gbnVsbAogICAgICAgICAgICB8fCBj\nb25uZWN0aW9uRmFjdG9yeTIuZ2V0KCkgIT0gbnVsbCkKICAgICAgICAgICAg\ndGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwoKICAgICAgICBk\nYmRpY3Rpb25hcnlQbHVnaW4uc2V0KGRiZGljdGlvbmFyeSk7CiAgICB9Cgog\nICAgcHVibGljIERCRGljdGlvbmFyeSBnZXREQkRpY3Rpb25hcnlJbnN0YW5j\nZSgpIHsKICAgICAgICAvLyBsb2NrIG9uIGNvbm5lY3Rpb24gZmFjdG9yeSBu\nYW1lLCBzaW5jZSBnZXR0aW5nIHRoZSBjb25uZWN0aW9uCiAgICAgICAgLy8g\nZmFjdG9yeSBhbmQgZ2V0dGluZyB0aGUgZGljdGlvbmFyeSBoYXZlIHRvIHVz\nZSB0aGUgc2FtZSBsb2NrcyB0bwogICAgICAgIC8vIHByZXZlbnQgZGVhZGxv\nY2sgc2luY2UgdGhleSBjYWxsIGVhY2ggb3RoZXIKICAgICAgICBEQkRpY3Rp\nb25hcnkgZGJkaWN0aW9uYXJ5ID0gKERCRGljdGlvbmFyeSkgZGJkaWN0aW9u\nYXJ5UGx1Z2luLmdldCgpOwogICAgICAgIGlmIChkYmRpY3Rpb25hcnkgPT0g\nbnVsbCkgewogICAgICAgICAgICBTdHJpbmcgY2xzTmFtZSA9IGRiZGljdGlv\nbmFyeVBsdWdpbi5nZXRDbGFzc05hbWUoKTsKICAgICAgICAgICAgU3RyaW5n\nIHByb3BzID0gZGJkaWN0aW9uYXJ5UGx1Z2luLmdldFByb3BlcnRpZXMoKTsK\nICAgICAgICAgICAgaWYgKCFTdHJpbmdVdGlscy5pc0VtcHR5KGNsc05hbWUp\nKSB7CiAgICAgICAgICAgICAgICBkYmRpY3Rpb25hcnkgPSBEQkRpY3Rpb25h\ncnlGYWN0b3J5Lm5ld0RCRGljdGlvbmFyeQogICAgICAgICAgICAgICAgICAg\nICh0aGlzLCBjbHNOYW1lLCBwcm9wcyk7CiAgICAgICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZGljdGlvbmFyeSBjbGFzcyBp\nc24ndCBzZXQsIHRyeSB0byBndWVzcyBmcm9tCiAgICAgICAgICAgICAgICAv\nLyBjb25uZWN0aW9uIFVSTCBhbmQgZHJpdmVyIG5hbWUKICAgICAgICAgICAg\nICAgIGRiZGljdGlvbmFyeSA9IERCRGljdGlvbmFyeUZhY3RvcnkuY2FsY3Vs\nYXRlREJEaWN0aW9uYXJ5CiAgICAgICAgICAgICAgICAgICAgKHRoaXMsIGdl\ndENvbm5lY3Rpb25VUkwoKSwgZ2V0Q29ubmVjdGlvbkRyaXZlck5hbWUoKSwK\nICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMpOwoKICAgICAgICAgICAg\nICAgIC8vIGlmIHRoZSB1cmwgYW5kIGRyaXZlciBuYW1lIGFyZW4ndCBlbm91\nZ2gsIGNvbm5lY3QgdG8KICAgICAgICAgICAgICAgIC8vIHRoZSBEQiBhbmQg\ndXNlIHRoZSBjb25uZWN0aW9uIG1ldGFkYXRhCiAgICAgICAgICAgICAgICBp\nZiAoZGJkaWN0aW9uYXJ5ID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAg\nICBMb2cgbG9nID0gZ2V0TG9nKExPR19KREJDKTsKICAgICAgICAgICAgICAg\nICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgTG9jYWxpemVyIGxvYyA9IExvY2FsaXplci5mb3JQYWNr\nYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoSkRCQ0NvbmZpZ3Vy\nYXRpb25JbXBsLmNsYXNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9n\nLnRyYWNlKGxvYy5nZXQoImNvbm5lY3RpbmctZm9yLWRpY3Rpb25hcnkiKSk7\nCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAv\nLyB1c2UgdGhlIGJhc2UgY29ubmVjdGlvbiBmYWN0b3J5IHJhdGhlciB0aGFu\nIHRoZQogICAgICAgICAgICAgICAgICAgIC8vIGNvbmZpZ3VyZWQgZGF0YSBz\nb3VyY2UgYi9jIHRoZSBkYXRhIHNvdXJjZSByZWxpZXMKICAgICAgICAgICAg\nICAgICAgICAvLyBvbiBwYXNzaW5nIHRoZSBjb25uZWN0aW9uIHRocm91Z2gg\ndGhlIGRpY3Rpb25hcnksCiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0\naW5nIGluIGluZmluaXRlIGxvb3BzCiAgICAgICAgICAgICAgICAgICAgRGF0\nYVNvdXJjZSBkcyA9IGNyZWF0ZUNvbm5lY3Rpb25GYWN0b3J5KCk7CiAgICAg\nICAgICAgICAgICAgICAgZGJkaWN0aW9uYXJ5ID0gREJEaWN0aW9uYXJ5RmFj\ndG9yeS5uZXdEQkRpY3Rpb25hcnkKICAgICAgICAgICAgICAgICAgICAgICAg\nKHRoaXMsIGdldERhdGFTb3VyY2UobnVsbCwgZHMpLCBwcm9wcyk7CiAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGJkaWN0\naW9uYXJ5UGx1Z2luLnNldChkYmRpY3Rpb25hcnksIHRydWUpOwogICAgICAg\nIH0KICAgICAgICByZXR1cm4gZGJkaWN0aW9uYXJ5OwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldFVwZGF0ZU1hbmFnZXIoU3RyaW5nIHVwZGF0ZU1hbmFn\nZXIpIHsKICAgICAgICB1cGRhdGVNYW5hZ2VyUGx1Z2luLnNldFN0cmluZyh1\ncGRhdGVNYW5hZ2VyKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFVw\nZGF0ZU1hbmFnZXIoKSB7CiAgICAgICAgcmV0dXJuIHVwZGF0ZU1hbmFnZXJQ\nbHVnaW4uZ2V0U3RyaW5nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nVXBkYXRlTWFuYWdlcihVcGRhdGVNYW5hZ2VyIHVwZGF0ZU1hbmFnZXIpIHsK\nICAgICAgICB1cGRhdGVNYW5hZ2VyUGx1Z2luLnNldCh1cGRhdGVNYW5hZ2Vy\nKTsKICAgIH0KCiAgICBwdWJsaWMgVXBkYXRlTWFuYWdlciBnZXRVcGRhdGVN\nYW5hZ2VySW5zdGFuY2UoKSB7CiAgICAgICAgaWYgKHVwZGF0ZU1hbmFnZXJQ\nbHVnaW4uZ2V0KCkgPT0gbnVsbCkKICAgICAgICAgICAgdXBkYXRlTWFuYWdl\nclBsdWdpbi5pbnN0YW50aWF0ZShVcGRhdGVNYW5hZ2VyLmNsYXNzLCB0aGlz\nKTsKICAgICAgICByZXR1cm4gKFVwZGF0ZU1hbmFnZXIpIHVwZGF0ZU1hbmFn\nZXJQbHVnaW4uZ2V0KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0RHJp\ndmVyRGF0YVNvdXJjZShTdHJpbmcgZHJpdmVyRGF0YVNvdXJjZSkgewogICAg\nICAgIGRyaXZlckRhdGFTb3VyY2VQbHVnaW4uc2V0U3RyaW5nKGRyaXZlckRh\ndGFTb3VyY2UpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0RHJpdmVy\nRGF0YVNvdXJjZSgpIHsKICAgICAgICByZXR1cm4gZHJpdmVyRGF0YVNvdXJj\nZVBsdWdpbi5nZXRTdHJpbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgRHJpdmVy\nRGF0YVNvdXJjZSBuZXdEcml2ZXJEYXRhU291cmNlSW5zdGFuY2UoKSB7CiAg\nICAgICAgcmV0dXJuIChEcml2ZXJEYXRhU291cmNlKSBkcml2ZXJEYXRhU291\ncmNlUGx1Z2luLgogICAgICAgICAgICBpbnN0YW50aWF0ZShEcml2ZXJEYXRh\nU291cmNlLmNsYXNzLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRTY2hlbWFGYWN0b3J5KFN0cmluZyBzY2hlbWFGYWN0b3J5KSB7CiAgICAg\nICAgc2NoZW1hRmFjdG9yeVBsdWdpbi5zZXRTdHJpbmcoc2NoZW1hRmFjdG9y\neSk7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRTY2hlbWFGYWN0b3J5\nKCkgewogICAgICAgIHJldHVybiBzY2hlbWFGYWN0b3J5UGx1Z2luLmdldFN0\ncmluZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFNjaGVtYUZhY3Rv\ncnkoU2NoZW1hRmFjdG9yeSBzY2hlbWFGYWN0b3J5KSB7CiAgICAgICAgc2No\nZW1hRmFjdG9yeVBsdWdpbi5zZXQoc2NoZW1hRmFjdG9yeSk7CiAgICB9Cgog\nICAgcHVibGljIFNjaGVtYUZhY3RvcnkgZ2V0U2NoZW1hRmFjdG9yeUluc3Rh\nbmNlKCkgewogICAgICAgIGlmIChzY2hlbWFGYWN0b3J5UGx1Z2luLmdldCgp\nID09IG51bGwpCiAgICAgICAgICAgIHNjaGVtYUZhY3RvcnlQbHVnaW4uaW5z\ndGFudGlhdGUoU2NoZW1hRmFjdG9yeS5jbGFzcywgdGhpcyk7CiAgICAgICAg\ncmV0dXJuIChTY2hlbWFGYWN0b3J5KSBzY2hlbWFGYWN0b3J5UGx1Z2luLmdl\ndCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFNRTEZhY3RvcnkoU3Ry\naW5nIHNxbEZhY3RvcnkpIHsKICAgICAgICBzcWxGYWN0b3J5UGx1Z2luLnNl\ndFN0cmluZyhzcWxGYWN0b3J5KTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5n\nIGdldFNRTEZhY3RvcnkoKSB7CiAgICAgICAgcmV0dXJuIHNxbEZhY3RvcnlQ\nbHVnaW4uZ2V0U3RyaW5nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nU1FMRmFjdG9yeShTUUxGYWN0b3J5IHNxbEZhY3RvcnkpIHsKICAgICAgICBz\ncWxGYWN0b3J5UGx1Z2luLnNldChzcWxGYWN0b3J5KTsKICAgIH0KCiAgICBw\ndWJsaWMgU1FMRmFjdG9yeSBnZXRTUUxGYWN0b3J5SW5zdGFuY2UoKSB7CiAg\nICAgICAgaWYgKHNxbEZhY3RvcnlQbHVnaW4uZ2V0KCkgPT0gbnVsbCkKICAg\nICAgICAgICAgc3FsRmFjdG9yeVBsdWdpbi5pbnN0YW50aWF0ZShTUUxGYWN0\nb3J5LmNsYXNzLCB0aGlzKTsKICAgICAgICByZXR1cm4gKFNRTEZhY3Rvcnkp\nIHNxbEZhY3RvcnlQbHVnaW4uZ2V0KCk7CiAgICB9CgogICAgcHVibGljIFN0\ncmluZyBnZXRNYXBwaW5nRmFjdG9yeSgpIHsKICAgICAgICByZXR1cm4gbWFw\ncGluZ0ZhY3RvcnlQbHVnaW4uZ2V0U3RyaW5nKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0TWFwcGluZ0ZhY3RvcnkoU3RyaW5nIG1hcHBpbmcpIHsK\nICAgICAgICBtYXBwaW5nRmFjdG9yeVBsdWdpbi5zZXRTdHJpbmcobWFwcGlu\nZyk7CiAgICB9CgogICAgcHVibGljIE1ldGFEYXRhRmFjdG9yeSBuZXdNZXRh\nRGF0YUZhY3RvcnlJbnN0YW5jZSgpIHsKICAgICAgICByZXR1cm4gbWFwcGlu\nZ0ZhY3RvcnlQbHVnaW4uaW5zdGFudGlhdGVNZXRhRGF0YUZhY3RvcnkodGhp\ncywKICAgICAgICAgICAgbWV0YUZhY3RvcnlQbHVnaW4sIGdldE1hcHBpbmco\nKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TWFwcGluZ0RlZmF1bHRz\nKFN0cmluZyBtYXBwaW5nKSB7CiAgICAgICAgdGhpcy5tYXBwaW5nRGVmYXVs\ndHNQbHVnaW4uc2V0U3RyaW5nKG1hcHBpbmcpOwogICAgfQoKICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0TWFwcGluZ0RlZmF1bHRzKCkgewogICAgICAgIHJldHVy\nbiBtYXBwaW5nRGVmYXVsdHNQbHVnaW4uZ2V0U3RyaW5nKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0TWFwcGluZ0RlZmF1bHRzKE1hcHBpbmdEZWZh\ndWx0cyBtYXBwaW5nKSB7CiAgICAgICAgbWFwcGluZ0RlZmF1bHRzUGx1Z2lu\nLnNldChtYXBwaW5nKTsKICAgIH0KCiAgICBwdWJsaWMgTWFwcGluZ0RlZmF1\nbHRzIGdldE1hcHBpbmdEZWZhdWx0c0luc3RhbmNlKCkgewogICAgICAgIGlm\nIChtYXBwaW5nRGVmYXVsdHNQbHVnaW4uZ2V0KCkgPT0gbnVsbCkKICAgICAg\nICAgICAgbWFwcGluZ0RlZmF1bHRzUGx1Z2luLmluc3RhbnRpYXRlKE1hcHBp\nbmdEZWZhdWx0cy5jbGFzcywgdGhpcyk7CiAgICAgICAgcmV0dXJuIChNYXBw\naW5nRGVmYXVsdHMpIG1hcHBpbmdEZWZhdWx0c1BsdWdpbi5nZXQoKTsKICAg\nIH0KCiAgICBwdWJsaWMgTWFwcGluZ1JlcG9zaXRvcnkgZ2V0TWFwcGluZ1Jl\ncG9zaXRvcnlJbnN0YW5jZSgpIHsKICAgICAgICByZXR1cm4gKE1hcHBpbmdS\nZXBvc2l0b3J5KSBnZXRNZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpOwog\nICAgfQoKICAgIHB1YmxpYyBNYXBwaW5nUmVwb3NpdG9yeSBuZXdNYXBwaW5n\nUmVwb3NpdG9yeUluc3RhbmNlKCkgewogICAgICAgIHJldHVybiAoTWFwcGlu\nZ1JlcG9zaXRvcnkpIG5ld01ldGFEYXRhUmVwb3NpdG9yeUluc3RhbmNlKCk7\nCiAgICB9CgogICAgcHVibGljIEJyb2tlckltcGwgbmV3QnJva2VySW5zdGFu\nY2UoU3RyaW5nIHVzZXIsIFN0cmluZyBwYXNzKSB7CiAgICAgICAgQnJva2Vy\nSW1wbCBicm9rZXIgPSBzdXBlci5uZXdCcm9rZXJJbnN0YW5jZSh1c2VyLCBw\nYXNzKTsKCiAgICAgICAgLy8gcmVjb3JkIGZpcnN0IG5vbi1udWxsIGJyb2tl\nciB1c2VyIGFuZCBwYXNzIGluIGNhc2Ugbm8gZ2xvYmFsIHNldHRpbmdzCiAg\nICAgICAgaWYgKGJyb2tlciAhPSBudWxsICYmIHVzZXIgIT0gbnVsbCAmJiBm\naXJzdFVzZXIgPT0gbnVsbCkgewogICAgICAgICAgICBmaXJzdFVzZXIgPSB1\nc2VyOwogICAgICAgICAgICBmaXJzdFBhc3MgPSBwYXNzOwogICAgICAgIH0K\nICAgICAgICByZXR1cm4gYnJva2VyOwogICAgfQoKICAgIHB1YmxpYyBPYmpl\nY3QgZ2V0Q29ubmVjdGlvbkZhY3RvcnkoKSB7CiAgICAgICAgLy8gb3ZlcnJp\nZGUgdG8gY29uZmlndXJlIGRhdGEgc291cmNlCiAgICAgICAgaWYgKGRhdGFT\nb3VyY2UgPT0gbnVsbCkgewogICAgICAgICAgICBEZWNvcmF0aW5nRGF0YVNv\ndXJjZSBkcyA9IGNyZWF0ZUNvbm5lY3Rpb25GYWN0b3J5KCk7CiAgICAgICAg\nICAgIGRhdGFTb3VyY2UgPSBEYXRhU291cmNlRmFjdG9yeS5pbnN0YWxsREJE\naWN0aW9uYXJ5CiAgICAgICAgICAgICAgICAoZ2V0REJEaWN0aW9uYXJ5SW5z\ndGFuY2UoKSwgZHMsIHRoaXMsIGZhbHNlKTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIGRhdGFTb3VyY2U7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nQ29ubmVjdGlvbkZhY3RvcnkoT2JqZWN0IGZhY3RvcnkpIHsKICAgICAgICAv\nLyB0aGVyZSdzIGEgbG90IG9mIG9uZS10aW1lIGluaXRpYWxpemF0aW9uIGlu\ndm9sdmVkIGZvcgogICAgICAgIC8vIGNvbm5lY3Rpb24gZmFjdG9yaWVzLCBz\nbyBpZ25vcmUgcmVzZXRzCiAgICAgICAgaWYgKGZhY3RvcnkgPT0gY29ubmVj\ndGlvbkZhY3RvcnkuZ2V0KCkpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAg\nICAgLy8gb3ZlcnJpZGUgdG8gY29uZmlndXJlIGRhdGEgc291cmNlCiAgICAg\nICAgaWYgKGZhY3RvcnkgIT0gbnVsbCkgewogICAgICAgICAgICAvLyBuZWVk\nIHRvIGVuc3VyZSBpdCBpcyBkZWNvcmF0ZWQgYmVmb3JlIHdlIHNldCB0aGUg\nZGljdAogICAgICAgICAgICBEZWNvcmF0aW5nRGF0YVNvdXJjZSBkcyA9CiAg\nICAgICAgICAgICAgICBzZXR1cENvbm5lY3Rpb25GYWN0b3J5KChEYXRhU291\ncmNlKSBmYWN0b3J5LCBmYWxzZSk7CiAgICAgICAgICAgIGRhdGFTb3VyY2Ug\nPSBEYXRhU291cmNlRmFjdG9yeS5pbnN0YWxsREJEaWN0aW9uYXJ5CiAgICAg\nICAgICAgICAgICAoZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKSwgZHMsIHRo\naXMsIGZhbHNlKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgICAgY29ubmVj\ndGlvbkZhY3Rvcnkuc2V0KG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICog\nRW5zdXJlIHRoYXQgdGhlIHNwZWNpZmllZCBEYXRhU291cmNlIGlzIGRlY29y\nYXRlZCBhbmQgc2V0IGluIHRoZSBjYWNoZS4KICAgICAqLwogICAgcHJpdmF0\nZSBEZWNvcmF0aW5nRGF0YVNvdXJjZSBzZXR1cENvbm5lY3Rpb25GYWN0b3J5\nKERhdGFTb3VyY2UgZHMsCiAgICAgICAgYm9vbGVhbiBmYWN0b3J5Mikgewog\nICAgICAgIGlmIChkcyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKCiAgICAgICAgRGVjb3JhdGluZ0RhdGFTb3VyY2UgZGRzOwogICAgICAg\nIGlmIChkcyBpbnN0YW5jZW9mIERlY29yYXRpbmdEYXRhU291cmNlKQogICAg\nICAgICAgICBkZHMgPSAoRGVjb3JhdGluZ0RhdGFTb3VyY2UpIGRzOwogICAg\nICAgIGVsc2UKICAgICAgICAgICAgZGRzID0gRGF0YVNvdXJjZUZhY3Rvcnku\nZGVjb3JhdGVEYXRhU291cmNlKGRzLCB0aGlzLCBmYWN0b3J5Mik7CgogICAg\nICAgIGlmICghZmFjdG9yeTIgJiYgY29ubmVjdGlvbkZhY3RvcnkuZ2V0KCkg\nIT0gZHMpCiAgICAgICAgICAgIGNvbm5lY3Rpb25GYWN0b3J5LnNldChkZHMs\nIHRydWUpOwogICAgICAgIGVsc2UgaWYgKGZhY3RvcnkyICYmIGNvbm5lY3Rp\nb25GYWN0b3J5Mi5nZXQoKSAhPSBkcykKICAgICAgICAgICAgY29ubmVjdGlv\nbkZhY3RvcnkyLnNldChkZHMsIHRydWUpOwoKICAgICAgICByZXR1cm4gZGRz\nOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0Q29ubmVjdGlvbkZhY3Rv\ncnkyKCkgewogICAgICAgIC8vIG92ZXJyaWRlIHRvIGNvbmZpZ3VyZSBkYXRh\nIHNvdXJjZQogICAgICAgIGlmIChkYXRhU291cmNlMiA9PSBudWxsKSB7CiAg\nICAgICAgICAgIC8vIHN1cGVyY2xhc3Mgd2lsbCBsb29rdXAgZnJvbSBKTkRJ\nLiAKICAgICAgICAgICAgRGF0YVNvdXJjZSBkcyA9IChEYXRhU291cmNlKSBz\ndXBlci5nZXRDb25uZWN0aW9uRmFjdG9yeTIoKTsKICAgICAgICAgICAgaWYg\nKGRzID09IG51bGwpIHsKICAgICAgICAgICAgICAgIC8vIHRoZSBkcml2ZXIg\nbmFtZSBpcyBhbHdheXMgcmVxdWlyZWQsIHNvIGlmIG5vdCBzcGVjaWZpZWQs\nCiAgICAgICAgICAgICAgICAvLyB0aGVuIG5vIGNvbm5lY3Rpb24gZmFjdG9y\neSAyCiAgICAgICAgICAgICAgICBTdHJpbmcgZHJpdmVyID0gZ2V0Q29ubmVj\ndGlvbjJEcml2ZXJOYW1lKCk7CiAgICAgICAgICAgICAgICBpZiAoIVN0cmlu\nZ1V0aWxzLmlzRW1wdHkoZHJpdmVyKSkKICAgICAgICAgICAgICAgICAgICBk\ncyA9IERhdGFTb3VyY2VGYWN0b3J5Lm5ld0RhdGFTb3VyY2UodGhpcywgdHJ1\nZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGRzICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgIERlY29yYXRpbmdEYXRhU291cmNlIGRkcyA9\nCiAgICAgICAgICAgICAgICAgICAgc2V0dXBDb25uZWN0aW9uRmFjdG9yeShk\ncywgdHJ1ZSk7IC8vIGJlZm9yZSBkaWN0CiAgICAgICAgICAgICAgICBkYXRh\nU291cmNlMiA9IERhdGFTb3VyY2VGYWN0b3J5Lmluc3RhbGxEQkRpY3Rpb25h\ncnkKICAgICAgICAgICAgICAgICAgICAoZ2V0REJEaWN0aW9uYXJ5SW5zdGFu\nY2UoKSwgZGRzLCB0aGlzLCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgICAgICByZXR1cm4gZGF0YVNvdXJjZTI7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0Q29ubmVjdGlvbkZhY3RvcnkyKE9iamVjdCBmYWN0b3J5\nKSB7CiAgICAgICAgaWYgKGZhY3RvcnkgPT0gY29ubmVjdGlvbkZhY3Rvcnky\nLmdldCgpKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIC8vIG92ZXJy\naWRlIHRvIGNvbmZpZ3VyZSBkYXRhIHNvdXJjZQogICAgICAgIGlmIChmYWN0\nb3J5ICE9IG51bGwpIHsKICAgICAgICAgICAgLy8gbmVlZCB0byBlbnN1cmUg\naXQgaXMgZGVjb3JhdGVkIGJlZm9yZSB3ZSBzZXQgdGhlIGRpY3QKICAgICAg\nICAgICAgRGVjb3JhdGluZ0RhdGFTb3VyY2UgZHMgPSBzZXR1cENvbm5lY3Rp\nb25GYWN0b3J5KChEYXRhU291cmNlKQogICAgICAgICAgICAgICAgZmFjdG9y\neSwgdHJ1ZSk7CiAgICAgICAgICAgIGRhdGFTb3VyY2UyID0gRGF0YVNvdXJj\nZUZhY3RvcnkuaW5zdGFsbERCRGljdGlvbmFyeQogICAgICAgICAgICAgICAg\nKGdldERCRGljdGlvbmFyeUluc3RhbmNlKCksIGRzLCB0aGlzLCB0cnVlKTsK\nICAgICAgICB9IGVsc2UKICAgICAgICAgICAgY29ubmVjdGlvbkZhY3Rvcnky\nLnNldChudWxsKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSB0aGUg\nY29ubmVjdGlvbiBmYWN0b3J5IGlmIG5lY2Vzc2FyeS4KICAgICAqLwogICAg\ncHJpdmF0ZSBEZWNvcmF0aW5nRGF0YVNvdXJjZSBjcmVhdGVDb25uZWN0aW9u\nRmFjdG9yeSgpIHsKICAgICAgICBEYXRhU291cmNlIGRzID0gKERhdGFTb3Vy\nY2UpIGNvbm5lY3Rpb25GYWN0b3J5LmdldCgpOwogICAgICAgIGlmIChkcyAh\nPSBudWxsKQogICAgICAgICAgICByZXR1cm4gc2V0dXBDb25uZWN0aW9uRmFj\ndG9yeShkcywgZmFsc2UpOwoKICAgICAgICBkcyA9IChEYXRhU291cmNlKSBz\ndXBlci5nZXRDb25uZWN0aW9uRmFjdG9yeSgpOyAvLyBKTkRJIGxvb2t1cAog\nICAgICAgIGlmIChkcyA9PSBudWxsKQogICAgICAgICAgICBkcyA9IERhdGFT\nb3VyY2VGYWN0b3J5Lm5ld0RhdGFTb3VyY2UodGhpcywgZmFsc2UpOwoKICAg\nICAgICByZXR1cm4gc2V0dXBDb25uZWN0aW9uRmFjdG9yeShkcywgZmFsc2Up\nOwogICAgfQoKICAgIHB1YmxpYyBEYXRhU291cmNlIGdldERhdGFTb3VyY2Uo\nU3RvcmVDb250ZXh0IGN0eCkgewogICAgICAgIHJldHVybiBnZXREYXRhU291\ncmNlKGN0eCwgKERhdGFTb3VyY2UpIGdldENvbm5lY3Rpb25GYWN0b3J5KCkp\nOwogICAgfQoKICAgIHB1YmxpYyBEYXRhU291cmNlIGdldERhdGFTb3VyY2Uy\nKFN0b3JlQ29udGV4dCBjdHgpIHsKICAgICAgICAvLyBpZiB0aGVyZSBpcyBu\nbyBjb25uZWN0aW9uIGZhY3RvcnkgMiwgdXNlIHRoZSBwcmltYXJ5IGZhY3Rv\ncnkKICAgICAgICBEYXRhU291cmNlIGRzID0gKERhdGFTb3VyY2UpIGdldENv\nbm5lY3Rpb25GYWN0b3J5MigpOwogICAgICAgIGlmIChkcyA9PSBudWxsKQog\nICAgICAgICAgICByZXR1cm4gZ2V0RGF0YVNvdXJjZShjdHgpOwoKICAgICAg\nICAvLyBwcmVmZXIgdGhlIGdsb2JhbCBjb25uZWN0aW9uIDIgYXV0aCBpbmZv\nIGlmIGdpdmVuCiAgICAgICAgU3RyaW5nIHVzZXIgPSBnZXRDb25uZWN0aW9u\nMlVzZXJOYW1lKCk7CiAgICAgICAgU3RyaW5nIHBhc3MgPSBnZXRDb25uZWN0\naW9uMlBhc3N3b3JkKCk7CiAgICAgICAgaWYgKHVzZXIgPT0gbnVsbCAmJiBw\nYXNzID09IG51bGwpIHsKICAgICAgICAgICAgLy8gbm8gZ2xvYmFsIGF1dGgg\naW5mbzsgdXNlIHRoZSBjb250ZXh0IGlmIGdpdmVuLCBvciB0aGUgZmlyc3QK\nICAgICAgICAgICAgLy8gY29udGV4dCBpZiBub3QKICAgICAgICAgICAgaWYg\nKGN0eCA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICB1c2VyID0gZmlyc3RV\nc2VyOwogICAgICAgICAgICAgICAgcGFzcyA9IGZpcnN0UGFzczsKICAgICAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHVzZXIgPSBjdHguZ2V0\nQ29ubmVjdGlvblVzZXJOYW1lKCk7CiAgICAgICAgICAgICAgICBwYXNzID0g\nY3R4LmdldENvbm5lY3Rpb25QYXNzd29yZCgpOwogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgICAgIHJldHVybiBEYXRhU291cmNlRmFjdG9yeS5kZWZh\ndWx0c0RhdGFTb3VyY2UoZHMsIHVzZXIsIHBhc3MpOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhpcyB2ZXJzaW9uIGFsbG93cyB1cyB0byBwYXNzIGluIHdo\naWNoIGRhdGEgc291cmNlIHRvIHdyYXAgaW50ZXJuYWxseTsKICAgICAqIHVz\nZWZ1bCBkdXJpbmcgaW5pdGlhbGl6YXRpb24gYmVmb3JlIHRoZSBjb25uZWN0\naW9uIGZhY3RvcnkgaXMKICAgICAqIGNvbXBsZXRlbHkgY29uZmlndXJlZC4K\nICAgICAqLwogICAgcHJpdmF0ZSBEYXRhU291cmNlIGdldERhdGFTb3VyY2Uo\nU3RvcmVDb250ZXh0IGN0eCwgRGF0YVNvdXJjZSBkcykgewogICAgICAgIFN0\ncmluZyB1c2VyLCBwYXNzOwogICAgICAgIGlmIChjdHggPT0gbnVsbCkgewog\nICAgICAgICAgICAvLyBpZiBubyBjb250ZXh0LCBkZWZhdWx0IHRvIHRoZSBn\nbG9iYWwgYXV0aCBpbmZvLCBvciB0aGUgYXV0aCBpbmZvCiAgICAgICAgICAg\nIC8vIG9mIHRoZSBmaXJzdCBjb250ZXh0IGlmIG5vbmUKICAgICAgICAgICAg\ndXNlciA9IGdldENvbm5lY3Rpb25Vc2VyTmFtZSgpOwogICAgICAgICAgICBp\nZiAodXNlciA9PSBudWxsKQogICAgICAgICAgICAgICAgdXNlciA9IGZpcnN0\nVXNlcjsKICAgICAgICAgICAgcGFzcyA9IGdldENvbm5lY3Rpb25QYXNzd29y\nZCgpOwogICAgICAgICAgICBpZiAocGFzcyA9PSBudWxsKQogICAgICAgICAg\nICAgICAgcGFzcyA9IGZpcnN0UGFzczsKICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICAvLyB1c2UgdGhlIGNvbnRleHQncyBhdXRoIGluZm8KICAgICAg\nICAgICAgdXNlciA9IGN0eC5nZXRDb25uZWN0aW9uVXNlck5hbWUoKTsKICAg\nICAgICAgICAgcGFzcyA9IGN0eC5nZXRDb25uZWN0aW9uUGFzc3dvcmQoKTsK\nICAgICAgICB9CiAgICAgICAgcmV0dXJuIERhdGFTb3VyY2VGYWN0b3J5LmRl\nZmF1bHRzRGF0YVNvdXJjZShkcywgdXNlciwgcGFzcyk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBGcmVlIHRoZSBkYXRhIHNvdXJjZXMuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCB2b2lkIHByZUNsb3NlKCkgewogICAgICAgIGlmIChkYXRh\nU291cmNlICE9IG51bGwpIHsKICAgICAgICAgICAgZ2V0REJEaWN0aW9uYXJ5\nSW5zdGFuY2UoKS5jbG9zZURhdGFTb3VyY2UoZGF0YVNvdXJjZSk7CiAgICAg\nICAgICAgIGNvbm5lY3Rpb25GYWN0b3J5LnNldChudWxsLCB0cnVlKTsgLy8g\nc28gc3VwZXIgZG9lc24ndCBjbG9zZSBpdAogICAgICAgIH0KICAgICAgICBp\nZiAoZGF0YVNvdXJjZTIgIT0gbnVsbCkgewogICAgICAgICAgICBnZXREQkRp\nY3Rpb25hcnlJbnN0YW5jZSgpLmNsb3NlRGF0YVNvdXJjZShkYXRhU291cmNl\nKTsKICAgICAgICAgICAgY29ubmVjdGlvbkZhY3RvcnkyLnNldChudWxsLCB0\ncnVlKTsgLy8gc28gc3VwZXIgZG9lc24ndCBjbG9zZSBpdAogICAgICAgIH0K\nICAgICAgICBzdXBlci5wcmVDbG9zZSgpOwogICAgfQoKICAgIHByb3RlY3Rl\nZCBib29sZWFuIGlzSW52YWxpZFByb3BlcnR5KFN0cmluZyBwcm9wTmFtZSkg\newogICAgICAgIGlmIChzdXBlci5pc0ludmFsaWRQcm9wZXJ0eShwcm9wTmFt\nZSkpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgICAvLyBoYW5k\nbGUgb3BlbmpwYS5qZGJjLlNvbWVNaXNzcGVsbGVkUHJvcGVydHksIGJ1dCBu\nb3QKICAgICAgICAvLyBvcGVuanBhLnNvbWVvdGhlcmltcGxlbWVudGF0aW9u\nLlNvbWVQcm9wZXJ0eQogICAgICAgIFN0cmluZ1tdIHByZWZpeGVzID0gUHJv\nZHVjdERlcml2YXRpb25zLmdldENvbmZpZ3VyYXRpb25QcmVmaXhlcygpOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcHJlZml4ZXMubGVuZ3RoOyBp\nKyspCiAgICAgICAgICAgIGlmIChwcm9wTmFtZS50b0xvd2VyQ2FzZSgpLnN0\nYXJ0c1dpdGgocHJlZml4ZXNbaV0gKyAiLmpkYmMiKSkKICAgICAgICAgICAg\nICAgIHJldHVybiB0cnVlOyAKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9\nCn0K\n","encoding":"base64"}

