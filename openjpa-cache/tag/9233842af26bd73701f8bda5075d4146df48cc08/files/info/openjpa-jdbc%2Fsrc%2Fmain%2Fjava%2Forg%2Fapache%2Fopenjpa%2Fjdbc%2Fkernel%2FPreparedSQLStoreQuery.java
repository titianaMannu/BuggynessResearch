{"sha":"286221bc666d969172ed8788af597e795b3eb604","node_id":"MDQ6QmxvYjIwNjM2NDoyODYyMjFiYzY2NmQ5NjkxNzJlZDg3ODhhZjU5N2U3OTViM2ViNjA0","size":6705,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/286221bc666d969172ed8788af597e795b3eb604","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlByZXBh\ncmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0OwppbXBv\ncnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLk1h\ncDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhw\ncy5FeHBDb250ZXh0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\na2VybmVsLmV4cHMuUXVlcnlFeHByZXNzaW9uc1N0YXRlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJlc3VsdDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5SZXN1bHRTZXRSZXN1\nbHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVm\nZmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEV4\nY2VwdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwu\nU2VsZWN0SW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nU3RvcmVRdWVyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nRXhwcmVzc2lvblN0b3JlUXVlcnkuQWJzdHJhY3RFeHByZXNzaW9uRXhlY3V0\nb3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuUXVl\ncnlFeHByZXNzaW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ncm9wLlJhbmdlUmVzdWx0T2JqZWN0UHJvdmlkZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnJvcC5SZXN1bHRPYmplY3RQcm92aWRlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnRlcm5hbEV4Y2VwdGlv\nbjsKCi8qKgogKiBBIGV4ZWN1dG9yIGZvciBQcmVwYXJlZCBTUUwgUXVlcnku\nCiAqIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICoKICovCkBTdXBwcmVz\nc1dhcm5pbmdzKCJzZXJpYWwiKQpwdWJsaWMgY2xhc3MgUHJlcGFyZWRTUUxT\ndG9yZVF1ZXJ5IGV4dGVuZHMgU1FMU3RvcmVRdWVyeSB7CiAgICBwcml2YXRl\nIFByZXBhcmVkUXVlcnlJbXBsIF9jYWNoZWQ7CiAgICBwdWJsaWMgUHJlcGFy\nZWRTUUxTdG9yZVF1ZXJ5KEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAgIHN1\ncGVyKHN0b3JlKTsKICAgIH0KICAgIAogICAgcHVibGljIEV4ZWN1dG9yIG5l\nd0RhdGFTdG9yZUV4ZWN1dG9yKENsYXNzTWV0YURhdGEgbWV0YSwKICAgICAg\nICBib29sZWFuIHN1YmNsYXNzZXMpIHsKICAgICAgICByZXR1cm4gbmV3IFBy\nZXBhcmVkU1FMRXhlY3V0b3IodGhpcywgbWV0YSk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyBib29sZWFuIHNldFF1ZXJ5KE9iamVjdCBxdWVyeSkgewogICAg\nICAgIGlmIChxdWVyeSBpbnN0YW5jZW9mIFByZXBhcmVkUXVlcnlJbXBsID09\nIGZhbHNlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2Vw\ndGlvbihxdWVyeS5nZXRDbGFzcygpICsgIiBub3QgcmVjb2duaXplZCIpOwog\nICAgICAgIH0KICAgICAgICBfY2FjaGVkID0gKFByZXBhcmVkUXVlcnlJbXBs\nKXF1ZXJ5OwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgCiAgICBQ\ncmVwYXJlZFF1ZXJ5SW1wbCBnZXRQcmVwYXJlZFF1ZXJ5KCkgewogICAgICAg\nIHJldHVybiBfY2FjaGVkOwogICAgfQoKICAgIC8qKgogICAgICogRXhlY3V0\nb3Igb2YgYSBwcmVwYXJlZCBxdWVyeSB1c2VzIHRoZSBRdWVyeUV4cHJlc3Np\nb25zIG9mIHRoZSBvcmlnaW5hbCBxdWVyeQogICAgICogYXZhaWxhYmxlIHZp\nYSB0aGUgUHJlcGFyZWRRdWVyeS4KICAgICAqCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgY2xhc3MgUHJlcGFyZWRTUUxFeGVjdXRvciBleHRlbmRzIEFi\nc3RyYWN0RXhwcmVzc2lvbkV4ZWN1dG9yIHsKICAgICAgICBwcml2YXRlIGZp\nbmFsIENsYXNzTWV0YURhdGEgX21ldGE7CiAgICAgICAgcHJpdmF0ZSBmaW5h\nbCBQcmVwYXJlZFNRTFN0b3JlUXVlcnkgX3F1ZXJ5OwogICAgICAgIAogICAg\nICAgIHB1YmxpYyBQcmVwYXJlZFNRTEV4ZWN1dG9yKFByZXBhcmVkU1FMU3Rv\ncmVRdWVyeSBxLCBDbGFzc01ldGFEYXRhIGNhbmRpZGF0ZSkgewogICAgICAg\nICAgICBfbWV0YSA9IGNhbmRpZGF0ZTsKICAgICAgICAgICAgX3F1ZXJ5ID0g\ncTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcHVibGljIFF1ZXJ5RXhw\ncmVzc2lvbnNbXSBnZXRRdWVyeUV4cHJlc3Npb25zKCkgewogICAgICAgICAg\nICByZXR1cm4gX3F1ZXJ5LmdldFByZXBhcmVkUXVlcnkoKS5nZXRRdWVyeUV4\ncHJlc3Npb25zKCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHB1Ymxp\nYyBDbGFzc1tdIGdldFByb2plY3Rpb25UeXBlcyhTdG9yZVF1ZXJ5IHEpIHsK\nICAgICAgICAgICAgcmV0dXJuIF9xdWVyeS5nZXRQcmVwYXJlZFF1ZXJ5KCku\nZ2V0UHJvamVjdGlvblR5cGVzKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgUmVzdWx0T2JqZWN0UHJvdmlkZXIgZXhlY3V0ZVF1ZXJ5KFN0b3JlUXVl\ncnkgcSwgT2JqZWN0W10gcGFyYW1zLCBSYW5nZSByYW5nZSkgewogICAgICAg\nICAgICBQcmVwYXJlZFNRTFN0b3JlUXVlcnkgcHNxID0gKFByZXBhcmVkU1FM\nU3RvcmVRdWVyeSkgcTsKICAgICAgICAgICAgUHJlcGFyZWRRdWVyeUltcGwg\ncHEgPSBwc3EuZ2V0UHJlcGFyZWRRdWVyeSgpOwogICAgICAgICAgICBKREJD\nU3RvcmUgc3RvcmUgPSBwc3EuZ2V0U3RvcmUoKTsKICAgICAgICAgICAgREJE\naWN0aW9uYXJ5IGRpY3QgPSBzdG9yZS5nZXREQkRpY3Rpb25hcnkoKTsKCiAg\nICAgICAgICAgIFNRTEJ1ZmZlciBidWYgPSBuZXcgU1FMQnVmZmVyKGRpY3Qp\nLmFwcGVuZChwcS5nZXRUYXJnZXRRdWVyeSgpKTsKICAgICAgICAgICAgQ29u\nbmVjdGlvbiBjb25uID0gc3RvcmUuZ2V0Q29ubmVjdGlvbigpOwogICAgICAg\nICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoID0gKEpEQkNGZXRj\naENvbmZpZ3VyYXRpb24pcS5nZXRDb250ZXh0KCkuZ2V0RmV0Y2hDb25maWd1\ncmF0aW9uKCk7CgogICAgICAgICAgICBSZXN1bHRPYmplY3RQcm92aWRlciBy\nb3A7CiAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bW50ID0gbnVs\nbDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHN0bW50ID0g\nIXJhbmdlLmxycyA/IGJ1Zi5wcmVwYXJlU3RhdGVtZW50KGNvbm4pIDogYnVm\nLnByZXBhcmVTdGF0ZW1lbnQoY29ubiwgZmV0Y2gsIC0xLCAtMSk7CgogICAg\nICAgICAgICAgICAgaW50IGluZGV4ID0gMDsKICAgICAgICAgICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgICAgICAgICAgZGljdC5zZXRVbmtub3duKHN0bW50LCArK2luZGV4\nLCBwYXJhbXNbaV0sIG51bGwpOwogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgZGljdC5zZXRUaW1lb3V0cyhzdG1udCwgZmV0Y2gsIGZhbHNl\nKTsKCiAgICAgICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBzdG1udC5leGVj\ndXRlUXVlcnkoKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg\nU2VsZWN0SW1wbCBjYWNoZWRTZWxlY3QgPSBwcS5nZXRTZWxlY3QoKTsKICAg\nICAgICAgICAgICAgIFJlc3VsdCByZXMgPSBjYWNoZWRTZWxlY3QuZ2V0RWFn\nZXJSZXN1bHQoY29ubiwgc3RtbnQsIHJzLCBzdG9yZSwgZmV0Y2gsIGZhbHNl\nLCBudWxsKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYg\nKGdldFF1ZXJ5RXhwcmVzc2lvbnMoKVswXS5wcm9qZWN0aW9ucy5sZW5ndGgg\nPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgRXhwQ29udGV4dCBjdHggPSBu\nZXcgRXhwQ29udGV4dChzdG9yZSwgcGFyYW1zLCBmZXRjaCk7CiAgICAgICAg\nICAgICAgICAgICAgUXVlcnlFeHByZXNzaW9uc1N0YXRlIHN0YXRlID0gKFF1\nZXJ5RXhwcmVzc2lvbnNTdGF0ZSlnZXRRdWVyeUV4cHJlc3Npb25zKClbMF0u\nc3RhdGU7CiAgICAgICAgICAgICAgICAgICAgcm9wID0gbmV3IFByZXBhcmVk\nUHJvamVjdGlvblJlc3VsdE9iamVjdFByb3ZpZGVyKGNhY2hlZFNlbGVjdCwg\nZ2V0UXVlcnlFeHByZXNzaW9ucygpLCAKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIG5ldyBRdWVyeUV4cHJlc3Npb25zU3RhdGVbXXtzdGF0ZX0sIGN0\neCwgcmVzKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocS5nZXRDb250\nZXh0KCkuZ2V0Q2FuZGlkYXRlVHlwZSgpICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgICAgICByb3AgPSBuZXcgUHJlcGFyZWRSZXN1bHRPYmplY3RQcm92\naWRlcihjYWNoZWRTZWxlY3QsIAogICAgICAgICAgICAgICAgICAgICAgICAo\nQ2xhc3NNYXBwaW5nKSBfbWV0YSwgc3RvcmUsIGZldGNoLCByZXMpOwogICAg\nICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByb3Ag\nPSBuZXcgU1FMUHJvamVjdGlvblJlc3VsdE9iamVjdFByb3ZpZGVyKHN0b3Jl\nLCBmZXRjaCwKICAgICAgICAgICAgICAgICAgICAgICAgKFJlc3VsdFNldFJl\nc3VsdClyZXMsIHEuZ2V0Q29udGV4dCgpLmdldFJlc3VsdFR5cGUoKSk7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2Vw\ndGlvbiBzZSkgewogICAgICAgICAgICAgICAgaWYgKHN0bW50ICE9IG51bGwp\nCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsgc3RtbnQuY2xvc2UoKTsgfSBj\nYXRjaCAoU1FMRXhjZXB0aW9uIHNlMikge30KICAgICAgICAgICAgICAgIHRy\neSB7IGNvbm4uY2xvc2UoKTsgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlMikg\ne30KICAgICAgICAgICAgICAgIHRocm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3Rv\ncmUoc2UsIGRpY3QpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAo\ncmFuZ2Uuc3RhcnQgIT0gMCB8fCByYW5nZS5lbmQgIT0gTG9uZy5NQVhfVkFM\nVUUpCiAgICAgICAgICAgICAgICByb3AgPSBuZXcgUmFuZ2VSZXN1bHRPYmpl\nY3RQcm92aWRlcihyb3AsIHJhbmdlLnN0YXJ0LHJhbmdlLmVuZCk7CiAgICAg\nICAgICAgIHJldHVybiByb3A7CiAgICAgICAgfQogICAgICAgIAogICAgICAg\nIC8qKgogICAgICAgICAqIENvbnZlcnQgZ2l2ZW4gdXNlclBhcmFtcyB0byBh\nbiBhcnJheSB3aG9zZSBvcmRlcmluZyBtYXRjaGVzIGFzIAogICAgICAgICAq\nIHBlciBleHBlY3RlZCBkdXJpbmcgZXhlY3V0ZVhYWCgpIG1ldGhvZHMuCiAg\nICAgICAgICogVGhlIGdpdmVuIHVzZXJQYXJhbXMgaXMgYWxyZWFkeSByZS1w\nYXJhbWV0ZXJpemVkLCBzbyB0aGlzIG1ldGhvZCBoYXZlCiAgICAgICAgICog\ndG8gbWVyZWx5IGNvcHkgdGhlIGdpdmVuIE1hcCB2YWx1ZXMuCiAgICAgICAg\nICogCiAgICAgICAgICogQHNlZSBQcmVwYXJlZFF1ZXJ5SW1wbCNyZXBhcmFt\nZXRyaXplKE1hcCwgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXIp\nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIE9iamVjdFtdIHRvUGFyYW1l\ndGVyQXJyYXkoU3RvcmVRdWVyeSBxLCBNYXAgdXNlclBhcmFtcykgewogICAg\nICAgICAgICBPYmplY3RbXSBhcnJheSA9IG5ldyBPYmplY3RbdXNlclBhcmFt\ncy5zaXplKCldOwogICAgICAgICAgICBmb3IgKE9iamVjdCBrZXkgOiB1c2Vy\nUGFyYW1zLmtleVNldCgpKSB7CiAgICAgICAgICAgICAgICBpbnQgaWR4ID0g\nKChJbnRlZ2VyKWtleSkuaW50VmFsdWUoKTsKICAgICAgICAgICAgICAgIGFy\ncmF5W2lkeF0gPSB1c2VyUGFyYW1zLmdldChrZXkpOwogICAgICAgICAgICB9\nCiAgICAgICAgICAgIHJldHVybiBhcnJheTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

