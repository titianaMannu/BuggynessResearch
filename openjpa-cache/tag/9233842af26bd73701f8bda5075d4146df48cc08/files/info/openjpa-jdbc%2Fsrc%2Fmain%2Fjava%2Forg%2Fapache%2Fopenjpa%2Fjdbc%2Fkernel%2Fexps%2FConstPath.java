{"sha":"174459464a29dd591837480d9e20284a02876e7d","node_id":"MDQ6QmxvYjIwNjM2NDoxNzQ0NTk0NjRhMjlkZDU5MTgzNzQ4MGQ5ZTIwMjg0YTAyODc2ZTdk","size":7561,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/174459464a29dd591837480d9e20284a02876e7d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0SXRlcmF0b3I7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmlsdGVyczsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5Db250ZXh0\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5leHBzLkV4cHJl\nc3Npb25WaXNpdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkZpZWxkTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5YTUxNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGls\nLkludGVybmFsRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnV0aWwuSW1wbEhlbHBlcjsKCi8qKgogKiBBIGZpZWxkIHRyYXZlcnNhbCBz\ndGFydGluZyB3aXRoIGEgY29uc3RhbnQgZmlsdGVyIHBhcmFtZXRlci4KICoK\nICogQGF1dGhvciBBYmUgV2hpdGUKICovCmNsYXNzIENvbnN0UGF0aAogICAg\nZXh0ZW5kcyBDb25zdAogICAgaW1wbGVtZW50cyBKREJDUGF0aCB7CgogICAg\ncHJpdmF0ZSBmaW5hbCBDb25zdCBfY29uc3RhbnQ7CiAgICBwcml2YXRlIGZp\nbmFsIExpbmtlZExpc3QgX2FjdGlvbnMgPSBuZXcgTGlua2VkTGlzdCgpOwoK\nICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuIFN1cHBseSBjb25zdGFudCB0\nbyB0cmF2ZXJzZS4KICAgICAqLwogICAgcHVibGljIENvbnN0UGF0aChDb25z\ndCBjb25zdGFudCkgewogICAgICAgIF9jb25zdGFudCA9IGNvbnN0YW50Owog\nICAgfQoKICAgIHB1YmxpYyBDbGFzcyBnZXRUeXBlKCkgewogICAgICAgIGlm\nIChfYWN0aW9ucy5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgQ2xhc3NNZXRh\nRGF0YSBtZXRhID0gZ2V0TWV0YURhdGEoKTsKICAgICAgICAgICAgaWYgKG1l\ndGEgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuY2xh\nc3M7CiAgICAgICAgICAgIHJldHVybiBtZXRhLmdldERlc2NyaWJlZFR5cGUo\nKTsKICAgICAgICB9CgogICAgICAgIE9iamVjdCBsYXN0ID0gX2FjdGlvbnMu\nZ2V0TGFzdCgpOwogICAgICAgIGlmIChsYXN0IGluc3RhbmNlb2YgQ2xhc3Mp\nCiAgICAgICAgICAgIHJldHVybiAoQ2xhc3MpIGxhc3Q7CiAgICAgICAgRmll\nbGRNZXRhRGF0YSBmbWQgPSAoRmllbGRNZXRhRGF0YSkgbGFzdDsKICAgICAg\nICByZXR1cm4gZm1kLmdldERlY2xhcmVkVHlwZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldEltcGxpY2l0VHlwZShDbGFzcyB0eXBlKSB7CiAgICAg\nICAgX2FjdGlvbnMuYWRkKHR5cGUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGdldChGaWVsZE1ldGFEYXRhIGZpZWxkLCBib29sZWFuIG51bGxUcmF2ZXJz\nYWwpIHsKICAgICAgICBfYWN0aW9ucy5hZGQoZmllbGQpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGdldEtleSgpIHsKICAgIH0KCiAgICBwdWJsaWMgRmll\nbGRNZXRhRGF0YSBsYXN0KCkgewogICAgICAgIExpc3RJdGVyYXRvciBpdHIg\nPSBfYWN0aW9ucy5saXN0SXRlcmF0b3IoX2FjdGlvbnMuc2l6ZSgpKTsKICAg\nICAgICBPYmplY3QgcHJldjsKICAgICAgICB3aGlsZSAoaXRyLmhhc1ByZXZp\nb3VzKCkpIHsKICAgICAgICAgICAgcHJldiA9IGl0ci5wcmV2aW91cygpOwog\nICAgICAgICAgICBpZiAocHJldiBpbnN0YW5jZW9mIEZpZWxkTWV0YURhdGEp\nCiAgICAgICAgICAgICAgICByZXR1cm4gKEZpZWxkTWV0YURhdGEpIHByZXY7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1\nYmxpYyBPYmplY3QgZ2V0VmFsdWUoT2JqZWN0W10gcGFyYW1zKSB7CiAgICAg\nICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICB9CgogICAg\ncHVibGljIE9iamVjdCBnZXRWYWx1ZShFeHBDb250ZXh0IGN0eCwgRXhwU3Rh\ndGUgc3RhdGUpIHsKICAgICAgICByZXR1cm4gKChDb25zdFBhdGhFeHBTdGF0\nZSkgc3RhdGUpLnZhbHVlOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0\nU1FMVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRl\nIHN0YXRlKSB7CiAgICAgICAgcmV0dXJuICgoQ29uc3RQYXRoRXhwU3RhdGUp\nIHN0YXRlKS5zcWxWYWx1ZTsKICAgIH0KCiAgICBwdWJsaWMgRXhwU3RhdGUg\naW5pdGlhbGl6ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgaW50IGZs\nYWdzKSB7CiAgICAgICAgcmV0dXJuIG5ldyBDb25zdFBhdGhFeHBTdGF0ZShf\nY29uc3RhbnQuaW5pdGlhbGl6ZShzZWwsIGN0eCwgMCkpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGNhbGN1bGF0ZVZhbHVlKFNlbGVjdCBzZWwsIEV4cENv\nbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgVmFsIG90aGVy\nLCBFeHBTdGF0ZSBvdGhlclN0YXRlKSB7CiAgICAgICAgc3VwZXIuY2FsY3Vs\nYXRlVmFsdWUoc2VsLCBjdHgsIHN0YXRlLCBvdGhlciwgb3RoZXJTdGF0ZSk7\nCiAgICAgICAgQ29uc3RQYXRoRXhwU3RhdGUgY3N0YXRlID0gKENvbnN0UGF0\naEV4cFN0YXRlKSBzdGF0ZTsKICAgICAgICBfY29uc3RhbnQuY2FsY3VsYXRl\nVmFsdWUoc2VsLCBjdHgsIGNzdGF0ZS5jb25zdGFudFN0YXRlLCBudWxsLCBu\ndWxsKTsKICAgICAgICBjc3RhdGUudmFsdWUgPSBfY29uc3RhbnQuZ2V0VmFs\ndWUoY3R4LCBjc3RhdGUuY29uc3RhbnRTdGF0ZSk7CiAgICAgICAgYm9vbGVh\nbiBmYWlsZWQgPSBmYWxzZTsKCiAgICAgICAgLy8gY29waWVkIGZyb20gb3Jn\nLmFwYWNoZS5vcGVuanBhLnF1ZXJ5LkluTWVtb3J5UGF0aAogICAgICAgIE9i\namVjdCBhY3Rpb247CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBzbTsK\nICAgICAgICBCcm9rZXIgdG1wQnJva2VyID0gbnVsbDsKICAgICAgICBmb3Ig\nKEl0ZXJhdG9yIGl0ciA9IF9hY3Rpb25zLml0ZXJhdG9yKCk7IGl0ci5oYXNO\nZXh0KCk7KSB7CiAgICAgICAgICAgIC8vIGZhaWwgb24gbnVsbCB2YWx1ZQog\nICAgICAgICAgICBpZiAoY3N0YXRlLnZhbHVlID09IG51bGwpIHsKICAgICAg\nICAgICAgICAgIGZhaWxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYWN0aW9uID0gaXRyLm5l\neHQoKTsKICAgICAgICAgICAgaWYgKGFjdGlvbiBpbnN0YW5jZW9mIENsYXNz\nKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAg\nIGNzdGF0ZS52YWx1ZSA9IEZpbHRlcnMuY29udmVydChjc3RhdGUudmFsdWUs\nCiAgICAgICAgICAgICAgICAgICAgICAgIChDbGFzcykgYWN0aW9uKTsKICAg\nICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0g\nY2F0Y2ggKENsYXNzQ2FzdEV4Y2VwdGlvbiBjY2UpIHsKICAgICAgICAgICAg\nICAgICAgICBmYWlsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAg\nICAgICAvLyBtYWtlIHN1cmUgd2UgY2FuIGFjY2VzcyB0aGUgaW5zdGFuY2U7\nIGV2ZW4gbm9uLXBjIHZhbHMgbWlnaHQKICAgICAgICAgICAgLy8gYmUgcHJv\neHlhYmxlCiAgICAgICAgICAgIHNtID0gbnVsbDsKICAgICAgICAgICAgdG1w\nQnJva2VyID0gbnVsbDsKICAgICAgICAgICAgaWYgKEltcGxIZWxwZXIuaXNN\nYW5hZ2VhYmxlKGNzdGF0ZS52YWx1ZSkpCiAgICAgICAgICAgICAgICBzbSA9\nIChPcGVuSlBBU3RhdGVNYW5hZ2VyKSAoSW1wbEhlbHBlci50b1BlcnNpc3Rl\nbmNlQ2FwYWJsZSgKICAgICAgICAgICAgICAgICAgICBjc3RhdGUudmFsdWUs\nCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRNZXRhRGF0YSgpLmdldFJl\ncG9zaXRvcnkoKS5nZXRDb25maWd1cmF0aW9uKCkpKS4KICAgICAgICAgICAg\nICAgICAgICBwY0dldFN0YXRlTWFuYWdlcigpOwogICAgICAgICAgICBpZiAo\nc20gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdG1wQnJva2VyID0gY3R4\nLnN0b3JlLmdldENvbnRleHQoKS5nZXRCcm9rZXIoKTsKICAgICAgICAgICAg\nICAgIHRtcEJyb2tlci50cmFuc2FjdGlvbmFsKGNzdGF0ZS52YWx1ZSwgZmFs\nc2UsIG51bGwpOwogICAgICAgICAgICAgICAgc20gPSB0bXBCcm9rZXIuZ2V0\nU3RhdGVNYW5hZ2VyKGNzdGF0ZS52YWx1ZSk7CiAgICAgICAgICAgIH0KCiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIHNw\nZWNpZmllZCBmaWVsZCB2YWx1ZSBhbmQgc3dpdGNoIGNhbmRpZGF0ZQogICAg\nICAgICAgICAgICAgY3N0YXRlLnZhbHVlID0gc20uZmV0Y2hGaWVsZCgoKEZp\nZWxkTWV0YURhdGEpIGFjdGlvbikuCiAgICAgICAgICAgICAgICAgICAgZ2V0\nSW5kZXgoKSwgdHJ1ZSk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAg\nICAgICAgICAgICAvLyBzZXRUcmFuc2FjdGlvbmFsIGRvZXMgbm90IGNsZWFy\nIHRoZSBzdGF0ZSwgd2hpY2ggaXMKICAgICAgICAgICAgICAgIC8vIGltcG9y\ndGFudCBzaW5jZSB0bXBWYWwgbWlnaHQgYmUgYWxzbyBtYW5hZ2VkIGJ5CiAg\nICAgICAgICAgICAgICAvLyBhbm90aGVyIGJyb2tlciBpZiBpdCdzIGEgcHJv\neGllZCBub24tcGMgaW5zdGFuY2UKICAgICAgICAgICAgICAgIGlmICh0bXBC\ncm9rZXIgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0bXBCcm9rZXIu\nbm9udHJhbnNhY3Rpb25hbChzbS5nZXRNYW5hZ2VkSW5zdGFuY2UoKSwgbnVs\nbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChmYWls\nZWQpCiAgICAgICAgICAgIGNzdGF0ZS52YWx1ZSA9IG51bGw7CgogICAgICAg\nIGlmIChvdGhlciAhPSBudWxsKSB7CiAgICAgICAgICAgIGNzdGF0ZS5zcWxW\nYWx1ZSA9IG90aGVyLnRvRGF0YVN0b3JlVmFsdWUoc2VsLCBjdHgsIG90aGVy\nU3RhdGUsIAogICAgICAgICAgICAgICAgY3N0YXRlLnZhbHVlKTsKICAgICAg\nICAgICAgY3N0YXRlLm90aGVyTGVuZ3RoID0gb3RoZXIubGVuZ3RoKHNlbCwg\nY3R4LCBvdGhlclN0YXRlKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgICAg\nY3N0YXRlLnNxbFZhbHVlID0gY3N0YXRlLnZhbHVlOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCwgaW50\nIGluZGV4KSB7CiAgICAgICAgQ29uc3RQYXRoRXhwU3RhdGUgY3N0YXRlID0g\nKENvbnN0UGF0aEV4cFN0YXRlKSBzdGF0ZTsKICAgICAgICBpZiAoY3N0YXRl\nLm90aGVyTGVuZ3RoID4gMSkKICAgICAgICAgICAgc3FsLmFwcGVuZFZhbHVl\nKCgoT2JqZWN0W10pIGNzdGF0ZS5zcWxWYWx1ZSlbaW5kZXhdLCAKICAgICAg\nICAgICAgICAgIGNzdGF0ZS5nZXRDb2x1bW4oaW5kZXgpKTsKICAgICAgICBl\nbHNlCiAgICAgICAgICAgIHNxbC5hcHBlbmRWYWx1ZShjc3RhdGUuc3FsVmFs\ndWUsIGNzdGF0ZS5nZXRDb2x1bW4oaW5kZXgpKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBhY2NlcHRWaXNpdChFeHByZXNzaW9uVmlzaXRvciB2aXNpdG9y\nKSB7CiAgICAgICAgdmlzaXRvci5lbnRlcih0aGlzKTsKICAgICAgICBfY29u\nc3RhbnQuYWNjZXB0VmlzaXQodmlzaXRvcik7CiAgICAgICAgdmlzaXRvci5l\neGl0KHRoaXMpOwogICAgfQoKICAgIC8qKgogICAgICogRXhwcmVzc2lvbiBz\ndGF0ZS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgQ29uc3RQ\nYXRoRXhwU3RhdGUgCiAgICAgICAgZXh0ZW5kcyBDb25zdEV4cFN0YXRlIHsK\nCiAgICAgICAgcHVibGljIGZpbmFsIEV4cFN0YXRlIGNvbnN0YW50U3RhdGU7\nCiAgICAgICAgcHVibGljIE9iamVjdCB2YWx1ZSA9IG51bGw7CiAgICAgICAg\ncHVibGljIE9iamVjdCBzcWxWYWx1ZSA9IG51bGw7CiAgICAgICAgcHVibGlj\nIGludCBvdGhlckxlbmd0aCA9IDA7CgogICAgICAgIHB1YmxpYyBDb25zdFBh\ndGhFeHBTdGF0ZShFeHBTdGF0ZSBjb25zdGFudFN0YXRlKSB7CiAgICAgICAg\nICAgIHRoaXMuY29uc3RhbnRTdGF0ZSA9IGNvbnN0YW50U3RhdGU7CiAgICAg\nICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBnZXQoRmllbGRNZXRh\nRGF0YSBmbWQsIFhNTE1ldGFEYXRhIG1ldGEpIHsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBnZXQoWE1MTWV0YURhdGEgbWV0YSwgU3RyaW5nIG5hbWUpIHsK\nICAgIH0KCiAgICBwdWJsaWMgWE1MTWV0YURhdGEgZ2V0WG1sTWFwcGluZygp\nIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRTY2hlbWFBbGlhcyhTdHJpbmcgc2NoZW1hQWxpYXMpIHsKICAgIH0K\nICAgIAogICAgcHVibGljIFN0cmluZyBnZXRTY2hlbWFBbGlhcygpIHsKICAg\nICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\nc2V0U3VicXVlcnlDb250ZXh0KENvbnRleHQgY29uZXh0LCBTdHJpbmcgY29y\ncmVsYXRpb25WYXIpIHsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldENv\ncnJlbGF0aW9uVmFyKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQp9\nCg==\n","encoding":"base64"}

