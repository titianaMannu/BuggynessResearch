{"sha":"11dd5fb031b00921d063ae51533214592dd1cc09","node_id":"MDQ6QmxvYjIwNjM2NDoxMWRkNWZiMDMxYjAwOTIxZDA2M2FlNTE1MzMyMTQ1OTJkZDFjYzA5","size":4530,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/11dd5fb031b00921d063ae51533214592dd1cc09","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmF3OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkZpbHRlcnM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuTGl0ZXJhbDsKCi8qKgog\nKiBBIGxpdGVyYWwgdmFsdWUgaW4gYSBmaWx0ZXIuCiAqCiAqIEBhdXRob3Ig\nQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgTGl0CiAgICBleHRlbmRzIENv\nbnN0CiAgICBpbXBsZW1lbnRzIExpdGVyYWwgewoKICAgIHByaXZhdGUgT2Jq\nZWN0IF92YWw7CiAgICBwcml2YXRlIGludCBfcHR5cGU7CiAgICBwcml2YXRl\nIGJvb2xlYW4gX2lzUmF3OwogICAgcHJpdmF0ZSBPYmplY3QgX3Jhd1ZhbDsK\nCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLiBTdXBwbHkgbGl0ZXJhbCB2\nYWx1ZS4KICAgICAqLwogICAgcHVibGljIExpdChPYmplY3QgdmFsLCBpbnQg\ncHR5cGUpIHsKICAgICAgICBfdmFsID0gdmFsOwogICAgICAgIF9wdHlwZSA9\nIHB0eXBlOwogICAgICAgIGlmIChfcHR5cGUgPT0gTGl0ZXJhbC5UWVBFX0RB\nVEUgfHwgX3B0eXBlID09IExpdGVyYWwuVFlQRV9USU1FIHx8CiAgICAgICAg\nICAgIF9wdHlwZSA9PSBMaXRlcmFsLlRZUEVfVElNRVNUQU1QKQogICAgICAg\nICAgICBfaXNSYXcgPSB0cnVlOwogICAgfQoKICAgIHB1YmxpYyBDbGFzcyBn\nZXRUeXBlKCkgewogICAgICAgIGlmIChfaXNSYXcgJiYgX3Jhd1ZhbCAhPSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gUmF3LmNsYXNzOwogICAgICAgIHJl\ndHVybiAoX3ZhbCA9PSBudWxsKSA/IE9iamVjdC5jbGFzcyA6IF92YWwuZ2V0\nQ2xhc3MoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJbXBsaWNpdFR5\ncGUoQ2xhc3MgdHlwZSkgewogICAgICAgIF92YWwgPSBGaWx0ZXJzLmNvbnZl\ncnQoX3ZhbCwgdHlwZSk7CiAgICB9CgogICAgcHVibGljIGludCBnZXRQYXJz\nZVR5cGUoKSB7CiAgICAgICAgcmV0dXJuIF9wdHlwZTsKICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0IGdldFZhbHVlKCkgeyAKICAgICAgICByZXR1cm4gX3Zh\nbDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRWYWx1ZShPYmplY3QgdmFs\nKSB7CiAgICAgICAgX3ZhbCA9IHZhbDsKICAgIH0KCiAgICBwdWJsaWMgT2Jq\nZWN0IGdldFZhbHVlKE9iamVjdFtdIHBhcmFtcykgewogICAgICAgIHJldHVy\nbiBnZXRWYWx1ZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMgYm9vbGVhbiBp\nc1JhdygpIHsKICAgICAgICByZXR1cm4gX2lzUmF3OwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCBzZXRSYXcoYm9vbGVhbiBpc1JhdykgewogICAgICAg\nIF9pc1JhdyA9IGlzUmF3OwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0\nUmF3VmFsdWUoKSB7CiAgICAgICAgcmV0dXJuIF9yYXdWYWw7CiAgICB9Cgog\nICAgcHVibGljIEV4cFN0YXRlIGluaXRpYWxpemUoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIGludCBmbGFncykgewogICAgICAgIHJldHVybiBuZXcg\nTGl0RXhwU3RhdGUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEV4cHJlc3Np\nb24gc3RhdGUuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIExp\ndEV4cFN0YXRlCiAgICAgICAgZXh0ZW5kcyBDb25zdEV4cFN0YXRlIHsKCiAg\nICAgICAgcHVibGljIE9iamVjdCBzcWxWYWx1ZTsKICAgICAgICBwdWJsaWMg\naW50IG90aGVyTGVuZ3RoOyAKICAgIH0gCgogICAgcHVibGljIHZvaWQgY2Fs\nY3VsYXRlVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0\nYXRlIHN0YXRlLCAKICAgICAgICBWYWwgb3RoZXIsIEV4cFN0YXRlIG90aGVy\nU3RhdGUpIHsKICAgICAgICBzdXBlci5jYWxjdWxhdGVWYWx1ZShzZWwsIGN0\neCwgc3RhdGUsIG90aGVyLCBvdGhlclN0YXRlKTsKICAgICAgICBMaXRFeHBT\ndGF0ZSBsc3RhdGUgPSAoTGl0RXhwU3RhdGUpIHN0YXRlOwogICAgICAgIGlm\nIChvdGhlciAhPSBudWxsKSB7CiAgICAgICAgICAgIGxzdGF0ZS5zcWxWYWx1\nZSA9IG90aGVyLnRvRGF0YVN0b3JlVmFsdWUoc2VsLCBjdHgsIG90aGVyU3Rh\ndGUsX3ZhbCk7CiAgICAgICAgICAgIGxzdGF0ZS5vdGhlckxlbmd0aCA9IG90\naGVyLmxlbmd0aChzZWwsIGN0eCwgb3RoZXJTdGF0ZSk7CiAgICAgICAgfSBl\nbHNlCiAgICAgICAgICAgIGxzdGF0ZS5zcWxWYWx1ZSA9IF92YWw7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgYXBwZW5kVG8oU2VsZWN0IHNlbCwgRXhwQ29u\ndGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBTUUxCdWZmZXIg\nc3FsLCBpbnQgaW5kZXgpIHsKICAgICAgICBMaXRFeHBTdGF0ZSBsc3RhdGUg\nPSAoTGl0RXhwU3RhdGUpIHN0YXRlOwogICAgICAgIGlmIChsc3RhdGUub3Ro\nZXJMZW5ndGggPiAxKQogICAgICAgICAgICBzcWwuYXBwZW5kVmFsdWUoKChP\nYmplY3RbXSkgbHN0YXRlLnNxbFZhbHVlKVtpbmRleF0sIAogICAgICAgICAg\nICAgICAgbHN0YXRlLmdldENvbHVtbihpbmRleCkpOwogICAgICAgIGVsc2Ug\naWYgKF9pc1JhdykgewogICAgICAgICAgICBpbnQgcGFyc2VUeXBlID0gZ2V0\nUGFyc2VUeXBlKCk7CiAgICAgICAgICAgIGlmIChwYXJzZVR5cGUgPT0gTGl0\nZXJhbC5UWVBFX0VOVU0pIHsgCiAgICAgICAgICAgICAgICBTdHJpbmdCdWls\nZGVyIHZhbHVlID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICAgICAg\nICAgIGJvb2xlYW4gaXNPcmRpbmFsID0gZmFsc2U7CiAgICAgICAgICAgICAg\nICBpZiAobHN0YXRlLnNxbFZhbHVlIGluc3RhbmNlb2YgSW50ZWdlcikKICAg\nICAgICAgICAgICAgICAgICBpc09yZGluYWwgPSB0cnVlOwogICAgICAgICAg\nICAgICAgaWYgKCFpc09yZGluYWwpCiAgICAgICAgICAgICAgICAgICAgdmFs\ndWUuYXBwZW5kKCInIik7CiAgICAgICAgICAgICAgICB2YWx1ZS5hcHBlbmQo\nbHN0YXRlLnNxbFZhbHVlKTsKICAgICAgICAgICAgICAgIGlmICghaXNPcmRp\nbmFsKQogICAgICAgICAgICAgICAgICAgIHZhbHVlLmFwcGVuZCgiJyIpOwog\nICAgICAgICAgICAgICAgbHN0YXRlLnNxbFZhbHVlID0gbmV3IFJhdyh2YWx1\nZS50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgIF9yYXdWYWwgPSBsc3Rh\ndGUuc3FsVmFsdWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VUeXBl\nID09IExpdGVyYWwuVFlQRV9EQVRFIHx8IHBhcnNlVHlwZSA9PSBMaXRlcmFs\nLlRZUEVfVElNRSB8fAogICAgICAgICAgICAgICAgcGFyc2VUeXBlID09IExp\ndGVyYWwuVFlQRV9USU1FU1RBTVApIHsKICAgICAgICAgICAgICAgIGxzdGF0\nZS5zcWxWYWx1ZSA9IG5ldyBSYXcoX3ZhbC50b1N0cmluZygpKTsKICAgICAg\nICAgICAgICAgIF9yYXdWYWwgPSBsc3RhdGUuc3FsVmFsdWU7CiAgICAgICAg\nICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBsc3RhdGUuc3FsVmFsdWUg\nPSBuZXcgUmF3KF92YWwgaW5zdGFuY2VvZiBTdHJpbmcgPyAiJyIrX3ZhbCsi\nJyIgOiBfdmFsLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgX3Jhd1Zh\nbCA9IGxzdGF0ZS5zcWxWYWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICBzcWwuYXBwZW5kVmFsdWUobHN0YXRlLnNxbFZhbHVlLCBsc3Rh\ndGUuZ2V0Q29sdW1uKGluZGV4KSk7CiAgICB9Cn0K\n","encoding":"base64"}

