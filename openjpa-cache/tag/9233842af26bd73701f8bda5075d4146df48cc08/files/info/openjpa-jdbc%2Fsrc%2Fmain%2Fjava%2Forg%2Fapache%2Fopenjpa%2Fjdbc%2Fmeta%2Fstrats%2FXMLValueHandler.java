{"sha":"dbf3188a2d2c1e7677fc9581be1cc5ffdd4ba337","node_id":"MDQ6QmxvYjIwNjM2NDpkYmYzMTg4YTJkMmMxZTc2NzdmYzk1ODFiZTFjYzVmZmRkNGJhMzM3","size":3597,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/dbf3188a2d2c1e7677fc9581be1cc5ffdd4ba337","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLmlvLlN0cmluZ1JlYWRlcjsKaW1wb3J0IGphdmEuaW8u\nU3RyaW5nV3JpdGVyOwppbXBvcnQgamF2YS5pby5Xcml0ZXI7CgppbXBvcnQg\namF2YXgueG1sLmJpbmQuSkFYQkNvbnRleHQ7CmltcG9ydCBqYXZheC54bWwu\nYmluZC5KQVhCRXhjZXB0aW9uOwppbXBvcnQgamF2YXgueG1sLmJpbmQuTWFy\nc2hhbGxlcjsKaW1wb3J0IGphdmF4LnhtbC5iaW5kLlVubWFyc2hhbGxlcjsK\naW1wb3J0IGphdmF4LnhtbC50cmFuc2Zvcm0uc3RyZWFtLlN0cmVhbVNvdXJj\nZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRC\nQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5W\nYWx1ZU1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\nY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1l\ndGEuSmF2YVR5cGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwu\nSW50ZXJuYWxFeGNlcHRpb247CgovKioKICogQmFzZSBjbGFzcyBmb3IgeG1s\nIHZhbHVlIGhhbmRsZXJzLgogKgogKiBAYXV0aG9yIENhdGFsaW5hIFdlaQog\nKiBAc2luY2UgMS4wCiAqLwpwdWJsaWMgY2xhc3MgWE1MVmFsdWVIYW5kbGVy\nCiAgICBleHRlbmRzIEFic3RyYWN0VmFsdWVIYW5kbGVyIHsKICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIFN0cmluZyBQUk9YWV9TVUZGSVggPSAiJHByb3h5\nIjsKCiAgICBwdWJsaWMgQ29sdW1uW10gbWFwKFZhbHVlTWFwcGluZyB2bSwg\nU3RyaW5nIG5hbWUsIENvbHVtbklPIGlvLAogICAgICAgIGJvb2xlYW4gYWRh\ncHQpIHsKICAgICAgICBDb2x1bW4gY29sID0gbmV3IENvbHVtbigpOwogICAg\nICAgIGNvbC5zZXROYW1lKG5hbWUpOwogICAgICAgIGNvbC5zZXRKYXZhVHlw\nZShKYXZhVHlwZXMuU1RSSU5HKTsKICAgICAgICBjb2wuc2V0U2l6ZSgtMSk7\nCiAgICAgICAgY29sLnNldFR5cGVOYW1lKHZtLmdldE1hcHBpbmdSZXBvc2l0\nb3J5KCkuZ2V0REJEaWN0aW9uYXJ5KCkKICAgICAgICAgICAgLnhtbFR5cGVO\nYW1lKTsKICAgICAgICBjb2wuc2V0WE1MKHRydWUpOwogICAgICAgIHJldHVy\nbiBuZXcgQ29sdW1uW117IGNvbCB9OwogICAgfQoKICAgIHB1YmxpYyBPYmpl\nY3QgdG9EYXRhU3RvcmVWYWx1ZShWYWx1ZU1hcHBpbmcgdm0sIE9iamVjdCB2\nYWwsCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgLy8gY2hl\nY2sgZm9yIG51bGwgdmFsdWUuCiAgICAgICAgaWYgKHZhbCA9PSBudWxsKSAK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgSkFYQkNvbnRleHQgamMgPSBKQVhCQ29udGV4dC5uZXdJbnN0YW5j\nZSgKICAgICAgICAgICAgICAgIC8vIG9uIHVwZGF0ZSB2YWwgaXMgYSBwcm94\neSwgdGhhdCBjYW4gbm90IGJlIG1hcnNoYWxsZWQuCiAgICAgICAgICAgICAg\nICAvLyBzbyB3ZSBnZXQgb3JpZ2luYWwgdHlwZSBpZiB2YWwgaXMgYSBwcm94\neS4KICAgICAgICAgICAgICAgICh2YWwuZ2V0Q2xhc3MoKS5nZXROYW1lKCku\nZW5kc1dpdGgoUFJPWFlfU1VGRklYKSkKICAgICAgICAgICAgICAgICAgICAg\nPyB2YWwuZ2V0Q2xhc3MoKS5nZXRTdXBlcmNsYXNzKCkKICAgICAgICAgICAg\nICAgICAgICAgOiB2YWwuZ2V0Q2xhc3MoKSk7CiAgICAgICAgICAgIE1hcnNo\nYWxsZXIgbSA9IGpjLmNyZWF0ZU1hcnNoYWxsZXIoKTsKICAgICAgICAgICAg\nLy8gU29tZSBEQnMsIGxpa2UgTVMgU1FMIFNlcnZlciwgcmVxdWlyZSBhIGRp\nZmZlcmVudCBlbmNvZGluZyB0aGFuIHRoZSBKQVhCIGRlZmF1bHQgb2YgVVRG\nLTgKICAgICAgICAgICAgbS5zZXRQcm9wZXJ0eSgiamF4Yi5lbmNvZGluZyIs\nIHN0b3JlLmdldERCRGljdGlvbmFyeSgpLmdldFhNTFR5cGVFbmNvZGluZygp\nKTsKICAgICAgICAgICAgV3JpdGVyIHJlc3VsdCA9IG5ldyBTdHJpbmdXcml0\nZXIoKTsKICAgICAgICAgICAgbS5tYXJzaGFsKCB2YWwsIHJlc3VsdCApOwog\nICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CiAgICAgICAg\nfQogICAgICAgIGNhdGNoIChKQVhCRXhjZXB0aW9uIGplKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbihqZSk7CiAgICAgICAg\nfQogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgdG9PYmplY3RWYWx1ZShWYWx1\nZU1hcHBpbmcgdm0sIE9iamVjdCB2YWwpIHsKICAgICAgICAvLyBjaGVjayBm\nb3IgbnVsbCB2YWx1ZS4KICAgICAgICBpZiAodmFsID09IG51bGwpIAogICAg\nICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBTdHJpbmcgcGFja2FnZU5hbWUgPSB2bS5nZXREZWNsYXJlZFR5cGUoKS5n\nZXRQYWNrYWdlKCkuZ2V0TmFtZSgpOwogICAgICAgICAgICBKQVhCQ29udGV4\ndCBqYyA9IEpBWEJDb250ZXh0Lm5ld0luc3RhbmNlKHBhY2thZ2VOYW1lKTsK\nICAgICAgICAgICAgVW5tYXJzaGFsbGVyIHUgPSBqYy5jcmVhdGVVbm1hcnNo\nYWxsZXIoKTsKICAgICAgICAgICAgcmV0dXJuIHUudW5tYXJzaGFsKG5ldyBT\ndHJlYW1Tb3VyY2UobmV3IFN0cmluZ1JlYWRlcgogICAgICAgICAgICAgICAg\nICAgICh2YWwudG9TdHJpbmcoKSkpKTsKICAgICAgICB9CiAgICAgICAgY2F0\nY2ggKEpBWEJFeGNlcHRpb24gamUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3\nIEludGVybmFsRXhjZXB0aW9uKGplKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

