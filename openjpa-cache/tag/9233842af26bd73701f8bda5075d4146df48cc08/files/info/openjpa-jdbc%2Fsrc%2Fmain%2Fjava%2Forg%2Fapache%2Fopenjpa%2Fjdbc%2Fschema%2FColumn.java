{"sha":"ef3e827994f86250d1399654ee902ca76e43cb4d","node_id":"MDQ6QmxvYjIwNjM2NDplZjNlODI3OTk0Zjg2MjUwZDEzOTk2NTRlZTkwMmNhNzZlNDNjYjRk","size":24323,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ef3e827994f86250d1399654ee902ca76e43cb4d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGguQmln\nSW50ZWdlcjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNlTWV0YURhdGE7Cmlt\ncG9ydCBqYXZhLnNxbC5EYXRlOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1w\nb3J0IGphdmEuc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEuc3FsLlR5cGVz\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FM\nVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLlZl\ncnNpb25TdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkphdmFUeXBlczsKaW1wb3J0IHNlcnAudXRpbC5OdW1iZXJzOwoKLyoqCiAq\nIFJlcHJlc2VudHMgYSBkYXRhYmFzZSBjb2x1bW4uIENsb3NlbHkgYWxpZ25l\nZCB3aXRoIHRoZSBjb2x1bW4KICogaW5mb3JtYXRpb24gYXZhaWxhYmxlIGZy\nb20ge0BsaW5rIERhdGFiYXNlTWV0YURhdGF9LgogKgogKiBAYXV0aG9yIEFi\nZSBXaGl0ZQogKiBAYXV0aG9yIFN0ZXBoZW4gS2ltCiAqLwpwdWJsaWMgY2xh\nc3MgQ29sdW1uCiAgICBleHRlbmRzIFJlZmVyZW5jZUNvdW50ZXIgewoKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfVU5JTlNFUlRBQkxFID0g\nMiA8PCAwOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRkxBR19VTlVQ\nREFUQUJMRSA9IDIgPDwgMTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50\nIEZMQUdfRElSRUNUX0lOU0VSVCA9IDIgPDwgMjsKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgaW50IEZMQUdfRElSRUNUX1VQREFURSA9IDIgPDwgMzsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfRktfSU5TRVJUID0gMiA8\nPCA0OwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRkxBR19GS19VUERB\nVEUgPSAyIDw8IDU7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBGTEFH\nX1BLX0pPSU4gPSAyIDw8IDY7CgogICAgcHJpdmF0ZSBTdHJpbmcgX25hbWUg\nPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX2Z1bGxOYW1lID0gbnVsbDsK\nICAgIHByaXZhdGUgVGFibGUgX3RhYmxlID0gbnVsbDsKICAgIHByaXZhdGUg\nU3RyaW5nIF90YWJsZU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcg\nX3NjaGVtYU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBpbnQgX3R5cGUgPSBU\neXBlcy5PVEhFUjsKICAgIHByaXZhdGUgU3RyaW5nIF90eXBlTmFtZSA9IG51\nbGw7CiAgICBwcml2YXRlIGludCBfamF2YVR5cGUgPSBKYXZhVHlwZXMuT0JK\nRUNUOwogICAgcHJpdmF0ZSBpbnQgX3NpemUgPSAwOwogICAgcHJpdmF0ZSBp\nbnQgX2RlY2ltYWxzID0gMDsKICAgIHByaXZhdGUgU3RyaW5nIF9kZWZhdWx0\nU3RyID0gbnVsbDsKICAgIHByaXZhdGUgT2JqZWN0IF9kZWZhdWx0ID0gbnVs\nbDsKICAgIHByaXZhdGUgQm9vbGVhbiBfbm90TnVsbCA9IG51bGw7CiAgICBw\ncml2YXRlIGJvb2xlYW4gX2F1dG9Bc3NpZ24gPSBmYWxzZTsKICAgIHByaXZh\ndGUgYm9vbGVhbiBfcmVsID0gZmFsc2U7CiAgICBwcml2YXRlIGJvb2xlYW4g\nX2ltcGxpY2l0UmVsYXRpb24gPSBmYWxzZTsKICAgIHByaXZhdGUgU3RyaW5n\nIF90YXJnZXQgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX3RhcmdldEZp\nZWxkID0gbnVsbDsKICAgIHByaXZhdGUgaW50IF9mbGFncyA9IDA7CgogICAg\ncHJpdmF0ZSBpbnQgX2luZGV4ID0gMDsKICAgIHByaXZhdGUgYm9vbGVhbiBf\ncGsgPSBmYWxzZTsKICAgIHByaXZhdGUgVmVyc2lvblN0cmF0ZWd5IF92ZXJz\naW9uU3RyYXRlZ3kgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX2NvbW1l\nbnQgPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFuIF9YTUwgPSBmYWxzZTsK\nICAgIHByaXZhdGUgYm9vbGVhbiBfaXNVbmkxTUZLID0gZmFsc2U7CiAgICAK\nICAgIC8qKgogICAgICogRGVmYXVsdCBjb25zdHJ1Y3Rvci4KICAgICAqLwog\nICAgcHVibGljIENvbHVtbigpIHsKICAgIH0KCiAgICAvKioKICAgICAqIENv\nbnN0cnVjdG9yLgogICAgICoKICAgICAqIEBwYXJhbSBuYW1lIHRoZSBuYW1l\nIG9mIHRoZSBjb2x1bW4KICAgICAqIEBwYXJhbSB0YWJsZSB0aGUgY29sdW1u\nJ3MgdGFibGUKICAgICAqLwogICAgcHVibGljIENvbHVtbihTdHJpbmcgbmFt\nZSwgVGFibGUgdGFibGUpIHsKICAgICAgICBzZXROYW1lKG5hbWUpOwogICAg\nICAgIGlmICh0YWJsZSAhPSBudWxsKSB7CiAgICAgICAgICAgIHNldFRhYmxl\nTmFtZSh0YWJsZS5nZXROYW1lKCkpOwogICAgICAgICAgICBzZXRTY2hlbWFO\nYW1lKHRhYmxlLmdldFNjaGVtYU5hbWUoKSk7CiAgICAgICAgfQogICAgICAg\nIF90YWJsZSA9IHRhYmxlOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbGVk\nIHdoZW4gdGhlIGNvbHVtbiBpcyByZW1vdmVkIGZyb20gaXRzIHRhYmxlLiBS\nZW1vdmVzIHRoZSBjb2x1bW4KICAgICAqIGZyb20gYWxsIHRhYmxlIGNvbnN0\ncmFpbnRzIGFuZCBpbmRleGVzLCB0aGVuIGludmFsaWRhdGVzIGl0LgogICAg\nICovCiAgICB2b2lkIHJlbW92ZSgpIHsKICAgICAgICBUYWJsZSB0YWJsZSA9\nIGdldFRhYmxlKCk7CiAgICAgICAgaWYgKHRhYmxlID09IG51bGwpCiAgICAg\nICAgICAgIHJldHVybjsKCiAgICAgICAgU2NoZW1hIHNjaGVtYSA9IHRhYmxl\nLmdldFNjaGVtYSgpOwogICAgICAgIGlmIChzY2hlbWEgIT0gbnVsbCAmJiBz\nY2hlbWEuZ2V0U2NoZW1hR3JvdXAoKSAhPSBudWxsKSB7CiAgICAgICAgICAg\nIFNjaGVtYVtdIHNjaGVtYXMgPSBzY2hlbWEuZ2V0U2NoZW1hR3JvdXAoKS5n\nZXRTY2hlbWFzKCk7CiAgICAgICAgICAgIFRhYmxlW10gdGFiczsKICAgICAg\nICAgICAgRm9yZWlnbktleVtdIGZrczsKICAgICAgICAgICAgQ29sdW1uW10g\nY29sczsKICAgICAgICAgICAgQ29sdW1uW10gcGtzOwogICAgICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHNjaGVtYXMubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgICAgIHRhYnMgPSBzY2hlbWFzW2ldLmdldFRhYmxlcygpOwog\nICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCB0YWJzLmxlbmd0\naDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZmtzID0gdGFic1tqXS5n\nZXRGb3JlaWduS2V5cygpOwogICAgICAgICAgICAgICAgICAgIGZvciAoaW50\nIGsgPSAwOyBrIDwgZmtzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgIGNvbHMgPSBma3Nba10uZ2V0Q29sdW1ucygpOwogICAgICAg\nICAgICAgICAgICAgICAgICBwa3MgPSBma3Nba10uZ2V0UHJpbWFyeUtleUNv\nbHVtbnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgbCA9\nIDA7IGwgPCBjb2xzLmxlbmd0aDsgbCsrKQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgaWYgKHRoaXMuZXF1YWxzKGNvbHNbbF0pIHx8IHRoaXMuZXF1\nYWxzKHBrc1tsXSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nZmtzW2tdLnJlbW92ZUpvaW4oY29sc1tsXSk7CgogICAgICAgICAgICAgICAg\nICAgICAgICBjb2xzID0gZmtzW2tdLmdldENvbnN0YW50Q29sdW1ucygpOwog\nICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBsID0gMDsgbCA8IGNv\nbHMubGVuZ3RoOyBsKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBp\nZiAodGhpcy5lcXVhbHMoY29sc1tsXSkpCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgZmtzW2tdLnJlbW92ZUpvaW4oY29sc1tsXSk7CgogICAg\nICAgICAgICAgICAgICAgICAgICBwa3MgPSBma3Nba10uZ2V0Q29uc3RhbnRQ\ncmltYXJ5S2V5Q29sdW1ucygpOwogICAgICAgICAgICAgICAgICAgICAgICBm\nb3IgKGludCBsID0gMDsgbCA8IHBrcy5sZW5ndGg7IGwrKykKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVxdWFscyhwa3NbbF0pKQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrc1trXS5yZW1vdmVK\nb2luKHBrc1tsXSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmtz\nW2tdLmdldENvbHVtbnMoKS5sZW5ndGggPT0gMAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgJiYgZmtzW2tdLmdldENvbnN0YW50Q29sdW1ucygpLmxl\nbmd0aCA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic1tq\nXS5yZW1vdmVGb3JlaWduS2V5KGZrc1trXSk7CiAgICAgICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg\nfQoKICAgICAgICBJbmRleFtdIGlkeHMgPSB0YWJsZS5nZXRJbmRleGVzKCk7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpZHhzLmxlbmd0aDsgaSsr\nKQogICAgICAgICAgICBpZiAoaWR4c1tpXS5yZW1vdmVDb2x1bW4odGhpcykg\nJiYgaWR4c1tpXS5nZXRDb2x1bW5zKCkubGVuZ3RoID09IDApCiAgICAgICAg\nICAgICAgICB0YWJsZS5yZW1vdmVJbmRleChpZHhzW2ldKTsKCiAgICAgICAg\nVW5pcXVlW10gdW5xcyA9IHRhYmxlLmdldFVuaXF1ZXMoKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHVucXMubGVuZ3RoOyBpKyspCiAgICAgICAg\nICAgIGlmICh1bnFzW2ldLnJlbW92ZUNvbHVtbih0aGlzKSAmJiB1bnFzW2ld\nLmdldENvbHVtbnMoKS5sZW5ndGggPT0gMCkKICAgICAgICAgICAgICAgIHRh\nYmxlLnJlbW92ZVVuaXF1ZSh1bnFzW2ldKTsKCiAgICAgICAgUHJpbWFyeUtl\neSBwayA9IHRhYmxlLmdldFByaW1hcnlLZXkoKTsKICAgICAgICBpZiAocGsg\nIT0gbnVsbCAmJiBway5yZW1vdmVDb2x1bW4odGhpcykgJiYgcGsuZ2V0Q29s\ndW1ucygpLmxlbmd0aCA9PSAwKQogICAgICAgICAgICB0YWJsZS5yZW1vdmVQ\ncmltYXJ5S2V5KCk7CgogICAgICAgIF90YWJsZSA9IG51bGw7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHRhYmxlIGZvciB0aGUgY29sdW1u\nLgogICAgICovCiAgICBwdWJsaWMgVGFibGUgZ2V0VGFibGUoKSB7CiAgICAg\nICAgcmV0dXJuIF90YWJsZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBj\nb2x1bW4ncyB0YWJsZSBuYW1lLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5n\nIGdldFRhYmxlTmFtZSgpIHsKICAgICAgICByZXR1cm4gX3RhYmxlTmFtZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBjb2x1bW4ncyB0YWJsZSBuYW1l\nLiBZb3UgY2FuIG9ubHkgY2FsbCB0aGlzIG1ldGhvZCBvbiBjb2x1bW5zCiAg\nICAgKiB3aG9zZSB0YWJsZSBvYmplY3QgaXMgbm90IHNldC4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0VGFibGVOYW1lKFN0cmluZyBuYW1lKSB7CiAg\nICAgICAgaWYgKGdldFRhYmxlKCkgIT0gbnVsbCkKICAgICAgICAgICAgdGhy\nb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwogICAgICAgIF90YWJs\nZU5hbWUgPSBuYW1lOwogICAgICAgIF9mdWxsTmFtZSA9IG51bGw7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogUmVzZXQgdGhlIHRhYmxlIG5hbWUgd2l0\naCB0aGUgZnVsbHkgcXVhbGlmaWVkIHRhYmxlIG5hbWUgd2hpY2gKICAgICAq\nIGluY2x1ZGVzIHRoZSBzY2hlbWEgbmFtZQogICAgICovCiAgICBwdWJsaWMg\ndm9pZCByZXNldFRhYmxlTmFtZShTdHJpbmcgbmFtZSkgewogICAgICAgIF90\nYWJsZU5hbWUgPSBuYW1lOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGNv\nbHVtbidzIHNjaGVtYSBuYW1lLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5n\nIGdldFNjaGVtYU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9zY2hlbWFOYW1l\nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGNvbHVtbidzIHNjaGVtYSBu\nYW1lLiBZb3UgY2FuIG9ubHkgY2FsbCB0aGlzIG1ldGhvZCBvbiBjb2x1bW5z\nCiAgICAgKiB3aG9zZSB0YWJsZSBvYmplY3QgaXMgbm90IHNldC4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0U2NoZW1hTmFtZShTdHJpbmcgbmFtZSkg\newogICAgICAgIGlmIChnZXRUYWJsZSgpICE9IG51bGwpCiAgICAgICAgICAg\nIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKTsKICAgICAgICBf\nc2NoZW1hTmFtZSA9IG5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm4gdGhlIGNvbHVtbidzIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0TmFtZSgpIHsKICAgICAgICByZXR1cm4gX25hbWU7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTZXQgdGhlIGNvbHVtbidzIG5hbWUuIFlvdSBjYW4g\nb25seSBjYWxsIHRoaXMgbWV0aG9kIG9uIGNvbHVtbnMKICAgICAqIHdob3Nl\nIHRhYmxlIG9iamVjdCBpcyBub3Qgc2V0LgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXROYW1lKFN0cmluZyBuYW1lKSB7CiAgICAgICAgaWYgKGdldFRh\nYmxlKCkgIT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxT\ndGF0ZUV4Y2VwdGlvbigpOwogICAgICAgIF9uYW1lID0gbmFtZTsKICAgICAg\nICBfZnVsbE5hbWUgPSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSBjb2x1bW4ncyBmdWxsIG5hbWUsIGluIHRoZSBmb3JtICZsdDt0\nYWJsZSZndDsuJmx0O25hbWUmZ3Q7LgogICAgICovCiAgICBwdWJsaWMgU3Ry\naW5nIGdldEZ1bGxOYW1lKCkgewogICAgICAgIGlmIChfZnVsbE5hbWUgPT0g\nbnVsbCkgewogICAgICAgICAgICBTdHJpbmcgbmFtZSA9IGdldE5hbWUoKTsK\nICAgICAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgICAg\nIHJldHVybiBudWxsOwogICAgICAgICAgICBTdHJpbmcgdG5hbWUgPSBnZXRU\nYWJsZU5hbWUoKTsKICAgICAgICAgICAgaWYgKHRuYW1lID09IG51bGwpCiAg\nICAgICAgICAgICAgICByZXR1cm4gbmFtZTsKICAgICAgICAgICAgX2Z1bGxO\nYW1lID0gdG5hbWUgKyAiLiIgKyBuYW1lOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gX2Z1bGxOYW1lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBjb2x1bW4ncyBTUUwgdHlwZS4gVGhpcyB3aWxsIGJlIG9uZSBvZiB0\naGUgdHlwZSBjb25zdGFudHMKICAgICAqIGRlZmluZWQgaW4ge0BsaW5rIFR5\ncGVzfS4KICAgICAqLwogICAgcHVibGljIGludCBnZXRUeXBlKCkgewogICAg\nICAgIHJldHVybiBfdHlwZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0\naGUgY29sdW1uJ3MgU1FMIHR5cGUuIFRoaXMgc2hvdWxkIGJlIG9uZSBvZiB0\naGUgdHlwZSBjb25zdGFudHMKICAgICAqIGRlZmluZWQgaW4ge0BsaW5rIFR5\ncGVzfS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VHlwZShpbnQgc3Fs\nVHlwZSkgewogICAgICAgIF90eXBlID0gc3FsVHlwZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRoZSBkYXRhYmFzZS1zcGVjaWZpYyBTUUwgdHlwZSBvZiB0\naGlzIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRUeXBl\nTmFtZSgpIHsKICAgICAgICByZXR1cm4gX3R5cGVOYW1lOwogICAgfQoKICAg\nIC8qKgogICAgICogVGhlIGRhdGFiYXNlLXNwZWNpZmljIFNRTCB0eXBlIG9m\nIHRoaXMgY29sdW1uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRUeXBl\nTmFtZShTdHJpbmcgdHlwZU5hbWUpIHsKICAgICAgICBfdHlwZU5hbWUgPSB0\neXBlTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBKYXZhIHR5cGUg\ndGhlIGRhdGEgaW4gdGhpcyBjb2x1bW4gaXMgdHJlYXRlZCBhcywgZnJvbQog\nICAgICoge0BsaW5rIEphdmFUeXBlc30gb3Ige0BsaW5rIEphdmFTUUxUeXBl\nc30uCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0SmF2YVR5cGUoKSB7CiAg\nICAgICAgcmV0dXJuIF9qYXZhVHlwZTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoZSBKYXZhIHR5cGUgdGhlIGRhdGEgaW4gdGhpcyBjb2x1bW4gaXMgdHJl\nYXRlZCBhcywgZnJvbQogICAgICoge0BsaW5rIEphdmFUeXBlc30gb3Ige0Bs\naW5rIEphdmFTUUxUeXBlc30uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndEphdmFUeXBlKGludCB0eXBlKSB7CiAgICAgICAgX2phdmFUeXBlID0gdHlw\nZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY29sdW1uJ3Mg\nc2l6ZS4KICAgICAqLwogICAgcHVibGljIGludCBnZXRTaXplKCkgewogICAg\nICAgIHJldHVybiBfc2l6ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0\naGUgY29sdW1uJ3Mgc2l6ZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nU2l6ZShpbnQgc2l6ZSkgewogICAgICAgIF9zaXplID0gc2l6ZTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbnVtYmVyIG9mIGRlY2ltYWwg\nZGlnaXRzIGZvciB0aGUgY29sdW1uLCBpZiBhcHBsaWNhYmxlLgogICAgICov\nCiAgICBwdWJsaWMgaW50IGdldERlY2ltYWxEaWdpdHMoKSB7CiAgICAgICAg\ncmV0dXJuIF9kZWNpbWFsczsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0\naGUgbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzIGZvciB0aGUgY29sdW1uLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXREZWNpbWFsRGlnaXRzKGludCBk\naWdpdHMpIHsKICAgICAgICBfZGVjaW1hbHMgPSBkaWdpdHM7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUgc2V0IGZv\nciB0aGUgY29sdW1uLCBpZiBhbnkuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0RGVmYXVsdFN0cmluZygpIHsKICAgICAgICByZXR1cm4gX2RlZmF1\nbHRTdHI7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGRlZmF1bHQg\ndmFsdWUgZm9yIHRoZSBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldERlZmF1bHRTdHJpbmcoU3RyaW5nIGRlZikgewogICAgICAgIF9kZWZh\ndWx0U3RyID0gZGVmOwogICAgICAgIF9kZWZhdWx0ID0gbnVsbDsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgZGVmYXVsdCB2YWx1ZSBzZXQg\nZm9yIHRoaXMgY29sdW1uLCBpZiBhbnkuIElmIG9ubHkgYSBkZWZhdWx0CiAg\nICAgKiBzdHJpbmcgaGFzIGJlZW4gc2V0LCBhdHRlbXB0cyB0byBjb252ZXJ0\nIGl0IHRvIHRoZSByaWdodCB0eXBlIGJhc2VkCiAgICAgKiBvbiB0aGUgSmF2\nYSB0eXBlIHNldCBmb3IgdGhpcyBjb2x1bW4uCiAgICAgKi8KICAgIHB1Ymxp\nYyBPYmplY3QgZ2V0RGVmYXVsdCgpIHsKICAgICAgICBpZiAoX2RlZmF1bHQg\nIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIF9kZWZhdWx0OwogICAgICAg\nIGlmIChfZGVmYXVsdFN0ciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4g\nbnVsbDsKCiAgICAgICAgc3dpdGNoIChfamF2YVR5cGUpIHsKICAgICAgICAg\nICAgY2FzZSBKYXZhVHlwZXMuQk9PTEVBTjoKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuQk9PTEVBTl9PQko6CiAgICAgICAgICAgICAgICBfZGVmYXVs\ndCA9ICgidHJ1ZSIuZXF1YWxzKF9kZWZhdWx0U3RyKSkgPyBCb29sZWFuLlRS\nVUUKICAgICAgICAgICAgICAgICAgICA6IEJvb2xlYW4uRkFMU0U7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQllURToKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQllURV9PQko6CiAg\nICAgICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBCeXRlKF9kZWZhdWx0U3Ry\nKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5DSEFSOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DSEFS\nX09CSjoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gbmV3IENoYXJhY3Rl\ncihfZGVmYXVsdFN0ci5jaGFyQXQoMCkpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkRPVUJMRToKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuRE9VQkxFX09CSjoKICAgICAgICAgICAg\nICAgIF9kZWZhdWx0ID0gbmV3IERvdWJsZShfZGVmYXVsdFN0cik7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nRkxPQVQ6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkZMT0FUX09CSjoK\nICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gbmV3IEZsb2F0KF9kZWZhdWx0\nU3RyKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNl\nIEphdmFUeXBlcy5JTlQ6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklO\nVF9PQko6CiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IE51bWJlcnMudmFs\ndWVPZihJbnRlZ2VyLnBhcnNlSW50KF9kZWZhdWx0U3RyKSk7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9O\nRzoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9OR19PQko6CiAgICAg\nICAgICAgICAgICBfZGVmYXVsdCA9IE51bWJlcnMudmFsdWVPZihMb25nLnBh\ncnNlTG9uZyhfZGVmYXVsdFN0cikpOwogICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk5VTUJFUjoKICAgICAgICAg\nICAgY2FzZSBKYXZhVHlwZXMuQklHREVDSU1BTDoKICAgICAgICAgICAgICAg\nIF9kZWZhdWx0ID0gbmV3IEJpZ0RlY2ltYWwoX2RlZmF1bHRTdHIpOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLlNIT1JUOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5TSE9SVF9PQko6\nCiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBTaG9ydChfZGVmYXVs\ndFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuREFURToKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0g\nbmV3IGphdmEudXRpbC5EYXRlKF9kZWZhdWx0U3RyKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CSUdJTlRF\nR0VSOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgQmlnSW50ZWdl\ncihfZGVmYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgY2FzZSBKYXZhU1FMVHlwZXMuU1FMX0RBVEU6CiAgICAgICAgICAg\nICAgICBfZGVmYXVsdCA9IERhdGUudmFsdWVPZihfZGVmYXVsdFN0cik7CiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhU1FM\nVHlwZXMuVElNRVNUQU1QOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBU\naW1lc3RhbXAudmFsdWVPZihfZGVmYXVsdFN0cik7CiAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhU1FMVHlwZXMuVElNRToK\nICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gVGltZS52YWx1ZU9mKF9kZWZh\ndWx0U3RyKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBk\nZWZhdWx0OgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBfZGVmYXVsdFN0\ncjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9kZWZhdWx0OwogICAgfQoK\nICAgIC8qKgogICAgICogU2V0IHRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGUg\nY29sdW1uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXREZWZhdWx0KE9i\namVjdCBkZWYpIHsKICAgICAgICBfZGVmYXVsdCA9IGRlZjsKICAgICAgICBf\nZGVmYXVsdFN0ciA9IChkZWYgPT0gbnVsbCkgPyBudWxsIDogZGVmLnRvU3Ry\naW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0\naGlzIGlzIGEgTk9UIE5VTEwgY29sdW1uLgogICAgICovCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc05vdE51bGwoKSB7CiAgICAgICAgcmV0dXJuIF9ub3ROdWxs\nID09IEJvb2xlYW4uVFJVRTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB3\naGV0aGVyIHRoaXMgaXMgYSBOT1QgTlVMTCBjb2x1bW4uCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldE5vdE51bGwoYm9vbGVhbiBub3ROdWxsKSB7CiAg\nICAgICAgX25vdE51bGwgPSAobm90TnVsbCkgPyBCb29sZWFuLlRSVUUgOiBC\nb29sZWFuLkZBTFNFOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0\naGUgbm90LW51bGwgcHJvcGVydHkgaGFzIGJlZW4gc2V0LgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBpc05vdE51bGxFeHBsaWNpdCgpIHsKICAgICAg\nICByZXR1cm4gX25vdE51bGwgIT0gbnVsbDsKICAgIH0KCiAgICAvKioKICAg\nICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gaXMgYXV0by1hc3NpZ25lZCBhIHZh\nbHVlIG9uIGluc2VydC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNB\ndXRvQXNzaWduZWQoKSB7CiAgICAgICAgcmV0dXJuIF9hdXRvQXNzaWduOwog\nICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGNvbHVtbiBpcyBh\ndXRvLWluY3JlbWVudGluZy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nQXV0b0Fzc2lnbmVkKGJvb2xlYW4gYXV0b0Fzc2lnbikgewogICAgICAgIGlm\nIChhdXRvQXNzaWduICE9IF9hdXRvQXNzaWduICYmIGdldFRhYmxlKCkgIT0g\nbnVsbCkKICAgICAgICAgICAgZ2V0VGFibGUoKS5jaGFuZ2VBdXRvQXNzaWdu\nZWQodGhpcyk7CiAgICAgICAgX2F1dG9Bc3NpZ24gPSBhdXRvQXNzaWduOwog\nICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGNvbHVtbiBzdG9y\nZXMgc29tZSBmb3JtIG9mIHNlcmlhbGl6ZWQgaWRlbnRpdHkgdmFsdWUgZm9y\nCiAgICAgKiBhIHJlbGF0ZWQgcmVjb3JkLiBUaGlzIG1ha2VzIHRoZSBjb2x1\nbW4gZGVwZW5kZW50IG9uIHRoZSBrbm93aW5nIHRoZQogICAgICogZmluYWwg\naWRlbnRpdHkgb2YgdGhlIHJlbGF0aW9uIGJlZm9yZSB0aGUgY29sdW1uIHZh\nbHVlIGlzIHNldC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNSZWxh\ndGlvbklkKCkgewogICAgICAgIHJldHVybiBfcmVsOwogICAgfQoKICAgIC8q\nKgogICAgICogV2hldGhlciB0aGlzIGNvbHVtbiBzdG9yZXMgc29tZSBmb3Jt\nIG9mIHNlcmlhbGl6ZWQgaWRlbnRpdHkgdmFsdWUgZm9yCiAgICAgKiBhIHJl\nbGF0ZWQgcmVjb3JkLiBUaGlzIG1ha2VzIHRoZSBjb2x1bW4gZGVwZW5kZW50\nIG9uIHRoZSBrbm93aW5nIHRoZQogICAgICogZmluYWwgaWRlbnRpdHkgb2Yg\ndGhlIHJlbGF0aW9uIGJlZm9yZSB0aGUgY29sdW1uIHZhbHVlIGlzIHNldC4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0UmVsYXRpb25JZChib29sZWFu\nIHJlbCkgewogICAgICAgIGlmIChyZWwgIT0gX3JlbCAmJiBnZXRUYWJsZSgp\nICE9IG51bGwpCiAgICAgICAgICAgIGdldFRhYmxlKCkuY2hhbmdlUmVsYXRp\nb25JZCh0aGlzKTsKICAgICAgICBfcmVsID0gcmVsOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIG5hbWUgb2YgdGhlIGNvbHVtbiB0aGlzIGNvbHVtbiBq\nb2lucyB0bywgaWYgYW55LiBVc2VkIGZvciBtYXBwaW5nLgogICAgICovCiAg\nICBwdWJsaWMgU3RyaW5nIGdldFRhcmdldCgpIHsKICAgICAgICByZXR1cm4g\nX3RhcmdldDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBuYW1lIG9mIHRo\nZSBjb2x1bW4gdGhpcyBjb2x1bW4gam9pbnMgdG8sIGlmIGFueS4gVXNlZCBm\nb3IgbWFwcGluZy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VGFyZ2V0\nKFN0cmluZyB0YXJnZXQpIHsKICAgICAgICBfdGFyZ2V0ID0gU3RyaW5nVXRp\nbHMudHJpbVRvTnVsbCh0YXJnZXQpOwogICAgfQoKICAgIC8qKgogICAgICog\nVGhlIG5hbWUgb2YgdGhlIGZpZWxkIHRoaXMgY29sdW1uIGpvaW5zIHRvLCBp\nZiBhbnkuIFVzZWQgZm9yIG1hcHBpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0VGFyZ2V0RmllbGQoKSB7CiAgICAgICAgcmV0dXJuIF90YXJn\nZXRGaWVsZDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBuYW1lIG9mIHRo\nZSBmaWVsZCB0aGlzIGNvbHVtbiBqb2lucyB0bywgaWYgYW55LiBVc2VkIGZv\nciBtYXBwaW5nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRUYXJnZXRG\naWVsZChTdHJpbmcgdGFyZ2V0KSB7CiAgICAgICAgaWYgKHRhcmdldCAhPSBu\ndWxsICYmIHRhcmdldC5sZW5ndGgoKSA9PSAwKQogICAgICAgICAgICB0YXJn\nZXQgPSBudWxsOwogICAgICAgIF90YXJnZXRGaWVsZCA9IHRhcmdldDsKICAg\nIH0KCiAgICAvKioKICAgICAqIEZsYWdzIGFyZSB1c2VkIGZvciBib29ra2Vl\ncGluZyBpbmZvcm1hdGlvbi4gVGhleSBhcmUgaWdub3JlZCBhdCBydW50aW1l\nLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRGbGFnKGludCBmbGFn\nKSB7CiAgICAgICAgcmV0dXJuIChfZmxhZ3MgJiBmbGFnKSAhPSAwOwogICAg\nfQoKICAgIC8qKgogICAgICogRmxhZ3MgYXJlIHVzZWQgZm9yIGJvb2trZWVw\naW5nIGluZm9ybWF0aW9uLiBUaGV5IGFyZSBpZ25vcmVkIGF0IHJ1bnRpbWUu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEZsYWcoaW50IGZsYWcsIGJv\nb2xlYW4gb24pIHsKICAgICAgICBpZiAob24pCiAgICAgICAgICAgIF9mbGFn\ncyB8PSBmbGFnOwogICAgICAgIGVsc2UKICAgICAgICAgICAgX2ZsYWdzICY9\nIH5mbGFnOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYg\ndGhpcyBjb2x1bW4gYmVsb25ncyB0byB0aGUgdGFibGUncyBwcmltYXJ5IGtl\neS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNQcmltYXJ5S2V5KCkg\newogICAgICAgIHJldHVybiBfcGs7CiAgICB9CgogICAgLyoqCiAgICAgKiBT\nZXQgd2hldGhlciB0aGlzIGNvbHVtbiBiZWxvbmdzIHRvIHRoZSB0YWJsZSdz\nIHByaW1hcnkga2V5LgogICAgICovCiAgICB2b2lkIHNldFByaW1hcnlLZXko\nYm9vbGVhbiBwaykgewogICAgICAgIF9wayA9IHBrOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHRoZSBjb2x1bW4ncyAwLWJhc2VkIGluZGV4IGlu\nIHRoZSBvd25pbmcgdGFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0\nSW5kZXgoKSB7CiAgICAgICAgaWYgKGdldFRhYmxlKCkgIT0gbnVsbCkKICAg\nICAgICAgICAgZ2V0VGFibGUoKS5pbmRleENvbHVtbnMoKTsKICAgICAgICBy\nZXR1cm4gX2luZGV4OwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBj\nb2x1bW4ncyAwLWJhc2VkIGluZGV4IGluIHRoZSBvd25pbmcgdGFibGUuCiAg\nICAgKi8KICAgIHZvaWQgc2V0SW5kZXgoaW50IGluZGV4KSB7CiAgICAgICAg\nX2luZGV4ID0gaW5kZXg7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVy\nIHRoaXMgY29sdW1uIGlzIGEgTE9CLgogICAgICovCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc0xvYigpIHsKICAgICAgICBzd2l0Y2ggKF90eXBlKSB7CiAgICAg\nICAgICAgIGNhc2UgVHlwZXMuQklOQVJZOgogICAgICAgICAgICBjYXNlIFR5\ncGVzLkJMT0I6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuTE9OR1ZBUkJJTkFS\nWToKICAgICAgICAgICAgY2FzZSBUeXBlcy5WQVJCSU5BUlk6CiAgICAgICAg\nICAgIGNhc2UgVHlwZXMuQ0xPQjoKICAgICAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB0cnVlIGlmIHRoaXMgY29sdW1uIGlzIGNvbXBhdGlibGUgd2l0aCB0\naGUgZ2l2ZW4gSkRCQyB0eXBlCiAgICAgKiBmcm9tIHtAbGluayBUeXBlc30g\nYW5kIHNpemUuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzQ29tcGF0\naWJsZShpbnQgdHlwZSwgU3RyaW5nIHR5cGVOYW1lLCBpbnQgc2l6ZSwgCiAg\nICAgICAgaW50IGRlY2ltYWxzKSB7CiAgICAgICAgaWYgKHR5cGUgPT0gVHlw\nZXMuT1RIRVIgfHwgZ2V0VHlwZSgpID09IFR5cGVzLk9USEVSKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgLy8gbm90ZSB0aGF0IHRoZSBn\naXZlbiBzaXplIGlzIGN1cnJlbnRseSBpZ25vcmVkLCBidXQgbWF5IGJlIHVz\nZWZ1bAogICAgICAgIC8vIHRvIGR5bmFtaWNhbGx5LXBvcHVsYXRpbmcgc3Vi\nY2xhc3NlcwogICAgICAgIHN3aXRjaCAoZ2V0VHlwZSgpKSB7CiAgICAgICAg\nICAgIGNhc2UgVHlwZXMuQklUOgogICAgICAgICAgICBjYXNlIFR5cGVzLlRJ\nTllJTlQ6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuQklHSU5UOgogICAgICAg\nICAgICBjYXNlIFR5cGVzLklOVEVHRVI6CiAgICAgICAgICAgIGNhc2UgVHlw\nZXMuTlVNRVJJQzoKICAgICAgICAgICAgY2FzZSBUeXBlcy5TTUFMTElOVDoK\nICAgICAgICAgICAgY2FzZSBUeXBlcy5ERUNJTUFMOgogICAgICAgICAgICBj\nYXNlIFR5cGVzLkRPVUJMRToKICAgICAgICAgICAgY2FzZSBUeXBlcy5GTE9B\nVDoKICAgICAgICAgICAgY2FzZSBUeXBlcy5SRUFMOgogICAgICAgICAgICAg\nICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBU\neXBlcy5CSVQ6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5USU5Z\nSU5UOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuQklHSU5UOgog\nICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuSU5URUdFUjoKICAgICAg\nICAgICAgICAgICAgICBjYXNlIFR5cGVzLk5VTUVSSUM6CiAgICAgICAgICAg\nICAgICAgICAgY2FzZSBUeXBlcy5TTUFMTElOVDoKICAgICAgICAgICAgICAg\nICAgICBjYXNlIFR5cGVzLkRFQ0lNQUw6CiAgICAgICAgICAgICAgICAgICAg\nY2FzZSBUeXBlcy5ET1VCTEU6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBU\neXBlcy5GTE9BVDoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLlJF\nQUw6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAg\nICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgY2FzZSBUeXBlcy5CSU5BUlk6CiAgICAgICAgICAgIGNhc2UgVHlwZXMu\nQkxPQjoKICAgICAgICAgICAgY2FzZSBUeXBlcy5MT05HVkFSQklOQVJZOgog\nICAgICAgICAgICBjYXNlIFR5cGVzLlZBUkJJTkFSWToKICAgICAgICAgICAg\nY2FzZSBUeXBlcy5PVEhFUjoKICAgICAgICAgICAgICAgIHN3aXRjaCAodHlw\nZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuQklOQVJZOgog\nICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuQkxPQjoKICAgICAgICAg\nICAgICAgICAgICBjYXNlIFR5cGVzLkxPTkdWQVJCSU5BUlk6CiAgICAgICAg\nICAgICAgICAgICAgY2FzZSBUeXBlcy5WQVJCSU5BUlk6CiAgICAgICAgICAg\nICAgICAgICAgY2FzZSBUeXBlcy5PVEhFUjoKICAgICAgICAgICAgICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVs\ndDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIFR5cGVzLkNMT0I6CiAg\nICAgICAgICAgIGNhc2UgVHlwZXMuQ0hBUjoKICAgICAgICAgICAgY2FzZSBU\neXBlcy5MT05HVkFSQ0hBUjoKICAgICAgICAgICAgY2FzZSBUeXBlcy5WQVJD\nSEFSOgogICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAg\nICAgICAgICAgICAgY2FzZSBUeXBlcy5DTE9COgogICAgICAgICAgICAgICAg\nICAgIGNhc2UgVHlwZXMuQ0hBUjoKICAgICAgICAgICAgICAgICAgICBjYXNl\nIFR5cGVzLkxPTkdWQVJDSEFSOgogICAgICAgICAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuVkFSQ0hBUjoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVz\nLkRBVEU6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5USU1FOgog\nICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuVElNRVNUQU1QOgogICAg\nICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAg\nICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuREFURToKICAgICAgICAgICAgY2FzZSBUeXBlcy5USU1FOgogICAg\nICAgICAgICBjYXNlIFR5cGVzLlRJTUVTVEFNUDoKICAgICAgICAgICAgICAg\nIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlw\nZXMuTE9OR1ZBUkNIQVI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBl\ncy5DTE9COgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuVkFSQ0hB\nUjoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkRBVEU6CiAgICAg\nICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5USU1FOgogICAgICAgICAgICAg\nICAgICAgIGNhc2UgVHlwZXMuVElNRVNUQU1QOgogICAgICAgICAgICAgICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBkZWZh\ndWx0OgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMjAwNzogIC8vIE9y\nYWNsZS1kZWZpbmVkIG9wYXF1ZSB0eXBlIGNvZGUgZm9yIFhNTFR5cGUKICAg\nICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAg\nICAgIGNhc2UgVHlwZXMuQ0hBUjoKICAgICAgICAgICAgICAgICAgICBjYXNl\nIFR5cGVzLkxPTkdWQVJDSEFSOgogICAgICAgICAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuVkFSQ0hBUjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAg\nICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1\ncm4gdHlwZSA9PSBnZXRUeXBlKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJucyB0aGUgY29sdW1uIG5hbWUuCiAgICAgKi8KICAg\nIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIGdl\ndE5hbWUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVzZWZ1bCBmb3IgZGVi\ndWdnaW5nLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldERlc2NyaXB0\naW9uKCkgewogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5n\nQnVmZmVyKCk7CiAgICAgICAgYnVmLmFwcGVuZCgiRnVsbCBOYW1lOiAiKS5h\ncHBlbmQoZ2V0RnVsbE5hbWUoKSkuYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1\nZi5hcHBlbmQoIlR5cGU6ICIpLmFwcGVuZChTY2hlbWFzLmdldEpEQkNOYW1l\nKGdldFR5cGUoKSkpLgogICAgICAgICAgICBhcHBlbmQoIlxuIik7CiAgICAg\nICAgYnVmLmFwcGVuZCgiU2l6ZTogIikuYXBwZW5kKGdldFNpemUoKSkuYXBw\nZW5kKCJcbiIpOwogICAgICAgIGJ1Zi5hcHBlbmQoIkRlZmF1bHQ6ICIpLmFw\ncGVuZChnZXREZWZhdWx0U3RyaW5nKCkpLmFwcGVuZCgiXG4iKTsKICAgICAg\nICBidWYuYXBwZW5kKCJOb3QgTnVsbDogIikuYXBwZW5kKGlzTm90TnVsbCgp\nKS5hcHBlbmQoIlxuIik7CiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygp\nOwogICAgfQoKICAgIC8qKgogICAgICogVGVzdHMgY29tcGF0aWJpbGl0eS4K\nICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZXF1YWxzQ29sdW1uKENvbHVt\nbiBjb2wpIHsKICAgICAgICBpZiAoY29sID09IHRoaXMpCiAgICAgICAgICAg\nIHJldHVybiB0cnVlOwogICAgICAgIGlmIChjb2wgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICBpZiAoIWdldEZ1bGxOYW1l\nKCkuZXF1YWxzSWdub3JlQ2FzZShjb2wuZ2V0RnVsbE5hbWUoKSkpCiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoIWlzQ29tcGF0aWJs\nZShjb2wuZ2V0VHlwZSgpLCBjb2wuZ2V0VHlwZU5hbWUoKSwgY29sLmdldFNp\nemUoKSwKICAgICAgICAgICAgY29sLmdldERlY2ltYWxEaWdpdHMoKSkpCiAg\nICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoZ2V0VHlwZSgp\nID09IFR5cGVzLlZBUkNIQVIgJiYgZ2V0U2l6ZSgpID4gMCAmJiBjb2wuZ2V0\nU2l6ZSgpID4gMAogICAgICAgICAgICAmJiBnZXRTaXplKCkgIT0gY29sLmdl\ndFNpemUoKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJl\ndHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQ29weSBpbmZvcm1h\ndGlvbiBmcm9tIHRoZSBnaXZlbiBjb2x1bW4gdG8gdGhpcyBvbmUuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIGNvcHkoQ29sdW1uIGZyb20pIHsKICAgICAg\nICBpZiAoZnJvbSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAgICAg\nICAgaWYgKGdldE5hbWUoKSA9PSBudWxsKQogICAgICAgICAgICBzZXROYW1l\nKGZyb20uZ2V0TmFtZSgpKTsKICAgICAgICBpZiAoZ2V0VHlwZSgpID09IFR5\ncGVzLk9USEVSKQogICAgICAgICAgICBzZXRUeXBlKGZyb20uZ2V0VHlwZSgp\nKTsKICAgICAgICBpZiAoZ2V0VHlwZU5hbWUoKSA9PSBudWxsKQogICAgICAg\nICAgICBzZXRUeXBlTmFtZShmcm9tLmdldFR5cGVOYW1lKCkpOwogICAgICAg\nIGlmIChnZXRKYXZhVHlwZSgpID09IEphdmFUeXBlcy5PQkpFQ1QpCiAgICAg\nICAgICAgIHNldEphdmFUeXBlKGZyb20uZ2V0SmF2YVR5cGUoKSk7CiAgICAg\nICAgaWYgKGdldFNpemUoKSA9PSAwKQogICAgICAgICAgICBzZXRTaXplKGZy\nb20uZ2V0U2l6ZSgpKTsKICAgICAgICBpZiAoZ2V0RGVjaW1hbERpZ2l0cygp\nID09IDApCiAgICAgICAgICAgIHNldERlY2ltYWxEaWdpdHMoZnJvbS5nZXRE\nZWNpbWFsRGlnaXRzKCkpOwogICAgICAgIGlmIChnZXREZWZhdWx0U3RyaW5n\nKCkgPT0gbnVsbCkKICAgICAgICAgICAgc2V0RGVmYXVsdFN0cmluZyhmcm9t\nLmdldERlZmF1bHRTdHJpbmcoKSk7CiAgICAgICAgaWYgKCFpc05vdE51bGxF\neHBsaWNpdCgpICYmIGZyb20uaXNOb3ROdWxsRXhwbGljaXQoKSkKICAgICAg\nICAgICAgc2V0Tm90TnVsbChmcm9tLmlzTm90TnVsbCgpKTsKICAgICAgICBp\nZiAoIWlzQXV0b0Fzc2lnbmVkKCkpCiAgICAgICAgICAgIHNldEF1dG9Bc3Np\nZ25lZChmcm9tLmlzQXV0b0Fzc2lnbmVkKCkpOwogICAgICAgIGlmICghaXNS\nZWxhdGlvbklkKCkpCiAgICAgICAgICAgIHNldFJlbGF0aW9uSWQoZnJvbS5p\nc1JlbGF0aW9uSWQoKSk7CiAgICAgICAgaWYgKCFpc0ltcGxpY2l0UmVsYXRp\nb24oKSkKICAgICAgICAJc2V0SW1wbGljaXRSZWxhdGlvbihmcm9tLmlzUmVs\nYXRpb25JZCgpKTsKICAgICAgICBpZiAoZ2V0VGFyZ2V0KCkgPT0gbnVsbCkK\nICAgICAgICAgICAgc2V0VGFyZ2V0KGZyb20uZ2V0VGFyZ2V0KCkpOwogICAg\nICAgIGlmIChnZXRUYXJnZXRGaWVsZCgpID09IG51bGwpCiAgICAgICAgICAg\nIHNldFRhcmdldEZpZWxkKGZyb20uZ2V0VGFyZ2V0RmllbGQoKSk7CiAgICAg\nICAgaWYgKF9mbGFncyA9PSAwKQogICAgICAgICAgICBfZmxhZ3MgPSBmcm9t\nLl9mbGFnczsKICAgICAgICBpZiAoIWlzWE1MKCkpCiAgICAgICAgICAgIHNl\ndFhNTChmcm9tLmlzWE1MKCkpOwogICAgICAgIGlmICghaXNVbmkxTUZLKCkp\nCiAgICAgICAgICAgIHNldFVuaTFNRksoZnJvbS5pc1VuaTFNRksoKSk7CiAg\nICB9CiAgICAKICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGNvbHVtbiBp\ncyBvZiBYTUwgdHlwZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNY\nTUwoKSB7CiAgICAgICAgcmV0dXJuIF9YTUw7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBXaGV0aGVyIHRoaXMgY29sdW1uIGlzIG9mIFhNTCB0eXBlLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXRYTUwoYm9vbGVhbiB4bWwpIHsKICAg\nICAgICBfWE1MID0geG1sOwogICAgfQoKICAgIHB1YmxpYyBWZXJzaW9uU3Ry\nYXRlZ3kgZ2V0VmVyc2lvblN0cmF0ZWd5KCkgewogICAgICAgIHJldHVybiBf\ndmVyc2lvblN0cmF0ZWd5OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFZl\ncnNpb25TdHJhdGVneShWZXJzaW9uU3RyYXRlZ3kgc3RyYXRlZ3kpIHsKICAg\nICAgICB0aGlzLl92ZXJzaW9uU3RyYXRlZ3kgPSBzdHJhdGVneTsKICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNDb21tZW50KCkgewogICAgICAgIHJl\ndHVybiBfY29tbWVudCAhPSBudWxsICYmICFfY29tbWVudC5lcXVhbHNJZ25v\ncmVDYXNlKF9uYW1lKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldENv\nbW1lbnQoKSB7CiAgICAgICAgcmV0dXJuIF9jb21tZW50OwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldENvbW1lbnQoU3RyaW5nIGNvbW1lbnQpIHsKICAg\nICAgICBfY29tbWVudCA9IGNvbW1lbnQ7CiAgICB9CiAgICAKICAgIC8qKiAK\nICAgICAqICBBZmZpcm1zIGlmIHRoaXMgaW5zdGFuY2UgcmVwcmVzZW50cyBh\nbiBpbXBsaWNpdCByZWxhdGlvbi4gRm9yIGV4YW1wbGUsIGEKICAgICAqICBy\nZWxhdGlvbiBleHByZXNzZWQgYXMgdGhlIHZhbHVlIG9mIHByaW1hcnkga2V5\nIG9mIHRoZSByZWxhdGVkIGNsYXNzIGFuZAoJICogIG5vdCBhcyBvYmplY3Qg\ncmVmZXJlbmNlLgogICAgICoKICAgICAqIEBzaW5jZSAxLjMuMAogICAgICov\nCiAgICBwdWJsaWMgYm9vbGVhbiBpc0ltcGxpY2l0UmVsYXRpb24oKSB7CiAg\nICAJcmV0dXJuIF9pbXBsaWNpdFJlbGF0aW9uOwogICAgfQogICAgCiAgICAv\nKioKICAgICAqIFNldHMgYSBtYXJrZXIgdG8gaW1wbHkgYSBsb2dpY2FsIHJl\nbGF0aW9uIHRoYXQgY2FuIG5vdCBoYXZlIGFueSBwaHlzaWNhbAogICAgICog\nbWFuaWZlc3QgaW4gdGhlIGRhdGFiYXNlLiBGb3IgZXhhbXBsZSwgYSByZWxh\ndGlvbiBleHByZXNzZWQgYXMgdGhlIHZhbHVlCiAgICAgKiBvZiBwcmltYXJ5\nIGtleSBvZiB0aGUgcmVsYXRlZCBjbGFzcyBhbmQgbm90IGFzIG9iamVjdCBy\nZWZlcmVuY2UuCiAgICAgKiBQb3B1bGF0ZWQgZnJvbSBARm9yZWlnbktleShp\nbXBsaWNpdD10cnVlKSBhbm5vdGF0aW9uLgogICAgICogVGhlIG11dGF0b3Ig\nY2FuIG9ubHkgdHJhbnNpdCBmcm9tIGZhbHNlIHRvIHRydWUgYnV0IG5vdCB2\naWNlIHZlcnNhLgogICAgICogCiAgICAgKiBAc2luY2UgMS4zLjAKICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0SW1wbGljaXRSZWxhdGlvbihib29sZWFu\nIGZsYWcpIHsKICAgIAlfaW1wbGljaXRSZWxhdGlvbiB8PSBmbGFnOwogICAg\nfQogICAgCiAgICAvKioKICAgICAqIFNldHMgYSBtYXJrZXIgdG8gaW5kaWNh\ndGUgdGhhdCB0aGlzIGluc3RhbmNlIHJlcHJlc2VudHMgYSB1bmktZGlyZWN0\naW9uYWwgCiAgICAgKiBvbmUgdG8gbWFueSByZWxhdGlvbiB1c2luZyB0aGUg\nZm9yZWlnbiBrZXkgc3RyYXRlZ3kuIFRoaXMgbm9uLWRlZmF1bHQgCiAgICAg\nKiBtYXBwaW5nIG9mIHVuaS1kaXJlY3Rpb25hbCBvbmUtdG8tbWFueSBpcyBz\ndXBwb3J0ZWQgaW4gSlBBIDIuMC4gIAogICAgICogCiAgICAgKiBAc2luY2Ug\nMi4wCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzVW5pMU1GSygpIHsK\nICAgICAgICByZXR1cm4gX2lzVW5pMU1GSzsKICAgIH0KICAgIAogICAgLyoq\nIAogICAgICogIEFmZmlybXMgaWYgdGhpcyBpbnN0YW5jZSByZXByZXNlbnRz\nIGEgdW5pLWRpcmVjdGlvbmFsIG9uZSB0byBtYW55IHJlbGF0aW9uCiAgICAg\nKiAgdXNpbmcgdGhlIGZvcmVpZ24ga2V5IHN0cmF0ZWd5LiBUaGlzIG5vbi1k\nZWZhdWx0IG1hcHBpbmcgb2YgdW5pLWRpcmVjdGlvbmFsIAogICAgICogIG9u\nZS10by1tYW55IGlzIHN1cHBvcnRlZCBpbiBKUEEgMi4wLiAgCiAgICAgKgog\nICAgICogQHNpbmNlIDIuMAogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRV\nbmkxTUZLKGJvb2xlYW4gaXNVbmkxTUZLKSB7CiAgICAgICAgX2lzVW5pMU1G\nSyA9IGlzVW5pMU1GSzsKICAgIH0KfQo=\n","encoding":"base64"}

