{"sha":"3e79f317cb9b0a70529eb2e5778f8353d91db962","node_id":"MDQ6QmxvYjIwNjM2NDozZTc5ZjMxN2NiOWIwYTcwNTI5ZWIyZTU3NzhmODM1M2Q5MWRiOTYy","size":6718,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3e79f317cb9b0a70529eb2e5778f8353d91db962","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5pby5QcmludFdyaXRlcjsKaW1wb3J0IGphdmEubGFuZy5yZWZs\nZWN0LkNvbnN0cnVjdG9yOwppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3ND\nb250cm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Qcml2aWxlZ2VkQWN0\naW9uRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1w\nb3J0IGphdmEuc3FsLkRyaXZlcjsKaW1wb3J0IGphdmEuc3FsLkRyaXZlck1h\nbmFnZXI7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBq\nYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5Qcm9wZXJ0aWVzOwoK\naW1wb3J0IGphdmF4LnNxbC5EYXRhU291cmNlOwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLmpkYmMuRGVsZWdhdGluZ0RhdGFTb3VyY2U7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuQ29uY3JldGVD\nbGFzc0dlbmVyYXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5KMkRvUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5TdG9yZUV4Y2VwdGlvbjsKCi8qKgogKiBOb24tcG9vbGluZyBk\ncml2ZXIgZGF0YSBzb3VyY2UuCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3Mg\nU2ltcGxlRHJpdmVyRGF0YVNvdXJjZQogICAgaW1wbGVtZW50cyBEcml2ZXJE\nYXRhU291cmNlIHsKCiAgICBwcml2YXRlIFN0cmluZyBfY29ubmVjdGlvbkRy\naXZlck5hbWU7CiAgICBwcml2YXRlIFN0cmluZyBfY29ubmVjdGlvblVSTDsK\nICAgIHByaXZhdGUgU3RyaW5nIF9jb25uZWN0aW9uVXNlck5hbWU7CiAgICBw\ncml2YXRlIFN0cmluZyBfY29ubmVjdGlvblBhc3N3b3JkOwogICAgcHJpdmF0\nZSBQcm9wZXJ0aWVzIF9jb25uZWN0aW9uUHJvcGVydGllczsKICAgIHByaXZh\ndGUgUHJvcGVydGllcyBfY29ubmVjdGlvbkZhY3RvcnlQcm9wZXJ0aWVzOwog\nICAgcHJpdmF0ZSBEcml2ZXIgX2RyaXZlcjsKICAgIHByaXZhdGUgQ2xhc3NM\nb2FkZXIgX2NsYXNzTG9hZGVyOwogICAgCiAgICBwcm90ZWN0ZWQgc3RhdGlj\nIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UoU2ltcGxl\nRHJpdmVyRGF0YVNvdXJjZS5jbGFzcyk7CiAgICBwcm90ZWN0ZWQgc3RhdGlj\nIExvY2FsaXplciBfZWxvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlKERlbGVn\nYXRpbmdEYXRhU291cmNlLmNsYXNzKTsKCiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBDbGFzczw/IGV4dGVuZHMgU2ltcGxlRHJpdmVyRGF0YVNvdXJjZT4g\naW1wbENsYXNzOwoKICAgIHN0YXRpYyB7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgaW1wbENsYXNzID0gQ29uY3JldGVDbGFzc0dlbmVyYXRvci5tYWtl\nQ29uY3JldGUoU2ltcGxlRHJpdmVyRGF0YVNvdXJjZS5jbGFzcyk7CiAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgdGhyb3cg\nbmV3IEV4Y2VwdGlvbkluSW5pdGlhbGl6ZXJFcnJvcihlKTsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIHN0YXRpYyBTaW1wbGVEcml2ZXJEYXRhU291\ncmNlIG5ld0luc3RhbmNlKCkgewogICAgICAgIHJldHVybiBDb25jcmV0ZUNs\nYXNzR2VuZXJhdG9yLm5ld0luc3RhbmNlKGltcGxDbGFzcyk7CiAgICB9Cgog\nICAgcHVibGljIENvbm5lY3Rpb24gZ2V0Q29ubmVjdGlvbigpCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldENvbm5l\nY3Rpb24obnVsbCk7CiAgICB9CgogICAgcHVibGljIENvbm5lY3Rpb24gZ2V0\nQ29ubmVjdGlvbihTdHJpbmcgdXNlcm5hbWUsIFN0cmluZyBwYXNzd29yZCkK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBQcm9wZXJ0\naWVzIHByb3BzID0gbmV3IFByb3BlcnRpZXMoKTsKICAgICAgICBpZiAodXNl\ncm5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgdXNlcm5hbWUgPSBfY29ubmVj\ndGlvblVzZXJOYW1lOwogICAgICAgIGlmICh1c2VybmFtZSAhPSBudWxsKQog\nICAgICAgICAgICBwcm9wcy5wdXQoInVzZXIiLCB1c2VybmFtZSk7CgogICAg\nICAgIGlmIChwYXNzd29yZCA9PSBudWxsKQogICAgICAgICAgICBwYXNzd29y\nZCA9IF9jb25uZWN0aW9uUGFzc3dvcmQ7CiAgICAgICAgaWYgKHBhc3N3b3Jk\nICE9IG51bGwpCiAgICAgICAgICAgIHByb3BzLnB1dCgicGFzc3dvcmQiLCBw\nYXNzd29yZCk7CgogICAgICAgIHJldHVybiBnZXRDb25uZWN0aW9uKHByb3Bz\nKTsKICAgIH0KCiAgICBwdWJsaWMgQ29ubmVjdGlvbiBnZXRDb25uZWN0aW9u\nKFByb3BlcnRpZXMgcHJvcHMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAJQ29ubmVjdGlvbiBjb24gPSBnZXREcml2ZXIoKS5jb25uZWN0\nKF9jb25uZWN0aW9uVVJMLCBwcm9wcyk7CiAgICAJaWYgKGNvbiA9PSBudWxs\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oX2Vsb2Mu\nZ2V0KCJwb29sZHMtbnVsbCIsCiAgICAgICAgICAgICAgICAgICAgX2Nvbm5l\nY3Rpb25Ecml2ZXJOYW1lLCBfY29ubmVjdGlvblVSTCkuZ2V0TWVzc2FnZSgp\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbjsKICAgIH0KCiAgICBw\ndWJsaWMgaW50IGdldExvZ2luVGltZW91dCgpIHsKICAgICAgICByZXR1cm4g\nMDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRMb2dpblRpbWVvdXQoaW50\nIHNlY29uZHMpIHsKICAgIH0KCiAgICBwdWJsaWMgUHJpbnRXcml0ZXIgZ2V0\nTG9nV3JpdGVyKCkgewogICAgICAgIHJldHVybiBEcml2ZXJNYW5hZ2VyLmdl\ndExvZ1dyaXRlcigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldExvZ1dy\naXRlcihQcmludFdyaXRlciBvdXQpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBpbml0REJEaWN0aW9uYXJ5KERCRGljdGlvbmFyeSBkaWN0KSB7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0Q29ubmVjdGlvblVSTChTdHJpbmcgY29u\nbmVjdGlvblVSTCkgewogICAgICAgIF9jb25uZWN0aW9uVVJMID0gY29ubmVj\ndGlvblVSTDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldENvbm5lY3Rp\nb25VUkwoKSB7CiAgICAgICAgcmV0dXJuIF9jb25uZWN0aW9uVVJMOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNldENvbm5lY3Rpb25Vc2VyTmFtZShTdHJp\nbmcgY29ubmVjdGlvblVzZXJOYW1lKSB7CiAgICAgICAgX2Nvbm5lY3Rpb25V\nc2VyTmFtZSA9IGNvbm5lY3Rpb25Vc2VyTmFtZTsKICAgIH0KCiAgICBwdWJs\naWMgU3RyaW5nIGdldENvbm5lY3Rpb25Vc2VyTmFtZSgpIHsKICAgICAgICBy\nZXR1cm4gX2Nvbm5lY3Rpb25Vc2VyTmFtZTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRDb25uZWN0aW9uUGFzc3dvcmQoU3RyaW5nIGNvbm5lY3Rpb25Q\nYXNzd29yZCkgewogICAgICAgIF9jb25uZWN0aW9uUGFzc3dvcmQgPSBjb25u\nZWN0aW9uUGFzc3dvcmQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Q29u\nbmVjdGlvblByb3BlcnRpZXMoUHJvcGVydGllcyBwcm9wcykgewogICAgICAg\nIF9jb25uZWN0aW9uUHJvcGVydGllcyA9IHByb3BzOwogICAgfQoKICAgIHB1\nYmxpYyBQcm9wZXJ0aWVzIGdldENvbm5lY3Rpb25Qcm9wZXJ0aWVzKCkgewog\nICAgICAgIHJldHVybiBfY29ubmVjdGlvblByb3BlcnRpZXM7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0Q29ubmVjdGlvbkZhY3RvcnlQcm9wZXJ0aWVz\nKFByb3BlcnRpZXMgcHJvcHMpIHsKICAgICAgICBfY29ubmVjdGlvbkZhY3Rv\ncnlQcm9wZXJ0aWVzID0gcHJvcHM7CiAgICB9CgogICAgcHVibGljIFByb3Bl\ncnRpZXMgZ2V0Q29ubmVjdGlvbkZhY3RvcnlQcm9wZXJ0aWVzKCkgewogICAg\nICAgIHJldHVybiBfY29ubmVjdGlvbkZhY3RvcnlQcm9wZXJ0aWVzOwogICAg\nfQoKICAgIHB1YmxpYyBMaXN0IGNyZWF0ZUNvbm5lY3Rpb25EZWNvcmF0b3Jz\nKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldENsYXNzTG9hZGVyKENsYXNzTG9hZGVyIGNsYXNzTG9hZGVyKSB7\nCiAgICAgICAgX2NsYXNzTG9hZGVyID0gY2xhc3NMb2FkZXI7CiAgICB9Cgog\nICAgcHVibGljIENsYXNzTG9hZGVyIGdldENsYXNzTG9hZGVyKCkgewogICAg\nICAgIHJldHVybiBfY2xhc3NMb2FkZXI7CiAgICB9CgogICAgcHVibGljIHZv\naWQgc2V0Q29ubmVjdGlvbkRyaXZlck5hbWUoU3RyaW5nIGNvbm5lY3Rpb25E\ncml2ZXJOYW1lKSB7CiAgICAgICAgX2Nvbm5lY3Rpb25Ecml2ZXJOYW1lID0g\nY29ubmVjdGlvbkRyaXZlck5hbWU7CiAgICB9CgogICAgcHVibGljIFN0cmlu\nZyBnZXRDb25uZWN0aW9uRHJpdmVyTmFtZSgpIHsKICAgICAgICByZXR1cm4g\nX2Nvbm5lY3Rpb25Ecml2ZXJOYW1lOwogICAgfQoKICAgIHByaXZhdGUgRHJp\ndmVyIGdldERyaXZlcigpIHsKICAgICAgICBpZiAoX2RyaXZlciAhPSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gX2RyaXZlcjsKCiAgICAgICAgdHJ5IHsg\nCiAgICAgICAgICAgIF9kcml2ZXIgPSBEcml2ZXJNYW5hZ2VyLmdldERyaXZl\ncihfY29ubmVjdGlvblVSTCk7CiAgICAgICAgICAgIGlmIChfZHJpdmVyICE9\nIG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gX2RyaXZlcjsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KCiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShfY29ubmVjdGlvbkRy\naXZlck5hbWUsIHRydWUsIF9jbGFzc0xvYWRlcik7CiAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgX2RyaXZlciA9IERyaXZlck1hbmFnZXIuZ2V0RHJpdmVyKF9j\nb25uZWN0aW9uVVJMKTsKICAgICAgICAgICAgaWYgKF9kcml2ZXIgIT0gbnVs\nbCkKICAgICAgICAgICAgICAgIHJldHVybiBfZHJpdmVyOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQoKICAgICAgICB0cnkg\newogICAgICAgICAgICBDbGFzcyBjID0gQ2xhc3MuZm9yTmFtZShfY29ubmVj\ndGlvbkRyaXZlck5hbWUsCiAgICAgICAgICAgICAgICB0cnVlLCBfY2xhc3NM\nb2FkZXIpOwogICAgICAgICAgICBfZHJpdmVyID0gKERyaXZlcikgQWNjZXNz\nQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICBKMkRv\nUHJpdkhlbHBlci5uZXdJbnN0YW5jZUFjdGlvbihjKSk7CiAgICAgICAgICAg\nIHJldHVybiBfZHJpdmVyOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUnVudGltZUV4Y2Vw\ndGlvbikKICAgICAgICAgICAgICAgIHRocm93KFJ1bnRpbWVFeGNlcHRpb24p\nIGU7CiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUHJpdmlsZWdlZEFj\ndGlvbkV4Y2VwdGlvbikKICAgICAgICAgICAgICAgIGUgPSAoKFByaXZpbGVn\nZWRBY3Rpb25FeGNlcHRpb24pIGUpLmdldEV4Y2VwdGlvbigpOwogICAgICAg\nICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICAgICAgfQog\nICAgfQogICAgCgogICAgLy8gamF2YS5zcWwuV3JhcHBlciBpbXBsZW1lbnRh\ndGlvbiAoSkRCQyA0KQogICAgcHVibGljIGJvb2xlYW4gaXNXcmFwcGVyRm9y\nKENsYXNzIGlmYWNlKSB7CiAgICAgICAgcmV0dXJuIGlmYWNlLmlzQXNzaWdu\nYWJsZUZyb20oU2ltcGxlRHJpdmVyRGF0YVNvdXJjZS5jbGFzcyk7CiAgICB9\nCgogICAgcHVibGljIE9iamVjdCB1bndyYXAoQ2xhc3MgaWZhY2UpIHsKICAg\nICAgICBpZiAoaXNXcmFwcGVyRm9yKGlmYWNlKSkKICAgICAgICAgICAgcmV0\ndXJuIHRoaXM7CiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKICAgIH0KCn0KCg==\n","encoding":"base64"}

