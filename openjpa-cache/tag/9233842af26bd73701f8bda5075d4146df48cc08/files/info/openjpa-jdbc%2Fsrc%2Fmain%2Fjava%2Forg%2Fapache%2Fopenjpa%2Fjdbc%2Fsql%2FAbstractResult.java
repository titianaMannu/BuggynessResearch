{"sha":"119f47e13e528fad1900fa1cefd0eb5ecea75980","node_id":"MDQ6QmxvYjIwNjM2NDoxMTlmNDdlMTNlNTI4ZmFkMTkwMGZhMWNlZmQwZWI1ZWNlYTc1OTgw","size":27811,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/119f47e13e528fad1900fa1cefd0eb5ecea75980","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5pby5JbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uUmVhZGVyOwpp\nbXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7CmltcG9ydCBqYXZhLm1hdGgu\nQmlnRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRlZ2VyOwppbXBv\ncnQgamF2YS5zcWwuQXJyYXk7CmltcG9ydCBqYXZhLnNxbC5CbG9iOwppbXBv\ncnQgamF2YS5zcWwuQ2xvYjsKaW1wb3J0IGphdmEuc3FsLlJlZjsKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlRpbWU7\nCmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7CmltcG9ydCBqYXZhLnNxbC5U\neXBlczsKaW1wb3J0IGphdmEudXRpbC5DYWxlbmRhcjsKaW1wb3J0IGphdmEu\ndXRpbC5EYXRlOwppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBq\nYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTG9jYWxlOwpp\nbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ1N0b3Jl\nTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEu\nQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nbWV0YS5GaWVsZE1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5tZXRhLkphdmFTUUxUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5UYWJsZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuZXhwcy5Db250ZXh0OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkNsb3NlYWJsZTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5tZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLlVuc3VwcG9ydGVkRXhjZXB0aW9uOwoKaW1wb3J0\nIHNlcnAudXRpbC5TdHJpbmdzOwoKLyoqCiAqIEEge0BsaW5rIFJlc3VsdH0g\naW1wbGVtZW50YXRpb24gZGVzaWduZWQgdG8gYmUgc3ViY2xhc3NlZCBlYXNp\nbHkgYnkKICogaW1wbGVtZW50YXRpb25zLiBBbGwgPGNvZGU+Z2V0Jmx0O3R5\ncGUmZ3Q7PC9jb2RlPiBjYWxscyBhcmUgZGVsZWdhdGVkIHRvCiAqIHRoZSB7\nQGxpbmsgI2dldE9iamVjdEludGVybmFsKE9iamVjdCxpbnQsT2JqZWN0LEpv\naW5zKX0gbWV0aG9kLCB3aGljaAogKiBzaG91bGQgYmUgaW1wbGVtZW50ZWQg\nYnkgc3ViY2xhc3NlcyBhbG9uZyB3aXRoIHtAbGluayAjbmV4dEludGVybmFs\nfSwKICoge0BsaW5rICNjb250YWluc0ludGVybmFsfSwgYW5kIHtAbGluayBS\nZXN1bHQjc2l6ZX0uCiAqICBNb3N0IG9mIHRoZSBtZXRob2RzIG9mIHRoaXMg\nY2xhc3Mgd2lsbCBhY2NlcHQgcmV0dXJuIHZhbHVlcyBmcm9tCiAqIHtAbGlu\nayAjZ2V0T2JqZWN0SW50ZXJuYWwoT2JqZWN0LGludCxPYmplY3QsSm9pbnMp\nfSB0aGF0IGFyZSBub3QgZXhhY3RseQogKiB0aGUgcmlnaHQgdHlwZS4gRm9y\nIGV4YW1wbGUsIGFueSBudW1lcmljIHR5cGUgY2FuIGJlIHJldHVybmVkIGFz\nIGFueQogKiB7QGxpbmsgTnVtYmVyfSB0eXBlLCBhbmQgZGF0ZXMsIGxvY2Fs\nZXMsIGNoYXJhY3RlcnMsIGFuZCBib29sZWFucyBjYW4gYmUKICogcmV0dXJu\nZWQgYXMgc3RyaW5ncy4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQHNl\nZSBSZXN1bHRTZXRSZXN1bHQKICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBB\nYnN0cmFjdFJlc3VsdAogICAgaW1wbGVtZW50cyBSZXN1bHQgewoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIEpvaW5zIEpPSU5TID0gbmV3IE5vT3BKb2lu\ncygpOwoKICAgIHByaXZhdGUgTWFwIF9lYWdlciA9IG51bGw7CiAgICBwcml2\nYXRlIENsYXNzTWFwcGluZyBfYmFzZSA9IG51bGw7CiAgICBwcml2YXRlIGlu\ndCBfaW5kZXggPSAwOwogICAgcHJpdmF0ZSBib29sZWFuIF9nb3RFYWdlciA9\nIGZhbHNlOwogICAgcHJpdmF0ZSBib29sZWFuIF93YXNOdWxsID0gZmFsc2U7\nCiAgICBwcml2YXRlIGJvb2xlYW4gX2xvY2tpbmcgPSBmYWxzZTsKICAgIHBy\naXZhdGUgYm9vbGVhbiBfaWdub3JlTmV4dCA9IGZhbHNlOwogICAgcHJpdmF0\nZSBib29sZWFuIF9sYXN0ID0gZmFsc2U7CiAgICBwcml2YXRlIEZpZWxkTWFw\ncGluZyBfbWFwcGVkQnlGaWVsZE1hcHBpbmcgPSBudWxsOwogICAgcHJpdmF0\nZSBPYmplY3QgX21hcHBlZEJ5VmFsdWUgPSBudWxsOwoKICAgIHB1YmxpYyBP\nYmplY3QgZ2V0RWFnZXIoRmllbGRNYXBwaW5nIGtleSkgewogICAgICAgIE1h\ncCBtYXAgPSBnZXRFYWdlck1hcCh0cnVlKTsKICAgICAgICByZXR1cm4gKG1h\ncCA9PSBudWxsKSA/IG51bGwgOiBtYXAuZ2V0KGtleSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgcHV0RWFnZXIoRmllbGRNYXBwaW5nIGtleSwgT2JqZWN0\nIHJlcykgewogICAgICAgIE1hcCBtYXAgPSBnZXRFYWdlck1hcChmYWxzZSk7\nCiAgICAgICAgaWYgKG1hcCA9PSBudWxsKSB7CiAgICAgICAgICAgIG1hcCA9\nIG5ldyBIYXNoTWFwKCk7CiAgICAgICAgICAgIHNldEVhZ2VyTWFwKG1hcCk7\nCiAgICAgICAgfQogICAgICAgIG1hcC5wdXQoa2V5LCByZXMpOwogICAgfQoK\nICAgIC8qKgogICAgICogUmF3IGVhZ2VyIGluZm9ybWF0aW9uLiBNYXkgYmUg\nbnVsbC4KICAgICAqCiAgICAgKiBAcGFyYW0gY2xpZW50IHdoZXRoZXIgdGhl\nIGNsaWVudCBpcyBhY2Nlc3NpbmcgZWFnZXIgaW5mb3JtYXRpb24KICAgICAq\nLwogICAgcHJvdGVjdGVkIE1hcCBnZXRFYWdlck1hcChib29sZWFuIGNsaWVu\ndCkgewogICAgICAgIGlmIChjbGllbnQpCiAgICAgICAgICAgIF9nb3RFYWdl\nciA9IHRydWU7CiAgICAgICAgcmV0dXJuIF9lYWdlcjsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJhdyBlYWdlciBpbmZvcm1hdGlvbi4KICAgICAqLwogICAg\ncHJvdGVjdGVkIHZvaWQgc2V0RWFnZXJNYXAoTWFwIGVhZ2VyKSB7CiAgICAg\nICAgX2VhZ2VyID0gZWFnZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbG9z\nZXMgYWxsIGVhZ2VyIHJlc3VsdHMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIGNsb3NlKCkgewogICAgICAgIGNsb3NlRWFnZXJNYXAoX2VhZ2VyKTsKICAg\nICAgICBfbWFwcGVkQnlGaWVsZE1hcHBpbmcgPSBudWxsOwogICAgICAgIF9t\nYXBwZWRCeVZhbHVlID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIENs\nb3NlIGFsbCByZXN1bHRzIGluIGVhZ2VyIG1hcC4KICAgICAqLwogICAgcHJv\ndGVjdGVkIHZvaWQgY2xvc2VFYWdlck1hcChNYXAgZWFnZXIpIHsKICAgICAg\nICBpZiAoZWFnZXIgIT0gbnVsbCkgewogICAgICAgICAgICBPYmplY3QgcmVz\nOwogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGVhZ2VyLnZhbHVl\ncygpLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAg\nICAgICByZXMgPSBpdHIubmV4dCgpOwogICAgICAgICAgICAgICAgaWYgKHJl\ncyAhPSB0aGlzICYmIHJlcyBpbnN0YW5jZW9mIENsb3NlYWJsZSkKICAgICAg\nICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAo\nKENsb3NlYWJsZSkgcmVzKS5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJucyBmYWxzZSBieSBkZWZhdWx0LgogICAgICovCiAgICBwdWJs\naWMgYm9vbGVhbiBzdXBwb3J0c1JhbmRvbUFjY2VzcygpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIGFic29sdXRlKGludCByb3cpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgX2dvdEVhZ2VyID0g\nZmFsc2U7CiAgICAgICAgcmV0dXJuIGFic29sdXRlSW50ZXJuYWwocm93KTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRocm93cyBhbiBleGNlcHRpb24gYnkg\nZGVmYXVsdC4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gYWJzb2x1\ndGVJbnRlcm5hbChpbnQgcm93KQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEV4Y2VwdGlvbigp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIG5leHQoKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIF9nb3RFYWdlciA9IGZhbHNl\nOwogICAgICAgIGlmIChfaWdub3JlTmV4dCkgewogICAgICAgICAgICBfaWdu\nb3JlTmV4dCA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4gX2xhc3Q7CiAg\nICAgICAgfQogICAgICAgIF9sYXN0ID0gbmV4dEludGVybmFsKCk7CiAgICAg\nICAgcmV0dXJuIF9sYXN0OwogICAgfQoKICAgIC8qKgogICAgICogQWR2YW5j\nZSB0aGlzIHJvdy4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IGJv\nb2xlYW4gbmV4dEludGVybmFsKCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uOwoKICAgIHB1YmxpYyB2b2lkIHB1c2hCYWNrKCkKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBfaWdub3JlTmV4dCA9IHRydWU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgbm8tb3Agam9pbnMg\nb2JqZWN0IGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHB1YmxpYyBKb2lucyBu\nZXdKb2lucygpIHsKICAgICAgICByZXR1cm4gSk9JTlM7CiAgICB9CgogICAg\ncHVibGljIGJvb2xlYW4gY29udGFpbnMoT2JqZWN0IG9iaikKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gY29udGFpbnNJ\nbnRlcm5hbChvYmosIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGNvbnRhaW5zQWxsKE9iamVjdFtdIG9ianMpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGNvbnRhaW5zQWxsSW50ZXJu\nYWwob2JqcywgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gY29u\ndGFpbnMoQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGNvbnRhaW5zSW50ZXJu\nYWwoY29sLCBqb2lucyk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gY29u\ndGFpbnNBbGwoQ29sdW1uW10gY29scywgSm9pbnMgam9pbnMpCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGNvbnRhaW5z\nQWxsSW50ZXJuYWwoY29scywgam9pbnMpOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHdoZXRoZXIgdGhpcyByZXN1bHQgY29udGFpbnMgZGF0YSBm\nb3IgdGhlIGdpdmVuIGlkIG9yIGNvbHVtbi4KICAgICAqIFRoZSBpZCBvciBj\nb2x1bW4gaGFzIG5vdCBiZWVkIHBhc3NlZCB0aHJvdWdoIHtAbGluayAjdHJh\nbnNsYXRlfS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IGJvb2xl\nYW4gY29udGFpbnNJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uOwoKICAgIC8qKgogICAgICog\nUmV0dXJuIHdoZXRoZXIgdGhpcyByZXN1bHQgY29udGFpbnMgZGF0YSBmb3Ig\nYWxsIHRoZSBnaXZlbiBpZHMgb3IKICAgICAqIGNvbHVtbnMuIFRoZSBpZHMg\nb3IgY29sdW1ucyBoYXZlIG5vdCBiZWVuIHBhc3NlZCB0aHJvdWdoCiAgICAg\nKiB7QGxpbmsgI3RyYW5zbGF0ZX0uIERlbGVnYXRlcyB0byB7QGxpbmsgI2Nv\nbnRhaW5zSW50ZXJuYWx9IGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBib29sZWFuIGNvbnRhaW5zQWxsSW50ZXJuYWwoT2JqZWN0W10gb2Jq\ncywgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBvYmpzLmxlbmd0aDsgaSsr\nKQogICAgICAgICAgICBpZiAoIWNvbnRhaW5zSW50ZXJuYWwob2Jqc1tpXSwg\nam9pbnMpKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nIHJldHVybiB0cnVlOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01hcHBpbmcg\nZ2V0QmFzZU1hcHBpbmcoKSB7CiAgICAgICAgLy8gaWYgd2UndmUgcmV0dXJu\nZWQgYW4gZWFnZXIgcmVzdWx0IHRoaXMgY2FsbCBtaWdodCBiZSBmb3IgdGhh\ndCBlYWdlcgogICAgICAgIC8vIHJlc3VsdCBpbnN0ZWFkIG9mIG91ciBwcmlt\nYXJ5IG1hcHBpbmcsIHNvIHJldHVybiBudWxsCiAgICAgICAgcmV0dXJuIChf\nZ290RWFnZXIpID8gbnVsbCA6IF9iYXNlOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldEJhc2VNYXBwaW5nKENsYXNzTWFwcGluZyBiYXNlKSB7CiAgICAg\nICAgX2Jhc2UgPSBiYXNlOwogICAgfQoKICAgIHB1YmxpYyBGaWVsZE1hcHBp\nbmcgZ2V0TWFwcGVkQnlGaWVsZE1hcHBpbmcoKSB7CiAgICAgICAgcmV0dXJu\nIF9tYXBwZWRCeUZpZWxkTWFwcGluZzsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRNYXBwZWRCeUZpZWxkTWFwcGluZyhGaWVsZE1hcHBpbmcgZmllbGRN\nYXBwaW5nKSB7CiAgICAgICAgX21hcHBlZEJ5RmllbGRNYXBwaW5nID0gZmll\nbGRNYXBwaW5nOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0TWFwcGVk\nQnlWYWx1ZSgpIHsKICAgICAgICByZXR1cm4gX21hcHBlZEJ5VmFsdWU7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0TWFwcGVkQnlWYWx1ZShPYmplY3Qg\nbWFwcGVkQnlWYWx1ZSkgewogICAgICAgIF9tYXBwZWRCeVZhbHVlID0gbWFw\ncGVkQnlWYWx1ZTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGluZGV4T2YoKSB7\nCiAgICAgICAgcmV0dXJuIF9pbmRleDsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRJbmRleE9mKGludCBpZHgpIHsKICAgICAgICBfaW5kZXggPSBpZHg7\nCiAgICB9CgogICAgcHVibGljIE9iamVjdCBsb2FkKENsYXNzTWFwcGluZyBt\nYXBwaW5nLCBKREJDU3RvcmUgc3RvcmUsCiAgICAgICAgSkRCQ0ZldGNoQ29u\nZmlndXJhdGlvbiBmZXRjaCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICByZXR1cm4gbG9hZChtYXBwaW5nLCBzdG9yZSwgZmV0Y2gs\nIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbG9hZChDbGFzc01h\ncHBpbmcgbWFwcGluZywgSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNG\nZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIEpvaW5zIGpvaW5zKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiAoKEpEQkNT\ndG9yZU1hbmFnZXIpIHN0b3JlKS5sb2FkKG1hcHBpbmcsIGZldGNoLCBudWxs\nLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgQXJyYXkgZ2V0QXJyYXkoT2Jq\nZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICByZXR1cm4gZ2V0QXJyYXlJbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxs\nKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIEFycmF5IGdldEFycmF5KENv\nbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBnZXRBcnJheUludGVybmFsKHRyYW5z\nbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHByb3RlY3Rl\nZCBBcnJheSBnZXRBcnJheUludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpv\naW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiAoQXJyYXkpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmos\nCiAgICAgICAgICAgIEphdmFTUUxUeXBlcy5TUUxfQVJSQVksIG51bGwsIGpv\naW5zKSk7CiAgICB9CgogICAgcHVibGljIElucHV0U3RyZWFtIGdldEFzY2lp\nU3RyZWFtKE9iamVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIGdldEFzY2lpU3RyZWFtSW50ZXJuYWwodHJh\nbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBJ\nbnB1dFN0cmVhbSBnZXRBc2NpaVN0cmVhbShDb2x1bW4gY29sLCBKb2lucyBq\nb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gZ2V0QXNjaWlTdHJlYW1JbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBq\nb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgSW5wdXRTdHJl\nYW0gZ2V0QXNjaWlTdHJlYW1JbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBq\nb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gKElucHV0U3RyZWFtKSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJu\nYWwob2JqLAogICAgICAgICAgICBKYXZhU1FMVHlwZXMuQVNDSUlfU1RSRUFN\nLCBudWxsLCBqb2lucykpOwogICAgfQoKICAgIHB1YmxpYyBCaWdEZWNpbWFs\nIGdldEJpZ0RlY2ltYWwoT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0QmlnRGVjaW1hbEludGVy\nbmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBw\ndWJsaWMgQmlnRGVjaW1hbCBnZXRCaWdEZWNpbWFsKENvbHVtbiBjb2wsIEpv\naW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBnZXRCaWdEZWNpbWFsSW50ZXJuYWwodHJhbnNsYXRlKGNv\nbCwgam9pbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVkIEJpZ0Rl\nY2ltYWwgZ2V0QmlnRGVjaW1hbEludGVybmFsKE9iamVjdCBvYmosIEpvaW5z\nIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIE9iamVjdCB2YWwgPSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2Jq\nLAogICAgICAgICAgICBKYXZhVHlwZXMuQklHREVDSU1BTCwgbnVsbCwgam9p\nbnMpKTsKICAgICAgICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBudWxsOwogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBCaWdEZWNp\nbWFsKQogICAgICAgICAgICByZXR1cm4gKEJpZ0RlY2ltYWwpIHZhbDsKICAg\nICAgICByZXR1cm4gbmV3IEJpZ0RlY2ltYWwodmFsLnRvU3RyaW5nKCkpOwog\nICAgfQoKICAgIHB1YmxpYyBCaWdJbnRlZ2VyIGdldEJpZ0ludGVnZXIoT2Jq\nZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICByZXR1cm4gZ2V0QmlnSW50ZWdlckludGVybmFsKHRyYW5zbGF0ZShvYmos\nIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgQmlnSW50ZWdlciBn\nZXRCaWdJbnRlZ2VyKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRCaWdJ\nbnRlZ2VySW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7\nCiAgICB9CgogICAgcHJvdGVjdGVkIEJpZ0ludGVnZXIgZ2V0QmlnSW50ZWdl\nckludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIE9iamVjdCB2YWwgPSBjaGVj\na051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAgICAgICBKYXZh\nVHlwZXMuQklHSU5URUdFUiwgbnVsbCwgam9pbnMpKTsKICAgICAgICBpZiAo\ndmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAg\nIGlmICh2YWwgaW5zdGFuY2VvZiBCaWdJbnRlZ2VyKQogICAgICAgICAgICBy\nZXR1cm4gKEJpZ0ludGVnZXIpIHZhbDsKICAgICAgICByZXR1cm4gbmV3IEJp\nZ0ludGVnZXIodmFsLnRvU3RyaW5nKCkpOwogICAgfQoKICAgIHB1YmxpYyBJ\nbnB1dFN0cmVhbSBnZXRCaW5hcnlTdHJlYW0oT2JqZWN0IG9iaikKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0Qmlu\nYXJ5U3RyZWFtSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwp\nOwogICAgfQoKICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRCaW5hcnlTdHJl\nYW0oQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldEJpbmFyeVN0cmVhbUlu\ndGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoK\nICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRMT0JTdHJlYW0oSkRCQ1N0b3Jl\nIHN0b3JlLCBPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIHJldHVybiBnZXRMT0JTdHJlYW1JbnRlcm5hbChzdG9y\nZSwgdHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoKICAgIHBy\nb3RlY3RlZCBJbnB1dFN0cmVhbSBnZXRCaW5hcnlTdHJlYW1JbnRlcm5hbChP\nYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICByZXR1cm4gKElucHV0U3RyZWFtKSBjaGVja051\nbGwoZ2V0T2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAgICAgICBKYXZhU1FM\nVHlwZXMuQklOQVJZX1NUUkVBTSwgbnVsbCwgam9pbnMpKTsKICAgIH0KCiAg\nICBwcm90ZWN0ZWQgSW5wdXRTdHJlYW0gZ2V0TE9CU3RyZWFtSW50ZXJuYWwo\nSkRCQ1N0b3JlIHN0b3JlLCBPYmplY3Qgb2JqLAogICAgICAgIEpvaW5zIGpv\naW5zKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gKElu\ncHV0U3RyZWFtKSBjaGVja051bGwoZ2V0U3RyZWFtSW50ZXJuYWwoc3RvcmUs\nIG9iaiwKICAgICAgICAgICAgSmF2YVNRTFR5cGVzLkJJTkFSWV9TVFJFQU0s\nIG51bGwsIGpvaW5zKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBCbG9iIGdl\ndEJsb2IoT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICByZXR1cm4gZ2V0QmxvYkludGVybmFsKHRyYW5zbGF0ZShv\nYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgQmxvYiBnZXRC\nbG9iKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRCbG9iSW50ZXJuYWwo\ndHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIEJsb2IgZ2V0QmxvYkludGVybmFsKE9iamVjdCBvYmosIEpvaW5z\nIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiAoQmxvYikgY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9i\naiwgSmF2YVNRTFR5cGVzLkJMT0IsCiAgICAgICAgICAgIG51bGwsIGpvaW5z\nKSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0Qm9vbGVhbihPYmpl\nY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBnZXRCb29sZWFuSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVs\nbCksIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGdldEJvb2xl\nYW4oQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldEJvb2xlYW5JbnRlcm5h\nbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBw\ncm90ZWN0ZWQgYm9vbGVhbiBnZXRCb29sZWFuSW50ZXJuYWwoT2JqZWN0IG9i\naiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgT2JqZWN0IHZhbCA9IGNoZWNrTnVsbChnZXRPYmplY3RJbnRl\ncm5hbChvYmosIEphdmFUeXBlcy5CT09MRUFOLAogICAgICAgICAgICBudWxs\nLCBqb2lucykpOwogICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiBCb29sZWFuLnZhbHVl\nT2YodmFsLnRvU3RyaW5nKCkpLmJvb2xlYW5WYWx1ZSgpOwogICAgfQoKICAg\nIHB1YmxpYyBieXRlIGdldEJ5dGUoT2JqZWN0IG9iaikKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0Qnl0ZUludGVy\nbmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBw\ndWJsaWMgYnl0ZSBnZXRCeXRlKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBn\nZXRCeXRlSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7\nCiAgICB9CgogICAgcHJvdGVjdGVkIGJ5dGUgZ2V0Qnl0ZUludGVybmFsKE9i\namVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIE51bWJlciB2YWwgPSAoTnVtYmVyKSBjaGVja051\nbGwoZ2V0T2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAgICAgICBKYXZhVHlw\nZXMuQllURSwgbnVsbCwgam9pbnMpKTsKICAgICAgICByZXR1cm4gKHZhbCA9\nPSBudWxsKSA/IDAgOiB2YWwuYnl0ZVZhbHVlKCk7CiAgICB9CgogICAgcHVi\nbGljIGJ5dGVbXSBnZXRCeXRlcyhPYmplY3Qgb2JqKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRCeXRlc0ludGVy\nbmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBw\ndWJsaWMgYnl0ZVtdIGdldEJ5dGVzKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5z\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiBnZXRCeXRlc0ludGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9p\nbnMpOwogICAgfQoKICAgIHByb3RlY3RlZCBieXRlW10gZ2V0Qnl0ZXNJbnRl\ncm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gKGJ5dGVbXSkgY2hlY2tO\ndWxsKGdldE9iamVjdEludGVybmFsKG9iaiwKICAgICAgICAgICAgSmF2YVNR\nTFR5cGVzLkJZVEVTLCBudWxsLCBqb2lucykpOwogICAgfQoKICAgIHB1Ymxp\nYyBDYWxlbmRhciBnZXRDYWxlbmRhcihPYmplY3Qgb2JqKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRDYWxlbmRh\nckludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0K\nCiAgICBwdWJsaWMgQ2FsZW5kYXIgZ2V0Q2FsZW5kYXIoQ29sdW1uIGNvbCwg\nSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIGdldENhbGVuZGFySW50ZXJuYWwodHJhbnNsYXRlKGNv\nbCwgam9pbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVkIENhbGVu\nZGFyIGdldENhbGVuZGFySW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9p\nbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgT2Jq\nZWN0IHZhbCA9IGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmosIEph\ndmFUeXBlcy5DQUxFTkRBUiwKICAgICAgICAgICAgbnVsbCwgam9pbnMpKTsK\nICAgICAgICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBu\ndWxsOwogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBDYWxlbmRhcikKICAg\nICAgICAgICAgcmV0dXJuIChDYWxlbmRhcikgdmFsOwoKICAgICAgICBDYWxl\nbmRhciBjYWwgPSBDYWxlbmRhci5nZXRJbnN0YW5jZSgpOwogICAgICAgIGNh\nbC5zZXRUaW1lKG5ldyBEYXRlKHZhbC50b1N0cmluZygpKSk7CiAgICAgICAg\ncmV0dXJuIGNhbDsKICAgIH0KCiAgICBwdWJsaWMgY2hhciBnZXRDaGFyKE9i\namVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIGdldENoYXJJbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxs\nKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGNoYXIgZ2V0Q2hhcihDb2x1\nbW4gY29sLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICByZXR1cm4gZ2V0Q2hhckludGVybmFsKHRyYW5zbGF0\nZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHByb3RlY3RlZCBj\naGFyIGdldENoYXJJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBPYmplY3Qg\ndmFsID0gY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwgSmF2YVR5\ncGVzLkNIQVIsCiAgICAgICAgICAgIG51bGwsIGpvaW5zKSk7CiAgICAgICAg\naWYgKHZhbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gMDsKICAgICAg\nICBpZiAodmFsIGluc3RhbmNlb2YgQ2hhcmFjdGVyKQogICAgICAgICAgICBy\nZXR1cm4gKChDaGFyYWN0ZXIpIHZhbCkuY2hhclZhbHVlKCk7CgogICAgICAg\nIFN0cmluZyBzdHIgPSB2YWwudG9TdHJpbmcoKTsKICAgICAgICByZXR1cm4g\nKHN0ci5sZW5ndGgoKSA9PSAwKSA/IDAgOiBzdHIuY2hhckF0KDApOwogICAg\nfQoKICAgIHB1YmxpYyBSZWFkZXIgZ2V0Q2hhcmFjdGVyU3RyZWFtKE9iamVj\ndCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIGdldENoYXJhY3RlclN0cmVhbUludGVybmFsKHRyYW5zbGF0ZShv\nYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgUmVhZGVyIGdl\ndENoYXJhY3RlclN0cmVhbShDb2x1bW4gY29sLCBKb2lucyBqb2lucykKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0\nQ2hhcmFjdGVyU3RyZWFtSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMp\nLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVkIFJlYWRlciBnZXRDaGFy\nYWN0ZXJTdHJlYW1JbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBPYmplY3Qg\ndmFsID0gY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwKICAgICAg\nICAgICAgSmF2YVNRTFR5cGVzLkNIQVJfU1RSRUFNLCBudWxsLCBqb2lucykp\nOwogICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIFJlYWRlcikKICAg\nICAgICAgICAgcmV0dXJuIChSZWFkZXIpIHZhbDsKICAgICAgICByZXR1cm4g\nbmV3IFN0cmluZ1JlYWRlcih2YWwudG9TdHJpbmcoKSk7CiAgICB9CgogICAg\ncHVibGljIENsb2IgZ2V0Q2xvYihPYmplY3Qgb2JqKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRDbG9iSW50ZXJu\nYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoKICAgIHB1\nYmxpYyBDbG9iIGdldENsb2IoQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdl\ndENsb2JJbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgQ2xvYiBnZXRDbG9iSW50ZXJuYWwoT2Jq\nZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmV0dXJuIChDbG9iKSBjaGVja051bGwoZ2V0T2Jq\nZWN0SW50ZXJuYWwob2JqLCBKYXZhU1FMVHlwZXMuQ0xPQiwKICAgICAgICAg\nICAgbnVsbCwgam9pbnMpKTsKICAgIH0KCiAgICBwdWJsaWMgRGF0ZSBnZXRE\nYXRlKE9iamVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgcmV0dXJuIGdldERhdGVJbnRlcm5hbCh0cmFuc2xhdGUob2Jq\nLCBudWxsKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIERhdGUgZ2V0RGF0\nZShDb2x1bW4gY29sLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RGF0ZUludGVybmFsKHRy\nYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHByb3Rl\nY3RlZCBEYXRlIGdldERhdGVJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBq\nb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBP\nYmplY3QgdmFsID0gY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwg\nSmF2YVR5cGVzLkRBVEUsCiAgICAgICAgICAgIG51bGwsIGpvaW5zKSk7CiAg\nICAgICAgaWYgKHZhbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgRGF0ZSkKICAgICAgICAg\nICAgcmV0dXJuIChEYXRlKSB2YWw7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRl\nKHZhbC50b1N0cmluZygpKTsKICAgIH0KCiAgICBwdWJsaWMgamF2YS5zcWwu\nRGF0ZSBnZXREYXRlKE9iamVjdCBvYmosIENhbGVuZGFyIGNhbCkKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RGF0\nZUludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBjYWwsIG51bGwpOwog\nICAgfQoKICAgIHB1YmxpYyBqYXZhLnNxbC5EYXRlIGdldERhdGUoQ29sdW1u\nIGNvbCwgQ2FsZW5kYXIgY2FsLCBKb2lucyBqb2lucykKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RGF0ZUludGVy\nbmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgY2FsLCBqb2lucyk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIGphdmEuc3FsLkRhdGUgZ2V0RGF0ZUludGVybmFs\nKE9iamVjdCBvYmosIENhbGVuZGFyIGNhbCwKICAgICAgICBKb2lucyBqb2lu\ncykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1\ncm4gKGphdmEuc3FsLkRhdGUpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5h\nbChvYmosCiAgICAgICAgICAgIEphdmFTUUxUeXBlcy5TUUxfREFURSwgY2Fs\nLCBqb2lucykpOwogICAgfQoKICAgIHB1YmxpYyBkb3VibGUgZ2V0RG91Ymxl\nKE9iamVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIGdldERvdWJsZUludGVybmFsKHRyYW5zbGF0ZShvYmos\nIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgZG91YmxlIGdldERv\ndWJsZShDb2x1bW4gY29sLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RG91YmxlSW50ZXJu\nYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIGRvdWJsZSBnZXREb3VibGVJbnRlcm5hbChPYmplY3Qgb2Jq\nLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBOdW1iZXIgdmFsID0gKE51bWJlcikgY2hlY2tOdWxsKGdldE9i\namVjdEludGVybmFsKG9iaiwKICAgICAgICAgICAgSmF2YVR5cGVzLkRPVUJM\nRSwgbnVsbCwgam9pbnMpKTsKICAgICAgICByZXR1cm4gKHZhbCA9PSBudWxs\nKSA/IDAgOiB2YWwuZG91YmxlVmFsdWUoKTsKICAgIH0KCiAgICBwdWJsaWMg\nZmxvYXQgZ2V0RmxvYXQoT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RmxvYXRJbnRlcm5hbCh0\ncmFuc2xhdGUob2JqLCBudWxsKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGlj\nIGZsb2F0IGdldEZsb2F0KENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRG\nbG9hdEludGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwog\nICAgfQoKICAgIHByb3RlY3RlZCBmbG9hdCBnZXRGbG9hdEludGVybmFsKE9i\namVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIE51bWJlciB2YWwgPSAoTnVtYmVyKSBjaGVja051\nbGwoZ2V0T2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAgICAgICBKYXZhVHlw\nZXMuRkxPQVQsIG51bGwsIGpvaW5zKSk7CiAgICAgICAgcmV0dXJuICh2YWwg\nPT0gbnVsbCkgPyAwIDogdmFsLmZsb2F0VmFsdWUoKTsKICAgIH0KCiAgICBw\ndWJsaWMgaW50IGdldEludChPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRJbnRJbnRlcm5hbCh0\ncmFuc2xhdGUob2JqLCBudWxsKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGlj\nIGludCBnZXRJbnQoQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldEludElu\ndGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoK\nICAgIHByb3RlY3RlZCBpbnQgZ2V0SW50SW50ZXJuYWwoT2JqZWN0IG9iaiwg\nSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgTnVtYmVyIHZhbCA9IChOdW1iZXIpIGNoZWNrTnVsbChnZXRPYmpl\nY3RJbnRlcm5hbChvYmosCiAgICAgICAgICAgIEphdmFUeXBlcy5JTlQsIG51\nbGwsIGpvaW5zKSk7CiAgICAgICAgcmV0dXJuICh2YWwgPT0gbnVsbCkgPyAw\nIDogdmFsLmludFZhbHVlKCk7CiAgICB9CgogICAgcHVibGljIExvY2FsZSBn\nZXRMb2NhbGUoT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICByZXR1cm4gZ2V0TG9jYWxlSW50ZXJuYWwodHJhbnNs\nYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBMb2Nh\nbGUgZ2V0TG9jYWxlKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRMb2Nh\nbGVJbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsKICAg\nIH0KCiAgICBwcm90ZWN0ZWQgTG9jYWxlIGdldExvY2FsZUludGVybmFsKE9i\namVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIE9iamVjdCB2YWwgPSBjaGVja051bGwoZ2V0T2Jq\nZWN0SW50ZXJuYWwob2JqLCBKYXZhVHlwZXMuTE9DQUxFLAogICAgICAgICAg\nICBudWxsLCBqb2lucykpOwogICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHZhbCBpbnN0YW5j\nZW9mIExvY2FsZSkKICAgICAgICAgICAgcmV0dXJuIChMb2NhbGUpIHZhbDsK\nICAgICAgICBTdHJpbmdbXSB2YWxzID0gU3RyaW5ncy5zcGxpdCh2YWwudG9T\ndHJpbmcoKSwgIl8iLCAwKTsKICAgICAgICBpZiAodmFscy5sZW5ndGggPCAy\nKQogICAgICAgICAgICB0aHJvdyBuZXcgU1FMRXhjZXB0aW9uKHZhbC50b1N0\ncmluZygpKTsKICAgICAgICBpZiAodmFscy5sZW5ndGggPT0gMikKICAgICAg\nICAgICAgcmV0dXJuIG5ldyBMb2NhbGUodmFsc1swXSwgdmFsc1sxXSk7CiAg\nICAgICAgcmV0dXJuIG5ldyBMb2NhbGUodmFsc1swXSwgdmFsc1sxXSwgdmFs\nc1syXSk7CiAgICB9CgogICAgcHVibGljIGxvbmcgZ2V0TG9uZyhPYmplY3Qg\nb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBnZXRMb25nSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51\nbGwpOwogICAgfQoKICAgIHB1YmxpYyBsb25nIGdldExvbmcoQ29sdW1uIGNv\nbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgcmV0dXJuIGdldExvbmdJbnRlcm5hbCh0cmFuc2xhdGUoY29s\nLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgbG9uZyBn\nZXRMb25nSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgTnVtYmVyIHZhbCA9\nIChOdW1iZXIpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmosCiAg\nICAgICAgICAgIEphdmFUeXBlcy5MT05HLCBudWxsLCBqb2lucykpOwogICAg\nICAgIHJldHVybiAodmFsID09IG51bGwpID8gMCA6IHZhbC5sb25nVmFsdWUo\nKTsKICAgIH0KCiAgICBwdWJsaWMgTnVtYmVyIGdldE51bWJlcihPYmplY3Qg\nb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBnZXROdW1iZXJJbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxsKSwg\nbnVsbCk7CiAgICB9CgogICAgcHVibGljIE51bWJlciBnZXROdW1iZXIoQ29s\ndW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmV0dXJuIGdldE51bWJlckludGVybmFsKHRyYW5z\nbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHByb3RlY3Rl\nZCBOdW1iZXIgZ2V0TnVtYmVySW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMg\nam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nT2JqZWN0IHZhbCA9IGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmos\nCiAgICAgICAgICAgIEphdmFUeXBlcy5OVU1CRVIsIG51bGwsIGpvaW5zKSk7\nCiAgICAgICAgaWYgKHZhbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4g\nbnVsbDsKICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgTnVtYmVyKQogICAg\nICAgICAgICByZXR1cm4gKE51bWJlcikgdmFsOwogICAgICAgIHJldHVybiBu\nZXcgQmlnRGVjaW1hbCh2YWwudG9TdHJpbmcoKSk7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCBnZXRPYmplY3QoT2JqZWN0IG9iaiwgaW50IG1ldGFUeXBl\nLCBPYmplY3QgYXJnKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIHJldHVybiBnZXRPYmplY3RJbnRlcm5hbChvYmosIG1ldGFUeXBl\nLCBhcmcsIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0T2Jq\nZWN0KENvbHVtbiBjb2wsIE9iamVjdCBhcmcsIEpvaW5zIGpvaW5zKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRP\nYmplY3RJbnRlcm5hbChjb2wsIGNvbC5nZXRKYXZhVHlwZSgpLAogICAgICAg\nICAgICBhcmcsIGpvaW5zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiB0aGUgdmFsdWUgc3RvcmVkIGluIHRoZSBnaXZlbiBpZCBvciBjb2x1bW4u\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBPYmplY3QgZ2V0T2Jq\nZWN0SW50ZXJuYWwoT2JqZWN0IG9iaiwgaW50IG1ldGFUeXBlLAogICAgICAg\nIE9iamVjdCBhcmcsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb247CgogICAgcHJvdGVjdGVkIGFic3RyYWN0IE9iamVjdCBnZXRT\ndHJlYW1JbnRlcm5hbChKREJDU3RvcmUgc3RvcmUsIE9iamVjdCBvYmosCiAg\nICAgICAgICAgIGludCBtZXRhVHlwZSwgT2JqZWN0IGFyZywgSm9pbnMgam9p\nbnMpIHRocm93cyBTUUxFeGNlcHRpb247CiAgICAKICAgIHB1YmxpYyBPYmpl\nY3QgZ2V0U1FMT2JqZWN0KE9iamVjdCBvYmosIE1hcCBtYXApCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldFNRTE9i\namVjdEludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBtYXAsIG51bGwp\nOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0U1FMT2JqZWN0KENvbHVt\nbiBjb2wsIE1hcCBtYXAsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRTUUxPYmplY3RJbnRl\ncm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIG1hcCwgam9pbnMpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBPYmplY3QgZ2V0U1FMT2JqZWN0SW50ZXJuYWwo\nT2JqZWN0IG9iaiwgTWFwIG1hcCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGNoZWNrTnVsbChn\nZXRPYmplY3RJbnRlcm5hbChvYmosIEphdmFTUUxUeXBlcy5TUUxfT0JKRUNU\nLAogICAgICAgICAgICBtYXAsIGpvaW5zKSk7CiAgICB9CgogICAgcHVibGlj\nIFJlZiBnZXRSZWYoT2JqZWN0IG9iaiwgTWFwIG1hcCkKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0UmVmSW50ZXJu\nYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG1hcCwgbnVsbCk7CiAgICB9Cgog\nICAgcHVibGljIFJlZiBnZXRSZWYoQ29sdW1uIGNvbCwgTWFwIG1hcCwgSm9p\nbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIGdldFJlZkludGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5z\nKSwgbWFwLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVkIFJlZiBnZXRS\nZWZJbnRlcm5hbChPYmplY3Qgb2JqLCBNYXAgbWFwLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nKFJlZikgY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwgSmF2YVNR\nTFR5cGVzLlJFRiwKICAgICAgICAgICAgbWFwLCBqb2lucykpOwogICAgfQoK\nICAgIHB1YmxpYyBzaG9ydCBnZXRTaG9ydChPYmplY3Qgb2JqKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRTaG9y\ndEludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0K\nCiAgICBwdWJsaWMgc2hvcnQgZ2V0U2hvcnQoQ29sdW1uIGNvbCwgSm9pbnMg\nam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIGdldFNob3J0SW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMp\nLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVkIHNob3J0IGdldFNob3J0\nSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgTnVtYmVyIHZhbCA9IChOdW1i\nZXIpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmosCiAgICAgICAg\nICAgIEphdmFUeXBlcy5TSE9SVCwgbnVsbCwgam9pbnMpKTsKICAgICAgICBy\nZXR1cm4gKHZhbCA9PSBudWxsKSA/IDAgOiB2YWwuc2hvcnRWYWx1ZSgpOwog\nICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3RyaW5nKE9iamVjdCBvYmop\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIGdldFN0cmluZ0ludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxs\nLAogICAgICAgICAgICBvYmogaW5zdGFuY2VvZiBDb2x1bW4gJiYgKChDb2x1\nbW4pIG9iaikuZ2V0VHlwZSgpID09IFR5cGVzLkNMT0IpOwogICAgfQoKICAg\nIHB1YmxpYyBTdHJpbmcgZ2V0U3RyaW5nKENvbHVtbiBjb2wsIEpvaW5zIGpv\naW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBnZXRTdHJpbmdJbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyks\nIGpvaW5zLAogICAgICAgICAgICBjb2wuZ2V0VHlwZSgpID09IFR5cGVzLkNM\nT0IpOwogICAgfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0U3RyaW5nSW50\nZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMsIGJvb2xlYW4gaXNDbG9i\nU3RyaW5nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIE9iamVjdCB2YWwgPSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2Jq\nLCBKYXZhVHlwZXMuU1RSSU5HLAogICAgICAgICAgICBudWxsLCBqb2lucykp\nOwogICAgICAgIHJldHVybiAodmFsID09IG51bGwpID8gbnVsbCA6IHZhbC50\nb1N0cmluZygpOwogICAgfQoKICAgIHB1YmxpYyBUaW1lIGdldFRpbWUoT2Jq\nZWN0IG9iaiwgQ2FsZW5kYXIgY2FsKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBnZXRUaW1lSW50ZXJuYWwodHJhbnNs\nYXRlKG9iaiwgbnVsbCksIGNhbCwgbnVsbCk7CiAgICB9CgogICAgcHVibGlj\nIFRpbWUgZ2V0VGltZShDb2x1bW4gY29sLCBDYWxlbmRhciBjYWwsIEpvaW5z\nIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBnZXRUaW1lSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMp\nLCBjYWwsIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgVGltZSBnZXRU\naW1lSW50ZXJuYWwoT2JqZWN0IG9iaiwgQ2FsZW5kYXIgY2FsLCBKb2lucyBq\nb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gKFRpbWUpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmos\nIEphdmFTUUxUeXBlcy5USU1FLAogICAgICAgICAgICBjYWwsIGpvaW5zKSk7\nCiAgICB9CgogICAgcHVibGljIFRpbWVzdGFtcCBnZXRUaW1lc3RhbXAoT2Jq\nZWN0IG9iaiwgQ2FsZW5kYXIgY2FsKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBnZXRUaW1lc3RhbXBJbnRlcm5hbCh0\ncmFuc2xhdGUob2JqLCBudWxsKSwgY2FsLCBudWxsKTsKICAgIH0KCiAgICBw\ndWJsaWMgVGltZXN0YW1wIGdldFRpbWVzdGFtcChDb2x1bW4gY29sLCBDYWxl\nbmRhciBjYWwsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBnZXRUaW1lc3RhbXBJbnRlcm5hbCh0\ncmFuc2xhdGUoY29sLCBqb2lucyksIGNhbCwgam9pbnMpOwogICAgfQoKICAg\nIHByb3RlY3RlZCBUaW1lc3RhbXAgZ2V0VGltZXN0YW1wSW50ZXJuYWwoT2Jq\nZWN0IG9iaiwgQ2FsZW5kYXIgY2FsLAogICAgICAgIEpvaW5zIGpvaW5zKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiAo\nVGltZXN0YW1wKSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2JqLAog\nICAgICAgICAgICBKYXZhU1FMVHlwZXMuVElNRVNUQU1QLCBjYWwsIGpvaW5z\nKSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gd2FzTnVsbCgpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF93YXNO\ndWxsOwogICAgfQoKICAgIHByb3RlY3RlZCBPYmplY3QgY2hlY2tOdWxsKE9i\namVjdCB2YWwpIHsKICAgICAgICBfd2FzTnVsbCA9ICh2YWwgPT0gbnVsbCk7\nCiAgICAgICAgcmV0dXJuIHZhbDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRMb2NraW5nKGJvb2xlYW4gbG9ja2luZykgewogICAgICAgIF9sb2NraW5n\nID0gbG9ja2luZzsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0xvY2tp\nbmcoKSB7CiAgICAgICAgcmV0dXJuIF9sb2NraW5nOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHN0YXJ0RGF0YVJlcXVlc3QoT2JqZWN0IG1hcHBpbmcpIHsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBlbmREYXRhUmVxdWVzdCgpIHsKICAg\nIH0KCiAgICAvKioKICAgICAqIFRyYW5zbGF0ZSB0aGUgdXNlci1naXZlbiBp\nZCBvciBjb2x1bW4uIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBiZWZvcmUKICAg\nICAqIGRlbGVnYXRpbmcgdG8gYW55IDxjb2RlPmdldCpJbnRlcm5hbDwvY29k\nZT4gbWV0aG9kcyB3aXRoIHRoZSBleGNlcHRpb24gb2YKICAgICAqIDxjb2Rl\nPmdldE9iamVjdEludGVybmFsPC9jb2RlPi4gUmV0dXJuIHRoZQogICAgICog\nb3JpZ2luYWwgdmFsdWUgYnkgZGVmYXVsdC4KICAgICAqLwogICAgcHJvdGVj\ndGVkIE9iamVjdCB0cmFuc2xhdGUoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMp\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIG9iajsKICAgIH0KCiAgICAvKioKICAgICAqIERvLW5vdGhpbmcgam9pbnMg\naW1wbGVtZW50YXRpb24uCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNs\nYXNzIE5vT3BKb2lucwogICAgICAgIGltcGxlbWVudHMgSm9pbnMgewoKICAg\nICAgICBwdWJsaWMgYm9vbGVhbiBpc0VtcHR5KCkgewogICAgICAgICAgICBy\nZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFu\nIGlzT3V0ZXIoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBKb2lucyBjcm9zc0pvaW4oVGFibGUgbG9j\nYWxUYWJsZSwgVGFibGUgZm9yZWlnblRhYmxlKSB7CiAgICAgICAgICAgIHJl\ndHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIEpvaW5zIGpv\naW4oRm9yZWlnbktleSBmaywgYm9vbGVhbiBpbnZlcnNlLCBib29sZWFuIHRv\nTWFueSkgewogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBKb2lucyBvdXRlckpvaW4oRm9yZWlnbktleSBmaywg\nYm9vbGVhbiBpbnZlcnNlLCBib29sZWFuIHRvTWFueSkgewogICAgICAgICAg\nICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBKb2lu\ncyBqb2luUmVsYXRpb24oU3RyaW5nIG5hbWUsIEZvcmVpZ25LZXkgZmssIAog\nICAgICAgICAgICBDbGFzc01hcHBpbmcgdGFyZ2V0LCBpbnQgc3VicywgYm9v\nbGVhbiBpbnZlcnNlLCBib29sZWFuIHRvTWFueSkgewogICAgICAgICAgICBy\nZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBKb2lucyBv\ndXRlckpvaW5SZWxhdGlvbihTdHJpbmcgbmFtZSwgRm9yZWlnbktleSBmaywK\nICAgICAgICAgICAgQ2xhc3NNYXBwaW5nIHRhcmdldCwgaW50IHN1YnMsIGJv\nb2xlYW4gaW52ZXJzZSwgYm9vbGVhbiB0b01hbnkpIHsKICAgICAgICAgICAg\ncmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgSm9pbnMg\nc2V0VmFyaWFibGUoU3RyaW5nIHZhcikgewogICAgICAgICAgICByZXR1cm4g\ndGhpczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBKb2lucyBzZXRTdWJz\nZWxlY3QoU3RyaW5nIGFsaWFzKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlz\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIEpvaW5zIHNldEpvaW5Db250\nZXh0KENvbnRleHQgY29udGV4dCkgewogICAgICAgICAgICByZXR1cm4gdGhp\nczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGFwcGVuZFRvKFNR\nTEJ1ZmZlciBidWYpIHsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBKb2lu\ncyBzZXRDb3JyZWxhdGVkVmFyaWFibGUoU3RyaW5nIHZhcikgewogICAgICAg\nICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0Q29ycmVsYXRlZFZhcmlhYmxlKCkgewogICAgICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcHVibGlj\nIHZvaWQgbW92ZUpvaW5zVG9QYXJlbnQoKSB7CiAgICAgICAgfQogICAgfQp9\nCg==\n","encoding":"base64"}

