{"sha":"9b199ca458644dfbe304adab810fe43fc48c2a64","node_id":"MDQ6QmxvYjIwNjM2NDo5YjE5OWNhNDU4NjQ0ZGZiZTMwNGFkYWI4MTBmZTQzZmM0OGMyYTY0","size":14311,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9b199ca458644dfbe304adab810fe43fc48c2a64","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZhLm1h\ndGguQmlnRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRlZ2VyOwpp\nbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlBy\nZXBhcmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9u\nOwppbXBvcnQgamF2YS5zcWwuVHlwZXM7CmltcG9ydCBqYXZhLnV0aWwuQXJy\nYXlzOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0\naWxzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNv\nbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5G\nb3JlaWduS2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLlByaW1hcnlLZXk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuVW5pcXVlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5qZGJjLkRlbGVnYXRpbmdDb25uZWN0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLkNvbmNyZXRlQ2xhc3NHZW5lcmF0b3I7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwoKLyoq\nCiAqIERpY3Rpb25hcnkgZm9yIFN5YmFzZS4KICogIFRoZSBtYWluIHBvaW50\nIG9mIGludGVyZXN0IGlzIHRoYXQgYnkgZGVmYXVsdCwgZXZlcnkgdGFibGUK\nICogdGhhdCBpcyBjcmVhdGVkIHdpbGwgaGF2ZSBhIHVuaXF1ZSBjb2x1bW4g\nbmFtZWQgIlVOUV9JTkRFWCIgb2YKICogdGhlICJJREVOVElUWSIgdHlwZS4g\nT3BlbkpQQSB3aWxsIG5vdCBldmVyIHV0aWxpemUgdGhpcyBjb2x1bW4uIEhv\nd2V2ZXIsCiAqIGR1ZSB0byBpbnRlcm5hbCBTeWJhc2UgcmVzdHJpY3Rpb25z\nLCB0aGlzIGNvbHVtbiBpcyByZXF1aXJlZAogKiBpbiBvcmRlciB0byBzdXBw\nb3J0IHBlc3NpbWlzdGljIChkYXRhc3RvcmUpIGxvY2tpbmcsIHNpbmNlIFN5\nYmFzZQogKiByZXF1aXJlcyB0aGF0IGFueSB0YWJsZXMgaW4gYSAiU0VMRUNU\nIC4uLiBGT1IgVVBEQVRFIiBjbGF1c2UgaGF2ZQogKiBhIHVuaXF1ZSBpbmRl\neCB0aGF0IGlzIDxzdHJvbmc+bm90PC9zdHJvbmc+IGluY2x1ZGVkIGluIHRo\nZSBsaXN0CiAqIG9mIGNvbHVtbnMsIGFzIGRlc2NyaWJlZCBpbiB0aGUKICog\nPGEgaHJlZj0iaHR0cDovL3d3dy5zeWJhc2UuY29tL2RldGFpbC8xLDY5MDQs\nMTAyMzA3NSwwMC5odG1sIgogKiA+U3liYXNlIGRvY3VtZW50YXRpb248L2E+\nLiBUaGlzIGJlaGF2aW9yIGNhbiBiZSBzdXJwcmVzc2VkIGJ5IHNldHRpbmcg\ndGhlCiAqIGRpY3Rpb25hcnkgcHJvcGVydHkgPGNvZGU+Q3JlYXRlSWRlbnRp\ndHlDb2x1bW49ZmFsc2U8L2NvZGU+LiBUaGUKICogbmFtZSBvZiB0aGUgdW5p\ncXVlIGNvbHVtbiBjYW4gYmUgY2hhbmdlZCBieSBzZXR0aW5nIHRoZSBwcm9w\nZXJ0eQogKiA8Y29kZT5JZGVudGl0eUNvbHVtbk5hbWU9Q09MVU1OX05BTUU8\nL2NvZGU+LgogKiAgQSBnb29kIFN5YmFzZSB0eXBlIHJlZmVyZW5jZSBpcyBj\nYW4gYmUgZm91bmQgPGEKICogaHJlZj0iaHR0cDovL3d3dy5pc3BpcmVyLmNv\nbS9kb2Mvc3Fsd2F5czM2L3N5YmFzZS9zeWJfZHR5cGVzLmh0bWwiPmhlcmU8\nL2E+LgogKi8KcHVibGljIGNsYXNzIFN5YmFzZURpY3Rpb25hcnkKICAgIGV4\ndGVuZHMgQWJzdHJhY3RTUUxTZXJ2ZXJEaWN0aW9uYXJ5IHsKCiAgICBwcml2\nYXRlIHN0YXRpYyBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNr\nYWdlCiAgICAgICAgKFN5YmFzZURpY3Rpb25hcnkuY2xhc3MpOwoKICAgIHBy\naXZhdGUgc3RhdGljIENvbnN0cnVjdG9yPFN5YmFzZUNvbm5lY3Rpb24+IHN5\nYmFzZUNvbm5lY3Rpb25JbXBsOwoKICAgIHN0YXRpYyB7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgc3liYXNlQ29ubmVjdGlvbkltcGwgPSBDb25jcmV0\nZUNsYXNzR2VuZXJhdG9yLmdldENvbmNyZXRlQ29uc3RydWN0b3IoU3liYXNl\nQ29ubmVjdGlvbi5jbGFzcywgCiAgICAgICAgICAgICAgICAgICAgQ29ubmVj\ndGlvbi5jbGFzcyk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbkluSW5pdGlhbGl6ZXJF\ncnJvcihlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBJZiB0\ncnVlLCB0aGVuIHdoZW5ldmVyIHRoZSA8Y29kZT5zY2hlbWF0b29sPC9jb2Rl\nPiBjcmVhdGVzIGEKICAgICAqIHRhYmxlLCBpdCB3aWxsIGFwcGVuZCBhbiBh\nZGRpdGlvbmFsIElERU5USVRZIGNvbHVtbiB0byB0aGUKICAgICAqIHRhYmxl\nJ3MgY3JlYXRpb24gU1FMLiBUaGlzIGlzIHNvIFN5YmFzZSB3aWxsIGJlIGFi\nbGUgdG8KICAgICAqIHBlcmZvcm0gPGNvZGU+U0VMRUNULi4uRk9SIFVQREFU\nRTwvY29kZT4gc3RhdGVtZW50cy4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gY3JlYXRlSWRlbnRpdHlDb2x1bW4gPSB0cnVlOwoKICAgIC8qKgogICAg\nICogSWYge0BsaW5rICNjcmVhdGVJZGVudGl0eUNvbHVtbn0gaXMgdHJ1ZSwg\ndGhlbiB0aGUKICAgICAqIDxjb2RlPmlkZW50aXR5Q29sdW1uTmFtZTwvY29k\nZT4gd2lsbCBiZSB0aGUgbmFtZSBvZiB0aGUKICAgICAqIGFkZGl0aW9uYWwg\ndW5pcXVlIGNvbHVtbiB0aGF0IHdpbGwgYmUgY3JlYXRlZC4KICAgICAqLwog\nICAgcHVibGljIFN0cmluZyBpZGVudGl0eUNvbHVtbk5hbWUgPSAiVU5RX0lO\nREVYIjsKCiAgICAvKioKICAgICAqIElmIHRydWUsIFN5YmFzZSB3aWxsIGln\nbm9yZSBudW1lcmljIHRydW5jYXRpb24gb24gaW5zZXJ0IG9yCiAgICAgKiB1\ncGRhdGUgb3BlcmF0aW9ucy4gIE90aGVyd2lzZSwgdGhlIG9wZXJhdGlvbiB3\naWxsIGZhaWwuIFRoZSBkZWZhdWx0CiAgICAgKiB2YWx1ZSwgZmFsc2UgaXMg\naW4gYWNjb3JkYW5jZSB3aXRoIFNRTDkyLgogICAgICovCiAgICBwdWJsaWMg\nYm9vbGVhbiBpZ25vcmVOdW1lcmljVHJ1bmNhdGlvbiA9IGZhbHNlOwogICAg\nCiAgICBwdWJsaWMgU3liYXNlRGljdGlvbmFyeSgpIHsKICAgICAgICBwbGF0\nZm9ybSA9ICJTeWJhc2UiOwogICAgICAgIHNjaGVtYUNhc2UgPSBTQ0hFTUFf\nQ0FTRV9QUkVTRVJWRTsKICAgICAgICBmb3JVcGRhdGVDbGF1c2UgPSAiRk9S\nIFVQREFURSBBVCBJU09MQVRJT04gU0VSSUFMSVpBQkxFIjsKCiAgICAgICAg\nc3VwcG9ydHNMb2NraW5nV2l0aERpc3RpbmN0Q2xhdXNlID0gZmFsc2U7CiAg\nICAgICAgc3VwcG9ydHNOdWxsVGFibGVGb3JHZXRDb2x1bW5zID0gZmFsc2U7\nCiAgICAgICAgcmVxdWlyZXNBbGlhc0ZvclN1YnNlbGVjdCA9IHRydWU7CiAg\nICAgICAgcmVxdWlyZXNBdXRvQ29tbWl0Rm9yTWV0YURhdGEgPSB0cnVlOwoK\nICAgICAgICBtYXhUYWJsZU5hbWVMZW5ndGggPSAzMDsKICAgICAgICBtYXhD\nb2x1bW5OYW1lTGVuZ3RoID0gMzA7CiAgICAgICAgbWF4SW5kZXhOYW1lTGVu\nZ3RoID0gMzA7CiAgICAgICAgbWF4Q29uc3RyYWludE5hbWVMZW5ndGggPSAz\nMDsKCiAgICAgICAgYmlnaW50VHlwZU5hbWUgPSAiTlVNRVJJQygzOCkiOwog\nICAgICAgIGJpdFR5cGVOYW1lID0gIlRJTllJTlQiOwoKICAgICAgICAvLyBT\neWJhc2UgZG9lc24ndCB1bmRlcnN0YW5kICJYIENST1NTIEpPSU4gWSIsIGJ1\ndCBpdCBkb2VzIHVuZGVyc3RhbmQKICAgICAgICAvLyB0aGUgZXF1aXZhbGVu\ndCAiWCBKT0lOIFkgT04gMSA9IDEiCiAgICAgICAgY3Jvc3NKb2luQ2xhdXNl\nID0gIkpPSU4iOwogICAgICAgIHJlcXVpcmVzQ29uZGl0aW9uRm9yQ3Jvc3NK\nb2luID0gdHJ1ZTsKCiAgICAgICAgLy8gdGhlc2UgdGFibGVzIHNob3VsZCBu\nb3QgYmUgcmVmbGVjdGVkIG9uCiAgICAgICAgc3lzdGVtVGFibGVTZXQuYWRk\nQWxsKEFycmF5cy5hc0xpc3QobmV3IFN0cmluZ1tdewogICAgICAgICAgICAi\nSUpEQkNfRlVOQ1RJT05fRVNDQVBFUyIsICJKREJDX0ZVTkNUSU9OX0VTQ0FQ\nRVMiLAogICAgICAgICAgICAiU1BUX0lKREJDX0NPTlZFUlNJT04iLCAiU1BU\nX0lKREJDX01EQSIsICJTUFRfSUpEQkNfVEFCTEVfVFlQRVMiLAogICAgICAg\nICAgICAiU1BUX0pEQkNfQ09OVkVSU0lPTiIsICJTUFRfSkRCQ19UQUJMRV9U\nWVBFUyIsICJTUFRfSlRFWFQiLAogICAgICAgICAgICAiU1BUX0xJTUlUX1RZ\nUEVTIiwgIlNQVF9NREEiLCAiU1BUX01PTklUT1IiLCAiU1BUX1ZBTFVFUyIs\nCiAgICAgICAgICAgICJTWUJMSUNFTlNFU0xPRyIsCiAgICAgICAgfSkpOwoK\nICAgICAgICAvLyByZXNlcnZlZCB3b3JkcyBzcGVjaWZpZWQgYXQ6CiAgICAg\nICAgLy8gaHR0cDovL21hbnVhbHMuc3liYXNlLmNvbS9vbmxpbmVib29rcy9n\ncm91cC1hcy9hc2cxMjUwZS8KICAgICAgICAvLyByZWZtYW4vQEdlbmVyaWNf\nX0Jvb2tUZXh0Vmlldy8yNjYwMwogICAgICAgIHJlc2VydmVkV29yZFNldC5h\nZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117CiAgICAgICAgICAg\nICJBUklUSF9PVkVSRkxPVyIsICJCUkVBSyIsICJCUk9XU0UiLCAiQlVMSyIs\nICJDSEFSX0NPTlZFUlQiLAogICAgICAgICAgICAiQ0hFQ0tQT0lOVCIsICJD\nTFVTVEVSRUQiLCAiQ09NUFVURSIsICJDT05GSVJNIiwgIkNPTlRST0xST1ci\nLAogICAgICAgICAgICAiREFUQUJBU0UiLCAiREJDQyIsICJERVRFUk1JTklT\nVElDIiwgIkRJU0sgRElTVElOQ1QiLCAiRFVNTVkiLAogICAgICAgICAgICAi\nRFVNUCIsICJFTkRUUkFOIiwgIkVSUkxWTCIsICJFUlJPUkRBVEEiLCAiRVJS\nT1JFWElUIiwgIkVYQ0xVU0lWRSIsCiAgICAgICAgICAgICJFWElUIiwgIkVY\nUF9ST1dfU0laRSIsICJGSUxMRkFDVE9SIiwgIkZVTkMiLCAiRlVOQ1RJT04i\nLAogICAgICAgICAgICAiSE9MRExPQ0siLCAiSURFTlRJVFlfR0FQIiwgIklE\nRU5USVRZX0lOU0VSVCIsICJJREVOVElUWV9TVEFSVCIsCiAgICAgICAgICAg\nICJJRiIsICJJTkRFWCIsICJJTk9VVCIsICJJTlNUQUxMIiwgIklOVEVSU0VD\nVCIsICJKQVIiLCAiS0lMTCIsCiAgICAgICAgICAgICJMSU5FTk8iLCAiTE9B\nRCIsICJMT0NLIiwgIk1BWF9ST1dTX1BFUl9QQUdFIiwgIk1JUlJPUiIsCiAg\nICAgICAgICAgICJNSVJST1JFWElUIiwgIk1PRElGWSIsICJORVciLCAiTk9I\nT0xETE9DSyIsICJOT05DTFVTVEVSRUQiLAogICAgICAgICAgICAiTlVNRVJJ\nQ19UUlVOQ0FUSU9OIiwgIk9GRiIsICJPRkZTRVRTIiwgIk9OQ0UiLCAiT05M\nSU5FIiwgIk9VVCIsCiAgICAgICAgICAgICJPVkVSIiwgIlBBUlRJVElPTiIs\nICJQRVJNIiwgIlBFUk1BTkVOVCIsICJQTEFOIiwgIlBSSU5UIiwgIlBST0Mi\nLAogICAgICAgICAgICAiUFJPQ0VTU0VYSVQiLCAiUFJPWFlfVEFCTEUiLCAi\nUVVJRVNDRSIsICJSQUlTRVJST1IiLCAiUkVBRCIsCiAgICAgICAgICAgICJS\nRUFEUEFTVCIsICJSRUFEVEVYVCIsICJSRUNPTkZJR1VSRSIsICJSRUZFUkVO\nQ0VTIFJFTU9WRSIsICJSRU9SRyIsCiAgICAgICAgICAgICJSRVBMQUNFIiwg\nIlJFUExJQ0FUSU9OIiwgIlJFU0VSVkVQQUdFR0FQIiwgIlJFVFVSTiIsICJS\nRVRVUk5TIiwKICAgICAgICAgICAgIlJPTEUiLCAiUk9XQ09VTlQiLCAiUlVM\nRSIsICJTQVZFIiwgIlNFVFVTRVIiLCAiU0hBUkVEIiwKICAgICAgICAgICAg\nIlNIVVRET1dOIiwgIlNPTUUiLCAiU1RBVElTVElDUyIsICJTVFJJTkdTSVpF\nIiwgIlNUUklQRSIsCiAgICAgICAgICAgICJTWUJfSURFTlRJVFkiLCAiU1lC\nX1JFU1RSRUUiLCAiU1lCX1RFUk1JTkFURSIsICJURU1QIiwgIlRFWFRTSVpF\nIiwKICAgICAgICAgICAgIlRSQU4iLCAiVFJJR0dFUiIsICJUUlVOQ0FURSIs\nICJUU0VRVUFMIiwgIlVOUEFSVElUSU9OIiwgIlVTRSIsCiAgICAgICAgICAg\nICJVU0VSX09QVElPTiIsICJXQUlURk9SIiwgIldISUxFIiwgIldSSVRFVEVY\nVCIsCiAgICAgICAgfSkpOwoKICAgICAgICAvLyBTeWJhc2UgZG9lcyBub3Qg\nc3VwcG9ydCBmb3JlaWduIGtleSBkZWxldGUvdXBkYXRlIGFjdGlvbiBOVUxM\nLAogICAgICAgIC8vIERFRkFVTFQsIENBU0NBREUKICAgICAgICBzdXBwb3J0\nc051bGxEZWxldGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0Rl\nZmF1bHREZWxldGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0Nh\nc2NhZGVEZWxldGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c051\nbGxVcGRhdGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0RlZmF1\nbHRVcGRhdGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0Nhc2Nh\nZGVVcGRhdGVBY3Rpb24gPSBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgaW50\nIGdldEpEQkNUeXBlKGludCBtZXRhVHlwZUNvZGUsIGJvb2xlYW4gbG9iKSB7\nCiAgICAgICAgc3dpdGNoIChtZXRhVHlwZUNvZGUpIHsKICAgICAgICAgICAg\nLy8gdGhlIGRlZmF1bHQgbWFwcGluZyBmb3IgQllURSBpcyBhIFRJTllJTlQs\nIGJ1dCBTeWJhc2UncyBUSU5ZSU5UCiAgICAgICAgICAgIC8vIHR5cGUgY2Fu\nJ3QgaGFuZGxlIHRoZSBjb21wbGV0ZSByYW5nZSBmb3IgYSBKYXZhIGJ5dGUK\nICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQllURToKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuQllURV9PQko6CiAgICAgICAgICAgICAgICByZXR1\ncm4gZ2V0UHJlZmVycmVkVHlwZShUeXBlcy5TTUFMTElOVCk7CiAgICAgICAg\nICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZ2V0\nSkRCQ1R5cGUobWV0YVR5cGVDb2RlLCBsb2IpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXRCaWdJbnRlZ2VyKFByZXBhcmVkU3RhdGVt\nZW50IHN0bW50LCBpbnQgaWR4LCBCaWdJbnRlZ2VyIHZhbCwKICAgICAgICBD\nb2x1bW4gY29sKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIC8vIHNldEJpZ0RlY2ltYWwgZG9lc24ndCB3b3JrIGhlcmU6IGluIG9u\nZSBjYXNlLCBhIHN0b3JlZCB2YWx1ZQogICAgICAgIC8vIG9mIDc3OTk0Mzg1\nMTQ5MjQzNDk0NDAgdHVybnMgaW50byA3Nzk5NDM4NTE0OTI0MzQ5NDAwCiAg\nICAgICAgLy8gc2V0T2JqZWN0IGdldHMgYXJvdW5kIHRoaXMgaW4gdGhlIFN5\nYmFzZSBKREJDIGRyaXZlcnMKICAgICAgICBzZXRPYmplY3Qoc3RtbnQsIGlk\neCwgbmV3IEJpZ0RlY2ltYWwodmFsKSwgVHlwZXMuQklHSU5ULCBjb2wpOwog\nICAgfQoKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRBZGRGb3JlaWduS2V5U1FM\nKEZvcmVpZ25LZXkgZmspIHsKICAgICAgICAvLyBTeWJhc2UgaGFzIHByb2Js\nZW1zIHdpdGggYWRkaW5nIGZvcmllZ24ga2V5cyB2aWEgQUxURVIgVEFCTEUg\nY29tbWFuZAogICAgICAgIHJldHVybiBuZXcgU3RyaW5nWzBdOwogICAgfQoK\nICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRDcmVhdGVUYWJsZVNRTChUYWJsZSB0\nYWJsZSkgewogICAgICAgIGlmICghY3JlYXRlSWRlbnRpdHlDb2x1bW4pCiAg\nICAgICAgICAgIHJldHVybiBzdXBlci5nZXRDcmVhdGVUYWJsZVNRTCh0YWJs\nZSk7CgogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVm\nZmVyKCk7CiAgICAgICAgYnVmLmFwcGVuZCgiQ1JFQVRFIFRBQkxFICIpLmFw\ncGVuZChnZXRGdWxsTmFtZSh0YWJsZSwgZmFsc2UpKS4KICAgICAgICAgICAg\nYXBwZW5kKCIgKCIpOwoKICAgICAgICBDb2x1bW5bXSBjb2xzID0gdGFibGUu\nZ2V0Q29sdW1ucygpOwogICAgICAgIGJvb2xlYW4gaGFzSWRlbnRpdHkgPSBm\nYWxzZTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0\naDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChjb2xzW2ldLmlzQXV0b0Fzc2ln\nbmVkKCkpCiAgICAgICAgICAgICAgICBoYXNJZGVudGl0eSA9IHRydWU7Cgog\nICAgICAgICAgICBidWYuYXBwZW5kKGkgPT0gMCA/ICIiIDogIiwgIik7CiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoZ2V0RGVjbGFyZUNvbHVtblNRTChjb2xz\nW2ldLCBmYWxzZSkpOwogICAgICAgIH0KCiAgICAgICAgLy8gYWRkIGFuIGlk\nZW50aXR5IGNvbHVtbiBpZiB3ZSBkbyBub3QgYWxyZWFkeSBoYXZlIG9uZQog\nICAgICAgIGlmICghaGFzSWRlbnRpdHkpCiAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoIiwgIikuYXBwZW5kKGlkZW50aXR5Q29sdW1uTmFtZSkuCiAgICAgICAg\nICAgICAgICBhcHBlbmQoIiBOVU1FUklDIElERU5USVRZIFVOSVFVRSIpOwoK\nICAgICAgICBQcmltYXJ5S2V5IHBrID0gdGFibGUuZ2V0UHJpbWFyeUtleSgp\nOwogICAgICAgIGlmIChwayAhPSBudWxsKQogICAgICAgICAgICBidWYuYXBw\nZW5kKCIsICIpLmFwcGVuZChnZXRQcmltYXJ5S2V5Q29uc3RyYWludFNRTChw\naykpOwoKICAgICAgICBVbmlxdWVbXSB1bnFzID0gdGFibGUuZ2V0VW5pcXVl\ncygpOwogICAgICAgIFN0cmluZyB1bnFTdHI7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCB1bnFzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHVu\ncVN0ciA9IGdldFVuaXF1ZUNvbnN0cmFpbnRTUUwodW5xc1tpXSk7CiAgICAg\nICAgICAgIGlmICh1bnFTdHIgIT0gbnVsbCkKICAgICAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoIiwgIikuYXBwZW5kKHVucVN0cik7CiAgICAgICAgfQoKICAg\nICAgICBidWYuYXBwZW5kKCIpIik7CiAgICAgICAgcmV0dXJuIG5ldyBTdHJp\nbmdbXXsgYnVmLnRvU3RyaW5nKCkgfTsKICAgIH0KCiAgICBwcm90ZWN0ZWQg\nU3RyaW5nIGdldERlY2xhcmVDb2x1bW5TUUwoQ29sdW1uIGNvbCwgYm9vbGVh\nbiBhbHRlcikgewogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3Ry\naW5nQnVmZmVyKCk7CiAgICAgICAgYnVmLmFwcGVuZChjb2wpLmFwcGVuZCgi\nICIpOwogICAgICAgIGJ1Zi5hcHBlbmQoZ2V0VHlwZU5hbWUoY29sKSk7Cgog\nICAgICAgIC8vIGNhbid0IGFkZCBjb25zdHJhaW50cyB0byBhIGNvbHVtbiB3\nZSdyZSBhZGRpbmcgYWZ0ZXIgdGFibGUKICAgICAgICAvLyBjcmVhdGlvbiwg\nY2F1c2Ugc29tZSBkYXRhIG1pZ2h0IGFscmVhZHkgYmUgaW5zZXJ0ZWQKICAg\nICAgICBpZiAoIWFsdGVyKSB7CiAgICAgICAgICAgIGlmIChjb2wuZ2V0RGVm\nYXVsdFN0cmluZygpICE9IG51bGwgJiYgIWNvbC5pc0F1dG9Bc3NpZ25lZCgp\nKQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiIERFRkFVTFQgIikuYXBw\nZW5kKGNvbC5nZXREZWZhdWx0U3RyaW5nKCkpOwogICAgICAgICAgICBpZiAo\nY29sLmlzQXV0b0Fzc2lnbmVkKCkpCiAgICAgICAgICAgICAgICBidWYuYXBw\nZW5kKCIgSURFTlRJVFkiKTsKICAgICAgICB9CgogICAgICAgIGlmIChjb2wu\naXNOb3ROdWxsKCkpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBOT1QgTlVM\nTCIpOwogICAgICAgIGVsc2UgaWYgKCFjb2wuaXNQcmltYXJ5S2V5KCkpIHsK\nICAgICAgICAgICAgLy8gc3liYXNlIGZvcmNlcyB5b3UgdG8gZXhwbGljaXRs\neSBzcGVjaWZ5IHRoYXQKICAgICAgICAgICAgLy8geW91IHdpbGwgYWxsb3cg\nTlVMTCB2YWx1ZXMKICAgICAgICAgICAgYnVmLmFwcGVuZCgiIE5VTEwiKTsK\nICAgICAgICB9CgogICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0RHJvcENvbHVtblNRTChDb2x1\nbW4gY29sdW1uKSB7CiAgICAgICAgLy8gU3liYXNlIHVzZXMgIkFMVEVSIFRB\nQkxFIERST1AgPENPTFVNTl9OQU1FPiIgcmF0aGVyIHRoYW4gdGhlCiAgICAg\nICAgLy8gdXN1YWwgIkFMVEVSIFRBQkxFIERST1AgQ09MVU1OIDxDT0xVTU5f\nTkFNRT4iCiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbXXsgIkFMVEVSIFRB\nQkxFICIKICAgICAgICAgICAgKyBnZXRGdWxsTmFtZShjb2x1bW4uZ2V0VGFi\nbGUoKSwgZmFsc2UpICsgIiBEUk9QICIgKyBjb2x1bW4gfTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCByZWZTY2hlbWFDb21wb25lbnRzKFRhYmxlIHRhYmxl\nKSB7CiAgICAgICAgLy8gbm90ZSB0aGF0IHdlIHVzZSBnZXRDb2x1bW5zKCkg\ncmF0aGVyIHRoYW4gZ2V0dGluZyB0aGUgY29sdW1uIGJ5IG5hbWUKICAgICAg\nICAvLyBiZWNhdXNlIHVuZGVyIHNvbWUgY2lyY3Vtc3RhbmNlcyB0aGlzIG1l\ndGhvZCBpcyBjYWxsZWQgdW5kZXIgdGhlCiAgICAgICAgLy8gZHluYW1pYyBz\nY2hlbWEgZmFjdG9yeSwgd2hlcmUgZ2V0dGluZyBhIGNvbHVtbiBieSBuYW1l\nIGNyZWF0ZXMKICAgICAgICAvLyB0aGF0IGNvbHVtbgogICAgICAgIENvbHVt\nbltdIGNvbHMgPSB0YWJsZS5nZXRDb2x1bW5zKCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBp\nZiAoaWRlbnRpdHlDb2x1bW5OYW1lLmVxdWFsc0lnbm9yZUNhc2UoY29sc1tp\nXS5nZXROYW1lKCkpKQogICAgICAgICAgICAgICAgY29sc1tpXS5yZWYoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBlbmRDb25maWd1cmF0aW9uKCkgewog\nICAgICAgIHN1cGVyLmVuZENvbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgLy8g\nd2FybiBhYm91dCBqZGJjIGNvbXBsaWFudCBmbGFnCiAgICAgICAgU3RyaW5n\nIHVybCA9IGNvbmYuZ2V0Q29ubmVjdGlvblVSTCgpOwogICAgICAgIGlmICgh\nU3RyaW5nVXRpbHMuaXNFbXB0eSh1cmwpCiAgICAgICAgICAgICYmIHVybC50\nb0xvd2VyQ2FzZSgpLmluZGV4T2YoImpkYmM6c3liYXNlOnRkcyIpICE9IC0x\nCiAgICAgICAgICAgICYmIHVybC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImJl\nX2FzX2pkYmNfY29tcGxpYW50X2FzX3Bvc3NpYmxlPSIpCiAgICAgICAgICAg\nID09IC0xKSB7CiAgICAgICAgICAgIGxvZy53YXJuKF9sb2MuZ2V0KCJzeWJh\nc2UtY29tcGxpYW5jZSIsIHVybCkpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgQ29ubmVjdGlvbiBkZWNvcmF0ZShDb25uZWN0aW9uIGNvbm4pCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgY29ubiA9IHN1\ncGVyLmRlY29yYXRlKGNvbm4pOwogICAgICAgIC8vIEluIG9yZGVyIGZvciBT\neWJhc2UgdG8gcmFpc2UgdGhlIHRydW5jYXRpb24gZXhjZXB0aW9uIHdoZW4g\ndGhlIAogICAgICAgIC8vIHN0cmluZyBsZW5ndGggaXMgZ3JlYXRlciB0aGFu\nIHRoZSBjb2x1bW4gbGVuZ3RoIGZvciBDaGFyLCBWYXJDaGFyLCAKICAgICAg\nICAvLyBCaW5hcnksIFZhckJpbmFyeSwgdGhlICJzZXQgc3RyaW5nX3J0cnVu\nY2F0aW9uIG9uIiBtdXN0IGJlIGV4ZWN1dGVkLiAKICAgICAgICAvLyBUaGlz\nIHNldHRpbmcgaXMgZWZmZWN0aXZlIGZvciB0aGUgZHVyYXRpb24gb2YgY3Vy\ncmVudCBjb25uZWN0aW9uLgogICAgICAgIGlmIChzZXRTdHJpbmdSaWdodFRy\ndW5jYXRpb25PbikgewogICAgICAgICAgICBTdHJpbmcgc3RyID0gInNldCBz\ndHJpbmdfcnRydW5jYXRpb24gb24iOwogICAgICAgICAgICBQcmVwYXJlZFN0\nYXRlbWVudCBzdG1udCA9IHByZXBhcmVTdGF0ZW1lbnQoY29ubiwgc3RyKTsg\nICAgICAgIAogICAgICAgICAgICBzdG1udC5leGVjdXRlKCk7CiAgICAgICAg\nICAgIHN0bW50LmNsb3NlKCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAg\nIC8vIEJ5IGRlZmF1bHQsIFN5YmFzZSB3aWxsIGZhaWwgdG8gaW5zZXJ0IG9y\nIHVwZGF0ZSBpZiBhIG51bWVyaWMKICAgICAgICAvLyB0cnVuY2F0aW9uIG9j\nY3VycyBhcyBhIHJlc3VsdCBvZiwgZm9yIGV4YW1wbGUsIGxvc3Mgb2YgZGVj\naW1hbAogICAgICAgIC8vIHByZWNpc2lvbi4gIFRoaXMgc2V0dGluZyBzcGVj\naWZpZXMgdGhhdCB0aGUgb3BlcmF0aW9uIHNob3VsZCBub3QgCiAgICAgICAg\nLy8gZmFpbCBpZiBhIG51bWVyaWMgdHJ1bmNhdGlvbiBvY2N1cnMuCiAgICAg\nICAgaWYgKGlnbm9yZU51bWVyaWNUcnVuY2F0aW9uKSB7CiAgICAgICAgICAg\nIFN0cmluZyBzdHIgPSAic2V0IGFyaXRoYWJvcnQgbnVtZXJpY190cnVuY2F0\naW9uIG9mZiI7CiAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bW50\nID0gcHJlcGFyZVN0YXRlbWVudChjb25uLCBzdHIpOyAgICAgICAgCiAgICAg\nICAgICAgIHN0bW50LmV4ZWN1dGUoKTsKICAgICAgICAgICAgc3RtbnQuY2xv\nc2UoKTsgICAgICAgICAgICAKICAgICAgICB9ICAgICAgICAKICAgICAgICAK\nICAgICAgICByZXR1cm4gQ29uY3JldGVDbGFzc0dlbmVyYXRvci5uZXdJbnN0\nYW5jZShzeWJhc2VDb25uZWN0aW9uSW1wbCwgY29ubik7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBDb25uZWN0aW9uIHdyYXBwZXIgdG8gY2FjaGUgdGhlIHtA\nbGluayBDb25uZWN0aW9uI2dldENhdGFsb2d9IHJlc3VsdCwKICAgICAqIHdo\naWNoIHRha2VzIGEgdmVyeSBsb25nIHRpbWUgd2l0aCB0aGUgU3liYXNlIENv\nbm5lY3Rpb24gKGFuZAogICAgICogd2hpY2ggd2UgZnJlcXVlbnRseSBpbnZv\na2UpLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgc3RhdGljIGNs\nYXNzIFN5YmFzZUNvbm5lY3Rpb24KICAgICAgICBleHRlbmRzIERlbGVnYXRp\nbmdDb25uZWN0aW9uIHsKCiAgICAgICAgcHJpdmF0ZSBTdHJpbmcgX2NhdGFs\nb2cgPSBudWxsOwoKICAgICAgICBwdWJsaWMgU3liYXNlQ29ubmVjdGlvbihD\nb25uZWN0aW9uIGNvbm4pIHsKICAgICAgICAgICAgc3VwZXIoY29ubik7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgU3RyaW5nIGdldENhdGFsb2coKQog\nICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAg\naWYgKF9jYXRhbG9nID09IG51bGwpCiAgICAgICAgICAgICAgICBfY2F0YWxv\nZyA9IHN1cGVyLmdldENhdGFsb2coKTsKICAgICAgICAgICAgcmV0dXJuIF9j\nYXRhbG9nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0QXV0\nb0NvbW1pdChib29sZWFuIGF1dG9jb21taXQpCiAgICAgICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICAvLyB0aGUgc3liYXNlIGpk\nYmMgZHJpdmVyIGRlbWFuZHMgdGhhdCB0aGUgQ29ubmVjdGlvbiBhbHdheXMK\nICAgICAgICAgICAgLy8gYmUgcm9sbGVkIGJhY2sgYmVmb3JlIGF1dG9jb21t\naXQgc3RhdHVzIGNoYW5nZXMuIEZhaWx1cmUgdG8KICAgICAgICAgICAgLy8g\nZG8gc28gd2lsbCB5aWVsZCAiU0VUIENIQUlORUQgY29tbWFuZCBub3QgYWxs\nb3dlZCB3aXRoaW4KICAgICAgICAgICAgLy8gbXVsdGktc3RhdGVtZW50IHRy\nYW5zYWN0aW9uLiIgZXhjZXB0aW9ucwogICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgc3VwZXIuc2V0QXV0b0NvbW1pdChhdXRvY29tbWl0KTsK\nICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgICAgIC8vIGZhaWxlZCBmb3Igc29tZSByZWFzb246IHRyeSByb2xs\naW5nIGJhY2sgYW5kIHRoZW4KICAgICAgICAgICAgICAgIC8vIHNldHRpbmcg\nYXV0b2NvbW1pdCBhZ2Fpbi4KICAgICAgICAgICAgICAgIGlmIChhdXRvY29t\nbWl0KQogICAgICAgICAgICAgICAgICAgIHN1cGVyLmNvbW1pdCgpOwogICAg\nICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHN1cGVyLnJv\nbGxiYWNrKCk7CiAgICAgICAgICAgICAgICBzdXBlci5zZXRBdXRvQ29tbWl0\nKGF1dG9jb21taXQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9\nCg==\n","encoding":"base64"}

