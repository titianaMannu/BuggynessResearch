{"sha":"9e815c80c55f016f98863168cd28e45c607c701c","node_id":"MDQ6QmxvYjIwNjM2NDo5ZTgxNWM4MGM1NWYwMTZmOTg4NjMxNjhjZDI4ZTQ1YzYwN2M3MDFj","size":5872,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9e815c80c55f016f98863168cd28e45c607c701c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuYWJzdHJhY3RzdG9yZTsKCmlt\ncG9ydCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CmltcG9ydCBq\nYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLlByb3BlcnRpZXM7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3Vy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkFic3Ry\nYWN0QnJva2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuQm9vdHN0cmFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5Ccm9rZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5TdG9yZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLmNvbmYuQ29uZmlndXJhdGlvblByb3ZpZGVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLlByb2R1Y3REZXJpdmF0\naW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KMkRv\nUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5V\nc2VyRXhjZXB0aW9uOwoKLyoqCiAqIHtAbGluayBCcm9rZXJGYWN0b3J5fSBp\nbXBsZW1lbnRhdGlvbiBmb3IgdXNlIHdpdGggdGhlCiAqIHtAbGluayBBYnN0\ncmFjdFN0b3JlTWFuYWdlcn0uIFRoaXMgcHJvdmlkZXMgaW50ZWdyYXRpb24g\naW50byB0aGUKICoge0BsaW5rIEJvb3RzdHJhcCNnZXRCcm9rZXJGYWN0b3J5\nKCl9IGJvb3RzdHJhcHBpbmcgbWVjaGFuaXNtLCB0byBmYWNpbGl0YXRlCiAq\nIHRoZSBwcm9jZXNzIG9mIGNyZWF0aW5nIGEgc3ViY2xhc3Mgb2Yge0BsaW5r\nIEFic3RyYWN0U3RvcmVNYW5hZ2VyfS4gTmV3CiAqIHN0b3JlIG1hbmFnZXIg\naW1wbGVtZW50YXRpb25zIG5lZWQgbm90IGV4dGVuZCB0aGlzIGNsYXNzLiBJ\nbnN0ZWFkLCBzZXQgdGhlCiAqIDxjb2RlPm9wZW5qcGEuQnJva2VyRmFjdG9y\neTwvY29kZT4gY29uZmlndXJhdGlvbiBwcm9wZXJ0eSB0bwogKiA8Y29kZT5h\nYnN0cmFjdHN0b3JlPC9jb2RlPiwKICogYW5kIHNldCB0aGUgPGNvZGU+b3Bl\nbmpwYS5hYnN0cmFjdHN0b3JlLkFic3RyYWN0U3RvcmVNYW5hZ2VyPC9jb2Rl\nPgogKiBjb25maWd1cmF0aW9uIHByb3BlcnR5IHRvIHRoZSBmdWxsIGNsYXNz\nIG5hbWUgb2YgeW91ciBpbXBsZW1lbnRhdGlvbi4KICogIEFkZGl0aW9uYWxs\neSwgeW91IGNhbiBvcHRpb25hbGx5IGNyZWF0ZSB5b3VyIG93bgogKiA8Y29k\nZT5Ccm9rZXJGYWN0b3J5PC9jb2RlPiBpbXBsZW1lbnRhdGlvbi4gSG93ZXZl\nciwgd2UgcmVjb21tZW5kIHRoYXQgeW91CiAqIHVzZSB0aGUgPGNvZGU+QWJz\ndHJhY3RTdG9yZUJyb2tlckZhY3Rvcnk8L2NvZGU+LCBhcyBpdCBkZWFscyB3\naXRoIHBvb2xpbmcKICogYW5kIGJvb3RzdHJhcHBpbmcgZnJvbSBhIHtAbGlu\nayBNYXB9IG9iamVjdCAodGhlIHN0cmF0ZWd5IHVzZWQgYnkKICoge0BsaW5r\nIEJvb3RzdHJhcH0gdG8gY3JlYXRlIGEgZmFjdG9yeSBpbiBhIHZlbmRvci1u\nZXV0cmFsIG1hbm5lcikuCiAqLwpwdWJsaWMgY2xhc3MgQWJzdHJhY3RTdG9y\nZUJyb2tlckZhY3RvcnkKICAgIGV4dGVuZHMgQWJzdHJhY3RCcm9rZXJGYWN0\nb3J5IHsKCiAgICAvKioKICAgICAqIFRoZSBwcm9wZXJ0eSBuYW1lIHVuZGVy\nIHdoaWNoIHRvIG5hbWUgdGhlIGNvbmNyZXRlIHN0b3JlIG1hbmFnZXIKICAg\nICAqIGNsYXNzIGZvciB0aGlzIHJ1bnRpbWUuCiAgICAgKi8KICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIFN0cmluZyBQUk9QX0FCU1RSQUNUX1NUT1JFID0K\nICAgICAgICAiYWJzdHJhY3RzdG9yZS5BYnN0cmFjdFN0b3JlTWFuYWdlciI7\nCgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIHNfbG9jID0g\nTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoQWJzdHJhY3RTdG9yZUJy\nb2tlckZhY3RvcnkuY2xhc3MpOwoKICAgIHByaXZhdGUgU3RyaW5nIF9zdG9y\nZUNscyA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfc3RvcmVQcm9wcyA9\nIG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfcGxhdGZvcm0gPSBudWxsOwoK\nICAgIC8qKgogICAgICogRmFjdG9yeSBtZXRob2QgZm9yIG9idGFpbmluZyBh\nIHBvc3NpYmx5LXBvb2xlZCB7QGxpbmsgQnJva2VyRmFjdG9yeX0KICAgICAq\nIGZyb20gcHJvcGVydGllcy4gSW52b2tlZCBmcm9tIHtAbGluayBCb290c3Ry\nYXAjZ2V0QnJva2VyRmFjdG9yeSgpfS4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBBYnN0cmFjdFN0b3JlQnJva2VyRmFjdG9yeSBnZXRJbnN0YW5jZSgK\nICAgICAgICBDb25maWd1cmF0aW9uUHJvdmlkZXIgY3ApIHsKICAgICAgICBP\nYmplY3Qga2V5ID0gdG9Qb29sS2V5KGNwLmdldFByb3BlcnRpZXMoKSk7CiAg\nICAgICAgQWJzdHJhY3RTdG9yZUJyb2tlckZhY3RvcnkgZmFjdG9yeSA9IChB\nYnN0cmFjdFN0b3JlQnJva2VyRmFjdG9yeSkKICAgICAgICAgICAgZ2V0UG9v\nbGVkRmFjdG9yeUZvcktleShrZXkpOwogICAgICAgIGlmIChmYWN0b3J5ICE9\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5OwoKICAgICAgICBm\nYWN0b3J5ID0gbmV3SW5zdGFuY2UoY3ApOwogICAgICAgIGZhY3RvcnkucG9v\nbChrZXksIGZhY3RvcnkpOwogICAgICAgIHJldHVybiBmYWN0b3J5OwogICAg\nfQoKICAgIC8qKgogICAgICogRmFjdG9yeSBtZXRob2QgZm9yIGNvbnN0cnVj\ndGluZyBhIHtAbGluayBCcm9rZXJGYWN0b3J5fQogICAgICogZnJvbSBwcm9w\nZXJ0aWVzLiBJbnZva2VkIGZyb20ge0BsaW5rIEJvb3RzdHJhcCNuZXdCcm9r\nZXJGYWN0b3J5KCl9LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIEFic3Ry\nYWN0U3RvcmVCcm9rZXJGYWN0b3J5IG5ld0luc3RhbmNlCiAgICAgICAgKENv\nbmZpZ3VyYXRpb25Qcm92aWRlciBjcCkgewogICAgICAgIC8vIHVzZSBhIHRt\ncCBzdG9yZSBtYW5hZ2VyIHRvIGdldCBtZXRhZGF0YSBhYm91dCB0aGUgY2Fw\nYWJpbGl0aWVzIG9mCiAgICAgICAgLy8gdGhpcyBydW50aW1lCiAgICAgICAg\nTWFwIG1hcCA9IGNwLmdldFByb3BlcnRpZXMoKTsKICAgICAgICBTdHJpbmcg\nc3RvcmVQbHVnaW4gPSAoU3RyaW5nKSBtYXAuZ2V0KFByb2R1Y3REZXJpdmF0\naW9ucwogICAgICAgICAgICAuZ2V0Q29uZmlndXJhdGlvbktleShQUk9QX0FC\nU1RSQUNUX1NUT1JFLCBtYXApKTsKICAgICAgICBTdHJpbmcgc3RvcmVDbHMg\nPSBDb25maWd1cmF0aW9ucy5nZXRDbGFzc05hbWUoc3RvcmVQbHVnaW4pOwog\nICAgICAgIFN0cmluZyBzdG9yZVByb3BzID0gQ29uZmlndXJhdGlvbnMuZ2V0\nUHJvcGVydGllcyhzdG9yZVBsdWdpbik7CiAgICAgICAgQWJzdHJhY3RTdG9y\nZU1hbmFnZXIgc3RvcmUgPSBjcmVhdGVTdG9yZU1hbmFnZXIoc3RvcmVDbHMs\nCiAgICAgICAgICAgIHN0b3JlUHJvcHMpOwoKICAgICAgICAvLyBwb3B1bGF0\nZSBjb25maWd1cmF0aW9uCiAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24g\nY29uZiA9IHN0b3JlLm5ld0NvbmZpZ3VyYXRpb24oKTsKICAgICAgICBjcC5z\nZXRJbnRvKGNvbmYpOwogICAgICAgIGNvbmYuc3VwcG9ydGVkT3B0aW9ucygp\nLnJlbW92ZUFsbChzdG9yZS5nZXRVbnN1cHBvcnRlZE9wdGlvbnMoKSk7Cgog\nICAgICAgIC8vIGNyZWF0ZSBhbmQgcG9vbCBhIG5ldyBmYWN0b3J5CiAgICAg\nICAgcmV0dXJuIG5ldyBBYnN0cmFjdFN0b3JlQnJva2VyRmFjdG9yeShjb25m\nLCBzdG9yZUNscywgc3RvcmVQcm9wcywKICAgICAgICAgICAgc3RvcmUuZ2V0\nUGxhdGZvcm0oKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Qg\ndGhlIGZhY3Rvcnkgd2l0aCB0aGUgZ2l2ZW4gc2V0dGluZ3MuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCBBYnN0cmFjdFN0b3JlQnJva2VyRmFjdG9yeShPcGVu\nSlBBQ29uZmlndXJhdGlvbiBjb25mLAogICAgICAgIFN0cmluZyBzdG9yZUNs\ncywgU3RyaW5nIHN0b3JlUHJvcHMsIFN0cmluZyBwbGF0Zm9ybSkgewogICAg\nICAgIHN1cGVyKGNvbmYpOwogICAgICAgIF9zdG9yZUNscyA9IHN0b3JlQ2xz\nOwogICAgICAgIF9zdG9yZVByb3BzID0gc3RvcmVQcm9wczsKICAgICAgICBf\ncGxhdGZvcm0gPSBwbGF0Zm9ybTsKICAgIH0KCiAgICBwdWJsaWMgTWFwPFN0\ncmluZyxPYmplY3Q+IGdldFByb3BlcnRpZXMoKSB7CiAgICAgICAgTWFwPFN0\ncmluZyxPYmplY3Q+IHByb3BzID0gc3VwZXIuZ2V0UHJvcGVydGllcygpOwog\nICAgICAgIHByb3BzLnB1dCgiUGxhdGZvcm0iLCBfcGxhdGZvcm0pOwogICAg\nICAgIHJldHVybiBwcm9wczsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RvcmVN\nYW5hZ2VyIG5ld1N0b3JlTWFuYWdlcigpIHsKICAgICAgICByZXR1cm4gY3Jl\nYXRlU3RvcmVNYW5hZ2VyKF9zdG9yZUNscywgX3N0b3JlUHJvcHMpOwogICAg\nfQoKICAgIHByaXZhdGUgc3RhdGljIEFic3RyYWN0U3RvcmVNYW5hZ2VyIGNy\nZWF0ZVN0b3JlTWFuYWdlcihTdHJpbmcgY2xzLAogICAgICAgIFN0cmluZyBw\ncm9wcykgewogICAgICAgIEFic3RyYWN0U3RvcmVNYW5hZ2VyIHN0b3JlID0K\nICAgICAgICAgICAgKEFic3RyYWN0U3RvcmVNYW5hZ2VyKSBDb25maWd1cmF0\naW9ucy5uZXdJbnN0YW5jZShjbHMsCiAgICAgICAgICAgICAgICBBY2Nlc3ND\nb250cm9sbGVyLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlcgogICAgICAg\nICAgICAgICAgICAgIC5nZXRDbGFzc0xvYWRlckFjdGlvbihBYnN0cmFjdFN0\nb3JlTWFuYWdlci5jbGFzcykpKTsgCiAgICAgICAgQ29uZmlndXJhdGlvbnMu\nY29uZmlndXJlSW5zdGFuY2Uoc3RvcmUsIG51bGwsIHByb3BzLAogICAgICAg\nICAgICBQUk9QX0FCU1RSQUNUX1NUT1JFKTsKICAgICAgICBpZiAoc3RvcmUg\nPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24o\nc19sb2MuZ2V0KCJuby1zdG9yZS1tYW5hZ2VyIiwKICAgICAgICAgICAgICAg\nIFBST1BfQUJTVFJBQ1RfU1RPUkUpKS5zZXRGYXRhbCh0cnVlKTsKCiAgICAg\nICAgcmV0dXJuIHN0b3JlOwoJfQp9Cg==\n","encoding":"base64"}

