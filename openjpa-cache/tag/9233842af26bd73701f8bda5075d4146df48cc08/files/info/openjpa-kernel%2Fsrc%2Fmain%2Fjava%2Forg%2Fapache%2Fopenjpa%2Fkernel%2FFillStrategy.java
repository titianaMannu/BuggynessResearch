{"sha":"c0ade1757915e5510ac9820c4522f6b3ffba4582","node_id":"MDQ6QmxvYjIwNjM2NDpjMGFkZTE3NTc5MTVlNTUxMGFjOTgyMGM0NTIyZjZiM2ZmYmE0NTgy","size":9209,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c0ade1757915e5510ac9820c4522f6b3ffba4582","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgamF2YS5s\nYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZhLmxhbmcucmVm\nbGVjdC5JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uOwppbXBvcnQgamF2YS5s\nYW5nLnJlZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5SZWZsZWN0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXpl\ncjsKCgovKioKICogQSBzdHJhdGVneSB0byBmaWxsIGRhdGEgaW50byBhIHtA\nbGluayBSZXN1bHRTaGFwZX0uCiAqIDxCUj4KICogQXZhaWxhYmxlIHN0cmF0\nZWd5IGltcGxlbWVudGF0aW9ucyBjYW4gZmlsbCBieSBpbnZva2luZyBjb25z\ndHJ1Y3Rvciwgc2V0dGluZyBhcnJheSBlbGVtZW50cywgZGlyZWN0IGFzc2ln\nbm1lbnQsCiAqIGludm9raW5nIHB1dChrZXksdmFsdWUpLXN0eWxlIG1ldGhv\nZCBvbiBNYXAgb3IgZmFjdG9yeS1jb25zdHJ1Y3RlZCBpbnN0YW5jZS4gCiAq\nIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICogCiAqIEBzaW5jZSAyLjAu\nMAogKgogKi8KcHVibGljIGludGVyZmFjZSBGaWxsU3RyYXRlZ3k8VD4gewog\nICAgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZv\nclBhY2thZ2UoRmlsbFN0cmF0ZWd5LmNsYXNzKTsKICAgIAogICAgVCBmaWxs\nKE9iamVjdFtdIGRhdGEsIENsYXNzPD8+W10gdHlwZXMsIFN0cmluZ1tdIGFs\naWFzZXMpOwogICAgCiAgICAKICAgIC8qKgogICAgICogRmlsbHMgYW4gYXJy\nYXkgb2YgZ2l2ZW4gdHlwZS4gCiAgICAgKgogICAgICogQHBhcmFtIDxUPiBt\ndXN0IGJlIGFuIGFycmF5IHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgY2xhc3MgQXJyYXk8VD4gaW1wbGVtZW50cyBGaWxsU3RyYXRlZ3k8VD4g\newogICAgICAgIHByaXZhdGUgZmluYWwgQ2xhc3M8Pz4gY2xzOwogICAgICAg\nIHB1YmxpYyBBcnJheShDbGFzczxUPiBhcnJheUNscykgewogICAgICAgICAg\nICBpZiAoYXJyYXlDbHMgPT0gbnVsbCB8fCAhYXJyYXlDbHMuaXNBcnJheSgp\nKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbihfbG9jLmdldCgiZmlsbC1iYWQtYXJyYXkiLCBhcnJheUNscyku\nZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgdGhpcy5jbHMgPSBhcnJheUNs\ncy5nZXRDb21wb25lbnRUeXBlKCk7CiAgICAgICAgfQogICAgICAgIAogICAg\nICAgIHB1YmxpYyBUIGZpbGwoT2JqZWN0W10gdmFsdWVzLCBDbGFzczw/Pltd\nIHR5cGVzLCBTdHJpbmdbXSBhbGlhc2VzKSB7CiAgICAgICAgICAgIE9iamVj\ndCBhcnJheSA9IGphdmEubGFuZy5yZWZsZWN0LkFycmF5Lm5ld0luc3RhbmNl\nKGNscywgdmFsdWVzLmxlbmd0aCk7CiAgICAgICAgICAgIFN5c3RlbS5hcnJh\neWNvcHkodmFsdWVzLCAwLCBhcnJheSwgMCwgdmFsdWVzLmxlbmd0aCk7CiAg\nICAgICAgICAgIHJldHVybiAoVClhcnJheTsKICAgICAgICB9CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogQ29uc3RydWN0IGFuZCBwb3B1bGF0ZSBhbiBp\nbnN0YW5jZSBieSBpbnZva2luZyB0aGUgcHV0IG1ldGhvZCAKICAgICAqIHdp\ndGggZWFjaCBhbGlhcyBhcyBrZXkgYW5kIGVsZW1lbnQgb2YgdGhlIGdpdmVu\nIGFycmF5IG9mIHZhbHVlcy4KICAgICAqIAogICAgICogVGhlIGluc3RhbmNl\nIGlzIGEgY3JlYXRlZCBieSB0aGUgbm8tYXJndW1lbnQgY29uc3RydWN0b3Ig\nb2YgdGhlIGRlY2xhcmluZyBjbGFzcyBvZiB0aGUgZ2l2ZW4gbWV0aG9kLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE1hcDxUPiBpbXBsZW1l\nbnRzIEZpbGxTdHJhdGVneTxUPiB7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBN\nZXRob2QgcHV0TWV0aG9kOwogICAgICAgIAogICAgICAgIHB1YmxpYyBNYXAo\nTWV0aG9kIHB1dCkgewogICAgICAgICAgICBpZiAocHV0ID09IG51bGwgfHwg\ncHV0LmdldFBhcmFtZXRlclR5cGVzKCkubGVuZ3RoICE9IDIpCiAgICAgICAg\nICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKF9s\nb2MuZ2V0KCJmaWxsLWJhZC1wdXQiLCBwdXQpLmdldE1lc3NhZ2UoKSk7CiAg\nICAgICAgICAgIHB1dE1ldGhvZCA9IHB1dDsKICAgICAgICB9CiAgICAgICAg\nCiAgICAgICAgcHVibGljIFQgZmlsbChPYmplY3RbXSB2YWx1ZXMsIENsYXNz\nPD8+W10gdHlwZXMsIFN0cmluZ1tdIGFsaWFzZXMpIHsKICAgICAgICAgICAg\naW50IGkgPSAwOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nT2JqZWN0IG1hcCA9IHB1dE1ldGhvZC5nZXREZWNsYXJpbmdDbGFzcygpLm5l\nd0luc3RhbmNlKCk7CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwg\ndmFsdWVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgIHB1dE1l\ndGhvZC5pbnZva2UobWFwLCBhbGlhc2VzW2ldLCB2YWx1ZXNbaV0pOwogICAg\nICAgICAgICAgICAgcmV0dXJuIChUKW1hcDsKICAgICAgICAgICAgfSBjYXRj\naCAoSW52b2NhdGlvblRhcmdldEV4Y2VwdGlvbiB0KSB7CiAgICAgICAgICAg\nICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihfbG9jLmdldCgiZmls\nbC1tYXAtZXJyb3IiLCBwdXRNZXRob2QsIGFsaWFzZXNbaV0sIHZhbHVlc1tp\nXSkuZ2V0TWVzc2FnZSgpLCAKICAgICAgICAgICAgICAgICAgICB0LmdldFRh\ncmdldEV4Y2VwdGlvbigpKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhj\nZXB0aW9uKF9sb2MuZ2V0KCJmaWxsLW1hcC1lcnJvciIsIHB1dE1ldGhvZCwg\nYWxpYXNlc1tpXSwgdmFsdWVzW2ldKS5nZXRNZXNzYWdlKCksIAogICAgICAg\nICAgICAgICAgICAgICAgICBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICAKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Qg\nYW5kIHBvcHVsYXRlIGFuIGluc3RhbmNlIGJ5IHRoZSBnaXZlbiBjb25zdHJ1\nY3RvciBhbmQgYXJndW1lbnRzLgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIGNsYXNzIE5ld0luc3RhbmNlPFQ+IGltcGxlbWVudHMgRmlsbFN0cmF0ZWd5\nPFQ+IHsKICAgICAgICBwcml2YXRlIENvbnN0cnVjdG9yPD8gZXh0ZW5kcyBU\nPiBjb25zOwogICAgICAgIHByaXZhdGUgQ2xhc3M8VD4gY2xzOwogICAgICAg\nIAogICAgICAgIHB1YmxpYyBOZXdJbnN0YW5jZShDb25zdHJ1Y3Rvcjw/IGV4\ndGVuZHMgVD4gY29ucykgewogICAgICAgICAgICB0aGlzLmNvbnMgPSBjb25z\nOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBwdWJsaWMgTmV3SW5zdGFu\nY2UoQ2xhc3M8VD4gY2xzKSB7CiAgICAgICAgICAgIHRoaXMuY2xzID0gY2xz\nOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAKICAgICAgICAvKioKICAg\nICAgICAgKiBGaW5kcyBhIGNvbnN0cnVjdG9yIG9mIHRoZSBnaXZlbiBjbGFz\ncyB3aXRoIGdpdmVuIGFyZ3VtZW50IHR5cGVzLgogICAgICAgICAqLwogICAg\nICAgIDxYPiBDb25zdHJ1Y3RvcjxYPiBmaW5kQ29uc3RydWN0b3IoQ2xhc3M8\nWD4gY2xzLCBDbGFzczw/PltdIHR5cGVzKSB7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICByZXR1cm4gY2xzLmdldENvbnN0cnVjdG9yKHR5\ncGVzKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKF9sb2Mu\nZ2V0KCJmaWxsLWN0b3Itbm9uZSIsIGNscywgQXJyYXlzLnRvU3RyaW5nKHR5\ncGVzKSkuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICAKICAgICAgICBwdWJsaWMgVCBmaWxsKE9iamVjdFtdIHZhbHVl\ncywgQ2xhc3M8Pz5bXSB0eXBlcywgU3RyaW5nW10gYWxpYXNlcykgewogICAg\nICAgICAgICBpZiAoY29ucyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBj\nb25zID0gZmluZENvbnN0cnVjdG9yKGNscywgdHlwZXMpOwogICAgICAgICAg\nICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICAgICAgICAgIHZhbHVlc1tpXSA9IEZpbHRlcnMuY29udmVydCh2YWx1ZXNb\naV0sIHR5cGVzW2ldKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgIHJldHVybiBjb25zLm5ld0luc3RhbmNlKHZhbHVlcyk7CiAgICAgICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICB0\naHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihfbG9jLmdldCgiZmlsbC1jdG9y\nLWVycm9yIiwgY29ucywgQXJyYXlzLnRvU3RyaW5nKHZhbHVlcyksIAogICAg\nICAgICAgICAgICAgICAgICAgICBBcnJheXMudG9TdHJpbmcodHlwZXMpKS5n\nZXRNZXNzYWdlKCksIGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nICAgIAogICAgfQogICAgCiAgICAvKioKICAgICAqIENyZWF0ZSBhbmQgcG9w\ndWxhdGUgYSBiZWFuIGJ5IGludm9raW5nIHNldHRlciBtZXRob2RzIGlkZW50\naWZpZWQgYnkgYWxpYXMgbmFtZSB3aXRoIGVhY2ggYXJyYXkKICAgICAqIGVs\nZW1lbnQgdmFsdWUgYXMgYXJndW1lbnQuCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgY2xhc3MgQmVhbjxUPiBpbXBsZW1lbnRzIEZpbGxTdHJhdGVneTxU\nPiB7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBDbGFzczxUPiBjbHM7CiAgICAg\nICAgcHJpdmF0ZSBNZXRob2RbXSBzZXR0ZXJzOwogICAgICAgIAogICAgICAg\nIHB1YmxpYyBCZWFuKENsYXNzPFQ+IGNscykgewogICAgICAgICAgICB0aGlz\nLmNscyA9IGNsczsKICAgICAgICB9CiAgICAKICAgICAgICBwdWJsaWMgVCBm\naWxsKE9iamVjdFtdIHZhbHVlcywgQ2xhc3M8Pz5bXSB0eXBlcywgU3RyaW5n\nW10gYWxpYXNlcykgewogICAgICAgICAgICBpbnQgaSA9IDA7CiAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoc2V0dGVycyA9PSBudWxs\nKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0dGVycyA9IG5ldyBNZXRob2Rb\ndmFsdWVzLmxlbmd0aF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICBUIGJlYW4gPSBjbHMubmV3SW5zdGFuY2UoKTsKICAgICAgICAgICAg\nICAgIGZvciAoaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgICAgICAgICBpZiAoc2V0dGVyc1tpXSA9PSBudWxsKSB7CiAg\nICAgICAgICAgICAgICAgICAgICAgIHNldHRlcnNbaV0gPSBSZWZsZWN0aW9u\nLmZpbmRTZXR0ZXIoY2xzLCBhbGlhc2VzW2ldLCBmYWxzZSk7CiAgICAgICAg\nICAgICAgICAgICAgICAgIGlmIChzZXR0ZXJzW2ldID09IG51bGwpCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2Vw\ndGlvbihfbG9jLmdldCgiZmlsbC1iZWFuLXNldHRlciIsIGNscywgYWxpYXNl\nc1tpXSkuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgICAgICAgICAgc2V0dGVyc1tpXS5pbnZva2UoYmVhbiwgRmls\ndGVycy5jb252ZXJ0KHZhbHVlc1tpXSwgdHlwZXNbaV0pKTsKICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBiZWFuOwogICAgICAg\nICAgICB9IGNhdGNoIChJbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uIHQpIHsK\nICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKF9s\nb2MuZ2V0KCJmaWxsLWJlYW4tZXJyb3IiLCBzZXR0ZXJzW2ldLCB2YWx1ZXNb\naV0sIHR5cGVzW2ldKS5nZXRNZXNzYWdlKCksIAogICAgICAgICAgICAgICAg\nICAgICAgICB0LmdldFRhcmdldEV4Y2VwdGlvbigpKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIHRocm93\nIG5ldyBSdW50aW1lRXhjZXB0aW9uKF9sb2MuZ2V0KCJmaWxsLWJlYW4tZXJy\nb3IiLCBzZXR0ZXJzW2ldLCB2YWx1ZXNbaV0sIHR5cGVzW2ldKS5nZXRNZXNz\nYWdlKCksIAogICAgICAgICAgICAgICAgICAgICAgICBlKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgCiAgICAvKioKICAgICAq\nIFBvcHVsYXRlIGFuIGluc3RhbmNlIGJ5IHNpbXBseSBhc3NpZ25pbmcgdGhl\nIDAtdGggZWxlbWVudCBvZiB0aGUgaW5wdXQgdmFsdWVzLiAgCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXNzaWduPFQ+IGltcGxlbWVudHMg\nRmlsbFN0cmF0ZWd5PFQ+IHsKICAgICAgICBwdWJsaWMgVCBmaWxsKE9iamVj\ndFtdIHZhbHVlcywgQ2xhc3M8Pz5bXSB0eXBlcywgU3RyaW5nW10gYWxpYXNl\ncykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJu\nIChUKXZhbHVlc1swXTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0\naW9uKF9sb2MuZ2V0KCJmaWxsLWFzc2lnbi1lcnJvciIsIEFycmF5cy50b1N0\ncmluZyh2YWx1ZXMpLAogICAgICAgICAgICAgICAgICAgICAgICBBcnJheXMu\ndG9TdHJpbmcodHlwZXMpKS5nZXRNZXNzYWdlKCksIGUpOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgfQogICAgCiAgICAvKioKICAgICAqIFBvcHVs\nYXRlIGFuIGluc3RhbmNlIGNyZWF0ZWQgYnkgZ2l2ZW4gZmFjdG9yeSB1c2lu\nZyBhIGdpdmVuIHB1dChrZXksdmFsdWUpIG1ldGhvZC4KICAgICAqIElmIHRo\nZSBmaXJzdCBhcmd1bWVudCBvZiB0aGUgZ2l2ZW4gcHV0IG1ldGhvZCBpcyBp\nbnRlZ2VyIHRoZW4gZmlsbCB0aGUgdmFsdWVzCiAgICAgKiBieSBpbmRleCBl\nbHNlIGZpbGwgdGhlIHZhbHVlcyB3aXRoIGFsaWFzIGtleS4gIAogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEZhY3Rvcnk8VD4gaW1wbGVtZW50\ncyBGaWxsU3RyYXRlZ3k8VD4gewogICAgICAgIGZpbmFsIE9iamVjdEZhY3Rv\ncnk8VD4gZmFjdG9yeTsKICAgICAgICBmaW5hbCBNZXRob2QgcHV0TWV0aG9k\nOwogICAgICAgIGZpbmFsIGJvb2xlYW4gaXNBcnJheTsKICAgICAgICAKICAg\nICAgICBwdWJsaWMgRmFjdG9yeShPYmplY3RGYWN0b3J5PFQ+IGZhY3Rvcnks\nIE1ldGhvZCBwdXQpIHsKICAgICAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFj\ndG9yeTsKICAgICAgICAgICAgdGhpcy5wdXRNZXRob2QgPSBwdXQ7CiAgICAg\nICAgICAgIGlmIChwdXQgPT0gbnVsbCB8fCBwdXQuZ2V0UGFyYW1ldGVyVHlw\nZXMoKS5sZW5ndGggIT0gMikKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oX2xvYy5nZXQoImZpbGwtZmFjdG9y\neS1iYWQtcHV0IiwgcHV0KS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICBD\nbGFzczw/PiBrZXlUeXBlID0gcHV0TWV0aG9kLmdldFBhcmFtZXRlclR5cGVz\nKClbMF07CiAgICAgICAgICAgIHRoaXMuaXNBcnJheSA9IGtleVR5cGUgPT0g\naW50LmNsYXNzIHx8IGtleVR5cGUgPT0gSW50ZWdlci5jbGFzczsKICAgICAg\nICB9CiAgICAgICAgCiAgICAgICAgcHVibGljIFQgZmlsbChPYmplY3RbXSB2\nYWx1ZXMsIENsYXNzPD8+W10gdHlwZXMsIFN0cmluZ1tdIGFsaWFzZXMpIHsK\nICAgICAgICAgICAgaW50IGkgPSAwOwogICAgICAgICAgICBPYmplY3Qga2V5\nID0gbnVsbDsKICAgICAgICAgICAgVCByZXN1bHQgPSBmYWN0b3J5Lm5ld0lu\nc3RhbmNlKCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBm\nb3IgKGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgICAgICAgICAga2V5ID0gaXNBcnJheSA/IGkgOiBhbGlhc2VzW2ldOwog\nICAgICAgICAgICAgICAgICAgIHB1dE1ldGhvZC5pbnZva2UocmVzdWx0LCBr\nZXksIEZpbHRlcnMuY29udmVydCh2YWx1ZXNbaV0sIHR5cGVzW2ldKSk7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0\nOwogICAgICAgICAgICB9IGNhdGNoIChJbnZvY2F0aW9uVGFyZ2V0RXhjZXB0\naW9uIHQpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhj\nZXB0aW9uKF9sb2MuZ2V0KCJmaWxsLWZhY3RvcnktZXJyb3IiLCBuZXcgT2Jq\nZWN0W117cHV0TWV0aG9kLCBrZXksIHZhbHVlc1tpXSwgCiAgICAgICAgICAg\nICAgICAgICAgICAgIHR5cGVzW2ldfSkuZ2V0TWVzc2FnZSgpLCB0LmdldFRh\ncmdldEV4Y2VwdGlvbigpKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhj\nZXB0aW9uKF9sb2MuZ2V0KCJmaWxsLWZhY3RvcnktZXJyb3IiLCBuZXcgT2Jq\nZWN0W117cHV0TWV0aG9kLCBrZXksIHZhbHVlc1tpXSwgCiAgICAgICAgICAg\nICAgICAgICAgICAgIHR5cGVzW2ldfSkuZ2V0TWVzc2FnZSgpLCBlKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

