{"sha":"69ec96667ff57de7bf2faf610d148ea0cef05d64","node_id":"MDQ6QmxvYjIwNjM2NDo2OWVjOTY2NjdmZjU3ZGU3YmYyZmFmNjEwZDE0OGVhMGNlZjA1ZDY0","size":6581,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/69ec96667ff57de7bf2faf610d148ea0cef05d64","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHM7CgppbXBv\ncnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLkxpbmtl\nZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdEl0ZXJhdG9yOwoKaW1wb3J0\nIG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLk9iamVjdFV0aWxzOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLkZpbHRlcnM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlQ29udGV4dDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFEYXRhOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuWE1MTWV0YURhdGE7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbXBsSGVscGVyOwoKLyoq\nCiAqIEEgcGF0aCByZXByZXNlbnRzIGEgdHJhdmVyc2FsIGludG8gZmllbGRz\nIG9mIGEgY2FuZGlkYXRlIG9iamVjdC4KICoKICogQGF1dGhvciBBYmUgV2hp\ndGUKICovCnB1YmxpYyBjbGFzcyBDYW5kaWRhdGVQYXRoCiAgICBleHRlbmRz\nIFZhbAogICAgaW1wbGVtZW50cyBQYXRoIHsKCiAgICBwcm90ZWN0ZWQgTGlu\na2VkTGlzdCBfYWN0aW9ucyA9IG51bGw7CiAgICBwcm90ZWN0ZWQgU3RyaW5n\nIF9jb3JyZWxhdGlvblZhciA9IG51bGw7CgogICAgLyoqCiAgICAgKiBUcmF2\nZXJzZSBpbnRvIHRoZSBnaXZlbiBmaWVsZCBvZiB0aGUgY3VycmVudCBvYmpl\nY3QsIGFuZCB1cGRhdGUKICAgICAqIHRoZSBjdXJyZW50IG9iamVjdCB0byB0\naGF0IGZpZWxkIHZhbHVlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBnZXQo\nRmllbGRNZXRhRGF0YSBmaWVsZCwgYm9vbGVhbiBudWxsVHJhdmVyc2FsKSB7\nCiAgICAgICAgaWYgKF9hY3Rpb25zID09IG51bGwpCiAgICAgICAgICAgIF9h\nY3Rpb25zID0gbmV3IExpbmtlZExpc3QoKTsKICAgICAgICBfYWN0aW9ucy5h\nZGQobmV3IFRyYXZlcnNhbChmaWVsZCwgbnVsbFRyYXZlcnNhbCkpOwogICAg\nfQoKICAgIHB1YmxpYyBDbGFzcyBnZXRUeXBlKCkgewogICAgICAgIGlmIChf\nYWN0aW9ucyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gZ2V0Q2FuZGlk\nYXRlVHlwZSgpOwoKICAgICAgICBPYmplY3QgbGFzdCA9IF9hY3Rpb25zLmdl\ndExhc3QoKTsKICAgICAgICBpZiAobGFzdCBpbnN0YW5jZW9mIENsYXNzKQog\nICAgICAgICAgICByZXR1cm4gKENsYXNzKSBsYXN0OwogICAgICAgIEZpZWxk\nTWV0YURhdGEgZm1kID0gKChUcmF2ZXJzYWwpIGxhc3QpLmZpZWxkOwogICAg\nICAgIHJldHVybiBmbWQuZ2V0RGVjbGFyZWRUeXBlKCk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIENsYXNzIGdldENhbmRpZGF0ZVR5cGUoKSB7CiAgICAgICAg\nQ2xhc3NNZXRhRGF0YSBtZXRhID0gZ2V0TWV0YURhdGEoKTsKICAgICAgICBp\nZiAobWV0YSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmNs\nYXNzOwogICAgICAgIHJldHVybiBtZXRhLmdldERlc2NyaWJlZFR5cGUoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJbXBsaWNpdFR5cGUoQ2xhc3Mg\ndHlwZSkgewogICAgfQoKICAgIHB1YmxpYyBGaWVsZE1ldGFEYXRhIGxhc3Qo\nKSB7CiAgICAgICAgaWYgKF9hY3Rpb25zID09IG51bGwpCiAgICAgICAgICAg\nIHJldHVybiBudWxsOwoKICAgICAgICBMaXN0SXRlcmF0b3IgaXRyID0gX2Fj\ndGlvbnMubGlzdEl0ZXJhdG9yKF9hY3Rpb25zLnNpemUoKSk7CiAgICAgICAg\nT2JqZWN0IHByZXY7CiAgICAgICAgd2hpbGUgKGl0ci5oYXNQcmV2aW91cygp\nKSB7CiAgICAgICAgICAgIHByZXYgPSBpdHIucHJldmlvdXMoKTsKICAgICAg\nICAgICAgaWYgKHByZXYgaW5zdGFuY2VvZiBUcmF2ZXJzYWwpCiAgICAgICAg\nICAgICAgICByZXR1cm4gKChUcmF2ZXJzYWwpIHByZXYpLmZpZWxkOwogICAg\nICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAg\nICAqIENhc3QgdGhpcyBwYXRoIHRvIHRoZSBnaXZlbiB0eXBlLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBjYXN0VG8oQ2xhc3MgdHlwZSkgewogICAgICAg\nIGlmIChfYWN0aW9ucyA9PSBudWxsKQogICAgICAgICAgICBfYWN0aW9ucyA9\nIG5ldyBMaW5rZWRMaXN0KCk7CiAgICAgICAgX2FjdGlvbnMuYWRkKHR5cGUp\nOwogICAgfQoKICAgIHByb3RlY3RlZCBPYmplY3QgZXZhbChPYmplY3QgY2Fu\nZGlkYXRlLCBPYmplY3Qgb3JpZywKICAgICAgICBTdG9yZUNvbnRleHQgY3R4\nLCBPYmplY3RbXSBwYXJhbXMpIHsKICAgICAgICBpZiAoX2FjdGlvbnMgPT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKCiAgICAgICAg\nT2JqZWN0IGFjdGlvbjsKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNt\nOwogICAgICAgIEJyb2tlciB0bXBCcm9rZXIgPSBudWxsOwogICAgICAgIGZv\nciAoSXRlcmF0b3IgaXRyID0gX2FjdGlvbnMuaXRlcmF0b3IoKTsgaXRyLmhh\nc05leHQoKTspIHsKICAgICAgICAgICAgYWN0aW9uID0gaXRyLm5leHQoKTsK\nCiAgICAgICAgICAgIC8vIGZhaWwgb24gbnVsbCB2YWx1ZQogICAgICAgICAg\nICBpZiAoY2FuZGlkYXRlID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGlm\nIChhY3Rpb24gaW5zdGFuY2VvZiBUcmF2ZXJzYWwKICAgICAgICAgICAgICAg\nICAgICAmJiAoKFRyYXZlcnNhbCkgYWN0aW9uKS5udWxsVHJhdmVyc2FsKQog\nICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAg\nICAgdGhyb3cgbmV3IE51bGxQb2ludGVyRXhjZXB0aW9uKCk7CiAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgIC8vIGNoZWNrIHRoYXQgdGhlIGNhc3QgaXMg\ndmFsaWQKICAgICAgICAgICAgaWYgKGFjdGlvbiBpbnN0YW5jZW9mIENsYXNz\nKSB7CiAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSBGaWx0ZXJzLmNvbnZl\ncnQoY2FuZGlkYXRlLCAoQ2xhc3MpIGFjdGlvbik7CiAgICAgICAgICAgICAg\nICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gbWFr\nZSBzdXJlIHdlIGNhbiBhY2Nlc3MgdGhlIGluc3RhbmNlOyBldmVuIG5vbi1w\nYyB2YWxzIG1pZ2h0CiAgICAgICAgICAgIC8vIGJlIHByb3h5YWJsZQogICAg\nICAgICAgICBzbSA9IG51bGw7CiAgICAgICAgICAgIHRtcEJyb2tlciA9IG51\nbGw7CiAgICAgICAgICAgIGlmIChJbXBsSGVscGVyLmlzTWFuYWdlYWJsZShj\nYW5kaWRhdGUpKQogICAgICAgICAgICAgICAgc20gPSAoT3BlbkpQQVN0YXRl\nTWFuYWdlcikgKEltcGxIZWxwZXIudG9QZXJzaXN0ZW5jZUNhcGFibGUoCiAg\nICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLCBjdHguZ2V0Q29uZmlndXJh\ndGlvbigpKSkuCiAgICAgICAgICAgICAgICAgICAgcGNHZXRTdGF0ZU1hbmFn\nZXIoKTsKICAgICAgICAgICAgaWYgKHNtID09IG51bGwpIHsKICAgICAgICAg\nICAgICAgIHRtcEJyb2tlciA9IGN0eC5nZXRCcm9rZXIoKTsKICAgICAgICAg\nICAgICAgIHRtcEJyb2tlci50cmFuc2FjdGlvbmFsKGNhbmRpZGF0ZSwgZmFs\nc2UsIG51bGwpOwogICAgICAgICAgICAgICAgc20gPSB0bXBCcm9rZXIuZ2V0\nU3RhdGVNYW5hZ2VyKGNhbmRpZGF0ZSk7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIHNwZWNp\nZmllZCBmaWVsZCB2YWx1ZSBhbmQgc3dpdGNoIGNhbmRpZGF0ZQogICAgICAg\nICAgICAgICAgVHJhdmVyc2FsIHRyYXZlcnNhbCA9IChUcmF2ZXJzYWwpIGFj\ndGlvbjsKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZSA9IHNtLmZldGNoRmll\nbGQodHJhdmVyc2FsLmZpZWxkLmdldEluZGV4KCksIHRydWUpOwogICAgICAg\nICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgLy8gdHJhbnNhY3Rp\nb25hbCBkb2VzIG5vdCBjbGVhciB0aGUgc3RhdGUsIHdoaWNoIGlzCiAgICAg\nICAgICAgICAgICAvLyBpbXBvcnRhbnQgc2luY2UgdG1wQ2FuZGlkYXRlIG1p\nZ2h0IGJlIGFsc28gbWFuYWdlZCBieQogICAgICAgICAgICAgICAgLy8gYW5v\ndGhlciBicm9rZXIgaWYgaXQncyBhIHByb3hpZWQgbm9uLXBjIGluc3RhbmNl\nCiAgICAgICAgICAgICAgICBpZiAodG1wQnJva2VyICE9IG51bGwpCiAgICAg\nICAgICAgICAgICAgICAgdG1wQnJva2VyLm5vbnRyYW5zYWN0aW9uYWwoc20u\nZ2V0TWFuYWdlZEluc3RhbmNlKCksIG51bGwpOwogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgICAgIHJldHVybiBjYW5kaWRhdGU7CiAgICB9CgogICAg\ncHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1cm4gKF9hY3Rp\nb25zID09IG51bGwpID8gMCA6IF9hY3Rpb25zLmhhc2hDb2RlKCk7CiAgICB9\nCgogICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewog\nICAgICAgIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIENhbmRpZGF0\nZVBhdGgpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0\ndXJuIE9iamVjdFV0aWxzLmVxdWFscyhfYWN0aW9ucywgKChDYW5kaWRhdGVQ\nYXRoKSBvdGhlcikuX2FjdGlvbnMpOwogICAgfQoKICAgIC8qKgogICAgICog\nUmVwcmVzZW50cyBhIHRyYXZlcnNhbCB0aHJvdWdoIGEgZmllbGQuCiAgICAg\nKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIFRyYXZlcnNhbCB7CgogICAg\nICAgIHB1YmxpYyBmaW5hbCBGaWVsZE1ldGFEYXRhIGZpZWxkOwogICAgICAg\nIHB1YmxpYyBmaW5hbCBib29sZWFuIG51bGxUcmF2ZXJzYWw7CgogICAgICAg\nIHByaXZhdGUgVHJhdmVyc2FsKEZpZWxkTWV0YURhdGEgZmllbGQsIGJvb2xl\nYW4gbnVsbFRyYXZlcnNhbCkgewogICAgICAgICAgICB0aGlzLmZpZWxkID0g\nZmllbGQ7CiAgICAgICAgICAgIHRoaXMubnVsbFRyYXZlcnNhbCA9IG51bGxU\ncmF2ZXJzYWw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgaW50IGhhc2hD\nb2RlKCkgewogICAgICAgICAgICByZXR1cm4gZmllbGQuaGFzaENvZGUoKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGVxdWFscyhPYmpl\nY3Qgb3RoZXIpIHsKICAgICAgICAgICAgaWYgKG90aGVyID09IHRoaXMpCiAg\nICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgcmV0dXJu\nICgoVHJhdmVyc2FsKSBvdGhlcikuZmllbGQuZXF1YWxzKGZpZWxkKTsKICAg\nICAgICB9Cgl9CgogICAgcHVibGljIHZvaWQgZ2V0KEZpZWxkTWV0YURhdGEg\nZm1kLCBYTUxNZXRhRGF0YSBtZXRhKSB7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIGdldChYTUxNZXRhRGF0YSBtZXRhLCBTdHJpbmcgbmFtZSkgewog\nICAgfQogICAgCiAgICBwdWJsaWMgWE1MTWV0YURhdGEgZ2V0WG1sTWFwcGlu\nZygpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRTY2hlbWFBbGlhcyhTdHJpbmcgc2NoZW1hQWxpYXMpIHsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFNjaGVtYUFsaWFzKCkgewogICAg\nICAgIHJldHVybiBudWxsOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBz\nZXRTdWJxdWVyeUNvbnRleHQoQ29udGV4dCBjb25leHQsIFN0cmluZyBjb3Jy\nZWxhdGlvblZhcikgewogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q29y\ncmVsYXRpb25WYXIoKSB7CiAgICAgICAgcmV0dXJuIF9jb3JyZWxhdGlvblZh\ncjsKICAgIH0KfQo=\n","encoding":"base64"}

