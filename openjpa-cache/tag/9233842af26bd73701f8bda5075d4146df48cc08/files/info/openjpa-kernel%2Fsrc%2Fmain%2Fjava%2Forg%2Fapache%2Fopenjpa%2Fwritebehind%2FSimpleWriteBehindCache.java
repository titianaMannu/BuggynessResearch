{"sha":"8923a0890647c6c7cb317f41ad851403fcf630e7","node_id":"MDQ6QmxvYjIwNjM2NDo4OTIzYTA4OTA2NDdjNmM3Y2IzMTdmNDFhZDg1MTQwM2ZjZjYzMGU3","size":3887,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8923a0890647c6c7cb317f41ad851403fcf630e7","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEud3JpdGViZWhpbmQ7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xs\nZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZh\nLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmVuaGFuY2UuUGVyc2lzdGVuY2VDYXBhYmxlOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVN\nYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdGF0\nZU1hbmFnZXJJbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nQ2xhc3NNZXRhRGF0YTsKCnB1YmxpYyBjbGFzcyBTaW1wbGVXcml0ZUJlaGlu\nZENhY2hlIGV4dGVuZHMgQWJzdHJhY3RXcml0ZUJlaGluZENhY2hlIHsKCiAg\nICBwcml2YXRlIE1hcDxXcml0ZUJlaGluZENhY2hlS2V5LCBPcGVuSlBBU3Rh\ndGVNYW5hZ2VyPiBfY2FjaGUgPSAKICAgICAgICBuZXcgSGFzaE1hcDxXcml0\nZUJlaGluZENhY2hlS2V5LCBPcGVuSlBBU3RhdGVNYW5hZ2VyPigpOwoKICAg\nIHB1YmxpYyBMaXN0PEV4Y2VwdGlvbj4gYWRkKENvbGxlY3Rpb248T3BlbkpQ\nQVN0YXRlTWFuYWdlcj4gc21zKSB7CiAgICAgICAgTGlzdDxFeGNlcHRpb24+\nIGV4Y2VwdGlvbnMgPSBuZXcgQXJyYXlMaXN0PEV4Y2VwdGlvbj4oKTsKICAg\nICAgICBmb3IgKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20gOiBzbXMpIHsKICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGFkZChzbSk7CiAgICAg\nICAgICAgIH0gY2F0Y2ggKFdyaXRlQmVoaW5kRXhjZXB0aW9uIHdiZSkgewog\nICAgICAgICAgICAgICAgZXhjZXB0aW9ucy5hZGQod2JlKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZXhjZXB0aW9uczsKICAg\nIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBhZGQoT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSkgewogICAgICAgIFdyaXRlQmVoaW5kQ2FjaGVLZXkga2V5ID0gZ2V0\nS2V5KHNtKTsKICAgICAgICBzeW5jaHJvbml6ZWQgKF9jYWNoZSkgewogICAg\nICAgICAgICBpZiAoX2NhY2hlLmNvbnRhaW5zS2V5KGtleSkgJiYgX2NhY2hl\nLmdldChrZXkpICE9IHNtKSB7CiAgICAgICAgICAgICAgICBfY2FjaGUucHV0\nKGtleSwgbWVyZ2UoX2NhY2hlLmdldChrZXkpLCBzbSkpOwogICAgICAgICAg\nICB9IGVsc2UgeyAKICAgICAgICAgICAgICAgIF9jYWNoZS5wdXQoa2V5LCBz\nbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgfQoKICAgIHB1Ymxp\nYyBib29sZWFuIGNvbnRhaW5zKE9iamVjdCBvKSB7CiAgICAgICAgYm9vbGVh\nbiBydmFsID0gZmFsc2U7CiAgICAgICAgU3RhdGVNYW5hZ2VySW1wbCBzbSA9\nIGdldFN0YXRlTWFuYWdlcihvKTsKICAgICAgICBpZihzbSAhPSBudWxsKSB7\nCiAgICAgICAgICAgIHJ2YWwgPSAgX2NhY2hlLmNvbnRhaW5zS2V5KGdldEtl\neShzbSkpOyAgICAKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJ2YWw7CiAg\nICB9CgogICAgcHVibGljIFdyaXRlQmVoaW5kQ2FjaGVLZXkgZ2V0S2V5KE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAgICBDbGFzc01ldGFEYXRh\nIG1kID0gc20uZ2V0TWV0YURhdGEoKTsKICAgICAgICBDbGFzczw/PiBjbHMg\nPSBtZC5nZXREZXNjcmliZWRUeXBlKCk7CiAgICAgICAgU3RyaW5nIGNsYXNz\nTmFtZSA9IGNscy5nZXRDYW5vbmljYWxOYW1lKCk7CiAgICAgICAgT2JqZWN0\nIGlkID0gc20uZ2V0SWQoKTsKICAgICAgICAKICAgICAgICBTaW1wbGVXcml0\nZUJlaGluZENhY2hlS2V5IGtleSA9IG5ldyBTaW1wbGVXcml0ZUJlaGluZENh\nY2hlS2V5KGNsYXNzTmFtZSwgaWQpOwogICAgICAgIHJldHVybiBrZXk7CiAg\nICB9CgogICAgcHVibGljIGludCBnZXRTaXplKCkgewogICAgICAgIHJldHVy\nbiBfY2FjaGUuc2l6ZSgpOwogICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9u\nPE9wZW5KUEFTdGF0ZU1hbmFnZXI+IGdldFN0YXRlTWFuYWdlcnMoKSB7CiAg\nICAgICAgcmV0dXJuIG5ldyBBcnJheUxpc3Q8T3BlbkpQQVN0YXRlTWFuYWdl\ncj4oX2NhY2hlLnZhbHVlcygpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBp\nbml0aWFsaXplKFdyaXRlQmVoaW5kQ2FjaGVNYW5hZ2VyIG1hbmFnZXIpIHsK\nICAgICAgICAvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIG1ldGhvZCBzdHViCiAg\nICB9CgogICAgcHJvdGVjdGVkIFN0YXRlTWFuYWdlckltcGwgZ2V0U3RhdGVN\nYW5hZ2VyKE9iamVjdCBvKSB7CiAgICAgICAgU3RhdGVNYW5hZ2VySW1wbCBy\ndmFsID0gbnVsbDsKICAgICAgICBpZiAobyBpbnN0YW5jZW9mIFN0YXRlTWFu\nYWdlckltcGwpIHsKICAgICAgICAgICAgcnZhbCA9IChTdGF0ZU1hbmFnZXJJ\nbXBsKSBvOwogICAgICAgIH0gZWxzZSBpZiAobyBpbnN0YW5jZW9mIFBlcnNp\nc3RlbmNlQ2FwYWJsZSkgewogICAgICAgICAgICBydmFsID0gKFN0YXRlTWFu\nYWdlckltcGwpICgoUGVyc2lzdGVuY2VDYXBhYmxlKSBvKS5wY0dldFN0YXRl\nTWFuYWdlcigpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcnZhbDsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBjbGVhcigpIHsKICAgICAgICBzeW5jaHJv\nbml6ZWQoX2NhY2hlKSB7IAogICAgICAgICAgICBfY2FjaGUuY2xlYXIoKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNFbXB0eSgp\nIHsKICAgICAgICByZXR1cm4gX2NhY2hlLmlzRW1wdHkoKTsKICAgIH0KICAg\nIAogICAgLy8gTWlnaHQgYmUgYmV0dGVyIGluIHNtSW1wbC4gCiAgICBwcm90\nZWN0ZWQgT3BlbkpQQVN0YXRlTWFuYWdlciBtZXJnZShPcGVuSlBBU3RhdGVN\nYW5hZ2VyIGZyb20sIE9wZW5KUEFTdGF0ZU1hbmFnZXIgaW50bykgewogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW50by5nZXRNZXRhRGF0YSgpLmdl\ndEZpZWxkcygpLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChmcm9t\nLmdldERpcnR5KCkuZ2V0KGkpKSB7CiAgICAgICAgICAgICAgICBpbnRvLmRp\ncnR5KGkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiBpbnRvOwogICAgfQoKfQo=\n","encoding":"base64"}

