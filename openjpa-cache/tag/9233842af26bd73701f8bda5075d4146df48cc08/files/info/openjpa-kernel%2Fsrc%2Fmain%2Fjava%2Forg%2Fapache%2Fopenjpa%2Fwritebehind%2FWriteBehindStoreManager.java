{"sha":"96a7c8216e4dc135b705f3b717cb8a29a972c5dd","node_id":"MDQ6QmxvYjIwNjM2NDo5NmE3YzgyMTZlNGRjMTM1YjcwNWYzYjcxN2NiOGEyOWE5NzJjNWRk","size":4679,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/96a7c8216e4dc135b705f3b717cb8a29a972c5dd","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEud3JpdGViZWhpbmQ7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xs\nZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZEhhc2hTZXQ7CmltcG9y\ndCBqYXZhLnV0aWwuU2V0OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuRGVsZWdhdGluZ1N0b3JlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUENTdGF0ZTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RhdGVNYW5hZ2VySW1wbDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RvcmVNYW5hZ2VyOwoK\ncHVibGljIGNsYXNzIFdyaXRlQmVoaW5kU3RvcmVNYW5hZ2VyIGV4dGVuZHMg\nRGVsZWdhdGluZ1N0b3JlTWFuYWdlciB7CgogICAgcHJvdGVjdGVkIFNldDxD\nbGFzczw/Pj4gaW5jbHVkZWRUeXBlczsKICAgIHByb3RlY3RlZCBTZXQ8Q2xh\nc3M8Pz4+IGV4Y2x1ZGVkVHlwZXM7CiAgICAKICAgIHByb3RlY3RlZCBib29s\nZWFuIF9jYWNoZUluc2VydHMgPSB0cnVlOwogICAgcHJvdGVjdGVkIGJvb2xl\nYW4gX2NhY2hlVXBkYXRlcyA9IHRydWU7CiAgICBwcm90ZWN0ZWQgYm9vbGVh\nbiBfY2FjaGVEZWxldGVzID0gdHJ1ZTsKICAgIAogICAgcHVibGljIHN0YXRp\nYyBmaW5hbCBpbnQgT1BfSU5TRVJUID0gMTsKICAgIHB1YmxpYyBzdGF0aWMg\nZmluYWwgaW50IE9QX0RFTEVURSA9IDI7CiAgICBwdWJsaWMgc3RhdGljIGZp\nbmFsIGludCBPUF9VUERBVEUgPSAzOyAKCiAgICBXcml0ZUJlaGluZENhY2hl\nIF9jYWNoZTsKICAgIENvbGxlY3Rpb248T3BlbkpQQVN0YXRlTWFuYWdlcj4g\naW5GbGlnaHRTTXMgPSBuZXcgQXJyYXlMaXN0PE9wZW5KUEFTdGF0ZU1hbmFn\nZXI+KCk7CgogICAgcHVibGljIFdyaXRlQmVoaW5kU3RvcmVNYW5hZ2VyKFN0\nb3JlTWFuYWdlciBzdG9yZSkgewogICAgICAgIHRoaXMoc3RvcmUsIG51bGwp\nOwogICAgfQoKICAgIHB1YmxpYyBXcml0ZUJlaGluZFN0b3JlTWFuYWdlcihT\ndG9yZU1hbmFnZXIgc3RvcmUsIAogICAgICAgIFdyaXRlQmVoaW5kQ2FjaGUg\nd2JDYWNoZSkgewogICAgICAgIHN1cGVyKHN0b3JlKTsKICAgICAgICBfY2Fj\naGUgPSB3YkNhY2hlOwogICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9uPEV4\nY2VwdGlvbj4gZmx1c2goQ29sbGVjdGlvbjxPcGVuSlBBU3RhdGVNYW5hZ2Vy\nPiBzbXMpIHsKICAgICAgICBMaW5rZWRIYXNoU2V0PE9wZW5KUEFTdGF0ZU1h\nbmFnZXI+IHBhc3NpbmdUaHJvdWdoID0gbnVsbDsKICAgICAgICBmb3IgKE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20gOiBzbXMpIHsKICAgICAgICAgICAgaWYg\nKGNhY2hlQWJsZShzbSkpIHsKICAgICAgICAgICAgICAgIFBDU3RhdGUgbmV3\nU3RhdGUgPSBzbS5nZXRQQ1N0YXRlKCk7CiAgICAgICAgICAgICAgICBpZiAo\nbmV3U3RhdGUgPT0gUENTdGF0ZS5QREVMRVRFREZMVVNIRUQpIHsgCiAgICAg\nICAgICAgICAgICAgICAgbmV3U3RhdGUgPSBQQ1N0YXRlLlBERUxFVEVEOyAv\nLyBlZmZlY3RpdmVseSByZXNldCB0aGUgZmx1c2gKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgIGluRmxpZ2h0U01zLmFkZChuZXcgU3RhdGVN\nYW5hZ2VySW1wbCgoU3RhdGVNYW5hZ2VySW1wbClzbSwgbmV3U3RhdGUpKTsK\nICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChwYXNz\naW5nVGhyb3VnaCA9PSBudWxsKSB7IAogICAgICAgICAgICAgICAgICAgIHBh\nc3NpbmdUaHJvdWdoID0gbmV3IExpbmtlZEhhc2hTZXQ8T3BlbkpQQVN0YXRl\nTWFuYWdlcj4oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIHBhc3NpbmdUaHJvdWdoLmFkZChzbSk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICAgICAgCiAgICAgICAgQ29sbGVjdGlvbjxFeGNlcHRpb24+IHJ2\nYWw7CiAgICAgICAgaWYgKHBhc3NpbmdUaHJvdWdoICE9IG51bGwpIHsgCiAg\nICAgICAgICAgIHJ2YWwgPSBnZXREZWxlZ2F0ZSgpLmZsdXNoKHBhc3NpbmdU\naHJvdWdoKTsKICAgICAgICB9IGVsc2UgeyAKICAgICAgICAgICAgcnZhbCA9\nIG5ldyBBcnJheUxpc3Q8RXhjZXB0aW9uPigpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gcnZhbDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjb21taXQo\nKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc3VwZXIuY29tbWl0KCk7\nCiAgICAgICAgICAgIF9jYWNoZS5hZGQoaW5GbGlnaHRTTXMpOwogICAgICAg\nIH0gZmluYWxseSB7CiAgICAgICAgICAgIGluRmxpZ2h0U01zLmNsZWFyKCk7\nCiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJvbGxiYWNrKCkg\newogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN1cGVyLnJvbGxiYWNrKCk7\nCiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaW5GbGlnaHRTTXMu\nY2xlYXIoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIENvbGxlY3Rp\nb248RXhjZXB0aW9uPiBmbHVzaEJlaGluZChDb2xsZWN0aW9uPE9wZW5KUEFT\ndGF0ZU1hbmFnZXI+IHNtcykgewogICAgICAgIHJldHVybiBzdXBlci5mbHVz\naChzbXMpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGNhY2hlQWJsZShP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtKSB7CiAgICAgICAgYm9vbGVhbiBydmFs\nID0gZmFsc2U7CiAgICAgICAgc3dpdGNoIChnZXRPcGVyYXRpb24oc20pKSB7\nCiAgICAgICAgY2FzZSBPUF9JTlNFUlQ6CiAgICAgICAgICAgIGlmIChfY2Fj\naGVJbnNlcnRzKSB7CiAgICAgICAgICAgICAgICBydmFsID0gdHJ1ZTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIE9Q\nX0RFTEVURToKICAgICAgICAgICAgaWYgKF9jYWNoZURlbGV0ZXMpIHsKICAg\nICAgICAgICAgICAgIHJ2YWwgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgT1BfVVBEQVRFOgogICAgICAg\nICAgICBpZiAoX2NhY2hlVXBkYXRlcykgewogICAgICAgICAgICAgICAgcnZh\nbCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBydmFsID0gZmFs\nc2U7IC8vIG5vdCBzdXJlIHdoYXQgdGhpcyBpcy4gRG9uJ3QgbWVzcyB3aXRo\nIGl0LgogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBUT0RPIENoZWNr\nIGluY2x1ZGVkVHlwZXMKICAgICAgICAvLyBMaWtlIHRoZSBEYXRhQ2FjaGUg\ndGhpcyBpbmZvcm1hdGlvbiBzaG91bGQgYmUgY29udGFpbmVkIGluIHRoZSAK\nICAgICAgICAvLyBNYXBwaW5nIHJlcG9zaXRvcnkKICAgICAgICAvLyBDaGVj\nayBhZnRlciBjaGVja2luZyBvcGVyYXRpb25zIHNpbmNlIHVubGlzdGVkIHR5\ncGVzIHdpbGwgcHJlLWVtcHQgCiAgICAgICAgLy8gb3BlcmF0aW9ucy4KCiAg\nICAgICAgcmV0dXJuIHJ2YWw7CiAgICB9CiAgICAKICAgIHByb3RlY3RlZCBp\nbnQgZ2V0T3BlcmF0aW9uKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAg\nICAgICBpbnQgcnZhbCA9IC0xOyAvLyBUT0RPIGRlZmluZSBtZQogICAgICAg\nIGlmIChzbS5pc0RpcnR5KCkpIHsKICAgICAgICAgICAgaWYgKHNtLmlzTmV3\nKCkpIHsKICAgICAgICAgICAgICAgIHJ2YWwgPSBPUF9JTlNFUlQ7CiAgICAg\nICAgICAgIH0gZWxzZSBpZiAoc20uaXNEZWxldGVkKCkpIHsKICAgICAgICAg\nICAgICAgIHJ2YWwgPSBPUF9ERUxFVEU7CiAgICAgICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgICAgICBydmFsID0gT1BfVVBEQVRFOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBydmFsOwogICAgfQoKfQo=\n","encoding":"base64"}

