{"sha":"ebba455131c8947e0278d92182c91ce63e367f8a","node_id":"MDQ6QmxvYjIwNjM2NDplYmJhNDU1MTMxYzg5NDdlMDI3OGQ5MjE4MmM5MWNlNjNlMzY3Zjhh","size":18379,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ebba455131c8947e0278d92182c91ce63e367f8a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\namF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7\nCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7CmltcG9ydCBqYXZhLnV0\naWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2\nYS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlBhcnNlRXhjZXB0aW9uOwoKLyoq\nCiAqIEEgY29uZmlndXJhdGlvbiB2YWx1ZS4KICoKICogQGF1dGhvciBNYXJj\nIFBydWQnaG9tbWVhdXgKICogQGF1dGhvciBQaW5ha2kgUG9kZGFyCiAqLwpw\ndWJsaWMgYWJzdHJhY3QgY2xhc3MgVmFsdWUgaW1wbGVtZW50cyBDbG9uZWFi\nbGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZ1tdIEVNUFRZ\nX0FMSUFTRVMgPSBuZXcgU3RyaW5nWzBdOwogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgTG9jYWxpemVyIHNfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2Uo\nVmFsdWUuY2xhc3MpOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nSU5WSVNJQkxFID0gIioqKioqKiI7CiAgICAKICAgIHByaXZhdGUgU3RyaW5n\nIHByb3AgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgbG9hZEtleSA9IG51\nbGw7CiAgICBwcml2YXRlIFN0cmluZyBkZWYgPSBudWxsOwogICAgcHJpdmF0\nZSBTdHJpbmdbXSBhbGlhc2VzID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5n\nIGdldHRlciA9IG51bGw7CiAgICBwcml2YXRlIExpc3Q8VmFsdWVMaXN0ZW5l\ncj4gbGlzdGVuZXJzID0gbnVsbDsKICAgIHByaXZhdGUgYm9vbGVhbiBhbGlh\nc0xpc3RDb21wcmVoZW5zaXZlID0gZmFsc2U7CiAgICBwcml2YXRlIENsYXNz\nIHNjb3BlID0gbnVsbDsKICAgIHByaXZhdGUgYm9vbGVhbiBpc0R5bmFtaWMg\nPSBmYWxzZTsKICAgIHByaXZhdGUgU3RyaW5nIG9yaWdpbmFsVmFsdWUgPSBu\ndWxsOwogICAgcHJpdmF0ZSBTZXQ8U3RyaW5nPiBvdGhlck5hbWVzID0gbnVs\nbDsKICAgIHByaXZhdGUgYm9vbGVhbiBfaGlkZGVuICA9IGZhbHNlOwogICAg\ncHJpdmF0ZSBib29sZWFuIF9wcml2YXRlID0gZmFsc2U7CiAgICAKICAgIC8q\nKgogICAgICogRGVmYXVsdCBjb25zdHJ1Y3Rvci4KICAgICAqLwogICAgcHVi\nbGljIFZhbHVlKCkgewogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0\nb3IuIFN1cHBseSB0aGUgcHJvcGVydHkgbmFtZS4KICAgICAqCiAgICAgKiBA\nc2VlICNzZXRQcm9wZXJ0eQogICAgICovCiAgICBwdWJsaWMgVmFsdWUoU3Ry\naW5nIHByb3ApIHsKICAgICAgICBzZXRQcm9wZXJ0eShwcm9wKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFRoZSBwcm9wZXJ0eSBuYW1lIHRoYXQgd2lsbCBi\nZSB1c2VkIHdoZW4gc2V0dGluZyBvcgogICAgICogZ2V0dGluZyB0aGlzIHZh\nbHVlIGluIGEge0BsaW5rIE1hcH0uCiAgICAgKi8KICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0UHJvcGVydHkoKSB7CiAgICAgICAgcmV0dXJuIHByb3A7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUaGUgcHJvcGVydHkgbmFtZSB0aGF0IHdpbGwg\nYmUgdXNlZCB3aGVuIHNldHRpbmcgb3IKICAgICAqIGdldHRpbmcgdGhpcyB2\nYWx1ZSBpbiBhIHtAbGluayBNYXB9LgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRQcm9wZXJ0eShTdHJpbmcgcHJvcCkgewogICAgICAgIHRoaXMucHJv\ncCA9IHByb3A7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQWRkcyBhIG1v\nbmlrZXIgdGhhdCBpcyBlcXVpdmFsZW50IHRvIHRoZSBvcmlnaW5hbCBwcm9w\nZXJ0eSBrZXkgdXNlZAogICAgICogZHVyaW5nIGNvbnN0cnVjdGlvbi4gCiAg\nICAgKiAKICAgICAqIEBzaW5jZSAyLjAuMAogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBhZGRFcXVpdmFsZW50S2V5KFN0cmluZyBvdGhlcikgewogICAgICAg\nIGlmIChvdGhlck5hbWVzID09IG51bGwpCiAgICAgICAgICAgIG90aGVyTmFt\nZXMgPSBuZXcgSGFzaFNldDxTdHJpbmc+KCk7CiAgICAgICAgb3RoZXJOYW1l\ncy5hZGQob3RoZXIpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEdldHMg\ndGhlIHVubW9kaWZpYWJsZSB2aWV3IG9mIHRoZSBlcXVpdmFsZW50IGtleXMg\nb3IgYW4gZW1wdHkgc2V0IGlmCiAgICAgKiBubyBlcXVpdmFsZW50IGtleSBo\nYXMgYmVlbiBhZGRlZC4gCiAgICAgKiAKICAgICAqIEBzaW5jZSAyLjAuMAog\nICAgICovCiAgICBwdWJsaWMgU2V0PFN0cmluZz4gZ2V0RXF1aXZhbGVudEtl\neXMoKSB7CiAgICAgICAgcmV0dXJuIG90aGVyTmFtZXMgPT0gbnVsbCA/IENv\nbGxlY3Rpb25zLkVNUFRZX1NFVCAKICAgICAgICAgICAgOiBDb2xsZWN0aW9u\ncy51bm1vZGlmaWFibGVTZXQob3RoZXJOYW1lcyk7CiAgICB9CiAgICAKICAg\nIC8qKgogICAgICogR2V0cyB1bm1vZGlmaWFibGUgdmlldyBvZiBhbGwgdGhl\nIHByb3BlcnR5IGtleXMgc2V0IG9uIHRoaXMgcmVjZWl2ZXIuICAKICAgICAq\nIFRoZSAwLXRoIGVsZW1lbnQgaW4gdGhlIHJldHVybmVkIGxpc3QgaXMgYWx3\nYXlzIHRoZSBzYW1lIGFzIHRoZSBvcmlnaW5hbCAKICAgICAqIGtleSByZXR1\ncm5lZCBieSB7QGxpbmsgI2dldFByb3BlcnR5KCl9IG1ldGhvZC4gCiAgICAg\nKiAKICAgICAqIEBzaW5jZSAyLjAuMAogICAgICovCiAgICBwdWJsaWMgTGlz\ndDxTdHJpbmc+IGdldFByb3BlcnR5S2V5cygpIHsKICAgICAgICBMaXN0PFN0\ncmluZz4gcmVzdWx0ID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KDEgKyAKICAg\nICAgICAgICAgKG90aGVyTmFtZXMgPT1udWxsID8gMCA6IG90aGVyTmFtZXMu\nc2l6ZSgpKSk7CiAgICAgICAgcmVzdWx0LmFkZChnZXRQcm9wZXJ0eSgpKTsK\nICAgICAgICBpZiAob3RoZXJOYW1lcyAhPSBudWxsKQogICAgICAgICAgICBy\nZXN1bHQuYWRkQWxsKG90aGVyTmFtZXMpOwogICAgICAgIHJldHVybiBDb2xs\nZWN0aW9ucy51bm1vZGlmaWFibGVMaXN0KHJlc3VsdCk7CiAgICB9CiAgICAK\nICAgIC8qKgogICAgICogQWZmaXJtcyBpZiB0aGUgZ2l2ZW4ga2V5IG1hdGNo\nZXMgdGhlIHByb3BlcnR5IChvciBhbnkgb2YgaXRzIGVxdWl2YWxlbnQpLgog\nICAgICogCiAgICAgKiBAc2luY2UgMi4wLjAKICAgICAqLwogICAgcHVibGlj\nIGJvb2xlYW4gbWF0Y2hlcyhTdHJpbmcgcCkgewogICAgICAgIHJldHVybiBn\nZXRQcm9wZXJ0eSgpLmVxdWFscyhwKSB8fCAKICAgICAgICAgIChvdGhlck5h\nbWVzICE9IG51bGwgJiYgb3RoZXJOYW1lcy5jb250YWlucyhwKSk7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogVGhlIGtleSB1bmRlciB3aGljaCB0aGlz\nIHZhbHVlIHdhcyBsb2FkZWQsIG9yIG51bGwuCiAgICAgKi8KICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0TG9hZEtleSgpIHsKICAgICAgICByZXR1cm4gbG9hZEtl\neTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMga2V5IHVuZGVyIHdoaWNo\nIHRoaXMgdmFsdWUgd2FzIGxvYWRlZC4gCiAgICAgKiBAZXhjZXB0aW9uIGlm\nIGNhbGxlZCB3aXRoIGEgbm9uLW51bGwga2V5IHdoaWNoIGlzIGRpZmZlcmVu\ndCBmcm9tIGFuCiAgICAgKiBhbHJlYWR5IGxvYWRlZCBrZXkuIAogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRMb2FkS2V5KFN0cmluZyBrZXkpIHsKICAg\nICAgICBpZiAodGhpcy5sb2FkS2V5ICE9IG51bGwgJiYga2V5ICE9IG51bGwg\nJiYgIXRoaXMubG9hZEtleS5lcXVhbHMoa2V5KSkgCiAgICAgICAgICAgIHRo\ncm93IG5ldyBQYXJzZUV4Y2VwdGlvbihzX2xvYy5nZXQoIm11bHRpcGxlLWxv\nYWQta2V5IiwgCiAgICAgICAgICAgICAgICBsb2FkS2V5LCBrZXkpKTsKICAg\nICAgICBsb2FkS2V5ID0ga2V5OwogICAgfQoKICAgIC8qKgogICAgICogQWxp\nYXNlcyBmb3IgdGhlIHZhbHVlIGluIHRoZSBmb3JtIGtleTEsIHZhbHVlMSwg\na2V5MiwgdmFsdWUyLCAuLi4KICAgICAqIEFsbCBhbGlhcyB2YWx1ZXMgbXVz\ndCBiZSBpbiBzdHJpbmcgZm9ybS4KICAgICAqLwogICAgcHVibGljIFN0cmlu\nZ1tdIGdldEFsaWFzZXMoKSB7CiAgICAgICAgcmV0dXJuIChhbGlhc2VzID09\nIG51bGwpID8gRU1QVFlfQUxJQVNFUyA6IGFsaWFzZXM7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBBbGlhc2VzIGZvciB0aGUgdmFsdWUgaW4gdGhlIGZvcm0g\na2V5MSwgdmFsdWUxLCBrZXkyLCB2YWx1ZTIsIC4uLgogICAgICogQWxsIGFs\naWFzIHZhbHVlcyBtdXN0IGJlIGluIHN0cmluZyBmb3JtLgogICAgICogPHA+\nCiAgICAgKiBUbyBhdm9pZCBwb3RlbnRpYWwgc2lkZS1lZmZlY3RzLCB0aGlz\nIG1ldGhvZCBjb3BpZXMgdGhlIGFycmF5IHBhc3NlZCBpbi4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0QWxpYXNlcyhTdHJpbmdbXSBhbGlhc2VzKSB7\nCiAgICAgICAgU3RyaW5nIFtdIGFTdHJpbmdzID0gbmV3IFN0cmluZ1thbGlh\nc2VzLmxlbmd0aF07CiAgICAgICAgU3lzdGVtLmFycmF5Y29weShhbGlhc2Vz\nLCAwLCBhU3RyaW5ncywgMCwgYVN0cmluZ3MubGVuZ3RoKTsKICAgICAgICB0\naGlzLmFsaWFzZXMgPSBhU3RyaW5nczsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJlcGxhY2VzIGFuIGV4aXN0aW5nIGFsaWFzLCBvciBhZGRzIHRoZSBnaXZl\nbiBhbGlhcyB0byB0aGUgZnJvbnQgb2YgdGhlCiAgICAgKiBhbGlhcyBsaXN0\nIGlmIGl0IGRvZXMgbm90IGFscmVhZHkgZXhpc3QuIEFsbCBhbGlhcyB2YWx1\nZXMgbXVzdCBiZSBpbgogICAgICogc3RyaW5nIGZvcm0uCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldEFsaWFzKFN0cmluZyBrZXksIFN0cmluZyB2YWx1\nZSkgewogICAgICAgIGFsaWFzZXMgPSBzZXRBbGlhcyhrZXksIHZhbHVlLCBh\nbGlhc2VzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBhbiBhbGlhcyBp\nbnRvIGEgY3VycmVudCBhbGlhcyBsaXN0LCByZXR1cm5pbmcgdGhlIG5ldyBs\naXN0LgogICAgICovCiAgICBwcm90ZWN0ZWQgU3RyaW5nW10gc2V0QWxpYXMo\nU3RyaW5nIGtleSwgU3RyaW5nIHZhbHVlLCBTdHJpbmdbXSBhbGlhc2VzKSB7\nCiAgICAgICAgaWYgKGFsaWFzZXMgPT0gbnVsbCkKICAgICAgICAgICAgYWxp\nYXNlcyA9IEVNUFRZX0FMSUFTRVM7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBhbGlhc2VzLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgICAgICAgIGlm\nIChrZXkuZXF1YWxzKGFsaWFzZXNbaV0pKSB7CiAgICAgICAgICAgICAgICBh\nbGlhc2VzW2kgKyAxXSA9IHZhbHVlOwogICAgICAgICAgICAgICAgcmV0dXJu\nIGFsaWFzZXM7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8v\nIGFkZCBhcyBuZXcgYWxpYXMKICAgICAgICBTdHJpbmdbXSBuZXdBbGlhc2Vz\nID0gbmV3IFN0cmluZ1thbGlhc2VzLmxlbmd0aCArIDJdOwogICAgICAgIFN5\nc3RlbS5hcnJheWNvcHkoYWxpYXNlcywgMCwgbmV3QWxpYXNlcywgMiwgYWxp\nYXNlcy5sZW5ndGgpOwogICAgICAgIG5ld0FsaWFzZXNbMF0gPSBrZXk7CiAg\nICAgICAgbmV3QWxpYXNlc1sxXSA9IHZhbHVlOwogICAgICAgIHJldHVybiBu\nZXdBbGlhc2VzOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciBvciBu\nb3QgdGhlIGFsaWFzIGxpc3QgZGVmaW5lcyBhbGwgcG9zc2libGUgc2V0dGlu\nZ3MgZm9yIHRoaXMKICAgICAqIHZhbHVlLiBJZiBzbywgYW4gZXJyb3Igd2ls\nbCBiZSBnZW5lcmF0ZWQgd2hlbiBhdHRlbXB0aW5nIHRvIGludm9rZQogICAg\nICogYW55IG1ldGhvZCBvbiB0aGlzIHZhbHVlIHdpdGggYW4gdW5rbm93biBv\ncHRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzQWxpYXNMaXN0\nQ29tcHJlaGVuc2l2ZSgpIHsKICAgICAgICByZXR1cm4gYWxpYXNMaXN0Q29t\ncHJlaGVuc2l2ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgb3Ig\nbm90IHRoZSBhbGlhcyBsaXN0IGRlZmluZXMgYWxsIHBvc3NpYmxlIHNldHRp\nbmdzIGZvciB0aGlzCiAgICAgKiB2YWx1ZS4gSWYgc28sIGFuIGVycm9yIHdp\nbGwgYmUgZ2VuZXJhdGVkIHdoZW4gYXR0ZW1wdGluZyB0byBpbnZva2UKICAg\nICAqIGFueSBtZXRob2Qgb24gdGhpcyB2YWx1ZSB3aXRoIGFuIHVua25vd24g\nb3B0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRBbGlhc0xpc3RD\nb21wcmVoZW5zaXZlKGJvb2xlYW4gYWxpYXNMaXN0SXNDb21wcmVoZW5zaXZl\nKSB7CiAgICAgICAgdGhpcy5hbGlhc0xpc3RDb21wcmVoZW5zaXZlID0gYWxp\nYXNMaXN0SXNDb21wcmVoZW5zaXZlOwogICAgfQoKICAgIC8qKgogICAgICog\nQWxpYXMgdGhlIGdpdmVuIHNldHRpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBT\ndHJpbmcgYWxpYXMoU3RyaW5nIHN0cikgewogICAgICAgIHJldHVybiBhbGlh\ncyhzdHIsIGFsaWFzZXMsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIEFsaWFzIHRoZSBnaXZlbiBzZXR0aW5nLgogICAgICovCiAgICBwcm90ZWN0\nZWQgU3RyaW5nIGFsaWFzKFN0cmluZyBzdHIsIFN0cmluZ1tdIGFsaWFzZXMs\nIGJvb2xlYW4gbnVsbE5vdEZvdW5kKSB7CiAgICAgICAgaWYgKHN0ciAhPSBu\ndWxsKQogICAgICAgICAgICBzdHIgPSBzdHIudHJpbSgpOwogICAgICAgIGlm\nIChhbGlhc2VzID09IG51bGwgfHwgYWxpYXNlcy5sZW5ndGggPT0gMCkKICAg\nICAgICAgICAgcmV0dXJuIChudWxsTm90Rm91bmQpID8gbnVsbCA6IHN0cjsK\nCiAgICAgICAgYm9vbGVhbiBlbXB0eSA9IHN0ciAhPSBudWxsICYmIHN0ci5s\nZW5ndGgoKSA9PSAwOwogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgYWxp\nYXNlcy5sZW5ndGg7IGkgKz0gMikKICAgICAgICAgICAgaWYgKFN0cmluZ1V0\naWxzLmVxdWFscyhzdHIsIGFsaWFzZXNbaV0pCiAgICAgICAgICAgICAgICB8\nfCAoZW1wdHkgJiYgYWxpYXNlc1tpXSA9PSBudWxsKSkKICAgICAgICAgICAg\nICAgIHJldHVybiBhbGlhc2VzW2kgLSAxXTsKICAgICAgICByZXR1cm4gKG51\nbGxOb3RGb3VuZCkgPyBudWxsIDogc3RyOwogICAgfQoKICAgIC8qKgogICAg\nICogVW5hbGlhcyB0aGUgZ2l2ZW4gc2V0dGluZy4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyB1bmFsaWFzKFN0cmluZyBzdHIpIHsKICAgICAgICByZXR1\ncm4gdW5hbGlhcyhzdHIsIGFsaWFzZXMsIGZhbHNlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFVuYWxpYXMgdGhlIGdpdmVuIHNldHRpbmcuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCBTdHJpbmcgdW5hbGlhcyhTdHJpbmcgc3RyLCBTdHJp\nbmdbXSBhbGlhc2VzLAogICAgICAgIGJvb2xlYW4gbnVsbE5vdEZvdW5kKSB7\nCiAgICAgICAgaWYgKHN0ciAhPSBudWxsKQogICAgICAgICAgICBzdHIgPSBz\ndHIudHJpbSgpOwoKICAgICAgICBib29sZWFuIGVtcHR5ID0gc3RyICE9IG51\nbGwgJiYgc3RyLmxlbmd0aCgpID09IDA7CiAgICAgICAgaWYgKHN0ciA9PSBu\ndWxsIHx8IChlbXB0eSAmJiBkZWYgIT0gbnVsbCkpCiAgICAgICAgICAgIHN0\nciA9IGRlZjsKICAgICAgICBpZiAoYWxpYXNlcyAhPSBudWxsKQogICAgICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IGFsaWFzZXMubGVuZ3RoOyBpICs9\nIDIpCiAgICAgICAgICAgICAgICBpZiAoU3RyaW5nVXRpbHMuZXF1YWxzKHN0\nciwgYWxpYXNlc1tpXSkKICAgICAgICAgICAgICAgICAgICB8fCBTdHJpbmdV\ndGlscy5lcXVhbHMoc3RyLCBhbGlhc2VzW2kgKyAxXSkKICAgICAgICAgICAg\nICAgICAgICB8fCAoZW1wdHkgJiYgYWxpYXNlc1tpXSA9PSBudWxsKSkKICAg\nICAgICAgICAgICAgICAgICByZXR1cm4gYWxpYXNlc1tpICsgMV07CgogICAg\nICAgIGlmIChpc0FsaWFzTGlzdENvbXByZWhlbnNpdmUoKSAmJiBhbGlhc2Vz\nICE9IG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZUV4Y2VwdGlv\nbihzX2xvYy5nZXQoImludmFsaWQtZW51bWVyYXRlZC1jb25maWciLAogICAg\nICAgICAgICAgICAgZ2V0UHJvcGVydHkoKSwgc3RyLCBBcnJheXMuYXNMaXN0\nKGFsaWFzZXMpKSk7CgogICAgICAgIHJldHVybiAobnVsbE5vdEZvdW5kKSA/\nIG51bGwgOiBzdHI7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGVmYXVs\ndCB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5IGFzIGEgc3RyaW5nLgogICAgICov\nCiAgICBwdWJsaWMgU3RyaW5nIGdldERlZmF1bHQoKSB7CiAgICAgICAgcmV0\ndXJuIGRlZjsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBkZWZhdWx0IHZh\nbHVlIGZvciB0aGUgcHJvcGVydHkgYXMgYSBzdHJpbmcuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldERlZmF1bHQoU3RyaW5nIGRlZikgewogICAgICAg\nIHRoaXMuZGVmID0gZGVmOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIG5h\nbWUgb2YgdGhlIGdldHRlciBtZXRob2QgZm9yIHRoZSBpbnN0YW50aWF0ZWQg\ndmFsdWUgb2YgdGhpcwogICAgICogcHJvcGVydHkoYXMgb3Bwb3NlZCB0byB0\naGUgc3RyaW5nIHZhbHVlKQogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdl\ndEluc3RhbnRpYXRpbmdHZXR0ZXIoKSB7CiAgICAgICAgcmV0dXJuIGdldHRl\ncjsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBuYW1lIG9mIHRoZSBnZXR0\nZXIgbWV0aG9kIGZvciB0aGUgaW5zdGFudGlhdGVkIHZhbHVlIG9mIHRoaXMK\nICAgICAqIHByb3BlcnR5KGFzIG9wcG9zZWQgdG8gdGhlIHN0cmluZyB2YWx1\nZSkuIElmIHRoZSBzdHJpbmcgc3RhcnRzIHdpdGgKICAgICAqIDxjb2RlPnRo\naXMuPC9jb2RlPiwgdGhlbiB0aGUgZ2V0dGVyIHdpbGwgYmUgbG9va2VkIHVw\nIG9uIHRoZSB2YWx1ZQogICAgICogaW5zdGFuY2UgaXRzZWxmLiBPdGhlcndp\nc2UsIHRoZSBnZXR0ZXIgd2lsbCBiZSBsb29rZWQgdXAgb24gdGhlCiAgICAg\nKiBjb25maWd1cmF0aW9uIGluc3RhbmNlLgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRJbnN0YW50aWF0aW5nR2V0dGVyKFN0cmluZyBnZXR0ZXIpIHsK\nICAgICAgICB0aGlzLmdldHRlciA9IGdldHRlcjsKICAgIH0KCiAgICAvKioK\nICAgICAqIEEgY2xhc3MgZGVmaW5pbmcgdGhlIHNjb3BlIGluIHdoaWNoIHRo\naXMgdmFsdWUgaXMgZGVmaW5lZC4gVGhpcyB3aWxsCiAgICAgKiBiZSB1c2Vk\nIGJ5IHRoZSBjb25maWd1cmF0aW9uIGZyYW1ld29yayB0byBsb29rIHVwIG1l\ndGFkYXRhIGFib3V0CiAgICAgKiB0aGUgdmFsdWUuCiAgICAgKi8KICAgIHB1\nYmxpYyBDbGFzcyBnZXRTY29wZSgpIHsKICAgICAgICByZXR1cm4gc2NvcGU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBBIGNsYXNzIGRlZmluaW5nIHRoZSBz\nY29wZSBpbiB3aGljaCB0aGlzIHZhbHVlIGlzIGRlZmluZWQuIFRoaXMgd2ls\nbAogICAgICogYmUgdXNlZCBieSB0aGUgY29uZmlndXJhdGlvbiBmcmFtZXdv\ncmsgdG8gbG9vayB1cCBtZXRhZGF0YSBhYm91dAogICAgICogdGhlIHZhbHVl\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRTY29wZShDbGFzcyBjbHMp\nIHsKICAgICAgICBzY29wZSA9IGNsczsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiBhIHN0cmluZ2lmaWVkIHZlcnNpb24gb2YgdGhpcyB2YWx1ZS4g\nSWYgdGhlIGN1cnJlbnQgdmFsdWUgaGFzCiAgICAgKiBhIHNob3J0IGFsaWFz\nIGtleSwgdGhlIGFsaWFzIGtleSBpcyByZXR1cm5lZC4KICAgICAqLwogICAg\ncHVibGljIFN0cmluZyBnZXRTdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIGFs\naWFzKGdldEludGVybmFsU3RyaW5nKCkpOwogICAgfQoKICAgIC8qKgogICAg\nICogU2V0IHRoaXMgdmFsdWUgZnJvbSB0aGUgZ2l2ZW4gc3RyaW5nLiBJZiB0\naGUgZ2l2ZW4gc3RyaW5nIGlzIG51bGwgb3IKICAgICAqIGVtcHR5IGFuZCBh\nIGRlZmF1bHQgaXMgZGVmaW5lZCwgdGhlIGRlZmF1bHQgaXMgdXNlZC4gSWYg\ndGhlIGdpdmVuCiAgICAgKiBzdHJpbmcob3IgZGVmYXVsdCkgaXMgYW4gYWxp\nYXMga2V5LCBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byB0aGUKICAgICAqIGNv\ncnJlc3BvbmRpbmcgdmFsdWUgaW50ZXJuYWxseS4KICAgICAqIDxicj4KICAg\nICAqIElmIHRoaXMgVmFsdWUgaXMgYmVpbmcgc2V0IHRvIGEgbm9uLWRlZmF1\nbHQgdmFsdWUgZm9yIHRoZSBmaXJzdCB0aW1lCiAgICAgKiAoYXMgZGVzaWdu\nYXRlZCBieSA8Y29kZT5vcmlnaW5hbFN0cmluZzwvY29kZT4gYmVpbmcgbnVs\nbCksIHRoZW4gdGhlCiAgICAgKiB2YWx1ZSBpcyByZW1lbWJlcmVkIGFzIDxl\nbT5vcmlnaW5hbDwvZW0+LiBUaGlzIG9yaWdpbmFsIHZhbHVlIGlzIHVzZWQK\nICAgICAqIGZvciBlcXVhbGl0eSBhbmQgaGFzaENvZGUgY29tcHV0YXRpb24g\naWYgdGhpcyBWYWx1ZSBpcwogICAgICoge0BsaW5rICNpc0R5bmFtaWMoKSBk\neW5hbWljfS4gCiAgICAgKgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRT\ndHJpbmcoU3RyaW5nIHZhbCkgewogICAgCWFzc2VydENoYW5nZWFibGUoKTsK\nICAgICAgICBTdHJpbmcgc3RyID0gdW5hbGlhcyh2YWwpOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIHNldEludGVybmFsU3RyaW5nKHN0cik7CiAgICAg\nICAgICAgIGlmIChvcmlnaW5hbFZhbHVlID09IG51bGwgJiYgdmFsICE9IG51\nbGwgJiYgIWlzRGVmYXVsdCh2YWwpKSB7CiAgICAgICAgICAgIAlvcmlnaW5h\nbFZhbHVlID0gZ2V0U3RyaW5nKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nIGNhdGNoIChQYXJzZUV4Y2VwdGlvbiBwZSkgewogICAgICAgICAgICB0aHJv\ndyBwZTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7\nCiAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZUV4Y2VwdGlvbihwcm9wICsg\nIjogIiArIHZhbCwgcmUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIFNldCB0aGlzIHZhbHVlIGFzIGFuIG9iamVjdC4KICAgICAqIDxicj4K\nICAgICAqIElmIHRoaXMgVmFsdWUgaXMgYmVpbmcgc2V0IHRvIGEgbm9uLWRl\nZmF1bHQgdmFsdWUgZm9yIHRoZSBmaXJzdCB0aW1lCiAgICAgKiAoYXMgZGVz\naWduYXRlZCBieSA8Y29kZT5vcmlnaW5hbFN0cmluZzwvY29kZT4gYmVpbmcg\nbnVsbCksIHRoZW4gdGhlCiAgICAgKiB2YWx1ZSBpcyByZW1lbWJlcmVkIGFz\nIDxlbT5vcmlnaW5hbDwvZW0+LiBUaGlzIG9yaWdpbmFsIHZhbHVlIGlzIHVz\nZWQKICAgICAqIGZvciBlcXVhbGl0eSBhbmQgaGFzaENvZGUgY29tcHV0YXRp\nb24gaWYgdGhpcyBWYWx1ZSBpcwogICAgICoge0BsaW5rICNpc0R5bmFtaWMo\nKSBkeW5hbWljfS4gCiAgICAgKiAKICAgICAqLwogICAgcHVibGljIHZvaWQg\nc2V0T2JqZWN0KE9iamVjdCBvYmopIHsKICAgICAgICAvLyBpZiBzZXR0aW5n\nIHRvIG51bGwgc2V0IGFzIHN0cmluZyB0byBnZXQgZGVmYXVsdHMgaW50byBw\nbGF5CiAgICAgICAgaWYgKG9iaiA9PSBudWxsICYmIGRlZiAhPSBudWxsKQog\nICAgICAgICAgICBzZXRTdHJpbmcobnVsbCk7CiAgICAgICAgZWxzZSB7CiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzZXRJbnRlcm5hbE9i\namVjdChvYmopOwogICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsVmFsdWUg\nPT0gbnVsbCAmJiBvYmogIT0gbnVsbCAmJiAhaXNEZWZhdWx0KG9iaikpIHsK\nICAgICAgICAgICAgICAgIAlvcmlnaW5hbFZhbHVlID0gZ2V0U3RyaW5nKCk7\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKFBhcnNl\nRXhjZXB0aW9uIHBlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBwZTsKICAg\nICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAg\nICAgICAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXhjZXB0aW9uKHByb3AgKyAi\nOiAiICsgb2JqLCByZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogR2V0cyB0aGUgb3JpZ2luYWwgdmFsdWUu\nIE9yaWdpbmFsIHZhbHVlIGRlbm90ZXMgdGhlIFN0cmluZ2lmaWVkIGZvcm0g\nb2YgCiAgICAgKiB0aGlzIFZhbHVlLCBmcm9tIHdoaWNoIGl0IGhhcyBiZWVu\nIHNldCwgaWYgZXZlci4gSWYgdGhpcyBWYWx1ZSBoYXMgbmV2ZXIgCiAgICAg\nKiBiZWVuIHNldCB0byBhIG5vbi1kZWZhdWx0IHZhbHVlLCB0aGVuIHJldHVy\nbnMgdGhlIGRlZmF1bHQgdmFsdWUsIHdoaWNoIAogICAgICogaXRzZWxmIGNh\nbiBiZSBudWxsLiAKICAgICAqIAogICAgICogQHNpbmNlIDEuMS4wCiAgICAg\nKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0T3JpZ2luYWxWYWx1ZSgpIHsKICAg\nIAlyZXR1cm4gKG9yaWdpbmFsVmFsdWUgPT0gbnVsbCkgPyBnZXREZWZhdWx0\nKCkgOiBvcmlnaW5hbFZhbHVlOwogICAgfQogICAgCiAgICBib29sZWFuIGlz\nRGVmYXVsdChPYmplY3QgdmFsKSB7CiAgICAJcmV0dXJuIHZhbCAhPSBudWxs\nICYmIHZhbC50b1N0cmluZygpLmVxdWFscyhnZXREZWZhdWx0KCkpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgdHlwZSBvZiB0aGUgcHJv\ncGVydHkgdGhhdCB0aGlzIFZhbHVlIHJlcHJlc2VudHMuCiAgICAgKi8KICAg\nIHB1YmxpYyBhYnN0cmFjdCBDbGFzczw/PiBnZXRWYWx1ZVR5cGUoKTsKCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgaW50ZXJuYWwgc3RyaW5nIGZvcm0g\nb2YgdGhpcyB2YWx1ZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0\nIFN0cmluZyBnZXRJbnRlcm5hbFN0cmluZygpOwoKICAgIC8qKgogICAgICog\nU2V0IHRoaXMgdmFsdWUgZnJvbSB0aGUgZ2l2ZW4gc3RyaW5nLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBzZXRJbnRlcm5hbFN0cmlu\nZyhTdHJpbmcgc3RyKTsKCiAgICAvKioKICAgICAqIFNldCB0aGlzIHZhbHVl\nIGZyb20gYW4gb2JqZWN0LgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJh\nY3Qgdm9pZCBzZXRJbnRlcm5hbE9iamVjdChPYmplY3Qgb2JqKTsKCiAgICAv\nKioKICAgICAqIEdldHMgdW5tb2RpZmFibGUgbGlzdCBvZiBsaXN0ZW5lcnMg\nZm9yIHZhbHVlIGNoYW5nZXMuCiAgICAgKi8KICAgIHB1YmxpYyBMaXN0PFZh\nbHVlTGlzdGVuZXI+IGdldExpc3RlbmVycygpIHsKICAgICAgICByZXR1cm4g\nQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlTGlzdCh0aGlzLmxpc3RlbmVycyk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBMaXN0ZW5lciBmb3IgdmFsdWUgY2hh\nbmdlcy4KICAgICAqLwogICAgcHVibGljIHZvaWQgYWRkTGlzdGVuZXIoVmFs\ndWVMaXN0ZW5lciBsaXN0ZW5lcikgewogICAgCWlmIChsaXN0ZW5lciA9PSBu\ndWxsKQogICAgCQlyZXR1cm47CiAgICAJaWYgKGxpc3RlbmVycyA9PSBudWxs\nKQogICAgCQlsaXN0ZW5lcnMgPSBuZXcgQXJyYXlMaXN0PFZhbHVlTGlzdGVu\nZXI+KCk7CiAgICAgICAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHJlbW92ZUxpc3RlbmVyKFZhbHVlTGlz\ndGVuZXIgbGlzdGVuZXIpIHsKICAgIAlpZiAobGlzdGVuZXIgPT0gbnVsbCkK\nICAgIAkJcmV0dXJuOwogICAgICAgIGxpc3RlbmVycy5yZW1vdmUobGlzdGVu\nZXIpOwogICAgfQoKICAgIC8qKgogICAgICogU3ViY2xhc3NlcyBzaG91bGQg\nY2FsbCB0aGlzIG1ldGhvZCB3aGVuIHRoZWlyIGludGVybmFsIHZhbHVlIGNo\nYW5nZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHZhbHVlQ2hhbmdlZCgp\nIHsKICAgICAgICBpZiAobGlzdGVuZXJzID09IG51bGwpIAogICAgICAgIAly\nZXR1cm47CiAgICAgICAgZm9yIChWYWx1ZUxpc3RlbmVyIGxpc3RlbmVyIDog\nbGlzdGVuZXJzKSB7CiAgICAgICAgCWxpc3RlbmVyLnZhbHVlQ2hhbmdlZCh0\naGlzKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQXNz\nZXJ0cyBpZiB0aGlzIHJlY2VpdmVyIGNhbiBiZSBjaGFuZ2VkLgogICAgICog\nU3ViY2xhc3NlcyA8ZW0+bXVzdDwvZW0+IGludm9rZSB0aGlzIG1ldGhvZCBi\nZWZvcmUgY2hhbmdpbmcgaXRzCiAgICAgKiBpbnRlcm5hbCBzdGF0ZS4KICAg\nICAqIAogICAgICogVGhpcyByZWNlaXZlciBjYW4gbm90IGJlIGNoYW5nZWQg\naWYgYWxsIG9mIHRoZSBmb2xsb3dpbmcgaXMgdHJ1ZQogICAgICogPExJPnRo\naXMgcmVjZWl2ZXIgaXMgbm90IGR5bmFtaWMKICAgICAqIDxMST5WYWx1ZUxp\nc3RlbmVyIGF0dGFjaGVkIHRvIHRoaXMgcmVjZWl2ZXIgaXMgYSBDb25maWd1\ncmF0aW9uCiAgICAgKiA8TEk+Q29uZmlndXJhdGlvbiBpcyByZWFkLW9ubHkK\nICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgYXNzZXJ0Q2hhbmdlYWJsZSgp\nIHsKICAgIAlpZiAoIWlzRHluYW1pYygpICYmIGNvbnRhaW5zUmVhZE9ubHlD\nb25maWd1cmF0aW9uQXNMaXN0ZW5lcigpKSB7CiAgICAgICAgCXRocm93IG5l\ndyBSdW50aW1lRXhjZXB0aW9uKHNfbG9jLmdldCgidmV0by1jaGFuZ2UiLAog\nICAgICAgIAkJdGhpcy5nZXRQcm9wZXJ0eSgpKS50b1N0cmluZygpKTsKICAg\nICAgIAl9CiAgICB9CiAgICAKICAgIGJvb2xlYW4gY29udGFpbnNSZWFkT25s\neUNvbmZpZ3VyYXRpb25Bc0xpc3RlbmVyKCkgewogICAgCWlmIChsaXN0ZW5l\ncnMgPT0gbnVsbCkKICAgIAkJcmV0dXJuIGZhbHNlOwogICAgCWZvciAoVmFs\ndWVMaXN0ZW5lciBsaXN0ZW5lciA6IGxpc3RlbmVycykgewogICAgCQlpZiAo\nbGlzdGVuZXIgaW5zdGFuY2VvZiBDb25maWd1cmF0aW9uCiAgICAJCSYmICgo\nQ29uZmlndXJhdGlvbilsaXN0ZW5lcikuaXNSZWFkT25seSgpKQogICAgCQkJ\ncmV0dXJuIHRydWU7CiAgICAJfQogICAgCXJldHVybiBmYWxzZTsKICAgIH0K\nICAgIAogICAgLyoqCiAgICAgKiBTZXRzIGlmIHRoaXMgcmVjZWl2ZXIgY2Fu\nIGJlIG11dGF0ZWQgZXZlbiB3aGVuIHRoZSBjb25maWd1cmF0aW9uIGl0IAog\nICAgICogYmVsb25ncyB0byBoYXMgYmVlbiB7QGxpbmsgQ29uZmlndXJhdGlv\nbiNpc1JlYWRPbmx5KCkgZnJvemVufS4KICAgICAqICAKICAgICAqIEBzaW5j\nZSAxLjEuMAogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXREeW5hbWljKGJv\nb2xlYW4gZmxhZykgewogICAgCWlzRHluYW1pYyA9IGZsYWc7CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogQWZmaXJtcyBpZiB0aGlzIHJlY2VpdmVyIGNh\nbiBiZSBtdXRhdGVkIGV2ZW4gd2hlbiB0aGUgY29uZmlndXJhdGlvbiBpdCAK\nICAgICAqIGJlbG9uZ3MgdG8gaGFzIGJlZW4ge0BsaW5rIENvbmZpZ3VyYXRp\nb24jaXNSZWFkT25seSgpIGZyb3plbn0uCiAgICAgKiAgCiAgICAgKiBAc2lu\nY2UgMS4xLjAKICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNEeW5hbWlj\nKCkgewogICAgCXJldHVybiBpc0R5bmFtaWM7IAogICAgfQoKICAgIC8qKgog\nICAgICogVXNlIHtAbGluayAjZ2V0T3JpZ2luYWxWYWx1ZSgpIG9yaWdpbmFs\nIHZhbHVlfSBpbnN0ZWFkIG9mIAogICAgICoge0BsaW5rICNnZXRTdHJpbmco\nKSBjdXJyZW50IHZhbHVlfSBiZWNhdXNlIHRoZXkgYXJlIG9uZSBhbmQgdGhl\nIHNhbWUgCiAgICAgKiBmb3Igbm9uLWR5bmFtaWMgVmFsdWVzIGFuZCBlbnN1\ncmVzIHRoYXQgbW9kaWZ5aW5nIGR5bmFtaWMgVmFsdWVzIGRvIG5vdAogICAg\nICogaW1wYWN0IGVxdWFsaXR5IG9yIGhhc2hDb2RlIGNvbnRyYWN0LiAgIAog\nICAgICovCiAgICBwdWJsaWMgaW50IGhhc2hDb2RlKCkgewogICAgICAgIFN0\ncmluZyBzdHIgPSAoaXNEeW5hbWljKCkpID8gZ2V0T3JpZ2luYWxWYWx1ZSgp\nIDogZ2V0U3RyaW5nKCk7CiAgICAgICAgaW50IHN0ckhhc2ggPSAoc3RyID09\nIG51bGwpID8gMCA6IHN0ci5oYXNoQ29kZSgpOwogICAgICAgIGludCBwcm9w\nSGFzaCA9IChwcm9wID09IG51bGwpID8gMCA6IHByb3AuaGFzaENvZGUoKTsK\nICAgICAgICByZXR1cm4gc3RySGFzaCBeIHByb3BIYXNoOwogICAgfQoKICAg\nIC8qKgogICAgICogVXNlIHtAbGluayAjZ2V0T3JpZ2luYWxWYWx1ZSgpIG9y\naWdpbmFsIHZhbHVlfSBpbnN0ZWFkIG9mIAogICAgICoge0BsaW5rICNnZXRT\ndHJpbmcoKSBjdXJyZW50IHZhbHVlfSBiZWNhdXNlIHRoZXkgYXJlIG9uZSBh\nbmQgdGhlIHNhbWUgCiAgICAgKiBmb3Igbm9uLWR5bmFtaWMgVmFsdWVzIGFu\nZCBlbnN1cmVzIHRoYXQgbW9kaWZ5aW5nIGR5bmFtaWMgVmFsdWVzIGRvIG5v\ndAogICAgICogaW1wYWN0IGVxdWFsaXR5IG9yIGhhc2hDb2RlIGNvbnRyYWN0\nLiAgIAogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0\nIG90aGVyKSB7CiAgICAgICAgaWYgKG90aGVyID09IHRoaXMpCiAgICAgICAg\nICAgIHJldHVybiB0cnVlOwogICAgICAgIGlmICghKG90aGVyIGluc3RhbmNl\nb2YgVmFsdWUpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAg\nIFZhbHVlIG8gPSAoVmFsdWUpIG90aGVyOwogICAgICAgIFN0cmluZyB0aGlz\nU3RyID0gKGlzRHluYW1pYygpKSA/IGdldE9yaWdpbmFsVmFsdWUoKSA6IGdl\ndFN0cmluZygpOwogICAgICAgIFN0cmluZyB0aGF0U3RyID0gKGlzRHluYW1p\nYygpKSA/IG8uZ2V0T3JpZ2luYWxWYWx1ZSgpIDogby5nZXRTdHJpbmcoKTsK\nICAgICAgICByZXR1cm4gKGlzRHluYW1pYygpID09IG8uaXNEeW5hbWljKCkp\nCiAgICAgICAgICAgICYmIFN0cmluZ1V0aWxzLmVxdWFscyhwcm9wLCBvLmdl\ndFByb3BlcnR5KCkpCiAgICAgICAgICAgICYmIFN0cmluZ1V0aWxzLmVxdWFs\ncyh0aGlzU3RyLCB0aGF0U3RyKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0\nIGNsb25lKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBz\ndXBlci5jbG9uZSgpOwogICAgICAgIH0gY2F0Y2ggKENsb25lTm90U3VwcG9y\ndGVkRXhjZXB0aW9uIGNuc2UpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQWZmaXJtcyBpZiB0\naGUgdmFsdWUgZm9yIHRoaXMgVmFsdWUgaXMgdmlzaWJsZS4KICAgICAqIENl\ncnRhaW4gc2Vuc2l0aXZlIHZhbHVlIHN1Y2ggYXMgcGFzc3dvcmQgY2FuIGJl\nIG1hZGUgaW52aXNpYmxlCiAgICAgKiBzbyB0aGF0IGl0IGlzIG5vdCByZXR1\ncm5lZCB0byB0aGUgdXNlciBjb2RlLgogICAgICovCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc0hpZGRlbigpIHsKICAgICAgICByZXR1cm4gX2hpZGRlbjsKICAg\nIH0KCiAgICAvKioKICAgICAqIEhpZGVzIHRoZSB2YWx1ZSBvZiB0aGlzIFZh\nbHVlIGZyb20gYmVpbmcgb3V0cHV0IHRvIHRoZSBjYWxsZXIuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIGhpZGUoKSB7CiAgICAgICAgX2hpZGRlbiA9IHRy\ndWU7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQWZmaXJtcyBpZiB0aGlz\nIFZhbHVlIGlzIHVzZWQgZm9yIGludGVybmFsIHB1cnBvc2Ugb25seSBhbmQg\nbm90IGV4cG9zZWQgYXMgYSBzdXBwb3J0ZWQgcHJvcGVydHkuCiAgICAgKiBA\nc2VlIENvbmZpZ3VyYXRpb24jZ2V0UHJvcGVydHlLZXlzKCkKICAgICAqLwog\nICAgcHVibGljIGJvb2xlYW4gaXNQcml2YXRlKCkgewogICAgICAgIHJldHVy\nbiBfcHJpdmF0ZTsKICAgIH0KCiAgICAvKioKICAgICAqIE1hcmtzIHRoaXMg\nVmFsdWUgZm9yIGludGVybmFsIHB1cnBvc2Ugb25seS4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgbWFrZVByaXZhdGUoKSB7CiAgICAgICAgX3ByaXZhdGUg\nPSB0cnVlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEdldCB0aGUgYWN0\ndWFsIGRhdGEgc3RvcmVkIGluIHRoaXMgdmFsdWUuCiAgICAgKi8KICAgIHB1\nYmxpYyBhYnN0cmFjdCBPYmplY3QgZ2V0KCk7CiAgICAKICAgIHB1YmxpYyBT\ndHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIGdldFByb3BlcnR5\nKCkrICI6IiArIGdldCgpICsgIlsiICsgZ2V0VmFsdWVUeXBlKCkuZ2V0TmFt\nZSgpICsgIl0iOwogICAgfQp9Cg==\n","encoding":"base64"}

