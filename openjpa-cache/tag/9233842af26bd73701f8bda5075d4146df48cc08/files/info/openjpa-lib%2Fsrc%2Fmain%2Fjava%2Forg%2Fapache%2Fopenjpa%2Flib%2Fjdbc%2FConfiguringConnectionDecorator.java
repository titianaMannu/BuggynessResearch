{"sha":"0274f653d53ed028134b2bd9beefefe375d43eb5","node_id":"MDQ6QmxvYjIwNjM2NDowMjc0ZjY1M2Q1M2VkMDI4MTM0YjJiZDliZWVmZWZlMzc1ZDQzZWI1","size":6198,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0274f653d53ed028134b2bd9beefefe375d43eb5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpkYmM7CgppbXBvcnQg\namF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZhLnNx\nbC5Db25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1l\nbnQ7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZh\nLnNxbC5TdGF0ZW1lbnQ7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkNvbmNyZXRlQ2xhc3NHZW5lcmF0b3I7CgovKioKICogQ29ubmVj\ndGlvbiBkZWNvcmF0b3IgdGhhdCBjYW4gY29uZmlndXJlIHNvbWUgcHJvcGVy\ndGllcyBvZiB0aGUKICogdW5kZXJseWluZyBjb25uZWN0aW9uLiBVbmRlcnN0\nYW5kcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6CiAqIDx1bD4KICogPGxp\nPlF1ZXJ5VGltZW91dDwvbGk+CiAqIDxsaT5UcmFuc2FjdGlvbklzb2xhdGlv\nbih7QGxpbmsgQ29ubmVjdGlvbn0gY29uc3RhbnRzKTwvbGk+CiAqIDxsaT5B\ndXRvQ29tbWl0PC9saT4KICogPC91bD4KICoKICogQGF1dGhvciBBYmUgV2hp\ndGUKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIENvbmZpZ3VyaW5n\nQ29ubmVjdGlvbkRlY29yYXRvciBpbXBsZW1lbnRzIENvbm5lY3Rpb25EZWNv\ncmF0b3IgewoKICAgc3RhdGljIGZpbmFsIENvbnN0cnVjdG9yPENvbmZpZ3Vy\naW5nQ29ubmVjdGlvbj4gY29uZmlndXJpbmdDb25uZWN0aW9uSW1wbDsKCiAg\nICBzdGF0aWMgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbmZpZ3Vy\naW5nQ29ubmVjdGlvbkltcGwgPSBDb25jcmV0ZUNsYXNzR2VuZXJhdG9yLmdl\ndENvbmNyZXRlQ29uc3RydWN0b3IoQ29uZmlndXJpbmdDb25uZWN0aW9uLmNs\nYXNzLCAKICAgICAgICAgICAgICAgICAgICBDb25maWd1cmluZ0Nvbm5lY3Rp\nb25EZWNvcmF0b3IuY2xhc3MsIENvbm5lY3Rpb24uY2xhc3MpOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBFeGNlcHRpb25JbkluaXRpYWxpemVyRXJyb3IoZSk7CiAgICAgICAgfQog\nICAgfQoKICAgIHByaXZhdGUgaW50IF9pc29sYXRpb24gPSAtMTsKICAgIHBy\naXZhdGUgaW50IF9xdWVyeVRpbWVvdXQgPSAtMTsKICAgIHByaXZhdGUgQm9v\nbGVhbiBfYXV0b0NvbW1pdCA9IG51bGw7CgogICAgLyoqCiAgICAgKiBUaGUg\nbnVtYmVyIG9mIHNlY29uZHMgdG8gd2FpdCBmb3IgYSBxdWVyeSB0byBleGVj\ndXRlIGJlZm9yZQogICAgICogdGVybWluYXRpbmcgaXQuCiAgICAgKi8KICAg\nIHB1YmxpYyBpbnQgZ2V0UXVlcnlUaW1lb3V0KCkgewogICAgICAgIHJldHVy\nbiBfcXVlcnlUaW1lb3V0OwogICAgfQoKICAgIC8qKgogICAgICogVGhlIG51\nbWJlciBvZiBzZWNvbmRzIHRvIHdhaXQgZm9yIGEgcXVlcnkgdG8gZXhlY3V0\nZSBiZWZvcmUKICAgICAqIHRlcm1pbmF0aW5nIGl0LgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXRRdWVyeVRpbWVvdXQoaW50IHRpbWVvdXQpIHsKICAg\nICAgICBfcXVlcnlUaW1lb3V0ID0gdGltZW91dDsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoZSB0cmFuc2FjdGlvbiBpc29sYXRpb24gbGV2ZWwuCiAgICAg\nKi8KICAgIHB1YmxpYyBpbnQgZ2V0VHJhbnNhY3Rpb25Jc29sYXRpb24oKSB7\nCiAgICAgICAgcmV0dXJuIF9pc29sYXRpb247CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUaGUgdHJhbnNhY3Rpb24gaXNvbGF0aW9uIGxldmVsLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRUcmFuc2FjdGlvbklzb2xhdGlvbihpbnQg\naXNvbGF0aW9uKSB7CiAgICAgICAgX2lzb2xhdGlvbiA9IGlzb2xhdGlvbjsK\nICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgYXV0byBjb21taXQgc2hv\ndWxkIGJlIG9uLiBVc2UgbnVsbCB0byBrZWVwCiAgICAgKiB0aGUgY29ubmVj\ndGlvbidzIGRlZmF1bHQgc2V0dGluZy4gRGVmYXVsdHMgdG8gbnVsbC4KICAg\nICAqLwogICAgcHVibGljIEJvb2xlYW4gZ2V0QXV0b0NvbW1pdCgpIHsKICAg\nICAgICByZXR1cm4gX2F1dG9Db21taXQ7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBXaGV0aGVyIGF1dG8gY29tbWl0IHNob3VsZCBiZSBvbi4gVXNlIG51bGwg\ndG8ga2VlcAogICAgICogdGhlIGNvbm5lY3Rpb24ncyBkZWZhdWx0IHNldHRp\nbmcuIERlZmF1bHRzIHRvIG51bGwuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldEF1dG9Db21taXQoQm9vbGVhbiBhdXRvQ29tbWl0KSB7CiAgICAgICAg\nX2F1dG9Db21taXQgPSBhdXRvQ29tbWl0OwogICAgfQoKICAgIHB1YmxpYyBD\nb25uZWN0aW9uIGRlY29yYXRlKENvbm5lY3Rpb24gY29ubikgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9pc29sYXRpb24gPT0gQ29ubmVj\ndGlvbi5UUkFOU0FDVElPTl9OT05FIHx8IF9xdWVyeVRpbWVvdXQgIT0gLTEK\nICAgICAgICAgICAgfHwgX2F1dG9Db21taXQgIT0gbnVsbCkKICAgICAgICAg\nICAgY29ubiA9IENvbmNyZXRlQ2xhc3NHZW5lcmF0b3IuCiAgICAgICAgICAg\nICAgICBuZXdJbnN0YW5jZShjb25maWd1cmluZ0Nvbm5lY3Rpb25JbXBsLCB0\naGlzLCBjb25uKTsKICAgICAgICBpZiAoX2lzb2xhdGlvbiAhPSAtMSAmJiBf\naXNvbGF0aW9uICE9IENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fTk9ORSkKICAg\nICAgICAgICAgY29ubi5zZXRUcmFuc2FjdGlvbklzb2xhdGlvbihfaXNvbGF0\naW9uKTsKICAgICAgICByZXR1cm4gY29ubjsKICAgIH0KCiAgICAvKioKICAg\nICAqIERlY29yYXRvciB0byBjb25maWd1cmUgY29ubmVjdGlvbiBjb21wb25l\nbnRzIGNvcnJlY3RseS4KICAgICAqLwogICAgcHVibGljIGFic3RyYWN0IGNs\nYXNzIENvbmZpZ3VyaW5nQ29ubmVjdGlvbiBleHRlbmRzIERlbGVnYXRpbmdD\nb25uZWN0aW9uIHsKCiAgICAgICAgcHJpdmF0ZSBib29sZWFuIF9jdXJBdXRv\nQ29tbWl0ID0gZmFsc2U7CgogICAgICAgIHB1YmxpYyBDb25maWd1cmluZ0Nv\nbm5lY3Rpb24oQ29ubmVjdGlvbiBjb25uKSB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICAgICAgc3VwZXIoY29ubik7CiAgICAgICAgICAgIGlmIChf\nYXV0b0NvbW1pdCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBfY3VyQXV0\nb0NvbW1pdCA9IENvbmZpZ3VyaW5nQ29ubmVjdGlvbi50aGlzLmdldEF1dG9D\nb21taXQoKTsKICAgICAgICAgICAgICAgIGlmIChfY3VyQXV0b0NvbW1pdCAh\nPSBfYXV0b0NvbW1pdC5ib29sZWFuVmFsdWUoKSkKICAgICAgICAgICAgICAg\nICAgICBzZXRBdXRvQ29tbWl0KF9hdXRvQ29tbWl0LmJvb2xlYW5WYWx1ZSgp\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZv\naWQgc2V0QXV0b0NvbW1pdChib29sZWFuIGF1dG8pIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgICAgICBpZiAoX2lzb2xhdGlvbiAhPSBUUkFOU0FD\nVElPTl9OT05FKSB7CiAgICAgICAgICAgICAgICBzdXBlci5zZXRBdXRvQ29t\nbWl0KGF1dG8pOwogICAgICAgICAgICAgICAgX2N1ckF1dG9Db21taXQgPSBh\ndXRvOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\ndm9pZCBjb21taXQoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgaWYgKF9pc29sYXRpb24gIT0gVFJBTlNBQ1RJT05fTk9ORSkKICAgICAg\nICAgICAgICAgIHN1cGVyLmNvbW1pdCgpOwogICAgICAgICAgICBpZiAoX2F1\ndG9Db21taXQgIT0gbnVsbAogICAgICAgICAgICAgICAgJiYgX2F1dG9Db21t\naXQuYm9vbGVhblZhbHVlKCkgIT0gX2N1ckF1dG9Db21taXQpCiAgICAgICAg\nICAgICAgICBzZXRBdXRvQ29tbWl0KF9hdXRvQ29tbWl0LmJvb2xlYW5WYWx1\nZSgpKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHJvbGxiYWNr\nKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChfaXNv\nbGF0aW9uICE9IFRSQU5TQUNUSU9OX05PTkUpCiAgICAgICAgICAgICAgICBz\ndXBlci5yb2xsYmFjaygpOwogICAgICAgICAgICBpZiAoX2F1dG9Db21taXQg\nIT0gbnVsbAogICAgICAgICAgICAgICAgJiYgX2F1dG9Db21taXQuYm9vbGVh\nblZhbHVlKCkgIT0gX2N1ckF1dG9Db21taXQpCiAgICAgICAgICAgICAgICBz\nZXRBdXRvQ29tbWl0KF9hdXRvQ29tbWl0LmJvb2xlYW5WYWx1ZSgpKTsKICAg\nICAgICB9CgogICAgICAgIHByb3RlY3RlZCBQcmVwYXJlZFN0YXRlbWVudCBw\ncmVwYXJlU3RhdGVtZW50KFN0cmluZyBzcWwsIGJvb2xlYW4gd3JhcCkKICAg\nICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIFBy\nZXBhcmVkU3RhdGVtZW50IHN0bW50ID0gc3VwZXIucHJlcGFyZVN0YXRlbWVu\ndChzcWwsIHdyYXApOwogICAgICAgICAgICBpZiAoX3F1ZXJ5VGltZW91dCAh\nPSAtMSkKICAgICAgICAgICAgICAgIHN0bW50LnNldFF1ZXJ5VGltZW91dChf\ncXVlcnlUaW1lb3V0KTsKICAgICAgICAgICAgcmV0dXJuIHN0bW50OwogICAg\nICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIFByZXBhcmVkU3RhdGVtZW50IHBy\nZXBhcmVTdGF0ZW1lbnQoU3RyaW5nIHNxbCwgaW50IHJzVHlwZSwKICAgICAg\nICAgICAgaW50IHJzQ29uY3VyLCBib29sZWFuIHdyYXApIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG1u\ndCA9IHN1cGVyLnByZXBhcmVTdGF0ZW1lbnQoc3FsLCByc1R5cGUsCiAgICAg\nICAgICAgICAgICByc0NvbmN1ciwgd3JhcCk7CiAgICAgICAgICAgIGlmIChf\ncXVlcnlUaW1lb3V0ICE9IC0xKQogICAgICAgICAgICAgICAgc3RtbnQuc2V0\nUXVlcnlUaW1lb3V0KF9xdWVyeVRpbWVvdXQpOwogICAgICAgICAgICByZXR1\ncm4gc3RtbnQ7CiAgICAgICAgfQoKICAgICAgICBwcm90ZWN0ZWQgU3RhdGVt\nZW50IGNyZWF0ZVN0YXRlbWVudChib29sZWFuIHdyYXApIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgICAgICBTdGF0ZW1lbnQgc3RtbnQgPSBzdXBl\nci5jcmVhdGVTdGF0ZW1lbnQod3JhcCk7CiAgICAgICAgICAgIGlmIChfcXVl\ncnlUaW1lb3V0ICE9IC0xKQogICAgICAgICAgICAgICAgc3RtbnQuc2V0UXVl\ncnlUaW1lb3V0KF9xdWVyeVRpbWVvdXQpOwogICAgICAgICAgICByZXR1cm4g\nc3RtbnQ7CiAgICAgICAgfQoKICAgICAgICBwcm90ZWN0ZWQgU3RhdGVtZW50\nIGNyZWF0ZVN0YXRlbWVudChpbnQgcnNUeXBlLCBpbnQgcnNDb25jdXIsCiAg\nICAgICAgICAgIGJvb2xlYW4gd3JhcCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgICAgIFN0YXRlbWVudCBzdG1udCA9IHN1cGVyLmNyZWF0ZVN0\nYXRlbWVudChyc1R5cGUsIHJzQ29uY3VyLCB3cmFwKTsKICAgICAgICAgICAg\naWYgKF9xdWVyeVRpbWVvdXQgIT0gLTEpCiAgICAgICAgICAgICAgICBzdG1u\ndC5zZXRRdWVyeVRpbWVvdXQoX3F1ZXJ5VGltZW91dCk7CiAgICAgICAgICAg\nIHJldHVybiBzdG1udDsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

