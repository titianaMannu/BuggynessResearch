{"sha":"d305fbfbce9cff2dbfd62c3031af0832289896ec","node_id":"MDQ6QmxvYjIwNjM2NDpkMzA1ZmJmYmNlOWNmZjJkYmZkNjJjMzAzMWFmMDgzMjI4OTg5NmVj","size":4644,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d305fbfbce9cff2dbfd62c3031af0832289896ec","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpkYmM7CgppbXBvcnQg\namF2YS5pby5QcmludFdyaXRlcjsKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0\nLkNvbnN0cnVjdG9yOwppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1w\nb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnNxbC5E\nYXRhU291cmNlOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5DbG9zZWFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuQ29uY3JldGVDbGFzc0dlbmVyYXRvcjsKCi8qKgogKiBXcmFwcGVyIGFy\nb3VuZCBhbiBleGlzdGluZyBkYXRhIHNvdXJjZS4gU3ViY2xhc3NlcyBjYW4g\nb3ZlcnJpZGUgdGhlCiAqIG1ldGhvZHMgd2hvc2UgYmVoYXZpb3IgdGhleSBt\nZWFuIHRvIGNoYW5nZS4gVGhlIDxjb2RlPmVxdWFsczwvY29kZT4gYW5kCiAq\nIDxjb2RlPmhhc2hDb2RlPC9jb2RlPiBtZXRob2RzIHBhc3MgdGhyb3VnaCB0\nbyB0aGUgYmFzZSB1bmRlcmx5aW5nIGRhdGEgc3RvcmUuCiAqCiAqIEBhdXRo\nb3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgRGVsZWdh\ndGluZ0RhdGFTb3VyY2UgaW1wbGVtZW50cyBEYXRhU291cmNlLCBDbG9zZWFi\nbGUgewoKICAgIHN0YXRpYyBmaW5hbCBDb25zdHJ1Y3RvcjxEZWxlZ2F0aW5n\nRGF0YVNvdXJjZT4gY29uY3JldGVJbXBsOwoKICAgIHN0YXRpYyB7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgY29uY3JldGVJbXBsID0gQ29uY3JldGVD\nbGFzc0dlbmVyYXRvci5nZXRDb25jcmV0ZUNvbnN0cnVjdG9yKERlbGVnYXRp\nbmdEYXRhU291cmNlLmNsYXNzLCBEYXRhU291cmNlLmNsYXNzKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgRXhjZXB0aW9uSW5Jbml0aWFsaXplckVycm9yKGUpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwcml2YXRlIGZpbmFsIERhdGFTb3VyY2UgX2RzOwogICAg\ncHJpdmF0ZSBmaW5hbCBEZWxlZ2F0aW5nRGF0YVNvdXJjZSBfZGVsOwoKICAg\nIC8qKgogICAgICogQ29uc3RydWN0b3IuIFN1cHBseSB3cmFwcGVkIGRhdGEg\nc291cmNlLgogICAgICovCiAgICBwdWJsaWMgRGVsZWdhdGluZ0RhdGFTb3Vy\nY2UoRGF0YVNvdXJjZSBkcykgewogICAgICAgIF9kcyA9IGRzOwoKICAgICAg\nICBpZiAoX2RzIGluc3RhbmNlb2YgRGVsZWdhdGluZ0RhdGFTb3VyY2UpCiAg\nICAgICAgICAgIF9kZWwgPSAoRGVsZWdhdGluZ0RhdGFTb3VyY2UpIF9kczsK\nICAgICAgICBlbHNlCiAgICAgICAgICAgIF9kZWwgPSBudWxsOwogICAgfQoK\nICAgIC8qKiAKICAgICAqICBDb25zdHJ1Y3RvciBmb3IgdGhlIGNvbmNyZXRl\nIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgYWJzdHJhY3QgY2xhc3MuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgRGVsZWdhdGluZ0RhdGFTb3VyY2UgbmV3\nSW5zdGFuY2UoRGF0YVNvdXJjZSBkcykgewogICAgICAgIHJldHVybiBDb25j\ncmV0ZUNsYXNzR2VuZXJhdG9yLm5ld0luc3RhbmNlKGNvbmNyZXRlSW1wbCwg\nZHMpOwogICAgfQoKICAgIC8qKiAKICAgICAqICBNYXJrZXIgdG8gZW5mb3Jj\nZSB0aGF0IHN1YmNsYXNzZXMgb2YgdGhpcyBjbGFzcyBhcmUgYWJzdHJhY3Qu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIGVuZm9yY2VB\nYnN0cmFjdCgpOwoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB3cmFwcGVk\nIGRhdGEgc291cmNlLgogICAgICovCiAgICBwdWJsaWMgRGF0YVNvdXJjZSBn\nZXREZWxlZ2F0ZSgpIHsKICAgICAgICByZXR1cm4gX2RzOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHRoZSBpbm5lci1tb3N0IHdyYXBwZWQgZGVs\nZWdhdGUuCiAgICAgKi8KICAgIHB1YmxpYyBEYXRhU291cmNlIGdldElubmVy\nbW9zdERlbGVnYXRlKCkgewogICAgICAgIHJldHVybiAoX2RlbCA9PSBudWxs\nKSA/IF9kcyA6IF9kZWwuZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKTsKICAgIH0K\nCiAgICBwdWJsaWMgaW50IGhhc2hDb2RlKCkgewogICAgICAgIHJldHVybiBn\nZXRJbm5lcm1vc3REZWxlZ2F0ZSgpLmhhc2hDb2RlKCk7CiAgICB9CgogICAg\ncHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewogICAgICAg\nIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsK\nICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBEZWxlZ2F0aW5nRGF0YVNv\ndXJjZSkKICAgICAgICAgICAgb3RoZXIgPSAoKERlbGVnYXRpbmdEYXRhU291\ncmNlKSBvdGhlcikuZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKTsKICAgICAgICBy\nZXR1cm4gZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKS5lcXVhbHMob3RoZXIpOwog\nICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAg\nU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoImRhdGFzb3Vy\nY2UgIikuIGFwcGVuZChoYXNoQ29kZSgpKTsKICAgICAgICBhcHBlbmRJbmZv\nKGJ1Zik7CiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwogICAgfQoK\nICAgIHByb3RlY3RlZCB2b2lkIGFwcGVuZEluZm8oU3RyaW5nQnVmZmVyIGJ1\nZikgewogICAgICAgIGlmIChfZGVsICE9IG51bGwpCiAgICAgICAgICAgIF9k\nZWwuYXBwZW5kSW5mbyhidWYpOwogICAgfQoKICAgIHB1YmxpYyBQcmludFdy\naXRlciBnZXRMb2dXcml0ZXIoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gX2RzLmdldExvZ1dyaXRlcigpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldExvZ1dyaXRlcihQcmludFdyaXRlciBvdXQpIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIF9kcy5zZXRMb2dXcml0ZXIob3V0\nKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldExvZ2luVGltZW91dCgpIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZHMuZ2V0TG9n\naW5UaW1lb3V0KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TG9naW5U\naW1lb3V0KGludCB0aW1lb3V0KSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICBfZHMuc2V0TG9naW5UaW1lb3V0KHRpbWVvdXQpOwogICAgfQoKICAg\nIHB1YmxpYyBDb25uZWN0aW9uIGdldENvbm5lY3Rpb24oKSB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2RzLmdldENvbm5lY3Rpb24o\nKTsKICAgIH0KCiAgICBwdWJsaWMgQ29ubmVjdGlvbiBnZXRDb25uZWN0aW9u\nKFN0cmluZyB1c2VyLCBTdHJpbmcgcGFzcykKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICBpZiAodXNlciA9PSBudWxsICYmIHBhc3Mg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIF9kcy5nZXRDb25uZWN0aW9u\nKCk7CiAgICAgICAgcmV0dXJuIF9kcy5nZXRDb25uZWN0aW9uKHVzZXIsIHBh\nc3MpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgaWYgKF9kcyBpbnN0YW5jZW9mIENsb3NlYWJs\nZSkKICAgICAgICAgICAgKChDbG9zZWFibGUpIF9kcykuY2xvc2UoKTsKICAg\nIH0KCiAgICAvLyBqYXZhLnNxbC5XcmFwcGVyIGltcGxlbWVudGF0aW9uIChK\nREJDIDQpCiAgICBwdWJsaWMgYm9vbGVhbiBpc1dyYXBwZXJGb3IoQ2xhc3Mg\naWZhY2UpIHsKICAgICAgICByZXR1cm4gaWZhY2UuaXNBc3NpZ25hYmxlRnJv\nbShnZXREZWxlZ2F0ZSgpLmdldENsYXNzKCkpOwogICAgfQoKICAgIHB1Ymxp\nYyBPYmplY3QgdW53cmFwKENsYXNzIGlmYWNlKSB7CiAgICAgICAgaWYgKGlz\nV3JhcHBlckZvcihpZmFjZSkpCiAgICAgICAgICAgIHJldHVybiBnZXREZWxl\nZ2F0ZSgpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICB9Cn0K\n","encoding":"base64"}

