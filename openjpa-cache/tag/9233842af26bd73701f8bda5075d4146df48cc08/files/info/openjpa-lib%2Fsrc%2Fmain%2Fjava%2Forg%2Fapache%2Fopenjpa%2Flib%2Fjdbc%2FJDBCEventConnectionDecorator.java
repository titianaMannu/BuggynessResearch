{"sha":"d44324fda53752e352a3ec19a601642e0f8566ed","node_id":"MDQ6QmxvYjIwNjM2NDpkNDQzMjRmZGE1Mzc1MmUzNTJhM2VjMTlhNjAxNjQyZTBmODU2NmVk","size":12430,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d44324fda53752e352a3ec19a601642e0f8566ed","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpkYmM7CgppbXBvcnQg\namF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZhLnNx\nbC5Db25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1l\nbnQ7CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7CmltcG9ydCBqYXZhLnNx\nbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnNxbC5TdGF0ZW1lbnQ7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkNvbmNyZXRlQ2xh\nc3NHZW5lcmF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuY29uY3VycmVudC5BYnN0cmFjdENvbmN1cnJlbnRFdmVudE1hbmFnZXI7\nCgovKioKICogTWFuYWdlcyB0aGUgZmlyaW5nIG9mIHtAbGluayBKREJDRXZl\nbnR9cy4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwog\nKi8KQFN1cHByZXNzV2FybmluZ3MoInNlcmlhbCIpCnB1YmxpYyBjbGFzcyBK\nREJDRXZlbnRDb25uZWN0aW9uRGVjb3JhdG9yIGV4dGVuZHMgQWJzdHJhY3RD\nb25jdXJyZW50RXZlbnRNYW5hZ2VyCiAgICBpbXBsZW1lbnRzIENvbm5lY3Rp\nb25EZWNvcmF0b3IgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIENvbnN0\ncnVjdG9yPEV2ZW50Q29ubmVjdGlvbj4gZXZlbnRDb25uZWN0aW9uSW1wbDsK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIENvbnN0cnVjdG9yPEV2ZW50U3Rh\ndGVtZW50PiBldmVudFN0YXRlbWVudEltcGw7CiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBDb25zdHJ1Y3RvcjxFdmVudFByZXBhcmVkU3RhdGVtZW50Pgog\nICAgICAgICAgICBldmVudFByZXBhcmVkU3RhdGVtZW50SW1wbDsKCiAgICBz\ndGF0aWMgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGV2ZW50Q29ubmVj\ndGlvbkltcGwgPSBDb25jcmV0ZUNsYXNzR2VuZXJhdG9yLmdldENvbmNyZXRl\nQ29uc3RydWN0b3IoRXZlbnRDb25uZWN0aW9uLmNsYXNzLAogICAgICAgICAg\nICAgICAgSkRCQ0V2ZW50Q29ubmVjdGlvbkRlY29yYXRvci5jbGFzcywgQ29u\nbmVjdGlvbi5jbGFzcyk7CiAgICAgICAgICAgIGV2ZW50U3RhdGVtZW50SW1w\nbCA9IENvbmNyZXRlQ2xhc3NHZW5lcmF0b3IuZ2V0Q29uY3JldGVDb25zdHJ1\nY3RvcihFdmVudFN0YXRlbWVudC5jbGFzcywKICAgICAgICAgICAgICAgIEpE\nQkNFdmVudENvbm5lY3Rpb25EZWNvcmF0b3IuY2xhc3MsIFN0YXRlbWVudC5j\nbGFzcywgRXZlbnRDb25uZWN0aW9uLmNsYXNzKTsKICAgICAgICAgICAgZXZl\nbnRQcmVwYXJlZFN0YXRlbWVudEltcGwgPSBDb25jcmV0ZUNsYXNzR2VuZXJh\ndG9yLmdldENvbmNyZXRlQ29uc3RydWN0b3IoRXZlbnRQcmVwYXJlZFN0YXRl\nbWVudC5jbGFzcywKICAgICAgICAgICAgICAgIEpEQkNFdmVudENvbm5lY3Rp\nb25EZWNvcmF0b3IuY2xhc3MsIFByZXBhcmVkU3RhdGVtZW50LmNsYXNzLCBF\ndmVudENvbm5lY3Rpb24uY2xhc3MsIFN0cmluZy5jbGFzcyk7CgogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBFeGNlcHRpb25JbkluaXRpYWxpemVyRXJyb3IoZSk7CiAgICAgICAgfQog\nICAgfQoKCiAgICBwdWJsaWMgQ29ubmVjdGlvbiBkZWNvcmF0ZShDb25uZWN0\naW9uIGNvbm4pIHsKICAgICAgICBpZiAoIWhhc0xpc3RlbmVycygpKQogICAg\nICAgICAgICByZXR1cm4gY29ubjsKCiAgICAgICAgcmV0dXJuIENvbmNyZXRl\nQ2xhc3NHZW5lcmF0b3IubmV3SW5zdGFuY2UoZXZlbnRDb25uZWN0aW9uSW1w\nbCwgSkRCQ0V2ZW50Q29ubmVjdGlvbkRlY29yYXRvci50aGlzLCBjb25uKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIEZpcmUgdGhlIGdpdmVuIGV2ZW50IHRv\nIGFsbCBsaXN0ZW5lcnMuIFByZXZlbnRzIGNyZWF0aW9uIG9mIGFuCiAgICAg\nKiBldmVudCBvYmplY3Qgd2hlbiB0aGVyZSBhcmUgbm8gbGlzdGVuZXJzLgog\nICAgICovCiAgICBwcml2YXRlIEpEQkNFdmVudCBmaXJlRXZlbnQoQ29ubmVj\ndGlvbiBzb3VyY2UsIHNob3J0IHR5cGUsCiAgICAgICAgSkRCQ0V2ZW50IGFz\nc29jaWF0ZWRFdmVudCwgU3RhdGVtZW50IHN0bW50LCBTdHJpbmcgc3FsKSB7\nCiAgICAgICAgaWYgKCFoYXNMaXN0ZW5lcnMoKSkKICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CgogICAgICAgIEpEQkNFdmVudCBldmVudCA9IG5ldyBKREJD\nRXZlbnQoc291cmNlLCB0eXBlLCBhc3NvY2lhdGVkRXZlbnQsCiAgICAgICAg\nICAgIHN0bW50LCBzcWwpOwogICAgICAgIGZpcmVFdmVudChldmVudCk7CiAg\nICAgICAgcmV0dXJuIGV2ZW50OwogICAgfQoKICAgIC8qKgogICAgICogRmly\nZSB0aGUgZ2l2ZW4gZXZlbnQgdG8gYWxsIGxpc3RlbmVycy4KICAgICAqLwog\nICAgcHJvdGVjdGVkIHZvaWQgZmlyZUV2ZW50KE9iamVjdCBldmVudCwgT2Jq\nZWN0IGxpc3RlbmVyKSB7CiAgICAgICAgSkRCQ0xpc3RlbmVyIGxpc3RlbiA9\nIChKREJDTGlzdGVuZXIpIGxpc3RlbmVyOwogICAgICAgIEpEQkNFdmVudCBl\ndiA9IChKREJDRXZlbnQpIGV2ZW50OwogICAgICAgIHN3aXRjaCAoZXYuZ2V0\nVHlwZSgpKSB7CiAgICAgICAgICAgIGNhc2UgSkRCQ0V2ZW50LkJFRk9SRV9Q\nUkVQQVJFX1NUQVRFTUVOVDoKICAgICAgICAgICAgICAgIGxpc3Rlbi5iZWZv\ncmVQcmVwYXJlU3RhdGVtZW50KGV2KTsKICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICBjYXNlIEpEQkNFdmVudC5BRlRFUl9QUkVQQVJFX1NU\nQVRFTUVOVDoKICAgICAgICAgICAgICAgIGxpc3Rlbi5hZnRlclByZXBhcmVT\ndGF0ZW1lbnQoZXYpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIGNhc2UgSkRCQ0V2ZW50LkJFRk9SRV9DUkVBVEVfU1RBVEVNRU5UOgog\nICAgICAgICAgICAgICAgbGlzdGVuLmJlZm9yZUNyZWF0ZVN0YXRlbWVudChl\ndik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBK\nREJDRXZlbnQuQUZURVJfQ1JFQVRFX1NUQVRFTUVOVDoKICAgICAgICAgICAg\nICAgIGxpc3Rlbi5hZnRlckNyZWF0ZVN0YXRlbWVudChldik7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKREJDRXZlbnQuQkVG\nT1JFX0VYRUNVVEVfU1RBVEVNRU5UOgogICAgICAgICAgICAgICAgbGlzdGVu\nLmJlZm9yZUV4ZWN1dGVTdGF0ZW1lbnQoZXYpOwogICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSkRCQ0V2ZW50LkFGVEVSX0VYRUNV\nVEVfU1RBVEVNRU5UOgogICAgICAgICAgICAgICAgbGlzdGVuLmFmdGVyRXhl\nY3V0ZVN0YXRlbWVudChldik7CiAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgY2FzZSBKREJDRXZlbnQuQkVGT1JFX0NPTU1JVDoKICAgICAg\nICAgICAgICAgIGxpc3Rlbi5iZWZvcmVDb21taXQoZXYpOwogICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSkRCQ0V2ZW50LkFGVEVS\nX0NPTU1JVDoKICAgICAgICAgICAgICAgIGxpc3Rlbi5hZnRlckNvbW1pdChl\ndik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBK\nREJDRXZlbnQuQkVGT1JFX1JPTExCQUNLOgogICAgICAgICAgICAgICAgbGlz\ndGVuLmJlZm9yZVJvbGxiYWNrKGV2KTsKICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICBjYXNlIEpEQkNFdmVudC5BRlRFUl9ST0xMQkFDSzoK\nICAgICAgICAgICAgICAgIGxpc3Rlbi5hZnRlclJvbGxiYWNrKGV2KTsKICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEpEQkNFdmVu\ndC5BRlRFUl9DT05ORUNUOgogICAgICAgICAgICAgICAgbGlzdGVuLmFmdGVy\nQ29ubmVjdChldik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgY2FzZSBKREJDRXZlbnQuQkVGT1JFX0NMT1NFOgogICAgICAgICAgICAg\nICAgbGlzdGVuLmJlZm9yZUNsb3NlKGV2KTsKICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEZpcmVzIGV2\nZW50cyBhcyBhcHByb3ByaWF0ZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFi\nc3RyYWN0IGNsYXNzIEV2ZW50Q29ubmVjdGlvbiBleHRlbmRzIERlbGVnYXRp\nbmdDb25uZWN0aW9uIHsKCiAgICAgICAgcHVibGljIEV2ZW50Q29ubmVjdGlv\nbihDb25uZWN0aW9uIGNvbm4pIHsKICAgICAgICAgICAgc3VwZXIoY29ubik7\nCiAgICAgICAgICAgIGZpcmVFdmVudChnZXREZWxlZ2F0ZSgpLCBKREJDRXZl\nbnQuQUZURVJfQ09OTkVDVCwgbnVsbCwgbnVsbCwgbnVsbCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBjb21taXQoKSB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgSkRCQ0V2ZW50IGJlZm9yZSA9IGZpcmVF\ndmVudChnZXREZWxlZ2F0ZSgpLAogICAgICAgICAgICAgICAgSkRCQ0V2ZW50\nLkJFRk9SRV9DT01NSVQsIG51bGwsIG51bGwsIG51bGwpOwogICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICAgICAgc3VwZXIuY29tbWl0KCk7CiAgICAg\nICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBmaXJlRXZlbnQo\nZ2V0RGVsZWdhdGUoKSwgSkRCQ0V2ZW50LkFGVEVSX0NPTU1JVCwgYmVmb3Jl\nLAogICAgICAgICAgICAgICAgICAgIG51bGwsIG51bGwpOwogICAgICAgICAg\nICB9CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCByb2xsYmFjaygp\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBKREJDRXZlbnQg\nYmVmb3JlID0gZmlyZUV2ZW50KGdldERlbGVnYXRlKCksCiAgICAgICAgICAg\nICAgICBKREJDRXZlbnQuQkVGT1JFX1JPTExCQUNLLCBudWxsLCBudWxsLCBu\ndWxsKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHN1cGVy\nLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAg\nICAgICAgICBmaXJlRXZlbnQoZ2V0RGVsZWdhdGUoKSwgSkRCQ0V2ZW50LkFG\nVEVSX1JPTExCQUNLLCBiZWZvcmUsCiAgICAgICAgICAgICAgICAgICAgbnVs\nbCwgbnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHBy\nb3RlY3RlZCBTdGF0ZW1lbnQgY3JlYXRlU3RhdGVtZW50KGJvb2xlYW4gd3Jh\ncCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIEpEQkNFdmVu\ndCBiZWZvcmUgPSBmaXJlRXZlbnQoZ2V0RGVsZWdhdGUoKSwKICAgICAgICAg\nICAgICAgIEpEQkNFdmVudC5CRUZPUkVfQ1JFQVRFX1NUQVRFTUVOVCwgbnVs\nbCwgbnVsbCwgbnVsbCk7CiAgICAgICAgICAgIFN0YXRlbWVudCBzdG1udCA9\nIG51bGw7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzdG1u\ndCA9IENvbmNyZXRlQ2xhc3NHZW5lcmF0b3IubmV3SW5zdGFuY2UoZXZlbnRT\ndGF0ZW1lbnRJbXBsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgSkRC\nQ0V2ZW50Q29ubmVjdGlvbkRlY29yYXRvci50aGlzLCBzdXBlci5jcmVhdGVT\ndGF0ZW1lbnQoZmFsc2UpLCBFdmVudENvbm5lY3Rpb24udGhpcyk7CiAgICAg\nICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBmaXJlRXZlbnQo\nZ2V0RGVsZWdhdGUoKSwgSkRCQ0V2ZW50LkFGVEVSX0NSRUFURV9TVEFURU1F\nTlQsCiAgICAgICAgICAgICAgICAgICAgYmVmb3JlLCBzdG1udCwgbnVsbCk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHN0bW50OwogICAg\nICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIFN0YXRlbWVudCBjcmVhdGVTdGF0\nZW1lbnQoaW50IHJzVHlwZSwgaW50IHJzQ29uY3VyLAogICAgICAgICAgICBi\nb29sZWFuIHdyYXApIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAg\nICBKREJDRXZlbnQgYmVmb3JlID0gZmlyZUV2ZW50KGdldERlbGVnYXRlKCks\nCiAgICAgICAgICAgICAgICBKREJDRXZlbnQuQkVGT1JFX0NSRUFURV9TVEFU\nRU1FTlQsIG51bGwsIG51bGwsIG51bGwpOwogICAgICAgICAgICBTdGF0ZW1l\nbnQgc3RtbnQgPSBudWxsOwogICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgc3RtbnQgPSBDb25jcmV0ZUNsYXNzR2VuZXJhdG9yLm5ld0luc3Rh\nbmNlKGV2ZW50U3RhdGVtZW50SW1wbCwKICAgICAgICAgICAgICAgICAgICAg\nICAgSkRCQ0V2ZW50Q29ubmVjdGlvbkRlY29yYXRvci5jbGFzcywKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIEpEQkNFdmVudENvbm5lY3Rpb25EZWNv\ncmF0b3IudGhpcywKICAgICAgICAgICAgICAgICAgICAgICAgU3RhdGVtZW50\nLmNsYXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwZXIuY3Jl\nYXRlU3RhdGVtZW50KHJzVHlwZSwgcnNDb25jdXIsIGZhbHNlKSwKICAgICAg\nICAgICAgICAgICAgICAgICAgRXZlbnRDb25uZWN0aW9uLmNsYXNzLCBFdmVu\ndENvbm5lY3Rpb24udGhpcyk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAg\nICAgICAgICAgICAgICBmaXJlRXZlbnQoZ2V0RGVsZWdhdGUoKSwgSkRCQ0V2\nZW50LkFGVEVSX0NSRUFURV9TVEFURU1FTlQsCiAgICAgICAgICAgICAgICAg\nICAgYmVmb3JlLCBzdG1udCwgbnVsbCk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgcmV0dXJuIHN0bW50OwogICAgICAgIH0KCiAgICAgICAgcHJvdGVj\ndGVkIFByZXBhcmVkU3RhdGVtZW50IHByZXBhcmVTdGF0ZW1lbnQoU3RyaW5n\nIHNxbCwgYm9vbGVhbiB3cmFwKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgSkRCQ0V2ZW50IGJlZm9yZSA9IGZpcmVF\ndmVudChnZXREZWxlZ2F0ZSgpLAogICAgICAgICAgICAgICAgSkRCQ0V2ZW50\nLkJFRk9SRV9QUkVQQVJFX1NUQVRFTUVOVCwgbnVsbCwgbnVsbCwgc3FsKTsK\nICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtbnQgPSBudWxsOwog\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc3RtbnQgPSBDb25j\ncmV0ZUNsYXNzR2VuZXJhdG9yLm5ld0luc3RhbmNlKGV2ZW50UHJlcGFyZWRT\ndGF0ZW1lbnRJbXBsLCAKICAgICAgICAgICAgICAgICAgICBKREJDRXZlbnRD\nb25uZWN0aW9uRGVjb3JhdG9yLnRoaXMsIHN1cGVyLnByZXBhcmVTdGF0ZW1l\nbnQoc3FsLCBmYWxzZSksIEV2ZW50Q29ubmVjdGlvbi50aGlzLCBzcWwpOwog\nICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgZmlyZUV2\nZW50KGdldERlbGVnYXRlKCksIEpEQkNFdmVudC5BRlRFUl9QUkVQQVJFX1NU\nQVRFTUVOVCwKICAgICAgICAgICAgICAgICAgICBiZWZvcmUsIHN0bW50LCBz\ncWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzdG1udDsK\nICAgICAgICB9CgogICAgICAgIHByb3RlY3RlZCBQcmVwYXJlZFN0YXRlbWVu\ndCBwcmVwYXJlU3RhdGVtZW50KFN0cmluZyBzcWwsIGludCByc1R5cGUsCiAg\nICAgICAgICAgIGludCByc0NvbmN1ciwgYm9vbGVhbiB3cmFwKSB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgSkRCQ0V2ZW50IGJlZm9yZSA9\nIGZpcmVFdmVudChnZXREZWxlZ2F0ZSgpLAogICAgICAgICAgICAgICAgSkRC\nQ0V2ZW50LkJFRk9SRV9QUkVQQVJFX1NUQVRFTUVOVCwgbnVsbCwgbnVsbCwg\nc3FsKTsKICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtbnQgPSBu\ndWxsOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc3RtbnQg\nPSBDb25jcmV0ZUNsYXNzR2VuZXJhdG9yLgogICAgICAgICAgICAgICAgICAg\nIG5ld0luc3RhbmNlKGV2ZW50UHJlcGFyZWRTdGF0ZW1lbnRJbXBsLAogICAg\nICAgICAgICAgICAgICAgICAgICBKREJDRXZlbnRDb25uZWN0aW9uRGVjb3Jh\ndG9yLmNsYXNzLCAKICAgICAgICAgICAgICAgICAgICAgICAgSkRCQ0V2ZW50\nQ29ubmVjdGlvbkRlY29yYXRvci50aGlzLAogICAgICAgICAgICAgICAgICAg\nICAgICBQcmVwYXJlZFN0YXRlbWVudC5jbGFzcywKICAgICAgICAgICAgICAg\nICAgICAgICAgc3VwZXIucHJlcGFyZVN0YXRlbWVudChzcWwsIHJzVHlwZSwg\ncnNDb25jdXIsIGZhbHNlKSwKICAgICAgICAgICAgICAgICAgICAgICAgRXZl\nbnRDb25uZWN0aW9uLmNsYXNzLCBFdmVudENvbm5lY3Rpb24udGhpcywKICAg\nICAgICAgICAgICAgICAgICAgICAgU3RyaW5nLmNsYXNzLCBzcWwpOwogICAg\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgZmlyZUV2ZW50\nKGdldERlbGVnYXRlKCksIEpEQkNFdmVudC5BRlRFUl9QUkVQQVJFX1NUQVRF\nTUVOVCwKICAgICAgICAgICAgICAgICAgICBiZWZvcmUsIHN0bW50LCBzcWwp\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzdG1udDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICBmaXJlRXZlbnQoZ2V0RGVsZWdhdGUoKSwgSkRCQ0V2ZW50LkJFRk9SRV9D\nTE9TRSwKICAgICAgICAgICAgICAgICAgICBudWxsLCBudWxsLCBudWxsKTsK\nICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIHN1cGVy\nLmNsb3NlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBGaXJlcyBldmVudHMgYXMgYXBwcm9wcmlhdGUuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjbGFzcyBFdmVudFByZXBhcmVk\nU3RhdGVtZW50IGV4dGVuZHMKICAgICAgICAgICAgRGVsZWdhdGluZ1ByZXBh\ncmVkU3RhdGVtZW50IHsKCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBFdmVudENv\nbm5lY3Rpb24gX2Nvbm47CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmcg\nX3NxbDsKCiAgICAgICAgcHVibGljIEV2ZW50UHJlcGFyZWRTdGF0ZW1lbnQo\nUHJlcGFyZWRTdGF0ZW1lbnQgcHMsCiAgICAgICAgICAgIEV2ZW50Q29ubmVj\ndGlvbiBjb25uLCBTdHJpbmcgc3FsKSB7CiAgICAgICAgICAgIHN1cGVyKHBz\nLCBjb25uKTsKICAgICAgICAgICAgX2Nvbm4gPSBjb25uOwogICAgICAgICAg\nICBfc3FsID0gc3FsOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGludCBl\neGVjdXRlVXBkYXRlKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nICAgIEpEQkNFdmVudCBiZWZvcmUgPSBmaXJlRXZlbnQoX2Nvbm4uZ2V0RGVs\nZWdhdGUoKSwKICAgICAgICAgICAgICAgIEpEQkNFdmVudC5CRUZPUkVfRVhF\nQ1VURV9TVEFURU1FTlQsIG51bGwsIGdldERlbGVnYXRlKCksIF9zcWwpOwog\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVy\nLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgICAgIGZpcmVFdmVudChfY29ubi5nZXREZWxlZ2F0ZSgpLAog\nICAgICAgICAgICAgICAgICAgIEpEQkNFdmVudC5BRlRFUl9FWEVDVVRFX1NU\nQVRFTUVOVCwgYmVmb3JlLAogICAgICAgICAgICAgICAgICAgIGdldERlbGVn\nYXRlKCksIF9zcWwpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAg\nICBwcm90ZWN0ZWQgUmVzdWx0U2V0IGV4ZWN1dGVRdWVyeShib29sZWFuIHdy\nYXApIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBKREJDRXZl\nbnQgYmVmb3JlID0gZmlyZUV2ZW50KF9jb25uLmdldERlbGVnYXRlKCksCiAg\nICAgICAgICAgICAgICBKREJDRXZlbnQuQkVGT1JFX0VYRUNVVEVfU1RBVEVN\nRU5ULCBudWxsLCBnZXREZWxlZ2F0ZSgpLCBfc3FsKTsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5leGVjdXRlUXVl\ncnkod3JhcCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAg\nICAgICBmaXJlRXZlbnQoX2Nvbm4uZ2V0RGVsZWdhdGUoKSwKICAgICAgICAg\nICAgICAgICAgICBKREJDRXZlbnQuQUZURVJfRVhFQ1VURV9TVEFURU1FTlQs\nIGJlZm9yZSwKICAgICAgICAgICAgICAgICAgICBnZXREZWxlZ2F0ZSgpLCBf\nc3FsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGludFtdIGV4ZWN1dGVCYXRjaCgpIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgICAgICBKREJDRXZlbnQgYmVmb3JlID0gZmlyZUV2ZW50KF9jb25u\nLmdldERlbGVnYXRlKCksCiAgICAgICAgICAgICAgICBKREJDRXZlbnQuQkVG\nT1JFX0VYRUNVVEVfU1RBVEVNRU5ULCBudWxsLCBnZXREZWxlZ2F0ZSgpLCBf\nc3FsKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVy\nbiBzdXBlci5leGVjdXRlQmF0Y2goKTsKICAgICAgICAgICAgfSBmaW5hbGx5\nIHsKICAgICAgICAgICAgICAgIGZpcmVFdmVudChfY29ubi5nZXREZWxlZ2F0\nZSgpLAogICAgICAgICAgICAgICAgICAgIEpEQkNFdmVudC5BRlRFUl9FWEVD\nVVRFX1NUQVRFTUVOVCwgYmVmb3JlLAogICAgICAgICAgICAgICAgICAgIGdl\ndERlbGVnYXRlKCksIF9zcWwpOwogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogRmlyZXMgZXZlbnRzIGFzIGFwcHJvcHJp\nYXRlLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgY2xhc3MgRXZl\nbnRTdGF0ZW1lbnQgZXh0ZW5kcyBEZWxlZ2F0aW5nU3RhdGVtZW50IHsKCiAg\nICAgICAgcHJpdmF0ZSBmaW5hbCBFdmVudENvbm5lY3Rpb24gX2Nvbm47Cgog\nICAgICAgIHB1YmxpYyBFdmVudFN0YXRlbWVudChTdGF0ZW1lbnQgc3RtbnQs\nIEV2ZW50Q29ubmVjdGlvbiBjb25uKSB7CiAgICAgICAgICAgIHN1cGVyKHN0\nbW50LCBjb25uKTsKICAgICAgICAgICAgX2Nvbm4gPSBjb25uOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIGludCBleGVjdXRlVXBkYXRlKFN0cmluZyBz\ncWwpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBKREJDRXZl\nbnQgYmVmb3JlID0gZmlyZUV2ZW50KF9jb25uLmdldERlbGVnYXRlKCksCiAg\nICAgICAgICAgICAgICBKREJDRXZlbnQuQkVGT1JFX0VYRUNVVEVfU1RBVEVN\nRU5ULCBudWxsLCBnZXREZWxlZ2F0ZSgpLCBzcWwpOwogICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmV4ZWN1dGVVcGRh\ndGUoc3FsKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\nICAgIGZpcmVFdmVudChfY29ubi5nZXREZWxlZ2F0ZSgpLAogICAgICAgICAg\nICAgICAgICAgIEpEQkNFdmVudC5BRlRFUl9FWEVDVVRFX1NUQVRFTUVOVCwg\nYmVmb3JlLAogICAgICAgICAgICAgICAgICAgIGdldERlbGVnYXRlKCksIHNx\nbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHByb3RlY3Rl\nZCBSZXN1bHRTZXQgZXhlY3V0ZVF1ZXJ5KFN0cmluZyBzcWwsIGJvb2xlYW4g\nd3JhcCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgICAgIEpEQkNFdmVudCBiZWZvcmUgPSBmaXJlRXZlbnQoX2Nvbm4uZ2V0\nRGVsZWdhdGUoKSwKICAgICAgICAgICAgICAgIEpEQkNFdmVudC5CRUZPUkVf\nRVhFQ1VURV9TVEFURU1FTlQsIG51bGwsIGdldERlbGVnYXRlKCksIHNxbCk7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc3Vw\nZXIuZXhlY3V0ZVF1ZXJ5KHNxbCwgd3JhcCk7CiAgICAgICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgICAgICBmaXJlRXZlbnQoX2Nvbm4uZ2V0RGVs\nZWdhdGUoKSwKICAgICAgICAgICAgICAgICAgICBKREJDRXZlbnQuQUZURVJf\nRVhFQ1VURV9TVEFURU1FTlQsIGJlZm9yZSwKICAgICAgICAgICAgICAgICAg\nICBnZXREZWxlZ2F0ZSgpLCBzcWwpOwogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgfQp9Cg==\n","encoding":"base64"}

