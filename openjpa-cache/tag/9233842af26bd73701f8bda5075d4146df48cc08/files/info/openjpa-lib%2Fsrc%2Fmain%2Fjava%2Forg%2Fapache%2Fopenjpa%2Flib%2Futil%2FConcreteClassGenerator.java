{"sha":"3f32dd05cc29d62b52f388e3ebb39184cab58b7a","node_id":"MDQ6QmxvYjIwNjM2NDozZjMyZGQwNWNjMjlkNjJiNTJmMzg4ZTNlYmIzOTE4NGNhYjU4Yjdh","size":7412,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3f32dd05cc29d62b52f388e3ebb39184cab58b7a","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbDsKCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5D\nb25zdHJ1Y3RvcjsKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0Lk1vZGlmaWVy\nOwppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBv\ncnQgamF2YS51dGlsLkFycmF5czsKCmltcG9ydCBzZXJwLmJ5dGVjb2RlLkJD\nQ2xhc3M7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLkJDQ2xhc3NMb2FkZXI7Cmlt\ncG9ydCBzZXJwLmJ5dGVjb2RlLkJDTWV0aG9kOwppbXBvcnQgc2VycC5ieXRl\nY29kZS5Db2RlOwppbXBvcnQgc2VycC5ieXRlY29kZS5Qcm9qZWN0OwoKLyoq\nCiAqIER5bmFtaWNhbGx5IGdlbmVyYXRlcyBjb25jcmV0ZSBpbXBsZW1lbnRh\ndGlvbnMgb2YgYWJzdHJhY3QgY2xhc3Nlcy4KICoKICogQGF1dGhvciBNYXJj\nIFBydWQnaG9tbWVhdXgKICogQGF1dGhvciBQaW5ha2kgUG9kZGFyCiAqIAog\nKiBAbm9qYXZhZG9jCiAqIEBzaW5jZSAxLjMuMAogKi8KcHVibGljIGNsYXNz\nIENvbmNyZXRlQ2xhc3NHZW5lcmF0b3IgewogICAgLyoqCiAgICAgKiBHZXQg\ndGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBjb25jcmV0ZSwgZHluYW1pYyB3cmFw\ncGVyIGNsYXNzIG9mIHRoZSBnaXZlbiBhYnN0cmFjdCBjbGFzcyAKICAgICAq\nIHdpdGggbWF0Y2hpbmcgYXJndW1lbnQgdHlwZXMuCiAgICAgKiBAcGFyYW0g\ndGhlIGFyZ1R5cGVzIG9mIHRoZSBjb25zdHJ1Y3RvciB0byBsb29rIGZvci4g\nbnVsbCBzaWduaWZ5IGRlZmF1bHQgY29uc3RydWN0b3IuCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgPFQ+IENvbnN0cnVjdG9yPFQ+IGdldENvbmNyZXRl\nQ29uc3RydWN0b3IoQ2xhc3M8VD4gYWJzdHJhY3RDbGFzcywgQ2xhc3M8Pz4u\nLi4gYXJnVHlwZXMpCiAgICB0aHJvd3MgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlv\nbiB7CiAgICAgICAgQ2xhc3M8PyBleHRlbmRzIFQ+IGNscyA9IG1ha2VDb25j\ncmV0ZShhYnN0cmFjdENsYXNzKTsKICAgICAgICBDb25zdHJ1Y3Rvcjw/Pltd\nIGNvbnN0cnVjdG9ycyA9IGNscy5nZXRDb25zdHJ1Y3RvcnMoKTsKICAgICAg\nICBpbnQgYXJncyA9IGFyZ1R5cGVzID09IG51bGwgPyAwIDogYXJnVHlwZXMu\nbGVuZ3RoOwogICAgICAgIGZvciAoQ29uc3RydWN0b3I8Pz4gY29ucyA6IGNv\nbnN0cnVjdG9ycykgewogICAgICAgICAgICBDbGFzczw/PltdIHBhcmFtcyA9\nIGNvbnMuZ2V0UGFyYW1ldGVyVHlwZXMoKTsKICAgICAgICAgICAgaWYgKHBh\ncmFtcy5sZW5ndGggIT0gYXJncykKICAgICAgICAgICAgICAgIGNvbnRpbnVl\nOwogICAgICAgICAgICBib29sZWFuIG1hdGNoID0gZmFsc2U7CiAgICAgICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgICAgICBtYXRjaCA9IHBhcmFtc1tpXS5pc0Fzc2lnbmFi\nbGVGcm9tKGFyZ1R5cGVzW2ldKTsKICAgICAgICAgICAgICAgIGlmICghbWF0\nY2gpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICByZXR1\ncm4gKENvbnN0cnVjdG9yPFQ+KWNvbnM7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oYWJzdHJh\nY3RDbGFzcyArICIgaGFzIG5vIGNvbnN0cnVjdG9yIHdpdGggIiArIAogICAg\nICAgICAgICAgICAgKGFyZ3MgPT0gMCA/ICJ2b2lkIiA6IEFycmF5cy50b1N0\ncmluZyhhcmdUeXBlcykpKTsKICAgIH0KICAgIAogICAgLyoqIAogICAgICog\nIFRha2VzIGFuIGFic3RyYWN0IGNsYXNzIGFuZCByZXR1cm5zIGEgY29uY3Jl\ndGUgaW1wbGVtZW50YXRpb24uIE5vdGUKICAgICAqICB0aGF0IGl0IGRvZXNu\nJ3QgYWN0dWFsbHkgaW1wbGVtZW50IGFueSBhYnN0cmFjdCBtZXRob2RzLCBp\ndAogICAgICogIG1lcmVseSBtYWtlcyBhbiBhYnN0cmFjdCBjbGFzcyBsb2Fk\nYWJsZS4gQWJzdHJhY3QgbWV0aG9kcyB3aWxsCiAgICAgKiAgdGhyb3cgYSB7\nQGxpbmsgQWJzdHJhY3RNZXRob2RFcnJvcn0uCiAgICAgKiAgCiAgICAgKiAg\nQHBhcmFtICBhYnN0cmFjdENsYXNzICB0aGUgYWJzdHJhY3QgY2xhc3MKICAg\nICAqICBAcmV0dXJuIGEgY29uY3JldGUgY2xhc3MKICAgICAqLwogICAgcHVi\nbGljIHN0YXRpYyA8VD4gQ2xhc3M8PyBleHRlbmRzIFQ+IG1ha2VDb25jcmV0\nZShDbGFzczxUPiBhYnN0cmFjdENsYXNzKQogICAgICAgIHRocm93cyBDbGFz\nc05vdEZvdW5kRXhjZXB0aW9uIHsKICAgICAgICBpZiAoYWJzdHJhY3RDbGFz\ncyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAg\naWYgKCFNb2RpZmllci5pc0Fic3RyYWN0KGFic3RyYWN0Q2xhc3MuZ2V0TW9k\naWZpZXJzKCkpKQogICAgICAgICAgICByZXR1cm4gYWJzdHJhY3RDbGFzczsK\nCiAgICAgICAgUHJvamVjdCBwcm9qZWN0ID0gbmV3IFByb2plY3QoKTsKICAg\nICAgICBCQ0NsYXNzTG9hZGVyIGxvYWRlciA9IEFjY2Vzc0NvbnRyb2xsZXIu\nZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyCiAgICAgICAgICAgIC5uZXdC\nQ0NsYXNzTG9hZGVyQWN0aW9uKHByb2plY3QsIGFic3RyYWN0Q2xhc3MuZ2V0\nQ2xhc3NMb2FkZXIoKSkpOwoKICAgICAgICBTdHJpbmcgbmFtZSA9IGFic3Ry\nYWN0Q2xhc3MuZ2V0TmFtZSgpKyJfIjsKICAgICAgICBCQ0NsYXNzIGJjID0g\nQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoSjJEb1ByaXZIZWxwZXIu\nCiAgICAgICAgICAgIGxvYWRQcm9qZWN0Q2xhc3NBY3Rpb24ocHJvamVjdCwg\nbmFtZSkpOwogICAgICAgIAogICAgICAgIGJjLnNldFN1cGVyY2xhc3MoYWJz\ndHJhY3RDbGFzcyk7CgogICAgICAgIENvbnN0cnVjdG9yPD8+W10gY29uc3Ry\ndWN0b3JzID0gYWJzdHJhY3RDbGFzcy5nZXRDb25zdHJ1Y3RvcnMoKTsKICAg\nICAgICBpZiAoY29uc3RydWN0b3JzID09IG51bGwgfHwgY29uc3RydWN0b3Jz\nLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIGJjLmFkZERlZmF1bHRDb25z\ndHJ1Y3RvcigpLm1ha2VQdWJsaWMoKTsKICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbnN0cnVjdG9ycy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICAgICAgQ29uc3RydWN0b3I8Pz4gY29u\nID0gY29uc3RydWN0b3JzW2ldOwogICAgICAgICAgICAgICAgQ2xhc3M8Pz5b\nXSBhcmdzID0gY29uLmdldFBhcmFtZXRlclR5cGVzKCk7CgogICAgICAgICAg\nICAgICAgQkNNZXRob2QgYmNjb24gPSBiYy5kZWNsYXJlTWV0aG9kKCI8aW5p\ndD4iLCB2b2lkLmNsYXNzLCBhcmdzKTsKICAgICAgICAgICAgICAgIENvZGUg\nY29kZSA9IGJjY29uLmdldENvZGUodHJ1ZSk7CgogICAgICAgICAgICAgICAg\nY29kZS54bG9hZCgpLnNldFRoaXMoKTsKCiAgICAgICAgICAgICAgICBmb3Ig\nKGludCBqID0gMDsgaiA8IGFyZ3MubGVuZ3RoOyBqKyspIHsKICAgICAgICAg\nICAgICAgICAgICBjb2RlLmFsb2FkKCkuc2V0UGFyYW0oaik7CiAgICAgICAg\nICAgICAgICAgICAgY29kZS5jaGVja2Nhc3QoKS5zZXRUeXBlKGFyZ3Nbal0p\nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvZGUuaW52\nb2tlc3BlY2lhbCgpLnNldE1ldGhvZChhYnN0cmFjdENsYXNzLCAiPGluaXQ+\nIiwgdm9pZC5jbGFzcywgYXJncyk7CiAgICAgICAgICAgICAgICBjb2RlLnZy\nZXR1cm4oKTsKCiAgICAgICAgICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heFN0\nYWNrKCk7CiAgICAgICAgICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heExvY2Fs\ncygpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBDbGFzczw/\nPiBjbHMgPSBDbGFzcy5mb3JOYW1lKGJjLmdldE5hbWUoKSwgZmFsc2UsIGxv\nYWRlcik7CiAgICAgICAgcmV0dXJuIChDbGFzczw/IGV4dGVuZHMgVD4pY2xz\nOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0IGEgbmV3IGluc3Rh\nbmNlIGJ5IHRoZSBnaXZlbiBjb25zdHJ1Y3RvciBhbmQgaXRzIGFyZ3VtZW50\ncy4KICAgICAqIEhvcGVmdWxseSBmYXN0ZXIgdGhhbiBsb29raW5nIGZvciBj\nb25zdHJ1Y3RvciBpbiBvdmVybG9hZGVkIGltcGxlbWVudGF0aW9ucy4gCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgPFQ+IFQgbmV3SW5zdGFuY2UoQ29u\nc3RydWN0b3I8VD4gY29ucywgT2JqZWN0Li4uIHBhcmFtcykgewogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBjb25zLm5ld0luc3RhbmNlKHBh\ncmFtcyk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbkluSW5pdGlhbGl6ZXJFcnJvcihl\nKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKiAKICAgICAqICBVdGls\naXR5IG1ldGhvZCBmb3Igc2FmZWx5IGludm9raW5nIGEgY29uc3RydWN0b3Ig\ndGhhdCB3ZSBkbwogICAgICogIG5vdCBleHBlY3QgdG8gdGhyb3cgZXhjZXB0\naW9ucy4gCiAgICAgKiAgCiAgICAgKiAgQHBhcmFtICBjICAgICAgICAgIHRo\nZSBjbGFzcyB0byBjb25zdHJ1Y3QKICAgICAqICBAcGFyYW0gIHBhcmFtVHlw\nZXMgdGhlIHR5cGVzIG9mIHRoZSBwYXJhbWV0ZXJzCiAgICAgKiAgQHBhcmFt\nICBwYXJhbXMgICAgIHRoZSBwYXJhbWV0ZXIgdmFsdWVzCiAgICAgKiAgQHJl\ndHVybiAgICAgICAgICAgIHRoZSBuZXcgaW5zdGFuY2UKICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyA8VD4gVCBuZXdJbnN0YW5jZShDbGFzczxUPiBjLCBD\nbGFzczw/PltdIHBhcmFtVHlwZXMsIE9iamVjdFtdIHBhcmFtcykgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBjLmdldENvbnN0cnVjdG9y\nKHBhcmFtVHlwZXMpLm5ld0luc3RhbmNlKHBhcmFtcyk7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEV4\nY2VwdGlvbkluSW5pdGlhbGl6ZXJFcnJvcihlKTsKICAgICAgICB9CiAgICB9\nCgogICAgLyoqIAogICAgICogIEBzZWUgI25ld0luc3RhbmNlKGphdmEubGFu\nZy5DbGFzcyxqYXZhLmxhbmcuQ2xhc3NbXSxqYXZhLmxhbmcuT2JqZWN0W10p\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgPFQ+IFQgbmV3SW5zdGFuY2Uo\nQ2xhc3M8VD4gYykgewogICAgICAgIHJldHVybiBuZXdJbnN0YW5jZShjLCBu\nZXcgQ2xhc3NbXSB7IH0sIG5ldyBPYmplY3RbXSB7IH0pOwogICAgfQoKICAg\nIC8qKiAKICAgICAqICBAc2VlICNuZXdJbnN0YW5jZShqYXZhLmxhbmcuQ2xh\nc3MsamF2YS5sYW5nLkNsYXNzW10samF2YS5sYW5nLk9iamVjdFtdKQogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIDxULFA+IFQgbmV3SW5zdGFuY2UoQ2xh\nc3M8VD4gYywgQ2xhc3M8PyBleHRlbmRzIFA+IHBhcmFtVHlwZSwgUCBwYXJh\nbSkgewogICAgICAgIHJldHVybiBuZXdJbnN0YW5jZShjLAogICAgICAgICAg\nICBuZXcgQ2xhc3NbXSB7IHBhcmFtVHlwZSB9LAogICAgICAgICAgICBuZXcg\nT2JqZWN0W10geyBwYXJhbSB9KTsKICAgIH0KCiAgICAvKiogCiAgICAgKiAg\nQHNlZSAjbmV3SW5zdGFuY2UoamF2YS5sYW5nLkNsYXNzLGphdmEubGFuZy5D\nbGFzc1tdLGphdmEubGFuZy5PYmplY3RbXSkKICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyA8VCxQMSxQMj4gVCBuZXdJbnN0YW5jZShDbGFzczxUPiBjLCBD\nbGFzczw/IGV4dGVuZHMgUDE+IHBhcmFtVHlwZTEsIFAxIHBhcmFtMSwKICAg\nICAgICBDbGFzczw/IGV4dGVuZHMgUDI+IHBhcmFtVHlwZTIsIFAyIHBhcmFt\nMikgewogICAgICAgIHJldHVybiBuZXdJbnN0YW5jZShjLAogICAgICAgICAg\nICBuZXcgQ2xhc3NbXSB7IHBhcmFtVHlwZTEsIHBhcmFtVHlwZTIgfSwKICAg\nICAgICAgICAgbmV3IE9iamVjdFtdIHsgcGFyYW0xLCBwYXJhbTIgfSk7CiAg\nICB9CgogICAgLyoqIAogICAgICogIEBzZWUgI25ld0luc3RhbmNlKGphdmEu\nbGFuZy5DbGFzcyxqYXZhLmxhbmcuQ2xhc3NbXSxqYXZhLmxhbmcuT2JqZWN0\nW10pCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgPFQsUDEsUDIsUDM+IFQg\nbmV3SW5zdGFuY2UoQ2xhc3M8VD4gYywgQ2xhc3M8PyBleHRlbmRzIFAxPiBw\nYXJhbVR5cGUxLCBQMSBwYXJhbTEsCiAgICAgICAgQ2xhc3M8PyBleHRlbmRz\nIFAyPiBwYXJhbVR5cGUyLCBQMiBwYXJhbTIsIENsYXNzPD8gZXh0ZW5kcyBQ\nMz4gcGFyYW1UeXBlMywgUDMgcGFyYW0zKSB7CiAgICAgICAgcmV0dXJuIG5l\nd0luc3RhbmNlKGMsCiAgICAgICAgICAgIG5ldyBDbGFzc1tdIHsgcGFyYW1U\neXBlMSwgcGFyYW1UeXBlMiwgcGFyYW1UeXBlMyB9LAogICAgICAgICAgICBu\nZXcgT2JqZWN0W10geyBwYXJhbTEsIHBhcmFtMiwgcGFyYW0zIH0pOwogICAg\nfQoKICAgIC8qKiAKICAgICAqICBAc2VlICNuZXdJbnN0YW5jZShqYXZhLmxh\nbmcuQ2xhc3MsamF2YS5sYW5nLkNsYXNzW10samF2YS5sYW5nLk9iamVjdFtd\nKQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIDxULFAxLFAyLFAzLFA0PiBU\nIG5ld0luc3RhbmNlKENsYXNzPFQ+IGMsIENsYXNzPD8gZXh0ZW5kcyBQMT4g\ncGFyYW1UeXBlMSwgUDEgcGFyYW0xLAogICAgICAgIENsYXNzPD8gZXh0ZW5k\ncyBQMj4gcGFyYW1UeXBlMiwgUDIgcGFyYW0yLCBDbGFzczw/IGV4dGVuZHMg\nUDM+IHBhcmFtVHlwZTMsIFAzIHBhcmFtMywKICAgICAgICBDbGFzczw/IGV4\ndGVuZHMgUDQ+IHBhcmFtVHlwZTQsIFA0IHBhcmFtNCkgewogICAgICAgIHJl\ndHVybiBuZXdJbnN0YW5jZShjLAogICAgICAgICAgICBuZXcgQ2xhc3NbXSB7\nIHBhcmFtVHlwZTEsIHBhcmFtVHlwZTIsIHBhcmFtVHlwZTMsIHBhcmFtVHlw\nZTQgfSwKICAgICAgICAgICAgbmV3IE9iamVjdFtdIHsgcGFyYW0xLCBwYXJh\nbTIsIHBhcmFtMywgcGFyYW00IH0pOwogICAgfQp9Cgo=\n","encoding":"base64"}

