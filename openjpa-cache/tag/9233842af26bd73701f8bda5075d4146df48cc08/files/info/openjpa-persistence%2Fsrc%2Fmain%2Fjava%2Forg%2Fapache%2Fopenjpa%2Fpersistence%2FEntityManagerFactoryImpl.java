{"sha":"3014ae54fa2bb47023709e82a241e4647e7e3309","node_id":"MDQ6QmxvYjIwNjM2NDozMDE0YWU1NGZhMmJiNDcwMjM3MDllODJhMjQxZTQ2NDdlN2UzMzA5","size":11410,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3014ae54fa2bb47023709e82a241e4647e7e3309","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZh\nLmxhbmcucmVmbGVjdC5JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uOwppbXBv\ncnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGls\nLlNldDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5DYWNoZTsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2VVbml0VXRpbDsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLnNwaS5Mb2FkU3RhdGU7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkF1dG9EZXRhY2g7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQnJva2VyRmFjdG9yeTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRGVsZWdhdGluZ0Jy\nb2tlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkRlbGVnYXRpbmdGZXRjaENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5WYWx1ZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5DbG9zZWFibGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNyaXRlcmlh\nLkNyaXRlcmlhQnVpbGRlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5tZXRhLk1ldGFtb2RlbEltcGw7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnkuT3BlbkpQQVF1ZXJ5QnVp\nbGRlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5x\ndWVyeS5RdWVyeUJ1aWxkZXJJbXBsOwoKLyoqCiAqIEltcGxlbWVudGF0aW9u\nIG9mIHtAbGluayBFbnRpdHlNYW5hZ2VyRmFjdG9yeX0gdGhhdCBhY3RzIGFz\nIGEKICogZmFjYWRlIHRvIGEge0BsaW5rIEJyb2tlckZhY3Rvcnl9LgogKgog\nKiBAYXV0aG9yIE1hcmMgUHJ1ZCdob21tZWF1eAogKiBAbm9qYXZhZG9jCiAq\nLwpAU3VwcHJlc3NXYXJuaW5ncygic2VyaWFsIikKcHVibGljIGNsYXNzIEVu\ndGl0eU1hbmFnZXJGYWN0b3J5SW1wbAogICAgaW1wbGVtZW50cyBPcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3RvcnksIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFj\ndG9yeVNQSSwKICAgIENsb3NlYWJsZSwgUGVyc2lzdGVuY2VVbml0VXRpbCB7\nCgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBM\nb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChFbnRpdHlNYW5hZ2VyRmFj\ndG9yeUltcGwuY2xhc3MpOwoKICAgIHByaXZhdGUgRGVsZWdhdGluZ0Jyb2tl\nckZhY3RvcnkgX2ZhY3RvcnkgPSBudWxsOwogICAgcHJpdmF0ZSB0cmFuc2ll\nbnQgQ29uc3RydWN0b3I8RmV0Y2hQbGFuPiBfcGxhbiA9IG51bGw7CiAgICBw\ncml2YXRlIHRyYW5zaWVudCBTdG9yZUNhY2hlIF9jYWNoZSA9IG51bGw7CiAg\nICBwcml2YXRlIHRyYW5zaWVudCBRdWVyeVJlc3VsdENhY2hlIF9xdWVyeUNh\nY2hlID0gbnVsbDsKICAgIHByaXZhdGUgdHJhbnNpZW50IE1ldGFtb2RlbElt\ncGwgX21ldGFNb2RlbDsKICAgIAogICAgLyoqCiAgICAgKiBEZWZhdWx0IGNv\nbnN0cnVjdG9yIHByb3ZpZGVkIGZvciBhdXRvLWluc3RhbnRpYXRpb24uCiAg\nICAgKi8KICAgIHB1YmxpYyBFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwoKSB7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBTdXBwbHkgZGVsZWdhdGUgb24gY29u\nc3RydWN0aW9uLgogICAgICovCiAgICBwdWJsaWMgRW50aXR5TWFuYWdlckZh\nY3RvcnlJbXBsKEJyb2tlckZhY3RvcnkgZmFjdG9yeSkgewogICAgICAgIHNl\ndEJyb2tlckZhY3RvcnkoZmFjdG9yeSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBEZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIEJyb2tlckZhY3Rvcnkg\nZ2V0QnJva2VyRmFjdG9yeSgpIHsKICAgICAgICByZXR1cm4gX2ZhY3Rvcnku\nZ2V0RGVsZWdhdGUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIERlbGVnYXRl\nIG11c3QgYmUgcHJvdmlkZWQgYmVmb3JlIHVzZS4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0QnJva2VyRmFjdG9yeShCcm9rZXJGYWN0b3J5IGZhY3Rv\ncnkpIHsKICAgICAgICBfZmFjdG9yeSA9IG5ldyBEZWxlZ2F0aW5nQnJva2Vy\nRmFjdG9yeShmYWN0b3J5LAogICAgICAgICAgICBQZXJzaXN0ZW5jZUV4Y2Vw\ndGlvbnMuVFJBTlNMQVRPUik7CiAgICB9CgogICAgcHVibGljIE9wZW5KUEFD\nb25maWd1cmF0aW9uIGdldENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgcmV0\ndXJuIF9mYWN0b3J5LmdldENvbmZpZ3VyYXRpb24oKTsKICAgIH0KICAgIAog\nICAgcHVibGljIE1hcDxTdHJpbmcsT2JqZWN0PiBnZXRQcm9wZXJ0aWVzKCkg\newogICAgICAgIE1hcDxTdHJpbmcsT2JqZWN0PiBwcm9wcyA9IF9mYWN0b3J5\nLmdldFByb3BlcnRpZXMoKTsKICAgICAgICAvLyBjb252ZXJ0IHRvIHVzZXIg\ncmVhZGFibGUgdmFsdWVzCiAgICAgICAgcHJvcHMucHV0QWxsKGNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKS5nZXRQcm9wZXJ0aWVzKCkpOwogICAgICAgIHJldHVy\nbiBwcm9wczsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IHB1dFVzZXJPYmpl\nY3QoT2JqZWN0IGtleSwgT2JqZWN0IHZhbCkgewogICAgICAgIHJldHVybiBf\nZmFjdG9yeS5wdXRVc2VyT2JqZWN0KGtleSwgdmFsKTsKICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0IGdldFVzZXJPYmplY3QoT2JqZWN0IGtleSkgewogICAg\nICAgIHJldHVybiBfZmFjdG9yeS5nZXRVc2VyT2JqZWN0KGtleSk7CiAgICB9\nCgogICAgcHVibGljIFN0b3JlQ2FjaGUgZ2V0U3RvcmVDYWNoZSgpIHsKICAg\nICAgICBfZmFjdG9yeS5sb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgaWYgKF9jYWNoZSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBPcGVu\nSlBBQ29uZmlndXJhdGlvbiBjb25mID0gX2ZhY3RvcnkuZ2V0Q29uZmlndXJh\ndGlvbigpOwogICAgICAgICAgICAgICAgX2NhY2hlID0gbmV3IFN0b3JlQ2Fj\naGVJbXBsKHRoaXMsCiAgICAgICAgICAgICAgICAgICAgY29uZi5nZXREYXRh\nQ2FjaGVNYW5hZ2VySW5zdGFuY2UoKS5nZXRTeXN0ZW1EYXRhQ2FjaGUoKSk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9jYWNoZTsKICAg\nICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfZmFjdG9yeS51bmxvY2so\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIFN0b3JlQ2FjaGUgZ2V0\nU3RvcmVDYWNoZShTdHJpbmcgY2FjaGVOYW1lKSB7CiAgICAgICAgcmV0dXJu\nIG5ldyBTdG9yZUNhY2hlSW1wbCh0aGlzLCBfZmFjdG9yeS5nZXRDb25maWd1\ncmF0aW9uKCkuCiAgICAgICAgICAgIGdldERhdGFDYWNoZU1hbmFnZXJJbnN0\nYW5jZSgpLmdldERhdGFDYWNoZShjYWNoZU5hbWUsIHRydWUpKTsKICAgIH0K\nCiAgICBwdWJsaWMgUXVlcnlSZXN1bHRDYWNoZSBnZXRRdWVyeVJlc3VsdENh\nY2hlKCkgewogICAgICAgIF9mYWN0b3J5LmxvY2soKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICBpZiAoX3F1ZXJ5Q2FjaGUgPT0gbnVsbCkKICAgICAg\nICAgICAgICAgIF9xdWVyeUNhY2hlID0gbmV3IFF1ZXJ5UmVzdWx0Q2FjaGVJ\nbXBsKF9mYWN0b3J5LgogICAgICAgICAgICAgICAgICAgIGdldENvbmZpZ3Vy\nYXRpb24oKS5nZXREYXRhQ2FjaGVNYW5hZ2VySW5zdGFuY2UoKS4KICAgICAg\nICAgICAgICAgICAgICBnZXRTeXN0ZW1RdWVyeUNhY2hlKCkpOwogICAgICAg\nICAgICByZXR1cm4gX3F1ZXJ5Q2FjaGU7CiAgICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICAgICAgX2ZhY3RvcnkudW5sb2NrKCk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyBPcGVuSlBBRW50aXR5TWFuYWdlclNQSSBjcmVhdGVF\nbnRpdHlNYW5hZ2VyKCkgewogICAgICAgIHJldHVybiBjcmVhdGVFbnRpdHlN\nYW5hZ2VyKG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlcyBh\nbmQgY29uZmlndXJlcyBhIGVudGl0eSBtYW5hZ2VyIHdpdGggdGhlIGdpdmVu\nIHByb3BlcnRpZXMuCiAgICAgKiAgCiAgICAgKiBUaGUgcHJvcGVydHkga2V5\ncyBpbiB0aGUgZ2l2ZW4gbWFwIGNhbiBiZSBlaXRoZXIgcXVhbGlmaWVkIG9y\nIG5vdC4KICAgICAqIAogICAgICogQHJldHVybiBsaXN0IG9mIGV4Y2VwdGlv\nbnMgcmFpc2VkIG9yIGVtcHR5IGxpc3QuCiAgICAgKi8KICAgIHB1YmxpYyBP\ncGVuSlBBRW50aXR5TWFuYWdlclNQSSBjcmVhdGVFbnRpdHlNYW5hZ2VyKE1h\ncCBwcm9wcykgewogICAgICAgIGlmIChwcm9wcyA9PSBudWxsKQogICAgICAg\nICAgICBwcm9wcyA9IENvbGxlY3Rpb25zLkVNUFRZX01BUDsKICAgICAgICBl\nbHNlIGlmICghcHJvcHMuaXNFbXB0eSgpKQogICAgICAgICAgICBwcm9wcyA9\nIG5ldyBIYXNoTWFwKHByb3BzKTsKCiAgICAgICAgT3BlbkpQQUNvbmZpZ3Vy\nYXRpb24gY29uZiA9IGdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBTdHJp\nbmcgdXNlciA9IChTdHJpbmcpIENvbmZpZ3VyYXRpb25zLnJlbW92ZVByb3Bl\ncnR5KCJDb25uZWN0aW9uVXNlck5hbWUiLCBwcm9wcyk7CiAgICAgICAgaWYg\nKHVzZXIgPT0gbnVsbCkKICAgICAgICAgICAgdXNlciA9IGNvbmYuZ2V0Q29u\nbmVjdGlvblVzZXJOYW1lKCk7CiAgICAgICAgU3RyaW5nIHBhc3MgPSAoU3Ry\naW5nKSBDb25maWd1cmF0aW9ucy5yZW1vdmVQcm9wZXJ0eSgiQ29ubmVjdGlv\nblBhc3N3b3JkIiwgcHJvcHMpOwogICAgICAgIGlmIChwYXNzID09IG51bGwp\nCiAgICAgICAgICAgIHBhc3MgPSBjb25mLmdldENvbm5lY3Rpb25QYXNzd29y\nZCgpOwoKICAgICAgICBTdHJpbmcgc3RyID0gKFN0cmluZykgQ29uZmlndXJh\ndGlvbnMucmVtb3ZlUHJvcGVydHkoIlRyYW5zYWN0aW9uTW9kZSIsIHByb3Bz\nKTsKICAgICAgICBib29sZWFuIG1hbmFnZWQ7CiAgICAgICAgaWYgKHN0ciA9\nPSBudWxsKQogICAgICAgICAgICBtYW5hZ2VkID0gY29uZi5pc1RyYW5zYWN0\naW9uTW9kZU1hbmFnZWQoKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAg\nVmFsdWUgdmFsID0gY29uZi5nZXRWYWx1ZSgiVHJhbnNhY3Rpb25Nb2RlIik7\nCiAgICAgICAgICAgIG1hbmFnZWQgPSBCb29sZWFuLnBhcnNlQm9vbGVhbih2\nYWwudW5hbGlhcyhzdHIpKTsKICAgICAgICB9CgogICAgICAgIE9iamVjdCBv\nYmogPSBDb25maWd1cmF0aW9ucy5yZW1vdmVQcm9wZXJ0eSgiQ29ubmVjdGlv\nblJldGFpbk1vZGUiLCBwcm9wcyk7CiAgICAgICAgaW50IHJldGFpbk1vZGU7\nCiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIE51bWJlcikgewogICAgICAg\nICAgICByZXRhaW5Nb2RlID0gKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKTsK\nICAgICAgICB9IGVsc2UgaWYgKG9iaiA9PSBudWxsKSB7CiAgICAgICAgICAg\nIHJldGFpbk1vZGUgPSBjb25mLmdldENvbm5lY3Rpb25SZXRhaW5Nb2RlQ29u\nc3RhbnQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBWYWx1ZSB2\nYWwgPSBjb25mLmdldFZhbHVlKCJDb25uZWN0aW9uUmV0YWluTW9kZSIpOwog\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0YWluTW9kZSA9\nIEludGVnZXIucGFyc2VJbnQodmFsLnVuYWxpYXMoKFN0cmluZykgb2JqKSk7\nCiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oX2xvYy5nZXQo\nImJhZC1lbS1wcm9wIiwgIm9wZW5qcGEuQ29ubmVjdGlvblJldGFpbk1vZGUi\nLCBvYmopLAogICAgICAgICAgICAgICAgICAgIG5ldyBUaHJvd2FibGVbXXsg\nZSB9LCBvYmosIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAg\nICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKHVzZXIs\nIHBhc3MsIG1hbmFnZWQsIHJldGFpbk1vZGUsIGZhbHNlKTsKICAgICAgICAg\nICAgCiAgICAgICAgLy8gYWRkIGF1dG9kZXRhY2ggZm9yIGNsb3NlIGFuZCBy\nb2xsYmFjayBjb25kaXRpb25zIHRvIHRoZSBjb25maWd1cmF0aW9uCiAgICAg\nICAgYnJva2VyLnNldEF1dG9EZXRhY2goQXV0b0RldGFjaC5ERVRBQ0hfQ0xP\nU0UsIHRydWUpOwogICAgICAgIGJyb2tlci5zZXRBdXRvRGV0YWNoKEF1dG9E\nZXRhY2guREVUQUNIX1JPTExCQUNLLCB0cnVlKTsKICAgICAgICBicm9rZXIu\nc2V0RGV0YWNoZWROZXcoZmFsc2UpOwogICAgICAgIAogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyU1BJIGVtID0gbmV3RW50aXR5TWFuYWdlckltcGwo\nYnJva2VyKTsKCiAgICAgICAgLy8gYWxsb3cgc2V0dGluZyBvZiBvdGhlciBi\nZWFuIHByb3BlcnRpZXMgb2YgRU0KICAgICAgICBmb3IgKE9iamVjdCBrZXkg\nOiBwcm9wcy5rZXlTZXQoKSkgewogICAgICAgICAgICBlbS5zZXRQcm9wZXJ0\neShrZXkudG9TdHJpbmcoKSwgcHJvcHMuZ2V0KGtleSkpOwogICAgICAgIH0K\nICAgICAgICByZXR1cm4gZW07CiAgICB9CiAgICAKICAgIC8qKgogICAgICog\nQ3JlYXRlIGEgbmV3IGVudGl0eSBtYW5hZ2VyIGFyb3VuZCB0aGUgZ2l2ZW4g\nYnJva2VyLgogICAgICovCiAgICBwcm90ZWN0ZWQgRW50aXR5TWFuYWdlcklt\ncGwgbmV3RW50aXR5TWFuYWdlckltcGwoQnJva2VyIGJyb2tlcikgewogICAg\nICAgIHJldHVybiBuZXcgRW50aXR5TWFuYWdlckltcGwodGhpcywgYnJva2Vy\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRMaWZlY3ljbGVMaXN0ZW5l\ncihPYmplY3QgbGlzdGVuZXIsIENsYXNzLi4uIGNsYXNzZXMpIHsKICAgICAg\nICBfZmFjdG9yeS5hZGRMaWZlY3ljbGVMaXN0ZW5lcihsaXN0ZW5lciwgY2xh\nc3Nlcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVtb3ZlTGlmZWN5Y2xl\nTGlzdGVuZXIoT2JqZWN0IGxpc3RlbmVyKSB7CiAgICAgICAgX2ZhY3Rvcnku\ncmVtb3ZlTGlmZWN5Y2xlTGlzdGVuZXIobGlzdGVuZXIpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGFkZFRyYW5zYWN0aW9uTGlzdGVuZXIoT2JqZWN0IGxp\nc3RlbmVyKSB7CiAgICAgICAgX2ZhY3RvcnkuYWRkVHJhbnNhY3Rpb25MaXN0\nZW5lcihsaXN0ZW5lcik7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVtb3Zl\nVHJhbnNhY3Rpb25MaXN0ZW5lcihPYmplY3QgbGlzdGVuZXIpIHsKICAgICAg\nICBfZmFjdG9yeS5yZW1vdmVUcmFuc2FjdGlvbkxpc3RlbmVyKGxpc3RlbmVy\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsKICAgICAgICBf\nZmFjdG9yeS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlz\nT3BlbigpIHsKICAgICAgICByZXR1cm4gIV9mYWN0b3J5LmlzQ2xvc2VkKCk7\nCiAgICB9CgogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICBy\nZXR1cm4gKF9mYWN0b3J5ID09IG51bGwpID8gMCA6IF9mYWN0b3J5Lmhhc2hD\nb2RlKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVj\ndCBvdGhlcikgewogICAgICAgIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAoKG90aGVyID09IG51bGwp\nIHx8IChvdGhlci5nZXRDbGFzcygpICE9IHRoaXMuZ2V0Q2xhc3MoKSkpCiAg\nICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoX2ZhY3Rvcnkg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJl\ndHVybiBfZmFjdG9yeS5lcXVhbHMoKChFbnRpdHlNYW5hZ2VyRmFjdG9yeUlt\ncGwpIG90aGVyKS5fZmFjdG9yeSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\ncmVhdGUgYSBzdG9yZS1zcGVjaWZpYyBmYWNhZGUgZm9yIHRoZSBnaXZlbiBm\nZXRjaCBjb25maWd1cmF0aW9uLgoJICogSWYgbm8gZmFjYWRlIGNsYXNzIGV4\naXN0cywgd2UgdXNlIHRoZSBkZWZhdWx0IHtAbGluayBGZXRjaFBsYW59Lgog\nICAgICovCiAgICBGZXRjaFBsYW4gdG9GZXRjaFBsYW4oQnJva2VyIGJyb2tl\nciwgRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAgICAgaWYgKGZl\ndGNoID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAg\nICBpZiAoZmV0Y2ggaW5zdGFuY2VvZiBEZWxlZ2F0aW5nRmV0Y2hDb25maWd1\ncmF0aW9uKQogICAgICAgICAgICBmZXRjaCA9ICgoRGVsZWdhdGluZ0ZldGNo\nQ29uZmlndXJhdGlvbikgZmV0Y2gpLgogICAgICAgICAgICAgICAgZ2V0SW5u\nZXJtb3N0RGVsZWdhdGUoKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\naWYgKF9wbGFuID09IG51bGwpIHsKICAgICAgICAgICAgICAgIENsYXNzIHN0\nb3JlVHlwZSA9IChicm9rZXIgPT0gbnVsbCkgPyBudWxsIDogYnJva2VyLgog\nICAgICAgICAgICAgICAgICAgIGdldFN0b3JlTWFuYWdlcigpLmdldElubmVy\nbW9zdERlbGVnYXRlKCkuZ2V0Q2xhc3MoKTsKICAgICAgICAgICAgICAgIENs\nYXNzIGNscyA9IF9mYWN0b3J5LmdldENvbmZpZ3VyYXRpb24oKS4KICAgICAg\nICAgICAgICAgICAgICBnZXRTdG9yZUZhY2FkZVR5cGVSZWdpc3RyeSgpLgog\nICAgICAgICAgICAgICAgICAgIGdldEltcGxlbWVudGF0aW9uKEZldGNoUGxh\nbi5jbGFzcywgc3RvcmVUeXBlLCAKICAgICAgICAgICAgICAgICAgICAJCUZl\ndGNoUGxhbkltcGwuY2xhc3MpOwogICAgICAgICAgICAgICAgX3BsYW4gPSBj\nbHMuZ2V0Q29uc3RydWN0b3IoRmV0Y2hDb25maWd1cmF0aW9uLmNsYXNzKTsK\nICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX3BsYW4ubmV3SW5z\ndGFuY2UoZmV0Y2gpOwogICAgICAgIH0gY2F0Y2ggKEludm9jYXRpb25UYXJn\nZXRFeGNlcHRpb24gaXRlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3Rl\nbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uCiAgICAgICAg\nICAgICAgICAoaXRlLmdldFRhcmdldEV4Y2VwdGlvbigpKTsKICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBQZXJz\naXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4Y2VwdGlvbihlKTsK\nICAgICAgICB9Cgl9CgogICAgcHVibGljIENhY2hlIGdldENhY2hlKCkgewog\nICAgICAgIHJldHVybiBnZXRTdG9yZUNhY2hlKCk7CiAgICB9CgogICAgcHVi\nbGljIENyaXRlcmlhQnVpbGRlciBnZXRRdWVyeUJ1aWxkZXIoKSB7CiAgICAg\nICAgcmV0dXJuIG5ldyBDcml0ZXJpYUJ1aWxkZXIoKS5zZXRNZXRhTW9kZWwo\nZ2V0TWV0YW1vZGVsKCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgT3BlbkpQ\nQVF1ZXJ5QnVpbGRlciBnZXREeW5hbWljUXVlcnlCdWlsZGVyKCkgewogICAg\nICAgIHJldHVybiBuZXcgUXVlcnlCdWlsZGVySW1wbCh0aGlzKTsKICAgIH0K\nCiAgICBwdWJsaWMgU2V0PFN0cmluZz4gZ2V0U3VwcG9ydGVkUHJvcGVydGll\ncygpIHsKICAgICAgICByZXR1cm4gX2ZhY3RvcnkuZ2V0U3VwcG9ydGVkUHJv\ncGVydGllcygpOwogICAgfQoKICAgIHB1YmxpYyBNZXRhbW9kZWxJbXBsIGdl\ndE1ldGFtb2RlbCgpIHsKICAgICAgICBpZiAoX21ldGFNb2RlbCA9PSBudWxs\nKSB7CiAgICAgICAgICAgIF9tZXRhTW9kZWwgPSBuZXcgTWV0YW1vZGVsSW1w\nbChnZXRDb25maWd1cmF0aW9uKCkKICAgICAgICAgICAgICAgIC5nZXRNZXRh\nRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpKTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIF9tZXRhTW9kZWw7CiAgICB9CgogICAgcHVibGljIFBlcnNpc3Rl\nbmNlVW5pdFV0aWwgZ2V0UGVyc2lzdGVuY2VVbml0VXRpbCgpIHsKICAgICAg\nICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUg\naWRlbnRpZmllciBmb3IgdGhlIHNwZWNpZmllZCBlbnRpdHkuICBJZiBub3Qg\nbWFuYWdlZCBieSBhbnkKICAgICAqIG9mIHRoZSBlbSdzIGluIHRoaXMgUFUg\nb3Igbm90IHBlcnNpc3RlbmNlIGNhcGFibGUsIHJldHVybiBudWxsLgogICAg\nICovCiAgICBwdWJsaWMgT2JqZWN0IGdldElkZW50aWZpZXIoT2JqZWN0IGVu\ndGl0eSkgewogICAgICAgIHJldHVybiBPcGVuSlBBUGVyc2lzdGVuY2VVdGls\nLmdldElkZW50aWZpZXIodGhpcywgZW50aXR5KTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBpc0xvYWRlZChPYmplY3QgZW50aXR5KSB7CiAgICAgICAg\ncmV0dXJuIGlzTG9hZGVkKGVudGl0eSwgbnVsbCk7CiAgICB9CgogICAgcHVi\nbGljIGJvb2xlYW4gaXNMb2FkZWQoT2JqZWN0IGVudGl0eSwgU3RyaW5nIGF0\ndHJpYnV0ZSkgewogICAgICAgIGlmIChlbnRpdHkgPT0gbnVsbCkgewogICAg\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIAogICAg\nICAgIHJldHVybiAoT3BlbkpQQVBlcnNpc3RlbmNlVXRpbC5pc0xvYWRlZCh0\naGlzLCBlbnRpdHksIGF0dHJpYnV0ZSkgPT0KICAgICAgICAgICAgTG9hZFN0\nYXRlLkxPQURFRCk7CiAgICB9ICAgIAp9Cg==\n","encoding":"base64"}

