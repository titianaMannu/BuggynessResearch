{"sha":"5bc2afaf8717be2f3a68abd44232a9e2b87a480e","node_id":"MDQ6QmxvYjIwNjM2NDo1YmMyYWZhZjg3MTdiZTJmM2E2OGFiZDQ0MjMyYTllMmI4N2E0ODBl","size":3472,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5bc2afaf8717be2f3a68abd44232a9e2b87a480e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuUGFyYW1ldGVyOwoKLyoqCiAqIEEgdXNl\nci1kZWZpbmVkIHBhcmFtZXRlciBvZiBhIHF1ZXJ5LgogKiAKICogQSBwYXJh\nbWV0ZXIgaXMgdW5pcXVlbHkgaWRlbnRpZmllZCB3aXRoaW4gdGhlIHNjb3Bl\nIG9mIGEgcXVlcnkgYnkgZWl0aGVyCiAqIGl0cyBuYW1lIG9yIGludGVncmFs\nIHBvc2l0aW9uLiBUaGUgaW50ZWdyYWwgcG9zaXRpb24gcmVmZXJzIHRvIHRo\nZSBpbnRlZ2VyCiAqIGtleSBhcyBzcGVjaWZpZWQgYnkgdGhlIHVzZXIuIFRo\nZSBpbmRleCBvZiB0aGlzIHBhcmFtZXRlciBkdXJpbmcgZXhlY3V0aW9uCiAq\nIGluIGEgZGF0YXN0b3JlIHF1ZXJ5IG1heSBiZSBkaWZmZXJlbnQuICAKICog\nPGJyPgogKiBBIHZhbHVlIGNhbiBiZSBib3VuZCB0byB0aGlzIHBhcmFtZXRl\nci4gVGhpcyBiZWhhdmlvciBvZiBhIHBhcmFtZXRlciBjYXJyeWluZwogKiBp\ndHMgb3duIHZhbHVlIGlzIGEgY2hhbmdlIGZyb20gZWFybGllciB2ZXJzaW9u\ncyAod2hlcmUgbm8gZXhwbGljaXQgYWJzdHJhY3Rpb24KICogZXhpc3RlZCBm\nb3IgYSBxdWVyeSBwYXJhbWV0ZXIpLiAgIAogKiAKICogQGF1dGhvciBQaW5h\na2kgUG9kZGFyCiAqIAogKiBAc2luY2UgMi4wLjAKICogCiAqIEBwYXJhbSA8\nVD4gdHlwZSBvZiB2YWx1ZSBjYXJyaWVkIGJ5IHRoaXMgcGFyYW1ldGVyLgog\nKiAKICovCnB1YmxpYyBjbGFzcyBQYXJhbWV0ZXJJbXBsPFQ+IGltcGxlbWVu\ndHMgUGFyYW1ldGVyPFQ+IHsKICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIF9u\nYW1lOwogICAgcHJpdmF0ZSBmaW5hbCBJbnRlZ2VyIF9wb3NpdGlvbjsKICAg\nIHByaXZhdGUgZmluYWwgQ2xhc3M8VD4gX2V4cGVjdGVkVmFsdWVUeXBlOwog\nICAgCiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhIHBvc2l0aW9uYWwgcGFy\nYW1ldGVyIHdpdGggdGhlIGdpdmVuIHBvc2l0aW9uIGFzIGtleSBhbmQKICAg\nICAqIGdpdmVuIGV4cGVjdGVkIHZhbHVlIHR5cGUuCiAgICAgKi8KICAgIHB1\nYmxpYyBQYXJhbWV0ZXJJbXBsKGludCBwb3NpdGlvbiwgQ2xhc3M8VD4gZXhw\nZWN0ZWRWYWx1ZVR5cGUpIHsKICAgICAgICBfbmFtZSA9IG51bGw7CiAgICAg\nICAgX3Bvc2l0aW9uID0gcG9zaXRpb247CiAgICAgICAgX2V4cGVjdGVkVmFs\ndWVUeXBlID0gZXhwZWN0ZWRWYWx1ZVR5cGU7CiAgICB9CiAgICAKICAgIC8q\nKgogICAgICogQ29uc3RydWN0IGEgbmFtZWQgcGFyYW1ldGVyIHdpdGggdGhl\nIGdpdmVuIG5hbWUgYXMga2V5IGFuZAogICAgICogZ2l2ZW4gZXhwZWN0ZWQg\ndmFsdWUgdHlwZS4KICAgICAqLwogICAgcHVibGljIFBhcmFtZXRlckltcGwo\nU3RyaW5nIG5hbWUsIENsYXNzPFQ+IGV4cGVjdGVkVmFsdWVUeXBlKSB7CiAg\nICAgICAgX25hbWUgPSBuYW1lOwogICAgICAgIF9wb3NpdGlvbiA9IG51bGw7\nCiAgICAgICAgX2V4cGVjdGVkVmFsdWVUeXBlID0gZXhwZWN0ZWRWYWx1ZVR5\ncGU7CiAgICB9CiAgICAKICAgIHB1YmxpYyBmaW5hbCBTdHJpbmcgZ2V0TmFt\nZSgpIHsKICAgICAgICByZXR1cm4gX25hbWU7CiAgICB9CiAgICAgICAgCiAg\nICBwdWJsaWMgZmluYWwgSW50ZWdlciBnZXRQb3NpdGlvbigpIHsKICAgICAg\nICByZXR1cm4gX3Bvc2l0aW9uOwogICAgfQogICAgCiAgICBwdWJsaWMgQ2xh\nc3M8VD4gZ2V0UGFyYW1ldGVyVHlwZSgpIHsKICAgICAgcmV0dXJuIF9leHBl\nY3RlZFZhbHVlVHlwZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBFcXVh\nbHMgaWYgdGhlIG90aGVyIHBhcmFtZXRlciBoYXMgdGhlIHNhbWUgbmFtZSBv\nciBwb3NpdGlvbi4KICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\nYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90aGVyKSB7CiAgICAgICAgaWYgKHRo\naXMgPT0gb3RoZXIpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nIGlmICghKG90aGVyIGluc3RhbmNlb2YgUGFyYW1ldGVyKSkKICAgICAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgICAgIFBhcmFtZXRlcjw/PiB0aGF0ID0g\nKFBhcmFtZXRlcjw/PilvdGhlcjsKICAgICAgICBpZiAoX25hbWUgIT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuIF9uYW1lLmVxdWFscyh0aGF0LmdldE5h\nbWUoKSk7CiAgICAgICAgaWYgKF9wb3NpdGlvbiAhPSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gX3Bvc2l0aW9uLmVxdWFscyh0aGF0LmdldFBvc2l0aW9u\nKCkpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIAogICAgcHVi\nbGljIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAgICBTdHJpbmdCdWlsZGVy\nIGJ1ZiA9IG5ldyBTdHJpbmdCdWlsZGVyKCJQYXJhbWV0ZXIiKTsKICAgICAg\nICBidWYuYXBwZW5kKCI8IiArIGdldFBhcmFtZXRlclR5cGUoKS5nZXRTaW1w\nbGVOYW1lKCkgKyAiPiIpOwogICAgICAgIGlmIChfbmFtZSAhPSBudWxsKSB7\nCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIignIiArIF9uYW1lICsgIicpIik7\nCiAgICAgICAgfSBlbHNlIGlmIChfcG9zaXRpb24gIT0gbnVsbCkgewogICAg\nICAgICAgICBidWYuYXBwZW5kKCIoIiArIF9wb3NpdGlvbiArICIpIik7CiAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiKD8pIik7\nCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAg\nICB9Cgp9Cg==\n","encoding":"base64"}

