{"sha":"79fb186072165159225cf7e1f57a21b066841372","node_id":"MDQ6QmxvYjIwNjM2NDo3OWZiMTg2MDcyMTY1MTU5MjI1Y2Y3ZTFmNTdhMjFiMDY2ODQxMzcy","size":33201,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/79fb186072165159225cf7e1f57a21b066841372","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsK\naW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsOwppbXBvcnQgamF2YS5uZXQu\nTWFsZm9ybWVkVVJMRXhjZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuVVJMOwpp\nbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQg\namF2YS5zZWN1cml0eS5Qcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uOwppbXBv\ncnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xs\nZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5FbnVtZXJhdGlvbjsKaW1wb3J0\nIGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZEhh\nc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRp\nbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuTWlzc2luZ1Jlc291cmNlRXhjZXB0\naW9uOwppbXBvcnQgamF2YS51dGlsLlNldDsKCmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5zcGkuUGVyc2lzdGVuY2VVbml0SW5mbzsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLnNwaS5QZXJzaXN0ZW5jZVVuaXRUcmFuc2FjdGlvblR5\ncGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5zcGkuVmFsaWRhdGlvbk1v\nZGU7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRp\nbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5Db21wYXRpYmls\naXR5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5P\ncGVuSlBBQ29uZmlndXJhdGlvbkltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuY29uZi5PcGVuSlBBUHJvZHVjdERlcml2YXRpb247CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuY29uZi5TcGVjaWZpY2F0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5NaXhlZExvY2tMZXZlbHM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQWJzdHJhY3RQcm9k\ndWN0RGVyaXZhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\nY29uZi5Db25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25Qcm92aWRlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5NYXBDb25maWd1cmF0aW9u\nUHJvdmlkZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYu\nUHJvZHVjdERlcml2YXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi5sb2cuTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5t\nZXRhLlhNTE1ldGFEYXRhUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5tZXRhLlhNTFZlcnNpb25QYXJzZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuSjJEb1ByaXZIZWxwZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQg\nb3JnLnhtbC5zYXguQXR0cmlidXRlczsKaW1wb3J0IG9yZy54bWwuc2F4LlNB\nWEV4Y2VwdGlvbjsKCi8qKgogKiBTZXRzIEpQQSBzcGVjaWZpY2F0aW9uIGRl\nZmF1bHRzIGFuZCBwYXJzZXMgSlBBIHNwZWNpZmljYXRpb24gWE1MIGZpbGVz\nLgogKiAKICogRm9yIGdsb2JhbHMsIGxvb2tzIGluIDxjb2RlPm9wZW5qcGEu\ncHJvcGVydGllczwvY29kZT4gc3lzdGVtIHByb3BlcnR5IGZvcgogKiB0aGUg\nbG9jYXRpb24gb2YgYSBmaWxlIHRvIHBhcnNlLiBJZiBubyBzeXN0ZW0gcHJv\ncGVydHkgaXMgZGVmaW5lZCwgdGhlCiAqIGRlZmF1bHQgcmVzb3VyY2UgbG9j\nYXRpb24gb2YgPGNvZGU+TUVUQS1JTkYvb3BlbmpwYS54bWw8L2NvZGU+IGlz\nIHVzZWQuCiAqCiAqIEZvciBkZWZhdWx0cywgbG9va3MgZm9yIDxjb2RlPk1F\nVEEtSU5GL3BlcnNpc3RlbmNlLnhtbDwvY29kZT4uCiAqIFdpdGhpbiA8Y29k\nZT5wZXJzaXN0ZW5jZS54bWw8L2NvZGU+LCBsb29rIGZvciB0aGUgbmFtZWQg\ncGVyc2lzdGVuY2UgdW5pdCwgb3IKICogaWYgbm8gbmFtZSBnaXZlbiwgYW4g\nT3BlbkpQQSB1bml0IChwcmVmZXJyaW5nIGFuIHVubmFtZWQgT3BlbkpQQSB1\nbml0IHRvIAogKiBhIG5hbWVkIG9uZSkuCiAqCiAqIEBhdXRob3IgQWJlIFdo\naXRlCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBQZXJzaXN0ZW5j\nZVByb2R1Y3REZXJpdmF0aW9uIAogICAgZXh0ZW5kcyBBYnN0cmFjdFByb2R1\nY3REZXJpdmF0aW9uCiAgICBpbXBsZW1lbnRzIE9wZW5KUEFQcm9kdWN0RGVy\naXZhdGlvbiB7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTcGVjaWZpY2F0\naW9uIFNQRUNfSlBBID0gbmV3IFNwZWNpZmljYXRpb24oImpwYSAyIik7CiAg\nICBwdWJsaWMgc3RhdGljIGZpbmFsIFNwZWNpZmljYXRpb24gQUxJQVNfRUpC\nID0gbmV3IFNwZWNpZmljYXRpb24oImVqYiAzIik7CiAgICBwdWJsaWMgc3Rh\ndGljIGZpbmFsIFN0cmluZyBSU1JDX0dMT0JBTCA9ICJNRVRBLUlORi9vcGVu\nanBhLnhtbCI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBSU1JD\nX0RFRkFVTFQgPSAiTUVUQS1JTkYvcGVyc2lzdGVuY2UueG1sIjsKICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgQmlnRGVjaW1hbCBWRVJTSU9OXzFfMCA9IEJp\nZ0RlY2ltYWwudmFsdWVPZigxLjApOwoKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAg\nICAgICAoUGVyc2lzdGVuY2VQcm9kdWN0RGVyaXZhdGlvbi5jbGFzcyk7Cgog\nICAgcHJpdmF0ZSBIYXNoTWFwPFN0cmluZywgUFVOYW1lQ29sbGlzaW9uPiBf\ncHVOYW1lQ29sbGlzaW9ucwogICAgICAgID0gbmV3IEhhc2hNYXA8U3RyaW5n\nLFBVTmFtZUNvbGxpc2lvbj4oKTsKICAgIHB1YmxpYyB2b2lkIHB1dEJyb2tl\nckZhY3RvcnlBbGlhc2VzKE1hcCBtKSB7CiAgICB9CgogICAgcHVibGljIGlu\ndCBnZXRUeXBlKCkgewogICAgICAgIHJldHVybiBUWVBFX1NQRUM7CiAgICB9\nCiAgICAKICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0cmluZyBnZXRDb25m\naWd1cmF0aW9uUHJlZml4KCkgewogICAgICAgIHJldHVybiAiamF2YXgucGVy\nc2lzdGVuY2UiOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZv\naWQgdmFsaWRhdGUoKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIC8vIG1ha2Ugc3VyZSBKUEEgaXMgYXZhaWxhYmxlCiAgICAgICAgQWNj\nZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoSjJEb1ByaXZIZWxwZXIuZ2V0\nQ2xhc3NMb2FkZXJBY3Rpb24oCiAgICAgICAgICAgIGphdmF4LnBlcnNpc3Rl\nbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5LmNsYXNzKSk7CiAgICB9CiAgICAK\nICAgIEBPdmVycmlkZQogICAgcHVibGljIGJvb2xlYW4gYmVmb3JlQ29uZmln\ndXJhdGlvbkxvYWQoQ29uZmlndXJhdGlvbiBjKSB7CiAgICAgICAgaWYgKCEo\nYyBpbnN0YW5jZW9mIE9wZW5KUEFDb25maWd1cmF0aW9uSW1wbCkpCiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAKICAgICAgICBPcGVuSlBB\nQ29uZmlndXJhdGlvbkltcGwgY29uZiA9IChPcGVuSlBBQ29uZmlndXJhdGlv\nbkltcGwpIGM7CiAgICAgICAgY29uZi5tZXRhRmFjdG9yeVBsdWdpbi5zZXRB\nbGlhcyhBTElBU19FSkIuZ2V0TmFtZSgpLAogICAgICAgICAgICBQZXJzaXN0\nZW5jZU1ldGFEYXRhRmFjdG9yeS5jbGFzcy5nZXROYW1lKCkpOwogICAgICAg\nIGNvbmYubWV0YUZhY3RvcnlQbHVnaW4uc2V0QWxpYXMoU1BFQ19KUEEuZ2V0\nTmFtZSgpLAogICAgICAgICAgICBQZXJzaXN0ZW5jZU1ldGFEYXRhRmFjdG9y\neS5jbGFzcy5nZXROYW1lKCkpOwogICAgICAgIAogICAgICAgIGNvbmYuYWRk\nVmFsdWUobmV3IEVudGl0eU1hbmFnZXJGYWN0b3J5VmFsdWUoKSk7CiAgICAg\nICAgCiAgICAgICAgY29uZi5yZWFkTG9ja0xldmVsLnNldEFsaWFzKCJvcHRp\nbWlzdGljIiwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKE1peGVkTG9j\na0xldmVscy5MT0NLX09QVElNSVNUSUMpKTsKICAgICAgICBjb25mLnJlYWRM\nb2NrTGV2ZWwuc2V0QWxpYXMoIm9wdGltaXN0aWMtZm9yY2UtaW5jcmVtZW50\nIiwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKE1peGVkTG9ja0xldmVs\ncy5MT0NLX09QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKSk7CiAgICAgICAg\nY29uZi5yZWFkTG9ja0xldmVsLnNldEFsaWFzKCJwZXNzaW1pc3RpYy1yZWFk\nIiwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKE1peGVkTG9ja0xldmVs\ncy5MT0NLX1BFU1NJTUlTVElDX1JFQUQpKTsKICAgICAgICBjb25mLnJlYWRM\nb2NrTGV2ZWwuc2V0QWxpYXMoInBlc3NpbWlzdGljLXdyaXRlIiwgU3RyaW5n\nCiAgICAgICAgICAgIC52YWx1ZU9mKE1peGVkTG9ja0xldmVscy5MT0NLX1BF\nU1NJTUlTVElDX1dSSVRFKSk7CiAgICAgICAgY29uZi5yZWFkTG9ja0xldmVs\nLnNldEFsaWFzKCJwZXNzaW1pc3RpYy1mb3JjZS1pbmNyZW1lbnQiLCBTdHJp\nbmcKICAgICAgICAgICAgLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tf\nUEVTU0lNSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKSk7CgogICAgICAgIGNvbmYu\nd3JpdGVMb2NrTGV2ZWwuc2V0QWxpYXMoIm9wdGltaXN0aWMiLCBTdHJpbmcK\nICAgICAgICAgICAgLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BU\nSU1JU1RJQykpOwogICAgICAgIGNvbmYud3JpdGVMb2NrTGV2ZWwuc2V0QWxp\nYXMoIm9wdGltaXN0aWMtZm9yY2UtaW5jcmVtZW50IiwgU3RyaW5nCiAgICAg\nICAgICAgIC52YWx1ZU9mKE1peGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNU\nSUNfRk9SQ0VfSU5DUkVNRU5UKSk7CiAgICAgICAgY29uZi53cml0ZUxvY2tM\nZXZlbC5zZXRBbGlhcygicGVzc2ltaXN0aWMtcmVhZCIsIFN0cmluZwogICAg\nICAgICAgICAudmFsdWVPZihNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1J\nU1RJQ19SRUFEKSk7CiAgICAgICAgY29uZi53cml0ZUxvY2tMZXZlbC5zZXRB\nbGlhcygicGVzc2ltaXN0aWMtd3JpdGUiLCBTdHJpbmcKICAgICAgICAgICAg\nLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfV1JJ\nVEUpKTsKICAgICAgICBjb25mLndyaXRlTG9ja0xldmVsLnNldEFsaWFzKCJw\nZXNzaW1pc3RpYy1mb3JjZS1pbmNyZW1lbnQiLCBTdHJpbmcKICAgICAgICAg\nICAgLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNf\nRk9SQ0VfSU5DUkVNRU5UKSk7CgogICAgICAgIGNvbmYubG9ja01hbmFnZXJQ\nbHVnaW4uc2V0QWxpYXMoIm1peGVkIiwKICAgICAgICAgICAgIm9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLmtlcm5lbC5NaXhlZExvY2tNYW5hZ2VyIik7Cgog\nICAgICAgIFN0cmluZ1tdIGFsaWFzZXMgPSBuZXcgU3RyaW5nW10gewogICAg\nICAgICAgICBTdHJpbmcudmFsdWVPZihWYWxpZGF0aW9uTW9kZS5BVVRPKSwK\nICAgICAgICAgICAgU3RyaW5nLnZhbHVlT2YoVmFsaWRhdGlvbk1vZGUuQVVU\nTykudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgU3RyaW5nLnZhbHVlT2Yo\nVmFsaWRhdGlvbk1vZGUuQ0FMTEJBQ0spLAogICAgICAgICAgICBTdHJpbmcu\ndmFsdWVPZihWYWxpZGF0aW9uTW9kZS5DQUxMQkFDSykudG9Mb3dlckNhc2Uo\nKSwKICAgICAgICAgICAgU3RyaW5nLnZhbHVlT2YoVmFsaWRhdGlvbk1vZGUu\nTk9ORSksCiAgICAgICAgICAgIFN0cmluZy52YWx1ZU9mKFZhbGlkYXRpb25N\nb2RlLk5PTkUpLnRvTG93ZXJDYXNlKCkKICAgICAgICB9OwogICAgICAgIGNv\nbmYudmFsaWRhdGlvbk1vZGUuc2V0QWxpYXNlcyhhbGlhc2VzKTsKICAgICAg\nICBjb25mLnZhbGlkYXRpb25Nb2RlLnNldEFsaWFzTGlzdENvbXByZWhlbnNp\ndmUodHJ1ZSk7CiAgICAgICAgY29uZi52YWxpZGF0aW9uTW9kZS5zZXREZWZh\ndWx0KGFsaWFzZXNbMF0pOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBib29sZWFuIGFmdGVyU3BlY2lm\naWNhdGlvblNldChDb25maWd1cmF0aW9uIGMpIHsKICAgICAgICBpZiAoIU9w\nZW5KUEFDb25maWd1cmF0aW9uSW1wbC5jbGFzcy5pc0luc3RhbmNlKGMpCiAg\nICAgICAgICYmICFTUEVDX0pQQS5pc1NhbWUoKChPcGVuSlBBQ29uZmlndXJh\ndGlvbikgYykuZ2V0U3BlY2lmaWNhdGlvbigpKSkKICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwogCiAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb25JbXBs\nIGNvbmYgPSAoT3BlbkpQQUNvbmZpZ3VyYXRpb25JbXBsKSBjOwogICAgICAg\nIGNvbmYubWV0YUZhY3RvcnlQbHVnaW4uc2V0RGVmYXVsdChTUEVDX0pQQS5n\nZXROYW1lKCkpOwogICAgICAgIGNvbmYubWV0YUZhY3RvcnlQbHVnaW4uc2V0\nU3RyaW5nKFNQRUNfSlBBLmdldE5hbWUoKSk7CiAgICAgICAgY29uZi5sb2Nr\nTWFuYWdlclBsdWdpbi5zZXREZWZhdWx0KCJtaXhlZCIpOwogICAgICAgIGNv\nbmYubG9ja01hbmFnZXJQbHVnaW4uc2V0U3RyaW5nKCJtaXhlZCIpOwogICAg\nICAgIGNvbmYubm9udHJhbnNhY3Rpb25hbFdyaXRlLnNldERlZmF1bHQoInRy\ndWUiKTsKICAgICAgICBjb25mLm5vbnRyYW5zYWN0aW9uYWxXcml0ZS5zZXQo\ndHJ1ZSk7CiAgICAgICAgaW50IHNwZWNWZXJzaW9uID0gKChPcGVuSlBBQ29u\nZmlndXJhdGlvbikgYykuZ2V0U3BlY2lmaWNhdGlvbkluc3RhbmNlKCkuZ2V0\nVmVyc2lvbigpOwogICAgICAgIENvbXBhdGliaWxpdHkgY29tcGF0aWJpbGl0\neSA9IGNvbmYuZ2V0Q29tcGF0aWJpbGl0eUluc3RhbmNlKCk7CiAgICAgICAg\naWYgKHNwZWNWZXJzaW9uIDwgMikgewogICAgICAgICAgICAgY29tcGF0aWJp\nbGl0eS5zZXRGbHVzaEJlZm9yZURldGFjaCh0cnVlKTsKICAgICAgICAgICAg\nY29tcGF0aWJpbGl0eS5zZXRDb3B5T25EZXRhY2godHJ1ZSk7CiAgICAgICAg\nICAgIGNvbXBhdGliaWxpdHkuc2V0UHJpdmF0ZVBlcnNpc3RlbnRQcm9wZXJ0\naWVzKHRydWUpOwogICAgICAgICAgICAvLyBEaXNhYmxlIGJlYW4gdmFsaWRh\ndGlvbiBmb3Igc3BlYyBsZXZlbCA8IDIgY29uZmlndXJhdGlvbnMKICAgICAg\nICAgICAgY29uZi52YWxpZGF0aW9uTW9kZS5zZXQoU3RyaW5nLnZhbHVlT2Yo\nVmFsaWRhdGlvbk1vZGUuTk9ORSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAg\nICAgICAgIGNvbXBhdGliaWxpdHkuc2V0QWJzdHJhY3RNYXBwaW5nVW5pRGly\nZWN0aW9uYWwodHJ1ZSk7CiAgICAgICAgICAgIGNvbXBhdGliaWxpdHkuc2V0\nTm9uRGVmYXVsdE1hcHBpbmdBbGxvd2VkKHRydWUpOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIExvYWQg\nY29uZmlndXJhdGlvbiBmcm9tIHRoZSBnaXZlbiBwZXJzaXN0ZW5jZSB1bml0\nIHdpdGggdGhlIHNwZWNpZmllZAogICAgICogdXNlciBwcm9wZXJ0aWVzLgog\nICAgICovCiAgICBwdWJsaWMgQ29uZmlndXJhdGlvblByb3ZpZGVyIGxvYWQo\nUGVyc2lzdGVuY2VVbml0SW5mbyBwaW5mbywgTWFwIG0pCiAgICAgICAgdGhy\nb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAocGluZm8gPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKCFpc09wZW5K\nUEFQZXJzaXN0ZW5jZVByb3ZpZGVyKHBpbmZvLCBudWxsKSkgewogICAgICAg\nICAgICB3YXJuVW5rbm93blByb3ZpZGVyKHBpbmZvKTsKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBDb25maWd1cmF0aW9u\nUHJvdmlkZXJJbXBsIGNwID0gbmV3IENvbmZpZ3VyYXRpb25Qcm92aWRlcklt\ncGwoKTsKICAgICAgICBjcC5hZGRQcm9wZXJ0aWVzKFBlcnNpc3RlbmNlVW5p\ndEluZm9JbXBsLnRvT3BlbkpQQVByb3BlcnRpZXMocGluZm8pKTsKICAgICAg\nICBjcC5hZGRQcm9wZXJ0aWVzKG0pOwogICAgICAgIGlmIChwaW5mbyBpbnN0\nYW5jZW9mIFBlcnNpc3RlbmNlVW5pdEluZm9JbXBsKSB7CiAgICAgICAgICAg\nIFBlcnNpc3RlbmNlVW5pdEluZm9JbXBsIGltcGwgPSAoUGVyc2lzdGVuY2VV\nbml0SW5mb0ltcGwpIHBpbmZvOwogICAgICAgICAgICBpZiAoaW1wbC5nZXRQ\nZXJzaXN0ZW5jZVhtbEZpbGVVcmwoKSAhPSBudWxsKQogICAgICAgICAgICAg\nICAgY3Auc2V0U291cmNlKGltcGwuZ2V0UGVyc2lzdGVuY2VYbWxGaWxlVXJs\nKCkudG9TdHJpbmcoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjcDsK\nICAgIH0KCiAgICAvKioKICAgICAqIExvYWQgY29uZmlndXJhdGlvbiBmcm9t\nIHRoZSBnaXZlbiByZXNvdXJjZSBhbmQgdW5pdCBuYW1lcywgd2hpY2ggbWF5\nCiAgICAgKiBiZSBudWxsLgogICAgICovCiAgICBwdWJsaWMgQ29uZmlndXJh\ndGlvblByb3ZpZGVyIGxvYWQoU3RyaW5nIHJzcmMsIFN0cmluZyBuYW1lLCBN\nYXAgbSkKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIGJv\nb2xlYW4gZXhwbGljaXQgPSAhU3RyaW5nVXRpbHMuaXNFbXB0eShyc3JjKTsK\nICAgICAgICBpZiAoIWV4cGxpY2l0KQogICAgICAgICAgICByc3JjID0gUlNS\nQ19ERUZBVUxUOwogICAgICAgIAogICAgICAgIENvbmZpZ3VyYXRpb25Qcm92\naWRlckltcGwgY3AgPSBuZXcgQ29uZmlndXJhdGlvblByb3ZpZGVySW1wbCgp\nOwogICAgICAgIEJvb2xlYW4gcmV0ID0gbG9hZChjcCwgcnNyYywgbmFtZSwg\nbSwgbnVsbCwgZXhwbGljaXQpOwogICAgICAgIGlmIChyZXQgIT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIChyZXQuYm9vbGVhblZhbHVlKCkpID8gY3Ag\nOiBudWxsOwogICAgICAgIGlmIChleHBsaWNpdCkKICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CgogICAgICAgIC8vIHBlcnNpc3RlbmNlLnhtbCBkb2VzIG5v\ndCBleGlzdDsganVzdCBsb2FkIG1hcAogICAgICAgIFBlcnNpc3RlbmNlVW5p\ndEluZm9JbXBsIHBpbmZvID0gbmV3IFBlcnNpc3RlbmNlVW5pdEluZm9JbXBs\nKCk7CiAgICAgICAgcGluZm8uZnJvbVVzZXJQcm9wZXJ0aWVzKG0pOwogICAg\nICAgIGlmICghaXNPcGVuSlBBUGVyc2lzdGVuY2VQcm92aWRlcihwaW5mbywg\nbnVsbCkpIHsKICAgICAgICAgICAgd2FyblVua25vd25Qcm92aWRlcihwaW5m\nbyk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAg\nICBjcC5hZGRQcm9wZXJ0aWVzKHBpbmZvLnRvT3BlbkpQQVByb3BlcnRpZXMo\nKSk7CiAgICAgICAgcmV0dXJuIGNwOwogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIENvbmZpZ3VyYXRpb25Qcm92aWRlciBsb2FkKFN0cmluZyBy\nc3JjLCBTdHJpbmcgYW5jaG9yLCAKICAgICAgICBDbGFzc0xvYWRlciBsb2Fk\nZXIpCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAo\ncnNyYyAhPSBudWxsICYmICFyc3JjLmVuZHNXaXRoKCIueG1sIikpCiAgICAg\nICAgICAgIHJldHVybiBudWxsOwogICAgICAgIENvbmZpZ3VyYXRpb25Qcm92\naWRlckltcGwgY3AgPSBuZXcgQ29uZmlndXJhdGlvblByb3ZpZGVySW1wbCgp\nOwogICAgICAgIGlmIChsb2FkKGNwLCByc3JjLCBhbmNob3IsIG51bGwsIGxv\nYWRlciwgdHJ1ZSkgPT0gQm9vbGVhbi5UUlVFKQogICAgICAgICAgICByZXR1\ncm4gY3A7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgQE92ZXJy\naWRlCiAgICBwdWJsaWMgQ29uZmlndXJhdGlvblByb3ZpZGVyIGxvYWQoRmls\nZSBmaWxlLCBTdHJpbmcgYW5jaG9yKSAKICAgICAgICB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgICAgIGlmICghZmlsZS5nZXROYW1lKCkuZW5kc1dpdGgo\nIi54bWwiKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIENv\nbmZpZ3VyYXRpb25QYXJzZXIgcGFyc2VyID0gbmV3IENvbmZpZ3VyYXRpb25Q\nYXJzZXIobnVsbCk7CiAgICAgICAgcGFyc2VyLnBhcnNlKGZpbGUpOwogICAg\nICAgIHJldHVybiBsb2FkKGZpbmRVbml0KChMaXN0PFBlcnNpc3RlbmNlVW5p\ndEluZm9JbXBsPikgCiAgICAgICAgICAgIHBhcnNlci5nZXRSZXN1bHRzKCks\nIGFuY2hvciwgbnVsbCksIG51bGwpOwogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIFN0cmluZyBnZXREZWZhdWx0UmVzb3VyY2VMb2NhdGlvbigp\nIHsKICAgICAgICByZXR1cm4gUlNSQ19ERUZBVUxUOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIExpc3QgZ2V0QW5jaG9yc0luRmlsZShGaWxl\nIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgQ29uZmlndXJh\ndGlvblBhcnNlciBwYXJzZXIgPSBuZXcgQ29uZmlndXJhdGlvblBhcnNlcihu\ndWxsKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBwYXJzZXIucGFyc2Uo\nZmlsZSk7CiAgICAgICAgICAgIHJldHVybiBnZXRVbml0TmFtZXMocGFyc2Vy\nKTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIC8vIG5vdCBhbGwgY29uZmlndXJhdGlvbiBmaWxlcyBhcmUgWE1MOyBy\nZXR1cm4gbnVsbCBpZiB1bnBhcnNhYmxlCiAgICAgICAgICAgIHJldHVybiBu\ndWxsOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIExpc3Q8U3RyaW5n\nPiBnZXRVbml0TmFtZXMoQ29uZmlndXJhdGlvblBhcnNlciBwYXJzZXIpIHsK\nICAgICAgICBMaXN0PFBlcnNpc3RlbmNlVW5pdEluZm9JbXBsPiB1bml0cyA9\nIHBhcnNlci5nZXRSZXN1bHRzKCk7CiAgICAgICAgTGlzdDxTdHJpbmc+IG5h\nbWVzID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7CiAgICAgICAgZm9yIChQ\nZXJzaXN0ZW5jZVVuaXRJbmZvSW1wbCB1bml0IDogdW5pdHMpCiAgICAgICAg\nICAgIG5hbWVzLmFkZCh1bml0LmdldFBlcnNpc3RlbmNlVW5pdE5hbWUoKSk7\nCiAgICAgICAgcmV0dXJuIG5hbWVzOwogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIExpc3QgZ2V0QW5jaG9yc0luUmVzb3VyY2UoU3RyaW5nIHJl\nc291cmNlKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBDb25maWd1cmF0\naW9uUGFyc2VyIHBhcnNlciA9IG5ldyBDb25maWd1cmF0aW9uUGFyc2VyKG51\nbGwpOwogICAgICAgIHRyeSB7CiAgICAgICAgCUxpc3QgcmVzdWx0cyA9IG5l\ndyBBcnJheUxpc3QoKTsKICAgICAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVy\nID0gQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAg\nICAgICBKMkRvUHJpdkhlbHBlci5nZXRDb250ZXh0Q2xhc3NMb2FkZXJBY3Rp\nb24oKSk7CiAgICAgICAgICAgIExpc3Q8VVJMPiB1cmxzID0gZ2V0UmVzb3Vy\nY2VVUkxzKHJlc291cmNlLCBsb2FkZXIpOwogICAgICAgICAgICBpZiAodXJs\ncyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBmb3IgKFVSTCB1cmwgOiB1\ncmxzKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnBhcnNlKHVybCk7\nCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5hZGRBbGwoZ2V0VW5pdE5h\nbWVzKHBhcnNlcikpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nCiAgICAgICAgICAgIHJldHVybiByZXN1bHRzOwogICAgICAgIH0gY2F0Y2gg\nKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gbm90IGFsbCBjb25m\naWd1cmF0aW9uIGZpbGVzIGFyZSBYTUw7IHJldHVybiBudWxsIGlmIHVucGFy\nc2FibGUKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAg\nfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIENvbmZpZ3VyYXRpb25Qcm92\naWRlciBsb2FkR2xvYmFscyhDbGFzc0xvYWRlciBsb2FkZXIpCiAgICAgICAg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmdbXSBwcmVmaXhl\ncyA9IFByb2R1Y3REZXJpdmF0aW9ucy5nZXRDb25maWd1cmF0aW9uUHJlZml4\nZXMoKTsKICAgICAgICBTdHJpbmcgcnNyYyA9IG51bGw7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBwcmVmaXhlcy5sZW5ndGggJiYgU3RyaW5nVXRp\nbHMuaXNFbXB0eShyc3JjKTsgaSsrKQogICAgICAgICAgIHJzcmMgPSBBY2Nl\nc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlcgogICAg\nICAgICAgICAgICAgLmdldFByb3BlcnR5QWN0aW9uKHByZWZpeGVzW2ldICsg\nIi5wcm9wZXJ0aWVzIikpOyAKICAgICAgICBib29sZWFuIGV4cGxpY2l0ID0g\nIVN0cmluZ1V0aWxzLmlzRW1wdHkocnNyYyk7CiAgICAgICAgU3RyaW5nIGFu\nY2hvciA9IG51bGw7CiAgICAgICAgaW50IGlkeCA9ICghZXhwbGljaXQpID8g\nLTEgOiByc3JjLmxhc3RJbmRleE9mKCcjJyk7CiAgICAgICAgaWYgKGlkeCAh\nPSAtMSkgewogICAgICAgICAgICAvLyBzZXBhcmF0ZSBuYW1lIGZyb20gPHJl\nc3JvdWNlPiM8bmFtZT4gc3RyaW5nCiAgICAgICAgICAgIGlmIChpZHggPCBy\nc3JjLmxlbmd0aCgpIC0gMSkKICAgICAgICAgICAgICAgIGFuY2hvciA9IHJz\ncmMuc3Vic3RyaW5nKGlkeCArIDEpOwogICAgICAgICAgICByc3JjID0gcnNy\nYy5zdWJzdHJpbmcoMCwgaWR4KTsKICAgICAgICB9CiAgICAgICAgaWYgKFN0\ncmluZ1V0aWxzLmlzRW1wdHkocnNyYykpCiAgICAgICAgICAgIHJzcmMgPSBS\nU1JDX0dMT0JBTDsKICAgICAgICBlbHNlIGlmICghcnNyYy5lbmRzV2l0aCgi\nLnhtbCIpKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgQ29u\nZmlndXJhdGlvblByb3ZpZGVySW1wbCBjcCA9IG5ldyBDb25maWd1cmF0aW9u\nUHJvdmlkZXJJbXBsKCk7CiAgICAgICAgaWYgKGxvYWQoY3AsIHJzcmMsIGFu\nY2hvciwgbnVsbCwgbG9hZGVyLCBleHBsaWNpdCkgPT0gQm9vbGVhbi5UUlVF\nKQogICAgICAgICAgICByZXR1cm4gY3A7CiAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgQ29uZmlndXJhdGlv\nblByb3ZpZGVyIGxvYWREZWZhdWx0cyhDbGFzc0xvYWRlciBsb2FkZXIpCiAg\nICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBDb25maWd1cmF0\naW9uUHJvdmlkZXJJbXBsIGNwID0gbmV3IENvbmZpZ3VyYXRpb25Qcm92aWRl\nckltcGwoKTsKICAgICAgICBpZiAobG9hZChjcCwgUlNSQ19ERUZBVUxULCBu\ndWxsLCBudWxsLCBsb2FkZXIsIGZhbHNlKSA9PSBCb29sZWFuLlRSVUUpCiAg\nICAgICAgICAgIHJldHVybiBjcDsKICAgICAgICByZXR1cm4gbnVsbDsKICAg\nIH0KCiAgICAgIC8qKgogICAgICAqIFRoaXMgbWV0aG9kIGNoZWNrcyB0byBz\nZWUgaWYgdGhlIHByb3ZpZGVkIDxjb2RlPnB1TmFtZTwvY29kZT4gd2FzCiAg\nICAgICogZGV0ZWN0ZWQgaW4gbXVsdGlwbGUgcmVzb3VyY2VzLiBJZiBhIGNv\nbGxpc2lvbiBpcyBkZXRlY3RlZCwgYSB3YXJuaW5nCiAgICAgICogd2lsbCBi\nZSBsb2dnZWQgYW5kIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIDxjb2RlPnRy\ndWU8L2NvZGU+LgogICAgICAqIDxwPgogICAgICAqLwogICAgIHB1YmxpYyBi\nb29sZWFuIGNoZWNrUHVOYW1lQ29sbGlzaW9ucyhMb2cgbG9nZ2VyLFN0cmlu\nZyBwdU5hbWUpewogICAgICAgICBQVU5hbWVDb2xsaXNpb24gcCA9IF9wdU5h\nbWVDb2xsaXNpb25zLmdldChwdU5hbWUpOwogICAgICAgICBpZiAocCAhPSBu\ndWxsKXsKICAgICAgICAgICAgIHAubG9nQ29sbGlzaW9uKGxvZ2dlcik7CiAg\nICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgfQogICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgfQoKICAgIHByaXZhdGUgc3RhdGljIExpc3Q8\nVVJMPiBnZXRSZXNvdXJjZVVSTHMoU3RyaW5nIHJzcmMsIENsYXNzTG9hZGVy\nIGxvYWRlcikKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIEVudW1lcmF0aW9uPFVSTD4gdXJscyA9IG51bGw7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgdXJscyA9IEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxl\nZ2VkKEoyRG9Qcml2SGVscGVyLmdldFJlc291cmNlc0FjdGlvbihsb2FkZXIs\nIHJzcmMpKTsgCiAgICAgICAgICAgIGlmICghdXJscy5oYXNNb3JlRWxlbWVu\ndHMoKSkgewogICAgICAgICAgICAgICAgaWYgKCFyc3JjLnN0YXJ0c1dpdGgo\nIk1FVEEtSU5GIikpCiAgICAgICAgICAgICAgICAgIHVybHMgPSBBY2Nlc3ND\nb250cm9sbGVyLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlci5nZXRSZXNv\ndXJjZXNBY3Rpb24obG9hZGVyLCAiTUVUQS1JTkYvIiArIHJzcmMpKTsKICAg\nICAgICAgICAgICAgIGlmICghdXJscy5oYXNNb3JlRWxlbWVudHMoKSkKICAg\nICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQog\nICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb24gcGFl\nKSB7CiAgICAgICAgICAgIHRocm93IChJT0V4Y2VwdGlvbikgcGFlLmdldEV4\nY2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIENvbGxlY3Rp\nb25zLmxpc3QodXJscyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBMb29rcyB0\naHJvdWdoIHRoZSByZXNvdXJjZXMgYXQgPGNvZGU+cnNyYzwvY29kZT4gZm9y\nIGEgY29uZmlndXJhdGlvbgogICAgICogZmlsZSB0aGF0IG1hdGNoZXMgPGNv\nZGU+bmFtZTwvY29kZT4gKG9yIGFuIHVubmFtZWQgb25lIGlmCiAgICAgKiA8\nY29kZT5uYW1lPC9jb2RlPiBpcyA8Y29kZT5udWxsPC9jb2RlPiksIGFuZCBs\nb2FkcyB0aGUgWE1MIGluIHRoZQogICAgICogcmVzb3VyY2UgaW50byBhIG5l\ndyB7QGxpbmsgUGVyc2lzdGVuY2VVbml0SW5mb30uIFRoZW4sIGFwcGxpZXMg\ndGhlCiAgICAgKiBvdmVycmlkZXMgaW4gPGNvZGU+bTwvY29kZT4uCiAgICAg\nKgogICAgICogQHJldHVybiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBpZiB0aGUg\ncmVzb3VyY2Ugd2FzIGxvYWRlZCwgbnVsbCBpZiBpdAogICAgICogZG9lcyBu\nb3QgZXhpc3QsIG9yIHtAbGluayBCb29sZWFuI0ZBTFNFfSBpZiBpdCBpcyBu\nb3QgZm9yIE9wZW5KUEEKICAgICAqLwogICAgcHJpdmF0ZSBCb29sZWFuIGxv\nYWQoQ29uZmlndXJhdGlvblByb3ZpZGVySW1wbCBjcCwgU3RyaW5nIHJzcmMs\nIAogICAgICAgIFN0cmluZyBuYW1lLCBNYXAgbSwgQ2xhc3NMb2FkZXIgbG9h\nZGVyLCBib29sZWFuIGV4cGxpY2l0KQogICAgICAgIHRocm93cyBJT0V4Y2Vw\ndGlvbiB7CiAgICAgICAgaWYgKGxvYWRlciA9PSBudWxsKQogICAgICAgICAg\nICBsb2FkZXIgPSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZChKMkRv\nUHJpdkhlbHBlci5nZXRDb250ZXh0Q2xhc3NMb2FkZXJBY3Rpb24oKSk7Cgog\nICAgICAgIExpc3Q8VVJMPiB1cmxzID0gZ2V0UmVzb3VyY2VVUkxzKHJzcmMs\nIGxvYWRlcik7CiAgICAgICAgaWYgKHVybHMgPT0gbnVsbCB8fCB1cmxzLnNp\nemUoKSA9PSAwKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAg\nQ29uZmlndXJhdGlvblBhcnNlciBwYXJzZXIgPSBuZXcgQ29uZmlndXJhdGlv\nblBhcnNlcihtKTsKICAgICAgICBQZXJzaXN0ZW5jZVVuaXRJbmZvSW1wbCBw\naW5mbyA9IHBhcnNlUmVzb3VyY2VzKHBhcnNlciwgdXJscywgbmFtZSwgbG9h\nZGVyKTsKICAgICAgICBpZiAocGluZm8gPT0gbnVsbCkgewogICAgICAgICAg\nICBpZiAoIWV4cGxpY2l0KQogICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xl\nYW4uRkFMU0U7CiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nUmVzb3Vy\nY2VFeGNlcHRpb24oX2xvYy5nZXQoIm1pc3NpbmcteG1sLWNvbmZpZyIsIAog\nICAgICAgICAgICAgICAgcnNyYywgU3RyaW5nLnZhbHVlT2YobmFtZSkpLmdl\ndE1lc3NhZ2UoKSwgZ2V0Q2xhc3MoKS5nZXROYW1lKCksIHJzcmMpOwogICAg\nICAgIH0gZWxzZSBpZiAoIWlzT3BlbkpQQVBlcnNpc3RlbmNlUHJvdmlkZXIo\ncGluZm8sIGxvYWRlcikpIHsKICAgICAgICAgICAgaWYgKCFleHBsaWNpdCkg\newogICAgICAgICAgICAgICAgd2FyblVua25vd25Qcm92aWRlcihwaW5mbyk7\nCiAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbi5GQUxTRTsKICAgICAg\nICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ1Jlc291cmNl\nRXhjZXB0aW9uKF9sb2MuZ2V0KCJ1bmtub3duLXByb3ZpZGVyIiwgCiAgICAg\nICAgICAgICAgICByc3JjLCBuYW1lLCBwaW5mby5nZXRQZXJzaXN0ZW5jZVBy\nb3ZpZGVyQ2xhc3NOYW1lKCkpLgogICAgICAgICAgICAgICAgZ2V0TWVzc2Fn\nZSgpLCBnZXRDbGFzcygpLmdldE5hbWUoKSwgcnNyYyk7CiAgICAgICAgfQog\nICAgICAgIGNwLmFkZFByb3BlcnRpZXMocGluZm8udG9PcGVuSlBBUHJvcGVy\ndGllcygpKTsKICAgICAgICBjcC5zZXRTb3VyY2UocGluZm8uZ2V0UGVyc2lz\ndGVuY2VYbWxGaWxlVXJsKCkudG9TdHJpbmcoKSk7CiAgICAgICAgcmV0dXJu\nIEJvb2xlYW4uVFJVRTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIHJl\nc291cmNlcyBhdCB0aGUgZ2l2ZW4gbG9jYXRpb24uIFNlYXJjaGVzIGZvciBh\nCiAgICAgKiBQZXJzaXN0ZW5jZVVuaXRJbmZvIHdpdGggdGhlIHJlcXVlc3Rl\nZCBuYW1lLCBvciBhbiBPcGVuSlBBIHVuaXQgaWYKICAgICAqIG5vIG5hbWUg\nZ2l2ZW4gKHByZWZlcnJpbmcgYW4gdW5uYW1lZCBPcGVuSlBBIHVuaXQgdG8g\nYSBuYW1lZCBvbmUpLgogICAgICovCiAgICBwcml2YXRlIFBlcnNpc3RlbmNl\nVW5pdEluZm9JbXBsIHBhcnNlUmVzb3VyY2VzKENvbmZpZ3VyYXRpb25QYXJz\nZXIgcGFyc2VyLAogICAgICAgIExpc3Q8VVJMPiB1cmxzLCBTdHJpbmcgbmFt\nZSwgQ2xhc3NMb2FkZXIgbG9hZGVyKQogICAgICAgIHRocm93cyBJT0V4Y2Vw\ndGlvbiB7CiAgICAgICAgTGlzdDxQZXJzaXN0ZW5jZVVuaXRJbmZvSW1wbD4g\ncGluZm9zID0gbmV3IEFycmF5TGlzdDxQZXJzaXN0ZW5jZVVuaXRJbmZvSW1w\nbD4oKTsKICAgICAgICBmb3IgKFVSTCB1cmwgOiB1cmxzKSB7CiAgICAgICAg\nICAgIHBhcnNlci5wYXJzZSh1cmwpOwogICAgICAgICAgICBwaW5mb3MuYWRk\nQWxsKChMaXN0PFBlcnNpc3RlbmNlVW5pdEluZm9JbXBsPikgcGFyc2VyLmdl\ndFJlc3VsdHMoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmaW5kVW5p\ndChwaW5mb3MsIG5hbWUsIGxvYWRlcik7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBGaW5kIHRoZSB1bml0IHdpdGggdGhlIGdpdmVuIG5hbWUsIG9yIGFuIE9w\nZW5KUEEgdW5pdCBpZiBubyBuYW1lIGlzCiAgICAgKiBnaXZlbiAocHJlZmVy\ncmluZyBhbiB1bm5hbWVkIE9wZW5KUEEgdW5pdCB0byBhIG5hbWVkIG9uZSku\nCiAgICAgKi8KICAgIHByaXZhdGUgUGVyc2lzdGVuY2VVbml0SW5mb0ltcGwg\nZmluZFVuaXQoTGlzdDxQZXJzaXN0ZW5jZVVuaXRJbmZvSW1wbD4gCiAgICAg\nICAgcGluZm9zLCBTdHJpbmcgbmFtZSwgQ2xhc3NMb2FkZXIgbG9hZGVyKSB7\nCiAgICAgICAgUGVyc2lzdGVuY2VVbml0SW5mb0ltcGwgb2pwYSA9IG51bGw7\nCiAgICAgICAgUGVyc2lzdGVuY2VVbml0SW5mb0ltcGwgcmVzdWx0ID0gbnVs\nbDsKICAgICAgICBmb3IgKFBlcnNpc3RlbmNlVW5pdEluZm9JbXBsIHBpbmZv\nIDogcGluZm9zKSB7CiAgICAgICAgICAgIC8vIGZvdW5kIG5hbWVkIHVuaXQ/\nCiAgICAgICAgICAgIGlmIChuYW1lICE9IG51bGwpIHsKICAgICAgICAgICAg\nICAgIGlmIChuYW1lLmVxdWFscyhwaW5mby5nZXRQZXJzaXN0ZW5jZVVuaXRO\nYW1lKCkpKXsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IG51\nbGwpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFB1TmFtZUNv\nbGxpc2lvbihuYW1lLCByZXN1bHQuZ2V0UGVyc2lzdGVuY2VYbWxGaWxlVXJs\nKCkudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBwaW5mby5nZXRQZXJzaXN0ZW5jZVhtbEZpbGVVcmwoKS50b1N0cmluZygp\nKTsKCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgLy8gR3JhYiBhIHJlZiB0byB0aGUgcGluZm8gdGhhdCBt\nYXRjaGVzIHRoZSBuYW1lIHdlJ3JlCiAgICAgICAgICAgICAgICAgICAgICAg\nIC8vIGxvb2tpbmcgZm9yLiBLZWVwIGdvaW5nIHRvIGxvb2sgZm9yIGR1cGxp\nY2F0ZSBwdSBuYW1lcy4KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0\nID0gcGluZm87CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0K\nCiAgICAgICAgICAgIGlmIChpc09wZW5KUEFQZXJzaXN0ZW5jZVByb3ZpZGVy\nKHBpbmZvLCBsb2FkZXIpKSB7CiAgICAgICAgICAgICAgICAvLyBpZiBubyBu\nYW1lIGdpdmVuIGFuZCBmb3VuZCB1bm5hbWVkIHVuaXQsIHJldHVybiBpdC4g\nIAogICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHJlY29yZCBhcyBkZWZh\ndWx0IHVuaXQgdW5sZXNzIHdlIGZpbmQgYSBiZXR0ZXIgbWF0Y2ggbGF0ZXIK\nICAgICAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHBpbmZv\nLmdldFBlcnNpc3RlbmNlVW5pdE5hbWUoKSkpCiAgICAgICAgICAgICAgICAg\nICAgcmV0dXJuIHBpbmZvOwogICAgICAgICAgICAgICAgaWYgKG9qcGEgPT0g\nbnVsbCkKICAgICAgICAgICAgICAgICAgICBvanBhID0gcGluZm87CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYocmVzdWx0IT1udWxsKXsK\nICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIG9qcGE7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hl\ndGhlciB0aGUgZ2l2ZW4gcGVyc2lzdGVuY2UgdW5pdCB1c2VzIGFuIE9wZW5K\nUEEgcHJvdmlkZXIuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGJvb2xl\nYW4gaXNPcGVuSlBBUGVyc2lzdGVuY2VQcm92aWRlcgogICAgICAgIChQZXJz\naXN0ZW5jZVVuaXRJbmZvIHBpbmZvLCBDbGFzc0xvYWRlciBsb2FkZXIpIHsK\nICAgICAgICBTdHJpbmcgcHJvdmlkZXIgPSBwaW5mby5nZXRQZXJzaXN0ZW5j\nZVByb3ZpZGVyQ2xhc3NOYW1lKCk7CiAgICAgICAgaWYgKFN0cmluZ1V0aWxz\nLmlzRW1wdHkocHJvdmlkZXIpIHx8IFBlcnNpc3RlbmNlUHJvdmlkZXJJbXBs\nLmNsYXNzLmdldE5hbWUoKS5lcXVhbHMocHJvdmlkZXIpKQogICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgaWYgKGxvYWRlciA9PSBudWxsKQog\nICAgICAgICAgICBsb2FkZXIgPSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmls\nZWdlZChKMkRvUHJpdkhlbHBlci5nZXRDb250ZXh0Q2xhc3NMb2FkZXJBY3Rp\nb24oKSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKFBlcnNpc3Rl\nbmNlUHJvdmlkZXJJbXBsLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oQ2xhc3Mu\nZm9yTmFtZShwcm92aWRlciwgZmFsc2UsIGxvYWRlcikpKQogICAgICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxl\nIHQpIHsKICAgICAgICAgICAgbG9nKF9sb2MuZ2V0KCJ1bmxvYWRhYmxlLXBy\nb3ZpZGVyIiwgcHJvdmlkZXIsIHQpLmdldE1lc3NhZ2UoKSk7CiAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgfQoKICAgIC8qKgogICAgICogV2FybiB0aGUgdXNlciB0aGF0\nIHdlIGNvdWxkIG9ubHkgZmluZCBhbiB1bnJlY29nbml6ZWQgcGVyc2lzdGVu\nY2UgCiAgICAgKiBwcm92aWRlci4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0\naWMgdm9pZCB3YXJuVW5rbm93blByb3ZpZGVyKFBlcnNpc3RlbmNlVW5pdElu\nZm8gcGluZm8pIHsKICAgICAgICBsb2coX2xvYy5nZXQoInVucmVjb2duaXpl\nZC1wcm92aWRlciIsIHBpbmZvLmdldFBlcnNpc3RlbmNlUHJvdmlkZXJDbGFz\nc05hbWUoKSkuZ2V0TWVzc2FnZSgpKTsKICAgIH0KICAgIAogICAgLyoqCiAg\nICAgKiBMb2cgYSBtZXNzYWdlLiAgIAogICAgICovCiAgICBwcml2YXRlIHN0\nYXRpYyB2b2lkIGxvZyhTdHJpbmcgbXNnKSB7CiAgICAgICAgLy8gYXQgdGhp\ncyBwb2ludCBsb2dnaW5nIGlzbid0IGNvbmZpZ3VyZWQgeWV0CiAgICAgICAg\nU3lzdGVtLmVyci5wcmludGxuKG1zZyk7CiAgICB9CgogICAgcHJpdmF0ZSB2\nb2lkIGFkZFB1TmFtZUNvbGxpc2lvbihTdHJpbmcgcHVOYW1lLCBTdHJpbmcg\nZmlsZTEsIFN0cmluZyBmaWxlMil7CiAgICAgICAgUFVOYW1lQ29sbGlzaW9u\nIHB1biA9IF9wdU5hbWVDb2xsaXNpb25zLmdldChwdU5hbWUpOwogICAgICAg\nIGlmIChwdW4gIT0gbnVsbCl7CiAgICAgICAgICAgIHB1bi5hZGRDb2xsaXNp\nb24oZmlsZTEsIGZpbGUyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICBfcHVOYW1lQ29sbGlzaW9ucy5wdXQocHVOYW1lLCBuZXcgUFVOYW1lQ29s\nbGlzaW9uKHB1TmFtZSwgZmlsZTEsIGZpbGUyKSk7CiAgICAgICAgfQogICAg\nfQogICAgCiAgICAvKioKICAgICAqIEN1c3RvbSBjb25maWd1cmF0aW9uIHBy\nb3ZpZGVyLiAgIAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIENv\nbmZpZ3VyYXRpb25Qcm92aWRlckltcGwKICAgICAgICBleHRlbmRzIE1hcENv\nbmZpZ3VyYXRpb25Qcm92aWRlciB7CgogICAgICAgIHByaXZhdGUgU3RyaW5n\nIF9zb3VyY2U7CgogICAgICAgIHB1YmxpYyBDb25maWd1cmF0aW9uUHJvdmlk\nZXJJbXBsKCkgewogICAgICAgIH0KCiAgICAgICAgcHVibGljIENvbmZpZ3Vy\nYXRpb25Qcm92aWRlckltcGwoTWFwIHByb3BzKSB7CiAgICAgICAgICAgIHN1\ncGVyKHByb3BzKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAq\nIFNldCB0aGUgc291cmNlIG9mIGluZm9ybWF0aW9uIGluIHRoaXMgcHJvdmlk\nZXIuCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHZvaWQgc2V0U291cmNl\nKFN0cmluZyBzb3VyY2UpIHsKICAgICAgICAgICAgX3NvdXJjZSA9IHNvdXJj\nZTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1Ymxp\nYyB2b2lkIHNldEludG8oQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAg\nICAgIGlmIChjb25mIGluc3RhbmNlb2YgT3BlbkpQQUNvbmZpZ3VyYXRpb24p\nIHsKICAgICAgICAgICAgICAgIE9wZW5KUEFDb25maWd1cmF0aW9uIG9jb25m\nID0gKE9wZW5KUEFDb25maWd1cmF0aW9uKSBjb25mOwogICAgICAgICAgICAg\nICAgT2JqZWN0IHBlcnNpc3RlbmNlVmVyc2lvbiA9IGdldFByb3BlcnRpZXMo\nKS5nZXQoUGVyc2lzdGVuY2VVbml0SW5mb0ltcGwuUEVSU0lTVEVOQ0VfVkVS\nU0lPTik7CiAgICAgICAgICAgICAgICBpZiAocGVyc2lzdGVuY2VWZXJzaW9u\nID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBvY29uZi5zZXRTcGVj\naWZpY2F0aW9uKFNQRUNfSlBBKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBzcGVjIGxldmVsIGJh\nc2VkIG9uIHRoZSBwZXJzaXN0ZW5jZSB2ZXJzaW9uCiAgICAgICAgICAgICAg\nICAgICAgb2NvbmYuc2V0U3BlY2lmaWNhdGlvbigianBhICIgKyBwZXJzaXN0\nZW5jZVZlcnNpb24udG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgICAg\nZ2V0UHJvcGVydGllcygpLnJlbW92ZShQZXJzaXN0ZW5jZVVuaXRJbmZvSW1w\nbC5QRVJTSVNURU5DRV9WRVJTSU9OKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAvLyB3ZSBtZXJn\nZSBzZXZlcmFsIHBlcnNpc3RlbmNlLnhtbCBlbGVtZW50cyBpbnRvIHRoZSAK\nICAgICAgICAgICAgICAgIC8vIE1ldGFEYXRhRmFjdG9yeSBwcm9wZXJ0eSBp\nbXBsaWNpdGx5LiAgaWYgdGhlIHVzZXIgaGFzIGEKICAgICAgICAgICAgICAg\nIC8vIGdsb2JhbCBvcGVuanBhLnhtbCB3aXRoIHRoaXMgcHJvcGVydHkgc2V0\nLCBpdHMgdmFsdWUgd2lsbAogICAgICAgICAgICAgICAgLy8gZ2V0IG92ZXJ3\ncml0dGVuIGJ5IG91ciBpbXBsaWNpdCBzZXR0aW5nLiAgc28gaW5zdGVhZCwg\nY29tYmluZQogICAgICAgICAgICAgICAgLy8gdGhlIGdsb2JhbCB2YWx1ZSB3\naXRoIG91ciBzZXR0aW5ncwogICAgICAgICAgICAgICAgU3RyaW5nIG9yaWcg\nPSBvY29uZi5nZXRNZXRhRGF0YUZhY3RvcnkoKTsKICAgICAgICAgICAgICAg\nIGlmICghU3RyaW5nVXRpbHMuaXNFbXB0eShvcmlnKSkgewogICAgICAgICAg\nICAgICAgICAgIFN0cmluZyBrZXkgPSBQcm9kdWN0RGVyaXZhdGlvbnMuZ2V0\nQ29uZmlndXJhdGlvbktleSgiTWV0YURhdGFGYWN0b3J5IiwgZ2V0UHJvcGVy\ndGllcygpKTsKICAgICAgICAgICAgICAgICAgICBPYmplY3Qgb3ZlcnJpZGUg\nPSBnZXRQcm9wZXJ0aWVzKCkuZ2V0KGtleSk7CiAgICAgICAgICAgICAgICAg\nICAgaWYgKG92ZXJyaWRlIGluc3RhbmNlb2YgU3RyaW5nKQogICAgICAgICAg\nICAgICAgICAgICAgICBhZGRQcm9wZXJ0eShrZXksIENvbmZpZ3VyYXRpb25z\nLmNvbWJpbmVQbHVnaW5zKG9yaWcsIChTdHJpbmcpIG92ZXJyaWRlKSk7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN1\ncGVyLnNldEludG8oY29uZiwgbnVsbCk7CiAgICAgICAgICAgIExvZyBsb2cg\nPSBjb25mLmdldENvbmZpZ3VyYXRpb25Mb2coKTsKICAgICAgICAgICAgaWYg\nKGxvZy5pc1RyYWNlRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICBTdHJp\nbmcgc3JjID0gKF9zb3VyY2UgPT0gbnVsbCkgPyAiPyIgOiBfc291cmNlOwog\nICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJjb25mLWxvYWQi\nLCBzcmMsIGdldFByb3BlcnRpZXMoKSkpOwogICAgICAgICAgICB9CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogU0FYIGhhbmRsZXIgY2FwYWJs\nZSBvZiBwYXJzaW5nIGFuIEpQQSBwZXJzaXN0ZW5jZS54bWwgZmlsZS4KICAg\nICAqIFBhY2thZ2UtcHJvdGVjdGVkIGZvciB0ZXN0aW5nLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIGNsYXNzIENvbmZpZ3VyYXRpb25QYXJzZXIKICAg\nICAgICBleHRlbmRzIFhNTE1ldGFEYXRhUGFyc2VyIHsKCiAgICAgICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFBFUlNJU1RFTkNFX1hTRF8xXzAg\nPSAicGVyc2lzdGVuY2VfMV8wLnhzZCI7CiAgICAgICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgU3RyaW5nIFBFUlNJU1RFTkNFX1hTRF8yXzAgPSAicGVyc2lz\ndGVuY2VfMl8wLnhzZCI7CgogICAgICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAg\nICAgICAgKENvbmZpZ3VyYXRpb25QYXJzZXIuY2xhc3MpOwoKICAgICAgICBw\ncml2YXRlIGZpbmFsIE1hcCBfbWFwOwogICAgICAgIHByaXZhdGUgUGVyc2lz\ndGVuY2VVbml0SW5mb0ltcGwgX2luZm8gPSBudWxsOwogICAgICAgIHByaXZh\ndGUgVVJMIF9zb3VyY2UgPSBudWxsOwogICAgICAgIHByaXZhdGUgU3RyaW5n\nIF9wZXJzaXN0ZW5jZVZlcnNpb247CiAgICAgICAgcHJpdmF0ZSBTdHJpbmcg\nX3NjaGVtYUxvY2F0aW9uOwogICAgICAgIHByaXZhdGUgYm9vbGVhbiBfZXhj\nbHVkZVVubGlzdGVkU2V0ID0gZmFsc2U7CgogICAgICAgIHB1YmxpYyBDb25m\naWd1cmF0aW9uUGFyc2VyKE1hcCBtYXApIHsKICAgICAgICAgICAgX21hcCA9\nIG1hcDsKICAgICAgICAgICAgc2V0Q2FjaGluZyhmYWxzZSk7CiAgICAgICAg\nICAgIHNldFZhbGlkYXRpbmcodHJ1ZSk7CiAgICAgICAgICAgIHNldFBhcnNl\nVGV4dCh0cnVlKTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyB2b2lkIHBhcnNlKFVSTCB1cmwpCiAgICAgICAgICAgIHRo\ncm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9zb3VyY2UgPSB1cmw7\nCgogICAgICAgICAgICAvLyBwZWVrIGF0IHRoZSBkb2MgdG8gZGV0ZXJtaW5l\nIHRoZSB2ZXJzaW9uCiAgICAgICAgICAgIFhNTFZlcnNpb25QYXJzZXIgdnAg\nPSBuZXcgWE1MVmVyc2lvblBhcnNlcigicGVyc2lzdGVuY2UiKTsKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZwLnBhcnNlKHVybCk7CiAg\nICAgICAgICAgICAgICBfcGVyc2lzdGVuY2VWZXJzaW9uID0gdnAuZ2V0VmVy\nc2lvbigpOwogICAgICAgICAgICAgICAgX3NjaGVtYUxvY2F0aW9uID0gdnAu\nZ2V0U2NoZW1hTG9jYXRpb24oKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhy\nb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgICAgICBsb2coX2xvYy5nZXQo\nInZlcnNpb24tY2hlY2stZXJyb3IiLCAKICAgICAgICAgICAgICAgICAgICAg\nICAgX3NvdXJjZS50b1N0cmluZygpKS50b1N0cmluZygpKTsKICAgICAgICAg\nICAgfSAgICAgICAgICAgIAogICAgICAgICAgICBzdXBlci5wYXJzZSh1cmwp\nOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGlj\nIHZvaWQgcGFyc2UoRmlsZSBmaWxlKQogICAgICAgICAgICB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nX3NvdXJjZSA9IEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEoyRG9Q\ncml2SGVscGVyCiAgICAgICAgICAgICAgICAgICAgLnRvVVJMQWN0aW9uKGZp\nbGUpKTsKICAgICAgICAgICAgfSBjYXRjaCAoUHJpdmlsZWdlZEFjdGlvbkV4\nY2VwdGlvbiBwYWUpIHsKICAgICAgICAgICAgICAgIHRocm93IChNYWxmb3Jt\nZWRVUkxFeGNlcHRpb24pIHBhZS5nZXRFeGNlcHRpb24oKTsKICAgICAgICAg\nICAgfQogICAgICAgICAgICAvLyBwZWVrIGF0IHRoZSBkb2MgdG8gZGV0ZXJt\naW5lIHRoZSB2ZXJzaW9uCiAgICAgICAgICAgIFhNTFZlcnNpb25QYXJzZXIg\ndnAgPSBuZXcgWE1MVmVyc2lvblBhcnNlcigicGVyc2lzdGVuY2UiKTsKICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZwLnBhcnNlKGZpbGUp\nOwogICAgICAgICAgICAgICAgX3BlcnNpc3RlbmNlVmVyc2lvbiA9IHZwLmdl\ndFZlcnNpb24oKTsKICAgICAgICAgICAgICAgIF9zY2hlbWFMb2NhdGlvbiA9\nIHZwLmdldFNjaGVtYUxvY2F0aW9uKCk7ICAgICAgICAgICAgICAgIAogICAg\nICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICAg\nICAgICAgIGxvZyhfbG9jLmdldCgidmVyc2lvbi1jaGVjay1lcnJvciIsIAog\nICAgICAgICAgICAgICAgICAgICAgICBfc291cmNlLnRvU3RyaW5nKCkpLnRv\nU3RyaW5nKCkpOwogICAgICAgICAgICB9ICAgICAgICAgICAgCiAgICAgICAg\nICAgIHN1cGVyLnBhcnNlKGZpbGUpOwogICAgICAgIH0KCiAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgcHJvdGVjdGVkIE9iamVjdCBnZXRTY2hlbWFTb3Vy\nY2UoKSB7CiAgICAgICAgICAgIC8vIHVzZSB0aGUgdmVyc2lvbiAxIHNjaGVt\nYSBieSBkZWZhdWx0LiAgbm9uLXZlcnNpb25lZCBkb2NzIHdpbGwgCiAgICAg\nICAgICAgIC8vIGNvbnRpbnVlIHRvIHBhcnNlIHdpdGggdGhlIG9sZCB4bWwg\naWYgdGhleSBkbyBub3QgY29udGFpbiBhIAogICAgICAgICAgICAvLyBwZXJz\naXN0ZW5jZS11bml0LiAgdGhhdCBpcyBjdXJyZW50bHkgdGhlIG9ubHkgc2ln\nbmlmaWNhbnQgY2hhbmdlCiAgICAgICAgICAgIC8vIHRvIHRoZSBzY2hlbWEu\nICBpZiBtb3JlIHNpZ25pZmljYW50IGNoYW5nZXMgYXJlIG1hZGUgaW4gdGhl\nIAogICAgICAgICAgICAvLyBmdXR1cmUsIHRoZSAyLjAgc2NoZW1hIG1heSBi\nZSBwcmVmZXJhYmxlLgogICAgICAgICAgICBTdHJpbmcgcGVyc2lzdGVuY2V4\nc2QgPSAicGVyc2lzdGVuY2UteHNkLnJzcmMiOwogICAgICAgICAgICAvLyBp\nZiB0aGUgdmVyc2lvbiBhbmQvb3Igc2NoZW1hIGxvY2F0aW9uIGlzIGZvciAx\nLjAsIHVzZSB0aGUgMS4wIAogICAgICAgICAgICAvLyBzY2hlbWEKICAgICAg\nICAgICAgaWYgKF9wZXJzaXN0ZW5jZVZlcnNpb24gIT0gbnVsbCAmJiBfcGVy\nc2lzdGVuY2VWZXJzaW9uLmVxdWFscyhYTUxWZXJzaW9uUGFyc2VyLlZFUlNJ\nT05fMl8wKSAKICAgICAgICAgICAgfHwgKF9zY2hlbWFMb2NhdGlvbiAhPSBu\ndWxsICYmIF9zY2hlbWFMb2NhdGlvbi5pbmRleE9mKFBFUlNJU1RFTkNFX1hT\nRF8yXzApICE9IC0xKSkgewogICAgICAgICAgICAgICAgcGVyc2lzdGVuY2V4\nc2QgPSAicGVyc2lzdGVuY2VfMl8wLXhzZC5yc3JjIjsKICAgICAgICAgICAg\nfQogICAgICAgICAgICByZXR1cm4gZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZUFz\nU3RyZWFtKHBlcnNpc3RlbmNleHNkKTsKICAgICAgICB9CgogICAgICAgIEBP\ndmVycmlkZQogICAgICAgIHByb3RlY3RlZCB2b2lkIHJlc2V0KCkgewogICAg\nICAgICAgICBzdXBlci5yZXNldCgpOwogICAgICAgICAgICBfaW5mbyA9IG51\nbGw7CiAgICAgICAgICAgIF9zb3VyY2UgPSBudWxsOwogICAgICAgICAgICBf\nZXhjbHVkZVVubGlzdGVkU2V0ID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAg\nICBwcm90ZWN0ZWQgYm9vbGVhbiBzdGFydEVsZW1lbnQoU3RyaW5nIG5hbWUs\nIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgICAgIHRocm93cyBTQVhFeGNl\ncHRpb24gewogICAgICAgICAgICBpZiAoY3VycmVudERlcHRoKCkgPT0gMSkK\nICAgICAgICAgICAgICAgIHN0YXJ0UGVyc2lzdGVuY2VVbml0KGF0dHJzKTsK\nICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudERlcHRoKCkgPT0gMyAmJiAi\ncHJvcGVydHkiLmVxdWFscyhuYW1lKSkKICAgICAgICAgICAgICAgIF9pbmZv\nLnNldFByb3BlcnR5KGF0dHJzLmdldFZhbHVlKCJuYW1lIiksIGF0dHJzLmdl\ndFZhbHVlKCJ2YWx1ZSIpKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAg\nICAgICAgfQoKICAgICAgICBwcm90ZWN0ZWQgdm9pZCBlbmRFbGVtZW50KFN0\ncmluZyBuYW1lKQogICAgICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgaWYgKGN1cnJlbnREZXB0aCgpID09IDEpIHsKICAgICAg\nICAgICAgICAgIGVuZFBlcnNpc3RlbmNlVW5pdCgpOwogICAgICAgICAgICAg\nICAgX2luZm8uZnJvbVVzZXJQcm9wZXJ0aWVzKF9tYXApOwogICAgICAgICAg\nICAgICAgYWRkUmVzdWx0KF9pbmZvKTsKICAgICAgICAgICAgfQogICAgICAg\nICAgICBpZiAoY3VycmVudERlcHRoKCkgIT0gMikKICAgICAgICAgICAgICAg\nIHJldHVybjsKCiAgICAgICAgICAgIHN3aXRjaCAobmFtZS5jaGFyQXQoMCkp\nIHsKICAgICAgICAgICAgICAgIC8vIGNhc2VzICduYW1lJyBhbmQgJ3RyYW5z\nYWN0aW9uLXR5cGUnIGFyZSBoYW5kbGVkIGluCiAgICAgICAgICAgICAgICAv\nLyAgICAgIHN0YXJ0UGVyc2lzdGVuY2VVbml0KCkKICAgICAgICAgICAgICAg\nIC8vIGNhc2UgJ3Byb3BlcnR5JyBmb3IgJ3Byb3BlcnRpZXMnIGlzIGhhbmRs\nZWQgaW4gc3RhcnRFbGVtZW50KCkKICAgICAgICAgICAgICAgIGNhc2UgJ2Mn\nOiAvLyBjbGFzcwogICAgICAgICAgICAgICAgICAgIGlmICgiY2xhc3MiLmVx\ndWFscyhuYW1lKSkKICAgICAgICAgICAgICAgICAgICAgICAgX2luZm8uYWRk\nTWFuYWdlZENsYXNzTmFtZShjdXJyZW50VGV4dCgpKTsKICAgICAgICAgICAg\nICAgICAgICBlbHNlIC8vIEZJWE1FIC0gY2FjaGluZwogICAgICAgICAgICAg\nICAgICAgICAgICB0aHJvdyBuZXcgamF2YXgucGVyc2lzdGVuY2UuUGVyc2lz\ndGVuY2VFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAi\nTm90IGltcGxlbWVudGVkIHlldCIpOwogICAgICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnZSc6IC8vIGV4Y2x1ZGUtdW5s\naXN0ZWQtY2xhc3NlcwogICAgICAgICAgICAgICAgICAgIHNldEV4Y2x1ZGVV\nbmxpc3RlZENsYXNzZXMoY3VycmVudFRleHQoKSk7CiAgICAgICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdqJzoKICAgICAg\nICAgICAgICAgICAgICBpZiAoImp0YS1kYXRhLXNvdXJjZSIuZXF1YWxzKG5h\nbWUpKQogICAgICAgICAgICAgICAgICAgICAgICBfaW5mby5zZXRKdGFEYXRh\nU291cmNlTmFtZShjdXJyZW50VGV4dCgpKTsKICAgICAgICAgICAgICAgICAg\nICBlbHNlIC8vIGphci1maWxlCiAgICAgICAgICAgICAgICAgICAgewogICAg\nICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgX2luZm8uYWRkSmFyRmlsZU5hbWUoY3VycmVudFRleHQoKSk7\nCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbiBpYWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIHRocm93IGdldEV4Y2VwdGlvbihpYWUuZ2V0TWVzc2FnZSgpKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNh\nc2UgJ20nOiAvLyBtYXBwaW5nLWZpbGUKICAgICAgICAgICAgICAgICAgICBf\naW5mby5hZGRNYXBwaW5nRmlsZU5hbWUoY3VycmVudFRleHQoKSk7CiAgICAg\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdu\nJzogLy8gbm9uLWp0YS1kYXRhLXNvdXJjZQogICAgICAgICAgICAgICAgICAg\nIF9pbmZvLnNldE5vbkp0YURhdGFTb3VyY2VOYW1lKGN1cnJlbnRUZXh0KCkp\nOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAg\nY2FzZSAncCc6CiAgICAgICAgICAgICAgICAgICAgaWYgKCJwcm92aWRlciIu\nZXF1YWxzKG5hbWUpKQogICAgICAgICAgICAgICAgICAgICAgICBfaW5mby5z\nZXRQZXJzaXN0ZW5jZVByb3ZpZGVyQ2xhc3NOYW1lKGN1cnJlbnRUZXh0KCkp\nOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAg\nY2FzZSAncycgOiAvLyBzaGFyZWQtY2FjaGUtbW9kZQogICAgICAgICAgICAg\nICAgICAgIF9pbmZvLnNldFNoYXJlZENhY2hlTW9kZShjdXJyZW50VGV4dCgp\nKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAg\nIGNhc2UgJ3YnOiAvLyB2YWxpZGF0aW9uLW1vZGUKICAgICAgICAgICAgICAg\nICAgICBfaW5mby5zZXRWYWxpZGF0aW9uTW9kZShFbnVtLnZhbHVlT2YoVmFs\naWRhdGlvbk1vZGUuY2xhc3MsCiAgICAgICAgICAgICAgICAgICAgICAgIGN1\ncnJlbnRUZXh0KCkpKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gVGhlIGRlZmF1bHQg\ndmFsdWUgZm9yIGV4Y2x1ZGUtdW5saXN0ZWQtY2xhc3NlcyB3YXMgCiAgICAg\nICAgLy8gbW9kaWZpZWQgaW4gSlBBIDIuMCBmcm9tIGZhbHNlIHRvIHRydWUu\nICBTZXQgdGhlIGRlZmF1bHQKICAgICAgICAvLyBiYXNlZCB1cG9uIHRoZSBw\nZXJzaXN0ZW5jZSB2ZXJzaW9uIHRvIHByZXNlcnZlIGJlaGF2aW9yIAogICAg\nICAgIC8vIG9mIHByZS1KUEEgMi4wIGFwcGxpY2F0aW9ucy4KICAgICAgICBw\ncml2YXRlIHZvaWQgc2V0RXhjbHVkZVVubGlzdGVkQ2xhc3NlcyhTdHJpbmcg\ndmFsdWUpIHsKICAgICAgICAgICAgaWYgKCFfZXhjbHVkZVVubGlzdGVkU2V0\nKSB7CiAgICAgICAgICAgICAgICBCaWdEZWNpbWFsIHZlcnNpb24gPSBnZXRQ\nZXJzaXN0ZW5jZVZlcnNpb24oKTsKICAgICAgICAgICAgICAgIGJvb2xlYW4g\nZXhjbHVkZVVubGlzdGVkOwogICAgICAgICAgICAgICAgaWYgKHZlcnNpb24u\nY29tcGFyZVRvKFZFUlNJT05fMV8wKSA+IDApIHsKICAgICAgICAgICAgICAg\nICAgICBleGNsdWRlVW5saXN0ZWQgPSAhKCJmYWxzZSIuZXF1YWxzSWdub3Jl\nQ2FzZSh2YWx1ZSkpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAg\nICAgICAgICAgICAgICBleGNsdWRlVW5saXN0ZWQgPSAidHJ1ZSIuZXF1YWxz\nSWdub3JlQ2FzZSh2YWx1ZSk7CiAgICAgICAgICAgICAgICB9ICAgICAgICAg\nICAgICAgICAgICAKICAgICAgICAgICAgICAgIF9pbmZvLnNldEV4Y2x1ZGVV\nbmxpc3RlZENsYXNzZXMoZXhjbHVkZVVubGlzdGVkKTsKICAgICAgICAgICAg\nICAgIF9leGNsdWRlVW5saXN0ZWRTZXQgPSB0cnVlOyAgICAgICAgICAgIAog\nICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAg\nKiBQYXJzZSBwZXJzaXN0ZW5jZS11bml0IGVsZW1lbnQuCiAgICAgICAgICov\nCiAgICAgICAgcHJpdmF0ZSB2b2lkIHN0YXJ0UGVyc2lzdGVuY2VVbml0KEF0\ndHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgICAgIHRocm93cyBTQVhFeGNlcHRp\nb24gewogICAgICAgICAgICBfZXhjbHVkZVVubGlzdGVkU2V0ID0gZmFsc2U7\nICAgICAgICAgICAgCiAgICAgICAgICAgIF9pbmZvID0gbmV3IFBlcnNpc3Rl\nbmNlVW5pdEluZm9JbXBsKCk7CiAgICAgICAgICAgIF9pbmZvLnNldFBlcnNp\nc3RlbmNlVW5pdE5hbWUoYXR0cnMuZ2V0VmFsdWUoIm5hbWUiKSk7CiAgICAg\nICAgICAgIF9pbmZvLnNldFBlcnNpc3RlbmNlWE1MU2NoZW1hVmVyc2lvbihf\ncGVyc2lzdGVuY2VWZXJzaW9uKTsKICAgICAgICAgICAgCiAgICAgICAgICAg\nIC8vIHdlIG9ubHkgcGFyc2UgdGhpcyBvdXJzZWx2ZXMgb3V0c2lkZSBhIGNv\nbnRhaW5lciwgc28gZGVmYXVsdAogICAgICAgICAgICAvLyB0cmFuc2FjdGlv\nbiB0eXBlIHRvIGxvY2FsCiAgICAgICAgICAgIFN0cmluZyB2YWwgPSBhdHRy\ncy5nZXRWYWx1ZSgidHJhbnNhY3Rpb24tdHlwZSIpOwogICAgICAgICAgICBp\nZiAodmFsID09IG51bGwpCiAgICAgICAgICAgICAgICBfaW5mby5zZXRUcmFu\nc2FjdGlvblR5cGUoUGVyc2lzdGVuY2VVbml0VHJhbnNhY3Rpb25UeXBlLlJF\nU09VUkNFX0xPQ0FMKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAg\nICAgX2luZm8uc2V0VHJhbnNhY3Rpb25UeXBlKEVudW0udmFsdWVPZihQZXJz\naXN0ZW5jZVVuaXRUcmFuc2FjdGlvblR5cGUuY2xhc3MsIHZhbCkpOwoKICAg\nICAgICAgICAgaWYgKF9zb3VyY2UgIT0gbnVsbCkKICAgICAgICAgICAgICAg\nIF9pbmZvLnNldFBlcnNpc3RlbmNlWG1sRmlsZVVybChfc291cmNlKTsKCQl9\nCiAgICAgICAgCiAgICAgICAgcHJpdmF0ZSB2b2lkIGVuZFBlcnNpc3RlbmNl\nVW5pdCgpIHsKICAgICAgICAgICAgaWYgKCFfZXhjbHVkZVVubGlzdGVkU2V0\nKSB7CiAgICAgICAgICAgICAgICBzZXRFeGNsdWRlVW5saXN0ZWRDbGFzc2Vz\nKG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwcml2\nYXRlIEJpZ0RlY2ltYWwgZ2V0UGVyc2lzdGVuY2VWZXJzaW9uKCkgewogICAg\nICAgICAgICBpZiAoX2luZm8uZ2V0UGVyc2lzdGVuY2VYTUxTY2hlbWFWZXJz\naW9uKCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgICAgICByZXR1cm4gbmV3IEJpZ0RlY2ltYWwoX2luZm8uZ2V0\nUGVyc2lzdGVuY2VYTUxTY2hlbWFWZXJzaW9uKCkpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAg\nICAgICAgICAgICAgICAgICAgbG9nKF9sb2MuZ2V0KCJpbnZhbGlkLXZlcnNp\nb24tYXR0cmlidXRlIiwgCiAgICAgICAgICAgICAgICAgICAgICAgIF9pbmZv\nLmdldFBlcnNpc3RlbmNlWE1MU2NoZW1hVmVyc2lvbigpLAogICAgICAgICAg\nICAgICAgICAgICAgICBWRVJTSU9OXzFfMC50b1N0cmluZygpKS50b1N0cmlu\nZygpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAg\nICAgICAvLyBPcGVuSlBBIHN1cHBvcnRzIHBlcnNpc3RlbmNlIGZpbGVzIHdp\ndGhvdXQgYSB2ZXJzaW9uIGF0dHJpYnV0ZS4KICAgICAgICAgICAgLy8gQSBw\nZXJzaXN0ZW5jZSBmaWxlIHdpdGhvdXQgYSB2ZXJzaW9uIGF0dHJpYnV0ZSB3\naWxsIGJlIGNvbnNpZGVyZWQKICAgICAgICAgICAgLy8gYSB2ZXJzaW9uIDEu\nMCBwZXJzaXN0ZW5jZSBmaWxlIGJ5IGRlZmF1bHQgdG8gbWFpbnRhaW4gYmFj\na3dhcmQgCiAgICAgICAgICAgIC8vIGNvbXBhdGliaWxpdHkuCiAgICAgICAg\nICAgIHJldHVybiBWRVJTSU9OXzFfMDsKICAgICAgICB9CiAgICB9CiAgICAK\nICAgIAogICAgLyoqCiAgICAgKiBUaGlzIHByaXZhdGUgY2xhc3MgaXMgdXNl\nZCB0byBob2xkIG9udG8gaW5mb3JtYXRpb24gcmVnYXJkaW5nCiAgICAgKiBQ\nZXJzaXN0ZW50VW5pdCBuYW1lIGNvbGxpc2lvbnMuCiAgICAgKi8KICAgIHBy\naXZhdGUgc3RhdGljIGNsYXNzIFBVTmFtZUNvbGxpc2lvbnsKICAgICAgICBw\ncml2YXRlIFN0cmluZyBfcHVOYW1lOwogICAgICAgIHByaXZhdGUgU2V0PFN0\ncmluZz4gX3Jlc291cmNlczsKCiAgICAgICAgUFVOYW1lQ29sbGlzaW9uKFN0\ncmluZyBwdU5hbWUsIFN0cmluZyBmaWxlMSwgU3RyaW5nIGZpbGUyKSB7CiAg\nICAgICAgICAgIF9yZXNvdXJjZXMgPSBuZXcgTGlua2VkSGFzaFNldDxTdHJp\nbmc+KCk7CiAgICAgICAgICAgIF9yZXNvdXJjZXMuYWRkKGZpbGUxKTsKICAg\nICAgICAgICAgX3Jlc291cmNlcy5hZGQoZmlsZTIpOwoKICAgICAgICAgICAg\nX3B1TmFtZT1wdU5hbWU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHZv\naWQgbG9nQ29sbGlzaW9uKExvZyBsb2dnZXIpewogICAgICAgICAgICBpZihs\nb2dnZXIuaXNXYXJuRW5hYmxlZCgpKXsKICAgICAgICAgICAgICAgIGxvZ2dl\nci53YXJuKF9sb2MuZ2V0RmF0YWwoImR1cC1wdSIsIG5ldyBPYmplY3RbXXtf\ncHVOYW1lLF9yZXNvdXJjZXMudG9TdHJpbmcoKSwJCiAgICAgICAgICAgICAg\nICAgICAgX3Jlc291cmNlcy5pdGVyYXRvcigpLm5leHQoKX0pKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICB2b2lkIGFkZENv\nbGxpc2lvbihTdHJpbmcgZmlsZTEsIFN0cmluZyBmaWxlMil7CiAgICAgICAg\nICAgIF9yZXNvdXJjZXMuYWRkKGZpbGUxKTsKICAgICAgICAgICAgX3Jlc291\ncmNlcy5hZGQoZmlsZTIpOwogICAgICAgIH0KCiAgICB9Cn0K\n","encoding":"base64"}

