{"sha":"0c90300ccc5abe5f7182540974330f36957cb5a9","node_id":"MDQ6QmxvYjIwNjM2NDowYzkwMzAwY2NjNWFiZTVmNzE4MjU0MDk3NDMzMGYzNjk1N2NiNWE5","size":15573,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0c90300ccc5abe5f7182540974330f36957cb5a9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLmluc3RydW1lbnQuQ2xhc3NGaWxlVHJhbnNmb3JtZXI7\nCmltcG9ydCBqYXZhLmxhbmcuaW5zdHJ1bWVudC5JbGxlZ2FsQ2xhc3NGb3Jt\nYXRFeGNlcHRpb247CmltcG9ydCBqYXZhLnNlY3VyaXR5LlByb3RlY3Rpb25E\nb21haW47CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5zcGkuQ2xhc3NUcmFuc2Zvcm1lcjsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLnNwaS5Mb2FkU3RhdGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5zcGkuUGVyc2lzdGVuY2VQcm92aWRlcjsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLnNwaS5QZXJzaXN0ZW5jZVVuaXRJbmZvOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2Uuc3BpLlByb3ZpZGVyVXRpbDsKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuY29uZi5Ccm9rZXJWYWx1ZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb25J\nbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2UuUENDbGFz\nc0ZpbGVUcmFuc2Zvcm1lcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5l\nbmhhbmNlLlBDRW5oYW5jZXJBZ2VudDsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuQm9vdHN0cmFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5Ccm9rZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvblByb3ZpZGVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRp\nb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5PcHRpb25zOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFNb2RlczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLk1ldGFEYXRhUmVwb3Np\ndG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS52\nYWxpZGF0aW9uLlZhbGlkYXRpb25VdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLkNsYXNzUmVzb2x2ZXI7CgoKLyoqCiAqIEJvb3RzdHJh\ncHBpbmcgY2xhc3MgdGhhdCBhbGxvd3MgdGhlIGNyZWF0aW9uIG9mIGEgc3Rh\nbmQtYWxvbmUKICoge0BsaW5rIEVudGl0eU1hbmFnZXJ9LgogKgogKiBAc2Vl\nIGphdmF4LnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNlI2NyZWF0ZUVudGl0eU1h\nbmFnZXJGYWN0b3J5KFN0cmluZyxNYXApCiAqIEBwdWJsaXNoZWQKICovCnB1\nYmxpYyBjbGFzcyBQZXJzaXN0ZW5jZVByb3ZpZGVySW1wbAogICAgaW1wbGVt\nZW50cyBQZXJzaXN0ZW5jZVByb3ZpZGVyLCBQcm92aWRlclV0aWwgewoKICAg\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ0xBU1NfVFJBTlNGT1JNRVJfT1BUSU9O\nUyA9ICJDbGFzc1RyYW5zZm9ybWVyT3B0aW9ucyI7CiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBTdHJpbmcgRU1GX1BPT0wgPSAiRW50aXR5TWFuYWdlckZh\nY3RvcnlQb29sIjsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6\nZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlKFBlcnNpc3RlbmNlUHJv\ndmlkZXJJbXBsLmNsYXNzKTsKCiAgICBwcml2YXRlIExvZyBfbG9nOwogICAg\nLyoqCiAgICAgKiBMb2FkcyB0aGUgZW50aXR5IG1hbmFnZXIgc3BlY2lmaWVk\nIGJ5IDxjb2RlPm5hbWU8L2NvZGU+LCBhcHBseWluZwogICAgICogdGhlIHBy\nb3BlcnRpZXMgaW4gPGNvZGU+bTwvY29kZT4gYXMgb3ZlcnJpZGVzIHRvIHRo\nZSBwcm9wZXJ0aWVzIGRlZmluZWQKICAgICAqIGluIHRoZSBYTUwgY29uZmln\ndXJhdGlvbiBmaWxlIGZvciA8Y29kZT5uYW1lPC9jb2RlPi4gSWYgPGNvZGU+\nbmFtZTwvY29kZT4KICAgICAqIGlzIDxjb2RlPm51bGw8L2NvZGU+LCB0aGlz\nIG1ldGhvZCBsb2FkcyB0aGUgWE1MIGluIHRoZSByZXNvdXJjZQogICAgICog\naWRlbnRpZmllZCBieSA8Y29kZT5yZXNvdXJjZTwvY29kZT4sIGFuZCB1c2Vz\nIHRoZSBmaXJzdCByZXNvdXJjZSBmb3VuZAogICAgICogd2hlbiBkb2luZyB0\naGlzIGxvb2t1cCwgcmVnYXJkbGVzcyBvZiB0aGUgbmFtZSBzcGVjaWZpZWQg\naW4gdGhlIFhNTAogICAgICogcmVzb3VyY2Ugb3IgdGhlIG5hbWUgb2YgdGhl\nIGphciB0aGF0IHRoZSByZXNvdXJjZSBpcyBjb250YWluZWQgaW4uCiAgICAg\nKiBUaGlzIGRvZXMgbm8gcG9vbGluZyBvZiBFbnRpdHlNYW5hZ2Vyc0ZhY3Rv\ncmllcy4KICAgICAqIEByZXR1cm4gRW50aXR5TWFuYWdlckZhY3Rvcnkgb3Ig\nbnVsbAogICAgICovCiAgICBwdWJsaWMgT3BlbkpQQUVudGl0eU1hbmFnZXJG\nYWN0b3J5IGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KFN0cmluZyBuYW1l\nLCBTdHJpbmcgcmVzb3VyY2UsIE1hcCBtKSB7CiAgICAgICAgUGVyc2lzdGVu\nY2VQcm9kdWN0RGVyaXZhdGlvbiBwZCA9IG5ldyBQZXJzaXN0ZW5jZVByb2R1\nY3REZXJpdmF0aW9uKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgT2Jq\nZWN0IHBvb2xWYWx1ZSA9IENvbmZpZ3VyYXRpb25zLnJlbW92ZVByb3BlcnR5\nKEVNRl9QT09MLCBtKTsKICAgICAgICAgICAgQ29uZmlndXJhdGlvblByb3Zp\nZGVyIGNwID0gcGQubG9hZChyZXNvdXJjZSwgbmFtZSwgbSk7CiAgICAgICAg\nICAgIGlmIChjcCA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4g\nbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQnJva2VyRmFjdG9y\neSBmYWN0b3J5ID0gZ2V0QnJva2VyRmFjdG9yeShjcCwgcG9vbFZhbHVlLCBu\ndWxsKTsKICAgICAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9\nIGZhY3RvcnkuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAgICAgICBfbG9n\nID0gY29uZi5nZXRMb2coT3BlbkpQQUNvbmZpZ3VyYXRpb24uTE9HX1JVTlRJ\nTUUpOwogICAgICAgICAgICBwZC5jaGVja1B1TmFtZUNvbGxpc2lvbnMoX2xv\nZyxuYW1lKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvYWRBZ2VudChf\nbG9nLCBjb25mKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFRPRE8g\nLSBDYW4gdGhpcyBiZSBtb3ZlZCBiYWNrIHRvIEJyb2tlckltcGwuaW5pdGlh\nbGl6ZSgpPwogICAgICAgICAgICAvLyBDcmVhdGUgYXBwcm9wcmlhdGUgTGlm\nZWN5Y2xlRXZlbnRNYW5hZ2VyCiAgICAgICAgICAgIGxvYWRWYWxpZGF0b3Io\nX2xvZywgY29uZik7CgogICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHdhaXQg\ndG8gcHJlbG9hZCB1bnRpbCBhZnRlciB3ZSBnZXQgYmFjayBhIGZ1bGx5IGNv\nbmZpZ3VyZWQvaW5zdGFudGlhdGVkCiAgICAgICAgICAgIC8vIEJyb2tlckZh\nY3RvcnkuIFRoaXMgaXMgYmVjYXVzZSBpdCBpcyBwb3NzaWJsZSB0aGF0IHNv\nbWVvbmUgaGFzIGV4dGVuZGVkIE9wZW5KUEEKICAgICAgICAgICAgLy8gZnVu\nY3Rpb25zIGFuZCB0aGV5IG5lZWQgdG8gYmUgYWxsb3dlZCB0aW1lIHRvIGNv\nbmZpZ3VyZSB0aGVtc2VsdmVzIGJlZm9yZSB3ZSBnbyBvZmYgYW5kCiAgICAg\nICAgICAgIC8vIHN0YXJ0IGluc3RhbnRpbmcgY29uZmlndXJhYmxlIG9iamVj\ndHMgKGllOm9wZW5qcGEuTWV0YURhdGFSZXBvc2l0b3J5KS4gRG9uJ3QgY2F0\nY2gKICAgICAgICAgICAgLy8gYW55IGV4Y2VwdGlvbnMgaGVyZSBiZWNhdXNl\nIHdlIHdhbnQgdG8gZmFpbC1mYXN0LgogICAgICAgICAgICBPcHRpb25zIG8g\nPSBDb25maWd1cmF0aW9ucy5wYXJzZVByb3BlcnRpZXMoQ29uZmlndXJhdGlv\nbnMuZ2V0UHJvcGVydGllcygib3BlbmpwYS5NZXRhRGF0YVJlcG9zaXRvcnki\nKSk7CiAgICAgICAgICAgIGlmKG8uZ2V0Qm9vbGVhblByb3BlcnR5KCJQcmVs\nb2FkIikpewogICAgICAgICAgICAgICAgY29uZi5nZXRNZXRhRGF0YVJlcG9z\naXRvcnlJbnN0YW5jZSgpLnByZWxvYWQoKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIEpQQUZhY2FkZUhlbHBlci50\nb0VudGl0eU1hbmFnZXJGYWN0b3J5KGZhY3RvcnkpOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGlmIChfbG9nICE9IG51\nbGwpIHsKICAgICAgICAgICAgICAgIF9sb2cuZXJyb3IoX2xvYy5nZXQoImNy\nZWF0ZS1lbWYtZXJyb3IiLCBuYW1lKSwgZSk7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAqIAogICAg\nICAgICAgICAgKiBNYWludGFpbiAxLnggYmVoYXZpb3Igb2YgdGhyb3dpbmcg\nZXhjZXB0aW9ucywgZXZlbiB0aG91Z2gKICAgICAgICAgICAgICogSlBBMiA5\nLjIgLSBjcmVhdGVFTUYgIm11c3QiIHJldHVybiBudWxsIGZvciBQVSBpdCBj\nYW4ndCBoYW5kbGUuCiAgICAgICAgICAgICAqIAogICAgICAgICAgICAgKiBK\nUEEgMi4wIFNwZWNpZmljYXRpb24gU2VjdGlvbiA5LjIgc3RhdGVzOgogICAg\nICAgICAgICAgKiAiSWYgYSBwcm92aWRlciBkb2VzIG5vdCBxdWFsaWZ5IGFz\nIHRoZSBwcm92aWRlciBmb3IgdGhlIG5hbWVkIHBlcnNpc3RlbmNlIHVuaXQs\nIAogICAgICAgICAgICAgKiBpdCBtdXN0IHJldHVybiBudWxsIHdoZW4gY3Jl\nYXRlRW50aXR5TWFuYWdlckZhY3RvcnkgaXMgaW52b2tlZCBvbiBpdC4iCiAg\nICAgICAgICAgICAqIFRoYXQgc3BlY2lmaWNhdGlvbiBjb21wbGlhbmNlIGJl\naGF2aW9yIGhhcyBoYXBwZW5lZCBmZXcgbGluZXMgYWJvdmUgb24gbnVsbCBy\nZXR1cm4uIAogICAgICAgICAgICAgKiBUaHJvd2luZyBydW50aW1lIGV4Y2Vw\ndGlvbiBpbiB0aGUgZm9sbG93aW5nIGNvZGUgaXMgdmFsaWQgKGFuZCB1c2Vm\ndWwpIGJlaGF2aW9yCiAgICAgICAgICAgICAqIGJlY2F1c2UgdGhlIHF1YWxp\nZmllZCBwcm92aWRlciBoYXMgZW5jb3VudGVyZWQgYW4gdW5leHBlY3RlZCBz\naXR1YXRpb24uCiAgICAgICAgICAgICAqLwogICAgICAgICAgICB0aHJvdyBQ\nZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4Y2VwdGlvbihl\nKTsgICAgICAgICAgICAgICAgCiAgICAgICAgfQogICAgfQoKICAgIHByaXZh\ndGUgQnJva2VyRmFjdG9yeSBnZXRCcm9rZXJGYWN0b3J5KENvbmZpZ3VyYXRp\nb25Qcm92aWRlciBjcCwKICAgICAgICBPYmplY3QgcG9vbFZhbHVlLCBDbGFz\nc0xvYWRlciBsb2FkZXIpIHsKICAgICAgICAvLyBoYW5kbGUgInRydWUiIGFu\nZCAiZmFsc2UiCiAgICAgICAgaWYgKHBvb2xWYWx1ZSBpbnN0YW5jZW9mIFN0\ncmluZwogICAgICAgICAgICAmJiAoInRydWUiLmVxdWFsc0lnbm9yZUNhc2Uo\nKFN0cmluZykgcG9vbFZhbHVlKQogICAgICAgICAgICAgICAgfHwgImZhbHNl\nIi5lcXVhbHNJZ25vcmVDYXNlKChTdHJpbmcpIHBvb2xWYWx1ZSkpKQogICAg\nICAgICAgICBwb29sVmFsdWUgPSBCb29sZWFuLnZhbHVlT2YoKFN0cmluZykg\ncG9vbFZhbHVlKTsKCiAgICAgICAgaWYgKHBvb2xWYWx1ZSAhPSBudWxsICYm\nICEocG9vbFZhbHVlIGluc3RhbmNlb2YgQm9vbGVhbikpIHsKICAgICAgICAg\nICAgLy8gd2Ugb25seSBzdXBwb3J0IGJvb2xlYW4gc2V0dGluZ3MgZm9yIHRo\naXMgb3B0aW9uIGN1cnJlbnRseS4KICAgICAgICAgICAgdGhyb3cgbmV3IEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihwb29sVmFsdWUudG9TdHJpbmcoKSk7\nCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChwb29sVmFsdWUgPT0g\nbnVsbCB8fCAhKChCb29sZWFuKSBwb29sVmFsdWUpLmJvb2xlYW5WYWx1ZSgp\nKQogICAgICAgICAgICByZXR1cm4gQm9vdHN0cmFwLm5ld0Jyb2tlckZhY3Rv\ncnkoY3AsIGxvYWRlcik7CiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1\ncm4gQm9vdHN0cmFwLmdldEJyb2tlckZhY3RvcnkoY3AsIGxvYWRlcik7CiAg\nICB9CgogICAgcHVibGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBj\ncmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeShTdHJpbmcgbmFtZSwgTWFwIG0p\nIHsKICAgICAgICByZXR1cm4gY3JlYXRlRW50aXR5TWFuYWdlckZhY3Rvcnko\nbmFtZSwgbnVsbCwgbSk7CiAgICB9CgogICAgcHVibGljIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeSBjcmVhdGVDb250YWluZXJFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeShQZXJzaXN0ZW5jZVVuaXRJbmZvIHB1aSwgTWFwIG0pIHsKICAg\nICAgICBQZXJzaXN0ZW5jZVByb2R1Y3REZXJpdmF0aW9uIHBkID0gbmV3IFBl\ncnNpc3RlbmNlUHJvZHVjdERlcml2YXRpb24oKTsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBPYmplY3QgcG9vbFZhbHVlID0gQ29uZmlndXJhdGlvbnMu\ncmVtb3ZlUHJvcGVydHkoRU1GX1BPT0wsIG0pOwogICAgICAgICAgICBDb25m\naWd1cmF0aW9uUHJvdmlkZXIgY3AgPSBwZC5sb2FkKHB1aSwgbSk7CiAgICAg\nICAgICAgIGlmIChjcCA9PSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CgogICAgICAgICAgICAvLyBhZGQgZW5oYW5jZXIKICAgICAgICAg\nICAgRXhjZXB0aW9uIHRyYW5zZm9ybWVyRXhjZXB0aW9uID0gbnVsbDsKICAg\nICAgICAgICAgU3RyaW5nIGN0T3B0cyA9IChTdHJpbmcpIENvbmZpZ3VyYXRp\nb25zLmdldFByb3BlcnR5KENMQVNTX1RSQU5TRk9STUVSX09QVElPTlMsIHB1\naS5nZXRQcm9wZXJ0aWVzKCkpOwogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgcHVpLmFkZFRyYW5zZm9ybWVyKG5ldyBDbGFzc1RyYW5zZm9y\nbWVySW1wbChjcCwgY3RPcHRzLAogICAgICAgICAgICAgICAgICAgIHB1aS5n\nZXROZXdUZW1wQ2xhc3NMb2FkZXIoKSwgbmV3Q29uZmlndXJhdGlvbkltcGwo\nKSkpOwogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICAgICAgLy8gZmFpbCBncmFjZWZ1bGx5CiAgICAgICAgICAgICAg\nICB0cmFuc2Zvcm1lckV4Y2VwdGlvbiA9IGU7CiAgICAgICAgICAgIH0KCiAg\nICAgICAgICAgIC8vIGlmIHRoZSBCcm9rZXJJbXBsIGhhc24ndCBiZWVuIHNw\nZWNpZmllZCwgc3dpdGNoIHRvIHRoZQogICAgICAgICAgICAvLyBub24tZmlu\nYWxpemluZyBvbmUsIHNpbmNlIGFueXRoaW5nIGNsYWltaW5nIHRvIGJlIGEg\nY29udGFpbmVyCiAgICAgICAgICAgIC8vIHNob3VsZCBiZSBkb2luZyBwcm9w\nZXIgcmVzb3VyY2UgbWFuYWdlbWVudC4KICAgICAgICAgICAgaWYgKCFDb25m\naWd1cmF0aW9ucy5jb250YWluc1Byb3BlcnR5KEJyb2tlclZhbHVlLktFWSwg\nY3AuZ2V0UHJvcGVydGllcygpKSkgewogICAgICAgICAgICAgICAgY3AuYWRk\nUHJvcGVydHkoIm9wZW5qcGEuIiArIEJyb2tlclZhbHVlLktFWSwgZ2V0RGVm\nYXVsdEJyb2tlckFsaWFzKCkpOwogICAgICAgICAgICB9CgogICAgICAgICAg\nICBCcm9rZXJGYWN0b3J5IGZhY3RvcnkgPSBnZXRCcm9rZXJGYWN0b3J5KGNw\nLCBwb29sVmFsdWUsIHB1aS5nZXRDbGFzc0xvYWRlcigpKTsKICAgICAgICAg\nICAgaWYgKHRyYW5zZm9ybWVyRXhjZXB0aW9uICE9IG51bGwpIHsKICAgICAg\nICAgICAgICAgIExvZyBsb2cgPSBmYWN0b3J5LmdldENvbmZpZ3VyYXRpb24o\nKS5nZXRMb2coT3BlbkpQQUNvbmZpZ3VyYXRpb24uTE9HX1JVTlRJTUUpOwog\nICAgICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKSB7CiAg\nICAgICAgICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5nZXQoInRyYW5zZm9y\nbWVyLXJlZ2lzdHJhdGlvbi1lcnJvci1leCIsIHB1aSksIHRyYW5zZm9ybWVy\nRXhjZXB0aW9uKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg\nICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5nZXQoInRyYW5zZm9ybWVyLXJl\nZ2lzdHJhdGlvbi1lcnJvciIsIHB1aSkpOwogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBDcmVh\ndGUgYXBwcm9wcmlhdGUgTGlmZWN5Y2xlRXZlbnRNYW5hZ2VyCiAgICAgICAg\nICAgIE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYgPSBmYWN0b3J5LmdldENv\nbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAgX2xvZyA9IGNvbmYuZ2V0TG9n\nKE9wZW5KUEFDb25maWd1cmF0aW9uLkxPR19SVU5USU1FKTsKICAgICAgICAg\nICAgbG9hZFZhbGlkYXRvcihfbG9nLCBjb25mKTsKICAgICAgICAgICAgLy8g\nV2UgbmVlZCB0byB3YWl0IHRvIHByZWxvYWQgdW50aWwgYWZ0ZXIgd2UgZ2V0\nIGJhY2sgYSBmdWxseSBjb25maWd1cmVkL2luc3RhbnRpYXRlZAogICAgICAg\nICAgICAvLyBCcm9rZXJGYWN0b3J5LiBUaGlzIGlzIGJlY2F1c2UgaXQgaXMg\ncG9zc2libGUgdGhhdCBzb21lb25lIGhhcyBleHRlbmRlZCBPcGVuSlBBCiAg\nICAgICAgICAgIC8vIGZ1bmN0aW9ucyBhbmQgdGhleSBuZWVkIHRvIGJlIGFs\nbG93ZWQgdGltZSB0byBjb25maWd1cmUgdGhlbXNlbHZlcyBiZWZvcmUgd2Ug\nZ28gb2ZmIGFuZAogICAgICAgICAgICAvLyBzdGFydCBpbnN0YW50aW5nIGNv\nbmZpZ3VyYWJsZSBvYmplY3RzIChpZTpvcGVuanBhLk1ldGFEYXRhUmVwb3Np\ndG9yeSkuIERvbid0IGNhdGNoCiAgICAgICAgICAgIC8vIGFueSBleGNlcHRp\nb25zIGhlcmUgYmVjYXVzZSB3ZSB3YW50IHRvIGZhaWwtZmFzdC4KICAgICAg\nICAgICAgT3B0aW9ucyBvID0gQ29uZmlndXJhdGlvbnMucGFyc2VQcm9wZXJ0\naWVzKENvbmZpZ3VyYXRpb25zLmdldFByb3BlcnRpZXMoIm9wZW5qcGEuTWV0\nYURhdGFSZXBvc2l0b3J5IikpOwogICAgICAgICAgICBpZihvLmdldEJvb2xl\nYW5Qcm9wZXJ0eSgiUHJlbG9hZCIpKXsKICAgICAgICAgICAgICAgIGNvbmYu\nZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKS5wcmVsb2FkKCk7CiAg\nICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiBK\nUEFGYWNhZGVIZWxwZXIudG9FbnRpdHlNYW5hZ2VyRmFjdG9yeShmYWN0b3J5\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4\nY2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoKICAgICAqIFJl\ndHVybnMgYSBQcm92aWRlclV0aWwgZm9yIHVzZSB3aXRoIGVudGl0aWVzIG1h\nbmFnZWQgYnkgdGhpcwogICAgICogcGVyc2lzdGVuY2UgcHJvdmlkZXIuCiAg\nICAgKi8KICAgIHB1YmxpYyBQcm92aWRlclV0aWwgZ2V0UHJvdmlkZXJVdGls\nKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8qCiAgICAg\nKiBSZXR1cm5zIGEgZGVmYXVsdCBCcm9rZXIgYWxpYXMgdG8gYmUgdXNlZCB3\naGVuIG5vIG9wZW5qcGEuQnJva2VySW1wbAogICAgICogIGlzIHNwZWNpZmll\nZC4gVGhpcyBtZXRob2QgYWxsb3dzIFBlcnNpc3RlbmNlUHJvdmlkZXIgc3Vi\nY2xhc3MgdG8KICAgICAqICBvdmVycmlkZSB0aGUgZGVmYXVsdCBicm9rZXIg\nYWxpYXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0RGVmYXVs\ndEJyb2tlckFsaWFzKCkgewogICAgICAgIHJldHVybiBCcm9rZXJWYWx1ZS5O\nT05fRklOQUxJWklOR19BTElBUzsKICAgIH0KICAgIAogICAgLyoKICAgICAq\nIFJldHVybiBhIG5ldyBpbnN0YW5jZSBvZiBDb25maWd1cmF0aW9uIHN1YmNs\nYXNzIHVzZWQgYnkgZW50aXR5CiAgICAgKiBlbmhhbmNlbWVudCBpbiBDbGFz\nc1RyYW5zZm9ybWVySW1wbC4gSWYgT3BlbkpQQUNvbmZpZ3VyYXRpb25JbXBs\nCiAgICAgKiBpbnN0YW5jZSBpcyB1c2VkLCBjb25maWd1cmF0aW9uIG9wdGlv\nbnMgZGVjbGFyZWQgaW4gY29uZmlndXJhdGlvbgogICAgICogc3ViLWNsYXNz\nIHdpbGwgbm90IGJlIHJlY29nbml6ZWQgYW5kIGEgd2FybmluZyBpcyBwb3N0\nZWQgaW4gdGhlIGxvZy4KICAgICAqLwogICAgcHJvdGVjdGVkIE9wZW5KUEFD\nb25maWd1cmF0aW9uIG5ld0NvbmZpZ3VyYXRpb25JbXBsKCkgewogICAgICAg\nIHJldHVybiBuZXcgT3BlbkpQQUNvbmZpZ3VyYXRpb25JbXBsKCk7CiAgICB9\nCiAgICAgICAgCiAgICAvKioKICAgICAqIEphdmEgRUUgNSBjbGFzcyB0cmFu\nc2Zvcm1lci4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgQ2xh\nc3NUcmFuc2Zvcm1lckltcGwKICAgICAgICBpbXBsZW1lbnRzIENsYXNzVHJh\nbnNmb3JtZXIgewoKICAgICAgICBwcml2YXRlIGZpbmFsIENsYXNzRmlsZVRy\nYW5zZm9ybWVyIF90cmFuczsKCiAgICAgICAgcHJpdmF0ZSBDbGFzc1RyYW5z\nZm9ybWVySW1wbChDb25maWd1cmF0aW9uUHJvdmlkZXIgY3AsIFN0cmluZyBw\ncm9wcywgCiAgICAgICAgICAgIGZpbmFsIENsYXNzTG9hZGVyIHRtcExvYWRl\nciwgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgICAgICBj\ncC5zZXRJbnRvKGNvbmYpOwogICAgICAgICAgICAvLyB1c2UgdGhlIHRlbXBv\ncmFyeSBsb2FkZXIgZm9yIGV2ZXJ5dGhpbmcKICAgICAgICAgICAgY29uZi5z\nZXRDbGFzc1Jlc29sdmVyKG5ldyBDbGFzc1Jlc29sdmVyKCkgewogICAgICAg\nICAgICAgICAgcHVibGljIENsYXNzTG9hZGVyIGdldENsYXNzTG9hZGVyKENs\nYXNzPD8+IGNvbnRleHQsIENsYXNzTG9hZGVyIGVudikgewogICAgICAgICAg\nICAgICAgICAgIHJldHVybiB0bXBMb2FkZXI7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25mLnNldFJlYWRPbmx5\nKENvbmZpZ3VyYXRpb24uSU5JVF9TVEFURV9GUkVFWklORyk7CgogICAgICAg\nICAgICBNZXRhRGF0YVJlcG9zaXRvcnkgcmVwb3MgPSBjb25mLmdldE1ldGFE\nYXRhUmVwb3NpdG9yeUluc3RhbmNlKCk7CiAgICAgICAgICAgIHJlcG9zLnNl\ndFJlc29sdmUoTWV0YURhdGFNb2Rlcy5NT0RFX01BUFBJTkcsIGZhbHNlKTsK\nICAgICAgICAgICAgX3RyYW5zID0gbmV3IFBDQ2xhc3NGaWxlVHJhbnNmb3Jt\nZXIocmVwb3MsCiAgICAgICAgICAgICAgICBDb25maWd1cmF0aW9ucy5wYXJz\nZVByb3BlcnRpZXMocHJvcHMpLCB0bXBMb2FkZXIpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIGJ5dGVbXSB0cmFuc2Zvcm0oQ2xhc3NMb2FkZXIgY2ws\nIFN0cmluZyBuYW1lLAogICAgICAgICAgICBDbGFzczw/PiBwcmV2aW91c1Zl\ncnNpb24sIFByb3RlY3Rpb25Eb21haW4gcGQsIGJ5dGVbXSBieXRlcykKICAg\nICAgICAgICAgdGhyb3dzIElsbGVnYWxDbGFzc0Zvcm1hdEV4Y2VwdGlvbiB7\nCiAgICAgICAgICAgIHJldHVybiBfdHJhbnMudHJhbnNmb3JtKGNsLCBuYW1l\nLCBwcmV2aW91c1ZlcnNpb24sIHBkLCBieXRlcyk7CiAgICAgICAgfQoJfQog\nICAgCiAgICAvKioKICAgICAqIFRoaXMgcHJpdmF0ZSB3b3JrZXIgbWV0aG9k\nIHdpbGwgYXR0ZW1wdCBsb2FkIHRoZSBQQ0VuaGFuY2VyQWdlbnQuCiAgICAg\nKi8KICAgIHByaXZhdGUgdm9pZCBsb2FkQWdlbnQoTG9nIGxvZywgT3BlbkpQ\nQUNvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIGlmIChjb25mLmdldER5\nbmFtaWNFbmhhbmNlbWVudEFnZW50KCkgPT0gdHJ1ZSkgewogICAgICAgICAg\nICBib29sZWFuIHJlcyA9IFBDRW5oYW5jZXJBZ2VudC5sb2FkRHluYW1pY0Fn\nZW50KGxvZyk7CiAgICAgICAgICAgIGlmKF9sb2cuaXNJbmZvRW5hYmxlZCgp\nICYmIHJlcyA9PSB0cnVlICl7CiAgICAgICAgICAgICAgICBfbG9nLmluZm8o\nX2xvYy5nZXQoImR5bmFtaWMtYWdlbnQiKSk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogVGhpcyBwcml2YXRl\nIHdvcmtlciBtZXRob2Qgd2lsbCBhdHRlbXB0IHRvIHNldHVwIHRoZSBwcm9w\nZXIKICAgICAqIExpZmVjeWNsZUV2ZW50TWFuYWdlciB0eXBlIGJhc2VkIG9u\nIGlmIHRoZSBqYXZheC52YWxpZGF0aW9uIEFQSXMgYXJlCiAgICAgKiBhdmFp\nbGFibGUgYW5kIGEgVmFsaWRhdG9ySW1wbCBpcyByZXF1aXJlZCBieSB0aGUg\nY29uZmlndXJhdGlvbi4KICAgICAqIEBwYXJhbSBsb2cKICAgICAqIEBwYXJh\nbSBjb25mCiAgICAgKiBAdGhyb3dzIGlmIHZhbGlkYXRpb24gc2V0dXAgZmFp\nbGVkIGFuZCB3YXMgcmVxdWlyZWQgYnkgdGhlIGNvbmZpZwogICAgICovCiAg\nICBwcml2YXRlIHZvaWQgbG9hZFZhbGlkYXRvcihMb2cgbG9nLCBPcGVuSlBB\nQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgaWYgKChWYWxpZGF0aW9u\nVXRpbHMuc2V0dXBWYWxpZGF0aW9uKGNvbmYpID09IHRydWUpICYmCiAgICAg\nICAgICAgICAgICBfbG9nLmlzSW5mb0VuYWJsZWQoKSkgewogICAgICAgICAg\nICBfbG9nLmluZm8oX2xvYy5nZXQoInZsZW0tY3JlYXRpb24taW5mbyIpKTsK\nICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXRlcm1pbmVzIHdo\nZXRoZXIgdGhlIHNwZWNpZmllZCBvYmplY3QgaXMgbG9hZGVkLgogICAgICog\nCiAgICAgKiBAcmV0dXJuIExvYWRTdGF0ZS5MT0FERUQgLSBpZiBhbGwgaW1w\nbGljaXQgb3IgZXhwbGljaXQgRUFHRVIgZmV0Y2gKICAgICAqICAgICAgICAg\nYXR0cmlidXRlcyBhcmUgbG9hZGVkCiAgICAgKiAgICAgICAgIExvYWRTdGF0\nZS5OT1RfTE9BREVEIC0gaWYgYW55IGltcGxpY2l0IG9yIGV4cGxpY2l0IEVB\nR0VSIGZldGNoCiAgICAgKiAgICAgICAgIGF0dHJpYnV0ZSBpcyBub3QgbG9h\nZGVkCiAgICAgKiAgICAgICAgIExvYWRTdGF0ZS5VTktOT1dOIC0gaWYgdGhl\nIGVudGl0eSBpcyBub3QgbWFuYWdlZCBieSB0aGlzCiAgICAgKiAgICAgICAg\nIHByb3ZpZGVyLgogICAgICovCiAgICBwdWJsaWMgTG9hZFN0YXRlIGlzTG9h\nZGVkKE9iamVjdCBvYmopIHsKICAgICAgICByZXR1cm4gaXNMb2FkZWRXaXRo\nb3V0UmVmZXJlbmNlKG9iaiwgbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGF0dHJpYnV0ZSBvbiB0aGUgc3Bl\nY2lmaWVkIG9iamVjdCBpcyBsb2FkZWQuICBUaGlzCiAgICAgKiBtZXRob2Qg\nbWF5IGFjY2VzcyB0aGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSB0byBkZXRl\ncm1pbmUgbG9hZCBzdGF0ZSAoYnV0CiAgICAgKiBjdXJyZW50bHkgZG9lcyBu\nb3QpLgogICAgICogCiAgICAgKiBAcmV0dXJuIExvYWRTdGF0ZS5MT0FERUQg\nLSBpZiB0aGUgYXR0cmlidXRlIGlzIGxvYWRlZC4KICAgICAqICAgICAgICAg\nTG9hZFN0YXRlLk5PVF9MT0FERUQgLSBpZiB0aGUgYXR0cmlidXRlIGlzIG5v\ndCBsb2FkZWQgb3IgYW55CiAgICAgKiAgICAgICAgIEVBR0VSIGZldGNoIGF0\ndHJpYnV0ZXMgb2YgdGhlIGVudGl0eSBhcmUgbm90IGxvYWRlZC4KICAgICAq\nICAgICAgICAgTG9hZFN0YXRlLlVOS05PV04gLSBpZiB0aGUgZW50aXR5IGlz\nIG5vdCBtYW5hZ2VkIGJ5IHRoaXMKICAgICAqICAgICAgICAgcHJvdmlkZXIg\nb3IgaWYgaXQgZG9lcyBub3QgY29udGFpbiB0aGUgcGVyc2lzdGVudAogICAg\nICogICAgICAgICBhdHRyaWJ1dGUuCiAgICAgKi8KICAgIHB1YmxpYyBMb2Fk\nU3RhdGUgaXNMb2FkZWRXaXRoUmVmZXJlbmNlKE9iamVjdCBvYmosIFN0cmlu\nZyBhdHRyKSB7CiAgICAgICAgLy8gVE9ETzogQXJlIHRoZXJlIGJlIGFueSBj\nYXNlcyB3aGVyZSBPcGVuSlBBIHdpbGwgbmVlZCB0byBleGFtaW5lCiAgICAg\nICAgLy8gdGhlIGNvbnRlbnRzIG9mIGEgZmllbGQgdG8gZGV0ZXJtaW5lIGxv\nYWQgc3RhdGU/ICBJZiBzbywgcGVyIEpQQSAKICAgICAgICAvLyBjb250cmFj\ndCwgdGhpcyBtZXRob2QgcGVybWl0cyB0aGF0IHNvcnQgb2YgYWNjZXNzLiBJ\nbiB0aGUgZXh0cmVtZWx5IAogICAgICAgIC8vIHVubGlrZWx5IGNhc2UgdGhh\ndCB0aGUgdGhlIGVudGl0eSBpcyBtYW5hZ2VkIGJ5IG11bHRpcGxlIHByb3Zp\nZGVycywgCiAgICAgICAgLy8gZXZlbiBpZiBpdCBkb2Vzbid0IHRyaWdnZXIg\nbG9hZGluZyBpbiBPcGVuSlBBLCBhY2Nlc3NpbmcgZmllbGQgZGF0YSAKICAg\nICAgICAvLyBjb3VsZCB0cmlnZ2VyIGxvYWRpbmcgYnkgYW4gYWx0ZXJuYXRl\nIHByb3ZpZGVyLgogICAgICAgIHJldHVybiBpc0xvYWRlZFdpdGhvdXRSZWZl\ncmVuY2Uob2JqLCBhdHRyKTsKICAgIH0KCiAgICAvKioKICAgICAqIERldGVy\nbWluZXMgd2hldGhlciB0aGUgYXR0cmlidXRlIG9uIHRoZSBzcGVjaWZpZWQg\nb2JqZWN0IGlzIGxvYWRlZC4gIFRoaXMKICAgICAqIG1ldGhvZCBkb2VzIG5v\ndCBhY2Nlc3MgdGhlIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgdG8gZGV0ZXJt\naW5lIGxvYWQgCiAgICAgKiBzdGF0ZS4KICAgICAqIAogICAgICogQHJldHVy\nbiBMb2FkU3RhdGUuTE9BREVEIC0gaWYgdGhlIGF0dHJpYnV0ZSBpcyBsb2Fk\nZWQuCiAgICAgKiAgICAgICAgIExvYWRTdGF0ZS5OT1RfTE9BREVEIC0gaWYg\ndGhlIGF0dHJpYnV0ZSBpcyBub3QgbG9hZGVkIG9yIGFueQogICAgICogICAg\nICAgICBFQUdFUiBmZXRjaCBhdHRyaWJ1dGVzIG9mIHRoZSBlbnRpdHkgYXJl\nIG5vdCBsb2FkZWQuCiAgICAgKiAgICAgICAgIExvYWRTdGF0ZS5VTktOT1dO\nIC0gaWYgdGhlIGVudGl0eSBpcyBub3QgbWFuYWdlZCBieSB0aGlzCiAgICAg\nKiAgICAgICAgIHByb3ZpZGVyIG9yIGlmIGl0IGRvZXMgbm90IGNvbnRhaW4g\ndGhlIHBlcnNpc3RlbnQKICAgICAqICAgICAgICAgYXR0cmlidXRlLgogICAg\nICovCiAgICBwdWJsaWMgTG9hZFN0YXRlIGlzTG9hZGVkV2l0aG91dFJlZmVy\nZW5jZShPYmplY3Qgb2JqLCBTdHJpbmcgYXR0cikgeyAgICAgICAgCiAgICAg\nICAgaWYgKG9iaiA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBMb2Fk\nU3RhdGUuVU5LTk9XTjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBPcGVu\nSlBBUGVyc2lzdGVuY2VVdGlsLmlzTG9hZGVkKG9iaiwgYXR0cik7CiAgICB9\nCn0K\n","encoding":"base64"}

