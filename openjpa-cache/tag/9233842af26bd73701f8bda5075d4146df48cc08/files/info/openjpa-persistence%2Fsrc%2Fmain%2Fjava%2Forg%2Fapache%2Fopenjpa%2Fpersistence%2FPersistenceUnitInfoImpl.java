{"sha":"3987e0ddca2a8379f362289a9444d2f42c2cf451","node_id":"MDQ6QmxvYjIwNjM2NDozOTg3ZTBkZGNhMmE4Mzc5ZjM2MjI4OWE5NDQ0ZDJmNDJjMmNmNDUx","size":19869,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3987e0ddca2a8379f362289a9444d2f42c2cf451","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJM\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuVVJJU3ludGF4RXhjZXB0aW9u\nOwppbXBvcnQgamF2YS5uZXQuVVJMOwppbXBvcnQgamF2YS5uZXQuVVJMRGVj\nb2RlcjsKaW1wb3J0IGphdmEuc2VjdXJpdHkuQWNjZXNzQ29udHJvbGxlcjsK\naW1wb3J0IGphdmEuc2VjdXJpdHkuUHJpdmlsZWdlZEFjdGlvbkV4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0\naWwuQ29sbGVjdGlvbnM7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1w\nb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7\nCmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLlByb3Bl\ncnRpZXM7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwoKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLnNwaS5TaGFyZWRDYWNoZU1vZGU7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5zcGkuVmFsaWRhdGlvbk1vZGU7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5zcGkuQ2xhc3NUcmFuc2Zvcm1lcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLnNwaS5QZXJzaXN0ZW5jZVVuaXRJbmZvOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2Uuc3BpLlBlcnNpc3RlbmNlVW5pdFRyYW5zYWN0\naW9uVHlwZTsKaW1wb3J0IGphdmF4LnNxbC5EYXRhU291cmNlOwoKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5kYXRhY2FjaGUuRGF0YUNhY2hlTW9kZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZp\nZ3VyYXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25m\nLlByb2R1Y3REZXJpdmF0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIubWV0YS5Tb3VyY2VUcmFja2VyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbC5NdWx0aUNsYXNzTG9hZGVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuQ2xhc3NSZXNvbHZlcjsKCi8q\nKgogKiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUge0BsaW5rIFBlcnNpc3RlbmNl\nVW5pdEluZm99IGludGVyZmFjZSB1c2VkIGJ5IE9wZW5KUEEgCiAqIHdoZW4g\ncGFyc2luZyBwZXJzaXN0ZW5jZSBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9u\nLgogKgogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgUGVyc2lzdGVu\nY2VVbml0SW5mb0ltcGwKICAgIGltcGxlbWVudHMgUGVyc2lzdGVuY2VVbml0\nSW5mbywgU291cmNlVHJhY2tlciB7CgogICAgcHVibGljIHN0YXRpYyBmaW5h\nbCBTdHJpbmcgS0VZX1BST1ZJREVSID0gImphdmF4LnBlcnNpc3RlbmNlLnBy\nb3ZpZGVyIjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFZBTElE\nQVRJT05fTU9ERSA9CiAgICAgICAgImphdmF4LnBlcnNpc3RlbmNlLnZhbGlk\nYXRpb24ubW9kZSI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBQ\nRVJTSVNURU5DRV9WRVJTSU9OID0gIlBlcnNpc3RlbmNlVmVyc2lvbiI7CiAg\nICAKICAgIC8qKgogICAgICogUHJvcGVydGllcyBrZXkgZm9yIHRoZSBTSEFS\nRURfQ0FDSEVfTU9ERS4gVGhlIEpQQSAyLjAgc3BlYwogICAgICogU2hhcmVk\nQ2FjaGVNb2RlIG1hcHMgdG8gT3BlbkpQQSdzIERhdGFDYWNoZU1vZGUgc28g\nd2UncmUgdXNpbmcgdGhhdAogICAgICogY2xhc3MnIHNpbXBsZSBuYW1lIGFz\nIHRoZSBwcm9wZXJ0eSBrZXkuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nZmluYWwgU3RyaW5nIFNIQVJFRF9DQUNIRV9NT0RFPURhdGFDYWNoZU1vZGUu\nY2xhc3MuZ2V0U2ltcGxlTmFtZSgpOyAgCgogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgTG9jYWxpemVyIHNfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UK\nICAgICAgICAoUGVyc2lzdGVuY2VVbml0SW5mb0ltcGwuY2xhc3MpOwoKICAg\nIHByaXZhdGUgU3RyaW5nIF9uYW1lOwogICAgcHJpdmF0ZSBmaW5hbCBQcm9w\nZXJ0aWVzIF9wcm9wcyA9IG5ldyBQcm9wZXJ0aWVzKCk7CiAgICBwcml2YXRl\nIFBlcnNpc3RlbmNlVW5pdFRyYW5zYWN0aW9uVHlwZSBfdHJhbnNUeXBlID0K\nICAgICAgICBQZXJzaXN0ZW5jZVVuaXRUcmFuc2FjdGlvblR5cGUuUkVTT1VS\nQ0VfTE9DQUw7CgogICAgcHJpdmF0ZSBTdHJpbmcgX3Byb3ZpZGVyQ2xhc3NO\nYW1lOwogICAgcHJpdmF0ZSBMaXN0PFN0cmluZz4gX21hcHBpbmdGaWxlTmFt\nZXM7CiAgICBwcml2YXRlIExpc3Q8U3RyaW5nPiBfZW50aXR5Q2xhc3NOYW1l\nczsKICAgIHByaXZhdGUgTGlzdDxVUkw+IF9qYXJGaWxlczsKICAgIHByaXZh\ndGUgU3RyaW5nIF9qdGFEYXRhU291cmNlTmFtZTsKICAgIHByaXZhdGUgRGF0\nYVNvdXJjZSBfanRhRGF0YVNvdXJjZTsKICAgIHByaXZhdGUgU3RyaW5nIF9u\nb25KdGFEYXRhU291cmNlTmFtZTsKICAgIHByaXZhdGUgRGF0YVNvdXJjZSBf\nbm9uSnRhRGF0YVNvdXJjZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfZXhjbHVk\nZVVubGlzdGVkOwogICAgcHJpdmF0ZSBVUkwgX3BlcnNpc3RlbmNlWG1sRmls\nZTsKICAgIHByaXZhdGUgU3RyaW5nIF9zY2hlbWFWZXJzaW9uID0gIjEuMCI7\nCiAgICBwcml2YXRlIFZhbGlkYXRpb25Nb2RlIF92YWxpZGF0aW9uTW9kZTsK\nICAgIHByaXZhdGUgU2hhcmVkQ2FjaGVNb2RlIF9zaGFyZWRDYWNoZU1vZGU7\nCgogICAgLy8gQSBwZXJzaXN0ZW5jZSB1bml0IGlzIGRlZmluZWQgYnkgYSBw\nZXJzaXN0ZW5jZS54bWwgZmlsZS4gVGhlIGphcgogICAgLy8gZmlsZSBvciBk\naXJlY3Rvcnkgd2hvc2UgTUVUQS1JTkYgZGlyZWN0b3J5IGNvbnRhaW5zIHRo\nZQogICAgLy8gcGVyc2lzdGVuY2UueG1sIGZpbGUgaXMgdGVybWVkIHRoZSBy\nb290IG9mIHRoZSBwZXJzaXN0ZW5jZSB1bml0LgogICAgLy8KICAgIC8vIElu\nIEphdmEgRUUsIHRoZSByb290IG9mIGEgcGVyc2lzdGVuY2UgdW5pdCBtYXkg\nYmUgb25lIG9mIHRoZSBmb2xsb3dpbmc6CiAgICAvLyAtIGFuIEVKQi1KQVIg\nZmlsZQogICAgLy8gLSB0aGUgV0VCLUlORi9jbGFzc2VzIGRpcmVjdG9yeSBv\nZiBhIFdBUiBmaWxlWzM4XQogICAgLy8gLSBhIGphciBmaWxlIGluIHRoZSBX\nRUItSU5GL2xpYiBkaXJlY3Rvcnkgb2YgYSBXQVIgZmlsZQogICAgLy8gLSBh\nIGphciBmaWxlIGluIHRoZSByb290IG9mIHRoZSBFQVIKICAgIC8vIC0gYSBq\nYXIgZmlsZSBpbiB0aGUgRUFSIGxpYnJhcnkgZGlyZWN0b3J5CiAgICAvLyAt\nIGFuIGFwcGxpY2F0aW9uIGNsaWVudCBqYXIgZmlsZQogICAgcHJpdmF0ZSBV\nUkwgX3Jvb3Q7CgogICAgcHVibGljIENsYXNzTG9hZGVyIGdldENsYXNzTG9h\nZGVyKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1Ymxp\nYyBDbGFzc0xvYWRlciBnZXROZXdUZW1wQ2xhc3NMb2FkZXIoKSB7CiAgICAg\nICAgcmV0dXJuIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEoyRG9Q\ncml2SGVscGVyCiAgICAgICAgICAgIC5uZXdUZW1wb3JhcnlDbGFzc0xvYWRl\nckFjdGlvbihBY2Nlc3NDb250cm9sbGVyCiAgICAgICAgICAgICAgICAuZG9Q\ncml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyLmdldENvbnRleHRDbGFzc0xvYWRl\nckFjdGlvbigpKSkpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGVy\nc2lzdGVuY2VVbml0TmFtZSgpIHsKICAgICAgICByZXR1cm4gX25hbWU7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0UGVyc2lzdGVuY2VVbml0TmFtZShT\ndHJpbmcgZW1OYW1lKSB7CiAgICAgICAgX25hbWUgPSBlbU5hbWU7CiAgICB9\nCgogICAgcHVibGljIFN0cmluZyBnZXRQZXJzaXN0ZW5jZVByb3ZpZGVyQ2xh\nc3NOYW1lKCkgewogICAgICAgIHJldHVybiBfcHJvdmlkZXJDbGFzc05hbWU7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UGVyc2lzdGVuY2VQcm92aWRl\nckNsYXNzTmFtZShTdHJpbmcgcHJvdmlkZXJDbGFzc05hbWUpIHsKICAgICAg\nICBfcHJvdmlkZXJDbGFzc05hbWUgPSBwcm92aWRlckNsYXNzTmFtZTsKICAg\nIH0KCiAgICBwdWJsaWMgUGVyc2lzdGVuY2VVbml0VHJhbnNhY3Rpb25UeXBl\nIGdldFRyYW5zYWN0aW9uVHlwZSgpIHsKICAgICAgICByZXR1cm4gX3RyYW5z\nVHlwZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRUcmFuc2FjdGlvblR5\ncGUoUGVyc2lzdGVuY2VVbml0VHJhbnNhY3Rpb25UeXBlIHRyYW5zVHlwZSkg\newogICAgICAgIF90cmFuc1R5cGUgPSB0cmFuc1R5cGU7CiAgICB9CgogICAg\ncHVibGljIFN0cmluZyBnZXRKdGFEYXRhU291cmNlTmFtZSgpIHsKICAgICAg\nICByZXR1cm4gX2p0YURhdGFTb3VyY2VOYW1lOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldEp0YURhdGFTb3VyY2VOYW1lKFN0cmluZyBqdGEpIHsKICAg\nICAgICBfanRhRGF0YVNvdXJjZU5hbWUgPSBqdGE7CiAgICAgICAgaWYgKGp0\nYSAhPSBudWxsKQogICAgICAgICAgICBfanRhRGF0YVNvdXJjZSA9IG51bGw7\nCiAgICB9CgogICAgcHVibGljIERhdGFTb3VyY2UgZ2V0SnRhRGF0YVNvdXJj\nZSgpIHsKICAgICAgICByZXR1cm4gX2p0YURhdGFTb3VyY2U7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0SnRhRGF0YVNvdXJjZShEYXRhU291cmNlIGRz\nKSB7CiAgICAgICAgX2p0YURhdGFTb3VyY2UgPSBkczsKICAgICAgICBpZiAo\nZHMgIT0gbnVsbCkKICAgICAgICAgICAgX2p0YURhdGFTb3VyY2VOYW1lID0g\nbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldE5vbkp0YURhdGFT\nb3VyY2VOYW1lKCkgewogICAgICAgIHJldHVybiBfbm9uSnRhRGF0YVNvdXJj\nZU5hbWU7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Tm9uSnRhRGF0YVNv\ndXJjZU5hbWUoU3RyaW5nIG5vbkp0YSkgewogICAgICAgIF9ub25KdGFEYXRh\nU291cmNlTmFtZSA9IG5vbkp0YTsKICAgICAgICBpZiAobm9uSnRhICE9IG51\nbGwpCiAgICAgICAgICAgIF9ub25KdGFEYXRhU291cmNlID0gbnVsbDsKICAg\nIH0KCiAgICBwdWJsaWMgRGF0YVNvdXJjZSBnZXROb25KdGFEYXRhU291cmNl\nKCkgewogICAgICAgIHJldHVybiBfbm9uSnRhRGF0YVNvdXJjZTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXROb25KdGFEYXRhU291cmNlKERhdGFTb3Vy\nY2UgZHMpIHsKICAgICAgICBfbm9uSnRhRGF0YVNvdXJjZSA9IGRzOwogICAg\nICAgIGlmIChkcyAhPSBudWxsKQogICAgICAgICAgICBfbm9uSnRhRGF0YVNv\ndXJjZU5hbWUgPSBudWxsOwogICAgfQoKICAgIHB1YmxpYyBVUkwgZ2V0UGVy\nc2lzdGVuY2VVbml0Um9vdFVybCgpIHsKICAgICAgICByZXR1cm4gX3Jvb3Q7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UGVyc2lzdGVuY2VVbml0Um9v\ndFVybChVUkwgcm9vdCkgewogICAgICAgIF9yb290ID0gcm9vdDsKICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBleGNsdWRlVW5saXN0ZWRDbGFzc2VzKCkg\newogICAgICAgIHJldHVybiBfZXhjbHVkZVVubGlzdGVkOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldEV4Y2x1ZGVVbmxpc3RlZENsYXNzZXMoYm9vbGVh\nbiBleGNsdWRlVW5saXN0ZWQpIHsKICAgICAgICBfZXhjbHVkZVVubGlzdGVk\nID0gZXhjbHVkZVVubGlzdGVkOwogICAgfQoKICAgIHB1YmxpYyBMaXN0PFN0\ncmluZz4gZ2V0TWFwcGluZ0ZpbGVOYW1lcygpIHsKICAgICAgICByZXR1cm4g\nKF9tYXBwaW5nRmlsZU5hbWVzID09IG51bGwpCiAgICAgICAgICAgID8gKExp\nc3Q8U3RyaW5nPikgQ29sbGVjdGlvbnMuRU1QVFlfTElTVCA6IF9tYXBwaW5n\nRmlsZU5hbWVzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFkZE1hcHBpbmdG\naWxlTmFtZShTdHJpbmcgbmFtZSkgewogICAgICAgIGlmIChfbWFwcGluZ0Zp\nbGVOYW1lcyA9PSBudWxsKQogICAgICAgICAgICBfbWFwcGluZ0ZpbGVOYW1l\ncyA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwogICAgICAgIF9tYXBwaW5n\nRmlsZU5hbWVzLmFkZChuYW1lKTsKICAgIH0KCiAgICBwdWJsaWMgTGlzdDxV\nUkw+IGdldEphckZpbGVVcmxzKCkgewogICAgICAgIHJldHVybiAoX2phckZp\nbGVzID09IG51bGwpID8gKExpc3Q8VVJMPikgQ29sbGVjdGlvbnMuRU1QVFlf\nTElTVCAKICAgICAgICAgICAgOiBfamFyRmlsZXM7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgYWRkSmFyRmlsZShVUkwgamFyKSB7CiAgICAgICAgaWYgKF9q\nYXJGaWxlcyA9PSBudWxsKQogICAgICAgICAgICBfamFyRmlsZXMgPSBuZXcg\nQXJyYXlMaXN0PFVSTD4oKTsKICAgICAgICBfamFyRmlsZXMuYWRkKGphcik7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgYWRkSmFyRmlsZU5hbWUoU3RyaW5n\nIG5hbWUpIHsKICAgICAgICBNdWx0aUNsYXNzTG9hZGVyIGxvYWRlciA9IEFj\nY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgLmRvUHJpdmlsZWdlZChKMkRv\nUHJpdkhlbHBlci5uZXdNdWx0aUNsYXNzTG9hZGVyQWN0aW9uKCkpOwogICAg\nICAgIGxvYWRlci5hZGRDbGFzc0xvYWRlcihnZXRDbGFzcygpLmdldENsYXNz\nTG9hZGVyKCkpOwogICAgICAgIGxvYWRlci5hZGRDbGFzc0xvYWRlcihNdWx0\naUNsYXNzTG9hZGVyLlRIUkVBRF9MT0FERVIpOwogICAgICAgIFVSTCB1cmwg\nPSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAg\nSjJEb1ByaXZIZWxwZXIuZ2V0UmVzb3VyY2VBY3Rpb24obG9hZGVyLCBuYW1l\nKSk7CiAgICAgICAgaWYgKHVybCAhPSBudWxsKSB7CiAgICAgICAgICAgIGFk\nZEphckZpbGUodXJsKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K\nCiAgICAgICAgLy8gamFyIGZpbGUgaXMgbm90IGEgcmVzb3VyY2U7IGNoZWNr\nIGNsYXNzcGF0aAogICAgICAgIFN0cmluZ1tdIGNwID0gKEFjY2Vzc0NvbnRy\nb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICBKMkRvUHJpdkhlbHBl\nci5nZXRQcm9wZXJ0eUFjdGlvbigiamF2YS5jbGFzcy5wYXRoIikpKSAKICAg\nICAgICAgICAgLnNwbGl0KEoyRG9Qcml2SGVscGVyLmdldFBhdGhTZXBhcmF0\nb3IoKSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjcC5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICBpZiAoY3BbaV0uZXF1YWxzKG5hbWUpCiAg\nICAgICAgICAgICAgICB8fCBjcFtpXS5lbmRzV2l0aChGaWxlLnNlcGFyYXRv\nckNoYXIgKyBuYW1lKSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgICAgICBhZGRKYXJGaWxlKEFjY2Vzc0NvbnRyb2xsZXIKICAg\nICAgICAgICAgICAgICAgICAgICAgLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhl\nbHBlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvVVJMQWN0aW9u\nKG5ldyBGaWxlKGNwW2ldKSkpKTsKICAgICAgICAgICAgICAgICAgICByZXR1\ncm47CiAgICAgICAgICAgICAgICB9IGNhdGNoIChQcml2aWxlZ2VkQWN0aW9u\nRXhjZXB0aW9uIHBhZSkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICAgICAgfSBjYXRjaCAoTWFsZm9ybWVkVVJMRXhjZXB0aW9u\nIG11ZSkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRocm93\nIG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oc19sb2MuZ2V0KCJiYWQt\namFyLW5hbWUiLCBuYW1lKS4KICAgICAgICAgICAgZ2V0TWVzc2FnZSgpKTsK\nICAgIH0KCiAgICBwdWJsaWMgTGlzdDxTdHJpbmc+IGdldE1hbmFnZWRDbGFz\nc05hbWVzKCkgewogICAgICAgIHJldHVybiAoX2VudGl0eUNsYXNzTmFtZXMg\nPT0gbnVsbCkKICAgICAgICAgICAgPyAoTGlzdDxTdHJpbmc+KSBDb2xsZWN0\naW9ucy5FTVBUWV9MSVNUIDogX2VudGl0eUNsYXNzTmFtZXM7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgYWRkTWFuYWdlZENsYXNzTmFtZShTdHJpbmcgbmFt\nZSkgewogICAgICAgIGlmIChfZW50aXR5Q2xhc3NOYW1lcyA9PSBudWxsKQog\nICAgICAgICAgICBfZW50aXR5Q2xhc3NOYW1lcyA9IG5ldyBBcnJheUxpc3Q8\nU3RyaW5nPigpOwogICAgICAgIF9lbnRpdHlDbGFzc05hbWVzLmFkZChuYW1l\nKTsKICAgIH0KCiAgICBwdWJsaWMgUHJvcGVydGllcyBnZXRQcm9wZXJ0aWVz\nKCkgewogICAgICAgIHJldHVybiBfcHJvcHM7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgc2V0UHJvcGVydHkoU3RyaW5nIGtleSwgU3RyaW5nIHZhbHVlKSB7\nCiAgICAgICAgX3Byb3BzLnNldFByb3BlcnR5KGtleSwgdmFsdWUpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGFkZFRyYW5zZm9ybWVyKENsYXNzVHJhbnNm\nb3JtZXIgdHJhbnNmb3JtZXIpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFRoZSBsb2NhdGlvbiBvZiB0aGUgcGVyc2lzdGVuY2UueG1sIHJlc291\ncmNlLiBNYXkgYmUgbnVsbC4KICAgICAqLwogICAgcHVibGljIFVSTCBnZXRQ\nZXJzaXN0ZW5jZVhtbEZpbGVVcmwoKSB7CiAgICAgICAgcmV0dXJuIF9wZXJz\naXN0ZW5jZVhtbEZpbGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbG9j\nYXRpb24gb2YgdGhlIHBlcnNpc3RlbmNlLnhtbCByZXNvdXJjZS4gTWF5IGJl\nIG51bGwuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFBlcnNpc3RlbmNl\nWG1sRmlsZVVybChVUkwgdXJsKSB7CiAgICAgICAgX3BlcnNpc3RlbmNlWG1s\nRmlsZSA9IHVybDsKICAgIH0KCiAgICAvKioKICAgICAqIExvYWQgdGhlIGdp\ndmVuIHVzZXItc3VwcGxpZWQgbWFwIG9mIHByb3BlcnRpZXMgaW50byB0aGlz\nIHBlcnNpc3RlbmNlCiAgICAgKiB1bml0LgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBmcm9tVXNlclByb3BlcnRpZXMoTWFwIG1hcCkgewogICAgICAgIGlm\nIChtYXAgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICBP\nYmplY3Qga2V5OwogICAgICAgIE9iamVjdCB2YWw7CiAgICAgICAgZm9yIChP\nYmplY3QgbyA6IG1hcC5lbnRyeVNldCgpKSB7CiAgICAgICAgICAgIGtleSA9\nICgoTWFwLkVudHJ5KSBvKS5nZXRLZXkoKTsKICAgICAgICAgICAgdmFsID0g\nKChNYXAuRW50cnkpIG8pLmdldFZhbHVlKCk7CiAgICAgICAgICAgIGlmIChL\nRVlfUFJPVklERVIuZXF1YWxzKGtleSkpCiAgICAgICAgICAgICAgICBzZXRQ\nZXJzaXN0ZW5jZVByb3ZpZGVyQ2xhc3NOYW1lKChTdHJpbmcpIHZhbCk7CiAg\nICAgICAgICAgIGVsc2UgaWYgKCJqYXZheC5wZXJzaXN0ZW5jZS50cmFuc2Fj\ndGlvblR5cGUiLmVxdWFscyhrZXkpKSB7CiAgICAgICAgICAgICAgICBQZXJz\naXN0ZW5jZVVuaXRUcmFuc2FjdGlvblR5cGUgdHR5cGU7CiAgICAgICAgICAg\nICAgICBpZiAodmFsIGluc3RhbmNlb2YgU3RyaW5nKSB7CiAgICAgICAgICAg\nICAgICAgICAgdHR5cGUgPSBFbnVtLnZhbHVlT2YoUGVyc2lzdGVuY2VVbml0\nVHJhbnNhY3Rpb25UeXBlLmNsYXNzLCAKICAgICAgICAgICAgICAgICAgICAg\nICAgKFN0cmluZykgdmFsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHR0eXBlID0gKFBl\ncnNpc3RlbmNlVW5pdFRyYW5zYWN0aW9uVHlwZSkgdmFsOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgc2V0VHJhbnNhY3Rpb25UeXBlKHR0\neXBlKTsKICAgICAgICAgICAgfSBlbHNlIGlmICgiamF2YXgucGVyc2lzdGVu\nY2UuanRhRGF0YVNvdXJjZSIuZXF1YWxzKGtleSkpIHsKICAgICAgICAgICAg\nICAgIGlmICh2YWwgaW5zdGFuY2VvZiBTdHJpbmcpIHsKICAgICAgICAgICAg\nICAgICAgICBzZXRKdGFEYXRhU291cmNlTmFtZSgoU3RyaW5nKSB2YWwpOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAg\nICAgICAgICAgICAgICAgc2V0SnRhRGF0YVNvdXJjZSgoRGF0YVNvdXJjZSkg\ndmFsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlm\nICgiamF2YXgucGVyc2lzdGVuY2Uubm9uSnRhRGF0YVNvdXJjZSIuZXF1YWxz\nKGtleSkpIHsKICAgICAgICAgICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBT\ndHJpbmcpIHsKICAgICAgICAgICAgICAgICAgICBzZXROb25KdGFEYXRhU291\ncmNlTmFtZSgoU3RyaW5nKSB2YWwpOwogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2V0Tm9u\nSnRhRGF0YVNvdXJjZSgoRGF0YVNvdXJjZSkgdmFsKTsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChWQUxJREFUSU9OX01PREUu\nZXF1YWxzKGtleSkpIHsKICAgICAgICAgICAgICAgIGlmICh2YWwgaW5zdGFu\nY2VvZiBTdHJpbmcpIHsKICAgICAgICAgICAgICAgICAgICBzZXRWYWxpZGF0\naW9uTW9kZSgoU3RyaW5nKSB2YWwpOwogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VmFs\naWRhdGlvbk1vZGUoKFZhbGlkYXRpb25Nb2RlKSB2YWwpOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKFNIQVJFRF9DQUNIRV9N\nT0RFLmVxdWFscyhrZXkpKSB7IAogICAgICAgICAgICAgICBpZih2YWwgaW5z\ndGFuY2VvZiBTdHJpbmcpIHsgCiAgICAgICAgICAgICAgICAgICBzZXRTaGFy\nZWRDYWNoZU1vZGUoKFN0cmluZykgdmFsKTsKICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgIHNldFNo\nYXJlZENhY2hlTW9kZSgoU2hhcmVkQ2FjaGVNb2RlKSB2YWwpOwogICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAg\nICAgICAgICAgICAgICBfcHJvcHMucHV0KGtleSwgdmFsKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBh\nIHtAbGluayBNYXB9IGNvbnRhaW5pbmcgdGhlIHByb3BlcnRpZXMgbmVjZXNz\nYXJ5IHRvIGNyZWF0ZQogICAgICogYSB7QGxpbmsgQ29uZmlndXJhdGlvbn0g\ndGhhdCByZWZsZWN0cyB0aGUgaW5mb3JtYXRpb24gaW4gdGhpcwogICAgICog\ncGVyc2lzdGVuY2UgdW5pdCBpbmZvLgogICAgICovCiAgICBwdWJsaWMgTWFw\nIHRvT3BlbkpQQVByb3BlcnRpZXMoKSB7CiAgICAgICAgcmV0dXJuIHRvT3Bl\nbkpQQVByb3BlcnRpZXModGhpcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gYSB7QGxpbmsgTWFwfSBjb250YWluaW5nIHRoZSBwcm9wZXJ0aWVz\nIG5lY2Vzc2FyeSB0byBjcmVhdGUKICAgICAqIGEge0BsaW5rIENvbmZpZ3Vy\nYXRpb259IHRoYXQgcmVmbGVjdHMgdGhlIGluZm9ybWF0aW9uIGluIHRoZSBn\naXZlbgogICAgICogcGVyc2lzdGVuY2UgdW5pdCBpbmZvLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIE1hcCB0b09wZW5KUEFQcm9wZXJ0aWVzKFBlcnNp\nc3RlbmNlVW5pdEluZm8gaW5mbykgewogICAgICAgIE1hcCBtYXAgPSBuZXcg\nSGFzaE1hcCgpOwogICAgICAgIFNldDxTdHJpbmc+IGFkZGVkID0gbmV3IEhh\nc2hTZXQ8U3RyaW5nPigpOwogICAgICAgIGlmIChpbmZvLmdldFRyYW5zYWN0\naW9uVHlwZSgpID09IFBlcnNpc3RlbmNlVW5pdFRyYW5zYWN0aW9uVHlwZS5K\nVEEpCiAgICAgICAgICAgIHB1dChtYXAsIGFkZGVkLCAiVHJhbnNhY3Rpb25N\nb2RlIiwgIm1hbmFnZWQiKTsKCiAgICAgICAgYm9vbGVhbiBoYXNKdGEgPSBm\nYWxzZTsKICAgICAgICBEYXRhU291cmNlIGRzID0gaW5mby5nZXRKdGFEYXRh\nU291cmNlKCk7CiAgICAgICAgaWYgKGRzICE9IG51bGwpIHsKICAgICAgICAg\nICAgcHV0KG1hcCwgYWRkZWQsICJDb25uZWN0aW9uRmFjdG9yeSIsIGRzKTsK\nICAgICAgICAgICAgcHV0KG1hcCwgYWRkZWQsICJDb25uZWN0aW9uRmFjdG9y\neU1vZGUiLCAibWFuYWdlZCIpOwogICAgICAgICAgICBoYXNKdGEgPSB0cnVl\nOwogICAgICAgIH0gZWxzZSBpZiAoaW5mbyBpbnN0YW5jZW9mIFBlcnNpc3Rl\nbmNlVW5pdEluZm9JbXBsCiAgICAgICAgICAgICYmICgoUGVyc2lzdGVuY2VV\nbml0SW5mb0ltcGwpIGluZm8pLmdldEp0YURhdGFTb3VyY2VOYW1lKCkgIT0g\nbnVsbCl7CiAgICAgICAgICAgIHB1dChtYXAsIGFkZGVkLCAiQ29ubmVjdGlv\nbkZhY3RvcnlOYW1lIiwgKChQZXJzaXN0ZW5jZVVuaXRJbmZvSW1wbCkKICAg\nICAgICAgICAgICAgIGluZm8pLmdldEp0YURhdGFTb3VyY2VOYW1lKCkpOwog\nICAgICAgICAgICBwdXQobWFwLCBhZGRlZCwgIkNvbm5lY3Rpb25GYWN0b3J5\nTW9kZSIsICJtYW5hZ2VkIik7CiAgICAgICAgICAgIGhhc0p0YSA9IHRydWU7\nCiAgICAgICAgfQoKICAgICAgICBkcyA9IGluZm8uZ2V0Tm9uSnRhRGF0YVNv\ndXJjZSgpOwogICAgICAgIGlmIChkcyAhPSBudWxsKSB7CiAgICAgICAgICAg\nIGlmICghaGFzSnRhKQogICAgICAgICAgICAgICAgcHV0KG1hcCwgYWRkZWQs\nICJDb25uZWN0aW9uRmFjdG9yeSIsIGRzKTsKICAgICAgICAgICAgZWxzZQog\nICAgICAgICAgICAgICAgcHV0KG1hcCwgYWRkZWQsICJDb25uZWN0aW9uRmFj\ndG9yeTIiLCBkcyk7CiAgICAgICAgfSBlbHNlIGlmIChpbmZvIGluc3RhbmNl\nb2YgUGVyc2lzdGVuY2VVbml0SW5mb0ltcGwKICAgICAgICAgICAgJiYgKChQ\nZXJzaXN0ZW5jZVVuaXRJbmZvSW1wbCkgaW5mbykuZ2V0Tm9uSnRhRGF0YVNv\ndXJjZU5hbWUoKQogICAgICAgICAgICAhPSBudWxsKSB7CiAgICAgICAgICAg\nIFN0cmluZyBub25KdGFOYW1lID0gKChQZXJzaXN0ZW5jZVVuaXRJbmZvSW1w\nbCkgaW5mbykuCiAgICAgICAgICAgICAgICBnZXROb25KdGFEYXRhU291cmNl\nTmFtZSgpOwogICAgICAgICAgICBpZiAoIWhhc0p0YSkKICAgICAgICAgICAg\nICAgIHB1dChtYXAsIGFkZGVkLCAiQ29ubmVjdGlvbkZhY3RvcnlOYW1lIiwg\nbm9uSnRhTmFtZSk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAg\nIHB1dChtYXAsIGFkZGVkLCAiQ29ubmVjdGlvbkZhY3RvcnkyTmFtZSIsIG5v\nbkp0YU5hbWUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGluZm8uZ2V0Q2xh\nc3NMb2FkZXIoKSAhPSBudWxsKQogICAgICAgICAgICBwdXQobWFwLCBhZGRl\nZCwgIkNsYXNzUmVzb2x2ZXIiLCBuZXcgQ2xhc3NSZXNvbHZlckltcGwoCiAg\nICAgICAgICAgICAgICBpbmZvLmdldENsYXNzTG9hZGVyKCkpKTsKCiAgICAg\nICAgUHJvcGVydGllcyBwcm9wcyA9IGluZm8uZ2V0UHJvcGVydGllcygpOwog\nICAgICAgIGlmIChwcm9wcyAhPSBudWxsKSB7CgogICAgICAgICAgICAvLyBy\nZW1vdmUgYW55IG9mIHRoZSB0aGluZ3MgdGhhdCB3ZXJlIHNldCBhYm92ZQog\nICAgICAgICAgICBmb3IgKFN0cmluZyBrZXkgOiBhZGRlZCkgewogICAgICAg\nICAgICAgICAgaWYgKENvbmZpZ3VyYXRpb25zLmNvbnRhaW5zUHJvcGVydHko\na2V5LCBwcm9wcykpCiAgICAgICAgICAgICAgICAgICAgQ29uZmlndXJhdGlv\nbnMucmVtb3ZlUHJvcGVydHkoa2V5LCBwcm9wcyk7CiAgICAgICAgICAgIH0K\nCiAgICAgICAgICAgIC8vIGFkZCBhbGwgdGhlIG5vbi1jb25mbGljdGluZyBw\ncm9wcyBpbiB0aGUgPHByb3BlcnRpZXM+IHNlY3Rpb24KICAgICAgICAgICAg\nbWFwLnB1dEFsbChwcm9wcyk7CgogICAgICAgICAgICAvLyB0aGlzIGlzbid0\nIGEgcmVhbCBjb25maWcgcHJvcGVydHk7IHJlbW92ZSBpdAogICAgICAgICAg\nICBtYXAucmVtb3ZlKFBlcnNpc3RlbmNlUHJvdmlkZXJJbXBsLkNMQVNTX1RS\nQU5TRk9STUVSX09QVElPTlMpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFD\nb25maWd1cmF0aW9ucy5jb250YWluc1Byb3BlcnR5KCJJZCIsIG1hcCkpCiAg\nICAgICAgICAgIG1hcC5wdXQoIm9wZW5qcGEuSWQiLCBpbmZvLmdldFBlcnNp\nc3RlbmNlVW5pdE5hbWUoKSk7CiAgICAgICAgCiAgICAgICAgUHJvcGVydGll\ncyBtZXRhRmFjdG9yeVByb3BzID0gbmV3IFByb3BlcnRpZXMoKTsKICAgICAg\nICBpZiAoaW5mby5nZXRNYW5hZ2VkQ2xhc3NOYW1lcygpICE9IG51bGwgCiAg\nICAgICAgICAgICYmICFpbmZvLmdldE1hbmFnZWRDbGFzc05hbWVzKCkuaXNF\nbXB0eSgpKSB7CiAgICAgICAgICAgIFN0cmluZ0J1ZmZlciB0eXBlcyA9IG5l\ndyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICAgICAgZm9yIChTdHJpbmcgdHlw\nZSA6IGluZm8uZ2V0TWFuYWdlZENsYXNzTmFtZXMoKSkgewogICAgICAgICAg\nICAgICAgaWYgKHR5cGVzLmxlbmd0aCgpID4gMCkKICAgICAgICAgICAgICAg\nICAgICB0eXBlcy5hcHBlbmQoJzsnKTsKICAgICAgICAgICAgICAgIHR5cGVz\nLmFwcGVuZCh0eXBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBtZXRh\nRmFjdG9yeVByb3BzLnB1dCgiVHlwZXMiLCB0eXBlcy50b1N0cmluZygpKTsK\nICAgICAgICB9CiAgICAgICAgaWYgKGluZm8uZ2V0SmFyRmlsZVVybHMoKSAh\nPSBudWxsICYmICFpbmZvLmdldEphckZpbGVVcmxzKCkuaXNFbXB0eSgpCiAg\nICAgICAgICAgIHx8ICghaW5mby5leGNsdWRlVW5saXN0ZWRDbGFzc2VzKCkK\nICAgICAgICAgICAgJiYgaW5mby5nZXRQZXJzaXN0ZW5jZVVuaXRSb290VXJs\nKCkgIT0gbnVsbCkpIHsKICAgICAgICAgICAgU3RyaW5nQnVmZmVyIGphcnMg\nPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgICAgIFN0cmluZyBmaWxl\nID0gbnVsbDsKICAgICAgICAgICAgaWYgKCFpbmZvLmV4Y2x1ZGVVbmxpc3Rl\nZENsYXNzZXMoKQogICAgICAgICAgICAgICAgJiYgaW5mby5nZXRQZXJzaXN0\nZW5jZVVuaXRSb290VXJsKCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nVVJMIHVybCA9IGluZm8uZ2V0UGVyc2lzdGVuY2VVbml0Um9vdFVybCgpOwog\nICAgICAgICAgICAgICAgaWYgKCJmaWxlIi5lcXVhbHModXJsLmdldFByb3Rv\nY29sKCkpKSAvLyBleHBsb2RlZCBqYXI/CiAgICAgICAgICAgICAgICAgICAg\nZmlsZSA9IFVSTERlY29kZXIuZGVjb2RlKHVybC5nZXRQYXRoKCkpOwogICAg\nICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGphcnMuYXBw\nZW5kKHVybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChVUkwg\namFyIDogaW5mby5nZXRKYXJGaWxlVXJscygpKSB7CiAgICAgICAgICAgICAg\nICBpZiAoamFycy5sZW5ndGgoKSA+IDApCiAgICAgICAgICAgICAgICAgICAg\namFycy5hcHBlbmQoJzsnKTsKICAgICAgICAgICAgICAgIGphcnMuYXBwZW5k\nKGphcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGZpbGUgIT0g\nbnVsbCkKICAgICAgICAgICAgICAgIG1ldGFGYWN0b3J5UHJvcHMucHV0KCJG\naWxlcyIsIGZpbGUpOwogICAgICAgICAgICBpZiAoamFycy5sZW5ndGgoKSAh\nPSAwKQogICAgICAgICAgICAgICAgbWV0YUZhY3RvcnlQcm9wcy5wdXQoIlVS\nTHMiLCBqYXJzLnRvU3RyaW5nKCkpOwogICAgICAgIH0KICAgICAgICBpZiAo\naW5mby5nZXRNYXBwaW5nRmlsZU5hbWVzKCkgIT0gbnVsbAogICAgICAgICAg\nICAmJiAhaW5mby5nZXRNYXBwaW5nRmlsZU5hbWVzKCkuaXNFbXB0eSgpKSB7\nCiAgICAgICAgICAgIFN0cmluZ0J1ZmZlciByc3JjcyA9IG5ldyBTdHJpbmdC\ndWZmZXIoKTsKICAgICAgICAgICAgZm9yIChTdHJpbmcgcnNyYyA6IGluZm8u\nZ2V0TWFwcGluZ0ZpbGVOYW1lcygpKSB7CiAgICAgICAgICAgICAgICBpZiAo\ncnNyY3MubGVuZ3RoKCkgPiAwKQogICAgICAgICAgICAgICAgICAgIHJzcmNz\nLmFwcGVuZCgnOycpOwogICAgICAgICAgICAgICAgcnNyY3MuYXBwZW5kKHJz\ncmMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG1ldGFGYWN0b3J5UHJv\ncHMucHV0KCJSZXNvdXJjZXMiLCByc3Jjcy50b1N0cmluZygpKTsKICAgICAg\nICB9CgogICAgICAgIC8vIHNldCBwZXJzaXN0ZW50IGNsYXNzIGxvY2F0aW9u\ncyBhcyBwcm9wZXJ0aWVzIG9mIG1ldGFkYXRhIGZhY3RvcnksCiAgICAgICAg\nLy8gY29tYmluaW5nIHRoZW0gd2l0aCBhbnkgZXhpc3RpbmcgbWV0YWRhdGEg\nZmFjdG9yeSBwcm9wcwogICAgICAgIGlmICghbWV0YUZhY3RvcnlQcm9wcy5p\nc0VtcHR5KCkpIHsKICAgICAgICAgICAgU3RyaW5nIGtleSA9IFByb2R1Y3RE\nZXJpdmF0aW9ucy5nZXRDb25maWd1cmF0aW9uS2V5CiAgICAgICAgICAgICAg\nICAoIk1ldGFEYXRhRmFjdG9yeSIsIG1hcCk7CiAgICAgICAgICAgIG1hcC5w\ndXQoa2V5LCBDb25maWd1cmF0aW9ucy5jb21iaW5lUGx1Z2lucygoU3RyaW5n\nKSBtYXAuZ2V0KGtleSksCiAgICAgICAgICAgICAgICBDb25maWd1cmF0aW9u\ncy5zZXJpYWxpemVQcm9wZXJ0aWVzKG1ldGFGYWN0b3J5UHJvcHMpKSk7CiAg\nICAgICAgfQogICAgICAgIAogICAgICAgIC8vIGFsd2F5cyByZWNvcmQgcHJv\ndmlkZXIgbmFtZSBmb3IgcHJvZHVjdCBkZXJpdmF0aW9ucyB0byBhY2Nlc3MK\nICAgICAgICBpZiAoaW5mby5nZXRQZXJzaXN0ZW5jZVByb3ZpZGVyQ2xhc3NO\nYW1lKCkgIT0gbnVsbCkKICAgICAgICAgICAgbWFwLnB1dChLRVlfUFJPVklE\nRVIsIGluZm8uZ2V0UGVyc2lzdGVuY2VQcm92aWRlckNsYXNzTmFtZSgpKTsK\nICAgICAgICAKICAgICAgICAvLyBjb252ZXJ0IHZhbGlkYXRpb24tbW9kZSBl\nbnVtIHRvIGEgU3RyaW5nVmFsdWUKICAgICAgICBpZiAoaW5mby5nZXRWYWxp\nZGF0aW9uTW9kZSgpICE9IG51bGwpCiAgICAgICAgICAgIG1hcC5wdXQoVkFM\nSURBVElPTl9NT0RFLCBTdHJpbmcudmFsdWVPZihpbmZvLmdldFZhbGlkYXRp\nb25Nb2RlKCkpLnRvTG93ZXJDYXNlKCkpOwoKICAgICAgICBpZiAoaW5mby5n\nZXRQZXJzaXN0ZW5jZVhNTFNjaGVtYVZlcnNpb24oKSAhPSBudWxsKSB7CiAg\nICAgICAgICAgIG1hcC5wdXQoUEVSU0lTVEVOQ0VfVkVSU0lPTiwgaW5mby5n\nZXRQZXJzaXN0ZW5jZVhNTFNjaGVtYVZlcnNpb24oKSk7CiAgICAgICAgfQog\nICAgICAgIAogICAgICAgIGlmIChpbmZvLmdldFNoYXJlZENhY2hlTW9kZSgp\nICE9IG51bGwpIHsgCiAgICAgICAgICAgIHB1dChtYXAsIGFkZGVkLCBTSEFS\nRURfQ0FDSEVfTU9ERSwgaW5mby5nZXRTaGFyZWRDYWNoZU1vZGUoKS50b1N0\ncmluZygpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIG1h\ncDsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHB1dChNYXAgbWFw\nLCBTZXQgYWRkZWQsIFN0cmluZyBrZXksIE9iamVjdCB2YWwpIHsKICAgICAg\nICBtYXAucHV0KCJvcGVuanBhLiIgKyBrZXksIHZhbCk7CiAgICAgICAgYWRk\nZWQuYWRkKGtleSk7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0t\nLS0KCiAgICBwdWJsaWMgRmlsZSBnZXRTb3VyY2VGaWxlKCkgewogICAgICAg\nIGlmIChfcGVyc2lzdGVuY2VYbWxGaWxlID09IG51bGwpCiAgICAgICAgICAg\nIHJldHVybiBudWxsOwoKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1\ncm4gbmV3IEZpbGUoX3BlcnNpc3RlbmNlWG1sRmlsZS50b1VSSSgpKTsKICAg\nICAgICB9IGNhdGNoIChVUklTeW50YXhFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKGUpOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFNvdXJjZVNjb3Bl\nKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1YmxpYyBp\nbnQgZ2V0U291cmNlVHlwZSgpIHsKICAgICAgICByZXR1cm4gU1JDX1hNTDsK\nICAgIH0KICAgIAogICAgcHVibGljIGludCBnZXRMaW5lTnVtYmVyKCkgewog\nICAgICAgIHJldHVybiAwOwogICAgfQogICAgICAgIAogICAgcHVibGljIGlu\ndCBnZXRDb2xOdW1iZXIoKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9Cgog\nICAgcHVibGljIFN0cmluZyBnZXRSZXNvdXJjZU5hbWUoKSB7CiAgICAgICAg\ncmV0dXJuICJQZXJzaXN0ZW5jZVVuaXRJbmZvOiIgKyBfbmFtZTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFNpbXBsZSBjbGFzcyByZXNvbHZlciBidWlsdCBh\ncm91bmQgdGhlIHBlcnNpc3RlbmNlIHVuaXQgbG9hZGVyLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIGNsYXNzIENsYXNzUmVzb2x2ZXJJbXBsCiAgICAg\nICAgaW1wbGVtZW50cyBDbGFzc1Jlc29sdmVyIHsKCiAgICAgICAgcHJpdmF0\nZSBmaW5hbCBDbGFzc0xvYWRlciBfbG9hZGVyOwoKICAgICAgICBwdWJsaWMg\nQ2xhc3NSZXNvbHZlckltcGwoQ2xhc3NMb2FkZXIgbG9hZGVyKSB7CiAgICAg\nICAgICAgIF9sb2FkZXIgPSBsb2FkZXI7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgQ2xhc3NMb2FkZXIgZ2V0Q2xhc3NMb2FkZXIoQ2xhc3MgY3R4LCBD\nbGFzc0xvYWRlciBlbnYpIHsKICAgICAgICAgICAgcmV0dXJuIF9sb2FkZXI7\nCiAgICAgICAgfQoJfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGVyc2lzdGVu\nY2VYTUxTY2hlbWFWZXJzaW9uKCkgewogICAgICAgIHJldHVybiBfc2NoZW1h\nVmVyc2lvbjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRQZXJzaXN0ZW5j\nZVhNTFNjaGVtYVZlcnNpb24oU3RyaW5nIHZlcnNpb24pIHsKICAgICAgICBf\nc2NoZW1hVmVyc2lvbiA9IHZlcnNpb247CiAgICB9CgogICAgcHVibGljIFZh\nbGlkYXRpb25Nb2RlIGdldFZhbGlkYXRpb25Nb2RlKCkgewogICAgICAgIHJl\ndHVybiBfdmFsaWRhdGlvbk1vZGU7CiAgICB9CiAgICAKICAgIHByb3RlY3Rl\nZCB2b2lkIHNldFZhbGlkYXRpb25Nb2RlKFN0cmluZyBtb2RlKSB7CiAgICAg\nICAgc2V0VmFsaWRhdGlvbk1vZGUoRW51bS52YWx1ZU9mKFZhbGlkYXRpb25N\nb2RlLmNsYXNzLCBtb2RlLnRvVXBwZXJDYXNlKCkpKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRWYWxpZGF0aW9uTW9kZShWYWxpZGF0aW9uTW9kZSBt\nb2RlKSB7CiAgICAgICAgX3ZhbGlkYXRpb25Nb2RlID0gbW9kZTsKICAgIH0K\nCiAgICBwdWJsaWMgU2hhcmVkQ2FjaGVNb2RlIGdldFNoYXJlZENhY2hlTW9k\nZSgpIHsKICAgICAgICByZXR1cm4gX3NoYXJlZENhY2hlTW9kZTsKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgc2V0U2hhcmVkQ2FjaGVNb2RlKFN0cmlu\nZyBtb2RlKSB7IAogICAgICAgIHNldFNoYXJlZENhY2hlTW9kZShFbnVtLnZh\nbHVlT2YoU2hhcmVkQ2FjaGVNb2RlLmNsYXNzLCBtb2RlLnRvVXBwZXJDYXNl\nKCkpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRTaGFyZWRDYWNoZU1v\nZGUoU2hhcmVkQ2FjaGVNb2RlIG1vZGUpIHsgCiAgICAgICAgX3NoYXJlZENh\nY2hlTW9kZSA9IG1vZGU7CiAgICB9Cn0K\n","encoding":"base64"}

