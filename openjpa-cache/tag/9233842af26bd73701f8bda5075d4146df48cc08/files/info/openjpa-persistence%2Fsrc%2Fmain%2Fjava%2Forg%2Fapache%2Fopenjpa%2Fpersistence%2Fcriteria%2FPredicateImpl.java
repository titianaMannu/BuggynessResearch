{"sha":"cfd51f996b3cd0b3da411c7481a66b923fd6aa54","node_id":"MDQ6QmxvYjIwNjM2NDpjZmQ1MWY5OTZiM2NkMGIzZGE0MTFjNzQ4MWE2NmI5MjNmZDZhYTU0","size":6800,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/cfd51f996b3cd0b3da411c7481a66b923fd6aa54","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEu\ndXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29weU9u\nV3JpdGVBcnJheUxpc3Q7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3Jp\ndGVyaWEuRXhwcmVzc2lvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNy\naXRlcmlhLlByZWRpY2F0ZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLmV4cHMuRXhwcmVzc2lvbkZhY3Rvcnk7CgovKioKICogUHJlZGlj\nYXRlIGlzIGEgZXhwcmVzc2lvbiB0aGF0IGV2YWx1YXRlcyB0byB0cnVlIG9y\nIGZhbHNlLgogKiBBbGwgYm9vbGVhbiBleHByZXNzaW9ucyBhcmUgaW1wbGVt\nZW50ZWQgYXMgUHJlZGljYXRlLgogKiBBIHByZWRpY2F0ZSBjYW4gaGF2ZSB6\nZXJvIG9yIG1vcmUgcHJlZGljYXRlIGFyZ3VtZW50cy4KICogRGVmYXVsdCBw\ncmVkaWNhdGUgb3BlcmF0b3IgaXMgQU5EIChjb25qdW5jdGlvbikuCiAqIFR3\nbyBjb25zdGFudCBwcmVkaWNhdGVzIGFyZSBQcmVkaWNhdGUuVFJVRSBhbmQg\nUHJlZGljYXRlLkZBTFNFLgogKiBBTkQgcHJlZGljYXRlIHdpdGggbm8gYXJn\ndW1lbnQgZXZhbHVhdGVzIHRvIFRSVUUuCiAqIE9SIHByZWRpY2F0ZSB3aXRo\nIG5vIGFyZ3VtZW50IGV2YWx1YXRlcyB0byBGQUxTRS4KICogTmVnYXRpb24g\nb2YgYSBQcmVkaWNhdGUgY3JlYXRlcyBhIG5ldyBQcmVkaWNhdGUuCiAqIAog\nKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICogQGF1dGhvciBGYXkgV2FuZwog\nKiAKICogQHNpbmNlIDIuMC4wCiAqLwphYnN0cmFjdCBjbGFzcyBQcmVkaWNh\ndGVJbXBsIGV4dGVuZHMgRXhwcmVzc2lvbkltcGw8Qm9vbGVhbj4gaW1wbGVt\nZW50cyBQcmVkaWNhdGUgewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgRXhw\ncmVzc2lvbkltcGw8SW50ZWdlcj4gT05FICA9IG5ldyBFeHByZXNzaW9ucy5D\nb25zdGFudDxJbnRlZ2VyPigxKTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nUHJlZGljYXRlIFRSVUUgID0gbmV3IEV4cHJlc3Npb25zLkVxdWFsKE9ORSxP\nTkUpOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBQcmVkaWNhdGUgRkFMU0Ug\nPSBuZXcgRXhwcmVzc2lvbnMuTm90RXF1YWwoT05FLE9ORSk7CiAgICAKICAg\nIHByb3RlY3RlZCBmaW5hbCBMaXN0PFByZWRpY2F0ZT4gX2V4cHMgPSBuZXcg\nQXJyYXlMaXN0PFByZWRpY2F0ZT4oKTsKICAgIHByaXZhdGUgZmluYWwgQm9v\nbGVhbk9wZXJhdG9yIF9vcDsKICAgIHByaXZhdGUgYm9vbGVhbiBfbmVnYXRl\nZCA9IGZhbHNlOwoKICAgIC8qKgogICAgICogQW4gQU5EIHByZWRpY2F0ZSB3\naXRoIG5vIGFyZ3VtZW50cy4KICAgICAqLwogICAgcHJvdGVjdGVkIFByZWRp\nY2F0ZUltcGwoKSB7CiAgICAgICAgdGhpcyhCb29sZWFuT3BlcmF0b3IuQU5E\nKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBBIHByZWRpY2F0ZSB3aXRo\nIHRoZSBnaXZlbiBvcGVyYXRvci4KICAgICAqLwogICAgcHJvdGVjdGVkIFBy\nZWRpY2F0ZUltcGwoQm9vbGVhbk9wZXJhdG9yIG9wKSB7CiAgICAgICAgc3Vw\nZXIoQm9vbGVhbi5jbGFzcyk7CiAgICAgICAgX29wID0gb3A7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBBIHByZWRpY2F0ZSBvZiBnaXZlbiBvcGVyYXRvciB3\naXRoIGdpdmVuIGFyZ3VtZW50cy4KICAgICAqLwogICAgcHJvdGVjdGVkIFBy\nZWRpY2F0ZUltcGwoQm9vbGVhbk9wZXJhdG9yIG9wLCBQcmVkaWNhdGUuLi5y\nZXN0cmljdGlvbnMpIHsKICAgICAgICB0aGlzKG9wKTsKICAgICAgICBpZiAo\ncmVzdHJpY3Rpb25zICE9IG51bGwpIHsKICAgICAgICAgICAgZm9yIChQcmVk\naWNhdGUgcCA6IHJlc3RyaWN0aW9ucykKICAgICAgICAgICAgICAgIGFkZChw\nKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGRzIHRoZSBn\naXZlbiBwcmVkaWNhdGUgZXhwcmVzc2lvbi4KICAgICAqLwogICAgcHVibGlj\nIFByZWRpY2F0ZUltcGwgYWRkKEV4cHJlc3Npb248Qm9vbGVhbj4gcykgewog\nICAgICAgIF9leHBzLmFkZCgoUHJlZGljYXRlKXMpOyAvLyBhbGwgYm9vbGVh\nbiBleHByZXNzaW9ucyBhcmUgUHJlZGljYXRlCiAgICAgICAgcmV0dXJuIHRo\naXM7CiAgICB9CgogICAgcHVibGljIExpc3Q8RXhwcmVzc2lvbjxCb29sZWFu\nPj4gZ2V0RXhwcmVzc2lvbnMoKSB7CiAgICAgICAgTGlzdDxFeHByZXNzaW9u\nPEJvb2xlYW4+PiByZXN1bHQgPSBuZXcgQ29weU9uV3JpdGVBcnJheUxpc3Q8\nRXhwcmVzc2lvbjxCb29sZWFuPj4oKTsKICAgICAgICBpZiAoX2V4cHMuaXNF\nbXB0eSgpKQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIHJl\nc3VsdC5hZGRBbGwoX2V4cHMpOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAg\nICB9CgogICAgcHVibGljIGZpbmFsIEJvb2xlYW5PcGVyYXRvciBnZXRPcGVy\nYXRvcigpIHsKICAgICAgICByZXR1cm4gX29wOwogICAgfQoKICAgIC8qKgog\nICAgICogSXMgdGhpcyBwcmVkaWNhdGUgY3JlYXRlZCBieSBuZWdhdGluZyBh\nbm90aGVyIHByZWRpY2F0ZT8KICAgICAqLwogICAgcHVibGljIGZpbmFsIGJv\nb2xlYW4gaXNOZWdhdGVkKCkgewogICAgICAgIHJldHVybiBfbmVnYXRlZDsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBuZXcgcHJlZGljYXRl\nIGFzIHRoZSBuZWdhdGlvbiBvZiB0aGlzIHByZWRpY2F0ZS4gCiAgICAgKiA8\nYnI+CiAgICAgKiBOb3RlOgogICAgICogRGVmYXVsdCBuZWdhdGlvbiBjcmVh\ndGVzIGEgTm90IGV4cHJlc3Npb24gd2l0aCB0aGlzIHJlY2VpdmVyIGFzIGRl\nbGVnYXRlLgogICAgICogRGVyaXZlZCBwcmVkaWNhdGVzIGNhbiByZXR1cm4g\ndGhlIGludmVyc2UgZXhwcmVzc2lvbiwgaWYgZXhpc3RzLgogICAgICogRm9y\nIGV4YW1wbGUsIE5vdEVxdWFsIGZvciBFcXVhbCBvciBMZXNzVGhhbiBmb3Ig\nR3JlYXRlclRoYW5FcXVhbCBldGMuCiAgICAgKi8KICAgIHB1YmxpYyBQcmVk\naWNhdGVJbXBsIG5lZ2F0ZSgpIHsKICAgICAgICByZXR1cm4gbmV3IEV4cHJl\nc3Npb25zLk5vdCh0aGlzKS5tYXJrTmVnYXRlZCgpOwogICAgfQogICAgCiAg\nICBwcm90ZWN0ZWQgUHJlZGljYXRlSW1wbCBtYXJrTmVnYXRlZCgpIHsKICAg\nICAgICBfbmVnYXRlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAg\nICB9CiAgICAKICAgIEBPdmVycmlkZQogICAgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5leHBzLlZhbHVlIHRvVmFsdWUoRXhwcmVzc2lvbkZhY3Rvcnkg\nZmFjdG9yeSwgQ3JpdGVyaWFRdWVyeUltcGw8Pz4gcSkgewogICAgICAgIHRo\ncm93IG5ldyBBYnN0cmFjdE1ldGhvZEVycm9yKHRoaXMuZ2V0Q2xhc3MoKS5n\nZXROYW1lKCkpOwogICAgfQogICAgCiAgICBAT3ZlcnJpZGUKICAgIG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5FeHByZXNzaW9uIHRvS2VybmVs\nRXhwcmVzc2lvbihFeHByZXNzaW9uRmFjdG9yeSBmYWN0b3J5LCBDcml0ZXJp\nYVF1ZXJ5SW1wbDw/PiBxKSB7CiAgICAgICAgaWYgKF9leHBzLmlzRW1wdHko\nKSkgewogICAgICAgICAgICBQcmVkaWNhdGUgbmlsID0gX29wID09IEJvb2xl\nYW5PcGVyYXRvci5BTkQgPyBUUlVFIDogRkFMU0U7CiAgICAgICAgICAgIHJl\ndHVybiAoKFByZWRpY2F0ZUltcGwpbmlsKS50b0tlcm5lbEV4cHJlc3Npb24o\nZmFjdG9yeSwgcSk7CiAgICAgICAgfQogICAgICAgIGlmIChfZXhwcy5zaXpl\nKCkgPT0gMSkgewogICAgICAgICAgICBQcmVkaWNhdGUgZTAgPSBfZXhwcy5n\nZXQoMCk7CiAgICAgICAgICAgIGlmIChpc05lZ2F0ZWQoKSkKICAgICAgICAg\nICAgICAgIGUwID0gZTAubmVnYXRlKCk7CiAgICAgICAgICAgIHJldHVybiAo\nKFByZWRpY2F0ZUltcGwpZTApLnRvS2VybmVsRXhwcmVzc2lvbihmYWN0b3J5\nLCBxKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgRXhwcmVzc2lvbklt\ncGw8Pz4gZTEgPSAoRXhwcmVzc2lvbkltcGw8Pz4pX2V4cHMuZ2V0KDApOwog\nICAgICAgIEV4cHJlc3Npb25JbXBsPD8+IGUyID0gKEV4cHJlc3Npb25JbXBs\nPD8+KV9leHBzLmdldCgxKTsKICAgICAgICBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLmV4cHMuRXhwcmVzc2lvbiBrZTEgPSBlMS50b0tlcm5lbEV4cHJl\nc3Npb24oZmFjdG9yeSwgcSk7CiAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5leHBzLkV4cHJlc3Npb24ga2UyID0gZTIudG9LZXJuZWxFeHBy\nZXNzaW9uKGZhY3RvcnksIHEpOwogICAgICAgIG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuZXhwcy5FeHByZXNzaW9uIHJlc3VsdCA9IF9vcCA9PSBCb29s\nZWFuT3BlcmF0b3IuQU5EIAogICAgICAgICAgICA/IGZhY3RvcnkuYW5kKGtl\nMSxrZTIpIDogZmFjdG9yeS5vcihrZTEsIGtlMik7CgogICAgICAgIGZvciAo\naW50IGkgPSAyOyBpIDwgX2V4cHMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAg\nICAgUHJlZGljYXRlSW1wbCBwID0gKFByZWRpY2F0ZUltcGwpX2V4cHMuZ2V0\nKGkpOwogICAgICAgICAgICByZXN1bHQgPSBfb3AgPT0gQm9vbGVhbk9wZXJh\ndG9yLkFORCAKICAgICAgICAgICAgICA/IGZhY3RvcnkuYW5kKHJlc3VsdCwg\ncC50b0tlcm5lbEV4cHJlc3Npb24oZmFjdG9yeSwgcSkpCiAgICAgICAgICAg\nICAgOiBmYWN0b3J5Lm9yKHJlc3VsdCwgcC50b0tlcm5lbEV4cHJlc3Npb24o\nZmFjdG9yeSxxKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfbmVnYXRl\nZCA/IGZhY3Rvcnkubm90KHJlc3VsdCkgOiByZXN1bHQ7CiAgICB9CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBhY2NlcHRWaXNpdChDcml0ZXJp\nYUV4cHJlc3Npb25WaXNpdG9yIHZpc2l0b3IpIHsKICAgICAgICBFeHByZXNz\naW9ucy5hY2NlcHRWaXNpdCh2aXNpdG9yLCB0aGlzLCBfZXhwcy50b0FycmF5\nKG5ldyBFeHByZXNzaW9uPD8+W19leHBzLnNpemUoKV0pKTsKICAgIH0KICAg\nIAogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nQnVpbGRlciBhc1Zh\nbHVlKEFsaWFzQ29udGV4dCBxKSB7CiAgICAgICAgYm9vbGVhbiBicmFjZXMg\nPSBfZXhwcy5zaXplKCkgPiAxOwogICAgICAgIFN0cmluZ0J1aWxkZXIgYnVm\nZmVyID0gIEV4cHJlc3Npb25zLmFzVmFsdWUocSwgX2V4cHMudG9BcnJheShu\nZXcgRXhwcmVzc2lvbjw/PltfZXhwcy5zaXplKCldKSwgIiAiICtfb3AgKyAi\nICIpOwogICAgICAgIGlmIChicmFjZXMpIGJ1ZmZlci5pbnNlcnQoMCwgIigi\nKS5hcHBlbmQoIikiKTsKICAgICAgICBpZiAoaXNOZWdhdGVkKCkpIGJ1ZmZl\nci5pbnNlcnQoMCwgIk5PVCAiKTsKICAgICAgICByZXR1cm4gYnVmZmVyOwog\nICAgfQoKICAgIC8qKgogICAgICogQ29uY3JldGUgQU5EIHByZWRpY2F0ZS4K\nICAgICAqCiAgICAgKi8KICAgIHN0YXRpYyBjbGFzcyBBbmQgZXh0ZW5kcyBQ\ncmVkaWNhdGVJbXBsIHsKICAgICAgICBwdWJsaWMgQW5kKEV4cHJlc3Npb248\nQm9vbGVhbj4geCwgRXhwcmVzc2lvbjxCb29sZWFuPiB5KSB7CiAgICAgICAg\nICAgIHN1cGVyKEJvb2xlYW5PcGVyYXRvci5BTkQpOwogICAgICAgICAgICBh\nZGQoeCkuYWRkKHkpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIEFuZChQ\ncmVkaWNhdGUuLi5yZXN0cmljdGlvbnMpIHsKICAgICAgICAgICAgc3VwZXIo\nQm9vbGVhbk9wZXJhdG9yLkFORCwgcmVzdHJpY3Rpb25zKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDb25jcmV0ZSBPUiBwcmVkaWNhdGUu\nCiAgICAgKgogICAgICovCiAgICBzdGF0aWMgY2xhc3MgT3IgZXh0ZW5kcyBQ\ncmVkaWNhdGVJbXBsIHsKICAgICAgICBwdWJsaWMgT3IoRXhwcmVzc2lvbjxC\nb29sZWFuPiB4LCBFeHByZXNzaW9uPEJvb2xlYW4+IHkpIHsKICAgICAgICAg\nICAgc3VwZXIoQm9vbGVhbk9wZXJhdG9yLk9SKTsKICAgICAgICAgICAgYWRk\nKHgpLmFkZCh5KTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPcihQcmVk\naWNhdGUuLi5yZXN0cmljdGlvbnMpIHsKICAgICAgICAgICAgc3VwZXIoQm9v\nbGVhbk9wZXJhdG9yLk9SLCByZXN0cmljdGlvbnMpOwogICAgICAgIH0KICAg\nIH0KfQo=\n","encoding":"base64"}

