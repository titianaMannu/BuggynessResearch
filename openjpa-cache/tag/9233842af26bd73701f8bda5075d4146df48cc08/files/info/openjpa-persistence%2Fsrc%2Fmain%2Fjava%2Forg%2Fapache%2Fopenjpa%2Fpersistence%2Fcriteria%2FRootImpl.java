{"sha":"205470fba0c0bebfb878675164c77dc40163ca4c","node_id":"MDQ6QmxvYjIwNjM2NDoyMDU0NzBmYmEwYzBiZWJmYjg3ODY3NTE2NGM3N2RjNDAxNjNjYTRj","size":4202,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/205470fba0c0bebfb878675164c77dc40163ca4c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWE7\nCgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3JpdGVyaWEuUm9vdDsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5FbnRpdHlUeXBlOwoK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5BYnN0cmFj\ndEV4cHJlc3Npb25CdWlsZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5leHBzLkNvbnRleHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEua2VybmVsLmV4cHMuRXhwcmVzc2lvbkZhY3Rvcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuUGF0aDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5TdWJxdWVyeTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5WYWx1ZTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5tZXRhLk1ldGFtb2RlbElt\ncGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0\nYS5UeXBlczsKCi8qKgogKiBBIHJvb3QgcGF0aCB3aXRob3V0IGEgcGFyZW50\nLgogKiAKICogQHBhcmFtIDxYPiB0aGUgdHlwZSBvZiB0aGUgZW50aXR5CiAq\nCiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcgogKiBAYXV0aG9yIEZheSBXYW5n\nCiAqIAogKiBAc2luY2UgMi4wLjAKICovCmNsYXNzIFJvb3RJbXBsPFg+IGV4\ndGVuZHMgRnJvbUltcGw8WCxYPiBpbXBsZW1lbnRzIFJvb3Q8WD4gewogICAg\ncHJpdmF0ZSBmaW5hbCBUeXBlcy5FbnRpdHk8WD4gX2VudGl0eTsKICAgICAg\nICAKICAgIHB1YmxpYyBSb290SW1wbChUeXBlcy5FbnRpdHk8WD4gdHlwZSkg\newogICAgICAgIHN1cGVyKHR5cGUpOwogICAgICAgIF9lbnRpdHkgPSB0eXBl\nOwogICAgfQogICAgCiAgICBwdWJsaWMgIEVudGl0eVR5cGU8WD4gZ2V0TW9k\nZWwoKSB7CiAgICAgICAgcmV0dXJuIF9lbnRpdHk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgYWRkVG9Db250ZXh0KEV4cHJlc3Npb25GYWN0b3J5IGZhY3Rv\ncnksIE1ldGFtb2RlbEltcGwgbW9kZWwsIENyaXRlcmlhUXVlcnlJbXBsPD8+\nIHEpIHsKICAgICAgICBTdHJpbmcgYWxpYXMgPSBxLmdldEFsaWFzKHRoaXMp\nOwogICAgICAgIFZhbHVlIHZhciA9IGZhY3RvcnkubmV3Qm91bmRWYXJpYWJs\nZShhbGlhcywgQWJzdHJhY3RFeHByZXNzaW9uQnVpbGRlci5UWVBFX09CSkVD\nVCk7CiAgICAgICAgdmFyLnNldE1ldGFEYXRhKF9lbnRpdHkubWV0YSk7CiAg\nICAgICAgQ29udGV4dCBjdXJyQ29udGV4dCA9IHEuY3R4KCk7CiAgICAgICAg\nY3VyckNvbnRleHQuYWRkU2NoZW1hKGFsaWFzLCBfZW50aXR5Lm1ldGEpOwog\nICAgICAgIGN1cnJDb250ZXh0LmFkZFZhcmlhYmxlKGFsaWFzLCB2YXIpOwog\nICAgICAgIGlmIChjdXJyQ29udGV4dC5zY2hlbWFBbGlhcyA9PSBudWxsKQog\nICAgICAgICAgICBjdXJyQ29udGV4dC5zY2hlbWFBbGlhcyA9IGFsaWFzOwog\nICAgfQogICAgCiAgICAvKioKICAgICAqIENvbnZlcnQgdGhpcyBwYXRoIHRv\nIGEga2VybmVsIHBhdGggdmFsdWUuCiAgICAgKi8KICAgIEBPdmVycmlkZQog\nICAgcHVibGljIFZhbHVlIHRvVmFsdWUoRXhwcmVzc2lvbkZhY3RvcnkgZmFj\ndG9yeSwgQ3JpdGVyaWFRdWVyeUltcGw8Pz4gYykgewogICAgICAgIFN1YnF1\nZXJ5SW1wbDw/PiBzdWJxdWVyeSA9IGMuZ2V0RGVsZWdhdG9yKCk7CiAgICAg\nICAgUGF0aCB2YXIgPSBudWxsOwogICAgICAgIFZhbHVlIHZhbCA9IG51bGw7\nCiAgICAgICAgU3RyaW5nIGFsaWFzID0gYy5nZXRBbGlhcyh0aGlzKTsKICAg\nICAgICBpZiAoIWFsaWFzLmVxdWFsc0lnbm9yZUNhc2UoYy5jdHgoKS5zY2hl\nbWFBbGlhcykKICAgICAgICAgICAgJiYgKHZhbCA9IGMuZ2V0UmVnaXN0ZXJl\nZFJvb3RWYXJpYWJsZSh0aGlzKSkgIT0gbnVsbCkgewogICAgICAgICAgICAv\nLyB0aGlzIGlzIGNyb3NzIGpvaW4KICAgICAgICAgICAgdmFyID0gZmFjdG9y\neS5uZXdQYXRoKHZhbCk7CiAgICAgICAgfSBlbHNlIGlmIChpblN1YnF1ZXJ5\nKHN1YnF1ZXJ5KSkgewogICAgICAgICAgICBTdWJxdWVyeSBzdWJRID0gc3Vi\ncXVlcnkuZ2V0U3ViUSgpOwogICAgICAgICAgICB2YXIgPSBmYWN0b3J5Lm5l\nd1BhdGgoc3ViUSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFy\nID0gZmFjdG9yeS5uZXdQYXRoKCk7CiAgICAgICAgICAgIHZhci5zZXRTY2hl\nbWFBbGlhcyhhbGlhcyk7CiAgICAgICAgfQogICAgICAgIHZhci5zZXRNZXRh\nRGF0YShfZW50aXR5Lm1ldGEpOwogICAgICAgIHJldHVybiB2YXI7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogQ29udmVydCB0aGlzIHBhdGggdG8gYSBr\nZXJuZWwgZXhwcmVzc2lvbi4KICAgICAqIAogICAgICovCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMu\nRXhwcmVzc2lvbiB0b0tlcm5lbEV4cHJlc3Npb24oCiAgICAgICAgRXhwcmVz\nc2lvbkZhY3RvcnkgZmFjdG9yeSwgQ3JpdGVyaWFRdWVyeUltcGw8Pz4gYykg\newogICAgICAgIFZhbHVlIHBhdGggPSB0b1ZhbHVlKGZhY3RvcnksIGMpOwog\nICAgICAgIFZhbHVlIHZhciA9IGZhY3RvcnkubmV3Qm91bmRWYXJpYWJsZShj\nLmdldEFsaWFzKHRoaXMpLCAKICAgICAgICAgICAgIF9lbnRpdHkubWV0YS5n\nZXREZXNjcmliZWRUeXBlKCkpOwogICAgICAgIHJldHVybiBmYWN0b3J5LmJp\nbmRWYXJpYWJsZSh2YXIsIHBhdGgpOwogICAgfQogICAgCiAgICBwdWJsaWMg\nU3RyaW5nQnVpbGRlciBhc1ZhbHVlKEFsaWFzQ29udGV4dCBxKSB7CiAgICAg\nICAgVmFsdWUgdiA9IHEuZ2V0UmVnaXN0ZXJlZFJvb3RWYXJpYWJsZSh0aGlz\nKTsKICAgICAgICBpZiAodiAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4g\nbmV3IFN0cmluZ0J1aWxkZXIodi5nZXRBbGlhcygpKTsKICAgICAgICB2ID0g\ncS5nZXRSZWdpc3RlcmVkVmFsdWUodGhpcyk7CiAgICAgICAgaWYgKHYgIT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdCdWlsZGVyKHYu\nZ2V0QWxpYXMoKSk7CiAgICAgICAgaWYgKHEuaXNSZWdpc3RlcmVkKHRoaXMp\nKSAKICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdCdWlsZGVyKHEuZ2V0\nUmVnaXN0ZXJlZFZhbHVlKHRoaXMpLmdldE5hbWUoKSk7CiAgICAgICAgcmV0\ndXJuIG5ldyBTdHJpbmdCdWlsZGVyKCkuYXBwZW5kKENoYXJhY3Rlci50b0xv\nd2VyQ2FzZShfZW50aXR5LmdldE5hbWUoKS5jaGFyQXQoMCkpKTsKICAgIH0K\nICAgIAogICAgcHVibGljIFN0cmluZ0J1aWxkZXIgYXNWYXJpYWJsZShBbGlh\nc0NvbnRleHQgcSkgewogICAgICAgIHJldHVybiBuZXcgU3RyaW5nQnVpbGRl\ncihfZW50aXR5LmdldE5hbWUoKSkuYXBwZW5kKCIgIikuYXBwZW5kKGFzVmFs\ndWUocSkpOwogICAgfQoKfQo=\n","encoding":"base64"}

