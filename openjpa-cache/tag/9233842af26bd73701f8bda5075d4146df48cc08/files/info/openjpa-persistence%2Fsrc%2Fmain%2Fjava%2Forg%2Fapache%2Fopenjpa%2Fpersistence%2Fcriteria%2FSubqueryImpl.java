{"sha":"8638077631a894e4cb70779013010adbf7d4dc5b","node_id":"MDQ6QmxvYjIwNjM2NDo4NjM4MDc3NjMxYTg5NGU0Y2I3MDc3OTAxMzAxMGFkYmY3ZDRkYzVi","size":13089,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8638077631a894e4cb70779013010adbf7d4dc5b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEu\ndXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLlNldDsKaW1wb3J0IGphdmEu\ndXRpbC5TdGFjazsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJp\nYS5BYnN0cmFjdFF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3Jp\ndGVyaWEuQ29sbGVjdGlvbkpvaW47CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5jcml0ZXJpYS5FeHByZXNzaW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuSm9pbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNy\naXRlcmlhLkpvaW5UeXBlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3Jp\ndGVyaWEuTGlzdEpvaW47CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0\nZXJpYS5NYXBKb2luOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3JpdGVy\naWEuUHJlZGljYXRlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3JpdGVy\naWEuUm9vdDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNyaXRlcmlhLlNl\ndEpvaW47CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5TdWJx\ndWVyeTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5FbnRp\ndHlUeXBlOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhw\ncy5Db250ZXh0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5l\neHBzLkV4cHJlc3Npb25GYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5leHBzLlF1ZXJ5RXhwcmVzc2lvbnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuVmFsdWU7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLmpwcWwuSlBRTEV4cHJlc3Npb25CdWls\nZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRh\nRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkZpZWxkTWV0\nYURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5WYWx1ZU1l\ndGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLm1ldGEuQWJzdHJhY3RNYW5hZ2VkVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5tZXRhLk1lbWJlcnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YS5NZXRhbW9kZWxJbXBs\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLm1ldGEu\nVHlwZXM7CgovKioKICogU3VicXVlcnkgaXMgYW4gZXhwcmVzc2lvbiB3aGlj\naCBpdHNlbGYgaXMgYSBxdWVyeSBhbmQgYWx3YXlzIGFwcGVhcnMgaW4gdGhl\nCiAqIGNvbnRleHQgb2YgYSBwYXJlbnQgcXVlcnkuIEEgc3VicXVlcnkgZGVs\nZWdhdGVzIHRvIGEgY2FwdGl2ZSBxdWVyeSBmb3IgbW9zdAogKiBvZiB0aGUg\nb3BlcmF0aW9ucyBidXQgYWxzbyBtYWludGFpbnMgaXRzIG93biBqb2lucyBh\nbmQgY29ycmVsYXRlZCBqb2lucy4KICogCiAqIEBwYXJhbSA8VD4gdGhlIHR5\ncGUgc2VsZWN0ZWQgYnkgdGhpcyBzdWJxdWVyeS4KICogCiAqIEBhdXRob3Ig\nUGluYWtpIFBvZGRhcgogKiBAYXV0aG9yIEZheSBXYW5nCiAqIAogKiBAc2lu\nY2UgMi4wLjAKICovCmNsYXNzIFN1YnF1ZXJ5SW1wbDxUPiBleHRlbmRzIEV4\ncHJlc3Npb25JbXBsPFQ+IGltcGxlbWVudHMgU3VicXVlcnk8VD4gewogICAg\ncHJpdmF0ZSBmaW5hbCBBYnN0cmFjdFF1ZXJ5PD8+IF9wYXJlbnQ7CiAgICBw\ncml2YXRlIGZpbmFsIENyaXRlcmlhUXVlcnlJbXBsPFQ+IF9kZWxlZ2F0ZTsK\nICAgIHByaXZhdGUgZmluYWwgTWV0YW1vZGVsSW1wbCAgX21vZGVsOwogICAg\ncHJpdmF0ZSBqYXZhLnV0aWwuU2V0PEpvaW48Pyw/Pj4gX2pvaW5zOwogICAg\ncHJpdmF0ZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuU3VicXVl\ncnkgX3N1YnE7CiAgICBwcml2YXRlIExpc3Q8Sm9pbjw/LD8+PiBfY29yckpv\naW5zID0gbnVsbDsKICAgIAogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYSBz\ndWJxdWVyeSBhbHdheXMgaW4gdGhlIGNvbnRleHQgb2YgYSBwYXJlbnQgcXVl\ncnkuCiAgICAgKiAKICAgICAqIEBwYXJhbSBjbHMgdGhlIHJlc3VsdCB0eXBl\nIG9mIHRoaXMgc3VicXVlcnkKICAgICAqIEBwYXJhbSBwYXJlbnQgdGhlIG5v\nbi1udWxsIHBhcmVudCBxdWVyeSB3aGljaCBpdHNlbGYgY2FuIGJlIGEgc3Vi\ncXVlcnkuCiAgICAgKi8KICAgIFN1YnF1ZXJ5SW1wbChDbGFzczxUPiBjbHMs\nIEFic3RyYWN0UXVlcnk8Pz4gcGFyZW50KSB7CiAgICAgICAgc3VwZXIoY2xz\nKTsKICAgICAgICBfcGFyZW50ID0gcGFyZW50OwogICAgICAgIGlmIChwYXJl\nbnQgaW5zdGFuY2VvZiBDcml0ZXJpYVF1ZXJ5SW1wbCkgewogICAgICAgICAg\nICBfbW9kZWwgPSAoKENyaXRlcmlhUXVlcnlJbXBsPD8+KXBhcmVudCkuZ2V0\nTWV0YW1vZGVsKCk7CiAgICAgICAgfSBlbHNlIGlmIChwYXJlbnQgaW5zdGFu\nY2VvZiBTdWJxdWVyeUltcGwpIHsKICAgICAgICAgICAgX21vZGVsID0gKChT\ndWJxdWVyeUltcGw8Pz4pcGFyZW50KS5nZXRNZXRhbW9kZWwoKTsKICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICBfbW9kZWwgPSBudWxsOwogICAgICAg\nIH0KICAgICAgICBfZGVsZWdhdGUgPSBuZXcgQ3JpdGVyaWFRdWVyeUltcGw8\nVD4oX21vZGVsLCB0aGlzKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBH\nZXRzIHRoZSBwYXJlbnQgcXVlcnkgb2YgdGhpcyBzdWJxdWVyeS4KICAgICAq\nIENhbiBiZSBhIHF1ZXJ5IG9yIGFub3RoZXIgc3VicXVlcnkuCiAgICAgKi8K\nICAgIHB1YmxpYyBBYnN0cmFjdFF1ZXJ5PD8+IGdldFBhcmVudCgpIHsKICAg\nICAgICByZXR1cm4gX3BhcmVudDsKICAgIH0KICAgIAogICAgLyoqCiAgICAg\nKiBHZXRzIHRoZSBjYXB0aXZlIHF1ZXJ5IHRvIHdoaWNoIHRoaXMgc3VicXVl\ncnkgZGVsZWdhdGVzLgogICAgICovCiAgICBDcml0ZXJpYVF1ZXJ5SW1wbDxU\nPiBnZXREZWxlZ2F0ZSgpIHsKICAgICAgICByZXR1cm4gX2RlbGVnYXRlOwog\nICAgfQogICAgCiAgICBwdWJsaWMgTWV0YW1vZGVsSW1wbCBnZXRNZXRhbW9k\nZWwoKSB7CiAgICAgICAgcmV0dXJuIF9tb2RlbDsKICAgIH0KICAgIAogICAg\nU3RhY2s8Q29udGV4dD4gZ2V0Q29udGV4dHMoKSB7CiAgICAgICAgcmV0dXJu\nIGdldElubmVybW9zdFBhcmVudCgpLmdldENvbnRleHRzKCk7CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogR2V0cyB0aGUgJ3Jvb3QnIHF1ZXJ5IGZvciB0\naGlzIHN1YnF1ZXJ5LgogICAgICovCiAgICBwdWJsaWMgQ3JpdGVyaWFRdWVy\neUltcGw8Pz4gZ2V0SW5uZXJtb3N0UGFyZW50KCkgewogICAgICAgIHJldHVy\nbiAoQ3JpdGVyaWFRdWVyeUltcGw8Pz4pKCgoX3BhcmVudCBpbnN0YW5jZW9m\nIENyaXRlcmlhUXVlcnlJbXBsKSkgPyAKICAgICAgICAgICAgX3BhcmVudCA6\nICgoU3VicXVlcnlJbXBsPD8+KV9wYXJlbnQpLmdldElubmVybW9zdFBhcmVu\ndCgpKTsKICAgIH0KCiAgICBwdWJsaWMgU3VicXVlcnk8VD4gc2VsZWN0KEV4\ncHJlc3Npb248VD4gZXhwcmVzc2lvbikgewogICAgICAgIF9kZWxlZ2F0ZS5z\nZWxlY3QoZXhwcmVzc2lvbik7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyBFeHByZXNzaW9uPFQ+IGdldFNlbGVjdGlvbigp\nIHsKICAgICAgICByZXR1cm4gKEV4cHJlc3Npb248VD4pX2RlbGVnYXRlLmdl\ndFNlbGVjdGlvbigpOwogICAgfQogICAgCiAgICBwdWJsaWMgPFg+IFJvb3Q8\nWD4gZnJvbShFbnRpdHlUeXBlPFg+IGVudGl0eSkgewogICAgICAgIHJldHVy\nbiBfZGVsZWdhdGUuZnJvbShlbnRpdHkpOwogICAgfQoKICAgIHB1YmxpYyA8\nWD4gUm9vdDxYPiBmcm9tKENsYXNzPFg+IGVudGl0eUNsYXNzKSB7CiAgICAg\nICAgcmV0dXJuIF9kZWxlZ2F0ZS5mcm9tKGVudGl0eUNsYXNzKTsKICAgIH0K\nCiAgICBwdWJsaWMgU2V0PFJvb3Q8Pz4+IGdldFJvb3RzKCkgewogICAgICAg\nIHJldHVybiBfZGVsZWdhdGUuZ2V0Um9vdHMoKTsKICAgIH0KICAgIAogICAg\ncHVibGljIFJvb3Q8Pz4gZ2V0Um9vdCgpIHsKICAgICAgICByZXR1cm4gX2Rl\nbGVnYXRlLmdldFJvb3QoZmFsc2UpOwogICAgfSAgICAKCiAgICBwdWJsaWMg\nU3VicXVlcnk8VD4gd2hlcmUoRXhwcmVzc2lvbjxCb29sZWFuPiByZXN0cmlj\ndGlvbikgewogICAgICAgIF9kZWxlZ2F0ZS53aGVyZShyZXN0cmljdGlvbik7\nCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIFN1YnF1\nZXJ5PFQ+IHdoZXJlKFByZWRpY2F0ZS4uLiByZXN0cmljdGlvbnMpIHsKICAg\nICAgICBfZGVsZWdhdGUud2hlcmUocmVzdHJpY3Rpb25zKTsKICAgICAgICBy\nZXR1cm4gdGhpczsKICAgIH0KCiAgICBwdWJsaWMgU3VicXVlcnk8VD4gZ3Jv\ndXBCeShFeHByZXNzaW9uPD8+Li4uIGdyb3VwaW5nKSB7CiAgICAgICAgX2Rl\nbGVnYXRlLmdyb3VwQnkoZ3JvdXBpbmcpOwogICAgICAgIHJldHVybiB0aGlz\nOwogICAgfQogICAgCiAgICBwdWJsaWMgU3VicXVlcnk8VD4gZ3JvdXBCeShM\naXN0PEV4cHJlc3Npb248Pz4+IGdyb3VwaW5nKSB7CiAgICAgICAgX2RlbGVn\nYXRlLmdyb3VwQnkoZ3JvdXBpbmcpOwogICAgICAgIHJldHVybiB0aGlzOwog\nICAgfQoKICAgIHB1YmxpYyBTdWJxdWVyeTxUPiBoYXZpbmcoRXhwcmVzc2lv\nbjxCb29sZWFuPiByZXN0cmljdGlvbikgewogICAgICAgIF9kZWxlZ2F0ZS5o\nYXZpbmcocmVzdHJpY3Rpb24pOwogICAgICAgIHJldHVybiB0aGlzOwogICAg\nfQoKICAgIHB1YmxpYyBTdWJxdWVyeTxUPiBoYXZpbmcoUHJlZGljYXRlLi4u\nIHJlc3RyaWN0aW9ucykgewogICAgICAgIF9kZWxlZ2F0ZS5oYXZpbmcocmVz\ndHJpY3Rpb25zKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBw\ndWJsaWMgU3VicXVlcnk8VD4gZGlzdGluY3QoYm9vbGVhbiBkaXN0aW5jdCkg\newogICAgICAgIF9kZWxlZ2F0ZS5kaXN0aW5jdChkaXN0aW5jdCk7CiAgICAg\nICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIExpc3Q8RXhwcmVz\nc2lvbjw/Pj4gZ2V0R3JvdXBMaXN0KCkgewogICAgICAgIHJldHVybiBfZGVs\nZWdhdGUuZ2V0R3JvdXBMaXN0KCk7CiAgICB9CgogICAgcHVibGljIFByZWRp\nY2F0ZSBnZXRSZXN0cmljdGlvbigpIHsKICAgICAgICByZXR1cm4gX2RlbGVn\nYXRlLmdldFJlc3RyaWN0aW9uKCk7CiAgICB9CgogICAgcHVibGljIFByZWRp\nY2F0ZSBnZXRHcm91cFJlc3RyaWN0aW9uKCkgewogICAgICAgIHJldHVybiBf\nZGVsZWdhdGUuZ2V0R3JvdXBSZXN0cmljdGlvbigpOwogICAgfQoKICAgIHB1\nYmxpYyBib29sZWFuIGlzRGlzdGluY3QoKSB7CiAgICAgICAgcmV0dXJuIF9k\nZWxlZ2F0ZS5pc0Rpc3RpbmN0KCk7CiAgICB9CgogICAgcHVibGljIDxVPiBT\ndWJxdWVyeTxVPiBzdWJxdWVyeShDbGFzczxVPiB0eXBlKSB7CiAgICAgICAg\ncmV0dXJuIG5ldyBTdWJxdWVyeUltcGw8VT4odHlwZSwgdGhpcyk7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogQ29ycmVsYXRlIHRoaXMgc3VicXVlcnkg\nd2l0aCB0aGUgZ2l2ZW4gcm9vdC4KICAgICAqLwogICAgcHVibGljIDxZPiBS\nb290PFk+IGNvcnJlbGF0ZShSb290PFk+IHJvb3QpIHsKICAgICAgICBUeXBl\ncy5FbnRpdHk8WT4gZW50aXR5ID0gKFR5cGVzLkVudGl0eTxZPilyb290Lmdl\ndE1vZGVsKCk7CiAgICAgICAgUm9vdEltcGw8WT4gY29yclJvb3QgPSBuZXcg\nUm9vdEltcGw8WT4oZW50aXR5KTsKICAgICAgICBjb3JyUm9vdC5zZXRDb3Jy\nZWxhdGVkUGF0aCgoUm9vdEltcGw8WT4pcm9vdCk7CiAgICAgICAgX2RlbGVn\nYXRlLmFkZFJvb3QoY29yclJvb3QpOwogICAgICAgIHJldHVybiBjb3JyUm9v\ndDsKICAgIH0KICAgIAogICAgcHVibGljIExpc3Q8Sm9pbjw/LD8+PiBnZXRD\nb3JyZWxhdGVkSm9pbnMoKSB7CiAgICAgICAgcmV0dXJuIF9jb3JySm9pbnM7\nCiAgICB9CiAgICAKICAgIC8qKgogICAgICogQ29ycmVsYXRlIHRoaXMgc3Vi\ncXVlcnkgd2l0aCB0aGUgZ2l2ZW4gam9pbi4KICAgICAqLwogICAgcHVibGlj\nIDxYLFk+IEpvaW48WCxZPiBjb3JyZWxhdGUoSm9pbjxYLFk+IHBhcmVudEpv\naW4pIHsKICAgICAgICBKb2luPD8sPz4gY29yckpvaW4gPSBjbG9uZShwYXJl\nbnRKb2luKTsKICAgICAgICAoKFBhdGhJbXBsPD8sPz4pY29yckpvaW4pLnNl\ndENvcnJlbGF0ZWRQYXRoKChQYXRoSW1wbDw/LD8+KXBhcmVudEpvaW4pOwog\nICAgICAgIGlmIChfY29yckpvaW5zID09IG51bGwpCiAgICAgICAgICAgIF9j\nb3JySm9pbnMgPSBuZXcgQXJyYXlMaXN0PEpvaW48Pyw/Pj4oKTsKICAgICAg\nICBfY29yckpvaW5zLmFkZChjb3JySm9pbik7CiAgICAgICAgcmV0dXJuIChK\nb2luPFgsWT4pY29yckpvaW47CiAgICB9CiAgICAKICAgIHByaXZhdGUgSm9p\nbjw/LD8+IGNsb25lKEpvaW48Pyw/PiBqb2luKSB7CiAgICAgICAgTGlzdDxN\nZW1iZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1wbDw/LD8+PiBtZW1iZXJzID0g\nbmV3IEFycmF5TGlzdDxNZW1iZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1wbDw/\nLD8+PigpOwogICAgICAgIExpc3Q8Sm9pblR5cGU+IGp0cyA9IG5ldyBBcnJh\neUxpc3Q8Sm9pblR5cGU+KCk7CiAgICAgICAgRnJvbUltcGw8Pyw/PiByb290\nID0gZ2V0TWVtYmVycyhqb2luLCBtZW1iZXJzLCBqdHMpOwogICAgICAgIE1l\nbWJlcnMuU2luZ3VsYXJBdHRyaWJ1dGVJbXBsPD8sPz4gbWVtYmVyID0gbWVt\nYmVycy5nZXQoMCk7CiAgICAgICAgSm9pblR5cGUganQgPSBqdHMuZ2V0KDAp\nOwogICAgICAgIEpvaW48Pyw/PiBqb2luMSA9IG1ha2VKb2luKHJvb3QsIG1l\nbWJlciwganQpOwogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbWVtYmVy\ncy5zaXplKCk7IGkrKykgewogICAgICAgICAgICBqb2luMSA9IG1ha2VKb2lu\nKChGcm9tSW1wbDw/LD8+KWpvaW4xLCBtZW1iZXJzLmdldChpKSwganRzLmdl\ndChpKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBqb2luMTsKICAgIH0K\nICAgIAogICAgLyoqCiAgICAgKiBBZmZpcm1zIGlmIHRoaXMgaXMgYSBjb3Jy\nZWxhdGVkIHN1YnF1ZXJ5LgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBp\nc0NvcnJlbGF0ZWQoKSB7CiAgICAgICAgcmV0dXJuIF9jb3JySm9pbnMgIT0g\nbnVsbDsKICAgIH0KICAgIAogICAgcHJpdmF0ZSBKb2luPD8sPz4gbWFrZUpv\naW4oRnJvbUltcGw8Pyw/PiBwYXJlbnQsIE1lbWJlcnMuU2luZ3VsYXJBdHRy\naWJ1dGVJbXBsPD8sPz4gbWVtYmVyLCBKb2luVHlwZSBqdCkgewogICAgICAg\nIHJldHVybiBuZXcgSm9pbnMuU2luZ3VsYXJKb2luKHBhcmVudCwgbWVtYmVy\nLCBqdCk7CiAgICB9CiAgICAKICAgIHByaXZhdGUgRnJvbUltcGw8Pyw/PiBn\nZXRNZW1iZXJzKEpvaW48Pyw/PiBqb2luLCBMaXN0PE1lbWJlcnMuU2luZ3Vs\nYXJBdHRyaWJ1dGVJbXBsPD8sPz4+IG1lbWJlcnMsIAogICAgICAgIExpc3Q8\nSm9pblR5cGU+IGp0cykgewogICAgICAgIFBhdGhJbXBsPD8sPz4gcGFyZW50\nID0gKFBhdGhJbXBsPD8sPz4pam9pbi5nZXRQYXJlbnRQYXRoKCk7CiAgICAg\nICAgTWVtYmVycy5TaW5ndWxhckF0dHJpYnV0ZUltcGw8Pyw/PiBtZW1iZXIg\nPSAoTWVtYmVycy5TaW5ndWxhckF0dHJpYnV0ZUltcGw8Pyw/PikoKEpvaW5z\nLlNpbmd1bGFySm9pbjw/LD8+KWpvaW4pCiAgICAgICAgICAgIC5nZXRNZW1i\nZXIoKTsKICAgICAgICBKb2luVHlwZSBqdCA9IGpvaW4uZ2V0Sm9pblR5cGUo\nKTsKICAgICAgICBGcm9tSW1wbDw/LD8+IHJvb3QgPSBudWxsOwogICAgICAg\nIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBSb290SW1wbCkgewogICAgICAgICAg\nICBtZW1iZXJzLmFkZChtZW1iZXIpOwogICAgICAgICAgICBqdHMuYWRkKGp0\nKTsKICAgICAgICAgICAgcmV0dXJuIChGcm9tSW1wbDw/LD8+KXBhcmVudDsK\nICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByb290ID0gZ2V0TWVtYmVy\ncygoSm9pbjw/LD8+KXBhcmVudCwgbWVtYmVycywganRzKTsKICAgICAgICB9\nCiAgICAgICAgbWVtYmVycy5hZGQobWVtYmVyKTsKICAgICAgICBqdHMuYWRk\nKGp0KTsKICAgICAgICByZXR1cm4gcm9vdDsKICAgIH0KICAgIAogICAgcHVi\nbGljIDxYLFk+IENvbGxlY3Rpb25Kb2luPFgsWT4gY29ycmVsYXRlKENvbGxl\nY3Rpb25Kb2luPFgsWT4gam9pbikgewogICAgICAgIF9kZWxlZ2F0ZS5mcm9t\nKGpvaW4uZ2V0TW9kZWwoKS5nZXRCaW5kYWJsZUphdmFUeXBlKCkpOwogICAg\nICAgIHJldHVybiBqb2luOwogICAgfQogICAgCiAgICBwdWJsaWMgPFgsWT4g\nU2V0Sm9pbjxYLFk+IGNvcnJlbGF0ZShTZXRKb2luPFgsWT4gam9pbikgewog\nICAgICAgIF9kZWxlZ2F0ZS5mcm9tKGpvaW4uZ2V0TW9kZWwoKS5nZXRCaW5k\nYWJsZUphdmFUeXBlKCkpOwogICAgICAgIHJldHVybiBqb2luOwogICAgfQog\nICAgCiAgICBwdWJsaWMgPFgsWT4gTGlzdEpvaW48WCxZPiBjb3JyZWxhdGUo\nTGlzdEpvaW48WCxZPiBqb2luKSB7CiAgICAgICAgX2RlbGVnYXRlLmZyb20o\nam9pbi5nZXRNb2RlbCgpLmdldEJpbmRhYmxlSmF2YVR5cGUoKSk7CiAgICAg\nICAgcmV0dXJuIGpvaW47CiAgICB9CiAgICAKICAgIHB1YmxpYyA8WCxLLFY+\nIE1hcEpvaW48WCxLLFY+IGNvcnJlbGF0ZShNYXBKb2luPFgsSyxWPiBqb2lu\nKSB7CiAgICAgICAgX2RlbGVnYXRlLmZyb20oam9pbi5nZXRNb2RlbCgpLmdl\ndEJpbmRhYmxlSmF2YVR5cGUoKSk7CiAgICAgICAgcmV0dXJuIGpvaW47CiAg\nICB9CiAgICAKICAgIHB1YmxpYyBqYXZhLnV0aWwuU2V0PEpvaW48PywgPz4+\nIGdldEpvaW5zKCkgewogICAgICAgIHJldHVybiBfam9pbnM7CiAgICB9CiAg\nICAKICAgIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5TdWJxdWVy\neSBnZXRTdWJRKCkgewogICAgICAgIHJldHVybiBfc3VicTsKICAgIH0KCiAg\nICAvKioKICAgICAqIENvbnZlcnQgdGhpcyBwYXRoIHRvIGEga2VybmVsIHBh\ndGggdmFsdWUuCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgcHVibGljIFZh\nbHVlIHRvVmFsdWUoRXhwcmVzc2lvbkZhY3RvcnkgZmFjdG9yeSwgQ3JpdGVy\naWFRdWVyeUltcGw8Pz4gcSkgewogICAgICAgIGZpbmFsIGJvb2xlYW4gc3Vi\nY2xhc3NlcyA9IHRydWU7CiAgICAgICAgQ3JpdGVyaWFFeHByZXNzaW9uQnVp\nbGRlciBleHByQnVpbGRlciA9IG5ldyBDcml0ZXJpYUV4cHJlc3Npb25CdWls\nZGVyKCk7CiAgICAgICAgU3RyaW5nIGFsaWFzID0gcS5nZXRBbGlhcyh0aGlz\nKTsKICAgICAgICBDbGFzc01ldGFEYXRhIGNhbmRpZGF0ZSA9IGdldENhbmRp\nZGF0ZSgpOyAKICAgICAgICBfc3VicSA9IGZhY3RvcnkubmV3U3VicXVlcnko\nY2FuZGlkYXRlLCBzdWJjbGFzc2VzLCBhbGlhcyk7CiAgICAgICAgX3N1YnEu\nc2V0TWV0YURhdGEoY2FuZGlkYXRlKTsKICAgICAgICBTdGFjazxDb250ZXh0\nPiBjb250ZXh0cyA9IGdldENvbnRleHRzKCk7CiAgICAgICAgQ29udGV4dCBj\nb250ZXh0ID0gbmV3IENvbnRleHQobnVsbCwgX3N1YnEsIGNvbnRleHRzLnBl\nZWsoKSk7CiAgICAgICAgY29udGV4dHMucHVzaChjb250ZXh0KTsKICAgICAg\nICBfZGVsZWdhdGUuc2V0Q29udGV4dHMoY29udGV4dHMpOwogICAgICAgIFF1\nZXJ5RXhwcmVzc2lvbnMgc3ViZXhwID0gZXhwckJ1aWxkZXIuZ2V0UXVlcnlF\neHByZXNzaW9ucyhmYWN0b3J5LCBfZGVsZWdhdGUpOwogICAgICAgIF9zdWJx\nLnNldFF1ZXJ5RXhwcmVzc2lvbnMoc3ViZXhwKTsKICAgICAgICBpZiAoc3Vi\nZXhwLnByb2plY3Rpb25zLmxlbmd0aCA+IDApCiAgICAgICAgICAgIEpQUUxF\neHByZXNzaW9uQnVpbGRlci5jaGVja0VtYmVkZGFibGUoc3ViZXhwLnByb2pl\nY3Rpb25zWzBdLCBudWxsKTsKICAgICAgICBjb250ZXh0cy5wb3AoKTsKICAg\nICAgICByZXR1cm4gX3N1YnE7CiAgICB9CiAgICAKICAgIC8vIGlmIHdlIGFy\nZSBpbiBhIHN1YnF1ZXJ5IGFnYWluc3QgYSBjb2xsZWN0aW9uIGZyb20gYSAK\nICAgIC8vIGNvcnJlbGF0ZWQgcGFyZW50LCB0aGUgY2FuZGlkYXRlIG9mIHRo\nZSBzdWJxdWVyeQogICAgLy8gc2hvdWxkIGJlIHRoZSBjbGFzcyBtZXRhZGF0\nYSBvZiB0aGUgY29sbGVjdGlvbiBlbGVtZW50IAogICAgcHJpdmF0ZSBDbGFz\nc01ldGFEYXRhIGdldENhbmRpZGF0ZSgpIHsKICAgICAgICBpZiAoZ2V0Um9v\ndHMoKS5pc0VtcHR5KCkgJiYgX2NvcnJKb2lucyAhPSBudWxsKSB7CiAgICAg\nICAgICAgIEZyb21JbXBsPD8sPz4gY29yckpvaW4gPSAoRnJvbUltcGw8Pyw/\nPikgX2NvcnJKb2lucy5nZXQoMCk7CiAgICAgICAgICAgIGlmIChjb3JySm9p\nbi5nZXRKb2lucygpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIEZyb21J\nbXBsPD8sPz4gam9pbiA9IChGcm9tSW1wbDw/LD8+KWNvcnJKb2luLmdldEpv\naW5zKCkuaXRlcmF0b3IoKS5uZXh0KCk7CiAgICAgICAgICAgICAgICByZXR1\ncm4gZ2V0SW5uZXJtb3N0Q2FuZGlkYXRlKGpvaW4pOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgICAKICAgICAgICBSb290SW1wbDw/PiByb290\nID0gKFJvb3RJbXBsPD8+KWdldFJvb3QoKTsKICAgICAgICBpZiAocm9vdCAh\nPSBudWxsICYmIHJvb3QuZ2V0Q29ycmVsYXRlZFBhdGgoKSAhPSBudWxsICYm\nICFyb290LmdldEpvaW5zKCkuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgIEZy\nb21JbXBsPD8sPz4gam9pbiA9IChGcm9tSW1wbDw/LD8+KSByb290LmdldEpv\naW5zKCkuaXRlcmF0b3IoKS5uZXh0KCk7CiAgICAgICAgICAgIHJldHVybiBn\nZXRJbm5lcm1vc3RDYW5kaWRhdGUoam9pbik7CiAgICAgICAgfQoKICAgICAg\nICByZXR1cm4gKChBYnN0cmFjdE1hbmFnZWRUeXBlPD8+KXJvb3QuZ2V0TW9k\nZWwoKSkubWV0YTsKICAgIH0KICAgIAogICAgcHJpdmF0ZSBDbGFzc01ldGFE\nYXRhIGdldElubmVybW9zdENhbmRpZGF0ZShGcm9tSW1wbDw/LD8+IGZyb20p\nIHsKICAgICAgICBpZiAoIWZyb20uZ2V0Sm9pbnMoKS5pc0VtcHR5KCkpIHsK\nICAgICAgICAgICAgZnJvbSA9IChGcm9tSW1wbDw/LD8+KSBmcm9tLmdldEpv\naW5zKCkuaXRlcmF0b3IoKS5uZXh0KCk7CiAgICAgICAgICAgIHJldHVybiBn\nZXRJbm5lcm1vc3RDYW5kaWRhdGUoZnJvbSk7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiBnZXRDYW5kaWRhdGUoZnJvbSk7CiAgICB9CiAgICAKICAgIAog\nICAgcHJpdmF0ZSBDbGFzc01ldGFEYXRhIGdldENhbmRpZGF0ZShGcm9tSW1w\nbDw/LD8+IGZyb20pIHsKICAgICAgICByZXR1cm4gZ2V0RmllbGRUeXBlKGZy\nb20uX21lbWJlci5mbWQpOwogICAgfQogICAgCiAgICBwcml2YXRlIHN0YXRp\nYyBDbGFzc01ldGFEYXRhIGdldEZpZWxkVHlwZShGaWVsZE1ldGFEYXRhIGZt\nZCkgewogICAgICAgIGlmIChmbWQgPT0gbnVsbCkKICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CgogICAgICAgIENsYXNzTWV0YURhdGEgY21kID0gbnVsbDsK\nICAgICAgICBWYWx1ZU1ldGFEYXRhIHZtZDsKCiAgICAgICAgaWYgKCh2bWQg\nPSBmbWQuZ2V0RWxlbWVudCgpKSAhPSBudWxsKQogICAgICAgICAgICBjbWQg\nPSB2bWQuZ2V0RGVjbGFyZWRUeXBlTWV0YURhdGEoKTsKICAgICAgICBlbHNl\nIGlmICgodm1kID0gZm1kLmdldEtleSgpKSAhPSBudWxsKQogICAgICAgICAg\nICBjbWQgPSB2bWQuZ2V0RGVjbGFyZWRUeXBlTWV0YURhdGEoKTsKICAgICAg\nICBlbHNlIGlmICgodm1kID0gZm1kLmdldFZhbHVlKCkpICE9IG51bGwpCiAg\nICAgICAgICAgIGNtZCA9IHZtZC5nZXREZWNsYXJlZFR5cGVNZXRhRGF0YSgp\nOwoKICAgICAgICBpZiAoY21kID09IG51bGwgfHwgY21kLmdldERlc2NyaWJl\nZFR5cGUoKSA9PSBPYmplY3QuY2xhc3MpCiAgICAgICAgICAgIGNtZCA9IGZt\nZC5nZXREZWNsYXJlZFR5cGVNZXRhRGF0YSgpOwogICAgICAgIGlmIChjbWQg\nPT0gbnVsbCAmJiBmbWQuaXNFbGVtZW50Q29sbGVjdGlvbigpKQogICAgICAg\nICAgICBjbWQgPSBmbWQuZ2V0RGVmaW5pbmdNZXRhRGF0YSgpOwoKICAgICAg\nICByZXR1cm4gY21kOwogICAgfQoKICAgIAogICAgcHVibGljIENsYXNzPFQ+\nIGdldFJlc3VsdFR5cGUoKSB7CiAgICAgICAgcmV0dXJuIGdldEphdmFUeXBl\nKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBTdHJpbmdCdWlsZGVyIGFzVmFs\ndWUoQWxpYXNDb250ZXh0IHEpIHsKICAgICAgICBTdHJpbmdCdWlsZGVyIGJ1\nZmZlciA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgX2RlbGVnYXRl\nLnJlbmRlcihidWZmZXIsIF9kZWxlZ2F0ZS5nZXRSb290cygpLCBfY29yckpv\naW5zKTsKICAgICAgICByZXR1cm4gYnVmZmVyOwogICAgfQogICAgCiAgICBw\ndWJsaWMgU3RyaW5nQnVpbGRlciBhc1ZhcmlhYmxlKEFsaWFzQ29udGV4dCBx\nKSB7CiAgICAgICAgcmV0dXJuIGFzVmFsdWUocSk7CiAgICB9Cn0K\n","encoding":"base64"}

