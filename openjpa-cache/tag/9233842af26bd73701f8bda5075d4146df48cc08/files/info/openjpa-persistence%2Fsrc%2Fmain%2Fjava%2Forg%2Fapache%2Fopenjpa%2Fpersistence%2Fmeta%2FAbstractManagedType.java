{"sha":"8411174f43506e9bcb0a20e4d6ef68063dcbf1e5","node_id":"MDQ6QmxvYjIwNjM2NDo4NDExMTc0ZjQzNTA2ZTliY2IwYTIwZTRkNmVmNjgwNjNkY2JmMWU1","size":38982,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8411174f43506e9bcb0a20e4d6ef68063dcbf1e5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YTsK\nCmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0\naC5CaWdJbnRlZ2VyOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKaW1wb3J0\nIGphdmEudXRpbC5DYWxlbmRhcjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0\naW9uOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2\nYS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0\nIGphdmEudXRpbC5Mb2NhbGU7CmltcG9ydCBqYXZhLnV0aWwuVHJlZVNldDsK\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuQXR0cmlidXRl\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLkNvbGxlY3Rp\nb25BdHRyaWJ1dGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9k\nZWwuTGlzdEF0dHJpYnV0ZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLm1l\ndGFtb2RlbC5NYW5hZ2VkVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLm1ldGFtb2RlbC5NYXBBdHRyaWJ1dGU7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5tZXRhbW9kZWwuUGx1cmFsQXR0cmlidXRlOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UubWV0YW1vZGVsLlNldEF0dHJpYnV0ZTsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5TaW5ndWxhckF0dHJpYnV0ZTsK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5QbHVyYWxBdHRy\naWJ1dGUuQ29sbGVjdGlvblR5cGU7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5GaWx0ZXJzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5GaWVsZE1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuSmF2YVR5cGVzOwoKLyoqCiAqIEltcGxlbWVudHMgdGhlIG1h\nbmFnZWQgcGVyc2lzdGVudCB0eXBlIGFuZCBpdHMgYXR0cmlidXRlcy4KICog\nCiAqIFByb3ZpZGVzIGlkZW50aXR5IGFuZCB2ZXJzaW9uIGF0dHJpYnV0ZSBm\nYWNpbGl0aWVzIGZvciBJZGVudGlmaWFibGUgdHlwZSBidXQgZG9lcyBub3QK\nICogaW1wbGVtZW50IGl0LgogKiAKICogQGF1dGhvciBQaW5ha2kgUG9kZGFy\nCiAqCiAqIEBwYXJhbSA8WD4gdGhlIAogKi8KcHVibGljIGFic3RyYWN0IGNs\nYXNzIEFic3RyYWN0TWFuYWdlZFR5cGU8WD4gZXh0ZW5kcyBUeXBlcy5CYXNl\nVHlwZTxYPiAKICAgIGltcGxlbWVudHMgTWFuYWdlZFR5cGU8WD4gewogICAg\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExv\nY2FsaXplci5mb3JQYWNrYWdlKFR5cGVzLmNsYXNzKTsKICAgIHB1YmxpYyBm\naW5hbCBNZXRhbW9kZWxJbXBsIG1vZGVsOwogICAgcHVibGljIGZpbmFsIENs\nYXNzTWV0YURhdGEgbWV0YTsKCiAgICBwcml2YXRlIGphdmEudXRpbC5TZXQ8\nQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4+IGF0dHJzID0gbmV3IEhhc2hTZXQ8\nQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4+KCk7CgogICAgcHJpdmF0ZSBmaW5h\nbCBEZWNsYXJlZEF0dHJpYnV0ZUZpbHRlcjxYPiBkZWNsYXJlZEF0dHJpYnV0\nZUZpbHRlcjsKICAgIHByaXZhdGUgZmluYWwgU2luZ3VsYXJBdHRyaWJ1dGVG\naWx0ZXI8WD4gc2luZ3VsYXJBdHRyaWJ1dGVGaWx0ZXI7CiAgICBwcml2YXRl\nIGZpbmFsIFNpbmd1bGFyQXR0cmlidXRlRmlsdGVyPFg+IHBsdXJhbEF0dHJp\nYnV0ZUZpbHRlcjsKICAgIAogICAgLyoqCiAgICAgKiBBIHByb3RlY3RlZCBj\nb25zdHJ1Y3RvciBmb3IgY3JlYXRpbmcgcHN1ZG8tbWFuYWdlZCB0eXBlcy4K\nICAgICAqLwogICAgcHJvdGVjdGVkIEFic3RyYWN0TWFuYWdlZFR5cGUoQ2xh\nc3M8WD4gY2xzLCBNZXRhbW9kZWxJbXBsIG1vZGVsKSB7CiAgICAgICAgc3Vw\nZXIoY2xzKTsKICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7CiAgICAgICAg\ndGhpcy5tZXRhID0gbnVsbDsKICAgICAgICBkZWNsYXJlZEF0dHJpYnV0ZUZp\nbHRlciA9IG51bGw7CiAgICAgICAgc2luZ3VsYXJBdHRyaWJ1dGVGaWx0ZXIg\nPSBudWxsOwogICAgICAgIHBsdXJhbEF0dHJpYnV0ZUZpbHRlciAgID0gbnVs\nbDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYSBtYW5h\nZ2VkIHR5cGUuIFRoZSBzdXBwbGllZCBtZXRhZGF0YSBtdXN0IGJlIHJlc29s\ndmVkIGkuZS4gYWxsCiAgICAgKiBpdHMgZmllbGRzIHBvcHVsYXRlZC4gQmVj\nYXVzZSB0aGlzIHJlY2VpdmVyIHdpbGwgcG9wdWxhdGUgaXRzIGF0dHJpYnV0\nZXMKICAgICAqIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGF2YWlsYWJsZSBmaWVs\nZHMgb2YgdGhlIG1ldGFkYXRhLgogICAgICogCiAgICAgKi8KICAgIHB1Ymxp\nYyBBYnN0cmFjdE1hbmFnZWRUeXBlKENsYXNzTWV0YURhdGEgbWV0YSwgTWV0\nYW1vZGVsSW1wbCBtb2RlbCkgewogICAgICAgIHN1cGVyKChDbGFzczxYPikg\nbWV0YS5nZXREZXNjcmliZWRUeXBlKCkpOwoKICAgICAgICB0aGlzLm1vZGVs\nID0gbW9kZWw7CiAgICAgICAgdGhpcy5tZXRhID0gbWV0YTsKICAgICAgICBG\naWVsZE1ldGFEYXRhW10gZm1kcyA9IG1ldGEuZ2V0RmllbGRzKCk7CiAgICAg\nICAgZm9yIChGaWVsZE1ldGFEYXRhIGYgOiBmbWRzKSB7CiAgICAgICAgICAg\nIGludCBkZWNDb2RlID0gZi5nZXREZWNsYXJlZFR5cGVDb2RlKCk7CiAgICAg\nICAgICAgIHN3aXRjaCAoZGVjQ29kZSkgewogICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5CT09MRUFOOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5C\nT09MRUFOX09CSjoKICAgICAgICAgICAgICAgIGF0dHJzLmFkZChuZXcgTWVt\nYmVycy5TaW5ndWxhckF0dHJpYnV0ZUltcGw8WCwgQm9vbGVhbj4odGhpcywg\nZikpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2Ug\nSmF2YVR5cGVzLkJZVEU6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJZ\nVEVfT0JKOgogICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBNZW1iZXJz\nLlNpbmd1bGFyQXR0cmlidXRlSW1wbDxYLCBCeXRlPih0aGlzLCBmKSk7CiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuQ0hBUjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ0hBUl9PQko6\nCiAgICAgICAgICAgICAgICBhdHRycy5hZGQobmV3IE1lbWJlcnMuU2luZ3Vs\nYXJBdHRyaWJ1dGVJbXBsPFgsIENoYXJhY3Rlcj4odGhpcywgZikpOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLkRPVUJMRToKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRE9VQkxFX09C\nSjoKICAgICAgICAgICAgICAgIGF0dHJzLmFkZChuZXcgTWVtYmVycy5TaW5n\ndWxhckF0dHJpYnV0ZUltcGw8WCwgRG91YmxlPih0aGlzLCBmKSk7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nRkxPQVQ6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkZMT0FUX09CSjoK\nICAgICAgICAgICAgICAgIGF0dHJzLmFkZChuZXcgTWVtYmVycy5TaW5ndWxh\nckF0dHJpYnV0ZUltcGw8WCwgRmxvYXQ+KHRoaXMsIGYpKTsKICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5JTlQ6\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVF9PQko6CiAgICAgICAg\nICAgICAgICBhdHRycy5hZGQobmV3IE1lbWJlcnMuU2luZ3VsYXJBdHRyaWJ1\ndGVJbXBsPFgsIEludGVnZXI+KHRoaXMsIGYpKTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5MT05HOgogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5MT05HX09CSjoKICAgICAgICAgICAg\nICAgIGF0dHJzLmFkZChuZXcgTWVtYmVycy5TaW5ndWxhckF0dHJpYnV0ZUlt\ncGw8WCwgTG9uZz4odGhpcywgZikpOwogICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNIT1JUOgogICAgICAgICAg\nICBjYXNlIEphdmFUeXBlcy5TSE9SVF9PQko6CiAgICAgICAgICAgICAgICBh\ndHRycy5hZGQobmV3IE1lbWJlcnMuU2luZ3VsYXJBdHRyaWJ1dGVJbXBsPFgs\nIFNob3J0Pih0aGlzLCBmKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU1RSSU5HOgogICAgICAgICAgICAg\nICAgYXR0cnMuYWRkKG5ldyBNZW1iZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1w\nbDxYLCBTdHJpbmc+KHRoaXMsIGYpKTsKICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5OVU1CRVI6CiAgICAgICAg\nICAgICAgICBhdHRycy5hZGQobmV3IE1lbWJlcnMuU2luZ3VsYXJBdHRyaWJ1\ndGVJbXBsPFgsIE51bWJlcj4odGhpcywgZikpOwogICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkRBVEU6CiAgICAg\nICAgICAgICAgICBhdHRycy5hZGQobmV3IE1lbWJlcnMuU2luZ3VsYXJBdHRy\naWJ1dGVJbXBsPFgsIERhdGU+KHRoaXMsIGYpKTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DQUxFTkRBUjoK\nICAgICAgICAgICAgICAgIGF0dHJzLmFkZChuZXcgTWVtYmVycy5TaW5ndWxh\nckF0dHJpYnV0ZUltcGw8WCwgQ2FsZW5kYXI+KHRoaXMsIGYpKTsKICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5C\nSUdERUNJTUFMOgogICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBNZW1i\nZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1wbDxYLCBCaWdEZWNpbWFsPih0aGlz\nLCBmKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuQklHSU5URUdFUjoKICAgICAgICAgICAgICAgIGF0dHJz\nLmFkZChuZXcgTWVtYmVycy5TaW5ndWxhckF0dHJpYnV0ZUltcGw8WCwgQmln\nSW50ZWdlcj4odGhpcywgZikpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxPQ0FMRToKICAgICAgICAgICAg\nICAgIGF0dHJzLmFkZChuZXcgTWVtYmVycy5TaW5ndWxhckF0dHJpYnV0ZUlt\ncGw8WCwgTG9jYWxlPih0aGlzLCBmKSk7CiAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuT0JKRUNUOgogICAgICAg\nICAgICBjYXNlIEphdmFUeXBlcy5PSUQ6CiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLlBDOgogICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBNZW1i\nZXJzLlNpbmd1bGFyQXR0cmlidXRlSW1wbCh0aGlzLCBmKSk7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQVJS\nQVk6CiAgICAgICAgICAgICAgICBhdHRycy5hZGQobmV3IE1lbWJlcnMuTGlz\ndEF0dHJpYnV0ZUltcGwodGhpcywgZikpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkNPTExFQ1RJT046CiAg\nICAgICAgICAgICAgICBzd2l0Y2ggKE1ldGFtb2RlbEltcGwuY2F0ZWdvcml6\nZUNvbGxlY3Rpb24oZi5nZXREZWNsYXJlZFR5cGUoKSkpIHsKICAgICAgICAg\nICAgICAgIGNhc2UgQ09MTEVDVElPTjoKICAgICAgICAgICAgICAgICAgICBh\ndHRycy5hZGQobmV3IE1lbWJlcnMuQ29sbGVjdGlvbkF0dHJpYnV0ZUltcGwo\ndGhpcywgZikpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICAgICAgY2FzZSBMSVNUOgogICAgICAgICAgICAgICAgICAgIGF0dHJz\nLmFkZChuZXcgTWVtYmVycy5MaXN0QXR0cmlidXRlSW1wbCh0aGlzLCBmKSk7\nCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBj\nYXNlIFNFVDoKICAgICAgICAgICAgICAgICAgICBhdHRycy5hZGQobmV3IE1l\nbWJlcnMuU2V0QXR0cmlidXRlSW1wbCh0aGlzLCBmKSk7CiAgICAgICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTUFQOgog\nICAgICAgICAgICAgICAgYXR0cnMuYWRkKG5ldyBNZW1iZXJzLk1hcEF0dHJp\nYnV0ZUltcGwodGhpcywgZikpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcg\nSWxsZWdhbFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJmaWVsZC11bnJlY29n\nbml6ZWQiLAogICAgICAgICAgICAgICAgICAgICAgICBmLmdldEZ1bGxOYW1l\nKGZhbHNlKSwgZGVjQ29kZSkuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICAvLyBUT0RPOiBBY2NvdW50IGZvciB0aGUgZm9sbG93\naW5nIGNvZGVzCiAgICAgICAgICAgIC8vIGNhc2UgUENfVU5UWVBFRCA9IDI3\nOwogICAgICAgICAgICAvLyBjYXNlIElOUFVUX1NUUkVBTSA9IDMwOwogICAg\nICAgICAgICAvLyBjYXNlIElOUFVUX1JFQURFUiA9IDMxOwogICAgICAgIH0K\nICAgICAgICBkZWNsYXJlZEF0dHJpYnV0ZUZpbHRlciA9IG5ldyBEZWNsYXJl\nZEF0dHJpYnV0ZUZpbHRlcjxYPih0aGlzKTsKICAgICAgICBzaW5ndWxhckF0\ndHJpYnV0ZUZpbHRlciA9IG5ldyBTaW5ndWxhckF0dHJpYnV0ZUZpbHRlcjxY\nPigpOwogICAgICAgIHBsdXJhbEF0dHJpYnV0ZUZpbHRlciA9IG5ldyBTaW5n\ndWxhckF0dHJpYnV0ZUZpbHRlcjxYPigpLmludmVyc2UoKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBhdHRyaWJ1dGVzIG9mIHRo\nZSBtYW5hZ2VkIHR5cGUgaW5jbHVkaW5nIGF0dHJpYnV0ZXMgb2YgdGhlIHN1\ncGVyIHR5cGUuCiAgICAgKiAKICAgICAqLwogICAgcHVibGljIGphdmEudXRp\nbC5TZXQ8QXR0cmlidXRlPD8gc3VwZXIgWCwgPz4+IGdldEF0dHJpYnV0ZXMo\nKSB7CiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLnVubW9kaWZpYWJsZVNl\ndChhdHRycyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0\naGUgYXR0cmlidXRlcyBkZWNsYXJlZCBieSB0aGlzIG1hbmFnZWQgdHlwZSBv\nbmx5LgogICAgICogCiAgICAgKi8KICAgIHB1YmxpYyBqYXZhLnV0aWwuU2V0\nPEF0dHJpYnV0ZTxYLCA/Pj4gZ2V0RGVjbGFyZWRBdHRyaWJ1dGVzKCkgewog\nICAgICAgIHJldHVybiBmaWx0ZXIoYXR0cnMsIG5ldyBUcmVlU2V0PEF0dHJp\nYnV0ZTxYLCA/Pj4oKSwKICAgICAgICAgICAgICAgIGRlY2xhcmVkQXR0cmli\ndXRlRmlsdGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhl\nIHNpbmdsZS12YWx1ZWQgYXR0cmlidXRlcyBvZiB0aGUgbWFuYWdlZCB0eXBl\nLgogICAgICogCiAgICAgKi8KICAgIHB1YmxpYyBqYXZhLnV0aWwuU2V0PFNp\nbmd1bGFyQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4+IGdldFNpbmd1bGFyQXR0\ncmlidXRlcygpIHsKICAgICAgICByZXR1cm4gZmlsdGVyKGF0dHJzLCBuZXcg\nVHJlZVNldDxTaW5ndWxhckF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+PigpLAog\nICAgICAgICAgICAgICAgc2luZ3VsYXJBdHRyaWJ1dGVGaWx0ZXIpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgc2luZ2xlLXZhbHVlZCBh\ndHRyaWJ1dGVzIGRlY2xhcmVkIGJ5IHRoZSBtYW5hZ2VkIHR5cGUuCiAgICAg\nKiAKICAgICAqLwogICAgcHVibGljIGphdmEudXRpbC5TZXQ8U2luZ3VsYXJB\ndHRyaWJ1dGU8WCwgPz4+IGdldERlY2xhcmVkU2luZ3VsYXJBdHRyaWJ1dGVz\nKCkgewogICAgICAgIHJldHVybiBmaWx0ZXIoYXR0cnMsIG5ldyBUcmVlU2V0\nPFNpbmd1bGFyQXR0cmlidXRlPFgsID8+PigpLAogICAgICAgICAgICAgICAg\nZGVjbGFyZWRBdHRyaWJ1dGVGaWx0ZXIsIAogICAgICAgICAgICAgICAgc2lu\nZ3VsYXJBdHRyaWJ1dGVGaWx0ZXIpOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJucyB0aGUgYXR0cmlidXRlIG9mIHRoZSBnaXZlbiBuYW1lIGFuZCBK\nYXZhIHR5cGUuCiAgICAgKiAKICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uICBpZiBubyBzdWNoIGF0dHJpYnV0ZSBleGlzdHMKICAg\nICAqLwogICAgcHVibGljIDxZPiBBdHRyaWJ1dGU8PyBzdXBlciBYLCBZPiBn\nZXRBdHRyaWJ1dGUoU3RyaW5nIG5hbWUsIENsYXNzPFk+IHR5cGUpIHsKICAg\nICAgICBBdHRyaWJ1dGU8PyBzdXBlciBYLCA/PiByZXN1bHQgPSBwaWNrKGF0\ndHJzLAogICAgICAgICAgICAgICAgbmV3IEF0dHJpYnV0ZU5hbWVGaWx0ZXI8\nWD4obmFtZSksCiAgICAgICAgICAgICAgICBuZXcgQXR0cmlidXRlVHlwZUZp\nbHRlcjxYLCBZPih0eXBlKSk7CiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxs\nKQogICAgICAgICAgICBub3RGb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91\nbmQiLCBuYW1lLCB0eXBlKTsKICAgICAgICAKICAgICAgICByZXR1cm4gKEF0\ndHJpYnV0ZTw/IHN1cGVyIFgsIFk+KXJlc3VsdDsKICAgIH0KICAgIAogICAg\nLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBzaW5nbGUtdmFsdWVkIGF0dHJpYnV0\nZSBvZiB0aGUgZ2l2ZW4gbmFtZSBhbmQgSmF2YSB0eXBlLgogICAgICogCiAg\nICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8g\nc3VjaCBhdHRyaWJ1dGUgZXhpc3RzCiAgICAgKi8KICAgIHB1YmxpYyA8WT4g\nU2luZ3VsYXJBdHRyaWJ1dGU8PyBzdXBlciBYLCBZPiBnZXRTaW5ndWxhckF0\ndHJpYnV0ZShTdHJpbmcgbmFtZSwgQ2xhc3M8WT4gdHlwZSkgewogICAgICAg\nIEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IHJlc3VsdCA9IHBpY2soYXR0cnMs\nCiAgICAgICAgICAgICAgICBuZXcgQXR0cmlidXRlTmFtZUZpbHRlcjxYPihu\nYW1lKSwKICAgICAgICAgICAgICAgIG5ldyBBdHRyaWJ1dGVUeXBlRmlsdGVy\nPFgsIFk+KHR5cGUpLCAKICAgICAgICAgICAgICAgIHNpbmd1bGFyQXR0cmli\ndXRlRmlsdGVyKTsKICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpCiAgICAg\nICAgICAgIG5vdEZvdW5kRXhjZXB0aW9uKCJhdHRyLW5vdC1mb3VuZC1zaW5n\nbGUiLG5hbWUsIHR5cGUpOwogICAgICAgICAKICAgICAgICByZXR1cm4gKFNp\nbmd1bGFyQXR0cmlidXRlPD8gc3VwZXIgWCwgWT4pIHJlc3VsdDsKICAgIH0K\nICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBkZWNsYXJlZCBhdHRy\naWJ1dGUgb2YgdGhlIGdpdmVuIG5hbWUgYW5kIEphdmEgdHlwZS4KICAgICAq\nIAogICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlm\nIG5vIHN1Y2ggYXR0cmlidXRlIGV4aXN0cwogICAgICovCiAgICBwdWJsaWMg\nPFk+IEF0dHJpYnV0ZTxYLCBZPiBnZXREZWNsYXJlZEF0dHJpYnV0ZShTdHJp\nbmcgbmFtZSwgQ2xhc3M8WT4gdHlwZSkgewogICAgICAgIEF0dHJpYnV0ZTw/\nIHN1cGVyIFgsID8+IHJlc3VsdCA9IHBpY2soYXR0cnMsCiAgICAgICAgICAg\nICAgICBuZXcgQXR0cmlidXRlTmFtZUZpbHRlcjxYPihuYW1lKSwKICAgICAg\nICAgICAgICAgIG5ldyBBdHRyaWJ1dGVUeXBlRmlsdGVyPFgsIFk+KHR5cGUp\nLCAKICAgICAgICAgICAgICAgIGRlY2xhcmVkQXR0cmlidXRlRmlsdGVyKTsK\nICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpCiAgICAgICAgICAgIG5vdEZv\ndW5kRXhjZXB0aW9uKCJhdHRyLW5vdC1mb3VuZC1kZWNsLXNpbmdsZSIsbmFt\nZSwgdHlwZSk7CiAgICAgICAgICAgIAogICAgICAgIHJldHVybiAoQXR0cmli\ndXRlPFgsIFk+KSByZXN1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm5zIHRoZSBkZWNsYXJlZCBzaW5nbGUtdmFsdWVkIGF0dHJpYnV0ZSBvZiB0\naGUgZ2l2ZW4gbmFtZSBhbmQgSmF2YSB0eXBlLgogICAgICogCiAgICAgKiBA\ndGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBh\ndHRyaWJ1dGUgZXhpc3RzCiAgICAgKi8KICAgIHB1YmxpYyA8WT4gU2luZ3Vs\nYXJBdHRyaWJ1dGU8WCwgWT4gZ2V0RGVjbGFyZWRTaW5ndWxhckF0dHJpYnV0\nZShTdHJpbmcgbmFtZSwgQ2xhc3M8WT4gdHlwZSkgewogICAgICAgIEF0dHJp\nYnV0ZTw/IHN1cGVyIFgsID8+IHJlc3VsdCA9IHBpY2soYXR0cnMsCiAgICAg\nICAgICAgICAgICBuZXcgQXR0cmlidXRlTmFtZUZpbHRlcjxYPihuYW1lKSwK\nICAgICAgICAgICAgICAgIG5ldyBBdHRyaWJ1dGVUeXBlRmlsdGVyPFgsIFk+\nKHR5cGUpLCAKICAgICAgICAgICAgICAgIGRlY2xhcmVkQXR0cmlidXRlRmls\ndGVyLAogICAgICAgICAgICAgICAgc2luZ3VsYXJBdHRyaWJ1dGVGaWx0ZXIp\nOwogICAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCkKICAgICAgICAgICAgbm90\nRm91bmRFeGNlcHRpb24oImF0dHItbm90LWZvdW5kLWRlY2wtc2luZ2xlIixu\nYW1lLCB0eXBlKTsKCiAgICAgICAgcmV0dXJuIChTaW5ndWxhckF0dHJpYnV0\nZTxYLCBZPikgcmVzdWx0OwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\ncyBhbGwgY29sbGVjdGlvbi12YWx1ZWQgYXR0cmlidXRlcyBvZiB0aGUgbWFu\nYWdlZCB0eXBlLgogICAgICogCiAgICAgKi8KICAgIHB1YmxpYyBqYXZhLnV0\naWwuU2V0PFBsdXJhbEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8sID8+PiBnZXRQ\nbHVyYWxBdHRyaWJ1dGVzKCkgewogICAgICAgIHJldHVybiBmaWx0ZXIoYXR0\ncnMsIG5ldyBIYXNoU2V0PFBsdXJhbEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8s\nID8+PigpLAogICAgICAgICAgICAgICAgcGx1cmFsQXR0cmlidXRlRmlsdGVy\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbGwgY29sbGVjdGlv\nbi12YWx1ZWQgYXR0cmlidXRlcyBkZWNsYXJlZCBieSB0aGUgbWFuYWdlZCB0\neXBlLgogICAgICogCiAgICAgKi8KICAgIHB1YmxpYyBqYXZhLnV0aWwuU2V0\nPFBsdXJhbEF0dHJpYnV0ZTxYLCA/LCA/Pj4gZ2V0RGVjbGFyZWRQbHVyYWxB\ndHRyaWJ1dGVzKCkgewogICAgICAgIHJldHVybiBmaWx0ZXIoYXR0cnMsIG5l\ndyBIYXNoU2V0PFBsdXJhbEF0dHJpYnV0ZTxYLCA/LCA/Pj4oKSwKICAgICAg\nICAgICAgICAgIGRlY2xhcmVkQXR0cmlidXRlRmlsdGVyLCAKICAgICAgICAg\nICAgICAgIHBsdXJhbEF0dHJpYnV0ZUZpbHRlcik7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgb2YgdGhlIGdpdmVuIG5h\nbWUsIG9mIHR5cGUgamF2YS51dGlsLkNvbGxlY3Rpb24gYW5kIGNvbnRhaW5z\nIHRoZQogICAgICogZ2l2ZW4gZWxlbWVudCB0eXBlLgogICAgICogCiAgICAg\nKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3Vj\naCBhdHRyaWJ1dGUgZXhpc3RzCiAgICAgKi8KICAgIHB1YmxpYyA8RT4gQ29s\nbGVjdGlvbkF0dHJpYnV0ZTw/IHN1cGVyIFgsIEU+IGdldENvbGxlY3Rpb24o\nU3RyaW5nIG5hbWUsIENsYXNzPEU+IGVsZW1lbnRUeXBlKSB7CiAgICAgICAg\nQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gcmVzdWx0ID0gcGljayhhdHRycywK\nICAgICAgICAgICAgICAgIG5ldyBQbHVyYWxDYXRlZ29yeUZpbHRlcjxYPihD\nb2xsZWN0aW9uVHlwZS5DT0xMRUNUSU9OKSwKICAgICAgICAgICAgICAgIG5l\ndyBFbGVtZW50VHlwZUZpbHRlcjxYLCBFPihlbGVtZW50VHlwZSksCiAgICAg\nICAgICAgICAgICBuZXcgQXR0cmlidXRlTmFtZUZpbHRlcjxYPihuYW1lKSk7\nCiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKQogICAgICAgICAgICBub3RG\nb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91bmQtY29sbCIsbmFtZSwgZWxl\nbWVudFR5cGUpOwoKICAgICAgICByZXR1cm4gKENvbGxlY3Rpb25BdHRyaWJ1\ndGU8PyBzdXBlciBYLCBFPikgcmVzdWx0OwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJucyB0aGUgYXR0cmlidXRlIG9mIHRoZSBnaXZlbiBuYW1lLCBv\nZiB0eXBlIGphdmEudXRpbC5TZXQgYW5kIGNvbnRhaW5zIHRoZQogICAgICog\nZ2l2ZW4gZWxlbWVudCB0eXBlLgogICAgICogCiAgICAgKiBAdGhyb3dzIEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUg\nZXhpc3RzCiAgICAgKi8KICAgIHB1YmxpYyA8RT4gU2V0QXR0cmlidXRlPD8g\nc3VwZXIgWCwgRT4gZ2V0U2V0KFN0cmluZyBuYW1lLCBDbGFzczxFPiBlbGVt\nZW50VHlwZSkgewogICAgICAgIEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IHJl\nc3VsdCA9IHBpY2soYXR0cnMsCiAgICAgICAgICAgICAgICBuZXcgUGx1cmFs\nQ2F0ZWdvcnlGaWx0ZXI8WD4oQ29sbGVjdGlvblR5cGUuU0VUKSwKICAgICAg\nICAgICAgICAgIG5ldyBFbGVtZW50VHlwZUZpbHRlcjxYLCBFPihlbGVtZW50\nVHlwZSksCiAgICAgICAgICAgICAgICBuZXcgQXR0cmlidXRlTmFtZUZpbHRl\ncjxYPihuYW1lKSk7CiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKQogICAg\nICAgICAgICBub3RGb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91bmQtc2V0\nIixuYW1lLCBlbGVtZW50VHlwZSk7CgogICAgICAgIHJldHVybiAoU2V0QXR0\ncmlidXRlPD8gc3VwZXIgWCwgRT4pIHJlc3VsdDsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybnMgdGhlIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFt\nZSwgb2YgdHlwZSBqYXZhLnV0aWwuTGlzdCBhbmQgY29udGFpbnMgdGhlCiAg\nICAgKiBnaXZlbiBlbGVtZW50IHR5cGUuCiAgICAgKiAKICAgICAqIEB0aHJv\nd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uICBpZiBubyBzdWNoIGF0dHJp\nYnV0ZSBleGlzdHMKICAgICAqLwogICAgcHVibGljIDxFPiBMaXN0QXR0cmli\ndXRlPD8gc3VwZXIgWCwgRT4gZ2V0TGlzdChTdHJpbmcgbmFtZSwgQ2xhc3M8\nRT4gZWxlbWVudFR5cGUpIHsKICAgICAgICBBdHRyaWJ1dGU8PyBzdXBlciBY\nLCA/PiByZXN1bHQgPSBwaWNrKGF0dHJzLAogICAgICAgICAgICAgICAgbmV3\nIFBsdXJhbENhdGVnb3J5RmlsdGVyPFg+KENvbGxlY3Rpb25UeXBlLkxJU1Qp\nLAogICAgICAgICAgICAgICAgbmV3IEVsZW1lbnRUeXBlRmlsdGVyPFgsIEU+\nKGVsZW1lbnRUeXBlKSwKICAgICAgICAgICAgICAgIG5ldyBBdHRyaWJ1dGVO\nYW1lRmlsdGVyPFg+KG5hbWUpKTsKICAgICAgICBpZiAocmVzdWx0ID09IG51\nbGwpCiAgICAgICAgICAgIG5vdEZvdW5kRXhjZXB0aW9uKCJhdHRyLW5vdC1m\nb3VuZC1saXN0IixuYW1lLCBlbGVtZW50VHlwZSk7CgogICAgICAgIHJldHVy\nbiAoTGlzdEF0dHJpYnV0ZTw/IHN1cGVyIFgsIEU+KSByZXN1bHQ7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgb2YgdGhl\nIGdpdmVuIG5hbWUsIG9mIHR5cGUgamF2YS51dGlsLk1hcCBhbmQgY29udGFp\nbnMgdGhlCiAgICAgKiBnaXZlbiBrZXkvdmFsdWUgdHlwZS4KICAgICAqIAog\nICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlmIG5v\nIHN1Y2ggYXR0cmlidXRlIGV4aXN0cwogICAgICovCiAgICBwdWJsaWMgPEss\nIFY+IE1hcEF0dHJpYnV0ZTw/IHN1cGVyIFgsIEssIFY+IGdldE1hcChTdHJp\nbmcgbmFtZSwgQ2xhc3M8Sz4ga2V5VHlwZSwgCiAgICAgICAgQ2xhc3M8Vj4g\ndmFsdWVUeXBlKSB7CiAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4g\ncmVzdWx0ID0gcGljayhhdHRycywKICAgICAgICAgICAgICAgIG5ldyBBdHRy\naWJ1dGVOYW1lRmlsdGVyPFg+KG5hbWUpLAogICAgICAgICAgICAgICAgbmV3\nIFBsdXJhbENhdGVnb3J5RmlsdGVyPFg+KENvbGxlY3Rpb25UeXBlLk1BUCks\nCiAgICAgICAgICAgICAgICBuZXcgRW50cnlUeXBlRmlsdGVyPFgsIEssIFY+\nKGtleVR5cGUsIHZhbHVlVHlwZSkpOwogICAgICAgIGlmIChyZXN1bHQgPT0g\nbnVsbCkKICAgICAgICAgICAgbm90Rm91bmRFeGNlcHRpb24oImF0dHItbm90\nLWZvdW5kLW1hcCIsIG5hbWUsIGtleVR5cGUsIHZhbHVlVHlwZSk7CgogICAg\nICAgIHJldHVybiAoTWFwQXR0cmlidXRlPD8gc3VwZXIgWCwgSywgVj4pIHJl\nc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGRlY2xh\ncmVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSwgb2YgdHlwZSBqYXZh\nLnV0aWwuQ29sbGVjdGlvbiBhbmQgY29udGFpbnMgCiAgICAgKiB0aGUgZ2l2\nZW4gZWxlbWVudCB0eXBlLgogICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhp\nc3RzCiAgICAgKi8KICAgIHB1YmxpYyA8RT4gQ29sbGVjdGlvbkF0dHJpYnV0\nZTxYLCBFPiBnZXREZWNsYXJlZENvbGxlY3Rpb24oU3RyaW5nIG5hbWUsICBD\nbGFzczxFPiBlbGVtZW50VHlwZSkgewogICAgICAgIEF0dHJpYnV0ZTw/IHN1\ncGVyIFgsID8+IHJlc3VsdCA9IHBpY2soYXR0cnMsIAogICAgICAgICAgICAg\nICAgZGVjbGFyZWRBdHRyaWJ1dGVGaWx0ZXIsCiAgICAgICAgICAgICAgICBu\nZXcgUGx1cmFsQ2F0ZWdvcnlGaWx0ZXI8WD4oQ29sbGVjdGlvblR5cGUuQ09M\nTEVDVElPTiksCiAgICAgICAgICAgICAgICBuZXcgRWxlbWVudFR5cGVGaWx0\nZXI8WCwgRT4oZWxlbWVudFR5cGUpLAogICAgICAgICAgICAgICAgbmV3IEF0\ndHJpYnV0ZU5hbWVGaWx0ZXI8WD4obmFtZSkpOwogICAgICAgIGlmIChyZXN1\nbHQgPT0gbnVsbCkKICAgICAgICAgICAgbm90Rm91bmRFeGNlcHRpb24oImF0\ndHItbm90LWZvdW5kLWRlY2wtY29sbCIsIG5hbWUsIGVsZW1lbnRUeXBlKTsK\nCiAgICAgICAgcmV0dXJuIChDb2xsZWN0aW9uQXR0cmlidXRlPFgsIEU+KSBy\nZXN1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBkZWNs\nYXJlZCBhdHRyaWJ1dGUgb2YgdGhlIGdpdmVuIG5hbWUsIG9mIHR5cGUgamF2\nYS51dGlsLlNldCBhbmQgY29udGFpbnMgCiAgICAgKiB0aGUgZ2l2ZW4gZWxl\nbWVudCB0eXBlLgogICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3RzCiAg\nICAgKi8KICAgIHB1YmxpYyA8RT4gU2V0QXR0cmlidXRlPFgsIEU+IGdldERl\nY2xhcmVkU2V0KFN0cmluZyBuYW1lLCBDbGFzczxFPiBlbGVtZW50VHlwZSkg\newogICAgICAgIEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IHJlc3VsdCA9IHBp\nY2soYXR0cnMsIAogICAgICAgICAgICAgICAgZGVjbGFyZWRBdHRyaWJ1dGVG\naWx0ZXIsCiAgICAgICAgICAgICAgICBuZXcgUGx1cmFsQ2F0ZWdvcnlGaWx0\nZXI8WD4oQ29sbGVjdGlvblR5cGUuU0VUKSwKICAgICAgICAgICAgICAgIG5l\ndyBBdHRyaWJ1dGVOYW1lRmlsdGVyPFg+KG5hbWUpKTsKICAgICAgICBpZiAo\ncmVzdWx0ID09IG51bGwpCiAgICAgICAgICAgIG5vdEZvdW5kRXhjZXB0aW9u\nKCJhdHRyLW5vdC1mb3VuZC1kZWNsLXNldCIsIG5hbWUsIGVsZW1lbnRUeXBl\nKTsKCiAgICAgICAgcmV0dXJuIChTZXRBdHRyaWJ1dGU8WCwgRT4pIHJlc3Vs\ndDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGRlY2xhcmVk\nIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSwgb2YgdHlwZSBqYXZhLnV0\naWwuTGlzdCBhbmQgY29udGFpbnMgCiAgICAgKiB0aGUgZ2l2ZW4gZWxlbWVu\ndCB0eXBlLgogICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3RzCiAgICAg\nKi8KICAgIHB1YmxpYyA8RT4gTGlzdEF0dHJpYnV0ZTxYLCBFPiBnZXREZWNs\nYXJlZExpc3QoU3RyaW5nIG5hbWUsIENsYXNzPEU+IGVsZW1lbnRUeXBlKSB7\nCiAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gcmVzdWx0ID0gcGlj\nayhhdHRycywgCiAgICAgICAgICAgICAgICBkZWNsYXJlZEF0dHJpYnV0ZUZp\nbHRlciwKICAgICAgICAgICAgICAgIG5ldyBQbHVyYWxDYXRlZ29yeUZpbHRl\ncjxYPihDb2xsZWN0aW9uVHlwZS5MSVNUKSwKICAgICAgICAgICAgICAgIG5l\ndyBFbGVtZW50VHlwZUZpbHRlcjxYLCBFPihlbGVtZW50VHlwZSksCiAgICAg\nICAgICAgICAgICBuZXcgQXR0cmlidXRlTmFtZUZpbHRlcjxYPihuYW1lKSk7\nCiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKQogICAgICAgICAgICBub3RG\nb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91bmQtZGVjbC1saXN0IiwgbmFt\nZSwgZWxlbWVudFR5cGUpOwoKICAgICAgICByZXR1cm4gKExpc3RBdHRyaWJ1\ndGU8WCwgRT4pIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgdGhlIGRlY2xhcmVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSwg\nb2YgdHlwZSBqYXZhLnV0aWwuTWFwIGFuZCBjb250YWlucyAKICAgICAqIHRo\nZSBnaXZlbiBrZXkvdmFsdWUgdHlwZS4KICAgICAqIAogICAgICogQHRocm93\ncyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2ggYXR0cmli\ndXRlIGV4aXN0cwogICAgICovCiAgICBwdWJsaWMgPEssIFY+IE1hcEF0dHJp\nYnV0ZTxYLCBLLCBWPiBnZXREZWNsYXJlZE1hcChTdHJpbmcgbmFtZSwgQ2xh\nc3M8Sz4ga2V5VHlwZSwgCiAgICAgICAgQ2xhc3M8Vj4gdmFsdWVUeXBlKSB7\nCiAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gcmVzdWx0ID0gcGlj\nayhhdHRycywKICAgICAgICAgICAgICAgIGRlY2xhcmVkQXR0cmlidXRlRmls\ndGVyLAogICAgICAgICAgICAgICAgbmV3IEF0dHJpYnV0ZU5hbWVGaWx0ZXI8\nWD4obmFtZSksCiAgICAgICAgICAgICAgICBuZXcgUGx1cmFsQ2F0ZWdvcnlG\naWx0ZXI8WD4oQ29sbGVjdGlvblR5cGUuTUFQKSwKICAgICAgICAgICAgICAg\nIG5ldyBFbnRyeVR5cGVGaWx0ZXI8WCwgSywgVj4oa2V5VHlwZSwgdmFsdWVU\neXBlKSk7CiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKQogICAgICAgICAg\nICBub3RGb3VuZEV4Y2VwdGlvbigiYXR0ci1ub3QtZm91bmQtZGVjbC1tYXAi\nLCBuYW1lLCBrZXlUeXBlLCB2YWx1ZVR5cGUpOwoKICAgICAgICByZXR1cm4g\nKE1hcEF0dHJpYnV0ZTxYLCBLLCBWPikgcmVzdWx0OwogICAgfQoKICAgIC8v\nID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gTm8g\ndHlwZSBjaGVja2luZwogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09CiAgICAKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYXR0\ncmlidXRlIG9mIHRoZSBnaXZlbiBuYW1lIG9mIGFueSB0eXBlLgogICAgICog\nCiAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiAgaWYg\nbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3RzCiAgICAgKi8KICAgIHB1YmxpYyBB\ndHRyaWJ1dGU8PyBzdXBlciBYLCA/PiBnZXRBdHRyaWJ1dGUoU3RyaW5nIG5h\nbWUpIHsKICAgICAgICByZXR1cm4gZ2V0QXR0cmlidXRlKG5hbWUsIG51bGwp\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZGVjbGFyZWQg\nYXR0cmlidXRlIG9mIHRoZSBnaXZlbiBuYW1lIG9mIGFueSB0eXBlLgogICAg\nICogCiAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiAg\naWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3RzCiAgICAgKi8KICAgIHB1Ymxp\nYyBBdHRyaWJ1dGU8WCwgPz4gZ2V0RGVjbGFyZWRBdHRyaWJ1dGUoU3RyaW5n\nIG5hbWUpIHsKICAgICAgICByZXR1cm4gZ2V0RGVjbGFyZWRBdHRyaWJ1dGUo\nbmFtZSwgbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRo\nZSBzaW5nbGUtdmFsdWVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSBv\nZiBhbnkgdHlwZS4KICAgICAqIAogICAgICogQHRocm93cyBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2ggYXR0cmlidXRlIGV4aXN0cwog\nICAgICovCiAgICBwdWJsaWMgU2luZ3VsYXJBdHRyaWJ1dGU8PyBzdXBlciBY\nLCA/PiBnZXRTaW5ndWxhckF0dHJpYnV0ZShTdHJpbmcgbmFtZSkgewogICAg\nICAgIHJldHVybiBnZXRTaW5ndWxhckF0dHJpYnV0ZShuYW1lLCBudWxsKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGRlY2xhcmVkLCBz\naW5nbGUtdmFsdWVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSBvZiBh\nbnkgdHlwZS4KICAgICAqIAogICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2ggYXR0cmlidXRlIGV4aXN0cwogICAg\nICovCiAgICBwdWJsaWMgU2luZ3VsYXJBdHRyaWJ1dGU8WCwgPz4gZ2V0RGVj\nbGFyZWRTaW5ndWxhckF0dHJpYnV0ZShTdHJpbmcgbmFtZSkgewogICAgICAg\nIHJldHVybiBnZXREZWNsYXJlZFNpbmd1bGFyQXR0cmlidXRlKG5hbWUsIG51\nbGwpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYXR0cmli\ndXRlIG9mIHRoZSBnaXZlbiBuYW1lIGFuZCBvZiB0eXBlIGphdmEudXRpbC5D\nb2xsZWN0aW9uLgogICAgICogCiAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbiAgaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3RzCiAg\nICAgKi8KICAgIHB1YmxpYyBDb2xsZWN0aW9uQXR0cmlidXRlPD8gc3VwZXIg\nWCwgPz4gZ2V0Q29sbGVjdGlvbihTdHJpbmcgbmFtZSkgewogICAgICAgIHJl\ndHVybiBnZXRDb2xsZWN0aW9uKG5hbWUsIG51bGwpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJucyB0aGUgYXR0cmlidXRlIG9mIHRoZSBnaXZlbiBu\nYW1lIGFuZCBvZiB0eXBlIGphdmEudXRpbC5TZXQuCiAgICAgKiAKICAgICAq\nIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uICBpZiBubyBzdWNo\nIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwogICAgcHVibGljIFNldEF0dHJp\nYnV0ZTw/IHN1cGVyIFgsID8+IGdldFNldChTdHJpbmcgbmFtZSkgewogICAg\nICAgIHJldHVybiBnZXRTZXQobmFtZSwgbnVsbCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgb2YgdGhlIGdpdmVuIG5h\nbWUgYW5kIG9mIHR5cGUgamF2YS51dGlsLkxpc3QuCiAgICAgKiAKICAgICAq\nIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uICBpZiBubyBzdWNo\nIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwogICAgcHVibGljIExpc3RBdHRy\naWJ1dGU8PyBzdXBlciBYLCA/PiBnZXRMaXN0KFN0cmluZyBuYW1lKSB7CiAg\nICAgICAgcmV0dXJuIGdldExpc3QobmFtZSwgbnVsbCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgb2YgdGhlIGdpdmVu\nIG5hbWUgYW5kIG9mIHR5cGUgamF2YS51dGlsLk1hcC4KICAgICAqIAogICAg\nICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1\nY2ggYXR0cmlidXRlIGV4aXN0cwogICAgICovCiAgICBwdWJsaWMgTWFwQXR0\ncmlidXRlPD8gc3VwZXIgWCwgPywgPz4gZ2V0TWFwKFN0cmluZyBuYW1lKSB7\nCiAgICAgICAgcmV0dXJuIGdldE1hcChuYW1lLCBudWxsLCBudWxsKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGRlY2xhcmVkIGF0dHJp\nYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSBhbmQgb2YgdHlwZSBqYXZhLnV0aWwu\nQ29sbGVjdGlvbi4KICAgICAqIAogICAgICogQHRocm93cyBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2ggYXR0cmlidXRlIGV4aXN0cwog\nICAgICovCiAgICBwdWJsaWMgQ29sbGVjdGlvbkF0dHJpYnV0ZTxYLCA/PiBn\nZXREZWNsYXJlZENvbGxlY3Rpb24oU3RyaW5nIG5hbWUpIHsKICAgICAgICBy\nZXR1cm4gZ2V0RGVjbGFyZWRDb2xsZWN0aW9uKG5hbWUsIG51bGwpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZGVjbGFyZWQgYXR0cmli\ndXRlIG9mIHRoZSBnaXZlbiBuYW1lIGFuZCBvZiB0eXBlIGphdmEudXRpbC5T\nZXQuCiAgICAgKiAKICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uICBpZiBubyBzdWNoIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwog\nICAgcHVibGljIFNldEF0dHJpYnV0ZTxYLCA/PiBnZXREZWNsYXJlZFNldChT\ndHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiBnZXREZWNsYXJlZFNldChu\nYW1lLCBudWxsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhl\nIGRlY2xhcmVkIGF0dHJpYnV0ZSBvZiB0aGUgZ2l2ZW4gbmFtZSBhbmQgb2Yg\ndHlwZSBqYXZhLnV0aWwuTGlzdC4KICAgICAqIAogICAgICogQHRocm93cyBJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gIGlmIG5vIHN1Y2ggYXR0cmlidXRl\nIGV4aXN0cwogICAgICovCiAgICBwdWJsaWMgTGlzdEF0dHJpYnV0ZTxYLCA/\nPiBnZXREZWNsYXJlZExpc3QoU3RyaW5nIG5hbWUpIHsKICAgICAgICByZXR1\ncm4gZ2V0RGVjbGFyZWRMaXN0KG5hbWUsIG51bGwpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJucyB0aGUgZGVjbGFyZWQgYXR0cmlidXRlIG9mIHRo\nZSBnaXZlbiBuYW1lIGFuZCBvZiB0eXBlIGphdmEudXRpbC5NYXAuCiAgICAg\nKiAKICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uICBp\nZiBubyBzdWNoIGF0dHJpYnV0ZSBleGlzdHMKICAgICAqLwogICAgcHVibGlj\nIE1hcEF0dHJpYnV0ZTxYLCA/LCA/PiBnZXREZWNsYXJlZE1hcChTdHJpbmcg\nbmFtZSkgewogICAgICAgIHJldHVybiBnZXREZWNsYXJlZE1hcChuYW1lLCBu\ndWxsLCBudWxsKTsKICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tCiAgICAvLyBQcmltYXJ5IEtleSBhbmQgVmVyc2lvbiBBdHRy\naWJ1dGUgcmVsYXRlZCBmdW5jdGlvbnMKICAgIC8vLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogICBSZXR1cm5zIHRoZSBh\ndHRyaWJ1dGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGlkIGNsYXNzIG9mIHRo\nZSBpZGVudGlmaWFibGUgdHlwZS4KICAgICAqICAgCiAgICAgKiAgIEB0aHJv\nd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHRoZSB0aGlzIHR5cGUg\naXMgbm90IHVzaW5nIGFuIGlkIGNsYXNzCiAgICAgKi8KICAgIHB1YmxpYyBm\naW5hbCBqYXZhLnV0aWwuU2V0PFNpbmd1bGFyQXR0cmlidXRlPD8gc3VwZXIg\nWCwgPz4+IGdldElkQ2xhc3NBdHRyaWJ1dGVzKCkgewogICAgICAgIGlmICht\nZXRhLmlzT3BlbkpQQUlkZW50aXR5KCkpCiAgICAgICAgICAgIHRocm93IG5l\ndyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24obWV0YSArICIgZG9lcyBub3Qg\ndXNlIElkQ2xhc3MuIE9iamVjdCBJZCB0eXBlID0gIiArIAogICAgICAgICAg\nICAgICAgbWV0YS5nZXRPYmplY3RJZFR5cGUoKSArICIgSWRlbnRpdHkgVHlw\nZSA9ICIgKyBtZXRhLmdldElkZW50aXR5VHlwZSgpKTsKICAgICAgICByZXR1\ncm4gZmlsdGVyKGF0dHJzLCBuZXcgSGFzaFNldDxTaW5ndWxhckF0dHJpYnV0\nZTw/IHN1cGVyIFgsID8+PigpLAogICAgICAgICAgICAgICAgbmV3IElkQXR0\ncmlidXRlRmlsdGVyPFg+KCkpOwogICAgfQogICAgCiAgICAvKioKICAgICAq\nICBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgb2YgZ2l2ZW4gdHlwZSB0aGF0IGNv\ncnJlc3BvbmRzIHRvIHRoZSBpZCBhdHRyaWJ1dGUgb2YgdGhpcyAKICAgICAq\nICBpZGVudGlmaWFibGUgbWFuYWdlZCB0eXBlLgogICAgICogIAogICAgICog\nIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIG5vIHN1Y2gg\nYXR0cmlidXRlIGV4aXN0cwogICAgICovCiAgICAgcHVibGljIGZpbmFsIDxZ\nPiBTaW5ndWxhckF0dHJpYnV0ZTw/IHN1cGVyIFgsIFk+IGdldElkKENsYXNz\nPFk+IHR5cGUpIHsKICAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4g\ncmVzdWx0ID0gIHBpY2soYXR0cnMsIAogICAgICAgICAgICAgICAgIG5ldyBB\ndHRyaWJ1dGVUeXBlRmlsdGVyPFgsIFk+KHR5cGUpLCAKICAgICAgICAgICAg\nICAgICBuZXcgSWRBdHRyaWJ1dGVGaWx0ZXI8WD4oKSk7CiAgICAgICAgIGlm\nIChyZXN1bHQgIT0gbnVsbCkKICAgICAgICAgICAgIHJldHVybiAoU2luZ3Vs\nYXJBdHRyaWJ1dGU8PyBzdXBlciBYLCBZPikgcmVzdWx0OwogICAgICAgICB0\naHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7CiAgICAgfQog\nICAgIAogICAgIC8qKgogICAgICAqICBSZXR1cm5zIHRoZSBkZWNsYXJlZCBh\ndHRyaWJ1dGUgb2YgZ2l2ZW4gdHlwZSB0aGF0IGNvcnJlc3BvbmRzIHRvIHRo\nZSBpZCBhdHRyaWJ1dGUgb2YgdGhpcyAKICAgICAgKiAgaWRlbnRpZmlhYmxl\nIG1hbmFnZWQgdHlwZS4KICAgICAgKiAgCiAgICAgICogIEB0aHJvd3MgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIG5vIHN1Y2ggYXR0cmlidXRlIGV4\naXN0cwogICAgICAqLwogICAgIHB1YmxpYyBmaW5hbCA8WT4gU2luZ3VsYXJB\ndHRyaWJ1dGU8WCwgWT4gZ2V0RGVjbGFyZWRJZChDbGFzczxZPiB0eXBlKSB7\nCiAgICAgICAgIEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IHJlc3VsdCA9ICBw\naWNrKGF0dHJzLCAKICAgICAgICAgICAgICAgICBkZWNsYXJlZEF0dHJpYnV0\nZUZpbHRlciwKICAgICAgICAgICAgICAgICBuZXcgQXR0cmlidXRlVHlwZUZp\nbHRlcjxYLCBZPih0eXBlKSwgCiAgICAgICAgICAgICAgICAgbmV3IElkQXR0\ncmlidXRlRmlsdGVyPFg+KCkpOwogICAgICAgICBpZiAocmVzdWx0ICE9IG51\nbGwpCiAgICAgICAgICAgICByZXR1cm4gKFNpbmd1bGFyQXR0cmlidXRlPFgs\nIFk+KSByZXN1bHQ7CiAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24oKTsKICAgICB9CiAgICAgCiAgICAgLyoqCiAgICAgICog\nIFJldHVybnMgdGhlIGF0dHJpYnV0ZSBvZiBnaXZlbiB0eXBlIHRoYXQgY29y\ncmVzcG9uZHMgdG8gdGhlIHZlcnNpb24gYXR0cmlidXRlIG9mIHRoaXMgCiAg\nICAgICogIG1hbmFnZWQgdHlwZS4KICAgICAgKiAgCiAgICAgICogIEB0aHJv\nd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIG5vIHN1Y2ggYXR0cmli\ndXRlIGV4aXN0cwogICAgICAqLwogICAgIHB1YmxpYyA8WT4gU2luZ3VsYXJB\ndHRyaWJ1dGU8PyBzdXBlciBYLCBZPiBnZXRWZXJzaW9uKENsYXNzPFk+IHR5\ncGUpIHsKICAgICAgICAgQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gcmVzdWx0\nID0gcGljayhhdHRycywgCiAgICAgICAgICAgICAgICAgbmV3IFZlcnNpb25B\ndHRyaWJ1dGVGaWx0ZXI8WD4oKSwgCiAgICAgICAgICAgICAgICAgbmV3IEF0\ndHJpYnV0ZVR5cGVGaWx0ZXI8WCxZPih0eXBlKSk7CiAgICAgICAgIGlmIChy\nZXN1bHQgPT0gbnVsbCkgCiAgICAgICAgICAgICBub3RGb3VuZEV4Y2VwdGlv\nbigidmVyc2lvbi1ub3QtZm91bmQiLCAiIiwgdHlwZSk7CiAgICAgICAgIHJl\ndHVybiAoU2luZ3VsYXJBdHRyaWJ1dGU8PyBzdXBlciBYLCBZPilyZXN1bHQ7\nCiAgICAgfQoKICAgICAvKioKICAgICAgKiAgUmV0dXJucyB0aGUgZGVjbGFy\nZWQgYXR0cmlidXRlIG9mIGdpdmVuIHR5cGUgdGhhdCBjb3JyZXNwb25kcyB0\nbyB0aGUgdmVyc2lvbiBhdHRyaWJ1dGUgb2YgCiAgICAgICogIHRoaXMgbWFu\nYWdlZCB0eXBlLgogICAgICAqICAKICAgICAgKiAgQHRocm93cyBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24gaWYgbm8gc3VjaCBhdHRyaWJ1dGUgZXhpc3Rz\nCiAgICAgICovCiAgICAgcHVibGljIDxZPiBTaW5ndWxhckF0dHJpYnV0ZTxY\nLCBZPiBnZXREZWNsYXJlZFZlcnNpb24oQ2xhc3M8WT4gdHlwZSkgewogICAg\nICAgICBBdHRyaWJ1dGU8PyBzdXBlciBYLCA/PiByZXN1bHQgPSBwaWNrKGF0\ndHJzLAogICAgICAgICAgICAgICAgIGRlY2xhcmVkQXR0cmlidXRlRmlsdGVy\nLAogICAgICAgICAgICAgICAgIG5ldyBWZXJzaW9uQXR0cmlidXRlRmlsdGVy\nPFg+KCksIAogICAgICAgICAgICAgICAgIG5ldyBBdHRyaWJ1dGVUeXBlRmls\ndGVyPFgsWT4odHlwZSkpOwogICAgICAgICBpZiAocmVzdWx0ID09IG51bGwp\nIAogICAgICAgICAgICAgbm90Rm91bmRFeGNlcHRpb24oImRlY2wtdmVyc2lv\nbi1ub3QtZm91bmQiLCAiIiwgdHlwZSk7CiAgICAgICAgIHJldHVybiAoU2lu\nZ3VsYXJBdHRyaWJ1dGU8WCwgWT4pcmVzdWx0OwogICAgIH0KCiAgICAvLyA9\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIFN1cHBvcnQgZnVuY3Rp\nb25zCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgICBGaWVs\nZE1ldGFEYXRhIGdldEZpZWxkKFN0cmluZyBuYW1lKSB7CiAgICAgICAgcmV0\ndXJuIGdldEZpZWxkKG5hbWUsIG51bGwsIG51bGwsIG51bGwsIGZhbHNlKTsK\nICAgIH0KCiAgICBGaWVsZE1ldGFEYXRhIGdldEZpZWxkKFN0cmluZyBuYW1l\nLCBDbGFzcyB0eXBlKSB7CiAgICAgICAgcmV0dXJuIGdldEZpZWxkKG5hbWUs\nIHR5cGUsIG51bGwsIG51bGwsIGZhbHNlKTsKICAgIH0KCiAgICBGaWVsZE1l\ndGFEYXRhIGdldEZpZWxkKFN0cmluZyBuYW1lLCBDbGFzcyB0eXBlLCBib29s\nZWFuIGRlY2xhcmVkT25seSkgewogICAgICAgIHJldHVybiBnZXRGaWVsZChu\nYW1lLCB0eXBlLCBudWxsLCBudWxsLCBkZWNsYXJlZE9ubHkpOwogICAgfQoK\nICAgIC8qKgogICAgICogR2V0IHRoZSBmaWVsZCBvZiB0aGUgZ2l2ZW4gbmFt\nZSBhZnRlciB2YWxpZGF0aW5nIHRoZSBjb25kaXRpb25zLiBudWxsCiAgICAg\nKiB2YWx1ZSBvbiBhbnkgY29uZGl0aW9uIGltcGxpZXMgbm90IHRvIHZhbGlk\nYXRlLgogICAgICogCiAgICAgKiBAcGFyYW0gbmFtZSBzaW1wbGUgbmFtZSBp\nLmUuIHdpdGhvdXQgdGhlIGNsYXNzIG5hbWUKICAgICAqIEBwYXJhbSB0eXBl\nIHRoZSBleHBlY3RlZCB0eXBlIG9mIHRoZSBmaWVsZC4KICAgICAqIEBwYXJh\nbSBlbGVtZW50CiAgICAgKiAgICAgICAgICAgIHRoZSBleHBlY3RlZCBlbGVt\nZW50IHR5cGUgb2YgdGhlIGZpZWxkLgogICAgICogQHBhcmFtIGtleQogICAg\nICogICAgICAgICAgICB0aGUgZXhwZWN0ZWQga2V5IHR5cGUgb2YgdGhlIGZp\nZWxkLgogICAgICogQHBhcmFtIGRlY2xhcmVkCiAgICAgKiAgICAgICAgICAg\nIGlzIHRoaXMgZmllbGQgZGVjbGFyZWQgaW4gdGhpcyByZWNlaXZlcgogICAg\nICogCiAgICAgKiBAZXhjZXB0aW9uIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbgogICAgICogICAgICAgICAgICAgICAgaWYgYW55IG9mIHRoZSB2YWxpZGF0\naW9uIGZhaWxzLgogICAgICogCiAgICAgKi8KICAgIEZpZWxkTWV0YURhdGEg\nZ2V0RmllbGQoU3RyaW5nIG5hbWUsIENsYXNzPD8+IHR5cGUsIENsYXNzPD8+\nIGVsZW1lbnRUeXBlLAogICAgICAgICAgICBDbGFzczw/PiBrZXlUeXBlLCBi\nb29sZWFuIGRlY2wpIHsKICAgICAgICBGaWVsZE1ldGFEYXRhIGZtZCA9IGRl\nY2wgPyBtZXRhLmdldERlY2xhcmVkRmllbGQobmFtZSkgOiBtZXRhCiAgICAg\nICAgICAgICAgICAuZ2V0RmllbGQobmFtZSk7CgogICAgICAgIGlmIChmbWQg\nPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoZGVjbCAmJiBtZXRhLmdldEZp\nZWxkKG5hbWUpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRocm93IG5l\ndyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oX2xvYy5nZXQoImZpZWxkLW5v\ndC1kZWNsIiwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSwgY2xzLCBt\nZXRhLmdldEZpZWxkKG5hbWUpLmdldERlY2xhcmluZ1R5cGUoKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAg\nIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0KCJmaWVsZC1taXNzaW5nIiwKICAg\nICAgICAgICAgICAgICAgICAgICAgbmFtZSwgbWV0YS5nZXREZXNjcmliZWRU\neXBlKCksCiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5cy50b1N0cmlu\nZyhtZXRhLmdldEZpZWxkTmFtZXMoKSkpLmdldE1lc3NhZ2UoKSk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHlwZSgiZmllbGQt\ndHlwZS1taXNtYXRjaCIsIGZtZCwgZm1kLmdldERlY2xhcmVkVHlwZSgpLCB0\neXBlKTsKICAgICAgICBhc3NlcnRUeXBlKCJmaWVsZC1lbGVtZW50LXR5cGUt\nbWlzbWF0Y2giLCBmbWQsIGZtZC5nZXRFbGVtZW50KCkKICAgICAgICAgICAg\nICAgIC5nZXREZWNsYXJlZFR5cGUoKSwgZWxlbWVudFR5cGUpOwogICAgICAg\nIGFzc2VydFR5cGUoImZpZWxkLWtleS10eXBlLW1pc21hdGNoIiwgZm1kLCBm\nbWQuZ2V0S2V5KCkKICAgICAgICAgICAgICAgIC5nZXREZWNsYXJlZFR5cGUo\nKSwga2V5VHlwZSk7CiAgICAgICAgcmV0dXJuIGZtZDsKICAgIH0KCiAgICB2\nb2lkIGFzc2VydFR5cGUoU3RyaW5nIG1zZywgRmllbGRNZXRhRGF0YSBmbWQs\nIENsYXNzPD8+IGFjdHVhbCwKICAgICAgICAgICAgQ2xhc3M8Pz4gZXhwZWN0\nZWQpIHsKICAgICAgICBpZiAoZXhwZWN0ZWQgIT0gbnVsbCAmJiAhZXhwZWN0\nZWQuaXNBc3NpZ25hYmxlRnJvbShhY3R1YWwpKSB7CiAgICAgICAgICAgIGlm\nICh3cmFwKGV4cGVjdGVkKSAhPSB3cmFwKGFjdHVhbCkpIHsKICAgICAgICAg\nICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oX2xv\nYy5nZXQobXNnLCBmbWQuZ2V0TmFtZSgpLAogICAgICAgICAgICAgICAgICAg\nICAgICBhY3R1YWwsIGV4cGVjdGVkKS5nZXRNZXNzYWdlKCkpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIENsYXNzPD8+IHdyYXAoQ2xh\nc3M8Pz4gYykgewogICAgICAgIGlmIChjLmlzUHJpbWl0aXZlKCkpIHsKICAg\nICAgICAgICAgaWYgKGMgPT0gaW50LmNsYXNzKQogICAgICAgICAgICAgICAg\ncmV0dXJuIEludGVnZXIuY2xhc3M7CiAgICAgICAgICAgIGlmIChjID09IGxv\nbmcuY2xhc3MpCiAgICAgICAgICAgICAgICByZXR1cm4gTG9uZy5jbGFzczsK\nICAgICAgICAgICAgaWYgKGMgPT0gYm9vbGVhbi5jbGFzcykKICAgICAgICAg\nICAgICAgIHJldHVybiBCb29sZWFuLmNsYXNzOwogICAgICAgICAgICBpZiAo\nYyA9PSBieXRlLmNsYXNzKQogICAgICAgICAgICAgICAgcmV0dXJuIEJ5dGUu\nY2xhc3M7CiAgICAgICAgICAgIGlmIChjID09IGNoYXIuY2xhc3MpCiAgICAg\nICAgICAgICAgICByZXR1cm4gQ2hhcmFjdGVyLmNsYXNzOwogICAgICAgICAg\nICBpZiAoYyA9PSBkb3VibGUuY2xhc3MpCiAgICAgICAgICAgICAgICByZXR1\ncm4gRG91YmxlLmNsYXNzOwogICAgICAgICAgICBpZiAoYyA9PSBmbG9hdC5j\nbGFzcykKICAgICAgICAgICAgICAgIHJldHVybiBGbG9hdC5jbGFzczsKICAg\nICAgICAgICAgaWYgKGMgPT0gc2hvcnQuY2xhc3MpCiAgICAgICAgICAgICAg\nICByZXR1cm4gU2hvcnQuY2xhc3M7CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiBjOwogICAgfQogICAgCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tCiAgICAvLyBFeGNlcHRpb24gaGFuZGxpbmcKICAgIC8vIC0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHByaXZhdGUgdm9pZCBub3RG\nb3VuZEV4Y2VwdGlvbihTdHJpbmcgbXNnLCBTdHJpbmcgbmFtZSwgQ2xhc3M8\nPz4gdDEpIHsKICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uKG1zZyArICIgQXR0cmlidXRlICIgKyBuYW1lICsgIiBvZiB0eXBl\nICIgKyAKICAgICAgICAgICAgICAgICh0MSA9PSBudWxsID8gImFueSIgOiB0\nMS5nZXROYW1lKCkpICsgIiBub3QgZm91bmQgaW4gIiArIG1ldGEpOwogICAg\nfQogICAgCiAgICBwcml2YXRlIHZvaWQgbm90Rm91bmRFeGNlcHRpb24oU3Ry\naW5nIG1zZywgU3RyaW5nIG5hbWUsIENsYXNzPD8+IHQxLCBDbGFzczw/PiB0\nMikgewogICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24oIkF0dHJpYnV0ZSAiICsgbmFtZSArICIgbm90IGZvdW5kIik7CiAgICB9\nCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8g\nQXR0cmlidXRlIGZpbHRlcmluZwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogQWZmaXJtcyBpZiBhIGdpdmVu\nIGVsZW1lbnQgc2F0aXNmeSBhIGNvbmRpdGlvbi4KICAgICAqIAogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIGludGVyZmFjZSBGaWx0ZXI8VD4gewogICAg\nICAgIGJvb2xlYW4gc2VsZWN0cyhUIGF0dHIpOwoKICAgICAgICBGaWx0ZXI8\nVD4gaW52ZXJzZSgpOwogICAgfQogICAgCgogICAgLyoqCiAgICAgKiBBcHBs\naWVzIGNoYWluIG9mIGZpbHRlcnMgQU5EZWQgb24gdGhlIGdpdmVuIGNvbGxl\nY3Rpb24gdG8gcG9wdWxhdGUgdGhlIGdpdmVuIHJlc3VsdC4KICAgICAqIEEg\nbnVsbCBmaWx0ZXIgZXZhbHVhdGVzIGFsd2F5cyBUUlVFLgogICAgICogVGhl\nIGFyZ3VtZW50cyBhcmUgbm90IHBhc3NlZCBhcyB2YXJpYWJsZSBhcmd1bWVu\ndCBsaXN0IHRvIHN1cHByZXNzIHdhcm5pbmdzIGluIGluIHRoZSBjYWxsZXIK\nICAgICAqIGZvciBnZW5lcmljIHZhcmFyZ3MgYXJyYXkgY29uc3RydWN0aW9u\nLgogICAgICovCiAgICAKICAgIHB1YmxpYyBzdGF0aWMgPFQsIEMgZXh0ZW5k\ncyBqYXZhLnV0aWwuQ29sbGVjdGlvbjxFPiwgRT4gQyBmaWx0ZXIoQ29sbGVj\ndGlvbjxUPiBvcmlnaW5hbCwgCiAgICAgICAgQyByZXN1bHQsIEZpbHRlcjxU\nPiBmMSwgRmlsdGVyPFQ+IGYyLCBGaWx0ZXI8VD4gZjMsIEZpbHRlcjxUPiBm\nNCkgewogICAgICAgIGZvciAoVCB0IDogb3JpZ2luYWwpIHsKICAgICAgICAg\nICAgaWYgKChmMSA9PSBudWxsIHx8IGYxLnNlbGVjdHModCkpICYmIChmMiA9\nPSBudWxsIHx8IGYyLnNlbGVjdHModCkpIAogICAgICAgICAgICAgJiYgKGYz\nID09IG51bGwgfHwgZjMuc2VsZWN0cyh0KSkgJiYgKGY0ID09IG51bGwgfHwg\nZjQuc2VsZWN0cyh0KSkpCiAgICAgICAgICAgICAgICByZXN1bHQuYWRkKChF\nKSB0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0K\nICAgIAogICAgLyoqCiAgICAgKiBBcHBsaWVzIGNoYWluIG9mIGZpbHRlcnMg\nQU5EZWQgb24gdGhlIGdpdmVuIGNvbGxlY3Rpb24gdG8gcGljayBhIHNpbmds\nZSBlbGVtZW50LgogICAgICogQSBudWxsIGZpbHRlciBldmFsdWF0ZXMgYWx3\nYXlzIFRSVUUuCiAgICAgKiBUaGUgYXJndW1lbnRzIGFyZSBub3QgcGFzc2Vk\nIGFzIHZhcmlhYmxlIGFyZ3VtZW50IGxpc3QgdG8gc3VwcHJlc3Mgd2Fybmlu\nZ3MgaW4gaW4gdGhlIGNhbGxlcgogICAgICogZm9yIGdlbmVyaWMgdmFyYXJn\ncyBhcnJheSBjb25zdHJ1Y3Rpb24uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgPFQ+IFQgcGljayhDb2xsZWN0aW9uPFQ+IG9yaWdpbmFsLCBGaWx0ZXI8\nVD4gZjEsIEZpbHRlcjxUPiBmMiwgRmlsdGVyPFQ+IGYzLCAKICAgICAgICBG\naWx0ZXI8VD4gZjQpIHsKICAgICAgICBmb3IgKFQgdCA6IG9yaWdpbmFsKSB7\nCiAgICAgICAgICAgIGlmICgoZjEgPT0gbnVsbCB8fCBmMS5zZWxlY3RzKHQp\nKSAmJiAoZjIgPT0gbnVsbCB8fCBmMi5zZWxlY3RzKHQpKSAKICAgICAgICAg\nICAgICYmIChmMyA9PSBudWxsIHx8IGYzLnNlbGVjdHModCkpICYmIChmNCA9\nPSBudWxsIHx8IGY0LnNlbGVjdHModCkpKQogICAgICAgICAgICAgICAgcmV0\ndXJuIHQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQog\nICAgCiAgICBzdGF0aWMgPFQsIEMgZXh0ZW5kcyBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjxFPiwgRT4gQyBmaWx0ZXIoQ29sbGVjdGlvbjxUPiBvcmlnaW5hbCwg\nCiAgICAgICAgICAgIEMgcmVzdWx0LCBGaWx0ZXI8VD4gZjEpIHsKICAgICAg\nICByZXR1cm4gZmlsdGVyKG9yaWdpbmFsLCByZXN1bHQsIGYxLCBudWxsLCBu\ndWxsLCBudWxsKTsKICAgIH0KICAgIAogICAgc3RhdGljIDxULCBDIGV4dGVu\nZHMgamF2YS51dGlsLkNvbGxlY3Rpb248RT4sIEU+IEMgZmlsdGVyKENvbGxl\nY3Rpb248VD4gb3JpZ2luYWwsIAogICAgICAgICAgICBDIHJlc3VsdCwgRmls\ndGVyPFQ+IGYxLCBGaWx0ZXI8VD4gZjIpIHsKICAgICAgICByZXR1cm4gZmls\ndGVyKG9yaWdpbmFsLCByZXN1bHQsIGYxLCBmMiwgbnVsbCwgbnVsbCk7CiAg\nICB9CiAgICAKICAgIHN0YXRpYyA8VCwgQyBleHRlbmRzIGphdmEudXRpbC5D\nb2xsZWN0aW9uPEU+LCBFPiBDIGZpbHRlcihDb2xsZWN0aW9uPFQ+IG9yaWdp\nbmFsLCAKICAgICAgICAgICAgQyByZXN1bHQsIEZpbHRlcjxUPiBmMSwgRmls\ndGVyPFQ+IGYyLCBGaWx0ZXI8VD4gZjMpIHsKICAgICAgICByZXR1cm4gZmls\ndGVyKG9yaWdpbmFsLCByZXN1bHQsIGYxLCBmMiwgZjMsIG51bGwpOwogICAg\nfQogICAgCiAgICBzdGF0aWMgPFQ+IFQgcGljayhDb2xsZWN0aW9uPFQ+IG9y\naWdpbmFsLCBGaWx0ZXI8VD4gZjEpIHsKICAgICAgICByZXR1cm4gcGljayhv\ncmlnaW5hbCwgZjEsIG51bGwsIG51bGwsIG51bGwpOwogICAgfQoKICAgIHN0\nYXRpYyA8VD4gVCBwaWNrKENvbGxlY3Rpb248VD4gb3JpZ2luYWwsIEZpbHRl\ncjxUPiBmMSwgRmlsdGVyPFQ+IGYyKSB7CiAgICAgICAgcmV0dXJuIHBpY2so\nb3JpZ2luYWwsIGYxLCBmMiwgbnVsbCwgbnVsbCk7CiAgICB9CiAgICAKICAg\nIHN0YXRpYyA8VD4gVCBwaWNrKENvbGxlY3Rpb248VD4gb3JpZ2luYWwsIEZp\nbHRlcjxUPiBmMSwgRmlsdGVyPFQ+IGYyLCBGaWx0ZXI8VD4gZjMpIHsKICAg\nICAgICByZXR1cm4gcGljayhvcmlnaW5hbCwgZjEsIGYyLCBmMywgbnVsbCk7\nCiAgICB9CiAgICAKCiAgICAvKioKICAgICAqIEFmZmlybXMgaWYgdGhlIGdp\ndmVuIGF0dHJpYnV0ZSBpcyBhIFNpbmd1bGFyIGF0dHJpYnV0ZS4KICAgICAq\nIAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGNsYXNzIFNpbmd1\nbGFyQXR0cmlidXRlRmlsdGVyPFg+IGltcGxlbWVudHMKICAgICAgICAgICAg\nRmlsdGVyPEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+PiB7CiAgICAgICAgcHJp\ndmF0ZSBmaW5hbCBib29sZWFuIF9pbnZlcnQ7CgogICAgICAgIHB1YmxpYyBT\naW5ndWxhckF0dHJpYnV0ZUZpbHRlcigpIHsKICAgICAgICAgICAgdGhpcyhm\nYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgU2luZ3VsYXJBdHRy\naWJ1dGVGaWx0ZXIoYm9vbGVhbiBpbnZlcnRlZCkgewogICAgICAgICAgICBf\naW52ZXJ0ID0gaW52ZXJ0ZWQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nYm9vbGVhbiBzZWxlY3RzKEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IGF0dHIp\nIHsKICAgICAgICAgICAgcmV0dXJuIF9pbnZlcnQgPyBhdHRyLmlzQ29sbGVj\ndGlvbigpIDogIWF0dHIuaXNDb2xsZWN0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgU2luZ3VsYXJBdHRyaWJ1dGVGaWx0ZXI8WD4gaW52ZXJz\nZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW5ndWxhckF0dHJpYnV0\nZUZpbHRlcjxYPighX2ludmVydCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgY2xhc3MgRGVjbGFyZWRBdHRyaWJ1dGVGaWx0\nZXI8WD4gaW1wbGVtZW50cwogICAgICAgICAgICBGaWx0ZXI8QXR0cmlidXRl\nPD8gc3VwZXIgWCwgPz4+IHsKICAgICAgICBwcml2YXRlIGZpbmFsIE1hbmFn\nZWRUeXBlPFg+IG93bmVyOwogICAgICAgIHByaXZhdGUgZmluYWwgYm9vbGVh\nbiBfaW52ZXJ0OwoKICAgICAgICBEZWNsYXJlZEF0dHJpYnV0ZUZpbHRlcihN\nYW5hZ2VkVHlwZTxYPiBvd25lcikgewogICAgICAgICAgICB0aGlzKG93bmVy\nLCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBEZWNsYXJlZEF0dHJpYnV0\nZUZpbHRlcihNYW5hZ2VkVHlwZTxYPiBvd25lciwgYm9vbGVhbiBpbnZlcnRl\nZCkgewogICAgICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7CiAgICAgICAg\nICAgIF9pbnZlcnQgPSBpbnZlcnRlZDsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBib29sZWFuIHNlbGVjdHMoQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4g\nYXR0cikgewogICAgICAgICAgICByZXR1cm4gX2ludmVydCA/IGF0dHIuZ2V0\nRGVjbGFyaW5nVHlwZSgpICE9IG93bmVyIDogYXR0cgogICAgICAgICAgICAg\nICAgICAgIC5nZXREZWNsYXJpbmdUeXBlKCkgPT0gb3duZXI7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgRGVjbGFyZWRBdHRyaWJ1dGVGaWx0ZXI8WD4g\naW52ZXJzZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWNsYXJlZEF0\ndHJpYnV0ZUZpbHRlcjxYPihvd25lciwgIV9pbnZlcnQpOwogICAgICAgIH0K\nICAgIH0KCiAgICAvKioKICAgICAqIFNlbGVjdHMgaWYgdGhlIGF0dHJpYnV0\nZSB0eXBlIG1hdGNoZXMgdGhlIGdpdmVuIEphdmEgY2xhc3MuCiAgICAgKiBu\ndWxsIG1hdGNoZXMgYW55IHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgY2xhc3MgQXR0cmlidXRlVHlwZUZpbHRlcjxYLCBZPiBpbXBs\nZW1lbnRzIEZpbHRlcjxBdHRyaWJ1dGU8PyBzdXBlciBYLCA/Pj4gewogICAg\nICAgIHByaXZhdGUgZmluYWwgQ2xhc3M8WT4gX3R5cGU7CiAgICAgICAgcHJp\ndmF0ZSBmaW5hbCBib29sZWFuIF9pbnZlcnQ7CgogICAgICAgIHB1YmxpYyBB\ndHRyaWJ1dGVUeXBlRmlsdGVyKENsYXNzPFk+IHR5cGUpIHsKICAgICAgICAg\nICAgdGhpcyh0eXBlLCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgQXR0cmlidXRlVHlwZUZpbHRlcihDbGFzczxZPiB0eXBlLCBib29sZWFu\nIGludmVydGVkKSB7CiAgICAgICAgICAgIF90eXBlID0gdHlwZTsKICAgICAg\nICAgICAgX2ludmVydCA9IGludmVydGVkOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIGJvb2xlYW4gc2VsZWN0cyhBdHRyaWJ1dGU8PyBzdXBlciBYLCA/\nPiBhdHRyKSB7CiAgICAgICAgICAgIGJvb2xlYW4gcmVzdWx0ID0gX3R5cGUg\nPT0gbnVsbCB8fCBGaWx0ZXJzLmNhbkNvbnZlcnQoYXR0ci5nZXRKYXZhVHlw\nZSgpLCBfdHlwZSwgZmFsc2UpOwogICAgICAgICAgICByZXR1cm4gX2ludmVy\ndCA/ICFyZXN1bHQgOiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgQXR0cmlidXRlVHlwZUZpbHRlcjxYLCBZPiBpbnZlcnNlKCkgewogICAg\nICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZVR5cGVGaWx0ZXI8WCwgWT4o\nX3R5cGUsICFfaW52ZXJ0KTsKICAgICAgICB9ICAgICAgICAKICAgIH0KCiAg\nICBwdWJsaWMgc3RhdGljIGZpbmFsIGNsYXNzIEF0dHJpYnV0ZU5hbWVGaWx0\nZXI8WD4gaW1wbGVtZW50cwogICAgICAgICAgICBGaWx0ZXI8QXR0cmlidXRl\nPD8gc3VwZXIgWCwgPz4+IHsKICAgICAgICBwcml2YXRlIGZpbmFsIFN0cmlu\nZyBfbmFtZTsKICAgICAgICBwcml2YXRlIGZpbmFsIGJvb2xlYW4gX2ludmVy\ndDsKCiAgICAgICAgcHVibGljIEF0dHJpYnV0ZU5hbWVGaWx0ZXIoU3RyaW5n\nIG5hbWUpIHsKICAgICAgICAgICAgdGhpcyhuYW1lLCBmYWxzZSk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgQXR0cmlidXRlTmFtZUZpbHRlcihTdHJp\nbmcgbmFtZSwgYm9vbGVhbiBpbnZlcnRlZCkgewogICAgICAgICAgICBfbmFt\nZSA9IG5hbWU7CiAgICAgICAgICAgIF9pbnZlcnQgPSBpbnZlcnRlZDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIHNlbGVjdHMoQXR0cmli\ndXRlPD8gc3VwZXIgWCwgPz4gYXR0cikgewogICAgICAgICAgICByZXR1cm4g\nX2ludmVydCA/ICFhdHRyLmdldE5hbWUoKS5lcXVhbHMoX25hbWUpIDogYXR0\nci5nZXROYW1lKCkKICAgICAgICAgICAgICAgICAgICAuZXF1YWxzKF9uYW1l\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBBdHRyaWJ1dGVOYW1lRmls\ndGVyPFg+IGludmVyc2UoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQXR0\ncmlidXRlTmFtZUZpbHRlcjxYPihfbmFtZSwgIV9pbnZlcnQpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGNsYXNzIFBsdXJh\nbENhdGVnb3J5RmlsdGVyPFg+IGltcGxlbWVudHMKICAgICAgICAgICAgRmls\ndGVyPEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+PiB7CiAgICAgICAgcHJpdmF0\nZSBmaW5hbCBDb2xsZWN0aW9uVHlwZSBfY2F0ZWdvcnk7CiAgICAgICAgcHJp\ndmF0ZSBmaW5hbCBib29sZWFuIF9pbnZlcnQ7CgogICAgICAgIHB1YmxpYyBQ\nbHVyYWxDYXRlZ29yeUZpbHRlcihDb2xsZWN0aW9uVHlwZSBjYXRlZ29yeSkg\newogICAgICAgICAgICB0aGlzKGNhdGVnb3J5LCBmYWxzZSk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgUGx1cmFsQ2F0ZWdvcnlGaWx0ZXIoQ29sbGVj\ndGlvblR5cGUgY2F0ZWdvcnksIGJvb2xlYW4gaW52ZXJ0ZWQpIHsKICAgICAg\nICAgICAgX2NhdGVnb3J5ID0gY2F0ZWdvcnk7CiAgICAgICAgICAgIF9pbnZl\ncnQgPSBpbnZlcnRlZDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29s\nZWFuIHNlbGVjdHMoQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gYXR0cikgewog\nICAgICAgICAgICBib29sZWFuIHJlc3VsdCA9IChhdHRyIGluc3RhbmNlb2Yg\nUGx1cmFsQXR0cmlidXRlPD8sID8sID8+KQogICAgICAgICAgICAgICAgICAg\nICYmICgoUGx1cmFsQXR0cmlidXRlPD8sID8sID8+KSBhdHRyKS5nZXRDb2xs\nZWN0aW9uVHlwZSgpID09IF9jYXRlZ29yeTsKICAgICAgICAgICAgcmV0dXJu\nIF9pbnZlcnQgPyAhcmVzdWx0IDogcmVzdWx0OwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIFBsdXJhbENhdGVnb3J5RmlsdGVyPFg+IGludmVyc2UoKSB7\nCiAgICAgICAgICAgIHJldHVybiBuZXcgUGx1cmFsQ2F0ZWdvcnlGaWx0ZXI8\nWD4oX2NhdGVnb3J5LCAhX2ludmVydCk7CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogU2VsZWN0cyBwbHVyYWwgYXR0cmlidXRlIG9mIGdpdmVu\nIGVsZW1lbnQgdHlwZS4KICAgICAqIG51bGwgZWxlbWVudCB0eXBlIGltcGx5\nIDxlbT5hbnk8L2VtPiBlbGVtZW50IHR5cGUuCiAgICAgKi8KICAgIAogICAg\ncHVibGljIHN0YXRpYyBmaW5hbCBjbGFzcyBFbGVtZW50VHlwZUZpbHRlcjxY\nLCBFPiBpbXBsZW1lbnRzIEZpbHRlcjxBdHRyaWJ1dGU8PyBzdXBlciBYLCA/\nPj4gewogICAgICAgIHByaXZhdGUgZmluYWwgQ2xhc3M8RT4gX2VsZW1lbnRU\neXBlOwogICAgICAgIHByaXZhdGUgZmluYWwgYm9vbGVhbiBfaW52ZXJ0OwoK\nICAgICAgICBwdWJsaWMgRWxlbWVudFR5cGVGaWx0ZXIoQ2xhc3M8RT4gZVR5\ncGUpIHsKICAgICAgICAgICAgdGhpcyhlVHlwZSwgZmFsc2UpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIEVsZW1lbnRUeXBlRmlsdGVyKENsYXNzPEU+\nIGVUeXBlLCBib29sZWFuIGludmVydGVkKSB7CiAgICAgICAgICAgIF9lbGVt\nZW50VHlwZSA9IGVUeXBlOwogICAgICAgICAgICBfaW52ZXJ0ID0gaW52ZXJ0\nZWQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBzZWxlY3Rz\nKEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IGF0dHIpIHsKICAgICAgICAgICAg\nYm9vbGVhbiByZXN1bHQgPSAoYXR0ciBpbnN0YW5jZW9mIFBsdXJhbEF0dHJp\nYnV0ZTw/LCA/LCA/PikKICAgICAgICAgICAgICAgICAgICAmJiAoX2VsZW1l\nbnRUeXBlID09IG51bGwgCiAgICAgICAgICAgICAgICAgICAgfHwgKChQbHVy\nYWxBdHRyaWJ1dGU8PywgPywgPz4pIGF0dHIpLmdldEVsZW1lbnRUeXBlKCku\nZ2V0SmF2YVR5cGUoKSAKICAgICAgICAgICAgICAgICAgICAgICAgID09IF9l\nbGVtZW50VHlwZSk7CiAgICAgICAgICAgIHJldHVybiBfaW52ZXJ0ID8gIXJl\nc3VsdCA6IHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBFbGVt\nZW50VHlwZUZpbHRlcjxYLCBFPiBpbnZlcnNlKCkgewogICAgICAgICAgICBy\nZXR1cm4gbmV3IEVsZW1lbnRUeXBlRmlsdGVyPFgsIEU+KF9lbGVtZW50VHlw\nZSwgIV9pbnZlcnQpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgc3Rh\ndGljIGZpbmFsIGNsYXNzIEVudHJ5VHlwZUZpbHRlcjxYLCBLLCBWPiBpbXBs\nZW1lbnRzCiAgICAgICAgICAgIEZpbHRlcjxBdHRyaWJ1dGU8PyBzdXBlciBY\nLCA/Pj4gewogICAgICAgIHByaXZhdGUgZmluYWwgQ2xhc3M8Sz4gX2tleVR5\ncGU7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBDbGFzczxWPiBfdmFsdWVUeXBl\nOwogICAgICAgIHByaXZhdGUgZmluYWwgYm9vbGVhbiBfaW52ZXJ0OwoKICAg\nICAgICBwdWJsaWMgRW50cnlUeXBlRmlsdGVyKENsYXNzPEs+IGtUeXBlLCBD\nbGFzczxWPiB2VHlwZSkgewogICAgICAgICAgICB0aGlzKGtUeXBlLCB2VHlw\nZSwgZmFsc2UpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIEVudHJ5VHlw\nZUZpbHRlcihDbGFzczxLPiBrVHlwZSwgQ2xhc3M8Vj4gdlR5cGUsIGJvb2xl\nYW4gaW52ZXJ0ZWQpIHsKICAgICAgICAgICAgX2tleVR5cGUgPSBrVHlwZTsK\nICAgICAgICAgICAgX3ZhbHVlVHlwZSA9IHZUeXBlOwogICAgICAgICAgICBf\naW52ZXJ0ID0gaW52ZXJ0ZWQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nYm9vbGVhbiBzZWxlY3RzKEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+IGF0dHIp\nIHsKICAgICAgICAgICAgYm9vbGVhbiByZXN1bHQgPSAoYXR0ciBpbnN0YW5j\nZW9mIE1hcEF0dHJpYnV0ZTw/LCA/LCA/PikKICAgICAgICAgICAgICAgICAg\nICAmJiAoX2tleVR5cGUgPT0gbnVsbCAKICAgICAgICAgICAgICAgICAgICB8\nfCAoKE1hcEF0dHJpYnV0ZTw/LCA/LCA/PikgYXR0cikuZ2V0S2V5VHlwZSgp\nLmdldEphdmFUeXBlKCkgPT0gX2tleVR5cGUpCiAgICAgICAgICAgICAgICAg\nICAgJiYgKF92YWx1ZVR5cGUgPT0gbnVsbCAKICAgICAgICAgICAgICAgICAg\nICB8fCAoKE1hcEF0dHJpYnV0ZTw/LCA/LCA/PikgYXR0cikuZ2V0RWxlbWVu\ndFR5cGUoKS5nZXRKYXZhVHlwZSgpID09IF92YWx1ZVR5cGUpOwogICAgICAg\nICAgICByZXR1cm4gX2ludmVydCA/ICFyZXN1bHQgOiByZXN1bHQ7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgRW50cnlUeXBlRmlsdGVyPFgsIEssIFY+\nIGludmVyc2UoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRW50cnlUeXBl\nRmlsdGVyPFgsIEssIFY+KF9rZXlUeXBlLCBfdmFsdWVUeXBlLCAhX2ludmVy\ndCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nY2xhc3MgSWRBdHRyaWJ1dGVGaWx0ZXI8WD4gaW1wbGVtZW50cwogICAgICAg\nICAgICBGaWx0ZXI8QXR0cmlidXRlPD8gc3VwZXIgWCwgPz4+IHsKICAgICAg\nICBwcml2YXRlIGZpbmFsIGJvb2xlYW4gX2ludmVydDsKCiAgICAgICAgcHVi\nbGljIElkQXR0cmlidXRlRmlsdGVyKCkgewogICAgICAgICAgICB0aGlzKGZh\nbHNlKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBJZEF0dHJpYnV0ZUZp\nbHRlcihib29sZWFuIGludmVydGVkKSB7CiAgICAgICAgICAgIF9pbnZlcnQg\nPSBpbnZlcnRlZDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFu\nIHNlbGVjdHMoQXR0cmlidXRlPD8gc3VwZXIgWCwgPz4gYXR0cikgewogICAg\nICAgICAgICBib29sZWFuIHJlc3VsdCA9ICgoTWVtYmVycy5NZW1iZXI8Pywg\nPz4pIGF0dHIpLmZtZC5pc1ByaW1hcnlLZXkoKTsKICAgICAgICAgICAgcmV0\ndXJuIF9pbnZlcnQgPyAhcmVzdWx0IDogcmVzdWx0OwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIElkQXR0cmlidXRlRmlsdGVyPFg+IGludmVyc2UoKSB7\nCiAgICAgICAgICAgIHJldHVybiBuZXcgSWRBdHRyaWJ1dGVGaWx0ZXI8WD4o\nIV9pbnZlcnQpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHN0\nYXRpYyBmaW5hbCBjbGFzcyBWZXJzaW9uQXR0cmlidXRlRmlsdGVyPFg+IGlt\ncGxlbWVudHMgRmlsdGVyPEF0dHJpYnV0ZTw/IHN1cGVyIFgsID8+PiB7CiAg\nICAgICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9pbnZlcnQ7CgogICAgICAg\nIHB1YmxpYyBWZXJzaW9uQXR0cmlidXRlRmlsdGVyKCkgewogICAgICAgICAg\nICB0aGlzKGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcHVi\nbGljIFZlcnNpb25BdHRyaWJ1dGVGaWx0ZXIoYm9vbGVhbiBpbnZlcnRlZCkg\newogICAgICAgICAgICBfaW52ZXJ0ID0gaW52ZXJ0ZWQ7CiAgICAgICAgfQog\nICAgICAgIAogICAgICAgIHB1YmxpYyBib29sZWFuIHNlbGVjdHMoQXR0cmli\ndXRlPD8gc3VwZXIgWCwgPz4gYXR0cikgewogICAgICAgICAgICBGaWVsZE1l\ndGFEYXRhIGZtZCA9ICgoTWVtYmVycy5NZW1iZXI8PywgPz4pIGF0dHIpLmZt\nZDsKICAgICAgICAgICAgYm9vbGVhbiByZXN1bHQgPSBmbWQuaXNWZXJzaW9u\nKCk7CiAgICAgICAgICAgIHJldHVybiBfaW52ZXJ0ID8gIXJlc3VsdCA6IHJl\nc3VsdDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcHVibGljIElkQXR0\ncmlidXRlRmlsdGVyPFg+IGludmVyc2UoKSB7CiAgICAgICAgICAgIHJldHVy\nbiBuZXcgSWRBdHRyaWJ1dGVGaWx0ZXI8WD4oIV9pbnZlcnQpOwogICAgICAg\nIH0KICAgIH0KCn0K\n","encoding":"base64"}

