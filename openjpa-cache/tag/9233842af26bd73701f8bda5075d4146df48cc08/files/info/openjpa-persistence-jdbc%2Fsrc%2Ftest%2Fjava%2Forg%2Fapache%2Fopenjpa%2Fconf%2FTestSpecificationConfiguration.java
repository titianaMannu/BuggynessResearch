{"sha":"2ca22933c139024aba1deda0999b2cca9986ffb2","node_id":"MDQ6QmxvYjIwNjM2NDoyY2EyMjkzM2MxMzkwMjRhYmExZGVkYTA5OTliMmNjYTk5ODZmZmIy","size":4339,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2ca22933c139024aba1deda0999b2cca9986ffb2","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZjsKCmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5QZXJzaXN0ZW5jZUV4Y2VwdGlvbjsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1h\nbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNl\nOwoKLyoqCiAqIFRlc3RzIFNwZWNpZmljYXRpb24gb2YgQ29uZmlndXJhdGlv\nbi4KICogCiAqIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICogCiAqLwpw\ndWJsaWMgY2xhc3MgVGVzdFNwZWNpZmljYXRpb25Db25maWd1cmF0aW9uIGV4\ndGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0U3BlY2lmaWNhdGlvbklzU2V0KCkgewogICAgICAgIFNwZWNpZmlj\nYXRpb24gc3BlYyA9IGdldFNwZWNpZmNhdGlvbigpOwogICAgICAgIGFzc2Vy\ndE5vdE51bGwoc3BlYyk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RTcGVjaWZpY2F0aW9uSXNKUEEoKSB7CiAgICAgICAgU3BlY2lmaWNhdGlv\nbiBzcGVjID0gZ2V0U3BlY2lmY2F0aW9uKCk7CiAgICAgICAgYXNzZXJ0VHJ1\nZShzcGVjLmlzU2FtZSgiSlBBIikpOwogICAgICAgIGFzc2VydFRydWUoc3Bl\nYy5pc1NhbWUoImpwYSIpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFNwZWNpZmljYXRpb25WZXJzaW9uSXNKUEExKCkgewogICAgICAgIFNw\nZWNpZmljYXRpb24gc3BlYyA9IGdldFNwZWNpZmNhdGlvbigpOwogICAgICAg\nIGludCBtYWpvciA9IHNwZWMuZ2V0VmVyc2lvbigpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBtYWpvcik7CiAgICAgICAgYXNzZXJ0VHJ1ZShzcGVjLmlz\nU2FtZSgiSlBBIikpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTcGVj\naWZpY2F0aW9uVmVyc2lvbklzSlBBMigpIHsKICAgICAgICAKICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mMSA9IG51bGw7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgIGVtZjEgPSAKICAgICAgICAgICAgKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSlPcGVuSlBBUGVyc2lzdGVu\nY2UuCiAgICAgICAgICAgIGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KCJw\nZXJzaXN0ZW5jZTJfMCIsCiAgICAgICAgICAgICJvcmcvYXBhY2hlL29wZW5q\ncGEvY29uZi9NRVRBLUlORi8iICsKICAgICAgICAgICAgInBlcnNpc3RlbmNl\nLTJfMC1jb25maWcueG1sIik7CgogICAgICAgICAgICBTcGVjaWZpY2F0aW9u\nIHNwZWMgPSBlbWYxLmdldENvbmZpZ3VyYXRpb24oKS5nZXRTcGVjaWZpY2F0\naW9uSW5zdGFuY2UoKTsKICAgICAgICAgICAgaW50IG1ham9yID0gc3BlYy5n\nZXRWZXJzaW9uKCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygyLCBtYWpv\ncik7CiAgICAgICAgICAgIGFzc2VydFRydWUoc3BlYy5pc1NhbWUoIkpQQSIp\nKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBpZiAoZW1mMSAh\nPSBudWxsKSB7CiAgICAgICAgICAgICAgICBlbWYxLmNsb3NlKCk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndExvd2VyVmVyc2lvbkNhbkJlU2V0KCkgewogICAgICAgIHN1cGVyLnNldFVw\nKCJvcGVuanBhLlNwZWNpZmljYXRpb24iLCAiSlBBIDEuMCIpOwogICAgICAg\nIFNwZWNpZmljYXRpb24gc3BlYyA9IGdldFNwZWNpZmNhdGlvbigpOwogICAg\nICAgIAogICAgICAgIGFzc2VydE5vdE51bGwoc3BlYyk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIHNwZWMuZ2V0VmVyc2lvbigpKTsKICAgIH0KICAgIAog\nICAgLyoKICAgICAqIFNsaWdodCBjaGFuZ2UgZm9yIDIuMCwgaW4gdGhhdCB0\naGUgZ2Vyb25pbW8gc3BlYyBkb2VzIG5vdCByZXRocm93CiAgICAgKiBhbGwg\nZXhjZXB0aW9ucyB3cmFwcGVkIGFzIGEgUGVyc2lzdGVuY2VFeGNlcHRpb24K\nICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdEhpZ2hlclZlcnNpb25DYW5O\nb3RCZVNldCgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBzdXBlci5z\nZXRVcCgib3BlbmpwYS5TcGVjaWZpY2F0aW9uIiwgImpwYSAzLjAiLCAKICAg\nICAgICAgICAgICAgICJvcGVuanBhLkxvZyIsICJEZWZhdWx0TGV2ZWw9V0FS\nTiIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCB0byBmYWlsIHdpdGgg\naGlnaGVyIFNwZWMgdmVyc2lvbiIpOwogICAgICAgIH0gY2F0Y2ggKElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbiBleCkgewogICAgICAgICAgICAvLyBwcmlv\nciBiZWhhdmlvciAtIHNwZWMgYXBpIHJldHVybmVkIHJ1bnRpbWUgZXhjZXB0\naW9ucyBhcy1pcwogICAgICAgICAgICBlbWYuZ2V0Q29uZmlndXJhdGlvbigp\nLmdldExvZygiVGVzdHMiKS50cmFjZSgKICAgICAgICAgICAgICAgICJDYXVn\naHQgZXhwZWN0ZWQgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uID0gIiArIGV4\nKTsKICAgICAgICB9IGNhdGNoIChQZXJzaXN0ZW5jZUV4Y2VwdGlvbiBwZSkg\newogICAgICAgICAgICAvLyBuZXcgMi4wIGJlaGF2aW9yIC0gR2Vyb25pbW8g\nc3BlYyBhcGkgd3JhcHMgZXhjZXB0aW9ucyBhbmQgdHJpZXMgYWxsIHByb3Zp\nZGVycwogICAgICAgICAgICBlbWYuZ2V0Q29uZmlndXJhdGlvbigpLmdldExv\nZygiVGVzdHMiKS50cmFjZSgKICAgICAgICAgICAgICAgICJDYXVnaHQgZXhw\nZWN0ZWQgUGVyc2lzdGVuY2VFeGNlcHRpb24gPSAiICsgcGUpOwogICAgICAg\nIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdERpZmZlcmVudFNw\nZWNDYW5CZVNldCgpIHsKICAgICAgICBzdXBlci5zZXRVcCgib3BlbmpwYS5T\ncGVjaWZpY2F0aW9uIiwgImpkbyAzLjAiKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgdGVzdFNwZWNDYW5CZVNldFRvTnVsbFN0cmluZygpIHsKICAg\nICAgICBTcGVjaWZpY2F0aW9uIHNwZWMgPSBnZXRTcGVjaWZjYXRpb24oKTsK\nICAgICAgICBhc3NlcnROb3ROdWxsKHNwZWMpOwogICAgICAgIGVtZi5nZXRD\nb25maWd1cmF0aW9uKCkuc2V0U3BlY2lmaWNhdGlvbigoU3RyaW5nKW51bGwp\nOwogICAgICAgIGFzc2VydE51bGwoZ2V0U3BlY2lmY2F0aW9uKCkpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3BlY0NhbkJlU2V0VG9OdWxs\nU3BlY2lmaWNhdGlvbigpIHsKICAgICAgICBTcGVjaWZpY2F0aW9uIHNwZWMg\nPSBnZXRTcGVjaWZjYXRpb24oKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHNw\nZWMpOwogICAgICAgIGVtZi5nZXRDb25maWd1cmF0aW9uKCkuc2V0U3BlY2lm\naWNhdGlvbigoU3BlY2lmaWNhdGlvbiludWxsKTsKICAgICAgICBhc3NlcnRO\ndWxsKGdldFNwZWNpZmNhdGlvbigpKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIFNwZWNpZmljYXRpb24gZ2V0U3BlY2lmY2F0aW9uKCkgewogICAgICAgIHJl\ndHVybiBlbWYuZ2V0Q29uZmlndXJhdGlvbigpLmdldFNwZWNpZmljYXRpb25J\nbnN0YW5jZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

