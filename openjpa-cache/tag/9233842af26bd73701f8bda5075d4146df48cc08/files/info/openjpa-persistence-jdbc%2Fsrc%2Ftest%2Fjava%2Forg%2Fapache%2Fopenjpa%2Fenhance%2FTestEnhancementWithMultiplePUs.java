{"sha":"40f39bc9f28afc9bfcea8ad64cc0e27fffa6297c","node_id":"MDQ6QmxvYjIwNjM2NDo0MGYzOWJjOWYyOGFmYzliZmNlYThhZDY0Y2MwZTI3ZmZmYTYyOTdj","size":6438,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/40f39bc9f28afc9bfcea8ad64cc0e27fffa6297c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlOwoKaW1wb3J0IGphdmEu\naW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0Nv\nbnRyb2xsZXI7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQg\namF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNv\nbmZpZ3VyYXRpb25JbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkJ5dGVjb2RlV3JpdGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLk9wdGlvbnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0YVJlcG9zaXRvcnk7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5BYnN0cmFj\ndENhY2hlZEVNRlRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLnRlc3QuUGVyc2lzdGVuY2VUZXN0Q2FzZTsKaW1wb3J0\nIHNlcnAuYnl0ZWNvZGUuQkNDbGFzczsKaW1wb3J0IHNlcnAuYnl0ZWNvZGUu\nUHJvamVjdDsKCnB1YmxpYyBjbGFzcyBUZXN0RW5oYW5jZW1lbnRXaXRoTXVs\ndGlwbGVQVXMKICAgIGV4dGVuZHMgQWJzdHJhY3RDYWNoZWRFTUZUZXN0Q2Fz\nZSB7CgogICAgcHVibGljIHZvaWQgdGVzdEV4cGxpY2l0RW5oYW5jZW1lbnRX\naXRoQ2xhc3NOb3RJbkZpcnN0UFUoKQogICAgICAgIHRocm93cyBDbGFzc05v\ndEZvdW5kRXhjZXB0aW9uIHsKICAgICAgICBPcGVuSlBBQ29uZmlndXJhdGlv\nbiBjb25mID0gbmV3IE9wZW5KUEFDb25maWd1cmF0aW9uSW1wbCgpOwogICAg\nICAgIENvbmZpZ3VyYXRpb25zLnBvcHVsYXRlQ29uZmlndXJhdGlvbihjb25m\nLCBuZXcgT3B0aW9ucygpKTsKICAgICAgICBNZXRhRGF0YVJlcG9zaXRvcnkg\ncmVwb3MgPSBjb25mLmdldE1ldGFEYXRhUmVwb3NpdG9yeUluc3RhbmNlKCk7\nCiAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVyID0gQWNjZXNzQ29udHJvbGxl\ncgogICAgICAgICAgICAuZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyLm5l\nd1RlbXBvcmFyeUNsYXNzTG9hZGVyQWN0aW9uKAogICAgICAgICAgICAgICAg\nZ2V0Q2xhc3MoKS5nZXRDbGFzc0xvYWRlcigpKSk7CiAgICAgICAgUHJvamVj\ndCBwcm9qZWN0ID0gbmV3IFByb2plY3QoKTsKCiAgICAgICAgU3RyaW5nIGNs\nYXNzTmFtZSA9CiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEuZW5o\nYW5jZS5VbmVuaGFuY2VkQm9vdHN0cmFwSW5zdGFuY2UiOwogICAgICAgIEJD\nQ2xhc3MgYmMgPSBhc3NlcnROb3RQQyhsb2FkZXIsIHByb2plY3QsIGNsYXNz\nTmFtZSk7CgogICAgICAgIFBDRW5oYW5jZXIgZW5oYW5jZXIgPSBuZXcgUENF\nbmhhbmNlcihjb25mLCBiYywgcmVwb3MsIGxvYWRlcik7CgogICAgICAgIGFz\nc2VydEVxdWFscyhQQ0VuaGFuY2VyLkVOSEFOQ0VfUEMsIGVuaGFuY2VyLnJ1\nbigpKTsKICAgICAgICBhc3NlcnRUcnVlKEFycmF5cy5hc0xpc3QoYmMuZ2V0\nSW50ZXJmYWNlTmFtZXMoKSkuY29udGFpbnMoCiAgICAgICAgICAgIFBlcnNp\nc3RlbmNlQ2FwYWJsZS5jbGFzcy5nZXROYW1lKCkpKTsKICAgIH0KCiAgICBw\ncml2YXRlIEJDQ2xhc3MgYXNzZXJ0Tm90UEMoQ2xhc3NMb2FkZXIgbG9hZGVy\nLCBQcm9qZWN0IHByb2plY3QsCiAgICAgICAgU3RyaW5nIGNsYXNzTmFtZSkg\newogICAgICAgIEJDQ2xhc3MgYmMgPSBwcm9qZWN0LmxvYWRDbGFzcyhjbGFz\nc05hbWUsIGxvYWRlcik7CiAgICAgICAgYXNzZXJ0RmFsc2UoY2xhc3NOYW1l\nICsgIiBtdXN0IG5vdCBiZSBlbmhhbmNlZCBhbHJlYWR5OyBpdCB3YXMuIiwK\nICAgICAgICAgICAgQXJyYXlzLmFzTGlzdChiYy5nZXRJbnRlcmZhY2VOYW1l\ncygpKS5jb250YWlucygKICAgICAgICAgICAgICAgIFBlcnNpc3RlbmNlQ2Fw\nYWJsZS5jbGFzcy5nZXROYW1lKCkpKTsKICAgICAgICByZXR1cm4gYmM7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVuaGFuY2VtZW50T2ZTZWNvbmRQ\nVVdpdGhDbGFzc05vdEluRmlyc3RQVSgpCiAgICAgICAgdGhyb3dzIElPRXhj\nZXB0aW9uIHsKICAgICAgICBPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mID0g\nbmV3IE9wZW5KUEFDb25maWd1cmF0aW9uSW1wbCgpOwogICAgICAgIE9wdGlv\nbnMgb3B0cyA9IG5ldyBPcHRpb25zKCk7CiAgICAgICAgb3B0cy5zZXRQcm9w\nZXJ0eSgicCIsCiAgICAgICAgICAgICJNRVRBLUlORi9wZXJzaXN0ZW5jZS54\nbWwjc2Vjb25kLXBlcnNpc3RlbmNlLXVuaXQiKTsKICAgICAgICBDb25maWd1\ncmF0aW9ucy5wb3B1bGF0ZUNvbmZpZ3VyYXRpb24oY29uZiwgb3B0cyk7CiAg\nICAgICAgTWV0YURhdGFSZXBvc2l0b3J5IHJlcG9zID0gY29uZi5nZXRNZXRh\nRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpOwogICAgICAgIENsYXNzTG9hZGVy\nIGxvYWRlciA9IEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgLmRvUHJp\ndmlsZWdlZChKMkRvUHJpdkhlbHBlci5uZXdUZW1wb3JhcnlDbGFzc0xvYWRl\nckFjdGlvbigKICAgICAgICAgICAgICAgIGdldENsYXNzKCkuZ2V0Q2xhc3NM\nb2FkZXIoKSkpOwogICAgICAgIFByb2plY3QgcHJvamVjdCA9IG5ldyBQcm9q\nZWN0KCk7CgogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBjbGFzcyBp\ncyBub3QgYWxyZWFkeSBlbmhhbmNlZCBmb3Igc29tZSByZWFzb24KICAgICAg\nICBTdHJpbmcgY2xhc3NOYW1lID0KICAgICAgICAgICAgIm9yZy5hcGFjaGUu\nb3BlbmpwYS5lbmhhbmNlLlVuZW5oYW5jZWRCb290c3RyYXBJbnN0YW5jZSI7\nCiAgICAgICAgQkNDbGFzcyBiYyA9IGFzc2VydE5vdFBDKGxvYWRlciwgcHJv\namVjdCwgY2xhc3NOYW1lKTsKCiAgICAgICAgLy8gYnVpbGQgdXAgYSB3cml0\nZXIgdGhhdCBqdXN0IHN0b3JlcyB0byBhIGxpc3Qgc28gdGhhdCB3ZSBkb24n\ndAogICAgICAgIC8vIG11dGF0ZSB0aGUgZGlzay4KICAgICAgICBmaW5hbCBM\naXN0PFN0cmluZz4gd3JpdHRlbiA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigp\nOwogICAgICAgIEJ5dGVjb2RlV3JpdGVyIHdyaXRlciA9IG5ldyBCeXRlY29k\nZVdyaXRlcigpIHsKCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHdyaXRlKEJD\nQ2xhc3MgdHlwZSkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nICAgIGFzc2VydFRydWUoQXJyYXlzLmFzTGlzdCh0eXBlLmdldEludGVyZmFj\nZU5hbWVzKCkpLmNvbnRhaW5zKAogICAgICAgICAgICAgICAgICAgIFBlcnNp\nc3RlbmNlQ2FwYWJsZS5jbGFzcy5nZXROYW1lKCkpKTsKICAgICAgICAgICAg\nICAgIHdyaXR0ZW4uYWRkKHR5cGUuZ2V0TmFtZSgpKTsKICAgICAgICAgICAg\nfQogICAgICAgIH07CgogICAgICAgIFBDRW5oYW5jZXIucnVuKGNvbmYsIG51\nbGwsIG5ldyBQQ0VuaGFuY2VyLkZsYWdzKCksIHJlcG9zLCB3cml0ZXIsCiAg\nICAgICAgICAgIGxvYWRlcik7CgogICAgICAgIC8vIGVuc3VyZSB0aGF0IHdl\nIGRvbid0IGF0dGVtcHQgdG8gcHJvY2VzcyBjbGFzc2VzIGxpc3RlZCBpbiBv\ndGhlciBQVXMKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgd3JpdHRlbi5zaXpl\nKCkpOwoKICAgICAgICAvLyBlbnN1cmUgdGhhdCB3ZSBkbyBwcm9jZXNzIHRo\nZSBjbGFzc2VzIGxpc3RlZCBpbiB0aGUgUFUKICAgICAgICBhc3NlcnRUcnVl\nKHdyaXR0ZW4uY29udGFpbnMoY2xhc3NOYW1lKSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEVuaGFuY2VtZW50T2ZBbGxQVXNXaXRoaW5BUmVzb3Vy\nY2UoKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgT3Bl\nbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBPcGVuSlBBQ29uZmlndXJh\ndGlvbkltcGwoKTsKICAgICAgICBPcHRpb25zIG9wdHMgPSBuZXcgT3B0aW9u\ncygpOwogICAgICAgIG9wdHMuc2V0UHJvcGVydHkoInAiLCAiTUVUQS1JTkYv\ncGVyc2lzdGVuY2UueG1sIik7CiAgICAgICAgQ29uZmlndXJhdGlvbnMucG9w\ndWxhdGVDb25maWd1cmF0aW9uKGNvbmYsIG9wdHMpOwogICAgICAgIE1ldGFE\nYXRhUmVwb3NpdG9yeSByZXBvcyA9IGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0\nb3J5SW5zdGFuY2UoKTsKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIgPSBB\nY2Nlc3NDb250cm9sbGVyCiAgICAgICAgICAgIC5kb1ByaXZpbGVnZWQoSjJE\nb1ByaXZIZWxwZXIubmV3VGVtcG9yYXJ5Q2xhc3NMb2FkZXJBY3Rpb24oCiAg\nICAgICAgICAgICAgICBnZXRDbGFzcygpLmdldENsYXNzTG9hZGVyKCkpKTsK\nICAgICAgICBQcm9qZWN0IHByb2plY3QgPSBuZXcgUHJvamVjdCgpOwoKICAg\nICAgICAvLyBtYWtlIHN1cmUgdGhhdCB0aGUgY2xhc3NlcyBpcyBub3QgYWxy\nZWFkeSBlbmhhbmNlZCBmb3Igc29tZSByZWFzb24KICAgICAgICBhc3NlcnRO\nb3RQQyhsb2FkZXIsIHByb2plY3QsCiAgICAgICAgICAgICJvcmcuYXBhY2hl\nLm9wZW5qcGEuZW5oYW5jZS5VbmVuaGFuY2VkQm9vdHN0cmFwSW5zdGFuY2Ui\nKTsKICAgICAgICBhc3NlcnROb3RQQyhsb2FkZXIsIHByb2plY3QsCiAgICAg\nICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5VbmVuaGFuY2Vk\nQm9vdHN0cmFwSW5zdGFuY2UyIik7CgogICAgICAgIC8vIGJ1aWxkIHVwIGEg\nd3JpdGVyIHRoYXQganVzdCBzdG9yZXMgdG8gYSBsaXN0IHNvIHRoYXQgd2Ug\nZG9uJ3QKICAgICAgICAvLyBtdXRhdGUgdGhlIGRpc2suCiAgICAgICAgZmlu\nYWwgTGlzdDxTdHJpbmc+IHdyaXR0ZW4gPSBuZXcgQXJyYXlMaXN0PFN0cmlu\nZz4oKTsKICAgICAgICBCeXRlY29kZVdyaXRlciB3cml0ZXIgPSBuZXcgQnl0\nZWNvZGVXcml0ZXIoKSB7CgogICAgICAgICAgICBwdWJsaWMgdm9pZCB3cml0\nZShCQ0NsYXNzIHR5cGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAg\nICAgICAgICBhc3NlcnRUcnVlKEFycmF5cy5hc0xpc3QodHlwZS5nZXRJbnRl\ncmZhY2VOYW1lcygpKS5jb250YWlucygKICAgICAgICAgICAgICAgICAgICBQ\nZXJzaXN0ZW5jZUNhcGFibGUuY2xhc3MuZ2V0TmFtZSgpKSk7CiAgICAgICAg\nICAgICAgICB3cml0dGVuLmFkZCh0eXBlLmdldE5hbWUoKSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9OwoKICAgICAgICBvcHRzID0gbmV3IE9wdGlvbnMo\nKTsKICAgICAgICBvcHRzLnB1dChQQ0VuaGFuY2VyLmNsYXNzLmdldE5hbWUo\nKSArICIjYnl0ZWNvZGVXcml0ZXIiLCB3cml0ZXIpOwogICAgICAgIFBDRW5o\nYW5jZXIucnVuKG51bGwsIG9wdHMpOwoKICAgICAgICAvLyBlbnN1cmUgdGhh\ndCB3ZSBkbyBwcm9jZXNzIHRoZSBjbGFzc2VzIGxpc3RlZCBpbiB0aGUgUFVz\nCiAgICAgICAgYXNzZXJ0VHJ1ZSh3cml0dGVuLmNvbnRhaW5zKAogICAgICAg\nICAgICAib3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2UuVW5lbmhhbmNlZEJv\nb3RzdHJhcEluc3RhbmNlIikpOwogICAgICAgIGFzc2VydFRydWUod3JpdHRl\nbi5jb250YWlucygKICAgICAgICAgICAgIm9yZy5hcGFjaGUub3BlbmpwYS5l\nbmhhbmNlLlVuZW5oYW5jZWRCb290c3RyYXBJbnN0YW5jZTIiKSk7CiAgICB9\nCn0K\n","encoding":"base64"}

