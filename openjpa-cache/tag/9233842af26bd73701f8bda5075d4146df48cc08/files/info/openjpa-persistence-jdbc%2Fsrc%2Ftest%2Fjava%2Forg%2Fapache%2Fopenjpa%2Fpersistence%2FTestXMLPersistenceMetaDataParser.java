{"sha":"97ccfcc1c5dbbcb7f3ab20729ffc8d344fb81405","node_id":"MDQ6QmxvYjIwNjM2NDo5N2NjZmNjMWM1ZGJiY2I3ZjNhYjIwNzI5ZmZjOGQzNDRmYjgxNDA1","size":6724,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/97ccfcc1c5dbbcb7f3ab20729ffc8d344fb81405","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZTsKCmltcG9ydCBq\nYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkFycmF5czsK\naW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5M\naXN0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGlu\nZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuRmllbGRN\nYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLnRlc3QuU1FMTGlzdGVuZXJUZXN0Q2FzZTsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLio7CgpwdWJsaWMgY2xhc3MgVGVzdFhNTFBlcnNpc3RlbmNlTWV0\nYURhdGFQYXJzZXIgZXh0ZW5kcyBTUUxMaXN0ZW5lclRlc3RDYXNlIHsKCiAg\nICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzdXBlci5zZXRVcChD\nTEVBUl9UQUJMRVMsIFNlY3VyaXR5MS5jbGFzcywgQ291bnRyeTEuY2xhc3Ms\nCiAgICAgICAgICAgIFNlY3VyaXR5LmNsYXNzLCBDb3VudHJ5LmNsYXNzKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFBlcnNpc3RlbmNlVW5p\ndE5hbWUoKSB7CiAgICAgICAgcmV0dXJuICJ0ZXN0LXBlcnNpc3RlbmNlLXht\nbC1vcm0iOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNYW55VG9PbmVM\nYXp5RmV0Y2goKSB7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAgICAvLyBpbml0aWFsaXpl\nIG9iamVjdHMKICAgICAgICBsb25nIGFJX3NpZCA9IDE0ODAwNzI0NDsKICAg\nICAgICBsb25nIGFVU19zaWQgPSAxOwoKICAgICAgICBTZWN1cml0eTEgYUlf\nc2VjdXJpdHkgPSBuZXcgU2VjdXJpdHkxKGFJX3NpZCwgbmV3IEVtYmVkKCJY\nWVoiKSk7CiAgICAgICAgQ291bnRyeTEgYVVTX2NvdW50cnkgPSBuZXcgQ291\nbnRyeTEoYVVTX3NpZCwgIlVTQSIpOwogICAgICAgIGFJX3NlY3VyaXR5LnNl\ndENvdW50cnkxKGFVU19jb3VudHJ5KTsKCiAgICAgICAgU2VjdXJpdHkgYUlf\nc2VjdXJpdHlBbm4gPSBuZXcgU2VjdXJpdHkoYUlfc2lkLCBuZXcgRW1iZWQo\nIlhZWiIpKTsKICAgICAgICBDb3VudHJ5IGFVU19jb3VudHJ5QW5uID0gbmV3\nIENvdW50cnkoYVVTX3NpZCwgIlVTQSIpOwogICAgICAgIGFJX3NlY3VyaXR5\nQW5uLnNldENvdW50cnkoYVVTX2NvdW50cnlBbm4pOwoKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChh\nSV9zZWN1cml0eSk7CiAgICAgICAgZW0ucGVyc2lzdChhVVNfY291bnRyeSk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICBlbS5jbGVhcigpOwoKICAgICAgICBBcnJheUxpc3Q8U3RyaW5nPiBYTUxz\ncWwgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsKICAgICAgICBBcnJheUxp\nc3Q8U3RyaW5nPiBBbm5zcWwgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTsK\nCiAgICAgICAgc3VwZXIuc3FsID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7\nCiAgICAgICAgYVVTX2NvdW50cnkgPSBlbS5maW5kKENvdW50cnkxLmNsYXNz\nLCBhVVNfc2lkKTsKICAgICAgICBJdGVyYXRvciBpdHIgPSBzdXBlci5zcWwu\naXRlcmF0b3IoKTsKICAgICAgICB3aGlsZSAoaXRyLmhhc05leHQoKSkgewog\nICAgICAgICAgICBYTUxzcWwuYWRkKChTdHJpbmcpIGl0ci5uZXh0KCkpOwog\nICAgICAgIH0KICAgICAgICBzdXBlci5zcWwuY2xlYXIoKTsKCiAgICAgICAg\nc3VwZXIuc3FsID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7CiAgICAgICAg\nYVVTX2NvdW50cnlBbm4gPSBlbS5maW5kKENvdW50cnkuY2xhc3MsIGFVU19z\naWQpOwogICAgICAgIGl0ciA9IHN1cGVyLnNxbC5pdGVyYXRvcigpOwogICAg\nICAgIHdoaWxlIChpdHIuaGFzTmV4dCgpKSB7CiAgICAgICAgICAgIEFubnNx\nbC5hZGQoKFN0cmluZykgaXRyLm5leHQoKSk7CiAgICAgICAgfQogICAgICAg\nIHN1cGVyLnNxbC5jbGVhcigpOwogICAgICAgIGNvbXBhcmVzZWxlY3RTUUxz\nKEFubnNxbCwgWE1Mc3FsKTsKICAgICAgICBBbm5zcWwuY2xlYXIoKTsKICAg\nICAgICBYTUxzcWwuY2xlYXIoKTsKCiAgICAgICAgc3VwZXIuc3FsID0gbmV3\nIEFycmF5TGlzdDxTdHJpbmc+KCk7CiAgICAgICAgYUlfc2VjdXJpdHkgPSBl\nbS5maW5kKFNlY3VyaXR5MS5jbGFzcywgYUlfc2lkKTsKICAgICAgICBpdHIg\nPSBzdXBlci5zcWwuaXRlcmF0b3IoKTsKICAgICAgICB3aGlsZSAoaXRyLmhh\nc05leHQoKSkgewogICAgICAgICAgICBYTUxzcWwuYWRkKChTdHJpbmcpIGl0\nci5uZXh0KCkpOwogICAgICAgIH0KICAgICAgICBzdXBlci5zcWwuY2xlYXIo\nKTsKCiAgICAgICAgc3VwZXIuc3FsID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+\nKCk7CiAgICAgICAgYUlfc2VjdXJpdHlBbm4gPSBlbS5maW5kKFNlY3VyaXR5\nLmNsYXNzLCBhSV9zaWQpOwogICAgICAgIGl0ciA9IHN1cGVyLnNxbC5pdGVy\nYXRvcigpOwogICAgICAgIHdoaWxlIChpdHIuaGFzTmV4dCgpKSB7CiAgICAg\nICAgICAgIEFubnNxbC5hZGQoKFN0cmluZykgaXRyLm5leHQoKSk7CiAgICAg\nICAgfQogICAgICAgIHN1cGVyLnNxbC5jbGVhcigpOwogICAgICAgIGNvbXBh\ncmVzZWxlY3RTUUxzKEFubnNxbCwgWE1Mc3FsKTsKICAgICAgICBBbm5zcWwu\nY2xlYXIoKTsKICAgICAgICBYTUxzcWwuY2xlYXIoKTsKCiAgICAgICAgc3Vw\nZXIuc3FsID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7CiAgICAgICAgQ291\nbnRyeTEgYVVTX2NvdW50cnkxID0gYUlfc2VjdXJpdHkuZ2V0Q291bnRyeTEo\nKTsKICAgICAgICBpdHIgPSBzdXBlci5zcWwuaXRlcmF0b3IoKTsKICAgICAg\nICB3aGlsZSAoaXRyLmhhc05leHQoKSkgewogICAgICAgICAgICBYTUxzcWwu\nYWRkKChTdHJpbmcpIGl0ci5uZXh0KCkpOwogICAgICAgIH0KICAgICAgICBz\ndXBlci5zcWwuY2xlYXIoKTsKCiAgICAgICAgc3VwZXIuc3FsID0gbmV3IEFy\ncmF5TGlzdDxTdHJpbmc+KCk7CiAgICAgICAgQ291bnRyeSBhVVNfY291bnRy\neTIgPSBhSV9zZWN1cml0eUFubi5nZXRDb3VudHJ5KCk7CiAgICAgICAgaXRy\nID0gc3VwZXIuc3FsLml0ZXJhdG9yKCk7CiAgICAgICAgd2hpbGUgKGl0ci5o\nYXNOZXh0KCkpIHsKICAgICAgICAgICAgQW5uc3FsLmFkZCgoU3RyaW5nKSBp\ndHIubmV4dCgpKTsKICAgICAgICB9CiAgICAgICAgc3VwZXIuc3FsLmNsZWFy\nKCk7CiAgICAgICAgY29tcGFyZXNlbGVjdFNRTHMoQW5uc3FsLCBYTUxzcWwp\nOwogICAgICAgIEFubnNxbC5jbGVhcigpOwogICAgICAgIFhNTHNxbC5jbGVh\ncigpOwoKICAgICAgICAvLyBDbG9zZQogICAgICAgIGVtLmNsb3NlKCk7Cgog\nICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWFueVRvT25lRWFnZXJG\nZXRjaCgpIHsKICAgICAgICAvLyBpbml0aWFsaXplIG9iamVjdHMKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKCiAgICAgICAgbG9uZyBhSV9zaWQgPSAxNDgwMDcyNDU7CiAgICAgICAg\nbG9uZyBhVVNfc2lkID0gMjsKCiAgICAgICAgU2VjdXJpdHkxIGFJX3NlY3Vy\naXR5ID0gbmV3IFNlY3VyaXR5MShhSV9zaWQsIG5ldyBFbWJlZCgiWFlaIikp\nOwogICAgICAgIENvdW50cnkxIGFVU19jb3VudHJ5ID0gbmV3IENvdW50cnkx\nKGFVU19zaWQsICJVU0EiKTsKICAgICAgICBhSV9zZWN1cml0eS5zZXRDb3Vu\ndHJ5MShhVVNfY291bnRyeSk7CiAgICAgICAgYUlfc2VjdXJpdHkuc2V0Q291\nbnRyeUVhZ2VyKGFVU19jb3VudHJ5KTsKICAgICAgICAKICAgICAgICBTZWN1\ncml0eSBhSV9zZWN1cml0eUFubiA9IG5ldyBTZWN1cml0eShhSV9zaWQsIG5l\ndyBFbWJlZCgiWFlaIikpOwogICAgICAgIENvdW50cnkgYVVTX2NvdW50cnlB\nbm4gPSBuZXcgQ291bnRyeShhVVNfc2lkLCAiVVNBIik7CiAgICAgICAgYUlf\nc2VjdXJpdHlBbm4uc2V0Q291bnRyeShhVVNfY291bnRyeUFubik7CiAgICAg\nICAgYUlfc2VjdXJpdHlBbm4uc2V0Q291bnRyeUVhZ2VyKGFVU19jb3VudHJ5\nQW5uKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIGVtLnBlcnNpc3QoYUlfc2VjdXJpdHkpOwogICAgICAgIGVtLnBl\ncnNpc3QoYVVTX2NvdW50cnkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIoKTsKCiAgICAgICAgYUlf\nc2VjdXJpdHkgPSBlbS5maW5kKFNlY3VyaXR5MS5jbGFzcywgYUlfc2lkKTsK\nICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIENvdW50cnkxIGNvdW50cnlF\nYWdlciA9IGFJX3NlY3VyaXR5LmdldENvdW50cnlFYWdlcigpOyAKICAgICAg\nICBhc3NlcnROb3ROdWxsKGNvdW50cnlFYWdlcik7CiAgICAgICAgCiAgICAg\nICAgYUlfc2VjdXJpdHlBbm4gPSBlbS5maW5kKFNlY3VyaXR5LmNsYXNzLCBh\nSV9zaWQpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgQ291bnRyeSBj\nb3VudHJ5RWFnZXJBbm4gPSBhSV9zZWN1cml0eUFubi5nZXRDb3VudHJ5RWFn\nZXIoKTsgCiAgICAgICAgYXNzZXJ0Tm90TnVsbChjb3VudHJ5RWFnZXJBbm4p\nOwogICAgICAgIAogICAgICAgIC8vIENsb3NlCiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgICAgICAKICAgIH0KICAgIAoKICAgIHByaXZhdGUgdm9pZCBwcmlu\ndEFycmF5TGlzdChBcnJheUxpc3QgYUxpc3QpIHsKICAgICAgICBJdGVyYXRv\nciBpdHIgPSBhTGlzdC5pdGVyYXRvcigpOwogICAgICAgIHdoaWxlIChpdHIu\naGFzTmV4dCgpKSB7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihp\ndHIubmV4dCgpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoKICAgICAqIFRo\naXMgbWV0aG9kIGlzIG5vdCBhIGdlbnJhbGl6ZWQgbWV0aG9kIHRoYXQgY2Fu\nIGNvbXBhcmUgYW55IHNlbGVjdAogICAgICogc3RhdGVtZW50LiBJdCBpcyBj\ndXN0b21pemVkIG9ubHkgZm9yIHRoaXMgdGVzdGNhc2UuCiAgICAgKi8KICAg\nIHByaXZhdGUgdm9pZCBjb21wYXJlc2VsZWN0U1FMcyhMaXN0PFN0cmluZz4g\nYSwgTGlzdDxTdHJpbmc+IGIpIHsKICAgICAgICBhc3NlcnRFcXVhbHMoYS5z\naXplKCksIGIuc2l6ZSgpKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIGEuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgLy8gYXNzZXJ0RXF1YWxz\nKGEuZ2V0KGkpLCBiLmdldChpKSk7CiAgICAgICAgICAgIFN0cmluZyBhU3Ry\nID0gYS5nZXQoaSk7CiAgICAgICAgICAgIFN0cmluZyBiU3RyID0gYi5nZXQo\naSk7CiAgICAgICAgICAgIFN0cmluZ1tdIGFBcnIgPQogICAgICAgICAgICAg\nICAgKGFTdHIuc3Vic3RyaW5nKGFTdHIuaW5kZXhPZigiU0VMRUNUICIpICsg\nNywgYVN0cgogICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKCIgRlJPTSAi\nKSkpLnNwbGl0KCIsIik7CiAgICAgICAgICAgIFN0cmluZ1tdIGJBcnIgPQog\nICAgICAgICAgICAgICAgKGJTdHIuc3Vic3RyaW5nKGJTdHIuaW5kZXhPZigi\nU0VMRUNUICIpICsgNywgYlN0cgogICAgICAgICAgICAgICAgICAgIC5pbmRl\neE9mKCIgRlJPTSAiKSkpLnNwbGl0KCIsIik7CiAgICAgICAgICAgIEFycmF5\ncy5zb3J0KGFBcnIpOwogICAgICAgICAgICBBcnJheXMuc29ydChiQXJyKTsK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShBcnJheXMuZXF1YWxzKGFBcnIsIGJB\ncnIpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGFTdHIuc3Vic3RyaW5n\nKGFTdHIuaW5kZXhPZigiRlJPTSAiKSArIDUpLCBiU3RyCiAgICAgICAgICAg\nICAgICAuc3Vic3RyaW5nKGFTdHIuaW5kZXhPZigiRlJPTSAiKSArIDUpKTsK\nICAgICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

