{"sha":"97b558cdd9cbb56896fc60c4ab17d776da57f145","node_id":"MDQ6QmxvYjIwNjM2NDo5N2I1NThjZGQ5Y2JiNTY4OTZmYzYwYzRhYjE3ZDc3NmRhNTdmMTQ1","size":29993,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/97b558cdd9cbb56896fc60c4ab17d776da57f145","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5hY2Nlc3MueG1s\nOwoKaW1wb3J0IGphdmEudXRpbC5EYXRlOwoKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLlF1ZXJ5OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5Bcmd1bWVudEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rv\ncnlTUEk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nT3BlbkpQQUVudGl0eU1hbmFnZXJTUEk7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuQWxsb3dGYWls\ndXJlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRl\nc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdFhNTEV4\ncGxpY2l0QWNjZXNzIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewogICAg\nICAgIAogICAgcHVibGljIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICBzdXBlci5zZXRVcCgpOwogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAg\nIHN1cGVyLnRlYXJEb3duKCk7CiAgICB9CiAgICAKICAgIEBPdmVycmlkZQog\nICAgcHJvdGVjdGVkIFN0cmluZyBnZXRQZXJzaXN0ZW5jZVVuaXROYW1lKCkg\newogICAgICAgIHJldHVybiAiQWNjZXNzLTEiOwogICAgfQogICAgLyoqCiAg\nICAgKiBWYWxpZGF0ZXMgdGhlIHVzZSBvZiBmaWVsZCBsZXZlbCBhY2Nlc3Mg\nb24gYW4KICAgICAqIGVudGl0eSwgbWFwcGVkc3VwZXJjbGFzcywgYW5kIGVt\nYmVkZGFibGUgYXQgdGhlCiAgICAgKiBjbGFzcyBsZXZlbC4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgdGVzdENsYXNzU3BlY2lmaWVkRmllbGRBY2Nlc3Mo\nKSB7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAKICAgICAgICBYTUxG\naWVsZEFjY2VzcyBmYSA9IG5ldyBYTUxGaWVsZEFjY2VzcygpOwogICAgICAg\nIC8vIFNldCB0aGUgcGVyc2lzdGVudCBmaWVsZCB0aHJvdWdoIGEgbWlzbmFt\nZWQgc2V0dGVyICAgICAgICAgCiAgICAgICAgZmEuc2V0U3RyaW5nRmllbGQo\nIlhNTEZpZWxkQWNjZXNzIik7CiAgICAgICAgCiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QoZmEpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xlYXIoKTsKICAgICAgICAKICAgICAgICAvLyBUaGlzIHZhbHVlIG9m\nIGEgcGVyc2lzdGVudCBmaWVsZCB3YXMgc2V0IHVzaW5nIHRoZSBzZXR0ZXIK\nICAgICAgICAvLyBhYm92ZSwgYnV0IHRoaXMgcXVlcnkgd2lsbCB1c2UgdGhl\nIGZpZWxkIG5hbWUgdG8gdmVyaWZ5IHRoYXQKICAgICAgICAvLyBmaWVsZCBh\nY2Nlc3MgaXMgaW4gdXNlLgogICAgICAgIFF1ZXJ5IHFyeSA9IGVtLmNyZWF0\nZU5hbWVkUXVlcnkoIlhNTEZpZWxkQWNjZXNzLnF1ZXJ5Iik7CiAgICAgICAg\ncXJ5LnNldFBhcmFtZXRlcigiaWQiLCBmYS5nZXRJZCgpKTsKICAgICAgICBx\ncnkuc2V0UGFyYW1ldGVyKCJzdHJWYWwiLCAiWE1MRmllbGRBY2Nlc3MiKTsK\nICAgICAgICBYTUxGaWVsZEFjY2VzcyBmYTIgPSAoWE1MRmllbGRBY2Nlc3Mp\ncXJ5LmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2VydEVxdWFscyhm\nYS5nZXRJZCgpLCBmYTIuZ2V0SWQoKSk7CiAgICAgICAgCiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFZhbGlkYXRlcyB0aGUg\ndXNlIG9mIHByb3BlcnR5IGxldmVsIGFjY2VzcyBvbiBhbgogICAgICogZW50\naXR5LCBtYXBwZWRzdXBlcmNsYXNzLCBhbmQgZW1iZWRkYWJsZSBhdCB0aGUK\nICAgICAqIGNsYXNzIGxldmVsLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0\nZXN0Q2xhc3NTcGVjaWZpZWRQcm9wZXJ0eUFjY2VzcygpIHsKCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIAogICAgICAgIFhNTFByb3BBY2Nlc3MgcGEg\nPSBuZXcgWE1MUHJvcEFjY2VzcygpOwogICAgICAgIC8vIFNldCB0aGUgcGVy\nc2lzdGVudCBmaWVsZCB0aHJvdWdoIGEgbWlzbmFtZWQgc2V0dGVyICAgICAg\nICAgCiAgICAgICAgcGEuc2V0U3RyUHJvcCgiUHJvcGVydHlBY2Nlc3MiKTsK\nICAgICAgICAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7\nCiAgICAgICAgZW0ucGVyc2lzdChwYSk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAg\nIAogICAgICAgIC8vIFRoaXMgdmFsdWUgb2YgYSBwZXJzaXN0ZW50IGZpZWxk\nIHdhcyBzZXQgdXNpbmcgdGhlIHNldHRlcgogICAgICAgIC8vIGFib3ZlLCBi\ndXQgdGhpcyBxdWVyeSB3aWxsIHVzZSB0aGUgZmllbGQgbmFtZSB0byB2ZXJp\nZnkgdGhhdAogICAgICAgIC8vIGZpZWxkIGFjY2VzcyBpcyBpbiB1c2UuCiAg\nICAgICAgUXVlcnkgcXJ5ID0gZW0uY3JlYXRlTmFtZWRRdWVyeSgiWE1MUHJv\ncEFjY2Vzcy5xdWVyeSIpOwogICAgICAgIHFyeS5zZXRQYXJhbWV0ZXIoImlk\nIiwgcGEuZ2V0SWQoKSk7CiAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigic3Ry\nVmFsIiwgIlByb3BlcnR5QWNjZXNzIik7CiAgICAgICAgWE1MUHJvcEFjY2Vz\ncyBwYTIgPSAoWE1MUHJvcEFjY2VzcylxcnkuZ2V0U2luZ2xlUmVzdWx0KCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHBhLCBwYTIpOwogICAgICAgIAogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogVmFs\naWRhdGVzIHRoZSB1c2Ugb2YgZXhwbGljaXQgZmllbGQgYWNjZXNzIG9uIGFu\nIGVudGl0eSwgCiAgICAgKiBtYXBwZWRzdXBlcmNsYXNzLCBhbmQgZW1iZWRk\nYWJsZSB3aXRoIHByb3BlcnR5IGFjY2VzcwogICAgICogZGVmaW5lZCBhdCB0\naGUgY2xhc3MgbGV2ZWwgYW5kIGZpZWxkIGFjY2VzcyBkZWZpbmVkCiAgICAg\nKiBvbiBzcGVjaWZpYyBtZXRob2RzLiAKICAgICAqLyAgICAKICAgIAogICAg\ncHVibGljIHZvaWQgdGVzdENsYXNzU3BlY2lmaWVkTWl4ZWRTaW5nbGVQQ0Zp\nZWxkQWNjZXNzKCkgewoKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlclNQ\nSSBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgCiAg\nICAgICAgWE1MRGVmRmllbGRNaXhlZFByb3BBY2Nlc3MgZGZtcGEgPSBuZXcg\nWE1MRGVmRmllbGRNaXhlZFByb3BBY2Nlc3MoKTsKICAgICAgICAvLyBDYWxs\nIG5vbi1QQyBzZXR0ZXIKICAgICAgICBkZm1wYS5zZXRTdHJGaWVsZCgiTm9u\nUENTZXR0ZXIiKTsKICAgICAgICAvLyBDYWxsIHNldHRlciB3aXRoIHByb3Bl\ncnR5IGFjY2VzcwogICAgICAgIGRmbXBhLnNldFN0cmluZ0ZpZWxkKCJYTUxE\nRk1QQSIpOwogICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KGRmbXBhKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFy\nKCk7CiAgICAgICAgCiAgICAgICAgLy8gVGhpcyB2YWx1ZSBvZiBhIHBlcnNp\nc3RlbnQgcHJvcGVydHkgd2FzIHNldCB1c2luZyB0aGUgc2V0dGVyCiAgICAg\nICAgLy8gYWJvdmUsIGJ1dCB0aGlzIHF1ZXJ5IHdpbGwgdXNlIHRoZSBwcm9w\nZXJ0eSBuYW1lIHRvIHZlcmlmeSB0aGF0CiAgICAgICAgLy8gcHJvcGV0eSBh\nY2Nlc3MgaXMgaW4gdXNlLgogICAgICAgIFF1ZXJ5IHFyeSA9IGVtLmNyZWF0\nZU5hbWVkUXVlcnkoIlhNTERGTVBBLnF1ZXJ5Iik7CiAgICAgICAgcXJ5LnNl\ndFBhcmFtZXRlcigiaWQiLCBkZm1wYS5nZXRJZCgpKTsKICAgICAgICBxcnku\nc2V0UGFyYW1ldGVyKCJzdHJWYWwiLCAiWE1MREZNUEEiKTsKICAgICAgICBY\nTUxEZWZGaWVsZE1peGVkUHJvcEFjY2VzcyBkZm1wYTIgPSAKICAgICAgICAg\nICAgKFhNTERlZkZpZWxkTWl4ZWRQcm9wQWNjZXNzKXFyeS5nZXRTaW5nbGVS\nZXN1bHQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZGZtcGEsIGRmbXBhMik7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKGRmbXBhMi5nZXRTdHJpbmdGaWVsZCgp\nLCAiWE1MREZNUEEiKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcXJ5\nID0gZW0uY3JlYXRlTmFtZWRRdWVyeSgiWE1MREZNUEEuYmFkUXVlcnkiKTsK\nICAgICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigiaWQiLCBkZm1wYS5nZXRJ\nZCgpKTsKICAgICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigic3RyVmFsIiwg\nIlhNTERGTVBBIik7CiAgICAgICAgICAgIHFyeS5nZXRTaW5nbGVSZXN1bHQo\nKTsKICAgICAgICAgICAgZmFpbCgiRXhlY3V0aW9uIG9mIHRoaXMgcXVlcnkg\nc2hvdWxkIGhhdmUgdGhyb3duIGFuIGV4Y2VwdGlvbiIpOwogICAgICAgIH0K\nICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNz\nZXJ0RXhjZXB0aW9uTWVzc2FnZShlLCBBcmd1bWVudEV4Y2VwdGlvbi5jbGFz\ncywKICAgICAgICAgICAgICAgICJObyBmaWVsZCBuYW1lZCBcInN0ckZpZWxk\nXCIgaW4gXCJYTUxEZWZGaWVsZE1peGVkUHJvcEFjY2Vzc1wiIiwKICAgICAg\nICAgICAgICAgICJbaWQsIHN0cmluZ0ZpZWxkLCB2ZXJzaW9uXSIpOwogICAg\nICAgIH0KCiAgICAgICAgZW0uY2xvc2UoKTsgICAgICAgICAgICAgICAgCiAg\nICB9CiAgICAKICAgIC8qKgogICAgICogVmFsaWRhdGVzIHRoZSB1c2Ugb2Yg\nZXhwbGljaXQgcHJvcGVydHkgYWNjZXNzIG9uIGFuIGVudGl0eSwgCiAgICAg\nKiBtYXBwZWRzdXBlcmNsYXNzLCBhbmQgZW1iZWRkYWJsZSB3aXRoIGZpZWxk\nIGFjY2VzcwogICAgICogZGVmaW5lZCBhdCB0aGUgY2xhc3MgbGV2ZWwgYW5k\nIHByb3BlcnR5IGFjY2VzcyBkZWZpbmVkCiAgICAgKiBvbiBzcGVjaWZpYyBt\nZXRob2RzLiAKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdENsYXNzU3Bl\nY2lmaWVkTWl4ZWRTaW5nbGVQQ1Byb3BlcnR5QWNjZXNzKCkgewogICAgICAg\nIAogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAKICAgICAgICBYTUxEZWZQ\ncm9wTWl4ZWRGaWVsZEFjY2VzcyBkcG1mYSA9IG5ldyBYTUxEZWZQcm9wTWl4\nZWRGaWVsZEFjY2VzcygpOwogICAgICAgIC8vIENhbGwgc2V0dGVyIHdpdGgg\ndW5kZXJseWluZyBmaWVsZCBhY2Nlc3MKICAgICAgICBkcG1mYS5zZXRTdHJQ\ncm9wKCJYTUxEUE1GQSIpOwogICAgICAgIAogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KGRwbWZhKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIGVtLmNsZWFyKCk7CiAgICAgICAgCiAgICAgICAgLy8gVGhpcyB2YWx1ZSBv\nZiBhIHBlcnNpc3RlbnQgZmllbGQgd2FzIHNldCB1c2luZyB0aGUgc2V0dGVy\nCiAgICAgICAgLy8gYWJvdmUsIGJ1dCB0aGlzIHF1ZXJ5IHdpbGwgdXNlIHRo\nZSBwcm9wZXJ0eSBuYW1lIHRvIHZlcmlmeSB0aGF0CiAgICAgICAgLy8gcHJv\ncGV0eSBhY2Nlc3MgaXMgaW4gdXNlLgogICAgICAgIFF1ZXJ5IHFyeSA9IGVt\nLmNyZWF0ZU5hbWVkUXVlcnkoIlhNTERQTUZBLnF1ZXJ5Iik7CiAgICAgICAg\ncXJ5LnNldFBhcmFtZXRlcigiaWQiLCBkcG1mYS5nZXRJZCgpKTsKICAgICAg\nICBxcnkuc2V0UGFyYW1ldGVyKCJzdHJWYWwiLCAiWE1MRFBNRkEiKTsKICAg\nICAgICBYTUxEZWZQcm9wTWl4ZWRGaWVsZEFjY2VzcyBkcG1mYTIgPSAKICAg\nICAgICAgICAgKFhNTERlZlByb3BNaXhlZEZpZWxkQWNjZXNzKXFyeS5nZXRT\naW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZHBtZmEsIGRw\nbWZhMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGRwbWZhMi5nZXRTdHJQcm9w\nKCksICJYTUxEUE1GQSIpOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBx\ncnkgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KCJYTUxEUE1GQS5iYWRRdWVyeSIp\nOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJpZCIsIGRwbWZhLmdl\ndElkKCkpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJzdHJWYWwi\nLCAiWE1MRFBNRkEiKTsKICAgICAgICAgICAgcXJ5LmdldFNpbmdsZVJlc3Vs\ndCgpOwogICAgICAgICAgICBmYWlsKCJVc2FnZSBvZiB0aGlzIHF1ZXJ5IHNo\nb3VsZCBoYXZlIHRocm93biBhbiBleGNlcHRpb24iKTsKICAgICAgICB9CiAg\nICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2Vy\ndEV4Y2VwdGlvbk1lc3NhZ2UoZSwgQXJndW1lbnRFeGNlcHRpb24uY2xhc3Ms\nCiAgICAgICAgICAgICAgICAiTm8gZmllbGQgbmFtZWQgXCJzdHJQcm9wXCIg\naW4gXCJYTUxEZWZQcm9wTWl4ZWRGaWVsZEFjY2Vzc1wiIiwKICAgICAgICAg\nICAgICAgICJbaWQsIHN0ckZpZWxkLCB2ZXJzaW9uXSIpOwogICAgICAgIH0K\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAg\nKiBWYWxpZGF0ZXMgdGhhdCBhIG1hcHBlZCBzdXBlcmNsYXNzIHVzaW5nIGZp\nZWxkIGFjY2VzcyBhbmQgYW4gZW50aXR5CiAgICAgKiBzdWJjbGFzcyB1c2lu\nZyBwcm9wZXJ0eSBhY2Nlc3MgZ2V0IG1hcHBlZCBwcm9wZXJseS4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgdGVzdEFic3RyYWN0TWFwcGVkU3VwZXJGaWVs\nZCgpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkg\nZW1mID0gCiAgICAgICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rv\ncnlTUEkpT3BlbkpQQVBlcnNpc3RlbmNlLgogICAgICAgICAgICBjcmVhdGVF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSgiQWNjZXNzLVhNTCIsCiAgICAgICAgICAg\nICJvcmcvYXBhY2hlL29wZW5qcGEvcGVyc2lzdGVuY2UvYWNjZXNzLyIgKwog\nICAgICAgICAgICAiYWNjZXNzLXBlcnNpc3RlbmNlLnhtbCIpOwoKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlclNQSSBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CgogICAgICAgIFhNTFByb3BlcnR5U3ViIHBzID0gbmV3\nIFhNTFByb3BlcnR5U3ViKCk7CiAgICAgICAgLy8gQ2FsbCBzdXBlciBzZXR0\nZXIgd2l0aCB1bmRlcmx5aW5nIGZpZWxkIGFjY2VzcwogICAgICAgIHBzLnNl\ndE5hbWUoIkFic01hcHBlZFN1cGVyTmFtZSIpOwogICAgICAgIC8vIENhbGwg\nYmFzZSBzZXR0ZXIgd2l0aCBwcm9wZXJ0eSBhY2Nlc3MKICAgICAgICBEYXRl\nIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgcHMuc2V0Q3JlYXRlRGF0ZShu\nb3cpOwogICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBlbS5wZXJzaXN0KHBzKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAg\nICAgICAgCiAgICAgICAgLy8gVGhpcyB2YWx1ZSBvZiBhIHBlcnNpc3RlbnQg\nZmllbGQgd2FzIHNldCB1c2luZyB0aGUgc2V0dGVyCiAgICAgICAgLy8gYWJv\ndmUsIGJ1dCB0aGlzIHF1ZXJ5IHdpbGwgdXNlIHRoZSBwcm9wZXJ0eSBuYW1l\nIHRvIHZlcmlmeSB0aGF0CiAgICAgICAgLy8gcHJvcGV0eSBhY2Nlc3MgaXMg\naW4gdXNlLgogICAgICAgIFF1ZXJ5IHFyeSA9IGVtLmNyZWF0ZU5hbWVkUXVl\ncnkoIlhNTFByb3BlcnR5U3ViLnF1ZXJ5Iik7CiAgICAgICAgcXJ5LnNldFBh\ncmFtZXRlcigiaWQiLCBwcy5nZXRJZCgpKTsKICAgICAgICBxcnkuc2V0UGFy\nYW1ldGVyKCJuYW1lIiwgIkFic01hcHBlZFN1cGVyTmFtZSIpOwogICAgICAg\nIHFyeS5zZXRQYXJhbWV0ZXIoImNydERhdGUiLCBub3cpOwogICAgICAgIFhN\nTFByb3BlcnR5U3ViIHBzMiA9IAogICAgICAgICAgICAoWE1MUHJvcGVydHlT\ndWIpcXJ5LmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhwcywgcHMyKTsKICAgICAgICBhc3NlcnRFcXVhbHMocHMyLmdldE5hbWUo\nKSwgIkFic01hcHBlZFN1cGVyTmFtZSIpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhwczIuZ2V0Q3JlYXRlRGF0ZSgpLnRvU3RyaW5nKCksIG5vdy50b1N0cmlu\nZygpKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcXJ5ID0gZW0uY3Jl\nYXRlTmFtZWRRdWVyeSgiWE1MUHJvcGVydHlTdWIuYmFkUXVlcnkiKTsKICAg\nICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigiaWQiLCBwcy5nZXRJZCgpKTsK\nICAgICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigibmFtZSIsICJBYnNNYXBw\nZWRTdXBlck5hbWUiKTsKICAgICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigi\nY3J0RGF0ZSIsIG5vdyk7CiAgICAgICAgICAgIHFyeS5nZXRTaW5nbGVSZXN1\nbHQoKTsKICAgICAgICAgICAgZmFpbCgiVXNhZ2Ugb2YgdGhpcyBxdWVyeSBz\naG91bGQgaGF2ZSB0aHJvd24gYW4gZXhjZXB0aW9uIik7CiAgICAgICAgfQog\nICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3Nl\ncnRFeGNlcHRpb25NZXNzYWdlKGUsIEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNz\nLAogICAgICAgICAgICAgICAgIk5vIGZpZWxkIG5hbWVkIFwiY3J0RGF0ZVwi\nIGluIFwiWE1MUHJvcGVydHlTdWJcIiIsCiAgICAgICAgICAgICAgICAiW2Ny\nZWF0ZURhdGUsIGlkLCBuYW1lXSIpOwogICAgICAgIH0KCiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFZhbGlkYXRlcyB0aGF0\nIGEgbWFwcGVkIHN1cGVyY2xhc3MgdXNpbmcgcHJvcGVydHkgYWNjZXNzIGFu\nZCBhbiBlbnRpdHkKICAgICAqIHN1YmNsYXNzIHVzaW5nIGZpZWxkIGFjY2Vz\ncyBnZXQgbWFwcGVkIHByb3Blcmx5LgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0QWJzdHJhY3RNYXBwZWRTdXBlclByb3BlcnR5KCkgewoKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0gCiAgICAg\nICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpT3BlbkpQ\nQVBlcnNpc3RlbmNlLgogICAgICAgICAgICBjcmVhdGVFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeSgiQWNjZXNzLVhNTCIsCiAgICAgICAgICAgICJvcmcvYXBhY2hl\nL29wZW5qcGEvcGVyc2lzdGVuY2UvYWNjZXNzLyIgKwogICAgICAgICAgICAi\nYWNjZXNzLXBlcnNpc3RlbmNlLnhtbCIpOwoKICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlclNQSSBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgCiAgICAgICAgWE1MRmllbGRTdWIgZnMgPSBuZXcgWE1MRmll\nbGRTdWIoKTsKICAgICAgICAvLyBDYWxsIHN1cGVyIHNldHRlciB3aXRoIHVu\nZGVybHlpbmcgZmllbGQgYWNjZXNzCiAgICAgICAgZnMuc2V0TmFtZSgiQWJz\nTWFwcGVkU3VwZXJOYW1lIik7CiAgICAgICAgLy8gQ2FsbCBiYXNlIHNldHRl\nciB3aXRoIHByb3BlcnR5IGFjY2VzcwogICAgICAgIERhdGUgbm93ID0gbmV3\nIERhdGUoKTsKICAgICAgICBmcy5zZXRDcmVhdGVEYXRlKG5vdyk7CiAgICAg\nICAgCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAg\nICAgIGVtLnBlcnNpc3QoZnMpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICAKICAg\nICAgICAvLyBUaGlzIHZhbHVlIG9mIGEgcGVyc2lzdGVudCBmaWVsZCB3YXMg\nc2V0IHVzaW5nIHRoZSBzZXR0ZXIKICAgICAgICAvLyBhYm92ZSwgYnV0IHRo\naXMgcXVlcnkgd2lsbCB1c2UgdGhlIHByb3BlcnR5IG5hbWUgdG8gdmVyaWZ5\nIHRoYXQKICAgICAgICAvLyBwcm9wZXR5IGFjY2VzcyBpcyBpbiB1c2UuCiAg\nICAgICAgUXVlcnkgcXJ5ID0gZW0uY3JlYXRlTmFtZWRRdWVyeSgiWE1MRmll\nbGRTdWIucXVlcnkiKTsKICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJpZCIs\nIGZzLmdldElkKCkpOwogICAgICAgIHFyeS5zZXRQYXJhbWV0ZXIoIm5hbWUi\nLCAiQWJzTWFwcGVkU3VwZXJOYW1lIik7CiAgICAgICAgcXJ5LnNldFBhcmFt\nZXRlcigiY3J0RGF0ZSIsIG5vdyk7CiAgICAgICAgWE1MRmllbGRTdWIgZnMy\nID0gCiAgICAgICAgICAgIChYTUxGaWVsZFN1YilxcnkuZ2V0U2luZ2xlUmVz\ndWx0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGZzLCBmczIpOwogICAgICAg\nIGFzc2VydEVxdWFscyhmczIuZ2V0TmFtZSgpLCAiQWJzTWFwcGVkU3VwZXJO\nYW1lIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGZzMi5nZXRDcmVhdGVEYXRl\nKCkudG9TdHJpbmcoKSwgbm93LnRvU3RyaW5nKCkpOwoKICAgICAgICB0cnkg\newogICAgICAgICAgICBxcnkgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KCJYTUxG\naWVsZFN1Yi5iYWRRdWVyeSIpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1l\ndGVyKCJpZCIsIGZzLmdldElkKCkpOwogICAgICAgICAgICBxcnkuc2V0UGFy\nYW1ldGVyKCJuYW1lIiwgIkFic01hcHBlZFN1cGVyTmFtZSIpOwogICAgICAg\nICAgICBxcnkuc2V0UGFyYW1ldGVyKCJjcnREYXRlIiwgbm93KTsKICAgICAg\nICAgICAgcXJ5LmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgICAgICBmYWls\nKCJVc2FnZSBvZiB0aGlzIHF1ZXJ5IHNob3VsZCBoYXZlIHRocm93biBhbiBl\neGNlcHRpb24iKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIGFzc2VydEV4Y2VwdGlvbk1lc3NhZ2UoZSwg\nQXJndW1lbnRFeGNlcHRpb24uY2xhc3MsCiAgICAgICAgICAgICAgICAiTm8g\nZmllbGQgbmFtZWQgXCJjcmVhdGVEYXRlXCIgaW4gXCJYTUxGaWVsZFN1Ylwi\nIiwKICAgICAgICAgICAgICAgICJbY3J0RGF0ZSwgaWQsIG5hbWVdIik7CiAg\nICAgICAgfQoKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qKgog\nICAgICogVmFsaWRhdGVzIHRoYXQgYW4gbWFwcGVkIHN1cGVyY2xhc3MgdXNp\nbmcgZmllbGQgYWNjZXNzIGFuZCBhbiAKICAgICAqIGVudGl0eSBzdWJjbGFz\ncyB1c2luZyBwcm9wZXJ0eSBhY2Nlc3MgZ2V0IG1hcHBlZCBwcm9wZXJseS4K\nICAgICAqIFRoZSBzdWJjbGFzcyB1c2VzIGEgc3RvcmFnZSBmaWVsZCBpbiB0\naGUgc3VwZXJjbGFzcy4gCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RN\nYXBwZWRTdXBlckZpZWxkKCkgewogICAgICAgIAogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSBlbWYgPSAKICAgICAgICAgICAgKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSlPcGVuSlBBUGVyc2lzdGVu\nY2UuCiAgICAgICAgICAgIGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KCJB\nY2Nlc3MtWE1MIiwKICAgICAgICAgICAgIm9yZy9hcGFjaGUvb3BlbmpwYS9w\nZXJzaXN0ZW5jZS9hY2Nlc3MvIiArCiAgICAgICAgICAgICJhY2Nlc3MtcGVy\nc2lzdGVuY2UueG1sIik7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nU1BJIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAK\nICAgICAgICBYTUxQcm9wZXJ0eVN1YjIgcHMgPSBuZXcgWE1MUHJvcGVydHlT\ndWIyKCk7CiAgICAgICAgLy8gQ2FsbCBzdXBlciBzZXR0ZXIgd2l0aCB1bmRl\ncmx5aW5nIGZpZWxkIGFjY2VzcwogICAgICAgIHBzLnNldE5hbWUoIk1hcHBl\nZFN1cGVyTmFtZSIpOwogICAgICAgIC8vIENhbGwgYmFzZSBzZXR0ZXIgd2l0\naCBwcm9wZXJ0eSBhY2Nlc3MKICAgICAgICBEYXRlIG5vdyA9IG5ldyBEYXRl\nKCk7CiAgICAgICAgcHMuc2V0Q3JlYXRlRGF0ZShub3cpOwogICAgICAgIAog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBl\nbS5wZXJzaXN0KHBzKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgCiAgICAgICAg\nLy8gVGhpcyB2YWx1ZSBvZiBhIHBlcnNpc3RlbnQgZmllbGQgd2FzIHNldCB1\nc2luZyB0aGUgc2V0dGVyCiAgICAgICAgLy8gYWJvdmUsIGJ1dCB0aGlzIHF1\nZXJ5IHdpbGwgdXNlIHRoZSBwcm9wZXJ0eSBuYW1lIHRvIHZlcmlmeSB0aGF0\nCiAgICAgICAgLy8gcHJvcGV0eSBhY2Nlc3MgaXMgaW4gdXNlLgogICAgICAg\nIFF1ZXJ5IHFyeSA9IGVtLmNyZWF0ZU5hbWVkUXVlcnkoIlhNTFByb3BlcnR5\nU3ViMi5xdWVyeSIpOwogICAgICAgIHFyeS5zZXRQYXJhbWV0ZXIoImlkIiwg\ncHMuZ2V0SWQoKSk7CiAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigibmFtZSIs\nICJNYXBwZWRTdXBlck5hbWUiKTsKICAgICAgICBxcnkuc2V0UGFyYW1ldGVy\nKCJjcnREYXRlIiwgbm93KTsKICAgICAgICBYTUxQcm9wZXJ0eVN1YjIgcHMy\nID0gCiAgICAgICAgICAgIChYTUxQcm9wZXJ0eVN1YjIpcXJ5LmdldFNpbmds\nZVJlc3VsdCgpOwogICAgICAgIGFzc2VydEVxdWFscyhwcywgcHMyKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMocHMyLmdldE5hbWUoKSwgIk1hcHBlZFN1cGVy\nTmFtZSIpOwogICAgICAgIGFzc2VydEVxdWFscyhwczIuZ2V0Q3JlYXRlRGF0\nZSgpLnRvU3RyaW5nKCksIG5vdy50b1N0cmluZygpKTsKCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgcXJ5ID0gZW0uY3JlYXRlTmFtZWRRdWVyeSgiWE1M\nUHJvcGVydHlTdWIyLmJhZFF1ZXJ5Iik7CiAgICAgICAgICAgIHFyeS5zZXRQ\nYXJhbWV0ZXIoImlkIiwgcHMuZ2V0SWQoKSk7CiAgICAgICAgICAgIHFyeS5z\nZXRQYXJhbWV0ZXIoIm5hbWUiLCAiTWFwcGVkU3VwZXJOYW1lIik7CiAgICAg\nICAgICAgIHFyeS5zZXRQYXJhbWV0ZXIoImNydERhdGUiLCBub3cpOwogICAg\nICAgICAgICBxcnkuZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAgICAgIGZh\naWwoIlVzYWdlIG9mIHRoaXMgcXVlcnkgc2hvdWxkIGhhdmUgdGhyb3duIGFu\nIGV4Y2VwdGlvbiIpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0RXhjZXB0aW9uTWVzc2FnZShl\nLCBBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcywKICAgICAgICAgICAgICAgICAg\nICAiTm8gZmllbGQgbmFtZWQgXCJjcnREYXRlXCIgaW4gXCJYTUxQcm9wZXJ0\neVN1YjJcIiIsCiAgICAgICAgICAgICAgICAgICAgIltjcmVhdGVEYXRlLCBp\nZCwgbmFtZV0iKTsKICAgICAgICB9CgogICAgICAgIGVtLmNsb3NlKCk7ICAg\nICAgICAKICAgIH0KCiAgICAvKioKICAgICAqIFZhbGlkYXRlcyB0aGF0IGFu\nIG1hcHBlZCBzdXBlcmNsYXNzIHVzaW5nIGZpZWxkIGFjY2VzcyBhbmQgYW4g\nCiAgICAgKiBlbnRpdHkgc3ViY2xhc3MgdXNpbmcgcHJvcGVydHkgYWNjZXNz\nIGdldCBtYXBwZWQgcHJvcGVybHkuCiAgICAgKiBUaGUgc3ViY2xhc3MgdXNl\ncyBhIHN0b3JhZ2UgZmllbGQgaW4gdGhlIHN1cGVyY2xhc3MuIAogICAgICov\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWFwcGVkU3VwZXJQcm9wZXJ0eSgpIHsK\nICAgICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlclNQSSBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgCiAgICAgICAg\nWE1MRmllbGRTdWIyIGZzID0gbmV3IFhNTEZpZWxkU3ViMigpOwogICAgICAg\nIC8vIENhbGwgc3VwZXIgc2V0dGVyIHdpdGggdW5kZXJseWluZyBmaWVsZCBh\nY2Nlc3MKICAgICAgICBmcy5zZXROYW1lKCJNYXBwZWRTdXBlck5hbWUiKTsK\nICAgICAgICAvLyBDYWxsIGJhc2Ugc2V0dGVyIHdpdGggcHJvcGVydHkgYWNj\nZXNzCiAgICAgICAgRGF0ZSBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgIGZz\nLnNldENyZWF0ZURhdGUobm93KTsKICAgICAgICAKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChmcyk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICBlbS5jbGVhcigpOwogICAgICAgIAogICAgICAgIC8vIFRoaXMgdmFsdWUg\nb2YgYSBwZXJzaXN0ZW50IGZpZWxkIHdhcyBzZXQgdXNpbmcgdGhlIHNldHRl\ncgogICAgICAgIC8vIGFib3ZlLCBidXQgdGhpcyBxdWVyeSB3aWxsIHVzZSB0\naGUgcHJvcGVydHkgbmFtZSB0byB2ZXJpZnkgdGhhdAogICAgICAgIC8vIHBy\nb3BldHkgYWNjZXNzIGlzIGluIHVzZS4KICAgICAgICBRdWVyeSBxcnkgPSBl\nbS5jcmVhdGVOYW1lZFF1ZXJ5KCJYTUxGaWVsZFN1YjIucXVlcnkiKTsKICAg\nICAgICBxcnkuc2V0UGFyYW1ldGVyKCJpZCIsIGZzLmdldElkKCkpOwogICAg\nICAgIHFyeS5zZXRQYXJhbWV0ZXIoIm5hbWUiLCAiTWFwcGVkU3VwZXJOYW1l\nIik7CiAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigiY3J0RGF0ZSIsIG5vdyk7\nCiAgICAgICAgWE1MRmllbGRTdWIyIGZzMiA9IAogICAgICAgICAgICAoWE1M\nRmllbGRTdWIyKXFyeS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoZnMsIGZzMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGZzMi5n\nZXROYW1lKCksICJNYXBwZWRTdXBlck5hbWUiKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoZnMyLmdldENyZWF0ZURhdGUoKS50b1N0cmluZygpLCBub3cudG9T\ndHJpbmcoKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHFyeSA9IGVt\nLmNyZWF0ZU5hbWVkUXVlcnkoIlhNTEZpZWxkU3ViMi5iYWRRdWVyeSIpOwog\nICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJpZCIsIGZzLmdldElkKCkp\nOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIk1hcHBl\nZFN1cGVyTmFtZSIpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJj\ncnREYXRlIiwgbm93KTsKICAgICAgICAgICAgcXJ5LmdldFNpbmdsZVJlc3Vs\ndCgpOwogICAgICAgICAgICBmYWlsKCJVc2FnZSBvZiB0aGlzIHF1ZXJ5IHNo\nb3VsZCBoYXZlIHRocm93biBhbiBleGNlcHRpb24iKTsKICAgICAgICB9CiAg\nICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2Vy\ndEV4Y2VwdGlvbk1lc3NhZ2UoZSwgQXJndW1lbnRFeGNlcHRpb24uY2xhc3Ms\nCiAgICAgICAgICAgICAgICAgICAgIk5vIGZpZWxkIG5hbWVkIFwiY3JlYXRl\nRGF0ZVwiIGluIFwiWE1MRmllbGRTdWIyXCIiLAogICAgICAgICAgICAgICAg\nICAgICJbY3J0RGF0ZSwgaWQsIG5hbWVdIik7CiAgICAgICAgfQoKICAgICAg\nICBlbS5jbG9zZSgpOyAgICAgICAgCiAgICB9CgogICAgLyoqCiAgICAgKiBW\nYWxpZGF0ZXMgdGhhdCBhIG1peCBvZiBhY2Nlc3MgdHlwZXMgY2FuIGJlIHVz\nZWQgd2l0aGluIG11bHRpcGxlIAogICAgICogcGVyc2lzdGVudCBjbGFzc2Vz\nIHdpdGhpbiBhbiBpbmhlcml0YW5jZSBoaWVyYXJjaHkgdGhhdCB1c2VzIAog\nICAgICogTWFwcGVkU3VwZXJjbGFzcy4KICAgICAqLwogICAgcHVibGljIHZv\naWQgdGVzdE1peGVkTWFwcGVkU3VwZXIoKSB7CiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXJTUEkgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIAogICAgICAgIFhNTE1peGVkRmllbGRTdWIgZnMgPSBuZXcg\nWE1MTWl4ZWRGaWVsZFN1YigpOwogICAgICAgIC8vIENhbGwgc3VwZXIgc2V0\ndGVyIHdpdGggdW5kZXJseWluZyBmaWVsZCBhY2Nlc3MKICAgICAgICBmcy5z\nZXROYW1lKCJYTUxNaXhlZE1hcHBlZFN1cGVyTmFtZSIpOwogICAgICAgIGZz\nLnNldE15RmllbGRQcm9wKCJNeUZpZWxkTmFtZSIpOwogICAgICAgIC8vIENh\nbGwgYmFzZSBzZXR0ZXIgd2l0aCBwcm9wZXJ0eSBhY2Nlc3MKICAgICAgICBE\nYXRlIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgZnMuc2V0Q3JlYXRlRGF0\nZShub3cpOwogICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KGZzKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7\nCiAgICAgICAgCiAgICAgICAgLy8gVGhpcyB2YWx1ZSBvZiBhIHBlcnNpc3Rl\nbnQgZmllbGQgd2FzIHNldCB1c2luZyB0aGUgc2V0dGVyCiAgICAgICAgLy8g\nYWJvdmUsIGJ1dCB0aGlzIHF1ZXJ5IHdpbGwgdXNlIHRoZSBwcm9wZXJ0eSBu\nYW1lIHRvIHZlcmlmeSB0aGF0CiAgICAgICAgLy8gcHJvcGV0eSBhY2Nlc3Mg\naXMgaW4gdXNlLgogICAgICAgIFF1ZXJ5IHFyeSA9IGVtLmNyZWF0ZU5hbWVk\nUXVlcnkoIlhNTE1peGVkRmllbGRTdWIucXVlcnkiKTsKICAgICAgICBxcnku\nc2V0UGFyYW1ldGVyKCJpZCIsIGZzLmdldElkKCkpOwogICAgICAgIHFyeS5z\nZXRQYXJhbWV0ZXIoIm5hbWUiLCAiWE1MTWl4ZWRNYXBwZWRTdXBlck5hbWUi\nKTsKICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJjcnREYXRlIiwgbm93KTsK\nICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJteUZpZWxkIiwgIk15RmllbGRO\nYW1lIik7CiAgICAgICAgWE1MTWl4ZWRGaWVsZFN1YiBmczIgPSAKICAgICAg\nICAgICAgKFhNTE1peGVkRmllbGRTdWIpcXJ5LmdldFNpbmdsZVJlc3VsdCgp\nOwogICAgICAgIGFzc2VydEVxdWFscyhmcywgZnMyKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoZnMyLmdldE5hbWUoKSwgIlhNTE1peGVkTWFwcGVkU3VwZXJO\nYW1lIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGZzMi5nZXRDcmVhdGVEYXRl\nKCkudG9TdHJpbmcoKSwgbm93LnRvU3RyaW5nKCkpOwoKICAgICAgICB0cnkg\newogICAgICAgICAgICBxcnkgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KCJYTUxN\naXhlZEZpZWxkU3ViLmJhZFF1ZXJ5Iik7CiAgICAgICAgICAgIHFyeS5zZXRQ\nYXJhbWV0ZXIoImlkIiwgZnMuZ2V0SWQoKSk7CiAgICAgICAgICAgIHFyeS5z\nZXRQYXJhbWV0ZXIoIm5hbWUiLCAiWE1MTWl4ZWRNYXBwZWRTdXBlck5hbWUi\nKTsKICAgICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigibXlGaWVsZCIsICJN\neUZpZWxkTmFtZSIpOwogICAgICAgICAgICBxcnkuZ2V0U2luZ2xlUmVzdWx0\nKCk7CiAgICAgICAgICAgIGZhaWwoIlVzYWdlIG9mIHRoaXMgcXVlcnkgc2hv\ndWxkIGhhdmUgdGhyb3duIGFuIGV4Y2VwdGlvbiIpOwogICAgICAgIH0KICAg\nICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0\nRXhjZXB0aW9uTWVzc2FnZShlLCBBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcywK\nICAgICAgICAgICAgICAgICAgICAiTm8gZmllbGQgbmFtZWQgXCJteUZpZWxk\nUHJvcFwiIGluIFwiWE1MTWl4ZWRGaWVsZFN1YlwiIiwKICAgICAgICAgICAg\nICAgICAgICAiW2NyZWF0ZURhdGUsIG1pZCwgbXlGaWVsZCwgbmFtZV0iKTsK\nICAgICAgICB9CgogICAgICAgIGVtLmNsb3NlKCk7ICAgICAgICAKICAgICAg\nICAKICAgIH0KCiAgICAvKioKICAgICAqIFZhbGlkYXRlcyB0aGF0IGEgbWl4\nIG9mIGFjY2VzcyB0eXBlcyBjYW4gYmUgdXNlZCB3aXRoaW4KICAgICAqIGFu\nIGluaGVyaXRhbmNlIGhpZXJhcmNoeSB3aGljaCB1c2VzIGRlZmF1bHQgRW50\naXR5IGluaGVyaXRhbmNlLgogICAgICogTk9URTogYmUgc3VyZSB0byB0ZXN0\nIHdpdGggYWxsIGZvcm1zIG9mIGluaGVyaXRhbmNlLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RW50aXR5RmllbGREZWZhdWx0SW5oZXJpdGFuY2Uo\nKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIAogICAgICAgIFhNTEZp\nZWxkU3ViMyBmcyA9IG5ldyBYTUxGaWVsZFN1YjMoKTsKICAgICAgICAvLyBD\nYWxsIHN1cGVyIHNldHRlciB3aXRoIHVuZGVybHlpbmcgZmllbGQgYWNjZXNz\nCiAgICAgICAgZnMuc2V0TmFtZSgiRW50aXR5U3VwZXJOYW1lIik7CiAgICAg\nICAgLy8gQ2FsbCBiYXNlIHNldHRlciB3aXRoIHByb3BlcnR5IGFjY2Vzcwog\nICAgICAgIERhdGUgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICBmcy5zZXRD\ncmVhdGVEYXRlKG5vdyk7CgogICAgICAgIFhNTFN1cGVyUHJvcGVydHlFbnRp\ndHkgc3BlID0gbmV3IFhNTFN1cGVyUHJvcGVydHlFbnRpdHkoKTsKICAgICAg\nICBzcGUuc2V0TmFtZSgiU3VwZXJQcm9wZXJ0eUVudGl0eSIpOwogICAgICAg\nIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBlbS5wZXJzaXN0KGZzKTsKICAgICAgICBlbS5wZXJzaXN0KHNwZSk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBl\nbS5jbGVhcigpOwogICAgICAgIAogICAgICAgIC8vIFRoaXMgdmFsdWUgb2Yg\nYSBwZXJzaXN0ZW50IGZpZWxkIHdhcyBzZXQgdXNpbmcgdGhlIHNldHRlcgog\nICAgICAgIC8vIGFib3ZlLCBidXQgdGhpcyBxdWVyeSB3aWxsIHVzZSB0aGUg\ncHJvcGVydHkgbmFtZSB0byB2ZXJpZnkgdGhhdAogICAgICAgIC8vIHByb3Bl\ndHkgYWNjZXNzIGlzIGluIHVzZS4KICAgICAgICBRdWVyeSBxcnkgPSBlbS5j\ncmVhdGVOYW1lZFF1ZXJ5KCJYTUxGaWVsZFN1YjMucXVlcnkiKTsKICAgICAg\nICBxcnkuc2V0UGFyYW1ldGVyKCJpZCIsIGZzLmdldElkKCkpOwogICAgICAg\nIHFyeS5zZXRQYXJhbWV0ZXIoIm5hbWUiLCAiRW50aXR5U3VwZXJOYW1lIik7\nCiAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigiY3J0RGF0ZSIsIG5vdyk7CiAg\nICAgICAgWE1MRmllbGRTdWIzIGZzMiA9IAogICAgICAgICAgICAoWE1MRmll\nbGRTdWIzKXFyeS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoZnMsIGZzMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGZzMi5nZXRO\nYW1lKCksICJFbnRpdHlTdXBlck5hbWUiKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoZnMyLmdldENyZWF0ZURhdGUoKS50b1N0cmluZygpLCBub3cudG9TdHJp\nbmcoKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHFyeSA9IGVtLmNy\nZWF0ZU5hbWVkUXVlcnkoIlhNTEZpZWxkU3ViMy5iYWRRdWVyeSIpOwogICAg\nICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJpZCIsIGZzLmdldElkKCkpOwog\nICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIkVudGl0eVN1\ncGVyTmFtZSIpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJjcnRE\nYXRlIiwgbm93KTsKICAgICAgICAgICAgcXJ5LmdldFNpbmdsZVJlc3VsdCgp\nOwogICAgICAgICAgICBmYWlsKCJVc2FnZSBvZiB0aGlzIHF1ZXJ5IHNob3Vs\nZCBoYXZlIHRocm93biBhbiBleGNlcHRpb24iKTsKICAgICAgICB9CiAgICAg\nICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydEV4\nY2VwdGlvbk1lc3NhZ2UoZSwgQXJndW1lbnRFeGNlcHRpb24uY2xhc3MsCiAg\nICAgICAgICAgICAgICAgICAgIk5vIGZpZWxkIG5hbWVkIFwiY3JlYXRlRGF0\nZVwiIGluIFwiWE1MRmllbGRTdWIzXCIiLAogICAgICAgICAgICAgICAgICAg\nICJbY3J0RGF0ZSwgaWQsIG5hbWVdIik7CiAgICAgICAgfQoKICAgICAgICBx\ncnkgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KCJYTUxTdXBlclByb3BlcnR5RW50\naXR5LnF1ZXJ5Iik7CiAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigiaWQiLCBz\ncGUuZ2V0SWQoKSk7CiAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigibmFtZSIs\nICJTdXBlclByb3BlcnR5RW50aXR5Iik7CiAgICAgICAgWE1MU3VwZXJQcm9w\nZXJ0eUVudGl0eSBzcGUyID0gCiAgICAgICAgICAgIChYTUxTdXBlclByb3Bl\ncnR5RW50aXR5KXFyeS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoc3BlLCBzcGUyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoc3Bl\nMi5nZXROYW1lKCksICJTdXBlclByb3BlcnR5RW50aXR5Iik7CgogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIC8vIFRoaXMgcXVlcnkgZW5zdXJlcyB0aGF0\nIGEgc3ViY2xhc3MgcHJvcGVydHkgZGlkbid0IHNvbWVob3cgZ2V0CiAgICAg\nICAgICAgIC8vIHBpY2tlZCB1cCBieSB0aGUgc3VwZXJjbGFzcyB3aGlsZSBi\ndWlsZGluZyBmaWVsZCBtZXRhZGF0YSB1c2luZwogICAgICAgICAgICAvLyBl\neHBsaWNpdCBhY2Nlc3MuCiAgICAgICAgICAgIHFyeSA9IGVtLmNyZWF0ZU5h\nbWVkUXVlcnkoIlhNTFN1cGVyUHJvcGVydHlFbnRpdHkuYmFkUXVlcnkiKTsK\nICAgICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigiaWQiLCBzcGUuZ2V0SWQo\nKSk7CiAgICAgICAgICAgIHFyeS5zZXRQYXJhbWV0ZXIoIm5hbWUiLCAiU3Vw\nZXJQcm9wZXJ0eUVudGl0eSIpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1l\ndGVyKCJjcnREYXRlIiwgbm93KTsKICAgICAgICAgICAgcXJ5LmdldFNpbmds\nZVJlc3VsdCgpOwogICAgICAgICAgICBmYWlsKCJVc2FnZSBvZiB0aGlzIHF1\nZXJ5IHNob3VsZCBoYXZlIHRocm93biBhbiBleGNlcHRpb24iKTsKICAgICAg\nICB9CiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIGFzc2VydEV4Y2VwdGlvbk1lc3NhZ2UoZSwgQXJndW1lbnRFeGNlcHRpb24u\nY2xhc3MsCiAgICAgICAgICAgICAgICAgICAgIk5vIGZpZWxkIG5hbWVkIFwi\nY3J0RGF0ZVwiIGluIFwiWE1MU3VwZXJQcm9wZXJ0eUVudGl0eVwiIiwKICAg\nICAgICAgICAgICAgICAgICAiW2lkLCBuYW1lXSIpOwogICAgICAgIH0gICAg\nICAgIAogICAgICAgIAogICAgICAgIGVtLmNsb3NlKCk7ICAgICAgICAKICAg\nIH0KCiAgICAvKioKICAgICAqIFZhbGlkYXRlcyB0aGF0IGEgbWl4IG9mIGFj\nY2VzcyB0eXBlcyBjYW4gYmUgdXNlZCB3aXRoaW4KICAgICAqIGFuIGluaGVy\naXRhbmNlIGhpZXJhcmNoeSB3aGljaCB1c2VzIGRlZmF1bHQgRW50aXR5IGlu\naGVyaXRhbmNlLgogICAgICogTk9URTogYmUgc3VyZSB0byB0ZXN0IHdpdGgg\nYWxsIGZvcm1zIG9mIGluaGVyaXRhbmNlLgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RW50aXR5UHJvcGVydHlEZWZhdWx0SW5oZXJpdGFuY2UoKSB7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIAogICAgICAgIFhNTFByb3Bl\ncnR5U3ViMyBwcyA9IG5ldyBYTUxQcm9wZXJ0eVN1YjMoKTsKICAgICAgICAv\nLyBDYWxsIHN1cGVyIHNldHRlciB3aXRoIHVuZGVybHlpbmcgZmllbGQgYWNj\nZXNzCiAgICAgICAgcHMuc2V0TmFtZSgiRW50aXR5U3VwZXJOYW1lIik7CiAg\nICAgICAgLy8gQ2FsbCBiYXNlIHNldHRlciB3aXRoIHByb3BlcnR5IGFjY2Vz\ncwogICAgICAgIERhdGUgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICBwcy5z\nZXRDcmVhdGVEYXRlKG5vdyk7CgogICAgICAgIFhNTFN1cGVyRmllbGRFbnRp\ndHkgc2ZlID0gbmV3IFhNTFN1cGVyRmllbGRFbnRpdHkoKTsKICAgICAgICBz\nZmUuc2V0TmFtZSgiU3VwZXJGaWVsZEVudGl0eSIpOwogICAgICAgIAogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5w\nZXJzaXN0KHBzKTsKICAgICAgICBlbS5wZXJzaXN0KHNmZSk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbGVh\ncigpOwogICAgICAgIAogICAgICAgIC8vIFRoaXMgdmFsdWUgb2YgYSBwZXJz\naXN0ZW50IGZpZWxkIHdhcyBzZXQgdXNpbmcgdGhlIHNldHRlcgogICAgICAg\nIC8vIGFib3ZlLCBidXQgdGhpcyBxdWVyeSB3aWxsIHVzZSB0aGUgcHJvcGVy\ndHkgbmFtZSB0byB2ZXJpZnkgdGhhdAogICAgICAgIC8vIHByb3BldHkgYWNj\nZXNzIGlzIGluIHVzZS4KICAgICAgICBRdWVyeSBxcnkgPSBlbS5jcmVhdGVO\nYW1lZFF1ZXJ5KCJYTUxQcm9wZXJ0eVN1YjMucXVlcnkiKTsKICAgICAgICBx\ncnkuc2V0UGFyYW1ldGVyKCJpZCIsIHBzLmdldElkKCkpOwogICAgICAgIHFy\neS5zZXRQYXJhbWV0ZXIoIm5hbWUiLCAiRW50aXR5U3VwZXJOYW1lIik7CiAg\nICAgICAgcXJ5LnNldFBhcmFtZXRlcigiY3J0RGF0ZSIsIG5vdyk7CiAgICAg\nICAgWE1MUHJvcGVydHlTdWIzIHBzMiA9IAogICAgICAgICAgICAoWE1MUHJv\ncGVydHlTdWIzKXFyeS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMocHMsIHBzMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHBzMi5n\nZXROYW1lKCksICJFbnRpdHlTdXBlck5hbWUiKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMocHMyLmdldENyZWF0ZURhdGUoKS50b1N0cmluZygpLCBub3cudG9T\ndHJpbmcoKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHFyeSA9IGVt\nLmNyZWF0ZU5hbWVkUXVlcnkoIlhNTFByb3BlcnR5U3ViMy5iYWRRdWVyeSIp\nOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJpZCIsIHBzLmdldElk\nKCkpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIkVu\ndGl0eVN1cGVyTmFtZSIpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVy\nKCJjcnREYXRlIiwgbm93KTsKICAgICAgICAgICAgcXJ5LmdldFNpbmdsZVJl\nc3VsdCgpOwogICAgICAgICAgICBmYWlsKCJVc2FnZSBvZiB0aGlzIHF1ZXJ5\nIHNob3VsZCBoYXZlIHRocm93biBhbiBleGNlcHRpb24iKTsKICAgICAgICB9\nCiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFz\nc2VydEV4Y2VwdGlvbk1lc3NhZ2UoZSwgQXJndW1lbnRFeGNlcHRpb24uY2xh\nc3MsCiAgICAgICAgICAgICAgICAgICAgIk5vIGZpZWxkIG5hbWVkIFwiY3J0\nRGF0ZVwiIGluIFwiWE1MUHJvcGVydHlTdWIzXCIiLAogICAgICAgICAgICAg\nICAgICAgICJbY3JlYXRlRGF0ZSwgaWQsIG5hbWVdIik7CiAgICAgICAgfQoK\nICAgICAgICBxcnkgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KCJYTUxTdXBlckZp\nZWxkRW50aXR5LnF1ZXJ5Iik7CiAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigi\naWQiLCBzZmUuZ2V0SWQoKSk7CiAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigi\nbmFtZSIsICJTdXBlckZpZWxkRW50aXR5Iik7CiAgICAgICAgWE1MU3VwZXJG\naWVsZEVudGl0eSBzZmUyID0gCiAgICAgICAgICAgIChYTUxTdXBlckZpZWxk\nRW50aXR5KXFyeS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoc2ZlMiwgc2ZlMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHNmZTIu\nZ2V0TmFtZSgpLCAiU3VwZXJGaWVsZEVudGl0eSIpOwoKICAgICAgICB0cnkg\newogICAgICAgICAgICAvLyBUaGlzIHF1ZXJ5IGVuc3VyZXMgdGhhdCBhIHN1\nYmNsYXNzIHByb3BlcnR5IGRpZG4ndCBzb21laG93IGdldAogICAgICAgICAg\nICAvLyBwaWNrZWQgdXAgYnkgdGhlIHN1cGVyY2xhc3Mgd2hpbGUgYnVpbGRp\nbmcgZmllbGQgbWV0YWRhdGEgdXNpbmcKICAgICAgICAgICAgLy8gZXhwbGlj\naXQgYWNjZXNzLgogICAgICAgICAgICBxcnkgPSBlbS5jcmVhdGVOYW1lZFF1\nZXJ5KCJYTUxTdXBlckZpZWxkRW50aXR5LmJhZFF1ZXJ5Iik7CiAgICAgICAg\nICAgIHFyeS5zZXRQYXJhbWV0ZXIoImlkIiwgc2ZlLmdldElkKCkpOwogICAg\nICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIlN1cGVyRmllbGRF\nbnRpdHkiKTsKICAgICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigiY3J0RGF0\nZSIsIG5vdyk7CiAgICAgICAgICAgIHFyeS5nZXRTaW5nbGVSZXN1bHQoKTsK\nICAgICAgICAgICAgZmFpbCgiVXNhZ2Ugb2YgdGhpcyBxdWVyeSBzaG91bGQg\naGF2ZSB0aHJvd24gYW4gZXhjZXB0aW9uIik7CiAgICAgICAgfQogICAgICAg\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRFeGNl\ncHRpb25NZXNzYWdlKGUsIEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLAogICAg\nICAgICAgICAgICAgICAgICJObyBmaWVsZCBuYW1lZCBcImNydERhdGVcIiBp\nbiBcIlhNTFN1cGVyRmllbGRFbnRpdHlcIiIsCiAgICAgICAgICAgICAgICAg\nICAgIltpZCwgbmFtZV0iKTsKICAgICAgICB9ICAgICAgICAKICAgICAgICBl\nbS5jbG9zZSgpOyAgICAgICAgCiAgICB9CgogICAgLyoqCiAgICAgKiBWYWxp\nZGF0ZXMgYW4gZW1iZWRkYWJsZSB3aXRoIGZpZWxkIGFjY2VzcyBjYW4gYmUg\ndXNlZCB3aXRoaW4gYW4KICAgICAqIGVudGl0eSB3aXRoIHByb3BlcnR5IGFj\nY2VzcwogICAgICovCiAgICBAQWxsb3dGYWlsdXJlKHZhbHVlPXRydWUsIAog\nICAgICAgIG1lc3NhZ2U9IlN1cHBvcnQgZm9yIGV4cGxpY2l0IEFjY2VzcyBv\nbiBlbWJlZGRhYmxlcyBpcyBub3QgY29tcGxldGUuIikKICAgIHB1YmxpYyB2\nb2lkIHRlc3RFbWJlZGRhYmxlc0ZpZWxkKCkgewogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyU1BJIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICAKICAgICAgICBYTUxFbWJlZEZpZWxkQWNjZXNzIGVmYSA9\nIG5ldyBYTUxFbWJlZEZpZWxkQWNjZXNzKCk7CiAgICAgICAgZWZhLnNldEZp\ncnN0TmFtZSgiSiIpOwogICAgICAgIGVmYS5zZXRMYXN0TmFtZSgiVG9sa2ll\nbiIpOwogICAgICAgIAogICAgICAgIFhNTFByb3BFbWJlZEVudGl0eSBwZSA9\nIG5ldyBYTUxQcm9wRW1iZWRFbnRpdHkoKTsKICAgICAgICBwZS5zZXROYW1l\nKCJQcm9wRW1iZWRFbnRpdHkiKTsKICAgICAgICBwZS5zZXRFbWJlZFByb3Ao\nZWZhKTsKICAgICAgICAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChwZSk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAKICAgICAgICBlbS5j\nbGVhcigpOwogICAgICAgIAogICAgICAgIFF1ZXJ5IHFyeSA9IGVtLmNyZWF0\nZU5hbWVkUXVlcnkoIlhNTFByb3BFbWJlZEVudGl0eS5xdWVyeSIpOwogICAg\nICAgIHFyeS5zZXRQYXJhbWV0ZXIoImlkIiwgcGUuZ2V0SWQoKSk7CiAgICAg\nICAgcXJ5LnNldFBhcmFtZXRlcigibmFtZSIsICJQcm9wRW1iZWRFbnRpdHki\nKTsKICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJmaXJzdE5hbWUiLCAiSiIp\nOwogICAgICAgIHFyeS5zZXRQYXJhbWV0ZXIoImxhc3ROYW1lIiwgIlRvbGtp\nZW4iKTsKICAgICAgICBYTUxQcm9wRW1iZWRFbnRpdHkgcGUyID0gKFhNTFBy\nb3BFbWJlZEVudGl0eSlxcnkuZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKHBlLCBwZTIpOwogICAgICAgIGFzc2VydEVxdWFscyhl\nZmEsIHBlMi5nZXRFbWJlZFByb3AoKSk7CgogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIHFyeSA9IGVtLmNyZWF0ZU5hbWVkUXVlcnkoIlhNTFByb3BFbWJl\nZEVudGl0eS5iYWRRdWVyeSIpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1l\ndGVyKCJpZCIsIHBlLmdldElkKCkpOwogICAgICAgICAgICBxcnkuc2V0UGFy\nYW1ldGVyKCJuYW1lIiwgIlByb3BFbWJlZEVudGl0eSIpOwogICAgICAgICAg\nICBxcnkuc2V0UGFyYW1ldGVyKCJmaXJzdE5hbWUiLCAiSiIpOwogICAgICAg\nICAgICBxcnkuc2V0UGFyYW1ldGVyKCJsYXN0TmFtZSIsICJUb2xraWVuIik7\nCiAgICAgICAgICAgIHFyeS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICAg\nICAgZmFpbCgiUXVlcnkgZXhlY3V0aW9uIHNob3VsZCBoYXZlIGZhaWxlZC4i\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICBhc3NlcnRFeGNlcHRpb25NZXNzYWdlKGUsIEFyZ3VtZW50RXhjZXB0aW9u\nLmNsYXNzLAogICAgICAgICAgICAgICAgICAgICJObyBmaWVsZCBuYW1lZCBc\nImZpcnN0TmFtZVwiIGluIFwiWE1MRW1iZWRGaWVsZEFjY2Vzc1wiIiwKICAg\nICAgICAgICAgICAgICAgICAiW2ZOYW1lLCBsTmFtZV0iKTsKICAgICAgICB9\nCgogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBW\nYWxpZGF0ZXMgYW4gZW1iZWRkYWJsZSB3aXRoIHByb3BlcnR5IGFjY2VzcyBj\nYW4gYmUgdXNlZCB3aXRoaW4gYW4KICAgICAqIGVudGl0eSB3aXRoIGZpZWxk\nIGFjY2VzcwogICAgICovCiAgICBAQWxsb3dGYWlsdXJlKHZhbHVlPXRydWUs\nIAogICAgICAgIG1lc3NhZ2U9IlN1cHBvcnQgZm9yIGV4cGxpY2l0IEFjY2Vz\ncyBvbiBlbWJlZGRhYmxlcyBpcyBub3QgY29tcGxldGUuIikKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RFbWJlZGRhYmxlc1Byb3BlcnR5KCkgewogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICAKICAgICAgICBYTUxFbWJlZFByb3BBY2Nlc3Mg\nZXBhID0gbmV3IFhNTEVtYmVkUHJvcEFjY2VzcygpOwogICAgICAgIGVwYS5z\nZXRGaXJzdE5hbWUoIldhbHQiKTsKICAgICAgICBlcGEuc2V0TGFzdE5hbWUo\nIldoaXRtYW4iKTsKICAgICAgICAKICAgICAgICBYTUxGaWVsZEVtYmVkRW50\naXR5IGZlID0gbmV3IFhNTEZpZWxkRW1iZWRFbnRpdHkoKTsKICAgICAgICBm\nZS5zZXROYW1lKCJGaWVsZEVtYmVkRW50aXR5Iik7CiAgICAgICAgZmUuc2V0\nRVBBKGVwYSk7CiAgICAgICAgCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QoZmUpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAg\nZW0uY2xlYXIoKTsKICAgICAgICAKICAgICAgICBRdWVyeSBxcnkgPSBlbS5j\ncmVhdGVOYW1lZFF1ZXJ5KCJYTUxGaWVsZEVtYmVkRW50aXR5LnF1ZXJ5Iik7\nCiAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigiaWQiLCBmZS5nZXRJZCgpKTsK\nICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIkZpZWxkRW1iZWRF\nbnRpdHkiKTsKICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJmaXJzdE5hbWUi\nLCAiV2FsdCIpOwogICAgICAgIHFyeS5zZXRQYXJhbWV0ZXIoImxhc3ROYW1l\nIiwgIldoaXRtYW4iKTsKICAgICAgICBYTUxGaWVsZEVtYmVkRW50aXR5IGZl\nMiA9IChYTUxGaWVsZEVtYmVkRW50aXR5KXFyeS5nZXRTaW5nbGVSZXN1bHQo\nKTsKICAgICAgICBmZTIuZ2V0RVBBKCkuZ2V0Rmlyc3ROYW1lKCk7CiAgICAg\nICAgZmUyLmdldEVQQSgpLmdldExhc3ROYW1lKCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGZlLCBmZTIpOwogICAgICAgIGFzc2VydEVxdWFscyhlcGEsIGZl\nMi5nZXRFUEEoKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHFyeSA9\nIGVtLmNyZWF0ZU5hbWVkUXVlcnkoIlhNTEZpZWxkRW1iZWRFbnRpdHkuYmFk\nUXVlcnkiKTsKICAgICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigiaWQiLCBm\nZS5nZXRJZCgpKTsKICAgICAgICAgICAgcXJ5LnNldFBhcmFtZXRlcigibmFt\nZSIsICJGaWVsZEVtYmVkRW50aXR5Iik7CiAgICAgICAgICAgIHFyeS5zZXRQ\nYXJhbWV0ZXIoImZpcnN0TmFtZSIsICJXYWx0Iik7CiAgICAgICAgICAgIHFy\neS5zZXRQYXJhbWV0ZXIoImxhc3ROYW1lIiwgIldoaXRtYW4iKTsKICAgICAg\nICAgICAgcXJ5LmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgICAgICBmYWls\nKCJRdWVyeSBleGVjdXRpb24gc2hvdWxkIGhhdmUgZmFpbGVkLiIpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2Vy\ndEV4Y2VwdGlvbk1lc3NhZ2UoZSwgQXJndW1lbnRFeGNlcHRpb24uY2xhc3Ms\nCiAgICAgICAgICAgICAgICAgICAgIk5vIGZpZWxkIG5hbWVkIFwiZk5hbWVc\nIiBpbiBcIlhNTEVtYmVkUHJvcEFjY2Vzc1wiIiwKICAgICAgICAgICAgICAg\nICAgICAiW2ZpcnN0TmFtZSwgbGFzdE5hbWVdIik7CiAgICAgICAgfQoKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qKgogICAgICogVmFsaWRh\ndGVzIGFuIGVtYmVkZGFibGUgd2l0aCBtaXhlZCBhY2Nlc3MgY2FuIGJlIHVz\nZWQgd2l0aGluIGFuCiAgICAgKiBlbnRpdHkgd2l0aCBtaXhlZCBhY2Nlc3MK\nICAgICAqLwogICAgQEFsbG93RmFpbHVyZSh2YWx1ZT10cnVlLCAKICAgICAg\nICBtZXNzYWdlPSJTdXBwb3J0IGZvciBleHBsaWNpdCBBY2Nlc3Mgb24gZW1i\nZWRkYWJsZXMgaXMgbm90IGNvbXBsZXRlLiIpCiAgICBwdWJsaWMgdm9pZCB0\nZXN0TWl4ZWRFbWJlZGRhYmxlcygpIHsKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlclNQSSBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgCiAgICAgICAgWE1MRW1iZWRNaXhlZEFjY2VzcyBlbWEgPSBuZXcg\nWE1MRW1iZWRNaXhlZEFjY2VzcygpOwogICAgICAgIGVtYS5zZXRGaXJzdE5h\nbWUoIkoiKTsKICAgICAgICBlbWEuc2V0TGFzdE5hbWUoIlRvbGtpZW4iKTsK\nICAgICAgICBlbWEuc2V0TWlkZGxlTmFtZSgiUiIpOwogICAgICAgIAogICAg\nICAgIFhNTFByb3BNaXhlZEVudGl0eSBwbSA9IG5ldyBYTUxQcm9wTWl4ZWRF\nbnRpdHkoKTsKICAgICAgICBwbS5zZXROYW1lKCJQcm9wTWl4ZWRFbnRpdHki\nKTsKICAgICAgICBwbS5zZXRFbWJlZFByb3AoZW1hKTsKICAgICAgICAKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0u\ncGVyc2lzdChwbSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICAKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIAog\nICAgICAgIFF1ZXJ5IHFyeSA9IGVtLmNyZWF0ZU5hbWVkUXVlcnkoIlhNTFBy\nb3BNaXhlZEVudGl0eS5xdWVyeSIpOwogICAgICAgIHFyeS5zZXRQYXJhbWV0\nZXIoImlkIiwgcG0uZ2V0SWQoKSk7CiAgICAgICAgcXJ5LnNldFBhcmFtZXRl\ncigibmFtZSIsICJQcm9wTWl4ZWRFbnRpdHkiKTsKICAgICAgICBxcnkuc2V0\nUGFyYW1ldGVyKCJmaXJzdE5hbWUiLCAiSiIpOwogICAgICAgIHFyeS5zZXRQ\nYXJhbWV0ZXIoImxhc3ROYW1lIiwgIlRvbGtpZW4iKTsKICAgICAgICBxcnku\nc2V0UGFyYW1ldGVyKCJtaWRkbGVOYW1lIiwgIlIiKTsKICAgICAgICBYTUxQ\ncm9wTWl4ZWRFbnRpdHkgcG0yID0gKFhNTFByb3BNaXhlZEVudGl0eSlxcnku\nZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHBtLCBw\nbTIpOwogICAgICAgIGFzc2VydEVxdWFscyhlbWEsIHBtMi5nZXRFbWJlZFBy\nb3AoKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHFyeSA9IGVtLmNy\nZWF0ZU5hbWVkUXVlcnkoIlhNTFByb3BNaXhlZEVudGl0eS5iYWRRdWVyeSIp\nOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJpZCIsIHBtLmdldElk\nKCkpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIlBy\nb3BNaXhlZEVudGl0eSIpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1ldGVy\nKCJmaXJzdE5hbWUiLCAiSiIpOwogICAgICAgICAgICBxcnkuc2V0UGFyYW1l\ndGVyKCJsYXN0TmFtZSIsICJUb2xraWVuIik7CiAgICAgICAgICAgIHFyeS5z\nZXRQYXJhbWV0ZXIoIm1pZGRsZU5hbWUiLCAiUiIpOwogICAgICAgICAgICBx\ncnkuZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAgICAgIGZhaWwoIlF1ZXJ5\nIGV4ZWN1dGlvbiBzaG91bGQgaGF2ZSBmYWlsZWQuIik7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0RXhjZXB0\naW9uTWVzc2FnZShlLCBBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcywKICAgICAg\nICAgICAgICAgICJObyBmaWVsZCBuYW1lZCBcIm1pZGRsZU5hbWVcIiBpbiBc\nIlhNTEVtYmVkTWl4ZWRBY2Nlc3NcIiIsCiAgICAgICAgICAgICAgICAiW2Zp\ncnN0TmFtZSwgbGFzdE5hbWUsIG1OYW1lXSIpOwogICAgICAgIH0KCiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KfQo=\n","encoding":"base64"}

