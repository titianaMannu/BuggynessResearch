{"sha":"b4303b842afb66fd2ae51f026e1f36b516f541a1","node_id":"MDQ6QmxvYjIwNjM2NDpiNDMwM2I4NDJhZmI2NmZkMmFlNTFmMDI2ZTFmMzZiNTE2ZjU0MWEx","size":17336,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b4303b842afb66fd2ae51f026e1f36b516f541a1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY2FjaGUu\nanBhOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkNhY2hlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuQ2Fj\naGVSZXRyaWV2ZU1vZGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5DYWNo\nZVN0b3JlTW9kZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1h\nbmFnZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5D\nbGFzc01hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpk\nYmMuQWJzdHJhY3RKREJDTGlzdGVuZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLmpkYmMuSkRCQ0V2ZW50OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5j\nYWNoZS5qcGEubW9kZWwuQ2FjaGVFbnRpdHk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuY2FjaGUuanBhLm1vZGVsLkNhY2hlYWJs\nZUVudGl0eTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5jYWNoZS5qcGEubW9kZWwuTmVnYXRlZENhY2hhYmxlRW50aXR5OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNhY2hlLmpwYS5t\nb2RlbC5OZWdhdGVkVW5jYWNoZWFibGVFbnRpdHk7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY2FjaGUuanBhLm1vZGVsLlVuY2Fj\naGVhYmxlRW50aXR5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmNhY2hlLmpwYS5tb2RlbC5VbnNwZWNpZmllZEVudGl0eTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jYWNoZS5qcGEu\nbW9kZWwuWG1sQ2FjaGVhYmxlRW50aXR5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmNhY2hlLmpwYS5tb2RlbC5YbWxVbmNhY2hl\nYWJsZUVudGl0eTsKCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdENh\nY2hlTW9kZVRlc3RDYXNlIGV4dGVuZHMgQWJzdHJhY3RDYWNoZVRlc3RDYXNl\nIHsKICAgIHB1YmxpYyBhYnN0cmFjdCBPcGVuSlBBRW50aXR5TWFuYWdlckZh\nY3RvcnlTUEkgZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKTsKCiAgICBwdWJs\naWMgYWJzdHJhY3QgTGlzdDxTdHJpbmc+IGdldFNxbCgpOwoKICAgIHByb3Rl\nY3RlZCBhYnN0cmFjdCBDbGFzczw/PltdIGdldEV4cGVjdGVkTm90SW5DYWNo\nZSgpOwoKICAgIHByb3RlY3RlZCBhYnN0cmFjdCBDbGFzczw/PltdIGdldEV4\ncGVjdGVkSW5DYWNoZSgpOwoKICAgIC8vID09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09CiAgICAvLyBBc3NlcnRzCiAgICAvLyA9PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PQogICAgLyoqCiAgICAgKiBBc3NlcnQgd2hldGhlciB0aGUg\nY2FjaGUgY29udGFpbnMgdGhlIGV4cGVjdGVkIHJlc3VsdHMuCiAgICAgKiAK\nICAgICAqIEBwYXJhbSBjYWNoZQogICAgICogICAgICAgICAgICBUaGUgSlBB\nIENhY2hlIHRvIHZlcmlmeQogICAgICogQHBhcmFtIGV4cGVjdENhY2hlYWJs\nZXMKICAgICAqICAgICAgICAgICAgV2hldGhlciBlbnRpdGllcyB3aXRoIEBD\nYWNoZWFibGUodHJ1ZSkgc2hvdWxkIGJlIGluIHRoZSBjYWNoZQogICAgICog\nICAgICAgICAgICAoYWxtb3N0IGFsd2F5cyB0cnVlKQogICAgICogQHBhcmFt\nIGV4cGVjdFVuY2FjaGVhYmxlcwogICAgICogICAgICAgICAgICBXaGV0aGVy\nIGVudGl0aWVzIHdpdGggQENhY2hlYWJsZShmYWxzZSkgc2hvdWxkIGJlIGlu\nIHRoZSBjYWNoZQogICAgICogICAgICAgICAgICAoYWxtb3N0IGFsd2F5cyBm\nYWxzZSkKICAgICAqIEBwYXJhbSBleHBlY3RVbnNwZWNpZmllZAogICAgICog\nICAgICAgICAgICBXaGV0aGVyIGVudGl0aWVzIHdpdGggbm8gQENhY2hlYWJs\nZSBhbm5vdGF0aW9uIHNob3VsZCBiZSBpbgogICAgICogICAgICAgICAgICB0\naGUgY2FjaGUgKHZhcmllcyBwZXIgY29uZmlnKS4KICAgICAqLwogICAgcHJv\ndGVjdGVkIHZvaWQgYXNzZXJ0Q2FjaGVDb250ZW50cyhDYWNoZSBjYWNoZSwg\nYm9vbGVhbiBleHBlY3RDYWNoZWFibGVzLCBib29sZWFuIGV4cGVjdFVuY2Fj\naGVhYmxlcywKICAgICAgICBib29sZWFuIGV4cGVjdFVuc3BlY2lmaWVkKSB7\nCiAgICAgICAgYXNzZXJ0Q2FjaGVhYmxlcyhjYWNoZSwgZXhwZWN0Q2FjaGVh\nYmxlcyk7CiAgICAgICAgYXNzZXJ0VW5jYWNoZWFibGVzKGNhY2hlLCBleHBl\nY3RVbmNhY2hlYWJsZXMpOwogICAgICAgIGFzc2VydFVuc3BlY2lmaWVkKGNh\nY2hlLCBleHBlY3RVbnNwZWNpZmllZCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBBc3NlcnQgd2hldGhlciB0aGUgY2FjaGVhYmxlIHR5cGVzIGFyZSBpbiB0\naGUgY2FjaGUuIFRoaXMgbWV0aG9kIGV4aXRzIG9uCiAgICAgKiB0aGUgZmly\nc3QgY2FjaGUgJ21pc3MnLgogICAgICogCiAgICAgKiBAcGFyYW0gY2FjaGUK\nICAgICAqICAgICAgICAgICAgSlBBIENhY2hlIHRvIHZlcmlmeQogICAgICog\nQHBhcmFtIGV4cGVjdGVkCiAgICAgKiAgICAgICAgICAgIElmIHRydWUgdGhl\nIGNhY2hlYWJsZSB0eXBlcyBzaG91bGQgYmUgaW4gdGhlIGNhY2hlLCBpZiBm\nYWxzZQogICAgICogICAgICAgICAgICB0aGV5IHNob3VsZCBub3QgYmUuCiAg\nICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFzc2VydENhY2hlYWJsZXMoQ2Fj\naGUgY2FjaGUsIGJvb2xlYW4gZXhwZWN0ZWQpIHsKICAgICAgICBhc3NlcnRD\nYWNoZWQoY2FjaGUsIENhY2hlYWJsZUVudGl0eS5jbGFzcywgMSwgZXhwZWN0\nZWQpOwogICAgICAgIGFzc2VydENhY2hlZChjYWNoZSwgTmVnYXRlZFVuY2Fj\naGVhYmxlRW50aXR5LmNsYXNzLCAxLCBleHBlY3RlZCk7CiAgICAgICAgYXNz\nZXJ0Q2FjaGVkKGNhY2hlLCBYbWxDYWNoZWFibGVFbnRpdHkuY2xhc3MsIDEs\nIGV4cGVjdGVkKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFzc2VydCB3aGV0\naGVyIHRoZSB1bmNhY2hlYWJsZSB0eXBlcyBhcmUgaW4gdGhlIGNhY2hlLiBU\naGlzIG1ldGhvZCBleGl0cwogICAgICogb24gdGhlIGZpcnN0IGNhY2hlICdt\naXNzJy4KICAgICAqIAogICAgICogQHBhcmFtIGNhY2hlCiAgICAgKiAgICAg\nICAgICAgIEpQQSBDYWNoZSB0byB2ZXJpZnkKICAgICAqIEBwYXJhbSBleHBl\nY3RlZAogICAgICogICAgICAgICAgICBJZiB0cnVlIHRoZSB1bmNhY2hlYWJs\nZSB0eXBlcyBzaG91bGQgYmUgaW4gdGhlIGNhY2hlLCBpZiBmYWxzZQogICAg\nICogICAgICAgICAgICB0aGV5IHNob3VsZCBub3QgYmUuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCB2b2lkIGFzc2VydFVuY2FjaGVhYmxlcyhDYWNoZSBjYWNo\nZSwgYm9vbGVhbiBleHBlY3RlZCkgewogICAgICAgIGFzc2VydENhY2hlZChj\nYWNoZSwgVW5jYWNoZWFibGVFbnRpdHkuY2xhc3MsIDEsIGV4cGVjdGVkKTsK\nICAgICAgICBhc3NlcnRDYWNoZWQoY2FjaGUsIFhtbFVuY2FjaGVhYmxlRW50\naXR5LmNsYXNzLCAxLCBleHBlY3RlZCk7CiAgICAgICAgYXNzZXJ0Q2FjaGVk\nKGNhY2hlLCBOZWdhdGVkQ2FjaGFibGVFbnRpdHkuY2xhc3MsIDEsIGV4cGVj\ndGVkKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFzc2VydCB3aGV0aGVyIHRo\nZSB1bnNwZWNpZmllZCB0eXBlcyBhcmUgaW4gdGhlIGNhY2hlLiBUaGlzIG1l\ndGhvZCBleGl0cwogICAgICogb24gdGhlIGZpcnN0IGNhY2hlICdtaXNzJy4K\nICAgICAqIAogICAgICogQHBhcmFtIGNhY2hlCiAgICAgKiAgICAgICAgICAg\nIEpQQSBDYWNoZSB0byB2ZXJpZnkKICAgICAqIEBwYXJhbSBleHBlY3RlZAog\nICAgICogICAgICAgICAgICBJZiB0cnVlIHRoZSB1bnNwZWNpZmllZCB0eXBl\ncyBzaG91bGQgYmUgaW4gdGhlIGNhY2hlLCBpZiBmYWxzZQogICAgICogICAg\nICAgICAgICB0aGV5IHNob3VsZCBub3QgYmUuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCB2b2lkIGFzc2VydFVuc3BlY2lmaWVkKENhY2hlIGNhY2hlLCBib29s\nZWFuIGV4cGVjdGVkKSB7CiAgICAgICAgYXNzZXJ0Q2FjaGVkKGNhY2hlLCBV\nbnNwZWNpZmllZEVudGl0eS5jbGFzcywgMSwgZXhwZWN0ZWQpOwogICAgfQoK\nICAgIC8qKgogICAgICogQXNzZXJ0IHRoYXQgbm8gc3FsIGlzIGV4ZWN1dGVk\nIHdoZW4gcnVubmluZyB0aGUgc3VwcGxpZWQgQWN0aW9uLgogICAgICogCiAg\nICAgKiBAcGFyYW0gYWN0CiAgICAgKiAgICAgICAgICAgIEFjdGlvbiB0byBl\neGVjdXRlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBhc3NlcnROb1NxbChB\nY3Rpb24gYWN0KSB7CiAgICAgICAgYXNzZXJ0U3FsSW5jKGFjdCwgMCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBBc3NlcnQgdGhhdCA8bGl0ZXJhbD5leHBl\nY3RlZFNxbHM8L2xpdGVyYWw+IFNRTCBzdGF0ZW1lbnRzIGFyZSBleGVjdXRl\nZAogICAgICogd2hlbiBydW5uaW5nIDxsaXRlcmFsPmFjdDwvbGl0ZXJhbD4K\nICAgICAqIAogICAgICogQHBhcmFtIGFjdAogICAgICogICAgICAgICAgICBB\nY3Rpb24gdG8gcnVuLgogICAgICogQHBhcmFtIGV4cGVjdGVkU3FscwogICAg\nICogICAgICAgICAgICBOdW1iZXIgb2YgU1FMIHN0YXRlbWVudHMgdGhhdCBz\naG91bGQgYmUgZXhlY3V0ZWQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGFz\nc2VydFNxbEluYyhBY3Rpb24gYWN0LCBpbnQgZXhwZWN0ZWRTcWxzKSB7CiAg\nICAgICAgaW50IGJlZm9yZSA9IGdldFNxbCgpLnNpemUoKTsKICAgICAgICBh\nY3QucnVuKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGJlZm9yZSArIGV4cGVj\ndGVkU3FscywgZ2V0U3FsKCkuc2l6ZSgpKTsKICAgIH0KCiAgICAvLyA9PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gVXRpbGl0eSBjbGFzc2Vz\nCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLyoqCiAg\nICAgKiBCYXNpYyAncnVubmFibGUnIGludGVyZmFjZSB1c2VkIHRvIHJ1biBh\nIHNldCBvZiBjb21tYW5kcywgdGhlbiBhbmFseXplCiAgICAgKiB0aGUgbnVt\nYmVyIG9mIFNRTCBzdGF0ZW1lbnRzIHRoYXQgcmVzdWx0LgogICAgICovCiAg\nICBwdWJsaWMgaW50ZXJmYWNlIEFjdGlvbiB7CiAgICAgICAgcHVibGljIHZv\naWQgcnVuKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTaW1wbGUgSkRCQ0xp\nc3RlbmVyIHdoaWNoIHN0b3JlcyB0aGUgZXhlY3V0ZWQgc3FsIGluIGEgTGlz\ndC4gVGhlIExpc3QgaXMKICAgICAqIHByb3ZpZGVkIGJ5IHRoZSBnZXRTcWwo\nKSBtZXRob2Qgc28gdGhhdCBzdWJjbGFzc2VzIG1heSB1c2Ugc2VwYXJhdGUK\nICAgICAqIGxpc3RzLgogICAgICovCiAgICBwdWJsaWMgY2xhc3MgTGlzdGVu\nZXIgZXh0ZW5kcyBBYnN0cmFjdEpEQkNMaXN0ZW5lciB7CiAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgYmVmb3JlRXhlY3V0ZVN0YXRl\nbWVudChKREJDRXZlbnQgZXZlbnQpIHsKICAgICAgICAgICAgaWYgKGV2ZW50\nLmdldFNRTCgpICE9IG51bGwgJiYgZ2V0U3FsKCkgIT0gbnVsbCkgewogICAg\nICAgICAgICAgICAgZ2V0U3FsKCkuYWRkKGV2ZW50LmdldFNRTCgpKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyA9PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PQogICAgLy8gVGVzdCB1dGlsaXRpZXMKICAgIC8v\nID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICBwdWJsaWMgYm9vbGVh\nbiBnZXRDYWNoZUVuYWJsZWQoKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAg\nICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8v\nIENvbW1vbiB0ZXN0IG1ldGhvZHMuCiAgICAvLyA9PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PQogICAgLyoqCiAgICAgKiBFbnN1cmUgdGhhdCBlYWNoIGNh\nbGwgdGhlIGVtLmZpbmQgZ2VuZXJhdGVzIGFuIFNRTCBzdGF0ZW1lbnQgd2hl\nbgogICAgICogQ2FjaGVSZXRyaWV2ZU1vZGUuQllQQVNTIGlzIHVzZWQuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RSZWFkTW9kZUJ5YXNzKCkgewog\nICAgICAgIGFzc2VydFNxbEluYyhuZXcgQWN0aW9uKCkgewogICAgICAgICAg\nICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKS5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgICAgICBlbS5zZXRQcm9wZXJ0\neShSRVRSSUVWRV9NT0RFX1BST1AsIENhY2hlUmV0cmlldmVNb2RlLkJZUEFT\nUyk7CiAgICAgICAgICAgICAgICBmb3IgKENsYXNzPD8+IGNscyA6IHBlcnNp\nc3RlbnRUeXBlcykgewogICAgICAgICAgICAgICAgICAgIGVtLmZpbmQoY2xz\nLCAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVtLmNs\nb3NlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCBwZXJzaXN0ZW50VHlw\nZXMubGVuZ3RoKTsKICAgIH0KCiAgICAvKioKICAgICAqIDxwPgogICAgICog\nRW5zdXJlIHRoYXQgZWFjaCBlbnRpdHkgaW4gZ2V0RXhwZWN0ZWRJbkNhY2hl\nKCk6CiAgICAgKiA8dWw+CiAgICAgKiA8bGk+aXMgaW4gdGhlIGNhY2hlPC9s\naT4KICAgICAqIDxsaT5kb2VzIG5vdCBnbyB0byB0aGUgZGF0YWJhc2UgZm9y\nIGEgZmluZCBvcGVyYXRpb248L2xpPgogICAgICogPGxpPmlzIG5vdCBudWxs\nPC9saT4KICAgICAqIDwvdWw+CiAgICAgKiA8L3A+CiAgICAgKiA8cD4KICAg\nICAqIGFuZAogICAgICogPC9wPgogICAgICogPHA+CiAgICAgKiBFbnN1cmUg\ndGhhdCBlYWNoIGVudGl0eSBpbiBnZXRFeHBlY3RlZE5vdEluQ2FjaGUoKSA6\nCiAgICAgKiA8dWw+CiAgICAgKiA8bGk+aXMgbm90IGluIHRoZSBjYWNoZTwv\nbGk+CiAgICAgKiA8bGk+cmVzdWx0cyBpbiBhIHNpbmdsZSBTUUwgc3RhdGVt\nZW50IHdoZW4gZW0uZmluZCgpIGlzIGNhbGxlZDwvbGk+CiAgICAgKiA8bGk+\naXMgbm90IG51bGw8L2xpPgogICAgICogPC91bD4KICAgICAqIDwvcD4KICAg\nICAqIAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmV0cmlldmVNb2Rl\nVXNlKCkgewogICAgICAgIGFzc2VydE5vU3FsKG5ldyBBY3Rpb24oKSB7CiAg\nICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBnZXRFbnRpdHlNYW5hZ2VyRmFjdG9yeSgp\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgICAgICAgIGVtLnNl\ndFByb3BlcnR5KFJFVFJJRVZFX01PREVfUFJPUCwgQ2FjaGVSZXRyaWV2ZU1v\nZGUuVVNFKTsKICAgICAgICAgICAgICAgIGZvciAoQ2xhc3M8Pz4gY2xzIDog\nZ2V0RXhwZWN0ZWRJbkNhY2hlKCkpIHsKICAgICAgICAgICAgICAgICAgICBh\nc3NlcnRDYWNoZWQoZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKS5nZXRDYWNo\nZSgpLCBjbHMsIDEsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIGFzc2Vy\ndE5vdE51bGwoZW0uZmluZChjbHMsIDEpKTsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9KTsKICAgICAgICBhc3NlcnRTcWxJbmMobmV3IEFjdGlvbigpIHsK\nICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGdldEVudGl0eU1hbmFnZXJGYWN0b3J5\nKCkuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICAgICAgZW0u\nc2V0UHJvcGVydHkoUkVUUklFVkVfTU9ERV9QUk9QLCBDYWNoZVJldHJpZXZl\nTW9kZS5VU0UpOwogICAgICAgICAgICAgICAgZm9yIChDbGFzczw/PiBjbHMg\nOiBnZXRFeHBlY3RlZE5vdEluQ2FjaGUoKSkgewogICAgICAgICAgICAgICAg\nICAgIGFzc2VydENhY2hlZChnZXRFbnRpdHlNYW5hZ2VyRmFjdG9yeSgpLmdl\ndENhY2hlKCksIGNscywgMSwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAg\nIGFzc2VydE5vdE51bGwoZW0uZmluZChjbHMsIDEpKTsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9LCBnZXRFeHBlY3RlZE5vdEluQ2FjaGUoKS5sZW5ndGgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHVwZGF0ZUFuZEZpbmQoQ2xhc3M8\nPyBleHRlbmRzIENhY2hlRW50aXR5PiBjbGFzc1RvVXBkYXRlLCBpbnQgaWRU\nb1VwZGF0ZSwKICAgICAgICAgICAgQ2xhc3M8PyBleHRlbmRzIENhY2hlRW50\naXR5PiBjbGFzc1RvRmluZCwgaW50IGlkVG9GaW5kLAogICAgICAgICAgICBD\nYWNoZVN0b3JlTW9kZSBzdG9yZU1vZGUsIENhY2hlUmV0cmlldmVNb2RlIHJl\ndHJpZXZlTW9kZSkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBnZXRF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSgpLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nCiAgICAgICAgaWYgKHN0b3JlTW9kZSAhPSBudWxsKSB7CiAgICAgICAgICAg\nIGVtLnNldFByb3BlcnR5KFNUT1JFX01PREVfUFJPUCwgc3RvcmVNb2RlKTsK\nICAgICAgICB9CiAgICAgICAgaWYgKHJldHJpZXZlTW9kZSAhPSBudWxsKSB7\nCiAgICAgICAgICAgIGVtLnNldFByb3BlcnR5KFJFVFJJRVZFX01PREVfUFJP\nUCwgcmV0cmlldmVNb2RlKTsKICAgICAgICB9CgogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBDYWNoZUVudGl0eSBjZTEg\nPSBlbS5maW5kKGNsYXNzVG9VcGRhdGUsIGlkVG9VcGRhdGUpOwogICAgICAg\nIENhY2hlRW50aXR5IGNlMiA9IGVtLmZpbmQoY2xhc3NUb0ZpbmQsIGlkVG9G\naW5kKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGNlMSk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChjZTIpOwogICAgICAgIGNlMS5zZXROYW1lKGNlMS5nZXRO\nYW1lKCkgKyAiVVBEIik7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qKgog\nICAgICogPHA+CiAgICAgKiBUZXN0IGxvZ2ljIHRvIHZhbGlkYXRlIGRpZmZl\ncmVudCBDYWNoZVN0b3JlTW9kZXMuIEl0IHNob3VsZCBiZWhhdmUKICAgICAq\nIGlkZW50aWNhbGx5IGZvciBhbGwgc2hhcmVkLWNhY2hlLW1vZGVzIGV4Y2Vw\ndCBOT05FIHdoaWNoIG5ldmVyIGNhY2hlcwogICAgICogYW55dGhpbmcuCiAg\nICAgKiA8L3A+CiAgICAgKiA8cD4KICAgICAqIFRoaXMgbWV0aG9kIG9ubHkg\ndGVzdHMgc2V0dGluZyB0aGUgc3RvcmUgbW9kZSBvbiB0aGUgRW50aXR5TWFu\nYWdlcgogICAgICogaXRzZWxmLgogICAgICogPC9wPgogICAgICogPHA+CiAg\nICAgKiBUaGUgZmlyc3QgdHJhbnNhY3Rpb24gdXBkYXRlcyBDYWNoZWFibGVF\nbnRpdHk6OjEgd2l0aCBDYWNoZVN0b3JlTW9kZQogICAgICogdHJhbjFTdG9y\nZU1vZGUsIGNhbGxzIGZpbmQgZm9yIENhY2hlYWJsZUVudGl0eTo6MSBhbmQK\nICAgICAqIFhtbENhY2hlYWJsZUVudGl0eTo6MS4gVGhpcyB3aWxsIG5ldmVy\nIHRyaWdnZXIgYSBjYWNoZSByZWZyZXNoIHNpbmNlIHRoZQogICAgICogZGF0\nYSBpcyB1cCB0byBkYXRlIC0gYnV0IGl0IGNvdWxkIHRyaWdnZXIgYWRkaXRp\nb25hbCBTUUwKICAgICAqIDwvcD4KICAgICAqIDxwPgogICAgICogVGhlIHNl\nY29uZCB0cmFuc2FjdGlvbiB1cGRhdGVzIFhtbENhY2hlYWJsZUVudGl0eTo6\nMSB3aXRoIENhY2hlU3RvcmVNb2RlCiAgICAgKiB0cmFuMlN0b3JlTW9kZSwg\nY2FsbHMgZmluZCBmb3IgQ2FjaGVhYmxlRW50aXR5OjoxIGFuZAogICAgICog\nWG1sQ2FjaGVhYmxlRW50aXR5OjoxLiBJbiB0aGlzIGNhc2UgaWYgdHJhbjJT\ndG9yZU1vZGUgPT0KICAgICAqIENhY2hlU3RvcmVNb2RlLlJFRlJFU0ggd2Ug\nbWF5IHVwZGF0ZSB0aGUgY2FjaGUgd2l0aCB0aGUgc3RhdGUgb2YKICAgICAq\nIENhY2hlYWJsZUVudGl0eTo6MS4KICAgICAqIDwvcD4KICAgICAqIAogICAg\nICogQHBhcmFtIHRyYW4xU3RvcmVNb2RlCiAgICAgKiAgICAgICAgICAgIENh\nY2hlU3RvcmVNb2RlIHRvIHVzZSBpbiB0cmFuc2FjdGlvbiAxLgogICAgICog\nQHBhcmFtIHRyYW4yU3RvcmVNb2RlCiAgICAgKiAgICAgICAgICAgIGNhY2hl\nU3RvcmVNb2RlIHRvIHVzZSBpbiB0cmFuc2FjdGlvbiAyLgogICAgICogQHBh\ncmFtIGNhY2hlVXBkYXRlZEZvclRyYW4xCiAgICAgKiAgICAgICAgICAgIFdo\nZXRoZXIgdGhlIGNhY2hlIHdpbGwgY29udGFpbiBhbiB1cGRhdGVkIHZlcnNp\nb24gb2YKICAgICAqICAgICAgICAgICAgQ2FjaGVhYmxlRW50aXR5OjoxCiAg\nICAgKiBAcGFyYW0gY2FjaGVVcGRhdGVkRm9yVHJhbjIKICAgICAqICAgICAg\nICAgICAgV2hldGhlciB0aGUgY2FjaGUgd2lsbCBjb250YWluIGFuIHVwZGF0\nZWQgdmVyc2lvbiBvZgogICAgICogICAgICAgICAgICBYbWxDYWNoZWFibGVF\nbnRpdHk6OjEKICAgICAqIEBwYXJhbSB2ZXJzaW9uCiAgICAgKiAgICAgICAg\nICAgIEV4cGVjdGVkIHN0YXJ0aW5nIHZlcnNpb24gb2YgZm9yIGJvdGggZW50\naXRpZXMKICAgICAqLwogICAgcHVibGljIHZvaWQgZW50aXR5TWFuYWdlclN0\nb3JlTW9kZVRlc3QoQ2FjaGVTdG9yZU1vZGUgdHJhbjFTdG9yZU1vZGUsIENh\nY2hlU3RvcmVNb2RlIHRyYW4yU3RvcmVNb2RlLAogICAgICAgIGJvb2xlYW4g\nY2FjaGVVcGRhdGVkRm9yVHJhbjEsIGJvb2xlYW4gY2FjaGVVcGRhdGVkRm9y\nVHJhbjIsIGludCB2ZXJzaW9uKSB7CiAgICAgICAgdXBkYXRlQW5kRmluZChD\nYWNoZWFibGVFbnRpdHkuY2xhc3MsIDEsIFhtbENhY2hlYWJsZUVudGl0eS5j\nbGFzcywgMSwgdHJhbjFTdG9yZU1vZGUsIG51bGwpOwogICAgICAgIHVwZGF0\nZUFuZEZpbmQoWG1sQ2FjaGVhYmxlRW50aXR5LmNsYXNzLCAxLCBDYWNoZWFi\nbGVFbnRpdHkuY2xhc3MsIDEsIHRyYW4yU3RvcmVNb2RlLCBudWxsKTsKCiAg\nICAgICAgLy8gZ2V0IGVudGl0aWVzIGZyb20gdGhlIGNhY2hlIGFuZCBlbnN1\ncmUgdGhlaXIgdmVyc2lvbnMgYXJlIGFzCiAgICAgICAgLy8gZXhwZWN0ZWQu\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGdldEVudGl0eU1hbmFnZXJG\nYWN0b3J5KCkuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtID0g\nZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKS5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgQ2FjaGVhYmxlRW50aXR5IGNlRnJvbUVNID0gZW0uZmlu\nZChDYWNoZWFibGVFbnRpdHkuY2xhc3MsIDEpOwogICAgICAgIFhtbENhY2hl\nYWJsZUVudGl0eSB4Y2VGcm9tRU0gPSBlbS5maW5kKFhtbENhY2hlYWJsZUVu\ndGl0eS5jbGFzcywgMSk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoY2FjaGVVcGRhdGVkRm9yVHJhbjEgPyB2ZXJzaW9uICsg\nMSA6IHZlcnNpb24sIGNlRnJvbUVNLmdldFZlcnNpb24oKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKGNhY2hlVXBkYXRlZEZvclRyYW4yID8gdmVyc2lvbiAr\nIDEgOiB2ZXJzaW9uLCB4Y2VGcm9tRU0uZ2V0VmVyc2lvbigpKTsKCiAgICAg\nICAgLy8gZ2V0IHRoZSBkYXRhIGZyb20gdGhlIGRhdGFiYXNlLiBWZXJzaW9u\nIHNob3VsZCBhbHdheXMgaGF2ZSBiZWVuCiAgICAgICAgLy8gdXBkYXRlZCBp\nbiB0aGlzIGNhc2UuCiAgICAgICAgZW0gPSBnZXRFbnRpdHlNYW5hZ2VyRmFj\ndG9yeSgpLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5zZXRQ\ncm9wZXJ0eShSRVRSSUVWRV9NT0RFX1BST1AsIENhY2hlUmV0cmlldmVNb2Rl\nLkJZUEFTUyk7CiAgICAgICAgQ2FjaGVhYmxlRW50aXR5IGNlRnJvbURCID0K\nICAgICAgICAgICAgKENhY2hlYWJsZUVudGl0eSkgZW0uY3JlYXRlTmF0aXZl\nUXVlcnkoIlNlbGVjdCAqIGZyb20gQ2FjaGVhYmxlRW50aXR5IHdoZXJlIGlk\nID0gMSIsIENhY2hlYWJsZUVudGl0eS5jbGFzcykKICAgICAgICAgICAgICAg\nIC5nZXRTaW5nbGVSZXN1bHQoKTsKCiAgICAgICAgWG1sQ2FjaGVhYmxlRW50\naXR5IHhjZUZyb21EQiA9CiAgICAgICAgICAgIChYbWxDYWNoZWFibGVFbnRp\ndHkpIGVtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJTZWxlY3QgKiBmcm9tIFhtbENh\nY2hlYWJsZUVudGl0eSB3aGVyZSBpZCA9IDEiLAogICAgICAgICAgICAgICAg\nWG1sQ2FjaGVhYmxlRW50aXR5LmNsYXNzKS5nZXRTaW5nbGVSZXN1bHQoKTsK\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHZlcnNpb24gKyAxLCBjZUZyb21EQi5n\nZXRWZXJzaW9uKCkpOwogICAgICAgIGFzc2VydEVxdWFscyh2ZXJzaW9uICsg\nMSwgeGNlRnJvbURCLmdldFZlcnNpb24oKSk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIEV4ZWN1dGUgdGhlIGRlZmF1bHRT\ndG9yZU1vZGVUZXN0IHdpdGgKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVz\ndFN0b3JlTW9kZVVzZUJ5cGFzcygpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGlmIChnZXRDYWNoZUVuYWJsZWQoKSkgewogICAgICAgICAgICBlbnRp\ndHlNYW5hZ2VyU3RvcmVNb2RlVGVzdChDYWNoZVN0b3JlTW9kZS5VU0UsIENh\nY2hlU3RvcmVNb2RlLkJZUEFTUywgdHJ1ZSwgZmFsc2UsIDEpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RvcmVNb2RlVXNlVXNl\nKCkgewogICAgICAgIGlmIChnZXRDYWNoZUVuYWJsZWQoKSkgewogICAgICAg\nICAgICBlbnRpdHlNYW5hZ2VyU3RvcmVNb2RlVGVzdChDYWNoZVN0b3JlTW9k\nZS5VU0UsIENhY2hlU3RvcmVNb2RlLlVTRSwgdHJ1ZSwgdHJ1ZSwgMSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTdG9yZU1vZGVV\nc2VSZWZyZXNoKCkgewogICAgICAgIGlmIChnZXRDYWNoZUVuYWJsZWQoKSkg\newogICAgICAgICAgICBlbnRpdHlNYW5hZ2VyU3RvcmVNb2RlVGVzdChDYWNo\nZVN0b3JlTW9kZS5VU0UsIENhY2hlU3RvcmVNb2RlLlJFRlJFU0gsIHRydWUs\nIHRydWUsIDEpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBl\nbnRpdHlNYW5hZ2VyU3RvcmVNb2RlVGVzdCgpIHsKICAgICAgICBpZiAoZ2V0\nQ2FjaGVFbmFibGVkKCkpIHsKICAgICAgICAgICAgZW50aXR5TWFuYWdlclN0\nb3JlTW9kZVRlc3QoQ2FjaGVTdG9yZU1vZGUuQllQQVNTLCBDYWNoZVN0b3Jl\nTW9kZS5CWVBBU1MsIGZhbHNlLCBmYWxzZSwgMSk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTdG9yZU1vZGVCeXBhc3NVc2UoKSB7\nCiAgICAgICAgaWYgKGdldENhY2hlRW5hYmxlZCgpKSB7CiAgICAgICAgICAg\nIGVudGl0eU1hbmFnZXJTdG9yZU1vZGVUZXN0KENhY2hlU3RvcmVNb2RlLkJZ\nUEFTUywgQ2FjaGVTdG9yZU1vZGUuVVNFLCBmYWxzZSwgdHJ1ZSwgMSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTdG9yZU1vZGVC\neXBhc3NSZWZyZXNoKCkgewogICAgICAgIGlmIChnZXRDYWNoZUVuYWJsZWQo\nKSkgewogICAgICAgICAgICAvLyBSRUZSRVNIIHBpY2tzIHVwIHRoZSBjaGFu\nZ2VzIGZyb20gdGhlIGRhdGFiYXNlLCBldmVuIHRob3VnaCB0aGUKICAgICAg\nICAgICAgLy8gZmlyc3QgdXBkYXRlIHdhcyBkb25lIHdpdGggQllQQVNTCiAg\nICAgICAgICAgIGVudGl0eU1hbmFnZXJTdG9yZU1vZGVUZXN0KENhY2hlU3Rv\ncmVNb2RlLkJZUEFTUywgQ2FjaGVTdG9yZU1vZGUuUkVGUkVTSCwgdHJ1ZSwg\ndHJ1ZSwgMSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RTdG9yZU1vZGVSZWZyZXNoVXNlKCkgewogICAgICAgIGlmIChnZXRDYWNo\nZUVuYWJsZWQoKSkgewogICAgICAgICAgICBlbnRpdHlNYW5hZ2VyU3RvcmVN\nb2RlVGVzdChDYWNoZVN0b3JlTW9kZS5SRUZSRVNILCBDYWNoZVN0b3JlTW9k\nZS5VU0UsIHRydWUsIHRydWUsIDEpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0U3RvcmVNb2RlUmVmcmVzaEJ5cGFzcygpIHsKICAg\nICAgICBpZiAoZ2V0Q2FjaGVFbmFibGVkKCkpIHsKICAgICAgICAgICAgZW50\naXR5TWFuYWdlclN0b3JlTW9kZVRlc3QoQ2FjaGVTdG9yZU1vZGUuUkVGUkVT\nSCwgQ2FjaGVTdG9yZU1vZGUuQllQQVNTLCB0cnVlLCBmYWxzZSwgMSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTdG9yZU1vZGVS\nZWZyZXNoUmVmcmVzaCgpIHsKICAgICAgICBpZiAoZ2V0Q2FjaGVFbmFibGVk\nKCkpIHsKICAgICAgICAgICAgZW50aXR5TWFuYWdlclN0b3JlTW9kZVRlc3Qo\nQ2FjaGVTdG9yZU1vZGUuUkVGUkVTSCwgQ2FjaGVTdG9yZU1vZGUuUkVGUkVT\nSCwgdHJ1ZSwgdHJ1ZSwgMSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0UmVzdWx0c0Zyb21RdWVyeUFyZUluQ2FjaGUoKSB7\nIAogICAgICAgIC8vIGNsZWFyIGNhY2hlCiAgICAgICAgZ2V0RW50aXR5TWFu\nYWdlckZhY3RvcnkoKS5nZXRTdG9yZUNhY2hlKCkuZXZpY3RBbGwoKTsKICAg\nICAgICBnZXRFbnRpdHlNYW5hZ2VyRmFjdG9yeSgpLmdldFF1ZXJ5UmVzdWx0\nQ2FjaGUoKS5ldmljdEFsbCgpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKS5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgU3RyaW5nIHF1ZXJ5OyAKICAgICAgICBmb3IoQ2xh\nc3M8Pz4gY2xzIDogcGVyc2lzdGVudFR5cGVzKSB7CiAgICAgICAgICAgIHF1\nZXJ5ID0gIlNlbGVjdCBlIGZyb20gIiArIGdldEFsaWFzKGNscykgKyAiIGUi\nOwogICAgICAgICAgICBMaXN0PD8+IHJlcyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1\nZXJ5KS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGFzc2VydE5vdE51\nbGwoU3RyaW5nLmZvcm1hdCgiRXhwZWN0ZWQgdG8gZmluZCBzb21lIHJlc3Vs\ndHMgd2hlbiBydW5uaW5nIHF1ZXJ5ICVzIixxdWVyeSksIHJlcyk7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoU3RyaW5nLmZvcm1hdCgiRXhwZWN0ZWQgbW9y\nZSB0aGFuIDAgcmVzdWx0cyBydW5uaW5nIHF1ZXJ5ICVzIixxdWVyeSkscmVz\nLnNpemUoKSAhPSAwICkgOwogICAgICAgIH0KICAgICAgICBmb3IoQ2xhc3M8\nPz4gY2xzIDogZ2V0RXhwZWN0ZWRJbkNhY2hlKCkpIHsgCiAgICAgICAgICAg\nIGFzc2VydENhY2hlZChnZXRFbnRpdHlNYW5hZ2VyRmFjdG9yeSgpLmdldENh\nY2hlKCksIGNscywgMSwgdHJ1ZSk7CiAgICAgICAgfQogICAgICAgIAogICAg\nICAgIGZvcihDbGFzczw/PiBjbHMgOiBnZXRFeHBlY3RlZE5vdEluQ2FjaGUo\nKSkgeyAKICAgICAgICAgICAgYXNzZXJ0Q2FjaGVkKGdldEVudGl0eU1hbmFn\nZXJGYWN0b3J5KCkuZ2V0Q2FjaGUoKSwgY2xzLCAxLCBmYWxzZSk7CiAgICAg\nICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RSZXN1bHRzRnJvbUZpbmRBcmVJbkNhY2hlKCkgeyAKICAg\nICAgICAvLyBjbGVhciBjYWNoZQogICAgICAgIGdldEVudGl0eU1hbmFnZXJG\nYWN0b3J5KCkuZ2V0U3RvcmVDYWNoZSgpLmV2aWN0QWxsKCk7CiAgICAgICAg\nZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKS5nZXRRdWVyeVJlc3VsdENhY2hl\nKCkuZXZpY3RBbGwoKTsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGdl\ndEVudGl0eU1hbmFnZXJGYWN0b3J5KCkuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIGZvcihDbGFzczw/PiBjbHMgOiBwZXJzaXN0ZW50VHlwZXMp\nIHsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbChTdHJpbmcuZm9ybWF0KCJF\neHBlY3RlZCB0byBmaW5kICVzOjolZCBmcm9tIGRhdGFiYXNlIG9yIGZyb20g\nY2FjaGUiLCBjbHMsIDEpLGVtLmZpbmQoY2xzLCAxKSk7CiAgICAgICAgfQog\nICAgICAgIGZvcihDbGFzczw/PiBjbHMgOiBnZXRFeHBlY3RlZEluQ2FjaGUo\nKSkgeyAKICAgICAgICAgICAgYXNzZXJ0Q2FjaGVkKGdldEVudGl0eU1hbmFn\nZXJGYWN0b3J5KCkuZ2V0Q2FjaGUoKSwgY2xzLCAxLCB0cnVlKTsKICAgICAg\nICB9CiAgICAgICAgCiAgICAgICAgZm9yKENsYXNzPD8+IGNscyA6IGdldEV4\ncGVjdGVkTm90SW5DYWNoZSgpKSB7IAogICAgICAgICAgICBhc3NlcnRDYWNo\nZWQoZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKS5nZXRDYWNoZSgpLCBjbHMs\nIDEsIGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KICAgIAogICAgcHJpdmF0ZSBTdHJpbmcgZ2V0QWxpYXMoQ2xhc3M8Pz4g\nY2xzKSB7CiAgICAgICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcgPQogICAgICAg\nICAgICAoQ2xhc3NNYXBwaW5nKSBnZXRFbnRpdHlNYW5hZ2VyRmFjdG9yeSgp\nLmdldENvbmZpZ3VyYXRpb24oKS5nZXRNZXRhRGF0YVJlcG9zaXRvcnlJbnN0\nYW5jZSgpLmdldE1ldGFEYXRhKAogICAgICAgICAgICAgICAgY2xzLCBudWxs\nLCB0cnVlKTsKICAgICAgICByZXR1cm4gbWFwcGluZy5nZXRUeXBlQWxpYXMo\nKTsKICAgIH0KfQo=\n","encoding":"base64"}

