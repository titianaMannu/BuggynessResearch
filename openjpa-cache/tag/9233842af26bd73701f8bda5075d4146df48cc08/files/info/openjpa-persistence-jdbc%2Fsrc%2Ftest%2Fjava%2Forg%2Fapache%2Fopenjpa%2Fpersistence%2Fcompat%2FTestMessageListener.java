{"sha":"2e8c2b2c3d2ca35417f6cfd0c3bdd79cc2e90de2","node_id":"MDQ6QmxvYjIwNjM2NDoyZThjMmIyYzNkMmNhMzU0MTdmNmNmZDBjM2JkZDc5Y2MyZTkwZGUy","size":10966,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2e8c2b2c3d2ca35417f6cfd0c3bdd79cc2e90de2","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFnRW1wbG95ZWVfTGFzdF9OYW1lIHRv\nIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRo\nZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFT\nSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5n\nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGlj\nZW5zZS4gICAgCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5jb21wYXQ7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVl\ncnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNh\nbGxiYWNrcy5NZXNzYWdlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmNhbGxiYWNrcy5NZXNzYWdlTGlzdGVuZXJJbXBsOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQVZlcnNpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5n\nbGVFTUZUZXN0Q2FzZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKCi8qKgogKiA8Yj5UZXN0\nQ29tcGF0aWJpbGU8L2I+IGlzIHVzZWQgdG8gdGVzdCB2YXJpb3VzIGJhY2t3\nYXJkcyBjb21wYXRpYmlsaXR5IHNjZW5hcmlvcyBiZXR3ZWVuIEpQQSAyLjAg\nYW5kIEpQQSAxLjIKICogCiAqIDxwPlRoZSBmb2xsb3dpbmcgc2NlbmFyaW9z\nIGFyZSB0ZXN0ZWQ6CiAqIDxvbD4KICogPGxpPnByZVVwZGF0ZSBhbmQgcG9z\ndFVwZGF0ZSBiZWhhdmlvciBpbiBKUEEgMi4wIGlzIGRpZmZlcmVudCB0aGFu\nIGluIDEuMgogKiA8bGk+VEJECiAqIDwvb2w+CiAqIDxwPiAKICogPGI+Tm90\nZShzKTo8L2I+CiAqIDx1bD4KICogPGxpPlRoZSBwcm9wZXIgb3BlbmpwYS5D\nb21wYXRpYmlsaXR5IHZhbHVlKHMpIG11c3QgYmUgcHJvdmlkZWQgaW4gb3Jk\nZXIgZm9yIHRoZSB0ZXN0Y2FzZXMgdG8gc3VjY2VlZAogKiA8L3VsPgogKi8K\ncHVibGljIGNsYXNzIFRlc3RNZXNzYWdlTGlzdGVuZXIgZXh0ZW5kcyBTaW5n\nbGVFTUZUZXN0Q2FzZSB7CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAg\nICAgICAgc2V0VXAoTWVzc2FnZS5jbGFzcywgCiAgICAgICAgICAgICAgIm9w\nZW5qcGEuQ29tcGF0aWJpbGl0eSIsICJkZWZhdWx0IiwKICAgICAgICAgICAg\nICBEUk9QX1RBQkxFUyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFVw\nZGF0ZUluUHJlVXBkYXRlKCkgewogICAgICAgIC8vIENyZWF0ZSBhIG5ldyBF\nbnRpdHlNYW5hZ2VyIGZyb20gdGhlIEVudGl0eU1hbmFnZXJGYWN0b3J5LiBU\naGUKICAgICAgICAvLyBFbnRpdHlNYW5hZ2VyIGlzIHRoZSBtYWluIG9iamVj\ndCBpbiB0aGUgcGVyc2lzdGVuY2UgQVBJLCBhbmQgaXMKICAgICAgICAvLyB1\nc2VkIHRvIGNyZWF0ZSwgZGVsZXRlLCBhbmQgcXVlcnkgb2JqZWN0cywgYXMg\nd2VsbCBhcyBhY2Nlc3MKICAgICAgICAvLyB0aGUgY3VycmVudCB0cmFuc2Fj\ndGlvbgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICB0cnkgewogICAgICAgICAg\nICAvLyBCZWdpbiBhIG5ldyBsb2NhbCB0cmFuc2FjdGlvbiBzbyB0aGF0IHdl\nIGNhbiBwZXJzaXN0IGEgbmV3IGVudGl0eQogICAgICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgICAgICBNZXNzYWdlTGlz\ndGVuZXJJbXBsLnJlc2V0Q291bnRlcnMoKTsKCiAgICAgICAgICAgIC8vIENy\nZWF0ZSBhbmQgcGVyc2lzdCBhIG5ldyBNZXNzYWdlIGVudGl0eQogICAgICAg\nICAgICBNZXNzYWdlIG1lc3NhZ2UgPSBuZXcgTWVzc2FnZSgiSGVsbG8gUGVy\nc2lzdGVuY2UhIik7CiAgICAgICAgICAgIGFzc2VydE51bGwoIlRlc3QgbWVz\nc2FnZSdzIGNyZWF0ZWQgZmllbGQgdG8gYmUgbnVsbC4iLCBtZXNzYWdlLmdl\ndENyZWF0ZWQoKSk7CiAgICAgICAgICAgIGFzc2VydE51bGwoIlRlc3QgbWVz\nc2FnZSdzIHVwZGF0ZWQgZmllbGQgdG8gYmUgbnVsbC4iLCBtZXNzYWdlLmdl\ndFVwZGF0ZWQoKSk7CgogICAgICAgICAgICBlbS5wZXJzaXN0KG1lc3NhZ2Up\nOwoKICAgICAgICAgICAgLy8gUHJlLXBlcnNpc3QgaW52b2tlZCwgY3JlYXRl\nZCBhbmQgdXBkYXRlZCBmaWVsZHMgc2V0CiAgICAgICAgICAgIGFzc2VydFN0\nYXR1cygxLCAwLCAwLCAwLCAwLCAwLCAwKTsKICAgICAgICAgICAgYXNzZXJ0\nTm90TnVsbCgiVGVzdCBtZXNzYWdlJ3MgY3JlYXRlZCBmaWVsZCBiZWluZyBz\nZXQuIiwgbWVzc2FnZS5nZXRDcmVhdGVkKCkpOwogICAgICAgICAgICBhc3Nl\ncnROb3ROdWxsKCJUZXN0IG1lc3NhZ2UncyB1cGRhdGVkIGZpZWxkIGJlaW5n\nIHNldC4iLCBtZXNzYWdlLmdldFVwZGF0ZWQoKSk7CgogICAgICAgICAgICAv\nLyBQZXJmb3JtIGEgc2ltcGxlIHF1ZXJ5IHRvIGdldCB0aGUgTWVzc2FnZQog\nICAgICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBt\nIGZyb20gTWVzc2FnZSBtIHdoZXJlIG0uaWQ9IiArIG1lc3NhZ2UuZ2V0SWQo\nKSk7CiAgICAgICAgICAgIE1lc3NhZ2UgbSA9IChNZXNzYWdlKSBxLmdldFNp\nbmdsZVJlc3VsdCgpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoIlRlc3Qg\nZmlyc3QgZXhwZWN0ZWQgbWVzc2FnZS4iLCAiSGVsbG8gUGVyc2lzdGVuY2Uh\nIixtLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwo\nIlRlc3QgbWVzc2FnZSdzIGNyZWF0ZWQgZmllbGQgYmVpbmcgc2V0LiIsIG0u\nZ2V0Q3JlYXRlZCgpKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiVGVz\ndCBtZXNzYWdlJ3MgdXBkYXRlZCBmaWVsZCBiZWluZyBzZXQuIiwgbS5nZXRV\ncGRhdGVkKCkpOwoKICAgICAgICAgICAgLy8gUXVlcnkgY2F1c2UgZmx1c2gg\ndG8gb2NjdXIsIGhlbmNlIGZpcmUgdGhlIHBvc3RQZXJzaXN0IGV2ZW50CiAg\nICAgICAgICAgIGFzc2VydFN0YXR1cygxLCAxLCAwLCAwLCAwLCAwLCAwKTsK\nCiAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgcGVyc2lzdCBhbm90aGVyIG5l\ndyBNZXNzYWdlIGVudGl0eQogICAgICAgICAgICBtZXNzYWdlID0gbmV3IE1l\nc3NhZ2UoIkhlbGxvIFBlcnNpc3RlbmNlIDIhIik7CiAgICAgICAgICAgIGFz\nc2VydE51bGwoIlRlc3QgbWVzc2FnZSdzIGNyZWF0ZWQgZmllbGQgdG8gYmUg\nbnVsbC4iLCBtZXNzYWdlLmdldENyZWF0ZWQoKSk7CiAgICAgICAgICAgIGFz\nc2VydE51bGwoIlRlc3QgbWVzc2FnZSdzIHVwZGF0ZWQgZmllbGQgdG8gYmUg\nbnVsbC4iLCBtZXNzYWdlLmdldFVwZGF0ZWQoKSk7CgogICAgICAgICAgICBl\nbS5wZXJzaXN0KG1lc3NhZ2UpOwoKICAgICAgICAgICAgLy8gUHJlLXBlcnNp\nc3QgaW52b2tlZCwgY3JlYXRlZCBhbmQgdXBkYXRlZCBmaWVsZHMgc2V0CiAg\nICAgICAgICAgIGFzc2VydFN0YXR1cygyLCAxLCAwLCAwLCAwLCAwLCAwKTsK\nICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiVGVzdCBtZXNzYWdlJ3MgY3Jl\nYXRlZCBmaWVsZCBiZWluZyBzZXQuIiwgbWVzc2FnZS5nZXRDcmVhdGVkKCkp\nOwogICAgICAgICAgICBhc3NlcnROb3ROdWxsKCJUZXN0IG1lc3NhZ2UncyB1\ncGRhdGVkIGZpZWxkIGJlaW5nIHNldC4iLCBtZXNzYWdlLmdldFVwZGF0ZWQo\nKSk7CgogICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwoKICAgICAgICAgICAgLy8gQ29tcGxldGUgdGhlIDJuZCBAcG9zdFBlcnNp\nc3QKICAgICAgICAgICAgLy8gcHJlVXBkYXRlIGFuZCBwb3N0VXBkYXRlIGFy\nZSBjYWxsZWQgaW4gMS4yLnggYnV0IG5vdCBpbiAxLjMgb3IgbGF0ZXIKICAg\nICAgICAgICAgLy8gU2VlIEpQQTIgU3BlYyAzLjUuMiBOb3RlIGFib3V0IHRo\naXMgYmVpbmcgaW1wbGVtZW50YXRpb24gZGVwZW5kZW50CiAgICAgICAgICAg\nIGlmICgoT3BlbkpQQVZlcnNpb24uTUFKT1JfUkVMRUFTRSA+PSAyKSB8fAog\nICAgICAgICAgICAgICAgKChPcGVuSlBBVmVyc2lvbi5NQUpPUl9SRUxFQVNF\nID09IDEpICYmCiAgICAgICAgICAgICAgICAgKE9wZW5KUEFWZXJzaW9uLk1J\nTk9SX1JFTEVBU0UgPj0gMykpKSB7CiAgICAgICAgICAgICAgICBhc3NlcnRT\ndGF0dXMoMiwgMiwgMCwgMCwgMCwgMCwgMCk7CiAgICAgICAgICAgIH0gZWxz\nZSB7CiAgICAgICAgICAgICAgICAvLyBwcmlvciB0byAyLjAsIHByZS9wb3N0\nVXBkYXRlIHdhcyBjYWxsZWQKICAgICAgICAgICAgICAgIGFzc2VydFN0YXR1\ncygyLCAyLCAxLCAxLCAwLCAwLCAwKTsKICAgICAgICAgICAgfSAgICAgICAg\nICAgIAoKICAgICAgICAgICAgLy8gTWFrZSBhbiB1cGRhdGUgdG8gdHJpZ2dl\nciB0aGUgcHJlL3Bvc3RVcGRhdGVyIGNhbGxiYWNrcwogICAgICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIG1lc3Nh\nZ2UgPSBlbS5maW5kKE1lc3NhZ2UuY2xhc3MsbWVzc2FnZS5nZXRJZCgpKTsK\nICAgICAgICAgICAgbWVzc2FnZS5zZXRNZXNzYWdlKCJVcGRhdGUgZmllbGQg\nYW5kIHRyaWdnZXIgcHJlL3Bvc3RVcGRhdGUiKTsKICAgICAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAgICAgICAgICAgIC8vIENv\nbXBsZXRlIHRoZSAybmQgQHBvc3RQZXJzaXN0CiAgICAgICAgICAgIGlmICgo\nT3BlbkpQQVZlcnNpb24uTUFKT1JfUkVMRUFTRSA+PSAyKSB8fAogICAgICAg\nICAgICAgICAgKChPcGVuSlBBVmVyc2lvbi5NQUpPUl9SRUxFQVNFID09IDEp\nICYmCiAgICAgICAgICAgICAgICAgICAgKE9wZW5KUEFWZXJzaW9uLk1JTk9S\nX1JFTEVBU0UgPj0gMykpKSB7CiAgICAgICAgICAgICAgICBhc3NlcnRTdGF0\ndXMoMiwgMiwgMSwgMSwgMCwgMCwgMCk7CiAgICAgICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgICAgICBhc3NlcnRTdGF0dXMoMiwgMiwgMiwgMiwgMCwg\nMCwgMCk7CiAgICAgICAgICAgIH0gICAgICAgICAgICAKICAgICAgICB9CiAg\nICAgICAgZmluYWxseSB7CiAgICAgICAgICAgIGlmIChlbSAhPSBudWxsICYm\nIGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAg\nICAgaWYgKGVtICE9IG51bGwgJiYgZW0uaXNPcGVuKCkpCiAgICAgICAgICAg\nICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0KICAgIH0gCgogICAgcHVibGlj\nIHZvaWQgdGVzdFVwZGF0ZUluUHJlVXBkYXRlMigpIHsKICAgICAgICAvLyBD\ncmVhdGUgYSBuZXcgRW50aXR5TWFuYWdlciBmcm9tIHRoZSBFbnRpdHlNYW5h\nZ2VyRmFjdG9yeS4gVGhlCiAgICAgICAgLy8gRW50aXR5TWFuYWdlciBpcyB0\naGUgbWFpbiBvYmplY3QgaW4gdGhlIHBlcnNpc3RlbmNlIEFQSSwgYW5kIGlz\nCiAgICAgICAgLy8gdXNlZCB0byBjcmVhdGUsIGRlbGV0ZSwgYW5kIHF1ZXJ5\nIG9iamVjdHMsIGFzIHdlbGwgYXMgYWNjZXNzCiAgICAgICAgLy8gdGhlIGN1\ncnJlbnQgdHJhbnNhY3Rpb24KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgLy8gQmVnaW4gYSBuZXcgbG9jYWwgdHJhbnNhY3Rp\nb24gc28gdGhhdCB3ZSBjYW4gcGVyc2lzdCBhIG5ldyBlbnRpdHkKICAgICAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoKICAgICAgICAg\nICAgTWVzc2FnZUxpc3RlbmVySW1wbC5yZXNldENvdW50ZXJzKCk7CgogICAg\nICAgICAgICAvLyBDcmVhdGUgYW5kIHBlcnNpc3QgYSBuZXcgTWVzc2FnZSBl\nbnRpdHkKICAgICAgICAgICAgTWVzc2FnZSBtZXNzYWdlID0gbmV3IE1lc3Nh\nZ2UoIkhlbGxvIFBlcnNpc3RlbmNlISIpOwogICAgICAgICAgICBhc3NlcnRO\ndWxsKCJUZXN0IG1lc3NhZ2UncyBjcmVhdGVkIGZpZWxkIHRvIGJlIG51bGwu\nIiwgbWVzc2FnZS5nZXRDcmVhdGVkKCkpOwogICAgICAgICAgICBhc3NlcnRO\ndWxsKCJUZXN0IG1lc3NhZ2UncyB1cGRhdGVkIGZpZWxkIHRvIGJlIG51bGwu\nIiwgbWVzc2FnZS5nZXRVcGRhdGVkKCkpOwoKICAgICAgICAgICAgZW0ucGVy\nc2lzdChtZXNzYWdlKTsKCiAgICAgICAgICAgIC8vIFByZS1wZXJzaXN0IGlu\ndm9rZWQsIGNyZWF0ZWQgYW5kIHVwZGF0ZWQgZmllbGRzIHNldAogICAgICAg\nICAgICBhc3NlcnRTdGF0dXMoMSwgMCwgMCwgMCwgMCwgMCwgMCk7CiAgICAg\nICAgICAgIGFzc2VydE5vdE51bGwoIlRlc3QgbWVzc2FnZSdzIGNyZWF0ZWQg\nZmllbGQgYmVpbmcgc2V0LiIsIG1lc3NhZ2UuZ2V0Q3JlYXRlZCgpKTsKICAg\nICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiVGVzdCBtZXNzYWdlJ3MgdXBkYXRl\nZCBmaWVsZCBiZWluZyBzZXQuIiwgbWVzc2FnZS5nZXRVcGRhdGVkKCkpOwoK\nICAgICAgICAgICAgLy8gUGVyZm9ybSBhIHNpbXBsZSBxdWVyeSB0byBnZXQg\ndGhlIE1lc3NhZ2UKICAgICAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1\nZXJ5KCJzZWxlY3QgbSBmcm9tIE1lc3NhZ2UgbSB3aGVyZSBtLmlkPSIgKyBt\nZXNzYWdlLmdldElkKCkpOwogICAgICAgICAgICBNZXNzYWdlIG0gPSAoTWVz\nc2FnZSkgcS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJUZXN0IGZpcnN0IGV4cGVjdGVkIG1lc3NhZ2UuIiwgIkhlbGxv\nIFBlcnNpc3RlbmNlISIsbS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICBh\nc3NlcnROb3ROdWxsKCJUZXN0IG1lc3NhZ2UncyBjcmVhdGVkIGZpZWxkIGJl\naW5nIHNldC4iLCBtLmdldENyZWF0ZWQoKSk7CiAgICAgICAgICAgIGFzc2Vy\ndE5vdE51bGwoIlRlc3QgbWVzc2FnZSdzIHVwZGF0ZWQgZmllbGQgYmVpbmcg\nc2V0LiIsIG0uZ2V0VXBkYXRlZCgpKTsKCiAgICAgICAgICAgIC8vIFF1ZXJ5\nIGNhdXNlIGZsdXNoIHRvIG9jY3VyLCBoZW5jZSBmaXJlIHRoZSBwb3N0UGVy\nc2lzdCBldmVudAogICAgICAgICAgICBhc3NlcnRTdGF0dXMoMSwgMSwgMCwg\nMCwgMCwgMCwgMCk7CgogICAgICAgICAgICAvLyBDcmVhdGUgYW5kIHBlcnNp\nc3QgYW5vdGhlciBuZXcgTWVzc2FnZSBlbnRpdHkKICAgICAgICAgICAgbWVz\nc2FnZSA9IG5ldyBNZXNzYWdlKCJIZWxsbyBQZXJzaXN0ZW5jZSAyISIpOwog\nICAgICAgICAgICBhc3NlcnROdWxsKCJUZXN0IG1lc3NhZ2UncyBjcmVhdGVk\nIGZpZWxkIHRvIGJlIG51bGwuIiwgbWVzc2FnZS5nZXRDcmVhdGVkKCkpOwog\nICAgICAgICAgICBhc3NlcnROdWxsKCJUZXN0IG1lc3NhZ2UncyB1cGRhdGVk\nIGZpZWxkIHRvIGJlIG51bGwuIiwgbWVzc2FnZS5nZXRVcGRhdGVkKCkpOwoK\nICAgICAgICAgICAgZW0ucGVyc2lzdChtZXNzYWdlKTsKCiAgICAgICAgICAg\nIC8vIFByZS1wZXJzaXN0IGludm9rZWQsIGNyZWF0ZWQgYW5kIHVwZGF0ZWQg\nZmllbGRzIHNldAogICAgICAgICAgICBhc3NlcnRTdGF0dXMoMiwgMSwgMCwg\nMCwgMCwgMCwgMCk7CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoIlRlc3Qg\nbWVzc2FnZSdzIGNyZWF0ZWQgZmllbGQgYmVpbmcgc2V0LiIsIG1lc3NhZ2Uu\nZ2V0Q3JlYXRlZCgpKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiVGVz\ndCBtZXNzYWdlJ3MgdXBkYXRlZCBmaWVsZCBiZWluZyBzZXQuIiwgbWVzc2Fn\nZS5nZXRVcGRhdGVkKCkpOwoKICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBl\nbnRpdHkgYmVmb3JlIGNvbW1pdHRpbmcKICAgICAgICAgICAgbWVzc2FnZS5z\nZXRNZXNzYWdlKCJDb21iaW5lZCBDcmVhdGUgYW5kIFVwZGF0ZSB0cmlnZ2Vy\ncyIpOwogICAgICAgICAgICAvLyBwcmVVcGRhdGUgYW5kIHBvc3RVcGRhdGUg\nYXJlIGNhbGxlZCBpbiAxLjIueCBidXQgbm90IGluIDEuMyBvciBsYXRlcgog\nICAgICAgICAgICAvLyBTZWUgSlBBMiBTcGVjIDMuNS4yIE5vdGUgYWJvdXQg\ndGhpcyBiZWluZyBpbXBsZW1lbnRhdGlvbiBkZXBlbmRlbnQKICAgICAgICAg\nICAgaWYgKChPcGVuSlBBVmVyc2lvbi5NQUpPUl9SRUxFQVNFID49IDIpIHx8\nCiAgICAgICAgICAgICAgICAoKE9wZW5KUEFWZXJzaW9uLk1BSk9SX1JFTEVB\nU0UgPT0gMSkgJiYKICAgICAgICAgICAgICAgICAoT3BlbkpQQVZlcnNpb24u\nTUlOT1JfUkVMRUFTRSA+PSAzKSkpIHsKICAgICAgICAgICAgICAgIGFzc2Vy\ndFN0YXR1cygyLCAxLCAwLCAwLCAwLCAwLCAwKTsKICAgICAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgICAgIC8vIHByaW9yIHRvIDIuMCwgcHJlL3Bv\nc3RVcGRhdGUgd2FzIGNhbGxlZAogICAgICAgICAgICAgICAgYXNzZXJ0U3Rh\ndHVzKDIsIDEsIDEsIDEsIDAsIDAsIDApOwogICAgICAgICAgICB9ICAgICAg\nICAgICAgCgogICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwoKICAgICAgICAgICAgLy8gQ29tcGxldGUgdGhlIDJuZCBAcG9zdFBl\ncnNpc3QKICAgICAgICAgICAgLy8gcHJlVXBkYXRlIGFuZCBwb3N0VXBkYXRl\nIGFyZSBjYWxsZWQgaW4gMS4yLnggYnV0IG5vdCBpbiAxLjMgb3IgbGF0ZXIK\nICAgICAgICAgICAgaWYgKChPcGVuSlBBVmVyc2lvbi5NQUpPUl9SRUxFQVNF\nID49IDIpIHx8CiAgICAgICAgICAgICAgICAoKE9wZW5KUEFWZXJzaW9uLk1B\nSk9SX1JFTEVBU0UgPT0gMSkgJiYKICAgICAgICAgICAgICAgICAoT3BlbkpQ\nQVZlcnNpb24uTUlOT1JfUkVMRUFTRSA+PSAzKSkpIHsKICAgICAgICAgICAg\nICAgIGFzc2VydFN0YXR1cygyLCAyLCAwLCAwLCAwLCAwLCAwKTsKICAgICAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFzc2VydFN0YXR1cygy\nLCAyLCAxLCAxLCAwLCAwLCAwKTsKICAgICAgICAgICAgfSAgICAgICAgICAg\nIAoKICAgICAgICAgICAgLy8gTWFrZSBhbiB1cGRhdGUgdG8gdHJpZ2dlciB0\naGUgcHJlL3Bvc3RVcGRhdGVyIGNhbGxiYWNrcwogICAgICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIG1lc3NhZ2Ug\nPSBlbS5maW5kKE1lc3NhZ2UuY2xhc3MsbWVzc2FnZS5nZXRJZCgpKTsKICAg\nICAgICAgICAgbWVzc2FnZS5zZXRNZXNzYWdlKCJVcGRhdGUgZmllbGQgYW5k\nIHRyaWdnZXIgcHJlL3Bvc3RVcGRhdGUiKTsKICAgICAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAgICAgICAgICAgIC8vIENvbXBs\nZXRlIHRoZSAybmQgQHBvc3RQZXJzaXN0CiAgICAgICAgICAgIGlmICgoT3Bl\nbkpQQVZlcnNpb24uTUFKT1JfUkVMRUFTRSA+PSAyKSB8fAogICAgICAgICAg\nICAgICAgKChPcGVuSlBBVmVyc2lvbi5NQUpPUl9SRUxFQVNFID09IDEpICYm\nCiAgICAgICAgICAgICAgICAgKE9wZW5KUEFWZXJzaW9uLk1JTk9SX1JFTEVB\nU0UgPj0gMykpKSB7CiAgICAgICAgICAgICAgICBhc3NlcnRTdGF0dXMoMiwg\nMiwgMSwgMSwgMCwgMCwgMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAg\nICAgICAgICAgICBhc3NlcnRTdGF0dXMoMiwgMiwgMiwgMiwgMCwgMCwgMCk7\nCiAgICAgICAgICAgIH0gICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAg\nZmluYWxseSB7CiAgICAgICAgICAgIGlmIChlbSAhPSBudWxsICYmIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgaWYg\nKGVtICE9IG51bGwgJiYgZW0uaXNPcGVuKCkpCiAgICAgICAgICAgICAgICBl\nbS5jbG9zZSgpOwogICAgICAgIH0KICAgIH0gCgogICAgcHJpdmF0ZSB2b2lk\nIGFzc2VydFN0YXR1cyhpbnQgcHJlUGVyc2lzdCwgaW50IHBvc3RQZXJzaXN0\nLCBpbnQgcHJlVXBkYXRlLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgaW50IHBvc3RVcGRhdGUsIGludCBwcmVSZW1vdmUsIGludCBwb3N0UmVt\nb3ZlLCBpbnQgcG9zdExvYWQpIHsKICAgICAgICBhc3NlcnRFcXVhbHMoInBy\nZVBlcnNpc3QiLCBwcmVQZXJzaXN0LCBNZXNzYWdlTGlzdGVuZXJJbXBsLnBy\nZVBlcnNpc3RDb3VudCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJwb3N0UGVy\nc2lzdCIsIHBvc3RQZXJzaXN0LCBNZXNzYWdlTGlzdGVuZXJJbXBsLnBvc3RQ\nZXJzaXN0Q291bnQpOwogICAgICAgIGFzc2VydEVxdWFscygicHJlVXBkYXRl\nIiwgcHJlVXBkYXRlLCBNZXNzYWdlTGlzdGVuZXJJbXBsLnByZVVwZGF0ZUNv\ndW50KTsKICAgICAgICBhc3NlcnRFcXVhbHMoInBvc3RVcGRhdGUiLCBwb3N0\nVXBkYXRlLCBNZXNzYWdlTGlzdGVuZXJJbXBsLnBvc3RVcGRhdGVDb3VudCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJwcmVSZW1vdmUiLCBwcmVSZW1vdmUs\nIE1lc3NhZ2VMaXN0ZW5lckltcGwucHJlUmVtb3ZlQ291bnQpOwogICAgICAg\nIGFzc2VydEVxdWFscygicG9zdFJlbW92ZSIsIHBvc3RSZW1vdmUsIE1lc3Nh\nZ2VMaXN0ZW5lckltcGwucG9zdFJlbW92ZUNvdW50KTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoInBvc3RMb2FkIiwgcG9zdExvYWQsIE1lc3NhZ2VMaXN0ZW5l\nckltcGwucG9zdExvYWRDb3VudCk7CiAgICB9Cn0KCg==\n","encoding":"base64"}

