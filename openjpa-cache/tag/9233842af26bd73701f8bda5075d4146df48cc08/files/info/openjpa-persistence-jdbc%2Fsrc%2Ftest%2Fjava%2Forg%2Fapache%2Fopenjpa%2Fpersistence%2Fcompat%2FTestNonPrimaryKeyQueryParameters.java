{"sha":"50eea9941c86dc8c913e63be60840a768694dcc9","node_id":"MDQ6QmxvYjIwNjM2NDo1MGVlYTk5NDFjODZkYzhjOTEzZTYzYmU2MDg0MGE3Njg2OTRkY2M5","size":5266,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/50eea9941c86dc8c913e63be60840a768694dcc9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tcGF0\nOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5FbnRpdHlUcmFuc2FjdGlvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLlF1ZXJ5OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5K\nUEFWZXJzaW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLkFyZ3VtZW50RXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLnRlc3QuU1FMTGlzdGVuZXJUZXN0Q2FzZTsKCi8q\nKgogKiBUZXN0cyB0aGF0IGZpbmQoKSBxdWVyaWVzIHRoYXQgdXNlIG5vbi1w\ncmltYXJ5IGtleXMgY2FuIGJlIGNhY2hlZAogKiAKICoKICogPGI+Q29tcGF0\naWJsZSB0ZXN0Y2FzZXM8L2I+IGFyZSB1c2VkIHRvIHRlc3QgdmFyaW91cyBi\nYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBzY2VuYXJpb3MgYmV0d2VlbiBKUEEg\nMi4wIGFuZCBKUEEgMS4yCiAqIAogKiA8cD5UaGUgZm9sbG93aW5nIHNjZW5h\ncmlvcyBhcmUgdGVzdGVkOgogKiA8b2w+CiAqIDxsaT5xdWVyeS5zZXRQYXJh\nbWV0ZXIoKQogKiA8L29sPgogKiA8cD4gCiAqIDxiPk5vdGUocyk6PC9iPgog\nKiA8dWw+CiAqIDxsaT5UaGUgcHJvcGVyIG9wZW5qcGEuQ29tcGF0aWJpbGl0\neSB2YWx1ZShzKSBtdXN0IGJlIHByb3ZpZGVkIGluIG9yZGVyIGZvciB0aGUg\ndGVzdGNhc2UocykgdG8gc3VjY2VlZAogKiA8L3VsPgogKi8KcHVibGljIGNs\nYXNzIFRlc3ROb25QcmltYXJ5S2V5UXVlcnlQYXJhbWV0ZXJzIGV4dGVuZHMg\nU1FMTGlzdGVuZXJUZXN0Q2FzZSB7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBpbnQgRlVMTFRJTUVfRU1QTE9ZRUVfQ09VTlQgPSAzOwogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgaW50IFBBUlRUSU1FX0VNUExPWUVFX0NPVU5UID0g\nMjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBMSU5FSVRFTV9QRVJf\nSU5WT0lDRSA9IDE7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nREVQVF9OQU1FID0gIkVOR0lORUVSSU5HIjsKCiAgICBwdWJsaWMgdm9pZCBz\nZXRVcCgpIHsKICAgICAgICBzdXBlci5zZXRVcChDTEVBUl9UQUJMRVMsIERl\ncGFydG1lbnQuY2xhc3MsIEVtcGxveWVlLmNsYXNzLAogICAgICAgICAgICAg\nICAgRnVsbFRpbWVFbXBsb3llZS5jbGFzcywgUGFydFRpbWVFbXBsb3llZS5j\nbGFzcywKICAgICAgICAgICAgICAgIEludm9pY2UuY2xhc3MsIExpbmVJdGVt\nLmNsYXNzLAogICAgICAgICAgICAgICAgIm9wZW5qcGEuamRiYy5RdWVyeVNR\nTENhY2hlIiwgInRydWUiKTsKICAgICAgICBjcmVhdGVEZXBhcnRtZW50KERF\nUFRfTkFNRSk7CiAgICAgICAgY3JlYXRlSW52b2ljZSgpOwogICAgICAgIHNx\nbC5jbGVhcigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTZWxlY3RR\ndWVyeVdpdGhOb1BhcmFtZXRlcigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgUXVlcnkgcXVlcnkgPSBlbS5jcmVhdGVRdWVyeSgi\nU0VMRUNUIGQgZnJvbSBEZXBhcnRtZW50IGQiKTsKICAgICAgICAgICAgcXVl\ncnkuc2V0UGFyYW1ldGVyKDEsIERFUFRfTkFNRSk7CiAgICAgICAgICAgIERl\ncGFydG1lbnQgZGVwdCA9IChEZXBhcnRtZW50KSBxdWVyeS5nZXRTaW5nbGVS\nZXN1bHQoKTsKCiAgICAgICAgICAgIGlmICgoKE9wZW5KUEFWZXJzaW9uLk1B\nSk9SX1JFTEVBU0UgPT0gMSkgJiYKICAgICAgICAgICAgICAgICAoT3BlbkpQ\nQVZlcnNpb24uTUlOT1JfUkVMRUFTRSA+PSAzKSkgfHwKICAgICAgICAgICAg\nICAgIChPcGVuSlBBVmVyc2lvbi5NQUpPUl9SRUxFQVNFID49IDIpKSB7CiAg\nICAgICAgICAgICAgICAvLyBzaG91bGQgbmV2ZXIgZ2V0IGhlcmUsIGFzIHBh\ncmFtZXRlciBzdWJzdGl0dXRpb24gc2hvdWxkIGZhaWwKICAgICAgICAgICAg\nICAgIGZhaWwoIlRlc3Qgc2hvdWxkIGhhdmUgZmFpbGVkIG9uIE9wZW5KUEEg\nMS4zIG9yIGFib3ZlLiIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICAgICAgLy8gT3BlbkpQQSAxLjIueCBhbmQgZWFybGllciBpZ25vcmVk\nIHVudXNlZCBwYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoRlVMTFRJTUVfRU1QTE9ZRUVfQ09VTlQsIGRlcHQuZ2V0RnVsbFRpbWVF\nbXBsb3llZXMoKS5zaXplKCkpOwogICAgICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKFBBUlRUSU1FX0VNUExPWUVFX0NPVU5ULCBkZXB0LmdldFBhcnRUaW1l\nRW1wbG95ZWVzKCkuc2l6ZSgpKTsKICAgICAgICAgICAgICAgIGFzc2VydFNR\nTCgiLiogQU5EIHQwLlRZUEUgPSAuKiIpOwogICAgICAgICAgICB9CiAgICAg\nICAgfSBjYXRjaCAoQXJndW1lbnRFeGNlcHRpb24gYWUpIHsKICAgICAgICAg\nICAgaWYgKChPcGVuSlBBVmVyc2lvbi5NQUpPUl9SRUxFQVNFID09IDEpICYm\nCiAgICAgICAgICAgICAgICAgKE9wZW5KUEFWZXJzaW9uLk1JTk9SX1JFTEVB\nU0UgPj0gMykpIHsKICAgICAgICAgICAgICAgIC8vIGV4cGVjdGVkIGV4Y2Vw\ndGlvbiBmb3IgbmV3IGJlaGF2aW9yCiAgICAgICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgICAgICAvLyB1bmV4cGVjdGVkIGV4Y2VwdGlvbgogICAgICAg\nICAgICAgICAgdGhyb3cgYWU7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNh\ndGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWFlKSB7CiAgICAgICAg\nICAgIGlmIChPcGVuSlBBVmVyc2lvbi5NQUpPUl9SRUxFQVNFID49IDIpIHsK\nICAgICAgICAgICAgICAgIC8vIGV4cGVjdGVkIGV4Y2VwdGlvbiBmb3IgbmV3\nIGJlaGF2aW9yCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg\nICAvLyB1bmV4cGVjdGVkIGV4Y2VwdGlvbgogICAgICAgICAgICAgICAgdGhy\nb3cgaWFlOwogICAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9IAoKICAgIHBy\naXZhdGUgdm9pZCBjcmVhdGVEZXBhcnRtZW50KFN0cmluZyBkZXB0TmFtZSkg\newogICAgICAgIGlmIChjb3VudChEZXBhcnRtZW50LmNsYXNzKSA+IDApCiAg\nICAgICAgICAgIHJldHVybjsKCiAgICAgICAgRGVwYXJ0bWVudCBkZXB0ID0g\nbmV3IERlcGFydG1lbnQoKTsKICAgICAgICBkZXB0LnNldE5hbWUoZGVwdE5h\nbWUpOwoKICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8PSBGVUxMVElNRV9F\nTVBMT1lFRV9DT1VOVDsgaSsrKSB7CiAgICAgICAgICAgIEZ1bGxUaW1lRW1w\nbG95ZWUgZSA9IG5ldyBGdWxsVGltZUVtcGxveWVlKCk7CiAgICAgICAgICAg\nIGUuc2V0U3NuKCI4ODgtUFAtMDAxIiArIGkpOwogICAgICAgICAgICBlLnNl\ndFNhbGFyeSgxMDAwMDApOwogICAgICAgICAgICBkZXB0LmFkZEVtcGxveWVl\nKGUpOwogICAgICAgIH0KICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8PSBQ\nQVJUVElNRV9FTVBMT1lFRV9DT1VOVDsgaSsrKSB7CiAgICAgICAgICAgIFBh\ncnRUaW1lRW1wbG95ZWUgZSA9IG5ldyBQYXJ0VGltZUVtcGxveWVlKCk7CiAg\nICAgICAgICAgIGUuc2V0U3NuKCI5OTktUFAtMDAxIiArIGkpOwogICAgICAg\nICAgICBlLnNldEhvdXJseVdhZ2UoMjApOwogICAgICAgICAgICBkZXB0LmFk\nZEVtcGxveWVlKGUpOwogICAgICAgIH0KCiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3Qo\nZGVwdCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsK\nICAgICAgICBlbS5jbG9zZSgpOwoKICAgIH0KICAgIAogICAgcHJpdmF0ZSB2\nb2lkIGNyZWF0ZUludm9pY2UoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5\nVHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAg\nICAgdHJhbi5iZWdpbigpOwogICAgICAgIEludm9pY2UgaW52b2ljZSA9IG5l\ndyBJbnZvaWNlKDEsICJSZWQiLCAxLjMwKTsKICAgICAgICBmb3IgKGludCBp\nID0gMTsgIGkgPD0gTElORUlURU1fUEVSX0lOVk9JQ0U7IGkrKykgewogICAg\nICAgICAgICBMaW5lSXRlbSBpdGVtID0gbmV3IExpbmVJdGVtKFN0cmluZy52\nYWx1ZU9mKGkpLCAxMCk7CiAgICAgICAgICAgIGl0ZW0uc2V0SW52b2ljZShp\nbnZvaWNlKTsKICAgICAgICAgICAgaW52b2ljZS5nZXRMaW5lSXRlbXMoKS5h\nZGQoaXRlbSk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoaW52b2ljZSk7CiAg\nICAgICAgfQogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21t\naXQoKTsKICAgICAgICBlbS5jbG9zZSgpOyAgICAgICAgCiAgICB9ICAgCn0K\nCg==\n","encoding":"base64"}

