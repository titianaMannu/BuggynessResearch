{"sha":"5eb9ed642b171457e32d8edc83c19a1d3901f6fc","node_id":"MDQ6QmxvYjIwNjM2NDo1ZWI5ZWQ2NDJiMTcxNDU3ZTMyZDhlZGM4M2MxOWExZDM5MDFmNmZj","size":30589,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5eb9ed642b171457e32d8edc83c19a1d3901f6fc","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tcGF0\nOwoKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0\naWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBq\nYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLlF1ZXJ5OwoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5jb25mLkNvbXBhdGliaWxpdHk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuY29uZi5TcGVjaWZpY2F0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5qZGJjLkFic3RyYWN0SkRCQ0xpc3RlbmVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5qZGJjLkpEQkNFdmVudDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIuamRiYy5KREJDTGlzdGVuZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0\neU1hbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLlNRTFNuaWZmZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5BYnN0\ncmFjdENhY2hlZEVNRlRlc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3RTcGVj\nQ29tcGF0aWJpbGl0eU9wdGlvbnMgCmV4dGVuZHMgQWJzdHJhY3RDYWNoZWRF\nTUZUZXN0Q2FzZSB7CiAgICAKICAgIHByb3RlY3RlZCBMaXN0PFN0cmluZz4g\nc3FsID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7CiAgICBwcm90ZWN0ZWQg\naW50IHNxbENvdW50OwoKICAgIC8qCiAgICAgKiBWZXJpZmllcyBjb21wYXRp\nYmlsaXR5IG9wdGlvbnMgYW5kIHNwZWMgbGV2ZWwgYXJlIGFwcHJvcHJpYXRl\nCiAgICAgKiBmb3IgYSB2ZXJzaW9uIDIgcGVyc2lzdGVuY2UueG1sCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RKUEExQ29tcGF0aWJpbGl0eU9wdGlv\nbnMoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJ\nIGVtZiA9CiAgICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQ\nSSlPcGVuSlBBUGVyc2lzdGVuY2UuCiAgICAgICAgICAgIGNyZWF0ZUVudGl0\neU1hbmFnZXJGYWN0b3J5KCJwZXJzaXN0ZW5jZV8xXzAiLAogICAgICAgICAg\nICAgICAgIm9yZy9hcGFjaGUvb3BlbmpwYS9wZXJzaXN0ZW5jZS9jb21wYXQv\nIiArCiAgICAgICAgICAgICAgICAicGVyc2lzdGVuY2VfMV8wLnhtbCIpOwoK\nICAgICAgICBDb21wYXRpYmlsaXR5IGNvbXBhdCA9IGVtZi5nZXRDb25maWd1\ncmF0aW9uKCkuZ2V0Q29tcGF0aWJpbGl0eUluc3RhbmNlKCk7CiAgICAgICAg\nYXNzZXJ0VHJ1ZShjb21wYXQuZ2V0Rmx1c2hCZWZvcmVEZXRhY2goKSk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZShjb21wYXQuZ2V0Q29weU9uRGV0YWNoKCkpOwog\nICAgICAgIGFzc2VydFRydWUoY29tcGF0LmdldFByaXZhdGVQZXJzaXN0ZW50\nUHJvcGVydGllcygpKTsKICAgICAgICBTdHJpbmcgdk1vZGUgPSBlbWYuZ2V0\nQ29uZmlndXJhdGlvbigpLmdldFZhbGlkYXRpb25Nb2RlKCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJOT05FIiwgdk1vZGUpOwogICAgICAgIFNwZWNpZmlj\nYXRpb24gc3BlYyA9IGVtZi5nZXRDb25maWd1cmF0aW9uKCkuZ2V0U3BlY2lm\naWNhdGlvbkluc3RhbmNlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJKUEEi\nLCBzcGVjLmdldE5hbWUoKS50b1VwcGVyQ2FzZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoc3BlYy5nZXRWZXJzaW9uKCksIDEpOwogICAgICAgIAogICAg\nICAgIGVtZi5jbG9zZSgpOwoKICAgIH0KCiAgICAvKgogICAgICogVmVyaWZp\nZXMgY29tcGF0aWJpbGl0eSBvcHRpb25zIGFuZCBzcGVjIGxldmVsIGFyZSBh\ncHByb3ByaWF0ZQogICAgICogZm9yIGEgdmVyc2lvbiAyIHBlcnNpc3RlbmNl\nLnhtbAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0SlBBMkNvbXBhdGli\naWxpdHlPcHRpb25zKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeVNQSSBlbWYgPQogICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdl\nckZhY3RvcnlTUEkpT3BlbkpQQVBlcnNpc3RlbmNlLgogICAgICAgICAgICBj\ncmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgicGVyc2lzdGVuY2VfMl8wIiwK\nICAgICAgICAgICAgICAgICJvcmcvYXBhY2hlL29wZW5qcGEvcGVyc2lzdGVu\nY2UvY29tcGF0LyIgKwogICAgICAgICAgICAgICAgInBlcnNpc3RlbmNlXzJf\nMC54bWwiKTsKCiAgICAgICAgQ29tcGF0aWJpbGl0eSBjb21wYXQgPSBlbWYu\nZ2V0Q29uZmlndXJhdGlvbigpLmdldENvbXBhdGliaWxpdHlJbnN0YW5jZSgp\nOwogICAgICAgIGFzc2VydEZhbHNlKGNvbXBhdC5nZXRGbHVzaEJlZm9yZURl\ndGFjaCgpKTsKICAgICAgICBhc3NlcnRGYWxzZShjb21wYXQuZ2V0Q29weU9u\nRGV0YWNoKCkpOwogICAgICAgIGFzc2VydEZhbHNlKGNvbXBhdC5nZXRQcml2\nYXRlUGVyc2lzdGVudFByb3BlcnRpZXMoKSk7CiAgICAgICAgU3RyaW5nIHZN\nb2RlID0gZW1mLmdldENvbmZpZ3VyYXRpb24oKS5nZXRWYWxpZGF0aW9uTW9k\nZSgpOwogICAgICAgIGFzc2VydEVxdWFscygiQVVUTyIsIHZNb2RlKTsKICAg\nICAgICBTcGVjaWZpY2F0aW9uIHNwZWMgPSBlbWYuZ2V0Q29uZmlndXJhdGlv\nbigpLmdldFNwZWNpZmljYXRpb25JbnN0YW5jZSgpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiSlBBIiwgc3BlYy5nZXROYW1lKCkudG9VcHBlckNhc2UoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHNwZWMuZ2V0VmVyc2lvbigpLCAyKTsK\nICAgICAgICAKICAgICAgICBlbWYuY2xvc2UoKTsKICAgIH0KCiAgICAvKgog\nICAgICogUGVyIEpQQSAyLjAsIFJlbGF0aW9uc2hpcHMgaW4gbWFwcGVkIHN1\ncGVyY2xhc3MgbXVzdCBiZSB1bmlkaXJlY3Rpb25hbC4KICAgICAqIEFuIGV4\nY2VwdGlvaW4gd2lsbCBiZSB0aHJvd24gd2hlbiBhIGJpLWRpcmVjdGlvbmFs\nIHJlbGF0aW9uIGlzIGRldGVjdGVkIGluCiAgICAgKiBhIG1hcHBlZCBzdXBl\ncmNsYXNzLiAKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdE1hcHBlZFN1\ncGVyQ2xhc3MoKSB7CiAgICAgICAgTGlzdDxDbGFzczw/Pj4gdHlwZXMgPSBu\nZXcgQXJyYXlMaXN0PENsYXNzPD8+PigpOwogICAgICAgIHR5cGVzLmFkZChF\nbnRpdHlBLmNsYXNzKTsKICAgICAgICB0eXBlcy5hZGQoRW50aXR5Qi5jbGFz\ncyk7CiAgICAgICAgdHlwZXMuYWRkKE1hcHBlZFN1cGVyLmNsYXNzKTsKICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0gY3Jl\nYXRlRU1GMl8wKHR5cGVzKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIEVudGl0eUEgYSA9IG5l\ndyBFbnRpdHlBKCk7CiAgICAgICAgICAgIGEuc2V0SWQoMSk7CiAgICAgICAg\nICAgIEVudGl0eUIgYiA9IG5ldyBFbnRpdHlCKCk7CiAgICAgICAgICAgIGIu\nc2V0SWQoMSk7CiAgICAgICAgICAgIGEuc2V0RW50aXR5QihiKTsKICAgICAg\nICAgICAgYi5zZXRFbnRpdHlBKGEpOwogICAgICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoYSk7\nCiAgICAgICAgICAgIGVtLnBlcnNpc3QoYik7CiAgICAgICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICAgICAgICAgIGZhaWwoIkFuIGV4Y2VwdGlvaW4gd2lsbCBiZSB0\naHJvd24gZm9yIGEgYmktZGlyZWN0aW9uYWwgcmVsYXRpb24gZGVjbGFyZWQg\naW4gbWFwcGVkIHN1cGVyY2xhc3MiKTsKICAgICAgICB9IGNhdGNoIChvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuQXJndW1lbnRFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICBpZiAoZW0gIT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgICAg\nICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0g\nZmluYWxseSB7CiAgICAgICAgICAgIGVtZi5jbG9zZSgpOwogICAgICAgIH0K\nICAgIH0KCiAgICAvKioKICAgICAqIFBlciBKUEEgMi4wLCB0aGUgZm9sbG93\naW5nIG9uZS10by1tYW55IG1hcHBpbmdzIGFyZSBzdXBwb3J0ZWQuCiAgICAg\nKiAoMSkgdW5pLS9PbmVUb01hbnkvZm9yZWlnbiBrZXkgc3RyYXRlZ3kKICAg\nICAqICgyKSB1bmktL09uZVRvTWFueS9qb2luIHRhYmxlIHN0cmF0ZWd5IChk\nZWZhdWx0KQogICAgICogKDMpIGJpLS9PbmVUb01hbnkvZm9yZWlnbiBrZXkg\nc3RyYXRlZ3kgKGRlZmF1bHQpCiAgICAgKiAoNCkgYmktL09uZVRvTWFueS9q\nb2luIHRhYmxlIHN0cmF0ZWd5CiAgICAgKiBUaGUgSm9pbkNvbHVtbiBhbmQg\nSm9pblRhYmxlIGFubm90YXRpb25zIG9yIGNvcnJlc3BvbmRpbmcgWE1MIAog\nICAgICogZWxlbWVudHMgbXVzdCBiZSB1c2VkIHRvIHNwZWNpZnkgc3VjaCBu\nb24tZGVmYXVsdCBtYXBwaW5ncwogICAgICogCiAgICAgKiBGb3IgKDEpLCB0\naGUgc3BlYyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGV4YW1wbGUgKFNlYyAx\nMS4xLjM2KToKICAgICAqIEV4YW1wbGUgMzogVW5pZGlyZWN0aW9uYWwgT25l\nLXRvLU1hbnkgYXNzb2NpYXRpb24gdXNpbmcgYSBmb3JlaWduIAogICAgICog\na2V5IG1hcHBpbmc6CiAgICAgKiBJbiBDdXN0b21lciBjbGFzczoKICAgICAq\nIEBPbmVUb01hbnkob3JwaGFuUmVtb3ZhbD10cnVlKQogICAgICogQEpvaW5D\nb2x1bW4obmFtZT0iQ1VTVF9JRCIpIC8vIGpvaW4gY29sdW1uIGlzIGluIHRh\nYmxlIGZvciBPcmRlcgogICAgICogcHVibGljIFNldDxPcmRlcj4gZ2V0T3Jk\nZXJzKCkge3JldHVybiBvcmRlcnM7fQogICAgICogCiAgICAgKiBGb3IgKDQp\nLCBCaS1kaXJlY3Rpb25hbCBPbmUtdC1NYW55IGFzc29jaWF0aW9uIHVzaW5n\nIHRoZSBqb2luIAogICAgICogdGFibGUgbWFwcGluZzoKICAgICAqIEluIEN1\nc3RvbWVyIGNsYXNzOgogICAgICogQE9uZVRvTWFueShtYXBwZWRCeT0iY3Vz\ndG9tZXIiKQogICAgICogQEpvaW5UYWJsZSgKICAgICAqICAgbmFtZT0iQ3Vz\ndG9tZXJfT3JkZXJzIiwKICAgICAqICAgam9pbkNvbHVtbnM9CiAgICAgKiAg\nICAgQEpvaW5Db2x1bW4obmFtZT0iT3JkZXJfSUQiLCByZWZlcmVuY2VkQ29s\ndW1uTmFtZT0iSUQiKSwKICAgICAqICAgIGludmVyc2VKb2luQ29sdW1ucz0K\nICAgICAqICAgICBASm9pbkNvbHVtbihuYW1lPSJDdXN0X0lEIiwgcmVmZXJl\nbmNlZENvbHVtbk5hbWU9IklEIikKICAgICAqICApCiAgICAgKiAgcHVibGlj\nIFNldDxPcmRlcj4gZ2V0T3JkZXJzKCkge3JldHVybiBvcmRlcnM7fQogICAg\nICogIAogICAgICogIE5vdGUgdGhhdCBpbiB0aGlzIHNjZW5hcmlvLCBASm9p\nblRhYmxlIGlzIHJlcXVpcmVkLiBTaW1wbHkgYXBwbHlpbmcgQEpvaW5Db2x1\nbW4gCiAgICAgKiAgd2l0aG91dCBASm9pblRhYmxlIHdpbGwgcmVzdWx0IGlu\nIGFuIGV4Y2VwdGlvbiB0aHJvd24gYnkgb3BlbmpwYS4KICAgICAqIAogICAg\nICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25lVG9NYW55UmVsYXRpb24oKSB7\nCiAgICAgICAgTGlzdDxDbGFzczw/Pj4gdHlwZXMgPSBuZXcgQXJyYXlMaXN0\nPENsYXNzPD8+PigpOwogICAgICAgIHR5cGVzLmFkZChFbnRpdHlDLmNsYXNz\nKTsKICAgICAgICB0eXBlcy5hZGQoRW50aXR5Q19CMU1GSy5jbGFzcyk7CiAg\nICAgICAgdHlwZXMuYWRkKEVudGl0eUNfQjFNSlQuY2xhc3MpOwogICAgICAg\nIHR5cGVzLmFkZChFbnRpdHlDX1UxTUZLLmNsYXNzKTsKICAgICAgICB0eXBl\ncy5hZGQoQmlfMVRvTV9GSy5jbGFzcyk7CiAgICAgICAgdHlwZXMuYWRkKEJp\nXzFUb01fSlQuY2xhc3MpOwogICAgICAgIHR5cGVzLmFkZChVbmlfMVRvTV9G\nSy5jbGFzcyk7CiAgICAgICAgdHlwZXMuYWRkKFVuaV8xVG9NX0pULmNsYXNz\nKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1m\nID0gY3JlYXRlRU1GMl8wKHR5cGVzKTsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAKICAg\nICAgICB0cnkgewogICAgICAgICAgICAvLyB0cmlnZ2VyIHRhYmxlIGNyZWF0\naW9uCiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAg\nICAgICAgICAgYXNzZXJ0U1FMRnJhZ25tZW50cyhzcWwsICJDUkVBVEUgVEFC\nTEUgQmkxTUpUX0MiLCAiQ19JRCIsICJCaTFNSlRfSUQiKTsKICAgICAgICAg\nICAgYXNzZXJ0U1FMRnJhZ25tZW50cyhzcWwsICJDUkVBVEUgVEFCTEUgQ19C\nMU1GSyIsICJCSTFNRktfSUQiKTsKICAgICAgICAgICAgYXNzZXJ0U1FMRnJh\nZ25tZW50cyhzcWwsICJDUkVBVEUgVEFCTEUgVW5pMU1KVF9DIiwgIlVuaTFN\nSlRfSUQiLCAiQ19JRCIpOwogICAgICAgICAgICBhc3NlcnRTUUxGcmFnbm1l\nbnRzKHNxbCwgIkNSRUFURSBUQUJMRSBDX0IxTUZLIiwgIkJJMU1GS19JRCIp\nOwogICAgICAgICAgICBhc3NlcnRTUUxGcmFnbm1lbnRzKHNxbCwgIkNSRUFU\nRSBUQUJMRSBDX1UxTUZLIiwgIlVuaTFNRktfSUQiKTsKICAgICAgICAgICAg\nY3J1ZFVuaTFNRksoZW0pOwogICAgICAgICAgICBjcnVkVW5pMU1KVChlbSk7\nCiAgICAgICAgICAgIGNydWRCaTFNRksoZW0pOwogICAgICAgICAgICBjcnVk\nQmkxTUpUKGVtKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICBm\nYWlsKCJPbmVUb01hbnkgbWFwcGluZyBmYWlsZWQgd2l0aCBleGNlcHRpb24g\nbWVzc2FnZTogIiArIGUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICB9IGZpbmFs\nbHkgewogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICBlbWYu\nY2xvc2UoKTsgICAgICAgICAgICAKICAgICAgICB9CiAgICB9CiAgICAKICAg\nIC8vIG5vbiBkZWZhdWx0CiAgICBwdWJsaWMgdm9pZCBjcnVkVW5pMU1GSyhF\nbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAgLy9jcmVhdGUKICAgICAgICBV\nbmlfMVRvTV9GSyB1ID0gbmV3IFVuaV8xVG9NX0ZLKCk7CiAgICAgICAgdS5z\nZXROYW1lKCJ1Iik7CiAgICAgICAgTGlzdDxFbnRpdHlDX1UxTUZLPiBjcyA9\nIG5ldyBBcnJheUxpc3Q8RW50aXR5Q19VMU1GSz4oKTsKICAgICAgICBFbnRp\ndHlDX1UxTUZLIGMgPSBuZXcgRW50aXR5Q19VMU1GSygpOwogICAgICAgIGMu\nc2V0TmFtZSgiYyIpOwogICAgICAgIGNzLmFkZChjKTsKICAgICAgICB1LnNl\ndEVudGl0eUNzKGNzKTsKICAgICAgICBlbS5wZXJzaXN0KHUpOwogICAgICAg\nIGVtLnBlcnNpc3QoYyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCgogICAgICAgIC8vdXBkYXRlCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIGNzID0gdS5nZXRFbnRpdHlDcygpOwogICAg\nICAgIHUuc2V0TmFtZSgibmV3TmFtZSIpOwogICAgICAgIEVudGl0eUNfVTFN\nRksgYzEgPSBuZXcgRW50aXR5Q19VMU1GSygpOwogICAgICAgIGMxLnNldE5h\nbWUoImMxIik7CiAgICAgICAgY3MuYWRkKGMxKTsKICAgICAgICBlbS5wZXJz\naXN0KGMxKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBieSByZW1vdmluZyBhIGMg\nYW5kIHRoZW4gYWRkIHRoaXMgYyB0byBhIG5ldyB1CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEVudGl0eUNfVTFNRksg\nYzIgPSBjcy5yZW1vdmUoMCk7CiAgICAgICAgCiAgICAgICAgVW5pXzFUb01f\nRksgdTIgPSBuZXcgVW5pXzFUb01fRksoKTsKICAgICAgICB1Mi5zZXROYW1l\nKCJ1MiIpOwogICAgICAgIExpc3Q8RW50aXR5Q19VMU1GSz4gY3MyID0gbmV3\nIEFycmF5TGlzdDxFbnRpdHlDX1UxTUZLPigpOwogICAgICAgIGNzMi5hZGQo\nYzIpOwogICAgICAgIHUyLnNldEVudGl0eUNzKGNzMik7CiAgICAgICAgZW0u\ncGVyc2lzdCh1Mik7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIAogICAgICAgIC8v\ncXVlcnkKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoIlNFTEVD\nVCB1IEZST00gVW5pXzFUb01fRksgdSB3aGVyZSB1Lm5hbWUgPSAnbmV3TmFt\nZSciKTsKICAgICAgICBVbmlfMVRvTV9GSyB1MSA9IChVbmlfMVRvTV9GSylx\nLmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2VydEVxdWFscyh1LCB1\nMSk7CiAgICAgICAgZW0uY2xlYXIoKTsKCiAgICAgICAgLy9maW5kCiAgICAg\nICAgbG9uZyBpZCA9IHUxLmdldElkKCk7CiAgICAgICAgVW5pXzFUb01fRksg\nZmluZFUxID0gZW0uZmluZChVbmlfMVRvTV9GSy5jbGFzcywgaWQpOwogICAg\nICAgIGFzc2VydEVxdWFscyhmaW5kVTEsIHUxKTsKICAgICAgICAKICAgICAg\nICAvL3JlbW92ZQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICBlbS5yZW1vdmUoZmluZFUxKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAg\nICB9CiAgICAKICAgIC8vIGRlZmF1bHQKICAgIHB1YmxpYyB2b2lkIGNydWRV\nbmkxTUpUKEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBVbmlfMVRvTV9K\nVCB1ID0gbmV3IFVuaV8xVG9NX0pUKCk7CiAgICAgICAgdS5zZXROYW1lKCJ1\nIik7CiAgICAgICAgTGlzdDxFbnRpdHlDPiBjcyA9IG5ldyBBcnJheUxpc3Q8\nRW50aXR5Qz4oKTsKICAgICAgICBFbnRpdHlDIGMgPSBuZXcgRW50aXR5Qygp\nOwogICAgICAgIGMuc2V0TmFtZSgiYyIpOwogICAgICAgIGNzLmFkZChjKTsK\nICAgICAgICB1LnNldEVudGl0eUNzKGNzKTsKICAgICAgICBlbS5wZXJzaXN0\nKHUpOwogICAgICAgIGVtLnBlcnNpc3QoYyk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAgLy91cGRhdGUKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgY3MgPSB1\nLmdldEVudGl0eUNzKCk7CiAgICAgICAgdS5zZXROYW1lKCJuZXdOYW1lIik7\nCiAgICAgICAgRW50aXR5QyBjMSA9IG5ldyBFbnRpdHlDKCk7CiAgICAgICAg\nYzEuc2V0TmFtZSgiYzEiKTsKICAgICAgICBjcy5hZGQoYzEpOwogICAgICAg\nIGVtLnBlcnNpc3QoYzEpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICAKICAgICAg\nICAvL3F1ZXJ5CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJT\nRUxFQ1QgdSBGUk9NIFVuaV8xVG9NX0pUIHUiKTsKICAgICAgICBVbmlfMVRv\nTV9KVCB1MSA9IChVbmlfMVRvTV9KVClxLmdldFNpbmdsZVJlc3VsdCgpOwog\nICAgICAgIGFzc2VydEVxdWFscyh1LCB1MSk7CiAgICAgICAgZW0uY2xlYXIo\nKTsKCiAgICAgICAgLy9maW5kCiAgICAgICAgbG9uZyBpZCA9IHUxLmdldElk\nKCk7CiAgICAgICAgVW5pXzFUb01fSlQgdTIgPSBlbS5maW5kKFVuaV8xVG9N\nX0pULmNsYXNzLCBpZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHUsIHUyKTsK\nICAgICAgICAKICAgICAgICAvL3JlbW92ZQogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5yZW1vdmUodTIpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0u\nY2xlYXIoKTsKICAgIH0KICAgIAogICAgLy9kZWZhdWx0CiAgICBwdWJsaWMg\ndm9pZCBjcnVkQmkxTUZLKEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBC\naV8xVG9NX0ZLIGIgPSBuZXcgQmlfMVRvTV9GSygpOwogICAgICAgIGIuc2V0\nTmFtZSgiYiIpOwogICAgICAgIExpc3Q8RW50aXR5Q19CMU1GSz4gY3MgPSBu\nZXcgQXJyYXlMaXN0PEVudGl0eUNfQjFNRks+KCk7CiAgICAgICAgRW50aXR5\nQ19CMU1GSyBjID0gbmV3IEVudGl0eUNfQjFNRksoKTsKICAgICAgICBjLnNl\ndE5hbWUoImMiKTsKICAgICAgICBjLnNldEJpMW1mayhiKTsKICAgICAgICBj\ncy5hZGQoYyk7CiAgICAgICAgYi5zZXRFbnRpdHlDcyhjcyk7CiAgICAgICAg\nZW0ucGVyc2lzdChiKTsKICAgICAgICBlbS5wZXJzaXN0KGMpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIC8vdXBk\nYXRlCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAg\nICAgIGNzID0gYi5nZXRFbnRpdHlDcygpOwogICAgICAgIGIuc2V0TmFtZSgi\nbmV3TmFtZSIpOwogICAgICAgIEVudGl0eUNfQjFNRksgYzEgPSBuZXcgRW50\naXR5Q19CMU1GSygpOwogICAgICAgIGMxLnNldE5hbWUoImMxIik7CiAgICAg\nICAgY3MuYWRkKGMxKTsKICAgICAgICBjMS5zZXRCaTFtZmsoYik7CiAgICAg\nICAgZW0ucGVyc2lzdChjMSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIAogICAg\nICAgIC8vcXVlcnkKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnko\nIlNFTEVDVCBiIEZST00gQmlfMVRvTV9GSyBiIik7CiAgICAgICAgQmlfMVRv\nTV9GSyBiMSA9IChCaV8xVG9NX0ZLKXEuZ2V0U2luZ2xlUmVzdWx0KCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKGIsIGIxKTsKICAgICAgICBlbS5jbGVhcigp\nOwoKICAgICAgICAvL2ZpbmQKICAgICAgICBsb25nIGlkID0gYjEuZ2V0SWQo\nKTsKICAgICAgICBCaV8xVG9NX0ZLIGIyID0gZW0uZmluZChCaV8xVG9NX0ZL\nLmNsYXNzLCBpZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGIsIGIyKTsKICAg\nICAgICAKICAgICAgICAvL3JlbW92ZQogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5yZW1vdmUoYjIpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xl\nYXIoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcnVkQmkxTUpUKEVudGl0\neU1hbmFnZXIgZW0pIHsKICAgICAgICBCaV8xVG9NX0pUIGIgPSBuZXcgQmlf\nMVRvTV9KVCgpOwogICAgICAgIGIuc2V0TmFtZSgiYiIpOwogICAgICAgIExp\nc3Q8RW50aXR5Q19CMU1KVD4gY3MgPSBuZXcgQXJyYXlMaXN0PEVudGl0eUNf\nQjFNSlQ+KCk7CiAgICAgICAgRW50aXR5Q19CMU1KVCBjID0gbmV3IEVudGl0\neUNfQjFNSlQoKTsKICAgICAgICBjLnNldE5hbWUoImMiKTsKICAgICAgICBj\nLnNldEJpMW1qdChiKTsKICAgICAgICBjcy5hZGQoYyk7CiAgICAgICAgYi5z\nZXRFbnRpdHlDcyhjcyk7CiAgICAgICAgZW0ucGVyc2lzdChiKTsKICAgICAg\nICBlbS5wZXJzaXN0KGMpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwoKICAgICAgICAvL3VwZGF0ZQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICBjcyA9IGIuZ2V0RW50aXR5Q3MoKTsKICAg\nICAgICBiLnNldE5hbWUoIm5ld05hbWUiKTsKICAgICAgICBFbnRpdHlDX0Ix\nTUpUIGMxID0gbmV3IEVudGl0eUNfQjFNSlQoKTsKICAgICAgICBjMS5zZXRO\nYW1lKCJjMSIpOwogICAgICAgIGNzLmFkZChjMSk7CiAgICAgICAgYzEuc2V0\nQmkxbWp0KGIpOwogICAgICAgIGVtLnBlcnNpc3QoYzEpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIo\nKTsKICAgICAgICAKICAgICAgICAvL3F1ZXJ5CiAgICAgICAgUXVlcnkgcSA9\nIGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgYiBGUk9NIEJpXzFUb01fSlQgYiB3\naGVyZSBiLm5hbWUgPSAnbmV3TmFtZSciKTsKICAgICAgICBCaV8xVG9NX0pU\nIGIxID0gKEJpXzFUb01fSlQpcS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoYiwgYjEpOwogICAgICAgIGVtLmNsZWFyKCk7Cgog\nICAgICAgIC8vcXVlcnkKICAgICAgICBxID0gZW0uY3JlYXRlUXVlcnkoIlNF\nTEVDVCBjIEZST00gRW50aXR5Q19CMU1KVCBjIik7CiAgICAgICAgTGlzdDxF\nbnRpdHlDX0IxTUpUPiBjczEgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMiwgY3MxLnNpemUoKSk7CiAgICAgICAgZW0uY2xl\nYXIoKTsKICAgICAgICAgICAgICAgIAogICAgICAgIC8vZmluZAogICAgICAg\nIGxvbmcgaWQgPSBiMS5nZXRJZCgpOwogICAgICAgIEJpXzFUb01fSlQgYjIg\nPSBlbS5maW5kKEJpXzFUb01fSlQuY2xhc3MsIGlkKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoYiwgYjIpOwogICAgICAgIAogICAgICAgIC8vcmVtb3ZlCiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVt\nLnJlbW92ZShiMik7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCB0ZXN0T25lVG9NYW55TWFwUmVsYXRpb24oKSB7CiAgICAgICAg\nTGlzdDxDbGFzczw/Pj4gdHlwZXMgPSBuZXcgQXJyYXlMaXN0PENsYXNzPD8+\nPigpOwogICAgICAgIHR5cGVzLmFkZChFbnRpdHlDX1UxTV9NYXBfRksuY2xh\nc3MpOwogICAgICAgIHR5cGVzLmFkZChVbmlfMVRvTV9NYXBfRksuY2xhc3Mp\nOwogICAgICAgIHR5cGVzLmFkZChFbnRpdHlDX0IxTV9NYXBfSlQuY2xhc3Mp\nOwogICAgICAgIHR5cGVzLmFkZChCaV8xVG9NX01hcF9KVC5jbGFzcyk7CiAg\nICAgICAgdHlwZXMuYWRkKEVudGl0eUNfVTFNX01hcF9SZWxLZXlfRksuY2xh\nc3MpOwogICAgICAgIHR5cGVzLmFkZChVbmlfMVRvTV9NYXBfUmVsS2V5X0ZL\nLmNsYXNzKTsKICAgICAgICB0eXBlcy5hZGQoRW50aXR5Qy5jbGFzcyk7CiAg\nICAgICAgdHlwZXMuYWRkKEVudGl0eUNfQjFNX01hcF9SZWxLZXlfSlQuY2xh\nc3MpOwogICAgICAgIHR5cGVzLmFkZChCaV8xVG9NX01hcF9SZWxLZXlfSlQu\nY2xhc3MpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQ\nSSBlbWYgPSBjcmVhdGVFTUYyXzAodHlwZXMpOwogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIAogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIHRyaWdnZXIgdGFibGUg\nY3JlYXRpb24KICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgICAgICBhc3NlcnRTUUxGcmFnbm1lbnRzKHNxbCwgIkNSRUFU\nRSBUQUJMRSBDX1UxTV9NYXBfRksiLCAiVW5pMU1GS19JRCIsICJLRVkwIik7\nCiAgICAgICAgICAgIGFzc2VydFNRTEZyYWdubWVudHMoc3FsLCAiQ1JFQVRF\nIFRBQkxFIEJpMU1fTWFwX0pUX0MiLCAiQl9JRCIsICJDX0lEIik7CiAgICAg\nICAgICAgIGFzc2VydFNRTEZyYWdubWVudHMoc3FsLCAiQ1JFQVRFIFRBQkxF\nIENfVTFNX01hcF9SZWxLZXlfRksiLCAiVW5pMU1GS19JRCIpOwogICAgICAg\nICAgICBhc3NlcnRTUUxGcmFnbm1lbnRzKHNxbCwgIkNSRUFURSBUQUJMRSBC\naTFNX01hcF9SZWxLZXlfSlRfQyIsICJCX0lEIiwgIkNfSUQiKTsKICAgICAg\nICAgICAgY3J1ZFVuaTFNTWFwRksoZW0pOwogICAgICAgICAgICBjcnVkQmkx\nTU1hcEpUKGVtKTsKICAgICAgICAgICAgY3J1ZFVuaTFNTWFwUmVsS2V5Rkso\nZW0pOwogICAgICAgICAgICBjcnVkQmkxTU1hcFJlbEtleUpUKGVtKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBlLnBy\naW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICBmYWlsKCJPbmVUb01hbnkg\nbWFwcGluZyBmYWlsZWQgd2l0aCBleGNlcHRpb24gbWVzc2FnZTogIiArIGUu\nZ2V0TWVzc2FnZSgpKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAg\nICBlbS5jbG9zZSgpOwogICAgICAgICAgICBlbWYuY2xvc2UoKTsgICAgICAg\nICAgICAKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgY3J1ZFVu\naTFNTWFwRksoRW50aXR5TWFuYWdlciBlbSkgewogICAgICAgIC8vY3JlYXRl\nCiAgICAgICAgVW5pXzFUb01fTWFwX0ZLIHUgPSBuZXcgVW5pXzFUb01fTWFw\nX0ZLKCk7CiAgICAgICAgdS5zZXROYW1lKCJ1Iik7CiAgICAgICAgTWFwPFN0\ncmluZywgRW50aXR5Q19VMU1fTWFwX0ZLPiBjcyA9IG5ldyBIYXNoTWFwPFN0\ncmluZywgRW50aXR5Q19VMU1fTWFwX0ZLPigpOwogICAgICAgIEVudGl0eUNf\nVTFNX01hcF9GSyBjMSA9IG5ldyBFbnRpdHlDX1UxTV9NYXBfRksoKTsKICAg\nICAgICBjMS5zZXROYW1lKCJjMSIpOwogICAgICAgIGNzLnB1dChjMS5nZXRO\nYW1lKCksIGMxKTsKICAgICAgICBFbnRpdHlDX1UxTV9NYXBfRksgYzIgPSBu\nZXcgRW50aXR5Q19VMU1fTWFwX0ZLKCk7CiAgICAgICAgYzIuc2V0TmFtZSgi\nYzIiKTsKICAgICAgICBjcy5wdXQoYzIuZ2V0TmFtZSgpLCBjMik7CiAgICAg\nICAgdS5zZXRFbnRpdHlDcyhjcyk7CiAgICAgICAgCiAgICAgICAgZW0ucGVy\nc2lzdCh1KTsKICAgICAgICBlbS5wZXJzaXN0KGMxKTsKICAgICAgICBlbS5w\nZXJzaXN0KGMyKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAg\nICAgICAgLy91cGRhdGUgYnkgYWRkaW5nIGEgbmV3IEMKICAgICAgICBjcyA9\nIHUuZ2V0RW50aXR5Q3MoKTsKICAgICAgICB1LnNldE5hbWUoIm5ld05hbWUi\nKTsKICAgICAgICBFbnRpdHlDX1UxTV9NYXBfRksgYzMgPSBuZXcgRW50aXR5\nQ19VMU1fTWFwX0ZLKCk7CiAgICAgICAgYzMuc2V0TmFtZSgiYzMiKTsKICAg\nICAgICBjcy5wdXQoYzMuZ2V0TmFtZSgpLCBjMyk7CiAgICAgICAgZW0ucGVy\nc2lzdChjMyk7CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAg\nICAgIAogICAgICAgIC8vIHVwZGF0ZSBieSByZW1vdmluZyBhIGMgYW5kIHRo\nZW4gYWRkIHRoaXMgYyB0byBhIG5ldyB1CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEVudGl0eUNfVTFNX01hcF9GSyBj\nNCA9IGNzLnJlbW92ZSgiYzEiKTsKICAgICAgICAKICAgICAgICBVbmlfMVRv\nTV9NYXBfRksgdTIgPSBuZXcgVW5pXzFUb01fTWFwX0ZLKCk7CiAgICAgICAg\ndTIuc2V0TmFtZSgidTIiKTsKICAgICAgICBNYXA8U3RyaW5nLCBFbnRpdHlD\nX1UxTV9NYXBfRks+IGNzMiA9IG5ldyBIYXNoTWFwPFN0cmluZywgRW50aXR5\nQ19VMU1fTWFwX0ZLPigpOwogICAgICAgIGNzMi5wdXQoYzQuZ2V0TmFtZSgp\nLCBjNCk7CiAgICAgICAgdTIuc2V0RW50aXR5Q3MoY3MyKTsKICAgICAgICBl\nbS5wZXJzaXN0KHUyKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgCiAgICAgICAg\nLy9xdWVyeQogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgiU0VM\nRUNUIHUgRlJPTSBVbmlfMVRvTV9NYXBfRksgdSB3aGVyZSB1Lm5hbWU9J25l\nd05hbWUnIik7CiAgICAgICAgVW5pXzFUb01fTWFwX0ZLIHUxID0gKFVuaV8x\nVG9NX01hcF9GSylxLmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyh1LCB1MSk7CiAgICAgICAgZW0uY2xlYXIoKTsKCiAgICAgICAg\nLy9maW5kCiAgICAgICAgbG9uZyBpZCA9IHUxLmdldElkKCk7CiAgICAgICAg\nVW5pXzFUb01fTWFwX0ZLIGZpbmRVID0gZW0uZmluZChVbmlfMVRvTV9NYXBf\nRksuY2xhc3MsIGlkKTsKICAgICAgICBhc3NlcnRFcXVhbHModSwgZmluZFUp\nOwogICAgICAgIAogICAgICAgIC8vcmVtb3ZlCiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnJlbW92ZShmaW5kVSk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgY3J1ZEJpMU1NYXBKVChFbnRpdHlNYW5h\nZ2VyIGVtKSB7CiAgICAgICAgQmlfMVRvTV9NYXBfSlQgYiA9IG5ldyBCaV8x\nVG9NX01hcF9KVCgpOwogICAgICAgIGIuc2V0TmFtZSgiYiIpOwogICAgICAg\nIE1hcDxTdHJpbmcsIEVudGl0eUNfQjFNX01hcF9KVD4gY3MgPSBuZXcgSGFz\naE1hcDxTdHJpbmcsIEVudGl0eUNfQjFNX01hcF9KVD4oKTsKICAgICAgICBF\nbnRpdHlDX0IxTV9NYXBfSlQgYyA9IG5ldyBFbnRpdHlDX0IxTV9NYXBfSlQo\nKTsKICAgICAgICBjLnNldE5hbWUoImMiKTsKICAgICAgICBjLnNldEJpMW1q\ndChiKTsKICAgICAgICBjcy5wdXQoYy5nZXROYW1lKCksIGMpOwogICAgICAg\nIGIuc2V0RW50aXR5Q3MoY3MpOwogICAgICAgIGVtLnBlcnNpc3QoYik7CiAg\nICAgICAgZW0ucGVyc2lzdChjKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKCiAgICAgICAgLy91cGRhdGUKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgY3MgPSBiLmdldEVudGl0eUNzKCk7\nCiAgICAgICAgYi5zZXROYW1lKCJuZXdOYW1lIik7CiAgICAgICAgRW50aXR5\nQ19CMU1fTWFwX0pUIGMxID0gbmV3IEVudGl0eUNfQjFNX01hcF9KVCgpOwog\nICAgICAgIGMxLnNldE5hbWUoImMxIik7CiAgICAgICAgY3MucHV0KGMxLmdl\ndE5hbWUoKSwgYzEpOwogICAgICAgIGMxLnNldEJpMW1qdChiKTsKICAgICAg\nICBlbS5wZXJzaXN0KGMxKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgCiAgICAg\nICAgLy9xdWVyeQogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgi\nU0VMRUNUIGIgRlJPTSBCaV8xVG9NX01hcF9KVCBiIik7CiAgICAgICAgQmlf\nMVRvTV9NYXBfSlQgYjEgPSAoQmlfMVRvTV9NYXBfSlQpcS5nZXRTaW5nbGVS\nZXN1bHQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoYiwgYjEpOwogICAgICAg\nIGVtLmNsZWFyKCk7CgogICAgICAgIC8vIHF1ZXJ5IHRoZSBvd25lcgogICAg\nICAgIHEgPSBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIGMgRlJPTSBFbnRpdHlD\nX0IxTV9NYXBfSlQgYyIpOwogICAgICAgIExpc3Q8RW50aXR5Q19CMU1fTWFw\nX0pUPiBjczEgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMiwgY3Muc2l6ZSgpKTsKICAgICAgICBlbS5jbGVhcigpOwogICAg\nICAgIAogICAgICAgIC8vZmluZAogICAgICAgIGxvbmcgaWQgPSBiMS5nZXRJ\nZCgpOwogICAgICAgIEJpXzFUb01fTWFwX0pUIGIyID0gZW0uZmluZChCaV8x\nVG9NX01hcF9KVC5jbGFzcywgaWQpOwogICAgICAgIGFzc2VydEVxdWFscyhi\nLCBiMik7CiAgICAgICAgCiAgICAgICAgLy9yZW1vdmUKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucmVtb3ZlKGIy\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCBjcnVkVW5pMU1NYXBSZWxLZXlGSyhF\nbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAgLy9jcmVhdGUKICAgICAgICBV\nbmlfMVRvTV9NYXBfUmVsS2V5X0ZLIHUgPSBuZXcgVW5pXzFUb01fTWFwX1Jl\nbEtleV9GSygpOwogICAgICAgIHUuc2V0TmFtZSgidSIpOwogICAgICAgIE1h\ncDxFbnRpdHlDLCBFbnRpdHlDX1UxTV9NYXBfUmVsS2V5X0ZLPiBjcyA9IG5l\ndyBIYXNoTWFwPEVudGl0eUMsIEVudGl0eUNfVTFNX01hcF9SZWxLZXlfRks+\nKCk7CiAgICAgICAgRW50aXR5Q19VMU1fTWFwX1JlbEtleV9GSyBjMSA9IG5l\ndyBFbnRpdHlDX1UxTV9NYXBfUmVsS2V5X0ZLKCk7CiAgICAgICAgYzEuc2V0\nTmFtZSgiYzEiKTsKICAgICAgICBFbnRpdHlDIGNLZXkxID0gbmV3IEVudGl0\neUMoKTsKICAgICAgICBjS2V5MS5zZXROYW1lKCJjS2V5MSIpOwogICAgICAg\nIGNzLnB1dChjS2V5MSwgYzEpOwogICAgICAgIEVudGl0eUNfVTFNX01hcF9S\nZWxLZXlfRksgYzIgPSBuZXcgRW50aXR5Q19VMU1fTWFwX1JlbEtleV9GSygp\nOwogICAgICAgIGMyLnNldE5hbWUoImMyIik7CiAgICAgICAgRW50aXR5QyBj\nS2V5MiA9IG5ldyBFbnRpdHlDKCk7CiAgICAgICAgY0tleTIuc2V0TmFtZSgi\nY0tleTIiKTsKICAgICAgICBjcy5wdXQoY0tleTIsIGMxKTsKICAgICAgICBj\ncy5wdXQoY0tleTIsIGMyKTsKICAgICAgICB1LnNldEVudGl0eUNzKGNzKTsK\nICAgICAgICBlbS5wZXJzaXN0KHUpOwogICAgICAgIGVtLnBlcnNpc3QoYzEp\nOwogICAgICAgIGVtLnBlcnNpc3QoYzIpOwogICAgICAgIGVtLnBlcnNpc3Qo\nY0tleTEpOwogICAgICAgIGVtLnBlcnNpc3QoY0tleTIpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwoKICAgICAgICAvL3VwZGF0ZSBieSBhZGRp\nbmcgYSBuZXcgQwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICBjcyA9IHUuZ2V0RW50aXR5Q3MoKTsKICAgICAgICB1LnNl\ndE5hbWUoIm5ld05hbWUiKTsKICAgICAgICBFbnRpdHlDX1UxTV9NYXBfUmVs\nS2V5X0ZLIGMzID0gbmV3IEVudGl0eUNfVTFNX01hcF9SZWxLZXlfRksoKTsK\nICAgICAgICBjMy5zZXROYW1lKCJjMyIpOwogICAgICAgIEVudGl0eUMgY0tl\neTMgPSBuZXcgRW50aXR5QygpOwogICAgICAgIGNLZXkzLnNldE5hbWUoImNL\nZXkzIik7CiAgICAgICAgY3MucHV0KGNLZXkzLCBjMyk7CiAgICAgICAgZW0u\ncGVyc2lzdChjMyk7CiAgICAgICAgZW0ucGVyc2lzdChjS2V5Myk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAKICAg\nICAgICAvLyB1cGRhdGUgYnkgcmVtb3ZpbmcgYSBjIGFuZCB0aGVuIGFkZCB0\naGlzIGMgdG8gYSBuZXcgdQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBFbnRpdHlDX1UxTV9NYXBfUmVsS2V5X0ZLIGM0\nID0gY3MucmVtb3ZlKGNLZXkxKTsKICAgICAgICAKICAgICAgICBVbmlfMVRv\nTV9NYXBfUmVsS2V5X0ZLIHUyID0gbmV3IFVuaV8xVG9NX01hcF9SZWxLZXlf\nRksoKTsKICAgICAgICB1Mi5zZXROYW1lKCJ1MiIpOwogICAgICAgIE1hcDxF\nbnRpdHlDLCBFbnRpdHlDX1UxTV9NYXBfUmVsS2V5X0ZLPiBjczIgPSBuZXcg\nSGFzaE1hcDxFbnRpdHlDLCBFbnRpdHlDX1UxTV9NYXBfUmVsS2V5X0ZLPigp\nOwogICAgICAgIGNzMi5wdXQoY0tleTEsIGM0KTsKICAgICAgICB1Mi5zZXRF\nbnRpdHlDcyhjczIpOwogICAgICAgIGVtLnBlcnNpc3QodTIpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xl\nYXIoKTsKICAgICAgICAKICAgICAgICAvL3F1ZXJ5CiAgICAgICAgUXVlcnkg\ncSA9IGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgdSBGUk9NIFVuaV8xVG9NX01h\ncF9SZWxLZXlfRksgdSB3aGVyZSB1Lm5hbWU9J25ld05hbWUnIik7CiAgICAg\nICAgVW5pXzFUb01fTWFwX1JlbEtleV9GSyB1MSA9IChVbmlfMVRvTV9NYXBf\nUmVsS2V5X0ZLKXEuZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKHUsIHUxKTsKICAgICAgICBlbS5jbGVhcigpOwoKICAgICAgICAv\nL2ZpbmQKICAgICAgICBsb25nIGlkID0gdTEuZ2V0SWQoKTsKICAgICAgICBV\nbmlfMVRvTV9NYXBfUmVsS2V5X0ZLIGZpbmRVID0gZW0uZmluZChVbmlfMVRv\nTV9NYXBfUmVsS2V5X0ZLLmNsYXNzLCBpZCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKHUsIGZpbmRVKTsKICAgICAgICAKICAgICAgICAvL3JlbW92ZQogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5y\nZW1vdmUoZmluZFUpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3J1ZEJpMU1NYXBSZWxL\nZXlKVChFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAgQmlfMVRvTV9NYXBf\nUmVsS2V5X0pUIGIgPSBuZXcgQmlfMVRvTV9NYXBfUmVsS2V5X0pUKCk7CiAg\nICAgICAgYi5zZXROYW1lKCJiIik7CiAgICAgICAgTWFwPEVudGl0eUMsIEVu\ndGl0eUNfQjFNX01hcF9SZWxLZXlfSlQ+IGNzID0gbmV3IEhhc2hNYXA8RW50\naXR5QywgRW50aXR5Q19CMU1fTWFwX1JlbEtleV9KVD4oKTsKICAgICAgICBF\nbnRpdHlDX0IxTV9NYXBfUmVsS2V5X0pUIGMgPSBuZXcgRW50aXR5Q19CMU1f\nTWFwX1JlbEtleV9KVCgpOwogICAgICAgIGMuc2V0TmFtZSgiYyIpOwogICAg\nICAgIGMuc2V0QmkxbWp0KGIpOwogICAgICAgIEVudGl0eUMgY0tleSA9IG5l\ndyBFbnRpdHlDKCk7CiAgICAgICAgY0tleS5zZXROYW1lKCJjS2V5Iik7CiAg\nICAgICAgY3MucHV0KGNLZXksIGMpOwogICAgICAgIGIuc2V0RW50aXR5Q3Mo\nY3MpOwogICAgICAgIGVtLnBlcnNpc3QoYik7CiAgICAgICAgZW0ucGVyc2lz\ndChjKTsKICAgICAgICBlbS5wZXJzaXN0KGNLZXkpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwoKICAgICAgICAvL3VwZGF0ZQogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBjcyA9IGIuZ2V0\nRW50aXR5Q3MoKTsKICAgICAgICBiLnNldE5hbWUoIm5ld05hbWUiKTsKICAg\nICAgICBFbnRpdHlDX0IxTV9NYXBfUmVsS2V5X0pUIGMxID0gbmV3IEVudGl0\neUNfQjFNX01hcF9SZWxLZXlfSlQoKTsKICAgICAgICBjMS5zZXROYW1lKCJj\nMSIpOwogICAgICAgIEVudGl0eUMgY0tleTEgPSBuZXcgRW50aXR5QygpOwog\nICAgICAgIGNLZXkxLnNldE5hbWUoImNLZXkxIik7CiAgICAgICAgY3MucHV0\nKGNLZXkxLCBjMSk7CiAgICAgICAgYzEuc2V0QmkxbWp0KGIpOwogICAgICAg\nIGVtLnBlcnNpc3QoYzEpOwogICAgICAgIGVtLnBlcnNpc3QoY0tleTEpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xlYXIoKTsKICAgICAgICAKICAgICAgICAvL3F1ZXJ5CiAgICAgICAg\nUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgYiBGUk9NIEJpXzFU\nb01fTWFwX1JlbEtleV9KVCBiIik7CiAgICAgICAgQmlfMVRvTV9NYXBfUmVs\nS2V5X0pUIGIxID0gKEJpXzFUb01fTWFwX1JlbEtleV9KVClxLmdldFNpbmds\nZVJlc3VsdCgpOwogICAgICAgIGFzc2VydEVxdWFscyhiLCBiMSk7CiAgICAg\nICAgZW0uY2xlYXIoKTsKCiAgICAgICAgLy8gcXVlcnkgdGhlIG93bmVyCiAg\nICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgYyBGUk9NIEVudGl0\neUNfQjFNX01hcF9SZWxLZXlfSlQgYyB3aGVyZSBjLm5hbWUgPSAnYyciKTsK\nICAgICAgICBFbnRpdHlDX0IxTV9NYXBfUmVsS2V5X0pUIG5ld0MgPSAoRW50\naXR5Q19CMU1fTWFwX1JlbEtleV9KVClxLmdldFNpbmdsZVJlc3VsdCgpOwog\nICAgICAgIGFzc2VydEVxdWFscyhuZXdDLCBjKTsKICAgICAgICBlbS5jbGVh\ncigpOwogICAgICAgIAogICAgICAgIC8vZmluZAogICAgICAgIGxvbmcgaWQg\nPSBiMS5nZXRJZCgpOwogICAgICAgIEJpXzFUb01fTWFwX1JlbEtleV9KVCBi\nMiA9IGVtLmZpbmQoQmlfMVRvTV9NYXBfUmVsS2V5X0pULmNsYXNzLCBpZCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKGIsIGIyKTsKICAgICAgICAKICAgICAg\nICAvL3JlbW92ZQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICBlbS5yZW1vdmUoYjIpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndFVuaU1hbnlUb09uZVVzaW5nSm9pblRhYmxlKCkgewogICAgICAgIExpc3Q8\nQ2xhc3M8Pz4+IHR5cGVzID0gbmV3IEFycmF5TGlzdDxDbGFzczw/Pj4oKTsK\nICAgICAgICB0eXBlcy5hZGQoRW50aXR5Qy5jbGFzcyk7CiAgICAgICAgdHlw\nZXMuYWRkKFVuaV9NVG8xX0pULmNsYXNzKTsKICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0gY3JlYXRlRU1GMl8wKHR5cGVz\nKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICAg\nICAvLyB0cmlnZ2VyIHRhYmxlIGNyZWF0aW9uCiAgICAgICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAgICAgYXNzZXJ0U1FMRnJh\nZ25tZW50cyhzcWwsICJDUkVBVEUgVEFCTEUgVW5pTTFKVF9DIiwgIlVfSUQi\nLCAiQ19JRCIpOwogICAgICAgICAgICBjcnVkVW5pTTFKVChlbSk7CiAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZS5wcmlu\ndFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgZmFpbCgiTWFueVRvT25lIG1h\ncHBpbmcgZmFpbGVkIHdpdGggZXhjZXB0aW9uIG1lc3NhZ2U6ICIgKyBlLmdl\ndE1lc3NhZ2UoKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\nZW0uY2xvc2UoKTsKICAgICAgICAgICAgZW1mLmNsb3NlKCk7ICAgICAgICAg\nICAgCiAgICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBjcnVk\nVW5pTTFKVChFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAgLy9jcmVhdGUK\nICAgICAgICBVbmlfTVRvMV9KVCB1ID0gbmV3IFVuaV9NVG8xX0pUKCk7CiAg\nICAgICAgdS5zZXROYW1lKCJ1Iik7CgogICAgICAgIFVuaV9NVG8xX0pUIHUx\nID0gbmV3IFVuaV9NVG8xX0pUKCk7CiAgICAgICAgdTEuc2V0TmFtZSgidTEi\nKTsKCiAgICAgICAgRW50aXR5QyBjMSA9IG5ldyBFbnRpdHlDKCk7CiAgICAg\nICAgYzEuc2V0TmFtZSgiYzEiKTsKICAgICAgICB1LnNldEVudGl0eUMoYzEp\nOwogICAgICAgIHUxLnNldEVudGl0eUMoYzEpOwogICAgICAgIAogICAgICAg\nIGVtLnBlcnNpc3QodSk7CiAgICAgICAgZW0ucGVyc2lzdCh1MSk7CiAgICAg\nICAgZW0ucGVyc2lzdChjMSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CgogICAgICAgIC8vdXBkYXRlIGJ5IGNoYW5naW5nIHRoZSBtYW55LXRv\nLW9uZSB2YWx1ZSAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgdS5zZXROYW1lKCJ1X25ldyIpOwogICAgICAgIEVudGl0\neUMgYzMgPSBuZXcgRW50aXR5QygpOwogICAgICAgIGMzLnNldE5hbWUoImMz\nIik7CiAgICAgICAgdS5zZXRFbnRpdHlDKGMzKTsKICAgICAgICBlbS5wZXJz\naXN0KGMzKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBiZSByZW1vdmluZyB0aGUg\nbWFueS10by1vbmUgdmFsdWUKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CiAgICAgICAgdS5zZXRFbnRpdHlDKG51bGwpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAg\nICAgLy9xdWVyeQogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgi\nU0VMRUNUIHUgRlJPTSBVbmlfTVRvMV9KVCB1IHdoZXJlIHUubmFtZT0ndV9u\nZXcnIik7CiAgICAgICAgVW5pX01UbzFfSlQgcXVlcnlVID0gKFVuaV9NVG8x\nX0pUKXEuZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKHUsIHF1ZXJ5VSk7CiAgICAgICAgZW0uY2xlYXIoKTsKCiAgICAgICAgLy9m\naW5kCiAgICAgICAgbG9uZyBpZCA9IHUxLmdldElkKCk7CiAgICAgICAgVW5p\nX01UbzFfSlQgZmluZFUgPSBlbS5maW5kKFVuaV9NVG8xX0pULmNsYXNzLCBp\nZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHUxLCBmaW5kVSk7CiAgICAgICAg\nCiAgICAgICAgLy9yZW1vdmUKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CiAgICAgICAgZW0ucmVtb3ZlKGZpbmRVKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RPbmVUb09uZVVzaW5nSm9pblRhYmxlKCkgewogICAgICAg\nIExpc3Q8Q2xhc3M8Pz4+IHR5cGVzID0gbmV3IEFycmF5TGlzdDxDbGFzczw/\nPj4oKTsKICAgICAgICB0eXBlcy5hZGQoRW50aXR5Q19CMTFKVC5jbGFzcyk7\nCiAgICAgICAgdHlwZXMuYWRkKEVudGl0eUNfVTExSlQuY2xhc3MpOwogICAg\nICAgIHR5cGVzLmFkZChCaV8xVG8xX0pULmNsYXNzKTsKICAgICAgICB0eXBl\ncy5hZGQoVW5pXzFUbzFfSlQuY2xhc3MpOwogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeVNQSSBlbWYgPSBjcmVhdGVFTUYyXzAodHlwZXMp\nOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIC8vIHRyaWdnZXIgdGFibGUgY3JlYXRpb24KICAgICAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgICAgICBhc3NlcnRTUUxGcmFn\nbm1lbnRzKHNxbCwgIkNSRUFURSBUQUJMRSBCaTExSlRfQyIsICJCX0lEIiwg\nIkNfSUQiKTsKICAgICAgICAgICAgYXNzZXJ0U1FMRnJhZ25tZW50cyhzcWws\nICJDUkVBVEUgVEFCTEUgVW5pMTFKVF9DIiwgIlVfSUQiLCAiQ19JRCIpOwog\nICAgICAgICAgICBjcnVkQmkxMUpUKGVtKTsKICAgICAgICAgICAgY3J1ZFVu\naTExSlQoZW0pOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIGZh\naWwoIk9uZVRvT25lIG1hcHBpbmcgZmFpbGVkIHdpdGggZXhjZXB0aW9uIG1l\nc3NhZ2U6ICIgKyBlLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfSBmaW5hbGx5\nIHsKICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAgICAgZW1mLmNs\nb3NlKCk7ICAgICAgICAgICAgCiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGNydWRVbmkxMUpUKEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAg\nICBVbmlfMVRvMV9KVCB1ID0gbmV3IFVuaV8xVG8xX0pUKCk7CiAgICAgICAg\ndS5zZXROYW1lKCJ1bmkxbWp0Iik7CgogICAgICAgIEVudGl0eUNfVTExSlQg\nYzEgPSBuZXcgRW50aXR5Q19VMTFKVCgpOwogICAgICAgIGMxLnNldE5hbWUo\nImMxIik7CiAgICAgICAgdS5zZXRFbnRpdHlDKGMxKTsKCiAgICAgICAgZW0u\ncGVyc2lzdCh1KTsKICAgICAgICBlbS5wZXJzaXN0KGMxKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAKICAgICAgICAvL3VwZGF0\nZSBieSBzZXR0aW5nIHRvIGEgbmV3IEMKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgdS5zZXROYW1lKCJ1bmkxbWp0X25l\ndyIpOwogICAgICAgIEVudGl0eUNfVTExSlQgbmV3QyA9IG5ldyBFbnRpdHlD\nX1UxMUpUKCk7CiAgICAgICAgbmV3Qy5zZXROYW1lKCJuZXdDIik7CiAgICAg\nICAgdS5zZXRFbnRpdHlDKG5ld0MpOwogICAgICAgIGVtLnBlcnNpc3QobmV3\nQyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAg\nICAgICAKICAgICAgICAvLyB1cGRhdGUgYnkgc2V0dGluZyB0byBudWxsCiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIHUu\nc2V0RW50aXR5QyhudWxsKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgCiAgICAg\nICAgLy9xdWVyeQogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgi\nU0VMRUNUIHUgRlJPTSBVbmlfMVRvMV9KVCB1IHdoZXJlIHUubmFtZSA9ICd1\nbmkxbWp0X25ldyciKTsKICAgICAgICBVbmlfMVRvMV9KVCB1MSA9IChVbmlf\nMVRvMV9KVClxLmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2VydEVx\ndWFscyh1LCB1MSk7CiAgICAgICAgZW0uY2xlYXIoKTsKCiAgICAgICAgLy9m\naW5kCiAgICAgICAgbG9uZyBpZCA9IHUxLmdldElkKCk7CiAgICAgICAgVW5p\nXzFUbzFfSlQgZmluZFUxID0gZW0uZmluZChVbmlfMVRvMV9KVC5jbGFzcywg\naWQpOwogICAgICAgIGFzc2VydEVxdWFscyh1LCBmaW5kVTEpOwogICAgICAg\nIAogICAgICAgIC8vcmVtb3ZlCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIGVtLnJlbW92ZShmaW5kVTEpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgY3J1ZEJpMTFKVChFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAg\nICAgQmlfMVRvMV9KVCBiID0gbmV3IEJpXzFUbzFfSlQoKTsKICAgICAgICBi\nLnNldE5hbWUoImJpMTFmayIpOwogICAgICAgIAogICAgICAgIEVudGl0eUNf\nQjExSlQgYyA9IG5ldyBFbnRpdHlDX0IxMUpUKCk7CiAgICAgICAgYy5zZXRO\nYW1lKCJjIik7CiAgICAgICAgYi5zZXRFbnRpdHlDKGMpOwogICAgICAgIC8v\nYy5zZXRCaTExanQoYik7CgogICAgICAgIGVtLnBlcnNpc3QoYik7CiAgICAg\nICAgZW0ucGVyc2lzdChjKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKCiAgICAgICAgLy8gdXBkYXRlIGJ5IHJlbW92aW5nIGEgYyAKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgYi5zZXRF\nbnRpdHlDKG51bGwpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CgogICAgICAgIC8vdXBkYXRlCiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGIuc2V0TmFtZSgibmV3TmFtZSIp\nOwogICAgICAgIEVudGl0eUNfQjExSlQgYzEgPSBuZXcgRW50aXR5Q19CMTFK\nVCgpOwogICAgICAgIGMxLnNldE5hbWUoImMxIik7CiAgICAgICAgYi5zZXRF\nbnRpdHlDKGMxKTsKICAgICAgICAvL2MxLnNldEJpMTFqdChiKTsKICAgICAg\nICBlbS5wZXJzaXN0KGMxKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIC8vcXVlcnkKICAgICAgICBR\ndWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoIlNFTEVDVCB1IEZST00gQmlfMVRv\nMV9KVCB1Iik7CiAgICAgICAgQmlfMVRvMV9KVCBiMSA9IChCaV8xVG8xX0pU\nKXEuZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGIs\nIGIxKTsKICAgICAgICBlbS5jbGVhcigpOwoKICAgICAgICAvLyBxdWVyeQog\nICAgICAgIHEgPSBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIGMgRlJPTSBFbnRp\ndHlDX0IxMUpUIGMiKTsKICAgICAgICBMaXN0PEVudGl0eUNfQjExSlQ+IGNz\nMSA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscygy\nLCBjczEuc2l6ZSgpKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIAog\nICAgICAgIC8vZmluZAogICAgICAgIGxvbmcgaWQgPSBiMS5nZXRJZCgpOwog\nICAgICAgIEJpXzFUbzFfSlQgYjIgPSBlbS5maW5kKEJpXzFUbzFfSlQuY2xh\nc3MsIGlkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoYiwgYjIpOwogICAgICAg\nIAogICAgICAgIC8vcmVtb3ZlCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIGVtLnJlbW92ZShiMik7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgIH0KCiAgICBwcml2YXRl\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSBjcmVhdGVFTUYyXzAo\nTGlzdDxDbGFzczw/Pj4gdHlwZXMpIHsKICAgICAgICBNYXA8T2JqZWN0LE9i\namVjdD4gbWFwID0gbmV3IEhhc2hNYXA8T2JqZWN0LE9iamVjdD4oKTsKICAg\nICAgICBtYXAucHV0KCJvcGVuanBhLmpkYmMuSkRCQ0xpc3RlbmVycyIsIAog\nICAgICAgICAgICAgICAgbmV3IEpEQkNMaXN0ZW5lcltdIHsgCiAgICAgICAg\nICAgICAgICAgICAgdGhpcy5uZXcgTGlzdGVuZXIoKSAKICAgICAgICAgICAg\nICAgIH0pOwogICAgICAgIG1hcC5wdXQoIm9wZW5qcGEuamRiYy5TeW5jaHJv\nbml6ZU1hcHBpbmdzIiwgCiAgICAgICAgICAgICJidWlsZFNjaGVtYShGb3Jl\naWduS2V5cz10cnVlLFNjaGVtYUFjdGlvbj0nZHJvcCxhZGQnKSIpOwoKICAg\nICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOwog\nICAgICAgIGZvciAoQ2xhc3M8Pz4gYyA6IHR5cGVzKSB7CiAgICAgICAgICAg\nIGlmIChidWYubGVuZ3RoKCkgPiAwKSB7CiAgICAgICAgICAgICAgICBidWYu\nYXBwZW5kKCI7Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnVmLmFw\ncGVuZChjLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIFN0cmluZyBv\nbGRWYWx1ZSA9CiAgICAgICAgICAgIG1hcC5jb250YWluc0tleSgib3Blbmpw\nYS5NZXRhRGF0YUZhY3RvcnkiKSA/ICIsIiArIG1hcC5nZXQoIm9wZW5qcGEu\nTWV0YURhdGFGYWN0b3J5IikudG9TdHJpbmcoKSA6ICIiOwogICAgICAgIG1h\ncC5wdXQoIm9wZW5qcGEuTWV0YURhdGFGYWN0b3J5IiwgImpwYShUeXBlcz0i\nICsgYnVmLnRvU3RyaW5nKCkgKyBvbGRWYWx1ZSArICIpIik7CiAgICAgICAg\ncmV0dXJuIChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpT3BlbkpQ\nQVBlcnNpc3RlbmNlLgogICAgICAgICAgICAgICAgY3JlYXRlRW50aXR5TWFu\nYWdlckZhY3RvcnkoInBlcnNpc3RlbmNlXzJfMCIsCiAgICAgICAgICAgICAg\nICAgICAgIm9yZy9hcGFjaGUvb3BlbmpwYS9wZXJzaXN0ZW5jZS9jb21wYXQv\nIiArCiAgICAgICAgICAgICAgICAgICAgInBlcnNpc3RlbmNlXzJfMC54bWwi\nLCBtYXApOyAgICAgICAgCiAgICB9CiAgICAKICAgIHZvaWQgYXNzZXJ0U1FM\nRnJhZ25tZW50cyhMaXN0PFN0cmluZz4gbGlzdCwgU3RyaW5nLi4uIGtleXMp\nIHsKICAgICAgICBpZiAoU1FMU25pZmZlci5tYXRjaGVzKGxpc3QsIGtleXMp\nKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZmFpbCgiTm9uZSBvZiB0\naGUgZm9sbG93aW5nICIgKyBzcWwuc2l6ZSgpICsgIiBTUUwgXHJcbiIgKyAK\nICAgICAgICAgICAgICAgIHRvU3RyaW5nKHNxbCkgKyAiXHJcbiBjb250YWlu\ncyBhbGwga2V5cyBcclxuIgogICAgICAgICAgICAgICAgKyB0b1N0cmluZyhB\ncnJheXMuYXNMaXN0KGtleXMpKSk7CiAgICB9CgogICAgcHVibGljIFN0cmlu\nZyB0b1N0cmluZyhMaXN0PFN0cmluZz4gbGlzdCkgewogICAgICAgIFN0cmlu\nZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgZm9y\nIChTdHJpbmcgcyA6IGxpc3QpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQocyku\nYXBwZW5kKCJcclxuIik7CiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygp\nOwogICAgfQoKICAgIHB1YmxpYyBjbGFzcyBMaXN0ZW5lciBleHRlbmRzIEFi\nc3RyYWN0SkRCQ0xpc3RlbmVyIHsKICAgICAgICBAT3ZlcnJpZGUKICAgICAg\nICBwdWJsaWMgdm9pZCBiZWZvcmVFeGVjdXRlU3RhdGVtZW50KEpEQkNFdmVu\ndCBldmVudCkgewogICAgICAgICAgICBpZiAoZXZlbnQuZ2V0U1FMKCkgIT0g\nbnVsbCAmJiBzcWwgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgc3FsLmFk\nZChldmVudC5nZXRTUUwoKSk7CiAgICAgICAgICAgICAgICBzcWxDb3VudCsr\nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

