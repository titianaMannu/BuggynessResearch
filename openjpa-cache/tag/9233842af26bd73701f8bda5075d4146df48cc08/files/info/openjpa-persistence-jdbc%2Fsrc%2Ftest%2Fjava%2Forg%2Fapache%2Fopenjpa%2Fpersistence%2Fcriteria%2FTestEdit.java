{"sha":"baa07358c67316b0720437ccbe15002b25335175","node_id":"MDQ6QmxvYjIwNjM2NDpiYWEwNzM1OGM2NzMxNmIwNzIwNDM3Y2NiZTE1MDAyYjI1MzM1MTc1","size":11248,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/baa07358c67316b0720437ccbe15002b25335175","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwu\nTGlzdDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLlR1cGxlOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuVHlwZWRRdWVyeTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNy\naXRlcmlhLkNyaXRlcmlhUXVlcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5jcml0ZXJpYS5FeHByZXNzaW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuT3JkZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5j\ncml0ZXJpYS5QcmVkaWNhdGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5j\ncml0ZXJpYS5Sb290OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuY3JpdGVy\naWEuU2VsZWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CgovKioKICogVGVzdCBlZGl0\naW5nIG9mIENyaXRlcmlhIFF1ZXJ5LgogKiAKICogVGhlIHRlc3RzIGNvbnN0\ncnVjdCBhIENyaXRlcmlhUXVlcnkgYW5kIHRha2VzIGEgcGFpciBvZiBKUFFM\nIFN0cmluZy4KICogVGhlIENyaXRlcmlhIFF1ZXJ5IGlzIGV4ZWN1dGVkIGFu\nZCBpdHMgdGFyZ2V0IFNRTCBpcyBjb21wYXJlZCB3aXRoIHRoYXQgb2YgdGhl\nIGZpcnN0IG9mIHRoZSBKUFFMIFN0cmluZyBwYWlyLgogKiBUaGVuIHRoZSBz\nYW1lIENyaXRlcmlhIFF1ZXJ5IGlzIGVkaXRlZCBhbmQgdGhlIHRhcmdldCBT\nUUwgb2YgdGhlIGVkaXRlZCB2ZXJzaW9uIGlzIGNvbXBhcmVkIHdpdGggdGhh\ndCBvZiB0aGUgc2Vjb25kIAogKiBvZiB0aGUgSlBRTCBTdHJpbmcgcGFpci4K\nICogCiAqIEFsc28gdGVzdCBib3VuZGFyeSBjYXNlcyB3aGVyZSBub3RoaW5n\nIGlzIHNlbGVjdGVkIGV0Yy4KICogCiAqIEBhdXRob3IgUGluYWtpIFBvZGRh\ncgogKgogKi8KcHVibGljIGNsYXNzIFRlc3RFZGl0IGV4dGVuZHMgQ3JpdGVy\naWFUZXN0IHsKICAgIAogICAgcHVibGljIHZvaWQgdGVzdFdoZXJlQ29uZGl0\naW9uRWRpdGVkVG9BZGRPcigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJz\nZWxlY3QgcCBmcm9tIFBlcnNvbiBwIHdoZXJlIHAubmFtZT0nWFlaJyI7CiAg\nICAgICAgU3RyaW5nIGVkaXRlZGpwcWwgPSAic2VsZWN0IHAgZnJvbSBQZXJz\nb24gcCB3aGVyZSBwLm5hbWU9J1hZWicgb3IgcC5uYW1lPSdBQkMnIjsKICAg\nICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFBlcnNvbj4gYyA9IGNiLmNy\nZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAgICAgICAgUm9vdDxQZXJzb24+\nIHAgPSBjLmZyb20oUGVyc29uLmNsYXNzKTsKICAgICAgICBjLndoZXJlKGNi\nLmVxdWFsKHAuZ2V0KFBlcnNvbl8ubmFtZSksICJYWVoiKSk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICAgICAg\nCiAgICAgICAgUHJlZGljYXRlIHdoZXJlID0gYy5nZXRSZXN0cmljdGlvbigp\nOwogICAgICAgIGMud2hlcmUoY2Iub3Iod2hlcmUsIGNiLmVxdWFsKHAuZ2V0\nKFBlcnNvbl8ubmFtZSksICJBQkMiKSkpOwogICAgICAgIAogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKGMsIGVkaXRlZGpwcWwpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0V2hlcmVDb25kaXRpb25FZGl0ZWRUb0FkZEFu\nZCgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgcCBmcm9tIFBl\ncnNvbiBwIHdoZXJlIHAubmFtZT0nWFlaJyI7CiAgICAgICAgU3RyaW5nIGVk\naXRlZGpwcWwgPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLm5h\nbWU9J1hZWicgYW5kIHAubmFtZT0nQUJDJyI7CiAgICAgICAgCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxQZXJzb24+IGMgPSBjYi5jcmVhdGVRdWVyeShQZXJz\nb24uY2xhc3MpOwogICAgICAgIFJvb3Q8UGVyc29uPiBwID0gYy5mcm9tKFBl\ncnNvbi5jbGFzcyk7CiAgICAgICAgYy53aGVyZShjYi5lcXVhbChwLmdldChQ\nZXJzb25fLm5hbWUpLCAiWFlaIikpOwogICAgICAgIAogICAgICAgIGFzc2Vy\ndEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgICAgIAogICAgICAgIFByZWRp\nY2F0ZSB3aGVyZSA9IGMuZ2V0UmVzdHJpY3Rpb24oKTsKICAgICAgICBjLndo\nZXJlKGNiLmFuZCh3aGVyZSwgY2IuZXF1YWwocC5nZXQoUGVyc29uXy5uYW1l\nKSwgIkFCQyIpKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVu\nY2UoYywgZWRpdGVkanBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RXaGVyZUNvbmRpdGlvbkVkaXRlZFRvUmVtb3ZlQW5kKCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAgd2hl\ncmUgcC5uYW1lPSdYWVonIGFuZCBwLm5hbWU9J0FCQyciOwogICAgICAgIFN0\ncmluZyBlZGl0ZWRqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAgd2hl\ncmUgcC5uYW1lPSdYWVonIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PFBlcnNvbj4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7\nCiAgICAgICAgUm9vdDxQZXJzb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNz\nKTsKICAgICAgICBQcmVkaWNhdGUgcDEgPSBjYi5lcXVhbChwLmdldChQZXJz\nb25fLm5hbWUpLCAiWFlaIik7CiAgICAgICAgUHJlZGljYXRlIHAyID0gY2Iu\nZXF1YWwocC5nZXQoUGVyc29uXy5uYW1lKSwgIkFCQyIpOwogICAgICAgIGMu\nd2hlcmUocDEscDIpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKGMsIGpwcWwpOwogICAgICAgIAogICAgICAgIFByZWRpY2F0ZSB3aGVy\nZSA9IGMuZ2V0UmVzdHJpY3Rpb24oKTsKICAgICAgICBMaXN0PEV4cHJlc3Np\nb248Qm9vbGVhbj4+IGV4cHJzID0gd2hlcmUuZ2V0RXhwcmVzc2lvbnMoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMiwgZXhwcnMuc2l6ZSgpKTsKICAgICAg\nICBhc3NlcnRUcnVlKGV4cHJzLmNvbnRhaW5zKHAxKSk7CiAgICAgICAgYXNz\nZXJ0VHJ1ZShleHBycy5jb250YWlucyhwMikpOwogICAgICAgIGV4cHJzLnJl\nbW92ZShwMSk7CiAgICAgICAgLy8gZWRpdGluZyBmcm9tIHRoZSBsaXN0IGRv\nZXMgbm90IGltcGFjdCB0aGUgcXVlcnkgCiAgICAgICAgYXNzZXJ0RXF1aXZh\nbGVuY2UoYywganBxbCk7CiAgICAgICAgCiAgICAgICAgYy53aGVyZShwMSk7\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywgZWRpdGVkanBxbCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVkaXRPcmRlckJ5KCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAgT1JE\nRVIgQlkgcC5uYW1lIjsKICAgICAgICBTdHJpbmcgZWRpdGVkanBxbCA9ICJz\nZWxlY3QgcCBmcm9tIFBlcnNvbiBwIE9SREVSIEJZIHAubmFtZSwgcC5pZCBE\nRVNDIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFBlcnNvbj4g\nYyA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAgICAgICAgUm9v\ndDxQZXJzb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNzKTsKICAgICAgICBj\nLm9yZGVyQnkoY2IuYXNjKHAuZ2V0KFBlcnNvbl8ubmFtZSkpKTsKICAgICAg\nICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAgICAg\nICAKICAgICAgICBMaXN0PE9yZGVyPiBvcmRlcnMgPSBjLmdldE9yZGVyTGlz\ndCgpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBvcmRlcnMuc2l6ZSgpKTsK\nICAgICAgICBvcmRlcnMuYWRkKGNiLmRlc2MocC5nZXQoUGVyc29uXy5pZCkp\nKTsKICAgICAgICAvLyBlZGl0aW5nIHRoZSBsaXN0IGRvZXMgbm90IGltcGFj\ndCBxdWVyeQogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwog\nICAgICAgIAogICAgICAgIC8vIGFkZGluZyB0aGUgbW9kaWZpZWQgbGlzdCBi\nYWNrIGRvZXMgCiAgICAgICAgYy5vcmRlckJ5KG9yZGVycy50b0FycmF5KG5l\ndyBPcmRlcltvcmRlcnMuc2l6ZSgpXSkpOwogICAgICAgIAogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKGMsIGVkaXRlZGpwcWwpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RWRpdGVkVG9BZGRNdWx0aXNlbGVjdGlvblRl\ncm0oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IHAgZnJvbSBQ\nZXJzb24gcCI7CiAgICAgICAgU3RyaW5nIGVkaXRlZGpwcWwgPSAic2VsZWN0\nIHAscC5uYW1lIGZyb20gUGVyc29uIHAiOwogICAgICAgIAogICAgICAgIENy\naXRlcmlhUXVlcnk8VHVwbGU+IGMgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7\nCiAgICAgICAgUm9vdDxQZXJzb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNz\nKTsKICAgICAgICBjLm11bHRpc2VsZWN0KHApOwogICAgICAgIAogICAgICAg\nIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgICAgIAogICAgICAg\nIExpc3Q8U2VsZWN0aW9uPD8+PiB0ZXJtcyA9IGMuZ2V0U2VsZWN0aW9uKCku\nZ2V0Q29tcG91bmRTZWxlY3Rpb25JdGVtcygpOwogICAgICAgIHRlcm1zLmFk\nZChwLmdldChQZXJzb25fLm5hbWUpKTsKICAgICAgICAvLyBlZGl0aW5nIHRo\nZSBsaXN0IGRvZXMgbm90IGltcGFjdCBxdWVyeQogICAgICAgIGFzc2VydEVx\ndWl2YWxlbmNlKGMsIGpwcWwpOwogICAgICAgIAogICAgICAgIGMubXVsdGlz\nZWxlY3QocCwgcC5nZXQoUGVyc29uXy5uYW1lKSk7CiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UoYywgZWRpdGVkanBxbCk7CiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIHRlc3RTaW5nbGVTZWxlY3Rpb25IYXNOb0NvbXBvdW5kSXRl\nbXMoKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+IGMgPSBjYi5j\ncmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIFJvb3Q8UGVyc29u\nPiBwID0gYy5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgYy5zZWxlY3Qo\ncCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgU2VsZWN0aW9uPFBlcnNv\nbj4gdGVybSA9IGMuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICAgIHRlcm0u\nZ2V0Q29tcG91bmRTZWxlY3Rpb25JdGVtcygpOwogICAgICAgICAgICBmYWls\nKCJFeHBlY3RlZCB0byBmYWlsIGJlY2F1c2UgcHJpbWFyeSBzZWxlY3Rpb24g\naGFzIG5vIGNvbXBvdW5kIHRlcm1zIik7CiAgICAgICAgfSBjYXRjaCAoSWxs\nZWdhbFN0YXRlRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gZ29vZAog\nICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDYW5kaWRhdGUg\nY2xhc3MgaXMgaW1wbGljaXRseSBzZWxlY3RlZCBidXQgYSBudWxsIGlzIHJl\ndHVybmVkIGJ5IGdldFNlbGVjdGlvbigpCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHRlc3RDYW5kaWRhdGVDbGFzc0lzSW1wbGljaXRseVNlbGVjdGVkRm9y\nRW50aXR5UXVlcnkoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0\nIHAgZnJvbSBQZXJzb24gcCI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJz\nb24+IGMgPSBjYi5jcmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAg\nIFJvb3Q8UGVyc29uPiBwID0gYy5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAg\nICAgU2VsZWN0aW9uPFBlcnNvbj4gdGVybSA9IGMuZ2V0U2VsZWN0aW9uKCk7\nCiAgICAgICAgYXNzZXJ0TnVsbCh0ZXJtKTsKICAgICAgICAKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgdGVzdENhbmRpZGF0ZUNsYXNzSXNOb3RJbXBsaWNpdGx5U2Vs\nZWN0ZWRGb3JOb25FbnRpdHlRdWVyeSgpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJzZWxlY3QgcCBmcm9tIFBlcnNvbiBwIjsKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PFR1cGxlPiBjID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAg\nICAgIFJvb3Q8UGVyc29uPiBwID0gYy5mcm9tKFBlcnNvbi5jbGFzcyk7CiAg\nICAgICAgU2VsZWN0aW9uPFR1cGxlPiB0ZXJtID0gYy5nZXRTZWxlY3Rpb24o\nKTsKICAgICAgICBhc3NlcnROdWxsKHRlcm0pOwogICAgICAgIAogICAgICAg\nIGFzc2VydEZhaWxzKCJFeHBlY3RlZCB0byBmYWlsIHdpdGhvdXQgYSBwcm9q\nZWN0aW9uIHRlcm0iLCBjKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFJvb3RJc05vdEltcGxpY2l0bHlEZWZpbmVkKCkgewogICAgICAgIENy\naXRlcmlhUXVlcnk8UGVyc29uPiBjID0gY2IuY3JlYXRlUXVlcnkoUGVyc29u\nLmNsYXNzKTsKICAgICAgICBTZWxlY3Rpb248UGVyc29uPiB0ZXJtID0gYy5n\nZXRTZWxlY3Rpb24oKTsKICAgICAgICBhc3NlcnROdWxsKHRlcm0pOwogICAg\nICAgIAogICAgICAgIGFzc2VydEZhaWxzKCJFeHBlY3RlZCB0byBmYWlsIHdp\ndGhvdXQgYSBkZWZpbmVkIHJvb3QiLCBjKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgdGVzdEVkaXRQYXJhbWV0ZXJpemVkUHJlZGljYXRlKCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAg\nd2hlcmUgcC5uYW1lPTpwMSI7CiAgICAgICAgU3RyaW5nIGVkaXRlZGpwcWwg\nPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLm5hbWU9OnAxIGFu\nZCBwLm5hbWU9OnAyIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPFBlcnNvbj4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAg\nICAgICAgUm9vdDxQZXJzb24+IHAgPSBjLmZyb20oUGVyc29uLmNsYXNzKTsK\nICAgICAgICBjLndoZXJlKGNiLmVxdWFsKHAuZ2V0KFBlcnNvbl8ubmFtZSks\nIGNiLnBhcmFtZXRlcihTdHJpbmcuY2xhc3MsICJwMSIpKSk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCwgbmV3IFN0cmlu\nZ1tdeyJwMSJ9LCBuZXcgU3RyaW5nW117IlhZWiJ9KTsKICAgICAgICAKICAg\nICAgICBQcmVkaWNhdGUgd2hlcmUgPSBjLmdldFJlc3RyaWN0aW9uKCk7CiAg\nICAgICAgYy53aGVyZShjYi5hbmQod2hlcmUsIGNiLmVxdWFsKHAuZ2V0KFBl\ncnNvbl8ubmFtZSksIGNiLnBhcmFtZXRlcihTdHJpbmcuY2xhc3MsICJwMiIp\nKSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGVk\naXRlZGpwcWwsIG5ldyBTdHJpbmdbXXsicDEiLCAicDIifSwgbmV3IFN0cmlu\nZ1tdeyJNTk8iLCAiQUJDIn0pOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RWRpdFBhcmFtZXRlcml6ZWRQcmVkaWNhdGVSZXBsYWNlZCgpIHsK\nICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgcCBmcm9tIFBlcnNvbiBw\nIHdoZXJlIHAubmFtZT06cDEgYW5kIHAubmFtZT06cDIiOwogICAgICAgIFN0\ncmluZyBlZGl0ZWRqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAgd2hl\ncmUgcC5uYW1lPTpwMyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVy\neTxQZXJzb24+IGMgPSBjYi5jcmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwog\nICAgICAgIFJvb3Q8UGVyc29uPiBwID0gYy5mcm9tKFBlcnNvbi5jbGFzcyk7\nCiAgICAgICAgYy53aGVyZShjYi5hbmQoY2IuZXF1YWwocC5nZXQoUGVyc29u\nXy5uYW1lKSwgY2IucGFyYW1ldGVyKFN0cmluZy5jbGFzcywgInAxIikpLAog\nICAgICAgICAgICAgICAgICAgICAgIGNiLmVxdWFsKHAuZ2V0KFBlcnNvbl8u\nbmFtZSksIGNiLnBhcmFtZXRlcihTdHJpbmcuY2xhc3MsICJwMiIpKSkpOwog\nICAgICAgIGFzc2VydEVxdWFscygyLGMuZ2V0UGFyYW1ldGVycygpLnNpemUo\nKSk7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCwgbmV3IFN0\ncmluZ1tdeyJwMSIsICJwMiJ9LCBuZXcgU3RyaW5nW117IlhZWiIsICJBQkMi\nfSk7CiAgICAgICAgCiAgICAgICAgYy53aGVyZShjYi5lcXVhbChwLmdldChQ\nZXJzb25fLm5hbWUpLCBjYi5wYXJhbWV0ZXIoU3RyaW5nLmNsYXNzLCAicDMi\nKSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGVk\naXRlZGpwcWwsIG5ldyBTdHJpbmdbXXsicDMifSwgbmV3IFN0cmluZ1tdeyJN\nTk8ifSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RFZGl0UGFy\nYW1ldGVyaXplZFByZWRpY2F0ZVJlbW92ZWQoKSB7CiAgICAgICAgU3RyaW5n\nIGpwcWwgPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLm5hbWU9\nOnAxIGFuZCBwLm5hbWU9OnAyIjsKICAgICAgICBTdHJpbmcgZWRpdGVkanBx\nbCA9ICJzZWxlY3QgcCBmcm9tIFBlcnNvbiBwIHdoZXJlIHAubmFtZT06cDEi\nOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8UGVyc29uPiBjID0g\nY2IuY3JlYXRlUXVlcnkoUGVyc29uLmNsYXNzKTsKICAgICAgICBSb290PFBl\ncnNvbj4gcCA9IGMuZnJvbShQZXJzb24uY2xhc3MpOwogICAgICAgIGMud2hl\ncmUoY2IuYW5kKGNiLmVxdWFsKHAuZ2V0KFBlcnNvbl8ubmFtZSksIGNiLnBh\ncmFtZXRlcihTdHJpbmcuY2xhc3MsICJwMSIpKSwKICAgICAgICAgICAgICAg\nICAgICAgICBjYi5lcXVhbChwLmdldChQZXJzb25fLm5hbWUpLCBjYi5wYXJh\nbWV0ZXIoU3RyaW5nLmNsYXNzLCAicDIiKSkpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMixjLmdldFBhcmFtZXRlcnMoKS5zaXplKCkpOwogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwsIG5ldyBTdHJpbmdbXXsicDEiLCAi\ncDIifSwgbmV3IFN0cmluZ1tdeyJYWVoiLCAiQUJDIn0pOwogICAgICAgIAog\nICAgICAgIGMud2hlcmUoY2IuZXF1YWwocC5nZXQoUGVyc29uXy5uYW1lKSwg\nY2IucGFyYW1ldGVyKFN0cmluZy5jbGFzcywgInAxIikpKTsKICAgICAgICAK\nICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBlZGl0ZWRqcHFsLCBuZXcg\nU3RyaW5nW117InAxIn0sIG5ldyBTdHJpbmdbXXsiTU5PIn0pOwogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2VyYWNoV2l0aGluUmVzdWx0KCkg\newogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBlbS5jcmVhdGVRdWVyeSgiREVMRVRFIEZST00gUGVyc29uIHAiKS5leGVj\ndXRlVXBkYXRlKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgUGVyc29uIHAxID0gbmV3IFBlcnNvbigpOyBwMS5zZXROYW1lKCJQ\naW5ha2kiKTsKICAgICAgICBQZXJzb24gcDIgPSBuZXcgUGVyc29uKCk7IHAy\nLnNldE5hbWUoIlBhY2lubyIpOwogICAgICAgIFBlcnNvbiBwMyA9IG5ldyBQ\nZXJzb24oKTsgcDMuc2V0TmFtZSgiVG9tIik7CiAgICAgICAgUGVyc29uIHA0\nID0gbmV3IFBlcnNvbigpOyBwNC5zZXROYW1lKCJEaWNrIik7CiAgICAgICAg\nZW0ucGVyc2lzdChwMSk7IGVtLnBlcnNpc3QocDIpO2VtLnBlcnNpc3QocDMp\nOyBlbS5wZXJzaXN0KHA0KTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8UGVy\nc29uPiBjID0gY2IuY3JlYXRlUXVlcnkoUGVyc29uLmNsYXNzKTsKICAgICAg\nICBSb290PFBlcnNvbj4gcCA9IGMuZnJvbShQZXJzb24uY2xhc3MpOwogICAg\nICAgIGMuc2VsZWN0KHApOwogICAgICAgIFByZWRpY2F0ZSBsaWtlID0gY2Iu\nbGlrZShwLmdldChQZXJzb25fLm5hbWUpLCBjYi5wYXJhbWV0ZXIoU3RyaW5n\nLmNsYXNzLCAicGF0dGVybiIpKTsKICAgICAgICBjLndoZXJlKGxpa2UpOwog\nICAgICAgIFR5cGVkUXVlcnk8UGVyc29uPiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5\nKGMpLnNldFBhcmFtZXRlcigicGF0dGVybiIsICJQJSIpOwogICAgICAgIExp\nc3Q8UGVyc29uPiByMSA9IHExLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgcjEuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBQ\ncmVkaWNhdGUgZXhhY3QgPSBjYi5lcXVhbChwLmdldChQZXJzb25fLm5hbWUp\nLCBjYi5wYXJhbWV0ZXIoU3RyaW5nLmNsYXNzLCAiZXhhY3QiKSk7CiAgICAg\nICAgYy53aGVyZShsaWtlLCBleGFjdCk7CiAgICAgICAgVHlwZWRRdWVyeTxQ\nZXJzb24+IHEyID0gZW0uY3JlYXRlUXVlcnkoYykuc2V0UGFyYW1ldGVyKCJw\nYXR0ZXJuIiwgIlAlIikuc2V0UGFyYW1ldGVyKCJleGFjdCIsIlBpbmFraSIp\nOwogICAgICAgIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHEyKS5zZXRDYW5k\naWRhdGVDb2xsZWN0aW9uKHIxKTsKICAgICAgICBhdWRpdG9yLmNsZWFyKCk7\nCiAgICAgICAgTGlzdDxQZXJzb24+IHIyID0gcTIuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgIGFzc2VydFRydWUoYXVkaXRvci5nZXRTUUxzKCkuaXNFbXB0\neSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcjIuc2l6ZSgpKTsKICAg\nIH0KICAgIAogICAgdm9pZCBhc3NlcnRGYWlscyhTdHJpbmcgbWVzc2FnZSwg\nQ3JpdGVyaWFRdWVyeTw/PiBjKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgZW0uY3JlYXRlUXVlcnkoYyk7CiAgICAgICAgICAgIGZhaWwobWVzc2Fn\nZSk7IAogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIC8vIGdvb2QKICAgICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

