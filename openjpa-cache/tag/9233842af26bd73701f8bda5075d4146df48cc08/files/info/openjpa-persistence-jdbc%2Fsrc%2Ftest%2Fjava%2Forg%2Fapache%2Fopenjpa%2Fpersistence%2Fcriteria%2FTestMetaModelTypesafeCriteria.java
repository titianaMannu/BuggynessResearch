{"sha":"67f4262c83455757caa0330572e177744bec34b9","node_id":"MDQ6QmxvYjIwNjM2NDo2N2Y0MjYyYzgzNDU1NzU3Y2FhMDMzMDU3MmUxNzc3NDRiZWMzNGI5","size":26307,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/67f4262c83455757caa0330572e177744bec34b9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZh\nLnV0aWwuTGlzdDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5QYXJhbWV0\nZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5UdXBsZTsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLmNyaXRlcmlhLkNyaXRlcmlhUXVlcnk7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5FeHByZXNzaW9uOwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuY3JpdGVyaWEuSm9pbjsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLmNyaXRlcmlhLkpvaW5UeXBlOwppbXBvcnQgamF2\nYXgucGVyc2lzdGVuY2UuY3JpdGVyaWEuTGlzdEpvaW47CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5NYXBKb2luOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuY3JpdGVyaWEuUHJlZGljYXRlOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuY3JpdGVyaWEuUm9vdDsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLmNyaXRlcmlhLlNldEpvaW47CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5jcml0ZXJpYS5TdWJxdWVyeTsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLm1ldGFtb2RlbC5FbWJlZGRhYmxlVHlwZTsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLm1ldGFtb2RlbC5FbnRpdHlUeXBlOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UubWV0YW1vZGVsLk1ldGFtb2RlbDsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5TZXRBdHRyaWJ1dGU7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuQWxsb3dGYWls\ndXJlOwoKcHVibGljIGNsYXNzIFRlc3RNZXRhTW9kZWxUeXBlc2FmZUNyaXRl\ncmlhIGV4dGVuZHMgQ3JpdGVyaWFUZXN0IHsKICAgIHByb3RlY3RlZCBFbnRp\ndHlUeXBlPEFjY291bnQ+IGFjY291bnRfID0gbnVsbDsKICAgIHByb3RlY3Rl\nZCBFbWJlZGRhYmxlVHlwZTxBZGRyZXNzPiBhZGRyZXNzXyA9IG51bGw7CiAg\nICBwcm90ZWN0ZWQgRW1iZWRkYWJsZVR5cGU8Q29udGFjdD4gY29udGFjdF8g\nPSBudWxsOwogICAgcHJvdGVjdGVkIEVudGl0eVR5cGU8Q291cnNlPiBjb3Vy\nc2VfID0gbnVsbDsKICAgIHByb3RlY3RlZCBFbnRpdHlUeXBlPENyZWRpdENh\ncmQ+IGNyZWRpdENhcmRfID0gbnVsbDsKICAgIHByb3RlY3RlZCBFbnRpdHlU\neXBlPEN1c3RvbWVyPiBjdXN0b21lcl8gPSBudWxsOwogICAgcHJvdGVjdGVk\nIEVudGl0eVR5cGU8RGVwYXJ0bWVudD4gZGVwYXJ0bWVudF8gPSBudWxsOwog\nICAgcHJvdGVjdGVkIEVudGl0eVR5cGU8RW1wbG95ZWU+IGVtcGxveWVlXyA9\nIG51bGw7CiAgICBwcm90ZWN0ZWQgRW50aXR5VHlwZTxFeGVtcHQ+IGV4ZW1w\ndF8gPSBudWxsOwogICAgcHJvdGVjdGVkIEVudGl0eVR5cGU8SXRlbT4gaXRl\nbV8gPSBudWxsOwogICAgcHJvdGVjdGVkIEVudGl0eVR5cGU8TGluZUl0ZW0+\nIGxpbmVJdGVtXyA9IG51bGw7CiAgICBwcm90ZWN0ZWQgRW50aXR5VHlwZTxN\nYW5hZ2VyPiBtYW5hZ2VyXyA9IG51bGw7CiAgICBwcm90ZWN0ZWQgRW50aXR5\nVHlwZTxNb3ZpZT4gbW92aWVfID0gbnVsbDsKICAgIHByb3RlY3RlZCBFbnRp\ndHlUeXBlPE9yZGVyPiBvcmRlcl8gPSBudWxsOwogICAgcHJvdGVjdGVkIEVu\ndGl0eVR5cGU8UGVyc29uPiBwZXJzb25fID0gbnVsbDsKICAgIHByb3RlY3Rl\nZCBFbnRpdHlUeXBlPFBob25lPiBwaG9uZV8gPSBudWxsOwogICAgcHJvdGVj\ndGVkIEVudGl0eVR5cGU8UGhvdG8+IHBob3RvXyA9IG51bGw7CiAgICBwcm90\nZWN0ZWQgRW50aXR5VHlwZTxQcm9kdWN0PiBwcm9kdWN0XyA9IG51bGw7CiAg\nICBwcm90ZWN0ZWQgRW50aXR5VHlwZTxTZW1lc3Rlcj4gc2VtZXN0ZXJfID0g\nbnVsbDsKICAgIHByb3RlY3RlZCBFbnRpdHlUeXBlPFN0dWRlbnQ+IHN0dWRl\nbnRfID0gbnVsbDsKICAgIHByb3RlY3RlZCBFbnRpdHlUeXBlPFRyYW5zYWN0\naW9uSGlzdG9yeT4gdHJhbnNhY3Rpb25IaXN0b3J5XyA9IG51bGw7CiAgICBw\ncm90ZWN0ZWQgRW50aXR5VHlwZTxWaWRlb1N0b3JlPiB2aWRlb1N0b3JlXyA9\nIG51bGw7CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgc3Vw\nZXIuc2V0VXAoKTsKCiAgICAgICAgTWV0YW1vZGVsIG1tID0gZW0uZ2V0TWV0\nYW1vZGVsKCk7CiAgICAgICAgYWNjb3VudF8gPSBtbS5lbnRpdHkoQWNjb3Vu\ndC5jbGFzcyk7CiAgICAgICAgYWRkcmVzc18gPSBtbS5lbWJlZGRhYmxlKEFk\nZHJlc3MuY2xhc3MpOwogICAgICAgIGFzc2VydE5vdE51bGwoYWRkcmVzc18p\nOwogICAgICAgIGNvbnRhY3RfID0gbW0uZW1iZWRkYWJsZShDb250YWN0LmNs\nYXNzKTsKICAgICAgICBjb3Vyc2VfID0gbW0uZW50aXR5KENvdXJzZS5jbGFz\ncyk7CiAgICAgICAgY3JlZGl0Q2FyZF8gPSBtbS5lbnRpdHkoQ3JlZGl0Q2Fy\nZC5jbGFzcyk7CiAgICAgICAgY3VzdG9tZXJfID0gbW0uZW50aXR5KEN1c3Rv\nbWVyLmNsYXNzKTsKICAgICAgICBkZXBhcnRtZW50XyA9IG1tLmVudGl0eShE\nZXBhcnRtZW50LmNsYXNzKTsKICAgICAgICBlbXBsb3llZV8gPSBtbS5lbnRp\ndHkoRW1wbG95ZWUuY2xhc3MpOwogICAgICAgIGV4ZW1wdF8gPSBtbS5lbnRp\ndHkoRXhlbXB0LmNsYXNzKTsKICAgICAgICBpdGVtXyA9IG1tLmVudGl0eShJ\ndGVtLmNsYXNzKTsKICAgICAgICBsaW5lSXRlbV8gPSBtbS5lbnRpdHkoTGlu\nZUl0ZW0uY2xhc3MpOwogICAgICAgIG1hbmFnZXJfID0gbW0uZW50aXR5KE1h\nbmFnZXIuY2xhc3MpOwogICAgICAgIG1vdmllXyA9IG1tLmVudGl0eShNb3Zp\nZS5jbGFzcyk7CiAgICAgICAgb3JkZXJfID0gbW0uZW50aXR5KE9yZGVyLmNs\nYXNzKTsKICAgICAgICBwZXJzb25fID0gbW0uZW50aXR5KFBlcnNvbi5jbGFz\ncyk7CiAgICAgICAgcGhvbmVfID0gbW0uZW50aXR5KFBob25lLmNsYXNzKTsK\nICAgICAgICBwaG90b18gPSBtbS5lbnRpdHkoUGhvdG8uY2xhc3MpOwogICAg\nICAgIHByb2R1Y3RfID0gbW0uZW50aXR5KFByb2R1Y3QuY2xhc3MpOwogICAg\nICAgIHNlbWVzdGVyXyA9IG1tLmVudGl0eShTZW1lc3Rlci5jbGFzcyk7CiAg\nICAgICAgc3R1ZGVudF8gPSBtbS5lbnRpdHkoU3R1ZGVudC5jbGFzcyk7CiAg\nICAgICAgdHJhbnNhY3Rpb25IaXN0b3J5XyA9IG1tLmVudGl0eShUcmFuc2Fj\ndGlvbkhpc3RvcnkuY2xhc3MpOwogICAgICAgIHZpZGVvU3RvcmVfID0gbW0u\nZW50aXR5KFZpZGVvU3RvcmUuY2xhc3MpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RTdHJpbmdFcXVhbEV4cHJlc3Npb24oKSB7CiAgICAgICAgU3Ry\naW5nIGpwcWwgPSAic2VsZWN0IGMgZnJvbSBDdXN0b21lciBjICIgCiAgICAg\nICAgICAgICAgICAgICAgKyAid2hlcmUgYy5uYW1lPSdBdXRvd2VzdCBUb3lv\ndGEnIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5IHEgPSBjYi5j\ncmVhdGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGN1c3RvbWVy\nID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChj\ndXN0b21lcikKICAgICAgICAgLndoZXJlKGNiLmVxdWFsKAogICAgICAgICAg\nICAgICAgY3VzdG9tZXIuZ2V0KGN1c3RvbWVyXy5nZXRTaW5ndWxhckF0dHJp\nYnV0ZSgibmFtZSIsIFN0cmluZy5jbGFzcykpLCAKICAgICAgICAgICAgICAg\nICJBdXRvd2VzdCBUb3lvdGEiKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTZXRB\nbmRMaXN0Sm9pbnMoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNU\nIGMubmFtZSBGUk9NIEN1c3RvbWVyIGMgIiAKICAgICAgICAgICAgICAgICAg\nICArICJKT0lOIGMub3JkZXJzIG8gSk9JTiBvLmxpbmVJdGVtcyBpICIgCiAg\nICAgICAgICAgICAgICAgICAgKyAiV0hFUkUgaS5wcm9kdWN0LnByb2R1Y3RU\neXBlID0gJ3ByaW50ZXInIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1\nZXJ5IHEgPSBjYi5jcmVhdGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q3VzdG9t\nZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFNldEpv\naW48Q3VzdG9tZXIsIE9yZGVyPiBvID0gYy5qb2luKGN1c3RvbWVyXy5nZXRT\nZXQoIm9yZGVycyIsCiAgICAgICAgICAgICAgICBPcmRlci5jbGFzcykpOwog\nICAgICAgIExpc3RKb2luPE9yZGVyLCBMaW5lSXRlbT4gaSA9IG8uam9pbihv\ncmRlcl8uZ2V0TGlzdCgibGluZUl0ZW1zIiwKICAgICAgICAgICAgICAgIExp\nbmVJdGVtLmNsYXNzKSk7CiAgICAgICAgcS5zZWxlY3QoYy5nZXQoQ3VzdG9t\nZXJfLm5hbWUpKS53aGVyZSgKICAgICAgICAgICAgICAgIGNiLmVxdWFsKGku\nZ2V0KGxpbmVJdGVtXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgicHJvZHVjdCIs\nIFByb2R1Y3QuY2xhc3MpKQogICAgICAgICAgICAgICAgICAgIC5nZXQocHJv\nZHVjdF8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoInByb2R1Y3RUeXBlIiwgU3Ry\naW5nLmNsYXNzKSksCiAgICAgICAgICAgICAgICAgICAgInByaW50ZXIiKSk7\nCgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TGVmdFNldEpvaW4oKSB7CiAgICAg\nICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGMgRlJPTSBDdXN0b21lciBjICIK\nICAgICAgICAgICAgICAgICAgICArICJMRUZUIEpPSU4gYy5vcmRlcnMgbyAi\nCiAgICAgICAgICAgICAgICAgICAgKyAiV0hFUkUgYy5zdGF0dXMgPSAxIjsK\nICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0g\nY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8\nQ3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAg\nIFNldEpvaW48Q3VzdG9tZXIsIE9yZGVyPiBvID0gYy5qb2luKGN1c3RvbWVy\nXy5nZXRTZXQoIm9yZGVycyIsCiAgICAgICAgICAgICAgICBPcmRlci5jbGFz\ncyksIEpvaW5UeXBlLkxFRlQpOwogICAgICAgIHEud2hlcmUoY2IuZXF1YWwo\nCiAgICAgICAgICAgICAgICBjLmdldChjdXN0b21lcl8uZ2V0U2luZ3VsYXJB\ndHRyaWJ1dGUoInN0YXR1cyIsIEludGVnZXIuY2xhc3MpKSwgCiAgICAgICAg\nICAgICAgICAxKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpw\ncWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaEpvaW5zKCkg\newogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBkIEZST00gRGVwYXJ0\nbWVudCBkIExFRlQgSk9JTiBGRVRDSCBkLmVtcGxveWVlcyAiCiAgICAgICAg\nICAgICAgICArICJXSEVSRSBkLmRlcHRObyA9IDEiOwogICAgICAgIENyaXRl\ncmlhUXVlcnkgcSA9IGNiLmNyZWF0ZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxE\nZXBhcnRtZW50PiBkID0gcS5mcm9tKERlcGFydG1lbnQuY2xhc3MpOwogICAg\nICAgIGQuZmV0Y2goZGVwYXJ0bWVudF8uZ2V0U2V0KCJlbXBsb3llZXMiLCBF\nbXBsb3llZS5jbGFzcyksIEpvaW5UeXBlLkxFRlQpOwogICAgICAgIHEud2hl\ncmUoCiAgICAgICAgICAgICAgICBjYi5lcXVhbChkLmdldChkZXBhcnRtZW50\nXwogICAgICAgICAgICAgICAgICAgICAgICAuZ2V0U2luZ3VsYXJBdHRyaWJ1\ndGUoImRlcHRObyIsIEludGVnZXIuY2xhc3MpKSwgMSkpLnNlbGVjdChkKTsK\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9Cgog\nICAgQEFsbG93RmFpbHVyZShtZXNzYWdlPSJUaGlzIGlzIHJlZ3Jlc3Npb24u\nIikKICAgIHB1YmxpYyB2b2lkIHRlc3RQYXRoTmF2aWdhdGlvbigpIHsKICAg\nICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgcC52ZW5kb3IgRlJPTSBFbXBs\nb3llZSBlICIKICAgICAgICAgICAgICAgICAgICArICJKT0lOIGUuY29udGFj\ndEluZm8ucGhvbmVzIHAgICIKICAgICAgICAgICAgICAgICAgICArICJXSEVS\nRSBlLmNvbnRhY3RJbmZvLmFkZHJlc3MuemlwQ29kZSA9ICc5NTA1NCciOwog\nICAgICAgIAogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8U3RyaW5n\nPiBxID0gY2IuY3JlYXRlUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBS\nb290PEVtcGxveWVlPiBlID0gcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsKICAg\nICAgICBKb2luPENvbnRhY3QsIFBob25lPiBwID0gZS5qb2luKGVtcGxveWVl\nXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgiY29udGFjdEluZm8iLCBDb250YWN0\nLmNsYXNzKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5q\nb2luKGNvbnRhY3RfLmdldExpc3QoInBob25lcyIsIFBob25lLmNsYXNzKSk7\nCiAgICAgICAgcS53aGVyZShjYi5lcXVhbChlLmdldChlbXBsb3llZV8uZ2V0\nU2luZ3VsYXJBdHRyaWJ1dGUoImNvbnRhY3RJbmZvIiwgQ29udGFjdC5jbGFz\ncykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldChjb250YWN0Xy5n\nZXRTaW5ndWxhckF0dHJpYnV0ZSgiYWRkcmVzcyIsIEFkZHJlc3MuY2xhc3Mp\nKQogICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoYWRkcmVzc18uZ2V0\nU2luZ3VsYXJBdHRyaWJ1dGUoInppcENvZGUiLCBTdHJpbmcuY2xhc3MpKSwg\nCiAgICAgICAgICAgICAgICAgICAgICAgICAiOTUwNTQiKSk7CiAgICAgICAg\ncS5zZWxlY3QocC5nZXQocGhvbmVfLmdldFNpbmd1bGFyQXR0cmlidXRlKCJ2\nZW5kb3IiLCBTdHJpbmcuY2xhc3MpKSk7CgogICAgICAgIGFzc2VydEVxdWl2\nYWxlbmNlKHEsIGpwcWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0S2V5UGF0aE5hdmlnYXRpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAiU0VMRUNUIGkubmFtZSwgcCBGUk9NIEl0ZW0gaSBKT0lOIGkucGhvdG9z\nIHAgV0hFUkUgS0VZKHApIExJS0UgJyVlZ3JldCUnIjsKCiAgICAgICAgQ3Jp\ndGVyaWFRdWVyeTxUdXBsZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsK\nICAgICAgICBSb290PEl0ZW0+IGkgPSBxLmZyb20oSXRlbS5jbGFzcyk7CiAg\nICAgICAgTWFwSm9pbjxJdGVtLCBTdHJpbmcsIFBob3RvPiBwID0gaS5qb2lu\nKGl0ZW1fLmdldE1hcCgicGhvdG9zIiwgU3RyaW5nLmNsYXNzLCBQaG90by5j\nbGFzcykpOwogICAgICAgIHEubXVsdGlzZWxlY3QoaS5nZXQoaXRlbV8uZ2V0\nU2luZ3VsYXJBdHRyaWJ1dGUoIm5hbWUiLCBTdHJpbmcuY2xhc3MpKSwgcCkK\nICAgICAgICAgICAgICAgIC53aGVyZShjYi5saWtlKHAua2V5KCksICIlZWdy\nZXQlIikpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW5kZXhFeHByZXNzaW9uKCkg\newogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCB0IEZST00gQ3JlZGl0\nQ2FyZCBjIEpPSU4gYy50cmFuc2FjdGlvbkhpc3RvcnkgdCAiCiAgICAgICAg\nICAgICAgICArICJXSEVSRSBjLmN1c3RvbWVyLmFjY291bnROdW0gPSAzMjE5\nODcgQU5EIElOREVYKHQpIEJFVFdFRU4gMCAiCiAgICAgICAgICAgICAgICAr\nICJBTkQgOSI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUcmFu\nc2FjdGlvbkhpc3Rvcnk+IGNxID0gY2IuY3JlYXRlUXVlcnkoVHJhbnNhY3Rp\nb25IaXN0b3J5LmNsYXNzKTsKICAgICAgICBSb290PENyZWRpdENhcmQ+IGMg\nPSBjcS5mcm9tKENyZWRpdENhcmQuY2xhc3MpOwogICAgICAgIExpc3RKb2lu\nPENyZWRpdENhcmQsIFRyYW5zYWN0aW9uSGlzdG9yeT4gdCA9IGMuam9pbihj\ncmVkaXRDYXJkXy5nZXRMaXN0KCJ0cmFuc2FjdGlvbkhpc3RvcnkiLCAKICAg\nICAgICAgICAgICAgIFRyYW5zYWN0aW9uSGlzdG9yeS5jbGFzcykpOwogICAg\nICAgIFByZWRpY2F0ZSBwMSA9IGNiLmVxdWFsKAogICAgICAgICAgICAgICAg\nYy5nZXQoY3JlZGl0Q2FyZF8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoImN1c3Rv\nbWVyIiwgQ3VzdG9tZXIuY2xhc3MpKQogICAgICAgICAgICAgICAgIC5nZXQo\nY3VzdG9tZXJfLmdldFNpbmd1bGFyQXR0cmlidXRlKCJhY2NvdW50TnVtIiwg\nbG9uZy5jbGFzcykpLCAzMjE5ODcpOwogICAgICAgIFByZWRpY2F0ZSBwMiA9\nIGNiLmJldHdlZW4odC5pbmRleCgpLCAwLCA5KTsKICAgICAgICBjcS5zZWxl\nY3QodCkud2hlcmUocDEscDIpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5j\nZShjcSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RJ\nc0VtcHR5RXhwcmVzc2lvbk9uSm9pbigpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJTRUxFQ1QgbyBGUk9NIE9yZGVyIG8gV0hFUkUgby5saW5lSXRlbXMg\nSVMgRU1QVFkiOyAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9yZGVyPiBxID0g\nY2IuY3JlYXRlUXVlcnkoT3JkZXIuY2xhc3MpOyAKICAgICAgICBSb290PE9y\nZGVyPiBvID0gcS5mcm9tKE9yZGVyLmNsYXNzKTsKICAgICAgICBFeHByZXNz\naW9uPExpbmVJdGVtPiBsaW5lSXRlbXMgPSBvLmdldCgibGluZUl0ZW1zIiku\nYXMoTGluZUl0ZW0uY2xhc3MpOwogICAgICAgIHEud2hlcmUoY2IuaXNFbXB0\neShsaW5lSXRlbXMuYXMoTGlzdC5jbGFzcykpKTsgCiAgICAgICAgcS5zZWxl\nY3Qobyk7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEZ1bmN0aW9uYWxFeHByZXNzaW9u\nSW5Qcm9qZWN0aW9uKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVD\nVCBvLnF1YW50aXR5LCBvLnRvdGFsQ29zdCoxLjA4IEFTIHRheGVkQ29zdCwg\nIgogICAgICAgICAgICAgICAgKyAiYS56aXBDb2RlIEZST00gQ3VzdG9tZXIg\nYyBKT0lOIGMub3JkZXJzIG8gSk9JTiBjLmFkZHJlc3MgYSAiCiAgICAgICAg\nICAgICAgICArICJXSEVSRSBhLnN0YXRlID0gJ0NBJyBBTkQgYS5jb3VudHkg\nPSAnU2FudGEgQ2xhcmEnIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAg\nIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwog\nICAgICAgIEpvaW48Q3VzdG9tZXIsIE9yZGVyPiBvID0gYy5qb2luKGN1c3Rv\nbWVyXy5nZXRTZXQoIm9yZGVycyIsIE9yZGVyLmNsYXNzKSk7CiAgICAgICAg\nSm9pbjxDdXN0b21lciwgQWRkcmVzcz4gYSA9IGMuam9pbihjdXN0b21lcl8u\nZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoImFkZHJlc3MiLCBBZGRyZXNzLmNsYXNz\nKSk7CiAgICAgICAgRXhwcmVzc2lvbjxEb3VibGU+IHRheGVkQ29zdCA9IChF\neHByZXNzaW9uPERvdWJsZT4pY2IucHJvZChvLmdldChvcmRlcl8uZ2V0U2lu\nZ3VsYXJBdHRyaWJ1dGUoInRvdGFsQ29zdCIsIAogICAgICAgICAgICAgICAg\nRG91YmxlLmNsYXNzKSksIDEuMDgpLmFsaWFzKCJ0YXhlZENvc3QiKTsKICAg\nICAgICBxLndoZXJlKGNiLmVxdWFsKGEuZ2V0KGFkZHJlc3NfLmdldFNpbmd1\nbGFyQXR0cmlidXRlKCJzdGF0ZSIsIFN0cmluZy5jbGFzcykpLCAiQ0EiKSwg\nCiAgICAgICAgICAgICAgICBjYi5lcXVhbChhLmdldChhZGRyZXNzXy5nZXRT\naW5ndWxhckF0dHJpYnV0ZSgiY291bnR5IiwgU3RyaW5nLmNsYXNzKSksICJT\nYW50YSBDbGFyYSIpKTsKICAgICAgICBxLm11bHRpc2VsZWN0KG8uZ2V0KG9y\nZGVyXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgicXVhbnRpdHkiLCBJbnRlZ2Vy\nLmNsYXNzKSksCiAgICAgICAgICAgICAgICB0YXhlZENvc3QsCiAgICAgICAg\nICAgICAgICBhLmdldChhZGRyZXNzXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgi\nemlwQ29kZSIsIFN0cmluZy5jbGFzcykpKTsKCiAgICAgICAgYXNzZXJ0RXF1\naXZhbGVuY2UocSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RUeXBlRXhwcmVzc2lvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9\nICJTRUxFQ1QgVFlQRShlKSBGUk9NIEVtcGxveWVlIGUgV0hFUkUgVFlQRShl\nKSA8PiBFeGVtcHQiOwogICAgICAgIENyaXRlcmlhUXVlcnkgcSA9IGNiLmNy\nZWF0ZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxFbXBsb3llZT4gZW1wID0gcS5m\ncm9tKEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChlbXAudHlw\nZSgpKS53aGVyZShjYi5ub3RFcXVhbChlbXAudHlwZSgpLCBFeGVtcHQuY2xh\nc3MpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RKb2luQW5kSW5kZXhFeHBy\nZXNzaW9uKCkgewogICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIHcubmFt\nZSBGUk9NIENvdXJzZSBjIEpPSU4gYy5zdHVkZW50V2FpdExpc3QgdyAiCiAg\nICAgICAgICAgICAgICArICJXSEVSRSBjLm5hbWUgPSAnQ2FsY3VsdXMnIEFO\nRCBJTkRFWCh3KSA9IDAiOwogICAgICAgIAogICAgICAgQ3JpdGVyaWFRdWVy\neTxTdHJpbmc+IHEgPSBjYi5jcmVhdGVRdWVyeShTdHJpbmcuY2xhc3MpOwog\nICAgICAgIFJvb3Q8Q291cnNlPiBjb3Vyc2UgPSBxLmZyb20oQ291cnNlLmNs\nYXNzKTsKICAgICAgICBMaXN0Sm9pbjxDb3Vyc2UsIFN0dWRlbnQ+IHcgPSBj\nb3Vyc2Uuam9pbihjb3Vyc2VfLmdldExpc3QoInN0dWRlbnRXYWl0TGlzdCIs\nIFN0dWRlbnQuY2xhc3MpKTsKICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGNv\ndXJzZS5nZXQoY291cnNlXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgibmFtZSIs\nIFN0cmluZy5jbGFzcykpLCAiQ2FsY3VsdXMiKSwgCiAgICAgICAgICAgICAg\nICBjYi5lcXVhbCh3LmluZGV4KCksIDApKQogICAgICAgICAgLnNlbGVjdCh3\nLmdldChzdHVkZW50Xy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgibmFtZSIsIFN0\ncmluZy5jbGFzcykpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwg\nanBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RBZ2dyZWdh\ndGVFeHByZXNzaW9uSW5Qcm9qZWN0aW9uKCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gIlNFTEVDVCBTVU0oaS5wcmljZSkgIiAKICAgICAgICAgICAgICsg\nIkZST00gT3JkZXIgbyBKT0lOIG8ubGluZUl0ZW1zIGkgSk9JTiBvLmN1c3Rv\nbWVyIGMgIgogICAgICAgICAgICAgKyAiV0hFUkUgYy5sYXN0TmFtZSA9ICdT\nbWl0aCcgQU5EIGMuZmlyc3ROYW1lID0gJ0pvaG4nIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5IHEgPSBjYi5jcmVhdGVRdWVyeSgpOwogICAgICAgIFJvb3Q8\nT3JkZXI+IG8gPSBxLmZyb20oT3JkZXIuY2xhc3MpOwogICAgICAgIEpvaW48\nT3JkZXIsIExpbmVJdGVtPiBpID0gby5qb2luKG9yZGVyXy5nZXRMaXN0KCJs\naW5lSXRlbXMiLAogICAgICAgICAgICAgICAgTGluZUl0ZW0uY2xhc3MpKTsK\nICAgICAgICBKb2luPE9yZGVyLCBDdXN0b21lcj4gYyA9IG8uam9pbihvcmRl\ncl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoImN1c3RvbWVyIiwKICAgICAgICAg\nICAgICAgIEN1c3RvbWVyLmNsYXNzKSk7CiAgICAgICAgcS53aGVyZShjYi5l\ncXVhbChjLmdldChjdXN0b21lcl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoImxh\nc3ROYW1lIiwgU3RyaW5nLmNsYXNzKSksICJTbWl0aCIpLCAKICAgICAgICAg\nICAgICAgIGNiLmVxdWFsKGMuZ2V0KGN1c3RvbWVyXy5nZXRTaW5ndWxhckF0\ndHJpYnV0ZSgiZmlyc3ROYW1lIiwgU3RyaW5nLmNsYXNzKSksICJKb2huIikp\nOwogICAgICAgIHEuc2VsZWN0KGNiLnN1bShpLmdldChsaW5lSXRlbV8uZ2V0\nU2luZ3VsYXJBdHRyaWJ1dGUoInByaWNlIiwgRG91YmxlLmNsYXNzKSkpKTsK\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHRlc3RTaXplRXhwcmVzc2lvbkluUHJvamVj\ndGlvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgU0laRShk\nLmVtcGxveWVlcykgRlJPTSBEZXBhcnRtZW50IGQgIiAKICAgICAgICAgKyAi\nV0hFUkUgZC5uYW1lID0gJ1NhbGVzJyI7IAogICAgICAgIAogICAgICAgIENy\naXRlcmlhUXVlcnkgcSA9IGNiLmNyZWF0ZVF1ZXJ5KCk7IAogICAgICAgIFJv\nb3Q8RGVwYXJ0bWVudD4gZCA9IHEuZnJvbShEZXBhcnRtZW50LmNsYXNzKTsK\nICAgICAgICBxLndoZXJlKGNiLmVxdWFsKAogICAgICAgICAgICAgICAgZC5n\nZXQoZGVwYXJ0bWVudF8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoIm5hbWUiLCBT\ndHJpbmcuY2xhc3MpKSwgCiAgICAgICAgICAgICAgICAiU2FsZXMiKSk7CiAg\nICAgICAgU2V0QXR0cmlidXRlPERlcGFydG1lbnQsIEVtcGxveWVlPiBlbXBs\nb3llZXMgPSAKICAgICAgICAgICAgZGVwYXJ0bWVudF8uZ2V0RGVjbGFyZWRT\nZXQoImVtcGxveWVlcyIsIEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBxLnNl\nbGVjdChjYi5zaXplKGQuZ2V0KGVtcGxveWVlcykpKTsKICAgICAgICAKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgICAgICAKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdENhc2VFeHByZXNzaW9uKCkg\newogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBlLm5hbWUsICIKICAg\nICAgICAgICAgICsgIkNBU0UgV0hFTiBlLnJhdGluZyA9IDEgVEhFTiBlLnNh\nbGFyeSAqIDEuMSAiCiAgICAgICAgICAgICArICJXSEVOIGUucmF0aW5nID0g\nMiBUSEVOIGUuc2FsYXJ5ICogMS4yIEVMU0UgZS5zYWxhcnkgKiAxLjAxIEVO\nRCAiCiAgICAgICAgICAgICArICJGUk9NIEVtcGxveWVlIGUgV0hFUkUgZS5k\nZXBhcnRtZW50Lm5hbWUgPSAnRW5naW5lZXJpbmcnIjsKICAgICAgICAKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PD8+IHEgPSBjYi5jcmVhdGVRdWVyeSgpOwog\nICAgICAgIFJvb3Q8RW1wbG95ZWU+IGUgPSBxLmZyb20oRW1wbG95ZWUuY2xh\nc3MpOwogICAgICAgIHEud2hlcmUoY2IuZXF1YWwoZS5nZXQoCiAgICAgICAg\nICAgICAgICAgICAgICAgIGVtcGxveWVlXy5nZXRTaW5ndWxhckF0dHJpYnV0\nZSgiZGVwYXJ0bWVudCIsIERlcGFydG1lbnQuY2xhc3MpKQogICAgICAgICAg\nICAgICAgICAgICAgICAuZ2V0KGRlcGFydG1lbnRfLmdldFNpbmd1bGFyQXR0\ncmlidXRlKCJuYW1lIiwgU3RyaW5nLmNsYXNzKSksCiAgICAgICAgICAgICAg\nICAgICAgICAgICJFbmdpbmVlcmluZyIpKTsKICAgICAgICBxLm11bHRpc2Vs\nZWN0KGUuZ2V0KGVtcGxveWVlXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgibmFt\nZSIsIFN0cmluZy5jbGFzcykpLCAKICAgICAgICAgICAgICAgIGNiLnNlbGVj\ndENhc2UoKS53aGVuKAogICAgICAgICAgICAgICAgICAgICAgICBjYi5lcXVh\nbChlLmdldChlbXBsb3llZV8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoInJhdGlu\nZyIsIEludGVnZXIuY2xhc3MpKSwgMSksCiAgICAgICAgICAgICAgICAgICAg\nICAgIGNiLnByb2QoZS5nZXQoZW1wbG95ZWVfLmdldFNpbmd1bGFyQXR0cmli\ndXRlKCJzYWxhcnkiLCAgTG9uZy5jbGFzcykpLCAxLjEpKS53aGVuKAogICAg\nICAgICAgICAgICAgICAgICAgICBjYi5lcXVhbChlLmdldChlbXBsb3llZV8u\nZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoInJhdGluZyIsIEludGVnZXIuY2xhc3Mp\nKSwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgIGNiLnByb2QoZS5nZXQo\nZW1wbG95ZWVfLmdldFNpbmd1bGFyQXR0cmlidXRlKCJzYWxhcnkiLCAgTG9u\nZy5jbGFzcykpLCAxLjIpKS5vdGhlcndpc2UoCiAgICAgICAgICAgICAgICAg\nICAgICAgIGNiLnByb2QoZS5nZXQoZW1wbG95ZWVfLmdldFNpbmd1bGFyQXR0\ncmlidXRlKCJzYWxhcnkiLCAgTG9uZy5jbGFzcykpLCAxLjAxKSkpOwoKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0TWVtYmVyT2ZFeHByZXNzaW9uKCkgewogICAgICBT\ndHJpbmcganBxbCA9ICJTRUxFQ1QgcCBGUk9NIFBlcnNvbiBwIHdoZXJlICdK\nb2UnIE1FTUJFUiBPRiBwLm5pY2tOYW1lcyI7CiAgICAgCiAgICAgIENyaXRl\ncmlhUXVlcnk8Pz4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KCk7IAogICAgICBSb290\nPFBlcnNvbj4gcCA9IHEuZnJvbShQZXJzb24uY2xhc3MpOwogICAgICBxLm11\nbHRpc2VsZWN0KHApLndoZXJlKGNiLmlzTWVtYmVyKGNiLmxpdGVyYWwoIkpv\nZSIpLCAKICAgICAgICAgICAgIHAuZ2V0KHBlcnNvbl8uZ2V0RGVjbGFyZWRT\nZXQoIm5pY2tOYW1lcyIsIFN0cmluZy5jbGFzcykpKSk7CiAgICAgCiAgICAg\nICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsgCiAgICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RQYXJhbWV0ZXJzKCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gIlNFTEVDVCBjIEZST00gQ3VzdG9tZXIgYyBXaGVyZSBjLnN0YXR1\ncyA9IDpzdGF0IjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PD8+IHEgPSBjYi5j\ncmVhdGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZy\nb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFBhcmFtZXRlcjxJbnRlZ2Vy\nPiBwYXJhbSA9IGNiLnBhcmFtZXRlcihJbnRlZ2VyLmNsYXNzLCAic3RhdCIp\nOwogICAgICAgIHEubXVsdGlzZWxlY3QoYykud2hlcmUoY2IuZXF1YWwoCiAg\nICAgICAgICAgIGMuZ2V0KGN1c3RvbWVyXy5nZXRTaW5ndWxhckF0dHJpYnV0\nZSgic3RhdHVzIiwgSW50ZWdlci5jbGFzcykpLCBwYXJhbSkpOwoKICAgICAg\nICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsLCBuZXcgU3RyaW5nW10geyAi\nc3RhdCIgfSwgbmV3IE9iamVjdFtdIHsgMSB9KTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0ZXN0S2V5RXhwcmVzc2lvbkluU2VsZWN0TGlzdCgpIHsKICAg\nICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1Qgdi5sb2NhdGlvbi5zdHJlZXQs\nIEtFWShpKS50aXRsZSwgVkFMVUUoaSkgIgogICAgICAgICAgICAgICAgKyAi\nRlJPTSBWaWRlb1N0b3JlIHYgSk9JTiB2LnZpZGVvSW52ZW50b3J5IGkgIgog\nICAgICAgICAgICAgICAgKyAiV0hFUkUgdi5sb2NhdGlvbi56aXBDb2RlID0g\nJzk0MzAxJyBBTkQgVkFMVUUoaSkgPiAwIjsKICAgICAgICAKICAgICAgICBD\ncml0ZXJpYVF1ZXJ5PD8+IHEgPSBjYi5jcmVhdGVRdWVyeSgpOwogICAgICAg\nIFJvb3Q8VmlkZW9TdG9yZT4gdiA9IHEuZnJvbShWaWRlb1N0b3JlLmNsYXNz\nKTsKICAgICAgICBNYXBKb2luPFZpZGVvU3RvcmUsIE1vdmllLCBJbnRlZ2Vy\nPiBpID0gdi5qb2luKHZpZGVvU3RvcmVfLmdldE1hcCgidmlkZW9JbnZlbnRv\ncnkiLCBNb3ZpZS5jbGFzcyxJbnRlZ2VyLmNsYXNzKSk7CiAgICAgICAgcS53\naGVyZShjYi5lcXVhbCh2LmdldCh2aWRlb1N0b3JlXy5nZXRTaW5ndWxhckF0\ndHJpYnV0ZSgibG9jYXRpb24iLCBBZGRyZXNzLmNsYXNzKSkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAuZ2V0KGFkZHJlc3NfLmdldFNpbmd1bGFyQXR0\ncmlidXRlKCJ6aXBDb2RlIiwgU3RyaW5nLmNsYXNzKSksICI5NDMwMSIpLCAK\nICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5ndChpLnZhbHVlKCksIDAp\nKTsKICAgICAgICBxLm11bHRpc2VsZWN0KHYuZ2V0KHZpZGVvU3RvcmVfLmdl\ndFNpbmd1bGFyQXR0cmlidXRlKCJsb2NhdGlvbiIsIEFkZHJlc3MuY2xhc3Mp\nKQogICAgICAgICAgICAgICAgLmdldChhZGRyZXNzXy5nZXRTaW5ndWxhckF0\ndHJpYnV0ZSgic3RyZWV0IiwgU3RyaW5nLmNsYXNzKSksIAogICAgICAgICAg\nICAgICAgaS5rZXkoKS5nZXQobW92aWVfLmdldFNpbmd1bGFyQXR0cmlidXRl\nKCJ0aXRsZSIsIFN0cmluZy5jbGFzcykpLCAKICAgICAgICAgICAgICAgIGku\ndmFsdWUoKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwp\nOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29uc3RydWN0b3JJ\nblNlbGVjdExpc3QoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNU\nIE5FVyBDdXN0b21lckRldGFpbHMoYy5pZCwgYy5zdGF0dXMsIG8ucXVhbnRp\ndHkpICIKICAgICAgICAgICAgICAgICAgICArICJGUk9NIEN1c3RvbWVyIGMg\nSk9JTiBjLm9yZGVycyBvIFdIRVJFIG8ucXVhbnRpdHkgPiAxMDAiOwogICAg\nICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXJEZXRhaWxzPiBx\nID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXJEZXRhaWxzLmNsYXNzKTsKICAg\nICAgICBSb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNz\nKTsKICAgICAgICBTZXRKb2luPEN1c3RvbWVyLCBPcmRlcj4gbyA9IGMuam9p\nbigKICAgICAgICAgICAgICAgIGN1c3RvbWVyXy5nZXRTZXQoIm9yZGVycyIs\nIE9yZGVyLmNsYXNzKSk7CiAgICAgICAgcS53aGVyZShjYi5ndChvLmdldChv\ncmRlcl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoInF1YW50aXR5IiwgSW50ZWdl\nci5jbGFzcykpLAogICAgICAgICAgICAgICAgMTAwKSk7CiAgICAgICAgcS5z\nZWxlY3QoY2IuY29uc3RydWN0KEN1c3RvbWVyRGV0YWlscy5jbGFzcywgCiAg\nICAgICAgICAgICAgICBjLmdldChjdXN0b21lcl8uZ2V0U2luZ3VsYXJBdHRy\naWJ1dGUoImlkIiwgTG9uZy5jbGFzcykpLCAKICAgICAgICAgICAgICAgIGMu\nZ2V0KGN1c3RvbWVyXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgic3RhdHVzIiwg\nSW50ZWdlci5jbGFzcykpLCAKICAgICAgICAgICAgICAgIG8uZ2V0KG9yZGVy\nXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgicXVhbnRpdHkiLCAgSW50ZWdlci5j\nbGFzcykpKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RVbmNvcnJlbGF0ZWRTdWJx\ndWVyeVdpdGhBZ2dyZWdhdGVQcm9qZWN0aW9uKCkgewogICAgICAgIFN0cmlu\nZyBqcHFsID0gIlNFTEVDVCBnb29kQ3VzdG9tZXIgRlJPTSBDdXN0b21lciBn\nb29kQ3VzdG9tZXIgV0hFUkUgIgogICAgICAgICAgICAgICAgKyAiZ29vZEN1\nc3RvbWVyLmJhbGFuY2VPd2VkIDwgKFNFTEVDVCBBVkcoYy5iYWxhbmNlT3dl\nZCkgRlJPTSAiCiAgICAgICAgICAgICAgICArICJDdXN0b21lciBjKSI7CiAg\nICAgICAgQ3JpdGVyaWFRdWVyeTw/PiBxID0gY2IuY3JlYXRlUXVlcnkoKTsK\nICAgICAgICBSb290PEN1c3RvbWVyPiBnb29kQ3VzdG9tZXIgPSBxLmZyb20o\nQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFN1YnF1ZXJ5PERvdWJsZT4gc3Eg\nPSBxLnN1YnF1ZXJ5KERvdWJsZS5jbGFzcyk7CiAgICAgICAgUm9vdDxDdXN0\nb21lcj4gYyA9IHNxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIHEu\nd2hlcmUoY2IubHQoZ29vZEN1c3RvbWVyLmdldChjdXN0b21lcl8uZ2V0U2lu\nZ3VsYXJBdHRyaWJ1dGUoImJhbGFuY2VPd2VkIiwKICAgICAgICAgICAgICAg\nIEludGVnZXIuY2xhc3MpKSwgc3Euc2VsZWN0KGNiLmF2ZyhjLmdldChjdXN0\nb21lcl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAi\nYmFsYW5jZU93ZWQiLCBJbnRlZ2VyLmNsYXNzKSkpKSkpOwogICAgICAgIHEu\nbXVsdGlzZWxlY3QoZ29vZEN1c3RvbWVyKTsKCiAgICAgICAgYXNzZXJ0RXF1\naXZhbGVuY2UocSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RTdWJxdWVyeVdpdGhFeGlzdHNDbGF1c2UoKSB7CiAgICAgICAgU3Ry\naW5nIGpwcWwgPSAiU0VMRUNUIERJU1RJTkNUIGVtcCBGUk9NIEVtcGxveWVl\nIGVtcCBXSEVSRSBFWElTVFMgKCIKICAgICAgICAgICAgICAgICsgIlNFTEVD\nVCBzcG91c2VFbXAgRlJPTSBFbXBsb3llZSBzcG91c2VFbXAgV0hFUkUgc3Bv\ndXNlRW1wID0gIgogICAgICAgICAgICAgICAgKyAiZW1wLnNwb3VzZSkiOwog\nICAgICAgIENyaXRlcmlhUXVlcnk8RW1wbG95ZWU+IHEgPSBjYi5jcmVhdGVR\ndWVyeShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAgUm9vdDxFbXBsb3llZT4g\nZW1wID0gcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBTdWJxdWVy\neTxFbXBsb3llZT4gc3EgPSBxLnN1YnF1ZXJ5KEVtcGxveWVlLmNsYXNzKTsK\nICAgICAgICBSb290PEVtcGxveWVlPiBzcG91c2VFbXAgPSBzcS5mcm9tKEVt\ncGxveWVlLmNsYXNzKTsKICAgICAgICBzcS5zZWxlY3Qoc3BvdXNlRW1wKTsK\nICAgICAgICBzcS53aGVyZShjYi5lcXVhbChzcG91c2VFbXAsIGVtcC5nZXQo\nZW1wbG95ZWVfLmdldFNpbmd1bGFyQXR0cmlidXRlKCJzcG91c2UiLCBFbXBs\nb3llZS5jbGFzcykpKSk7CiAgICAgICAgcS53aGVyZShjYi5leGlzdHMoc3Ep\nKTsKICAgICAgICBxLmRpc3RpbmN0KHRydWUpOwoKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0U3VicXVlcnlXaXRoQWxsQ2xhdXNlKCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gIlNFTEVDVCBlbXAgRlJPTSBFbXBsb3llZSBlbXAgV0hFUkUgZW1w\nLnNhbGFyeSA+IEFMTCAoIgogICAgICAgICAgICAgICAgKyAiU0VMRUNUIG0u\nc2FsYXJ5IEZST00gTWFuYWdlciBtIFdIRVJFIG0uZGVwYXJ0bWVudCA9Igog\nICAgICAgICAgICAgICAgKyAiIGVtcC5kZXBhcnRtZW50KSI7CiAgICAgICAg\nCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxFbXBsb3llZT4gcSA9IGNiLmNyZWF0\nZVF1ZXJ5KEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBSb290PEVtcGxveWVl\nPiBlbXAgPSBxLmZyb20oRW1wbG95ZWUuY2xhc3MpOwogICAgICAgIAogICAg\nICAgIFN1YnF1ZXJ5PEJpZ0RlY2ltYWw+IHNxID0gcS5zdWJxdWVyeShCaWdE\nZWNpbWFsLmNsYXNzKTsKICAgICAgICBSb290PE1hbmFnZXI+IG0gPSBzcS5m\ncm9tKE1hbmFnZXIuY2xhc3MpOwogICAgICAgIHNxLnNlbGVjdChtLmdldCht\nYW5hZ2VyXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgic2FsYXJ5IiwgQmlnRGVj\naW1hbC5jbGFzcykpKTsKICAgICAgICBzcS53aGVyZShjYi5lcXVhbChtLmdl\ndChtYW5hZ2VyXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgiZGVwYXJ0bWVudCIs\nCiAgICAgICAgICAgICAgICBEZXBhcnRtZW50LmNsYXNzKSksIGVtcC5nZXQo\nZW1wbG95ZWVfLmdldFNpbmd1bGFyQXR0cmlidXRlKAogICAgICAgICAgICAg\nICAgImRlcGFydG1lbnQiLCBEZXBhcnRtZW50LmNsYXNzKSkpKTsKICAgICAg\nICBxLndoZXJlKGNiLmd0KGVtcC5nZXQoZW1wbG95ZWVfLmdldFNpbmd1bGFy\nQXR0cmlidXRlKCJzYWxhcnkiLCBMb25nLmNsYXNzKSksIGNiCiAgICAgICAg\nICAgICAgICAuYWxsKHNxKSkpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5j\nZShxLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdENv\ncnJlbGF0ZWRTdWJxdWVyeVdpdGhDb3VudCgpIHsKICAgICAgICBTdHJpbmcg\nanBxbCA9ICJTRUxFQ1QgYyBGUk9NIEN1c3RvbWVyIGMgV0hFUkUgIgogICAg\nICAgICAgICAgICAgKyAiKFNFTEVDVCBDT1VOVChvKSBGUk9NIGMub3JkZXJz\nIG8pID4gMTAiOwogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEg\nPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9v\ndDxDdXN0b21lcj4gYzEgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAg\nICAgIFN1YnF1ZXJ5PExvbmc+IHNxMyA9IHEuc3VicXVlcnkoTG9uZy5jbGFz\ncyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYzIgPSBzcTMuY29ycmVsYXRl\nKGMxKTsKICAgICAgICBKb2luPEN1c3RvbWVyLCBPcmRlcj4gbyA9IGMyLmpv\naW4oY3VzdG9tZXJfLmdldFNldCgib3JkZXJzIiwKICAgICAgICAgICAgICAg\nIE9yZGVyLmNsYXNzKSk7CiAgICAgICAgcS53aGVyZShjYi5ndChzcTMuc2Vs\nZWN0KGNiLmNvdW50KG8pKSwgMTApKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZh\nbGVuY2UocSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RDb3JyZWxhdGVkU3VicXVlcnlXaXRoSm9pbigpIHsKICAgICAgICBTdHJp\nbmcganBxbCA9ICJTRUxFQ1QgbyBGUk9NIE9yZGVyIG8gV0hFUkUgMTAwMDAg\nPCBBTEwgKCIKICAgICAgICAgICAgICAgICsgIlNFTEVDVCBhLmJhbGFuY2Ug\nRlJPTSBvLmN1c3RvbWVyIGMgSk9JTiBjLmFjY291bnRzIGEpIjsKICAgICAg\nICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9yZGVyPiBxID0gY2IuY3JlYXRl\nUXVlcnkoT3JkZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8T3JkZXI+IG8gPSBx\nLmZyb20oT3JkZXIuY2xhc3MpOwogICAgICAgIAogICAgICAgIFN1YnF1ZXJ5\nPEludGVnZXI+IHNxID0gcS5zdWJxdWVyeShJbnRlZ2VyLmNsYXNzKTsKICAg\nICAgICBSb290PE9yZGVyPiBvMiA9IHNxLmNvcnJlbGF0ZShvKTsKICAgICAg\nICBKb2luPE9yZGVyLCBDdXN0b21lcj4gYyA9IG8yLmpvaW4ob3JkZXJfLmdl\ndFNpbmd1bGFyQXR0cmlidXRlKCJjdXN0b21lciIsCiAgICAgICAgICAgICAg\nICBDdXN0b21lci5jbGFzcykpOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIEFj\nY291bnQ+IGEgPSBjLmpvaW4oY3VzdG9tZXJfLmdldExpc3QoImFjY291bnRz\nIiwKICAgICAgICAgICAgICAgIEFjY291bnQuY2xhc3MpKTsKICAgICAgICBz\ncS5zZWxlY3QoYS5nZXQoYWNjb3VudF8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUo\nImJhbGFuY2UiLCBJbnRlZ2VyLmNsYXNzKSkpOwogICAgICAgIHEud2hlcmUo\nY2IubHQoY2IubGl0ZXJhbCgxMDAwMCksIGNiLmFsbChzcSkpKTsKCiAgICAg\nICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RDb3JyZWxhdGVkU3VicXVlcnlXaXRoQWxsQ2xh\ndXNlKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBvIEZST00g\nT3JkZXIgbyBKT0lOIG8uY3VzdG9tZXIgYyAiCiAgICAgICAgICAgICAgICAg\nICAgKyAiV0hFUkUgMTAwMDAgPCBBTEwgKFNFTEVDVCBhLmJhbGFuY2UgRlJP\nTSBjLmFjY291bnRzIGEpIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PE9yZGVyPiBxID0gY2IuY3JlYXRlUXVlcnkoT3JkZXIuY2xhc3MpOwog\nICAgICAgIFJvb3Q8T3JkZXI+IG8gPSBxLmZyb20oT3JkZXIuY2xhc3MpOwog\nICAgICAgIAogICAgICAgIEpvaW48T3JkZXIsIEN1c3RvbWVyPiBjID0gby5q\nb2luKE9yZGVyXy5jdXN0b21lcik7CiAgICAgICAgU3VicXVlcnk8SW50ZWdl\ncj4gc3EgPSBxLnN1YnF1ZXJ5KEludGVnZXIuY2xhc3MpOwogICAgICAgIEpv\naW48T3JkZXIsIEN1c3RvbWVyPiBjc3EgPSBzcS5jb3JyZWxhdGUoYyk7CiAg\nICAgICAgSm9pbjxDdXN0b21lciwgQWNjb3VudD4gYSA9IGNzcS5qb2luKGN1\nc3RvbWVyXy5nZXRMaXN0KCJhY2NvdW50cyIsCiAgICAgICAgICAgICAgICBB\nY2NvdW50LmNsYXNzKSk7CiAgICAgICAgc3Euc2VsZWN0KGEuZ2V0KGFjY291\nbnRfLmdldFNpbmd1bGFyQXR0cmlidXRlKCJiYWxhbmNlIiwgSW50ZWdlci5j\nbGFzcykpKTsKICAgICAgICBxLndoZXJlKGNiLmx0KGNiLmxpdGVyYWwoMTAw\nMDApLCBjYi5hbGwoc3EpKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RHcm91cEJ5\nQW5kSGF2aW5nKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBj\nLnN0YXR1cywgQVZHKGMuZmlsbGVkT3JkZXJDb3VudCksIENPVU5UKGMpIEZS\nT00gIgogICAgICAgICAgICAgICAgKyAiQ3VzdG9tZXIgYyBHUk9VUCBCWSBj\nLnN0YXR1cyBIQVZJTkcgYy5zdGF0dXMgSU4gKDEsIDIpIjsKICAgICAgICAK\nICAgICAgICBDcml0ZXJpYVF1ZXJ5PD8+IHEgPSBjYi5jcmVhdGVRdWVyeSgp\nOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIu\nY2xhc3MpOwogICAgICAgIHEuZ3JvdXBCeShjLmdldChjdXN0b21lcl8uZ2V0\nU2luZ3VsYXJBdHRyaWJ1dGUoInN0YXR1cyIsIEludGVnZXIuY2xhc3MpKSk7\nCiAgICAgICAgcS5oYXZpbmcoY2IuaW4oYy5nZXQoY3VzdG9tZXJfLmdldFNp\nbmd1bGFyQXR0cmlidXRlKCJzdGF0dXMiLCBJbnRlZ2VyLmNsYXNzKSkpCiAg\nICAgICAgICAgICAgICAudmFsdWUoMSkudmFsdWUoMikpOwogICAgICAgIHEu\nbXVsdGlzZWxlY3QoYy5nZXQoY3VzdG9tZXJfLmdldFNpbmd1bGFyQXR0cmli\ndXRlKCJzdGF0dXMiLCBJbnRlZ2VyLmNsYXNzKSksIGNiCiAgICAgICAgICAg\nICAgICAuYXZnKGMuZ2V0KGN1c3RvbWVyXy5nZXRTaW5ndWxhckF0dHJpYnV0\nZSgiZmlsbGVkT3JkZXJDb3VudCIsCiAgICAgICAgICAgICAgICAgICAgICAg\nIEludGVnZXIuY2xhc3MpKSksIGNiLmNvdW50KGMpKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdE9yZGVyaW5nQnlFeHByZXNzaW9uTm90SW5jbHVkZWRJblNlbGVj\ndGlvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgbyBGUk9N\nIEN1c3RvbWVyIGMgIiAKICAgICAgICAgICAgICAgICAgICArICJKT0lOIGMu\nb3JkZXJzIG8gSk9JTiBjLmFkZHJlc3MgYSAiCiAgICAgICAgICAgICAgICAg\nICAgKyAiV0hFUkUgYS5zdGF0ZSA9ICdDQScgIgogICAgICAgICAgICAgICAg\nICAgICsgIk9SREVSIEJZIG8ucXVhbnRpdHkgREVTQywgby50b3RhbENvc3Qi\nOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8Pz4gcSA9IGNiLmNy\nZWF0ZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IHEuZnJv\nbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgU2V0Sm9pbjxDdXN0b21lciwg\nT3JkZXI+IG8gPSBjLmpvaW4oY3VzdG9tZXJfLmdldFNldCgib3JkZXJzIiwg\nCiAgICAgICAgICAgICAgICBPcmRlci5jbGFzcykpOwogICAgICAgIEpvaW48\nQ3VzdG9tZXIsIEFkZHJlc3M+IGEgPSBjLmpvaW4oY3VzdG9tZXJfLmdldFNp\nbmd1bGFyQXR0cmlidXRlKCJhZGRyZXNzIiwKICAgICAgICAgICAgICAgIEFk\nZHJlc3MuY2xhc3MpKTsKICAgICAgICBxLndoZXJlKGNiLmVxdWFsKAogICAg\nICAgICAgICAgICAgYS5nZXQoYWRkcmVzc18uZ2V0U2luZ3VsYXJBdHRyaWJ1\ndGUoInN0YXRlIiwgU3RyaW5nLmNsYXNzKSksCiAgICAgICAgICAgICAgICAi\nQ0EiKSk7CiAgICAgICAgcS5vcmRlckJ5KAogICAgICAgICAgY2IuZGVzYyhv\nLmdldChvcmRlcl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoInF1YW50aXR5Iiwg\nSW50ZWdlci5jbGFzcykpKSwKICAgICAgICAgIGNiLmFzYyhvLmdldChvcmRl\ncl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoInRvdGFsQ29zdCIsIERvdWJsZS5j\nbGFzcykpKSk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChvKTsKCiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIHRlc3RPcmRlcmluZ0J5RXhwcmVzc2lvbkluY2x1ZGVkSW5T\nZWxlY3Rpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8u\ncXVhbnRpdHksIGEuemlwQ29kZSBGUk9NIEN1c3RvbWVyIGMgIgogICAgICAg\nICAgICAgICAgICAgICsgIkpPSU4gYy5vcmRlcnMgbyBKT0lOIGMuYWRkcmVz\ncyBhICIgCiAgICAgICAgICAgICAgICAgICAgKyAiV0hFUkUgYS5zdGF0ZSA9\nICdDQScgIgogICAgICAgICAgICAgICAgICAgICsgIk9SREVSIEJZIG8ucXVh\nbnRpdHksIGEuemlwQ29kZSI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFR\ndWVyeTw/PiBxID0gY2IuY3JlYXRlUXVlcnkoKTsKICAgICAgICBSb290PEN1\nc3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBK\nb2luPEN1c3RvbWVyLCBPcmRlcj4gbyA9IGMuam9pbihjdXN0b21lcl8uZ2V0\nU2V0KCJvcmRlcnMiLAogICAgICAgICAgICAgICAgT3JkZXIuY2xhc3MpKTsK\nICAgICAgICBKb2luPEN1c3RvbWVyLCBBZGRyZXNzPiBhID0gYy5qb2luKGN1\nc3RvbWVyXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgiYWRkcmVzcyIsCiAgICAg\nICAgICAgICAgICBBZGRyZXNzLmNsYXNzKSk7CiAgICAgICAgcS53aGVyZShj\nYi5lcXVhbCgKICAgICAgICAgICAgICAgIGEuZ2V0KGFkZHJlc3NfLmdldFNp\nbmd1bGFyQXR0cmlidXRlKCJzdGF0ZSIsIFN0cmluZy5jbGFzcykpLAogICAg\nICAgICAgICAgICAgIkNBIikpOwogICAgICAgIHEub3JkZXJCeShjYgogICAg\nICAgICAgICAgICAgLmFzYyhvLmdldChvcmRlcl8uZ2V0U2luZ3VsYXJBdHRy\naWJ1dGUoInF1YW50aXR5IiwgSW50ZWdlci5jbGFzcykpKSwKICAgICAgICAg\nICAgICAgIGNiLmFzYyhhLmdldChhZGRyZXNzXy5nZXRTaW5ndWxhckF0dHJp\nYnV0ZSgiemlwQ29kZSIsIFN0cmluZy5jbGFzcykpKSk7CiAgICAgICAgcS5t\ndWx0aXNlbGVjdChvLmdldChvcmRlcl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUo\nInF1YW50aXR5IiwgSW50ZWdlci5jbGFzcykpLCAKICAgICAgICAgICAgICAg\nIGEuZ2V0KGFkZHJlc3NfLmdldFNpbmd1bGFyQXR0cmlidXRlKCJ6aXBDb2Rl\nIiwgU3RyaW5nLmNsYXNzKSkpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5j\nZShxLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE9y\nZGVyaW5nV2l0aE51bWVyaWNhbEV4cHJlc3Npb25JblNlbGVjdGlvbigpIHsK\nICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1Qgby5xdWFudGl0eSwgby50\nb3RhbENvc3QgKiAxLjA4IEFTIHRheGVkQ29zdCwgYS56aXBDb2RlICIKICAg\nICAgICAgICAgICAgICsgIkZST00gQ3VzdG9tZXIgYyBKT0lOIGMub3JkZXJz\nIG8gSk9JTiBjLmFkZHJlc3MgYSAiCiAgICAgICAgICAgICAgICArICJXSEVS\nRSBhLnN0YXRlID0gJ0NBJyBBTkQgYS5jb3VudHkgPSAnU2FudGEgQ2xhcmEn\nICIKICAgICAgICAgICAgICAgICsgIk9SREVSIEJZIG8ucXVhbnRpdHksIHRh\neGVkQ29zdCwgYS56aXBDb2RlIjsKICAgICAgICAKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PD8+IHEgPSBjYi5jcmVhdGVRdWVyeSgpOwogICAgICAgIFJvb3Q8\nQ3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAg\nIEpvaW48Q3VzdG9tZXIsIE9yZGVyPiBvID0gYy5qb2luKGN1c3RvbWVyXy5n\nZXRTZXQoIm9yZGVycyIsICBPcmRlci5jbGFzcykpOwogICAgICAgIEpvaW48\nQ3VzdG9tZXIsIEFkZHJlc3M+IGEgPSBjLmpvaW4oY3VzdG9tZXJfLmdldFNp\nbmd1bGFyQXR0cmlidXRlKCJhZGRyZXNzIiwgQWRkcmVzcy5jbGFzcykpOwog\nICAgICAgIEV4cHJlc3Npb248RG91YmxlPiB0YXhlZENvc3QgPSAoRXhwcmVz\nc2lvbjxEb3VibGU+KWNiLnByb2Qoby5nZXQob3JkZXJfLmdldFNpbmd1bGFy\nQXR0cmlidXRlKCJ0b3RhbENvc3QiLCAKICAgICAgICAgICAgICAgIERvdWJs\nZS5jbGFzcykpLCAxLjA4KS5hbGlhcygidGF4ZWRDb3N0Iik7CiAgICAgICAg\ncS53aGVyZShjYi5lcXVhbChhLmdldChhZGRyZXNzXy5nZXRTaW5ndWxhckF0\ndHJpYnV0ZSgic3RhdGUiLCBTdHJpbmcuY2xhc3MpKSwgIkNBIiksIAogICAg\nICAgICAgICAgICAgY2IuZXF1YWwoYS5nZXQoYWRkcmVzc18uZ2V0U2luZ3Vs\nYXJBdHRyaWJ1dGUoImNvdW50eSIsIFN0cmluZy5jbGFzcykpLCAiU2FudGEg\nQ2xhcmEiKSk7CiAgICAgICAgcS5vcmRlckJ5KGNiLmFzYyhvLmdldChvcmRl\ncl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoInF1YW50aXR5IiwgSW50ZWdlci5j\nbGFzcykpKSwKICAgICAgICAgICAgICAgICAgY2IuYXNjKHRheGVkQ29zdCks\nIAogICAgICAgICAgICAgICAgICBjYi5hc2MoYS5nZXQoYWRkcmVzc18uZ2V0\nU2luZ3VsYXJBdHRyaWJ1dGUoInppcENvZGUiLCBTdHJpbmcuY2xhc3MpKSkp\nOwogICAgICAgIHEubXVsdGlzZWxlY3Qoby5nZXQob3JkZXJfLmdldFNpbmd1\nbGFyQXR0cmlidXRlKCJxdWFudGl0eSIsIEludGVnZXIuY2xhc3MpKSwgCiAg\nICAgICAgICAgICAgICAgICAgICB0YXhlZENvc3QsIAogICAgICAgICAgICAg\nICAgICAgICAgYS5nZXQoYWRkcmVzc18uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUo\nInppcENvZGUiLCBTdHJpbmcuY2xhc3MpKSk7CiAgICAgICAgYXNzZXJ0RXF1\naXZhbGVuY2UocSwganBxbCk7CiAgICB9Cn0K\n","encoding":"base64"}

