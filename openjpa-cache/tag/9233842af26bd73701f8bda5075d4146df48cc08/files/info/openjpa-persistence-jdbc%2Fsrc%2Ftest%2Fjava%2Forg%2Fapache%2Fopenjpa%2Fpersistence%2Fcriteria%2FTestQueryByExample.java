{"sha":"61ae18efe9e6124a04dc730401e913f12acbbd6f","node_id":"MDQ6QmxvYjIwNjM2NDo2MWFlMThlZmU5ZTYxMjRhMDRkYzczMDQwMWU5MTNmMTJhY2JiZDZm","size":7554,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/61ae18efe9e6124a04dc730401e913f12acbbd6f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jcml0ZXJpYTsK\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5Dcml0ZXJpYVF1\nZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLkF0dHJp\nYnV0ZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpE\nQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLkRCMkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc3FsLk9yYWNsZURpY3Rpb25hcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXJTUEk7CgovKioKICogVGVzdHMgZGlmZmVyZW50IHN0eWxlcyBmb3IgcXVl\ncnkgYnkgZXhhbXBsZS4KICogCiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcgog\nKgogKi8KcHVibGljIGNsYXNzIFRlc3RRdWVyeUJ5RXhhbXBsZSBleHRlbmRz\nIENyaXRlcmlhVGVzdCB7CiAgICBEQkRpY3Rpb25hcnkgZGljdCA9IG51bGw7\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzdXBlci5zZXRV\ncCgpOwogICAgICAgIAogICAgICAgIC8vIElmIHVzaW5nIGFuIE9yYWNsZSBE\nQiwgdXNlIHNxbDkyIHN5bnRheCBpbiBvcmRlciB0byBnZXQgYSBjb3JyZWN0\nCiAgICAgICAgLy8gY29tcGFyaXNvbiBvZiBTUUwuICBUaGlzIG1heSBub3Qg\nd29yayBvbiBPcmFjbGUgSkRCQyBkcml2ZXJzCiAgICAgICAgLy8gcHJpb3Ig\ndG8gMTAueAogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIG9qZW0g\nPSAoT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkpZW07CiAgICAgICAgZGljdCA9\nICgoSkRCQ0NvbmZpZ3VyYXRpb24pIG9qZW0uZ2V0Q29uZmlndXJhdGlvbigp\nKQogICAgICAgICAgICAuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsKICAg\nICAgICBpZiAoZGljdCBpbnN0YW5jZW9mIE9yYWNsZURpY3Rpb25hcnkpIHsK\nICAgICAgICAgICAgZGljdC5zZXRKb2luU3ludGF4KCJzcWw5MiIpOwogICAg\nICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEJhc2ljRmll\nbGRzV2l0aE5vbkRlZmF1bHRWYWx1ZSgpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJTRUxFQ1QgZSBGUk9NIEVtcGxveWVlIGUgV0hFUkUgZS5yYXRpbmc9\nMSBBTkQgZS5zYWxhcnk9MTEwMCI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVy\naWFRdWVyeTxFbXBsb3llZT4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEVtcGxveWVl\nLmNsYXNzKTsKICAgICAgICAKICAgICAgICBFbXBsb3llZSBleGFtcGxlID0g\nbmV3IEVtcGxveWVlKCk7CiAgICAgICAgZXhhbXBsZS5zZXRTYWxhcnkoMTAw\nMCsxMDApOwogICAgICAgIGV4YW1wbGUuc2V0UmF0aW5nKDEpOwogICAgICAg\nIAogICAgICAgIENvbXBhcmlzb25TdHlsZSBzdHlsZSA9IG51bGw7CiAgICAg\nICAgQXR0cmlidXRlPD8sPz5bXSBleGNsdWRlcyA9IG51bGw7CiAgICAgICAg\ncS53aGVyZShjYi5xYmUocS5mcm9tKEVtcGxveWVlLmNsYXNzKSwgZXhhbXBs\nZSwgc3R5bGUsIGV4Y2x1ZGVzKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2\nb2lkIHRlc3RFeGNsdWRlQmFzaWNGaWVsZFdpdGhOb25EZWZhdWx0VmFsdWUo\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGUgRlJPTSBFbXBs\nb3llZSBlIFdIRVJFIGUuc2FsYXJ5PTExMDAiOwogICAgICAgIAogICAgICAg\nIENyaXRlcmlhUXVlcnk8RW1wbG95ZWU+IHEgPSBjYi5jcmVhdGVRdWVyeShF\nbXBsb3llZS5jbGFzcyk7CiAgICAgICAgCiAgICAgICAgRW1wbG95ZWUgZXhh\nbXBsZSA9IG5ldyBFbXBsb3llZSgpOwogICAgICAgIGV4YW1wbGUuc2V0U2Fs\nYXJ5KDEwMDArMTAwKTsKICAgICAgICBleGFtcGxlLnNldFJhdGluZygxKTsK\nICAgICAgICAKICAgICAgICBDb21wYXJpc29uU3R5bGUgc3R5bGUgPSBudWxs\nOwogICAgICAgIEF0dHJpYnV0ZTw/LD8+W10gZXhjbHVkZXMgPSB7RW1wbG95\nZWVfLnJhdGluZ307CiAgICAgICAgcS53aGVyZShjYi5xYmUocS5mcm9tKEVt\ncGxveWVlLmNsYXNzKSwgZXhhbXBsZSwgc3R5bGUsIGV4Y2x1ZGVzKSk7CiAg\nICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RCYXNpY0ZpZWxkV2l0aERl\nZmF1bHRWYWx1ZUV4Y2x1ZGVkQnlEZWZhdWx0U3R5bGUoKSB7CiAgICAgICAg\nU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGUgRlJPTSBFbXBsb3llZSBlIFdIRVJF\nIGUucmF0aW5nPTEiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8\nRW1wbG95ZWU+IHEgPSBjYi5jcmVhdGVRdWVyeShFbXBsb3llZS5jbGFzcyk7\nCiAgICAgICAgCiAgICAgICAgRW1wbG95ZWUgZXhhbXBsZSA9IG5ldyBFbXBs\nb3llZSgpOwogICAgICAgIGV4YW1wbGUuc2V0UmF0aW5nKDEpOwogICAgICAg\nIAogICAgICAgIENvbXBhcmlzb25TdHlsZSBzdHlsZSA9IG51bGw7CiAgICAg\nICAgQXR0cmlidXRlPD8sPz5bXSBleGNsdWRlcyA9IG51bGw7CiAgICAgICAg\ncS53aGVyZShjYi5xYmUocS5mcm9tKEVtcGxveWVlLmNsYXNzKSwgZXhhbXBs\nZSwgc3R5bGUsIGV4Y2x1ZGVzKSk7CiAgICAgICAgCiAgICAgICAgZXhlY3V0\nZUFuZENvbXBhcmVTUUwocSwgIldIRVJFICh0MC5yYXRpbmcgPSA/KSIpOyAg\nICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RCYXNpY0ZpZWxkV2l0aERl\nZmF1bHRWYWx1ZUNhbkJlSW5jbHVkZWRCeVN0eWxlKCkgewogICAgICAgIFN0\ncmluZyBqcHFsID0gIlNFTEVDVCBlIEZST00gRW1wbG95ZWUgZSBXSEVSRSBl\nLnJhdGluZz0xIEFORCBlLnNhbGFyeT0xMTAwIjsKICAgICAgICAKICAgICAg\nICBDcml0ZXJpYVF1ZXJ5PEVtcGxveWVlPiBxID0gY2IuY3JlYXRlUXVlcnko\nRW1wbG95ZWUuY2xhc3MpOwogICAgICAgIAogICAgICAgIEVtcGxveWVlIGV4\nYW1wbGUgPSBuZXcgRW1wbG95ZWUoKTsKICAgICAgICBleGFtcGxlLnNldFJh\ndGluZygxKTsKICAgICAgICAKICAgICAgICBDb21wYXJpc29uU3R5bGUgc3R5\nbGUgPSBjYi5xYmVTdHlsZSgpOwogICAgICAgIEF0dHJpYnV0ZTw/LD8+W10g\nZXhjbHVkZXMgPSBudWxsOwogICAgICAgIHEud2hlcmUoY2IucWJlKHEuZnJv\nbShFbXBsb3llZS5jbGFzcyksIGV4YW1wbGUsIHN0eWxlLnNldEV4Y2x1ZGVE\nZWZhdWx0KGZhbHNlKSwgZXhjbHVkZXMpKTsKICAgICAgICAKICAgICAgICBl\neGVjdXRlQW5kQ29tcGFyZVNRTChxLCAiV0hFUkUgKHQwLnJhdGluZyA9ID8g\nQU5EIHQwLnNhbGFyeSA9ID8pIik7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVu\nY2UocSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RS\nZWxhdGlvbkZpZWxkV2l0aE5vbkRlZmF1bHRWYWx1ZSgpIHsKICAgICAgICBT\ndHJpbmcganBxbCA9ICJTRUxFQ1QgZSBGUk9NIEVtcGxveWVlIGUgV0hFUkUg\nZS5yYXRpbmc9MSBBTkQgZS5zYWxhcnk9MTEwMCBBTkQgZS5kZXBhcnRtZW50\nLm5hbWU9J0V4YW1wbGVEZXB0JyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVy\naWFRdWVyeTxFbXBsb3llZT4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEVtcGxveWVl\nLmNsYXNzKTsKICAgICAgICAKICAgICAgICBFbXBsb3llZSBleGFtcGxlID0g\nbmV3IEVtcGxveWVlKCk7CiAgICAgICAgZXhhbXBsZS5zZXRTYWxhcnkoMTEw\nMCk7CiAgICAgICAgZXhhbXBsZS5zZXRSYXRpbmcoMSk7CiAgICAgICAgRGVw\nYXJ0bWVudCBkZXB0ID0gbmV3IERlcGFydG1lbnQoKTsKICAgICAgICBkZXB0\nLnNldE5hbWUoIkV4YW1wbGVEZXB0Iik7CiAgICAgICAgZXhhbXBsZS5zZXRE\nZXBhcnRtZW50KGRlcHQpOwogICAgICAgIAogICAgICAgIAogICAgICAgIENv\nbXBhcmlzb25TdHlsZSBzdHlsZSA9IGNiLnFiZVN0eWxlKCk7CiAgICAgICAg\nQXR0cmlidXRlPD8sPz5bXSBleGNsdWRlcyA9IG51bGw7CiAgICAgICAgcS53\naGVyZShjYi5xYmUocS5mcm9tKEVtcGxveWVlLmNsYXNzKSwgZXhhbXBsZSwg\nc3R5bGUsIGV4Y2x1ZGVzKSk7CiAgICAgICAgCiAgICAgICAgZXhlY3V0ZUFu\nZENvbXBhcmVTUUwocSwgIldIRVJFICh0MS5uYW1lID0gPyBBTkQgdDAucmF0\naW5nID0gPyBBTkQgdDAuc2FsYXJ5ID0gPykiKTsKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgdGVzdFJlbGF0aW9uRmllbGRXaXRoTnVsbFZhbHVlSW5j\nbHVkZWQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGUgRlJP\nTSBFbXBsb3llZSBlIFdIRVJFIGUucmF0aW5nPTEgQU5EIGUuc2FsYXJ5PTEx\nMDAgQU5EIGUuZGVwYXJ0bWVudCBJUyBOVUxMIjsKCiAgICAgICAgQ3JpdGVy\naWFRdWVyeTxFbXBsb3llZT4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEVtcGxveWVl\nLmNsYXNzKTsKICAgICAgICAKICAgICAgICBFbXBsb3llZSBleGFtcGxlID0g\nbmV3IEVtcGxveWVlKCk7CiAgICAgICAgZXhhbXBsZS5zZXROYW1lKCJFeGFt\ncGxlRW1wbG95ZWUiKTsKICAgICAgICBleGFtcGxlLnNldFNhbGFyeSgxMTAw\nKTsKICAgICAgICBleGFtcGxlLnNldFJhdGluZygxKTsKICAgICAgICBleGFt\ncGxlLnNldERlcGFydG1lbnQobnVsbCk7CiAgICAgICAgCiAgICAgICAgQ29t\ncGFyaXNvblN0eWxlIHN0eWxlID0gY2IucWJlU3R5bGUoKTsKICAgICAgICBB\ndHRyaWJ1dGU8Pyw/PltdIGV4Y2x1ZGVzID0ge0VtcGxveWVlXy5mcmVxdWVu\ndEZsaWVyUGxhbiwgRW1wbG95ZWVfLm1hbmFnZXIsIEVtcGxveWVlXy5zcG91\nc2V9OwogICAgICAgIHEud2hlcmUoY2IucWJlKHEuZnJvbShFbXBsb3llZS5j\nbGFzcyksIGV4YW1wbGUsIHN0eWxlLnNldEV4Y2x1ZGVOdWxsKGZhbHNlKS5z\nZXRFeGNsdWRlRGVmYXVsdChmYWxzZSksIAogICAgICAgICAgICAgICAgZXhj\nbHVkZXMpKTsKICAgICAgICAKICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNR\nTChxLCAiV0hFUkUgKDEgPD4gMSBBTkQgdDAuREVQQVJUTUVOVF9ERVBUTk8g\nSVMgTlVMTCAiIAogICAgICAgICAgICAgICAgKyAiQU5EIHQwLm5hbWUgPSA/\nIEFORCB0MC5yYXRpbmcgPSA/IEFORCB0MC5zYWxhcnkgPSA/KSIpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1iZWRkZWRGaWVsZCgpIHsK\nICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgZSBGUk9NIEVtcGxveWVl\nIGUgV0hFUkUgZS5yYXRpbmc9MSBBTkQgZS5zYWxhcnk9MTEwMCBBTkQgZS5k\nZXBhcnRtZW50IElTIE5VTEwiOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEVt\ncGxveWVlPiBxID0gY2IuY3JlYXRlUXVlcnkoRW1wbG95ZWUuY2xhc3MpOwog\nICAgICAgIAogICAgICAgIEVtcGxveWVlIGV4YW1wbGUgPSBuZXcgRW1wbG95\nZWUoKTsKICAgICAgICBleGFtcGxlLnNldE5hbWUoIkV4YW1wbGVFbXBsb3ll\nZSIpOwogICAgICAgIGV4YW1wbGUuc2V0U2FsYXJ5KDExMDApOwogICAgICAg\nIGV4YW1wbGUuc2V0UmF0aW5nKDEpOwogICAgICAgIENvbnRhY3QgY29udGFj\ndCA9IG5ldyBDb250YWN0KCk7CiAgICAgICAgQWRkcmVzcyBhZGRyZXNzID0g\nbmV3IEFkZHJlc3MoKTsKICAgICAgICBhZGRyZXNzLnNldENpdHkoIlBsYW5v\nIik7CiAgICAgICAgYWRkcmVzcy5zZXRTdGF0ZSgiVFgiKTsKICAgICAgICBh\nZGRyZXNzLnNldENvdW50cnkoIlVTQSIpOwogICAgICAgIGNvbnRhY3Quc2V0\nQWRkcmVzcyhhZGRyZXNzKTsKICAgICAgICBleGFtcGxlLnNldENvbnRhY3RJ\nbmZvKGNvbnRhY3QpOwogICAgICAgIAogICAgICAgIENvbXBhcmlzb25TdHls\nZSBzdHlsZSA9IGNiLnFiZVN0eWxlKCk7CiAgICAgICAgQXR0cmlidXRlPD8s\nPz5bXSBleGNsdWRlcyA9IHtFbXBsb3llZV8uZGVwYXJ0bWVudCwgRW1wbG95\nZWVfLmZyZXF1ZW50RmxpZXJQbGFuLCAKICAgICAgICAgICAgICAgIEVtcGxv\neWVlXy5tYW5hZ2VyLCBFbXBsb3llZV8uc3BvdXNlfTsKICAgICAgICBxLndo\nZXJlKGNiLnFiZShxLmZyb20oRW1wbG95ZWUuY2xhc3MpLCBleGFtcGxlLCBz\ndHlsZSwgZXhjbHVkZXMpKTsKICAgICAgICAKICAgICAgICBleGVjdXRlQW5k\nQ29tcGFyZVNRTChxLCAiV0hFUkUgKHQxLmNpdHkgPSA/IEFORCB0MS5jb3Vu\ndHJ5ID0gPyBBTkQgdDEuc3RhdGUgPSA/ICIgCiAgICAgICAgICAgICAgICAr\nICJBTkQgdDAubmFtZSA9ID8gQU5EIHQwLnJhdGluZyA9ID8gQU5EIHQwLnNh\nbGFyeSA9ID8pIik7CiAgICB9CiAgICAKICAgIHZvaWQgZXhlY3V0ZUFuZENv\nbXBhcmVTUUwoQ3JpdGVyaWFRdWVyeTw/PiBxLCBTdHJpbmcgZXhwZWN0ZWQp\nIHsKICAgICAgICBhdWRpdG9yLmNsZWFyKCk7CiAgICAgICAgZW0uY3JlYXRl\nUXVlcnkocSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFs\ncygxLGF1ZGl0b3IuZ2V0U1FMcygpLnNpemUoKSk7CiAgICAgICAgU3RyaW5n\nIGFjdHVhbCA9IGV4dHJhY3QoIldIRVJFIiwgYXVkaXRvci5nZXRTUUxzKCku\nZ2V0KDApKTsKICAgICAgICBpZiAoZGljdCBpbnN0YW5jZW9mIERCMkRpY3Rp\nb25hcnkpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBhc3NlcnRFcXVh\nbHMoZXhwZWN0ZWQsIGFjdHVhbCk7CiAgICB9CiAgICAKICAgIFN0cmluZyBl\neHRyYWN0KFN0cmluZyBrZXksIFN0cmluZyBzKSB7CiAgICAgICAgaW50IGlu\nZGV4ID0gcy5pbmRleE9mKGtleSk7CiAgICAgICAgcmV0dXJuIGluZGV4ID09\nIC0xID8gIiIgOiBzLnN1YnN0cmluZyhpbmRleCk7CiAgICB9Cn0K\n","encoding":"base64"}

