{"sha":"f08851fba3c82d5cb9ef93ad1e43534d84172537","node_id":"MDQ6QmxvYjIwNjM2NDpmMDg4NTFmYmEzYzgyZDVjYjllZjkzYWQxZTQzNTM0ZDg0MTcyNTM3","size":31500,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f08851fba3c82d5cb9ef93ad1e43534d84172537","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\nLyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUGFyYW1ldGVyOwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuVHVwbGU7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5jcml0ZXJpYS5Dcml0ZXJpYVF1ZXJ5OwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuY3JpdGVyaWEuRXhwcmVzc2lvbjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLmNyaXRlcmlhLlBhcmFtZXRlckV4cHJlc3Npb247Cmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5Sb290OwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuY3JpdGVyaWEuU3VicXVlcnk7CgovKioKICog\nVGVzdHMgdHlwZS1zdHJpY3QgdmVyc2lvbiBvZiBDcml0ZXJpYSBBUEkuIFRo\nZSB0ZXN0IHNjZW5hcmlvcyBhcmUgYWRhcHRlZAogKiBmcm9tIFRlc3RFSkJR\nTENvbmRFeHByZXNzaW9uIGluCiAqIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5qcHFsLmV4cHJlc3Npb25zIGFuZCBUZXN0RUpCUUxGdW5jdGlv\nbiBpbgogKiBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5m\ndW5jdGlvbnMuCiAqIAogKi8KCnB1YmxpYyBjbGFzcyBUZXN0VHlwZVNhZmVD\nb25kRXhwcmVzc2lvbiBleHRlbmRzIENyaXRlcmlhVGVzdCB7CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3ROb3RoaW5nVXNpbmdDcml0ZXJpYSgpIHsKICAg\nICAgICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNUIG8gRlJPTSBDb21wVXNlciBv\nIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PENvbXBVc2VyPiBj\ncSA9IGNiLmNyZWF0ZVF1ZXJ5KENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBj\ncS5zZWxlY3QoY3EuZnJvbShDb21wVXNlci5jbGFzcykpOwogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKGNxLCBxdWVyeSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEJldHdlZW4oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nU0VMRUNUIG8ubmFtZSBGUk9NIENvbXBVc2VyIG8gIiAKICAgICAgICAgICAg\nICAgICAgICArICJXSEVSRSBvLmFnZSBCRVRXRUVOIDE5IEFORCA0MCBBTkQg\nby5jb21wdXRlck5hbWUgPSAnUEMnIjsKICAgICAgICAKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PFN0cmluZz4gY3EgPSBjYi5jcmVhdGVRdWVyeShTdHJpbmcu\nY2xhc3MpOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IG8gPSBjcS5mcm9tKENv\nbXBVc2VyLmNsYXNzKTsKICAgICAgICBjcS53aGVyZShjYi5hbmQoY2IuYmV0\nd2VlbihvLmdldChDb21wVXNlcl8uYWdlKSwgMTksIDQwKSwgCiAgICAgICAg\nICAgICAgICBjYi5lcXVhbChvLmdldChDb21wVXNlcl8uY29tcHV0ZXJOYW1l\nKSwgIlBDIikpKTsKICAgICAgICBjcS5zZWxlY3Qoby5nZXQoQ29tcFVzZXJf\nLm5hbWUpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShj\ncSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE5vdEJldHdl\nZW4oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8ubmFtZSBG\nUk9NIENvbXBVc2VyIG8gV0hFUkUgby5hZ2UgTk9UIEJFVFdFRU4gMTkgQU5E\nIDQwIEFORCBvLmNvbXB1dGVyTmFtZT0gJ1BDJyI7CgogICAgICAgIENyaXRl\ncmlhUXVlcnk8U3RyaW5nPiBjcSA9IGNiLmNyZWF0ZVF1ZXJ5KFN0cmluZy5j\nbGFzcyk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gbyA9IGNxLmZyb20oQ29t\ncFVzZXIuY2xhc3MpOwogICAgICAgIGNxLndoZXJlKGNiLmFuZChjYi5iZXR3\nZWVuKG8uZ2V0KENvbXBVc2VyXy5hZ2UpLCAxOSwgNDApLm5lZ2F0ZSgpLCAK\nICAgICAgICAgICAgICAgIGNiLmVxdWFsKG8uZ2V0KENvbXBVc2VyXy5jb21w\ndXRlck5hbWUpLCAiUEMiKSkpOwogICAgICAgIGNxLnNlbGVjdChvLmdldChD\nb21wVXNlcl8ubmFtZSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2\nYWxlbmNlKGNxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nSW5FeHByKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBvLm5h\nbWUgRlJPTSBDb21wVXNlciBvIFdIRVJFIG8uYWdlIElOICgyOSwgNDAsIDEw\nKSI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxTdHJpbmc+IGNx\nID0gY2IuY3JlYXRlUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBSb290\nPENvbXBVc2VyPiBvID0gY3EuZnJvbShDb21wVXNlci5jbGFzcyk7CiAgICAg\nICAgY3Eud2hlcmUoY2IuaW4oby5nZXQoQ29tcFVzZXJfLmFnZSkpLnZhbHVl\nKDI5KS52YWx1ZSg0MCkudmFsdWUoMTApKTsKICAgICAgICBjcS5zZWxlY3Qo\nby5nZXQoQ29tcFVzZXJfLm5hbWUpKTsKICAgICAgICAKICAgICAgICBhc3Nl\ncnRFcXVpdmFsZW5jZShjcSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdE5vdEluKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVD\nVCBvLm5hbWUgRlJPTSBDb21wVXNlciBvIFdIRVJFIG8uYWdlIE5PVCBJTiAo\nMjksIDQwLCAxMCkiOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFN0cmluZz4g\nY3EgPSBjYi5jcmVhdGVRdWVyeShTdHJpbmcuY2xhc3MpOwogICAgICAgIFJv\nb3Q8Q29tcFVzZXI+IG8gPSBjcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAg\nICAgICBjcS53aGVyZShjYi5pbihvLmdldChDb21wVXNlcl8uYWdlKSkudmFs\ndWUoMjkpLnZhbHVlKDQwKS52YWx1ZSgxMCkKICAgICAgICAgICAgLm5lZ2F0\nZSgpKTsKICAgICAgICBjcS5zZWxlY3Qoby5nZXQoQ29tcFVzZXJfLm5hbWUp\nKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjcSwganBx\nbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdExpa2UxKCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBvLmNvbXB1dGVyTmFtZSBGUk9N\nIENvbXBVc2VyIG8gIgogICAgICAgICAgICAgICAgICsgIldIRVJFIG8ubmFt\nZSBMSUtFICdTaGElJyBBTkQgby5jb21wdXRlck5hbWUgTk9UIElOICgnUEMn\nLCdMYXB0b3AnKSI7CgogICAgICAgIENyaXRlcmlhUXVlcnk8U3RyaW5nPiBj\ncSA9IGNiLmNyZWF0ZVF1ZXJ5KFN0cmluZy5jbGFzcyk7CiAgICAgICAgUm9v\ndDxDb21wVXNlcj4gbyA9IGNxLmZyb20oQ29tcFVzZXIuY2xhc3MpOwogICAg\nICAgIGNxLndoZXJlKGNiLmFuZCgKICAgICAgICAgICAgICAgICAgICBjYi5s\naWtlKG8uZ2V0KENvbXBVc2VyXy5uYW1lKSwiU2hhJSIpLCAKICAgICAgICAg\nICAgICAgICAgICBjYi5pbihvLmdldChDb21wVXNlcl8uY29tcHV0ZXJOYW1l\nKSkudmFsdWUoIlBDIikudmFsdWUoIkxhcHRvcCIpLm5lZ2F0ZSgpCiAgICAg\nICAgICAgICAgICApKTsKICAgICAgICAKICAgICAgICBjcS5zZWxlY3Qoby5n\nZXQoQ29tcFVzZXJfLmNvbXB1dGVyTmFtZSkpOwoKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShjcSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2\nb2lkIHRlc3RMaWtlMigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxF\nQ1Qgby5jb21wdXRlck5hbWUgRlJPTSBDb21wVXNlciBvICIKICAgICAgICAg\nICAgKyAiV0hFUkUgby5uYW1lIExJS0UgJ1NoYSVvXycgQU5EIG8uY29tcHV0\nZXJOYW1lIE5PVCBJTiAoJ1VOSVgnLCdET1MnKSI7CgogICAgICAgIENyaXRl\ncmlhUXVlcnk8U3RyaW5nPiBjcSA9IGNiLmNyZWF0ZVF1ZXJ5KFN0cmluZy5j\nbGFzcyk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gbyA9IGNxLmZyb20oQ29t\ncFVzZXIuY2xhc3MpOwogICAgICAgIGNxLndoZXJlKGNiLmFuZCgKICAgICAg\nICAgICAgICAgICAgICBjYi5saWtlKG8uZ2V0KENvbXBVc2VyXy5uYW1lKSwi\nU2hhJW9fIiksIAogICAgICAgICAgICAgICAgICAgIGNiLmluKG8uZ2V0KENv\nbXBVc2VyXy5jb21wdXRlck5hbWUpKS52YWx1ZSgiVU5JWCIpLnZhbHVlKCJE\nT1MiKS5uZWdhdGUoKQogICAgICAgICAgICAgICAgKSk7CiAgICAgICAgY3Eu\nc2VsZWN0KG8uZ2V0KENvbXBVc2VyXy5jb21wdXRlck5hbWUpKTsKICAgICAg\nICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjcSwganBxbCk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RMaWtlMygpIHsKICAgICAgICBT\ndHJpbmcganBxbCA9ICJTRUxFQ1Qgby5uYW1lIEZST00gQ29tcFVzZXIgbyBX\nSEVSRSBvLm5hbWUgTElLRSAnX0olJyI7CgogICAgICAgIENyaXRlcmlhUXVl\ncnk8U3RyaW5nPiBjcSA9IGNiLmNyZWF0ZVF1ZXJ5KFN0cmluZy5jbGFzcyk7\nCiAgICAgICAgUm9vdDxDb21wVXNlcj4gbyA9IGNxLmZyb20oQ29tcFVzZXIu\nY2xhc3MpOwogICAgICAgIGNxLndoZXJlKGNiLmxpa2Uoby5nZXQoQ29tcFVz\nZXJfLm5hbWUpLCJfSiUiKSk7CiAgICAgICAgY3Euc2VsZWN0KG8uZ2V0KENv\nbXBVc2VyXy5uYW1lKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZh\nbGVuY2UoY3EsIGpwcWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0TGlrZVdpdGhFc2NhcGVDaGFyYWN0ZXIoKSB7CiAgICAgICAgU3RyaW5n\nIHF1ZXJ5ID0gIlNFTEVDVCBvLm5hbWUgRlJPTSBDb21wVXNlciBvIFdIRVJF\nIG8ubmFtZSBMSUtFIDpuYW1lIEVTQ0FQRSAnfCciOwogICAgICAgIAogICAg\nICAgIENyaXRlcmlhUXVlcnk8U3RyaW5nPiBjcSA9IGNiLmNyZWF0ZVF1ZXJ5\nKFN0cmluZy5jbGFzcyk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gYyA9IGNx\nLmZyb20oQ29tcFVzZXIuY2xhc3MpOwogICAgICAgIFBhcmFtZXRlckV4cHJl\nc3Npb248U3RyaW5nPiBwYXJhbSA9IGNiLnBhcmFtZXRlcihTdHJpbmcuY2xh\nc3MsICJuYW1lIik7CiAgICAgICAgY3Eud2hlcmUoY2IubGlrZShjLmdldChD\nb21wVXNlcl8ubmFtZSksIHBhcmFtLCAnfCcpKTsKICAgICAgICBjcS5zZWxl\nY3QoYy5nZXQoQ29tcFVzZXJfLm5hbWUpKTsKICAgICAgICAKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShjcSwgcXVlcnksIG5ldyBTdHJpbmdbXXsibmFt\nZSJ9LCBuZXcgT2JqZWN0W10geyIlfF8lIn0pOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3ROdWxsRXhwcmVzc2lvbigpIHsKICAgICAgICBTdHJpbmcg\ncXVlcnkgPSAiU0VMRUNUIG8ubmFtZSBGUk9NIENvbXBVc2VyIG8gIgogICAg\nICAgICAgICAgICAgICAgICArICJXSEVSRSBvLmFnZSBJUyBOT1QgTlVMTCBB\nTkQgby5jb21wdXRlck5hbWUgPSAnUEMnIjsKICAgICAgICAKICAgICAgICBD\ncml0ZXJpYVF1ZXJ5PFN0cmluZz4gY3EgPSBjYi5jcmVhdGVRdWVyeShTdHJp\nbmcuY2xhc3MpOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IGMgPSBjcS5mcm9t\nKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBjcS53aGVyZShjYi5hbmQoY2Iu\nbm90RXF1YWwoYy5nZXQoQ29tcFVzZXJfLmFnZSksIG51bGwpLCAKICAgICAg\nICAgICAgICAgIGNiLmVxdWFsKGMuZ2V0KENvbXBVc2VyXy5jb21wdXRlck5h\nbWUpLCAiUEMiKSkpOwogICAgICAgIGNxLnNlbGVjdChjLmdldChDb21wVXNl\ncl8ubmFtZSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKGNxLCBxdWVyeSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RO\ndWxsRXhwcjJVc2luZ0NyaXRlcmlhKCkgewogICAgICAgIFN0cmluZyBxdWVy\neSA9CiAgICAgICAgICAgICJTRUxFQ1Qgby5uYW1lIEZST00gQ29tcFVzZXIg\nbyBXSEVSRSBvLmFkZHJlc3MuY291bnRyeSBJUyBOVUxMIjsKCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxTdHJpbmc+IGNxID0gY2IuY3JlYXRlUXVlcnkoU3Ry\naW5nLmNsYXNzKTsKICAgICAgICBSb290PENvbXBVc2VyPiBjID0gY3EuZnJv\nbShDb21wVXNlci5jbGFzcyk7CiAgICAgICAgY3Eud2hlcmUoY2IuZXF1YWwo\nYy5nZXQoQ29tcFVzZXJfLmFkZHJlc3MpLmdldChBZGRyZXNzXy5jb3VudHJ5\nKSwKICAgICAgICAgICAgbnVsbCkpOwogICAgICAgIGNxLnNlbGVjdChjLmdl\ndChDb21wVXNlcl8ubmFtZSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVx\ndWl2YWxlbmNlKGNxLCBxdWVyeSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2\nb2lkIHRlc3RJc0VtcHR5RXhwclVzaW5nQ3JpdGVyaWEoKSB7CiAgICAgICAg\nU3RyaW5nIHF1ZXJ5ID0gIlNFTEVDVCBvLm5hbWUgRlJPTSBDb21wVXNlciBv\nIFdIRVJFIG8ubmlja25hbWVzIElTIE5PVCBFTVBUWSI7CgogICAgICAgIENy\naXRlcmlhUXVlcnk8U3RyaW5nPiBjcSA9IGNiLmNyZWF0ZVF1ZXJ5KFN0cmlu\nZy5jbGFzcyk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gbyA9IGNxLmZyb20o\nQ29tcFVzZXIuY2xhc3MpOwogICAgICAgIGNxLnNlbGVjdChvLmdldChDb21w\nVXNlcl8ubmFtZSkpOwogICAgICAgIGNxLndoZXJlKGNiLmlzRW1wdHkoby5n\nZXQoQ29tcFVzZXJfLm5pY2tuYW1lcykpLm5lZ2F0ZSgpKTsKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShjcSwgcXVlcnkpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0Q29uc3RydWN0b3JFeHByVXNpbmdDcml0ZXJpYSgp\nIHsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNUIE5FVyBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWEuTWFsZVVzZXIoIiAr\nCiAgICAgICAgICAgICJjLm5hbWUsIGMuY29tcHV0ZXJOYW1lLCBjLmFkZHJl\nc3MsIGMuYWdlLCBjLnVzZXJpZCkiICsKICAgICAgICAgICAgIiBGUk9NIENv\nbXBVc2VyIGMgV0hFUkUgYy5uYW1lID0gJ1NlZXRoYSciOwogICAgICAgIAog\nICAgICAgIENyaXRlcmlhUXVlcnk8TWFsZVVzZXI+IGNxID0gY2IuY3JlYXRl\nUXVlcnkoTWFsZVVzZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+\nIGMgPSBjcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBjcS53aGVy\nZShjYi5lcXVhbChjLmdldChDb21wVXNlcl8ubmFtZSksICJTZWV0aGEiKSk7\nCiAgICAgICAgY3Euc2VsZWN0KGNiLmNvbnN0cnVjdChNYWxlVXNlci5jbGFz\ncywgYy5nZXQoQ29tcFVzZXJfLm5hbWUpLCAKICAgICAgICAgICAgYy5nZXQo\nQ29tcFVzZXJfLmNvbXB1dGVyTmFtZSksIGMuZ2V0KENvbXBVc2VyXy5hZGRy\nZXNzKSwKICAgICAgICAgICAgYy5nZXQoQ29tcFVzZXJfLmFnZSksIGMuZ2V0\nKENvbXBVc2VyXy51c2VyaWQpKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UoY3EsIHF1ZXJ5KTsKICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RDb25jYXRTdWJTdHJpbmdGdW5jMSgpIHsKICAgICAgICBTdHJpbmcg\ncXVlcnkgPSAic2VsZWN0ICIgKwogICAgICAgICAgICAiQ09OQ0FUKCdBYmxh\naHVtJywgU1VCU1RSSU5HKGUubmFtZSwgTE9DQVRFKCdlJywgZS5uYW1lKSwg\nNCkpICIgKwogICAgICAgICAgICAiRnJvbSBDb21wVXNlciBlIFdIRVJFIGUu\nbmFtZT0nU2VldGhhJyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxTdHJpbmc+\nIGNxID0gY2IuY3JlYXRlUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBS\nb290PENvbXBVc2VyPiBlID0gY3EuZnJvbShDb21wVXNlci5jbGFzcyk7CiAg\nICAgICAgY3Euc2VsZWN0KAogICAgICAgICAgICBjYi5jb25jYXQoIkFibGFo\ndW0iLCAKICAgICAgICAgICAgICAgIGNiLnN1YnN0cmluZygKICAgICAgICAg\nICAgICAgICAgICBlLmdldChDb21wVXNlcl8ubmFtZSksIAogICAgICAgICAg\nICAgICAgICAgIGNiLmxvY2F0ZShlLmdldChDb21wVXNlcl8ubmFtZSksICJl\nIiksIAogICAgICAgICAgICAgICAgICAgIGNiLmxpdGVyYWwoNCkKICAgICAg\nICAgICAgICAgICApCiAgICAgICAgICAgICApCiAgICAgICAgKTsKICAgICAg\nICBjcS53aGVyZShjYi5lcXVhbChlLmdldChDb21wVXNlcl8ubmFtZSksICJT\nZWV0aGEiKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2Uo\nY3EsIHF1ZXJ5KTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdENv\nbmNhdFN1YlN0cmluZ0Z1bmMyKCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9\nICJzZWxlY3QgZS5hZGRyZXNzIEZyb20gQ29tcFVzZXIgZSB3aGVyZSAiICsK\nICAgICAgICAgICAgImUubmFtZSA9ICdTZWV0aGEnIEFORCBlLmNvbXB1dGVy\nTmFtZSA9ICIgKwogICAgICAgICAgICAiQ09OQ0FUKCdBYmxhaHVtJywgU1VC\nU1RSSU5HKGUubmFtZSwgTE9DQVRFKCdlJywgZS5uYW1lKSwgNCkpICI7CiAg\nICAgICAgQ3JpdGVyaWFRdWVyeTxBZGRyZXNzPiBjcSA9IGNiLmNyZWF0ZVF1\nZXJ5KEFkZHJlc3MuY2xhc3MpOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IGUg\nPSBjcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBjcS5zZWxlY3Qo\nZS5nZXQoQ29tcFVzZXJfLmFkZHJlc3MpKTsKICAgICAgICBjcS53aGVyZShj\nYi5hbmQoY2IuZXF1YWwoZS5nZXQoQ29tcFVzZXJfLm5hbWUpLCAiU2VldGhh\nIiksCiAgICAgICAgICAgICAgICBjYi5lcXVhbChlLmdldChDb21wVXNlcl8u\nY29tcHV0ZXJOYW1lKSwKICAgICAgICAgICAgICAgIGNiLmNvbmNhdCgiQWJs\nYWh1bSIsIAogICAgICAgICAgICAgICAgICAgIGNiLnN1YnN0cmluZyhlLmdl\ndChDb21wVXNlcl8ubmFtZSksIAogICAgICAgICAgICAgICAgICAgIGNiLmxv\nY2F0ZShlLmdldChDb21wVXNlcl8ubmFtZSksICJlIiksIGNiLmxpdGVyYWwo\nNCkpKSkpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShj\ncSwgcXVlcnkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RDb25jYXRT\ndWJTdHJpbmdGdW5jMygpIHsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAic2Vs\nZWN0ICIgKwogICAgICAgICAgICAiQ09OQ0FUKCdYWVonLCBTVUJTVFJJTkco\nZS5uYW1lLCBMT0NBVEUoJ2UnLCBlLm5hbWUpKSkgIiArCiAgICAgICAgICAg\nICJGcm9tIENvbXBVc2VyIGUgV0hFUkUgZS5uYW1lPSdBYmxhaHVtZWV0aCci\nOwogICAgICAgIENyaXRlcmlhUXVlcnk8Pz4gY3EgPSBjYi5jcmVhdGVRdWVy\neSgpOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IGUgPSBjcS5mcm9tKENvbXBV\nc2VyLmNsYXNzKTsKICAgICAgICBjcS5tdWx0aXNlbGVjdChjYi5jb25jYXQo\nIlhZWiIsIGNiLnN1YnN0cmluZyhlLmdldChDb21wVXNlcl8ubmFtZSksIAog\nICAgICAgICAgICAgICAgIGNiLmxvY2F0ZShlLmdldChDb21wVXNlcl8ubmFt\nZSksICJlIikpKSk7CiAgICAgICAgY3Eud2hlcmUoY2IuZXF1YWwoZS5nZXQo\nQ29tcFVzZXJfLm5hbWUpLCAiQWJsYWh1bWVldGgiKSk7CiAgICAgICAgCiAg\nICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoY3EsIHF1ZXJ5KTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0Q29uY2F0U3ViU3RyaW5nRnVuYzQoKSB7CiAg\nICAgICAgU3RyaW5nIHF1ZXJ5ID0gInNlbGVjdCBlLmFnZSBmcm9tIENvbXBV\nc2VyIGUgd2hlcmUgIiArIAogICAgICAgICAgICAiZS5uYW1lID0gJ1NlZXRo\nYScgQU5EIGUuY29tcHV0ZXJOYW1lID0gIiArCiAgICAgICAgICAgICJDT05D\nQVQoJ1hZWicsIFNVQlNUUklORyhlLm5hbWUsIExPQ0FURSgnZScsIGUubmFt\nZSkpKSAiOwogICAgICAgIENyaXRlcmlhUXVlcnk8Pz4gcSA9IGNiLmNyZWF0\nZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gZSA9IHEuZnJvbShD\nb21wVXNlci5jbGFzcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChlLmdldChD\nb21wVXNlcl8uYWdlKSk7CiAgICAgICAgcS53aGVyZShjYi5hbmQoY2IuZXF1\nYWwoZS5nZXQoQ29tcFVzZXJfLm5hbWUpLCAiU2VldGhhIiksCiAgICAgICAg\nICAgICAgICBjYi5lcXVhbChlLmdldChDb21wVXNlcl8uY29tcHV0ZXJOYW1l\nKSwKICAgICAgICAgICAgICAgIGNiLmNvbmNhdCgiWFlaIiwgY2Iuc3Vic3Ry\naW5nKGUuZ2V0KENvbXBVc2VyXy5uYW1lKSwgCiAgICAgICAgICAgICAgICBj\nYi5sb2NhdGUoZS5nZXQoQ29tcFVzZXJfLm5hbWUpLCAiZSIpKSkpKSk7CiAg\nICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwgcXVlcnkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RDb25jYXRGdW5jKCkgewogICAg\nICAgIFN0cmluZyBxdWVyeSA9ICJzZWxlY3QgIiArCiAgICAgICAgICAgICJD\nT05DQVQoJycsICcnKSBGcm9tIENvbXBVc2VyIGUgV0hFUkUgZS5uYW1lPSdT\nZWV0aGEnIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PD8+IHEgPSBjYi5jcmVh\ndGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IGUgPSBxLmZyb20o\nQ29tcFVzZXIuY2xhc3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoY2IuY29u\nY2F0KCIiLCBjYi5saXRlcmFsKCIiKSkpOwogICAgICAgIHEud2hlcmUoY2Iu\nZXF1YWwoZS5nZXQoQ29tcFVzZXJfLm5hbWUpLCAiU2VldGhhIikpOwogICAg\nICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIHF1ZXJ5KTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VHJpbUZ1bmMxKCkgewogICAgICAg\nIFN0cmluZyBxdWVyeSA9ICJzZWxlY3QgVHJpbShlLmNvbXB1dGVyTmFtZSkg\nRnJvbSBDb21wVXNlciBlICIgKwogICAgICAgIAkJIldIRVJFIGUubmFtZT0n\nU2hhbm5vbiAnIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PD8+IHEgPSBjYi5j\ncmVhdGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IGUgPSBxLmZy\nb20oQ29tcFVzZXIuY2xhc3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoY2Iu\ndHJpbShlLmdldChDb21wVXNlcl8uY29tcHV0ZXJOYW1lKSkpOwogICAgICAg\nIHEud2hlcmUoY2IuZXF1YWwoZS5nZXQoQ29tcFVzZXJfLm5hbWUpLCAiU2hh\nbm5vbiAiKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2Uo\ncSwgcXVlcnkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RUcmltRnVu\nYzIoKSB7CiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gInNlbGVjdCBlLmNvbXB1\ndGVyTmFtZSBGcm9tIENvbXBVc2VyIGUgd2hlcmUgIiArIAogICAgICAgICAg\nICAiVHJpbShlLm5hbWUpID0gJ1NoYW5ub24gJyI7CiAgICAgICAgQ3JpdGVy\naWFRdWVyeTw/PiBxID0gY2IuY3JlYXRlUXVlcnkoKTsKICAgICAgICBSb290\nPENvbXBVc2VyPiBlID0gcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAgICAg\nICBxLndoZXJlKGNiLmVxdWFsKGNiLnRyaW0oZS5nZXQoQ29tcFVzZXJfLm5h\nbWUpKSwgIlNoYW5ub24iKSk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChlLmdl\ndChDb21wVXNlcl8uY29tcHV0ZXJOYW1lKSk7CiAgICAgICAgCiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UocSwgcXVlcnkpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RMb3dlckZ1bmMxKCkgewogICAgICAgIFN0cmluZyBxdWVy\neSA9ICJzZWxlY3QgTE9XRVIoZS5uYW1lKSBGcm9tIENvbXBVc2VyIGUgV0hF\nUkUgIiArCiAgICAgICAgCQkiZS5jb21wdXRlck5hbWU9J1VOSVgnIjsKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PD8+IHEgPSBjYi5jcmVhdGVRdWVyeSgpOwog\nICAgICAgIFJvb3Q8Q29tcFVzZXI+IGUgPSBxLmZyb20oQ29tcFVzZXIuY2xh\nc3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoY2IubG93ZXIoZS5nZXQoQ29t\ncFVzZXJfLm5hbWUpKSk7CiAgICAgICAgcS53aGVyZShjYi5lcXVhbChlLmdl\ndChDb21wVXNlcl8uY29tcHV0ZXJOYW1lKSwgIlVOSVgiKSk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwgcXVlcnkpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RMb3dlckZ1bmMyKCkgewogICAgICAgIFN0\ncmluZyBxdWVyeSA9ICJzZWxlY3QgZS5hZ2UgRnJvbSBDb21wVXNlciBlIHdo\nZXJlIExPV0VSKGUubmFtZSkiICsKICAgICAgICAJCSIgPSd1Z28nIjsKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PEludGVnZXI+IHEgPSBjYi5jcmVhdGVRdWVy\neShJbnRlZ2VyLmNsYXNzKTsKICAgICAgICBSb290PENvbXBVc2VyPiBlID0g\ncS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBxLndoZXJlKGNiLmVx\ndWFsKGNiLmxvd2VyKGUuZ2V0KENvbXBVc2VyXy5uYW1lKSksICJ1Z28iKSk7\nCiAgICAgICAgcS5zZWxlY3QoZS5nZXQoQ29tcFVzZXJfLmFnZSkpOwogICAg\nICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIHF1ZXJ5KTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VXBwZXJGdW5jMSgpIHsKICAgICAg\nICBTdHJpbmcgcXVlcnkgPSAic2VsZWN0IFVQUEVSKGUubmFtZSkgRnJvbSBD\nb21wVXNlciBlIFdIRVJFICIgKwogICAgICAgIAkJImUuY29tcHV0ZXJOYW1l\nPSdQQyciOwogICAgICAgIENyaXRlcmlhUXVlcnk8U3RyaW5nPiBxID0gY2Iu\nY3JlYXRlUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBSb290PENvbXBV\nc2VyPiBlID0gcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBxLnNl\nbGVjdChjYi51cHBlcihlLmdldChDb21wVXNlcl8ubmFtZSkpKTsKICAgICAg\nICBxLndoZXJlKGNiLmVxdWFsKGUuZ2V0KENvbXBVc2VyXy5jb21wdXRlck5h\nbWUpLCAiUEMiKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVu\nY2UocSwgcXVlcnkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RVcHBl\nckZ1bmMyKCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9ICJzZWxlY3QgZS5h\nZ2UgZnJvbSBDb21wVXNlciBlIHdoZXJlICIgKwogICAgICAgICAgICAiVVBQ\nRVIoZS5uYW1lKT0nVUdPJyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxJbnRl\nZ2VyPiBxID0gY2IuY3JlYXRlUXVlcnkoSW50ZWdlci5jbGFzcyk7CiAgICAg\nICAgUm9vdDxDb21wVXNlcj4gZSA9IHEuZnJvbShDb21wVXNlci5jbGFzcyk7\nCiAgICAgICAgcS53aGVyZShjYi5lcXVhbChjYi51cHBlcihlLmdldChDb21w\nVXNlcl8ubmFtZSkpLCAiVUdPIikpOwogICAgICAgIHEuc2VsZWN0KGUuZ2V0\nKENvbXBVc2VyXy5hZ2UpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVp\ndmFsZW5jZShxLCBxdWVyeSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndExlbmd0aEZ1bmMoKSB7CiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVD\nVCBvLm5hbWUgRlJPTSBDb21wVXNlciBvICIgKyAKICAgICAgICAgICAgIldI\nRVJFIExFTkdUSChvLmFkZHJlc3MuY291bnRyeSkgPSAzIjsKICAgICAgICAK\nICAgICAgICBDcml0ZXJpYVF1ZXJ5PFN0cmluZz4gcSA9IGNiLmNyZWF0ZVF1\nZXJ5KFN0cmluZy5jbGFzcyk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gZSA9\nIHEuZnJvbShDb21wVXNlci5jbGFzcyk7CiAgICAgICAgcS53aGVyZShjYi5l\ncXVhbChjYi5sZW5ndGgoZS5nZXQoQ29tcFVzZXJfLmFkZHJlc3MpLgogICAg\nICAgICAgICBnZXQoQWRkcmVzc18uY291bnRyeSkpLCAzKSk7CiAgICAgICAg\ncS5zZWxlY3QoZS5nZXQoQ29tcFVzZXJfLm5hbWUpKTsKICAgICAgICAKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBxdWVyeSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdEFyaXRobUZ1bmMxKCkgewogICAgICAgIFN0cmlu\nZyBxdWVyeSA9ICJzZWxlY3QgQUJTKGUuYWdlKSBGcm9tIENvbXBVc2VyIGUg\nV0hFUkUgZS5uYW1lPSdTZWV0aGEnIjsKICAgICAgICAKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PEludGVnZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShJbnRlZ2Vy\nLmNsYXNzKTsKICAgICAgICBSb290PENvbXBVc2VyPiBlID0gcS5mcm9tKENv\nbXBVc2VyLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChjYi5hYnMoZS5nZXQo\nQ29tcFVzZXJfLmFnZSkpKTsKICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGUu\nZ2V0KENvbXBVc2VyXy5uYW1lKSwgIlNlZXRoYSIpKTsKICAgICAgICAKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBxdWVyeSk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3RBcml0aG1GdW5jMigpIHsKICAgICAgICBT\ndHJpbmcgcXVlcnkgPSAic2VsZWN0IFNRUlQoZS5hZ2UpIEZyb20gQ29tcFVz\nZXIgZSBXSEVSRSBlLm5hbWU9J1NlZXRoYSciOwogICAgICAgIAogICAgICAg\nIENyaXRlcmlhUXVlcnk8RG91YmxlPiBxID0gY2IuY3JlYXRlUXVlcnkoRG91\nYmxlLmNsYXNzKTsKICAgICAgICBSb290PENvbXBVc2VyPiBlID0gcS5mcm9t\nKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChjYi5zcXJ0KGUu\nZ2V0KENvbXBVc2VyXy5hZ2UpKSk7CiAgICAgICAgcS53aGVyZShjYi5lcXVh\nbChlLmdldChDb21wVXNlcl8ubmFtZSksICJTZWV0aGEiKSk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwgcXVlcnkpOwogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0QXJpdGhtRnVuYzMoKSB7CiAgICAg\nICAgU3RyaW5nIHF1ZXJ5ID0gInNlbGVjdCBNT0QoZS5hZ2UsIDQpIEZyb20g\nQ29tcFVzZXIgZSBXSEVSRSBlLm5hbWU9J1NlZXRoYSciOwogICAgICAgIAog\nICAgICAgIENyaXRlcmlhUXVlcnk8SW50ZWdlcj4gcSA9IGNiLmNyZWF0ZVF1\nZXJ5KEludGVnZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IGUg\nPSBxLmZyb20oQ29tcFVzZXIuY2xhc3MpOwogICAgICAgIHEuc2VsZWN0KGNi\nLm1vZChlLmdldChDb21wVXNlcl8uYWdlKSwgNCkpOwogICAgICAgIHEud2hl\ncmUoY2IuZXF1YWwoZS5nZXQoQ29tcFVzZXJfLm5hbWUpLCAiU2VldGhhIikp\nOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIHF1ZXJ5\nKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEFyaXRobUZ1bmM0\nKCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9ICJTRUxFQ1QgZS5uYW1lIEZS\nT00gQ29tcFVzZXIgZSBXSEVSRSBTSVpFKGUubmlja25hbWVzKSA9IDYiOwog\nICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8U3RyaW5nPiBxID0gY2Iu\nY3JlYXRlUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBSb290PENvbXBV\nc2VyPiBlID0gcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBxLndo\nZXJlKGNiLmVxdWFsKGNiLnNpemUoZS5nZXQoQ29tcFVzZXJfLm5pY2tuYW1l\ncykpLCA2KSk7CiAgICAgICAgcS5zZWxlY3QoZS5nZXQoQ29tcFVzZXJfLm5h\nbWUpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBx\ndWVyeSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEdyb3VwQnlIYXZp\nbmdDbGF1c2UoKSB7CiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVDVCBj\nLm5hbWUgRlJPTSBDb21wVXNlciBjIEdST1VQIEJZIGMubmFtZSBIQVZJTkcg\nYy5uYW1lIExJS0UgJ1MlJyI7CgogICAgICAgIENyaXRlcmlhUXVlcnk8U3Ry\naW5nPiBxID0gY2IuY3JlYXRlUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAg\nICBSb290PENvbXBVc2VyPiBlID0gcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsK\nICAgICAgICBxLmdyb3VwQnkoZS5nZXQoQ29tcFVzZXJfLm5hbWUpKTsKICAg\nICAgICBxLmhhdmluZyhjYi5saWtlKGUuZ2V0KENvbXBVc2VyXy5uYW1lKSwg\nIlMlIikpOwogICAgICAgIHEuc2VsZWN0KGUuZ2V0KENvbXBVc2VyXy5uYW1l\nKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwgcXVl\ncnkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RPcmRlckJ5Q2xhdXNl\nKCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9ICJTRUxFQ1QgYy5uYW1lIEZS\nT00gQ29tcFVzZXIgYyBXSEVSRSBjLm5hbWUgTElLRSAnUyUnIE9SREVSIEJZ\nIGMubmFtZSI7CgogICAgICAgIENyaXRlcmlhUXVlcnk8U3RyaW5nPiBxID0g\nY2IuY3JlYXRlUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBSb290PENv\nbXBVc2VyPiBlID0gcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBx\nLndoZXJlKGNiLmxpa2UoZS5nZXQoQ29tcFVzZXJfLm5hbWUpLCAiUyUiKSk7\nCiAgICAgICAgcS5zZWxlY3QoZS5nZXQoQ29tcFVzZXJfLm5hbWUpKTsKICAg\nICAgICBxLm9yZGVyQnkoY2IuYXNjKGUuZ2V0KENvbXBVc2VyXy5uYW1lKSkp\nOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIHF1ZXJ5\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0QVZHQWdncmVnRnVuYygp\nIHsKICAgICAgICAvL1RvIGJlIFRlc3RlZDogQVZHLCBDT1VOVCwgTUFYLCBN\nSU4sIFNVTQogICAgICAgIFN0cmluZyBxdWVyeSA9ICJTRUxFQ1QgQVZHKGUu\nYWdlKSBGUk9NIENvbXBVc2VyIGUiOwogICAgICAgIAogICAgICAgIENyaXRl\ncmlhUXVlcnk8RG91YmxlPiBxID0gY2IuY3JlYXRlUXVlcnkoRG91YmxlLmNs\nYXNzKTsKICAgICAgICBSb290PENvbXBVc2VyPiBlID0gcS5mcm9tKENvbXBV\nc2VyLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChjYi5hdmcoZS5nZXQoQ29t\ncFVzZXJfLmFnZSkpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFs\nZW5jZShxLCBxdWVyeSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdENP\nVU5UQWdncmVnRnVuYygpIHsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VM\nRUNUIENPVU5UKGMubmFtZSkgRlJPTSBDb21wVXNlciBjIjsKCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxMb25nPiBxID0gY2IuY3JlYXRlUXVlcnkoTG9uZy5j\nbGFzcyk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gZSA9IHEuZnJvbShDb21w\nVXNlci5jbGFzcyk7CiAgICAgICAgcS5zZWxlY3QoY2IuY291bnQoZS5nZXQo\nQ29tcFVzZXJfLm5hbWUpKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1\naXZhbGVuY2UocSwgcXVlcnkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RNQVhBZ2dyZWdGdW5jKCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9ICJT\nRUxFQ1QgRElTVElOQ1QgTUFYKGMuYWdlKSBGUk9NIENvbXBVc2VyIGMiOwoK\nICAgICAgICBDcml0ZXJpYVF1ZXJ5PEludGVnZXI+IHEgPSBjYi5jcmVhdGVR\ndWVyeShJbnRlZ2VyLmNsYXNzKTsKICAgICAgICBSb290PENvbXBVc2VyPiBl\nID0gcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChj\nYi5tYXgoZS5nZXQoQ29tcFVzZXJfLmFnZSkpKS5kaXN0aW5jdCh0cnVlKTsK\nICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBxdWVyeSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE1JTkFnZ3JlZ0Z1bmMoKSB7\nCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVDVCBESVNUSU5DVCBNSU4o\nYy5hZ2UpIEZST00gQ29tcFVzZXIgYyI7CgogICAgICAgIENyaXRlcmlhUXVl\ncnk8SW50ZWdlcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEludGVnZXIuY2xhc3Mp\nOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IGUgPSBxLmZyb20oQ29tcFVzZXIu\nY2xhc3MpOwogICAgICAgIHEuc2VsZWN0KGNiLm1pbihlLmdldChDb21wVXNl\ncl8uYWdlKSkpLmRpc3RpbmN0KHRydWUpOwogICAgICAgIAogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKHEsIHF1ZXJ5KTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0U1VNQWdncmVnRnVuYygpIHsKICAgICAgICBTdHJpbmcgcXVl\ncnkgPSAiU0VMRUNUIFNVTShjLmFnZSkgRlJPTSBDb21wVXNlciBjIjsKCiAg\nICAgICAgQ3JpdGVyaWFRdWVyeTxJbnRlZ2VyPiBxID0gY2IuY3JlYXRlUXVl\ncnkoSW50ZWdlci5jbGFzcyk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gZSA9\nIHEuZnJvbShDb21wVXNlci5jbGFzcyk7CiAgICAgICAgcS5zZWxlY3QoY2Iu\nc3VtKGUuZ2V0KENvbXBVc2VyXy5hZ2UpKSk7CiAgICAgICAgCiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UocSwgcXVlcnkpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RUeXBlRXhwcmVzc2lvbjEoKSB7CiAgICAgICAgU3RyaW5n\nIGpwcWwgPSAiU0VMRUNUIGUgRlJPTSBDb21wVXNlciBlIHdoZXJlIFRZUEUo\nZSkgaW4gKDphLCA6YikgT1JERVIgQnkgZS5uYW1lIjsKICAgICAgICAKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PENvbXBVc2VyPiBjcSA9IGNiLmNyZWF0ZVF1\nZXJ5KENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBSb290PENvbXBVc2VyPiBl\nID0gY3EuZnJvbShDb21wVXNlci5jbGFzcyk7CiAgICAgICAgY3Euc2VsZWN0\nKGUpOwogICAgICAgIFBhcmFtZXRlcjxDbGFzcz4gcGFyYW0xID0gY2IucGFy\nYW1ldGVyKENsYXNzLmNsYXNzLCAiYSIpOwogICAgICAgIFBhcmFtZXRlcjxD\nbGFzcz4gcGFyYW0yID0gY2IucGFyYW1ldGVyKENsYXNzLmNsYXNzLCAiYiIp\nOwogICAgICAgIGNxLndoZXJlKGUudHlwZSgpLmluKHBhcmFtMSwgcGFyYW0y\nKSk7CiAgICAgICAgY3Eub3JkZXJCeShjYi5hc2MoZS5nZXQoQ29tcFVzZXJf\nLm5hbWUpKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2Uo\nY3EsIGpwcWwsIG5ldyBTdHJpbmdbXXsiYSIsImIifSwgCiAgICAgICAgICAg\nICBuZXcgQ2xhc3NbXXtNYWxlVXNlci5jbGFzcyxGZW1hbGVVc2VyLmNsYXNz\nfSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFR5cGVFeHByZXNzaW9u\nMigpIHsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNUIFRZUEUoZSkg\nRlJPTSBDb21wVXNlciBlIHdoZXJlIFRZUEUoZSkgPD4gOnQiOwogICAgICAg\nIAogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVhdGVU\ndXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gZSA9IHEuZnJv\nbShDb21wVXNlci5jbGFzcyk7CiAgICAgICAgUGFyYW1ldGVyPENsYXNzPiBw\nYXJhbTEgPSBjYi5wYXJhbWV0ZXIoQ2xhc3MuY2xhc3MsICJ0Iik7CiAgICAg\nICAgRXhwcmVzc2lvbjxDbGFzczw/IGV4dGVuZHMgQ29tcFVzZXI+PiBldHlw\nZSA9IGUudHlwZSgpOwogICAgICAgIC8vIGhvdyB0byBzcGVjaWZ5IHRoZSBm\nb2xsb3dpbmcKICAgICAgICBxLm11bHRpc2VsZWN0KGUudHlwZSgpKTsKICAg\nICAgICBxLndoZXJlKGNiLmVxdWFsKGUudHlwZSgpLCBwYXJhbTEpLm5lZ2F0\nZSgpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBx\ndWVyeSwgbmV3IFN0cmluZ1tdeyJ0In0sIG5ldyBDbGFzc1tde01hbGVVc2Vy\nLmNsYXNzfSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFR5cGVFeHBy\nZXNzaW9uMygpIHsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNUIGUs\nIEZlbWFsZVVzZXIsIGEgRlJPTSBBZGRyZXNzIGEsIEZlbWFsZVVzZXIgZSB3\naGVyZSBlLmFkZHJlc3MgSVMgTk9UIE5VTEwiOwogICAgICAgIAogICAgICAg\nIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5\nKCk7CiAgICAgICAgUm9vdDxBZGRyZXNzPiBhID0gcS5mcm9tKEFkZHJlc3Mu\nY2xhc3MpOwogICAgICAgIFJvb3Q8RmVtYWxlVXNlcj4gZSA9IHEuZnJvbShG\nZW1hbGVVc2VyLmNsYXNzKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGUsIGNi\nLmxpdGVyYWwoRmVtYWxlVXNlci5jbGFzcyksIGEpOwogICAgICAgIHEud2hl\ncmUoZS5nZXQoRmVtYWxlVXNlcl8uYWRkcmVzcykuaXNOb3ROdWxsKCkpOwog\nICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIHF1ZXJ5KTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VHlwZUV4cHJlc3Npb240KCkg\newogICAgICAgIFN0cmluZyBxdWVyeSA9ICJTRUxFQ1QgZSBGUk9NIENvbXBV\nc2VyIGUgd2hlcmUgVFlQRShlKSA9IE1hbGVVc2VyIjsKICAgICAgICAKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PENvbXBVc2VyPiBjcSA9IGNiLmNyZWF0ZVF1\nZXJ5KENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBSb290PENvbXBVc2VyPiBl\nID0gY3EuZnJvbShDb21wVXNlci5jbGFzcyk7CiAgICAgICAgY3Euc2VsZWN0\nKGUpOwogICAgICAgIGNxLndoZXJlKGNiLmVxdWFsKGUudHlwZSgpLCBjYi5s\naXRlcmFsKE1hbGVVc2VyLmNsYXNzKSkpOwogICAgICAgIAogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKGNxLCBxdWVyeSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdFR5cGVFeHByZXNzaW9uNSgpIHsKICAgICAgICBTdHJpbmcg\ncXVlcnkgPSAiU0VMRUNUIGUgRlJPTSBDb21wVXNlciBlIHdoZXJlIFRZUEUo\nZSkgaW4gKE1hbGVVc2VyKSI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFR\ndWVyeTxDb21wVXNlcj4gY3EgPSBjYi5jcmVhdGVRdWVyeShDb21wVXNlci5j\nbGFzcyk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gZSA9IGNxLmZyb20oQ29t\ncFVzZXIuY2xhc3MpOwogICAgICAgIGNxLndoZXJlKGNiLmluKGUudHlwZSgp\nKS52YWx1ZShNYWxlVXNlci5jbGFzcykpOwogICAgICAgIAogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKGNxLCBxdWVyeSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdFR5cGVFeHByZXNzaW9uNigpIHsKICAgICAgICBTdHJpbmcg\ncXVlcnkgPSAiU0VMRUNUIGUgRlJPTSBDb21wVXNlciBlIHdoZXJlIFRZUEUo\nZSkgbm90IGluICIgKwogICAgICAgICAgICAiKE1hbGVVc2VyLCBGZW1hbGVV\nc2VyKSI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDb21wVXNl\ncj4gY3EgPSBjYi5jcmVhdGVRdWVyeShDb21wVXNlci5jbGFzcyk7CiAgICAg\nICAgUm9vdDxDb21wVXNlcj4gZSA9IGNxLmZyb20oQ29tcFVzZXIuY2xhc3Mp\nOwogICAgICAgIGNxLndoZXJlKGNiLmluKGUudHlwZSgpKS52YWx1ZShNYWxl\nVXNlci5jbGFzcykudmFsdWUoRmVtYWxlVXNlci5jbGFzcykKICAgICAgICAg\nICAgICAgIC5uZWdhdGUoKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1\naXZhbGVuY2UoY3EsIHF1ZXJ5KTsKICAgIH0KCiAgICAKICAgIHB1YmxpYyB2\nb2lkIHRlc3RUeXBlRXhwcmVzc2lvbjcoKSB7CiAgICAgICAgU3RyaW5nIHF1\nZXJ5ID0gIlNFTEVDVCBUWVBFKGEuYikgRlJPTSBBIGEiOwogICAgICAgIENy\naXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7\nCiAgICAgICAgUm9vdDxBPiBhID0gcS5mcm9tKEEuY2xhc3MpOwogICAgICAg\nIHEubXVsdGlzZWxlY3QoYS5nZXQoQV8uYikudHlwZSgpKTsKICAgICAgICAK\nICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBxdWVyeSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdFR5cGVFeHByZXNzaW9uOCgpIHsKICAgICAg\nICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNUIE1hbGVVc2VyIEZST00gQSBhIjsK\nICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PENsYXNzPiBxID0gY2Iu\nY3JlYXRlUXVlcnkoQ2xhc3MuY2xhc3MpOwogICAgICAgIFJvb3Q8QT4gYSA9\nIHEuZnJvbShBLmNsYXNzKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGNiLmxp\ndGVyYWwoTWFsZVVzZXIuY2xhc3MpKTsKICAgICAgICAKICAgICAgICBhc3Nl\ncnRFcXVpdmFsZW5jZShxLCBxdWVyeSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdFR5cGVFeHByZXNzaW9uOSgpIHsKICAgICAgICBTdHJpbmcgcXVl\ncnkgPSAiU0VMRUNUICIKICAgICAgICAgICAgICAgICsgIiBDQVNFIFRZUEUo\nZSkgV0hFTiBGZW1hbGVVc2VyIFRIRU4gJ0ZlbWFsZScgIgogICAgICAgICAg\nICAgICAgKyAiIEVMU0UgJ01hbGUnIEVORCBGUk9NIENvbXBVc2VyIGUiOwog\nICAgICAgIENyaXRlcmlhUXVlcnk8T2JqZWN0PiBxID0gY2IuY3JlYXRlUXVl\ncnkoKTsKICAgICAgICBSb290PENvbXBVc2VyPiBlID0gcS5mcm9tKENvbXBV\nc2VyLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChjYi5zZWxlY3RDYXNlKGUu\ndHlwZSgpKQogICAgICAgICAgICAgICAgICAgIC53aGVuKEZlbWFsZVVzZXIu\nY2xhc3MsICJGZW1hbGUiKQogICAgICAgICAgICAgICAgICAgIC5vdGhlcndp\nc2UoIk1hbGUiKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVu\nY2UocSwgcXVlcnkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RDb2Fs\nZXNjZUV4cHJlc3Npb25zKCkgewogICAgICAgICBTdHJpbmcgcXVlcnkgPSAi\nU0VMRUNUIGUubmFtZSwgQ09BTEVTQ0UgKGUuYWRkcmVzcy5jb3VudHJ5LCAn\nVW5rbm93bicpIEZST00gQ29tcFVzZXIgZSBPUkRFUiBCWSBlLm5hbWUgREVT\nQyI7CgogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVh\ndGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gZSA9IHEu\nZnJvbShDb21wVXNlci5jbGFzcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChl\nLmdldChDb21wVXNlcl8ubmFtZSksIAogICAgICAgICAgICAgICAgICAgICAg\nY2IuY29hbGVzY2UoKS52YWx1ZShlLmdldChDb21wVXNlcl8uYWRkcmVzcyku\nZ2V0KEFkZHJlc3NfLmNvdW50cnkpKS52YWx1ZSgiVW5rbm93biIpKTsKICAg\nICAgICBxLm9yZGVyQnkoY2IuZGVzYyhlLmdldChDb21wVXNlcl8ubmFtZSkp\nKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBxdWVy\neSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE51bGxJZkV4cHJlc3Np\nb25zKCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9ICJTRUxFQ1QgZS5uYW1l\nLCBOVUxMSUYgKGUuYWRkcmVzcy5jb3VudHJ5LCAnVVNBJykgRlJPTSBDb21w\nVXNlciBlIE9SREVSIEJZIGUubmFtZSBERVNDIjsKICAgICAgICAKICAgICAg\nICBDcml0ZXJpYVF1ZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVy\neSgpOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IGUgPSBxLmZyb20oQ29tcFVz\nZXIuY2xhc3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoZS5nZXQoQ29tcFVz\nZXJfLm5hbWUpLCAKICAgICAgICAgICAgICAgIGNiLm51bGxpZihlLmdldChD\nb21wVXNlcl8uYWRkcmVzcykuZ2V0KEFkZHJlc3NfLmNvdW50cnkpLCAiVVNB\nIikpOwogICAgICAgIHEub3JkZXJCeShjYi5kZXNjKGUuZ2V0KENvbXBVc2Vy\nXy5uYW1lKSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKHEsIHF1ZXJ5KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2ltcGxl\nQ2FzZUV4cHJlc3Npb24xKCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9ICJT\nRUxFQ1QgZS5uYW1lLCBlLmFnZSsxLCAiCiAgICAgICAgICAgICAgICArICJD\nQVNFIGUuYWRkcmVzcy5jb3VudHJ5IFdIRU4gJ1VTQScgVEhFTiAndXMnICIK\nICAgICAgICAgICAgICAgICsgIiBFTFNFICdub24tdXMnIEVORCwgZS5hZGRy\nZXNzLmNvdW50cnkgIgogICAgICAgICAgICAgICAgKyAiIEZST00gQ29tcFVz\nZXIgZSI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBsZT4g\ncSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PENvbXBV\nc2VyPiBlID0gcS5mcm9tKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBFeHBy\nZXNzaW9uPEludGVnZXI+IGNhZ2UgPSBjYi5zdW0oZS5nZXQoQ29tcFVzZXJf\nLmFnZSksIDEpOwogICAgICAgIEV4cHJlc3Npb24gZDIgPSBjYi5zZWxlY3RD\nYXNlKAogICAgICAgICAgICAgICAgZS5nZXQoQ29tcFVzZXJfLmFkZHJlc3Mp\nLmdldChBZGRyZXNzXy5jb3VudHJ5KSkud2hlbigiVVNBIiwKICAgICAgICAg\nICAgICAgICJ1cyIpLm90aGVyd2lzZSgibm9uLXVzIik7CiAgICAgICAgcS5t\ndWx0aXNlbGVjdChlLmdldChDb21wVXNlcl8ubmFtZSksIGNhZ2UsIGQyLCBl\nLmdldChDb21wVXNlcl8uYWRkcmVzcykuZ2V0KAogICAgICAgICAgICAgICAg\nQWRkcmVzc18uY291bnRyeSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVx\ndWl2YWxlbmNlKHEsIHF1ZXJ5KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0U2ltcGxlQ2FzZUV4cHJlc3Npb24yKCkgewogICAgICAgIFN0cmluZyBx\ndWVyeSA9ICJTRUxFQ1QgZS5uYW1lLCBlLmFnZSsxLCAiCiAgICAgICAgICAg\nICAgICArICJDQVNFIGUuYWRkcmVzcy5jb3VudHJ5IFdIRU4gJ1VTQSciCiAg\nICAgICAgICAgICAgICArICIgVEhFTiAnVW5pdGVkLVN0YXRlcycgIgogICAg\nICAgICAgICAgICAgKyAiIEVMU0UgZS5hZGRyZXNzLmNvdW50cnkgIEVORCwi\nICsgIiBlLmFkZHJlc3MuY291bnRyeSAiCiAgICAgICAgICAgICAgICArICIg\nRlJPTSBDb21wVXNlciBlIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxl\nPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q29t\ncFVzZXI+IGUgPSBxLmZyb20oQ29tcFVzZXIuY2xhc3MpOwogICAgICAgIEV4\ncHJlc3Npb24gY2FnZSA9IGNiLnN1bShlLmdldChDb21wVXNlcl8uYWdlKSwg\nMSk7CiAgICAgICAgRXhwcmVzc2lvbiBkMiA9IGNiLnNlbGVjdENhc2UoCiAg\nICAgICAgICAgICAgICBlLmdldChDb21wVXNlcl8uYWRkcmVzcykuZ2V0KEFk\nZHJlc3NfLmNvdW50cnkpKS53aGVuKCJVU0EiLAogICAgICAgICAgICAgICAg\nIlVuaXRlZC1TdGF0ZXMiKS5vdGhlcndpc2UoCiAgICAgICAgICAgICAgICBl\nLmdldChDb21wVXNlcl8uYWRkcmVzcykuZ2V0KEFkZHJlc3NfLmNvdW50cnkp\nKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGUuZ2V0KENvbXBVc2VyXy5uYW1l\nKSwgY2FnZSwgZDIsIGUuZ2V0KENvbXBVc2VyXy5hZGRyZXNzKS5nZXQoCiAg\nICAgICAgICAgICAgICBBZGRyZXNzXy5jb3VudHJ5KSk7CiAgICAgICAgCiAg\nICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwgcXVlcnkpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RTaW1wbGVDYXNlRXhwcmVzc2lvbjMoKSB7CiAg\nICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVDVCBlLm5hbWUsICIKICAgICAg\nICAgICAgICAgICsgIiBDQVNFIFRZUEUoZSkgV0hFTiBGZW1hbGVVc2VyIFRI\nRU4gJ0ZlbWFsZScgIgogICAgICAgICAgICAgICAgKyAiIEVMU0UgJ01hbGUn\nIEVORCIKICAgICAgICAgICAgICAgICsgIiBGUk9NIENvbXBVc2VyIGUgV0hF\nUkUgZS5uYW1lIGxpa2UgJ1MlJyAiCiAgICAgICAgICAgICAgICArICIgT1JE\nRVIgQlkgZS5uYW1lIERFU0MiOwogICAgICAgIENyaXRlcmlhUXVlcnk8VHVw\nbGU+IHEgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxD\nb21wVXNlcj4gZSA9IHEuZnJvbShDb21wVXNlci5jbGFzcyk7CiAgICAgICAg\ncS5tdWx0aXNlbGVjdChlLmdldChDb21wVXNlcl8ubmFtZSksIAogICAgICAg\nICAgICBjYi5zZWxlY3RDYXNlKGUudHlwZSgpKS53aGVuKEZlbWFsZVVzZXIu\nY2xhc3MsICJGZW1hbGUiKQogICAgICAgICAgICAub3RoZXJ3aXNlKCJNYWxl\nIikpOwogICAgICAgIHEud2hlcmUoY2IubGlrZShlLmdldChDb21wVXNlcl8u\nbmFtZSksICJTJSIpKTsKICAgICAgICBxLm9yZGVyQnkoY2IuZGVzYyhlLmdl\ndChDb21wVXNlcl8ubmFtZSkpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShxLCBxdWVyeSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdFNpbXBsZUNhc2VFeHByZXNzaW9uNCgpIHsKICAgICAgICBTdHJpbmcg\ncXVlcnkgPSAiU0VMRUNUIGUubmFtZSwgQ0FTRSBlLmFkZHJlc3MuY291bnRy\neSBXSEVOICdVU0EnIgogICAgICAgICAgICAgICAgKyAiIFRIRU4gdHJ1ZSBF\nTFNFIGZhbHNlIEVORCwiCiAgICAgICAgICAgICAgICArICIgZS5hZGRyZXNz\nLmNvdW50cnkgRlJPTSBDb21wVXNlciBlIjsKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAg\nIFJvb3Q8Q29tcFVzZXI+IGUgPSBxLmZyb20oQ29tcFVzZXIuY2xhc3MpOwog\nICAgICAgIEV4cHJlc3Npb24gYiA9IGNiLnNlbGVjdENhc2UoCiAgICAgICAg\nICAgICAgICBlLmdldChDb21wVXNlcl8uYWRkcmVzcykuZ2V0KEFkZHJlc3Nf\nLmNvdW50cnkpKS53aGVuKCJVU0EiLAogICAgICAgICAgICAgICAgdHJ1ZSku\nb3RoZXJ3aXNlKGZhbHNlKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGUuZ2V0\nKENvbXBVc2VyXy5uYW1lKSwgYiwgZS5nZXQoQ29tcFVzZXJfLmFkZHJlc3Mp\nLmdldCgKICAgICAgICAgICAgICAgIEFkZHJlc3NfLmNvdW50cnkpKTsKICAg\nICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBxdWVyeSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEdlbmVyYWxDYXNlRXhwcmVzc2lv\nbjEoKSB7CiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVDVCBlLm5hbWUs\nIGUuYWdlLCAiCiAgICAgICAgICAgICAgICArICIgQ0FTRSBXSEVOIGUuYWdl\nID4gMzAgVEhFTiBlLmFnZSAtIDEgIgogICAgICAgICAgICAgICAgKyAiIFdI\nRU4gZS5hZ2UgPCAxNSBUSEVOIGUuYWdlICsgMSBFTFNFIGUuYWdlICsgMCAi\nCiAgICAgICAgICAgICAgICArICIgRU5EIEZST00gQ29tcFVzZXIgZSI7CiAg\nICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBsZT4gcSA9IGNiLmNyZWF0ZVR1cGxl\nUXVlcnkoKTsKICAgICAgICBSb290PENvbXBVc2VyPiBlID0gcS5mcm9tKENv\nbXBVc2VyLmNsYXNzKTsKICAgICAgICBFeHByZXNzaW9uIGNhZ2UgPSBjYi5z\nZWxlY3RDYXNlKCkud2hlbihjYi5ndChlLmdldChDb21wVXNlcl8uYWdlKSwg\nMzApLAogICAgICAgICAgICAgICAgY2IuZGlmZihlLmdldChDb21wVXNlcl8u\nYWdlKSwgMSkpLndoZW4oCiAgICAgICAgICAgICAgICBjYi5sdChlLmdldChD\nb21wVXNlcl8uYWdlKSwgMTUpLAogICAgICAgICAgICAgICAgY2Iuc3VtKGUu\nZ2V0KENvbXBVc2VyXy5hZ2UpLCAxKSkub3RoZXJ3aXNlKAogICAgICAgICAg\nICAgICAgY2Iuc3VtKGUuZ2V0KENvbXBVc2VyXy5hZ2UpLCAwKSk7CiAgICAg\nICAgcS5tdWx0aXNlbGVjdChlLmdldChDb21wVXNlcl8ubmFtZSksIGUuZ2V0\nKENvbXBVc2VyXy5hZ2UpLCBjYWdlKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZh\nbGVuY2UocSwgcXVlcnkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RH\nZW5lcmFsQ2FzZUV4cHJlc3Npb24yKCkgewogICAgICAgIFN0cmluZyBxdWVy\neSA9ICJTRUxFQ1QgZS5uYW1lLCBlLmFnZSsxLCAiCiAgICAgICAgICAgICAg\nICArICJDQVNFIFdIRU4gZS5hZGRyZXNzLmNvdW50cnkgPSAnVVNBJyAiCiAg\nICAgICAgICAgICAgICArICIgVEhFTiAnVW5pdGVkLVN0YXRlcycgIgogICAg\nICAgICAgICAgICAgKyAiIEVMU0UgJ05vbiBVbml0ZWQtU3RhdGVzJyAgRU5E\nLCIKICAgICAgICAgICAgICAgICsgIiBlLmFkZHJlc3MuY291bnRyeSAiCiAg\nICAgICAgICAgICAgICArICIgRlJPTSBDb21wVXNlciBlIjsKICAgICAgICBD\ncml0ZXJpYVF1ZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgp\nOwogICAgICAgIFJvb3Q8Q29tcFVzZXI+IGUgPSBxLmZyb20oQ29tcFVzZXIu\nY2xhc3MpOwogICAgICAgIEV4cHJlc3Npb24gZDIgPSBjYi5zZWxlY3RDYXNl\nKCkKICAgICAgICAgICAgICAgIC53aGVuKAogICAgICAgICAgICAgICAgICAg\nICAgICBjYi5lcXVhbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBlLmdldChDb21wVXNlcl8uYWRkcmVzcykuZ2V0KEFkZHJlc3NfLmNvdW50\ncnkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJVU0EiKSwg\nIlVuaXRlZC1TdGF0ZXMiKS5vdGhlcndpc2UoCiAgICAgICAgICAgICAgICAg\nICAgICAgICJOb24gVW5pdGVkLVN0YXRlcyIpOwogICAgICAgIEV4cHJlc3Np\nb24gY2FnZSA9IGNiLnN1bShlLmdldChDb21wVXNlcl8uYWdlKSwgMSk7CiAg\nICAgICAgcS5tdWx0aXNlbGVjdChlLmdldChDb21wVXNlcl8ubmFtZSksIGNh\nZ2UsIGQyLCBlLmdldChDb21wVXNlcl8uYWRkcmVzcykuZ2V0KAogICAgICAg\nICAgICAgICAgQWRkcmVzc18uY291bnRyeSkpOwoKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShxLCBxdWVyeSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdEdlbmVyYWxDYXNlRXhwcmVzc2lvbjMoKSB7CiAgICAgICAgU3RyaW5n\nIHF1ZXJ5ID0gIiBzZWxlY3QgZS5uYW1lLCAiCiAgICAgICAgICAgICsgIkNB\nU0UgV0hFTiBlLmFnZSA9IDExIFRIRU4gIgogICAgICAgICAgICArICJvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWEuQ29tcFVzZXIk\nIiAKICAgICAgICAgICAgKyAiQ3JlZGl0UmF0aW5nLlBPT1IiCiAgICAgICAg\nICAgICsgIiBXSEVOIGUuYWdlID0gMzUgVEhFTiAiCiAgICAgICAgICAgICsg\nIm9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5Db21w\nVXNlciQiIAogICAgICAgICAgICArICJDcmVkaXRSYXRpbmcuR09PRCIKICAg\nICAgICAgICAgKyAiIEVMU0UgIgogICAgICAgICAgICArICJvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWEuQ29tcFVzZXIkIiAKICAg\nICAgICAgICAgKyAiQ3JlZGl0UmF0aW5nLkVYQ0VMTEVOVCIKICAgICAgICAg\nICAgKyAiIEVORCBGUk9NIENvbXBVc2VyIGUgT1JERVIgQlkgZS5hZ2UiOwog\nICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVhdGVUdXBs\nZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDb21wVXNlcj4gZSA9IHEuZnJvbShD\nb21wVXNlci5jbGFzcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChlLmdldChD\nb21wVXNlcl8ubmFtZSksIGNiLnNlbGVjdENhc2UoKS53aGVuKAogICAgICAg\nICAgICAgICAgY2IuZXF1YWwoZS5nZXQoQ29tcFVzZXJfLmFnZSksIDExKSwg\nQ29tcFVzZXIuQ3JlZGl0UmF0aW5nLlBPT1IpCiAgICAgICAgICAgICAgICAu\nd2hlbihjYi5lcXVhbChlLmdldChDb21wVXNlcl8uYWdlKSwgMzUpLAogICAg\nICAgICAgICAgICAgICAgICAgICBDb21wVXNlci5DcmVkaXRSYXRpbmcuR09P\nRCkub3RoZXJ3aXNlKAogICAgICAgICAgICAgICAgICAgICAgICBDb21wVXNl\nci5DcmVkaXRSYXRpbmcuRVhDRUxMRU5UKSk7CgogICAgICAgIHEub3JkZXJC\neShjYi5hc2MoZS5nZXQoQ29tcFVzZXJfLmFnZSkpKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UocSwgcXVlcnkpOwogICAgfQoKICAgIC8vIG5vdCBz\ndXJlIGhvdyB0byB3cml0ZSBDcml0ZXJpYVF1ZXJ5IGZvcgogICAgLy8gU3Vi\ncXVlcnkuc2VsZWN0KFNpbXBsZUNhc2UvR2VuZXJhbENhc2UpCiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RHZW5lcmFsQ2FzZUV4cHJlc3Npb240KCkgewog\nICAgICAgIFN0cmluZyBxdWVyeSA9ICJzZWxlY3QgZS5uYW1lLCBlLmNyZWRp\ndFJhdGluZyBmcm9tIENvbXBVc2VyIGUgIgogICAgICAgICAgICArICJ3aGVy\nZSBlLmNyZWRpdFJhdGluZyA9ICIKICAgICAgICAgICAgKyAiKHNlbGVjdCAi\nCiAgICAgICAgICAgICsgIkNBU0UgV0hFTiBlMS5hZ2UgPSAxMSBUSEVOICIK\nICAgICAgICAgICAgKyAib3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmNyaXRlcmlhLkNvbXBVc2VyJCIgCiAgICAgICAgICAgICsgIkNyZWRpdFJh\ndGluZy5QT09SIgogICAgICAgICAgICArICIgV0hFTiBlMS5hZ2UgPSAzNSBU\nSEVOICIKICAgICAgICAgICAgKyAib3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmNyaXRlcmlhLkNvbXBVc2VyJCIgCiAgICAgICAgICAgICsgIkNy\nZWRpdFJhdGluZy5HT09EIgogICAgICAgICAgICArICIgRUxTRSAiCiAgICAg\nICAgICAgICsgIm9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jcml0\nZXJpYS5Db21wVXNlciQiIAogICAgICAgICAgICArICJDcmVkaXRSYXRpbmcu\nRVhDRUxMRU5UIgogICAgICAgICAgICArICIgRU5EIGZyb20gQ29tcFVzZXIg\nZTEiCiAgICAgICAgICAgICsgIiB3aGVyZSBlLnVzZXJpZCA9IGUxLnVzZXJp\nZCkgT1JERVIgQlkgZS5hZ2UiOwogICAgICAgIENyaXRlcmlhUXVlcnk8VHVw\nbGU+IHEgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxD\nb21wVXNlcj4gZSA9IHEuZnJvbShDb21wVXNlci5jbGFzcyk7CiAgICAgICAg\ncS5tdWx0aXNlbGVjdChlLmdldChDb21wVXNlcl8ubmFtZSksIGUuZ2V0KENv\nbXBVc2VyXy5jcmVkaXRSYXRpbmcpKTsKICAgICAgICBxLm9yZGVyQnkoY2Iu\nYXNjKGUuZ2V0KENvbXBVc2VyXy5hZ2UpKSk7CiAgICAgICAgU3VicXVlcnk8\nT2JqZWN0PiBzcSA9IHEuc3VicXVlcnkoT2JqZWN0LmNsYXNzKTsKICAgICAg\nICBSb290PENvbXBVc2VyPiBlMSA9IHNxLmZyb20oQ29tcFVzZXIuY2xhc3Mp\nOwogICAgICAgIHNxLndoZXJlKGNiLmVxdWFsKGUuZ2V0KENvbXBVc2VyXy51\nc2VyaWQpLCBlMS5nZXQoQ29tcFVzZXJfLnVzZXJpZCkpKTsKCiAgICAgICAg\ncS53aGVyZShjYi5lcXVhbChlLmdldChDb21wVXNlcl8uY3JlZGl0UmF0aW5n\nKSwKICAgICAgICAgICBzcS5zZWxlY3QoCiAgICAgICAgICAgICAgICBjYi5z\nZWxlY3RDYXNlKCkKICAgICAgICAgICAgICAgICAgLndoZW4oY2IuZXF1YWwo\nZTEuZ2V0KENvbXBVc2VyXy5hZ2UpLCAxMSksIENvbXBVc2VyLkNyZWRpdFJh\ndGluZy5QT09SKQogICAgICAgICAgICAgICAgICAud2hlbihjYi5lcXVhbChl\nMS5nZXQoQ29tcFVzZXJfLmFnZSksIDM1KSwgQ29tcFVzZXIuQ3JlZGl0UmF0\naW5nLkdPT0QpCiAgICAgICAgICAgICAgICAgIC5vdGhlcndpc2UoQ29tcFVz\nZXIuQ3JlZGl0UmF0aW5nLkVYQ0VMTEVOVCkpKSk7CgogICAgICAgIHEub3Jk\nZXJCeShjYi5hc2MoZS5nZXQoQ29tcFVzZXJfLmFnZSkpKTsKICAgICAgICAK\nICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBxdWVyeSk7CiAgICB9Cn0K\n","encoding":"base64"}

