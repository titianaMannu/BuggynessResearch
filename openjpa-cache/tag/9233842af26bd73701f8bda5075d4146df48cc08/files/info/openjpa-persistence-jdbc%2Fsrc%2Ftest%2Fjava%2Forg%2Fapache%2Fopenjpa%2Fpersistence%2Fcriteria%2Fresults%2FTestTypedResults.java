{"sha":"eb3c9f3698a4fbf73f4e235347563910dc51d55f","node_id":"MDQ6QmxvYjIwNjM2NDplYjNjOWYzNjk4YTRmYmY3M2Y0ZTIzNTM0NzU2MzkxMGRjNTFkNTVm","size":9952,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/eb3c9f3698a4fbf73f4e235347563910dc51d55f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWEu\ncmVzdWx0czsKCmltcG9ydCBqYXZhLnRleHQuRGF0ZUZvcm1hdDsKaW1wb3J0\nIGphdmEudGV4dC5QYXJzZUV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5E\nYXRlOwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0\naWwuTGlzdDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5h\nZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5UdXBsZTsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLlR5cGVkUXVlcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0\nZXJpYS5Dcml0ZXJpYVF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nY3JpdGVyaWEuSm9pbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNyaXRl\ncmlhLlF1ZXJ5QnVpbGRlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLmNy\naXRlcmlhLlJvb3Q7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xhc3Mg\nVGVzdFR5cGVkUmVzdWx0cyBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsK\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgTl9PUkRFUlMgPSAxNTsK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBOX0lURU1TX1BFUl9PUkRF\nUiA9IDM7CgogICAgLy8gdXNlIHNob3J0IGRhdGEgZm9ybWF0CiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBPUkRFUl9EQVRFUyA9CiAgICAg\nICAgeyAiMy8xMi8yMDA4IDE6MDAgUE0iLCAiMTAvMDEvMjAwOCAxOjUxIEFN\nIiwgIjEyLzEyLzIwMDggMTA6MDEgQU0iLCAiNS8yMS8yMDA5IDM6MjMgUE0i\nIH07CgogICAgRGF0ZUZvcm1hdCBkZiA9IERhdGVGb3JtYXQuZ2V0SW5zdGFu\nY2UoKTsgLy8gdXNlcyBTSE9SVCBkYXRlZm9ybWF0IGJ5IGRlZmF1bHQKCiAg\nICBwdWJsaWMgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIHNldFVwKENMRUFSX1RBQkxFUywgT3JkZXIuY2xhc3MsIEl0ZW0uY2xh\nc3MsIFNob3AuY2xhc3MsIFByb2R1Y2VyLmNsYXNzLAogICAgICAgICAgICAg\nIm9wZW5qcGEuRHluYW1pY0VuaGFuY2VyQWdlbnQiLCAiZmFsc2UiKTsKICAg\nICAgICBwb3B1bGF0ZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBvcHVs\nYXRlKCkgdGhyb3dzIFBhcnNlRXhjZXB0aW9uIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgU2hvcCBz\nID0gbmV3IFNob3AoKTsKICAgICAgICBPcmRlciBvcmRlcjsKICAgICAgICBJ\ndGVtIGl0ZW07CiAgICAgICAgUHJvZHVjZXIgcDsKCiAgICAgICAgcy5zZXRJ\nZCgxKTsKICAgICAgICBzLnNldE5hbWUoImVCYXkuY29tIik7CiAgICAgICAg\ncy5zZXRPcmRlcnMobmV3IEhhc2hTZXQ8T3JkZXI+KCkpOwoKICAgICAgICBm\nb3IgKGludCBpID0gMTsgaSA8PSBOX09SREVSUzsgaSsrKSB7CiAgICAgICAg\nICAgIG9yZGVyID0gbmV3IE9yZGVyKCk7CiAgICAgICAgICAgIG9yZGVyLnNl\ndElkKGkpOwogICAgICAgICAgICBvcmRlci5zZXREYXRlKGRmLnBhcnNlKE9S\nREVSX0RBVEVTW2kgJSBPUkRFUl9EQVRFUy5sZW5ndGhdKSk7CiAgICAgICAg\nICAgIG9yZGVyLnNldEZpbGxlZChpICUgMiA9PSAwID8gdHJ1ZSA6IGZhbHNl\nKTsKICAgICAgICAgICAgb3JkZXIuc2V0U2hvcChzKTsKICAgICAgICAgICAg\nb3JkZXIuc2V0SXRlbXMobmV3IEhhc2hTZXQ8SXRlbT4oKSk7CiAgICAgICAg\nICAgIHMuZ2V0T3JkZXJzKCkuYWRkKG9yZGVyKTsKICAgICAgICAgICAgZm9y\nIChpbnQgaiA9IDE7IGogPD0gTl9JVEVNU19QRVJfT1JERVI7IGorKykgewog\nICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBJdGVtKCk7CiAgICAgICAgICAg\nICAgICBpdGVtLnNldE9yZGVyKG9yZGVyKTsKICAgICAgICAgICAgICAgIG9y\nZGVyLmdldEl0ZW1zKCkuYWRkKGl0ZW0pOwogICAgICAgICAgICAgICAgcCA9\nIG5ldyBQcm9kdWNlcigpOwogICAgICAgICAgICAgICAgcC5zZXROYW1lKCJm\naWxsZXIiKTsKICAgICAgICAgICAgICAgIHAuc2V0SXRlbShpdGVtKTsKICAg\nICAgICAgICAgICAgIGl0ZW0uc2V0UHJvZHVjdChwKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0KHMpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIHN1cGVyLnRlYXJEb3duKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBWZXJpZnkgdGhhdCBhIHF1ZXJ5IHVzaW5nIGEgZGF0\nZSBmaWVsZCB3b3JrcyB0aGUgc2FtZSB3aXRoIEpQUUwsIEpQUUwgKHR5cGVk\nKSwgQ3JpdGVyaWEgKHR5cGVkKSwgYW5kIHZpYSBhCiAgICAgKiBOYXRpdmVR\ndWVyeQogICAgICogCiAgICAgKiBAdGhyb3dzIEV4Y2VwdGlvbgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0VHlwZWRKUFFMUXVlcnkoKSB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CgogICAgICAgIFF1ZXJ5IGpwcWxRdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5\nKCJTZWxlY3QgbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5maWxsZWQgPSB0cnVl\nIik7CiAgICAgICAgLy8gRG9uJ3Qgc3VwcHJlc3Mgd2FybmluZ3MuCiAgICAg\nICAgTGlzdDxPcmRlcj4ganBxbFJlc3VsdHMgPSBqcHFsUXVlcnkuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscyhOX09SREVSUyAvIDIs\nIGpwcWxSZXN1bHRzLnNpemUoKSk7CgogICAgICAgIFR5cGVkUXVlcnk8T3Jk\nZXI+IGpwcWxUeXBlZFF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnkoIlNlbGVjdCBv\nIGZyb20gT3JkZXIgbyB3aGVyZSBvLmZpbGxlZCA9IHRydWUiLCBPcmRlci5j\nbGFzcyk7CiAgICAgICAgTGlzdDxPcmRlcj4ganBxbFR5cGVkUmVzdWx0cyA9\nIGpwcWxUeXBlZFF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoTl9PUkRFUlMgLyAyLCBqcHFsVHlwZWRSZXN1bHRzLnNpemUo\nKSk7CgogICAgICAgIC8vIGNyZWF0ZSB0aGUgc2FtZSBxdWVyeSBhbmQgZ2V0\nIHR5cGVkIHJlc3VsdHMuCiAgICAgICAgUXVlcnlCdWlsZGVyIHFiID0gZW0u\nZ2V0UXVlcnlCdWlsZGVyKCk7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxPcmRl\ncj4gY3EgPSBxYi5jcmVhdGVRdWVyeShPcmRlci5jbGFzcyk7CiAgICAgICAg\nUm9vdDxPcmRlcj4gb3JkZXIgPSBjcS5mcm9tKE9yZGVyLmNsYXNzKTsKICAg\nICAgICBjcS5zZWxlY3Qob3JkZXIpLndoZXJlKHFiLmVxdWFsKG9yZGVyLmdl\ndChPcmRlcl8uZmlsbGVkKSwgQm9vbGVhbi5UUlVFKSk7CgogICAgICAgIFR5\ncGVkUXVlcnk8T3JkZXI+IHR5cGVkQ3JpdGVyaWFRdWVyeSA9IGVtLmNyZWF0\nZVF1ZXJ5KGNxKTsKICAgICAgICBMaXN0PE9yZGVyPiB0eXBlZENyaXRlcmlh\nUmVzdWx0cyA9IHR5cGVkQ3JpdGVyaWFRdWVyeS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKE5fT1JERVJTIC8gMiwgdHlwZWRDcml0\nZXJpYVJlc3VsdHMuc2l6ZSgpKTsKCiAgICAgICAgUXVlcnkgbmF0aXZlUSA9\nIGVtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJTRUxFQ1QgKiBGUk9NIENSSVRfUkVT\nX09SRCBvIFdIRVJFIChvLmZpbGxlZCA9IDEpIiwgT3JkZXIuY2xhc3MpOwog\nICAgICAgIC8vIERvbid0IHN1cHByZXNzIHdhcm5pbmdzLgogICAgICAgIExp\nc3Q8T3JkZXI+IHR5cGVkTmF0aXZlUmVzdWx0cyA9IG5hdGl2ZVEuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscyhOX09SREVSUyAvIDIs\nIHR5cGVkTmF0aXZlUmVzdWx0cy5zaXplKCkpOwoKICAgICAgICBmb3IgKE9y\nZGVyIG8gOiBqcHFsUmVzdWx0cykgewogICAgICAgICAgICBhc3NlcnRUcnVl\nKGpwcWxUeXBlZFJlc3VsdHMuY29udGFpbnMobykpOwogICAgICAgICAgICBh\nc3NlcnRUcnVlKHR5cGVkQ3JpdGVyaWFSZXN1bHRzLmNvbnRhaW5zKG8pKTsK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZSh0eXBlZE5hdGl2ZVJlc3VsdHMuY29u\ndGFpbnMobykpOwogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIC8qKgogICAgICogVmVyaWZ5IHRoYXQgYSBxdWVyeSB1c2luZyBh\nIGRhdGUgZmllbGQgd29ya3MgdGhlIHNhbWUgd2l0aCBKUFFMLCBKUFFMICh0\neXBlZCksIENyaXRlcmlhICh0eXBlZCksIGFuZCB2aWEgYQogICAgICogTmF0\naXZlUXVlcnkKICAgICAqIAogICAgICogQHRocm93cyBFeGNlcHRpb24KICAg\nICAqLwogICAgcHVibGljIHZvaWQgdGVzdERhdGVRdWVyeSgpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIERhdGUgbWF4RGF0ZSA9IGRm\nLnBhcnNlKE9SREVSX0RBVEVTWzJdKTsKICAgICAgICAKICAgICAgICBRdWVy\neSBqcHFsUXVlcnkgPSBlbS5jcmVhdGVRdWVyeSgiU2VsZWN0IG8gZnJvbSBP\ncmRlciBvIHdoZXJlIG8uZGF0ZSA8IDptYXhEYXRlIik7CiAgICAgICAganBx\nbFF1ZXJ5LnNldFBhcmFtZXRlcigibWF4RGF0ZSIsIG1heERhdGUpOwogICAg\nICAgIExpc3Q8T3JkZXI+IGpwcWxSZXN1bHRzID0ganBxbFF1ZXJ5LmdldFJl\nc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoTl9PUkRFUlMgLyAy\nLCBqcHFsUmVzdWx0cy5zaXplKCkpOwoKICAgICAgICBUeXBlZFF1ZXJ5PE9y\nZGVyPiB0eXBlZEpwcWxRdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KCJTZWxlY3Qg\nbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5kYXRlIDwgOm1heERhdGUiLCBPcmRl\nci5jbGFzcyk7CiAgICAgICAgdHlwZWRKcHFsUXVlcnkuc2V0UGFyYW1ldGVy\nKCJtYXhEYXRlIiwgbWF4RGF0ZSk7CiAgICAgICAgTGlzdDxPcmRlcj4gdHlw\nZWRKcHFsUmVzdWx0cyA9IHR5cGVkSnBxbFF1ZXJ5LmdldFJlc3VsdExpc3Qo\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoTl9PUkRFUlMgLyAyLCB0eXBlZEpw\ncWxSZXN1bHRzLnNpemUoKSk7CgogICAgICAgIFF1ZXJ5QnVpbGRlciBxYiA9\nIGVtLmdldFF1ZXJ5QnVpbGRlcigpOwogICAgICAgIENyaXRlcmlhUXVlcnk8\nT3JkZXI+IGNyaXRlcmlhUXVlcnkgPSBxYi5jcmVhdGVRdWVyeShPcmRlci5j\nbGFzcyk7CiAgICAgICAgUm9vdDxPcmRlcj4gb3JkZXIgPSBjcml0ZXJpYVF1\nZXJ5LmZyb20oT3JkZXIuY2xhc3MpOwogICAgICAgIGNyaXRlcmlhUXVlcnku\nc2VsZWN0KG9yZGVyKS53aGVyZShxYi5sZXNzVGhhbihvcmRlci5nZXQoT3Jk\nZXJfLmRhdGUpLCBxYi5wYXJhbWV0ZXIoRGF0ZS5jbGFzcywgIm1heERhdGUi\nKSkpOwogICAgICAgIFR5cGVkUXVlcnk8T3JkZXI+IHRxID0gZW0uY3JlYXRl\nUXVlcnkoY3JpdGVyaWFRdWVyeSk7CiAgICAgICAgdHEuc2V0UGFyYW1ldGVy\nKCJtYXhEYXRlIiwgbWF4RGF0ZSk7CiAgICAgICAgTGlzdDxPcmRlcj4gY3Jp\ndGVyaWFSZXN1bHRzID0gdHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFz\nc2VydEVxdWFscyhOX09SREVSUyAvIDIsIGNyaXRlcmlhUmVzdWx0cy5zaXpl\nKCkpOwoKICAgICAgICBRdWVyeSBuYXRpdmVRdWVyeSA9IGVtLmNyZWF0ZU5h\ndGl2ZVF1ZXJ5KCJTZWxlY3QgKiBmcm9tIENSSVRfUkVTX09SRCBvIFdIRVJF\nIChvLmNkYXRlIDwgPzEpIiwgT3JkZXIuY2xhc3MpOwogICAgICAgIG5hdGl2\nZVF1ZXJ5LnNldFBhcmFtZXRlcigxLCBtYXhEYXRlKTsKICAgICAgICBMaXN0\nPE9yZGVyPiBuYXRpdmVSZXN1bHRzID0gbmF0aXZlUXVlcnkuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscyhOX09SREVSUyAvIDIsIG5h\ndGl2ZVJlc3VsdHMuc2l6ZSgpKTsKCiAgICAgICAgZm9yIChPcmRlciBvIDog\nanBxbFJlc3VsdHMpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSh0eXBlZEpw\ncWxSZXN1bHRzLmNvbnRhaW5zKG8pKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZShjcml0ZXJpYVJlc3VsdHMuY29udGFpbnMobykpOwogICAgICAgICAgICBh\nc3NlcnRUcnVlKG5hdGl2ZVJlc3VsdHMuY29udGFpbnMobykpOwogICAgICAg\nIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qKgogICAgICog\nVGVzdGNhc2UgdG8gdmVyaWZ5IHRoYXQgc2VsZWN0aW5nIG11bHRpcGxlIHJl\nc3VsdHMgaW4gYSB2YXJpZXR5IG9mIHdheXMgcmV0dXJucyB0aGUgc2FtZSBy\nZXN1bHRzLiBSZXN1bHRzIGFyZQogICAgICogcmV0dXJuZWQgdmlhIGEgbm9y\nbWFsIE9iamVjdCBbXSAoSlBRTCksIFR1cGxlIChDcml0ZXJpYSksIGFuZCBh\nIGN1c3RvbSB0dXBsZSAoQ3JpdGVyaWEuY29uc3RydWN0KQogICAgICogCiAg\nICAgKiBAdGhyb3dzIEV4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0TXVsdGlTZWxlY3QoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICAvLyBnZXQgcmVzdWx0cyBmcm9tIHRyYWRpdGlvbmFsIEpQUUwKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBRdWVyeSBqcHFsUXVlcnkgPQogICAgICAgICAgICBlbS5j\ncmVhdGVRdWVyeSgiU0VMRUNUIG8sIHAgZnJvbSBPcmRlciBvIEpPSU4gby5p\ndGVtcyBpIEpPSU4gaS5wcm9kdWNlciBwIFdIRVJFIG8uZmlsbGVkID0gdHJ1\nZSIpOwogICAgICAgIC8vIGRvbid0IHN1cHByZXNzIHdhcm5pbmdzLgogICAg\nICAgIExpc3Q8T2JqZWN0W10+IGpwcWxSZXN1bHRzID0ganBxbFF1ZXJ5Lmdl\ndFJlc3VsdExpc3QoKTsKCiAgICAgICAgLy8gR2V0IHJlc3VsdHMgdXNpbmcg\nVHVwbGUKICAgICAgICBRdWVyeUJ1aWxkZXIgcWIgPSBlbS5nZXRRdWVyeUJ1\naWxkZXIoKTsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxlPiBjcml0ZXJp\nYVF1ZXJ5ID0gcWIuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAgIFJvb3Q8\nT3JkZXI+IG9yZGVyID0gY3JpdGVyaWFRdWVyeS5mcm9tKE9yZGVyLmNsYXNz\nKTsKICAgICAgICBKb2luPEl0ZW0sIFByb2R1Y2VyPiBwcm9kdWNlciA9IG9y\nZGVyLmpvaW4oT3JkZXJfLml0ZW1zKS5qb2luKEl0ZW1fLnByb2R1Y2VyKTsK\nICAgICAgICBjcml0ZXJpYVF1ZXJ5LnNlbGVjdChxYi50dXBsZShvcmRlciwg\ncHJvZHVjZXIpKTsKICAgICAgICBjcml0ZXJpYVF1ZXJ5LndoZXJlKHFiLmVx\ndWFsKG9yZGVyLmdldChPcmRlcl8uZmlsbGVkKSwgQm9vbGVhbi5UUlVFKSk7\nCiAgICAgICAgVHlwZWRRdWVyeTxUdXBsZT4gZXEgPSBlbS5jcmVhdGVRdWVy\neShjcml0ZXJpYVF1ZXJ5KTsKICAgICAgICBMaXN0PFR1cGxlPiBjcml0ZXJp\nYVJlc3VsdHMgPSBlcS5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAgIC8vIEdl\ndCByZXN1bHRzIHVzaW5nIGN1c3RvbSBjbGFzcwogICAgICAgIENyaXRlcmlh\nUXVlcnk8T3JkZXJQcm9kdWNlcj4gY29uc3RydWN0UXVlcnkgPSBxYi5jcmVh\ndGVRdWVyeShPcmRlclByb2R1Y2VyLmNsYXNzKTsKICAgICAgICBSb290PE9y\nZGVyPiBvcmRlcjIgPSBjb25zdHJ1Y3RRdWVyeS5mcm9tKE9yZGVyLmNsYXNz\nKTsKICAgICAgICBKb2luPEl0ZW0sIFByb2R1Y2VyPiBwcm9kdWNlcjIgPSBv\ncmRlci5qb2luKE9yZGVyXy5pdGVtcykuam9pbihJdGVtXy5wcm9kdWNlcik7\nCiAgICAgICAgY29uc3RydWN0UXVlcnkuc2VsZWN0KHFiLmNvbnN0cnVjdChP\ncmRlclByb2R1Y2VyLmNsYXNzLCBvcmRlcjIsIHByb2R1Y2VyMikpOwogICAg\nICAgIGNvbnN0cnVjdFF1ZXJ5LndoZXJlKHFiLmVxdWFsKG9yZGVyMi5nZXQo\nT3JkZXJfLmZpbGxlZCksIEJvb2xlYW4uVFJVRSkpOwogICAgICAgIFR5cGVk\nUXVlcnk8T3JkZXJQcm9kdWNlcj4gdHlwZWRRdWVyeSA9IGVtLmNyZWF0ZVF1\nZXJ5KGNvbnN0cnVjdFF1ZXJ5KTsKICAgICAgICBMaXN0PE9yZGVyUHJvZHVj\nZXI+IGNvbnN0cnVjdFJlc3VsdHMgPSB0eXBlZFF1ZXJ5LmdldFJlc3VsdExp\nc3QoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKE5fT1JERVJTIC8gMiAqIE5f\nSVRFTVNfUEVSX09SREVSLCBqcHFsUmVzdWx0cy5zaXplKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscyhOX09SREVSUyAvIDIgKiBOX0lURU1TX1BFUl9PUkRF\nUiwgY3JpdGVyaWFSZXN1bHRzLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKE5fT1JERVJTIC8gMiAqIE5fSVRFTVNfUEVSX09SREVSLCBjb25zdHJ1\nY3RSZXN1bHRzLnNpemUoKSk7CgogICAgICAgIGZvciAoT2JqZWN0W10gb3Mg\nOiBqcHFsUmVzdWx0cykgewogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMiwg\nb3MubGVuZ3RoKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvc1swXSBpbnN0\nYW5jZW9mIE9yZGVyKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvc1sxXSBp\nbnN0YW5jZW9mIFByb2R1Y2VyKTsKICAgICAgICB9CgogICAgICAgIC8vIGNo\nZWFwIHdheSB0byBlbnN1cmUgdGhhdCB3ZSBoYXZlIHRoZSBzYW1lIGNvbnRl\nbnRzLgogICAgICAgIC8vIGlmIG5lZWRlZCBhbiBvcmRlckJ5IGNsYXVzZSBj\nYW4gYmUgYWRkZWQgdG8gbWFrZSB0aGlzIG1vcmUgcm9idXN0LgogICAgICAg\nIE9iamVjdFtdIGpwcWxUdXBsZTsKICAgICAgICBUdXBsZSBjcml0ZXJpYVR1\ncGxlOwogICAgICAgIE9yZGVyUHJvZHVjZXIgY29uc3RydWN0VHVwbGU7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBqcHFsUmVzdWx0cy5zaXplKCk7\nIGkrKykgewogICAgICAgICAgICBqcHFsVHVwbGUgPSBqcHFsUmVzdWx0cy5n\nZXQoaSk7CiAgICAgICAgICAgIGNyaXRlcmlhVHVwbGUgPSBjcml0ZXJpYVJl\nc3VsdHMuZ2V0KGkpOwogICAgICAgICAgICBjb25zdHJ1Y3RUdXBsZSA9IGNv\nbnN0cnVjdFJlc3VsdHMuZ2V0KGkpOwogICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoanBxbFR1cGxlWzBdLCBjcml0ZXJpYVR1cGxlLmdldCgwKSk7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscyhqcHFsVHVwbGVbMV0sIGNyaXRlcmlhVHVw\nbGUuZ2V0KDEpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGpwcWxUdXBs\nZVswXSwgY29uc3RydWN0VHVwbGUuZ2V0T3JkZXIoKSk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscyhqcHFsVHVwbGVbMV0sIGNvbnN0cnVjdFR1cGxlLmdl\ndFByb2R1Y2VyKCkpOwogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQp9Cg==\n","encoding":"base64"}

