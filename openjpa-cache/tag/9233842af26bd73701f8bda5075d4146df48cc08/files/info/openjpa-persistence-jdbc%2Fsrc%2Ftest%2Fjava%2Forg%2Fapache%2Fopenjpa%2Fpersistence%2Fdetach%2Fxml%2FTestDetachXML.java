{"sha":"7734a96ae9d57b94498ab8a65893f32aee9cb16f","node_id":"MDQ6QmxvYjIwNjM2NDo3NzM0YTk2YWU5ZDU3Yjk0NDk4YWI4YTY1ODkzZjMyYWVlOWNiMTZm","size":6738,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7734a96ae9d57b94498ab8a65893f32aee9cb16f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGV0YWNo\nLnhtbDsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2\nYS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5\nTWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXJGYWN0b3J5OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEk7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3Rl\nbmNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRl\nc3QuQWJzdHJhY3RQZXJzaXN0ZW5jZVRlc3RDYXNlOwoKLyoqCiAqIFRoZXNl\nIHRlc3QgdmVyaWZ5IHRoZSB1c2Ugb2YgY2FzY2FkZS1kZXRhY2ggdmlhIG9y\nbS54bWwgdGhyb3VnaAogKiB0aGUgY2FzY2FkZS1kZXRhY2ggYW5kIGNhc2Nh\nZGUtYWxsIGVsZW1lbnRzLiAgV2l0aGluIGVhY2ggdmFyaWF0aW9uLCBhIAog\nKiBiaS1kaXJlY3Rpb25hbCBlbnRpdHkgZ3JhcGggY29udGFpbmluZyBhbGwg\ncmVsYXRpb25zaGlwIHR5cGVzIGlzIG1hZGUgCiAqIHBlcnNpc3RlbnQuICBE\nZXRhY2ggaXMgY2FsbGVkIGl0ZXJhdGl2ZWx5IG9uIGEgZnVsbCBncmFwaCBh\nbmQgY2FzY2FkZQogKiBiZWhhdmlvciBpcyB2ZXJpZmllZC4KICovCnB1Ymxp\nYyBjbGFzcyBUZXN0RGV0YWNoWE1MIGV4dGVuZHMgQWJzdHJhY3RQZXJzaXN0\nZW5jZVRlc3RDYXNlIHsKCiAgICAvKgogICAgICogVGVzdCB0aGUgdXNlIG9m\nIGNhc2NhZGUtZGV0YWNoIHdpdGggYWxsIHJlbGF0aW9uc2hpcCB0eXBlcy4g\nIEFsbCBlbnRpdGllcwogICAgICogaW4gdGhlIGdyYXBoIHNob3VsZCBiZSBk\nZXRhY2hlZCB3aGVuIGFueSBlbnRpdHkgaXMgZGV0YWNoZWQuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHRlc3REZXRhY2goKSB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1m\nID0gCiAgICAgICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlT\nUEkpT3BlbkpQQVBlcnNpc3RlbmNlLgogICAgICAgICAgICBjcmVhdGVFbnRp\ndHlNYW5hZ2VyRmFjdG9yeSgiRGV0YWNoWE1MUFUiLAogICAgICAgICAgICAg\nICAgIm9yZy9hcGFjaGUvb3BlbmpwYS9wZXJzaXN0ZW5jZS9kZXRhY2gvIiAr\nCiAgICAgICAgICAgICAgICAiZGV0YWNoLXBlcnNpc3RlbmNlLnhtbCIpOwog\nICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZlcmlmeUNhc2Nh\nZGVEZXRhY2goZW1mLCB0cnVlKTsgICAgICAgICAgICAgICAgICAgICAgICAK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBjbGVhbnVwRU1GKGVt\nZik7CiAgICAgICAgfSAgICAgIAogICAgfQoKICAgIC8qCiAgICAgKiBUZXN0\nIHRoZSB1c2Ugb2Ygbm8gY2FzY2FkZS1kZXRhY2ggd2l0aCBhbGwgcmVsYXRp\nb25zaGlwIHR5cGVzLiAgVGhlCiAgICAgKiBiYXNlIG9iamVjdCBzaG91bGQg\nYmVjb21lIGRldGFjaGVkIGFuZCBubyBvdGhlciBlbnRpdGllcyBzaG91bGQg\nYmUKICAgICAqIGRldGFjaGVkLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0\nZXN0Tm9EZXRhY2goKSAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIGVtZiA9IAogICAgICAgICAg\nICAoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJKU9wZW5KUEFQZXJz\naXN0ZW5jZS4KICAgICAgICAgICAgY3JlYXRlRW50aXR5TWFuYWdlckZhY3Rv\ncnkoIk5vRGV0YWNoWE1MUFUiLAogICAgICAgICAgICAgICAgIm9yZy9hcGFj\naGUvb3BlbmpwYS9wZXJzaXN0ZW5jZS9kZXRhY2gvIiArCiAgICAgICAgICAg\nICAgICAiZGV0YWNoLXBlcnNpc3RlbmNlLnhtbCIpOwogICAgICAgIAogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHZlcmlmeUNhc2NhZGVEZXRhY2goZW1m\nLCBmYWxzZSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2xl\nYW51cEVNRihlbWYpOwogICAgICAgIH0gICAgICAKICAgIH0KCiAgICAvKgog\nICAgICogVGVzdCB0aGUgdXNlIG9mIGNhc2NhZGUtYWxsIHdpdGggYWxsIHJl\nbGF0aW9uc2hpcCB0eXBlcy4gIEFsbCBlbnRpdGllcwogICAgICogaW4gdGhl\nIGdyYXBoIHNob3VsZCBiZSBkZXRhY2hlZCB3aGVuIGEgc2luZ2xlIGVudGl0\neSBpcyBkZXRhY2hlZC4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdEFs\nbERldGFjaCgpICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0gCiAgICAgICAgICAgIChP\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpT3BlbkpQQVBlcnNpc3Rl\nbmNlLgogICAgICAgICAgICBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgi\nRGV0YWNoQWxsWE1MUFUiLAogICAgICAgICAgICAgICAgIm9yZy9hcGFjaGUv\nb3BlbmpwYS9wZXJzaXN0ZW5jZS9kZXRhY2gvIiArCiAgICAgICAgICAgICAg\nICAiZGV0YWNoLXBlcnNpc3RlbmNlLnhtbCIpOwogICAgICAgIAogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIHZlcmlmeUNhc2NhZGVEZXRhY2goZW1mLCB0\ncnVlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBjbGVhbnVw\nRU1GKGVtZik7CiAgICAgICAgfSAgICAgIAogICAgfQogICAgCiAgICBwcml2\nYXRlIHZvaWQgdmVyaWZ5Q2FzY2FkZURldGFjaChFbnRpdHlNYW5hZ2VyRmFj\ndG9yeSBlbWYsIGJvb2xlYW4gY2FzY2FkZSkgewogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIExpc3Q8T2JqZWN0PiBkYXRhID0gY3JlYXRlRGF0YShlbSk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChkYXRhKTsKICAgICAgICBpbnQgc2l6ZSA9IGRhdGEu\nc2l6ZSgpOwogICAgICAgIGFzc2VydFRydWUoZGF0YS5zaXplKCkgPiAwKTsK\nICAgICAgICAKICAgICAgICAvLyBDeWNsZSB0aHJvdWdoIGFsbCBQQ3MsIHZl\ncmlmeWluZyBkZXRhY2ggc3RhdGUKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IHNpemU7IGkrKykgewogICAgICAgICAgICBPYmplY3QgZW50aXR5ID0g\nZGF0YS5nZXQoaSk7CiAgICAgICAgICAgIGVtLmRldGFjaChlbnRpdHkpOwog\nICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IHNpemU7IGorKyApIHsK\nICAgICAgICAgICAgICAgIGlmIChqID09IGkpIHsKICAgICAgICAgICAgICAg\nICAgICAvLyBCYXNlIGVudGl0eSBzaG91bGQgYWx3YXlzIGJlIGRldGFjaGVk\nCiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0RmFsc2UoZW0uY29udGFpbnMo\nZW50aXR5KSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICAgICAgICAgIE9iamVjdCBkZXRlbnQgPSBkYXRhLmdldChqKTsKICAgICAg\nICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoIWNhc2NhZGUsIGVtLmNvbnRh\naW5zKGRldGVudCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nCiAgICAgICAgICAgIC8vIFBvcHVsYXRlIG5ldyBkYXRhCiAgICAgICAgICAg\nIGRhdGEgPSBjcmVhdGVEYXRhKGVtKTsKICAgICAgICB9CiAgICAgICAgCiAg\nICB9CiAgICAKICAgIHByaXZhdGUgTGlzdDxPYmplY3Q+IGNyZWF0ZURhdGEo\nRW50aXR5TWFuYWdlciBlbSkgewogICAgICAgIExpc3Q8T2JqZWN0PiBkYXRh\nID0gbmV3IEFycmF5TGlzdDxPYmplY3Q+KCk7CiAgICAgICAgQXV0b21vYmls\nZSBhdXRvID0gbmV3IEF1dG9tb2JpbGUoKTsKICAgICAgICBhdXRvLnNldE1h\na2UoIkZvcmQiKTsKICAgICAgICBhdXRvLnNldE1vZGVsKCJQaW50byIpOwog\nICAgICAgIGRhdGEuYWRkKGF1dG8pOwogICAgICAgICAgICAgICAgCiAgICAg\nICAgQXV0b21vYmlsZSBhdXRvMiA9IG5ldyBBdXRvbW9iaWxlKCk7CiAgICAg\nICAgYXV0bzIuc2V0TWFrZSgiV2lubmViYWdvIik7CiAgICAgICAgYXV0bzIu\nc2V0TW9kZWwoIlNpZ2h0c2VlciIpOwogICAgICAgIGRhdGEuYWRkKGF1dG8y\nKTsKICAgICAgICAKICAgICAgICBMaXN0PEF1dG9tb2JpbGU+IGF1dG9zID0g\nbmV3IEFycmF5TGlzdDxBdXRvbW9iaWxlPigpOwogICAgICAgIGF1dG9zLmFk\nZChhdXRvKTsKICAgICAgICBhdXRvcy5hZGQoYXV0bzIpOwoKICAgICAgICBQ\nYXNzZW5nZXIgcDEgPSBuZXcgUGFzc2VuZ2VyKCk7CiAgICAgICAgcDEuc2V0\nTmFtZSgiQ3Jhc2ggdGVzdCBkdW1teSAwIik7CiAgICAgICAgcDEuc2V0QXV0\nb3MoYXV0b3MpOwogICAgICAgIGRhdGEuYWRkKHAxKTsKICAgICAgICAKICAg\nICAgICBQYXNzZW5nZXIgcDIgPSBuZXcgUGFzc2VuZ2VyKCk7CiAgICAgICAg\ncDIuc2V0TmFtZSgiQ3Jhc2ggdGVzdCBkdW1teSAxIik7CiAgICAgICAgcDIu\nc2V0QXV0b3MoYXV0b3MpOwogICAgICAgIGRhdGEuYWRkKHAyKTsKICAgICAg\nICAKICAgICAgICBMaXN0PFBhc3Nlbmdlcj4gcGFzc2VuZ2VycyA9IG5ldyBB\ncnJheUxpc3Q8UGFzc2VuZ2VyPigpOwogICAgICAgIHBhc3NlbmdlcnMuYWRk\nKHAxKTsKICAgICAgICBwYXNzZW5nZXJzLmFkZChwMik7CiAgICAgICAgYXV0\nby5zZXRQYXNzZW5nZXJzKHBhc3NlbmdlcnMpOwogICAgICAgIGF1dG8yLnNl\ndFBhc3NlbmdlcnMocGFzc2VuZ2Vycyk7CiAgICAgICAgCiAgICAgICAgRHJp\ndmVyIGQxID0gbmV3IERyaXZlcigpOwogICAgICAgIGQxLnNldEF1dG8oYXV0\nbyk7CiAgICAgICAgZDEuc2V0TmFtZSgiQ3Jhc2ggdGVzdCBkcml2ZXIgMCIp\nOwogICAgICAgIGF1dG8uc2V0UHJpbWFyeURyaXZlcihkMSk7CiAgICAgICAg\nZGF0YS5hZGQoZDEpOwogICAgICAgIAogICAgICAgIERyaXZlciBkMiA9IG5l\ndyBEcml2ZXIoKTsKICAgICAgICBkMi5zZXRBdXRvKGF1dG8yKTsKICAgICAg\nICBkMi5zZXROYW1lKCJDcmFzaCB0ZXN0IGRyaXZlciAxIik7CiAgICAgICAg\nYXV0bzIuc2V0UHJpbWFyeURyaXZlcihkMik7CiAgICAgICAgZGF0YS5hZGQo\nZDIpOwogICAgICAgIAogICAgICAgIE93bmVyIG93bmVyID0gbmV3IE93bmVy\nKCk7CiAgICAgICAgb3duZXIuc2V0TmFtZSgiRE1WIik7CiAgICAgICAgb3du\nZXIuc2V0QXV0b3MoYXV0b3MpOwogICAgICAgIGF1dG8uc2V0T3duZXIob3du\nZXIpOwogICAgICAgIGF1dG8yLnNldE93bmVyKG93bmVyKTsKICAgICAgICBk\nYXRhLmFkZChvd25lcik7CgogICAgICAgIC8vIFBlcnNpc3QgdGhlIG9iamVj\ndCBncmFwaAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsg\nICAgICAgIAogICAgICAgIGVtLnBlcnNpc3Qob3duZXIpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAg\ncmV0dXJuIGRhdGE7CiAgICB9CgoKICAgIC8qKgogICAgICogQ2xvc2VzIGEg\nc3BlY2lmaWMgZW50aXR5IG1hbmFnZXIgZmFjdG9yeSBhbmQgY2xlYW5zIHVw\nIAogICAgICogYXNzb2NpYXRlZCB0YWJsZXMuCiAgICAgKi8KICAgIHByaXZh\ndGUgdm9pZCBjbGVhbnVwRU1GKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neVNQSSBlbWYxKSAKICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAgICAg\nIGlmIChlbWYxID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgY2xlYXIoZW1mMSk7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gaWYgYSB0ZXN0\nIGZhaWxlZCwgc3dhbGxvdyBhbnkgZXhjZXB0aW9ucyB0aGF0IGhhcHBlbgog\nICAgICAgICAgICAvLyBkdXJpbmcgdGVhci1kb3duLCBhcyB0aGVzZSBqdXN0\nIG1hc2sgdGhlIG9yaWdpbmFsIHByb2JsZW0uCiAgICAgICAgICAgIGlmICh0\nZXN0UmVzdWx0Lndhc1N1Y2Nlc3NmdWwoKSkKICAgICAgICAgICAgICAgIHRo\ncm93IGU7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2xvc2VF\nTUYoZW1mMSk7CiAgICAgICAgfQogICAgfSAgICAKCn0K\n","encoding":"base64"}

