{"sha":"08bc140064e6e582c2039b553f74ed35cc52da27","node_id":"MDQ6QmxvYjIwNjM2NDowOGJjMTQwMDY0ZTZlNTgyYzIwMzliNTUzZjc0ZWQzNWNjNTJkYTI3","size":9945,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/08bc140064e6e582c2039b553f74ed35cc52da27","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZW1iZWQu\nYXR0ck92ZXJyaWRlczsKCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsK\naW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlUcmFuc2FjdGlvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1\nZXJ5OwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5Bc3NlcnQ7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU1FMTGlzdGVu\nZXJUZXN0Q2FzZTsKCnB1YmxpYyBjbGFzcyBUZXN0QXNzb2NPdmVycmlkZXMg\nIGV4dGVuZHMgU1FMTGlzdGVuZXJUZXN0Q2FzZSB7IAogICAgcHVibGljIGlu\ndCBudW1FbXBsb3llZXMgPSAyOwogICAgcHVibGljIGludCBudW1QaG9uZU51\nbWJlcnMgPSBudW1FbXBsb3llZXMgKyAxOwogICAgcHVibGljIGludCBudW1F\nbXBsb3llZXNQZXJQaG9uZU51bWJlciA9IDI7CiAgICBwdWJsaWMgaW50IG51\nbVBob25lTnVtYmVyc1BlckVtcGxveWVlID0gMjsKICAgIHB1YmxpYyBpbnQg\nbnVtSm9ic1BlckVtcGxveWVlID0gMjsKICAgIHB1YmxpYyBpbnQgZW1wSWQg\nPSAxOwogICAgcHVibGljIGludCBwaG9uZUlkID0gMTsKICAgIHB1YmxpYyBp\nbnQgYWRkcklkID0gMTsKICAgIHB1YmxpYyBpbnQgcG1JZCA9IDE7CiAgICBw\ndWJsaWMgaW50IHBlSWQgPSAxOwogICAgcHVibGljIGludCBwSWQgPSAxOwoK\nICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgc3VwZXIuc2V0VXAoRFJPUF9UQUJMRVMsIEFkZHJlc3MuY2xhc3Ms\nIENvbnRhY3RJbmZvLmNsYXNzLCAKICAgICAgICAgICAgRW1lcmdlbmN5Q29u\ndGFjdEluZm8uY2xhc3MsIEVtcGxveWVlLmNsYXNzLCBKb2JJbmZvLmNsYXNz\nLAogICAgICAgICAgICBQaG9uZU51bWJlci5jbGFzcywgUHJvZ3JhbU1hbmFn\nZXIuY2xhc3MsIFppcGNvZGUuY2xhc3MsCiAgICAgICAgICAgIEFic3RyYWN0\nRW1wbG95ZWUuY2xhc3MsIFBhcnRUaW1lRW1wbG95ZWUuY2xhc3MsIFByb2pl\nY3QuY2xhc3MpOwogICAgfQoKICAgIC8qKgogICAgICogVGVzdCBBc3NvY2lh\ndGlvbk92ZXJyaWRlcyBvbiBmaWVsZAogICAgICovCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0QXNzb2NPdmVycmlkZTEoKSB7CiAgICAgICAgc3FsLmNsZWFyKCk7\nCiAgICAgICAgY3JlYXRlT2JqMSgpOwogICAgICAgIGZpbmRPYmoxKCk7CiAg\nICAgICAgcXVlcnlPYmoxKCk7CiAgICAgICAgYXNzZXJ0TWFwcGluZ092ZXJy\naWRlcygiRU1QUEhPTkVTIik7CiAgICAgICAgYXNzZXJ0TWFwcGluZ092ZXJy\naWRlcygiRU1QX0FUVFJPVkVSIik7CiAgICAgICAgYXNzZXJ0TWFwcGluZ092\nZXJyaWRlcygiRU1QX0FUVFJPVkVSX2pvYkluZm9zIik7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUZXN0IEFzc29jaWF0aW9uT3ZlcnJpZGVzIG9uIGVudGl0\neSAoTWFwcGVkU3VwZXJjbGFzcykKICAgICAqLwogICAgcHVibGljIHZvaWQg\ndGVzdEFzc29jT3ZlcnJpZGUyKCkgewogICAgICAgIHNxbC5jbGVhcigpOwog\nICAgICAgIGNyZWF0ZU9iajIoKTsKICAgICAgICBmaW5kT2JqMigpOwogICAg\nICAgIHF1ZXJ5T2JqMigpOwogICAgICAgIGFzc2VydE1hcHBpbmdPdmVycmlk\nZXMoIlBBUlRfRU1QX0FTU09DIik7CiAgICAgICAgYXNzZXJ0TWFwcGluZ092\nZXJyaWRlcygiUEFSVF9FTVBfUFJPSkVDVFMiKTsKICAgfQogICAgCglwdWJs\naWMgdm9pZCBjcmVhdGVPYmoxKCkgewoJCUVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCUVudGl0eVRyYW5zYWN0aW9u\nIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwoJCWZvciAoaW50IGkgPSAw\nOyBpIDwgbnVtRW1wbG95ZWVzOyBpKyspCgkJICAgIGNyZWF0ZUVtcGxveWVl\nKGVtLCBlbXBJZCsrKTsKCQl0cmFuLmJlZ2luKCk7CgkJZW0uZmx1c2goKTsK\nCQl0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7Cgl9CgogICAg\ncHVibGljIEVtcGxveWVlIGNyZWF0ZUVtcGxveWVlKEVudGl0eU1hbmFnZXIg\nZW0sIGludCBpZCkgewogICAgICAgIEVtcGxveWVlIGUgPSBuZXcgRW1wbG95\nZWUoKTsKICAgICAgICBlLnNldEVtcElkKGlkKTsKICAgICAgICBDb250YWN0\nSW5mbyBjb250YWN0SW5mbyA9IG5ldyBDb250YWN0SW5mbygpOwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtUGhvbmVOdW1iZXJzUGVyRW1wbG95\nZWU7IGkrKykgeyAKICAgICAgICAgICAgUGhvbmVOdW1iZXIgcGhvbmVOdW1i\nZXIgPSBjcmVhdGVQaG9uZU51bWJlcihlbSk7CiAgICAgICAgICAgIGNvbnRh\nY3RJbmZvLmFkZFBob25lTnVtYmVyKHBob25lTnVtYmVyKTsKICAgICAgICAg\nICAgZS5zZXRDb250YWN0SW5mbyhjb250YWN0SW5mbyk7CiAgICAgICAgICAg\nIHBob25lTnVtYmVyLmFkZEVtcGxveWVlcyhlKTsKICAgICAgICAgICAgZW0u\ncGVyc2lzdChwaG9uZU51bWJlcik7CiAgICAgICAgfQogICAgICAgIEFkZHJl\nc3MgYWRkciA9IG5ldyBBZGRyZXNzKCk7CiAgICAgICAgYWRkci5zZXRJZChh\nZGRySWQrKyk7CiAgICAgICAgYWRkci5zZXRDaXR5KCJjaXR5XyIgKyBhZGRy\nLmdldElkKCkpOwogICAgICAgIGFkZHIuc2V0U3RhdGUoInN0YXRlXyIgKyBh\nZGRyLmdldElkKCkpOwogICAgICAgIGFkZHIuc2V0U3RyZWV0KCJzdHJlZXRf\nIiArIGFkZHIuZ2V0SWQoKSk7CiAgICAgICAgWmlwY29kZSB6aXAgPSBuZXcg\nWmlwY29kZSgpOwogICAgICAgIHppcC5zZXRaaXAoInppcF8iICsgYWRkci5n\nZXRJZCgpKTsKICAgICAgICB6aXAuc2V0UGx1c0ZvdXIoIis0XyIgKyBhZGRy\nLmdldElkKCkpOwogICAgICAgIGFkZHIuc2V0WmlwY29kZSh6aXApOwogICAg\nICAgIGVtLnBlcnNpc3QoYWRkcik7CiAgICAgICAgY29udGFjdEluZm8uc2V0\nQWRkcmVzcyhhZGRyKTsKICAgICAgICAgICAgICAgIAogICAgICAgIEVtZXJn\nZW5jeUNvbnRhY3RJbmZvIGVjSW5mbyA9IG5ldyBFbWVyZ2VuY3lDb250YWN0\nSW5mbygpOwogICAgICAgIGVjSW5mby5zZXRGTmFtZSgiZk5hbWVfIiArIGlk\nKTsKICAgICAgICBlY0luZm8uc2V0TE5hbWUoImxOYW1lXyIgKyBpZCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDU7IGkgPiAwOyBpLS0pIHsKICAgICAgICAg\nICAgZWNJbmZvLmFkZE5pY2tOYW1lKCJuaWNrTmFtZSIgKyBpKTsKICAgICAg\nICB9CiAgICAgICAgQWRkcmVzcyBlYWRkciA9IG5ldyBBZGRyZXNzKCk7CiAg\nICAgICAgZWFkZHIuc2V0SWQoYWRkcklkKyspOwogICAgICAgIGVhZGRyLnNl\ndENpdHkoImNpdHlfIiArIGVhZGRyLmdldElkKCkpOwogICAgICAgIGVhZGRy\nLnNldFN0YXRlKCJzdGF0ZV8iICsgZWFkZHIuZ2V0SWQoKSk7CiAgICAgICAg\nZWFkZHIuc2V0U3RyZWV0KCJzdHJlZXRfIiArIGVhZGRyLmdldElkKCkpOwog\nICAgICAgIFppcGNvZGUgZXppcCA9IG5ldyBaaXBjb2RlKCk7CiAgICAgICAg\nZXppcC5zZXRaaXAoInppcF8iICsgZWFkZHIuZ2V0SWQoKSk7CiAgICAgICAg\nZXppcC5zZXRQbHVzRm91cigiKzRfIiArIGVhZGRyLmdldElkKCkpOwogICAg\nICAgIGVhZGRyLnNldFppcGNvZGUoZXppcCk7CiAgICAgICAgZWNJbmZvLnNl\ndEFkZHJlc3MoZWFkZHIpOwogICAgICAgIGNvbnRhY3RJbmZvLnNldEVtZXJn\nZW5jeUNvbnRhY3RJbmZvKGVjSW5mbyk7CiAgICAgICAgUGhvbmVOdW1iZXIg\ncGhvbmVOdW1iZXIgPSBjcmVhdGVQaG9uZU51bWJlcihlbSk7CiAgICAgICAg\nZWNJbmZvLnNldFBob25lTnVtYmVyKHBob25lTnVtYmVyKTsKICAgICAgICBl\nbS5wZXJzaXN0KGVhZGRyKTsKICAgICAgICAKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IG51bUpvYnNQZXJFbXBsb3llZTsgaSsrKSB7CiAgICAgICAg\nCUpvYkluZm8gam9iID0gbmV3IEpvYkluZm8oKTsKICAgICAgICAJam9iLnNl\ndEpvYkRlc2NyaXB0aW9uKCJqb2JfIiArIGlkICsgIl8iICsgaSk7CiAgICAg\nICAgCVByb2dyYW1NYW5hZ2VyIHBtID0gbmV3IFByb2dyYW1NYW5hZ2VyKCk7\nCiAgICAgICAgCXBtLnNldElkKHBtSWQrKyk7CiAgICAgICAgCXBtLmFkZE1h\nbmFnZShlKTsKICAgICAgICAJZW0ucGVyc2lzdChwbSk7CiAgICAgICAgCWpv\nYi5zZXRQcm9ncmFtTWFuYWdlcihwbSk7CiAgICAgICAgCWUuYWRkSm9iSW5m\nbyhqb2IpOwogICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0KGUpOwogICAg\nICAgIHJldHVybiBlOwogICAgfQoJCiAgICBwdWJsaWMgUGhvbmVOdW1iZXIg\nY3JlYXRlUGhvbmVOdW1iZXIoRW50aXR5TWFuYWdlciBlbSkgewogICAgCVBo\nb25lTnVtYmVyIHAgPSBuZXcgUGhvbmVOdW1iZXIoKTsKICAgIAlwLnNldFBo\nTnVtYmVyKHBob25lSWQrKyk7CiAgICAJZW0ucGVyc2lzdChwKTsKICAgIAly\nZXR1cm4gcDsKICAgIH0gICAgCiAgICAKCXB1YmxpYyB2b2lkIGZpbmRPYmox\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogCSAgICBFbXBsb3llZSBlID0gZW0uZmluZChFbXBs\nb3llZS5jbGFzcywgMSk7CgkgICAgYXNzZXJ0RW1wbG95ZWUoZSk7CgkgICAg\nZW0uY2xvc2UoKTsKCX0KCQoJcHVibGljIHZvaWQgcXVlcnlPYmoxKCkgewoJ\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwoJICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFu\nc2FjdGlvbigpOwoJICAgIHRyYW4uYmVnaW4oKTsKCSAgICBRdWVyeSBxID0g\nZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBlIGZyb20gRW1wbG95ZWUgZSIpOwoJ\nICAgIExpc3Q8RW1wbG95ZWU+IGVzID0gcS5nZXRSZXN1bHRMaXN0KCk7Cgkg\nICAgZm9yIChFbXBsb3llZSBlIDogZXMpewoJICAgICAgICBhc3NlcnRFbXBs\nb3llZShlKTsKCSAgICB9CgkgICAgdHJhbi5jb21taXQoKTsKCSAgICBlbS5j\nbG9zZSgpOwoJfQoKICAgIHB1YmxpYyB2b2lkIGFzc2VydEVtcGxveWVlKEVt\ncGxveWVlIGUpIHsKICAgICAgICBpbnQgaWQgPSBlLmdldEVtcElkKCk7CiAg\nICAgICAgQ29udGFjdEluZm8gYyA9IGUuZ2V0Q29udGFjdEluZm8oKTsKICAg\nICAgICBMaXN0PFBob25lTnVtYmVyPiBwaG9uZXMgPSBjLmdldFBob25lTnVt\nYmVycygpOwogICAgICAgIGZvciAoUGhvbmVOdW1iZXIgcCA6IHBob25lcykg\newogICAgICAgICAgICBhc3NlcnRQaG9uZU51bWJlcihwLCBlLmdldEVtcElk\nKCkpOwogICAgICAgIH0KICAgICAgICBDb2xsZWN0aW9uPFN0cmluZz4gbmlj\na05hbWVzID0gYy5nZXRFbWVyZ2VuY3lDb250YWN0SW5mbygpLgogICAgICAg\nICAgICBnZXROaWNrTmFtZXMoKTsKICAgICAgICBpbnQgaSA9IDE7CiAgICAg\nICAgZm9yIChTdHJpbmcgbmlja05hbWUgOiBuaWNrTmFtZXMpIHsKICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJuaWNrTmFtZSIgKyBpLCBuaWNrTmFtZSk7\nCiAgICAgICAgICAgIGkrKzsKICAgICAgICB9CiAgICB9CgkKICAgIHB1Ymxp\nYyB2b2lkIGFzc2VydFBob25lTnVtYmVyKFBob25lTnVtYmVyIHAsIGludCBl\nbXBJZCkgewogICAgICAgIGludCBudW1iZXIgPSBwLmdldFBoTnVtYmVyKCk7\nCiAgICAgICAgQ29sbGVjdGlvbjxFbXBsb3llZT4gZXMgPSBwLmdldEVtcGxv\neWVlcygpOwogICAgICAgIGZvciAoRW1wbG95ZWUgZTogZXMpIHsKICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKGVtcElkLCBlLmdldEVtcElkKCkpOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVPYmoyKCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5n\nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nbnVtRW1wbG95ZWVzOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZVBhcnRUaW1l\nRW1wbG95ZWUoZW0sIHBlSWQrKyk7CiAgICAgICAgdHJhbi5iZWdpbigpOwog\nICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyBQYXJ0VGltZUVt\ncGxveWVlIGNyZWF0ZVBhcnRUaW1lRW1wbG95ZWUoRW50aXR5TWFuYWdlciBl\nbSwgaW50IGlkKSB7CiAgICAgICAgUGFydFRpbWVFbXBsb3llZSBwID0gbmV3\nIFBhcnRUaW1lRW1wbG95ZWUoKTsKICAgICAgICBwLnNldElkKGlkKTsKICAg\nICAgICBBZGRyZXNzIGFkZHIgPSBuZXcgQWRkcmVzcygpOwogICAgICAgIGFk\nZHIuc2V0SWQoaWQpOwogICAgICAgIGFkZHIuc2V0Q2l0eSgiY2l0eV8iICsg\naWQpOwogICAgICAgIGFkZHIuc2V0U3RhdGUoInN0YXRlXyIgKyBpZCk7CiAg\nICAgICAgYWRkci5zZXRTdHJlZXQoInN0cmVldF8iICsgaWQpOwogICAgICAg\nIHAuc2V0QWRkcmVzcyhhZGRyKTsKICAgICAgICBwLnNldEhvdXJseVdhZ2Uo\nKGZsb2F0KTEwMCk7CiAgICAgICAgUHJvamVjdCBwcm9qZWN0ID0gbmV3IFBy\nb2plY3QoKTsKICAgICAgICBwcm9qZWN0LnNldElkKHBJZCsrKTsKICAgICAg\nICBwcm9qZWN0LnNldERlc2NyaXB0aW9uKCJwXyIgKyBwcm9qZWN0LmdldElk\nKCkpOwogICAgICAgIHAuYWRkUHJvamVjdChwcm9qZWN0KTsKICAgICAgICBl\nbS5wZXJzaXN0KGFkZHIpOwogICAgICAgIGVtLnBlcnNpc3QocCk7CiAgICAg\nICAgZW0ucGVyc2lzdChwcm9qZWN0KTsKICAgICAgICByZXR1cm4gcDsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBmaW5kT2JqMigpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBQYXJ0VGltZUVtcGxveWVlIHAgPSBlbS5maW5kKFBhcnRUaW1lRW1w\nbG95ZWUuY2xhc3MsIDEpOwogICAgICAgIEFzc2VydC5hc3NlcnRFcXVhbHMo\ncC5nZXRIb3VybHlXYWdlKCksIChmbG9hdCkxMDApOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHF1ZXJ5T2JqMigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRp\ndHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAg\nICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgU3RyaW5nIGZpcnN0TmFtZSA9\nICJmXzEiOwogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20g\nUGFydFRpbWVFbXBsb3llZSBwIjsKICAgICAgICBRdWVyeSBxID0gZW0uY3Jl\nYXRlUXVlcnkoanBxbCk7CiAgICAgICAgTGlzdDxQYXJ0VGltZUVtcGxveWVl\nPiBwcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIEFzc2VydC5hc3Nl\ncnRFcXVhbHMocHMuc2l6ZSgpLCBudW1FbXBsb3llZXMpOwogICAgICAgIHRy\nYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAog\nICAgcHVibGljIHZvaWQgYXNzZXJ0TWFwcGluZ092ZXJyaWRlcyhTdHJpbmcg\ndGFibGVOYW1lKSB7CiAgICAgICAgYm9vbGVhbiBmb3VuZCA9IGZhbHNlOwog\nICAgICAgIGZvciAoU3RyaW5nIHNxbFN0ciA6IHNxbCkgewogICAgICAgICAg\nICBTdHJpbmcga2V5ID0gIkNSRUFURSBUQUJMRSAiICsgdGFibGVOYW1lICsg\nIiAiOwogICAgICAgICAgICBpZiAoc3FsU3RyLmluZGV4T2Yoa2V5KSAhPSAt\nMSkgewogICAgICAgICAgICAgICAgaWYgKHRhYmxlTmFtZS5lcXVhbHMoIkVN\nUFBIT05FUyIpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNxbFN0ci5p\nbmRleE9mKCJFTVAiKSA9PSAtMSB8fAogICAgICAgICAgICAgICAgICAgICAg\nICBzcWxTdHIuaW5kZXhPZigiUEhPTkUiKSA9PSAtMSkKICAgICAgICAgICAg\nICAgICAgICAgICAgZmFpbCgpOwogICAgICAgICAgICAgICAgICAgIGZvdW5k\nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFibGVOYW1l\nLmVxdWFscygiRU1QX0FUVFJPVkVSIikpIHsKICAgICAgICAgICAgICAgICAg\nICBpZiAoc3FsU3RyLmluZGV4T2YoIkVNUF9BRERSIikgPT0gLTEgfHwKICAg\nICAgICAgICAgICAgICAgICAgICAgc3FsU3RyLmluZGV4T2YoIkVNRVJHRU5D\nWV9GTkFNRSIpID09IC0xIHx8CiAgICAgICAgICAgICAgICAgICAgICAgIHNx\nbFN0ci5pbmRleE9mKCJFTUVSR0VOQ1lfTE5BTUUiKSA9PSAtMSB8fAogICAg\nICAgICAgICAgICAgICAgICAgICBzcWxTdHIuaW5kZXhPZigiRU1FUkdFTkNZ\nX0FERFIiKSA9PSAtMSB8fAogICAgICAgICAgICAgICAgICAgICAgICBzcWxT\ndHIuaW5kZXhPZigiRU1FUkdFTkNZX1BIT05FIikgPT0gLTEpCiAgICAgICAg\nICAgICAgICAgICAgICAgIGZhaWwoKTsKICAgICAgICAgICAgICAgICAgICBm\nb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhYmxl\nTmFtZS5lcXVhbHMoIkVNUF9BVFRST1ZFUl9qb2JJbmZvcyIpKSB7CiAgICAg\nICAgICAgICAgICAgICAgaWYgKHNxbFN0ci5pbmRleE9mKCJKT0JfS0VZIikg\nPT0gLTEgfHwKICAgICAgICAgICAgICAgICAgICAgICAgc3FsU3RyLmluZGV4\nT2YoIkpPQl9ERVNDIikgPT0gLTEgfHwKICAgICAgICAgICAgICAgICAgICAg\nICAgc3FsU3RyLmluZGV4T2YoIlBST0dSQU1fTUdSIikgPT0gLTEpCiAgICAg\nICAgICAgICAgICAgICAgICAgIGZhaWwoKTsKICAgICAgICAgICAgICAgICAg\nICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRh\nYmxlTmFtZS5lcXVhbHMoIlBBUlRfRU1QX0FTU09DIikpIHsKICAgICAgICAg\nICAgICAgICAgICBpZiAoc3FsU3RyLmluZGV4T2YoIkFERFJfSUQiKSA9PSAt\nMSkKICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCgpOwogICAgICAgICAg\nICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxz\nZSBpZiAodGFibGVOYW1lLmVxdWFscygiUEFSVF9FTVBfUFJPSkVDVFMiKSkg\newogICAgICAgICAgICAgICAgICAgIGlmIChzcWxTdHIuaW5kZXhPZigiUEFS\nVF9FTVAiKSA9PSAtMSB8fAogICAgICAgICAgICAgICAgICAgICAgICBzcWxT\ndHIuaW5kZXhPZigiUFJPSkVDVF9JRCIpID09IC0xKQogICAgICAgICAgICAg\nICAgICAgICAgICBmYWlsKCk7CiAgICAgICAgICAgICAgICAgICAgZm91bmQg\nPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIH0gCiAgICAgICAgfQogICAgICAgIGlmICghZm91\nbmQpIHsKICAgICAgICAgICAgZmFpbCgpOwogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

