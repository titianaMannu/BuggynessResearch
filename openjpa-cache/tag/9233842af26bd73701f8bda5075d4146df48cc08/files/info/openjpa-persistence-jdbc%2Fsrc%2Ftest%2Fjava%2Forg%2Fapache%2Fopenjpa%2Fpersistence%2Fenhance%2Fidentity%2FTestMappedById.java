{"sha":"034b95f06696996b7e62d56c75f7888e23eb8fb4","node_id":"MDQ6QmxvYjIwNjM2NDowMzRiOTVmMDY2OTY5OTZiN2U2MmQ1NmM3NWY3ODg4ZTIzZWI4ZmI0","size":25442,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/034b95f06696996b7e62d56c75f7888e23eb8fb4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZW5oYW5j\nZS5pZGVudGl0eTsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBv\ncnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsK\naW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eVRyYW5zYWN0aW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVl\ncnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2UuUGVyc2lz\ndGVuY2VDYXBhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuU3RhdGVNYW5hZ2VySW1wbDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNl\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT2JqZWN0SWQ7Cgpw\ndWJsaWMgY2xhc3MgVGVzdE1hcHBlZEJ5SWQgZXh0ZW5kcyBTaW5nbGVFTUZU\nZXN0Q2FzZSB7CiAgICBwdWJsaWMgaW50IG51bUVtcGxveWVlcyA9IDQ7CiAg\nICBwdWJsaWMgaW50IG51bURlcGVuZGVudHNQZXJFbXBsb3llZSA9IDI7CiAg\nICBwdWJsaWMgaW50IG51bVBlcnNvbnMgPSA0OwoKICAgIHB1YmxpYyBNYXA8\nSW50ZWdlciwgRW1wbG95ZWUxPiBlbXBzMSA9IG5ldyBIYXNoTWFwPEludGVn\nZXIsIEVtcGxveWVlMT4oKTsKICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBEZXBl\nbmRlbnQxPiBkZXBzMSA9IG5ldyBIYXNoTWFwPFN0cmluZywgRGVwZW5kZW50\nMT4oKTsKICAgIHB1YmxpYyBNYXA8SW50ZWdlciwgRW1wbG95ZWUyPiBlbXBz\nMiA9IG5ldyBIYXNoTWFwPEludGVnZXIsIEVtcGxveWVlMj4oKTsKICAgIHB1\nYmxpYyBNYXA8U3RyaW5nLCBEZXBlbmRlbnQyPiBkZXBzMiA9IG5ldyBIYXNo\nTWFwPFN0cmluZywgRGVwZW5kZW50Mj4oKTsKICAgIHB1YmxpYyBNYXA8U3Ry\naW5nLCBQZXJzb24xPiBwZXJzb25zMSA9IG5ldyBIYXNoTWFwPFN0cmluZywg\nUGVyc29uMT4oKTsKICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBNZWRpY2FsSGlz\ndG9yeTE+IG1lZGljYWxzMSA9IAogICAgICAgIG5ldyBIYXNoTWFwPFN0cmlu\nZywgTWVkaWNhbEhpc3RvcnkxPigpOwogICAgcHVibGljIE1hcDxTdHJpbmcs\nIFBlcnNvbjI+IHBlcnNvbnMyID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQZXJz\nb24yPigpOwogICAgcHVibGljIE1hcDxTdHJpbmcsIE1lZGljYWxIaXN0b3J5\nMj4gbWVkaWNhbHMyID0gCiAgICAgICAgbmV3IEhhc2hNYXA8U3RyaW5nLCBN\nZWRpY2FsSGlzdG9yeTI+KCk7CiAgICBwdWJsaWMgTWFwPFN0cmluZywgUGVy\nc29uMz4gcGVyc29uczMgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFBlcnNvbjM+\nKCk7CiAgICBwdWJsaWMgTWFwPFN0cmluZywgTWVkaWNhbEhpc3RvcnkzPiBt\nZWRpY2FsczMgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIAogICAgICAgIE1lZGlj\nYWxIaXN0b3J5Mz4oKTsKICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBQZXJzb240\nPiBwZXJzb25zNCA9IG5ldyBIYXNoTWFwPFN0cmluZywgUGVyc29uND4oKTsK\nICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBNZWRpY2FsSGlzdG9yeTQ+IG1lZGlj\nYWxzNCA9CiAgICAgICAgbmV3IEhhc2hNYXA8U3RyaW5nLCBNZWRpY2FsSGlz\ndG9yeTQ+KCk7CgogICAgcHVibGljIE1hcDxJbnRlZ2VyLCBFbXBsb3llZTM+\nIGVtcHMzID0gbmV3IEhhc2hNYXA8SW50ZWdlciwgRW1wbG95ZWUzPigpOwog\nICAgcHVibGljIE1hcDxPYmplY3QsIERlcGVuZGVudDM+IGRlcE1hcDMgPSAK\nICAgIAluZXcgSGFzaE1hcDxPYmplY3QsIERlcGVuZGVudDM+KCk7CiAgICBw\ndWJsaWMgTGlzdCBkaWRzMyA9IG5ldyBBcnJheUxpc3QoKTsKICAgIHB1Ymxp\nYyBMaXN0PERlcGVuZGVudDM+IGRlcHMzID0gbmV3IEFycmF5TGlzdDxEZXBl\nbmRlbnQzPigpOwogICAgCiAgICBwdWJsaWMgaW50IGVJZDEgPSAxOwogICAg\ncHVibGljIGludCBkSWQxID0gMTsKICAgIHB1YmxpYyBpbnQgZUlkMiA9IDE7\nCiAgICBwdWJsaWMgaW50IGRJZDIgPSAxOwogICAgcHVibGljIGludCBlSWQz\nID0gMTsKICAgIHB1YmxpYyBpbnQgZUlkNCA9IDE7CiAgICBwdWJsaWMgaW50\nIGRJZDQgPSAxOwogICAgcHVibGljIGludCBkSWQzID0gMTsKICAgIHB1Ymxp\nYyBpbnQgcElkMSA9IDE7CiAgICBwdWJsaWMgaW50IG1JZDEgPSAxOwogICAg\ncHVibGljIGludCBwSWQyID0gMTsKICAgIHB1YmxpYyBpbnQgbUlkMiA9IDE7\nCiAgICBwdWJsaWMgaW50IHBJZDMgPSAxOwogICAgcHVibGljIGludCBtSWQz\nID0gMTsKICAgIHB1YmxpYyBpbnQgcElkNCA9IDE7CiAgICBwdWJsaWMgaW50\nIG1JZDQgPSAxOwoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoRFJPUF9UQUJMRVMsIERl\ncGVuZGVudDEuY2xhc3MsIEVtcGxveWVlLmNsYXNzLCBFbXBsb3llZTEuY2xh\nc3MsIAogICAgICAgICAgICBEZXBlbmRlbnRJZDEuY2xhc3MsIERlcGVuZGVu\ndDIuY2xhc3MsIEVtcGxveWVlMi5jbGFzcywKICAgICAgICAgICAgRGVwZW5k\nZW50SWQyLmNsYXNzLCBFbXBsb3llZUlkMi5jbGFzcywgTWVkaWNhbEhpc3Rv\ncnkxLmNsYXNzLAogICAgICAgICAgICBQZXJzb24xLmNsYXNzLCBQZXJzb25J\nZDEuY2xhc3MsIE1lZGljYWxIaXN0b3J5Mi5jbGFzcywKICAgICAgICAgICAg\nUGVyc29uMi5jbGFzcywgUGVyc29uMy5jbGFzcywgTWVkaWNhbEhpc3Rvcnkz\nLmNsYXNzLCAKICAgICAgICAgICAgUGVyc29uNC5jbGFzcywgUGVyc29uSWQ0\nLmNsYXNzLCBNZWRpY2FsSGlzdG9yeTQuY2xhc3MsCiAgICAgICAgICAgIERl\ncGVuZGVudDMuY2xhc3MsIEVtcGxveWVlMy5jbGFzcywgRGVwZW5kZW50SWQz\nLmNsYXNzLCAKICAgICAgICAgICAgUGFyZW50My5jbGFzcywgRGVwZW5kZW50\nNC5jbGFzcywgRW1wbG95ZWU0LmNsYXNzLCBQaG9uZU51bWJlci5jbGFzcywK\nICAgICAgICAgICAgQmVuZUNvbnRhY3QuY2xhc3MsIEJlbmVDb250YWN0SWQu\nY2xhc3MsIEJlbmVmaWNpYXJ5LmNsYXNzKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFRoaXMgaXMgc3BlYyAyLjQuMS4yIEV4YW1wbGUgMSwgY2FzZShiKQog\nICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWFwcGVkQnlJZDEoKSB7CiAg\nICAgICAgY3JlYXRlT2JqMSgpOwogICAgICAgIGZpbmRPYmoxKCk7CiAgICAg\nICAgcXVlcnlPYmoxKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIGlz\nIHNwZWMgMi40LjEuMiBFeGFtcGxlIDMsIGNhc2UoYikKICAgICAqLwogICAg\ncHVibGljIHZvaWQgdGVzdE1hcHBlZEJ5SWQyKCkgewogICAgICAgIGNyZWF0\nZU9iajIoKTsKICAgICAgICBmaW5kT2JqMigpOwogICAgICAgIHF1ZXJ5T2Jq\nMigpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFRoaXMgaXMgc3BlYyAy\nLjQuMS4yIEV4YW1wbGUgNSwgY2FzZShiKQogICAgICovCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0TWFwcGVkQnlJZDMoKSB7CiAgICAgICAgY3JlYXRlT2JqMygp\nOwogICAgICAgIGZpbmRPYmozKCk7CiAgICAgICAgcXVlcnlPYmozKCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGlzIGlzIGEgdmFyaWF0aW9uIG9mIHNw\nZWMgMi40LjEuMiBFeGFtcGxlIDQsIGNhc2UoYikgd2l0aCBnZW5lcmF0ZWQg\na2V5CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RNYXBwZWRCeUlkNCgp\nIHsKICAgICAgICAvLyBOb3QgYWxsIGRhdGFiYXNlcyBzdXBwb3J0IEdlbmVy\nYXRpb25UeXBlLklERU5USVRZIGNvbHVtbihzKQogICAgICAgIGlmICghKChK\nREJDQ29uZmlndXJhdGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKSkuCiAg\nICAgICAgICAgIGdldERCRGljdGlvbmFyeUluc3RhbmNlKCkuc3VwcG9ydHNB\ndXRvQXNzaWduKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAg\nICAgICAgY3JlYXRlT2JqNCgpOwogICAgICAgIHF1ZXJ5T2JqNCgpOwogICAg\nfQoKICAgIC8qKgogICAgICogVGhpcyBpcyBhIHZhcmlhdGlvbiBvZiBzcGVj\nIDIuNC4xLjIgRXhhbXBsZSAxLCBjYXNlKGIpOgogICAgICogdHdvIE1hcHBl\nZEJ5SWQgYW5ub3RhdGlvbnMgaW4gRGVwZW5kZW50MyBhbmQgYm90aCBwYXJl\nbnQKICAgICAqIGNsYXNzZXMgdXNlIGdlbmVyYXRlZCBrZXkgCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHRlc3RNYXBwZWRCeUlkNSgpIHsKICAgICAgICAv\nLyBOb3QgYWxsIGRhdGFiYXNlcyBzdXBwb3J0IEdlbmVyYXRpb25UeXBlLklE\nRU5USVRZIGNvbHVtbihzKQogICAgICAgIGlmICghKChKREJDQ29uZmlndXJh\ndGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKSkuCiAgICAgICAgICAgIGdl\ndERCRGljdGlvbmFyeUluc3RhbmNlKCkuc3VwcG9ydHNBdXRvQXNzaWduKSB7\nCgkJCXJldHVybjsKICAgICAgICB9CiAgICAgICAgY3JlYXRlT2JqNSgpOwog\nICAgICAgIGZpbmRPYmo1KCk7CiAgICAgICAgcXVlcnlPYmo1KCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUaGlzIGlzIHNwZWMgMi40LjEuMiBFeGFtcGxl\nIDUsIGNhc2UoYSkKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdE1hcHBl\nZEJ5SWQ2KCkgewogICAgICAgIGNyZWF0ZU9iajYoKTsKICAgICAgICBmaW5k\nT2JqNigpOwogICAgICAgIHF1ZXJ5T2JqNigpOwogICAgfQoKICAgIC8qKgog\nICAgICogVGhpcyBpcyBzcGVjIDIuNC4xLjIgRXhhbXBsZSA2LCBjYXNlKGEp\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RNYXBwZWRCeUlkNygpIHsK\nICAgICAgICBjcmVhdGVPYmo3KCk7CiAgICAgICAgZmluZE9iajcoKTsKICAg\nICAgICBxdWVyeU9iajcoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRW51bUlkQ2xhc3MoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW1wbG95ZWUgZSA9\nIG5ldyBFbXBsb3llZSgpOwogICAgICAgIGUuc2V0RW1wSWQoMSk7CiAgICAg\nICAgZS5zZXRFbXBUeXBlKEVtcGxveWVlLkVtcFR5cGUuQTEpOwogICAgICAg\nIFBob25lTnVtYmVyIHBob25lTnVtYmVyID0gbmV3IFBob25lTnVtYmVyKCk7\nCiAgICAgICAgcGhvbmVOdW1iZXIuc2V0UGhOdW1iZXIoMSk7CiAgICAgICAg\ncGhvbmVOdW1iZXIuc2V0RW1wKGUpOwogICAgICAgIGUuc2V0UGhvbmVOdW1i\nZXIocGhvbmVOdW1iZXIpOwogICAgICAgIGVtLnBlcnNpc3QocGhvbmVOdW1i\nZXIpOwogICAgICAgIGVtLnBlcnNpc3QoZSk7CiAgICAgICAgRW50aXR5VHJh\nbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAg\ndHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJh\nbi5jb21taXQoKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIFBob25l\nTnVtYmVyIHAgPSBlbS5maW5kKFBob25lTnVtYmVyLmNsYXNzLCAxKTsKICAg\nICAgICBFbXBsb3llZSBlbXAgPSBwLmdldEVtcCgpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBlbXAuZ2V0RW1wSWQoKSk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KICAgIAogICAgCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVPYmox\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4g\nPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgbnVtRW1wbG95ZWVzOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZUVt\ncGxveWVlMShlbSwgZUlkMSsrKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAg\nICAgICAgZW0uZmx1c2goKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIEVtcGxveWVlMSBj\ncmVhdGVFbXBsb3llZTEoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAg\nICAgICAgRW1wbG95ZWUxIGUgPSBuZXcgRW1wbG95ZWUxKCk7CiAgICAgICAg\nZS5zZXRFbXBJZChpZCk7CiAgICAgICAgZS5zZXROYW1lKCJlbXBfIiArIGlk\nKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bURlcGVuZGVudHNQ\nZXJFbXBsb3llZTsgaSsrKSB7CiAgICAgICAgICAgIERlcGVuZGVudDEgZCA9\nIGNyZWF0ZURlcGVuZGVudDEoZW0sIGRJZDErKywgZSk7CiAgICAgICAgICAg\nIGUuYWRkRGVwZW5kZW50KGQpOwogICAgICAgICAgICBlbS5wZXJzaXN0KGQp\nOwogICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0KGUpOwogICAgICAgIGVt\ncHMxLnB1dChpZCwgZSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CgogICAg\ncHVibGljIERlcGVuZGVudDEgY3JlYXRlRGVwZW5kZW50MShFbnRpdHlNYW5h\nZ2VyIGVtLCBpbnQgaWQsIEVtcGxveWVlMSBlKSB7CiAgICAgICAgRGVwZW5k\nZW50MSBkID0gbmV3IERlcGVuZGVudDEoKTsKICAgICAgICBEZXBlbmRlbnRJ\nZDEgZGlkID0gbmV3IERlcGVuZGVudElkMSgpOwogICAgICAgIGRpZC5zZXRO\nYW1lKCJkZXBfIiArIGlkKTsKICAgICAgICBkLnNldElkKGRpZCk7CiAgICAg\nICAgZC5zZXRFbXAoZSk7CiAgICAgICAgZGVwczEucHV0KGRpZC5nZXROYW1l\nKCksIGQpOwogICAgICAgIHJldHVybiBkOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGZpbmRPYmoxKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVtcGxveWVlMSBl\nID0gZW0uZmluZChFbXBsb3llZTEuY2xhc3MsIDEpOwogICAgICAgIExpc3Q8\nRGVwZW5kZW50MT4gZHMgPSBlLmdldERlcGVuZGVudHMoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMobnVtRGVwZW5kZW50c1BlckVtcGxveWVlLCBkcy5zaXpl\nKCkpOwogICAgICAgIEVtcGxveWVlMSBlMCA9IGVtcHMxLmdldCgxKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoZTAsIGUpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHF1ZXJ5T2JqMSgpIHsKICAgICAgICBxdWVyeURlcGVuZGVudDEoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeURlcGVuZGVudDEoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdl\ndFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAg\nIFN0cmluZyBqcHFsID0gInNlbGVjdCBkIGZyb20gRGVwZW5kZW50MSBkIHdo\nZXJlIGQuaWQubmFtZSA9ICdkZXBfMScgIgogICAgICAgICAgICArICJBTkQg\nZC5lbXAubmFtZSA9ICdlbXBfMSciOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5j\ncmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBMaXN0PERlcGVuZGVudDE+IGRz\nID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChEZXBlbmRlbnQx\nIGQgOiBkcykgewogICAgICAgICAgICBhc3NlcnREZXBlbmRlbnQxKGQpOwog\nICAgICAgIH0KICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXNzZXJ0RGVwZW5kZW50\nMShEZXBlbmRlbnQxIGQpIHsKICAgICAgICBEZXBlbmRlbnRJZDEgaWQgPSBk\nLmdldElkKCk7CiAgICAgICAgRGVwZW5kZW50MSBkMCA9IGRlcHMxLmdldChp\nZC5nZXROYW1lKCkpOwogICAgICAgIGlmIChkMC5pZC5lbXBQSyA9PSAwKQog\nICAgICAgICAgICBkMC5pZC5lbXBQSyA9IGQwLmVtcC5nZXRFbXBJZCgpOwog\nICAgICAgIGFzc2VydEVxdWFscyhkMCwgZCk7CiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIGNyZWF0ZU9iajIoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50\naXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbXBsb3llZXM7IGkrKykK\nICAgICAgICAgICAgY3JlYXRlRW1wbG95ZWUyKGVtLCBlSWQyKyspOwogICAg\nICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAg\nIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAg\nIAogICAgcHVibGljIEVtcGxveWVlMiBjcmVhdGVFbXBsb3llZTIoRW50aXR5\nTWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW1wbG95ZWUyIGUgPSBu\nZXcgRW1wbG95ZWUyKCk7CiAgICAgICAgZS5zZXRFbXBJZChuZXcgRW1wbG95\nZWVJZDIoImZfIiArIGlkLCAibF8iICsgaWQpKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IG51bURlcGVuZGVudHNQZXJFbXBsb3llZTsgaSsrKSB7\nCiAgICAgICAgICAgIERlcGVuZGVudDIgZCA9IGNyZWF0ZURlcGVuZGVudDIo\nZW0sIGRJZDIrKywgZSk7CiAgICAgICAgICAgIGUuYWRkRGVwZW5kZW50KGQp\nOwogICAgICAgICAgICBlbS5wZXJzaXN0KGQpOwogICAgICAgIH0KICAgICAg\nICBlbS5wZXJzaXN0KGUpOwogICAgICAgIGVtcHMyLnB1dChpZCwgZSk7CiAg\nICAgICAgcmV0dXJuIGU7CiAgICB9CgogICAgcHVibGljIERlcGVuZGVudDIg\nY3JlYXRlRGVwZW5kZW50MihFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQsIEVt\ncGxveWVlMiBlKSB7CiAgICAgICAgRGVwZW5kZW50MiBkID0gbmV3IERlcGVu\nZGVudDIoKTsKICAgICAgICBEZXBlbmRlbnRJZDIgZGlkID0gbmV3IERlcGVu\nZGVudElkMigpOwogICAgICAgIGRpZC5zZXROYW1lKCJkZXBfIiArIGlkKTsK\nICAgICAgICBkLnNldEVtcChlKTsKICAgICAgICBkLnNldElkKGRpZCk7CiAg\nICAgICAgZW0ucGVyc2lzdChkKTsKICAgICAgICBkZXBzMi5wdXQoZGlkLmdl\ndE5hbWUoKSwgZCk7CiAgICAgICAgcmV0dXJuIGQ7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgZmluZE9iajIoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW1wbG95\nZWUyIGUgPSBlbS5maW5kKEVtcGxveWVlMi5jbGFzcywgbmV3IEVtcGxveWVl\nSWQyKCJmXzEiLCAibF8xIikpOwogICAgICAgIExpc3Q8RGVwZW5kZW50Mj4g\nZHMgPSBlLmdldERlcGVuZGVudHMoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nbnVtRGVwZW5kZW50c1BlckVtcGxveWVlLCBkcy5zaXplKCkpOwogICAgICAg\nIEVtcGxveWVlMiBlMCA9IGVtcHMyLmdldCgxKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoZTAsIGUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5T2Jq\nMigpIHsKICAgICAgICBxdWVyeURlcGVuZGVudDIoKTsKICAgIH0KICAgIHB1\nYmxpYyB2b2lkIHF1ZXJ5RGVwZW5kZW50MigpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24o\nKTsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgZCBmcm9tIERlcGVu\nZGVudDIgZCB3aGVyZSBkLmlkLm5hbWUgPSAnZGVwXzEnICIKICAgICAgICAg\nICAgKyAiQU5EIGQuaWQuZW1wUEsuZmlyc3ROYW1lID0gJ2ZfMSciOwogICAg\nICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBM\naXN0PERlcGVuZGVudDI+IGRzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgZm9yIChEZXBlbmRlbnQyIGQgOiBkcykgewogICAgICAgICAgICBhc3Nl\ncnREZXBlbmRlbnQyKGQpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBq\ncHFsID0gInNlbGVjdCBkIGZyb20gRGVwZW5kZW50MiBkIHdoZXJlIGQuaWQu\nbmFtZSA9ICdkZXBfMScgIgogICAgICAgICAgICArICJBTkQgZC5lbXAuZW1w\nSWQuZmlyc3ROYW1lID0gJ2ZfMSciOwogICAgICAgIHEgPSBlbS5jcmVhdGVR\ndWVyeShqcHFsKTsKICAgICAgICBkcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIGZvciAoRGVwZW5kZW50MiBkIDogZHMpIHsKICAgICAgICAgICAg\nYXNzZXJ0RGVwZW5kZW50MihkKTsKICAgICAgICB9ICAgICAgICAKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFzc2VydERl\ncGVuZGVudDIoRGVwZW5kZW50MiBkKSB7CiAgICAgICAgRGVwZW5kZW50SWQy\nIGRpZCA9IGQuZ2V0SWQoKTsKICAgICAgICBEZXBlbmRlbnQyIGQwID0gZGVw\nczIuZ2V0KGRpZC5nZXROYW1lKCkpOwogICAgICAgIERlcGVuZGVudElkMiBk\naWQwID0gZDAuZ2V0SWQoKTsKICAgICAgICBkaWQwLnNldEVtcFBLKGQwLmdl\ndEVtcCgpLmdldEVtcElkKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhkMCwg\nZCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZU9iajMoKSB7\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVt\nLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBudW1QZXJzb25zOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZVBlcnNvbjEo\nZW0sIHBJZDErKyk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVt\nLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyBQZXJzb24xIGNyZWF0ZVBlcnNv\nbjEoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgUGVyc29u\nMSBwID0gbmV3IFBlcnNvbjEoKTsKICAgICAgICBQZXJzb25JZDEgcGlkID0g\nbmV3IFBlcnNvbklkMSgpOwogICAgICAgIHBpZC5zZXRGaXJzdE5hbWUoImZf\nIiArIGlkKTsKICAgICAgICBwaWQuc2V0TGFzdE5hbWUoImxfIiArIGlkKTsK\nICAgICAgICBwLnNldElkKHBpZCk7CiAgICAgICAgTWVkaWNhbEhpc3Rvcnkx\nIG0gPSBjcmVhdGVNZWRpY2FsSGlzdG9yeTEoZW0sIG1JZDErKyk7CiAgICAg\nICAgbS5zZXRQYXRpZW50KHApOwogICAgICAgIHAuc2V0TWVkaWNhbChtKTsK\nICAgICAgICBlbS5wZXJzaXN0KG0pOwogICAgICAgIGVtLnBlcnNpc3QocCk7\nCiAgICAgICAgcGVyc29uczEucHV0KHBpZC5nZXRGaXJzdE5hbWUoKSwgcCk7\nCiAgICAgICAgbWVkaWNhbHMxLnB1dChtLmdldFBhdGllbnQoKS5nZXRJZCgp\nLmdldEZpcnN0TmFtZSgpLCBtKTsKICAgICAgICByZXR1cm4gcDsKICAgIH0K\nCiAgICBwdWJsaWMgTWVkaWNhbEhpc3RvcnkxIGNyZWF0ZU1lZGljYWxIaXN0\nb3J5MShFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBNZWRp\nY2FsSGlzdG9yeTEgbSA9IG5ldyBNZWRpY2FsSGlzdG9yeTEoKTsKICAgICAg\nICBtLnNldE5hbWUoIm1lZGljYWxfIiArIGlkKTsKICAgICAgICByZXR1cm4g\nbTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBmaW5kT2JqMygpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBQZXJzb25JZDEgcGlkID0gbmV3IFBlcnNvbklkMSgpOwog\nICAgICAgIHBpZC5zZXRGaXJzdE5hbWUoImZfMSIpOwogICAgICAgIHBpZC5z\nZXRMYXN0TmFtZSgibF8xIik7CiAgICAgICAgUGVyc29uMSBwID0gZW0uZmlu\nZChQZXJzb24xLmNsYXNzLCBwaWQpOwogICAgICAgIFBlcnNvbjEgcDAgPSBw\nZXJzb25zMS5nZXQocGlkLmdldEZpcnN0TmFtZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMocDAsIHApOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5\nT2JqMygpIHsKICAgICAgICBxdWVyeU1lZGljYWxIaXN0b3J5MSgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5TWVkaWNhbEhpc3RvcnkxKCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5n\nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIFN0cmluZyBmaXJzdE5hbWUgPSAi\nZl8xIjsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgU3RyaW5nIGpw\ncWwgPQogICAgICAgICAgICAic2VsZWN0IG0gZnJvbSBNZWRpY2FsSGlzdG9y\neTEgbSB3aGVyZSBtLnBhdGllbnQuaWQuZmlyc3ROYW1lID0gJyIKICAgICAg\nICAgICAgKyBmaXJzdE5hbWUgKyAiJyI7CiAgICAgICAgUXVlcnkgcSA9IGVt\nLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAgIExpc3Q8TWVkaWNhbEhpc3Rv\ncnkxPiBtcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoTWVk\naWNhbEhpc3RvcnkxIG0gOiBtcykgewogICAgICAgICAgICBhc3NlcnRNZWRp\nY2FsSGlzdG9yeTEobSwgZmlyc3ROYW1lKTsKICAgICAgICB9CiAgICAgICAg\nCiAgICAgICAganBxbCA9ICJzZWxlY3QgbSBmcm9tIE1lZGljYWxIaXN0b3J5\nMSBtIHdoZXJlIG0uaWQuZmlyc3ROYW1lID0gJyIKICAgICAgICAgICAgKyBm\naXJzdE5hbWUgKyAiJyI7CiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpw\ncWwpOwogICAgICAgIG1zID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nZm9yIChNZWRpY2FsSGlzdG9yeTEgbSA6IG1zKSB7CiAgICAgICAgICAgIGFz\nc2VydE1lZGljYWxIaXN0b3J5MShtLCBmaXJzdE5hbWUpOwogICAgICAgIH0K\nICAgICAgICAKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXNzZXJ0TWVkaWNhbEhp\nc3RvcnkxKE1lZGljYWxIaXN0b3J5MSBtLCBTdHJpbmcgZmlyc3ROYW1lKSB7\nCiAgICAgICAgTWVkaWNhbEhpc3RvcnkxIG0wID0gbWVkaWNhbHMxLmdldChm\naXJzdE5hbWUpOwogICAgICAgIGFzc2VydEVxdWFscyhtMCwgbSk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZU9iajQoKSB7CiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5z\nYWN0aW9uKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1QZXJz\nb25zOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZVBlcnNvbjIoZW0sIHBJZDIr\nKyk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7\nCiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQoKICAgIHB1YmxpYyBQZXJzb24yIGNyZWF0ZVBlcnNvbjIoRW50aXR5\nTWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgUGVyc29uMiBwID0gbmV3\nIFBlcnNvbjIoKTsKICAgICAgICBwLnNldE5hbWUoInBfIiArIGlkKTsKICAg\nICAgICAKICAgICAgICBNZWRpY2FsSGlzdG9yeTIgbSA9IGNyZWF0ZU1lZGlj\nYWxIaXN0b3J5MihlbSwgbUlkMisrKTsKICAgICAgICBtLnNldFBhdGllbnQo\ncCk7ICAvLyBhdXRvbWF0aWNhbGx5IHNldCB0aGUgaWQKICAgICAgICBwLnNl\ndE1lZGljYWwobSk7CiAgICAgICAgZW0ucGVyc2lzdChtKTsKICAgICAgICBt\nZWRpY2FsczIucHV0KG0uZ2V0TmFtZSgpLCBtKTsKCiAgICAgICAgZW0ucGVy\nc2lzdChwKTsKICAgICAgICBwZXJzb25zMi5wdXQocC5nZXROYW1lKCksIHAp\nOwogICAgICAgIHJldHVybiBwOwogICAgfQoKICAgIHB1YmxpYyBNZWRpY2Fs\nSGlzdG9yeTIgY3JlYXRlTWVkaWNhbEhpc3RvcnkyKEVudGl0eU1hbmFnZXIg\nZW0sIGludCBpZCkgewogICAgICAgIE1lZGljYWxIaXN0b3J5MiBtID0gbmV3\nIE1lZGljYWxIaXN0b3J5MigpOwogICAgICAgIG0uc2V0TmFtZSgibWVkaWNh\nbF8iICsgaWQpOwogICAgICAgIHJldHVybiBtOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGZpbmRPYmo0KGxvbmcgc3NuKSB7CiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nUGVyc29uMiBwID0gZW0uZmluZChQZXJzb24yLmNsYXNzLCBzc24pOwogICAg\nICAgIFBlcnNvbjIgcDEgPSBwLmdldE1lZGljYWwoKS5nZXRQYXRpZW50KCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHAxLCBwKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBxdWVyeU9iajQoKSB7CiAgICAgICAgcXVlcnlNZWRpY2FsSGlz\ndG9yeTQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeU1lZGljYWxI\naXN0b3J5NCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBNYXAgbWVkaWNhbHMgPSBu\nZXcgSGFzaE1hcCgpOwogICAgICAgIGxvbmcgc3NuID0gMDsKICAgICAgICBF\nbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsK\nICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nc2VsZWN0IG0gZnJvbSBNZWRpY2FsSGlzdG9yeTIgbSI7CiAgICAgICAgUXVl\ncnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAgIExpc3Q8TWVk\naWNhbEhpc3RvcnkyPiBtcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nIGZvciAoTWVkaWNhbEhpc3RvcnkyIG0gOiBtcykgewogICAgICAgICAgICBz\nc24gPSBtLmdldElkKCk7CiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAKICAgICAgICBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgdHJhbiA9IGVt\nLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAg\nICAgIGpwcWwgPSAic2VsZWN0IG0gZnJvbSBNZWRpY2FsSGlzdG9yeTIgbSB3\naGVyZSBtLnBhdGllbnQuc3NuID0gIiArIHNzbjsKICAgICAgICBxID0gZW0u\nY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgbXMgPSBxLmdldFJlc3VsdExp\nc3QoKTsKICAgICAgICBmb3IgKE1lZGljYWxIaXN0b3J5MiBtIDogbXMpIHsK\nICAgICAgICAgICAgYXNzZXJ0TWVkaWNhbEhpc3RvcnkyKG0pOwogICAgICAg\nIH0KICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICAgICAgCiAgICAgICAgZmluZE9iajQoc3NuKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBhc3NlcnRNZWRpY2FsSGlzdG9yeTIoTWVkaWNhbEhpc3Rv\ncnkyIG0pIHsKICAgICAgICBTdHJpbmcgbmFtZSA9IG0uZ2V0TmFtZSgpOwog\nICAgICAgIE1lZGljYWxIaXN0b3J5MiBtMCA9IG1lZGljYWxzMi5nZXQobmFt\nZSk7CiAgICAgICAgTWVkaWNhbEhpc3RvcnkyIG0xID0gbS5nZXRQYXRpZW50\nKCkuZ2V0TWVkaWNhbCgpOwogICAgICAgIGFzc2VydEVxdWFscyhtMSwgbSk7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZU9iajUoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdl\ndFRyYW5zYWN0aW9uKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBu\ndW1FbXBsb3llZXM7IGkrKykKICAgICAgICAgICAgY3JlYXRlRW1wbG95ZWUz\nKGVtLCBlSWQzKyspOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBl\nbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZm9y\nIChEZXBlbmRlbnQzIGQ6IGRlcHMzKSB7CiAgICAgICAgICAgIE9iamVjdElk\nIGRpZCA9IChPYmplY3RJZCkoKFN0YXRlTWFuYWdlckltcGwpKChQZXJzaXN0\nZW5jZUNhcGFibGUpZCkKICAgICAgICAJICAgICAgICAucGNHZXRTdGF0ZU1h\nbmFnZXIoKSkuZ2V0T2JqZWN0SWQoKTsKICAgICAgICAJZGlkczMuYWRkKGRp\nZC5nZXRJZCgpKTsKICAgICAgICAJZGVwTWFwMy5wdXQoZGlkLmdldElkKCks\nIGQpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQoKICAgIHB1YmxpYyBFbXBsb3llZTMgY3JlYXRlRW1wbG95ZWUzKEVu\ndGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIEVtcGxveWVlMyBl\nID0gbmV3IEVtcGxveWVlMygpOwogICAgICAgIGUuc2V0TmFtZSgiZW1wXyIg\nKyBpZCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1EZXBlbmRl\nbnRzUGVyRW1wbG95ZWU7IGkrKykgewogICAgICAgICAgICBEZXBlbmRlbnQz\nIGQgPSBjcmVhdGVEZXBlbmRlbnQzKGVtLCBkSWQzKyssIGUpOwogICAgICAg\nICAgICBlLmFkZERlcGVuZGVudChkKTsKICAgICAgICAgICAgZW0ucGVyc2lz\ndChkKTsKICAgICAgICB9CiAgICAgICAgZW0ucGVyc2lzdChlKTsKICAgICAg\nICBlbXBzMy5wdXQoaWQsIGUpOwogICAgICAgIHJldHVybiBlOwogICAgfQoK\nICAgIHB1YmxpYyBEZXBlbmRlbnQzIGNyZWF0ZURlcGVuZGVudDMoRW50aXR5\nTWFuYWdlciBlbSwgaW50IGlkLCBFbXBsb3llZTMgZSkgewogICAgICAgIERl\ncGVuZGVudDMgZCA9IG5ldyBEZXBlbmRlbnQzKCk7CiAgICAgICAgRGVwZW5k\nZW50SWQzIGRpZCA9IG5ldyBEZXBlbmRlbnRJZDMoKTsKICAgICAgICBkaWQu\nc2V0TmFtZSgiZGVwXyIgKyBpZCk7CiAgICAgICAgZC5zZXRJZChkaWQpOwog\nICAgICAgIGQuc2V0RW1wKGUpOwogICAgICAgIGRlcHMzLmFkZChkKTsKICAg\nICAgICBQYXJlbnQzIHAgPSBuZXcgUGFyZW50MygpOwogICAgICAgIHAuc2V0\nTmFtZSgicF8iICsgaWQpOwogICAgICAgIHAuc2V0RGVwZW5kZW50KGQpOwog\nICAgICAgIGQuc2V0UGFyZW50KHApOwogICAgICAgIGVtLnBlcnNpc3QocCk7\nCiAgICAgICAgcmV0dXJuIGQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgZmlu\nZE9iajUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRGVwZW5kZW50MyBkID0gZW0u\nZmluZChEZXBlbmRlbnQzLmNsYXNzLCBkaWRzMy5nZXQoMSkpOwogICAgICAg\nIERlcGVuZGVudDMgZDAgPSBkZXBNYXAzLmdldChkaWRzMy5nZXQoMSkpOwog\nICAgICAgIGFzc2VydEVxdWFscyhkMCwgZCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgcXVlcnlPYmo1KCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRy\nYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAg\nIHRyYW4uYmVnaW4oKTsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3Qg\nZCBmcm9tIERlcGVuZGVudDMgZCB3aGVyZSBkLmlkLm5hbWUgPSAnZGVwXzEn\nICIKICAgICAgICAgICAgKyAiQU5EIGQuZW1wLm5hbWUgPSAnZW1wXzEnIjsK\nICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAg\nICAgTGlzdDxEZXBlbmRlbnQzPiBkcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIGZvciAoRGVwZW5kZW50MyBkIDogZHMpIHsKICAgICAgICAgICAg\nYXNzZXJ0RGVwZW5kZW50MyhkKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5j\nb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGFzc2VydERlcGVuZGVudDMoRGVwZW5kZW50MyBkKSB7CiAgICAg\nICAgRGVwZW5kZW50SWQzIGlkID0gZC5nZXRJZCgpOwogICAgICAgIERlcGVu\nZGVudDMgZDAgPSBkZXBNYXAzLmdldChpZCk7CiAgICAgICAgaWYgKGQwLmlk\nLmVtcFBLID09IDApCiAgICAgICAgICAgIGQwLmlkLmVtcFBLID0gZDAuZW1w\nLmdldEVtcElkKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGQwLCBkKTsKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgY3JlYXRlT2JqNigpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJh\nbnNhY3Rpb24oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bVBl\ncnNvbnM7IGkrKykKICAgICAgICAgICAgY3JlYXRlUGVyc29uMyhlbSwgcElk\nMysrKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2go\nKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CgogICAgcHVibGljIFBlcnNvbjMgY3JlYXRlUGVyc29uMyhFbnRp\ndHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBQZXJzb24zIHAgPSBu\nZXcgUGVyc29uMygpOwogICAgICAgIHAuc2V0Rmlyc3ROYW1lKCJmXyIgKyBp\nZCk7CiAgICAgICAgcC5zZXRMYXN0TmFtZSgibF8iICsgaWQpOwogICAgICAg\nIE1lZGljYWxIaXN0b3J5MyBtID0gY3JlYXRlTWVkaWNhbEhpc3RvcnkzKGVt\nLCBtSWQzKyspOwogICAgICAgIG0uc2V0UGF0aWVudChwKTsKICAgICAgICBw\nLnNldE1lZGljYWwobSk7CiAgICAgICAgZW0ucGVyc2lzdChtKTsKICAgICAg\nICBlbS5wZXJzaXN0KHApOwogICAgICAgIHBlcnNvbnMzLnB1dChwLmdldEZp\ncnN0TmFtZSgpLCBwKTsKICAgICAgICBtZWRpY2FsczMucHV0KG0uZ2V0UGF0\naWVudCgpLmdldEZpcnN0TmFtZSgpLCBtKTsKICAgICAgICByZXR1cm4gcDsK\nICAgIH0KCiAgICBwdWJsaWMgTWVkaWNhbEhpc3RvcnkzIGNyZWF0ZU1lZGlj\nYWxIaXN0b3J5MyhFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAg\nICBNZWRpY2FsSGlzdG9yeTMgbSA9IG5ldyBNZWRpY2FsSGlzdG9yeTMoKTsK\nICAgICAgICBtLnNldE5hbWUoIm1lZGljYWxfIiArIGlkKTsKICAgICAgICBy\nZXR1cm4gbTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBmaW5kT2JqNigpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBQZXJzb24zIHAgPSBlbS5maW5kKFBlcnNvbjMu\nY2xhc3MsIG5ldyBQZXJzb25JZDMoImZfMSIsICJsXzEiKSk7CiAgICAgICAg\nUGVyc29uMyBwMCA9IHBlcnNvbnMzLmdldCgiZl8xIik7CiAgICAgICAgUGVy\nc29uMyBwMSA9IHAuZ2V0TWVkaWNhbCgpLmdldFBhdGllbnQoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMocCwgcDEpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHF1ZXJ5T2JqNigpIHsgCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNh\nY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJh\nbi5iZWdpbigpOwogICAgICAgIFN0cmluZyBmaXJzdE5hbWUgPSAiZl8xIjsK\nICAgICAgICBTdHJpbmcganBxbCA9CiAgICAgICAgICAgICJzZWxlY3QgbSBm\ncm9tIE1lZGljYWxIaXN0b3J5MyBtIHdoZXJlIG0ucGF0aWVudC5maXJzdE5h\nbWUgPSAnIgogICAgICAgICAgICArIGZpcnN0TmFtZSArICInIjsKICAgICAg\nICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgTGlz\ndDxNZWRpY2FsSGlzdG9yeTM+IG1zID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgZm9yIChNZWRpY2FsSGlzdG9yeTMgbSA6IG1zKSB7CiAgICAgICAg\nICAgIGFzc2VydE1lZGljYWxIaXN0b3J5MyhtLCBmaXJzdE5hbWUpOwogICAg\nICAgIH0KICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXNzZXJ0TWVkaWNhbEhpc3Rv\ncnkzKE1lZGljYWxIaXN0b3J5MyBtLCBTdHJpbmcgZmlyc3ROYW1lKSB7CiAg\nICAgICAgTWVkaWNhbEhpc3RvcnkzIG0wID0gbWVkaWNhbHMzLmdldChmaXJz\ndE5hbWUpOwogICAgICAgIGFzc2VydEVxdWFscyhtMCwgbSk7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZU9iajcoKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0\naW9uKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1QZXJzb25z\nOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZVBlcnNvbjQoZW0sIHBJZDQrKyk7\nCiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAg\nICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIHB1YmxpYyBQZXJzb240IGNyZWF0ZVBlcnNvbjQoRW50aXR5TWFu\nYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgUGVyc29uNCBwID0gbmV3IFBl\ncnNvbjQoKTsKICAgICAgICBwLnNldElkKG5ldyBQZXJzb25JZDQoImZfIiAr\nIGlkLCAibF8iICsgaWQpKTsKICAgICAgICBNZWRpY2FsSGlzdG9yeTQgbSA9\nIGNyZWF0ZU1lZGljYWxIaXN0b3J5NChlbSwgbUlkNCsrKTsKICAgICAgICBt\nLnNldFBhdGllbnQocCk7CiAgICAgICAgcC5zZXRNZWRpY2FsKG0pOwogICAg\nICAgIGVtLnBlcnNpc3QocCk7CiAgICAgICAgZW0ucGVyc2lzdChtKTsKICAg\nICAgICBwZXJzb25zNC5wdXQocC5nZXRJZCgpLmdldEZpcnN0TmFtZSgpLCBw\nKTsKICAgICAgICBtZWRpY2FsczQucHV0KG0uZ2V0UGF0aWVudCgpLmdldElk\nKCkuZ2V0Rmlyc3ROYW1lKCksIG0pOwogICAgICAgIHJldHVybiBwOwogICAg\nfQoKICAgIHB1YmxpYyBNZWRpY2FsSGlzdG9yeTQgY3JlYXRlTWVkaWNhbEhp\nc3Rvcnk0KEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIE1l\nZGljYWxIaXN0b3J5NCBtID0gbmV3IE1lZGljYWxIaXN0b3J5NCgpOwogICAg\nICAgIG0uc2V0TmFtZSgibWVkaWNhbF8iICsgaWQpOwogICAgICAgIHJldHVy\nbiBtOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGZpbmRPYmo3KCkgewogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIFBlcnNvbjQgcCA9IGVtLmZpbmQoUGVyc29uNC5jbGFz\ncywgbmV3IFBlcnNvbklkNCgiZl8xIiwgImxfMSIpKTsKICAgICAgICBQZXJz\nb240IHAwID0gcGVyc29uczQuZ2V0KCJmXzEiKTsKICAgICAgICBQZXJzb240\nIHAxID0gcC5nZXRNZWRpY2FsKCkuZ2V0UGF0aWVudCgpOwogICAgICAgIGFz\nc2VydEVxdWFscyhwMSwgcCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcXVl\ncnlPYmo3KCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9u\nIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVn\naW4oKTsKICAgICAgICBTdHJpbmcgZmlyc3ROYW1lID0gImZfMSI7CiAgICAg\nICAgU3RyaW5nIGpwcWwgPQogICAgICAgICAgICAic2VsZWN0IG0gZnJvbSBN\nZWRpY2FsSGlzdG9yeTQgbSB3aGVyZSBtLnBhdGllbnQuaWQuZmlyc3ROYW1l\nID0gJyIKICAgICAgICAgICAgKyBmaXJzdE5hbWUgKyAiJyI7CiAgICAgICAg\nUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAgIExpc3Q8\nTWVkaWNhbEhpc3Rvcnk0PiBtcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgIGZvciAoTWVkaWNhbEhpc3Rvcnk0IG0gOiBtcykgewogICAgICAgICAg\nICBhc3NlcnRNZWRpY2FsSGlzdG9yeTQobSwgZmlyc3ROYW1lKTsKICAgICAg\nICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFzc2VydE1lZGljYWxIaXN0b3J5\nNChNZWRpY2FsSGlzdG9yeTQgbSwgU3RyaW5nIGZpcnN0TmFtZSkgewogICAg\nICAgIE1lZGljYWxIaXN0b3J5NCBtMCA9IG1lZGljYWxzNC5nZXQoZmlyc3RO\nYW1lKTsKICAgICAgICBNZWRpY2FsSGlzdG9yeTQgbTEgPSBtLmdldFBhdGll\nbnQoKS5nZXRNZWRpY2FsKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG0xLCBt\nKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBEZXJpdmVkIElkZW50aXR5\nIHdpdGggSWRDbGFzcyBhbmQgZ2VuZXJhdGVkS2V5CiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHRlc3RQZXJzaXN0RGVyaXZlZElkZW50aXR5VXNpbmdJZENs\nYXNzQW5kR2VuZXJhdGVkS2V5KCkgewogICAgICAgIC8vIE5vdCBhbGwgZGF0\nYWJhc2VzIHN1cHBvcnQgR2VuZXJhdGlvblR5cGUuSURFTlRJVFkgY29sdW1u\nKHMpCiAgICAgICAgaWYgKCEoKEpEQkNDb25maWd1cmF0aW9uKSBlbWYuZ2V0\nQ29uZmlndXJhdGlvbigpKS4KICAgICAgICAgICAgZ2V0REJEaWN0aW9uYXJ5\nSW5zdGFuY2UoKS5zdXBwb3J0c0F1dG9Bc3NpZ24pIHsKCQkJcmV0dXJuOwog\nICAgICAgIH0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0\ncmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IG51bUVtcGxveWVlczsgaSsrKQogICAgICAgICAgICBwZXJz\naXN0RW1wbG95ZWU0KGVtLCBlSWQ0KyspOwogICAgICAgIHRyYW4uYmVnaW4o\nKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIERl\ncml2ZWQgSWRlbnRpdHkgd2l0aCBJZENsYXNzIGFuZCBnZW5lcmF0ZWRLZXkK\nICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdE1lcmdlRGVyaXZlZElkZW50\naXR5VXNpbmdJZENsYXNzQW5kR2VuZXJhdGVkS2V5KCkgewogICAgICAgIC8v\nIE5vdCBhbGwgZGF0YWJhc2VzIHN1cHBvcnQgR2VuZXJhdGlvblR5cGUuSURF\nTlRJVFkgY29sdW1uKHMpCiAgICAgICAgaWYgKCEoKEpEQkNDb25maWd1cmF0\naW9uKSBlbWYuZ2V0Q29uZmlndXJhdGlvbigpKS4KICAgICAgICAgICAgZ2V0\nREJEaWN0aW9uYXJ5SW5zdGFuY2UoKS5zdXBwb3J0c0F1dG9Bc3NpZ24pIHsK\nCQkJcmV0dXJuOwogICAgICAgIH0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlU\ncmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IG51bUVtcGxveWVlczsgaSsrKQogICAg\nICAgICAgICBtZXJnZUVtcGxveWVlNChlbSwgZUlkNCsrKTsKICAgICAgICB0\ncmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICB0cmFu\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVi\nbGljIEVtcGxveWVlNCBwZXJzaXN0RW1wbG95ZWU0KEVudGl0eU1hbmFnZXIg\nZW0sIGludCBpZCkgewogICAgICAgIEVtcGxveWVlNCBwID0gbmV3IEVtcGxv\neWVlNCgpOwogICAgICAgIHAuc2V0QWdlKGlkKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IG51bURlcGVuZGVudHNQZXJFbXBsb3llZTsgaSsrKSB7\nCiAgICAgICAgICAgIERlcGVuZGVudDQgYyA9IHBlcnNpc3REZXBlbmRlbnQ0\nKGVtLCBkSWQ0KyssIHApOwogICAgICAgICAgICBwLmFkZENoaWxkKGMpOwog\nICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0KHApOwogICAgICAgIHJldHVy\nbiBwOwogICAgfQogICAgCiAgICBwdWJsaWMgRGVwZW5kZW50NCBwZXJzaXN0\nRGVwZW5kZW50NChFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQsIEVtcGxveWVl\nNCBwKSB7CiAgICAgICAgRGVwZW5kZW50NCBjID0gbmV3IERlcGVuZGVudDQo\nKTsKICAgICAgICBjLnNldElkKGlkKTsKICAgICAgICBjLnNldFBhcmVudChw\nKTsKICAgICAgICBlbS5wZXJzaXN0KGMpOwogICAgICAgIHJldHVybiBjOwog\nICAgfQogICAgCiAgICBwdWJsaWMgRW1wbG95ZWU0IG1lcmdlRW1wbG95ZWU0\nKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIEVtcGxveWVl\nNCBlID0gbmV3IEVtcGxveWVlNCgpOwogICAgICAgIGUuc2V0QWdlKGlkKTsK\nICAgICAgICBlID0gZW0ubWVyZ2UoZSk7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBudW1EZXBlbmRlbnRzUGVyRW1wbG95ZWU7IGkrKykgewogICAg\nICAgICAgICBEZXBlbmRlbnQ0IGQgPSBuZXcgRGVwZW5kZW50NCgpOwogICAg\nICAgICAgICBkLnNldElkKGRJZDQrKyk7CiAgICAgICAgICAgIGQuc2V0UGFy\nZW50KGUpOwogICAgICAgICAgICAvLyBkbyBub3QgbmVlZCB0byBtZXJnZSBk\nLCBhcyBFbXBsb3llZSBpcyBjYXNjYWRlLkFsbAogICAgICAgICAgICBkID0g\nZW0ubWVyZ2UoZCk7CiAgICAgICAgICAgIGUuYWRkQ2hpbGQoZCk7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBlOwogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RW51bUluRW1iZWRkZWRJZCgpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBCZW5lZmljaWFyeSBiID0gbmV3IEJlbmVmaWNpYXJ5KCk7CiAgICAgICAg\nYi5zZXRJZCgiYjgiKTsKICAgICAgICBMaXN0PEJlbmVDb250YWN0PiBjb250\nYWN0cyA9IG5ldyBBcnJheUxpc3Q8QmVuZUNvbnRhY3Q+KCk7CiAgICAgICAg\nQmVuZUNvbnRhY3QgYyA9IG5ldyBCZW5lQ29udGFjdCgpOwogICAgICAgIGMu\nc2V0RW1haWwoImVtYWlsOCIpOwogICAgICAgIEJlbmVDb250YWN0SWQgaWQg\nPSBuZXcgQmVuZUNvbnRhY3RJZCgpOwogICAgICAgIGlkLnNldENvbnRhY3RU\neXBlKEJlbmVDb250YWN0SWQuQ29udGFjdFR5cGUuSE9NRSk7CiAgICAgICAg\nYy5zZXRCZW5lZmljaWFyeShiKTsKICAgICAgICAKICAgICAgICBjLnNldElk\nKGlkKTsKICAgICAgICBlbS5wZXJzaXN0KGMpOwogICAgICAgIGNvbnRhY3Rz\nLmFkZChjKTsKICAgICAgICBiLnNldENvbnRhY3RzKGNvbnRhY3RzKTsKICAg\nICAgICBlbS5wZXJzaXN0KGIpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIoKTsK\nICAgICAgICBCZW5lQ29udGFjdElkIGlkMSA9IGMuZ2V0SWQoKTsKICAgICAg\nICBCZW5lQ29udGFjdCBjMSA9IGVtLmZpbmQoQmVuZUNvbnRhY3QuY2xhc3Ms\nIGlkMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJlbWFpbDgiLCBjMS5nZXRF\nbWFpbCgpKTsKICAgIH0KfQo=\n","encoding":"base64"}

