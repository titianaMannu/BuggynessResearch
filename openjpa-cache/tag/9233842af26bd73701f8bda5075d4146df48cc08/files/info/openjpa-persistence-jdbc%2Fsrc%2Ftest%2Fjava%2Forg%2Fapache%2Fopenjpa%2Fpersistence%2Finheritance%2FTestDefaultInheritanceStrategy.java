{"sha":"006f486fc1fd54778e148473164872c9f4fcb75e","node_id":"MDQ6QmxvYjIwNjM2NDowMDZmNDg2ZmMxZmQ1NDc3OGUxNDg0NzMxNjQ4NzJjOWY0ZmNiNzVl","size":25934,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/006f486fc1fd54778e148473164872c9f4fcb75e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuaW5oZXJp\ndGFuY2U7CgppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9kOwppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5\nOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NN\nYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5E\naXNjcmltaW5hdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5pbmhlcml0YW5jZS5lbnRpdHkuQWJz\ndHJhY3RDbGFzczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5pbmhlcml0YW5jZS5lbnRpdHkuQmFzZUNsYXNzOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmluaGVyaXRhbmNlLmVudGl0\neS5CYXNlQ2xhc3MyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmluaGVyaXRhbmNlLmVudGl0eS5CYXNlQ2xhc3MzOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmluaGVyaXRhbmNlLmVu\ndGl0eS5CYXNlQ2xhc3M0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmluaGVyaXRhbmNlLmVudGl0eS5CYXNlQ2xhc3M1OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmluaGVyaXRhbmNl\nLmVudGl0eS5CYXNlQ2xhc3M2OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLmluaGVyaXRhbmNlLmVudGl0eS5NYW5hZ2VkSWZhY2U7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuaW5oZXJp\ndGFuY2UuZW50aXR5Lk1hbmFnZWRJZmFjZTI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuaW5oZXJpdGFuY2UuZW50aXR5Lk1hcHBl\nZFN1cGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmluaGVyaXRhbmNlLmVudGl0eS5NaWRDbGFzczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5pbmhlcml0YW5jZS5lbnRpdHkuTWlk\nQ2xhc3MyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmluaGVyaXRhbmNlLmVudGl0eS5NaWRDbGFzczM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuaW5oZXJpdGFuY2UuZW50aXR5LlN1\nYmNsYXNzQTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5pbmhlcml0YW5jZS5lbnRpdHkuU3ViY2xhc3NCOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmluaGVyaXRhbmNlLmVudGl0eS5T\ndWJjbGFzc0M7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuaW5oZXJpdGFuY2UuZW50aXR5LlN1YmNsYXNzRDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5pbmhlcml0YW5jZS5lbnRpdHku\nU3ViY2xhc3NFOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmluaGVyaXRhbmNlLmVudGl0eS5JbXBsQ2xhc3NBOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmluaGVyaXRhbmNlLmVudGl0\neS5TdWJjbGFzc0Y7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuaW5oZXJpdGFuY2UuZW50aXR5LlN1YmNsYXNzRzsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5pbmhlcml0YW5jZS5lbnRp\ndHkuU3ViY2xhc3NIOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmluaGVyaXRhbmNlLmVudGl0eS5TdWJjbGFzc0k7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuaW5oZXJpdGFuY2UuZW50\naXR5LlN1YmNsYXNzSjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5pbmhlcml0YW5jZS5lbnRpdHkuU3ViY2xhc3NLOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1G\nVGVzdENhc2U7CgovKioKICogVGhpcyB0ZXN0IHZlcmlmaWVzIHRoYXQgT3Bl\nbkpQQSB1c2VzIGEgc2luZ2xlLXRhYmxlIGluaGVyaXRhbmNlCiAqIHN0cmF0\nZWd5IGFuZCBkZWZhdWx0IGRpc2NyaW1pbmF0b3IgY29sdW1uIGlmIG5vIGlu\naGVyaXRhbmNlIHN0cmF0ZWd5IAogKiBpcyBkZWZpbmVkLgogKiAKICogT3Bl\nbkpQQSBKSVJBOiB7QGxpbmsgaHR0cDovL2lzc3Vlcy5hcGFjaGUub3JnL2pp\ncmEvYnJvd3NlL09QRU5KUEEtNjcwfQoKICogQGF1dGhvciBKZXJlbXkgQmF1\nZXIKICoKICovCnB1YmxpYyBjbGFzcyBUZXN0RGVmYXVsdEluaGVyaXRhbmNl\nU3RyYXRlZ3kgCiAgICBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKICAg\nIAogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgc2V0VXAoQmFz\nZUNsYXNzLmNsYXNzLCBTdWJjbGFzc0EuY2xhc3MsIFN1YmNsYXNzQi5jbGFz\ncywKICAgICAgICAgICAgU3ViY2xhc3NDLmNsYXNzLCBNYXBwZWRTdXBlci5j\nbGFzcywgU3ViY2xhc3NELmNsYXNzLAogICAgICAgICAgICBCYXNlQ2xhc3My\nLmNsYXNzLCBNaWRDbGFzcy5jbGFzcywgU3ViY2xhc3NFLmNsYXNzLAogICAg\nICAgICAgICBNYW5hZ2VkSWZhY2UuY2xhc3MsIEltcGxDbGFzc0EuY2xhc3Ms\nCiAgICAgICAgICAgIE1hbmFnZWRJZmFjZTIuY2xhc3MsIEJhc2VDbGFzczMu\nY2xhc3MsIFN1YmNsYXNzRi5jbGFzcywKICAgICAgICAgICAgQmFzZUNsYXNz\nNC5jbGFzcywgU3ViY2xhc3NHLmNsYXNzLAogICAgICAgICAgICBCYXNlQ2xh\nc3M1LmNsYXNzLCBNaWRDbGFzczIuY2xhc3MsIFN1YmNsYXNzSC5jbGFzcywK\nICAgICAgICAgICAgQWJzdHJhY3RDbGFzcy5jbGFzcywgU3ViY2xhc3NJLmNs\nYXNzLCBTdWJjbGFzc0ouY2xhc3MsCiAgICAgICAgICAgIEJhc2VDbGFzczYu\nY2xhc3MsIFN1YmNsYXNzSy5jbGFzcywKICAgICAgICAgICAgIm9wZW5qcGEu\namRiYy5GaW5kZXJDYWNoZSIsICJ0cnVlIiwKICAgICAgICAgICAgQ0xFQVJf\nVEFCTEVTKTsKICAgIH0KCiAgICBwcml2YXRlIENsYXNzW10gY2xhc3NBcnJh\neShDbGFzcy4uLiBjbGFzc2VzKSB7CiAgICAgICAgcmV0dXJuIGNsYXNzZXM7\nCiAgICB9CiAgICAKICAgIC8qKgogICAgICogVGhpcyB2YXJpYXRpb24gdGVz\ndHMgYSBkZWZhdWx0IHNpbXBsZSBjbGFzcyBoaWVyYXJjaHkgd2l0aCBubyBp\nbmhlcml0YW5jZQogICAgICogb3IgZGlzY3JpbWluYXRvciBjb2x1bW4gYW5u\nb3RhdGlvbnMgZGVmaW5lZC4gIAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0\nZXN0U2ltcGxlRGVmYXVsdEluaGVyaXRhbmNlKCkgewogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIAogICAgICAgIC8vIENyZWF0ZSBzb21lIGVudGl0aWVzCiAgICAgICAg\nU3ViY2xhc3NBIHNjYSA9IG5ldyBTdWJjbGFzc0EoKTsKICAgICAgICBzY2Eu\nc2V0SWQoMCk7CiAgICAgICAgc2NhLnNldE5hbWUoIlN1YmNsYXNzQUJhc2VD\nbGFzc05hbWUwIik7CiAgICAgICAgc2NhLnNldENsYXNzQU5hbWUoIlN1YmNs\nYXNzQU5hbWUwIik7CgogICAgICAgIFN1YmNsYXNzQSBzY2EyID0gbmV3IFN1\nYmNsYXNzQSgpOwogICAgICAgIHNjYTIuc2V0SWQoMSk7CiAgICAgICAgc2Nh\nMi5zZXROYW1lKCJTdWJjbGFzc0FCYXNlQ2xhc3NOYW1lMSIpOwogICAgICAg\nIHNjYTIuc2V0Q2xhc3NBTmFtZSgiU3ViY2xhc3NBTmFtZTEiKTsKCiAgICAg\nICAgU3ViY2xhc3NCIHNjYiA9IG5ldyBTdWJjbGFzc0IoKTsKICAgICAgICBz\nY2Iuc2V0SWQoMik7CiAgICAgICAgc2NiLnNldE5hbWUoIlN1YmNsYXNzQkJh\nc2VDbGFzc05hbWUiKTsKICAgICAgICBzY2Iuc2V0Q2xhc3NCTmFtZSgiU3Vi\nY2xhc3NCTmFtZSIpOwoKICAgICAgICBCYXNlQ2xhc3MgYiA9IG5ldyBCYXNl\nQ2xhc3MoKTsKICAgICAgICBiLnNldE5hbWUoIkJhc2VDbGFzc05hbWUiKTsK\nICAgICAgICBiLnNldElkKDMpOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChzY2EpOwogICAgICAg\nIGVtLnBlcnNpc3Qoc2NhMik7CiAgICAgICAgZW0ucGVyc2lzdChzY2IpOwog\nICAgICAgIGVtLnBlcnNpc3QoYik7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKCiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICAK\nICAgICAgICB2ZXJpZnlEdHlwZUNvbHVtbkVudHJpZXNBbmRNYXBwaW5nKGVt\nLCAiQmFzZUNsYXNzIiwgNCwgQmFzZUNsYXNzLmNsYXNzKTsKICAgICAgICAg\nICAgICAgIAogICAgICAgIHZlcmlmeUluaGVyaXRhbmNlUXVlcnlSZXN1bHQo\nZW0sICJTdWJjbGFzc0EiLCAKICAgICAgICAgICAgY2xhc3NBcnJheShTdWJj\nbGFzc0EuY2xhc3MpLCAwLCAxKTsKCiAgICAgICAgdmVyaWZ5SW5oZXJpdGFu\nY2VRdWVyeVJlc3VsdChlbSwgIlN1YmNsYXNzQiIsIAogICAgICAgICAgICBj\nbGFzc0FycmF5KFN1YmNsYXNzQi5jbGFzcyksIDIpOwoKICAgICAgICB2ZXJp\nZnlJbmhlcml0YW5jZVF1ZXJ5UmVzdWx0KGVtLCAiQmFzZUNsYXNzIiwgCiAg\nICAgICAgICAgIGNsYXNzQXJyYXkoQmFzZUNsYXNzLmNsYXNzKSwgMCwgMSwg\nMiwgMyk7CiAgICAgICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFRoaXMgdmFyaWF0aW9uIGVuc3VyZXMgdGhhdCBhIG1h\ncHBlZCBzdXBlcmNsYXNzIGRvZXMgbm90IGNhdXNlIHRoZQogICAgICogcHJv\nZHVjdGlvbiBvZiBhIGRpc2NyaW1pbmF0b3IgY29sdW1uLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0TWFwcGVkU3VwZXJjbGFzcygpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKCiAgICAgICAgLy8gQWRkIHR3byBlbnRpdGllcywgZWFjaCBleHRlbmRp\nbmcgdGhlIHNhbWUgbWFwcGVkIGludGVyZmFjZQogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBTdWJjbGFzc0Mgc2MgPSBu\nZXcgU3ViY2xhc3NDKCk7CiAgICAgICAgc2Muc2V0SWQoMTAxMCk7CiAgICAg\nICAgc2Muc2V0TmFtZSgiU3ViY2xhc3NDTWFwcGVkU3VwZXJOYW1lIik7CiAg\nICAgICAgc2Muc2V0Q2xhc3NDTmFtZSgiU3ViY2xhc3NDTmFtZSIpOwoKICAg\nICAgICBTdWJjbGFzc0Qgc2QgPSBuZXcgU3ViY2xhc3NEKCk7CiAgICAgICAg\nc2Quc2V0SWQoMjAyMCk7CiAgICAgICAgc2Quc2V0TmFtZSgiU3ViY2xhc3NE\nTWFwcGVkU3VwZXJOYW1lIik7CiAgICAgICAgc2Quc2V0Q2xhc3NETmFtZSgi\nU3ViY2xhc3NETmFtZSIpOwogICAgICAgIAogICAgICAgIGVtLnBlcnNpc3Qo\nc2MpOwogICAgICAgIGVtLnBlcnNpc3Qoc2QpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAgZW0uY2xl\nYXIoKTsKICAgICAgICAKICAgICAgICBTdWJjbGFzc0Qgc2QyID1lbS5maW5k\nKFN1YmNsYXNzRC5jbGFzcywgMjAyMCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDIwMjAsIHNkMi5nZXRJZCgpKTsKICAgICAgICAgICAgICAgIAogICAgICAg\nIC8vIFRoZSBzdWJjbGFzc2VzIHNob3VsZCBub3QgY29udGFpbiBhIGRpc2Ny\naW1pbmF0b3IgY29sdW1uCiAgICAgICAgdmVyaWZ5Tm9EeXBlQ29sdW1uKGVt\nLCAiU3ViY2xhc3NDIik7CiAgICAgICAgdmVyaWZ5Tm9EeXBlQ29sdW1uKGVt\nLCAiU3ViY2xhc3NEIik7CgogICAgICAgIC8vIFF1ZXJ5IHRoZSBzdWJjbGFz\ncyBlbnRpdGllcy4gIE1ha2Ugc3VyZSB0aGUgY291bnRzIGFyZSBjb3JyZWN0\nIGFuZAogICAgICAgIC8vIHRoZSByZXN1bHQgaXMgY2FzdGFibGUgdG8gdGhl\nIG1hcHBlZCBzYy4KICAgICAgICB2ZXJpZnlJbmhlcml0YW5jZVF1ZXJ5UmVz\ndWx0KGVtLCAiU3ViY2xhc3NDIiwgCiAgICAgICAgICAgICAgICBjbGFzc0Fy\ncmF5KFN1YmNsYXNzQy5jbGFzcywgTWFwcGVkU3VwZXIuY2xhc3MpLCAxMDEw\nKTsKCiAgICAgICAgdmVyaWZ5SW5oZXJpdGFuY2VRdWVyeVJlc3VsdChlbSwg\nIlN1YmNsYXNzRCIsIAogICAgICAgICAgICAgICAgY2xhc3NBcnJheShTdWJj\nbGFzc0QuY2xhc3MsIE1hcHBlZFN1cGVyLmNsYXNzKSwgMjAyMCk7CiAgICAg\nICAgICAgICAgICAKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhpcyB2YXJpYXRpb24gZW5zdXJlcyB0aGF0IGEgMy1sZXZl\nbCBpbmhlcml0YW5jZSBoaWVyYXJjaHkgdXNlcyAKICAgICAqIGEgZGlzY3Jp\nbWluYXRvciBjb2x1bW4gYXQgdGhlIHJvb3QgY2xhc3MgbGV2ZWwuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RUd29MZXZlbEluaGVyaXRhbmNlKCkg\newogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwoKICAgICAgICAvLyBBZGQgdHdvIGVudGl0aWVzLCBlYWNo\nIGV4dGVuZGluZyB0aGUgc2FtZSBtYXBwZWQgaW50ZXJmYWNlCiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIFN1YmNsYXNz\nRSBzYyA9IG5ldyBTdWJjbGFzc0UoKTsKICAgICAgICBzYy5zZXRJZCgwKTsK\nICAgICAgICBzYy5zZXROYW1lKCJTdWJjbGFzc0VCYXNlQ2xhc3NOYW1lIik7\nCiAgICAgICAgc2Muc2V0TWlkQ2xhc3NOYW1lKCJTdWJjbGFzc0VNaWRDbGFz\nc05hbWUiKTsKICAgICAgICBzYy5zZXRDbGFzc0VOYW1lKCJTdWJjbGFzc0NO\nYW1lIik7CgogICAgICAgIE1pZENsYXNzIG1jID0gbmV3IE1pZENsYXNzKCk7\nCiAgICAgICAgbWMuc2V0SWQoMSk7CiAgICAgICAgbWMuc2V0TmFtZSgiTWlk\nQ2xhc3NCYXNlQ2xhc3NOYW1lIik7CiAgICAgICAgbWMuc2V0TWlkQ2xhc3NO\nYW1lKCJNaWRDbGFzc05hbWUiKTsKCiAgICAgICAgQmFzZUNsYXNzMiBiMiA9\nIG5ldyBCYXNlQ2xhc3MyKCk7CiAgICAgICAgYjIuc2V0TmFtZSgiQmFzZUNs\nYXNzMk5hbWUiKTsKICAgICAgICBiMi5zZXRJZCgyKTsKICAgICAgICAKICAg\nICAgICBlbS5wZXJzaXN0KHNjKTsKICAgICAgICBlbS5wZXJzaXN0KG1jKTsK\nICAgICAgICBlbS5wZXJzaXN0KGIyKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIGVtLmNsZWFyKCk7\nCgogICAgICAgIC8vIFZlcmlmeSB0aGF0IGJhc2VjbGFzczIgY29udGFpbnMg\nYSBkaXNjcmltaW5hdG9yIGNvbHVtbgogICAgICAgIHZlcmlmeUR0eXBlQ29s\ndW1uRW50cmllc0FuZE1hcHBpbmcoZW0sICJCYXNlQ2xhc3MyIiwgMywgCiAg\nICAgICAgICAgICAgICBCYXNlQ2xhc3MyLmNsYXNzKTsKICAgICAgICAKICAg\nICAgICAvLyBWZXJpZnkgdGhhdCB0aGUgc3ViY2xhc3MgdGFibGVzIGRvIG5v\ndCBjb250YWluIGEgZGlzY3JpbWluYXRvciBjb2x1bW4KICAgICAgICB2ZXJp\nZnlOb0R5cGVDb2x1bW4oZW0sICJNaWRDbGFzcyIpOwogICAgICAgIHZlcmlm\neU5vRHlwZUNvbHVtbihlbSwgIlN1YmNsYXNzRSIpOwoKICAgICAgICAvLyBR\ndWVyeSB0aGUgc3ViY2xhc3MgdGFibGVzLiAgTWFrZSBzdXJlIHRoZSBjb3Vu\ndHMgYXJlIGNvcnJlY3QgYW5kCiAgICAgICAgLy8gdGhlIHJlc3VsdCBpcyBj\nYXN0YWJsZSB0byB0aGUgbWFwcGVkIHNjLgogICAgICAgIHZlcmlmeUluaGVy\naXRhbmNlUXVlcnlSZXN1bHQoZW0sICJTdWJjbGFzc0UiLCAKICAgICAgICAg\nICAgICAgIGNsYXNzQXJyYXkoU3ViY2xhc3NFLmNsYXNzLCBNaWRDbGFzcy5j\nbGFzcywgQmFzZUNsYXNzMi5jbGFzcyksCiAgICAgICAgICAgICAgICAwKTsK\nCiAgICAgICAgdmVyaWZ5SW5oZXJpdGFuY2VRdWVyeVJlc3VsdChlbSwgIk1p\nZENsYXNzIiwgCiAgICAgICAgICAgICAgICBjbGFzc0FycmF5KE1pZENsYXNz\nLmNsYXNzKSwgMCwgMSk7CgogICAgICAgIHZlcmlmeUluaGVyaXRhbmNlUXVl\ncnlSZXN1bHQoZW0sICJCYXNlQ2xhc3MyIiwgCiAgICAgICAgICAgICAgICBj\nbGFzc0FycmF5KEJhc2VDbGFzczIuY2xhc3MpLCAwLCAxLCAyKTsKCiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgdmFy\naWF0aW9uIHZlcmlmaWVzIHRoYXQgYW4gZW50aXR5IHdpdGggYSBtYW5hZ2Vk\nIGludGVyZmFjZQogICAgICogZG9lcyBub3QgdXNlIGEgZGlzY3JpbWluYXRv\nciBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RNYW5hZ2Vk\nSW50ZXJmYWNlKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgLy8gQWRk\nIHNvbWUgZW50aXRpZXMKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgTWFuYWdlZElmYWNlIG1pZiA9IGVtLmNyZWF0ZUlu\nc3RhbmNlKE1hbmFnZWRJZmFjZS5jbGFzcyk7CiAgICAgICAgbWlmLnNldElu\ndEZpZWxkU3VwKDEwKTsKICAgICAgICAgICAgICAgIAogICAgICAgIEltcGxD\nbGFzc0EgaWNhID0gbmV3IEltcGxDbGFzc0EoKTsKICAgICAgICBpY2Euc2V0\nSW1wbENsYXNzQU5hbWUoIkltcGxDbGFzc0FOYW1lIik7CiAgICAgICAgaWNh\nLnNldEludEZpZWxkU3VwKDExKTsKICAgICAgICAKICAgICAgICBlbS5wZXJz\naXN0KG1pZik7CiAgICAgICAgZW0ucGVyc2lzdChpY2EpOyAgICAgICAgCiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAgICAgICAg\nZW0uY2xlYXIoKTsKCiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlIGlmYWNl\nIHRhYmxlIGRvZXMgbm90IGNvbnRhaW4gYSBkaXNjcmltaW5hdG9yIGNvbHVt\nbgogICAgICAgIHZlcmlmeU5vRHlwZUNvbHVtbihlbSwgIk1hbmFnZWRJZmFj\nZSIpOwoKICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGUgaW1wbCB0YWJsZSBk\nb2VzIG5vdCBjb250YWluIGEgZGlzY3JpbWluYXRvciBjb2x1bW4KICAgICAg\nICB2ZXJpZnlOb0R5cGVDb2x1bW4oZW0sICJJbXBsQ2xhc3NBIik7CiAgICAg\nICAgCiAgICAgICAgLy8gUXVlcnkgdGhlIHN1YmNsYXNzIHRhYmxlcy4gIE1h\na2Ugc3VyZSB0aGUgY291bnRzIGFyZSBjb3JyZWN0IGFuZAogICAgICAgIC8v\nIHRoZSByZXN1bHQgaXMgY2FzdGFibGUgdG8gdGhlIGVudGl0eSBhbmQgaW50\nZXJmYWNlIHR5cGVzLgogICAgICAgIHZlcmlmeUluaGVyaXRhbmNlUXVlcnlS\nZXN1bHQoZW0sICJJbXBsQ2xhc3NBIiwgCiAgICAgICAgICAgICAgICBjbGFz\nc0FycmF5KEltcGxDbGFzc0EuY2xhc3MsIE1hbmFnZWRJZmFjZS5jbGFzcyks\nIGljYS5nZXRJZCgpKTsKCiAgICAgICAgLy8gUXVlcnkgdGhlIGludGVyZmFj\nZTIgdGFibGUuICBNYWtlIHN1cmUgdGhlIGNvdW50IGlzIGNvcnJlY3QgYW5k\nCiAgICAgICAgLy8gdGhlIHJlc3VsdCBpcyBjYXN0YWJsZSB0byB0aGUgaW50\nZXJmYWNlIHR5cGUuCiAgICAgICAgdmVyaWZ5SW5oZXJpdGFuY2VRdWVyeVJl\nc3VsdChlbSwgIk1hbmFnZWRJZmFjZSIsIAogICAgICAgICAgICAgICAgY2xh\nc3NBcnJheShNYW5hZ2VkSWZhY2UuY2xhc3MpLCBtaWYuZ2V0SWQoKSwKICAg\nICAgICAgICAgICAgIGljYS5nZXRJZCgpKTsKICAgICAgICAKICAgICAgICBl\nbS5jbG9zZSgpOwogICAgfQoKICAgIC8qKgogICAgICogVGhpcyB2YXJpYXRp\nb24gdmVyaWZpZXMgdGhhdCBhbiBlbnRpdHkgd2l0aCBtYW5hZ2VkIGludGVy\nZmFjZQogICAgICogYW5kIGEgc3VwZXJjbGFzcyBET0VTIHVzZSBhIGRpc2Ny\naW1pbmF0b3IgY29sdW1uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nTWFuYWdlZEludGVyZmFjZUFuZEJhc2UoKSB7CiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoK\nICAgICAgICAvLyBBZGQgc29tZSBlbnRpdGllcwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBNYW5hZ2VkSWZhY2UyIG1p\nZjIgPSBlbS5jcmVhdGVJbnN0YW5jZShNYW5hZ2VkSWZhY2UyLmNsYXNzKTsK\nICAgICAgICBtaWYyLnNldEludEZpZWxkU3VwKDEyKTsKICAgICAgICAgICAg\nICAgIAogICAgICAgIFN1YmNsYXNzRiBzY2YgPSBuZXcgU3ViY2xhc3NGKCk7\nCiAgICAgICAgc2NmLnNldENsYXNzRk5hbWUoIlN1YmNsYXNzRk5hbWUiKTsK\nICAgICAgICBzY2Yuc2V0SW50RmllbGRTdXAoMTMpOwoKICAgICAgICBCYXNl\nQ2xhc3MzIGJjMyA9IG5ldyBCYXNlQ2xhc3MzKCk7CiAgICAgICAgYmMzLnNl\ndE5hbWUoIkJhc2VDbGFzczMiKTsKCiAgICAgICAgZW0ucGVyc2lzdChtaWYy\nKTsKICAgICAgICBlbS5wZXJzaXN0KHNjZik7ICAKICAgICAgICBlbS5wZXJz\naXN0KGJjMyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKCiAgICAgICAgZW0uY2xlYXIoKTsKCiAgICAgICAgLy8gVmVyaWZ5IHRo\nYXQgdGhlIGlmYWNlIHRhYmxlIGRvZXMgbm90IGNvbnRhaW4gYSBkaXNjcmlt\naW5hdG9yIGNvbHVtbgogICAgICAgIHZlcmlmeU5vRHlwZUNvbHVtbihlbSwg\nIk1hbmFnZWRJZmFjZTIiKTsKCiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhl\nIHN1YmNsYXNzIHRhYmxlIGRvZXMgbm90IGNvbnRhaW4gYSBkaXNjcmltaW5h\ndG9yCiAgICAgICAgLy8gY29sdW1uCiAgICAgICAgdmVyaWZ5Tm9EeXBlQ29s\ndW1uKGVtLCAiU3ViY2xhc3NGIik7CgogICAgICAgIC8vIFZlcmlmeSB0aGF0\nIHRoZSBiYXNlIGNsYXNzIGRvZXMgY29udGFpbiBhIGRpc2NyaW1pbmF0b3Ig\nY29sdW1uCiAgICAgICAgdmVyaWZ5RHR5cGVDb2x1bW5FbnRyaWVzQW5kTWFw\ncGluZyhlbSwgIkJhc2VDbGFzczMiLCAyLCAKICAgICAgICAgICAgQmFzZUNs\nYXNzMy5jbGFzcyk7CgogICAgICAgIC8vIFF1ZXJ5IHRoZSBzdWJjbGFzcyB0\nYWJsZS4gIE1ha2Ugc3VyZSB0aGUgY291bnRzIGFyZSBjb3JyZWN0IGFuZAog\nICAgICAgIC8vIHRoZSByZXN1bHQgaXMgY2FzdGFibGUgdG8gdGhlIGVudGl0\neSBhbmQgaW50ZXJmYWNlIHR5cGVzLgogICAgICAgIHZlcmlmeUluaGVyaXRh\nbmNlUXVlcnlSZXN1bHQoZW0sICJTdWJjbGFzc0YiLCAKICAgICAgICAgICAg\nY2xhc3NBcnJheShTdWJjbGFzc0YuY2xhc3MsIE1hbmFnZWRJZmFjZTIuY2xh\nc3MsIEJhc2VDbGFzczMuY2xhc3MpLAogICAgICAgICAgICBzY2YuZ2V0SWQo\nKSk7CiAgICAgICAgCiAgICAgICAgLy8gUXVlcnkgdGhlIGJhc2UgY2xhc3Mg\ndGFibGUuICBNYWtlIHN1cmUgdGhlIGNvdW50cyBhcmUgY29ycmVjdCBhbmQK\nICAgICAgICAvLyB0aGUgcmVzdWx0IGlzIGNhc3RhYmxlIHRvIHRoZSBlbnRp\ndHkgYW5kIGludGVyZmFjZSB0eXBlcy4KICAgICAgICB2ZXJpZnlJbmhlcml0\nYW5jZVF1ZXJ5UmVzdWx0KGVtLCAiQmFzZUNsYXNzMyIsIAogICAgICAgICAg\nICBjbGFzc0FycmF5KEJhc2VDbGFzczMuY2xhc3MpLAogICAgICAgICAgICBz\nY2YuZ2V0SWQoKSwgYmMzLmdldElkKCkpOwoKICAgICAgICAvLyBRdWVyeSB0\naGUgaW50ZXJmYWNlMiB0YWJsZS4gIE1ha2Ugc3VyZSB0aGUgY291bnQgaXMg\nY29ycmVjdCBhbmQKICAgICAgICAvLyB0aGUgcmVzdWx0IGlzIGNhc3RhYmxl\nIHRvIHRoZSBpbnRlcmZhY2UgdHlwZS4KICAgICAgICB2ZXJpZnlJbmhlcml0\nYW5jZVF1ZXJ5UmVzdWx0KGVtLCAiTWFuYWdlZElmYWNlMiIsIAogICAgICAg\nICAgICAgICAgY2xhc3NBcnJheShNYW5hZ2VkSWZhY2UyLmNsYXNzKSwKICAg\nICAgICAgICAgICAgIHNjZi5nZXRJZCgpLCBtaWYyLmdldElkKCkpOyAgICAg\nICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgLyoqCiAg\nICAgKiBUaGlzIHZhcmlhdGlvbiB0ZXN0cyBhIGRlZmF1bHQgc2ltcGxlIGNs\nYXNzIGhpZXJhcmNoeSB3aXRoIGEgaW5oZXJpdGFuY2UKICAgICAqIGFubm90\nYXRpb24gZGVmaW5lZCBvbiB0aGUgc3ViY2xhc3MuICAKICAgICAqLwogICAg\ncHVibGljIHZvaWQgdGVzdFN1YmNsYXNzU3BlY2lmaWVkSW5oZXJpdGFuY2Uo\nKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgCiAgICAgICAgLy8gQ3JlYXRlIHNvbWUg\nZW50aXRpZXMKICAgICAgICBTdWJjbGFzc0cgc2NnID0gbmV3IFN1YmNsYXNz\nRygpOwogICAgICAgIHNjZy5zZXRJZCgwKTsKICAgICAgICBzY2cuc2V0TmFt\nZSgiU3ViY2xhc3NHQmFzZUNsYXNzNE5hbWUiKTsKICAgICAgICBzY2cuc2V0\nQ2xhc3NHTmFtZSgiU3ViY2xhc3NHTmFtZSIpOwoKICAgICAgICBCYXNlQ2xh\nc3M0IGIgPSBuZXcgQmFzZUNsYXNzNCgpOwogICAgICAgIGIuc2V0TmFtZSgi\nQmFzZUNsYXNzNE5hbWUiKTsKICAgICAgICBiLnNldElkKDEpOwoKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVy\nc2lzdChzY2cpOwogICAgICAgIGVtLnBlcnNpc3QoYik7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAgICAgICAgZW0uY2xlYXIo\nKTsKICAgICAgICAKICAgICAgICB2ZXJpZnlEdHlwZUNvbHVtbkVudHJpZXNB\nbmRNYXBwaW5nKGVtLCAiQmFzZUNsYXNzNCIsIDIsIAogICAgICAgICAgICBC\nYXNlQ2xhc3M0LmNsYXNzKTsKCiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhl\nIHN1YmNsYXNzIHRhYmxlIGRvZXMgbm90IGNvbnRhaW4gYSBkaXNjcmltaW5h\ndG9yCiAgICAgICAgLy8gY29sdW1uCiAgICAgICAgdmVyaWZ5Tm9EeXBlQ29s\ndW1uKGVtLCAiU3ViY2xhc3NHIik7CiAgICAgICAgCiAgICAgICAgLy8gUnVu\nIHF1ZXJpZXMgZm9yIGVhY2ggdHlwZS4gVGhleSBzaG91bGQgcmV0dXJuIG9u\nbHkgdGhvc2UgdmFsdWVzCiAgICAgICAgLy8gd2hpY2ggbWF0Y2ggdGhlaXIg\ncmVzcGVjdGl2ZSB0eXBlcy4gIFRoaXMgd2lsbCBub3Qgd29yayBmb3Igc2lu\nZ2xlCiAgICAgICAgLy8gdGFibGUgaW5oZXJpdGFuY2UgdW5sZXNzIGEgZGlz\nY3JpbWluYXRvciBjb2x1bW4gaXMgZGVmaW5lZC4KICAgICAgICB2ZXJpZnlJ\nbmhlcml0YW5jZVF1ZXJ5UmVzdWx0KGVtLCAiU3ViY2xhc3NHIiwgCiAgICAg\nICAgICAgIGNsYXNzQXJyYXkoU3ViY2xhc3NHLmNsYXNzLCBCYXNlQ2xhc3M0\nLmNsYXNzKSwgMCk7CgogICAgICAgIHZlcmlmeUluaGVyaXRhbmNlUXVlcnlS\nZXN1bHQoZW0sICJCYXNlQ2xhc3M0IiwgCiAgICAgICAgICAgICAgICBjbGFz\nc0FycmF5KEJhc2VDbGFzczQuY2xhc3MpLCAwLCAxKTsKICAgICAgICAKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfSAgICAKICAgIAogICAgLyoqCiAgICAg\nKiBUaGlzIHZhcmlhdGlvbiB0ZXN0cyBhIGRlZmF1bHQgaW5oZXJpdGFuY2Ug\naGllcmFyY2h5IHdpdGggY2lyY3VsYXIKICAgICAqIHJlbGF0aW9uc2hpcHM6\nCiAgICAgKiAgICBCYXNlQ2xhc3M1IGhhcyByZWwgdG8gU3ViY2xhc3NICiAg\nICAgKiAgICBNaWRDbGFzczIgZXh0ZW5kcyBCYXNlQ2xhc3M1IGluaGVyaXRz\nIHJlbCB0byBTdWJjbGFzc0gKICAgICAqICAgIFN1YkNsYXNzSCBleHRlbmRz\nIE1pZENsYXNzMiBoYXMgcmVsIHRvIEJhc2VDbGFzczUKICAgICAqLyAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3RDaXJjdWxhckluaGVyaXRlZFJlbGF0aW9u\nc2hpcHMoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIC8vIENyZWF0ZSBhbmQgcGVy\nc2lzdCBzb21lIHJlbGF0ZWQgJiBpbmhlcml0ZWQgZW50aXRpZXMKICAgICAg\nICBTdWJjbGFzc0ggc2NoID0gbmV3IFN1YmNsYXNzSCgpOwogICAgICAgIHNj\naC5zZXRJZCgxKTsKICAgICAgICBzY2guc2V0Q2xhc3NITmFtZSgiU3ViY2xh\nc3NITmFtZSIpOwogICAgICAgIHNjaC5zZXROYW1lKCJTdWJjbGFzc0hCYXNl\nQ2xhc3M1TmFtZSIpOwogICAgICAgIHNjaC5zZXRNaWRDbGFzczJOYW1lKCJT\ndWJjbGFzc0hNaWRDbGFzczJOYW1lIik7CiAgICAKICAgICAgICBCYXNlQ2xh\nc3M1IGJjNSA9IG5ldyBCYXNlQ2xhc3M1KCk7CiAgICAgICAgYmM1LnNldElk\nKDIpOwogICAgICAgIGJjNS5zZXROYW1lKCJCYXNlQ2xhc3M1TmFtZSIpOwog\nICAgICAgIGJjNS5zZXRTdWJjbGFzc2goc2NoKTsKICAgICAgICAKICAgICAg\nICBzY2guc2V0QmFzZWNsYXNzNShiYzUpOwogICAgICAgIAogICAgICAgIE1p\nZENsYXNzMiBtYzIgPSBuZXcgTWlkQ2xhc3MyKCk7CiAgICAgICAgbWMyLnNl\ndElkKDMpOwogICAgICAgIG1jMi5zZXRNaWRDbGFzczJOYW1lKCJNaWRDbGFz\nczJOYW1lIik7CiAgICAgICAgbWMyLnNldE5hbWUoIk1pZENsYXNzMkJhc2VD\nbGFzczVOYW1lIik7CiAgICAgICAgbWMyLnNldFN1YmNsYXNzaChzY2gpOwog\nICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBlbS5wZXJzaXN0KHNjaCk7CiAgICAgICAgZW0ucGVyc2lzdChi\nYzUpOwogICAgICAgIGVtLnBlcnNpc3QobWMyKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIGVtLmNs\nZWFyKCk7CgogICAgICAgIHZlcmlmeUR0eXBlQ29sdW1uRW50cmllc0FuZE1h\ncHBpbmcoZW0sICJCYXNlQ2xhc3M1IiwgMywgCiAgICAgICAgICAgICAgICBC\nYXNlQ2xhc3M1LmNsYXNzKTsKCiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhl\nIG1pZGNsYXNzIHRhYmxlIGRvZXMgbm90IGNvbnRhaW4gYSBkaXNjcmltaW5h\ndG9yCiAgICAgICAgLy8gY29sdW1uCiAgICAgICAgdmVyaWZ5Tm9EeXBlQ29s\ndW1uKGVtLCAiTWlkQ2xhc3MyIik7CgogICAgICAgIC8vIFZlcmlmeSB0aGF0\nIHRoZSBzdWJjbGFzcyB0YWJsZSBkb2VzIG5vdCBjb250YWluIGEgZGlzY3Jp\nbWluYXRvcgogICAgICAgIC8vIGNvbHVtbgogICAgICAgIHZlcmlmeU5vRHlw\nZUNvbHVtbihlbSwgIlN1YmNsYXNzSCIpOwogICAgICAgIAogICAgICAgIC8v\nIFJ1biBxdWVyaWVzIGZvciBlYWNoIHR5cGUuIFRoZXkgc2hvdWxkIHJldHVy\nbiBvbmx5IHRob3NlIHZhbHVlcwogICAgICAgIC8vIHdoaWNoIG1hdGNoIHRo\nZWlyIHJlc3BlY3RpdmUgdHlwZXMuICBUaGlzIHdpbGwgbm90IHdvcmsgZm9y\nIHNpbmdsZQogICAgICAgIC8vIHRhYmxlIGluaGVyaXRhbmNlIHVubGVzcyBh\nIGRpc2NyaW1pbmF0b3IgY29sdW1uIGlzIGRlZmluZWQuCiAgICAgICAgdmVy\naWZ5SW5oZXJpdGFuY2VRdWVyeVJlc3VsdChlbSwgIlN1YmNsYXNzSCIsIAog\nICAgICAgICAgICBjbGFzc0FycmF5KFN1YmNsYXNzSC5jbGFzcywgTWlkQ2xh\nc3MyLmNsYXNzLCBCYXNlQ2xhc3M1LmNsYXNzKSwKICAgICAgICAgICAgMSk7\nCgogICAgICAgIHZlcmlmeUluaGVyaXRhbmNlUXVlcnlSZXN1bHQoZW0sICJN\naWRDbGFzczIiLCAKICAgICAgICAgICAgICAgIGNsYXNzQXJyYXkoTWlkQ2xh\nc3MyLmNsYXNzLCBCYXNlQ2xhc3M1LmNsYXNzKSwKICAgICAgICAgICAgICAg\nIDEsIDMpOwoKICAgICAgICB2ZXJpZnlJbmhlcml0YW5jZVF1ZXJ5UmVzdWx0\nKGVtLCAiQmFzZUNsYXNzNSIsIAogICAgICAgICAgICAgICAgY2xhc3NBcnJh\neShCYXNlQ2xhc3M1LmNsYXNzKSwKICAgICAgICAgICAgICAgIDEsIDIsIDMp\nOwogICAgICAgIAogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgCiAgICAg\nICAgLy8gVmFsaWRhdGUgZW50aXR5IHJlbGF0aW9uc2hpcHMKICAgICAgICBz\nY2ggPSBlbS5maW5kKFN1YmNsYXNzSC5jbGFzcywgMSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKHNjaC5nZXROYW1lKCksIlN1YmNsYXNzSEJhc2VDbGFzczVO\nYW1lIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHNjaC5nZXRNaWRDbGFzczJO\nYW1lKCksICJTdWJjbGFzc0hNaWRDbGFzczJOYW1lIik7CiAgICAgICAgLy8g\nU3ViY2xhc3NIIGhhcyByZWxhdGlvbnNoaXAgdG8gQmFzZUNsYXNzNQogICAg\nICAgIGFzc2VydEVxdWFscyhzY2guZ2V0QmFzZWNsYXNzNSgpLmdldElkKCks\nIDIpOwoKICAgICAgICBiYzUgPSBlbS5maW5kKEJhc2VDbGFzczUuY2xhc3Ms\nIDMpOwogICAgICAgIGFzc2VydEVxdWFscyhiYzUuZ2V0TmFtZSgpLCJNaWRD\nbGFzczJCYXNlQ2xhc3M1TmFtZSIpOwogICAgICAgIC8vIEJhc2VDbGFzczUg\naGFzIHJlbGF0aW9uc2hpcCB0byBTdWJjbGFzc0ggdGhyb3VnaCBNaWRDbGFz\nczIKICAgICAgICBhc3NlcnRFcXVhbHMoYmM1LmdldFN1YmNsYXNzaCgpLmdl\ndElkKCksIDEpOyAgICAgICAgCiAgICAgICAgCiAgICAgICAgYmM1ID0gZW0u\nZmluZChCYXNlQ2xhc3M1LmNsYXNzLCAyKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoYmM1LmdldE5hbWUoKSwiQmFzZUNsYXNzNU5hbWUiKTsKICAgICAgICAv\nLyBCYXNlQ2xhc3M1IGhhcyByZWxhdGlvbnNoaXAgdG8gU3ViY2xhc3NICiAg\nICAgICAgYXNzZXJ0RXF1YWxzKGJjNS5nZXRTdWJjbGFzc2goKS5nZXRJZCgp\nLCAxKTsgICAgICAgIAoKICAgICAgICBtYzIgPSBlbS5maW5kKE1pZENsYXNz\nMi5jbGFzcywgMyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG1jMi5nZXROYW1l\nKCksIk1pZENsYXNzMkJhc2VDbGFzczVOYW1lIik7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKG1jMi5nZXRNaWRDbGFzczJOYW1lKCksICJNaWRDbGFzczJOYW1l\nIik7CiAgICAgICAgLy8gTWlkQ2xhc3MyIGhhcyByZWxhdGlvbnNoaXAgdG8g\nU3ViY2xhc3NICiAgICAgICAgYXNzZXJ0RXF1YWxzKGJjNS5nZXRTdWJjbGFz\nc2goKS5nZXRJZCgpLCAxKTsgICAgICAgIAoKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFRoaXMgdmFyaWF0aW9uIHZl\ncmlmaWVzIGRlZmF1bHQgaW5oZXJpdGFuY2Ugd2l0aCBhbiBhYnN0cmFjdAog\nICAgICogZW50aXR5LgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0QWJz\ndHJhY3RFbnRpdHlJbmhlcml0YW5jZSgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgIAog\nICAgICAgIFN1YmNsYXNzSSBzY2kgPSBuZXcgU3ViY2xhc3NJKCk7CiAgICAg\nICAgc2NpLnNldElkKDEpOwogICAgICAgIHNjaS5zZXRDbGFzc0lOYW1lKCJT\ndWJjbGFzc0lOYW1lIik7CiAgICAgICAgc2NpLnNldE5hbWUoIlN1YmNsYXNz\nSUJhc2VDbGFzc05hbWUiKTsKICAgICAgICAKICAgICAgICBTdWJjbGFzc0og\nc2NqID0gbmV3IFN1YmNsYXNzSigpOwogICAgICAgIHNjai5zZXRJZCgyKTsK\nICAgICAgICBzY2ouc2V0Q2xhc3NKTmFtZSgiU3ViY2xhc3NKTmFtZSIpOwog\nICAgICAgIHNjai5zZXROYW1lKCJTdWJjbGFzc0pCYXNlQ2xhc3NOYW1lIik7\nCiAgICAgICAgCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwogICAgICAgIGVtLnBlcnNpc3Qoc2NpKTsKICAgICAgICBlbS5wZXJzaXN0\nKHNjaik7ICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CiAgICAgICAgCiAgICAgICAgZW0uY2xlYXIoKTsKCiAgICAgICAgdmVy\naWZ5RHR5cGVDb2x1bW5FbnRyaWVzQW5kTWFwcGluZyhlbSwgIkFic3RyYWN0\nQ2xhc3MiLCAyLCAKICAgICAgICAgICAgICAgIEFic3RyYWN0Q2xhc3MuY2xh\nc3MpOwoKICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGUgbWlkY2xhc3MgdGFi\nbGUgZG9lcyBub3QgY29udGFpbiBhIGRpc2NyaW1pbmF0b3IKICAgICAgICAv\nLyBjb2x1bW4KICAgICAgICB2ZXJpZnlOb0R5cGVDb2x1bW4oZW0sICJTdWJj\nbGFzc0kiKTsKCiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlIHN1YmNsYXNz\nIHRhYmxlIGRvZXMgbm90IGNvbnRhaW4gYSBkaXNjcmltaW5hdG9yCiAgICAg\nICAgLy8gY29sdW1uCiAgICAgICAgdmVyaWZ5Tm9EeXBlQ29sdW1uKGVtLCAi\nU3ViY2xhc3NKIik7ICAgICAgICAKICAgICAgICAKICAgICAgICAvLyBSdW4g\ncXVlcmllcyBmb3IgZWFjaCB0eXBlLiBUaGV5IHNob3VsZCByZXR1cm4gb25s\neSB0aG9zZSB2YWx1ZXMKICAgICAgICAvLyB3aGljaCBtYXRjaCB0aGVpciBy\nZXNwZWN0aXZlIHR5cGVzLiAgVGhpcyB3aWxsIG5vdCB3b3JrIGZvciBzaW5n\nbGUKICAgICAgICAvLyB0YWJsZSBpbmhlcml0YW5jZSB1bmxlc3MgYSBkaXNj\ncmltaW5hdG9yIGNvbHVtbiBpcyBkZWZpbmVkLgogICAgICAgIHZlcmlmeUlu\naGVyaXRhbmNlUXVlcnlSZXN1bHQoZW0sICJBYnN0cmFjdENsYXNzIiwgCiAg\nICAgICAgICAgIGNsYXNzQXJyYXkoQWJzdHJhY3RDbGFzcy5jbGFzcyksIDEs\nIDIpOwoKICAgICAgICB2ZXJpZnlJbmhlcml0YW5jZVF1ZXJ5UmVzdWx0KGVt\nLCAiU3ViY2xhc3NJIiwgCiAgICAgICAgICAgICAgICBjbGFzc0FycmF5KEFi\nc3RyYWN0Q2xhc3MuY2xhc3MsIFN1YmNsYXNzSS5jbGFzcyksIDEpOwoKICAg\nICAgICB2ZXJpZnlJbmhlcml0YW5jZVF1ZXJ5UmVzdWx0KGVtLCAiU3ViY2xh\nc3NKIiwgCiAgICAgICAgICAgICAgICBjbGFzc0FycmF5KEFic3RyYWN0Q2xh\nc3MuY2xhc3MsIFN1YmNsYXNzSi5jbGFzcyksIDIpOyAgICAgICAgCiAgICAg\nICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgLyoqCiAg\nICAgKiBUaGlzIHZhcmlhdGlvbiB2ZXJpZmllcyB0aGF0IGRlZmF1bHQgaW5o\nZXJpdGFuY2UgaXMgdXNlZCB3aGVuCiAgICAgKiB0aGVyZSBpcyBhIG5vbi1l\nbnRpdHkgc3VwZXJjbGFzcyBpbiB0aGUgbWl4OgogICAgICogICBub24tZW50\naXR5IE1pZENsYXNzMyBleHRlbmRzIEJhc2VDbGFzczYKICAgICAqICAgU3Vi\nQ2xhc3NKIGV4dGVuZHMgTWlkQ2xhc3MzCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHRlc3RNaWROb25FbnRpdHlJbmhlcml0YW5jZSgpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICAKICAgICAgICBTdWJjbGFzc0sgc2NrID0gbmV3IFN1YmNsYXNz\nSygpOwogICAgICAgIHNjay5zZXRJZCgxKTsKICAgICAgICBzY2suc2V0Q2xh\nc3NLTmFtZSgiU3ViY2xhc3NLTmFtZSIpOwogICAgICAgIHNjay5zZXRNaWRD\nbGFzczNOYW1lKCJTdWJjbGFzc0tNaWRDbGFzczNOYW1lIik7CiAgICAgICAg\nc2NrLnNldE5hbWUoIlN1YmNsYXNzS0Jhc2VDbGFzczZOYW1lIik7CiAgICAg\nICAgICAgICAgICAKICAgICAgICBCYXNlQ2xhc3M2IGJrNiA9IG5ldyBCYXNl\nQ2xhc3M2KCk7CiAgICAgICAgYms2LnNldElkKDMpOwogICAgICAgIGJrNi5z\nZXROYW1lKCJCYXNlQ2xhc3M2TmFtZSIpOwogICAgICAgIAogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0\nKHNjayk7CiAgICAgICAgZW0ucGVyc2lzdChiazYpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAgZW0u\nY2xlYXIoKTsKICAgICAgICAKICAgICAgICB2ZXJpZnlEdHlwZUNvbHVtbkVu\ndHJpZXNBbmRNYXBwaW5nKGVtLCAiQmFzZUNsYXNzNiIsIDIsIAogICAgICAg\nICAgICAgICAgQmFzZUNsYXNzNi5jbGFzcyk7CgogICAgICAgIC8vIFZlcmlm\neSB0aGF0IHRoZSBzdWJjbGFzcyB0YWJsZSBkb2VzIG5vdCBjb250YWluIGEg\nZGlzY3JpbWluYXRvcgogICAgICAgIC8vIGNvbHVtbgogICAgICAgIHZlcmlm\neU5vRHlwZUNvbHVtbihlbSwgIlN1YmNsYXNzSyIpOyAgICAgICAgICAgCgog\nICAgICAgIC8vIFJ1biBxdWVyaWVzIGZvciBlYWNoIHR5cGUuIFRoZXkgc2hv\ndWxkIHJldHVybiBvbmx5IHRob3NlIHZhbHVlcwogICAgICAgIC8vIHdoaWNo\nIG1hdGNoIHRoZWlyIHJlc3BlY3RpdmUgdHlwZXMuICBUaGlzIHdpbGwgbm90\nIHdvcmsgZm9yIHNpbmdsZQogICAgICAgIC8vIHRhYmxlIGluaGVyaXRhbmNl\nIHVubGVzcyBhIGRpc2NyaW1pbmF0b3IgY29sdW1uIGlzIGRlZmluZWQuCiAg\nICAgICAgdmVyaWZ5SW5oZXJpdGFuY2VRdWVyeVJlc3VsdChlbSwgIkJhc2VD\nbGFzczYiLCAKICAgICAgICAgICAgY2xhc3NBcnJheShCYXNlQ2xhc3M2LmNs\nYXNzKSwgMSwgMyk7CgogICAgICAgIHZlcmlmeUluaGVyaXRhbmNlUXVlcnlS\nZXN1bHQoZW0sICJTdWJjbGFzc0siLCAKICAgICAgICAgICAgICAgIGNsYXNz\nQXJyYXkoQmFzZUNsYXNzNi5jbGFzcywgTWlkQ2xhc3MzLmNsYXNzLCBTdWJj\nbGFzc0suY2xhc3MpLAogICAgICAgICAgICAgICAgMSk7ICAgICAgICAKCiAg\nICAgICAgZW0uY2xvc2UoKTsgICAgICAgIAogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCB0ZXN0RmluZGVyKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIFN1YmNs\nYXNzSyBzY2sgPSBuZXcgU3ViY2xhc3NLKCk7CiAgICAgICAgc2NrLnNldElk\nKDQ3OSk7CiAgICAgICAgc2NrLnNldENsYXNzS05hbWUoIlN1YmNsYXNzS05h\nbWUiKTsKICAgICAgICBzY2suc2V0TWlkQ2xhc3MzTmFtZSgiU3ViY2xhc3NL\nTWlkQ2xhc3MzTmFtZSIpOwogICAgICAgIHNjay5zZXROYW1lKCJTdWJjbGFz\nc0tCYXNlQ2xhc3M2TmFtZSIpOwogICAgICAgICAgICAgICAgCiAgICAgICAg\nQmFzZUNsYXNzNiBiazYgPSBuZXcgQmFzZUNsYXNzNigpOwogICAgICAgIGJr\nNi5zZXRJZCgzMDIpOwogICAgICAgIGJrNi5zZXROYW1lKCJCYXNlQ2xhc3M2\nTmFtZSIpOwogICAgICAgIAogICAgICAgIFN1YmNsYXNzSSBzY2kgPSBuZXcg\nU3ViY2xhc3NJKCk7CiAgICAgICAgc2NpLnNldElkKDEwOSk7CiAgICAgICAg\nc2NpLnNldENsYXNzSU5hbWUoIlN1YmNsYXNzSU5hbWUiKTsKICAgICAgICBz\nY2kuc2V0TmFtZSgiU3ViY2xhc3NJQmFzZUNsYXNzTmFtZSIpOwogICAgICAg\nIAogICAgICAgIFN1YmNsYXNzSiBzY2ogPSBuZXcgU3ViY2xhc3NKKCk7CiAg\nICAgICAgc2NqLnNldElkKDIzOCk7CiAgICAgICAgc2NqLnNldENsYXNzSk5h\nbWUoIlN1YmNsYXNzSk5hbWUiKTsKICAgICAgICBzY2ouc2V0TmFtZSgiU3Vi\nY2xhc3NKQmFzZUNsYXNzTmFtZSIpOwoKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChzY2spOwogICAg\nICAgIGVtLnBlcnNpc3QoYms2KTsKICAgICAgICBlbS5wZXJzaXN0KHNjaSk7\nCiAgICAgICAgZW0ucGVyc2lzdChzY2opOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAgZW0uY2xlYXIo\nKTsKCiAgICAgICAgdmVyaWZ5SW5oZXJpdGFuY2VGaW5kZXJSZXN1bHQoZW0s\nIFN1YmNsYXNzSy5jbGFzcywgNDc5KTsKICAgICAgICB2ZXJpZnlJbmhlcml0\nYW5jZUZpbmRlclJlc3VsdChlbSwgQmFzZUNsYXNzNi5jbGFzcywgNDc5LCAz\nMDIpOwogICAgICAgIHZlcmlmeUluaGVyaXRhbmNlRmluZGVyUmVzdWx0KGVt\nLCBTdWJjbGFzc0kuY2xhc3MsIDEwOSk7CiAgICAgICAgdmVyaWZ5SW5oZXJp\ndGFuY2VGaW5kZXJSZXN1bHQoZW0sIFN1YmNsYXNzSi5jbGFzcywgMjM4KTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFZlcmlmaWVzIHRoYXQgYSB0YWJsZSBj\nb250YWlucyB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBlbnRyaWVzCiAgICAg\nKiBpbiBpdHMgRFRZUEUgKGRlZmF1bHQgZGlzY3JpbWluYXRvcikgY29sdW1u\nLgogICAgICogQHBhcmFtIGVtICBFbnRpdHkgbmFuYWdlcgogICAgICogQHBh\ncmFtIHRhYmxlICBOYW1lIG9mIHRoZSB0YWJsZSB0byBxdWVyeQogICAgICog\nQHBhcmFtIGVudHJpZXMgIEV4cGVjdGVkIGNvbHVtbiBlbnRyeSBjb3VudAog\nICAgICogQHBhcmFtIGJhc2VDbGFzcyBDbGFzcyBtYXBwaW5nIHRvIHZlcmlm\neQogICAgICovCiAgICBwcml2YXRlIHZvaWQgdmVyaWZ5RHR5cGVDb2x1bW5F\nbnRyaWVzQW5kTWFwcGluZyhFbnRpdHlNYW5hZ2VyIGVtLCAKICAgICAgICBT\ndHJpbmcgdGFibGUsIGludCBlbnRyaWVzLCBDbGFzcyBiYXNlQ2xhc3MpIHsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBRdWVyeSBxcnkgPSBlbS5jcmVh\ndGVOYXRpdmVRdWVyeSgiU0VMRUNUIERUWVBFIEZST00gIiArIHRhYmxlKTsK\nICAgICAgICAgICAgTGlzdCB2YWxzID0gcXJ5LmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiUXVlcnkgc2hvdWxkIGhhdmUgcmV0\ndXJuZWQgIiArIGVudHJpZXMgKyAiIHZhbHVlcyIsIAogICAgICAgICAgICAg\nICAgdmFscy5zaXplKCkgPT0gZW50cmllcyk7CiAgICAgICAgfQogICAgICAg\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBmYWlsKCJFeGNl\ncHRpb24gcXVlcnlpbmcgRFRZUEUgY29sdW1uOiAiICsgZS5nZXRNZXNzYWdl\nKCkpOwogICAgICAgIH0gICAgICAgIAogICAgICAgIAogICAgICAgIC8vIENo\nZWNrIHRoZSBkaXNjcmltaW5hdG9yIGNvbHVtbiBvZiB0aGUgY2xhc3MgbWFw\ncGluZy4gIAogICAgICAgIENsYXNzTWFwcGluZyBjbSA9IGdldE1hcHBpbmco\nYmFzZUNsYXNzKTsKICAgICAgICBEaXNjcmltaW5hdG9yIGQgPSBjbS5nZXRE\naXNjcmltaW5hdG9yKCk7CiAgICAgICAgQ29sdW1uW10gY29scyA9IGQuZ2V0\nQ29sdW1ucygpOwogICAgICAgIGFzc2VydFRydWUoIkRpc2NyaW1pbmF0b3Ig\nc2hvdWxkIHVzZSBEVFlQRSBjb2x1bW4iLCAKICAgICAgICAgICAgKGNvbHMg\nIT0gbnVsbCAmJiBjb2xzLmxlbmd0aCA9PSAxICYmIAogICAgICAgICAgICBj\nb2xzWzBdLmdldE5hbWUoKS5lcXVhbHMoIkRUWVBFIikpKTsgCiAgICB9Cgog\nICAgLyoqCiAgICAgKiBWZXJpZmllcyB0aGF0IGEgdGFibGUgZG9lcyBub3Qg\nY29udGFpbiBhIERUWVBFIGNvbHVtbi4KICAgICAqIEBwYXJhbSBlbSAgRW50\naXR5IG1hbmFnZXIKICAgICAqIEBwYXJhbSB0YWJsZSBOYW1lIG9mIHRoZSB0\nYWJsZSB0byBxdWVyeQogICAgICovCiAgICBwcml2YXRlIHZvaWQgdmVyaWZ5\nTm9EeXBlQ29sdW1uKEVudGl0eU1hbmFnZXIgZW0sIFN0cmluZyB0YWJsZSkg\newogICAgICAgIHRyeSB7CiAgICAgICAgICAgIFF1ZXJ5IHFyeSA9IGVtLmNy\nZWF0ZU5hdGl2ZVF1ZXJ5KCJTRUxFQ1QgRFRZUEUgRlJPTSAiICsgdGFibGUp\nOwogICAgICAgICAgICBxcnkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAg\nICBmYWlsKCJFeHBlY3RlZCBleGNlcHRpb24uICBEVFlQRSBjb2x1bW4gc2hv\ndWxkIG5vdCBleGlzdCBvbiAiICsgCiAgICAgICAgICAgICAgICB0YWJsZSk7\nCiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICAvLyBFeHBlY3RlZCBleGNlcHRpb24KICAgICAgICB9ICAgICAg\nICAKICAgIH0gICAgCgogICAgLyoqCiAgICAgKiBWZXJpZmllcyB0aGUgcmVz\ndWx0aW5nIGVudGl0eSBjb3VudCBhbmQgZXhwZWN0ZWQgZW50aXR5IGlkcyBm\ncm9tIGEgCiAgICAgKiBzaW1wbGUgZW50aXR5IHF1ZXJ5LiAgVGhpcyBtZXRo\nb2QgcmVxdWlyZXMgYSAiZ2V0SWQiIG1ldGhvZCBvbiB0aGUKICAgICAqIGVu\ndGl0eSB0eXBlIGluIG9yZGVyIHRvIHdvcmsgcHJvcGVybHkuCiAgICAgKiAK\nICAgICAqIEBwYXJhbSBlbSBlbnRpdHkgbWFuYWdlcgogICAgICogQHBhcmFt\nIGVudGl0eSBlbnRpdHkgbmFtZQogICAgICogQHBhcmFtIGVudGl0eVR5cGUg\nZW50aXR5IGNsYXNzCiAgICAgKiBAcGFyYW0gZXhwZWN0ZWRWYWx1ZXMgdmFy\naWFibGUgbGlzdCBvZiBleHBlY3RlZCBpbnRlZ3JhbCBpZCB2YWx1ZXMuCiAg\nICAgKi8KICAgIHByaXZhdGUgdm9pZCB2ZXJpZnlJbmhlcml0YW5jZVF1ZXJ5\nUmVzdWx0KEVudGl0eU1hbmFnZXIgZW0sIFN0cmluZyBlbnRpdHksCiAgICAg\nICAgQ2xhc3NbXSB0eXBlcywgaW50Li4uIGV4cGVjdGVkVmFsdWVzKSB7CiAg\nICAJU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGUgRlJPTSAiICsgZW50aXR5ICsg\nIiBlIjsKICAgICAgICBRdWVyeSBxcnkgPSBlbS5jcmVhdGVRdWVyeShqcHFs\nKTsKICAgICAgICBMaXN0IGNvbCA9IHFyeS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZSgiUXVlcnkgc2hvdWxkIHJldHVybiAiICsgZXhw\nZWN0ZWRWYWx1ZXMubGVuZ3RoICsgIiBlbnRpdGllcyIsCiAgICAgICAgICAg\nIGNvbC5zaXplKCkgPT0gZXhwZWN0ZWRWYWx1ZXMubGVuZ3RoKTsKICAgICAg\nICBpbnQgY291bnQgPSAwOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nY29sLnNpemUoKTsgaSsrKSB7CiAgICAgICAgICAgIE9iamVjdCBlbnQgPSBj\nb2wuZ2V0KGkpOwogICAgICAgICAgICAvLyBJZiBhIGxpc3Qgb2Ygc3VwZXJz\nIG9yIGludGVyZmFjZXMgaXMgcHJvdmlkZWQsIG1ha2Ugc3VyZQogICAgICAg\nICAgICAvLyB0aGUgcmV0dXJuZWQgdHlwZSBpcyBhbiBpbnN0YW5jZSBvZiB0\naG9zZSB0eXBlcwogICAgICAgICAgICBpZiAodHlwZXMgIT0gbnVsbCkgewog\nICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCB0eXBlcy5sZW5n\ndGg7IGorKyApCiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZSh0eXBl\nc1tqXS5pc0luc3RhbmNlKGVudCkpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGludCBpZCA9IC0xOwogICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgTWV0aG9kIG10aCA9IGVudC5nZXRDbGFzcygpLmdldE1ldGhvZCgi\nZ2V0SWQiLCAoQ2xhc3NbXSludWxsKTsKICAgICAgICAgICAgICAgIGlkID0g\nKEludGVnZXIpbXRoLmludm9rZShlbnQsIChPYmplY3RbXSludWxsKTsKICAg\nICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nICAgIGZhaWwoIkNhdWdodCB1bmV4ZXBjdGVkIGV4Y2VwdGlvbiBnZXR0aW5n\nIGVudGl0eSBpZDogIiAKICAgICAgICAgICAgICAgICAgICArIGUuZ2V0TWVz\nc2FnZSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGludCBq\nID0gMDsgaiA8IGV4cGVjdGVkVmFsdWVzLmxlbmd0aDsgaisrKQogICAgICAg\nICAgICAgICAgaWYgKGV4cGVjdGVkVmFsdWVzW2pdID09IGlkKSAgICAgICAg\nICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAg\nICAgIH0KICAgICAgICBhc3NlcnRUcnVlKCJSZXR1cm5lZCB1bmV4cGVjdGVk\nIGVudGl0aWVzICIgKyBjb2wgKyAiIGZvciAiICsganBxbCwgCiAgICAgICAg\nICAgICAgICBjb3VudCA9PSBleHBlY3RlZFZhbHVlcy5sZW5ndGgpOwogICAg\nfSAgICAKICAgIAogICAgcHJpdmF0ZSB2b2lkIHZlcmlmeUluaGVyaXRhbmNl\nRmluZGVyUmVzdWx0KEVudGl0eU1hbmFnZXIgZW0sIAogICAgICAgIENsYXNz\nIGVudGl0eVR5cGUsIGludC4uLiBpZHMpIHsKICAgICAgICBmb3IgKGludCBq\nID0gMDsgaiA8IDI7IGorKykgewogICAgICAgICAgICBlbS5jbGVhcigpOwog\nICAgICAgICAgICBmb3IgKGludCBpZCA6IGlkcykgewogICAgICAgICAgICAg\nICAgT2JqZWN0IHBjID0gZW0uZmluZChlbnRpdHlUeXBlLCBpZCk7CiAgICAg\nICAgICAgICAgICBhc3NlcnRUcnVlKGVudGl0eVR5cGUuaXNBc3NpZ25hYmxl\nRnJvbShwYy5nZXRDbGFzcygpKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICB9ICAgIAoKfQo=\n","encoding":"base64"}

