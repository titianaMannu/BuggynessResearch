{"sha":"291936928d479aa5a7e814f3e7045f74c4ab43ee","node_id":"MDQ6QmxvYjIwNjM2NDoyOTE5MzY5MjhkNDc5YWE1YTdlODE0ZjNlNzA0NWY3NGM0YWI0M2Vl","size":6584,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/291936928d479aa5a7e814f3e7045f74c4ab43ee","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmFubm90\nYXRpb25zOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJD\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5zdHJhdHMuTm9uZVZlcnNpb25TdHJhdGVneTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVN\nRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3QgZm9yIG9wdC1sb2NrCiAqCiAqIEBh\ndXRob3IgU3RldmUgS2ltCiAqLwpwdWJsaWMgY2xhc3MgVGVzdFZlcnNpb24g\nZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7CgogICAgcHVibGljIHZvaWQg\nc2V0VXAoKSB7CiAgICAgICAgc2V0VXAoQW5ub1Rlc3QxLmNsYXNzLCBBbm5v\nVGVzdDIuY2xhc3MsIEFubm9UZXN0My5jbGFzcywgRmxhdDEuY2xhc3MsCiAg\nICAgICAgICAgIEVtYmVkT3duZXIuY2xhc3MsIEVtYmVkVmFsdWUuY2xhc3Ms\nIENMRUFSX1RBQkxFUyk7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBBbm5vVGVzdDEgdGVzdDEgPSBu\nZXcgQW5ub1Rlc3QxKCk7CiAgICAgICAgdGVzdDEuc2V0UGsobmV3IExvbmco\nNSkpOwogICAgICAgIHRlc3QxLnNldEJhc2ljKDUwKTsKICAgICAgICB0ZXN0\nMS5zZXRUcmFuc2llbnQoNTAwKTsKICAgICAgICBlbS5wZXJzaXN0KHRlc3Qx\nKTsKCiAgICAgICAgQW5ub1Rlc3QyIHRlc3QyID0gbmV3IEFubm9UZXN0Migp\nOwogICAgICAgIHRlc3QyLnNldFBrMSg1KTsKICAgICAgICB0ZXN0Mi5zZXRQ\nazIoImJhciIpOwogICAgICAgIHRlc3QyLnNldEJhc2ljKCI1MCIpOwogICAg\nICAgIGVtLnBlcnNpc3QodGVzdDIpOwoKICAgICAgICBBbm5vVGVzdDMgdGVz\ndDMgPSBuZXcgQW5ub1Rlc3QzKCk7CiAgICAgICAgdGVzdDMuc2V0UGsobmV3\nIExvbmcoMykpOwogICAgICAgIHRlc3QzLnNldEJhc2ljMig1MCk7CiAgICAg\nICAgZW0ucGVyc2lzdCh0ZXN0Myk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RWZXJzaW9uTnVtZXJpYygpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtMSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgZW0xLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtMiA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAg\nICAgICAgQW5ub1Rlc3QxIHBjMSA9IGVtMS5maW5kKEFubm9UZXN0MS5jbGFz\ncywgbmV3IExvbmcoNSkpOwogICAgICAgIEFubm9UZXN0MSBwYzIgPSBlbTIu\nZmluZChBbm5vVGVzdDEuY2xhc3MsIG5ldyBMb25nKDUpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgcGMxLmdldFZlcnNpb24oKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIHBjMi5nZXRWZXJzaW9uKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygwLCBwYzEuZ2V0VHJhbnNpZW50KCkpOwogICAgICAgIHBjMS5z\nZXRCYXNpYyg3NSk7CiAgICAgICAgcGMyLnNldEJhc2ljKDc1KTsKICAgICAg\nICBlbTEuZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbTEu\nY2xvc2UoKTsKCiAgICAgICAgZW0xID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBwYzEgPSBlbTEuZmluZChBbm5vVGVzdDEuY2xhc3Ms\nIG5ldyBMb25nKDUpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMxLmdl\ndFZlcnNpb24oKSk7CiAgICAgICAgZW0xLmNsb3NlKCk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgICAgIGZhaWwoIk9wdGltaXN0aWMgZmFpbCIpOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICAgICAgZW0yLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RWZXJzaW9uVGltZXN0YW1wKCkgewogICAgICAg\nIC8vIGVuc3VyZSB0aGF0IHNvbWUgdGltZSBoYXMgcGFzc2VkCiAgICAgICAg\nLy8gc2luY2UgdGhlIHJlY29yZHMgd2VyZSBjcmVhdGVkCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgVGhyZWFkLnNsZWVwKDUwMDApOwogICAgICAgIH0K\nICAgICAgICBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICAvLyBkbyBub3RoaW5nCiAgICAgICAgfQogICAgICAgIAogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0xID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbTEuZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0yID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwoKICAgICAgICBBbm5vVGVzdDIgcGMxID0gZW0xLmZpbmQoQW5ub1Rlc3Qy\nLmNsYXNzLAogICAgICAgICAgICBuZXcgQW5ub1Rlc3QyLk9pZCg1LCAiYmFy\nIikpOwogICAgICAgIEFubm9UZXN0MiBwYzIgPSBlbTIuZmluZChBbm5vVGVz\ndDIuY2xhc3MsCiAgICAgICAgICAgIG5ldyBBbm5vVGVzdDIuT2lkKDUsICJi\nYXIiKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYzEuZ2V0VmVyc2lvbigp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMocGMxLmdldFZlcnNpb24oKSwgcGMy\nLmdldFZlcnNpb24oKSk7CiAgICAgICAgcGMxLnNldEJhc2ljKCI3NSIpOwog\nICAgICAgIHBjMi5zZXRCYXNpYygiNzUiKTsKICAgICAgICBlbTEuZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbTEuY2xvc2UoKTsKCiAg\nICAgICAgZW0xID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBwYzEgPSBlbTEuZmluZChBbm5vVGVzdDIuY2xhc3MsCiAgICAgICAgICAg\nIG5ldyBBbm5vVGVzdDIuT2lkKDUsICJiYXIiKSk7CiAgICAgICAgamF2YS51\ndGlsLkRhdGUgcGMxVmVyc2lvbiA9IHBjMS5nZXRWZXJzaW9uKCk7CiAgICAg\nICAgamF2YS51dGlsLkRhdGUgcGMyVmVyc2lvbiA9IHBjMi5nZXRWZXJzaW9u\nKCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwYzFWZXJzaW9uLmNvbXBhcmVUbyhw\nYzJWZXJzaW9uKSA+IDApOwogICAgICAgIGVtMS5jbG9zZSgpOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGVtMi5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwogICAgICAgICAgICBmYWlsKCJPcHRpbWlzdGljIGZhaWwiKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0gZmluYWxs\neSB7CiAgICAgICAgICAgIGVtMi5jbG9zZSgpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0VmVyc2lvblN1YmNsYXNzKCkgewogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0xID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbTEuZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0yID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwoKICAgICAgICBBbm5vVGVzdDMgcGMxID0gZW0xLmZpbmQoQW5ub1Rlc3Qz\nLmNsYXNzLCBuZXcgTG9uZygzKSk7CiAgICAgICAgQW5ub1Rlc3QzIHBjMiA9\nIGVtMi5maW5kKEFubm9UZXN0My5jbGFzcywgbmV3IExvbmcoMykpOwogICAg\nICAgIGFzc2VydEVxdWFscygxLCBwYzEuZ2V0VmVyc2lvbigpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgcGMyLmdldFZlcnNpb24oKSk7CiAgICAgICAg\ncGMxLnNldEJhc2ljMig3NSk7CiAgICAgICAgcGMyLnNldEJhc2ljMig3NSk7\nCiAgICAgICAgZW0xLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgZW0xLmNsb3NlKCk7CgogICAgICAgIGVtMSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgcGMxID0gZW0xLmZpbmQoQW5ub1Rlc3Qz\nLmNsYXNzLCBuZXcgTG9uZygzKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIs\nIHBjMS5nZXRWZXJzaW9uKCkpOwogICAgICAgIGVtMS5jbG9zZSgpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGVtMi5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgICAgICBmYWlsKCJPcHRpbWlzdGljIGZhaWwiKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgIGVtMi5jbG9zZSgpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VmVyc2lvbk5vQ2hhbmdlKCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nCiAgICAgICAgQW5ub1Rlc3QxIHBjID0gZW0uZmluZChBbm5vVGVzdDEuY2xh\nc3MsIG5ldyBMb25nKDUpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMu\nZ2V0VmVyc2lvbigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMCwgcGMuZ2V0\nVHJhbnNpZW50KCkpOwogICAgICAgIHBjLnNldFRyYW5zaWVudCg3NTApOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIHBjID0gZW0uZmluZChBbm5vVGVzdDEuY2xhc3Ms\nIG5ldyBMb25nKDUpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0\nVmVyc2lvbigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMCwgcGMuZ2V0VHJh\nbnNpZW50KCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdE5vRGVmYXVsdFZlcnNpb25XaXRob3V0RmllbGRPckNv\nbHVtbigpIHsKICAgICAgICBDbGFzc01hcHBpbmcgY2xzID0gKChKREJDQ29u\nZmlndXJhdGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKSkuCiAgICAgICAg\nICAgIGdldE1hcHBpbmdSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNYXBwaW5n\nKEVtYmVkT3duZXIuY2xhc3MsIAogICAgICAgICAgICBudWxsLCB0cnVlKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoTm9uZVZlcnNpb25TdHJhdGVneS5nZXRJ\nbnN0YW5jZSgpLAogICAgICAgICAgICBjbHMuZ2V0VmVyc2lvbigpLmdldFN0\ncmF0ZWd5KCkpOwogICAgICAgIGFzc2VydEVxdWFscygwLCBjbHMuZ2V0VmVy\nc2lvbigpLmdldENvbHVtbnMoKS5sZW5ndGgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RWZXJzaW9uV2l0aEZpZWxkKCkgewogICAgICAgIENsYXNz\nTWFwcGluZyBjbHMgPSAoKEpEQkNDb25maWd1cmF0aW9uKSBlbWYuZ2V0Q29u\nZmlndXJhdGlvbigpKS4KICAgICAgICAgICAgZ2V0TWFwcGluZ1JlcG9zaXRv\ncnlJbnN0YW5jZSgpLmdldE1hcHBpbmcoQW5ub1Rlc3QxLmNsYXNzLCAKICAg\nICAgICAgICAgbnVsbCwgdHJ1ZSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShOb25l\nVmVyc2lvblN0cmF0ZWd5LmdldEluc3RhbmNlKCkgIT0KICAgICAgICAgICAg\nY2xzLmdldFZlcnNpb24oKS5nZXRTdHJhdGVneSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMSwgY2xzLmdldFZlcnNpb24oKS5nZXRDb2x1bW5zKCkubGVu\nZ3RoKTsKICAgIH0KfQo=\n","encoding":"base64"}

