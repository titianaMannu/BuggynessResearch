{"sha":"e75aa0baeecc51fe0fcc7a032976dfd5f1fdbe0f","node_id":"MDQ6QmxvYjIwNjM2NDplNzVhYTBiYWVlY2M1MWZlMGZjYzdhMDMyOTc2ZGZkNWYxZmRiZTBm","size":3390,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e75aa0baeecc51fe0fcc7a032976dfd5f1fdbe0f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5t\nYXBzLm0ybW1hcGV4MTA7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuKjsK\nCmltcG9ydCBqYXZhLnV0aWwuKjsKCkBFbnRpdHkKQFRhYmxlKG5hbWU9Ik0x\nMEVtcCIpCnB1YmxpYyBjbGFzcyBFbXBsb3llZSB7CiAgICBARW1iZWRkZWRJ\nZAogICAgRW1wbG95ZWVQSyBlbXBQSzsKCiAgICBATWFueVRvTWFueSAvLyBC\naWRpcmVjdGlvbmFsCiAgICBNYXA8UGhvbmVQSywgUGhvbmVOdW1iZXI+IHBo\nb25lcyA9IG5ldyBIYXNoTWFwPFBob25lUEssIFBob25lTnVtYmVyPigpOwoK\nICAgIGludCBzYWxhcnk7CgogICAgcHVibGljIEVtcGxveWVlUEsgZ2V0RW1w\nUEsoKSB7CiAgICAgICAgcmV0dXJuIGVtcFBLOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldEVtcFBLKEVtcGxveWVlUEsgZW1wUEspIHsKICAgICAgICB0\naGlzLmVtcFBLID0gZW1wUEs7CiAgICB9CgoKICAgIHB1YmxpYyBNYXA8UGhv\nbmVQSywgUGhvbmVOdW1iZXI+IGdldFBob25lTnVtYmVycygpIHsKICAgICAg\nICByZXR1cm4gcGhvbmVzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFkZFBo\nb25lTnVtYmVyKFBob25lUEsgZCwgUGhvbmVOdW1iZXIgcGhvbmVOdW1iZXIp\nIHsKICAgICAgICBwaG9uZXMucHV0KGQsIHBob25lTnVtYmVyKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCByZW1vdmVQaG9uZU51bWJlcihQaG9uZVBLIGQp\nIHsKICAgICAgICBwaG9uZXMucmVtb3ZlKGQpOwogICAgfQoKICAgIHB1Ymxp\nYyBpbnQgZ2V0U2FsYXJ5KCkgewogICAgICAgIHJldHVybiBzYWxhcnk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0U2FsYXJ5KGludCBzYWxhcnkpIHsK\nICAgICAgICB0aGlzLnNhbGFyeSA9IHNhbGFyeTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG8pIHsKICAgICAgICBFbXBsb3ll\nZSBlID0gKEVtcGxveWVlKSBvOwogICAgICAgIE1hcDxQaG9uZVBLLCBQaG9u\nZU51bWJlcj4gbWFwID0gZS5nZXRQaG9uZU51bWJlcnMoKTsKICAgICAgICBp\nZiAobWFwLnNpemUoKSAhPSBwaG9uZXMuc2l6ZSgpKQogICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgQ29sbGVjdGlvbjxNYXAuRW50cnk8UGhv\nbmVQSywgUGhvbmVOdW1iZXI+PiBlbnRyaWVzID0KICAgICAgICAgICAgKENv\nbGxlY3Rpb248TWFwLkVudHJ5PFBob25lUEssIFBob25lTnVtYmVyPj4pIHBo\nb25lcy5lbnRyeVNldCgpOwogICAgICAgIGZvciAoTWFwLkVudHJ5PFBob25l\nUEssIFBob25lTnVtYmVyPiBlbnRyeSA6IGVudHJpZXMpIHsKICAgICAgICAg\nICAgUGhvbmVQSyBrZXkgPSBlbnRyeS5nZXRLZXkoKTsKICAgICAgICAgICAg\nUGhvbmVOdW1iZXIgcCA9IGVudHJ5LmdldFZhbHVlKCk7CiAgICAgICAgICAg\nIFBob25lTnVtYmVyIHAwID0gbWFwLmdldChrZXkpOwogICAgICAgICAgICBp\nZiAoIXAuZ2V0UGhvbmVQSygpLmVxdWFscyhwMC5nZXRQaG9uZVBLKCkpKQog\nICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgIH0gICAgCgogICAgLyoKICAgICAqIFRoZSBm\nb2xsb3dpbmcgY2hhbmdlIGlzIGZvciB0aGUgY29tcGFyaXNvbiBvZiBEYXRl\nIG9iamVjdC4gSW4gTXlTUUwsIAogICAgICogIm1pY3Jvc2Vjb25kcyBjYW5u\nb3QgYmUgc3RvcmVkIGludG8gYSBjb2x1bW4gb2YgYW55IHRlbXBvcmFsIGRh\ndGEgdHlwZS4gCiAgICAgKiBBbnkgbWljcm9zZWNvbmRzIHBhcnQgaXMgZGlz\nY2FyZGVkLiAiIChodHRwOi8vZGV2Lm15c3FsLmNvbS9kb2MvcmVmbWFuLzUu\nMS9lbi9kYXRldGltZS5odG1sKS4gCiAgICAgKiBBcyBhIHJlc3VsdCwgd2hl\nbiB0aGUgdmFsdWUgcmV0cmlldmVkIGZyb20gdGhlIGRhdGFiYXNlIHdpbGwg\nYmUgZGlmZmVyZW50IGZyb20gdGhlIAogICAgICogb3JpZ2luYWwgdmFsdWUg\naW4gdGhlIG1lbW9yeSBmb3IgdGhlIGxvc3Mgb2YgbWljcm9zZWNvbmQuIFRo\nZSBmaXggaXMgdG8gY2FsbCB0b1N0cmluZyAKICAgICAqICh3aGljaCB3aWxs\nIHN0cmlwIHRoZSBtaWNyb3NlY29uZHMwIG9uIHRoZSBEYXRlIG9iamVjdCBh\nbmQgY29tcGFyZSB0aGUgU3RyaW5nIHZhbHVlcy4KICAgICAqLwogICAgCiAg\nICBwdWJsaWMgc3RhdGljIEVtcGxveWVlIGZpbmRFbXBsKE1hcDxFbXBsb3ll\nZVBLLCBFbXBsb3llZT4gbWFwLCBFbXBsb3llZVBLIGtleSkgewogICAgICAg\nIFN0cmluZyBuYW1lID0ga2V5LmdldE5hbWUoKTsKICAgICAgICBTdHJpbmcg\nYkRhdGVTdHIgPSBrZXkuZ2V0QkRheSgpLnRvU3RyaW5nKCk7CiAgICAgICAg\nU2V0PEVtcGxveWVlUEs+IGtleXMgPSBtYXAua2V5U2V0KCk7CiAgICAgICAg\nZm9yIChFbXBsb3llZVBLIHRoaXNLZXkgOiBrZXlzKSB7CiAgICAgICAgICAg\naWYgKG5hbWUuZXF1YWxzKHRoaXNLZXkuZ2V0TmFtZSgpKSAmJiAKICAgICAg\nICAgICAgICAgYkRhdGVTdHIuZXF1YWxzKHRoaXNLZXkuZ2V0QkRheSgpLnRv\nU3RyaW5nKCkpKSB7CiAgICAgICAgICAgICAgIHJldHVybiBtYXAuZ2V0KHRo\naXNLZXkpOwogICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICB9Cn0K\n","encoding":"base64"}

