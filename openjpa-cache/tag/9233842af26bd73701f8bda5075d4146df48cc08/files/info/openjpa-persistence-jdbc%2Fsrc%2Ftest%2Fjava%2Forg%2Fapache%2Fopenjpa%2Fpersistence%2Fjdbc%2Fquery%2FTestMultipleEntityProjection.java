{"sha":"e4b2ee16538466032210e267fe619ee15c2f98e8","node_id":"MDQ6QmxvYjIwNjM2NDplNGIyZWUxNjUzODQ2NjAzMjIxMGUyNjdmZTYxOWVlMTVjMmY5OGU4","size":6312,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e4b2ee16538466032210e267fe619ee15c2f98e8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5x\ndWVyeTsKCmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7CmltcG9ydCBqYXZh\nLnRleHQuRGF0ZUZvcm1hdDsKaW1wb3J0IGphdmEudGV4dC5QYXJzZUV4Y2Vw\ndGlvbjsKaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0OwppbXBv\ncnQgamF2YS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmpkYmMucXVlcnkuZG9tYWluLk1hZ2F6aW5l\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMu\ncXVlcnkuZG9tYWluLlB1Ymxpc2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoq\nCiAqIFRlc3RzIG11bHRpcGxlIGVudGl0aWVzIGluIHByb2plY3Rpb24gYXJl\nIHJldHVybmVkIHdpdGggYm90aCBpbm5lciBhbmQgb3V0ZXIKICogam9pbnMu\nCiAqIAogKiBPcmlnaW5hbGx5IHJlcG9ydGVkIGluIAogKiA8QSBIUkVGPQog\nKiAiaHR0cDovL24yLm5hYmJsZS5jb20vU2VsZWN0aW5nLW11bHRpcGxlLW9i\namVjdHMtLS1idWctLXRjNzMyOTQxLmh0bWwiPgogKiBPcGVuSlBBIG1haWxp\nbmcgbGlzdDwvQT4KICogCiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcgogKiAK\nICovCnB1YmxpYyBjbGFzcyBUZXN0TXVsdGlwbGVFbnRpdHlQcm9qZWN0aW9u\nIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoJcHJpdmF0ZSBzdGF0aWMg\nYm9vbGVhbiBJTk5FUl9KT0lOID0gdHJ1ZTsKCXByaXZhdGUgc3RhdGljIFN0\ncmluZ1tdW10gTUFHQVpJTkVfUFVCTElTSEVSX05BTUVfUEFJUlMgPSB7CgkJ\nbmV3IFN0cmluZ1tdIHsiVGltZXMiLCAgICAgICJQdWJsaXNoZXItMCJ9LAoJ\nCW5ldyBTdHJpbmdbXSB7IlRpbWVzIExpZmUiLCAiUHVibGlzaGVyLTEifSwK\nCQluZXcgU3RyaW5nW10geyJUaW1lcyBLaWQiLCAgbnVsbH0sCgkJbmV3IFN0\ncmluZ1tdIHsiTmV3c3dlZWsiLCAgICJQdWJsaXNoZXItMyJ9LAoJCW5ldyBT\ndHJpbmdbXSB7IlBlb3BsZSIsICAgICBudWxsfSwKCQluZXcgU3RyaW5nW10g\neyJOYXR1cmUiLCAgICAgIlB1Ymxpc2hlci01In0sCgkJbmV3IFN0cmluZ1td\nIHsiTUlUIFJldmlldyIsICJQdWJsaXNoZXItNiJ9LAoJCW5ldyBTdHJpbmdb\nXSB7IldpcmVkIiwgICAgICAiUHVibGlzaGVyLTcifSwKCQkKCX07CgkKCXB1\nYmxpYyB2b2lkIHNldFVwKCkgewoJCXN1cGVyLnNldFVwKENMRUFSX1RBQkxF\nUywgTWFnYXppbmUuY2xhc3MsIFB1Ymxpc2hlci5jbGFzcyk7CgkJY3JlYXRl\nRGF0YSgpOwoJfQoKCS8qKgoJICogQ3JlYXRlIE1hZ2F6aW5lIGFuZCBhc3Nv\nY2lhdGUgUHVibGlzaGVyIHVubGVzcyBpdHMgbmFtZSBpcyBudWxsLgoJICov\nCgl2b2lkIGNyZWF0ZURhdGEoKSB7CgkJRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwoJCWZvciAoaW50IGkgPSAwOyBpIDwgTUFHQVpJTkVfUFVC\nTElTSEVSX05BTUVfUEFJUlMubGVuZ3RoOyBpKyspIHsKCQkJU3RyaW5nIG1h\nZ05hbWUgPSBNQUdBWklORV9QVUJMSVNIRVJfTkFNRV9QQUlSU1tpXVswXTsK\nCQkJU3RyaW5nIHB1Yk5hbWUgPSBNQUdBWklORV9QVUJMSVNIRVJfTkFNRV9Q\nQUlSU1tpXVsxXTsKCQkJTWFnYXppbmUgbWFnID0gbmV3IE1hZ2F6aW5lKCk7\nCgkJCW1hZy5zZXROYW1lKG1hZ05hbWUpOwoJCQlpZiAocHViTmFtZSAhPSBu\ndWxsKSB7CgkJCQlQdWJsaXNoZXIgcHViID0gbmV3IFB1Ymxpc2hlcigpOwoJ\nCQkJcHViLnNldE5hbWUocHViTmFtZSk7CgkJCQltYWcuc2V0UHVibGlzaGVy\nKHB1Yik7CgkJCQl0cnkgewogICAgICAgICAgICAgICAgICAgIERhdGVGb3Jt\nYXQgZGYgPSBuZXcgU2ltcGxlRGF0ZUZvcm1hdCAoInl5eXktTU0tZGQiKTsK\nCQkJCQlEYXRlIGRhdGUgPSBkZi5wYXJzZSgiMjAwMS0wMS0wMSIpOwoJCQkJ\nCW1hZy5zZXREYXRlUHVibGlzaGVkKGRhdGUpOwoJCQkJfSBjYXRjaCAoUGFy\nc2VFeGNlcHRpb24gZSkgewoJCQkJCW1hZy5zZXREYXRlUHVibGlzaGVkKG51\nbGwpOwoJCQkJfQogICAgICAgICAgICAgICAgbWFnLnNldFRzUHVibGlzaGVk\nKG5ldyBUaW1lc3RhbXAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLSAx\nMDAwMDApKTsKCQkJCQoJCQkJZW0ucGVyc2lzdChwdWIpOwoJCQl9CgkJCWVt\nLnBlcnNpc3QobWFnKTsKCQl9CgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0TXVsdGlwbGVFbnRpdGllc0lu\nUHJvamVjdGlvblVzaW5nT3V0ZXJKb2luKCkgewoJCVN0cmluZyBqcHFsID0g\nInNlbGVjdCBtLCBwICIgKwoJCSAgICAgICAgICAgICAgImZyb20gTWFnYXpp\nbmUgbSBsZWZ0IG91dGVyIGpvaW4gbS5wdWJsaXNoZXIgcCAiICsKICAgICAg\nICAgICAgICAgICAgICAgICJ3aGVyZSAoKDp1c2VOYW1lID0gZmFsc2UpIG9y\nIChtLm5hbWUgbGlrZSA6bmFtZSkpIjsKCQlFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCQlRdWVyeSBxdWVyeSA9IGVt\nLmNyZWF0ZVF1ZXJ5KGpwcWwpOwoJCQoJCVN0cmluZyBtYWdLZXkgPSAiVGlt\nZXMiOwoJCXF1ZXJ5LnNldFBhcmFtZXRlcigidXNlTmFtZSIsIHRydWUpOwoJ\nCXF1ZXJ5LnNldFBhcmFtZXRlcigibmFtZSIsICclJyttYWdLZXkrJyUnKTsK\nCQkKCQlMaXN0IHJlc3VsdCA9IHF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKCQkK\nICAgICAgICBpbnQgZXhwZWNldGVkQ291bnQgPSBnZXRFeHBlY2V0ZWRSZXN1\nbHRDb3VudChtYWdLZXksICFJTk5FUl9KT0lOKTsKCQlhc3NlcnRGYWxzZShy\nZXN1bHQuaXNFbXB0eSgpKTsKCQlhc3NlcnRFcXVhbHMoZXhwZWNldGVkQ291\nbnQsIHJlc3VsdC5zaXplKCkpOwoJCWZvciAoT2JqZWN0IG8gOiByZXN1bHQp\nIHsKCQkJYXNzZXJ0VHJ1ZShvIGluc3RhbmNlb2YgT2JqZWN0W10pOwoJCQlP\nYmplY3RbXSByb3cgPSAoT2JqZWN0W10pbzsKCQkJYXNzZXJ0RXF1YWxzKDIs\nIHJvdy5sZW5ndGgpOwoJCQlhc3NlcnRUcnVlKHJvd1swXSBpbnN0YW5jZW9m\nIE1hZ2F6aW5lKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShyb3dbMV0gPT0g\nbnVsbCB8fCByb3dbMV0gaW5zdGFuY2VvZiBQdWJsaXNoZXIpOwoJCQlhc3Nl\ncnROb3ROdWxsKHJvd1swXSk7CgkJCWFzc2VydEVxdWFscygoKE1hZ2F6aW5l\nKXJvd1swXSkuZ2V0UHVibGlzaGVyKCksIHJvd1sxXSk7CgkJfQoJfQoJCglw\ndWJsaWMgdm9pZCB0ZXN0TXVsdGlwbGVFbnRpdGllc0luUHJvamVjdGlvblVz\naW5nSW5uZXJKb2luKCkgewoJCVN0cmluZyBqcHFsID0gInNlbGVjdCBtLCBw\nICIgKwoJCSAgICAgICAgICAgICAgImZyb20gTWFnYXppbmUgbSBpbm5lciBq\nb2luIG0ucHVibGlzaGVyIHAgIiArCiAgICAgICAgICAgICAgICAgICAgICAi\nd2hlcmUgKCg6dXNlTmFtZSA9IGZhbHNlKSBvciAobS5uYW1lIGxpa2UgOm5h\nbWUpKSI7CgkJRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CgkJUXVlcnkgcXVlcnkgPSBlbS5jcmVhdGVRdWVyeShqcHFs\nKTsKCQkKCQlTdHJpbmcgbWFnS2V5ID0gIlRpbWVzIjsKCQlxdWVyeS5zZXRQ\nYXJhbWV0ZXIoInVzZU5hbWUiLCB0cnVlKTsKCQlxdWVyeS5zZXRQYXJhbWV0\nZXIoIm5hbWUiLCAnJScrbWFnS2V5KyclJyk7CgkJCgkJTGlzdCByZXN1bHQg\nPSBxdWVyeS5nZXRSZXN1bHRMaXN0KCk7CgkJCiAgICAgICAgaW50IGV4cGVj\nZXRlZENvdW50ID0gZ2V0RXhwZWNldGVkUmVzdWx0Q291bnQobWFnS2V5LCBJ\nTk5FUl9KT0lOKTsKCQlhc3NlcnRGYWxzZShyZXN1bHQuaXNFbXB0eSgpKTsK\nCQlhc3NlcnRFcXVhbHMoZXhwZWNldGVkQ291bnQsIHJlc3VsdC5zaXplKCkp\nOwoJCWZvciAoT2JqZWN0IG8gOiByZXN1bHQpIHsKCQkJYXNzZXJ0VHJ1ZShv\nIGluc3RhbmNlb2YgT2JqZWN0W10pOwoJCQlPYmplY3RbXSByb3cgPSAoT2Jq\nZWN0W10pbzsKCQkJYXNzZXJ0RXF1YWxzKDIsIHJvdy5sZW5ndGgpOwoJCQlh\nc3NlcnRUcnVlKHJvd1swXSBpbnN0YW5jZW9mIE1hZ2F6aW5lKTsKCQkJYXNz\nZXJ0VHJ1ZShyb3dbMV0gaW5zdGFuY2VvZiBQdWJsaXNoZXIpOwoJCQlhc3Nl\ncnROb3ROdWxsKHJvd1swXSk7CgkJCWFzc2VydE5vdE51bGwocm93WzFdKTsK\nCQkJYXNzZXJ0RXF1YWxzKCgoTWFnYXppbmUpcm93WzBdKS5nZXRQdWJsaXNo\nZXIoKSwgcm93WzFdKTsKCQl9Cgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RBZ2dy\nZWdhdGVFeHByZXNzaW9uSW5IYXZpbmdFeHByZXNzaW9uKCkgewogICAgICAg\nIFN0cmluZyBqcHFsID0gInNlbGVjdCBtLnB1Ymxpc2hlciwgbWF4KG0uZGF0\nZVB1Ymxpc2hlZCkgIiArIAogICAgICAgICAgICAgICAgICAgICAgImZyb20g\nTWFnYXppbmUgbSBncm91cCBieSBtLnB1Ymxpc2hlciAiICsKCQkJCQkgICJo\nYXZpbmcgbWF4KG0uZGF0ZVB1Ymxpc2hlZCkgaXMgbnVsbCI7CgkJCgkJRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJ\nUXVlcnkgcXVlcnkgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKCQlMaXN0IHJl\nc3VsdCA9IHF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnRUcnVlKHJl\nc3VsdC5pc0VtcHR5KCkpOwoJCQogICAgICAgIGpwcWwgPSAic2VsZWN0IG0u\ncHVibGlzaGVyLCBtYXgobS5kYXRlUHVibGlzaGVkKSAiICsgCgkJICAgICAg\nICJmcm9tIE1hZ2F6aW5lIG0gZ3JvdXAgYnkgbS5wdWJsaXNoZXIgIiArIAoJ\nCSAgICAgICAiaGF2aW5nIG1heChtLnRzUHVibGlzaGVkKSA9IENVUlJFTlRf\nVElNRVNUQU1QIjsKCQlxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwoJ\nCXJlc3VsdCA9IHF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnRUcnVl\nKHJlc3VsdC5pc0VtcHR5KCkpOwoJfQoJCgkvKioKICAgICAqIENvdW50IG51\nbWJlciBvZiBleHBlY3RlZCByZXN1bHQgYmFzZWQgb24gaW5uZXIvb3V0ZXIg\nam9pbiBjb25kaXRpb24gYW5kCgkgKiB0aGUgbmFtZSBvZiB0aGUgTWFnYXpp\nbmUuCgkgKi8KCXByaXZhdGUgaW50IGdldEV4cGVjZXRlZFJlc3VsdENvdW50\nKFN0cmluZyBrZXksIGJvb2xlYW4gaW5uZXJKb2luKSB7CgkJaW50IGNvdW50\nID0gMDsKCQlmb3IgKGludCBpID0gMDsgaSA8IE1BR0FaSU5FX1BVQkxJU0hF\nUl9OQU1FX1BBSVJTLmxlbmd0aDsgaSsrKSB7CgkJCVN0cmluZyBtYWdOYW1l\nID0gTUFHQVpJTkVfUFVCTElTSEVSX05BTUVfUEFJUlNbaV1bMF07CgkJCVN0\ncmluZyBwdWJOYW1lID0gTUFHQVpJTkVfUFVCTElTSEVSX05BTUVfUEFJUlNb\naV1bMV07CgkJCWlmIChtYWdOYW1lLmluZGV4T2Yoa2V5KSAhPSAtMSkKICAg\nICAgICAgICAgICAgIGlmICghaW5uZXJKb2luIHx8IChpbm5lckpvaW4gJiYg\ncHViTmFtZSAhPSBudWxsKSkKCQkJCQljb3VudCsrOwoJCX0KCQlyZXR1cm4g\nY291bnQ7Cgl9Cn0K\n","encoding":"base64"}

