{"sha":"5a4184addcdad41008f3f6de3e14df5a59982543","node_id":"MDQ6QmxvYjIwNjM2NDo1YTQxODRhZGRjZGFkNDEwMDhmM2Y2ZGUzZTE0ZGY1YTU5OTgyNTQz","size":35589,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5a4184addcdad41008f3f6de3e14df5a59982543","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5z\ncWxjYWNoZTsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQg\namF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nczsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRp\nbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLlByb3BlcnRpZXM7CgppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLlF1ZXJ5OwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5U\nZXN0Q2FzZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlBy\nZXBhcmVkUXVlcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLlByZXBhcmVkUXVlcnlDYWNoZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuUXVlcnlIaW50czsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuUXVlcnlMYW5ndWFnZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLlF1ZXJ5U3RhdGlzdGljczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuanBxbC5KUFFMUGFyc2VyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5qZGJjLkFic3RyYWN0SkRCQ0xpc3RlbmVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5qZGJjLkpEQkNFdmVu\ndDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuamRiYy5KREJDTGlz\ndGVuZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nU1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5PcGVuSlBBUXVlcnk7CgovKioKICogVGVzdHMgY29ycmVj\ndG5lc3MgYW5kIHBlcmZvcm1hbmNlIG9mIHF1ZXJpZXMgd2l0aCBhbmQgd2l0\naG91dCBQcmVwYXJlZCBRdWVyeSBDYWNoZWluZy4KICogIAogKiBUaGlzIHRl\nc3QgdXNlcyBhIHNpbmdsZSBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBpbml0aWFs\naXplZCB3aXRoIGZpeGVkIHNldCBvZiBlbnRpdHkgY2xhc3NlcyAKICogYW5k\nIGFwcHJvcHJpYXRlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBmb3IgUHJl\ncGFyZWQgUXVlcnkgQ2FjaGUuIAogKiAKICogVGhlIGVudGl0eSBjbGFzc2Vz\nIGFyZSBzcGVjaWZpZWQgaW4gcGVyc2lzdGVuY2UgdW5pdCA8Y29kZT4iUHJl\ncGFyZWRRdWVyeSI8L2NvZGU+IGluIGEgCiAqIDxjb2RlPk1FVEEtSU5GL3Bl\ncnNpc3RlbmNlLnhtbDwvY29kZT4gdGhhdCBtdXN0IGJlIGF2YWlsYWJsZSB0\nbyB0aGUgY2xhc3NwYXRoLgogKiAKICogQ29uZmlndXJlcyB0aGUgRW50aXR5\nTWFuYWdlckZhY3Rvcnkgd2l0aCBwcm9wZXJ0aWVzIHRoYXQgYXJlIHJlbGV2\nYW50IHRvIHRlc3RpbmcgUHJlcGFyZWRRdWVyeSBjYWNoZXMuCiAqIFN3aXRj\naGVzIG9mZiBydW50aW1lIGVuaGFuY2VtZW50IHRvIGF2b2lkIHVuaW50ZW5k\nZWQgY29uc2VxdWVuY2VzLgogKiBQcm92aWRlcyBmYWNpbGl0aWVzIHRvIHJ1\nbiBhIEpQUUwgcXVlcnkgd2l0aCBhbmQgd2l0aG91dCBjYWNoZSBhbmQgY29t\ncHV0ZSB0aGUgcGVyZm9ybWFuY2UgZGVsdGEuIAogKiAKICogVXNlcyBhIGhh\ncmQtY29kZWQgZGF0YSBzZXQgaW5pdGlhbGl6ZWQgb25jZSBmb3IgdGhlIGVu\ndGlyZSBzdWl0ZS4gCiAqIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICog\nCiAqLwpwdWJsaWMgY2xhc3MgVGVzdFByZXBhcmVkUXVlcnlDYWNoZSBleHRl\nbmRzIFRlc3RDYXNlIHsKICAgIAogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5n\nIFJFU09VUkNFID0gIk1FVEEtSU5GL3BlcnNpc3RlbmNlLnhtbCI7IAogICAg\ncHJpdmF0ZSBzdGF0aWMgU3RyaW5nIFVOSVRfTkFNRSA9ICJQcmVwYXJlZFF1\nZXJ5IjsKICAgIAogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBpbnQgU0FN\nUExFX1NJWkUgPSAxMDA7ICAvLyBuby4gb2Ygb2JzZXJ2YXRpb25zIGZvciBw\nZXJmb3JtYW5jZSBzdGF0aXN0aWNzIAogICAgcHVibGljIHN0YXRpYyBmaW5h\nbCBib29sZWFuIFVTRV9DQUNIRSAgPSB0cnVlOyAvLyBtbmVtb25pYyBmb3Ig\ndXNpbmcgY2FjaGUKICAgIHByaXZhdGUgc3RhdGljIE9iamVjdFtdIE5PX1BB\nUkFNUyAgICAgID0gbnVsbDsgLy8gbW5lbW9uaWMgZm9yIG5vIHF1ZXJ5IHBh\ncmFtZXRlcnMKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgYm9vbGVhbiBJU19O\nQU1FRF9RVUVSWSAgPSB0cnVlOyAvLyBtbmVtb25pYyBmb3IgbmFtZWQgcXVl\ncnkKICAgIAogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBGQUlMX0lGX1BF\nUkZfREVHUkFERSA9IGZhbHNlOyAKCiAgICAKICAgIHByaXZhdGUgc3RhdGlj\nIENvbXBhbnkgSUJNOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmdb\nXSBDT01QQU5ZX05BTUVTICAgID0geyJJQk0iLCAiQkVBIiwgImFjbWUub3Jn\nIiB9OwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnRbXSAgICBTVEFSVF9Z\nRUFSUyAgICAgID0gezE5MDAsIDIwMDAsIDIwMTAgfTsKCXB1YmxpYyBzdGF0\naWMgZmluYWwgU3RyaW5nW10gREVQQVJUTUVOVF9OQU1FUyA9IHsiTWFya2V0\naW5nIiwgIlNhbGVzIiwgIkVuZ2luZWVyaW5nIiB9OwogICAgcHVibGljIHN0\nYXRpYyBmaW5hbCBTdHJpbmdbXSBFTVBMT1lFRV9OQU1FUyAgID0geyJUb20i\nLCAiRGljayIsICJIYXJyYXkiIH07CglwdWJsaWMgc3RhdGljIGZpbmFsIFN0\ncmluZ1tdIENJVFlfTkFNRVMgICAgICAgPSB7IlR1bHNhIiwgIkR1cmJhbiIs\nICJIYXJsZW0ifTsKCQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nRVhDTFVERURfUVVFUllfMSA9ICJzZWxlY3QgY291bnQocCkgZnJvbSBDb21w\nYW55IHAiOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgRVhDTFVE\nRURfUVVFUllfMiA9ICJzZWxlY3QgY291bnQocCkgZnJvbSBEZXBhcnRtZW50\nIHAiOwoJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgSU5DTFVERURfUVVF\nUlkgICA9ICJzZWxlY3QgcCBmcm9tIEFkZHJlc3MgcCI7CgkKICAgIHB1Ymxp\nYyBzdGF0aWMgZmluYWwgbG9uZ1tdIEJPT0tfSURTICAgICA9IHsxMDAwLCAy\nMDAwLCAzMDAwfTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nW10g\nQk9PS19OQU1FUyA9IHsiQXJndW1lbnRhdGl2ZSBJbmRpYW4iLCAiVGluIERy\ndW0iLCAiQmxpbmsifTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgbG9uZ1td\nIENEX0lEUyAgICAgICA9IHsxMDAxLCAyMDAxLCAzMDAxfTsKICAgIHB1Ymxp\nYyBzdGF0aWMgZmluYWwgU3RyaW5nW10gQ0RfTEFCRUxTICA9ICB7IkJlYXRs\nZXMiLCAiU2luYXRyYSIsICJEb24ndCBSb2NrIE15IEJvYXQifTsKICAgIAog\nICAgcHJvdGVjdGVkIHN0YXRpYyBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rv\ncnlTUEkgZW1mOwogICAgcHJvdGVjdGVkIHN0YXRpYyBTUUxBdWRpdG9yIGF1\nZGl0b3I7CiAgICBwcml2YXRlIE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIGVt\nOwoJCgkvKioKCSAqIFNldHMgdXAgdGhlIHRlc3Qgc3VpdGUgd2l0aCBhIHN0\nYXRpY2FsbHkgaW5pdGlhbGl6ZWQgRW50aXR5TWFuYWdlckZhY3RvcnkuCgkg\nKiBDcmVhdGVzIGRhdGEgb25jZSBmb3IgYWxsIG90aGVyIHRlc3RzIHRvIHVz\nZS4KCSAqLwoJcHVibGljIHZvaWQgc2V0VXAoKSAgewogICAgICAgIGlmIChl\nbWYgPT0gbnVsbCkgewogICAgICAgICAgICBQcm9wZXJ0aWVzIGNvbmZpZyA9\nIG5ldyBQcm9wZXJ0aWVzKCk7CiAgICAgICAgICAgIGNvbmZpZy5wdXQoIm9w\nZW5qcGEuamRiYy5TeW5jaHJvbml6ZU1hcHBpbmdzIiwgImJ1aWxkU2NoZW1h\nKEZvcmVpZ25LZXlzPXRydWUsU2NoZW1hQWN0aW9uPSdkcm9wLGFkZCcpIik7\nCiAgICAgICAgICAgIGNvbmZpZy5wdXQoIm9wZW5qcGEuamRiYy5KREJDTGlz\ndGVuZXJzIiwgbmV3IEpEQkNMaXN0ZW5lcltdIHsgYXVkaXRvciA9IG5ldyBT\nUUxBdWRpdG9yKCl9KTsKICAgICAgICAgICAgY29uZmlnLnB1dCgib3Blbmpw\nYS5qZGJjLlF1ZXJ5U1FMQ2FjaGUiLCAidHJ1ZSIpOwogICAgICAgICAgICBj\nb25maWcucHV0KCJvcGVuanBhLlJ1bnRpbWVVbmVuaGFuY2VkQ2xhc3NlcyIs\nICJ1bnN1cHBvcnRlZCIpOwogICAgICAgICAgICBjb25maWcucHV0KCJvcGVu\nanBhLkR5bmFtaWNFbmhhbmNlbWVudEFnZW50IiwgImZhbHNlIik7CiAgICAg\nICAgICAgIGVtZiA9IChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkp\nT3BlbkpQQVBlcnNpc3RlbmNlLmNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5\nKAogICAgICAgICAgICAgICAgICAgIFVOSVRfTkFNRSwgUkVTT1VSQ0UsIGNv\nbmZpZyk7CiAgICAgICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICAgICAgY3JlYXRlVGVzdERhdGEoKTsKICAgICAgICB9\nIGVsc2UgewogICAgCQllbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgICAgIGdldFByZXBhcmVkUXVlcnlDYWNoZSgpLmNsZWFyKCk7\nCiAgICAgICAgfQoJfQoJCgkvKioKCSAqIENyZWF0ZSBkYXRhIGZvciB0aGUg\nZW50aXJlIHRlc3Qgc3VpdGUgdG8gdXNlLgoJICovCgl2b2lkIGNyZWF0ZVRl\nc3REYXRhKCkgewoJICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nCSAgICBmb3IgKGludCBpID0gMDsgaSA8IENPTVBBTllfTkFNRVMubGVuZ3Ro\nOyBpKyspIHsKCSAgICAgICAgQ29tcGFueSBjb21wYW55ID0gbmV3IENvbXBh\nbnkoKTsKCSAgICAgICAgaWYgKGkgPT0gMCkgCgkgICAgICAgICAgICBJQk0g\nPSBjb21wYW55OwoJICAgICAgICBjb21wYW55LnNldE5hbWUoQ09NUEFOWV9O\nQU1FU1tpXSk7CgkgICAgICAgIGNvbXBhbnkuc2V0U3RhcnRZZWFyKFNUQVJU\nX1lFQVJTW2ldKTsKCSAgICAgICAgZW0ucGVyc2lzdChjb21wYW55KTsKCSAg\nICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBERVBBUlRNRU5UX05BTUVTLmxl\nbmd0aDsgaisrKSB7CgkgICAgICAgICAgICBEZXBhcnRtZW50IGRlcHQgPSBu\nZXcgRGVwYXJ0bWVudCgpOwoJICAgICAgICAgICAgZGVwdC5zZXROYW1lKERF\nUEFSVE1FTlRfTkFNRVNbal0pOwoJICAgICAgICAgICAgY29tcGFueS5hZGRE\nZXBhcnRtZW50KGRlcHQpOwoJICAgICAgICAgICAgZW0ucGVyc2lzdChkZXB0\nKTsKCSAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgRU1QTE9ZRUVf\nTkFNRVMubGVuZ3RoOyBrKyspIHsKCSAgICAgICAgICAgICAgICBFbXBsb3ll\nZSBlbXAgPSBuZXcgRW1wbG95ZWUoKTsKCSAgICAgICAgICAgICAgICBlbXAu\nc2V0TmFtZShFTVBMT1lFRV9OQU1FU1trXSk7CgkgICAgICAgICAgICAgICAg\nQWRkcmVzcyBhZGRyID0gbmV3IEFkZHJlc3MoKTsKCSAgICAgICAgICAgICAg\nICBhZGRyLnNldENpdHkoQ0lUWV9OQU1FU1trXSk7CiAgICAgICAgICAgICAg\nICAgICAgZW0ucGVyc2lzdChlbXApOwoJICAgICAgICAgICAgICAgIGVtLnBl\ncnNpc3QoYWRkcik7CgkgICAgICAgICAgICAgICAgZW1wLnNldEFkZHJlc3Mo\nYWRkcik7CiAgICAgICAgICAgICAgICAgICAgZGVwdC5hZGRFbXBsb3llZXMo\nZW1wKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KICAgICAg\nICBQZXJzb24gcDEgPSBuZXcgUGVyc29uKCJKb2huIiwgIkRvZSIsIChzaG9y\ndCk0NSwgMTk2NCk7CiAgICAgICAgUGVyc29uIHAyID0gbmV3IFBlcnNvbigi\nSm9obiIsICJEb2UiLCAoc2hvcnQpNDIsIDE5NjcpOwogICAgICAgIFBlcnNv\nbiBwMyA9IG5ldyBQZXJzb24oIkhhcnJ5IiwgIkRvZSIsIChzaG9ydCkxMiwg\nMTk5NSk7CiAgICAgICAgUGVyc29uIHA0ID0gbmV3IFBlcnNvbigiQmFycnki\nLCAiRG9lIiwgKHNob3J0KTIyLCAxOTg1KTsKICAgICAgICBlbS5wZXJzaXN0\nKHAxKTsKICAgICAgICBlbS5wZXJzaXN0KHAyKTsKICAgICAgICBlbS5wZXJz\naXN0KHAzKTsKICAgICAgICBlbS5wZXJzaXN0KHA0KTsKICAgICAgICAKICAg\nICAgICBBdXRob3IgYTEgPSBuZXcgQXV0aG9yKCJBdXRob3IxIiwgIiIsIChz\naG9ydCk0MCwgMTk2MCk7CiAgICAgICAgQXV0aG9yIGEyID0gbmV3IEF1dGhv\ncigiQXV0aG9yMiIsICIiLCAoc2hvcnQpNDEsIDE5NjEpOwogICAgICAgIEF1\ndGhvciBhMyA9IG5ldyBBdXRob3IoIkF1dGhvcjMiLCAiIiwgKHNob3J0KTQy\nLCAxOTYyKTsKICAgICAgICBTaW5nZXIgczEgPSBuZXcgU2luZ2VyKCJTaW5n\nZXIxIiwgIiIsIChzaG9ydCkyMSwgMTk5MSk7CiAgICAgICAgU2luZ2VyIHMy\nID0gbmV3IFNpbmdlcigiU2luZ2VyMiIsICIiLCAoc2hvcnQpMjIsIDE5OTIp\nOwogICAgICAgIAogICAgICAgIGxvbmcgaWQgPSAxMDA7CiAgICAgICAgQm9v\nayAgIGIxID0gbmV3IEJvb2soIkJvb2sxIik7CiAgICAgICAgQm9vayAgIGIy\nID0gbmV3IEJvb2soIkJvb2syIik7CiAgICAgICAgQ0QgICAgIGMxID0gbmV3\nIENEKCJDRDEiKTsKICAgICAgICBDRCAgICAgYzIgPSBuZXcgQ0QoIkNEMiIp\nOwogICAgICAgIAogICAgICAgIGIxLnNldElkKGlkKyspOwogICAgICAgIGIy\nLnNldElkKGlkKyspOwogICAgICAgIGMxLnNldElkKGlkKyspOwogICAgICAg\nIGMyLnNldElkKGlkKyspOwogICAgICAgIGIxLmFkZEF1dGhvcihhMSk7CiAg\nICAgICAgYjEuYWRkQXV0aG9yKGEyKTsKICAgICAgICBiMi5hZGRBdXRob3Io\nYTIpOwogICAgICAgIGIyLmFkZEF1dGhvcihhMyk7CiAgICAgICAgYzEuc2V0\nU2luZ2VyKHMxKTsKICAgICAgICBjMi5zZXRTaW5nZXIoczIpOwogICAgICAg\nIAogICAgICAgIGVtLnBlcnNpc3QoYTEpOyBlbS5wZXJzaXN0KGEyKTsgICBl\nbS5wZXJzaXN0KGEzKTsKICAgICAgICBlbS5wZXJzaXN0KHMxKTsgZW0ucGVy\nc2lzdChzMik7CiAgICAgICAgZW0ucGVyc2lzdChiMSk7IGVtLnBlcnNpc3Qo\nYjIpOwogICAgICAgIGVtLnBlcnNpc3QoYzEpOyBlbS5wZXJzaXN0KGMyKTsK\nCgkgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCX0KCglwdWJs\naWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewoJICAgIGlm\nIChlbS5pc09wZW4oKSkKCSAgICAgICAgZW0uY2xvc2UoKTsKCQlzdXBlci50\nZWFyRG93bigpOwoJfQoJCgoJcHVibGljIHZvaWQgdGVzdFByZXBhcmVkUXVl\ncnlDYWNoZUlzQWN0aXZlQnlEZWZhdWx0KCkgewoJCWFzc2VydE5vdE51bGwo\nZ2V0UHJlcGFyZWRRdWVyeUNhY2hlKCkpOwoJfQoJCglwdWJsaWMgdm9pZCB0\nZXN0UHJlcGFyZWRRdWVyeUNhY2hlSXNQZXJVbml0U2luZ2xldG9uKCkgewoJ\nCVByZXBhcmVkUXVlcnlDYWNoZSBjMSA9IGdldFByZXBhcmVkUXVlcnlDYWNo\nZSgpOwoJCVByZXBhcmVkUXVlcnlDYWNoZSBjMiA9IGdldFByZXBhcmVkUXVl\ncnlDYWNoZSgpOwoJCWFzc2VydFNhbWUoYzEsIGMyKTsKCX0KCQoJcHVibGlj\nIHZvaWQgdGVzdFByZXBhcmVkUXVlcnlJZGVudGlmaWVySXNPcmlnaW5hbEpQ\nUUxRdWVyeSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgcCBm\ncm9tIENvbXBhbnkgcCI7CiAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHExID0g\nZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgcTEuZ2V0UmVzdWx0TGlz\ndCgpOwogICAgICAgIFByZXBhcmVkUXVlcnkgcHEgPSBnZXRQcmVwYXJlZFF1\nZXJ5Q2FjaGUoKS5nZXQoanBxbCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChw\ncSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGpwcWwsIHBxLmdldElkZW50aWZp\nZXIoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGpwcWwsIHBxLmdldE9yaWdp\nbmFsUXVlcnkoKSk7Cgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RPcmlnaW5hbEpQ\nUUxRdWVyeVN0cmluZ0lzU2V0T25QcmVwYXJlZFF1ZXJ5KCkgewogICAgICAg\nIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gQ29tcGFueSBwIjsKICAg\nICAgICBPcGVuSlBBUXVlcnk8Pz4gcTEgPSBlbS5jcmVhdGVRdWVyeShqcHFs\nKTsKICAgICAgICBxMS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgUHJlcGFy\nZWRRdWVyeSBwcSA9IGdldFByZXBhcmVkUXVlcnlDYWNoZSgpLmdldChqcHFs\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBxKTsKICAgICAgICBPcGVuSlBB\nUXVlcnk8Pz4gcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoanBxbCxxMi5nZXRRdWVyeVN0cmluZygpKTsKCX0KCglw\ndWJsaWMgdm9pZCB0ZXN0T3JkZXJCeUVsZW1lbnRzQWJzZW50SW5Qcm9qZWN0\naW9uKCkgewoJICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBjLm5hbWUgZnJv\nbSBDb21wYW55IGMgT1JERVIgQlkgYy5zdGFydFllYXIiOwogICAgICAgIE9w\nZW5KUEFRdWVyeTw/PiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAg\nICAgIExpc3QgbDEgPSBxMS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAg\nICAgICAgUHJlcGFyZWRRdWVyeSBwcSA9IGdldFByZXBhcmVkUXVlcnlDYWNo\nZSgpLmdldChqcHFsKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBxKTsKICAg\nICAgICBPcGVuSlBBUXVlcnk8Pz4gcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFs\nKTsKICAgICAgICBMaXN0IGwyID0gcTIuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgIAogICAgICAgIGFzc2VydEVxdWFscyhsMS5zaXplKCksIGwyLnNpemUo\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGwxLnRvU3RyaW5nKCksIGwyLnRv\nU3RyaW5nKCkpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0RXhjbHVzaW9uUGF0\ndGVybigpIHsKCQlPcGVuSlBBUXVlcnk8Pz4gcTEgPSBlbS5jcmVhdGVRdWVy\neShFWENMVURFRF9RVUVSWV8xKTsKCQlxMS5nZXRSZXN1bHRMaXN0KCk7CgkJ\nYXNzZXJ0Tm90Q2FjaGVkKEVYQ0xVREVEX1FVRVJZXzEpOwoJCQoJCU9wZW5K\nUEFRdWVyeTw/PiBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KEVYQ0xVREVEX1FVRVJZ\nXzIpOwoJCXEyLmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnROb3RDYWNoZWQo\nRVhDTFVERURfUVVFUllfMik7CgkJCgkJT3BlbkpQQVF1ZXJ5PD8+IHEzID0g\nZW0uY3JlYXRlUXVlcnkoSU5DTFVERURfUVVFUlkpOwoJCXEzLmdldFJlc3Vs\ndExpc3QoKTsKCQlhc3NlcnRDYWNoZWQoSU5DTFVERURfUVVFUlkpOwoJfQoJ\nCgl2b2lkIGFzc2VydExhbmd1YWdlKE9wZW5KUEFRdWVyeTw/PiBxLCBTdHJp\nbmcgbGFuZykgewoJCWFzc2VydEVxdWFscyhsYW5nLCBxLmdldExhbmd1YWdl\nKCkpOwoJfQoJCgl2b2lkIGFzc2VydENhY2hlZChTdHJpbmcgaWQpIHsKCQlQ\ncmVwYXJlZFF1ZXJ5IGNhY2hlZCA9IGdldFByZXBhcmVkUXVlcnlDYWNoZSgp\nLmdldChpZCk7CgkJYXNzZXJ0Tm90TnVsbChnZXRQcmVwYXJlZFF1ZXJ5Q2Fj\naGUoKSArICI6ICIgKyBnZXRQcmVwYXJlZFF1ZXJ5Q2FjaGUoKS5nZXRNYXBW\naWV3KCkgKyAKCQkJCSIgZG9lcyBub3QgY29udGFpbiAiICsgaWQsIGNhY2hl\nZCk7Cgl9CgkKCXZvaWQgYXNzZXJ0Tm90Q2FjaGVkKFN0cmluZyBpZCkgewoJ\nICAgIFByZXBhcmVkUXVlcnlDYWNoZSBjYWNoZSA9IGdldFByZXBhcmVkUXVl\ncnlDYWNoZSgpOwoJCWlmIChjYWNoZSAhPSBudWxsKSB7CgkJCWFzc2VydE51\nbGwoY2FjaGUuZ2V0KGlkKSk7CgkJfQoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0\nUHJlcGFyZWRRdWVyeUlzQ2FjaGVkT25FeGVjdXRpb24oKSB7CgkJU3RyaW5n\nIGpwcWwgPSAic2VsZWN0IHAgZnJvbSBDb21wYW55IHAiOwoJCU9wZW5KUEFR\ndWVyeTw/PiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwoJCWFzc2VydE5v\ndENhY2hlZChqcHFsKTsKCQlhc3NlcnRMYW5ndWFnZShxMSwgSlBRTFBhcnNl\nci5MQU5HX0pQUUwpOwoJCQoJCXExLmdldFJlc3VsdExpc3QoKTsKCQlhc3Nl\ncnRDYWNoZWQoanBxbCk7CgkJYXNzZXJ0TGFuZ3VhZ2UocTEsIEpQUUxQYXJz\nZXIuTEFOR19KUFFMKTsKCQkKCQlQcmVwYXJlZFF1ZXJ5IGNhY2hlZCA9IGdl\ndFByZXBhcmVkUXVlcnlDYWNoZSgpLmdldChqcHFsKTsKCQlhc3NlcnRFcXVh\nbHMoanBxbCwgY2FjaGVkLmdldElkZW50aWZpZXIoKSk7CgkJYXNzZXJ0RmFs\nc2UoanBxbC5lcXVhbHNJZ25vcmVDYXNlKGNhY2hlZC5nZXRUYXJnZXRRdWVy\neSgpKSk7Cgl9CgoJcHVibGljIHZvaWQgdGVzdFByZXBhcmVkUXVlcnlJc0Nh\nY2hlZEFjcm9zc0V4ZWN1dGlvbigpIHsKCQlTdHJpbmcganBxbCA9ICJzZWxl\nY3QgcCBmcm9tIENvbXBhbnkgcCI7CgkJT3BlbkpQQVF1ZXJ5PD8+IHExID0g\nZW0uY3JlYXRlUXVlcnkoanBxbCk7CgkJYXNzZXJ0Tm90Q2FjaGVkKGpwcWwp\nOwoJCWFzc2VydExhbmd1YWdlKHExLCBKUFFMUGFyc2VyLkxBTkdfSlBRTCk7\nCgkJCgkJCgkJcTEuZ2V0UmVzdWx0TGlzdCgpOwoJCWFzc2VydENhY2hlZChq\ncHFsKTsKCQlhc3NlcnRMYW5ndWFnZShxMSwgSlBRTFBhcnNlci5MQU5HX0pQ\nUUwpOwoJCQoJCS8vIENyZWF0ZSBhIG5ldyBxdWVyeSB3aXRoIHRoZSBzYW1l\nIEpQUUwKCQkvLyBUaGlzIGlzIG5vdCBvbmx5IGNhY2hlZCwgaXRzIGxhbmd1\nYWdlIGlzIGRpZmZlcmVudCB0b28KCQlPcGVuSlBBUXVlcnk8Pz4gcTIgPSBl\nbS5jcmVhdGVRdWVyeShqcHFsKTsKCQlhc3NlcnRDYWNoZWQoanBxbCk7CgkJ\nYXNzZXJ0TGFuZ3VhZ2UocTIsIFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfUFJFUEFS\nRURfU1FMKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdEludmFsaWRhdGVQcmVw\nYXJlZFF1ZXJ5V2l0aEhpbnQoKSB7CgkJU3RyaW5nIGpwcWwgPSAic2VsZWN0\nIHAgZnJvbSBDb21wYW55IHAiOwoJCU9wZW5KUEFRdWVyeTw/PiBxMSA9IGVt\nLmNyZWF0ZVF1ZXJ5KGpwcWwpOwoJCWFzc2VydE5vdENhY2hlZChqcHFsKTsK\nCQkKCQlxMS5nZXRSZXN1bHRMaXN0KCk7CgkJYXNzZXJ0Q2FjaGVkKGpwcWwp\nOwoJCWFzc2VydExhbmd1YWdlKHExLCBKUFFMUGFyc2VyLkxBTkdfSlBRTCk7\nCgkJCgkJLy8gQ3JlYXRlIGEgbmV3IHF1ZXJ5IHdpdGggdGhlIHNhbWUgSlBR\nTAoJCS8vIFRoaXMgaXMgY2FjaGVkIG9uIGNyZWF0aW9uLCBpdHMgbGFuZ3Vh\nZ2UgaXMgUHJlcGFyZWQgU1FMCgkJT3BlbkpQQVF1ZXJ5PD8+IHEyID0gZW0u\nY3JlYXRlUXVlcnkoanBxbCk7CgkJYXNzZXJ0Q2FjaGVkKGpwcWwpOwoJCWFz\nc2VydExhbmd1YWdlKHEyLCBRdWVyeUxhbmd1YWdlcy5MQU5HX1BSRVBBUkVE\nX1NRTCk7CgkJcTIuZ2V0UmVzdWx0TGlzdCgpOwoJCQoJCS8vIE5vdyBleGVj\ndXRlIHdpdGggaGludHMgdG8gaW52YWxpZGF0ZS4gCgkJcTIuc2V0SGludChR\ndWVyeUhpbnRzLkhJTlRfSU5WQUxJREFURV9QUkVQQVJFRF9RVUVSWSwgdHJ1\nZSk7CgkJLy8gSW1tZWRpYXRlbHkgaXQgc2hvdWxkIGJlIHJlbW92ZWQgZnJv\nbSB0aGUgY2FjaGUKCQlhc3NlcnROb3RDYWNoZWQoanBxbCk7CgkJYXNzZXJ0\nRXF1YWxzKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBxMi5nZXRMYW5ndWFnZSgp\nKTsKCQlxMi5nZXRSZXN1bHRMaXN0KCk7CgkJCgkJLy8gQ3JlYXRlIGEgbmV3\nIHF1ZXJ5IHdpdGggdGhlIHNhbWUgSlBRTAoJCS8vIFRoaXMgaXMgbm90IGNh\nY2hlZCBvbiBjcmVhdGlvbiwgaXRzIGxhbmd1YWdlIGlzIEpQUUwKCQlPcGVu\nSlBBUXVlcnk8Pz4gcTMgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKCQlhc3Nl\ncnROb3RDYWNoZWQoanBxbCk7CgkJYXNzZXJ0TGFuZ3VhZ2UocTMsIEpQUUxQ\nYXJzZXIuTEFOR19KUFFMKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdElnbm9y\nZVByZXBhcmVkUXVlcnlXaXRoSGludCgpIHsKCQlTdHJpbmcganBxbCA9ICJz\nZWxlY3QgcCBmcm9tIENvbXBhbnkgcCI7CgkJT3BlbkpQQVF1ZXJ5PD8+IHEx\nID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CgkJYXNzZXJ0Tm90Q2FjaGVkKGpw\ncWwpOwoJCQoJCXExLmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnRDYWNoZWQo\nanBxbCk7CgkJYXNzZXJ0TGFuZ3VhZ2UocTEsIEpQUUxQYXJzZXIuTEFOR19K\nUFFMKTsKCQkKCQkvLyBDcmVhdGUgYSBuZXcgcXVlcnkgd2l0aCB0aGUgc2Ft\nZSBKUFFMCgkJLy8gVGhpcyBpcyBjYWNoZWQgb24gY3JlYXRpb24sIGl0cyBs\nYW5ndWFnZSBpcyBQUkVQQVJFRCBTUUwKCQlPcGVuSlBBUXVlcnk8Pz4gcTIg\nPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKCQlhc3NlcnRDYWNoZWQoanBxbCk7\nCgkJYXNzZXJ0TGFuZ3VhZ2UocTIsIFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfUFJF\nUEFSRURfU1FMKTsKCQlxMi5nZXRSZXN1bHRMaXN0KCk7CgkJCgkJLy8gTm93\nIGV4ZWN1dGUgd2l0aCBoaW50cyB0byBpZ25vcmUuIAoJCXEyLnNldEhpbnQo\nUXVlcnlIaW50cy5ISU5UX0lHTk9SRV9QUkVQQVJFRF9RVUVSWSwgdHJ1ZSk7\nCgkJLy8gSXQgc2hvdWxkIHJlbWFpbiBpbiB0aGUgY2FjaGUKCQlhc3NlcnRD\nYWNoZWQoanBxbCk7CgkJLy8gQnV0IGl0cyBsYW5ndWFnZSBzaG91bGQgYmUg\nSlBRTCBhbmQgbm90IFBSRVBBUkVEIFNRTAoJCWFzc2VydEVxdWFscyhKUFFM\nUGFyc2VyLkxBTkdfSlBRTCwgcTIuZ2V0TGFuZ3VhZ2UoKSk7CgkJcTIuZ2V0\nUmVzdWx0TGlzdCgpOwoJCQoJCS8vIENyZWF0ZSBhIG5ldyBxdWVyeSB3aXRo\nIHRoZSBzYW1lIEpQUUwKCQkvLyBUaGlzIGlzIGNhY2hlZCBvbiBjcmVhdGlv\nbiwgaXRzIGxhbmd1YWdlIGlzIFBSRVBBUkVEIFNRTAoJCU9wZW5KUEFRdWVy\neTw/PiBxMyA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwoJCWFzc2VydENhY2hl\nZChqcHFsKTsKCQlhc3NlcnRMYW5ndWFnZShxMywgUXVlcnlMYW5ndWFnZXMu\nTEFOR19QUkVQQVJFRF9TUUwpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RRdWVy\neVN0YXRpc3RpY3MoKSB7CiAgICAgICAgUXVlcnlTdGF0aXN0aWNzPFN0cmlu\nZz4gc3RhdHMgPSBnZXRQcmVwYXJlZFF1ZXJ5Q2FjaGUoKS5nZXRTdGF0aXN0\naWNzKCk7CiAgICAgICAgc3RhdHMucmVzZXQoKTsKCiAgICAgICAgU3RyaW5n\nIGpwcWwxID0gInNlbGVjdCBjIGZyb20gQ29tcGFueSBjIjsKICAgICAgICBT\ndHJpbmcganBxbDIgPSAic2VsZWN0IGMgZnJvbSBDb21wYW55IGMgd2hlcmUg\nYy5uYW1lID0gJ1BPYmplY3QnIjsKCQlpbnQgTjEgPSA1OwoJCWludCBOMiA9\nIDg7CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBOMTsgaSsrKSB7CgkgICAgICAg\nIE9wZW5KUEFRdWVyeTw/PiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwxKTsK\nCQkJcTEuZ2V0UmVzdWx0TGlzdCgpOwoJCX0KCQlmb3IgKGludCBpID0gMDsg\naSA8IE4yOyBpKyspIHsKCSAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHEyID0g\nZW0uY3JlYXRlUXVlcnkoanBxbDIpOwoJCQlxMi5nZXRSZXN1bHRMaXN0KCk7\nCgkJfQoJCQoJCWFzc2VydEVxdWFscyhOMSwgICAgICBzdGF0cy5nZXRFeGVj\ndXRpb25Db3VudChqcHFsMSkpOwoJCWFzc2VydEVxdWFscyhOMiwgICAgICBz\ndGF0cy5nZXRFeGVjdXRpb25Db3VudChqcHFsMikpOwoJCWFzc2VydEVxdWFs\ncyhOMStOMiwgICBzdGF0cy5nZXRFeGVjdXRpb25Db3VudCgpKTsKCQlhc3Nl\ncnRFcXVhbHMoTjEtMSwgICAgc3RhdHMuZ2V0SGl0Q291bnQoanBxbDEpKTsK\nCQlhc3NlcnRFcXVhbHMoTjItMSwgICAgc3RhdHMuZ2V0SGl0Q291bnQoanBx\nbDIpKTsKCQlhc3NlcnRFcXVhbHMoTjErTjItMiwgc3RhdHMuZ2V0SGl0Q291\nbnQoKSk7CgkJCgl9CgoJcHVibGljIHZvaWQgdGVzdFJlc2V0UXVlcnlTdGF0\naXN0aWNzKCkgewogICAgICAgIFF1ZXJ5U3RhdGlzdGljczxTdHJpbmc+IHN0\nYXRzID0gZ2V0UHJlcGFyZWRRdWVyeUNhY2hlKCkuZ2V0U3RhdGlzdGljcygp\nOwogICAgICAgIHN0YXRzLnJlc2V0KCk7CiAgICAgICAgCgkJU3RyaW5nIGpw\ncWwxID0gInNlbGVjdCBjIGZyb20gQ29tcGFueSBjIjsKICAgICAgICBTdHJp\nbmcganBxbDIgPSAic2VsZWN0IGMgZnJvbSBDb21wYW55IGMgd2hlcmUgYy5u\nYW1lID0gJ1BPYmplY3QnIjsKCQlpbnQgTjEwID0gNDsKCQlpbnQgTjIwID0g\nNzsKCQlmb3IgKGludCBpID0gMDsgaSA8IE4xMDsgaSsrKSB7CgkgICAgICAg\nIE9wZW5KUEFRdWVyeTw/PiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwxKTsK\nCQkJcTEuZ2V0UmVzdWx0TGlzdCgpOwoJCX0KCQlmb3IgKGludCBpID0gMDsg\naSA8IE4yMDsgaSsrKSB7CgkgICAgICAgIE9wZW5KUEFRdWVyeTw/PiBxMiA9\nIGVtLmNyZWF0ZVF1ZXJ5KGpwcWwyKTsKCQkJcTIuZ2V0UmVzdWx0TGlzdCgp\nOwoJCX0KCQkKCQlhc3NlcnRFcXVhbHMoTjEwLCAgICAgICBzdGF0cy5nZXRF\neGVjdXRpb25Db3VudChqcHFsMSkpOwoJCWFzc2VydEVxdWFscyhOMjAsICAg\nICAgIHN0YXRzLmdldEV4ZWN1dGlvbkNvdW50KGpwcWwyKSk7CgkJYXNzZXJ0\nRXF1YWxzKE4xMCtOMjAsICAgc3RhdHMuZ2V0RXhlY3V0aW9uQ291bnQoKSk7\nCgkJYXNzZXJ0RXF1YWxzKE4xMC0xLCAgICAgc3RhdHMuZ2V0SGl0Q291bnQo\nanBxbDEpKTsKCQlhc3NlcnRFcXVhbHMoTjIwLTEsICAgICBzdGF0cy5nZXRI\naXRDb3VudChqcHFsMikpOwoJCWFzc2VydEVxdWFscyhOMTArTjIwLTIsIHN0\nYXRzLmdldEhpdENvdW50KCkpOwoJCQoJCXN0YXRzLnJlc2V0KCk7CgkJCgkJ\naW50IE4xMSA9IDc7CgkJaW50IE4yMSA9IDQ7CgkJZm9yIChpbnQgaSA9IDA7\nIGkgPCBOMTE7IGkrKykgewogICAgICAgICAgICBPcGVuSlBBUXVlcnk8Pz4g\ncTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsMSk7CgkJCXExLmdldFJlc3VsdExp\nc3QoKTsKCQl9CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBOMjE7IGkrKykgewog\nICAgICAgICAgICBPcGVuSlBBUXVlcnk8Pz4gcTIgPSBlbS5jcmVhdGVRdWVy\neShqcHFsMik7CgkJCXEyLmdldFJlc3VsdExpc3QoKTsKCQl9CgoJCWFzc2Vy\ndEVxdWFscyhOMTEsICAgICBzdGF0cy5nZXRFeGVjdXRpb25Db3VudChqcHFs\nMSkpOwoJCWFzc2VydEVxdWFscyhOMjEsICAgICBzdGF0cy5nZXRFeGVjdXRp\nb25Db3VudChqcHFsMikpOwoJCWFzc2VydEVxdWFscyhOMTErTjIxLCBzdGF0\ncy5nZXRFeGVjdXRpb25Db3VudCgpKTsKCQlhc3NlcnRFcXVhbHMoTjExLCAg\nICAgc3RhdHMuZ2V0SGl0Q291bnQoanBxbDEpKTsKCQlhc3NlcnRFcXVhbHMo\nTjIxLCAgICAgc3RhdHMuZ2V0SGl0Q291bnQoanBxbDIpKTsKCQlhc3NlcnRF\ncXVhbHMoTjExK04yMSwgc3RhdHMuZ2V0SGl0Q291bnQoKSk7CgkJCi8vCQlh\nc3NlcnRFcXVhbHMoTjEwK04xMSwgICAgIHN0YXRzLmdldFRvdGFsRXhlY3V0\naW9uQ291bnQoanBxbDEpKTsKLy8JCWFzc2VydEVxdWFscyhOMjArTjIxLCAg\nICAgc3RhdHMuZ2V0VG90YWxFeGVjdXRpb25Db3VudChqcHFsMikpOwovLwkJ\nYXNzZXJ0RXF1YWxzKE4xMCtOMTErTjIwK04yMSwgc3RhdHMuZ2V0VG90YWxF\neGVjdXRpb25Db3VudCgpKTsKCQlhc3NlcnRFcXVhbHMoTjEwK04xMS0xLCAg\nICAgc3RhdHMuZ2V0VG90YWxIaXRDb3VudChqcHFsMSkpOwoJCWFzc2VydEVx\ndWFscyhOMjArTjIxLTEsICAgICBzdGF0cy5nZXRUb3RhbEhpdENvdW50KGpw\ncWwyKSk7CgkJYXNzZXJ0RXF1YWxzKE4xMCtOMTErTjIwK04yMS0yLCBzdGF0\ncy5nZXRUb3RhbEhpdENvdW50KCkpOwoJCQoJfQoKCXB1YmxpYyB2b2lkIHRl\nc3RRdWVyeVdpdGhOb1BhcmFtZXRlcigpIHsKCQlTdHJpbmcganBxbCA9ICJz\nZWxlY3QgcCBmcm9tIENvbXBhbnkgcCI7CgkJY29tcGFyZShqcHFsLCAhSVNf\nTkFNRURfUVVFUlkpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RRdWVyeVdpdGhM\naXRlcmFsKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZy\nb20gQ29tcGFueSBwIHdoZXJlIHAubmFtZSA9ICIgKyBsaXRlcmFsKENPTVBB\nTllfTkFNRVNbMF0pOwoJCWNvbXBhcmUoanBxbCwgIUlTX05BTUVEX1FVRVJZ\nKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0UXVlcnlXaXRoUGFyYW1ldGVyKCkg\newoJCVN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gQ29tcGFueSBwIHdo\nZXJlIHAubmFtZSA9IDpwYXJhbSI7CgkJT2JqZWN0W10gcGFyYW1zID0geyJw\nYXJhbSIsIENPTVBBTllfTkFNRVNbMF19OwoJCWNvbXBhcmUoanBxbCwgIUlT\nX05BTUVEX1FVRVJZLCAgcGFyYW1zKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0\nUXVlcnlXaXRoSm9pbnNBbmRQYXJhbWV0ZXJzKCkgewogICAgICAgIFN0cmlu\nZyBqcHFsID0gInNlbGVjdCBlIGZyb20gRW1wbG95ZWUgZSAiICsgIndoZXJl\nIGUubmFtZSA9IDplbXAiCgkJCQkJKyAiIGFuZCBlLmRlcGFydG1lbnQubmFt\nZSA9IDpkZXB0IgogICAgICAgICAgICAgICAgICAgICsgIiBhbmQgZS5kZXBh\ncnRtZW50LmNvbXBhbnkubmFtZSBMSUtFICAiCiAgICAgICAgICAgICAgICAg\nICAgKyBsaXRlcmFsKENPTVBBTllfTkFNRVNbMF0pIAoJCQkJCSsgIiBhbmQg\nZS5hZGRyZXNzLmNpdHkgPSA6Y2l0eSI7CgkJT2JqZWN0W10gcGFyYW1zID0g\neyAiZW1wIiwgRU1QTE9ZRUVfTkFNRVNbMF0sIAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgImRlcHQiLCBERVBBUlRNRU5UX05BTUVTWzBdLAoJCQkJ\nCQkJImNpdHkiLCBDSVRZX05BTUVTWzBdfTsKCQljb21wYXJlKGpwcWwsICFJ\nU19OQU1FRF9RVUVSWSwgIHBhcmFtcyk7Cgl9CgoJcHVibGljIHZvaWQgdGVz\ndE5hbWVkUXVlcnlXaXRoTm9QYXJhbWV0ZXIoKSB7CgkJU3RyaW5nIG5hbWVk\nUXVlcnkgPSAiQ29tcGFueS5QcmVwYXJlZFF1ZXJ5V2l0aE5vUGFyYW1ldGVy\nIjsKICAgICAgICBjb21wYXJlKG5hbWVkUXVlcnksIElTX05BTUVEX1FVRVJZ\nKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0TmFtZWRRdWVyeVdpdGhMaXRlcmFs\nKCkgewoJCVN0cmluZyBuYW1lZFF1ZXJ5ID0gIkNvbXBhbnkuUHJlcGFyZWRR\ndWVyeVdpdGhMaXRlcmFsIjsKCQljb21wYXJlKG5hbWVkUXVlcnksIElTX05B\nTUVEX1FVRVJZKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0TmFtZWRRdWVyeVdp\ndGhQb3NpdGlvbmFsUGFyYW1ldGVyKCkgewogICAgICAgIFN0cmluZyBuYW1l\nZFF1ZXJ5ID0gIkNvbXBhbnkuUHJlcGFyZWRRdWVyeVdpdGhQb3NpdGlvbmFs\nUGFyYW1ldGVyIjsKCQlPYmplY3RbXSBwYXJhbXMgPSB7MSwgQ09NUEFOWV9O\nQU1FU1swXSwgMiwgU1RBUlRfWUVBUlNbMF19OwoJCWNvbXBhcmUobmFtZWRR\ndWVyeSwgSVNfTkFNRURfUVVFUlksICBwYXJhbXMpOwoJfQoJCglwdWJsaWMg\ndm9pZCB0ZXN0TmFtZWRRdWVyeVdpdGhOYW1lZFBhcmFtZXRlcigpIHsKCQlT\ndHJpbmcgbmFtZWRRdWVyeSA9ICJDb21wYW55LlByZXBhcmVkUXVlcnlXaXRo\nTmFtZWRQYXJhbWV0ZXIiOwogICAgICAgIE9iamVjdFtdIHBhcmFtcyA9IHsi\nbmFtZSIsIENPTVBBTllfTkFNRVNbMF0sICJzdGFydFllYXIiLAogICAgICAg\nICAgICAgICAgU1RBUlRfWUVBUlNbMF19OwoJCWNvbXBhcmUobmFtZWRRdWVy\neSwgSVNfTkFNRURfUVVFUlksICBwYXJhbXMpOwoJfQoJCglwdWJsaWMgdm9p\nZCB0ZXN0UGVyc2lzdGVuY2VDYXBhYmxlUGFyYW1ldGVyKCkgewogICAgICAg\nIFN0cmluZyBqcHFsID0gInNlbGVjdCBlIGZyb20gRW1wbG95ZWUgZSAiICsK\nICAgICAgICAgICAgICAgICJ3aGVyZSBlLmRlcGFydG1lbnQuY29tcGFueT06\nY29tcGFueSI7CgkgICAgT2JqZWN0W10gcGFyYW1zID0geyJjb21wYW55Iiwg\nSUJNfTsKCSAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSwgIHBh\ncmFtcyk7Cgl9CgkKCS8qKgoJICogUHJvamVjdCByZXN1bHRzIGFyZSByZXR1\ncm5lZCB3aXRoIGRpZmZlcmVudCB0eXBlcyBvZiBST1AuCgkgKi8KCXB1Ymxp\nYyB2b2lkIHRlc3RQcm9qZWN0aW9uUmVzdWx0KCkgewogICAgICAgIFN0cmlu\nZyBqcHFsID0gInNlbGVjdCBlLm5hbWUgZnJvbSBFbXBsb3llZSBlICIgKwog\nICAgICAgICAgICAgICAgIndoZXJlIGUuYWRkcmVzcy5jaXR5PTpjaXR5IjsK\nICAgICAgICBPYmplY3RbXSBwYXJhbXMgPSB7ImNpdHkiLCBDSVRZX05BTUVT\nWzBdfTsKICAgICAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSwg\ncGFyYW1zKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdENvbGxlY3Rpb25WYWx1\nZWRQYXJhbWV0ZXJzKCkgewoJICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBl\nIGZyb20gRW1wbG95ZWUgZSB3aGVyZSBlLm5hbWUgaW4gOm5hbWVzIjsKCSAg\nICBPYmplY3RbXSBwYXJhbXMxID0geyJuYW1lcyIsCgkgICAgICAgICAgICBB\ncnJheXMuYXNMaXN0KG5ldyBTdHJpbmdbXXtFTVBMT1lFRV9OQU1FU1swXSwK\nCSAgICAgICAgICAgIEVNUExPWUVFX05BTUVTWzFdfSl9OwogICAgICAgIE9i\namVjdFtdIHBhcmFtczIgPSB7Im5hbWVzIiwKICAgICAgICAgICAgICAgIEFy\ncmF5cy5hc0xpc3QobmV3IFN0cmluZ1tde0VNUExPWUVFX05BTUVTWzJdfSl9\nOwogICAgICAgIE9iamVjdFtdIHBhcmFtczMgPSB7Im5hbWVzIiwgQXJyYXlz\nLmFzTGlzdChFTVBMT1lFRV9OQU1FUyl9OwogICAgICAgIAogICAgICAgIGlu\ndCBleHBlY3RlZENvdW50ID0gMiAqIENPTVBBTllfTkFNRVMubGVuZ3RoICog\nREVQQVJUTUVOVF9OQU1FUy5sZW5ndGg7CiAgICAgICAgcnVuKGpwcWwsICFJ\nU19OQU1FRF9RVUVSWSwgcGFyYW1zMSwgZXhwZWN0ZWRDb3VudCwgVVNFX0NB\nQ0hFLCAxKTsKICAgICAgICAKICAgICAgICBleHBlY3RlZENvdW50ID0gMSAq\nIENPTVBBTllfTkFNRVMubGVuZ3RoICogREVQQVJUTUVOVF9OQU1FUy5sZW5n\ndGg7CiAgICAgICAgcnVuKGpwcWwsICFJU19OQU1FRF9RVUVSWSwgcGFyYW1z\nMiwgZXhwZWN0ZWRDb3VudCwgVVNFX0NBQ0hFLCAxKTsKICAgICAgICAKICAg\nICAgICBleHBlY3RlZENvdW50ID0gRU1QTE9ZRUVfTkFNRVMubGVuZ3RoICog\nQ09NUEFOWV9OQU1FUy5sZW5ndGggKiBERVBBUlRNRU5UX05BTUVTLmxlbmd0\naDsKICAgICAgICBydW4oanBxbCwgIUlTX05BTUVEX1FVRVJZLCBwYXJhbXMz\nLCBleHBlY3RlZENvdW50LCBVU0VfQ0FDSEUsIDEpOwoJfQoJCiAgICBwdWJs\naWMgdm9pZCB0ZXN0UXVlcnlQcm9qZWN0aW9uTm90Q2FuZGlkYXRlQ2xhc3Mo\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUuZGVwYXJ0bWVu\ndCBmcm9tIEVtcGxveWVlIGUiOwogICAgICAgIGNvbXBhcmUoanBxbCwgIUlT\nX05BTUVEX1FVRVJZKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVz\ndFF1ZXJ5TXVsdGlwbGVQcm9qZWN0aW9uQ2xhc3MoKSB7CiAgICAgICAgU3Ry\naW5nIGpwcWwgPSAic2VsZWN0IGQsIGUgZnJvbSBEZXBhcnRtZW50IGQsIGlu\nIChkLmVtcGxveWVlcykgZSI7CiAgICAgICAgY29tcGFyZShqcHFsLCAhSVNf\nTkFNRURfUVVFUlkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nUXVlcnlXaXRoT3JkZXJCeUNsYXVzZSgpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJzZWxlY3QgZS5uYW1lIGZyb20gRW1wbG95ZWUgZSBvcmRlciBieSBl\nLmlkIjsKICAgICAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyeUNvdW50KCkg\newogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBjb3VudChlKSxkIGZy\nb20gRGVwYXJ0bWVudCBkIGpvaW4gZC5lbXBsb3llZXMgZSBncm91cCBieSBk\nIjsKICAgICAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQcm9qZWN0UmVwZWF0c1Rl\ncm0oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUubmFtZSwg\nZS5uYW1lIGZyb20gRW1wbG95ZWUgZSI7CiAgICAgICAgY29tcGFyZShqcHFs\nLCAhSVNfTkFNRURfUVVFUlkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0UHJvamVjdEVtYmVkZGVkKCkgewogICAgICAgIFN0cmluZyBqcHFs\nID0gInNlbGVjdCBlLmFkZHJlc3MgZnJvbSBFbXBsb3llZSBlIjsKICAgICAg\nICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3ROZWVkc1R5cGVDb252ZXJzaW9uKCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBlLm5hbWUsIGUuaXNNYW5h\nZ2VyIGZyb20gRW1wbG95ZWUgZSI7CiAgICAgICAgY29tcGFyZShqcHFsLCAh\nSVNfTkFNRURfUVVFUlkpOwogICAgfSAgICAKCQoJU3RyaW5nIGxpdGVyYWwo\nU3RyaW5nIHMpIHsKCSAgICByZXR1cm4gIiciK3MrIiciOwoJfQoJCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0UG9zaXRpb25hbCgpIHsKICAgICAgICBTdHJpbmcg\nanBxbCA9ICJzZWxlY3QgcCBmcm9tIFBlcnNvbiBwIHdoZXJlIHAuZmlyc3RO\nYW1lPT8xIiArCiAgICAgICAgICAgICAgICAgICAgICAiIGFuZCBwLmxhc3RO\nYW1lPSdEb2UnIGFuZCBwLmFnZSA+ID8yIjsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAK\nICAgICAgICBPcGVuSlBBUXVlcnk8Pz4gcTEgPSBPcGVuSlBBUGVyc2lzdGVu\nY2UuY2FzdChlbS5jcmVhdGVRdWVyeShqcHFsKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBxMS5nZXRMYW5ndWFnZSgp\nKTsKICAgICAgICAKICAgICAgICBMaXN0PD8+IHJlc3VsdDEgPSBxMS5zZXRQ\nYXJhbWV0ZXIoMSwgIkpvaG4iKQogICAgICAgICAgICAgICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoMiwgKHNob3J0KTQwKQogICAgICAgICAgICAgICAgICAg\nICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDIsIHJlc3VsdDEuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBP\ncGVuSlBBUXVlcnk8Pz4gcTIgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChl\nbS5jcmVhdGVRdWVyeShqcHFsKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFF1\nZXJ5TGFuZ3VhZ2VzLkxBTkdfUFJFUEFSRURfU1FMLCBxMi5nZXRMYW5ndWFn\nZSgpKTsKICAgICAgICBMaXN0PD8+IHJlc3VsdDIgPSBxMi5zZXRQYXJhbWV0\nZXIoMSwgIkhhcnJ5IikKICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRl\ncigyLCAoc2hvcnQpMTApCiAgICAgICAgICAgICAgICAgIC5nZXRSZXN1bHRM\naXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3Vs\ndDIuc2l6ZSgpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE5h\nbWVkKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20g\nUGVyc29uIHAgd2hlcmUgcC5maXJzdE5hbWU9OmZpcnN0IiArCiAgICAgICAg\nICAgICAgICAgICAgICAiIGFuZCBwLmxhc3ROYW1lPSdEb2UnIGFuZCBwLmFn\nZSA+IDphZ2UiOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIAogICAgICAgIE9wZW5KUEFR\ndWVyeTw/PiBxMSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtLmNyZWF0\nZVF1ZXJ5KGpwcWwpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSlBRTFBhcnNl\nci5MQU5HX0pQUUwsIHExLmdldExhbmd1YWdlKCkpOwogICAgICAgIAogICAg\nICAgIExpc3Q8Pz4gcmVzdWx0MSA9IHExLnNldFBhcmFtZXRlcigiZmlyc3Qi\nLCAiSm9obiIpCiAgICAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRl\ncigiYWdlIiwgKHNob3J0KTQwKQogICAgICAgICAgICAgICAgICAgICAgIC5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDIsIHJlc3VsdDEuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBPcGVuSlBB\nUXVlcnk8Pz4gcTIgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChlbS5jcmVh\ndGVRdWVyeShqcHFsKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFF1ZXJ5TGFu\nZ3VhZ2VzLkxBTkdfUFJFUEFSRURfU1FMLCBxMi5nZXRMYW5ndWFnZSgpKTsK\nICAgICAgICBMaXN0PD8+IHJlc3VsdDIgPSBxMi5zZXRQYXJhbWV0ZXIoImZp\ncnN0IiwgIkJhcnJ5IikKICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRl\ncigiYWdlIiwgKHNob3J0KTIwKQogICAgICAgICAgICAgICAgICAuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygxLCBy\nZXN1bHQyLnNpemUoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RXcm9uZ1BhcmFtZXRlclZhbHVlVHlwZVRocm93RXhjZXB0aW9uKCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAg\nd2hlcmUgcC5maXJzdE5hbWU9OmZpcnN0IiAKICAgICAgICAgICAgICAgICAg\nICArICIgYW5kIHAuYWdlID4gOmFnZSI7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIE9w\nZW5KUEFRdWVyeTw/PiBxMSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVt\nLmNyZWF0ZVF1ZXJ5KGpwcWwpKTsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBMaXN0PD8+IHJlc3VsdDEgPSBxMS5zZXRQYXJhbWV0ZXIoImZpcnN0Iiwg\nKHNob3J0KTQwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQ\nYXJhbWV0ZXIoImFnZSIsICJKb2huIikKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBmYWlsKCJF\neHBlY3RlZCB0byBmYWlsIHdpdGggd3JvbmcgcGFyYW1ldGVyIHZhbHVlIik7\nCiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgLy8gZ29vZAogICAgICAgIH0KICAgIH0KICAgIAog\nICAgcHVibGljIHZvaWQgdGVzdE51bGxQYXJhbWV0ZXJWYWx1ZUZvclByaW1p\ndGl2ZVR5cGVUaHJvd3NFeGNlcHRpb24oKSB7CiAgICAgICAgU3RyaW5nIGpw\ncWwgPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLmZpcnN0TmFt\nZT06Zmlyc3QiIAogICAgICAgICAgICAgICAgICAgICsgIiBhbmQgcC5hZ2Ug\nPiA6YWdlIjsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHEx\nID0gT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0uY3JlYXRlUXVlcnkoanBx\nbCkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIExpc3Q8Pz4gcmVzdWx0\nMSA9IHExLnNldFBhcmFtZXRlcigiZmlyc3QiLCAiSm9obiIpCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigiYWdlIiwgbnVs\nbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0UmVzdWx0TGlz\ndCgpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCB0byBmYWlsIHdpdGgg\nbnVsbCBwYXJhbWV0ZXIgdmFsdWUgZm9yIHByaW1pdGl2ZXMiKTsKICAgICAg\nICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nLy8gZ29vZAogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyB2b2lkIHRlc3RR\ndWVyeVdpdGhMYXp5UmVsYXRpb25Jc0NhY2hlZCgpIHsKICAgICAgICAvLyBB\ndXRob3IgaXMgbGF6aWx5IHJlbGF0ZWQgdG8gQm9vawogICAgICAgIFN0cmlu\nZyBqcHFsID0gInNlbGVjdCBwIGZyb20gQXV0aG9yIHAiOwogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIAogICAgICAgIFF1ZXJ5IHExID0gZW0uY3JlYXRlUXVlcnkoanBx\nbCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKE9wZW5KUEFQZXJzaXN0ZW5jZS5j\nYXN0KHExKS5nZXRMYW5ndWFnZSgpLAogICAgICAgICAgICAgICAgSlBRTFBh\ncnNlci5MQU5HX0pQUUwpOwogICAgICAgIExpc3Q8QXV0aG9yPiBhdXRob3Jz\nMSA9IHExLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRGYWxzZShh\ndXRob3JzMS5pc0VtcHR5KCkpOwogICAgICAgIEF1dGhvciBhdXRob3IxID0g\nYXV0aG9yczEuaXRlcmF0b3IoKS5uZXh0KCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsgLy8gbm90aGluZyB3aWxsIGJlIGxvYWRlZCBieSBjaGFuY2UKICAgICAg\nICAKICAgICAgICBhc3NlcnROdWxsKGF1dGhvcjEuZ2V0Qm9va3MoKSk7CiAg\nICAgICAgCiAgICAgICAgLy8gZG8gdGhlIHNhbWUgdGhpbmcgYWdhaW4sIHRo\naXMgdGltZSBxdWVyeSBzaG91bGQgYmUgY2FjaGVkCiAgICAgICAgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIFF1ZXJ5IHEyID0g\nZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKE9w\nZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHEyKS5nZXRMYW5ndWFnZSgpLAogICAg\nICAgICAgICAgICAgUXVlcnlMYW5ndWFnZXMuTEFOR19QUkVQQVJFRF9TUUwp\nOwogICAgICAgIExpc3Q8QXV0aG9yPiBhdXRob3JzMiA9IHEyLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICBhc3NlcnRGYWxzZShhdXRob3JzMi5pc0VtcHR5\nKCkpOwogICAgICAgIEF1dGhvciBhdXRob3IyID0gYXV0aG9yczIuaXRlcmF0\nb3IoKS5uZXh0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAKICAg\nICAgICBhc3NlcnROdWxsKGF1dGhvcjIuZ2V0Qm9va3MoKSk7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyeVdpdGhFYWdlclJlbGF0aW9u\nSXNOb3RDYWNoZWQoKSB7CiAgICAgICAgLy8gQm9vayBpcyBlYWdlcmx5IHJl\nbGF0ZWQgdG8gQXV0aG9yCiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0\nIGIgZnJvbSBCb29rIGIiOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIAogICAgICAgIFF1\nZXJ5IHExID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHExKS5nZXRMYW5ndWFn\nZSgpLAogICAgICAgICAgICAgICAgSlBRTFBhcnNlci5MQU5HX0pQUUwpOwog\nICAgICAgIExpc3Q8Qm9vaz4gYm9va3MgPSBxMS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgYXNzZXJ0RmFsc2UoYm9va3MuaXNFbXB0eSgpKTsKICAgICAg\nICBCb29rIGJvb2sxID0gYm9va3MuaXRlcmF0b3IoKS5uZXh0KCk7CiAgICAg\nICAgZW0uY2xvc2UoKTsgLy8gbm90aGluZyB3aWxsIGJlIGxvYWRlZCBieSBj\naGFuY2UKICAgICAgICAKICAgICAgICBhc3NlcnROb3ROdWxsKGJvb2sxLmdl\ndEF1dGhvcnMoKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UoYm9vazEuZ2V0QXV0\naG9ycygpLmlzRW1wdHkoKSk7CiAgICAgICAgCiAgICAgICAgLy8gZG8gdGhl\nIHNhbWUgdGhpbmcgYWdhaW4sIHRoaXMgdGltZSBxdWVyeSBzaG91bGQgbm90\nIGJlIGNhY2hlZAogICAgICAgIC8vIGJlY2F1c2UgaXQgcmVxdWlyZXMgbXVs\ndGlwbGUgc2VsZWN0cwogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBRdWVyeSBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KGpw\ncWwpOwogICAgICAgIGFzc2VydEVxdWFscyhPcGVuSlBBUGVyc2lzdGVuY2Uu\nY2FzdChxMikuZ2V0TGFuZ3VhZ2UoKSwKICAgICAgICAgICAgICAgIEpQUUxQ\nYXJzZXIuTEFOR19KUFFMKTsKICAgICAgICBMaXN0PEJvb2s+IGJvb2tzMiA9\nIHEyLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRGYWxzZShib29r\nczIuaXNFbXB0eSgpKTsKICAgICAgICBCb29rIGJvb2syID0gYm9va3MyLml0\nZXJhdG9yKCkubmV4dCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChib29rMi5nZXRBdXRob3JzKCkpOwog\nICAgICAgIGFzc2VydEZhbHNlKGJvb2syLmdldEF1dGhvcnMoKS5pc0VtcHR5\nKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyeVdpdGhVc2Vy\nRGVmaW5lZEFuZEludGVybmFsUGFyYW10ZXJzSW5TdWJxdWVyeSgpIHsKICAg\nICAgICBTdHJpbmcganBxbCA9ICJTZWxlY3QgYSBGcm9tIEFkZHJlc3MgYSBX\naGVyZSBOb3QgRXhpc3RzICgiCiAgICAgICAgICAgICsgIiAgICAgU2VsZWN0\nIHMuaWQgRnJvbSBTaW5nZXIgQXMgcyBXaGVyZSAiCiAgICAgICAgICAgICsg\nIiAgICAgICAgcy5hZGRyZXNzID0gYSAgQW5kICIKICAgICAgICAgICAgKyAi\nICAgICAgICBOb3QgKCIKICAgICAgICAgICAgKyAiICAgICAgICAgICAgICAo\ncy5maXJzdE5hbWUgPSA6Zmlyc3ROYW1lKSAiCiAgICAgICAgICAgICsgIiAg\nICAgICAgICAgICAgT3IgIgogICAgICAgICAgICArICIgICAgICAgICAgICAg\nICgiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAgICAgICgiCiAgICAg\nICAgICAgICsgIiAgICAgICAgICAgICAgICAgICAgICBleGlzdHMgKHNlbGVj\ndCBjLmlkIGZyb20gQ0QgYyB3aGVyZSBjLnNpbmdlciA9IHMgYW5kIGMuc3Rh\ndHVzID0gMSkgQW5kICIKICAgICAgICAgICAgKyAiICAgICAgICAgICAgICAg\nICAgICAgIHMubGFzdE5hbWUgPSA6bGFzdE5hbWUiCiAgICAgICAgICAgICsg\nIiAgICAgICAgICAgICAgICAgICkgIgogICAgICAgICAgICArICIgICAgICAg\nICAgICAgICAgICBPciAiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAg\nICAgICgiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAgICAgICAgICBu\nb3QgZXhpc3RzIChTZWxlY3QgYy5pZCBmcm9tIENEIGMgd2hlcmUgYy5zaW5n\nZXIgPSBzIGFuZCBjLnN0YXR1cyA9IDIpIgogICAgICAgICAgICArICIgICAg\nICAgICAgICAgICAgICApIgogICAgICAgICAgICArICIgICAgICAgICAgICAg\nICkiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICkiCiAgICAgICAgICAg\nICsgIiAgICAgKSI7CiAgICAgICAgCiAgICAgICAgUXVlcnkgalEgPSBlbS5j\ncmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBqUS5zZXRQYXJhbWV0ZXIoImxh\nc3ROYW1lIiwgIkxhc3ROYW1lIik7CiAgICAgICAgalEuc2V0UGFyYW1ldGVy\nKCJmaXJzdE5hbWUiLCAiRmlyc3ROYW1lIik7CiAgICAgICAgTGlzdCBqTGlz\ndCA9IGpRLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAKICAgICAgICBRdWVy\neSBqUTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBqUTEuc2V0\nUGFyYW1ldGVyKCJsYXN0TmFtZSIsICJMYXN0TmFtZTEiKTsKICAgICAgICBq\nUTEuc2V0UGFyYW1ldGVyKCJmaXJzdE5hbWUiLCAiRmlyc3ROYW1lMSIpOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIExpc3Qgakxpc3QxID0galExLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICBmYWlsKCJGYWlsIHRvIGV4ZWN1dGUgYWdhaW4gLSBQ\nYXJhbWV0ZXJzIGFyZSBtZXNzZWQgdXA6IiArIGUuZ2V0TWVzc2FnZSgpKTsK\nICAgICAgICB9CiAgICB9CiAgICAKICAgIAogICAgUHJlcGFyZWRRdWVyeUNh\nY2hlIGdldFByZXBhcmVkUXVlcnlDYWNoZSgpIHsKICAgICAgICByZXR1cm4g\nZW1mLmdldENvbmZpZ3VyYXRpb24oKS5nZXRRdWVyeVNRTENhY2hlSW5zdGFu\nY2UoKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDb21wYXJlIHRoZSBy\nZXN1bHQgb2YgZXhlY3V0aW9uIG9mIHRoZSBub24tcGFyYW1ldGVyaXplZCBx\ndWVyeSB3aXRoIGFuZCB3aXRob3V0IFByZXBhcmVkUXVlcnkgY2FjaGUuCiAg\nICAgKiAKICAgICAqIEBwYXJhbSBqcHFsIGEgU3RyaW5nIHJlcHJlc2VudGlu\nZyBlaXRoZXIgYSBKUFFMIG9yIHRoZSBuYW1lIG9mIGEgTmFtZWRRdWVyeQog\nICAgICogQHBhcmFtIGlzTmFtZWRRdWVyeSBmbGFncyBpZiB0aGUgZmlyc3Qg\naW5wdXQgcmVwcmVzZW50cyBhIEpQUUwgc3RyaW5nIG9yIGEgTmFtZWRRdWVy\neSBuYW1lCiAgICAgKi8KICAgIHZvaWQgY29tcGFyZShTdHJpbmcganBxbCwg\nYm9vbGVhbiBpc05hbWVkKSB7CiAgICAgICAgY29tcGFyZShqcHFsLCBpc05h\nbWVkLCAtMSwgTk9fUEFSQU1TKTsKICAgIH0KCiAgICAKICAgIC8qKgogICAg\nICogQ29tcGFyZSB0aGUgcmVzdWx0IG9mIGV4ZWN1dGlvbiBvZiB0aGUgbm9u\nLXBhcmFtZXRlcml6ZWQgcXVlcnkgd2l0aCBhbmQgd2l0aG91dCBQcmVwYXJl\nZFF1ZXJ5IGNhY2hlLgogICAgICogCiAgICAgKiBAcGFyYW0ganBxbCBhIFN0\ncmluZyByZXByZXNlbnRpbmcgZWl0aGVyIGEgSlBRTCBvciB0aGUgbmFtZSBv\nZiBhIE5hbWVkUXVlcnkKICAgICAqIEBwYXJhbSBpc05hbWVkUXVlcnkgZmxh\nZ3MgaWYgdGhlIGZpcnN0IGlucHV0IHJlcHJlc2VudHMgYSBKUFFMIHN0cmlu\nZyBvciBhIE5hbWVkUXVlcnkgbmFtZQogICAgICogQHBhcmFtIGV4cGVjdGVk\nQ291bnQgZXhwZWN0ZWQgbnVtYmVyIG9mIHJlc3VsdHMKICAgICAqLwogICAg\ndm9pZCBjb21wYXJlKFN0cmluZyBqcHFsLCBib29sZWFuIGlzTmFtZWQsIGlu\ndCBleHBlY3RlZENvdW50KSB7CiAgICAgICAgY29tcGFyZShqcHFsLCBpc05h\nbWVkLCBleHBlY3RlZENvdW50LCBOT19QQVJBTVMpOwogICAgfQogICAgCiAg\nICAvKioKICAgICAqIENvbXBhcmUgdGhlIHJlc3VsdCBvZiBleGVjdXRpb24g\nb2YgdGhlIHF1ZXJ5IHdpdGggYW5kIHdpdGhvdXQgUHJlcGFyZWRRdWVyeSBj\nYWNoZS4KICAgICAqIAogICAgICogCiAgICAgKiBAcGFyYW0ganBxbCBhIFN0\ncmluZyByZXByZXNlbnRpbmcgZWl0aGVyIGEgSlBRTCBvciB0aGUgbmFtZSBv\nZiBhIE5hbWVkUXVlcnkKICAgICAqIEBwYXJhbSBpc05hbWVkUXVlcnkgZmxh\nZ3MgaWYgdGhlIGZpcnN0IGlucHV0IHJlcHJlc2VudHMgYSBKUFFMIHN0cmlu\nZyBvciBhIE5hbWVkUXVlcnkgbmFtZQogICAgICogQHBhcmFtIHBhcmFtcyBh\nIGV2ZW4gc2l6ZWQgYXJyYXkgd2hvc2UgZXZlbi1pbmRleGVkIGVsZW1lbnRz\nIGFyZSBrZXlzIGFuZCBvZGQtaW5kZXhlZCBlbGVtZW50cyBhcmUgY29ycmVz\ncG9uZGluZwogICAgICogcGFyYW1ldGVyIHZhbHVlIGZvciB0aGUgcXVlcnku\nIEEgbnVsbCBhcnJheSBkZW5vdGVzIHRoZSBxdWVyeSBpcyBub3QgcGFyYW1l\ndGVyaXplZC4KICAgICAqLwogICAgdm9pZCBjb21wYXJlKFN0cmluZyBqcHFs\nLCBib29sZWFuIGlzTmFtZWQsIE9iamVjdC4uLiBwYXJhbXMpIHsKICAgICAg\nICBjb21wYXJlKGpwcWwsIGlzTmFtZWQsIC0xLCBwYXJhbXMpOwogICAgfQog\nICAgLyoqCiAgICAgKiBDb21wYXJlIHRoZSByZXN1bHQgb2YgZXhlY3V0aW9u\nIG9mIHRoZSBxdWVyeSB3aXRoIGFuZCB3aXRob3V0IFByZXBhcmVkUXVlcnkg\nY2FjaGUuCiAgICAgKiAKICAgICAqIAogICAgICogQHBhcmFtIGpwcWwgYSBT\ndHJpbmcgcmVwcmVzZW50aW5nIGVpdGhlciBhIEpQUUwgb3IgdGhlIG5hbWUg\nb2YgYSBOYW1lZFF1ZXJ5CiAgICAgKiBAcGFyYW0gaXNOYW1lZFF1ZXJ5IGZs\nYWdzIGlmIHRoZSBmaXJzdCBpbnB1dCByZXByZXNlbnRzIGEgSlBRTCBzdHJp\nbmcgb3IgYSBOYW1lZFF1ZXJ5IG5hbWUKICAgICAqIEBwYXJhbSBwYXJhbXMg\nYSBldmVuIHNpemVkIGFycmF5IHdob3NlIGV2ZW4taW5kZXhlZCBlbGVtZW50\ncyBhcmUga2V5cyBhbmQgb2RkLWluZGV4ZWQgZWxlbWVudHMgYXJlIGNvcnJl\nc3BvbmRpbmcKICAgICAqIHBhcmFtZXRlciB2YWx1ZSBmb3IgdGhlIHF1ZXJ5\nLiBBIG51bGwgYXJyYXkgZGVub3RlcyB0aGUgcXVlcnkgaXMgbm90IHBhcmFt\nZXRlcml6ZWQuCiAgICAgKiBAcGFyYW0gZXhwZWN0ZWRDb3VudCBleHBlY3Rl\nZCBudW1iZXIgb2YgcmVzdWx0cy4gU3VwcGx5IGEgbmVnYXRpdmUgbnVtYmVy\nIHRvIGlnbm9yZS4KICAgICAqLwogICAgdm9pZCBjb21wYXJlKFN0cmluZyBx\ndWVyeSwgYm9vbGVhbiBpc05hbWVkLCBpbnQgZXhwZWN0ZWRDb3VudCwgT2Jq\nZWN0Li4uIHBhcmFtcykgewogICAgICAgIHJ1bihxdWVyeSwgaXNOYW1lZCwg\ncGFyYW1zLCBleHBlY3RlZENvdW50LCAhVVNFX0NBQ0hFLCAxKTsgLy8gcnVu\nIHRoZSBxdWVyeSBvbmNlIGZvciB3YXJtaW5nIHVwCiAgICAgICAgCiAgICAg\nICAgLy8gcnVuIE4gdGltZXMgd2l0aG91dCBjYWNoZQogICAgICAgIGF1ZGl0\nb3IuY2xlYXIoKTsKICAgICAgICBsb25nIHdpdGhvdXQgPSBydW4ocXVlcnks\nIGlzTmFtZWQsIHBhcmFtcywgZXhwZWN0ZWRDb3VudCwgIVVTRV9DQUNIRSwg\nU0FNUExFX1NJWkUpOwogICAgICAgIExpc3Q8U3RyaW5nPiBvcmlnaW5hbFNR\nTHMgPSBhdWRpdG9yLmdldFNRTHMoKTsKICAgICAgICAKICAgICAgICAvLyBy\ndW4gTiB0aW1lcyB3aXRoIGNhY2hlCiAgICAgICAgYXVkaXRvci5jbGVhcigp\nOwogICAgICAgIGxvbmcgd2l0aCA9IHJ1bihxdWVyeSwgaXNOYW1lZCwgcGFy\nYW1zLCBleHBlY3RlZENvdW50LCBVU0VfQ0FDSEUsIFNBTVBMRV9TSVpFKTsK\nICAgICAgICBMaXN0PFN0cmluZz4gY2FjaGVkU1FMcyA9IGF1ZGl0b3IuZ2V0\nU1FMcygpOwogICAgICAgIAogICAgICAgIGNvbXBhcmVTUUxzKG9yaWdpbmFs\nU1FMcywgY2FjaGVkU1FMcyk7CiAgICAgICAgbG9uZyBkZWx0YSA9ICh3aXRo\nb3V0ID09IDApID8gMCA6ICh3aXRob3V0IC0gd2l0aCkgKiAxMDAgLyB3aXRo\nb3V0OwogICAgICAgIAogICAgICAgIFN0cmluZyBqcHFsID0gZ2V0SlBRTFN0\ncmluZyhxdWVyeSwgaXNOYW1lZCk7CiAgICAgICAgU3lzdGVtLmVyci5wcmlu\ndGxuKChkZWx0YSA8IDAgPyAiKioqV0FSTiAiIDogIiIpICsgTWF0aC5hYnMo\nZGVsdGEpICsgIiUgIiArIAogICAgICAgICAgICAgICAgKGRlbHRhIDwgMCA/\nICJkZWdyYWR0aW9uIiA6ICJpbXByb3ZlbWVudCIpICsgIiBmb3IgWyIrIGpw\ncWwgKyAiXSIpOwogICAgICAgIGFzc2VydFRydWUoTWF0aC5hYnMoZGVsdGEp\nICsgIiUgZGVncmFkdGlvbiBmb3IgWyIrIGpwcWwgKyAiXSIsICFGQUlMX0lG\nX1BFUkZfREVHUkFERSB8fCBkZWx0YSA+IDApOwogICAgfQogICAgCiAgICB2\nb2lkIGNvbXBhcmVTUUxzKExpc3Q8U3RyaW5nPiBhLCBMaXN0PFN0cmluZz4g\nYikgewogICAgICAgIGFzc2VydEVxdWFscyhhLnNpemUoKSwgYi5zaXplKCkp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYS5zaXplKCk7IGkrKykg\newogICAgICAgICAgICBhc3NlcnRFcXVhbHMoYS5nZXQoaSksIGIuZ2V0KGkp\nKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBx\ndWVyeSBmcm9tIHRoZSBnaXZlbiBzdHJpbmcgYW5kIGV4ZWN1dGUgaXQgZm9y\nIGdpdmVuIG51bWJlciBvZiB0aW1lcy4KICAgICAqIAogICAgICogQHBhcmFt\nIGpwcWwgYSBTdHJpbmcgcmVwcmVzZW50aW5nIGVpdGhlciBhIEpQUUwgb3Ig\ndGhlIG5hbWUgb2YgYSBOYW1lZFF1ZXJ5CiAgICAgKiBAcGFyYW0gaXNOYW1l\nZFF1ZXJ5IGZsYWdzIGlmIHRoZSBmaXJzdCBpbnB1dCByZXByZXNlbnRzIGEg\nSlBRTCBzdHJpbmcgb3IgYSBOYW1lZFF1ZXJ5IG5hbWUKICAgICAqIEBwYXJh\nbSBwYXJhbXMgYSBldmVuIHNpemVkIGFycmF5IHdob3NlIGV2ZW4taW5kZXhl\nZCBlbGVtZW50cyBhcmUga2V5cyBhbmQgb2RkLWluZGV4ZWQgZWxlbWVudHMg\nYXJlIGNvcnJlc3BvbmRpbmcKICAgICAqIHBhcmFtZXRlciB2YWx1ZSBmb3Ig\ndGhlIHF1ZXJ5LiBBIG51bGwgYXJyYXkgZGVub3RlcyB0aGUgcXVlcnkgaXMg\nbm90IHBhcmFtZXRlcml6ZWQuCiAgICAgKiBAcGFyYW0gZXhwZWN0ZWRDb3Vu\ndCBleHBlY3RlZCBudW1iZXIgb2YgcmVzdWx0cy4gU3VwcGx5IGEgbmVnYXRp\ndmUgbnVtYmVyIHRvIGlnbm9yZS4KICAgICAqIEBwYXJhbSB1c2VDYWNoZSBm\nbGFncyBpZiB0aGUgUHJlcGFyZWRRdWVyeSBjYWNoZSBpcyB0byBiZSBhY3Rp\ndmF0ZWQuCiAgICAgKiBAcGFyYW0gTiBudW1iZXIgb2YgdGltZXMgdGhlIHF1\nZXJ5IGlzIHRvIGJlIGV4ZWN1dGVkIHRvIGNhbGN1bGF0ZSByZWFzb25hYmxl\nIHN0YXRpc3RpY3MuCiAgICAgKiAKICAgICAqIEByZXR1cm4gbWVkaWFuIHRp\nbWUgdG8gZXhlY3V0ZSBhIHF1ZXJ5IGFuZCBpdGVyYXRlIHRocm91Z2ggaXRz\nIHJlc3VsdHMgCiAgICAgKi8KICAgIGxvbmcgcnVuKFN0cmluZyBqcHFsLCBi\nb29sZWFuIGlzTmFtZWRRdWVyeSwgT2JqZWN0W10gcGFyYW1zLCBpbnQgZXhw\nZWN0ZWRDb3VudCwgYm9vbGVhbiB1c2VDYWNoZSwgaW50IE4pIHsKICAgICAg\nICBMaXN0PExvbmc+IHN0YXRzID0gbmV3IEFycmF5TGlzdDxMb25nPigpOwog\nICAgICAgIFN0cmluZyBjYWNoZUtleSA9IGdldEpQUUxTdHJpbmcoanBxbCwg\naXNOYW1lZFF1ZXJ5KTsKICAgICAgICBRdWVyeVN0YXRpc3RpY3M8U3RyaW5n\nPiBjYWNoZVN0YXRzID0gZ2V0UHJlcGFyZWRRdWVyeUNhY2hlKCkuZ2V0U3Rh\ndGlzdGljcygpOwogICAgICAgIGdldFByZXBhcmVkUXVlcnlDYWNoZSgpLmNs\nZWFyKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGNhY2hlU3RhdHMuZ2V0\nRXhlY3V0aW9uQ291bnQoY2FjaGVLZXkpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMCwgY2FjaGVTdGF0cy5nZXRIaXRDb3VudChjYWNoZUtleSkpOwogICAg\nICAgIAogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAg\nICAgICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIGVtID0gKE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyU1BJKWVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgICAgIGVtLnNldFF1ZXJ5U1FMQ2FjaGUodXNlQ2FjaGUpOwog\nICAgICAgICAgICBhc3NlcnRFcXVhbHModXNlQ2FjaGUsIGVtLmdldFF1ZXJ5\nU1FMQ2FjaGUoKSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBtZWFz\ndXJlIHRpbWUgCiAgICAgICAgICAgIGxvbmcgc3RhcnQgPSBTeXN0ZW0ubmFu\nb1RpbWUoKTsKICAgICAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHEgPSBpc05h\nbWVkUXVlcnkgPyBlbS5jcmVhdGVOYW1lZFF1ZXJ5KGpwcWwpIDogZW0uY3Jl\nYXRlUXVlcnkoanBxbCk7CiAgICAgICAgICAgIHBhcmFtZXRlcml6ZShxLCBw\nYXJhbXMpOwogICAgICAgICAgICBMaXN0PD8+IGxpc3QgPSBxLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICAgICAgaWYgKGV4cGVjdGVkQ291bnQgPj0gMCkK\nICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhleHBlY3RlZENvdW50LCBs\naXN0LnNpemUoKSk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAg\nIGFzc2VydEZhbHNlKGxpc3QuaXNFbXB0eSgpKTsKICAgICAgICAgICAgaXRl\ncmF0ZShsaXN0KTsKICAgICAgICAgICAgbG9uZyBlbmQgPSBTeXN0ZW0ubmFu\nb1RpbWUoKTsgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGFzc2VydEVx\ndWFscyh1c2VDYWNoZSA/IGkrMSA6IDAsIGNhY2hlU3RhdHMuZ2V0RXhlY3V0\naW9uQ291bnQoY2FjaGVLZXkpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKHVzZUNhY2hlID8gaSA6IDAsICAgY2FjaGVTdGF0cy5nZXRIaXRDb3VudChj\nYWNoZUtleSkpOwogICAgICAgICAgICAKICAgICAgICAgICAgcS5jbG9zZUFs\nbCgpOwogICAgICAgICAgICBzdGF0cy5hZGQoZW5kIC0gc3RhcnQpOwogICAg\nICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0KICAgICAgICBhc3NlcnRF\ncXVhbHMoIkV4ZWN1dGlvbiBDb3VudCBbIiArIGNhY2hlS2V5ICsgIl0iLCB1\nc2VDYWNoZSA/IE4gOiAwLCBjYWNoZVN0YXRzLmdldFRvdGFsRXhlY3V0aW9u\nQ291bnQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJIaXQgQ291bnQgWyIg\nKyBjYWNoZUtleSArICJdIiwgdXNlQ2FjaGUgPyBOLTEgOiAwLCBjYWNoZVN0\nYXRzLmdldFRvdGFsSGl0Q291bnQoKSk7CiAgICAgICAgCiAgICAgICAgQ29s\nbGVjdGlvbnMuc29ydChzdGF0cyk7CiAgICAgICAgcmV0dXJuIHN0YXRzLmdl\ndChOLzIpOwogICAgfSAgIAogICAgCiAgICAKICAgIHZvaWQgcGFyYW1ldGVy\naXplKFF1ZXJ5IHEsIE9iamVjdFtdIHBhcmFtcykgewogICAgICAgIGlmIChw\nYXJhbXMgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGZv\nciAoaW50IGogPSAwOyBwYXJhbXMgIT0gbnVsbCAmJiBqIDwgcGFyYW1zLmxl\nbmd0aCAtIDE7IGogKz0gMikgewogICAgICAgICAgICBPYmplY3Qga2V5ID0g\ncGFyYW1zW2pdOwogICAgICAgICAgICBPYmplY3QgdmFsID0gcGFyYW1zW2og\nKyAxXTsKICAgICAgICAgICAgaWYgKGtleSBpbnN0YW5jZW9mIEludGVnZXIp\nCiAgICAgICAgICAgICAgICBxLnNldFBhcmFtZXRlcigoKE51bWJlcilrZXkp\nLmludFZhbHVlKCksIHZhbCk7IAogICAgICAgICAgICBlbHNlIGlmIChrZXkg\naW5zdGFuY2VvZiBTdHJpbmcpCiAgICAgICAgICAgICAgICBxLnNldFBhcmFt\nZXRlcihrZXkudG9TdHJpbmcoKSwgdmFsKTsgCiAgICAgICAgICAgIGVsc2UK\nICAgICAgICAgICAgICAgIGZhaWwoImtleSAiICsga2V5ICsgIiBpcyBuZWl0\naGVyIE51bWJlciBub3IgU3RyaW5nIik7CiAgICAgICAgfQogICAgfQogICAg\nCiAgICB2b2lkIGl0ZXJhdGUoTGlzdDw/PiBsaXN0KSB7CiAgICAgICAgSXRl\ncmF0b3I8Pz4gaSA9IGxpc3QuaXRlcmF0b3IoKTsKICAgICAgICB3aGlsZSAo\naS5oYXNOZXh0KCkpCiAgICAgICAgICAgIGkubmV4dCgpOwogICAgfQogICAg\nCiAgICAvKioKICAgICAqIEdldHMgdGhlIEpQUUwgU3RyaW5nIG9mIGEgTmFt\nZWRRdWVyeSBvZiB0aGUgZ2l2ZW4gbmFtZS4KICAgICAqLwogICAgU3RyaW5n\nIGdldEpQUUxTdHJpbmcoU3RyaW5nIG5hbWUsIGJvb2xlYW4gaXNOYW1lZFF1\nZXJ5KSB7CiAgICAgICAgaWYgKCFpc05hbWVkUXVlcnkpCiAgICAgICAgICAg\nIHJldHVybiBuYW1lOwogICAgICAgIHJldHVybiBlbWYuZ2V0Q29uZmlndXJh\ndGlvbigpCiAgICAgICAgICAgICAgICAgIC5nZXRNZXRhRGF0YVJlcG9zaXRv\ncnlJbnN0YW5jZSgpCiAgICAgICAgICAgICAgICAgIC5nZXRRdWVyeU1ldGFE\nYXRhKG51bGwsIG5hbWUsIG51bGwsIHRydWUpCiAgICAgICAgICAgICAgICAg\nIC5nZXRRdWVyeVN0cmluZygpOwogICAgfQoKCiAgICAvKioKICAgICAqIEEg\nSkRCQyBMaXN0ZW5lciB0byBhdWRpdCB0YXJnZXQgU1FMIGV4ZWN1dGVkIHBl\nciBKUFFMIHF1ZXJ5LgogICAgICoKICAgICAqLwogICAgcHVibGljIGNsYXNz\nIFNRTEF1ZGl0b3IgZXh0ZW5kcyBBYnN0cmFjdEpEQkNMaXN0ZW5lciB7CiAg\nICAgICAgcHJpdmF0ZSBMaXN0PFN0cmluZz4gc3FscyA9IG5ldyBBcnJheUxp\nc3Q8U3RyaW5nPigpOwogICAgCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\ncHVibGljIHZvaWQgYmVmb3JlRXhlY3V0ZVN0YXRlbWVudChKREJDRXZlbnQg\nZXZlbnQpIHsKICAgICAgICAgICAgaWYgKGV2ZW50LmdldFNRTCgpICE9IG51\nbGwgJiYgc3FscyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgIHNxbHMuYWRk\nKGV2ZW50LmdldFNRTCgpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICAKICAgICAgICB2b2lkIGNsZWFyKCkgewogICAgICAgICAgICBzcWxz\nLmNsZWFyKCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIExpc3Q8U3Ry\naW5nPiBnZXRTUUxzKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IEFycmF5\nTGlzdDxTdHJpbmc+KHNxbHMpOwogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

