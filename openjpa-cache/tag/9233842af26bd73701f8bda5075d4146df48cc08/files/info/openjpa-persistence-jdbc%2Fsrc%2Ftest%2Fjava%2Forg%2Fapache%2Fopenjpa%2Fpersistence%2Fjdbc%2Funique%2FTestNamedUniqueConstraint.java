{"sha":"b6919e6a6691a37d62b25ab345a28d7fce075b1b","node_id":"MDQ6QmxvYjIwNjM2NDpiNjkxOWU2YTY2OTFhMzdkNjJiMjVhYjM0NWEyOGQ3ZmNlMDc1YjFi","size":4876,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b6919e6a6691a37d62b25ab345a28d7fce075b1b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy51\nbmlxdWU7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0\nIGphdmEudXRpbC5TdHJpbmdUb2tlbml6ZXI7CgppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5NeVNRTERpY3Rpb25hcnk7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQ\nQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuU1FM\nU25pZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS50ZXN0LlNRTExpc3RlbmVyVGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVz\ndE5hbWVkVW5pcXVlQ29uc3RyYWludCBleHRlbmRzIFNRTExpc3RlbmVyVGVz\ndENhc2UgewoKICAgIERCRGljdGlvbmFyeSBkaWN0OwogICAgCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKE9iamVjdC4uLiBwcm9wcykg\newogICAgICAgIHN1cGVyLnNldFVwKERST1BfVEFCTEVTLCBOYW1lZFVuaXF1\nZUEuY2xhc3MsIE5hbWVkVW5pcXVlQi5jbGFzcyk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RNYXBwaW5nKCkgewogICAgICAgIAogICAgICAg\nIC8vIElmIHRoZSBkYXRhYmFzZSBkb2VzIG5vdCBzdXBwb3J0IHVuaXF1ZSBj\nb25zdHJhaW50cywgZXhpdAogICAgICAgIGlmICghc3VwcG9ydHNVbmlxdWVD\nb25zdHJhaW50cygpKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgCiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgICAgICAvLyBUaGUgYWJvdmUgc2hvdWxkIHRyaWdn\nZXIgc2NoZW1hIGRlZmluaXRpb24KICAgICAgICAKICAgICAgICBMaXN0PFN0\ncmluZz4gc3FscyA9IHN1cGVyLnNxbDsKICAgICAgICAKICAgICAgICBhc3Nl\ncnRTUUxGcmFnbm1lbnRzKHNxbHMsICJDUkVBVEUgVEFCTEUgTl9VTklRVUVf\nQSIsCiAgICAgICAgICAgIGdldFVuaXF1ZUNvbnN0cmFpbnQoInVjYV9mMV9m\nMiBVTklRVUUgLipcXChmMSwgZjJcXCkiKSwgCiAgICAgICAgICAgIGdldFVu\naXF1ZUNvbnN0cmFpbnQoInVjYV9mM19mNCBVTklRVUUgLipcXChmMywgZjRc\nXCkuKiIpKTsKICAgICAgICBhc3NlcnRTUUxGcmFnbm1lbnRzKHNxbHMsICJD\nUkVBVEUgVEFCTEUgTl9VTklRVUVfQiIsCiAgICAgICAgICAgIGdldFVuaXF1\nZUNvbnN0cmFpbnQoInVjYl9mMV9mMiBVTklRVUUgLipcXChmMSwgZjJcXCku\nKiIpKTsKICAgICAgICBhc3NlcnRTUUxGcmFnbm1lbnRzKHNxbHMsICJDUkVB\nVEUgVEFCTEUgTl9VTklRVUVfU0VDT05EQVJZIiwKICAgICAgICAgICAgZ2V0\nVW5pcXVlQ29uc3RyYWludCgidWNhX3NmMSBVTklRVUUgLipcXChzZjFcXCki\nKSk7CiAgICAgICAgYXNzZXJ0U1FMRnJhZ25tZW50cyhzcWxzLCAiQ1JFQVRF\nIFRBQkxFIE5fVU5JUVVFX0dFTkVSQVRPUiIsCiAgICAgICAgICAgIGdldFVu\naXF1ZUNvbnN0cmFpbnQoInVjYl9nZW4xX2dlbjIgVU5JUVVFIC4qXFwoR0VO\nMSwgR0VOMlxcKSIpKTsKICAgICAgICBhc3NlcnRTUUxGcmFnbm1lbnRzKHNx\nbHMsICJDUkVBVEUgVEFCTEUgTl9VTklRVUVfSk9JTlRBQkxFIiwKICAgICAg\nICAgICAgZ2V0VW5pcXVlQ29uc3RyYWludCgidWNhX2ZrYV9ma2IgVU5JUVVF\nIC4qXFwoRktfQSwgRktfQlxcKSIpKTsKICAgICAgICBhc3NlcnRTUUxGcmFn\nbm1lbnRzKHNxbHMsICJDUkVBVEUgVEFCTEUgTl9VX0NPTExfVEJMIiwKICAg\nICAgICAgICAgZ2V0VW5pcXVlQ29uc3RyYWludCgidWNiX2YzIFVOSVFVRSAu\nKlxcKGYzXFwpLioiKSk7CiAgICB9CiAgICAgICAgCiAgICBwcml2YXRlIGJv\nb2xlYW4gc3VwcG9ydHNVbmlxdWVDb25zdHJhaW50cygpIHsKICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mcyA9IChPcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpZW1mOwogICAgICAgIEpEQkNDb25m\naWd1cmF0aW9uIGpkYmNjZmcgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pZW1mcy5n\nZXRDb25maWd1cmF0aW9uKCk7CiAgICAgICAgZGljdCA9IGpkYmNjZmcuZ2V0\nREJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsKICAgICAgICByZXR1cm4gZGljdC5z\ndXBwb3J0c1VuaXF1ZUNvbnN0cmFpbnRzOwogICAgfQoKICAgIHByaXZhdGUg\nU3RyaW5nIGdldFVuaXF1ZUNvbnN0cmFpbnQoU3RyaW5nIHVuaXF1ZSkgewog\nICAgICAgIGlmIChkaWN0IGluc3RhbmNlb2YgTXlTUUxEaWN0aW9uYXJ5KSB7\nCiAgICAgICAgICAgIC8vQ1JFQVRFIFRBQkxFIE5fVU5JUVVFX0EgKGFpZCBJ\nTlRFR0VSIE5PVCBOVUxMLCBmMSBJTlRFR0VSIE5PVCBOVUxMLCBmMiBJTlRF\nR0VSIE5PVCBOVUxMLCAKICAgICAgICAgICAgLy9mMyBJTlRFR0VSIE5PVCBO\nVUxMLCBmNCBJTlRFR0VSIE5PVCBOVUxMLCBmNSBJTlRFR0VSLCBmNiBJTlRF\nR0VSLCBQUklNQVJZIEtFWSAoYWlkKSwgCiAgICAgICAgICAgIC8vVU5JUVVF\nIFVfTl9VTlFVX19GMSAoZjEpLCAKICAgICAgICAgICAgLy9VTklRVUUgdWNh\nX2YxX2YyIChmMSwgZjIpLCAKICAgICAgICAgICAgLy9VTklRVUUgdWNhX2Yz\nX2Y0IChmMywgZjQpKSBUWVBFID0gaW5ub2RiCiAgICAgICAgICAgIHJldHVy\nbiBnZXRVbmlxdWVDb25zdHJhaW50KGRpY3QsIHVuaXF1ZSk7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiB1bmlxdWU7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyBzdGF0aWMgU3RyaW5nIGdldFVuaXF1ZUNvbnN0cmFpbnQoREJEaWN0aW9u\nYXJ5IGRpY3QsIFN0cmluZyB1bmlxdWUpIHsKICAgICAgICBMaXN0PFN0cmlu\nZz4gdG9rZW5zID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7CiAgICAgICAg\nTGlzdDxTdHJpbmc+IHRva2VuczEgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4o\nKTsKICAgICAgICBTdHJpbmdUb2tlbml6ZXIgc3QgPSBuZXcgU3RyaW5nVG9r\nZW5pemVyKHVuaXF1ZSk7CiAgICAgICAgd2hpbGUgKHN0Lmhhc01vcmVUb2tl\nbnMoKSkgewogICAgICAgICAgICB0b2tlbnMuYWRkKHN0Lm5leHRUb2tlbigp\nKTsKICAgICAgICB9CiAgICAgICAgdG9rZW5zMS5hZGQodG9rZW5zLmdldCgx\nKSk7CiAgICAgICAgdG9rZW5zMS5hZGQodG9rZW5zLmdldCgwKSk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDI7IGkgPCB0b2tlbnMuc2l6ZSgpOyBpKyspIHsK\nICAgICAgICAgICAgdG9rZW5zMS5hZGQodG9rZW5zLmdldChpKSk7CiAgICAg\nICAgfQogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVm\nZmVyKCk7CiAgICAgICAgZm9yIChTdHJpbmcgdG9rZW4gOiB0b2tlbnMxKSB7\nCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQodG9rZW4pLmFwcGVuZCgiICIpOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCkudHJpbSgp\nOwogICAgfQogICAgCiAgICB2b2lkIGFzc2VydFNRTEZyYWdubWVudHMoTGlz\ndDxTdHJpbmc+IGxpc3QsIFN0cmluZy4uLiBrZXlzKSB7CiAgICAgICAgaWYg\nKFNRTFNuaWZmZXIubWF0Y2hlcyhsaXN0LCBrZXlzKSkKICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgIGZhaWwoIk5vbmUgb2YgdGhlIGZvbGxvd2luZyAi\nICsgc3FsLnNpemUoKSArICIgU1FMIFxyXG4iICsgCiAgICAgICAgICAgICAg\nICB0b1N0cmluZyhzcWwpICsgIlxyXG4gY29udGFpbnMgYWxsIGtleXMgXHJc\nbiIKICAgICAgICAgICAgICAgICsgdG9TdHJpbmcoQXJyYXlzLmFzTGlzdChr\nZXlzKSkpOwogICAgfQp9Cg==\n","encoding":"base64"}

