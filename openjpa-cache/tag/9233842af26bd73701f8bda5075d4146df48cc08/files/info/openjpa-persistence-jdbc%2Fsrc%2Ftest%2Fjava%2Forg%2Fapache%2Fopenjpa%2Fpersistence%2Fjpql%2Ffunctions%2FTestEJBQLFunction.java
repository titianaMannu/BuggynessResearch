{"sha":"c4c82721a494869b2a90dd85a21f14948aec48b4","node_id":"MDQ6QmxvYjIwNjM2NDpjNGM4MjcyMWE0OTQ4NjliMmE5MGRkODVhMjFmMTQ5NDhhZWM0OGI0","size":13307,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c4c82721a494869b2a90dd85a21f14948aec48b4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5m\ndW5jdGlvbnM7CgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLk9yYWNsZURpY3Rp\nb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nY29tbW9uLmFwcHMuQWRkcmVzczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5jb21tb24uYXBwcy5Db21wVXNlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24uYXBwcy5GZW1h\nbGVVc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmNvbW1vbi5hcHBzLk1hbGVVc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0cmFjdFRlc3RDYXNl\nOwoKcHVibGljIGNsYXNzIFRlc3RFSkJRTEZ1bmN0aW9uIGV4dGVuZHMgQWJz\ndHJhY3RUZXN0Q2FzZSB7CgogICAgcHJpdmF0ZSBpbnQgdXNlcmlkMSwgdXNl\ncmlkMiwgdXNlcmlkMywgdXNlcmlkNCwgdXNlcmlkNSwgdXNlcmlkNjsKCiAg\nICBwdWJsaWMgVGVzdEVKQlFMRnVuY3Rpb24oU3RyaW5nIG5hbWUpIHsKICAg\nICAgICBzdXBlcihuYW1lLCAianBxbGNsYXVzZXNjYWN0dXNhcHAiKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBkZWxldGVB\nbGwoQ29tcFVzZXIuY2xhc3MpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgoZW0p\nOwoKICAgICAgICBBZGRyZXNzW10gYWRkID0gbmV3IEFkZHJlc3NbXXsKICAg\nICAgICAgICAgbmV3IEFkZHJlc3MoIjQzIFNhbnNvbWUiLCAiU0YiLCAiVW5p\ndGVkLUtpbmdkb20iLCAiOTQxMDQiKSwKICAgICAgICAgICAgbmV3IEFkZHJl\nc3MoIjI0IE1pbmsiLCAiQU5USU9DSCIsICJVU0EiLCAiOTQ1MTMiKSwKICAg\nICAgICAgICAgbmV3IEFkZHJlc3MoIjIzIE9nYmV0ZSIsICJDb2FsQ2FtcCIs\nICJOSUdFUklBIiwgIjAwMDAwIiksCiAgICAgICAgICAgIG5ldyBBZGRyZXNz\nKCIxMCBXaWxzaGlyZSIsICJXb3JjZXN0ZXIiLCAiQ0FOQURBIiwgIjgwMDgw\nIiksCiAgICAgICAgICAgIG5ldyBBZGRyZXNzKCIyMyBCZWxsZmxvd2VyIiwg\nIk9ndWkiLCBudWxsLCAiMDIwMDAiKSwKICAgICAgICAgICAgbmV3IEFkZHJl\nc3MoIjIyIE1vbnRnb21lcnkiLCAiU0YiLCBudWxsLCAiNTAwNTQiKSB9OwoK\nICAgICAgICBDb21wVXNlciB1c2VyMSA9IGNyZWF0ZVVzZXIoIlNlZXRoYSIs\nICJNQUMiLCBhZGRbMF0sIDM2LCB0cnVlKTsKICAgICAgICBDb21wVXNlciB1\nc2VyMiA9IGNyZWF0ZVVzZXIoIlNoYW5ub24gIiwgIlBDIiwgYWRkWzFdLCAz\nNiwgZmFsc2UpOwogICAgICAgIENvbXBVc2VyIHVzZXIzID0gY3JlYXRlVXNl\ncigiVWdvIiwgIlBDIiwgYWRkWzJdLCAxOSwgdHJ1ZSk7CiAgICAgICAgQ29t\ncFVzZXIgdXNlcjQgPSBjcmVhdGVVc2VyKCJfSmFjb2IiLCAiTElOVVgiLCBh\nZGRbM10sIDEwLCB0cnVlKTsKICAgICAgICBDb21wVXNlciB1c2VyNSA9IGNy\nZWF0ZVVzZXIoIkZhbXp5IiwgIlVOSVgiLCBhZGRbNF0sIDI5LCBmYWxzZSk7\nCiAgICAgICAgQ29tcFVzZXIgdXNlcjYgPSBjcmVhdGVVc2VyKCJTaGFkZSIs\nICJVTklYIiwgYWRkWzVdLCAyMywgZmFsc2UpOwoKICAgICAgICBlbS5wZXJz\naXN0KHVzZXIxKTsKICAgICAgICB1c2VyaWQxID0gdXNlcjEuZ2V0VXNlcmlk\nKCk7CiAgICAgICAgZW0ucGVyc2lzdCh1c2VyMik7CiAgICAgICAgdXNlcmlk\nMiA9IHVzZXIyLmdldFVzZXJpZCgpOwogICAgICAgIGVtLnBlcnNpc3QodXNl\ncjMpOwogICAgICAgIHVzZXJpZDMgPSB1c2VyMy5nZXRVc2VyaWQoKTsKICAg\nICAgICBlbS5wZXJzaXN0KHVzZXI0KTsKICAgICAgICB1c2VyaWQ0ID0gdXNl\ncjQuZ2V0VXNlcmlkKCk7CiAgICAgICAgZW0ucGVyc2lzdCh1c2VyNSk7CiAg\nICAgICAgdXNlcmlkNSA9IHVzZXI1LmdldFVzZXJpZCgpOwogICAgICAgIGVt\nLnBlcnNpc3QodXNlcjYpOwogICAgICAgIHVzZXJpZDYgPSB1c2VyNi5nZXRV\nc2VyaWQoKTsKCiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVt\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29uY2F0U3ViU3RyaW5n\nRnVuYygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAg\nQ29tcFVzZXIgdXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJp\nZDEpOwogICAgICAgIGFzc2VydE5vdE51bGwoInVzZXIgaXMgbnVsbCIsIHVz\nZXIpOwogICAgICAgIGFzc2VydEVxdWFscygidGhlIG5hbWUgaXMgbm90IHNl\nZXRoYSIsICJTZWV0aGEiLCB1c2VyLmdldE5hbWUoKSk7CgogICAgICAgIFN0\ncmluZyBxdWVyeSA9ICJVUERBVEUgQ29tcFVzZXIgZSBTRVQgZS5uYW1lID0g\nIiArCiAgICAgICAgICAgICJDT05DQVQoJ0FibGFodW0nLCBTVUJTVFJJTkco\nZS5uYW1lLCBMT0NBVEUoJ2UnLCBlLm5hbWUpLCA0KSkgIiArCiAgICAgICAg\nICAgICJXSEVSRSBlLm5hbWU9J1NlZXRoYSciOwogICAgICAgIGludCByZXN1\nbHQgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSkuZXhlY3V0ZVVwZGF0ZSgpOwoK\nICAgICAgICBhc3NlcnRFcXVhbHMoInRoZSByZXN1bHQgaXMgbm90IDEiLCAx\nLCByZXN1bHQpOwoKICAgICAgICB1c2VyID0gZW0uZmluZChDb21wVXNlci5j\nbGFzcywgdXNlcmlkMSk7CiAgICAgICAgZW0ucmVmcmVzaCh1c2VyKTsKCiAg\nICAgICAgYXNzZXJ0Tm90TnVsbCgidGhlIHVzZXIgaXMgbnVsbCIsIHVzZXIp\nOwogICAgICAgIGFzc2VydEVxdWFscygidGhlIHVzZXJzIG5hbWUgaXMgbm90\nIEFibGFodW1TZWV0IiwgIkFibGFodW1lZXRoIiwKICAgICAgICAgICAgdXNl\nci5nZXROYW1lKCkpOwoKICAgICAgICBxdWVyeSA9ICJVUERBVEUgQ29tcFVz\nZXIgZSBTRVQgZS5uYW1lID0gIiArCiAgICAgICAgICAgICJDT05DQVQoJ1hZ\nWicsIFNVQlNUUklORyhlLm5hbWUsIExPQ0FURSgnZScsIGUubmFtZSkpKSAi\nICsKICAgICAgICAgICAgIldIRVJFIGUubmFtZT0nQWJsYWh1bWVldGgnIjsK\nICAgICAgICByZXN1bHQgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSkuZXhlY3V0\nZVVwZGF0ZSgpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoInRoZSByZXN1bHQg\naXMgbm90IDEiLCAxLCByZXN1bHQpOwoKICAgICAgICB1c2VyID0gZW0uZmlu\nZChDb21wVXNlci5jbGFzcywgdXNlcmlkMSk7CiAgICAgICAgZW0ucmVmcmVz\naCh1c2VyKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbCgidGhlIHVzZXIgaXMg\nbnVsbCIsIHVzZXIpOwogICAgICAgIGFzc2VydEVxdWFscygidGhlIHVzZXJz\nIG5hbWUgaXMgbm90IEFibGFodW1lZXRoIiwgIlhZWmVldGgiLAogICAgICAg\nICAgICB1c2VyLmdldE5hbWUoKSk7CiAgICAgICAgZW5kVHgoZW0pOwogICAg\nICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29u\nY2F0RnVuYzIoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1cnJl\nbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7CgogICAg\nICAgIENvbXBVc2VyIHVzZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNzLCB1\nc2VyaWQxKTsKICAgICAgICBhc3NlcnROb3ROdWxsKCJ0aGUgdXNlciBpcyBu\ndWxsIiwgdXNlcik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgdXNlcnMg\nbmFtZSBpcyBub3Qgc2VldGhhIiwgdXNlci5nZXROYW1lKCksICJTZWV0aGEi\nKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlVQREFURSBDb21wVXNlciBl\nICIgKwogICAgICAgICAgICAiU0VUIGUubmFtZSA9ICIgKwogICAgICAgICAg\nICAiQ09OQ0FUKCcnLCAnJykgV0hFUkUgZS5uYW1lPSdTZWV0aGEnIjsKICAg\nICAgICBpbnQgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmV4ZWN1\ndGVVcGRhdGUoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3VsdCk7\nCgogICAgICAgIHVzZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNzLCB1c2Vy\naWQxKTsKICAgICAgICBlbS5yZWZyZXNoKHVzZXIpOwogICAgICAgIGFzc2Vy\ndE5vdE51bGwodXNlcik7CiAgICAgICAgLy8gRW1wdHkgc3RyaW5ncyBhcmUg\nc3RvcmVkIGFzIG51bGwgb24gT3JhY2xlIHNvIHRoZSBhc3NlcnRpb24gYmVs\nb3cKICAgICAgICAvLyBtdXN0IGJlIGhhbmRsZWQgZGlmZmVyZW50bHkgb24g\ndGhhdCBEQi4gIFRoZSBkb2NzIGluZGljYXRlIHRoYXQKICAgICAgICAvLyB0\naGlzIG1heSBub3QgYmUgdGhlIGNhc2UgaW4gZnV0dXJlIHJlbGVhc2VzIHNv\nIGVpdGhlciByZXN1bHQgaXMKICAgICAgICAvLyBhbGxvd2VkLgogICAgICAg\nIC8vIFRoZSBub3RlIGluIHRoaXMgc2VjdGlvbiBvZiBPcmFjbGUgZG9jIGV4\ncGxhaW5zIHRoZSBiZWhhdmlvcjoKICAgICAgICAvLyBodHRwOi8vZG93bmxv\nYWQub3JhY2xlLmNvbS9kb2NzL2NkL0IxNDExN18wMS9zZXJ2ZXIuMTAxLyAr\nCiAgICAgICAgLy8gYjEwNzU5L3NxbF9lbGVtZW50czAwNS5odG0jc3RocmVm\nNTExCiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSAoKEpEQkNDb25maWd1\ncmF0aW9uKSBnZXRFbWYoKS5nZXRDb25maWd1cmF0aW9uKCkpCiAgICAgICAg\nICAgIC5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpOwogICAgICAgIGlmIChk\naWN0IGluc3RhbmNlb2YgT3JhY2xlRGljdGlvbmFyeSkgewogICAgICAgICAg\nICBhc3NlcnRUcnVlKHVzZXIuZ2V0TmFtZSgpID09IG51bGwgfHwKICAgICAg\nICAgICAgICAgICIiLmVxdWFscyh1c2VyLmdldE5hbWUoKSkpOwogICAgICAg\nIH0gZWxzZSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygiIiwgdXNlci5n\nZXROYW1lKCkpOyAgICAgICAgICAgIAogICAgICAgIH0KCiAgICAgICAgZW5k\nVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0VHJpbUZ1bmMzKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgo\nZW0pOwoKICAgICAgICBDb21wVXNlciB1c2VyID0gZW0uZmluZChDb21wVXNl\nci5jbGFzcywgdXNlcmlkMik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbCh1c2Vy\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlNoYW5ub24gIiwgdXNlci5nZXRO\nYW1lKCkpOwoKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiVVBEQVRFIENvbXBV\nc2VyIGUgU0VUICIgKwogICAgICAgICAgICAiZS5uYW1lID0gVHJpbShlLm5h\nbWUpIFdIRVJFICIgKwogICAgICAgICAgICAiZS5uYW1lPSdTaGFubm9uICci\nOwogICAgICAgIGludCByZXN1bHQgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSku\nZXhlY3V0ZVVwZGF0ZSgpOwoKICAgICAgICB1c2VyID0gZW0uZmluZChDb21w\nVXNlci5jbGFzcywgdXNlcmlkMik7CiAgICAgICAgZW0ucmVmcmVzaCh1c2Vy\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiU2hhbm5vbiIsIHVzZXIuZ2V0TmFtZSgpKTsKCiAgICAgICAg\nZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0ZXN0TG93ZXJGdW5jKCkgewogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0\nVHgoZW0pOwoKICAgICAgICBDb21wVXNlciB1c2VyID0gZW0uZmluZChDb21w\nVXNlci5jbGFzcywgdXNlcmlkMyk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbCh1\nc2VyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlVnbyIsIHVzZXIuZ2V0TmFt\nZSgpKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlVQREFURSBDb21wVXNl\nciBlIFNFVCAiICsKICAgICAgICAgICAgImUubmFtZSA9IExPV0VSKGUubmFt\nZSkgV0hFUkUgZS5uYW1lPSdVZ28nIjsKCiAgICAgICAgaW50IHJlc3VsdCA9\nIGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5leGVjdXRlVXBkYXRlKCk7CgogICAg\nICAgIHVzZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNzLCB1c2VyaWQzKTsK\nICAgICAgICBlbS5yZWZyZXNoKHVzZXIpOwogICAgICAgIGFzc2VydE5vdE51\nbGwodXNlcik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ1Z28iLCB1c2VyLmdl\ndE5hbWUoKSk7CgogICAgICAgIGVuZFR4KGVtKTsKICAgICAgICBlbmRFbShl\nbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFVwcGVyRnVuYygpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAgQ29tcFVzZXIg\ndXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDMpOwogICAg\nICAgIGFzc2VydE5vdE51bGwodXNlcik7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJVZ28iLCB1c2VyLmdldE5hbWUoKSk7CgogICAgICAgIFN0cmluZyBxdWVy\neSA9ICJVUERBVEUgQ29tcFVzZXIgZSBTRVQgIiArCiAgICAgICAgICAgICJl\nLm5hbWUgPSBVUFBFUihlLm5hbWUpIFdIRVJFIGUubmFtZT0nVWdvJyI7Cgog\nICAgICAgIGludCByZXN1bHQgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSkuZXhl\nY3V0ZVVwZGF0ZSgpOwoKICAgICAgICB1c2VyID0gZW0uZmluZChDb21wVXNl\nci5jbGFzcywgdXNlcmlkMyk7CiAgICAgICAgZW0ucmVmcmVzaCh1c2VyKTsK\nICAgICAgICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAgICAgIGFzc2VydEVx\ndWFscygiVUdPIiwgdXNlci5nZXROYW1lKCkpOwoKICAgICAgICBlbmRUeChl\nbSk7CiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RMZW5ndGhGdW5jKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwoKICAgICAgICBTdHJpbmcgcXVl\ncnkgPSAiU0VMRUNUIG8ubmFtZSAiICsKICAgICAgICAgICAgIkZST00gQ29t\ncFVzZXIgbyAiICsKICAgICAgICAgICAgIldIRVJFIExFTkdUSChvLmFkZHJl\nc3MuY291bnRyeSkgPSAzIjsKCiAgICAgICAgTGlzdCByZXN1bHQgPSBlbS5j\ncmVhdGVRdWVyeShxdWVyeSkuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBh\nc3NlcnROb3ROdWxsKHJlc3VsdCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEs\nIHJlc3VsdC5zaXplKCkpOwogICAgICAgIGFzc2VydFRydWUocmVzdWx0LmNv\nbnRhaW5zKCJTaGFubm9uICIpKTsKCiAgICAgICAgZW5kRW0oZW0pOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RBcml0aG1GdW5jKCkgewogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwog\nICAgICAgIHN0YXJ0VHgoZW0pOwoKICAgICAgICBDb21wVXNlciB1c2VyID0g\nZW0uZmluZChDb21wVXNlci5jbGFzcywgdXNlcmlkMSk7CgogICAgICAgIGFz\nc2VydE5vdE51bGwodXNlcik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJTZWV0\naGEiLCB1c2VyLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDM2\nLCB1c2VyLmdldEFnZSgpKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0KICAg\nICAgICAgICAgIlVQREFURSBDb21wVXNlciBlIFNFVCBlLmFnZSA9IEFCUyhl\nLmFnZSkgV0hFUkUgZS5uYW1lPSdTZWV0aGEnIjsKICAgICAgICBpbnQgbnVt\nID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmV4ZWN1dGVVcGRhdGUoKTsKCiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChudW0pOwogICAgICAgIGFzc2VydEVxdWFs\ncygxLCBudW0pOwoKICAgICAgICB1c2VyID0gZW0uZmluZChDb21wVXNlci5j\nbGFzcywgdXNlcmlkMSk7CiAgICAgICAgZW0ucmVmcmVzaCh1c2VyKTsKCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDM2LCB1c2VyLmdldEFnZSgpKTsKCiAgICAg\nICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tQUJTIFRlc3RlZAoKICAgICAg\nICBxdWVyeSA9CiAgICAgICAgICAgICJVUERBVEUgQ29tcFVzZXIgZSBTRVQg\nZS5hZ2UgPSBTUVJUKGUuYWdlKSBXSEVSRSBlLm5hbWU9J1NlZXRoYSciOwog\nICAgICAgIG51bSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5leGVjdXRlVXBk\nYXRlKCk7CgogICAgICAgIGFzc2VydE5vdE51bGwobnVtKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgbnVtKTsKCiAgICAgICAgdXNlciA9IGVtLmZpbmQo\nQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDEpOwogICAgICAgIGVtLnJlZnJlc2go\ndXNlcik7CgogICAgICAgIGFzc2VydEVxdWFscyg2LCB1c2VyLmdldEFnZSgp\nKTsKCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tU1FSVCBU\nZXN0ZWQKCiAgICAgICAgcXVlcnkgPQogICAgICAgICAgICAiVVBEQVRFIENv\nbXBVc2VyIGUgU0VUIGUuYWdlID0gTU9EKGUuYWdlLCA0KSBXSEVSRSBlLm5h\nbWU9J1NlZXRoYSciOwogICAgICAgIG51bSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1\nZXJ5KS5leGVjdXRlVXBkYXRlKCk7CgogICAgICAgIGFzc2VydE5vdE51bGwo\nbnVtKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgbnVtKTsKCiAgICAgICAg\ndXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDEpOwogICAg\nICAgIGVtLnJlZnJlc2godXNlcik7CgogICAgICAgIGFzc2VydEVxdWFscygy\nLCB1c2VyLmdldEFnZSgpKTsKCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tTU9EIFRlc3RlZAoKICAgICAgICBxdWVyeSA9ICJTRUxFQ1Qg\nZS5uYW1lIEZST00gQ29tcFVzZXIgZSBXSEVSRSBTSVpFKGUubmlja25hbWVz\nKSA9IDYiOwogICAgICAgIExpc3QgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnko\ncXVlcnkpLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVs\nbChyZXN1bHQpOwogICAgICAgIGFzc2VydEVxdWFscygwLCByZXN1bHQuc2l6\nZSgpKTsKCiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1TSVpF\nIFRlc3RlZAoKICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgZW5kRW0oZW0p\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RHcm91cEJ5SGF2aW5nQ2xh\ndXNlKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50\naXR5TWFuYWdlcigpOwoKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNU\nIGMubmFtZSBGUk9NIENvbXBVc2VyIGMgR1JPVVAgQlkgYy5uYW1lICIKICAg\nICAgICAgICAgKyAiSEFWSU5HIGMubmFtZSBMSUtFICdTJSciOwoKICAgICAg\nICBMaXN0IHJlc3VsdCA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5nZXRSZXN1\nbHRMaXN0KCk7CgogICAgICAgIGFzc2VydE5vdE51bGwocmVzdWx0KTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMywgcmVzdWx0LnNpemUoKSk7CiAgICAgICAg\nYXNzZXJ0VHJ1ZShyZXN1bHQuY29udGFpbnMoIlNoYW5ub24gIikpOwogICAg\nICAgIGFzc2VydFRydWUocmVzdWx0LmNvbnRhaW5zKCJTaGFkZSIpKTsKICAg\nICAgICBhc3NlcnRUcnVlKHJlc3VsdC5jb250YWlucygiU2VldGhhIikpOwoK\nICAgICAgICBlbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndE9yZGVyQnlDbGF1c2UoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIFN0cmluZyBxdWVy\neSA9ICJTRUxFQ1QgYy5uYW1lIEZST00gQ29tcFVzZXIgYyBXSEVSRSBjLm5h\nbWUgTElLRSAnUyUnICIKICAgICAgICAgICAgKyAiT1JERVIgQlkgYy5uYW1l\nIjsKCiAgICAgICAgTGlzdCByZXN1bHQgPSBlbS5jcmVhdGVRdWVyeShxdWVy\neSkuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKHJl\nc3VsdCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIHJlc3VsdC5zaXplKCkp\nOwogICAgICAgIGFzc2VydFRydWUocmVzdWx0LmNvbnRhaW5zKCJTaGFubm9u\nICIpKTsKICAgICAgICBhc3NlcnRUcnVlKHJlc3VsdC5jb250YWlucygiU2Vl\ndGhhIikpOwogICAgICAgIGFzc2VydFRydWUocmVzdWx0LmNvbnRhaW5zKCJT\naGFkZSIpKTsKCiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RBVkdBZ2dyZWdGdW5jKCkgewogICAgICAgIC8qKgogICAg\nICAgICAqIFRvIGJlIFRlc3RlZDogQVZHLCBDT1VOVCwgTUFYLCBNSU4sIFNV\nTQogICAgICAgICAqLwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3Vy\ncmVudEVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0g\nIlNFTEVDVCBBVkcoZS5hZ2UpIEZST00gQ29tcFVzZXIgZSI7CgogICAgICAg\nIExpc3QgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3Vs\ndExpc3QoKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwogICAg\nICAgIGFzc2VydEVxdWFscygxLCByZXN1bHQuc2l6ZSgpKTsKICAgICAgICBh\nc3NlcnRUcnVlKHJlc3VsdC5jb250YWlucygyNSkpOwoKICAgICAgICBlbmRF\nbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdENPVU5UQWdncmVn\nRnVuYygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVD\nVCBDT1VOVChjLm5hbWUpIEZST00gQ29tcFVzZXIgYyI7CgogICAgICAgIExp\nc3QgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3VsdExp\nc3QoKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwogICAgICAg\nIGFzc2VydEVxdWFscygxLCByZXN1bHQuc2l6ZSgpKTsKICAgICAgICBhc3Nl\ncnRUcnVlKHJlc3VsdC5jb250YWlucyg2bCkpOwoKICAgICAgICBlbmRFbShl\nbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE1BWEFnZ3JlZ0Z1bmMo\nKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CgogICAgICAgIFN0cmluZyBxdWVyeSA9ICJTRUxFQ1QgRElT\nVElOQ1QgTUFYKGMuYWdlKSBGUk9NIENvbXBVc2VyIGMiOwoKICAgICAgICBM\naXN0IHJlc3VsdCA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5nZXRSZXN1bHRM\naXN0KCk7CgogICAgICAgIGFzc2VydE5vdE51bGwocmVzdWx0KTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgcmVzdWx0LnNpemUoKSk7CiAgICAgICAgYXNz\nZXJ0VHJ1ZShyZXN1bHQuY29udGFpbnMoMzYpKTsKCiAgICAgICAgZW5kRW0o\nZW0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNSU5BZ2dyZWdGdW5j\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5\nTWFuYWdlcigpOwoKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNUIERJ\nU1RJTkNUIE1JTihjLmFnZSkgRlJPTSBDb21wVXNlciBjIjsKCiAgICAgICAg\nTGlzdCByZXN1bHQgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSkuZ2V0UmVzdWx0\nTGlzdCgpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKHJlc3VsdCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3VsdC5zaXplKCkpOwogICAgICAgIGFz\nc2VydFRydWUocmVzdWx0LmNvbnRhaW5zKDEwKSk7CgogICAgICAgIGVuZEVt\nKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U1VNQWdncmVnRnVu\nYygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVDVCBT\nVU0oYy5hZ2UpIEZST00gQ29tcFVzZXIgYyI7CgogICAgICAgIExpc3QgcmVz\ndWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3VsdExpc3QoKTsK\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCByZXN1bHQuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRUcnVl\nKHJlc3VsdC5jb250YWlucygxNTNsKSk7CgogICAgICAgIGVuZEVtKGVtKTsK\nICAgIH0KCiAgICBwdWJsaWMgQ29tcFVzZXIgY3JlYXRlVXNlcihTdHJpbmcg\nbmFtZSwgU3RyaW5nIGNOYW1lLCBBZGRyZXNzIGFkZCwgaW50IGFnZSwKICAg\nICAgICBib29sZWFuIGlzTWFsZSkgewogICAgICAgIENvbXBVc2VyIHVzZXIg\nPSBudWxsOwogICAgICAgIGlmIChpc01hbGUpIHsKICAgICAgICAgICAgdXNl\nciA9IG5ldyBNYWxlVXNlcigpOwogICAgICAgICAgICB1c2VyLnNldE5hbWUo\nbmFtZSk7CiAgICAgICAgICAgIHVzZXIuc2V0Q29tcHV0ZXJOYW1lKGNOYW1l\nKTsKICAgICAgICAgICAgdXNlci5zZXRBZGRyZXNzKGFkZCk7CiAgICAgICAg\nICAgIHVzZXIuc2V0QWdlKGFnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAg\nICAgICAgdXNlciA9IG5ldyBGZW1hbGVVc2VyKCk7CiAgICAgICAgICAgIHVz\nZXIuc2V0TmFtZShuYW1lKTsKICAgICAgICAgICAgdXNlci5zZXRDb21wdXRl\nck5hbWUoY05hbWUpOwogICAgICAgICAgICB1c2VyLnNldEFkZHJlc3MoYWRk\nKTsKICAgICAgICAgICAgdXNlci5zZXRBZ2UoYWdlKTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIHVzZXI7CiAgICB9CiAgICAKfQo=\n","encoding":"base64"}

