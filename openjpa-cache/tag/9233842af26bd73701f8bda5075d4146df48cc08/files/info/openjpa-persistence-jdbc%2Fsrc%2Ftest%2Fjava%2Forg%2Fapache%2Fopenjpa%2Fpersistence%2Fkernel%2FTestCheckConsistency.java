{"sha":"f80d70972221690ea52a87b16fb744b025d12de6","node_id":"MDQ6QmxvYjIwNjM2NDpmODBkNzA5NzIyMjE2OTBlYTUyYTg3YjE2ZmI3NDRiMDI1ZDEyZGU2","size":11134,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f80d70972221690ea52a87b16fb744b025d12de6","content":"LyoKICogVGVzdENoZWNrQ29uc2lzdGVuY3kuamF2YQogKgogKiBDcmVhdGVk\nIG9uIE9jdG9iZXIgOSwgMjAwNiwgNjoyMyBQTQogKgogKiBUbyBjaGFuZ2Ug\ndGhpcyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFuYWdl\ncgogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4KICov\nCgovKgogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5k\nYXRpb24gKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBk\naXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZv\ncm1hdGlvbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRo\nZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUg\nQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2Ui\nKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxp\nYW5jZQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBj\nb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0\naGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z\nIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4gICAgCiAq\nLwpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJu\nZWw7CgoKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\na2VybmVsLmNvbW1vbi5hcHBzLlJ1bnRpbWVUZXN0MTsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuSlBBRmFjYWRlSGVscGVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyOwoKcHVibGljIGNsYXNzIFRlc3RDaGVja0NvbnNpc3Rl\nbmN5IGV4dGVuZHMgQmFzZUtlcm5lbFRlc3QgewoKICAgIHByaXZhdGUgT2Jq\nZWN0IF9vaWQgPSBudWxsOwoKICAgIC8qKgogICAgICogQ3JlYXRlcyBhIG5l\ndyBpbnN0YW5jZSBvZiBUZXN0Q2hlY2tDb25zaXN0ZW5jeQogICAgICovCiAg\nICBwdWJsaWMgVGVzdENoZWNrQ29uc2lzdGVuY3koU3RyaW5nIG5hbWUpIHsK\nICAgICAgICBzdXBlcihuYW1lKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVyLnNldFVw\nKFJ1bnRpbWVUZXN0MS5jbGFzcyk7CgogICAgICAgIFJ1bnRpbWVUZXN0MSBw\nYyA9IG5ldyBSdW50aW1lVGVzdDEoKTsKICAgICAgICBwYy5zZXRJbnRGaWVs\nZCgxKTsKICAgICAgICBwYy5zZXRJbnRGaWVsZDEoMSk7CiAgICAgICAgX29p\nZCA9IHBlcnNpc3QocGMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RD\nb25zaXN0ZW50RGF0YXN0b3JlVHJhbnNhY3Rpb24oKSB7CgogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBwbS5z\nZXRPcHRpbWlzdGljKGZhbHNlKTsKICAgICAgICBwbS52YWxpZGF0ZUNoYW5n\nZXMoKTsgICAgICAgIC8vIG5vLW9wIG91dHNpZGUgdHJhbnMKICAgICAgICBz\ndGFydFR4KHBtKTsKCiAgICAgICAgUnVudGltZVRlc3QxIHBjID0gcG0uZmlu\nZChSdW50aW1lVGVzdDEuY2xhc3MsIF9vaWQpOwogICAgICAgIHBjLnNldElu\ndEZpZWxkMSgxMDApOwoKICAgICAgICBSdW50aW1lVGVzdDEgbnBjID0gbmV3\nIFJ1bnRpbWVUZXN0MSgpOwogICAgICAgIG5wYy5zZXRJbnRGaWVsZCgyKTsK\nICAgICAgICBucGMuc2V0SW50RmllbGQxKDIpOwogICAgICAgIHBtLnBlcnNp\nc3QobnBjKTsKICAgICAgICBwbS52YWxpZGF0ZUNoYW5nZXMoKTsKCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEwMCwgcGMuZ2V0SW50RmllbGQxKCkpOwogICAg\nICAgIGFzc2VydFRydWUocG0uaXNQZXJzaXN0ZW50KG5wYykpOwoKICAgICAg\nICBwYy5zZXRJbnRGaWVsZDEoMjAwKTsKICAgICAgICBucGMuc2V0SW50Rmll\nbGQxKDMwMCk7CiAgICAgICAgZW5kVHgocG0pOwoKICAgICAgICBhc3NlcnRF\ncXVhbHMoMjAwLCBwYy5nZXRJbnRGaWVsZDEoKSk7CiAgICAgICAgYXNzZXJ0\nVHJ1ZShwbS5pc1BlcnNpc3RlbnQobnBjKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDMwMCwgbnBjLmdldEludEZpZWxkMSgpKTsKICAgICAgICBlbmRFbShw\nbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdENvbnNpc3RlbnREYXRh\nc3RvcmVUcmFuc2FjdGlvbldpdGhSb2xsYmFjaygpIHsKICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7CiAgICAgICAgcG0uc2V0\nT3B0aW1pc3RpYyhmYWxzZSk7CiAgICAgICAgcG0udmFsaWRhdGVDaGFuZ2Vz\nKCk7ICAgICAgICAvLyBuby1vcCBvdXRzaWRlIHRyYW5zCiAgICAgICAgc3Rh\ncnRUeChwbSk7CgogICAgICAgIFJ1bnRpbWVUZXN0MSBwYyA9IHBtLmZpbmQo\nUnVudGltZVRlc3QxLmNsYXNzLCBfb2lkKTsKICAgICAgICBwYy5zZXRJbnRG\naWVsZDEoMTAwKTsKCiAgICAgICAgUnVudGltZVRlc3QxIG5wYyA9IG5ldyBS\ndW50aW1lVGVzdDEoKTsKICAgICAgICBwbS5wZXJzaXN0KG5wYyk7CiAgICAg\nICAgT2JqZWN0IG5vaWQgPSBwbS5nZXRPYmplY3RJZChucGMpOwoKICAgICAg\nICBwbS52YWxpZGF0ZUNoYW5nZXMoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMTAwLCBwYy5nZXRJbnRGaWVsZDEoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShw\nbS5pc1BlcnNpc3RlbnQobnBjKSk7CgogICAgICAgIHBjLnNldEludEZpZWxk\nMSgyMDApOwogICAgICAgIG5wYy5zZXRJbnRGaWVsZDEoMzAwKTsKICAgICAg\nICByb2xsYmFja1R4KHBtKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBj\nLmdldEludEZpZWxkMSgpKTsKICAgICAgICBhc3NlcnRGYWxzZShwbS5pc1Bl\ncnNpc3RlbnQobnBjKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIG5wYy5n\nZXRJbnRGaWVsZDEoKSk7CiAgICAgICAgZW5kRW0ocG0pOwoKICAgICAgICBw\nbSA9IGdldFBNKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgUnVudGlt\nZVRlc3QxIHRlbXAgPQogICAgICAgICAgICAgICAgcG0uZmluZChSdW50aW1l\nVGVzdDEuY2xhc3MsIG5vaWQpOwogICAgICAgICAgICBmYWlsKCJPYmplY3Qg\nc2hvdWxkIG5vdCBleGlzdC4iICsgdGVtcC5nZXRJbnRGaWVsZCgpICsgIjo6\nIiArCiAgICAgICAgICAgICAgICB0ZW1wLmdldEludEZpZWxkMSgpKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gam9uZmUpIHsKICAgICAgICB9CiAg\nICAgICAgZW5kRW0ocG0pOwogICAgfQoKICAgIC8vRklYTUUganRob21hcwov\nKiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RJbmNvbnNpc3RlbnREYXRhc3Rv\ncmVUcmFuc2FjdGlvbigpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBwbSA9IGdldFBNKCk7CiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZl\ndGNoUGxhbikgcG0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgcG0uc2V0T3B0\naW1pc3RpYyhmYWxzZSk7CiAgICAgICAgcG0uc2V0UmV0YWluU3RhdGUoZmFs\nc2UpOwogICAgICAgIHBtLnZhbGlkYXRlQ2hhbmdlcygpOyAgICAgICAgLy8g\nbm8tb3Agb3V0c2lkZSB0cmFucwogICAgICAgIHBtLmJlZ2luKCk7CiAgKi8K\nICAgIC8vRklYTUUganRob21hcwogICAgLyoKICAgZmV0Y2guc2V0UmVhZExv\nY2tMZXZlbChwbS5MT0NLX05PTkUpOwogICBmZXRjaC5zZXRXcml0ZUxvY2tM\nZXZlbChwbS5MT0NLX05PTkUpOwogICAgKi8KICAgIC8qClJ1bnRpbWVUZXN0\nMSBwYyA9IChSdW50aW1lVGVzdDEpIHBtLmZpbmQoUnVudGltZVRlc3QxLmNs\nYXNzLF9vaWQpOwpwYy5zZXRJbnRGaWVsZCgxMDApOwoKT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0yID0gZ2V0UE0oKTsKcG0yLmJlZ2luKCk7ClJ1bnRpbWVU\nZXN0MSBjb3B5ID0gKFJ1bnRpbWVUZXN0MSkgcG0yLmZpbmQoUnVudGltZVRl\nc3QxLmNsYXNzLF9vaWQpOwpjb3B5LnNldEludEZpZWxkKC0xKTsKcG0yLmNv\nbW1pdCgpOwpwbTIuY2xvc2UoKTsKClJ1bnRpbWVUZXN0MSBucGMgPSBuZXcg\nUnVudGltZVRlc3QxKCk7CnBtLnBlcnNpc3QobnBjKTsKCnRyeSB7CiAgIHBt\nLnZhbGlkYXRlQ2hhbmdlcygpOwogICBmYWlsKCJEaWRuJ3QgZmluZCBpbmNv\nbnNpc3RlbmN5LiIpOwp9IGNhdGNoIChFeGNlcHRpb24gam92ZSkgewogICAv\nL0ZJWE1FCiAgIC8qCiAgIFRocm93YWJsZVtdIHQgPSBqb3ZlLmdldE5lc3Rl\nZEV4Y2VwdGlvbnMoKTsKICAgYXNzZXJ0RXF1YWxzKDEsIHQubGVuZ3RoKTsK\nICAgYXNzZXJ0RXF1YWxzKHBjLCAoKChKRE9FeGNlcHRpb24pIHRbMF0pLmdl\ndEZhaWxlZE9iamVjdCgpKSk7CiAgICAqLwovLyAgICAgICAgfQoKICAgIC8q\nICAgICAgICBhc3NlcnRUcnVlKHBtLmdldFJvbGxiYWNrT25seSgpKTsKICAg\nICAgICAgICBwbS5yb2xsYmFjaygpOwoKICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoLTEsIHBjLmdldEludEZpZWxkKCkpOwogICAgICAgICAgIGFzc2VydEZh\nbHNlKHBtLmlzUGVyc2lzdGVudChucGMpKTsKICAgICAgICAgICBlbmRFbShw\nbSwoKSk7CiAgICAgICB9CiAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdENv\nbnNpc3RlbnRPcHRpbWlzdGljVHJhbnNhY3Rpb24oKSB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOwogICAgICAgIHBtLnNl\ndE9wdGltaXN0aWModHJ1ZSk7CiAgICAgICAgcG0udmFsaWRhdGVDaGFuZ2Vz\nKCk7ICAgICAgICAvLyBuby1vcCBvdXRzaWRlIHRyYW5zCiAgICAgICAgc3Rh\ncnRUeChwbSk7CiAgICAgICAgYm9vbGVhbiBoYXNDb25uID0gaGFzQ29ubmVj\ndGlvbihwbSk7CgogICAgICAgIFJ1bnRpbWVUZXN0MSBwYyA9IHBtLmZpbmQo\nUnVudGltZVRlc3QxLmNsYXNzLCBfb2lkKTsKICAgICAgICBwYy5zZXRJbnRG\naWVsZDEoMTAwKTsKCiAgICAgICAgUnVudGltZVRlc3QxIG5wYyA9IG5ldyBS\ndW50aW1lVGVzdDEoKTsKICAgICAgICBucGMuc2V0SW50RmllbGQoMik7CiAg\nICAgICAgbnBjLnNldEludEZpZWxkMSgyKTsKICAgICAgICBwbS5wZXJzaXN0\nKG5wYyk7CgogICAgICAgIHBtLnZhbGlkYXRlQ2hhbmdlcygpOwogICAgICAg\nIGlmICghaGFzQ29ubikKICAgICAgICAgICAgYXNzZXJ0RmFsc2UoaGFzQ29u\nbmVjdGlvbihwbSkpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoMTAwLCBwYy5n\nZXRJbnRGaWVsZDEoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwbS5pc1BlcnNp\nc3RlbnQobnBjKSk7CgogICAgICAgIHBjLnNldEludEZpZWxkMSgyMDApOwog\nICAgICAgIG5wYy5zZXRJbnRGaWVsZDEoMzAwKTsKICAgICAgICBlbmRUeChw\nbSk7CgogICAgICAgIGFzc2VydEVxdWFscygyMDAsIHBjLmdldEludEZpZWxk\nMSgpKTsKICAgICAgICBhc3NlcnRUcnVlKHBtLmlzUGVyc2lzdGVudChucGMp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMzAwLCBucGMuZ2V0SW50RmllbGQx\nKCkpOwogICAgICAgIGVuZEVtKHBtKTsKICAgIH0KCiAgICBwcml2YXRlIGJv\nb2xlYW4gaGFzQ29ubmVjdGlvbihPcGVuSlBBRW50aXR5TWFuYWdlciBwbSkg\newogICAgICAgIHJldHVybiBKUEFGYWNhZGVIZWxwZXIudG9Ccm9rZXIocG0p\nLmhhc0Nvbm5lY3Rpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nQ29uc2lzdGVudE9wdGltaXN0aWNUcmFuc2FjdGlvbldpdGhSb2xsYmFjaygp\nIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7\nCiAgICAgICAgcG0uc2V0T3B0aW1pc3RpYyh0cnVlKTsKICAgICAgICBwbS52\nYWxpZGF0ZUNoYW5nZXMoKTsgICAgICAgIC8vIG5vLW9wIG91dHNpZGUgdHJh\nbnMKICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICBib29sZWFuIGhhc0Nv\nbm4gPSBoYXNDb25uZWN0aW9uKHBtKTsKCiAgICAgICAgUnVudGltZVRlc3Qx\nIHBjID0gcG0uZmluZChSdW50aW1lVGVzdDEuY2xhc3MsIF9vaWQpOwogICAg\nICAgIHBjLnNldEludEZpZWxkMSgxMDApOwoKICAgICAgICBSdW50aW1lVGVz\ndDEgbnBjID0gbmV3IFJ1bnRpbWVUZXN0MSgpOwogICAgICAgIHBtLnBlcnNp\nc3QobnBjKTsKICAgICAgICBPYmplY3Qgbm9pZCA9IHBtLmdldE9iamVjdElk\nKG5wYyk7CgogICAgICAgIHBtLnZhbGlkYXRlQ2hhbmdlcygpOwogICAgICAg\nIGlmICghaGFzQ29ubikKICAgICAgICAgICAgYXNzZXJ0RmFsc2UoaGFzQ29u\nbmVjdGlvbihwbSkpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoMTAwLCBwYy5n\nZXRJbnRGaWVsZDEoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwbS5pc1BlcnNp\nc3RlbnQobnBjKSk7CgogICAgICAgIHBjLnNldEludEZpZWxkMSgyMDApOwog\nICAgICAgIG5wYy5zZXRJbnRGaWVsZDEoMzAwKTsKICAgICAgICByb2xsYmFj\na1R4KHBtKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBjLmdldEludEZp\nZWxkMSgpKTsKICAgICAgICBhc3NlcnRGYWxzZShwbS5pc1BlcnNpc3RlbnQo\nbnBjKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIG5wYy5nZXRJbnRGaWVs\nZDEoKSk7CiAgICAgICAgZW5kRW0ocG0pOwoKICAgICAgICBwbSA9IGdldFBN\nKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgUnVudGltZVRlc3QxIHRl\nbXAgPQogICAgICAgICAgICAgICAgcG0uZmluZChSdW50aW1lVGVzdDEuY2xh\nc3MsIG5vaWQpOwoKICAgICAgICAgICAgZmFpbCgiT2JqZWN0IHNob3VsZCBu\nb3QgZXhpc3QuIiArIHRlbXAuZ2V0SW50RmllbGQoKSArICI6OiIgKwogICAg\nICAgICAgICAgICAgdGVtcC5nZXRJbnRGaWVsZDEoKSk7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGpvbmZlKSB7CiAgICAgICAgfQogICAgfQovL0ZJ\nWE1FIAogICAgLyoKcHVibGljIHZvaWQgdGVzdEluY29uc2lzdGVudE9wdGlt\naXN0aWNUcmFuc2FjdGlvbldpdGhvdXRSZWZyZXNoKCkgewpPcGVuSlBBRW50\naXR5TWFuYWdlciBwbSA9IGdldFBNKCk7CnBtLnNldFJldGFpblN0YXRlKGZh\nbHNlKTsKcG0uc2V0T3B0aW1pc3RpYyh0cnVlKTsKcG0udmFsaWRhdGVDaGFu\nZ2VzKCk7ICAgICAgICAvLyBuby1vcCBvdXRzaWRlIHRyYW5zCnBtLmJlZ2lu\nKCk7CgpSdW50aW1lVGVzdDEgcGMgPSAoUnVudGltZVRlc3QxKSBwbS5maW5k\nKFJ1bnRpbWVUZXN0MS5jbGFzcyxfb2lkKTsKcGMuc2V0SW50RmllbGQoMTAw\nKTsKCk9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtMiA9IGdldFBNKCk7CnBtMi5i\nZWdpbigpOwpSdW50aW1lVGVzdDEgY29weSA9IChSdW50aW1lVGVzdDEpIHBt\nMi5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcyxfb2lkKTsKY29weS5zZXRJbnRG\naWVsZCgtMSk7CnBtMi5jb21taXQoKTsKcG0yLmNsb3NlKCk7CgpSdW50aW1l\nVGVzdDEgbnBjID0gbmV3IFJ1bnRpbWVUZXN0MSgpOwpwbS5wZXJzaXN0KG5w\nYyk7Ck9iamVjdCBub2lkID0gcG0uZ2V0T2JqZWN0SWQobnBjKTsKCnRyeSB7\nCiAgIHBtLnZhbGlkYXRlQ2hhbmdlcygpOwogICBmYWlsKCJEaWRuJ3QgZmlu\nZCBpbmNvbnNpc3RlbmN5LiIpOwp9IGNhdGNoIChFeGNlcHRpb24gam92ZSkg\newogICAvL0ZJWE1FIGp0aG9tYXMKICAgLyoKICAgVGhyb3dhYmxlW10gdCA9\nIGpvdmUuZ2V0TmVzdGVkRXhjZXB0aW9ucygpOwogICBhc3NlcnRFcXVhbHMo\nMSwgdC5sZW5ndGgpOwogICBhc3NlcnRFcXVhbHMocGMsICgoKEpET0V4Y2Vw\ndGlvbikgdFswXSkuZ2V0RmFpbGVkT2JqZWN0KCkpKTsKICAgICovCiAgICAv\nLyAgICAgfQovKiAgICAgYXNzZXJ0RmFsc2UocG0uZ2V0Um9sbGJhY2tPbmx5\nKCkpOwogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHBtLmNv\nbW1pdCgpOwogICAgICAgICAgICBmYWlsKCJDb21taXR0ZWQgaW5jb25zaXN0\nZW50IHRyYW5zYWN0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBqZSkgewogICAgICAgIH0KICAgICAgICAKICAgICAgICBhc3NlcnRFcXVh\nbHMoLTEsIHBjLmdldEludEZpZWxkKCkpOwogICAgICAgIGFzc2VydEZhbHNl\nKHBtLmlzUGVyc2lzdGVudChucGMpKTsKICAgICAgICBlbmRFbShwbSwoKSk7\nCiAgICAgICAgCiAgICAgICAgcG0gPSBnZXRQTSgpOwogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIHBtLmZpbmQoUnVudGltZVRlc3QxLmNsYXNzLG5vaWQp\nOwogICAgICAgICAgICBmYWlsKCJPYmplY3Qgc2hvdWxkIG5vdCBleGlzdC4i\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gam9uZmUpIHsKICAgICAg\nICB9CiAgICAgICAgZW5kRW0ocG0sKCkpOwogICAgfQogKi8KCi8vRklYTUUg\nCi8qICAgIAogICAgcHVibGljIHZvaWQgdGVzdEluY29uc2lzdGVudE9wdGlt\naXN0aWNUcmFuc2FjdGlvbldpdGhSZWZyZXNoKCkgewogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBwbS5zZXRP\ncHRpbWlzdGljKHRydWUpOwogICAgICAgIHBtLnZhbGlkYXRlQ2hhbmdlcygp\nOyAgICAgICAgLy8gbm8tb3Agb3V0c2lkZSB0cmFucwogICAgICAgIHBtLmJl\nZ2luKCk7CiAgICAgICAgCiAgICAgICAgUnVudGltZVRlc3QxIHBjID0gcG0u\nZmluZChSdW50aW1lVGVzdDEuY2xhc3MsX29pZCk7CiAgICAgICAgcGMuc2V0\nSW50RmllbGQoMTAwKTsKICAgICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbTIgPSBnZXRQTSgpOwogICAgICAgIHBtMi5iZWdpbigpOwog\nICAgICAgIFJ1bnRpbWVUZXN0MSBjb3B5ID0gcG0yLmZpbmQoUnVudGltZVRl\nc3QxLmNsYXNzLF9vaWQpOwogICAgICAgIGNvcHkuc2V0SW50RmllbGQoLTEp\nOwogICAgICAgIHBtMi5jb21taXQoKTsKICAgICAgICBwbTIuY2xvc2UoKTsK\nICAgICAgICAKICAgICAgICBSdW50aW1lVGVzdDEgbnBjID0gbmV3IFJ1bnRp\nbWVUZXN0MSgpOwogICAgICAgIHBtLnBlcnNpc3QobnBjKTsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBwbS52YWxpZGF0ZUNoYW5nZXMoKTsKICAgICAg\nICAgICAgZmFpbCgiRGlkbid0IGZpbmQgaW5jb25zaXN0ZW5jeS4iKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gam92ZSkgewogICAgICAgICAgICAv\nL0ZJWE1FIGp0aG9tYXMKICAgICAgICAgICAgLyoKICAgICAgICAgICAgVGhy\nb3dhYmxlW10gdCA9IGpvdmUuZ2V0TmVzdGVkRXhjZXB0aW9ucygpOwogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgdC5sZW5ndGgpOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMocGMsICgoKEpET0V4Y2VwdGlvbikgdFswXSkuZ2V0\nRmFpbGVkT2JqZWN0KCkpKTsKICAgICAgICAgICAgICovCiAgICAvLyAgICAg\nIH0KICAgIC8qICAgICAgIGFzc2VydEZhbHNlKHBtLmdldFJvbGxiYWNrT25s\neSgpKTsKICAgICAgICAgcG0ucmVmcmVzaChwYyk7CgogICAgICAgICBhc3Nl\ncnRFcXVhbHMoLTEsIHBjLmdldEludEZpZWxkKCkpOwogICAgICAgICBhc3Nl\ncnRUcnVlKHBtLmlzUGVyc2lzdGVudChucGMpKTsKCiAgICAgICAgIHBjLnNl\ndEludEZpZWxkKDIwMCk7CiAgICAgICAgIG5wYy5zZXRJbnRGaWVsZCgzMDAp\nOwogICAgICAgICBwbS5jb21taXQoKTsKCiAgICAgICAgIGFzc2VydEVxdWFs\ncygyMDAsIHBjLmdldEludEZpZWxkKCkpOwogICAgICAgICBhc3NlcnRUcnVl\nKHBtLmlzUGVyc2lzdGVudChucGMpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxz\nKDMwMCwgbnBjLmdldEludEZpZWxkKCkpOwogICAgICAgICBlbmRFbShwbSwo\nKSk7CiAgICAgfQogICAgKi8KCi8vRklYTUUgCgovKiAgICAKcHVibGljIHZv\naWQgdGVzdEluY29uc2lzdGVudE9wdGltaXN0aWNUcmFuc2FjdGlvbldpdGhS\nb2xsYmFjaygpIHsKT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgp\nOwpwbS5zZXRSZXRhaW5TdGF0ZShmYWxzZSk7CnBtLnNldE9wdGltaXN0aWMo\ndHJ1ZSk7CnBtLnZhbGlkYXRlQ2hhbmdlcygpOyAgICAgICAgLy8gbm8tb3Ag\nb3V0c2lkZSB0cmFucwpwbS5iZWdpbigpOwoKUnVudGltZVRlc3QxIHBjID0g\nKFJ1bnRpbWVUZXN0MSkgcG0uZmluZChSdW50aW1lVGVzdDEuY2xhc3MsX29p\nZCk7CnBjLnNldEludEZpZWxkKDEwMCk7CgpPcGVuSlBBRW50aXR5TWFuYWdl\nciBwbTIgPSBnZXRQTSgpOwpwbTIuYmVnaW4oKTsKUnVudGltZVRlc3QxIGNv\ncHkgPSAoUnVudGltZVRlc3QxKSBwbTIuZmluZChSdW50aW1lVGVzdDEuY2xh\nc3MsX29pZCk7CmNvcHkuc2V0SW50RmllbGQoLTEpOwpwbTIuY29tbWl0KCk7\nCnBtMi5jbG9zZSgpOwoKUnVudGltZVRlc3QxIG5wYyA9IG5ldyBSdW50aW1l\nVGVzdDEoKTsKcG0ucGVyc2lzdChucGMpOwpPYmplY3Qgbm9pZCA9IHBtLmdl\ndE9iamVjdElkKG5wYyk7Cgp0cnkgewpwbS52YWxpZGF0ZUNoYW5nZXMoKTsK\nZmFpbCgiRGlkbid0IGZpbmQgaW5jb25zaXN0ZW5jeS4iKTsKfSBjYXRjaCAo\nRXhjZXB0aW9uIGpvdmUpIHsKLy9GSVhNRSBqdGhvbWFzCi8qClRocm93YWJs\nZVtdIHQgPSBqb3ZlLmdldE5lc3RlZEV4Y2VwdGlvbnMoKTsKYXNzZXJ0RXF1\nYWxzKDEsIHQubGVuZ3RoKTsKYXNzZXJ0RXF1YWxzKHBjLCAoKChKRE9FeGNl\ncHRpb24pIHRbMF0pLmdldEZhaWxlZE9iamVjdCgpKSk7CiovCiAgICAvLyAg\nICAgIH0KICAgIC8qICAgICAgIGFzc2VydEZhbHNlKHBtLmdldFJvbGxiYWNr\nT25seSgpKTsKICAgICAgICAgIHBtLnJvbGxiYWNrKCk7CgogICAgICAgICAg\nYXNzZXJ0RXF1YWxzKC0xLCBwYy5nZXRJbnRGaWVsZCgpKTsKICAgICAgICAg\nIGFzc2VydEZhbHNlKHBtLmlzUGVyc2lzdGVudChucGMpKTsKICAgICAgICAg\nIGVuZEVtKHBtLCgpKTsKCiAgICAgICAgICBwbSA9IGdldFBNKCk7CiAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgIHBtLmZpbmQoUnVudGltZVRlc3Qx\nLmNsYXNzLF9vaWQpOwogICAgICAgICAgICAgIGZhaWwoIk9iamVjdCBzaG91\nbGQgbm90IGV4aXN0LiIpOwogICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGpvbmZlKSB7CiAgICAgICAgICB9CiAgICAgICAgICBlbmRFbShwbSwoKSk7\nCiAgICAgIH0KCiAgICAqLwp9Cg==\n","encoding":"base64"}

