{"sha":"406327bae963c6e5f9b908eaa67197e278c12a60","node_id":"MDQ6QmxvYjIwNjM2NDo0MDYzMjdiYWU5NjNjNmU1ZjliOTA4ZWFhNjcxOTdlMjc4YzEyYTYw","size":13649,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/406327bae963c6e5f9b908eaa67197e278c12a60","content":"LyoKICogVGVzdEZldGNoR3JvdXBzLmphdmEKICoKICogQ3JlYXRlZCBvbiBP\nY3RvYmVyIDEwLCAyMDA2LCA1OjQ2IFBNCiAqCiAqIFRvIGNoYW5nZSB0aGlz\nIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2VyCiAq\nIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgogKi8KCi8q\nCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlv\nbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNl\nbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3Ry\naWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0\naW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFT\nRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFj\naGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5\nb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNl\nCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkg\nb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3Jn\nL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBi\neSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICog\nc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlz\ndHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJS\nQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBl\neHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQog\nKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAKICovCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsK\nCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkJp\ndFNldDsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwppbXBvcnQgamF2YS51dGls\nLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGph\ndmEudXRpbC5NYXA7CgoKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkF0dGFjaEE7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5h\ncHBzLkF0dGFjaEI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkF0dGFjaEM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBz\nLkF0dGFjaEQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2Uua2VybmVsLmNvbW1vbi5hcHBzLkF0dGFjaEU7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkF0\ndGFjaEY7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\na2VybmVsLmNvbW1vbi5hcHBzLkZldGNoR3JvdXBUZXN0T2JqZWN0OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21t\nb24uYXBwcy4KICAgICAgICBGZXRjaEdyb3VwVGVzdE9iamVjdENoaWxkOwoK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRl\nTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkZpZWxk\nTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuRmV0Y2hQbGFuOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFj\ndG9yeTsKCnB1YmxpYyBjbGFzcyBUZXN0RmV0Y2hHcm91cHMgZXh0ZW5kcyBC\nYXNlS2VybmVsVGVzdCB7CgogICAgcHJpdmF0ZSBpbnQgb2lkMTsKICAgIHBy\naXZhdGUgaW50IG9pZDI7CiAgICBwcml2YXRlIGludCBvaWRjMTsKCiAgICBw\ndWJsaWMgVGVzdEZldGNoR3JvdXBzKFN0cmluZyBzKSB7CiAgICAgICAgc3Vw\nZXIocyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IGlu\nc3RhbmNlIG9mIFRlc3RGZXRjaEdyb3VwcwogICAgICovCiAgICBwdWJsaWMg\nVGVzdEZldGNoR3JvdXBzKCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0VXAo\nRmV0Y2hHcm91cFRlc3RPYmplY3QuY2xhc3MsIEZldGNoR3JvdXBUZXN0T2Jq\nZWN0Q2hpbGQuY2xhc3MsCiAgICAgICAgICAgIEF0dGFjaEEuY2xhc3MsIEF0\ndGFjaEIuY2xhc3MsIEF0dGFjaEMuY2xhc3MsIEF0dGFjaEQuY2xhc3MsIEF0\ndGFjaEUuY2xhc3MsIEF0dGFjaEYuY2xhc3MpOwoKICAgICAgICBGZXRjaEdy\nb3VwVGVzdE9iamVjdCBvMSA9IG5ldyBGZXRjaEdyb3VwVGVzdE9iamVjdCgp\nOwogICAgICAgIC8vIHRoZSB2YWx1ZSB0aGF0ICdhJyBpcyBzZXQgdG8gaXMg\naW1wb3J0YW50IC0tIFRlc3RGZXRjaEdyb3Vwc0V4dGVudAogICAgICAgIC8v\nIGFuZCBUZXN0RmV0Y2hHcm91cHNRdWVyeSByZWx5IG9uIHRoaXMKICAgICAg\nICBvMS5zZXRBKDUpOwogICAgICAgIG8xLnNldEIoImZvbyIpOwogICAgICAg\nIC8vbzEuc2V0QyAobmV3IEJpZ0ludGVnZXIgKDg5KSk7CiAgICAgICAgbzEu\nc2V0RChuZXcgRGF0ZSgpKTsKICAgICAgICBvMS5zZXRFKCJlLWZvbyIpOwog\nICAgICAgIG8xLnNldEYoImYtZm9vIik7CgogICAgICAgIEZldGNoR3JvdXBU\nZXN0T2JqZWN0IG8yID0gbmV3IEZldGNoR3JvdXBUZXN0T2JqZWN0KCk7CiAg\nICAgICAgLy8gdGhlIHZhbHVlIHRoYXQgJ2EnIGlzIHNldCB0byBpcyBpbXBv\ncnRhbnQgLS0gVGVzdEZldGNoR3JvdXBzRXh0ZW50CiAgICAgICAgLy8gYW5k\nIFRlc3RGZXRjaEdyb3Vwc1F1ZXJ5IHJlbHkgb24gdGhpcwogICAgICAgIG8y\nLnNldEEoMyk7CiAgICAgICAgbzIuc2V0QigiYmFyIik7CiAgICAgICAgLy9v\nMi5zZXRDIChuZXcgQmlnSW50ZWdlciAoMTMpKTsKICAgICAgICBvMi5zZXRE\nKG5ldyBEYXRlKCkpOwogICAgICAgIG8yLnNldEUoImUtYmFyIik7CiAgICAg\nICAgbzIuc2V0RigiZi1iYXIiKTsKICAgICAgICBvMi5zZXRHKG8xKTsKICAg\nICAgICBvMi5zZXRIKG8xKTsKCiAgICAgICAgRmV0Y2hHcm91cFRlc3RPYmpl\nY3RDaGlsZCBjMSA9IG5ldyBGZXRjaEdyb3VwVGVzdE9iamVjdENoaWxkKCk7\nCiAgICAgICAgLy8gdGhlIHZhbHVlIHRoYXQgJ2EnIGlzIHNldCB0byBpcyBp\nbXBvcnRhbnQgLS0gVGVzdEZldGNoR3JvdXBzRXh0ZW50CiAgICAgICAgLy8g\nYW5kIFRlc3RGZXRjaEdyb3Vwc1F1ZXJ5IHJlbHkgb24gdGhpcwogICAgICAg\nIGMxLnNldEEoNCk7CiAgICAgICAgYzEuc2V0QigiY2hpbGQiKTsKICAgICAg\nICBjMS5zZXREKG5ldyBEYXRlKCkpOwogICAgICAgIGMxLnNldEUoImUtYmF6\nIik7CiAgICAgICAgYzEuc2V0RigiZi1iYXoiKTsKICAgICAgICBjMS5zZXRH\nKG8xKTsKICAgICAgICBjMS5zZXRIKG8xKTsKICAgICAgICBjMS5zZXRDaGls\nZEEoMSk7CiAgICAgICAgYzEuc2V0Q2hpbGRCKDIpOwogICAgICAgIGMxLnNl\ndENoaWxkQygzKTsKICAgICAgICBjMS5zZXRDaGlsZEQoNCk7CgogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBz\ndGFydFR4KHBtKTsKCiAgICAgICAgcG0ucGVyc2lzdChvMSk7CiAgICAgICAg\ncG0ucGVyc2lzdChvMik7CiAgICAgICAgcG0ucGVyc2lzdChjMSk7CiAgICAg\nICAgZW5kVHgocG0pOwoKICAgICAgICBvaWQxID0gbzEuZ2V0SWQoKTsKICAg\nICAgICBvaWQyID0gbzIuZ2V0SWQoKTsKICAgICAgICBvaWRjMSA9IGMxLmdl\ndElkKCk7CgogICAgICAgIGVuZEVtKHBtKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RmV0Y2hHcm91cHNGcm9tQ29uZmlndXJhdGlvbigpIHsKICAg\nICAgICBNYXAgcHJvcHMgPSBuZXcgSGFzaE1hcCgpOwogICAgICAgIHByb3Bz\nLnB1dCgib3BlbmpwYS5GZXRjaEdyb3VwcyIsICJkZWZhdWx0LGZnMSxmZzIi\nKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgZmFjdG9y\neSA9IGdldEVtZihwcm9wcyk7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0gZmFjdG9yeS5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgY2hlY2tHcm91cHMocG0sIG5ldyBTdHJpbmdbXXsgImZnMSIsICJmZzIi\nIH0pOwogICAgICAgIGZhY3RvcnkuY2xvc2UoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0ZXN0RmV0Y2hHcm91cHNOb0NvbmZpZ3VyYXRpb24oKSB7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOwoKICAg\nICAgICBGZXRjaEdyb3VwVGVzdE9iamVjdCBvMSA9IGdldE8xKHBtKTsKICAg\nICAgICBGZXRjaEdyb3VwVGVzdE9iamVjdCBvMiA9IGdldE8yKHBtKTsKCiAg\nICAgICAgLy8gb25seSBmaWVsZCBhIHNob3VsZCBiZSBsb2FkZWQuCiAgICAg\nICAgY2hlY2tPYmplY3QocG0sIG8xLCB0cnVlLCBmYWxzZSwgZmFsc2UsIGZh\nbHNlLCBmYWxzZSwgZmFsc2UpOwoKICAgICAgICAvLyB1cG9uIGxvYWRpbmcg\nZmllbGQgYiwgZmllbGRzIGMgYW5kIGQgc2hvdWxkIGFsc28gYmUgbG9hZGVk\nLAogICAgICAgIC8vIGJ1dCBlIGFuZCBmIHNob3VsZCBub3QuCiAgICAgICAg\nbzEuZ2V0QigpOwogICAgICAgIGNoZWNrT2JqZWN0KHBtLCBvMSwgdHJ1ZSwg\ndHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlKTsKCiAgICAgICAgLy8g\nbG9hZGluZyBmaWVsZCBoIHNob3VsZCBub3QgY2F1c2UgYW55IG9mIHRoZSBv\ndGhlcnMgdG8gYmUgbG9hZGVkLgogICAgICAgIGFzc2VydEVxdWFscyhvMSwg\nbzIuZ2V0SCgpKTsKICAgICAgICBjaGVja09iamVjdChwbSwgbzIsIHRydWUs\nIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7CgogICAgICAg\nIC8vIGxvYWRpbmcgZmllbGQgZyBzaG91bGQgY2F1c2UgZSBhbmQgZiB0byBi\nZSBsb2FkZWQuCiAgICAgICAgYXNzZXJ0RXF1YWxzKG8xLCBvMi5nZXRHKCkp\nOwogICAgICAgIGNoZWNrT2JqZWN0KHBtLCBvMiwgdHJ1ZSwgZmFsc2UsIGZh\nbHNlLCBmYWxzZSwgdHJ1ZSwgdHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdFJldHJpZXZlQWxsKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0gZ2V0UE0oKTsKCiAgICAgICAgRmV0Y2hHcm91cFRlc3RP\nYmplY3QgbzEgPSBnZXRPMShwbSk7CiAgICAgICAgRmV0Y2hHcm91cFRlc3RP\nYmplY3QgbzIgPSBnZXRPMihwbSk7CgogICAgICAgIC8vIG9ubHkgZmllbGQg\nYSBzaG91bGQgYmUgbG9hZGVkLgogICAgICAgIGNoZWNrT2JqZWN0KHBtLCBv\nMSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTsK\nICAgICAgICBjaGVja09iamVjdChwbSwgbzIsIHRydWUsIGZhbHNlLCBmYWxz\nZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7CgogICAgICAgIC8vIG9ubHkgZmll\nbGQgYSBzaG91bGQgYmUgbG9hZGVkLgogICAgICAgIHBtLnJldHJpZXZlKG8x\nKTsKICAgICAgICBjaGVja09iamVjdChwbSwgbzEsIHRydWUsIGZhbHNlLCBm\nYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7CgogICAgICAgIC8vIEFkZCBn\ncm91cHMgMSBhbmQgMyB0byB0aGUgZGVmYXVsdCBmZXRjaCBjb25maWd1cmF0\naW9uLgogICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFkZEZldGNoR3JvdXAo\nImcxIik7CiAgICAgICAgcG0uZ2V0RmV0Y2hQbGFuKCkuYWRkRmV0Y2hHcm91\ncCgiZzMiKTsKCiAgICAgICAgLy8gUmV0cmlldmUgbzEncyAiREZHIiB3aGlj\naCB3aWxsIGFjdHVhbGx5IGRvIGFsbCBjb25maWd1cmVkCiAgICAgICAgLy8g\nZmV0Y2ggZ3JvdXBzLgogICAgICAgIC8vIERGRyBmaWVsZHMgYW5kIGZpZWxk\ncyBpbiBncm91cHMgMSBhbmQgMyBzaG91bGQgYmUgbG9hZGVkCiAgICAgICAg\ncG0ucmV0cmlldmUobzEpOwogICAgICAgIGNoZWNrT2JqZWN0KHBtLCBvMSwg\ndHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hHcm91cENvbmZpZ3VyYXRpb24o\nKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgp\nOwogICAgICAgIEZldGNoUGxhbiBmZXRjaCA9IHBtLmdldEZldGNoUGxhbigp\nOwoKICAgICAgICBjaGVja0dyb3VwcyhwbSwgbmV3IFN0cmluZ1swXSk7Cgog\nICAgICAgIGZldGNoLmFkZEZldGNoR3JvdXAoImZvbyIpOwogICAgICAgIGNo\nZWNrR3JvdXBzKHBtLCBuZXcgU3RyaW5nW117ICJmb28iIH0pOwoKICAgICAg\nICBmZXRjaC5hZGRGZXRjaEdyb3VwKCJiYXIiKTsKICAgICAgICBmZXRjaC5h\nZGRGZXRjaEdyb3VwKCJiYXoiKTsKICAgICAgICBjaGVja0dyb3VwcyhwbSwg\nbmV3IFN0cmluZ1tdeyAiZm9vIiwgImJhciIsICJiYXoiIH0pOwoKICAgICAg\nICBmZXRjaC5hZGRGZXRjaEdyb3VwKCJhIik7CiAgICAgICAgZmV0Y2guYWRk\nRmV0Y2hHcm91cCgiYiIpOwogICAgICAgIGZldGNoLmFkZEZldGNoR3JvdXAo\nImMiKTsKICAgICAgICBmZXRjaC5hZGRGZXRjaEdyb3VwKCJkIik7CiAgICAg\nICAgY2hlY2tHcm91cHMocG0sIG5ldyBTdHJpbmdbXQogICAgICAgICAgICB7\nICJmb28iLCAiYmFyIiwgImJheiIsICJhIiwgImIiLCAiYyIsICJkIiB9KTsK\nCiAgICAgICAgZmV0Y2gucmVtb3ZlRmV0Y2hHcm91cCgiYmFyIik7CiAgICAg\nICAgY2hlY2tHcm91cHMocG0sIG5ldyBTdHJpbmdbXXsgImZvbyIsICJiYXoi\nLCAiYSIsICJiIiwgImMiLCAiZCIgfSk7CgogICAgICAgIGZldGNoLnJlbW92\nZUZldGNoR3JvdXAoImJheiIpOwogICAgICAgIGZldGNoLnJlbW92ZUZldGNo\nR3JvdXAoImMiKTsKICAgICAgICBjaGVja0dyb3VwcyhwbSwgbmV3IFN0cmlu\nZ1tdeyAiZm9vIiwgImEiLCAiYiIsICJkIiB9KTsKCiAgICAgICAgZmV0Y2gu\nY2xlYXJGZXRjaEdyb3VwcygpLmFkZEZldGNoR3JvdXAoRmV0Y2hQbGFuLkdS\nT1VQX0RFRkFVTFQpOwogICAgICAgIGNoZWNrR3JvdXBzKHBtLCBuZXcgU3Ry\naW5nWzBdKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgY2hlY2tHcm91cHMo\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0sIFN0cmluZ1tdIGdyb3Vwcykgewog\nICAgICAgIEhhc2hTZXQgZ3JvdXBTZXQgPSBuZXcgSGFzaFNldChBcnJheXMu\nYXNMaXN0KGdyb3VwcykpOwogICAgICAgIGdyb3VwU2V0LmFkZChGZXRjaFBs\nYW4uR1JPVVBfREVGQVVMVCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJncm91\ncFNldCBkb250IG1hdGNoIiwgZ3JvdXBTZXQsCiAgICAgICAgICAgIG5ldyBI\nYXNoU2V0KHBtLmdldEZldGNoUGxhbigpLmdldEZldGNoR3JvdXBzKCkpKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hHcm91cHNDaGlsZFdp\ndGhDb25maWd1cmF0aW9uKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBwbS5nZXRGZXRjaFBsYW4oKS5h\nZGRGZXRjaEdyb3VwKCJnMSIpOwogICAgICAgIHBtLmdldEZldGNoUGxhbigp\nLmFkZEZldGNoR3JvdXAoImczIik7CgogICAgICAgIC8vIGdldCB0aGlzIHNv\nIHRoYXQgaCdzIHZhbHVlIGlzIGxvYWRlZCBpbnRvIGNhY2hlLgogICAgICAg\nIEZldGNoR3JvdXBUZXN0T2JqZWN0IG8xID0gZ2V0TzEocG0pOwoKICAgICAg\nICBGZXRjaEdyb3VwVGVzdE9iamVjdENoaWxkIGMxID0gZ2V0QzEocG0pOwoK\nICAgICAgICAvLyBERkcgZmllbGRzIGFuZCBmaWVsZHMgaW4gZ3JvdXBzIDEg\nYW5kIDMgc2hvdWxkIGJlIGxvYWRlZAogICAgICAgIGNoZWNrQ2hpbGRPYmpl\nY3QocG0sIGMxLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCBmYWxzZSwgZmFs\nc2UsCiAgICAgICAgICAgIHRydWUsIHRydWUsIGZhbHNlLCB0cnVlKTsKCiAg\nICAgICAgLy8gdXBvbiBhY2Nlc3NpbmcgZmllbGQgYiwgbm90aGluZyBzaG91\nbGQgY2hhbmdlLgogICAgICAgIGMxLmdldEIoKTsKICAgICAgICBjaGVja0No\naWxkT2JqZWN0KHBtLCBjMSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFs\nc2UsIGZhbHNlLAogICAgICAgICAgICB0cnVlLCB0cnVlLCBmYWxzZSwgdHJ1\nZSk7CgogICAgICAgIGMxLmdldEgoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RmV0Y2hHcm91cHNXaXRoQ29uZmlndXJhdGlvbigpIHsKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7CgogICAgICAg\nIHBtLmdldEZldGNoUGxhbigpLmFkZEZldGNoR3JvdXAoImcxIik7CiAgICAg\nICAgcG0uZ2V0RmV0Y2hQbGFuKCkuYWRkRmV0Y2hHcm91cCgiZzMiKTsKCiAg\nICAgICAgRmV0Y2hHcm91cFRlc3RPYmplY3QgbzEgPSBnZXRPMShwbSk7CiAg\nICAgICAgRmV0Y2hHcm91cFRlc3RPYmplY3QgbzIgPSBnZXRPMihwbSk7Cgog\nICAgICAgIC8vIERGRyBmaWVsZHMgYW5kIGZpZWxkcyBpbiBncm91cHMgMSBh\nbmQgMyBzaG91bGQgYmUgbG9hZGVkCiAgICAgICAgY2hlY2tPYmplY3QocG0s\nIG8xLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCBmYWxzZSwgZmFsc2UpOwoK\nICAgICAgICAvLyB1cG9uIGFjY2Vzc2luZyBmaWVsZCBiLCBub3RoaW5nIHNo\nb3VsZCBjaGFuZ2UuCiAgICAgICAgbzEuZ2V0QigpOwogICAgICAgIGNoZWNr\nT2JqZWN0KHBtLCBvMSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2Us\nIGZhbHNlKTsKCiAgICAgICAgLy8gbG9hZGluZyBmaWVsZCBoIHNob3VsZCBu\nb3QgY2F1c2UgYW55IG9mIHRoZSBvdGhlcnMgdG8gYmUgbG9hZGVkLgogICAg\nICAgIGFzc2VydEVxdWFscyhvMSwgbzIuZ2V0SCgpKTsKICAgICAgICBjaGVj\na09iamVjdChwbSwgbzIsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIGZhbHNl\nLCBmYWxzZSk7CgogICAgICAgIC8vIGxvYWRpbmcgZmllbGQgZyBzaG91bGQg\nY2F1c2UgZSBhbmQgZiB0byBiZSBsb2FkZWQuCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKG8xLCBvMi5nZXRHKCkpOwogICAgICAgIGNoZWNrT2JqZWN0KHBtLCBv\nMiwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUZXN0cyB0aGF0IHJlbGF0aW9uIGZpZWxkcyBh\ncmUgbG9hZGVkIGltbWVkaWF0ZWx5IHdoZW4KICAgICAqIHRoZXkgYXJlIGlu\nIG9uZSBvZiB0aGUgUE0ncyBjb25maWd1cmVkIGZldGNoIGdyb3Vwcy4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgdGVzdFJlbGF0aW9uc0xvYWRlZCgpIHsK\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7CiAg\nICAgICAgcG0uZ2V0RmV0Y2hQbGFuKCkuYWRkRmV0Y2hHcm91cCgiZzIiKTsK\nCiAgICAgICAgLy8gbm90ZTogaW1wb3J0YW50IHRoZSBvMSBpcyAqbm90KiBp\nbiBwbSdzIGNhY2hlIGF0IHRoaXMgcG9pbnQsIHNvIHRoYXQKICAgICAgICAv\nLyB3ZSBrbm93IGl0IHRha2VzIGFub3RoZXIgZGF0YXN0b3JlIHRyaXAgdG8g\nZ2V0IG8xCgogICAgICAgIC8vIGxvYWQgbzIgYW5kIHJldHJpZXZlIGl0cyBz\ndGF0ZSBtYW5hZ2VyCiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSA9\nIGdldFN0YXRlTWFuYWdlcihnZXRPMihwbSksIHBtKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKCJTTSBpcyBOVUxMIiwgc20pOwoKICAgICAgICAvLyAnZycg\naXMgdGhlIG5hbWUgb2YgYSAxLTEgcmVsYXRpb24gZmllbGQgdG8gbzEgaW4g\nY29uZmlndXJlZAogICAgICAgIC8vIGZldGNoIGdyb3VwICdnMic7IG1ha2Ug\nc3VyZSBpdCBpcyBsb2FkZWQKICAgICAgICBpbnQgZmllbGQgPSBzbS5nZXRN\nZXRhRGF0YSgpLmdldEZpZWxkKCJnIikuZ2V0SW5kZXgoKTsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBhc3NlcnRUcnVlKHNtLmdldExvYWRlZCgpLmdl\ndChmaWVsZCkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMob2lkMSwKICAg\nICAgICAgICAgICAgICgoRmV0Y2hHcm91cFRlc3RPYmplY3QpIHNtLmZldGNo\nT2JqZWN0RmllbGQoZmllbGQpKS5nZXRJZCgpKTsKICAgICAgICB9IGNhdGNo\nIChqdW5pdC5mcmFtZXdvcmsuQXNzZXJ0aW9uRmFpbGVkRXJyb3IgYWZlKSB7\nCiAgICAgICAgICAgIGJ1Zyg2MjMsIGFmZSwgIk9uZSB0byBvbmUgbWFwcGlu\nZ3MgZG8gbm90IHdvcmsgd2l0aCBjdXN0b20gIgogICAgICAgICAgICAgICAg\nKyAiZmV0Y2ggZ3JvdXBzIik7CiAgICAgICAgfQogICAgfQoKICAgIHByb3Rl\nY3RlZCB2b2lkIGNoZWNrT2JqZWN0KE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nLAogICAgICAgIEZldGNoR3JvdXBUZXN0T2JqZWN0IG8sIGJvb2xlYW4gYSwg\nYm9vbGVhbiBiLAogICAgICAgIGJvb2xlYW4gYywgYm9vbGVhbiBkLCBib29s\nZWFuIGUsIGJvb2xlYW4gZikgewogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20gPSBnZXRTdGF0ZU1hbmFnZXIobywgcG0pOwogICAgICAgIEJpdFNl\ndCBsb2FkZWQgPSBzbS5nZXRMb2FkZWQoKTsKCiAgICAgICAgRmllbGRNZXRh\nRGF0YVtdIGZtZHMgPSBzbS5nZXRNZXRhRGF0YSgpLmdldEZpZWxkcygpOwog\nICAgICAgIGludCBpID0gMDsKICAgICAgICBmb3IgKDsgaSA8IGZtZHMubGVu\nZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGZtZHNbaV0uZ2V0TmFtZSgp\nLmVxdWFscygiYSIpKQogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGEs\nIGxvYWRlZC5nZXQoaSkpOwogICAgICAgICAgICBlbHNlIGlmIChmbWRzW2ld\nLmdldE5hbWUoKS5lcXVhbHMoImIiKSkKICAgICAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhiLCBsb2FkZWQuZ2V0KGkpKTsKICAgICAgICAgICAgZWxzZSBp\nZiAoZm1kc1tpXS5nZXROYW1lKCkuZXF1YWxzKCJjIikpCiAgICAgICAgICAg\nICAgICBhc3NlcnRFcXVhbHMoYywgbG9hZGVkLmdldChpKSk7CiAgICAgICAg\nICAgIGVsc2UgaWYgKGZtZHNbaV0uZ2V0TmFtZSgpLmVxdWFscygiZCIpKQog\nICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGQsIGxvYWRlZC5nZXQoaSkp\nOwogICAgICAgICAgICBlbHNlIGlmIChmbWRzW2ldLmdldE5hbWUoKS5lcXVh\nbHMoImUiKSkKICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhlLCBsb2Fk\nZWQuZ2V0KGkpKTsKICAgICAgICAgICAgZWxzZSBpZiAoZm1kc1tpXS5nZXRO\nYW1lKCkuZXF1YWxzKCJmIikpCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoZiwgbG9hZGVkLmdldChpKSk7CiAgICAgICAgfQogICAgfQoKICAgIHBy\nb3RlY3RlZCB2b2lkIGNoZWNrQ2hpbGRPYmplY3QoT3BlbkpQQUVudGl0eU1h\nbmFnZXIgcG0sCiAgICAgICAgRmV0Y2hHcm91cFRlc3RPYmplY3RDaGlsZCBv\nLCBib29sZWFuIGEsIGJvb2xlYW4gYiwKICAgICAgICBib29sZWFuIGMsIGJv\nb2xlYW4gZCwgYm9vbGVhbiBlLCBib29sZWFuIGYsIGJvb2xlYW4gY2hpbGRB\nLAogICAgICAgIGJvb2xlYW4gY2hpbGRCLCBib29sZWFuIGNoaWxkQywgYm9v\nbGVhbiBjaGlsZEQpIHsKICAgICAgICBjaGVja09iamVjdChwbSwgbywgYSwg\nYiwgYywgZCwgZSwgZik7CgogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIg\nc20gPSBnZXRTdGF0ZU1hbmFnZXIobywgcG0pOwogICAgICAgIEJpdFNldCBs\nb2FkZWQgPSBzbS5nZXRMb2FkZWQoKTsKCiAgICAgICAgRmllbGRNZXRhRGF0\nYVtdIGZtZHMgPSBzbS5nZXRNZXRhRGF0YSgpLmdldEZpZWxkcygpOwogICAg\nICAgIGludCBpID0gMDsKICAgICAgICBmb3IgKDsgaSA8IGZtZHMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgaWYgKGZtZHNbaV0uZ2V0TmFtZSgpLmVx\ndWFscygiY2hpbGRBIikpCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nY2hpbGRBLCBsb2FkZWQuZ2V0KGkpKTsKICAgICAgICAgICAgZWxzZSBpZiAo\nZm1kc1tpXS5nZXROYW1lKCkuZXF1YWxzKCJjaGlsZEIiKSkKICAgICAgICAg\nICAgICAgIGFzc2VydEVxdWFscyhjaGlsZEIsIGxvYWRlZC5nZXQoaSkpOwog\nICAgICAgICAgICBlbHNlIGlmIChmbWRzW2ldLmdldE5hbWUoKS5lcXVhbHMo\nImNoaWxkQyIpKQogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGNoaWxk\nQywgbG9hZGVkLmdldChpKSk7CiAgICAgICAgICAgIGVsc2UgaWYgKGZtZHNb\naV0uZ2V0TmFtZSgpLmVxdWFscygiY2hpbGREIikpCiAgICAgICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoY2hpbGRELCBsb2FkZWQuZ2V0KGkpKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHJvdGVjdGVkIEZldGNoR3JvdXBUZXN0T2JqZWN0\nIGdldE8xKE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtKSB7CiAgICAgICAgcmV0\ndXJuIHBtLmZpbmQoRmV0Y2hHcm91cFRlc3RPYmplY3QuY2xhc3MsIG9pZDEp\nOwogICAgfQoKICAgIHByb3RlY3RlZCBGZXRjaEdyb3VwVGVzdE9iamVjdCBn\nZXRPMihPcGVuSlBBRW50aXR5TWFuYWdlciBwbSkgewogICAgICAgIHJldHVy\nbiBwbS5maW5kKEZldGNoR3JvdXBUZXN0T2JqZWN0LmNsYXNzLCBvaWQyKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgRmV0Y2hHcm91cFRlc3RPYmplY3RDaGls\nZCBnZXRDMShPcGVuSlBBRW50aXR5TWFuYWdlciBwbSkgewogICAgICAgIHJl\ndHVybiBwbS5maW5kKEZldGNoR3JvdXBUZXN0T2JqZWN0Q2hpbGQuY2xhc3Ms\nIG9pZGMxKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIHRoYXQgbmFt\nZWQgZmV0Y2ggZ3JvdXBzIGFjdHVhbGx5IGJyaW5nIGluIHRoZQogICAgICog\nbWFuYWdlZCBvYmplY3QuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RG\nZXRjaEdyb3VwSW5zdGFudGlhdGVkKCkgewogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBzdGFydFR4KHBtKTsK\nICAgICAgICBBdHRhY2hFIGUgPSBuZXcgQXR0YWNoRSgpOwogICAgICAgIEF0\ndGFjaEIgYiA9IG5ldyBBdHRhY2hCKCk7CiAgICAgICAgZS5zZXRCKGIpOwog\nICAgICAgIHBtLnBlcnNpc3QoZSk7CgogICAgICAgIGVuZFR4KHBtKTsKICAg\nICAgICBlbmRFbShwbSk7CgogICAgICAgIHBtID0gZ2V0UE0oKTsKICAgICAg\nICBzdGFydFR4KHBtKTsKICAgICAgICBhc3NlcnRTaXplKDAsIHBtLmdldE1h\nbmFnZWRPYmplY3RzKCkpOwogICAgICAgIHBtLmNyZWF0ZUV4dGVudChBdHRh\nY2hFLmNsYXNzLCB0cnVlKS5pdGVyYXRvcigpLm5leHQoKTsKICAgICAgICAv\nLyBtYWtlIHN1cmUgcmVsYXRpb24gaXMgbm90IGxvYWRlZAogICAgICAgIGFz\nc2VydFNpemUoMSwgcG0uZ2V0TWFuYWdlZE9iamVjdHMoKSk7CiAgICAgICAg\ncm9sbGJhY2tUeChwbSk7CiAgICAgICAgZW5kRW0ocG0pOwoKICAgICAgICBw\nbSA9IGdldFBNKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgLy8g\nbm93IG1ha2Ugc3VyZSB3ZSBsb2FkIHJlbGF0aW9ucwogICAgICAgIHBtLmdl\ndEZldGNoUGxhbigpLmFkZEZldGNoR3JvdXAoImFsbCIpOwogICAgICAgIGFz\nc2VydFNpemUoMCwgcG0uZ2V0TWFuYWdlZE9iamVjdHMoKSk7CiAgICAgICAg\ncG0uY3JlYXRlRXh0ZW50KEF0dGFjaEUuY2xhc3MsIHRydWUpLml0ZXJhdG9y\nKCkubmV4dCgpOwogICAgICAgIC8vIG1ha2Ugc3VyZSByZWxhdGlvbiBpcyBs\nb2FkZWQKICAgICAgICBhc3NlcnRTaXplKDIsIHBtLmdldE1hbmFnZWRPYmpl\nY3RzKCkpOwogICAgICAgIHJvbGxiYWNrVHgocG0pOwogICAgICAgIGVuZEVt\nKHBtKTsKICAgIH0KfQo=\n","encoding":"base64"}

