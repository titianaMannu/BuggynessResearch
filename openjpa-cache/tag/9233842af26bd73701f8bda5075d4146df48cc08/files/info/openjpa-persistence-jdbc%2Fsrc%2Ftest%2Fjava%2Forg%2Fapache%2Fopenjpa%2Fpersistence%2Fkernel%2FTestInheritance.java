{"sha":"0cbf61bf35bb2d6ef55c360aa29e9f0a88229778","node_id":"MDQ6QmxvYjIwNjM2NDowY2JmNjFiZjM1YmIyZDZlZjU1YzM2MGFhMjllOWYwYTg4MjI5Nzc4","size":4774,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0cbf61bf35bb2d6ef55c360aa29e9f0a88229778","content":"LyoKICogVGVzdEluaGVyaXRhbmNlLmphdmEKICoKICogQ3JlYXRlZCBvbiBP\nY3RvYmVyIDEyLCAyMDA2LCAxMTo0NiBBTQogKgogKiBUbyBjaGFuZ2UgdGhp\ncyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFuYWdlcgog\nKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4KICovCi8q\nCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlv\nbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNl\nbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3Ry\naWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0\naW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFT\nRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFj\naGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5\nb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNl\nCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkg\nb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3Jn\nL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBi\neSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICog\nc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlz\ndHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJS\nQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBl\neHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQog\nKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAKICovCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsK\nCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKCgoKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMu\nUnVudGltZVRlc3QxOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmtlcm5lbC5jb21tb24uYXBwcy5SdW50aW1lVGVzdDI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1v\nbi5hcHBzLlJ1bnRpbWVUZXN0MzsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVF1ZXJ5OwoK\ncHVibGljIGNsYXNzIFRlc3RJbmhlcml0YW5jZSBleHRlbmRzIEJhc2VLZXJu\nZWxUZXN0IHsKCiAgICAvKioKICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFu\nY2Ugb2YgVGVzdEluaGVyaXRhbmNlCiAgICAgKi8KICAgIHB1YmxpYyBUZXN0\nSW5oZXJpdGFuY2UoKSB7CiAgICB9CgogICAgcHVibGljIFRlc3RJbmhlcml0\nYW5jZShTdHJpbmcgbmFtZSkgewogICAgICAgIHN1cGVyKG5hbWUpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkKICAgICAgICB0aHJvd3MgRXhj\nZXB0aW9uIHsKICAgICAgICBzdXBlci5zZXRVcChSdW50aW1lVGVzdDEuY2xh\nc3MsIFJ1bnRpbWVUZXN0Mi5jbGFzcywgUnVudGltZVRlc3QzLmNsYXNzKTsK\nCiAgICAgICAgLy8gY3JlYXRlIHNvbWUgaW5zdGFuY2VzIHRvIHF1ZXJ5IG9u\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOwog\nICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIHBtLnBlcnNpc3QobmV3IFJ1\nbnRpbWVUZXN0MSgiUnVudGltZVRlc3QxLWluc3RhbmNlIiwgMikpOwogICAg\nICAgIHBtLnBlcnNpc3QobmV3IFJ1bnRpbWVUZXN0MigiUnVudGltZVRlc3Qy\nLWluc3RhbmNlIiwgMykpOwogICAgICAgIHBtLnBlcnNpc3QobmV3IFJ1bnRp\nbWVUZXN0MygiUnVudGltZVRlc3QzLWluc3RhbmNlIiwgNCkpOwogICAgICAg\nIGVuZFR4KHBtKTsKICAgICAgICBlbmRFbShwbSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUZXN0cyB0aGF0IHdlIGNhbiBnZXQgYWxsIHRocmVlIG9iamVj\ndHMgdmlhIGFuIGV4dGVudC4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVz\ndEdldEFsbFJ1bnRpbWVUZXN0MXMoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPSBnZXRQTSgpOwogICAgICAgIE9wZW5KUEFRdWVyeSBx\nID0gcG0uY3JlYXRlUXVlcnkoIlNFTEVDVCBvIEZST00gUnVudGltZVRlc3Qx\nIG8iKTsKICAgICAgICBDb2xsZWN0aW9uIGMgPSBxLmdldFJlc3VsdExpc3Qo\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgYy5zaXplKCkpOwogICAgICAg\nIGVuZEVtKHBtKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIHRoYXQg\nd2UgY2FuIGdldCBhbGwgUnVudGltZVRlc3QyIG9iamVjdHMgdmlhIGFuIGV4\ndGVudC4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdEdldEFsbFJ1bnRp\nbWVUZXN0MnMoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPSBnZXRQTSgpOwogICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRl\nUXVlcnkoIlNFTEVDVCBvIEZST00gUnVudGltZVRlc3QyIG8iKTsKICAgICAg\nICBDb2xsZWN0aW9uIGMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgYy5zaXplKCkpOwogICAgICAgIGVuZEVtKHBtKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIHRoYXQgd2UgY2FuIGdldCBh\nbGwgUnVudGltZVRlc3QzIG9iamVjdHMgdmlhIGFuIGV4dGVudC4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgdGVzdEdldEFsbFJ1bnRpbWVUZXN0M3MoKSB7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOwog\nICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlUXVlcnkoIlNFTEVD\nVCBvIEZST00gUnVudGltZVRlc3QzIG8iKTsKICAgICAgICBDb2xsZWN0aW9u\nIGMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgYy5zaXplKCkpOwogICAgICAgIGVuZEVtKHBtKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRlc3RzIHRoYXQgd2UgY2FuIGdldCBqdXN0IFJ1bnRpbWVU\nZXN0MXMgdmlhIGFuIGV4dGVudC4KICAgICAqLwogICAgcHVibGljIHZvaWQg\ndGVzdEdldEp1c3RSdW50aW1lVGVzdDFzKCkgewogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBPcGVuSlBBUXVl\ncnkgcSA9IHBtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgbyBGUk9NIFJ1bnRpbWVU\nZXN0MSBvIik7CiAgICAgICAgcS5zZXRTdWJjbGFzc2VzKGZhbHNlKTsKCi8v\nICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZU5hdGl2ZVF1ZXJ5\nKCIiLFJ1bnRpbWVUZXN0MS5jbGFzcyk7Ci8vICAgICAgICBGSVhNRSBqdGhv\nbWFzCi8vICAgICAgICBxLnNldENhbmRpZGF0ZXMocG0uZ2V0RXh0ZW50KFJ1\nbnRpbWVUZXN0MS5jbGFzcywgZmFsc2UpKTsKICAgICAgICBDb2xsZWN0aW9u\nIGMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgYy5zaXplKCkpOwogICAgICAgIGVuZEVtKHBtKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRlc3RzIHRoYXQgd2UgY2FuIGdldCBqdXN0IFJ1bnRpbWVU\nZXN0MnMgdmlhIGFuIGV4dGVudC4KICAgICAqLwogICAgcHVibGljIHZvaWQg\ndGVzdEdldEp1c3RSdW50aW1lVGVzdDJzKCkgewogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBPcGVuSlBBUXVl\ncnkgcSA9IHBtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgbyBGUk9NIFJ1bnRpbWVU\nZXN0MiBvIik7CiAgICAgICAgcS5zZXRTdWJjbGFzc2VzKGZhbHNlKTsKCi8v\nICAgICAgICBGSVhNRSBqdGhvbWFzICAgICAgICAKLy8gICAgICAgIE9wZW5K\nUEFRdWVyeSBxID0gcG0uY3JlYXRlTmF0aXZlUXVlcnkoIiIsUnVudGltZVRl\nc3QyLmNsYXNzKTsKLy8gICAgICAgIHEuc2V0Q2FuZGlkYXRlcyhwbS5jcmVh\ndGVFeHRlbnQoUnVudGltZVRlc3QyLmNsYXNzLCBmYWxzZSkpOwogICAgICAg\nIENvbGxlY3Rpb24gYyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFz\nc2VydEVxdWFscygxLCBjLnNpemUoKSk7CiAgICAgICAgZW5kRW0ocG0pOwog\nICAgfQoKICAgIC8qKgogICAgICogVGVzdHMgdGhhdCB3ZSBjYW4gZ2V0IGp1\nc3QgUnVudGltZVRlc3QzcyB2aWEgYW4gZXh0ZW50LgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0R2V0SnVzdFJ1bnRpbWVUZXN0MygpIHsKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7CiAgICAgICAg\nT3BlbkpQQVF1ZXJ5IHEgPSBwbS5jcmVhdGVRdWVyeSgiU0VMRUNUIG8gRlJP\nTSBSdW50aW1lVGVzdDMgbyIpOwogICAgICAgIHEuc2V0U3ViY2xhc3Nlcyhm\nYWxzZSk7CgovLyAgICAgIEZJWE1FIGp0aG9tYXMKLy8gICAgICAgIE9wZW5K\nUEFRdWVyeSBxID0gcG0uY3JlYXRlTmF0aXZlUXVlcnkoIiIsUnVudGltZVRl\nc3QzLmNsYXNzKTsKLy8gICAgICAgIHEuc2V0Q2FuZGlkYXRlcyhwbS5nZXRF\neHRlbnQoUnVudGltZVRlc3QzLmNsYXNzLCBmYWxzZSkpOwogICAgICAgIENv\nbGxlY3Rpb24gYyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBjLnNpemUoKSk7CiAgICAgICAgZW5kRW0ocG0pOwogICAg\nfQp9Cg==\n","encoding":"base64"}

