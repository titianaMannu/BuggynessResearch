{"sha":"357b7adaa03372717513384f85044a4b7421353e","node_id":"MDQ6QmxvYjIwNjM2NDozNTdiN2FkYWEwMzM3MjcxNzUxMzM4NGY4NTA0NGE0Yjc0MjEzNTNl","size":14582,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/357b7adaa03372717513384f85044a4b7421353e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeTsKCmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuUGFyYW1ldGVyOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuUXVlcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5jcml0\nZXJpYS5Dcml0ZXJpYVF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nY3JpdGVyaWEuUGFyYW1ldGVyRXhwcmVzc2lvbjsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLmNyaXRlcmlhLlByZWRpY2F0ZTsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLmNyaXRlcmlhLlF1ZXJ5QnVpbGRlcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLmNyaXRlcmlhLlJvb3Q7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5tZXRhbW9kZWwuRW50aXR5VHlwZTsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLm1ldGFtb2RlbC5NZXRhbW9kZWw7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5tZXRhbW9kZWwuU2luZ3VsYXJBdHRyaWJ1dGU7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeUxhbmd1YWdlczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuanBxbC5KUFFMUGFy\nc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuUGFyYW1ldGVy\nSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50\nZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3RzIHF1ZXJ5IHBh\ncmFtZXRlcnMuCiAqIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICoKICov\nCnB1YmxpYyBjbGFzcyBUZXN0UXVlcnlQYXJhbWV0ZXJzIGV4dGVuZHMgU2lu\nZ2xlRU1GVGVzdENhc2UgewogICAgcHJpdmF0ZSBzdGF0aWMgT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5U1BJIG9lbWY7CiAgICBwcml2YXRlIEVudGl0\neU1hbmFnZXIgZW07CiAgICAKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewog\nICAgICAgIGlmIChvZW1mID09IG51bGwpIHsKICAgICAgICAgICAgc3VwZXIu\nc2V0VXAoU2ltcGxlRW50aXR5LmNsYXNzLCAib3BlbmpwYS5EeW5hbWljRW5o\nYW5jZW1lbnRBZ2VudCIsICJmYWxzZSIpOwogICAgICAgICAgICBvZW1mID0g\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSlPcGVuSlBBUGVyc2lz\ndGVuY2UuY2FzdChlbWYpOwogICAgICAgIH0KICAgICAgICBlbSA9IG9lbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCB0ZWFyRG93bigpIHsKICAgICAgICAvLyBkbyBub3QgY2xvc2UgdGhl\nIGZhY3RvcnkKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFBvc2l0\naW9uYWxQYXJhbWV0ZXJJbkpQUUxRdWVyeSgpIHsKICAgICAgICBTdHJpbmcg\nanBxbCA9ICJzZWxlY3QgZSBmcm9tIHNpbXBsZSBlIFdIRVJFIGUuaWQ9PzEg\nYW5kIGUubmFtZT0/MiI7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1\nZXJ5KGpwcWwpCiAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigx\nLCAxMDApCiAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigyLCAi\nWFlaIik7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHEuZ2V0\nUGFyYW1ldGVycygpLnNpemUoKSk7CiAgICAgICAgUGFyYW1ldGVyPD8+IHBh\ncmFtMSA9IHEuZ2V0UGFyYW1ldGVyKDEpOwogICAgICAgIFBhcmFtZXRlcjw/\nPiBwYXJhbTIgPSBxLmdldFBhcmFtZXRlcigyKTsKICAgICAgICAKICAgICAg\nICBhc3NlcnRFcXVhbHMoMTAwLCBxLmdldFBhcmFtZXRlclZhbHVlKDEpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMTAwLCBxLmdldFBhcmFtZXRlclZhbHVl\nKHBhcmFtMSkpOwogICAgICAgIGFzc2VydEVxdWFscygiWFlaIiwgcS5nZXRQ\nYXJhbWV0ZXJWYWx1ZSgyKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJYWVoi\nLCBxLmdldFBhcmFtZXRlclZhbHVlKHBhcmFtMikpOwogICAgICAgIAogICAg\nICAgIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0TmFtZWRQYXJhbWV0ZXJJbkpQUUxRdWVyeSgpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9ICJzZWxlY3QgZSBmcm9tIHNpbXBsZSBlIFdIRVJF\nIGUuaWQ9OmlkIGFuZCBlLm5hbWU9Om5hbWUiOwogICAgICAgIFF1ZXJ5IHEg\nPSBlbS5jcmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoImlkIiwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoIm5hbWUiLCAiWFlaIik7CiAgICAgICAgCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIHEuZ2V0UGFyYW1ldGVycygpLnNpemUoKSk7CiAg\nICAgICAgUGFyYW1ldGVyPD8+IHBhcmFtMSA9IHEuZ2V0UGFyYW1ldGVyKCJp\nZCIpOwogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTIgPSBxLmdldFBhcmFt\nZXRlcigibmFtZSIpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygx\nMDAsIHEuZ2V0UGFyYW1ldGVyVmFsdWUoImlkIikpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxMDAsIHEuZ2V0UGFyYW1ldGVyVmFsdWUocGFyYW0xKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJYWVoiLCBxLmdldFBhcmFtZXRlclZhbHVl\nKCJuYW1lIikpOwogICAgICAgIGFzc2VydEVxdWFscygiWFlaIiwgcS5nZXRQ\nYXJhbWV0ZXJWYWx1ZShwYXJhbTIpKTsKICAgICAgICAKICAgICAgICBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVz\ndFBvc2l0aW9uYWxQYXJhbWV0ZXJNaXNzaW5nSW5KUFFMUXVlcnkoKSB7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUgZnJvbSBzaW1wbGUgZSBX\nSEVSRSBlLmlkPT8xIGFuZCBlLm5hbWU9PzIiOwogICAgICAgIFF1ZXJ5IHEg\nPSBlbS5jcmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoMSwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5zZXRQ\nYXJhbWV0ZXIoMiwgIlhZWiIpOwogICAgICAgIAogICAgICAgIGFzc2VydFNl\ndFBhcmFtZXRlckZhaWxzKHEsIDMsIDEwMCk7IC8vIHdyb25nIHBvc2l0aW9u\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3ROYW1lZFBhcmFtZXRl\nck1pc3NpbmdJbkpQUUxRdWVyeSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9\nICJzZWxlY3QgZSBmcm9tIHNpbXBsZSBlIFdIRVJFIGUuaWQ9OmlkIGFuZCBl\nLm5hbWU9Om5hbWUiOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVy\neShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoImlk\nIiwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoIm5h\nbWUiLCAiWFlaIik7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0U2V0UGFyYW1l\ndGVyRmFpbHMocSwgInh5eiIsIDEwMCk7IC8vIHdyb25nIG5hbWUKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdFBvc2l0aW9uYWxQYXJhbWV0ZXJX\ncm9uZ1ZhbHVlSW5KUFFMUXVlcnkoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAic2VsZWN0IGUgZnJvbSBzaW1wbGUgZSBXSEVSRSBlLmlkPT8xIGFuZCBl\nLm5hbWU9PzIiOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShq\ncHFsKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMSwgMTAw\nKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMiwgIlhZWiIp\nOwogICAgICAgIAogICAgICAgIGFzc2VydFNldFBhcmFtZXRlckZhaWxzKHEs\nIDEsICJYWVoiKTsgLy8gd3JvbmcgdmFsdWUKICAgICAgICBhc3NlcnRTZXRQ\nYXJhbWV0ZXJGYWlscyhxLCAyLCAxMDApOyAvLyB3cm9uZyB2YWx1ZQogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TmFtZWRQYXJhbWV0ZXJXcm9u\nZ1ZhbHVlSW5KUFFMUXVlcnkoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nc2VsZWN0IGUgZnJvbSBzaW1wbGUgZSBXSEVSRSBlLmlkPTppZCBhbmQgZS5u\nYW1lPTpuYW1lIjsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnko\nanBxbCkKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJpZCIs\nIDEwMCkKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJuYW1l\nIiwgIlhZWiIpOwogICAgICAgIAogICAgICAgIGFzc2VydFNldFBhcmFtZXRl\nckZhaWxzKHEsICJpZCIsICJYWVoiKTsgLy8gd3JvbmcgdmFsdWUKICAgICAg\nICBhc3NlcnRTZXRQYXJhbWV0ZXJGYWlscyhxLCAibmFtZSIsIDEwMCk7IC8v\nIHdyb25nIHZhbHVlCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFBvc2l0\naW9uYWxQYXJhbWV0ZXJWYWx1ZVR5cGVJbkpQUUxRdWVyeSgpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9ICJzZWxlY3QgZSBmcm9tIHNpbXBsZSBlIFdIRVJF\nIGUuaWQ9PzEgYW5kIGUubmFtZT0/MiI7CiAgICAgICAgUXVlcnkgcSA9IGVt\nLmNyZWF0ZVF1ZXJ5KGpwcWwpCiAgICAgICAgICAgICAgICAgICAgLnNldFBh\ncmFtZXRlcigxLCAxMDApCiAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFt\nZXRlcigyLCAiWFlaIik7CiAgICAgICAgCiAgICAgICAgUGFyYW1ldGVyPD8+\nIHBhcmFtMSA9IHEuZ2V0UGFyYW1ldGVyKDEpOwogICAgICAgIGFzc2VydFRy\ndWUocGFyYW0xIGluc3RhbmNlb2YgUGFyYW1ldGVySW1wbCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKGxvbmcuY2xhc3MsIHBhcmFtMS5nZXRQYXJhbWV0ZXJU\neXBlKCkpOwogICAgICAgIAogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTIg\nPSBxLmdldFBhcmFtZXRlcigyKTsKICAgICAgICBhc3NlcnRUcnVlKHBhcmFt\nMiBpbnN0YW5jZW9mIFBhcmFtZXRlckltcGwpOwogICAgICAgIGFzc2VydEVx\ndWFscyhTdHJpbmcuY2xhc3MsIHBhcmFtMi5nZXRQYXJhbWV0ZXJUeXBlKCkp\nOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TmFtZWRQYXJhbWV0\nZXJWYWx1ZVR5cGVJbkpQUUxRdWVyeSgpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJzZWxlY3QgZSBmcm9tIHNpbXBsZSBlIFdIRVJFIGUuaWQ9OmlkIGFu\nZCBlLm5hbWU9Om5hbWUiOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVR\ndWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIo\nImlkIiwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIo\nIm5hbWUiLCAiWFlaIik7CiAgICAgICAgCiAgICAgICAgUGFyYW1ldGVyPD8+\nIHBhcmFtMSA9IHEuZ2V0UGFyYW1ldGVyKCJpZCIpOwogICAgICAgIGFzc2Vy\ndFRydWUocGFyYW0xIGluc3RhbmNlb2YgUGFyYW1ldGVySW1wbCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKGxvbmcuY2xhc3MsIHBhcmFtMS5nZXRQYXJhbWV0\nZXJUeXBlKCkpOwogICAgICAgIAogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJh\nbTIgPSBxLmdldFBhcmFtZXRlcigibmFtZSIpOwogICAgICAgIGFzc2VydFRy\ndWUocGFyYW0yIGluc3RhbmNlb2YgUGFyYW1ldGVySW1wbCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKFN0cmluZy5jbGFzcywgcGFyYW0yLmdldFBhcmFtZXRl\nclR5cGUoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3ROYW1l\nZFBhcmFtZXRlckluUHJlcGFyZWRRdWVyeSgpIHsKICAgICAgICBTdHJpbmcg\nanBxbCA9ICJzZWxlY3QgeCBmcm9tIHNpbXBsZSB4IFdIRVJFIHguaWQ9Omlk\nIGFuZCB4Lm5hbWU9Om5hbWUiOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVh\ndGVRdWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0\nZXIoImlkIiwgMTAwKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0\nZXIoIm5hbWUiLCAiWFlaIik7CiAgICAgICAgcS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKEpQUUxQYXJzZXIuTEFO\nR19KUFFMLCBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChxKS5nZXRMYW5ndWFn\nZSgpKTsKICAgICAgICAKICAgICAgICBRdWVyeSBxMiA9IGVtLmNyZWF0ZVF1\nZXJ5KGpwcWwpCiAgICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIo\nImlkIiwgMjAwKQogICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVy\nKCJuYW1lIiwgIlpYWSIpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWFs\ncyhRdWVyeUxhbmd1YWdlcy5MQU5HX1BSRVBBUkVEX1NRTCwgT3BlbkpQQVBl\ncnNpc3RlbmNlLmNhc3QocTIpLmdldExhbmd1YWdlKCkpOwogICAgICAgIHEy\nLmdldFJlc3VsdExpc3QoKTsKICAgIH0KICAgIAogICAgLy8tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8g\nU2ltaWxhciB0ZXN0cyB3aXRoIE5hbWVkUXVlcnkKICAgIC8vLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHB1\nYmxpYyB2b2lkIHRlc3RQb3NpdGlvbmFsUGFyYW1ldGVySW5OYW1lZFF1ZXJ5\nKCkgewogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KFNp\nbXBsZUVudGl0eS5OQU1FRF9RVUVSWV9XSVRIX1BPU0lUSU9OQUxfUEFSQU1T\nKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMSwgMTAwKQog\nICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMiwgIlhZWiIpOwog\nICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygyLCBxLmdldFBhcmFtZXRl\ncnMoKS5zaXplKCkpOwogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTEgPSBx\nLmdldFBhcmFtZXRlcigxKTsKICAgICAgICBQYXJhbWV0ZXI8Pz4gcGFyYW0y\nID0gcS5nZXRQYXJhbWV0ZXIoMik7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEwMCwgcS5nZXRQYXJhbWV0ZXJWYWx1ZSgxKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEwMCwgcS5nZXRQYXJhbWV0ZXJWYWx1ZShwYXJhbTEp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlhZWiIsIHEuZ2V0UGFyYW1ldGVy\nVmFsdWUoMikpOwogICAgICAgIGFzc2VydEVxdWFscygiWFlaIiwgcS5nZXRQ\nYXJhbWV0ZXJWYWx1ZShwYXJhbTIpKTsKICAgICAgICAKICAgICAgICBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVz\ndE5hbWVkUGFyYW1ldGVySW5OYW1lZFF1ZXJ5KCkgewogICAgICAgIFF1ZXJ5\nIHEgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KFNpbXBsZUVudGl0eS5OQU1FRF9R\nVUVSWV9XSVRIX05BTUVEX1BBUkFNUykKICAgICAgICAgICAgICAgICAgICAu\nc2V0UGFyYW1ldGVyKCJpZCIsIDEwMCkKICAgICAgICAgICAgICAgICAgICAu\nc2V0UGFyYW1ldGVyKCJuYW1lIiwgIlhZWiIpOwogICAgICAgIAogICAgICAg\nIGFzc2VydEVxdWFscygyLCBxLmdldFBhcmFtZXRlcnMoKS5zaXplKCkpOwog\nICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTEgPSBxLmdldFBhcmFtZXRlcigi\naWQiKTsKICAgICAgICBQYXJhbWV0ZXI8Pz4gcGFyYW0yID0gcS5nZXRQYXJh\nbWV0ZXIoIm5hbWUiKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMo\nMTAwLCBxLmdldFBhcmFtZXRlclZhbHVlKCJpZCIpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMTAwLCBxLmdldFBhcmFtZXRlclZhbHVlKHBhcmFtMSkpOwog\nICAgICAgIGFzc2VydEVxdWFscygiWFlaIiwgcS5nZXRQYXJhbWV0ZXJWYWx1\nZSgibmFtZSIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlhZWiIsIHEuZ2V0\nUGFyYW1ldGVyVmFsdWUocGFyYW0yKSk7CiAgICAgICAgCiAgICAgICAgcS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RQb3NpdGlvbmFsUGFyYW1ldGVyTWlzc2luZ0luTmFtZWRRdWVyeSgpIHsK\nICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlTmFtZWRRdWVyeShTaW1wbGVF\nbnRpdHkuTkFNRURfUVVFUllfV0lUSF9QT1NJVElPTkFMX1BBUkFNUykKICAg\nICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKDEsIDEwMCkKICAgICAg\nICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKDIsICJYWVoiKTsKICAgICAg\nICAKICAgICAgICBhc3NlcnRTZXRQYXJhbWV0ZXJGYWlscyhxLCAzLCAxMDAp\nOyAvLyB3cm9uZyBwb3NpdGlvbgogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0TmFtZWRQYXJhbWV0ZXJNaXNzaW5nSW5OYW1lZFF1ZXJ5KCkgewog\nICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KFNpbXBsZUVu\ndGl0eS5OQU1FRF9RVUVSWV9XSVRIX05BTUVEX1BBUkFNUykKICAgICAgICAg\nICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJpZCIsIDEwMCkKICAgICAgICAg\nICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIlhZWiIpOwogICAg\nICAgIAogICAgICAgIGFzc2VydFNldFBhcmFtZXRlckZhaWxzKHEsICJ4eXoi\nLCAxMDApOyAvLyB3cm9uZyBuYW1lCiAgICB9CiAgICAKICAgIHB1YmxpYyB2\nb2lkIHRlc3RQb3NpdGlvbmFsUGFyYW1ldGVyV3JvbmdWYWx1ZUluTmFtZWRR\ndWVyeSgpIHsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlTmFtZWRRdWVy\neShTaW1wbGVFbnRpdHkuTkFNRURfUVVFUllfV0lUSF9QT1NJVElPTkFMX1BB\nUkFNUykKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKDEsIDEw\nMCkKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKDIsICJYWVoi\nKTsKICAgICAgICAKICAgICAgICBhc3NlcnRTZXRQYXJhbWV0ZXJGYWlscyhx\nLCAxLCAiWFlaIik7IC8vIHdyb25nIHZhbHVlCiAgICAgICAgYXNzZXJ0U2V0\nUGFyYW1ldGVyRmFpbHMocSwgMiwgMTAwKTsgLy8gd3JvbmcgdmFsdWUKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE5hbWVkUGFyYW1ldGVyV3Jv\nbmdWYWx1ZUluTmFtZWRRdWVyeSgpIHsKICAgICAgICBRdWVyeSBxID0gZW0u\nY3JlYXRlTmFtZWRRdWVyeShTaW1wbGVFbnRpdHkuTkFNRURfUVVFUllfV0lU\nSF9OQU1FRF9QQVJBTVMpCiAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFt\nZXRlcigiaWQiLCAxMDApCiAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFt\nZXRlcigibmFtZSIsICJYWVoiKTsKICAgICAgICAKICAgICAgICBhc3NlcnRT\nZXRQYXJhbWV0ZXJGYWlscyhxLCAiaWQiLCAiWFlaIik7IC8vIHdyb25nIHZh\nbHVlCiAgICAgICAgYXNzZXJ0U2V0UGFyYW1ldGVyRmFpbHMocSwgIm5hbWUi\nLCAxMDApOyAvLyB3cm9uZyB2YWx1ZQogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RQb3NpdGlvbmFsUGFyYW1ldGVyVmFsdWVUeXBlSW5OYW1lZFF1ZXJ5\nKCkgewogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KFNp\nbXBsZUVudGl0eS5OQU1FRF9RVUVSWV9XSVRIX1BPU0lUSU9OQUxfUEFSQU1T\nKQogICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMSwgMTAwKQog\nICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMiwgIlhZWiIpOwog\nICAgICAgIAogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTEgPSBxLmdldFBh\ncmFtZXRlcigxKTsKICAgICAgICBhc3NlcnRUcnVlKHBhcmFtMSBpbnN0YW5j\nZW9mIFBhcmFtZXRlckltcGwpOwogICAgICAgIGFzc2VydEVxdWFscyhsb25n\nLmNsYXNzLCBwYXJhbTEuZ2V0UGFyYW1ldGVyVHlwZSgpKTsKICAgICAgICAK\nICAgICAgICBQYXJhbWV0ZXI8Pz4gcGFyYW0yID0gcS5nZXRQYXJhbWV0ZXIo\nMik7CiAgICAgICAgYXNzZXJ0VHJ1ZShwYXJhbTIgaW5zdGFuY2VvZiBQYXJh\nbWV0ZXJJbXBsKTsKICAgICAgICBhc3NlcnRFcXVhbHMoU3RyaW5nLmNsYXNz\nLCBwYXJhbTIuZ2V0UGFyYW1ldGVyVHlwZSgpKTsKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgdGVzdE5hbWVkUGFyYW1ldGVyVmFsdWVUeXBlSW5OYW1l\nZFF1ZXJ5KCkgewogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVOYW1lZFF1\nZXJ5KFNpbXBsZUVudGl0eS5OQU1FRF9RVUVSWV9XSVRIX05BTUVEX1BBUkFN\nUykKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJpZCIsIDEw\nMCkKICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJuYW1lIiwg\nIlhZWiIpOwogICAgICAgIAogICAgICAgIFBhcmFtZXRlcjw/PiBwYXJhbTEg\nPSBxLmdldFBhcmFtZXRlcigiaWQiKTsKICAgICAgICBhc3NlcnRUcnVlKHBh\ncmFtMSBpbnN0YW5jZW9mIFBhcmFtZXRlckltcGwpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhsb25nLmNsYXNzLCBwYXJhbTEuZ2V0UGFyYW1ldGVyVHlwZSgp\nKTsKICAgICAgICAKICAgICAgICBQYXJhbWV0ZXI8Pz4gcGFyYW0yID0gcS5n\nZXRQYXJhbWV0ZXIoIm5hbWUiKTsKICAgICAgICBhc3NlcnRUcnVlKHBhcmFt\nMiBpbnN0YW5jZW9mIFBhcmFtZXRlckltcGwpOwogICAgICAgIGFzc2VydEVx\ndWFscyhTdHJpbmcuY2xhc3MsIHBhcmFtMi5nZXRQYXJhbWV0ZXJUeXBlKCkp\nOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q3JpdGVyaWFRdWVy\neVdpdGhOYW1lZFBhcmFtZXRlcigpIHsKICAgICAgICBNZXRhbW9kZWwgbW9k\nZWwgPSBvZW1mLmdldE1ldGFtb2RlbCgpOwogICAgICAgIEVudGl0eVR5cGU8\nU2ltcGxlRW50aXR5PiBlbnRpdHkgPSBtb2RlbC5lbnRpdHkoU2ltcGxlRW50\naXR5LmNsYXNzKTsKICAgICAgICBTaW5ndWxhckF0dHJpYnV0ZTxTaW1wbGVF\nbnRpdHksIExvbmc+IGlkID0gCiAgICAgICAgICAgIChTaW5ndWxhckF0dHJp\nYnV0ZTxTaW1wbGVFbnRpdHksIExvbmc+KWVudGl0eS5nZXRTaW5ndWxhckF0\ndHJpYnV0ZSgiaWQiKTsKICAgICAgICBTaW5ndWxhckF0dHJpYnV0ZTxTaW1w\nbGVFbnRpdHksIFN0cmluZz4gbmFtZSA9IAogICAgICAgICAgICAoU2luZ3Vs\nYXJBdHRyaWJ1dGU8U2ltcGxlRW50aXR5LCBTdHJpbmc+KWVudGl0eS5nZXRT\naW5ndWxhckF0dHJpYnV0ZSgibmFtZSIpOwogICAgICAgIAogICAgICAgIFF1\nZXJ5QnVpbGRlciBjYiA9IG9lbWYuZ2V0UXVlcnlCdWlsZGVyKCk7CiAgICAg\nICAgQ3JpdGVyaWFRdWVyeTxTaW1wbGVFbnRpdHk+IGMgPSBjYi5jcmVhdGVR\ndWVyeShTaW1wbGVFbnRpdHkuY2xhc3MpOwogICAgICAgIFJvb3Q8U2ltcGxl\nRW50aXR5PiByb290ID0gYy5mcm9tKFNpbXBsZUVudGl0eS5jbGFzcyk7CiAg\nICAgICAgUGFyYW1ldGVyRXhwcmVzc2lvbjxMb25nPiBwYXJhbTEgPSBjYi5w\nYXJhbWV0ZXIobG9uZy5jbGFzcywgImlkIik7CiAgICAgICAgUGFyYW1ldGVy\nRXhwcmVzc2lvbjxTdHJpbmc+IHBhcmFtMiA9IGNiLnBhcmFtZXRlcihTdHJp\nbmcuY2xhc3MsICJuYW1lIik7CiAgICAgICAgUHJlZGljYXRlIHAxID0gY2Iu\nZXF1YWwocm9vdC5nZXQoaWQpLCBwYXJhbTEpOwogICAgICAgIFByZWRpY2F0\nZSBwMiA9IGNiLmVxdWFsKHJvb3QuZ2V0KG5hbWUpLCBwYXJhbTIpOwogICAg\nICAgIGMud2hlcmUoY2IuYW5kKHAxLHAyKSk7CiAgICAgICAgCiAgICAgICAg\nUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGMpOwogICAgICAgIGFzc2VydEVx\ndWFscygyLCBxLmdldFBhcmFtZXRlcnMoKS5zaXplKCkpOwogICAgICAgIGFz\nc2VydFRydWUocS5nZXRQYXJhbWV0ZXJzKCkuY29udGFpbnMocGFyYW0xKSk7\nCiAgICAgICAgYXNzZXJ0VHJ1ZShxLmdldFBhcmFtZXRlcnMoKS5jb250YWlu\ncyhwYXJhbTIpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHEuZ2V0UGFyYW1l\ndGVyKCJpZCIpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHEuZ2V0UGFyYW1l\ndGVyKCJuYW1lIikpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nQ3JpdGVyaWFRdWVyeVdpdGhVbm5hbWVkUGFyYW1ldGVyKCkgewogICAgICAg\nIE1ldGFtb2RlbCBtb2RlbCA9IG9lbWYuZ2V0TWV0YW1vZGVsKCk7CiAgICAg\nICAgRW50aXR5VHlwZTxTaW1wbGVFbnRpdHk+IGVudGl0eSA9IG1vZGVsLmVu\ndGl0eShTaW1wbGVFbnRpdHkuY2xhc3MpOwogICAgICAgIFNpbmd1bGFyQXR0\ncmlidXRlPFNpbXBsZUVudGl0eSwgTG9uZz4gaWQgPSAKICAgICAgICAgICAg\nKFNpbmd1bGFyQXR0cmlidXRlPFNpbXBsZUVudGl0eSwgTG9uZz4pZW50aXR5\nLmdldFNpbmd1bGFyQXR0cmlidXRlKCJpZCIpOwogICAgICAgIFNpbmd1bGFy\nQXR0cmlidXRlPFNpbXBsZUVudGl0eSwgU3RyaW5nPiBuYW1lID0gCiAgICAg\nICAgICAgIChTaW5ndWxhckF0dHJpYnV0ZTxTaW1wbGVFbnRpdHksIFN0cmlu\nZz4pZW50aXR5LmdldFNpbmd1bGFyQXR0cmlidXRlKCJuYW1lIik7CiAgICAg\nICAgCiAgICAgICAgUXVlcnlCdWlsZGVyIGNiID0gb2VtZi5nZXRRdWVyeUJ1\naWxkZXIoKTsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFNpbXBsZUVudGl0eT4g\nYyA9IGNiLmNyZWF0ZVF1ZXJ5KFNpbXBsZUVudGl0eS5jbGFzcyk7CiAgICAg\nICAgUm9vdDxTaW1wbGVFbnRpdHk+IHJvb3QgPSBjLmZyb20oU2ltcGxlRW50\naXR5LmNsYXNzKTsKICAgICAgICBQYXJhbWV0ZXJFeHByZXNzaW9uPExvbmc+\nIHBhcmFtMSA9IGNiLnBhcmFtZXRlcihsb25nLmNsYXNzKTsKICAgICAgICBQ\nYXJhbWV0ZXJFeHByZXNzaW9uPFN0cmluZz4gcGFyYW0yID0gY2IucGFyYW1l\ndGVyKFN0cmluZy5jbGFzcyk7CiAgICAgICAgUHJlZGljYXRlIHAxID0gY2Iu\nZXF1YWwocm9vdC5nZXQoaWQpLCBwYXJhbTEpOwogICAgICAgIFByZWRpY2F0\nZSBwMiA9IGNiLmVxdWFsKHJvb3QuZ2V0KG5hbWUpLCBwYXJhbTIpOwogICAg\nICAgIGMud2hlcmUoY2IuYW5kKHAxLHAyKSk7CiAgICAgICAgCiAgICAgICAg\nUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGMpOwogICAgICAgIGFzc2VydEVx\ndWFscygyLCBxLmdldFBhcmFtZXRlcnMoKS5zaXplKCkpOwogICAgICAgIGFz\nc2VydFRydWUocS5nZXRQYXJhbWV0ZXJzKCkuY29udGFpbnMocGFyYW0xKSk7\nCiAgICAgICAgYXNzZXJ0VHJ1ZShxLmdldFBhcmFtZXRlcnMoKS5jb250YWlu\ncyhwYXJhbTIpKTsKICAgIH0KCiAgICAKICAgIAogICAgdm9pZCBhc3NlcnRT\nZXRQYXJhbWV0ZXJGYWlscyhRdWVyeSBxLCBTdHJpbmcgbmFtZSwgT2JqZWN0\nIHYpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBxLnNldFBhcmFtZXRl\ncihuYW1lLCB2KTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgIiArIEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5nZXROYW1lKCkpOwogICAg\nICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgIC8vIGdvb2QKICAgICAgICAgICAgU3lzdGVtLmVyci5wcmlu\ndGxuKCJGb2xsb3dpbmcgaXMgZXhwZWNldGVkIGV4Y2VwdGlvbiwgcHJpbnRp\nbmcgdG8gdmVyaWZ5IGVycm9yIG1lc3NhZ2UiKTsKICAgICAgICAgICAgU3lz\ndGVtLmVyci5wcmludGxuKGUpOwogICAgICAgIH0gCiAgICB9CiAgICAKICAg\nIHZvaWQgYXNzZXJ0U2V0UGFyYW1ldGVyRmFpbHMoUXVlcnkgcSwgaW50IHBv\ncywgT2JqZWN0IHYpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBxLnNl\ndFBhcmFtZXRlcihwb3MsIHYpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3Rl\nZCAiICsgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmdldE5hbWUo\nKSk7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgLy8gZ29vZAogICAgICAgICAgICBTeXN0ZW0u\nZXJyLnByaW50bG4oIkZvbGxvd2luZyBpcyBleHBlY2V0ZWQgZXhjZXB0aW9u\nLCBwcmludGluZyB0byB2ZXJpZnkgZXJyb3IgbWVzc2FnZSIpOwogICAgICAg\nICAgICBTeXN0ZW0uZXJyLnByaW50bG4oZSk7CiAgICAgICAgfSAKICAgIH0K\nfQo=\n","encoding":"base64"}

