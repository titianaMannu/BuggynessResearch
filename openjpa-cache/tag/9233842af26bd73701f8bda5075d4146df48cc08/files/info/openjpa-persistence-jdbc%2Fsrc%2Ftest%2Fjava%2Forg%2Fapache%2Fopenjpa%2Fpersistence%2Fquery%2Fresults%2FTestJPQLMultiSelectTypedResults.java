{"sha":"57b42e2afc976576380d2484d9c2c25611852bad","node_id":"MDQ6QmxvYjIwNjM2NDo1N2I0MmUyYWZjOTc2NTc2MzgwZDI0ODRkOWMyYzI1NjExODUyYmFk","size":6320,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/57b42e2afc976576380d2484d9c2c25611852bad","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnkucmVz\ndWx0czsKCmltcG9ydCBqYXZhLnRleHQuRGF0ZUZvcm1hdDsKaW1wb3J0IGph\ndmEudGV4dC5QYXJzZUV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNo\nU2V0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLlF1ZXJ5OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5jcml0ZXJpYS5QZXJzb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuY3JpdGVyaWEucmVzdWx0cy5CYXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWEucmVzdWx0\ncy5Gb287CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nY3JpdGVyaWEucmVzdWx0cy5Gb29CYXI7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVyaWEucmVzdWx0cy5JdGVtOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNyaXRlcmlhLnJl\nc3VsdHMuT3JkZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuY3JpdGVyaWEucmVzdWx0cy5Qcm9kdWNlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jcml0ZXJpYS5yZXN1bHRzLlNo\nb3A7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVz\ndC5TaW5nbGVFTUZUZXN0Q2FzZTsKCnB1YmxpYyBjbGFzcyBUZXN0SlBRTE11\nbHRpU2VsZWN0VHlwZWRSZXN1bHRzIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENh\nc2UgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBOX09SREVSUyA9\nIDE1OwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IE5fSVRFTVNfUEVS\nX09SREVSID0gMzsKCiAgICAvLyB1c2Ugc2hvcnQgZGF0YSBmb3JtYXQKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZ1tdIE9SREVSX0RBVEVTID0K\nICAgICAgICB7ICIzLzEyLzIwMDggMTowMCBQTSIsICIxMC8wMS8yMDA4IDE6\nNTEgQU0iLCAiMTIvMTIvMjAwOCAxMDowMSBBTSIsICI1LzIxLzIwMDkgMzoy\nMyBQTSIgfTsKCiAgICBEYXRlRm9ybWF0IGRmID0gRGF0ZUZvcm1hdC5nZXRJ\nbnN0YW5jZSgpOyAvLyB1c2VzIFNIT1JUIGRhdGVmb3JtYXQgYnkgZGVmYXVs\ndAoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7\nCiAgICAgICAgc2V0VXAoQ0xFQVJfVEFCTEVTLCBPcmRlci5jbGFzcywgSXRl\nbS5jbGFzcywgU2hvcC5jbGFzcywgUHJvZHVjZXIuY2xhc3MsCiAgICAgICAg\nICAgICAgUGVyc29uLmNsYXNzLCBGb28uY2xhc3MsIEJhci5jbGFzcywKICAg\nICAgICAgICAgICJvcGVuanBhLkR5bmFtaWNFbmhhbmNlckFnZW50IiwgImZh\nbHNlIik7CiAgICAgICAgcG9wdWxhdGUoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBwb3B1bGF0ZSgpIHRocm93cyBQYXJzZUV4Y2VwdGlvbiB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAg\nICAgIFNob3AgcyA9IG5ldyBTaG9wKCk7CiAgICAgICAgT3JkZXIgb3JkZXI7\nCiAgICAgICAgSXRlbSBpdGVtOwogICAgICAgIFByb2R1Y2VyIHA7CgogICAg\nICAgIHMuc2V0SWQoMSk7CiAgICAgICAgcy5zZXROYW1lKCJlQmF5LmNvbSIp\nOwogICAgICAgIHMuc2V0T3JkZXJzKG5ldyBIYXNoU2V0PE9yZGVyPigpKTsK\nCiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gTl9PUkRFUlM7IGkrKykg\newogICAgICAgICAgICBvcmRlciA9IG5ldyBPcmRlcigpOwogICAgICAgICAg\nICBvcmRlci5zZXRJZChpKTsKICAgICAgICAgICAgb3JkZXIuc2V0RGF0ZShk\nZi5wYXJzZShPUkRFUl9EQVRFU1tpICUgT1JERVJfREFURVMubGVuZ3RoXSkp\nOwogICAgICAgICAgICBvcmRlci5zZXRGaWxsZWQoaSAlIDIgPT0gMCA/IHRy\ndWUgOiBmYWxzZSk7CiAgICAgICAgICAgIG9yZGVyLnNldFNob3Aocyk7CiAg\nICAgICAgICAgIG9yZGVyLnNldEl0ZW1zKG5ldyBIYXNoU2V0PEl0ZW0+KCkp\nOwogICAgICAgICAgICBzLmdldE9yZGVycygpLmFkZChvcmRlcik7CiAgICAg\nICAgICAgIGZvciAoaW50IGogPSAxOyBqIDw9IE5fSVRFTVNfUEVSX09SREVS\nOyBqKyspIHsKICAgICAgICAgICAgICAgIGl0ZW0gPSBuZXcgSXRlbSgpOwog\nICAgICAgICAgICAgICAgaXRlbS5zZXRPcmRlcihvcmRlcik7CiAgICAgICAg\nICAgICAgICBvcmRlci5nZXRJdGVtcygpLmFkZChpdGVtKTsKICAgICAgICAg\nICAgICAgIHAgPSBuZXcgUHJvZHVjZXIoKTsKICAgICAgICAgICAgICAgIHAu\nc2V0TmFtZSgiZmlsbGVyIik7CiAgICAgICAgICAgICAgICBwLnNldEl0ZW0o\naXRlbSk7CiAgICAgICAgICAgICAgICBpdGVtLnNldFByb2R1Y3QocCk7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZW0ucGVyc2lzdChzKTsK\nICAgICAgICBQZXJzb24gcGVyc29uID0gbmV3IFBlcnNvbigiVGVzdCBSZXN1\nbHQgU2hhcGUiKTsKICAgICAgICBlbS5wZXJzaXN0KHBlcnNvbik7CiAgICAg\nICAgCiAgICAgICAgRm9vIGZvbyA9IG5ldyBGb28oMTAwTCwgIlRlc3QgRm9v\nIik7CiAgICAgICAgQmFyIGJhciA9IG5ldyBCYXIoMjAwTCwgIlRlc3QgQmFy\nIik7CiAgICAgICAgZm9vLnNldEJhcihiYXIpOwogICAgICAgIGVtLnBlcnNp\nc3QoZm9vKTsKICAgICAgICBlbS5wZXJzaXN0KGJhcik7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgc3VwZXIudGVhckRvd24oKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0TXVsdGlwbGVDb25zdHJ1Y3RvcigpIHsKICAg\nICAgICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNUIE5FVyBGb28oZi5maWQsZi5m\naW50KSwgYiwgTkVXIEZvb0JhcihmLmZpZCwgYi5iaWQpICIgKwogICAgICAg\nICAgICAgICAgICAgICJmcm9tIEZvbyBmIEpPSU4gZi5iYXIgYiBXSEVSRSBm\nLmJhcj1iIjsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBRdWVyeSBqcHFsUXVlcnkgPSBl\nbS5jcmVhdGVRdWVyeShxdWVyeSk7CiAgICAgICAgTGlzdDxPYmplY3RbXT4g\ncmVzdWx0ID0ganBxbFF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAg\nYXNzZXJ0RmFsc2UocmVzdWx0LmlzRW1wdHkoKSk7CiAgICAgICAgZm9yIChP\nYmplY3RbXSByb3cgOiByZXN1bHQpIHsKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKDMsIHJvdy5sZW5ndGgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKCIw\nLXRoIGVsZW1lbnQgIiArIHJvd1swXS5nZXRDbGFzcygpICsgIiBpcyBub3Qg\nRm9vIiwgcm93WzBdIGluc3RhbmNlb2YgRm9vKTsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZSgiMS1zdCBlbGVtZW50ICIgKyByb3dbMV0uZ2V0Q2xhc3MoKSAr\nICIgaXMgbm90IEJhciIsIHJvd1sxXSBpbnN0YW5jZW9mIEJhcik7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoIjItbmQgZWxlbWVudCAiICsgcm93WzJdLmdl\ndENsYXNzKCkgKyAiIGlzIG5vdCBGb29CYXIiLCByb3dbMl0gaW5zdGFuY2Vv\nZiBGb29CYXIpOwogICAgICAgIH0KICAgICAgICAKICAgIH0KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RNdWx0aXBsZUNvbnN0cnVjdG9yTWl4V2l0aE11bHRpU2Vs\nZWN0KCkgewogICAgICAgIFN0cmluZyBxdWVyeSA9ICJTRUxFQ1QgTkVXIFBl\ncnNvbihwLm5hbWUpLCBwLmlkLCBORVcgUGVyc29uKHAubmFtZSksIHAubmFt\nZSBGUk9NIFBlcnNvbiBwIE9SREVSIEJZIHAubmFtZSI7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgUXVlcnkganBxbFF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkp\nOwogICAgICAgIExpc3Q8T2JqZWN0W10+IHJlc3VsdCA9IGpwcWxRdWVyeS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0VHJ1ZSghcmVzdWx0Lmlz\nRW1wdHkoKSk7CiAgICAgICAgZm9yIChPYmplY3RbXSByb3cgOiByZXN1bHQp\nIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHJvdy5sZW5ndGgpOwog\nICAgICAgICAgICAKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKFBlcnNvbi5j\nbGFzcywgIHJvd1swXS5nZXRDbGFzcygpKTsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKEludGVnZXIuY2xhc3MsIHJvd1sxXS5nZXRDbGFzcygpKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKFBlcnNvbi5jbGFzcywgIHJvd1syXS5n\nZXRDbGFzcygpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKFN0cmluZy5j\nbGFzcywgIHJvd1szXS5nZXRDbGFzcygpKTsKICAgICAgICAgICAgCiAgICAg\nICAgICAgIGFzc2VydEVxdWFscygoKFBlcnNvbilyb3dbMF0pLmdldE5hbWUo\nKSwgKChQZXJzb24pcm93WzJdKS5nZXROYW1lKCkpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoKChQZXJzb24pcm93WzBdKS5nZXROYW1lKCksIHJvd1sz\nXSk7CiAgICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBUZXN0Y2FzZSB0\nbyB2ZXJpZnkgdGhhdCBzZWxlY3RpbmcgbXVsdGlwbGUgcmVzdWx0cyBpbiBh\nIHZhcmlldHkgb2Ygd2F5cyByZXR1cm5zIHRoZSBzYW1lIHJlc3VsdHMuIFJl\nc3VsdHMgYXJlCiAgICAgKiByZXR1cm5lZCB2aWEgYSBub3JtYWwgT2JqZWN0\nIFtdIChKUFFMKS4KICAgICAqIAogICAgICogQHRocm93cyBFeGNlcHRpb24K\nICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdE11bHRpU2VsZWN0KCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gZ2V0IHJlc3VsdHMgZnJvbSB0\ncmFkaXRpb25hbCBKUFFMCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgUXVlcnkganBxbFF1\nZXJ5ID0KICAgICAgICAgICAgZW0uY3JlYXRlUXVlcnkoIlNFTEVDVCBvLCBw\nIGZyb20gT3JkZXIgbyBKT0lOIG8uaXRlbXMgaSBKT0lOIGkucHJvZHVjZXIg\ncCBXSEVSRSBvLmZpbGxlZCA9IHRydWUiKTsKICAgICAgICAvLyBkb24ndCBz\ndXBwcmVzcyB3YXJuaW5ncy4KICAgICAgICBMaXN0PE9iamVjdFtdPiBqcHFs\nUmVzdWx0cyA9IGpwcWxRdWVyeS5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAg\nIGFzc2VydEVxdWFscyhOX09SREVSUyAvIDIgKiBOX0lURU1TX1BFUl9PUkRF\nUiwganBxbFJlc3VsdHMuc2l6ZSgpKTsKCiAgICAgICAgZm9yIChPYmplY3Rb\nXSBvcyA6IGpwcWxSZXN1bHRzKSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncygyLCBvcy5sZW5ndGgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKG9zWzBd\nIGluc3RhbmNlb2YgT3JkZXIpOwogICAgICAgICAgICBhc3NlcnRUcnVlKG9z\nWzFdIGluc3RhbmNlb2YgUHJvZHVjZXIpOwogICAgICAgIH0KCiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KfQo=\n","encoding":"base64"}

