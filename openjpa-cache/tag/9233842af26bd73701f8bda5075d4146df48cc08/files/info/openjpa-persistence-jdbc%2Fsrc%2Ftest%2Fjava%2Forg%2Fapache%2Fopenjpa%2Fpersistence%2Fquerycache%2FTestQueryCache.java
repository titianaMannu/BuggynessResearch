{"sha":"4780eac17fe1ea1dab3dc3a78586d5e5051e8269","node_id":"MDQ6QmxvYjIwNjM2NDo0NzgwZWFjMTdmZTFlYTFkYWIzZGMzYTc4NTg2ZDVlNTA1MWU4MjY5","size":5464,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4780eac17fe1ea1dab3dc3a78586d5e5051e8269","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnlj\nYWNoZTsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuTmFtZWRRdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnljYWNo\nZS5jb21tb24uYXBwcy5FbnRpdHkxOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLnF1ZXJ5Y2FjaGUuY29tbW9uLmFwcHMuRW50aXR5\nMjsKCkBOYW1lZFF1ZXJ5KG5hbWUgPSAic2V0UGFyYW0xIiwKICAgIHF1ZXJ5\nID0gIlNFTEVDVCBvIEZST00gRW50aXR5MSBvIFdIRVJFIG8ucGsgTElLRSA6\ncGsiKQpwdWJsaWMgY2xhc3MgVGVzdFF1ZXJ5Q2FjaGUgZXh0ZW5kcyBBYnN0\ncmFjdFRlc3RDYXNlIHsKCiAgICBFbnRpdHlNYW5hZ2VyIGVtOwoKICAgIHB1\nYmxpYyBUZXN0UXVlcnlDYWNoZShTdHJpbmcgbmFtZSkgewogICAgICAgIHN1\ncGVyKG5hbWUsICIiKTsKICAgICAgICBTeXN0ZW0uc2V0UHJvcGVydHkoImNh\nY3R1cy5jb250ZXh0VVJMIiwKICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhv\nc3Q6OTAwMC9jYWNoZWNhY3R1cyIpOwogICAgICAgIGVtID0gY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgIH0KCiAgICAvKnB1YmxpYyBzdGF0aWMgVGVz\ndCBzdWl0ZSgpCiAgICB7CiAgICAgICAgU2VydmxldFRlc3RTdWl0ZSBzdWl0\nZSA9IG5ldyBTZXJ2bGV0VGVzdFN1aXRlKCk7CiAgICAgICAgc3VpdGUuYWRk\nVGVzdFN1aXRlKFRlc3RRdWVyeUNhY2hlLmNsYXNzKTsKICAgICAgICByZXR1\ncm4gc3VpdGU7CiAgICB9Ki8KICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewog\nICAgICAgIFN5c3RlbS5zZXRQcm9wZXJ0eSgiY2FjdHVzLmNvbnRleHRVUkwi\nLAogICAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDo5MDAwL2NhY3R1c3dl\nYmFwcCIpOwoKICAgICAgICAvL2RlbGV0ZUFsbChFbnRpdHkyLmNsYXNzKTsK\nICAgICAgICBkZWxldGVBbGwoRW50aXR5MS5jbGFzcyk7CgogICAgICAgIGlu\ndCBpbnN0TnVtID0gMTA7CgogICAgICAgIHN0YXJ0VHgoZW0pOwoKICAgICAg\nICAvL2NyZWF0ZSBhbmQgcGVyc2lzdCBtdWx0aXBsZSBlbnRpdHkxIGluc3Rh\nbmNlcwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5zdE51bTsgaSsr\nKSB7CiAgICAgICAgICAgIEVudGl0eTEgZW50ID0gbmV3IEVudGl0eTEoaSwg\nInN0cmluZyIgKyBpLCBpICsgMik7CiAgICAgICAgICAgIEVudGl0eTIgZW50\nMiA9IG5ldyBFbnRpdHkyKGkgKiAyLCAiZW50MiIgKyBpLCBpKTsKICAgICAg\nICAgICAgZW50LnNldEVudGl0eTJGaWVsZChlbnQyKTsKICAgICAgICAgICAg\nZW0ucGVyc2lzdChlbnQpOwogICAgICAgIH0KCiAgICAgICAgZW5kVHgoZW0p\nOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UmVzdWx0TGlzdCgpIHsKICAgICAgICBlbSA9IGN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgTGlzdCBsaXN0ID0gZW0uY3JlYXRlUXVlcnko\nIlNlbGVjdCBvYmplY3QobykgZnJvbSBFbnRpdHkxIG8iKQogICAgICAgICAg\nICAuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoMTAs\nIGxpc3Quc2l6ZSgpKTsKCiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RHZXRTaW5nbGVMaXN0KCkgewogICAgICAgIGVt\nID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBTdHJpbmcgY3Vy\nciA9IDIgKyAiIjsKCiAgICAgICAgRW50aXR5MSByZXQgPSAoRW50aXR5MSkg\nZW0KICAgICAgICAgICAgLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgbyBGUk9NIEVu\ndGl0eTEgbyBXSEVSRSBvLnBrIExJS0UgOnBrIikKICAgICAgICAgICAgLnNl\ndFBhcmFtZXRlcigicGsiLCBjdXJyKQogICAgICAgICAgICAuZ2V0U2luZ2xl\nUmVzdWx0KCk7CgogICAgICAgIGFzc2VydE5vdE51bGwocmV0KTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoInN0cmluZzIiLCByZXQuZ2V0U3RyaW5nRmllbGQo\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHJldC5nZXRJbnRGaWVsZCgp\nKTsKCiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFeGVjdXRlVXBkYXRlKCkgewogICAgICAgIFN0cmluZyBjdXJyID0g\nMiArICIiOwogICAgICAgIFN0cmluZyBjdXJyMiA9IDIyICsgIiI7CgogICAg\nICAgIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFy\ndFR4KGVtKTsKCiAgICAgICAgRW50aXR5MSBlbnRpdHkxID0gKEVudGl0eTEp\nIGVtCiAgICAgICAgICAgIC5jcmVhdGVRdWVyeSgiU0VMRUNUIG8gRlJPTSBF\nbnRpdHkxIG8gV0hFUkUgby5wayBMSUtFIDpwayIpCiAgICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoInBrIiwgY3VycikKICAgICAgICAgICAgLmdldFNpbmds\nZVJlc3VsdCgpOwoKICAgICAgICBpbnQgcmV0ID0gZW0uY3JlYXRlUXVlcnko\nIkRlbGV0ZSBGUk9NIEVudGl0eTEgbyBXSEVSRSBvLnBrIExJS0UgOnBrIikK\nICAgICAgICAgICAgLnNldFBhcmFtZXRlcigicGsiLCBjdXJyKQogICAgICAg\nICAgICAuZXhlY3V0ZVVwZGF0ZSgpOwogICAgICAgIGFzc2VydEVxdWFscyhy\nZXQsIDEpOwoKICAgICAgICAvLyBjYXNjYWRlIHJlbW92ZSBkb2Vzbid0IHJl\nbW92ZSB0aGUgZW50aXR5MgogICAgICAgIGludCByZXRUbXAgPSBlbS5jcmVh\ndGVRdWVyeSgiRGVsZXRlIEZST00gRW50aXR5MiBvIFdIRVJFIG8ucGsgTElL\nRSA6cGsiKQogICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJwayIsIGVudGl0\neTEuZ2V0RW50aXR5MkZpZWxkKCkuZ2V0UGsoKSkKICAgICAgICAgICAgLmV4\nZWN1dGVVcGRhdGUoKTsKCiAgICAgICAgaW50IHJldDIgPSBlbS5jcmVhdGVR\ndWVyeSgiRGVsZXRlIEZST00gRW50aXR5MSBvIFdIRVJFIG8ucGsgTElLRSA6\ncGsiKQogICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJwayIsIGN1cnIyKQog\nICAgICAgICAgICAuZXhlY3V0ZVVwZGF0ZSgpOwoKICAgICAgICBhc3NlcnRF\ncXVhbHMocmV0MiwgMCk7CgogICAgICAgIGVuZFR4KGVtKTsKICAgICAgICBl\nbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFNldE1heFJl\nc3VsdHMoKSB7CiAgICAgICAgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigp\nOwoKICAgICAgICBMaXN0IGwgPSBlbS5jcmVhdGVRdWVyeSgiU2VsZWN0IG9i\namVjdChvKSBmcm9tIEVudGl0eTEgbyIpCiAgICAgICAgICAgIC5zZXRNYXhS\nZXN1bHRzKDUpCiAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CgogICAg\nICAgIGFzc2VydE5vdE51bGwobCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDUs\nIGwuc2l6ZSgpKTsKCiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RTZXRGaXJzdFJlc3VsdHMoKSB7CiAgICAgICAgZW0g\nPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwoKICAgICAgICBMaXN0IGwgPSBl\nbS5jcmVhdGVRdWVyeSgiU2VsZWN0IG9iamVjdChvKSBmcm9tIEVudGl0eTEg\nbyIpCiAgICAgICAgICAgIC5zZXRGaXJzdFJlc3VsdCgzKQogICAgICAgICAg\nICAuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBFbnRpdHkxIGVudCA9IChF\nbnRpdHkxKSBsLmdldCgwKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbnQp\nOwogICAgICAgIGFzc2VydEVxdWFscygic3RyaW5nMyIsIGVudC5nZXRTdHJp\nbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNSwgZW50LmdldElu\ndEZpZWxkKCkpOwoKICAgICAgICBlbmRFbShlbSk7CiAgICB9CgogICAgLy8g\nVGVzdHMgQmluZGluZyBhbiBhcmd1bWVudCB0byBhIG5hbWVkIHBhcmFtZXRl\nci4KICAgIC8vIHBrLCB0aGUgbmFtZWQgcGFyYW1ldGVyIC0tTm90IHdvcmtp\nbmcgeWV0LS0KICAgIHB1YmxpYyB2b2lkIHh4eHRlc3RTZXRQYXJhbWV0ZXIx\nKCkgewoKICAgICAgICBlbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgU3RyaW5nIGN1cnIgPSAyICsgIiI7CgogICAgICAgIExpc3QgcmV0\nID0gZW0uY3JlYXRlUXVlcnkoIlNFTEVDVCBvIEZST00gRW50aXR5MSBvIFdI\nRVJFIG8ucGsgTElLRSA6cGsiKQogICAgICAgICAgICAuc2V0UGFyYW1ldGVy\nKCJwayIsIGN1cnIpCiAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7Cgog\nICAgICAgIGFzc2VydE5vdE51bGwocmV0KTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMSwgcmV0LnNpemUoKSk7CgogICAgICAgIHJldCA9IGVtLmNyZWF0ZU5h\nbWVkUXVlcnkoInNldFBhcmFtMSIpCiAgICAgICAgICAgIC5zZXRQYXJhbWV0\nZXIoInBrIiwgY3VycikKICAgICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsK\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXQpOwogICAgICAgIGFzc2VydEVx\ndWFscygxLCByZXQuc2l6ZSgpKTsKCiAgICAgICAgZW5kVHgoZW0pOwogICAg\nfQogICAgCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGVy\nc2lzdGVuY2VVbml0TmFtZSgpIHsgCiAgICAgICAgcmV0dXJuICJRdWVyeUNh\nY2hlIjsKICAgIH0KCiAgICAvL3Jlc3Qgb2YgdGhlIGludGVyZmFjZSBpcyB0\nZXN0ZWQgYnkgdGhlIENUUwp9Cg==\n","encoding":"base64"}

