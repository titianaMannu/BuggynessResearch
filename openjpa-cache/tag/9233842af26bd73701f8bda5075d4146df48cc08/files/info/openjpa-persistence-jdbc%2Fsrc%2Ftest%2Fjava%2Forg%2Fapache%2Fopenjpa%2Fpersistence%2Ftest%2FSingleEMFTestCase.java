{"sha":"181671f465b527b63f0eb022af2992432033f0df","node_id":"MDQ6QmxvYjIwNjM2NDoxODE2NzFmNDY1YjUyN2I2M2YwZWIwMjJhZjI5OTI0MzIwMzNmMGRm","size":6985,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/181671f465b527b63f0eb022af2992432033f0df","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdDsK\nCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJOwoKLyoqCiAqIEJhc2Ug\nY2xhc3MgZm9yIE9wZW5KUEEtc3BlY2lmaWMgVGVzdCBDYXNlLgogKiBQcm92\naWRlcyB1dGlsaXRpZXMgZm9yIGNvbmZpZ3VyYXRpb24gc2V0dXAgYW5kIHBl\ncnNpc3RlbnQgZW50aXR5IAogKiByZWdpc3RyYXRpb24gZHVyaW5nIHNldFVw\nKCkgbWV0aG9kLgogKiBEZXJpdmVkIGNsYXNzZXMgY2FuIGFjY2VzcyBwcm90\nZWN0ZWQgRW50aXR5TWFuYWdlckZhY3RvcnkgdG8gY3JlYXRlIAogKiBFbnRp\ndHlNYW5hZ2VyLiBUaGUgcHJvdGVjdGVkIEVudGl0eU1hbmFnZXJGYWN0b3J5\nIGlzIGRlY2xhcmVkIHRvIGJlCiAqIE9wZW5KUEEtZXh0ZW5kZWQgU1BJIGlu\ndGVyZmFjZSA8Y29kZT5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEk8\nL2NvZGU+CiAqIHNvIHRoYXQgZGVyaXZlZCBjbGFzc2VzIGNhbiBhY2Nlc3Mg\naW50ZXJuYWwgbWFwcGluZy9tZXRhZGF0YS9jb25maWd1cmF0aW9uCiAqIGFu\nZCBvdGhlciBzdHJ1Y3R1cmVzLiAgCiAqICAgCiAqLwpwdWJsaWMgYWJzdHJh\nY3QgY2xhc3MgU2luZ2xlRU1GVGVzdENhc2UKICAgIGV4dGVuZHMgQWJzdHJh\nY3RDYWNoZWRFTUZUZXN0Q2FzZSAgewoKICAgIHByb3RlY3RlZCBPcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mOwoKICAgIC8qKgogICAgICog\nQ2FsbCB7QGxpbmsgI3NldFVwKE9iamVjdC4uLiBwcm9wcyl9IHdpdGggbm8g\nYXJndW1lbnRzIHNvIHRoYXQgdGhlIGVtZgogICAgICogc2V0LXVwIGhhcHBl\nbnMgZXZlbiBpZiA8Y29kZT5zZXRVcCgpPC9jb2RlPiBpcyBub3QgY2FsbGVk\nIGZyb20gdGhlCiAgICAgKiBzdWJjbGFzcy4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzZXRV\ncChuZXcgT2JqZWN0WzBdKTsKICAgIH0KCiAgICAvKioKICAgICAqIEluaXRp\nYWxpemUgZW50aXR5IG1hbmFnZXIgZmFjdG9yeS4gUHV0IHtAbGluayAjQ0xF\nQVJfVEFCTEVTfSBpbgogICAgICogdGhpcyBsaXN0IHRvIHRlbGwgdGhlIHRl\nc3QgZnJhbWV3b3JrIHRvIGRlbGV0ZSBhbGwgdGFibGUgY29udGVudHMKICAg\nICAqIGJlZm9yZSBydW5uaW5nIHRoZSB0ZXN0cy4KICAgICAqCiAgICAgKiBA\ncGFyYW0gcHJvcHMgbGlzdCBvZiBwZXJzaXN0ZW50IHR5cGVzIHVzZWQgaW4g\ndGVzdGluZyBhbmQvb3IgCiAgICAgKiBjb25maWd1cmF0aW9uIHZhbHVlcyBp\nbiB0aGUgZm9ybSBrZXksdmFsdWUsa2V5LHZhbHVlLi4uCiAgICAgKi8KICAg\nIHByb3RlY3RlZCB2b2lkIHNldFVwKE9iamVjdC4uLiBwcm9wcykgewogICAg\nICAgIGVtZiA9IGNyZWF0ZUVNRihwcm9wcyk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDbG9zZXMgdGhlIGVudGl0eSBtYW5hZ2VyIGZhY3RvcnkuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgc3VwZXIudGVhckRvd24oKTsKCiAgICAgICAgaWYgKGVt\nZiA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGNsZWFyKGVtZik7CiAgICAgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gaWYgYSB0ZXN0IGZhaWxlZCwg\nc3dhbGxvdyBhbnkgZXhjZXB0aW9ucyB0aGF0IGhhcHBlbgogICAgICAgICAg\nICAvLyBkdXJpbmcgdGVhci1kb3duLCBhcyB0aGVzZSBqdXN0IG1hc2sgdGhl\nIG9yaWdpbmFsIHByb2JsZW0uCiAgICAgICAgICAgIGlmICh0ZXN0UmVzdWx0\nLndhc1N1Y2Nlc3NmdWwoKSkKICAgICAgICAgICAgICAgIHRocm93IGU7CiAg\nICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2xvc2VFTUYoZW1mKTsK\nICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogR2V0IHRoZSBj\nbGFzcyBtYXBwaW5nIGZvciBhIGdpdmVuIGVudGl0eQogICAgICogCiAgICAg\nKiBAcGFyYW0gbmFtZSBUaGUgRW50aXR5J3MgbmFtZS4KICAgICAqIAogICAg\nICogQHJldHVybiBJZiB0aGUgZW50aXR5IGlzIGEga25vd24gdHlwZSB0aGUg\nQ2xhc3NNYXBwaW5nIGZvciB0aGUgRW50aXR5CiAgICAgKiAgICAgICAgIHdp\nbGwgYmUgcmV0dXJuZWQuIE90aGVyd2lzZSBudWxsCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBDbGFzc01hcHBpbmcgZ2V0TWFwcGluZyhTdHJpbmcgbmFtZSkg\newogICAgICAgIHJldHVybiAoQ2xhc3NNYXBwaW5nKSBlbWYuZ2V0Q29uZmln\ndXJhdGlvbigpCiAgICAgICAgICAgICAgICAuZ2V0TWV0YURhdGFSZXBvc2l0\nb3J5SW5zdGFuY2UoKS5nZXRNZXRhRGF0YShuYW1lLAogICAgICAgICAgICAg\nICAgICAgICAgICBnZXRDbGFzcygpLmdldENsYXNzTG9hZGVyKCksIHRydWUp\nOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEdldCB0aGUgY2xhc3MgbWFw\ncGluZyBmb3IgYSBnaXZlbiBlbnRpdHkKICAgICAqIAogICAgICogQHBhcmFt\nIGVudGl0eUNsYXNzIGFuIGVudGl0eSBjbGFzcy4KICAgICAqIAogICAgICog\nQHJldHVybiBJZiB0aGUgZW50aXR5IGlzIGEga25vd24gdHlwZSB0aGUgQ2xh\nc3NNYXBwaW5nIGZvciB0aGUgRW50aXR5CiAgICAgKiAgICAgICAgIHdpbGwg\nYmUgcmV0dXJuZWQuIE90aGVyd2lzZSBudWxsCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBDbGFzc01hcHBpbmcgZ2V0TWFwcGluZyhDbGFzczw/PiBlbnRpdHlD\nbGFzcykgewogICAgICAgIHJldHVybiAoQ2xhc3NNYXBwaW5nKSBlbWYuZ2V0\nQ29uZmlndXJhdGlvbigpCiAgICAgICAgICAgICAgICAuZ2V0TWV0YURhdGFS\nZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNZXRhRGF0YShlbnRpdHlDbGFzcywK\nICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q2xhc3MoKS5nZXRDbGFzc0xv\nYWRlcigpLCB0cnVlKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBHZXQg\nbnVtYmVyIG9mIGluc3RhbmNlcyBieSBhbiBhZ2dyZWdhdGUgcXVlcnkgd2l0\naCB0aGUgZ2l2ZW4gYWxpYXMuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgY291\nbnQoU3RyaW5nIGFsaWFzKSB7CiAgICAgICAgcmV0dXJuICgoTnVtYmVyKWVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCkuY3JlYXRlUXVlcnkoCiAgICAgICAg\nICAgICAgICAiU0VMRUNUIENPVU5UKHApIEZST00gIiArIGFsaWFzICsgIiBw\nIikKICAgICAgICAgICAgICAgIC5nZXRTaW5nbGVSZXN1bHQoKSkuaW50VmFs\ndWUoKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDb3VudCBudW1iZXIg\nb2YgaW5zdGFuY2VzIG9mIHRoZSBnaXZlbiBjbGFzcyBhc3N1bWluZyB0aGF0\nIHRoZSBhbGlhcwogICAgICogZm9yIHRoZSBjbGFzcyBpcyBpdHMgc2ltcGxl\nIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgY291bnQoQ2xhc3M8Pz4g\nYykgewogICAgCXJldHVybiBjb3VudChnZXRBbGlhcyhjKSk7CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogR2V0IGFsbCB0aGUgaW5zdGFuY2VzIG9mIGdp\ndmVuIHR5cGUuCiAgICAgKiBUaGUgcmV0dXJuZWQgaW5zdGFuY2VzIGFyZSBv\nYnRhaW5lZCB3aXRob3V0IGEgcGVyc2lzdGVuY2UgY29udGV4dC4gCiAgICAg\nKi8KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVi\nbGljIDxUPiBMaXN0PFQ+IGdldEFsbChDbGFzczxUPiB0KSB7CiAgICAgICAg\ncmV0dXJuIChMaXN0PFQ+KWVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCkuY3Jl\nYXRlUXVlcnkoCiAgICAgICAgICAgICAgICAiU0VMRUNUIHAgRlJPTSAiICsg\nZ2V0QWxpYXModCkgKyAiIHAiKS5nZXRSZXN1bHRMaXN0KCk7CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogR2V0IGFsbCB0aGUgaW5zdGFuY2VzIG9mIGdp\ndmVuIHR5cGUuCiAgICAgKiBUaGUgcmV0dXJuZWQgaW5zdGFuY2VzIGFyZSBv\nYnRhaW5lZCB3aXRoaW4gdGhlIGdpdmVuIHBlcnNpc3RlbmNlIGNvbnRleHQu\nCiAgICAgKi8KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQog\nICAgcHVibGljIDxUPiBMaXN0PFQ+IGdldEFsbChFbnRpdHlNYW5hZ2VyIGVt\nLCBDbGFzczxUPiB0KSB7CiAgICAJcmV0dXJuIChMaXN0PFQ+KWVtLmNyZWF0\nZVF1ZXJ5KCJTRUxFQ1QgcCBGUk9NICIgKyBnZXRBbGlhcyh0KSArICIgcCIp\nCgkJCQkgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgfQogICAgCiAgICBwdWJs\naWMgU3RyaW5nIGdldEFsaWFzKENsYXNzPD8+IHQpIHsKICAgICAgICByZXR1\ncm4gZW1mLmdldENvbmZpZ3VyYXRpb24oKS5nZXRNZXRhRGF0YVJlcG9zaXRv\ncnlJbnN0YW5jZSgpCiAgICAgICAgICAgIC5nZXRNZXRhRGF0YSh0LCBudWxs\nLCB0cnVlKS5nZXRUeXBlQWxpYXMoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQg\nQ2xhc3NNYXBwaW5nIFtdIGdldE1hcHBpbmdzKCkgewogICAgICAgIHJldHVy\nbiAoQ2xhc3NNYXBwaW5nIFtdICkgZW1mLmdldENvbmZpZ3VyYXRpb24oKS5n\nZXRNZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpLmdldE1ldGFEYXRhcygp\nOyAgIAogICAgfQogICAgCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRVbnN1cHBv\ncnRlZERhdGFiYXNlcyhDbGFzczw/PiAuLi4gZGJzKSB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIHRlbXBFTUYgPSBlbWY7CiAg\nICAgICAgaWYgKHRlbXBFTUYgPT0gbnVsbCkgewogICAgICAgICAgICB0ZW1w\nRU1GID0gY3JlYXRlRU1GKCk7CiAgICAgICAgfQogICAgICAgIERCRGljdGlv\nbmFyeSBkaWN0ID0gKChKREJDQ29uZmlndXJhdGlvbil0ZW1wRU1GLmdldENv\nbmZpZ3VyYXRpb24oKSkuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsKICAg\nICAgICBmb3IgKENsYXNzPD8+IGRiIDogZGJzKSB7CiAgICAgICAgICAgIGlm\nIChkaWN0LmdldENsYXNzKCkuZ2V0Q2Fub25pY2FsTmFtZSgpLmVxdWFsc0ln\nbm9yZUNhc2UoZGIuZ2V0Q2Fub25pY2FsTmFtZSgpKSkgewogICAgICAgICAg\nICAgICAgc2V0VGVzdHNEaXNhYmxlZCh0cnVlKTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChl\nbWYgPT0gbnVsbCkgewogICAgICAgICAgICBjbG9zZUVNRih0ZW1wRU1GKTsK\nICAgICAgICB9CiAgICB9CiAgICAKICAgIHByb3RlY3RlZCB2b2lkIHNldFN1\ncHBvcnRlZERhdGFiYXNlcyhDbGFzczw/PiAuLi4gZGJzKSB7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIHRlbXBFTUYgPSBlbWY7\nCiAgICAgICAgaWYgKHRlbXBFTUYgPT0gbnVsbCkgewogICAgICAgICAgICB0\nZW1wRU1GID0gY3JlYXRlRU1GKCk7CiAgICAgICAgfQogICAgICAgIERCRGlj\ndGlvbmFyeSBkaWN0ID0gKChKREJDQ29uZmlndXJhdGlvbil0ZW1wRU1GLmdl\ndENvbmZpZ3VyYXRpb24oKSkuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsK\nICAgICAgICBib29sZWFuIHN1cHBvcnRlZERCID0gZmFsc2U7CiAgICAgICAg\nZm9yIChDbGFzczw/PiBkYiA6IGRicykgewogICAgICAgICAgICBpZiAoZGlj\ndC5nZXRDbGFzcygpLmdldENhbm9uaWNhbE5hbWUoKS5lcXVhbHNJZ25vcmVD\nYXNlKGRiLmdldENhbm9uaWNhbE5hbWUoKSkpIHsKICAgICAgICAgICAgICAg\nIHN1cHBvcnRlZERCID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNldFRlc3RzRGlzYWJs\nZWQoIXN1cHBvcnRlZERCKTsKICAgICAgICBpZiAoZW1mID09IG51bGwpIHsK\nICAgICAgICAgICAgY2xvc2VFTUYodGVtcEVNRik7CiAgICAgICAgfQogICAg\nfQogICAgCiAgICBwcm90ZWN0ZWQgTG9nIGdldExvZygpIHsKICAgICAgICBy\nZXR1cm4gZW1mLmdldENvbmZpZ3VyYXRpb24oKS5nZXRMb2coIlRlc3RzIik7\nCiAgICB9Cn0KCg==\n","encoding":"base64"}

