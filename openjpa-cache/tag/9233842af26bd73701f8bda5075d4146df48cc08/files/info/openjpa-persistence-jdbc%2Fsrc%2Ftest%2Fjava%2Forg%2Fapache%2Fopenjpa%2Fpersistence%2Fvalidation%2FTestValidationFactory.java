{"sha":"422b49062b041136ebce6d1af36f294f0b4e6b6c","node_id":"MDQ6QmxvYjIwNjM2NDo0MjJiNDkwNjJiMDQxMTM2ZWJjZTZkMWFmMzZmMjk0ZjBiNGU2YjZj","size":6533,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/422b49062b041136ebce6d1af36f294f0b4e6b6c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZSBvciBtb3JlCiAqIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmli\ndXRlZCB3aXRoIHRoaXMKICogd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1h\ndGlvbiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gVGhlIEFTRgog\nKiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdp\ndGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0\naGUgTGljZW5zZSBhdAogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z\nZXMvTElDRU5TRS0yLjAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUg\nbGF3CiAqIG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0\ncmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcwogKiBkaXN0cmlidXRlZCBv\nbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09O\nRElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1w\nbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3Vh\nZ2UKICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1\nbmRlciB0aGUgTGljZW5zZS4KICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLnZhbGlkYXRpb247CgppbXBvcnQgamF2YS51dGls\nLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLnNwaS5WYWxpZGF0aW9uTW9kZTsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFu\nYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNlRXhjZXB0aW9uOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnF1ZXJ5LlNpbXBs\nZUVudGl0eTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3RzIHRoZSBu\nZXcgQmVhbiBWYWxpZGF0aW9uIEZhY3Rvcnkgc3VwcG9ydCBpbiB0aGUgSlBB\nIDIuMCBzcGVjLgogKiBCYXNpYyAobm8gcHJvdmlkZXIpIFZhbGlkYXRpb24g\nc2NlbmFyaW9zIGJlaW5nIHRlc3RlZDoKICogICAxKSBCeSBkZWZhdWx0LCBW\nYWxpZGF0aW9uRmFjdG9yeSBpcyBudWxsCiAqICAgMikgQW4gaW52YWxpZCBW\nYWxpZGF0aW9uRmFjdG9yeSB3aXRoIG1vZGUgb2YgTk9ORSB3aWxsIG5vdCBj\nYXVzZSBleGNlcHRpb24KICogICAzKSBBbiBpbnZhbGlkIFZhbGlkYXRpb25G\nYWN0b3J5IHdpdGggbW9kZSBvZiBBVVRPIHdpbGwgbm90IGNhdXNlIGV4Y2Vw\ndGlvbgogKiAgIDQpIEFuIGludmFsaWQgVmFsaWRhdGlvbkZhY3Rvcnkgd2l0\naCBtb2RlIG9mIENBTExCQUNLIHdpbGwgY2F1c2UgZXhjZXB0aW9uCiAqIAog\nKiBAdmVyc2lvbiAkUmV2JCAkRGF0ZSQKICovCnB1YmxpYyBjbGFzcyBUZXN0\nVmFsaWRhdGlvbkZhY3RvcnkgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7\nCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAg\nICAgICBzdXBlci5zZXRVcChDTEVBUl9UQUJMRVMsIFNpbXBsZUVudGl0eS5j\nbGFzcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTY2VuYXJpbyBiZWluZyB0\nZXN0ZWQ6CiAgICAgKiAgIDEpIEJ5IGRlZmF1bHQsIFZhbGlkYXRpb25GYWN0\nb3J5IGlzIG51bGwKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdFZhbGlk\nYXRpb25GYWN0b3J5MSgpIHsKICAgICAgICBnZXRMb2coKS50cmFjZSgidGVz\ndFZhbGlkYXRpb25GYWN0b3J5MSgpIC0gRGVmYXVsdCBpcyBudWxsIik7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IGVtZiA9IG51bGw7\nCgogICAgICAgIC8vIGNyZWF0ZSBvdXIgRU1GCiAgICAgICAgZW1mID0gT3Bl\nbkpQQVBlcnNpc3RlbmNlLmNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KAog\nICAgICAgICAgICAic2ltcGxlLW5vbmUtbW9kZSIsCiAgICAgICAgICAgICJv\ncmcvYXBhY2hlL29wZW5qcGEvcGVyc2lzdGVuY2UvdmFsaWRhdGlvbi9wZXJz\naXN0ZW5jZS54bWwiKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGVtZik7CiAg\nICAgICAgLy8gdmVyaWZ5IGRlZmF1bHQgdmFsaWRhdGlvbiBtb2RlCiAgICAg\nICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IGVtZi5nZXRDb25maWd1\ncmF0aW9uKCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChjb25mKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoIkRlZmF1bHQgVmFsaWRhdGlvbkZhY3RvcnkiLCAK\nICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgY29uZi5nZXRWYWxpZGF0\naW9uRmFjdG9yeUluc3RhbmNlKCkpOwogICAgfQoKICAgIC8qKgogICAgICog\nU2NlbmFyaW8gYmVpbmcgdGVzdGVkOgogICAgICogICAyKSBBbiBpbnZhbGlk\nIFZhbGlkYXRpb25GYWN0b3J5IHdpdGggYSBtb2RlIG9mIE5PTkUgd2lsbCBu\nb3QKICAgICAqICAgICAgY2F1c2UgYW4gZXhjZXB0aW9uCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHRlc3RWYWxpZGF0aW9uRmFjdG9yeTIoKSB7CiAgICAg\nICAgZ2V0TG9nKCkudHJhY2UoInRlc3RWYWxpZGF0aW9uRmFjdG9yeTIoKSAt\nIGlnbm9yZWQgaW52YWxpZCBmYWN0b3J5Iik7CiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5IGVtZiA9IG51bGw7CgogICAgICAgIC8vIGNy\nZWF0ZSB0aGUgTWFwIHRvIHRlc3Qgb3ZlcnJpZGVzCiAgICAgICAgLy8gICBK\ndXN0IHVzZSBjdXJyZW50IGNsYXNzIG9iamVjdCwgYXMgd2UgaGF2ZSBubyBw\ncm92aWRlciB0byB0ZXN0IHdpdGgKICAgICAgICBNYXA8U3RyaW5nLE9iamVj\ndD4gcHJvcHMgPSBuZXcgSGFzaE1hcDxTdHJpbmcsT2JqZWN0PigpOwogICAg\nICAgIHByb3BzLnB1dCgiamF2YXgucGVyc2lzdGVuY2UudmFsaWRhdGlvbi5m\nYWN0b3J5IiwKICAgICAgICAgICAgdGhpcy5nZXRDbGFzcygpKTsKCiAgICAg\nICAgLy8gY3JlYXRlIG91ciBFTUYKICAgICAgICBlbWYgPSBPcGVuSlBBUGVy\nc2lzdGVuY2UuY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkoCiAgICAgICAg\nICAgICJzaW1wbGUtbm9uZS1tb2RlIiwKICAgICAgICAgICAgIm9yZy9hcGFj\naGUvb3BlbmpwYS9wZXJzaXN0ZW5jZS92YWxpZGF0aW9uL3BlcnNpc3RlbmNl\nLnhtbCIsCiAgICAgICAgICAgIHByb3BzKTsKICAgICAgICBhc3NlcnROb3RO\ndWxsKGVtZik7CiAgICAgICAgLy8gdmVyaWZ5IHNhbWUgInZhbGlkYXRpb24g\nZmFjdG9yeSIgb2JqZWN0IGlzIHJldHVybmVkCiAgICAgICAgT3BlbkpQQUNv\nbmZpZ3VyYXRpb24gY29uZiA9IGVtZi5nZXRDb25maWd1cmF0aW9uKCk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChjb25mKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoIlZhbGlkYXRpb25GYWN0b3J5IiwgCiAgICAgICAgICAgIHRoaXMuZ2V0\nQ2xhc3MoKSwKICAgICAgICAgICAgY29uZi5nZXRWYWxpZGF0aW9uRmFjdG9y\neUluc3RhbmNlKCkpOwogICAgfQoKICAgIC8qKgogICAgICogU2NlbmFyaW8g\nYmVpbmcgdGVzdGVkOgogICAgICogICAzKSBBbiBpbnZhbGlkIFZhbGlkYXRp\nb25GYWN0b3J5IHdpdGggYSBtb2RlIG9mIEFVVE8gd2lsbCBub3QKICAgICAq\nICAgICAgY2F1c2UgYW4gZXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHRlc3RWYWxpZGF0aW9uRmFjdG9yeTMoKSB7CiAgICAgICAgZ2V0TG9n\nKCkudHJhY2UoInRlc3RWYWxpZGF0aW9uRmFjdG9yeTMoKSAtIG9wdGlvbmFs\nIGludmFsaWQgZmFjdG9yeSIpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBlbWYgPSBudWxsOwoKICAgICAgICAvLyBjcmVhdGUgdGhl\nIE1hcCB0byB0ZXN0IG92ZXJyaWRlcwogICAgICAgIC8vICAgSnVzdCB1c2Ug\nY3VycmVudCBjbGFzcyBvYmplY3QsIGFzIHdlIGhhdmUgbm8gcHJvdmlkZXIg\ndG8gdGVzdCB3aXRoCiAgICAgICAgTWFwPFN0cmluZyxPYmplY3Q+IHByb3Bz\nID0gbmV3IEhhc2hNYXA8U3RyaW5nLE9iamVjdD4oKTsKICAgICAgICBwcm9w\ncy5wdXQoImphdmF4LnBlcnNpc3RlbmNlLnZhbGlkYXRpb24uZmFjdG9yeSIs\nCiAgICAgICAgICAgIHRoaXMuZ2V0Q2xhc3MoKSk7CgogICAgICAgIC8vIGNy\nZWF0ZSBvdXIgRU1GCiAgICAgICAgZW1mID0gT3BlbkpQQVBlcnNpc3RlbmNl\nLmNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KAogICAgICAgICAgICAic2lt\ncGxlLWF1dG8tbW9kZSIsCiAgICAgICAgICAgICJvcmcvYXBhY2hlL29wZW5q\ncGEvcGVyc2lzdGVuY2UvdmFsaWRhdGlvbi9wZXJzaXN0ZW5jZS54bWwiLAog\nICAgICAgICAgICBwcm9wcyk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbWYp\nOwogICAgICAgIC8vIHZlcmlmeSBzYW1lICJ2YWxpZGF0aW9uIGZhY3Rvcnki\nIG9iamVjdCBpcyByZXR1cm5lZAogICAgICAgIE9wZW5KUEFDb25maWd1cmF0\naW9uIGNvbmYgPSBlbWYuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoY29uZik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJWYWxp\nZGF0aW9uRmFjdG9yeSIsIAogICAgICAgICAgICB0aGlzLmdldENsYXNzKCks\nCiAgICAgICAgICAgIGNvbmYuZ2V0VmFsaWRhdGlvbkZhY3RvcnlJbnN0YW5j\nZSgpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNjZW5hcmlvIGJlaW5nIHRl\nc3RlZDoKICAgICAqICAgNCkgQW4gaW52YWxpZCBWYWxpZGF0aW9uRmFjdG9y\neSB3aXRoIGEgbW9kZSBvZiBDQUxMQkFDSyB3aWxsCiAgICAgKiAgICAgIGNh\ndXNlIGEgZmF0YWwgZXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHRlc3RWYWxpZGF0aW9uRmFjdG9yeTQoKSB7CiAgICAgICAgZ2V0TG9nKCku\ndHJhY2UoInRlc3RWYWxpZGF0aW9uRmFjdG9yeTQoKSAtIHJlcXVpcmVkIGlu\ndmFsaWQgZmFjdG9yeSIpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeSBlbWYgPSBudWxsOwoKICAgICAgICAvLyBjcmVhdGUgdGhlIE1h\ncCB0byB0ZXN0IG92ZXJyaWRlcwogICAgICAgIC8vICAgSnVzdCB1c2UgY3Vy\ncmVudCBjbGFzcyBvYmplY3QsIGFzIHdlIGhhdmUgbm8gcHJvdmlkZXIgdG8g\ndGVzdCB3aXRoCiAgICAgICAgTWFwPFN0cmluZyxPYmplY3Q+IHByb3BzID0g\nbmV3IEhhc2hNYXA8U3RyaW5nLE9iamVjdD4oKTsKICAgICAgICBwcm9wcy5w\ndXQoImphdmF4LnBlcnNpc3RlbmNlLnZhbGlkYXRpb24uZmFjdG9yeSIsCiAg\nICAgICAgICAgIHRoaXMuZ2V0Q2xhc3MoKSk7CiAgICAgICAgcHJvcHMucHV0\nKCJqYXZheC5wZXJzaXN0ZW5jZS52YWxpZGF0aW9uLm1vZGUiLAogICAgICAg\nICAgICBTdHJpbmcudmFsdWVPZihWYWxpZGF0aW9uTW9kZS5DQUxMQkFDSykp\nOwoKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBjcmVhdGUgb3VyIEVN\nRgogICAgICAgICAgICBlbWYgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY3JlYXRl\nRW50aXR5TWFuYWdlckZhY3RvcnkoCiAgICAgICAgICAgICAgICAic2ltcGxl\nLWNhbGxiYWNrLW1vZGUiLAogICAgICAgICAgICAgICAgIm9yZy9hcGFjaGUv\nb3BlbmpwYS9wZXJzaXN0ZW5jZS92YWxpZGF0aW9uL3BlcnNpc3RlbmNlLnht\nbCIsCiAgICAgICAgICAgICAgICBwcm9wcyk7CiAgICAgICAgICAgIGFzc2Vy\ndE5vdE51bGwoZW1mKTsKICAgICAgICAgICAgLy8gdmVyaWZ5IHZhbGlkYXRp\nb24gbW9kZQogICAgICAgICAgICBPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25m\nID0gZW1mLmdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAgYXNzZXJ0\nTm90TnVsbChjb25mKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJWYWxp\nZGF0aW9uIG1vZGUiLCAKICAgICAgICAgICAgICAgIFN0cmluZy52YWx1ZU9m\nKFZhbGlkYXRpb25Nb2RlLkNBTExCQUNLKSwKICAgICAgICAgICAgICAgIGNv\nbmYuZ2V0VmFsaWRhdGlvbk1vZGUoKSk7CiAgICAgICAgICAgIGZhaWwoIkV4\ncGVjdGVkIGFuIGV4Y2VwdGlvbiB3aGVuIFZhbGlkYXRpb25Nb2RlPUNBTExC\nQUNLIGFuZCAiICsKICAgICAgICAgICAgICAgICJhbiBpbnZhbGlkIFZhbGlk\nYXRvckZhY3RvcnkgaXMgcHJvdmlkZWQuIik7CiAgICAgICAgfSBjYXRjaCAo\nUGVyc2lzdGVuY2VFeGNlcHRpb24gZSkgewogICAgICAgICAgICAvLyBleHBl\nY3RlZAogICAgICAgICAgICBnZXRMb2coKS50cmFjZSgidGVzdFZhbGlkYXRp\nb25GYWN0b3J5NCgpIC0gY2F1Z2h0IGV4cGVjdGVkICIgKwogICAgICAgICAg\nICAgICAgIlBlcnNpc3RlbmNlRXhjZXB0aW9uIiwgZSk7CiAgICAgICAgfQog\nICAgfQoKfQo=\n","encoding":"base64"}

