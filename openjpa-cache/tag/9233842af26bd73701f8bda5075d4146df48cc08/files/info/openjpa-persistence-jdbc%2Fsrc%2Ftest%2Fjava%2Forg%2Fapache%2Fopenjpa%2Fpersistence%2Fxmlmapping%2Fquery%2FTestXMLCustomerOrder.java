{"sha":"fea11c4b7208748347d683945322ddc853981a1b","node_id":"MDQ6QmxvYjIwNjM2NDpmZWExMWM0YjcyMDg3NDgzNDdkNjgzOTQ1MzIyZGRjODUzOTgxYTFi","size":13125,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/fea11c4b7208748347d683945322ddc853981a1b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1sbWFw\ncGluZy5xdWVyeTsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5\nOwoKaW1wb3J0IGp1bml0LnRleHR1aS5UZXN0UnVubmVyOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9u\nYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlclNQSTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmds\nZUVNRlRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLnhtbG1hcHBpbmcuZW50aXRpZXMuQ3VzdG9tZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1sbWFwcGluZy5lbnRp\ndGllcy5FQWRkcmVzczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS54bWxtYXBwaW5nLmVudGl0aWVzLk9yZGVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnhtbG1hcHBpbmcuZW50aXRp\nZXMuQ3VzdG9tZXIuQ3JlZGl0UmF0aW5nOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLnhtbG1hcHBpbmcueG1sYmluZGluZ3MubXlh\nZGRyZXNzLkFkZHJlc3M7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UueG1sbWFwcGluZy54bWxiaW5kaW5ncy5teWFkZHJlc3MuQ0FO\nQWRkcmVzczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS54bWxtYXBwaW5nLnhtbGJpbmRpbmdzLm15YWRkcmVzcy5PYmplY3RGYWN0\nb3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnht\nbG1hcHBpbmcueG1sYmluZGluZ3MubXlhZGRyZXNzLlVTQUFkZHJlc3M7Cgov\nKioKICogVGVzdCBxdWVyeSB3aXRoIHByZWRpY2F0ZXMgb24gcGVyc2lzdGVu\ndCBmaWVsZCBtYXBwZWQgdG8gWE1MIGNvbHVtbi4KICogU2FtcGxlcyBvZiBw\nbGF0Zm9ybSBzcGVjaWZpYyBzcWxzIGFyZSB1bmRlciByZXNvdXJjZXMgaW4K\nICogVGVzdFhNTEN1c3RvbWVyT3JkZXIuW2RibmFtZV0gZmlsZXMuCiAqIAog\nKiBAYXV0aG9yIENhdGFsaW5hIFdlaQogKiBAYXV0aG9yIE1pbG9zeiBUeWxl\nbmRhCiAqIEBzaW5jZSAxLjAuMAogKi8KcHVibGljIGNsYXNzIFRlc3RYTUxD\ndXN0b21lck9yZGVyCiAgICBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsK\nICAgIAogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IE9SREVSXzFfT0lE\nID0gMTA7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBkb3VibGUgT1JERVJf\nMV9BTU9VTlQgPSA4NTA7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBib29s\nZWFuIE9SREVSXzFfREVMSVZFUkVEID0gZmFsc2U7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgaW50IE9SREVSXzJfT0lEID0gMjA7CiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBkb3VibGUgT1JERVJfMl9BTU9VTlQgPSAxMDAwOwog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgYm9vbGVhbiBPUkRFUl8yX0RFTElW\nRVJFRCA9IGZhbHNlOwoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAg\nICAgIHNldFVwKEN1c3RvbWVyLmNsYXNzLCBDdXN0b21lci5DdXN0b21lcktl\neS5jbGFzcywgT3JkZXIuY2xhc3MsCiAgICAgICAgICAgIEVBZGRyZXNzLmNs\nYXNzLCBDTEVBUl9UQUJMRVMpOwoKICAgICAgICAvLyBza2lwIHRlc3QgaWYg\nZGljdGlvbmFyeSBoYXMgbm8gc3VwcG9ydCBmb3IgWE1MIGNvbHVtbiB0eXBl\nCiAgICAgICAgc2V0VGVzdHNEaXNhYmxlZCghZGljdGlvbmFyeVN1cHBvcnRz\nWE1MQ29sdW1uKCkpOwogICAgICAgIGlmIChpc1Rlc3RzRGlzYWJsZWQoKSkg\newogICAgICAgICAgICBnZXRMb2coKS50cmFjZSgiVGVzdFhNTEN1c3RvbWVy\nT3JkZXIoKSAtIFNraXBwaW5nIGFsbCB0ZXN0cyAtIE5vIFhNTCBDb2x1bW4g\nc3VwcG9ydCIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAg\nICAgIAogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBwZXJzaXN0RW50aXRpZXMoZW0pOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikK\nICAgIHB1YmxpYyB2b2lkIHRlc3RYTUxGaWVsZFByb2plY3Rpb24oKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgTGlzdDxBZGRyZXNzPiBhZGRycyA9IGVtLmNyZWF0\nZVF1ZXJ5KAogICAgICAgICAgICAic2VsZWN0IG8uc2hpcEFkZHJlc3MgZnJv\nbSBPcmRlciBvIG9yZGVyIGJ5IG8ub2lkIikKICAgICAgICAgICAgLmdldFJl\nc3VsdExpc3QoKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoMiwg\nYWRkcnMuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBBZGRyZXNzIGFkZHJl\nc3NGcm9tRGIgPSBhZGRycy5nZXQoMCk7CiAgICAgICAgQWRkcmVzcyBhZGRy\nZXNzID0gY3JlYXRlVVNBQWRkcmVzcygiSGFycnkncyBBdXRvIik7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKGFkZHJlc3MudG9TdHJpbmcoKSwgYWRkcmVzc0Zy\nb21EYi50b1N0cmluZygpKTsKICAgICAgICAKICAgICAgICBhZGRyZXNzRnJv\nbURiID0gYWRkcnMuZ2V0KDEpOwogICAgICAgIGFkZHJlc3MgPSBjcmVhdGVD\nQU5BZGRyZXNzKCJBJkogQXV0byIpOwogICAgICAgIGFzc2VydEVxdWFscyhh\nZGRyZXNzLnRvU3RyaW5nKCksIGFkZHJlc3NGcm9tRGIudG9TdHJpbmcoKSk7\nCiAgICAgICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAg\nQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0WE1MRmllbGRJbkVudGl0eSgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBM\naXN0PE9yZGVyPiBvcmRlcnMgPSBlbS5jcmVhdGVRdWVyeSgKICAgICAgICAg\nICAgInNlbGVjdCBvIGZyb20gT3JkZXIgbyBvcmRlciBieSBvLm9pZCIpCiAg\nICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIG9yZGVycy5zaXplKCkpOwogICAgICAgIAogICAg\nICAgIE9yZGVyIG9yZGVyRnJvbURiID0gb3JkZXJzLmdldCgwKTsKICAgICAg\nICBBZGRyZXNzIGFkZHJlc3NGcm9tRGIgPSBvcmRlckZyb21EYi5nZXRTaGlw\nQWRkcmVzcygpOwogICAgICAgIEFkZHJlc3MgYWRkcmVzcyA9IGNyZWF0ZVVT\nQUFkZHJlc3MoIkhhcnJ5J3MgQXV0byIpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhhZGRyZXNzLnRvU3RyaW5nKCksIGFkZHJlc3NGcm9tRGIudG9TdHJpbmco\nKSk7CiAgICAgICAgCiAgICAgICAgb3JkZXJGcm9tRGIgPSBvcmRlcnMuZ2V0\nKDEpOwogICAgICAgIGFkZHJlc3NGcm9tRGIgPSBvcmRlckZyb21EYi5nZXRT\naGlwQWRkcmVzcygpOwogICAgICAgIGFkZHJlc3MgPSBjcmVhdGVDQU5BZGRy\nZXNzKCJBJkogQXV0byIpOwogICAgICAgIGFzc2VydEVxdWFscyhhZGRyZXNz\nLnRvU3RyaW5nKCksIGFkZHJlc3NGcm9tRGIudG9TdHJpbmcoKSk7CiAgICAg\nICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBAU3VwcHJlc3NX\nYXJuaW5ncygidW5jaGVja2VkIikKICAgIHB1YmxpYyB2b2lkIHRlc3RYTUxT\ndHJpbmdUb1hNTFN0cmluZ0NvbXBhcmlzb24oKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgTGlzdDxPYmplY3RbXT4gb3JkZXJzID0gZW0uY3JlYXRlUXVlcnkoCiAg\nICAgICAgICAgICJzZWxlY3QgbywgbzIgZnJvbSBPcmRlciBvLCBPcmRlciBv\nMiB3aGVyZSBvLnNoaXBBZGRyZXNzLmNpdHkgIiArCiAgICAgICAgICAgICI9\nIG8yLnNoaXBBZGRyZXNzLmNpdHkgb3JkZXIgYnkgby5vaWQiKQogICAgICAg\nICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIAogICAgICAgIGFzc2Vy\ndEVxdWFscygyLCBvcmRlcnMuc2l6ZSgpKTsKCiAgICAgICAgT2JqZWN0W10g\nb3JkZXJzRnJvbURiID0gb3JkZXJzLmdldCgwKTsKICAgICAgICBPcmRlciBv\ncmRlcjEgPSAoT3JkZXIpIG9yZGVyc0Zyb21EYlswXTsKICAgICAgICBPcmRl\nciBvcmRlcjIgPSAoT3JkZXIpIG9yZGVyc0Zyb21EYlsxXTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoT1JERVJfMV9PSUQsIG9yZGVyMS5nZXRPaWQoKSk7CiAg\nICAgICAgYXNzZXJ0T3JkZXJzRXF1YWwob3JkZXIxLCBvcmRlcjIpOwoKICAg\nICAgICBvcmRlcnNGcm9tRGIgPSBvcmRlcnMuZ2V0KDEpOwogICAgICAgIG9y\nZGVyMSA9IChPcmRlcikgb3JkZXJzRnJvbURiWzBdOwogICAgICAgIG9yZGVy\nMiA9IChPcmRlcikgb3JkZXJzRnJvbURiWzFdOwogICAgICAgIGFzc2VydEVx\ndWFscyhPUkRFUl8yX09JRCwgb3JkZXIxLmdldE9pZCgpKTsKICAgICAgICBh\nc3NlcnRPcmRlcnNFcXVhbChvcmRlcjEsIG9yZGVyMik7CiAgICAgICAgCiAg\nICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5n\ncygidW5jaGVja2VkIikKICAgIHB1YmxpYyB2b2lkIHRlc3RYTUxTdHJpbmdU\nb0VtYmVkZGVkU3RyaW5nQ29tcGFyaXNvbigpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBMaXN0PE9yZGVyPiBvcmRlcnMgPSBlbS5jcmVhdGVRdWVyeSgKICAgICAg\nICAgICAgInNlbGVjdCBvIGZyb20gT3JkZXIgbywgQ3VzdG9tZXIgYyB3aGVy\nZSBvLnNoaXBBZGRyZXNzLmNpdHkgIiArCiAgICAgICAgICAgICI9IGMuYWRk\ncmVzcy5jaXR5IikKICAgICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsKICAg\nICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgb3JkZXJzLnNpemUoKSk7\nCiAgICAgICAgT3JkZXIgb3JkZXIgPSBvcmRlcnMuZ2V0KDApOwogICAgICAg\nIGFzc2VydEVxdWFscyhPUkRFUl8xX09JRCwgb3JkZXIuZ2V0T2lkKCkpOwog\nICAgICAgIAogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgQFN1cHBy\nZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nWE1MU3RyaW5nVG9Db25zdGFudFN0cmluZ0NvbXBhcmlzb24oKSB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgTGlzdDxPcmRlcj4gb3JkZXJzID0gZW0uY3JlYXRlUXVl\ncnkoCiAgICAgICAgICAgICJzZWxlY3QgbyBmcm9tIE9yZGVyIG8gd2hlcmUg\nby5zaGlwQWRkcmVzcy5jaXR5ID0gJ1NhbiBKb3NlJyIpCiAgICAgICAgICAg\nIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIG9yZGVycy5zaXplKCkpOwogICAgICAgIE9yZGVyIG9yZGVyID0g\nb3JkZXJzLmdldCgwKTsKICAgICAgICBhc3NlcnRFcXVhbHMoT1JERVJfMV9P\nSUQsIG9yZGVyLmdldE9pZCgpKTsKICAgICAgICAKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQi\nKQogICAgcHVibGljIHZvaWQgdGVzdFhNTFN0cmluZ1RvUGFyYW1ldGVyU3Ry\naW5nQ29tcGFyaXNvbigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBRdWVyeSBxdWVy\neSA9IGVtLmNyZWF0ZVF1ZXJ5KAogICAgICAgICAgICAic2VsZWN0IG8gZnJv\nbSBPcmRlciBvIHdoZXJlIG8uc2hpcEFkZHJlc3MuY2l0eSA9IDpjaXR5Iik7\nCiAgICAgICAgcXVlcnkuc2V0UGFyYW1ldGVyKCJjaXR5IiwgIlNhbiBKb3Nl\nIik7CiAgICAgICAgTGlzdDxPcmRlcj4gb3JkZXJzID0gcXVlcnkuZ2V0UmVz\ndWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgb3JkZXJzLnNp\nemUoKSk7CiAgICAgICAgT3JkZXIgb3JkZXIgPSBvcmRlcnMuZ2V0KDApOwog\nICAgICAgIGFzc2VydEVxdWFscyhPUkRFUl8xX09JRCwgb3JkZXIuZ2V0T2lk\nKCkpOwogICAgICAgIAogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAg\nQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0UGFyYW1ldGVyU3RyaW5nVG9YTUxTdHJpbmdDb21wYXJpc29uKCkg\newogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIFF1ZXJ5IHF1ZXJ5ID0gZW0uY3JlYXRlUXVl\ncnkoCiAgICAgICAgICAgICJzZWxlY3QgbyBmcm9tIE9yZGVyIG8gd2hlcmUg\nOmNpdHkgPSBvLnNoaXBBZGRyZXNzLmNpdHkiKTsKICAgICAgICBxdWVyeS5z\nZXRQYXJhbWV0ZXIoImNpdHkiLCAiU2FuIEpvc2UiKTsKICAgICAgICBMaXN0\nPE9yZGVyPiBvcmRlcnMgPSBxdWVyeS5nZXRSZXN1bHRMaXN0KCk7CgogICAg\nICAgIGFzc2VydEVxdWFscygxLCBvcmRlcnMuc2l6ZSgpKTsKICAgICAgICBP\ncmRlciBvcmRlciA9IG9yZGVycy5nZXQoMCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKE9SREVSXzFfT0lELCBvcmRlci5nZXRPaWQoKSk7CiAgICAgICAgCiAg\nICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nVXBkYXRlKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKCiAgICAgICAgT3JkZXIgb3JkZXIgPSBlbS5maW5kKE9y\nZGVyLmNsYXNzLCBPUkRFUl8xX09JRCk7CiAgICAgICAgVVNBQWRkcmVzcyBh\nZGRyZXNzID0gKFVTQUFkZHJlc3MpIG9yZGVyLmdldFNoaXBBZGRyZXNzKCk7\nCiAgICAgICAgYWRkcmVzcy5zZXRDaXR5KCJDdXBlcnRpbm8iKTsKICAgICAg\nICBhZGRyZXNzLnNldFpJUCg5NTAxNCk7CgogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAg\nICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgb3JkZXIgPSBl\nbS5maW5kKE9yZGVyLmNsYXNzLCBPUkRFUl8xX09JRCk7CiAgICAgICAgYWRk\ncmVzcyA9IChVU0FBZGRyZXNzKSBvcmRlci5nZXRTaGlwQWRkcmVzcygpOwog\nICAgICAgIGFzc2VydEVxdWFscygiQ3VwZXJ0aW5vIiwgYWRkcmVzcy5nZXRD\naXR5KCkpOwogICAgICAgIGFzc2VydEVxdWFscyg5NTAxNCwgYWRkcmVzcy5n\nZXRaSVAoKSk7CiAgICAgICAgCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3ROdWxsaWZ5KCkgewogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgT3JkZXIgb3Jk\nZXIgPSBlbS5maW5kKE9yZGVyLmNsYXNzLCBPUkRFUl8xX09JRCk7CiAgICAg\nICAgb3JkZXIuc2V0U2hpcEFkZHJlc3MobnVsbCk7CgogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgb3Jk\nZXIgPSBlbS5maW5kKE9yZGVyLmNsYXNzLCBPUkRFUl8xX09JRCk7CiAgICAg\nICAgQWRkcmVzcyBhZGRyZXNzID0gb3JkZXIuZ2V0U2hpcEFkZHJlc3MoKTsK\nICAgICAgICBhc3NlcnROdWxsKGFkZHJlc3MpOwogICAgICAgIAogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0WE1MU3RyaW5nVG9D\nb25zdGFudEludENvbXBhcmlzb24oKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZW0uY3JlYXRlUXVlcnkoCiAgICAgICAgICAgICAg\nICAic2VsZWN0IG8gZnJvbSBPcmRlciBvIHdoZXJlIG8uc2hpcEFkZHJlc3Mu\nY2l0eSA9IDk1MTQxIikKICAgICAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0\nKCk7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u\nIGlhZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBmaW5hbGx5\nIHsKICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICAgICAg\nZmFpbCgiY3JlYXRlUXVlcnkgc2hvdWxkIHRocm93IElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbi4iKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0WE1M\nTGlzdFRvQ29uc3RhbnRTdHJpbmdDb21wYXJpc29uKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KAogICAg\nICAgICAgICAgICAgInNlbGVjdCBvIGZyb20gT3JkZXIgbyB3aGVyZSBvLnNo\naXBBZGRyZXNzLnN0cmVldCAiCiAgICAgICAgICAgICAgICAgICAgKyAiPSAn\nNTU1IEJhaWxleSciKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgfSBjYXRj\naCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlhZSkgewogICAgICAgICAg\nICByZXR1cm47CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgZW0u\nY2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgZmFpbCgiY3JlYXRlUXVlcnkg\nc2hvdWxkIHRocm93IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3ViY2xhc3NQcm9wZXJ0eUluWE1M\nRmllbGRDb21wYXJpc29uKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KAogICAgICAgICAgICAgICAgInNl\nbGVjdCBvIGZyb20gT3JkZXIgbyB3aGVyZSBvLnNoaXBBZGRyZXNzLnppcCA9\nIDk1MTQxIikKICAgICAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlhZSkg\newogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgZmFpbCgi\nY3JlYXRlUXVlcnkgc2hvdWxkIHRocm93IElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbi4iKTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihT\ndHJpbmdbXSBhcmdzKSB7CiAgICAgICAgVGVzdFJ1bm5lci5ydW4oVGVzdFhN\nTEN1c3RvbWVyT3JkZXIuY2xhc3MpOwogICAgfQoKICAgIHByaXZhdGUgdm9p\nZCBwZXJzaXN0RW50aXRpZXMoRW50aXR5TWFuYWdlciBlbSkgewogICAgICAg\nIEN1c3RvbWVyIGMyID0gbmV3IEN1c3RvbWVyKCk7CiAgICAgICAgYzIuc2V0\nQ2lkKCBuZXcgQ3VzdG9tZXIuQ3VzdG9tZXJLZXkoIlVTQSIsIDIpICk7CiAg\nICAgICAgYzIuc2V0TmFtZSgiQSZKIEF1dG8iKTsKICAgICAgICBjMi5zZXRS\nYXRpbmcoIENyZWRpdFJhdGluZy5HT09EICk7CiAgICAgICAgYzIuc2V0QWRk\ncmVzcyhuZXcgRUFkZHJlc3MoIjI0ODAgQ2FtcGJlbGwgQXZlIiwgIkNhbXBi\nZWxsIiwgIkNBIgogICAgICAgICAgICAgICAgLCAiOTUxMjMiKSk7CiAgICAg\nICAgZW0ucGVyc2lzdChjMik7CgogICAgICAgIEN1c3RvbWVyIGMxID0gbmV3\nIEN1c3RvbWVyKCk7CiAgICAgICAgYzEuc2V0Q2lkKCBuZXcgQ3VzdG9tZXIu\nQ3VzdG9tZXJLZXkoIlVTQSIsIDEpICk7CiAgICAgICAgYzEuc2V0TmFtZSgi\nSGFycnkncyBBdXRvIik7CiAgICAgICAgYzEuc2V0UmF0aW5nKCBDcmVkaXRS\nYXRpbmcuR09PRCApOwogICAgICAgIGMxLnNldEFkZHJlc3MoIG5ldyBFQWRk\ncmVzcygiMTI1MDAgTW9udGVyZXkiLCAiU2FuIEpvc2UiLCAiQ0EiLAogICAg\nICAgICAgICAgICAgIjk1MTQxIikpOwogICAgICAgIGVtLnBlcnNpc3QoYzEp\nOwoKICAgICAgICBPcmRlciBvMSA9IG5ldyBPcmRlcihPUkRFUl8xX09JRCwg\nT1JERVJfMV9BTU9VTlQsIE9SREVSXzFfREVMSVZFUkVELAogICAgICAgICAg\nICAgICAgYzEpOwogICAgICAgIG8xLnNldFNoaXBBZGRyZXNzKGNyZWF0ZVVT\nQUFkZHJlc3MoYzEuZ2V0TmFtZSgpKSk7CiAgICAgICAgZW0ucGVyc2lzdChv\nMSk7CgogICAgICAgIE9yZGVyIG8yID0gbmV3IE9yZGVyKE9SREVSXzJfT0lE\nLCBPUkRFUl8yX0FNT1VOVCwgT1JERVJfMl9ERUxJVkVSRUQsCiAgICAgICAg\nICAgICAgICBjMSk7CiAgICAgICAgbzIuc2V0U2hpcEFkZHJlc3MoY3JlYXRl\nQ0FOQWRkcmVzcyhjMi5nZXROYW1lKCkpKTsKICAgICAgICBlbS5wZXJzaXN0\nKG8yKTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIHdoZXRoZXIgREJE\naWN0aW9uYXJ5IHN1cHBvcnRzIFhNTCBjb2x1bW4uCiAgICAgKiBUaGlzIGlz\nIGRvbmUgYnkgZm9yY2luZyB0aGUgZXhlY3V0aW9uIG9mCiAgICAgKiB7QGxp\nbmsgREJEaWN0aW9uYXJ5I2Nvbm5lY3RlZENvbmZpZ3VyYXRpb24oQ29ubmVj\ndGlvbil9LgogICAgICogVGhpcyBpcyB3aGVyZSBzb21lIGRpY3Rpb25hcmll\ncyBhY3R1YWxseSBkZXRlcm1pbmUgd2hldGhlciBYTUwgY29sdW1uIGlzCiAg\nICAgKiBzdXBwb3J0ZWQuCiAgICAgKiBAcmV0dXJuIHRydWUgaWYge0BsaW5r\nIERCRGljdGlvbmFyeX0gc3VwcG9ydHMgWE1MIGNvbHVtbgogICAgICovCiAg\nICBwcml2YXRlIGJvb2xlYW4gZGljdGlvbmFyeVN1cHBvcnRzWE1MQ29sdW1u\nKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSBl\nbWYgPSBjcmVhdGVFTUYoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nclNQSSBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nREJEaWN0aW9uYXJ5IGRpY3QgPSAoKEpEQkNDb25maWd1cmF0aW9uKSBlbS5n\nZXRDb25maWd1cmF0aW9uKCkpCiAgICAgICAgICAgIC5nZXREQkRpY3Rpb25h\ncnlJbnN0YW5jZSgpOwogICAgICAgIGNsb3NlRU1GKGVtZik7CiAgICAgICAg\ncmV0dXJuIGRpY3Quc3VwcG9ydHNYTUxDb2x1bW47CiAgICB9CiAgICAKICAg\nIHByaXZhdGUgVVNBQWRkcmVzcyBjcmVhdGVVU0FBZGRyZXNzKFN0cmluZyBu\nYW1lKSB7CiAgICAgICAgVVNBQWRkcmVzcyBhZGRyZXNzID0gbmV3IE9iamVj\ndEZhY3RvcnkoKS5jcmVhdGVVU0FBZGRyZXNzKCk7CiAgICAgICAgYWRkcmVz\ncy5zZXROYW1lKG5hbWUpOwogICAgICAgIGFkZHJlc3MuZ2V0U3RyZWV0KCku\nYWRkKCIxMjUwMCBNb250ZXJleSIpOwogICAgICAgIGFkZHJlc3Muc2V0Q2l0\neSgiU2FuIEpvc2UiKTsKICAgICAgICBhZGRyZXNzLnNldFN0YXRlKCJDQSIp\nOwogICAgICAgIGFkZHJlc3Muc2V0WklQKG5ldyBJbnRlZ2VyKCI5NTE0MSIp\nKTsKICAgICAgICByZXR1cm4gYWRkcmVzczsKICAgIH0KCiAgICBwcml2YXRl\nIENBTkFkZHJlc3MgY3JlYXRlQ0FOQWRkcmVzcyhTdHJpbmcgbmFtZSkgewog\nICAgICAgIENBTkFkZHJlc3MgYWRkcmVzcyA9IG5ldyBPYmplY3RGYWN0b3J5\nKCkuY3JlYXRlQ0FOQWRkcmVzcygpOwogICAgICAgIGFkZHJlc3Muc2V0TmFt\nZShuYW1lKTsKICAgICAgICBhZGRyZXNzLmdldFN0cmVldCgpLmFkZCgiMTIz\nIFdhcmRlbiBSb2FkIik7CiAgICAgICAgYWRkcmVzcy5zZXRDaXR5KCJNYXJr\naGFtIik7CiAgICAgICAgYWRkcmVzcy5zZXRQb3N0YWxDb2RlKCJMNkcgMUM3\nIik7CiAgICAgICAgYWRkcmVzcy5zZXRQcm92aW5jZSgiT04iKTsKICAgICAg\nICByZXR1cm4gYWRkcmVzczsKICAgIH0KICAgIAogICAgcHJpdmF0ZSB2b2lk\nIGFzc2VydE9yZGVyc0VxdWFsKE9yZGVyIG8xLCBPcmRlciBvMikgewogICAg\nICAgIGFzc2VydEVxdWFscyhvMS5nZXRPaWQoKSwgbzIuZ2V0T2lkKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyhvMS5nZXRBbW91bnQoKSwgbzIuZ2V0QW1v\ndW50KCkpOwogICAgICAgIGFzc2VydEVxdWFscyhvMS5pc0RlbGl2ZXJlZCgp\nLCBvMi5pc0RlbGl2ZXJlZCgpKTsKICAgIH0KCn0K\n","encoding":"base64"}

