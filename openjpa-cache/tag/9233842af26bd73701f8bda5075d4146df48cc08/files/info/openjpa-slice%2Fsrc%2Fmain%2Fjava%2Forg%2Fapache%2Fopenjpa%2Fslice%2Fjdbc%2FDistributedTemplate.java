{"sha":"22b694e61e0187b840321cad774a08989b0520c8","node_id":"MDQ6QmxvYjIwNjM2NDoyMmI2OTRlNjFlMDE4N2I4NDAzMjFjYWQ3NzRhMDg5ODliMDUyMGM4","size":7244,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/22b694e61e0187b840321cad774a08989b0520c8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuc2xpY2UuamRiYzsKCmltcG9y\ndCBqYXZhLmxhbmcucmVmbGVjdC5Db25zdHJ1Y3RvcjsKaW1wb3J0IGphdmEu\nc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7Cmlt\ncG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnNxbC5T\nUUxXYXJuaW5nOwppbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50OwppbXBvcnQg\namF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRv\ncjsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbC5Db25jcmV0ZUNsYXNzR2VuZXJhdG9yOwoKLyoq\nCiAqIEEgdGVtcGxhdGUgZm9yIG11bHRpcGxlIFN0YXRlbWVudHMgYmVpbmcg\nZXhlY3V0ZWQgYnkgbXVsdGlwbGUgY29ubmVjdGlvbnMuCiAqIAogKiBAYXV0\naG9yIFBpbmFraSBQb2RkYXIgCiAqCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xh\nc3MgRGlzdHJpYnV0ZWRUZW1wbGF0ZTxUIGV4dGVuZHMgU3RhdGVtZW50PiAK\nCWltcGxlbWVudHMgU3RhdGVtZW50LCBJdGVyYWJsZTxUPiB7CiAgICBzdGF0\naWMgZmluYWwgQ29uc3RydWN0b3I8RGlzdHJpYnV0ZWRUZW1wbGF0ZT4gY29u\nY3JldGVJbXBsOwoKICAgIHN0YXRpYyB7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgY29uY3JldGVJbXBsID0gQ29uY3JldGVDbGFzc0dlbmVyYXRvci5n\nZXRDb25jcmV0ZUNvbnN0cnVjdG9yKERpc3RyaWJ1dGVkVGVtcGxhdGUuY2xh\nc3MsIAogICAgICAgICAgICAgICAgRGlzdHJpYnV0ZWRDb25uZWN0aW9uLmNs\nYXNzKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uSW5Jbml0aWFsaXplckVycm9yKGUp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgTGlzdDxUPiBzdG10\ncyA9IG5ldyBBcnJheUxpc3Q8VD4oKTsKCXByb3RlY3RlZCBmaW5hbCBEaXN0\ncmlidXRlZENvbm5lY3Rpb24gY29uOwoJcHJvdGVjdGVkIFQgbWFzdGVyOwoJ\nCglwdWJsaWMgRGlzdHJpYnV0ZWRUZW1wbGF0ZShEaXN0cmlidXRlZENvbm5l\nY3Rpb24gYykgewoJCWNvbiA9IGM7Cgl9CgkKICAgIHB1YmxpYyBzdGF0aWMg\nRGlzdHJpYnV0ZWRUZW1wbGF0ZSBuZXdJbnN0YW5jZShEaXN0cmlidXRlZENv\nbm5lY3Rpb24gY29ubikgewogICAgICAgIHJldHVybiBDb25jcmV0ZUNsYXNz\nR2VuZXJhdG9yLm5ld0luc3RhbmNlKGNvbmNyZXRlSW1wbCwgY29ubik7CiAg\nICB9CiAgICAKCXB1YmxpYyBJdGVyYXRvcjxUPiBpdGVyYXRvcigpIHsKCQly\nZXR1cm4gc3RtdHMuaXRlcmF0b3IoKTsKCX0KCQoJcHVibGljIHZvaWQgYWRk\nKFQgcykgewoJCWlmIChzdG10cy5pc0VtcHR5KCkpCgkJCW1hc3RlciA9IHM7\nCgkJdHJ5IHsKCQkJaWYgKCFjb24uY29udGFpbnMocy5nZXRDb25uZWN0aW9u\nKCkpKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbihzICsKICAgICAgICAgICAgICAgICAgICAgICAgIiBoYXMg\nZGlmZmVyZW50IGNvbm5lY3Rpb24iKTsKCQkJc3RtdHMuYWRkKHMpOwoJCX0g\nY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7CgkJCWUucHJpbnRTdGFja1RyYWNl\nKCk7CgkJfQoJfQoJCglwdWJsaWMgdm9pZCBhZGRCYXRjaChTdHJpbmcgc3Fs\nKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlmb3IgKFQgczp0aGlzKQoJCQlz\nLmFkZEJhdGNoKHNxbCk7Cgl9CgoJcHVibGljIHZvaWQgY2FuY2VsKCkgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CgkJZm9yIChUIHM6dGhpcykKCQkJcy5jYW5j\nZWwoKTsKCX0KCglwdWJsaWMgdm9pZCBjbGVhckJhdGNoKCkgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CgkJZm9yIChUIHM6dGhpcykKCQkJcy5jbGVhckJhdGNo\nKCk7Cgl9CgoJcHVibGljIHZvaWQgY2xlYXJXYXJuaW5ncygpIHRocm93cyBT\nUUxFeGNlcHRpb24gewoJCWZvciAoVCBzOnRoaXMpCgkJCXMuY2xlYXJXYXJu\naW5ncygpOwoJfQoKCXB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CgkJZm9yIChUIHM6dGhpcykKCQkJcy5jbG9zZSgpOwoJfQoK\nCXB1YmxpYyBib29sZWFuIGV4ZWN1dGUoU3RyaW5nIGFyZzApIHRocm93cyBT\nUUxFeGNlcHRpb24gewoJCWJvb2xlYW4gcmV0ID0gdHJ1ZTsKCQlmb3IgKFQg\nczp0aGlzKQoJCQlyZXQgPSBzLmV4ZWN1dGUoYXJnMCkgJiByZXQ7CgkJcmV0\ndXJuIHJldDsKCX0KCglwdWJsaWMgYm9vbGVhbiBleGVjdXRlKFN0cmluZyBh\ncmcwLCBpbnQgYXJnMSkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJYm9vbGVh\nbiByZXQgPSB0cnVlOwoJCWZvciAoVCBzOnRoaXMpCgkJCXJldCA9IHMuZXhl\nY3V0ZShhcmcwLCBhcmcxKSAmIHJldDsKCQlyZXR1cm4gcmV0OwoJfQoKCXB1\nYmxpYyBib29sZWFuIGV4ZWN1dGUoU3RyaW5nIGFyZzAsIGludFtdIGFyZzEp\nIHRocm93cyBTUUxFeGNlcHRpb24gewoJCWJvb2xlYW4gcmV0ID0gdHJ1ZTsK\nCQlmb3IgKFQgczp0aGlzKQoJCQlyZXQgPSBzLmV4ZWN1dGUoYXJnMCwgYXJn\nMSkgJiByZXQ7CgkJcmV0dXJuIHJldDsKCX0KCglwdWJsaWMgYm9vbGVhbiBl\neGVjdXRlKFN0cmluZyBhcmcwLCBTdHJpbmdbXSBhcmcxKSB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKCQlib29sZWFuIHJldCA9IHRydWU7CgkJZm9yIChUIHM6\ndGhpcykKCQkJcmV0ID0gcy5leGVjdXRlKGFyZzAsIGFyZzEpICYgcmV0OwoJ\nCXJldHVybiByZXQ7Cgl9CgoJcHVibGljIGludFtdIGV4ZWN1dGVCYXRjaCgp\nIHRocm93cyBTUUxFeGNlcHRpb24gewoJCWludFtdIHJldCA9IG5ldyBpbnRb\nMF07CgkJZm9yIChTdGF0ZW1lbnQgczp0aGlzKSB7CgkJCWludFtdIHRtcCA9\nIHMuZXhlY3V0ZUJhdGNoKCk7CgkJCXJldCA9IG5ldyBpbnRbcmV0Lmxlbmd0\naCArIHRtcC5sZW5ndGhdOwogICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5\nKHRtcCwgMCwgcmV0LCByZXQubGVuZ3RoLXRtcC5sZW5ndGgsIHRtcC5sZW5n\ndGgpOwoJCX0KCQlyZXR1cm4gcmV0OwoJfQoKCXB1YmxpYyBSZXN1bHRTZXQg\nZXhlY3V0ZVF1ZXJ5KCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJRGlzdHJp\nYnV0ZWRSZXN1bHRTZXQgcnMgPSBEaXN0cmlidXRlZFJlc3VsdFNldC5uZXdJ\nbnN0YW5jZSgpOwoJCWZvciAoVCBzOnRoaXMpCgkJCXJzLmFkZChzLmV4ZWN1\ndGVRdWVyeShudWxsKSk7CgkJcmV0dXJuIHJzOwoJfQoKCXB1YmxpYyBSZXN1\nbHRTZXQgZXhlY3V0ZVF1ZXJ5KFN0cmluZyBhcmcwKSB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKCQlEaXN0cmlidXRlZFJlc3VsdFNldCBycyA9IERpc3RyaWJ1\ndGVkUmVzdWx0U2V0Lm5ld0luc3RhbmNlKCk7CgkJZm9yIChUIHM6dGhpcykK\nCQkJcnMuYWRkKHMuZXhlY3V0ZVF1ZXJ5KGFyZzApKTsKCQlyZXR1cm4gcnM7\nCgl9CgoJcHVibGljIGludCBleGVjdXRlVXBkYXRlKFN0cmluZyBhcmcwKSB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlpbnQgcmV0ID0gMDsKCQlmb3IgKFQg\nczp0aGlzKQoJCQlyZXQgKz0gcy5leGVjdXRlVXBkYXRlKGFyZzApOwoJCXJl\ndHVybiByZXQ7Cgl9CgoJcHVibGljIGludCBleGVjdXRlVXBkYXRlKFN0cmlu\nZyBhcmcwLCBpbnQgYXJnMSkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJaW50\nIHJldCA9IDA7CgkJZm9yIChUIHM6dGhpcykKCQkJcmV0ICs9IHMuZXhlY3V0\nZVVwZGF0ZShhcmcwLCBhcmcxKTsKCQlyZXR1cm4gcmV0OwoJfQoKCXB1Ymxp\nYyBpbnQgZXhlY3V0ZVVwZGF0ZShTdHJpbmcgYXJnMCwgaW50W10gYXJnMSkg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJaW50IHJldCA9IDA7CgkJZm9yIChU\nIHM6dGhpcykKCQkJcmV0ICs9IHMuZXhlY3V0ZVVwZGF0ZShhcmcwLCBhcmcx\nKTsKCQlyZXR1cm4gcmV0OwoJfQoKICAgIHB1YmxpYyBpbnQgZXhlY3V0ZVVw\nZGF0ZShTdHJpbmcgYXJnMCwgU3RyaW5nW10gYXJnMSkgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CgkJaW50IHJldCA9IDA7CgkJZm9yIChUIHM6dGhpcykKCQkJ\ncmV0ICs9IHMuZXhlY3V0ZVVwZGF0ZShhcmcwLCBhcmcxKTsKCQlyZXR1cm4g\ncmV0OwoJfQoKCXB1YmxpYyBDb25uZWN0aW9uIGdldENvbm5lY3Rpb24oKSB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlyZXR1cm4gY29uOwoJfQoKCXB1Ymxp\nYyBpbnQgZ2V0RmV0Y2hEaXJlY3Rpb24oKSB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKCQlyZXR1cm4gbWFzdGVyLmdldEZldGNoRGlyZWN0aW9uKCk7Cgl9CgoJ\ncHVibGljIGludCBnZXRGZXRjaFNpemUoKSB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKCQlyZXR1cm4gbWFzdGVyLmdldEZldGNoU2l6ZSgpOwoJfQoKCXB1Ymxp\nYyBSZXN1bHRTZXQgZ2V0R2VuZXJhdGVkS2V5cygpIHRocm93cyBTUUxFeGNl\ncHRpb24gewoJCURpc3RyaWJ1dGVkUmVzdWx0U2V0IG1ycyA9IERpc3RyaWJ1\ndGVkUmVzdWx0U2V0Lm5ld0luc3RhbmNlKCk7CgkJZm9yIChUIHM6dGhpcykK\nCQkJbXJzLmFkZChzLmdldEdlbmVyYXRlZEtleXMoKSk7CgkJcmV0dXJuIG1y\nczsKCX0KCglwdWJsaWMgaW50IGdldE1heEZpZWxkU2l6ZSgpIHRocm93cyBT\nUUxFeGNlcHRpb24gewoJCXJldHVybiBtYXN0ZXIuZ2V0TWF4RmllbGRTaXpl\nKCk7Cgl9CgoJcHVibGljIGludCBnZXRNYXhSb3dzKCkgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CgkJcmV0dXJuIG1hc3Rlci5nZXRNYXhSb3dzKCk7Cgl9CgoJ\ncHVibGljIGJvb2xlYW4gZ2V0TW9yZVJlc3VsdHMoKSB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKCQlmb3IgKFQgczp0aGlzKQoJCQlpZiAocy5nZXRNb3JlUmVz\ndWx0cygpKQoJCQkJcmV0dXJuIHRydWU7CgkJcmV0dXJuIGZhbHNlOwoJfQoK\nCXB1YmxpYyBib29sZWFuIGdldE1vcmVSZXN1bHRzKGludCBhcmcwKSB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKCQlmb3IgKFQgczp0aGlzKQoJCQlpZiAocy5n\nZXRNb3JlUmVzdWx0cyhhcmcwKSkKCQkJCXJldHVybiB0cnVlOwoJCXJldHVy\nbiBmYWxzZTsKCX0KCglwdWJsaWMgaW50IGdldFF1ZXJ5VGltZW91dCgpIHRo\ncm93cyBTUUxFeGNlcHRpb24gewoJCXJldHVybiBtYXN0ZXIuZ2V0UXVlcnlU\naW1lb3V0KCk7Cgl9CgoJcHVibGljIFJlc3VsdFNldCBnZXRSZXN1bHRTZXQo\nKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlEaXN0cmlidXRlZFJlc3VsdFNl\ndCBycyA9IERpc3RyaWJ1dGVkUmVzdWx0U2V0Lm5ld0luc3RhbmNlKCk7CgkJ\nZm9yIChUIHM6dGhpcykKCQkJcnMuYWRkKHMuZ2V0UmVzdWx0U2V0KCkpOwoJ\nCXJldHVybiByczsKCX0KCglwdWJsaWMgaW50IGdldFJlc3VsdFNldENvbmN1\ncnJlbmN5KCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJcmV0dXJuIG1hc3Rl\nci5nZXRSZXN1bHRTZXRDb25jdXJyZW5jeSgpOwoJfQoKCXB1YmxpYyBpbnQg\nZ2V0UmVzdWx0U2V0SG9sZGFiaWxpdHkoKSB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKCQlyZXR1cm4gbWFzdGVyLmdldFJlc3VsdFNldEhvbGRhYmlsaXR5KCk7\nCgl9CgoJcHVibGljIGludCBnZXRSZXN1bHRTZXRUeXBlKCkgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CgkJcmV0dXJuIG1hc3Rlci5nZXRSZXN1bHRTZXRUeXBl\nKCk7Cgl9CgoJcHVibGljIGludCBnZXRVcGRhdGVDb3VudCgpIHRocm93cyBT\nUUxFeGNlcHRpb24gewoJCXJldHVybiBtYXN0ZXIuZ2V0VXBkYXRlQ291bnQo\nKTsKCX0KCglwdWJsaWMgU1FMV2FybmluZyBnZXRXYXJuaW5ncygpIHRocm93\ncyBTUUxFeGNlcHRpb24gewoJCXJldHVybiBtYXN0ZXIuZ2V0V2FybmluZ3Mo\nKTsKCX0KCglwdWJsaWMgdm9pZCBzZXRDdXJzb3JOYW1lKFN0cmluZyBuYW1l\nKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlmb3IgKFQgczp0aGlzKQoJCQlz\nLnNldEN1cnNvck5hbWUobmFtZSk7Cgl9CgoJcHVibGljIHZvaWQgc2V0RXNj\nYXBlUHJvY2Vzc2luZyhib29sZWFuIGZsYWcpIHRocm93cyBTUUxFeGNlcHRp\nb24gewoJCWZvciAoVCBzOnRoaXMpCgkJCXMuc2V0RXNjYXBlUHJvY2Vzc2lu\nZyhmbGFnKTsKCX0KCglwdWJsaWMgdm9pZCBzZXRGZXRjaERpcmVjdGlvbihp\nbnQgZGlyKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlmb3IgKFQgczp0aGlz\nKQoJCQlzLnNldEZldGNoRGlyZWN0aW9uKGRpcik7Cgl9CgoJcHVibGljIHZv\naWQgc2V0RmV0Y2hTaXplKGludCBzaXplKSB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKCQlmb3IgKFQgczp0aGlzKQoJCQlzLnNldEZldGNoU2l6ZShzaXplKTsK\nCX0KCglwdWJsaWMgdm9pZCBzZXRNYXhGaWVsZFNpemUoaW50IHNpemUpIHRo\ncm93cyBTUUxFeGNlcHRpb24gewoJCWZvciAoVCBzOnRoaXMpCgkJCXMuc2V0\nTWF4RmllbGRTaXplKHNpemUpOwoJfQoKCXB1YmxpYyB2b2lkIHNldE1heFJv\nd3MoaW50IG4pIHRocm93cyBTUUxFeGNlcHRpb24gewoJCWZvciAoVCBzOnRo\naXMpCgkJCXMuc2V0TWF4Um93cyhuKTsKCX0KCQoJcHVibGljIHZvaWQgc2V0\nUXVlcnlUaW1lb3V0KGludCBuKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlm\nb3IgKFQgczp0aGlzKQoJCQlzLnNldFF1ZXJ5VGltZW91dChuKTsKCX0KfQo=\n","encoding":"base64"}

