{"sha":"0644845a5e7ee026b9580585377fe820e7723fdb","node_id":"MDQ6QmxvYjIwNjM2NDowNjQ0ODQ1YTVlN2VlMDI2Yjk1ODA1ODUzNzdmZTgyMGU3NzIzZmRi","size":5726,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0644845a5e7ee026b9580585377fe820e7723fdb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5pby5QcmludFdyaXRlcjsKaW1wb3J0IGphdmEuc2VjdXJpdHku\nQWNjZXNzQ29udHJvbGxlcjsKaW1wb3J0IGphdmEuc2VjdXJpdHkuUHJpdmls\nZWdlZEFjdGlvbkV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rp\nb247CmltcG9ydCBqYXZhLnNxbC5Ecml2ZXI7CmltcG9ydCBqYXZhLnNxbC5E\ncml2ZXJNYW5hZ2VyOwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuUHJvcGVy\ndGllczsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJE\naWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLlN0b3JlRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnV0aWwuVXNlckV4Y2VwdGlvbjsKCi8qKgogKiBOb24tcG9vbGluZyBkcml2\nZXIgZGF0YSBzb3VyY2UuCiAqLwpwdWJsaWMgY2xhc3MgU2ltcGxlRHJpdmVy\nRGF0YVNvdXJjZQogICAgaW1wbGVtZW50cyBEcml2ZXJEYXRhU291cmNlIHsK\nCiAgICBwcml2YXRlIFN0cmluZyBfY29ubmVjdGlvbkRyaXZlck5hbWU7CiAg\nICBwcml2YXRlIFN0cmluZyBfY29ubmVjdGlvblVSTDsKICAgIHByaXZhdGUg\nU3RyaW5nIF9jb25uZWN0aW9uVXNlck5hbWU7CiAgICBwcml2YXRlIFN0cmlu\nZyBfY29ubmVjdGlvblBhc3N3b3JkOwogICAgcHJpdmF0ZSBQcm9wZXJ0aWVz\nIF9jb25uZWN0aW9uUHJvcGVydGllczsKICAgIHByaXZhdGUgUHJvcGVydGll\ncyBfY29ubmVjdGlvbkZhY3RvcnlQcm9wZXJ0aWVzOwogICAgcHJpdmF0ZSBE\ncml2ZXIgX2RyaXZlcjsKICAgIHByaXZhdGUgQ2xhc3NMb2FkZXIgX2NsYXNz\nTG9hZGVyOwogICAgCiAgICBwcm90ZWN0ZWQgc3RhdGljIExvY2FsaXplciBf\nbG9jID0gCiAgICAJTG9jYWxpemVyLmZvclBhY2thZ2UoU2ltcGxlRHJpdmVy\nRGF0YVNvdXJjZS5jbGFzcyk7CgogICAgcHVibGljIENvbm5lY3Rpb24gZ2V0\nQ29ubmVjdGlvbigpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIGdldENvbm5lY3Rpb24obnVsbCk7CiAgICB9CgogICAg\ncHVibGljIENvbm5lY3Rpb24gZ2V0Q29ubmVjdGlvbihTdHJpbmcgdXNlcm5h\nbWUsIFN0cmluZyBwYXNzd29yZCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICBQcm9wZXJ0aWVzIHByb3BzID0gbmV3IFByb3BlcnRp\nZXMoKTsKICAgICAgICBpZiAodXNlcm5hbWUgPT0gbnVsbCkKICAgICAgICAg\nICAgdXNlcm5hbWUgPSBfY29ubmVjdGlvblVzZXJOYW1lOwogICAgICAgIGlm\nICh1c2VybmFtZSAhPSBudWxsKQogICAgICAgICAgICBwcm9wcy5wdXQoInVz\nZXIiLCB1c2VybmFtZSk7CgogICAgICAgIGlmIChwYXNzd29yZCA9PSBudWxs\nKQogICAgICAgICAgICBwYXNzd29yZCA9IF9jb25uZWN0aW9uUGFzc3dvcmQ7\nCiAgICAgICAgaWYgKHBhc3N3b3JkICE9IG51bGwpCiAgICAgICAgICAgIHBy\nb3BzLnB1dCgicGFzc3dvcmQiLCBwYXNzd29yZCk7CgogICAgICAgIHJldHVy\nbiBnZXRDb25uZWN0aW9uKHByb3BzKTsKICAgIH0KCiAgICBwdWJsaWMgQ29u\nbmVjdGlvbiBnZXRDb25uZWN0aW9uKFByb3BlcnRpZXMgcHJvcHMpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAJQ29ubmVjdGlvbiBjb24g\nPSBnZXREcml2ZXIoKS5jb25uZWN0KF9jb25uZWN0aW9uVVJMLCBwcm9wcyk7\nCiAgICAJaWYgKGNvbiA9PSBudWxsKSB7CiAgICAgICAgCXRocm93IG5ldyBV\nc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJjb25uLWZhaWxlZCIsCiAgICAgICAg\nCQkJX2Nvbm5lY3Rpb25Ecml2ZXJOYW1lLCBfY29ubmVjdGlvblVSTCwgcHJv\ncHMpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbjsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGdldExvZ2luVGltZW91dCgpIHsKICAgICAgICByZXR1\ncm4gMDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRMb2dpblRpbWVvdXQo\naW50IHNlY29uZHMpIHsKICAgIH0KCiAgICBwdWJsaWMgUHJpbnRXcml0ZXIg\nZ2V0TG9nV3JpdGVyKCkgewogICAgICAgIHJldHVybiBEcml2ZXJNYW5hZ2Vy\nLmdldExvZ1dyaXRlcigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldExv\nZ1dyaXRlcihQcmludFdyaXRlciBvdXQpIHsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBpbml0REJEaWN0aW9uYXJ5KERCRGljdGlvbmFyeSBkaWN0KSB7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0Q29ubmVjdGlvblVSTChTdHJpbmcg\nY29ubmVjdGlvblVSTCkgewogICAgICAgIF9jb25uZWN0aW9uVVJMID0gY29u\nbmVjdGlvblVSTDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldENvbm5l\nY3Rpb25VUkwoKSB7CiAgICAgICAgcmV0dXJuIF9jb25uZWN0aW9uVVJMOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldENvbm5lY3Rpb25Vc2VyTmFtZShT\ndHJpbmcgY29ubmVjdGlvblVzZXJOYW1lKSB7CiAgICAgICAgX2Nvbm5lY3Rp\nb25Vc2VyTmFtZSA9IGNvbm5lY3Rpb25Vc2VyTmFtZTsKICAgIH0KCiAgICBw\ndWJsaWMgU3RyaW5nIGdldENvbm5lY3Rpb25Vc2VyTmFtZSgpIHsKICAgICAg\nICByZXR1cm4gX2Nvbm5lY3Rpb25Vc2VyTmFtZTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzZXRDb25uZWN0aW9uUGFzc3dvcmQoU3RyaW5nIGNvbm5lY3Rp\nb25QYXNzd29yZCkgewogICAgICAgIF9jb25uZWN0aW9uUGFzc3dvcmQgPSBj\nb25uZWN0aW9uUGFzc3dvcmQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nQ29ubmVjdGlvblByb3BlcnRpZXMoUHJvcGVydGllcyBwcm9wcykgewogICAg\nICAgIF9jb25uZWN0aW9uUHJvcGVydGllcyA9IHByb3BzOwogICAgfQoKICAg\nIHB1YmxpYyBQcm9wZXJ0aWVzIGdldENvbm5lY3Rpb25Qcm9wZXJ0aWVzKCkg\newogICAgICAgIHJldHVybiBfY29ubmVjdGlvblByb3BlcnRpZXM7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0Q29ubmVjdGlvbkZhY3RvcnlQcm9wZXJ0\naWVzKFByb3BlcnRpZXMgcHJvcHMpIHsKICAgICAgICBfY29ubmVjdGlvbkZh\nY3RvcnlQcm9wZXJ0aWVzID0gcHJvcHM7CiAgICB9CgogICAgcHVibGljIFBy\nb3BlcnRpZXMgZ2V0Q29ubmVjdGlvbkZhY3RvcnlQcm9wZXJ0aWVzKCkgewog\nICAgICAgIHJldHVybiBfY29ubmVjdGlvbkZhY3RvcnlQcm9wZXJ0aWVzOwog\nICAgfQoKICAgIHB1YmxpYyBMaXN0IGNyZWF0ZUNvbm5lY3Rpb25EZWNvcmF0\nb3JzKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldENsYXNzTG9hZGVyKENsYXNzTG9hZGVyIGNsYXNzTG9hZGVy\nKSB7CiAgICAgICAgX2NsYXNzTG9hZGVyID0gY2xhc3NMb2FkZXI7CiAgICB9\nCgogICAgcHVibGljIENsYXNzTG9hZGVyIGdldENsYXNzTG9hZGVyKCkgewog\nICAgICAgIHJldHVybiBfY2xhc3NMb2FkZXI7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgc2V0Q29ubmVjdGlvbkRyaXZlck5hbWUoU3RyaW5nIGNvbm5lY3Rp\nb25Ecml2ZXJOYW1lKSB7CiAgICAgICAgX2Nvbm5lY3Rpb25Ecml2ZXJOYW1l\nID0gY29ubmVjdGlvbkRyaXZlck5hbWU7CiAgICB9CgogICAgcHVibGljIFN0\ncmluZyBnZXRDb25uZWN0aW9uRHJpdmVyTmFtZSgpIHsKICAgICAgICByZXR1\ncm4gX2Nvbm5lY3Rpb25Ecml2ZXJOYW1lOwogICAgfQoKICAgIHByaXZhdGUg\nRHJpdmVyIGdldERyaXZlcigpIHsKICAgICAgICBpZiAoX2RyaXZlciAhPSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gX2RyaXZlcjsKCiAgICAgICAgdHJ5\nIHsgCiAgICAgICAgICAgIF9kcml2ZXIgPSBEcml2ZXJNYW5hZ2VyLmdldERy\naXZlcihfY29ubmVjdGlvblVSTCk7CiAgICAgICAgICAgIGlmIChfZHJpdmVy\nICE9IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gX2RyaXZlcjsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KCiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgQ2xhc3MuZm9yTmFtZShfY29ubmVjdGlv\nbkRyaXZlck5hbWUsIHRydWUsIF9jbGFzc0xvYWRlcik7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgX2RyaXZlciA9IERyaXZlck1hbmFnZXIuZ2V0RHJpdmVy\nKF9jb25uZWN0aW9uVVJMKTsKICAgICAgICAgICAgaWYgKF9kcml2ZXIgIT0g\nbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBfZHJpdmVyOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQoKICAgICAgICB0\ncnkgewogICAgICAgICAgICBDbGFzcyBjID0gQ2xhc3MuZm9yTmFtZShfY29u\nbmVjdGlvbkRyaXZlck5hbWUsCiAgICAgICAgICAgICAgICB0cnVlLCBfY2xh\nc3NMb2FkZXIpOwogICAgICAgICAgICBfZHJpdmVyID0gKERyaXZlcikgQWNj\nZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICBK\nMkRvUHJpdkhlbHBlci5uZXdJbnN0YW5jZUFjdGlvbihjKSk7CiAgICAgICAg\nICAgIHJldHVybiBfZHJpdmVyOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUnVudGltZUV4\nY2VwdGlvbikKICAgICAgICAgICAgICAgIHRocm93KFJ1bnRpbWVFeGNlcHRp\nb24pIGU7CiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUHJpdmlsZWdl\nZEFjdGlvbkV4Y2VwdGlvbikKICAgICAgICAgICAgICAgIGUgPSAoKFByaXZp\nbGVnZWRBY3Rpb25FeGNlcHRpb24pIGUpLmdldEV4Y2VwdGlvbigpOwogICAg\nICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICAgICAg\nfQogICAgfQp9Cgo=\n","encoding":"base64"}

