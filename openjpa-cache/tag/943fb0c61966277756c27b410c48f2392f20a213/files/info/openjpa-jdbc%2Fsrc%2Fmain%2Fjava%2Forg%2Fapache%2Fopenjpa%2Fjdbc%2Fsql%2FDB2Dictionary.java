{"sha":"fbad2bfa016153b4d16ea2252ee17e1b34ab5107","node_id":"MDQ6QmxvYjIwNjM2NDpmYmFkMmJmYTAxNjE1M2I0ZDE2ZWEyMjUyZWUxN2UxYjM0YWI1MTA3","size":31320,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/fbad2bfa016153b4d16ea2252ee17e1b34ab5107","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWw7DQoNCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7\nDQppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsNCmltcG9ydCBqYXZhLnNx\nbC5EYXRhYmFzZU1ldGFEYXRhOw0KaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2Vw\ndGlvbjsNCmltcG9ydCBqYXZhLnNxbC5UeXBlczsNCmltcG9ydCBqYXZhLnV0\naWwuQXJyYXlzOw0KaW1wb3J0IGphdmEudXRpbC5TdHJpbmdUb2tlbml6ZXI7\nDQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5MaXQ7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuUGFyYW07DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuVmFs\nOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1\nbW47DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLklu\nZGV4Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5T\nY2hlbWE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLlNlcXVlbmNlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5UYWJsZTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkZpbHRlcnM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5K\nYXZhVHlwZXM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3Bl\nbkpQQUV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsNCg0KaW1wb3J0IHNlcnAudXRpbC5T\ndHJpbmdzOw0KDQovKioNCiAqIERpY3Rpb25hcnkgZm9yIElCTSBEQjIgZGF0\nYWJhc2UuDQogKi8NCnB1YmxpYyBjbGFzcyBEQjJEaWN0aW9uYXJ5DQogICAg\nZXh0ZW5kcyBBYnN0cmFjdERCMkRpY3Rpb25hcnkgew0KICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBh\nY2thZ2UNCiAgICAgICAgKERCMkRpY3Rpb25hcnkuY2xhc3MpOw0KDQogICAg\ncHVibGljIFN0cmluZyBvcHRpbWl6ZUNsYXVzZSA9ICJvcHRpbWl6ZSBmb3Ii\nOw0KICAgIHB1YmxpYyBTdHJpbmcgcm93Q2xhdXNlID0gInJvdyI7DQogICAg\ncHJvdGVjdGVkIGludCBkYjJTZXJ2ZXJUeXBlID0gMDsNCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIGludCBkYjJJU2VyaWVzVjVSM09yRWFybGllciA9IDE7\nDQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgZGIyVURCVjgxT3JFYXJs\naWVyID0gMjsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBkYjJaT1NW\nOHhPckxhdGVyID0gMzsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBk\nYjJVREJWODJPckxhdGVyID0gNDsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBkYjJJU2VyaWVzVjVSNE9yTGF0ZXIgPSA1Ow0KCXByaXZhdGUgc3Rh\ndGljIGZpbmFsIFN0cmluZyBmb3JVcGRhdGUgPSAiRk9SIFVQREFURSI7DQog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIHdpdGhSU0NsYXVzZSA9\nICJXSVRIIFJTIjsNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nd2l0aFJSQ2xhdXNlID0gIldJVEggUlIiOw0KICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIFN0cmluZyB1c2VLZWVwVXBkYXRlTG9ja0NsYXVzZQ0KICAgICAg\nICA9ICJVU0UgQU5EIEtFRVAgVVBEQVRFIExPQ0tTIjsNCiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgdXNlS2VlcEV4Y2x1c2l2ZUxvY2tDbGF1\nc2UNCiAgICAgICAgPSAiVVNFIEFORCBLRUVQIEVYQ0xVU0lWRSBMT0NLUyI7\nDQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIGZvclJlYWRPbmx5\nQ2xhdXNlID0gIkZPUiBSRUFEIE9OTFkiOw0KICAgIHByb3RlY3RlZCBTdHJp\nbmcgZGF0YWJhc2VQcm9kdWN0TmFtZSA9ICIiOw0KICAgIHByb3RlY3RlZCBT\ndHJpbmcgZGF0YWJhc2VQcm9kdWN0VmVyc2lvbiA9ICIiOw0KICAgIHByb3Rl\nY3RlZCBpbnQgbWFqID0gMDsNCiAgICBwcm90ZWN0ZWQgaW50IG1pbiA9IDA7\nDQoNCiAgICBwdWJsaWMgREIyRGljdGlvbmFyeSgpIHsNCiAgICAgICAgcGxh\ndGZvcm0gPSAiREIyIjsNCiAgICAgICAgdmFsaWRhdGlvblNRTCA9ICJTRUxF\nQ1QgRElTVElOQ1QoQ1VSUkVOVCBUSU1FU1RBTVApIEZST00gIg0KICAgICAg\nICAgICAgKyAiU1lTSUJNLlNZU1RBQkxFUyI7DQogICAgICAgIHN1cHBvcnRz\nU2VsZWN0RW5kSW5kZXggPSB0cnVlOw0KDQogICAgICAgIG5leHRTZXF1ZW5j\nZVF1ZXJ5ID0gIlZBTFVFUyBORVhUVkFMIEZPUiB7MH0iOw0KDQogICAgICAg\nIHNlcXVlbmNlU1FMID0gIlNFTEVDVCBTRVFTQ0hFTUEgQVMgU0VRVUVOQ0Vf\nU0NIRU1BLCAiDQogICAgICAgICAgICArICJTRVFOQU1FIEFTIFNFUVVFTkNF\nX05BTUUgRlJPTSBTWVNDQVQuU0VRVUVOQ0VTIjsNCiAgICAgICAgc2VxdWVu\nY2VTY2hlbWFTUUwgPSAiU0VRU0NIRU1BID0gPyI7DQogICAgICAgIHNlcXVl\nbmNlTmFtZVNRTCA9ICJTRVFOQU1FID0gPyI7DQogICAgICAgIGNoYXJhY3Rl\nckNvbHVtblNpemUgPSAyNTQ7DQoNCiAgICAgICAgYmluYXJ5VHlwZU5hbWUg\nPSAiQkxPQigxTSkiOw0KICAgICAgICBsb25nVmFyYmluYXJ5VHlwZU5hbWUg\nPSAiQkxPQigxTSkiOw0KICAgICAgICB2YXJiaW5hcnlUeXBlTmFtZSA9ICJC\nTE9CKDFNKSI7DQogICAgICAgIGNsb2JUeXBlTmFtZSA9ICJDTE9CKDFNKSI7\nDQogICAgICAgIGxvbmdWYXJjaGFyVHlwZU5hbWUgPSAiTE9ORyBWQVJDSEFS\nIjsNCiAgICAgICAgZGF0ZVByZWNpc2lvbiA9IE1JQ1JPOw0KICAgICAgICBz\ndG9yZUNoYXJzQXNOdW1iZXJzID0gZmFsc2U7DQoNCiAgICAgICAgZml4ZWRT\naXplVHlwZU5hbWVTZXQuYWRkQWxsKEFycmF5cy5hc0xpc3QobmV3IFN0cmlu\nZ1tdew0KICAgICAgICAgICAgIkxPTkcgVkFSQ0hBUiBGT1IgQklUIERBVEEi\nLCAiTE9ORyBWQVJDSEFSIiwgIkxPTkcgVkFSR1JBUEhJQyIsDQogICAgICAg\nIH0pKTsNCiAgICAgICAgc3lzdGVtU2NoZW1hcyA9IG5ldyBTdHJpbmcoDQog\nICAgICAgICAgICAgICAgIlNZU0NBVCxTWVNJQk0sU1lTU1RBVCxTWVNJQk1B\nRE0sU1lTVE9PTFMiKTsNCiAgICAgICAgbWF4Q29uc3RyYWludE5hbWVMZW5n\ndGggPSAxODsNCiAgICAgICAgbWF4SW5kZXhOYW1lTGVuZ3RoID0gMTg7DQog\nICAgICAgIG1heENvbHVtbk5hbWVMZW5ndGggPSAzMDsNCiAgICAgICAgc3Vw\ncG9ydHNEZWZlcnJlZENvbnN0cmFpbnRzID0gZmFsc2U7DQogICAgICAgIHN1\ncHBvcnRzRGVmYXVsdERlbGV0ZUFjdGlvbiA9IGZhbHNlOw0KICAgICAgICBz\ndXBwb3J0c0FsdGVyVGFibGVXaXRoRHJvcENvbHVtbiA9IGZhbHNlOw0KDQog\nICAgICAgIHN1cHBvcnRzTnVsbFRhYmxlRm9yR2V0Q29sdW1ucyA9IGZhbHNl\nOw0KICAgICAgICByZXF1aXJlc0Nhc3RGb3JNYXRoRnVuY3Rpb25zID0gdHJ1\nZTsNCiAgICAgICAgcmVxdWlyZXNDYXN0Rm9yQ29tcGFyaXNvbnMgPSB0cnVl\nOw0KDQogICAgICAgIHJlc2VydmVkV29yZFNldC5hZGRBbGwoQXJyYXlzLmFz\nTGlzdChuZXcgU3RyaW5nW117DQogICAgICAgICAgICAiQUZURVIiLCAiQUxJ\nQVMiLCAiQUxMT1ciLCAiQVBQTElDQVRJT04iLCAiQVNTT0NJQVRFIiwgIkFT\nVVRJTUUiLA0KICAgICAgICAgICAgIkFVRElUIiwgIkFVWCIsICJBVVhJTElB\nUlkiLCAiQkVGT1JFIiwgIkJJTkFSWSIsICJCVUZGRVJQT09MIiwNCiAgICAg\nICAgICAgICJDQUNIRSIsICJDQUxMIiwgIkNBTExFRCIsICJDQVBUVVJFIiwg\nIkNBUkRJTkFMSVRZIiwgIkNDU0lEIiwNCiAgICAgICAgICAgICJDTFVTVEVS\nIiwgIkNPTExFQ1RJT04iLCAiQ09MTElEIiwgIkNPTU1FTlQiLCAiQ09OQ0FU\nIiwNCiAgICAgICAgICAgICJDT05ESVRJT04iLCAiQ09OVEFJTlMiLCAiQ09V\nTlRfQklHIiwgIkNVUlJFTlRfTENfQ1RZUEUiLA0KICAgICAgICAgICAgIkNV\nUlJFTlRfUEFUSCIsICJDVVJSRU5UX1NFUlZFUiIsICJDVVJSRU5UX1RJTUVa\nT05FIiwgIkNZQ0xFIiwNCiAgICAgICAgICAgICJEQVRBIiwgIkRBVEFCQVNF\nIiwgIkRBWVMiLCAiREIyR0VORVJBTCIsICJEQjJHRU5STCIsICJEQjJTUUwi\nLA0KICAgICAgICAgICAgIkRCSU5GTyIsICJERUZBVUxUUyIsICJERUZJTklU\nSU9OIiwgIkRFVEVSTUlOSVNUSUMiLCAiRElTQUxMT1ciLA0KICAgICAgICAg\nICAgIkRPIiwgIkRTTkhBVFRSIiwgIkRTU0laRSIsICJEWU5BTUlDIiwgIkVB\nQ0giLCAiRURJVFBST0MiLCAiRUxTRUlGIiwNCiAgICAgICAgICAgICJFTkNP\nRElORyIsICJFTkQtRVhFQzEiLCAiRVJBU0UiLCAiRVhDTFVESU5HIiwgIkVY\nSVQiLCAiRkVOQ0VEIiwNCiAgICAgICAgICAgICJGSUVMRFBST0MiLCAiRklM\nRSIsICJGSU5BTCIsICJGUkVFIiwgIkZVTkNUSU9OIiwgIkdFTkVSQUwiLA0K\nICAgICAgICAgICAgIkdFTkVSQVRFRCIsICJHUkFQSElDIiwgIkhBTkRMRVIi\nLCAiSE9MRCIsICJIT1VSUyIsICJJRiIsDQogICAgICAgICAgICAiSU5DTFVE\nSU5HIiwgIklOQ1JFTUVOVCIsICJJTkRFWCIsICJJTkhFUklUIiwgIklOT1VU\nIiwgIklOVEVHUklUWSIsDQogICAgICAgICAgICAiSVNPQklEIiwgIklURVJB\nVEUiLCAiSkFSIiwgIkpBVkEiLCAiTEFCRUwiLCAiTENfQ1RZUEUiLCAiTEVB\nVkUiLA0KICAgICAgICAgICAgIkxJTktUWVBFIiwgIkxPQ0FMRSIsICJMT0NB\nVE9SIiwgIkxPQ0FUT1JTIiwgIkxPQ0siLCAiTE9DS01BWCIsDQogICAgICAg\nICAgICAiTE9DS1NJWkUiLCAiTE9ORyIsICJMT09QIiwgIk1BWFZBTFVFIiwg\nIk1JQ1JPU0VDT05EIiwNCiAgICAgICAgICAgICJNSUNST1NFQ09ORFMiLCAi\nTUlOVVRFUyIsICJNSU5WQUxVRSIsICJNT0RFIiwgIk1PRElGSUVTIiwgIk1P\nTlRIUyIsDQogICAgICAgICAgICAiTkVXIiwgIk5FV19UQUJMRSIsICJOT0NB\nQ0hFIiwgIk5PQ1lDTEUiLCAiTk9ERU5BTUUiLCAiTk9ERU5VTUJFUiIsDQog\nICAgICAgICAgICAiTk9NQVhWQUxVRSIsICJOT01JTlZBTFVFIiwgIk5PT1JE\nRVIiLCAiTlVMTFMiLCAiTlVNUEFSVFMiLCAiT0JJRCIsDQogICAgICAgICAg\nICAiT0xEIiwgIk9MRF9UQUJMRSIsICJPUFRJTUlaQVRJT04iLCAiT1BUSU1J\nWkUiLCAiT1VUIiwgIk9WRVJSSURJTkciLA0KICAgICAgICAgICAgIlBBQ0tB\nR0UiLCAiUEFSQU1FVEVSIiwgIlBBUlQiLCAiUEFSVElUSU9OIiwgIlBBVEgi\nLCAiUElFQ0VTSVpFIiwNCiAgICAgICAgICAgICJQTEFOIiwgIlBSSVFUWSIs\nICJQUk9HUkFNIiwgIlBTSUQiLCAiUVVFUllOTyIsICJSRUFEUyIsICJSRUNP\nVkVSWSIsDQogICAgICAgICAgICAiUkVGRVJFTkNJTkciLCAiUkVMRUFTRSIs\nICJSRU5BTUUiLCAiUkVQRUFUIiwgIlJFU0VUIiwgIlJFU0lHTkFMIiwNCiAg\nICAgICAgICAgICJSRVNUQVJUIiwgIlJFU1VMVCIsICJSRVNVTFRfU0VUX0xP\nQ0FUT1IiLCAiUkVUVVJOIiwgIlJFVFVSTlMiLA0KICAgICAgICAgICAgIlJP\nVVRJTkUiLCAiUk9XIiwgIlJSTiIsICJSVU4iLCAiU0FWRVBPSU5UIiwgIlND\nUkFUQ0hQQUQiLA0KICAgICAgICAgICAgIlNFQ09ORFMiLCAiU0VDUVRZIiwg\nIlNFQ1VSSVRZIiwgIlNFTlNJVElWRSIsICJTSUdOQUwiLCAiU0lNUExFIiwN\nCiAgICAgICAgICAgICJTT1VSQ0UiLCAiU1BFQ0lGSUMiLCAiU1FMSUQiLCAi\nU1RBTkRBUkQiLCAiU1RBUlQiLCAiU1RBVElDIiwNCiAgICAgICAgICAgICJT\nVEFZIiwgIlNUT0dST1VQIiwgIlNUT1JFUyIsICJTVFlMRSIsICJTVUJQQUdF\nUyIsICJTWU5PTllNIiwNCiAgICAgICAgICAgICJTWVNGVU4iLCAiU1lTSUJN\nIiwgIlNZU1BST0MiLCAiU1lTVEVNIiwgIlRBQkxFU1BBQ0UiLCAiVFJJR0dF\nUiIsDQogICAgICAgICAgICAiVFlQRSIsICJVTkRPIiwgIlVOVElMIiwgIlZB\nTElEUFJPQyIsICJWQVJJQUJMRSIsICJWQVJJQU5UIiwgIlZDQVQiLA0KICAg\nICAgICAgICAgIlZPTFVNRVMiLCAiV0hJTEUiLCAiV0xNIiwgIllFQVJTIiwN\nCiAgICAgICAgfSkpOw0KICAgICAgICANCiAgICAgICAgc2VsZWN0V29yZFNl\ndC5hZGQoIldJVEgiKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBz\ndXBwb3J0c1JhbmRvbUFjY2Vzc1Jlc3VsdFNldChTZWxlY3Qgc2VsLA0KICAg\nICAgICBib29sZWFuIGZvclVwZGF0ZSkgew0KICAgICAgICByZXR1cm4gIWZv\nclVwZGF0ZQ0KICAgICAgICAgICAgJiYgc3VwZXIuc3VwcG9ydHNSYW5kb21B\nY2Nlc3NSZXN1bHRTZXQoc2VsLCBmb3JVcGRhdGUpOw0KICAgIH0NCg0KICAg\nIHByb3RlY3RlZCB2b2lkIGFwcGVuZFNlbGVjdFJhbmdlKFNRTEJ1ZmZlciBi\ndWYsIGxvbmcgc3RhcnQsIGxvbmcgZW5kLA0KICAgICAgICBib29sZWFuIHN1\nYnNlbGVjdCkgew0KICAgICAgICAvLyBhcHBlbmRzIHRoZSBsaXRlcmFsIHJh\nbmdlIHN0cmluZywgc2luY2UgREIyIGlzIHVuYWJsZSB0byBoYW5kbGUNCiAg\nICAgICAgLy8gYSBib3VuZCBwYXJhbWV0ZXIgZm9yIGl0DQogICAgICAgIC8v\nIGRvIG5vdCBnZW5lcmF0ZSBGRVRDSCBGSVJTVCBjbGF1c2UgZm9yIHN1YnNl\nbGVjdA0KICAgICAgICBpZiAoIXN1YnNlbGVjdCkNCiAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoIiBGRVRDSCBGSVJTVCAiKS5hcHBlbmQoTG9uZy50b1N0cmlu\nZyhlbmQpKS4NCiAgICAgICAgICAgICAgICBhcHBlbmQoIiBST1dTIE9OTFki\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0Q3JlYXRlU2Vx\ndWVuY2VTUUwoU2VxdWVuY2Ugc2VxKSB7DQogICAgICAgIFN0cmluZ1tdIHNx\nbCA9IHN1cGVyLmdldENyZWF0ZVNlcXVlbmNlU1FMKHNlcSk7DQogICAgICAg\nIGlmIChzZXEuZ2V0QWxsb2NhdGUoKSA+IDEpDQogICAgICAgICAgICBzcWxb\nMF0gKz0gIiBDQUNIRSAiICsgc2VxLmdldEFsbG9jYXRlKCk7DQogICAgICAg\nIHJldHVybiBzcWw7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIFN0cmluZyBn\nZXRTZXF1ZW5jZXNTUUwoU3RyaW5nIHNjaGVtYU5hbWUsIFN0cmluZyBzZXF1\nZW5jZU5hbWUpIHsNCiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBT\ndHJpbmdCdWZmZXIoKTsNCiAgICAgICAgYnVmLmFwcGVuZChzZXF1ZW5jZVNR\nTCk7DQogICAgICAgIGlmIChzY2hlbWFOYW1lICE9IG51bGwgfHwgc2VxdWVu\nY2VOYW1lICE9IG51bGwpDQogICAgICAgICAgICBidWYuYXBwZW5kKCIgV0hF\nUkUgIik7DQogICAgICAgIGlmIChzY2hlbWFOYW1lICE9IG51bGwpIHsNCiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoc2VxdWVuY2VTY2hlbWFTUUwpOw0KICAg\nICAgICAgICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBudWxsKQ0KICAgICAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIiBBTkQgIik7DQogICAgICAgIH0NCiAgICAg\nICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBudWxsKQ0KICAgICAgICAgICAgYnVm\nLmFwcGVuZChzZXF1ZW5jZU5hbWVTUUwpOw0KICAgICAgICByZXR1cm4gYnVm\nLnRvU3RyaW5nKCk7DQogICAgfQ0KDQogICAgcHVibGljIENvbm5lY3Rpb24g\nZGVjb3JhdGUoQ29ubmVjdGlvbiBjb25uKQ0KICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsNCiAgICAgICAgLy8gc29tZSB2ZXJzaW9ucyBvZiB0aGUg\nREIyIGRyaXZlciBzZWVtIHRvIGRlZmF1bHQgdG8NCiAgICAgICAgLy8gUkVB\nRF9VTkNPTU1JVFRFRCwgd2hpY2ggd2lsbCBwcmV2ZW50IGxvY2tpbmcgZnJv\nbSB3b3JraW5nDQogICAgICAgIC8vIChtdWx0aXBsZSBTRUxFQ1QgLi4uIEZP\nUiBVUERBVEUgc3RhdGVtZW50cyBhcmUgYWxsb3dlZCBvbg0KICAgICAgICAv\nLyB0aGUgc2FtZSBpbnN0YW5jZSk7IGlmIHdlIGhhdmUgbm90IG92ZXJyaWRk\nZW4gdGhlDQogICAgICAgIC8vIHRyYW5zYWN0aW9uIGlzb2xhdGlvbiBpbiB0\naGUgY29uZmlndXJhdGlvbiwgZGVmYXVsdCB0bw0KICAgICAgICAvLyBUUkFO\nU0FDVElPTl9SRUFEX0NPTU1JVFRFRA0KICAgICAgICBjb25uID0gc3VwZXIu\nZGVjb3JhdGUoY29ubik7DQoNCiAgICAgICAgaWYgKGNvbmYuZ2V0VHJhbnNh\nY3Rpb25Jc29sYXRpb25Db25zdGFudCgpID09IC0xDQogICAgICAgICAgICAm\nJiBjb25uLmdldFRyYW5zYWN0aW9uSXNvbGF0aW9uKCkgPCBjb25uLlRSQU5T\nQUNUSU9OX1JFQURfQ09NTUlUVEVEKQ0KICAgICAgICAgICAgY29ubi5zZXRU\ncmFuc2FjdGlvbklzb2xhdGlvbihjb25uLlRSQU5TQUNUSU9OX1JFQURfQ09N\nTUlUVEVEKTsNCg0KICAgICAgICByZXR1cm4gY29ubjsNCiAgICB9DQoNCiAg\nICBwcml2YXRlIGJvb2xlYW4gaXNKREJDMyhEYXRhYmFzZU1ldGFEYXRhIG1l\ndGEpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIC8vIEpEQkMzLW9u\nbHkgbWV0aG9kLCBzbyBpdCBtaWdodCB0aHJvdyBhIEFic3RyYWN0TWV0aG9k\nRXJyb3INCiAgICAgICAgICAgIHJldHVybiBtZXRhLmdldEpEQkNNYWpvclZl\ncnNpb24oKSA+PSAzOw0KICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkg\new0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAg\nfQ0KDQogICAgcHVibGljIHZvaWQgY29ubmVjdGVkQ29uZmlndXJhdGlvbihD\nb25uZWN0aW9uIGNvbm4pIHRocm93cyBTUUxFeGNlcHRpb24gew0KICAgIAlz\ndXBlci5jb25uZWN0ZWRDb25maWd1cmF0aW9uKGNvbm4pOw0KDQogICAgCURh\ndGFiYXNlTWV0YURhdGEgbWV0YURhdGEgPSBjb25uLmdldE1ldGFEYXRhKCk7\nDQogICAgICAgIGRhdGFiYXNlUHJvZHVjdE5hbWUgPSBudWxsU2FmZShtZXRh\nRGF0YS5nZXREYXRhYmFzZVByb2R1Y3ROYW1lKCkpOw0KICAgICAgICBkYXRh\nYmFzZVByb2R1Y3RWZXJzaW9uID0gbnVsbFNhZmUobWV0YURhdGEuZ2V0RGF0\nYWJhc2VQcm9kdWN0VmVyc2lvbigpKTsNCiAgICAgICAgDQogICAgICAgIC8v\nIERldGVybWluZSB0aGUgdHlwZSBvZiBEQjIgZGF0YWJhc2UNCiAgICAgICAg\nLy8gRmlyc3QgY2hlY2sgZm9yIEFTLzQwMA0KICAgICAgICBnZXRQcm9kdWN0\nVmVyc2lvbk1ham9yTWlub3JGb3JJU2VyaWVzKCk7DQoNCiAgICAgICAgaWYg\nKG1haiA+IDApIHsNCiAgICAgICAgICAgIGlmIChpc0RCMklTZXJpZXNWNVIz\nT3JFYXJsaWVyKCkpDQogICAgICAgICAgICAgICAgZGIyU2VydmVyVHlwZSA9\nIGRiMklTZXJpZXNWNVIzT3JFYXJsaWVyOw0KICAgICAgICAgICAgZWxzZSBp\nZiAoaXNEQjJJU2VyaWVzVjVSNE9yTGF0ZXIoKSkNCiAgICAgICAgICAgICAg\nICBkYjJTZXJ2ZXJUeXBlID0gZGIySVNlcmllc1Y1UjRPckxhdGVyOw0KICAg\nICAgICB9DQogICAgICAgIA0KICAgIAlpZiAoZGIyU2VydmVyVHlwZSA9PSAw\nKSB7DQogICAgCSAgICBpZiAoaXNKREJDMyhtZXRhRGF0YSkpIHsNCiAgICAJ\nICAgICAgICBtYWogPSBtZXRhRGF0YS5nZXREYXRhYmFzZU1ham9yVmVyc2lv\nbigpOw0KICAgIAkgICAgICAgIG1pbiA9IG1ldGFEYXRhLmdldERhdGFiYXNl\nTWlub3JWZXJzaW9uKCk7DQogICAgCSAgICB9DQogICAgCSAgICBlbHNlDQog\nICAgCSAgICAgICAgZ2V0UHJvZHVjdFZlcnNpb25NYWpvck1pbm9yKCk7DQoN\nCiAgICAJICAgIC8vIERldGVybWluZSB0aGUgdHlwZSBvZiBEQjIgZGF0YWJh\nc2UgZm9yIFpPUyAmIFVEQg0KICAgIAkgICAgaWYgKGlzREIyVURCVjgxT3JF\nYXJsaWVyKCkpDQogICAgCSAgICAgICAgZGIyU2VydmVyVHlwZSA9IGRiMlVE\nQlY4MU9yRWFybGllcjsNCiAgICAJICAgIGVsc2UgaWYgKGlzREIyWk9TVjh4\nT3JMYXRlcigpKQ0KICAgIAkgICAgICAgIGRiMlNlcnZlclR5cGUgPSBkYjJa\nT1NWOHhPckxhdGVyOw0KICAgIAkgICAgZWxzZSBpZiAoaXNEQjJVREJWODJP\nckxhdGVyKCkpDQogICAgCSAgICAgICAgZGIyU2VydmVyVHlwZSA9IGRiMlVE\nQlY4Mk9yTGF0ZXI7DQogICAgICAgIH0NCg0KICAgICAgICAvLyB2ZXJpZnkg\ndGhhdCBkYXRhYmFlIHByb2R1Y3QgaXMgc3VwcG9ydGVkDQogICAgICAgIGlm\nIChkYjJTZXJ2ZXJUeXBlID09IDAgfHwgbWFqID09IDApDQogICAgICAgICAg\nICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRFeGNlcHRpb24oX2xvYy5nZXQoImRi\nLW5vdC1zdXBwb3J0ZWQiLA0KICAgICAgICAgICAgICAgIG5ldyBPYmplY3Rb\nXSB7ZGF0YWJhc2VQcm9kdWN0TmFtZSwgZGF0YWJhc2VQcm9kdWN0VmVyc2lv\nbiB9KSk7ICAgICAgICAgICAgICAgICAgICANCg0KICAgIAlpZiAobWFqID49\nIDkgfHwgKG1haiA9PSA4ICYmIG1pbiA+PSAyKSkgew0KICAgIAkgICAgc3Vw\ncG9ydHNMb2NraW5nV2l0aE11bHRpcGxlVGFibGVzID0gdHJ1ZTsNCiAgICAJ\nICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhJbm5lckpvaW4gPSB0cnVlOw0KICAg\nIAkgICAgc3VwcG9ydHNMb2NraW5nV2l0aE91dGVySm9pbiA9IHRydWU7DQog\nICAgCSAgICBmb3JVcGRhdGVDbGF1c2UgPSAiV0lUSCBSUiBVU0UgQU5EIEtF\nRVAgVVBEQVRFIExPQ0tTIjsNCiAgICAJICAgIGlmIChtYWogPj05KQ0KICAg\nIAkgICAgICAgIHN1cHBvcnRzWE1MQ29sdW1uID0gdHJ1ZTsNCiAgICAJfQ0K\nDQogICAgICAgIC8vIHBsYXRmb3JtIHNwZWNpZmljIHNldHRpbmdzDQogICAg\nICAgIHN3aXRjaCAoZGIyU2VydmVyVHlwZSkgew0KICAgICAgICBjYXNlICBk\nYjJaT1NWOHhPckxhdGVyOg0KICAgICAgICAgICAgLy8gREIyIFovT1MgDQog\nICAgICAgICAgICBjaGFyYWN0ZXJDb2x1bW5TaXplID0gMjU1Ow0KICAgICAg\nICAgICAgbGFzdEdlbmVyYXRlZEtleVF1ZXJ5ID0gIlNFTEVDVCBJREVOVElU\nWV9WQUxfTE9DQUwoKSBGUk9NICINCiAgICAgICAgICAgICAgICArICJTWVNJ\nQk0uU1lTRFVNTVkxIjsNCiAgICAgICAgICAgIG5leHRTZXF1ZW5jZVF1ZXJ5\nID0gIlNFTEVDVCBORVhUVkFMIEZPUiB7MH0gRlJPTSAiDQogICAgICAgICAg\nICAgICAgKyAiU1lTSUJNLlNZU0RVTU1ZMSI7DQogICAgICAgICAgICBzZXF1\nZW5jZVNRTCA9ICJTRUxFQ1QgU0NIRU1BIEFTIFNFUVVFTkNFX1NDSEVNQSwg\nIg0KICAgICAgICAgICAgICAgICsgIk5BTUUgQVMgU0VRVUVOQ0VfTkFNRSBG\nUk9NIFNZU0lCTS5TWVNTRVFVRU5DRVMiOw0KICAgICAgICAgICAgc2VxdWVu\nY2VTY2hlbWFTUUwgPSAiU0NIRU1BID0gPyI7DQogICAgICAgICAgICBzZXF1\nZW5jZU5hbWVTUUwgPSAiTkFNRSA9ID8iOw0KICAgICAgICAgICAgaWYgKG1h\naiA9PSA4KQ0KICAgICAgICAgICAgICAgIC8vIERCMiBaL09TIFZlcnNpb24g\nODogbm8gYmlnaW50IHN1cHBvcnQsIGhlbmNlIG1hcCBKYXZhDQogICAgICAg\nICAgICAgICAgLy8gbG9uZyB0byBkZWNpbWFsDQogICAgICAgICAgICAgICAg\nYmlnaW50VHlwZU5hbWUgPSAiREVDSU1BTCgzMSwwKSI7DQogICAgICAgICAg\nICBicmVhazsNCiAgICAgICAgY2FzZSBkYjJJU2VyaWVzVjVSM09yRWFybGll\ncjoNCiAgICAgICAgY2FzZSBkYjJJU2VyaWVzVjVSNE9yTGF0ZXI6DQogICAg\nICAgICAgICBsYXN0R2VuZXJhdGVkS2V5UXVlcnkgPSAiU0VMRUNUIElERU5U\nSVRZX1ZBTF9MT0NBTCgpIEZST00gIg0KICAgICAgICAgICAgICAgICsgIlNZ\nU0lCTS5TWVNEVU1NWTEiOw0KICAgICAgICAgICAgbmV4dFNlcXVlbmNlUXVl\ncnkgPSAiU0VMRUNUIE5FWFRWQUwgRk9SIHswfSBGUk9NICINCiAgICAgICAg\nICAgICAgICArICJTWVNJQk0uU1lTRFVNTVkxIjsNCiAgICAgICAgICAgIHZh\nbGlkYXRpb25TUUwgPSAiU0VMRUNUIERJU1RJTkNUKENVUlJFTlQgVElNRVNU\nQU1QKSBGUk9NICINCiAgICAgICAgICAgICAgICArICJRU1lTMi5TWVNUQUJM\nRVMiOw0KICAgICAgICAgICAgc2VxdWVuY2VTUUwgPSAiU0VMRUNUIFNFUVVF\nTkNFX1NDSEVNQSwgIg0KICAgICAgICAgICAgICAgICsgIlNFUVVFTkNFX05B\nTUUgRlJPTSBRU1lTMi5TWVNTRVFVRU5DRVMiOw0KICAgICAgICAgICAgc2Vx\ndWVuY2VTY2hlbWFTUUwgPSAiU0VRVUVOQ0VfU0NIRU1BID0gPyI7DQogICAg\nICAgICAgICBzZXF1ZW5jZU5hbWVTUUwgPSAiU0VRVUVOQ0VfTkFNRSA9ID8i\nOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICB9DQoNCiAg\nICAvKioNCiAgICAgKiBHZXQgdGhlIHVwZGF0ZSBjbGF1c2UgZm9yIHRoZSBx\ndWVyeSBiYXNlZCBvbiB0aGUNCiAgICAgKiB1cGRhdGVDbGF1c2UgYW5kIGlz\nb2xhdGlvbkxldmVsIGhpbnRzDQogICAgICovDQogICAgcHJvdGVjdGVkIFN0\ncmluZyBnZXRGb3JVcGRhdGVDbGF1c2UoSkRCQ0ZldGNoQ29uZmlndXJhdGlv\nbiBmZXRjaCwNCiAgICAgICAgYm9vbGVhbiBpc0ZvclVwZGF0ZSwgU2VsZWN0\nIHNlbCkgew0KICAgICAgICBpbnQgaXNvbGF0aW9uTGV2ZWw7DQogICAgICAg\nIC8vIEZvciBkYjJVREJWODFPckVhcmxpZXIgYW5kIGRiMklTZXJpZXNWNVIz\nT3JFYXJsaWVyOg0KICAgICAgICAvLyAib3B0aW1pemUgZm9yIiBjbGF1c2Ug\nYXBwZWFycyBiZWZvcmUgImZvciB1cGRhdGUiIGNsYXVzZS4NCiAgICAgICAg\nU3RyaW5nQnVmZmVyIGZvclVwZGF0ZVN0cmluZyA9IG5ldyBTdHJpbmdCdWZm\nZXIoDQogICAgICAgICAgICBnZXRPcHRpbWl6ZUNsYXVzZShzZWwpKTsNCiAg\nICAgICAgdHJ5IHsNCiAgICAgICAgICAgIC8vIERldGVybWluZSB0aGUgaXNv\nbGF0aW9uTGV2ZWw7IHRoZSBmZXRjaA0KICAgICAgICAgICAgLy8gY29uZmln\ndXJhdGlvbiBkYXRhIG92ZXJyaWRlcyB0aGUgcGVyc2lzdGVuY2UueG1sIHZh\nbHVlDQogICAgICAgICAgICBpZiAoZmV0Y2ggIT0gbnVsbCAmJiBmZXRjaC5n\nZXRJc29sYXRpb24oKSAhPSAtMSkNCiAgICAgICAgICAgICAgICBpc29sYXRp\nb25MZXZlbCA9IGZldGNoLmdldElzb2xhdGlvbigpOw0KICAgICAgICAgICAg\nZWxzZQ0KICAgICAgICAgICAgICAgIGlzb2xhdGlvbkxldmVsID0gY29uZi5n\nZXRUcmFuc2FjdGlvbklzb2xhdGlvbkNvbnN0YW50KCk7DQoNCiAgICAgICAg\nICAgIGlmIChpc0ZvclVwZGF0ZSkgew0KICAgICAgICAgICAgICAgIHN3aXRj\naChkYjJTZXJ2ZXJUeXBlKSB7DQogICAgICAgICAgICAgICAgY2FzZSBkYjJJ\nU2VyaWVzVjVSM09yRWFybGllcjoNCiAgICAgICAgICAgICAgICBjYXNlIGRi\nMlVEQlY4MU9yRWFybGllcjoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlz\nb2xhdGlvbkxldmVsID09IENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fU0VSSUFM\nSVpBQkxFKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yVXBkYXRlU3Ry\naW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JVcGRhdGVDbGF1c2UpOw0KICAg\nICAgICAgICAgICAgICAgICBlbHNlIA0KICAgICAgICAgICAgICAgICAgICAg\nICAgZm9yVXBkYXRlU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JVcGRh\ndGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiICIp\nLmFwcGVuZCh3aXRoUlNDbGF1c2UpOw0KICAgICAgICAgICAgICAgICAgICBi\ncmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIGRiMlpPU1Y4eE9yTGF0ZXI6\nDQogICAgICAgICAgICAgICAgY2FzZSBkYjJVREJWODJPckxhdGVyOg0KICAg\nICAgICAgICAgICAgICAgICBpZiAoaXNvbGF0aW9uTGV2ZWwgPT0gQ29ubmVj\ndGlvbi5UUkFOU0FDVElPTl9TRVJJQUxJWkFCTEUpIHsNCiAgICAgICAgICAg\nICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBl\nbmQoZm9yUmVhZE9ubHlDbGF1c2UpDQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh3aXRoUlJDbGF1c2UpDQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh1\nc2VLZWVwVXBkYXRlTG9ja0NsYXVzZSk7ICAgDQogICAgICAgICAgICAgICAg\nICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3JVcGRh\ndGVTdHJpbmcuYXBwZW5kKCIgIikuYXBwZW5kKGZvclJlYWRPbmx5Q2xhdXNl\nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoIiAiKS5h\ncHBlbmQod2l0aFJTQ2xhdXNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQodXNlS2VlcFVwZGF0ZUxvY2tDbGF1\nc2UpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAg\nICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAg\nICAgICAgICAgICBjYXNlIGRiMklTZXJpZXNWNVI0T3JMYXRlcjoNCiAgICAg\nICAgICAgICAgICAgICAgaWYgKGlzb2xhdGlvbkxldmVsID09IENvbm5lY3Rp\nb24uVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKSB7DQogICAgICAgICAgICAg\nICAgICAgICAgICBmb3JVcGRhdGVTdHJpbmcuYXBwZW5kKCIgIikuYXBwZW5k\nKGZvclJlYWRPbmx5Q2xhdXNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQod2l0aFJSQ2xhdXNlKQ0KICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQodXNl\nS2VlcEV4Y2x1c2l2ZUxvY2tDbGF1c2UpOyAgICAgICANCiAgICAgICAgICAg\nICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZv\nclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yUmVhZE9ubHlD\nbGF1c2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgi\nICIpLmFwcGVuZCh3aXRoUlNDbGF1c2UpDQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh1c2VLZWVwRXhjbHVzaXZl\nTG9ja0NsYXVzZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg\nICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAg\nICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24g\nZSkgew0KICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQ0K\nICAgICAgICAgICAgICAgIGxvZy5lcnJvcihlLnRvU3RyaW5nKCksZSk7DQog\nICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZvclVwZGF0ZVN0cmluZy50b1N0\ncmluZygpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzREIyVURC\nVjgyT3JMYXRlcigpIHsNCiAgICAgICAgcmV0dXJuIChkYXRhYmFzZVByb2R1\nY3RWZXJzaW9uLmluZGV4T2YoIlNRTCIpICE9IC0xDQogICAgICAgICAgICAg\nfHwgZGF0YWJhc2VQcm9kdWN0TmFtZS5pbmRleE9mKCJEQjIvIikgIT0gLTEp\nDQogICAgICAgICAgICAgJiYgKChtYWogPT0gOCAmJiBtaW4gPj0gMikgfHwg\nKG1haiA+PSA5KSk7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNE\nQjJaT1NWOHhPckxhdGVyKCkgew0KICAgICAgIHJldHVybiAoZGF0YWJhc2VQ\ncm9kdWN0VmVyc2lvbi5pbmRleE9mKCJEU04iKSAhPSAtMQ0KICAgICAgICAg\nICAgfHwgZGF0YWJhc2VQcm9kdWN0TmFtZS5pbmRleE9mKCJEQjIvIikgPT0g\nLTEpDQogICAgICAgICAgICAmJiBtYWogPj0gODsNCiAgICAgICAgICAgDQog\nICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNEQjJJU2VyaWVzVjVSM09y\nRWFybGllcigpIHsNCiAgICAgICByZXR1cm4gKGRhdGFiYXNlUHJvZHVjdE5h\nbWUuaW5kZXhPZigiQVMiKSAhPSAtMQ0KICAgICAgICAgICAmJiAoKG1haiA9\nPSA1ICYmIG1pbiA8PTMpIHx8IG1haiA8IDUpKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgYm9vbGVhbiBpc0RCMklTZXJpZXNWNVI0T3JMYXRlcigpIHsNCiAg\nICAgICByZXR1cm4gZGF0YWJhc2VQcm9kdWN0TmFtZS5pbmRleE9mKCJBUyIp\nICE9IC0xDQogICAgICAgICAgICYmIChtYWogPj02IHx8IChtYWogPT0gNSAm\nJiBtaW4gPj00KSk7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNE\nQjJVREJWODFPckVhcmxpZXIoKSB7DQogICAgICAgIHJldHVybiAoZGF0YWJh\nc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCJTUUwiKSAhPSAtMSANCiAgICAg\nICAgICAgIHx8IGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIyLyIp\nICE9IC0xKSANCiAgICAgICAgICAgICYmICgobWFqID09IDggJiYgbWluIDw9\nIDEpIHx8IG1haiA8IDgpOw0KICAgIH0NCg0KICAgIC8qKiBHZXQgdGhlIHZl\ncnNpb24gTWFqb3IvTWlub3IgZm9yIHRoZSBJU2VyaWVzDQogICAgICovDQog\nICAgcHJpdmF0ZSB2b2lkIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5vckZv\ncklTZXJpZXMoKSB7DQogICAgICAgIC8vIElTZXJpZXMgICAgREJQcm9kTmFt\nZSAgICAgICAgICAgICAgICAgREIyIFVEQiBmb3IgQVMvNDAwDQogICAgICAg\nIC8vICAgKFRvb2xib3gpREJQcm9kVmVyc2lvbiAgICAgICAgICAgICAgMDUu\nMDQuMDAwMCBWNVI0bTANCiAgICAgICAgLy8gSVNlcmllcyAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBEQjIgVURCIGZvciBBUy80MDANCiAgICAg\nICAgLy8gICAoTmF0aXZlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICBW\nNVI0TTANCiAgICAgICAgaWYgKGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhP\nZigiQVMiKSAhPSAtMSkgew0KICAgICAgICAgICAgLy8gZGVmYXVsdCB0byBW\nNVI0DQogICAgICAgICAgICBtYWogPSA1Ow0KICAgICAgICAgICAgbWluID0g\nNDsNCiAgICAgICAgICAgIGludCBpbmRleCA9IGRhdGFiYXNlUHJvZHVjdFZl\ncnNpb24uaW5kZXhPZignVicpOw0KICAgICAgICAgICAgaWYgKGluZGV4ICE9\nIC0xKSB7DQogICAgICAgICAgICAJU3RyaW5nIHMgPSBkYXRhYmFzZVByb2R1\nY3RWZXJzaW9uLnN1YnN0cmluZyhpbmRleCk7DQogICAgICAgICAgICAJcyA9\nIHMudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgCVN0cmluZ1Rva2Vu\naXplciBzdHJpbmd0b2tlbml6ZXIgPSBuZXcgU3RyaW5nVG9rZW5pemVyKHMs\nICJWUk0iDQogICAgICAgICAgICAJCQksIGZhbHNlKTsNCiAgICAgICAgICAg\nIAlpZiAoc3RyaW5ndG9rZW5pemVyLmNvdW50VG9rZW5zKCkgPT0gMykgew0K\nICAgICAgICAgICAgCQlTdHJpbmcgczEgPSBzdHJpbmd0b2tlbml6ZXIubmV4\ndFRva2VuKCk7DQogICAgICAgICAgICAJCW1haiA9IEludGVnZXIucGFyc2VJ\nbnQoczEpOw0KICAgICAgICAgICAgCQlTdHJpbmcgczIgPSAgc3RyaW5ndG9r\nZW5pemVyLm5leHRUb2tlbigpOw0KICAgICAgICAgICAgCQltaW4gPSBJbnRl\nZ2VyLnBhcnNlSW50KHMyKTsNCiAgICAgICAgICAgIAl9DQogICAgICAgICAg\nICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIAlpbmRleCA9\nIGRhdGFiYXNlUHJvZHVjdFZlcnNpb24uaW5kZXhPZignMCcpOw0KICAgICAg\nICAgICAgCWlmIChpbmRleCAhPSAtMSkgew0KICAgICAgICAgICAgCQlTdHJp\nbmcgcyA9IGRhdGFiYXNlUHJvZHVjdFZlcnNpb24uc3Vic3RyaW5nKGluZGV4\nKTsNCiAgICAgICAgICAgIAkJcyA9IHMudG9VcHBlckNhc2UoKTsNCiAgICAg\nICAgICAgCQkJU3RyaW5nVG9rZW5pemVyIHN0cmluZ3Rva2VuaXplciA9IG5l\ndyBTdHJpbmdUb2tlbml6ZXIocywgIjAiDQogICAgICAgICAgIAkJCQkJLCBm\nYWxzZSk7ICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgCQkJaWYg\nKHN0cmluZ3Rva2VuaXplci5jb3VudFRva2VucygpID09IDIpIHsNCiAgICAg\nICAgICAgCQkJCVN0cmluZyBzMSA9IHN0cmluZ3Rva2VuaXplci5uZXh0VG9r\nZW4oKTsNCiAgICAgICAgICAgCQkJCW1haiA9IEludGVnZXIucGFyc2VJbnQo\nczEpOw0KICAgICAgICAgICAJCQkJU3RyaW5nIHMyID0gIHN0cmluZ3Rva2Vu\naXplci5uZXh0VG9rZW4oKTsNCiAgICAgICAgICAgCQkJCW1pbiA9IEludGVn\nZXIucGFyc2VJbnQoczIpOw0KICAgICAgICAgICAJCQl9DQogICAgICAgICAg\nICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAg\nIA0KICAgIHByaXZhdGUgdm9pZCBnZXRQcm9kdWN0VmVyc2lvbk1ham9yTWlu\nb3IoKSB7DQogICAgICAgIC8vIEluY2FzZSBKREJDIGRyaXZlciB2ZXJzaW9u\nIGlzIGxvd2VyIHRoYW4gMw0KICAgICAgICAvLyB1c2UgZm9sbG93aW5nIGlu\nZm8gdG8gZGV0ZXJtaW5lIE1ham9yIGFuZCBNaW5vciANCiAgICAgICAgLy8g\nICAgICAgICAgICAgICAgICAgICAgICBDTEkgICAgdnMgICAgICBKQ0MNCiAg\nICAgICAgLy8gWkRCVjggREJQcm9kTmFtZSAgICAgICBEQjIgICAgICAgICAg\nICBEQjINCiAgICAgICAgLy8gICAgICAgREJQcm9kVmVyc2lvbiAgICAwOC4w\nMS4wMDA1ICAgICBEU04wODAxNQ0KICAgICAgICAvLyBaREJWOSAgICAgICAg\nICAgICAgICAgIERCMiAgICAgICAgICAgIERCMg0KICAgICAgICAvLyAgICAg\nICAgICAgICAgICAgICAgICAgIDA5LjAxLjAwMDUgICAgIERTTjA5MDE1DQog\nICAgICAgIC8vIFdpblY5ICAgICAgICAgICAgICAgICAgREIyL05UICAgICAg\nICAgREIyL05UDQogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAg\nMDkuMDEuMDAwMCAgICAgU1FMMDkwMTANCiAgICAgICAgLy8gU29sYXJpc1Y5\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQjIvU1VONjQNCiAgICAg\nICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBT\nUUwwOTAxDQogICAgICAgIC8vIExpbnV4ICAgICAgICAgICAgICAgICAgREIy\nL0xJTlVYICAgICAgREIyL0xJTlVYDQogICAgICAgIC8vICAgICAgICAgICAg\nICAgICAgICAgICAgMDkuMDEuMDAwMCAgICAgU1FMMDkwMQ0KICAgICAgICBp\nZiAoZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCIwOSIpICE9IC0x\nKSB7DQogICAgICAgICAgICBtYWogPSA5Ow0KICAgICAgICAgICAgaWYgKGRh\ndGFiYXNlUHJvZHVjdFZlcnNpb24uaW5kZXhPZigiMDEiKSAhPSAtMSkgew0K\nICAgICAgICAgICAgICAgIG1pbiA9IDE7DQogICAgICAgICAgICB9DQogICAg\nICAgIH0gZWxzZSBpZiAoZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9m\nKCIwOCIpICE9IC0xKSB7DQogICAgICAgICAgICBtYWogPSA4Ow0KICAgICAg\nICAgICAgbWluID0gMjsNCiAgICAgICAgICAgIGlmIChkYXRhYmFzZVByb2R1\nY3RWZXJzaW9uLmluZGV4T2YoIjAxIikgIT0gLTEpIHsNCiAgICAgICAgICAg\nICAgICBtaW4gPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAg\nfQ0KDQogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRPcHRpbWl6ZUNsYXVzZShT\nZWxlY3Qgc2VsKSB7DQogICAgICAgIGlmIChzZWwgIT0gbnVsbCAmJiBzZWwu\nZ2V0RXhwZWN0ZWRSZXN1bHRDb3VudCgpID4gMCkgew0KICAgICAgICAgICAg\nU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsNCiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIiAiKS5hcHBlbmQob3B0aW1pemVDbGF1c2Up\nLmFwcGVuZCgiICIpDQogICAgICAgICAgICAgICAgLmFwcGVuZChTdHJpbmcu\ndmFsdWVPZihzZWwuZ2V0RXhwZWN0ZWRSZXN1bHRDb3VudCgpKSkNCiAgICAg\nICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHJvd0NsYXVzZSk7DQog\nICAgICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7DQogICAgICAgIH0N\nCg0KICAgICAgICByZXR1cm4gIiI7DQogICAgfQ0KDQogICAgcHVibGljIE9w\nZW5KUEFFeGNlcHRpb24gbmV3U3RvcmVFeGNlcHRpb24oU3RyaW5nIG1zZywg\nU1FMRXhjZXB0aW9uW10gY2F1c2VzLA0KICAgICAgICBPYmplY3QgZmFpbGVk\nKSB7DQogICAgICAgIGlmIChjYXVzZXMgIT0gbnVsbCAmJiBjYXVzZXMubGVu\nZ3RoID4gMCkNCiAgICAgICAgICAgIG1zZyA9IGFwcGVuZEV4dGVuZGVkRXhj\nZXB0aW9uTXNnKG1zZywgY2F1c2VzWzBdKTsNCiAgICAgICAgcmV0dXJuIHN1\ncGVyLm5ld1N0b3JlRXhjZXB0aW9uKG1zZywgY2F1c2VzLCBmYWlsZWQpOw0K\nICAgIH0NCg0KICAgIC8qKg0KICAgICAqICBBcHBlbmQgZXhjZXB0aW9uIGlu\nZm9ybWF0aW9uIGZyb20gU1FMQ0EgdG8gdGhlIGV4c2lzdGluZw0KICAgICAq\nICBleGNlcHRpb24gbWVhc3NhZ2UNCiAgICAgKi8NCiAgICBwcml2YXRlIFN0\ncmluZyBhcHBlbmRFeHRlbmRlZEV4Y2VwdGlvbk1zZyhTdHJpbmcgbXNnLCBT\nUUxFeGNlcHRpb24gc3FsZSl7DQogICAgICAgZmluYWwgU3RyaW5nIEdFVFNR\nTENBID0iZ2V0U3FsY2EiOw0KICAgICAgIFN0cmluZyBleGNlcHRpb25Nc2cg\nPSBuZXcgU3RyaW5nKCk7DQogICAgICAgdHJ5IHsNCiAgICAgICAgICAgIE1l\ndGhvZCBzcWxjYU0yID0gc3FsZS5nZXROZXh0RXhjZXB0aW9uKCkuZ2V0Q2xh\nc3MoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0TWV0aG9k\nKEdFVFNRTENBLG51bGwpOw0KICAgICAgICAgICAgT2JqZWN0IHNxbGNhID0g\nc3FsY2FNMi5pbnZva2Uoc3FsZS5nZXROZXh0RXhjZXB0aW9uKCksDQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgT2Jq\nZWN0W10ge30pOw0KICAgICAgICAgICAgTWV0aG9kICBnZXRTcWxFcnJwTWV0\naGQgPSBzcWxjYS5nZXRDbGFzcygpLg0KICAgICAgICAgICAgZ2V0TWV0aG9k\nKCJnZXRTcWxFcnJwIiwgbnVsbCk7DQogICAgICAgICAgICBNZXRob2QgIGdl\ndFNxbFdhcm5NZXRoZCA9IHNxbGNhLmdldENsYXNzKCkuDQogICAgICAgICAg\nICBnZXRNZXRob2QoImdldFNxbFdhcm4iLCBudWxsKTsNCiAgICAgICAgICAg\nIE1ldGhvZCAgZ2V0U3FsRXJyZE1ldGhkID0gc3FsY2EuZ2V0Q2xhc3MoKS4N\nCiAgICAgICAgICAgIGdldE1ldGhvZCgiZ2V0U3FsRXJyZCIsIG51bGwpOw0K\nICAgICAgICAgICAgU3RyaW5nQnVmZmVyIGVycmRTdHIgPSBuZXcgU3RyaW5n\nQnVmZmVyKCk7DQoNCiAgICAgICAgICAgIGludFtdIGVycmRzID0gKGludFtd\nKSBnZXRTcWxFcnJkTWV0aGQuaW52b2tlKHNxbGNhLCBuZXcgT2JqZWN0W117\nfSk7DQogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGVycmRzLmxl\nbmd0aDsgaSsrKQ0KICAgICAgICAgICAgICAgIGVycmRTdHIuYXBwZW5kKGVy\ncmRTdHIubGVuZ3RoKCkgPiAwID8gIiwgIiA6ICIiKS4NCiAgICAgICAgICAg\nICAgICAgICAgYXBwZW5kKGVycmRzW2ldKTsNCiAgICAgICAgICAgIGV4Y2Vw\ndGlvbk1zZyA9IGV4Y2VwdGlvbk1zZy5jb25jYXQoICJTUUxDQSBPVVRQVVQi\nICsNCiAgICAgICAgICAgICAgICAgICAgIltFcnJwPSIgKyBnZXRTcWxFcnJw\nTWV0aGQuaW52b2tlKHNxbGNhLCBuZXcgT2JqZWN0W117fSkNCiAgICAgICAg\nICAgICAgICAgICAgKyAiLCBFcnJkPSIgKyBlcnJkU3RyKTsNCg0KICAgICAg\nICAgICAgU3RyaW5nIFdhcm4gPSBuZXcgU3RyaW5nKChjaGFyW10pIGdldFNx\nbFdhcm5NZXRoZC4NCiAgICAgICAgICAgICAgICAgICAgaW52b2tlKHNxbGNh\nLCBuZXcgT2JqZWN0W117fSkpOw0KICAgICAgICAgICAgaWYoV2Fybi50cmlt\nKCkubGVuZ3RoKCkgIT0gMCkNCiAgICAgICAgICAgICAgICBleGNlcHRpb25N\nc2cgPSBleGNlcHRpb25Nc2cuY29uY2F0KCIsIFdhcm49IiArV2FybiArICJd\nIiApOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGV4Y2Vw\ndGlvbk1zZyA9IGV4Y2VwdGlvbk1zZy5jb25jYXQoICJdIiApOw0KICAgICAg\nICAgICAgbXNnID0gbXNnLmNvbmNhdChleGNlcHRpb25Nc2cpOw0KICAgICAg\nICAgICAgcmV0dXJuIG1zZzsNCiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxl\nIHQpIHsNCiAgICAgICAgICAgIHJldHVybiBzcWxlLmdldE1lc3NhZ2UoKTsN\nCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBpbnQgZ2V0RGIyU2Vy\ndmVyVHlwZSgpIHsNCiAgICAgICAgcmV0dXJuIGRiMlNlcnZlclR5cGU7DQog\nICAgfQ0KICAgIA0KICAgIHByb3RlY3RlZCB2b2lkIGFwcGVuZExlbmd0aChT\nUUxCdWZmZXIgYnVmLCBpbnQgdHlwZSkgew0KICAgICAgICBpZiAodHlwZSA9\nPSBUeXBlcy5WQVJDSEFSKQ0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiKCIp\nLmFwcGVuZChJbnRlZ2VyLnRvU3RyaW5nKGNoYXJhY3RlckNvbHVtblNpemUp\nKS4NCiAgICAgICAgICAgICAgICBhcHBlbmQoIikiKTsNCiAgICB9DQoNCiAg\nICAvKioNCiAgICAgKiBJZiB0aGlzIGRpY3Rpb25hcnkgc3VwcG9ydHMgWE1M\nIHR5cGUsDQogICAgICogdXNlIHRoaXMgbWV0aG9kIHRvIGFwcGVuZCB4bWwg\ncHJlZGljYXRlLg0KICAgICAqIA0KICAgICAqIEBwYXJhbSBidWYgdGhlIFNR\nTCBidWZmZXIgdG8gd3JpdGUgdGhlIGNvbXBhcmlzb24NCiAgICAgKiBAcGFy\nYW0gb3AgdGhlIGNvbXBhcmlzb24gb3BlcmF0aW9uIHRvIHBlcmZvcm0NCiAg\nICAgKiBAcGFyYW0gbGhzIHRoZSBsZWZ0IGhhbmQgc2lkZSBvZiB0aGUgY29t\ncGFyaXNvbg0KICAgICAqIEBwYXJhbSByaHMgdGhlIHJpZ2h0IGhhbmQgc2lk\nZSBvZiB0aGUgY29tcGFyaXNvbg0KICAgICAqIEBwYXJhbSBsaHN4bWwgaW5k\naWNhdGVzIHdoZXRoZXIgdGhlIGxlZnQgb3BlcmFuZCBtYXBzIHRvIHhtbA0K\nICAgICAqIEBwYXJhbSByaHN4bWwgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIHJp\nZ2h0IG9wZXJhbmQgbWFwcyB0byB4bWwNCiAgICAgKi8NCiAgICBwdWJsaWMg\ndm9pZCBhcHBlbmRYbWxDb21wYXJpc29uKFNRTEJ1ZmZlciBidWYsIFN0cmlu\nZyBvcCwgRmlsdGVyVmFsdWUgbGhzLA0KICAgICAgICBGaWx0ZXJWYWx1ZSBy\naHMsIGJvb2xlYW4gbGhzeG1sLCBib29sZWFuIHJoc3htbCkgew0KICAgICAg\nICBzdXBlci5hcHBlbmRYbWxDb21wYXJpc29uKGJ1Ziwgb3AsIGxocywgcmhz\nLCBsaHN4bWwsIHJoc3htbCk7DQogICAgICAgIGlmIChsaHN4bWwgJiYgcmhz\neG1sKQ0KICAgICAgICAgICAgYXBwZW5kWG1sQ29tcGFyaXNvbjIoYnVmLCBv\ncCwgbGhzLCByaHMpOw0KICAgICAgICBlbHNlIGlmIChsaHN4bWwpDQogICAg\nICAgICAgICBhcHBlbmRYbWxDb21wYXJpc29uMShidWYsIG9wLCBsaHMsIHJo\ncyk7DQogICAgICAgIGVsc2UgDQogICAgICAgICAgICBhcHBlbmRYbWxDb21w\nYXJpc29uMShidWYsIG9wLCByaHMsIGxocyk7DQogICAgfQ0KDQogICAgLyoq\nDQogICAgICogQXBwZW5kIGFuIHhtbCBjb21wYXJpc29uIHByZWRpY2F0ZS4N\nCiAgICAgKg0KICAgICAqIEBwYXJhbSBidWYgdGhlIFNRTCBidWZmZXIgdG8g\nd3JpdGUgdGhlIGNvbXBhcmlzb24NCiAgICAgKiBAcGFyYW0gb3AgdGhlIGNv\nbXBhcmlzb24gb3BlcmF0aW9uIHRvIHBlcmZvcm0NCiAgICAgKiBAcGFyYW0g\nbGhzIHRoZSBsZWZ0IGhhbmQgc2lkZSBvZiB0aGUgY29tcGFyaXNvbiAobWFw\ncyB0byB4bWwgY29sdW1uKQ0KICAgICAqIEBwYXJhbSByaHMgdGhlIHJpZ2h0\nIGhhbmQgc2lkZSBvZiB0aGUgY29tcGFyaXNvbg0KICAgICAqLw0KICAgIHBy\naXZhdGUgdm9pZCBhcHBlbmRYbWxDb21wYXJpc29uMShTUUxCdWZmZXIgYnVm\nLCBTdHJpbmcgb3AsIA0KICAgICAgICAgICAgRmlsdGVyVmFsdWUgbGhzLCBG\naWx0ZXJWYWx1ZSByaHMpIHsNCiAgICAgICAgYm9vbGVhbiBjYXN0cmhzID0g\nZmFsc2U7DQogICAgICAgIENsYXNzIHJjID0gRmlsdGVycy53cmFwKHJocy5n\nZXRUeXBlKCkpOw0KICAgICAgICBpbnQgdHlwZSA9IDA7DQogICAgICAgIGlm\nIChyaHMuaXNDb25zdGFudCgpKSB7DQogICAgICAgICAgICB0eXBlID0gZ2V0\nSkRCQ1R5cGUoSmF2YVR5cGVzLmdldFR5cGVDb2RlKHJjKSwgZmFsc2UpOw0K\nICAgICAgICAgICAgY2FzdHJocyA9IHRydWU7DQogICAgICAgIH0NCiAgICAg\nICAgDQogICAgICAgIGFwcGVuZFhtbEV4aXN0cyhidWYsIGxocyk7DQoNCiAg\nICAgICAgYnVmLmFwcGVuZCgiICIpLmFwcGVuZChvcCkuYXBwZW5kKCIgIik7\nDQogICAgICAgIA0KICAgICAgICBidWYuYXBwZW5kKCIkIik7DQogICAgICAg\nIGlmIChjYXN0cmhzKQ0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiUGFybSIp\nOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICByaHMuYXBwZW5kVG8oYnVm\nKTsNCiAgICAgICAgDQogICAgICAgIGJ1Zi5hcHBlbmQoIl0nIFBBU1NJTkcg\nIik7DQogICAgICAgIGFwcGVuZFhtbFZhcihidWYsIGxocyk7DQogICAgICAg\nIGJ1Zi5hcHBlbmQoIiwgIik7DQogICAgICAgIA0KICAgICAgICBpZiAoY2Fz\ndHJocykNCiAgICAgICAgICAgIGFwcGVuZENhc3QoYnVmLCByaHMsIHR5cGUp\nOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICByaHMuYXBwZW5kVG8oYnVm\nKTsNCiAgICAgICAgDQogICAgICAgIGJ1Zi5hcHBlbmQoIiBBUyBcIiIpOw0K\nICAgICAgICBpZiAoY2FzdHJocykNCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQo\nIlBhcm0iKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmhzLmFwcGVu\nZFRvKGJ1Zik7DQogICAgICAgIGJ1Zi5hcHBlbmQoIlwiKSIpOw0KICAgIH0N\nCiAgICANCiAgICAvKioNCiAgICAgKiBBcHBlbmQgYW4geG1sIGNvbXBhcmlz\nb24gcHJlZGljYXRlLiAoYm90aCBvcGVyYW5kcyBtYXAgdG8geG1sIGNvbHVt\nbikNCiAgICAgKg0KICAgICAqIEBwYXJhbSBidWYgdGhlIFNRTCBidWZmZXIg\ndG8gd3JpdGUgdGhlIGNvbXBhcmlzb24NCiAgICAgKiBAcGFyYW0gb3AgdGhl\nIGNvbXBhcmlzb24gb3BlcmF0aW9uIHRvIHBlcmZvcm0NCiAgICAgKiBAcGFy\nYW0gbGhzIHRoZSBsZWZ0IGhhbmQgc2lkZSBvZiB0aGUgY29tcGFyaXNvbiAo\nbWFwcyB0byB4bWwgY29sdW1uKQ0KICAgICAqIEBwYXJhbSByaHMgdGhlIHJp\nZ2h0IGhhbmQgc2lkZSBvZiB0aGUgY29tcGFyaXNvbiAobWFwcyB0byB4bWwg\nY29sdW1uKQ0KICAgICAqLw0KICAgIHByaXZhdGUgdm9pZCBhcHBlbmRYbWxD\nb21wYXJpc29uMihTUUxCdWZmZXIgYnVmLCBTdHJpbmcgb3AsIA0KICAgICAg\nICAgICAgRmlsdGVyVmFsdWUgbGhzLCBGaWx0ZXJWYWx1ZSByaHMpIHsNCiAg\nICAgICAgYXBwZW5kWG1sRXhpc3RzKGJ1ZiwgbGhzKTsNCiAgICAgICAgDQog\nICAgICAgIGJ1Zi5hcHBlbmQoIiAiKS5hcHBlbmQob3ApLmFwcGVuZCgiICIp\nOw0KICAgICAgICANCiAgICAgICAgYnVmLmFwcGVuZCgiJCIpLmFwcGVuZChy\naHMuZ2V0Q29sdW1uQWxpYXMoDQogICAgICAgICAgICByaHMuZ2V0RmllbGRN\nYXBwaW5nKCkuZ2V0Q29sdW1ucygpWzBdKSkuDQogICAgICAgICAgICBhcHBl\nbmQoIi8qLyIpOw0KICAgICAgICByaHMuYXBwZW5kVG8oYnVmKTsNCiAgICAg\nICAgDQogICAgICAgIGJ1Zi5hcHBlbmQoIl0nIFBBU1NJTkcgIik7DQogICAg\nICAgIGFwcGVuZFhtbFZhcihidWYsIGxocyk7DQogICAgICAgIGJ1Zi5hcHBl\nbmQoIiwgIik7DQogICAgICAgIGFwcGVuZFhtbFZhcihidWYsIHJocyk7DQog\nICAgICAgIGJ1Zi5hcHBlbmQoIikiKTsNCiAgICB9DQogICAgDQogICAgcHJp\ndmF0ZSB2b2lkIGFwcGVuZFhtbFZhcihTUUxCdWZmZXIgYnVmLCBGaWx0ZXJW\nYWx1ZSB2YWwpIHsNCiAgICAgICAgYnVmLmFwcGVuZCh2YWwuZ2V0Q29sdW1u\nQWxpYXMoDQogICAgICAgICAgICB2YWwuZ2V0RmllbGRNYXBwaW5nKCkuZ2V0\nQ29sdW1ucygpWzBdKSkuDQogICAgICAgICAgICBhcHBlbmQoIiBBUyAiKS4N\nCiAgICAgICAgICAgIGFwcGVuZCgiXCIiKS5hcHBlbmQodmFsLmdldENvbHVt\nbkFsaWFzKA0KICAgICAgICAgICAgdmFsLmdldEZpZWxkTWFwcGluZygpLmdl\ndENvbHVtbnMoKVswXSkpLg0KICAgICAgICAgICAgYXBwZW5kKCJcIiIpOyAg\nICAgICAgDQogICAgfQ0KICAgIA0KICAgIHByaXZhdGUgdm9pZCBhcHBlbmRY\nbWxFeGlzdHMoU1FMQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgdmFsKSB7DQog\nICAgICAgIGJ1Zi5hcHBlbmQoIlhNTEVYSVNUUygnIik7DQogICAgICAgIGJ1\nZi5hcHBlbmQoIiQiKS5hcHBlbmQodmFsLmdldENvbHVtbkFsaWFzKA0KICAg\nICAgICAgICAgdmFsLmdldEZpZWxkTWFwcGluZygpLmdldENvbHVtbnMoKVsw\nXSkpLg0KICAgICAgICAgICAgYXBwZW5kKCIvKlsiKTsNCiAgICAgICAgdmFs\nLmFwcGVuZFRvKGJ1Zik7ICAgICAgICANCiAgICB9DQogICAgDQogICAgLyoq\nDQogICAgICogYWRkIENBU1QgZm9yIGEgc2NhbGFyIGZ1bmN0aW9uIHdoZXJl\nIG9wZXJhbmQgaXMgYSBwYXJhbQ0KICAgICAqIA0KICAgICAqIEBwYXJhbSBm\ndW5jIG9yaWdpbmFsIHN0cmluZw0KICAgICAqIEBwYXJhbSB0YXJnZXQgc3Vi\nc3RyaW5nIHRvIGxvb2sgZm9yDQogICAgICogQHBhcmFtIGFzU3RyaW5nIA0K\nICAgICAqIEByZXR1cm4gdXBkYXRlZCBzdHJpbmcgKGZ1bmMpDQogICAgICov\nDQogICAgcHJpdmF0ZSBTdHJpbmcgYWRkQ2FzdEFzU3RyaW5nKFN0cmluZyBm\ndW5jLCBTdHJpbmcgdGFyZ2V0LCANCiAgICAgICAgICAgIFN0cmluZyBhc1N0\ncmluZykgew0KICAgICAgICBTdHJpbmcgZnN0cmluZyA9IGZ1bmM7DQogICAg\nICAgIGlmIChmdW5jLmluZGV4T2YodGFyZ2V0KSAhPSAtMSkNCiAgICAgICAg\nICAgIGZzdHJpbmcgPSBTdHJpbmdzLnJlcGxhY2UoDQogICAgICAgICAgICAg\nICAgZnVuYywgdGFyZ2V0LCAiQ0FTVCgiICsgdGFyZ2V0ICsgYXNTdHJpbmcg\nKyAiKSIpOw0KICAgICAgICByZXR1cm4gZnN0cmluZzsNCiAgICB9DQoNCiAg\nICAvKioNCiAgICAgKiBhZGQgQ0FTVCBmb3IgYSBmdW5jdGlvbiBvcGVyYXRv\nciB3aGVyZSBvcGVyYW5kIGlzIGEgcGFyYW0NCiAgICAgKiANCiAgICAgKiBA\ncGFyYW0gZnVuYyBmdW5jdGlvbiBuYW1lDQogICAgICogQHBhcmFtIHZhbCB0\neXBlDQogICAgICogQHJldHVybiB1cGRhdGVkIHN0cmluZyAoZnVuYykNCiAg\nICAgKi8NCiAgICBwdWJsaWMgU3RyaW5nIGFkZENhc3RBc1R5cGUoU3RyaW5n\nIGZ1bmMsIFZhbCB2YWwpIHsNCiAgICAgICAgU3RyaW5nIGZzdHJpbmcgPSBu\ndWxsOw0KICAgICAgICBTdHJpbmcgdHlwZSA9IGdldFR5cGVOYW1lKGdldEpE\nQkNUeXBlKEphdmFUeXBlcy5nZXRUeXBlQ29kZSh2YWwNCiAgICAgICAgICAg\nIC5nZXRUeXBlKCkpLCBmYWxzZSkpOw0KICAgICAgICBmc3RyaW5nID0gIkNB\nU1QoPyBBUyAiICsgdHlwZSArICIpIjsNCiAgICAgICAgcmV0dXJuIGZzdHJp\nbmc7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmV0dXJuIHRoZSBjb3Jy\nZWN0IENBU1QgZnVuY3Rpb24gc3ludGF4DQogICAgICogDQogICAgICogQHBh\ncmFtIHZhbCBvcGVyYW5kIG9mIGNhc3QNCiAgICAgKiBAcGFyYW0gZnVuYyBv\ncmlnaW5hbCBzdHJpbmcNCiAgICAgKiBAcmV0dXJuIGEgU3RyaW5nIHdpdGgg\ndGhlIGNvcnJlY3QgQ0FTVCBmdW5jdGlvbiBzeW50YXgNCiAgICAgKi8NCiAg\nICBwdWJsaWMgU3RyaW5nIGdldENhc3RGdW5jdGlvbihWYWwgdmFsLCBTdHJp\nbmcgZnVuYykgew0KICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgTGl0IHx8\nIHZhbCBpbnN0YW5jZW9mIFBhcmFtKQ0KICAgICAgICAgICAgaWYgKGZ1bmMu\naW5kZXhPZigiVkFSQ0hBUiIpID09IC0xKQ0KICAgICAgICAgICAgICAgIGZ1\nbmMgPSBhZGRDYXN0QXNTdHJpbmcoZnVuYywgInswfSIsICIgQVMgVkFSQ0hB\nUigxMDAwKSIpOw0KICAgICAgICByZXR1cm4gZnVuYzsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgdm9pZCBpbmRleE9mKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZh\nbHVlIHN0ciwgRmlsdGVyVmFsdWUgZmluZCwNCiAgICAgICAgICAgIEZpbHRl\nclZhbHVlIHN0YXJ0KSB7DQogICAgICAgIGlmIChmaW5kLmdldFZhbHVlKCkg\nIT0gbnVsbCkgeyAvLyBub24gY29uc3RhbnRzDQogICAgICAgICAgICBidWYu\nYXBwZW5kKCIoTE9DQVRFKENBU1QoKCIpOw0KICAgICAgICAgICAgZmluZC5h\ncHBlbmRUbyhidWYpOw0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiKSBBUyBW\nQVJDSEFSKDEwMDApKSwgIik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAg\nICAgICAvLyB0aGlzIGlzIGEgY29uc3RhbnQNCiAgICAgICAgICAgIGJ1Zi5h\ncHBlbmQoIihMT0NBVEUoIik7DQogICAgICAgICAgICBmaW5kLmFwcGVuZFRv\nKGJ1Zik7DQogICAgICAgICAgICBidWYuYXBwZW5kKCIsICIpOw0KICAgICAg\nICB9DQogICAgICAgIGlmIChzdHIuZ2V0VmFsdWUoKSAhPSBudWxsKSB7DQog\nICAgICAgICAgICBidWYuYXBwZW5kKCJDQVNUKCgiKTsNCiAgICAgICAgICAg\nIHN0ci5hcHBlbmRUbyhidWYpOw0KICAgICAgICAgICAgYnVmLmFwcGVuZCgi\nKSBBUyBWQVJDSEFSKDEwMDApKSIpOw0KICAgICAgICB9IGVsc2Ugew0KICAg\nICAgICAgICAgc3RyLmFwcGVuZFRvKGJ1Zik7DQogICAgICAgIH0NCiAgICAg\nICAgaWYgKHN0YXJ0ICE9IG51bGwpIHsNCiAgICAgICAgICAgIGlmIChzdGFy\ndC5nZXRWYWx1ZSgpID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBidWYu\nYXBwZW5kKCIsIENBU1QoKCIpOw0KICAgICAgICAgICAgICAgIHN0YXJ0LmFw\ncGVuZFRvKGJ1Zik7DQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiKSBB\nUyBJTlRFR0VSKSArIDEiKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAg\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiLCAiKTsNCiAgICAgICAgICAgICAg\nICBzdGFydC5hcHBlbmRUbyhidWYpOw0KICAgICAgICAgICAgfQ0KICAgICAg\nICB9DQogICAgICAgIGJ1Zi5hcHBlbmQoIikgLSAxKSIpOw0KICAgIH0NCg0K\nICAgIC8qKiANCiAgICAgKiBDYXN0IHRoZSBzcGVjaWZpZWQgdmFsdWUgdG8g\ndGhlIHNwZWNpZmllZCB0eXBlLg0KICAgICAqDQogICAgICogQHBhcmFtIGJ1\nZiB0aGUgYnVmZmVyIHRvIGFwcGVuZCB0aGUgY2FzdCB0bw0KICAgICAqIEBw\nYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGNhc3QNCiAgICAgKiBAcGFyYW0gdHlw\nZSB0aGUgdHlwZSBvZiB0aGUgY2FzZSwgZS5nLiB7QGxpbmsgVHlwZXMjTlVN\nRVJJQ30NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRDYXN0KFNR\nTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVlIHZhbCwgaW50IHR5cGUpIHsNCg0K\nICAgICAgICAvLyBDb252ZXJ0IHRoZSBjYXN0IGZ1bmN0aW9uOiAiQ0FTVCh7\nMH0gQVMgezF9KSINCiAgICAgICAgaW50IGZpcnN0UGFyYW0gPSBjYXN0RnVu\nY3Rpb24uaW5kZXhPZigiezB9Iik7DQogICAgICAgIFN0cmluZyBwcmUgPSBj\nYXN0RnVuY3Rpb24uc3Vic3RyaW5nKDAsIGZpcnN0UGFyYW0pOyAvLyAiQ0FT\nVCgiDQogICAgICAgIFN0cmluZyBtaWQgPSBjYXN0RnVuY3Rpb24uc3Vic3Ry\naW5nKGZpcnN0UGFyYW0gKyAzKTsNCiAgICAgICAgaW50IHNlY29uZFBhcmFt\nID0gbWlkLmluZGV4T2YoInsxfSIpOw0KICAgICAgICBTdHJpbmcgcG9zdDsN\nCiAgICAgICAgaWYgKHNlY29uZFBhcmFtID4gLTEpIHsNCiAgICAgICAgICAg\nIHBvc3QgPSBtaWQuc3Vic3RyaW5nKHNlY29uZFBhcmFtICsgMyk7IC8vICIp\nIg0KICAgICAgICAgICAgbWlkID0gbWlkLnN1YnN0cmluZygwLCBzZWNvbmRQ\nYXJhbSk7IC8vICIgQVMgIg0KICAgICAgICB9IGVsc2UNCiAgICAgICAgICAg\nIHBvc3QgPSAiIjsNCg0KICAgICAgICAvLyBObyBuZWVkIHRvIGFkZCBDQVNU\nIGlmIHRoZSB2YWx1ZSBpcyBhIGNvbnN0YW50DQogICAgICAgIGlmICh2YWwg\naW5zdGFuY2VvZiBMaXQgfHwgdmFsIGluc3RhbmNlb2YgUGFyYW0pIHsNCiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQocHJlKTsNCiAgICAgICAgICAgIHZhbC5h\ncHBlbmRUbyhidWYpOw0KICAgICAgICAgICAgYnVmLmFwcGVuZChtaWQpOw0K\nICAgICAgICAgICAgYnVmLmFwcGVuZChnZXRUeXBlTmFtZSh0eXBlKSk7DQog\nICAgICAgICAgICBhcHBlbmRMZW5ndGgoYnVmLCB0eXBlKTsNCiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQocG9zdCk7DQogICAgICAgIH0gZWxzZSB7DQogICAg\nICAgICAgICB2YWwuYXBwZW5kVG8oYnVmKTsNCiAgICAgICAgICAgIFN0cmlu\nZyBzcWxTdHJpbmcgPSBidWYuZ2V0U1FMKGZhbHNlKTsNCiAgICAgICAgICAg\nIGlmIChzcWxTdHJpbmcuZW5kc1dpdGgoIj8iKSkgew0KICAgICAgICAgICAg\nICAgIC8vIGNhc2UgIig/IiAtIGNvbnZlcnQgdG8gIkNBU1QoPyBBUyB0eXBl\nIg0KICAgICAgICAgICAgICAgIFN0cmluZyB0eXBlTmFtZSA9IGdldFR5cGVO\nYW1lKHR5cGUpOw0KICAgICAgICAgICAgICAgIGlmIChTdHJpbmcuY2xhc3Mu\nZXF1YWxzKHZhbC5nZXRUeXBlKCkpKQ0KICAgICAgICAgICAgICAgICAgICB0\neXBlTmFtZSA9IHR5cGVOYW1lICsgIigiICsgY2hhcmFjdGVyQ29sdW1uU2l6\nZSArICIpIjsNCiAgICAgICAgICAgICAgICBTdHJpbmcgc3RyID0gIkNBU1Qo\nPyBBUyAiICsgdHlwZU5hbWUgKyAiKSI7DQogICAgICAgICAgICAgICAgYnVm\nLnJlcGxhY2VTcWxTdHJpbmcoc3FsU3RyaW5nLmxlbmd0aCgpIC0gMSwNCiAg\nICAgICAgICAgICAgICAgICAgICAgIHNxbFN0cmluZy5sZW5ndGgoKSwgc3Ry\nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8q\nKg0KICAgICAqIENyZWF0ZSBhbiBpbmRleCBpZiBuZWNlc3NhcnkgZm9yIHNv\nbWUgZGF0YWJhc2UgdGFibGVzDQogICAgICovDQogICAgcHVibGljIHZvaWQg\nY3JlYXRlSW5kZXhJZk5lY2Vzc2FyeShTY2hlbWEgc2NoZW1hLCBTdHJpbmcg\ndGFibGUsDQogICAgICAgICAgICBDb2x1bW4gcGtDb2x1bW4pIHsNCiAgICAg\nICAgaWYgKGlzREIyWk9TVjh4T3JMYXRlcigpKSB7DQogICAgICAgICAgICAv\nLyBidWlsZCB0aGUgaW5kZXggZm9yIHRoZSBzZXF1ZW5jZSB0YWJsZXMNCiAg\nICAgICAgICAgIC8vIHRoZSBpbmRleCBuYW1lIHdpbGwgdGhlIGZ1bGx5IHF1\nYWxpZmllZCB0YWJsZSBuYW1lICsgX0lEWA0KICAgICAgICAgICAgVGFibGUg\ndGFiID0gc2NoZW1hLmdldFRhYmxlKHRhYmxlKTsNCiAgICAgICAgICAgIElu\nZGV4IGlkeCA9IHRhYi5hZGRJbmRleCh0YWIuZ2V0RnVsbE5hbWUoKSArICJf\nSURYIik7DQogICAgICAgICAgICBpZHguc2V0VW5pcXVlKHRydWUpOw0KICAg\nICAgICAgICAgaWR4LmFkZENvbHVtbihwa0NvbHVtbik7DQogICAgICAgIH0N\nCiAgICB9DQogICAgDQogICAgU3RyaW5nIG51bGxTYWZlKFN0cmluZyBzKSB7\nDQogICAgCXJldHVybiBzID09IG51bGwgPyAiIiA6IHM7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

