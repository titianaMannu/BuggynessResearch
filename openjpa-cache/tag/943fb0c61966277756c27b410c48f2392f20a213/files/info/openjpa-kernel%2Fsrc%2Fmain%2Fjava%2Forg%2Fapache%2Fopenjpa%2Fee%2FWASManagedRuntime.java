{"sha":"74116ec4c76f7dd0813c1e1fe257e9b2357260c7","node_id":"MDQ6QmxvYjIwNjM2NDo3NDExNmVjNGM3NmY3ZGQwODEzYzFlMWZlMjU3ZTliMjM1NzI2MGM3","size":14211,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/74116ec4c76f7dd0813c1e1fe257e9b2357260c7","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZWU7CgppbXBvcnQgamF2YS5p\nby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07Cmlt\ncG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7CgppbXBvcnQgamF2YXgu\nbmFtaW5nLkNvbnRleHQ7CmltcG9ydCBqYXZheC5uYW1pbmcuSW5pdGlhbENv\nbnRleHQ7CmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5IZXVyaXN0aWNNaXhl\nZEV4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnRyYW5zYWN0aW9uLkhldXJpc3Rp\nY1JvbGxiYWNrRXhjZXB0aW9uOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24u\nSW52YWxpZFRyYW5zYWN0aW9uRXhjZXB0aW9uOwppbXBvcnQgamF2YXgudHJh\nbnNhY3Rpb24uTm90U3VwcG9ydGVkRXhjZXB0aW9uOwppbXBvcnQgamF2YXgu\ndHJhbnNhY3Rpb24uUm9sbGJhY2tFeGNlcHRpb247CmltcG9ydCBqYXZheC50\ncmFuc2FjdGlvbi5TdGF0dXM7CmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5T\neW5jaHJvbml6YXRpb247CmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5TeXN0\nZW1FeGNlcHRpb247CmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2Fj\ndGlvbjsKaW1wb3J0IGphdmF4LnRyYW5zYWN0aW9uLnhhLlhBUmVzb3VyY2U7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZp\nZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYu\nQ29uZmlndXJhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5j\nb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwu\nSW52YWxpZFN0YXRlRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnV0aWwuTm9UcmFuc2FjdGlvbkV4Y2VwdGlvbjsKCmltcG9ydCBzZXJw\nLmJ5dGVjb2RlLkJDQ2xhc3M7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLlByb2pl\nY3Q7CgovKioKICoge0BsaW5rIE1hbmFnZWRSdW50aW1lfSBpbXBsZW1lbnRh\ndGlvbiB0aGF0IGFsbG93cyBzeW5jaHJvbml6YXRpb24gd2l0aCBhCiAqIFdl\nYlNwaGVyZSBtYW5hZ2VkIHRyYW5zYWN0aW9uLgogKgogKiA8UD4KICogV2Vi\nU3BoZXJlIEFwcGxpY2F0aW9uIFNlcnZlciBkb2VzIG5vdCBleHBvc2UgdGhl\nIFRyYW5zYWN0aW9uTWFuYWdlciB0byBhbgogKiBhcHBsaWNhdGlvbi4gSW5z\ndGVhZCBpdCBwcm92aWRlcyBhIHByb3ByaWV0YXJ5IGludGVyZmFjZSB0byBy\nZWdpc3RlciBmb3IKICogc3luY2hyb25pemF0aW9uIGFuZCBvYnRhaW4gdHJh\nbnNhY3Rpb24gaWRzLgogKgogKiA8UD4KICogV0FTTWFuYWdlZFJ1bnRpbWUg\ncHJvdmlkZXMgdGhlIHdyYXBwZXIgY2xhc3NlcyBuZWVkZWQgdG8gaW50ZXJh\nY3Qgd2l0aCB0aGUKICogV0FTIHByb3ByaWV0YXJ5IGludGVyZmFjZSBhbmQg\ndGhlIE9wZW5KUEEga2VybmVsLgogKgogKiBAYXV0aG9yIEtldmluIFN1dHRl\ncgogKi8KcHVibGljIGNsYXNzIFdBU01hbmFnZWRSdW50aW1lIGV4dGVuZHMg\nQWJzdHJhY3RNYW5hZ2VkUnVudGltZQogICAgICAgIGltcGxlbWVudHMgTWFu\nYWdlZFJ1bnRpbWUsIENvbmZpZ3VyYWJsZSB7CgogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPQogICAgICAgIExvY2FsaXplci5m\nb3JQYWNrYWdlKFdBU01hbmFnZWRSdW50aW1lLmNsYXNzKTsKCiAgICBwcml2\nYXRlIE9iamVjdCBfZXh0ZW5kZWRUcmFuc2FjdGlvbiA9IG51bGw7CiAgICBw\ncml2YXRlIE1ldGhvZCBfZ2V0R2xvYmFsSWQgPSBudWxsOwogICAgcHJpdmF0\nZSBNZXRob2QgX3JlZ2lzdGVyU3luYyA9IG51bGw7CiAgICBwcml2YXRlIE9w\nZW5KUEFDb25maWd1cmF0aW9uIF9jb25mID0gbnVsbDsKICAgIHByaXZhdGUg\nTG9nIF9sb2cgPSBudWxsOwoKICAgIC8qKgogICAgICogR2V0cyBhbiBleHRl\nbmRlZEpUQVRyYW5zYWN0aW9uIGZyb20gSk5ESSBhbmQgY3JlYXRlcyBhIHRy\nYW5zYWN0aW9uCiAgICAgKiB3cmFwcGVyCiAgICAgKi8KICAgIHB1YmxpYyBq\nYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXIgZ2V0VHJhbnNh\nY3Rpb25NYW5hZ2VyKCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gbmV3IFdBU1RyYW5zYWN0aW9uKCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUcmFuc2FjdGlvbiB3cmFwcGVyIGZvciBXZWJTcGhlcmUu\nIFdlYlNwaGVyZSBleHBvc2VzIGEgc3Vic2V0IG9mIHRoZQogICAgICogVHJh\nbnNhY3Rpb24gYW5kIFRyYW5zYWN0aW9uTWFuYWdlciBpbnRlcmZhY2VzIHRv\nIHRoZSBjdXN0b21lci4gQW55CiAgICAgKiBtZXRob2RzIHdoaWNoIGFyZSBu\nb3QgZXhwb3NlZCBieSBXZWJTcGhlcmUgd2lsbCB0aHJvdyBhbgogICAgICog\nSWxsZWdhbFN0YXRlRXhjZXB0aW9uIHRvIHRoZSBjYWxsZXIuCiAgICAgKgog\nICAgICogPFA+CiAgICAgKiBNZXRob2RzIHN1cHBvcnRlZCBieSBXQVMgYXJl\nCiAgICAgKiA8VUw+CiAgICAgKiA8TEk+UmVnaXN0ZXJTeW5jaHJvbml6YXRp\nb24gPC9MST4KICAgICAqIDxMST5HZXRTdGF0dXM8L0xJPgogICAgICogPC9V\nTD4KICAgICAqLwogICAgY2xhc3MgV0FTVHJhbnNhY3Rpb24gaW1wbGVtZW50\ncyBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXIsCiAgICAg\nICAgamF2YXgudHJhbnNhY3Rpb24uVHJhbnNhY3Rpb24gewoKICAgICAgICBw\ndWJsaWMgaW50IGdldFN0YXR1cygpIHRocm93cyBTeXN0ZW1FeGNlcHRpb24g\newogICAgICAgICAgICBpbnQgcnZhbDsKICAgICAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgICAgIGlmIChnZXRHbG9iYWxJZCgpICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgICAgICBydmFsID0gU3RhdHVzLlNUQVRVU19BQ1RJVkU7\nCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAg\nIHJ2YWwgPSBTdGF0dXMuU1RBVFVTX05PX1RSQU5TQUNUSU9OOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vVHJhbnNhY3Rpb25FeGNl\ncHRpb24oX2xvYwogICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KCJ3YXMt\ndHJhbnNhY3Rpb24taWQtZXhjZXB0aW9uIikpLnNldENhdXNlKGUpOwogICAg\nICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBydmFsOwogICAgICAgIH0K\nCiAgICAgICAgLyoqCiAgICAgICAgICogUHJvdmlkZXMgYSBUcmFuc2FjdGlv\nbiB3cmFwcGVyLiBUaGUgdHJhbnNhY3Rpb24gd3JhcHBlciBtYXliIG9ubHkg\nYmUKICAgICAgICAgKiB1c2VkIHRvIGRldGVybWluZSB0aGUgc3RhdHVzIG9m\nIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uLiBXZWJTcGhlcmUKICAgICAgICAg\nKiBkb2VzIG5vdCBhbGxvdyBkaXJlY3QgY29udHJvbCBvZiBjb250YWluZXIg\ndHJhbnNhY3Rpb25zLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiBB\nIFdlYlNwaGVyZSB0cmFuc2FjdGlvbiB3cmFwcGVyLgogICAgICAgICAqLwog\nICAgICAgIHB1YmxpYyBUcmFuc2FjdGlvbiBnZXRUcmFuc2FjdGlvbigpIHRo\ncm93cyBTeXN0ZW1FeGNlcHRpb24gewogICAgICAgICAgICByZXR1cm4gdGhp\nczsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFJlZ2lzdGVy\nIGZvciBzeW5jaHJvbml6YXRpb24gd2l0aCBhIFdlYlNwaGVyZSBtYW5hZ2Vk\nIHRyYW5zYWN0aW9uIHZpYQogICAgICAgICAqIHRoZSBleHRlbmRlZEpUQVRy\nYW5zYWN0aW9uIGludGVyZmFjZS4KICAgICAgICAgKi8KICAgICAgICBwdWJs\naWMgdm9pZCByZWdpc3RlclN5bmNocm9uaXphdGlvbihTeW5jaHJvbml6YXRp\nb24gYXJnMCkKICAgICAgICAgICAgdGhyb3dzIElsbGVnYWxTdGF0ZUV4Y2Vw\ndGlvbiwgUm9sbGJhY2tFeGNlcHRpb24sIFN5c3RlbUV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIGlmIChfZXh0ZW5kZWRUcmFuc2FjdGlvbiAhPSBudWxsKSB7\nCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIF9y\nZWdpc3RlclN5bmMuaW52b2tlKF9leHRlbmRlZFRyYW5zYWN0aW9uLAogICAg\nICAgICAgICAgICAgICAgICAgICBuZXcgT2JqZWN0W10geyBuZXcgV0FTU3lu\nY2hyb25pemF0aW9uKGFyZzApIH0pOwogICAgICAgICAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MKICAgICAgICAgICAgICAg\nICAgICAgICAgLmdldCgid2FzLXJlZmxlY3Rpb24tZXhjZXB0aW9uIikpLnNl\ndENhdXNlKGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRTdGF0ZUV4\nY2VwdGlvbihfbG9jLmdldCgid2FzLWxvb2t1cC1lcnJvciIpKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0\ncyB0aGUgR2xvYmFsVHJhbnNhY3Rpb24gSUQgb2YgdGhlIFdlYlNwaGVyZSBt\nYW5hZ2VkIHRyYW5zYWN0aW9uLgogICAgICAgICAqIElmIG5vIEdsb2JhbCBU\ncmFuc2FjdGlvbiBpcyBhY3RpdmUgbnVsbCB3aWxsIGJlIHJldHVybmVkLgog\nICAgICAgICAqCiAgICAgICAgICogQHJldHVybiBOdWxsIGlmIGEgZ2xvYmFs\nIHRyYW5zYWN0aW9uIGlzIG5vdCBhY3RpdmUgb3IgaWYgYW4gZXJyb3IKICAg\nICAgICAgKiAgICAgICAgIG9jY3Vycy4gYnl0ZVtdIGlkIGlmIGEgZ2xvYmFs\nIHRyYW5zYWN0aW9uIGlzIGFjdGl2ZS4KICAgICAgICAgKi8KICAgICAgICBw\ncml2YXRlIGJ5dGVbXSBnZXRHbG9iYWxJZCgpIHsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIHJldHVybiAoYnl0ZVtdKSBfZ2V0R2xvYmFs\nSWQuaW52b2tlKF9leHRlbmRlZFRyYW5zYWN0aW9uLCBudWxsKTsKICAgICAg\nICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAg\nIHRocm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYwogICAgICAg\nICAgICAgICAgICAgIC5nZXQoIndhcy1yZWZsZWN0aW9uLWV4Y2VwdGlvbiIp\nKS5zZXRDYXVzZShlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAg\nICAgLyoqCiAgICAgICAgICogVW5pbXBsZW1lbnRlZCwgV0FTIGRvZXMgbm90\nIHByb3ZpZGUgdGhpcyBsZXZlbCBvZiBjb250cm9sLiBUaHJvd3MgYW4KICAg\nICAgICAgKiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24KICAgICAgICAgKi8KICAg\nICAgICBwdWJsaWMgdm9pZCBiZWdpbigpIHRocm93cyBOb3RTdXBwb3J0ZWRF\neGNlcHRpb24sIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoIndhcy11bnN1\ncHBvcnRlZC1vcCIsCiAgICAgICAgICAgICAgICAiYmVnaW4iKSk7CiAgICAg\nICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBVbmltcGxlbWVudGVkLCBX\nQVMgZG9lcyBub3QgcHJvdmlkZSB0aGlzIGxldmVsIG9mIGNvbnRyb2wuIFRo\ncm93cyBhbgogICAgICAgICAqIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbgogICAg\nICAgICAqLwogICAgICAgIHB1YmxpYyB2b2lkIGNvbW1pdCgpIHRocm93cyBI\nZXVyaXN0aWNNaXhlZEV4Y2VwdGlvbiwKICAgICAgICAgICAgSGV1cmlzdGlj\nUm9sbGJhY2tFeGNlcHRpb24sIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwKICAg\nICAgICAgICAgUm9sbGJhY2tFeGNlcHRpb24sIFNlY3VyaXR5RXhjZXB0aW9u\nLCBTeXN0ZW1FeGNlcHRpb24gewogICAgICAgICAgICB0aHJvdyBuZXcgSW52\nYWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJ3YXMtdW5zdXBwb3J0ZWQt\nb3AiLAogICAgICAgICAgICAgICAgImNvbW1pdCIpKTsKICAgICAgICB9Cgog\nICAgICAgIC8qKgogICAgICAgICAqIFVuaW1wbGVtZW50ZWQsIFdBUyBkb2Vz\nIG5vdCBwcm92aWRlIHRoaXMgbGV2ZWwgb2YgY29udHJvbC4gVGhyb3dzIGFu\nCiAgICAgICAgICogSWxsZWdhbFN0YXRlRXhjZXB0aW9uCiAgICAgICAgICov\nCiAgICAgICAgcHVibGljIHZvaWQgcmVzdW1lKFRyYW5zYWN0aW9uIGFyZzAp\nIHRocm93cyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24sCiAgICAgICAgICAgIElu\ndmFsaWRUcmFuc2FjdGlvbkV4Y2VwdGlvbiwgU3lzdGVtRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlvbihf\nbG9jLmdldCgid2FzLXVuc3VwcG9ydGVkLW9wIiwKICAgICAgICAgICAgICAg\nICJyZXN1bWUiKSk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAg\nKiBVbmltcGxlbWVudGVkLCBXQVMgZG9lcyBub3QgcHJvdmlkZSB0aGlzIGxl\ndmVsIG9mIGNvbnRyb2wuIExvZyBhCiAgICAgICAgICogdHJhY2UgaW5zdGVh\nZCBvZiB0aHJvd2luZyBhbiBleGNlcHRpb24uIFJvbGxiYWNrIG1heSBiZSB1\nc2VkIGluCiAgICAgICAgICogc29tZSBlcnJvciBwYXRocywgdGhyb3dpbmcg\nYW5vdGhlciBleGNlcHRpb24gbWF5IHJlc3VsdCBpbiB0aGUKICAgICAgICAg\nKiBvcmlnaW5hbCBleGNlcHRpb24gYmVpbmcgbG9zdC4KICAgICAgICAgKi8K\nICAgICAgICBwdWJsaWMgdm9pZCByb2xsYmFjaygpIHRocm93cyBJbGxlZ2Fs\nU3RhdGVFeGNlcHRpb24sIFNlY3VyaXR5RXhjZXB0aW9uLAogICAgICAgICAg\nICBTeXN0ZW1FeGNlcHRpb24gewogICAgICAgICAgICBpZiAoX2xvZy5pc1Ry\nYWNlRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICBfbG9nLnRyYWNlKF9s\nb2MuZ2V0KCJ3YXMtdW5zdXBwb3J0ZWQtb3AiLCAicm9sbGJhY2siKSk7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAq\nIFVuaW1wbGVtZW50ZWQsIFdBUyBkb2VzIG5vdCBwcm92aWRlIHRoaXMgbGV2\nZWwgb2YgY29udHJvbC4gTG9nIGEKICAgICAgICAgKiB0cmFjZSBpbnN0ZWFk\nIG9mIHRocm93aW5nIGFuIGV4Y2VwdGlvbi4gU2V0Um9sbGJhY2tPbmx5IG1h\neSBiZSB1c2VkCiAgICAgICAgICogaW4gc29tZSBlcnJvciBwYXRocywgdGhy\nb3dpbmcgYW5vdGhlciBleGNlcHRpb24gbWF5IHJlc3VsdCBpbiB0aGUKICAg\nICAgICAgKiBvcmlnaW5hbCBleGNlcHRpb24gYmVpbmcgbG9zdC4KICAgICAg\nICAgKi8KICAgICAgICBwdWJsaWMgdm9pZCBzZXRSb2xsYmFja09ubHkoKSB0\naHJvd3MgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLAogICAgICAgICAgICBTeXN0\nZW1FeGNlcHRpb24gewogICAgICAgICAgICBpZiAoX2xvZy5pc1RyYWNlRW5h\nYmxlZCgpKSB7CiAgICAgICAgICAgICAgICBfbG9nLnRyYWNlKF9sb2MuZ2V0\nKCJ3YXMtdW5zdXBwb3J0ZWQtb3AiLCAic2V0Um9sbGJhY2tPbmx5IikpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAg\nKiBVbmltcGxlbWVudGVkLCBXQVMgZG9lcyBub3QgcHJvdmlkZSB0aGlzIGxl\ndmVsIG9mIGNvbnRyb2wuIFRocm93cyBhbgogICAgICAgICAqIElsbGVnYWxT\ndGF0ZUV4Y2VwdGlvbgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB2b2lk\nIHNldFRyYW5zYWN0aW9uVGltZW91dChpbnQgYXJnMCkgdGhyb3dzIFN5c3Rl\nbUV4Y2VwdGlvbiB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkU3Rh\ndGVFeGNlcHRpb24oX2xvYy5nZXQoIndhcy11bnN1cHBvcnRlZC1vcCIsCiAg\nICAgICAgICAgICAgICAic2V0VHJhbnNhY3Rpb25UaW1lb3V0IikpOwogICAg\nICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogVW5pbXBsZW1lbnRlZCwg\nV0FTIGRvZXMgbm90IHByb3ZpZGUgdGhpcyBsZXZlbCBvZiBjb250cm9sLiBU\naHJvd3MgYW4KICAgICAgICAgKiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24KICAg\nICAgICAgKi8KICAgICAgICBwdWJsaWMgVHJhbnNhY3Rpb24gc3VzcGVuZCgp\nIHRocm93cyBTeXN0ZW1FeGNlcHRpb24gewogICAgICAgICAgICB0aHJvdyBu\nZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJ3YXMtdW5zdXBw\nb3J0ZWQtb3AiLAogICAgICAgICAgICAgICAgInN1c3BlbmQiKSk7CiAgICAg\nICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBVbmltcGxlbWVudGVkLCBX\nQVMgZG9lcyBub3QgcHJvdmlkZSB0aGlzIGxldmVsIG9mIGNvbnRyb2wuIFRo\ncm93cyBhbgogICAgICAgICAqIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbgogICAg\nICAgICAqLwogICAgICAgIHB1YmxpYyBib29sZWFuIGRlbGlzdFJlc291cmNl\nKFhBUmVzb3VyY2UgYXJnMCwgaW50IGFyZzEpCiAgICAgICAgICAgIHRocm93\ncyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24sIFN5c3RlbUV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xv\nYy5nZXQoIndhcy11bnN1cHBvcnRlZC1vcCIsCiAgICAgICAgICAgICAgICAi\nZGVsaXN0UmVzb3VyY2UiKSk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAg\nICAgICAgKiBVbmltcGxlbWVudGVkLCBXQVMgZG9lcyBub3QgcHJvdmlkZSB0\naGlzIGxldmVsIG9mIGNvbnRyb2wuIFRocm93cyBhbgogICAgICAgICAqIEls\nbGVnYWxTdGF0ZUV4Y2VwdGlvbgogICAgICAgICAqLwogICAgICAgIHB1Ymxp\nYyBib29sZWFuIGVubGlzdFJlc291cmNlKFhBUmVzb3VyY2UgYXJnMCkKICAg\nICAgICAgICAgdGhyb3dzIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgUm9sbGJh\nY2tFeGNlcHRpb24sIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoIndhcy11\nbnN1cHBvcnRlZC1vcCIsCiAgICAgICAgICAgICAgICAiZW5saXN0UmVzb3Vy\nY2UiKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogV0FTU3lu\nY2hyb25pemF0aW9uIHdyYXBwZXIuIFRoaXMgY2xhc3MgdHJhbnNsYXRlcyB0\naGUgV0FTIHByb3ByaWV0YXJ5CiAgICAgKiBzeW5jaHJvbml6YXRpb24gY2Fs\nbGJhY2sgbWV0aG9kcyB0byBqYXZheC50cmFuc2FjdGlvbi5TeW5jaHJvbml6\nYXRpb24KICAgICAqIG1ldGhvZHMuCiAgICAgKgogICAgICogPFA+CiAgICAg\nKiBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlCiAgICAgKiBjb20uaWJtLndl\nYnNwaGVyZS5qdGFleHRlbnNpb25zLlN5bmNocm9uaXphdGlvbkNhbGxiYWNr\nIGludGVyZmFjZS4gU2luY2UKICAgICAqIFN5bmNocm9uaXphdGlvbkNhbGxi\nYWNrIGlzIG5vdCBhdmFpbGFibGUgYXQgY29tcGlsZSB0aW1lIHdlIHVzZSBT\nZXJwIHRvCiAgICAgKiBhZGQgdGhlIGludGVyZmFjZSB0byB0aGUgY2xhc3Mg\nYWZ0ZXIgYWxsIGNsYXNzZXMgaGF2ZSBiZWVuIGNvbXBpbGVkLgogICAgICoK\nICAgICAqIDxQPgogICAgICogU3luY2hyb25pemF0aW9uQ2FsbGJhY2sgaXMg\nZXhwZWN0ZWQgdG8gYmUgYXZhaWxhYmxlIHdoZW5ldmVyIHRoaXMgY2xhc3MK\nICAgICAqIGlzIGluc3RhbnRpYXRlZCwgdGhlcmVmb3JlIHRoaXMgY2xhc3Mg\nc2hvdWxkIG9ubHkgYmUgdXNlZCB3aGVuIHJ1bm5pbmcgaW4KICAgICAqIFdl\nYlNwaGVyZS4KICAgICAqCiAgICAgKiBAc2VlIG9yZy5hcGFjaGUub3Blbmpw\nYS51dGlsLldBU1RyYW5zZm9ybWVyCiAgICAgKi8KICAgIHN0YXRpYyBjbGFz\ncyBXQVNTeW5jaHJvbml6YXRpb24gewoKICAgICAgICBTeW5jaHJvbml6YXRp\nb24gX3N5bmMgPSBudWxsOwoKICAgICAgICBXQVNTeW5jaHJvbml6YXRpb24o\nU3luY2hyb25pemF0aW9uIHN5bmMpIHsKICAgICAgICAgICAgX3N5bmMgPSBz\neW5jOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogQWZ0ZXJD\nb21wbGV0aW9uIHdyYXBwZXIuIFRyYW5zbGF0ZXMgdGhlIFdBUyBwcm9wcmll\ndGFyeSBjYWxsIHRvIGEKICAgICAgICAgKiBqYXZheC50cmFuc2FjdGlvbi5T\neW5jaHJvbml6YXRpb24gY2FsbC4KICAgICAgICAgKi8KICAgICAgICBwdWJs\naWMgdm9pZCBhZnRlckNvbXBsZXRpb24oaW50IGxvY2FsVHJhbnNhY3Rpb25J\nZCwKICAgICAgICAgICAgYnl0ZVtdIGdsb2JhbFRyYW5zYWN0aW9uSWQsIGJv\nb2xlYW4gY29tbWl0dGVkKSB7CiAgICAgICAgICAgIGlmIChfc3luYyAhPSBu\ndWxsKSB7CiAgICAgICAgICAgICAgICBpZiAoY29tbWl0dGVkKSB7CiAgICAg\nICAgICAgICAgICAgICAgX3N5bmMuYWZ0ZXJDb21wbGV0aW9uKFN0YXR1cy5T\nVEFUVVNfQ09NTUlUVEVEKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgICAgICAgICAgX3N5bmMuYWZ0ZXJDb21wbGV0aW9uKFN0YXR1\ncy5TVEFUVVNfVU5LTk9XTik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgIH0KICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEJlZm9y\nZUNvbXBsZXRpb24gd3JhcHBlci4gVHJhbnNsYXRlcyBXQVMgcHJvcHJpZXRh\ncnkgY2FsbCB0byBhCiAgICAgICAgICogamF2YXgudHJhbnNhY3Rpb24uU3lu\nY2hyb25pemF0aW9uIGNhbGwuCiAgICAgICAgICovCiAgICAgICAgcHVibGlj\nIHZvaWQgYmVmb3JlQ29tcGxldGlvbihpbnQgYXJnMCwgYnl0ZVtdIGFyZzEp\nIHsKICAgICAgICAgICAgaWYgKF9zeW5jICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgIF9zeW5jLmJlZm9yZUNvbXBsZXRpb24oKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENhY2hlcyBhIGNv\ncHkgb2YgdGhlIGNvbmZpZ3VyYXRpb24uIFRoZSBjb25maWd1cmF0aW9uIGlz\nIHVzZWQgdG8gb2J0YWluCiAgICAgKiB0aGUgbG9nZ2VyIGFuZCBjbGFzc2xv\nYWRlci4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Q29uZmlndXJhdGlv\nbihDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICBfY29uZiA9IChPcGVu\nSlBBQ29uZmlndXJhdGlvbikgY29uZjsKICAgICAgICBfbG9nID0gX2NvbmYu\nZ2V0TG9nKE9wZW5KUEFDb25maWd1cmF0aW9uLkxPR19SVU5USU1FKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEVuZENvbmZpZ3VyYXRpb24gc3R1Yi4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgZW5kQ29uZmlndXJhdGlvbigpIHsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBDb250ZXh0IGN0eCA9IG5ldyBJbml0\naWFsQ29udGV4dCgpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgX2V4dGVuZGVkVHJhbnNhY3Rpb24gPQogICAgICAgICAgICAgICAgICAg\nIGN0eC5sb29rdXAoImphdmE6Y29tcC93ZWJzcGhlcmUvRXh0ZW5kZWRKVEFU\ncmFuc2FjdGlvbiIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICAgICAgY3R4LmNsb3NlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAg\nICAgIENsYXNzIGV4dGVuZGVkSlRBVHJhbnNhY3Rpb24gPSBDbGFzcy5mb3JO\nYW1lKAogICAgICAgICAgICAgICAgICAgICJjb20uaWJtLndlYnNwaGVyZS5q\ndGFleHRlbnNpb25zLkV4dGVuZGVkSlRBVHJhbnNhY3Rpb24iKTsKICAgICAg\nICAgICAgQ2xhc3Mgc3luY2hyb25pemF0aW9uQ2FsbGJhY2sgPSBDbGFzcy5m\nb3JOYW1lKAogICAgICAgICAgICAgICAgICAgICJjb20uaWJtLndlYnNwaGVy\nZS5qdGFleHRlbnNpb25zLlN5bmNocm9uaXphdGlvbkNhbGxiYWNrIik7Cgog\nICAgICAgICAgICBfcmVnaXN0ZXJTeW5jID0gZXh0ZW5kZWRKVEFUcmFuc2Fj\ndGlvbi5nZXRNZXRob2QoCiAgICAgICAgICAgICAgICAgICAgInJlZ2lzdGVy\nU3luY2hyb25pemF0aW9uQ2FsbGJhY2tGb3JDdXJyZW50VHJhbiIsCiAgICAg\nICAgICAgICAgICAgICAgbmV3IENsYXNzW10geyBzeW5jaHJvbml6YXRpb25D\nYWxsYmFjayB9KTsKICAgICAgICAgICAgX2dldEdsb2JhbElkID0gZXh0ZW5k\nZWRKVEFUcmFuc2FjdGlvbi4KICAgICAgICAgICAgICAgIGdldE1ldGhvZCgi\nZ2V0R2xvYmFsSWQiLCBudWxsKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhj\nZXB0aW9uKF9sb2MKICAgICAgICAgICAgICAgIC5nZXQoIndhcy1yZWZsZWN0\naW9uLWV4Y2VwdGlvbiIpLCBlKS5zZXRGYXRhbCh0cnVlKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBTdGFydENvbmZpZ3VyYXRpb24gc3R1\nYi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc3RhcnRDb25maWd1cmF0aW9u\nKCkgewogICAgICAgIC8vIE5vdGhpbmcgdG8gZG8KICAgIH0KCiAgICAvKioK\nICAgICAqIENsYXNzIHRoYXQgd2lsbCBiZSBtb2RpZmllZAogICAgICovCiAg\nICBzdGF0aWMgZmluYWwgU3RyaW5nIENMQVNTID0KICAgICAgICAib3JnLmFw\nYWNoZS5vcGVuanBhLmVlLldBU01hbmFnZWRSdW50aW1lJFdBU1N5bmNocm9u\naXphdGlvbiI7CgogICAgLyoqCiAgICAgKiBJbnRlcmZhY2Ugd2hpY2ggd2ls\nbCBiZSBhZGRlZAogICAgICovCiAgICBzdGF0aWMgZmluYWwgU3RyaW5nIElO\nVEVSRkFDRSA9CiAgICAgICAgImNvbS5pYm0ud2Vic3BoZXJlLmp0YWV4dGVu\nc2lvbnMuU3luY2hyb25pemF0aW9uQ2FsbGJhY2siOwoKICAgIHB1YmxpYyBz\ndGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpCiAgICAgICAgdGhyb3dz\nIElPRXhjZXB0aW9uIHsKICAgICAgICBQcm9qZWN0IHByb2plY3QgPSBuZXcg\nUHJvamVjdCgpOwogICAgICAgIAogICAgICAgIElucHV0U3RyZWFtIGluID0g\nV0FTTWFuYWdlZFJ1bnRpbWUuY2xhc3MuZ2V0Q2xhc3NMb2FkZXIoKQogICAg\nICAgICAgICAuZ2V0UmVzb3VyY2VBc1N0cmVhbShDTEFTUy5yZXBsYWNlKCcu\nJywgJy8nKSArICIuY2xhc3MiKTsKICAgICAgICBCQ0NsYXNzIGJjQ2xhc3Mg\nPSBwcm9qZWN0LmxvYWRDbGFzcyhpbik7CiAgICAgICAgCiAgICAgICAgU3Ry\naW5nIFtdIGludGVyZmFjZXMgPSBiY0NsYXNzLmdldEludGVyZmFjZU5hbWVz\nKCk7CiAgICAgICAgCiAgICAgICAgaWYoaW50ZXJmYWNlcyAhPSBudWxsKSB7\nCiAgICAgICAgCWZvcihpbnQgaSA9IDA7IGkgPCBpbnRlcmZhY2VzLmxlbmd0\naDsgaSsrKSB7IAogICAgICAgIAkJaWYoaW50ZXJmYWNlc1tpXS5lcXVhbHMo\nSU5URVJGQUNFKSkgewogICAgICAgIAkJCXJldHVybjsgCiAgICAgICAgCQl9\nCiAgICAgICAgCX0KICAgICAgICB9CiAgICAgICAgYmNDbGFzcy5kZWNsYXJl\nSW50ZXJmYWNlKElOVEVSRkFDRSk7CiAgICAgICAgYmNDbGFzcy53cml0ZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFJvbGxiYWNrT25seShUaHJv\nd2FibGUgY2F1c2UpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgLy8gdGhlcmUgaXMgbm8gZ2VuZXJpYyBzdXBwb3J0IGZvciBzZXR0aW5n\nIHRoZSByb2xsYmFjayBjYXVzZQogICAgICAgIGdldFRyYW5zYWN0aW9uTWFu\nYWdlcigpLmdldFRyYW5zYWN0aW9uKCkuc2V0Um9sbGJhY2tPbmx5KCk7CiAg\nICB9CgogICAgcHVibGljIFRocm93YWJsZSBnZXRSb2xsYmFja0NhdXNlKCkK\nICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyB0aGVyZSBp\ncyBubyBnZW5lcmljIHN1cHBvcnQgZm9yIHNldHRpbmcgdGhlIHJvbGxiYWNr\nIGNhdXNlCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0K\n","encoding":"base64"}

