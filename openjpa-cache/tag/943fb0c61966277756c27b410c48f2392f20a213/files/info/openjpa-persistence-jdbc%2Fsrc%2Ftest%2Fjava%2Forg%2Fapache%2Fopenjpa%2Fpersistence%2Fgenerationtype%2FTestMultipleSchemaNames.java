{"sha":"1ca4542726df4495d01e3f3eab71b0889a6c5f46","node_id":"MDQ6QmxvYjIwNjM2NDoxY2E0NTQyNzI2ZGY0NDk1ZDAxZTNmM2VhYjcxYjA4ODlhNmM1ZjQ2","size":12336,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1ca4542726df4495d01e3f3eab71b0889a6c5f46","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5nZW5lcmF0aW9u\ndHlwZTsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuUXVlcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmds\nZUVNRlRlc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3RNdWx0aXBsZVNjaGVt\nYU5hbWVzIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewogICAgQE92ZXJy\naWRlCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChE\nb2cxLmNsYXNzLCBEb2cyLmNsYXNzLCBEb2dUYWJsZS5jbGFzcywgRG9nVGFi\nbGUyLmNsYXNzLAogICAgICAgICAgICAgICAgRG9nVGFibGUzLmNsYXNzLCBE\nb2dUYWJsZTQuY2xhc3MpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgLy8gY2xlYW51cCBkYXRhYmFz\nZSBmaXJzdAogICAgICAgIFF1ZXJ5IHFyeSA9IGVtLmNyZWF0ZVF1ZXJ5KCJz\nZWxlY3QgZCBmcm9tIERvZzEgZCIpOwogICAgICAgIExpc3QgcmVzdWx0ID0g\ncXJ5LmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgZm9yIChpbnQgaW5kZXgg\nPSAwOyBpbmRleCA8IHJlc3VsdC5zaXplKCk7IGluZGV4KyspIHsKICAgICAg\nICAgICAgRG9nMSBPYmogPSAoRG9nMSkgcmVzdWx0LmdldChpbmRleCk7CiAg\nICAgICAgICAgIGVtLnJlbW92ZShPYmopOwogICAgICAgIH0KICAgICAgICBR\ndWVyeSBxcnkyID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRG9n\nMiBkIik7CiAgICAgICAgTGlzdCByZXN1bHQyID0gcXJ5Mi5nZXRSZXN1bHRM\naXN0KCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCBy\nZXN1bHQyLnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBEb2cyIE9i\naiA9IChEb2cyKSByZXN1bHQyLmdldChpbmRleCk7CiAgICAgICAgICAgIGVt\nLnJlbW92ZShPYmopOwogICAgICAgIH0KICAgICAgICBRdWVyeSBxcnkzID0g\nZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRG9nVGFibGUgZCIpOwog\nICAgICAgIExpc3QgcmVzdWx0MyA9IHFyeTMuZ2V0UmVzdWx0TGlzdCgpOwoK\nICAgICAgICBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgcmVzdWx0My5z\naXplKCk7IGluZGV4KyspIHsKICAgICAgICAgICAgRG9nVGFibGUgT2JqID0g\nKERvZ1RhYmxlKSByZXN1bHQzLmdldChpbmRleCk7CiAgICAgICAgICAgIGVt\nLnJlbW92ZShPYmopOwogICAgICAgIH0KICAgICAgICBRdWVyeSBxcnk0ID0g\nZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRG9nVGFibGUyIGQiKTsK\nICAgICAgICBMaXN0IHJlc3VsdDQgPSBxcnk0LmdldFJlc3VsdExpc3QoKTsK\nCiAgICAgICAgZm9yIChpbnQgaW5kZXggPSAwOyBpbmRleCA8IHJlc3VsdDQu\nc2l6ZSgpOyBpbmRleCsrKSB7CiAgICAgICAgICAgIERvZ1RhYmxlMiBPYmog\nPSAoRG9nVGFibGUyKSByZXN1bHQ0LmdldChpbmRleCk7CiAgICAgICAgICAg\nIGVtLnJlbW92ZShPYmopOwogICAgICAgIH0KCiAgICAgICAgUXVlcnkgcXJ5\nNSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZ1RhYmxlMyBk\nIik7CiAgICAgICAgTGlzdCByZXN1bHQ1ID0gcXJ5NS5nZXRSZXN1bHRMaXN0\nKCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCByZXN1\nbHQ1LnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBEb2dUYWJsZTMg\nT2JqID0gKERvZ1RhYmxlMykgcmVzdWx0NS5nZXQoaW5kZXgpOwogICAgICAg\nICAgICBlbS5yZW1vdmUoT2JqKTsKICAgICAgICB9CgogICAgICAgIFF1ZXJ5\nIHFyeTYgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2dUYWJs\nZTQgZCIpOwogICAgICAgIExpc3QgcmVzdWx0NiA9IHFyeTYuZ2V0UmVzdWx0\nTGlzdCgpOwoKICAgICAgICBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwg\ncmVzdWx0Ni5zaXplKCk7IGluZGV4KyspIHsKICAgICAgICAgICAgRG9nVGFi\nbGU0IE9iaiA9IChEb2dUYWJsZTQpIHJlc3VsdDYuZ2V0KGluZGV4KTsKICAg\nICAgICAgICAgZW0ucmVtb3ZlKE9iaik7CiAgICAgICAgfQoKICAgICAgICBR\ndWVyeSBkZWxzY2hlbWExID0gZW0KICAgICAgICAgICAgICAgIC5jcmVhdGVO\nYXRpdmVRdWVyeSgiZGVsZXRlIGZyb20gc2NoZW1hMS5vcGVuanBhX3NlcXVl\nbmNlX3RhYmxlIik7CiAgICAgICAgZGVsc2NoZW1hMS5leGVjdXRlVXBkYXRl\nKCk7CiAgICAgICAgUXVlcnkgZGVsc2NoZW1hMiA9IGVtCiAgICAgICAgICAg\nICAgICAuY3JlYXRlTmF0aXZlUXVlcnkoImRlbGV0ZSBmcm9tIHNjaGVtYTIu\nb3BlbmpwYV9zZXF1ZW5jZV90YWJsZSIpOwogICAgICAgIGRlbHNjaGVtYTIu\nZXhlY3V0ZVVwZGF0ZSgpOwogICAgICAgIFF1ZXJ5IGRlbGdlbnRhYmxlID0g\nZW0uY3JlYXRlTmF0aXZlUXVlcnkoImRlbGV0ZSBmcm9tIHNjaGVtYTEuaWRf\nZ2VuMSIpOwogICAgICAgIGRlbGdlbnRhYmxlLmV4ZWN1dGVVcGRhdGUoKTsK\nICAgICAgICBRdWVyeSBkZWxnZW50YWJsZTIgPSBlbQogICAgICAgICAgICAg\nICAgLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJkZWxldGUgZnJvbSBzY2hlbWEyLmlk\nX2dlbjIiKTsKICAgICAgICBkZWxnZW50YWJsZTIuZXhlY3V0ZVVwZGF0ZSgp\nOwogICAgICAgIFF1ZXJ5IGRlbGdlbnRhYmxlMyA9IGVtCiAgICAgICAgICAg\nICAgICAuY3JlYXRlTmF0aXZlUXVlcnkoImRlbGV0ZSBmcm9tIHNjaGVtYTNn\nLmlkX2dlbjMiKTsKICAgICAgICBkZWxnZW50YWJsZTMuZXhlY3V0ZVVwZGF0\nZSgpOwogICAgICAgIFF1ZXJ5IGRlbGdlbnRhYmxlNCA9IGVtCiAgICAgICAg\nICAgICAgICAuY3JlYXRlTmF0aXZlUXVlcnkoImRlbGV0ZSBmcm9tIHNjaGVt\nYTRnLmlkX2dlbjQiKTsKICAgICAgICBkZWxnZW50YWJsZTQuZXhlY3V0ZVVw\nZGF0ZSgpOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RHZW5lcmF0ZWRBVVRPKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIGtlbSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0\nKGVtKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7Cgog\nICAgICAgIERvZzEgZG9nMSA9IG5ldyBEb2cxKCk7CiAgICAgICAgZG9nMS5z\nZXROYW1lKCJoZWxsb0RvZzEiKTsKICAgICAgICBkb2cxLnNldFByaWNlKDEy\nMDAwKTsKCiAgICAgICAgZW0ucGVyc2lzdChkb2cxKTsKICAgICAgICBEb2cx\nIGRvZzFhID0gbmV3IERvZzEoKTsKICAgICAgICBkb2cxYS5zZXROYW1lKCJo\nZWxsb0RvZzIiKTsKICAgICAgICBkb2cxYS5zZXRQcmljZSgyMjAwMCk7CiAg\nICAgICAgZW0ucGVyc2lzdChkb2cxYSk7CiAgICAgICAgLy8gYWRkIGRvZzIK\nICAgICAgICBEb2cyIGRvZzIgPSBuZXcgRG9nMigpOwogICAgICAgIGRvZzIu\nc2V0TmFtZSgiaGVsbG9Eb2czIik7CiAgICAgICAgZG9nMi5zZXRQcmljZSgx\nNTAwMCk7CiAgICAgICAgZW0ucGVyc2lzdChkb2cyKTsKCiAgICAgICAgRG9n\nMiBkb2cyYSA9IG5ldyBEb2cyKCk7CiAgICAgICAgZG9nMmEuc2V0TmFtZSgi\naGVsbG9Eb2c0Iik7CiAgICAgICAgZG9nMmEuc2V0UHJpY2UoMjUwMDApOwog\nICAgICAgIGVtLnBlcnNpc3QoZG9nMmEpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CgogICAgICAgIERvZzEgZG9nMXggPSBlbS5m\naW5kKERvZzEuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cxKSk7CiAgICAg\nICAgLy8gRGVyYnkgY2FuJ3QgZ3VhcmFudGVlIHRoZSBvcmRlciBvZiB0aGUg\nZ2VuZXJhdGVkIHZhbHVlLCB0aGVyZWZvcmUsCiAgICAgICAgLy8gd2UgY2Fu\nJ3QgYXNzZXJ0IHRoZSBpZCBiYXNlZCBvbiB0aGUgb3JkZXIuIEZvciBkYjIs\nIHdlIHNlZSB0aGUgaWQgCiAgICAgICAgLy8gdmFsdWUgaW4gdGhlIHJpZ2h0\nIG9yZGVyCiAgICAgICAgYXNzZXJ0VHJ1ZShkb2cxeC5nZXRJZDIoKSA9PSAx\nIHx8IGRvZzF4LmdldElkMigpID09IDIpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhkb2cxeC5nZXROYW1lKCksICJoZWxsb0RvZzEiKTsKICAgICAgICBkb2cx\neC5zZXROYW1lKCJEb2cxIik7CiAgICAgICAgZG9nMXguc2V0RG9tZXN0aWMo\ndHJ1ZSk7CiAgICAgICAgRG9nMSBkb2cxMSA9IGVtLmZpbmQoRG9nMS5jbGFz\ncywga2VtLmdldE9iamVjdElkKGRvZzFhKSk7CiAgICAgICAgYXNzZXJ0VHJ1\nZShkb2cxMS5nZXRJZDIoKSA9PSAxIHx8IGRvZzExLmdldElkMigpID09IDIp\nOwogICAgICAgIGFzc2VydEVxdWFscyhkb2cxMS5nZXROYW1lKCksICJoZWxs\nb0RvZzIiKTsKICAgICAgICBkb2cxMS5zZXROYW1lKCJEb2cyIik7CiAgICAg\nICAgZG9nMTEuc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAgLy8gdXBkYXRl\nIGRvZzIKICAgICAgICBEb2cyIGRvZzJ4ID0gZW0uZmluZChEb2cyLmNsYXNz\nLCBrZW0uZ2V0T2JqZWN0SWQoZG9nMikpOwogICAgICAgIGFzc2VydFRydWUo\nZG9nMnguZ2V0SWQyKCkgPT0gMSB8fCBkb2cyeC5nZXRJZDIoKSA9PSAyKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoZG9nMnguZ2V0TmFtZSgpLCAiaGVsbG9E\nb2czIik7CiAgICAgICAgZG9nMnguc2V0TmFtZSgiRG9nMyIpOwogICAgICAg\nIGRvZzJ4LnNldERvbWVzdGljKHRydWUpOwogICAgICAgIERvZzIgZG9nMjEg\nPSBlbS5maW5kKERvZzIuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cyYSkp\nOwogICAgICAgIGFzc2VydFRydWUoZG9nMjEuZ2V0SWQyKCkgPT0gMSB8fCBk\nb2cyMS5nZXRJZDIoKSA9PSAyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZG9n\nMjEuZ2V0TmFtZSgpLCAiaGVsbG9Eb2c0Iik7CiAgICAgICAgZG9nMjEuc2V0\nTmFtZSgiRG9nNCIpOwogICAgICAgIGRvZzIxLnNldERvbWVzdGljKHRydWUp\nOwoKICAgICAgICAvLyBnZXQgdGhlIHVwZGF0ZSBkb2cgbmFtZQoKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgUXVlcnkg\ncXJ5MSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZzEgZCBv\ncmRlciBieSBkLm5hbWUiKTsKICAgICAgICBMaXN0IHJlc3VsdDEgPSBxcnkx\nLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKGludCBpbmRleCA9IDA7\nIGluZGV4IDwgcmVzdWx0MS5zaXplKCk7IGluZGV4KyspIHsKICAgICAgICAg\nICAgRG9nMSBkb2c0ID0gKERvZzEpIHJlc3VsdDEuZ2V0KGluZGV4KTsKICAg\nICAgICAgICAgaW50IGkgPSBpbmRleCArIDE7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoZG9nNC5nZXRJZDIoKSA9PSAxIHx8IGRvZzQuZ2V0SWQyKCkgPT0g\nMik7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhkb2c0LmdldE5hbWUoKSwg\nIkRvZyIgKyBpKTsKICAgICAgICB9CgogICAgICAgIFF1ZXJ5IHFyeTIgPSBl\nbS5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2cyIGQgb3JkZXIgYnkg\nZC5uYW1lIik7CiAgICAgICAgTGlzdCByZXN1bHQyID0gcXJ5Mi5nZXRSZXN1\nbHRMaXN0KCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXgg\nPCByZXN1bHQyLnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBEb2cy\nIGRvZzUgPSAoRG9nMikgcmVzdWx0Mi5nZXQoaW5kZXgpOwogICAgICAgICAg\nICBhc3NlcnRUcnVlKGRvZzUuZ2V0SWQyKCkgPT0gMSB8fCBkb2c1LmdldElk\nMigpID09IDIpOwogICAgICAgICAgICBpbnQgaiA9IGluZGV4ICsgMzsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKGRvZzUuZ2V0TmFtZSgpLCAiRG9nIiAr\nIGopOwogICAgICAgIH0KCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RHZW5lcmF0ZWRUQUJMRSgpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBrZW0gPSBPcGVuSlBBUGVyc2lzdGVu\nY2UuY2FzdChlbSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwoKICAgICAgICBEb2dUYWJsZSBkb2cxID0gbmV3IERvZ1RhYmxlKCk7\nCiAgICAgICAgZG9nMS5zZXROYW1lKCJoZWxsb0RvZzEiKTsKICAgICAgICBk\nb2cxLnNldFByaWNlKDEyMDAwKTsKCiAgICAgICAgZW0ucGVyc2lzdChkb2cx\nKTsKICAgICAgICBEb2dUYWJsZSBkb2cxYSA9IG5ldyBEb2dUYWJsZSgpOwog\nICAgICAgIGRvZzFhLnNldE5hbWUoImhlbGxvRG9nMiIpOwogICAgICAgIGRv\nZzFhLnNldFByaWNlKDIyMDAwKTsKICAgICAgICBlbS5wZXJzaXN0KGRvZzFh\nKTsKICAgICAgICAvLyBhZGQgZG9nMgogICAgICAgIERvZ1RhYmxlMiBkb2cy\nID0gbmV3IERvZ1RhYmxlMigpOwogICAgICAgIGRvZzIuc2V0TmFtZSgiaGVs\nbG9Eb2czIik7CiAgICAgICAgZG9nMi5zZXRQcmljZSgxNTAwMCk7CiAgICAg\nICAgZW0ucGVyc2lzdChkb2cyKTsKCiAgICAgICAgRG9nVGFibGUyIGRvZzJh\nID0gbmV3IERvZ1RhYmxlMigpOwogICAgICAgIGRvZzJhLnNldE5hbWUoImhl\nbGxvRG9nNCIpOwogICAgICAgIGRvZzJhLnNldFByaWNlKDI1MDAwKTsKICAg\nICAgICBlbS5wZXJzaXN0KGRvZzJhKTsKCiAgICAgICAgLy8gYWRkIGRvZzMK\nICAgICAgICBEb2dUYWJsZTMgZG9nMyA9IG5ldyBEb2dUYWJsZTMoKTsKICAg\nICAgICBkb2czLnNldE5hbWUoImhlbGxvRG9nNSIpOwogICAgICAgIGRvZzMu\nc2V0UHJpY2UoMTUwMDEpOwogICAgICAgIGVtLnBlcnNpc3QoZG9nMyk7Cgog\nICAgICAgIERvZ1RhYmxlMyBkb2czYSA9IG5ldyBEb2dUYWJsZTMoKTsKICAg\nICAgICBkb2czYS5zZXROYW1lKCJoZWxsb0RvZzYiKTsKICAgICAgICBkb2cz\nYS5zZXRQcmljZSgyNTAwMSk7CiAgICAgICAgZW0ucGVyc2lzdChkb2czYSk7\nCgogICAgICAgIC8vIGFkZCBkb2c0CiAgICAgICAgRG9nVGFibGU0IGRvZzQg\nPSBuZXcgRG9nVGFibGU0KCk7CiAgICAgICAgZG9nNC5zZXROYW1lKCJoZWxs\nb0RvZzciKTsKICAgICAgICBkb2c0LnNldFByaWNlKDE1MDAyKTsKICAgICAg\nICBlbS5wZXJzaXN0KGRvZzQpOwoKICAgICAgICBEb2dUYWJsZTQgZG9nNGEg\nPSBuZXcgRG9nVGFibGU0KCk7CiAgICAgICAgZG9nNGEuc2V0TmFtZSgiaGVs\nbG9Eb2c4Iik7CiAgICAgICAgZG9nNGEuc2V0UHJpY2UoMjUwMDIpOwogICAg\nICAgIGVtLnBlcnNpc3QoZG9nNGEpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuY29tbWl0KCk7ICAgICAgICAKICAgICAgICAKICAgICAgICBEb2dU\nYWJsZSBkb2cxeCA9IGVtLmZpbmQoRG9nVGFibGUuY2xhc3MsIGtlbS5nZXRP\nYmplY3RJZChkb2cxKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShkb2cxeC5nZXRJ\nZDIoKSA9PSAyMCB8fCBkb2cxeC5nZXRJZDIoKSA9PSAyMSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKGRvZzF4LmdldE5hbWUoKSwgImhlbGxvRG9nMSIpOwog\nICAgICAgIGRvZzF4LnNldE5hbWUoIkRvZzEiKTsKICAgICAgICBkb2cxeC5z\nZXREb21lc3RpYyh0cnVlKTsKICAgICAgICBEb2dUYWJsZSBkb2cxMSA9IGVt\nLmZpbmQoRG9nVGFibGUuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cxYSkp\nOwogICAgICAgIGFzc2VydFRydWUoZG9nMTEuZ2V0SWQyKCkgPT0gMjAgfHwg\nZG9nMTEuZ2V0SWQyKCkgPT0gMjEpOwogICAgICAgIGFzc2VydEVxdWFscyhk\nb2cxMS5nZXROYW1lKCksICJoZWxsb0RvZzIiKTsKICAgICAgICBkb2cxMS5z\nZXROYW1lKCJEb2cyIik7CiAgICAgICAgZG9nMTEuc2V0RG9tZXN0aWModHJ1\nZSk7CiAgICAgICAgCiAgICAgICAgLy8gdXBkYXRlIGRvZzIKICAgICAgICBE\nb2dUYWJsZTIgZG9nMnggPSBlbS5maW5kKERvZ1RhYmxlMi5jbGFzcywga2Vt\nLmdldE9iamVjdElkKGRvZzIpKTsKICAgICAgICBhc3NlcnRUcnVlKGRvZzJ4\nLmdldElkMigpID09IDEwMCB8fCBkb2cyeC5nZXRJZDIoKSA9PSAxMDEpOwog\nICAgICAgIGFzc2VydEVxdWFscyhkb2cyeC5nZXROYW1lKCksICJoZWxsb0Rv\nZzMiKTsKICAgICAgICBkb2cyeC5zZXROYW1lKCJEb2czIik7CiAgICAgICAg\nZG9nMnguc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAgRG9nVGFibGUyIGRv\nZzIxID0gZW0uZmluZChEb2dUYWJsZTIuY2xhc3MsIGtlbS5nZXRPYmplY3RJ\nZChkb2cyYSkpOwogICAgICAgIGFzc2VydFRydWUoZG9nMjEuZ2V0SWQyKCkg\nPT0gMTAwIHx8IGRvZzIxLmdldElkMigpID09IDEwMSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKGRvZzIxLmdldE5hbWUoKSwgImhlbGxvRG9nNCIpOwogICAg\nICAgIGRvZzIxLnNldE5hbWUoIkRvZzQiKTsKICAgICAgICBkb2cyMS5zZXRE\nb21lc3RpYyh0cnVlKTsKCiAgICAgICAgLy8gdXBkYXRlIGRvZzMKICAgICAg\nICBEb2dUYWJsZTMgZG9nM3ggPSBlbS5maW5kKERvZ1RhYmxlMy5jbGFzcywg\na2VtLmdldE9iamVjdElkKGRvZzMpKTsKICAgICAgICBhc3NlcnRUcnVlKGRv\nZzN4LmdldElkMigpID09IDEwMCB8fCBkb2czeC5nZXRJZDIoKSA9PSAxMDEp\nOwogICAgICAgIGFzc2VydEVxdWFscyhkb2czeC5nZXROYW1lKCksICJoZWxs\nb0RvZzUiKTsKICAgICAgICBkb2czeC5zZXROYW1lKCJEb2c1Iik7CiAgICAg\nICAgZG9nM3guc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAgRG9nVGFibGUz\nIGRvZzMxID0gZW0uZmluZChEb2dUYWJsZTMuY2xhc3MsIGtlbS5nZXRPYmpl\nY3RJZChkb2czYSkpOwogICAgICAgIGFzc2VydFRydWUoZG9nMzEuZ2V0SWQy\nKCkgPT0gMTAwIHx8IGRvZzMxLmdldElkMigpID09IDEwMSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKGRvZzMxLmdldE5hbWUoKSwgImhlbGxvRG9nNiIpOwog\nICAgICAgIGRvZzMxLnNldE5hbWUoIkRvZzYiKTsKICAgICAgICBkb2czMS5z\nZXREb21lc3RpYyh0cnVlKTsKCiAgICAgICAgLy8gdXBkYXRlIGRvZzQKICAg\nICAgICBEb2dUYWJsZTQgZG9nNHggPSBlbS5maW5kKERvZ1RhYmxlNC5jbGFz\ncywga2VtLmdldE9iamVjdElkKGRvZzQpKTsKICAgICAgICBhc3NlcnRUcnVl\nKGRvZzR4LmdldElkMigpID09IDEwMCB8fCBkb2c0eC5nZXRJZDIoKSA9PSAx\nMDEpOwogICAgICAgIGFzc2VydEVxdWFscyhkb2c0eC5nZXROYW1lKCksICJo\nZWxsb0RvZzciKTsKICAgICAgICBkb2c0eC5zZXROYW1lKCJEb2c3Iik7CiAg\nICAgICAgZG9nNHguc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAgRG9nVGFi\nbGU0IGRvZzQxID0gZW0uZmluZChEb2dUYWJsZTQuY2xhc3MsIGtlbS5nZXRP\nYmplY3RJZChkb2c0YSkpOwogICAgICAgIGFzc2VydFRydWUoZG9nNDEuZ2V0\nSWQyKCkgPT0gMTAwIHx8IGRvZzQxLmdldElkMigpID09IDEwMSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKGRvZzQxLmdldE5hbWUoKSwgImhlbGxvRG9nOCIp\nOwogICAgICAgIGRvZzQxLnNldE5hbWUoIkRvZzgiKTsKICAgICAgICBkb2c0\nMS5zZXREb21lc3RpYyh0cnVlKTsKCiAgICAgICAgLy8gZ2V0IHRoZSB1cGRh\ndGUgZG9nIG5hbWUKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgIFF1ZXJ5IHFyeTEgPSBlbS5jcmVhdGVRdWVyeSgic2Vs\nZWN0IGQgZnJvbSBEb2dUYWJsZSBkIG9yZGVyIGJ5IGQubmFtZSIpOwogICAg\nICAgIExpc3QgcmVzdWx0MSA9IHFyeTEuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCByZXN1bHQxLnNpemUo\nKTsgaW5kZXgrKykgewogICAgICAgICAgICBEb2dUYWJsZSBkb2cxeHggPSAo\nRG9nVGFibGUpIHJlc3VsdDEuZ2V0KGluZGV4KTsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZShkb2cxeHguZ2V0SWQyKCkgPT0gMjAgfHwgZG9nMXh4LmdldElk\nMigpID09IDIxKTsKICAgICAgICAgICAgaW50IGogPSBpbmRleCArIDE7CiAg\nICAgICAgICAgIGFzc2VydEVxdWFscyhkb2cxeHguZ2V0TmFtZSgpLCAiRG9n\nIiArIGopOwoKICAgICAgICB9CgogICAgICAgIFF1ZXJ5IHFyeTIgPSBlbQog\nICAgICAgICAgICAgICAgLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERv\nZ1RhYmxlMiBkIG9yZGVyIGJ5IGQubmFtZSIpOwogICAgICAgIExpc3QgcmVz\ndWx0MiA9IHFyeTIuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBmb3IgKGlu\ndCBpbmRleCA9IDA7IGluZGV4IDwgcmVzdWx0Mi5zaXplKCk7IGluZGV4Kysp\nIHsKICAgICAgICAgICAgRG9nVGFibGUyIGRvZzJ4eCA9IChEb2dUYWJsZTIp\nIHJlc3VsdDIuZ2V0KGluZGV4KTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShk\nb2cyeHguZ2V0SWQyKCkgPT0gMTAwIHx8IGRvZzJ4eC5nZXRJZDIoKSA9PSAx\nMDEpOwogICAgICAgICAgICBpbnQgaiA9IGluZGV4ICsgMzsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKGRvZzJ4eC5nZXROYW1lKCksICJEb2ciICsgaik7\nCiAgICAgICAgfQoKICAgICAgICBRdWVyeSBxcnkzID0gZW0KICAgICAgICAg\nICAgICAgIC5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2dUYWJsZTMg\nZCBvcmRlciBieSBkLm5hbWUiKTsKICAgICAgICBMaXN0IHJlc3VsdDMgPSBx\ncnkzLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgZm9yIChpbnQgaW5kZXgg\nPSAwOyBpbmRleCA8IHJlc3VsdDMuc2l6ZSgpOyBpbmRleCsrKSB7CiAgICAg\nICAgICAgIERvZ1RhYmxlMyBkb2czeHggPSAoRG9nVGFibGUzKSByZXN1bHQz\nLmdldChpbmRleCk7CiAgICAgICAgICAgIGFzc2VydFRydWUoZG9nM3h4Lmdl\ndElkMigpID09IDEwMCB8fCBkb2czeHguZ2V0SWQyKCkgPT0gMTAxKTsKICAg\nICAgICAgICAgaW50IGogPSBpbmRleCArIDU7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhkb2czeHguZ2V0TmFtZSgpLCAiRG9nIiArIGopOwogICAgICAg\nIH0KCiAgICAgICAgUXVlcnkgcXJ5NCA9IGVtCiAgICAgICAgICAgICAgICAu\nY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRG9nVGFibGU0IGQgb3JkZXIg\nYnkgZC5uYW1lIik7CiAgICAgICAgTGlzdCByZXN1bHQ0ID0gcXJ5NC5nZXRS\nZXN1bHRMaXN0KCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5k\nZXggPCByZXN1bHQ0LnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBE\nb2dUYWJsZTQgZG9nNHh4ID0gKERvZ1RhYmxlNCkgcmVzdWx0NC5nZXQoaW5k\nZXgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGRvZzR4eC5nZXRJZDIoKSA9\nPSAxMDAgfHwgZG9nNHh4LmdldElkMigpID09IDEwMSk7CiAgICAgICAgICAg\nIGludCBqID0gaW5kZXggKyA3OwogICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nZG9nNHh4LmdldE5hbWUoKSwgIkRvZyIgKyBqKTsKICAgICAgICB9CgogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KfSAvLyBlbmQgb2YgVGVzdE11bHRpcGxlU2NoZW1h\nTmFtZXMK\n","encoding":"base64"}

