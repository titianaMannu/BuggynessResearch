{"sha":"f18a1085b56696a1fccd4f1380a64acffe537362","node_id":"MDQ6QmxvYjIwNjM2NDpmMThhMTA4NWI1NjY5NmExZmNjZDRmMTM4MGE2NGFjZmZlNTM3MzYy","size":4232,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f18a1085b56696a1fccd4f1380a64acffe537362","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uuc2ltcGxl\nOwoKaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5SW5wdXRTdHJlYW07CmltcG9y\ndCBqYXZhLmlvLkJ5dGVBcnJheU91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEu\naW8uT2JqZWN0SW5wdXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLk9iamVjdE91\ndHB1dFN0cmVhbTsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9y\ndCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKCmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TUUxMaXN0ZW5lclRl\nc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3RGbHVzaEJlZm9yZURldGFjaCBl\neHRlbmRzIFNRTExpc3RlbmVyVGVzdENhc2UgewoKICAgIHByaXZhdGUgaW50\nIF9pZDsKICAgIAogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgIHNl\ndFVwKEl0ZW0uY2xhc3MsIm9wZW5qcGEuQ29tcGF0aWJpbGl0eSIsIAogICAg\nICAgICAgICAgICAgImRlZmF1bHQoZmx1c2hCZWZvcmVEZXRhY2g9ZmFsc2Up\nIik7CiAgICAgICAgcGVyc2lzdFNhbXBsZUVudGl0eSgpOwogICAgfQogICAg\nCiAgICBwcml2YXRlIHZvaWQgcGVyc2lzdFNhbXBsZUVudGl0eSgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgSXRlbSBpID0gbmV3IEl0ZW0oKTsKICAgICAgICBlbS5wZXJzaXN0\nKGkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAg\nICAgICAgZW0ucmVmcmVzaChpKTsKICAgICAgICBfaWQgPSBpLmdldEl0ZW1J\nZCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdENsZWFyKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgSXRlbSBpID0gZW0uZmluZChJ\ndGVtLmNsYXNzLCBfaWQpOwoKICAgICAgICBpLnNldEl0ZW1EYXRhKCJBQkNE\nIik7CgogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5yb2xsYmFjaygpOwogICAgICAgIGFzc2VydE5vdFNRTCgiVVBE\nQVRFIElURU0uKiIpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgCiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdERldGFjaCgpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAg\nIEl0ZW0gaSA9IGVtLmZpbmQoSXRlbS5jbGFzcywgX2lkKTsKICAgICAgICAK\nICAgICAgICBpLnNldEl0ZW1EYXRhKCJFRkdIIik7CiAgICAgICAgCiAgICAg\nICAgT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0pLmRldGFjaChpKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAg\nYXNzZXJ0Tm90U1FMKCJVUERBVEUgSVRFTSBTRVQuKiIpOwogICAgICAgIGVt\nLmNsb3NlKCk7CgogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGV0\nYWNoQWxsKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKCiAgICAgICAgSXRlbSBpID0gZW0uZmluZChJdGVtLmNs\nYXNzLCBfaWQpOwoKICAgICAgICBpLnNldEl0ZW1EYXRhKCJJSktMIik7Cgog\nICAgICAgIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtKS5kZXRhY2hBbGwo\naSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwog\nICAgICAgIGFzc2VydE5vdFNRTCgiVVBEQVRFIElURU0gU0VULioiKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RGV0YWNoQWxsQ29sbGVjdGlvbigpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIEl0ZW0gaSA9\nIGVtLmZpbmQoSXRlbS5jbGFzcywgX2lkKTsKCiAgICAgICAgaS5zZXRJdGVt\nRGF0YSgiTU5PUCIpOwoKICAgICAgICBDb2xsZWN0aW9uPEl0ZW0+IGMgPSBu\nZXcgQXJyYXlMaXN0PEl0ZW0+KCk7CiAgICAgICAgYy5hZGQoaSk7CiAgICAg\nICAgT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0pLmRldGFjaEFsbChjKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAg\nICAgYXNzZXJ0Tm90U1FMKCJVUERBVEUgSVRFTSBTRVQuKiIpOwogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFNlcmlh\nbGl6ZSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgSXRlbSBpID0g\nZW0uZmluZChJdGVtLmNsYXNzLCBfaWQpOwoKICAgICAgICBpLnNldEl0ZW1E\nYXRhKCJRUlNUVSIpOwoKICAgICAgICBzZXJpYWxpemVPYmplY3QoaSk7Cgog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAg\nICBhc3NlcnROb3RTUUwoIlVQREFURSBJVEVNIFNFVC4qIik7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEhlbHBlciB0byBz\nZXJpYWxpemUgYW4gb2JqZWN0IHRvIGEgYnl0ZVtdCiAgICAgKi8KICAgIHBy\naXZhdGUgT2JqZWN0IHNlcmlhbGl6ZU9iamVjdChPYmplY3Qgb3JpZykgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgT2JqZWN0IGRlc2VyaWFsaXplZCA9\nIG51bGw7CgogICAgICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBiYW9zID0g\nbmV3IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwogICAgICAgIE9iamVjdE91\ndHB1dFN0cmVhbSBvb3MgPSBuZXcgT2JqZWN0T3V0cHV0U3RyZWFtKGJhb3Mp\nOwogICAgICAgIG9vcy53cml0ZU9iamVjdChvcmlnKTsKCiAgICAgICAgQnl0\nZUFycmF5SW5wdXRTdHJlYW0gYmFpcyA9CiAgICAgICAgICAgICAgICBuZXcg\nQnl0ZUFycmF5SW5wdXRTdHJlYW0oYmFvcy50b0J5dGVBcnJheSgpKTsKICAg\nICAgICBPYmplY3RJbnB1dFN0cmVhbSBvaXMgPSBuZXcgT2JqZWN0SW5wdXRT\ndHJlYW0oYmFpcyk7CgogICAgICAgIGRlc2VyaWFsaXplZCA9IG9pcy5yZWFk\nT2JqZWN0KCk7CiAgICAgICAgcmV0dXJuIGRlc2VyaWFsaXplZDsKICAgIH0K\nfQo=\n","encoding":"base64"}

