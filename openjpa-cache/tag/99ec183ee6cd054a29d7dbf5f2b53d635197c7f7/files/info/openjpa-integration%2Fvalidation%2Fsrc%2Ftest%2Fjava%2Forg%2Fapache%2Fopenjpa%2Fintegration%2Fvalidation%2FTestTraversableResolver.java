{"sha":"83134903c5e5ae40f525cc7b705c22c499a56eb9","node_id":"MDQ6QmxvYjIwNjM2NDo4MzEzNDkwM2M1ZTVhZTQwZjUyNWNjN2I3MDVjMjJjNDk5YTU2ZWI5","size":10412,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/83134903c5e5ae40f525cc7b705c22c499a56eb9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5pbnRlZ3JhdGlvbi52YWxpZGF0aW9u\nOwoKaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkVsZW1lbnRUeXBlOwpp\nbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS5z\nZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS51dGlsLkhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IGphdmF4LnZh\nbGlkYXRpb24uQ29uc3RyYWludFZpb2xhdGlvbkV4Y2VwdGlvbjsKaW1wb3J0\nIGphdmF4LnZhbGlkYXRpb24uUGF0aDsKaW1wb3J0IGphdmF4LnZhbGlkYXRp\nb24uVHJhdmVyc2FibGVSZXNvbHZlcjsKCmltcG9ydCBqdW5pdC5mcmFtZXdv\ncmsuVGVzdENhc2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxv\nZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuSjJE\nb1ByaXZIZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS52YWxpZGF0aW9uLlRyYXZlcnNhYmxlUmVzb2x2ZXJJ\nbXBsOwovLyBUaGUgZm9sbG93aW5nIDIgYXJlIGR5bmFtaWNhbGx5IGxvYWRl\nZCBieSBsb2FkUGF0aEltcGwoKSBmcm9tIHNldFVwKCkKLy8gaW1wb3J0IG9y\nZy5oaWJlcm5hdGUudmFsaWRhdG9yLmVuZ2luZS5QYXRoSW1wbDsKLy8gaW1w\nb3J0IGNvbS5hZ2ltYXRlYy52YWxpZGF0aW9uLmpzcjMwMy51dGlsLlBhdGhJ\nbXBsOwoKLyoqCiAqIFRlc3QgdGhlIFRyYXZlcnNhYmxlUmVzb2x2ZXIgbWV0\naG9kcwogKiAKICogRmlyc3QgcnVuIHNldmVyYWwgdGVzdGNhc2VzIGZyb20g\nYSB1c2VyIHBlcnNwZWN0aXZlLiBUaGVzZSB0ZXN0IHRoZSBtZXRob2RzCiAq\nIGluZGlyZWN0bHk6CiAqICAgIDEpIHRlc3RMb2FkZWRUaXRsZSgpCiAqICAg\nIDJ9IHRlc3RVbmxvYWRlZCgpCiAqICAgIDMpIHRlc3RDYXNjYWRpbmcoKQog\nKiAKICogVGhlbiB0ZXN0IHRoZSBtZXRob2RzIGRpcmVjdGx5OgogKiAgICAx\nKSB0ZXN0UGFnZXMoKQogKiAgICAyKSB0ZXN0VGl0bGUKICovCnB1YmxpYyBj\nbGFzcyBUZXN0VHJhdmVyc2FibGVSZXNvbHZlciBleHRlbmRzIFRlc3RDYXNl\nIHsKICAgIHByaXZhdGUgc3RhdGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFj\ndG9yeVNQSSBlbWYgPSBudWxsOwogICAgcHJpdmF0ZSBMb2cgbG9nID0gbnVs\nbDsKICAgIHByaXZhdGUgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBudWxs\nOwogICAgcHJpdmF0ZSBCb29rIGJvb2s7CgogICAgLyoqCiAgICAgKiBDcmVh\ndGUgYSBib29rIHdpdGggYSB0aXRsZSB0aGF0IGlzIHRvbyBsb25nLCBhbmQg\ndGhlIGVtYmVkZGVkCiAgICAgKiBwdWJsaXNoZXIgaGFzIGEgbmFtZSB0aGF0\nIGlzIGFsc28gdG9vIGxvbmcuIEhvd2V2ZXIsIHVzZSBhCiAgICAgKiBwZXJz\naXN0ZW5jZSB1bml0IHdpdGggdmFsaWRhdGlvbi1tb2RlIHNldCB0byBOT05F\nLiBUaGVyZWZvcmUsCiAgICAgKiB0aGUgY3JlYXRlIHNob3VsZCBiZSBzdWNj\nZXNzZnVsLiBUaGlzIGlzIHRvIHNldHVwIGEgc2l0dWF0aW9uCiAgICAgKiB3\naGVyZSBmaWVsZHMgdG8gYmUgcG90ZW50aWFsbHkgdmFsaWRhdGVkIGFyZSBu\nb3QgbmVjZXNzYXJpbHkgbG9hZGVkLgogICAgICovCiAgICBAT3ZlcnJpZGUK\nICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIGNyZWF0ZUJvb2so\nMSwgImxvbmcgdGl0bGUiLCAyMzQpOwogICAgfQogICAgCiAgICBwcml2YXRl\nIHZvaWQgY3JlYXRlRU1GKFN0cmluZyBwdSwgU3RyaW5nIHNjaGVtYUFjdGlv\nbikgewogICAgICAgIE1hcDxTdHJpbmcsIE9iamVjdD4gbWFwID0gbmV3IEhh\nc2hNYXA8U3RyaW5nLCBPYmplY3Q+KCk7CiAgICAgICAgbWFwLnB1dCgib3Bl\nbmpwYS5qZGJjLlN5bmNocm9uaXplTWFwcGluZ3MiLCAiYnVpbGRTY2hlbWEo\nRm9yZWlnbktleXM9dHJ1ZSwiCiAgICAgICAgICAgICsgc2NoZW1hQWN0aW9u\nKTsKICAgICAgICBlbWYgPSAoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5\nU1BJKU9wZW5KUEFQZXJzaXN0ZW5jZS5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFj\ndG9yeSgKICAgICAgICAgICAgcHUsCiAgICAgICAgICAgICJvcmcvYXBhY2hl\nL29wZW5qcGEvaW50ZWdyYXRpb24vdmFsaWRhdGlvbi9wZXJzaXN0ZW5jZS54\nbWwiLAogICAgICAgICAgICBtYXApOwogICAgICAgIGFzc2VydE5vdE51bGwo\nZW1mKTsKICAgICAgICBsb2cgPSBlbWYuZ2V0Q29uZmlndXJhdGlvbigpLmdl\ndExvZygiVGVzdHMiKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgY2xvc2VF\nTUYoKSB7CiAgICAgICAgbG9nID0gbnVsbDsKICAgICAgICBpZiAoZW0gIT0g\nbnVsbCkgewogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICBl\nbSA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChlbWYgIT0gbnVsbCkg\newogICAgICAgICAgICBlbWYuY2xvc2UoKTsKICAgICAgICAgICAgZW1mID0g\nbnVsbDsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQnkg\nZGVmYXVsdCwgdGhlIHRpdGxlIGlzIG5vdCBsb2FkZWQuIE1ha2Ugc3VyZSBp\ndCBnZXRzIGxvYWRlZCwKICAgICAqIG1ha2UgYSBjaGFuZ2UgaW4gYSBkaWZm\nZXJlbnQgZmllbGQsIGFuZCBjb21taXQuIFRoZSBpc0xvYWRlZCgpIG1ldGhv\nZAogICAgICogb2YgdGhlIFRyYXZlcnNhYmxlUmVzb2x2ZXIgc2hvdWxkIHJl\ndHVybiB0cnVlLCByZXN1bHRpbmcgaW4gYSB2YWxpZGF0aW9uCiAgICAgKiBi\nZWluZyBwZXJmb3JtZWQgYW5kIGEgQ29uc3RyYWludFZpb2xhdGlvbkV4Y2Vw\ndGlvbiBzaG91bGQgYmUgcmV0dXJuZWQKICAgICAqIGJlY2F1c2UgdGhlIHRp\ndGxlIGlzIHRvbyBsb25nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nTG9hZGVkVGl0bGUoKSB7CiAgICAgICAgY3JlYXRlRU1GKCJ2YWxpZGF0aW9u\nLXB1IiwgIlNjaGVtYUFjdGlvbj0nYWRkJykiKTsKICAgICAgICBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGJvb2sgPSBlbS5maW5kKG9yZy5h\ncGFjaGUub3BlbmpwYS5pbnRlZ3JhdGlvbi52YWxpZGF0aW9uLkJvb2suY2xh\nc3MsIDEpOwogICAgICAgIGFzc2VydE5vdE51bGwoYm9vayk7CiAgICAgICAg\nYm9vay5zZXRQYWdlcygxMjQpOwogICAgICAgIC8vIGxvYWQgdGhlIHRpdGxl\nCiAgICAgICAgU3RyaW5nIHRpdGxlID0gYm9vay5nZXRUaXRsZSgpOwogICAg\nICAgIGFzc2VydEVxdWFscygibG9uZyB0aXRsZSIsIHRpdGxlKTsKICAgICAg\nICBib29sZWFuIGV4Y2VwdGlvbkNhdWdodCA9IGZhbHNlOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgfSBjYXRjaCAoQ29uc3RyYWludFZpb2xhdGlvbkV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIGV4Y2VwdGlvbkNhdWdodCA9IHRydWU7CiAg\nICAgICAgfQogICAgICAgIGFzc2VydFRydWUoZXhjZXB0aW9uQ2F1Z2h0KTsK\nICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBCeSBkZWZhdWx0LCB0aGUgdGl0\nbGUgYW5kIHB1Ymxpc2hlciBhcmUgbm90IGxvYWRlZC4gTWFrZSBhIGNoYW5n\nZSBpbiBhIGRpZmZlcmVudCBmaWVsZAogICAgICogYW5kIGNvbW1pdC4gVGhl\nIGlzTG9hZGVkKCkgbWV0aG9kIG9mIHRoZSBUcmF2ZXJzYWJsZVJlc29sdmVy\nIHNob3VsZCByZXR1cm4KICAgICAqIGZhbHNlIGZvciBib3RoIG9mIHRoZXNl\nLiBUaGVyZWZvcmUgYSB2YWxpZGF0aW9uIHNob3VsZCBub3QgYmUgcGVyZm9y\nbWVkLiAKICAgICAqIFRoZSBjb21taXQgc2hvdWxkIHN1Y2NlZWQgd2l0aCBu\nbyBleGNlcHRpb24uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RVbmxv\nYWRlZCgpIHsKICAgICAgICBjcmVhdGVFTUYoIm5vbi12YWxpZGF0aW9uLXB1\nIiwgIlNjaGVtYUFjdGlvbj0nYWRkJykiKTsKICAgICAgICBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIGJvb2sgPSBlbS5maW5kKG9yZy5hcGFj\naGUub3BlbmpwYS5pbnRlZ3JhdGlvbi52YWxpZGF0aW9uLkJvb2suY2xhc3Ms\nIDEpOwogICAgICAgIGFzc2VydE5vdE51bGwoYm9vayk7CiAgICAgICAgYm9v\nay5zZXRQYWdlcygxMjQpOwogICAgICAgIGJvb2xlYW4gZXhjZXB0aW9uQ2F1\nZ2h0ID0gZmFsc2U7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICB9IGNhdGNoIChDb25z\ndHJhaW50VmlvbGF0aW9uRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZXhj\nZXB0aW9uQ2F1Z2h0ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0\nRmFsc2UoZXhjZXB0aW9uQ2F1Z2h0KTsKICAgICAgICBjbG9zZUVNRigpOwog\nICAgfQogICAgCiAgICAvKioKICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBwdWJs\naXNoZXIgaXMgbm90IGxvYWRlZC4gTWFrZSBzdXJlIGl0IGdldHMgbG9hZGVk\nLgogICAgICogVGhlIGlzTG9hZGVkKCkgYW5kIGlzQ2FzY2FkYWJsZSgpIG1l\ndGhvZHMgc2hvdWxkIGJvdGggcmV0dXJuIHRydWUsCiAgICAgKiByZXN1bHRp\nbmcgaW4gYSB2YWxpZGF0aW9uIGJlaW5nIHBlcmZvcm1lZC4gQSBDb25zdHJh\naW50VmlvbGF0aW9uCiAgICAgKiBzaG91bGQgYmUgdGhyb3duIHNpbmNlIHRo\nZSBwdWJsaXNoZXIgbmFtZSBpcyB0b28gbG9uZy4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgdGVzdENhc2NhZGluZygpIHsKICAgICAgICBjcmVhdGVFTUYo\nInZhbGlkYXRpb24tcHUiLCAiU2NoZW1hQWN0aW9uPSdhZGQnKSIpOwogICAg\nICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgYm9vayA9IGVt\nLmZpbmQob3JnLmFwYWNoZS5vcGVuanBhLmludGVncmF0aW9uLnZhbGlkYXRp\nb24uQm9vay5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChib29r\nKTsKICAgICAgICBib29rLnNldFBhZ2VzKDEyNCk7CiAgICAgICAgLy8gbG9h\nZCB0aGUgZW1iZWRkZWQgcHVibGlzaGVyCiAgICAgICAgUHVibGlzaGVyIHB1\nYmxpc2hlciA9IGJvb2suZ2V0UHVibGlzaGVyKCk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChwdWJsaXNoZXIpOwogICAgICAgIHB1Ymxpc2hlci5zZXRQdWJs\naXNoZXJJRCgieXl5Iik7CiAgICAgICAgYm9vbGVhbiBleGNlcHRpb25DYXVn\naHQgPSBmYWxzZTsKICAgICAgICB0cnkgewogICAgICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIGV4Y2VwdGlvbkNhdWdodCA9IHRydWU7\nCiAgICAgICAgfQogICAgICAgIGFzc2VydFRydWUoZXhjZXB0aW9uQ2F1Z2h0\nKTsKICAgICAgICBjbG9zZUVNRigpOwogICAgfQogICAgCiAgICAvKioKICAg\nICAqIFRlc3QgdGhlIGlzUmVhY2hhYmxlKCkgYW5kIGlzQ2FzY2FkYWJsZSgp\nIG1ldGhvZHMgb24gdGhlIHBhZ2VzIGVsZW1lbnQgb2YgQm9vaywKICAgICAq\nIHdoaWNoIGlzIGVhZ2VybHkgZmV0Y2hlZCBieSBkZWZhdWx0LiAKICAgICAq\nLwogICAgcHVibGljIHZvaWQgdGVzdFBhZ2VzKCkgewogICAgICAgIGNyZWF0\nZUVNRigidmFsaWRhdGlvbi1wdSIsICJTY2hlbWFBY3Rpb249J2FkZCcpIik7\nCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBib29r\nID0gZW0uZmluZChvcmcuYXBhY2hlLm9wZW5qcGEuaW50ZWdyYXRpb24udmFs\naWRhdGlvbi5Cb29rLmNsYXNzLCAxKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKGJvb2spOwogICAgICAgIC8vIFBhdGhJbXBsIHBhdGggPSBQYXRoSW1wbC5j\ncmVhdGVQYXRoRnJvbVN0cmluZygib3JnLmFwYWNoZS5vcGVuanBhLmludGVn\ncmF0aW9uLnZhbGlkYXRpb24uQm9vay5wYWdlcyIpOwogICAgICAgIC8vIFBh\ndGguTm9kZSBub2RlID0gcGF0aC5nZXRMZWFmTm9kZSgpOwogICAgICAgIFBh\ndGguTm9kZSBub2RlID0gZ2V0TGVhZk5vZGVGcm9tU3RyaW5nKCJvcmcuYXBh\nY2hlLm9wZW5qcGEuaW50ZWdyYXRpb24udmFsaWRhdGlvbi5Cb29rLnBhZ2Vz\nIik7CiAgICAgICAgVHJhdmVyc2FibGVSZXNvbHZlciB0ciA9IG5ldyBUcmF2\nZXJzYWJsZVJlc29sdmVySW1wbCgpOwogICAgICAgIGFzc2VydFRydWUodHIu\naXNSZWFjaGFibGUoYm9vaywgbm9kZSwgQm9vay5jbGFzcywgbnVsbCwgRWxl\nbWVudFR5cGUuTUVUSE9EKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZSh0ci5pc0Nh\nc2NhZGFibGUoYm9vaywgbm9kZSwgQm9vay5jbGFzcywgbnVsbCwgRWxlbWVu\ndFR5cGUuTUVUSE9EKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICBjbG9zZUVNRigpOwogICAgfQogICAgCiAgICAv\nKioKICAgICAqIFRlc3QgdGhlIGlzUmVhY2hhYmxlKCkgbWV0aG9kIG9uIHRo\nZSB0aXRsZS4KICAgICAqIEl0IGlzIGNvbmZpZ3VyZWQgd2l0aCBmZXRjaD1G\nZXR2aFR5cGUuTEFaWS4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdFRp\ndGxlKCkgewogICAgICAgIGNyZWF0ZUVNRigidmFsaWRhdGlvbi1wdSIsICJT\nY2hlbWFBY3Rpb249J2FkZCcpIik7CiAgICAgICAgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBib29rID0gZW0uZmluZChvcmcuYXBhY2hlLm9w\nZW5qcGEuaW50ZWdyYXRpb24udmFsaWRhdGlvbi5Cb29rLmNsYXNzLCAxKTsK\nICAgICAgICBhc3NlcnROb3ROdWxsKGJvb2spOwogICAgICAgIC8vIFBhdGhJ\nbXBsIHBhdGggPSBQYXRoSW1wbC5jcmVhdGVQYXRoRnJvbVN0cmluZygib3Jn\nLmFwYWNoZS5vcGVuanBhLmludGVncmF0aW9uLnZhbGlkYXRpb24uQm9vay50\naXRsZSIpOwogICAgICAgIC8vIFBhdGguTm9kZSBub2RlID0gcGF0aC5nZXRM\nZWFmTm9kZSgpOwogICAgICAgIFBhdGguTm9kZSBub2RlID0gZ2V0TGVhZk5v\nZGVGcm9tU3RyaW5nKCJvcmcuYXBhY2hlLm9wZW5qcGEuaW50ZWdyYXRpb24u\ndmFsaWRhdGlvbi5Cb29rLnRpdGxlIik7CiAgICAgICAgVHJhdmVyc2FibGVS\nZXNvbHZlciB0ciA9IG5ldyBUcmF2ZXJzYWJsZVJlc29sdmVySW1wbCgpOwog\nICAgICAgIGFzc2VydEZhbHNlKHRyLmlzUmVhY2hhYmxlKGJvb2ssIG5vZGUs\nIEJvb2suY2xhc3MsIG51bGwsIEVsZW1lbnRUeXBlLkZJRUxEKSk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBjbG9z\nZUVNRigpOwogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgY3JlYXRlQm9v\nayhpbnQgaWQsIFN0cmluZyB0aXRsZSwgaW50IHBhZ2VzKSB7CiAgICAgICAg\nY3JlYXRlRU1GKCJub24tdmFsaWRhdGlvbi1wdSIsICJTY2hlbWFBY3Rpb249\nJ2Ryb3AsYWRkJykiKTsKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgYm9vayA9IG5ldyBCb29rKGlkKTsKICAgICAg\nICBib29rLnNldFRpdGxlKHRpdGxlKTsKICAgICAgICBib29rLnNldFBhZ2Vz\nKHBhZ2VzKTsKICAgICAgICBQdWJsaXNoZXIgcHVibGlzaGVyID0gbmV3IFB1\nYmxpc2hlcigpOwogICAgICAgIHB1Ymxpc2hlci5zZXROYW1lKCJsb25nIG5h\nbWUiKTsKICAgICAgICBwdWJsaXNoZXIuc2V0UHVibGlzaGVySUQoInh4eCIp\nOwogICAgICAgIGJvb2suc2V0UHVibGlzaGVyKHB1Ymxpc2hlcik7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBl\ncnNpc3QoYm9vayk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBjbG9zZUVNRigpOwogICAgfQoKICAgIHByaXZhdGUg\nUGF0aC5Ob2RlIGdldExlYWZOb2RlRnJvbVN0cmluZyhTdHJpbmcgcykgewog\nICAgICAgIENsYXNzPD8+IFBhdGhJbXBsID0gbnVsbDsKICAgICAgICBQYXRo\nLk5vZGUgbm9kZSA9IG51bGw7CgogICAgICAgIC8vIGR5bmFtaWNhbGx5IGxv\nYWQgUGF0aEltcGwgZGVwZW5kaW5nIG9uIHRoZSBCZWFuIFZhbGlkYXRpb24g\ncHJvdmlkZXIKICAgICAgICB0cnkgewogICAgICAgICAgICBQYXRoSW1wbCA9\nIENsYXNzLmZvck5hbWUoIm9yZy5oaWJlcm5hdGUudmFsaWRhdG9yLmVuZ2lu\nZS5QYXRoSW1wbCIsCiAgICAgICAgICAgICAgICB0cnVlLCBBY2Nlc3NDb250\ncm9sbGVyLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlci5nZXRDb250ZXh0\nQ2xhc3NMb2FkZXJBY3Rpb24oKSkpOwogICAgICAgIH0gY2F0Y2ggKENsYXNz\nTm90Rm91bmRFeGNlcHRpb24gZSkgewogICAgICAgICAgICBsb2cudHJhY2Uo\nImdldExlYWZOb2RlRnJvbVBhdGg6IERpZCBub3QgZmluZCBvcmcuaGliZXJu\nYXRlLnZhbGlkYXRvci5lbmdpbmUuUGF0aEltcGwiKTsKICAgICAgICB9CiAg\nICAgICAgaWYgKFBhdGhJbXBsID09IG51bGwpIHsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIFBhdGhJbXBsID0gQ2xhc3MuZm9yTmFtZSgi\nY29tLmFnaW1hdGVjLnZhbGlkYXRpb24uanNyMzAzLnV0aWwuUGF0aEltcGwi\nLAogICAgICAgICAgICAgICAgICAgIHRydWUsIEFjY2Vzc0NvbnRyb2xsZXIu\nZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyLmdldENvbnRleHRDbGFzc0xv\nYWRlckFjdGlvbigpKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKENsYXNzTm90\nRm91bmRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgbG9nLnRyYWNl\nKCJnZXRMZWFmTm9kZUZyb21QYXRoOiBEaWQgbm90IGZpbmQgY29tLmFnaW1h\ndGVjLnZhbGlkYXRpb24uanNyMzAzLnV0aWwuUGF0aEltcGwiKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0KICAgICAgICBhc3NlcnROb3ROdWxsKFBhdGhJ\nbXBsKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBNZXRob2QgY3JlYXRl\nUGF0aEZyb21TdHJpbmcgPSBQYXRoSW1wbC5nZXRNZXRob2QoImNyZWF0ZVBh\ndGhGcm9tU3RyaW5nIiwgU3RyaW5nLmNsYXNzKTsKICAgICAgICAgICAgYXNz\nZXJ0Tm90TnVsbChjcmVhdGVQYXRoRnJvbVN0cmluZyk7CiAgICAgICAgICAg\nIE1ldGhvZCBnZXRMZWFmTm9kZSA9IFBhdGhJbXBsLmdldE1ldGhvZCgiZ2V0\nTGVhZk5vZGUiKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbChnZXRMZWFm\nTm9kZSk7CiAgICAgICAgICAgIE9iamVjdCBwYXRoID0gY3JlYXRlUGF0aEZy\nb21TdHJpbmcuaW52b2tlKG51bGwsIHMpOwogICAgICAgICAgICBub2RlID0g\nKFBhdGguTm9kZSkgZ2V0TGVhZk5vZGUuaW52b2tlKHBhdGgsIG51bGwpOwog\nICAgICAgIH0gY2F0Y2ggKE5vU3VjaE1ldGhvZEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgfSBjYXRjaCAoSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbiBhZSkgewog\nICAgICAgIH0gY2F0Y2ggKGphdmEubGFuZy5yZWZsZWN0Lkludm9jYXRpb25U\nYXJnZXRFeGNlcHRpb24gdGUpIHsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIG5vZGU7CiAgICB9Cgp9Cgo=\n","encoding":"base64"}

