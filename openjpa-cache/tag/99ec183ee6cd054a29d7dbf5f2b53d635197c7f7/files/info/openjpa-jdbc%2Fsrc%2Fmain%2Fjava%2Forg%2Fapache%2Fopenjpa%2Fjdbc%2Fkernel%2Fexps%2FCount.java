{"sha":"023d2dc91ab409db4c4502dcbffb1982fb1d5dbd","node_id":"MDQ6QmxvYjIwNjM2NDowMjNkMmRjOTFhYjQwOWRiNGM0NTAyZGNiZmZiMTk4MmZiMWQ1ZGJk","size":3105,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/023d2dc91ab409db4c4502dcbffb1982fb1d5dbd","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7\nCgovKioKICogQ291bnQgbm9uLW51bGwgdmFsdWVzLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKi8KY2xhc3MgQ291bnQKICAgIGV4dGVuZHMgVW5hcnlP\ncCB7CgogICAgcHJpdmF0ZSBib29sZWFuIGlzQ291bnRNdWx0aUNvbHVtbnMg\nPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBpc0NvdW50RGlzdGluY3Qg\nPSBmYWxzZTsKICAgIAogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gUHJv\ndmlkZSB0aGUgdmFsdWUgdG8gb3BlcmF0ZSBvbi4KICAgICAqLwogICAgcHVi\nbGljIENvdW50KFZhbCB2YWwpIHsKICAgICAgICBzdXBlcih2YWwpOwogICAg\nICAgIGlmICh2YWwgaW5zdGFuY2VvZiBEaXN0aW5jdCkKICAgICAgICAgICAg\naXNDb3VudERpc3RpbmN0ID0gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgRXhw\nU3RhdGUgaW5pdGlhbGl6ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\naW50IGZsYWdzKSB7CiAgICAgICAgLy8gam9pbiBpbnRvIHJlbGF0ZWQgb2Jq\nZWN0IGlmIHByZXNlbnQKICAgICAgICBFeHBTdGF0ZSBleHBTdGF0ZSA9IGlu\naXRpYWxpemVWYWx1ZShzZWwsIGN0eCwgSk9JTl9SRUwpOwogICAgICAgIFZh\nbCB2YWwgPSBpc0NvdW50RGlzdGluY3QgPyAoKERpc3RpbmN0KWdldFZhbHVl\nKCkpLmdldFZhbHVlKCkgOiBnZXRWYWx1ZSgpOwogICAgICAgIGlmICh2YWwg\naW5zdGFuY2VvZiBQQ1BhdGgpIHsKICAgICAgICAgICAgQ29sdW1uW10gY29s\ncyA9ICgoUENQYXRoKXZhbCkuZ2V0Q29sdW1ucyhleHBTdGF0ZSk7CiAgICAg\nICAgICAgIGlmIChjb2xzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAg\nIGlzQ291bnRNdWx0aUNvbHVtbnMgPSB0cnVlOwogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgICAgICAgICAKICAgICAgICByZXR1cm4gZXhwU3RhdGU7\nCiAgICB9CgogICAgcHJvdGVjdGVkIENsYXNzIGdldFR5cGUoQ2xhc3MgYykg\newogICAgICAgIHJldHVybiBsb25nLmNsYXNzOwogICAgfQoKICAgIHByb3Rl\nY3RlZCBTdHJpbmcgZ2V0T3BlcmF0b3IoKSB7CiAgICAgICAgcmV0dXJuICJD\nT1VOVCI7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNBZ2dyZWdhdGUo\nKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gaXNDb3VudERpc3RpbmN0TXVsdGlDb2xzKCkgewogICAgICAgIHJl\ndHVybiBpc0NvdW50RGlzdGluY3QgJiYgaXNDb3VudE11bHRpQ29sdW1uczsK\nICAgIH0KCiAgICAvKioKICAgICAqIE92ZXJyaWRlcyBTUUwgZm9ybWF0aW9u\nIGJ5IHJlcGxhY2luZyBDT1VOVChjb2x1bW4pIGJ5IENPVU5UKCopIHdoZW4g\nc3BlY2lmaWMgY29uZGl0aW9ucyBhcmUgbWV0IGFuZAogICAgICogREJEaWN0\naW9uYXJ5IGNvbmZpZ3VyYXRpb24gPGNvZGU+dXNlV2lsZENhcmRGb3JDb3Vu\ndDwvY29kZT4gaXMgc2V0LgogICAgICovCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSwgU1FMQnVmZmVyIHNxbCwgaW50IGluZGV4KSB7\nCiAgICAgICAgaWYgKGlzQ291bnREaXN0aW5jdE11bHRpQ29scygpKSB7CiAg\nICAgICAgICAgIGdldFZhbHVlKCkuYXBwZW5kVG8oc2VsLCBjdHgsIHN0YXRl\nLCBzcWwsIDApOwogICAgICAgICAgICBzcWwuYWRkQ2FzdEZvclBhcmFtKGdl\ndE9wZXJhdG9yKCksIGdldFZhbHVlKCkpOwogICAgICAgIH0gZWxzZQogICAg\nICAgICAgICBzdXBlci5hcHBlbmRUbyhzZWwsIGN0eCwgc3RhdGUsIHNxbCwg\naW5kZXgpOwogICAgICAgIGlmICgoY3R4LnN0b3JlLmdldERCRGljdGlvbmFy\neSgpLnVzZVdpbGRDYXJkRm9yQ291bnQgJiYgc3RhdGUuam9pbnMuaXNFbXB0\neSgpKSB8fAogICAgICAgICAgICAhaXNDb3VudERpc3RpbmN0ICYmIGlzQ291\nbnRNdWx0aUNvbHVtbnMpewogICAgICAgICAgICBTdHJpbmcgcyA9IHNxbC5n\nZXRTUUwoKTsKICAgICAgICAgICAgaWYgKHMuc3RhcnRzV2l0aCgiQ09VTlQo\nIikgJiYgcy5lbmRzV2l0aCgiKSIpKSB7CiAgICAgICAgICAgICAgICBzcWwu\ncmVwbGFjZVNxbFN0cmluZygiQ09VTlQoIi5sZW5ndGgoKSwgcy5sZW5ndGgo\nKS0xLCAiKiIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKfQoK\n","encoding":"base64"}

