{"sha":"be543b64803fbd09b13466e86d9ad174031fdc12","node_id":"MDQ6QmxvYjIwNjM2NDpiZTU0M2I2NDgwM2ZiZDA5YjEzNDY2ZTg2ZDlhZDE3NDAzMWZkYzEy","size":4912,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/be543b64803fbd09b13466e86d9ad174031fdc12","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlwZXM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLkZpbHRlcnM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuRXhwcmVzc2lvblZpc2l0b3I7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwoK\nLyoqCiAqIFZhbHVlIHByb2R1Y2VkIGJ5IGEgdW5hcnkgb3BlcmF0aW9uIG9u\nIGEgdmFsdWUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwphYnN0cmFj\ndCBjbGFzcyBVbmFyeU9wCiAgICBleHRlbmRzIEFic3RyYWN0VmFsIHsKCiAg\nICBwcml2YXRlIGZpbmFsIFZhbCBfdmFsOwogICAgcHJpdmF0ZSBDbGFzc01l\ndGFEYXRhIF9tZXRhID0gbnVsbDsKICAgIHByaXZhdGUgQ2xhc3MgX2Nhc3Qg\nPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFuIF9ub1BhcmVuID0gZmFsc2U7\nCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gUHJvdmlkZSB0aGUgdmFs\ndWUgdG8gb3BlcmF0ZSBvbi4KICAgICAqLwogICAgcHVibGljIFVuYXJ5T3Ao\nVmFsIHZhbCkgewogICAgICAgIF92YWwgPSB2YWw7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyBVbmFyeU9wKFZhbCB2YWwsIGJvb2xlYW4gbm9QYXJlbikgewog\nICAgICAgIF92YWwgPSB2YWw7CiAgICAgICAgX25vUGFyZW4gPSBub1BhcmVu\nOwogICAgfQoKICAgIHB1YmxpYyBWYWwgZ2V0VmFsdWUoKSB7CiAgICAgICAg\ncmV0dXJuIF92YWw7CiAgICB9CgogICAgcHVibGljIENsYXNzTWV0YURhdGEg\nZ2V0TWV0YURhdGEoKSB7CiAgICAgICAgcmV0dXJuIF9tZXRhOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldE1ldGFEYXRhKENsYXNzTWV0YURhdGEgbWV0\nYSkgewogICAgICAgIF9tZXRhID0gbWV0YTsKICAgIH0KCiAgICBwdWJsaWMg\nQ2xhc3MgZ2V0VHlwZSgpIHsKICAgICAgICBpZiAoX2Nhc3QgIT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIF9jYXN0OwogICAgICAgIHJldHVybiBnZXRU\neXBlKF92YWwuZ2V0VHlwZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRJbXBsaWNpdFR5cGUoQ2xhc3MgdHlwZSkgewogICAgICAgIF9jYXN0ID0g\ndHlwZTsKICAgIH0KICAgIAogICAgcHVibGljIGJvb2xlYW4gZ2V0Tm9QYXJl\nbigpIHsKICAgICAgICByZXR1cm4gX25vUGFyZW47CiAgICB9CgogICAgcHVi\nbGljIEV4cFN0YXRlIGluaXRpYWxpemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4\ndCBjdHgsIGludCBmbGFncykgewogICAgICAgIHJldHVybiBpbml0aWFsaXpl\nVmFsdWUoc2VsLCBjdHgsIGZsYWdzKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQg\nRXhwU3RhdGUgaW5pdGlhbGl6ZVZhbHVlKFNlbGVjdCBzZWwsIEV4cENvbnRl\neHQgY3R4LCBpbnQgZmxhZ3MpIHsKICAgICAgICByZXR1cm4gX3ZhbC5pbml0\naWFsaXplKHNlbCwgY3R4LCBmbGFncyk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgc2VsZWN0KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0\nZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVhbiBwa3MpIHsKICAgICAgICBzZWwu\nc2VsZWN0KG5ld1NRTEJ1ZmZlcihzZWwsIGN0eCwgc3RhdGUpLCB0aGlzKTsK\nICAgICAgICBpZiAoaXNBZ2dyZWdhdGUoKSkKICAgICAgICAgICAgc2VsLnNl\ndEFnZ3JlZ2F0ZSh0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZWxl\nY3RDb2x1bW5zKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0\nZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVhbiBwa3MpIHsKICAgICAgICBfdmFs\nLnNlbGVjdENvbHVtbnMoc2VsLCBjdHgsIHN0YXRlLCB0cnVlKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBncm91cEJ5KFNlbGVjdCBzZWwsIEV4cENvbnRl\neHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSkgewogICAgICAgIHNlbC5ncm91cEJ5\nKG5ld1NRTEJ1ZmZlcihzZWwsIGN0eCwgc3RhdGUpKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBvcmRlckJ5KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVhbiBhc2MpIHsKICAg\nICAgICBzZWwub3JkZXJCeShuZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRl\nKSwgYXNjLCBmYWxzZSwgZ2V0U2VsZWN0QXMoKSk7CiAgICB9CgogICAgcHJp\ndmF0ZSBTUUxCdWZmZXIgbmV3U1FMQnVmZmVyKFNlbGVjdCBzZWwsIEV4cENv\nbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSkgewogICAgICAgIGNhbGN1bGF0\nZVZhbHVlKHNlbCwgY3R4LCBzdGF0ZSwgbnVsbCwgbnVsbCk7CiAgICAgICAg\nU1FMQnVmZmVyIGJ1ZiA9IG5ldyBTUUxCdWZmZXIoY3R4LnN0b3JlLmdldERC\nRGljdGlvbmFyeSgpKTsKICAgICAgICBhcHBlbmRUbyhzZWwsIGN0eCwgc3Rh\ndGUsIGJ1ZiwgMCk7CiAgICAgICAgcmV0dXJuIGJ1ZjsKICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0IGxvYWQoRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0\nYXRlLCBSZXN1bHQgcmVzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIE9iamVjdCB2YWx1ZSA9IHJlcy5nZXRPYmplY3QodGhpcywg\nSmF2YVNRTFR5cGVzLkpEQkNfREVGQVVMVCwgbnVsbCk7CiAgICAgICAgQ2xh\nc3M8Pz4gdHlwZSA9IGdldFR5cGUoKTsKICAgICAgICBpZiAodmFsdWUgPT0g\nbnVsbCAmJiAodHlwZS5pc1ByaW1pdGl2ZSgpIHx8IE51bWJlci5jbGFzcy5p\nc0Fzc2lnbmFibGVGcm9tKHR5cGUpKSkgewogICAgICAgICAgICB2YWx1ZSA9\nIEZpbHRlcnMuZ2V0RGVmYXVsdEZvck51bGwoRmlsdGVycy53cmFwKHR5cGUp\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIEZpbHRlcnMuY29udmVydCh2\nYWx1ZSwgdHlwZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2FsY3VsYXRl\nVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0\nYXRlLCAKICAgICAgICBWYWwgb3RoZXIsIEV4cFN0YXRlIG90aGVyU3RhdGUp\nIHsKICAgICAgICBfdmFsLmNhbGN1bGF0ZVZhbHVlKHNlbCwgY3R4LCBzdGF0\nZSwgbnVsbCwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGludCBsZW5ndGgo\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7\nCiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBw\nZW5kVG8oU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0\nYXRlLCAKICAgICAgICBTUUxCdWZmZXIgc3FsLCBpbnQgaW5kZXgpIHsKICAg\nICAgICBzcWwuYXBwZW5kKGdldE9wZXJhdG9yKCkpOwogICAgICAgIHNxbC5h\ncHBlbmQoX25vUGFyZW4gPyAiICIgOiAiKCIpOwogICAgICAgIF92YWwuYXBw\nZW5kVG8oc2VsLCBjdHgsIHN0YXRlLCBzcWwsIDApOwogICAgICAgIHNxbC5h\nZGRDYXN0Rm9yUGFyYW0oZ2V0T3BlcmF0b3IoKSwgX3ZhbCk7CiAgICAgICAg\naWYgKCFfbm9QYXJlbikKICAgICAgICAgICAgc3FsLmFwcGVuZCgiKSIpOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB0eXBlIG9mIHRoaXMg\ndmFsdWUgYmFzZWQgb24gdGhlIGFyZ3VtZW50IHR5cGUuIFJldHVybnMKICAg\nICAqIHRoZSBhcmd1bWVudCB0eXBlIGJ5IGRlZmF1bHQuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBDbGFzcyBnZXRUeXBlKENsYXNzIGMpIHsKICAgICAgICBy\nZXR1cm4gYzsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbmFt\nZSBvZiB0aGlzIG9wZXJhdG9yLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJz\ndHJhY3QgU3RyaW5nIGdldE9wZXJhdG9yKCk7CgogICAgcHVibGljIHZvaWQg\nYWNjZXB0VmlzaXQoRXhwcmVzc2lvblZpc2l0b3IgdmlzaXRvcikgewogICAg\nICAgIHZpc2l0b3IuZW50ZXIodGhpcyk7CiAgICAgICAgX3ZhbC5hY2NlcHRW\naXNpdCh2aXNpdG9yKTsKICAgICAgICB2aXNpdG9yLmV4aXQodGhpcyk7CiAg\nICB9Cn0KCg==\n","encoding":"base64"}

