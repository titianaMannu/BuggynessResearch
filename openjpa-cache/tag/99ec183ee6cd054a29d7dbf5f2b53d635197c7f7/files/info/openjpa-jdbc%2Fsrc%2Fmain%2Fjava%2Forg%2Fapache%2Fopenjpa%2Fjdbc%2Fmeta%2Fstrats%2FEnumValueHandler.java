{"sha":"d84e88cb70e96720db5e9ef59cae88955649f4c5","node_id":"MDQ6QmxvYjIwNjM2NDpkODRlODhjYjcwZTk2NzIwZGI1ZTllZjU5Y2FlODg5NTU2NDlmNGM1","size":4080,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d84e88cb70e96720db5e9ef59cae88955649f4c5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ1N0\nb3JlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5WYWx1\nZU1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hl\nbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbWV0YS5KYXZhVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5FeGNlcHRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwu\nTWV0YURhdGFFeGNlcHRpb247CgovKioKICogVmFsdWUgaGFuZGxlciBmb3Ig\nSkRLMS41IGVudW0gZmllbGQgdHlwZXMuCiAqCiAqIEBub2phdmFkb2MKICov\nCkBTdXBwcmVzc1dhcm5pbmdzKCJzZXJpYWwiKQpwdWJsaWMgY2xhc3MgRW51\nbVZhbHVlSGFuZGxlcgogICAgZXh0ZW5kcyBBYnN0cmFjdFZhbHVlSGFuZGxl\nciB7CgogICAgcHJpdmF0ZSBFbnVtPD8+W10gX3ZhbHMgPSBudWxsOwogICAg\ncHJpdmF0ZSBib29sZWFuIF9vcmRpbmFsID0gZmFsc2U7CiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQ\nYWNrYWdlKEVudW1WYWx1ZUhhbmRsZXIuY2xhc3MpOwoKICAgIC8qKgogICAg\nICogV2hldGhlciB0byBzdG9yZSB0aGUgZW51bSB2YWx1ZSBhcyBpdHMgb3Jk\naW5hbC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0U3RvcmVPcmRp\nbmFsKCkgewogICAgICAgIHJldHVybiBfb3JkaW5hbDsKICAgIH0KCiAgICAv\nKioKICAgICAqIFdoZXRoZXIgdG8gc3RvcmUgdGhlIGVudW0gdmFsdWUgYXMg\naXRzIG9yZGluYWwuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFN0b3Jl\nT3JkaW5hbChib29sZWFuIG9yZGluYWwpIHsKICAgICAgICBfb3JkaW5hbCA9\nIG9yZGluYWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGVwcmVjYXRlZAog\nICAgICovCiAgICBwdWJsaWMgQ29sdW1uW10gbWFwKFZhbHVlTWFwcGluZyB2\nbSwgU3RyaW5nIG5hbWUsIENvbHVtbklPIGlvLAogICAgICAgIGJvb2xlYW4g\nYWRhcHQpIHsKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9IHZtLmdldE1h\ncHBpbmdSZXBvc2l0b3J5KCkuZ2V0REJEaWN0aW9uYXJ5KCk7CiAgICAgICAg\nREJJZGVudGlmaWVyIGNvbE5hbWUgPSBEQklkZW50aWZpZXIubmV3Q29sdW1u\nKG5hbWUsIGRpY3QgIT0gbnVsbCA/IGRpY3QuZGVsaW1pdEFsbCgpIDogZmFs\nc2UpOwogICAgICAgIHJldHVybiBtYXAodm0sIGNvbE5hbWUsIGlvLCBhZGFw\ndCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBDb2x1bW5bXSBtYXAoVmFsdWVN\nYXBwaW5nIHZtLCBEQklkZW50aWZpZXIgbmFtZSwgQ29sdW1uSU8gaW8sCiAg\nICAgICAgYm9vbGVhbiBhZGFwdCkgewogICAgICAgIC8vIGFsbCBlbnVtIGNs\nYXNzZXMgaGF2ZSBhIHN0YXRpYyBtZXRob2QgY2FsbGVkICd2YWx1ZXMoKScK\nICAgICAgICAvLyB0aGF0IHJldHVybnMgYW4gYXJyYXkgb2YgYWxsIHRoZSBl\nbnVtIHZhbHVlcwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE1ldGhvZCBt\nID0gdm0uZ2V0VHlwZSgpLmdldE1ldGhvZCgidmFsdWVzIiwgKENsYXNzW10p\nIG51bGwpOwogICAgICAgICAgICBfdmFscyA9IChFbnVtW10pIG0uaW52b2tl\nKG51bGwsIChPYmplY3RbXSkgbnVsbCk7CiAgICAgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIHRocm93IG5l\ndyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgibm90LWVudW0tZmllbGQi\nLCAKICAgICAgICAgICAgICAgICAgICB2bS5nZXRGaWVsZE1hcHBpbmcoKS5n\nZXRGdWxsTmFtZSh0cnVlKSwgRXhjZXB0aW9ucy50b0NsYXNzTmFtZSh2bS5n\nZXRUeXBlKCkpKSkuc2V0Q2F1c2UoZSk7CiAgICAgICAgfQoKICAgICAgICBD\nb2x1bW4gY29sID0gbmV3IENvbHVtbigpOwogICAgICAgIGNvbC5zZXRJZGVu\ndGlmaWVyKG5hbWUpOwogICAgICAgIGlmIChfb3JkaW5hbCkKICAgICAgICAg\nICAgY29sLnNldEphdmFUeXBlKEphdmFUeXBlcy5TSE9SVCk7CiAgICAgICAg\nZWxzZSB7CiAgICAgICAgICAgIC8vIGxvb2sgZm9yIHRoZSBsb25nZXN0IGVu\ndW0gdmFsdWUgbmFtZTsgdXNlIDIwIGFzIG1pbiBsZW5ndGggdG8KICAgICAg\nICAgICAgLy8gbGVhdmUgcm9vbSBmb3IgZnV0dXJlIGxvbmcgbmFtZXMKICAg\nICAgICAgICAgaW50IGxlbiA9IDIwOwogICAgICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IF92YWxzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAg\nbGVuID0gTWF0aC5tYXgoX3ZhbHNbaV0ubmFtZSgpLmxlbmd0aCgpLCBsZW4p\nOwoKICAgICAgICAgICAgY29sLnNldEphdmFUeXBlKEphdmFUeXBlcy5TVFJJ\nTkcpOwogICAgICAgICAgICBjb2wuc2V0U2l6ZShsZW4pOwogICAgICAgIH0K\nICAgICAgICByZXR1cm4gbmV3IENvbHVtbltdeyBjb2wgfTsKICAgIH0KCiAg\nICBwdWJsaWMgYm9vbGVhbiBpc1ZlcnNpb25hYmxlKCkgewogICAgICAgIHJl\ndHVybiB0cnVlOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgdG9EYXRhU3Rv\ncmVWYWx1ZShWYWx1ZU1hcHBpbmcgdm0sIE9iamVjdCB2YWwsIEpEQkNTdG9y\nZSBzdG9yZSkgewogICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKF9vcmRpbmFsKQogICAgICAg\nICAgICByZXR1cm4gbmV3IEludGVnZXIoKChFbnVtKSB2YWwpLm9yZGluYWwo\nKSk7CiAgICAgICAgcmV0dXJuICgoRW51bSkgdmFsKS5uYW1lKCk7CiAgICB9\nCgogICAgcHVibGljIE9iamVjdCB0b09iamVjdFZhbHVlKFZhbHVlTWFwcGlu\nZyB2bSwgT2JqZWN0IHZhbCkgewogICAgICAgIGlmICh2YWwgPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKF9vcmRpbmFs\nKQogICAgICAgICAgICByZXR1cm4gX3ZhbHNbKChOdW1iZXIpIHZhbCkuaW50\nVmFsdWUoKV07CiAgICAgICAgcmV0dXJuIEVudW0udmFsdWVPZih2bS5nZXRU\neXBlKCksIChTdHJpbmcpIHZhbCk7CiAgICB9Cn0K\n","encoding":"base64"}

