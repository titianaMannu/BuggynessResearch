{"sha":"b9dacad8401b4c932b1ef02b49835c2f5d6f3182","node_id":"MDQ6QmxvYjIwNjM2NDpiOWRhY2FkODQwMWI0YzkzMmIxZWYwMmI0OTgzNWMyZjVkNmYzMTgy","size":6154,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b9dacad8401b4c932b1ef02b49835c2f5d6f3182","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlOwoKaW1wb3J0\nIGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlv\nbnM7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRp\nbC5TZXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5n\nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBB\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lbmhh\nbmNlLlBDRGF0YUdlbmVyYXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLk9iamVjdFZhbHVlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkNsb3NlYWJsZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbXBsSGVscGVyOwoKaW1wb3J0\nIHNlcnAudXRpbC5TdHJpbmdzOwoKLyoqCiAqIERlZmF1bHQgZGF0YSBjYWNo\nZSBtYW5hZ2VyIHByb3ZpZGVzIGhhbmRsZSB0byB1dGlsaXRpZXMge0BsaW5r\ncGxhaW4gUENEYXRhR2VuZXJhdG9yfSwge0BsaW5rcGxhaW4gRGF0YUNhY2hl\nU2NoZWR1bGVyfQogKiBhbmQge0BsaW5rcGxhaW4gQ2FjaGVEaXN0cmlidXRp\nb25Qb2xpY3l9IGZvciB0aGUgY2FjaGUgb3BlcmF0aW9uLiBUaGlzIGltcGxl\nbWVudGF0aW9uIGFsc28gZGV0ZXJtaW5lcyB3aGV0aGVyIGEKICogbWFuYWdl\nZCB0eXBlIGlzIGVsaWdpYmxlIHRvIGNhY2hlLgogKiAKICogQGF1dGhvciBB\nYmUgV2hpdGUKICogQGF1dGhvciBQYXRyaWNrIExpbnNrZXkKICogQGF1dGhv\nciBQaW5ha2kgUG9kZGFyCiAqLwpwdWJsaWMgY2xhc3MgRGF0YUNhY2hlTWFu\nYWdlckltcGwKICAgIGltcGxlbWVudHMgQ2xvc2VhYmxlLCBEYXRhQ2FjaGVN\nYW5hZ2VyIHsKCiAgICBwcml2YXRlIE9wZW5KUEFDb25maWd1cmF0aW9uIF9j\nb25mOwogICAgcHJpdmF0ZSBEYXRhQ2FjaGUgX2NhY2hlID0gbnVsbDsKICAg\nIHByaXZhdGUgUXVlcnlDYWNoZSBfcXVlcnlDYWNoZSA9IG51bGw7CiAgICBw\ncml2YXRlIERhdGFDYWNoZVBDRGF0YUdlbmVyYXRvciBfcGNHZW5lcmF0b3Ig\nPSBudWxsOwogICAgcHJpdmF0ZSBEYXRhQ2FjaGVTY2hlZHVsZXIgX3NjaGVk\ndWxlciA9IG51bGw7CiAgICBwcml2YXRlIENhY2hlRGlzdHJpYnV0aW9uUG9s\naWN5IF9wb2xpY3kgPSBuZXcgRGVmYXVsdENhY2hlRGlzdHJpYnV0aW9uUG9s\naWN5KCk7CgogICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZShPcGVuSlBBQ29u\nZmlndXJhdGlvbiBjb25mLCBPYmplY3RWYWx1ZSBkYXRhQ2FjaGUsIE9iamVj\ndFZhbHVlIHF1ZXJ5Q2FjaGUpIHsKICAgICAgICBfY29uZiA9IGNvbmY7CiAg\nICAgICAgX2NhY2hlID0gKERhdGFDYWNoZSkgZGF0YUNhY2hlLmluc3RhbnRp\nYXRlKERhdGFDYWNoZS5jbGFzcywgY29uZik7CiAgICAgICAgaWYgKF9jYWNo\nZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgIAogICAg\nICAgIC8vIGNyZWF0ZSBoZWxwZXJzIGJlZm9yZSBpbml0aWFsaXppbmcgY2Fj\naGVzCiAgICAgICAgaWYgKGNvbmYuZ2V0RHluYW1pY0RhdGFTdHJ1Y3RzKCkp\nCiAgICAgICAgICAgIF9wY0dlbmVyYXRvciA9IG5ldyBEYXRhQ2FjaGVQQ0Rh\ndGFHZW5lcmF0b3IoY29uZik7CiAgICAgICAgX3NjaGVkdWxlciA9IG5ldyBE\nYXRhQ2FjaGVTY2hlZHVsZXIoY29uZik7CiAgICAgICAgCiAgICAgICAgX3Bv\nbGljeSA9IGNvbmYuZ2V0Q2FjaGVEaXN0cmlidXRpb25Qb2xpY3lJbnN0YW5j\nZSgpOwoKICAgICAgICBfY2FjaGUuaW5pdGlhbGl6ZSh0aGlzKTsKICAgICAg\nICBfcXVlcnlDYWNoZSA9IChRdWVyeUNhY2hlKSBxdWVyeUNhY2hlLmluc3Rh\nbnRpYXRlKFF1ZXJ5Q2FjaGUuY2xhc3MsIGNvbmYpOwogICAgICAgIGlmIChf\ncXVlcnlDYWNoZSAhPSBudWxsKQogICAgICAgICAgICBfcXVlcnlDYWNoZS5p\nbml0aWFsaXplKHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyBEYXRhQ2FjaGUg\nZ2V0U3lzdGVtRGF0YUNhY2hlKCkgewogICAgICAgIHJldHVybiBnZXREYXRh\nQ2FjaGUobnVsbCwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyBEYXRhQ2Fj\naGUgZ2V0RGF0YUNhY2hlKFN0cmluZyBuYW1lKSB7CiAgICAgICAgcmV0dXJu\nIGdldERhdGFDYWNoZShuYW1lLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm5zIHRoZSBuYW1lZCBjYWNoZS4gCiAgICAgKiBJZiB0aGUg\nZ2l2ZW4gbmFtZSBpcyBuYW1lIG9yIHRoZSBuYW1lIG9mIHRoZSBjYWNoZSBw\nbHVnaW4gdGhlbiByZXR1cm5zIHRoZSBtYWluIGNhY2hlLgogICAgICogT3Ro\nZXJ3aXNlLCB7QGxpbmtwbGFpbiBEYXRhQ2FjaGUjZ2V0UGFydGl0aW9uKFN0\ncmluZywgYm9vbGVhbikgZGVsZWdhdGVzfSB0byB0aGUgbWFpbiBjYWNoZQog\nICAgICogdG8gb2J0YWluIGEgcGFydGl0aW9uLiAgIAogICAgICovCiAgICBw\ndWJsaWMgRGF0YUNhY2hlIGdldERhdGFDYWNoZShTdHJpbmcgbmFtZSwgYm9v\nbGVhbiBjcmVhdGUpIHsKICAgICAgICBpZiAobmFtZSA9PSBudWxsIHx8IChf\nY2FjaGUgIT0gbnVsbCAmJiBuYW1lLmVxdWFscyhfY2FjaGUuZ2V0TmFtZSgp\nKSkpCiAgICAgICAgICAgIHJldHVybiBfY2FjaGU7CiAgICAgICAgaWYgKF9j\nYWNoZSAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gX2NhY2hlLmdldFBh\ncnRpdGlvbihuYW1lLCBjcmVhdGUpOwogICAgICAgIHJldHVybiBudWxsOwog\nICAgfQoKICAgIHB1YmxpYyBRdWVyeUNhY2hlIGdldFN5c3RlbVF1ZXJ5Q2Fj\naGUoKSB7CiAgICAgICAgcmV0dXJuIF9xdWVyeUNhY2hlOwogICAgfQoKICAg\nIHB1YmxpYyBEYXRhQ2FjaGVQQ0RhdGFHZW5lcmF0b3IgZ2V0UENEYXRhR2Vu\nZXJhdG9yKCkgewogICAgICAgIHJldHVybiBfcGNHZW5lcmF0b3I7CiAgICB9\nCgogICAgcHVibGljIERhdGFDYWNoZVNjaGVkdWxlciBnZXREYXRhQ2FjaGVT\nY2hlZHVsZXIoKSB7CiAgICAgICAgcmV0dXJuIF9zY2hlZHVsZXI7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgSW1wbEhlbHBl\nci5jbG9zZShfY2FjaGUpOwogICAgICAgIEltcGxIZWxwZXIuY2xvc2UoX3F1\nZXJ5Q2FjaGUpOwogICAgICAgIGlmIChfc2NoZWR1bGVyICE9IG51bGwpCiAg\nICAgICAgICAgIF9zY2hlZHVsZXIuc3RvcCgpOwogICAgfQoKICAgIC8qKgog\nICAgICogU2VsZWN0IGNhY2hlIGZvciB0aGUgZ2l2ZW4gbWFuYWdlZCBpbnN0\nYW5jZS4KICAgICAqIElmIHR5cGUgYmFzZWQgdmVyaWZpY2F0aW9uIGFmZmly\nbXMgdGhlIHR5cGUgdG8gYmUgY2FjaGVkIHRoZW4gdGhlIGluc3RhbmNlIGJh\nc2VkIHBvbGljeSAKICAgICAqIGlzIGNhbGxlZCB0byBkZXRlcm1pbmUgdGhl\nIHRhcmdldCBjYWNoZS4gIAogICAgICovCiAgICBwdWJsaWMgRGF0YUNhY2hl\nIHNlbGVjdENhY2hlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAg\nICBpZiAoc20gPT0gbnVsbCB8fCAhaXNDYWNoYWJsZShzbS5nZXRNZXRhRGF0\nYSgpKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgU3RyaW5n\nIG5hbWUgPSBfcG9saWN5LnNlbGVjdENhY2hlKHNtLCBudWxsKTsKICAgICAg\nICByZXR1cm4gbmFtZSA9PSBudWxsID8gbnVsbCA6IGdldERhdGFDYWNoZShu\nYW1lKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBpbnN0\nYW5jZS1iYXNlZCBjYWNoZSBkaXN0cmlidXRpb24gcG9saWN5LCBpZiBjb25m\naWd1cmVkLiAKICAgICAqLwogICAgcHVibGljIENhY2hlRGlzdHJpYnV0aW9u\nUG9saWN5IGdldERpc3RyaWJ1dGlvblBvbGljeSgpIHsKICAgICAgICByZXR1\ncm4gX3BvbGljeTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBBZmZpcm1z\nIGlmIHRoZSBnaXZlbiB0eXBlIGlzIGVsaWdpYmxlIGZvciBjYWNoZS4KICAg\nICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNDYWNoYWJsZShDbGFzc01ldGFE\nYXRhIG1ldGEpIHsKICAgICAgICBCb29sZWFuIGlzQ2FjaGFibGUgPSBpc0Nh\nY2hlYWJsZUJ5TW9kZShtZXRhKTsKICAgICAgICBpZiAoaXNDYWNoYWJsZSA9\nPSBudWxsKSB7CiAgICAgICAgICAgaXNDYWNoYWJsZSA9IGlzQ2FjaGVhYmxl\nQnlUeXBlKG1ldGEpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaXNDYWNo\nYWJsZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBBZmZpcm1zIHRoZSBn\naXZlbiBjbGFzcyBpcyBlbGlnaWJsZSB0byBiZSBjYWNoZWQgYWNjb3JkaW5n\nIHRvIHRoZSBjYWNoZSBtb2RlCiAgICAgKiBhbmQgdGhlIGNhY2hlIGVuYWJs\nZSBmbGFnIG9uIHRoZSBnaXZlbiBtZXRhZGF0YS4KICAgICAqICAKICAgICAq\nIEByZXR1cm4gVFJVRSBvciBGQUxTRSBpZiAgY2FjaGUgbW9kZSBpcyBjb25m\naWd1cmVkLiBudWxsIG90aGVyd2lzZS4KICAgICAqLwogICAgcHJpdmF0ZSBC\nb29sZWFuIGlzQ2FjaGVhYmxlQnlNb2RlKENsYXNzTWV0YURhdGEgbWV0YSkg\neyAKICAgICAgICBTdHJpbmcgbW9kZSA9IF9jb25mLmdldERhdGFDYWNoZU1v\nZGUoKTsKICAgICAgICBpZiAoRGF0YUNhY2hlTW9kZS5BTEwudG9TdHJpbmco\nKS5lcXVhbHNJZ25vcmVDYXNlKG1vZGUpKQogICAgICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgICAgICBpZiAoRGF0YUNhY2hlTW9kZS5OT05FLnRvU3RyaW5n\nKCkuZXF1YWxzSWdub3JlQ2FzZShtb2RlKSkKICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgICAgIGlmIChEYXRhQ2FjaGVNb2RlLkVOQUJMRV9TRUxF\nQ1RJVkUudG9TdHJpbmcoKS5lcXVhbHNJZ25vcmVDYXNlKG1vZGUpKQogICAg\nICAgICAgICByZXR1cm4gQm9vbGVhbi5UUlVFLmVxdWFscyhtZXRhLmdldENh\nY2hlRW5hYmxlZCgpKTsKICAgICAgICBpZiAoRGF0YUNhY2hlTW9kZS5ESVNB\nQkxFX1NFTEVDVElWRS50b1N0cmluZygpLmVxdWFsc0lnbm9yZUNhc2UobW9k\nZSkpCiAgICAgICAgICAgIHJldHVybiAhQm9vbGVhbi5GQUxTRS5lcXVhbHMo\nbWV0YS5nZXRDYWNoZUVuYWJsZWQoKSk7CiAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICB9CiAgICAKICAgIC8qKgogICAgICogSXMgdGhlIGdpdmVuIHR5cGUg\nY2FjaGVhYmxlIGJ5IEBEYXRhQ2FjaGUgYW5ub3RhdGlvbi4KICAgICAqICAK\nICAgICAqIEBzZWUgQ2xhc3NNZXRhRGF0YSNnZXREYXRhQ2FjaGVOYW1lKCkK\nICAgICAqLwogICAgcHJpdmF0ZSBCb29sZWFuIGlzQ2FjaGVhYmxlQnlUeXBl\nKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIHJldHVybiBtZXRhLmdl\ndERhdGFDYWNoZU5hbWUoKSAhPSBudWxsOwogICAgfQp9Cg==\n","encoding":"base64"}

