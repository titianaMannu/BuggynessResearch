{"sha":"5173e066e64314aa76703d9b452d0b3d394a82b3","node_id":"MDQ6QmxvYjIwNjM2NDo1MTczZTA2NmU2NDMxNGFhNzY3MDNkOWI0NTJkMGIzZDM5NGE4MmIz","size":10197,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5173e066e64314aa76703d9b452d0b3d394a82b3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZWU7CgppbXBvcnQgamF2YS51\ndGlsLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi5Ob3RTdXBwb3J0ZWRFeGNlcHRpb247Cmlt\ncG9ydCBqYXZheC50cmFuc2FjdGlvbi5TeXN0ZW1FeGNlcHRpb247CmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXI7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYWJsZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Q\ncml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLklu\ndmFsaWRTdGF0ZUV4Y2VwdGlvbjsKCi8qKgogKiBJbXBsZW1lbnRhdGlvbiBv\nZiB0aGUge0BsaW5rIE1hbmFnZWRSdW50aW1lfSBpbnRlcmZhY2UgdGhhdCBz\nZWFyY2hlcwogKiB0aHJvdWdoIGEgc2V0IG9mIGtub3duIEpOREkgbG9jYXRp\nb25zIGFuZCBtZXRob2QgaW52b2NhdGlvbnMgdG8gbG9jYXRlIHRoZQogKiBh\ncHByb3ByaWF0ZSBtZWNoYW5pc20gZm9yIG9idGFpbmluZyBhIFRyYW5zYWN0\naW9uTWFuYWdlci4KICogIEJ1aWx0IGluIHN1cHBvcnQgaXMgcHJvdmlkZWQg\nZm9yIHRoZSBmb2xsb3dpbmcgQXBwbGljYXRpb24gU2VydmVyczoKICogPHVs\nPgogKiA8bGk+Qmx1ZXN0b25lPC9saT4KICogPGxpPkdsYXNzRmlzaDwvbGk+\nCiAqIDxsaT5IUCBBcHBsaWNhdGlvbiBTZXJ2ZXI8L2xpPgogKiA8bGk+SkJv\nc3M8L2xpPgogKiA8bGk+SlJ1bjwvbGk+CiAqIDxsaT5PcGVuRUpCPC9saT4K\nICogPGxpPk9yYWNsZSBBcHBsaWNhdGlvbiBTZXJ2ZXI8L2xpPgogKiA8bGk+\nT3Jpb248L2xpPgogKiA8bGk+U3VuT05FPC9saT4KICogPGxpPldlYmxvZ2lj\nPC9saT4KICogPGxpPldlYnNwaGVyZTwvbGk+CiAqIDwvdWw+CiAqCiAqIEBh\ndXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4CiAqLwpwdWJsaWMgY2xhc3MgQXV0\nb21hdGljTWFuYWdlZFJ1bnRpbWUgZXh0ZW5kcyBBYnN0cmFjdE1hbmFnZWRS\ndW50aW1lCiAgICBpbXBsZW1lbnRzIE1hbmFnZWRSdW50aW1lLCBDb25maWd1\ncmFibGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBbXSBK\nTkRJX0xPQ1MgPSBuZXcgU3RyaW5nIFtdewogICAgICAgICJqYXZheC50cmFu\nc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXIiLCAvLyB3ZWJsb2dpYwogICAg\nICAgICJqYXZhOi9UcmFuc2FjdGlvbk1hbmFnZXIiLCAvLyBqYm9zcyAmIGpy\ndW4KICAgICAgICAiamF2YTovRGVmYXVsdERvbWFpbi9UcmFuc2FjdGlvbk1h\nbmFnZXIiLCAvLyBqcnVuIHRvbwogICAgICAgICJqYXZhOmNvbXAvcG0vVHJh\nbnNhY3Rpb25NYW5hZ2VyIiwgLy8gb3Jpb24gJiBvcmFjbGUKICAgICAgICAi\namF2YTpjb21wL1RyYW5zYWN0aW9uTWFuYWdlciIsIC8vIGdlbmVyaWMKICAg\nICAgICAiamF2YTphcHBzZXJ2ZXIvVHJhbnNhY3Rpb25NYW5hZ2VyIiwgLy8g\nR2xhc3NGaXNoCiAgICAgICAgImphdmE6cG0vVHJhbnNhY3Rpb25NYW5hZ2Vy\nIiwgLy8gYm9ybGFuZAogICAgfTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIFN0cmluZyBbXSBNRVRIT0RTID0gbmV3IFN0cmluZ1tdewogICAgICAgICJj\nb20uYXJqdW5hLmp0YS5KVEFfVHJhbnNhY3Rpb25NYW5hZ2VyLnRyYW5zYWN0\naW9uTWFuYWdlciIsIC8vIGhwCiAgICAgICAgImNvbS5ibHVlc3RvbmUuanRh\nLlNhVHJhbnNhY3Rpb25NYW5hZ2VyRmFjdG9yeS5TYUdldFRyYW5zYWN0aW9u\nTWFuYWdlciIsCiAgICAgICAgIm9yZy5vcGVuZWpiLk9wZW5FSkIuZ2V0VHJh\nbnNhY3Rpb25NYW5hZ2VyIiwKICAgICAgICAiY29tLnN1bi5qdHMuanRhLlRy\nYW5zYWN0aW9uTWFuYWdlckltcGwuZ2V0VHJhbnNhY3Rpb25NYW5hZ2VySW1w\nbCIsCiAgICAgICAgImNvbS5pbnByaXNlLnZpc2l0cmFuc2FjdC5qdGEuVHJh\nbnNhY3Rpb25NYW5hZ2VySW1wbC4iCiAgICAgICAgICAgICsgImdldFRyYW5z\nYWN0aW9uTWFuYWdlckltcGwiLCAvLyBib3JsYW5kCiAgICB9OwoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIE1hbmFnZWRSdW50aW1lIFJFR0lTVFJZOwog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgV0xTTWFuYWdlZFJ1bnRpbWUgV0xT\nOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3VuT25lTWFuYWdlZFJ1bnRp\nbWUgU1VOT05FOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgV0FTTWFuYWdl\nZFJ1bnRpbWUgV0FTOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgV0FTUmVn\naXN0cnlNYW5hZ2VkUnVudGltZSBXQVNfUkVHOwoKICAgIHByaXZhdGUgc3Rh\ndGljIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAg\nICAgICAoQXV0b21hdGljTWFuYWdlZFJ1bnRpbWUuY2xhc3MpOwoKICAgIHN0\nYXRpYyB7CiAgICAgICAgTWFuYWdlZFJ1bnRpbWUgbXIgPSBudWxsOwoKICAg\nICAgICBtciA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbXIg\nPSAoTWFuYWdlZFJ1bnRpbWUpIENsYXNzLgogICAgICAgICAgICAgICAgZm9y\nTmFtZSgib3JnLmFwYWNoZS5vcGVuanBhLmVlLlJlZ2lzdHJ5TWFuYWdlZFJ1\nbnRpbWUiKS4KICAgICAgICAgICAgICAgICAgICBuZXdJbnN0YW5jZSgpOwog\nICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIC8v\nIG1pZ2h0IGJlIEpUQSB2ZXJzaW9uIGxvd2VyIHRoYW4gMS4xLCB3aGljaCBk\nb2Vzbid0IGhhdmUgCiAgICAgICAgICAgIC8vIFRyYW5zYWN0aW9uU3luY2hy\nb25pemF0aW9uUmVnaXN0cnkKICAgICAgICB9CiAgICAgICAgUkVHSVNUUlkg\nPSBtcjsKCiAgICAgICAgbXIgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIG1yID0gbmV3IFdMU01hbmFnZWRSdW50aW1lKCk7CiAgICAgICAg\nfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICB9CiAgICAgICAgV0xT\nID0gKFdMU01hbmFnZWRSdW50aW1lKSBtcjsKCiAgICAgICAgbXIgPSBudWxs\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG1yID0gbmV3IFN1bk9uZU1h\nbmFnZWRSdW50aW1lKCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQp\nIHsKICAgICAgICB9CiAgICAgICAgU1VOT05FID0gKFN1bk9uZU1hbmFnZWRS\ndW50aW1lKSBtcjsKCiAgICAgICAgbXIgPSBudWxsOwogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIG1yID0gbmV3IFdBU01hbmFnZWRSdW50aW1lKCk7CiAg\nICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICB9CiAgICAg\nICAgV0FTID0gKFdBU01hbmFnZWRSdW50aW1lKSBtcjsKCiAgICAgICAgbXIg\nPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIEluIGEgV2Vi\nU3BoZXJlIGVudmlyb25tZW50IHRoZSB0aHJlYWQncyBjdXJyZW50IGNsYXNz\nbG9hZGVyIG1pZ2h0CiAgICAgICAgICAgIC8vIG5vdCBoYXZlIGFjY2VzcyB0\nbyB0aGUgV2ViU3BoZXJlIEFQSXMuIEhvd2V2ZXIgdGhlICJydW50aW1lIgog\nICAgICAgICAgICAvLyBjbGFzc2xvYWRlciB3aWxsIGhhdmUgYWNjZXNzIHRv\nIHRoZW0uCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTaG91bGQgbm90\nIG5lZWQgYSBkb1ByaXYgZ2V0dGluZyB0aGlzIGNsYXNzJyBjbGFzc2xvYWRl\ncgogICAgICAgICAgICBDbGFzc0xvYWRlciBjbCA9IEF1dG9tYXRpY01hbmFn\nZWRSdW50aW1lLmNsYXNzLmdldENsYXNzTG9hZGVyKCk7CgogICAgICAgICAg\nICBDbGFzczxXQVNSZWdpc3RyeU1hbmFnZWRSdW50aW1lPiBtckNsYXNzID0K\nICAgICAgICAgICAgICAgIChDbGFzczxXQVNSZWdpc3RyeU1hbmFnZWRSdW50\naW1lPikgSjJEb1ByaXZIZWxwZXIKICAgICAgICAgICAgICAgICAgICAgICAg\nLmdldEZvck5hbWVBY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgV0FTUmVnaXN0cnlNYW5hZ2VkUnVudGltZS5jbGFzcy5nZXROYW1l\nKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSwgY2wp\nLnJ1bigpOwogICAgICAgICAgICBtciA9IEoyRG9Qcml2SGVscGVyLm5ld0lu\nc3RhbmNlQWN0aW9uKG1yQ2xhc3MpLnJ1bigpOwogICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIC8vIHNhZmUgdG8gaWdub3Jl\nCiAgICAgICAgfQogICAgICAgIFdBU19SRUcgPSAoV0FTUmVnaXN0cnlNYW5h\nZ2VkUnVudGltZSkgbXI7CiAgICB9CgogICAgcHJpdmF0ZSBDb25maWd1cmF0\naW9uIF9jb25mID0gbnVsbDsKICAgIHByaXZhdGUgTWFuYWdlZFJ1bnRpbWUg\nX3J1bnRpbWUgPSBudWxsOwogICAgCiAgICBwdWJsaWMgVHJhbnNhY3Rpb25N\nYW5hZ2VyIGdldFRyYW5zYWN0aW9uTWFuYWdlcigpCiAgICAgICAgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9ydW50aW1lICE9IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiBfcnVudGltZS5nZXRUcmFuc2FjdGlvbk1hbmFn\nZXIoKTsKCiAgICAgICAgTGlzdDxUaHJvd2FibGU+IGVycm9ycyA9IG5ldyBM\naW5rZWRMaXN0PFRocm93YWJsZT4oKTsKICAgICAgICBUcmFuc2FjdGlvbk1h\nbmFnZXIgdG0gPSBudWxsOwoKICAgICAgICAvLyBUcnkgdGhlIHJlZ2lzdHJ5\nIGV4dGVuc2lvbnMgZmlyc3Qgc28gdGhhdCBhbnkgYXBwbGljYWJsZSB2ZW5k\nb3IKICAgICAgICAvLyBzcGVjaWZpYyBleHRlbnNpb25zIGFyZSB1c2VkLgog\nICAgICAgIGlmIChXQVNfUkVHICE9IG51bGwpIHsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIHRtID0gV0FTX1JFRy5nZXRUcmFuc2FjdGlv\nbk1hbmFnZXIoKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQp\nIHsKICAgICAgICAgICAgICAgIGVycm9ycy5hZGQodCk7CiAgICAgICAgICAg\nIH0KICAgICAgICAgICAgaWYgKHRtICE9IG51bGwpIHsKICAgICAgICAgICAg\nICAgIF9ydW50aW1lID0gV0FTX1JFRzsKICAgICAgICAgICAgICAgIHJldHVy\nbiB0bTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gVGhl\nbiB0cnkgdGhlIHJlZ2lzdHJ5LCB3aGljaCBpcyB0aGUgb2ZmaWNpYWwgd2F5\nIHRvIG9idGFpbgogICAgICAgIC8vIHRyYW5zYWN0aW9uIHN5bmNocm9uaWNh\ndGlvbiBpbiBKVEEgMS4xCiAgICAgICAgaWYgKFJFR0lTVFJZICE9IG51bGwp\nIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRtID0gUkVH\nSVNUUlkuZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgICAgICBlcnJvcnMu\nYWRkKHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0bSAhPSBu\ndWxsKSB7CiAgICAgICAgICAgICAgICBfcnVudGltZSA9IFJFR0lTVFJZOwog\nICAgICAgICAgICAgICAgcmV0dXJuIHRtOwogICAgICAgICAgICB9CiAgICAg\nICAgfQoKICAgICAgICBpZiAoV0xTICE9IG51bGwpIHsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIHRtID0gV0xTLmdldFRyYW5zYWN0aW9u\nTWFuYWdlcigpOwogICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkg\newogICAgICAgICAgICAgICAgZXJyb3JzLmFkZCh0KTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICBpZiAodG0gIT0gbnVsbCkgewogICAgICAgICAgICAg\nICAgX3J1bnRpbWUgPSBXTFM7CiAgICAgICAgICAgICAgICByZXR1cm4gdG07\nCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChXQVMgIT0g\nbnVsbCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgV0FT\nLnNldENvbmZpZ3VyYXRpb24oX2NvbmYpOwogICAgICAgICAgICAgICAgV0FT\nLnN0YXJ0Q29uZmlndXJhdGlvbigpOwogICAgICAgICAgICAgICAgV0FTLmVu\nZENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAgICAgIHRtID0gV0FTLmdl\ndFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAgICAgICAgICB9IGNhdGNoIChU\naHJvd2FibGUgdCkgewogICAgICAgICAgICAgICAgZXJyb3JzLmFkZCh0KTsK\nICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG0gIT0gbnVsbCkgewog\nICAgICAgICAgICAgICAgX3J1bnRpbWUgPSBXQVM7CiAgICAgICAgICAgICAg\nICByZXR1cm4gdG07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAg\nIC8vIHRyeSB0byBmaW5kIGEgam5kaSBydW50aW1lCiAgICAgICAgSk5ESU1h\nbmFnZWRSdW50aW1lIGptciA9IG5ldyBKTkRJTWFuYWdlZFJ1bnRpbWUoKTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEpORElfTE9DUy5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICBqbXIuc2V0VHJhbnNhY3Rpb25NYW5hZ2Vy\nTmFtZShKTkRJX0xPQ1NbaV0pOwogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgdG0gPSBqbXIuZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7CiAg\nICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAg\nICAgICBlcnJvcnMuYWRkKHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIGlmICh0bSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBfcnVudGltZSA9\nIGptcjsKICAgICAgICAgICAgICAgIHJldHVybiB0bTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KCiAgICAgICAgLy8gbG9vayBmb3IgYSBtZXRob2QgcnVu\ndGltZQogICAgICAgIEludm9jYXRpb25NYW5hZ2VkUnVudGltZSBpbXIgPSBu\nZXcgSW52b2NhdGlvbk1hbmFnZWRSdW50aW1lKCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBNRVRIT0RTLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIGltci5zZXRDb25maWd1cmF0aW9uKF9jb25mKTsKICAgICAgICAgICAg\naW1yLnNldFRyYW5zYWN0aW9uTWFuYWdlck1ldGhvZChNRVRIT0RTW2ldKTsK\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRtID0gaW1yLmdl\ndFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAgICAgICAgICB9IGNhdGNoIChU\naHJvd2FibGUgdCkgewogICAgICAgICAgICAgICAgZXJyb3JzLmFkZCh0KTsK\nICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG0gIT0gbnVsbCkgewog\nICAgICAgICAgICAgICAgX3J1bnRpbWUgPSBpbXI7CiAgICAgICAgICAgICAg\nICByZXR1cm4gdG07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAg\nIGlmIChTVU5PTkUgIT0gbnVsbCkgewogICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgdG0gPSBTVU5PTkUuZ2V0VHJhbnNhY3Rpb25NYW5hZ2Vy\nKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAg\nICAgICAgICAgICBlcnJvcnMuYWRkKHQpOwogICAgICAgICAgICB9CiAgICAg\nICAgICAgIGlmICh0bSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBfcnVu\ndGltZSA9IFNVTk9ORTsKICAgICAgICAgICAgICAgIHJldHVybiB0bTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgVGhyb3dhYmxlW10gdCA9\nIChUaHJvd2FibGUgW10pIGVycm9ycy50b0FycmF5KAogICAgICAgICAgICBu\nZXcgVGhyb3dhYmxlIFtlcnJvcnMuc2l6ZSgpXSk7CiAgICAgICAgdGhyb3cg\nbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgidG0tbm90LWZv\ndW5kIikpLgogICAgICAgICAgICBzZXRGYXRhbCh0cnVlKS5zZXROZXN0ZWRU\naHJvd2FibGVzKHQpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldENvbmZp\nZ3VyYXRpb24oQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgX2NvbmYg\nPSBjb25mOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0YXJ0Q29uZmlndXJh\ndGlvbigpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBlbmRDb25maWd1cmF0\naW9uKCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFJvbGxiYWNrT25s\neShUaHJvd2FibGUgY2F1c2UpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7\nCiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIHRoZSBydW50aW1lIGlzIGNh\nY2hlZAogICAgICAgIGlmIChfcnVudGltZSA9PSBudWxsKQogICAgICAgICAg\nICBnZXRUcmFuc2FjdGlvbk1hbmFnZXIoKTsKCiAgICAgICAgaWYgKF9ydW50\naW1lICE9IG51bGwpCiAgICAgICAgICAgIF9ydW50aW1lLnNldFJvbGxiYWNr\nT25seShjYXVzZSk7CiAgICB9CgogICAgcHVibGljIFRocm93YWJsZSBnZXRS\nb2xsYmFja0NhdXNlKCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICAvLyBjaGVjayB0byBzZWUgaWYgdGhlIHJ1bnRpbWUgaXMgY2FjaGVk\nCiAgICAgICAgaWYgKF9ydW50aW1lID09IG51bGwpCiAgICAgICAgICAgIGdl\ndFRyYW5zYWN0aW9uTWFuYWdlcigpOwoKICAgICAgICBpZiAoX3J1bnRpbWUg\nIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIF9ydW50aW1lLmdldFJvbGxi\nYWNrQ2F1c2UoKTsKCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyBPYmplY3QgZ2V0VHJhbnNhY3Rpb25LZXkoKSB0aHJvd3Mg\nRXhjZXB0aW9uLCBTeXN0ZW1FeGNlcHRpb24gewogICAgICAgIGlmKF9ydW50\naW1lID09IG51bGwpIAogICAgICAgICAgICBnZXRUcmFuc2FjdGlvbk1hbmFn\nZXIoKTsKICAgICAgICAKICAgICAgICBpZihfcnVudGltZSAhPSBudWxsICkK\nICAgICAgICAgICAgcmV0dXJuIF9ydW50aW1lLmdldFRyYW5zYWN0aW9uS2V5\nKCk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBEZWxlZ2F0ZSBub25UcmFuc2FjdGlvbmFsIHdvcmsgdG8g\ndGhlIGFwcHJvcHJpYXRlIG1hbmFnZWQgcnVudGltZS4gSWYgbm8KICAgICAq\nIG1hbmFnZWQgcnVudGltZSBpcyBmb3VuZCB0aGVuIGRlbGVnYXRlIHtAbGlu\nayBBYnN0cmFjdE1hbmFnZWRSdW50aW1lfS4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgZG9Ob25UcmFuc2FjdGlvbmFsV29yayhSdW5uYWJsZSBydW5uYWJs\nZSkKICAgICAgICAgICAgdGhyb3dzIE5vdFN1cHBvcnRlZEV4Y2VwdGlvbiB7\nCiAgICAgICAgLy8gT2J0YWluIGEgdHJhbnNhY3Rpb24gbWFuYWdlciB0byBp\nbml0aWFsaXplIHRoZSBydW50aW1lLgogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGdldFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIE5vdFN1cHBvcnRlZEV4Y2Vw\ndGlvbiBuc2UgPQogICAgICAgICAgICAgICAgbmV3IE5vdFN1cHBvcnRlZEV4\nY2VwdGlvbihfbG9jCiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoInRt\nLXVuYXZhaWxhYmxlIiwgX3J1bnRpbWUpLmdldE1lc3NhZ2UoKSk7CiAgICAg\nICAgICAgIG5zZS5pbml0Q2F1c2UoZSk7CiAgICAgICAgICAgIHRocm93IG5z\nZTsKICAgICAgICB9CiAgICAgICAgX3J1bnRpbWUuZG9Ob25UcmFuc2FjdGlv\nbmFsV29yayhydW5uYWJsZSk7CiAgICB9Cn0K\n","encoding":"base64"}

