{"sha":"a241da26217cd50b5a5bfdd4966b2c0344c7378f","node_id":"MDQ6QmxvYjIwNjM2NDphMjQxZGEyNjIxN2NkNTBiNWE1YmZkZDQ5NjZiMmMwMzQ0YzczNzhm","size":26097,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a241da26217cd50b5a5bfdd4966b2c0344c7378f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQ7CgppbXBvcnQgamF2\nYS5pby5TZXJpYWxpemFibGU7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0\nOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0\naWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0\nIGphdmEudXRpbC5MaW5rZWRMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7\nCmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubWV0YS5NZXRhRGF0YURlZmF1bHRzOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLkludmFsaWRTdGF0ZUV4Y2VwdGlvbjsKCi8qKgog\nKiBNYW5hZ2VyIHRoYXQgY2FuIGJlIHVzZWQgdG8gdHJhY2sgYW5kIG5vdGlm\neSBsaXN0ZW5lcnMgb24gbGlmZWN5Y2xlIGV2ZW50cy4KICogIFRoaXMgY2xh\nc3MgaXMgb3B0aW1pemVkIGZvciBldmVudCBmaXJpbmcgcmF0aGVyIHRoYW4g\nZm9yIGFkZGluZyBhbmQKICogcmVtb3ZpbmcgbGlzdGVuZXJzLCB3aGljaCBh\ncmUgTyhuKSBvcGVyYXRpb25zLiBUaGlzIGNsYXNzIGFsc28gZG9lcyBub3QK\nICogbWFpbnRhaW4gcGVyZmVjdCBzZXQgc2VtYW50aWNzIGZvciBsaXN0ZW5l\ncnM7IGl0IGlzIHBvc3NpYmxlIHRvIHdpbmQgdXAKICogaGF2aW5nIHRoZSBz\nYW1lIGxpc3RlbmVyIGludm9rZWQgbXVsdGlwbGUgdGltZXMgZm9yIGEgc2lu\nZ2xlIGV2ZW50IGlmIGl0CiAqIGlzIGFkZGVkIHRvIHRoaXMgbWFuYWdlciBt\ndWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBjbGFzc2VzLCBvciB3aXRo\nCiAqIGEgYmFzZSBjbGFzcyBhbmQgaXRzIHN1YmNsYXNzLgogKgogKiBAYXV0\naG9yIFN0ZXZlIEtpbQogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAc2luY2Ug\nMC4zLjMKICogQG5vamF2YWRvYwogKi8KQFN1cHByZXNzV2FybmluZ3MoInNl\ncmlhbCIpCnB1YmxpYyBjbGFzcyBMaWZlY3ljbGVFdmVudE1hbmFnZXIKICAg\nIGltcGxlbWVudHMgQ2FsbGJhY2tNb2RlcywgU2VyaWFsaXphYmxlIHsKCiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBFeGNlcHRpb25bXSBFTVBUWV9FWENF\nUFRJT05TID0gbmV3IEV4Y2VwdGlvblswXTsKCiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdl\nKAogICAgICAgIExpZmVjeWNsZUV2ZW50TWFuYWdlci5jbGFzcyk7CgogICAg\ncHJpdmF0ZSBNYXA8Q2xhc3M8Pz4sIExpc3RlbmVyTGlzdD4gX2NsYXNzTGlz\ndGVuZXJzID0gbnVsbDsgCiAgICBwcml2YXRlIExpc3RlbmVyTGlzdCBfbGlz\ndGVuZXJzID0gbnVsbDsKICAgIC8vIG9kZC1lbGVtZW50OiBMaXN0ZW5lciBl\ndmVuLWVsZW1lbnQ6IENsYXNzW10KICAgIHByaXZhdGUgTGlzdDxPYmplY3Q+\nIF9hZGRMaXN0ZW5lcnMgPSBuZXcgTGlua2VkTGlzdDxPYmplY3Q+KCk7CiAg\nICBwcml2YXRlIExpc3Q8T2JqZWN0PiBfcmVtTGlzdGVuZXJzID0gbmV3IExp\nbmtlZExpc3Q8T2JqZWN0PigpOwogICAgcHJpdmF0ZSBMaXN0PEV4Y2VwdGlv\nbj4gX2V4Y2VwcyA9IG5ldyBMaW5rZWRMaXN0PEV4Y2VwdGlvbj4oKTsKICAg\nIHByaXZhdGUgYm9vbGVhbiBfZmlyaW5nID0gZmFsc2U7CiAgICBwcml2YXRl\nIGJvb2xlYW4gX2ZhaWwgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBf\nZmFpbEZhc3QgPSBmYWxzZTsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8g\nZmFpbCBhZnRlciBmaXJzdCBleGNlcHRpb24gd2hlbiBmaXJpbmcgZXZlbnRz\nIHRvIGxpc3RlbmVycy4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNG\nYWlsRmFzdCgpIHsKICAgICAgICByZXR1cm4gX2ZhaWxGYXN0OwogICAgfQoK\nICAgIC8qKgogICAgICogV2hldGhlciB0byBmYWlsIGFmdGVyIGZpcnN0IGV4\nY2VwdGlvbiB3aGVuIGZpcmluZyBldmVudHMgdG8gbGlzdGVuZXJzLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXRGYWlsRmFzdChib29sZWFuIGZhaWxG\nYXN0KSB7CiAgICAgICAgX2ZhaWxGYXN0ID0gZmFpbEZhc3Q7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZWdpc3RlciBhIGxpZmVjeWNsZSBsaXN0ZW5lciBm\nb3IgdGhlIGdpdmVuIGNsYXNzZXMuIElmIHRoZSBjbGFzc2VzCiAgICAgKiBh\ncnJheSBpcyBudWxsLCByZWdpc3RlciBmb3IgYWxsIGNsYXNzZXMuCiAgICAg\nKi8KICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCBhZGRMaXN0ZW5lcihP\nYmplY3QgbGlzdGVuZXIsIENsYXNzPD8+W10gY2xhc3NlcykgewogICAgICAg\nIGlmIChsaXN0ZW5lciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgaWYgKGNsYXNzZXMgIT0gbnVsbCAmJiBjbGFzc2VzLmxlbmd0aCA9\nPSAwKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKF9maXJpbmcp\nIHsKICAgICAgICAgICAgX2FkZExpc3RlbmVycy5hZGQobGlzdGVuZXIpOwog\nICAgICAgICAgICBfYWRkTGlzdGVuZXJzLmFkZChjbGFzc2VzKTsKICAgICAg\nICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNsYXNzZXMg\nPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoX2xpc3RlbmVycyA9PSBudWxs\nKQogICAgICAgICAgICAgICAgX2xpc3RlbmVycyA9IG5ldyBMaXN0ZW5lckxp\nc3QoNSk7CiAgICAgICAgICAgIF9saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTsK\nICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKF9j\nbGFzc0xpc3RlbmVycyA9PSBudWxsKQogICAgICAgICAgICBfY2xhc3NMaXN0\nZW5lcnMgPSBuZXcgSGFzaE1hcDxDbGFzczw/PiwgTGlzdGVuZXJMaXN0Pigp\nOwogICAgICAgIExpc3RlbmVyTGlzdCBsaXN0ZW5lcnM7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIGxpc3RlbmVycyA9IChMaXN0ZW5lckxpc3QpIF9jbGFzc0xpc3Rl\nbmVycy5nZXQoY2xhc3Nlc1tpXSk7CiAgICAgICAgICAgIGlmIChsaXN0ZW5l\ncnMgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgbGlzdGVuZXJzID0gbmV3\nIExpc3RlbmVyTGlzdCgzKTsKICAgICAgICAgICAgICAgIF9jbGFzc0xpc3Rl\nbmVycy5wdXQoY2xhc3Nlc1tpXSwgbGlzdGVuZXJzKTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTsKICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIGxp\nc3RlbmVyLgogICAgICovCiAgICBwdWJsaWMgc3luY2hyb25pemVkIHZvaWQg\ncmVtb3ZlTGlzdGVuZXIoT2JqZWN0IGxpc3RlbmVyKSB7CiAgICAgICAgaWYg\nKF9maXJpbmcpIHsKICAgICAgICAgICAgX3JlbUxpc3RlbmVycy5hZGQobGlz\ndGVuZXIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAg\nICBpZiAoX2xpc3RlbmVycyAhPSBudWxsICYmIF9saXN0ZW5lcnMucmVtb3Zl\nKGxpc3RlbmVyKSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGlmIChf\nY2xhc3NMaXN0ZW5lcnMgIT0gbnVsbCkgewogICAgICAgICAgICBMaXN0ZW5l\nckxpc3QgbGlzdGVuZXJzOwogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPExp\nc3RlbmVyTGlzdD4gaXRyID0gX2NsYXNzTGlzdGVuZXJzLnZhbHVlcygpLml0\nZXJhdG9yKCk7CiAgICAgICAgICAgICAgICBpdHIuaGFzTmV4dCgpOykgewog\nICAgICAgICAgICAgICAgbGlzdGVuZXJzID0gKExpc3RlbmVyTGlzdCkgaXRy\nLm5leHQoKTsKICAgICAgICAgICAgICAgIGxpc3RlbmVycy5yZW1vdmUobGlz\ndGVuZXIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhlcmUgYXJlIGxpc3RlbmVycyBv\nciBjYWxsYmFja3MgZm9yIHRoZSBnaXZlbiBzb3VyY2UuCiAgICAgKi8KICAg\nIHB1YmxpYyBib29sZWFuIGhhc1BlcnNpc3RMaXN0ZW5lcnMoT2JqZWN0IHNv\ndXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgcmV0dXJuIGhh\nc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQkVGT1JF\nX1BFUlNJU1QpCiAgICAgICAgICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJjZSwg\nbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQUZURVJfUEVSU0lTVCkKICAgICAgICAg\nICAgfHwgaGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLAogICAgICAgICAgICAg\nICAgTGlmZWN5Y2xlRXZlbnQuQUZURVJfUEVSU0lTVF9QRVJGT1JNRUQpOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhlcmUgYXJl\nIGxpc3RlbmVycyBvciBjYWxsYmFja3MgZm9yIHRoZSBnaXZlbiBzb3VyY2Uu\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGhhc0RlbGV0ZUxpc3RlbmVy\ncyhPYmplY3Qgc291cmNlLCBDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAgICAg\nICByZXR1cm4gaGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLCBMaWZlY3ljbGVF\ndmVudC5CRUZPUkVfREVMRVRFKQogICAgICAgICAgICB8fCBoYXNIYW5kbGVy\ncyhzb3VyY2UsIG1ldGEsIExpZmVjeWNsZUV2ZW50LkFGVEVSX0RFTEVURSkK\nICAgICAgICAgICAgfHwgaGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLCBMaWZl\nY3ljbGVFdmVudC5BRlRFUl9ERUxFVEVfUEVSRk9STUVEKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoZXJlIGFyZSBsaXN0ZW5l\ncnMgb3IgY2FsbGJhY2tzIGZvciB0aGUgZ2l2ZW4gc291cmNlLgogICAgICov\nCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNDbGVhckxpc3RlbmVycyhPYmplY3Qg\nc291cmNlLCBDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAgICAgICByZXR1cm4g\naGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5CRUZP\nUkVfQ0xFQVIpCiAgICAgICAgICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJjZSwg\nbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQUZURVJfQ0xFQVIpOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhlcmUgYXJlIGxpc3RlbmVy\ncyBvciBjYWxsYmFja3MgZm9yIHRoZSBnaXZlbiBzb3VyY2UuCiAgICAgKi8K\nICAgIHB1YmxpYyBib29sZWFuIGhhc0xvYWRMaXN0ZW5lcnMoT2JqZWN0IHNv\ndXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgcmV0dXJuIGhh\nc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQUZURVJf\nTE9BRCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0\naGVyZSBhcmUgbGlzdGVuZXJzIG9yIGNhbGxiYWNrcyBmb3IgdGhlIGdpdmVu\nIHNvdXJjZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaGFzU3RvcmVM\naXN0ZW5lcnMoT2JqZWN0IHNvdXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7\nCiAgICAgICAgcmV0dXJuIGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlm\nZWN5Y2xlRXZlbnQuQkVGT1JFX1NUT1JFKQogICAgICAgICAgICB8fCBoYXNI\nYW5kbGVycyhzb3VyY2UsIG1ldGEsIExpZmVjeWNsZUV2ZW50LkFGVEVSX1NU\nT1JFKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRo\nZXJlIGFyZSBsaXN0ZW5lcnMgb3IgY2FsbGJhY2tzIGZvciB0aGUgZ2l2ZW4g\nc291cmNlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNVcGRhdGVM\naXN0ZW5lcnMoT2JqZWN0IHNvdXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7\nCiAgICAgICAgcmV0dXJuIGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlm\nZWN5Y2xlRXZlbnQuQkVGT1JFX1VQREFURSkKICAgICAgICAgICAgfHwgaGFz\nSGFuZGxlcnMoc291cmNlLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5BRlRFUl9V\nUERBVEVfUEVSRk9STUVEKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiB3aGV0aGVyIHRoZXJlIGFyZSBsaXN0ZW5lcnMgb3IgY2FsbGJhY2tzIGZv\nciB0aGUgZ2l2ZW4gc291cmNlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVh\nbiBoYXNEaXJ0eUxpc3RlbmVycyhPYmplY3Qgc291cmNlLCBDbGFzc01ldGFE\nYXRhIG1ldGEpIHsKICAgICAgICByZXR1cm4gaGFzSGFuZGxlcnMoc291cmNl\nLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfRElSVFkpCiAgICAgICAg\nICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xlRXZl\nbnQuQUZURVJfRElSVFkpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHdoZXRoZXIgdGhlcmUgYXJlIGxpc3RlbmVycyBvciBjYWxsYmFja3MgZm9y\nIHRoZSBnaXZlbiBzb3VyY2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFu\nIGhhc0RldGFjaExpc3RlbmVycyhPYmplY3Qgc291cmNlLCBDbGFzc01ldGFE\nYXRhIG1ldGEpIHsKICAgICAgICByZXR1cm4gaGFzSGFuZGxlcnMoc291cmNl\nLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfREVUQUNIKQogICAgICAg\nICAgICB8fCBoYXNIYW5kbGVycyhzb3VyY2UsIG1ldGEsIExpZmVjeWNsZUV2\nZW50LkFGVEVSX0RFVEFDSCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm4gd2hldGhlciB0aGVyZSBhcmUgbGlzdGVuZXJzIG9yIGNhbGxiYWNrcyBm\nb3IgdGhlIGdpdmVuIHNvdXJjZS4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gaGFzQXR0YWNoTGlzdGVuZXJzKE9iamVjdCBzb3VyY2UsIENsYXNzTWV0\nYURhdGEgbWV0YSkgewogICAgICAgIHJldHVybiBoYXNIYW5kbGVycyhzb3Vy\nY2UsIG1ldGEsIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9BVFRBQ0gpCiAgICAg\nICAgICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xl\nRXZlbnQuQUZURVJfQVRUQUNIKTsKICAgIH0KCiAgICBwcml2YXRlIGJvb2xl\nYW4gaGFzSGFuZGxlcnMoT2JqZWN0IHNvdXJjZSwgQ2xhc3NNZXRhRGF0YSBt\nZXRhLCBpbnQgdHlwZSkgewogICAgICAgIHJldHVybiBoYXNDYWxsYmFja3Mo\nc291cmNlLCBtZXRhLCB0eXBlKQogICAgICAgICAgICB8fCBoYXNMaXN0ZW5l\ncnMoc291cmNlLCBtZXRhLCB0eXBlKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiB0cnVlIGlmIGFueSBjYWxsYmFja3MgYXJlIHJlZ2lzdGVyZWQg\nZm9yIHRoZSBnaXZlbiBzb3VyY2UgYW5kCiAgICAgKiBldmVudCB0eXBlLgog\nICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gaGFzQ2FsbGJhY2tzKE9iamVj\ndCBzb3VyY2UsIENsYXNzTWV0YURhdGEgbWV0YSwgaW50IHR5cGUpIHsKICAg\nICAgICBMaWZlY3ljbGVDYWxsYmFja3NbXSBjYWxsYmFja3MgPSBtZXRhLmdl\ndExpZmVjeWNsZU1ldGFEYXRhKCkuCiAgICAgICAgICAgIGdldENhbGxiYWNr\ncyh0eXBlKTsKICAgICAgICBpZiAoY2FsbGJhY2tzLmxlbmd0aCA9PSAwKQog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlm\nIChjYWxsYmFja3NbaV0uaGFzQ2FsbGJhY2soc291cmNlLCB0eXBlKSkKICAg\nICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBmYWxz\nZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIGFueSBs\naXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgZm9yIHRoZSBnaXZlbiBzb3VyY2Ug\nYW5kCiAgICAgKiBldmVudCB0eXBlLgogICAgICovCiAgICBwcml2YXRlIGJv\nb2xlYW4gaGFzTGlzdGVuZXJzKE9iamVjdCBzb3VyY2UsCiAgICAgICAgQ2xh\nc3NNZXRhRGF0YSBtZXRhLCBpbnQgdHlwZSkgewogICAgICAgIGlmIChtZXRh\nLmdldExpZmVjeWNsZU1ldGFEYXRhKCkuZ2V0SWdub3JlU3lzdGVtTGlzdGVu\nZXJzKCkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAo\nZmlyZUV2ZW50KG51bGwsIHNvdXJjZSwgbnVsbCwgdHlwZSwgX2xpc3RlbmVy\ncywgdHJ1ZSwgbnVsbCkgPT0gQm9vbGVhbi5UUlVFKQogICAgICAgICAgICBy\nZXR1cm4gdHJ1ZTsKICAgICAgICBMaXN0ZW5lckxpc3Qgc3lzdGVtID0gbWV0\nYS5nZXRSZXBvc2l0b3J5KCkuZ2V0U3lzdGVtTGlzdGVuZXJzKCk7CiAgICAg\nICAgaWYgKCFzeXN0ZW0uaXNFbXB0eSgpICYmIGZpcmVFdmVudChudWxsLCBz\nb3VyY2UsIG51bGwsIHR5cGUsIHN5c3RlbSwKICAgICAgICAgICAgdHJ1ZSwg\nbnVsbCkgPT0gQm9vbGVhbi5UUlVFKQogICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICBpZiAoX2NsYXNzTGlzdGVuZXJzICE9IG51bGwpIHsKICAg\nICAgICAgICAgQ2xhc3M8Pz4gYyA9IHNvdXJjZSA9PSBudWxsID8gbWV0YS5n\nZXREZXNjcmliZWRUeXBlKCkgOiBzb3VyY2UuZ2V0Q2xhc3MoKTsKICAgICAg\nICAgICAgZG8gewogICAgICAgICAgICAgICAgaWYgKGZpcmVFdmVudChudWxs\nLCBzb3VyY2UsIG51bGwsIHR5cGUsIChMaXN0ZW5lckxpc3QpCiAgICAgICAg\nICAgICAgICAgICAgX2NsYXNzTGlzdGVuZXJzLmdldChjKSwgdHJ1ZSwgbnVs\nbCkgPT0gQm9vbGVhbi5UUlVFKQogICAgICAgICAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgICAgICAgICAgYyA9IGMuZ2V0U3VwZXJjbGFzcygp\nOwogICAgICAgICAgICB9IHdoaWxlIChjICE9IG51bGwgJiYgYyAhPSBPYmpl\nY3QuY2xhc3MpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBGaXJlIGxpZmVjeWNsZSBldmVudCB0byBh\nbGwgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMgd2l0aG91dCBhbiBhcmd1bWVudC4K\nICAgICAqLwogICAgcHVibGljIEV4Y2VwdGlvbltdIGZpcmVFdmVudChPYmpl\nY3Qgc291cmNlLAogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSwgaW50IHR5\ncGUpIHsKICAgICAgICByZXR1cm4gZmlyZUV2ZW50KHNvdXJjZSwgbnVsbCwg\nbWV0YSwgdHlwZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaXJlIGxpZmVj\neWNsZSBldmVudCB0byBhbGwgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuCiAgICAg\nKi8KICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgRXhjZXB0aW9uW10gZmlyZUV2\nZW50KE9iamVjdCBzb3VyY2UsIE9iamVjdCByZWxhdGVkLAogICAgICAgIENs\nYXNzTWV0YURhdGEgbWV0YSwgaW50IHR5cGUpIHsKICAgICAgICBib29sZWFu\nIHJlZW50cmFudCA9IF9maXJpbmc7CiAgICAgICAgX2ZpcmluZyA9IHRydWU7\nCiAgICAgICAgTGlzdDxFeGNlcHRpb24+IGV4Y2VwdGlvbnMgPSAocmVlbnRy\nYW50KSA/IG5ldyBMaW5rZWRMaXN0PEV4Y2VwdGlvbj4oKSA6IF9leGNlcHM7\nCiAgICAgICAgTWV0YURhdGFEZWZhdWx0cyBkZWYgPSBtZXRhLmdldFJlcG9z\naXRvcnkoKS5nZXRNZXRhRGF0YUZhY3RvcnkoKS4KICAgICAgICAgICAgZ2V0\nRGVmYXVsdHMoKTsKCiAgICAgICAgYm9vbGVhbiBjYWxsYmFja3MgPSBkZWYu\nZ2V0Q2FsbGJhY2tzQmVmb3JlTGlzdGVuZXJzKHR5cGUpOwogICAgICAgIGlm\nIChjYWxsYmFja3MpCiAgICAgICAgICAgIG1ha2VDYWxsYmFja3Moc291cmNl\nLCByZWxhdGVkLCBtZXRhLCB0eXBlLCBleGNlcHRpb25zKTsKCiAgICAgICAg\nTGlmZWN5Y2xlRXZlbnQgZXYgPSAoTGlmZWN5Y2xlRXZlbnQpIGZpcmVFdmVu\ndChudWxsLCBzb3VyY2UsIHJlbGF0ZWQsCiAgICAgICAgICAgIHR5cGUsIF9s\naXN0ZW5lcnMsIGZhbHNlLCBleGNlcHRpb25zKTsKCiAgICAgICAgaWYgKF9j\nbGFzc0xpc3RlbmVycyAhPSBudWxsKSB7CiAgICAgICAgICAgIENsYXNzPD8+\nIGMgPSBzb3VyY2UgPT0gbnVsbCA/IG1ldGEuZ2V0RGVzY3JpYmVkVHlwZSgp\nIDogc291cmNlLmdldENsYXNzKCk7CiAgICAgICAgICAgIGRvIHsKICAgICAg\nICAgICAgICAgIGV2ID0gKExpZmVjeWNsZUV2ZW50KSBmaXJlRXZlbnQoZXYs\nIHNvdXJjZSwgcmVsYXRlZCwgdHlwZSwKICAgICAgICAgICAgICAgICAgICAo\nTGlzdGVuZXJMaXN0KSBfY2xhc3NMaXN0ZW5lcnMuZ2V0KGMpLCBmYWxzZSwg\nZXhjZXB0aW9ucyk7CiAgICAgICAgICAgICAgICBjID0gYy5nZXRTdXBlcmNs\nYXNzKCk7CiAgICAgICAgICAgIH0gd2hpbGUgKGMgIT0gbnVsbCAmJiBjICE9\nIE9iamVjdC5jbGFzcyk7CiAgICAgICAgfQoKICAgICAgICAvLyBtYWtlIHN5\nc3RlbSBsaXN0ZW5lcnMKICAgICAgICBpZiAoIW1ldGEuZ2V0TGlmZWN5Y2xl\nTWV0YURhdGEoKS5nZXRJZ25vcmVTeXN0ZW1MaXN0ZW5lcnMoKSkgewogICAg\nICAgICAgICBMaXN0ZW5lckxpc3Qgc3lzdGVtID0gbWV0YS5nZXRSZXBvc2l0\nb3J5KCkuZ2V0U3lzdGVtTGlzdGVuZXJzKCk7CiAgICAgICAgICAgIGZpcmVF\ndmVudChldiwgc291cmNlLCByZWxhdGVkLCB0eXBlLCBzeXN0ZW0sIGZhbHNl\nLCBleGNlcHRpb25zKTsKICAgICAgICB9CgogICAgICAgIGlmICghY2FsbGJh\nY2tzKQogICAgICAgICAgICBtYWtlQ2FsbGJhY2tzKHNvdXJjZSwgcmVsYXRl\nZCwgbWV0YSwgdHlwZSwgZXhjZXB0aW9ucyk7CgogICAgICAgIC8vIGNyZWF0\nZSByZXR1cm4gYXJyYXkgYmVmb3JlIGNsZWFyaW5nIGV4Y2VwdGlvbnMKICAg\nICAgICBFeGNlcHRpb25bXSByZXQ7CiAgICAgICAgaWYgKGV4Y2VwdGlvbnMu\naXNFbXB0eSgpKQogICAgICAgICAgICByZXQgPSBFTVBUWV9FWENFUFRJT05T\nOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0ID0gKEV4Y2VwdGlvbltd\nKSBleGNlcHRpb25zLnRvQXJyYXkKICAgICAgICAgICAgICAgIChuZXcgRXhj\nZXB0aW9uW2V4Y2VwdGlvbnMuc2l6ZSgpXSk7CgogICAgICAgIC8vIGlmIHRo\naXMgd2Fzbid0IGEgcmVlbnRyYW50IGNhbGwsIGNhdGNoIHVwIHdpdGggY2Fs\nbHMgdG8gYWRkCiAgICAgICAgLy8gYW5kIHJlbW92ZSBsaXN0ZW5lcnMgbWFk\nZSB3aGlsZSBmaXJpbmcKICAgICAgICBpZiAoIXJlZW50cmFudCkgewogICAg\nICAgICAgICBfZmlyaW5nID0gZmFsc2U7CiAgICAgICAgICAgIF9mYWlsID0g\nZmFsc2U7CiAgICAgICAgICAgIGlmICghX2FkZExpc3RlbmVycy5pc0VtcHR5\nKCkpCiAgICAgICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPE9iamVjdD4gaXRy\nID0gX2FkZExpc3RlbmVycy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykK\nICAgICAgICAgICAgICAgICAgICBhZGRMaXN0ZW5lcihpdHIubmV4dCgpLCAo\nQ2xhc3NbXSkgaXRyLm5leHQoKSk7CiAgICAgICAgICAgIGlmICghX3JlbUxp\nc3RlbmVycy5pc0VtcHR5KCkpCiAgICAgICAgICAgICAgICBmb3IgKEl0ZXJh\ndG9yPE9iamVjdD4gaXRyID0gX3JlbUxpc3RlbmVycy5pdGVyYXRvcigpOyBp\ndHIuaGFzTmV4dCgpOykKICAgICAgICAgICAgICAgICAgICByZW1vdmVMaXN0\nZW5lcihpdHIubmV4dCgpKTsKICAgICAgICAgICAgX2FkZExpc3RlbmVycy5j\nbGVhcigpOwogICAgICAgICAgICBfcmVtTGlzdGVuZXJzLmNsZWFyKCk7CiAg\nICAgICAgICAgIF9leGNlcHMuY2xlYXIoKTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIHJldDsKICAgIH0KCiAgICAvKioKICAgICAqIE1ha2UgY2FsbGJh\nY2tzLCByZWNvcmRpbmcgYW55IGV4Y2VwdGlvbnMgaW4gdGhlIGdpdmVuIGNv\nbGxlY3Rpb24uCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBtYWtlQ2FsbGJh\nY2tzKE9iamVjdCBzb3VyY2UsIE9iamVjdCByZWxhdGVkLAogICAgICAgIENs\nYXNzTWV0YURhdGEgbWV0YSwgaW50IHR5cGUsIENvbGxlY3Rpb248RXhjZXB0\naW9uPiBleGNlcHRpb25zKSB7CiAgICAgICAgLy8gbWFrZSBsaWZlY3ljbGUg\nY2FsbGJhY2tzCiAgICAgICAgTGlmZWN5Y2xlQ2FsbGJhY2tzW10gY2FsbGJh\nY2tzID0gbWV0YS5nZXRMaWZlY3ljbGVNZXRhRGF0YSgpLgogICAgICAgICAg\nICBnZXRDYWxsYmFja3ModHlwZSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nICFfZmFpbCAmJiBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjYWxsYmFja3NbaV0ubWFr\nZUNhbGxiYWNrKHNvdXJjZSwgcmVsYXRlZCwgdHlwZSk7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBleGNl\ncHRpb25zLmFkZChlKTsKICAgICAgICAgICAgICAgIGlmIChfZmFpbEZhc3Qp\nCiAgICAgICAgICAgICAgICAgICAgX2ZhaWwgPSB0cnVlOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRmlyZSBhbiBl\ndmVudCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHR5cGUgdG8gdGhlIGdp\ndmVuIGxpc3Qgb2YKICAgICAqIGxpc3RlbmVycy4gVGhlIGV2ZW50IG1heSBo\nYXZlIGFscmVhZHkgYmVlbiBjb25zdHJ1Y3RlZC4KICAgICAqLwogICAgcHJp\ndmF0ZSBPYmplY3QgZmlyZUV2ZW50KExpZmVjeWNsZUV2ZW50IGV2LCBPYmpl\nY3Qgc291cmNlLCBPYmplY3QgcmVsLAogICAgICAgIGludCB0eXBlLCBMaXN0\nZW5lckxpc3QgbGlzdGVuZXJzLCBib29sZWFuIG1vY2ssIExpc3Q8RXhjZXB0\naW9uPiBleGNlcHRpb25zKSB7CiAgICAgICAgaWYgKGxpc3RlbmVycyA9PSBu\ndWxsIHx8ICFsaXN0ZW5lcnMuaGFzTGlzdGVuZXJzKHR5cGUpKQogICAgICAg\nICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgT2JqZWN0IGxpc3RlbmVyOwog\nICAgICAgIGJvb2xlYW4gcmVzcG9uZHM7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDAsIHNpemUgPSBsaXN0ZW5lcnMuc2l6ZSgpOyAhX2ZhaWwgJiYgaSA8IHNp\nemU7IGkrKykgewogICAgICAgICAgICBsaXN0ZW5lciA9IGxpc3RlbmVycy5n\nZXQoaSk7CiAgICAgICAgICAgIGlmIChzaXplID09IDEpCiAgICAgICAgICAg\nICAgICByZXNwb25kcyA9IHRydWU7CiAgICAgICAgICAgIGVsc2UgaWYgKGxp\nc3RlbmVyIGluc3RhbmNlb2YgTGlzdGVuZXJBZGFwdGVyKSB7CiAgICAgICAg\nICAgICAgICByZXNwb25kcyA9ICgoTGlzdGVuZXJBZGFwdGVyKSBsaXN0ZW5l\ncikucmVzcG9uZHNUbyh0eXBlKTsKICAgICAgICAgICAgICAgIGlmICghcmVz\ncG9uZHMpCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAg\nICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXNwb25kcyA9IGZhbHNl\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAg\nICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNl\nIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9DTEVBUjoKICAgICAgICAgICAgICAg\nICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkFGVEVSX0NMRUFSOgogICAgICAg\nICAgICAgICAgICAgICAgICBpZiAocmVzcG9uZHMgfHwgbGlzdGVuZXIgaW5z\ndGFuY2VvZiBDbGVhckxpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBpZiAobW9jaykKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gQm9vbGVhbi5UUlVFOwogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgaWYgKGV2ID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgZXYgPSBuZXcgTGlmZWN5Y2xlRXZlbnQoc291cmNlLCB0\neXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09\nIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9DTEVBUikKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAoKENsZWFyTGlzdGVuZXIpIGxpc3RlbmVyKS5i\nZWZvcmVDbGVhcihldik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBl\nbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChDbGVhckxp\nc3RlbmVyKSBsaXN0ZW5lcikuYWZ0ZXJDbGVhcihldik7CiAgICAgICAgICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5CRUZP\nUkVfUEVSU0lTVDoKICAgICAgICAgICAgICAgICAgICBjYXNlIExpZmVjeWNs\nZUV2ZW50LkFGVEVSX1BFUlNJU1Q6CiAgICAgICAgICAgICAgICAgICAgICAg\nIGlmIChyZXNwb25kcyB8fCBsaXN0ZW5lciBpbnN0YW5jZW9mIFBlcnNpc3RM\naXN0ZW5lcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1v\nY2spCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJv\nb2xlYW4uVFJVRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChl\ndiA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2\nID0gbmV3IExpZmVjeWNsZUV2ZW50KHNvdXJjZSwgdHlwZSk7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSBMaWZlY3ljbGVFdmVu\ndC5CRUZPUkVfUEVSU0lTVCkKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAoKFBlcnNpc3RMaXN0ZW5lcikgbGlzdGVuZXIpLmJlZm9yZVBlcnNp\nc3QoZXYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoUGVyc2lzdExpc3RlbmVy\nKSBsaXN0ZW5lcikuYWZ0ZXJQZXJzaXN0KGV2KTsKICAgICAgICAgICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9E\nRUxFVEU6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVu\ndC5BRlRFUl9ERUxFVEU6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChy\nZXNwb25kcyB8fCBsaXN0ZW5lciBpbnN0YW5jZW9mIERlbGV0ZUxpc3RlbmVy\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9jaykKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbi5U\nUlVFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ID09IG51\nbGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYgPSBuZXcg\nTGlmZWN5Y2xlRXZlbnQoc291cmNlLCB0eXBlKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGlmICh0eXBlID09IExpZmVjeWNsZUV2ZW50LkJFRk9S\nRV9ERUxFVEUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChE\nZWxldGVMaXN0ZW5lcikgbGlzdGVuZXIpLmJlZm9yZURlbGV0ZShldik7CiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgKChEZWxldGVMaXN0ZW5lcikgbGlzdGVuZXIp\nLmFmdGVyRGVsZXRlKGV2KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAg\nICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9ESVJUWToKICAgICAg\nICAgICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkFGVEVSX0RJUlRZ\nOgogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQkVG\nT1JFX0RJUlRZX0ZMVVNIRUQ6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBM\naWZlY3ljbGVFdmVudC5BRlRFUl9ESVJUWV9GTFVTSEVEOgogICAgICAgICAg\nICAgICAgICAgICAgICBpZiAocmVzcG9uZHMgfHwgbGlzdGVuZXIgaW5zdGFu\nY2VvZiBEaXJ0eUxpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBpZiAobW9jaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICByZXR1cm4gQm9vbGVhbi5UUlVFOwogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgaWYgKGV2ID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgZXYgPSBuZXcgTGlmZWN5Y2xlRXZlbnQoc291cmNlLCB0eXBl\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkg\newogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5\nY2xlRXZlbnQuQkVGT1JFX0RJUlRZOgogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAoKERpcnR5TGlzdGVuZXIpIGxpc3RlbmVyKS5iZWZv\ncmVEaXJ0eShldik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNh\nc2UgTGlmZWN5Y2xlRXZlbnQuQUZURVJfRElSVFk6CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICgoRGlydHlMaXN0ZW5lcikgbGlzdGVu\nZXIpLmFmdGVyRGlydHkoZXYpOwogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9ESVJUWV9GTFVTSEVE\nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKERpcnR5\nTGlzdGVuZXIpIGxpc3RlbmVyKQogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgLmJlZm9yZURpcnR5Rmx1c2hlZChldik7CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZlbnQu\nQUZURVJfRElSVFlfRkxVU0hFRDoKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgKChEaXJ0eUxpc3RlbmVyKSBsaXN0ZW5lcikKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZnRlckRpcnR5\nRmx1c2hlZChldik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZl\nbnQuQUZURVJfTE9BRDoKICAgICAgICAgICAgICAgICAgICBjYXNlIExpZmVj\neWNsZUV2ZW50LkFGVEVSX1JFRlJFU0g6CiAgICAgICAgICAgICAgICAgICAg\nICAgIGlmIChyZXNwb25kcyB8fCBsaXN0ZW5lciBpbnN0YW5jZW9mIExvYWRM\naXN0ZW5lcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1v\nY2spCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJv\nb2xlYW4uVFJVRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChl\ndiA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2\nID0gbmV3IExpZmVjeWNsZUV2ZW50KHNvdXJjZSwgdHlwZSk7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSBMaWZlY3ljbGVFdmVu\ndC5BRlRFUl9MT0FEKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICgoTG9hZExpc3RlbmVyKSBsaXN0ZW5lcikuYWZ0ZXJMb2FkKGV2KTsKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAoKExvYWRMaXN0ZW5lcikgbGlzdGVuZXIpLmFm\ndGVyUmVmcmVzaChldik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAg\nICAgY2FzZSBMaWZlY3ljbGVFdmVudC5CRUZPUkVfU1RPUkU6CiAgICAgICAg\nICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRFUl9TVE9SRToK\nICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbmRzIHx8IGxpc3Rl\nbmVyIGluc3RhbmNlb2YgU3RvcmVMaXN0ZW5lcikgewogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgaWYgKG1vY2spCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4uVFJVRTsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGlmIChldiA9PSBudWxsKQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGV2ID0gbmV3IExpZmVjeWNsZUV2ZW50KHNv\ndXJjZSwgdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo\ndHlwZSA9PSBMaWZlY3ljbGVFdmVudC5CRUZPUkVfU1RPUkUpCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKChTdG9yZUxpc3RlbmVyKSBsaXN0\nZW5lcikuYmVmb3JlU3RvcmUoZXYpOwogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgo\nU3RvcmVMaXN0ZW5lcikgbGlzdGVuZXIpLmFmdGVyU3RvcmUoZXYpOwogICAg\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZl\nbnQuQkVGT1JFX0RFVEFDSDoKICAgICAgICAgICAgICAgICAgICBjYXNlIExp\nZmVjeWNsZUV2ZW50LkFGVEVSX0RFVEFDSDoKICAgICAgICAgICAgICAgICAg\nICAgICAgaWYgKHJlc3BvbmRzIHx8IGxpc3RlbmVyIGluc3RhbmNlb2YgRGV0\nYWNoTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlm\nIChtb2NrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVy\nbiBCb29sZWFuLlRSVUU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBp\nZiAoZXYgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBldiA9IG5ldyBMaWZlY3ljbGVFdmVudChzb3VyY2UsIHJlbCwgdHlwZSk7\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSBMaWZl\nY3ljbGVFdmVudC5CRUZPUkVfREVUQUNIKQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICgoRGV0YWNoTGlzdGVuZXIpIGxpc3RlbmVyKS5iZWZv\ncmVEZXRhY2goZXYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxz\nZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoRGV0YWNoTGlz\ndGVuZXIpIGxpc3RlbmVyKS5hZnRlckRldGFjaChldik7CiAgICAgICAgICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5CRUZP\nUkVfQVRUQUNIOgogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xl\nRXZlbnQuQUZURVJfQVRUQUNIOgogICAgICAgICAgICAgICAgICAgICAgICBp\nZiAocmVzcG9uZHMgfHwgbGlzdGVuZXIgaW5zdGFuY2VvZiBBdHRhY2hMaXN0\nZW5lcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vY2sp\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xl\nYW4uVFJVRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldiA9\nPSBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ID0g\nbmV3IExpZmVjeWNsZUV2ZW50KHNvdXJjZSwgcmVsLCB0eXBlKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09IExpZmVjeWNsZUV2\nZW50LkJFRk9SRV9BVFRBQ0gpCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgKChBdHRhY2hMaXN0ZW5lcikgbGlzdGVuZXIpLmJlZm9yZUF0dGFj\naChldik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgKChBdHRhY2hMaXN0ZW5lcikg\nbGlzdGVuZXIpLmFmdGVyQXR0YWNoKGV2KTsKICAgICAgICAgICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAg\nICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRFUl9QRVJT\nSVNUX1BFUkZPUk1FRDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJl\nc3BvbmRzIHx8IGxpc3RlbmVyIGluc3RhbmNlb2YgUG9zdFBlcnNpc3RMaXN0\nZW5lcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vY2sp\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xl\nYW4uVFJVRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldiA9\nPSBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ID0g\nbmV3IExpZmVjeWNsZUV2ZW50KHNvdXJjZSwgcmVsLCB0eXBlKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICgoUG9zdFBlcnNpc3RMaXN0ZW5lcikg\nbGlzdGVuZXIpLmFmdGVyUGVyc2lzdFBlcmZvcm1lZChldik7CiAgICAgICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5C\nRUZPUkVfVVBEQVRFOgogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5\nY2xlRXZlbnQuQUZURVJfVVBEQVRFX1BFUkZPUk1FRDoKICAgICAgICAgICAg\nICAgICAgICAgICAgaWYgKHJlc3BvbmRzIHx8IGxpc3RlbmVyIGluc3RhbmNl\nb2YgVXBkYXRlTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIGlmIChtb2NrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIHJldHVybiBCb29sZWFuLlRSVUU7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBpZiAoZXYgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBldiA9IG5ldyBMaWZlY3ljbGVFdmVudChzb3VyY2UsIHJlbCwg\ndHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9\nPSBMaWZlY3ljbGVFdmVudC5CRUZPUkVfVVBEQVRFKQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICgoVXBkYXRlTGlzdGVuZXIpIGxpc3RlbmVy\nKS5iZWZvcmVVcGRhdGUoZXYpOwogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoVXBk\nYXRlTGlzdGVuZXIpIGxpc3RlbmVyKS5hZnRlclVwZGF0ZVBlcmZvcm1lZChl\ndik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZl\nY3ljbGVFdmVudC5BRlRFUl9ERUxFVEVfUEVSRk9STUVEOgogICAgICAgICAg\nICAgICAgICAgICAgICBpZiAocmVzcG9uZHMgfHwgbGlzdGVuZXIgaW5zdGFu\nY2VvZiBQb3N0RGVsZXRlTGlzdGVuZXIpewogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgaWYgKG1vY2spCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgcmV0dXJuIEJvb2xlYW4uVFJVRTsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGlmIChldiA9PSBudWxsKQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGV2ID0gbmV3IExpZmVjeWNsZUV2ZW50KHNvdXJjZSwg\ncmVsLCB0eXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoUG9z\ndERlbGV0ZUxpc3RlbmVyKSBsaXN0ZW5lcikuYWZ0ZXJEZWxldGVQZXJmb3Jt\nZWQoZXYpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGRlZmF1\nbHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlk\nU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoInVua25vd24tbGlmZWN5Y2xlLWV2\nZW50IiwgSW50ZWdlci50b1N0cmluZyh0eXBlKSkpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICAgICAgZXhjZXB0aW9ucy5hZGQoZSk7CiAg\nICAgICAgICAgICAgICBpZiAoX2ZhaWxGYXN0KQogICAgICAgICAgICAgICAg\nICAgIF9mYWlsID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICByZXR1cm4gZXY7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnRlcmZh\nY2UgdGhhdCBmYWNhZGVzIHRvIG90aGVyIGxpZmVjeWNsZSBsaXN0ZW5lciBp\nbnRlcmZhY2VzIGNhbgogICAgICogaW1wbGVtZW50IHRvIGNob29zZSB3aGlj\naCBldmVudHMgdG8gcmVzcG9uZCB0byBiYXNlZCBvbiB0aGVpciBkZWxlZ2F0\nZS4KICAgICAqIFRoaXMgaXMgbW9yZSBlZmZpY2llbnQgdGhhbiByZWdpc3Rl\ncmluZyBhcyBhIGxpc3RlbmVyIGZvciBhbGwgZXZlbnRzCiAgICAgKiBidXQg\nb25seSByZXNwb25kaW5nIHRvIHNvbWUuCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgaW50ZXJmYWNlIExpc3RlbmVyQWRhcHRlciB7CgogICAgICAgIC8q\nKgogICAgICAgICAqIFJldHVybiB3aGV0aGVyIHRoaXMgaW5zdGFuY2UgcmVz\ncG9uZHMgdG8gdGhlIGdpdmVuIGV2ZW50IHR5cGUgZnJvbQogICAgICAgICAq\nIHtAbGluayBMaWZlY3ljbGVFdmVudH0uCiAgICAgICAgICovCiAgICAgICAg\ncHVibGljIGJvb2xlYW4gcmVzcG9uZHNUbyhpbnQgZXZlbnRUeXBlKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEV4dGVuZGVkIGxpc3QgdGhhdCB0cmFja3Mg\nd2hhdCBldmVudCB0eXBlcyBpdHMgZWxlbWVudHMgY2FyZSBhYm91dC4KICAg\nICAqIE1haW50YWlucyBzZXQgc2VtYW50aWNzIGFzIHdlbGwuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTGlzdGVuZXJMaXN0IGV4dGVuZHMg\nQXJyYXlMaXN0PE9iamVjdD4gewoKICAgICAgICBwcml2YXRlIGludCBfdHlw\nZXMgPSAwOwoKICAgICAgICBwdWJsaWMgTGlzdGVuZXJMaXN0KGludCBzaXpl\nKSB7CiAgICAgICAgICAgIHN1cGVyKHNpemUpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIExpc3RlbmVyTGlzdChMaXN0ZW5lckxpc3QgY29weSkgewog\nICAgICAgICAgICBzdXBlcihjb3B5KTsKICAgICAgICAgICAgX3R5cGVzID0g\nY29weS5fdHlwZXM7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVh\nbiBoYXNMaXN0ZW5lcnMoaW50IHR5cGUpIHsKICAgICAgICAgICAgcmV0dXJu\nIChfdHlwZXMgJiAoMiA8PCB0eXBlKSkgPiAwOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIGJvb2xlYW4gYWRkKE9iamVjdCBsaXN0ZW5lcikgewogICAg\nICAgICAgICBpZiAoY29udGFpbnMobGlzdGVuZXIpKQogICAgICAgICAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICBzdXBlci5hZGQobGlzdGVu\nZXIpOwogICAgICAgICAgICBfdHlwZXMgfD0gZ2V0RXZlbnRUeXBlcyhsaXN0\nZW5lcik7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIGJvb2xlYW4gcmVtb3ZlKE9iamVjdCBsaXN0ZW5lcikg\newogICAgICAgICAgICBpZiAoIXN1cGVyLnJlbW92ZShsaXN0ZW5lcikpCiAg\nICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICAvLyBy\nZWNvbXB1dGUgdHlwZXMgbWFzawogICAgICAgICAgICBfdHlwZXMgPSAwOwog\nICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNpemUoKTsgaSsrKQog\nICAgICAgICAgICAgICAgX3R5cGVzIHw9IGdldEV2ZW50VHlwZXMoZ2V0KGkp\nKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAg\nICAvKioKICAgICAgICAgKiBSZXR1cm4gYSBtYXNrIG9mIHRoZSBldmVudCB0\neXBlcyB0aGUgZ2l2ZW4gbGlzdGVuZXIgcHJvY2Vzc2VzLgogICAgICAgICAq\nLwogICAgICAgIHByaXZhdGUgc3RhdGljIGludCBnZXRFdmVudFR5cGVzKE9i\namVjdCBsaXN0ZW5lcikgewogICAgICAgICAgICBpbnQgdHlwZXMgPSAwOwog\nICAgICAgICAgICBpZiAobGlzdGVuZXIgaW5zdGFuY2VvZiBMaXN0ZW5lckFk\nYXB0ZXIpIHsKICAgICAgICAgICAgICAgIExpc3RlbmVyQWRhcHRlciBhZGFw\ndGVyID0gKExpc3RlbmVyQWRhcHRlcikgbGlzdGVuZXI7CiAgICAgICAgICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IExpZmVjeWNsZUV2ZW50LkFMTF9F\nVkVOVFMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKGFk\nYXB0ZXIucmVzcG9uZHNUbyhMaWZlY3ljbGVFdmVudC5BTExfRVZFTlRTW2ld\nKSkKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBMaWZl\nY3ljbGVFdmVudC5BTExfRVZFTlRTW2ldOwogICAgICAgICAgICAgICAgcmV0\ndXJuIHR5cGVzOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobGlz\ndGVuZXIgaW5zdGFuY2VvZiBQZXJzaXN0TGlzdGVuZXIpIHsKICAgICAgICAg\nICAgICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX1BF\nUlNJU1Q7CiAgICAgICAgICAgICAgICB0eXBlcyB8PSAyIDw8IExpZmVjeWNs\nZUV2ZW50LkFGVEVSX1BFUlNJU1Q7CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgaWYgKGxpc3RlbmVyIGluc3RhbmNlb2YgQ2xlYXJMaXN0ZW5lcikgewog\nICAgICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5C\nRUZPUkVfQ0xFQVI7CiAgICAgICAgICAgICAgICB0eXBlcyB8PSAyIDw8IExp\nZmVjeWNsZUV2ZW50LkFGVEVSX0NMRUFSOwogICAgICAgICAgICB9CiAgICAg\nICAgICAgIGlmIChsaXN0ZW5lciBpbnN0YW5jZW9mIERlbGV0ZUxpc3RlbmVy\nKSB7CiAgICAgICAgICAgICAgICB0eXBlcyB8PSAyIDw8IExpZmVjeWNsZUV2\nZW50LkJFRk9SRV9ERUxFVEU7CiAgICAgICAgICAgICAgICB0eXBlcyB8PSAy\nIDw8IExpZmVjeWNsZUV2ZW50LkFGVEVSX0RFTEVURTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICBpZiAobGlzdGVuZXIgaW5zdGFuY2VvZiBEaXJ0eUxp\nc3RlbmVyKSB7CiAgICAgICAgICAgICAgICB0eXBlcyB8PSAyIDw8IExpZmVj\neWNsZUV2ZW50LkJFRk9SRV9ESVJUWTsKICAgICAgICAgICAgICAgIHR5cGVz\nIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQUZURVJfRElSVFk7CiAgICAgICAg\nICAgICAgICB0eXBlcyB8PSAyIDw8IExpZmVjeWNsZUV2ZW50LkJFRk9SRV9E\nSVJUWV9GTFVTSEVEOwogICAgICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBM\naWZlY3ljbGVFdmVudC5BRlRFUl9ESVJUWV9GTFVTSEVEOwogICAgICAgICAg\nICB9CiAgICAgICAgICAgIGlmIChsaXN0ZW5lciBpbnN0YW5jZW9mIExvYWRM\naXN0ZW5lcikgewogICAgICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBMaWZl\nY3ljbGVFdmVudC5BRlRFUl9MT0FEOwogICAgICAgICAgICAgICAgdHlwZXMg\nfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5BRlRFUl9SRUZSRVNIOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIGlmIChsaXN0ZW5lciBpbnN0YW5jZW9mIFN0\nb3JlTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIHR5cGVzIHw9IDIgPDwg\nTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX1NUT1JFOwogICAgICAgICAgICAgICAg\ndHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5BRlRFUl9TVE9SRTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBpZiAobGlzdGVuZXIgaW5zdGFuY2Vv\nZiBEZXRhY2hMaXN0ZW5lcikgewogICAgICAgICAgICAgICAgdHlwZXMgfD0g\nMiA8PCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfREVUQUNIOwogICAgICAgICAg\nICAgICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5BRlRFUl9ERVRB\nQ0g7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxpc3RlbmVyIGlu\nc3RhbmNlb2YgQXR0YWNoTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIHR5\ncGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0FUVEFDSDsKICAg\nICAgICAgICAgICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQUZU\nRVJfQVRUQUNIOwoJCQl9CgkJCXJldHVybiB0eXBlczsKCQl9Cgl9Cn0K\n","encoding":"base64"}

