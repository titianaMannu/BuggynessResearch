{"sha":"a6dc13385f209f9611b85a9fa5fc2f2cacacddea","node_id":"MDQ6QmxvYjIwNjM2NDphNmRjMTMzODVmMjA5Zjk2MTFiODVhOWZhNWZjMmYyY2FjYWNkZGVh","size":9776,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a6dc13385f209f9611b85a9fa5fc2f2cacacddea","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbDsKCmltcG9ydCBqYXZh\nLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CmltcG9ydCBqYXZhLnRleHQu\nTWVzc2FnZUZvcm1hdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9y\ndCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5JdGVy\nYXRvcjsKaW1wb3J0IGphdmEudXRpbC5Mb2NhbGU7CmltcG9ydCBqYXZhLnV0\naWwuTWFwOwppbXBvcnQgamF2YS51dGlsLk1pc3NpbmdSZXNvdXJjZUV4Y2Vw\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5Qcm9wZXJ0aWVzOwppbXBvcnQgamF2\nYS51dGlsLlJlc291cmNlQnVuZGxlOwoKaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLmNv\nbmN1cnJlbnQuQ29weU9uV3JpdGVBcnJheVNldDsKCi8qKgogKiBUaGUgTG9j\nYWxpemVyIHByb3ZpZGVzIGNvbnZlbmllbnQgYWNjZXNzIHRvIGxvY2FsaXpl\nZAogKiBzdHJpbmdzLiBJdCBpbmxjdWRlcyBidWlsdC1pbiBzdXBwb3J0IGZv\nciBwYXJhbWV0ZXIgc3Vic3RpdHV0aW9uIHRocm91Z2gKICogdGhlIHVzZSBv\nZiB0aGUge0BsaW5rIE1lc3NhZ2VGb3JtYXR9IHV0aWxpdHkuCiAqIFN0cmlu\nZ3MgYXJlIHN0b3JlZCBpbiBwZXItcGFja2FnZSB7QGxpbmsgUHJvcGVydGll\nc30gZmlsZXMuCiAqIFRoZSBwcm9wZXJ0eSBmaWxlIGZvciB0aGUgZGVmYXVs\ndCBsb2NhbGUgbXVzdCBiZSBuYW1lZAogKiA8Y29kZT5sb2NhbGl6ZXIucHJv\ncGVydGllczwvY29kZT4uIEFkZGl0aW9uYWwgbG9jYWxlcyBjYW4gYmUgc3Vw\ncG9ydGVkCiAqIHRocm91Z2ggYWRkaXRpb25hbCBwcm9wZXJ0eSBmaWxlcyB1\nc2luZyB0aGUgbmFtaW5nIGNvbnZlbnRpb25zIHNwZWNpZmllZAogKiBpbiB0\naGUge0BsaW5rIFJlc291cmNlQnVuZGxlfSBjbGFzcy4gRm9yIGV4YW1wbGUs\nIHRoZSBnZXJtYW4gbG9jYWxlCiAqIGNvdWxkIGJlIHN1cHBvcnRlZCB0aHJv\ndWdoIGEgPGNvZGU+bG9jYWxpemVyX2RlX0RFLnByb3BlcnRpZXM8L2NvZGU+\nIGZpbGUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xh\nc3MgTG9jYWxpemVyIHsKCiAgICAvLyBzdGF0aWMgY2FjaGUgb2YgcGFja2Fn\nZStsb2MgbmFtZSB0byBsb2NhbGl6ZXIgbWFwcGluZ3MKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIE1hcDxTdHJpbmcsTG9jYWxpemVyPiBfbG9jYWxpemVy\ncyA9IG5ldyBDb25jdXJyZW50SGFzaE1hcDxTdHJpbmcsTG9jYWxpemVyPigp\nOwoKICAgIC8vIGxpc3Qgb2YgcmVzb3VyY2UgcHJvdmlkZXJzIHRvIGRlbGVn\nYXRlIHRvIHdoZW4gbG9jYXRpbmcgcmVzb3VyY2VzCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBDb2xsZWN0aW9uPFJlc291cmNlQnVuZGxlUHJvdmlkZXI+\nIF9wcm92aWRlcnMgPSAKICAgICAgICBuZXcgQ29weU9uV3JpdGVBcnJheVNl\ndDxSZXNvdXJjZUJ1bmRsZVByb3ZpZGVyPgogICAgICAgIChBcnJheXMuYXNM\naXN0KG5ldyBSZXNvdXJjZUJ1bmRsZVByb3ZpZGVyW117CiAgICAgICAgICAg\nIG5ldyBTaW1wbGVSZXNvdXJjZUJ1bmRsZVByb3ZpZGVyKCksCiAgICAgICAg\nICAgIG5ldyBTdHJlYW1SZXNvdXJjZUJ1bmRsZVByb3ZpZGVyKCksCiAgICAg\nICAgICAgIG5ldyBaaXBSZXNvdXJjZUJ1bmRsZVByb3ZpZGVyKCksIH0pKTsK\nCiAgICAvKioKICAgICAqIFJldHVybiBhIExvY2FsaXplciBpbnN0YW5jZSB0\naGF0IHdpbGwgYWNjZXNzIHRoZSBwcm9wZXJ0aWVzIGZpbGUKICAgICAqIGlu\nIHRoZSBwYWNrYWdlIG9mIHRoZSBnaXZlbiBjbGFzcyB1c2luZyB0aGUgc3lz\ndGVtIGRlZmF1bHQgbG9jYWxlLgogICAgICoKICAgICAqIEBzZWUgI2ZvclBh\nY2thZ2UoQ2xhc3MsTG9jYWxlKQogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIExvY2FsaXplciBmb3JQYWNrYWdlKENsYXNzPD8+IGNscykgewogICAgICAg\nIHJldHVybiBmb3JQYWNrYWdlKGNscywgbnVsbCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gYSBMb2NhbGl6ZXIgaW5zdGFuY2UgdGhhdCB3aWxs\nIGFjY2VzcyB0aGUgcHJvcGVydGllcyBmaWxlCiAgICAgKiBpbiB0aGUgcGFj\na2FnZSBvZiB0aGUgZ2l2ZW4gY2xhc3MgdXNpbmcgdGhlIGdpdmVuIGxvY2Fs\nZS4KICAgICAqCiAgICAgKiBAcGFyYW0gY2xzIHRoZSBjbGFzcyB3aG9zZSBw\nYWNrYWdlIHRvIGNoZWNrIGZvciB0aGUgbG9jYWxpemVkCiAgICAgKiBwcm9w\nZXJ0aWVzIGZpbGU7IGlmIG51bGwsIHRoZSBzeXN0ZW0gd2lsbCBjaGVjayBm\nb3IKICAgICAqIGEgdG9wLWxldmVsIHByb3BlcnRpZXMgZmlsZQogICAgICog\nQHBhcmFtIGxvY2FsZSB0aGUgbG9jYWxlIHRvIHdoaWNoIHN0cmluZ3Mgc2hv\ndWxkIGJlIGxvY2FsaXplZDsgaWYKICAgICAqIG51bGwsIHRoZSBzeXN0ZW0g\nZGVmYXVsdCB3aWxsIGJlIGFzc3VtZWQKICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBMb2NhbGl6ZXIgZm9yUGFja2FnZShDbGFzczw/PiBjbHMsIExvY2Fs\nZSBsb2NhbGUpIHsKICAgICAgICBpZiAobG9jYWxlID09IG51bGwpCiAgICAg\nICAgICAgIGxvY2FsZSA9IExvY2FsZS5nZXREZWZhdWx0KCk7CgogICAgICAg\nIGludCBkb3QgPSAoY2xzID09IG51bGwpID8gLTEgOiBjbHMuZ2V0TmFtZSgp\nLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgICAgU3RyaW5nIHBrZzsKICAgICAg\nICBTdHJpbmcgZmlsZTsKICAgICAgICBpZiAoZG90ID09IC0xKSB7CiAgICAg\nICAgICAgIHBrZyA9ICIiOwogICAgICAgICAgICBmaWxlID0gImxvY2FsaXpl\nciI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcGtnID0gY2xzLmdl\ndE5hbWUoKS5zdWJzdHJpbmcoMCwgZG90KTsKICAgICAgICAgICAgZmlsZSA9\nIHBrZyArICIubG9jYWxpemVyIjsKICAgICAgICB9CiAgICAgICAgU3RyaW5n\nIGtleSA9IGZpbGUgKyBsb2NhbGUudG9TdHJpbmcoKTsKCiAgICAgICAgLy8g\nbm8gbG9ja2luZzsgb2sgaWYgYnVuZGxlIGNyZWF0ZWQgbXVsdGlwbGUgdGlt\nZXMKICAgICAgICAvLyBjaGVjayBmb3IgY2FjaGVkIHZlcnNpb24KICAgICAg\nICBMb2NhbGl6ZXIgbG9jID0gKExvY2FsaXplcikgX2xvY2FsaXplcnMuZ2V0\nKGtleSk7CiAgICAgICAgaWYgKGxvYyAhPSBudWxsKQogICAgICAgICAgICBy\nZXR1cm4gbG9jOwogICAgICAgIGVsc2UgewogICAgICAgICAgICBsb2MgPSBu\nZXcgTG9jYWxpemVyKHBrZywgZmlsZSwgbG9jYWxlLAogICAgICAgICAgICAg\nICAgY2xzID09IG51bGwgPyBudWxsOkFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2\naWxlZ2VkKAogICAgICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdl\ndENsYXNzTG9hZGVyQWN0aW9uKGNscykpKTsKICAgICAgICAgICAgX2xvY2Fs\naXplcnMucHV0KGtleSwgbG9jKTsKICAgICAgICAgICAgcmV0dXJuIGxvYzsK\nICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWdpc3RlciBhIHJl\nc291cmNlIHByb3ZpZGVyLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZv\naWQgYWRkUHJvdmlkZXIoUmVzb3VyY2VCdW5kbGVQcm92aWRlciBwcm92aWRl\ncikgewogICAgICAgIF9wcm92aWRlcnMuYWRkKHByb3ZpZGVyKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJlbW92ZSBhIHJlc291cmNlIHByb3ZpZGVyLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gcmVtb3ZlUHJvdmlk\nZXIoUmVzb3VyY2VCdW5kbGVQcm92aWRlciBwcm92aWRlcikgewogICAgICAg\nIHJldHVybiBfcHJvdmlkZXJzLnJlbW92ZShwcm92aWRlcik7CiAgICB9Cgog\nICAgcHJpdmF0ZSBTdHJpbmcgX2ZpbGU7CiAgICBwcml2YXRlIFN0cmluZyBf\ncGtnOwogICAgcHJpdmF0ZSBSZXNvdXJjZUJ1bmRsZSBfYnVuZGxlID0gbnVs\nbDsKICAgIHByaXZhdGUgTG9jYWxlIF9sb2NhbGU7CiAgICBwcml2YXRlIENs\nYXNzTG9hZGVyIF9sb2FkZXI7CgogICAgcHJpdmF0ZSBMb2NhbGl6ZXIoU3Ry\naW5nIHBrZywgU3RyaW5nIGYsIExvY2FsZSBsb2NhbGUsIENsYXNzTG9hZGVy\nIGxvYWRlcikgewogICAgICAgIF9wa2cgPSBwa2c7CiAgICAgICAgX2ZpbGUg\nPSBmOwogICAgICAgIF9sb2NhbGUgPSBsb2NhbGU7CiAgICAgICAgX2xvYWRl\nciA9IGxvYWRlcjsKICAgIH0KCiAgICBwcml2YXRlIFJlc291cmNlQnVuZGxl\nIGdldEJ1bmRsZSgpIHsKICAgICAgICAvLyBubyBsb2NraW5nOyBpdCdzIG9r\nIHRvIGNyZWF0ZSBtdWx0aXBsZSBidW5kbGVzCiAgICAgICAgaWYgKF9idW5k\nbGUgPT0gbnVsbCkgewogICAgICAgICAgICAvLyBmaW5kIHJlc291cmNlIGJ1\nbmRsZQogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPFJlc291cmNlQnVuZGxl\nUHJvdmlkZXI+IGl0ciA9IF9wcm92aWRlcnMuaXRlcmF0b3IoKTsKICAgICAg\nICAgICAgICAgIGl0ci5oYXNOZXh0KCkgJiYgX2J1bmRsZSA9PSBudWxsOyAp\nIHsKICAgICAgICAgICAgICAgIF9idW5kbGUgPSBpdHIubmV4dCgpLmZpbmRS\nZXNvdXJjZShfZmlsZSwgX2xvY2FsZSwgX2xvYWRlcik7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9idW5kbGU7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGxvY2FsaXplZCBzdHJpbmcgbWF0\nY2hpbmcgdGhlIGdpdmVuIGtleS4KICAgICAqLwogICAgcHVibGljIE1lc3Nh\nZ2UgZ2V0KFN0cmluZyBrZXkpIHsKICAgICAgICByZXR1cm4gZ2V0KGtleSwg\nbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGxvY2Fs\naXplZCBzdHJpbmcgbWF0Y2hpbmcgdGhlIGdpdmVuIGtleS4KICAgICAqLwog\nICAgcHVibGljIE1lc3NhZ2UgZ2V0RmF0YWwoU3RyaW5nIGtleSkgewogICAg\nICAgIHJldHVybiBnZXRGYXRhbChrZXksIG51bGwpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIG1hdGNoaW5n\nIHRoZSBnaXZlbiBrZXkuIFRoZSBnaXZlbgogICAgICogPGNvZGU+c3ViPC9j\nb2RlPiBvYmplY3Qgd2lsbCBiZSBwYWNrZWQgaW50byBhbiBhcnJheSBhbmQg\nc3Vic3RpdHV0ZWQKICAgICAqIGludG8gdGhlIGZvdW5kIHN0cmluZyBhY2Nv\ncmRpbmcgdG8gdGhlIHJ1bGVzIG9mIHRoZQogICAgICoge0BsaW5rIE1lc3Nh\nZ2VGb3JtYXR9IGNsYXNzLgogICAgICoKICAgICAqIEBzZWUgI2dldChTdHJp\nbmcpCiAgICAgKi8KICAgIHB1YmxpYyBNZXNzYWdlIGdldChTdHJpbmcga2V5\nLCBPYmplY3Qgc3ViKSB7CiAgICAgICAgcmV0dXJuIGdldChrZXksIG5ldyBP\nYmplY3RbXXsgc3ViIH0pOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIG1hdGNoaW5nIHRoZSBnaXZlbiBrZXku\nIFRoZSBnaXZlbgogICAgICogPGNvZGU+c3ViPC9jb2RlPiBvYmplY3Qgd2ls\nbCBiZSBwYWNrZWQgaW50byBhbiBhcnJheSBhbmQgc3Vic3RpdHV0ZWQKICAg\nICAqIGludG8gdGhlIGZvdW5kIHN0cmluZyBhY2NvcmRpbmcgdG8gdGhlIHJ1\nbGVzIG9mIHRoZQogICAgICoge0BsaW5rIE1lc3NhZ2VGb3JtYXR9IGNsYXNz\nLgogICAgICoKICAgICAqIEBzZWUgI2dldEZhdGFsKFN0cmluZykKICAgICAq\nLwogICAgcHVibGljIE1lc3NhZ2UgZ2V0RmF0YWwoU3RyaW5nIGtleSwgT2Jq\nZWN0IHN1YikgewogICAgICAgIHJldHVybiBnZXRGYXRhbChrZXksIG5ldyBP\nYmplY3RbXXsgc3ViIH0pOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIGZvciB0aGUgZ2l2ZW4ga2V5LgogICAg\nICoKICAgICAqIEBzZWUgI2dldChTdHJpbmcsT2JqZWN0KQogICAgICovCiAg\nICBwdWJsaWMgTWVzc2FnZSBnZXQoU3RyaW5nIGtleSwgT2JqZWN0IHN1YjEs\nIE9iamVjdCBzdWIyKSB7CiAgICAgICAgcmV0dXJuIGdldChrZXksIG5ldyBP\nYmplY3RbXXsgc3ViMSwgc3ViMiB9KTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiB0aGUgbG9jYWxpemVkIHN0cmluZyBmb3IgdGhlIGdpdmVuIGtl\neS4KICAgICAqCiAgICAgKiBAc2VlICNnZXRGYXRhbChTdHJpbmcsT2JqZWN0\nKQogICAgICovCiAgICBwdWJsaWMgTWVzc2FnZSBnZXRGYXRhbChTdHJpbmcg\na2V5LCBPYmplY3Qgc3ViMSwgT2JqZWN0IHN1YjIpIHsKICAgICAgICByZXR1\ncm4gZ2V0RmF0YWwoa2V5LCBuZXcgT2JqZWN0W117IHN1YjEsIHN1YjIgfSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGxvY2FsaXplZCBz\ndHJpbmcgZm9yIHRoZSBnaXZlbiBrZXkuCiAgICAgKgogICAgICogQHNlZSAj\nZ2V0KFN0cmluZyxPYmplY3QpCiAgICAgKi8KICAgIHB1YmxpYyBNZXNzYWdl\nIGdldChTdHJpbmcga2V5LCBPYmplY3Qgc3ViMSwgT2JqZWN0IHN1YjIsIE9i\namVjdCBzdWIzKSB7CiAgICAgICAgcmV0dXJuIGdldChrZXksIG5ldyBPYmpl\nY3RbXXsgc3ViMSwgc3ViMiwgc3ViMyB9KTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUgbG9jYWxpemVkIHN0cmluZyBtYXRjaGluZyB0aGUg\nZ2l2ZW4ga2V5LiBUaGUgZ2l2ZW4KICAgICAqIDxjb2RlPnN1YnM8L2NvZGU+\nIG9iamVjdHMgd2lsbCBiZSBzdWJzdGl0dXRlZAogICAgICogaW50byB0aGUg\nZm91bmQgc3RyaW5nIGFjY29yZGluZyB0byB0aGUgcnVsZXMgb2YgdGhlCiAg\nICAgKiB7QGxpbmsgTWVzc2FnZUZvcm1hdH0gY2xhc3MuCiAgICAgKgogICAg\nICogQHNlZSAjZ2V0KFN0cmluZykKICAgICAqLwogICAgcHVibGljIE1lc3Nh\nZ2UgZ2V0KFN0cmluZyBrZXksIE9iamVjdFtdIHN1YnMpIHsKICAgICAgICBy\nZXR1cm4gbmV3IE1lc3NhZ2UoX3BrZywgZ2V0QnVuZGxlKCksIGtleSwgc3Vi\ncywgZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBs\nb2NhbGl6ZWQgc3RyaW5nIG1hdGNoaW5nIHRoZSBnaXZlbiBrZXkuIFRoZSBn\naXZlbgogICAgICogPGNvZGU+c3ViczwvY29kZT4gb2JqZWN0cyB3aWxsIGJl\nIHN1YnN0aXR1dGVkCiAgICAgKiBpbnRvIHRoZSBmb3VuZCBzdHJpbmcgYWNj\nb3JkaW5nIHRvIHRoZSBydWxlcyBvZiB0aGUKICAgICAqIHtAbGluayBNZXNz\nYWdlRm9ybWF0fSBjbGFzcy4KICAgICAqCiAgICAgKiBAc2VlICNnZXRGYXRh\nbChTdHJpbmcpCiAgICAgKi8KICAgIHB1YmxpYyBNZXNzYWdlIGdldEZhdGFs\nKFN0cmluZyBrZXksIE9iamVjdFtdIHN1YnMpIHsKICAgICAgICByZXR1cm4g\nbmV3IE1lc3NhZ2UoX3BrZywgZ2V0QnVuZGxlKCksIGtleSwgc3VicywgdHJ1\nZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBIDxjb2RlPk1lc3NhZ2U8L2Nv\nZGU+IGNhbiBwcm92aWRlIGEgbG9jYWxpemVkIG1lc3NhZ2UgdmlhIHRoZQog\nICAgICoge0BsaW5rICNnZXRNZXNzYWdlfSBtZXRob2QgY2FsbCwgYW5kIGNh\nbiBhbHNvIHByb3ZpZGUgdGhlIG9yaWdpbmFsIGtleSwKICAgICAqIHBhY2th\nZ2UsIGFuZCBzdWJzdGl0dXRpb24gYXJyYXkgdGhhdCB3ZXJlIHVzZWQgdG8g\nYXNzZW1ibGUgdGhlIG1lc3NhZ2UuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgY2xhc3MgTWVzc2FnZSB7CgogICAgICAgIHByaXZhdGUgZmluYWwgU3Ry\naW5nIF9wa2c7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmcgX2tleTsK\nICAgICAgICBwcml2YXRlIGZpbmFsIE9iamVjdFtdIF9zdWJzOwogICAgICAg\nIHByaXZhdGUgZmluYWwgU3RyaW5nIF9sb2NhbGl6ZWRNZXNzYWdlOwoKICAg\nICAgICBwcml2YXRlIE1lc3NhZ2UoU3RyaW5nIHBhY2thZ2VOYW1lLCBSZXNv\ndXJjZUJ1bmRsZSBidW5kbGUsIFN0cmluZyBrZXksCiAgICAgICAgICAgIE9i\namVjdFtdIHN1YnMsIGJvb2xlYW4gZmF0YWwpIHsKICAgICAgICAgICAgaWYg\nKGJ1bmRsZSA9PSBudWxsICYmIGZhdGFsKQogICAgICAgICAgICAgICAgdGhy\nb3cgbmV3IE1pc3NpbmdSZXNvdXJjZUV4Y2VwdGlvbihrZXksIGtleSwga2V5\nKTsKCiAgICAgICAgICAgIF9wa2cgPSBwYWNrYWdlTmFtZTsKICAgICAgICAg\nICAgX2tleSA9IGtleTsKICAgICAgICAgICAgX3N1YnMgPSBzdWJzOwogICAg\nICAgICAgICBpZiAoYnVuZGxlID09IG51bGwpIHsKICAgICAgICAgICAgICAg\nIF9sb2NhbGl6ZWRNZXNzYWdlID0ga2V5OwogICAgICAgICAgICB9IGVsc2Ug\newogICAgICAgICAgICAgICAgU3RyaW5nIGxvY2FsaXplZCA9IG51bGw7CiAg\nICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxvY2Fs\naXplZCA9IGJ1bmRsZS5nZXRTdHJpbmcoa2V5KTsKICAgICAgICAgICAgICAg\nIH0gY2F0Y2ggKE1pc3NpbmdSZXNvdXJjZUV4Y2VwdGlvbiBtcmUpIHsKICAg\nICAgICAgICAgICAgICAgICBpZiAoZmF0YWwpCiAgICAgICAgICAgICAgICAg\nICAgICAgIHRocm93IG1yZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgIF9sb2NhbGl6ZWRNZXNzYWdlID0gKGxvY2FsaXplZCA9PSBudWxs\nKSA/IGtleSA6IGxvY2FsaXplZDsKICAgICAgICAgICAgfQogICAgICAgIH0K\nCiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIGxvY2FsaXplZCBtZXNzYWdl\nLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0TWVzc2Fn\nZSgpIHsKICAgICAgICAgICAgcmV0dXJuIE1lc3NhZ2VGb3JtYXQuZm9ybWF0\nKF9sb2NhbGl6ZWRNZXNzYWdlLCBfc3Vicyk7CiAgICAgICAgfQoKICAgICAg\nICAvKioKICAgICAgICAgKiBUaGUgdW5pcXVlIGtleSBmb3IgdGhlIGxvY2Fs\naXplZCBtZXNzYWdlLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0S2V5KCkgewogICAgICAgICAgICByZXR1cm4gX2tleTsKICAgICAg\nICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFN1YnN0aXR1dGlvbnMgaW5z\nZXJ0ZWQgaW50byB0aGUgbWVzc2FnZS4KICAgICAgICAgKi8KICAgICAgICBw\ndWJsaWMgT2JqZWN0W10gZ2V0U3Vic3RpdHV0aW9ucygpIHsKICAgICAgICAg\nICAgcmV0dXJuIF9zdWJzOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFN0\ncmluZyBnZXRQYWNrYWdlTmFtZSgpIHsKICAgICAgICAgICAgcmV0dXJuIF9w\na2c7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5n\nKCkgewogICAgICAgICAgICByZXR1cm4gZ2V0TWVzc2FnZSgpOwogICAgICAg\nIH0KICAgIH0KfQo=\n","encoding":"base64"}

