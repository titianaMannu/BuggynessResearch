{"sha":"10553c01c24ad8e7361f16059c43ebb91242ab29","node_id":"MDQ6QmxvYjIwNjM2NDoxMDU1M2MwMWMyNGFkOGU3MzYxZjE2MDU5YzQzZWJiOTEyNDJhYjI5","size":5776,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/10553c01c24ad8e7361f16059c43ebb91242ab29","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5jb25mOwoKaW1wb3J0IGphdmEuaW8u\nSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkpQQUZh\nY2FkZUhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEk7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnkuTmFtZWRRdWVy\neUVudGl0eTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5zaW1wbGUuQWxsRmllbGRUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LkFic3RyYWN0Q2FjaGVkRU1GVGVzdENh\nc2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7Cgpw\ndWJsaWMgY2xhc3MgVGVzdENhY2hlTWFyc2hhbGxlckVuZFRvRW5kCiAgICBl\neHRlbmRzIEFic3RyYWN0Q2FjaGVkRU1GVGVzdENhc2UgIHsKCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBPYmplY3RbXSBTVE9SRV9QUk9QUyA9IG5ldyBP\nYmplY3RbXSB7CiAgICAgICAgIm9wZW5qcGEuQ2FjaGVNYXJzaGFsbGVycyIs\nCiAgICAgICAgImRlZmF1bHQoSWQ9IiArIE1ldGFEYXRhQ2FjaGVNYWludGVu\nYW5jZS5jbGFzcy5nZXROYW1lKCkKICAgICAgICAgICAgKyAiLCBPdXRwdXRG\naWxlPXRhcmdldC8iCiAgICAgICAgICAgICAgICArIE1ldGFEYXRhQ2FjaGVN\nYWludGVuYW5jZS5jbGFzcy5nZXROYW1lKCkgKyIuc2VyIgogICAgICAgICAg\nICArICIsIENvbnN1bWVTZXJpYWxpemF0aW9uRXJyb3JzPWZhbHNlIgogICAg\nICAgICAgICArICIsIFZhbGlkYXRpb25Qb2xpY3k9IgogICAgICAgICAgICAr\nIE9wZW5KUEFWZXJzaW9uQW5kQ29uZmlndXJhdGlvblR5cGVWYWxpZGF0aW9u\nUG9saWN5LmNsYXNzLmdldE5hbWUoKQogICAgICAgICAgICArICIpIiwKICAg\nICAgICAib3BlbmpwYS5RdWVyeUNvbXBpbGF0aW9uQ2FjaGUiLAogICAgICAg\nICJqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcCIsCiAg\nICAgICAgQWxsRmllbGRUeXBlcy5jbGFzcywKICAgICAgICBOYW1lZFF1ZXJ5\nRW50aXR5LmNsYXNzLAogICAgICAgIENMRUFSX1RBQkxFUwogICAgfTsKCiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBPYmplY3RbXSBMT0FEX1BST1BTID0g\nbmV3IE9iamVjdFtdIHsKICAgICAgICAib3BlbmpwYS5DYWNoZU1hcnNoYWxs\nZXJzIiwKICAgICAgICAiZGVmYXVsdChJZD0iICsgTWV0YURhdGFDYWNoZU1h\naW50ZW5hbmNlLmNsYXNzLmdldE5hbWUoKQogICAgICAgICAgICArICIsIElu\ncHV0VVJMPWZpbGU6dGFyZ2V0LyIKICAgICAgICAgICAgICAgICsgTWV0YURh\ndGFDYWNoZU1haW50ZW5hbmNlLmNsYXNzLmdldE5hbWUoKSArICIuc2VyIgog\nICAgICAgICAgICArICIsIENvbnN1bWVTZXJpYWxpemF0aW9uRXJyb3JzPWZh\nbHNlIgogICAgICAgICAgICArICIsIFZhbGlkYXRpb25Qb2xpY3k9IgogICAg\nICAgICAgICArIE9wZW5KUEFWZXJzaW9uQW5kQ29uZmlndXJhdGlvblR5cGVW\nYWxpZGF0aW9uUG9saWN5LmNsYXNzLmdldE5hbWUoKQogICAgICAgICAgICAr\nICIpIiwKICAgICAgICAib3BlbmpwYS5RdWVyeUNvbXBpbGF0aW9uQ2FjaGUi\nLAogICAgICAgICJqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFz\naE1hcCIsCiAgICAgICAgQWxsRmllbGRUeXBlcy5jbGFzcywKICAgICAgICBO\nYW1lZFF1ZXJ5RW50aXR5LmNsYXNzCiAgICB9OwoKCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0Q2FjaGVNYXJzaGFsbGVyRW5kVG9FbmQoKQogICAgICAgIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJG\nYWN0b3J5U1BJIGVtZiA9IGNyZWF0ZUVNRihTVE9SRV9QUk9QUyk7CiAgICAg\nICAgQ2FjaGVNYXJzaGFsbGVySW1wbCBjbSA9IChDYWNoZU1hcnNoYWxsZXJJ\nbXBsKQogICAgICAgICAgICBDYWNoZU1hcnNoYWxsZXJzVmFsdWUuZ2V0TWFy\nc2hhbGxlckJ5SWQoCiAgICAgICAgICAgIGVtZi5nZXRDb25maWd1cmF0aW9u\nKCksIE1ldGFEYXRhQ2FjaGVNYWludGVuYW5jZS5jbGFzcy5nZXROYW1lKCkp\nOwogICAgICAgIGNtLmdldE91dHB1dEZpbGUoKS5kZWxldGUoKTsKICAgICAg\nICBNZXRhRGF0YUNhY2hlTWFpbnRlbmFuY2UgbWFpbnQgPSBuZXcgTWV0YURh\ndGFDYWNoZU1haW50ZW5hbmNlKAogICAgICAgICAgICBKUEFGYWNhZGVIZWxw\nZXIudG9Ccm9rZXJGYWN0b3J5KGVtZiksIGZhbHNlKTsKICAgICAgICBMb2dJ\nbXBsIGxvZyA9IG5ldyBMb2dJbXBsKCk7CiAgICAgICAgbWFpbnQuc2V0TG9n\nKGxvZyk7CiAgICAgICAgbWFpbnQuc3RvcmUoKTsKICAgICAgICBhc3NlcnRD\nb250YWlucyhsb2cubGluZXMsICIgICAgIiArIEFsbEZpZWxkVHlwZXMuY2xh\nc3MuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRDb250YWlucyhsb2cubGlu\nZXMsICIgICAgIiArIE5hbWVkUXVlcnlFbnRpdHkuY2xhc3MuZ2V0TmFtZSgp\nKTsKICAgICAgICBhc3NlcnRDb250YWlucyhsb2cubGluZXMsICIgICAgTmFt\nZWRRdWVyeUVudGl0eS5uYW1lZFF1ZXJ5Iik7CiAgICAgICAgZW1mLmNsb3Nl\nKCk7CgogICAgICAgIGVtZiA9IGNyZWF0ZUVNRihMT0FEX1BST1BTKTsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgZW0ucGVyc2lzdChuZXcgTmFtZWRRdWVyeUVudGl0eSgiZm9vIikp\nOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNy\nZWF0ZU5hbWVkUXVlcnkoIk5hbWVkUXVlcnlFbnRpdHkubmFtZWRRdWVyeSIp\nOwogICAgICAgIGFzc2VydEVxdWFscygxLCBxLmdldFJlc3VsdExpc3QoKS5z\naXplKCkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2so\nKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIGVtZi5jbG9zZSgpOwog\nICAgfQoKICAgIHByaXZhdGUgdm9pZCBhc3NlcnRDb250YWlucyhMaXN0PFN0\ncmluZz4gbGluZXMsIFN0cmluZyBwcmVmaXgpIHsKICAgICAgICBmb3IgKFN0\ncmluZyBsaW5lIDogbGluZXMpCiAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0\nc1dpdGgocHJlZml4KSkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICBmYWlsKCJzaG91bGQgY29udGFpbiBhIGxpbmUgc3RhcnRpbmcgd2l0aCAi\nICsgcHJlZml4CiAgICAgICAgICAgICsgIjogIiArIGxpbmVzKTsKICAgIH0K\nCiAgICBwcml2YXRlIGNsYXNzIExvZ0ltcGwgaW1wbGVtZW50cyBMb2cgewog\nICAgICAgIHByaXZhdGUgTGlzdDxTdHJpbmc+IGxpbmVzID0gbmV3IEFycmF5\nTGlzdDxTdHJpbmc+KCk7CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzVHJh\nY2VFbmFibGVkKCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzSW5mb0VuYWJsZWQoKSB7\nCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIGJvb2xlYW4gaXNXYXJuRW5hYmxlZCgpIHsKICAgICAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVh\nbiBpc0Vycm9yRW5hYmxlZCgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgYm9vbGVhbiBpc0ZhdGFsRW5hYmxlZCgpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9u\nKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCB0cmFjZShPYmpl\nY3QgbykgewogICAgICAgICAgICBsaW5lcy5hZGQoby50b1N0cmluZygpKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHRyYWNlKE9iamVjdCBv\nLCBUaHJvd2FibGUgdCkgewogICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIGluZm8oT2JqZWN0IG8pIHsKICAgICAgICAgICAgbGlu\nZXMuYWRkKG8udG9TdHJpbmcoKSk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCBpbmZvKE9iamVjdCBvLCBUaHJvd2FibGUgdCkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24o\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdhcm4oT2JqZWN0\nIG8pIHsKICAgICAgICAgICAgbGluZXMuYWRkKG8udG9TdHJpbmcoKSk7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCB3YXJuKE9iamVjdCBvLCBU\naHJvd2FibGUgdCkgewogICAgICAgICAgICBsaW5lcy5hZGQoby50b1N0cmlu\nZygpKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGVycm9yKE9i\namVjdCBvKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9w\nZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgZXJyb3IoT2JqZWN0IG8sIFRocm93YWJsZSB0KSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgZmF0YWwoT2JqZWN0\nIG8pIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBmYXRhbChPYmplY3QgbywgVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAg\nICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

