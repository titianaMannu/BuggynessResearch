{"sha":"b24f768c83bd13524cb35a67665f5f3fcc9eb696","node_id":"MDQ6QmxvYjIwNjM2NDpiMjRmNzY4YzgzYmQxMzUyNGNiMzVhNjc2NjVmNWYzZmNjOWViNjk2","size":4461,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b24f768c83bd13524cb35a67665f5f3fcc9eb696","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jYWNoZS5qcGE7\nCgppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTW9kaWZpZXI7CmltcG9ydCBq\nYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLlNldDsKCmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIuamRiYy5KREJDTGlzdGVuZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1h\nbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jYWNoZS5qcGEubW9kZWwuQ2FjaGVF\nbnRpdHk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nY2FjaGUuanBhLm1vZGVsLkNhY2hlYWJsZUVudGl0eTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jYWNoZS5qcGEubW9kZWwuTmVn\nYXRlZENhY2hhYmxlRW50aXR5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLmNhY2hlLmpwYS5tb2RlbC5OZWdhdGVkVW5jYWNoZWFi\nbGVFbnRpdHk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuY2FjaGUuanBhLm1vZGVsLlVuY2FjaGVhYmxlRW50aXR5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNhY2hlLmpwYS5tb2Rl\nbC5VbnNwZWNpZmllZEVudGl0eTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5jYWNoZS5qcGEubW9kZWwuWG1sQ2FjaGVhYmxlRW50\naXR5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNh\nY2hlLmpwYS5tb2RlbC5YbWxVbmNhY2hlYWJsZUVudGl0eTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LkFic3RyYWN0UGVy\nc2lzdGVuY2VUZXN0Q2FzZTsKCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBYnN0\ncmFjdENhY2hlVGVzdENhc2UgZXh0ZW5kcyBBYnN0cmFjdFBlcnNpc3RlbmNl\nVGVzdENhc2UgewogICAgcHJvdGVjdGVkIGZpbmFsIFN0cmluZyBSRVRSSUVW\nRV9NT0RFX1BST1AgPSAiamF2YXgucGVyc2lzdGVuY2UuY2FjaGUucmV0cmll\ndmVNb2RlIjsKICAgIHByb3RlY3RlZCBmaW5hbCBTdHJpbmcgU1RPUkVfTU9E\nRV9QUk9QID0gImphdmF4LnBlcnNpc3RlbmNlLmNhY2hlLnN0b3JlTW9kZSI7\nCiAgICAKICAgIGFic3RyYWN0IE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neVNQSSBnZXRFbnRpdHlNYW5hZ2VyRmFjdG9yeSgpOwogICAgYWJzdHJhY3Qg\nSkRCQ0xpc3RlbmVyIGdldExpc3RlbmVyKCk7CgogICAgcHJvdGVjdGVkIHN0\nYXRpYyBDbGFzczw/PltdIHBlcnNpc3RlbnRUeXBlcyA9CiAgICAgICAgeyBD\nYWNoZWFibGVFbnRpdHkuY2xhc3MsIFVuY2FjaGVhYmxlRW50aXR5LmNsYXNz\nLCBVbnNwZWNpZmllZEVudGl0eS5jbGFzcywgTmVnYXRlZENhY2hhYmxlRW50\naXR5LmNsYXNzLAogICAgICAgICAgICBOZWdhdGVkVW5jYWNoZWFibGVFbnRp\ndHkuY2xhc3MsIFhtbENhY2hlYWJsZUVudGl0eS5jbGFzcywgWG1sVW5jYWNo\nZWFibGVFbnRpdHkuY2xhc3MgfTsKCiAgICBwdWJsaWMgdm9pZCBwb3B1bGF0\nZSgpIHRocm93cyBJbGxlZ2FsQWNjZXNzRXhjZXB0aW9uLCBJbnN0YW50aWF0\naW9uRXhjZXB0aW9uIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZ2V0\nRW50aXR5TWFuYWdlckZhY3RvcnkoKS5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAg\nIGZvciAoQ2xhc3M8Pz4gY2xzcyA6IHBlcnNpc3RlbnRUeXBlcykgewogICAg\nICAgICAgICBpZiAoIU1vZGlmaWVyLmlzQWJzdHJhY3QoY2xzcy5nZXRNb2Rp\nZmllcnMoKSkpIHsKICAgICAgICAgICAgICAgIENhY2hlRW50aXR5IGNlID0g\nKENhY2hlRW50aXR5KSBjbHNzLm5ld0luc3RhbmNlKCk7CiAgICAgICAgICAg\nICAgICBjZS5zZXRJZCgxKTsKICAgICAgICAgICAgICAgIGVtLnBlcnNpc3Qo\nY2UpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICBwdWJsaWMgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJ\nIGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KFN0cmluZyBwdU5hbWUsCiAg\nICAgICAgTWFwPFN0cmluZywgT2JqZWN0PiBhZGRpdGlvbmFsUHJvcGVydGll\ncykgewogICAgICAgIE1hcDxTdHJpbmcsIE9iamVjdD4gcHJvcGVydGllc01h\ncCA9IGdldFByb3BlcnRpZXNNYXAoIm9wZW5qcGEuRGF0YUNhY2hlIiwgInRy\ndWUiLAogICAgICAgICAgICAib3BlbmpwYS5RdWVyeUNhY2hlIiwgInRydWUi\nLAogICAgICAgICAgICAib3BlbmpwYS5SZW1vdGVDb21taXRQcm92aWRlciIs\nICJzanZtIiwgcGVyc2lzdGVudFR5cGVzLCAKICAgICAgICAgICAgIm9wZW5q\ncGEuamRiYy5KREJDTGlzdGVuZXJzIiwgbmV3IEpEQkNMaXN0ZW5lciBbXSB7\nIGdldExpc3RlbmVyKCkgfSk7CiAgICAgICAgaWYgKGFkZGl0aW9uYWxQcm9w\nZXJ0aWVzICE9IG51bGwpIHsKICAgICAgICAgICAgU2V0PFN0cmluZz4ga2V5\ncyA9IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLmtleVNldCgpOwogICAgICAgICAg\nICBmb3IgKFN0cmluZyBrZXkgOiBrZXlzKSB7CiAgICAgICAgICAgICAgICBw\ncm9wZXJ0aWVzTWFwLnB1dChrZXksIGFkZGl0aW9uYWxQcm9wZXJ0aWVzLmdl\ndChrZXkpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0KICAgICAgICAgICAg\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkgT3BlbkpQQVBlcnNp\nc3RlbmNlLmNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KHB1TmFtZSwKICAg\nICAgICAgICAgICAgICJNRVRBLUlORi9jYWNoaW5nLXBlcnNpc3RlbmNlLnht\nbCIsIHByb3BlcnRpZXNNYXAgKTsKICAgICAgICByZXR1cm4gZW1mOwogICAg\nfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdXBlci5zZXRVcCgpOwogICAgICAg\nIGNsZWFuRGF0YWJhc2UoKTsKICAgICAgICBwb3B1bGF0ZSgpOwogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCBjbGVhbkRhdGFiYXNlKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGdldEVudGl0\neU1hbmFnZXJGYWN0b3J5KCkuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBmb3Ig\nKENsYXNzPD8+IGNsc3MgOiBwZXJzaXN0ZW50VHlwZXMpIHsKICAgICAgICAg\nICAgaWYgKCFNb2RpZmllci5pc0Fic3RyYWN0KGNsc3MuZ2V0TW9kaWZpZXJz\nKCkpKSB7CiAgICAgICAgICAgICAgICBlbS5jcmVhdGVRdWVyeSgiRGVsZXRl\nIGZyb20gIiArIGNsc3MuZ2V0U2ltcGxlTmFtZSgpKS5leGVjdXRlVXBkYXRl\nKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKfQoK\n","encoding":"base64"}

