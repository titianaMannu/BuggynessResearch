{"sha":"2ad1629698c000758c564be58119679250779c31","node_id":"MDQ6QmxvYjIwNjM2NDoyYWQxNjI5Njk4YzAwMDc1OGM1NjRiZTU4MTE5Njc5MjUwNzc5YzMx","size":65256,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2ad1629698c000758c564be58119679250779c31","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZh\nLnNxbC5EYXRlOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1wb3J0IGphdmEu\nc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Cmlt\ncG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaXN0\nOwppbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5QYXJhbWV0ZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVy\neTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlR1cGxlOwppbXBvcnQgamF2\nYXgucGVyc2lzdGVuY2UuVHlwZWRRdWVyeTsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLmNyaXRlcmlhLkNyaXRlcmlhUXVlcnk7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5jcml0ZXJpYS5FeHByZXNzaW9uOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuY3JpdGVyaWEuSm9pbjsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLmNyaXRlcmlhLkpvaW5UeXBlOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuY3JpdGVyaWEuTGlzdEpvaW47CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5jcml0ZXJpYS5NYXBKb2luOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuUGFyYW1ldGVyRXhwcmVzc2lvbjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLmNyaXRlcmlhLlBhdGg7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5jcml0ZXJpYS5Sb290OwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuU2VsZWN0aW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuU2V0Sm9pbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLmNyaXRlcmlhLlN1YnF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nbWV0YW1vZGVsLkVudGl0eVR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5tZXRhbW9kZWwuTWV0YW1vZGVsOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5PcmFjbGVEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuQWxsb3dGYWlsdXJlOwoK\nLyoqCiAqIFRlc3RzIHR5cGUtc3RyaWN0IHZlcnNpb24gb2YgQ3JpdGVyaWEg\nQVBJLgogKiAKICogTW9zdCBvZiB0aGUgdGVzdHMgYnVpbGQgQ3JpdGVyaWEg\nUXVlcnkgYW5kIHRoZW4gZXhlY3V0ZSB0aGUgcXVlcnkgYXMgd2VsbCBhcwog\nKiBhIHJlZmVyZW5jZSBKUFFMIHF1ZXJ5IHN1cHBsaWVkIGFzIGEgc3RyaW5n\nLiBUaGUgdGVzdCBpcyB2YWxpZGF0ZWQgYnkKICogYXNzZXJ0aW5nIHRoYXQg\ndGhlIHJlc3VsdGFudCBTUUwgcXVlcmllcyBmb3IgdGhlc2UgdHdvIGFsdGVy\nbmF0aXZlIGZvcm0gb2YKICogZXhlY3V0aW5nIGEgcXVlcnkgYXJlIHRoZSBz\nYW1lLgogKiAKICogCiAqLwpwdWJsaWMgY2xhc3MgVGVzdFR5cGVzYWZlQ3Jp\ndGVyaWEgZXh0ZW5kcyBDcml0ZXJpYVRlc3QgewogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgU3RyaW5nIFRSVUVfSlBRTCA9ICJTRUxFQ1QgcCBGUk9NIFBl\ncnNvbiBwIFdIRVJFIDE9MSI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBT\ndHJpbmcgRkFMU0VfSlBRTCA9ICJTRUxFQ1QgcCBGUk9NIFBlcnNvbiBwIFdI\nRVJFIDE8PjEiOwogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0VHJ1ZUxpdGVy\nYWwoKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+IHEgPSBjYi5j\ncmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIHEuZnJvbShQZXJz\nb24uY2xhc3MpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEud2hlcmUo\nY2IubGl0ZXJhbChCb29sZWFuLlRSVUUpKSwgVFJVRV9KUFFMKTsKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdEZhbHNlTGl0ZXJhbCgpIHsKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PFBlcnNvbj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5\nKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgcS5mcm9tKFBlcnNvbi5jbGFzcyk7\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocS53aGVyZShjYi5saXRlcmFs\nKEJvb2xlYW4uRkFMU0UpKSwgRkFMU0VfSlBRTCk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3REZWZhdWx0QW5kSXNUcnVlKCkgewogICAgICAg\nIENyaXRlcmlhUXVlcnk8UGVyc29uPiBxID0gY2IuY3JlYXRlUXVlcnkoUGVy\nc29uLmNsYXNzKTsKICAgICAgICBxLmZyb20oUGVyc29uLmNsYXNzKTsKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLndoZXJlKGNiLmFuZCgpKSwgVFJV\nRV9KUFFMKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdERlZmF1\nbHRPcklzRmFsc2UoKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+\nIHEgPSBjYi5jcmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIHEu\nZnJvbShQZXJzb24uY2xhc3MpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKHEud2hlcmUoY2Iub3IoKSksIEZBTFNFX0pQUUwpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RaZXJvRGlzanVuY3RJc0ZhbHNlKCkgewogICAgICAg\nIENyaXRlcmlhUXVlcnk8UGVyc29uPiBxID0gY2IuY3JlYXRlUXVlcnkoUGVy\nc29uLmNsYXNzKTsKICAgICAgICBxLmZyb20oUGVyc29uLmNsYXNzKTsKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLndoZXJlKGNiLmRpc2p1bmN0aW9u\nKCkpLCBGQUxTRV9KUFFMKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFplcm9Db25qdW5jdElzVHJ1ZSgpIHsKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PFBlcnNvbj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7\nCiAgICAgICAgcS5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UocS53aGVyZShjYi5jb25qdW5jdGlvbigpKSwgVFJVRV9K\nUFFMKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhwcmVzc2lvbnMo\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8ucXVhbnRpdHks\nIG8udG90YWxDb3N0KjEuMDgsICIKICAgICAgICAgICAgICAgICsgImEuemlw\nQ29kZSBGUk9NIEN1c3RvbWVyIGMgSk9JTiBjLm9yZGVycyBvIEpPSU4gYy5h\nZGRyZXNzIGEgIgogICAgICAgICAgICAgICAgKyAiV0hFUkUgYS5zdGF0ZSA9\nICdDQScgQU5EIGEuY291bnR5ID0gJ1NhbnRhIENsYXJhJyI7CiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTw/PiBxID0gY2IuY3JlYXRlUXVlcnkoKTsKICAgICAg\nICBSb290PEN1c3RvbWVyPiBjdXN0ID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNz\nKTsKICAgICAgICBTZXRKb2luPEN1c3RvbWVyLCBPcmRlcj4gb3JkZXIgPSBj\ndXN0LmpvaW5TZXQoIm9yZGVycyIpOwogICAgICAgIEpvaW48Q3VzdG9tZXIs\nIEFkZHJlc3M+IGFkZHJlc3MgPSBjdXN0LmpvaW4oImFkZHJlc3MiKTsKICAg\nICAgICBxLndoZXJlKGNiLmVxdWFsKGFkZHJlc3MuZ2V0KCJzdGF0ZSIpLCAi\nQ0EiKSwgY2IuZXF1YWwoYWRkcmVzcwogICAgICAgICAgICAuZ2V0KCJjb3Vu\ndHkiKSwgIlNhbnRhIENsYXJhIikpOwogICAgICAgIEV4cHJlc3Npb248RG91\nYmxlPiB0YXhlZENvc3QgPSBjYi5wcm9kKG9yZGVyLmdldChPcmRlcl8udG90\nYWxDb3N0KSwgMS4wOCk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChvcmRlci5n\nZXQoInF1YW50aXR5IiksIHRheGVkQ29zdCwgYWRkcmVzcy5nZXQoInppcENv\nZGUiKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwog\nICAgfQogICAgcHVibGljIHZvaWQgdGVzdEV4cGxpY3RSb290KCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBhIGZyb20gQWNjb3VudCBhIjsK\nICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEFjY291bnQ+IGMgPSBj\nYi5jcmVhdGVRdWVyeShBY2NvdW50LmNsYXNzKTsKICAgICAgICBSb290PEFj\nY291bnQ+IGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7CiAgICAg\nICAgYy5zZWxlY3QoYWNjb3VudCk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RJbXBs\naWNpdFJvb3QoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEg\nZnJvbSBBY2NvdW50IGEiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVl\ncnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KEFjY291bnQuY2xhc3Mp\nOwogICAgICAgIGMuZnJvbShBY2NvdW50LmNsYXNzKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEVxdWFsV2l0aEF0dHJpYnV0ZUFuZExpdGVyYWwoKSB7CiAgICAg\nICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBBY2NvdW50IGEgd2hl\ncmUgYS5iYWxhbmNlPTEwMCI7CgogICAgICAgIENyaXRlcmlhUXVlcnkgYyA9\nIGNiLmNyZWF0ZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxBY2NvdW50PiBhY2Nv\ndW50ID0gYy5mcm9tKEFjY291bnQuY2xhc3MpOwogICAgICAgIGMuc2VsZWN0\nKGFjY291bnQpLndoZXJlKGNiLmVxdWFsKGFjY291bnQuZ2V0KEFjY291bnRf\nLmJhbGFuY2UpLCAxMDApKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2Uo\nYywganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVxdWFsV2l0\naEF0dHJpYnV0ZUFuZEF0dHJpYnV0ZSgpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJzZWxlY3QgYSBmcm9tIEFjY291bnQgYSB3aGVyZSBhLmJhbGFuY2U9\nYS5sb2FuIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxBY2NvdW50PiBjID0g\nY2IuY3JlYXRlUXVlcnkoQWNjb3VudC5jbGFzcyk7CiAgICAgICAgUm9vdDxB\nY2NvdW50PiBhY2NvdW50ID0gYy5mcm9tKEFjY291bnQuY2xhc3MpOwogICAg\nICAgIGMuc2VsZWN0KGFjY291bnQpLndoZXJlKAogICAgICAgICAgICAgICAg\nY2IuZXF1YWwoYWNjb3VudC5nZXQoQWNjb3VudF8uYmFsYW5jZSksIGFjY291\nbnQKICAgICAgICAgICAgICAgICAgICAgICAgLmdldChBY2NvdW50Xy5sb2Fu\nKSkpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UHJvamVjdGlvbigpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9ICJzZWxlY3QgYS5iYWxhbmNlLGEubG9hbiBmcm9t\nIEFjY291bnQgYSI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBsZT4gYyA9\nIGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEFjY291bnQ+\nIGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7CiAgICAgICAgYy5t\ndWx0aXNlbGVjdChhY2NvdW50LmdldChBY2NvdW50Xy5iYWxhbmNlKSwgYWNj\nb3VudC5nZXQoQWNjb3VudF8ubG9hbikpOwogICAgICAgIGFzc2VydEVxdWl2\nYWxlbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RB\nYnNFeHByZXNzaW9uKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVj\ndCBhIGZyb20gQWNjb3VudCBhIHdoZXJlIGFicyhhLmJhbGFuY2UpPTEwMCI7\nCgogICAgICAgIENyaXRlcmlhUXVlcnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0\nZVF1ZXJ5KEFjY291bnQuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4g\nYWNjb3VudCA9IGMuZnJvbShBY2NvdW50LmNsYXNzKTsKCiAgICAgICAgYy5z\nZWxlY3QoYWNjb3VudCkud2hlcmUoY2IuZXF1YWwoY2IuYWJzKGFjY291bnQu\nZ2V0KEFjY291bnRfLmJhbGFuY2UpKSwgMTAwKSk7CiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdEF2Z0V4cHJlc3Npb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nc2VsZWN0IGF2ZyhhLmJhbGFuY2UpIGZyb20gQWNjb3VudCBhIjsKCiAgICAg\nICAgQ3JpdGVyaWFRdWVyeTxEb3VibGU+IGMgPSBjYi5jcmVhdGVRdWVyeShE\nb3VibGUuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4gYWNjb3VudCA9\nIGMuZnJvbShBY2NvdW50LmNsYXNzKTsKCiAgICAgICAgYy5zZWxlY3QoY2Iu\nYXZnKGFjY291bnQuZ2V0KEFjY291bnRfLmJhbGFuY2UpKSk7CiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEluUHJlZGljYXRlKCkgewogICAgICAgIFN0cmluZyBqcHFs\nID0gInNlbGVjdCBhIGZyb20gQWNjb3VudCBhIHdoZXJlIGEubmFtZSBpbiAo\nJ1gnLCdZJywnWicpIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEFjY291bnQ+\nIGMgPSBjYi5jcmVhdGVRdWVyeShBY2NvdW50LmNsYXNzKTsKICAgICAgICBS\nb290PEFjY291bnQ+IGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7\nCiAgICAgICAgYy53aGVyZShjYi5pbihhY2NvdW50LmdldChBY2NvdW50Xy5u\nYW1lKSkudmFsdWUoIlgiKS52YWx1ZSgiWSIpLnZhbHVlKCJaIikpOwogICAg\nICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RJblByZWRpY2F0ZVdpdGhQYXRoKCkgewogICAgICAg\nIFN0cmluZyBqcHFsID0gInNlbGVjdCBhIGZyb20gQWNjb3VudCBhIHdoZXJl\nIGEub3duZXIubmFtZSBpbiAoJ1gnLCdZJywnWicpIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PEFjY291bnQ+IGMgPSBjYi5jcmVhdGVRdWVyeShBY2NvdW50\nLmNsYXNzKTsKICAgICAgICBSb290PEFjY291bnQ+IGFjY291bnQgPSBjLmZy\nb20oQWNjb3VudC5jbGFzcyk7CiAgICAgICAgYy53aGVyZShjYi5pbihhY2Nv\ndW50LmdldChBY2NvdW50Xy5vd25lcikuZ2V0KFBlcnNvbl8ubmFtZSkpLnZh\nbHVlKCJYIikKICAgICAgICAgICAgICAgIC52YWx1ZSgiWSIpLnZhbHVlKCJa\nIikpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RCaW5hcnlQcmVkaWNhdGUoKSB7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBBY2NvdW50IGEg\nd2hlcmUgYS5iYWxhbmNlPjEwMCBhbmQgYS5iYWxhbmNlPDIwMCI7CgogICAg\nICAgIENyaXRlcmlhUXVlcnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0ZVF1ZXJ5\nKEFjY291bnQuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4gYWNjb3Vu\ndCA9IGMuZnJvbShBY2NvdW50LmNsYXNzKTsKICAgICAgICBjLnNlbGVjdChh\nY2NvdW50KS53aGVyZSgKICAgICAgICAgICAgICAgIGNiLmFuZChjYi5ncmVh\ndGVyVGhhbihhY2NvdW50LmdldChBY2NvdW50Xy5iYWxhbmNlKSwgMTAwKSwg\nY2IKICAgICAgICAgICAgICAgICAgICAgICAgLmxlc3NUaGFuKGFjY291bnQu\nZ2V0KEFjY291bnRfLmJhbGFuY2UpLCAyMDApKSk7CgogICAgICAgIGFzc2Vy\ndEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFcXVhbFdpdGhBdHRyaWJ1dGVBbmRVbmFyeUV4cHJlc3Npb24oKSB7\nCiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBBY2NvdW50\nIGEgd2hlcmUgYS5iYWxhbmNlPWFicyhhLmJhbGFuY2UpIjsKCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxBY2NvdW50PiBjID0gY2IuY3JlYXRlUXVlcnkoQWNj\nb3VudC5jbGFzcyk7CiAgICAgICAgUm9vdDxBY2NvdW50PiBhY2NvdW50ID0g\nYy5mcm9tKEFjY291bnQuY2xhc3MpOwogICAgICAgIGMuc2VsZWN0KGFjY291\nbnQpLndoZXJlKAogICAgICAgICAgICAgICAgY2IuZXF1YWwoYWNjb3VudC5n\nZXQoQWNjb3VudF8uYmFsYW5jZSksIGNiLmFicyhhY2NvdW50CiAgICAgICAg\nICAgICAgICAgICAgICAgIC5nZXQoQWNjb3VudF8uYmFsYW5jZSkpKSk7Cgog\nICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RCZXR3ZWVuRXhwcmVzc2lvbigpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9CiAgICAgICAgICAgICJzZWxlY3QgYSBmcm9tIEFj\nY291bnQgYSB3aGVyZSBhLmJhbGFuY2UgYmV0d2VlbiAxMDAgYW5kIDIwMCI7\nCgogICAgICAgIENyaXRlcmlhUXVlcnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0\nZVF1ZXJ5KEFjY291bnQuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4g\nYWNjb3VudCA9IGMuZnJvbShBY2NvdW50LmNsYXNzKTsKICAgICAgICBjLnNl\nbGVjdChhY2NvdW50KS53aGVyZSgKICAgICAgICAgICAgICAgIGNiLmJldHdl\nZW4oYWNjb3VudC5nZXQoQWNjb3VudF8uYmFsYW5jZSksIDEwMCwgMjAwKSk7\nCgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RTaW1wbGVQYXRoKCkgewogICAgICAgIFN0\ncmluZyBqcHFsID0gInNlbGVjdCBhIGZyb20gQWNjb3VudCBhIHdoZXJlIGEu\nb3duZXIubmFtZT0nUGluYWtpJyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxB\nY2NvdW50PiBjID0gY2IuY3JlYXRlUXVlcnkoQWNjb3VudC5jbGFzcyk7CiAg\nICAgICAgUm9vdDxBY2NvdW50PiBhID0gYy5mcm9tKEFjY291bnQuY2xhc3Mp\nOwogICAgICAgIGMud2hlcmUoY2IuZXF1YWwoYS5nZXQoQWNjb3VudF8ub3du\nZXIpLmdldChQZXJzb25fLm5hbWUpLCAiUGluYWtpIikpOwoKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0U2ltcGxlTGVmdEpvaW4oKSB7CiAgICAgICAgU3RyaW5nIGpw\ncWwgPSAiU0VMRUNUIGMgRlJPTSBDdXN0b21lciBjIExFRlQgSk9JTiBjLm9y\nZGVycyBvICI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4gYyA9\nIGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBjLmZy\nb20oQ3VzdG9tZXIuY2xhc3MpLmpvaW4oQ3VzdG9tZXJfLm9yZGVycywgSm9p\nblR5cGUuTEVGVCk7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBx\nbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE11bHRpcGFydE5hdmln\nYXRpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJv\nbSBBIGEgd2hlcmUgYS5iLmFnZT0yMiI7CiAgICAgICAgCiAgICAgICAgQ3Jp\ndGVyaWFRdWVyeTxBPiBjcSA9IGNiLmNyZWF0ZVF1ZXJ5KEEuY2xhc3MpOwog\nICAgICAgIFJvb3Q8QT4gYSA9IGNxLmZyb20oQS5jbGFzcyk7CiAgICAgICAg\nY3Eud2hlcmUoY2IuZXF1YWwoYS5nZXQoQV8uYikuZ2V0KEJfLmFnZSksIDIy\nKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoY3EsIGpw\ncWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TXVsdGlMZXZl\nbEpvaW5zKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBjIEZS\nT00gQ3VzdG9tZXIgYyBKT0lOIGMub3JkZXJzIG8gIiAKICAgICAgICAgICAg\nICAgICAgICArICJKT0lOIG8ubGluZUl0ZW1zIGkgV0hFUkUgaS5wcm9kdWN0\nLnByb2R1Y3RUeXBlID0gJ3ByaW50ZXInIjsKCiAgICAgICAgQ3JpdGVyaWFR\ndWVyeTxDdXN0b21lcj4gY3EgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5j\nbGFzcyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IGNxLmZyb20oQ3Vz\ndG9tZXIuY2xhc3MpOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIE9yZGVyPiBv\nID0gYy5qb2luKEN1c3RvbWVyXy5vcmRlcnMpOwogICAgICAgIEpvaW48T3Jk\nZXIsIExpbmVJdGVtPiBpID0gby5qb2luKE9yZGVyXy5saW5lSXRlbXMpOwog\nICAgICAgIGNxLnNlbGVjdChjKQogICAgICAgICAgICAud2hlcmUoY2IuZXF1\nYWwoaS5nZXQoTGluZUl0ZW1fLnByb2R1Y3QpCiAgICAgICAgICAgIC5nZXQo\nUHJvZHVjdF8ucHJvZHVjdFR5cGUpLCAicHJpbnRlciIpKTsKCiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UoY3EsIGpwcWwpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RKb2luc05vdFByZXNlbnRJbldoZXJlQ2xhdXNlKCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBjIEZST00gQ3VzdG9tZXIg\nYyBMRUZUIEpPSU4gYy5vcmRlcnMgbyBXSEVSRSBjLnN0YXR1cyA9IDEiOwog\nICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IGMgPSBj\nYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxD\ndXN0b21lcj4gY3VzdCA9IGMuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAg\nICAgSm9pbjxDdXN0b21lciwgT3JkZXI+IG9yZGVyID0gY3VzdAogICAgICAg\nIC5qb2luKEN1c3RvbWVyXy5vcmRlcnMsIEpvaW5UeXBlLkxFRlQpOwogICAg\nICAgIGMud2hlcmUoY2IuZXF1YWwoY3VzdC5nZXQoQ3VzdG9tZXJfLnN0YXR1\ncyksIDEpKS5zZWxlY3QoY3VzdCk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRj\naEpvaW5zKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBkIEZS\nT00gRGVwYXJ0bWVudCBkIExFRlQgSk9JTiBGRVRDSCBkLmVtcGxveWVlcyBX\nSEVSRSBkLmRlcHRObyA9IDEiOwogICAgICAgIAogICAgICAgIENyaXRlcmlh\nUXVlcnk8RGVwYXJ0bWVudD4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KERlcGFydG1l\nbnQuY2xhc3MpOwogICAgICAgIFJvb3Q8RGVwYXJ0bWVudD4gZCA9IHEuZnJv\nbShEZXBhcnRtZW50LmNsYXNzKTsKICAgICAgICBkLmZldGNoKERlcGFydG1l\nbnRfLmVtcGxveWVlcywgSm9pblR5cGUuTEVGVCk7CiAgICAgICAgcS53aGVy\nZShjYi5lcXVhbChkLmdldChEZXBhcnRtZW50Xy5kZXB0Tm8pLCAxKSkuc2Vs\nZWN0KGQpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Sm9pbmVkUGF0aEluUHJvamVj\ndGlvbigpIHsKICAgICAgICBTdHJpbmcganBxbDEgPSAiU0VMRUNUIHAudmVu\nZG9yIEZST00gRW1wbG95ZWUgZSBKT0lOIGUuY29udGFjdEluZm8ucGhvbmVz\nIHAgIgogICAgICAgICAgICAgICAgICAgICArICJXSEVSRSBlLmNvbnRhY3RJ\nbmZvLmFkZHJlc3MuemlwQ29kZSA9ICc5NTA1NCciOwoKICAgICAgICBTdHJp\nbmcganBxbCA9ICJTRUxFQ1QgcC52ZW5kb3IgRlJPTSBFbXBsb3llZSBlIEpP\nSU4gZS5jb250YWN0SW5mbyBjIEpPSU4gYy5waG9uZXMgcCAiCiAgICAgICAg\nICAgICAgICAgICAgKyAiV0hFUkUgYy5hZGRyZXNzLnppcENvZGUgPSAnOTUw\nNTQnIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxTdHJpbmc+IGNxID0gY2Iu\nY3JlYXRlUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBSb290PEVtcGxv\neWVlPiBlID0gY3EuZnJvbShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAgSm9p\nbjxDb250YWN0LCBQaG9uZT4gcCA9IGUuam9pbihFbXBsb3llZV8uY29udGFj\ndEluZm8pLmpvaW4oQ29udGFjdF8ucGhvbmVzKTsKICAgICAgICBjcS53aGVy\nZShjYi5lcXVhbChlLmdldChFbXBsb3llZV8uY29udGFjdEluZm8pLmdldChD\nb250YWN0Xy5hZGRyZXNzKQogICAgICAgICAgICAgICAgLmdldChBZGRyZXNz\nXy56aXBDb2RlKSwgIjk1MDU0IikpOwogICAgICAgIGNxLnNlbGVjdChwLmdl\ndChQaG9uZV8udmVuZG9yKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKGNxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0S2V5RXhw\ncmVzc2lvbigpIHsKLy8gICAgICAgIFN0cmluZyBqcHFsID0KLy8gICAgICAg\nICAgICAiU0VMRUNUIGkubmFtZSwgcCBGUk9NIEl0ZW0gaSBKT0lOIGkucGhv\ndG9zIHAgV0hFUkUgS0VZKHApICIKLy8gICAgICAgICAgICArICJMSUtFICcl\nZWdyZXQlJyI7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGkubmFt\nZSwgVkFMVUUocCkgZnJvbSBJdGVtIGkgam9pbiBpLnBob3RvcyBwIHdoZXJl\nIEtFWShwKSBsaWtlICdlZ3JldCciOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAgIFJv\nb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNzKTsKICAgICAgICBN\nYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3RvID0gaXRlbS5qb2lu\nKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChpdGVtLmdl\ndChJdGVtXy5uYW1lKSwgcGhvdG8pLndoZXJlKGNiLmxpa2UocGhvdG8ua2V5\nKCksICIlZWdyZXQlIikpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShx\nLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW5kZXhFeHBy\nZXNzaW9uKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCB0IEZS\nT00gQ3JlZGl0Q2FyZCBjIEpPSU4gYy50cmFuc2FjdGlvbkhpc3RvcnkgdCAi\nCiAgICAgICAgICAgICsgIldIRVJFIGMuY3VzdG9tZXIuYWNjb3VudE51bSA9\nIDMyMTk4NyBBTkQgSU5ERVgodCkgQkVUV0VFTiAwIEFORCA5IjsKICAgICAg\nICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFRyYW5zYWN0aW9uSGlzdG9yeT4g\ncSA9IGNiLmNyZWF0ZVF1ZXJ5KFRyYW5zYWN0aW9uSGlzdG9yeS5jbGFzcyk7\nCiAgICAgICAgUm9vdDxDcmVkaXRDYXJkPiBjID0gcS5mcm9tKENyZWRpdENh\ncmQuY2xhc3MpOwogICAgICAgIExpc3RKb2luPENyZWRpdENhcmQsIFRyYW5z\nYWN0aW9uSGlzdG9yeT4gdCA9IGMKICAgICAgICAuam9pbihDcmVkaXRDYXJk\nXy50cmFuc2FjdGlvbkhpc3RvcnkpOwogICAgICAgIHEuc2VsZWN0KHQpLndo\nZXJlKGNiLmFuZCgKICAgICAgICAgICAgY2IuZXF1YWwoYy5nZXQoQ3JlZGl0\nQ2FyZF8uY3VzdG9tZXIpLmdldChDdXN0b21lcl8uYWNjb3VudE51bSksCiAg\nICAgICAgICAgICAgICAzMjE5ODcpLCAKICAgICAgICAgICAgY2IuYmV0d2Vl\nbih0LmluZGV4KCksIDAsIDkpKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RJc0Vt\ncHR5RXhwcmVzc2lvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxF\nQ1QgbyBGUk9NIE9yZGVyIG8gV0hFUkUgby5saW5lSXRlbXMgSVMgRU1QVFki\nOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8T3JkZXI+IHEgPSBj\nYi5jcmVhdGVRdWVyeShPcmRlci5jbGFzcyk7CiAgICAgICAgUm9vdDxPcmRl\ncj4gb3JkZXIgPSBxLmZyb20oT3JkZXIuY2xhc3MpOwogICAgICAgIHEud2hl\ncmUoY2IuaXNFbXB0eShvcmRlci5nZXQoT3JkZXJfLmxpbmVJdGVtcykpKS5z\nZWxlY3Qob3JkZXIpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBq\ncHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhwcmVzc2lvbklu\nUHJvamVjdGlvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1Qg\nby5xdWFudGl0eSwgby50b3RhbENvc3QqMS4wOCwgIgogICAgICAgICAgICAr\nICJhLnppcENvZGUgRlJPTSBDdXN0b21lciBjIEpPSU4gYy5vcmRlcnMgbyBK\nT0lOIGMuYWRkcmVzcyBhICIKICAgICAgICAgICAgKyAiV0hFUkUgYS5zdGF0\nZSA9ICdDQScgQU5EIGEuY291bnR5ID0gJ1NhbnRhIENsYXJhJyI7CiAgICAg\nICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBsZT4gY3EgPSBjYi5jcmVh\ndGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IGNx\nLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIEpvaW48Q3VzdG9tZXIs\nIE9yZGVyPiBvID0gYy5qb2luKEN1c3RvbWVyXy5vcmRlcnMpOwogICAgICAg\nIEpvaW48Q3VzdG9tZXIsIEFkZHJlc3M+IGEgPSBjLmpvaW4oQ3VzdG9tZXJf\nLmFkZHJlc3MpOwogICAgICAgIGNxLndoZXJlKGNiLmFuZCgKICAgICAgICAg\nICAgY2IuZXF1YWwoYS5nZXQoQWRkcmVzc18uc3RhdGUpLCAiQ0EiKSwgCiAg\nICAgICAgICAgIGNiLmVxdWFsKGEuZ2V0KEFkZHJlc3NfLmNvdW50eSksICJT\nYW50YSBDbGFyYSIpKSk7CiAgICAgICAgY3EubXVsdGlzZWxlY3Qoby5nZXQo\nT3JkZXJfLnF1YW50aXR5KSwgY2IucHJvZChvCiAgICAgICAgICAgICAgICAu\nZ2V0KE9yZGVyXy50b3RhbENvc3QpLCAxLjA4KSwgYS5nZXQoQWRkcmVzc18u\nemlwQ29kZSkpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjcSwganBx\nbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFR5cGVFeHByZXNzaW9u\nKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBUWVBFKGUpIEZS\nT00gRW1wbG95ZWUgZSBXSEVSRSBUWVBFKGUpIDw+IEV4ZW1wdCI7CiAgICAg\nICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxPYmplY3Q+IHEgPSBjYi5jcmVh\ndGVRdWVyeSgpOwogICAgICAgIFJvb3Q8RW1wbG95ZWU+IGVtcCA9IHEuZnJv\nbShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChlbXAu\ndHlwZSgpKS53aGVyZShjYi5ub3RFcXVhbChlbXAudHlwZSgpLCBFeGVtcHQu\nY2xhc3MpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEluZGV4RXhwcmVzc2lvbkFu\nZExpZXRyYWwoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIHcu\nbmFtZSBGUk9NIENvdXJzZSBjIEpPSU4gYy5zdHVkZW50V2FpdExpc3QgdyAi\nCiAgICAgICAgICAgICAgICAgICAgKyAiV0hFUkUgYy5uYW1lID0gJ0NhbGN1\nbHVzJyBBTkQgSU5ERVgodykgPSAwIjsKICAgICAgICAKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PFN0cmluZz4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KFN0cmluZy5j\nbGFzcyk7CiAgICAgICAgUm9vdDxDb3Vyc2U+IGNvdXJzZSA9IHEuZnJvbShD\nb3Vyc2UuY2xhc3MpOwogICAgICAgIExpc3RKb2luPENvdXJzZSwgU3R1ZGVu\ndD4gdyA9IGNvdXJzZS5qb2luKENvdXJzZV8uc3R1ZGVudFdhaXRMaXN0KTsK\nICAgICAgICBxLndoZXJlKGNiLmFuZCgKICAgICAgICAgICAgY2IuZXF1YWwo\nY291cnNlLmdldChDb3Vyc2VfLm5hbWUpLCAiQ2FsY3VsdXMiKSwKICAgICAg\nICAgICAgY2IuZXF1YWwody5pbmRleCgpLCAwKSkpLnNlbGVjdCh3LmdldChT\ndHVkZW50Xy5uYW1lKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEs\nIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RBZ2dyZWdhdGVJ\nblByb2plY3Rpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNU\nIFNVTShpLnByaWNlKSBGUk9NIE9yZGVyIG8gSk9JTiBvLmxpbmVJdGVtcyBp\nICIgKyAKICAgICAgICAgICAgIkpPSU4gby5jdXN0b21lciBjIFdIRVJFIGMu\nbGFzdE5hbWUgPSAnU21pdGgnIEFORCAiICsgCiAgICAgICAgICAgICJjLmZp\ncnN0TmFtZSA9ICdKb2huJyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFR\ndWVyeTxEb3VibGU+IHEgPSBjYi5jcmVhdGVRdWVyeShEb3VibGUuY2xhc3Mp\nOwogICAgICAgIFJvb3Q8T3JkZXI+IG8gPSBxLmZyb20oT3JkZXIuY2xhc3Mp\nOwogICAgICAgIEpvaW48T3JkZXIsIExpbmVJdGVtPiBpID0gby5qb2luKE9y\nZGVyXy5saW5lSXRlbXMpOwogICAgICAgIEpvaW48T3JkZXIsIEN1c3RvbWVy\nPiBjID0gby5qb2luKE9yZGVyXy5jdXN0b21lcik7CiAgICAgICAgcS53aGVy\nZShjYi5hbmQoCiAgICAgICAgICAgIGNiLmVxdWFsKGMuZ2V0KEN1c3RvbWVy\nXy5sYXN0TmFtZSksICJTbWl0aCIpLCAKICAgICAgICAgICAgY2IuZXF1YWwo\nYy5nZXQoQ3VzdG9tZXJfLmZpcnN0TmFtZSksICJKb2huIikpKTsKICAgICAg\nICBxLnNlbGVjdChjYi5zdW0oaS5nZXQoTGluZUl0ZW1fLnByaWNlKSkpOwoK\nICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0U2l6ZUV4cHJlc3Npb24oKSB7CiAgICAgICAg\nU3RyaW5nIGpwcWwgPSAiU0VMRUNUIFNJWkUoZC5lbXBsb3llZXMpIEZST00g\nRGVwYXJ0bWVudCBkICIKICAgICAgICAgICAgKyAiV0hFUkUgZC5uYW1lID0g\nJ1NhbGVzJyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxJbnRl\nZ2VyPiBxID0gY2IuY3JlYXRlUXVlcnkoSW50ZWdlci5jbGFzcyk7CiAgICAg\nICAgUm9vdDxEZXBhcnRtZW50PiBkID0gcS5mcm9tKERlcGFydG1lbnQuY2xh\nc3MpOwogICAgICAgIHEud2hlcmUoY2IuZXF1YWwoZC5nZXQoRGVwYXJ0bWVu\ndF8ubmFtZSksICJTYWxlcyIpKTsKICAgICAgICBxLnNlbGVjdChjYi5zaXpl\nKGQuZ2V0KERlcGFydG1lbnRfLmVtcGxveWVlcykpKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdENhc2VFeHByZXNzaW9uKCkgewogICAgICAgIFN0cmluZyBqcHFs\nID0gIlNFTEVDVCBlLm5hbWUsIENBU0UgIiAKICAgICAgICAJCSsgIldIRU4g\nZS5yYXRpbmcgPSAxIFRIRU4gZS5zYWxhcnkgKiAxLjEgIgogICAgICAgICAg\nICAgICAgKyAiV0hFTiBlLnJhdGluZyA9IDIgVEhFTiBlLnNhbGFyeSAqIDEu\nMiAiCiAgICAgICAgICAgICAgICArICJFTFNFIGUuc2FsYXJ5ICogMS4wMSBF\nTkQgIgogICAgICAgICAgICArICJGUk9NIEVtcGxveWVlIGUgV0hFUkUgZS5k\nZXBhcnRtZW50Lm5hbWUgPSAnRW5naW5lZXJpbmcnIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PD8+IHEgPSBjYi5jcmVhdGVRdWVyeSgpOwogICAgICAgIFJv\nb3Q8RW1wbG95ZWU+IGUgPSBxLmZyb20oRW1wbG95ZWUuY2xhc3MpOwogICAg\nICAgIHEud2hlcmUoY2IuZXF1YWwoZS5nZXQoRW1wbG95ZWVfLmRlcGFydG1l\nbnQpLmdldChEZXBhcnRtZW50Xy5uYW1lKSwgIkVuZ2luZWVyaW5nIikpOwog\nICAgICAgIHEubXVsdGlzZWxlY3QoZS5nZXQoRW1wbG95ZWVfLm5hbWUpLCAK\nICAgICAgICAgICAgICAgIGNiLnNlbGVjdENhc2UoKQogICAgICAgICAgICAg\nICAgICAud2hlbihjYi5lcXVhbChlLmdldChFbXBsb3llZV8ucmF0aW5nKSwg\nMSksIGNiLnByb2QoZS5nZXQoRW1wbG95ZWVfLnNhbGFyeSksIDEuMSkpCiAg\nICAgICAgICAgICAgICAgIC53aGVuKGNiLmVxdWFsKGUuZ2V0KEVtcGxveWVl\nXy5yYXRpbmcpLCAyKSwgY2IucHJvZChlLmdldChFbXBsb3llZV8uc2FsYXJ5\nKSwgMS4yKSkKICAgICAgICAgICAgICAgICAgLm90aGVyd2lzZShjYi5wcm9k\nKGUuZ2V0KEVtcGxveWVlXy5zYWxhcnkpLCAxLjAxKSkpOwoKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RXhwcmVzc2lvbjEoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAiU0VMRUNUIG8ucXVhbnRpdHksIG8udG90YWxDb3N0KjEuMDgsICIKICAg\nICAgICAgICAgKyAiYS56aXBDb2RlIEZST00gQ3VzdG9tZXIgYyBKT0lOIGMu\nb3JkZXJzIG8gSk9JTiBjLmFkZHJlc3MgYSAiCiAgICAgICAgICAgICsgIldI\nRVJFIGEuc3RhdGUgPSAnQ0EnIEFORCBhLmNvdW50eSA9ICdTYW50YSBDbGFy\nYSciOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEg\nPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21l\ncj4gY3VzdCA9IHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgSm9p\nbjxDdXN0b21lciwgT3JkZXI+IG9yZGVyID0gY3VzdC5qb2luKEN1c3RvbWVy\nXy5vcmRlcnMpOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIEFkZHJlc3M+IGFk\nZHJlc3MgPSBjdXN0LmpvaW4oQ3VzdG9tZXJfLmFkZHJlc3MpOwogICAgICAg\nIHEud2hlcmUoY2IuYW5kKAogICAgICAgICAgICBjYi5lcXVhbChhZGRyZXNz\nLmdldChBZGRyZXNzXy5zdGF0ZSksICJDQSIpLCAKICAgICAgICAgICAgY2Iu\nZXF1YWwoYWRkcmVzcy5nZXQoQWRkcmVzc18uY291bnR5KSwgIlNhbnRhIENs\nYXJhIikpKTsKICAgICAgICBxLm11bHRpc2VsZWN0KG9yZGVyLmdldChPcmRl\ncl8ucXVhbnRpdHkpLCBjYi5wcm9kKG9yZGVyCiAgICAgICAgICAgICAgICAu\nZ2V0KE9yZGVyXy50b3RhbENvc3QpLCAxLjA4KSwgYWRkcmVzcy5nZXQoQWRk\ncmVzc18uemlwQ29kZSkpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShx\nLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhwcmVzc2lv\nbjMoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIHcubmFtZSBG\nUk9NIENvdXJzZSBjIEpPSU4gYy5zdHVkZW50V2FpdExpc3QgdyAiCiAgICAg\nICAgICAgICsgIldIRVJFIGMubmFtZSA9ICdDYWxjdWx1cycgQU5EIElOREVY\nKHcpID0gMCI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxTdHJp\nbmc+IHEgPSBjYi5jcmVhdGVRdWVyeShTdHJpbmcuY2xhc3MpOwogICAgICAg\nIFJvb3Q8Q291cnNlPiBjb3Vyc2UgPSBxLmZyb20oQ291cnNlLmNsYXNzKTsK\nICAgICAgICBMaXN0Sm9pbjxDb3Vyc2UsIFN0dWRlbnQ+IHcgPSBjb3Vyc2Uu\nam9pbihDb3Vyc2VfLnN0dWRlbnRXYWl0TGlzdCk7CiAgICAgICAgcS53aGVy\nZShjYi5hbmQoCiAgICAgICAgICAgIGNiLmVxdWFsKGNvdXJzZS5nZXQoQ291\ncnNlXy5uYW1lKSwgIkNhbGN1bHVzIiksCiAgICAgICAgICAgIGNiLmVxdWFs\nKHcuaW5kZXgoKSwgMCkpKS5zZWxlY3Qody5nZXQoU3R1ZGVudF8ubmFtZSkp\nOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0R2VuZXJhbENhc2VFeHByZXNzaW9uKCkg\newogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBlLm5hbWUsIENBU0Ug\nIgogICAgICAgICAgICArICJXSEVOIGUucmF0aW5nID0gMSBUSEVOIGUuc2Fs\nYXJ5ICogMS4xICIKICAgICAgICAgICAgKyAiV0hFTiBlLnJhdGluZyA9IDIg\nVEhFTiBlLnNhbGFyeSAqIDEuMiBFTFNFIGUuc2FsYXJ5ICogIgogICAgICAg\nICAgICArICIxLjAxIEVORCAiCiAgICAgICAgICAgICsgIkZST00gRW1wbG95\nZWUgZSBXSEVSRSBlLmRlcGFydG1lbnQubmFtZSA9ICdFbmdpbmVlcmluZyci\nOwogICAgICAgIENyaXRlcmlhUXVlcnk8Pz4gcSA9IGNiLmNyZWF0ZVF1ZXJ5\nKCk7CiAgICAgICAgUm9vdDxFbXBsb3llZT4gZSA9IHEuZnJvbShFbXBsb3ll\nZS5jbGFzcyk7CiAgICAgICAgcS53aGVyZShjYi5lcXVhbChlLmdldChFbXBs\nb3llZV8uZGVwYXJ0bWVudCkuZ2V0KERlcGFydG1lbnRfLm5hbWUpLCAiRW5n\naW5lZXJpbmciKSk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChlLmdldChFbXBs\nb3llZV8ubmFtZSksIAogICAgICAgICAgICAgICAgY2Iuc2VsZWN0Q2FzZSgp\nCiAgICAgICAgICAgICAgICAgIC53aGVuKGNiLmVxdWFsKGUuZ2V0KEVtcGxv\neWVlXy5yYXRpbmcpLCAxKSwgY2IucHJvZChlLmdldChFbXBsb3llZV8uc2Fs\nYXJ5KSwgMS4xKSkKICAgICAgICAgICAgICAgICAgLndoZW4oY2IuZXF1YWwo\nZS5nZXQoRW1wbG95ZWVfLnJhdGluZyksIDIpLCBjYi5wcm9kKGUuZ2V0KEVt\ncGxveWVlXy5zYWxhcnkpLCAxLjIpKQogICAgICAgICAgICAgICAgICAub3Ro\nZXJ3aXNlKGNiLnByb2QoZS5nZXQoRW1wbG95ZWVfLnNhbGFyeSksIDEuMDEp\nKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTaW1wbGVDYXNlRXhwcmVzc2lvbjEo\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGUubmFtZSwgQ0FT\nRSBlLnJhdGluZyAiCiAgICAgICAgICAgICsgIldIRU4gMSBUSEVOIGUuc2Fs\nYXJ5ICogMS4xICIKICAgICAgICAgICAgKyAiV0hFTiAyIFRIRU4gZS5zYWxh\ncnkgKiAxLjIgRUxTRSBlLnNhbGFyeSAqIDEuMDEgRU5EICIKICAgICAgICAg\nICAgKyAiRlJPTSBFbXBsb3llZSBlIFdIRVJFIGUuZGVwYXJ0bWVudC5uYW1l\nID0gJ0VuZ2luZWVyaW5nJyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBs\nZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEVt\ncGxveWVlPiBlID0gcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBx\nLndoZXJlKGNiLmVxdWFsKGUuZ2V0KEVtcGxveWVlXy5kZXBhcnRtZW50KS5n\nZXQoRGVwYXJ0bWVudF8ubmFtZSksICJFbmdpbmVlcmluZyIpKTsKICAgICAg\nICBFeHByZXNzaW9uPExvbmc+IHNhbGFyeSA9IGUuZ2V0KEVtcGxveWVlXy5z\nYWxhcnkpOyAKICAgICAgICBFeHByZXNzaW9uPEludGVnZXI+IHJhdGluZyAg\nPSBlLmdldChFbXBsb3llZV8ucmF0aW5nKTsKICAgICAgICBxLm11bHRpc2Vs\nZWN0KGUuZ2V0KEVtcGxveWVlXy5uYW1lKSwKICAgICAgICAgICAgICAgICAg\nICAgIGNiLnNlbGVjdENhc2UocmF0aW5nKS4KICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgd2hlbigxLCBjYi5wcm9kKHNhbGFyeSwgMS4xKSkKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAud2hlbigyLCBjYi5wcm9kKHNh\nbGFyeSwgMS4yKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub3Ro\nZXJ3aXNlKGNiLnByb2Qoc2FsYXJ5LCAxLjAxKSkpOwoKICAgICAgICBhc3Nl\ncnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0U2ltcGxlQ2FzZUV4cHJlc3Npb24yKCkgewogICAgICAgIFN0cmlu\nZyBqcHFsID0gIlNFTEVDVCBlLm5hbWUsIENBU0UgZS5yYXRpbmcgV0hFTiAx\nIFRIRU4gMTAgIgogICAgICAgICAgICArICJXSEVOIDIgVEhFTiAyMCBFTFNF\nIDMwIEVORCAiCiAgICAgICAgICAgICsgIkZST00gRW1wbG95ZWUgZSBXSEVS\nRSBlLmRlcGFydG1lbnQubmFtZSA9ICdFbmdpbmVlcmluZyciOwogICAgICAg\nIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5\nKCk7CiAgICAgICAgUm9vdDxFbXBsb3llZT4gZSA9IHEuZnJvbShFbXBsb3ll\nZS5jbGFzcyk7CiAgICAgICAgRXhwcmVzc2lvbjxJbnRlZ2VyPiByYXRpbmcg\nID0gZS5nZXQoRW1wbG95ZWVfLnJhdGluZyk7CiAgICAgICAgcS53aGVyZShj\nYi5lcXVhbChlLmdldChFbXBsb3llZV8uZGVwYXJ0bWVudCkuZ2V0KERlcGFy\ndG1lbnRfLm5hbWUpLCAiRW5naW5lZXJpbmciKSk7CiAgICAgICAgcS5tdWx0\naXNlbGVjdChlLmdldChFbXBsb3llZV8ubmFtZSksIAogICAgICAgICAgICAg\nICAgY2Iuc2VsZWN0Q2FzZShyYXRpbmcpCiAgICAgICAgICAgICAgICAgIC53\naGVuKDEsIDEwKQogICAgICAgICAgICAgICAgICAud2hlbigyLCAyMCkKICAg\nICAgICAgICAgICAgICAgLm90aGVyd2lzZSgzMCkpOwogICAgICAgIGFzc2Vy\ndEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RMaXRlcmFscygpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxF\nQ1QgcCBGUk9NIFBlcnNvbiBwIHdoZXJlICdKb2UnIE1FTUJFUiBPRiBwLm5p\nY2tOYW1lcyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+IHEgPSBj\nYi5jcmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIFJvb3Q8UGVy\nc29uPiBwID0gcS5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgcS5zZWxl\nY3QocCkud2hlcmUoY2IuaXNNZW1iZXIoY2IubGl0ZXJhbCgiSm9lIiksIHAu\nZ2V0KFBlcnNvbl8ubmlja05hbWVzKSkpOwoKICAgICAgICBhc3NlcnRFcXVp\ndmFsZW5jZShxLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFBhcmFtZXRlcnMxKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNF\nTEVDVCBjIEZST00gQ3VzdG9tZXIgYyBXaGVyZSBjLnN0YXR1cyA9IDpzdGF0\nIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBx\nID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJv\nb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAg\nICAgIFBhcmFtZXRlcjxJbnRlZ2VyPiBwYXJhbSA9IGNiLnBhcmFtZXRlcihJ\nbnRlZ2VyLmNsYXNzLCAic3RhdCIpOwogICAgICAgIHEuc2VsZWN0KGMpLndo\nZXJlKGNiLmVxdWFsKGMuZ2V0KEN1c3RvbWVyXy5zdGF0dXMpLCBwYXJhbSkp\nOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShuZXcgUXVlcnlEZWNvcmF0\nb3IoKSB7CiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGRlY29yYXRlKFF1ZXJ5\nIHEpIHsKICAgICAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKCJzdGF0Iiwg\nMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCBxLCBqcHFsKTsKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdFBhcmFtZXRlcnMyKCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBjIEZST00gQ3VzdG9tZXIgYyBX\naGVyZSBjLnN0YXR1cyA9IDpzdGF0IEFORCBjLm5hbWUgPSA6bmFtZSI7CiAg\nICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4gcSA9IGNi\nLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBSb290PEN1\nc3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBQ\nYXJhbWV0ZXI8SW50ZWdlcj4gcGFyYW0xID0gY2IucGFyYW1ldGVyKEludGVn\nZXIuY2xhc3MsICJzdGF0Iik7CiAgICAgICAgUGFyYW1ldGVyPFN0cmluZz4g\ncGFyYW0yID0gY2IucGFyYW1ldGVyKFN0cmluZy5jbGFzcywgIm5hbWUiKTsK\nICAgICAgICBxLnNlbGVjdChjKS53aGVyZShjYi5hbmQoY2IuZXF1YWwoYy5n\nZXQoQ3VzdG9tZXJfLnN0YXR1cyksIHBhcmFtMSksIAogICAgICAgICAgICAg\nICAgY2IuZXF1YWwoYy5nZXQoQ3VzdG9tZXJfLm5hbWUpLCBwYXJhbTIpKSk7\nCgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKG5ldyBRdWVyeURlY29yYXRv\ncigpIHsKICAgICAgICAgICAgcHVibGljIHZvaWQgZGVjb3JhdGUoUXVlcnkg\ncSkgewogICAgICAgICAgICAgICAgcS5zZXRQYXJhbWV0ZXIoInN0YXQiLCAx\nKTsKICAgICAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKCJuYW1lIiwgInRl\nc3QiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIHEsIGpwcWwpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0UGFyYW1ldGVyczMoKSB7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGMgRlJPTSBDdXN0b21lciBj\nIFdoZXJlIGMuc3RhdHVzID0gOnN0YXQiOwoKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xh\nc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9t\nZXIuY2xhc3MpOwogICAgICAgIFBhcmFtZXRlcjxJbnRlZ2VyPiBwYXJhbSA9\nIGNiLnBhcmFtZXRlcihJbnRlZ2VyLmNsYXNzLCAic3RhdCIpOwogICAgICAg\nIHEuc2VsZWN0KGMpLndoZXJlKGNiLmVxdWFsKGMuZ2V0KEN1c3RvbWVyXy5z\ndGF0dXMpLCBwYXJhbSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2\nYWxlbmNlKG5ldyBRdWVyeURlY29yYXRvcigpIHsKICAgICAgICAgICAgcHVi\nbGljIHZvaWQgZGVjb3JhdGUoUXVlcnkgcSkgewogICAgICAgICAgICAgICAg\ncS5zZXRQYXJhbWV0ZXIoInN0YXQiLCAxKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0sIHEsIGpwcWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UGFyYW1ldGVyczQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VM\nRUNUIGMgRlJPTSBDdXN0b21lciBjIFdoZXJlIGMuc3RhdHVzID0gOnN0YXQg\nQU5EIGMubmFtZSA9IDpuYW1lIjsKICAgICAgICAKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIu\nY2xhc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3Vz\ndG9tZXIuY2xhc3MpOwogICAgICAgIFBhcmFtZXRlcjxJbnRlZ2VyPiBwYXJh\nbTEgPSBjYi5wYXJhbWV0ZXIoSW50ZWdlci5jbGFzcywgInN0YXQiKTsKICAg\nICAgICBQYXJhbWV0ZXI8U3RyaW5nPiBwYXJhbTIgPSBjYi5wYXJhbWV0ZXIo\nU3RyaW5nLmNsYXNzLCAibmFtZSIpOwogICAgICAgIHEuc2VsZWN0KGMpLndo\nZXJlKGNiLmFuZChjYi5lcXVhbChjLmdldChDdXN0b21lcl8uc3RhdHVzKSwg\ncGFyYW0xKSwgCiAgICAgICAgICAgICAgICBjYi5lcXVhbChjLmdldChDdXN0\nb21lcl8ubmFtZSksIHBhcmFtMikpKTsKICAgICAgICBhc3NlcnRFcXVpdmFs\nZW5jZShuZXcgUXVlcnlEZWNvcmF0b3IoKSB7CiAgICAgICAgICAgIHB1Ymxp\nYyB2b2lkIGRlY29yYXRlKFF1ZXJ5IHEpIHsKICAgICAgICAgICAgICAgIHEu\nc2V0UGFyYW1ldGVyKCJzdGF0IiwgMSk7CiAgICAgICAgICAgICAgICBxLnNl\ndFBhcmFtZXRlcigibmFtZSIsICJ0ZXN0Iik7CiAgICAgICAgICAgIH0KICAg\nICAgICB9LCBxLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFBhcmFtZXRlcnM1KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNF\nTEVDVCBjIEZST00gQ3VzdG9tZXIgYyBXaGVyZSBjLnN0YXR1cyBJTiAoOmNv\nbGwpIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVy\nPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAg\nIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwog\nICAgICAgIFBhcmFtZXRlckV4cHJlc3Npb248TGlzdD4gcGFyYW0xID0gY2Iu\ncGFyYW1ldGVyKExpc3QuY2xhc3MsICJjb2xsIik7CiAgICAgICAgcS53aGVy\nZShjLmdldChDdXN0b21lcl8uc3RhdHVzKS5pbihwYXJhbTEpKTsKICAgICAg\nICBxLnNlbGVjdChjKTsKICAgICAgICBmaW5hbCBMaXN0IHZhbHMgPSBuZXcg\nQXJyYXlMaXN0KCk7CiAgICAgICAgdmFscy5hZGQoMSk7CiAgICAgICAgdmFs\ncy5hZGQoMik7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UobmV3IFF1ZXJ5\nRGVjb3JhdG9yKCkgewogICAgICAgICAgICBwdWJsaWMgdm9pZCBkZWNvcmF0\nZShRdWVyeSBxKSB7CiAgICAgICAgICAgICAgICBxLnNldFBhcmFtZXRlcigi\nY29sbCIsIHZhbHMpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgcSwganBx\nbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RTZWxlY3RMaXN0\nMSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1Qgdi5sb2NhdGlv\nbi5zdHJlZXQsIEtFWShpKS50aXRsZSwgVkFMVUUoaSkgRlJPTSAiCiAgICAg\nICAgICAgICsgIlZpZGVvU3RvcmUgdiBKT0lOIHYudmlkZW9JbnZlbnRvcnkg\naSBXSEVSRSB2LmxvY2F0aW9uLnppcENvZGUgPSAiCiAgICAgICAgICAgICsg\nIic5NDMwMScgQU5EIFZBTFVFKGkpID4gMCI7CiAgICAgICAgCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxUdXBsZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnko\nKTsKICAgICAgICBSb290PFZpZGVvU3RvcmU+IHYgPSBxLmZyb20oVmlkZW9T\ndG9yZS5jbGFzcyk7CiAgICAgICAgTWFwSm9pbjxWaWRlb1N0b3JlLCBNb3Zp\nZSwgSW50ZWdlcj4gaSA9IHYuam9pbihWaWRlb1N0b3JlXy52aWRlb0ludmVu\ndG9yeSk7CiAgICAgICAgcS53aGVyZShjYi5hbmQoCiAgICAgICAgY2IuZXF1\nYWwodi5nZXQoVmlkZW9TdG9yZV8ubG9jYXRpb24pLmdldChBZGRyZXNzXy56\naXBDb2RlKSwgIjk0MzAxIiksIAogICAgICAgIGNiLmd0KGkudmFsdWUoKSwg\nMCkpKTsKICAgICAgICBxLm11bHRpc2VsZWN0KHYuZ2V0KFZpZGVvU3RvcmVf\nLmxvY2F0aW9uKS5nZXQoQWRkcmVzc18uc3RyZWV0KSwgCiAgICAgICAgICAg\nICAgICBpLmtleSgpLmdldChNb3ZpZV8udGl0bGUpLCAKICAgICAgICAgICAg\nICAgIGkudmFsdWUoKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEs\nIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3ROZXdDb25zdHJ1\nY3QoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIE5FVyBDdXN0\nb21lckRldGFpbHMoYy5pZCwgYy5zdGF0dXMpIEZST00gQ3VzdG9tZXIgYyI7\nCiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lckRldGFp\nbHM+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lckRldGFpbHMuY2xhc3Mp\nOwoKICAgICAgICBSb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVy\nLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChjYi5jb25zdHJ1Y3QoQ3VzdG9t\nZXJEZXRhaWxzLmNsYXNzLCBjLmdldChDdXN0b21lcl8uaWQpLCBjLmdldChD\ndXN0b21lcl8uc3RhdHVzKSkpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKHEsIGpwcWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29u\nc3RydWN0b3JJblByb2plY3Rpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAiU0VMRUNUIE5FVyBDdXN0b21lckRldGFpbHMoYy5pZCwgYy5zdGF0dXMs\nIG8ucXVhbnRpdHkpICIKICAgICAgICAgICAgICAgICAgICArICJGUk9NIEN1\nc3RvbWVyIGMgSk9JTiBjLm9yZGVycyBvIFdIRVJFIG8ucXVhbnRpdHkgPiAx\nMDAiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXJE\nZXRhaWxzPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXJEZXRhaWxzLmNs\nYXNzKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3Rv\nbWVyLmNsYXNzKTsKICAgICAgICBTZXRKb2luPEN1c3RvbWVyLCBPcmRlcj4g\nbyA9IGMuam9pbihDdXN0b21lcl8ub3JkZXJzKTsKICAgICAgICBxLndoZXJl\nKGNiLmd0KG8uZ2V0KE9yZGVyXy5xdWFudGl0eSksIDEwMCkpOwogICAgICAg\nIHEuc2VsZWN0KGNiLmNvbnN0cnVjdChDdXN0b21lckRldGFpbHMuY2xhc3Ms\nIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5nZXQoQ3VzdG9tZXJf\nLmlkKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmdldChDdXN0\nb21lcl8uc3RhdHVzKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBv\nLmdldChPcmRlcl8ucXVhbnRpdHkpKSk7CgogICAgICAgIGFzc2VydEVxdWl2\nYWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RN\ndWx0aXBsZUNvbnN0cnVjdG9ySW5Qcm9qZWN0aW9uKCkgewogICAgICAgIFN0\ncmluZyBqcHFsID0gIlNFTEVDVCBORVcgQ3VzdG9tZXJEZXRhaWxzKGMuaWQs\nIGMuc3RhdHVzKSwgIiAKICAgICAgICAgICAgICAgICAgICArICJORVcgQ3Vz\ndG9tZXJGdWxsTmFtZShjLmZpcnN0TmFtZSwgYy5sYXN0TmFtZSkgIgogICAg\nICAgICAgICAgICAgICAgICsgIkZST00gQ3VzdG9tZXIgYyI7CiAgICAgICAg\nCiAgICAgICAgQ3JpdGVyaWFRdWVyeTw/PiBxID0gY2IuY3JlYXRlUXVlcnko\nKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVy\nLmNsYXNzKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGNiLmNvbnN0cnVjdChD\ndXN0b21lckRldGFpbHMuY2xhc3MsIAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGMuZ2V0KEN1c3RvbWVyXy5pZCksIAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGMuZ2V0KEN1c3RvbWVyXy5zdGF0dXMpKSwKICAgICAg\nICAgICAgICAgIGNiLmNvbnN0cnVjdChDdXN0b21lckZ1bGxOYW1lLmNsYXNz\nLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmdldChDdXN0b21l\ncl8uZmlyc3ROYW1lKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nYy5nZXQoQ3VzdG9tZXJfLmxhc3ROYW1lKSkKICAgICAgICApOwogICAgICAg\nIGVtLmNyZWF0ZVF1ZXJ5KHEpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAK\nICAgICAgICAvLyBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0K\nICAgIAogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3VicXVlcmllczEoKSB7\nCiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGdvb2RDdXN0b21lciBG\nUk9NIEN1c3RvbWVyIGdvb2RDdXN0b21lciBXSEVSRSAiCiAgICAgICAgICAg\nICsgImdvb2RDdXN0b21lci5iYWxhbmNlT3dlZCA8IChTRUxFQ1QgQVZHKGMu\nYmFsYW5jZU93ZWQpICIgCiAgICAgICAgICAgICsgIiBGUk9NICIKICAgICAg\nICAgICAgKyAiQ3VzdG9tZXIgYykiOwogICAgICAgIENyaXRlcmlhUXVlcnk8\nQ3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7\nCiAgICAgICAgUm9vdDxDdXN0b21lcj4gZ29vZEN1c3RvbWVyID0gcS5mcm9t\nKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBTdWJxdWVyeTxEb3VibGU+IHNx\nID0gcS5zdWJxdWVyeShEb3VibGUuY2xhc3MpOwogICAgICAgIFJvb3Q8Q3Vz\ndG9tZXI+IGMgPSBzcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBx\nLndoZXJlKGNiLmx0KGdvb2RDdXN0b21lci5nZXQoQ3VzdG9tZXJfLmJhbGFu\nY2VPd2VkKSwgc3Euc2VsZWN0KGNiCiAgICAgICAgICAgICAgICAuYXZnKGMu\nZ2V0KEN1c3RvbWVyXy5iYWxhbmNlT3dlZCkpKSkpOwogICAgICAgIHEuc2Vs\nZWN0KGdvb2RDdXN0b21lcik7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTdWJxdWVy\naWVzMigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgRElTVElO\nQ1QgZW1wIEZST00gRW1wbG95ZWUgZW1wIFdIRVJFIEVYSVNUUyAoIgogICAg\nICAgICAgICArICJTRUxFQ1Qgc3BvdXNlRW1wIEZST00gRW1wbG95ZWUgc3Bv\ndXNlRW1wIFdIRVJFIHNwb3VzZUVtcCA9IgogICAgICAgICAgICArICIgZW1w\nLnNwb3VzZSkiOwogICAgICAgIENyaXRlcmlhUXVlcnk8RW1wbG95ZWU+IHEg\nPSBjYi5jcmVhdGVRdWVyeShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAgUm9v\ndDxFbXBsb3llZT4gZW1wID0gcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsKICAg\nICAgICBTdWJxdWVyeTxFbXBsb3llZT4gc3EgPSBxLnN1YnF1ZXJ5KEVtcGxv\neWVlLmNsYXNzKTsKICAgICAgICBSb290PEVtcGxveWVlPiBzcG91c2VFbXAg\nPSBzcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBzcS5zZWxlY3Qo\nc3BvdXNlRW1wKTsKICAgICAgICBzcS53aGVyZShjYi5lcXVhbChzcG91c2VF\nbXAsIGVtcC5nZXQoRW1wbG95ZWVfLnNwb3VzZSkpKTsKICAgICAgICBxLndo\nZXJlKGNiLmV4aXN0cyhzcSkpOwogICAgICAgIHEuc2VsZWN0KGVtcCkuZGlz\ndGluY3QodHJ1ZSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpw\ncWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTdWJxdWVyaWVzMygp\nIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgZW1wIEZST00gRW1w\nbG95ZWUgZW1wIFdIRVJFIGVtcC5zYWxhcnkgPiBBTEwgKCIKICAgICAgICAg\nICAgKyAiU0VMRUNUIG0uc2FsYXJ5IEZST00gTWFuYWdlciBtIFdIRVJFIG0u\nZGVwYXJ0bWVudCA9ICIKICAgICAgICAgICAgKyAiZW1wLmRlcGFydG1lbnQp\nIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEVtcGxveWVlPiBxID0gY2IuY3Jl\nYXRlUXVlcnkoRW1wbG95ZWUuY2xhc3MpOwogICAgICAgIFJvb3Q8RW1wbG95\nZWU+IGVtcCA9IHEuZnJvbShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAgcS5z\nZWxlY3QoZW1wKTsKICAgICAgICBTdWJxdWVyeTxCaWdEZWNpbWFsPiBzcSA9\nIHEuc3VicXVlcnkoQmlnRGVjaW1hbC5jbGFzcyk7CiAgICAgICAgUm9vdDxN\nYW5hZ2VyPiBtID0gc3EuZnJvbShNYW5hZ2VyLmNsYXNzKTsKICAgICAgICBz\ncS5zZWxlY3QobS5nZXQoTWFuYWdlcl8uc2FsYXJ5KSk7CiAgICAgICAgc3Eu\nd2hlcmUoY2IuZXF1YWwobS5nZXQoTWFuYWdlcl8uZGVwYXJ0bWVudCksIGVt\ncAogICAgICAgICAgICAgICAgLmdldChFbXBsb3llZV8uZGVwYXJ0bWVudCkp\nKTsKICAgICAgICBxLndoZXJlKGNiLmd0KGVtcC5nZXQoRW1wbG95ZWVfLnNh\nbGFyeSksIGNiLmFsbChzcSkpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVu\nY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFN1YnF1\nZXJpZXM0KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBjIEZS\nT00gQ3VzdG9tZXIgYyBXSEVSRSAiCiAgICAgICAgICAgICsgIihTRUxFQ1Qg\nQ09VTlQobykgRlJPTSBjLm9yZGVycyBvKSA+IDEwIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9t\nZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMxID0gcS5mcm9t\nKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChjMSk7CiAgICAg\nICAgU3VicXVlcnk8TG9uZz4gc3EzID0gcS5zdWJxdWVyeShMb25nLmNsYXNz\nKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBjMiA9IHNxMy5jb3JyZWxhdGUo\nYzEpOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIE9yZGVyPiBvID0gYzIuam9p\nbihDdXN0b21lcl8ub3JkZXJzKTsKICAgICAgICBxLndoZXJlKGNiLmd0KHNx\nMy5zZWxlY3QoY2IuY291bnQobykpLCAxMCkpOwoKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0U3VicXVlcmllczUoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VM\nRUNUIG8gRlJPTSBPcmRlciBvIFdIRVJFIDEwMDAwIDwgQUxMICgiCiAgICAg\nICAgICAgICsgIlNFTEVDVCBhLmJhbGFuY2UgRlJPTSBvLmN1c3RvbWVyIGMg\nSk9JTiBjLmFjY291bnRzIGEpIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9y\nZGVyPiBxID0gY2IuY3JlYXRlUXVlcnkoT3JkZXIuY2xhc3MpOwogICAgICAg\nIFJvb3Q8T3JkZXI+IG8gPSBxLmZyb20oT3JkZXIuY2xhc3MpOwogICAgICAg\nIHEuc2VsZWN0KG8pOwogICAgICAgIFN1YnF1ZXJ5PEludGVnZXI+IHNxID0g\ncS5zdWJxdWVyeShJbnRlZ2VyLmNsYXNzKTsKICAgICAgICBSb290PE9yZGVy\nPiBvc3EgPSBzcS5jb3JyZWxhdGUobyk7CiAgICAgICAgSm9pbjxPcmRlciwg\nQ3VzdG9tZXI+IGMgPSBvc3Euam9pbihPcmRlcl8uY3VzdG9tZXIpOwogICAg\nICAgIEpvaW48Q3VzdG9tZXIsIEFjY291bnQ+IGEgPSBjLmpvaW4oQ3VzdG9t\nZXJfLmFjY291bnRzKTsKICAgICAgICBzcS5zZWxlY3QoYS5nZXQoQWNjb3Vu\ndF8uYmFsYW5jZSkpOwogICAgICAgIHEud2hlcmUoY2IubHQoY2IubGl0ZXJh\nbCgxMDAwMCksIGNiLmFsbChzcSkpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZh\nbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFN1\nYnF1ZXJpZXM2KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBv\nIEZST00gT3JkZXIgbyBKT0lOIG8uY3VzdG9tZXIgYyBXSEVSRSAxMDAwMCA8\nICIKICAgICAgICAgICAgKyAiQUxMIChTRUxFQ1QgYS5iYWxhbmNlIEZST00g\nYy5hY2NvdW50cyBhKSI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxPcmRlcj4g\ncSA9IGNiLmNyZWF0ZVF1ZXJ5KE9yZGVyLmNsYXNzKTsKICAgICAgICBSb290\nPE9yZGVyPiBvID0gcS5mcm9tKE9yZGVyLmNsYXNzKTsKICAgICAgICBxLnNl\nbGVjdChvKTsKICAgICAgICBKb2luPE9yZGVyLCBDdXN0b21lcj4gYyA9IG8u\nam9pbihPcmRlcl8uY3VzdG9tZXIpOwogICAgICAgIFN1YnF1ZXJ5PEludGVn\nZXI+IHNxID0gcS5zdWJxdWVyeShJbnRlZ2VyLmNsYXNzKTsKICAgICAgICBK\nb2luPE9yZGVyLCBDdXN0b21lcj4gY3NxID0gc3EuY29ycmVsYXRlKGMpOwog\nICAgICAgIEpvaW48Q3VzdG9tZXIsIEFjY291bnQ+IGEgPSBjc3Euam9pbihD\ndXN0b21lcl8uYWNjb3VudHMpOwogICAgICAgIHNxLnNlbGVjdChhLmdldChB\nY2NvdW50Xy5iYWxhbmNlKSk7CiAgICAgICAgcS53aGVyZShjYi5sdChjYi5s\naXRlcmFsKDEwMDAwKSwgY2IuYWxsKHNxKSkpOwoKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0R3JvdXBCeUFuZEhhdmluZygpIHsKICAgICAgICBTdHJpbmcganBxbCA9\nICJTRUxFQ1QgYy5zdGF0dXMsIEFWRyhjLmZpbGxlZE9yZGVyQ291bnQpLCBD\nT1VOVChjKSBGUk9NICIKICAgICAgICAgICAgKyAiQ3VzdG9tZXIgYyBHUk9V\nUCBCWSBjLnN0YXR1cyBIQVZJTkcgYy5zdGF0dXMgSU4gKDEsIDIpIjsKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVR\ndWVyeSgpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3Vz\ndG9tZXIuY2xhc3MpOwogICAgICAgIHEuZ3JvdXBCeShjLmdldChDdXN0b21l\ncl8uc3RhdHVzKSk7CiAgICAgICAgcS5oYXZpbmcoY2IuaW4oYy5nZXQoQ3Vz\ndG9tZXJfLnN0YXR1cykpLnZhbHVlKDEpLnZhbHVlKDIpKTsKICAgICAgICBx\nLm11bHRpc2VsZWN0KGMuZ2V0KEN1c3RvbWVyXy5zdGF0dXMpLCBjYi5hdmco\nYwogICAgICAgICAgICAgICAgLmdldChDdXN0b21lcl8uZmlsbGVkT3JkZXJD\nb3VudCkpLCBjYi5jb3VudChjKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RPcmRl\ncmluZzEoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8gRlJP\nTSBDdXN0b21lciBjIEpPSU4gYy5vcmRlcnMgbyAiCiAgICAgICAgICAgICsg\nIkpPSU4gYy5hZGRyZXNzIGEgV0hFUkUgYS5zdGF0ZSA9ICdDQScgT1JERVIg\nQlkgby5xdWFudGl0eSBERVNDLCAiCiAgICAgICAgICAgICsgIm8udG90YWxD\nb3N0IjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9yZGVyPiBxID0gY2IuY3Jl\nYXRlUXVlcnkoT3JkZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+\nIGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIEpvaW48Q3Vz\ndG9tZXIsIE9yZGVyPiBvID0gYy5qb2luKEN1c3RvbWVyXy5vcmRlcnMpOwog\nICAgICAgIEpvaW48Q3VzdG9tZXIsIEFkZHJlc3M+IGEgPSBjLmpvaW4oQ3Vz\ndG9tZXJfLmFkZHJlc3MpOwogICAgICAgIHEud2hlcmUoY2IuZXF1YWwoYS5n\nZXQoQWRkcmVzc18uc3RhdGUpLCAiQ0EiKSk7CiAgICAgICAgcS5vcmRlckJ5\nKGNiLmRlc2Moby5nZXQoT3JkZXJfLnF1YW50aXR5KSksIGNiLmFzYyhvCiAg\nICAgICAgICAgICAgICAuZ2V0KE9yZGVyXy50b3RhbENvc3QpKSk7CiAgICAg\nICAgcS5zZWxlY3Qobyk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEs\nIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RPcmRlcmluZzIo\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8ucXVhbnRpdHks\nIGEuemlwQ29kZSBGUk9NIEN1c3RvbWVyIGMgIgogICAgICAgICAgICArICJK\nT0lOIGMub3JkZXJzIG8gSk9JTiBjLmFkZHJlc3MgYSBXSEVSRSBhLnN0YXRl\nID0gJ0NBJyAiCiAgICAgICAgICAgICsgIk9SREVSIEJZIG8ucXVhbnRpdHks\nIGEuemlwQ29kZSI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBsZT4gcSA9\nIGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEN1c3RvbWVy\nPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBKb2luPEN1\nc3RvbWVyLCBPcmRlcj4gbyA9IGMuam9pbihDdXN0b21lcl8ub3JkZXJzKTsK\nICAgICAgICBKb2luPEN1c3RvbWVyLCBBZGRyZXNzPiBhID0gYy5qb2luKEN1\nc3RvbWVyXy5hZGRyZXNzKTsKICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGEu\nZ2V0KEFkZHJlc3NfLnN0YXRlKSwgIkNBIikpOwogICAgICAgIHEub3JkZXJC\neShjYi5hc2Moby5nZXQoT3JkZXJfLnF1YW50aXR5KSksIGNiLmFzYyhhCiAg\nICAgICAgICAgICAgICAuZ2V0KEFkZHJlc3NfLnppcENvZGUpKSk7CiAgICAg\nICAgcS5tdWx0aXNlbGVjdChvLmdldChPcmRlcl8ucXVhbnRpdHkpLCBhLmdl\ndChBZGRyZXNzXy56aXBDb2RlKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RPcmRl\ncmluZzMoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8ucXVh\nbnRpdHksIG8udG90YWxDb3N0ICogMS4wOCBBUyB0YXhlZENvc3QsICIKICAg\nICAgICAgICAgKyAiYS56aXBDb2RlIEZST00gQ3VzdG9tZXIgYyBKT0lOIGMu\nb3JkZXJzIG8gSk9JTiBjLmFkZHJlc3MgYSAiCiAgICAgICAgICAgICsgIldI\nRVJFIGEuc3RhdGUgPSAnQ0EnIEFORCBhLmNvdW50eSA9ICdTYW50YSBDbGFy\nYScgIgogICAgICAgICAgICArICJPUkRFUiBCWSBvLnF1YW50aXR5LCB0YXhl\nZENvc3QsIGEuemlwQ29kZSI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBs\nZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEN1\nc3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBK\nb2luPEN1c3RvbWVyLCBPcmRlcj4gbyA9IGMuam9pbihDdXN0b21lcl8ub3Jk\nZXJzKTsKICAgICAgICBKb2luPEN1c3RvbWVyLCBBZGRyZXNzPiBhID0gYy5q\nb2luKEN1c3RvbWVyXy5hZGRyZXNzKTsKICAgICAgICBFeHByZXNzaW9uPERv\ndWJsZT4gdGF4ZWRDb3N0ID0gKEV4cHJlc3Npb248RG91YmxlPiljYi5wcm9k\nKG8uZ2V0KE9yZGVyXy50b3RhbENvc3QpLCAxLjA4KS5hbGlhcygidGF4ZWRD\nb3N0Iik7CiAgICAgICAgcS53aGVyZShjYi5lcXVhbChhLmdldChBZGRyZXNz\nXy5zdGF0ZSksICJDQSIpLCAKICAgICAgICAgICAgICAgIGNiLmVxdWFsKGEu\nZ2V0KEFkZHJlc3NfLmNvdW50eSksICJTYW50YSBDbGFyYSIpKTsKICAgICAg\nICBxLm9yZGVyQnkoY2IuYXNjKG8uZ2V0KE9yZGVyXy5xdWFudGl0eSkpLCAK\nICAgICAgICAgICAgICAgIGNiLmFzYyh0YXhlZENvc3QpLAogICAgICAgICAg\nICAgICAgY2IuYXNjKGEuZ2V0KEFkZHJlc3NfLnppcENvZGUpKSk7CiAgICAg\nICAgcS5tdWx0aXNlbGVjdChvLmdldChPcmRlcl8ucXVhbnRpdHkpLCB0YXhl\nZENvc3QsIGEuZ2V0KEFkZHJlc3NfLnppcENvZGUpKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RPcmRlcmluZzQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAiU0VMRUNUIGMgRlJPTSBDdXN0b21lciBjIE9SREVSIEJZIGMubmFtZSBE\nRVNDLCBjLnN0YXR1cyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21l\ncj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAg\nICBSb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsK\nICAgICAgICBxLm9yZGVyQnkoY2IuZGVzYyhjLmdldChDdXN0b21lcl8ubmFt\nZSkpLCAKICAgICAgICAgICAgICAgICAgY2IuYXNjKGMuZ2V0KEN1c3RvbWVy\nXy5zdGF0dXMpKSk7CiAgICAgICAgcS5zZWxlY3QoYyk7CgogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RPcmRlcmluZzUoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nU0VMRUNUIGMuZmlyc3ROYW1lLCBjLmxhc3ROYW1lLCBjLmJhbGFuY2VPd2Vk\nIEZST00gQ3VzdG9tZXIgYyBPUkRFUiBCWSBjLm5hbWUgREVTQywgYy5zdGF0\ndXMiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEg\nPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21l\ncj4gYyA9IHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgcS5vcmRl\nckJ5KGNiLmRlc2MoYy5nZXQoQ3VzdG9tZXJfLm5hbWUpKSwgY2IuYXNjKGMK\nICAgICAgICAgICAgICAgIC5nZXQoQ3VzdG9tZXJfLnN0YXR1cykpKTsKICAg\nICAgICBxLm11bHRpc2VsZWN0KGMuZ2V0KEN1c3RvbWVyXy5maXJzdE5hbWUp\nLCBjLmdldChDdXN0b21lcl8ubGFzdE5hbWUpLCBjCiAgICAgICAgICAgICAg\nICAuZ2V0KEN1c3RvbWVyXy5iYWxhbmNlT3dlZCkpOwoKICAgICAgICBhc3Nl\ncnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KICAgIAogICAgLyoqCiAg\nICAgKiAwLWFyZyBmdW5jdGlvbiB3b3JrcyBvbmx5IGlmIHRoZXJlIGlzIG90\naGVyIHByb2plY3Rpb24gaXRlbXMgdG8gZGV0ZXJtaW5lIHRoZSB0YWJsZSB0\nbyBzZWxlY3QgZnJvbS4gCiAgICAgKi8KICAgIEBBbGxvd0ZhaWx1cmUobWVz\nc2FnZT0icnVucyBvbmx5IG9uIGRhdGFiYXNlcyB3aXRoIENVUlJFTlRfVVNF\nUigpIGZ1bmN0aW9uIGUuZy4gTXlTUUwgYnV0IG5vdCBEZXJieSIpCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RnVuY3Rpb25XaXRoTm9Bcmd1bWVudCgpIHsKICAg\nICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgYy5iYWxhbmNlT3dlZCBGUk9N\nIEN1c3RvbWVyIGMiOwogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIENV\nUlJFTlRfVVNFUigpLCB0MC5iYWxhbmNlT3dlZCBGUk9NIENSX0NVU1QgdDAi\nOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBj\nYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4g\nYyA9IHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgcS5tdWx0aXNl\nbGVjdChjYi5mdW5jdGlvbigiQ1VSUkVOVF9VU0VSIiwgU3RyaW5nLmNsYXNz\nLCAoRXhwcmVzc2lvbjw/PltdKW51bGwpLCBjLmdldChDdXN0b21lcl8uYmFs\nYW5jZU93ZWQpKTsKICAgICAgICAKICAgICAgICBleGVjdXRlQW5kQ29tcGFy\nZVNRTChxLCBzcWwpOwovLyAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwg\nanBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEZ1bmN0aW9uV2l0\naE9uZUFyZ3VtZW50KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVD\nVCBNQVgoYy5iYWxhbmNlT3dlZCkgRlJPTSBDdXN0b21lciBjIjsKICAgICAg\nICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRl\nVHVwbGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZy\nb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoY2Iu\nZnVuY3Rpb24oIk1BWCIsIEludGVnZXIuY2xhc3MsIGMuZ2V0KEN1c3RvbWVy\nXy5iYWxhbmNlT3dlZCkpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVp\ndmFsZW5jZShxLCBqcHFsKTsKCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RGdW5jdGlvbldpdGhUd29Bcmd1bWVudCgpIHsKICAgICAgICBTdHJp\nbmcganBxbCA9ICJTRUxFQ1QgTU9EKGMuYmFsYW5jZU93ZWQsMTApIEZST00g\nQ3VzdG9tZXIgYyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxU\ndXBsZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290\nPEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAg\nICBxLm11bHRpc2VsZWN0KGNiLmZ1bmN0aW9uKCJNT0QiLCBJbnRlZ2VyLmNs\nYXNzLCBjLmdldChDdXN0b21lcl8uYmFsYW5jZU93ZWQpLCBjYi5saXRlcmFs\nKDEwKSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEs\nIGpwcWwpOwoKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEZ1bmN0\naW9uV2l0aEZ1bmN0aW9uQXJndW1lbnRJbk9yZGVyQnkoKSB7CiAgICAgICAg\nU3RyaW5nIGpwcWwgPSAiU0VMRUNUIE1PRChjLmJhbGFuY2VPd2VkLDEwKSBG\nUk9NIEN1c3RvbWVyIGMgV0hFUkUgTEVOR1RIKGMubmFtZSk+MyBPUkRFUiBC\nWSBMRU5HVEgoYy5uYW1lKSI7CiAgICAgICAgU3RyaW5nIHNxbCA9ICJTRUxF\nQ1QgTU9EKHQwLmJhbGFuY2VPd2VkLCA/KSwgTEVOR1RIKHQwLm5hbWUpIEZS\nT00gQ1JfQ1VTVCB0MCBXSEVSRSAoTEVOR1RIKHQwLm5hbWUpID4gPykgIiAr\nCiAgICAgICAgICAgICAgICAgICAgICJPUkRFUiBCWSBMRU5HVEgodDAubmFt\nZSkgQVNDIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxl\nPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q3Vz\ndG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIEV4\ncHJlc3Npb248SW50ZWdlcj4gbmFtZUxlbmd0aCA9IGNiLmZ1bmN0aW9uKCJM\nRU5HVEgiLCBJbnRlZ2VyLmNsYXNzLCBjLmdldChDdXN0b21lcl8ubmFtZSkp\nOwogICAgICAgIHEubXVsdGlzZWxlY3QoY2IuZnVuY3Rpb24oIk1PRCIsIElu\ndGVnZXIuY2xhc3MsIGMuZ2V0KEN1c3RvbWVyXy5iYWxhbmNlT3dlZCksIGNi\nLmxpdGVyYWwoMTApKSk7CiAgICAgICAgcS53aGVyZShjYi5ncmVhdGVyVGhh\nbihuYW1lTGVuZ3RoLCAzKSk7CiAgICAgICAgcS5vcmRlckJ5KGNiLmFzYyhu\nYW1lTGVuZ3RoKSk7CiAgICAgICAgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBh\ncmVTUUwocSwgc3FsKTsKCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEtl\neXMxKCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUs\nIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAg\nICArICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0g\ndDEuSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhU\nIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgIiArIAogICAgICAg\nICAgICAiKCh0MS5LRVkwID0gPyBPUiB0MS5LRVkwID0gPyBPUiB0MS5LRVkw\nID0gPyBPUiB0MS5LRVkwID0gPyBPUiB0MS5LRVkwID0gPykgIgogICAgICAg\nICAgICArICJBTkQgMCA8IChTRUxFQ1QgQ09VTlQoKikgRlJPTSBDUl9JVEVN\nX3Bob3RvcyBXSEVSRSBDUl9JVEVNX3Bob3Rvcy5JVEVNX0lEID0gdDAuaWQp\nKSI7CgogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5j\ncmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVt\nPiBpdGVtID0gcS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48\nSXRlbSwgU3RyaW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8u\ncGhvdG9zKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1f\nLm5hbWUpLCBwaG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBo\nb3RvMSA9IG5ldyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhv\ndG8gcDEgPSBuZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwo\nImxhYmVsIiArIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIg\nKyBpLCBwMSk7CiAgICAgICAgfQogICAgICAgIHEud2hlcmUocGhvdG8ua2V5\nKCkuaW4oY2Iua2V5cyhwaG90bzEpKSk7IAogICAgICAgIGV4ZWN1dGVBbmRD\nb21wYXJlU1FMKHEsIHNxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndEtleXMyKCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5h\nbWUsIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAg\nICAgICArICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlk\nID0gdDEuSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1Jf\nUEhUIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgIiArIAogICAg\nICAgICAgICAiKHQxLktFWTAgSU4gKD8sID8sID8sID8sID8pKSI7CgogICAg\nICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVy\neShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0g\ncS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3Ry\naW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsK\nICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBw\naG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5l\ndyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBu\nZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiAr\nIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7\nCiAgICAgICAgfQogICAgICAgIHEud2hlcmUoY2IuaXNNZW1iZXIocGhvdG8u\na2V5KCksIGNiLmtleXMocGhvdG8xKSkpOyAKICAgICAgICBleGVjdXRlQW5k\nQ29tcGFyZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RLZXlzMygpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5u\nYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAg\nICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5p\nZCA9IHQxLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENS\nX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFICgxIDw+IDEp\nIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4gcSA9IGNiLmNy\nZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBSb290PEl0ZW0+\nIGl0ZW0gPSBxLmZyb20oSXRlbS5jbGFzcyk7CiAgICAgICAgTWFwSm9pbjxJ\ndGVtLCBTdHJpbmcsIFBob3RvPiBwaG90byA9IGl0ZW0uam9pbihJdGVtXy5w\naG90b3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoaXRlbS5nZXQoSXRlbV8u\nbmFtZSksIHBob3RvKTsKICAgICAgICBNYXA8U3RyaW5nLCBQaG90bz4gcGhv\ndG8xID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQaG90bz4oKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgICAgICBQaG90\nbyBwMSA9IG5ldyBQaG90bygpOwogICAgICAgICAgICBwMS5zZXRMYWJlbCgi\nbGFiZWwiICsgaSk7CiAgICAgICAgICAgIHBob3RvMS5wdXQoInBob3RvIiAr\nIGksIHAxKTsKICAgICAgICB9CiAgICAgICAgcS53aGVyZShjYi5pc0VtcHR5\nKGNiLmtleXMocGhvdG8xKSkpOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFy\nZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RLZXlz\nNCgpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5uYW1lLCB0\nMi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAgICAgICAg\nKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5pZCA9IHQx\nLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX1BIVCB0\nMiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFICg1ID0gNSkiOwoKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVl\ncnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9\nIHEuZnJvbShJdGVtLmNsYXNzKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0\ncmluZywgUGhvdG8+IHBob3RvID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7\nCiAgICAgICAgcS5tdWx0aXNlbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwg\ncGhvdG8pOwogICAgICAgIE1hcDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBu\nZXcgSGFzaE1hcDxTdHJpbmcsIFBob3RvPigpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0g\nbmV3IFBob3RvKCk7CiAgICAgICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIg\nKyBpKTsKICAgICAgICAgICAgcGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEp\nOwogICAgICAgIH0KICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGNiLnNpemUo\nY2Iua2V5cyhwaG90bzEpKSwgNSkpOyAKICAgICAgICBleGVjdXRlQW5kQ29t\ncGFyZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RL\nZXlzNSgpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5uYW1l\nLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAgICAg\nICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5pZCA9\nIHQxLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX1BI\nVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFICIgKyAKICAgICAg\nICAgICAgIihOT1QgKHQxLktFWTAgPSA/IE9SIHQxLktFWTAgPSA/IE9SIHQx\nLktFWTAgPSA/IE9SIHQxLktFWTAgPSA/IE9SIHQxLktFWTAgPSA/KSAiCiAg\nICAgICAgICAgICsgIkFORCAwIDwgKFNFTEVDVCBDT1VOVCgqKSBGUk9NIENS\nX0lURU1fcGhvdG9zIFdIRVJFIENSX0lURU1fcGhvdG9zLklURU1fSUQgPSB0\nMC5pZCkpIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3Rv\nbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAg\nICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNzKTsKICAg\nICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3RvID0gaXRl\nbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChp\ndGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAgIE1hcDxTdHJp\nbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFBob3Rv\nPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAg\nICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAgICAgICAgICAg\nIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAgICAgcGhvdG8x\nLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAgIH0KICAgICAgICBxLndo\nZXJlKHBob3RvLmtleSgpLmluKGNiLmtleXMocGhvdG8xKSkubm90KCkpOyAK\nICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChxLCBzcWwpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RLZXlzNigpIHsKICAgICAgICBTdHJpbmcg\nc3FsID0gIlNFTEVDVCB0MC5uYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBD\nUl9JVEVNIHQwICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVN\nX3Bob3RvcyB0MSBPTiB0MC5pZCA9IHQxLklURU1fSUQgIgogICAgICAgICAg\nICArICJJTk5FUiBKT0lOIENSX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQy\nLmlkIFdIRVJFICIgKyAKICAgICAgICAgICAgIihOT1QgKHQxLktFWTAgSU4g\nKD8sID8sID8sID8sID8pKSkiOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1\nc3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwog\nICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNzKTsK\nICAgICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3RvID0g\naXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNlbGVj\ndChpdGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAgIE1hcDxT\ndHJpbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFBo\nb3RvPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsgaSsrKSB7\nCiAgICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAgICAgICAg\nICAgIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAgICAgcGhv\ndG8xLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAgIH0KICAgICAgICBx\nLndoZXJlKGNiLmlzTm90TWVtYmVyKHBob3RvLmtleSgpLCBjYi5rZXlzKHBo\nb3RvMSkpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBhcmVTUUwocSwgc3Fs\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0S2V5czcoKSB7CiAgICAg\nICAgU3RyaW5nIHNxbCA9ICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQyLmxh\nYmVsIEZST00gQ1JfSVRFTSB0MCAiCiAgICAgICAgICAgICsgIklOTkVSIEpP\nSU4gQ1JfSVRFTV9waG90b3MgdDEgT04gdDAuaWQgPSB0MS5JVEVNX0lEICIK\nICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEuVkFM\nVUVfSUQgPSB0Mi5pZCBXSEVSRSAoTk9UICgxIDw+IDEpKSI7CgogICAgICAg\nIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShD\ndXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0gcS5m\ncm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3RyaW5n\nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsKICAg\nICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBwaG90\nbyk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5ldyBI\nYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBuZXcg\nUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiArIGkp\nOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7CiAg\nICAgICAgfQogICAgICAgIHEud2hlcmUoY2IuaXNOb3RFbXB0eShjYi5rZXlz\nKHBob3RvMSkpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBhcmVTUUwocSwg\nc3FsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0S2V5czgoKSB7CiAg\nICAgICAgU3RyaW5nIHNxbCA9ICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQy\nLmxhYmVsIEZST00gQ1JfSVRFTSB0MCAiCiAgICAgICAgICAgICsgIklOTkVS\nIEpPSU4gQ1JfSVRFTV9waG90b3MgdDEgT04gdDAuaWQgPSB0MS5JVEVNX0lE\nICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEu\nVkFMVUVfSUQgPSB0Mi5pZCBXSEVSRSAoNSA9IDQpIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9t\nZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJ\ndGVtLmNsYXNzKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhv\ndG8+IHBob3RvID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAg\ncS5tdWx0aXNlbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwog\nICAgICAgIE1hcDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1h\ncDxTdHJpbmcsIFBob3RvPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3Rv\nKCk7CiAgICAgICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAg\nICAgICAgICAgcGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAg\nIH0KICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGNiLnNpemUoY2Iua2V5cyhw\naG90bzEpKSwgNCkpOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChx\nLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RWYWx1ZXMxKCkg\newogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQyLmlk\nLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAgICArICJJ\nTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0gdDEuSVRF\nTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfSVRFTV9waG90\nb3MgdDMgT04gdDAuaWQgPSB0My5JVEVNX0lEICIKICAgICAgICAgICAgKyAi\nSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEuVkFMVUVfSUQgPSB0Mi5pZCBX\nSEVSRSAiICsgCiAgICAgICAgICAgICIoKHQzLlZBTFVFX0lEID0gPyBPUiB0\nMy5WQUxVRV9JRCA9ID8gT1IgdDMuVkFMVUVfSUQgPSA/IE9SIHQzLlZBTFVF\nX0lEID0gPyBPUiB0My5WQUxVRV9JRCA9ID8pICIKICAgICAgICAgICAgKyAi\nQU5EIDAgPCAoU0VMRUNUIENPVU5UKCopIEZST00gQ1JfSVRFTV9waG90b3Mg\nV0hFUkUgQ1JfSVRFTV9waG90b3MuSVRFTV9JRCA9IHQwLmlkKSkiOwoKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVl\ncnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9\nIHEuZnJvbShJdGVtLmNsYXNzKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0\ncmluZywgUGhvdG8+IHBob3RvID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7\nCiAgICAgICAgcS5tdWx0aXNlbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwg\ncGhvdG8pOwogICAgICAgIE1hcDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBu\nZXcgSGFzaE1hcDxTdHJpbmcsIFBob3RvPigpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0g\nbmV3IFBob3RvKCk7CiAgICAgICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIg\nKyBpKTsKICAgICAgICAgICAgcGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEp\nOwogICAgICAgIH0KICAgICAgICBxLndoZXJlKHBob3RvLnZhbHVlKCkuaW4o\nY2IudmFsdWVzKHBob3RvMSkpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBh\ncmVTUUwocSwgc3FsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VmFs\ndWVzMigpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5uYW1l\nLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAgICAg\nICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5pZCA9\nIHQxLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX1BI\nVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFICh0MS5WQUxVRV9J\nRCBJTiAoPywgPywgPywgPywgPykpIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVy\neTxDdXN0b21lcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNz\nKTsKICAgICAgICBSb290PEl0ZW0+IGl0ZW0gPSBxLmZyb20oSXRlbS5jbGFz\ncyk7CiAgICAgICAgTWFwSm9pbjxJdGVtLCBTdHJpbmcsIFBob3RvPiBwaG90\nbyA9IGl0ZW0uam9pbihJdGVtXy5waG90b3MpOwogICAgICAgIHEubXVsdGlz\nZWxlY3QoaXRlbS5nZXQoSXRlbV8ubmFtZSksIHBob3RvKTsKICAgICAgICBN\nYXA8U3RyaW5nLCBQaG90bz4gcGhvdG8xID0gbmV3IEhhc2hNYXA8U3RyaW5n\nLCBQaG90bz4oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7IGkr\nKykgewogICAgICAgICAgICBQaG90byBwMSA9IG5ldyBQaG90bygpOwogICAg\nICAgICAgICBwMS5zZXRMYWJlbCgibGFiZWwiICsgaSk7CiAgICAgICAgICAg\nIHBob3RvMS5wdXQoInBob3RvIiArIGksIHAxKTsKICAgICAgICB9CiAgICAg\nICAgcS53aGVyZShjYi5pc01lbWJlcihwaG90by52YWx1ZSgpLCBjYi52YWx1\nZXMocGhvdG8xKSkpOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChx\nLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RWYWx1ZXMzKCkg\newogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQyLmlk\nLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAgICArICJJ\nTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0gdDEuSVRF\nTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhUIHQyIE9O\nIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgKDEgPD4gMSkiOwoKICAgICAg\nICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnko\nQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEu\nZnJvbShJdGVtLmNsYXNzKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0cmlu\nZywgUGhvdG8+IHBob3RvID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAg\nICAgICAgcS5tdWx0aXNlbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwgcGhv\ndG8pOwogICAgICAgIE1hcDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBuZXcg\nSGFzaE1hcDxTdHJpbmcsIFBob3RvPigpOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0gbmV3\nIFBob3RvKCk7CiAgICAgICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIgKyBp\nKTsKICAgICAgICAgICAgcGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEpOwog\nICAgICAgIH0KICAgICAgICBxLndoZXJlKGNiLmlzRW1wdHkoY2IudmFsdWVz\nKHBob3RvMSkpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBhcmVTUUwocSwg\nc3FsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VmFsdWU0KCkgewog\nICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQyLmlkLCB0\nMi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAgICArICJJTk5F\nUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0gdDEuSVRFTV9J\nRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhUIHQyIE9OIHQx\nLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgKDUgPSA1KSI7CgogICAgICAgIENy\naXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0\nb21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0gcS5mcm9t\nKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3RyaW5nLCBQ\naG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsKICAgICAg\nICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBwaG90byk7\nCiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5ldyBIYXNo\nTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBuZXcgUGhv\ndG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiArIGkpOwog\nICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7CiAgICAg\nICAgfQogICAgICAgIHEud2hlcmUoY2IuZXF1YWwoY2Iuc2l6ZShjYi52YWx1\nZXMocGhvdG8xKSksIDUpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBhcmVT\nUUwocSwgc3FsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VmFsdWVz\nNSgpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5uYW1lLCB0\nMi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAgICAgICAg\nKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5pZCA9IHQx\nLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX1BIVCB0\nMiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFICIKICAgICAgICAgICAg\nKyAiKDAgPSAoU0VMRUNUIENPVU5UKCopIEZST00gQ1JfSVRFTV9waG90b3Mg\ndDMgV0hFUkUgIgogICAgICAgICAgICArICIodDMuVkFMVUVfSUQgPSA/IE9S\nIHQzLlZBTFVFX0lEID0gPyBPUiB0My5WQUxVRV9JRCA9ID8gT1IgdDMuVkFM\nVUVfSUQgPSA/IE9SIHQzLlZBTFVFX0lEID0gPykgIgogICAgICAgICAgICAr\nICJBTkQgKHQwLmlkID0gdDMuSVRFTV9JRCkgQU5EIHQwLmlkID0gdDMuSVRF\nTV9JRCkgIgogICAgICAgICAgICArICJBTkQgMCA8IChTRUxFQ1QgQ09VTlQo\nKikgRlJPTSBDUl9JVEVNX3Bob3RvcyBXSEVSRSBDUl9JVEVNX3Bob3Rvcy5J\nVEVNX0lEID0gdDAuaWQpKSI7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1\nc3RvbWVyLmNsYXNzKTsKICAgICAgICBSb290PEl0ZW0+IGl0ZW0gPSBxLmZy\nb20oSXRlbS5jbGFzcyk7CiAgICAgICAgTWFwSm9pbjxJdGVtLCBTdHJpbmcs\nIFBob3RvPiBwaG90byA9IGl0ZW0uam9pbihJdGVtXy5waG90b3MpOwogICAg\nICAgIHEubXVsdGlzZWxlY3QoaXRlbS5nZXQoSXRlbV8ubmFtZSksIHBob3Rv\nKTsKICAgICAgICBNYXA8U3RyaW5nLCBQaG90bz4gcGhvdG8xID0gbmV3IEhh\nc2hNYXA8U3RyaW5nLCBQaG90bz4oKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IDU7IGkrKykgewogICAgICAgICAgICBQaG90byBwMSA9IG5ldyBQ\naG90bygpOwogICAgICAgICAgICBwMS5zZXRMYWJlbCgibGFiZWwiICsgaSk7\nCiAgICAgICAgICAgIHBob3RvMS5wdXQoInBob3RvIiArIGksIHAxKTsKICAg\nICAgICB9CiAgICAgICAgcS53aGVyZShwaG90by52YWx1ZSgpLmluKGNiLnZh\nbHVlcyhwaG90bzEpKS5ub3QoKSk7IAogICAgICAgIGV4ZWN1dGVBbmRDb21w\nYXJlU1FMKHEsIHNxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFZh\nbHVlczYoKSB7CiAgICAgICAgU3RyaW5nIHNxbCA9ICJTRUxFQ1QgdDAubmFt\nZSwgdDIuaWQsIHQyLmxhYmVsIEZST00gQ1JfSVRFTSB0MCAiCiAgICAgICAg\nICAgICsgIklOTkVSIEpPSU4gQ1JfSVRFTV9waG90b3MgdDEgT04gdDAuaWQg\nPSB0MS5JVEVNX0lEICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9Q\nSFQgdDIgT04gdDEuVkFMVUVfSUQgPSB0Mi5pZCBXSEVSRSAoTk9UICh0MS5W\nQUxVRV9JRCBJTiAoPywgPywgPywgPywgPykpKSI7CgogICAgICAgIENyaXRl\ncmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21l\nci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0gcS5mcm9tKEl0\nZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3RyaW5nLCBQaG90\nbz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsKICAgICAgICBx\nLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBwaG90byk7CiAg\nICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5ldyBIYXNoTWFw\nPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBuZXcgUGhvdG8o\nKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiArIGkpOwogICAg\nICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7CiAgICAgICAg\nfQogICAgICAgIHEud2hlcmUoY2IuaXNOb3RNZW1iZXIocGhvdG8udmFsdWUo\nKSwgY2IudmFsdWVzKHBob3RvMSkpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENv\nbXBhcmVTUUwocSwgc3FsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nVmFsdWVzNygpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5u\nYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAg\nICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5p\nZCA9IHQxLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENS\nX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFIChOT1QgKDEg\nPD4gMSkpIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4gcSA9\nIGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBSb290\nPEl0ZW0+IGl0ZW0gPSBxLmZyb20oSXRlbS5jbGFzcyk7CiAgICAgICAgTWFw\nSm9pbjxJdGVtLCBTdHJpbmcsIFBob3RvPiBwaG90byA9IGl0ZW0uam9pbihJ\ndGVtXy5waG90b3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoaXRlbS5nZXQo\nSXRlbV8ubmFtZSksIHBob3RvKTsKICAgICAgICBNYXA8U3RyaW5nLCBQaG90\nbz4gcGhvdG8xID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQaG90bz4oKTsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgICAg\nICBQaG90byBwMSA9IG5ldyBQaG90bygpOwogICAgICAgICAgICBwMS5zZXRM\nYWJlbCgibGFiZWwiICsgaSk7CiAgICAgICAgICAgIHBob3RvMS5wdXQoInBo\nb3RvIiArIGksIHAxKTsKICAgICAgICB9CiAgICAgICAgcS53aGVyZShjYi5p\nc05vdEVtcHR5KGNiLnZhbHVlcyhwaG90bzEpKSk7IAogICAgICAgIGV4ZWN1\ndGVBbmRDb21wYXJlU1FMKHEsIHNxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdFZhbHVlOCgpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVD\nVCB0MC5uYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIK\nICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBP\nTiB0MC5pZCA9IHQxLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBK\nT0lOIENSX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFICg1\nID0gNCkiOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0g\nY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8\nSXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNzKTsKICAgICAgICBNYXBK\nb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3RvID0gaXRlbS5qb2luKEl0\nZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChpdGVtLmdldChJ\ndGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAgIE1hcDxTdHJpbmcsIFBob3Rv\nPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFBob3RvPigpOwogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAg\nIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAgICAgICAgICAgIHAxLnNldExh\nYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAgICAgcGhvdG8xLnB1dCgicGhv\ndG8iICsgaSwgcDEpOwogICAgICAgIH0KICAgICAgICBxLndoZXJlKGNiLmVx\ndWFsKGNiLnNpemUoY2IudmFsdWVzKHBob3RvMSkpLCA0KSk7IAogICAgICAg\nIGV4ZWN1dGVBbmRDb21wYXJlU1FMKHEsIHNxbCk7CiAgICB9CiAgICAKICAg\nIC8qKgogICAgICogVGhlIHN5bnRheCBmb3Igam9pbmluZyB0aGUga2V5IG9m\nIGEgTWFwIGF0dHJpYnV0ZSBpcyBkaWZmZXJlbnQgaW4gSlBRTC4KICAgICAq\nIEhlbmNlIGluc3RlYWQgb2YgY29tcGFyaW5nIHRhcmdldCBTUUwgd2UgY29t\ncGFyZSB0aGUgcmVzdWx0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nSm9pbktleSgpIHsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgZW0uY3JlYXRlUXVlcnkoIkRFTEVURSBGUk9NIFN0dWRl\nbnQgcyIpLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICBlbS5jcmVhdGVRdWVy\neSgiREVMRVRFIEZST00gQ291cnNlIHMiKS5leGVjdXRlVXBkYXRlKCk7CiAg\nICAgICAgZW0uY3JlYXRlUXVlcnkoIkRFTEVURSBGUk9NIFNlbWVzdGVyIHMi\nKS5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKICAgICAgICAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgU3R1ZGVudCBzMSA9IG5ldyBTdHVkZW50\nKCk7IHMxLnNldE5hbWUoIlMxIik7CiAgICAgICAgU3R1ZGVudCBzMiA9IG5l\ndyBTdHVkZW50KCk7IHMyLnNldE5hbWUoIlMyIik7CiAgICAgICAgU3R1ZGVu\ndCBzMyA9IG5ldyBTdHVkZW50KCk7IHMzLnNldE5hbWUoIlMzIik7CiAgICAg\nICAgU3R1ZGVudCBzNCA9IG5ldyBTdHVkZW50KCk7IHM0LnNldE5hbWUoIlM0\nIik7CiAgICAgICAgU2VtZXN0ZXIgc20xID0gbmV3IFNlbWVzdGVyKCk7IHNt\nMS5zZXROYW1lKCJTdW1tZXIiKTsKICAgICAgICBTZW1lc3RlciBzbTIgPSBu\nZXcgU2VtZXN0ZXIoKTsgc20yLnNldE5hbWUoIkZhbGwiKTsKICAgICAgICBD\nb3Vyc2UgYzEgPSBuZXcgQ291cnNlKCk7IGMxLnNldE5hbWUoIkMxIik7CiAg\nICAgICAgQ291cnNlIGMyID0gbmV3IENvdXJzZSgpOyBjMi5zZXROYW1lKCJD\nMiIpOwoKICAgICAgICBzMS5hZGRUb0Vucm9sbG1lbnQoYzEsIHNtMSk7IHMx\nLmFkZFRvRW5yb2xsbWVudChjMiwgc20yKTsKICAgICAgICBzMi5hZGRUb0Vu\ncm9sbG1lbnQoYzIsIHNtMSk7IHMyLmFkZFRvRW5yb2xsbWVudChjMSwgc20y\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzLmFk\nZFRvRW5yb2xsbWVudChjMSwgc20yKTsgCiAgICAgICAgczQuYWRkVG9FbnJv\nbGxtZW50KGMyLCBzbTEpOwogICAgICAgIAogICAgICAgIGVtLnBlcnNpc3Qo\nczEpOyBlbS5wZXJzaXN0KHMyKTsgZW0ucGVyc2lzdChzMyk7IGVtLnBlcnNp\nc3QoczQpOwogICAgICAgIGVtLnBlcnNpc3QoYzEpOyBlbS5wZXJzaXN0KGMy\nKTsKICAgICAgICBlbS5wZXJzaXN0KHNtMSk7IGVtLnBlcnNpc3Qoc20yKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIAogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBzIGZyb20gU3R1ZGVu\ndCBzIEpPSU4gcy5lbnJvbGxtZW50IGUgd2hlcmUgS0VZKGUpLm5hbWU9Om5h\nbWUiOwogICAgICAgIExpc3Q8U3R1ZGVudD4galJlc3VsdCA9IGVtLmNyZWF0\nZVF1ZXJ5KGpwcWwpLnNldFBhcmFtZXRlcigibmFtZSIsICJDMSIpLmdldFJl\nc3VsdExpc3QoKTsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFN0\ndWRlbnQ+IHEgPSBjYi5jcmVhdGVRdWVyeShTdHVkZW50LmNsYXNzKTsKICAg\nICAgICBSb290PFN0dWRlbnQ+IHMgPSBxLmZyb20oU3R1ZGVudC5jbGFzcyk7\nCiAgICAgICAgSm9pbjxNYXA8Q291cnNlLFNlbWVzdGVyPixDb3Vyc2U+IGMg\nPSAoKEpvaW5zLk1hcClzLmpvaW4oU3R1ZGVudF8uZW5yb2xsbWVudCkpLmpv\naW5LZXkoKTsKICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGMuZ2V0KENvdXJz\nZV8ubmFtZSksIGNiLnBhcmFtZXRlcihTdHJpbmcuY2xhc3MsICJuYW1lIikp\nKTsKICAgICAgICAKICAgICAgICBMaXN0PFN0dWRlbnQ+IGNSZXN1bHQgPSBl\nbS5jcmVhdGVRdWVyeShxKS5zZXRQYXJhbWV0ZXIoIm5hbWUiLCJDMSIpLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICAKICAgICAgICBhc3NlcnRGYWxzZShq\nUmVzdWx0LmlzRW1wdHkoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGNSZXN1\nbHQuc2l6ZSgpLCBqUmVzdWx0LnNpemUoKSk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBqUmVzdWx0LnNpemUoKTsgaSsrKSB7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscyhqUmVzdWx0LmdldChpKS5nZXROYW1lKCksIGNSZXN1\nbHQuZ2V0KGkpLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0QWxpYXNJbk9yZGVyQnlDbGF1c2UoKSB7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIEFWRyhhLmJhbGFuY2UpIEFT\nIHggRlJPTSBBY2NvdW50IGEgT1JERVIgQlkgeCI7CgogICAgICAgIE9wZW5K\nUEFDcml0ZXJpYVF1ZXJ5PERvdWJsZT4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KERv\ndWJsZS5jbGFzcyk7CiAgICAgICAgUm9vdDxBY2NvdW50PiBhY2NvdW50ID0g\nYy5mcm9tKEFjY291bnQuY2xhc3MpOwogICAgICAgIEV4cHJlc3Npb248RG91\nYmxlPiBvcmlnaW5hbCA9IGNiLmF2ZyhhY2NvdW50LmdldChBY2NvdW50Xy5i\nYWxhbmNlKSk7CiAgICAgICAgRXhwcmVzc2lvbjxEb3VibGU+IGFsaWFzZWQg\nPSAoRXhwcmVzc2lvbjxEb3VibGU+KW9yaWdpbmFsLmFsaWFzKCJ4Iik7CiAg\nICAgICAgYy5vcmRlckJ5KGNiLmFzYyhhbGlhc2VkKSk7CiAgICAgICAgYXNz\nZXJ0U2FtZShvcmlnaW5hbCwgYWxpYXNlZCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJ4IiwgYWxpYXNlZC5nZXRBbGlhcygpKTsKICAgICAgICBjLnNlbGVj\ndChhbGlhc2VkKTsKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFs\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoanBxbCwgYy50b0NRTCgpKTsKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFJlYWxpYXNOb3RBbGxvd2Vk\nKCkgewogICAgICAgIE9wZW5KUEFDcml0ZXJpYVF1ZXJ5PERvdWJsZT4gYyA9\nIGNiLmNyZWF0ZVF1ZXJ5KERvdWJsZS5jbGFzcyk7CiAgICAgICAgUm9vdDxB\nY2NvdW50PiBhY2NvdW50ID0gYy5mcm9tKEFjY291bnQuY2xhc3MpOwogICAg\nICAgIFNlbGVjdGlvbjxEb3VibGU+IHRlcm0gPSBjYi5hdmcoYWNjb3VudC5n\nZXQoQWNjb3VudF8uYmFsYW5jZSkpOwogICAgICAgIHRlcm0uYWxpYXMoImZp\ncnN0dGltZSIpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRlcm0uYWxp\nYXMoInNlY29uZHRpbWUiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQg\ndG8gZmFpbCBvbiByZS1hbGlhc2luZyIpOwogICAgICAgIH0gY2F0Y2ggKEls\nbGVnYWxTdGF0ZUV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIGdvb2QK\nICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RJbnZh\nbGlkQWxpYXNOb3RBbGxvd2VkKCkgewogICAgICAgIE9wZW5KUEFDcml0ZXJp\nYVF1ZXJ5PERvdWJsZT4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KERvdWJsZS5jbGFz\ncyk7CiAgICAgICAgUm9vdDxBY2NvdW50PiBhY2NvdW50ID0gYy5mcm9tKEFj\nY291bnQuY2xhc3MpOwogICAgICAgIFNlbGVjdGlvbjxEb3VibGU+IHRlcm0g\nPSBjYi5hdmcoYWNjb3VudC5nZXQoQWNjb3VudF8uYmFsYW5jZSkpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHRlcm0uYWxpYXMoImZyb20iKTsKICAg\nICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgdG8gZmFpbCBvbiByZXNlcnZlZCB3\nb3JkIGFzIGFsaWFzIik7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gZ29vZAogICAgICAg\nICAgICBhc3NlcnROdWxsKHRlcm0uZ2V0QWxpYXMoKSk7CiAgICAgICAgfQog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRlcm0uYWxpYXMoIiB3aXRoIGEg\nc3BhY2UiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgdG8gZmFpbCBv\nbiBpbnZhbGlkIGFsaWFzIik7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gZ29vZAogICAg\nICAgICAgICBhc3NlcnROdWxsKHRlcm0uZ2V0QWxpYXMoKSk7CiAgICAgICAg\nfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRlcm0uYWxpYXMoIiB3aXRo\nP2tub3duX3N5bWJvbCIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCB0\nbyBmYWlsIG9uIGludmFsaWQgYWxpYXMiKTsKICAgICAgICB9IGNhdGNoIChJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAvLyBn\nb29kCiAgICAgICAgICAgIGFzc2VydE51bGwodGVybS5nZXRBbGlhcygpKTsK\nICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RJbnZh\nbGlkUGFyYW1ldGVyTmFtZSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBjYi5wYXJhbWV0ZXIoSW50ZWdlci5jbGFzcywgImZyb20iKTsKICAgICAg\nICAgICAgZmFpbCgiRXhwZWN0ZWQgdG8gZmFpbCBvbiByZXNlcnZlZCB3b3Jk\nIGFzIGFsaWFzIik7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50\nRXhjZXB0aW9uIGUpIHsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgY2IucGFyYW1ldGVyKEludGVnZXIuY2xhc3MsICI6bmFtZSIpOwog\nICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCB0byBmYWlsIG9uIGludmFsaWQg\nYWxpYXMiKTsKICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24gZSkgewogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAg\nICBjYi5wYXJhbWV0ZXIoSW50ZWdlci5jbGFzcywgIj8zIik7CiAgICAgICAg\nICAgIGZhaWwoIkV4cGVjdGVkIHRvIGZhaWwgb24gaW52YWxpZCBhbGlhcyIp\nOwogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nR3JvdXBCeU9uTWF4UmVzdWx0KCkgewogICAgICAgIFN0cmluZyBqcHFsID0g\nIlNFTEVDVCBjLmFkZHJlc3MuY291bnRyeSwgY291bnQoYykgZnJvbSBDdXN0\nb21lciBjIEdST1VQIEJZIGMuYWRkcmVzcy5jb3VudHJ5ICIgKwogICAgICAg\nICAgICAgICAgICAgICAgIkhBVklORyBDT1VOVChjLmFkZHJlc3MuY291bnRy\neSk+MyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxPYmplY3Rb\nXT4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KE9iamVjdFtdLmNsYXNzKTsKICAgICAg\nICBSb290PEN1c3RvbWVyPiBjdXN0b21lciA9IGMuZnJvbShDdXN0b21lci5j\nbGFzcyk7CiAgICAgICAgUGF0aDxTdHJpbmc+IGNvdW50cnkgPSBjdXN0b21l\nci5nZXQoQ3VzdG9tZXJfLmFkZHJlc3MpLmdldChBZGRyZXNzXy5jb3VudHJ5\nKTsKICAgICAgICBjLm11bHRpc2VsZWN0KGNvdW50cnksIGNiLmNvdW50KGN1\nc3RvbWVyKSkKICAgICAgICAgLmdyb3VwQnkoY291bnRyeSkKICAgICAgICAg\nLmhhdmluZyhjYi5ndChjYi5jb3VudChjb3VudHJ5KSwgMykpOwogICAgICAg\nIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKG5ldyBRdWVyeURlY29yYXRv\ncigpewogICAgICAgICAgICBwdWJsaWMgdm9pZCBkZWNvcmF0ZShRdWVyeSBx\nKSB7CiAgICAgICAgICAgICAgICBxLnNldE1heFJlc3VsdHMoMjApOwogICAg\nICAgICAgICB9CiAgICAgICAgfSwgYywganBxbCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEVtcHR5QW5kKCkgewogICAgICAgIENyaXRlcmlhUXVl\ncnk8T3JkZXI+IGMgPSBjYi5jcmVhdGVRdWVyeShPcmRlci5jbGFzcyk7CiAg\nICAgICAgUm9vdDxPcmRlcj4gb3JkZXIgPSBjLmZyb20oT3JkZXIuY2xhc3Mp\nOwogICAgICAgIGMud2hlcmUoY2IuYW5kKGNiLm5vdChjYi5lcXVhbChvcmRl\nci5nZXQoT3JkZXJfLmN1c3RvbWVyKS5nZXQoQ3VzdG9tZXJfLm5hbWUpLCAi\nUm9iZXJ0IEUuIEJpc3NldHQiKSksCiAgICAgICAgICAgICAgICBjYi5pc1Ry\ndWUoY2IuY29uanVuY3Rpb24oKSkpKTsKICAgICAgICBlbS5jcmVhdGVRdWVy\neShjKS5nZXRSZXN1bHRMaXN0KCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2\nb2lkIHRlc3RFbXB0eU9yKCkgewogICAgICAgIENyaXRlcmlhUXVlcnk8T3Jk\nZXI+IGMgPSBjYi5jcmVhdGVRdWVyeShPcmRlci5jbGFzcyk7CiAgICAgICAg\nUm9vdDxPcmRlcj4gb3JkZXIgPSBjLmZyb20oT3JkZXIuY2xhc3MpOwogICAg\nICAgIGMud2hlcmUoY2IuYW5kKGNiLm5vdChjYi5lcXVhbChvcmRlci5nZXQo\nT3JkZXJfLmN1c3RvbWVyKS5nZXQoQ3VzdG9tZXJfLm5hbWUpLCAiUm9iZXJ0\nIEUuIEJpc3NldHQiKSksCiAgICAgICAgICAgICAgICBjYi5pc1RydWUoY2Iu\nZGlzanVuY3Rpb24oKSkpKTsKICAgICAgICBlbS5jcmVhdGVRdWVyeShjKS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3REZWZhdWx0UHJvamVjdGlvbldpdGhVbnR5cGVkUmVzdWx0KCkgewogICAg\nICAgIENyaXRlcmlhUXVlcnkgY3F1ZXJ5ID0gY2IuY3JlYXRlUXVlcnkoKTsg\nCiAgICAgICAgUm9vdDxDdXN0b21lcj4gY3VzdG9tZXIgPSBjcXVlcnkuZnJv\nbShDdXN0b21lci5jbGFzcyk7CgogICAgICAgIC8vR2V0IE1ldGFtb2RlbCBm\ncm9tIFJvb3QKICAgICAgICBFbnRpdHlUeXBlPEN1c3RvbWVyPiBDdXN0b21l\ncl8gPSBjdXN0b21lci5nZXRNb2RlbCgpOwoKICAgICAgICBjcXVlcnkud2hl\ncmUoY2IuZXF1YWwoCiAgICAgICAgICAgICAgICBjdXN0b21lci5nZXQoQ3Vz\ndG9tZXJfLmdldFNpbmd1bGFyQXR0cmlidXRlKCJuYW1lIiwgU3RyaW5nLmNs\nYXNzKSksIAogICAgICAgICAgICAgICAgY2IubnVsbExpdGVyYWwoU3RyaW5n\nLmNsYXNzKSkpOwoKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnko\nY3F1ZXJ5KTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdENvdW50\nRGlzdGluY3QoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IENP\nVU5UKERJU1RJTkNUIGEubmFtZSkgZnJvbSBBY2NvdW50IGEiOwogICAgICAg\nIAogICAgICAgIENyaXRlcmlhUXVlcnk8TG9uZz4gYyA9IGNiLmNyZWF0ZVF1\nZXJ5KExvbmcuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4gYSA9IGMu\nZnJvbShBY2NvdW50LmNsYXNzKTsKICAgICAgICBjLnNlbGVjdChjYi5jb3Vu\ndERpc3RpbmN0KGEuZ2V0KEFjY291bnRfLm5hbWUpKSk7CiAgICAgICAgCiAg\nICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3RDb3VudERpc3RpbmN0T25Kb2luKCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBDT1VOVChESVNUSU5DVCBh\nLmIuYWdlKSBmcm9tIEEgYSI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFR\ndWVyeTxMb25nPiBjID0gY2IuY3JlYXRlUXVlcnkoTG9uZy5jbGFzcyk7CiAg\nICAgICAgUm9vdDxBPiBhID0gYy5mcm9tKEEuY2xhc3MpOwogICAgICAgIGMu\nc2VsZWN0KGNiLmNvdW50RGlzdGluY3QoYS5nZXQoQV8uYikuZ2V0KEJfLmFn\nZSkpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBq\ncHFsKTsKICAgIH0KCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RTaXplUmV0\ndXJuc0ludGVnZXIoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0\nIFNJWkUoYy5hY2NvdW50cykgZnJvbSBDdXN0b21lciBjIjsKICAgICAgICBD\ncml0ZXJpYVF1ZXJ5PEludGVnZXI+IGMgPSBjYi5jcmVhdGVRdWVyeShJbnRl\nZ2VyLmNsYXNzKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBjdXN0b21lciA9\nIGMuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgYy5zZWxlY3QoY2Iu\nc2l6ZShjdXN0b21lci5nZXQoQ3VzdG9tZXJfLmFjY291bnRzKSkpOwogICAg\nICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAg\nICAgIAogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGlzanVuY3Rp\nb25Bc0ZhbHNlKCkgewogICAgICAgIE1ldGFtb2RlbCBtbSA9IGVtLmdldE1l\ndGFtb2RlbCgpOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9yZGVyPiBjcXVl\ncnkgPSBjYi5jcmVhdGVRdWVyeShPcmRlci5jbGFzcyk7CiAgICAgICAgUm9v\ndDxPcmRlcj4gb3JkZXIgPSBjcXVlcnkuZnJvbShPcmRlci5jbGFzcyk7CiAg\nICAgICAgCiAgICAgICBFbnRpdHlUeXBlPE9yZGVyPiBPcmRlcl8gPSBvcmRl\nci5nZXRNb2RlbCgpOwogICAgICAgRW50aXR5VHlwZTxDdXN0b21lcj4gQ3Vz\ndG9tZXJfID0gbW0uZW50aXR5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAgIGNx\ndWVyeS53aGVyZShjYi5hbmQoY2IuZXF1YWwoCiAgICAgICAgIG9yZGVyLmdl\ndChPcmRlcl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoImN1c3RvbWVyIiwgQ3Vz\ndG9tZXIuY2xhc3MpKQogICAgICAgICAgICAgICAgICAuZ2V0KEN1c3RvbWVy\nXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgibmFtZSIsIFN0cmluZy5jbGFzcykp\nLCAiUm9iZXJ0IEUuIEJpc3NldHQiKSwKICAgICAgICAgY2IuaXNGYWxzZShj\nYi5kaXNqdW5jdGlvbigpKSkpOwoKICAgICAgIGNxdWVyeS5kaXN0aW5jdCh0\ncnVlKTsKCiAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoY3F1ZXJ5\nKTsKCiAgICAgICBMaXN0IHJlc3VsdCA9IHEuZ2V0UmVzdWx0TGlzdCgpOyAg\nICAgICAgCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEN1cnJlbnRUaW1l\nUmV0dXJuc1NRTFR5cGVzKCkgewogICAgICAgIGlmIChnZXREaWN0aW9uYXJ5\nKCkgaW5zdGFuY2VvZiBPcmFjbGVEaWN0aW9uYXJ5KSB7CiAgICAgICAgICAg\nIC8vIE9yYWNsZSBkb2VzIG5vdCBoYXZlIENVUlJFTlRfVElNRSBmdW5jdGlv\nbiwgbm9yIGRvZXMgaXQgc3VwcG9ydCBEQiBnZW5lcmF0ZWQgaWRlbnRpdHkK\nICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgUHJvZHVjdCBwYyA9IG5l\ndyBQcm9kdWN0KCk7CiAgICAgICAgZW0ucGVyc2lzdChwYyk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAKICAgICAg\nICBpbnQgcGlkID0gcGMuZ2V0UGlkKCk7CiAgICAgICAgCiAgICAgICAgQ3Jp\ndGVyaWFRdWVyeTxUaW1lPiBjcXVlcnkgPSBjYi5jcmVhdGVRdWVyeShUaW1l\nLmNsYXNzKTsKICAgICAgICBSb290PFByb2R1Y3Q+IHByb2R1Y3QgPSBjcXVl\ncnkuZnJvbShQcm9kdWN0LmNsYXNzKTsKICAgICAgICBjcXVlcnkuc2VsZWN0\nKGNiLmN1cnJlbnRUaW1lKCkpOwogICAgICAgIGNxdWVyeS53aGVyZShjYi5l\ncXVhbChwcm9kdWN0LmdldChQcm9kdWN0Xy5waWQpLCBwaWQpKTsKCiAgICAg\nICAgVHlwZWRRdWVyeTxUaW1lPiB0cSA9IGVtLmNyZWF0ZVF1ZXJ5KGNxdWVy\neSk7CiAgICAgICAgT2JqZWN0IHJlc3VsdCA9IHRxLmdldFNpbmdsZVJlc3Vs\ndCgpOwogICAgICAgIGFzc2VydFRydWUocmVzdWx0LmdldENsYXNzKCkgKyAi\nIG5vdCBpbnN0YW5jZSBvZiBUaW1lIiwgcmVzdWx0IGluc3RhbmNlb2YgVGlt\nZSk7ICAKICAgICAgICAKICAgIH0gICAgCgogICAgcHVibGljIHZvaWQgdGVz\ndEN1cnJlbnREYXRlUmV0dXJuc1NRTFR5cGVzKCkgewogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBPcmRlciBwYyA9IG5l\ndyBPcmRlcigpOwogICAgICAgIGVtLnBlcnNpc3QocGMpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAg\naW50IG9pZCA9IHBjLmdldElkKCk7CiAgICAgICAgCiAgICAgICAgQ3JpdGVy\naWFRdWVyeTxEYXRlPiBjcXVlcnkgPSBjYi5jcmVhdGVRdWVyeShEYXRlLmNs\nYXNzKTsKICAgICAgICBSb290PE9yZGVyPiBvcmRlciA9IGNxdWVyeS5mcm9t\nKE9yZGVyLmNsYXNzKTsKICAgICAgICBjcXVlcnkuc2VsZWN0KGNiLmN1cnJl\nbnREYXRlKCkpOwogICAgICAgIGNxdWVyeS53aGVyZShjYi5lcXVhbChvcmRl\nci5nZXQoT3JkZXJfLmlkKSwgb2lkKSk7CgogICAgICAgIFR5cGVkUXVlcnk8\nRGF0ZT4gdHEgPSBlbS5jcmVhdGVRdWVyeShjcXVlcnkpOwogICAgICAgIE9i\namVjdCByZXN1bHQgPSB0cS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICBh\nc3NlcnRUcnVlKHJlc3VsdC5nZXRDbGFzcygpICsgIiBub3QgaW5zdGFuY2Ug\nb2YgRGF0ZSIsIHJlc3VsdCBpbnN0YW5jZW9mIERhdGUpOyAgCgogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RDdXJyZW50VGltZXN0YW1wUmV0dXJuc1NR\nTFR5cGVzKCkgewogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICBPcmRlciBwYyA9IG5ldyBPcmRlcigpOwogICAgICAgIGVt\nLnBlcnNpc3QocGMpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CgogICAgICAgIGludCBvaWQgPSBwYy5nZXRJZCgpOwoKICAgICAg\nICBDcml0ZXJpYVF1ZXJ5PFRpbWVzdGFtcD4gY3F1ZXJ5ID0gY2IuY3JlYXRl\nUXVlcnkoVGltZXN0YW1wLmNsYXNzKTsKICAgICAgICBSb290PE9yZGVyPiBv\ncmRlciA9IGNxdWVyeS5mcm9tKE9yZGVyLmNsYXNzKTsKICAgICAgICBjcXVl\ncnkuc2VsZWN0KGNiLmN1cnJlbnRUaW1lc3RhbXAoKSk7CiAgICAgICAgY3F1\nZXJ5LndoZXJlKGNiLmVxdWFsKG9yZGVyLmdldChPcmRlcl8uaWQpLCBvaWQp\nKTsKCiAgICAgICAgVHlwZWRRdWVyeTxUaW1lc3RhbXA+IHRxID0gZW0uY3Jl\nYXRlUXVlcnkoY3F1ZXJ5KTsKICAgICAgICBPYmplY3QgcmVzdWx0ID0gdHEu\nZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShyZXN1bHQu\nZ2V0Q2xhc3MoKSArICIgbm90IGluc3RhbmNlIG9mIFRpbWVzdGFtcCIsIHJl\nc3VsdCBpbnN0YW5jZW9mIFRpbWVzdGFtcCk7ICAKICAgICAgICAKICAgIH0K\nICAgIAovLyAgICBwdWJsaWMgdm9pZCB0ZXN0SW5NZW1vcnlBY2Nlc3NQYXRo\nKCkgewovLyAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwov\nLyAgICAgICAgLy8gbXVzdCBoYXZlIG5ldy9kaXJ0eSBtYW5hZ2VkIGluc3Rh\nbmNlcyB0byBleGVyY2lzZSB0aGUgY29kZSBwYXRoCi8vICAgICAgICBlbS5w\nZXJzaXN0KG5ldyBDdXN0b21lcigpKTsKLy8gICAgICAgIENyaXRlcmlhUXVl\ncnk8Q3VzdG9tZXI+IGNxdWVyeSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVy\nLmNsYXNzKTsKLy8gICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGN1c3RvbWVyID0g\nY3F1ZXJ5LmZyb20oQ3VzdG9tZXIuY2xhc3MpOwovLyAgICAgICAgRmV0Y2g8\nQ3VzdG9tZXIsIEFjY291bnQ+IGMgPSBjdXN0b21lci5mZXRjaCgiYWNjb3Vu\ndHMiLCBKb2luVHlwZS5MRUZUKTsKLy8gICAgICAgIGNxdWVyeS53aGVyZShj\nYi5saWtlKGN1c3RvbWVyLjxTdHJpbmc+Z2V0KCJmaXJzdE5hbWUiKSwgImEl\nIikpLnNlbGVjdChjdXN0b21lcikuZGlzdGluY3QodHJ1ZSk7Ci8vICAgICAg\nICBUeXBlZFF1ZXJ5PEN1c3RvbWVyPiB0cXVlcnkgPSBlbS5jcmVhdGVRdWVy\neShjcXVlcnkpOwovLyAgICAgICAgdHF1ZXJ5LnNldE1heFJlc3VsdHMoMyk7\nCi8vICAgICAgICBMaXN0PEN1c3RvbWVyPiByZXN1bHQgPSB0cXVlcnkuZ2V0\nUmVzdWx0TGlzdCgpOwovLwovLyAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RMaXRlcmFsSW5Qcm9qZWN0aW9uKCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gInNlbGVjdCAnYScgZnJvbSBDdXN0b21lciBjIHdoZXJlIGMuaWQ9\nMTAiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8U3RyaW5nPiBj\ncSA9IGNiLmNyZWF0ZVF1ZXJ5KFN0cmluZy5jbGFzcyk7CiAgICAgICAgUm9v\ndDxDdXN0b21lcj4gYyA9IGNxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAg\nICAgIGNxLnNlbGVjdChjYi50b1N0cmluZyhjYi5saXRlcmFsKCdhJykpKTsK\nICAgICAgICBjcS53aGVyZShjYi5lcXVhbChjLmdldChDdXN0b21lcl8uaWQp\nLCAxMCkpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGNxLCBqcHFsKTsK\nICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEJpZ0RlY2ltYWxDb252\nZXJzaW9uKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBjLmFj\nY291bnROdW0qMTAuMzI1OTcgZnJvbSBDdXN0b21lciBjIHdoZXJlIGMuaWQ9\nMTAiOwogICAgICAgIAogICAgICAgIGxvbmcgYWNjb3VudE51bWJlciA9IDEy\nMzQ1MTYyNzk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwogICAgICAgIEN1c3RvbWVyIGN1c3RvbWVyID0gbmV3IEN1c3RvbWVyKCk7\nCiAgICAgICAgY3VzdG9tZXIuc2V0QWNjb3VudE51bShhY2NvdW50TnVtYmVy\nKTsKICAgICAgICBlbS5wZXJzaXN0KGN1c3RvbWVyKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIGxv\nbmcgY2lkID0gY3VzdG9tZXIuZ2V0SWQoKTsKICAgICAgICAKICAgICAgICBD\ncml0ZXJpYVF1ZXJ5PEJpZ0RlY2ltYWw+IGNxID0gY2IuY3JlYXRlUXVlcnko\nQmlnRGVjaW1hbC5jbGFzcyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9\nIGNxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIGNxLnNlbGVjdChj\nYi50b0JpZ0RlY2ltYWwoY2IucHJvZChjLmdldChDdXN0b21lcl8uYWNjb3Vu\ndE51bSksIG5ldyBCaWdEZWNpbWFsKDEwLjMyNTk3KSkpKTsKICAgICAgICBj\ncS53aGVyZShjYi5lcXVhbChjLmdldChDdXN0b21lcl8uaWQpLCBjaWQpKTsK\nICAgICAgICAvL2Fzc2VydEVxdWl2YWxlbmNlKGNxLCBqcHFsKTsKICAgICAg\nICAKICAgICAgICBMaXN0PEJpZ0RlY2ltYWw+IHJlc3VsdCA9IGVtLmNyZWF0\nZVF1ZXJ5KGNxKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RmFs\nc2UocmVzdWx0LmlzRW1wdHkoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShyZXN1\nbHQuZ2V0KDApIGluc3RhbmNlb2YgQmlnRGVjaW1hbCk7CiAgICB9CiAgICAK\nICAgCn0K\n","encoding":"base64"}

