{"sha":"ba7d62c3266a3e24a41f0eec8a383b14bfbc453d","node_id":"MDQ6QmxvYjIwNjM2NDpiYTdkNjJjMzI2NmEzZTI0YTQxZjBlZWM4YTM4M2IxNGJmYmM0NTNk","size":5177,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ba7d62c3266a3e24a41f0eec8a383b14bfbc453d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kYXRhY2FjaGU7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5DYWNoZURp\nc3RyaWJ1dGlvblBvbGljeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5k\nYXRhY2FjaGUuQ29uY3VycmVudERhdGFDYWNoZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5kYXRhY2FjaGUuRGF0YUNhY2hlOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5QYXJ0aXRpb25lZERhdGFDYWNoZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRl\nTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5D\nb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLlN0b3JlQ2FjaGVJbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5Vc2VyRXhjZXB0aW9uOwoKcHVi\nbGljIGNsYXNzIFRlc3RQYXJ0aXRpb25lZERhdGFDYWNoZSBleHRlbmRzIFNp\nbmdsZUVNRlRlc3RDYXNlIHsKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewog\nICAgICAgIHN1cGVyLnNldFVwKCJvcGVuanBhLkRhdGFDYWNoZSIsICJwYXJ0\naXRpb25lZChQYXJ0aXRpb25UeXBlPWNvbmN1cnJlbnQscGFydGl0aW9ucz0i\nKwogICAgICAgICAgICAgICAgIicobmFtZT1hLGNhY2hlU2l6ZT0xMDApLChu\nYW1lPWIsY2FjaGVTaXplPTIwMCknKSIsCiAgICAgICAgICAgICAgICAgICAg\nIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2bSIsCiAgICAg\nICAgIm9wZW5qcGEuQ2FjaGVEaXN0cmlidXRpb25Qb2xpY3kiLAogICAgICAg\nICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNhY2hlLlRl\nc3RQYXJ0aXRpb25lZERhdGFDYWNoZSRUZXN0UG9saWN5Iik7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQcm9wZXJ0eVBhcnNpbmcoKSB7CiAg\nICAgICAgUGFydGl0aW9uZWREYXRhQ2FjaGUgY2FjaGUgPSBuZXcgUGFydGl0\naW9uZWREYXRhQ2FjaGUoKTsKICAgICAgICBTdHJpbmcgYmFkUHJvcGVydHkg\nPSAiKG5hbWU9YSxjYWNoZVNpemU9MTAwKSwobmFtZT1iLGNhY2hlU2l6ZT0y\nMDAiOy8vIG1pc3NpbmcgbGFzdCBicmFja2V0CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgY2FjaGUuc2V0UGFydGl0aW9ucyhiYWRQcm9wZXJ0eSk7CiAg\nICAgICAgICAgIGZhaWwoIkV4cGVjdGVkIHBhcnNlIGVycm9yIG9uICIgKyBi\nYWRQcm9wZXJ0eSk7CiAgICAgICAgfSBjYXRjaCAoVXNlckV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihlKTsKICAgICAg\nICB9CiAgICAgICAgYmFkUHJvcGVydHkgPSAiKG5hbWU9YSxjYWNoZVNpemU9\nMTAwKShuYW1lPWIsY2FjaGVTaXplPTIwMCkiOy8vIG1pc3NpbmcgY29tbWEK\nICAgICAgICB0cnkgewogICAgICAgICAgICBjYWNoZS5zZXRQYXJ0aXRpb25z\nKGJhZFByb3BlcnR5KTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgcGFy\nc2UgZXJyb3Igb24gIiArIGJhZFByb3BlcnR5KTsKICAgICAgICB9IGNhdGNo\nIChVc2VyRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgU3lzdGVtLmVyci5w\ncmludGxuKGUpOwogICAgICAgIH0KICAgICAgICBiYWRQcm9wZXJ0eSA9ICIo\nY2FjaGVTaXplPTEwMCksKG5hbWU9YixjYWNoZVNpemU9MjAwKSI7Ly8gbWlz\nc2luZyBuYW1lCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY2FjaGUuc2V0\nUGFydGl0aW9ucyhiYWRQcm9wZXJ0eSk7CiAgICAgICAgICAgIGZhaWwoIkV4\ncGVjdGVkIHBhcnNlIGVycm9yIG9uICIgKyBiYWRQcm9wZXJ0eSk7CiAgICAg\nICAgfSBjYXRjaCAoVXNlckV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIFN5\nc3RlbS5lcnIucHJpbnRsbihlKTsKICAgICAgICB9CiAgICAgICAgYmFkUHJv\ncGVydHkgPSAiKG5hbWU9YSxjYWNoZVNpemU9MTAwKSwobmFtZT1hLGNhY2hl\nU2l6ZT0yMDApIjsvLyBkdXBsaWNhdGUgbmFtZQogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGNhY2hlLnNldFBhcnRpdGlvbnMoYmFkUHJvcGVydHkpOwog\nICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCBwYXJzZSBlcnJvciBvbiAiICsg\nYmFkUHJvcGVydHkpOwogICAgICAgIH0gY2F0Y2ggKFVzZXJFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oZSk7CiAgICAg\nICAgfQogICAgICAgIGJhZFByb3BlcnR5ID0gIihuYW1lPWRlZmF1bHQsY2Fj\naGVTaXplPTEwMCksKG5hbWU9YSxjYWNoZVNpemU9MjAwKSI7Ly8gZGVmYXVs\ndCBuYW1lCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY2FjaGUuc2V0UGFy\ndGl0aW9ucyhiYWRQcm9wZXJ0eSk7CiAgICAgICAgICAgIGZhaWwoIkV4cGVj\ndGVkIHBhcnNlIGVycm9yIG9uICIgKyBiYWRQcm9wZXJ0eSk7CiAgICAgICAg\nfSBjYXRjaCAoVXNlckV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIFN5c3Rl\nbS5lcnIucHJpbnRsbihlKTsKICAgICAgICB9CiAgICAgICAgCiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQb2xpY3lDb25maWd1cmF0aW9uKCkg\newogICAgICAgIE9iamVjdCB2ID0gZW1mLmdldENvbmZpZ3VyYXRpb24oKS50\nb1Byb3BlcnRpZXModHJ1ZSkuZ2V0KCJvcGVuanBhLkNhY2hlRGlzdHJpYnV0\naW9uUG9saWN5Iik7CiAgICAgICAgU3RyaW5nIHBvbGljeVBsdWdpbiA9IGVt\nZi5nZXRDb25maWd1cmF0aW9uKCkuZ2V0Q2FjaGVEaXN0cmlidXRpb25Qb2xp\nY3koKTsKICAgICAgICBDYWNoZURpc3RyaWJ1dGlvblBvbGljeSBwb2xpY3lJ\nbnN0YW5jZSA9IGVtZi5nZXRDb25maWd1cmF0aW9uKCkuZ2V0Q2FjaGVEaXN0\ncmlidXRpb25Qb2xpY3lJbnN0YW5jZSgpOwogICAgICAgIENhY2hlRGlzdHJp\nYnV0aW9uUG9saWN5IHBvbGljeSA9IGVtZi5nZXRDb25maWd1cmF0aW9uKCku\nZ2V0RGF0YUNhY2hlTWFuYWdlckluc3RhbmNlKCkuZ2V0RGlzdHJpYnV0aW9u\nUG9saWN5KCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwb2xpY3kpOwogICAg\nICAgIGFzc2VydFRydWUocG9saWN5LmdldENsYXNzKCkgKyAiIG5vdCBUZXN0\nUG9saWN5IiwgcG9saWN5IGluc3RhbmNlb2YgVGVzdFBvbGljeSk7CiAgICAg\nICAgCiAgICB9CiAgICBwdWJsaWMgdm9pZCB0ZXN0UGx1Z2luQ29uZmlndXJh\ndGlvbigpIHsKICAgICAgICBEYXRhQ2FjaGUgY2FjaGUgPSAoKFN0b3JlQ2Fj\naGVJbXBsKWVtZi5nZXRTdG9yZUNhY2hlKCkpLmdldERlbGVnYXRlKCk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZShjYWNoZSBpbnN0YW5jZW9mIFBhcnRpdGlvbmVk\nRGF0YUNhY2hlKTsKICAgICAgICBhc3NlcnRGYWxzZShjYWNoZS5nZXRQYXJ0\naXRpb25OYW1lcygpLmlzRW1wdHkoKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVs\nbChjYWNoZS5nZXRQYXJ0aXRpb24oImEiLCBmYWxzZSkpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoY2FjaGUuZ2V0UGFydGl0aW9uKCJiIiwgZmFsc2UpKTsK\nICAgICAgICBhc3NlcnROdWxsKGNhY2hlLmdldFBhcnRpdGlvbigiYyIsIGZh\nbHNlKSk7CiAgICAgICAgYXNzZXJ0Q2FjaGVDb25maWd1cmF0aW9uKCJhIiwg\nMTAwKTsKICAgICAgICBhc3NlcnRDYWNoZUNvbmZpZ3VyYXRpb24oImIiLCAy\nMDApOwogICAgfQogICAgCiAgICB2b2lkIGFzc2VydENhY2hlQ29uZmlndXJh\ndGlvbihTdHJpbmcgbmFtZSwgaW50IHNpemUpIHsKICAgICAgICBEYXRhQ2Fj\naGUgY2FjaGUgPSBlbWYuZ2V0Q29uZmlndXJhdGlvbigpLmdldERhdGFDYWNo\nZU1hbmFnZXJJbnN0YW5jZSgpLmdldERhdGFDYWNoZShuYW1lKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKGNhY2hlKTsKICAgICAgICBhc3NlcnRUcnVlKGNh\nY2hlIGluc3RhbmNlb2YgQ29uY3VycmVudERhdGFDYWNoZSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKHNpemUsICgoQ29uY3VycmVudERhdGFDYWNoZSljYWNo\nZSkuZ2V0Q2FjaGVTaXplKCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgc3Rh\ndGljIGNsYXNzIFRlc3RQb2xpY3kgaW1wbGVtZW50cyBDYWNoZURpc3RyaWJ1\ndGlvblBvbGljeSB7CgogICAgICAgIHB1YmxpYyBTdHJpbmcgc2VsZWN0Q2Fj\naGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgT2JqZWN0IGNvbnRleHQpIHsK\nICAgICAgICAgICAgcmV0dXJuICJhIjsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzZXRDb25maWd1cmF0aW9uKENvbmZpZ3VyYXRp\nb24gY29uZikgewogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3Rh\ncnRDb25maWd1cmF0aW9uKCkgewogICAgICAgIH0KICAgICAgICAKICAgIH0K\nfQo=\n","encoding":"base64"}

