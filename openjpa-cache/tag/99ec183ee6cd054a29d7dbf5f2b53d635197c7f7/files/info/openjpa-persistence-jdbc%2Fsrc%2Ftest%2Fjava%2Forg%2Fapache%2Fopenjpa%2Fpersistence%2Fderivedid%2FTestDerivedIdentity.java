{"sha":"d2546d743130ddb7a361505703989fa9a3fee6a5","node_id":"MDQ6QmxvYjIwNjM2NDpkMjU0NmQ3NDMxMzBkZGI3YTM2MTUwNTcwMzk4OWZhOWEzZmVlNmE1","size":4613,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d2546d743130ddb7a361505703989fa9a3fee6a5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGVyaXZl\nZGlkOwoKaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsOwppbXBvcnQgamF2\nYS5tYXRoLkJpZ0ludGVnZXI7CmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsKaW1w\nb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVy\neTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVz\ndC5TUUxMaXN0ZW5lclRlc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3REZXJp\ndmVkSWRlbnRpdHkgIGV4dGVuZHMgU1FMTGlzdGVuZXJUZXN0Q2FzZSB7Cgog\nICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgc2V0VXAoRUJpZ0Rl\nY2ltYWxJRC5jbGFzcywgRURCaWdEZWNpbWFsSUQuY2xhc3MsCiAgICAgICAg\nICAgIEVCaWdJbnRlZ2VySUQuY2xhc3MsIEVEQmlnSW50ZWdlcklELmNsYXNz\nLAogICAgICAgICAgICBFRGF0ZUlELmNsYXNzLCBFRERhdGVJRC5jbGFzcywK\nICAgICAgICAgICAgRVNRTERhdGVJRC5jbGFzcywgRURTUUxEYXRlSUQuY2xh\nc3MsCiAgICAgICAgICAgIENMRUFSX1RBQkxFUyk7CiAgICAgICAgcG9wdWxh\ndGUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwb3B1bGF0ZSgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICAKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDI7\nIGkrKykgewogICAgICAgICAgICBsb25nIHRpbWUgPSAobG9uZykgKFN5c3Rl\nbS5jdXJyZW50VGltZU1pbGxpcygpIC8gMTAwMCkraSoxMzE3OwogICAgICAg\nICAgICBCaWdEZWNpbWFsIGRpZCA9IG5ldyBCaWdEZWNpbWFsKHRpbWUpOyAg\nICAgICAgICAgIAogICAgICAgICAgICBFQmlnRGVjaW1hbElEIGUxID0gbmV3\nIEVCaWdEZWNpbWFsSUQoZGlkKTsKICAgICAgICAgICAgRURCaWdEZWNpbWFs\nSUQgZTIgPSBuZXcgRURCaWdEZWNpbWFsSUQoZTEpOwogICAgICAgICAgICBl\nbS5wZXJzaXN0KGUxKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChlMik7Cgog\nICAgICAgICAgICBpbnQgdGltZTIgPSAoaW50KSAoU3lzdGVtLmN1cnJlbnRU\naW1lTWlsbGlzKCkgLyAxMDAwKStpKjcxMzE7CiAgICAgICAgICAgIEJpZ0lu\ndGVnZXIgaWlkID0gbmV3IEJpZ0ludGVnZXIoSW50ZWdlci50b1N0cmluZyh0\naW1lMikpOwogICAgICAgICAgICBFQmlnSW50ZWdlcklEIGUzID0gbmV3IEVC\naWdJbnRlZ2VySUQoaWlkKTsKICAgICAgICAgICAgRURCaWdJbnRlZ2VySUQg\nZTQgPSBuZXcgRURCaWdJbnRlZ2VySUQoZTMpOwogICAgICAgICAgICBlbS5w\nZXJzaXN0KGUzKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChlNCk7CgogICAg\nICAgICAgICBEYXRlIGlkID0gbmV3IERhdGUodGltZSk7CiAgICAgICAgICAg\nIEVEYXRlSUQgZTUgPSBuZXcgRURhdGVJRChpZCk7CiAgICAgICAgICAgIEVE\nRGF0ZUlEIGU2ID0gbmV3IEVERGF0ZUlEKGU1KTsKICAgICAgICAgICAgZW0u\ncGVyc2lzdChlNSk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoZTYpOwogICAg\nICAgICAgICAKICAgICAgICAgICAgaWYgKGkgPT0gMCkgewogICAgICAgICAg\nICAgICAgamF2YS5zcWwuRGF0ZSBzaWQgPSBuZXcgamF2YS5zcWwuRGF0ZSh0\naW1lKTsKICAgICAgICAgICAgICAgIEVTUUxEYXRlSUQgZTcgPSBuZXcgRVNR\nTERhdGVJRChzaWQpOwogICAgICAgICAgICAgICAgRURTUUxEYXRlSUQgZTgg\nPSBuZXcgRURTUUxEYXRlSUQoZTcpOwogICAgICAgICAgICAgICAgZW0ucGVy\nc2lzdChlNyk7CiAgICAgICAgICAgICAgICBlbS5wZXJzaXN0KGU4KTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3REZXJpdmVkSWRlbnRpdHkoKSB7CiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgUXVlcnkgcXVlcnkgPSBudWxsOwogICAgICAgIFN0cmluZyBz\ndHJbXSA9IHsKICAgICAgICAgICAgInNlbGVjdCBlIGZyb20gRUREYXRlSUQg\nZSIsCiAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tIEVEQmlnRGVjaW1hbElE\nIGUiLAogICAgICAgICAgICAic2VsZWN0IGUgZnJvbSBFREJpZ0ludGVnZXJJ\nRCBlIiwKICAgICAgICAgICAgInNlbGVjdCBlIGZyb20gRURTUUxEYXRlSUQg\nZSIsCiAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tIEVERGF0ZUlEIGUgam9p\nbiBmZXRjaCBlLnJpZCIsCiAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tIEVE\nQmlnRGVjaW1hbElEIGUgam9pbiBmZXRjaCBlLnJpZCIsCiAgICAgICAgICAg\nICJzZWxlY3QgZSBmcm9tIEVEQmlnSW50ZWdlcklEIGUgam9pbiBmZXRjaCBl\nLnJpZCIsCiAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tIEVEU1FMRGF0ZUlE\nIGUgam9pbiBmZXRjaCBlLnJpZCIsCiAgICAgICAgfTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICBxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KHN0cltpXSk7CiAgICAgICAgICAg\nIExpc3QgcnMgPSBxdWVyeS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAg\nIGFzc2VydFRydWUocnMuc2l6ZSgpID4gMCk7CiAgICAgICAgICAgIGZvciAo\naW50IGogPSAwOyBqIDwgcnMuc2l6ZSgpOyBqKyspIHsKICAgICAgICAgICAg\nICAgIE9iamVjdCBlID0gcnMuZ2V0KGopOwogICAgICAgICAgICAgICAgU3Ry\naW5nIG5hbWUgPSBudWxsOwogICAgICAgICAgICAgICAgT2JqZWN0IG9pZCA9\nIG51bGw7CiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVERGF0\nZUlEKSB7CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICgoRUREYXRlSUQp\nZSkuZ2V0TmFtZSgpOwogICAgICAgICAgICAgICAgICAgIG9pZCA9ICgoRURE\nYXRlSUQpZSkuZ2V0UmlkKCkuZ2V0SWQoKTsKICAgICAgICAgICAgICAgIH0g\nZWxzZSBpZiAoZSBpbnN0YW5jZW9mIEVEQmlnRGVjaW1hbElEKSB7CiAgICAg\nICAgICAgICAgICAgICAgbmFtZSA9ICgoRURCaWdEZWNpbWFsSUQpZSkuZ2V0\nTmFtZSgpOwogICAgICAgICAgICAgICAgICAgIG9pZCA9ICgoRURCaWdEZWNp\nbWFsSUQpZSkuZ2V0UmlkKCkuZ2V0SWQoKTsKICAgICAgICAgICAgICAgIH0g\nZWxzZSBpZiAoZSBpbnN0YW5jZW9mIEVEQmlnSW50ZWdlcklEKSB7CiAgICAg\nICAgICAgICAgICAgICAgbmFtZSA9ICgoRURCaWdJbnRlZ2VySUQpZSkuZ2V0\nTmFtZSgpOwogICAgICAgICAgICAgICAgICAgIG9pZCA9ICgoRURCaWdJbnRl\nZ2VySUQpZSkuZ2V0UmlkKCkuZ2V0SWQoKTsKICAgICAgICAgICAgICAgIH0g\nZWxzZSBpZiAoZSBpbnN0YW5jZW9mIEVEU1FMRGF0ZUlEKSB7CiAgICAgICAg\nICAgICAgICAgICAgbmFtZSA9ICgoRURTUUxEYXRlSUQpZSkuZ2V0TmFtZSgp\nOwogICAgICAgICAgICAgICAgICAgIG9pZCA9ICgoRURTUUxEYXRlSUQpZSku\nZ2V0UmlkKCkuZ2V0SWQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgIC8vU3lzdGVtLm91dC5wcmludGxuKG5hbWUpOwogICAgICAgICAg\nICAgICAgLy9TeXN0ZW0ub3V0LnByaW50bG4ob2lkLnRvU3RyaW5nKCkpOwog\nICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZShuYW1lLnN0YXJ0c1dpdGgoIlJl\nbCIpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQp9Cgo=\n","encoding":"base64"}

