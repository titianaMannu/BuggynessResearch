{"sha":"a9f2f3a38a7eb7cf1565d6be52a67cd89cfa57b8","node_id":"MDQ6QmxvYjIwNjM2NDphOWYyZjNhMzhhN2ViN2NmMTU2NWQ2YmU1MmE2N2NkODljZmE1N2I4","size":106829,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a9f2f3a38a7eb7cf1565d6be52a67cd89cfa57b8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5lbWJlZDsKCmlt\ncG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuU1FM\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wOwppbXBvcnQg\namF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7\nCmltcG9ydCBqYXZhLnV0aWwuQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwu\nQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwppbXBvcnQgamF2\nYS51dGlsLkdyZWdvcmlhbkNhbGVuZGFyOwppbXBvcnQgamF2YS51dGlsLkhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEu\ndXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEu\ndXRpbC5TZXQ7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFu\nYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJG\nYWN0b3J5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5VHJhbnNh\nY3Rpb247CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5QZXJzaXN0ZW5jZVVu\naXRVdGlsOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJh\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuTWFw\ncGluZ1Rvb2w7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRh\nLk1hcHBpbmdUb29sLkZsYWdzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5PcmFjbGVEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkFyZ3VtZW50RXhjZXB0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNR\nTExpc3RlbmVyVGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdEVtYmVkZGFi\nbGUgZXh0ZW5kcyBTUUxMaXN0ZW5lclRlc3RDYXNlIHsKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIENhbGVuZGFyIGNhbCA9IG5ldyBHcmVnb3JpYW5DYWxl\nbmRhcigpOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgSW50ZWdlciB0aW1l\nSGFzaCA9IG5ldyBJbnRlZ2VyKGNhbC5oYXNoQ29kZSgpKTsKICAgIHB1Ymxp\nYyBpbnQgbnVtRW1iZWRkYWJsZXMgPSAxOwogICAgcHVibGljIGludCBudW1C\nYXNpY1R5cGVzID0gMTsKICAgIHB1YmxpYyBpbnQgbnVtUHJvZ3JhbU1hbmFn\nZXJzID0gMjsKICAgIHB1YmxpYyBpbnQgbnVtTmlja05hbWVzID0gMzsKICAg\nIHB1YmxpYyBpbnQgbnVtRW1wbG95ZWVzUGVyUGhvbmVOdW1iZXIgPSAxOwog\nICAgcHVibGljIGludCBudW1QaG9uZU51bWJlcnNQZXJFbXBsb3llZSA9IDI7\nCiAgICBwdWJsaWMgaW50IG51bUVtcGxveWVlc1BlclByb2dyYW1NYW5hZ2Vy\nID0gMjsKICAgIHB1YmxpYyBpbnQgbnVtRW1wbG95ZWVzID0gbnVtUHJvZ3Jh\nbU1hbmFnZXJzCiAgICAgICAgKiBudW1FbXBsb3llZXNQZXJQcm9ncmFtTWFu\nYWdlcjsKICAgIHB1YmxpYyBpbnQgbnVtUGhvbmVOdW1iZXJzID0gbnVtRW1w\nbG95ZWVzICogbnVtUGhvbmVOdW1iZXJzUGVyRW1wbG95ZWU7CiAgICBwdWJs\naWMgaW50IG51bURlcGFydG1lbnRzID0gMjsKICAgIHB1YmxpYyBpbnQgbnVt\nRW1wbG95ZWVzUGVyRGVwdCA9IDI7CiAgICBwdWJsaWMgaW50IG51bUl0ZW1z\nID0gMjsKICAgIHB1YmxpYyBpbnQgbnVtSW1hZ2VzUGVySXRlbSA9IDM7CiAg\nICBwdWJsaWMgaW50IG51bUNvbXBhbnkgPSAyOwogICAgcHVibGljIGludCBu\ndW1EaXZpc2lvbnNQZXJDbyA9IDI7CiAgICBwdWJsaWMgaW50IElEID0gMTsK\nICAgIHB1YmxpYyBpbnQgaXRlbUlkID0gMTsKICAgIHB1YmxpYyBpbnQgY29t\ncElkID0gMTsKICAgIHB1YmxpYyBpbnQgZGl2SWQgPSAxOwogICAgcHVibGlj\nIGludCB2cElkID0gMTsKICAgIHB1YmxpYyBpbnQgZGVwdElkID0gMTsKICAg\nIHB1YmxpYyBpbnQgZW1wSWQgPSAxOwogICAgcHVibGljIGludCBwaG9uZUlk\nID0gMTsKICAgIHB1YmxpYyBpbnQgcG1JZCA9IDE7CiAgICBwdWJsaWMgaW50\nIHBhcmtpbmdTcG90SWQgPSAxOwogICAgcHVibGljIE1hcDxJbnRlZ2VyLCBQ\naG9uZU51bWJlcj4gcGhvbmVzID0KICAgICAgICBuZXcgSGFzaE1hcDxJbnRl\nZ2VyLCBQaG9uZU51bWJlcj4oKTsKICAgIHB1YmxpYyBNYXA8SW50ZWdlciwg\nRW1wbG95ZWU+IGVtcGxveWVlcyA9IG5ldyBIYXNoTWFwPEludGVnZXIsIEVt\ncGxveWVlPigpOwoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAg\nIHNldFVwKEVtYmVkLmNsYXNzLCBFbWJlZF9Db2xsX0VtYmVkLmNsYXNzLCBF\nbWJlZF9Db2xsX0ludGVnZXIuY2xhc3MsIAogICAgICAgICAgICBFbWJlZF9F\nbWJlZC5jbGFzcywgRW1iZWRfRW1iZWRfVG9NYW55LmNsYXNzLCBFbWJlZF9U\nb01hbnkuY2xhc3MsIAogICAgICAgICAgICBFbWJlZF9Ub09uZS5jbGFzcywg\nRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lLmNsYXNzLCAKICAgICAgICAgICAg\nRW50aXR5QV9Db2xsX1N0cmluZy5jbGFzcywgRW50aXR5QV9FbWJlZF9Db2xs\nX0VtYmVkLmNsYXNzLCAKICAgICAgICAgICAgRW50aXR5QV9FbWJlZF9Db2xs\nX0ludGVnZXIuY2xhc3MsIEVudGl0eUFfRW1iZWRfRW1iZWQuY2xhc3MsIAog\nICAgICAgICAgICBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueS5jbGFzcywg\nRW50aXR5QV9FbWJlZF9Ub01hbnkuY2xhc3MsIAogICAgICAgICAgICBFbnRp\ndHlBX0VtYmVkX1RvT25lLmNsYXNzLCBFbnRpdHlCMS5jbGFzcywgCiAgICAg\nICAgICAgIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZC5jbGFzcywgQ29udGFj\ndEluZm8uY2xhc3MsCiAgICAgICAgICAgIEVtcGxveWVlLmNsYXNzLCBKb2JJ\nbmZvLmNsYXNzLCBMb2NhdGlvbkRldGFpbHMuY2xhc3MsCiAgICAgICAgICAg\nIFBhcmtpbmdTcG90LmNsYXNzLCBQaG9uZU51bWJlci5jbGFzcywgUHJvZ3Jh\nbU1hbmFnZXIuY2xhc3MsCiAgICAgICAgICAgIERlcGFydG1lbnQxLmNsYXNz\nLCBFbXBsb3llZTEuY2xhc3MsIERlcGFydG1lbnQyLmNsYXNzLAogICAgICAg\nICAgICBFbXBsb3llZTIuY2xhc3MsIEVtcGxveWVlUEsyLmNsYXNzLCBEZXBh\ncnRtZW50My5jbGFzcywKICAgICAgICAgICAgRW1wbG95ZWUzLmNsYXNzLCBF\nbXBsb3llZU5hbWUzLmNsYXNzLCBJdGVtMS5jbGFzcywgSXRlbTIuY2xhc3Ms\nCiAgICAgICAgICAgIEl0ZW0zLmNsYXNzLCBJdGVtNC5jbGFzcywgSXRlbTUu\nY2xhc3MsIEZpbGVOYW1lNC5jbGFzcywgCiAgICAgICAgICAgIENvbXBhbnkx\nLmNsYXNzLCBDb21wYW55Mi5jbGFzcywgRGl2aXNpb24uY2xhc3MsICAgCiAg\nICAgICAgICAgIFZpY2VQcmVzaWRlbnQuY2xhc3MsIEVudGl0eUFfRW1iZWRf\nTWFwcGVkVG9PbmUuY2xhc3MsCiAgICAgICAgICAgIEVtYmVkX01hcHBlZFRv\nT25lLmNsYXNzLCBFbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUuY2xh\nc3MsIAogICAgICAgICAgICBFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lQ2Fz\nY2FkZURlbGV0ZS5jbGFzcywgRW50aXR5QjIuY2xhc3MsIAogICAgICAgICAg\nICBCb29rLmNsYXNzLCBMaXN0aW5nLmNsYXNzLCBTZWxsZXIuY2xhc3MsCiAg\nICAgICAgICAgIEVudGl0eUFfRW1iZWRfQ29sbF9NYXAuY2xhc3MsIEVtYmVk\nX0NvbGxfTWFwLmNsYXNzLCBFbnRpdHlBX0VtYmVkLmNsYXNzLAogICAgICAg\nICAgICBFbnRpdHlBX0VtYmVkX0NvbXBsZXguY2xhc3MsIEEuY2xhc3MsIENM\nRUFSX1RBQkxFUyk7CiAgICAgICAgICAgIHNxbC5jbGVhcigpOwogICAgICAg\nICAgICBEQkRpY3Rpb25hcnkgZGljdCA9ICgoSkRCQ0NvbmZpZ3VyYXRpb24p\nZW1mLmdldENvbmZpZ3VyYXRpb24oKSkuZ2V0REJEaWN0aW9uYXJ5SW5zdGFu\nY2UoKTsKICAgICAgICAgICAgaWYgKGRpY3QuZ2V0Q2xhc3MoKS5nZXROYW1l\nKCkuaW5kZXhPZigib3JhY2xlIikgIT0gLTEpIHsKICAgICAgICAgICAgICAg\nICgoT3JhY2xlRGljdGlvbmFyeSlkaWN0KS51c2VUcmlnZ2Vyc0ZvckF1dG9B\nc3NpZ24gPSB0cnVlOwogICAgICAgICAgICB9CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEdyb3VwQnlFbWJlZCgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBT\ndHJpbmcgcXVlcnlbXSA9IHsKICAgICAgICAgICAgICAgICJzZWxlY3QgS0VZ\nKGUpIGZyb20gRGVwYXJ0bWVudDMgZCBqb2luIGQuZW1wcyBlIGdyb3VwIGJ5\nIEtFWShlKSIsCiAgICAgICAgICAgICAgICAic2VsZWN0IGEuZW1iZWQgZnJv\nbSBFbnRpdHlBX0VtYmVkX0VtYmVkIGEgZ3JvdXAgYnkgYS5lbWJlZCIsCiAg\nICAgICAgICAgICAgICAic2VsZWN0IGUgZnJvbSBFbnRpdHlBX0VtYmVkX0Vt\nYmVkIGEgam9pbiBhLmVtYmVkIGUgZ3JvdXAgYnkgZSIsCiAgICAgICAgfTsK\nICAgICAgICBMaXN0IHJzID0gbnVsbDsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ld\nKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIH0gY2F0Y2goQXJndW1l\nbnRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgU3lzdGVtLm91dC5w\ncmludGxuKGUuZ2V0TWVzc2FnZSgpKTsgLy8gYXMgZXhwZWN0ZWQgOiBHcm91\ncCBieSBlbWJlZGRhYmxlIGZpZWxkIGlzIG5vdCBhbGxvd2VkCiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0S2V5RW1iZWRkYWJsZUNvbXBhcmUoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgU3RyaW5nIHF1ZXJ5W10gPSB7CiAgICAgICAgICAg\nICAgICAic2VsZWN0IG8gZnJvbSBDb21wYW55MSBjIGpvaW4gYy5vcmdhbml6\nYXRpb24gbyB3aGVyZSBLRVkobykgPSA/MSIsCiAgICAgICAgICAgICAgICAi\nc2VsZWN0IGQgZnJvbSBEZXBhcnRtZW50MyBkIGpvaW4gZC5lbXBzIGUgd2hl\ncmUgS0VZKGUpID0gPyAxIgogICAgICAgIH07CiAgICAgICAgTGlzdCBycyA9\nIG51bGw7CiAgICAgICAgRGl2aXNpb24gZCA9IG5ldyBEaXZpc2lvbigpOwog\nICAgICAgIGQuc2V0SWQoMTApOwogICAgICAgIGQuc2V0TmFtZSgiZGl2aXNp\nb24gMTAiKTsKICAgICAgICBFbXBsb3llZU5hbWUzIG5hbWUgPSBuZXcgRW1w\nbG95ZWVOYW1lMygiZm5hbWUxIiwgImxuYW1lMSIpOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgc3dpdGNoIChpKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAg\nICAgICAgIC8vIERpdmlzaW9uIGlzIGFuIGVtYmVkZGFibGUgYXMgd2VsbCBh\ncyBhbiBlbnRpdHksIGNvbXBhcmlzb24gaXMgYWxsb3dlZAogICAgICAgICAg\nICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSkuc2V0UGFyYW1l\ndGVyKDEsIGQpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVl\ncnlbaV0pLnNldFBhcmFtZXRlcigxLCBuYW1lKS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgICAgICAgICB9IGNhdGNoKEFyZ3VtZW50RXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgICAgICAgICAvLyBhcyBleHBlY3RlZCA6IGNvbXBh\ncmUgZW1iZWRkYWJsZSBpcyBub3QgYWxsb3dlZAogICAgICAgICAgICAgICAg\nICAgIFN5c3RlbS5vdXQucHJpbnRsbihlLmdldE1lc3NhZ2UoKSk7IAogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsgICAgICAgIAog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbnRpdHlBX0VtYmVkX0NvbGxf\nTWFwKCkgewogICAgICAgIHF1ZXJ5RW50aXR5QV9FbWJlZF9Db2xsX01hcCgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9D\nb2xsX01hcCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBTdHJpbmcgcXVlcnlbXSA9\nIHsKICAgICAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tIEVudGl0eUFfRW1i\nZWRfQ29sbF9NYXAgYSBqb2luIGEuZW1iZWQgZSAiICsKICAgICAgICAgICAg\nICAgICJqb2luIGUubWFwS2V5SW50ZWdlciBpIHdoZXJlIHZhbHVlKGkpID4g\nMCAiLAogICAgICAgICAgICB9OwogICAgICAgIExpc3QgcnMgPSBudWxsOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKysp\nIHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSku\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBlbS5jbGVhcigpOwogICAg\nICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RFbnRpdHlBX0NvbGxfU3RyaW5nKCkgewogICAgICAgIGNyZWF0\nZUVudGl0eUFfQ29sbF9TdHJpbmcoKTsKICAgICAgICBxdWVyeUVudGl0eUFf\nQ29sbF9TdHJpbmcoKTsKICAgICAgICBmaW5kRW50aXR5QV9Db2xsX1N0cmlu\nZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbnRpdHlBX0VtYmVk\nX1RvT25lKCkgewogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRfVG9PbmUo\nKTsKICAgICAgICBxdWVyeUVudGl0eUFfRW1iZWRfVG9PbmUoKTsKICAgICAg\nICBmaW5kRW50aXR5QV9FbWJlZF9Ub09uZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lKCkgewogICAg\nICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUoKTsKICAgICAg\nICBxdWVyeUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUoKTsKICAgICAgICBm\naW5kRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUoKSB7CiAg\nICAgICAgY3JlYXRlRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKCk7CiAgICAg\nICAgcXVlcnlFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUoKTsKICAgICAgICBm\naW5kRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEVudGl0eUFfRW1iZWRfVG9NYW55KCkgewogICAgICAg\nIGNyZWF0ZUVudGl0eUFfRW1iZWRfVG9NYW55KCk7CiAgICAgICAgcXVlcnlF\nbnRpdHlBX0VtYmVkX1RvTWFueSgpOwogICAgICAgIGZpbmRFbnRpdHlBX0Vt\nYmVkX1RvTWFueSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbnRp\ndHlBX0VtYmVkX0VtYmVkX1RvTWFueSgpIHsKICAgICAgICBjcmVhdGVFbnRp\ndHlBX0VtYmVkX0VtYmVkX1RvTWFueSgpOwogICAgICAgIHF1ZXJ5RW50aXR5\nQV9FbWJlZF9FbWJlZF9Ub01hbnkoKTsKICAgICAgICBmaW5kRW50aXR5QV9F\nbWJlZF9FbWJlZF9Ub01hbnkoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIoKSB7CiAgICAgICAgY3Jl\nYXRlRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIoKTsKICAgICAgICBxdWVy\neUVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKCk7CiAgICAgICAgZmluZEVu\ndGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEVudGl0eUFfRW1iZWRfRW1iZWQoKSB7CiAgICAgICAgY3Jl\nYXRlRW50aXR5QV9FbWJlZF9FbWJlZCgpOwogICAgICAgIHF1ZXJ5RW50aXR5\nQV9FbWJlZF9FbWJlZCgpOwogICAgICAgIGZpbmRFbnRpdHlBX0VtYmVkX0Vt\nYmVkKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVudGl0eUFfQ29s\nbF9FbWJlZF9FbWJlZCgpIHsKICAgICAgICBjcmVhdGVFbnRpdHlBX0NvbGxf\nRW1iZWRfRW1iZWQoKTsKICAgICAgICBxdWVyeUVudGl0eUFfQ29sbF9FbWJl\nZF9FbWJlZCgpOwogICAgICAgIGZpbmRFbnRpdHlBX0NvbGxfRW1iZWRfRW1i\nZWQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW50aXR5QV9FbWJl\nZF9Db2xsX0VtYmVkKCkgewogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRf\nQ29sbF9FbWJlZCgpOwogICAgICAgIHF1ZXJ5RW50aXR5QV9FbWJlZF9Db2xs\nX0VtYmVkKCk7CiAgICAgICAgZmluZEVudGl0eUFfRW1iZWRfQ29sbF9FbWJl\nZCgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wbG95ZWUo\nKSB7CiAgICAgICAgY3JlYXRlRW1wbG95ZWVPYmooKTsKICAgICAgICBxdWVy\neUVtcGxveWVlT2JqKCk7CiAgICAgICAgZmluZEVtcGxveWVlT2JqKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdE1hcEtleSgpIHsKICAgICAgICBj\ncmVhdGVPYmpNYXBLZXkoKTsKICAgICAgICBxdWVyeU9iak1hcEtleSgpOwog\nICAgICAgIGZpbmRPYmpNYXBLZXkoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdE1hcEtleUNsYXNzKCkgewogICAgICAgIGNyZWF0ZU9iak1h\ncEtleUNsYXNzKCk7CiAgICAgICAgcXVlcnlPYmpNYXBLZXlDbGFzcygpOwog\nICAgICAgIGZpbmRPYmpNYXBLZXlDbGFzcygpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RNYXBLZXlFbnVtZXJhdGVkKCkgewogICAgICAgIGNyZWF0\nZU9iak1hcEtleUVudW1lcmF0ZWQoKTsKICAgICAgICBmaW5kT2JqTWFwS2V5\nRW51bWVyYXRlZCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNYXBL\nZXlUZW1wb3JhbCgpIHsKICAgICAgICBjcmVhdGVPYmpNYXBLZXlUZW1wb3Jh\nbCgpOwogICAgICAgIGZpbmRPYmpNYXBLZXlUZW1wb3JhbCgpOwogICAgICAg\nIHF1ZXJ5T2JqTWFwS2V5VGVtcG9yYWwoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxl\ndGUoKSB7CiAgICAgICAgY3JlYXRlRW50aXR5QV9FbWJlZF9NYXBwZWRUb09u\nZUNhc2NhZGVEZWxldGUoKTsKICAgICAgICB1cGRhdGVFbnRpdHlBX0VtYmVk\nX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZSgpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RW1iZWRkYWJsZUNvbnRhaW5pbmdSZWxhdGlvbldp\ndGhHZW5lcmF0ZWRLZXkoKSAKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24s\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgY3JlYXRlRW1iZWRkYWJsZUNvbnRh\naW5pbmdSZWxhdGlvbldpdGhHZW5lcmF0ZWRLZXkoKTsKICAgIH0KCiAgICAv\nKgogICAgICogQ3JlYXRlIEVudGl0eUFfQ29sbF9TdHJpbmcKICAgICAqLwog\nICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9Db2xsX1N0cmluZygpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0u\nZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBjcmVhdGVFbnRpdHlBX0NvbGxf\nU3RyaW5nKGVtLCBJRCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAg\nIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBl\nbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0\neUFfQ29sbF9TdHJpbmcoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAg\nICAgICAgRW50aXR5QV9Db2xsX1N0cmluZyBhID0gbmV3IEVudGl0eUFfQ29s\nbF9TdHJpbmcoKTsKICAgICAgICBhLnNldElkKGlkKTsKICAgICAgICBhLnNl\ndE5hbWUoImEiICsgaWQpOwogICAgICAgIGEuc2V0QWdlKGlkKTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IG51bUJhc2ljVHlwZXM7IGkrKykKICAg\nICAgICAgICAgYS5hZGROaWNrTmFtZSgibmlja05hbWVfIiArIGlkICsgaSk7\nCiAgICAgICAgYS5hZGRDcmVkaXRSYXRpbmcoRW50aXR5QV9Db2xsX1N0cmlu\nZy5DcmVkaXRSYXRpbmcuUE9PUik7CiAgICAgICAgYS5hZGRUaW1lc3RhbXAo\nbmV3IFRpbWVzdGFtcChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSkpOwog\nICAgICAgIGEuYWRkTG9iKCJsb2IiKTsKICAgICAgICBlbS5wZXJzaXN0KGEp\nOwogICAgfQoKICAgIC8qCiAgICAgKiBDcmVhdGUgRW50aXR5QV9FbWJlZF9U\nb09uZQogICAgICovCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0Vt\nYmVkX1RvT25lKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0\naW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGNyZWF0\nZUVudGl0eUFfRW1iZWRfVG9PbmUoZW0sIElEKTsKICAgICAgICB0cmFuLmJl\nZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICB0cmFuLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgY3JlYXRlRW50aXR5QV9FbWJlZF9Ub09uZShFbnRpdHlNYW5hZ2VyIGVt\nLCBpbnQgaWQpIHsKICAgICAgICBFbnRpdHlBX0VtYmVkX1RvT25lIGEgPSBu\nZXcgRW50aXR5QV9FbWJlZF9Ub09uZSgpOwogICAgICAgIGEuc2V0SWQoaWQp\nOwogICAgICAgIGEuc2V0TmFtZSgiYSIgKyBpZCk7CiAgICAgICAgYS5zZXRB\nZ2UoaWQpOwogICAgICAgIEVtYmVkX1RvT25lIGVtYmVkID0gY3JlYXRlRW1i\nZWRfVG9PbmUoZW0sIGlkKTsKICAgICAgICBhLnNldEVtYmVkKGVtYmVkKTsK\nICAgICAgICBlbS5wZXJzaXN0KGEpOwogICAgfQoKICAgIHB1YmxpYyBFbWJl\nZF9Ub09uZSBjcmVhdGVFbWJlZF9Ub09uZShFbnRpdHlNYW5hZ2VyIGVtLCBp\nbnQgaWQpIHsKICAgICAgICBFbWJlZF9Ub09uZSBlbWJlZCA9IG5ldyBFbWJl\nZF9Ub09uZSgpOwogICAgICAgIGVtYmVkLnNldE5hbWUxKCJuYW1lMSIpOwog\nICAgICAgIGVtYmVkLnNldE5hbWUyKCJuYW1lMiIpOwogICAgICAgIGVtYmVk\nLnNldE5hbWUzKCJuYW1lMyIpOwogICAgICAgIEVudGl0eUIxIGIgPSBuZXcg\nRW50aXR5QjEoKTsKICAgICAgICBiLnNldElkKGlkKTsKICAgICAgICBiLnNl\ndE5hbWUoImIiICsgaWQpOwogICAgICAgIGVtYmVkLnNldEVudGl0eUIoYik7\nCiAgICAgICAgZW0ucGVyc2lzdChiKTsKICAgICAgICByZXR1cm4gZW1iZWQ7\nCiAgICB9CgogICAgLyoKICAgICAqIENyZWF0ZSBFbnRpdHlBX0VtYmVkX01h\ncHBlZFRvT25lCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0\neUFfRW1iZWRfTWFwcGVkVG9PbmUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50\naXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAg\nICAgICAgY3JlYXRlRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZShlbSwgSUQp\nOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwog\nICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX01hcHBl\nZFRvT25lKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIEVu\ndGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUgYSA9IG5ldyBFbnRpdHlBX0VtYmVk\nX01hcHBlZFRvT25lKCk7CiAgICAgICAgYS5zZXRJZChpZCk7CiAgICAgICAg\nYS5zZXROYW1lKCJhIiArIGlkKTsKICAgICAgICBhLnNldEFnZShpZCk7CiAg\nICAgICAgRW1iZWRfTWFwcGVkVG9PbmUgZW1iZWQgPSBjcmVhdGVFbWJlZF9N\nYXBwZWRUb09uZShlbSwgaWQsIGEpOwogICAgICAgIGEuc2V0RW1iZWQoZW1i\nZWQpOwogICAgICAgIGVtLnBlcnNpc3QoYSk7CiAgICB9CgogICAgcHVibGlj\nIEVtYmVkX01hcHBlZFRvT25lIGNyZWF0ZUVtYmVkX01hcHBlZFRvT25lKEVu\ndGl0eU1hbmFnZXIgZW0sIGludCBpZCwgCiAgICAgICAgRW50aXR5QV9FbWJl\nZF9NYXBwZWRUb09uZSBhKSB7CiAgICAgICAgRW1iZWRfTWFwcGVkVG9PbmUg\nZW1iZWQgPSBuZXcgRW1iZWRfTWFwcGVkVG9PbmUoKTsKICAgICAgICBlbWJl\nZC5zZXROYW1lMSgibmFtZTEiKTsKICAgICAgICBlbWJlZC5zZXROYW1lMigi\nbmFtZTIiKTsKICAgICAgICBlbWJlZC5zZXROYW1lMygibmFtZTMiKTsKICAg\nICAgICBFbnRpdHlCMSBiID0gbmV3IEVudGl0eUIxKCk7CiAgICAgICAgYi5z\nZXRJZChpZCk7CiAgICAgICAgYi5zZXROYW1lKCJibSIgKyBpZCk7CiAgICAg\nICAgYi5zZXRFbnRpdHlBKGEpOwogICAgICAgIGVtYmVkLnNldE1hcHBlZEVu\ndGl0eUIoYik7CiAgICAgICAgZW0ucGVyc2lzdChiKTsKICAgICAgICByZXR1\ncm4gZW1iZWQ7CiAgICB9CgogICAgLyoKICAgICAqIENyZWF0ZSBFbnRpdHlB\nX0VtYmVkX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZQogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lQ2Fz\nY2FkZURlbGV0ZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2Fj\ndGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBjcmVh\ndGVFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZShlbSwg\nSUQpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgp\nOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX01h\ncHBlZFRvT25lQ2FzY2FkZURlbGV0ZShFbnRpdHlNYW5hZ2VyIGVtLCAKICAg\nICAgICBpbnQgaWQpIHsKICAgICAgICBFbnRpdHlBX0VtYmVkX01hcHBlZFRv\nT25lQ2FzY2FkZURlbGV0ZSBhID0gCiAgICAgICAgICAgIG5ldyBFbnRpdHlB\nX0VtYmVkX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZSgpOwogICAgICAgIGEu\nc2V0SWQoaWQpOwogICAgICAgIGEuc2V0TmFtZSgiYSIgKyBpZCk7CiAgICAg\nICAgYS5zZXRBZ2UoaWQpOwogICAgICAgIEVtYmVkX01hcHBlZFRvT25lQ2Fz\nY2FkZURlbGV0ZSBlbWJlZCA9IAogICAgICAgICAgICBjcmVhdGVFbWJlZF9N\nYXBwZWRUb09uZURlbGV0ZUNhc2NhZGUoZW0sIGlkLCBhKTsKICAgICAgICBh\nLnNldEVtYmVkKGVtYmVkKTsKICAgICAgICBlbS5wZXJzaXN0KGEpOwogICAg\nfQoKICAgIHB1YmxpYyBFbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUg\nY3JlYXRlRW1iZWRfTWFwcGVkVG9PbmVEZWxldGVDYXNjYWRlKAogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCwgRW50aXR5QV9FbWJlZF9NYXBw\nZWRUb09uZUNhc2NhZGVEZWxldGUgYSkgewogICAgICAgIEVtYmVkX01hcHBl\nZFRvT25lQ2FzY2FkZURlbGV0ZSBlbWJlZCA9CiAgICAgICAgICAgIG5ldyBF\nbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUoKTsKICAgICAgICBlbWJl\nZC5zZXROYW1lMSgibmFtZTEiKTsKICAgICAgICBlbWJlZC5zZXROYW1lMigi\nbmFtZTIiKTsKICAgICAgICBlbWJlZC5zZXROYW1lMygibmFtZTMiKTsKICAg\nICAgICBFbnRpdHlCMiBiID0gbmV3IEVudGl0eUIyKCk7CiAgICAgICAgYi5z\nZXRJZChpZCk7CiAgICAgICAgYi5zZXROYW1lKCJibSIgKyBpZCk7CiAgICAg\nICAgYi5zZXRFbnRpdHlBKGEpOwogICAgICAgIGVtYmVkLnNldE1hcHBlZEVu\ndGl0eUIoYik7CiAgICAgICAgZW0ucGVyc2lzdChiKTsKICAgICAgICByZXR1\ncm4gZW1iZWQ7CiAgICB9CiAgICAKICAgIC8qCiAgICAgKiBVcGRhdGUgRW50\naXR5QV9FbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUKICAgICAqLwog\nICAgcHVibGljIHZvaWQgdXBkYXRlRW50aXR5QV9FbWJlZF9NYXBwZWRUb09u\nZUNhc2NhZGVEZWxldGUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJh\nbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAg\ndXBkYXRlRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUo\nZW0sIElEKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1\nc2goKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFy\nKCk7CiAgICAgICAgCiAgICAgICAgRW50aXR5QV9FbWJlZF9NYXBwZWRUb09u\nZUNhc2NhZGVEZWxldGUgYSA9IAogICAgICAgICAgICBlbS5maW5kKEVudGl0\neUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlLmNsYXNzLCBJRCk7\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChhKTsKICAgICAgICAKICAgICAgICBF\nbnRpdHlCMiBiMiA9IGVtLmZpbmQoRW50aXR5QjIuY2xhc3MsIElEKTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKGIyKTsKICAgICAgICAKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHVwZGF0ZUVudGl0eUFf\nRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlKEVudGl0eU1hbmFnZXIg\nZW0sIAogICAgICAgIGludCBpZCkgewogICAgICAgIEVudGl0eUFfRW1iZWRf\nTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlIGEgPSAKICAgICAgICAgICAgZW0u\nZmluZChFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZS5j\nbGFzcywgaWQpOwogICAgICAgIGEuc2V0TmFtZSgibmV3YSIgKyBpZCk7CiAg\nICAgICAgYS5zZXRBZ2UoaWQgKyAxKTsKICAgICAgICBFbWJlZF9NYXBwZWRU\nb09uZUNhc2NhZGVEZWxldGUgZW1iZWQgPSAKICAgICAgICAgICAgY3JlYXRl\nRW1iZWRfTWFwcGVkVG9PbmVEZWxldGVDYXNjYWRlKGVtLCBpZCsxLCBhKTsK\nICAgICAgICBhLnNldEVtYmVkKGVtYmVkKTsKICAgIH0KICAgIAogICAgLyoK\nICAgICAqIENyZWF0ZSBFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUKICAgICAq\nLwogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9Db2xsX0VtYmVkX1Rv\nT25lKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRy\nYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGNyZWF0ZUVudGl0\neUFfQ29sbF9FbWJlZF9Ub09uZShlbSwgSUQpOwogICAgICAgIHRyYW4uYmVn\naW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBjcmVhdGVFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUoRW50aXR5TWFuYWdl\nciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW50aXR5QV9Db2xsX0VtYmVkX1Rv\nT25lIGEgPSBuZXcgRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKCk7CiAgICAg\nICAgYS5zZXRJZChpZCk7CiAgICAgICAgYS5zZXROYW1lKCJhIiArIGlkKTsK\nICAgICAgICBhLnNldEFnZShpZCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBudW1FbWJlZGRhYmxlczsgaSsrKSB7CiAgICAgICAgICAgIEVtYmVk\nX1RvT25lIGVtYmVkID0gY3JlYXRlRW1iZWRfVG9PbmUoZW0sIGkraWQpOwog\nICAgICAgICAgICBhLmFkZEVtYmVkMVRvT25lKGVtYmVkKTsKICAgICAgICB9\nCiAgICAgICAgZW0ucGVyc2lzdChhKTsKICAgIH0KCiAgICAvKgogICAgICog\nQ3JlYXRlIEVudGl0eUFfRW1iZWRfVG9NYW55CiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfVG9NYW55KCkgewogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFu\nc2FjdGlvbigpOwogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRfVG9NYW55\nKGVtLCBJRCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZs\ndXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1i\nZWRfVG9NYW55KEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAg\nIEVudGl0eUFfRW1iZWRfVG9NYW55IGEgPSBuZXcgRW50aXR5QV9FbWJlZF9U\nb01hbnkoKTsKICAgICAgICBhLnNldElkKGlkKTsKICAgICAgICBhLnNldE5h\nbWUoImEiICsgaWQpOwogICAgICAgIGEuc2V0QWdlKGlkKTsKICAgICAgICBF\nbWJlZF9Ub01hbnkgZW1iZWQgPSBjcmVhdGVFbWJlZF9Ub01hbnkoZW0sIGlk\nKTsKICAgICAgICBhLnNldEVtYmVkKGVtYmVkKTsKICAgICAgICBlbS5wZXJz\naXN0KGEpOwogICAgfQoKICAgIHB1YmxpYyBFbWJlZF9Ub01hbnkgY3JlYXRl\nRW1iZWRfVG9NYW55KEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAg\nICAgIEVtYmVkX1RvTWFueSBlbWJlZCA9IG5ldyBFbWJlZF9Ub01hbnkoKTsK\nICAgICAgICBlbWJlZC5zZXROYW1lMSgibmFtZTEiKTsKICAgICAgICBlbWJl\nZC5zZXROYW1lMigibmFtZTIiKTsKICAgICAgICBlbWJlZC5zZXROYW1lMygi\nbmFtZTMiKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUVtYmVk\nZGFibGVzOyBpKyspIHsKICAgICAgICAgICAgRW50aXR5QjEgYiA9IG5ldyBF\nbnRpdHlCMSgpOwogICAgICAgICAgICBiLnNldElkKGlkICsgaSk7CiAgICAg\nICAgICAgIGIuc2V0TmFtZSgiYiIgKyBpZCArIGkpOwogICAgICAgICAgICBl\nbWJlZC5hZGRFbnRpdHlCKGIpOwogICAgICAgICAgICBlbS5wZXJzaXN0KGIp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZW1iZWQ7CiAgICB9CgogICAv\nKgogICAgICogQ3JlYXRlIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55CiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfRW1i\nZWRfVG9NYW55KCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0\naW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGNyZWF0\nZUVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55KGVtLCBJRCk7CiAgICAgICAg\ndHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJh\nbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55KEVu\ndGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIEVudGl0eUFfRW1i\nZWRfRW1iZWRfVG9NYW55IGEgPSBuZXcgRW50aXR5QV9FbWJlZF9FbWJlZF9U\nb01hbnkoKTsKICAgICAgICBhLnNldElkKGlkKTsKICAgICAgICBhLnNldE5h\nbWUoImEiICsgaWQpOwogICAgICAgIGEuc2V0QWdlKGlkKTsKICAgICAgICBF\nbWJlZF9FbWJlZF9Ub01hbnkgZW1iZWQgPSBjcmVhdGVFbWJlZF9FbWJlZF9U\nb01hbnkoZW0sIGlkKTsKICAgICAgICBhLnNldEVtYmVkKGVtYmVkKTsKICAg\nICAgICBlbS5wZXJzaXN0KGEpOwogICAgfQoKICAgIHB1YmxpYyBFbWJlZF9F\nbWJlZF9Ub01hbnkgY3JlYXRlRW1iZWRfRW1iZWRfVG9NYW55KEVudGl0eU1h\nbmFnZXIgZW0sCiAgICAgICAgICAgIGludCBpZCkgewogICAgICAgIEVtYmVk\nX0VtYmVkX1RvTWFueSBlbWJlZCA9IG5ldyBFbWJlZF9FbWJlZF9Ub01hbnko\nKTsKICAgICAgICBlbWJlZC5zZXRJbnRWYWwxKDEpOwogICAgICAgIGVtYmVk\nLnNldEludFZhbDIoMik7CiAgICAgICAgZW1iZWQuc2V0SW50VmFsMygzKTsK\nICAgICAgICBFbWJlZF9Ub01hbnkgZW1iZWRfVG9NYW55ID0gY3JlYXRlRW1i\nZWRfVG9NYW55KGVtLCBpZCk7CiAgICAgICAgZW1iZWQuc2V0RW1iZWQoZW1i\nZWRfVG9NYW55KTsKICAgICAgICByZXR1cm4gZW1iZWQ7CiAgICB9CiAgICAK\nICAgIC8qCiAgICAgKiBDcmVhdGUgRW50aXR5QV9FbWJlZF9Db2xsX0ludGVn\nZXIKICAgICAqLwogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJl\nZF9Db2xsX0ludGVnZXIoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJh\nbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAg\nY3JlYXRlRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIoZW0sIElEKTsKICAg\nICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAg\nICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9Db2xsX0ludGVn\nZXIoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW50aXR5\nQV9FbWJlZF9Db2xsX0ludGVnZXIgYSA9IG5ldyBFbnRpdHlBX0VtYmVkX0Nv\nbGxfSW50ZWdlcigpOwogICAgICAgIGEuc2V0SWQoaWQpOwogICAgICAgIGEu\nc2V0TmFtZSgiYSIgKyBpZCk7CiAgICAgICAgYS5zZXRBZ2UoaWQpOwogICAg\nICAgIEVtYmVkX0NvbGxfSW50ZWdlciBlbWJlZCA9IGNyZWF0ZUVtYmVkX0Nv\nbGxfSW50ZWdlcihlbSwgaWQpOwogICAgICAgIGEuc2V0RW1iZWQoZW1iZWQp\nOwogICAgICAgIGVtLnBlcnNpc3QoYSk7CiAgICB9CgogICAgcHVibGljIEVt\nYmVkX0NvbGxfSW50ZWdlciBjcmVhdGVFbWJlZF9Db2xsX0ludGVnZXIoRW50\naXR5TWFuYWdlciBlbSwKICAgICAgICAgICAgaW50IGlkKSB7CiAgICAgICAg\nRW1iZWRfQ29sbF9JbnRlZ2VyIGVtYmVkID0gbmV3IEVtYmVkX0NvbGxfSW50\nZWdlcigpOwogICAgICAgIGVtYmVkLnNldEludFZhbDEoaWQqMTAgKyAxKTsK\nICAgICAgICBlbWJlZC5zZXRJbnRWYWwyKGlkKjEwICsgMik7CiAgICAgICAg\nZW1iZWQuc2V0SW50VmFsMyhpZCoxMCArIDMpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgbnVtQmFzaWNUeXBlczsgaSsrKSB7CiAgICAgICAgICAg\nIGVtYmVkLmFkZE90aGVySW50VmFsKGlkICogMTAwICsgaSk7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBlbWJlZDsKICAgIH0KCiAgICAvKgogICAgICog\nQ3JlYXRlIEVudGl0eUFfRW1iZWRfRW1iZWQKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9FbWJlZCgpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNh\nY3Rpb24oKTsKICAgICAgICBjcmVhdGVFbnRpdHlBX0VtYmVkX0VtYmVkKGVt\nLCBJRCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNo\nKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRf\nRW1iZWQoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW50\naXR5QV9FbWJlZF9FbWJlZCBhID0gbmV3IEVudGl0eUFfRW1iZWRfRW1iZWQo\nKTsKICAgICAgICBhLnNldElkKGlkKTsKICAgICAgICBhLnNldE5hbWUoImEi\nICsgaWQpOwogICAgICAgIGEuc2V0QWdlKGlkKTsKICAgICAgICBFbWJlZF9F\nbWJlZCBlbWJlZCA9IGNyZWF0ZUVtYmVkX0VtYmVkKGVtLCBpZCwgMCk7CiAg\nICAgICAgYS5zZXRFbWJlZChlbWJlZCk7CiAgICAgICAgZW0ucGVyc2lzdChh\nKTsKICAgIH0KCiAgICBwdWJsaWMgRW1iZWRfRW1iZWQgY3JlYXRlRW1iZWRf\nRW1iZWQoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkLCBpbnQgaWR4KSB7CiAg\nICAgICAgRW1iZWRfRW1iZWQgZW1iZWQgPSBuZXcgRW1iZWRfRW1iZWQoKTsK\nICAgICAgICBlbWJlZC5zZXRJbnRWYWwxKGlkICogMTAwICsgaWR4ICogMTAg\nKyAxKTsKICAgICAgICBlbWJlZC5zZXRJbnRWYWwyKGlkICogMTAwICsgaWR4\nICogMTAgKyAyKTsKICAgICAgICBlbWJlZC5zZXRJbnRWYWwzKGlkICogMTAw\nICsgaWR4ICogMTAgKyAzKTsKICAgICAgICBFbWJlZCBlbWJlZDEgPSBjcmVh\ndGVFbWJlZChpZCwgaWR4KTsKICAgICAgICBlbWJlZC5zZXRFbWJlZChlbWJl\nZDEpOwogICAgICAgIHJldHVybiBlbWJlZDsKICAgIH0KCiAgICBwdWJsaWMg\nRW1iZWQgY3JlYXRlRW1iZWQoaW50IGlkLCBpbnQgaWR4KSB7CiAgICAgICAg\nRW1iZWQgZW1iZWQgPSBuZXcgRW1iZWQoKTsKICAgICAgICBlbWJlZC5zZXRJ\nbnRWYWwxKGlkICogMTAwICsgaWR4ICogMTAgKyA0KTsKICAgICAgICBlbWJl\nZC5zZXRJbnRWYWwyKGlkICogMTAwICsgaWR4ICogMTAgKyA1KTsKICAgICAg\nICBlbWJlZC5zZXRJbnRWYWwzKGlkICogMTAwICsgaWR4ICogMTAgKyA2KTsK\nICAgICAgICByZXR1cm4gZW1iZWQ7CiAgICB9CgogICAgLyoKICAgICAqIENy\nZWF0ZSBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQKICAgICAqLwogICAgcHVi\nbGljIHZvaWQgY3JlYXRlRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkKCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5n\nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGNyZWF0ZUVudGl0eUFfQ29sbF9F\nbWJlZF9FbWJlZChlbSwgSUQpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAg\nICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVF\nbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQoRW50aXR5TWFuYWdlciBlbSwgaW50\nIGlkKSB7CiAgICAgICAgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgPSBu\nZXcgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkKCk7CiAgICAgICAgYS5zZXRJ\nZChpZCk7CiAgICAgICAgYS5zZXROYW1lKCJhIiArIGlkKTsKICAgICAgICBh\nLnNldEFnZShpZCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1F\nbWJlZGRhYmxlczsgaSsrKSB7CiAgICAgICAgICAgIEVtYmVkX0VtYmVkIGVt\nYmVkID0gY3JlYXRlRW1iZWRfRW1iZWQoZW0sIGlkLCBpKTsKICAgICAgICAg\nICAgYS5hZGRFbWJlZChlbWJlZCk7CiAgICAgICAgfQogICAgICAgIGVtLnBl\ncnNpc3QoYSk7CiAgICB9CgogICAgLyoKICAgICAqIENyZWF0ZSBFbnRpdHlB\nX0VtYmVkX0NvbGxfRW1iZWQKICAgICAqLwogICAgcHVibGljIHZvaWQgY3Jl\nYXRlRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkKCkgewogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlv\nbigpOwogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZChl\nbSwgSUQpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVz\naCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVk\nX0NvbGxfRW1iZWQoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAg\nICAgRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkIGEgPSBuZXcgRW50aXR5QV9F\nbWJlZF9Db2xsX0VtYmVkKCk7CiAgICAgICAgYS5zZXRJZChpZCk7CiAgICAg\nICAgYS5zZXROYW1lKCJhIiArIGlkKTsKICAgICAgICBhLnNldEFnZShpZCk7\nCiAgICAgICAgRW1iZWRfQ29sbF9FbWJlZCBlbWJlZCA9IGNyZWF0ZUVtYmVk\nX0NvbGxfRW1iZWQoZW0sIGlkKTsKICAgICAgICBhLnNldEVtYmVkKGVtYmVk\nKTsKICAgICAgICBlbS5wZXJzaXN0KGEpOwogICAgfQoKICAgIHB1YmxpYyBF\nbWJlZF9Db2xsX0VtYmVkIGNyZWF0ZUVtYmVkX0NvbGxfRW1iZWQoRW50aXR5\nTWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW1iZWRfQ29sbF9FbWJl\nZCBlbWJlZCA9IG5ldyBFbWJlZF9Db2xsX0VtYmVkKCk7CiAgICAgICAgZW1i\nZWQuc2V0SW50VmFsMShpZCAqIDEwICsgMSk7CiAgICAgICAgZW1iZWQuc2V0\nSW50VmFsMihpZCAqIDEwICsgMik7CiAgICAgICAgZW1iZWQuc2V0SW50VmFs\nMyhpZCAqIDEwICsgMyk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBu\ndW1FbWJlZGRhYmxlczsgaSsrKSB7CiAgICAgICAgICAgIEVtYmVkIGVtYmVk\nMSA9IGNyZWF0ZUVtYmVkKGlkLCBpKTsKICAgICAgICAgICAgZW1iZWQuYWRk\nRW1iZWQoZW1iZWQxKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVtYmVk\nOwogICAgfQoKICAgIC8qCiAgICAgKiBDcmVhdGUgRW1wbG95ZWUKICAgICAq\nLwogICAgcHVibGljIHZvaWQgY3JlYXRlRW1wbG95ZWVPYmooKSB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRy\nYW5zYWN0aW9uKCk7CiAgICAgICAgY3JlYXRlUGhvbmVOdW1iZXJzKGVtKTsK\nICAgICAgICBjcmVhdGVFbXBsb3llZXMoZW0pOwogICAgICAgIGNyZWF0ZVBy\nb2dyYW1NYW5hZ2VycyhlbSk7CiAgICAgICAgCiAgICAgICAgdHJhbi5iZWdp\nbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQo\nKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCBjcmVhdGVQcm9ncmFtTWFuYWdlcnMoRW50aXR5TWFuYWdlciBlbSkg\newogICAgICAgIGVtcElkID0gMTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IG51bVByb2dyYW1NYW5hZ2VyczsgaSsrKQogICAgICAgICAgICBjcmVh\ndGVQcm9ncmFtTWFuYWdlcihlbSwgcG1JZCsrKTsKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgY3JlYXRlUHJvZ3JhbU1hbmFnZXIoRW50aXR5TWFuYWdl\nciBlbSwgaW50IGlkKSB7CiAgICAgICAgUHJvZ3JhbU1hbmFnZXIgcG0gPSBu\nZXcgUHJvZ3JhbU1hbmFnZXIoKTsKICAgICAgICBwbS5zZXRJZChpZCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbXBsb3llZXNQZXJQcm9n\ncmFtTWFuYWdlcjsgaSsrKSB7CiAgICAgICAgICAgIEVtcGxveWVlIGUgPSBl\nbXBsb3llZXMuZ2V0KGVtcElkKyspOwogICAgICAgICAgICBwbS5hZGRNYW5h\nZ2UoZSk7CiAgICAgICAgICAgIEpvYkluZm8gam9iSW5mbyA9IG5ldyBKb2JJ\nbmZvKCk7CiAgICAgICAgICAgIGpvYkluZm8uc2V0Sm9iRGVzY3JpcHRpb24o\nImpvYkRlc2NyaXB0aW9uIiArIGUuZ2V0RW1wSWQoKSk7CiAgICAgICAgICAg\nIGpvYkluZm8uc2V0UHJvZ3JhbU1hbmFnZXIocG0pOwogICAgICAgICAgICBl\nLnNldEpvYkluZm8oam9iSW5mbyk7CiAgICAgICAgfQogICAgICAgIGVtLnBl\ncnNpc3QocG0pOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVF\nbXBsb3llZXMoRW50aXR5TWFuYWdlciBlbSkgewogICAgICAgIHBob25lSWQg\nPSAxOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRW1wbG95ZWVz\nOyBpKyspIHsKICAgICAgICAgICAgRW1wbG95ZWUgZSA9IGNyZWF0ZUVtcGxv\neWVlKGVtLCBlbXBJZCsrKTsKICAgICAgICAgICAgZW1wbG95ZWVzLnB1dChl\nLmdldEVtcElkKCksIGUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMg\nRW1wbG95ZWUgY3JlYXRlRW1wbG95ZWUoRW50aXR5TWFuYWdlciBlbSwgaW50\nIGlkKSB7CiAgICAgICAgRW1wbG95ZWUgZSA9IG5ldyBFbXBsb3llZSgpOwog\nICAgICAgIGUuc2V0RW1wSWQoaWQpOwogICAgICAgIENvbnRhY3RJbmZvIGNv\nbnRhY3RJbmZvID0gbmV3IENvbnRhY3RJbmZvKCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBudW1QaG9uZU51bWJlcnNQZXJFbXBsb3llZTsgaSsr\nKSB7IAogICAgICAgICAgICBQaG9uZU51bWJlciBwaG9uZU51bWJlciA9IHBo\nb25lcy5nZXQocGhvbmVJZCsrKTsKICAgICAgICAgICAgY29udGFjdEluZm8u\nYWRkUGhvbmVOdW1iZXIocGhvbmVOdW1iZXIpOwogICAgICAgICAgICBlLnNl\ndENvbnRhY3RJbmZvKGNvbnRhY3RJbmZvKTsKICAgICAgICAgICAgcGhvbmVO\ndW1iZXIuYWRkRW1wbG95ZWVzKGUpOwogICAgICAgICAgICBlbS5wZXJzaXN0\nKHBob25lTnVtYmVyKTsKICAgICAgICB9CiAgICAgICAgUGFya2luZ1Nwb3Qg\ncGFya2luZ1Nwb3QgPSBjcmVhdGVQYXJraW5nU3BvdChlbSwgcGFya2luZ1Nw\nb3RJZCsrKTsKICAgICAgICBMb2NhdGlvbkRldGFpbHMgbG9jYXRpb24gPSBu\nZXcgTG9jYXRpb25EZXRhaWxzKCk7CiAgICAgICAgbG9jYXRpb24uc2V0T2Zm\naWNlTnVtYmVyKGlkKTsKICAgICAgICBsb2NhdGlvbi5zZXRQYXJraW5nU3Bv\ndChwYXJraW5nU3BvdCk7CiAgICAgICAgZS5zZXRMb2NhdGlvbkRldGFpbHMo\nbG9jYXRpb24pOwogICAgICAgIHBhcmtpbmdTcG90LnNldEFzc2lnbmVkVG8o\nZSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1OaWNrTmFtZXM7\nIGkrKykKICAgICAgICAgICAgZS5hZGROaWNrTmFtZSgibmlja05hbWUiICsg\naWQgKyBpKTsKICAgICAgICBlbS5wZXJzaXN0KHBhcmtpbmdTcG90KTsKICAg\nICAgICBlbS5wZXJzaXN0KGUpOwogICAgICAgIHJldHVybiBlOwogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVQaG9uZU51bWJlcnMoRW50aXR5\nTWFuYWdlciBlbSkgewogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVt\nUGhvbmVOdW1iZXJzOyBpKyspIHsKICAgICAgICAgICAgUGhvbmVOdW1iZXIg\ncCA9IG5ldyBQaG9uZU51bWJlcigpOwogICAgICAgICAgICBwLnNldE51bWJl\ncihwaG9uZUlkKyspOwogICAgICAgICAgICBwaG9uZXMucHV0KHAuZ2V0TnVt\nYmVyKCksIHApOwogICAgICAgICAgICBlbS5wZXJzaXN0KHApOwogICAgICAg\nIH0KICAgIH0gICAgCiAgICAKICAgIHB1YmxpYyBQYXJraW5nU3BvdCBjcmVh\ndGVQYXJraW5nU3BvdChFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAg\nICAgICBQYXJraW5nU3BvdCBwID0gbmV3IFBhcmtpbmdTcG90KCk7CiAgICAg\nICAgcC5zZXRJZChpZCk7CiAgICAgICAgcC5zZXRHYXJhZ2UoImdhcmFnZSIg\nKyBpZCk7CiAgICAgICAgZW0ucGVyc2lzdChwKTsKICAgICAgICByZXR1cm4g\ncDsKICAgIH0gICAgCgogICAgcHVibGljIHZvaWQgZmluZEVtcGxveWVlT2Jq\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIFByb2dyYW1NYW5hZ2VyIHBtID0gZW0u\nZmluZChQcm9ncmFtTWFuYWdlci5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0\nUHJvZ3JhbU1hbmFnZXIocG0pOwoKICAgICAgICBwbSA9IGVtLmZpbmQoUHJv\nZ3JhbU1hbmFnZXIuY2xhc3MsIDIpOwogICAgICAgIGFzc2VydFByb2dyYW1N\nYW5hZ2VyKHBtKTsKCiAgICAgICAgRW1wbG95ZWUgZSA9IGVtLmZpbmQoRW1w\nbG95ZWUuY2xhc3MsIDEpOwogICAgICAgIGFzc2VydEVtcGxveWVlKGUpOwog\nICAgICAgIAogICAgICAgIFBob25lTnVtYmVyIHAgPSBlbS5maW5kKFBob25l\nTnVtYmVyLmNsYXNzLCAxKTsKICAgICAgICBhc3NlcnRQaG9uZU51bWJlcihw\nKTsKICAgICAgICAKICAgICAgICBQYXJraW5nU3BvdCBwcyA9IGVtLmZpbmQo\nUGFya2luZ1Nwb3QuY2xhc3MsIDEpOwogICAgICAgIGFzc2VydFBhcmtpbmdT\ncG90KHBzKTsKICAgICAgIAogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW1wbG95ZWVPYmooKSB7CiAgICAg\nICAgcXVlcnlQcm9ncmFtTWFuYWdlcihlbWYpOwogICAgICAgIHF1ZXJ5RW1w\nbG95ZWVPYmooZW1mKTsKICAgICAgICBxdWVyeVBob25lTnVtYmVyKGVtZik7\nCiAgICAgICAgcXVlcnlQYXJraW5nU3BvdChlbWYpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCBxdWVyeVBhcmtpbmdTcG90KEVudGl0eU1hbmFnZXJG\nYWN0b3J5IGVtZikgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0\naW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4u\nYmVnaW4oKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNl\nbGVjdCBwIGZyb20gUGFya2luZ1Nwb3QgcCIpOwogICAgICAgIExpc3Q8UGFy\na2luZ1Nwb3Q+IHBzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9y\nIChQYXJraW5nU3BvdCBwIDogcHMpewogICAgICAgICAgICBhc3NlcnRQYXJr\naW5nU3BvdChwKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsK\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCBxdWVyeVByb2dyYW1NYW5hZ2VyKEVudGl0eU1hbmFnZXJGYWN0b3J5IGVt\nZikgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4g\nPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsK\nICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBwbSBm\ncm9tIFByb2dyYW1NYW5hZ2VyIHBtIik7CiAgICAgICAgTGlzdDxQcm9ncmFt\nTWFuYWdlcj4gcG1zID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9y\nIChQcm9ncmFtTWFuYWdlciBwbSA6IHBtcyl7CiAgICAgICAgICAgIGFzc2Vy\ndFByb2dyYW1NYW5hZ2VyKHBtKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5j\nb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHF1ZXJ5UGhvbmVOdW1iZXIoRW50aXR5TWFuYWdlckZhY3Rvcnkg\nZW1mKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJh\nbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigp\nOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IHAg\nZnJvbSBQaG9uZU51bWJlciBwIik7CiAgICAgICAgTGlzdDxQaG9uZU51bWJl\ncj4gcHMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKFBob25l\nTnVtYmVyIHAgOiBwcyl7CiAgICAgICAgICAgIGFzc2VydFBob25lTnVtYmVy\nKHApOwogICAgICAgIH0KICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcXVlcnlFbXBs\nb3llZU9iaihFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNh\nY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkg\ncSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZSBmcm9tIEVtcGxveWVlIGUi\nKTsKICAgICAgICBMaXN0PEVtcGxveWVlPiBlcyA9IHEuZ2V0UmVzdWx0TGlz\ndCgpOwogICAgICAgIGZvciAoRW1wbG95ZWUgZSA6IGVzKXsKICAgICAgICAg\nICAgYXNzZXJ0RW1wbG95ZWUoZSk7CiAgICAgICAgfQogICAgICAgIHRyYW4u\nY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICAvLyB0ZXN0\nIHJhbmdlIHZhcmlhYmxlIG92ZXIgZWxlbWVudCBjb2xsZWN0aW9uCiAgICAg\nICAgU3RyaW5nW10gcXVlcnkgPSB7CiAgICAgICAgICAgICJzZWxlY3QgZSBm\ncm9tIEVtcGxveWVlIGUsIGluIChlLm5pY2tOYW1lcykgbiAiICsKICAgICAg\nICAgICAgICAgICIgd2hlcmUgbiBsaWtlICclMSciLCAgCiAgICAgICAgfTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgIGVzID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0p\nLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgZm9yIChFbXBsb3llZSBl\nIDogZXMpewogICAgICAgICAgICAgICAgYXNzZXJ0RW1wbG95ZWUoZSk7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRQcm9ncmFtTWFuYWdlcihQcm9n\ncmFtTWFuYWdlciBwbSkgewogICAgICAgIGludCBpZCA9IHBtLmdldElkKCk7\nCiAgICAgICAgQ29sbGVjdGlvbjxFbXBsb3llZT4gZXMgPSBwbS5nZXRNYW5h\nZ2VzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG51bUVtcGxveWVlc1BlclBy\nb2dyYW1NYW5hZ2VyLCBlcy5zaXplKCkpOwogICAgICAgIGZvciAoRW1wbG95\nZWUgZSA6IGVzKSB7CiAgICAgICAgICAgIGFzc2VydEVtcGxveWVlKGUpOwog\nICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgYXNzZXJ0RW1w\nbG95ZWUoRW1wbG95ZWUgZSkgewogICAgICAgIGludCBpZCA9IGUuZ2V0RW1w\nSWQoKTsKICAgICAgICBDb250YWN0SW5mbyBjID0gZS5nZXRDb250YWN0SW5m\nbygpOwogICAgICAgIExpc3Q8UGhvbmVOdW1iZXI+IHBob25lcyA9IGMuZ2V0\nUGhvbmVOdW1iZXJzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG51bVBob25l\nTnVtYmVyc1BlckVtcGxveWVlLCBwaG9uZXMuc2l6ZSgpKTsKICAgICAgICBm\nb3IgKFBob25lTnVtYmVyIHAgOiBwaG9uZXMpIHsKICAgICAgICAgICAgYXNz\nZXJ0UGhvbmVOdW1iZXIocCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAg\nIExvY2F0aW9uRGV0YWlscyBsb2MgPSBlLmdldExvY2F0aW9uRGV0YWlscygp\nOwogICAgICAgIGludCBvZmZpY2VOdW1iZXIgPSBsb2MuZ2V0T2ZmaWNlTnVt\nYmVyKCk7CiAgICAgICAgUGFya2luZ1Nwb3QgcCA9IGxvYy5nZXRQYXJraW5n\nU3BvdCgpOwogICAgICAgIGFzc2VydFBhcmtpbmdTcG90KHApOwogICAgICAg\nIFByb2dyYW1NYW5hZ2VyIHBtID0gZS5nZXRKb2JJbmZvKCkuZ2V0UHJvZ3Jh\nbU1hbmFnZXIoKTsKICAgICAgICBTZXQ8U3RyaW5nPiBuaWNrTmFtZXMgPSBl\nLmdldE5pY2tOYW1lcygpOwogICAgICAgIGFzc2VydEVxdWFscyhudW1OaWNr\nTmFtZXMsIG5pY2tOYW1lcy5zaXplKCkpOwogICAgICAgIAogICAgfQogICAg\nCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRQaG9uZU51bWJlcihQaG9uZU51bWJl\nciBwKSB7CiAgICAgICAgaW50IG51bWJlciA9IHAuZ2V0TnVtYmVyKCk7CiAg\nICAgICAgQ29sbGVjdGlvbjxFbXBsb3llZT4gZXMgPSBwLmdldEVtcGxveWVl\ncygpOwogICAgICAgIGFzc2VydEVxdWFscyhudW1FbXBsb3llZXNQZXJQaG9u\nZU51bWJlciwgZXMuc2l6ZSgpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZv\naWQgYXNzZXJ0UGFya2luZ1Nwb3QoUGFya2luZ1Nwb3QgcCkgewogICAgICAg\nIFN0cmluZyBnYXJhZ2UgPSBwLmdldEdhcmFnZSgpOwogICAgICAgIEVtcGxv\neWVlIGUgPSBwLmdldEFzc2lnbmVkVG8oKTsKICAgIH0KICAgIAogICAgLyoK\nICAgICAqIEZpbmQgRW50aXR5QV9Db2xsX1N0cmluZwogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBmaW5kRW50aXR5QV9Db2xsX1N0cmluZygpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBFbnRpdHlBX0NvbGxfU3RyaW5nIGEgPSBlbS5maW5kKEVu\ndGl0eUFfQ29sbF9TdHJpbmcuY2xhc3MsIElEKTsKICAgICAgICBjaGVja0Vu\ndGl0eUFfQ29sbF9TdHJpbmcoYSk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICAvKgogICAgICogRmluZCBFbnRpdHlBX0VtYmVkX1RvT25lCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIGZpbmRFbnRpdHlBX0VtYmVkX1RvT25l\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eUFfRW1iZWRfVG9PbmUgYSA9\nIGVtLmZpbmQoRW50aXR5QV9FbWJlZF9Ub09uZS5jbGFzcywgSUQpOwogICAg\nICAgIGNoZWNrRW50aXR5QV9FbWJlZF9Ub09uZShhKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucmVtb3ZlKGEp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgLy9kZWxldGUgY2FzY2FkZQogICAgICAgIEVudGl0eUIxIGIgPSBlbS5m\naW5kKEVudGl0eUIxLmNsYXNzLCBJRCk7CiAgICAgICAgYXNzZXJ0TnVsbChi\nKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0TGF6eUZldGNoRW1iZWQoKSB7CiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nRW50aXR5QV9FbWJlZCBhID0gbmV3IEVudGl0eUFfRW1iZWQoKTsKICAgICAg\nICBhLnNldElkKElEKTsKICAgICAgICBhLnNldE5hbWUoIm5hbWUiKTsKICAg\nICAgICBhLnNldEFnZSgxKTsKICAgICAgICBFbWJlZCBlbWIgPSBuZXcgRW1i\nZWQoKTsKICAgICAgICBlbWIuc2V0SW50VmFsMSgxKTsKICAgICAgICBlbWIu\nc2V0SW50VmFsMSgyKTsKICAgICAgICBlbWIuc2V0SW50VmFsMSgzKTsKICAg\nICAgICBhLnNldEVtYmVkKGVtYik7CiAgICAgICAgZW0ucGVyc2lzdChhKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbGVh\ncigpOwogICAgICAgIAogICAgICAgIFBlcnNpc3RlbmNlVW5pdFV0aWwgcHV1\nID0gZW1mLmdldFBlcnNpc3RlbmNlVW5pdFV0aWwoKTsKICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlciBrZW0gPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2Fz\ndChlbSk7CiAgICAgICAgLy8gZG8gbm90IGZldGNoIGVtYgogICAgICAgIGtl\nbS5nZXRGZXRjaFBsYW4oKS5yZXNldEZldGNoR3JvdXBzKCkucmVtb3ZlRmV0\nY2hHcm91cCgiZGVmYXVsdCIpCiAgICAgICAgICAgIC5hZGRGaWVsZChFbnRp\ndHlBX0VtYmVkLmNsYXNzLCAibmFtZSIpCiAgICAgICAgICAgIC5hZGRGaWVs\nZChFbnRpdHlBX0VtYmVkLmNsYXNzLCAiYWdlIik7CiAgICAgICAgYSA9IGVt\nLmZpbmQoRW50aXR5QV9FbWJlZC5jbGFzcywgSUQpOwogICAgICAgIGFzc2Vy\ndE5vdE51bGwoYSk7CiAgICAgICAgRW1iZWQgZW1iZWQgPSBhLmdldEVtYmVk\nKCk7CiAgICAgICAgYXNzZXJ0TnVsbChlbWJlZCk7CiAgICAgICAgYXNzZXJ0\nRmFsc2UocHV1LmlzTG9hZGVkKGEsICJlbWJlZCIpKTsKICAgIH0KCiAgICAv\nKgogICAgICogRmluZCBFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIGZpbmRFbnRpdHlBX0VtYmVkX01hcHBlZFRv\nT25lKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eUFfRW1iZWRfTWFwcGVk\nVG9PbmUgYSA9CiAgICAgICAgICAgIGVtLmZpbmQoRW50aXR5QV9FbWJlZF9N\nYXBwZWRUb09uZS5jbGFzcywgSUQpOwogICAgICAgIGNoZWNrRW50aXR5QV9F\nbWJlZF9NYXBwZWRUb09uZShhKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIC8qCiAgICAgKiBGaW5kIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09u\nZQogICAgICovCiAgICBwdWJsaWMgdm9pZCBmaW5kRW50aXR5QV9Db2xsX0Vt\nYmVkX1RvT25lKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eUFfQ29sbF9F\nbWJlZF9Ub09uZSBhID0KICAgICAgICAgICAgZW0uZmluZChFbnRpdHlBX0Nv\nbGxfRW1iZWRfVG9PbmUuY2xhc3MsIElEKTsKICAgICAgICBjaGVja0VudGl0\neUFfQ29sbF9FbWJlZF9Ub09uZShhKTsKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQoKICAgIC8qCiAgICAgKiBGaW5kIEVudGl0eUFfRW1iZWRfVG9NYW55\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGZpbmRFbnRpdHlBX0VtYmVkX1Rv\nTWFueSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlBX0VtYmVkX1RvTWFu\neSBhID0gZW0uZmluZChFbnRpdHlBX0VtYmVkX1RvTWFueS5jbGFzcywgSUQp\nOwogICAgICAgIGNoZWNrRW50aXR5QV9FbWJlZF9Ub01hbnkoYSk7CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAgICogRmluZCBFbnRp\ndHlBX0VtYmVkX0VtYmVkX1RvTWFueQogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBmaW5kRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkoKSB7CiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSA9CiAgICAg\nICAgICAgIGVtLmZpbmQoRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkuY2xh\nc3MsIElEKTsKICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRfRW1iZWRfVG9N\nYW55KGEpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyoKICAg\nICAqIEZpbmQgRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIKICAgICAqLwog\nICAgcHVibGljIHZvaWQgZmluZEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2Vy\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRl\nZ2VyIGEgPQogICAgICAgICAgICBlbS5maW5kKEVudGl0eUFfRW1iZWRfQ29s\nbF9JbnRlZ2VyLmNsYXNzLCBJRCk7CiAgICAgICAgY2hlY2tFbnRpdHlBX0Vt\nYmVkX0NvbGxfSW50ZWdlcihhKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIC8qCiAgICAgKiBGaW5kIEVudGl0eUFfRW1iZWRfRW1iZWQKICAg\nICAqLwogICAgcHVibGljIHZvaWQgZmluZEVudGl0eUFfRW1iZWRfRW1iZWQo\nKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5QV9FbWJlZF9FbWJlZCBhID0g\nZW0uZmluZChFbnRpdHlBX0VtYmVkX0VtYmVkLmNsYXNzLCBJRCk7CiAgICAg\nICAgY2hlY2tFbnRpdHlBX0VtYmVkX0VtYmVkKGEpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9CgogICAgLyoKICAgICAqIEZpbmQgRW50aXR5QV9Db2xs\nX0VtYmVkX0VtYmVkCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGZpbmRFbnRp\ndHlBX0NvbGxfRW1iZWRfRW1iZWQoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50\naXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgPQogICAgICAgICAgICBlbS5maW5k\nKEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZC5jbGFzcywgSUQpOwogICAgICAg\nIGNoZWNrRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkKGEpOwogICAgICAgIAog\nICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIEVtYmVkX0VtYmVkIGVtYmVkID0gY3JlYXRl\nRW1iZWRfRW1iZWQoZW0sIElELCAxMDApOwogICAgICAgIGEuYWRkRW1iZWQo\nZW1iZWQpOwogICAgICAgIGVtLm1lcmdlKGEpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICAvKgogICAgICogRmluZCBFbnRpdHlBX0VtYmVkX0NvbGxfRW1i\nZWQKICAgICAqLwogICAgcHVibGljIHZvaWQgZmluZEVudGl0eUFfRW1iZWRf\nQ29sbF9FbWJlZCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlBX0VtYmVk\nX0NvbGxfRW1iZWQgYSA9CiAgICAgICAgICAgIGVtLmZpbmQoRW50aXR5QV9F\nbWJlZF9Db2xsX0VtYmVkLmNsYXNzLCBJRCk7CiAgICAgICAgY2hlY2tFbnRp\ndHlBX0VtYmVkX0NvbGxfRW1iZWQoYSk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICAvKgogICAgICogY2hlY2sgRW50aXR5QV9Db2xsX1N0cmlu\nZwogICAgICovCiAgICBwdWJsaWMgdm9pZCBjaGVja0VudGl0eUFfQ29sbF9T\ndHJpbmcoRW50aXR5QV9Db2xsX1N0cmluZyBhKSB7CiAgICAgICAgaW50IGlk\nID0gYS5nZXRJZCgpOwogICAgICAgIFN0cmluZyBuYW1lID0gYS5nZXROYW1l\nKCk7CiAgICAgICAgaW50IGFnZSA9IGEuZ2V0QWdlKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIGlkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImEiICsg\naWQgLG5hbWUpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBhZ2UpOwogICAg\nICAgIFNldDxTdHJpbmc+IG5pY2tOYW1lcyA9IGEuZ2V0Tmlja05hbWVzKCk7\nCiAgICAgICAgZm9yIChTdHJpbmcgbmlja05hbWUgOiBuaWNrTmFtZXMpCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscygibmlja05hbWVfIiArIGlkICsgIjAi\nLCBuaWNrTmFtZSk7CiAgICAgICAgTGlzdDxFbnRpdHlBX0NvbGxfU3RyaW5n\nLkNyZWRpdFJhdGluZz4gY3IgPSBhLmdldENyZWRpdFJhdGluZygpOwogICAg\nICAgIGZvciAoRW50aXR5QV9Db2xsX1N0cmluZy5DcmVkaXRSYXRpbmcgYyA6\nIGNyKQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoIlBPT1IiLCBjLnRvU3Ry\naW5nKCkpOwogICAgfQoKICAgIC8qCiAgICAgKiBjaGVjayBFbnRpdHlBX0Vt\nYmVkX1RvT25lCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNoZWNrRW50aXR5\nQV9FbWJlZF9Ub09uZShFbnRpdHlBX0VtYmVkX1RvT25lIGEpIHsKICAgICAg\nICBpbnQgaWQgPSBhLmdldElkKCk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBh\nLmdldE5hbWUoKTsKICAgICAgICBpbnQgYWdlID0gYS5nZXRBZ2UoKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgaWQpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiYSIgKyBpZCAsbmFtZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGFn\nZSk7CiAgICAgICAgRW1iZWRfVG9PbmUgZW1iZWQgPSBhLmdldEVtYmVkKCk7\nCiAgICAgICAgY2hlY2tFbWJlZF9Ub09uZShlbWJlZCk7CiAgICB9CgogICAg\nLyoKICAgICAqIGNoZWNrIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUKICAg\nICAqLwogICAgcHVibGljIHZvaWQgY2hlY2tFbnRpdHlBX0VtYmVkX01hcHBl\nZFRvT25lKEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUgYSkgewogICAgICAg\nIGludCBpZCA9IGEuZ2V0SWQoKTsKICAgICAgICBTdHJpbmcgbmFtZSA9IGEu\nZ2V0TmFtZSgpOwogICAgICAgIGludCBhZ2UgPSBhLmdldEFnZSgpOwogICAg\nICAgIGFzc2VydEVxdWFscygxLCBpZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJhIiArIGlkICxuYW1lKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYWdl\nKTsKICAgICAgICBFbWJlZF9NYXBwZWRUb09uZSBlbWJlZCA9IGEuZ2V0RW1i\nZWQoKTsKICAgICAgICBjaGVja0VtYmVkX01hcHBlZFRvT25lKGVtYmVkKTsK\nICAgIH0KCiAgICAvKgogICAgICogY2hlY2sgRW50aXR5QV9Db2xsX0VtYmVk\nX1RvT25lCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNoZWNrRW50aXR5QV9D\nb2xsX0VtYmVkX1RvT25lKEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBhKSB7\nCiAgICAgICAgaW50IGlkID0gYS5nZXRJZCgpOwogICAgICAgIFN0cmluZyBu\nYW1lID0gYS5nZXROYW1lKCk7CiAgICAgICAgaW50IGFnZSA9IGEuZ2V0QWdl\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGlkKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoImEiICsgaWQgLG5hbWUpOwogICAgICAgIGFzc2VydEVxdWFs\ncygxLCBhZ2UpOwogICAgICAgIFNldDxFbWJlZF9Ub09uZT4gZW1iZWRzID0g\nYS5nZXRFbWJlZDFUb09uZXMoKTsKICAgICAgICBmb3IgKEVtYmVkX1RvT25l\nIGVtYmVkIDogZW1iZWRzKQogICAgICAgICAgICBjaGVja0VtYmVkX1RvT25l\nKGVtYmVkKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjaGVja0VtYmVkX1Rv\nT25lKEVtYmVkX1RvT25lIGVtYmVkKSB7CiAgICAgICAgU3RyaW5nIG5hbWUx\nID0gZW1iZWQuZ2V0TmFtZTEoKTsKICAgICAgICBTdHJpbmcgbmFtZTIgPSBl\nbWJlZC5nZXROYW1lMigpOwogICAgICAgIFN0cmluZyBuYW1lMyA9IGVtYmVk\nLmdldE5hbWUzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJuYW1lMSIsIG5h\nbWUxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIm5hbWUyIiwgbmFtZTIpOwog\nICAgICAgIGFzc2VydEVxdWFscygibmFtZTMiLCBuYW1lMyk7CiAgICAgICAg\nRW50aXR5QjEgYiA9IGVtYmVkLmdldEVudGl0eUIoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMSwgYi5nZXRJZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nImIiICsgYi5nZXRJZCgpLCBiLmdldE5hbWUoKSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgY2hlY2tFbWJlZF9NYXBwZWRUb09uZShFbWJlZF9NYXBwZWRU\nb09uZSBlbWJlZCkgewogICAgICAgIFN0cmluZyBuYW1lMSA9IGVtYmVkLmdl\ndE5hbWUxKCk7CiAgICAgICAgU3RyaW5nIG5hbWUyID0gZW1iZWQuZ2V0TmFt\nZTIoKTsKICAgICAgICBTdHJpbmcgbmFtZTMgPSBlbWJlZC5nZXROYW1lMygp\nOwogICAgICAgIGFzc2VydEVxdWFscygibmFtZTEiLCBuYW1lMSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJuYW1lMiIsIG5hbWUyKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoIm5hbWUzIiwgbmFtZTMpOwogICAgICAgIEVudGl0eUIxIGIg\nPSBlbWJlZC5nZXRNYXBwZWRFbnRpdHlCKCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIGIuZ2V0SWQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJibSIg\nKyBiLmdldElkKCksIGIuZ2V0TmFtZSgpKTsKICAgIH0KCiAgICAvKgogICAg\nICogY2hlY2sgRW50aXR5QV9FbWJlZF9Ub01hbnkKICAgICAqLwogICAgcHVi\nbGljIHZvaWQgY2hlY2tFbnRpdHlBX0VtYmVkX1RvTWFueShFbnRpdHlBX0Vt\nYmVkX1RvTWFueSBhKSB7CiAgICAgICAgaW50IGlkID0gYS5nZXRJZCgpOwog\nICAgICAgIFN0cmluZyBuYW1lID0gYS5nZXROYW1lKCk7CiAgICAgICAgaW50\nIGFnZSA9IGEuZ2V0QWdlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGlk\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImEiICsgaWQgLG5hbWUpOwogICAg\nICAgIGFzc2VydEVxdWFscygxLCBhZ2UpOwogICAgICAgIEVtYmVkX1RvTWFu\neSBlbWJlZCA9IGEuZ2V0RW1iZWQoKTsKICAgICAgICBjaGVja0VtYmVkX1Rv\nTWFueShlbWJlZCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2hlY2tFbWJl\nZF9Ub01hbnkoRW1iZWRfVG9NYW55IGVtYmVkKSB7CiAgICAgICAgU3RyaW5n\nIG5hbWUxID0gZW1iZWQuZ2V0TmFtZTEoKTsKICAgICAgICBTdHJpbmcgbmFt\nZTIgPSBlbWJlZC5nZXROYW1lMigpOwogICAgICAgIFN0cmluZyBuYW1lMyA9\nIGVtYmVkLmdldE5hbWUzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJuYW1l\nMSIsIG5hbWUxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIm5hbWUyIiwgbmFt\nZTIpOwogICAgICAgIGFzc2VydEVxdWFscygibmFtZTMiLCBuYW1lMyk7CiAg\nICAgICAgTGlzdDxFbnRpdHlCMT4gYnMgPSBlbWJlZC5nZXRFbnRpdHlCcygp\nOwogICAgICAgIGZvciAoRW50aXR5QjEgYiA6IGJzKSB7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscygxLCBiLmdldElkKCkpOwogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoImIiICsgYi5nZXRJZCgpICsgIjAiLCBiLmdldE5hbWUoKSk7\nCiAgICAgICAgfQogICAgfQoKICAgIC8qCiAgICAgKiBjaGVjayBFbnRpdHlB\nX0VtYmVkX0VtYmVkX1RvTWFueQogICAgICovCiAgICBwdWJsaWMgdm9pZCBj\naGVja0VudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55KEVudGl0eUFfRW1iZWRf\nRW1iZWRfVG9NYW55IGEpIHsKICAgICAgICBpbnQgaWQgPSBhLmdldElkKCk7\nCiAgICAgICAgU3RyaW5nIG5hbWUgPSBhLmdldE5hbWUoKTsKICAgICAgICBp\nbnQgYWdlID0gYS5nZXRBZ2UoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwg\naWQpOwogICAgICAgIGFzc2VydEVxdWFscygiYSIgKyBpZCAsbmFtZSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIGFnZSk7CiAgICAgICAgRW1iZWRfRW1i\nZWRfVG9NYW55IGVtYmVkID0gYS5nZXRFbWJlZCgpOwogICAgICAgIGNoZWNr\nRW1iZWRfRW1iZWRfVG9NYW55KGVtYmVkKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgY2hlY2tFbWJlZF9FbWJlZF9Ub01hbnkoRW1iZWRfRW1iZWRf\nVG9NYW55IGVtYmVkKSB7CiAgICAgICAgaW50IGludFZhbDEgPSBlbWJlZC5n\nZXRJbnRWYWwxKCk7CiAgICAgICAgaW50IGludFZhbDIgPSBlbWJlZC5nZXRJ\nbnRWYWwyKCk7CiAgICAgICAgaW50IGludFZhbDMgPSBlbWJlZC5nZXRJbnRW\nYWwzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGludFZhbDEpOwogICAg\nICAgIGFzc2VydEVxdWFscygyLCBpbnRWYWwyKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMywgaW50VmFsMyk7CiAgICAgICAgRW1iZWRfVG9NYW55IGVtYmVk\nMSA9IGVtYmVkLmdldEVtYmVkKCk7CiAgICAgICAgY2hlY2tFbWJlZF9Ub01h\nbnkoZW1iZWQxKTsKICAgIH0KICAgIAogICAgLyoKICAgICAqIGNoZWNrIEVu\ndGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIGNoZWNrRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIoRW50aXR5QV9F\nbWJlZF9Db2xsX0ludGVnZXIgYSkgewogICAgICAgIGludCBpZCA9IGEuZ2V0\nSWQoKTsKICAgICAgICBTdHJpbmcgbmFtZSA9IGEuZ2V0TmFtZSgpOwogICAg\nICAgIGludCBhZ2UgPSBhLmdldEFnZSgpOwogICAgICAgIGFzc2VydEVxdWFs\ncygxLCBpZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJhIiArIGlkICxuYW1l\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYWdlKTsKICAgICAgICBFbWJl\nZF9Db2xsX0ludGVnZXIgZW1iZWQgPSBhLmdldEVtYmVkKCk7CiAgICAgICAg\nY2hlY2tFbWJlZF9JbnRlZ2VycyhlbWJlZCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgY2hlY2tFbWJlZF9JbnRlZ2VycyhFbWJlZF9Db2xsX0ludGVnZXIg\nZW1iZWQpIHsKICAgICAgICBpbnQgaW50VmFsMSA9IGVtYmVkLmdldEludFZh\nbDEoKTsKICAgICAgICBpbnQgaW50VmFsMiA9IGVtYmVkLmdldEludFZhbDIo\nKTsKICAgICAgICBpbnQgaW50VmFsMyA9IGVtYmVkLmdldEludFZhbDMoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMTEsIGludFZhbDEpOwogICAgICAgIGFz\nc2VydEVxdWFscygxMiwgaW50VmFsMik7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEzLCBpbnRWYWwzKTsKICAgICAgICBTZXQ8SW50ZWdlcj4gaW50VmFscyA9\nIGVtYmVkLmdldE90aGVySW50VmFscygpOwogICAgICAgIGZvciAoSW50ZWdl\nciBpbnRWYWwgOiBpbnRWYWxzKSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncygxMDAsIGludFZhbC5pbnRWYWx1ZSgpKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoKICAgICAqIGNoZWNrIEVudGl0eUFfRW1iZWRfRW1iZWQKICAgICAq\nLwogICAgcHVibGljIHZvaWQgY2hlY2tFbnRpdHlBX0VtYmVkX0VtYmVkKEVu\ndGl0eUFfRW1iZWRfRW1iZWQgYSkgewogICAgICAgIGludCBpZCA9IGEuZ2V0\nSWQoKTsKICAgICAgICBTdHJpbmcgbmFtZSA9IGEuZ2V0TmFtZSgpOwogICAg\nICAgIGludCBhZ2UgPSBhLmdldEFnZSgpOwogICAgICAgIGFzc2VydEVxdWFs\ncygxLCBpZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJhIiArIGlkICxuYW1l\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYWdlKTsKICAgICAgICBFbWJl\nZF9FbWJlZCBlbWJlZCA9IGEuZ2V0RW1iZWQoKTsKICAgICAgICBjaGVja0Vt\nYmVkX0VtYmVkKGVtYmVkKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjaGVj\na0VtYmVkX0VtYmVkKEVtYmVkX0VtYmVkIGVtYmVkKSB7CiAgICAgICAgaW50\nIGludFZhbDEgPSBlbWJlZC5nZXRJbnRWYWwxKCk7CiAgICAgICAgaW50IGlu\ndFZhbDIgPSBlbWJlZC5nZXRJbnRWYWwyKCk7CiAgICAgICAgaW50IGludFZh\nbDMgPSBlbWJlZC5nZXRJbnRWYWwzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEwMSwgaW50VmFsMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwMiwgaW50\nVmFsMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwMywgaW50VmFsMyk7CiAg\nICAgICAgRW1iZWQgZW1iZWQxID0gZW1iZWQuZ2V0RW1iZWQoKTsKICAgICAg\nICBjaGVja0VtYmVkKGVtYmVkMSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nY2hlY2tFbWJlZChFbWJlZCBlbWJlZCkgewogICAgICAgIGludCBpbnRWYWwx\nID0gZW1iZWQuZ2V0SW50VmFsMSgpOwogICAgICAgIGludCBpbnRWYWwyID0g\nZW1iZWQuZ2V0SW50VmFsMigpOwogICAgICAgIGludCBpbnRWYWwzID0gZW1i\nZWQuZ2V0SW50VmFsMygpOwogICAgICAgIGFzc2VydEVxdWFscygxMDQsIGlu\ndFZhbDEpOwogICAgICAgIGFzc2VydEVxdWFscygxMDUsIGludFZhbDIpOwog\nICAgICAgIGFzc2VydEVxdWFscygxMDYsIGludFZhbDMpOwogICAgfQoKICAg\nIC8qCiAgICAgKiBjaGVjayBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQKICAg\nICAqLwogICAgcHVibGljIHZvaWQgY2hlY2tFbnRpdHlBX0NvbGxfRW1iZWRf\nRW1iZWQoRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEpIHsKICAgICAgICBp\nbnQgaWQgPSBhLmdldElkKCk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBhLmdl\ndE5hbWUoKTsKICAgICAgICBpbnQgYWdlID0gYS5nZXRBZ2UoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgaWQpOwogICAgICAgIGFzc2VydEVxdWFscygi\nYSIgKyBpZCAsbmFtZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGFnZSk7\nCiAgICAgICAgTGlzdDxFbWJlZF9FbWJlZD4gZW1iZWRzID0gYS5nZXRFbWJl\nZHMoKTsKICAgICAgICBmb3IgKEVtYmVkX0VtYmVkIGVtYmVkIDogZW1iZWRz\nKQogICAgICAgICAgICBjaGVja0VtYmVkX0VtYmVkKGVtYmVkKTsKICAgIH0K\nCiAgICAvKgogICAgICogY2hlY2sgRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVk\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNoZWNrRW50aXR5QV9FbWJlZF9D\nb2xsX0VtYmVkKEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBhKSB7CiAgICAg\nICAgaW50IGlkID0gYS5nZXRJZCgpOwogICAgICAgIFN0cmluZyBuYW1lID0g\nYS5nZXROYW1lKCk7CiAgICAgICAgaW50IGFnZSA9IGEuZ2V0QWdlKCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIGlkKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoImEiICsgaWQgLG5hbWUpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBh\nZ2UpOwogICAgICAgIEVtYmVkX0NvbGxfRW1iZWQgZW1iZWQgPSBhLmdldEVt\nYmVkKCk7CiAgICAgICAgY2hlY2tFbWJlZF9Db2xsX0VtYmVkKGVtYmVkKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjaGVja0VtYmVkX0NvbGxfRW1iZWQo\nRW1iZWRfQ29sbF9FbWJlZCBlbWJlZCkgewogICAgICAgIGludCBpbnRWYWwx\nID0gZW1iZWQuZ2V0SW50VmFsMSgpOwogICAgICAgIGludCBpbnRWYWwyID0g\nZW1iZWQuZ2V0SW50VmFsMigpOwogICAgICAgIGludCBpbnRWYWwzID0gZW1i\nZWQuZ2V0SW50VmFsMygpOwogICAgICAgIGFzc2VydEVxdWFscygxMSwgaW50\nVmFsMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEyLCBpbnRWYWwyKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMTMsIGludFZhbDMpOwogICAgICAgIExpc3Q8\nRW1iZWQ+IGVtYmVkcyA9IGVtYmVkLmdldEVtYmVkcygpOwogICAgICAgIGZv\nciAoRW1iZWQgZW1iZWQxIDogZW1iZWRzKQogICAgICAgICAgICBjaGVja0Vt\nYmVkKGVtYmVkMSk7CiAgICB9CgogICAgLyoKICAgICAqIFF1ZXJ5IEVudGl0\neUFfQ29sbF9TdHJpbmcKICAgICAqLwogICAgcHVibGljIHZvaWQgcXVlcnlF\nbnRpdHlBX0NvbGxfU3RyaW5nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIFN0cmlu\nZ1tdIHF1ZXJ5ID0gewogICAgICAgICAgICAic2VsZWN0IGUgZnJvbSAiICsK\nICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX1N0cmluZyBhICIgKwog\nICAgICAgICAgICAgICAgIiAsIGluIChhLm5pY2tOYW1lcykgZSBvcmRlciBi\neSBhLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBlIGZyb20gIiArCiAgICAg\nICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9TdHJpbmcgYSAiICsKICAgICAg\nICAgICAgICAgICIgLCBpbiAoYS5uaWNrTmFtZXMpIGUgb3JkZXIgYnkgYS5p\nZCIsCiAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tICIgKwogICAgICAgICAg\nICAgICAgIiBFbnRpdHlBX0NvbGxfU3RyaW5nIGEgIiArCiAgICAgICAgICAg\nICAgICAiICwgaW4gKGEubmlja05hbWVzKSBlIG9yZGVyIGJ5IGUiLAogICAg\nICAgICAgICAic2VsZWN0IGEgZnJvbSAiICsKICAgICAgICAgICAgICAgICIg\nRW50aXR5QV9Db2xsX1N0cmluZyBhICIgKwogICAgICAgICAgICAgICAgIiBX\nSEVSRSBhLm5pY2tOYW1lcyBJUyBFTVBUWSBvcmRlciBieSBhIiwKICAgICAg\nICAgICAgInNlbGVjdCBhIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVu\ndGl0eUFfQ29sbF9TdHJpbmcgYSAiICsKICAgICAgICAgICAgICAgICIgV0hF\nUkUgZXhpc3RzIChzZWxlY3QgbiBmcm9tIEVudGl0eUFfQ29sbF9TdHJpbmcg\nYSwgIiArCiAgICAgICAgICAgICAgICAiIGluIChhLm5pY2tOYW1lcykgbiB3\naGVyZSBuIGxpa2UgJyUxJykgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVy\nIGJ5IGEiLAogICAgICAgIH07CiAgICAgICAgTGlzdCBycyA9IG51bGw7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykg\newogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIHN3aXRjaCAoaSkgewogICAg\nICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAg\nICAgY2FzZSAyOgogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZShycy5zaXpl\nKCkgPiAwKTsKICAgICAgICAgICAgICAgIE9iamVjdCBvYmogPSBycy5nZXQo\nMCk7CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0YW5jZW9m\nIFN0cmluZyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nY2FzZSAzOgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBh\nc3NlcnRUcnVlKHJzLnNpemUoKSA9PSAwKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIH0KICAgICAgICBFbnRpdHlU\ncmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAg\nICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1\nZXJ5KCJzZWxlY3QgYSBmcm9tIEVudGl0eUFfQ29sbF9TdHJpbmcgYSIpOwog\nICAgICAgIExpc3Q8RW50aXR5QV9Db2xsX1N0cmluZz4gYXMgPSBxLmdldFJl\nc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFfQ29sbF9TdHJpbmcg\nYSA6IGFzKSB7CiAgICAgICAgICAgIGNoZWNrRW50aXR5QV9Db2xsX1N0cmlu\nZyhhKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAgKiBRdWVyeSBFbnRp\ndHlBX0VtYmVkX1RvT25lCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHF1ZXJ5\nRW50aXR5QV9FbWJlZF9Ub09uZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAvLyB0\nZXN0IHNlbGVjdCBlbWJlZCBvYmplY3QKICAgICAgICBTdHJpbmdbXSBxdWVy\neSA9IHsKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gIiArCiAg\nICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfVG9PbmUgYSAiLAogICAg\nICAgICAgICAic2VsZWN0IGEuZW1iZWQgZnJvbSAiICsKICAgICAgICAgICAg\nICAgICIgRW50aXR5QV9FbWJlZF9Ub09uZSBhICIsCiAgICAgICAgICAgICJz\nZWxlY3QgZSBmcm9tIEVudGl0eUFfRW1iZWRfVG9PbmUgYSAiICsKICAgICAg\nICAgICAgICAgICIgam9pbiBhLmVtYmVkIGUgam9pbiBlLmIgYiB3aGVyZSBl\nLmIuaWQgPiAwIG9yZGVyIGJ5IGEuaWQiLAogICAgICAgICAgICAic2VsZWN0\nIGUgZnJvbSBFbnRpdHlBX0VtYmVkX1RvT25lIGEgIiArCiAgICAgICAgICAg\nICAgICAiIGpvaW4gYS5lbWJlZCBlIGpvaW4gZS5iIGIgd2hlcmUgZS5iLmlk\nID4gMCBvcmRlciBieSBhLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVt\nYmVkIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRf\nVG9PbmUgYSBPUkRFUiBCWSBhLmVtYmVkIiwKICAgICAgICAgICAgInNlbGVj\ndCBhLmVtYmVkIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFf\nRW1iZWRfVG9PbmUgYSBXSEVSRSBhLmVtYmVkLmIgSVMgTk9UIE5VTEwgIiAr\nCiAgICAgICAgICAgICAgICAiIE9SREVSIEJZIGEuZW1iZWQiLAogICAgICAg\nICAgICAic2VsZWN0IGEuZW1iZWQgZnJvbSAiICsKICAgICAgICAgICAgICAg\nICIgRW50aXR5QV9FbWJlZF9Ub09uZSBhIFdIRVJFIGV4aXN0cyAiICsKICAg\nICAgICAgICAgICAgICIgKHNlbGVjdCBhIGZyb20gRW50aXR5QV9FbWJlZF9U\nb09uZSBhICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBhLmVtYmVkLmIg\nSVMgTk9UIE5VTEwpICIgKwogICAgICAgICAgICAgICAgIiBPUkRFUiBCWSBh\nLmVtYmVkIiwKICAgICAgICB9OwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgTGlzdDxPYmpl\nY3RbXT4gcnMgPSBudWxsOwogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1\nZXJ5KHF1ZXJ5W2ldKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGFz\nc2VydFRydWUocnMuc2l6ZSgpID4gMCk7CiAgICAgICAgICAgIE9iamVjdCBv\nYmogPSBycy5nZXQoMCk7CiAgICAgICAgICAgIGFzc2VydFRydWUob2JqIGlu\nc3RhbmNlb2YgRW1iZWRfVG9PbmUpOwogICAgICAgICAgICBhc3NlcnRUcnVl\nKCgoRW1iZWRfVG9PbmUpIG9iaikuZ2V0RW50aXR5QigpICE9IG51bGwpOwog\nICAgICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIH0KICAgICAgICBFbnRp\ndHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAg\nICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0\nZVF1ZXJ5KCJzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRfVG9PbmUgYSIp\nOwogICAgICAgIExpc3Q8RW50aXR5QV9FbWJlZF9Ub09uZT4gYXMgPSBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFfRW1iZWRfVG9P\nbmUgYSA6IGFzKSB7CiAgICAgICAgICAgIGNoZWNrRW50aXR5QV9FbWJlZF9U\nb09uZShhKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAgKiBRdWVyeSBF\nbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZSgpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICAvLyB0ZXN0IHNlbGVjdCBlbWJlZCBvYmplY3QKICAgICAg\nICBTdHJpbmdbXSBxdWVyeSA9IHsKICAgICAgICAgICAgInNlbGVjdCBhLmVt\nYmVkIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRf\nTWFwcGVkVG9PbmUgYSAiLAogICAgICAgICAgICAic2VsZWN0IGUgZnJvbSBF\nbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lIGEgIiArCiAgICAgICAgICAgICAg\nICAiIGpvaW4gYS5lbWJlZCBlIGpvaW4gZS5ibSBibSB3aGVyZSBlLmJtLmlk\nID4gMCBvcmRlciBieSBhLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVt\nYmVkIGFzIGUgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9F\nbWJlZF9NYXBwZWRUb09uZSBhIE9SREVSIEJZIGUiLAogICAgICAgICAgICAi\nc2VsZWN0IGEuZW1iZWQgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50\naXR5QV9FbWJlZF9NYXBwZWRUb09uZSBhIFdIRVJFIGEuZW1iZWQuYm0gSVMg\nTk9UIE5VTEwiLAogICAgICAgICAgICAic2VsZWN0IGEuZW1iZWQgZnJvbSAi\nICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9NYXBwZWRUb09u\nZSBhICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBleGlzdHMgIiArCiAg\nICAgICAgICAgICAgICAiIChzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRf\nTWFwcGVkVG9PbmUgYSAiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgYS5l\nbWJlZC5ibSBJUyBOT1QgTlVMTCkiLAogICAgICAgIH07CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICBMaXN0PE9iamVjdFtdPiBycyA9IG51bGw7CiAgICAgICAgICAgIHJz\nID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0pLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShycy5zaXplKCkgPiAwKTsKICAgICAg\nICAgICAgT2JqZWN0IG9iaiA9IHJzLmdldCgwKTsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZShvYmogaW5zdGFuY2VvZiBFbWJlZF9NYXBwZWRUb09uZSk7CiAg\nICAgICAgICAgIGFzc2VydFRydWUoKChFbWJlZF9NYXBwZWRUb09uZSkgb2Jq\nKS5nZXRNYXBwZWRFbnRpdHlCKCkgIT0gbnVsbCk7CiAgICAgICAgICAgIGVt\nLmNsZWFyKCk7CiAgICAgICAgfQogICAgICAgIFN0cmluZ1tdIHF1ZXJ5MiA9\nIHsKICAgICAgICAgICAgLy8gZW1iZWRkYWJsZSBpbiBjb25kaXRpb25hbCBl\neHByZXNzaW9uIHNob3VsZCBmYWlsCiAgICAgICAgICAgICJzZWxlY3QgYS5l\nbWJlZCBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVk\nX01hcHBlZFRvT25lIGEgIiArCiAgICAgICAgICAgICAgICAiIFdIRVJFIGV4\naXN0cyAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBlIGZyb20gRW50\naXR5QV9FbWJlZF9NYXBwZWRUb09uZSBhIiArCiAgICAgICAgICAgICAgICAi\nIGpvaW4gYS5lbWJlZCBlICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBl\nLmJtIElTIE5PVCBOVUxMKSIsCiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJl\nZCBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX01h\ncHBlZFRvT25lIGEgIiArCiAgICAgICAgICAgICAgICAiIFdIRVJFIGV4aXN0\ncyAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBhLmVtYmVkIGZyb20g\nRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZSBhICIgKwogICAgICAgICAgICAg\nICAgIiB3aGVyZSBhLmVtYmVkLmJtIElTIE5PVCBOVUxMKSIsCiAgICAgICAg\nfTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Mi5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICBMaXN0PE9iamVjdFtdPiBycyA9IG51bGw7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBycyA9IGVtLmNy\nZWF0ZVF1ZXJ5KHF1ZXJ5MltpXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nICAgICB9IGNhdGNoIChBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgICAgICAvLyBhcyBleHBlY3RlZAogICAgICAgICAgICB9CiAgICAgICAg\nfQoKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJh\nbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVl\ncnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgYSBmcm9tIEVudGl0eUFf\nRW1iZWRfTWFwcGVkVG9PbmUgYSIpOwogICAgICAgIExpc3Q8RW50aXR5QV9F\nbWJlZF9NYXBwZWRUb09uZT4gYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAg\nICAgICBmb3IgKEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUgYSA6IGFzKSB7\nCiAgICAgICAgICAgIGNoZWNrRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZShh\nKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBl\nbS5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAgKiBRdWVyeSBFbnRpdHlB\nX0NvbGxfRW1iZWRfVG9PbmUKICAgICAqLwogICAgcHVibGljIHZvaWQgcXVl\ncnlFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUoKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgLy8gdGVzdCBzZWxlY3QgZW1iZWQgb2JqZWN0IGZyb20gZWxlbWVudCBj\nb2xsZWN0aW9uCiAgICAgICAgU3RyaW5nW10gcXVlcnkgPSB7CiAgICAgICAg\nICAgICJzZWxlY3QgZSwgZS5iIGZyb20gIiArCiAgICAgICAgICAgICAgICAi\nIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBhICIgKwogICAgICAgICAgICAg\nICAgIiAsIGluIChhLmVtYmVkMXMpIGUgb3JkZXIgYnkgZS5uYW1lMSIsCiAg\nICAgICAgICAgICJzZWxlY3QgZSwgYS5pZCBmcm9tIEVudGl0eUFfQ29sbF9F\nbWJlZF9Ub09uZSBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVt\nYmVkMXMpIGUgd2hlcmUgZS5iLmlkID4gMCBvcmRlciBieSBhLmlkIiwKICAg\nICAgICAgICAgInNlbGVjdCBlLCBlLmIuaWQgIGZyb20gIiArCiAgICAgICAg\nICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBhICIgKwogICAg\nICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkMXMpIGUgd2hlcmUgZS5uYW1l\nMSBsaWtlICclMSciICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZS5u\nYW1lMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5iLmlkICBmcm9tICIg\nKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUg\nYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZDFzKSBlIHdo\nZXJlIGUubmFtZTEgbGlrZSAnJTEnIiArCiAgICAgICAgICAgICAgICAiIG9y\nZGVyIGJ5IGUiLAogICAgICAgICAgICAic2VsZWN0IGUsIGUuYi5pZCAgZnJv\nbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX1Rv\nT25lIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWQxcykg\nZSB3aGVyZSBlLm5hbWUxIGxpa2UgJyUxJyBhbmQiICsKICAgICAgICAgICAg\nICAgICIgYS5lbWJlZDFzIElTIE5PVCBFTVBUWSBhbmQgIiArCiAgICAgICAg\nICAgICAgICAiIGUuYiBJUyBOT1QgTlVMTCAiICsKICAgICAgICAgICAgICAg\nICIgb3JkZXIgYnkgZSIsCiAgICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcg\ncXVlcnkgd29ya3MgaW4gREIyIGJ1dCBub3QgaW4gRGVyYnk6CiAgICAgICAg\nICAgIC8vIGJlY2F1c2UgRGVyYnkgc3VicXVlcnkgaXMgb25seSBhbGxvd2Vk\nIHRvIAogICAgICAgICAgICAvLyByZXR1cm4gYSBzaW5nbGUgY29sdW1uLiAK\nICAgICAgICAgICAgLyoKICAgICAgICAgICAgInNlbGVjdCBlLCBlLmIuaWQg\nIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJl\nZF9Ub09uZSBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVk\nMXMpIGUgd2hlcmUgIiArCiAgICAgICAgICAgICAgICAiIGV4aXN0cyAoc2Vs\nZWN0IGEuZW1iZWQxcyBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRp\ndHlBX0NvbGxfRW1iZWRfVG9PbmUgYSkgYW5kICIgKwogICAgICAgICAgICAg\nICAgIiBleGlzdHMgKHNlbGVjdCBlLmIgZnJvbSBhLmVtYmVkMXMgZSkgIiAr\nCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUiLAogICAgICAgICAgICAq\nLwogICAgICAgIH07CiAgICAgICAgTGlzdDxPYmplY3RbXT4gcnMgPSBudWxs\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBp\nKyspIHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtp\nXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKHJz\nLnNpemUoKSA+IDApOwogICAgICAgICAgICBPYmplY3Qgb2JqID0gKChPYmpl\nY3RbXSkgcnMuZ2V0KDApKVswXTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShv\nYmogaW5zdGFuY2VvZiBFbWJlZF9Ub09uZSk7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoKChFbWJlZF9Ub09uZSkgb2JqKS5nZXRFbnRpdHlCKCkgIT0gbnVs\nbCk7CiAgICAgICAgICAgIHN3aXRjaCAoaSkgewogICAgICAgICAgICBjYXNl\nIDA6CiAgICAgICAgICAgICAgICBPYmplY3QgYiA9ICgoT2JqZWN0W10pIHJz\nLmdldCgwKSlbMV07CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKGIgaW5z\ndGFuY2VvZiBFbnRpdHlCMSk7CiAgICAgICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoKChFbnRpdHlCMSkgYikuZ2V0SWQoKSwKICAgICAgICAgICAgICAgICAg\nICAoKEVtYmVkX1RvT25lKSBvYmopLmdldEVudGl0eUIoKS5nZXRJZCgpKTsK\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGVtLmNsZWFyKCk7CiAgICAgICAgfQogICAgICAgIEVudGl0eVRyYW5z\nYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRy\nYW4uYmVnaW4oKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnko\nInNlbGVjdCBhIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lIGEiKTsK\nICAgICAgICBMaXN0PEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZT4gYXMgPSBx\nLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFfQ29sbF9F\nbWJlZF9Ub09uZSBhIDogYXMpIHsKICAgICAgICAgICAgY2hlY2tFbnRpdHlB\nX0NvbGxfRW1iZWRfVG9PbmUoYSk7CiAgICAgICAgfQogICAgICAgIHRyYW4u\nY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgog\nICAgICogUXVlcnkgRW50aXR5QV9FbWJlZF9Ub01hbnkKICAgICAqLwogICAg\ncHVibGljIHZvaWQgcXVlcnlFbnRpdHlBX0VtYmVkX1RvTWFueSgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICAvLyB0ZXN0IHNlbGVjdCBlbWJlZGRhYmxlCiAgICAg\nICAgU3RyaW5nIHF1ZXJ5W10gPSB7CiAgICAgICAgICAgICJzZWxlY3QgYS5l\nbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRfVG9NYW55IGEiLAogICAgICAgICAg\nICAic2VsZWN0IGUgZnJvbSBFbnRpdHlBX0VtYmVkX1RvTWFueSBhIGpvaW4g\nYS5lbWJlZCBlIiwKICAgICAgICAgICAgInNlbGVjdCBiIGZyb20gRW50aXR5\nQV9FbWJlZF9Ub01hbnkgYSBqb2luIGEuZW1iZWQuYnMiICsKICAgICAgICAg\nICAgICAgICIgYiIsCiAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tIEVudGl0\neUFfRW1iZWRfVG9NYW55IGEgam9pbiBhLmVtYmVkIGUgIiArCiAgICAgICAg\nICAgICAgICAiIHdoZXJlIGUubmFtZTEgbGlrZSAnJTEnIiwKICAgICAgICAg\nICAgInNlbGVjdCBhLmVtYmVkIGZyb20gRW50aXR5QV9FbWJlZF9Ub01hbnkg\nYSBPUkRFUiBCWSBhLmVtYmVkIiwKICAgICAgICAgICAgInNlbGVjdCBlIGZy\nb20gRW50aXR5QV9FbWJlZF9Ub01hbnkgYSBqb2luIGEuZW1iZWQgZSBPUkRF\nUiBCWSBlIiwKICAgICAgICAgICAgInNlbGVjdCBiIGZyb20gRW50aXR5QV9F\nbWJlZF9Ub01hbnkgYSBqb2luIGEuZW1iZWQuYnMiICsKICAgICAgICAgICAg\nICAgICIgYiBPUkRFUiBCWSBiIiwKICAgICAgICAgICAgInNlbGVjdCBlIGZy\nb20gRW50aXR5QV9FbWJlZF9Ub01hbnkgYSBqb2luIGEuZW1iZWQgZSAiICsK\nICAgICAgICAgICAgICAgICIgV0hFUkUgZS5icyBJUyBOT1QgRU1QVFkgT1JE\nRVIgQlkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgYSBmcm9tIEVudGl0eUFf\nRW1iZWRfVG9NYW55IGEgIiArCiAgICAgICAgICAgICAgICAiIFdIRVJFIGV4\naXN0cyAoc2VsZWN0IGEgZnJvbSBFbnRpdHlBX0VtYmVkX1RvTWFueSBhIiAr\nCiAgICAgICAgICAgICAgICAiIHdoZXJlIGEuZW1iZWQuYnMgSVMgTk9UIEVN\nUFRZKSBPUkRFUiBCWSBhIiwKICAgICAgICAgICAgInNlbGVjdCBhIGZyb20g\nRW50aXR5QV9FbWJlZF9Ub01hbnkgYSAiICsKICAgICAgICAgICAgICAgICIg\nV0hFUkUgZXhpc3RzIChzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRfVG9N\nYW55IGEiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgYS5lbWJlZC5icyBJ\nUyBOT1QgRU1QVFkpIE9SREVSIEJZIGEiLAogICAgICAgICAgICB9OwogICAg\nICAgIExpc3QgcnMgPSBudWxsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcnMgPSBlbS5j\ncmVhdGVRdWVyeShxdWVyeVtpXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nICAgICBhc3NlcnRUcnVlKHJzLnNpemUoKSA+IDApOwogICAgICAgICAgICBP\nYmplY3Qgb2JqID0gcnMuZ2V0KDApOwogICAgICAgICAgICBzd2l0Y2ggKGkp\nIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjYXNlIDE6CiAg\nICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAg\nICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKG9iaiBp\nbnN0YW5jZW9mIEVtYmVkX1RvTWFueSk7CiAgICAgICAgICAgICAgICBhc3Nl\ncnRUcnVlKCgoRW1iZWRfVG9NYW55KSBvYmopLmdldEVudGl0eUJzKCkuc2l6\nZSgpID4gMCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nY2FzZSAyOgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBh\nc3NlcnRUcnVlKG9iaiBpbnN0YW5jZW9mIEVudGl0eUIxKTsKICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAg\nIGNhc2UgOToKICAgICAgICAgICAgICAgIGFzc2VydFRydWUob2JqIGluc3Rh\nbmNlb2YgRW50aXR5QV9FbWJlZF9Ub01hbnkpOwogICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW0uY2xlYXIoKTsK\nICAgICAgICB9CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVt\nLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAg\nICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGEgZnJvbSBF\nbnRpdHlBX0VtYmVkX1RvTWFueSBhIik7CiAgICAgICAgTGlzdDxFbnRpdHlB\nX0VtYmVkX1RvTWFueT4gYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICBmb3IgKEVudGl0eUFfRW1iZWRfVG9NYW55IGEgOiBhcykgewogICAgICAg\nICAgICBjaGVja0VudGl0eUFfRW1iZWRfVG9NYW55KGEpOwogICAgICAgIH0K\nICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgLyoKICAgICAqIFF1ZXJ5IEVudGl0eUFfRW1iZWRfRW1iZWRf\nVG9NYW55CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9F\nbWJlZF9FbWJlZF9Ub01hbnkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgLy8gdGVz\ndCBzZWxlY3QgZW1iZWRkYWJsZQogICAgICAgIFN0cmluZyBxdWVyeVtdID0g\newogICAgICAgICAgICAic2VsZWN0IGEuZW1iZWQgZnJvbSBFbnRpdHlBX0Vt\nYmVkX0VtYmVkX1RvTWFueSBhIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVt\nYmVkIGZyb20gRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSIgKwogICAg\nICAgICAgICAgICAgIiB3aGVyZSBhLmVtYmVkLmVtYmVkLm5hbWUxIGxpa2Ug\nJyUxJyAiLAogICAgICAgICAgICAic2VsZWN0IGEuZW1iZWQuZW1iZWQgZnJv\nbSBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueSBhIiwKICAgICAgICAgICAg\nInNlbGVjdCBiIGZyb20gRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSBq\nb2luIGEuZW1iZWQuZW1iZWQuYnMiICsKICAgICAgICAgICAgICAgICIgYiIs\nCiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZC5lbWJlZCBmcm9tIEVudGl0\neUFfRW1iZWRfRW1iZWRfVG9NYW55IGEgIiArCiAgICAgICAgICAgICAgICAi\nIHdoZXJlIGEuZW1iZWQuZW1iZWQubmFtZTEgbGlrZSAnJTEnIiwKICAgICAg\nICAgICAgInNlbGVjdCBlMiBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9N\nYW55IGEgIiArCiAgICAgICAgICAgICAgICAiIGxlZnQgam9pbiBhLmVtYmVk\nIGUxIGxlZnQgam9pbiBlMS5lbWJlZCBlMiIsCiAgICAgICAgICAgICJzZWxl\nY3QgZTIgZnJvbSBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueSBhICIgKwog\nICAgICAgICAgICAgICAgIiBqb2luIGEuZW1iZWQgZTEgam9pbiBlMS5lbWJl\nZCBlMiIsCiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBhcyBlIGZyb20g\nRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSBPUkRFUiBCWSBlIiwKICAg\nICAgICAgICAgInNlbGVjdCBhLmVtYmVkLmVtYmVkIGFzIGUgZnJvbSBFbnRp\ndHlBX0VtYmVkX0VtYmVkX1RvTWFueSBhICIgKwogICAgICAgICAgICAgICAg\nIiB3aGVyZSBhLmVtYmVkLmVtYmVkLm5hbWUxIGxpa2UgJyUxJyBPUkRFUiBC\nWSBlIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gRW50aXR5\nQV9FbWJlZF9FbWJlZF9Ub01hbnkgYSAiICsKICAgICAgICAgICAgICAgICIg\nd2hlcmUgYS5lbWJlZC5lbWJlZC5icyBJUyBOT1QgRU1QVFkiLAogICAgICAg\nICAgICAic2VsZWN0IGEuZW1iZWQgZnJvbSBFbnRpdHlBX0VtYmVkX0VtYmVk\nX1RvTWFueSBhICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBleGlzdHMg\nKHNlbGVjdCBhLmVtYmVkLmVtYmVkLmJzIGZyb20gIiArCiAgICAgICAgICAg\nICAgICAiIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55IGEpIiwKICAgICAg\nICAgICAgInNlbGVjdCBiIGZyb20gRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01h\nbnkgYSBqb2luIGEuZW1iZWQuZW1iZWQuYnMiICsKICAgICAgICAgICAgICAg\nICIgYiIsCiAgICAgICAgfTsKICAgICAgICBMaXN0IHJzID0gbnVsbDsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0pLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShycy5zaXpl\nKCkgPiAwKTsKICAgICAgICAgICAgT2JqZWN0IG9iaiA9IHJzLmdldCgwKTsK\nICAgICAgICAgICAgc3dpdGNoIChpKSB7CiAgICAgICAgICAgIGNhc2UgMDoK\nICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlIDc6CiAgICAg\nICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAg\nICAgICAgIGFzc2VydFRydWUob2JqIGluc3RhbmNlb2YgRW1iZWRfRW1iZWRf\nVG9NYW55KTsKICAgICAgICAgICAgICAgIGFzc2VydFRydWUoKChFbWJlZF9F\nbWJlZF9Ub01hbnkpIG9iaikuZ2V0RW1iZWQoKS5nZXRFbnRpdHlCcygpLgog\nICAgICAgICAgICAgICAgICAgIHNpemUoKSA+IDApOwogICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2Fz\nZSA0OgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgNjoK\nICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1\nZShvYmogaW5zdGFuY2VvZiBFbWJlZF9Ub01hbnkpOwogICAgICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgoKEVtYmVkX1RvTWFueSkgb2JqKS5nZXRFbnRpdHlC\ncygpLnNpemUoKSA+IDApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAg\nICAgICAgIGFzc2VydFRydWUob2JqIGluc3RhbmNlb2YgRW50aXR5QjEpOwog\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gICAgICAgIAog\nICAgICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIH0KICAgICAgICBFbnRp\ndHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAg\nICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0\nZVF1ZXJ5KCJzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9N\nYW55IGEiKTsKICAgICAgICBMaXN0PEVudGl0eUFfRW1iZWRfRW1iZWRfVG9N\nYW55PiBhcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoRW50\naXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSA6IGFzKSB7CiAgICAgICAgICAg\nIGNoZWNrRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkoYSk7CiAgICAgICAg\nfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICAvKgogICAgICogUXVlcnkgRW50aXR5QV9FbWJlZF9Db2xs\nX0ludGVnZXIKICAgICAqLwogICAgcHVibGljIHZvaWQgcXVlcnlFbnRpdHlB\nX0VtYmVkX0NvbGxfSW50ZWdlcigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAvLyB0\nZXN0IHNlbGVjdCBlbWJlZCBvYmplY3QgZnJvbSBlbGVtZW50IGNvbGxlY3Rp\nb24gaW4gZW1iZWRkYWJsZSBvYmplY3QKICAgICAgICBTdHJpbmdbXSBxdWVy\neSA9IHsKICAgICAgICAgICAgInNlbGVjdCBlLCBhLmlkIGZyb20gIiArCiAg\nICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEg\nIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWQub3RoZXJJbnRW\nYWxzKSBlIG9yZGVyIGJ5IGUiLAogICAgICAgICAgICAic2VsZWN0IGUsIGEu\naWQgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9D\nb2xsX0ludGVnZXIgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5l\nbWJlZC5vdGhlckludFZhbHMpIGUgb3JkZXIgYnkgZSIsCiAgICAgICAgICAg\nICJzZWxlY3QgZSwgYS5pZCBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBF\nbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlciBhICIgKwogICAgICAgICAgICAg\nICAgIiAsIGluIChhLmVtYmVkLm90aGVySW50VmFscykgZSBvcmRlciBieSBh\nLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBhLmVtYmVkLmludFZhbDEg\nZnJvbSBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlciBhICIgKwogICAgICAg\nICAgICAgICAgIiAsIGluIChhLmVtYmVkLm90aGVySW50VmFscykgZSBvcmRl\nciBieSBhLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBhLmVtYmVkLmlu\ndFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJl\nZF9Db2xsX0ludGVnZXIgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAo\nYS5lbWJlZC5vdGhlckludFZhbHMpIGUgb3JkZXIgYnkgZSIsCiAgICAgICAg\nICAgICJzZWxlY3QgZSwgYS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAg\nICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEgIiAr\nCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWQub3RoZXJJbnRWYWxz\nKSBlICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBhLmVtYmVkLm90aGVy\nSW50VmFscyBJUyBOT1QgRU1QVFkgb3JkZXIgYnkgZSIsCiAgICAgICAgICAg\nICJzZWxlY3QgZSwgYS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAg\nICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEgIiArCiAg\nICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWQub3RoZXJJbnRWYWxzKSBl\nICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBleGlzdHMgKHNlbGVjdCBh\nIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29s\nbF9JbnRlZ2VyIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1i\nZWQub3RoZXJJbnRWYWxzKSBlICIgKwogICAgICAgICAgICAgICAgIiB3aGVy\nZSBlID4gMCkgb3JkZXIgYnkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgZSwg\nYTAuaW50VmFsMiBmcm9tIEVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyIGEg\nIiArCiAgICAgICAgICAgICAgICAiSk9JTiBhLmVtYmVkIGEwIEpPSU4gYTAu\nb3RoZXJJbnRWYWxzIGUgV0hFUkUgZXhpc3RzIChzZWxlY3QgYSBmcm9tICIg\nKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdl\nciBhIEpPSU4gYS5lbWJlZCBhMCBKT0lOIGEwLm90aGVySW50VmFscyBlICIg\nKwogICAgICAgICAgICAgICAgIiB3aGVyZSBlID4gMCkgb3JkZXIgYnkgZSIs\nCiAgICAgICAgfTsKICAgICAgICBMaXN0PE9iamVjdFtdPiBycyA9IG51bGw7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkr\nKykgewogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ld\nKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGFzc2VydFRydWUocnMu\nc2l6ZSgpID4gMCk7CiAgICAgICAgICAgIE9iamVjdCBvYmogPSAoKE9iamVj\ndFtdKSBycy5nZXQoMCkpWzBdOwogICAgICAgICAgICBhc3NlcnRUcnVlKG9i\naiBpbnN0YW5jZW9mIEludGVnZXIpOwogICAgICAgICAgICBlbS5jbGVhcigp\nOwogICAgICAgIH0KCiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9\nIGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwog\nICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGEgZnJv\nbSBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlciBhIik7CiAgICAgICAgTGlz\ndDxFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlcj4gYXMgPSBxLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFfRW1iZWRfQ29sbF9JbnRl\nZ2VyIGEgOiBhcykgewogICAgICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRf\nQ29sbF9JbnRlZ2VyKGEpOwogICAgICAgIH0KICAgICAgICB0cmFuLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyoKICAgICAq\nIFF1ZXJ5IEVudGl0eUFfRW1iZWRfRW1iZWQKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgcXVlcnlFbnRpdHlBX0VtYmVkX0VtYmVkKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIC8vIHRlc3Qgc2VsZWN0IGVtYmVkZGFibGUKICAgICAgICBTdHJp\nbmcgcXVlcnlbXSA9IHsKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZy\nb20gRW50aXR5QV9FbWJlZF9FbWJlZCBhIiwKICAgICAgICAgICAgInNlbGVj\ndCBhLmVtYmVkLmVtYmVkIGZyb20gRW50aXR5QV9FbWJlZF9FbWJlZCBhIiwK\nICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGFzIGUgZnJvbSBFbnRpdHlB\nX0VtYmVkX0VtYmVkIGEgT1JERVIgQlkgZSIsCiAgICAgICAgfTsKICAgICAg\nICBTdHJpbmcgcXVlcnkyW10gPSB7CiAgICAgICAgICAgICJzZWxlY3QgYS5l\nbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWQgYSBXSEVSRSBhLmVtYmVk\nLmVtYmVkICIgKwogICAgICAgICAgICAgICAgIiBJUyBOT1QgTlVMTCIsCiAg\nICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRf\nRW1iZWQgYSAiICsgIiBXSEVSRSBleGlzdHMgIiArCiAgICAgICAgICAgICAg\nICAiIChzZWxlY3QgYS5lbWJlZC5lbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRf\nRW1iZWQgYSIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBhLmVtYmVkIElT\nIE5PVCBOVUxMKSAiLAogICAgICAgIH07CiAgICAgICAgTGlzdCBycyA9IG51\nbGw7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5\nW2ldKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGFzc2VydFRydWUo\ncnMuc2l6ZSgpID4gMCk7CiAgICAgICAgICAgIHN3aXRjaCAoaSkgewogICAg\nICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAg\nICAgICAgIGFzc2VydFRydWUocnMuZ2V0KDApIGluc3RhbmNlb2YgRW1iZWRf\nRW1iZWQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNh\nc2UgMToKICAgICAgICAgICAgICAgIGFzc2VydFRydWUocnMuZ2V0KDApIGlu\nc3RhbmNlb2YgRW1iZWQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICB9CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyeTIubGVuZ3RoOyBpKysp\nIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJzID0gZW0u\nY3JlYXRlUXVlcnkocXVlcnkyW2ldKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgICAgIH0gY2F0Y2goQXJndW1lbnRFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICAgICAgLy8gYXMgZXhwZWN0ZWQ6IGNvbXBhcmlzb24gb3ZlciBlbWJl\nZGRlZCBvYmplY3QgaXMgbm90IGFsbG93ZWQKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0\nVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAg\nUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgYSBmcm9tIEVudGl0\neUFfRW1iZWRfRW1iZWQgYSIpOwogICAgICAgIExpc3Q8RW50aXR5QV9FbWJl\nZF9FbWJlZD4gYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3Ig\nKEVudGl0eUFfRW1iZWRfRW1iZWQgYSA6IGFzKSB7CiAgICAgICAgICAgIGNo\nZWNrRW50aXR5QV9FbWJlZF9FbWJlZChhKTsKICAgICAgICB9CiAgICAgICAg\ndHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIC8qCiAgICAgKiBRdWVyeSBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQKICAg\nICAqLwogICAgcHVibGljIHZvaWQgcXVlcnlFbnRpdHlBX0NvbGxfRW1iZWRf\nRW1iZWQoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgLy8gdGVzdCBzZWxlY3QgZW1i\nZWQgb2JqZWN0IGZyb20gZWxlbWVudCBjb2xsZWN0aW9uCiAgICAgICAgU3Ry\naW5nW10gcXVlcnkgPSB7CiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRW\nYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAg\nICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAg\nICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIG9yZGVyIGJ5IGUuaW50VmFsMyIs\nCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmlu\ndFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xs\nX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEu\nZW1iZWRzKSBlIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJz\nZWxlY3QgZSwgYS5pZCBmcm9tIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBh\nICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBvcmRl\nciBieSBhLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBhLmlkIGZyb20g\nRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAg\nICAiICwgaW4gKGEuZW1iZWRzKSBlIG9yZGVyIGJ5IGUgZGVzYyIsCiAgICAg\nICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIg\nZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRz\nKSBlIFdIRVJFIGEuZW1iZWRzIElTIE5PVCBFTVBUWSAiICsKICAgICAgICAg\nICAgICAgICIgb3JkZXIgYnkgZS5pbnRWYWwzIiwKICAgICAgICAgICAgLy8g\ndGhlIGZvbGxvd2luZyBxdWVyeSB3b3JrcyBpbiBEQjIgYnV0IG5vdCBpbiBE\nZXJieSwKICAgICAgICAgICAgLy8gYmVjYXVzZSBEZXJieSBzdWJxdWVyeSBp\ncyBvbmx5IGFsbG93ZWQgdG8gCiAgICAgICAgICAgIC8vIHJldHVybiBhIHNp\nbmdsZSBjb2x1bW4uIAogICAgICAgICAgICAvKgogICAgICAgICAgICAic2Vs\nZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAg\nICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIg\nKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBl\neGlzdHMgKHNlbGVjdCBhLmVtYmVkcyAiICsKICAgICAgICAgICAgICAgICIg\nZnJvbSBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQgYSkgIiArCiAgICAgICAg\nICAgICAgICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICov\nCiAgICAgICAgfTsKICAgICAgICBTdHJpbmdbXSBxdWVyeTIgPSB7CiAgICAg\nICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIg\nZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRz\nKSBlIFdIRVJFIGUuaW50VmFsMSA8IEFOWSAoc2VsZWN0IGUyLmludFZhbDIg\nIiArCiAgICAgICAgICAgICAgICAiIGZyb20gRW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkIGExLCBpbiAoYTEuZW1iZWRzKSBlMikgIiArCiAgICAgICAgICAg\nICAgICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxl\nY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAg\nICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiAr\nCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUu\naW50VmFsMSA8IEFMTCAoc2VsZWN0IGUyLmludFZhbDIgIiArCiAgICAgICAg\nICAgICAgICAiIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGExLCBp\nbiAoYTEuZW1iZWRzKSBlMikgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVy\nIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRW\nYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAg\nICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAg\nICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50VmFsMSA8PSBT\nT01FICIgKwogICAgICAgICAgICAgICAgIiAoc2VsZWN0IGUyLmludFZhbDIg\nIiArCiAgICAgICAgICAgICAgICAiIGZyb20gRW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkIGExLCBpbiAoYTEuZW1iZWRzKSBlMikgIiArCiAgICAgICAgICAg\nICAgICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxl\nY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAg\nICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiAr\nCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUu\naW50VmFsMSA+IEFMTCAoc2VsZWN0IGUyLmludFZhbDIgIiArCiAgICAgICAg\nICAgICAgICAiIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGExLCBp\nbiAoYTEuZW1iZWRzKSBlMikgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVy\nIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgIC8vIG5vbi1jb3JlbGF0ZWQg\nc3VicXVlcnk6CiAgICAgICAgICAgIC8vIEZpeGVkIGluIE9QRU5KUEEtMTE4\nNToga25vd24gcHJvYmxlbSBpbiB0YWJsZSBhbGlhcyByZXNvbHV0aW9uIGZv\nciBzdWJxdWVyeQogICAgICAgICAgICAvLyAgICAgICB0aGUgZ2VuYXJhdGVk\nIFNRTCBzdWJxdWVyeSBzaG91bGQgYmUgbm9uLWNvcmVsYXRlZCwKICAgICAg\nICAgICAgLy8gICAgICAgYnV0IGdlbmVyYXRlZCBjb3JlbGF0ZWQgc3VicXVl\ncnkuCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVk\nLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9D\nb2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4g\nKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50VmFsMSA8IEFOWSAoc2VsZWN0IGUu\naW50VmFsMiAiICsKICAgICAgICAgICAgICAgICIgZnJvbSBFbnRpdHlBX0Nv\nbGxfRW1iZWRfRW1iZWQgYSwgaW4gKGEuZW1iZWRzKSBlKSAiICsKICAgICAg\nICAgICAgICAgICIgb3JkZXIgYnkgZS5pbnRWYWwzIiwKICAgICAgICAgICAg\nInNlbGVjdCBlLCBlLmludFZhbDEsIGUuZW1iZWQuaW50VmFsMiBmcm9tICIg\nKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQg\nYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZHMpIGUgV0hF\nUkUgZS5pbnRWYWwxIDwgQUxMIChzZWxlY3QgZS5pbnRWYWwyICIgKwogICAg\nICAgICAgICAgICAgIiBmcm9tIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBh\nLCBpbiAoYS5lbWJlZHMpIGUpICIgKwogICAgICAgICAgICAgICAgIiBvcmRl\nciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAic2VsZWN0IGUsIGUuaW50\nVmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAg\nICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAg\nICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBlLmludFZhbDEgPD0g\nU09NRSAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBlLmludFZhbDIg\nIiArCiAgICAgICAgICAgICAgICAiIGZyb20gRW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkIGEsIGluIChhLmVtYmVkcykgZSkgIiArCiAgICAgICAgICAgICAg\nICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3Qg\nZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAg\nICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAg\nICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50\nVmFsMSA+IEFMTCAoc2VsZWN0IGUuaW50VmFsMiAiICsKICAgICAgICAgICAg\nICAgICIgZnJvbSBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQgYSwgaW4gKGEu\nZW1iZWRzKSBlKSAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZS5p\nbnRWYWwzIiwKICAgICAgICAgICAgLy8gY29yZWxhdGVkIHN1YnF1ZXJ5Ogog\nICAgICAgICAgICAvLyBGaXhlZCBpbiBPUEVOSlBBLTExODU6IGtub3duIHBy\nb2JsZW0gaW4gdGFibGUgYWxpYXMgcmVzb2x1dGlvbiBmb3Igc3VicXVlcnkK\nICAgICAgICAgICAgLy8gICAgICAgdGhlIGdlbmFyYXRlZCBTUUwgc3VicXVl\ncnkgc2hvdWxkIGJlIGNvcmVsYXRlZCwKICAgICAgICAgICAgLy8gICAgICAg\nYnV0IGdlbmVyYXRlZCBub24tY29yZWxhdGVkIHN1YnF1ZXJ5LgogICAgICAg\nICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZy\nb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9F\nbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykg\nZSBXSEVSRSBlLmludFZhbDEgPCBBTlkgKHNlbGVjdCBlMi5pbnRWYWwyICIg\nKwogICAgICAgICAgICAgICAgIiBmcm9tIGluKGEuZW1iZWRzKSBlMikgIiAr\nCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAg\nICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIg\nZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRz\nKSBlIFdIRVJFIGUuaW50VmFsMSA8IEFMTCAoc2VsZWN0IGUyLmludFZhbDIg\nIiArCiAgICAgICAgICAgICAgICAiIGZyb20gYS5lbWJlZHMgZTIpICIgKwog\nICAgICAgICAgICAgICAgIiBvcmRlciBieSBlLmludFZhbDMiLAogICAgICAg\nICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZy\nb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9F\nbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykg\nZSBXSEVSRSBlLmludFZhbDEgPD0gU09NRSAiICsKICAgICAgICAgICAgICAg\nICIgKHNlbGVjdCBlMi5pbnRWYWwyICIgKwogICAgICAgICAgICAgICAgIiBm\ncm9tIGluKGEuZW1iZWRzKSBlMikgIiArCiAgICAgICAgICAgICAgICAiIG9y\nZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5p\nbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAg\nICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAg\nICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdIRVJFIGUuaW50VmFsMSA+\nIEFMTCAoc2VsZWN0IGUyLmludFZhbDIgIiArCiAgICAgICAgICAgICAgICAi\nIGZyb20gYS5lbWJlZHMgZTIpICIgKwogICAgICAgICAgICAgICAgIiBvcmRl\nciBieSBlLmludFZhbDMiLAogICAgICAgIH07CiAgICAgICAgU3RyaW5nW10g\ncXVlcnkzID0gewogICAgICAgICAgICAvLyBxdWVyeSB3aXRoIHBhcmFtZXRl\nciBvZiBlbWJlZGRhYmxlIG9iamVjdAogICAgICAgICAgICAic2VsZWN0IGUs\nIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAg\nICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAg\nICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSA/MSBNRU1C\nRVIgT0YgYS5lbWJlZHMgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5\nIGUuaW50VmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwx\nLCBlLmVtYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIg\nRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAg\nICAiIGxlZnQgam9pbiBhLmVtYmVkcyBlIFdIRVJFID8xIE1FTUJFUiBPRiBh\nLmVtYmVkcyAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZS5pbnRW\nYWwzIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBlLmludFZhbDEsIGUuZW1i\nZWQuaW50VmFsMiBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlB\nX0NvbGxfRW1iZWRfRW1iZWQgYSAiICsKICAgICAgICAgICAgICAgICIgLCBp\nbiAoYS5lbWJlZHMpIGUgV0hFUkUgPzEgPSBlICIgKwogICAgICAgICAgICAg\nICAgIiBvcmRlciBieSBlLmludFZhbDMiLAogICAgICAgIH07CgogICAgICAg\nIExpc3QgcnMgPSBudWxsOwogICAgICAgIE9iamVjdCBvYmogPSBudWxsOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKysp\nIHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSku\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKHJzLnNp\nemUoKSA+IDApOwogICAgICAgICAgICBvYmogPSAoKE9iamVjdFtdKSBycy5n\nZXQoMCkpWzBdOwogICAgICAgICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0YW5j\nZW9mIEVtYmVkX0VtYmVkKTsKICAgICAgICB9CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBxdWVyeTIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\ncnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeTJbaV0pLmdldFJlc3VsdExpc3Qo\nKTsKICAgICAgICAgICAgaWYgKHJzLnNpemUoKSA+IDApIHsKICAgICAgICAg\nICAgICAgIG9iaiA9ICgoT2JqZWN0W10pIHJzLmdldCgwKSlbMF07CiAgICAg\nICAgICAgICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0YW5jZW9mIEVtYmVkX0Vt\nYmVkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IHF1ZXJ5My5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5\nM1tpXSkuc2V0UGFyYW1ldGVyKDEsIG9iaikuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgICAgICB9IGNhdGNoKEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgICAgIC8vIGFzIGV4cGVjdGVkOiBjb21wYXJpc29uIG92ZXIg\nZW1iZWRkZWQgb2JqZWN0IGlzIG5vdCBhbGxvd2VkCiAgICAgICAgICAgIH0K\nICAgICAgICB9CgogICAgICAgIGVtLmNsZWFyKCk7CgogICAgICAgIEVudGl0\neVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAg\nICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRl\nUXVlcnkoInNlbGVjdCBhIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVk\nIGEiKTsKICAgICAgICBMaXN0PEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZD4g\nYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFf\nQ29sbF9FbWJlZF9FbWJlZCBhIDogYXMpIHsKICAgICAgICAgICAgY2hlY2tF\nbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQoYSk7CiAgICAgICAgfQogICAgICAg\nIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAg\nICAvKgogICAgICogUXVlcnkgRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9Db2xs\nX0VtYmVkKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIC8vIHRlc3Qgc2VsZWN0IGVt\nYmVkIG9iamVjdCBmcm9tIGVsZW1lbnQgY29sbGVjdGlvbiBpbiBlbWJlZGRh\nYmxlIG9iamVjdAogICAgICAgIFN0cmluZ1tdIHF1ZXJ5ID0gewogICAgICAg\nICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5pbnRWYWwyIGZyb20gIiAr\nCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBh\nICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkLmVtYmVkcykg\nZSBvcmRlciBieSBlIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBlLmludFZh\nbDEgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9D\nb2xsX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1i\nZWQuZW1iZWRzKSBlIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAg\nICJzZWxlY3QgZSwgYS5pZCBmcm9tIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJl\nZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkLmVtYmVk\ncykgZSBvcmRlciBieSBhLmlkIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBl\nLmludFZhbDEsIGUuaW50VmFsMiBmcm9tICIgKwogICAgICAgICAgICAgICAg\nIiBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQgYSAiICsKICAgICAgICAgICAg\nICAgICIgLCBpbiAoYS5lbWJlZC5lbWJlZHMpIGUgb3JkZXIgYnkgZS5pbnRW\nYWwzIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBlLmludFZhbDEsIGUuaW50\nVmFsMiBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVk\nX0NvbGxfRW1iZWQgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5l\nbWJlZC5lbWJlZHMpIGUgd2hlcmUgYS5lbWJlZC5lbWJlZHMgSVMgTk9UIEVN\nUFRZIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUiLAogICAgICAg\nICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5pbnRWYWwyIGZyb20gIiAr\nCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBh\nICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkLmVtYmVkcykg\nZSB3aGVyZSBleGlzdHMgKHNlbGVjdCBlLmludFZhbDEgIiArCiAgICAgICAg\nICAgICAgICAiIGZyb20gRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkIGEsIGlu\nIChhLmVtYmVkLmVtYmVkcykgZSAiICsKICAgICAgICAgICAgICAgICIgd2hl\ncmUgZS5pbnRWYWwyID0gMTA1KSAiICsKICAgICAgICAgICAgICAgICIgb3Jk\nZXIgYnkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgYSBmcm9tICIgKwog\nICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQgYSAi\nICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZC5lbWJlZHMpIGUg\nIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlIGUuaW50VmFsMSA9IFNPTUUg\nIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgZTIuaW50VmFsMSBmcm9t\nICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfRW1i\nZWQgYTIgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEyLmVtYmVkLmVt\nYmVkcykgZTIpICIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBlIiwK\nICAgICAgICB9OwogICAgICAgIFN0cmluZ1tdIHF1ZXJ5MiA9IHsKICAgICAg\nICAgICAgInNlbGVjdCBlLCBhIGZyb20gIiArCiAgICAgICAgICAgICAgICAi\nIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBhICIgKwogICAgICAgICAgICAg\nICAgIiAsIGluIChhLmVtYmVkLmVtYmVkcykgZSAiICsKICAgICAgICAgICAg\nICAgICIgd2hlcmUgZSA9ID8xIG9yZGVyIGJ5IGUiLAogICAgICAgIH07CiAg\nICAgICAgTGlzdDxPYmplY3RbXT4gcnMgPSBudWxsOwogICAgICAgIEVudGl0\neUFfRW1iZWRfQ29sbF9FbWJlZCBlYSA9IG51bGw7CiAgICAgICAgT2JqZWN0\nIG9iaiA9IG51bGw7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVy\neS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1\nZXJ5KHF1ZXJ5W2ldKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGFz\nc2VydFRydWUocnMuc2l6ZSgpID4gMCk7CiAgICAgICAgICAgIG9iaiA9ICgo\nT2JqZWN0W10pIHJzLmdldCgwKSlbMF07CiAgICAgICAgICAgIGFzc2VydFRy\ndWUob2JqIGluc3RhbmNlb2YgRW1iZWQpOwogICAgICAgICAgICBpZiAoaSA9\nPSBxdWVyeS5sZW5ndGgtMSkKICAgICAgICAgICAgICAgIGVhID0gKEVudGl0\neUFfRW1iZWRfQ29sbF9FbWJlZCkgKChPYmplY3RbXSkgcnMuZ2V0KDApKVsx\nXTsKICAgICAgICB9CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVl\ncnkyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVlcnkyW2ldKS4KICAgICAgICAg\nICAgICAgIHNldFBhcmFtZXRlcigxLCAoRW1iZWQpIG9iaikuCiAgICAgICAg\nICAgICAgICBnZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIH0gY2F0Y2gg\nKEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIC8vIGV4\ncGVjdGVkIGV4Y2VwdGlvbjogY29tcGFyaXNvbiBvdmVyIGVtYmVkZGVkIG9i\namVjdCBpcyBub3QgYWxsb3dlZAogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnko\nInNlbGVjdCBhIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFf\nRW1iZWRfQ29sbF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiB3aGVy\nZSBhLmVtYmVkID0gPzEgb3JkZXIgYnkgZSIpLgogICAgICAgICAgICAgICAg\nc2V0UGFyYW1ldGVyKDEsIGVhLmdldEVtYmVkKCkpLgogICAgICAgICAgICAg\nICAgZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIH0gY2F0Y2ggKEFyZ3VtZW50\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gZXhwZWN0ZWQgZXhjZXB0\naW9uOiBjb21wYXJpc29uIG92ZXIgZW1iZWRkZWQgb2JqZWN0IGlzIG5vdCBh\nbGxvd2VkCiAgICAgICAgfQogICAgICAgIGVtLmNsZWFyKCk7CgogICAgICAg\nIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigp\nOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBRdWVyeSBxID0gZW0u\nY3JlYXRlUXVlcnkoInNlbGVjdCBhIGZyb20gRW50aXR5QV9FbWJlZF9Db2xs\nX0VtYmVkIGEiKTsKICAgICAgICBMaXN0PEVudGl0eUFfRW1iZWRfQ29sbF9F\nbWJlZD4gYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVu\ndGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBhIDogYXMpIHsKICAgICAgICAgICAg\nY2hlY2tFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQoYSk7CiAgICAgICAgfQog\nICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgY3JlYXRlT2JqTWFwS2V5KCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5n\nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nbnVtRGVwYXJ0bWVudHM7IGkrKykKICAgICAgICAgICAgY3JlYXRlRGVwYXJ0\nbWVudDEoZW0sIGRlcHRJZCsrKTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IG51bURlcGFydG1lbnRzOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZURl\ncGFydG1lbnQyKGVtLCBkZXB0SWQrKyk7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBudW1EZXBhcnRtZW50czsgaSsrKQogICAgICAgICAgICBjcmVh\ndGVEZXBhcnRtZW50MyhlbSwgZGVwdElkKyspOwogICAgICAgIHRyYW4uYmVn\naW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBjcmVhdGVPYmpNYXBLZXlFbnVtZXJhdGVkKCkgewogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlv\nbigpOwogICAgICAgIEl0ZW00IGl0ZW0gPSBuZXcgSXRlbTQoKTsKICAgICAg\nICBpdGVtLnNldElkKDEpOwogICAgICAgIEZpbGVOYW1lNCBmaWxlTmFtZTEg\nPSBuZXcgRmlsZU5hbWU0KCJmaWxlIiArIDEsICJmaWxlIiArIDEpOwogICAg\nICAgIGl0ZW0uYWRkSW1hZ2UoSXRlbTQuQ2F0YWdvcnkuQTEsIGZpbGVOYW1l\nMSk7CgogICAgICAgIEZpbGVOYW1lNCBmaWxlTmFtZTIgPSBuZXcgRmlsZU5h\nbWU0KCJmaWxlIiArIDIsICJmaWxlIiArIDIpOwogICAgICAgIGl0ZW0uYWRk\nSW1hZ2UoSXRlbTQuQ2F0YWdvcnkuQTIsIGZpbGVOYW1lMik7CgogICAgICAg\nIEZpbGVOYW1lNCBmaWxlTmFtZTMgPSBuZXcgRmlsZU5hbWU0KCJmaWxlIiAr\nIDMsICJmaWxlIiArIDMpOwogICAgICAgIGl0ZW0uYWRkSW1hZ2UoSXRlbTQu\nQ2F0YWdvcnkuQTMsIGZpbGVOYW1lMyk7CgogICAgICAgIGVtLnBlcnNpc3Qo\naXRlbSk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNo\nKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVPYmpNYXBLZXlU\nZW1wb3JhbCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlv\nbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBJdGVtNSBp\ndGVtID0gbmV3IEl0ZW01KCk7CiAgICAgICAgaXRlbS5zZXRJZCgxKTsKICAg\nICAgICBsb25nIHRzID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CiAg\nICAgICAgVGltZXN0YW1wIHRzMSA9IG5ldyBUaW1lc3RhbXAodHMpOwogICAg\nICAgIFRpbWVzdGFtcCB0czIgPSBuZXcgVGltZXN0YW1wKHRzKzEwMDAwMDAp\nOwogICAgICAgIFRpbWVzdGFtcCB0czMgPSBuZXcgVGltZXN0YW1wKHRzKzIw\nMDAwMDApOwogICAgICAgIAogICAgICAgIEZpbGVOYW1lNCBmaWxlTmFtZTEg\nPSBuZXcgRmlsZU5hbWU0KCJmaWxlIiArIDEsICJmaWxlIiArIDEpOwogICAg\nICAgIGl0ZW0uYWRkSW1hZ2UodHMxLCBmaWxlTmFtZTEpOwoKICAgICAgICBG\naWxlTmFtZTQgZmlsZU5hbWUyID0gbmV3IEZpbGVOYW1lNCgiZmlsZSIgKyAy\nLCAiZmlsZSIgKyAyKTsKICAgICAgICBpdGVtLmFkZEltYWdlKHRzMiwgZmls\nZU5hbWUyKTsKCiAgICAgICAgRmlsZU5hbWU0IGZpbGVOYW1lMyA9IG5ldyBG\naWxlTmFtZTQoImZpbGUiICsgMywgImZpbGUiICsgMyk7CiAgICAgICAgaXRl\nbS5hZGRJbWFnZSh0czMsIGZpbGVOYW1lMyk7CgogICAgICAgIGVtLnBlcnNp\nc3QoaXRlbSk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZs\ndXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZU9iak1hcEtleUNs\nYXNzKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRy\nYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgbnVtSXRlbXM7IGkrKykKICAgICAgICAgICAgY3JlYXRlSXRl\nbTEoZW0sIGl0ZW1JZCsrKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIG51bUl0ZW1zOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZUl0ZW0yKGVtLCBp\ndGVtSWQrKyk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1JdGVt\nczsgaSsrKQogICAgICAgICAgICBjcmVhdGVJdGVtMyhlbSwgaXRlbUlkKysp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtQ29tcGFueTsgaSsr\nKQogICAgICAgICAgICBjcmVhdGVDb21wYW55MShlbSwgY29tcElkKyspOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtQ29tcGFueTsgaSsrKQog\nICAgICAgICAgICBjcmVhdGVDb21wYW55MihlbSwgY29tcElkKyspOwogICAg\nICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAg\nIHRyYW4uY29tbWl0KCk7CiAgICAgICAgYm9vbGVhbiBmb3VuZCA9IGZhbHNl\nOwogICAgICAgIGZvciAoU3RyaW5nIHNxbFN0ciA6IHNxbCkgewogICAgICAg\nICAgICBpZiAoc3FsU3RyLnRvVXBwZXJDYXNlKCkuaW5kZXhPZigiSVRFTTJf\nWFhYIikgIT0gLTEpIHsKICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsK\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9IAogICAgICAg\nICAgICBpZiAoc3FsU3RyLnRvVXBwZXJDYXNlKCkuaW5kZXhPZigiSVRFTTJf\nSU1BR0VTIikgIT0gLTEpIHsKICAgICAgICAgICAgICAgIGZvdW5kID0gZmFs\nc2U7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGZhaWwo\nIlRhYmxlIG5hbWUgSVRFTTJfSU1HIHNwZWNpZmllZCBpbiB0aGUgTWFwS2V5\nQ29sdW1uIGFubm90YXRpb24gaXMgbm90IGhvbm9yZWQiKTsKICAgICAgICB9\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBj\ncmVhdGVJdGVtMShFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAg\nICBJdGVtMSBpdGVtID0gbmV3IEl0ZW0xKCk7CiAgICAgICAgaXRlbS5zZXRJ\nZChpZCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1JbWFnZXNQ\nZXJJdGVtOyBpKyspIHsKICAgICAgICAgICAgaXRlbS5hZGRJbWFnZSgiaW1h\nZ2UiICsgaWQgKyBpLCAiZmlsZSIgKyBpZCArIGkpOwogICAgICAgIH0KICAg\nICAgICBlbS5wZXJzaXN0KGl0ZW0pOwogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCBjcmVhdGVJdGVtMihFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsK\nICAgICAgICBJdGVtMiBpdGVtID0gbmV3IEl0ZW0yKCk7CiAgICAgICAgaXRl\nbS5zZXRJZChpZCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1J\nbWFnZXNQZXJJdGVtOyBpKyspIHsKICAgICAgICAgICAgaXRlbS5hZGRJbWFn\nZSgiaW1hZ2UiICsgaWQgKyBpLCAiZmlsZSIgKyBpZCArIGkpOwogICAgICAg\nIH0KICAgICAgICBlbS5wZXJzaXN0KGl0ZW0pOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGNyZWF0ZUl0ZW0zKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkg\newogICAgICAgIEl0ZW0zIGl0ZW0gPSBuZXcgSXRlbTMoKTsKICAgICAgICBp\ndGVtLnNldElkKGlkKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51\nbUltYWdlc1Blckl0ZW07IGkrKykgewogICAgICAgICAgICBpdGVtLmFkZElt\nYWdlKCJpbWFnZSIgKyBpZCArIGksICJmaWxlIiArIGlkICsgaSk7CiAgICAg\nICAgfQogICAgICAgIGVtLnBlcnNpc3QoaXRlbSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgY3JlYXRlQ29tcGFueTEoRW50aXR5TWFuYWdlciBlbSwgaW50\nIGlkKSB7CiAgICAgICAgQ29tcGFueTEgYyA9IG5ldyBDb21wYW55MSgpOwog\nICAgICAgIGMuc2V0SWQoaWQpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgbnVtRGl2aXNpb25zUGVyQ287IGkrKykgewogICAgICAgICAgICBEaXZp\nc2lvbiBkID0gY3JlYXRlRGl2aXNpb24oZW0sIGRpdklkKyspOwogICAgICAg\nICAgICBWaWNlUHJlc2lkZW50IHZwID0gY3JlYXRlVmljZVByZXNpZGVudChl\nbSwgdnBJZCsrKTsKICAgICAgICAgICAgYy5hZGRUb09yZ2FuaXphdGlvbihk\nLCB2cCk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoZCk7CiAgICAgICAgICAg\nIGVtLnBlcnNpc3QodnApOwogICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0\nKGMpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVDb21wYW55\nMihFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBDb21wYW55\nMiBjID0gbmV3IENvbXBhbnkyKCk7CiAgICAgICAgYy5zZXRJZChpZCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1EaXZpc2lvbnNQZXJDbzsg\naSsrKSB7CiAgICAgICAgICAgIERpdmlzaW9uIGQgPSBjcmVhdGVEaXZpc2lv\nbihlbSwgZGl2SWQrKyk7CiAgICAgICAgICAgIFZpY2VQcmVzaWRlbnQgdnAg\nPSBjcmVhdGVWaWNlUHJlc2lkZW50KGVtLCB2cElkKyspOwogICAgICAgICAg\nICBjLmFkZFRvT3JnYW5pemF0aW9uKGQsIHZwKTsKICAgICAgICAgICAgZW0u\ncGVyc2lzdChkKTsKICAgICAgICAgICAgZW0ucGVyc2lzdCh2cCk7CiAgICAg\nICAgfQogICAgICAgIGVtLnBlcnNpc3QoYyk7CiAgICB9CgogICAgcHVibGlj\nIERpdmlzaW9uIGNyZWF0ZURpdmlzaW9uKEVudGl0eU1hbmFnZXIgZW0sIGlu\ndCBpZCkgewogICAgICAgIERpdmlzaW9uIGQgPSBuZXcgRGl2aXNpb24oKTsK\nICAgICAgICBkLnNldElkKGlkKTsKICAgICAgICBkLnNldE5hbWUoImQiICsg\naWQpOwogICAgICAgIHJldHVybiBkOwogICAgfQogICAgCiAgICBwdWJsaWMg\nVmljZVByZXNpZGVudCBjcmVhdGVWaWNlUHJlc2lkZW50KEVudGl0eU1hbmFn\nZXIgZW0sIGludCBpZCkgewogICAgICAgIFZpY2VQcmVzaWRlbnQgdnAgPSBu\nZXcgVmljZVByZXNpZGVudCgpOwogICAgICAgIHZwLnNldElkKGlkKTsKICAg\nICAgICB2cC5zZXROYW1lKCJ2cCIgKyBpZCk7CiAgICAgICAgcmV0dXJuIHZw\nOwogICAgfSAgICAKCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVEZXBhcnRtZW50\nMShFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBEZXBhcnRt\nZW50MSBkID0gbmV3IERlcGFydG1lbnQxKCk7CiAgICAgICAgZC5zZXREZXB0\nSWQoaWQpOwogICAgICAgIE1hcCBlbXBzID0gbmV3IEhhc2hNYXAoKTsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUVtcGxveWVlc1BlckRlcHQ7\nIGkrKykgewogICAgICAgICAgICBFbXBsb3llZTEgZSA9IGNyZWF0ZUVtcGxv\neWVlMShlbSwgZW1wSWQrKyk7CiAgICAgICAgICAgIC8vZC5hZGRFbXBsb3ll\nZTEoZSk7CiAgICAgICAgICAgIGVtcHMucHV0KGUuZ2V0RW1wSWQoKSwgZSk7\nCiAgICAgICAgICAgIGUuc2V0RGVwYXJ0bWVudChkKTsKICAgICAgICAgICAg\nZW0ucGVyc2lzdChlKTsKICAgICAgICB9CiAgICAgICAgZC5zZXRFbXBNYXAo\nZW1wcyk7CiAgICAgICAgZW0ucGVyc2lzdChkKTsKICAgIH0KICAgIAogICAg\ncHVibGljIEVtcGxveWVlMSBjcmVhdGVFbXBsb3llZTEoRW50aXR5TWFuYWdl\nciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW1wbG95ZWUxIGUgPSBuZXcgRW1w\nbG95ZWUxKCk7CiAgICAgICAgZS5zZXRFbXBJZChpZCk7CiAgICAgICAgcmV0\ndXJuIGU7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZURlcGFy\ndG1lbnQyKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIERl\ncGFydG1lbnQyIGQgPSBuZXcgRGVwYXJ0bWVudDIoKTsKICAgICAgICBkLnNl\ndERlcHRJZChpZCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1F\nbXBsb3llZXNQZXJEZXB0OyBpKyspIHsKICAgICAgICAgICAgRW1wbG95ZWUy\nIGUgPSBjcmVhdGVFbXBsb3llZTIoZW0sIGVtcElkKyspOwogICAgICAgICAg\nICBkLmFkZEVtcGxveWVlKGUpOwogICAgICAgICAgICBlLnNldERlcGFydG1l\nbnQoZCk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoZSk7CiAgICAgICAgfQog\nICAgICAgIGVtLnBlcnNpc3QoZCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBF\nbXBsb3llZTIgY3JlYXRlRW1wbG95ZWUyKEVudGl0eU1hbmFnZXIgZW0sIGlu\ndCBpZCkgewogICAgICAgIEVtcGxveWVlMiBlID0gbmV3IEVtcGxveWVlMigi\nZSIgKyBpZCwgbmV3IERhdGUoKSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZURlcGFydG1lbnQzKEVudGl0\neU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIERlcGFydG1lbnQzIGQg\nPSBuZXcgRGVwYXJ0bWVudDMoKTsKICAgICAgICBkLnNldERlcHRJZChpZCk7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbXBsb3llZXNQZXJE\nZXB0OyBpKyspIHsKICAgICAgICAgICAgRW1wbG95ZWUzIGUgPSBjcmVhdGVF\nbXBsb3llZTMoZW0sIGVtcElkKyspOwogICAgICAgICAgICBkLmFkZEVtcGxv\neWVlKGUpOwogICAgICAgICAgICBlLnNldERlcGFydG1lbnQoZCk7CiAgICAg\nICAgICAgIGVtLnBlcnNpc3QoZSk7CiAgICAgICAgfQogICAgICAgIGVtLnBl\ncnNpc3QoZCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBFbXBsb3llZTMgY3Jl\nYXRlRW1wbG95ZWUzKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAg\nICAgIEVtcGxveWVlMyBlID0gbmV3IEVtcGxveWVlMygpOwogICAgICAgIEVt\ncGxveWVlTmFtZTMgbmFtZSA9IG5ldyBFbXBsb3llZU5hbWUzKCJmIiArIGlk\nLCAibCIgKyBpZCk7CiAgICAgICAgZS5zZXRFbXBJZChpZCk7CiAgICAgICAg\nZS5zZXROYW1lKG5hbWUpOwogICAgICAgIHJldHVybiBlOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGZpbmRPYmpNYXBLZXkoKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgRGVwYXJ0bWVudDEgZDEgPSBlbS5maW5kKERlcGFydG1lbnQxLmNsYXNz\nLCAxKTsKICAgICAgICBhc3NlcnREZXBhcnRtZW50MShkMSk7CiAgICAgICAg\nCiAgICAgICAgRW1wbG95ZWUxIGUxID0gZW0uZmluZChFbXBsb3llZTEuY2xh\nc3MsIDEpOwogICAgICAgIGFzc2VydEVtcGxveWVlMShlMSk7CiAgICAgICAg\nCiAgICAgICAgRGVwYXJ0bWVudDIgZDIgPSBlbS5maW5kKERlcGFydG1lbnQy\nLmNsYXNzLCAzKTsKICAgICAgICBhc3NlcnREZXBhcnRtZW50MihkMik7CiAg\nICAgICAgCiAgICAgICAgTWFwIGVtcHMgPSBkMi5nZXRFbXBNYXAoKTsKICAg\nICAgICBTZXQ8RW1wbG95ZWVQSzI+IGtleXMgPSBlbXBzLmtleVNldCgpOwog\nICAgICAgIGZvciAoRW1wbG95ZWVQSzIga2V5IDoga2V5cykgewogICAgICAg\nICAgICBFbXBsb3llZTIgZTIgPSBlbS5maW5kKEVtcGxveWVlMi5jbGFzcywg\na2V5KTsKICAgICAgICAgICAgYXNzZXJ0RW1wbG95ZWUyKGUyKTsKICAgICAg\nICB9CiAgICAgICAgCiAgICAgICAgRGVwYXJ0bWVudDMgZDMgPSBlbS5maW5k\nKERlcGFydG1lbnQzLmNsYXNzLCA1KTsKICAgICAgICBhc3NlcnREZXBhcnRt\nZW50MyhkMyk7CiAgICAgICAgCiAgICAgICAgRW1wbG95ZWUzIGUzID0gZW0u\nZmluZChFbXBsb3llZTMuY2xhc3MsIDkpOwogICAgICAgIGFzc2VydEVtcGxv\neWVlMyhlMyk7CiAgICAgICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgYXNzZXJ0RGVwYXJ0bWVudDEoRGVwYXJ0\nbWVudDEgZCkgewogICAgICAgIGludCBpZCA9IGQuZ2V0RGVwdElkKCk7CiAg\nICAgICAgTWFwPEludGVnZXIsIEVtcGxveWVlMT4gZXMgPSBkLmdldEVtcE1h\ncCgpOwogICAgICAgIGFzc2VydEVxdWFscygyLGVzLnNpemUoKSk7CiAgICAg\nICAgU2V0IGtleXMgPSBlcy5rZXlTZXQoKTsKICAgICAgICBmb3IgKE9iamVj\ndCBvYmogOiBrZXlzKSB7CiAgICAgICAgICAgIEludGVnZXIgZW1wSWQgPSAo\nSW50ZWdlcikgb2JqOwogICAgICAgICAgICBFbXBsb3llZTEgZSA9IGVzLmdl\ndChlbXBJZCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhlbXBJZC5pbnRW\nYWx1ZSgpLCBlLmdldEVtcElkKCkpOwogICAgICAgIH0KICAgIH0KICAgIAog\nICAgcHVibGljIHZvaWQgYXNzZXJ0RGVwYXJ0bWVudDIoRGVwYXJ0bWVudDIg\nZCkgewogICAgICAgIGludCBpZCA9IGQuZ2V0RGVwdElkKCk7CiAgICAgICAg\nTWFwPEVtcGxveWVlUEsyLCBFbXBsb3llZTI+IGVzID0gZC5nZXRFbXBNYXAo\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMixlcy5zaXplKCkpOwogICAgICAg\nIFNldDxFbXBsb3llZVBLMj4ga2V5cyA9IGVzLmtleVNldCgpOwogICAgICAg\nIGZvciAoRW1wbG95ZWVQSzIgcGsgOiBrZXlzKSB7CiAgICAgICAgICAgIEVt\ncGxveWVlMiBlID0gZXMuZ2V0KHBrKTsKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKHBrLCBlLmdldEVtcFBLKCkpOwogICAgICAgIH0KICAgIH0gICAKCiAg\nICBwdWJsaWMgdm9pZCBhc3NlcnREZXBhcnRtZW50MyhEZXBhcnRtZW50MyBk\nKSB7CiAgICAgICAgaW50IGlkID0gZC5nZXREZXB0SWQoKTsKICAgICAgICBN\nYXA8RW1wbG95ZWVOYW1lMywgRW1wbG95ZWUzPiBlcyA9IGQuZ2V0RW1wbG95\nZWVzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsZXMuc2l6ZSgpKTsKICAg\nICAgICBTZXQ8RW1wbG95ZWVOYW1lMz4ga2V5cyA9IGVzLmtleVNldCgpOwog\nICAgICAgIGZvciAoRW1wbG95ZWVOYW1lMyBrZXkgOiBrZXlzKSB7CiAgICAg\nICAgICAgIEVtcGxveWVlMyBlID0gZXMuZ2V0KGtleSk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscyhrZXksIGUuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGFzc2VydEVtcGxveWVlMShFbXBs\nb3llZTEgZSkgewogICAgICAgIGludCBpZCA9IGUuZ2V0RW1wSWQoKTsKICAg\nICAgICBEZXBhcnRtZW50MSBkID0gZS5nZXREZXBhcnRtZW50KCk7CiAgICAg\nICAgYXNzZXJ0RGVwYXJ0bWVudDEoZCk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIGFzc2VydEVtcGxveWVlMihFbXBsb3llZTIgZSkgewogICAgICAg\nIEVtcGxveWVlUEsyIHBrID0gZS5nZXRFbXBQSygpOwogICAgICAgIERlcGFy\ndG1lbnQyIGQgPSBlLmdldERlcGFydG1lbnQoKTsKICAgICAgICBhc3NlcnRE\nZXBhcnRtZW50MihkKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgYXNz\nZXJ0RW1wbG95ZWUzKEVtcGxveWVlMyBlKSB7CiAgICAgICAgaW50IGlkID0g\nZS5nZXRFbXBJZCgpOwogICAgICAgIERlcGFydG1lbnQzIGQgPSBlLmdldERl\ncGFydG1lbnQoKTsKICAgICAgICBhc3NlcnREZXBhcnRtZW50MyhkKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeU9iak1hcEtleSgpIHsKICAgICAg\nICBxdWVyeURlcGFydG1lbnQoZW1mKTsKICAgICAgICBxdWVyeUVtcGxveWVl\nKGVtZik7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RGVwYXJ0\nbWVudChFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rp\nb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcTEg\nPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEZXBhcnRtZW50MSBk\nIik7CiAgICAgICAgTGlzdDxEZXBhcnRtZW50MT4gZHMxID0gcTEuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIGZvciAoRGVwYXJ0bWVudDEgZCA6IGRzMSl7\nCiAgICAgICAgICAgIGFzc2VydERlcGFydG1lbnQxKGQpOwogICAgICAgIH0K\nICAgICAgICAKICAgICAgICBRdWVyeSBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KCJz\nZWxlY3QgZCBmcm9tIERlcGFydG1lbnQyIGQiKTsKICAgICAgICBMaXN0PERl\ncGFydG1lbnQyPiBkczIgPSBxMi5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nZm9yIChEZXBhcnRtZW50MiBkIDogZHMyKXsKICAgICAgICAgICAgYXNzZXJ0\nRGVwYXJ0bWVudDIoZCk7CiAgICAgICAgfQoKICAgICAgICBRdWVyeSBxMyA9\nIGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERlcGFydG1lbnQzIGQi\nKTsKICAgICAgICBMaXN0PERlcGFydG1lbnQzPiBkczMgPSBxMy5nZXRSZXN1\nbHRMaXN0KCk7CiAgICAgICAgZm9yIChEZXBhcnRtZW50MyBkIDogZHMzKXsK\nICAgICAgICAgICAgYXNzZXJ0RGVwYXJ0bWVudDMoZCk7CiAgICAgICAgfQog\nICAgICAgIAogICAgICAgIHRyYW4uY29tbWl0KCk7CgogICAgICAgIFN0cmlu\nZyBxdWVyeVtdID0gewogICAgICAgICAgICAic2VsZWN0IGQgZnJvbSBEZXBh\ncnRtZW50MSBkIGpvaW4gZC5lbXBNYXAgZSAiICsKICAgICAgICAgICAgICAg\nICIgd2hlcmUgS0VZKGUpID4gMSBvcmRlciBieSBkIiwKICAgICAgICAgICAg\nInNlbGVjdCBkIGZyb20gRGVwYXJ0bWVudDEgZCBqb2luIGQuZW1wTWFwIGUi\nICsKICAgICAgICAgICAgICAgICIgd2hlcmUgZC5kZXB0SWQgPSBLRVkoZSkg\nb3JkZXIgYnkgZCIsCiAgICAgICAgICAgICJzZWxlY3QgZCBmcm9tIERlcGFy\ndG1lbnQxIGQgIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlIGQuZGVwdElk\nIDwgQU5ZICIgKwogICAgICAgICAgICAgICAgIiAoc2VsZWN0IEtFWShlKSBm\ncm9tIGluKGQuZW1wTWFwKSBlKSAiICsKICAgICAgICAgICAgICAgICIgb3Jk\nZXIgYnkgZCIsCiAgICAgICAgICAgICJzZWxlY3QgZCBmcm9tIERlcGFydG1l\nbnQxIGQgIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlIGQuZGVwdElkIDwg\nU09NRSAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBLRVkoZSkgZnJv\nbSBEZXBhcnRtZW50MSBkMSwgaW4oZDEuZW1wTWFwKSBlKSAiICsKICAgICAg\nICAgICAgICAgICIgb3JkZXIgYnkgZCIsCiAgICAgICAgfTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIGRzMSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5nZXRSZXN1\nbHRMaXN0KCk7CiAgICAgICAgICAgIGFzc2VydERlcGFydG1lbnQxKGRzMS5n\nZXQoMCkpOwogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW1wbG95ZWUoRW50aXR5TWFuYWdlckZh\nY3RvcnkgZW1mKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rp\nb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5i\nZWdpbigpOwogICAgICAgIFF1ZXJ5IHExID0gZW0uY3JlYXRlUXVlcnkoInNl\nbGVjdCBlIGZyb20gRW1wbG95ZWUxIGUiKTsKICAgICAgICBMaXN0PEVtcGxv\neWVlMT4gZXMxID0gcTEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAo\nRW1wbG95ZWUxIGUgOiBlczEpewogICAgICAgICAgICBhc3NlcnRFbXBsb3ll\nZTEoZSk7CiAgICAgICAgfQoKICAgICAgICBRdWVyeSBxMiA9IGVtLmNyZWF0\nZVF1ZXJ5KCJzZWxlY3QgZSBmcm9tIEVtcGxveWVlMiBlIik7CiAgICAgICAg\nTGlzdDxFbXBsb3llZTI+IGVzMiA9IHEyLmdldFJlc3VsdExpc3QoKTsKICAg\nICAgICBmb3IgKEVtcGxveWVlMiBlIDogZXMyKXsKICAgICAgICAgICAgYXNz\nZXJ0RW1wbG95ZWUyKGUpOwogICAgICAgIH0KCiAgICAgICAgUXVlcnkgcTMg\nPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGUgZnJvbSBFbXBsb3llZTMgZSIp\nOwogICAgICAgIExpc3Q8RW1wbG95ZWUzPiBlczMgPSBxMy5nZXRSZXN1bHRM\naXN0KCk7CiAgICAgICAgZm9yIChFbXBsb3llZTMgZSA6IGVzMyl7CiAgICAg\nICAgICAgIGFzc2VydEVtcGxveWVlMyhlKTsKICAgICAgICB9CiAgICAgICAg\ndHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAg\nCiAgICBwdWJsaWMgdm9pZCBmaW5kT2JqTWFwS2V5Q2xhc3MoKSB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgCiAgICAgICAgSXRlbTEgaXRlbTEgPSBlbS5maW5kKEl0\nZW0xLmNsYXNzLCAxKTsKICAgICAgICBhc3NlcnRJdGVtMShpdGVtMSk7CiAg\nICAgICAgCiAgICAgICAgSXRlbTIgaXRlbTIgPSBlbS5maW5kKEl0ZW0yLmNs\nYXNzLCAzKTsKICAgICAgICBhc3NlcnRJdGVtMihpdGVtMik7CiAgICAgICAg\nCiAgICAgICAgSXRlbTMgaXRlbTMgPSBlbS5maW5kKEl0ZW0zLmNsYXNzLCA1\nKTsKICAgICAgICBhc3NlcnRJdGVtMyhpdGVtMyk7CgogICAgICAgIENvbXBh\nbnkxIGMxID0gZW0uZmluZChDb21wYW55MS5jbGFzcywgMSk7CiAgICAgICAg\nYXNzZXJ0Q29tcGFueTEoYzEpOwogICAgICAgIAogICAgICAgIENvbXBhbnky\nIGMyID0gZW0uZmluZChDb21wYW55Mi5jbGFzcywgMyk7CiAgICAgICAgYXNz\nZXJ0Q29tcGFueTIoYzIpOwoKICAgICAgICBEaXZpc2lvbiBkID0gZW0uZmlu\nZChEaXZpc2lvbi5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0RGl2aXNpb24o\nZCk7CiAgICAgICAgCiAgICAgICAgVmljZVByZXNpZGVudCB2cCA9IGVtLmZp\nbmQoVmljZVByZXNpZGVudC5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0Vmlj\nZVByZXNpZGVudCh2cCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGFz\nc2VydEl0ZW0xKEl0ZW0xIGl0ZW0pIHsKICAgICAgICBpbnQgaWQgPSBpdGVt\nLmdldElkKCk7CiAgICAgICAgTWFwIGltYWdlcyA9IGl0ZW0uZ2V0SW1hZ2Vz\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG51bUltYWdlc1Blckl0ZW0sIGlt\nYWdlcy5zaXplKCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBhc3Nl\ncnRJdGVtMihJdGVtMiBpdGVtKSB7CiAgICAgICAgaW50IGlkID0gaXRlbS5n\nZXRJZCgpOwogICAgICAgIE1hcCBpbWFnZXMgPSBpdGVtLmdldEltYWdlcygp\nOwogICAgICAgIGFzc2VydEVxdWFscyhudW1JbWFnZXNQZXJJdGVtLCBpbWFn\nZXMuc2l6ZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRJdGVt\nMyhJdGVtMyBpdGVtKSB7CiAgICAgICAgaW50IGlkID0gaXRlbS5nZXRJZCgp\nOwogICAgICAgIE1hcCBpbWFnZXMgPSBpdGVtLmdldEltYWdlcygpOwogICAg\nICAgIGFzc2VydEVxdWFscyhudW1JbWFnZXNQZXJJdGVtLCBpbWFnZXMuc2l6\nZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRDb21wYW55MShD\nb21wYW55MSBjKSB7CiAgICAgICAgaW50IGlkID0gYy5nZXRJZCgpOwogICAg\nICAgIE1hcCBvcmdhbml6YXRpb24gPSBjLmdldE9yZ2FuaXphdGlvbigpOwog\nICAgICAgIGFzc2VydEVxdWFscygyLG9yZ2FuaXphdGlvbi5zaXplKCkpOwog\nICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRDb21wYW55MihDb21w\nYW55MiBjKSB7CiAgICAgICAgaW50IGlkID0gYy5nZXRJZCgpOwogICAgICAg\nIE1hcCBvcmdhbml6YXRpb24gPSBjLmdldE9yZ2FuaXphdGlvbigpOwogICAg\nICAgIGFzc2VydEVxdWFscygyLG9yZ2FuaXphdGlvbi5zaXplKCkpOwogICAg\nfSAgICAKICAgIAogICAgcHVibGljIHZvaWQgYXNzZXJ0RGl2aXNpb24oRGl2\naXNpb24gZCkgewogICAgICAgIGludCBpZCA9IGQuZ2V0SWQoKTsKICAgICAg\nICBTdHJpbmcgbmFtZSA9IGQuZ2V0TmFtZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGFzc2VydFZpY2VQcmVzaWRlbnQoVmljZVByZXNpZGVudCB2cCkg\newogICAgICAgIGludCBpZCA9IHZwLmdldElkKCk7CiAgICAgICAgU3RyaW5n\nIG5hbWUgPSB2cC5nZXROYW1lKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ncXVlcnlPYmpNYXBLZXlDbGFzcygpIHsKICAgICAgICBxdWVyeUl0ZW0oZW1m\nKTsKICAgICAgICBxdWVyeUNvbXBhbnkoZW1mKTsKICAgICAgICBxdWVyeURp\ndmlzaW9uKGVtZik7CiAgICAgICAgcXVlcnlWaWNlUHJlc2lkZW50KGVtZik7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGZpbmRPYmpNYXBLZXlFbnVt\nZXJhdGVkKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEl0ZW00IGl0ZW0gPSBlbS5m\naW5kKEl0ZW00LmNsYXNzLCAxKTsKICAgICAgICBGaWxlTmFtZTQgZmlsZU5h\nbWUxID0gaXRlbS5nZXRJbWFnZShJdGVtNC5DYXRhZ29yeS5BMSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJmaWxlMSIsIGZpbGVOYW1lMS5nZXRGTmFtZSgp\nKTsgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJmaWxlMSIsIGZpbGVO\nYW1lMS5nZXRMTmFtZSgpKTsgICAgICAgCiAgICAgICAgCiAgICAgICAgRmls\nZU5hbWU0IGZpbGVOYW1lMiA9IGl0ZW0uZ2V0SW1hZ2UoSXRlbTQuQ2F0YWdv\ncnkuQTIpOwogICAgICAgIGFzc2VydEVxdWFscygiZmlsZTIiLCBmaWxlTmFt\nZTIuZ2V0Rk5hbWUoKSk7ICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygi\nZmlsZTIiLCBmaWxlTmFtZTIuZ2V0TE5hbWUoKSk7ICAgICAgIAogICAgICAg\nIAogICAgICAgIEZpbGVOYW1lNCBmaWxlTmFtZTMgPSBpdGVtLmdldEltYWdl\nKEl0ZW00LkNhdGFnb3J5LkEzKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImZp\nbGUzIiwgZmlsZU5hbWUzLmdldEZOYW1lKCkpOyAgICAgICAKICAgICAgICBh\nc3NlcnRFcXVhbHMoImZpbGUzIiwgZmlsZU5hbWUzLmdldExOYW1lKCkpOyAg\nICAgICAKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBmaW5kT2JqTWFwS2V5VGVt\ncG9yYWwoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgSXRlbTUgaXRlbSA9IGVtLmZp\nbmQoSXRlbTUuY2xhc3MsIDEpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBp\ndGVtLmdldEltYWdlcygpLnNpemUoKSk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHF1ZXJ5T2JqTWFwS2V5VGVtcG9yYWwoKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIFZBTFVFKGltZykgRlJPTSBJ\ndGVtNSBpdGVtLCBJTiAoaXRlbS5pbWFnZXMpIGltZyAiICsgCiAgICAgICAg\nICAgICJXSEVSRSBpbWcuZk5hbWUgPSA6Zk5hbWUgYW5kIGl0ZW0uaWQgPSA6\naWQiOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsK\nICAgICAgICBxLnNldFBhcmFtZXRlcigiZk5hbWUiLCAiZmlsZTEiKTsKICAg\nICAgICBxLnNldFBhcmFtZXRlcigiaWQiLCAxKTsKICAgICAgICBMaXN0IGNv\nbGwgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgY29sbC5zaXplKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5\nSXRlbShFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rp\nb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcTEg\nPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGkgZnJvbSBJdGVtMSBpIik7CiAg\nICAgICAgTGlzdDxJdGVtMT4gaXMxID0gcTEuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIGZvciAoSXRlbTEgaXRlbSA6IGlzMSl7CiAgICAgICAgICAgIGFz\nc2VydEl0ZW0xKGl0ZW0pOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBR\ndWVyeSBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgaSBmcm9tIEl0ZW0y\nIGkiKTsKICAgICAgICBMaXN0PEl0ZW0yPiBpczIgPSBxMi5nZXRSZXN1bHRM\naXN0KCk7CiAgICAgICAgZm9yIChJdGVtMiBpdGVtIDogaXMyKXsKICAgICAg\nICAgICAgYXNzZXJ0SXRlbTIoaXRlbSk7CiAgICAgICAgfQoKICAgICAgICBR\ndWVyeSBxMyA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgaSBmcm9tIEl0ZW0z\nIGkiKTsKICAgICAgICBMaXN0PEl0ZW0zPiBpczMgPSBxMy5nZXRSZXN1bHRM\naXN0KCk7CiAgICAgICAgZm9yIChJdGVtMyBpdGVtIDogaXMzKXsKICAgICAg\nICAgICAgYXNzZXJ0SXRlbTMoaXRlbSk7CiAgICAgICAgfQoKICAgICAgICB0\ncmFuLmNvbW1pdCgpOwoKICAgICAgICBTdHJpbmcgaW1hZ2VLZXkxID0gKFN0\ncmluZykgaXMxLmdldCgwKS5nZXRJbWFnZXMoKS4KICAgICAgICAgICAga2V5\nU2V0KCkudG9BcnJheSgpWzBdOwogICAgICAgIFN0cmluZyBpbWFnZUtleTIg\nPSAoU3RyaW5nKSBpczIuZ2V0KDApLmdldEltYWdlcygpLgogICAgICAgICAg\nICBrZXlTZXQoKS50b0FycmF5KClbMF07CiAgICAgICAgU3RyaW5nIGltYWdl\nS2V5MyA9IChTdHJpbmcpIGlzMy5nZXQoMCkuZ2V0SW1hZ2VzKCkuCiAgICAg\nICAgICAgIGtleVNldCgpLnRvQXJyYXkoKVswXTsKICAgICAgICBTdHJpbmdb\nXSBxdWVyeSA9IHsKICAgICAgICAgICAgInNlbGVjdCBpIGZyb20gSXRlbTEg\naSIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSA/MSA9IGFueSAiICsKICAg\nICAgICAgICAgICAgICIgKHNlbGVjdCBLRVkoZSkgZnJvbSBJdGVtMSBpLCBp\nbihpLmltYWdlcykgZSkgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5\nIGkiLAogICAgICAgICAgICAic2VsZWN0IGkgZnJvbSBJdGVtMSBpIiArCiAg\nICAgICAgICAgICAgICAiIHdoZXJlIGV4aXN0cyAiICsKICAgICAgICAgICAg\nICAgICIgKHNlbGVjdCBlIGZyb20gSXRlbTEgaSwgaW4oaS5pbWFnZXMpIGUi\nICsKICAgICAgICAgICAgICAgICIgICB3aGVyZSA/MSA9IEtFWShlKSkgIiAr\nCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGkiLAogICAgICAgIH07CiAg\nICAgICAgU3RyaW5nW10gcXVlcnkyID0gewogICAgICAgICAgICAic2VsZWN0\nIGkgZnJvbSBJdGVtMiBpIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlID8x\nID0gYW55ICIgKwogICAgICAgICAgICAgICAgIiAoc2VsZWN0IEtFWShlKSBm\ncm9tIEl0ZW0yIGksIGluKGkuaW1hZ2VzKSBlKSAiICsKICAgICAgICAgICAg\nICAgICIgb3JkZXIgYnkgaSIsCiAgICAgICAgICAgICJzZWxlY3QgaSBmcm9t\nIEl0ZW0yIGkiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgZXhpc3RzICIg\nKwogICAgICAgICAgICAgICAgIiAoc2VsZWN0IGUgZnJvbSBJdGVtMiBpLCBp\nbihpLmltYWdlcykgZSIgKwogICAgICAgICAgICAgICAgIiAgIHdoZXJlID8x\nID0gS0VZKGUpKSAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgaSIs\nCiAgICAgICAgfTsKICAgICAgICBTdHJpbmdbXSBxdWVyeTMgPSB7CiAgICAg\nICAgICAgICJzZWxlY3QgaSBmcm9tIEl0ZW0zIGkiICsKICAgICAgICAgICAg\nICAgICIgd2hlcmUgPzEgPSBhbnkgIiArCiAgICAgICAgICAgICAgICAiIChz\nZWxlY3QgS0VZKGUpIGZyb20gSXRlbTMgaSwgaW4oaS5pbWFnZXMpIGUpICIg\nKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBpIiwKICAgICAgICAgICAg\nInNlbGVjdCBpIGZyb20gSXRlbTMgaSIgKwogICAgICAgICAgICAgICAgIiB3\naGVyZSBleGlzdHMgIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgZSBm\ncm9tIEl0ZW0zIGksIGluKGkuaW1hZ2VzKSBlIiArCiAgICAgICAgICAgICAg\nICAiICAgd2hlcmUgPzEgPSBLRVkoZSkpICIgKwogICAgICAgICAgICAgICAg\nIiBvcmRlciBieSBpIiwKICAgICAgICB9OwoKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIFF1\nZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSk7CiAgICAgICAgICAg\nIHEuc2V0UGFyYW1ldGVyKDEsIGltYWdlS2V5MSk7CiAgICAgICAgICAgIGlz\nMSA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBmb3IgKEl0ZW0x\nIGl0ZW0gOiBpczEpewogICAgICAgICAgICAgICAgYXNzZXJ0SXRlbTEoaXRl\nbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBxdWVyeTIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\nUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5MltpXSk7CiAgICAgICAg\nICAgIHEuc2V0UGFyYW1ldGVyKDEsIGltYWdlS2V5Mik7CiAgICAgICAgICAg\nIGlzMiA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBmb3IgKEl0\nZW0yIGl0ZW0gOiBpczIpewogICAgICAgICAgICAgICAgYXNzZXJ0SXRlbTIo\naXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBxdWVyeTMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5M1tpXSk7CiAgICAg\nICAgICAgIHEuc2V0UGFyYW1ldGVyKDEsIGltYWdlS2V5Myk7CiAgICAgICAg\nICAgIGlzMyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBmb3Ig\nKEl0ZW0zIGl0ZW0gOiBpczMpewogICAgICAgICAgICAgICAgYXNzZXJ0SXRl\nbTMoaXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeUNvbXBhbnko\nRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mKSB7CiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7\nCiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHExID0gZW0u\nY3JlYXRlUXVlcnkoInNlbGVjdCBjIGZyb20gQ29tcGFueTEgYyIpOwogICAg\nICAgIExpc3Q8Q29tcGFueTE+IGNzMSA9IHExLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICBmb3IgKENvbXBhbnkxIGMgOiBjczEpewogICAgICAgICAgICBh\nc3NlcnRDb21wYW55MShjKTsKICAgICAgICB9CiAgICAgICAgUXVlcnkgcTIg\nPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGMgZnJvbSBDb21wYW55MiBjIik7\nCiAgICAgICAgTGlzdDxDb21wYW55Mj4gY3MyID0gcTIuZ2V0UmVzdWx0TGlz\ndCgpOwogICAgICAgIGZvciAoQ29tcGFueTIgYyA6IGNzMil7CiAgICAgICAg\nICAgIGFzc2VydENvbXBhbnkyKGMpOwogICAgICAgIH0KICAgICAgICB0cmFu\nLmNvbW1pdCgpOwoKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIC8vIHRl\nc3QgS0VZKGUpIGluIHN1YnF1ZXJ5CiAgICAgICAgRGl2aXNpb24gZDEgPSAo\nRGl2aXNpb24pICgoQ29tcGFueTEpIGNzMS5nZXQoMCkpLmdldE9yZ2FuaXph\ndGlvbigpLgogICAgICAgICAgICBrZXlTZXQoKS50b0FycmF5KClbMF07CiAg\nICAgICAgRGl2aXNpb24gZDIgPSAoRGl2aXNpb24pICgoQ29tcGFueTIpIGNz\nMi5nZXQoMCkpLmdldE9yZ2FuaXphdGlvbigpLgogICAgICAgICAgICBrZXlT\nZXQoKS50b0FycmF5KClbMF07CiAgICAgICAgU3RyaW5nW10gcXVlcnkgPSB7\nCiAgICAgICAgICAgICJzZWxlY3QgYyBmcm9tIENvbXBhbnkxIGMsIGluKGMu\nb3JnYW5pemF0aW9uKSBkICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBL\nRVkoZCkgPSA/MSIsCiAgICAgICAgICAgICJzZWxlY3QgYyBmcm9tIENvbXBh\nbnkxIGMgIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlID8xID0gIiArCiAg\nICAgICAgICAgICAgICAiIChzZWxlY3QgS0VZKGQpIGZyb20gQ29tcGFueTEg\nYywgaW4oYy5vcmdhbml6YXRpb24pIGQiICsKICAgICAgICAgICAgICAgICIg\nICB3aGVyZSBkLmlkID0gMSkiICsKICAgICAgICAgICAgICAgICIgb3JkZXIg\nYnkgYyAiLCAgCiAgICAgICAgICAgICJzZWxlY3QgYyBmcm9tIENvbXBhbnkx\nIGMgd2hlcmUgZXhpc3RzIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3Qg\nZCBmcm9tIGluKGMub3JnYW5pemF0aW9uKSBkIiArCiAgICAgICAgICAgICAg\nICAiICB3aGVyZSBLRVkoZCkgPSA/MSkiICsKICAgICAgICAgICAgICAgICIg\nb3JkZXIgYnkgYyAiLCAgCiAgICAgICAgICAgICJzZWxlY3QgYyBmcm9tIENv\nbXBhbnkxIGMgd2hlcmUgZXhpc3RzIiArCiAgICAgICAgICAgICAgICAiIChz\nZWxlY3QgZCBmcm9tIGMub3JnYW5pemF0aW9uIGQiICsKICAgICAgICAgICAg\nICAgICIgIHdoZXJlIEtFWShkKSA9ID8xKSIgKwogICAgICAgICAgICAgICAg\nIiBvcmRlciBieSBjICIsICAKICAgICAgICB9OwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\nUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKTsKICAgICAgICAg\nICAgcS5zZXRQYXJhbWV0ZXIoMSwgZDEpOwogICAgICAgICAgICBjczEgPSBx\nLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgZm9yIChDb21wYW55MSBj\nIDogY3MxKXsKICAgICAgICAgICAgICAgIGFzc2VydENvbXBhbnkxKGMpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBTdHJpbmdbXSBxdWVy\neTIgPSB7CiAgICAgICAgICAgICJzZWxlY3QgYyBmcm9tIENvbXBhbnkyIGMi\nICsKICAgICAgICAgICAgICAgICIgd2hlcmUgPzEgPSAiICsKICAgICAgICAg\nICAgICAgICIgKHNlbGVjdCBLRVkoZCkgZnJvbSBDb21wYW55MiBjLCBpbihj\nLm9yZ2FuaXphdGlvbikgZCIgKwogICAgICAgICAgICAgICAgIiAgIHdoZXJl\nIGQuaWQgPSAzKSIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBjICIs\nICAKICAgICAgICAgICAgInNlbGVjdCBjIGZyb20gQ29tcGFueTIgYyB3aGVy\nZSBleGlzdHMiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBkIGZyb20g\naW4oYy5vcmdhbml6YXRpb24pIGQiICsKICAgICAgICAgICAgICAgICIgIHdo\nZXJlIEtFWShkKSA9ID8xKSIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBi\neSBjICIsICAKICAgICAgICAgICAgInNlbGVjdCBjIGZyb20gQ29tcGFueTIg\nYyB3aGVyZSBleGlzdHMiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBk\nIGZyb20gYy5vcmdhbml6YXRpb24gZCIgKwogICAgICAgICAgICAgICAgIiAg\nd2hlcmUgS0VZKGQpID0gPzEpIiArCiAgICAgICAgICAgICAgICAiIG9yZGVy\nIGJ5IGMgIiwgIAogICAgICAgIH07CgogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgcXVlcnkyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIFF1ZXJ5\nIHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeTJbaV0pOwogICAgICAgICAgICBx\nLnNldFBhcmFtZXRlcigxLCBkMik7CiAgICAgICAgICAgIGNzMiA9IHEuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgICAgICBmb3IgKENvbXBhbnkyIGMgOiBj\nczIpewogICAgICAgICAgICAgICAgYXNzZXJ0Q29tcGFueTIoYyk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBxdWVyeURpdmlzaW9uKEVudGl0eU1hbmFnZXJG\nYWN0b3J5IGVtZikgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0\naW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4u\nYmVnaW4oKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNl\nbGVjdCBkIGZyb20gRGl2aXNpb24gZCIpOwogICAgICAgIExpc3Q8RGl2aXNp\nb24+IGRzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChEaXZp\nc2lvbiBkIDogZHMpewogICAgICAgICAgICBhc3NlcnREaXZpc2lvbihkKTsK\nICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5VmljZVByZXNp\nZGVudChFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rp\nb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9\nIGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgdnAgZnJvbSBWaWNlUHJlc2lkZW50\nIHZwIik7CiAgICAgICAgTGlzdDxWaWNlUHJlc2lkZW50PiB2cHMgPSBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKFZpY2VQcmVzaWRlbnQgdnAg\nOiB2cHMpewogICAgICAgICAgICBhc3NlcnRWaWNlUHJlc2lkZW50KHZwKTsK\nICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFRvIHJ1biB0aGlz\nIG1ldGhvZCBvbiBPcmFjbGUgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSB0\naGUgYXV0aG9yaXR5CiAgICAgKiB0byBjcmVhdGUgdHJpZ2dlcnMuICBleC4g\nIEdSQU5UIENSRUFURSBUUklHR0VSIFRPICJTQ09UVCIKICAgICAqLwogICAg\ncHVibGljIHZvaWQgY3JlYXRlRW1iZWRkYWJsZUNvbnRhaW5pbmdSZWxhdGlv\nbldpdGhHZW5lcmF0ZWRLZXkoKSAKICAgICAgICB0aHJvd3MgSU9FeGNlcHRp\nb24sIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgb2plbSA9IChPcGVuSlBBRW50aXR5\nTWFuYWdlclNQSSllbTsKICAgICAgICBKREJDQ29uZmlndXJhdGlvbiBjb25m\nID0gKEpEQkNDb25maWd1cmF0aW9uKSBvamVtLmdldENvbmZpZ3VyYXRpb24o\nKTsKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9IGNvbmYuZ2V0REJEaWN0\naW9uYXJ5SW5zdGFuY2UoKTsKICAgICAgICBpZiAoZGljdCBpbnN0YW5jZW9m\nIE9yYWNsZURpY3Rpb25hcnkpIHsKICAgICAgICAgICAgcmVjcmVhdGVPcmFj\nbGVBcnRpZmFjdHMoKE9yYWNsZURpY3Rpb25hcnkpZGljdCwgY29uZik7ICAg\nICAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICBFbnRpdHlUcmFuc2Fj\ndGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICAKICAg\nICAgICBCb29rIGIgPSBuZXcgQm9vaygxNTkwNTk2NDU1KTsKICAgICAgICBT\nZWxsZXIgYm9iID0gbmV3IFNlbGxlcigiQm9iJ3MgYm9va3MhIik7CiAgICAg\nICAgU2VsbGVyIGppbSA9IG5ldyBTZWxsZXIoIkppbSdzIGJvb2tzISIpOwog\nICAgICAgIFNlbGxlciBtaWtlID0gbmV3IFNlbGxlcigiTWlrZXMncyBib29r\ncyEiKTsKICAgICAgICBiLmFkZExpc3RpbmcobmV3IExpc3RpbmcoYm9iICwg\nNDQuMTUpKTsKICAgICAgICBiLmFkZExpc3RpbmcobmV3IExpc3Rpbmcoamlt\nICwgMzQuMTUpKTsKICAgICAgICBiLmFkZExpc3RpbmcobmV3IExpc3Rpbmco\nbWlrZSAsIDE0LjE1KSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QoYik7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBpbnQgaWQgPSBiLmdl\ndElkKCk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICBCb29rIGIyID0g\nZW0uZmluZChCb29rLmNsYXNzLCBpZCk7CiAgICAgICAgU2V0PExpc3Rpbmc+\nIGxpc3RpbmdzID0gYjIuZ2V0TGlzdGluZ3MoKTsKICAgICAgICBmb3IgKExp\nc3RpbmcgbGlzdGluZyA6IGxpc3RpbmdzKSB7CiAgICAgICAgICAgIFNlbGxl\nciBzZWxsZXIgPSBsaXN0aW5nLmdldFNlbGxlcigpOwogICAgICAgICAgICBh\nc3NlcnROb3ROdWxsKHNlbGxlcik7CiAgICAgICAgICAgIGFzc2VydFRydWUo\nc2VsbGVyLmdldElkKCkgIT0gMCk7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nCiAgICAgKiBUaGlzIG1ldGhvZCB1c2VzIHRoZSBtYXBwaW5nIHRvb2wgdG8g\ncmVnZW5lcmF0ZSBPcmFjbGUgZGIgYXJ0aWZhY3RzCiAgICAgKiB3aXRoIHRo\nZSB1c2VUcmlnZ2Vyc0ZvckF1dG9Bc3NpZ24gZGIgb3B0aW9uIGVuYWJsZWQu\nCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCByZWNyZWF0ZU9yYWNsZUFydGlm\nYWN0cyhPcmFjbGVEaWN0aW9uYXJ5IGRpY3QsIAogICAgICAgIEpEQkNDb25m\naWd1cmF0aW9uIGNvbmYpIHRocm93cyBJT0V4Y2VwdGlvbiwgU1FMRXhjZXB0\naW9uIHsKICAgICAgICBkaWN0LnVzZVRyaWdnZXJzRm9yQXV0b0Fzc2lnbiA9\nIHRydWU7CiAgICAgICAgRmxhZ3MgZmxhZ3MgPSBuZXcgTWFwcGluZ1Rvb2wu\nRmxhZ3MoKTsKICAgICAgICBmbGFncy5kcm9wVGFibGVzID0gdHJ1ZTsKICAg\nICAgICBmbGFncy5zY2hlbWFBY3Rpb24gPSAiZHJvcCxhZGQiOwogICAgICAg\nIGZsYWdzLnNlcXVlbmNlcyA9IHRydWU7CiAgICAgICAgZmxhZ3MuaWdub3Jl\nRXJyb3JzID0gdHJ1ZTsKICAgICAgICBmbGFncy5kcm9wU2VxdWVuY2VzID0g\ndHJ1ZTsKICAgICAgICBNYXBwaW5nVG9vbC5ydW4oIAogICAgICAgICAgICBj\nb25mLCAKICAgICAgICAgICAgbmV3IFN0cmluZ1tdIHsgIm9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5lbWJlZC5Cb29rIiB9LAogICAgICAgICAg\nICBmbGFncywKICAgICAgICAgICAgY29uZi5nZXRDbGFzc1Jlc29sdmVySW5z\ndGFuY2UoKS4KICAgICAgICAgICAgZ2V0Q2xhc3NMb2FkZXIoTWFwcGluZ1Rv\nb2wuY2xhc3MsIG51bGwpKTsgICAgICAgIAogICAgfQoKICAgIC8qCiAgICAg\nKiBFbnRpdHlBX0VtYmVkX0NvbXBsZXggcm91dGluZXMKICAgICAqLwogICAg\ncHVibGljIHZvaWQgdGVzdEVudGl0eUFfRW1iZWRfQ29tcGxleCgpIHsKICAg\nICAgICBnZXRMb2coKS50cmFjZSgidGVzdEVudGl0eUFfRW1iZWRfQ29tcGxl\neCgpIC0gZW50ZXJlZCIpOwogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRf\nQ29tcGxleChudWxsKTsKICAgICAgICBxdWVyeUVudGl0eUFfRW1iZWRfQ29t\ncGxleChudWxsKTsKICAgICAgICBmaW5kRW50aXR5QV9FbWJlZF9Db21wbGV4\nKG51bGwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbnRpdHlBX0Vt\nYmVkX0NvbXBsZXgyKCkgewogICAgICAgIGdldExvZygpLnRyYWNlKCJ0ZXN0\nRW50aXR5QV9FbWJlZF9Db21wbGV4MigpIC0gZW50ZXJlZCIpOwogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgY3JlYXRlRW50aXR5QV9F\nbWJlZF9Db21wbGV4KGVtKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAg\nIC8vcXVlcnlFbnRpdHlBX0VtYmVkX0NvbXBsZXgoZW0pOwogICAgICAgIC8v\nZW0uY2xlYXIoKTsKICAgICAgICBmaW5kRW50aXR5QV9FbWJlZF9Db21wbGV4\nKGVtKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIHVwZGF0ZUVudGl0\neUFfRW1iZWRfQ29tcGxleChlbSk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAg\nICAgICBmaW5kRW50aXR5QV9FbWJlZF9Db21wbGV4KGVtKTsKICAgICAgICBl\nbS5jbGVhcigpOwogICAgICAgIHJlbW92ZUVudGl0eUFfRW1iZWRfQ29tcGxl\neChlbSk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX0NvbXBsZXgoRW50aXR5TWFuYWdl\nciBlbSkgewogICAgICAgIEJvb2xlYW4gZW1DbG9zZSA9IGZhbHNlOwogICAg\nICAgIGlmIChlbSA9PSBudWxsKSB7CiAgICAgICAgICAgIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgICAgZW1DbG9zZSA9IHRy\ndWU7CiAgICAgICAgfQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBjcmVhdGVFbnRpdHlBX0VtYmVkX0NvbXBsZXgoZW0s\nIElEKTsKICAgICAgICAvL2VtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgaWYgKGVtQ2xvc2UpIHsKICAgICAgICAg\nICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZv\naWQgY3JlYXRlRW50aXR5QV9FbWJlZF9Db21wbGV4KEVudGl0eU1hbmFnZXIg\nZW0sIGludCBpZCkgewogICAgICAgIGdldExvZygpLnRyYWNlKCJjcmVhdGVF\nbnRpdHlBX0VtYmVkX0NvbXBsZXgoKSAtIGVudGVyZWQiKTsKICAgICAgICBF\nbnRpdHlBX0VtYmVkX0NvbXBsZXggYSA9IG5ldyBFbnRpdHlBX0VtYmVkX0Nv\nbXBsZXgoKTsKICAgICAgICBhLnNldElkKGlkKTsKICAgICAgICBhLnNldE5h\nbWUoImEiICsgaWQpOwogICAgICAgIGEuc2V0QWdlKGlkKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IG51bUJhc2ljVHlwZXM7IGkrKykgewogICAg\nICAgICAgICBhLmFkZE5pY2tOYW1lKCJuaWNrTmFtZV8iICsgaWQgKyBpKTsK\nICAgICAgICB9CiAgICAgICAgYS5hZGRDcmVkaXRSYXRpbmcoRW50aXR5QV9F\nbWJlZF9Db21wbGV4LkNyZWRpdFJhdGluZy5QT09SKTsKICAgICAgICBhLmFk\nZFRpbWVzdGFtcChuZXcgVGltZXN0YW1wKGNhbC5nZXRUaW1lSW5NaWxsaXMo\nKSkpOwogICAgICAgIGEuYWRkTG9iKCJsb2JfMCIpOwogICAgICAgIGEuc2V0\nRW1iZWQoY3JlYXRlRW1iZWRfRW1iZWQoZW0sIG51bUVtYmVkZGFibGVzLCAw\nKSk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbWJlZGRhYmxl\nczsgaSsrKSB7CiAgICAgICAgICAgIEVtYmVkX0VtYmVkIGVtYmVkID0gY3Jl\nYXRlRW1iZWRfRW1iZWQoZW0sIGlkLCBpKTsKICAgICAgICAgICAgYS5hZGRF\nbWJlZChlbWJlZCk7CiAgICAgICAgfQogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgbnVtRW1iZWRkYWJsZXM7IGkrKykgewogICAgICAgICAgICBFbWJl\nZF9Ub09uZSBlbWJlZCA9IGNyZWF0ZUVtYmVkX1RvT25lKGVtLCBpK2lkKTsK\nICAgICAgICAgICAgYS5hZGRFbWJlZDFUb09uZXMoZW1iZWQpOwogICAgICAg\nIH0KICAgICAgICBhLnNldFRyYW5zaWVudEphdmFWYWx1ZSh0aW1lSGFzaCk7\nCiAgICAgICAgYS5zZXRUcmFuc2llbnRWYWx1ZSh0aW1lSGFzaCk7CiAgICAg\nICAgZW0ucGVyc2lzdChhKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjaGVj\na0VudGl0eUFfRW1iZWRfQ29tcGxleChFbnRpdHlBX0VtYmVkX0NvbXBsZXgg\nYSkgewogICAgICAgIGdldExvZygpLnRyYWNlKCJjaGVja0VudGl0eUFfRW1i\nZWRfQ29tcGxleCgpIC0gZW50ZXJlZCIpOwogICAgICAgIGludCBpZCA9IGEu\nZ2V0SWQoKTsKICAgICAgICBTdHJpbmcgbmFtZSA9IGEuZ2V0TmFtZSgpOwog\nICAgICAgIGludCBhZ2UgPSBhLmdldEFnZSgpOwogICAgICAgIGFzc2VydEVx\ndWFscyhJRCwgaWQpOwogICAgICAgIGFzc2VydEVxdWFscygiYSIgKyBpZCAs\nbmFtZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKElELCBhZ2UpOwogICAgICAg\nIFNldDxTdHJpbmc+IG5pY2tOYW1lcyA9IGEuZ2V0Tmlja05hbWVzKCk7CiAg\nICAgICAgZm9yIChTdHJpbmcgbmlja05hbWUgOiBuaWNrTmFtZXMpIHsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKCJuaWNrTmFtZV8iICsgaWQgKyAiMCIs\nIG5pY2tOYW1lKTsKICAgICAgICB9CiAgICAgICAgTGlzdDxFbnRpdHlBX0Vt\nYmVkX0NvbXBsZXguQ3JlZGl0UmF0aW5nPiBjciA9IGEuZ2V0Q3JlZGl0UmF0\naW5nKCk7CiAgICAgICAgZm9yIChFbnRpdHlBX0VtYmVkX0NvbXBsZXguQ3Jl\nZGl0UmF0aW5nIGMgOiBjcikgewogICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nIlBPT1IiLCBjLnRvU3RyaW5nKCkpOwogICAgICAgIH0KICAgICAgICBMaXN0\nPFRpbWVzdGFtcD4gdHN0YW1wcyA9IGEuZ2V0VGltZXN0YW1wcygpOwogICAg\nICAgIGZvciAoVGltZXN0YW1wIHRzIDogdHN0YW1wcykgewogICAgICAgICAg\nICBhc3NlcnROb3RFcXVhbHMoMCwgdHMuZ2V0VGltZSgpKTsKICAgICAgICB9\nCiAgICAgICAgTGlzdDxTdHJpbmc+IGxvYnMgPSBhLmdldExvYnMoKTsKICAg\nICAgICBpbnQgaSA9IDA7CiAgICAgICAgZm9yIChTdHJpbmcgbG9iIDogbG9i\ncykgewogICAgICAgICAgICBhc3NlcnRFcXVhbHMoImxvYl8iICsgaSsrLCBs\nb2IpOwogICAgICAgIH0KICAgICAgICBFbWJlZF9FbWJlZCBlbWJlZGRlZCA9\nIGEuZ2V0RW1iZWQoKTsKICAgICAgICBjaGVja0VtYmVkX0VtYmVkKGVtYmVk\nZGVkKTsKICAgICAgICBMaXN0PEVtYmVkX0VtYmVkPiBlbWJlZHMgPSBhLmdl\ndEVtYmVkcygpOwogICAgICAgIGZvciAoRW1iZWRfRW1iZWQgZW1iZWQgOiBl\nbWJlZHMpIHsKICAgICAgICAgICAgY2hlY2tFbWJlZF9FbWJlZChlbWJlZCk7\nCiAgICAgICAgfQogICAgICAgIFNldDxFbWJlZF9Ub09uZT4gZW1iZWRPbmVz\nID0gYS5nZXRFbWJlZDFUb09uZXMoKTsKICAgICAgICBmb3IgKEVtYmVkX1Rv\nT25lIGVtYmVkIDogZW1iZWRPbmVzKSB7CiAgICAgICAgICAgIGNoZWNrRW1i\nZWRfVG9PbmUoZW1iZWQpOwogICAgICAgIH0KICAgICAgICBhc3NlcnROb3RF\ncXVhbHMoYS5nZXRUcmFuc2llbnRKYXZhVmFsdWUoKSwgdGltZUhhc2gpOwog\nICAgICAgIGFzc2VydE5vdEVxdWFscyhhLmdldFRyYW5zaWVudFZhbHVlKCks\nIHRpbWVIYXNoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBmaW5kRW50aXR5\nQV9FbWJlZF9Db21wbGV4KEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBC\nb29sZWFuIGVtQ2xvc2UgPSBmYWxzZTsKICAgICAgICBnZXRMb2coKS50cmFj\nZSgiZmluZEVudGl0eUFfRW1iZWRfQ29tcGxleCgpIC0gZW50ZXJlZCIpOwog\nICAgICAgIGlmIChlbSA9PSBudWxsKSB7CiAgICAgICAgICAgIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgICAgZW1DbG9zZSA9\nIHRydWU7CiAgICAgICAgfQogICAgICAgIEVudGl0eUFfRW1iZWRfQ29tcGxl\neCBhID0gZW0uZmluZChFbnRpdHlBX0VtYmVkX0NvbXBsZXguY2xhc3MsIElE\nKTsKICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRfQ29tcGxleChhKTsKICAg\nICAgICBpZiAoZW1DbG9zZSkgewogICAgICAgICAgICBlbS5jbG9zZSgpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB1cGRhdGVFbnRpdHlB\nX0VtYmVkX0NvbXBsZXgoRW50aXR5TWFuYWdlciBlbSkgewogICAgICAgIEJv\nb2xlYW4gZW1DbG9zZSA9IGZhbHNlOwogICAgICAgIGdldExvZygpLnRyYWNl\nKCJ1cGRhdGVFbnRpdHlBX0VtYmVkX0NvbXBsZXgoKSAtIGVudGVyZWQiKTsK\nICAgICAgICBpZiAoZW0gPT0gbnVsbCkgewogICAgICAgICAgICBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIGVtQ2xvc2Ug\nPSB0cnVlOwogICAgICAgIH0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CiAgICAgICAgRW50aXR5QV9FbWJlZF9Db21wbGV4IGEgPSBl\nbS5maW5kKEVudGl0eUFfRW1iZWRfQ29tcGxleC5jbGFzcywgSUQpOwogICAg\nICAgIGNoZWNrRW50aXR5QV9FbWJlZF9Db21wbGV4KGEpOwogICAgICAgIGZv\nciAoaW50IGkgPSAxOyBpIDwgbnVtRW1iZWRkYWJsZXM7IGkrKykgewogICAg\nICAgICAgICBhLmFkZExvYigibG9iXyIgKyBpKTsKICAgICAgICB9CiAgICAg\nICAgYS5zZXRUcmFuc2llbnRKYXZhVmFsdWUoMjAwOSk7CiAgICAgICAgYS5z\nZXRUcmFuc2llbnRWYWx1ZSgyMDA5KTsKICAgICAgICBlbS5wZXJzaXN0KGEp\nOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBpZiAoZW1DbG9zZSkgewogICAgICAg\nICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCByZW1vdmVFbnRpdHlBX0VtYmVkX0NvbXBsZXgoRW50aXR5TWFuYWdl\nciBlbSkgewogICAgICAgIEJvb2xlYW4gZW1DbG9zZSA9IGZhbHNlOwogICAg\nICAgIGdldExvZygpLnRyYWNlKCJyZW1vdmVFbnRpdHlBX0VtYmVkX0NvbXBs\nZXgoKSAtIGVudGVyZWQiKTsKICAgICAgICBpZiAoZW0gPT0gbnVsbCkgewog\nICAgICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgICAgIGVtQ2xvc2UgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRW50aXR5QV9F\nbWJlZF9Db21wbGV4IGEgPSBlbS5maW5kKEVudGl0eUFfRW1iZWRfQ29tcGxl\neC5jbGFzcywgSUQpOwogICAgICAgIGNoZWNrRW50aXR5QV9FbWJlZF9Db21w\nbGV4KGEpOwogICAgICAgIGVtLnJlbW92ZShhKTsKICAgICAgICBlbS5mbHVz\naCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAg\nICAgICAgZW0uY2xlYXIoKTsKICAgICAgICBhID0gZW0uZmluZChFbnRpdHlB\nX0VtYmVkX0NvbXBsZXguY2xhc3MsIElEKTsKICAgICAgICBhc3NlcnROdWxs\nKCJFbnRpdHkgc2hvdWxkIG5vIGxvbmdlciBleGlzdCIsIGEpOwogICAgICAg\nIGlmIChlbUNsb3NlKSB7CiAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAg\nICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJl\nZF9Db21wbGV4KEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBCb29sZWFu\nIGVtQ2xvc2UgPSBmYWxzZTsKICAgICAgICBnZXRMb2coKS50cmFjZSgicXVl\ncnlFbnRpdHlBX0VtYmVkX0NvbXBsZXgoKSAtIGVudGVyZWQiKTsKICAgICAg\nICBpZiAoZW0gPT0gbnVsbCkgewogICAgICAgICAgICBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIGVtQ2xvc2UgPSB0cnVl\nOwogICAgICAgIH0KICAgICAgICBTdHJpbmdbXSBxdWVyeSA9IHsKICAgICAg\nICAgICAgInNlbGVjdCBlIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVu\ndGl0eUFfRW1iZWRfQ29tcGxleCBhICIgKwogICAgICAgICAgICAgICAgIiAs\nIGluIChhLm5pY2tOYW1lcykgZSBvcmRlciBieSBhLmlkIiwKICAgICAgICAg\nICAgInNlbGVjdCBlIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0\neUFfRW1iZWRfQ29tcGxleCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGlu\nIChhLm5pY2tOYW1lcykgZSBvcmRlciBieSBhLmlkIiwKICAgICAgICAgICAg\nInNlbGVjdCBlIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFf\nRW1iZWRfQ29tcGxleCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChh\nLm5pY2tOYW1lcykgZSBvcmRlciBieSBlIiwKICAgICAgICAgICAgInNlbGVj\ndCBhIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRf\nQ29tcGxleCBhICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBhLm5pY2tO\nYW1lcyBJUyBFTVBUWSBvcmRlciBieSBhIiwKICAgICAgICAgICAgInNlbGVj\ndCBhIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRf\nQ29tcGxleCBhICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBleGlzdHMg\nKHNlbGVjdCBuIGZyb20gRW50aXR5QV9FbWJlZF9Db21wbGV4IGEsICIgKwog\nICAgICAgICAgICAgICAgIiBpbiAoYS5uaWNrTmFtZXMpIG4gd2hlcmUgbiBs\naWtlICclMScpICIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBhIiwK\nICAgICAgICB9OwogICAgICAgIExpc3QgcnMgPSBudWxsOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAg\nICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSkuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAg\nY2FzZSAwOgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2Ug\nMjoKICAgICAgICAgICAgICAgIGFzc2VydFRydWUocnMuc2l6ZSgpID4gMCk7\nCiAgICAgICAgICAgICAgICBPYmplY3Qgb2JqID0gcnMuZ2V0KDApOwogICAg\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvYmogaW5zdGFuY2VvZiBTdHJpbmcp\nOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoK\nICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1\nZShycy5zaXplKCkgPT0gMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\nZW0uY2xlYXIoKTsKICAgICAgICB9CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVy\neSgic2VsZWN0IGEgZnJvbSBFbnRpdHlBX0VtYmVkX0NvbXBsZXggYSIpOwog\nICAgICAgIExpc3Q8RW50aXR5QV9FbWJlZF9Db21wbGV4PiBhcyA9IHEuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoRW50aXR5QV9FbWJlZF9Db21w\nbGV4IGEgOiBhcykgewogICAgICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRf\nQ29tcGxleChhKTsKICAgICAgICB9CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBpZiAoZW1DbG9zZSkgewogICAgICAg\nICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0KICAgIH0KCiAgICAvKgogICAg\nICogRW50aXR5QV9FbWJlZF9Db21wbGV4IHJvdXRpbmVzCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHRlc3RFbWJlZGRhYmxlQ29sbFVzaW5nQXJyYXlzQXNM\naXN0KCkgewogICAgICAgIGdldExvZygpLnRyYWNlKCJ0ZXN0RW1iZWRkYWJs\nZUNvbGxVc2luZ0FycmF5c0FzTGlzdCgpIC0gZW50ZXJlZCIpOwogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFu\nc2FjdGlvbigpOwogICAgICAgIEVtYmVkX0VtYmVkW10gZW1iZWRBcnJheSA9\nIG5ldyBFbWJlZF9FbWJlZFs1XTsKICAgICAgICBmb3IgKGludCBpID0gMTsg\naSA8IDU7IGkrKykgewogICAgICAgICAgZW1iZWRBcnJheVtpXSA9IG5ldyBF\nbWJlZF9FbWJlZCgpOwogICAgICAgICAgZW1iZWRBcnJheVtpXS5zZXRJbnRW\nYWwxKGkpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBMaXN0IGVtYmVk\nTGlzdCA9IEFycmF5cy5hc0xpc3QoZW1iZWRBcnJheSk7CiAgICAgICAgRW50\naXR5QV9Db2xsX0VtYmVkX0VtYmVkIGExID0gbmV3IEVudGl0eUFfQ29sbF9F\nbWJlZF9FbWJlZCgpOwogICAgICAgIGExLnNldElkKDEpOwogICAgICAgIGEx\nLnNldEFnZSgxKTsKICAgICAgICBhMS5zZXROYW1lKCJuYW1lIiArIDEpOwog\nICAgICAgIGExLnNldEVtYmVkcyhlbWJlZExpc3QpOwogICAgICAgIAogICAg\nICAgIGVtLnBlcnNpc3QoYTEpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAg\nICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CgogICAg\nICAgIC8vdXBkYXRlCiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIEVt\nYmVkX0VtYmVkIGVtYmVkMSA9IG5ldyBFbWJlZF9FbWJlZCgpOwogICAgICAg\nIGVtYmVkMS5zZXRJbnRWYWwxKDEwMCk7CiAgICAgICAgYTEuYWRkRW1iZWQo\nZW1iZWQxKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nZWFyKCk7CiAgICAgICAgCiAgICAgICAgLy9maW5kCiAgICAgICAgRW50aXR5\nQV9Db2xsX0VtYmVkX0VtYmVkIGZpbmRBID0gZW0uZmluZChFbnRpdHlBX0Nv\nbGxfRW1iZWRfRW1iZWQuY2xhc3MsIDEpOwogICAgICAgIGFzc2VydEVxdWFs\ncyg2LCBmaW5kQS5nZXRFbWJlZHMoKS5zaXplKCkpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9CgogICAgLyoKICAgICAqIHRlc3QgdGhlIGRlZmF1bHQg\nbmFtZSBmb3IgZWxlbWVudCBjb2xsZWN0aW9uIHRhYmxlCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHRlc3REZWZhdWx0TmFtZUZvckVsZW1lbnRDb2xsZWN0\naW9uKCkgewogICAgICAgIGdldExvZygpLnRyYWNlKCJ0ZXN0RGVmYXVsdE5h\nbWVGb3JFbGVtZW50Q29sbGVjdGlvbigpIC0gZW50ZXJlZCIpOwogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFu\nc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsgCiAgICAgICAgQSBh\nID0gbmV3IEEoKTsKICAgICAgICBhLnNldElkKCIxIik7CiAgICAgICAgRW1i\nZWQgZW1iZWQgPSBuZXcgRW1iZWQoKTsKICAgICAgICBlbWJlZC5zZXRJbnRW\nYWwxKDEpOwogICAgICAgIGVtYmVkLnNldEludFZhbDIoMik7CiAgICAgICAg\nZW1iZWQuc2V0SW50VmFsMygzKTsKICAgICAgICBTZXQgZW1iZWRzID0gbmV3\nIEhhc2hTZXQoKTsKICAgICAgICBlbWJlZHMuYWRkKGVtYmVkKTsKICAgICAg\nICBhLnNldEVtYmVkcyhlbWJlZHMpOwogICAgICAgIENvbGxlY3Rpb248RGF0\nZT4gZGF0ZXMgPSBuZXcgQXJyYXlMaXN0PERhdGU+KCk7CiAgICAgICAgZGF0\nZXMuYWRkKG5ldyBEYXRlKCkpOwogICAgICAgIGEuc2V0Q29sbGVjdGlvbkRh\ndGUoZGF0ZXMpOwogICAgICAgIGVtLnBlcnNpc3QoYSk7CiAgICAgICAgdHJh\nbi5jb21taXQoKTsKICAgICAgICBib29sZWFuIGZvdW5kID0gZmFsc2U7CiAg\nICAgICAgZm9yIChTdHJpbmcgc3FsU3RyIDogc3FsKSB7CiAgICAgICAgICAg\nIGlmIChzcWxTdHIudG9VcHBlckNhc2UoKS5pbmRleE9mKCJBX0VNQkVEUyIp\nICE9IC0xKSB7CiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfSAKICAgICAgICB9CiAg\nICAgICAgYXNzZXJ0VHJ1ZShmb3VuZCk7CiAgICAgICAgCiAgICAgICAgZm91\nbmQgPSBmYWxzZTsKICAgICAgICBmb3IgKFN0cmluZyBzcWxTdHIgOiBzcWwp\nIHsKICAgICAgICAgICAgaWYgKHNxbFN0ci50b1VwcGVyQ2FzZSgpLmluZGV4\nT2YoIlZBTFVFIikgIT0gLTEpIHsKICAgICAgICAgICAgICAgIGZvdW5kID0g\ndHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9IAog\nICAgICAgIH0KICAgICAgICBhc3NlcnRUcnVlKGZvdW5kKTsKICAgIH0KfQo=\n","encoding":"base64"}

