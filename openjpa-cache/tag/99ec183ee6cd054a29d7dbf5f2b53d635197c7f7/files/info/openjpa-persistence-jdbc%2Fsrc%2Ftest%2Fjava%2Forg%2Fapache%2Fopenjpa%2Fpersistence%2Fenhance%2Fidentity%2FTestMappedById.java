{"sha":"25cedc71717d58642fbe0c47d198c8910e242bf4","node_id":"MDQ6QmxvYjIwNjM2NDoyNWNlZGM3MTcxN2Q1ODY0MmZiZTBjNDdkMTk4Yzg5MTBlMjQyYmY0","size":28350,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/25cedc71717d58642fbe0c47d198c8910e242bf4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZW5oYW5j\nZS5pZGVudGl0eTsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBv\ncnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsK\naW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eVRyYW5zYWN0aW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVl\ncnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2UuUGVyc2lz\ndGVuY2VDYXBhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuU3RhdGVNYW5hZ2VySW1wbDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNl\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT2JqZWN0SWQ7Cgpw\ndWJsaWMgY2xhc3MgVGVzdE1hcHBlZEJ5SWQgZXh0ZW5kcyBTaW5nbGVFTUZU\nZXN0Q2FzZSB7CiAgICBwdWJsaWMgaW50IG51bUVtcGxveWVlcyA9IDQ7CiAg\nICBwdWJsaWMgaW50IG51bURlcGVuZGVudHNQZXJFbXBsb3llZSA9IDI7CiAg\nICBwdWJsaWMgaW50IG51bVBlcnNvbnMgPSA0OwoKICAgIHB1YmxpYyBNYXA8\nSW50ZWdlciwgRW1wbG95ZWUxPiBlbXBzMSA9IG5ldyBIYXNoTWFwPEludGVn\nZXIsIEVtcGxveWVlMT4oKTsKICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBEZXBl\nbmRlbnQxPiBkZXBzMSA9IG5ldyBIYXNoTWFwPFN0cmluZywgRGVwZW5kZW50\nMT4oKTsKICAgIHB1YmxpYyBNYXA8SW50ZWdlciwgRW1wbG95ZWUyPiBlbXBz\nMiA9IG5ldyBIYXNoTWFwPEludGVnZXIsIEVtcGxveWVlMj4oKTsKICAgIHB1\nYmxpYyBNYXA8U3RyaW5nLCBEZXBlbmRlbnQyPiBkZXBzMiA9IG5ldyBIYXNo\nTWFwPFN0cmluZywgRGVwZW5kZW50Mj4oKTsKICAgIHB1YmxpYyBNYXA8U3Ry\naW5nLCBQZXJzb24xPiBwZXJzb25zMSA9IG5ldyBIYXNoTWFwPFN0cmluZywg\nUGVyc29uMT4oKTsKICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBNZWRpY2FsSGlz\ndG9yeTE+IG1lZGljYWxzMSA9IAogICAgICAgIG5ldyBIYXNoTWFwPFN0cmlu\nZywgTWVkaWNhbEhpc3RvcnkxPigpOwogICAgcHVibGljIE1hcDxTdHJpbmcs\nIFBlcnNvbjI+IHBlcnNvbnMyID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQZXJz\nb24yPigpOwogICAgcHVibGljIE1hcDxTdHJpbmcsIE1lZGljYWxIaXN0b3J5\nMj4gbWVkaWNhbHMyID0gCiAgICAgICAgbmV3IEhhc2hNYXA8U3RyaW5nLCBN\nZWRpY2FsSGlzdG9yeTI+KCk7CiAgICBwdWJsaWMgTWFwPFN0cmluZywgUGVy\nc29uMz4gcGVyc29uczMgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFBlcnNvbjM+\nKCk7CiAgICBwdWJsaWMgTWFwPFN0cmluZywgTWVkaWNhbEhpc3RvcnkzPiBt\nZWRpY2FsczMgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIAogICAgICAgIE1lZGlj\nYWxIaXN0b3J5Mz4oKTsKICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBQZXJzb240\nPiBwZXJzb25zNCA9IG5ldyBIYXNoTWFwPFN0cmluZywgUGVyc29uND4oKTsK\nICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBNZWRpY2FsSGlzdG9yeTQ+IG1lZGlj\nYWxzNCA9CiAgICAgICAgbmV3IEhhc2hNYXA8U3RyaW5nLCBNZWRpY2FsSGlz\ndG9yeTQ+KCk7CgogICAgcHVibGljIE1hcDxJbnRlZ2VyLCBFbXBsb3llZTM+\nIGVtcHMzID0gbmV3IEhhc2hNYXA8SW50ZWdlciwgRW1wbG95ZWUzPigpOwog\nICAgcHVibGljIE1hcDxPYmplY3QsIERlcGVuZGVudDM+IGRlcE1hcDMgPSAK\nICAgIAluZXcgSGFzaE1hcDxPYmplY3QsIERlcGVuZGVudDM+KCk7CiAgICBw\ndWJsaWMgTGlzdCBkaWRzMyA9IG5ldyBBcnJheUxpc3QoKTsKICAgIHB1Ymxp\nYyBMaXN0PERlcGVuZGVudDM+IGRlcHMzID0gbmV3IEFycmF5TGlzdDxEZXBl\nbmRlbnQzPigpOwogICAgCiAgICBwdWJsaWMgaW50IGVJZDEgPSAxOwogICAg\ncHVibGljIGludCBkSWQxID0gMTsKICAgIHB1YmxpYyBpbnQgZUlkMiA9IDE7\nCiAgICBwdWJsaWMgaW50IGRJZDIgPSAxOwogICAgcHVibGljIGludCBlSWQz\nID0gMTsKICAgIHB1YmxpYyBpbnQgZUlkNCA9IDE7CiAgICBwdWJsaWMgaW50\nIGRJZDQgPSAxOwogICAgcHVibGljIGludCBkSWQzID0gMTsKICAgIHB1Ymxp\nYyBpbnQgcElkMSA9IDE7CiAgICBwdWJsaWMgaW50IG1JZDEgPSAxOwogICAg\ncHVibGljIGludCBwSWQyID0gMTsKICAgIHB1YmxpYyBpbnQgbUlkMiA9IDE7\nCiAgICBwdWJsaWMgaW50IHBJZDMgPSAxOwogICAgcHVibGljIGludCBtSWQz\nID0gMTsKICAgIHB1YmxpYyBpbnQgcElkNCA9IDE7CiAgICBwdWJsaWMgaW50\nIG1JZDQgPSAxOwoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoRFJPUF9UQUJMRVMsIERl\ncGVuZGVudDEuY2xhc3MsIEVtcGxveWVlLmNsYXNzLCBFbXBsb3llZTEuY2xh\nc3MsIAogICAgICAgICAgICBEZXBlbmRlbnRJZDEuY2xhc3MsIERlcGVuZGVu\ndDIuY2xhc3MsIEVtcGxveWVlMi5jbGFzcywKICAgICAgICAgICAgRGVwZW5k\nZW50SWQyLmNsYXNzLCBFbXBsb3llZUlkMi5jbGFzcywgTWVkaWNhbEhpc3Rv\ncnkxLmNsYXNzLAogICAgICAgICAgICBQZXJzb24xLmNsYXNzLCBQZXJzb25J\nZDEuY2xhc3MsIE1lZGljYWxIaXN0b3J5Mi5jbGFzcywKICAgICAgICAgICAg\nUGVyc29uMi5jbGFzcywgUGVyc29uMy5jbGFzcywgTWVkaWNhbEhpc3Rvcnkz\nLmNsYXNzLCAKICAgICAgICAgICAgUGVyc29uNC5jbGFzcywgUGVyc29uSWQ0\nLmNsYXNzLCBNZWRpY2FsSGlzdG9yeTQuY2xhc3MsCiAgICAgICAgICAgIERl\ncGVuZGVudDMuY2xhc3MsIEVtcGxveWVlMy5jbGFzcywgRGVwZW5kZW50SWQz\nLmNsYXNzLCAKICAgICAgICAgICAgUGFyZW50My5jbGFzcywgRGVwZW5kZW50\nNC5jbGFzcywgRW1wbG95ZWU0LmNsYXNzLCBQaG9uZU51bWJlci5jbGFzcywK\nICAgICAgICAgICAgQmVuZUNvbnRhY3QuY2xhc3MsIEJlbmVDb250YWN0SWQu\nY2xhc3MsIEJlbmVmaWNpYXJ5LmNsYXNzLAogICAgICAgICAgICBEZXBlbmRl\nbnQ1LmNsYXNzLCBFbXBsb3llZTUuY2xhc3MsIEVtcGxveWVlSWQ1LmNsYXNz\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgaXMgc3BlYyAyLjQuMS4y\nIEV4YW1wbGUgMSwgY2FzZShiKQogICAgICovCiAgICBwdWJsaWMgdm9pZCB0\nZXN0TWFwc0lkMSgpIHsKICAgICAgICBjcmVhdGVPYmoxKCk7CiAgICAgICAg\nZmluZE9iajEoKTsKICAgICAgICBxdWVyeU9iajEoKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRoaXMgaXMgc3BlYyAyLjQuMS4yIEV4YW1wbGUgMywgY2Fz\nZShiKQogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWFwc0lkMigpIHsK\nICAgICAgICBjcmVhdGVPYmoyKCk7CiAgICAgICAgZmluZE9iajIoKTsKICAg\nICAgICBxdWVyeU9iajIoKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBU\naGlzIGlzIHNwZWMgMi40LjEuMiBFeGFtcGxlIDUsIGNhc2UoYikKICAgICAq\nLwogICAgcHVibGljIHZvaWQgdGVzdE1hcHNJZDMoKSB7CiAgICAgICAgY3Jl\nYXRlT2JqMygpOwogICAgICAgIGZpbmRPYmozKCk7CiAgICAgICAgcXVlcnlP\nYmozKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIGlzIGEgdmFyaWF0\naW9uIG9mIHNwZWMgMi40LjEuMiBFeGFtcGxlIDQsIGNhc2UoYikgd2l0aCBn\nZW5lcmF0ZWQga2V5CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RNYXBz\nSWQ0KCkgewogICAgICAgIC8vIE5vdCBhbGwgZGF0YWJhc2VzIHN1cHBvcnQg\nR2VuZXJhdGlvblR5cGUuSURFTlRJVFkgY29sdW1uKHMpCiAgICAgICAgaWYg\nKCEoKEpEQkNDb25maWd1cmF0aW9uKSBlbWYuZ2V0Q29uZmlndXJhdGlvbigp\nKS4KICAgICAgICAgICAgZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKS5zdXBw\nb3J0c0F1dG9Bc3NpZ24pIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nIH0KICAgICAgICBjcmVhdGVPYmo0KCk7CiAgICAgICAgcXVlcnlPYmo0KCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIGlzIGEgdmFyaWF0aW9uIG9m\nIHNwZWMgMi40LjEuMiBFeGFtcGxlIDEsIGNhc2UoYik6CiAgICAgKiB0d28g\nTWFwc0lkIGFubm90YXRpb25zIGluIERlcGVuZGVudDMgYW5kIGJvdGggcGFy\nZW50CiAgICAgKiBjbGFzc2VzIHVzZSBnZW5lcmF0ZWQga2V5IAogICAgICov\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWFwc0lkNSgpIHsKICAgICAgICAvLyBO\nb3QgYWxsIGRhdGFiYXNlcyBzdXBwb3J0IEdlbmVyYXRpb25UeXBlLklERU5U\nSVRZIGNvbHVtbihzKQogICAgICAgIGlmICghKChKREJDQ29uZmlndXJhdGlv\nbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKSkuCiAgICAgICAgICAgIGdldERC\nRGljdGlvbmFyeUluc3RhbmNlKCkuc3VwcG9ydHNBdXRvQXNzaWduKSB7CgkJ\nCXJldHVybjsKICAgICAgICB9CiAgICAgICAgY3JlYXRlT2JqNSgpOwogICAg\nICAgIGZpbmRPYmo1KCk7CiAgICAgICAgcXVlcnlPYmo1KCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBUaGlzIGlzIHNwZWMgMi40LjEuMiBFeGFtcGxlIDUs\nIGNhc2UoYSkKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdE1hcHNJZDYo\nKSB7CiAgICAgICAgY3JlYXRlT2JqNigpOwogICAgICAgIGZpbmRPYmo2KCk7\nCiAgICAgICAgcXVlcnlPYmo2KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBU\naGlzIGlzIHNwZWMgMi40LjEuMiBFeGFtcGxlIDYsIGNhc2UoYSkKICAgICAq\nLwogICAgcHVibGljIHZvaWQgdGVzdE1hcHNJZDcoKSB7CiAgICAgICAgY3Jl\nYXRlT2JqNygpOwogICAgICAgIGZpbmRPYmo3KCk7CiAgICAgICAgcXVlcnlP\nYmo3KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVudW1JZENsYXNz\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIEVtcGxveWVlIGUgPSBuZXcgRW1wbG95\nZWUoKTsKICAgICAgICBlLnNldEVtcElkKDEpOwogICAgICAgIGUuc2V0RW1w\nVHlwZShFbXBsb3llZS5FbXBUeXBlLkExKTsKICAgICAgICBQaG9uZU51bWJl\nciBwaG9uZU51bWJlciA9IG5ldyBQaG9uZU51bWJlcigpOwogICAgICAgIHBo\nb25lTnVtYmVyLnNldFBoTnVtYmVyKDEpOwogICAgICAgIHBob25lTnVtYmVy\nLnNldEVtcChlKTsKICAgICAgICBlLnNldFBob25lTnVtYmVyKHBob25lTnVt\nYmVyKTsKICAgICAgICBlbS5wZXJzaXN0KHBob25lTnVtYmVyKTsKICAgICAg\nICBlbS5wZXJzaXN0KGUpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRy\nYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4o\nKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICBQaG9uZU51bWJlciBwID0g\nZW0uZmluZChQaG9uZU51bWJlci5jbGFzcywgMSk7CiAgICAgICAgRW1wbG95\nZWUgZW1wID0gcC5nZXRFbXAoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwg\nZW1wLmdldEVtcElkKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHRlc3RFbWJlZGRlZElkTmVzdGVkSW5JZENs\nYXNzKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVtcGxveWVlSWQ1IGVJZDEgPSBu\nZXcgRW1wbG95ZWVJZDUoIkphdmEiLCAiRHVrZSIpOwogICAgICAgIEVtcGxv\neWVlNSBlbXBsb3llZTEgPSBuZXcgRW1wbG95ZWU1KGVJZDEpOwogICAgICAg\nIERlcGVuZGVudDUgZGVwMSA9IG5ldyBEZXBlbmRlbnQ1KCIxIiwgZW1wbG95\nZWUxKTsKCiAgICAgICAgZW0ucGVyc2lzdChkZXAxKTsKICAgICAgICBlbS5w\nZXJzaXN0KGVtcGxveWVlMSk7CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIoKTsK\nICAgICAgICAKICAgICAgICBEZXBlbmRlbnRJZDUgZGVwSWQxID0gbmV3IERl\ncGVuZGVudElkNSgiMSIsIGVJZDEpOwogICAgICAgIERlcGVuZGVudDUgbmV3\nRGVwID0gZW0uZmluZChEZXBlbmRlbnQ1LmNsYXNzLCBkZXBJZDEpOwogICAg\nICAgIGFzc2VydE5vdE51bGwobmV3RGVwKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucmVtb3ZlKG5ld0RlcCk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICBuZXdEZXAgPSBlbS5maW5kKERlcGVuZGVudDUuY2xhc3MsIGRlcElkMSk7\nCiAgICAgICAgYXNzZXJ0TnVsbChuZXdEZXApOyAgICAgICAgCiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdENv\ndW50RGlzdGluY3RNdWx0aUNvbHMoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7IAoKICAgICAgICBF\nbXBsb3llZTIgZW1wMSA9IG5ldyBFbXBsb3llZTIoKTsKICAgICAgICBFbXBs\nb3llZUlkMiBlbXBJZDEgPSBuZXcgRW1wbG95ZWVJZDIoKTsKICAgICAgICBl\nbXBJZDEuc2V0Rmlyc3ROYW1lKCJKYW1lcyIpOwogICAgICAgIGVtcElkMS5z\nZXRMYXN0TmFtZSgiQm9uZCIpOwogICAgICAgIGVtcDEuc2V0RW1wSWQoZW1w\nSWQxKTsKICAgICAgICAKICAgICAgICBFbXBsb3llZTIgZW1wMiA9IG5ldyBF\nbXBsb3llZTIoKTsKICAgICAgICBFbXBsb3llZUlkMiBlbXBJZDIgPSBuZXcg\nRW1wbG95ZWVJZDIoKTsKICAgICAgICBlbXBJZDIuc2V0Rmlyc3ROYW1lKCJK\nYW1lcyIpOwogICAgICAgIGVtcElkMi5zZXRMYXN0TmFtZSgiT2JhbWEiKTsK\nICAgICAgICBlbXAyLnNldEVtcElkKGVtcElkMik7CiAgICAgICAgCiAgICAg\nICAgRGVwZW5kZW50MiBkZXAxID0gbmV3IERlcGVuZGVudDIoKTsKICAgICAg\nICBEZXBlbmRlbnRJZDIgZGVwSWQxID0gbmV3IERlcGVuZGVudElkMigpOwog\nICAgICAgIGRlcElkMS5zZXRFbXBQSyhlbXBJZDEpOwogICAgICAgIGRlcElk\nMS5zZXROYW1lKCJBbGFuIik7CiAgICAgICAgZGVwMS5zZXRJZChkZXBJZDEp\nOwogICAgICAgIAogICAgICAgIERlcGVuZGVudDIgZGVwMiA9IG5ldyBEZXBl\nbmRlbnQyKCk7CiAgICAgICAgRGVwZW5kZW50SWQyIGRlcElkMiA9IG5ldyBE\nZXBlbmRlbnRJZDIoKTsKICAgICAgICBkZXBJZDIuc2V0RW1wUEsoZW1wSWQy\nKTsKICAgICAgICBkZXBJZDIuc2V0TmFtZSgiRGFycmVuIik7CiAgICAgICAg\nZGVwMi5zZXRJZChkZXBJZDIpOwogICAgICAgIAogICAgICAgIGVtLnBlcnNp\nc3QoZW1wMSk7CiAgICAgICAgZW0ucGVyc2lzdChlbXAyKTsKICAgICAgICBl\nbS5wZXJzaXN0KGRlcDEpOwogICAgICAgIGVtLnBlcnNpc3QoZGVwMik7CiAg\nICAgICAgCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIGVtLmZsdXNoKCk7ICAgICAgICAKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIFN0cmluZ1td\nIGpwcWxzID0gewogICAgICAgICAgICAiU0VMRUNUIENPVU5UIChESVNUSU5D\nVCBkMi5lbXApIEZST00gRGVwZW5kZW50MiBkMiIsCiAgICAgICAgICAgICJz\nZWxlY3QgY291bnQgKERJU1RJTkNUIGQyKSBmcm9tIERlcGVuZGVudDIgZDIi\nLAogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBqcHFscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBRdWVyeSBx\nID0gZW0uY3JlYXRlUXVlcnkoanBxbHNbaV0pIDsKICAgICAgICAgICAgTG9u\nZyBvID0gKExvbmcpcS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICAgICAg\naW50IGNvdW50ID0gKGludClvLmxvbmdWYWx1ZSgpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgY291bnQpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBjcmVhdGVPYmoxKCkgewogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVu\ndGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRW1wbG95ZWVzOyBpKysp\nCiAgICAgICAgICAgIGNyZWF0ZUVtcGxveWVlMShlbSwgZUlkMSsrKTsKICAg\nICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAg\nICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgcHVibGljIEVtcGxveWVlMSBjcmVhdGVFbXBsb3llZTEoRW50aXR5TWFu\nYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW1wbG95ZWUxIGUgPSBuZXcg\nRW1wbG95ZWUxKCk7CiAgICAgICAgZS5zZXRFbXBJZChpZCk7CiAgICAgICAg\nZS5zZXROYW1lKCJlbXBfIiArIGlkKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IG51bURlcGVuZGVudHNQZXJFbXBsb3llZTsgaSsrKSB7CiAgICAg\nICAgICAgIERlcGVuZGVudDEgZCA9IGNyZWF0ZURlcGVuZGVudDEoZW0sIGRJ\nZDErKywgZSk7CiAgICAgICAgICAgIGUuYWRkRGVwZW5kZW50KGQpOwogICAg\nICAgICAgICBlbS5wZXJzaXN0KGQpOwogICAgICAgIH0KICAgICAgICBlbS5w\nZXJzaXN0KGUpOwogICAgICAgIGVtcHMxLnB1dChpZCwgZSk7CiAgICAgICAg\ncmV0dXJuIGU7CiAgICB9CgogICAgcHVibGljIERlcGVuZGVudDEgY3JlYXRl\nRGVwZW5kZW50MShFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQsIEVtcGxveWVl\nMSBlKSB7CiAgICAgICAgRGVwZW5kZW50MSBkID0gbmV3IERlcGVuZGVudDEo\nKTsKICAgICAgICBEZXBlbmRlbnRJZDEgZGlkID0gbmV3IERlcGVuZGVudElk\nMSgpOwogICAgICAgIGRpZC5zZXROYW1lKCJkZXBfIiArIGlkKTsKICAgICAg\nICBkLnNldElkKGRpZCk7CiAgICAgICAgZC5zZXRFbXAoZSk7CiAgICAgICAg\nZGVwczEucHV0KGRpZC5nZXROYW1lKCksIGQpOwogICAgICAgIHJldHVybiBk\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGZpbmRPYmoxKCkgewogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIEVtcGxveWVlMSBlID0gZW0uZmluZChFbXBsb3llZTEuY2xh\nc3MsIDEpOwogICAgICAgIExpc3Q8RGVwZW5kZW50MT4gZHMgPSBlLmdldERl\ncGVuZGVudHMoKTsKICAgICAgICBhc3NlcnRFcXVhbHMobnVtRGVwZW5kZW50\nc1BlckVtcGxveWVlLCBkcy5zaXplKCkpOwogICAgICAgIEVtcGxveWVlMSBl\nMCA9IGVtcHMxLmdldCgxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZTAsIGUp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5T2JqMSgpIHsKICAgICAg\nICBxdWVyeURlcGVuZGVudDEoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBx\ndWVyeURlcGVuZGVudDEoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJh\nbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAg\ndHJhbi5iZWdpbigpOwogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBk\nIGZyb20gRGVwZW5kZW50MSBkIHdoZXJlIGQuaWQubmFtZSA9ICdkZXBfMScg\nIgogICAgICAgICAgICArICJBTkQgZC5lbXAubmFtZSA9ICdlbXBfMSciOwog\nICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAg\nICBMaXN0PERlcGVuZGVudDE+IGRzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgZm9yIChEZXBlbmRlbnQxIGQgOiBkcykgewogICAgICAgICAgICBh\nc3NlcnREZXBlbmRlbnQxKGQpOwogICAgICAgIH0KICAgICAgICB0cmFuLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgYXNzZXJ0RGVwZW5kZW50MShEZXBlbmRlbnQxIGQpIHsKICAgICAg\nICBEZXBlbmRlbnRJZDEgaWQgPSBkLmdldElkKCk7CiAgICAgICAgRGVwZW5k\nZW50MSBkMCA9IGRlcHMxLmdldChpZC5nZXROYW1lKCkpOwogICAgICAgIGlm\nIChkMC5pZC5lbXBQSyA9PSAwKQogICAgICAgICAgICBkMC5pZC5lbXBQSyA9\nIGQwLmVtcC5nZXRFbXBJZCgpOwogICAgICAgIGFzc2VydEVxdWFscyhkMCwg\nZCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZU9iajIoKSB7\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVt\nLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBudW1FbXBsb3llZXM7IGkrKykKICAgICAgICAgICAgY3JlYXRlRW1wbG95\nZWUyKGVtLCBlSWQyKyspOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAg\nICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIEVtcGxveWVlMiBj\ncmVhdGVFbXBsb3llZTIoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAg\nICAgICAgRW1wbG95ZWUyIGUgPSBuZXcgRW1wbG95ZWUyKCk7CiAgICAgICAg\nZS5zZXRFbXBJZChuZXcgRW1wbG95ZWVJZDIoImZfIiArIGlkLCAibF8iICsg\naWQpKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bURlcGVuZGVu\ndHNQZXJFbXBsb3llZTsgaSsrKSB7CiAgICAgICAgICAgIERlcGVuZGVudDIg\nZCA9IGNyZWF0ZURlcGVuZGVudDIoZW0sIGRJZDIrKywgZSk7CiAgICAgICAg\nICAgIGUuYWRkRGVwZW5kZW50KGQpOwogICAgICAgICAgICBlbS5wZXJzaXN0\nKGQpOwogICAgICAgIH0KICAgICAgICBlbS5wZXJzaXN0KGUpOwogICAgICAg\nIGVtcHMyLnB1dChpZCwgZSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9Cgog\nICAgcHVibGljIERlcGVuZGVudDIgY3JlYXRlRGVwZW5kZW50MihFbnRpdHlN\nYW5hZ2VyIGVtLCBpbnQgaWQsIEVtcGxveWVlMiBlKSB7CiAgICAgICAgRGVw\nZW5kZW50MiBkID0gbmV3IERlcGVuZGVudDIoKTsKICAgICAgICBEZXBlbmRl\nbnRJZDIgZGlkID0gbmV3IERlcGVuZGVudElkMigpOwogICAgICAgIGRpZC5z\nZXROYW1lKCJkZXBfIiArIGlkKTsKICAgICAgICBkLnNldEVtcChlKTsKICAg\nICAgICBkLnNldElkKGRpZCk7CiAgICAgICAgZW0ucGVyc2lzdChkKTsKICAg\nICAgICBkZXBzMi5wdXQoZGlkLmdldE5hbWUoKSwgZCk7CiAgICAgICAgcmV0\ndXJuIGQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgZmluZE9iajIoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRW1wbG95ZWUyIGUgPSBlbS5maW5kKEVtcGxveWVl\nMi5jbGFzcywgbmV3IEVtcGxveWVlSWQyKCJmXzEiLCAibF8xIikpOwogICAg\nICAgIExpc3Q8RGVwZW5kZW50Mj4gZHMgPSBlLmdldERlcGVuZGVudHMoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMobnVtRGVwZW5kZW50c1BlckVtcGxveWVl\nLCBkcy5zaXplKCkpOwogICAgICAgIEVtcGxveWVlMiBlMCA9IGVtcHMyLmdl\ndCgxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZTAsIGUpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHF1ZXJ5T2JqMigpIHsKICAgICAgICBxdWVyeURlcGVu\nZGVudDIoKTsKICAgIH0KICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RGVwZW5kZW50\nMigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFu\nID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBTdHJpbmcganBxbCA9\nICJzZWxlY3QgZCBmcm9tIERlcGVuZGVudDIgZCB3aGVyZSBkLmlkLm5hbWUg\nPSAnZGVwXzEnICIKICAgICAgICAgICAgKyAiQU5EIGQuaWQuZW1wUEsuZmly\nc3ROYW1lID0gJ2ZfMSciOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVR\ndWVyeShqcHFsKTsKICAgICAgICBMaXN0PERlcGVuZGVudDI+IGRzID0gcS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChEZXBlbmRlbnQyIGQgOiBk\ncykgewogICAgICAgICAgICBhc3NlcnREZXBlbmRlbnQyKGQpOwogICAgICAg\nIH0KICAgICAgICAKICAgICAgICBqcHFsID0gInNlbGVjdCBkIGZyb20gRGVw\nZW5kZW50MiBkIHdoZXJlIGQuaWQubmFtZSA9ICdkZXBfMScgIgogICAgICAg\nICAgICArICJBTkQgZC5lbXAuZW1wSWQuZmlyc3ROYW1lID0gJ2ZfMSciOwog\nICAgICAgIHEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBkcyA9\nIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoRGVwZW5kZW50MiBk\nIDogZHMpIHsKICAgICAgICAgICAgYXNzZXJ0RGVwZW5kZW50MihkKTsKICAg\nICAgICB9ICAgICAgICAKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGFzc2VydERlcGVuZGVudDIoRGVwZW5kZW50MiBkKSB7\nCiAgICAgICAgRGVwZW5kZW50SWQyIGRpZCA9IGQuZ2V0SWQoKTsKICAgICAg\nICBEZXBlbmRlbnQyIGQwID0gZGVwczIuZ2V0KGRpZC5nZXROYW1lKCkpOwog\nICAgICAgIERlcGVuZGVudElkMiBkaWQwID0gZDAuZ2V0SWQoKTsKICAgICAg\nICBkaWQwLnNldEVtcFBLKGQwLmdldEVtcCgpLmdldEVtcElkKCkpOwogICAg\nICAgIGFzc2VydEVxdWFscyhkMCwgZCk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIGNyZWF0ZU9iajMoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5\nVHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1QZXJzb25zOyBpKyspCiAgICAg\nICAgICAgIGNyZWF0ZVBlcnNvbjEoZW0sIHBJZDErKyk7CiAgICAgICAgdHJh\nbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5j\nb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyBQZXJzb24xIGNyZWF0ZVBlcnNvbjEoRW50aXR5TWFuYWdlciBlbSwgaW50\nIGlkKSB7CiAgICAgICAgUGVyc29uMSBwID0gbmV3IFBlcnNvbjEoKTsKICAg\nICAgICBQZXJzb25JZDEgcGlkID0gbmV3IFBlcnNvbklkMSgpOwogICAgICAg\nIHBpZC5zZXRGaXJzdE5hbWUoImZfIiArIGlkKTsKICAgICAgICBwaWQuc2V0\nTGFzdE5hbWUoImxfIiArIGlkKTsKICAgICAgICBwLnNldElkKHBpZCk7CiAg\nICAgICAgTWVkaWNhbEhpc3RvcnkxIG0gPSBjcmVhdGVNZWRpY2FsSGlzdG9y\neTEoZW0sIG1JZDErKyk7CiAgICAgICAgbS5zZXRQYXRpZW50KHApOwogICAg\nICAgIHAuc2V0TWVkaWNhbChtKTsKICAgICAgICBlbS5wZXJzaXN0KG0pOwog\nICAgICAgIGVtLnBlcnNpc3QocCk7CiAgICAgICAgcGVyc29uczEucHV0KHBp\nZC5nZXRGaXJzdE5hbWUoKSwgcCk7CiAgICAgICAgbWVkaWNhbHMxLnB1dCht\nLmdldFBhdGllbnQoKS5nZXRJZCgpLmdldEZpcnN0TmFtZSgpLCBtKTsKICAg\nICAgICByZXR1cm4gcDsKICAgIH0KCiAgICBwdWJsaWMgTWVkaWNhbEhpc3Rv\ncnkxIGNyZWF0ZU1lZGljYWxIaXN0b3J5MShFbnRpdHlNYW5hZ2VyIGVtLCBp\nbnQgaWQpIHsKICAgICAgICBNZWRpY2FsSGlzdG9yeTEgbSA9IG5ldyBNZWRp\nY2FsSGlzdG9yeTEoKTsKICAgICAgICBtLnNldE5hbWUoIm1lZGljYWxfIiAr\nIGlkKTsKICAgICAgICByZXR1cm4gbTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBmaW5kT2JqMygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBQZXJzb25JZDEgcGlk\nID0gbmV3IFBlcnNvbklkMSgpOwogICAgICAgIHBpZC5zZXRGaXJzdE5hbWUo\nImZfMSIpOwogICAgICAgIHBpZC5zZXRMYXN0TmFtZSgibF8xIik7CiAgICAg\nICAgUGVyc29uMSBwID0gZW0uZmluZChQZXJzb24xLmNsYXNzLCBwaWQpOwog\nICAgICAgIFBlcnNvbjEgcDAgPSBwZXJzb25zMS5nZXQocGlkLmdldEZpcnN0\nTmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMocDAsIHApOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHF1ZXJ5T2JqMygpIHsKICAgICAgICBxdWVyeU1l\nZGljYWxIaXN0b3J5MSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5\nTWVkaWNhbEhpc3RvcnkxKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRy\nYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAg\nIFN0cmluZyBmaXJzdE5hbWUgPSAiZl8xIjsKICAgICAgICB0cmFuLmJlZ2lu\nKCk7CiAgICAgICAgU3RyaW5nIGpwcWwgPQogICAgICAgICAgICAic2VsZWN0\nIG0gZnJvbSBNZWRpY2FsSGlzdG9yeTEgbSB3aGVyZSBtLnBhdGllbnQuaWQu\nZmlyc3ROYW1lID0gJyIKICAgICAgICAgICAgKyBmaXJzdE5hbWUgKyAiJyI7\nCiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAg\nICAgIExpc3Q8TWVkaWNhbEhpc3RvcnkxPiBtcyA9IHEuZ2V0UmVzdWx0TGlz\ndCgpOwogICAgICAgIGZvciAoTWVkaWNhbEhpc3RvcnkxIG0gOiBtcykgewog\nICAgICAgICAgICBhc3NlcnRNZWRpY2FsSGlzdG9yeTEobSwgZmlyc3ROYW1l\nKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAganBxbCA9ICJzZWxlY3Qg\nbSBmcm9tIE1lZGljYWxIaXN0b3J5MSBtIHdoZXJlIG0uaWQuZmlyc3ROYW1l\nID0gJyIKICAgICAgICAgICAgKyBmaXJzdE5hbWUgKyAiJyI7CiAgICAgICAg\ncSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAgIG1zID0gcS5nZXRS\nZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChNZWRpY2FsSGlzdG9yeTEgbSA6\nIG1zKSB7CiAgICAgICAgICAgIGFzc2VydE1lZGljYWxIaXN0b3J5MShtLCBm\naXJzdE5hbWUpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICB0cmFuLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgYXNzZXJ0TWVkaWNhbEhpc3RvcnkxKE1lZGljYWxIaXN0b3J5MSBt\nLCBTdHJpbmcgZmlyc3ROYW1lKSB7CiAgICAgICAgTWVkaWNhbEhpc3Rvcnkx\nIG0wID0gbWVkaWNhbHMxLmdldChmaXJzdE5hbWUpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhtMCwgbSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGNy\nZWF0ZU9iajQoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rp\nb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBudW1QZXJzb25zOyBpKyspCiAgICAgICAgICAgIGNy\nZWF0ZVBlcnNvbjIoZW0sIHBJZDIrKyk7CiAgICAgICAgdHJhbi5iZWdpbigp\nOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsK\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyBQZXJzb24y\nIGNyZWF0ZVBlcnNvbjIoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAg\nICAgICAgUGVyc29uMiBwID0gbmV3IFBlcnNvbjIoKTsKICAgICAgICBwLnNl\ndE5hbWUoInBfIiArIGlkKTsKICAgICAgICAKICAgICAgICBNZWRpY2FsSGlz\ndG9yeTIgbSA9IGNyZWF0ZU1lZGljYWxIaXN0b3J5MihlbSwgbUlkMisrKTsK\nICAgICAgICBtLnNldFBhdGllbnQocCk7ICAvLyBhdXRvbWF0aWNhbGx5IHNl\ndCB0aGUgaWQKICAgICAgICBwLnNldE1lZGljYWwobSk7CiAgICAgICAgZW0u\ncGVyc2lzdChtKTsKICAgICAgICBtZWRpY2FsczIucHV0KG0uZ2V0TmFtZSgp\nLCBtKTsKCiAgICAgICAgZW0ucGVyc2lzdChwKTsKICAgICAgICBwZXJzb25z\nMi5wdXQocC5nZXROYW1lKCksIHApOwogICAgICAgIHJldHVybiBwOwogICAg\nfQoKICAgIHB1YmxpYyBNZWRpY2FsSGlzdG9yeTIgY3JlYXRlTWVkaWNhbEhp\nc3RvcnkyKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIE1l\nZGljYWxIaXN0b3J5MiBtID0gbmV3IE1lZGljYWxIaXN0b3J5MigpOwogICAg\nICAgIG0uc2V0TmFtZSgibWVkaWNhbF8iICsgaWQpOwogICAgICAgIHJldHVy\nbiBtOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGZpbmRPYmo0KGxvbmcgc3Nu\nKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgUGVyc29uMiBwID0gZW0uZmluZChQZXJz\nb24yLmNsYXNzLCBzc24pOwogICAgICAgIFBlcnNvbjIgcDEgPSBwLmdldE1l\nZGljYWwoKS5nZXRQYXRpZW50KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHAx\nLCBwKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeU9iajQoKSB7CiAg\nICAgICAgcXVlcnlNZWRpY2FsSGlzdG9yeTQoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBxdWVyeU1lZGljYWxIaXN0b3J5NCgpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBNYXAgbWVkaWNhbHMgPSBuZXcgSGFzaE1hcCgpOwogICAgICAgIGxv\nbmcgc3NuID0gMDsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0g\nZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IG0gZnJvbSBNZWRpY2FsSGlz\ndG9yeTIgbSI7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpw\ncWwpOwogICAgICAgIExpc3Q8TWVkaWNhbEhpc3RvcnkyPiBtcyA9IHEuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoTWVkaWNhbEhpc3RvcnkyIG0g\nOiBtcykgewogICAgICAgICAgICBzc24gPSBtLmdldElkKCk7CiAgICAgICAg\nfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgICAgICAKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAg\nICAgdHJhbi5iZWdpbigpOwogICAgICAgIGpwcWwgPSAic2VsZWN0IG0gZnJv\nbSBNZWRpY2FsSGlzdG9yeTIgbSB3aGVyZSBtLnBhdGllbnQuc3NuID0gIiAr\nIHNzbjsKICAgICAgICBxID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAg\nICAgbXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKE1lZGlj\nYWxIaXN0b3J5MiBtIDogbXMpIHsKICAgICAgICAgICAgYXNzZXJ0TWVkaWNh\nbEhpc3RvcnkyKG0pOwogICAgICAgIH0KICAgICAgICB0cmFuLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgCiAgICAgICAgZmluZE9i\najQoc3NuKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRNZWRpY2Fs\nSGlzdG9yeTIoTWVkaWNhbEhpc3RvcnkyIG0pIHsKICAgICAgICBTdHJpbmcg\nbmFtZSA9IG0uZ2V0TmFtZSgpOwogICAgICAgIE1lZGljYWxIaXN0b3J5MiBt\nMCA9IG1lZGljYWxzMi5nZXQobmFtZSk7CiAgICAgICAgTWVkaWNhbEhpc3Rv\ncnkyIG0xID0gbS5nZXRQYXRpZW50KCkuZ2V0TWVkaWNhbCgpOwogICAgICAg\nIGFzc2VydEVxdWFscyhtMSwgbSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2\nb2lkIGNyZWF0ZU9iajUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJh\nbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbXBsb3llZXM7IGkrKykKICAgICAg\nICAgICAgY3JlYXRlRW1wbG95ZWUzKGVtLCBlSWQzKyspOwogICAgICAgIHRy\nYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4u\nY29tbWl0KCk7CiAgICAgICAgZm9yIChEZXBlbmRlbnQzIGQ6IGRlcHMzKSB7\nCiAgICAgICAgICAgIE9iamVjdElkIGRpZCA9IChPYmplY3RJZCkoKFN0YXRl\nTWFuYWdlckltcGwpKChQZXJzaXN0ZW5jZUNhcGFibGUpZCkKICAgICAgICAJ\nICAgICAgICAucGNHZXRTdGF0ZU1hbmFnZXIoKSkuZ2V0T2JqZWN0SWQoKTsK\nICAgICAgICAJZGlkczMuYWRkKGRpZC5nZXRJZCgpKTsKICAgICAgICAJZGVw\nTWFwMy5wdXQoZGlkLmdldElkKCksIGQpOwogICAgICAgIH0KICAgICAgICAK\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyBFbXBsb3ll\nZTMgY3JlYXRlRW1wbG95ZWUzKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkg\newogICAgICAgIEVtcGxveWVlMyBlID0gbmV3IEVtcGxveWVlMygpOwogICAg\nICAgIGUuc2V0TmFtZSgiZW1wXyIgKyBpZCk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBudW1EZXBlbmRlbnRzUGVyRW1wbG95ZWU7IGkrKykgewog\nICAgICAgICAgICBEZXBlbmRlbnQzIGQgPSBjcmVhdGVEZXBlbmRlbnQzKGVt\nLCBkSWQzKyssIGUpOwogICAgICAgICAgICBlLmFkZERlcGVuZGVudChkKTsK\nICAgICAgICAgICAgZW0ucGVyc2lzdChkKTsKICAgICAgICB9CiAgICAgICAg\nZW0ucGVyc2lzdChlKTsKICAgICAgICBlbXBzMy5wdXQoaWQsIGUpOwogICAg\nICAgIHJldHVybiBlOwogICAgfQoKICAgIHB1YmxpYyBEZXBlbmRlbnQzIGNy\nZWF0ZURlcGVuZGVudDMoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkLCBFbXBs\nb3llZTMgZSkgewogICAgICAgIERlcGVuZGVudDMgZCA9IG5ldyBEZXBlbmRl\nbnQzKCk7CiAgICAgICAgRGVwZW5kZW50SWQzIGRpZCA9IG5ldyBEZXBlbmRl\nbnRJZDMoKTsKICAgICAgICBkaWQuc2V0TmFtZSgiZGVwXyIgKyBpZCk7CiAg\nICAgICAgZC5zZXRJZChkaWQpOwogICAgICAgIGQuc2V0RW1wKGUpOwogICAg\nICAgIGRlcHMzLmFkZChkKTsKICAgICAgICBQYXJlbnQzIHAgPSBuZXcgUGFy\nZW50MygpOwogICAgICAgIHAuc2V0TmFtZSgicF8iICsgaWQpOwogICAgICAg\nIHAuc2V0RGVwZW5kZW50KGQpOwogICAgICAgIGQuc2V0UGFyZW50KHApOwog\nICAgICAgIGVtLnBlcnNpc3QocCk7CiAgICAgICAgcmV0dXJuIGQ7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgZmluZE9iajUoKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgRGVwZW5kZW50MyBkID0gZW0uZmluZChEZXBlbmRlbnQzLmNsYXNzLCBk\naWRzMy5nZXQoMSkpOwogICAgICAgIERlcGVuZGVudDMgZDAgPSBkZXBNYXAz\nLmdldChkaWRzMy5nZXQoMSkpOwogICAgICAgIGFzc2VydEVxdWFscyhkMCwg\nZCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcXVlcnlPYmo1KCkgewogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRU\ncmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBT\ndHJpbmcganBxbCA9ICJzZWxlY3QgZCBmcm9tIERlcGVuZGVudDMgZCB3aGVy\nZSBkLmlkLm5hbWUgPSAnZGVwXzEnICIKICAgICAgICAgICAgKyAiQU5EIGQu\nZW1wLm5hbWUgPSAnZW1wXzEnIjsKICAgICAgICBRdWVyeSBxID0gZW0uY3Jl\nYXRlUXVlcnkoanBxbCk7CiAgICAgICAgTGlzdDxEZXBlbmRlbnQzPiBkcyA9\nIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoRGVwZW5kZW50MyBk\nIDogZHMpIHsKICAgICAgICAgICAgYXNzZXJ0RGVwZW5kZW50MyhkKTsKICAg\nICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFzc2VydERlcGVuZGVudDMo\nRGVwZW5kZW50MyBkKSB7CiAgICAgICAgRGVwZW5kZW50SWQzIGlkID0gZC5n\nZXRJZCgpOwogICAgICAgIERlcGVuZGVudDMgZDAgPSBkZXBNYXAzLmdldChp\nZCk7CiAgICAgICAgaWYgKGQwLmlkLmVtcFBLID09IDApCiAgICAgICAgICAg\nIGQwLmlkLmVtcFBLID0gZDAuZW1wLmdldEVtcElkKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKGQwLCBkKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\nY3JlYXRlT2JqNigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2Fj\ndGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IG51bVBlcnNvbnM7IGkrKykKICAgICAgICAgICAg\nY3JlYXRlUGVyc29uMyhlbSwgcElkMysrKTsKICAgICAgICB0cmFuLmJlZ2lu\nKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICB0cmFuLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIFBlcnNv\nbjMgY3JlYXRlUGVyc29uMyhFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsK\nICAgICAgICBQZXJzb24zIHAgPSBuZXcgUGVyc29uMygpOwogICAgICAgIHAu\nc2V0Rmlyc3ROYW1lKCJmXyIgKyBpZCk7CiAgICAgICAgcC5zZXRMYXN0TmFt\nZSgibF8iICsgaWQpOwogICAgICAgIE1lZGljYWxIaXN0b3J5MyBtID0gY3Jl\nYXRlTWVkaWNhbEhpc3RvcnkzKGVtLCBtSWQzKyspOwogICAgICAgIG0uc2V0\nUGF0aWVudChwKTsKICAgICAgICBwLnNldE1lZGljYWwobSk7CiAgICAgICAg\nZW0ucGVyc2lzdChtKTsKICAgICAgICBlbS5wZXJzaXN0KHApOwogICAgICAg\nIHBlcnNvbnMzLnB1dChwLmdldEZpcnN0TmFtZSgpLCBwKTsKICAgICAgICBt\nZWRpY2FsczMucHV0KG0uZ2V0UGF0aWVudCgpLmdldEZpcnN0TmFtZSgpLCBt\nKTsKICAgICAgICByZXR1cm4gcDsKICAgIH0KCiAgICBwdWJsaWMgTWVkaWNh\nbEhpc3RvcnkzIGNyZWF0ZU1lZGljYWxIaXN0b3J5MyhFbnRpdHlNYW5hZ2Vy\nIGVtLCBpbnQgaWQpIHsKICAgICAgICBNZWRpY2FsSGlzdG9yeTMgbSA9IG5l\ndyBNZWRpY2FsSGlzdG9yeTMoKTsKICAgICAgICBtLnNldE5hbWUoIm1lZGlj\nYWxfIiArIGlkKTsKICAgICAgICByZXR1cm4gbTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBmaW5kT2JqNigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBQZXJzb24z\nIHAgPSBlbS5maW5kKFBlcnNvbjMuY2xhc3MsIG5ldyBQZXJzb25JZDMoImZf\nMSIsICJsXzEiKSk7CiAgICAgICAgUGVyc29uMyBwMCA9IHBlcnNvbnMzLmdl\ndCgiZl8xIik7CiAgICAgICAgUGVyc29uMyBwMSA9IHAuZ2V0TWVkaWNhbCgp\nLmdldFBhdGllbnQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMocCwgcDEpOwog\nICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgCiAgICAgICAgTWVkaWNhbEhp\nc3RvcnkzIG0gPSBlbS5maW5kKE1lZGljYWxIaXN0b3J5My5jbGFzcywgbmV3\nIFBlcnNvbklkMygiZl8xIiwgImxfMSIpKTsKICAgICAgICBNZWRpY2FsSGlz\ndG9yeTMgbTAgPSBtZWRpY2FsczMuZ2V0KCJmXzEiKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMobSwgbTApOwogICAgICAgIAogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5yZW1vdmUobSk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBxdWVyeU9iajYoKSB7IAogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVu\ndGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwog\nICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBTdHJpbmcgZmlyc3ROYW1l\nID0gImZfMSI7CiAgICAgICAgU3RyaW5nIGpwcWwgPQogICAgICAgICAgICAi\nc2VsZWN0IG0gZnJvbSBNZWRpY2FsSGlzdG9yeTMgbSB3aGVyZSBtLnBhdGll\nbnQuZmlyc3ROYW1lID0gJyIKICAgICAgICAgICAgKyBmaXJzdE5hbWUgKyAi\nJyI7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwog\nICAgICAgIExpc3Q8TWVkaWNhbEhpc3RvcnkzPiBtcyA9IHEuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgIGZvciAoTWVkaWNhbEhpc3RvcnkzIG0gOiBtcykg\newogICAgICAgICAgICBhc3NlcnRNZWRpY2FsSGlzdG9yeTMobSwgZmlyc3RO\nYW1lKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFzc2VydE1l\nZGljYWxIaXN0b3J5MyhNZWRpY2FsSGlzdG9yeTMgbSwgU3RyaW5nIGZpcnN0\nTmFtZSkgewogICAgICAgIE1lZGljYWxIaXN0b3J5MyBtMCA9IG1lZGljYWxz\nMy5nZXQoZmlyc3ROYW1lKTsKICAgICAgICBhc3NlcnRFcXVhbHMobTAsIG0p\nOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVPYmo3KCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5n\nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nbnVtUGVyc29uczsgaSsrKQogICAgICAgICAgICBjcmVhdGVQZXJzb240KGVt\nLCBwSWQ0KyspOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5m\nbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgUGVyc29uNCBjcmVhdGVQZXJzb240\nKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIFBlcnNvbjQg\ncCA9IG5ldyBQZXJzb240KCk7CiAgICAgICAgcC5zZXRJZChuZXcgUGVyc29u\nSWQ0KCJmXyIgKyBpZCwgImxfIiArIGlkKSk7CiAgICAgICAgTWVkaWNhbEhp\nc3Rvcnk0IG0gPSBjcmVhdGVNZWRpY2FsSGlzdG9yeTQoZW0sIG1JZDQrKyk7\nCiAgICAgICAgbS5zZXRQYXRpZW50KHApOwogICAgICAgIHAuc2V0TWVkaWNh\nbChtKTsKICAgICAgICBlbS5wZXJzaXN0KHApOwogICAgICAgIGVtLnBlcnNp\nc3QobSk7CiAgICAgICAgcGVyc29uczQucHV0KHAuZ2V0SWQoKS5nZXRGaXJz\ndE5hbWUoKSwgcCk7CiAgICAgICAgbWVkaWNhbHM0LnB1dChtLmdldFBhdGll\nbnQoKS5nZXRJZCgpLmdldEZpcnN0TmFtZSgpLCBtKTsKICAgICAgICByZXR1\ncm4gcDsKICAgIH0KCiAgICBwdWJsaWMgTWVkaWNhbEhpc3Rvcnk0IGNyZWF0\nZU1lZGljYWxIaXN0b3J5NChFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsK\nICAgICAgICBNZWRpY2FsSGlzdG9yeTQgbSA9IG5ldyBNZWRpY2FsSGlzdG9y\neTQoKTsKICAgICAgICBtLnNldE5hbWUoIm1lZGljYWxfIiArIGlkKTsKICAg\nICAgICByZXR1cm4gbTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBmaW5kT2Jq\nNygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBQZXJzb240IHAgPSBlbS5maW5kKFBl\ncnNvbjQuY2xhc3MsIG5ldyBQZXJzb25JZDQoImZfMSIsICJsXzEiKSk7CiAg\nICAgICAgUGVyc29uNCBwMCA9IHBlcnNvbnM0LmdldCgiZl8xIik7CiAgICAg\nICAgUGVyc29uNCBwMSA9IHAuZ2V0TWVkaWNhbCgpLmdldFBhdGllbnQoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMocDEsIHApOwogICAgICAgIGVtLmNsZWFy\nKCk7CiAgICAgICAgCiAgICAgICAgTWVkaWNhbEhpc3Rvcnk0IG0gPSBlbS5m\naW5kKE1lZGljYWxIaXN0b3J5NC5jbGFzcywgbmV3IFBlcnNvbklkNCgiZl8x\nIiwgImxfMSIpKTsKICAgICAgICBNZWRpY2FsSGlzdG9yeTQgbTAgPSBtZWRp\nY2FsczQuZ2V0KCJmXzEiKTsKICAgICAgICBhc3NlcnRFcXVhbHMobSwgbTAp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5T2JqNygpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJh\nbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgU3Ry\naW5nIGZpcnN0TmFtZSA9ICJmXzEiOwogICAgICAgIFN0cmluZyBqcHFsID0K\nICAgICAgICAgICAgInNlbGVjdCBtIGZyb20gTWVkaWNhbEhpc3Rvcnk0IG0g\nd2hlcmUgbS5wYXRpZW50LmlkLmZpcnN0TmFtZSA9ICciCiAgICAgICAgICAg\nICsgZmlyc3ROYW1lICsgIiciOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVh\ndGVRdWVyeShqcHFsKTsKICAgICAgICBMaXN0PE1lZGljYWxIaXN0b3J5ND4g\nbXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKE1lZGljYWxI\naXN0b3J5NCBtIDogbXMpIHsKICAgICAgICAgICAgYXNzZXJ0TWVkaWNhbEhp\nc3Rvcnk0KG0sIGZpcnN0TmFtZSk7CiAgICAgICAgfQogICAgICAgIHRyYW4u\nY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBhc3NlcnRNZWRpY2FsSGlzdG9yeTQoTWVkaWNhbEhpc3Rvcnk0\nIG0sIFN0cmluZyBmaXJzdE5hbWUpIHsKICAgICAgICBNZWRpY2FsSGlzdG9y\neTQgbTAgPSBtZWRpY2FsczQuZ2V0KGZpcnN0TmFtZSk7CiAgICAgICAgTWVk\naWNhbEhpc3Rvcnk0IG0xID0gbS5nZXRQYXRpZW50KCkuZ2V0TWVkaWNhbCgp\nOwogICAgICAgIGFzc2VydEVxdWFscyhtMSwgbSk7CiAgICB9CiAgICAKICAg\nIC8qKgogICAgICogRGVyaXZlZCBJZGVudGl0eSB3aXRoIElkQ2xhc3MgYW5k\nIGdlbmVyYXRlZEtleQogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0UGVy\nc2lzdERlcml2ZWRJZGVudGl0eVVzaW5nSWRDbGFzc0FuZEdlbmVyYXRlZEtl\neSgpIHsKICAgICAgICAvLyBOb3QgYWxsIGRhdGFiYXNlcyBzdXBwb3J0IEdl\nbmVyYXRpb25UeXBlLklERU5USVRZIGNvbHVtbihzKQogICAgICAgIGlmICgh\nKChKREJDQ29uZmlndXJhdGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKSku\nCiAgICAgICAgICAgIGdldERCRGljdGlvbmFyeUluc3RhbmNlKCkuc3VwcG9y\ndHNBdXRvQXNzaWduKSB7CgkJCXJldHVybjsKICAgICAgICB9CiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5z\nYWN0aW9uKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbXBs\nb3llZXM7IGkrKykKICAgICAgICAgICAgcGVyc2lzdEVtcGxveWVlNChlbSwg\nZUlkNCsrKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1\nc2goKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXJpdmVkIElkZW50aXR5IHdp\ndGggSWRDbGFzcyBhbmQgZ2VuZXJhdGVkS2V5CiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RNZXJnZURlcml2ZWRJZGVudGl0eVVzaW5nSWRDbGFzc0Fu\nZEdlbmVyYXRlZEtleSgpIHsKICAgICAgICAvLyBOb3QgYWxsIGRhdGFiYXNl\ncyBzdXBwb3J0IEdlbmVyYXRpb25UeXBlLklERU5USVRZIGNvbHVtbihzKQog\nICAgICAgIGlmICghKChKREJDQ29uZmlndXJhdGlvbikgZW1mLmdldENvbmZp\nZ3VyYXRpb24oKSkuCiAgICAgICAgICAgIGdldERCRGljdGlvbmFyeUluc3Rh\nbmNlKCkuc3VwcG9ydHNBdXRvQXNzaWduKSB7CgkJCXJldHVybjsKICAgICAg\nICB9CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9\nIGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBudW1FbXBsb3llZXM7IGkrKykKICAgICAgICAgICAgbWVyZ2VFbXBs\nb3llZTQoZW0sIGVJZDQrKyk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAg\nICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyBFbXBsb3llZTQgcGVy\nc2lzdEVtcGxveWVlNChFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAg\nICAgICBFbXBsb3llZTQgcCA9IG5ldyBFbXBsb3llZTQoKTsKICAgICAgICBw\nLnNldEFnZShpZCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1E\nZXBlbmRlbnRzUGVyRW1wbG95ZWU7IGkrKykgewogICAgICAgICAgICBEZXBl\nbmRlbnQ0IGMgPSBwZXJzaXN0RGVwZW5kZW50NChlbSwgZElkNCsrLCBwKTsK\nICAgICAgICAgICAgcC5hZGRDaGlsZChjKTsKICAgICAgICB9CiAgICAgICAg\nZW0ucGVyc2lzdChwKTsKICAgICAgICByZXR1cm4gcDsKICAgIH0KICAgIAog\nICAgcHVibGljIERlcGVuZGVudDQgcGVyc2lzdERlcGVuZGVudDQoRW50aXR5\nTWFuYWdlciBlbSwgaW50IGlkLCBFbXBsb3llZTQgcCkgewogICAgICAgIERl\ncGVuZGVudDQgYyA9IG5ldyBEZXBlbmRlbnQ0KCk7CiAgICAgICAgYy5zZXRJ\nZChpZCk7CiAgICAgICAgYy5zZXRQYXJlbnQocCk7CiAgICAgICAgZW0ucGVy\nc2lzdChjKTsKICAgICAgICByZXR1cm4gYzsKICAgIH0KICAgIAogICAgcHVi\nbGljIEVtcGxveWVlNCBtZXJnZUVtcGxveWVlNChFbnRpdHlNYW5hZ2VyIGVt\nLCBpbnQgaWQpIHsKICAgICAgICBFbXBsb3llZTQgZSA9IG5ldyBFbXBsb3ll\nZTQoKTsKICAgICAgICBlLnNldEFnZShpZCk7CiAgICAgICAgZSA9IGVtLm1l\ncmdlKGUpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRGVwZW5k\nZW50c1BlckVtcGxveWVlOyBpKyspIHsKICAgICAgICAgICAgRGVwZW5kZW50\nNCBkID0gbmV3IERlcGVuZGVudDQoKTsKICAgICAgICAgICAgZC5zZXRJZChk\nSWQ0KyspOwogICAgICAgICAgICBkLnNldFBhcmVudChlKTsKICAgICAgICAg\nICAgLy8gZG8gbm90IG5lZWQgdG8gbWVyZ2UgZCwgYXMgRW1wbG95ZWUgaXMg\nY2FzY2FkZS5BbGwKICAgICAgICAgICAgZCA9IGVtLm1lcmdlKGQpOwogICAg\nICAgICAgICBlLmFkZENoaWxkKGQpOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gZTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEVudW1JbkVt\nYmVkZGVkSWQoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgQmVuZWZpY2lhcnkgYiA9\nIG5ldyBCZW5lZmljaWFyeSgpOwogICAgICAgIGIuc2V0SWQoImI4Iik7CiAg\nICAgICAgTGlzdDxCZW5lQ29udGFjdD4gY29udGFjdHMgPSBuZXcgQXJyYXlM\naXN0PEJlbmVDb250YWN0PigpOwogICAgICAgIEJlbmVDb250YWN0IGMgPSBu\nZXcgQmVuZUNvbnRhY3QoKTsKICAgICAgICBjLnNldEVtYWlsKCJlbWFpbDgi\nKTsKICAgICAgICBCZW5lQ29udGFjdElkIGlkID0gbmV3IEJlbmVDb250YWN0\nSWQoKTsKICAgICAgICBpZC5zZXRDb250YWN0VHlwZShCZW5lQ29udGFjdElk\nLkNvbnRhY3RUeXBlLkhPTUUpOwogICAgICAgIGMuc2V0QmVuZWZpY2lhcnko\nYik7CiAgICAgICAgCiAgICAgICAgYy5zZXRJZChpZCk7CiAgICAgICAgZW0u\ncGVyc2lzdChjKTsKICAgICAgICBjb250YWN0cy5hZGQoYyk7CiAgICAgICAg\nYi5zZXRDb250YWN0cyhjb250YWN0cyk7CiAgICAgICAgZW0ucGVyc2lzdChi\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgZW0uZmx1c2goKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgQmVuZUNvbnRh\nY3RJZCBpZDEgPSBjLmdldElkKCk7CiAgICAgICAgQmVuZUNvbnRhY3QgYzEg\nPSBlbS5maW5kKEJlbmVDb250YWN0LmNsYXNzLCBpZDEpOwogICAgICAgIGFz\nc2VydEVxdWFscygiZW1haWw4IiwgYzEuZ2V0RW1haWwoKSk7CiAgICB9Cn0K\n","encoding":"base64"}

