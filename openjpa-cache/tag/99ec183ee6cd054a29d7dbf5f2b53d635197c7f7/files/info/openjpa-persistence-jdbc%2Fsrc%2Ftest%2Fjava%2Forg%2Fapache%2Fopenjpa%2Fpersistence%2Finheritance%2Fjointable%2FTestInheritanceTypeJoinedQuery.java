{"sha":"a8c7e88f8d1ca279e58d26224faa3bb55df486ae","node_id":"MDQ6QmxvYjIwNjM2NDphOGM3ZTg4ZjhkMWNhMjc5ZTU4ZDI2MjI0ZmFhM2JiNTVkZjQ4NmFl","size":6726,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a8c7e88f8d1ca279e58d26224faa3bb55df486ae","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuaW5oZXJp\ndGFuY2Uuam9pbnRhYmxlOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TUUxMaXN0ZW5lclRlc3RDYXNlOwoK\nCnB1YmxpYyBjbGFzcyBUZXN0SW5oZXJpdGFuY2VUeXBlSm9pbmVkUXVlcnkg\nIGV4dGVuZHMgU1FMTGlzdGVuZXJUZXN0Q2FzZSB7CgogICAgcHVibGljIHZv\naWQgc2V0VXAoKSB7CiAgICAgICAgc2V0VXAoQ29udHJhY3Rvci5jbGFzcywg\nRW1wbG95ZWUuY2xhc3MsIERlcGFydG1lbnQuY2xhc3MsIFBlcnNvbi5jbGFz\ncywKICAgICAgICAgICAgQ0xFQVJfVEFCTEVTKTsKICAgICAgICBwb3B1bGF0\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBvcHVsYXRlKCkgewogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIAogICAgICAgIERlcGFydG1lbnQgZCA9IG5ldyBEZXBh\ncnRtZW50KCJJVCIpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMzsg\naSsrKSB7CiAgICAgICAgICAgIENvbnRyYWN0b3IgYyA9IG5ldyBDb250cmFj\ndG9yKCJjdHIiICsgaSk7CiAgICAgICAgICAgIGMuc2V0RGVwdChkKTsKICAg\nICAgICAgICAgZW0ucGVyc2lzdChjKTsKICAgICAgICB9CiAgICAgICAgZW0u\ncGVyc2lzdChkKTsKICAgICAgCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0SW5oZXJpdGFuY2VUeXBlSm9pbmVkUXVlcnkoKSB7CiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgUXVlcnkgcSA9IG51bGw7CiAgICAgICAgU3RyaW5nIHFTID0g\nbnVsbDsKICAgICAgICBEZXBhcnRtZW50IGRlcHQgPSBudWxsOwogICAgICAg\nIAogICAgICAgIHFTID0gIlNFTEVDVCBjLk9JRCwgYy5kZXB0IEZST00gRGVw\nYXJ0bWVudCBkLCBDb250cmFjdG9yIGMgd2hlcmUgZC5PSUQgPSBjLmRlcHQu\nT0lEIGFuZCBkLmRlc2NyaXB0aW9uID0gJ0lUJyI7CiAgICAgICAgcSA9IGVt\nLmNyZWF0ZVF1ZXJ5KHFTKTsgCiAgICAgICAgTGlzdDxPYmplY3RbXT4gbFJl\nc3VsdCA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoT2JqZWN0\nW10gcmVzdWx0RWxlbWVudCA6IGxSZXN1bHQpIHsKICAgICAgICAgICAgTG9u\nZyBvaWQgPSAoTG9uZylyZXN1bHRFbGVtZW50WzBdOwogICAgICAgICAgICBk\nZXB0ID0gKERlcGFydG1lbnQpcmVzdWx0RWxlbWVudFsxXTsKICAgICAgICB9\nCiAgICAgICAgCiAgICAgICAgcVMgPSAiU0VMRUNUIGMuT0lEIEZST00gRGVw\nYXJ0bWVudCBkLCBDb250cmFjdG9yIGMgd2hlcmUgZC5PSUQgPSBjLmRlcHQu\nT0lEIGFuZCBkLmRlc2NyaXB0aW9uID0gJ0lUJyI7CiAgICAgICAgcSA9IGVt\nLmNyZWF0ZVF1ZXJ5KHFTKTsgCiAgICAgICAgZm9yIChPYmplY3QgcmVzdWx0\nRWxlbWVudCA6IHEuZ2V0UmVzdWx0TGlzdCgpKSB7CiAgICAgICAgICAgIExv\nbmcgb2lkID0gKExvbmcpcmVzdWx0RWxlbWVudDsKICAgICAgICB9CiAgICAg\nICAKICAgICAgICBxUyA9ICJTRUxFQ1QgZCBGUk9NIERlcGFydG1lbnQgZCwg\nQ29udHJhY3RvciBjIHdoZXJlIGQuT0lEID0gYy5kZXB0Lk9JRCBhbmQgZC5k\nZXNjcmlwdGlvbiA9ICdJVCciOwogICAgICAgIHEgPSBlbS5jcmVhdGVRdWVy\neShxUyk7IAogICAgICAgIGZvciAoRGVwYXJ0bWVudCBhUmVzdWx0OiAoTGlz\ndCA8RGVwYXJ0bWVudD4pIHEuZ2V0UmVzdWx0TGlzdCgpKSB7CiAgICAgICAg\nICAgIGFzc2VydEVxdWFscyhkZXB0LmdldE9JRCgpLCBhUmVzdWx0LmdldE9J\nRCgpKTsKICAgICAgICB9CgogICAgICAgIHFTID0gIlNFTEVDVCBjIEZST00g\nRGVwYXJ0bWVudCBkLCBDb250cmFjdG9yIGMgIHdoZXJlIGQuT0lEID0gYy5k\nZXB0Lk9JRCBhbmQgZC5kZXNjcmlwdGlvbiA9ICdJVCciOwogICAgICAgIHEg\nPSBlbS5jcmVhdGVRdWVyeShxUyk7ICAgICAgICAgICAgIAogICAgICAgIGZv\nciAoQ29udHJhY3RvciBhUmVzdWx0OiAoTGlzdCA8Q29udHJhY3Rvcj4pIHEu\nZ2V0UmVzdWx0TGlzdCgpKSB7CiAgICAgICAgICAgIC8vU3lzdGVtLm91dC5w\ncmludGxuKGFSZXN1bHQuZ2V0RGVzY3JpcHRpb24oKSArICIsICIgKyBhUmVz\ndWx0LmdldE9JRCgpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRlcHQu\nZ2V0T0lEKCksIGFSZXN1bHQuZ2V0RGVwdCgpLmdldE9JRCgpKTsKICAgICAg\nICB9CiAgICAgICAgcVMgPSAiU0VMRUNUIGMgRlJPTSBDb250cmFjdG9yIGMs\nIERlcGFydG1lbnQgZCAgd2hlcmUgZC5PSUQgPSBjLmRlcHQuT0lEIGFuZCBk\nLmRlc2NyaXB0aW9uID0gJ0lUJyI7CiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1\nZXJ5KHFTKTsgICAgICAgICAgICAgCiAgICAgICAgZm9yIChDb250cmFjdG9y\nIGFSZXN1bHQ6IChMaXN0IDxDb250cmFjdG9yPikgcS5nZXRSZXN1bHRMaXN0\nKCkpIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRlcHQuZ2V0T0lEKCks\nIGFSZXN1bHQuZ2V0RGVwdCgpLmdldE9JRCgpKTsKICAgICAgICB9CiAgICAg\nICAgCiAgICAgICAgcVMgPSAiU0VMRUNUIGMsIGMuT0lEIEZST00gRGVwYXJ0\nbWVudCBkLCBDb250cmFjdG9yIGMgd2hlcmUgZC5PSUQgPSBjLmRlcHQuT0lE\nIGFuZCBkLmRlc2NyaXB0aW9uID0gJ0lUJyI7CiAgICAgICAgcSA9IGVtLmNy\nZWF0ZVF1ZXJ5KHFTKTsgICAgICAgICAgICAgCiAgICAgICAgTGlzdDxPYmpl\nY3RbXT4gY1Jlc3VsdCA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIENv\nbnRyYWN0b3IgY29udHJhY3RvciA9IG51bGw7CiAgICAgICAgZm9yIChPYmpl\nY3RbXSByZXN1bHRFbGVtZW50IDogY1Jlc3VsdCkgewogICAgICAgICAgICBj\nb250cmFjdG9yID0gKENvbnRyYWN0b3IpcmVzdWx0RWxlbWVudFswXTsKICAg\nICAgICAgICAgTG9uZyBvaWQgPSAoTG9uZylyZXN1bHRFbGVtZW50WzFdOwog\nICAgICAgICAgICBhc3NlcnRUcnVlKGNvbnRyYWN0b3IuZ2V0T0lEKCkgPT0g\nb2lkKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRlcHQuZ2V0T0lEKCks\nIGNvbnRyYWN0b3IuZ2V0RGVwdCgpLmdldE9JRCgpKTsKICAgICAgICB9CiAg\nICAgICAgCiAgICAgICAgcVMgPSAiU0VMRUNUIGMuT0lELCBjIEZST00gQ29u\ndHJhY3RvciBjLCBEZXBhcnRtZW50IGQgd2hlcmUgZC5PSUQgPSBjLmRlcHQu\nT0lEIGFuZCBkLmRlc2NyaXB0aW9uID0gJ0lUJyI7CiAgICAgICAgcSA9IGVt\nLmNyZWF0ZVF1ZXJ5KHFTKTsgICAgICAgICAgICAgCiAgICAgICAgTGlzdDxP\nYmplY3RbXT4gZFJlc3VsdCA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nIGZvciAoT2JqZWN0W10gcmVzdWx0RWxlbWVudCA6IGRSZXN1bHQpIHsKICAg\nICAgICAgICAgTG9uZyBvaWQgPSAoTG9uZylyZXN1bHRFbGVtZW50WzBdOwog\nICAgICAgICAgICBjb250cmFjdG9yID0gKENvbnRyYWN0b3IpcmVzdWx0RWxl\nbWVudFsxXTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShjb250cmFjdG9yLmdl\ndE9JRCgpID09IG9pZCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhkZXB0\nLmdldE9JRCgpLCBjb250cmFjdG9yLmdldERlcHQoKS5nZXRPSUQoKSk7CiAg\nICAgICAgfQogICAgICAgIAogICAgICAgIHFTID0gIlNFTEVDVCBjLCBjLk9J\nRCBGUk9NIERlcGFydG1lbnQgZCwgQ29udHJhY3RvciBjIHdoZXJlIGQuT0lE\nID0gYy5kZXB0Lk9JRCBhbmQgZC5kZXNjcmlwdGlvbiA9ICdJVCciOwogICAg\nICAgIHEgPSBlbS5jcmVhdGVRdWVyeShxUyk7ICAgICAgICAgICAgIAogICAg\nICAgIExpc3Q8T2JqZWN0W10+IGVSZXN1bHQgPSBxLmdldFJlc3VsdExpc3Qo\nKTsKICAgICAgICBmb3IgKE9iamVjdFtdIHJlc3VsdEVsZW1lbnQgOiBlUmVz\ndWx0KSB7CiAgICAgICAgICAgIExvbmcgb2lkID0gKExvbmcpcmVzdWx0RWxl\nbWVudFsxXTsKICAgICAgICAgICAgY29udHJhY3RvciA9IChDb250cmFjdG9y\nKXJlc3VsdEVsZW1lbnRbMF07CiAgICAgICAgICAgIGFzc2VydFRydWUoY29u\ndHJhY3Rvci5nZXRPSUQoKSA9PSBvaWQpOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoZGVwdC5nZXRPSUQoKSwgY29udHJhY3Rvci5nZXREZXB0KCkuZ2V0\nT0lEKCkpOwogICAgICAgIH0KCiAgICAgICAgcVMgPSAiU0VMRUNUIGMuT0lE\nLCBjIEZST00gRGVwYXJ0bWVudCBkLCBDb250cmFjdG9yIGMgd2hlcmUgZC5P\nSUQgPSBjLmRlcHQuT0lEIGFuZCBkLmRlc2NyaXB0aW9uID0gJ0lUJyI7CiAg\nICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHFTKTsgICAgICAgICAgICAgCiAg\nICAgICAgTGlzdDxPYmplY3RbXT4gZlJlc3VsdCA9IHEuZ2V0UmVzdWx0TGlz\ndCgpOwogICAgICAgIGZvciAoT2JqZWN0W10gcmVzdWx0RWxlbWVudCA6IGZS\nZXN1bHQpIHsKICAgICAgICAgICAgTG9uZyBvaWQgPSAoTG9uZylyZXN1bHRF\nbGVtZW50WzBdOwogICAgICAgICAgICBDb250cmFjdG9yIGMgPSAoQ29udHJh\nY3RvcilyZXN1bHRFbGVtZW50WzFdOwogICAgICAgICAgICBhc3NlcnRUcnVl\nKG9pZC5sb25nVmFsdWUoKSA9PSBjLmdldE9JRCgpKTsKICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKGRlcHQuZ2V0T0lEKCksIGMuZ2V0RGVwdCgpLmdldE9J\nRCgpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcVMgPSAiU0VMRUNU\nIGQsYyBGUk9NIERlcGFydG1lbnQgZCwgQ29udHJhY3RvciBjIHdoZXJlIGQu\nT0lEID0gYy5kZXB0Lk9JRCBhbmQgZC5kZXNjcmlwdGlvbiA9ICdJVCcgIiAr\nCiAgICAgICAgICAgICAgICAiIGFuZCBjID0gPzEiOwogICAgICAgIHEgPSBl\nbS5jcmVhdGVRdWVyeShxUyk7CiAgICAgICAgcS5zZXRQYXJhbWV0ZXIoMSwg\nY29udHJhY3Rvcik7CiAgICAgICAgZm9yIChPYmplY3RbXSBhUmVzdWx0OiAo\nTGlzdCA8T2JqZWN0W10+KSBxLmdldFJlc3VsdExpc3QoKSkgewogICAgICAg\nICAgICBTeXN0ZW0ub3V0LnByaW50bG4oKChEZXBhcnRtZW50KWFSZXN1bHRb\nMF0pLmdldE9JRCgpICsgIiwgIiArICgoQ29udHJhY3RvcilhUmVzdWx0WzFd\nKS5nZXRPSUQoKSk7CiAgICAgICAgICAgIGFzc2VydFRydWUoY29udHJhY3Rv\nci5lcXVhbHMoYVJlc3VsdFsxXSkpOwogICAgICAgIH0KICAgICAgICAgICAg\nICAgIAogICAgICAgIHFTID0gIlNFTEVDVCBjLGQgRlJPTSBDb250cmFjdG9y\nIGMsIERlcGFydG1lbnQgZCB3aGVyZSBkLk9JRCA9IGMuZGVwdC5PSUQgYW5k\nIGQuZGVzY3JpcHRpb24gPSAnSVQnICIgKwogICAgICAgICAgICAgICAgIiBh\nbmQgYyA9ID8xIjsKICAgICAgICBxID0gZW0uY3JlYXRlUXVlcnkocVMpOwog\nICAgICAgIHEuc2V0UGFyYW1ldGVyKDEsIGNvbnRyYWN0b3IpOwogICAgICAg\nIGZvciAoT2JqZWN0W10gYVJlc3VsdDogKExpc3QgPE9iamVjdFtdPikgcS5n\nZXRSZXN1bHRMaXN0KCkpIHsKICAgICAgICAgICAgU3lzdGVtLm91dC5wcmlu\ndGxuKCgoQ29udHJhY3RvcilhUmVzdWx0WzBdKS5nZXRPSUQoKSArICIsICIg\nKyAoKERlcGFydG1lbnQpYVJlc3VsdFsxXSkuZ2V0T0lEKCkpOwogICAgICAg\nICAgICBhc3NlcnRUcnVlKGNvbnRyYWN0b3IuZXF1YWxzKGFSZXN1bHRbMF0p\nKTsKICAgICAgICB9CgogICAgICAgIHFTID0gIlNFTEVDVCBwIEZST00gUGVy\nc29uIHAgIjsKICAgICAgICBxID0gZW0uY3JlYXRlUXVlcnkocVMpOwogICAg\nICAgIGZvciAoT2JqZWN0IGFSZXN1bHQ6IChMaXN0PE9iamVjdD4pIHEuZ2V0\nUmVzdWx0TGlzdCgpKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoYVJlc3Vs\ndCBpbnN0YW5jZW9mIENvbnRyYWN0b3IpOwogICAgICAgIH0KCiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KfQoK\n","encoding":"base64"}

