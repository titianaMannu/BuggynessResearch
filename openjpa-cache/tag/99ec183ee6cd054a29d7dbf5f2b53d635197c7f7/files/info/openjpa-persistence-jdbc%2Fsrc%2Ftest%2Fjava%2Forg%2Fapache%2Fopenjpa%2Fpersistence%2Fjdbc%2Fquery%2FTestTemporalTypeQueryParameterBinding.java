{"sha":"7daebdc8f0ef28d52c51efcdf78d82a57d2e8bea","node_id":"MDQ6QmxvYjIwNjM2NDo3ZGFlYmRjOGYwZWYyOGQ1MmM1MWVmY2RmNzhkODJhNTdkMmU4YmVh","size":10131,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7daebdc8f0ef28d52c51efcdf78d82a57d2e8bea","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLnF1ZXJ5\nOwoKaW1wb3J0IGphdmEuc3FsLlRpbWU7CmltcG9ydCBqYXZhLnNxbC5UaW1l\nc3RhbXA7CmltcG9ydCBqYXZhLnV0aWwuQ2FsZW5kYXI7CmltcG9ydCBqYXZh\nLnV0aWwuRGF0ZTsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlN\nYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5UZW1wb3JhbFR5cGU7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkFyZ3VtZW50RXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMu\ncXVlcnkuZG9tYWluLlRpbWVFbnRpdHk7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuamRiYy5xdWVyeS5kb21haW4uVGltZUtlZXBl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0\nLlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3RzIHRoYXQgcXVlcmll\ncyBjYW4gY29udmVydCB0byB0ZW1wb3JhbCB0eXBlcy4KICogQWxzbyB0ZXN0\ncyB0aGF0IHBhcmFtZXRlciB2YWxpZGF0aW9uIGZvciBtaXNtYXRjaCBiZXR3\nZWVuIG5hbWVkIHBhcmFtZXRlcgogKiBhbmQgcG9zaXRpb25hbCBiaW5kaW5n\nIG9yIHZpY2UgdmVyc2EuCiAqICAKICogT3JpZ2luYWxseSByZXBvcnRlZCBp\nbiAKICogPEEgSFJFPSJodHRwOi8vaXNzdWVzLmFwYWNoZS5vcmcvamlyYS9i\ncm93c2UvT1BFTkpQQS0xMTI+T1BFTkpQQS00OTc8L0E+CiAqICAKICogQGF1\ndGhvciBQaW5ha2kgUG9kZGFyCiAqCiAqLwpwdWJsaWMgY2xhc3MgVGVzdFRl\nbXBvcmFsVHlwZVF1ZXJ5UGFyYW1ldGVyQmluZGluZyBleHRlbmRzIFNpbmds\nZUVNRlRlc3RDYXNlIHsKCXByaXZhdGUgc3RhdGljIENhbGVuZGFyIFBBUkFN\nX0NBTEVOREFSID0gQ2FsZW5kYXIuZ2V0SW5zdGFuY2UoKTsKCXByaXZhdGUg\nIHN0YXRpYyBsb25nIFQxID0gUEFSQU1fQ0FMRU5EQVIuZ2V0VGltZUluTWls\nbGlzKCk7Cglwcml2YXRlICBzdGF0aWMgbG9uZyBUMiA9IFQxICsgMjAwMDsg\nCglwcml2YXRlICBzdGF0aWMgbG9uZyBUMyA9IFQxICsgMzAwMDsKCQoJcHJp\ndmF0ZSBzdGF0aWMgRGF0ZSAgICAgVkFMVUVfREFURSAgICAgPSBuZXcgRGF0\nZShUMSk7Cglwcml2YXRlIHN0YXRpYyBUaW1lICAgICBWQUxVRV9USU1FICAg\nICA9IG5ldyBUaW1lKFQyKTsKCXByaXZhdGUgc3RhdGljIFRpbWVzdGFtcCBW\nQUxVRV9UU1RBTVAgICA9IG5ldyBUaW1lc3RhbXAoVDMpOwoJCgkKCXByaXZh\ndGUgc3RhdGljIFN0cmluZyBKUFFMX05BTUVEICA9IAoJCSJTRUxFQ1QgcCBG\nUk9NIFRpbWVLZWVwZXIgcCAiICsgCgkJIldIRVJFIHAuZGF0ZT06ZCBBTkQg\ncC50aW1lPTp0IEFORCBwLnRzdGFtcD06dHMiOwoJcHJpdmF0ZSBzdGF0aWMg\nU3RyaW5nIEpQUUxfUE9TSVRJT05BTCAgPSAKCQkiU0VMRUNUIHAgRlJPTSBU\naW1lS2VlcGVyIHAgIiArIAoJCSJXSEVSRSBwLmRhdGU9PzEgQU5EIHAudGlt\nZT0/MiBBTkQgcC50c3RhbXA9PzMiOwoJCglwcml2YXRlIEVudGl0eU1hbmFn\nZXIgZW07CglAT3ZlcnJpZGUKCXB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CgkJc3VwZXIuc2V0VXAoQ0xFQVJfVEFCTEVTLCBUaW1l\nS2VlcGVyLmNsYXNzLCBUaW1lRW50aXR5LmNsYXNzKTsKCQllbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJCgkJVGltZUtlZXBlciBwYyA9IG5l\ndyBUaW1lS2VlcGVyKCk7CgkJcGMuc2V0RGF0ZShWQUxVRV9EQVRFKTsKCQlw\nYy5zZXRUaW1lKFZBTFVFX1RJTUUpOwoJCXBjLnNldFRzdGFtcChWQUxVRV9U\nU1RBTVApOwoKICAgICAgICBUaW1lRW50aXR5IHRlID0gbmV3IFRpbWVFbnRp\ndHkoKTsKICAgICAgICB0ZS5zZXROYW1lKCJuYW1lMSIpOwogICAgICAgIHRl\nLnNldFZhbHVlKDEpOwogICAgICAgIHRlLnNldENhbDJUaW1lc3RhbXAoUEFS\nQU1fQ0FMRU5EQVIpOwogICAgICAgIHRlLnNldENhbDJUaW1lKFBBUkFNX0NB\nTEVOREFSKTsKICAgICAgICB0ZS5zZXRDYWwyRGF0ZShQQVJBTV9DQUxFTkRB\nUik7CgkJdGUuc2V0VURhdGUyU0RhdGUoVkFMVUVfREFURSk7CgkJdGUuc2V0\nVURhdGUyVGltZShWQUxVRV9EQVRFKTsKCQl0ZS5zZXRVRGF0ZTJUaW1lc3Rh\nbXAoVkFMVUVfREFURSk7CiAgICAgICAgCgkJZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwoJCWVtLnBlcnNpc3QocGMpOwoJCWVtLnBlcnNpc3QodGUp\nOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7Cgl9CgkKCXB1Ymxp\nYyB2b2lkIHRlc3ROYW1lZFBhcmFtZXRlckNvbnZlcnRlZEZyb21DYWxlbmRh\nclZhbHVlKCkgewoJCUNhbGVuZGFyIGMxID0gQ2FsZW5kYXIuZ2V0SW5zdGFu\nY2UoKTsKCQlDYWxlbmRhciBjMiA9IENhbGVuZGFyLmdldEluc3RhbmNlKCk7\nCgkJQ2FsZW5kYXIgYzMgPSBDYWxlbmRhci5nZXRJbnN0YW5jZSgpOwoJCWMx\nLnNldFRpbWVJbk1pbGxpcyhUMSk7CgkJYzIuc2V0VGltZUluTWlsbGlzKFQy\nKTsKCQljMy5zZXRUaW1lSW5NaWxsaXMoVDMpOwoJCQoJCVF1ZXJ5IHEgPSBl\nbS5jcmVhdGVRdWVyeShKUFFMX05BTUVEKTsKCQlxLnNldFBhcmFtZXRlcigi\nZCIsICBjMSwgVGVtcG9yYWxUeXBlLkRBVEUpOwoJCXEuc2V0UGFyYW1ldGVy\nKCJ0IiwgIGMyLCBUZW1wb3JhbFR5cGUuVElNRSk7CgkJcS5zZXRQYXJhbWV0\nZXIoInRzIiwgYzMsIFRlbXBvcmFsVHlwZS5USU1FU1RBTVApOwoJCQoJCWFz\nc2VydEVxdWFscygxLCBxLmdldFJlc3VsdExpc3QoKS5zaXplKCkpOwoJfQoJ\nCglwdWJsaWMgdm9pZCB0ZXN0UG9zaXRpb25hbFBhcmFtZXRlckNvbnZlcnRl\nZEZyb21DYWxlbmRhclZhbHVlKCkgewoJCUNhbGVuZGFyIGMxID0gQ2FsZW5k\nYXIuZ2V0SW5zdGFuY2UoKTsKCQlDYWxlbmRhciBjMiA9IENhbGVuZGFyLmdl\ndEluc3RhbmNlKCk7CgkJQ2FsZW5kYXIgYzMgPSBDYWxlbmRhci5nZXRJbnN0\nYW5jZSgpOwoJCWMxLnNldFRpbWVJbk1pbGxpcyhUMSk7CgkJYzIuc2V0VGlt\nZUluTWlsbGlzKFQyKTsKCQljMy5zZXRUaW1lSW5NaWxsaXMoVDMpOwoJCQoJ\nCVF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShKUFFMX1BPU0lUSU9OQUwpOwoJ\nCXEuc2V0UGFyYW1ldGVyKDEsICBjMSwgVGVtcG9yYWxUeXBlLkRBVEUpOwoJ\nCXEuc2V0UGFyYW1ldGVyKDIsICBjMiwgVGVtcG9yYWxUeXBlLlRJTUUpOwoJ\nCXEuc2V0UGFyYW1ldGVyKDMsICBjMywgVGVtcG9yYWxUeXBlLlRJTUVTVEFN\nUCk7CgkJCgkJYXNzZXJ0RXF1YWxzKDEsIHEuZ2V0UmVzdWx0TGlzdCgpLnNp\nemUoKSk7Cgl9CglwdWJsaWMgdm9pZCB0ZXN0TmFtZWRQYXJhbWV0ZXJDb252\nZXJ0ZWRGcm9tRGF0ZVZhbHVlKCkgewoJCURhdGUgZDEgPSBuZXcgRGF0ZShU\nMSk7CgkJRGF0ZSBkMiA9IG5ldyBEYXRlKFQyKTsKCQlEYXRlIGQzID0gbmV3\nIERhdGUoVDMpOwoJCQoJCVF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShKUFFM\nX05BTUVEKTsKCQlxLnNldFBhcmFtZXRlcigiZCIsICBkMSwgVGVtcG9yYWxU\neXBlLkRBVEUpOwoJCXEuc2V0UGFyYW1ldGVyKCJ0IiwgIGQyLCBUZW1wb3Jh\nbFR5cGUuVElNRSk7CgkJcS5zZXRQYXJhbWV0ZXIoInRzIiwgZDMsIFRlbXBv\ncmFsVHlwZS5USU1FU1RBTVApOwoJCQoJCWFzc2VydEVxdWFscygxLCBxLmdl\ndFJlc3VsdExpc3QoKS5zaXplKCkpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0\nUG9zaXRpb25hbFBhcmFtZXRlckNvbnZlcnRlZEZyb21EYXRlVmFsdWUoKSB7\nCgkJRGF0ZSBkMSA9IG5ldyBEYXRlKFQxKTsKCQlEYXRlIGQyID0gbmV3IERh\ndGUoVDIpOwoJCURhdGUgZDMgPSBuZXcgRGF0ZShUMyk7CgkJCgkJUXVlcnkg\ncSA9IGVtLmNyZWF0ZVF1ZXJ5KEpQUUxfUE9TSVRJT05BTCk7CgkJcS5zZXRQ\nYXJhbWV0ZXIoMSwgIGQxLCBUZW1wb3JhbFR5cGUuREFURSk7CgkJcS5zZXRQ\nYXJhbWV0ZXIoMiwgIGQyLCBUZW1wb3JhbFR5cGUuVElNRSk7CgkJcS5zZXRQ\nYXJhbWV0ZXIoMywgIGQzLCBUZW1wb3JhbFR5cGUuVElNRVNUQU1QKTsKCQkK\nCQlhc3NlcnRFcXVhbHMoMSwgcS5nZXRSZXN1bHRMaXN0KCkuc2l6ZSgpKTsK\nCX0KCQoJCglwdWJsaWMgdm9pZCB0ZXN0TmFtZWRQYXJhbWV0ZXJXaXRoTWlz\nbWF0Y2hlZFZhbHVlKCkgewoJCURhdGUgZDEgPSBuZXcgRGF0ZShUMSk7CgkJ\nRGF0ZSBkMiA9IG5ldyBEYXRlKFQyKTsKCQlEYXRlIGQzID0gbmV3IERhdGUo\nVDMpOwoJCQoJCVF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShKUFFMX05BTUVE\nKTsKCQlxLnNldFBhcmFtZXRlcigiZCIsICBkMSwgVGVtcG9yYWxUeXBlLlRJ\nTUUpOwoJCXEuc2V0UGFyYW1ldGVyKCJ0cyIsICBkMiwgVGVtcG9yYWxUeXBl\nLlRJTUVTVEFNUCk7CgkJCgkJdHJ5IHsKCSAgICAgICAgcS5zZXRQYXJhbWV0\nZXIoInQiLCAgZDMsIFRlbXBvcmFsVHlwZS5EQVRFKTsKCQkJZmFpbCgiRXhw\nZWNldGVkICIgKyBBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5nZXROYW1lKCkp\nOwoJCX0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBleCkgewoJ\nCQkvLyBnb29kCgkJfQoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0UG9zaXRpb25h\nbFBhcmFtZXRlcldpdGhNaXNtYXRjaGVkVmFsdWUoKSB7CgkJRGF0ZSBkMSA9\nIG5ldyBEYXRlKFQxKTsKCQlEYXRlIGQyID0gbmV3IERhdGUoVDIpOwoJCURh\ndGUgZDMgPSBuZXcgRGF0ZShUMyk7CgkJCgkJUXVlcnkgcSA9IGVtLmNyZWF0\nZVF1ZXJ5KEpQUUxfUE9TSVRJT05BTCk7CgkJcS5zZXRQYXJhbWV0ZXIoMSwg\nIGQxLCBUZW1wb3JhbFR5cGUuVElNRSk7CgkJCgkJdHJ5IHsKCSAgICAgICAg\ncS5zZXRQYXJhbWV0ZXIoMiwgIGQyLCBUZW1wb3JhbFR5cGUuVElNRVNUQU1Q\nKTsKCQkJZmFpbCgiRXhwZWNldGVkICIgKyBBcmd1bWVudEV4Y2VwdGlvbi5j\nbGFzcy5nZXROYW1lKCkpOwoJCX0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbiBleCkgewoJCSAgICAvLyBleHBlY3RlZC4KCQl9CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgcS5zZXRQYXJhbWV0ZXIoMywgIGQzLCBUZW1w\nb3JhbFR5cGUuREFURSk7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjZXRlZCAi\nICsgQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuZ2V0TmFtZSgpKTsKICAgICAg\nICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZXgpIHsKICAg\nICAgICAgICAgLy8gZXhwZWN0ZWQuCiAgICAgICAgfQoJfQoJCiAgICBwdWJs\naWMgdm9pZCB0ZXN0VGVtcG9yYWxUeXBlKCkgewogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOyAKICAgICAg\nICBDYWxlbmRhciBlbmRUaW1lID0gUEFSQU1fQ0FMRU5EQVI7CiAgICAgICAg\nQ2FsZW5kYXIgc3RhcnRUaW1lID0gUEFSQU1fQ0FMRU5EQVI7CiAgICAgICAg\nc3RhcnRUaW1lLmFkZCgxNCwgLTQpOwogICAgICAgIAogICAgICAgIC8vKDEp\nIENhbGVuZGFyIHRvIFRpbWVzdGFtcAogICAgICAgIFN0cmluZyBqcHFsID0g\nIlNFTEVDVCBDT1VOVChhKSBGUk9NIFRpbWVFbnRpdHkgYSBXSEVSRSBhLmNh\nbDJUaW1lc3RhbXAgQkVUV0VFTiA/MSBBTkQgPzIiOwogICAgICAgIFF1ZXJ5\nIHEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBhc3NlcnRTZXRU\nZW1wb3JhbFBhcmFtZXRlcihxLCAxLCBzdGFydFRpbWUsIFRlbXBvcmFsVHlw\nZS5USU1FU1RBTVApOwogICAgICAgIGFzc2VydFNldFRlbXBvcmFsUGFyYW1l\ndGVyKHEsIDIsIGVuZFRpbWUsIFRlbXBvcmFsVHlwZS5USU1FU1RBTVApOwog\nICAgICAgIGFzc2VydEVxdWFscygxLCBxLmdldFJlc3VsdExpc3QoKS5zaXpl\nKCkpOwogICAgICAgICAKICAgICAgICAvLygyKSBDYWxlbmRhciB0byBUaW1l\nCiAgICAgICAganBxbCA9ICJTRUxFQ1QgQ09VTlQoYSkgRlJPTSBUaW1lRW50\naXR5IGEgV0hFUkUgYS5jYWwyVGltZSBCRVRXRUVOID8xIEFORCA/MiI7CiAg\nICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAgIGFzc2Vy\ndFNldFRlbXBvcmFsUGFyYW1ldGVyKHEsIDEsIHN0YXJ0VGltZSwgVGVtcG9y\nYWxUeXBlLlRJTUUpOwogICAgICAgIGFzc2VydFNldFRlbXBvcmFsUGFyYW1l\ndGVyKHEsIDIsIGVuZFRpbWUsIFRlbXBvcmFsVHlwZS5USU1FKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgcS5nZXRSZXN1bHRMaXN0KCkuc2l6ZSgpKTsK\nICAgICAgICAKICAgICAgICAvLygzKUNhbGVuZGFyIHRvIERhdGUKICAgICAg\nICBqcHFsID0gIlNFTEVDVCBDT1VOVChhKSBGUk9NIFRpbWVFbnRpdHkgYSBX\nSEVSRSBhLmNhbDJEYXRlIEJFVFdFRU4gPzEgQU5EID8yIjsKICAgICAgICBx\nID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgYXNzZXJ0U2V0VGVt\ncG9yYWxQYXJhbWV0ZXIocSwgMSwgc3RhcnRUaW1lLCBUZW1wb3JhbFR5cGUu\nREFURSk7CiAgICAgICAgYXNzZXJ0U2V0VGVtcG9yYWxQYXJhbWV0ZXIocSwg\nMiwgZW5kVGltZSwgVGVtcG9yYWxUeXBlLkRBVEUpOwogICAgICAgIHEuc2V0\nUGFyYW1ldGVyKDEsIHN0YXJ0VGltZSwgVGVtcG9yYWxUeXBlLkRBVEUpOwog\nICAgICAgIHEuc2V0UGFyYW1ldGVyKDIsIGVuZFRpbWUsIFRlbXBvcmFsVHlw\nZS5EQVRFKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcS5nZXRSZXN1bHRM\naXN0KCkuc2l6ZSgpKTsKIAogICAgICAgIC8vKDQpRGF0ZSB0byBUaW1lc3Rh\nbXAKICAgICAgICBqYXZhLnV0aWwuRGF0ZSBlbmREYXRlID0gVkFMVUVfREFU\nRTsKICAgICAgICBqYXZhLnV0aWwuRGF0ZSBzdGFydERhdGUgPSBuZXcgRGF0\nZShUMSAtIDEwMDApOwogICAgICAgIGpwcWwgPSAiU0VMRUNUIENPVU5UKGEp\nIEZST00gVGltZUVudGl0eSBhIFdIRVJFIGEudWRhdGUyVGltZXN0YW1wIEJF\nVFdFRU4gPzEgQU5EID8yIjsKICAgICAgICBxID0gZW0uY3JlYXRlUXVlcnko\nanBxbCk7CiAgICAgICAgYXNzZXJ0U2V0VGVtcG9yYWxQYXJhbWV0ZXIocSwg\nMSwgc3RhcnREYXRlLCBUZW1wb3JhbFR5cGUuVElNRVNUQU1QKTsKICAgICAg\nICBhc3NlcnRTZXRUZW1wb3JhbFBhcmFtZXRlcihxLCAyLCBlbmREYXRlLCBU\nZW1wb3JhbFR5cGUuVElNRVNUQU1QKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgcS5nZXRSZXN1bHRMaXN0KCkuc2l6ZSgpKTsKICAgICAgICAKICAgICAg\nICAvLyg1KSBEYXRlIHRvIFRpbWUKICAgICAgICBqcHFsID0gIlNFTEVDVCBD\nT1VOVChhKSBGUk9NIFRpbWVFbnRpdHkgYSBXSEVSRSBhLnVkYXRlMlRpbWUg\nQkVUV0VFTiA/MSBBTkQgPzIiOwogICAgICAgIHEgPSBlbS5jcmVhdGVRdWVy\neShqcHFsKTsKICAgICAgICBhc3NlcnRTZXRUZW1wb3JhbFBhcmFtZXRlcihx\nLCAxLCBzdGFydERhdGUsIFRlbXBvcmFsVHlwZS5USU1FKTsKICAgICAgICBh\nc3NlcnRTZXRUZW1wb3JhbFBhcmFtZXRlcihxLCAyLCBlbmREYXRlLCBUZW1w\nb3JhbFR5cGUuVElNRSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHEuZ2V0\nUmVzdWx0TGlzdCgpLnNpemUoKSk7CiAgICAgICAgCiAgICAgICAgLy8oNikg\nRGF0ZSB0byBEYXRlCiAgICAgICAganBxbCA9ICJTRUxFQ1QgQ09VTlQoYSkg\nRlJPTSBUaW1lRW50aXR5IGEgV0hFUkUgYS51ZGF0ZTJTRGF0ZSBCRVRXRUVO\nID8xIEFORCA/MiI7CiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwp\nOwogICAgICAgIGFzc2VydFNldFRlbXBvcmFsUGFyYW1ldGVyKHEsIDEsIHN0\nYXJ0RGF0ZSwgVGVtcG9yYWxUeXBlLkRBVEUpOwogICAgICAgIGFzc2VydFNl\ndFRlbXBvcmFsUGFyYW1ldGVyKHEsIDIsIGVuZERhdGUsIFRlbXBvcmFsVHlw\nZS5EQVRFKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcS5nZXRSZXN1bHRM\naXN0KCkuc2l6ZSgpKTsKICAgIH0KICAgIAoKICAgIHZvaWQgdmVyaWZ5UGFy\nYW1zKFN0cmluZyBqcHFsLCBDbGFzczw/IGV4dGVuZHMgRXhjZXB0aW9uPiBl\ncnJvciwKICAgICAgICBPYmplY3QuLi4gcGFyYW1zKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoJCVF1ZXJ5IHF1\nZXJ5ID0gZW0uY3JlYXRlTmF0aXZlUXVlcnkoanBxbCk7CgkJZm9yIChpbnQg\naT0wOyBwYXJhbXMgIT0gbnVsbCAmJiBpPHBhcmFtcy5sZW5ndGg7IGk9KzIp\nIHsKCQkJdHJ5IHsKCQkJCWlmIChwYXJhbXNbaV0gaW5zdGFuY2VvZiBOdW1i\nZXIpIHsKICAgICAgICAgICAgICAgICAgICBxdWVyeS5zZXRQYXJhbWV0ZXIo\nKChOdW1iZXIpIHBhcmFtc1tpXSkuaW50VmFsdWUoKSwKICAgICAgICAgICAg\nICAgICAgICAgICAgcGFyYW1zW2kgKyAxXSk7CiAgICAgICAgICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHF1ZXJ5LnNldFBhcmFtZXRl\ncihwYXJhbXNbaV0udG9TdHJpbmcoKSwgcGFyYW1zW2krMV0pOwoJCQkJfQoJ\nCQkJaWYgKGVycm9yICE9IG51bGwpCgkJCQkJZmFpbCgiRXhwZWN0ZWQgIiAr\nIGVycm9yLmdldE5hbWUoKSk7CgkJCX0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nCgkJCQlpZiAoIWVycm9yLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygp\nKSkgewoJCQkJICAgIC8vIGxldCB0aGUgdGVzdCBoYXJuZXNzIGhhbmRsZSB0\naGUgZXhjZXB0aW9uCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1\nbnRpbWVFeGNlcHRpb24oIkFuIHVuZXhwZWN0ZWQgZXhjZXB0aW9uICIgKwog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9jY3VycmVkIHNlZSBpbml0\nQ2F1c2UgZm9yIGRldGFpbHMiLCBlKTsKCQkJCX0KCQkJfSAKCQl9CgkJZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCX0KICAgIAogICAgdm9pZCBh\nc3NlcnRTZXRUZW1wb3JhbFBhcmFtZXRlcihRdWVyeSBxLCBpbnQgcG9zLCBE\nYXRlIHYsIFRlbXBvcmFsVHlwZSB0ZW1wb3JhbFR5cGUpIHsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBxLnNldFBhcmFtZXRlcihwb3MsIHYsIHRlbXBv\ncmFsVHlwZSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgZmFpbCgiRmFpbCBpbiBzZXR0aW5nIHBvc2l0aW9uYWwgcGFy\nYW1ldGVyIFsiICsgcG9zICsgIl0gdG8gYSB2YWx1ZSBvZiAiICsgdik7CiAg\nICAgICAgfQogICAgfQoKICAgIHZvaWQgYXNzZXJ0U2V0VGVtcG9yYWxQYXJh\nbWV0ZXIoUXVlcnkgcSwgaW50IHBvcywgQ2FsZW5kYXIgdiwgVGVtcG9yYWxU\neXBlIHRlbXBvcmFsVHlwZSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIHEuc2V0UGFyYW1ldGVyKHBvcywgdiwgdGVtcG9yYWxUeXBlKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBmYWlsKCJG\nYWlsIGluIHNldHRpbmcgcG9zaXRpb25hbCBwYXJhbWV0ZXIgWyIgKyBwb3Mg\nKyAiXSB0byBhIHZhbHVlIG9mICIgKyB2KTsKICAgICAgICB9CiAgICB9Cgog\nICAgCn0K\n","encoding":"base64"}

