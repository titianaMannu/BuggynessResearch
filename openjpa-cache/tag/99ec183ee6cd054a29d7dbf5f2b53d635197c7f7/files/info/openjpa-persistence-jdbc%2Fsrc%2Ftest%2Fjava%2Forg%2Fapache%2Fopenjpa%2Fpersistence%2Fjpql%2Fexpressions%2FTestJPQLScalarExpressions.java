{"sha":"ee2641a75e9078e256ca533e243c0d8f2ca182aa","node_id":"MDQ6QmxvYjIwNjM2NDplZTI2NDFhNzVlOTA3OGUyNTZjYTUzM2UyNDNjMGQ4ZjJjYTE4MmFh","size":15905,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ee2641a75e9078e256ca533e243c0d8f2ca182aa","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5l\neHByZXNzaW9uczsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi5hcHBzLio7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLnV0aWxz\nLkFic3RyYWN0VGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdEpQUUxTY2Fs\nYXJFeHByZXNzaW9ucyBleHRlbmRzIEFic3RyYWN0VGVzdENhc2UgewoKICAg\nIHByaXZhdGUgaW50IHVzZXJpZDEsIHVzZXJpZDIsIHVzZXJpZDMsIHVzZXJp\nZDQsIHVzZXJpZDUsIHVzZXJpZDY7CgogICAgcHVibGljIFRlc3RKUFFMU2Nh\nbGFyRXhwcmVzc2lvbnMoU3RyaW5nIG5hbWUpIHsKICAgICAgICBzdXBlcihu\nYW1lLCAianBxbGNsYXVzZXNjYWN0dXNhcHAiKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBkZWxldGVBbGwoQ29tcFVzZXIu\nY2xhc3MpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50\naXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgoZW0pOwoKICAgICAgICBB\nZGRyZXNzW10gYWRkID0gbmV3IEFkZHJlc3NbXXsKICAgICAgICAgICAgbmV3\nIEFkZHJlc3MoIjQzIFNhbnNvbWUiLCAiU0YiLCAiVW5pdGVkLUtpbmdkb20i\nLCAiOTQxMDQiKSwKICAgICAgICAgICAgbmV3IEFkZHJlc3MoIjI0IE1pbmsi\nLCAiQU5USU9DSCIsICJVU0EiLCAiOTQ1MTMiKSwKICAgICAgICAgICAgbmV3\nIEFkZHJlc3MoIjIzIE9nYmV0ZSIsICJDb2FsQ2FtcCIsICJOSUdFUklBIiwg\nIjAwMDAwIiksCiAgICAgICAgICAgIG5ldyBBZGRyZXNzKCIxMCBXaWxzaGly\nZSIsICJXb3JjZXN0ZXIiLCAiQ0FOQURBIiwgIjgwMDgwIiksCiAgICAgICAg\nICAgIG5ldyBBZGRyZXNzKCIyMyBCZWxsZmxvd2VyIiwgIk9ndWkiLCBudWxs\nLCAiMDIwMDAiKSwKICAgICAgICAgICAgbmV3IEFkZHJlc3MoIjIyIE1vbnRn\nb21lcnkiLCAiU0YiLCBudWxsLCAiNTAwNTQiKSB9OwoKICAgICAgICBDb21w\nVXNlciB1c2VyMSA9IGNyZWF0ZVVzZXIoIlNlZXRoYSIsICJNQUMiLCBhZGRb\nMF0sIDM2LCB0cnVlKTsKICAgICAgICBDb21wVXNlciB1c2VyMiA9IGNyZWF0\nZVVzZXIoIlNoYW5ub24gIiwgIlBDIiwgYWRkWzFdLCAzNiwgZmFsc2UpOwog\nICAgICAgIENvbXBVc2VyIHVzZXIzID0gY3JlYXRlVXNlcigiVWdvIiwgIlBD\nIiwgYWRkWzJdLCAxOSwgdHJ1ZSk7CiAgICAgICAgQ29tcFVzZXIgdXNlcjQg\nPSBjcmVhdGVVc2VyKCJKYWNvYiIsICJMSU5VWCIsIGFkZFszXSwgMTAsIHRy\ndWUpOwogICAgICAgIENvbXBVc2VyIHVzZXI1ID0gY3JlYXRlVXNlcigiRmFt\nenkiLCAiVU5JWCIsIGFkZFs0XSwgMjksIGZhbHNlKTsKICAgICAgICBDb21w\nVXNlciB1c2VyNiA9IGNyZWF0ZVVzZXIoIlNoYWRlIiwgIlVOSVgiLCBhZGRb\nNV0sIDIzLCBmYWxzZSk7CgogICAgICAgIGVtLnBlcnNpc3QodXNlcjEpOwog\nICAgICAgIHVzZXJpZDEgPSB1c2VyMS5nZXRVc2VyaWQoKTsKICAgICAgICBl\nbS5wZXJzaXN0KHVzZXIyKTsKICAgICAgICB1c2VyaWQyID0gdXNlcjIuZ2V0\nVXNlcmlkKCk7CiAgICAgICAgZW0ucGVyc2lzdCh1c2VyMyk7CiAgICAgICAg\ndXNlcmlkMyA9IHVzZXIzLmdldFVzZXJpZCgpOwogICAgICAgIGVtLnBlcnNp\nc3QodXNlcjQpOwogICAgICAgIHVzZXJpZDQgPSB1c2VyNC5nZXRVc2VyaWQo\nKTsKICAgICAgICBlbS5wZXJzaXN0KHVzZXI1KTsKICAgICAgICB1c2VyaWQ1\nID0gdXNlcjUuZ2V0VXNlcmlkKCk7CiAgICAgICAgZW0ucGVyc2lzdCh1c2Vy\nNik7CiAgICAgICAgdXNlcmlkNiA9IHVzZXI2LmdldFVzZXJpZCgpOwoKICAg\nICAgICBlbmRUeChlbSk7CiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAg\nIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIHZv\naWQgdGVzdE1hdGhBbmRBZ2dyZWdhdGUoKSB7CiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgU3Ry\naW5nIHF1ZXJ5W10gPSB7CiAgICAgICAgICAgICJTRUxFQ1QgU1VNKGMuYWdl\nKSArIFNVTShjLnVzZXJpZCkgRlJPTSBDb21wVXNlciBjIiwKICAgICAgICAg\nICAgIlNFTEVDVCBTVU0oYy5hZ2UpICogU1VNKGMudXNlcmlkKSBGUk9NIENv\nbXBVc2VyIGMiLAogICAgICAgICAgICAiU0VMRUNUIFNVTShjLmFnZSkgLSBN\nSU4oYy51c2VyaWQpICsgTUFYKGMudXNlcmlkKSBGUk9NIENvbXBVc2VyIGMi\nLAogICAgICAgIH07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVy\neS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBMaXN0PExvbmc+IHJzID0g\nZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0pLmdldFJlc3VsdExpc3QoKTsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZShycy5nZXQoMCkgPiAwKTsKICAgICAgICB9\nCiAgICAgICAgU3RyaW5nIHF1ZXJ5MltdID0gewogICAgICAgICAgICAgICAg\nIlNFTEVDVCBTVU0oYy5hZ2UpICsgU1VNKGMudXNlcmlkKSwgTUlOKGMuYWdl\nKSArIE1BWChjLmFnZSkgRlJPTSBDb21wVXNlciBjIiwKICAgICAgICAgICAg\nICAgICJTRUxFQ1QgU1VNKGMuYWdlKSAqIFNVTShjLnVzZXJpZCksIEFWRyhj\nLmFnZSkgRlJPTSBDb21wVXNlciBjIiwKICAgICAgICAgICAgICAgICJTRUxF\nQ1QgU1VNKGMuYWdlKSAtIE1JTihjLnVzZXJpZCkgKyBNQVgoYy51c2VyaWQp\nLCBBVkcoYy5hZ2UpLzEwIEZST00gQ29tcFVzZXIgYyIsCiAgICAgICAgfTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Mi5sZW5ndGg7IGkr\nKykgewogICAgICAgICAgICBMaXN0PE9iamVjdFtdPiBycyA9IChMaXN0PE9i\namVjdFtdPillbS5jcmVhdGVRdWVyeShxdWVyeTJbaV0pLmdldFJlc3VsdExp\nc3QoKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbChycy5nZXQoMClbMV0p\nOwogICAgICAgIH0KICAgICAgICBlbmRFbShlbSk7CiAgICB9CgogICAgQFN1\ncHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBwdWJsaWMgdm9pZCB0\nZXN0Q29hbGVzY2VFeHByZXNzaW9ucygpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFy\ndFR4KGVtKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVDVCBlLm5h\nbWUsICIgKwogICAgICAgICAgICAiQ09BTEVTQ0UgKGUuYWRkcmVzcy5jb3Vu\ndHJ5LCAnVW5rbm93bicpIiArCiAgICAgICAgICAgICIgRlJPTSBDb21wVXNl\nciBlIE9SREVSIEJZIGUubmFtZSBERVNDIjsKICAgICAgICBMaXN0IHJzID0g\nZW0uY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICBPYmplY3RbXSByZXN1bHQgPSAoT2JqZWN0W10pIHJzLmdldChycy5zaXpl\nKCktMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgbmFtZSBpcyBub3Qg\nZmFtenkiLCAiRmFtenkiLCByZXN1bHRbMF0pOyAgICAgICAgCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJVbmtub3duIiwgcmVzdWx0WzFdKTsKCiAgICAgICAg\nZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBAU3Vw\ncHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikKICAgIHB1YmxpYyB2b2lkIHRl\nc3ROdWxsSWZFeHByZXNzaW9ucygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4\nKGVtKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVDVCBlLm5hbWUs\nICIgKwogICAgICAgICAgICAiTlVMTElGIChlLmFkZHJlc3MuY291bnRyeSwg\nJ1VTQScpIiArCiAgICAgICAgICAgICIgRlJPTSBDb21wVXNlciBlIE9SREVS\nIEJZIGUubmFtZSBERVNDIjsKCiAgICAgICAgTGlzdCBycyA9IGVtLmNyZWF0\nZVF1ZXJ5KHF1ZXJ5KS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgT2JqZWN0\nW10gcmVzdWx0ID0gKE9iamVjdFtdKSBycy5nZXQoMSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJ0aGUgbmFtZSBpcyBub3Qgc2hhbm5vbiAiLCAiU2hhbm5v\nbiAiLCByZXN1bHRbMF0pOwogICAgICAgIGFzc2VydE51bGwoImlzIG5vdCBu\ndWxsIiwgcmVzdWx0WzFdKTsKICAgICAgICAKICAgICAgICBlbmRUeChlbSk7\nCiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5p\nbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIHZvaWQgdGVzdFNpbXBsZUNh\nc2VFeHByZXNzaW9ucygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgQ29tcFVzZXIgdXNl\nciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDEpOwogICAgICAg\nIGFzc2VydE5vdE51bGwoInVzZXIgaXMgbnVsbCIsIHVzZXIpOwogICAgICAg\nIGFzc2VydEVxdWFscygidGhlIG5hbWUgaXMgbm90IHNlZXRoYSIsICJTZWV0\naGEiLCB1c2VyLmdldE5hbWUoKSk7CiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0g\nIlNFTEVDVCBlLm5hbWUsIGUuYWdlKzEgYXMgY2FnZSwgIiArCiAgICAgICAg\nICAgICJDQVNFIGUuYWRkcmVzcy5jb3VudHJ5IFdIRU4gJ1VTQSciICsKICAg\nICAgICAgICAgIiBUSEVOICd1cycgIiArCiAgICAgICAgICAgICIgRUxTRSAn\nbm9uLXVzJyAgRU5EIGFzIGQyLCIgKwogICAgICAgICAgICAiIGUuYWRkcmVz\ncy5jb3VudHJ5ICIgKwogICAgICAgICAgICAiIEZST00gQ29tcFVzZXIgZSBP\nUkRFUiBCWSBjYWdlLCBkMiBERVNDIjsKICAgICAgICBMaXN0IHJzID0gZW0u\nY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBP\nYmplY3RbXSByZXN1bHQgPSAoT2JqZWN0W10pIHJzLmdldChycy5zaXplKCkt\nMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgbmFtZSBpcyBub3Qgc2Vl\ndGhhIiwgIlNlZXRoYSIsIHJlc3VsdFswXSk7CgogICAgICAgIFN0cmluZyBx\ndWVyeTIgPSAiU0VMRUNUIGUubmFtZSwgZS5hZ2UrMSBhcyBjYWdlLCAiICsK\nICAgICAgICAgICAgIkNBU0UgZS5hZGRyZXNzLmNvdW50cnkgV0hFTiAnVVNB\nJyIgKwogICAgICAgICAgICAiIFRIRU4gJ1VuaXRlZC1TdGF0ZXMnICIgKwog\nICAgICAgICAgICAiIEVMU0UgZS5hZGRyZXNzLmNvdW50cnkgIEVORCBhcyBk\nMiwiICsKICAgICAgICAgICAgIiBlLmFkZHJlc3MuY291bnRyeSAiICsKICAg\nICAgICAgICAgIiBGUk9NIENvbXBVc2VyIGUgT1JERVIgQlkgY2FnZSwgZDIg\nREVTQyI7CiAgICAgICAgTGlzdCByczIgPSBlbS5jcmVhdGVRdWVyeShxdWVy\neTIpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBPYmplY3RbXSByZXN1bHQy\nID0gKE9iamVjdFtdKSByczIuZ2V0KHJzMi5zaXplKCktMSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJ0aGUgbmFtZSBpcyBub3Qgc2VldGhhIiwgIlNlZXRo\nYSIsIHJlc3VsdDJbMF0pOwoKICAgICAgICBTdHJpbmcgcXVlcnkzID0gIlNF\nTEVDVCBlLm5hbWUsICIgKwogICAgICAgICAgICAiIENBU0UgVFlQRShlKSBX\nSEVOIEZlbWFsZVVzZXIgVEhFTiAnRmVtYWxlJyAiICsKICAgICAgICAgICAg\nIiBFTFNFICdNYWxlJyAiICsKICAgICAgICAgICAgIiBFTkQgYXMgcmVzdWx0\nIiArCiAgICAgICAgICAgICIgRlJPTSBDb21wVXNlciBlIFdIRVJFIGUubmFt\nZSBsaWtlICdTJScgIiArCiAgICAgICAgICAgICIgT1JERVIgQlkgZS5uYW1l\nIERFU0MiOwogICAgICAgIExpc3QgcnMzID0gZW0uY3JlYXRlUXVlcnkocXVl\ncnkzKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgT2JqZWN0W10gcmVzdWx0\nMyA9IChPYmplY3RbXSkgcnMzLmdldCgwKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoInRoZSByZXN1bHQgaXMgbm90IGZlbWFsZSIsICJGZW1hbGUiLCByZXN1\nbHQzWzFdKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInRoZSBuYW1lIGlzIG5v\ndCBzaGFubm9uIiwgIlNoYW5ub24gIiwgcmVzdWx0M1swXSk7CiAgICAgICAg\ncmVzdWx0MyA9IChPYmplY3RbXSkgcnMzLmdldCgyKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoInRoZSByZXN1bHQgaXMgbm90IG1hbGUiLCAiTWFsZSIsIHJl\nc3VsdDNbMV0pOwogICAgICAgIGFzc2VydEVxdWFscygidGhlIG5hbWUgaXMg\nbm90IHNlZXRoYSIsICJTZWV0aGEiLCByZXN1bHQzWzBdKTsKCiAgICAgICAg\nLy8gYm9vbGVhbiBsaXRlcmFsIGluIGNhc2UgZXhwcmVzc2lvbgogICAgICAg\nIHF1ZXJ5ID0gIlNFTEVDVCBlLm5hbWUsICIgKwogICAgICAgICAgICAiQ0FT\nRSBlLmFkZHJlc3MuY291bnRyeSBXSEVOICdVU0EnIiArCiAgICAgICAgICAg\nICIgVEhFTiB0cnVlICIgKwogICAgICAgICAgICAiIEVMU0UgZmFsc2UgIEVO\nRCBhcyBiLCIgKwogICAgICAgICAgICAiIGUuYWRkcmVzcy5jb3VudHJ5ICIg\nKwogICAgICAgICAgICAiIEZST00gQ29tcFVzZXIgZSBvcmRlciBieSBiIjsK\nICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5nZXRSZXN1bHRM\naXN0KCk7CgogICAgICAgIHJlc3VsdCA9IChPYmplY3RbXSkgcnMuZ2V0KHJz\nLnNpemUoKS0xKTsKICAgICAgICBhc3NlcnRFcXVhbHMocmVzdWx0WzFdLCAx\nKTsKCiAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgU3RyaW5nIHVwZGF0\nZSA9ICJ1cGRhdGUgQ29tcFVzZXIgYyBzZXQgYy5jcmVkaXRSYXRpbmcgPSAi\nICsKICAgICAgICAgICAgIiBDQVNFIGMuYWdlIFdIRU4gMzUgVEhFTiAiICsK\nICAgICAgICAgICAgIm9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5j\nb21tb24uYXBwcy4iICsKICAgICAgICAgICAgIkNvbXBVc2VyJENyZWRpdFJh\ndGluZy5QT09SIiArIAogICAgICAgICAgICAiIFdIRU4gMTEgVEhFTiAiICsg\nCiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nY29tbW9uLmFwcHMuIiArIAogICAgICAgICAgICAiQ29tcFVzZXIkQ3JlZGl0\nUmF0aW5nLkdPT0QiICsKICAgICAgICAgICAgIiBFTFNFICIgKyAKICAgICAg\nICAgICAgIm9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24u\nYXBwcy4iICsgCiAgICAgICAgICAgICJDb21wVXNlciRDcmVkaXRSYXRpbmcu\nRVhDRUxMRU5UIiArCiAgICAgICAgICAgICIgRU5EICI7CiAgICAgICAgaW50\nIHVwZGF0ZUNvdW50ID0gZW0uY3JlYXRlUXVlcnkodXBkYXRlKS5leGVjdXRl\nVXBkYXRlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgcmVzdWx0IGlz\nIG5vdCA2IiwgNiwgdXBkYXRlQ291bnQpOwoKICAgICAgICAvKgogICAgICAg\nIC8vRGVyYnkgZmFpbHMgYnV0IERCMiB3b3JrcyAKICAgICAgICBTdHJpbmcg\ndXBkYXRlMiA9ICJ1cGRhdGUgQ29tcFVzZXIgYyBzZXQgYy5jcmVkaXRSYXRp\nbmcgPSAiICsKICAgICAgICAgICAgIiAoc2VsZWN0ICIgKwogICAgICAgICAg\nICAiIENBU0UgYzEuYWdlIFdIRU4gMTAgVEhFTiAiICsgCiAgICAgICAgICAg\nICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFwcHMu\nIiArIAogICAgICAgICAgICAgIENvbXBVc2VyJENyZWRpdFJhdGluZy5QT09S\nIiArIAogICAgICAgICAgICAiIFdIRU4gMTkgVEhFTiAiICsgCiAgICAgICAg\nICAgICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFw\ncHMuIiArIAogICAgICAgICAgICAiQ29tcFVzZXIkQ3JlZGl0UmF0aW5nLkdP\nT0QgIiArCiAgICAgICAgICAgICIgRUxTRSAiICsgCiAgICAgICAgICAgICJv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFwcHMuIiAr\nIAogICAgICAgICAgICBDb21wVXNlciRDcmVkaXRSYXRpbmcuRVhDRUxMRU5U\nICIgKwogICAgICAgICAgICAiIEVORCAiICsKICAgICAgICAgICAgIiBmcm9t\nIENvbXBVc2VyIGMxIiArCiAgICAgICAgICAgICIgd2hlcmUgYy51c2VyaWQg\nPSBjMS51c2VyaWQpIjsKICAgICAgICB1cGRhdGVDb3VudCA9IGVtLmNyZWF0\nZVF1ZXJ5KHVwZGF0ZTIpLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoInRoZSByZXN1bHQgaXMgbm90IDYiLCA2LCB1cGRhdGVDb3Vu\ndCk7CiAgICAgICAgKi8KICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgZW5k\nRW0oZW0pOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNr\nZWQiKQogICAgcHVibGljIHZvaWQgdGVzdEdlbmVyYWxDYXNlRXhwcmVzc2lv\nbnMoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7CgogICAgICAgIENv\nbXBVc2VyIHVzZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNzLCB1c2VyaWQx\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKCJ1c2VyIGlzIG51bGwiLCB1c2Vy\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInRoZSBuYW1lIGlzIG5vdCBzZWV0\naGEiLCAiU2VldGhhIiwgdXNlci5nZXROYW1lKCkpOwoKICAgICAgICBTdHJp\nbmcgcXVlcnkgPSAiU0VMRUNUIGUubmFtZSwgZS5hZ2UsICIgKwogICAgICAg\nICAgICAiIENBU0UgV0hFTiBlLmFnZSA+IDMwIFRIRU4gZS5hZ2UgLSAxICIg\nKwogICAgICAgICAgICAiIFdIRU4gZS5hZ2UgPCAxNSBUSEVOIGUuYWdlICsg\nMSAiICsKICAgICAgICAgICAgIiBFTFNFIGUuYWdlICsgMCAiICsKICAgICAg\nICAgICAgIiBFTkQgQVMgY2FnZSAiICsKICAgICAgICAgICAgIiBGUk9NIENv\nbXBVc2VyIGUgT1JERVIgQlkgY2FnZSI7CiAgICAgICAgTGlzdCBycyA9IGVt\nLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAg\nIFN0cmluZyB1cGRhdGUgPSAiVVBEQVRFIENvbXBVc2VyIGUgU0VUIGUuYWdl\nID0gIiArCiAgICAgICAgICAgICJDQVNFIFdIRU4gZS5hZ2UgPiAzMCBUSEVO\nIGUuYWdlIC0gMSAiICsKICAgICAgICAgICAgIldIRU4gZS5hZ2UgPCAxNSBU\nSEVOIGUuYWdlICsgMSAiICsKICAgICAgICAgICAgIkVMU0UgZS5hZ2UgKyAw\nICIgKwogICAgICAgICAgICAiRU5EIjsKCiAgICAgICAgaW50IHJlc3VsdCA9\nIGVtLmNyZWF0ZVF1ZXJ5KHVwZGF0ZSkuZXhlY3V0ZVVwZGF0ZSgpOwogICAg\nICAgIGFzc2VydEVxdWFscygidGhlIHJlc3VsdCBpcyBub3QgNiIsIDYsIHJl\nc3VsdCk7CiAgICAgICAgCiAgICAgICAgU3RyaW5nIHF1ZXJ5MiA9ICJTRUxF\nQ1QgZS5uYW1lLCBlLmFnZSsxIGFzIGNhZ2UsICIgKwogICAgICAgICAgICAi\nQ0FTRSBXSEVOIGUuYWRkcmVzcy5jb3VudHJ5ID0gJ1VTQScgIiArCiAgICAg\nICAgICAgICIgVEhFTiAnVW5pdGVkLVN0YXRlcycgIiArCiAgICAgICAgICAg\nICIgRUxTRSAnTm9uIFVuaXRlZC1TdGF0ZXMnICBFTkQgYXMgZDIsIiArCiAg\nICAgICAgICAgICIgZS5hZGRyZXNzLmNvdW50cnkgIiArCiAgICAgICAgICAg\nICIgRlJPTSBDb21wVXNlciBlIE9SREVSIEJZIGNhZ2UsIGQyIERFU0MiOwog\nICAgICAgIExpc3QgcnMyID0gZW0uY3JlYXRlUXVlcnkocXVlcnkyKS5nZXRS\nZXN1bHRMaXN0KCk7CiAgICAgICAgT2JqZWN0W10gcmVzdWx0MiA9IChPYmpl\nY3RbXSkgcnMyLmdldChyczIuc2l6ZSgpLTEpOwogICAgICAgIGFzc2VydEVx\ndWFscygidGhlIG5hbWUgaXMgbm90IHNlZXRoYSIsICJTZWV0aGEiLCByZXN1\nbHQyWzBdKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInRoZSBjb3VudHJ5IGlz\nIG5vdCAnTm9uIFVuaXRlZC1TdGF0ZXMnIiwgCiAgICAgICAgICAgICJOb24g\nVW5pdGVkLVN0YXRlcyIsIHJlc3VsdDJbMl0pOwogICAgICAgIAogICAgICAg\nIFN0cmluZyBxdWVyeTMgPSAiIHNlbGVjdCBlLm5hbWUsICIgKwogICAgICAg\nICAgICAiQ0FTRSBXSEVOIGUuYWdlID0gMTEgVEhFTiAiICsKICAgICAgICAg\nICAgIm9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24uYXBw\ncy4iICsKICAgICAgICAgICAgIkNvbXBVc2VyJENyZWRpdFJhdGluZy5QT09S\nIiArIAogICAgICAgICAgICAiIFdIRU4gZS5hZ2UgPSAzNSBUSEVOICIgKyAK\nICAgICAgICAgICAgIm9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5j\nb21tb24uYXBwcy4iICsKICAgICAgICAgICAgIkNvbXBVc2VyJENyZWRpdFJh\ndGluZy5HT09EIiArCiAgICAgICAgICAgICIgRUxTRSAiICsgCiAgICAgICAg\nICAgICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFw\ncHMuIiArCiAgICAgICAgICAgICJDb21wVXNlciRDcmVkaXRSYXRpbmcuRVhD\nRUxMRU5UIiArCiAgICAgICAgICAgICIgRU5EIEZST00gQ29tcFVzZXIgZSBP\nUkRFUiBCWSBlLmFnZSI7CiAgICAgICAgTGlzdCByczMgPSBlbS5jcmVhdGVR\ndWVyeShxdWVyeTMpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBPYmplY3Rb\nXSByZXN1bHQzID0gKE9iamVjdFtdKSByczMuZ2V0KDApOwogICAgICAgIGFz\nc2VydEVxdWFscygidGhlIG5hbWUgaXMgbm90IEphY29iIiwgIkphY29iIiwg\ncmVzdWx0M1swXSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgY3JlZGl0\nIHJhdGluZyBpcyBub3QgJ1BPT1InIiwgIlBPT1IiLCByZXN1bHQzWzFdKTsK\nCiAgICAgICAgU3RyaW5nIHVwZGF0ZTIgPSAidXBkYXRlIENvbXBVc2VyIGMg\nc2V0IGMuY3JlZGl0UmF0aW5nID0gIiArCiAgICAgICAgICAgICIgQ0FTRSBX\nSEVOIGMubmFtZSA9J0phY29iJyBUSEVOICIgKwogICAgICAgICAgICAib3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi5hcHBzLkNvbXBV\nc2VyJENyZWRpdFJhdGluZy5QT09SIiArIAogICAgICAgICAgICAiIFdIRU4g\nYy5uYW1lID0gJ1VnbycgVEhFTiAiICsgCiAgICAgICAgICAgICJvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFwcHMuQ29tcFVzZXIk\nQ3JlZGl0UmF0aW5nLkdPT0QgIiArCiAgICAgICAgICAgICIgRUxTRSAiICsg\nCiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nY29tbW9uLmFwcHMuQ29tcFVzZXIkQ3JlZGl0UmF0aW5nLkVYQ0VMTEVOVCAi\nICsKICAgICAgICAgICAgIiBFTkQgIjsKICAgICAgICBpbnQgdXBkYXRlQ291\nbnQgPSBlbS5jcmVhdGVRdWVyeSh1cGRhdGUyKS5leGVjdXRlVXBkYXRlKCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgcmVzdWx0IGlzIG5vdCA2Iiwg\nNiwgdXBkYXRlQ291bnQpOwogICAgICAgIAogICAgICAgIAogICAgICAgIFN0\ncmluZyB1cGRhdGUzID0gInVwZGF0ZSBDb21wVXNlciBjIHNldCBjLmNyZWRp\ndFJhdGluZyA9ICIgKwogICAgICAgICAgICAiIENBU0UgV0hFTiBjLmFnZSA+\nIDMwIFRIRU4gIiArCiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuY29tbW9uLmFwcHMuIiArCiAgICAgICAgICAgICJDb21w\nVXNlciRDcmVkaXRSYXRpbmcuUE9PUiIgKyAKICAgICAgICAgICAgIiBXSEVO\nIGMuYWdlIDwgMTUgVEhFTiAiICsgCiAgICAgICAgICAgICJvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFwcHMuIiArCiAgICAgICAg\nICAgICJDb21wVXNlciRDcmVkaXRSYXRpbmcuR09PRCAiICsKICAgICAgICAg\nICAgIiBFTFNFICIgKyAKICAgICAgICAgICAgIm9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5jb21tb24uYXBwcy4iICsKICAgICAgICAgICAgIkNv\nbXBVc2VyJENyZWRpdFJhdGluZy5FWENFTExFTlQgIiArCiAgICAgICAgICAg\nICIgRU5EICI7IAogICAgICAgIHVwZGF0ZUNvdW50ID0gZW0uY3JlYXRlUXVl\ncnkodXBkYXRlMykuZXhlY3V0ZVVwZGF0ZSgpOwogICAgICAgIGFzc2VydEVx\ndWFscygidGhlIHJlc3VsdCBpcyBub3QgNiIsIDYsIHVwZGF0ZUNvdW50KTsK\nICAgICAgICAKICAgICAgICBTdHJpbmcgcXVlcnk0ID0gInNlbGVjdCBlLm5h\nbWUsIGUuY3JlZGl0UmF0aW5nIGZyb20gQ29tcFVzZXIgZSAiICsgCiAgICAg\nICAgICAgICJ3aGVyZSBlLmNyZWRpdFJhdGluZyA9ICIgKwogICAgICAgICAg\nICAiKHNlbGVjdCAiICsKICAgICAgICAgICAgIkNBU0UgV0hFTiBlMS5hZ2Ug\nPSAxMSBUSEVOICIgKyAKICAgICAgICAgICAgIm9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5jb21tb24uYXBwcy4iICsKICAgICAgICAgICAgIkNv\nbXBVc2VyJENyZWRpdFJhdGluZy5QT09SIiArIAogICAgICAgICAgICAiIFdI\nRU4gZTEuYWdlID0gMzUgVEhFTiAiICsgCiAgICAgICAgICAgICJvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFwcHMuIiArCiAgICAg\nICAgICAgICJDb21wVXNlciRDcmVkaXRSYXRpbmcuR09PRCIgKwogICAgICAg\nICAgICAiIEVMU0UgIiArIAogICAgICAgICAgICAib3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLmNvbW1vbi5hcHBzLiIgKwogICAgICAgICAgICAi\nQ29tcFVzZXIkQ3JlZGl0UmF0aW5nLkVYQ0VMTEVOVCIgKwogICAgICAgICAg\nICAiIEVORCAiICsKICAgICAgICAgICAgImZyb20gQ29tcFVzZXIgZTEiICsK\nICAgICAgICAgICAgIiB3aGVyZSBlLnVzZXJpZCA9IGUxLnVzZXJpZCkgT1JE\nRVIgQlkgZS5hZ2UiOwogICAgICAgIExpc3QgcnM0ID0gZW0uY3JlYXRlUXVl\ncnkocXVlcnk0KS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgT2JqZWN0W10g\ncmVzdWx0NCA9IChPYmplY3RbXSkgcnM0LmdldCgwKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoInRoZSBuYW1lIGlzIG5vdCBVZ28iLCAiVWdvIiwgcmVzdWx0\nNFswXSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgY3JlZGl0IHJhdGlu\nZyBpcyBub3QgJ0VYQ0VMTEVOVCciLCAiRVhDRUxMRU5UIiwKICAgICAgICAg\nICAgKChvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFw\ncHMuQ29tcFVzZXIuQ3JlZGl0UmF0aW5nKQogICAgICAgICAgICByZXN1bHQ0\nWzFdKS5uYW1lKCkpOwogICAgICAgIAogICAgICAgIFN0cmluZyB1cGRhdGU0\nID0gInVwZGF0ZSBDb21wVXNlciBjIHNldCBjLmNyZWRpdFJhdGluZyA9ICIg\nKwogICAgICAgICAgICAiIENBU0UgYy5hZ2UgV0hFTiAzNSBUSEVOICIgKwog\nICAgICAgICAgICAib3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNv\nbW1vbi5hcHBzLiIgKwogICAgICAgICAgICAiQ29tcFVzZXIkQ3JlZGl0UmF0\naW5nLlBPT1IiICsgCiAgICAgICAgICAgICIgV0hFTiAxMSBUSEVOICIgKyAK\nICAgICAgICAgICAgIm9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5j\nb21tb24uYXBwcy4iICsKICAgICAgICAgICAgIkNvbXBVc2VyJENyZWRpdFJh\ndGluZy5HT09EICIgKwogICAgICAgICAgICAiIEVMU0UgIiArIAogICAgICAg\nICAgICAib3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi5h\ncHBzLiIgKwogICAgICAgICAgICAiQ29tcFVzZXIkQ3JlZGl0UmF0aW5nLkVY\nQ0VMTEVOVCAiICsKICAgICAgICAgICAgIiBFTkQgIjsgCiAgICAgICAgcmVz\ndWx0ID0gZW0uY3JlYXRlUXVlcnkodXBkYXRlNCkuZXhlY3V0ZVVwZGF0ZSgp\nOwogICAgICAgIGFzc2VydEVxdWFscygidGhlIHJlc3VsdCBpcyBub3QgNiIs\nIDYsIHJlc3VsdCk7CgogICAgICAgIC8vIERlcmJ5IGZhaWxzIGJ1dCBEQjIg\nd29ya3MgCiAgICAgICAgLyoKICAgICAgICBTdHJpbmcgdXBkYXRlNCA9ICJ1\ncGRhdGUgQ29tcFVzZXIgYyBzZXQgYy5jcmVkaXRSYXRpbmcgPSAiICsKICAg\nICAgICAgICAgIiAoc2VsZWN0ICIgKwogICAgICAgICAgICAiIENBU0UgYzEu\nYWdlIFdIRU4gMTAgVEhFTiAiICsgCiAgICAgICAgICAgICJvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFwcHMuCiAgICAgICAgICAg\nIENvbXBVc2VyJENyZWRpdFJhdGluZy5QT09SIiArIAogICAgICAgICAgICAi\nIFdIRU4gMTkgVEhFTiAiICsgCiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFwcHMKICAgICAgICAgICAgLkNv\nbXBVc2VyJENyZWRpdFJhdGluZy5HT09EIiArCiAgICAgICAgICAgICIgRUxT\nRSAiICsgCiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuY29tbW9uLmFwcHMuCiAgICAgICAgICAgIENvbXBVc2VyJENyZWRp\ndFJhdGluZy5FWENFTExFTlQiICsKICAgICAgICAgICAgIiBFTkQgIiArCiAg\nICAgICAgICAgICIgZnJvbSBDb21wVXNlciBjMSIgKwogICAgICAgICAgICAi\nIHdoZXJlIGMudXNlcmlkID0gYzEudXNlcmlkKSI7CiAgICAgICAgdXBkYXRl\nQ291bnQgPSBlbS5jcmVhdGVRdWVyeSh1cGRhdGU0KS5leGVjdXRlVXBkYXRl\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgcmVzdWx0IGlzIG5vdCA2\nIiwgNiwgdXBkYXRlQ291bnQpOwogICAgICAgICovCiAgICAgICAgZW5kVHgo\nZW0pOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBAU3VwcHJlc3NX\nYXJuaW5ncygidW5jaGVja2VkIikKICAgIHB1YmxpYyB2b2lkIHRlc3RNYXRo\nRnVuY09yZGVyQnlBbGlhcygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgU3RyaW5nIHF1\nZXJ5ID0gIlNFTEVDVCBlLmFnZSAqIDIgYXMgY0FnZSBGUk9NIENvbXBVc2Vy\nIGUgT1JERVIgQlkgY0FnZSI7CgogICAgICAgIExpc3QgcmVzdWx0ID0gZW0u\nY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwogICAgICAgIGFzc2VydEVxdWFscyg2\nLCByZXN1bHQuc2l6ZSgpKTsKCiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoK\nICAgIHB1YmxpYyBDb21wVXNlciBjcmVhdGVVc2VyKFN0cmluZyBuYW1lLCBT\ndHJpbmcgY05hbWUsIEFkZHJlc3MgYWRkLCBpbnQgYWdlLAogICAgICAgIGJv\nb2xlYW4gaXNNYWxlKSB7CiAgICAgICAgQ29tcFVzZXIgdXNlciA9IG51bGw7\nCiAgICAgICAgaWYgKGlzTWFsZSkgewogICAgICAgICAgICB1c2VyID0gbmV3\nIE1hbGVVc2VyKCk7CiAgICAgICAgICAgIHVzZXIuc2V0TmFtZShuYW1lKTsK\nICAgICAgICAgICAgdXNlci5zZXRDb21wdXRlck5hbWUoY05hbWUpOwogICAg\nICAgICAgICB1c2VyLnNldEFkZHJlc3MoYWRkKTsKICAgICAgICAgICAgdXNl\nci5zZXRBZ2UoYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB1\nc2VyID0gbmV3IEZlbWFsZVVzZXIoKTsKICAgICAgICAgICAgdXNlci5zZXRO\nYW1lKG5hbWUpOwogICAgICAgICAgICB1c2VyLnNldENvbXB1dGVyTmFtZShj\nTmFtZSk7CiAgICAgICAgICAgIHVzZXIuc2V0QWRkcmVzcyhhZGQpOwogICAg\nICAgICAgICB1c2VyLnNldEFnZShhZ2UpOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gdXNlcjsKICAgIH0KfQo=\n","encoding":"base64"}

