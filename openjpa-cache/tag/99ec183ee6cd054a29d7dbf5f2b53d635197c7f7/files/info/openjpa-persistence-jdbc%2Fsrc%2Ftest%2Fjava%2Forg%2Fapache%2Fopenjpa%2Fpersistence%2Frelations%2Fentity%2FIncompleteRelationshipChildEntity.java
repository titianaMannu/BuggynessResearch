{"sha":"3c01a3c0460b7255cc8ef97be57406bd4b464193","node_id":"MDQ6QmxvYjIwNjM2NDozYzAxYTNjMDQ2MGI3MjU1Y2M4ZWY5N2JlNTc0MDZiZDRiNDY0MTkz","size":4780,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3c01a3c0460b7255cc8ef97be57406bd4b464193","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRpb25z\nLmVudGl0eTsKCmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLkNvbHVtbjsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLkVtYmVkZGFibGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbWJlZGRlZElkOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5OwoK\nLyoqCiAqIFRoaXMgaXMgdGhlIGNoaWxkIGVudGl0eSBmb3IgdGhlIEluY29t\ncGxldGVSZWxhdGlvbnNoaXAgdGVzdCBjYXNlLgogKi8KQEVudGl0eQpwdWJs\naWMgY2xhc3MgSW5jb21wbGV0ZVJlbGF0aW9uc2hpcENoaWxkRW50aXR5IGlt\ncGxlbWVudHMgU2VyaWFsaXphYmxlIHsKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMOwogICAgCiAgICBARW1i\nZWRkYWJsZQogICAgcHVibGljIHN0YXRpYyBjbGFzcyBJbmNvbXBsZXRlUmVs\nYXRpb25zaGlwQ2hpbGRFbnRpdHlQayBpbXBsZW1lbnRzIFNlcmlhbGl6YWJs\nZSB7CiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxW\nZXJzaW9uVUlEID0gMUw7CiAgICAgICAgCiAgICAgICAgQENvbHVtbihuYW1l\nID0gIkRJU0NPVU5UIiwgbnVsbGFibGUgPSBmYWxzZSwgbGVuZ3RoID0gMTIw\nKQogICAgICAgIHByb3RlY3RlZCBTdHJpbmcgZGlzY291bnQ7CiAgICAgICAg\nQENvbHVtbihuYW1lID0gIkNMSUVOVF9JRCIsIG51bGxhYmxlID0gZmFsc2Us\nIGxlbmd0aCA9IDM1KQogICAgICAgIHByb3RlY3RlZCBTdHJpbmcgY2xpZW50\nSWQ7CgogICAgICAgIHB1YmxpYyBJbmNvbXBsZXRlUmVsYXRpb25zaGlwQ2hp\nbGRFbnRpdHlQaygpIHsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBJbmNv\nbXBsZXRlUmVsYXRpb25zaGlwQ2hpbGRFbnRpdHlQayhTdHJpbmcgZGlzY291\nbnQsIFN0cmluZyBjbGllbnRJZCkgewogICAgICAgICAgICB0aGlzLmRpc2Nv\ndW50ID0gZGlzY291bnQ7CiAgICAgICAgICAgIHRoaXMuY2xpZW50SWQgPSBj\nbGllbnRJZDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0\nQ2xpZW50SWQoKSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnRJZDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldENsaWVudElkKFN0cmlu\nZyBjbGllbnRJZCkgewogICAgICAgICAgICB0aGlzLmNsaWVudElkID0gY2xp\nZW50SWQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgU3RyaW5nIGdldERp\nc2NvdW50KCkgewogICAgICAgICAgICByZXR1cm4gZGlzY291bnQ7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXREaXNjb3VudChTdHJpbmcg\nZGlzY291bnQpIHsKICAgICAgICAgICAgdGhpcy5kaXNjb3VudCA9IGRpc2Nv\ndW50OwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvYmopIHsKICAgICAgICAgICAg\naWYgKG9iaiA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGdldENsYXNzKCkg\nIT0gb2JqLmdldENsYXNzKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBm\nYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmaW5hbCBJbmNvbXBs\nZXRlUmVsYXRpb25zaGlwQ2hpbGRFbnRpdHlQayBvdGhlciA9IChJbmNvbXBs\nZXRlUmVsYXRpb25zaGlwQ2hpbGRFbnRpdHlQaykgb2JqOwogICAgICAgICAg\nICBpZiAoKHRoaXMuZGlzY291bnQgPT0gbnVsbCkgPyAob3RoZXIuZGlzY291\nbnQgIT0gbnVsbCkgOiAhdGhpcy5kaXNjb3VudC5lcXVhbHMob3RoZXIuZGlz\nY291bnQpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgaWYgKCh0aGlzLmNsaWVudElkID09IG51\nbGwpID8gKG90aGVyLmNsaWVudElkICE9IG51bGwpIDogIXRoaXMuY2xpZW50\nSWQuZXF1YWxzKG90aGVyLmNsaWVudElkKSkgewogICAgICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\ncHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICAgICAgaW50IGhhc2gg\nPSA1OwogICAgICAgICAgICBoYXNoID0gNTMgKiBoYXNoICsgKHRoaXMuZGlz\nY291bnQgIT0gbnVsbCA/IHRoaXMuZGlzY291bnQuaGFzaENvZGUoKSA6IDAp\nOwogICAgICAgICAgICBoYXNoID0gNTMgKiBoYXNoICsgKHRoaXMuY2xpZW50\nSWQgIT0gbnVsbCA/IHRoaXMuY2xpZW50SWQuaGFzaENvZGUoKSA6IDApOwog\nICAgICAgICAgICByZXR1cm4gaGFzaDsKICAgICAgICB9CgogICAgICAgIEBP\ndmVycmlkZQogICAgICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAg\nICAgICAgICAgIHJldHVybiAiSW5jb21wbGV0ZVJlbGF0aW9uc2hpcENoaWxk\nRW50aXR5UGtbZGlzY291bnQ9IitkaXNjb3VudCsiLCIrCiAgICAgICAgICAg\nICAgICAgICAgImNsaWVudElkPSIrY2xpZW50SWQrIl0iOwogICAgICAgIH0K\nICAgIH0KCiAgICBARW1iZWRkZWRJZAogICAgcHJvdGVjdGVkIEluY29tcGxl\ndGVSZWxhdGlvbnNoaXBDaGlsZEVudGl0eVBrIHBrOwoKICAgIHB1YmxpYyBJ\nbmNvbXBsZXRlUmVsYXRpb25zaGlwQ2hpbGRFbnRpdHkoKSB7CiAgICB9Cgog\nICAgcHVibGljIEluY29tcGxldGVSZWxhdGlvbnNoaXBDaGlsZEVudGl0eShJ\nbmNvbXBsZXRlUmVsYXRpb25zaGlwQ2hpbGRFbnRpdHlQayBwaykgewogICAg\nICAgIHRoaXMucGsgPSBwazsKICAgIH0KCiAgICBwdWJsaWMgSW5jb21wbGV0\nZVJlbGF0aW9uc2hpcENoaWxkRW50aXR5KFN0cmluZyBkaXNjb3VudCwgU3Ry\naW5nIGNsaWVudElkKSB7CiAgICAgICAgdGhpcyhuZXcgSW5jb21wbGV0ZVJl\nbGF0aW9uc2hpcENoaWxkRW50aXR5UGsoZGlzY291bnQsIGNsaWVudElkKSk7\nCiAgICB9CgogICAgcHVibGljIEluY29tcGxldGVSZWxhdGlvbnNoaXBDaGls\nZEVudGl0eVBrIGdldFBrKCkgewogICAgICAgIHJldHVybiBwazsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXRQayhJbmNvbXBsZXRlUmVsYXRpb25zaGlw\nQ2hpbGRFbnRpdHlQayBwaykgewogICAgICAgIHRoaXMucGsgPSBwazsKICAg\nIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBib29sZWFuIGVxdWFscyhP\nYmplY3Qgb2JqKSB7CiAgICAgICAgaWYgKG9iaiA9PSBudWxsKSB7CiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKGdl\ndENsYXNzKCkgIT0gb2JqLmdldENsYXNzKCkpIHsKICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBmaW5hbCBJbmNvbXBsZXRl\nUmVsYXRpb25zaGlwQ2hpbGRFbnRpdHkgb3RoZXIgPSAoSW5jb21wbGV0ZVJl\nbGF0aW9uc2hpcENoaWxkRW50aXR5KSBvYmo7CiAgICAgICAgaWYgKHRoaXMu\ncGsgIT0gb3RoZXIucGsgJiYgKHRoaXMucGsgPT0gbnVsbCB8fCAhdGhpcy5w\nay5lcXVhbHMob3RoZXIucGspKSkgewogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAg\nICBpZiAodGhpcy5wayAhPSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBw\nay5oYXNoQ29kZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJl\ndHVybiAwOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgaWYgKHRoaXMucGsg\nIT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gcGsudG9TdHJpbmcoKTsK\nICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gIkluY29tcGxl\ndGVSZWxhdGlvbnNoaXBDaGlsZEVudGl0eVtwaz1udWxsXSI7CiAgICAgICAg\nfQogICAgfQp9Cg==\n","encoding":"base64"}

