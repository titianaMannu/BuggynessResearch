{"sha":"d6f36d911d8894b91ce70bbfeeaa9640ee5e1096","node_id":"MDQ6QmxvYjIwNjM2NDpkNmYzNmQ5MTFkODg5NGI5MWNlNzBiYmZlZWFhOTY0MGVlNWUxMDk2","size":5312,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d6f36d911d8894b91ce70bbfeeaa9640ee5e1096","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRpb25z\nLmVudGl0eTsKCmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKCmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5Db2x1bW47CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5FbWJlZGRhYmxlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nRW1iZWRkZWRJZDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eTsK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkZldGNoVHlwZTsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLkluaGVyaXRhbmNlOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuSW5oZXJpdGFuY2VUeXBlOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuSm9pbkNvbHVtbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkpv\naW5Db2x1bW5zOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuTWFueVRvT25l\nOwoKLyoqCiAqIFRoaXMgaXMgdGhlIHBhcmVudCBlbnRpdHkgZm9yIHRoZSBJ\nbmNvbXBsZXRlUmVsYXRpb25zaGlwIHRlc3QgY2FzZS4KICovCkBFbnRpdHkK\nQEluaGVyaXRhbmNlKHN0cmF0ZWd5ID0gSW5oZXJpdGFuY2VUeXBlLkpPSU5F\nRCkKcHVibGljIGNsYXNzIEluY29tcGxldGVSZWxhdGlvbnNoaXBQYXJlbnRF\nbnRpdHkgaW1wbGVtZW50cyBTZXJpYWxpemFibGUgewogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7CgogICAg\nQEVtYmVkZGFibGUKICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgSW5jb21wbGV0\nZVJlbGF0aW9uc2hpcFBhcmVudEVudGl0eVBrIGltcGxlbWVudHMgU2VyaWFs\naXphYmxlIHsKICAgICAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNl\ncmlhbFZlcnNpb25VSUQgPSAxTDsKCiAgICAgICAgQENvbHVtbihuYW1lID0g\nIklEIiwgbnVsbGFibGUgPSBmYWxzZSwgcHJlY2lzaW9uID0gOSkKICAgICAg\nICBwcm90ZWN0ZWQgaW50IGlkOwogICAgICAgIEBDb2x1bW4obmFtZSA9ICJD\nTElFTlRfSUQiLCBudWxsYWJsZSA9IGZhbHNlLCBsZW5ndGggPSAzNSkKICAg\nICAgICBwcm90ZWN0ZWQgU3RyaW5nIGNsaWVudElkOwoKICAgICAgICBwdWJs\naWMgSW5jb21wbGV0ZVJlbGF0aW9uc2hpcFBhcmVudEVudGl0eVBrKCkgewog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIEluY29tcGxldGVSZWxhdGlvbnNo\naXBQYXJlbnRFbnRpdHlQayhpbnQgaWQsIFN0cmluZyBjbGllbnRJZCkgewog\nICAgICAgICAgICB0aGlzLmlkID0gaWQ7CiAgICAgICAgICAgIHRoaXMuY2xp\nZW50SWQgPSBjbGllbnRJZDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0Q2xpZW50SWQoKSB7CiAgICAgICAgICAgIHJldHVybiBjbGll\nbnRJZDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldENsaWVu\ndElkKFN0cmluZyBjbGllbnRJZCkgewogICAgICAgICAgICB0aGlzLmNsaWVu\ndElkID0gY2xpZW50SWQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzZXRJZChpbnQgaWQpIHsKICAgICAgICAgICAgdGhpcy5pZCA9IGlkOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGludCBnZXRJZCgpIHsKICAgICAg\nICAgICAgcmV0dXJuIGlkOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvYmopIHsK\nICAgICAgICAgICAgaWYgKG9iaiA9PSBudWxsKSB7CiAgICAgICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYg\nKGdldENsYXNzKCkgIT0gb2JqLmdldENsYXNzKCkpIHsKICAgICAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBm\naW5hbCBJbmNvbXBsZXRlUmVsYXRpb25zaGlwUGFyZW50RW50aXR5UGsgb3Ro\nZXIgPSAoSW5jb21wbGV0ZVJlbGF0aW9uc2hpcFBhcmVudEVudGl0eVBrKSBv\nYmo7CiAgICAgICAgICAgIGlmICh0aGlzLmlkICE9IG90aGVyLmlkKSB7CiAg\nICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgaWYgKCh0aGlzLmNsaWVudElkID09IG51bGwpID8gKG90aGVy\nLmNsaWVudElkICE9IG51bGwpIDogIXRoaXMuY2xpZW50SWQuZXF1YWxzKG90\naGVyLmNsaWVudElkKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAg\nICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIGludCBo\nYXNoQ29kZSgpIHsKICAgICAgICAgICAgaW50IGhhc2ggPSA3OwogICAgICAg\nICAgICBoYXNoID0gODkgKiBoYXNoICsgKHRoaXMuaWQpOwogICAgICAgICAg\nICBoYXNoID0gODkgKiBoYXNoICsgKHRoaXMuY2xpZW50SWQgIT0gbnVsbCA/\nIHRoaXMuY2xpZW50SWQuaGFzaENvZGUoKSA6IDApOwogICAgICAgICAgICBy\nZXR1cm4gaGFzaDsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgICAgIHJl\ndHVybiAiSW5jb21wbGV0ZVJlbGF0aW9uc2hpcFBhcmVudEVudGl0eVBrW2lk\nPSIraWQrIiwiKwogICAgICAgICAgICAgICAgICAgICJjbGllbnRJZD0iK2Ns\naWVudElkKyJdIjsKICAgICAgICB9CiAgICB9CgogICAgQEVtYmVkZGVkSWQK\nICAgIHByb3RlY3RlZCBJbmNvbXBsZXRlUmVsYXRpb25zaGlwUGFyZW50RW50\naXR5UGsgcGs7CiAgICBASm9pbkNvbHVtbnMoewogICAgICAgIEBKb2luQ29s\ndW1uKG5hbWUgPSAiREVGQVVMVF9ESVNDT1VOVCIsIHJlZmVyZW5jZWRDb2x1\nbW5OYW1lID0gIkRJU0NPVU5UIiksCiAgICAgICAgQEpvaW5Db2x1bW4obmFt\nZSA9ICJDTElFTlRfSUQiLCByZWZlcmVuY2VkQ29sdW1uTmFtZSA9ICJDTElF\nTlRfSUQiKQogICAgfSkKICAgIEBNYW55VG9PbmUoZmV0Y2ggPSBGZXRjaFR5\ncGUuTEFaWSkKICAgIHByb3RlY3RlZCBJbmNvbXBsZXRlUmVsYXRpb25zaGlw\nQ2hpbGRFbnRpdHkgY2hpbGQ7CgogICAgcHVibGljIEluY29tcGxldGVSZWxh\ndGlvbnNoaXBQYXJlbnRFbnRpdHkoKSB7CiAgICB9CgogICAgcHVibGljIElu\nY29tcGxldGVSZWxhdGlvbnNoaXBQYXJlbnRFbnRpdHkoSW5jb21wbGV0ZVJl\nbGF0aW9uc2hpcFBhcmVudEVudGl0eVBrIHBrKSB7CiAgICAgICAgdGhpcy5w\nayA9IHBrOwogICAgfQoKICAgIHB1YmxpYyBJbmNvbXBsZXRlUmVsYXRpb25z\naGlwUGFyZW50RW50aXR5KGludCBpZCwgU3RyaW5nIGNsaWVudElkKSB7CiAg\nICAgICAgdGhpcyhuZXcgSW5jb21wbGV0ZVJlbGF0aW9uc2hpcFBhcmVudEVu\ndGl0eVBrKGlkLCBjbGllbnRJZCkpOwogICAgfQoKICAgIHB1YmxpYyBJbmNv\nbXBsZXRlUmVsYXRpb25zaGlwQ2hpbGRFbnRpdHkgZ2V0Q2hpbGQoKSB7CiAg\nICAgICAgcmV0dXJuIGNoaWxkOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndENoaWxkKEluY29tcGxldGVSZWxhdGlvbnNoaXBDaGlsZEVudGl0eSBjaGls\nZCkgewogICAgICAgIHRoaXMuY2hpbGQgPSBjaGlsZDsKICAgIH0KCiAgICBw\ndWJsaWMgSW5jb21wbGV0ZVJlbGF0aW9uc2hpcFBhcmVudEVudGl0eVBrIGdl\ndFBrKCkgewogICAgICAgIHJldHVybiBwazsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRQayhJbmNvbXBsZXRlUmVsYXRpb25zaGlwUGFyZW50RW50aXR5\nUGsgcGspIHsKICAgICAgICB0aGlzLnBrID0gcGs7CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG9iaikg\newogICAgICAgIGlmIChvYmogPT0gbnVsbCkgewogICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChnZXRDbGFzcygpICE9\nIG9iai5nZXRDbGFzcygpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsK\nICAgICAgICB9CiAgICAgICAgZmluYWwgSW5jb21wbGV0ZVJlbGF0aW9uc2hp\ncFBhcmVudEVudGl0eSBvdGhlciA9IChJbmNvbXBsZXRlUmVsYXRpb25zaGlw\nUGFyZW50RW50aXR5KSBvYmo7CiAgICAgICAgaWYgKHRoaXMucGsgIT0gb3Ro\nZXIucGsgJiYgKHRoaXMucGsgPT0gbnVsbCB8fCAhdGhpcy5way5lcXVhbHMo\nb3RoZXIucGspKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIEBPdmVycmlk\nZQogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICBpZiAodGhp\ncy5wayAhPSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBway5oYXNoQ29k\nZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAwOwog\nICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJp\nbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgaWYgKHRoaXMucGsgIT0gbnVsbCkg\newogICAgICAgICAgICByZXR1cm4gcGsudG9TdHJpbmcoKTsKICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICByZXR1cm4gIkluY29tcGxldGVSZWxhdGlv\nbnNoaXBQYXJlbnRFbnRpdHlbcGs9bnVsbF0iOwogICAgICAgIH0KICAgIH0K\nfQo=\n","encoding":"base64"}

