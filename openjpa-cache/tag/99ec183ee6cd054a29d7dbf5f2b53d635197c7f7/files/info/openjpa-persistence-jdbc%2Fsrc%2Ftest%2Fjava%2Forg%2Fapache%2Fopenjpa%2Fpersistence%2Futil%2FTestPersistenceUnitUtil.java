{"sha":"bf56296935994575efad19a4dcfa4d9a5bfa8090","node_id":"MDQ6QmxvYjIwNjM2NDpiZjU2Mjk2OTM1OTk0NTc1ZWZhZDE5YTRkY2ZhNGQ5YTViZmE4MDkw","size":17175,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bf56296935994575efad19a4dcfa4d9a5bfa8090","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudXRpbDsK\nCmltcG9ydCBqYXZhLnNxbC5EYXRlOwppbXBvcnQgamF2YS51dGlsLkFycmF5\nTGlzdDsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51\ndGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuUmFuZG9tOwoKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNlOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuUGVyc2lzdGVuY2VVbml0VXRpbDsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLlBlcnNpc3RlbmNlVXRpbDsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLnNwaS5Mb2FkU3RhdGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5z\ncGkuUGVyc2lzdGVuY2VQcm92aWRlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLnNwaS5Qcm92aWRlclV0aWw7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2VQcm92aWRlcklt\ncGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVz\ndC5TaW5nbGVFTUZUZXN0Q2FzZTsKCnB1YmxpYyBjbGFzcyBUZXN0UGVyc2lz\ndGVuY2VVbml0VXRpbCBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlewogICAg\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChDTEVB\nUl9UQUJMRVMsIEVhZ2VyRW50aXR5LmNsYXNzLCBMYXp5RW1iZWQuY2xhc3Ms\nCiAgICAgICAgICAgIExhenlFbnRpdHkuY2xhc3MsIEVhZ2VyRW1iZWQuY2xh\nc3MsIFJlbEVudGl0eS5jbGFzcywKICAgICAgICAgICAgRWFnZXJFbWJlZFJl\nbC5jbGFzcywgTWFwRW50aXR5LmNsYXNzLAogICAgICAgICAgICBNYXBLZXlF\nbWJlZC5jbGFzcywgTWFwVmFsRW50aXR5LmNsYXNzLAogICAgICAgICAgICBP\nbmVUb0VudGl0eS5jbGFzcywgVG9NYW55TGF6eS5jbGFzcywgVG9NYW55RWFn\nZXIuY2xhc3MpOwogICAgfQoKICAgIC8qCiAgICAgKiBWZXJpZmllcyBhbiBl\nbnRpdHkgYW5kIGl0cyBwZXJzaXN0ZW50IGF0dHJpYnV0ZXMgYXJlIGluIHRo\nZSBwcm9wZXIgCiAgICAgKiBsb2FkIHN0YXRlLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCB0ZXN0SXNMb2FkZWRFYWdlcigpIHsgICAgICAgIAogICAgICAg\nIHZlcmlmeUlzTG9hZGVkRWFnZXJTdGF0ZSh0cnVlKTsKICAgIH0KCiAgICAv\nKgogICAgICogVmVyaWZpZXMgYW4gZW50aXR5IGFuZCBpdHMgcGVyc2lzdGVu\ndCBhdHRyaWJ1dGVzIGFyZSBpbiB0aGUgcHJvcGVyIAogICAgICogbm90IGxv\nYWRlZCBzdGF0ZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdE5vdExv\nYWRlZExhenkoKSB7CiAgICAgICAgdmVyaWZ5SXNMb2FkZWRFYWdlclN0YXRl\nKGZhbHNlKTsgICAgICAgCiAgICB9CgogICAgLyoKICAgICAqIFZlcmlmaWVz\nIGFuIGVudGl0eSBhbmQgaXRzIHBlcnNpc3RlbnQgYXR0cmlidXRlcyBhcmUg\naW4gdGhlIHByb3BlciAKICAgICAqIGxvYWRlZCBzdGF0ZS4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgdGVzdElzTG9hZGVkTGF6eSgpIHsgICAgICAgIAog\nICAgICAgIHZlcmlmeUlzTG9hZGVkTGF6eVN0YXRlKHRydWUpOwogICAgfQoK\nICAgIC8qCiAgICAgKiBWZXJpZmllcyBhbiBlbnRpdHkgYW5kIGl0cyBwZXJz\naXN0ZW50IGF0dHJpYnV0ZXMgYXJlIGluIHRoZSBwcm9wZXIgCiAgICAgKiBO\nT1RfTE9BREVEIHN0YXRlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nTm90TG9hZGVkRWFnZXIoKSB7CiAgICAgICAgdmVyaWZ5SXNMb2FkZWRFYWdl\nclN0YXRlKGZhbHNlKTsgICAgICAgCiAgICB9CiAgICAKICAgIC8qKgogICAg\nICogVmVyaWZpZXMgdGhlIHVzZSBvZiBQZXJzaXN0ZW5jZVVuaXRVdGlsIHdp\ndGggbXVsdGlwbGUgUFUncy4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVz\ndE11bHRpcGxlUFVzKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeVNQSSBlbWYxID0KICAgICAgICAgICAgKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeVNQSSlPcGVuSlBBUGVyc2lzdGVuY2UuCiAgICAgICAg\nICAgIGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KCJQVXRpbDEiLAogICAg\nICAgICAgICAgICAgIm9yZy9hcGFjaGUvb3BlbmpwYS9wZXJzaXN0ZW5jZS91\ndGlsLyIgKwogICAgICAgICAgICAgICAgInBlcnNpc3RlbmNlLnhtbCIpOwog\nICAgICAgIGFzc2VydE5vdE51bGwoZW1mMSk7CgogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSBlbWYyID0KICAgICAgICAgICAgKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSlPcGVuSlBBUGVyc2lzdGVu\nY2UuCiAgICAgICAgICAgIGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KCJQ\nVXRpbDIiLAogICAgICAgICAgICAgICAgIm9yZy9hcGFjaGUvb3BlbmpwYS9w\nZXJzaXN0ZW5jZS91dGlsLyIgKwogICAgICAgICAgICAgICAgInBlcnNpc3Rl\nbmNlLnhtbCIpOwogICAgICAgIAogICAgICAgIGFzc2VydE5vdE51bGwoZW1m\nMik7CiAgICAgICAgYXNzZXJ0Tm90U2FtZShlbWYsIGVtZjEpOwogICAgICAg\nIGFzc2VydE5vdFNhbWUoZW1mMSwgZW1mMik7CgogICAgICAgIFBlcnNpc3Rl\nbmNlVW5pdFV0aWwgcHV1ID0gZW1mLmdldFBlcnNpc3RlbmNlVW5pdFV0aWwo\nKTsKICAgICAgICBQZXJzaXN0ZW5jZVVuaXRVdGlsIHB1dTEgPSBlbWYxLmdl\ndFBlcnNpc3RlbmNlVW5pdFV0aWwoKTsKICAgICAgICBQZXJzaXN0ZW5jZVVu\naXRVdGlsIHB1dTIgPSBlbWYyLmdldFBlcnNpc3RlbmNlVW5pdFV0aWwoKTsK\nCiAgICAgICAgYXNzZXJ0Tm90U2FtZShwdXUsIHB1dTEpOwogICAgICAgIGFz\nc2VydE5vdFNhbWUocHV1LCBwdXUyKTsKICAgICAgICBhc3NlcnROb3RTYW1l\nKHB1dTEsIHB1dTIpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtMSA9IGVtZjEuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0yID0gZW1mMi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCgogICAgICAgIHZlcmlmeVBVTG9hZFN0YXRlKGVtLCBwdXUsIHB1dTEsIHB1\ndTIpOwogICAgICAgIHZlcmlmeVBVTG9hZFN0YXRlKGVtMSwgcHV1MSwgcHV1\nLCBwdXUyKTsKICAgICAgICB2ZXJpZnlQVUxvYWRTdGF0ZShlbTIsIHB1dTIs\nIHB1dSwgcHV1MSk7CiAgICAgICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nICAgICBlbTEuY2xvc2UoKTsKICAgICAgICBlbTIuY2xvc2UoKTsKICAgICAg\nICAKICAgICAgICBpZiAoZW1mMSAhPSBudWxsKSB7CiAgICAgICAgICAgIGVt\nZjEuY2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgaWYgKGVtZjIgIT0gbnVs\nbCkgewogICAgICAgICAgICBlbWYyLmNsb3NlKCk7CiAgICAgICAgfQogICAg\nICAgIAogICAgfQoKICAgIHByaXZhdGUgdm9pZCB2ZXJpZnlQVUxvYWRTdGF0\nZShFbnRpdHlNYW5hZ2VyIGVtLAogICAgICAgIFBlcnNpc3RlbmNlVW5pdFV0\naWwuLi5wdXUpIHsKCiAgICAgICAgRWFnZXJFbnRpdHkgZWUgPSBjcmVhdGVF\nYWdlckVudGl0eSgpOyAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoZmFs\nc2UsIHB1dVswXS5pc0xvYWRlZChlZSkpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhmYWxzZSwgcHV1WzBdLmlzTG9hZGVkKGVlLCAKICAgICAgICAgICAgImlk\nIikpOwogICAgICAgIGFzc2VydEVxdWFscyhmYWxzZSwgcHV1WzFdLmlzTG9h\nZGVkKGVlKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGZhbHNlLCBwdXVbMV0u\naXNMb2FkZWQoZWUsIAogICAgICAgICAgICAiaWQiKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKGZhbHNlLCBwdXVbMl0uaXNMb2FkZWQoZWUpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoZmFsc2UsIHB1dVsyXS5pc0xvYWRlZChlZSwgCiAg\nICAgICAgICAgICJpZCIpKTsKICAgICAgICAKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChlZSk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKHRydWUsIHB1dVswXS5pc0xvYWRlZChlZSkpOwogICAg\nICAgIGFzc2VydEVxdWFscyh0cnVlLCBwdXVbMF0uaXNMb2FkZWQoZWUsIAog\nICAgICAgICAgICAiaWQiKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGZhbHNl\nLCBwdXVbMV0uaXNMb2FkZWQoZWUpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nZmFsc2UsIHB1dVsxXS5pc0xvYWRlZChlZSwgCiAgICAgICAgICAgICJpZCIp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZmFsc2UsIHB1dVsyXS5pc0xvYWRl\nZChlZSkpOwogICAgICAgIGFzc2VydEVxdWFscyhmYWxzZSwgcHV1WzJdLmlz\nTG9hZGVkKGVlLCAKICAgICAgICAgICAgImlkIikpOwogICAgfQoKICAgIAog\nICAgcHJpdmF0ZSB2b2lkIHZlcmlmeUlzTG9hZGVkRWFnZXJTdGF0ZShib29s\nZWFuIGxvYWRlZCkgewogICAgICAgIFBlcnNpc3RlbmNlVW5pdFV0aWwgcHV1\nID0gZW1mLmdldFBlcnNpc3RlbmNlVW5pdFV0aWwoKTsKICAgICAgICBhc3Nl\ncnRTYW1lKGVtZiwgcHV1KTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFYWdlckVudGl0\neSBlZSA9IGNyZWF0ZUVhZ2VyRW50aXR5KCk7CiAgICAgICAgCiAgICAgICAg\nLy8gVmZ5IExvYWRTdGF0ZSBpcyBmYWxzZSBmb3IgdGhlIHVubWFuYWdlZCBl\nbnRpdHkKICAgICAgICBhc3NlcnRFcXVhbHMoZmFsc2UsIHB1dS5pc0xvYWRl\nZChlZSkpOwogICAgICAgIGFzc2VydEVxdWFscyhmYWxzZSwgcHV1LmlzTG9h\nZGVkKGVlLCAKICAgICAgICAgICAgImlkIikpOwogICAgICAgIAogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJz\naXN0KGVlKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgCiAgICAgICAgaWYgKGxv\nYWRlZCkKICAgICAgICAgICAgZWUgPSBlbS5maW5kKEVhZ2VyRW50aXR5LmNs\nYXNzLCBlZS5nZXRJZCgpKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGVl\nID0gZW0uZ2V0UmVmZXJlbmNlKEVhZ2VyRW50aXR5LmNsYXNzLCBlZS5nZXRJ\nZCgpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMobG9hZGVkLCBw\ndXUuaXNMb2FkZWQoZWUpKTsKICAgICAgICBhc3NlcnRFcXVhbHMobG9hZGVk\nLCBwdXUuaXNMb2FkZWQoZWUsICJpZCIpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMobG9hZGVkLCBwdXUuaXNMb2FkZWQoZWUsICJuYW1lIikpOwogICAgICAg\nIGFzc2VydEVxdWFscyhsb2FkZWQsIHB1dS5pc0xvYWRlZChlZSwgImVhZ2Vy\nRW1iZWQiKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGZhbHNlLCBwdXUuaXNM\nb2FkZWQoZWUsICJ0cmFuc0ZpZWxkIikpOwogICAgICAgIAogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHZlcmlmeUlzTG9h\nZGVkTGF6eVN0YXRlKGJvb2xlYW4gbG9hZGVkKSB7CiAgICAgICAgUGVyc2lz\ndGVuY2VVbml0VXRpbCBwdXUgPSBlbWYuZ2V0UGVyc2lzdGVuY2VVbml0VXRp\nbCgpOwogICAgICAgIGFzc2VydFNhbWUoZW1mLCBwdXUpOwogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIExhenlFbnRpdHkgbGUgPSBjcmVhdGVMYXp5RW50aXR5KCk7CiAg\nICAgICAgCiAgICAgICAgLy8gVmZ5IExvYWRTdGF0ZSBpcyBmYWxzZSBmb3Ig\ndGhlIHVubWFuYWdlZCBlbnRpdHkKICAgICAgICBhc3NlcnRFcXVhbHMoZmFs\nc2UsIHB1dS5pc0xvYWRlZChsZSkpOwogICAgICAgIGFzc2VydEVxdWFscyhm\nYWxzZSwgcHV1LmlzTG9hZGVkKGxlLCJpZCIpKTsKICAgICAgICAKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVy\nc2lzdChsZSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIAogICAgICAgIC8vIFVz\nZSBmaW5kIG9yIGdldFJlZmVyZW5jZSBiYXNlZCB1cG9uIGV4cGVjdGVkIHN0\nYXRlCiAgICAgICAgaWYgKGxvYWRlZCkKICAgICAgICAgICAgbGUgPSBlbS5m\naW5kKExhenlFbnRpdHkuY2xhc3MsIGxlLmdldElkKCkpOwogICAgICAgIGVs\nc2UKICAgICAgICAgICAgbGUgPSBlbS5nZXRSZWZlcmVuY2UoTGF6eUVudGl0\neS5jbGFzcywgbGUuZ2V0SWQoKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGxvYWRlZCwgcHV1LmlzTG9hZGVkKGxlKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKGxvYWRlZCwgcHV1LmlzTG9hZGVkKGxlLCAiaWQiKSk7Cgog\nICAgICAgIC8vIE5hbWUgaXMgbGF6eSBmZXRjaCBzbyBpdCBzaG91bGQgbm90\nIGJlIGxvYWRlZAogICAgICAgIGFzc2VydEVxdWFscyhmYWxzZSwgcHV1Lmlz\nTG9hZGVkKGxlLCAibmFtZSIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMobG9h\nZGVkLCBwdXUuaXNMb2FkZWQobGUsICJsYXp5RW1iZWQiKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKGZhbHNlLCBwdXUuaXNMb2FkZWQobGUsICJ0cmFuc0Zp\nZWxkIikpOwogICAgICAgIAogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgLyoKICAgICAqIFZlcmlmaWVzIHRoYXQgYW4gZW50aXR5IGFuZCBhdHRy\naWJ1dGVzIGFyZSBjb25zaWRlcmVkIGxvYWRlZCBpZiB0aGV5CiAgICAgKiBh\ncmUgYXNzaWduZWQgYnkgdGhlIGFwcGxpY2F0aW9uLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0SXNBcHBsaWNhdGlvbkxvYWRlZCgpIHsKICAgICAg\nICBQZXJzaXN0ZW5jZVVuaXRVdGlsIHB1dSA9IGVtZi5nZXRQZXJzaXN0ZW5j\nZVVuaXRVdGlsKCk7CiAgICAgICAgYXNzZXJ0U2FtZShlbWYsIHB1dSk7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRWFnZXJFbnRpdHkgZWUgPSBjcmVhdGVFYWdlckVu\ndGl0eSgpOwogICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KGVlKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7\nCiAgICAgICAgCiAgICAgICAgZWUgPSBlbS5nZXRSZWZlcmVuY2UoRWFnZXJF\nbnRpdHkuY2xhc3MsIGVlLmdldElkKCkpOwogICAgICAgIGFzc2VydE5vdE51\nbGwoZWUpOwogICAgICAgIGFzc2VydEVhZ2VyTG9hZFN0YXRlKHB1dSwgZWUs\nIGZhbHNlKTsKICAgICAgICAKICAgICAgICBlZS5zZXROYW1lKCJBcHBFYWdl\nck5hbWUiKTsKICAgICAgICBFYWdlckVtYmVkIGVtYiA9IGNyZWF0ZUVhZ2Vy\nRW1iZWQoKTsKICAgICAgICBlZS5zZXRFYWdlckVtYmVkKGVtYik7CiAgICAg\nICAgLy8gQXNzZXJ0IGZpZWxkcyBhcmUgbG9hZGVkIHZpYSBhcHBsaWNhdGlv\nbiBsb2FkaW5nCiAgICAgICAgYXNzZXJ0RWFnZXJMb2FkU3RhdGUocHV1LCBl\nZSwgdHJ1ZSk7CiAgICAgICAgLy8gVmZ5IHRoZSBzZXQgdmFsdWVzIGFyZSBh\ncHBsaWVkIHRvIHRoZSBlbnRpdHkKICAgICAgICBhc3NlcnRFcXVhbHMoIkFw\ncEVhZ2VyTmFtZSIsIGVlLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKGVtYiwgZWUuZ2V0RWFnZXJFbWJlZCgpKTsKICAgICAgICAKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQQ01h\ncEVhZ2VyKCkgewogICAgICAgIFBlcnNpc3RlbmNlVW5pdFV0aWwgcHV1ID0g\nZW1mLmdldFBlcnNpc3RlbmNlVW5pdFV0aWwoKTsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICAKICAgICAgICBNYXBWYWxFbnRpdHkgbXZlID0gbmV3IE1hcFZhbEVudGl0\neSgpOwogICAgICAgIG12ZS5zZXRJbnRWYWwoMTApOwogICAgICAgIE1hcEtl\neUVtYmVkIG1rZSA9IG5ldyBNYXBLZXlFbWJlZCgpOwogICAgICAgIG1rZS5z\nZXRGaXJzdE5hbWUoIkphbmUiKTsKICAgICAgICBta2Uuc2V0TGFzdE5hbWUo\nIkRvZSIpOwogICAgICAgIAogICAgICAgIE1hcEVudGl0eSBtZSA9IG5ldyBN\nYXBFbnRpdHkoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKGZhbHNlLCBwdXUu\naXNMb2FkZWQobWUpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZmFsc2UsIHB1\ndS5pc0xvYWRlZChtZSwgCiAgICAgICAgICAgICJtYXBWYWxFbnRpdHkiKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKGZhbHNlLCBwdXUuaXNMb2FkZWQobWUs\nIAogICAgICAgICAgICAibWFwRW50aXRpZXMiKSk7CgogICAgICAgIGFzc2Vy\ndEVxdWFscyhmYWxzZSwgcHV1LmlzTG9hZGVkKG12ZSkpOwoKICAgICAgICAv\nLyBDcmVhdGUgYSBjaXJjdWxhciByZWYKICAgICAgICBtZS5zZXRNYXBWYWxF\nbnRpdHkobXZlKTsKICAgICAgICBtdmUuc2V0TWFwRW50aXR5KG1lKTsKCiAg\nICAgICAgSGFzaE1hcDxNYXBLZXlFbWJlZCwgTWFwVmFsRW50aXR5PiBobSA9\nIAogICAgICAgICAgICBuZXcgSGFzaE1hcDxNYXBLZXlFbWJlZCwgTWFwVmFs\nRW50aXR5PigpOwogICAgICAgIAogICAgICAgIGhtLnB1dChta2UsIG12ZSk7\nCiAgICAgICAgbWUuc2V0TWFwRW50aXRpZXMoaG0pOwoKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdCht\nZSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAg\nICAgICAKICAgICAgICBhc3NlcnRFcXVhbHModHJ1ZSwgcHV1LmlzTG9hZGVk\nKG1lKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHRydWUsIHB1dS5pc0xvYWRl\nZChtZSwgCiAgICAgICAgICAgICJtYXBWYWxFbnRpdHkiKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKHRydWUsIHB1dS5pc0xvYWRlZChtZSwgCiAgICAgICAg\nICAgICJtYXBFbnRpdGllcyIpKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKHRy\ndWUsIHB1dS5pc0xvYWRlZChtdmUpKTsKICAgICAgICAKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAgKiBWZXJpZnkgbG9hZCBzdGF0\nZSBpcyBub3QgbG9hZGVkIGZvciBudWxsIHJlbGF0aW9uc2hpcHMgb3IgcmVs\nYXRpb25zaGlwcwogICAgICogc2V0IHRvIG51bGwuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHRlc3RTZXROdWxsTGF6eVJlbGF0aW9uc2hpcCgpIHsKCiAg\nICAgICAgUGVyc2lzdGVuY2VVbml0VXRpbCBwdXUgPSBlbWYuZ2V0UGVyc2lz\ndGVuY2VVbml0VXRpbCgpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAgICB0cnkgewogICAg\nICAgICAgICBPbmVUb0VudGl0eSBvdGUgPSBuZXcgT25lVG9FbnRpdHkoKTsK\nICAgICAgICAgICAgYXNzZXJ0RmFsc2UocHV1LmlzTG9hZGVkKG90ZSwgInRv\nTWFueUxhenkiKSk7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChvdGUpOwogICAgICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgICAg\nICBlbS5jbGVhcigpOwogICAgICAgICAgICBvdGUgPSBlbS5maW5kKE9uZVRv\nRW50aXR5LmNsYXNzLCBvdGUuZ2V0SWQoKSk7CiAgICAgICAgICAgIC8vIEZp\nZWxkIGlzIGxhenkgYW5kIG5vdCBpbW1lZGlhdGVseSBsb2FkZWQgYnkgdGhl\nIGFwcGxpY2F0aW9uCiAgICAgICAgICAgIGFzc2VydEZhbHNlKHB1dS5pc0xv\nYWRlZChvdGUsICJ0b01hbnlMYXp5IikpOwogICAgICAgICAgICAvLyBGb3Jj\nZSBsb2FkIHRoZSBsYXp5IGZpZWxkCiAgICAgICAgICAgIG90ZS5nZXRUb01h\nbnlMYXp5KCk7CiAgICAgICAgICAgIGFzc2VydFRydWUocHV1LmlzTG9hZGVk\nKG90ZSwgInRvTWFueUxhenkiKSk7CiAgICAgICAgICAgIAogICAgICAgICAg\nICBPbmVUb0VudGl0eSBvdGUyID0gbmV3IE9uZVRvRW50aXR5KCk7CiAgICAg\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICAg\nICAgZW0ucGVyc2lzdChvdGUyKTsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAgICAgLy8gRmllbGQgZ2V0cyBz\nZXQgdG8gbG9hZGVkIHVwb24gY29tbWl0CiAgICAgICAgICAgIGFzc2VydFRy\ndWUocHV1LmlzTG9hZGVkKG90ZTIsICJ0b01hbnlMYXp5IikpOwogICAgICAg\nICAgICBlbS5jbGVhcigpOwogICAgICAgICAgICBvdGUyID0gZW0uZmluZChP\nbmVUb0VudGl0eS5jbGFzcywgb3RlMi5nZXRJZCgpKTsKICAgICAgICAgICAg\nCiAgICAgICAgICAgIC8vIEZpZWxkIGlzIGxhenkgYW5kIG5vdCBpbW1lZGlh\ndGVseSBsb2FkZWQgYnkgdGhlIGFwcGxpY2F0aW9uCiAgICAgICAgICAgIGFz\nc2VydEZhbHNlKHB1dS5pc0xvYWRlZChvdGUyLCAidG9NYW55TGF6eSIpKTsK\nICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIExvYWQgYnkgYXBwbGljYXRp\nb24KICAgICAgICAgICAgTGlzdDxUb01hbnlMYXp5PiB0bWVzID0gbmV3IEFy\ncmF5TGlzdDxUb01hbnlMYXp5PigpOwogICAgICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgICAgICAgICAgdG1lcy5hZGQo\nbmV3IFRvTWFueUxhenkoIlRvTWFueSIgKyBpKSk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAg\nICAgICAgICBvdGUyLnNldFRvTWFueUxhenkodG1lcyk7CiAgICAgICAgICAg\nIC8vIEFwcCBsb2FkZWQgYmVmb3JlIGNvbW1pdAogICAgICAgICAgICBhc3Nl\ncnRUcnVlKHB1dS5pc0xvYWRlZChvdGUyLCAidG9NYW55TGF6eSIpKTsKICAg\nICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICAgICAgLy8gU3RpbGwgbG9hZGVkIGFmdGVyIGNvbW1pdAogICAgICAgICAg\nICBhc3NlcnRUcnVlKHB1dS5pc0xvYWRlZChvdGUyLCAidG9NYW55TGF6eSIp\nKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFNldCB0byBudWxsIC0g\nc3RpbGwgbG9hZGVkIHBlciBzcGVjLgogICAgICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIG90ZTIuc2V0VG9NYW55\nTGF6eShudWxsKTsKICAgICAgICAgICAgLy8gQ29uc2lkZXJlZCBsb2FkZWQg\nYmVmb3JlIGNvbW1pdAogICAgICAgICAgICBhc3NlcnRUcnVlKHB1dS5pc0xv\nYWRlZChvdGUyLCAidG9NYW55TGF6eSIpKTsKICAgICAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAgICAgLy9Mb2FkZWQg\nYWZ0ZXIgY29tbWl0CiAgICAgICAgICAgIGFzc2VydFRydWUocHV1LmlzTG9h\nZGVkKG90ZTIsICJ0b01hbnlMYXp5IikpOwogICAgICAgIH0KICAgICAgICBm\naW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVtLmdldFRyYW5zYWN0aW9uKCku\naXNBY3RpdmUoKSkgewogICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5yb2xsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFNl\ndE51bGxFYWdlclJlbGF0aW9uc2hpcCgpIHsKCiAgICAgICAgUGVyc2lzdGVu\nY2VVbml0VXRpbCBwdXUgPSBlbWYuZ2V0UGVyc2lzdGVuY2VVbml0VXRpbCgp\nOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBPbmVUb0Vu\ndGl0eSBvdGUgPSBuZXcgT25lVG9FbnRpdHkoKTsKICAgICAgICAgICAgYXNz\nZXJ0RmFsc2UocHV1LmlzTG9hZGVkKG90ZSwgInRvTWFueUVhZ2VyIikpOwog\nICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgICAgIGVtLnBlcnNpc3Qob3RlKTsKICAgICAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAgICAgZW0uY2xlYXIoKTsK\nICAgICAgICAgICAgb3RlID0gZW0uZmluZChPbmVUb0VudGl0eS5jbGFzcywg\nb3RlLmdldElkKCkpOwogICAgICAgICAgICAvLyBGaWVsZCBpcyBlYWdlciBh\nbmQgaXMgaW1tZWRpYXRlbHkgbG9hZGVkIGJ5IHRoZSBhcHBsaWNhdGlvbgog\nICAgICAgICAgICBhc3NlcnRUcnVlKHB1dS5pc0xvYWRlZChvdGUsICJ0b01h\nbnlFYWdlciIpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIE9uZVRvRW50\naXR5IG90ZTIgPSBuZXcgT25lVG9FbnRpdHkoKTsKICAgICAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgICAgICBlbS5wZXJz\naXN0KG90ZTIpOwogICAgICAgICAgICAvLyBGaWVsZCBpcyBudWxsIGJ5IGRl\nZmF1bHQsIGJ1dCBhZnRlciBwZXJzaXN0LCBpdCBpcyB0cmVhdGVkIGFzIGxv\nYWRlZC4KICAgICAgICAgICAgYXNzZXJ0VHJ1ZShwdXUuaXNMb2FkZWQob3Rl\nMiwgInRvTWFueUVhZ2VyIikpOwogICAgICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgICAgICAvLyBGaWVsZCBnZXRzIHNl\ndCB0byBsb2FkZWQgdXBvbiBjb21taXQKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZShwdXUuaXNMb2FkZWQob3RlMiwgInRvTWFueUVhZ2VyIikpOwogICAgICAg\nICAgICBlbS5jbGVhcigpOwogICAgICAgICAgICBvdGUyID0gZW0uZmluZChP\nbmVUb0VudGl0eS5jbGFzcywgb3RlMi5nZXRJZCgpKTsKICAgICAgICAgICAg\nCiAgICAgICAgICAgIC8vIEZpZWxkIGlzIGVhZ2VyIGFuZCBpcyBpbW1lZGlh\ndGVseSBsb2FkZWQgYnkgdGhlIGFwcGxpY2F0aW9uCiAgICAgICAgICAgIGFz\nc2VydFRydWUocHV1LmlzTG9hZGVkKG90ZTIsICJ0b01hbnlFYWdlciIpKTsK\nICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIExvYWQgYnkgYXBwbGljYXRp\nb24KICAgICAgICAgICAgTGlzdDxUb01hbnlFYWdlcj4gdG1lcyA9IG5ldyBB\ncnJheUxpc3Q8VG9NYW55RWFnZXI+KCk7CiAgICAgICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgICAgICB0bWVzLmFk\nZChuZXcgVG9NYW55RWFnZXIoIlRvTWFueSIgKyBpKSk7CiAgICAgICAgICAg\nIH0KICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgICAgICBvdGUyLnNldFRvTWFueUVhZ2VyKHRtZXMpOwogICAgICAg\nICAgICAvLyBBcHAgbG9hZGVkIGJlZm9yZSBjb21taXQKICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZShwdXUuaXNMb2FkZWQob3RlMiwgInRvTWFueUVhZ2VyIikp\nOwogICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgICAgICAgICAvLyBTdGlsbCBsb2FkZWQgYWZ0ZXIgY29tbWl0CiAgICAg\nICAgICAgIGFzc2VydFRydWUocHV1LmlzTG9hZGVkKG90ZTIsICJ0b01hbnlF\nYWdlciIpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFNldCB0byBu\ndWxsIC0gc3RpbGwgbG9hZGVkIHBlciBzcGVjLgogICAgICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIG90ZTIuc2V0\nVG9NYW55RWFnZXIobnVsbCk7CiAgICAgICAgICAgIC8vIEVudGl0eSBpcyBj\nb25zaWRlcmVkIGxvYWRlZCBiZWZvcmUgY29tbWl0CiAgICAgICAgICAgIGFz\nc2VydFRydWUocHV1LmlzTG9hZGVkKG90ZTIpKTsKICAgICAgICAgICAgLy8g\nQXR0cmlidXRlIGlzIGNvbnNpZGVyZWQgbG9hZGVkIGJlZm9yZSBjb21taXQK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShwdXUuaXNMb2FkZWQob3RlMiwgInRv\nTWFueUVhZ2VyIikpOwogICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgICAgICAvL0xvYWRlZCBhZnRlciBjb21taXQK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShwdXUuaXNMb2FkZWQob3RlMiwgInRv\nTWFueUVhZ2VyIikpOwogICAgICAgIH0KICAgICAgICBmaW5hbGx5IHsKICAg\nICAgICAgICAgaWYgKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkg\newogICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFj\naygpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEJhc2ljVHlwZU5vdExv\nYWRlZCgpIHsKICAgICAgICBQZXJzaXN0ZW5jZVVuaXRVdGlsIHB1dSA9IGVt\nZi5nZXRQZXJzaXN0ZW5jZVVuaXRVdGlsKCk7CiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nRWFnZXJFbnRpdHkgZWUgPSBjcmVhdGVFYWdlckVudGl0eSgpOwogICAgICAg\nIGludCBpZCA9IGVlLmdldElkKCk7CiAgICAgICAgCiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QoZWUp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgZW0uY2xlYXIoKTsKICAgICAgICAvLyBuYW1lIGlzIG5vdCBlYWdlcmx5\nIGxvYWRlZCwgb25seSBlYWdlckVtYmVkIGlzIGVhZ2VybHkgbG9hZGVkCiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIga2VtID0gT3BlbkpQQVBlcnNp\nc3RlbmNlLmNhc3QoZW0pOwogICAgICAgIGtlbS5nZXRGZXRjaFBsYW4oKS5y\nZXNldEZldGNoR3JvdXBzKCkucmVtb3ZlRmV0Y2hHcm91cCgiZGVmYXVsdCIp\nCiAgICAgICAgICAgIC5hZGRGaWVsZChFYWdlckVudGl0eS5jbGFzcywgImVh\nZ2VyRW1iZWQiKTsKICAgICAgICBlZSA9IGVtLmZpbmQoRWFnZXJFbnRpdHku\nY2xhc3MsIGlkKTsKICAgICAgICBhc3NlcnRFcXVhbHModHJ1ZSwgcHV1Lmlz\nTG9hZGVkKGVlKSk7CiAgICB9CgogICAgcHJpdmF0ZSBFYWdlckVudGl0eSBj\ncmVhdGVFYWdlckVudGl0eSgpIHsKICAgICAgICBFYWdlckVudGl0eSBlZSA9\nIG5ldyBFYWdlckVudGl0eSgpOwogICAgICAgIGVlLnNldElkKG5ldyBSYW5k\nb20oKS5uZXh0SW50KCkpOwogICAgICAgIGVlLnNldE5hbWUoIkVhZ2VyRW50\naXR5Iik7CiAgICAgICAgRWFnZXJFbWJlZCBlbWIgPSBjcmVhdGVFYWdlckVt\nYmVkKCk7CiAgICAgICAgZWUuc2V0RWFnZXJFbWJlZChlbWIpOwogICAgICAg\nIHJldHVybiBlZTsKICAgIH0KCiAgICBwcml2YXRlIEVhZ2VyRW1iZWQgY3Jl\nYXRlRWFnZXJFbWJlZCgpIHsKICAgICAgICBFYWdlckVtYmVkIGVtYiA9IG5l\ndyBFYWdlckVtYmVkKCk7CiAgICAgICAgZW1iLnNldEVuZERhdGUobmV3IERh\ndGUoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpKTsKICAgICAgICBlbWIu\nc2V0U3RhcnREYXRlKG5ldyBEYXRlKFN5c3RlbS5jdXJyZW50VGltZU1pbGxp\ncygpKSk7CiAgICAgICAgcmV0dXJuIGVtYjsKICAgIH0KCiAgICBwcml2YXRl\nIExhenlFbnRpdHkgY3JlYXRlTGF6eUVudGl0eSgpIHsKICAgICAgICBMYXp5\nRW50aXR5IGxlID0gbmV3IExhenlFbnRpdHkoKTsKICAgICAgICBsZS5zZXRJ\nZChuZXcgUmFuZG9tKCkubmV4dEludCgpKTsKICAgICAgICBsZS5zZXROYW1l\nKCJMYXp5RW50aXR5Iik7CiAgICAgICAgTGF6eUVtYmVkIGVtYiA9IG5ldyBM\nYXp5RW1iZWQoKTsKICAgICAgICBlbWIuc2V0RW5kRGF0ZShuZXcgRGF0ZShT\neXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSkpOwogICAgICAgIGVtYi5zZXRT\ndGFydERhdGUobmV3IERhdGUoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkp\nKTsKICAgICAgICBsZS5zZXRMYXp5RW1iZWQoZW1iKTsKICAgICAgICBSZWxF\nbnRpdHkgcmUgPSBuZXcgUmVsRW50aXR5KCk7CiAgICAgICAgcmUuc2V0TmFt\nZSgiTXkgZW50Iik7CiAgICAgICAgQXJyYXlMaXN0PFJlbEVudGl0eT4gcmVs\nID0gbmV3IEFycmF5TGlzdDxSZWxFbnRpdHk+KCk7CiAgICAgICAgcmVsLmFk\nZChuZXcgUmVsRW50aXR5KCkpOwogICAgICAgIHJldHVybiBsZTsKICAgIH0K\nICAgIAogICAgcHJpdmF0ZSB2b2lkIGFzc2VydEVhZ2VyTG9hZFN0YXRlKFBl\ncnNpc3RlbmNlVW5pdFV0aWwgcHUsIE9iamVjdCBlbnQsIAogICAgICAgIGJv\nb2xlYW4gc3RhdGUpIHsKICAgICAgICBhc3NlcnRFcXVhbHMoc3RhdGUsIHB1\nLmlzTG9hZGVkKGVudCkpOwogICAgICAgIGFzc2VydEVxdWFscyhzdGF0ZSwg\ncHUuaXNMb2FkZWQoZW50LCAiaWQiKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKHN0YXRlLCBwdS5pc0xvYWRlZChlbnQsICJuYW1lIikpOwogICAgICAgIGFz\nc2VydEVxdWFscyhzdGF0ZSwgcHUuaXNMb2FkZWQoZW50LCAiZWFnZXJFbWJl\nZCIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZmFsc2UsIHB1LmlzTG9hZGVk\nKGVudCwgInRyYW5zRmllbGQiKSk7CiAgICB9Cn0K\n","encoding":"base64"}

