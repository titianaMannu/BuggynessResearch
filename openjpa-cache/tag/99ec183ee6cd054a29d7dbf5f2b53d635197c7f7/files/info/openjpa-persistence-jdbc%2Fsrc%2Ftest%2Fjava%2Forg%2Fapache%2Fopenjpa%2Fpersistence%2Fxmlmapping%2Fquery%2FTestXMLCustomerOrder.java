{"sha":"57718179936e6d260a6674832af7ef4f99bc47ef","node_id":"MDQ6QmxvYjIwNjM2NDo1NzcxODE3OTkzNmU2ZDI2MGE2Njc0ODMyYWY3ZWY0Zjk5YmM0N2Vm","size":13285,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/57718179936e6d260a6674832af7ef4f99bc47ef","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1sbWFw\ncGluZy5xdWVyeTsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5\nOwoKaW1wb3J0IGp1bml0LnRleHR1aS5UZXN0UnVubmVyOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9u\nYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlclNQ\nSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0\nLlNpbmdsZUVNRlRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLnhtbG1hcHBpbmcuZW50aXRpZXMuQ3VzdG9tZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1sbWFwcGlu\nZy5lbnRpdGllcy5FQWRkcmVzczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS54bWxtYXBwaW5nLmVudGl0aWVzLk9yZGVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnhtbG1hcHBpbmcu\nZW50aXRpZXMuQ3VzdG9tZXIuQ3JlZGl0UmF0aW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnhtbG1hcHBpbmcueG1sYmluZGlu\nZ3MubXlhZGRyZXNzLkFkZHJlc3M7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UueG1sbWFwcGluZy54bWxiaW5kaW5ncy5teWFkZHJl\nc3MuQ0FOQWRkcmVzczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS54bWxtYXBwaW5nLnhtbGJpbmRpbmdzLm15YWRkcmVzcy5PYmpl\nY3RGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLnhtbG1hcHBpbmcueG1sYmluZGluZ3MubXlhZGRyZXNzLlVTQUFkZHJl\nc3M7CgovKioKICogVGVzdCBxdWVyeSB3aXRoIHByZWRpY2F0ZXMgb24gcGVy\nc2lzdGVudCBmaWVsZCBtYXBwZWQgdG8gWE1MIGNvbHVtbi4KICogU2FtcGxl\ncyBvZiBwbGF0Zm9ybSBzcGVjaWZpYyBzcWxzIGFyZSB1bmRlciByZXNvdXJj\nZXMgaW4KICogVGVzdFhNTEN1c3RvbWVyT3JkZXIuW2RibmFtZV0gZmlsZXMu\nCiAqIAogKiBEQjIgcmVxdWlyZXMgc29tZSBzcGVjaWFsIG9wdGlvbnMgb24g\ndGhlIGRhdGFiYXNlIGNyZWF0aW9uIHRvIGFsbG93IGZvcgogKiBuYXRpdmUg\nWE1MIHN1cHBvcnQ6CiAqIGNyZWF0ZSBkYXRhYmFzZSB0ZXN0IHVzaW5nIGNv\nZGVzZXQgdXRmLTggdGVycml0b3J5IHVzCiAqIAogKiBAYXV0aG9yIENhdGFs\naW5hIFdlaQogKiBAYXV0aG9yIE1pbG9zeiBUeWxlbmRhCiAqIEBzaW5jZSAx\nLjAuMAogKi8KcHVibGljIGNsYXNzIFRlc3RYTUxDdXN0b21lck9yZGVyCiAg\nICBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKICAgIAogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgaW50IE9SREVSXzFfT0lEID0gMTA7CiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBkb3VibGUgT1JERVJfMV9BTU9VTlQgPSA4NTA7\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBib29sZWFuIE9SREVSXzFfREVM\nSVZFUkVEID0gZmFsc2U7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50\nIE9SREVSXzJfT0lEID0gMjA7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBk\nb3VibGUgT1JERVJfMl9BTU9VTlQgPSAxMDAwOwogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgYm9vbGVhbiBPUkRFUl8yX0RFTElWRVJFRCA9IGZhbHNlOwoK\nICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIHNldFVwKEN1c3Rv\nbWVyLmNsYXNzLCBDdXN0b21lci5DdXN0b21lcktleS5jbGFzcywgT3JkZXIu\nY2xhc3MsCiAgICAgICAgICAgIEVBZGRyZXNzLmNsYXNzLCBEUk9QX1RBQkxF\nUyk7ICAvLyB0ZXN0IGNyZWF0ZSB0YWJsZSBEREwgZm9yIFhNTCBjb2x1bW4K\nCiAgICAgICAgLy8gc2tpcCB0ZXN0IGlmIGRpY3Rpb25hcnkgaGFzIG5vIHN1\ncHBvcnQgZm9yIFhNTCBjb2x1bW4gdHlwZQogICAgICAgIHNldFRlc3RzRGlz\nYWJsZWQoIWRpY3Rpb25hcnlTdXBwb3J0c1hNTENvbHVtbigpKTsKICAgICAg\nICBpZiAoaXNUZXN0c0Rpc2FibGVkKCkpIHsKICAgICAgICAgICAgZ2V0TG9n\nKCkudHJhY2UoIlRlc3RYTUxDdXN0b21lck9yZGVyKCkgLSBTa2lwcGluZyBh\nbGwgdGVzdHMgLSBObyBYTUwgQ29sdW1uIHN1cHBvcnQiKTsKICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgcGVyc2lz\ndEVudGl0aWVzKGVtKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgQFN1cHBy\nZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nWE1MRmllbGRQcm9qZWN0aW9uKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIExpc3Q8\nQWRkcmVzcz4gYWRkcnMgPSBlbS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAg\nInNlbGVjdCBvLnNoaXBBZGRyZXNzIGZyb20gT3JkZXIgbyBvcmRlciBieSBv\nLm9pZCIpCiAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIGFkZHJzLnNpemUoKSk7CiAgICAg\nICAgCiAgICAgICAgQWRkcmVzcyBhZGRyZXNzRnJvbURiID0gYWRkcnMuZ2V0\nKDApOwogICAgICAgIEFkZHJlc3MgYWRkcmVzcyA9IGNyZWF0ZVVTQUFkZHJl\nc3MoIkhhcnJ5J3MgQXV0byIpOwogICAgICAgIGFzc2VydEVxdWFscyhhZGRy\nZXNzLnRvU3RyaW5nKCksIGFkZHJlc3NGcm9tRGIudG9TdHJpbmcoKSk7CiAg\nICAgICAgCiAgICAgICAgYWRkcmVzc0Zyb21EYiA9IGFkZHJzLmdldCgxKTsK\nICAgICAgICBhZGRyZXNzID0gY3JlYXRlQ0FOQWRkcmVzcygiQSZKIEF1dG8i\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoYWRkcmVzcy50b1N0cmluZygpLCBh\nZGRyZXNzRnJvbURiLnRvU3RyaW5nKCkpOwogICAgICAgIAogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1\nbmNoZWNrZWQiKQogICAgcHVibGljIHZvaWQgdGVzdFhNTEZpZWxkSW5FbnRp\ndHkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgTGlzdDxPcmRlcj4gb3JkZXJzID0g\nZW0uY3JlYXRlUXVlcnkoCiAgICAgICAgICAgICJzZWxlY3QgbyBmcm9tIE9y\nZGVyIG8gb3JkZXIgYnkgby5vaWQiKQogICAgICAgICAgICAuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygyLCBvcmRl\ncnMuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBPcmRlciBvcmRlckZyb21E\nYiA9IG9yZGVycy5nZXQoMCk7CiAgICAgICAgQWRkcmVzcyBhZGRyZXNzRnJv\nbURiID0gb3JkZXJGcm9tRGIuZ2V0U2hpcEFkZHJlc3MoKTsKICAgICAgICBB\nZGRyZXNzIGFkZHJlc3MgPSBjcmVhdGVVU0FBZGRyZXNzKCJIYXJyeSdzIEF1\ndG8iKTsKICAgICAgICBhc3NlcnRFcXVhbHMoYWRkcmVzcy50b1N0cmluZygp\nLCBhZGRyZXNzRnJvbURiLnRvU3RyaW5nKCkpOwogICAgICAgIAogICAgICAg\nIG9yZGVyRnJvbURiID0gb3JkZXJzLmdldCgxKTsKICAgICAgICBhZGRyZXNz\nRnJvbURiID0gb3JkZXJGcm9tRGIuZ2V0U2hpcEFkZHJlc3MoKTsKICAgICAg\nICBhZGRyZXNzID0gY3JlYXRlQ0FOQWRkcmVzcygiQSZKIEF1dG8iKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoYWRkcmVzcy50b1N0cmluZygpLCBhZGRyZXNz\nRnJvbURiLnRvU3RyaW5nKCkpOwogICAgICAgIAogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICB9CgogICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIp\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0WE1MU3RyaW5nVG9YTUxTdHJpbmdDb21w\nYXJpc29uKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIExpc3Q8T2JqZWN0W10+IG9y\nZGVycyA9IGVtLmNyZWF0ZVF1ZXJ5KAogICAgICAgICAgICAic2VsZWN0IG8s\nIG8yIGZyb20gT3JkZXIgbywgT3JkZXIgbzIgd2hlcmUgby5zaGlwQWRkcmVz\ncy5jaXR5ICIgKwogICAgICAgICAgICAiPSBvMi5zaGlwQWRkcmVzcy5jaXR5\nIG9yZGVyIGJ5IG8ub2lkIikKICAgICAgICAgICAgLmdldFJlc3VsdExpc3Qo\nKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgb3JkZXJzLnNp\nemUoKSk7CgogICAgICAgIE9iamVjdFtdIG9yZGVyc0Zyb21EYiA9IG9yZGVy\ncy5nZXQoMCk7CiAgICAgICAgT3JkZXIgb3JkZXIxID0gKE9yZGVyKSBvcmRl\ncnNGcm9tRGJbMF07CiAgICAgICAgT3JkZXIgb3JkZXIyID0gKE9yZGVyKSBv\ncmRlcnNGcm9tRGJbMV07CiAgICAgICAgYXNzZXJ0RXF1YWxzKE9SREVSXzFf\nT0lELCBvcmRlcjEuZ2V0T2lkKCkpOwogICAgICAgIGFzc2VydE9yZGVyc0Vx\ndWFsKG9yZGVyMSwgb3JkZXIyKTsKCiAgICAgICAgb3JkZXJzRnJvbURiID0g\nb3JkZXJzLmdldCgxKTsKICAgICAgICBvcmRlcjEgPSAoT3JkZXIpIG9yZGVy\nc0Zyb21EYlswXTsKICAgICAgICBvcmRlcjIgPSAoT3JkZXIpIG9yZGVyc0Zy\nb21EYlsxXTsKICAgICAgICBhc3NlcnRFcXVhbHMoT1JERVJfMl9PSUQsIG9y\nZGVyMS5nZXRPaWQoKSk7CiAgICAgICAgYXNzZXJ0T3JkZXJzRXF1YWwob3Jk\nZXIxLCBvcmRlcjIpOwogICAgICAgIAogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0WE1MU3RyaW5nVG9FbWJlZGRlZFN0cmluZ0NvbXBh\ncmlzb24oKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgTGlzdDxPcmRlcj4gb3JkZXJz\nID0gZW0uY3JlYXRlUXVlcnkoCiAgICAgICAgICAgICJzZWxlY3QgbyBmcm9t\nIE9yZGVyIG8sIEN1c3RvbWVyIGMgd2hlcmUgby5zaGlwQWRkcmVzcy5jaXR5\nICIgKwogICAgICAgICAgICAiPSBjLmFkZHJlc3MuY2l0eSIpCiAgICAgICAg\nICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIG9yZGVycy5zaXplKCkpOwogICAgICAgIE9yZGVyIG9yZGVy\nID0gb3JkZXJzLmdldCgwKTsKICAgICAgICBhc3NlcnRFcXVhbHMoT1JERVJf\nMV9PSUQsIG9yZGVyLmdldE9pZCgpKTsKICAgICAgICAKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNr\nZWQiKQogICAgcHVibGljIHZvaWQgdGVzdFhNTFN0cmluZ1RvQ29uc3RhbnRT\ndHJpbmdDb21wYXJpc29uKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIExpc3Q8T3Jk\nZXI+IG9yZGVycyA9IGVtLmNyZWF0ZVF1ZXJ5KAogICAgICAgICAgICAic2Vs\nZWN0IG8gZnJvbSBPcmRlciBvIHdoZXJlIG8uc2hpcEFkZHJlc3MuY2l0eSA9\nICdTYW4gSm9zZSciKQogICAgICAgICAgICAuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygxLCBvcmRlcnMuc2l6ZSgp\nKTsKICAgICAgICBPcmRlciBvcmRlciA9IG9yZGVycy5nZXQoMCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKE9SREVSXzFfT0lELCBvcmRlci5nZXRPaWQoKSk7\nCiAgICAgICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBAU3Vw\ncHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikKICAgIHB1YmxpYyB2b2lkIHRl\nc3RYTUxTdHJpbmdUb1BhcmFtZXRlclN0cmluZ0NvbXBhcmlzb24oKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgUXVlcnkgcXVlcnkgPSBlbS5jcmVhdGVRdWVyeSgK\nICAgICAgICAgICAgInNlbGVjdCBvIGZyb20gT3JkZXIgbyB3aGVyZSBvLnNo\naXBBZGRyZXNzLmNpdHkgPSA6Y2l0eSIpOwogICAgICAgIHF1ZXJ5LnNldFBh\ncmFtZXRlcigiY2l0eSIsICJTYW4gSm9zZSIpOwogICAgICAgIExpc3Q8T3Jk\nZXI+IG9yZGVycyA9IHF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIG9yZGVycy5zaXplKCkpOwogICAgICAgIE9yZGVy\nIG9yZGVyID0gb3JkZXJzLmdldCgwKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nT1JERVJfMV9PSUQsIG9yZGVyLmdldE9pZCgpKTsKICAgICAgICAKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1\nbmNoZWNrZWQiKQogICAgcHVibGljIHZvaWQgdGVzdFBhcmFtZXRlclN0cmlu\nZ1RvWE1MU3RyaW5nQ29tcGFyaXNvbigpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBR\ndWVyeSBxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KAogICAgICAgICAgICAic2Vs\nZWN0IG8gZnJvbSBPcmRlciBvIHdoZXJlIDpjaXR5ID0gby5zaGlwQWRkcmVz\ncy5jaXR5Iik7CiAgICAgICAgcXVlcnkuc2V0UGFyYW1ldGVyKCJjaXR5Iiwg\nIlNhbiBKb3NlIik7CiAgICAgICAgTGlzdDxPcmRlcj4gb3JkZXJzID0gcXVl\ncnkuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoMSwg\nb3JkZXJzLnNpemUoKSk7CiAgICAgICAgT3JkZXIgb3JkZXIgPSBvcmRlcnMu\nZ2V0KDApOwogICAgICAgIGFzc2VydEVxdWFscyhPUkRFUl8xX09JRCwgb3Jk\nZXIuZ2V0T2lkKCkpOwogICAgICAgIAogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdFVwZGF0ZSgpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAg\nIE9yZGVyIG9yZGVyID0gZW0uZmluZChPcmRlci5jbGFzcywgT1JERVJfMV9P\nSUQpOwogICAgICAgIFVTQUFkZHJlc3MgYWRkcmVzcyA9IChVU0FBZGRyZXNz\nKSBvcmRlci5nZXRTaGlwQWRkcmVzcygpOwogICAgICAgIGFkZHJlc3Muc2V0\nQ2l0eSgiQ3VwZXJ0aW5vIik7CiAgICAgICAgYWRkcmVzcy5zZXRaSVAoOTUw\nMTQpOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CgogICAgICAgIG9yZGVyID0gZW0uZmluZChPcmRlci5jbGFzcywg\nT1JERVJfMV9PSUQpOwogICAgICAgIGFkZHJlc3MgPSAoVVNBQWRkcmVzcykg\nb3JkZXIuZ2V0U2hpcEFkZHJlc3MoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nIkN1cGVydGlubyIsIGFkZHJlc3MuZ2V0Q2l0eSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoOTUwMTQsIGFkZHJlc3MuZ2V0WklQKCkpOwogICAgICAgIAog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0TnVsbGlm\neSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CgogICAgICAgIE9yZGVyIG9yZGVyID0gZW0uZmluZChPcmRlci5j\nbGFzcywgT1JERVJfMV9PSUQpOwogICAgICAgIG9yZGVyLnNldFNoaXBBZGRy\nZXNzKG51bGwpOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CgogICAgICAgIG9yZGVyID0gZW0uZmluZChPcmRlci5j\nbGFzcywgT1JERVJfMV9PSUQpOwogICAgICAgIEFkZHJlc3MgYWRkcmVzcyA9\nIG9yZGVyLmdldFNoaXBBZGRyZXNzKCk7CiAgICAgICAgYXNzZXJ0TnVsbChh\nZGRyZXNzKTsKICAgICAgICAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdFhNTFN0cmluZ1RvQ29uc3RhbnRJbnRDb21wYXJpc29u\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGVtLmNy\nZWF0ZVF1ZXJ5KAogICAgICAgICAgICAgICAgInNlbGVjdCBvIGZyb20gT3Jk\nZXIgbyB3aGVyZSBvLnNoaXBBZGRyZXNzLmNpdHkgPSA5NTE0MSIpCiAgICAg\nICAgICAgICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIH0gY2F0Y2gg\nKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpYWUpIHsKICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGVtLmNs\nb3NlKCk7CiAgICAgICAgfQogICAgICAgIGZhaWwoImNyZWF0ZVF1ZXJ5IHNo\nb3VsZCB0aHJvdyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdFhNTExpc3RUb0NvbnN0YW50U3RyaW5n\nQ29tcGFyaXNvbigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBlbS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAgICAgICJzZWxlY3Qg\nbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5zaGlwQWRkcmVzcy5zdHJlZXQgIgog\nICAgICAgICAgICAgICAgICAgICsgIj0gJzU1NSBCYWlsZXknIikuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbiBpYWUpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0g\nZmluYWxseSB7CiAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQog\nICAgICAgIGZhaWwoImNyZWF0ZVF1ZXJ5IHNob3VsZCB0aHJvdyBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdFN1YmNsYXNzUHJvcGVydHlJblhNTEZpZWxkQ29tcGFyaXNvbigpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBlbS5jcmVhdGVR\ndWVyeSgKICAgICAgICAgICAgICAgICJzZWxlY3QgbyBmcm9tIE9yZGVyIG8g\nd2hlcmUgby5zaGlwQWRkcmVzcy56aXAgPSA5NTE0MSIpCiAgICAgICAgICAg\nICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIH0gY2F0Y2ggKElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbiBpYWUpIHsKICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGVtLmNsb3NlKCk7\nCiAgICAgICAgfQogICAgICAgIGZhaWwoImNyZWF0ZVF1ZXJ5IHNob3VsZCB0\naHJvdyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICB9CgogICAg\ncHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAg\nICAgIFRlc3RSdW5uZXIucnVuKFRlc3RYTUxDdXN0b21lck9yZGVyLmNsYXNz\nKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcGVyc2lzdEVudGl0aWVzKEVu\ndGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBDdXN0b21lciBjMiA9IG5ldyBD\ndXN0b21lcigpOwogICAgICAgIGMyLnNldENpZCggbmV3IEN1c3RvbWVyLkN1\nc3RvbWVyS2V5KCJVU0EiLCAyKSApOwogICAgICAgIGMyLnNldE5hbWUoIkEm\nSiBBdXRvIik7CiAgICAgICAgYzIuc2V0UmF0aW5nKCBDcmVkaXRSYXRpbmcu\nR09PRCApOwogICAgICAgIGMyLnNldEFkZHJlc3MobmV3IEVBZGRyZXNzKCIy\nNDgwIENhbXBiZWxsIEF2ZSIsICJDYW1wYmVsbCIsICJDQSIKICAgICAgICAg\nICAgICAgICwgIjk1MTIzIikpOwogICAgICAgIGVtLnBlcnNpc3QoYzIpOwoK\nICAgICAgICBDdXN0b21lciBjMSA9IG5ldyBDdXN0b21lcigpOwogICAgICAg\nIGMxLnNldENpZCggbmV3IEN1c3RvbWVyLkN1c3RvbWVyS2V5KCJVU0EiLCAx\nKSApOwogICAgICAgIGMxLnNldE5hbWUoIkhhcnJ5J3MgQXV0byIpOwogICAg\nICAgIGMxLnNldFJhdGluZyggQ3JlZGl0UmF0aW5nLkdPT0QgKTsKICAgICAg\nICBjMS5zZXRBZGRyZXNzKCBuZXcgRUFkZHJlc3MoIjEyNTAwIE1vbnRlcmV5\nIiwgIlNhbiBKb3NlIiwgIkNBIiwKICAgICAgICAgICAgICAgICI5NTE0MSIp\nKTsKICAgICAgICBlbS5wZXJzaXN0KGMxKTsKCiAgICAgICAgT3JkZXIgbzEg\nPSBuZXcgT3JkZXIoT1JERVJfMV9PSUQsIE9SREVSXzFfQU1PVU5ULCBPUkRF\nUl8xX0RFTElWRVJFRCwKICAgICAgICAgICAgICAgIGMxKTsKICAgICAgICBv\nMS5zZXRTaGlwQWRkcmVzcyhjcmVhdGVVU0FBZGRyZXNzKGMxLmdldE5hbWUo\nKSkpOwogICAgICAgIGVtLnBlcnNpc3QobzEpOwoKICAgICAgICBPcmRlciBv\nMiA9IG5ldyBPcmRlcihPUkRFUl8yX09JRCwgT1JERVJfMl9BTU9VTlQsIE9S\nREVSXzJfREVMSVZFUkVELAogICAgICAgICAgICAgICAgYzEpOwogICAgICAg\nIG8yLnNldFNoaXBBZGRyZXNzKGNyZWF0ZUNBTkFkZHJlc3MoYzIuZ2V0TmFt\nZSgpKSk7CiAgICAgICAgZW0ucGVyc2lzdChvMik7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDaGVjayB3aGV0aGVyIERCRGljdGlvbmFyeSBzdXBwb3J0cyBY\nTUwgY29sdW1uLgogICAgICogVGhpcyBpcyBkb25lIGJ5IGZvcmNpbmcgdGhl\nIGV4ZWN1dGlvbiBvZgogICAgICoge0BsaW5rIERCRGljdGlvbmFyeSNjb25u\nZWN0ZWRDb25maWd1cmF0aW9uKENvbm5lY3Rpb24pfS4KICAgICAqIFRoaXMg\naXMgd2hlcmUgc29tZSBkaWN0aW9uYXJpZXMgYWN0dWFsbHkgZGV0ZXJtaW5l\nIHdoZXRoZXIgWE1MIGNvbHVtbiBpcwogICAgICogc3VwcG9ydGVkLgogICAg\nICogQHJldHVybiB0cnVlIGlmIHtAbGluayBEQkRpY3Rpb25hcnl9IHN1cHBv\ncnRzIFhNTCBjb2x1bW4KICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGRp\nY3Rpb25hcnlTdXBwb3J0c1hNTENvbHVtbigpIHsKICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mID0gY3JlYXRlRU1GKCk7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0g\nKChKREJDQ29uZmlndXJhdGlvbikgZW0uZ2V0Q29uZmlndXJhdGlvbigpKQog\nICAgICAgICAgICAuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsKICAgICAg\nICBjbG9zZUVNRihlbWYpOwogICAgICAgIHJldHVybiBkaWN0LnN1cHBvcnRz\nWE1MQ29sdW1uOwogICAgfQogICAgCiAgICBwcml2YXRlIFVTQUFkZHJlc3Mg\nY3JlYXRlVVNBQWRkcmVzcyhTdHJpbmcgbmFtZSkgewogICAgICAgIFVTQUFk\nZHJlc3MgYWRkcmVzcyA9IG5ldyBPYmplY3RGYWN0b3J5KCkuY3JlYXRlVVNB\nQWRkcmVzcygpOwogICAgICAgIGFkZHJlc3Muc2V0TmFtZShuYW1lKTsKICAg\nICAgICBhZGRyZXNzLmdldFN0cmVldCgpLmFkZCgiMTI1MDAgTW9udGVyZXki\nKTsKICAgICAgICBhZGRyZXNzLnNldENpdHkoIlNhbiBKb3NlIik7CiAgICAg\nICAgYWRkcmVzcy5zZXRTdGF0ZSgiQ0EiKTsKICAgICAgICBhZGRyZXNzLnNl\ndFpJUChuZXcgSW50ZWdlcigiOTUxNDEiKSk7CiAgICAgICAgcmV0dXJuIGFk\nZHJlc3M7CiAgICB9CgogICAgcHJpdmF0ZSBDQU5BZGRyZXNzIGNyZWF0ZUNB\nTkFkZHJlc3MoU3RyaW5nIG5hbWUpIHsKICAgICAgICBDQU5BZGRyZXNzIGFk\nZHJlc3MgPSBuZXcgT2JqZWN0RmFjdG9yeSgpLmNyZWF0ZUNBTkFkZHJlc3Mo\nKTsKICAgICAgICBhZGRyZXNzLnNldE5hbWUobmFtZSk7CiAgICAgICAgYWRk\ncmVzcy5nZXRTdHJlZXQoKS5hZGQoIjEyMyBXYXJkZW4gUm9hZCIpOwogICAg\nICAgIGFkZHJlc3Muc2V0Q2l0eSgiTWFya2hhbSIpOwogICAgICAgIGFkZHJl\nc3Muc2V0UG9zdGFsQ29kZSgiTDZHIDFDNyIpOwogICAgICAgIGFkZHJlc3Mu\nc2V0UHJvdmluY2UoIk9OIik7CiAgICAgICAgcmV0dXJuIGFkZHJlc3M7CiAg\nICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBhc3NlcnRPcmRlcnNFcXVhbChP\ncmRlciBvMSwgT3JkZXIgbzIpIHsKICAgICAgICBhc3NlcnRFcXVhbHMobzEu\nZ2V0T2lkKCksIG8yLmdldE9pZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nbzEuZ2V0QW1vdW50KCksIG8yLmdldEFtb3VudCgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMobzEuaXNEZWxpdmVyZWQoKSwgbzIuaXNEZWxpdmVyZWQoKSk7\nCiAgICB9Cgp9Cg==\n","encoding":"base64"}

