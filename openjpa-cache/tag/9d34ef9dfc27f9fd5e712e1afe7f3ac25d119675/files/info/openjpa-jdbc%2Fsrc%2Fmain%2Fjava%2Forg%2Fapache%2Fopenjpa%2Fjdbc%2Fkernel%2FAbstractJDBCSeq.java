{"sha":"110d17efbfa0e5e8dcf13a17bff0f3c44a3760ac","node_id":"MDQ6QmxvYjIwNjM2NDoxMTBkMTdlZmJmYTBlNWU4ZGNmMTNhMTdiZmYwZjNjNDRhMzc2MGFj","size":7156,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/110d17efbfa0e5e8dcf13a17bff0f3c44a3760ac","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmF4LnNxbC5EYXRhU291cmNlOwppbXBvcnQg\namF2YXgudHJhbnNhY3Rpb24uVHJhbnNhY3Rpb247CmltcG9ydCBqYXZheC50\ncmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXI7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmVN\nYW5hZ2VyLlJlZkNvdW50Q29ubmVjdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNjaGVtYUdyb3VwOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEV4Y2VwdGlvbnM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlQ29udGV4dDsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RvcmVFeGNl\ncHRpb247CgovKioKICogQWJzdHJhY3Qgc2VxdWVuY2UgaW1wbGVtZW50YXRp\nb24uIEhhbmRsZXMgb2J0YWluaW5nIHRoZSBwcm9wZXIKICogY29ubmVjdGlv\nbiB0byB1c2VkIGJhc2VkIG9uIHdoZXRoZXIgdGhlIHNlcXVlbmNlIGlzIHRy\nYW5zYWN0aW9uYWwgYW5kCiAqIHdoZXRoZXIgYSBzZWNvbmQgZGF0YXNvdXJj\nZSBpcyBjb25maWd1cmVkLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8K\ncHVibGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0SkRCQ1NlcQogICAgaW1w\nbGVtZW50cyBKREJDU2VxIHsKCiAgICBwcm90ZWN0ZWQgaW50IHR5cGUgPSBU\nWVBFX0RFRkFVTFQ7CiAgICBwcm90ZWN0ZWQgT2JqZWN0IGN1cnJlbnQgPSBu\ndWxsOwoKICAgIC8qKgogICAgICogUmVjb3JkcyB0aGUgc2VxdWVuY2UgdHlw\nZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VHlwZShpbnQgdHlwZSkg\newogICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdCBuZXh0KFN0b3JlQ29udGV4dCBjdHgsIENsYXNzTWV0YURhdGEg\nbWV0YSkgewogICAgICAgIEpEQkNTdG9yZSBzdG9yZSA9IGdldFN0b3JlKGN0\neCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgT2JqZWN0IGN1cnJlbnRM\nb2NhbCA9IG5leHRJbnRlcm5hbChzdG9yZSwgKENsYXNzTWFwcGluZykgbWV0\nYSk7CiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50TG9jYWw7CiAgICAg\nICAgICAgIHJldHVybiBjdXJyZW50TG9jYWw7CiAgICAgICAgfSBjYXRjaCAo\nT3BlbkpQQUV4Y2VwdGlvbiBrZSkgewogICAgICAgICAgICB0aHJvdyBrZTsK\nICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAg\nICAgdGhyb3cgU1FMRXhjZXB0aW9ucy5nZXRTdG9yZShzZSwgc3RvcmUuZ2V0\nREJEaWN0aW9uYXJ5KCkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBTdG9yZUV4Y2VwdGlvbihlKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIE9iamVjdCBjdXJyZW50KFN0\nb3JlQ29udGV4dCBjdHgsIENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAg\nIEpEQkNTdG9yZSBzdG9yZSA9IGdldFN0b3JlKGN0eCk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRJbnRlcm5hbChzdG9yZSwg\nKENsYXNzTWFwcGluZykgbWV0YSk7CiAgICAgICAgfSBjYXRjaCAoT3BlbkpQ\nQUV4Y2VwdGlvbiBrZSkgewogICAgICAgICAgICB0aHJvdyBrZTsKICAgICAg\nICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgdGhy\nb3cgU1FMRXhjZXB0aW9ucy5nZXRTdG9yZShzZSwgc3RvcmUuZ2V0REJEaWN0\naW9uYXJ5KCkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBTdG9yZUV4Y2VwdGlvbihlKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgYWxsb2NhdGUoaW50IGFkZGl0\naW9uYWwsIFN0b3JlQ29udGV4dCBjdHgsIENsYXNzTWV0YURhdGEgbWV0YSkg\newogICAgICAgIEpEQkNTdG9yZSBzdG9yZSA9IGdldFN0b3JlKGN0eCk7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgYWxsb2NhdGVJbnRlcm5hbChhZGRp\ndGlvbmFsLCBzdG9yZSwgKENsYXNzTWFwcGluZykgbWV0YSk7CiAgICAgICAg\nfSBjYXRjaCAoT3BlbkpQQUV4Y2VwdGlvbiBrZSkgewogICAgICAgICAgICB0\naHJvdyBrZTsKICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsK\nICAgICAgICAgICAgdGhyb3cgU1FMRXhjZXB0aW9ucy5nZXRTdG9yZShzZSwg\nc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBTdG9yZUV4Y2Vw\ndGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBOby1v\ncC4KICAgICAqLwogICAgcHVibGljIHZvaWQgYWRkU2NoZW1hKENsYXNzTWFw\ncGluZyBtYXBwaW5nLCBTY2hlbWFHcm91cCBncm91cCkgewogICAgfQoKICAg\nIC8qKgogICAgICogTm8tb3AuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNs\nb3NlKCkgewogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBuZXh0\nIHNlcXVlbmNlIG9iamVjdC4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3Ry\nYWN0IE9iamVjdCBuZXh0SW50ZXJuYWwoSkRCQ1N0b3JlIHN0b3JlLAogICAg\nICAgIENsYXNzTWFwcGluZyBtYXBwaW5nKQogICAgICAgIHRocm93cyBFeGNl\ncHRpb247CiAgICAKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB7QGxpbmsg\nSkRCQ0NvbmZpZ3VyYXRpb259IGZvciB0aGlzIHNlcXVlbmNlLgogICAgICov\nCiAgICBwdWJsaWMgYWJzdHJhY3QgSkRCQ0NvbmZpZ3VyYXRpb24gZ2V0Q29u\nZmlndXJhdGlvbigpOwoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBjdXJy\nZW50IHNlcXVlbmNlIG9iamVjdC4gQnkgZGVmYXVsdCByZXR1cm5zIHRoZSBs\nYXN0CiAgICAgKiBzZXF1ZW5jZSB2YWx1ZSB1c2VkLCBvciBudWxsIGlmIG5v\nIHNlcXVlbmNlIHZhbHVlcyBoYXZlIGJlZW4gcmVxdWVzdGVkCiAgICAgKiB5\nZXQuIERlZmF1bHQgaW1wbGVtZW50YXRpb24gaXMgbm90IHRocmVhZHNhZmUu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBPYmplY3QgY3VycmVudEludGVybmFs\nKEpEQkNTdG9yZSBzdG9yZSwgQ2xhc3NNYXBwaW5nIG1hcHBpbmcpCiAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBBbGxvY2F0ZSBhZGRpdGlvbmFsIHNl\ncXVlbmNlIHZhbHVlcy4gRG9lcyBub3RoaW5nIGJ5IGRlZmF1bHQuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCB2b2lkIGFsbG9jYXRlSW50ZXJuYWwoaW50IGFk\nZGl0aW9uYWwsIEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBDbGFzc01hcHBp\nbmcgbWFwcGluZykKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgIH0K\nCiAgICAvKioKICAgICAqIEV4dHJhY3QgdGhlIHN0b3JlIGZyb20gdGhlIGdp\ndmVuIGNvbnRleHQuCiAgICAgKi8KICAgIHByaXZhdGUgSkRCQ1N0b3JlIGdl\ndFN0b3JlKFN0b3JlQ29udGV4dCBjdHgpIHsKICAgICAgICByZXR1cm4gKEpE\nQkNTdG9yZSkgY3R4LmdldFN0b3JlTWFuYWdlcigpLmdldElubmVybW9zdERl\nbGVnYXRlKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiA8UD5SZXR1cm4gdGhl\nIGNvbm5lY3Rpb24gdG8gdXNlIGJhc2VkIG9uIHRoZSB0eXBlIG9mIHNlcXVl\nbmNlLiBUaGlzCiAgICAgKiBjb25uZWN0aW9uIHdpbGwgYXV0b21hdGljYWxs\neSBiZSBjbG9zZWQ7IGRvIG5vdCBjbG9zZSBpdC48L1A+CiAgICAgKiAKICAg\nICAqIEByZXR1cm4gSWYgdGhlIHNlcXVlbmNlIHR5cGUgaXMgPGNvZGU+VFlQ\nRV9UUkFOU0FDVElPTkFMPC9jb2RlPiBvciAKICAgICAqIDxjb2RlPlRZUEVf\nQ09OVElHVU9VUzwvY29kZT4gdGhlIGNvbm5lY3Rpb24gZnJvbSB0aGUge0Bs\naW5rIFN0b3JlTWFuYWdlcn0KICAgICAqIHdpbGwgYmUgcmV0dXJuZWQuIAog\nICAgICogCiAgICAgKiA8UD5PdGhlcndpc2UgYSBuZXcgY29ubmVjdGlvbiB3\naWxsIGJlIG9idGFpbmVkIHVzaW5nIERhdGFTb3VyY2UyIGZyb20gdGhlIAog\nICAgICogY3VycmVudCBjb25maWd1cmF0aW9uLiBJbiB0aGlzIGNhc2UgYXV0\nb2NvbW1pdCBpcyBzZXQgdG8gZmFsc2UgcHJpb3IgdG8gCiAgICAgKiByZXR1\ncm5pbmcgdGhlIGNvbm5lY3Rpb24uPC9QPgogICAgICovCiAgICBwcm90ZWN0\nZWQgQ29ubmVjdGlvbiBnZXRDb25uZWN0aW9uKEpEQkNTdG9yZSBzdG9yZSkK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpZiAodHlw\nZSA9PSBUWVBFX1RSQU5TQUNUSU9OQUwgfHwgdHlwZSA9PSBUWVBFX0NPTlRJ\nR1VPVVMpIHsKICAgICAgICAgICAgLy8gQWxzbyBpbmNyZW1lbnRzIHJlZiBj\nb3VudC4KICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmdldENvbm5lY3Rpb24o\nKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIEpEQkND\nb25maWd1cmF0aW9uIGNvbmYgPSBzdG9yZS5nZXRDb25maWd1cmF0aW9uKCk7\nCiAgICAgICAgICAgIERhdGFTb3VyY2UgZHMgPSBjb25mLmdldERhdGFTb3Vy\nY2UyKHN0b3JlLmdldENvbnRleHQoKSk7CiAgICAgICAgICAgIENvbm5lY3Rp\nb24gY29ubiA9IGRzLmdldENvbm5lY3Rpb24oKTsKICAgICAgICAgICAgaWYg\nKGNvbm4uZ2V0QXV0b0NvbW1pdCgpKQogICAgICAgICAgICAgICAgY29ubi5z\nZXRBdXRvQ29tbWl0KGZhbHNlKTsKICAgICAgICAgICAgcmV0dXJuIGNvbm47\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2xvc2UgdGhlIGN1\ncnJlbnQgY29ubmVjdGlvbi4gSWYgdGhlIHNlcXVlbmNlIGlzCiAgICAgKiA8\nY29kZT5UWVBFX1RSQU5TQUNUSU9OQUw8L2NvZGU+IG9yIDxjb2RlPlRZUEVf\nQ09OVElHVU9VUzwvY29kZT4KICAgICAqIHdlIHdpbGwgZGVjcmVtZW50IHRo\nZSByZWYgY291bnQuIE90aGVyd2lzZSB0aGUgY29ubmVjdGlvbiB3aWxsIGJl\nCiAgICAgKiBjb21taXR0ZWQgYW5kIHRoZW4gY2xvc2VkLiAKICAgICAqLwog\nICAgcHJvdGVjdGVkIHZvaWQgY2xvc2VDb25uZWN0aW9uKENvbm5lY3Rpb24g\nY29ubikgewogICAgICAgIGlmIChjb25uID09IG51bGwpCiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICBpZiAodHlwZSA9PSBUWVBFX1RSQU5TQUNUSU9O\nQUwgfHwgdHlwZSA9PSBUWVBFX0NPTlRJR1VPVVMpIHsKICAgICAgICAgICAg\nLy8gVGhlIHNlcSBpcyBwYXJ0IG9mIHRoZSBidXNpbmVzcyB0cmFuc2FjdGlv\nbiBob3dldmVyIHdlIG5lZWQKICAgICAgICAgICAgLy8gdG8gZGVjcmVtZW50\nIHRoZSByZWYgY291bnQgc28gdGhhdCB0aGUgY29ubmVjdGlvbiBtYXkgYmUg\nCiAgICAgICAgICAgIC8vIGNsb3NlZCBhcHByb3ByaWF0ZWx5LgogICAgICAg\nICAgICAJdHJ5IHsgCiAgICAgICAgICAgIAkJY29ubi5jbG9zZSgpOwogICAg\nICAgICAgICAJfQogICAgICAgICAgICAJY2F0Y2goU1FMRXhjZXB0aW9uIHNl\nKSB7IAogICAgICAgICAgICAJCXRocm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3Rv\ncmUoc2UpOwogICAgICAgICAgICAJfQogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgY29ubi5jb21taXQoKTsKICAgICAgICAgICAgfSBjYXRj\naCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBT\nUUxFeGNlcHRpb25zLmdldFN0b3JlKHNlKTsKICAgICAgICAgICAgfSBmaW5h\nbGx5IHsKICAgICAgICAgICAgICAgIHRyeSB7IGNvbm4uY2xvc2UoKTsgfSBj\nYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7fQogICAgICAgICAgICB9CiAgICAg\nICAgfQogICAgfQogICAgCiAgICAvKioKICAgICAqIERldGVjdCB3aGV0aGVy\nIG9yIG5vdCBPcGVuSlBBIHNob3VsZCBzdXNwZW5kIHRoZSB0cmFuc2FjdGlv\nbiBpbiAKICAgICAqIGEgbWFuYWdlZCBlbnZpcm9ubWVudC4KICAgICAqLwog\nICAgcHJvdGVjdGVkIGJvb2xlYW4gc3VzcGVuZEluSlRBKCkgewogICAgICAg\nIHJldHVybiBnZXRDb25maWd1cmF0aW9uKCkuaXNDb25uZWN0aW9uRmFjdG9y\neU1vZGVNYW5hZ2VkKCkgJiYgCiAgICAgICAgICAgIGdldENvbmZpZ3VyYXRp\nb24oKS5nZXRDb25uZWN0aW9uRmFjdG9yeTIoKSA9PSBudWxsOwogICAgfQp9\nCg==\n","encoding":"base64"}

