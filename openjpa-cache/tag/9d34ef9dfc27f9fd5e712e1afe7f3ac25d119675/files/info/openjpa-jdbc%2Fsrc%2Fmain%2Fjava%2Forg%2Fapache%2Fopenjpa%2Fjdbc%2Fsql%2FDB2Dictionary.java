{"sha":"6e2bcb1237adfcc3af9e883d6ee2e97ea5341fa7","node_id":"MDQ6QmxvYjIwNjM2NDo2ZTJiY2IxMjM3YWRmY2MzYWY5ZTg4M2Q2ZWUyZTk3ZWE1MzQxZmE3","size":33551,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6e2bcb1237adfcc3af9e883d6ee2e97ea5341fa7","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5sYW5nLnJlZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS5zcWwuQ29u\nbmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNlTWV0YURhdGE7Cmlt\ncG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnNxbC5U\neXBlczsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0\naWwuU3RyaW5nVG9rZW5pemVyOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLmtlcm5lbC5KREJDRmV0Y2hDb25maWd1cmF0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuRmlsdGVyVmFs\ndWU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhw\ncy5MaXQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwu\nZXhwcy5QYXJhbTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtl\ncm5lbC5leHBzLlZhbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuSW5kZXg7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuU2NoZW1hOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc2NoZW1hLlNlcXVlbmNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5GaWx0ZXJzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5t\nZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGls\nLk9wZW5KUEFFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsKCmltcG9ydCBzZXJwLnV0aWwu\nU3RyaW5nczsKCi8qKgogKiBEaWN0aW9uYXJ5IGZvciBJQk0gREIyIGRhdGFi\nYXNlLgogKi8KcHVibGljIGNsYXNzIERCMkRpY3Rpb25hcnkKICAgIGV4dGVu\nZHMgQWJzdHJhY3REQjJEaWN0aW9uYXJ5IHsKICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UK\nICAgICAgICAoREIyRGljdGlvbmFyeS5jbGFzcyk7CgogICAgcHVibGljIFN0\ncmluZyBvcHRpbWl6ZUNsYXVzZSA9ICJvcHRpbWl6ZSBmb3IiOwogICAgcHVi\nbGljIFN0cmluZyByb3dDbGF1c2UgPSAicm93IjsKICAgIHByb3RlY3RlZCBp\nbnQgZGIyU2VydmVyVHlwZSA9IDA7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBkYjJJU2VyaWVzVjVSM09yRWFybGllciA9IDE7CiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIGludCBkYjJVREJWODFPckVhcmxpZXIgPSAyOwogICAg\ncHVibGljIHN0YXRpYyBmaW5hbCBpbnQgZGIyWk9TVjh4T3JMYXRlciA9IDM7\nCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBkYjJVREJWODJPckxhdGVy\nID0gNDsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGRiMklTZXJpZXNW\nNVI0T3JMYXRlciA9IDU7Cglwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmlu\nZyBmb3JVcGRhdGUgPSAiRk9SIFVQREFURSI7CiAgICBwcm90ZWN0ZWQgc3Rh\ndGljIGZpbmFsIFN0cmluZyB3aXRoVVJDbGF1c2UgPSAiV0lUSCBVUiI7CiAg\nICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyB3aXRoQ1NDbGF1c2Ug\nPSAiV0lUSCBDUyI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmlu\nZyB3aXRoUlNDbGF1c2UgPSAiV0lUSCBSUyI7CiAgICBwcm90ZWN0ZWQgc3Rh\ndGljIGZpbmFsIFN0cmluZyB3aXRoUlJDbGF1c2UgPSAiV0lUSCBSUiI7CiAg\nICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyB1c2VLZWVwU2hhcmVM\nb2NrQ2xhdXNlCiAgICAgICAgPSAiVVNFIEFORCBLRUVQIFNIQVJFIExPQ0tT\nIjsKICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIHVzZUtlZXBV\ncGRhdGVMb2NrQ2xhdXNlCiAgICAgICAgPSAiVVNFIEFORCBLRUVQIFVQREFU\nRSBMT0NLUyI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyB1\nc2VLZWVwRXhjbHVzaXZlTG9ja0NsYXVzZQogICAgICAgID0gIlVTRSBBTkQg\nS0VFUCBFWENMVVNJVkUgTE9DS1MiOwogICAgcHJvdGVjdGVkIHN0YXRpYyBm\naW5hbCBTdHJpbmcgZm9yUmVhZE9ubHlDbGF1c2UgPSAiRk9SIFJFQUQgT05M\nWSI7CiAgICBwcm90ZWN0ZWQgU3RyaW5nIGRhdGFiYXNlUHJvZHVjdE5hbWUg\nPSAiIjsKICAgIHByb3RlY3RlZCBTdHJpbmcgZGF0YWJhc2VQcm9kdWN0VmVy\nc2lvbiA9ICIiOwogICAgcHJvdGVjdGVkIGludCBtYWogPSAwOwogICAgcHJv\ndGVjdGVkIGludCBtaW4gPSAwOwogICAgCiAgICBwcml2YXRlIGludCBkZWZh\ndWx0QmF0Y2hMaW1pdCA9IDEwMDsKCiAgICBwdWJsaWMgREIyRGljdGlvbmFy\neSgpIHsKICAgICAgICBwbGF0Zm9ybSA9ICJEQjIiOwogICAgICAgIHZhbGlk\nYXRpb25TUUwgPSAiU0VMRUNUIERJU1RJTkNUKENVUlJFTlQgVElNRVNUQU1Q\nKSBGUk9NICIKICAgICAgICAgICAgKyAiU1lTSUJNLlNZU1RBQkxFUyI7CiAg\nICAgICAgc3VwcG9ydHNTZWxlY3RFbmRJbmRleCA9IHRydWU7CgogICAgICAg\nIG5leHRTZXF1ZW5jZVF1ZXJ5ID0gIlZBTFVFUyBORVhUVkFMIEZPUiB7MH0i\nOwoKICAgICAgICBzZXF1ZW5jZVNRTCA9ICJTRUxFQ1QgU0VRU0NIRU1BIEFT\nIFNFUVVFTkNFX1NDSEVNQSwgIgogICAgICAgICAgICArICJTRVFOQU1FIEFT\nIFNFUVVFTkNFX05BTUUgRlJPTSBTWVNDQVQuU0VRVUVOQ0VTIjsKICAgICAg\nICBzZXF1ZW5jZVNjaGVtYVNRTCA9ICJTRVFTQ0hFTUEgPSA/IjsKICAgICAg\nICBzZXF1ZW5jZU5hbWVTUUwgPSAiU0VRTkFNRSA9ID8iOwogICAgICAgIGNo\nYXJhY3RlckNvbHVtblNpemUgPSAyNTQ7CgogICAgICAgIGJpbmFyeVR5cGVO\nYW1lID0gIkJMT0IoMU0pIjsKICAgICAgICBsb25nVmFyYmluYXJ5VHlwZU5h\nbWUgPSAiQkxPQigxTSkiOwogICAgICAgIHZhcmJpbmFyeVR5cGVOYW1lID0g\nIkJMT0IoMU0pIjsKICAgICAgICBjbG9iVHlwZU5hbWUgPSAiQ0xPQigxTSki\nOwogICAgICAgIGxvbmdWYXJjaGFyVHlwZU5hbWUgPSAiTE9ORyBWQVJDSEFS\nIjsKICAgICAgICBkYXRlUHJlY2lzaW9uID0gTUlDUk87CiAgICAgICAgc3Rv\ncmVDaGFyc0FzTnVtYmVycyA9IGZhbHNlOwoKICAgICAgICBmaXhlZFNpemVU\neXBlTmFtZVNldC5hZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117\nCiAgICAgICAgICAgICJMT05HIFZBUkNIQVIgRk9SIEJJVCBEQVRBIiwgIkxP\nTkcgVkFSQ0hBUiIsICJMT05HIFZBUkdSQVBISUMiLAogICAgICAgIH0pKTsK\nICAgICAgICBzeXN0ZW1TY2hlbWFzID0gbmV3IFN0cmluZygKICAgICAgICAg\nICAgICAgICJTWVNDQVQsU1lTSUJNLFNZU1NUQVQsU1lTSUJNQURNLFNZU1RP\nT0xTIik7CiAgICAgICAgbWF4Q29uc3RyYWludE5hbWVMZW5ndGggPSAxODsK\nICAgICAgICBtYXhJbmRleE5hbWVMZW5ndGggPSAxODsKICAgICAgICBtYXhD\nb2x1bW5OYW1lTGVuZ3RoID0gMzA7CiAgICAgICAgc3VwcG9ydHNEZWZlcnJl\nZENvbnN0cmFpbnRzID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNEZWZhdWx0\nRGVsZXRlQWN0aW9uID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNBbHRlclRh\nYmxlV2l0aERyb3BDb2x1bW4gPSBmYWxzZTsKCiAgICAgICAgc3VwcG9ydHNO\ndWxsVGFibGVGb3JHZXRDb2x1bW5zID0gZmFsc2U7CiAgICAgICAgcmVxdWly\nZXNDYXN0Rm9yTWF0aEZ1bmN0aW9ucyA9IHRydWU7CiAgICAgICAgcmVxdWly\nZXNDYXN0Rm9yQ29tcGFyaXNvbnMgPSB0cnVlOwoKICAgICAgICByZXNlcnZl\nZFdvcmRTZXQuYWRkQWxsKEFycmF5cy5hc0xpc3QobmV3IFN0cmluZ1tdewog\nICAgICAgICAgICAiQUZURVIiLCAiQUxJQVMiLCAiQUxMT1ciLCAiQVBQTElD\nQVRJT04iLCAiQVNTT0NJQVRFIiwgIkFTVVRJTUUiLAogICAgICAgICAgICAi\nQVVESVQiLCAiQVVYIiwgIkFVWElMSUFSWSIsICJCRUZPUkUiLCAiQklOQVJZ\nIiwgIkJVRkZFUlBPT0wiLAogICAgICAgICAgICAiQ0FDSEUiLCAiQ0FMTCIs\nICJDQUxMRUQiLCAiQ0FQVFVSRSIsICJDQVJESU5BTElUWSIsICJDQ1NJRCIs\nCiAgICAgICAgICAgICJDTFVTVEVSIiwgIkNPTExFQ1RJT04iLCAiQ09MTElE\nIiwgIkNPTU1FTlQiLCAiQ09OQ0FUIiwKICAgICAgICAgICAgIkNPTkRJVElP\nTiIsICJDT05UQUlOUyIsICJDT1VOVF9CSUciLCAiQ1VSUkVOVF9MQ19DVFlQ\nRSIsCiAgICAgICAgICAgICJDVVJSRU5UX1BBVEgiLCAiQ1VSUkVOVF9TRVJW\nRVIiLCAiQ1VSUkVOVF9USU1FWk9ORSIsICJDWUNMRSIsCiAgICAgICAgICAg\nICJEQVRBIiwgIkRBVEFCQVNFIiwgIkRBWVMiLCAiREIyR0VORVJBTCIsICJE\nQjJHRU5STCIsICJEQjJTUUwiLAogICAgICAgICAgICAiREJJTkZPIiwgIkRF\nRkFVTFRTIiwgIkRFRklOSVRJT04iLCAiREVURVJNSU5JU1RJQyIsICJESVNB\nTExPVyIsCiAgICAgICAgICAgICJETyIsICJEU05IQVRUUiIsICJEU1NJWkUi\nLCAiRFlOQU1JQyIsICJFQUNIIiwgIkVESVRQUk9DIiwgIkVMU0VJRiIsCiAg\nICAgICAgICAgICJFTkNPRElORyIsICJFTkQtRVhFQzEiLCAiRVJBU0UiLCAi\nRVhDTFVESU5HIiwgIkVYSVQiLCAiRkVOQ0VEIiwKICAgICAgICAgICAgIkZJ\nRUxEUFJPQyIsICJGSUxFIiwgIkZJTkFMIiwgIkZSRUUiLCAiRlVOQ1RJT04i\nLCAiR0VORVJBTCIsCiAgICAgICAgICAgICJHRU5FUkFURUQiLCAiR1JBUEhJ\nQyIsICJIQU5ETEVSIiwgIkhPTEQiLCAiSE9VUlMiLCAiSUYiLAogICAgICAg\nICAgICAiSU5DTFVESU5HIiwgIklOQ1JFTUVOVCIsICJJTkRFWCIsICJJTkhF\nUklUIiwgIklOT1VUIiwgIklOVEVHUklUWSIsCiAgICAgICAgICAgICJJU09C\nSUQiLCAiSVRFUkFURSIsICJKQVIiLCAiSkFWQSIsICJMQUJFTCIsICJMQ19D\nVFlQRSIsICJMRUFWRSIsCiAgICAgICAgICAgICJMSU5LVFlQRSIsICJMT0NB\nTEUiLCAiTE9DQVRPUiIsICJMT0NBVE9SUyIsICJMT0NLIiwgIkxPQ0tNQVgi\nLAogICAgICAgICAgICAiTE9DS1NJWkUiLCAiTE9ORyIsICJMT09QIiwgIk1B\nWFZBTFVFIiwgIk1JQ1JPU0VDT05EIiwKICAgICAgICAgICAgIk1JQ1JPU0VD\nT05EUyIsICJNSU5VVEVTIiwgIk1JTlZBTFVFIiwgIk1PREUiLCAiTU9ESUZJ\nRVMiLCAiTU9OVEhTIiwKICAgICAgICAgICAgIk5FVyIsICJORVdfVEFCTEUi\nLCAiTk9DQUNIRSIsICJOT0NZQ0xFIiwgIk5PREVOQU1FIiwgIk5PREVOVU1C\nRVIiLAogICAgICAgICAgICAiTk9NQVhWQUxVRSIsICJOT01JTlZBTFVFIiwg\nIk5PT1JERVIiLCAiTlVMTFMiLCAiTlVNUEFSVFMiLCAiT0JJRCIsCiAgICAg\nICAgICAgICJPTEQiLCAiT0xEX1RBQkxFIiwgIk9QVElNSVpBVElPTiIsICJP\nUFRJTUlaRSIsICJPVVQiLCAiT1ZFUlJJRElORyIsCiAgICAgICAgICAgICJQ\nQUNLQUdFIiwgIlBBUkFNRVRFUiIsICJQQVJUIiwgIlBBUlRJVElPTiIsICJQ\nQVRIIiwgIlBJRUNFU0laRSIsCiAgICAgICAgICAgICJQTEFOIiwgIlBSSVFU\nWSIsICJQUk9HUkFNIiwgIlBTSUQiLCAiUVVFUllOTyIsICJSRUFEUyIsICJS\nRUNPVkVSWSIsCiAgICAgICAgICAgICJSRUZFUkVOQ0lORyIsICJSRUxFQVNF\nIiwgIlJFTkFNRSIsICJSRVBFQVQiLCAiUkVTRVQiLCAiUkVTSUdOQUwiLAog\nICAgICAgICAgICAiUkVTVEFSVCIsICJSRVNVTFQiLCAiUkVTVUxUX1NFVF9M\nT0NBVE9SIiwgIlJFVFVSTiIsICJSRVRVUk5TIiwKICAgICAgICAgICAgIlJP\nVVRJTkUiLCAiUk9XIiwgIlJSTiIsICJSVU4iLCAiU0FWRVBPSU5UIiwgIlND\nUkFUQ0hQQUQiLAogICAgICAgICAgICAiU0VDT05EUyIsICJTRUNRVFkiLCAi\nU0VDVVJJVFkiLCAiU0VOU0lUSVZFIiwgIlNJR05BTCIsICJTSU1QTEUiLAog\nICAgICAgICAgICAiU09VUkNFIiwgIlNQRUNJRklDIiwgIlNRTElEIiwgIlNU\nQU5EQVJEIiwgIlNUQVJUIiwgIlNUQVRJQyIsCiAgICAgICAgICAgICJTVEFZ\nIiwgIlNUT0dST1VQIiwgIlNUT1JFUyIsICJTVFlMRSIsICJTVUJQQUdFUyIs\nICJTWU5PTllNIiwKICAgICAgICAgICAgIlNZU0ZVTiIsICJTWVNJQk0iLCAi\nU1lTUFJPQyIsICJTWVNURU0iLCAiVEFCTEVTUEFDRSIsICJUUklHR0VSIiwK\nICAgICAgICAgICAgIlRZUEUiLCAiVU5ETyIsICJVTlRJTCIsICJWQUxJRFBS\nT0MiLCAiVkFSSUFCTEUiLCAiVkFSSUFOVCIsICJWQ0FUIiwKICAgICAgICAg\nICAgIlZPTFVNRVMiLCAiV0hJTEUiLCAiV0xNIiwgIllFQVJTIiwKICAgICAg\nICB9KSk7CiAgICAgICAgCiAgICAgICAgc3VwZXIuc2V0QmF0Y2hMaW1pdChk\nZWZhdWx0QmF0Y2hMaW1pdCk7CiAgICAgICAgCiAgICAgICAgc2VsZWN0V29y\nZFNldC5hZGQoIldJVEgiKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBz\ndXBwb3J0c1JhbmRvbUFjY2Vzc1Jlc3VsdFNldChTZWxlY3Qgc2VsLAogICAg\nICAgIGJvb2xlYW4gZm9yVXBkYXRlKSB7CiAgICAgICAgcmV0dXJuICFmb3JV\ncGRhdGUKICAgICAgICAgICAgJiYgc3VwZXIuc3VwcG9ydHNSYW5kb21BY2Nl\nc3NSZXN1bHRTZXQoc2VsLCBmb3JVcGRhdGUpOwogICAgfQoKICAgIHByb3Rl\nY3RlZCB2b2lkIGFwcGVuZFNlbGVjdFJhbmdlKFNRTEJ1ZmZlciBidWYsIGxv\nbmcgc3RhcnQsIGxvbmcgZW5kLAogICAgICAgIGJvb2xlYW4gc3Vic2VsZWN0\nKSB7CiAgICAgICAgLy8gYXBwZW5kcyB0aGUgbGl0ZXJhbCByYW5nZSBzdHJp\nbmcsIHNpbmNlIERCMiBpcyB1bmFibGUgdG8gaGFuZGxlCiAgICAgICAgLy8g\nYSBib3VuZCBwYXJhbWV0ZXIgZm9yIGl0CiAgICAgICAgLy8gZG8gbm90IGdl\nbmVyYXRlIEZFVENIIEZJUlNUIGNsYXVzZSBmb3Igc3Vic2VsZWN0CiAgICAg\nICAgaWYgKCFzdWJzZWxlY3QpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBG\nRVRDSCBGSVJTVCAiKS5hcHBlbmQoTG9uZy50b1N0cmluZyhlbmQpKS4KICAg\nICAgICAgICAgICAgIGFwcGVuZCgiIFJPV1MgT05MWSIpOwogICAgfQoKICAg\nIHByb3RlY3RlZCB2b2lkIGFwcGVuZFNlbGVjdChTUUxCdWZmZXIgc2VsZWN0\nU1FMLCBPYmplY3QgYWxpYXMsIFNlbGVjdCBzZWwsCiAgICAgICAgaW50IGlk\neCkgewogICAgICAgIC8vIGlmIHRoaXMgaXMgYSBsaXRlcmFsIHZhbHVlLCBh\nZGQgYSBjYXN0Li4uCiAgICAgICAgT2JqZWN0IHZhbCA9IHNlbC5nZXRTZWxl\nY3RzKCkuZ2V0KGlkeCk7CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIExp\ndCkKICAgICAgICAgICAgc2VsZWN0U1FMLmFwcGVuZCgiQ0FTVCgiKTsKCiAg\nICAgICAgLy8gLi4uIGFuZCBhZGQgdGhlIHNlbGVjdCBwZXIgc3VwZXIncyBi\nZWhhdmlvci4uLgogICAgICAgIHN1cGVyLmFwcGVuZFNlbGVjdChzZWxlY3RT\nUUwsIGFsaWFzLCBzZWwsIGlkeCk7CgogICAgICAgIC8vIC4uLiBhbmQgZmlu\naXNoIHRoZSBjYXN0CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIExpdCkg\newogICAgICAgICAgICBDbGFzcyBjID0gKChMaXQpIHZhbCkuZ2V0VHlwZSgp\nOwogICAgICAgICAgICBpbnQgamF2YVR5cGVDb2RlID0gSmF2YVR5cGVzLmdl\ndFR5cGVDb2RlKGMpOwogICAgICAgICAgICBpbnQgamRiY1R5cGVDb2RlID0g\nZ2V0SkRCQ1R5cGUoamF2YVR5cGVDb2RlLCBmYWxzZSk7CiAgICAgICAgICAg\nIFN0cmluZyB0eXBlTmFtZSA9IGdldFR5cGVOYW1lKGpkYmNUeXBlQ29kZSk7\nCiAgICAgICAgICAgIHNlbGVjdFNRTC5hcHBlbmQoIiBBUyAiICsgdHlwZU5h\nbWUpOwoKICAgICAgICAgICAgLy8gaWYgdGhlIGxpdGVyYWwgaXMgYSBzdHJp\nbmcsIHVzZSB0aGUgZGVmYXVsdCBjaGFyIGNvbCBzaXplCiAgICAgICAgICAg\nIC8vIGluIHRoZSBjYXN0IHN0YXRlbWVudC4KICAgICAgICAgICAgaWYgKFN0\ncmluZy5jbGFzcy5lcXVhbHMoYykpCiAgICAgICAgICAgICAgICBzZWxlY3RT\nUUwuYXBwZW5kKCIoIiArIGNoYXJhY3RlckNvbHVtblNpemUgKyAiKSIpOwoK\nICAgICAgICAgICAgc2VsZWN0U1FMLmFwcGVuZCgiKSIpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0Q3JlYXRlU2VxdWVuY2VT\nUUwoU2VxdWVuY2Ugc2VxKSB7CiAgICAgICAgU3RyaW5nW10gc3FsID0gc3Vw\nZXIuZ2V0Q3JlYXRlU2VxdWVuY2VTUUwoc2VxKTsKICAgICAgICBpZiAoc2Vx\nLmdldEFsbG9jYXRlKCkgPiAxKQogICAgICAgICAgICBzcWxbMF0gKz0gIiBD\nQUNIRSAiICsgc2VxLmdldEFsbG9jYXRlKCk7CiAgICAgICAgcmV0dXJuIHNx\nbDsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFNlcXVlbmNlc1NR\nTChTdHJpbmcgc2NoZW1hTmFtZSwgU3RyaW5nIHNlcXVlbmNlTmFtZSkgewog\nICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7\nCiAgICAgICAgYnVmLmFwcGVuZChzZXF1ZW5jZVNRTCk7CiAgICAgICAgaWYg\nKHNjaGVtYU5hbWUgIT0gbnVsbCB8fCBzZXF1ZW5jZU5hbWUgIT0gbnVsbCkK\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiIFdIRVJFICIpOwogICAgICAgIGlm\nIChzY2hlbWFOYW1lICE9IG51bGwpIHsKICAgICAgICAgICAgYnVmLmFwcGVu\nZChzZXF1ZW5jZVNjaGVtYVNRTCk7CiAgICAgICAgICAgIGlmIChzZXF1ZW5j\nZU5hbWUgIT0gbnVsbCkKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBB\nTkQgIik7CiAgICAgICAgfQogICAgICAgIGlmIChzZXF1ZW5jZU5hbWUgIT0g\nbnVsbCkKICAgICAgICAgICAgYnVmLmFwcGVuZChzZXF1ZW5jZU5hbWVTUUwp\nOwogICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICBw\ndWJsaWMgQ29ubmVjdGlvbiBkZWNvcmF0ZShDb25uZWN0aW9uIGNvbm4pCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gc29tZSB2\nZXJzaW9ucyBvZiB0aGUgREIyIGRyaXZlciBzZWVtIHRvIGRlZmF1bHQgdG8K\nICAgICAgICAvLyBSRUFEX1VOQ09NTUlUVEVELCB3aGljaCB3aWxsIHByZXZl\nbnQgbG9ja2luZyBmcm9tIHdvcmtpbmcKICAgICAgICAvLyAobXVsdGlwbGUg\nU0VMRUNUIC4uLiBGT1IgVVBEQVRFIHN0YXRlbWVudHMgYXJlIGFsbG93ZWQg\nb24KICAgICAgICAvLyB0aGUgc2FtZSBpbnN0YW5jZSk7IGlmIHdlIGhhdmUg\nbm90IG92ZXJyaWRkZW4gdGhlCiAgICAgICAgLy8gdHJhbnNhY3Rpb24gaXNv\nbGF0aW9uIGluIHRoZSBjb25maWd1cmF0aW9uLCBkZWZhdWx0IHRvCiAgICAg\nICAgLy8gVFJBTlNBQ1RJT05fUkVBRF9DT01NSVRURUQKICAgICAgICBjb25u\nID0gc3VwZXIuZGVjb3JhdGUoY29ubik7CgogICAgICAgIGlmIChjb25mLmdl\ndFRyYW5zYWN0aW9uSXNvbGF0aW9uQ29uc3RhbnQoKSA9PSAtMQogICAgICAg\nICAgICAmJiBjb25uLmdldFRyYW5zYWN0aW9uSXNvbGF0aW9uKCkgPCBjb25u\nLlRSQU5TQUNUSU9OX1JFQURfQ09NTUlUVEVEKQogICAgICAgICAgICBjb25u\nLnNldFRyYW5zYWN0aW9uSXNvbGF0aW9uKGNvbm4uVFJBTlNBQ1RJT05fUkVB\nRF9DT01NSVRURUQpOwoKICAgICAgICByZXR1cm4gY29ubjsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBjb25uZWN0ZWRDb25maWd1cmF0aW9uKENvbm5lY3Rp\nb24gY29ubikgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAJc3VwZXIuY29u\nbmVjdGVkQ29uZmlndXJhdGlvbihjb25uKTsKCiAgICAJRGF0YWJhc2VNZXRh\nRGF0YSBtZXRhRGF0YSA9IGNvbm4uZ2V0TWV0YURhdGEoKTsKICAgICAgICBk\nYXRhYmFzZVByb2R1Y3ROYW1lID0gbnVsbFNhZmUobWV0YURhdGEuZ2V0RGF0\nYWJhc2VQcm9kdWN0TmFtZSgpKTsKICAgICAgICBkYXRhYmFzZVByb2R1Y3RW\nZXJzaW9uID0gbnVsbFNhZmUobWV0YURhdGEuZ2V0RGF0YWJhc2VQcm9kdWN0\nVmVyc2lvbigpKTsKICAgICAgICAKICAgICAgICAvLyBEZXRlcm1pbmUgdGhl\nIHR5cGUgb2YgREIyIGRhdGFiYXNlCiAgICAgICAgLy8gRmlyc3QgY2hlY2sg\nZm9yIEFTLzQwMAogICAgICAgIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5v\nckZvcklTZXJpZXMoKTsKCiAgICAgICAgaWYgKG1haiA+IDApIHsKICAgICAg\nICAgICAgaWYgKGlzREIySVNlcmllc1Y1UjNPckVhcmxpZXIoKSkKICAgICAg\nICAgICAgICAgIGRiMlNlcnZlclR5cGUgPSBkYjJJU2VyaWVzVjVSM09yRWFy\nbGllcjsKICAgICAgICAgICAgZWxzZSBpZiAoaXNEQjJJU2VyaWVzVjVSNE9y\nTGF0ZXIoKSkKICAgICAgICAgICAgICAgIGRiMlNlcnZlclR5cGUgPSBkYjJJ\nU2VyaWVzVjVSNE9yTGF0ZXI7CiAgICAgICAgfQogICAgICAgIAogICAgCWlm\nIChkYjJTZXJ2ZXJUeXBlID09IDApIHsKICAgIAkgICAgaWYgKGlzSkRCQzMp\nIHsKICAgIAkgICAgICAgIG1haiA9IG1ldGFEYXRhLmdldERhdGFiYXNlTWFq\nb3JWZXJzaW9uKCk7CiAgICAJICAgICAgICBtaW4gPSBtZXRhRGF0YS5nZXRE\nYXRhYmFzZU1pbm9yVmVyc2lvbigpOwogICAgCSAgICB9CiAgICAJICAgIGVs\nc2UKICAgIAkgICAgICAgIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5vcigp\nOwoKICAgIAkgICAgLy8gRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIERCMiBkYXRh\nYmFzZSBmb3IgWk9TICYgVURCCiAgICAJICAgIGlmIChpc0RCMlVEQlY4MU9y\nRWFybGllcigpKQogICAgCSAgICAgICAgZGIyU2VydmVyVHlwZSA9IGRiMlVE\nQlY4MU9yRWFybGllcjsKICAgIAkgICAgZWxzZSBpZiAoaXNEQjJaT1NWOHhP\nckxhdGVyKCkpCiAgICAJICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIyWk9T\nVjh4T3JMYXRlcjsKICAgIAkgICAgZWxzZSBpZiAoaXNEQjJVREJWODJPckxh\ndGVyKCkpCiAgICAJICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIyVURCVjgy\nT3JMYXRlcjsKICAgICAgICB9CgogICAgICAgIC8vIHZlcmlmeSB0aGF0IGRh\ndGFiYWUgcHJvZHVjdCBpcyBzdXBwb3J0ZWQKICAgICAgICBpZiAoZGIyU2Vy\ndmVyVHlwZSA9PSAwIHx8IG1haiA9PSAwKQogICAgICAgICAgICB0aHJvdyBu\nZXcgVW5zdXBwb3J0ZWRFeGNlcHRpb24oX2xvYy5nZXQoImRiLW5vdC1zdXBw\nb3J0ZWQiLAogICAgICAgICAgICAgICAgbmV3IE9iamVjdFtdIHtkYXRhYmFz\nZVByb2R1Y3ROYW1lLCBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uIH0pKTsgICAg\nICAgICAgICAgICAgICAgIAoKICAgIAlpZiAobWFqID49IDkgfHwgKG1haiA9\nPSA4ICYmIG1pbiA+PSAyKSkgewogICAgCSAgICBzdXBwb3J0c0xvY2tpbmdX\naXRoTXVsdGlwbGVUYWJsZXMgPSB0cnVlOwogICAgCSAgICBzdXBwb3J0c0xv\nY2tpbmdXaXRoSW5uZXJKb2luID0gdHJ1ZTsKICAgIAkgICAgc3VwcG9ydHNM\nb2NraW5nV2l0aE91dGVySm9pbiA9IHRydWU7CiAgICAJICAgIGZvclVwZGF0\nZUNsYXVzZSA9ICJXSVRIIFJSIFVTRSBBTkQgS0VFUCBVUERBVEUgTE9DS1Mi\nOwogICAgCSAgICBpZiAobWFqID49OSkKICAgIAkgICAgICAgIHN1cHBvcnRz\nWE1MQ29sdW1uID0gdHJ1ZTsKICAgIAl9CgogICAgICAgIC8vIHBsYXRmb3Jt\nIHNwZWNpZmljIHNldHRpbmdzCiAgICAgICAgc3dpdGNoIChkYjJTZXJ2ZXJU\neXBlKSB7CiAgICAgICAgY2FzZSAgZGIyWk9TVjh4T3JMYXRlcjoKICAgICAg\nICAgICAgLy8gREIyIFovT1MgCiAgICAgICAgICAgIGNoYXJhY3RlckNvbHVt\nblNpemUgPSAyNTU7CiAgICAgICAgICAgIGxhc3RHZW5lcmF0ZWRLZXlRdWVy\neSA9ICJTRUxFQ1QgSURFTlRJVFlfVkFMX0xPQ0FMKCkgRlJPTSAiCiAgICAg\nICAgICAgICAgICArICJTWVNJQk0uU1lTRFVNTVkxIjsKICAgICAgICAgICAg\nbmV4dFNlcXVlbmNlUXVlcnkgPSAiU0VMRUNUIE5FWFRWQUwgRk9SIHswfSBG\nUk9NICIKICAgICAgICAgICAgICAgICsgIlNZU0lCTS5TWVNEVU1NWTEiOwog\nICAgICAgICAgICBzZXF1ZW5jZVNRTCA9ICJTRUxFQ1QgU0NIRU1BIEFTIFNF\nUVVFTkNFX1NDSEVNQSwgIgogICAgICAgICAgICAgICAgKyAiTkFNRSBBUyBT\nRVFVRU5DRV9OQU1FIEZST00gU1lTSUJNLlNZU1NFUVVFTkNFUyI7CiAgICAg\nICAgICAgIHNlcXVlbmNlU2NoZW1hU1FMID0gIlNDSEVNQSA9ID8iOwogICAg\nICAgICAgICBzZXF1ZW5jZU5hbWVTUUwgPSAiTkFNRSA9ID8iOwogICAgICAg\nICAgICBpZiAobWFqID09IDgpIHsKICAgICAgICAgICAgICAgIC8vIERCMiBa\nL09TIFZlcnNpb24gODogbm8gYmlnaW50IHN1cHBvcnQsIGhlbmNlIG1hcCBK\nYXZhCiAgICAgICAgICAgICAgICAvLyBsb25nIHRvIGRlY2ltYWwKICAgICAg\nICAgICAgICAgIGJpZ2ludFR5cGVOYW1lID0gIkRFQ0lNQUwoMzEsMCkiOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIGlnbm9yZVNRTEV4Y2VwdGlvbk9u\nU2V0UXVlcnlUaW1lb3V0ID0gdHJ1ZTsgCiAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgIGNhc2UgZGIySVNlcmllc1Y1UjNPckVhcmxpZXI6CiAgICAgICAg\nY2FzZSBkYjJJU2VyaWVzVjVSNE9yTGF0ZXI6CiAgICAgICAgICAgIGxhc3RH\nZW5lcmF0ZWRLZXlRdWVyeSA9ICJTRUxFQ1QgSURFTlRJVFlfVkFMX0xPQ0FM\nKCkgRlJPTSAiCiAgICAgICAgICAgICAgICArICJTWVNJQk0uU1lTRFVNTVkx\nIjsKICAgICAgICAgICAgbmV4dFNlcXVlbmNlUXVlcnkgPSAiU0VMRUNUIE5F\nWFRWQUwgRk9SIHswfSBGUk9NICIKICAgICAgICAgICAgICAgICsgIlNZU0lC\nTS5TWVNEVU1NWTEiOwogICAgICAgICAgICB2YWxpZGF0aW9uU1FMID0gIlNF\nTEVDVCBESVNUSU5DVChDVVJSRU5UIFRJTUVTVEFNUCkgRlJPTSAiCiAgICAg\nICAgICAgICAgICArICJRU1lTMi5TWVNUQUJMRVMiOwogICAgICAgICAgICBz\nZXF1ZW5jZVNRTCA9ICJTRUxFQ1QgU0VRVUVOQ0VfU0NIRU1BLCAiCiAgICAg\nICAgICAgICAgICArICJTRVFVRU5DRV9OQU1FIEZST00gUVNZUzIuU1lTU0VR\nVUVOQ0VTIjsKICAgICAgICAgICAgc2VxdWVuY2VTY2hlbWFTUUwgPSAiU0VR\nVUVOQ0VfU0NIRU1BID0gPyI7CiAgICAgICAgICAgIHNlcXVlbmNlTmFtZVNR\nTCA9ICJTRVFVRU5DRV9OQU1FID0gPyI7CiAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgdXBkYXRl\nIGNsYXVzZSBmb3IgdGhlIHF1ZXJ5IGJhc2VkIG9uIHRoZQogICAgICogdXBk\nYXRlQ2xhdXNlIGFuZCBpc29sYXRpb25MZXZlbCBoaW50cwogICAgICovCiAg\nICBwcm90ZWN0ZWQgU3RyaW5nIGdldEZvclVwZGF0ZUNsYXVzZShKREJDRmV0\nY2hDb25maWd1cmF0aW9uIGZldGNoLAogICAgICAgIGJvb2xlYW4gaXNGb3JV\ncGRhdGUsIFNlbGVjdCBzZWwpIHsKICAgICAgICBpbnQgaXNvbGF0aW9uTGV2\nZWw7CiAgICAgICAgLy8gRm9yIGRiMlVEQlY4MU9yRWFybGllciBhbmQgZGIy\nSVNlcmllc1Y1UjNPckVhcmxpZXI6CiAgICAgICAgLy8gIm9wdGltaXplIGZv\nciIgY2xhdXNlIGFwcGVhcnMgYmVmb3JlICJmb3IgdXBkYXRlIiBjbGF1c2Uu\nCiAgICAgICAgU3RyaW5nQnVmZmVyIGZvclVwZGF0ZVN0cmluZyA9IG5ldyBT\ndHJpbmdCdWZmZXIoCiAgICAgICAgICAgIGdldE9wdGltaXplQ2xhdXNlKHNl\nbCkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIERldGVybWluZSB0\naGUgaXNvbGF0aW9uTGV2ZWw7IHRoZSBmZXRjaAogICAgICAgICAgICAvLyBj\nb25maWd1cmF0aW9uIGRhdGEgb3ZlcnJpZGVzIHRoZSBwZXJzaXN0ZW5jZS54\nbWwgdmFsdWUKICAgICAgICAgICAgaWYgKGZldGNoICE9IG51bGwgJiYgZmV0\nY2guZ2V0SXNvbGF0aW9uKCkgIT0gLTEpCiAgICAgICAgICAgICAgICBpc29s\nYXRpb25MZXZlbCA9IGZldGNoLmdldElzb2xhdGlvbigpOwogICAgICAgICAg\nICBlbHNlCiAgICAgICAgICAgICAgICBpc29sYXRpb25MZXZlbCA9IGNvbmYu\nZ2V0VHJhbnNhY3Rpb25Jc29sYXRpb25Db25zdGFudCgpOwoKICAgICAgICAg\nICAgaWYgKGlzRm9yVXBkYXRlKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2go\nZGIyU2VydmVyVHlwZSkgewogICAgICAgICAgICAgICAgY2FzZSBkYjJJU2Vy\naWVzVjVSM09yRWFybGllcjoKICAgICAgICAgICAgICAgIGNhc2UgZGIyVURC\nVjgxT3JFYXJsaWVyOgogICAgICAgICAgICAgICAgICAgIGlmIChpc29sYXRp\nb25MZXZlbCA9PSBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1NFUklBTElaQUJM\nRSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yVXBkYXRlU3RyaW5nLmFw\ncGVuZCgiICIpLmFwcGVuZChmb3JVcGRhdGVDbGF1c2UpOwogICAgICAgICAg\nICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgIGZvclVw\nZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yVXBkYXRlKQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh3\naXRoUlNDbGF1c2UpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICAgICAgY2FzZSBkYjJaT1NWOHhPckxhdGVyOgogICAgICAgICAg\nICAgICAgY2FzZSBkYjJVREJWODJPckxhdGVyOgogICAgICAgICAgICAgICAg\nICAgIGlmIChpc29sYXRpb25MZXZlbCA9PSBDb25uZWN0aW9uLlRSQU5TQUNU\nSU9OX1NFUklBTElaQUJMRSkgewogICAgICAgICAgICAgICAgICAgICAgICBm\nb3JVcGRhdGVTdHJpbmcuYXBwZW5kKCIgIikuYXBwZW5kKGZvclJlYWRPbmx5\nQ2xhdXNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgi\nICIpLmFwcGVuZCh3aXRoUlJDbGF1c2UpCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtlZXBVcGRhdGVMb2Nr\nQ2xhdXNlKTsgICAKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICAgICAgICAgICAgICBmb3JVcGRhdGVTdHJpbmcuYXBwZW5kKCIg\nIikuYXBwZW5kKGZvclJlYWRPbmx5Q2xhdXNlKQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh3aXRoUlNDbGF1c2Up\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBw\nZW5kKHVzZUtlZXBVcGRhdGVMb2NrQ2xhdXNlKTsgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBkYjJJU2Vy\naWVzVjVSNE9yTGF0ZXI6CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzb2xh\ndGlvbkxldmVsID09IENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fU0VSSUFMSVpB\nQkxFKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmlu\nZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yUmVhZE9ubHlDbGF1c2UpCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHdp\ndGhSUkNsYXVzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBl\nbmQoIiAiKS5hcHBlbmQodXNlS2VlcEV4Y2x1c2l2ZUxvY2tDbGF1c2UpOyAg\nICAgICAKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICAgICAgICAgICAgICBmb3JVcGRhdGVTdHJpbmcuYXBwZW5kKCIgIikuYXBw\nZW5kKGZvclJlYWRPbmx5Q2xhdXNlKQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh3aXRoUlNDbGF1c2UpCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHVz\nZUtlZXBFeGNsdXNpdmVMb2NrQ2xhdXNlKTsKICAgICAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJs\nZWQoKSkKICAgICAgICAgICAgICAgIGxvZy5lcnJvcihlLnRvU3RyaW5nKCks\nZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmb3JVcGRhdGVTdHJpbmcu\ndG9TdHJpbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0RCMlVE\nQlY4Mk9yTGF0ZXIoKSB7CiAgICAgICAgcmV0dXJuIChkYXRhYmFzZVByb2R1\nY3RWZXJzaW9uLmluZGV4T2YoIlNRTCIpICE9IC0xCiAgICAgICAgICAgICB8\nfCBkYXRhYmFzZVByb2R1Y3ROYW1lLmluZGV4T2YoIkRCMi8iKSAhPSAtMSkK\nICAgICAgICAgICAgICYmICgobWFqID09IDggJiYgbWluID49IDIpIHx8ICht\nYWogPj0gOSkpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzREIyWk9T\nVjh4T3JMYXRlcigpIHsKICAgICAgIHJldHVybiAoZGF0YWJhc2VQcm9kdWN0\nVmVyc2lvbi5pbmRleE9mKCJEU04iKSAhPSAtMQogICAgICAgICAgICB8fCBk\nYXRhYmFzZVByb2R1Y3ROYW1lLmluZGV4T2YoIkRCMi8iKSA9PSAtMSkKICAg\nICAgICAgICAgJiYgbWFqID49IDg7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gaXNEQjJJU2VyaWVzVjVSM09yRWFybGllcigpIHsKICAgICAgIHJldHVy\nbiAoZGF0YWJhc2VQcm9kdWN0TmFtZS5pbmRleE9mKCJBUyIpICE9IC0xCiAg\nICAgICAgICAgJiYgKChtYWogPT0gNSAmJiBtaW4gPD0zKSB8fCBtYWogPCA1\nKSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNEQjJJU2VyaWVzVjVS\nNE9yTGF0ZXIoKSB7CiAgICAgICByZXR1cm4gZGF0YWJhc2VQcm9kdWN0TmFt\nZS5pbmRleE9mKCJBUyIpICE9IC0xCiAgICAgICAgICAgJiYgKG1haiA+PTYg\nfHwgKG1haiA9PSA1ICYmIG1pbiA+PTQpKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc0RCMlVEQlY4MU9yRWFybGllcigpIHsKICAgICAgICByZXR1\ncm4gKGRhdGFiYXNlUHJvZHVjdFZlcnNpb24uaW5kZXhPZigiU1FMIikgIT0g\nLTEgCiAgICAgICAgICAgIHx8IGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhP\nZigiREIyLyIpICE9IC0xKSAKICAgICAgICAgICAgJiYgKChtYWogPT0gOCAm\nJiBtaW4gPD0gMSkgfHwgbWFqIDwgOCk7CiAgICB9CgogICAgLyoqIEdldCB0\naGUgdmVyc2lvbiBNYWpvci9NaW5vciBmb3IgdGhlIElTZXJpZXMKICAgICAq\nLwogICAgcHJpdmF0ZSB2b2lkIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5v\nckZvcklTZXJpZXMoKSB7CiAgICAgICAgLy8gSVNlcmllcyAgICBEQlByb2RO\nYW1lICAgICAgICAgICAgICAgICBEQjIgVURCIGZvciBBUy80MDAKICAgICAg\nICAvLyAgIChUb29sYm94KURCUHJvZFZlcnNpb24gICAgICAgICAgICAgIDA1\nLjA0LjAwMDAgVjVSNG0wCiAgICAgICAgLy8gSVNlcmllcyAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBEQjIgVURCIGZvciBBUy80MDAKICAgICAg\nICAvLyAgIChOYXRpdmUpICAgICAgICAgICAgICAgICAgICAgICAgICAgIFY1\nUjRNMAogICAgICAgIC8vIG5ldyBqY2MgICAgREJQcm9kVmVyc2lvbiAgICAg\nICAgICAgICAgUVNRMDUwNDAgb3IgUVNRMDYwMTAKICAgICAgICBpZiAoZGF0\nYWJhc2VQcm9kdWN0TmFtZS5pbmRleE9mKCJBUyIpICE9IC0xKSB7CiAgICAg\nICAgICAgIC8vIGRlZmF1bHQgdG8gVjVSNAogICAgICAgICAgICBtYWogPSA1\nOwogICAgICAgICAgICBtaW4gPSA0OwogICAgICAgICAgICBpbnQgaW5kZXgg\nPSBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4T2YoJ1YnKTsKICAgICAg\nICAgICAgaWYgKGluZGV4ICE9IC0xKSB7CiAgICAgICAgICAgICAgICBTdHJp\nbmcgcyA9IGRhdGFiYXNlUHJvZHVjdFZlcnNpb24uc3Vic3RyaW5nKGluZGV4\nKTsKICAgICAgICAgICAgICAgIHMgPSBzLnRvVXBwZXJDYXNlKCk7CgogICAg\nICAgICAgICAgICAgU3RyaW5nVG9rZW5pemVyIHN0cmluZ3Rva2VuaXplciA9\nIG5ldyBTdHJpbmdUb2tlbml6ZXIocywgIlZSTSIKICAgICAgICAgICAgICAg\nICAgICAsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlmIChzdHJpbmd0b2tl\nbml6ZXIuY291bnRUb2tlbnMoKSA9PSAzKSB7CiAgICAgICAgICAgICAgICAg\nICAgU3RyaW5nIHMxID0gc3RyaW5ndG9rZW5pemVyLm5leHRUb2tlbigpOwog\nICAgICAgICAgICAgICAgICAgIG1haiA9IEludGVnZXIucGFyc2VJbnQoczEp\nOwogICAgICAgICAgICAgICAgICAgIFN0cmluZyBzMiA9ICBzdHJpbmd0b2tl\nbml6ZXIubmV4dFRva2VuKCk7CiAgICAgICAgICAgICAgICAgICAgbWluID0g\nSW50ZWdlci5wYXJzZUludChzMik7CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbmRleCA9IGRhdGFi\nYXNlUHJvZHVjdFZlcnNpb24uaW5kZXhPZignMCcpOwogICAgICAgICAgICAg\nICAgaWYgKGluZGV4ICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgU3Ry\naW5nIHMgPSBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLnN1YnN0cmluZyhpbmRl\neCk7CiAgICAgICAgICAgICAgICAgICAgcyA9IHMudG9VcHBlckNhc2UoKTsK\nCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nVG9rZW5pemVyIHN0cmluZ3Rv\na2VuaXplciA9IG5ldyBTdHJpbmdUb2tlbml6ZXIocywgIjAiCiAgICAgICAg\nICAgICAgICAgICAgICAgICwgZmFsc2UpOyAgICAgICAgICAgICAgICAgICAg\nCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZ3Rva2VuaXplci5jb3Vu\ndFRva2VucygpID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3Ry\naW5nIHMxID0gc3RyaW5ndG9rZW5pemVyLm5leHRUb2tlbigpOwogICAgICAg\nICAgICAgICAgICAgICAgICBtYWogPSBJbnRlZ2VyLnBhcnNlSW50KHMxKTsK\nICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHMyID0gIHN0cmluZ3Rv\na2VuaXplci5uZXh0VG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAg\nbWluID0gSW50ZWdlci5wYXJzZUludChzMik7CiAgICAgICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgZ2V0UHJvZHVjdFZlcnNp\nb25NYWpvck1pbm9yKCkgewogICAgICAgIC8vIEluY2FzZSBKREJDIGRyaXZl\nciB2ZXJzaW9uIGlzIGxvd2VyIHRoYW4gMwogICAgICAgIC8vIHVzZSBmb2xs\nb3dpbmcgaW5mbyB0byBkZXRlcm1pbmUgTWFqb3IgYW5kIE1pbm9yIAogICAg\nICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgQ0xJICAgIHZzICAgICAg\nSkNDCiAgICAgICAgLy8gWkRCVjggREJQcm9kTmFtZSAgICAgICBEQjIgICAg\nICAgICAgICBEQjIKICAgICAgICAvLyAgICAgICBEQlByb2RWZXJzaW9uICAg\nIDA4LjAxLjAwMDUgICAgIERTTjA4MDE1CiAgICAgICAgLy8gWkRCVjkgICAg\nICAgICAgICAgICAgICBEQjIgICAgICAgICAgICBEQjIKICAgICAgICAvLyAg\nICAgICAgICAgICAgICAgICAgICAgIDA5LjAxLjAwMDUgICAgIERTTjA5MDE1\nCiAgICAgICAgLy8gV2luVjkgICAgICAgICAgICAgICAgICBEQjIvTlQgICAg\nICAgICBEQjIvTlQKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAg\nIDA5LjAxLjAwMDAgICAgIFNRTDA5MDEwCiAgICAgICAgLy8gU29sYXJpc1Y5\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQjIvU1VONjQKICAgICAg\nICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNR\nTDA5MDEKICAgICAgICAvLyBMaW51eCAgICAgICAgICAgICAgICAgIERCMi9M\nSU5VWCAgICAgIERCMi9MSU5VWAogICAgICAgIC8vICAgICAgICAgICAgICAg\nICAgICAgICAgMDkuMDEuMDAwMCAgICAgU1FMMDkwMQogICAgICAgIGlmIChk\nYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4T2YoIjA5IikgIT0gLTEpIHsK\nICAgICAgICAgICAgbWFqID0gOTsKICAgICAgICAgICAgaWYgKGRhdGFiYXNl\nUHJvZHVjdFZlcnNpb24uaW5kZXhPZigiMDEiKSAhPSAtMSkgewogICAgICAg\nICAgICAgICAgbWluID0gMTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxz\nZSBpZiAoZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCIwOCIpICE9\nIC0xKSB7CiAgICAgICAgICAgIG1haiA9IDg7CiAgICAgICAgICAgIG1pbiA9\nIDI7CiAgICAgICAgICAgIGlmIChkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmlu\nZGV4T2YoIjAxIikgIT0gLTEpIHsKICAgICAgICAgICAgICAgIG1pbiA9IDE7\nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHJvdGVjdGVk\nIFN0cmluZyBnZXRPcHRpbWl6ZUNsYXVzZShTZWxlY3Qgc2VsKSB7CiAgICAg\nICAgaWYgKHNlbCAhPSBudWxsICYmIHNlbC5nZXRFeHBlY3RlZFJlc3VsdENv\ndW50KCkgPiAwKSB7CiAgICAgICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBu\nZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiAi\nKS5hcHBlbmQob3B0aW1pemVDbGF1c2UpLmFwcGVuZCgiICIpCiAgICAgICAg\nICAgICAgICAuYXBwZW5kKFN0cmluZy52YWx1ZU9mKHNlbC5nZXRFeHBlY3Rl\nZFJlc3VsdENvdW50KCkpKQogICAgICAgICAgICAgICAgLmFwcGVuZCgiICIp\nLmFwcGVuZChyb3dDbGF1c2UpOwogICAgICAgICAgICByZXR1cm4gYnVmLnRv\nU3RyaW5nKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gIiI7CiAgICB9\nCgogICAgcHVibGljIE9wZW5KUEFFeGNlcHRpb24gbmV3U3RvcmVFeGNlcHRp\nb24oU3RyaW5nIG1zZywgU1FMRXhjZXB0aW9uW10gY2F1c2VzLAogICAgICAg\nIE9iamVjdCBmYWlsZWQpIHsKICAgICAgICBpZiAoY2F1c2VzICE9IG51bGwg\nJiYgY2F1c2VzLmxlbmd0aCA+IDApCiAgICAgICAgICAgIG1zZyA9IGFwcGVu\nZEV4dGVuZGVkRXhjZXB0aW9uTXNnKG1zZywgY2F1c2VzWzBdKTsKICAgICAg\nICByZXR1cm4gc3VwZXIubmV3U3RvcmVFeGNlcHRpb24obXNnLCBjYXVzZXMs\nIGZhaWxlZCk7CiAgICB9CgogICAgLyoqCiAgICAgKiAgQXBwZW5kIGV4Y2Vw\ndGlvbiBpbmZvcm1hdGlvbiBmcm9tIFNRTENBIHRvIHRoZSBleHNpc3RpbmcK\nICAgICAqICBleGNlcHRpb24gbWVhc3NhZ2UKICAgICAqLwogICAgcHJpdmF0\nZSBTdHJpbmcgYXBwZW5kRXh0ZW5kZWRFeGNlcHRpb25Nc2coU3RyaW5nIG1z\nZywgU1FMRXhjZXB0aW9uIHNxbGUpewogICAgICAgZmluYWwgU3RyaW5nIEdF\nVFNRTENBID0iZ2V0U3FsY2EiOwogICAgICAgU3RyaW5nIGV4Y2VwdGlvbk1z\nZyA9IG5ldyBTdHJpbmcoKTsKICAgICAgIHRyeSB7CiAgICAgICAgICAgIE1l\ndGhvZCBzcWxjYU0yID0gc3FsZS5nZXROZXh0RXhjZXB0aW9uKCkuZ2V0Q2xh\nc3MoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRNZXRob2Qo\nR0VUU1FMQ0EsbnVsbCk7CiAgICAgICAgICAgIE9iamVjdCBzcWxjYSA9IHNx\nbGNhTTIuaW52b2tlKHNxbGUuZ2V0TmV4dEV4Y2VwdGlvbigpLAogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgT2JqZWN0\nW10ge30pOwogICAgICAgICAgICBNZXRob2QgIGdldFNxbEVycnBNZXRoZCA9\nIHNxbGNhLmdldENsYXNzKCkuCiAgICAgICAgICAgIGdldE1ldGhvZCgiZ2V0\nU3FsRXJycCIsIG51bGwpOwogICAgICAgICAgICBNZXRob2QgIGdldFNxbFdh\ncm5NZXRoZCA9IHNxbGNhLmdldENsYXNzKCkuCiAgICAgICAgICAgIGdldE1l\ndGhvZCgiZ2V0U3FsV2FybiIsIG51bGwpOwogICAgICAgICAgICBNZXRob2Qg\nIGdldFNxbEVycmRNZXRoZCA9IHNxbGNhLmdldENsYXNzKCkuCiAgICAgICAg\nICAgIGdldE1ldGhvZCgiZ2V0U3FsRXJyZCIsIG51bGwpOwogICAgICAgICAg\nICBTdHJpbmdCdWZmZXIgZXJyZFN0ciA9IG5ldyBTdHJpbmdCdWZmZXIoKTsK\nCiAgICAgICAgICAgIGludFtdIGVycmRzID0gKGludFtdKSBnZXRTcWxFcnJk\nTWV0aGQuaW52b2tlKHNxbGNhLCBuZXcgT2JqZWN0W117fSk7CiAgICAgICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZXJyZHMubGVuZ3RoOyBpKyspCiAg\nICAgICAgICAgICAgICBlcnJkU3RyLmFwcGVuZChlcnJkU3RyLmxlbmd0aCgp\nID4gMCA/ICIsICIgOiAiIikuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5k\nKGVycmRzW2ldKTsKICAgICAgICAgICAgZXhjZXB0aW9uTXNnID0gZXhjZXB0\naW9uTXNnLmNvbmNhdCggIlNRTENBIE9VVFBVVCIgKwogICAgICAgICAgICAg\nICAgICAgICJbRXJycD0iICsgZ2V0U3FsRXJycE1ldGhkLmludm9rZShzcWxj\nYSwgbmV3IE9iamVjdFtde30pCiAgICAgICAgICAgICAgICAgICAgKyAiLCBF\ncnJkPSIgKyBlcnJkU3RyKTsKCiAgICAgICAgICAgIFN0cmluZyBXYXJuID0g\nbmV3IFN0cmluZygoY2hhcltdKSBnZXRTcWxXYXJuTWV0aGQuCiAgICAgICAg\nICAgICAgICAgICAgaW52b2tlKHNxbGNhLCBuZXcgT2JqZWN0W117fSkpOwog\nICAgICAgICAgICBpZiAoV2Fybi50cmltKCkubGVuZ3RoKCkgIT0gMCkKICAg\nICAgICAgICAgICAgIGV4Y2VwdGlvbk1zZyA9IGV4Y2VwdGlvbk1zZy5jb25j\nYXQoIiwgV2Fybj0iICtXYXJuICsgIl0iICk7CiAgICAgICAgICAgIGVsc2UK\nICAgICAgICAgICAgICAgIGV4Y2VwdGlvbk1zZyA9IGV4Y2VwdGlvbk1zZy5j\nb25jYXQoICJdIiApOwogICAgICAgICAgICBtc2cgPSBtc2cuY29uY2F0KGV4\nY2VwdGlvbk1zZyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBmb3Ig\nYmF0Y2hlZCBleGVjdXRpb24gZmFpbHVyZXMsIFNRTEV4Y2VwdGlvbnMgYXJl\nIG5lc3RlZAogICAgICAgICAgICBTUUxFeGNlcHRpb24gc3FsZTIgPSBzcWxl\nLmdldE5leHRFeGNlcHRpb24oKTsKICAgICAgICAgICAgd2hpbGUgKHNxbGUy\nICE9IG51bGwpIHsgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBt\nc2cgPSBtc2cuY29uY2F0KCJcbiIgKyBzcWxlMi5nZXRNZXNzYWdlKCkpOwog\nICAgICAgICAgICAgICAgc3FsZTIgPSBzcWxlMi5nZXROZXh0RXhjZXB0aW9u\nKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIHJl\ndHVybiBtc2c7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAg\nICAgICAgICAgcmV0dXJuIHNxbGUuZ2V0TWVzc2FnZSgpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgaW50IGdldERiMlNlcnZlclR5cGUoKSB7CiAg\nICAgICAgcmV0dXJuIGRiMlNlcnZlclR5cGU7CiAgICB9CiAgICAKICAgIHBy\nb3RlY3RlZCB2b2lkIGFwcGVuZExlbmd0aChTUUxCdWZmZXIgYnVmLCBpbnQg\ndHlwZSkgewogICAgICAgIGlmICh0eXBlID09IFR5cGVzLlZBUkNIQVIpCiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIigiKS5hcHBlbmQoSW50ZWdlci50b1N0\ncmluZyhjaGFyYWN0ZXJDb2x1bW5TaXplKSkuCiAgICAgICAgICAgICAgICBh\ncHBlbmQoIikiKTsKICAgIH0KCiAgICAvKioKICAgICAqIElmIHRoaXMgZGlj\ndGlvbmFyeSBzdXBwb3J0cyBYTUwgdHlwZSwKICAgICAqIHVzZSB0aGlzIG1l\ndGhvZCB0byBhcHBlbmQgeG1sIHByZWRpY2F0ZS4KICAgICAqIAogICAgICog\nQHBhcmFtIGJ1ZiB0aGUgU1FMIGJ1ZmZlciB0byB3cml0ZSB0aGUgY29tcGFy\naXNvbgogICAgICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJhdGlv\nbiB0byBwZXJmb3JtCiAgICAgKiBAcGFyYW0gbGhzIHRoZSBsZWZ0IGhhbmQg\nc2lkZSBvZiB0aGUgY29tcGFyaXNvbgogICAgICogQHBhcmFtIHJocyB0aGUg\ncmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uCiAgICAgKiBAcGFy\nYW0gbGhzeG1sIGluZGljYXRlcyB3aGV0aGVyIHRoZSBsZWZ0IG9wZXJhbmQg\nbWFwcyB0byB4bWwKICAgICAqIEBwYXJhbSByaHN4bWwgaW5kaWNhdGVzIHdo\nZXRoZXIgdGhlIHJpZ2h0IG9wZXJhbmQgbWFwcyB0byB4bWwKICAgICAqLwog\nICAgcHVibGljIHZvaWQgYXBwZW5kWG1sQ29tcGFyaXNvbihTUUxCdWZmZXIg\nYnVmLCBTdHJpbmcgb3AsIEZpbHRlclZhbHVlIGxocywKICAgICAgICBGaWx0\nZXJWYWx1ZSByaHMsIGJvb2xlYW4gbGhzeG1sLCBib29sZWFuIHJoc3htbCkg\newogICAgICAgIHN1cGVyLmFwcGVuZFhtbENvbXBhcmlzb24oYnVmLCBvcCwg\nbGhzLCByaHMsIGxoc3htbCwgcmhzeG1sKTsKICAgICAgICBpZiAobGhzeG1s\nICYmIHJoc3htbCkKICAgICAgICAgICAgYXBwZW5kWG1sQ29tcGFyaXNvbjIo\nYnVmLCBvcCwgbGhzLCByaHMpOwogICAgICAgIGVsc2UgaWYgKGxoc3htbCkK\nICAgICAgICAgICAgYXBwZW5kWG1sQ29tcGFyaXNvbjEoYnVmLCBvcCwgbGhz\nLCByaHMpOwogICAgICAgIGVsc2UgCiAgICAgICAgICAgIGFwcGVuZFhtbENv\nbXBhcmlzb24xKGJ1Ziwgb3AsIHJocywgbGhzKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEFwcGVuZCBhbiB4bWwgY29tcGFyaXNvbiBwcmVkaWNhdGUuCiAg\nICAgKgogICAgICogQHBhcmFtIGJ1ZiB0aGUgU1FMIGJ1ZmZlciB0byB3cml0\nZSB0aGUgY29tcGFyaXNvbgogICAgICogQHBhcmFtIG9wIHRoZSBjb21wYXJp\nc29uIG9wZXJhdGlvbiB0byBwZXJmb3JtCiAgICAgKiBAcGFyYW0gbGhzIHRo\nZSBsZWZ0IGhhbmQgc2lkZSBvZiB0aGUgY29tcGFyaXNvbiAobWFwcyB0byB4\nbWwgY29sdW1uKQogICAgICogQHBhcmFtIHJocyB0aGUgcmlnaHQgaGFuZCBz\naWRlIG9mIHRoZSBjb21wYXJpc29uCiAgICAgKi8KICAgIHByaXZhdGUgdm9p\nZCBhcHBlbmRYbWxDb21wYXJpc29uMShTUUxCdWZmZXIgYnVmLCBTdHJpbmcg\nb3AsIAogICAgICAgICAgICBGaWx0ZXJWYWx1ZSBsaHMsIEZpbHRlclZhbHVl\nIHJocykgewogICAgICAgIGJvb2xlYW4gY2FzdHJocyA9IGZhbHNlOwogICAg\nICAgIENsYXNzIHJjID0gRmlsdGVycy53cmFwKHJocy5nZXRUeXBlKCkpOwog\nICAgICAgIGludCB0eXBlID0gMDsKICAgICAgICBpZiAocmhzLmlzQ29uc3Rh\nbnQoKSkgewogICAgICAgICAgICB0eXBlID0gZ2V0SkRCQ1R5cGUoSmF2YVR5\ncGVzLmdldFR5cGVDb2RlKHJjKSwgZmFsc2UpOwogICAgICAgICAgICBjYXN0\ncmhzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgYXBwZW5k\nWG1sRXhpc3RzKGJ1ZiwgbGhzKTsKCiAgICAgICAgYnVmLmFwcGVuZCgiICIp\nLmFwcGVuZChvcCkuYXBwZW5kKCIgIik7CiAgICAgICAgCiAgICAgICAgYnVm\nLmFwcGVuZCgiJCIpOwogICAgICAgIGlmIChjYXN0cmhzKQogICAgICAgICAg\nICBidWYuYXBwZW5kKCJQYXJtIik7CiAgICAgICAgZWxzZQogICAgICAgICAg\nICByaHMuYXBwZW5kVG8oYnVmKTsKICAgICAgICAKICAgICAgICBidWYuYXBw\nZW5kKCJdJyBQQVNTSU5HICIpOwogICAgICAgIGFwcGVuZFhtbFZhcihidWYs\nIGxocyk7CiAgICAgICAgYnVmLmFwcGVuZCgiLCAiKTsKICAgICAgICAKICAg\nICAgICBpZiAoY2FzdHJocykKICAgICAgICAgICAgYXBwZW5kQ2FzdChidWYs\nIHJocywgdHlwZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICByaHMuYXBw\nZW5kVG8oYnVmKTsKICAgICAgICAKICAgICAgICBidWYuYXBwZW5kKCIgQVMg\nXCIiKTsKICAgICAgICBpZiAoY2FzdHJocykKICAgICAgICAgICAgYnVmLmFw\ncGVuZCgiUGFybSIpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmhzLmFw\ncGVuZFRvKGJ1Zik7CiAgICAgICAgYnVmLmFwcGVuZCgiXCIpIik7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogQXBwZW5kIGFuIHhtbCBjb21wYXJpc29u\nIHByZWRpY2F0ZS4gKGJvdGggb3BlcmFuZHMgbWFwIHRvIHhtbCBjb2x1bW4p\nCiAgICAgKgogICAgICogQHBhcmFtIGJ1ZiB0aGUgU1FMIGJ1ZmZlciB0byB3\ncml0ZSB0aGUgY29tcGFyaXNvbgogICAgICogQHBhcmFtIG9wIHRoZSBjb21w\nYXJpc29uIG9wZXJhdGlvbiB0byBwZXJmb3JtCiAgICAgKiBAcGFyYW0gbGhz\nIHRoZSBsZWZ0IGhhbmQgc2lkZSBvZiB0aGUgY29tcGFyaXNvbiAobWFwcyB0\nbyB4bWwgY29sdW1uKQogICAgICogQHBhcmFtIHJocyB0aGUgcmlnaHQgaGFu\nZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uIChtYXBzIHRvIHhtbCBjb2x1bW4p\nCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBhcHBlbmRYbWxDb21wYXJpc29u\nMihTUUxCdWZmZXIgYnVmLCBTdHJpbmcgb3AsIAogICAgICAgICAgICBGaWx0\nZXJWYWx1ZSBsaHMsIEZpbHRlclZhbHVlIHJocykgewogICAgICAgIGFwcGVu\nZFhtbEV4aXN0cyhidWYsIGxocyk7CiAgICAgICAgCiAgICAgICAgYnVmLmFw\ncGVuZCgiICIpLmFwcGVuZChvcCkuYXBwZW5kKCIgIik7CiAgICAgICAgCiAg\nICAgICAgYnVmLmFwcGVuZCgiJCIpLmFwcGVuZChyaHMuZ2V0Q29sdW1uQWxp\nYXMoCiAgICAgICAgICAgIHJocy5nZXRGaWVsZE1hcHBpbmcoKS5nZXRDb2x1\nbW5zKClbMF0pKS4KICAgICAgICAgICAgYXBwZW5kKCIvKi8iKTsKICAgICAg\nICByaHMuYXBwZW5kVG8oYnVmKTsKICAgICAgICAKICAgICAgICBidWYuYXBw\nZW5kKCJdJyBQQVNTSU5HICIpOwogICAgICAgIGFwcGVuZFhtbFZhcihidWYs\nIGxocyk7CiAgICAgICAgYnVmLmFwcGVuZCgiLCAiKTsKICAgICAgICBhcHBl\nbmRYbWxWYXIoYnVmLCByaHMpOwogICAgICAgIGJ1Zi5hcHBlbmQoIikiKTsK\nICAgIH0KICAgIAogICAgcHJpdmF0ZSB2b2lkIGFwcGVuZFhtbFZhcihTUUxC\ndWZmZXIgYnVmLCBGaWx0ZXJWYWx1ZSB2YWwpIHsKICAgICAgICBidWYuYXBw\nZW5kKHZhbC5nZXRDb2x1bW5BbGlhcygKICAgICAgICAgICAgdmFsLmdldEZp\nZWxkTWFwcGluZygpLmdldENvbHVtbnMoKVswXSkpLgogICAgICAgICAgICBh\ncHBlbmQoIiBBUyAiKS4KICAgICAgICAgICAgYXBwZW5kKCJcIiIpLmFwcGVu\nZCh2YWwuZ2V0Q29sdW1uQWxpYXMoCiAgICAgICAgICAgIHZhbC5nZXRGaWVs\nZE1hcHBpbmcoKS5nZXRDb2x1bW5zKClbMF0pKS4KICAgICAgICAgICAgYXBw\nZW5kKCJcIiIpOyAgICAgICAgCiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9p\nZCBhcHBlbmRYbWxFeGlzdHMoU1FMQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUg\ndmFsKSB7CiAgICAgICAgYnVmLmFwcGVuZCgiWE1MRVhJU1RTKCciKTsKICAg\nICAgICBidWYuYXBwZW5kKCIkIikuYXBwZW5kKHZhbC5nZXRDb2x1bW5BbGlh\ncygKICAgICAgICAgICAgdmFsLmdldEZpZWxkTWFwcGluZygpLmdldENvbHVt\nbnMoKVswXSkpLgogICAgICAgICAgICBhcHBlbmQoIi8qWyIpOwogICAgICAg\nIHZhbC5hcHBlbmRUbyhidWYpOyAgICAgICAgCiAgICB9CiAgICAKICAgIC8q\nKgogICAgICogYWRkIENBU1QgZm9yIGEgc2NhbGFyIGZ1bmN0aW9uIHdoZXJl\nIG9wZXJhbmQgaXMgYSBwYXJhbQogICAgICogCiAgICAgKiBAcGFyYW0gZnVu\nYyBvcmlnaW5hbCBzdHJpbmcKICAgICAqIEBwYXJhbSB0YXJnZXQgc3Vic3Ry\naW5nIHRvIGxvb2sgZm9yCiAgICAgKiBAcGFyYW0gYXNTdHJpbmcgCiAgICAg\nKiBAcmV0dXJuIHVwZGF0ZWQgc3RyaW5nIChmdW5jKQogICAgICovCiAgICBw\ncml2YXRlIFN0cmluZyBhZGRDYXN0QXNTdHJpbmcoU3RyaW5nIGZ1bmMsIFN0\ncmluZyB0YXJnZXQsIAogICAgICAgICAgICBTdHJpbmcgYXNTdHJpbmcpIHsK\nICAgICAgICBTdHJpbmcgZnN0cmluZyA9IGZ1bmM7CiAgICAgICAgaWYgKGZ1\nbmMuaW5kZXhPZih0YXJnZXQpICE9IC0xKQogICAgICAgICAgICBmc3RyaW5n\nID0gU3RyaW5ncy5yZXBsYWNlKAogICAgICAgICAgICAgICAgZnVuYywgdGFy\nZ2V0LCAiQ0FTVCgiICsgdGFyZ2V0ICsgYXNTdHJpbmcgKyAiKSIpOwogICAg\nICAgIHJldHVybiBmc3RyaW5nOwogICAgfQoKICAgIC8qKgogICAgICogYWRk\nIENBU1QgZm9yIGEgZnVuY3Rpb24gb3BlcmF0b3Igd2hlcmUgb3BlcmFuZCBp\ncyBhIHBhcmFtCiAgICAgKiAKICAgICAqIEBwYXJhbSBmdW5jIGZ1bmN0aW9u\nIG5hbWUKICAgICAqIEBwYXJhbSB2YWwgdHlwZQogICAgICogQHJldHVybiB1\ncGRhdGVkIHN0cmluZyAoZnVuYykKICAgICAqLwogICAgcHVibGljIFN0cmlu\nZyBhZGRDYXN0QXNUeXBlKFN0cmluZyBmdW5jLCBWYWwgdmFsKSB7CiAgICAg\nICAgU3RyaW5nIGZzdHJpbmcgPSBudWxsOwogICAgICAgIFN0cmluZyB0eXBl\nID0gZ2V0VHlwZU5hbWUoZ2V0SkRCQ1R5cGUoSmF2YVR5cGVzLmdldFR5cGVD\nb2RlKHZhbAogICAgICAgICAgICAuZ2V0VHlwZSgpKSwgZmFsc2UpKTsKICAg\nICAgICBpZiAoU3RyaW5nLmNsYXNzLmVxdWFscyh2YWwuZ2V0VHlwZSgpKSkK\nICAgICAgICAgICAgdHlwZSA9IHR5cGUgKyAiKCIgKyBjaGFyYWN0ZXJDb2x1\nbW5TaXplICsgIikiOwogICAgICAgIGZzdHJpbmcgPSAiQ0FTVCg/IEFTICIg\nKyB0eXBlICsgIikiOwogICAgICAgIHJldHVybiBmc3RyaW5nOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBiYXRjaCBsaW1pdC4gSWYgdGhl\nIGJhdGNoTGltaXQgaXMgLTEsIGNoYW5nZSBpdCB0byAxMDAgZm9yCiAgICAg\nKiBiZXN0IHBlcmZvcm1hbmNlCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0\nQmF0Y2hMaW1pdCgpIHsKICAgICAgICBpbnQgbGltaXQgPSBzdXBlci5nZXRC\nYXRjaExpbWl0KCk7CiAgICAgICAgaWYgKGxpbWl0ID09IFVOTElNSVRFRCkg\newogICAgICAgICAgICBsaW1pdCA9IGRlZmF1bHRCYXRjaExpbWl0OwogICAg\nICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAg\nICAgICBsb2cudHJhY2UoX2xvYy5nZXQoImJhdGNoX3VubGltaXQiLCBTdHJp\nbmcudmFsdWVPZihsaW1pdCkpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIGxpbWl0OwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBjb3Jy\nZWN0IENBU1QgZnVuY3Rpb24gc3ludGF4CiAgICAgKiAKICAgICAqIEBwYXJh\nbSB2YWwgb3BlcmFuZCBvZiBjYXN0CiAgICAgKiBAcGFyYW0gZnVuYyBvcmln\naW5hbCBzdHJpbmcKICAgICAqIEByZXR1cm4gYSBTdHJpbmcgd2l0aCB0aGUg\nY29ycmVjdCBDQVNUIGZ1bmN0aW9uIHN5bnRheAogICAgICovCiAgICBwdWJs\naWMgU3RyaW5nIGdldENhc3RGdW5jdGlvbihWYWwgdmFsLCBTdHJpbmcgZnVu\nYykgewogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBMaXQgfHwgdmFsIGlu\nc3RhbmNlb2YgUGFyYW0pIHsKICAgICAgICAgICAgaWYgKGZ1bmMuaW5kZXhP\nZigiVkFSQ0hBUiIpID09IC0xKSB7CiAgICAgICAgICAgICAgICBmdW5jID0g\nYWRkQ2FzdEFzU3RyaW5nKGZ1bmMsICJ7MH0iLCAiIEFTIFZBUkNIQVIoIiAr\nIHZhcmNoYXJDYXN0TGVuZ3RoICsgIikiKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgICAgICByZXR1cm4gZnVuYzsKICAgIH0KICAgIAogICAgLyoq\nCiAgICAgKiBSZXR1cm4gdGhlIGNvcnJlY3QgQ0FTVCBmdW5jdGlvbiBzeW50\nYXgKICAgICAqIAogICAgICogQHBhcmFtIHZhbCBvcGVyYW5kIG9mIGNhc3QK\nICAgICAqIEBwYXJhbSBmdW5jIG9yaWdpbmFsIHN0cmluZwogICAgICogQHBh\ncmFtIGNvbCBkYXRhYmFzZSBjb2x1bW4KICAgICAqIEByZXR1cm4gYSBTdHJp\nbmcgd2l0aCB0aGUgY29ycmVjdCBDQVNUIGZ1bmN0aW9uIHN5bnRheAogICAg\nICovCiAgICBwdWJsaWMgU3RyaW5nIGdldENhc3RGdW5jdGlvbihWYWwgdmFs\nLCBTdHJpbmcgZnVuYywgQ29sdW1uIGNvbCkgewogICAgICAgIGJvb2xlYW4g\nZG9DYXN0ID0gZmFsc2U7CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIExp\ndCB8fCB2YWwgaW5zdGFuY2VvZiBQYXJhbSkgewogICAgICAgIAlkb0Nhc3Qg\nPSB0cnVlOwogICAgICAgIH0KICAgICAgICAvLyBjYXN0IGFueXRoaW5nIG5v\ndCBhbHJlYWR5IGEgVkFSQ0hBUiB0byBWQVJDSEFSCiAgICAgICAgaWYgKGNv\nbC5nZXRUeXBlKCkgIT0gVHlwZXMuVkFSQ0hBUikgewogICAgICAgICAgICBk\nb0Nhc3QgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoZG9DYXN0ID09\nIHRydWUpIHsKICAgICAgICAgICAgaWYgKGZ1bmMuaW5kZXhPZigiVkFSQ0hB\nUiIpID09IC0xKSB7CiAgICAgICAgICAgICAgICBmdW5jID0gYWRkQ2FzdEFz\nU3RyaW5nKGZ1bmMsICJ7MH0iLCAiIEFTIFZBUkNIQVIoIiArIHZhcmNoYXJD\nYXN0TGVuZ3RoICsgIikiKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICByZXR1cm4gZnVuYzsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbmRl\neE9mKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVlIHN0ciwgRmlsdGVyVmFs\ndWUgZmluZCwKICAgICAgICAgICAgRmlsdGVyVmFsdWUgc3RhcnQpIHsKICAg\nICAgICBpZiAoZmluZC5nZXRWYWx1ZSgpICE9IG51bGwpIHsgLy8gbm9uIGNv\nbnN0YW50cwogICAgICAgICAgICBidWYuYXBwZW5kKCIoTE9DQVRFKENBU1Qo\nKCIpOwogICAgICAgICAgICBmaW5kLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoIikgQVMgVkFSQ0hBUigxMDAwKSksICIpOwogICAg\nICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHRoaXMgaXMgYSBjb25zdGFu\ndAogICAgICAgICAgICBidWYuYXBwZW5kKCIoTE9DQVRFKCIpOwogICAgICAg\nICAgICBmaW5kLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoIiwgIik7CiAgICAgICAgfQogICAgICAgIGlmIChzdHIuZ2V0VmFsdWUo\nKSAhPSBudWxsKSB7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIkNBU1QoKCIp\nOwogICAgICAgICAgICBzdHIuYXBwZW5kVG8oYnVmKTsKICAgICAgICAgICAg\nYnVmLmFwcGVuZCgiKSBBUyBWQVJDSEFSKDEwMDApKSIpOwogICAgICAgIH0g\nZWxzZSB7CiAgICAgICAgICAgIHN0ci5hcHBlbmRUbyhidWYpOwogICAgICAg\nIH0KICAgICAgICBpZiAoc3RhcnQgIT0gbnVsbCkgewogICAgICAgICAgICBp\nZiAoc3RhcnQuZ2V0VmFsdWUoKSA9PSBudWxsKSB7CiAgICAgICAgICAgICAg\nICBidWYuYXBwZW5kKCIsIENBU1QoKCIpOwogICAgICAgICAgICAgICAgc3Rh\ncnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQo\nIikgQVMgSU5URUdFUikgKyAxIik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgICAgICBidWYuYXBwZW5kKCIsICIpOwogICAgICAgICAgICAg\nICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgICAgICBidWYuYXBwZW5kKCIpIC0gMSkiKTsKICAgIH0KICAgIAog\nICAgLyoqIAogICAgICogQ2FzdCB0aGUgc3BlY2lmaWVkIHZhbHVlIHRvIHRo\nZSBzcGVjaWZpZWQgdHlwZS4KICAgICAqCiAgICAgKiBAcGFyYW0gYnVmIHRo\nZSBidWZmZXIgdG8gYXBwZW5kIHRoZSBjYXN0IHRvCiAgICAgKiBAcGFyYW0g\ndmFsIHRoZSB2YWx1ZSB0byBjYXN0CiAgICAgKiBAcGFyYW0gdHlwZSB0aGUg\ndHlwZSBvZiB0aGUgY2FzZSwgZS5nLiB7QGxpbmsgVHlwZXMjTlVNRVJJQ30K\nICAgICAqLwogICAgcHVibGljIHZvaWQgYXBwZW5kQ2FzdChTUUxCdWZmZXIg\nYnVmLCBGaWx0ZXJWYWx1ZSB2YWwsIGludCB0eXBlKSB7CgogICAgICAgIC8v\nIENvbnZlcnQgdGhlIGNhc3QgZnVuY3Rpb246ICJDQVNUKHswfSBBUyB7MX0p\nIgogICAgICAgIGludCBmaXJzdFBhcmFtID0gY2FzdEZ1bmN0aW9uLmluZGV4\nT2YoInswfSIpOwogICAgICAgIFN0cmluZyBwcmUgPSBjYXN0RnVuY3Rpb24u\nc3Vic3RyaW5nKDAsIGZpcnN0UGFyYW0pOyAvLyAiQ0FTVCgiCiAgICAgICAg\nU3RyaW5nIG1pZCA9IGNhc3RGdW5jdGlvbi5zdWJzdHJpbmcoZmlyc3RQYXJh\nbSArIDMpOwogICAgICAgIGludCBzZWNvbmRQYXJhbSA9IG1pZC5pbmRleE9m\nKCJ7MX0iKTsKICAgICAgICBTdHJpbmcgcG9zdDsKICAgICAgICBpZiAoc2Vj\nb25kUGFyYW0gPiAtMSkgewogICAgICAgICAgICBwb3N0ID0gbWlkLnN1YnN0\ncmluZyhzZWNvbmRQYXJhbSArIDMpOyAvLyAiKSIKICAgICAgICAgICAgbWlk\nID0gbWlkLnN1YnN0cmluZygwLCBzZWNvbmRQYXJhbSk7IC8vICIgQVMgIgog\nICAgICAgIH0gZWxzZQogICAgICAgICAgICBwb3N0ID0gIiI7CgogICAgICAg\nIC8vIE5vIG5lZWQgdG8gYWRkIENBU1QgaWYgdGhlIHZhbHVlIGlzIGEgY29u\nc3RhbnQKICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgTGl0IHx8IHZhbCBp\nbnN0YW5jZW9mIFBhcmFtKSB7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQocHJl\nKTsKICAgICAgICAgICAgdmFsLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQobWlkKTsKICAgICAgICAgICAgYnVmLmFwcGVuZChnZXRU\neXBlTmFtZSh0eXBlKSk7CiAgICAgICAgICAgIGFwcGVuZExlbmd0aChidWYs\nIHR5cGUpOwogICAgICAgICAgICBidWYuYXBwZW5kKHBvc3QpOwogICAgICAg\nIH0gZWxzZSB7CiAgICAgICAgICAgIHZhbC5hcHBlbmRUbyhidWYpOwogICAg\nICAgICAgICBTdHJpbmcgc3FsU3RyaW5nID0gYnVmLmdldFNRTChmYWxzZSk7\nCiAgICAgICAgICAgIGlmIChzcWxTdHJpbmcuZW5kc1dpdGgoIj8iKSkgewog\nICAgICAgICAgICAgICAgLy8gY2FzZSAiKD8iIC0gY29udmVydCB0byAiQ0FT\nVCg/IEFTIHR5cGUiCiAgICAgICAgICAgICAgICBTdHJpbmcgdHlwZU5hbWUg\nPSBnZXRUeXBlTmFtZSh0eXBlKTsKICAgICAgICAgICAgICAgIGlmIChTdHJp\nbmcuY2xhc3MuZXF1YWxzKHZhbC5nZXRUeXBlKCkpKQogICAgICAgICAgICAg\nICAgICAgIHR5cGVOYW1lID0gdHlwZU5hbWUgKyAiKCIgKyBjaGFyYWN0ZXJD\nb2x1bW5TaXplICsgIikiOwogICAgICAgICAgICAgICAgU3RyaW5nIHN0ciA9\nICJDQVNUKD8gQVMgIiArIHR5cGVOYW1lICsgIikiOwogICAgICAgICAgICAg\nICAgYnVmLnJlcGxhY2VTcWxTdHJpbmcoc3FsU3RyaW5nLmxlbmd0aCgpIC0g\nMSwKICAgICAgICAgICAgICAgICAgICAgICAgc3FsU3RyaW5nLmxlbmd0aCgp\nLCBzdHIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogQ3JlYXRlIGFuIGluZGV4IGlmIG5lY2Vzc2FyeSBmb3Igc29t\nZSBkYXRhYmFzZSB0YWJsZXMKICAgICAqLwogICAgcHVibGljIHZvaWQgY3Jl\nYXRlSW5kZXhJZk5lY2Vzc2FyeShTY2hlbWEgc2NoZW1hLCBTdHJpbmcgdGFi\nbGUsCiAgICAgICAgICAgIENvbHVtbiBwa0NvbHVtbikgewogICAgICAgIGlm\nIChpc0RCMlpPU1Y4eE9yTGF0ZXIoKSkgewogICAgICAgICAgICAvLyBidWls\nZCB0aGUgaW5kZXggZm9yIHRoZSBzZXF1ZW5jZSB0YWJsZXMKICAgICAgICAg\nICAgLy8gdGhlIGluZGV4IG5hbWUgd2lsbCB0aGUgZnVsbHkgcXVhbGlmaWVk\nIHRhYmxlIG5hbWUgKyBfSURYCiAgICAgICAgICAgIFRhYmxlIHRhYiA9IHNj\naGVtYS5nZXRUYWJsZSh0YWJsZSk7CiAgICAgICAgICAgIEluZGV4IGlkeCA9\nIHRhYi5hZGRJbmRleCh0YWIuZ2V0RnVsbE5hbWUoKSArICJfSURYIik7CiAg\nICAgICAgICAgIGlkeC5zZXRVbmlxdWUodHJ1ZSk7CiAgICAgICAgICAgIGlk\neC5hZGRDb2x1bW4ocGtDb2x1bW4pOwogICAgICAgIH0KICAgIH0KICAgIAog\nICAgU3RyaW5nIG51bGxTYWZlKFN0cmluZyBzKSB7CiAgICAJcmV0dXJuIHMg\nPT0gbnVsbCA/ICIiIDogczsKICAgIH0KfQo=\n","encoding":"base64"}

