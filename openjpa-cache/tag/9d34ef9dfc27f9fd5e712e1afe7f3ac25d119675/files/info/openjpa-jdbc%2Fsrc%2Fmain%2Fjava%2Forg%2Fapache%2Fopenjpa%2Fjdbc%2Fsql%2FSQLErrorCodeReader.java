{"sha":"dece0a3254493b20a68b722f1110e9eec408da7f","node_id":"MDQ6QmxvYjIwNjM2NDpkZWNlMGEzMjU0NDkzYjIwYTY4YjcyMmYxMTEwZTllZWM0MDhkYTdm","size":4946,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/dece0a3254493b20a68b722f1110e9eec408da7f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbDsKCmltcG9ydCBqYXZh\nLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsK\naW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwu\nSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51\ndGlsLk1hcDsKCmltcG9ydCBqYXZheC54bWwucGFyc2Vycy5Eb2N1bWVudEJ1\naWxkZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5n\nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpE\nQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIubG9nLkxvZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnhtbC5YTUxGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0\naWwuU3RvcmVFeGNlcHRpb247CmltcG9ydCBvcmcudzNjLmRvbS5Eb2N1bWVu\ndDsKaW1wb3J0IG9yZy53M2MuZG9tLkVsZW1lbnQ7CmltcG9ydCBvcmcudzNj\nLmRvbS5OYW1lZE5vZGVNYXA7CmltcG9ydCBvcmcudzNjLmRvbS5Ob2RlOwpp\nbXBvcnQgb3JnLnczYy5kb20uTm9kZUxpc3Q7CgovKioKICogUGFyc2VzIFhN\nTCBjb250ZW50IG9mIFNRTCBFcnJvciBTdGF0ZSBjb2RlcyB0byBwb3B1bGF0\nZSBlcnJybyBjb2RlcyBmb3IKICogYSBnaXZlbiBEYXRhYmFzZSBEaWN0aW9u\nYXJ5LgogKiAKICogQGF1dGhvciBQaW5ha2kgUG9kZGFyCiAqIAogKi8KcHVi\nbGljIGNsYXNzIFNRTEVycm9yQ29kZVJlYWRlciB7Cglwcml2YXRlIExvZyBs\nb2cgPSBudWxsOwoJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgRVJST1Jf\nQ09ERV9ERUxJTUlURVIgPSAiLCI7CglwdWJsaWMgc3RhdGljIGZpbmFsIE1h\ncDxTdHJpbmcsIEludGVnZXI+IHN0b3JlRXJyb3JUeXBlcyA9IAoJCW5ldyBI\nYXNoTWFwPFN0cmluZywgSW50ZWdlcj4oKTsKCXN0YXRpYyB7CgkJc3RvcmVF\ncnJvclR5cGVzLnB1dCgibG9jayIsIFN0b3JlRXhjZXB0aW9uLkxPQ0spOwoJ\nCXN0b3JlRXJyb3JUeXBlcy5wdXQoIm9iamVjdC1leGlzdHMiLCBTdG9yZUV4\nY2VwdGlvbi5PQkpFQ1RfRVhJU1RTKTsKCQlzdG9yZUVycm9yVHlwZXMKCQkJ\nCS5wdXQoIm9iamVjdC1ub3QtZm91bmQiLCBTdG9yZUV4Y2VwdGlvbi5PQkpF\nQ1RfTk9UX0ZPVU5EKTsKCQlzdG9yZUVycm9yVHlwZXMucHV0KCJvcHRpbWlz\ndGljIiwgU3RvcmVFeGNlcHRpb24uT1BUSU1JU1RJQyk7CgkJc3RvcmVFcnJv\nclR5cGVzLnB1dCgicmVmZXJlbnRpYWwtaW50ZWdyaXR5IiwKCQkJCVN0b3Jl\nRXhjZXB0aW9uLlJFRkVSRU5USUFMX0lOVEVHUklUWSk7CgoJfQoJCglwcml2\nYXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IAoJCUxvY2FsaXpl\nci5mb3JQYWNrYWdlKFNRTEVycm9yQ29kZVJlYWRlci5jbGFzcyk7CgkKCXB1\nYmxpYyBMaXN0PFN0cmluZz4gZ2V0RGljdGlvbmFyaWVzKElucHV0U3RyZWFt\nIGluKSB7CgkJTGlzdDxTdHJpbmc+IHJlc3VsdCA9IG5ldyBBcnJheUxpc3Q8\nU3RyaW5nPigpOwoJCURvY3VtZW50QnVpbGRlciBidWlsZGVyID0gWE1MRmFj\ndG9yeS5nZXRET01QYXJzZXIoZmFsc2UsIGZhbHNlKTsKCQl0cnkgewoJCQlE\nb2N1bWVudCBkb2MgPSBidWlsZGVyLnBhcnNlKGluKTsKCQkJRWxlbWVudCBy\nb290ID0gZG9jLmdldERvY3VtZW50RWxlbWVudCgpOwoJCQlOb2RlTGlzdCBu\nb2RlcyA9IHJvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpY3Rpb25hcnki\nKTsKCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBub2Rlcy5nZXRMZW5ndGgoKTsg\naSsrKSB7CgkJCQlOb2RlIG5vZGUgPSBub2Rlcy5pdGVtKGkpOwoJCQkJTmFt\nZWROb2RlTWFwIGF0dHJzID0gbm9kZS5nZXRBdHRyaWJ1dGVzKCk7CgkJCQlO\nb2RlIGRpY3Rpb25hcnkgPSBhdHRycy5nZXROYW1lZEl0ZW0oImNsYXNzIik7\nCgkJCQlpZiAoZGljdGlvbmFyeSAhPSBudWxsKSB7CgkJCQkgICByZXN1bHQu\nYWRkKGRpY3Rpb25hcnkuZ2V0Tm9kZVZhbHVlKCkpOwoJCQkJfQoJCQl9CgkJ\nfSBjYXRjaCAoVGhyb3dhYmxlIGUpIHsKCQkJaWYgKGxvZy5pc1dhcm5FbmFi\nbGVkKCkpIHsKCQkJCWxvZy5lcnJvcihfbG9jLmdldCgiZXJyb3ItY29kZS1w\nYXJzZS1lcnJvciIpKTsKCQkJfQoJCX0gZmluYWxseSB7CgkJCXRyeSB7CgkJ\nCQlpbi5jbG9zZSgpOwoJCQl9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7CgkJ\nCQkvLyBpZ25vcmUKCQkJfQoJCX0KCQlyZXR1cm4gcmVzdWx0OwoJfQoKCS8q\nKgoJICogUGFyc2VzIGdpdmVuIHN0cmVhbSBvZiBYTUwgY29udGVudCBmb3Ig\nZXJyb3IgY29kZXMgb2YgdGhlIGdpdmVuIGRhdGFiYXNlCgkgKiBkaWN0aW9u\nYXJ5IG5hbWUuIFBvcHVsYXRlcyB0aGUgZ2l2ZW4gZGljdGlvbmFyeSB3aXRo\nIHRoZSBlcnJvciBjb2Rlcy4KCSAqIAoJICovCglwdWJsaWMgdm9pZCBwYXJz\nZShJbnB1dFN0cmVhbSBpbiwgU3RyaW5nIGRpY3ROYW1lLCBEQkRpY3Rpb25h\ncnkgZGljdCkgewoJCWlmIChpbiA9PSBudWxsIHx8IGRpY3QgPT0gbnVsbCkK\nCQkJcmV0dXJuOwoJCWxvZyA9IGRpY3QuY29uZi5nZXRMb2coSkRCQ0NvbmZp\nZ3VyYXRpb24uTE9HX0pEQkMpOwoJCURvY3VtZW50QnVpbGRlciBidWlsZGVy\nID0gWE1MRmFjdG9yeS5nZXRET01QYXJzZXIoZmFsc2UsIGZhbHNlKTsKCQl0\ncnkgewoJCQlEb2N1bWVudCBkb2MgPSBidWlsZGVyLnBhcnNlKGluKTsKCQkJ\nRWxlbWVudCByb290ID0gZG9jLmdldERvY3VtZW50RWxlbWVudCgpOwoJCQlO\nb2RlTGlzdCBub2RlcyA9IHJvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRp\nY3Rpb25hcnkiKTsKCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBub2Rlcy5nZXRM\nZW5ndGgoKTsgaSsrKSB7CgkJCQlOb2RlIG5vZGUgPSBub2Rlcy5pdGVtKGkp\nOwoJCQkJTmFtZWROb2RlTWFwIGF0dHJzID0gbm9kZS5nZXRBdHRyaWJ1dGVz\nKCk7CgkJCQlOb2RlIGRpY3Rpb25hcnkgPSBhdHRycy5nZXROYW1lZEl0ZW0o\nImNsYXNzIik7CgkJCQlpZiAoZGljdGlvbmFyeSAhPSBudWxsIAoJCQkJICYm\nIGRpY3Rpb25hcnkuZ2V0Tm9kZVZhbHVlKCkuZXF1YWxzKGRpY3ROYW1lKSkg\newoJCQkJCXJlYWRFcnJvckNvZGVzKG5vZGUsIGRpY3QpOwoJCQkJfQoJCQl9\nCgkJfSBjYXRjaCAoVGhyb3dhYmxlIGUpIHsKCQkJaWYgKGxvZy5pc1dhcm5F\nbmFibGVkKCkpIHsKCQkJCWxvZy5lcnJvcihfbG9jLmdldCgiZXJyb3ItY29k\nZS1wYXJzZS1lcnJvciIpKTsKCQkJfQoJCX0gZmluYWxseSB7CgkJCXRyeSB7\nCgkJCQlpbi5jbG9zZSgpOwoJCQl9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7\nCgkJCQkvLyBpZ25vcmUKCQkJfQoJCX0KCX0KCglzdGF0aWMgdm9pZCByZWFk\nRXJyb3JDb2RlcyhOb2RlIG5vZGUsIERCRGljdGlvbmFyeSBkaWN0KSB7CgkJ\nTm9kZUxpc3QgY2hpbGRyZW4gPSBub2RlLmdldENoaWxkTm9kZXMoKTsKCQlm\nb3IgKGludCBpID0gMDsgaSA8IGNoaWxkcmVuLmdldExlbmd0aCgpOyBpKysp\nIHsKCQkJTm9kZSBjaGlsZCA9IGNoaWxkcmVuLml0ZW0oaSk7CgkJCXNob3J0\nIG5vZGVUeXBlID0gY2hpbGQuZ2V0Tm9kZVR5cGUoKTsKCQkJaWYgKG5vZGVU\neXBlID09IE5vZGUuRUxFTUVOVF9OT0RFKSB7CgkJCQlTdHJpbmcgZXJyb3JU\neXBlID0gY2hpbGQuZ2V0Tm9kZU5hbWUoKTsKCQkJCU5vZGUgdGV4dE5vZGUg\nPSBjaGlsZC5nZXRGaXJzdENoaWxkKCk7CgkJCQlpZiAoc3RvcmVFcnJvclR5\ncGVzLmNvbnRhaW5zS2V5KGVycm9yVHlwZSkgJiYgdGV4dE5vZGUgIT0gbnVs\nbCl7CgkJCQkJU3RyaW5nIGVycm9yQ29kZXMgPSB0ZXh0Tm9kZS5nZXROb2Rl\nVmFsdWUoKTsKCQkJCQlpZiAoIVN0cmluZ1V0aWxzLmlzRW1wdHkoZXJyb3JD\nb2RlcykpIHsKCQkJCQkJU3RyaW5nW10gY29kZXMgPSBlcnJvckNvZGVzLnNw\nbGl0KEVSUk9SX0NPREVfREVMSU1JVEVSKTsKCQkJCQkJZm9yIChTdHJpbmcg\nY29kZSA6IGNvZGVzKSB7CgkJCQkJCQlkaWN0LmFkZEVycm9yQ29kZShzdG9y\nZUVycm9yVHlwZXMuZ2V0KGVycm9yVHlwZSksCgkJCQkJCQkJCWNvZGUudHJp\nbSgpKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KfQo=\n","encoding":"base64"}

