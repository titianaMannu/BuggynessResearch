{"sha":"7c59d7fcdfcc7ed61b54c41ed5933a3bc23634af","node_id":"MDQ6QmxvYjIwNjM2NDo3YzU5ZDdmY2RmY2M3ZWQ2MWI1NGM0MWVkNTkzM2EzYmMyMzYzNGFm","size":14064,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7c59d7fcdfcc7ed61b54c41ed5933a3bc23634af","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGguQmlnSW50\nZWdlcjsKaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZh\nLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsKaW1wb3J0IGphdmEuc3FsLlJlc3Vs\ndFNldDsKaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGph\ndmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKCmltcG9y\ndCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5QcmltYXJ5\nS2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRh\nYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlVu\naXF1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuamRiYy5EZWxl\nZ2F0aW5nQ29ubmVjdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbWV0YS5KYXZhVHlwZXM7CgovKioKICogRGljdGlvbmFyeSBmb3IgU3liYXNl\nLgogKiAgVGhlIG1haW4gcG9pbnQgb2YgaW50ZXJlc3QgaXMgdGhhdCBieSBk\nZWZhdWx0LCBldmVyeSB0YWJsZQogKiB0aGF0IGlzIGNyZWF0ZWQgd2lsbCBo\nYXZlIGEgdW5pcXVlIGNvbHVtbiBuYW1lZCAiVU5RX0lOREVYIiBvZgogKiB0\naGUgIklERU5USVRZIiB0eXBlLiBPcGVuSlBBIHdpbGwgbm90IGV2ZXIgdXRp\nbGl6ZSB0aGlzIGNvbHVtbi4gSG93ZXZlciwKICogZHVlIHRvIGludGVybmFs\nIFN5YmFzZSByZXN0cmljdGlvbnMsIHRoaXMgY29sdW1uIGlzIHJlcXVpcmVk\nCiAqIGluIG9yZGVyIHRvIHN1cHBvcnQgcGVzc2ltaXN0aWMgKGRhdGFzdG9y\nZSkgbG9ja2luZywgc2luY2UgU3liYXNlCiAqIHJlcXVpcmVzIHRoYXQgYW55\nIHRhYmxlcyBpbiBhICJTRUxFQ1QgLi4uIEZPUiBVUERBVEUiIGNsYXVzZSBo\nYXZlCiAqIGEgdW5pcXVlIGluZGV4IHRoYXQgaXMgPHN0cm9uZz5ub3Q8L3N0\ncm9uZz4gaW5jbHVkZWQgaW4gdGhlIGxpc3QKICogb2YgY29sdW1ucywgYXMg\nZGVzY3JpYmVkIGluIHRoZQogKiA8YSBocmVmPSJodHRwOi8vd3d3LnN5YmFz\nZS5jb20vZGV0YWlsLzEsNjkwNCwxMDIzMDc1LDAwLmh0bWwiCiAqID5TeWJh\nc2UgZG9jdW1lbnRhdGlvbjwvYT4uIFRoaXMgYmVoYXZpb3IgY2FuIGJlIHN1\ncnByZXNzZWQgYnkgc2V0dGluZyB0aGUKICogZGljdGlvbmFyeSBwcm9wZXJ0\neSA8Y29kZT5DcmVhdGVJZGVudGl0eUNvbHVtbj1mYWxzZTwvY29kZT4uIFRo\nZQogKiBuYW1lIG9mIHRoZSB1bmlxdWUgY29sdW1uIGNhbiBiZSBjaGFuZ2Vk\nIGJ5IHNldHRpbmcgdGhlIHByb3BlcnR5CiAqIDxjb2RlPklkZW50aXR5Q29s\ndW1uTmFtZT1DT0xVTU5fTkFNRTwvY29kZT4uCiAqICBBIGdvb2QgU3liYXNl\nIHR5cGUgcmVmZXJlbmNlIGlzIGNhbiBiZSBmb3VuZCA8YQogKiBocmVmPSJo\ndHRwOi8vd3d3LmlzcGlyZXIuY29tL2RvYy9zcWx3YXlzMzYvc3liYXNlL3N5\nYl9kdHlwZXMuaHRtbCI+aGVyZTwvYT4uCiAqLwpwdWJsaWMgY2xhc3MgU3li\nYXNlRGljdGlvbmFyeQogICAgZXh0ZW5kcyBBYnN0cmFjdFNRTFNlcnZlckRp\nY3Rpb25hcnkgewoKICAgIHByaXZhdGUgc3RhdGljIExvY2FsaXplciBfbG9j\nID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoU3liYXNlRGljdGlv\nbmFyeS5jbGFzcyk7CgogICAgLyoqCiAgICAgKiBJZiB0cnVlLCB0aGVuIHdo\nZW5ldmVyIHRoZSA8Y29kZT5zY2hlbWF0b29sPC9jb2RlPiBjcmVhdGVzIGEK\nICAgICAqIHRhYmxlLCBpdCB3aWxsIGFwcGVuZCBhbiBhZGRpdGlvbmFsIElE\nRU5USVRZIGNvbHVtbiB0byB0aGUKICAgICAqIHRhYmxlJ3MgY3JlYXRpb24g\nU1FMLiBUaGlzIGlzIHNvIFN5YmFzZSB3aWxsIGJlIGFibGUgdG8KICAgICAq\nIHBlcmZvcm0gPGNvZGU+U0VMRUNULi4uRk9SIFVQREFURTwvY29kZT4gc3Rh\ndGVtZW50cy4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gY3JlYXRlSWRl\nbnRpdHlDb2x1bW4gPSB0cnVlOwoKICAgIC8qKgogICAgICogSWYge0BsaW5r\nICNjcmVhdGVJZGVudGl0eUNvbHVtbn0gaXMgdHJ1ZSwgdGhlbiB0aGUKICAg\nICAqIDxjb2RlPmlkZW50aXR5Q29sdW1uTmFtZTwvY29kZT4gd2lsbCBiZSB0\naGUgbmFtZSBvZiB0aGUKICAgICAqIGFkZGl0aW9uYWwgdW5pcXVlIGNvbHVt\nbiB0aGF0IHdpbGwgYmUgY3JlYXRlZC4KICAgICAqLwogICAgcHVibGljIFN0\ncmluZyBpZGVudGl0eUNvbHVtbk5hbWUgPSAiVU5RX0lOREVYIjsKCiAgICBw\ndWJsaWMgU3liYXNlRGljdGlvbmFyeSgpIHsKICAgICAgICBwbGF0Zm9ybSA9\nICJTeWJhc2UiOwogICAgICAgIHNjaGVtYUNhc2UgPSBTQ0hFTUFfQ0FTRV9Q\nUkVTRVJWRTsKICAgICAgICBmb3JVcGRhdGVDbGF1c2UgPSAiRk9SIFVQREFU\nRSBBVCBJU09MQVRJT04gU0VSSUFMSVpBQkxFIjsKCiAgICAgICAgc3VwcG9y\ndHNMb2NraW5nV2l0aERpc3RpbmN0Q2xhdXNlID0gZmFsc2U7CiAgICAgICAg\nc3VwcG9ydHNOdWxsVGFibGVGb3JHZXRDb2x1bW5zID0gZmFsc2U7CiAgICAg\nICAgcmVxdWlyZXNBbGlhc0ZvclN1YnNlbGVjdCA9IHRydWU7CiAgICAgICAg\ncmVxdWlyZXNBdXRvQ29tbWl0Rm9yTWV0YURhdGEgPSB0cnVlOwoKICAgICAg\nICBtYXhUYWJsZU5hbWVMZW5ndGggPSAzMDsKICAgICAgICBtYXhDb2x1bW5O\nYW1lTGVuZ3RoID0gMzA7CiAgICAgICAgbWF4SW5kZXhOYW1lTGVuZ3RoID0g\nMzA7CiAgICAgICAgbWF4Q29uc3RyYWludE5hbWVMZW5ndGggPSAzMDsKCiAg\nICAgICAgYmlnaW50VHlwZU5hbWUgPSAiTlVNRVJJQygzOCkiOwogICAgICAg\nIGJpdFR5cGVOYW1lID0gIlRJTllJTlQiOwoKICAgICAgICAvLyBTeWJhc2Ug\nZG9lc24ndCB1bmRlcnN0YW5kICJYIENST1NTIEpPSU4gWSIsIGJ1dCBpdCBk\nb2VzIHVuZGVyc3RhbmQKICAgICAgICAvLyB0aGUgZXF1aXZhbGVudCAiWCBK\nT0lOIFkgT04gMSA9IDEiCiAgICAgICAgY3Jvc3NKb2luQ2xhdXNlID0gIkpP\nSU4iOwogICAgICAgIHJlcXVpcmVzQ29uZGl0aW9uRm9yQ3Jvc3NKb2luID0g\ndHJ1ZTsKCiAgICAgICAgLy8gdGhlc2UgdGFibGVzIHNob3VsZCBub3QgYmUg\ncmVmbGVjdGVkIG9uCiAgICAgICAgc3lzdGVtVGFibGVTZXQuYWRkQWxsKEFy\ncmF5cy5hc0xpc3QobmV3IFN0cmluZ1tdewogICAgICAgICAgICAiSUpEQkNf\nRlVOQ1RJT05fRVNDQVBFUyIsICJKREJDX0ZVTkNUSU9OX0VTQ0FQRVMiLAog\nICAgICAgICAgICAiU1BUX0lKREJDX0NPTlZFUlNJT04iLCAiU1BUX0lKREJD\nX01EQSIsICJTUFRfSUpEQkNfVEFCTEVfVFlQRVMiLAogICAgICAgICAgICAi\nU1BUX0pEQkNfQ09OVkVSU0lPTiIsICJTUFRfSkRCQ19UQUJMRV9UWVBFUyIs\nICJTUFRfSlRFWFQiLAogICAgICAgICAgICAiU1BUX0xJTUlUX1RZUEVTIiwg\nIlNQVF9NREEiLCAiU1BUX01PTklUT1IiLCAiU1BUX1ZBTFVFUyIsCiAgICAg\nICAgICAgICJTWUJMSUNFTlNFU0xPRyIsCiAgICAgICAgfSkpOwoKICAgICAg\nICAvLyByZXNlcnZlZCB3b3JkcyBzcGVjaWZpZWQgYXQ6CiAgICAgICAgLy8g\naHR0cDovL21hbnVhbHMuc3liYXNlLmNvbS9vbmxpbmVib29rcy9ncm91cC1h\ncy9hc2cxMjUwZS8KICAgICAgICAvLyByZWZtYW4vQEdlbmVyaWNfX0Jvb2tU\nZXh0Vmlldy8yNjYwMwogICAgICAgIHJlc2VydmVkV29yZFNldC5hZGRBbGwo\nQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117CiAgICAgICAgICAgICJBUklU\nSF9PVkVSRkxPVyIsICJCUkVBSyIsICJCUk9XU0UiLCAiQlVMSyIsICJDSEFS\nX0NPTlZFUlQiLAogICAgICAgICAgICAiQ0hFQ0tQT0lOVCIsICJDTFVTVEVS\nRUQiLCAiQ09NUFVURSIsICJDT05GSVJNIiwgIkNPTlRST0xST1ciLAogICAg\nICAgICAgICAiREFUQUJBU0UiLCAiREJDQyIsICJERVRFUk1JTklTVElDIiwg\nIkRJU0sgRElTVElOQ1QiLCAiRFVNTVkiLAogICAgICAgICAgICAiRFVNUCIs\nICJFTkRUUkFOIiwgIkVSUkxWTCIsICJFUlJPUkRBVEEiLCAiRVJST1JFWElU\nIiwgIkVYQ0xVU0lWRSIsCiAgICAgICAgICAgICJFWElUIiwgIkVYUF9ST1df\nU0laRSIsICJGSUxMRkFDVE9SIiwgIkZVTkMiLCAiRlVOQ1RJT04iLAogICAg\nICAgICAgICAiSE9MRExPQ0siLCAiSURFTlRJVFlfR0FQIiwgIklERU5USVRZ\nX0lOU0VSVCIsICJJREVOVElUWV9TVEFSVCIsCiAgICAgICAgICAgICJJRiIs\nICJJTkRFWCIsICJJTk9VVCIsICJJTlNUQUxMIiwgIklOVEVSU0VDVCIsICJK\nQVIiLCAiS0lMTCIsCiAgICAgICAgICAgICJMSU5FTk8iLCAiTE9BRCIsICJM\nT0NLIiwgIk1BWF9ST1dTX1BFUl9QQUdFIiwgIk1JUlJPUiIsCiAgICAgICAg\nICAgICJNSVJST1JFWElUIiwgIk1PRElGWSIsICJORVciLCAiTk9IT0xETE9D\nSyIsICJOT05DTFVTVEVSRUQiLAogICAgICAgICAgICAiTlVNRVJJQ19UUlVO\nQ0FUSU9OIiwgIk9GRiIsICJPRkZTRVRTIiwgIk9OQ0UiLCAiT05MSU5FIiwg\nIk9VVCIsCiAgICAgICAgICAgICJPVkVSIiwgIlBBUlRJVElPTiIsICJQRVJN\nIiwgIlBFUk1BTkVOVCIsICJQTEFOIiwgIlBSSU5UIiwgIlBST0MiLAogICAg\nICAgICAgICAiUFJPQ0VTU0VYSVQiLCAiUFJPWFlfVEFCTEUiLCAiUVVJRVND\nRSIsICJSQUlTRVJST1IiLCAiUkVBRCIsCiAgICAgICAgICAgICJSRUFEUEFT\nVCIsICJSRUFEVEVYVCIsICJSRUNPTkZJR1VSRSIsICJSRUZFUkVOQ0VTIFJF\nTU9WRSIsICJSRU9SRyIsCiAgICAgICAgICAgICJSRVBMQUNFIiwgIlJFUExJ\nQ0FUSU9OIiwgIlJFU0VSVkVQQUdFR0FQIiwgIlJFVFVSTiIsICJSRVRVUk5T\nIiwKICAgICAgICAgICAgIlJPTEUiLCAiUk9XQ09VTlQiLCAiUlVMRSIsICJT\nQVZFIiwgIlNFVFVTRVIiLCAiU0hBUkVEIiwKICAgICAgICAgICAgIlNIVVRE\nT1dOIiwgIlNPTUUiLCAiU1RBVElTVElDUyIsICJTVFJJTkdTSVpFIiwgIlNU\nUklQRSIsCiAgICAgICAgICAgICJTWUJfSURFTlRJVFkiLCAiU1lCX1JFU1RS\nRUUiLCAiU1lCX1RFUk1JTkFURSIsICJURU1QIiwgIlRFWFRTSVpFIiwKICAg\nICAgICAgICAgIlRSQU4iLCAiVFJJR0dFUiIsICJUUlVOQ0FURSIsICJUU0VR\nVUFMIiwgIlVOUEFSVElUSU9OIiwgIlVTRSIsCiAgICAgICAgICAgICJVU0VS\nX09QVElPTiIsICJXQUlURk9SIiwgIldISUxFIiwgIldSSVRFVEVYVCIsCiAg\nICAgICAgfSkpOwoKICAgICAgICAvLyBTeWJhc2UgZG9lcyBub3Qgc3VwcG9y\ndCBmb3JlaWduIGtleSBkZWxldGUvdXBkYXRlIGFjdGlvbiBOVUxMLCBERUZB\nVUxULAogICAgICAgIC8vIENBU0NBREUKICAgICAgICBzdXBwb3J0c051bGxE\nZWxldGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0RlZmF1bHRE\nZWxldGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0Nhc2NhZGVE\nZWxldGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c051bGxVcGRh\ndGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0RlZmF1bHRVcGRh\ndGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0Nhc2NhZGVVcGRh\ndGVBY3Rpb24gPSBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldEpE\nQkNUeXBlKGludCBtZXRhVHlwZUNvZGUsIGJvb2xlYW4gbG9iKSB7CiAgICAg\nICAgc3dpdGNoIChtZXRhVHlwZUNvZGUpIHsKICAgICAgICAgICAgLy8gdGhl\nIGRlZmF1bHQgbWFwcGluZyBmb3IgQllURSBpcyBhIFRJTllJTlQsIGJ1dCBT\neWJhc2UncyBUSU5ZSU5UCiAgICAgICAgICAgIC8vIHR5cGUgY2FuJ3QgaGFu\nZGxlIHRoZSBjb21wbGV0ZSByYW5nZSBmb3IgYSBKYXZhIGJ5dGUKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuQllURToKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuQllURV9PQko6CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0\nUHJlZmVycmVkVHlwZShUeXBlcy5TTUFMTElOVCk7CiAgICAgICAgICAgIGRl\nZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZ2V0SkRCQ1R5\ncGUobWV0YVR5cGVDb2RlLCBsb2IpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRCaWdJbnRlZ2VyKFByZXBhcmVkU3RhdGVtZW50IHN0\nbW50LCBpbnQgaWR4LCBCaWdJbnRlZ2VyIHZhbCwKICAgICAgICBDb2x1bW4g\nY29sKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIC8v\nIHNldEJpZ0RlY2ltYWwgZG9lc24ndCB3b3JrIGhlcmU6IGluIG9uZSBjYXNl\nLCBhIHN0b3JlZCB2YWx1ZQogICAgICAgIC8vIG9mIDc3OTk0Mzg1MTQ5MjQz\nNDk0NDAgdHVybnMgaW50byA3Nzk5NDM4NTE0OTI0MzQ5NDAwCiAgICAgICAg\nLy8gc2V0T2JqZWN0IGdldHMgYXJvdW5kIHRoaXMgaW4gdGhlIFN5YmFzZSBK\nREJDIGRyaXZlcnMKICAgICAgICBzZXRPYmplY3Qoc3RtbnQsIGlkeCwgbmV3\nIEJpZ0RlY2ltYWwodmFsKSwgVHlwZXMuQklHSU5ULCBjb2wpOwogICAgfQoK\nICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRBZGRGb3JlaWduS2V5U1FMKEZvcmVp\nZ25LZXkgZmspIHsKICAgICAgICAvLyBTeWJhc2UgaGFzIHByb2JsZW1zIHdp\ndGggYWRkaW5nIGZvcmllZ24ga2V5cyB2aWEgQUxURVIgVEFCTEUgY29tbWFu\nZAogICAgICAgIHJldHVybiBuZXcgU3RyaW5nWzBdOwogICAgfQoKICAgIHB1\nYmxpYyBTdHJpbmdbXSBnZXRDcmVhdGVUYWJsZVNRTChUYWJsZSB0YWJsZSkg\newogICAgICAgIGlmICghY3JlYXRlSWRlbnRpdHlDb2x1bW4pCiAgICAgICAg\nICAgIHJldHVybiBzdXBlci5nZXRDcmVhdGVUYWJsZVNRTCh0YWJsZSk7Cgog\nICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7\nCiAgICAgICAgYnVmLmFwcGVuZCgiQ1JFQVRFIFRBQkxFICIpLmFwcGVuZChn\nZXRGdWxsTmFtZSh0YWJsZSwgZmFsc2UpKS4KICAgICAgICAgICAgYXBwZW5k\nKCIgKCIpOwoKICAgICAgICBDb2x1bW5bXSBjb2xzID0gdGFibGUuZ2V0Q29s\ndW1ucygpOwogICAgICAgIGJvb2xlYW4gaGFzSWRlbnRpdHkgPSBmYWxzZTsK\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgIGlmIChjb2xzW2ldLmlzQXV0b0Fzc2lnbmVkKCkp\nCiAgICAgICAgICAgICAgICBoYXNJZGVudGl0eSA9IHRydWU7CgogICAgICAg\nICAgICBidWYuYXBwZW5kKGkgPT0gMCA/ICIiIDogIiwgIik7CiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoZ2V0RGVjbGFyZUNvbHVtblNRTChjb2xzW2ldLCBm\nYWxzZSkpOwogICAgICAgIH0KCiAgICAgICAgLy8gYWRkIGFuIGlkZW50aXR5\nIGNvbHVtbiBpZiB3ZSBkbyBub3QgYWxyZWFkeSBoYXZlIG9uZQogICAgICAg\nIGlmICghaGFzSWRlbnRpdHkpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiwg\nIikuYXBwZW5kKGlkZW50aXR5Q29sdW1uTmFtZSkuCiAgICAgICAgICAgICAg\nICBhcHBlbmQoIiBOVU1FUklDIElERU5USVRZIFVOSVFVRSIpOwoKICAgICAg\nICBQcmltYXJ5S2V5IHBrID0gdGFibGUuZ2V0UHJpbWFyeUtleSgpOwogICAg\nICAgIGlmIChwayAhPSBudWxsKQogICAgICAgICAgICBidWYuYXBwZW5kKCIs\nICIpLmFwcGVuZChnZXRQcmltYXJ5S2V5Q29uc3RyYWludFNRTChwaykpOwoK\nICAgICAgICBVbmlxdWVbXSB1bnFzID0gdGFibGUuZ2V0VW5pcXVlcygpOwog\nICAgICAgIFN0cmluZyB1bnFTdHI7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCB1bnFzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHVucVN0ciA9\nIGdldFVuaXF1ZUNvbnN0cmFpbnRTUUwodW5xc1tpXSk7CiAgICAgICAgICAg\nIGlmICh1bnFTdHIgIT0gbnVsbCkKICAgICAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoIiwgIikuYXBwZW5kKHVucVN0cik7CiAgICAgICAgfQoKICAgICAgICBi\ndWYuYXBwZW5kKCIpIik7CiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbXXsg\nYnVmLnRvU3RyaW5nKCkgfTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5n\nIGdldERlY2xhcmVDb2x1bW5TUUwoQ29sdW1uIGNvbCwgYm9vbGVhbiBhbHRl\ncikgewogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVm\nZmVyKCk7CiAgICAgICAgYnVmLmFwcGVuZChjb2wpLmFwcGVuZCgiICIpOwog\nICAgICAgIGJ1Zi5hcHBlbmQoZ2V0VHlwZU5hbWUoY29sKSk7CgogICAgICAg\nIC8vIGNhbid0IGFkZCBjb25zdHJhaW50cyB0byBhIGNvbHVtbiB3ZSdyZSBh\nZGRpbmcgYWZ0ZXIgdGFibGUKICAgICAgICAvLyBjcmVhdGlvbiwgY2F1c2Ug\nc29tZSBkYXRhIG1pZ2h0IGFscmVhZHkgYmUgaW5zZXJ0ZWQKICAgICAgICBp\nZiAoIWFsdGVyKSB7CiAgICAgICAgICAgIGlmIChjb2wuZ2V0RGVmYXVsdFN0\ncmluZygpICE9IG51bGwgJiYgIWNvbC5pc0F1dG9Bc3NpZ25lZCgpKQogICAg\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiIERFRkFVTFQgIikuYXBwZW5kKGNv\nbC5nZXREZWZhdWx0U3RyaW5nKCkpOwogICAgICAgICAgICBpZiAoY29sLmlz\nQXV0b0Fzc2lnbmVkKCkpCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIg\nSURFTlRJVFkiKTsKICAgICAgICB9CgogICAgICAgIGlmIChjb2wuaXNOb3RO\ndWxsKCkpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBOT1QgTlVMTCIpOwog\nICAgICAgIGVsc2UgaWYgKCFjb2wuaXNQcmltYXJ5S2V5KCkpIHsKICAgICAg\nICAgICAgLy8gc3liYXNlIGZvcmNlcyB5b3UgdG8gZXhwbGljaXRseSBzcGVj\naWZ5IHRoYXQKICAgICAgICAgICAgLy8geW91IHdpbGwgYWxsb3cgTlVMTCB2\nYWx1ZXMKICAgICAgICAgICAgYnVmLmFwcGVuZCgiIE5VTEwiKTsKICAgICAg\nICB9CgogICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgIH0KCiAg\nICBwdWJsaWMgU3RyaW5nW10gZ2V0RHJvcENvbHVtblNRTChDb2x1bW4gY29s\ndW1uKSB7CiAgICAgICAgLy8gU3liYXNlIHVzZXMgIkFMVEVSIFRBQkxFIERS\nT1AgPENPTFVNTl9OQU1FPiIgcmF0aGVyIHRoYW4gdGhlCiAgICAgICAgLy8g\ndXN1YWwgIkFMVEVSIFRBQkxFIERST1AgQ09MVU1OIDxDT0xVTU5fTkFNRT4i\nCiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbXXsgIkFMVEVSIFRBQkxFICIK\nICAgICAgICAgICAgKyBnZXRGdWxsTmFtZShjb2x1bW4uZ2V0VGFibGUoKSwg\nZmFsc2UpICsgIiBEUk9QICIgKyBjb2x1bW4gfTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCByZWZTY2hlbWFDb21wb25lbnRzKFRhYmxlIHRhYmxlKSB7CiAg\nICAgICAgLy8gbm90ZSB0aGF0IHdlIHVzZSBnZXRDb2x1bW5zKCkgcmF0aGVy\nIHRoYW4gZ2V0dGluZyB0aGUgY29sdW1uIGJ5IG5hbWUKICAgICAgICAvLyBi\nZWNhdXNlIHVuZGVyIHNvbWUgY2lyY3Vtc3RhbmNlcyB0aGlzIG1ldGhvZCBp\ncyBjYWxsZWQgdW5kZXIgdGhlCiAgICAgICAgLy8gZHluYW1pYyBzY2hlbWEg\nZmFjdG9yeSwgd2hlcmUgZ2V0dGluZyBhIGNvbHVtbiBieSBuYW1lIGNyZWF0\nZXMKICAgICAgICAvLyB0aGF0IGNvbHVtbgogICAgICAgIENvbHVtbltdIGNv\nbHMgPSB0YWJsZS5nZXRDb2x1bW5zKCk7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoaWRl\nbnRpdHlDb2x1bW5OYW1lLmVxdWFsc0lnbm9yZUNhc2UoY29sc1tpXS5nZXRO\nYW1lKCkpKQogICAgICAgICAgICAgICAgY29sc1tpXS5yZWYoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBlbmRDb25maWd1cmF0aW9uKCkgewogICAgICAg\nIHN1cGVyLmVuZENvbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgLy8gd2FybiBh\nYm91dCBqZGJjIGNvbXBsaWFudCBmbGFnCiAgICAgICAgU3RyaW5nIHVybCA9\nIGNvbmYuZ2V0Q29ubmVjdGlvblVSTCgpOwogICAgICAgIGlmICghU3RyaW5n\nVXRpbHMuaXNFbXB0eSh1cmwpCiAgICAgICAgICAgICYmIHVybC50b0xvd2Vy\nQ2FzZSgpLmluZGV4T2YoImpkYmM6c3liYXNlOnRkcyIpICE9IC0xCiAgICAg\nICAgICAgICYmIHVybC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImJlX2FzX2pk\nYmNfY29tcGxpYW50X2FzX3Bvc3NpYmxlPSIpCiAgICAgICAgICAgID09IC0x\nKSB7CiAgICAgICAgICAgIGxvZy53YXJuKF9sb2MuZ2V0KCJzeWJhc2UtY29t\ncGxpYW5jZSIsIHVybCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMg\nQ29ubmVjdGlvbiBkZWNvcmF0ZShDb25uZWN0aW9uIGNvbm4pCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgY29ubiA9IHN1cGVyLmRl\nY29yYXRlKGNvbm4pOwogICAgICAgIC8vIEluIG9yZGVyIGZvciBTeWJhc2Ug\ndG8gcmFpc2UgdGhlIHRydW5jYXRpb24gZXhjZXB0aW9uIHdoZW4gdGhlIAog\nICAgICAgIC8vIHN0cmluZyBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIHRoZSBj\nb2x1bW4gbGVuZ3RoIGZvciBDaGFyLCBWYXJDaGFyLCAKICAgICAgICAvLyBC\naW5hcnksIFZhckJpbmFyeSwgdGhlICJzZXQgc3RyaW5nX3J0cnVuY2F0aW9u\nIG9uIiBtdXN0IGJlIGV4ZWN1dGVkLiAKICAgICAgICAvLyBUaGlzIHNldHRp\nbmcgaXMgZWZmZWN0aXZlIGZvciB0aGUgZHVyYXRpb24gb2YgY3VycmVudCBj\nb25uZWN0aW9uLgogICAgICAgIGlmIChzZXRTdHJpbmdSaWdodFRydW5jYXRp\nb25PbikgewogICAgICAgICAgICBTdHJpbmcgc3RyID0gInNldCBzdHJpbmdf\ncnRydW5jYXRpb24gb24iOwogICAgICAgICAgICBQcmVwYXJlZFN0YXRlbWVu\ndCBzdG1udCA9IHByZXBhcmVTdGF0ZW1lbnQoY29ubiwgc3RyKTsgICAgICAg\nIAogICAgICAgICAgICBzdG1udC5leGVjdXRlKCk7CiAgICAgICAgICAgIHN0\nbW50LmNsb3NlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgU3li\nYXNlQ29ubmVjdGlvbihjb25uKTsKICAgIH0KCiAgICAvKioKICAgICAqIENy\nZWF0ZSBhIG5ldyBwcmltYXJ5IGtleSBmcm9tIHRoZSBpbmZvcm1hdGlvbiBp\nbiB0aGUgc2NoZW1hIG1ldGFkYXRhLgogICAgICovCiAgICBwcm90ZWN0ZWQg\nUHJpbWFyeUtleSBuZXdQcmltYXJ5S2V5KFJlc3VsdFNldCBwa01ldGEpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgUHJpbWFyeUtl\neSBwayA9IG5ldyBQcmltYXJ5S2V5KCk7CiAgICAgICAgcGsuc2V0U2NoZW1h\nTmFtZShwa01ldGEuZ2V0U3RyaW5nKCJ0YWJsZV9vd25lciIpKTsKICAgICAg\nICBway5zZXRUYWJsZU5hbWUocGtNZXRhLmdldFN0cmluZygidGFibGVfbmFt\nZSIpKTsKICAgICAgICBway5zZXRDb2x1bW5OYW1lKHBrTWV0YS5nZXRTdHJp\nbmcoImNvbHVtbl9uYW1lIikpOwogICAgICAgIHBrLnNldE5hbWUocGtNZXRh\nLmdldFN0cmluZygiaW5kZXhfbmFtZSIpKTsKICAgICAgICByZXR1cm4gcGs7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBuZXcgaW5kZXggZnJv\nbSB0aGUgaW5mb3JtYXRpb24gaW4gdGhlIGluZGV4IG1ldGFkYXRhLgogICAg\nICovCiAgICBwcm90ZWN0ZWQgSW5kZXggbmV3SW5kZXgoUmVzdWx0U2V0IGlk\neE1ldGEpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nSW5kZXggaWR4ID0gbmV3IEluZGV4KCk7CiAgICAgICAgaWR4LnNldFNjaGVt\nYU5hbWUoaWR4TWV0YS5nZXRTdHJpbmcoInRhYmxlX293bmVyIikpOwogICAg\nICAgIGlkeC5zZXRUYWJsZU5hbWUoaWR4TWV0YS5nZXRTdHJpbmcoInRhYmxl\nX25hbWUiKSk7CiAgICAgICAgaWR4LnNldENvbHVtbk5hbWUoaWR4TWV0YS5n\nZXRTdHJpbmcoImNvbHVtbl9uYW1lIikpOwogICAgICAgIGlkeC5zZXROYW1l\nKGlkeE1ldGEuZ2V0U3RyaW5nKCJpbmRleF9uYW1lIikpOwogICAgICAgIGlk\neC5zZXRVbmlxdWUoIWlkeE1ldGEuZ2V0Qm9vbGVhbigibm9uX3VuaXF1ZSIp\nKTsKICAgICAgICByZXR1cm4gaWR4OwogICAgfQoKICAgIC8qKgogICAgICog\nQ29ubmVjdGlvbiB3cmFwcGVyIHRvIGNhY2hlIHRoZSB7QGxpbmsgQ29ubmVj\ndGlvbiNnZXRDYXRhbG9nfSByZXN1bHQsCiAgICAgKiB3aGljaCB0YWtlcyBh\nIHZlcnkgbG9uZyB0aW1lIHdpdGggdGhlIFN5YmFzZSBDb25uZWN0aW9uIChh\nbmQKICAgICAqIHdoaWNoIHdlIGZyZXF1ZW50bHkgaW52b2tlKS4KICAgICAq\nLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgU3liYXNlQ29ubmVjdGlvbgog\nICAgICAgIGV4dGVuZHMgRGVsZWdhdGluZ0Nvbm5lY3Rpb24gewoKICAgICAg\nICBwcml2YXRlIFN0cmluZyBfY2F0YWxvZyA9IG51bGw7CgogICAgICAgIHB1\nYmxpYyBTeWJhc2VDb25uZWN0aW9uKENvbm5lY3Rpb24gY29ubikgewogICAg\nICAgICAgICBzdXBlcihjb25uKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0Q2F0YWxvZygpCiAgICAgICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgICAgICBpZiAoX2NhdGFsb2cgPT0gbnVsbCkK\nICAgICAgICAgICAgICAgIF9jYXRhbG9nID0gc3VwZXIuZ2V0Q2F0YWxvZygp\nOwogICAgICAgICAgICByZXR1cm4gX2NhdGFsb2c7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzZXRBdXRvQ29tbWl0KGJvb2xlYW4gYXV0b2Nv\nbW1pdCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgICAgIC8vIHRoZSBzeWJhc2UgamRiYyBkcml2ZXIgZGVtYW5kcyB0aGF0\nIHRoZSBDb25uZWN0aW9uIGFsd2F5cwogICAgICAgICAgICAvLyBiZSByb2xs\nZWQgYmFjayBiZWZvcmUgYXV0b2NvbW1pdCBzdGF0dXMgY2hhbmdlcy4gRmFp\nbHVyZSB0bwogICAgICAgICAgICAvLyBkbyBzbyB3aWxsIHlpZWxkICJTRVQg\nQ0hBSU5FRCBjb21tYW5kIG5vdCBhbGxvd2VkIHdpdGhpbgogICAgICAgICAg\nICAvLyBtdWx0aS1zdGF0ZW1lbnQgdHJhbnNhY3Rpb24uIiBleGNlcHRpb25z\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzdXBlci5zZXRB\ndXRvQ29tbWl0KGF1dG9jb21taXQpOwogICAgICAgICAgICB9IGNhdGNoIChT\nUUxFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgLy8gZmFpbGVkIGZv\nciBzb21lIHJlYXNvbjogdHJ5IHJvbGxpbmcgYmFjayBhbmQgdGhlbgogICAg\nICAgICAgICAgICAgLy8gc2V0dGluZyBhdXRvY29tbWl0IGFnYWluLgogICAg\nICAgICAgICAgICAgaWYgKGF1dG9jb21taXQpCiAgICAgICAgICAgICAgICAg\nICAgc3VwZXIuY29tbWl0KCk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAg\nICAgICAgICAgICAgICAgc3VwZXIucm9sbGJhY2soKTsKICAgICAgICAgICAg\nICAgIHN1cGVyLnNldEF1dG9Db21taXQoYXV0b2NvbW1pdCk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

