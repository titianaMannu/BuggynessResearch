{"sha":"e0efef07e32d41743f552706ff487e660d72aac0","node_id":"MDQ6QmxvYjIwNjM2NDplMGVmZWYwN2UzMmQ0MTc0M2Y1NTI3MDZmZjQ4N2U2NjBkNzJhYWMw","size":3989,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e0efef07e32d41743f552706ff487e660d72aac0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5jb25mOwoKaW1wb3J0IGphdmEudXRp\nbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5jb25mLlBsdWdpbkxpc3RWYWx1ZTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5jb25mLk5vT3BDYWNoZU1hcnNoYWxsZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlv\nbjsKCi8qKgogKiBBIGNvbmZpZ3VyYXRpb24gdmFsdWUgZm9yIGhhbmRsaW5n\nIGFuZCBhY2Nlc3NpbmcgY2FjaGUgbWFyc2hhbGxlcnMuCiAqCiAqIEBzaW5j\nZSAxLjEuMAogKi8KcHVibGljIGNsYXNzIENhY2hlTWFyc2hhbGxlcnNWYWx1\nZQogICAgZXh0ZW5kcyBQbHVnaW5MaXN0VmFsdWUgewoKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIFN0cmluZyBLRVkgPSAiQ2FjaGVNYXJzaGFsbGVycyI7\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBDYWNoZU1hcnNoYWxsZXIgTk9f\nT1BfQ0FDSEVfTUFSU0hBTExFUgogICAgICAgID0gbmV3IE5vT3BDYWNoZU1h\ncnNoYWxsZXIoKTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXpl\nciBfbG9jID0KICAgICAgICBMb2NhbGl6ZXIuZm9yUGFja2FnZShDYWNoZU1h\ncnNoYWxsZXJzVmFsdWUuY2xhc3MpOwoKICAgIHByaXZhdGUgQ29uZmlndXJh\ndGlvbiBfY29uZjsKICAgIHByaXZhdGUgTWFwIF9tYXJzaGFsbGVyczsKICAg\nIHByaXZhdGUgYm9vbGVhbiBfaW5pdGlhbGl6ZWQ7CgogICAgcHVibGljIENh\nY2hlTWFyc2hhbGxlcnNWYWx1ZShDb25maWd1cmF0aW9uIGNvbmYpIHsKICAg\nICAgICBzdXBlcihLRVkpOwogICAgICAgIF9jb25mID0gY29uZjsKICAgICAg\nICBzZXRBbGlhcygiZGVmYXVsdCIsIENhY2hlTWFyc2hhbGxlckltcGwuY2xh\nc3MuZ2V0TmFtZSgpKTsKICAgICAgICBzZXRBbGlhcygibm9uZSIsIG51bGwp\nOwogICAgICAgIHNldERlZmF1bHQoIm5vbmUiKTsKICAgICAgICBzZXRTdHJp\nbmcoIm5vbmUiKTsKICAgICAgICBzZXRTY29wZShnZXRDbGFzcygpKTsKICAg\nIH0KCiAgICBwdWJsaWMgT2JqZWN0IGluc3RhbnRpYXRlKENsYXNzIGVsZW1U\neXBlLCBDb25maWd1cmF0aW9uIGNvbmYsCiAgICAgICAgYm9vbGVhbiBmYXRh\nbCkgewogICAgICAgIENhY2hlTWFyc2hhbGxlcltdIG1zID0gKENhY2hlTWFy\nc2hhbGxlcltdKQogICAgICAgICAgICBzdXBlci5pbnN0YW50aWF0ZShlbGVt\nVHlwZSwgY29uZiwgZmF0YWwpOwogICAgICAgIGlmIChtcyAhPSBudWxsKSB7\nCiAgICAgICAgICAgIF9tYXJzaGFsbGVycyA9IG5ldyBIYXNoTWFwKCk7CiAg\nICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbXMubGVuZ3RoOyBpKysp\nIHsKICAgICAgICAgICAgICAgIFN0cmluZyBtaWQgPSBtc1tpXS5nZXRJZCgp\nOwogICAgICAgICAgICAgICAgaWYgKG1pZCAhPSBudWxsKQogICAgICAgICAg\nICAgICAgICAgIF9tYXJzaGFsbGVycy5wdXQobWlkLCBtc1tpXSk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfbWFyc2hh\nbGxlcnMgPSBudWxsOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbXM7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBDYWNoZU1h\ncnNoYWxsZXJ9IHRvIHVzZSBmb3IgY2FjaGluZyBtZXRhZGF0YSBvZiBpZAog\nICAgICogPGNvZGU+aWQ8L2NvZGU+LiBJZiBubyBtYXJzaGFsbGVyIGV4aXN0\ncyBmb3IgdGhlIGlkLCByZXR1cm5zCiAgICAgKiB7QGxpbmsgTm9PcENhY2hl\nTWFyc2hhbGxlcn0uCiAgICAgKi8KICAgIHB1YmxpYyBDYWNoZU1hcnNoYWxs\nZXIgZ2V0TWFyc2hhbGxlckJ5SWQoU3RyaW5nIGlkKSB7CiAgICAgICAgaW5p\ndGlhbGl6ZSgpOwoKICAgICAgICBDYWNoZU1hcnNoYWxsZXIgY20gPSAoQ2Fj\naGVNYXJzaGFsbGVyKSBfbWFyc2hhbGxlcnMuZ2V0KGlkKTsKICAgICAgICBp\nZiAoY20gPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoZ2V0TG9nKCkuaXNU\ncmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGdldExvZygpLnRyYWNl\nKF9sb2MuZ2V0KCJjYWNoZS1tYXJzaGFsbGVyLW5vdC1mb3VuZCIsIGlkKSk7\nCiAgICAgICAgICAgIHJldHVybiBOT19PUF9DQUNIRV9NQVJTSEFMTEVSOwog\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChnZXRMb2coKS5pc1Ry\nYWNlRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgZ2V0TG9nKCkudHJhY2Uo\nX2xvYy5nZXQoImNhY2hlLW1hcnNoYWxsZXItZm91bmQiLCBpZCwKICAgICAg\nICAgICAgICAgICAgICBjbS5nZXRDbGFzcygpLmdldE5hbWUoKSkpOwogICAg\nICAgICAgICByZXR1cm4gY207CiAgICAgICAgfQogICAgfQoKICAgIHByaXZh\ndGUgTG9nIGdldExvZygpIHsKICAgICAgICByZXR1cm4gX2NvbmYuZ2V0Q29u\nZmlndXJhdGlvbkxvZygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSB7QGxpbmsgQ2FjaGVNYXJzaGFsbGVyfSB0byB1c2UgZm9yIGNhY2hp\nbmcgbWV0YWRhdGEgb2YgaWQKICAgICAqIDxjb2RlPmlkPC9jb2RlPi4gSWYg\nbm8gbWFyc2hhbGxlciBleGlzdHMgZm9yIHRoZSBpZCwgcmV0dXJucwogICAg\nICoge0BsaW5rIE5vT3BDYWNoZU1hcnNoYWxsZXJ9LgogICAgICovCiAgICBw\ndWJsaWMgc3RhdGljIENhY2hlTWFyc2hhbGxlciBnZXRNYXJzaGFsbGVyQnlJ\nZChDb25maWd1cmF0aW9uIGMsIFN0cmluZyBpZCl7CiAgICAgICAgQ2FjaGVN\nYXJzaGFsbGVyc1ZhbHVlIHYgPQogICAgICAgICAgICAoKE9wZW5KUEFDb25m\naWd1cmF0aW9uSW1wbCkgYykuY2FjaGVNYXJzaGFsbGVyUGx1Z2luczsKICAg\nICAgICByZXR1cm4gdi5nZXRNYXJzaGFsbGVyQnlJZChpZCk7CiAgICB9Cgog\nICAgcHVibGljIE1hcCBnZXRJbnN0YW5jZXNBc01hcCgpIHsKICAgICAgICBy\nZXR1cm4gX21hcnNoYWxsZXJzOwogICAgfQoKICAgIHByb3RlY3RlZCBzeW5j\naHJvbml6ZWQgdm9pZCBpbml0aWFsaXplKCkgewogICAgICAgIGlmICghX2lu\naXRpYWxpemVkKSB7CiAgICAgICAgICAgIGluc3RhbnRpYXRlKENhY2hlTWFy\nc2hhbGxlci5jbGFzcywgX2NvbmYpOwogICAgICAgICAgICBfaW5pdGlhbGl6\nZWQgPSB0cnVlOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

