{"sha":"7a6beb97c91ff0e8290bb29e4ee67d95954ddf53","node_id":"MDQ6QmxvYjIwNjM2NDo3YTZiZWI5N2M5MWZmMGU4MjkwYmIyOWU0ZWU2N2Q5NTk1NGRkZjUz","size":10116,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7a6beb97c91ff0e8290bb29e4ee67d95954ddf53","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlOwoKaW1wb3J0\nIGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQgamF2YS51\ndGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBq\nYXZhLnV0aWwuU2V0OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25m\nLk9wZW5KUEFDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmV2ZW50LlJlbW90ZUNvbW1pdEV2ZW50OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmV2ZW50LlJlbW90ZUNvbW1pdExpc3RlbmVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYWJsZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5jb25jdXJyZW50LkFi\nc3RyYWN0Q29uY3VycmVudEV2ZW50TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRSZWZl\ncmVuY2VIYXNoU2V0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLk1ldGFEYXRhUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS51dGlsLklkOwoKLyoqCiAqIEFic3RyYWN0IHtAbGluayBRdWVyeUNhY2hl\nfSBpbXBsZW1lbnRhdGlvbiB0aGF0IHByb3ZpZGVzIHZhcmlvdXMKICogc3Rh\ndGlzdGljcywgbG9nZ2luZywgYW5kIHRpbWVvdXQgZnVuY3Rpb25hbGl0eSBj\nb21tb24gYWNyb3NzIGNhY2hlCiAqIGltcGxlbWVudGF0aW9ucy4KICoKICog\nQGF1dGhvciBQYXRyaWNrIExpbnNrZXkKICogQGF1dGhvciBBYmUgV2hpdGUK\nICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdFF1ZXJ5Q2FjaGUK\nICAgIGV4dGVuZHMgQWJzdHJhY3RDb25jdXJyZW50RXZlbnRNYW5hZ2VyIAog\nICAgaW1wbGVtZW50cyBRdWVyeUNhY2hlLCBDb25maWd1cmFibGUgewoKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBzX2xvYyA9CiAgICAg\nICAgTG9jYWxpemVyLmZvclBhY2thZ2UoQWJzdHJhY3RRdWVyeUNhY2hlLmNs\nYXNzKTsKCiAgICAvKioKICAgICAqIFRoZSBjb25maWd1cmF0aW9uIHNldCBi\neSB0aGUgc3lzdGVtLgogICAgICovCiAgICBwcm90ZWN0ZWQgT3BlbkpQQUNv\nbmZpZ3VyYXRpb24gY29uZjsKCiAgICAvKioKICAgICAqIFRoZSBsb2cgdG8g\ndXNlLgogICAgICovCiAgICBwcm90ZWN0ZWQgTG9nIGxvZzsKCiAgICBwcml2\nYXRlIGJvb2xlYW4gX2Nsb3NlZCA9IGZhbHNlOwoKICAgIHB1YmxpYyB2b2lk\nIGluaXRpYWxpemUoRGF0YUNhY2hlTWFuYWdlciBtYW5hZ2VyKSB7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgb25UeXBlc0NoYW5nZWQoVHlwZXNDaGFuZ2Vk\nRXZlbnQgZXYpIHsKICAgICAgICB3cml0ZUxvY2soKTsKICAgICAgICBDb2xs\nZWN0aW9uIGtleXMgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGlmIChoYXNMaXN0ZW5lcnMoKSkKICAgICAgICAgICAgICAgIGZpcmVFdmVu\ndChldik7CiAgICAgICAgICAgIGtleXMgPSBrZXlTZXQoKTsKICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICB3cml0ZVVubG9jaygpOwogICAgICAg\nIH0KCiAgICAgICAgUXVlcnlLZXkgcWs7CiAgICAgICAgTGlzdCByZW1vdmVz\nID0gbnVsbDsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ZXIgPSBrZXlzLml0\nZXJhdG9yKCk7IGl0ZXIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBxayA9\nIChRdWVyeUtleSkgaXRlci5uZXh0KCk7CiAgICAgICAgICAgIGlmIChxay5j\naGFuZ2VJbnZhbGlkYXRlc1F1ZXJ5KGV2LmdldFR5cGVzKCkpKSB7CiAgICAg\nICAgICAgICAgICBpZiAocmVtb3ZlcyA9PSBudWxsKQogICAgICAgICAgICAg\nICAgICAgIHJlbW92ZXMgPSBuZXcgQXJyYXlMaXN0KCk7CiAgICAgICAgICAg\nICAgICByZW1vdmVzLmFkZChxayk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICAgICAgaWYgKHJlbW92ZXMgIT0gbnVsbCkKICAgICAgICAgICAgcmVt\nb3ZlQWxsSW50ZXJuYWwocmVtb3Zlcyk7CiAgICB9CgogICAgcHVibGljIFF1\nZXJ5UmVzdWx0IGdldChRdWVyeUtleSBrZXkpIHsKICAgICAgICBRdWVyeVJl\nc3VsdCBvID0gZ2V0SW50ZXJuYWwoa2V5KTsKICAgICAgICBpZiAobyAhPSBu\ndWxsICYmIG8uaXNUaW1lZE91dCgpKSB7CiAgICAgICAgICAgIG8gPSBudWxs\nOwogICAgICAgICAgICByZW1vdmVJbnRlcm5hbChrZXkpOwogICAgICAgICAg\nICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgICAgICBs\nb2cudHJhY2Uoc19sb2MuZ2V0KCJjYWNoZS10aW1lb3V0Iiwga2V5KSk7CiAg\nICAgICAgfQoKICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsK\nICAgICAgICAgICAgaWYgKG8gPT0gbnVsbCkKICAgICAgICAgICAgICAgIGxv\nZy50cmFjZShzX2xvYy5nZXQoImNhY2hlLW1pc3MiLCBrZXkpKTsKICAgICAg\nICAgICAgZWxzZQogICAgICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9jLmdl\ndCgiY2FjaGUtaGl0Iiwga2V5KSk7CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiBvOwogICAgfQoKICAgIHB1YmxpYyBRdWVyeVJlc3VsdCBwdXQoUXVlcnlL\nZXkgcWssIFF1ZXJ5UmVzdWx0IG9pZHMpIHsKICAgICAgICBRdWVyeVJlc3Vs\ndCBvID0gcHV0SW50ZXJuYWwocWssIG9pZHMpOwogICAgICAgIGlmIChsb2cu\naXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9j\nLmdldCgiY2FjaGUtcHV0IiwgcWspKTsKICAgICAgICByZXR1cm4gKG8gPT0g\nbnVsbCB8fCBvLmlzVGltZWRPdXQoKSkgPyBudWxsIDogbzsKICAgIH0KCiAg\nICBwdWJsaWMgUXVlcnlSZXN1bHQgcmVtb3ZlKFF1ZXJ5S2V5IGtleSkgewog\nICAgICAgIFF1ZXJ5UmVzdWx0IG8gPSByZW1vdmVJbnRlcm5hbChrZXkpOwog\nICAgICAgIGlmIChvICE9IG51bGwgJiYgby5pc1RpbWVkT3V0KCkpCiAgICAg\nICAgICAgIG8gPSBudWxsOwogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJs\nZWQoKSkgewogICAgICAgICAgICBpZiAobyA9PSBudWxsKQogICAgICAgICAg\nICAgICAgbG9nLnRyYWNlKHNfbG9jLmdldCgiY2FjaGUtcmVtb3ZlLW1pc3Mi\nLCBrZXkpKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgbG9n\nLnRyYWNlKHNfbG9jLmdldCgiY2FjaGUtcmVtb3ZlLWhpdCIsIGtleSkpOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gbzsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBwaW4oUXVlcnlLZXkga2V5KSB7CiAgICAgICAgYm9vbGVhbiBi\nb29sID0gcGluSW50ZXJuYWwoa2V5KTsKICAgICAgICBpZiAobG9nLmlzVHJh\nY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgaWYgKGJvb2wpCiAgICAgICAg\nICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJjYWNoZS1waW4taGl0Iiwg\na2V5KSk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGxvZy50\ncmFjZShzX2xvYy5nZXQoImNhY2hlLXBpbi1taXNzIiwga2V5KSk7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBib29sOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIHVucGluKFF1ZXJ5S2V5IGtleSkgewogICAgICAgIGJvb2xlYW4g\nYm9vbCA9IHVucGluSW50ZXJuYWwoa2V5KTsKICAgICAgICBpZiAobG9nLmlz\nVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgaWYgKGJvb2wpCiAgICAg\nICAgICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJjYWNoZS11bnBpbi1o\naXQiLCBrZXkpKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAg\nbG9nLnRyYWNlKHNfbG9jLmdldCgiY2FjaGUtdW5waW4tbWlzcyIsIGtleSkp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYm9vbDsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBjbGVhcigpIHsKICAgICAgICBjbGVhckludGVybmFsKCk7\nCiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAg\nICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJjYWNoZS1jbGVhciIsICI8cXVlcnkt\nY2FjaGU+IikpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgewog\nICAgICAgIGNsb3NlKHRydWUpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lk\nIGNsb3NlKGJvb2xlYW4gY2xlYXIpIHsKICAgICAgICBpZiAoIV9jbG9zZWQp\nIHsKICAgICAgICAgICAgaWYgKGNsZWFyKQogICAgICAgICAgICAgICAgY2xl\nYXJJbnRlcm5hbCgpOwogICAgICAgICAgICBfY2xvc2VkID0gdHJ1ZTsKICAg\nICAgICB9CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNDbG9zZWQoKSB7\nCiAgICAgICAgcmV0dXJuIF9jbG9zZWQ7CiAgICB9CgogICAgcHVibGljIHZv\naWQgYWRkVHlwZXNDaGFuZ2VkTGlzdGVuZXIoVHlwZXNDaGFuZ2VkTGlzdGVu\nZXIgbGlzdGVuKSB7CiAgICAgICAgYWRkTGlzdGVuZXIobGlzdGVuKTsKICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiByZW1vdmVUeXBlc0NoYW5nZWRMaXN0\nZW5lcihUeXBlc0NoYW5nZWRMaXN0ZW5lciBsaXN0ZW4pIHsKICAgICAgICBy\nZXR1cm4gcmVtb3ZlTGlzdGVuZXIobGlzdGVuKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoaXMgbWV0aG9kIGlzIHBhcnQgb2YgdGhlIHtAbGluayBSZW1v\ndGVDb21taXRMaXN0ZW5lcn0gaW50ZXJmYWNlLiBJZgogICAgICogeW91ciBj\nYWNoZSBzdWJjbGFzcyByZWxpZXMgb24gT3BlbkpQQSBmb3IgY2x1c3Rlcmlu\nZyBzdXBwb3J0LCBtYWtlIGl0CiAgICAgKiBpbXBsZW1lbnQgPGNvZGU+UmVt\nb3RlQ29tbWl0TGlzdGVuZXI8L2NvZGU+LiBUaGlzIG1ldGhvZCB3aWxsIHRh\na2UKICAgICAqIGNhcmUgb2YgaW52YWxpZGF0aW5nIGVudHJpZXMgZnJvbSBy\nZW1vdGUgY29tbWl0cywgYnkgZGVsZWdhdGluZyB0bwogICAgICoge0BsaW5r\nICNvblR5cGVzQ2hhbmdlZH0uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGFm\ndGVyQ29tbWl0KFJlbW90ZUNvbW1pdEV2ZW50IGV2ZW50KSB7CiAgICAgICAg\naWYgKF9jbG9zZWQpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgLy8g\nZHJvcCBhbGwgY29tbWl0dGVkIGNsYXNzZXMKICAgICAgICBTZXQgY2xhc3Nl\ncyA9IENhY2hlcy5hZGRUeXBlc0J5TmFtZShjb25mLAogICAgICAgICAgICBl\ndmVudC5nZXRQZXJzaXN0ZWRUeXBlTmFtZXMoKSwgbnVsbCk7CiAgICAgICAg\naWYgKGV2ZW50LmdldFBheWxvYWRUeXBlKCkgPT0gUmVtb3RlQ29tbWl0RXZl\nbnQuUEFZTE9BRF9FWFRFTlRTKSB7CiAgICAgICAgICAgIGNsYXNzZXMgPSBD\nYWNoZXMuYWRkVHlwZXNCeU5hbWUoY29uZiwgZXZlbnQuZ2V0VXBkYXRlZFR5\ncGVOYW1lcygpLAogICAgICAgICAgICAgICAgY2xhc3Nlcyk7CiAgICAgICAg\nICAgIGNsYXNzZXMgPSBDYWNoZXMuYWRkVHlwZXNCeU5hbWUoY29uZiwgZXZl\nbnQuZ2V0RGVsZXRlZFR5cGVOYW1lcygpLAogICAgICAgICAgICAgICAgY2xh\nc3Nlcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2xhc3NlcyA9\nIGFkZFR5cGVzKGV2ZW50LmdldFVwZGF0ZWRPYmplY3RJZHMoKSwgY2xhc3Nl\ncyk7CiAgICAgICAgICAgIGNsYXNzZXMgPSBhZGRUeXBlcyhldmVudC5nZXRE\nZWxldGVkT2JqZWN0SWRzKCksIGNsYXNzZXMpOwogICAgICAgIH0KICAgICAg\nICBpZiAoY2xhc3NlcyAhPSBudWxsKQogICAgICAgICAgICBvblR5cGVzQ2hh\nbmdlZChuZXcgVHlwZXNDaGFuZ2VkRXZlbnQodGhpcywgY2xhc3NlcykpOwog\nICAgfQoKICAgIC8qKgogICAgICogQnVpbGQgdXAgYSBzZXQgb2YgY2xhc3Nl\ncyBmb3IgdGhlIGdpdmVuIG9pZHMuCiAgICAgKi8KICAgIHByaXZhdGUgU2V0\nIGFkZFR5cGVzKENvbGxlY3Rpb24gb2lkcywgU2V0IGNsYXNzZXMpIHsKICAg\nICAgICBpZiAob2lkcy5pc0VtcHR5KCkpCiAgICAgICAgICAgIHJldHVybiBj\nbGFzc2VzOwogICAgICAgIGlmIChjbGFzc2VzID09IG51bGwpCiAgICAgICAg\nICAgIGNsYXNzZXMgPSBuZXcgSGFzaFNldCgpOwoKICAgICAgICBNZXRhRGF0\nYVJlcG9zaXRvcnkgcmVwb3MgPSBjb25mLmdldE1ldGFEYXRhUmVwb3NpdG9y\neUluc3RhbmNlKCk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhOwogICAg\nICAgIE9iamVjdCBvaWQ7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBv\naWRzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAg\nIG9pZCA9IGl0ci5uZXh0KCk7CiAgICAgICAgICAgIGlmIChvaWQgaW5zdGFu\nY2VvZiBJZCkKICAgICAgICAgICAgICAgIGNsYXNzZXMuYWRkKCgoSWQpIG9p\nZCkuZ2V0VHlwZSgpKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAg\nICAgICAvLyBvayBpZiBubyBtZXRhZGF0YSBmb3Igb2lkOyB0aGF0IGp1c3Qg\nbWVhbnMgdGhlIHBjIHR5cGUKICAgICAgICAgICAgICAgIC8vIHByb2JhYmx5\nIGhhc24ndCBiZWVuIGxvYWRlZCBpbnRvIHRoaXMgSlZNIHlldCwgYW5kIHRo\nZXJlZm9yZQogICAgICAgICAgICAgICAgLy8gdGhlcmUncyBubyBjaGFuY2Ug\ndGhhdCBpdCdzIGluIHRoZSBjYWNoZSBhbnl3YXkKICAgICAgICAgICAgICAg\nIG1ldGEgPSByZXBvcy5nZXRNZXRhRGF0YShvaWQsIG51bGwsIGZhbHNlKTsK\nICAgICAgICAgICAgICAgIGlmIChtZXRhICE9IG51bGwpCiAgICAgICAgICAg\nICAgICAgICAgY2xhc3Nlcy5hZGQobWV0YS5nZXREZXNjcmliZWRUeXBlKCkp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBjbGFz\nc2VzOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgdGhyZWFkc2Fm\nZSB2aWV3IG9mIHRoZSBrZXlzIGluIHRoaXMgY2FjaGUuIFRoaXMgY29sbGVj\ndGlvbgogICAgICogbXVzdCBiZSBpdGVyYWJsZSB3aXRob3V0IHJpc2sgb2Yg\nY29uY3VycmVudCBtb2RpZmljYXRpb24gZXhjZXB0aW9ucy4KICAgICAqIEl0\nIGRvZXMgbm90IGhhdmUgdG8gaW1wbGVtZW50IGNvbnRhaW5zKCkgZWZmaWNp\nZW50bHkgb3IgdXNlIHNldAogICAgICogc2VtYW50aWNzLgogICAgICovCiAg\nICBwcm90ZWN0ZWQgYWJzdHJhY3QgQ29sbGVjdGlvbiBrZXlTZXQoKTsKCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgbGlzdCBmb3IgdGhlIGdpdmVuIGtl\neS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IFF1ZXJ5UmVzdWx0\nIGdldEludGVybmFsKFF1ZXJ5S2V5IHFrKTsKCiAgICAvKioKICAgICAqIEFk\nZCB0aGUgZ2l2ZW4gcmVzdWx0IHRvIHRoZSBjYWNoZSwgcmV0dXJuaW5nIHRo\nZSBvbGQgcmVzdWx0IHVuZGVyIHRoZQogICAgICogZ2l2ZW4ga2V5LgogICAg\nICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgUXVlcnlSZXN1bHQgcHV0SW50\nZXJuYWwoUXVlcnlLZXkgcWssIFF1ZXJ5UmVzdWx0IG9pZHMpOwoKICAgIC8q\nKgogICAgICogUmVtb3ZlIHRoZSByZXN1bHQgdW5kZXIgdGhlIGdpdmVuIGtl\neSBmcm9tIHRoZSBjYWNoZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3Ry\nYWN0IFF1ZXJ5UmVzdWx0IHJlbW92ZUludGVybmFsKFF1ZXJ5S2V5IHFrKTsK\nCiAgICAvKioKICAgICAqIFJlbW92ZSBhbGwgcmVzdWx0cyB1bmRlciB0aGUg\nZ2l2ZW4ga2V5cyBmcm9tIHRoZSBjYWNoZS4KICAgICAqLwogICAgcHJvdGVj\ndGVkIHZvaWQgcmVtb3ZlQWxsSW50ZXJuYWwoQ29sbGVjdGlvbiBxa3MpIHsK\nICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ZXIgPSBxa3MuaXRlcmF0b3IoKTsg\naXRlci5oYXNOZXh0KCk7KQogICAgICAgICAgICByZW1vdmVJbnRlcm5hbCgo\nUXVlcnlLZXkpIGl0ZXIubmV4dCgpKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIENsZWFyIHRoZSBjYWNoZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3Ry\nYWN0IHZvaWQgY2xlYXJJbnRlcm5hbCgpOwoKICAgIC8qKgogICAgICogUGlu\nIGFuIG9iamVjdCB0byB0aGUgY2FjaGUuCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCBhYnN0cmFjdCBib29sZWFuIHBpbkludGVybmFsKFF1ZXJ5S2V5IHFrKTsK\nCiAgICAvKioKICAgICAqIFVucGluIGFuIG9iamVjdCBmcm9tIHRoZSBjYWNo\nZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IGJvb2xlYW4gdW5w\naW5JbnRlcm5hbChRdWVyeUtleSBxayk7CgogICAgLy8gLS0tLS0tLS0tLSBD\nb25maWd1cmFibGUgaW1wbGVtZW50YXRpb24gLS0tLS0tLS0tLQoKICAgIHB1\nYmxpYyB2b2lkIHNldENvbmZpZ3VyYXRpb24oQ29uZmlndXJhdGlvbiBjb25m\nKSB7CiAgICAgICAgdGhpcy5jb25mID0gKE9wZW5KUEFDb25maWd1cmF0aW9u\nKSBjb25mOwogICAgICAgIHRoaXMubG9nID0gY29uZi5nZXRMb2coT3BlbkpQ\nQUNvbmZpZ3VyYXRpb24uTE9HX0RBVEFDQUNIRSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc3RhcnRDb25maWd1cmF0aW9uKCkgewogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24oKSB7CiAgICB9CgogICAgLy8g\nLS0tLS0tLS0tLSBBYnN0cmFjdEV2ZW50TWFuYWdlciBpbXBsZW1lbnRhdGlv\nbiAtLS0tLS0tLS0tCgogICAgcHJvdGVjdGVkIHZvaWQgZmlyZUV2ZW50KE9i\namVjdCBldmVudCwgT2JqZWN0IGxpc3RlbmVyKSB7CiAgICAgICAgVHlwZXND\naGFuZ2VkTGlzdGVuZXIgbGlzdGVuID0gKFR5cGVzQ2hhbmdlZExpc3RlbmVy\nKSBsaXN0ZW5lcjsKICAgICAgICBUeXBlc0NoYW5nZWRFdmVudCBldiA9IChU\neXBlc0NoYW5nZWRFdmVudCkgZXZlbnQ7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgbGlzdGVuLm9uVHlwZXNDaGFuZ2VkKGV2KTsKICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBpZiAobG9nLmlzV2Fy\nbkVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZy53YXJuKHNfbG9jLmdl\ndCgiZXhwLWxpc3RlbmVyLWV4IiksIGUpOwogICAgICAgIH0KICAgIH0KCiAg\nICAvKioKICAgICAqIEluZGl2aWR1YWwgcXVlcnkgcmVzdWx0cyB3aWxsIGJl\nIHJlZ2lzdGVyZWQgYXMgdHlwZXMgY2hhbmdlZAogICAgICogbGlzdGVuZXJz\nLiBXZSB3YW50IHN1Y2ggcXVlcnkgcmVzdWx0cyB0byBiZSBnYydkIG9uY2UK\nICAgICAqIHRoZSBvbmx5IHJlZmVyZW5jZSBpcyBoZWxkIGJ5IHRoZSBsaXN0\nIG9mIGV4cGlyYXRpb24gbGlzdGVuZXJzLgogICAgICovCiAgICBwcm90ZWN0\nZWQgQ29sbGVjdGlvbiBuZXdMaXN0ZW5lckNvbGxlY3Rpb24oKSB7CiAgICAg\nICAgcmV0dXJuIG5ldyBDb25jdXJyZW50UmVmZXJlbmNlSGFzaFNldCAoQ29u\nY3VycmVudFJlZmVyZW5jZUhhc2hTZXQuV0VBSyk7Cgl9Cn0K\n","encoding":"base64"}

