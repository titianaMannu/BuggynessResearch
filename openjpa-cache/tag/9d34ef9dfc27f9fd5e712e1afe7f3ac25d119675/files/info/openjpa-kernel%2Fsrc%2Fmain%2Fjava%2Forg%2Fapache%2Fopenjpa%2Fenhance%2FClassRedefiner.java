{"sha":"66fa6057c6af1df883d1dd1b1114f7b6f974c7a4","node_id":"MDQ6QmxvYjIwNjM2NDo2NmZhNjA1N2M2YWYxZGY4ODNkMWRkMWIxMTE0ZjdiNmY5NzRjN2E0","size":6443,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/66fa6057c6af1df883d1dd1b1114f7b6f974c7a4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlOwoKaW1wb3J0IGphdmEu\nbGFuZy5pbnN0cnVtZW50Lkluc3RydW1lbnRhdGlvbjsKaW1wb3J0IGphdmEu\nbGFuZy5pbnN0cnVtZW50LkNsYXNzRmlsZVRyYW5zZm9ybWVyOwppbXBvcnQg\namF2YS5sYW5nLmluc3RydW1lbnQuQ2xhc3NEZWZpbml0aW9uOwppbXBvcnQg\namF2YS5sYW5nLmluc3RydW1lbnQuVW5tb2RpZmlhYmxlQ2xhc3NFeGNlcHRp\nb247CmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5JbnZvY2F0aW9uVGFyZ2V0\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9kOwpp\nbXBvcnQgamF2YS5zZWN1cml0eS5Qcm90ZWN0aW9uRG9tYWluOwppbXBvcnQg\namF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwpp\nbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGls\nLkFycmF5TGlzdDsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuSmF2YVZl\ncnNpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxv\nY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxv\nZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludGVybmFsRXhj\nZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuVXNlckV4\nY2VwdGlvbjsKCi8qKgogKiBSZWRlZmluZXMgdGhlIG1ldGhvZCBib2RpZXMg\nb2YgZXhpc3RpbmcgY2xhc3Nlcy4gU3VwcG9ydHMgSmF2YSA1IFZNcyB0aGF0\nCiAqIGhhdmUgYSBqYXZhYWdlbnQgaW5zdGFsbGVkIG9uIHRoZSBjb21tYW5k\nIGxpbmUgYXMgd2VsbCBhcyBuZXdlciBWTXMgd2l0aG91dAogKiBhbnkgamF2\nYWFnZW50IGZsYWcuCiAqCiAqIEBzaW5jZSAxLjAuMAogKi8KcHVibGljIGNs\nYXNzIENsYXNzUmVkZWZpbmVyIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBMb2NhbGl6ZXIgX2xvYyA9IAogICAgICAgIExvY2FsaXplci5mb3JQYWNr\nYWdlKENsYXNzUmVkZWZpbmVyLmNsYXNzKTsKCiAgICBwcml2YXRlIHN0YXRp\nYyBCb29sZWFuIF9jYW5SZWRlZmluZSA9IG51bGw7CgogICAgLyoqCiAgICAg\nKiBGb3IgZWFjaCBlbGVtZW50IGluIDxjb2RlPmNsYXNzZXM8L2NvZGU+LCB0\naGlzIG1ldGhvZCB3aWxsIHJlZGVmaW5lCiAgICAgKiBhbGwgdGhlIGVsZW1l\nbnQncyBtZXRob2RzIHN1Y2ggdGhhdCBmaWVsZCBhY2Nlc3NlcyBhcmUgaW50\nZXJjZXB0ZWQKICAgICAqIGluLWxpbmUuIElmIHtAbGluayAjY2FuUmVkZWZp\nbmVDbGFzc2VzKCl9IHJldHVybnMgPGNvZGU+ZmFsc2U8L2NvZGU+LAogICAg\nICogdGhpcyBtZXRob2QgaXMgYSBuby1vcC4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyB2b2lkIHJlZGVmaW5lQ2xhc3NlcyhPcGVuSlBBQ29uZmlndXJh\ndGlvbiBjb25mLAogICAgICAgIGZpbmFsIE1hcDxDbGFzcyxieXRlW10+IGNs\nYXNzZXMpIHsKICAgICAgICBpZiAoY2xhc3NlcyA9PSBudWxsIHx8IGNsYXNz\nZXMuc2l6ZSgpID09IDAgfHwgIWNhblJlZGVmaW5lQ2xhc3NlcygpKQogICAg\nICAgICAgICByZXR1cm47CgogICAgICAgIExvZyBsb2cgPSBjb25mLmdldExv\nZyhPcGVuSlBBQ29uZmlndXJhdGlvbi5MT0dfRU5IQU5DRSk7CiAgICAgICAg\nSW5zdHJ1bWVudGF0aW9uIGluc3QgPSBudWxsOwogICAgICAgIENsYXNzRmls\nZVRyYW5zZm9ybWVyIHQgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGluc3QgPSBJbnN0cnVtZW50YXRpb25GYWN0b3J5LmdldEluc3RydW1l\nbnRhdGlvbigpOwoKICAgICAgICAgICAgQ2xhc3NbXSBhcnJheSA9IGNsYXNz\nZXMua2V5U2V0KCkudG9BcnJheShuZXcgQ2xhc3NbY2xhc3Nlcy5zaXplKCld\nKTsKICAgICAgICAgICAgaWYgKEphdmFWZXJzaW9ucy5WRVJTSU9OID49IDYp\nIHsKICAgICAgICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgicmV0cmFu\nc2Zvcm0tdHlwZXMiLCBjbGFzc2VzLmtleVNldCgpKSk7CgogICAgICAgICAg\nICAgICAgdCA9IG5ldyBDbGFzc0ZpbGVUcmFuc2Zvcm1lcigpIHsKICAgICAg\nICAgICAgICAgICAgICBwdWJsaWMgYnl0ZVtdIHRyYW5zZm9ybShDbGFzc0xv\nYWRlciBsb2FkZXIsIFN0cmluZyBjbHNOYW1lLAogICAgICAgICAgICAgICAg\nICAgICAgICBDbGFzczw/PiBjbGFzc0JlaW5nUmVkZWZpbmVkLCBQcm90ZWN0\naW9uRG9tYWluIHBkLAogICAgICAgICAgICAgICAgICAgICAgICBieXRlW10g\nY2xhc3NmaWxlQnVmZmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJl\ndHVybiBjbGFzc2VzLmdldChjbGFzc0JlaW5nUmVkZWZpbmVkKTsKICAgICAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAg\nICAgICAgCiAgICAgICAgICAgICAgICAvLyB0aGVzZSBhcmUgSmF2YSA2IG1l\ndGhvZHMsIGFuZCB3ZSBkb24ndCBoYXZlIGEgSmF2YSA2IGJ1aWxkCiAgICAg\nICAgICAgICAgICAvLyBtb2R1bGUgeWV0LiBUaGUgY29zdCBvZiByZWZsZWN0\naW9uIGhlcmUgaXMgbmVnbGlnaWJsZQogICAgICAgICAgICAgICAgLy8gY29t\ncGFyZWQgdG8gdGhlIHJlZGVmaW5pdGlvbiAvIGVuaGFuY2VtZW50IGNvc3Rz\nIGluIHRvdGFsLAogICAgICAgICAgICAgICAgLy8gc28gdGhpcyBzaG91bGQg\nbm90IGJlIGEgYmlnIHByb2JsZW0uCiAgICAgICAgICAgICAgICBNZXRob2Qg\nbWV0aCA9IGluc3QuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImFkZFRyYW5zZm9y\nbWVyIiwKICAgICAgICAgICAgICAgICAgICBuZXcgQ2xhc3NbXSB7IENsYXNz\nRmlsZVRyYW5zZm9ybWVyLmNsYXNzLCBib29sZWFuLmNsYXNzIH0pOwogICAg\nICAgICAgICAgICAgbWV0aC5pbnZva2UoaW5zdCwgbmV3IE9iamVjdFtdIHsg\ndCwgdHJ1ZSB9KTsKICAgICAgICAgICAgICAgIG1ldGggPSBpbnN0LmdldENs\nYXNzKCkuZ2V0TWV0aG9kKCJyZXRyYW5zZm9ybUNsYXNzZXMiLAogICAgICAg\nICAgICAgICAgICAgIG5ldyBDbGFzc1tdIHsgYXJyYXkuZ2V0Q2xhc3MoKSB9\nKTsKICAgICAgICAgICAgICAgIG1ldGguaW52b2tlKGluc3QsIG5ldyBPYmpl\nY3RbXSB7IGFycmF5IH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJyZWRlZmluZS10eXBlcyIs\nIGNsYXNzZXMua2V5U2V0KCkpKTsKICAgICAgICAgICAgICAgIC8vIGluIGEg\nSmF2YSA1IGNvbnRleHQsIHdlIGNhbiB1c2UgY2xhc3MgcmVkZWZpbml0aW9u\nIGluc3RlYWQKICAgICAgICAgICAgICAgIENsYXNzRGVmaW5pdGlvbltdIGRl\nZnMgPSBuZXcgQ2xhc3NEZWZpbml0aW9uW2FycmF5Lmxlbmd0aF07CiAgICAg\nICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGRlZnMubGVuZ3RoOyBp\nKyspCiAgICAgICAgICAgICAgICAgICAgZGVmc1tpXSA9IG5ldyBDbGFzc0Rl\nZmluaXRpb24oYXJyYXlbaV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNs\nYXNzZXMuZ2V0KGFycmF5W2ldKSk7CiAgICAgICAgICAgICAgICBpbnN0LnJl\nZGVmaW5lQ2xhc3NlcyhkZWZzKTsKICAgICAgICAgICAgfQogICAgICAgIH0g\nY2F0Y2ggKE5vU3VjaE1ldGhvZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbihlKTsKICAgICAgICB9IGNh\ndGNoIChJbGxlZ2FsQWNjZXNzRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKGUpOwogICAgICAgIH0gY2F0\nY2ggKEludm9jYXRpb25UYXJnZXRFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihlLmdldENhdXNlKCkpOwogICAg\nICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKGUpOwogICAgICAgIH0gY2F0Y2gg\nKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oZSk7CiAgICAgICAgfSBjYXRjaCAo\nVW5tb2RpZmlhYmxlQ2xhc3NFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0\naHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oZSk7CiAgICAgICAgfSBmaW5h\nbGx5IHsKICAgICAgICAgICAgaWYgKGluc3QgIT0gbnVsbCAmJiB0ICE9IG51\nbGwpCiAgICAgICAgICAgICAgICBpbnN0LnJlbW92ZVRyYW5zZm9ybWVyKHQp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEByZXR1cm4gd2hl\ndGhlciBvciBub3QgdGhpcyBWTSBoYXMgYW4gaW5zdHJ1bWVudGF0aW9uIGlu\nc3RhbGxlZCB0aGF0CiAgICAgKiBwZXJtaXRzIHJlZGVmaW5pdGlvbiBvZiBj\nbGFzc2VzLiBUaGlzIGFzc3VtZXMgdGhhdCBhbGwgdGhlIGFyZ3VtZW50cwog\nICAgICogd2lsbCBiZSBtb2RpZmlhYmxlIGNsYXNzZXMgYWNjb3JkaW5nIHRv\nCiAgICAgKiB7QGxpbmsgamF2YS5sYW5nLmluc3RydW1lbnQuSW5zdHJ1bWVu\ndGF0aW9uI2lzTW9kaWZpYWJsZUNsYXNzfSwgYW5kCiAgICAgKiBvbmx5IGNo\nZWNrcyB3aGV0aGVyIG9yIG5vdCBhbiBpbnN0cnVtZW50YXRpb24gaXMgYXZh\naWxhYmxlIGFuZAogICAgICogaWYgcmV0cmFuc2Zvcm1hdGlvbiBpcyBwb3Nz\naWJsZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFuIGNhblJl\nZGVmaW5lQ2xhc3NlcygpIHsKICAgICAgICBpZiAoX2NhblJlZGVmaW5lID09\nIG51bGwpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIElu\nc3RydW1lbnRhdGlvbiBpbnN0ID0gSW5zdHJ1bWVudGF0aW9uRmFjdG9yeQog\nICAgICAgICAgICAgICAgICAgIC5nZXRJbnN0cnVtZW50YXRpb24oKTsKICAg\nICAgICAgICAgICAgIGlmIChpbnN0ID09IG51bGwpIHsKICAgICAgICAgICAg\nICAgICAgICBfY2FuUmVkZWZpbmUgPSBCb29sZWFuLkZBTFNFOwogICAgICAg\nICAgICAgICAgfSBlbHNlIGlmIChKYXZhVmVyc2lvbnMuVkVSU0lPTiA9PSA1\nKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaW5zdCBpcyBub24tbnVs\nbCBhbmQgd2UncmUgdXNpbmcgSmF2YSA1LAogICAgICAgICAgICAgICAgICAg\nIC8vIGlzUmV0cmFuc2Zvcm1DbGFzc2VzU3VwcG9ydGVkIGlzbid0IGF2YWls\nYWJsZSwKICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSB1c2UgdGhlIG1v\ncmUgYmFzaWMgY2xhc3MgcmVkZWZpbml0aW9uCiAgICAgICAgICAgICAgICAg\nICAgLy8gaW5zdGVhZC4KICAgICAgICAgICAgICAgICAgICBfY2FuUmVkZWZp\nbmUgPSBCb29sZWFuLlRSVUU7CiAgICAgICAgICAgICAgICB9IGVsc2Ugewog\nICAgICAgICAgICAgICAgICAgIF9jYW5SZWRlZmluZSA9IChCb29sZWFuKSBJ\nbnN0cnVtZW50YXRpb24uY2xhc3MuZ2V0TWV0aG9kKAogICAgICAgICAgICAg\nICAgICAgICAgICAiaXNSZXRyYW5zZm9ybUNsYXNzZXNTdXBwb3J0ZWQiKS5p\nbnZva2UoaW5zdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBfY2FuUmVk\nZWZpbmUgPSBCb29sZWFuLkZBTFNFOwogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBfY2FuUmVkZWZpbmUuYm9vbGVhblZhbHVlKCk7\nCiAgICB9Cn0=\n","encoding":"base64"}

