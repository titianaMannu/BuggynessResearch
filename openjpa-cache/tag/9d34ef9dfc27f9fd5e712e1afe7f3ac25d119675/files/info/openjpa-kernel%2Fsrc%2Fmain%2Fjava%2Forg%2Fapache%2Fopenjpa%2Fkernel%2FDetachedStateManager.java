{"sha":"24f2a95960eafd07e42bb11c8a0a9ce48a2c6522","node_id":"MDQ6QmxvYjIwNjM2NDoyNGYyYTk1OTYwZWFmZDA3ZTQyYmIxMWM4YTBhOWNlNDhhMmM2NTIy","size":28824,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/24f2a95960eafd07e42bb11c8a0a9ce48a2c6522","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLk9iamVjdE91dHB1\ndDsKaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlOwppbXBvcnQgamF2YS51\ndGlsLkJpdFNldDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nZW5oYW5jZS5QZXJzaXN0ZW5jZUNhcGFibGU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuZW5oYW5jZS5TdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgamF2YS51\ndGlsLmNvbmN1cnJlbnQubG9ja3MuUmVlbnRyYW50TG9jazsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFEYXRhOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLm1ldGEuVmFsdWVNZXRhRGF0YTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLkV4Y2VwdGlvbnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEudXRpbC5Qcm94eTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLlVuc3VwcG9ydGVkRXhjZXB0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnV0aWwuSW1wbEhlbHBlcjsKCi8qKgogKiBJbnRl\ncm5hbCBzdGF0ZSBtYW5hZ2VyIGZvciBkZXRhY2hlZCBpbnN0YW5jZXMuIERv\nZXMgbm90IGZ1bGx5CiAqIGltcGxlbWVudCB7QGxpbmsgT3BlbkpQQVN0YXRl\nTWFuYWdlcn0gY29udHJhY3QgdG8gYWxsb3cgZm9yIHNlcmlhbGl6YXRpb24u\nCiAqCiAqIEBhdXRob3IgU3RldmUgS2ltCiAqIEBub2phdmFkb2MKICovCnB1\nYmxpYyBjbGFzcyBEZXRhY2hlZFN0YXRlTWFuYWdlcgogICAgZXh0ZW5kcyBB\ndHRhY2hTdHJhdGVneQogICAgaW1wbGVtZW50cyBPcGVuSlBBU3RhdGVNYW5h\nZ2VyLCBTZXJpYWxpemFibGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDQxMTIyMjM2NjU1ODQ3MzExMDBM\nOwoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0g\nTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoRGV0YWNoZWRTdGF0ZU1h\nbmFnZXIuY2xhc3MpOwoKICAgIHByaXZhdGUgZmluYWwgUGVyc2lzdGVuY2VD\nYXBhYmxlIF9wYzsKICAgIHByaXZhdGUgZmluYWwgYm9vbGVhbiBfZW1iZWRk\nZWQ7CiAgICBwcml2YXRlIGZpbmFsIGJvb2xlYW4gX2FjY2VzczsKICAgIHBy\naXZhdGUgZmluYWwgQml0U2V0IF9sb2FkZWQ7CiAgICBwcml2YXRlIGZpbmFs\nIEJpdFNldCBfZGlydHk7CiAgICBwcml2YXRlIGZpbmFsIE9iamVjdCBfb2lk\nOwogICAgcHJpdmF0ZSBmaW5hbCBPYmplY3QgX3ZlcnNpb247CiAgICBwcml2\nYXRlIGZpbmFsIFJlZW50cmFudExvY2sgX2xvY2s7CgogICAgLyoqCiAgICAg\nKiBDb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBAcGFyYW0gcGMgdGhlIG1h\nbmFnZWQgaW5zdGFuY2UKICAgICAqIEBwYXJhbSBzbSB0aGUgaW5zdGFuY2Un\ncyBzdGF0ZSBtYW5hZ2VyCiAgICAgKiBAcGFyYW0gbG9hZCB0aGUgc2V0IG9m\nIGRldGFjaGVkIGZpZWxkIGluZGV4ZXMKICAgICAqIEBwYXJhbSBhY2Nlc3Mg\nd2hldGhlciB0byBhbGxvdyBhY2Nlc3MgdG8gdW5sb2FkZWQgZmllbGRzCiAg\nICAgKiBAcGFyYW0gbXVsdGl0aHJlYWRlZCB3aGV0aGVyIHRoZSBpbnN0YW5j\nZSB3aWxsIGJlIHVzZWQgY29uY3VycmVudGx5CiAgICAgKiBieSBtdWx0aXBs\nZSB0aHJlYWRzCiAgICAgKi8KICAgIHB1YmxpYyBEZXRhY2hlZFN0YXRlTWFu\nYWdlcihQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20sCiAgICAgICAgQml0U2V0IGxvYWQsIGJvb2xlYW4gYWNjZXNzLCBi\nb29sZWFuIG11bHRpdGhyZWFkZWQpIHsKICAgICAgICBfcGMgPSBwYzsKICAg\nICAgICBfZW1iZWRkZWQgPSBzbS5pc0VtYmVkZGVkKCk7CiAgICAgICAgX2xv\nYWRlZCA9IGxvYWQ7CiAgICAgICAgX2FjY2VzcyA9IGFjY2VzczsKICAgICAg\nICBfZGlydHkgPSBuZXcgQml0U2V0KF9sb2FkZWQubGVuZ3RoKCkpOwogICAg\nICAgIF9vaWQgPSBzbS5mZXRjaE9iamVjdElkKCk7CiAgICAgICAgX3ZlcnNp\nb24gPSBzbS5nZXRWZXJzaW9uKCk7CiAgICAgICAgaWYgKG11bHRpdGhyZWFk\nZWQpCiAgICAgICAgICAgIF9sb2NrID0gbmV3IFJlZW50cmFudExvY2soKTsK\nICAgICAgICBlbHNlCiAgICAgICAgICAgIF9sb2NrID0gbnVsbDsKICAgIH0K\nCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8v\nIEF0dGFjaFN0cmF0ZWd5IGltcGxlbWVudGF0aW9uCiAgICAvLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBwdWJsaWMgT2JqZWN0IGF0\ndGFjaChBdHRhY2hNYW5hZ2VyIG1hbmFnZXIsIE9iamVjdCB0b0F0dGFjaCwK\nICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEsIFBlcnNpc3RlbmNlQ2FwYWJs\nZSBpbnRvLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIG93bmVyLAogICAgICAgIFZh\nbHVlTWV0YURhdGEgb3duZXJNZXRhLCBib29sZWFuIGV4cGxpY2l0KSB7CiAg\nICAgICAgQnJva2VySW1wbCBicm9rZXIgPSBtYW5hZ2VyLmdldEJyb2tlcigp\nOwogICAgICAgIFN0YXRlTWFuYWdlckltcGwgc207CiAgICAgICAgaWYgKF9l\nbWJlZGRlZCkgewogICAgICAgICAgICBpZiAoX2RpcnR5Lmxlbmd0aCAoKSA+\nIDApCiAgICAgICAgICAgICAgICBvd25lci5kaXJ0eShvd25lck1ldGEuZ2V0\nRmllbGRNZXRhRGF0YSgpLmdldEluZGV4KCkpOwogICAgICAgICAgICBzbSA9\nIChTdGF0ZU1hbmFnZXJJbXBsKSBicm9rZXIuZW1iZWQoX3BjLCBfb2lkLCBv\nd25lciwgb3duZXJNZXRhKTsKICAgICAgICAgICAgSW1wbEhlbHBlci50b1Bl\ncnNpc3RlbmNlQ2FwYWJsZSh0b0F0dGFjaCwgYnJva2VyLmdldENvbmZpZ3Vy\nYXRpb24oKSkKICAgICAgICAgICAgICAgIC5wY1JlcGxhY2VTdGF0ZU1hbmFn\nZXIodGhpcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgUENTdGF0\nZSBzdGF0ZSA9IChfZGlydHkubGVuZ3RoKCkgPiAwKSA/IFBDU3RhdGUuUERJ\nUlRZCiAgICAgICAgICAgICAgICA6IFBDU3RhdGUuUENMRUFOOwogICAgICAg\nICAgICBzbSA9IChTdGF0ZU1hbmFnZXJJbXBsKSBicm9rZXIuY29weSh0aGlz\nLCBzdGF0ZSk7CiAgICAgICAgfQogICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJs\nZSBwYyA9IHNtLmdldFBlcnNpc3RlbmNlQ2FwYWJsZSgpOwogICAgICAgIG1h\nbmFnZXIuc2V0QXR0YWNoZWRDb3B5KHRvQXR0YWNoLCBwYyk7CgogICAgICAg\nIG1hbmFnZXIuZmlyZUJlZm9yZUF0dGFjaCh0b0F0dGFjaCwgbWV0YSk7Cgog\nICAgICAgIC8vIHByZS1sb2FkIGZvciBlZmZpY2llbmN5OiBjdXJyZW50IGZp\nZWxkIHZhbHVlcyBmb3IgcmVzdG9yZSwgZGVwZW5kZW50CiAgICAgICAgLy8g\nZm9yIGRlbGV0ZQogICAgICAgIEZpZWxkTWV0YURhdGFbXSBmaWVsZHMgPSBt\nZXRhLmdldEZpZWxkcygpOwogICAgICAgIGludCByZXN0b3JlID0gYnJva2Vy\nLmdldFJlc3RvcmVTdGF0ZSgpOwogICAgICAgIGlmIChfZGlydHkubGVuZ3Ro\nKCkgPiAwKSB7CiAgICAgICAgICAgIEJpdFNldCBsb2FkID0gbmV3IEJpdFNl\ndChmaWVsZHMubGVuZ3RoKTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlm\nICghX2RpcnR5LmdldChpKSkKICAgICAgICAgICAgICAgICAgICBjb250aW51\nZTsKCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGZpZWxkc1tpXS5nZXREZWNs\nYXJlZFR5cGVDb2RlKCkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5BUlJBWToKICAgICAgICAgICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5DT0xMRUNUSU9OOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAo\ncmVzdG9yZSA9PSBSZXN0b3JlU3RhdGUuUkVTVE9SRV9BTEwKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIHx8IGZpZWxkc1tpXS5nZXRFbGVtZW50KCku\nZ2V0Q2FzY2FkZURlbGV0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICA9PSBWYWx1ZU1ldGFEYXRhLkNBU0NBREVfQVVUTykKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGxvYWQuc2V0KGkpOwogICAgICAgICAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5NQVA6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN0b3Jl\nID09IFJlc3RvcmVTdGF0ZS5SRVNUT1JFX0FMTAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgfHwgZmllbGRzW2ldLmdldEVsZW1lbnQoKS5nZXRDYXNj\nYWRlRGVsZXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgID09IFZh\nbHVlTWV0YURhdGEuQ0FTQ0FERV9BVVRPCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICB8fCBmaWVsZHNbaV0uZ2V0S2V5KCkuZ2V0Q2FzY2FkZURlbGV0\nZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PSBWYWx1ZU1ldGFE\nYXRhLkNBU0NBREVfQVVUTykKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGxvYWQuc2V0KGkpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAg\nICAgICAgICBpZiAocmVzdG9yZSAhPSBSZXN0b3JlU3RhdGUuUkVTVE9SRV9O\nT05FCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBmaWVsZHNbaV0u\nZ2V0Q2FzY2FkZURlbGV0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICA9PSBWYWx1ZU1ldGFEYXRhLkNBU0NBREVfQVVUTykKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGxvYWQuc2V0KGkpOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9CiAgICAgICAgICAgIEZldGNoQ29uZmlndXJhdGlv\nbiBmYyA9IGJyb2tlci5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsKICAgICAg\nICAgICAgc20ubG9hZEZpZWxkcyhsb2FkLCBmYywgZmMuZ2V0V3JpdGVMb2Nr\nTGV2ZWwoKSwgbnVsbCk7CiAgICAgICAgfSAgICAgICAgCiAgICAgICAgT2Jq\nZWN0IG9yaWdWZXJzaW9uID0gc20uZ2V0VmVyc2lvbigpOwogICAgICAgIHNt\nLnNldFZlcnNpb24oX3ZlcnNpb24pOwoKICAgICAgICBCaXRTZXQgbG9hZGVk\nID0gc20uZ2V0TG9hZGVkKCk7CiAgICAgICAgaW50IHNldCA9IFN0YXRlTWFu\nYWdlci5TRVRfQVRUQUNIOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nZmllbGRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICghX2xvYWRl\nZC5nZXQoaSkpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAg\nICAgLy8gZG9uJ3QgcmVsb2FkIGFscmVhZHkgbG9hZGVkIG5vbi1tdXRhYmxl\nIG9iamVjdHMKICAgICAgICAgICAgaWYgKCFfZGlydHkuZ2V0KGkpICYmIGxv\nYWRlZC5nZXQoaSkgJiYgaWdub3JlTG9hZGVkKGZpZWxkc1tpXSkpCiAgICAg\nICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIHByb3ZpZGVGaWVs\nZChpKTsKICAgICAgICAgICAgc3dpdGNoIChmaWVsZHNbaV0uZ2V0RGVjbGFy\nZWRUeXBlQ29kZSgpKSB7CiAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBl\ncy5CT09MRUFOOgogICAgICAgICAgICAgICAgICAgIGlmIChfZGlydHkuZ2V0\nKGkpKQogICAgICAgICAgICAgICAgICAgICAgICBzbS5zZXR0aW5nQm9vbGVh\nbkZpZWxkKHBjLCBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGxv\nYWRlZC5nZXQoaSkpICYmIHNtLmZldGNoQm9vbGVhbkZpZWxkKGkpLAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ3ZhbCA9PSAxLCBzZXQpOwog\nICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAg\nICAgc20uc3RvcmVCb29sZWFuRmllbGQoaSwgbG9uZ3ZhbCA9PSAxKTsKICAg\nICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2Ug\nSmF2YVR5cGVzLkJZVEU6CiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaXJ0\neS5nZXQoaSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHNtLnNldHRpbmdC\neXRlRmllbGQocGMsIGksICghbG9hZGVkLmdldChpKSkgPyAoYnl0ZSkgMAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzbS5mZXRjaEJ5dGVGaWVs\nZChpKSwgKGJ5dGUpIGxvbmd2YWwsIHNldCk7CiAgICAgICAgICAgICAgICAg\nICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBzbS5zdG9yZUJ5dGVG\naWVsZChpLCAoYnl0ZSkgbG9uZ3ZhbCk7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DSEFSOgog\nICAgICAgICAgICAgICAgICAgIGlmIChfZGlydHkuZ2V0KGkpKQogICAgICAg\nICAgICAgICAgICAgICAgICBzbS5zZXR0aW5nQ2hhckZpZWxkKHBjLCBpLCAo\nIWxvYWRlZC5nZXQoaSkpID8gKGNoYXIpIDAKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIDogc20uZmV0Y2hDaGFyRmllbGQoaSksIChjaGFyKSBsb25n\ndmFsLCBzZXQpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAg\nICAgICAgICAgICAgICAgc20uc3RvcmVDaGFyRmllbGQoaSwgKGNoYXIpIGxv\nbmd2YWwpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UOgogICAgICAgICAgICAgICAgICAg\nIGlmIChfZGlydHkuZ2V0KGkpKQogICAgICAgICAgICAgICAgICAgICAgICBz\nbS5zZXR0aW5nSW50RmllbGQocGMsIGksICghbG9hZGVkLmdldChpKSkgPyAw\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNtLmZldGNoSW50Rmll\nbGQoaSksIChpbnQpIGxvbmd2YWwsIHNldCk7CiAgICAgICAgICAgICAgICAg\nICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBzbS5zdG9yZUludEZp\nZWxkKGksIChpbnQpIGxvbmd2YWwpOwogICAgICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9ORzoKICAg\nICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkKICAgICAgICAg\nICAgICAgICAgICAgICAgc20uc2V0dGluZ0xvbmdGaWVsZChwYywgaSwgKCFs\nb2FkZWQuZ2V0KGkpKSA/IDBMCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICA6IHNtLmZldGNoTG9uZ0ZpZWxkKGkpLCBsb25ndmFsLCBzZXQpOwogICAg\nICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAg\nc20uc3RvcmVMb25nRmllbGQoaSwgbG9uZ3ZhbCk7CiAgICAgICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5T\nSE9SVDoKICAgICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkK\nICAgICAgICAgICAgICAgICAgICAgICAgc20uc2V0dGluZ1Nob3J0RmllbGQo\ncGMsIGksICghbG9hZGVkLmdldChpKSkgPyAoc2hvcnQpIDAKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIDogc20uZmV0Y2hTaG9ydEZpZWxkKGkpLCAo\nc2hvcnQpIGxvbmd2YWwsIHNldCk7CiAgICAgICAgICAgICAgICAgICAgZWxz\nZQogICAgICAgICAgICAgICAgICAgICAgICBzbS5zdG9yZVNob3J0RmllbGQo\naSwgKHNob3J0KSBsb25ndmFsKTsKICAgICAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkZMT0FUOgogICAg\nICAgICAgICAgICAgICAgIGlmIChfZGlydHkuZ2V0KGkpKQogICAgICAgICAg\nICAgICAgICAgICAgICBzbS5zZXR0aW5nRmxvYXRGaWVsZChwYywgaSwgKCFs\nb2FkZWQuZ2V0KGkpKSA/IDBGCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICA6IHNtLmZldGNoRmxvYXRGaWVsZChpKSwgKGZsb2F0KSBkYmx2YWwsIHNl\ndCk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAg\nICAgICAgICBzbS5zdG9yZUZsb2F0RmllbGQoaSwgKGZsb2F0KSBkYmx2YWwp\nOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuRE9VQkxFOgogICAgICAgICAgICAgICAgICAgIGlm\nIChfZGlydHkuZ2V0KGkpKQogICAgICAgICAgICAgICAgICAgICAgICBzbS5z\nZXR0aW5nRG91YmxlRmllbGQocGMsIGksICghbG9hZGVkLmdldChpKSkgPyAw\nRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzbS5mZXRjaERvdWJs\nZUZpZWxkKGkpLCBkYmx2YWwsIHNldCk7CiAgICAgICAgICAgICAgICAgICAg\nZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBzbS5zdG9yZURvdWJsZUZp\nZWxkKGksIGRibHZhbCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5TVFJJTkc6CiAgICAgICAg\nICAgICAgICAgICAgaWYgKF9kaXJ0eS5nZXQoaSkpCiAgICAgICAgICAgICAg\nICAgICAgICAgIHNtLnNldHRpbmdTdHJpbmdGaWVsZChwYywgaSwgKCFsb2Fk\nZWQuZ2V0KGkpKSA/IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIDogc20uZmV0Y2hTdHJpbmdGaWVsZChpKSwgKFN0cmluZykgb2JqdmFsLCBz\nZXQpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAg\nICAgICAgICAgc20uc3RvcmVTdHJpbmdGaWVsZChpLCAoU3RyaW5nKSBvYmp2\nYWwpOwogICAgICAgICAgICAgICAgICAgIG9ianZhbCA9IG51bGw7CiAgICAg\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5QQzoKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlBD\nX1VOVFlQRUQ6CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkc1tpXS5n\nZXRDYXNjYWRlQXR0YWNoKCkgPT0gVmFsdWVNZXRhRGF0YQogICAgICAgICAg\nICAgICAgICAgICAgICAuQ0FTQ0FERV9OT05FKQogICAgICAgICAgICAgICAg\nICAgICAgICBvYmp2YWwgPSBnZXRSZWZlcmVuY2UobWFuYWdlciwgb2JqdmFs\nLCBzbSwgZmllbGRzW2ldKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgUGVyc2lzdGVuY2VDYXBhYmxlIHRv\nUEMgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqdmFs\nICE9IG51bGwgJiYgZmllbGRzW2ldLmlzRW1iZWRkZWRQQygpKQogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgdG9QQyA9IEltcGxIZWxwZXIudG9QZXJz\naXN0ZW5jZUNhcGFibGUob2JqdmFsLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGJyb2tlci5nZXRDb25maWd1cmF0aW9uKCkpOwogICAgICAg\nICAgICAgICAgICAgICAgICBvYmp2YWwgPSBtYW5hZ2VyLmF0dGFjaChvYmp2\nYWwsIHRvUEMsIHNtLCBmaWVsZHNbaV0sCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgICAgIGlmIChfZGlydHkuZ2V0KGkpKQogICAgICAgICAgICAg\nICAgICAgICAgICBzbS5zZXR0aW5nT2JqZWN0RmllbGQocGMsIGksICghbG9h\nZGVkLmdldChpKSkgPyBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICA6IHNtLmZldGNoT2JqZWN0RmllbGQoaSksIG9ianZhbCwgc2V0KTsKICAg\nICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAg\nIHNtLnN0b3JlT2JqZWN0RmllbGQoaSwgb2JqdmFsKTsKICAgICAgICAgICAg\nICAgICAgICBvYmp2YWwgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ09MTEVDVElP\nTjoKICAgICAgICAgICAgICAgICAgICBDb2xsZWN0aW9uIGNvbGwgPSAoQ29s\nbGVjdGlvbikgb2JqdmFsOwogICAgICAgICAgICAgICAgICAgIG9ianZhbCA9\nIG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbGwgIT0gbnVsbCkK\nICAgICAgICAgICAgICAgICAgICAgICAgY29sbCA9IGF0dGFjaENvbGxlY3Rp\nb24obWFuYWdlciwgY29sbCwgc20sIGZpZWxkc1tpXSk7CiAgICAgICAgICAg\nICAgICAgICAgaWYgKF9kaXJ0eS5nZXQoaSkpCiAgICAgICAgICAgICAgICAg\nICAgICAgIHNtLnNldHRpbmdPYmplY3RGaWVsZChwYywgaSwgKCFsb2FkZWQu\nZ2V0KGkpKSA/IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDog\nc20uZmV0Y2hPYmplY3RGaWVsZChpKSwgY29sbCwgc2V0KTsKICAgICAgICAg\nICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHNtLnN0\nb3JlT2JqZWN0RmllbGQoaSwgY29sbCk7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5NQVA6CiAg\nICAgICAgICAgICAgICAgICAgTWFwIG1hcCA9IChNYXApIG9ianZhbDsKICAg\nICAgICAgICAgICAgICAgICBvYmp2YWwgPSBudWxsOwogICAgICAgICAgICAg\nICAgICAgIGlmIChtYXAgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAg\nICAgbWFwID0gYXR0YWNoTWFwKG1hbmFnZXIsIG1hcCwgc20sIGZpZWxkc1tp\nXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaXJ0eS5nZXQoaSkpCiAg\nICAgICAgICAgICAgICAgICAgICAgIHNtLnNldHRpbmdPYmplY3RGaWVsZChw\nYywgaSwgKCFsb2FkZWQuZ2V0KGkpKSA/IG51bGwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIDogc20uZmV0Y2hPYmplY3RGaWVsZChpKSwgbWFwLCBz\nZXQpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAg\nICAgICAgICAgc20uc3RvcmVPYmplY3RGaWVsZChpLCBtYXApOwogICAgICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoK\nICAgICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgc20uc2V0dGluZ09iamVjdEZpZWxkKHBjLCBp\nLCAoIWxvYWRlZC5nZXQoaSkpID8gbnVsbAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgOiBzbS5mZXRjaE9iamVjdEZpZWxkKGkpLCBvYmp2YWwsIHNl\ndCk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAg\nICAgICAgICBzbS5zdG9yZU9iamVjdEZpZWxkKGksIG9ianZhbCk7CiAgICAg\nICAgICAgICAgICAgICAgb2JqdmFsID0gbnVsbDsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgICAgICBwYy5wY1JlcGxhY2VTdGF0ZU1hbmFnZXIoc20p\nOwoKICAgICAgICAvLyBpZiB3ZSB3ZXJlIGNsZWFuIGF0IGxlYXN0IG1ha2Ug\nc3VyZSBhIHZlcnNpb24gY2hlY2sgaXMgZG9uZSB0bwogICAgICAgIC8vIHBy\nZXZlbnQgdXNpbmcgb2xkIHN0YXRlCiAgICAgICAgaWYgKCFzbS5pc1ZlcnNp\nb25DaGVja1JlcXVpcmVkKCkgJiYgYnJva2VyLmlzQWN0aXZlKCkKICAgICAg\nICAgICAgJiYgX3ZlcnNpb24gIT0gb3JpZ1ZlcnNpb24gJiYgKG9yaWdWZXJz\naW9uID09IG51bGwgCiAgICAgICAgICAgIHx8IGJyb2tlci5nZXRTdG9yZU1h\nbmFnZXIoKS5jb21wYXJlVmVyc2lvbihzbSwgX3ZlcnNpb24sIAogICAgICAg\nICAgICBvcmlnVmVyc2lvbikgIT0gU3RvcmVNYW5hZ2VyLlZFUlNJT05fU0FN\nRSkpIHsKICAgICAgICAgICAgYnJva2VyLnRyYW5zYWN0aW9uYWwoc20uZ2V0\nTWFuYWdlZEluc3RhbmNlKCksIGZhbHNlLCAKICAgICAgICAgICAgICAgIG1h\nbmFnZXIuZ2V0QmVoYXZpb3IoKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1\ncm4gc20uZ2V0TWFuYWdlZEluc3RhbmNlKCk7CiAgICB9CgogICAgcHJvdGVj\ndGVkIE9iamVjdCBnZXREZXRhY2hlZE9iamVjdElkKEF0dGFjaE1hbmFnZXIg\nbWFuYWdlciwKICAgICAgICBPYmplY3QgdG9BdHRhY2gpIHsKICAgICAgICBy\nZXR1cm4gX29pZDsKICAgIH0KCiAgICB2b2lkIHByb3ZpZGVGaWVsZChpbnQg\nZmllbGQpIHsKICAgICAgICBfcGMucGNQcm92aWRlRmllbGQoZmllbGQpOwog\nICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHByb3ZpZGVGaWVsZChPYmplY3Qg\ndG9BdHRhY2gsIFN0YXRlTWFuYWdlckltcGwgc20sCiAgICAgICAgaW50IGZp\nZWxkKSB7CiAgICAgICAgcHJvdmlkZUZpZWxkKGZpZWxkKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIElnbm9yZSBpZiB0aGUgZmllbGQgaXMgbm90IGRpcnR5\nIGJ1dCBsb2FkZWQKICAgICAqLwogICAgcHJvdGVjdGVkIHN0YXRpYyBib29s\nZWFuIGlnbm9yZUxvYWRlZChGaWVsZE1ldGFEYXRhIGZtZCkgewogICAgICAg\nIHN3aXRjaCAoZm1kLmdldFR5cGVDb2RlKCkpIHsKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuQk9PTEVBTjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuQk9PTEVBTl9PQko6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJZ\nVEU6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJZVEVfT0JKOgogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5JTlQ6CiAgICAgICAgICAgIGNhc2Ug\nSmF2YVR5cGVzLklOVF9PQko6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLkxPTkc6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxPTkdfT0JKOgog\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5TSE9SVDoKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuU0hPUlRfT0JKOgogICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5ET1VCTEU6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkRP\nVUJMRV9PQko6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkZMT0FUOgog\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5GTE9BVF9PQko6CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkNIQVI6CiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLkNIQVJfT0JKOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5T\nVFJJTkc6CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIFN0YXRlTWFuYWdlciBpbXBs\nZW1lbnRhdGlvbgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLwoKICAgIHB1YmxpYyBPYmplY3QgZ2V0R2VuZXJpY0NvbnRleHQoKSB7CiAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBn\nZXRQQ1ByaW1hcnlLZXkoT2JqZWN0IG9pZCwgaW50IGZpZWxkKSB7CiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nCiAgICB9CgogICAgcHVibGljIFN0YXRlTWFuYWdlciByZXBsYWNlU3RhdGVN\nYW5hZ2VyKFN0YXRlTWFuYWdlciBzbSkgewogICAgICAgIHJldHVybiBzbTsK\nICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFZlcnNpb24oKSB7CiAgICAg\nICAgcmV0dXJuIF92ZXJzaW9uOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndFZlcnNpb24oT2JqZWN0IHZlcnNpb24pIHsKICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRFeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc0RpcnR5KCkgewogICAgICAgIHJldHVybiBfZGlydHkubGVuZ3Ro\nKCkgIT0gMDsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1RyYW5zYWN0\naW9uYWwoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1\nYmxpYyBib29sZWFuIGlzUGVyc2lzdGVudCgpIHsKICAgICAgICByZXR1cm4g\nZmFsc2U7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNOZXcoKSB7CiAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGlzRGVsZXRlZCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gaXNEZXRhY2hlZCgpIHsKICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1ZlcnNpb25V\ncGRhdGVSZXF1aXJlZCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9\nCgogICAgcHVibGljIGJvb2xlYW4gaXNWZXJzaW9uQ2hlY2tSZXF1aXJlZCgp\nIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIHZv\naWQgZGlydHkoU3RyaW5nIGZpZWxkKSB7CiAgICAgICAgLy8gc2hvdWxkIHdl\nIHN0b3JlIENsYXNzTWV0YURhdGE/CiAgICAgICAgdGhyb3cgbmV3IFVuc3Vw\ncG9ydGVkRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBm\nZXRjaE9iamVjdElkKCkgewogICAgICAgIHJldHVybiBfb2lkOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGFjY2Vzc2luZ0ZpZWxkKGludCBpZHgpIHsKICAg\nICAgICBpZiAoIV9hY2Nlc3MgJiYgIV9sb2FkZWQuZ2V0KGlkeCkpCiAgICAg\nICAgCS8vIGRvIG5vdCBhY2Nlc3MgdGhlIHBjIGZpZWxkcyBieSBpbXBsaWN0\nbHkgaW52b2tpbmcgX3BjLnRvU3RyaW5nKCkKICAgICAgICAJLy8gbWF5IGNh\ndXNlIGluZmluaXRlIGxvb3AgaWYgYWdhaW4gdHJpZXMgdG8gYWNjZXNzIHVu\nbG9hZGVkIGZpZWxkIAogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0\nYXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJ1bmxvYWRlZC1kZXRhY2hlZCIsCiAg\nICAgICAgICAgICAgIEV4Y2VwdGlvbnMudG9TdHJpbmcoX3BjKSkuZ2V0TWVz\nc2FnZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBzZXJpYWxpemlu\nZygpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gd3JpdGVEZXRhY2hlZChPYmplY3RPdXRwdXQgb3V0KQogICAg\nICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgb3V0LndyaXRlT2Jq\nZWN0KF9wYy5wY0dldERldGFjaGVkU3RhdGUoKSk7CiAgICAgICAgb3V0Lndy\naXRlT2JqZWN0KHRoaXMpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBwcm94eURldGFjaGVkRGVzZXJpYWxpemVkKGlu\ndCBpZHgpIHsKICAgICAgICBsb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgX3BjLnBjUHJvdmlkZUZpZWxkKGlkeCk7CiAgICAgICAgICAgIGlm\nIChvYmp2YWwgaW5zdGFuY2VvZiBQcm94eSkKICAgICAgICAgICAgICAgICgo\nUHJveHkpIG9ianZhbCkuc2V0T3duZXIodGhpcywgaWR4KTsKICAgICAgICAg\nICAgb2JqdmFsID0gbnVsbDsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICB1bmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZv\naWQgc2V0dGluZ0Jvb2xlYW5GaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMs\nIGludCBpZHgsCiAgICAgICAgYm9vbGVhbiBjdXIsIGJvb2xlYW4gbmV4dCwg\naW50IHNldCkgewogICAgICAgIGFjY2Vzc2luZ0ZpZWxkKGlkeCk7CiAgICAg\nICAgaWYgKGN1ciA9PSBuZXh0IHx8ICFfbG9hZGVkLmdldChpZHgpKQogICAg\nICAgICAgICByZXR1cm47CiAgICAgICAgbG9jaygpOwogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIF9kaXJ0eS5zZXQoaWR4KTsKICAgICAgICAgICAgbG9u\nZ3ZhbCA9IG5leHQgPyAxIDogMDsKICAgICAgICAgICAgcGMucGNSZXBsYWNl\nRmllbGQoaWR4KTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB1\nbmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\ndGluZ0NoYXJGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgs\nIGNoYXIgY3VyLAogICAgICAgIGNoYXIgbmV4dCwgaW50IHNldCkgewogICAg\nICAgIGFjY2Vzc2luZ0ZpZWxkKGlkeCk7CiAgICAgICAgaWYgKGN1ciA9PSBu\nZXh0IHx8ICFfbG9hZGVkLmdldChpZHgpKQogICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgbG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9k\naXJ0eS5zZXQoaWR4KTsKICAgICAgICAgICAgbG9uZ3ZhbCA9IG5leHQ7CiAg\nICAgICAgICAgIHBjLnBjUmVwbGFjZUZpZWxkKGlkeCk7CiAgICAgICAgfSBm\naW5hbGx5IHsKICAgICAgICAgICAgdW5sb2NrKCk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNldHRpbmdCeXRlRmllbGQoUGVyc2lzdGVu\nY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBieXRlIGN1ciwKICAgICAgICBieXRl\nIG5leHQsIGludCBzZXQpIHsKICAgICAgICBhY2Nlc3NpbmdGaWVsZChpZHgp\nOwogICAgICAgIGlmIChjdXIgPT0gbmV4dCB8fCAhX2xvYWRlZC5nZXQoaWR4\nKSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGxvY2soKTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBfZGlydHkuc2V0KGlkeCk7CiAgICAgICAg\nICAgIGxvbmd2YWwgPSBuZXh0OwogICAgICAgICAgICBwYy5wY1JlcGxhY2VG\naWVsZChpZHgpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHVu\nbG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR0\naW5nU2hvcnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgs\nIHNob3J0IGN1ciwKICAgICAgICBzaG9ydCBuZXh0LCBpbnQgc2V0KSB7CiAg\nICAgICAgYWNjZXNzaW5nRmllbGQoaWR4KTsKICAgICAgICBpZiAoY3VyID09\nIG5leHQgfHwgIV9sb2FkZWQuZ2V0KGlkeCkpCiAgICAgICAgICAgIHJldHVy\nbjsKICAgICAgICBsb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nX2RpcnR5LnNldChpZHgpOwogICAgICAgICAgICBsb25ndmFsID0gbmV4dDsK\nICAgICAgICAgICAgcGMucGNSZXBsYWNlRmllbGQoaWR4KTsKICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICB1bmxvY2soKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0dGluZ0ludEZpZWxkKFBlcnNpc3Rl\nbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwgaW50IGN1ciwKICAgICAgICBpbnQg\nbmV4dCwgaW50IHNldCkgewogICAgICAgIGFjY2Vzc2luZ0ZpZWxkKGlkeCk7\nCiAgICAgICAgaWYgKGN1ciA9PSBuZXh0IHx8ICFfbG9hZGVkLmdldChpZHgp\nKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgbG9jaygpOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIF9kaXJ0eS5zZXQoaWR4KTsKICAgICAgICAg\nICAgbG9uZ3ZhbCA9IG5leHQ7CiAgICAgICAgICAgIHBjLnBjUmVwbGFjZUZp\nZWxkKGlkeCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdW5s\nb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldHRp\nbmdMb25nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBs\nb25nIGN1ciwKICAgICAgICBsb25nIG5leHQsIGludCBzZXQpIHsKICAgICAg\nICBhY2Nlc3NpbmdGaWVsZChpZHgpOwogICAgICAgIGlmIChjdXIgPT0gbmV4\ndCB8fCAhX2xvYWRlZC5nZXQoaWR4KSkKICAgICAgICAgICAgcmV0dXJuOwog\nICAgICAgIGxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBfZGly\ndHkuc2V0KGlkeCk7CiAgICAgICAgICAgIGxvbmd2YWwgPSBuZXh0OwogICAg\nICAgICAgICBwYy5wY1JlcGxhY2VGaWVsZChpZHgpOwogICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgIHVubG9jaygpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXR0aW5nRmxvYXRGaWVsZChQZXJzaXN0ZW5j\nZUNhcGFibGUgcGMsIGludCBpZHgsIGZsb2F0IGN1ciwKICAgICAgICBmbG9h\ndCBuZXh0LCBpbnQgc2V0KSB7CiAgICAgICAgYWNjZXNzaW5nRmllbGQoaWR4\nKTsKICAgICAgICBpZiAoY3VyID09IG5leHQgfHwgIV9sb2FkZWQuZ2V0KGlk\neCkpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBsb2NrKCk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgX2RpcnR5LnNldChpZHgpOwogICAgICAg\nICAgICBkYmx2YWwgPSBuZXh0OwogICAgICAgICAgICBwYy5wY1JlcGxhY2VG\naWVsZChpZHgpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHVu\nbG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR0\naW5nRG91YmxlRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4\nLCBkb3VibGUgY3VyLAogICAgICAgIGRvdWJsZSBuZXh0LCBpbnQgc2V0KSB7\nCiAgICAgICAgYWNjZXNzaW5nRmllbGQoaWR4KTsKICAgICAgICBpZiAoY3Vy\nID09IG5leHQgfHwgIV9sb2FkZWQuZ2V0KGlkeCkpCiAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICBsb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgX2RpcnR5LnNldChpZHgpOwogICAgICAgICAgICBkYmx2YWwgPSBuZXh0\nOwogICAgICAgICAgICBwYy5wY1JlcGxhY2VGaWVsZChpZHgpOwogICAgICAg\nIH0gZmluYWxseSB7CiAgICAgICAgICAgIHVubG9jaygpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR0aW5nU3RyaW5nRmllbGQoUGVy\nc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBTdHJpbmcgY3VyLAogICAg\nICAgIFN0cmluZyBuZXh0LCBpbnQgc2V0KSB7CiAgICAgICAgYWNjZXNzaW5n\nRmllbGQoaWR4KTsKICAgICAgICBpZiAoY3VyID09IG5leHQgfHwgKGN1ciAh\nPSBudWxsICYmIGN1ci5lcXVhbHMobmV4dCkpCiAgICAgICAgICAgICAgICB8\nfCAhX2xvYWRlZC5nZXQoaWR4KSkKICAgICAgICAgICAgcmV0dXJuOwogICAg\nICAgIGxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBfZGlydHku\nc2V0KGlkeCk7CiAgICAgICAgICAgIG9ianZhbCA9IG5leHQ7CiAgICAgICAg\nICAgIHBjLnBjUmVwbGFjZUZpZWxkKGlkeCk7CiAgICAgICAgfSBmaW5hbGx5\nIHsKICAgICAgICAgICAgdW5sb2NrKCk7CiAgICAgICAgICAgIG9ianZhbCA9\nIG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldHRp\nbmdPYmplY3RGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgs\nIE9iamVjdCBjdXIsCiAgICAgICAgT2JqZWN0IG5leHQsIGludCBzZXQpIHsK\nICAgICAgICBhY2Nlc3NpbmdGaWVsZChpZHgpOwogICAgICAgIGlmIChjdXIg\nPT0gbmV4dCB8fCAhX2xvYWRlZC5nZXQoaWR4KSkKICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgIGxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBfZGlydHkuc2V0KGlkeCk7CiAgICAgICAgICAgIG9ianZhbCA9IG5leHQ7\nCiAgICAgICAgICAgIHBjLnBjUmVwbGFjZUZpZWxkKGlkeCk7CiAgICAgICAg\nfSBmaW5hbGx5IHsKICAgICAgICAgICAgdW5sb2NrKCk7CiAgICAgICAgICAg\nIG9ianZhbCA9IG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHByb3ZpZGVkQm9vbGVhbkZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBw\nYywgaW50IGlkeCwKICAgICAgICBib29sZWFuIGN1cikgewogICAgICAgIGxv\nbmd2YWwgPSBjdXIgPyAxIDogMDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBw\ncm92aWRlZENoYXJGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBp\nZHgsIGNoYXIgY3VyKSB7CiAgICAgICAgbG9uZ3ZhbCA9IGN1cjsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBwcm92aWRlZEJ5dGVGaWVsZChQZXJzaXN0ZW5j\nZUNhcGFibGUgcGMsIGludCBpZHgsIGJ5dGUgY3VyKSB7CiAgICAgICAgbG9u\nZ3ZhbCA9IGN1cjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcm92aWRlZFNo\nb3J0RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBzaG9y\ndCBjdXIpIHsKICAgICAgICBsb25ndmFsID0gY3VyOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHByb3ZpZGVkSW50RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxl\nIHBjLCBpbnQgaWR4LCBpbnQgY3VyKSB7CiAgICAgICAgbG9uZ3ZhbCA9IGN1\ncjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcm92aWRlZExvbmdGaWVsZChQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgsIGxvbmcgY3VyKSB7CiAg\nICAgICAgbG9uZ3ZhbCA9IGN1cjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBw\ncm92aWRlZEZsb2F0RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQg\naWR4LCBmbG9hdCBjdXIpIHsKICAgICAgICBkYmx2YWwgPSBjdXI7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgcHJvdmlkZWREb3VibGVGaWVsZChQZXJzaXN0\nZW5jZUNhcGFibGUgcGMsIGludCBpZHgsCiAgICAgICAgZG91YmxlIGN1cikg\newogICAgICAgIGRibHZhbCA9IGN1cjsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBwcm92aWRlZFN0cmluZ0ZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywg\naW50IGlkeCwKICAgICAgICBTdHJpbmcgY3VyKSB7CiAgICAgICAgb2JqdmFs\nID0gY3VyOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkT2JqZWN0\nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LAogICAgICAg\nIE9iamVjdCBjdXIpIHsKICAgICAgICBvYmp2YWwgPSBjdXI7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gcmVwbGFjZUJvb2xlYW5GaWVsZChQZXJzaXN0\nZW5jZUNhcGFibGUgcGMsIGludCBpZHgpIHsKICAgICAgICByZXR1cm4gbG9u\nZ3ZhbCA9PSAxOwogICAgfQoKICAgIHB1YmxpYyBjaGFyIHJlcGxhY2VDaGFy\nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAg\nICAgcmV0dXJuIChjaGFyKSBsb25ndmFsOwogICAgfQoKICAgIHB1YmxpYyBi\neXRlIHJlcGxhY2VCeXRlRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBp\nbnQgaWR4KSB7CiAgICAgICAgcmV0dXJuIChieXRlKSBsb25ndmFsOwogICAg\nfQoKICAgIHB1YmxpYyBzaG9ydCByZXBsYWNlU2hvcnRGaWVsZChQZXJzaXN0\nZW5jZUNhcGFibGUgcGMsIGludCBpZHgpIHsKICAgICAgICByZXR1cm4gKHNo\nb3J0KSBsb25ndmFsOwogICAgfQoKICAgIHB1YmxpYyBpbnQgcmVwbGFjZUlu\ndEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCkgewogICAg\nICAgIHJldHVybiAoaW50KSBsb25ndmFsOwogICAgfQoKICAgIHB1YmxpYyBs\nb25nIHJlcGxhY2VMb25nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBp\nbnQgaWR4KSB7CiAgICAgICAgcmV0dXJuIGxvbmd2YWw7CiAgICB9CgogICAg\ncHVibGljIGZsb2F0IHJlcGxhY2VGbG9hdEZpZWxkKFBlcnNpc3RlbmNlQ2Fw\nYWJsZSBwYywgaW50IGlkeCkgewogICAgICAgIHJldHVybiAoZmxvYXQpIGRi\nbHZhbDsKICAgIH0KCiAgICBwdWJsaWMgZG91YmxlIHJlcGxhY2VEb3VibGVG\naWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgpIHsKICAgICAg\nICByZXR1cm4gZGJsdmFsOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgcmVw\nbGFjZVN0cmluZ0ZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlk\neCkgewogICAgICAgIFN0cmluZyBzdHIgPSAoU3RyaW5nKSBvYmp2YWw7CiAg\nICAgICAgb2JqdmFsID0gbnVsbDsKICAgICAgICByZXR1cm4gc3RyOwogICAg\nfQoKICAgIHB1YmxpYyBPYmplY3QgcmVwbGFjZU9iamVjdEZpZWxkKFBlcnNp\nc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCkgewogICAgICAgIE9iamVjdCBy\nZXQgPSBvYmp2YWw7CiAgICAgICAgb2JqdmFsID0gbnVsbDsKICAgICAgICBy\nZXR1cm4gcmV0OwogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBPcGVuSlBBU3RhdGVNYW5hZ2VyIGlt\ncGxlbWVudGF0aW9uCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLwoKICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoQ2xhc3Mg\nZm9yVHlwZSwgUENTdGF0ZSBzdGF0ZSkgewogICAgICAgIHRocm93IG5ldyBV\nbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGxvYWQoRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAg\nICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9u\nKCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRNYW5hZ2VkSW5zdGFu\nY2UoKSB7CiAgICAgICAgcmV0dXJuIF9wYzsKICAgIH0KCiAgICBwdWJsaWMg\nUGVyc2lzdGVuY2VDYXBhYmxlIGdldFBlcnNpc3RlbmNlQ2FwYWJsZSgpIHsK\nICAgICAgICByZXR1cm4gX3BjOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01l\ndGFEYXRhIGdldE1ldGFEYXRhKCkgewogICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1Ymxp\nYyBPcGVuSlBBU3RhdGVNYW5hZ2VyIGdldE93bmVyKCkgewogICAgICAgIHRo\ncm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAg\nfQoKICAgIHB1YmxpYyBpbnQgZ2V0T3duZXJJbmRleCgpIHsKICAgICAgICB0\naHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0VtYmVkZGVkKCkgewogICAgICAg\nIHJldHVybiBfZW1iZWRkZWQ7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\naXNGbHVzaGVkKCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9w\nZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGlzRmx1c2hlZERpcnR5KCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBv\ncnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIGlzUHJvdmlzaW9uYWwoKSB7CiAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVi\nbGljIEJpdFNldCBnZXRMb2FkZWQoKSB7CiAgICAgICAgcmV0dXJuIF9sb2Fk\nZWQ7CiAgICB9CgogICAgcHVibGljIEJpdFNldCBnZXREaXJ0eSgpIHsKICAg\nICAgICByZXR1cm4gX2RpcnR5OwogICAgfQoKICAgIHB1YmxpYyBCaXRTZXQg\nZ2V0Rmx1c2hlZCgpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRP\ncGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgQml0U2V0\nIGdldFVubG9hZGVkKEZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCkgewogICAg\nICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigp\nOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbmV3UHJveHkoaW50IGZpZWxk\nKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhj\nZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBuZXdGaWVsZFBy\nb3h5KGludCBmaWVsZCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRl\nZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGlzRGVmYXVsdFZhbHVlKGludCBmaWVsZCkgewogICAgICAgIHRocm93\nIG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoK\nICAgIHB1YmxpYyBTdG9yZUNvbnRleHQgZ2V0Q29udGV4dCgpIHsKICAgICAg\nICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgUENTdGF0ZSBnZXRQ\nQ1N0YXRlKCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJh\ndGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0\nT2JqZWN0SWQoKSB7CiAgICAgICAgcmV0dXJuIF9vaWQ7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2V0T2JqZWN0SWQoT2JqZWN0IG9pZCkgewogICAgICAg\nIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGFzc2lnbk9iamVjdElkKGJvb2xl\nYW4gZmx1c2gpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0IGdldElkKCkgewogICAgICAgIHJldHVybiBnZXRPYmpl\nY3RJZCgpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0TG9jaygpIHsK\nICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRp\nb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRMb2NrKE9iamVjdCBs\nb2NrKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9u\nRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TmV4dFZl\ncnNpb24oT2JqZWN0IHZlcnNpb24pIHsKICAgICAgICB0aHJvdyBuZXcgVW5z\ndXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJs\naWMgT2JqZWN0IGdldEltcGxEYXRhKCkgewogICAgICAgIHRocm93IG5ldyBV\nbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1\nYmxpYyBPYmplY3Qgc2V0SW1wbERhdGEoT2JqZWN0IGRhdGEsIGJvb2xlYW4g\nY2FjaGVhYmxlKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3Bl\ncmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\naXNJbXBsRGF0YUNhY2hlYWJsZSgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRJbXBsRGF0YShpbnQgZmll\nbGQpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25F\neGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IHNldEltcGxE\nYXRhKGludCBmaWVsZCwgT2JqZWN0IGRhdGEpIHsKICAgICAgICB0aHJvdyBu\nZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAg\nICBwdWJsaWMgYm9vbGVhbiBpc0ltcGxEYXRhQ2FjaGVhYmxlKGludCBmaWVs\nZCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4\nY2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0SW50ZXJt\nZWRpYXRlKGludCBmaWVsZCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBv\ncnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldEludGVybWVkaWF0ZShpbnQgZmllbGQsIE9iamVjdCBkYXRhKSB7\nCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0\naW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVtb3ZlZChpbnQgZmll\nbGQsIE9iamVjdCByZW1vdmVkLCBib29sZWFuIGtleSkgewogICAgICAgIGRp\ncnR5KGZpZWxkKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBiZWZvcmVS\nZWZyZXNoKGJvb2xlYW4gYWxsKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3Vw\ncG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgZGlydHkoaW50IGZpZWxkKSB7CiAgICAgICAgbG9jaygpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIF9kaXJ0eS5zZXQoZmllbGQpOwogICAg\nICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHVubG9jaygpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdG9yZUJvb2xlYW4oaW50IGZp\nZWxkLCBib29sZWFuIGV4dFZhbCkgewogICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHN0b3JlQnl0ZShpbnQgZmllbGQsIGJ5dGUgZXh0VmFsKSB7CiAg\nICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9u\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RvcmVDaGFyKGludCBmaWVs\nZCwgY2hhciBleHRWYWwpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0\nZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzdG9yZUludChpbnQgZmllbGQsIGludCBleHRWYWwpIHsKICAgICAgICB0\naHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzdG9yZVNob3J0KGludCBmaWVsZCwgc2hv\ncnQgZXh0VmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3Bl\ncmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3Rv\ncmVMb25nKGludCBmaWVsZCwgbG9uZyBleHRWYWwpIHsKICAgICAgICB0aHJv\ndyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzdG9yZUZsb2F0KGludCBmaWVsZCwgZmxvYXQg\nZXh0VmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RvcmVE\nb3VibGUoaW50IGZpZWxkLCBkb3VibGUgZXh0VmFsKSB7CiAgICAgICAgdGhy\nb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc3RvcmVTdHJpbmcoaW50IGZpZWxkLCBTdHJp\nbmcgZXh0VmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3Bl\ncmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3Rv\ncmVPYmplY3QoaW50IGZpZWxkLCBPYmplY3QgZXh0VmFsKSB7CiAgICAgICAg\ndGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc3RvcmUoaW50IGZpZWxkLCBPYmplY3Qg\nZXh0VmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RvcmVG\naWVsZChpbnQgZmllbGQsIE9iamVjdCB2YWx1ZSkgewogICAgICAgIHRocm93\nIG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGZldGNoQm9vbGVhbihpbnQgZmllbGQpIHsK\nICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRp\nb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYnl0ZSBmZXRjaEJ5dGUoaW50IGZp\nZWxkKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9u\nRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIGNoYXIgZmV0Y2hDaGFy\nKGludCBmaWVsZCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9w\nZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBzaG9ydCBm\nZXRjaFNob3J0KGludCBmaWVsZCkgewogICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1Ymxp\nYyBpbnQgZmV0Y2hJbnQoaW50IGZpZWxkKSB7CiAgICAgICAgdGhyb3cgbmV3\nIFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAg\ncHVibGljIGxvbmcgZmV0Y2hMb25nKGludCBmaWVsZCkgewogICAgICAgIHRo\ncm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAg\nfQoKICAgIHB1YmxpYyBmbG9hdCBmZXRjaEZsb2F0KGludCBmaWVsZCkgewog\nICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlv\nbigpOwogICAgfQoKICAgIHB1YmxpYyBkb3VibGUgZmV0Y2hEb3VibGUoaW50\nIGZpZWxkKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBmZXRj\naFN0cmluZyhpbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMg\nT2JqZWN0IGZldGNoT2JqZWN0KGludCBmaWVsZCkgewogICAgICAgIHRocm93\nIG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoK\nICAgIHB1YmxpYyBPYmplY3QgZmV0Y2goaW50IGZpZWxkKSB7CiAgICAgICAg\ndGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAg\nICB9CgogICAgcHVibGljIE9iamVjdCBmZXRjaEZpZWxkKGludCBmaWVsZCwg\nYm9vbGVhbiB0cmFuc2l0aW9ucykgewogICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1Ymxp\nYyBPYmplY3QgZmV0Y2hJbml0aWFsRmllbGQoaW50IGZpZWxkKSB7CiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UmVtb3RlKGludCBmaWVsZCwg\nT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVk\nT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nbG9jaygpIHsKICAgICAgICBpZiAoX2xvY2sgIT0gbnVsbCkKICAgICAgICAg\nICAgX2xvY2subG9jaygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHVubG9j\naygpIHsKICAgICAgICBpZiAoX2xvY2sgIT0gbnVsbCkKICAgICAgICAgICAg\nX2xvY2sudW5sb2NrKCk7CiAgICB9Cn0K\n","encoding":"base64"}

