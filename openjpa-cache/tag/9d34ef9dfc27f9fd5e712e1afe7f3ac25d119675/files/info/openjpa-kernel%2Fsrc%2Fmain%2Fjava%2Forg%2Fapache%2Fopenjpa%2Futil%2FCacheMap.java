{"sha":"d885a5d1e74a40c5343c45de7c10b25db0415683","node_id":"MDQ6QmxvYjIwNjM2NDpkODg1YTVkMWU3NGE0MGM1MzQzYzQ1ZGU3YzEwYjI1ZGIwNDE1Njgz","size":17404,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d885a5d1e74a40c5343c45de7c10b25db0415683","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLnV0aWwuQWJzdHJhY3RDb2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkFi\nc3RyYWN0U2V0OwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9y\ndCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7CmltcG9ydCBqYXZhLnV0aWwuSXRl\ncmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGls\nLlNldDsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29sbGVjdGlvbnMu\nUHJlZGljYXRlOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvbGxlY3Rp\nb25zLml0ZXJhdG9ycy5GaWx0ZXJJdGVyYXRvcjsKaW1wb3J0IG9yZy5hcGFj\naGUuY29tbW9ucy5jb2xsZWN0aW9ucy5pdGVyYXRvcnMuSXRlcmF0b3JDaGFp\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5MUlVNYXA7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuUmVmZXJlbmNl\nTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlNpemVk\nTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLmNvbmN1\ncnJlbnQuQ29uY3VycmVudEhhc2hNYXA7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50UmVmZXJlbmNl\nSGFzaE1hcDsKCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5sb2Nrcy5S\nZWVudHJhbnRMb2NrOwoKLyoqCiAqIEZpeGVkLXNpemUgbWFwIHRoYXQgaGFz\nIGFiaWxpdHkgdG8gcGluL3VucGluIGVudHJpZXMgYW5kIG1vdmUgb3ZlcmZs\nb3cgdG8KICogYSBiYWNraW5nIHNvZnQgbWFwLgogKgogKiBAYXV0aG9yIFBh\ndHJpY2sgTGluc2tleQogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGlj\nIGNsYXNzIENhY2hlTWFwCiAgICBpbXBsZW1lbnRzIE1hcCB7CgogICAgLyoq\nCiAgICAgKiBUaGUgbWFwIGZvciBub24tZXhwaXJlZCBhbmQgbm9uLXBpbm5l\nZCByZWZlcmVuY2VzLgogICAgICovCiAgICBwcm90ZWN0ZWQgZmluYWwgU2l6\nZWRNYXAgY2FjaGVNYXA7CgogICAgLyoqCiAgICAgKiBUaGUgbWFwIGZvciBl\neHBpcmVkIHJlZmVyZW5jZXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBmaW5h\nbCBTaXplZE1hcCBzb2Z0TWFwOwoKICAgIC8qKgogICAgICogVGhlIHNldCBv\nZiBvYmplY3RzIHBpbm5lZCBpbnRvIHRoZSBjYWNoZS4KICAgICAqLwogICAg\ncHJvdGVjdGVkIGZpbmFsIE1hcCBwaW5uZWRNYXA7CgogICAgLy8gbnVtYmVy\nIG9mIHBpbm5lZCB2YWx1ZXMgKG5vdCBpbmNsdWRpbmcga2V5cyBub3QgbWFw\ncGVkIHRvIHZhbHVlcykKICAgIHByaXZhdGUgaW50IF9waW5uZWRTaXplID0g\nMDsKCiAgICBwcml2YXRlIGZpbmFsIFJlZW50cmFudExvY2sgX3dyaXRlTG9j\nayA9IG5ldyBSZWVudHJhbnRMb2NrKCk7CiAgICBwcml2YXRlIGZpbmFsIFJl\nZW50cmFudExvY2sgX3JlYWRMb2NrOwoKICAgIC8qKgogICAgICogQ3JlYXRl\nIGEgbm9uLUxSVSAoYW5kIHRoZXJlZm9yZSBoaWdobHkgY29uY3VycmVudCkg\nY2FjaGUgbWFwIHdpdGggYQogICAgICogc2l6ZSBvZiAxMDAwLgogICAgICov\nCiAgICBwdWJsaWMgQ2FjaGVNYXAoKSB7CiAgICAgICAgdGhpcyhmYWxzZSwg\nMTAwMCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBjYWNoZSBt\nYXAgd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydGllcy4KICAgICAqLwogICAgcHVi\nbGljIENhY2hlTWFwKGJvb2xlYW4gbHJ1LCBpbnQgbWF4KSB7CiAgICAgICAg\ndGhpcyhscnUsIG1heCwgbWF4IC8gMiwgLjc1Rik7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBAZGVwcmVjYXRlZCB1c2Uge0BsaW5rIENhY2hlTWFwI0NhY2hl\nTWFwKGJvb2xlYW4sIGludCwgaW50LCBmbG9hdCwgaW50KX0KICAgICAqIGlu\nc3RlYWQuCiAgICAgKi8KICAgIHB1YmxpYyBDYWNoZU1hcChib29sZWFuIGxy\ndSwgaW50IG1heCwgaW50IHNpemUsIGZsb2F0IGxvYWQpIHsKICAgICAgICB0\naGlzKGxydSwgbWF4LCBzaXplLCBsb2FkLCAxNik7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDcmVhdGUgYSBjYWNoZSBtYXAgd2l0aCB0aGUgZ2l2ZW4gcHJv\ncGVydGllcy4KICAgICAqCiAgICAgKiBAc2luY2UgMS4xLjAKICAgICAqLwog\nICAgcHVibGljIENhY2hlTWFwKGJvb2xlYW4gbHJ1LCBpbnQgbWF4LCBpbnQg\nc2l6ZSwgZmxvYXQgbG9hZCwKICAgICAgICBpbnQgY29uY3VycmVuY3lMZXZl\nbCkgewogICAgICAgIGlmIChzaXplIDwgMCkKICAgICAgICAgICAgc2l6ZSA9\nIDUwMDsKCiAgICAgICAgc29mdE1hcCA9IG5ldyBDb25jdXJyZW50UmVmZXJl\nbmNlSGFzaE1hcChSZWZlcmVuY2VNYXAuSEFSRCwKICAgICAgICAgICAgUmVm\nZXJlbmNlTWFwLlNPRlQsIHNpemUsIGxvYWQpIHsKICAgICAgICAgICAgcHVi\nbGljIHZvaWQgb3ZlcmZsb3dSZW1vdmVkKE9iamVjdCBrZXksIE9iamVjdCB2\nYWx1ZSkgewogICAgICAgICAgICAgICAgc29mdE1hcE92ZXJmbG93UmVtb3Zl\nZChrZXksIHZhbHVlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHVi\nbGljIHZvaWQgdmFsdWVFeHBpcmVkKE9iamVjdCBrZXkpIHsKICAgICAgICAg\nICAgICAgIHNvZnRNYXBWYWx1ZUV4cGlyZWQoa2V5KTsKICAgICAgICAgICAg\nfQogICAgICAgIH07CiAgICAgICAgcGlubmVkTWFwID0gbmV3IENvbmN1cnJl\nbnRIYXNoTWFwKCk7CgogICAgICAgIGlmICghbHJ1KSB7CiAgICAgICAgICAg\nIGNhY2hlTWFwID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwKHNpemUsIGxvYWQp\nIHsKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG92ZXJmbG93UmVtb3Zl\nZChPYmplY3Qga2V5LCBPYmplY3QgdmFsdWUpIHsKICAgICAgICAgICAgICAg\nICAgICBjYWNoZU1hcE92ZXJmbG93UmVtb3ZlZChrZXksIHZhbHVlKTsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgX3Jl\nYWRMb2NrID0gbnVsbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBj\nYWNoZU1hcCA9IG5ldyBMUlVNYXAoc2l6ZSwgbG9hZCkgewogICAgICAgICAg\nICAgICAgcHVibGljIHZvaWQgb3ZlcmZsb3dSZW1vdmVkKE9iamVjdCBrZXks\nIE9iamVjdCB2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIGNhY2hlTWFw\nT3ZlcmZsb3dSZW1vdmVkKGtleSwgdmFsdWUpOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9OwogICAgICAgICAgICBfcmVhZExvY2sgPSBfd3Jp\ndGVMb2NrOwogICAgICAgIH0KICAgICAgICBpZiAobWF4IDwgMCkKICAgICAg\nICAgICAgbWF4ID0gSW50ZWdlci5NQVhfVkFMVUU7CiAgICAgICAgY2FjaGVN\nYXAuc2V0TWF4U2l6ZShtYXgpOwogICAgfQoKICAgIC8qKgogICAgICogQ2Fs\nbGVkIGZyb20ge0BsaW5rIFNpemVkTWFwI292ZXJmbG93UmVtb3ZlZH0gaW4g\ndGhlIGNhY2hlIG1hcC4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgY2Fj\naGVNYXBPdmVyZmxvd1JlbW92ZWQoT2JqZWN0IGtleSwgT2JqZWN0IHZhbHVl\nKSB7CiAgICAgICAgaWYgKHNvZnRNYXAuc2l6ZSgpIDwgc29mdE1hcC5nZXRN\nYXhTaXplKCkpCiAgICAgICAgICAgIHB1dChzb2Z0TWFwLCBrZXksIHZhbHVl\nKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGVudHJ5UmVtb3ZlZChrZXks\nIHZhbHVlLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGxlZCBm\ncm9tIHtAbGluayBTaXplZE1hcCNvdmVyZmxvd1JlbW92ZWR9IGluIHRoZSBz\nb2Z0IG1hcC4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgc29mdE1hcE92\nZXJmbG93UmVtb3ZlZChPYmplY3Qga2V5LCBPYmplY3QgdmFsdWUpIHsKICAg\nICAgICBlbnRyeVJlbW92ZWQoa2V5LCB2YWx1ZSwgdHJ1ZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDYWxsZWQgd2hlbiBhIHZhbHVlIGV4cGlyZXMgZnJv\nbSB0aGUgc29mdCBtYXAuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHNv\nZnRNYXBWYWx1ZUV4cGlyZWQoT2JqZWN0IGtleSkgewogICAgICAgIGVudHJ5\nUmVtb3ZlZChrZXksIG51bGwsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAg\nICogUHV0IHRoZSBnaXZlbiBlbnRyeSBpbnRvIHRoZSBnaXZlbiBtYXAuIEFs\nbG93cyBzdWJjbGFzc2VzIHRvCiAgICAgKiB0YWtlIGFkZGl0aW9uYWwgYWN0\naW9ucy4KICAgICAqLwogICAgcHJvdGVjdGVkIE9iamVjdCBwdXQoTWFwIG1h\ncCwgT2JqZWN0IGtleSwgT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgcmV0dXJu\nIG1hcC5wdXQoa2V5LCB2YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZW1vdmUgdGhlIGdpdmVuIGtleSBmcm9tIHRoZSBnaXZlbiBtYXAuIEFsbG93\ncyBzdWJjbGFzc2VzIHRvCiAgICAgKiB0YWtlIGFkZGl0aW9uYWwgYWN0aW9u\ncy4KICAgICAqLwogICAgcHJvdGVjdGVkIE9iamVjdCByZW1vdmUoTWFwIG1h\ncCwgT2JqZWN0IGtleSkgewogICAgICAgIHJldHVybiBtYXAucmVtb3ZlKGtl\neSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBY3F1aXJlIHJlYWQgbG9jay4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgcmVhZExvY2soKSB7CiAgICAgICAg\naWYgKF9yZWFkTG9jayAhPSBudWxsKQogICAgICAgICAgICBfcmVhZExvY2su\nbG9jaygpOwogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSByZWFkIGxv\nY2suCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlYWRVbmxvY2soKSB7CiAg\nICAgICAgaWYgKF9yZWFkTG9jayAhPSBudWxsKQogICAgICAgICAgICBfcmVh\nZExvY2sudW5sb2NrKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBY3F1aXJl\nIHdyaXRlIGxvY2suCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHdyaXRlTG9j\naygpIHsKICAgICAgICBfd3JpdGVMb2NrLmxvY2soKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJlbGVhc2Ugd3JpdGUgbG9jay4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgd3JpdGVVbmxvY2soKSB7CiAgICAgICAgX3dyaXRlTG9jay51\nbmxvY2soKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBj\nYWNoZSBtYXAgdXNlcyBMUlUgZXZpY3Rpb24uCiAgICAgKi8KICAgIHB1Ymxp\nYyBib29sZWFuIGlzTFJVKCkgewogICAgICAgIHJldHVybiBfcmVhZExvY2sg\nIT0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBtYXhpbXVtIG51\nbWJlciBvZiBoYXJkIHJlZmVyZW5jZXMgdG8gbWFpbnRhaW4sIG9yIC0xIGZv\nciBubyBsaW1pdC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Q2FjaGVT\naXplKGludCBzaXplKSB7CiAgICAgICAgd3JpdGVMb2NrKCk7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgY2FjaGVNYXAuc2V0TWF4U2l6ZSgoc2l6ZSA8\nIDApID8gSW50ZWdlci5NQVhfVkFMVUUgOiBzaXplKTsKICAgICAgICB9IGZp\nbmFsbHkgewogICAgICAgICAgICB3cml0ZVVubG9jaygpOwogICAgICAgIH0K\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBo\nYXJkIHJlZmVyZW5jZXMgdG8gbWFpbnRhaW4sIG9yIC0xIGZvciBubyBsaW1p\ndC4KICAgICAqLwogICAgcHVibGljIGludCBnZXRDYWNoZVNpemUoKSB7CiAg\nICAgICAgaW50IG1heCA9IGNhY2hlTWFwLmdldE1heFNpemUoKTsKICAgICAg\nICByZXR1cm4gKG1heCA9PSBJbnRlZ2VyLk1BWF9WQUxVRSkgPyAtMSA6IG1h\neDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBv\nZiBzb2Z0IHJlZmVyZW5jZXMgdG8gbWFpbnRhaW4sIG9yIC0xIGZvciBubyBs\naW1pdC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0U29mdFJlZmVyZW5j\nZVNpemUoaW50IHNpemUpIHsKICAgICAgICB3cml0ZUxvY2soKTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBzb2Z0TWFwLnNldE1heFNpemUoKHNpemUg\nPCAwKSA/IEludGVnZXIuTUFYX1ZBTFVFIDogc2l6ZSk7CiAgICAgICAgfSBm\naW5hbGx5IHsKICAgICAgICAgICAgd3JpdGVVbmxvY2soKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2Yg\nc29mdCByZWZlcmVuY2VzIHRvIG1haW50YWluLCBvciAtMSBmb3Igbm8gbGlt\naXQuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0U29mdFJlZmVyZW5jZVNp\nemUoKSB7CiAgICAgICAgaW50IG1heCA9IHNvZnRNYXAuZ2V0TWF4U2l6ZSgp\nOwogICAgICAgIHJldHVybiAobWF4ID09IEludGVnZXIuTUFYX1ZBTFVFKSA/\nIC0xIDogbWF4OwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGtleXMgcGlu\nbmVkIGludG8gdGhlIG1hcC4KICAgICAqLwogICAgcHVibGljIFNldCBnZXRQ\naW5uZWRLZXlzKCkgewogICAgICAgIHJlYWRMb2NrKCk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLnVubW9kaWZpYWJs\nZVNldChwaW5uZWRNYXAua2V5U2V0KCkpOwogICAgICAgIH0gZmluYWxseSB7\nCiAgICAgICAgICAgIHJlYWRVbmxvY2soKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBMb2NrcyB0aGUgZ2l2ZW4ga2V5IGFuZCBpdHMgdmFs\ndWUgaW50byB0aGUgbWFwLiBPYmplY3RzIHBpbm5lZCBpbnRvCiAgICAgKiB0\naGUgbWFwIGFyZSBub3QgY291bnRlZCB0b3dhcmRzIHRoZSBtYXhpbXVtIGNh\nY2hlIHNpemUsIGFuZCBhcmUgbmV2ZXIKICAgICAqIGV2aWN0ZWQgaW1wbGlj\naXRseS4gWW91IG1heSBwaW4ga2V5cyBmb3Igd2hpY2ggbm8gdmFsdWUgaXMg\naW4gdGhlIG1hcC4KICAgICAqCiAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhl\nIGdpdm5lIGtleSdzIHZhbHVlIHdhcyBwaW5uZWQ7IGZhbHNlIGlmIG5vIHZh\nbHVlCiAgICAgKiBmb3IgdGhlIGdpdmVuIGtleSBpcyBjYWNoZWQKICAgICAq\nLwogICAgcHVibGljIGJvb2xlYW4gcGluKE9iamVjdCBrZXkpIHsKICAgICAg\nICB3cml0ZUxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBp\nZiB3ZSBkb24ndCBoYXZlIGEgcGlubmVkIG1hcCB3ZSBuZWVkIHRvIGNyZWF0\nZSBvbmU7IGVsc2UgaWYgdGhlCiAgICAgICAgICAgIC8vIHBpbm5lZCBtYXAg\nYWxyZWFkeSBjb250YWlucyB0aGUga2V5LCBub3RoaW5nIHRvIGRvCiAgICAg\nICAgICAgIGlmIChwaW5uZWRNYXAuY29udGFpbnNLZXkoa2V5KSkKICAgICAg\nICAgICAgICAgIHJldHVybiBwaW5uZWRNYXAuZ2V0KGtleSkgIT0gbnVsbDsK\nCiAgICAgICAgICAgIC8vIGNoZWNrIG90aGVyIG1hcHMgZm9yIGtleQogICAg\nICAgICAgICBPYmplY3QgdmFsID0gcmVtb3ZlKGNhY2hlTWFwLCBrZXkpOwog\nICAgICAgICAgICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgICAgICB2\nYWwgPSByZW1vdmUoc29mdE1hcCwga2V5KTsKCiAgICAgICAgICAgIC8vIHBp\nbiBrZXkKICAgICAgICAgICAgcHV0KHBpbm5lZE1hcCwga2V5LCB2YWwpOwog\nICAgICAgICAgICBpZiAodmFsICE9IG51bGwpIHsKICAgICAgICAgICAgICAg\nIF9waW5uZWRTaXplKys7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsK\nICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg\nICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgd3JpdGVVbmxvY2soKTsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBVbmRvIGEgcGlubmluZy4K\nICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gdW5waW4oT2JqZWN0IGtleSkg\newogICAgICAgIHdyaXRlTG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIE9iamVjdCB2YWwgPSByZW1vdmUocGlubmVkTWFwLCBrZXkpOwogICAg\nICAgICAgICBpZiAodmFsICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIC8v\nIHB1dCBiYWNrIGludG8gdW5waW5uZWQgY2FjaGUKICAgICAgICAgICAgICAg\nIHB1dChrZXksIHZhbCk7CiAgICAgICAgICAgICAgICBfcGlubmVkU2l6ZS0t\nOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZmluYWxseSB7\nCiAgICAgICAgICAgIHdyaXRlVW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogSW52b2tlZCB3aGVuIGEga2V5LXZhbHVlIHBhaXIg\naXMgZXZpY3RlZCBmcm9tIHRoaXMgZGF0YQogICAgICogc3RydWN0dXJlLiBU\naGlzIGlzIGludm9rZWQgd2l0aCA8Y29kZT5leHBpcmVkPC9jb2RlPiBzZXQg\ndG8KICAgICAqIDxjb2RlPnRydWU8L2NvZGU+IHdoZW4gYW4gb2JqZWN0IGlz\nIGRyb3BwZWQgYmVjYXVzZSBvZiBzcGFjZQogICAgICogcmVxdWlyZW1lbnRz\nIG9yIHRocm91Z2ggZ2FyYmFnZSBjb2xsZWN0aW9uIG9mIHNvZnQgcmVmZXJl\nbmNlcy4KICAgICAqIEl0IGlzIGludm9rZWQgd2l0aCA8Y29kZT5leHBpcmVk\nPC9jb2RlPiBzZXQgdG8gPGNvZGU+ZmFsc2U8L2NvZGU+CiAgICAgKiB3aGVu\nIGFuIG9iamVjdCBpcyBleHBsaWNpdGx5IHJlbW92ZWQgdmlhIHRoZSB7QGxp\nbmsgI3JlbW92ZX0gb3IKICAgICAqIHtAbGluayAjY2xlYXJ9IG1ldGhvZHMu\nIFRoaXMgbWF5IGJlIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZm9yIGEKICAg\nICAqIGdpdmVuIGVudHJ5LgogICAgICoKICAgICAqIEBwYXJhbSB2YWx1ZSBt\nYXkgYmUgbnVsbCBpZiB0aGUgdmFsdWUgd2FzIGEgc29mdCByZWZlcmVuY2Ug\ndGhhdCBoYXMKICAgICAqIGJlZW4gR0NkCiAgICAgKiBAc2luY2UgMC4yLjUu\nMAogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBlbnRyeVJlbW92ZWQoT2Jq\nZWN0IGtleSwgT2JqZWN0IHZhbHVlLCBib29sZWFuIGV4cGlyZWQpIHsKICAg\nIH0KCiAgICAvKioKICAgICAqIEludm9rZWQgd2hlbiBhbiBlbnRyeSBpcyBh\nZGRlZCB0byB0aGUgY2FjaGUuIFRoaXMgbWF5IGJlIGludm9rZWQKICAgICAq\nIG1vcmUgdGhhbiBvbmNlIGZvciBhbiBlbnRyeS4KICAgICAqLwogICAgcHJv\ndGVjdGVkIHZvaWQgZW50cnlBZGRlZChPYmplY3Qga2V5LCBPYmplY3QgdmFs\ndWUpIHsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldChPYmplY3Qga2V5\nKSB7CiAgICAgICAgcmVhZExvY2soKTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBPYmplY3QgdmFsID0gcGlubmVkTWFwLmdldChrZXkpOwogICAgICAg\nICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4g\ndmFsOwoKICAgICAgICAgICAgdmFsID0gY2FjaGVNYXAuZ2V0KGtleSk7CiAg\nICAgICAgICAgIGlmICh2YWwgPT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nLy8gaWYgd2UgZmluZCB0aGUga2V5IGluIHRoZSBzb2Z0IG1hcCwgbW92ZSBp\ndCBiYWNrIGludG8KICAgICAgICAgICAgICAgIC8vIHRoZSBwcmltYXJ5IG1h\ncAogICAgICAgICAgICAgICAgdmFsID0gc29mdE1hcC5nZXQoa2V5KTsKICAg\nICAgICAgICAgICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAgICAgICAgICAg\nICAgICBwdXQoa2V5LCB2YWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIHJldHVybiB2YWw7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\ncmVhZFVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgT2Jq\nZWN0IHB1dChPYmplY3Qga2V5LCBPYmplY3QgdmFsdWUpIHsKICAgICAgICB3\ncml0ZUxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBpZiB0\naGUga2V5IGlzIHBpbm5lZCwganVzdCBpbnRlcmFjdCBkaXJlY3RseSB3aXRo\nIHRoZSBwaW5uZWQgbWFwCiAgICAgICAgICAgIE9iamVjdCB2YWw7CiAgICAg\nICAgICAgIGlmIChwaW5uZWRNYXAuY29udGFpbnNLZXkoa2V5KSkgewogICAg\nICAgICAgICAgICAgdmFsID0gcHV0KHBpbm5lZE1hcCwga2V5LCB2YWx1ZSk7\nCiAgICAgICAgICAgICAgICBpZiAodmFsID09IG51bGwpIHsKICAgICAgICAg\nICAgICAgICAgICBfcGlubmVkU2l6ZSsrOwogICAgICAgICAgICAgICAgICAg\nIGVudHJ5QWRkZWQoa2V5LCB2YWx1ZSk7CiAgICAgICAgICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICAgICAgICAgIGVudHJ5UmVtb3ZlZChrZXksIHZh\nbCwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIGVudHJ5QWRkZWQoa2V5\nLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBy\nZXR1cm4gdmFsOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBpZiBu\nbyBoYXJkIHJlZnMsIGRvbid0IHB1dCBhbnl0aGluZwogICAgICAgICAgICBp\nZiAoY2FjaGVNYXAuZ2V0TWF4U2l6ZSgpID09IDApCiAgICAgICAgICAgICAg\nICByZXR1cm4gbnVsbDsKCiAgICAgICAgICAgIC8vIG90aGVyd2lzZSwgcHV0\nIHRoZSB2YWx1ZSBpbnRvIHRoZSBtYXAgYW5kIGNsZWFyIGl0IGZyb20gdGhl\nCiAgICAgICAgICAgIC8vIHNvZnQgbWFwCiAgICAgICAgICAgIHZhbCA9IHB1\ndChjYWNoZU1hcCwga2V5LCB2YWx1ZSk7CiAgICAgICAgICAgIGlmICh2YWwg\nPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdmFsID0gcmVtb3ZlKHNvZnRN\nYXAsIGtleSk7CiAgICAgICAgICAgICAgICBpZiAodmFsID09IG51bGwpCiAg\nICAgICAgICAgICAgICAgICAgZW50cnlBZGRlZChrZXksIHZhbHVlKTsKICAg\nICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVudHJ5\nUmVtb3ZlZChrZXksIHZhbCwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAg\nIGVudHJ5QWRkZWQoa2V5LCB2YWx1ZSk7CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlbnRyeVJlbW92\nZWQoa2V5LCB2YWwsIGZhbHNlKTsKICAgICAgICAgICAgICAgIGVudHJ5QWRk\nZWQoa2V5LCB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0\ndXJuIHZhbDsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB3cml0\nZVVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBw\ndXRBbGwoTWFwIG1hcCkgewogICAgICAgIE1hcC5FbnRyeSBlbnRyeTsKICAg\nICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IG1hcC5lbnRyeVNldCgpLml0ZXJh\ndG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGVudHJ5ID0g\nKE1hcC5FbnRyeSkgaXRyLm5leHQoKTsKICAgICAgICAgICAgcHV0KGVudHJ5\nLmdldEtleSgpLCBlbnRyeS5nZXRWYWx1ZSgpKTsKICAgICAgICB9CiAgICB9\nCgogICAgLyoqCiAgICAgKiBJZiA8Y29kZT5rZXk8L2NvZGU+IGlzIHBpbm5l\nZCBpbnRvIHRoZSBjYWNoZSwgdGhlIHBpbiBpcwogICAgICogY2xlYXJlZCBh\nbmQgdGhlIG9iamVjdCBpcyByZW1vdmVkLgogICAgICovCiAgICBwdWJsaWMg\nT2JqZWN0IHJlbW92ZShPYmplY3Qga2V5KSB7CiAgICAgICAgd3JpdGVMb2Nr\nKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gaWYgdGhlIGtleSBp\ncyBwaW5uZWQsIGp1c3QgaW50ZXJhY3QgZGlyZWN0bHkgd2l0aCB0aGUKICAg\nICAgICAgICAgLy8gcGlubmVkIG1hcAogICAgICAgICAgICBPYmplY3QgdmFs\nOwogICAgICAgICAgICBpZiAocGlubmVkTWFwLmNvbnRhaW5zS2V5KGtleSkp\nIHsKICAgICAgICAgICAgICAgIC8vIHJlLXB1dCB3aXRoIG51bGwgdmFsdWU7\nIHdlIHN0aWxsIHdhbnQga2V5IHBpbm5lZAogICAgICAgICAgICAgICAgdmFs\nID0gcHV0KHBpbm5lZE1hcCwga2V5LCBudWxsKTsKICAgICAgICAgICAgICAg\nIGlmICh2YWwgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIF9waW5u\nZWRTaXplLS07CiAgICAgICAgICAgICAgICAgICAgZW50cnlSZW1vdmVkKGtl\neSwgdmFsLCBmYWxzZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICByZXR1cm4gdmFsOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2\nYWwgPSByZW1vdmUoY2FjaGVNYXAsIGtleSk7CiAgICAgICAgICAgIGlmICh2\nYWwgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHZhbCA9IHNvZnRNYXAucmVt\nb3ZlKGtleSk7CiAgICAgICAgICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIGVudHJ5UmVtb3ZlZChrZXksIHZhbCwgZmFsc2UpOwoKICAg\nICAgICAgICAgcmV0dXJuIHZhbDsKICAgICAgICB9IGZpbmFsbHkgewogICAg\nICAgICAgICB3cml0ZVVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIFJlbW92ZXMgcGlubmVkIG9iamVjdHMgYXMgd2VsbCBhcyB1\nbnBpbm5lZCBvbmVzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBjbGVhcigp\nIHsKICAgICAgICB3cml0ZUxvY2soKTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBub3RpZnlFbnRyeVJlbW92YWxzKHBpbm5lZE1hcC5lbnRyeVNldCgp\nKTsKICAgICAgICAgICAgcGlubmVkTWFwLmNsZWFyKCk7CiAgICAgICAgICAg\nIF9waW5uZWRTaXplID0gMDsKCiAgICAgICAgICAgIG5vdGlmeUVudHJ5UmVt\nb3ZhbHMoY2FjaGVNYXAuZW50cnlTZXQoKSk7CiAgICAgICAgICAgIGNhY2hl\nTWFwLmNsZWFyKCk7CgogICAgICAgICAgICBub3RpZnlFbnRyeVJlbW92YWxz\nKHNvZnRNYXAuZW50cnlTZXQoKSk7CiAgICAgICAgICAgIHNvZnRNYXAuY2xl\nYXIoKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB3cml0ZVVu\nbG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIHZvaWQgbm90\naWZ5RW50cnlSZW1vdmFscyhTZXQgc2V0KSB7CiAgICAgICAgTWFwLkVudHJ5\nIGVudHJ5OwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gc2V0Lml0ZXJh\ndG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGVudHJ5ID0g\nKE1hcC5FbnRyeSkgaXRyLm5leHQoKTsKICAgICAgICAgICAgaWYgKGVudHJ5\nLmdldFZhbHVlKCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIGVudHJ5UmVt\nb3ZlZChlbnRyeS5nZXRLZXkoKSwgZW50cnkuZ2V0VmFsdWUoKSwgZmFsc2Up\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgaW50IHNpemUoKSB7CiAg\nICAgICAgcmVhZExvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBy\nZXR1cm4gX3Bpbm5lZFNpemUgKyBjYWNoZU1hcC5zaXplKCkgKyBzb2Z0TWFw\nLnNpemUoKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICByZWFk\nVW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGlzRW1wdHkoKSB7CiAgICAgICAgcmV0dXJuIHNpemUoKSA9PSAwOwogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5zS2V5KE9iamVjdCBrZXkp\nIHsKICAgICAgICByZWFkTG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHJldHVybiBwaW5uZWRNYXAuZ2V0KGtleSkgIT0gbnVsbAogICAgICAg\nICAgICAgICAgfHwgY2FjaGVNYXAuY29udGFpbnNLZXkoa2V5KQogICAgICAg\nICAgICAgICAgfHwgc29mdE1hcC5jb250YWluc0tleShrZXkpOwogICAgICAg\nIH0gZmluYWxseSB7CiAgICAgICAgICAgIHJlYWRVbmxvY2soKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNWYWx1ZShP\nYmplY3QgdmFsKSB7CiAgICAgICAgcmVhZExvY2soKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICByZXR1cm4gcGlubmVkTWFwLmNvbnRhaW5zVmFsdWUo\ndmFsKQogICAgICAgICAgICAgICAgfHwgY2FjaGVNYXAuY29udGFpbnNWYWx1\nZSh2YWwpCiAgICAgICAgICAgICAgICB8fCBzb2Z0TWFwLmNvbnRhaW5zVmFs\ndWUodmFsKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICByZWFk\nVW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBTZXQga2V5\nU2V0KCkgewogICAgICAgIHJldHVybiBuZXcgS2V5U2V0KCk7CiAgICB9Cgog\nICAgcHVibGljIENvbGxlY3Rpb24gdmFsdWVzKCkgewogICAgICAgIHJldHVy\nbiBuZXcgVmFsdWVDb2xsZWN0aW9uKCk7CiAgICB9CgogICAgcHVibGljIFNl\ndCBlbnRyeVNldCgpIHsKICAgICAgICByZXR1cm4gbmV3IEVudHJ5U2V0KCk7\nCiAgICB9CgogICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAg\nICByZWFkTG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVy\nbiAiQ2FjaGVNYXA6IiArIGNhY2hlTWFwLnRvU3RyaW5nKCkgKyAiOjoiCiAg\nICAgICAgICAgICAgICArIHNvZnRNYXAudG9TdHJpbmcoKTsKICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICByZWFkVW5sb2NrKCk7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogVmlldyBvZiB0aGUgZW50cnkgc2V0\nLgogICAgICovCiAgICBwcml2YXRlIGNsYXNzIEVudHJ5U2V0CiAgICAgICAg\nZXh0ZW5kcyBBYnN0cmFjdFNldCB7CgogICAgICAgIHB1YmxpYyBpbnQgc2l6\nZSgpIHsKICAgICAgICAgICAgcmV0dXJuIENhY2hlTWFwLnRoaXMuc2l6ZSgp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gYWRkKE9iamVj\ndCBvKSB7CiAgICAgICAgICAgIE1hcC5FbnRyeSBlbnRyeSA9IChNYXAuRW50\ncnkpIG87CiAgICAgICAgICAgIHB1dChlbnRyeS5nZXRLZXkoKSwgZW50cnku\nZ2V0VmFsdWUoKSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIEl0ZXJhdG9yIGl0ZXJhdG9yKCkgewogICAg\nICAgICAgICByZXR1cm4gbmV3IEVudHJ5SXRlcmF0b3IoRW50cnlJdGVyYXRv\nci5FTlRSWSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVmll\ndyBvZiB0aGUga2V5IHNldC4KICAgICAqLwogICAgcHJpdmF0ZSBjbGFzcyBL\nZXlTZXQKICAgICAgICBleHRlbmRzIEFic3RyYWN0U2V0IHsKCiAgICAgICAg\ncHVibGljIGludCBzaXplKCkgewogICAgICAgICAgICByZXR1cm4gQ2FjaGVN\nYXAudGhpcy5zaXplKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgSXRl\ncmF0b3IgaXRlcmF0b3IoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRW50\ncnlJdGVyYXRvcihFbnRyeUl0ZXJhdG9yLktFWSk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogVmlldyBvZiB0aGUgdmFsdWUgY29sbGVjdGlv\nbi4KICAgICAqLwogICAgcHJpdmF0ZSBjbGFzcyBWYWx1ZUNvbGxlY3Rpb24K\nICAgICAgICBleHRlbmRzIEFic3RyYWN0Q29sbGVjdGlvbiB7CgogICAgICAg\nIHB1YmxpYyBpbnQgc2l6ZSgpIHsKICAgICAgICAgICAgcmV0dXJuIENhY2hl\nTWFwLnRoaXMuc2l6ZSgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIEl0\nZXJhdG9yIGl0ZXJhdG9yKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IEVu\ndHJ5SXRlcmF0b3IoRW50cnlJdGVyYXRvci5WQUxVRSk7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogSXRlcmF0b3Igb3ZlciBhbGwgZW50cmll\ncy4KICAgICAqLwogICAgcHJpdmF0ZSBjbGFzcyBFbnRyeUl0ZXJhdG9yCiAg\nICAgICAgaW1wbGVtZW50cyBJdGVyYXRvciwgUHJlZGljYXRlIHsKCiAgICAg\nICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRU5UUlkgPSAwOwogICAgICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEtFWSA9IDE7CiAgICAgICAgcHVi\nbGljIHN0YXRpYyBmaW5hbCBpbnQgVkFMVUUgPSAyOwoKICAgICAgICBwcml2\nYXRlIGZpbmFsIEl0ZXJhdG9yQ2hhaW4gX2l0ciA9IG5ldyBJdGVyYXRvckNo\nYWluKCk7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBpbnQgX3R5cGU7CgogICAg\nICAgIHB1YmxpYyBFbnRyeUl0ZXJhdG9yKGludCB0eXBlKSB7CiAgICAgICAg\nICAgIF90eXBlID0gdHlwZTsKICAgICAgICAgICAgX2l0ci5hZGRJdGVyYXRv\ncihuZXcgRmlsdGVySXRlcmF0b3IoZ2V0VmlldyhwaW5uZWRNYXApLCB0aGlz\nKSk7CiAgICAgICAgICAgIF9pdHIuYWRkSXRlcmF0b3IoZ2V0VmlldyhjYWNo\nZU1hcCkpOwogICAgICAgICAgICBfaXRyLmFkZEl0ZXJhdG9yKGdldFZpZXco\nc29mdE1hcCkpOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICog\nUmV0dXJuIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIGFwcHJvcHJpYXRlIHZpZXcg\nb2YgdGhlIGdpdmVuIG1hcC4KICAgICAgICAgKi8KICAgICAgICBwcml2YXRl\nIEl0ZXJhdG9yIGdldFZpZXcoTWFwIG0pIHsKICAgICAgICAgICAgaWYgKG0g\nPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAg\nICAgICAgc3dpdGNoIChfdHlwZSkgewogICAgICAgICAgICAgICAgY2FzZSBL\nRVk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0ua2V5U2V0KCkuaXRl\ncmF0b3IoKTsKICAgICAgICAgICAgICAgIGNhc2UgVkFMVUU6CiAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuIG0udmFsdWVzKCkuaXRlcmF0b3IoKTsKICAg\nICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0\ndXJuIG0uZW50cnlTZXQoKS5pdGVyYXRvcigpOwogICAgICAgICAgICB9CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBoYXNOZXh0KCkgewog\nICAgICAgICAgICByZXR1cm4gX2l0ci5oYXNOZXh0KCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgT2JqZWN0IG5leHQoKSB7CiAgICAgICAgICAgIHJl\ndHVybiBfaXRyLm5leHQoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHJlbW92ZSgpIHsKICAgICAgICAgICAgX2l0ci5yZW1vdmUoKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGV2YWx1YXRlKE9iamVj\ndCBvYmopIHsKICAgICAgICAgICAgc3dpdGNoIChfdHlwZSkgewogICAgICAg\nICAgICAgICAgY2FzZSBFTlRSWToKICAgICAgICAgICAgICAgICAgICByZXR1\ncm4gKChNYXAuRW50cnkpIG9iaikuZ2V0VmFsdWUoKSAhPSBudWxsOwoJCQlj\nYXNlIFZBTFVFOgoJCQkJcmV0dXJuIG9iaiAhPSBudWxsOwoJCQlkZWZhdWx0\nOgoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9Cgl9Cn0KCg==\n","encoding":"base64"}

