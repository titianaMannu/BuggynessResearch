{"sha":"5f2991981cc80e5c9959c4fe9d4d2362ff69ce89","node_id":"MDQ6QmxvYjIwNjM2NDo1ZjI5OTE5ODFjYzgwZTVjOTk1OWM0ZmU5ZDRkMjM2MmZmNjljZTg5","size":4381,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5f2991981cc80e5c9959c4fe9d4d2362ff69ce89","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLmlvLlNlcmlhbGl6YWJsZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnV0aWwuUmVmZXJlbmNlTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudFJlZmVyZW5jZUhh\nc2hNYXA7CgovKioKICogSWRlbnRpdHkgY2xhc3MgZXh0ZW5kZWQgYnkgYnVp\nbHRpbiBPcGVuSlBBIGlkZW50aXR5IG9iamVjdHMuCiAqCiAqIEBhdXRob3Ig\nU3RldmUgS2ltCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgT3BlbkpQQUlk\nCiAgICBpbXBsZW1lbnRzIENvbXBhcmFibGUsIFNlcmlhbGl6YWJsZSB7Cgog\nICAgLy8gY2FjaGUgdGhlIHR5cGVzJyBnZW5lcmF0ZWQgaGFzaGNvZGVzCiAg\nICBwcml2YXRlIHN0YXRpYyBDb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcCBf\ndHlwZUNhY2hlID0KICAgICAgICBuZXcgQ29uY3VycmVudFJlZmVyZW5jZUhh\nc2hNYXAoUmVmZXJlbmNlTWFwLldFQUssIFJlZmVyZW5jZU1hcC5IQVJEKTsK\nCiAgICBwcm90ZWN0ZWQgQ2xhc3MgdHlwZTsKICAgIHByb3RlY3RlZCBib29s\nZWFuIHN1YnMgPSB0cnVlOwoKICAgIC8vIHR5cGUgaGFzIGhpcyBiYXNlZCBv\nbiB0aGUgbGVhc3QtZGVyaXZlZCBub24tb2JqZWN0IGNsYXNzIHNvIHRoYXQK\nICAgIC8vIHVzZXItZ2l2ZW4gaWRzIHdpdGggbm9uLWV4YWN0IHR5cGVzIG1h\ndGNoIGlkcyB3aXRoIGV4YWN0IHR5cGVzCiAgICBwcml2YXRlIHRyYW5zaWVu\ndCBpbnQgX3R5cGVIYXNoID0gMDsKCiAgICBwcm90ZWN0ZWQgT3BlbkpQQUlk\nKCkgewogICAgfQoKICAgIHByb3RlY3RlZCBPcGVuSlBBSWQoQ2xhc3MgdHlw\nZSkgewogICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB9CgogICAgcHJv\ndGVjdGVkIE9wZW5KUEFJZChDbGFzcyB0eXBlLCBib29sZWFuIHN1YnMpIHsK\nICAgICAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgICAgIHRoaXMuc3VicyA9\nIHN1YnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHBlcnNp\nc3RlbnQgY2xhc3Mgd2hpY2ggdGhpcyBpZCBpbnN0YW5jZSByZXByZXNlbnRz\nLgogICAgICovCiAgICBwdWJsaWMgQ2xhc3MgZ2V0VHlwZSgpIHsKICAgICAg\nICByZXR1cm4gdHlwZTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\ndGhpcyBvaWQgbWlnaHQgYmUgZm9yIGEgc3ViY2xhc3Mgb2YgdGhlIGdpdmVu\nIHR5cGUuCiAgICAgKiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiBoYXNTdWJjbGFzc2VzKCkgewogICAgICAgIHJldHVy\nbiBzdWJzOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBleGFjdCB0\neXBlIG9mIHRoZSBkZXNjcmliZWQgaW5zdGFuY2Ugb25jZSBpdCBpcyBrbm93\nbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TWFuYWdlZEluc3RhbmNl\nVHlwZShDbGFzcyB0eXBlKSB7CiAgICAgICAgc2V0TWFuYWdlZEluc3RhbmNl\nVHlwZSh0eXBlLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQg\ndGhlIGV4YWN0IHR5cGUgb2YgdGhlIGRlc2NyaWJlZCBpbnN0YW5jZSBvbmNl\nIGl0IGlzIGtub3duLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRNYW5h\nZ2VkSW5zdGFuY2VUeXBlKENsYXNzIHR5cGUsIGJvb2xlYW4gc3Vicykgewog\nICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICAgICAgdGhpcy5zdWJzID0g\nc3ViczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgaWRlbnRp\ndHkgdmFsdWUgYXMgYW4gb2JqZWN0LgogICAgICovCiAgICBwdWJsaWMgYWJz\ndHJhY3QgT2JqZWN0IGdldElkT2JqZWN0KCk7CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdGhlIGlkJ3MgaGFzaCBjb2RlLgogICAgICovCiAgICBwcm90ZWN0\nZWQgYWJzdHJhY3QgaW50IGlkSGFzaCgpOwoKICAgIC8qKgogICAgICogQ29t\ncGFyZSB0aGUgaWQgdG8gdGhlIGlkIG9mIHRoZSBnaXZlbiBpbnN0YW5jZS4K\nICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IGJvb2xlYW4gaWRFcXVh\nbHMoT3BlbkpQQUlkIG90aGVyKTsKCiAgICAvKioKICAgICAqIEdlbmVyYXRl\nIHRoZSBoYXNoY29kZSBmb3IgdGhpcyBJZC4gIENhY2hlIHRoZSB0eXBlJ3Mg\nZ2VuZXJhdGVkIGhhc2hjb2RlCiAgICAgKiBzbyB0aGF0IGl0IGRvZXNuJ3Qg\naGF2ZSB0byBiZSBnZW5lcmF0ZWQgZWFjaCB0aW1lLgogICAgICovCiAgICBw\ndWJsaWMgaW50IGhhc2hDb2RlKCkgewogICAgICAgIGlmIChfdHlwZUhhc2gg\nPT0gMCkgewogICAgICAgICAgICBJbnRlZ2VyIHR5cGVIYXNoSW50ID0gKElu\ndGVnZXIpIF90eXBlQ2FjaGUuZ2V0KHR5cGUpOwogICAgICAgICAgICBpZiAo\ndHlwZUhhc2hJbnQgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgQ2xhc3Mg\nYmFzZSA9IHR5cGU7CiAgICAgICAgICAgICAgICBDbGFzcyBzdXBlcmNsYXNz\nID0gYmFzZS5nZXRTdXBlcmNsYXNzKCk7CiAgICAgICAgICAgICAgICB3aGls\nZSAoc3VwZXJjbGFzcyAhPSBudWxsICYmIHN1cGVyY2xhc3MgIT0gT2JqZWN0\nLmNsYXNzKSB7CiAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGJhc2UuZ2V0\nU3VwZXJjbGFzcygpOwogICAgICAgICAgICAgICAgICAgIHN1cGVyY2xhc3Mg\nPSBiYXNlLmdldFN1cGVyY2xhc3MoKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgIF90eXBlSGFzaCA9IGJhc2UuaGFzaENvZGUoKTsKICAg\nICAgICAgICAgICAgIF90eXBlQ2FjaGUucHV0KHR5cGUsIG5ldyBJbnRlZ2Vy\nKF90eXBlSGFzaCkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICAgICAgX3R5cGVIYXNoID0gdHlwZUhhc2hJbnQuaW50VmFsdWUoKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gX3R5cGVIYXNo\nIF4gaWRIYXNoKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZXF1YWxz\nKE9iamVjdCBvKSB7CiAgICAgICAgaWYgKG8gPT0gdGhpcykKICAgICAgICAg\nICAgcmV0dXJuIHRydWU7CiAgICAgICAgaWYgKG8gPT0gbnVsbCB8fCBnZXRD\nbGFzcygpICE9IG8uZ2V0Q2xhc3MoKSkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwoKICAgICAgICBPcGVuSlBBSWQgaWQgPSAoT3BlbkpQQUlkKSBvOwog\nICAgICAgIHJldHVybiBpZEVxdWFscyhpZCkgJiYgKGlkLnR5cGUuaXNBc3Np\nZ25hYmxlRnJvbSh0eXBlKQogICAgICAgICAgICB8fCAoc3VicyAmJiB0eXBl\nLmlzQXNzaWduYWJsZUZyb20oaWQudHlwZSkpKTsKICAgIH0KCiAgICBwdWJs\naWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAgICAgIHJldHVybiB0eXBlLmdl\ndE5hbWUoKSArICItIiArIGdldElkT2JqZWN0KCk7CiAgICB9CgogICAgcHVi\nbGljIGludCBjb21wYXJlVG8oT2JqZWN0IG90aGVyKSB7CiAgICAgICAgaWYg\nKG90aGVyID09IHRoaXMpCiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAg\nIGlmIChvdGhlciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gMTsKICAg\nICAgICByZXR1cm4gKChDb21wYXJhYmxlKSBnZXRJZE9iamVjdCgpKS5jb21w\nYXJlVG8oKChPcGVuSlBBSWQpIG90aGVyKS4KICAgICAgICAgICAgZ2V0SWRP\nYmplY3QgKCkpOwoJfQp9Cg==\n","encoding":"base64"}

