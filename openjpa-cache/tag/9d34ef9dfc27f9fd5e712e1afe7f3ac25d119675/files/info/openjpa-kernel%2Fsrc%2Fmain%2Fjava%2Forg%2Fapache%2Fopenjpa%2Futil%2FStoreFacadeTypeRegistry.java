{"sha":"2cd29655ee8bb3f2c404ce82835ceecf12123688","node_id":"MDQ6QmxvYjIwNjM2NDoyY2QyOTY1NWVlOGJiM2YyYzQwNGNlODI4MzVjZWVjZjEyMTIzNjg4","size":4139,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2cd29655ee8bb3f2c404ce82835ceecf12123688","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLnV0aWwuTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nU3RvcmVNYW5hZ2VyOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29u\nY3VycmVudEhhc2hNYXA7CgovKioKICogUmVwb3NpdG9yeSBvZiBzdG9yZS1z\ncGVjaWZpYyBmYWNhZGUgY2xhc3Nlcy4gVGhpcyBpcyB1c2VkIGJ5IGZhY2Fk\nZSAKICogaW1wbGVtZW50YXRpb25zIHRvIHdyYXAgc3RvcmUtc3BlY2lmaWMg\nY29tcG9uZW50cyB3aXRob3V0IGtub3dpbmcgCiAqIGFib3V0IGFsbCBwb3Nz\naWJsZSBiYWNrLWVuZHMuCiAqLwpwdWJsaWMgY2xhc3MgU3RvcmVGYWNhZGVU\neXBlUmVnaXN0cnkgewoKICAgIHByaXZhdGUgTWFwIF9pbXBscyA9IG5ldyBD\nb25jdXJyZW50SGFzaE1hcCgpOwoKICAgIC8qKgogICAgICogUmVnaXN0ZXIg\nYSBmYWNhZGUgaW1wbGVtZW50YXRpb24uCiAgICAgKgogICAgICogQHBhcmFt\nIGZhY2FkZVR5cGUgdGhlIGZhY2FkZSBpbnRlcmZhY2UKICAgICAqIEBwYXJh\nbSBzdG9yZVR5cGUgdGhlIHN0b3JlJ3MgCiAgICAgKiB7QGxpbmsgb3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZU1hbmFnZXJ9IHR5cGUsIG9yIG51\nbGwgZm9yIGdlbmVyaWMKICAgICAqIEBwYXJhbSBpbXBsVHlwZSB0aGUgY2xh\nc3MgaW1wbGVtZW50aW5nIHRoZSBmYWNhZGUKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgcmVnaXN0ZXJJbXBsZW1lbnRhdGlvbihDbGFzcyBmYWNhZGVUeXBl\nLCBDbGFzcyBzdG9yZVR5cGUsIAogICAgICAgIENsYXNzIGltcGxUeXBlKSB7\nCiAgICAgICAgT2JqZWN0IGtleSA9IChzdG9yZVR5cGUgPT0gbnVsbCkgPyAo\nT2JqZWN0KSBmYWNhZGVUeXBlIAogICAgICAgICAgICA6IG5ldyBLZXkoZmFj\nYWRlVHlwZSwgc3RvcmVUeXBlKTsKICAgICAgICBfaW1wbHMucHV0KGtleSwg\naW1wbFR5cGUpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHVybiB0\naGUgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBnaXZlbiBmYWNhZGUgYW5kIHN0\nb3JlLgogICAgICoKICAgICAqIEBwYXJhbSBmYWNhZGVUeXBlIHRoZSBmYWNh\nZGUgaW50ZXJmYWNlCiAgICAgKiBAcGFyYW0gc3RvcmVUeXBlIHRoZSBzdG9y\nZSdzIAogICAgICoge0BsaW5rIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nU3RvcmVNYW5hZ2VyfSB0eXBlLCBvciBudWxsIGZvciBnZW5lcmljCiAgICAg\nKiBAcGFyYW0gaW1wbFR5cGUgdGhlIHJlZ2lzdGVyZWQgaW1wbGVtZW50b3IK\nICAgICAqLwogICAgcHVibGljIENsYXNzIGdldEltcGxlbWVudGF0aW9uKENs\nYXNzIGZhY2FkZVR5cGUsIENsYXNzIHN0b3JlVHlwZSkgewogICAgICAgIC8v\nIHRyYXZlcnNlIHN0b3JlIHR5cGUgaGllcmFyY2h5IHRvIHN0b3JlIG1hbmFn\nZXIgdG8gZmluZCBtb3N0IHNwZWNpZmljCiAgICAgICAgLy8gc3RvcmUgYXZh\naWFsYmxlCiAgICAgICAgQ2xhc3MgaW1wbDsKICAgICAgICBmb3IgKDsgc3Rv\ncmVUeXBlICE9IG51bGwgJiYgc3RvcmVUeXBlICE9IFN0b3JlTWFuYWdlci5j\nbGFzczsgCiAgICAgICAgICAgIHN0b3JlVHlwZSA9IHN0b3JlVHlwZS5nZXRT\ndXBlcmNsYXNzKCkpIHsKICAgICAgICAgICAgaW1wbCA9IChDbGFzcykgX2lt\ncGxzLmdldChuZXcgS2V5KGZhY2FkZVR5cGUsIHN0b3JlVHlwZSkpOwogICAg\nICAgICAgICBpZiAoaW1wbCAhPSBudWxsKQogICAgICAgICAgICAgICAgcmV0\ndXJuIGltcGw7IAogICAgICAgIH0gICAgCiAgICAgICAgcmV0dXJuIChDbGFz\ncykgX2ltcGxzLmdldChmYWNhZGVUeXBlKTsKICAgIH0KICAgIAogICAgLyoq\nCiAgICAgKiBSZXR1cm4gdGhlIGltcGxlbWVudGF0aW9uIGZvciB0aGUgZ2l2\nZW4gZmFjYWRlIGFuZCBzdG9yZS4gSWYgbm8gCiAgICAgKiByZWdpc3RlcmVk\nIGltcGxlbWVudGF0aW9uIGlzIGZvdW5kIHRoZW4gcmV0dXJucyB0aGUgZ2l2\nZW4gZGVmYXVsdCB0eXBlCiAgICAgKiBwcm92aWRlZCBpdCB0aGUgZmFjYWRl\nIHR5cGUgaXMgYXNzaWduYWJsZSBmcm9tIHRoZSBkZWFmdWx0IHR5cGUuCiAg\nICAgKgogICAgICogQHBhcmFtIGZhY2FkZVR5cGUgdGhlIGZhY2FkZSBpbnRl\ncmZhY2UKICAgICAqIEBwYXJhbSBzdG9yZVR5cGUgdGhlIHN0b3JlJ3MgCiAg\nICAgKiB7QGxpbmsgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZU1h\nbmFnZXJ9IHR5cGUsIG9yIG51bGwgZm9yIGdlbmVyaWMKICAgICAqIEBwYXJh\nbSBpbXBsVHlwZSB0aGUgcmVnaXN0ZXJlZCBpbXBsZW1lbnRvcgogICAgICog\nQHBhcmFtIGRlZmF1bHRUeXBlIGNsYXNzIGlmIG5vIHJlZ2lzdGVyZWQgaW1w\nbGVtZW50YXRpb24gaXMgYXZhaWxhYmxlLgogICAgICovCiAgICBwdWJsaWMg\nQ2xhc3MgZ2V0SW1wbGVtZW50YXRpb24oQ2xhc3MgZmFjYWRlVHlwZSwgQ2xh\nc3Mgc3RvcmVUeXBlLCAKICAgIAlDbGFzcyBkZWZhdWx0VHlwZSkgewogICAg\nCUNsYXNzIHJlc3VsdCA9IGdldEltcGxlbWVudGF0aW9uKGZhY2FkZVR5cGUs\nIHN0b3JlVHlwZSk7CiAgICAJaWYgKHJlc3VsdCA9PSBudWxsKQogICAgCQly\nZXN1bHQgPSBkZWZhdWx0VHlwZTsKICAgIAlpZiAoZmFjYWRlVHlwZSA9PSBu\ndWxsIHx8ICFmYWNhZGVUeXBlLmlzQXNzaWduYWJsZUZyb20ocmVzdWx0KSkK\nICAgIAkJdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAJcmV0\ndXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIExvb2t1cCBrZXkg\nZm9yIGZhY2FkZStzdG9yZSBoYXNoLgogICAgICovCiAgICBwcml2YXRlIHN0\nYXRpYyBjbGFzcyBLZXkgewogICAgICAgIHB1YmxpYyBmaW5hbCBDbGFzcyBf\nZmFjYWRlVHlwZTsKICAgICAgICBwdWJsaWMgZmluYWwgQ2xhc3MgX3N0b3Jl\nVHlwZTsKCiAgICAgICAgcHVibGljIEtleShDbGFzcyBmYWNhZGVUeXBlLCBD\nbGFzcyBzdG9yZVR5cGUpIHsKICAgICAgICAgICAgX2ZhY2FkZVR5cGUgPSBm\nYWNhZGVUeXBlOwogICAgICAgICAgICBfc3RvcmVUeXBlID0gc3RvcmVUeXBl\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsK\nICAgICAgICAgICAgcmV0dXJuIF9mYWNhZGVUeXBlLmhhc2hDb2RlKCkgXiBf\nc3RvcmVUeXBlLmhhc2hDb2RlKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90aGVyKSB7CiAgICAgICAgICAg\nIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAgICAgICAgICAgcmV0dXJuIHRy\ndWU7CiAgICAgICAgICAgIEtleSBrID0gKEtleSkgb3RoZXI7CiAgICAgICAg\nICAgIHJldHVybiBfZmFjYWRlVHlwZSA9PSBrLl9mYWNhZGVUeXBlICYmIF9z\ndG9yZVR5cGUgPT0gay5fc3RvcmVUeXBlOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

