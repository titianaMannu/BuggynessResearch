{"sha":"55d9a2699e2fa0068e1554cb011b46595a15a602","node_id":"MDQ6QmxvYjIwNjM2NDo1NWQ5YTI2OTllMmZhMDA2OGUxNTU0Y2IwMTFiNDY1OTVhMTVhNjAy","size":4146,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/55d9a2699e2fa0068e1554cb011b46595a15a602","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\namF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwoKaW1wb3J0IG9yZy5h\ncGFjaGUuY29tbW9ucy5sYW5nLk9iamVjdFV0aWxzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5SZWZlcmVuY2VNYXA7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudC5D\nb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcDsKCi8qKgogKiBBbiBvYmplY3Qg\ne0BsaW5rIFZhbHVlfS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1\nYmxpYyBjbGFzcyBPYmplY3RWYWx1ZSBleHRlbmRzIFZhbHVlIHsKCiAgICBw\ncml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXpl\nci5mb3JQYWNrYWdlCiAgICAgICAgKE9iamVjdFZhbHVlLmNsYXNzKTsKCiAg\nICAvLyBjYWNoZSB0aGUgdHlwZXMnIGNsYXNzbG9hZGVyCiAgICBwcml2YXRl\nIHN0YXRpYyBDb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcCBfY2xhc3Nsb2Fk\nZXJDYWNoZSA9CiAgICAgICAgbmV3IENvbmN1cnJlbnRSZWZlcmVuY2VIYXNo\nTWFwKFJlZmVyZW5jZU1hcC5IQVJELCBSZWZlcmVuY2VNYXAuV0VBSyk7Cgog\nICAgcHJpdmF0ZSBPYmplY3QgX3ZhbHVlID0gbnVsbDsKCiAgICBwdWJsaWMg\nT2JqZWN0VmFsdWUoU3RyaW5nIHByb3ApIHsKICAgICAgICBzdXBlcihwcm9w\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBpbnRlcm5hbCB2YWx1ZS4K\nICAgICAqLwogICAgcHVibGljIE9iamVjdCBnZXQoKSB7CiAgICAgICAgcmV0\ndXJuIF92YWx1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBpbnRlcm5h\nbCB2YWx1ZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0KE9iamVjdCBv\nYmopIHsKICAgICAgICBzZXQob2JqLCBmYWxzZSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgaW50ZXJuYWwgdmFsdWUuCiAgICAgKgogICAgICogQHBh\ncmFtIGRlcml2ZWQgaWYgdHJ1ZSwgdGhpcyB2YWx1ZSB3YXMgZGVyaXZlZCBm\ncm9tIG90aGVyIHByb3BlcnRpZXMKICAgICAqLwogICAgcHVibGljIHZvaWQg\nc2V0KE9iamVjdCBvYmosIGJvb2xlYW4gZGVyaXZlZCkgewogICAgICAgIGlm\nICghZGVyaXZlZCkgYXNzZXJ0Q2hhbmdlYWJsZSgpOwogICAgICAgIE9iamVj\ndCBvbGRWYWx1ZSA9IF92YWx1ZTsKICAgICAgICBfdmFsdWUgPSBvYmo7CiAg\nICAgICAgaWYgKCFkZXJpdmVkICYmICFPYmplY3RVdGlscy5lcXVhbHMob2Jq\nLCBvbGRWYWx1ZSkpIHsKICAgICAgICAgICAgb2JqZWN0Q2hhbmdlZCgpOwog\nICAgICAgICAgICB2YWx1ZUNoYW5nZWQoKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBJbnN0YW50aWF0ZSB0aGUgb2JqZWN0IGFzIGFuIGlu\nc3RhbmNlIG9mIHRoZSBnaXZlbiBjbGFzcy4gRXF1aXZhbGVudAogICAgICog\ndG8gPGNvZGU+aW5zdGFudGlhdGUodHlwZSwgY29uZiwgdHJ1ZSk8L2NvZGU+\nLgogICAgICovCiAgICBwdWJsaWMgT2JqZWN0IGluc3RhbnRpYXRlKENsYXNz\nIHR5cGUsIENvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIHJldHVybiBp\nbnN0YW50aWF0ZSh0eXBlLCBjb25mLCB0cnVlKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEluc3RhbnRpYXRlIHRoZSBvYmplY3QgYXMgYW4gaW5zdGFuY2Ug\nb2YgdGhlIGdpdmVuIGNsYXNzLgogICAgICovCiAgICBwdWJsaWMgT2JqZWN0\nIGluc3RhbnRpYXRlKENsYXNzIHR5cGUsIENvbmZpZ3VyYXRpb24gY29uZiwg\nYm9vbGVhbiBmYXRhbCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRl\nZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIC8qKgogICAgICog\nQWxsb3cgc3ViY2xhc3NlcyB0byBpbnN0YW50aWF0ZSBhZGRpdGlvbmFsIHBs\ndWdpbnMuIFRoaXMgbWV0aG9kIGRvZXMKICAgICAqIG5vdCBwZXJmb3JtIGNv\nbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBPYmplY3QgbmV3SW5z\ndGFuY2UoU3RyaW5nIGNsc05hbWUsIENsYXNzIHR5cGUsIENvbmZpZ3VyYXRp\nb24gY29uZiwKICAgICAgICAgICAgYm9vbGVhbiBmYXRhbCkgewogICAgICAg\nIENsYXNzTG9hZGVyIGNsID0gKENsYXNzTG9hZGVyKSBfY2xhc3Nsb2FkZXJD\nYWNoZS5nZXQodHlwZSk7CiAgICAgICAgaWYgKGNsID09IG51bGwpIHsKICAg\nICAgICAgICAgY2wgPSAoQ2xhc3NMb2FkZXIpIEFjY2Vzc0NvbnRyb2xsZXIu\nZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIu\nZ2V0Q2xhc3NMb2FkZXJBY3Rpb24odHlwZSkpOwogICAgICAgICAgICBpZiAo\nY2wgPT0gbnVsbCkgeyAgLy8gU3lzdGVtIGNsYXNzbG9hZGVyIGlzIHJldHVy\nbmVkIGFzIG51bGwKICAgICAgICAgICAgICAgIGNsID0gKENsYXNzTG9hZGVy\nKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAg\nICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRTeXN0ZW1DbGFzc0xvYWRlckFj\ndGlvbigpKTsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NsYXNzbG9h\nZGVyQ2FjaGUucHV0KHR5cGUsIGNsKTsKICAgICAgICB9CiAgICAgICAgcmV0\ndXJuIENvbmZpZ3VyYXRpb25zLm5ld0luc3RhbmNlKGNsc05hbWUsIHRoaXMs\nIGNvbmYsIGNsLCBmYXRhbCk7CiAgICB9CgogICAgcHVibGljIENsYXNzIGdl\ndFZhbHVlVHlwZSgpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmNsYXNzOwog\nICAgfQoKICAgIC8qKgogICAgICogSW1wbGVtZW50IHRoaXMgbWV0aG9kIHRv\nIHN5bmNocm9uaXplIGludGVybmFsIGRhdGEgd2l0aCB0aGUgbmV3CiAgICAg\nKiBvYmplY3QgdmFsdWUuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIG9i\namVjdENoYW5nZWQoKSB7CiAgICB9CgogICAgcHJvdGVjdGVkIFN0cmluZyBn\nZXRJbnRlcm5hbFN0cmluZygpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAg\nIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRJbnRlcm5hbFN0cmluZyhTdHJp\nbmcgc3RyKSB7CiAgICAgICAgaWYgKHN0ciA9PSBudWxsKQogICAgICAgICAg\nICBzZXQobnVsbCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICB0aHJvdyBu\nZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0KCJjYW50LXNl\ndC1zdHJpbmciLAogICAgICAgICAgICAgICAgZ2V0UHJvcGVydHkoKSkuZ2V0\nTWVzc2FnZSgpKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRJbnRl\ncm5hbE9iamVjdChPYmplY3Qgb2JqKSB7CiAgICAgICAgc2V0KG9iaik7CiAg\nICB9Cn0K\n","encoding":"base64"}

