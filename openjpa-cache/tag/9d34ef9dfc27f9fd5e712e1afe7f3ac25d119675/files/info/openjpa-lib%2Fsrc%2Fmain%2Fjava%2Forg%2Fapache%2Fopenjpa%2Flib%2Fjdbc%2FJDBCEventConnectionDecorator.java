{"sha":"b9714b1281cd241dee2d21bf4cc166e318db0b91","node_id":"MDQ6QmxvYjIwNjM2NDpiOTcxNGIxMjgxY2QyNDFkZWUyZDIxYmY0Y2MxNjZlMzE4ZGIwYjkx","size":10488,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b9714b1281cd241dee2d21bf4cc166e318db0b91","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpkYmM7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlByZXBhcmVk\nU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0OwppbXBvcnQg\namF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuU3RhdGVt\nZW50OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5jb25j\ndXJyZW50LkFic3RyYWN0Q29uY3VycmVudEV2ZW50TWFuYWdlcjsKCi8qKgog\nKiBNYW5hZ2VzIHRoZSBmaXJpbmcgb2Yge0BsaW5rIEpEQkNFdmVudH1zLgog\nKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJs\naWMgY2xhc3MgSkRCQ0V2ZW50Q29ubmVjdGlvbkRlY29yYXRvciBleHRlbmRz\nIEFic3RyYWN0Q29uY3VycmVudEV2ZW50TWFuYWdlcgogICAgaW1wbGVtZW50\ncyBDb25uZWN0aW9uRGVjb3JhdG9yIHsKCiAgICBwdWJsaWMgQ29ubmVjdGlv\nbiBkZWNvcmF0ZShDb25uZWN0aW9uIGNvbm4pIHsKICAgICAgICBpZiAoIWhh\nc0xpc3RlbmVycygpKQogICAgICAgICAgICByZXR1cm4gY29ubjsKICAgICAg\nICByZXR1cm4gbmV3IEV2ZW50Q29ubmVjdGlvbihjb25uKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIEZpcmUgdGhlIGdpdmVuIGV2ZW50IHRvIGFsbCBsaXN0\nZW5lcnMuIFByZXZlbnRzIGNyZWF0aW9uIG9mIGFuCiAgICAgKiBldmVudCBv\nYmplY3Qgd2hlbiB0aGVyZSBhcmUgbm8gbGlzdGVuZXJzLgogICAgICovCiAg\nICBwcml2YXRlIEpEQkNFdmVudCBmaXJlRXZlbnQoQ29ubmVjdGlvbiBzb3Vy\nY2UsIHNob3J0IHR5cGUsCiAgICAgICAgSkRCQ0V2ZW50IGFzc29jaWF0ZWRF\ndmVudCwgU3RhdGVtZW50IHN0bW50LCBTdHJpbmcgc3FsKSB7CiAgICAgICAg\naWYgKCFoYXNMaXN0ZW5lcnMoKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7\nCgogICAgICAgIEpEQkNFdmVudCBldmVudCA9IG5ldyBKREJDRXZlbnQoc291\ncmNlLCB0eXBlLCBhc3NvY2lhdGVkRXZlbnQsCiAgICAgICAgICAgIHN0bW50\nLCBzcWwpOwogICAgICAgIGZpcmVFdmVudChldmVudCk7CiAgICAgICAgcmV0\ndXJuIGV2ZW50OwogICAgfQoKICAgIC8qKgogICAgICogRmlyZSB0aGUgZ2l2\nZW4gZXZlbnQgdG8gYWxsIGxpc3RlbmVycy4KICAgICAqLwogICAgcHJvdGVj\ndGVkIHZvaWQgZmlyZUV2ZW50KE9iamVjdCBldmVudCwgT2JqZWN0IGxpc3Rl\nbmVyKSB7CiAgICAgICAgSkRCQ0xpc3RlbmVyIGxpc3RlbiA9IChKREJDTGlz\ndGVuZXIpIGxpc3RlbmVyOwogICAgICAgIEpEQkNFdmVudCBldiA9IChKREJD\nRXZlbnQpIGV2ZW50OwogICAgICAgIHN3aXRjaCAoZXYuZ2V0VHlwZSgpKSB7\nCiAgICAgICAgICAgIGNhc2UgSkRCQ0V2ZW50LkJFRk9SRV9QUkVQQVJFX1NU\nQVRFTUVOVDoKICAgICAgICAgICAgICAgIGxpc3Rlbi5iZWZvcmVQcmVwYXJl\nU3RhdGVtZW50KGV2KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICBjYXNlIEpEQkNFdmVudC5BRlRFUl9QUkVQQVJFX1NUQVRFTUVOVDoK\nICAgICAgICAgICAgICAgIGxpc3Rlbi5hZnRlclByZXBhcmVTdGF0ZW1lbnQo\nZXYpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2Ug\nSkRCQ0V2ZW50LkJFRk9SRV9DUkVBVEVfU1RBVEVNRU5UOgogICAgICAgICAg\nICAgICAgbGlzdGVuLmJlZm9yZUNyZWF0ZVN0YXRlbWVudChldik7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKREJDRXZlbnQu\nQUZURVJfQ1JFQVRFX1NUQVRFTUVOVDoKICAgICAgICAgICAgICAgIGxpc3Rl\nbi5hZnRlckNyZWF0ZVN0YXRlbWVudChldik7CiAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgY2FzZSBKREJDRXZlbnQuQkVGT1JFX0VYRUNV\nVEVfU1RBVEVNRU5UOgogICAgICAgICAgICAgICAgbGlzdGVuLmJlZm9yZUV4\nZWN1dGVTdGF0ZW1lbnQoZXYpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgIGNhc2UgSkRCQ0V2ZW50LkFGVEVSX0VYRUNVVEVfU1RBVEVN\nRU5UOgogICAgICAgICAgICAgICAgbGlzdGVuLmFmdGVyRXhlY3V0ZVN0YXRl\nbWVudChldik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nY2FzZSBKREJDRXZlbnQuQkVGT1JFX0NPTU1JVDoKICAgICAgICAgICAgICAg\nIGxpc3Rlbi5iZWZvcmVDb21taXQoZXYpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIGNhc2UgSkRCQ0V2ZW50LkFGVEVSX0NPTU1JVDoK\nICAgICAgICAgICAgICAgIGxpc3Rlbi5hZnRlckNvbW1pdChldik7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKREJDRXZlbnQu\nQkVGT1JFX1JPTExCQUNLOgogICAgICAgICAgICAgICAgbGlzdGVuLmJlZm9y\nZVJvbGxiYWNrKGV2KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICBjYXNlIEpEQkNFdmVudC5BRlRFUl9ST0xMQkFDSzoKICAgICAgICAg\nICAgICAgIGxpc3Rlbi5hZnRlclJvbGxiYWNrKGV2KTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEpEQkNFdmVudC5BRlRFUl9D\nT05ORUNUOgogICAgICAgICAgICAgICAgbGlzdGVuLmFmdGVyQ29ubmVjdChl\ndik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBK\nREJDRXZlbnQuQkVGT1JFX0NMT1NFOgogICAgICAgICAgICAgICAgbGlzdGVu\nLmJlZm9yZUNsb3NlKGV2KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEZpcmVzIGV2ZW50cyBhcyBh\ncHByb3ByaWF0ZS4KICAgICAqLwogICAgcHJpdmF0ZSBjbGFzcyBFdmVudENv\nbm5lY3Rpb24gZXh0ZW5kcyBEZWxlZ2F0aW5nQ29ubmVjdGlvbiB7CgogICAg\nICAgIHB1YmxpYyBFdmVudENvbm5lY3Rpb24oQ29ubmVjdGlvbiBjb25uKSB7\nCiAgICAgICAgICAgIHN1cGVyKGNvbm4pOwogICAgICAgICAgICBmaXJlRXZl\nbnQoZ2V0RGVsZWdhdGUoKSwgSkRCQ0V2ZW50LkFGVEVSX0NPTk5FQ1QsIG51\nbGwsIG51bGwsIG51bGwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZv\naWQgY29tbWl0KCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAg\nIEpEQkNFdmVudCBiZWZvcmUgPSBmaXJlRXZlbnQoZ2V0RGVsZWdhdGUoKSwK\nICAgICAgICAgICAgICAgIEpEQkNFdmVudC5CRUZPUkVfQ09NTUlULCBudWxs\nLCBudWxsLCBudWxsKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgIHN1cGVyLmNvbW1pdCgpOwogICAgICAgICAgICB9IGZpbmFsbHkgewog\nICAgICAgICAgICAgICAgZmlyZUV2ZW50KGdldERlbGVnYXRlKCksIEpEQkNF\ndmVudC5BRlRFUl9DT01NSVQsIGJlZm9yZSwKICAgICAgICAgICAgICAgICAg\nICBudWxsLCBudWxsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIHZvaWQgcm9sbGJhY2soKSB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICAgICAgSkRCQ0V2ZW50IGJlZm9yZSA9IGZpcmVFdmVudChn\nZXREZWxlZ2F0ZSgpLAogICAgICAgICAgICAgICAgSkRCQ0V2ZW50LkJFRk9S\nRV9ST0xMQkFDSywgbnVsbCwgbnVsbCwgbnVsbCk7CiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICBzdXBlci5yb2xsYmFjaygpOwogICAgICAg\nICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgZmlyZUV2ZW50KGdl\ndERlbGVnYXRlKCksIEpEQkNFdmVudC5BRlRFUl9ST0xMQkFDSywgYmVmb3Jl\nLAogICAgICAgICAgICAgICAgICAgIG51bGwsIG51bGwpOwogICAgICAgICAg\nICB9CiAgICAgICAgfQoKICAgICAgICBwcm90ZWN0ZWQgU3RhdGVtZW50IGNy\nZWF0ZVN0YXRlbWVudChib29sZWFuIHdyYXApIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgICAgICBKREJDRXZlbnQgYmVmb3JlID0gZmlyZUV2ZW50\nKGdldERlbGVnYXRlKCksCiAgICAgICAgICAgICAgICBKREJDRXZlbnQuQkVG\nT1JFX0NSRUFURV9TVEFURU1FTlQsIG51bGwsIG51bGwsIG51bGwpOwogICAg\nICAgICAgICBTdGF0ZW1lbnQgc3RtbnQgPSBudWxsOwogICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgc3RtbnQgPSBuZXcgRXZlbnRTdGF0ZW1l\nbnQoc3VwZXIuY3JlYXRlU3RhdGVtZW50KGZhbHNlKSwKICAgICAgICAgICAg\nICAgICAgICBFdmVudENvbm5lY3Rpb24udGhpcyk7CiAgICAgICAgICAgIH0g\nZmluYWxseSB7CiAgICAgICAgICAgICAgICBmaXJlRXZlbnQoZ2V0RGVsZWdh\ndGUoKSwgSkRCQ0V2ZW50LkFGVEVSX0NSRUFURV9TVEFURU1FTlQsCiAgICAg\nICAgICAgICAgICAgICAgYmVmb3JlLCBzdG1udCwgbnVsbCk7CiAgICAgICAg\nICAgIH0KICAgICAgICAgICAgcmV0dXJuIHN0bW50OwogICAgICAgIH0KCiAg\nICAgICAgcHJvdGVjdGVkIFN0YXRlbWVudCBjcmVhdGVTdGF0ZW1lbnQoaW50\nIHJzVHlwZSwgaW50IHJzQ29uY3VyLAogICAgICAgICAgICBib29sZWFuIHdy\nYXApIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBKREJDRXZl\nbnQgYmVmb3JlID0gZmlyZUV2ZW50KGdldERlbGVnYXRlKCksCiAgICAgICAg\nICAgICAgICBKREJDRXZlbnQuQkVGT1JFX0NSRUFURV9TVEFURU1FTlQsIG51\nbGwsIG51bGwsIG51bGwpOwogICAgICAgICAgICBTdGF0ZW1lbnQgc3RtbnQg\nPSBudWxsOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc3Rt\nbnQgPSBuZXcgRXZlbnRTdGF0ZW1lbnQoc3VwZXIuY3JlYXRlU3RhdGVtZW50\nCiAgICAgICAgICAgICAgICAgICAgKHJzVHlwZSwgcnNDb25jdXIsIGZhbHNl\nKSwgRXZlbnRDb25uZWN0aW9uLnRoaXMpOwogICAgICAgICAgICB9IGZpbmFs\nbHkgewogICAgICAgICAgICAgICAgZmlyZUV2ZW50KGdldERlbGVnYXRlKCks\nIEpEQkNFdmVudC5BRlRFUl9DUkVBVEVfU1RBVEVNRU5ULAogICAgICAgICAg\nICAgICAgICAgIGJlZm9yZSwgc3RtbnQsIG51bGwpOwogICAgICAgICAgICB9\nCiAgICAgICAgICAgIHJldHVybiBzdG1udDsKICAgICAgICB9CgogICAgICAg\nIHByb3RlY3RlZCBQcmVwYXJlZFN0YXRlbWVudCBwcmVwYXJlU3RhdGVtZW50\nKFN0cmluZyBzcWwsIGJvb2xlYW4gd3JhcCkKICAgICAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIEpEQkNFdmVudCBiZWZvcmUg\nPSBmaXJlRXZlbnQoZ2V0RGVsZWdhdGUoKSwKICAgICAgICAgICAgICAgIEpE\nQkNFdmVudC5CRUZPUkVfUFJFUEFSRV9TVEFURU1FTlQsIG51bGwsIG51bGws\nIHNxbCk7CiAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bW50ID0g\nbnVsbDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHN0bW50\nID0gbmV3IEV2ZW50UHJlcGFyZWRTdGF0ZW1lbnQoc3VwZXIucHJlcGFyZVN0\nYXRlbWVudAogICAgICAgICAgICAgICAgICAgIChzcWwsIGZhbHNlKSwgRXZl\nbnRDb25uZWN0aW9uLnRoaXMsIHNxbCk7CiAgICAgICAgICAgIH0gZmluYWxs\neSB7CiAgICAgICAgICAgICAgICBmaXJlRXZlbnQoZ2V0RGVsZWdhdGUoKSwg\nSkRCQ0V2ZW50LkFGVEVSX1BSRVBBUkVfU1RBVEVNRU5ULAogICAgICAgICAg\nICAgICAgICAgIGJlZm9yZSwgc3RtbnQsIHNxbCk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgcmV0dXJuIHN0bW50OwogICAgICAgIH0KCiAgICAgICAg\ncHJvdGVjdGVkIFByZXBhcmVkU3RhdGVtZW50IHByZXBhcmVTdGF0ZW1lbnQo\nU3RyaW5nIHNxbCwgaW50IHJzVHlwZSwKICAgICAgICAgICAgaW50IHJzQ29u\nY3VyLCBib29sZWFuIHdyYXApIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgICAgICBKREJDRXZlbnQgYmVmb3JlID0gZmlyZUV2ZW50KGdldERlbGVn\nYXRlKCksCiAgICAgICAgICAgICAgICBKREJDRXZlbnQuQkVGT1JFX1BSRVBB\nUkVfU1RBVEVNRU5ULCBudWxsLCBudWxsLCBzcWwpOwogICAgICAgICAgICBQ\ncmVwYXJlZFN0YXRlbWVudCBzdG1udCA9IG51bGw7CiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICBzdG1udCA9IG5ldyBFdmVudFByZXBhcmVk\nU3RhdGVtZW50KHN1cGVyLnByZXBhcmVTdGF0ZW1lbnQKICAgICAgICAgICAg\nICAgICAgICAoc3FsLCByc1R5cGUsIHJzQ29uY3VyLCBmYWxzZSksIEV2ZW50\nQ29ubmVjdGlvbi50aGlzLCBzcWwpOwogICAgICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICAgICAgZmlyZUV2ZW50KGdldERlbGVnYXRlKCksIEpE\nQkNFdmVudC5BRlRFUl9QUkVQQVJFX1NUQVRFTUVOVCwKICAgICAgICAgICAg\nICAgICAgICBiZWZvcmUsIHN0bW50LCBzcWwpOwogICAgICAgICAgICB9CiAg\nICAgICAgICAgIHJldHVybiBzdG1udDsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmaXJlRXZlbnQoZ2V0RGVs\nZWdhdGUoKSwgSkRCQ0V2ZW50LkJFRk9SRV9DTE9TRSwKICAgICAgICAgICAg\nICAgICAgICBudWxsLCBudWxsLCBudWxsKTsKICAgICAgICAgICAgfSBmaW5h\nbGx5IHsKICAgICAgICAgICAgICAgIHN1cGVyLmNsb3NlKCk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBGaXJlcyBl\ndmVudHMgYXMgYXBwcm9wcmlhdGUuCiAgICAgKi8KICAgIHByaXZhdGUgY2xh\nc3MgRXZlbnRQcmVwYXJlZFN0YXRlbWVudCBleHRlbmRzIERlbGVnYXRpbmdQ\ncmVwYXJlZFN0YXRlbWVudCB7CgogICAgICAgIHByaXZhdGUgZmluYWwgRXZl\nbnRDb25uZWN0aW9uIF9jb25uOwogICAgICAgIHByaXZhdGUgZmluYWwgU3Ry\naW5nIF9zcWw7CgogICAgICAgIHB1YmxpYyBFdmVudFByZXBhcmVkU3RhdGVt\nZW50KFByZXBhcmVkU3RhdGVtZW50IHBzLAogICAgICAgICAgICBFdmVudENv\nbm5lY3Rpb24gY29ubiwgU3RyaW5nIHNxbCkgewogICAgICAgICAgICBzdXBl\ncihwcywgY29ubik7CiAgICAgICAgICAgIF9jb25uID0gY29ubjsKICAgICAg\nICAgICAgX3NxbCA9IHNxbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBp\nbnQgZXhlY3V0ZVVwZGF0ZSgpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgICAgICBKREJDRXZlbnQgYmVmb3JlID0gZmlyZUV2ZW50KF9jb25uLmdl\ndERlbGVnYXRlKCksCiAgICAgICAgICAgICAgICBKREJDRXZlbnQuQkVGT1JF\nX0VYRUNVVEVfU1RBVEVNRU5ULCBudWxsLCBnZXREZWxlZ2F0ZSgpLCBfc3Fs\nKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBz\ndXBlci5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7\nCiAgICAgICAgICAgICAgICBmaXJlRXZlbnQoX2Nvbm4uZ2V0RGVsZWdhdGUo\nKSwKICAgICAgICAgICAgICAgICAgICBKREJDRXZlbnQuQUZURVJfRVhFQ1VU\nRV9TVEFURU1FTlQsIGJlZm9yZSwKICAgICAgICAgICAgICAgICAgICBnZXRE\nZWxlZ2F0ZSgpLCBfc3FsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAg\nICAgICAgcHJvdGVjdGVkIFJlc3VsdFNldCBleGVjdXRlUXVlcnkoYm9vbGVh\nbiB3cmFwKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgSkRC\nQ0V2ZW50IGJlZm9yZSA9IGZpcmVFdmVudChfY29ubi5nZXREZWxlZ2F0ZSgp\nLAogICAgICAgICAgICAgICAgSkRCQ0V2ZW50LkJFRk9SRV9FWEVDVVRFX1NU\nQVRFTUVOVCwgbnVsbCwgZ2V0RGVsZWdhdGUoKSwgX3NxbCk7CiAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0\nZVF1ZXJ5KHdyYXApOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICAgICAgZmlyZUV2ZW50KF9jb25uLmdldERlbGVnYXRlKCksCiAgICAg\nICAgICAgICAgICAgICAgSkRCQ0V2ZW50LkFGVEVSX0VYRUNVVEVfU1RBVEVN\nRU5ULCBiZWZvcmUsCiAgICAgICAgICAgICAgICAgICAgZ2V0RGVsZWdhdGUo\nKSwgX3NxbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBpbnRbXSBleGVjdXRlQmF0Y2goKSB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICAgICAgSkRCQ0V2ZW50IGJlZm9yZSA9IGZpcmVFdmVudChf\nY29ubi5nZXREZWxlZ2F0ZSgpLAogICAgICAgICAgICAgICAgSkRCQ0V2ZW50\nLkJFRk9SRV9FWEVDVVRFX1NUQVRFTUVOVCwgbnVsbCwgZ2V0RGVsZWdhdGUo\nKSwgX3NxbCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBy\nZXR1cm4gc3VwZXIuZXhlY3V0ZUJhdGNoKCk7CiAgICAgICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgICAgICBmaXJlRXZlbnQoX2Nvbm4uZ2V0RGVs\nZWdhdGUoKSwKICAgICAgICAgICAgICAgICAgICBKREJDRXZlbnQuQUZURVJf\nRVhFQ1VURV9TVEFURU1FTlQsIGJlZm9yZSwKICAgICAgICAgICAgICAgICAg\nICBnZXREZWxlZ2F0ZSgpLCBfc3FsKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIEZpcmVzIGV2ZW50cyBhcyBhcHBy\nb3ByaWF0ZS4KICAgICAqLwogICAgcHJpdmF0ZSBjbGFzcyBFdmVudFN0YXRl\nbWVudCBleHRlbmRzIERlbGVnYXRpbmdTdGF0ZW1lbnQgewoKICAgICAgICBw\ncml2YXRlIGZpbmFsIEV2ZW50Q29ubmVjdGlvbiBfY29ubjsKCiAgICAgICAg\ncHVibGljIEV2ZW50U3RhdGVtZW50KFN0YXRlbWVudCBzdG1udCwgRXZlbnRD\nb25uZWN0aW9uIGNvbm4pIHsKICAgICAgICAgICAgc3VwZXIoc3RtbnQsIGNv\nbm4pOwogICAgICAgICAgICBfY29ubiA9IGNvbm47CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgaW50IGV4ZWN1dGVVcGRhdGUoU3RyaW5nIHNxbCkgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIEpEQkNFdmVudCBiZWZv\ncmUgPSBmaXJlRXZlbnQoX2Nvbm4uZ2V0RGVsZWdhdGUoKSwKICAgICAgICAg\nICAgICAgIEpEQkNFdmVudC5CRUZPUkVfRVhFQ1VURV9TVEFURU1FTlQsIG51\nbGwsIGdldERlbGVnYXRlKCksIHNxbCk7CiAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZVVwZGF0ZShzcWwp\nOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgZmly\nZUV2ZW50KF9jb25uLmdldERlbGVnYXRlKCksCiAgICAgICAgICAgICAgICAg\nICAgSkRCQ0V2ZW50LkFGVEVSX0VYRUNVVEVfU1RBVEVNRU5ULCBiZWZvcmUs\nCiAgICAgICAgICAgICAgICAgICAgZ2V0RGVsZWdhdGUoKSwgc3FsKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIFJlc3Vs\ndFNldCBleGVjdXRlUXVlcnkoU3RyaW5nIHNxbCwgYm9vbGVhbiB3cmFwKQog\nICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nSkRCQ0V2ZW50IGJlZm9yZSA9IGZpcmVFdmVudChfY29ubi5nZXREZWxlZ2F0\nZSgpLAogICAgICAgICAgICAgICAgSkRCQ0V2ZW50LkJFRk9SRV9FWEVDVVRF\nX1NUQVRFTUVOVCwgbnVsbCwgZ2V0RGVsZWdhdGUoKSwgc3FsKTsKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5leGVj\ndXRlUXVlcnkoc3FsLCB3cmFwKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICAgICAgICAgIGZpcmVFdmVudChfY29ubi5nZXREZWxlZ2F0ZSgp\nLAogICAgICAgICAgICAgICAgICAgIEpEQkNFdmVudC5BRlRFUl9FWEVDVVRF\nX1NUQVRFTUVOVCwgYmVmb3JlLAogICAgICAgICAgICAgICAgICAgIGdldERl\nbGVnYXRlKCksIHNxbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9\nCn0K\n","encoding":"base64"}

