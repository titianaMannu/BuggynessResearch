{"sha":"9acd5d656285426d5b7c25d72f1799054a71b654","node_id":"MDQ6QmxvYjIwNjM2NDo5YWNkNWQ2NTYyODU0MjZkNWI3YzI1ZDcyZjE3OTkwNTRhNzFiNjU0","size":5049,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9acd5d656285426d5b7c25d72f1799054a71b654","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnJvcDsKCmltcG9ydCBq\nYXZhLnV0aWwuQWJzdHJhY3RMaXN0OwppbXBvcnQgamF2YS51dGlsLkFycmF5\nTGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2\nYS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9y\ndCBqYXZhLnV0aWwuTGlzdEl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLk5v\nU3VjaEVsZW1lbnRFeGNlcHRpb247CgppbXBvcnQgb3JnLmFwYWNoZS5jb21t\nb25zLmxhbmcuT2JqZWN0VXRpbHM7CgovKioKICogQWJzdHJhY3QgYmFzZSBj\nbGFzcyBmb3IgcmFuZG9tLWFjY2VzcyByZXN1bHQgbGlzdHMuIFVubGlrZSB0\naGUKICoge0BsaW5rIEFic3RyYWN0TGlzdH0sIHRoaXMgY2xhc3MgZG9lc24n\ndCByZWx5IG9uIHRoZQogKiB7QGxpbmsgQ29sbGVjdGlvbiNzaXplfSBtZXRo\nb2QuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICov\nCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdE5vblNlcXVlbnRpYWxS\nZXN1bHRMaXN0CiAgICBleHRlbmRzIEFic3RyYWN0UmVzdWx0TGlzdCB7Cgog\nICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBPYmplY3QgUEFTVF9FTkQgPSBu\nZXcgT2JqZWN0KCk7CgogICAgLyoqCiAgICAgKiBJbXBsZW1lbnQgdGhpcyBt\nZXRob2QgYW5kIHtAbGluayAjc2l6ZX0uIFJldHVybiB7QGxpbmsgI1BBU1Rf\nRU5EfQogICAgICogaWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMuCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBPYmplY3QgZ2V0SW50ZXJu\nYWwoaW50IGluZGV4KTsKCiAgICBwdWJsaWMgYm9vbGVhbiBjb250YWlucyhP\nYmplY3QgbykgewogICAgICAgIGFzc2VydE9wZW4oKTsKICAgICAgICBPYmpl\nY3Qgb2JqOwogICAgICAgIGZvciAoaW50IGkgPSAwOyB0cnVlOyBpKyspIHsK\nICAgICAgICAgICAgb2JqID0gZ2V0SW50ZXJuYWwoaSk7CiAgICAgICAgICAg\nIGlmIChvYmogPT0gUEFTVF9FTkQpCiAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgaWYgKE9iamVjdFV0aWxzLmVxdWFscyhvLCBvYmopKQog\nICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBjb250\nYWluc0FsbChDb2xsZWN0aW9uIGMpIHsKICAgICAgICBhc3NlcnRPcGVuKCk7\nCiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBjLml0ZXJhdG9yKCk7IGl0\nci5oYXNOZXh0KCk7KQogICAgICAgICAgICBpZiAoIWNvbnRhaW5zKGl0ci5u\nZXh0KCkpKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nIHJldHVybiB0cnVlOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0KGlu\ndCBpbmRleCkgewogICAgICAgIGFzc2VydE9wZW4oKTsKICAgICAgICBPYmpl\nY3Qgb2JqID0gZ2V0SW50ZXJuYWwoaW5kZXgpOwogICAgICAgIGlmIChvYmog\nPT0gUEFTVF9FTkQpCiAgICAgICAgICAgIHRocm93IG5ldyBOb1N1Y2hFbGVt\nZW50RXhjZXB0aW9uKCk7CiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGluZGV4T2YoT2JqZWN0IG8pIHsKICAgICAgICBhc3Nl\ncnRPcGVuKCk7CiAgICAgICAgT2JqZWN0IG9iajsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgdHJ1ZTsgaSsrKSB7CiAgICAgICAgICAgIG9iaiA9IGdldElu\ndGVybmFsKGkpOwogICAgICAgICAgICBpZiAob2JqID09IFBBU1RfRU5EKQog\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGlmIChPYmplY3RV\ndGlscy5lcXVhbHMobywgb2JqKSkKICAgICAgICAgICAgICAgIHJldHVybiBp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gLTE7CiAgICB9CgogICAgcHVi\nbGljIGludCBsYXN0SW5kZXhPZihPYmplY3QgbykgewogICAgICAgIGFzc2Vy\ndE9wZW4oKTsKICAgICAgICBpbnQgaW5kZXggPSAtMTsKICAgICAgICBPYmpl\nY3Qgb2JqOwogICAgICAgIGZvciAoaW50IGkgPSAwOyB0cnVlOyBpKyspIHsK\nICAgICAgICAgICAgb2JqID0gZ2V0SW50ZXJuYWwoaSk7CiAgICAgICAgICAg\nIGlmIChvYmogPT0gUEFTVF9FTkQpCiAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgaWYgKE9iamVjdFV0aWxzLmVxdWFscyhvLCBvYmopKQog\nICAgICAgICAgICAgICAgaW5kZXggPSBpOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gaW5kZXg7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNFbXB0\neSgpIHsKICAgICAgICBhc3NlcnRPcGVuKCk7CiAgICAgICAgcmV0dXJuIGdl\ndEludGVybmFsKDApID09IFBBU1RfRU5EOwogICAgfQoKICAgIHB1YmxpYyBJ\ndGVyYXRvciBpdGVyYXRvcigpIHsKICAgICAgICByZXR1cm4gbGlzdEl0ZXJh\ndG9yKCk7CiAgICB9CgogICAgcHVibGljIExpc3RJdGVyYXRvciBsaXN0SXRl\ncmF0b3IoKSB7CiAgICAgICAgcmV0dXJuIGxpc3RJdGVyYXRvcigwKTsKICAg\nIH0KCiAgICBwdWJsaWMgTGlzdEl0ZXJhdG9yIGxpc3RJdGVyYXRvcihpbnQg\naW5kZXgpIHsKICAgICAgICByZXR1cm4gbmV3IFJlc3VsdExpc3RJdGVyYXRv\ncihuZXcgSXRyKGluZGV4KSwgdGhpcyk7CiAgICB9CgogICAgcHVibGljIE9i\namVjdFtdIHRvQXJyYXkoKSB7CiAgICAgICAgYXNzZXJ0T3BlbigpOwogICAg\nICAgIEFycmF5TGlzdCBsaXN0ID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAg\nIE9iamVjdCBvYmo7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IHRydWU7IGkr\nKykgewogICAgICAgICAgICBvYmogPSBnZXRJbnRlcm5hbChpKTsKICAgICAg\nICAgICAgaWYgKG9iaiA9PSBQQVNUX0VORCkKICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICBsaXN0LmFkZChvYmopOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gbGlzdC50b0FycmF5KCk7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdFtdIHRvQXJyYXkoT2JqZWN0W10gYSkgewogICAgICAgIGFzc2Vy\ndE9wZW4oKTsKICAgICAgICBBcnJheUxpc3QgbGlzdCA9IG5ldyBBcnJheUxp\nc3QoKTsKICAgICAgICBPYmplY3Qgb2JqOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyB0cnVlOyBpKyspIHsKICAgICAgICAgICAgb2JqID0gZ2V0SW50ZXJu\nYWwoaSk7CiAgICAgICAgICAgIGlmIChvYmogPT0gUEFTVF9FTkQpCiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgbGlzdC5hZGQob2JqKTsK\nICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxpc3QudG9BcnJheShhKTsKICAg\nIH0KCiAgICBwdWJsaWMgTGlzdCBzdWJMaXN0KGludCBmcm9tSW5kZXgsIGlu\ndCB0b0luZGV4KSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3Bl\ncmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHJpdmF0ZSBjbGFzcyBJ\ndHIgZXh0ZW5kcyBBYnN0cmFjdExpc3RJdGVyYXRvciB7CgogICAgICAgIHBy\naXZhdGUgaW50IF9pZHggPSAwOwogICAgICAgIHByaXZhdGUgT2JqZWN0IF9u\nZXh0ID0gUEFTVF9FTkQ7CgogICAgICAgIHB1YmxpYyBJdHIoaW50IGluZGV4\nKSB7CiAgICAgICAgICAgIF9pZHggPSBpbmRleDsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBpbnQgbmV4dEluZGV4KCkgewogICAgICAgICAgICByZXR1\ncm4gX2lkeDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBpbnQgcHJldmlv\ndXNJbmRleCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9pZHggLSAxOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaGFzTmV4dCgpIHsKICAg\nICAgICAgICAgX25leHQgPSBnZXRJbnRlcm5hbChfaWR4KTsKICAgICAgICAg\nICAgcmV0dXJuIF9uZXh0ICE9IFBBU1RfRU5EOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIGJvb2xlYW4gaGFzUHJldmlvdXMoKSB7CiAgICAgICAgICAg\nIHJldHVybiBfaWR4ID4gMDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBP\nYmplY3QgcHJldmlvdXMoKSB7CiAgICAgICAgICAgIGlmIChfaWR4ID09IDAp\nCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9TdWNoRWxlbWVudEV4Y2Vw\ndGlvbigpOwogICAgICAgICAgICByZXR1cm4gZ2V0SW50ZXJuYWwoLS1faWR4\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgbmV4dCgpIHsK\nICAgICAgICAgICAgaWYgKCFoYXNOZXh0KCkpCiAgICAgICAgICAgICAgICB0\naHJvdyBuZXcgTm9TdWNoRWxlbWVudEV4Y2VwdGlvbigpOwogICAgICAgICAg\nICBfaWR4Kys7CiAgICAgICAgICAgIHJldHVybiBfbmV4dDsKICAgICAgICB9\nCiAgICB9Cn0K\n","encoding":"base64"}

