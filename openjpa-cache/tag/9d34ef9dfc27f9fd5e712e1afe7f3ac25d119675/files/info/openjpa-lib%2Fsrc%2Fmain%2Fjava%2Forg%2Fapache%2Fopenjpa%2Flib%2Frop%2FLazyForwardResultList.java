{"sha":"f3a84b9559652279ff4b28b7d95516fdfea29ba8","node_id":"MDQ6QmxvYjIwNjM2NDpmM2E4NGI5NTU5NjUyMjc5ZmY0YjI4YjdkOTU1MTZmZGZlYTI5YmE4","size":5245,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f3a84b9559652279ff4b28b7d95516fdfea29ba8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnJvcDsKCmltcG9ydCBq\nYXZhLmlvLk9iamVjdFN0cmVhbUV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRp\nbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9y\ndCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0SXRlcmF0\nb3I7CmltcG9ydCBqYXZhLnV0aWwuTm9TdWNoRWxlbWVudEV4Y2VwdGlvbjsK\nCi8qKgogKiBMYXp5IGZvcndhcmQtb25seSByZXN1bHQgbGlzdC4KICoKICog\nQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNs\nYXNzIExhenlGb3J3YXJkUmVzdWx0TGlzdCBleHRlbmRzIEFic3RyYWN0U2Vx\ndWVudGlhbFJlc3VsdExpc3QKICAgIGltcGxlbWVudHMgUmVzdWx0TGlzdCB7\nCgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IE9QRU4gPSAwOwogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IENMT1NFRCA9IDE7CiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBpbnQgRlJFRUQgPSAyOwoKICAgIHByaXZhdGUg\nUmVzdWx0T2JqZWN0UHJvdmlkZXIgX3JvcCA9IG51bGw7CiAgICBwcml2YXRl\nIGZpbmFsIExpc3QgX2xpc3QgPSBuZXcgQXJyYXlMaXN0KCk7CiAgICBwcml2\nYXRlIGludCBfc3RhdGUgPSBPUEVOOwogICAgcHJpdmF0ZSBpbnQgX3NpemUg\nPSAtMTsKCiAgICBwdWJsaWMgTGF6eUZvcndhcmRSZXN1bHRMaXN0KFJlc3Vs\ndE9iamVjdFByb3ZpZGVyIHJvcCkgewogICAgICAgIF9yb3AgPSByb3A7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgX3JvcC5vcGVuKCk7CiAgICAgICAg\nfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICBj\nbG9zZSgpOwogICAgICAgICAgICB0aHJvdyByZTsKICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBjbG9zZSgpOwogICAgICAg\nICAgICBfcm9wLmhhbmRsZUNoZWNrZWRFeGNlcHRpb24oZSk7CiAgICAgICAg\nfQogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzUHJvdmlkZXJPcGVuKCkg\newogICAgICAgIHJldHVybiBfc3RhdGUgPT0gT1BFTjsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiBpc0Nsb3NlZCgpIHsKICAgICAgICByZXR1cm4gX3N0\nYXRlID09IENMT1NFRDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgp\nIHsKICAgICAgICBpZiAoX3N0YXRlICE9IENMT1NFRCkgewogICAgICAgICAg\nICBmcmVlKCk7CiAgICAgICAgICAgIF9zdGF0ZSA9IENMT1NFRDsKICAgICAg\nICB9CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXQoaW50IGluZGV4KSB7\nCiAgICAgICAgYXNzZXJ0T3BlbigpOwoKICAgICAgICAvLyBvcHRpbWl6YXRp\nb24gZm9yIGdldHRpbmcgc2VxdW50aWFsbHkKICAgICAgICBpZiAoaW5kZXgg\nPT0gX2xpc3Quc2l6ZSgpKQogICAgICAgICAgICBhZGROZXh0KCk7CiAgICAg\nICAgaWYgKGluZGV4IDwgX2xpc3Quc2l6ZSgpKQogICAgICAgICAgICByZXR1\ncm4gX2xpc3QuZ2V0KGluZGV4KTsKCiAgICAgICAgcmV0dXJuIHN1cGVyLmdl\ndChpbmRleCk7CiAgICB9CgogICAgcHJvdGVjdGVkIExpc3RJdGVyYXRvciBp\ndHIoaW50IGluZGV4KSB7CiAgICAgICAgcmV0dXJuIChfc3RhdGUgIT0gT1BF\nTikgPyBfbGlzdC5saXN0SXRlcmF0b3IoaW5kZXgpIDogbmV3IEl0cihpbmRl\neCk7CiAgICB9CgogICAgcHVibGljIGludCBzaXplKCkgewogICAgICAgIGFz\nc2VydE9wZW4oKTsKICAgICAgICBpZiAoX3NpemUgIT0gLTEpCiAgICAgICAg\nICAgIHJldHVybiBfc2l6ZTsKICAgICAgICBpZiAoX3N0YXRlICE9IE9QRU4p\nCiAgICAgICAgICAgIHJldHVybiBfbGlzdC5zaXplKCk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgX3NpemUgPSBfcm9wLnNpemUoKTsKICAgICAgICAg\nICAgcmV0dXJuIF9zaXplOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNl\ncHRpb24gcmUpIHsKICAgICAgICAgICAgY2xvc2UoKTsKICAgICAgICAgICAg\ndGhyb3cgcmU7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgY2xvc2UoKTsKICAgICAgICAgICAgX3JvcC5oYW5kbGVDaGVj\na2VkRXhjZXB0aW9uKGUpOwogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAg\nICAgfQogICAgfQoKICAgIHByaXZhdGUgYm9vbGVhbiBhZGROZXh0KCkgewog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICghX3JvcC5uZXh0KCkpIHsK\nICAgICAgICAgICAgICAgIGZyZWUoKTsKICAgICAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfbGlzdC5hZGQo\nX3JvcC5nZXRSZXN1bHRPYmplY3QoKSk7CiAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsK\nICAgICAgICAgICAgY2xvc2UoKTsKICAgICAgICAgICAgdGhyb3cgcmU7CiAg\nICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgY2xv\nc2UoKTsKICAgICAgICAgICAgX3JvcC5oYW5kbGVDaGVja2VkRXhjZXB0aW9u\nKGUpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAg\nfQoKICAgIHByaXZhdGUgdm9pZCBmcmVlKCkgewogICAgICAgIGlmIChfc3Rh\ndGUgPT0gT1BFTikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgX3JvcC5jbG9zZSgpOwogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICB9CiAgICAgICAgICAgIF9zdGF0ZSA9IEZS\nRUVEOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IHdyaXRl\nUmVwbGFjZSgpIHRocm93cyBPYmplY3RTdHJlYW1FeGNlcHRpb24gewogICAg\nICAgIC8vIGZ1bGx5IHRyYXZlcnNlIHJlc3VsdHMKICAgICAgICBpZiAoX3N0\nYXRlID09IE9QRU4pCiAgICAgICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0g\naXRyKF9saXN0LnNpemUoKSk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAg\nICAgICAgaXRyLm5leHQoKTsKICAgICAgICByZXR1cm4gX2xpc3Q7CiAgICB9\nCgogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICAvLyBzdXBl\ncmNsYXNzIHRyaWVzIHRvIHRyYXZlcnNlcyBlbnRpcmUgbGlzdCBmb3IgaGFz\naGNvZGUKICAgICAgICByZXR1cm4gU3lzdGVtLmlkZW50aXR5SGFzaENvZGUo\ndGhpcyk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVj\ndCBvdGhlcikgewogICAgICAgIC8vIHN1cGVyY2xhc3MgdHJpZXMgdG8gdHJh\ndmVyc2UgZW50aXJlIGxpc3QgZm9yIGVxdWFsaXR5CiAgICAgICAgcmV0dXJu\nIG90aGVyID09IHRoaXM7CiAgICB9CgogICAgcHVibGljIExpc3Qgc3ViTGlz\ndChpbnQgZnJvbUluZGV4LCBpbnQgdG9JbmRleCkgewogICAgICAgIGFzc2Vy\ndE9wZW4oKTsKICAgICAgICByZXR1cm4gX2xpc3Quc3ViTGlzdChmcm9tSW5k\nZXgsIHRvSW5kZXgpOwogICAgfQoKICAgIHByaXZhdGUgY2xhc3MgSXRyIGV4\ndGVuZHMgQWJzdHJhY3RMaXN0SXRlcmF0b3IgewoKICAgICAgICBwcml2YXRl\nIGludCBfaWR4ID0gMDsKCiAgICAgICAgcHVibGljIEl0cihpbnQgaW5kZXgp\nIHsKICAgICAgICAgICAgX2lkeCA9IE1hdGgubWluKGluZGV4LCBfbGlzdC5z\naXplKCkpOwogICAgICAgICAgICB3aGlsZSAoX2lkeCA8IGluZGV4KQogICAg\nICAgICAgICAgICAgbmV4dCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGludCBuZXh0SW5kZXgoKSB7CiAgICAgICAgICAgIHJldHVybiBfaWR4Owog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGludCBwcmV2aW91c0luZGV4KCkg\newogICAgICAgICAgICByZXR1cm4gX2lkeCAtIDE7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgYm9vbGVhbiBoYXNOZXh0KCkgewogICAgICAgICAgICBp\nZiAoX2xpc3Quc2l6ZSgpID4gX2lkeCkKICAgICAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgICAgICBpZiAoX3N0YXRlICE9IE9QRU4pCiAgICAg\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiBh\nZGROZXh0KCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBo\nYXNQcmV2aW91cygpIHsKICAgICAgICAgICAgcmV0dXJuIF9pZHggPiAwOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIE9iamVjdCBwcmV2aW91cygpIHsK\nICAgICAgICAgICAgaWYgKF9pZHggPT0gMCkKICAgICAgICAgICAgICAgIHRo\ncm93IG5ldyBOb1N1Y2hFbGVtZW50RXhjZXB0aW9uKCk7CiAgICAgICAgICAg\nIHJldHVybiBfbGlzdC5nZXQoLS1faWR4KTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyBPYmplY3QgbmV4dCgpIHsKICAgICAgICAgICAgaWYgKCFoYXNO\nZXh0KCkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9TdWNoRWxlbWVu\ndEV4Y2VwdGlvbigpOwogICAgICAgICAgICByZXR1cm4gX2xpc3QuZ2V0KF9p\nZHgrKyk7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

