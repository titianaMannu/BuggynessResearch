{"sha":"f5a04ea7fa0ad931de33dcf88f530285aa2e3de1","node_id":"MDQ6QmxvYjIwNjM2NDpmNWEwNGVhN2ZhMGFkOTMxZGUzM2RjZjg4ZjUzMDI4NWFhMmUzZGUx","size":9699,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f5a04ea7fa0ad931de33dcf88f530285aa2e3de1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbDsKCmltcG9ydCBqYXZh\nLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CmltcG9ydCBqYXZhLnRleHQu\nTWVzc2FnZUZvcm1hdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9y\ndCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5JdGVy\nYXRvcjsKaW1wb3J0IGphdmEudXRpbC5Mb2NhbGU7CmltcG9ydCBqYXZhLnV0\naWwuTWFwOwppbXBvcnQgamF2YS51dGlsLk1pc3NpbmdSZXNvdXJjZUV4Y2Vw\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5Qcm9wZXJ0aWVzOwppbXBvcnQgamF2\nYS51dGlsLlJlc291cmNlQnVuZGxlOwoKaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLmNv\nbmN1cnJlbnQuQ29weU9uV3JpdGVBcnJheVNldDsKCi8qKgogKiBUaGUgTG9j\nYWxpemVyIHByb3ZpZGVzIGNvbnZlbmllbnQgYWNjZXNzIHRvIGxvY2FsaXpl\nZAogKiBzdHJpbmdzLiBJdCBpbmxjdWRlcyBidWlsdC1pbiBzdXBwb3J0IGZv\nciBwYXJhbWV0ZXIgc3Vic3RpdHV0aW9uIHRocm91Z2gKICogdGhlIHVzZSBv\nZiB0aGUge0BsaW5rIE1lc3NhZ2VGb3JtYXR9IHV0aWxpdHkuCiAqIFN0cmlu\nZ3MgYXJlIHN0b3JlZCBpbiBwZXItcGFja2FnZSB7QGxpbmsgUHJvcGVydGll\nc30gZmlsZXMuCiAqIFRoZSBwcm9wZXJ0eSBmaWxlIGZvciB0aGUgZGVmYXVs\ndCBsb2NhbGUgbXVzdCBiZSBuYW1lZAogKiA8Y29kZT5sb2NhbGl6ZXIucHJv\ncGVydGllczwvY29kZT4uIEFkZGl0aW9uYWwgbG9jYWxlcyBjYW4gYmUgc3Vw\ncG9ydGVkCiAqIHRocm91Z2ggYWRkaXRpb25hbCBwcm9wZXJ0eSBmaWxlcyB1\nc2luZyB0aGUgbmFtaW5nIGNvbnZlbnRpb25zIHNwZWNpZmllZAogKiBpbiB0\naGUge0BsaW5rIFJlc291cmNlQnVuZGxlfSBjbGFzcy4gRm9yIGV4YW1wbGUs\nIHRoZSBnZXJtYW4gbG9jYWxlCiAqIGNvdWxkIGJlIHN1cHBvcnRlZCB0aHJv\ndWdoIGEgPGNvZGU+bG9jYWxpemVyX2RlX0RFLnByb3BlcnRpZXM8L2NvZGU+\nIGZpbGUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xh\nc3MgTG9jYWxpemVyIHsKCiAgICAvLyBzdGF0aWMgY2FjaGUgb2YgcGFja2Fn\nZStsb2MgbmFtZSB0byBsb2NhbGl6ZXIgbWFwcGluZ3MKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIE1hcCBfbG9jYWxpemVycyA9IG5ldyBDb25jdXJyZW50\nSGFzaE1hcCgpOwoKICAgIC8vIGxpc3Qgb2YgcmVzb3VyY2UgcHJvdmlkZXJz\nIHRvIGRlbGVnYXRlIHRvIHdoZW4gbG9jYXRpbmcgcmVzb3VyY2VzCiAgICBw\ncml2YXRlIHN0YXRpYyBmaW5hbCBDb2xsZWN0aW9uIF9wcm92aWRlcnMgPSBu\nZXcgQ29weU9uV3JpdGVBcnJheVNldAogICAgICAgIChBcnJheXMuYXNMaXN0\nKG5ldyBPYmplY3RbXXsKICAgICAgICAgICAgbmV3IFNpbXBsZVJlc291cmNl\nQnVuZGxlUHJvdmlkZXIoKSwKICAgICAgICAgICAgbmV3IFN0cmVhbVJlc291\ncmNlQnVuZGxlUHJvdmlkZXIoKSwKICAgICAgICAgICAgbmV3IFppcFJlc291\ncmNlQnVuZGxlUHJvdmlkZXIoKSwgfSkpOwoKICAgIC8qKgogICAgICogUmV0\ndXJuIGEgTG9jYWxpemVyIGluc3RhbmNlIHRoYXQgd2lsbCBhY2Nlc3MgdGhl\nIHByb3BlcnRpZXMgZmlsZQogICAgICogaW4gdGhlIHBhY2thZ2Ugb2YgdGhl\nIGdpdmVuIGNsYXNzIHVzaW5nIHRoZSBzeXN0ZW0gZGVmYXVsdCBsb2NhbGUu\nCiAgICAgKgogICAgICogQHNlZSAjZm9yUGFja2FnZShDbGFzcyxMb2NhbGUp\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgTG9jYWxpemVyIGZvclBhY2th\nZ2UoQ2xhc3MgY2xzKSB7CiAgICAgICAgcmV0dXJuIGZvclBhY2thZ2UoY2xz\nLCBudWxsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhIExvY2Fs\naXplciBpbnN0YW5jZSB0aGF0IHdpbGwgYWNjZXNzIHRoZSBwcm9wZXJ0aWVz\nIGZpbGUKICAgICAqIGluIHRoZSBwYWNrYWdlIG9mIHRoZSBnaXZlbiBjbGFz\ncyB1c2luZyB0aGUgZ2l2ZW4gbG9jYWxlLgogICAgICoKICAgICAqIEBwYXJh\nbSBjbHMgdGhlIGNsYXNzIHdob3NlIHBhY2thZ2UgdG8gY2hlY2sgZm9yIHRo\nZSBsb2NhbGl6ZWQKICAgICAqIHByb3BlcnRpZXMgZmlsZTsgaWYgbnVsbCwg\ndGhlIHN5c3RlbSB3aWxsIGNoZWNrIGZvcgogICAgICogYSB0b3AtbGV2ZWwg\ncHJvcGVydGllcyBmaWxlCiAgICAgKiBAcGFyYW0gbG9jYWxlIHRoZSBsb2Nh\nbGUgdG8gd2hpY2ggc3RyaW5ncyBzaG91bGQgYmUgbG9jYWxpemVkOyBpZgog\nICAgICogbnVsbCwgdGhlIHN5c3RlbSBkZWZhdWx0IHdpbGwgYmUgYXNzdW1l\nZAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIExvY2FsaXplciBmb3JQYWNr\nYWdlKENsYXNzIGNscywgTG9jYWxlIGxvY2FsZSkgewogICAgICAgIGlmIChs\nb2NhbGUgPT0gbnVsbCkKICAgICAgICAgICAgbG9jYWxlID0gTG9jYWxlLmdl\ndERlZmF1bHQoKTsKCiAgICAgICAgaW50IGRvdCA9IChjbHMgPT0gbnVsbCkg\nPyAtMSA6IGNscy5nZXROYW1lKCkubGFzdEluZGV4T2YoJy4nKTsKICAgICAg\nICBTdHJpbmcgcGtnOwogICAgICAgIFN0cmluZyBmaWxlOwogICAgICAgIGlm\nIChkb3QgPT0gLTEpIHsKICAgICAgICAgICAgcGtnID0gIiI7CiAgICAgICAg\nICAgIGZpbGUgPSAibG9jYWxpemVyIjsKICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICBwa2cgPSBjbHMuZ2V0TmFtZSgpLnN1YnN0cmluZygwLCBkb3Qp\nOwogICAgICAgICAgICBmaWxlID0gcGtnICsgIi5sb2NhbGl6ZXIiOwogICAg\nICAgIH0KICAgICAgICBTdHJpbmcga2V5ID0gZmlsZSArIGxvY2FsZS50b1N0\ncmluZygpOwoKICAgICAgICAvLyBubyBsb2NraW5nOyBvayBpZiBidW5kbGUg\nY3JlYXRlZCBtdWx0aXBsZSB0aW1lcwogICAgICAgIC8vIGNoZWNrIGZvciBj\nYWNoZWQgdmVyc2lvbgogICAgICAgIExvY2FsaXplciBsb2MgPSAoTG9jYWxp\nemVyKSBfbG9jYWxpemVycy5nZXQoa2V5KTsKICAgICAgICBpZiAobG9jICE9\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBsb2M7CiAgICAgICAgZWxzZSB7\nCiAgICAgICAgICAgIGxvYyA9IG5ldyBMb2NhbGl6ZXIocGtnLCBmaWxlLCBs\nb2NhbGUsCiAgICAgICAgICAgICAgICBjbHMgPT0gbnVsbCA/IG51bGw6KENs\nYXNzTG9hZGVyKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAg\nICAgICAgICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRDbGFzc0xvYWRl\nckFjdGlvbihjbHMpKSk7CiAgICAgICAgICAgIF9sb2NhbGl6ZXJzLnB1dChr\nZXksIGxvYyk7CiAgICAgICAgICAgIHJldHVybiBsb2M7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogUmVnaXN0ZXIgYSByZXNvdXJjZSBwcm92\naWRlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGFkZFByb3Zp\nZGVyKFJlc291cmNlQnVuZGxlUHJvdmlkZXIgcHJvdmlkZXIpIHsKICAgICAg\nICBfcHJvdmlkZXJzLmFkZChwcm92aWRlcik7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZW1vdmUgYSByZXNvdXJjZSBwcm92aWRlci4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyBib29sZWFuIHJlbW92ZVByb3ZpZGVyKFJlc291cmNl\nQnVuZGxlUHJvdmlkZXIgcHJvdmlkZXIpIHsKICAgICAgICByZXR1cm4gX3By\nb3ZpZGVycy5yZW1vdmUocHJvdmlkZXIpOwogICAgfQoKICAgIHByaXZhdGUg\nU3RyaW5nIF9maWxlOwogICAgcHJpdmF0ZSBTdHJpbmcgX3BrZzsKICAgIHBy\naXZhdGUgUmVzb3VyY2VCdW5kbGUgX2J1bmRsZSA9IG51bGw7CiAgICBwcml2\nYXRlIExvY2FsZSBfbG9jYWxlOwogICAgcHJpdmF0ZSBDbGFzc0xvYWRlciBf\nbG9hZGVyOwoKICAgIHByaXZhdGUgTG9jYWxpemVyKFN0cmluZyBwa2csIFN0\ncmluZyBmLCBMb2NhbGUgbG9jYWxlLCBDbGFzc0xvYWRlciBsb2FkZXIpIHsK\nICAgICAgICBfcGtnID0gcGtnOwogICAgICAgIF9maWxlID0gZjsKICAgICAg\nICBfbG9jYWxlID0gbG9jYWxlOwogICAgICAgIF9sb2FkZXIgPSBsb2FkZXI7\nCiAgICB9CgogICAgcHJpdmF0ZSBSZXNvdXJjZUJ1bmRsZSBnZXRCdW5kbGUo\nKSB7CiAgICAgICAgLy8gbm8gbG9ja2luZzsgaXQncyBvayB0byBjcmVhdGUg\nbXVsdGlwbGUgYnVuZGxlcwogICAgICAgIGlmIChfYnVuZGxlID09IG51bGwp\nIHsKICAgICAgICAgICAgLy8gZmluZCByZXNvdXJjZSBidW5kbGUKICAgICAg\nICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBfcHJvdmlkZXJzLml0ZXJhdG9y\nKCk7CiAgICAgICAgICAgICAgICBpdHIuaGFzTmV4dCgpICYmIF9idW5kbGUg\nPT0gbnVsbDsgKSB7CiAgICAgICAgICAgICAgICBfYnVuZGxlID0gKChSZXNv\ndXJjZUJ1bmRsZVByb3ZpZGVyKSBpdHIubmV4dCgpKQogICAgICAgICAgICAg\nICAgICAgIC5maW5kUmVzb3VyY2UoX2ZpbGUsIF9sb2NhbGUsIF9sb2FkZXIp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBfYnVu\nZGxlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBsb2NhbGl6\nZWQgc3RyaW5nIG1hdGNoaW5nIHRoZSBnaXZlbiBrZXkuCiAgICAgKi8KICAg\nIHB1YmxpYyBNZXNzYWdlIGdldChTdHJpbmcga2V5KSB7CiAgICAgICAgcmV0\ndXJuIGdldChrZXksIG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIG1hdGNoaW5nIHRoZSBnaXZlbiBr\nZXkuCiAgICAgKi8KICAgIHB1YmxpYyBNZXNzYWdlIGdldEZhdGFsKFN0cmlu\nZyBrZXkpIHsKICAgICAgICByZXR1cm4gZ2V0RmF0YWwoa2V5LCBudWxsKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbG9jYWxpemVkIHN0\ncmluZyBtYXRjaGluZyB0aGUgZ2l2ZW4ga2V5LiBUaGUgZ2l2ZW4KICAgICAq\nIDxjb2RlPnN1YjwvY29kZT4gb2JqZWN0IHdpbGwgYmUgcGFja2VkIGludG8g\nYW4gYXJyYXkgYW5kIHN1YnN0aXR1dGVkCiAgICAgKiBpbnRvIHRoZSBmb3Vu\nZCBzdHJpbmcgYWNjb3JkaW5nIHRvIHRoZSBydWxlcyBvZiB0aGUKICAgICAq\nIHtAbGluayBNZXNzYWdlRm9ybWF0fSBjbGFzcy4KICAgICAqCiAgICAgKiBA\nc2VlICNnZXQoU3RyaW5nKQogICAgICovCiAgICBwdWJsaWMgTWVzc2FnZSBn\nZXQoU3RyaW5nIGtleSwgT2JqZWN0IHN1YikgewogICAgICAgIHJldHVybiBn\nZXQoa2V5LCBuZXcgT2JqZWN0W117IHN1YiB9KTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgbG9jYWxpemVkIHN0cmluZyBtYXRjaGluZyB0\naGUgZ2l2ZW4ga2V5LiBUaGUgZ2l2ZW4KICAgICAqIDxjb2RlPnN1YjwvY29k\nZT4gb2JqZWN0IHdpbGwgYmUgcGFja2VkIGludG8gYW4gYXJyYXkgYW5kIHN1\nYnN0aXR1dGVkCiAgICAgKiBpbnRvIHRoZSBmb3VuZCBzdHJpbmcgYWNjb3Jk\naW5nIHRvIHRoZSBydWxlcyBvZiB0aGUKICAgICAqIHtAbGluayBNZXNzYWdl\nRm9ybWF0fSBjbGFzcy4KICAgICAqCiAgICAgKiBAc2VlICNnZXRGYXRhbChT\ndHJpbmcpCiAgICAgKi8KICAgIHB1YmxpYyBNZXNzYWdlIGdldEZhdGFsKFN0\ncmluZyBrZXksIE9iamVjdCBzdWIpIHsKICAgICAgICByZXR1cm4gZ2V0RmF0\nYWwoa2V5LCBuZXcgT2JqZWN0W117IHN1YiB9KTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgbG9jYWxpemVkIHN0cmluZyBmb3IgdGhlIGdp\ndmVuIGtleS4KICAgICAqCiAgICAgKiBAc2VlICNnZXQoU3RyaW5nLE9iamVj\ndCkKICAgICAqLwogICAgcHVibGljIE1lc3NhZ2UgZ2V0KFN0cmluZyBrZXks\nIE9iamVjdCBzdWIxLCBPYmplY3Qgc3ViMikgewogICAgICAgIHJldHVybiBn\nZXQoa2V5LCBuZXcgT2JqZWN0W117IHN1YjEsIHN1YjIgfSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGxvY2FsaXplZCBzdHJpbmcgZm9y\nIHRoZSBnaXZlbiBrZXkuCiAgICAgKgogICAgICogQHNlZSAjZ2V0RmF0YWwo\nU3RyaW5nLE9iamVjdCkKICAgICAqLwogICAgcHVibGljIE1lc3NhZ2UgZ2V0\nRmF0YWwoU3RyaW5nIGtleSwgT2JqZWN0IHN1YjEsIE9iamVjdCBzdWIyKSB7\nCiAgICAgICAgcmV0dXJuIGdldEZhdGFsKGtleSwgbmV3IE9iamVjdFtdeyBz\ndWIxLCBzdWIyIH0pOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRo\nZSBsb2NhbGl6ZWQgc3RyaW5nIGZvciB0aGUgZ2l2ZW4ga2V5LgogICAgICoK\nICAgICAqIEBzZWUgI2dldChTdHJpbmcsT2JqZWN0KQogICAgICovCiAgICBw\ndWJsaWMgTWVzc2FnZSBnZXQoU3RyaW5nIGtleSwgT2JqZWN0IHN1YjEsIE9i\namVjdCBzdWIyLCBPYmplY3Qgc3ViMykgewogICAgICAgIHJldHVybiBnZXQo\na2V5LCBuZXcgT2JqZWN0W117IHN1YjEsIHN1YjIsIHN1YjMgfSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGxvY2FsaXplZCBzdHJpbmcg\nbWF0Y2hpbmcgdGhlIGdpdmVuIGtleS4gVGhlIGdpdmVuCiAgICAgKiA8Y29k\nZT5zdWJzPC9jb2RlPiBvYmplY3RzIHdpbGwgYmUgc3Vic3RpdHV0ZWQKICAg\nICAqIGludG8gdGhlIGZvdW5kIHN0cmluZyBhY2NvcmRpbmcgdG8gdGhlIHJ1\nbGVzIG9mIHRoZQogICAgICoge0BsaW5rIE1lc3NhZ2VGb3JtYXR9IGNsYXNz\nLgogICAgICoKICAgICAqIEBzZWUgI2dldChTdHJpbmcpCiAgICAgKi8KICAg\nIHB1YmxpYyBNZXNzYWdlIGdldChTdHJpbmcga2V5LCBPYmplY3RbXSBzdWJz\nKSB7CiAgICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlKF9wa2csIGdldEJ1bmRs\nZSgpLCBrZXksIHN1YnMsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiB0aGUgbG9jYWxpemVkIHN0cmluZyBtYXRjaGluZyB0aGUgZ2l2\nZW4ga2V5LiBUaGUgZ2l2ZW4KICAgICAqIDxjb2RlPnN1YnM8L2NvZGU+IG9i\namVjdHMgd2lsbCBiZSBzdWJzdGl0dXRlZAogICAgICogaW50byB0aGUgZm91\nbmQgc3RyaW5nIGFjY29yZGluZyB0byB0aGUgcnVsZXMgb2YgdGhlCiAgICAg\nKiB7QGxpbmsgTWVzc2FnZUZvcm1hdH0gY2xhc3MuCiAgICAgKgogICAgICog\nQHNlZSAjZ2V0RmF0YWwoU3RyaW5nKQogICAgICovCiAgICBwdWJsaWMgTWVz\nc2FnZSBnZXRGYXRhbChTdHJpbmcga2V5LCBPYmplY3RbXSBzdWJzKSB7CiAg\nICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlKF9wa2csIGdldEJ1bmRsZSgpLCBr\nZXksIHN1YnMsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogQSA8Y29k\nZT5NZXNzYWdlPC9jb2RlPiBjYW4gcHJvdmlkZSBhIGxvY2FsaXplZCBtZXNz\nYWdlIHZpYSB0aGUKICAgICAqIHtAbGluayAjZ2V0TWVzc2FnZX0gbWV0aG9k\nIGNhbGwsIGFuZCBjYW4gYWxzbyBwcm92aWRlIHRoZSBvcmlnaW5hbCBrZXks\nCiAgICAgKiBwYWNrYWdlLCBhbmQgc3Vic3RpdHV0aW9uIGFycmF5IHRoYXQg\nd2VyZSB1c2VkIHRvIGFzc2VtYmxlIHRoZSBtZXNzYWdlLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIGNsYXNzIE1lc3NhZ2UgewoKICAgICAgICBwcml2\nYXRlIGZpbmFsIFN0cmluZyBfcGtnOwogICAgICAgIHByaXZhdGUgZmluYWwg\nU3RyaW5nIF9rZXk7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBPYmplY3RbXSBf\nc3ViczsKICAgICAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBfbG9jYWxpemVk\nTWVzc2FnZTsKCiAgICAgICAgcHJpdmF0ZSBNZXNzYWdlKFN0cmluZyBwYWNr\nYWdlTmFtZSwgUmVzb3VyY2VCdW5kbGUgYnVuZGxlLCBTdHJpbmcga2V5LAog\nICAgICAgICAgICBPYmplY3RbXSBzdWJzLCBib29sZWFuIGZhdGFsKSB7CiAg\nICAgICAgICAgIGlmIChidW5kbGUgPT0gbnVsbCAmJiBmYXRhbCkKICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nUmVzb3VyY2VFeGNlcHRpb24o\na2V5LCBrZXksIGtleSk7CgogICAgICAgICAgICBfcGtnID0gcGFja2FnZU5h\nbWU7CiAgICAgICAgICAgIF9rZXkgPSBrZXk7CiAgICAgICAgICAgIF9zdWJz\nID0gc3ViczsKICAgICAgICAgICAgaWYgKGJ1bmRsZSA9PSBudWxsKSB7CiAg\nICAgICAgICAgICAgICBfbG9jYWxpemVkTWVzc2FnZSA9IGtleTsKICAgICAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFN0cmluZyBsb2NhbGl6\nZWQgPSBudWxsOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgICAgICBsb2NhbGl6ZWQgPSBidW5kbGUuZ2V0U3RyaW5nKGtleSk7CiAg\nICAgICAgICAgICAgICB9IGNhdGNoIChNaXNzaW5nUmVzb3VyY2VFeGNlcHRp\nb24gbXJlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZhdGFsKQogICAg\nICAgICAgICAgICAgICAgICAgICB0aHJvdyBtcmU7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICBfbG9jYWxpemVkTWVzc2FnZSA9IChsb2Nh\nbGl6ZWQgPT0gbnVsbCkgPyBrZXkgOiBsb2NhbGl6ZWQ7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBsb2Nh\nbGl6ZWQgbWVzc2FnZS4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgU3Ry\naW5nIGdldE1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiBNZXNzYWdl\nRm9ybWF0LmZvcm1hdChfbG9jYWxpemVkTWVzc2FnZSwgX3N1YnMpOwogICAg\nICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHVuaXF1ZSBrZXkg\nZm9yIHRoZSBsb2NhbGl6ZWQgbWVzc2FnZS4KICAgICAgICAgKi8KICAgICAg\nICBwdWJsaWMgU3RyaW5nIGdldEtleSgpIHsKICAgICAgICAgICAgcmV0dXJu\nIF9rZXk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBTdWJz\ndGl0dXRpb25zIGluc2VydGVkIGludG8gdGhlIG1lc3NhZ2UuCiAgICAgICAg\nICovCiAgICAgICAgcHVibGljIE9iamVjdFtdIGdldFN1YnN0aXR1dGlvbnMo\nKSB7CiAgICAgICAgICAgIHJldHVybiBfc3ViczsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGFja2FnZU5hbWUoKSB7CiAgICAgICAg\nICAgIHJldHVybiBfcGtnOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFN0\ncmluZyB0b1N0cmluZygpIHsKICAgICAgICAgICAgcmV0dXJuIGdldE1lc3Nh\nZ2UoKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

