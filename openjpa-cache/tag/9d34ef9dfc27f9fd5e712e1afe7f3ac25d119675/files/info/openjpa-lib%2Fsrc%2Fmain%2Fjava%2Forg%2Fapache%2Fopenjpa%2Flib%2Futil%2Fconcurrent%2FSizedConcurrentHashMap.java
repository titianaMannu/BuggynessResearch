{"sha":"c001a4cf0bafd1740024602aeaed921d999ab751","node_id":"MDQ6QmxvYjIwNjM2NDpjMDAxYTRjZjBiYWZkMTc0MDAyNDYwMmFlYWVkOTIxZDk5OWFiNzUx","size":4001,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c001a4cf0bafd1740024602aeaed921d999ab751","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5jb25jdXJyZW50OwoK\naW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFw\nOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5JdGVy\nYXRvcjsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLmlvLk9i\namVjdE91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247\nCmltcG9ydCBqYXZhLmlvLk9iamVjdElucHV0U3RyZWFtOwppbXBvcnQgamF2\nYS5pby5TZXJpYWxpemFibGU7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLlNpemVkTWFwOwoKLyoqCiAqIEFuIGltcGxlbWVudGF0aW9u\nIG9mIHtAbGluayBTaXplZE1hcH0gdGhhdCB1c2VzIEpESzEuNSBjb25jdXJy\nZW5jeSBwcmltaXRpdmVzCiAqCiAqIEBzaW5jZSAxLjEuMAogKi8KcHVibGlj\nIGNsYXNzIFNpemVkQ29uY3VycmVudEhhc2hNYXAKICAgIGV4dGVuZHMgTnVs\nbFNhZmVDb25jdXJyZW50SGFzaE1hcAogICAgaW1wbGVtZW50cyBTaXplZE1h\ncCwgQ29uY3VycmVudE1hcCwgU2VyaWFsaXphYmxlIHsKCiAgICBwcml2YXRl\nIGludCBtYXhTaXplOwoKICAgIC8qKgogICAgICogQHBhcmFtIHNpemUgdGhl\nIG1heGltdW0gc2l6ZSBvZiB0aGlzIG1hcC4gSWYgYWRkaXRpb25hbCBlbGVt\nZW50cyBhcmUKICAgICAqIHB1dCBpbnRvIHRoZSBtYXAsIG92ZXJmbG93IHdp\nbGwgYmUgcmVtb3ZlZCB2aWEgY2FsbHMgdG8KICAgICAqIHtAbGluayAjb3Zl\ncmZsb3dSZW1vdmVkfS4KICAgICAqIEBwYXJhbSBsb2FkIHRoZSBsb2FkIGZh\nY3RvciBmb3IgdGhlIHVuZGVybHlpbmcgbWFwCiAgICAgKiBAcGFyYW0gY29u\nY3VycmVuY3lMZXZlbCB0aGUgY29uY3VycmVuY3kgbGV2ZWwgZm9yIHRoZSB1\nbmRlcmx5aW5nIG1hcAogICAgICoKICAgICAqIEBzZWUgQ29uY3VycmVudEhh\nc2hNYXAKICAgICAqLwogICAgcHVibGljIFNpemVkQ29uY3VycmVudEhhc2hN\nYXAoaW50IHNpemUsIGZsb2F0IGxvYWQsIGludCBjb25jdXJyZW5jeUxldmVs\nKSB7CiAgICAgICAgc3VwZXIoc2l6ZSwgbG9hZCwgY29uY3VycmVuY3lMZXZl\nbCk7CiAgICAgICAgc2V0TWF4U2l6ZShzaXplKTsKICAgIH0KCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyBPYmplY3QgcHV0SWZBYnNlbnQoT2JqZWN0IGtl\neSwgT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgaWYgKG1heFNpemUgIT0gSW50\nZWdlci5NQVhfVkFMVUUpCiAgICAgICAgICAgIHJlbW92ZU92ZXJmbG93KHRy\ndWUpOwogICAgICAgIHJldHVybiBzdXBlci5wdXRJZkFic2VudChrZXksIHZh\nbHVlKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBPYmplY3Qg\ncHV0KE9iamVjdCBrZXksIE9iamVjdCB2YWx1ZSkgewogICAgICAgIGlmICht\nYXhTaXplICE9IEludGVnZXIuTUFYX1ZBTFVFKQogICAgICAgICAgICByZW1v\ndmVPdmVyZmxvdyh0cnVlKTsKICAgICAgICByZXR1cm4gc3VwZXIucHV0KGtl\neSwgdmFsdWUpOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0TWF4U2l6ZSgp\nIHsKICAgICAgICByZXR1cm4gbWF4U2l6ZTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRNYXhTaXplKGludCBtYXgpIHsKICAgICAgICBpZiAobWF4IDwg\nMCkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbihTdHJpbmcudmFsdWVPZihtYXgpKTsKICAgICAgICBtYXhTaXplID0g\nbWF4OwoKICAgICAgICByZW1vdmVPdmVyZmxvdyhmYWxzZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBFcXVpdmFsZW50IHRvIDxjb2RlPnJlbW92ZU92ZXJm\nbG93KGZhbHNlKTwvY29kZT4uCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lk\nIHJlbW92ZU92ZXJmbG93KCkgewogICAgICAgIHJlbW92ZU92ZXJmbG93KGZh\nbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZXMgb3ZlcmZsb3cu\nIElmIDxjb2RlPmZvclB1dDwvY29kZT4gaXMgPGNvZGU+dHJ1ZTwvY29kZT4s\nIHRoZW4KICAgICAqIHRoaXMgdXNlcyA8Y29kZT5zaXplKCkgKyAxPC9jb2Rl\nPiB3aGVuIGNvbXB1dGluZyBzaXplLgogICAgICovCiAgICBwcm90ZWN0ZWQg\ndm9pZCByZW1vdmVPdmVyZmxvdyhib29sZWFuIGZvclB1dCkgewogICAgICAg\nIGludCBzaXplVG9Db21wYXJlVG8gPSBmb3JQdXQgPyBtYXhTaXplIC0gMSA6\nIG1heFNpemU7CiAgICAgICAgd2hpbGUgKHNpemUoKSA+IHNpemVUb0NvbXBh\ncmVUbykgewogICAgICAgICAgICBFbnRyeSBlbnRyeSA9IHJlbW92ZVJhbmRv\nbSgpOwogICAgICAgICAgICAvLyBpZiByZW1vdmVSYW5kb20oKSByZXR1cm5z\nIG51bGwsIGJyZWFrIG91dCBvZiB0aGUgbG9vcC4gT2YgY291cnNlLAogICAg\nICAgICAgICAvLyBzaW5jZSB3ZSdyZSBub3QgbG9ja2luZywgdGhlIHNpemUg\nbWlnaHQgbm90IGFjdHVhbGx5IGJlIG51bGwKICAgICAgICAgICAgLy8gd2hl\nbiB3ZSBkbyB0aGlzLiBCdXQgdGhpcyBwcmV2ZW50cyB3ZWlyZCByYWNlIGNv\nbmRpdGlvbnMgZnJvbQogICAgICAgICAgICAvLyBwdXR0aW5nIHRoaXMgdGhy\nZWFkIGludG8gbW9yZSBsb29wcy4KICAgICAgICAgICAgaWYgKGVudHJ5ID09\nIG51bGwpCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgb3Zl\ncmZsb3dSZW1vdmVkKGVudHJ5LmdldEtleSgpLCBlbnRyeS5nZXRWYWx1ZSgp\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNGdWxs\nKCkgewogICAgICAgIHJldHVybiBzaXplKCkgPj0gbWF4U2l6ZTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFRoaXMgaW1wbGVtZW50YXRpb24gZG9lcyBub3Ro\naW5nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBvdmVyZmxvd1JlbW92ZWQo\nT2JqZWN0IGtleSwgT2JqZWN0IHZhbHVlKSB7CiAgICB9CgogICAgcHJpdmF0\nZSB2b2lkIHdyaXRlT2JqZWN0KE9iamVjdE91dHB1dFN0cmVhbSBvdXQpIHRo\ncm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgb3V0LmRlZmF1bHRXcml0ZU9i\namVjdCgpOwogICAgICAgIG91dC53cml0ZUludChtYXhTaXplKTsKICAgIH0K\nCiAgICBwcml2YXRlIHZvaWQgcmVhZE9iamVjdChPYmplY3RJbnB1dFN0cmVh\nbSBpbikKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIENsYXNzTm90Rm91\nbmRFeGNlcHRpb24gewogICAgICAgIGluLmRlZmF1bHRSZWFkT2JqZWN0KCk7\nCiAgICAgICAgbWF4U2l6ZSA9IGluLnJlYWRJbnQoKTsKICAgIH0KfQo=\n","encoding":"base64"}

