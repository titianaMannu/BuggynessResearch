{"sha":"88665905304ab0490522d96ab605dc6cc46f75fb","node_id":"MDQ6QmxvYjIwNjM2NDo4ODY2NTkwNTMwNGFiMDQ5MDUyMmQ5NmFiNjA1ZGM2Y2M0NmY3NWZi","size":43040,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/88665905304ab0490522d96ab605dc6cc46f75fb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5pby5CeXRlQXJyYXlJbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEu\naW8uQnl0ZUFycmF5T3V0cHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5FeHRl\ncm5hbGl6YWJsZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9y\ndCBqYXZhLmlvLk9iamVjdElucHV0OwppbXBvcnQgamF2YS5pby5PYmplY3RJ\nbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uT2JqZWN0T3V0cHV0OwppbXBv\ncnQgamF2YS5pby5PYmplY3RPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlv\nLk9iamVjdFN0cmVhbUNsYXNzOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3Qu\nQXJyYXk7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51\ndGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuRW51bVNldDsKaW1w\nb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsK\naW1wb3J0IGphdmEudXRpbC5JZGVudGl0eUhhc2hNYXA7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRmx1c2hNb2RlVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLkxvY2tNb2RlVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1\nZXJ5OwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0\naWxzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZWUuTWFu\nYWdlZFJ1bnRpbWU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5j\nZS5QQ0VuaGFuY2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFu\nY2UuUENSZWdpc3RyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJu\nZWwuQWJzdHJhY3RCcm9rZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmtlcm5lbC5Ccm9rZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEua2VybmVsLkRlbGVnYXRpbmdCcm9rZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEua2VybmVsLkZpbmRDYWxsYmFja3M7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkxvY2tMZXZlbHM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLk9wQ2FsbGJhY2tzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeUZsdXNoTW9kZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5TGFuZ3Vh\nZ2VzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TZXE7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJh\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuanBxbC5K\nUFFMUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkNsb3NlYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5D\nbGFzc01ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nRmllbGRNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLlF1ZXJ5TWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5TZXF1ZW5jZU1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnV0aWwuRXhjZXB0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLkltcGxIZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5SdW50aW1lRXhjZXB0aW9uVHJhbnNsYXRvcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgovKioKICogSW1wbGVt\nZW50YXRpb24gb2Yge0BsaW5rIEVudGl0eU1hbmFnZXJ9IGludGVyZmFjZS4K\nICoKICogQGF1dGhvciBQYXRyaWNrIExpbnNrZXkKICogQGF1dGhvciBBYmUg\nV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIEVudGl0eU1h\nbmFnZXJJbXBsCiAgICBpbXBsZW1lbnRzIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nU1BJLCBFeHRlcm5hbGl6YWJsZSwKICAgIEZpbmRDYWxsYmFja3MsIE9wQ2Fs\nbGJhY2tzLCBDbG9zZWFibGUsIE9wZW5KUEFFbnRpdHlUcmFuc2FjdGlvbiB7\nCgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBM\nb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChFbnRpdHlNYW5hZ2VySW1w\nbC5jbGFzcyk7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBPYmplY3RbXSBF\nTVBUWV9PQkpFQ1RTID0gbmV3IE9iamVjdFswXTsKCiAgICBwcml2YXRlIERl\nbGVnYXRpbmdCcm9rZXIgX2Jyb2tlcjsKICAgIHByaXZhdGUgRW50aXR5TWFu\nYWdlckZhY3RvcnlJbXBsIF9lbWY7CiAgICBwcml2YXRlIE1hcDxGZXRjaENv\nbmZpZ3VyYXRpb24sRmV0Y2hQbGFuPiBfcGxhbnMgPQogICAgICAgIG5ldyBJ\nZGVudGl0eUhhc2hNYXA8RmV0Y2hDb25maWd1cmF0aW9uLEZldGNoUGxhbj4o\nMSk7CgogICAgcHJpdmF0ZSBSdW50aW1lRXhjZXB0aW9uVHJhbnNsYXRvciBy\nZXQgPQogICAgICAgIFBlcnNpc3RlbmNlRXhjZXB0aW9ucy5nZXRSb2xsYmFj\na1RyYW5zbGF0b3IodGhpcyk7CgogICAgcHVibGljIEVudGl0eU1hbmFnZXJJ\nbXBsKCkgewogICAgICAgIC8vIGZvciBFeHRlcm5hbGl6YWJsZQogICAgfQoK\nICAgIC8qKgogICAgICogQ29uc3RydWN0b3I7IHN1cHBseSBmYWN0b3J5IGFu\nZCBkZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIEVudGl0eU1hbmFnZXJJ\nbXBsKEVudGl0eU1hbmFnZXJGYWN0b3J5SW1wbCBmYWN0b3J5LAogICAgICAg\nIEJyb2tlciBicm9rZXIpIHsKICAgICAgICBpbml0aWFsaXplKGZhY3Rvcnks\nIGJyb2tlcik7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGluaXRpYWxpemUo\nRW50aXR5TWFuYWdlckZhY3RvcnlJbXBsIGZhY3RvcnksIEJyb2tlciBicm9r\nZXIpIHsKICAgICAgICBfZW1mID0gZmFjdG9yeTsKICAgICAgICBfYnJva2Vy\nID0gbmV3IERlbGVnYXRpbmdCcm9rZXIoYnJva2VyLCByZXQpOwogICAgICAg\nIF9icm9rZXIuc2V0SW1wbGljaXRCZWhhdmlvcih0aGlzLCByZXQpOwogICAg\nfQoKICAgIC8qKgogICAgICogQnJva2VyIGRlbGVnYXRlLgogICAgICovCiAg\nICBwdWJsaWMgQnJva2VyIGdldEJyb2tlcigpIHsKICAgICAgICByZXR1cm4g\nX2Jyb2tlci5nZXREZWxlZ2F0ZSgpOwogICAgfQoKICAgIHB1YmxpYyBPcGVu\nSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgZ2V0RW50aXR5TWFuYWdlckZhY3Rv\ncnkoKSB7CiAgICAgICAgcmV0dXJuIF9lbWY7CiAgICB9CgogICAgcHVibGlj\nIE9wZW5KUEFDb25maWd1cmF0aW9uIGdldENvbmZpZ3VyYXRpb24oKSB7CiAg\nICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0Q29uZmlndXJhdGlvbigpOwogICAg\nfQoKICAgIHB1YmxpYyBGZXRjaFBsYW4gZ2V0RmV0Y2hQbGFuKCkgewogICAg\nICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIu\nbG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEZldGNoQ29uZmln\ndXJhdGlvbiBmYyA9IF9icm9rZXIuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7\nCiAgICAgICAgICAgIEZldGNoUGxhbiBmcCA9IF9wbGFucy5nZXQoZmMpOwog\nICAgICAgICAgICBpZiAoZnAgPT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nZnAgPSBfZW1mLnRvRmV0Y2hQbGFuKF9icm9rZXIsIGZjKTsKICAgICAgICAg\nICAgICAgIF9wbGFucy5wdXQoZmMsIGZwKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICByZXR1cm4gZnA7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAg\nICAgICAgX2Jyb2tlci51bmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAg\ncHVibGljIEZldGNoUGxhbiBwdXNoRmV0Y2hQbGFuKCkgewogICAgICAgIGFz\nc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIubG9jaygp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9icm9rZXIucHVzaEZldGNo\nQ29uZmlndXJhdGlvbigpOwogICAgICAgICAgICByZXR1cm4gZ2V0RmV0Y2hQ\nbGFuKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2Jyb2tl\nci51bmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQg\ncG9wRmV0Y2hQbGFuKCkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tl\nZCgpOwogICAgICAgIF9icm9rZXIubG9jaygpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIF9icm9rZXIucG9wRmV0Y2hDb25maWd1cmF0aW9uKCk7CiAg\nICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2Jyb2tlci51bmxvY2so\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIENvbm5lY3Rpb25SZXRh\naW5Nb2RlIGdldENvbm5lY3Rpb25SZXRhaW5Nb2RlKCkgewogICAgICAgIHJl\ndHVybiBDb25uZWN0aW9uUmV0YWluTW9kZS5mcm9tS2VybmVsQ29uc3RhbnQo\nCiAgICAgICAgICAgIF9icm9rZXIuZ2V0Q29ubmVjdGlvblJldGFpbk1vZGUo\nKSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNUcmFuc2FjdGlvbk1h\nbmFnZWQoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuaXNNYW5hZ2VkKCk7\nCiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNNYW5hZ2VkKCkgewogICAg\nICAgIHJldHVybiBfYnJva2VyLmlzTWFuYWdlZCgpOwogICAgfQoKICAgIHB1\nYmxpYyBNYW5hZ2VkUnVudGltZSBnZXRNYW5hZ2VkUnVudGltZSgpIHsKICAg\nICAgICByZXR1cm4gX2Jyb2tlci5nZXRNYW5hZ2VkUnVudGltZSgpOwogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIGdldFN5bmNXaXRoTWFuYWdlZFRyYW5z\nYWN0aW9ucygpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRTeW5jV2l0\naE1hbmFnZWRUcmFuc2FjdGlvbnMoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRTeW5jV2l0aE1hbmFnZWRUcmFuc2FjdGlvbnMoYm9vbGVhbiBzeW5j\nKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAg\nX2Jyb2tlci5zZXRTeW5jV2l0aE1hbmFnZWRUcmFuc2FjdGlvbnMoc3luYyk7\nCiAgICB9CgogICAgcHVibGljIENsYXNzTG9hZGVyIGdldENsYXNzTG9hZGVy\nKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldENsYXNzTG9hZGVyKCk7\nCiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRDb25uZWN0aW9uVXNlck5h\nbWUoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0Q29ubmVjdGlvblVz\nZXJOYW1lKCk7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRDb25uZWN0\naW9uUGFzc3dvcmQoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0Q29u\nbmVjdGlvblBhc3N3b3JkKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\nZ2V0TXVsdGl0aHJlYWRlZCgpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5n\nZXRNdWx0aXRocmVhZGVkKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nTXVsdGl0aHJlYWRlZChib29sZWFuIG11bHRpdGhyZWFkZWQpIHsKICAgICAg\nICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnNl\ndE11bHRpdGhyZWFkZWQobXVsdGl0aHJlYWRlZCk7CiAgICB9CgogICAgcHVi\nbGljIGJvb2xlYW4gZ2V0SWdub3JlQ2hhbmdlcygpIHsKICAgICAgICByZXR1\ncm4gX2Jyb2tlci5nZXRJZ25vcmVDaGFuZ2VzKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0SWdub3JlQ2hhbmdlcyhib29sZWFuIHZhbCkgewogICAg\nICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIu\nc2V0SWdub3JlQ2hhbmdlcyh2YWwpOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGdldE5vbnRyYW5zYWN0aW9uYWxSZWFkKCkgewogICAgICAgIHJldHVy\nbiBfYnJva2VyLmdldE5vbnRyYW5zYWN0aW9uYWxSZWFkKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0Tm9udHJhbnNhY3Rpb25hbFJlYWQoYm9vbGVh\nbiB2YWwpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAg\nICAgICBfYnJva2VyLnNldE5vbnRyYW5zYWN0aW9uYWxSZWFkKHZhbCk7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0Tm9udHJhbnNhY3Rpb25hbFdy\naXRlKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldE5vbnRyYW5zYWN0\naW9uYWxXcml0ZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE5vbnRy\nYW5zYWN0aW9uYWxXcml0ZShib29sZWFuIHZhbCkgewogICAgICAgIGFzc2Vy\ndE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuc2V0Tm9udHJh\nbnNhY3Rpb25hbFdyaXRlKHZhbCk7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gZ2V0T3B0aW1pc3RpYygpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5n\nZXRPcHRpbWlzdGljKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0T3B0\naW1pc3RpYyhib29sZWFuIHZhbCkgewogICAgICAgIGFzc2VydE5vdENsb3Nl\nSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuc2V0T3B0aW1pc3RpYyh2YWwp\nOwogICAgfQoKICAgIHB1YmxpYyBSZXN0b3JlU3RhdGVUeXBlIGdldFJlc3Rv\ncmVTdGF0ZSgpIHsKICAgICAgICByZXR1cm4gUmVzdG9yZVN0YXRlVHlwZS5m\ncm9tS2VybmVsQ29uc3RhbnQoX2Jyb2tlci5nZXRSZXN0b3JlU3RhdGUoKSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UmVzdG9yZVN0YXRlKFJlc3Rv\ncmVTdGF0ZVR5cGUgdmFsKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7CiAgICAgICAgX2Jyb2tlci5zZXRSZXN0b3JlU3RhdGUodmFsLnRv\nS2VybmVsQ29uc3RhbnQoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nUmVzdG9yZVN0YXRlKGludCByZXN0b3JlKSB7CiAgICAgICAgYXNzZXJ0Tm90\nQ2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5zZXRSZXN0b3JlU3Rh\ndGUocmVzdG9yZSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0UmV0\nYWluU3RhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0UmV0YWlu\nU3RhdGUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRSZXRhaW5TdGF0\nZShib29sZWFuIHZhbCkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tl\nZCgpOwogICAgICAgIF9icm9rZXIuc2V0UmV0YWluU3RhdGUodmFsKTsKICAg\nIH0KCiAgICBwdWJsaWMgQXV0b0NsZWFyVHlwZSBnZXRBdXRvQ2xlYXIoKSB7\nCiAgICAgICAgcmV0dXJuIEF1dG9DbGVhclR5cGUuZnJvbUtlcm5lbENvbnN0\nYW50KF9icm9rZXIuZ2V0QXV0b0NsZWFyKCkpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldEF1dG9DbGVhcihBdXRvQ2xlYXJUeXBlIHZhbCkgewogICAg\nICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIu\nc2V0QXV0b0NsZWFyKHZhbC50b0tlcm5lbENvbnN0YW50KCkpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldEF1dG9DbGVhcihpbnQgYXV0b0NsZWFyKSB7\nCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jy\nb2tlci5zZXRBdXRvQ2xlYXIoYXV0b0NsZWFyKTsKICAgIH0KCiAgICBwdWJs\naWMgRGV0YWNoU3RhdGVUeXBlIGdldERldGFjaFN0YXRlKCkgewogICAgICAg\nIHJldHVybiBEZXRhY2hTdGF0ZVR5cGUuZnJvbUtlcm5lbENvbnN0YW50KF9i\ncm9rZXIuZ2V0RGV0YWNoU3RhdGUoKSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgc2V0RGV0YWNoU3RhdGUoRGV0YWNoU3RhdGVUeXBlIHR5cGUpIHsKICAg\nICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2Vy\nLnNldERldGFjaFN0YXRlKHR5cGUudG9LZXJuZWxDb25zdGFudCgpKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzZXREZXRhY2hTdGF0ZShpbnQgZGV0YWNo\nKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAg\nX2Jyb2tlci5zZXREZXRhY2hTdGF0ZShkZXRhY2gpOwogICAgfQoKICAgIHB1\nYmxpYyBFbnVtU2V0PEF1dG9EZXRhY2hUeXBlPiBnZXRBdXRvRGV0YWNoKCkg\newogICAgICAgIHJldHVybiBBdXRvRGV0YWNoVHlwZS50b0VudW1TZXQoX2Jy\nb2tlci5nZXRBdXRvRGV0YWNoKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldEF1dG9EZXRhY2goQXV0b0RldGFjaFR5cGUgZmxhZykgewogICAgICAg\nIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuc2V0\nQXV0b0RldGFjaChBdXRvRGV0YWNoVHlwZS5mcm9tRW51bVNldChFbnVtU2V0\nLm9mKGZsYWcpKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0QXV0b0Rl\ndGFjaChFbnVtU2V0PEF1dG9EZXRhY2hUeXBlPiBmbGFncykgewogICAgICAg\nIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuc2V0\nQXV0b0RldGFjaChBdXRvRGV0YWNoVHlwZS5mcm9tRW51bVNldChmbGFncykp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEF1dG9EZXRhY2goaW50IGF1\ndG9EZXRhY2hGbGFncykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tl\nZCgpOwogICAgICAgIF9icm9rZXIuc2V0QXV0b0RldGFjaChhdXRvRGV0YWNo\nRmxhZ3MpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEF1dG9EZXRhY2go\nQXV0b0RldGFjaFR5cGUgdmFsdWUsIGJvb2xlYW4gb24pIHsKICAgICAgICBh\nc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnNldEF1\ndG9EZXRhY2goQXV0b0RldGFjaFR5cGUuZnJvbUVudW1TZXQoRW51bVNldC5v\nZih2YWx1ZSkpLG9uKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRBdXRv\nRGV0YWNoKGludCBmbGFnLCBib29sZWFuIG9uKSB7CiAgICAgICAgYXNzZXJ0\nTm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5zZXRBdXRvRGV0\nYWNoKGZsYWcsIG9uKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRF\ndmljdEZyb21TdG9yZUNhY2hlKCkgewogICAgICAgIHJldHVybiBfYnJva2Vy\nLmdldEV2aWN0RnJvbURhdGFDYWNoZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldEV2aWN0RnJvbVN0b3JlQ2FjaGUoYm9vbGVhbiBldmljdCkgewog\nICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9r\nZXIuc2V0RXZpY3RGcm9tRGF0YUNhY2hlKGV2aWN0KTsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiBnZXRQb3B1bGF0ZVN0b3JlQ2FjaGUoKSB7CiAgICAg\nICAgcmV0dXJuIF9icm9rZXIuZ2V0UG9wdWxhdGVEYXRhQ2FjaGUoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRQb3B1bGF0ZVN0b3JlQ2FjaGUoYm9v\nbGVhbiBjYWNoZSkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgp\nOwogICAgICAgIF9icm9rZXIuc2V0UG9wdWxhdGVEYXRhQ2FjaGUoY2FjaGUp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzVHJhY2tDaGFuZ2VzQnlU\neXBlKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmlzVHJhY2tDaGFuZ2Vz\nQnlUeXBlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VHJhY2tDaGFu\nZ2VzQnlUeXBlKGJvb2xlYW4gdHJhY2tCeVR5cGUpIHsKICAgICAgICBhc3Nl\ncnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnNldFRyYWNr\nQ2hhbmdlc0J5VHlwZSh0cmFja0J5VHlwZSk7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gaXNMYXJnZVRyYW5zYWN0aW9uKCkgewogICAgICAgIHJldHVy\nbiBpc1RyYWNrQ2hhbmdlc0J5VHlwZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldExhcmdlVHJhbnNhY3Rpb24oYm9vbGVhbiB2YWx1ZSkgewogICAg\nICAgIHNldFRyYWNrQ2hhbmdlc0J5VHlwZSh2YWx1ZSk7CiAgICB9CgogICAg\ncHVibGljIE9iamVjdCBnZXRVc2VyT2JqZWN0KE9iamVjdCBrZXkpIHsKICAg\nICAgICByZXR1cm4gX2Jyb2tlci5nZXRVc2VyT2JqZWN0KGtleSk7CiAgICB9\nCgogICAgcHVibGljIE9iamVjdCBwdXRVc2VyT2JqZWN0KE9iamVjdCBrZXks\nIE9iamVjdCB2YWwpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQo\nKTsKICAgICAgICByZXR1cm4gX2Jyb2tlci5wdXRVc2VyT2JqZWN0KGtleSwg\ndmFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRUcmFuc2FjdGlvbkxp\nc3RlbmVyKE9iamVjdCBsaXN0ZW5lcikgewogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuYWRkVHJhbnNhY3Rpb25M\naXN0ZW5lcihsaXN0ZW5lcik7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVt\nb3ZlVHJhbnNhY3Rpb25MaXN0ZW5lcihPYmplY3QgbGlzdGVuZXIpIHsKICAg\nICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2Vy\nLnJlbW92ZVRyYW5zYWN0aW9uTGlzdGVuZXIobGlzdGVuZXIpOwogICAgfQoK\nICAgIHB1YmxpYyBFbnVtU2V0PENhbGxiYWNrTW9kZT4gZ2V0VHJhbnNhY3Rp\nb25MaXN0ZW5lckNhbGxiYWNrTW9kZXMoKSB7CiAgICAgICAgcmV0dXJuIENh\nbGxiYWNrTW9kZS50b0VudW1TZXQoCiAgICAgICAgICAgIF9icm9rZXIuZ2V0\nVHJhbnNhY3Rpb25MaXN0ZW5lckNhbGxiYWNrTW9kZSgpKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBzZXRUcmFuc2FjdGlvbkxpc3RlbmVyQ2FsbGJhY2tN\nb2RlKENhbGxiYWNrTW9kZSBtb2RlKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xv\nc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5zZXRUcmFuc2FjdGlvbkxp\nc3RlbmVyQ2FsbGJhY2tNb2RlKAogICAgICAgICAgICBDYWxsYmFja01vZGUu\nZnJvbUVudW1TZXQoRW51bVNldC5vZihtb2RlKSkpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldFRyYW5zYWN0aW9uTGlzdGVuZXJDYWxsYmFja01vZGUo\nRW51bVNldDxDYWxsYmFja01vZGU+IG1vZGVzKXsKICAgICAgICBhc3NlcnRO\nb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnNldFRyYW5zYWN0\naW9uTGlzdGVuZXJDYWxsYmFja01vZGUoCiAgICAgICAgICAgIENhbGxiYWNr\nTW9kZS5mcm9tRW51bVNldChtb2RlcykpOwogICAgfQoKICAgIHB1YmxpYyBp\nbnQgZ2V0VHJhbnNhY3Rpb25MaXN0ZW5lckNhbGxiYWNrTW9kZSgpIHsKICAg\nICAgICByZXR1cm4gX2Jyb2tlci5nZXRUcmFuc2FjdGlvbkxpc3RlbmVyQ2Fs\nbGJhY2tNb2RlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VHJhbnNh\nY3Rpb25MaXN0ZW5lckNhbGxiYWNrTW9kZShpbnQgY2FsbGJhY2tNb2RlKSB7\nCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0\naW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYWRkTGlmZWN5Y2xlTGlz\ndGVuZXIoT2JqZWN0IGxpc3RlbmVyLCBDbGFzcy4uLiBjbGFzc2VzKSB7CiAg\nICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tl\nci5hZGRMaWZlY3ljbGVMaXN0ZW5lcihsaXN0ZW5lciwgY2xhc3Nlcyk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcmVtb3ZlTGlmZWN5Y2xlTGlzdGVuZXIo\nT2JqZWN0IGxpc3RlbmVyKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7CiAgICAgICAgX2Jyb2tlci5yZW1vdmVMaWZlY3ljbGVMaXN0ZW5l\ncihsaXN0ZW5lcik7CiAgICB9CgogICAgcHVibGljIEVudW1TZXQ8Q2FsbGJh\nY2tNb2RlPiBnZXRMaWZlY3ljbGVMaXN0ZW5lckNhbGxiYWNrTW9kZXMoKSB7\nCiAgICAgICAgcmV0dXJuIENhbGxiYWNrTW9kZS50b0VudW1TZXQoCiAgICAg\nICAgICAgIF9icm9rZXIuZ2V0TGlmZWN5Y2xlTGlzdGVuZXJDYWxsYmFja01v\nZGUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TGlmZWN5Y2xlTGlz\ndGVuZXJDYWxsYmFja01vZGUoQ2FsbGJhY2tNb2RlIG1vZGUpIHsKICAgICAg\nICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnNl\ndExpZmVjeWNsZUxpc3RlbmVyQ2FsbGJhY2tNb2RlKAogICAgICAgICAgICBD\nYWxsYmFja01vZGUuZnJvbUVudW1TZXQoRW51bVNldC5vZihtb2RlKSkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldExpZmVjeWNsZUxpc3RlbmVyQ2Fs\nbGJhY2tNb2RlKEVudW1TZXQ8Q2FsbGJhY2tNb2RlPiBtb2RlcykgewogICAg\nICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIu\nc2V0TGlmZWN5Y2xlTGlzdGVuZXJDYWxsYmFja01vZGUoCiAgICAgICAgICAg\nIENhbGxiYWNrTW9kZS5mcm9tRW51bVNldChtb2RlcykpOwogICAgfQoKICAg\nIHB1YmxpYyBpbnQgZ2V0TGlmZWN5Y2xlTGlzdGVuZXJDYWxsYmFja01vZGUo\nKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0TGlmZWN5Y2xlTGlzdGVu\nZXJDYWxsYmFja01vZGUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRM\naWZlY3ljbGVMaXN0ZW5lckNhbGxiYWNrTW9kZShpbnQgY2FsbGJhY2tNb2Rl\nKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAg\nX2Jyb2tlci5zZXRMaWZlY3ljbGVMaXN0ZW5lckNhbGxiYWNrTW9kZShjYWxs\nYmFja01vZGUpOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNo\nZWNrZWQiKQogICAgcHVibGljIDxUPiBUIGdldFJlZmVyZW5jZShDbGFzczxU\nPiBjbHMsIE9iamVjdCBvaWQpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUlu\ndm9rZWQoKTsKICAgICAgICBvaWQgPSBfYnJva2VyLm5ld09iamVjdElkKGNs\ncywgb2lkKTsKICAgICAgICByZXR1cm4gKFQpIF9icm9rZXIuZmluZChvaWQs\nIGZhbHNlLCB0aGlzKTsKICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5ncygi\ndW5jaGVja2VkIikKICAgIHB1YmxpYyA8VD4gVCBmaW5kKENsYXNzPFQ+IGNs\ncywgT2JqZWN0IG9pZCkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tl\nZCgpOwogICAgICAgIG9pZCA9IF9icm9rZXIubmV3T2JqZWN0SWQoY2xzLCBv\naWQpOwogICAgICAgIHJldHVybiAoVCkgX2Jyb2tlci5maW5kKG9pZCwgdHJ1\nZSwgdGhpcyk7CiAgICB9CgogICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hl\nY2tlZCIpCiAgICBwdWJsaWMgPFQ+IFRbXSBmaW5kQWxsKENsYXNzPFQ+IGNs\ncywgT2JqZWN0Li4uIG9pZHMpIHsKICAgICAgICBpZiAob2lkcy5sZW5ndGgg\nPT0gMCkKICAgICAgICAgICAgcmV0dXJuIChUW10pIEFycmF5Lm5ld0luc3Rh\nbmNlKGNscywgMCk7CiAgICAgICAgQ29sbGVjdGlvbjxUPiByZXQgPSBmaW5k\nQWxsKGNscywgQXJyYXlzLmFzTGlzdChvaWRzKSk7CiAgICAgICAgcmV0dXJu\nIHJldC50b0FycmF5KChUW10pIEFycmF5Lm5ld0luc3RhbmNlKGNscywgcmV0\nLnNpemUoKSkpOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNo\nZWNrZWQiKQogICAgcHVibGljIDxUPiBDb2xsZWN0aW9uPFQ+IGZpbmRBbGwo\nZmluYWwgQ2xhc3M8VD4gY2xzLCBDb2xsZWN0aW9uIG9pZHMpIHsKICAgICAg\nICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBPYmplY3RbXSBv\nYmpzID0gX2Jyb2tlci5maW5kQWxsKG9pZHMsIHRydWUsIG5ldyBGaW5kQ2Fs\nbGJhY2tzKCkgewogICAgICAgICAgICBwdWJsaWMgT2JqZWN0IHByb2Nlc3NB\ncmd1bWVudChPYmplY3Qgb2lkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4g\nX2Jyb2tlci5uZXdPYmplY3RJZChjbHMsIG9pZCk7CiAgICAgICAgICAgIH0K\nCiAgICAgICAgICAgIHB1YmxpYyBPYmplY3QgcHJvY2Vzc1JldHVybihPYmpl\nY3Qgb2lkLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtKSB7CiAgICAgICAgICAg\nICAgICByZXR1cm4gRW50aXR5TWFuYWdlckltcGwudGhpcy5wcm9jZXNzUmV0\ndXJuKG9pZCwgc20pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAg\nICAgcmV0dXJuIChDb2xsZWN0aW9uPFQ+KSBBcnJheXMuYXNMaXN0KG9ianMp\nOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQog\nICAgcHVibGljIDxUPiBUIGZpbmRDYWNoZWQoQ2xhc3M8VD4gY2xzLCBPYmpl\nY3Qgb2lkKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAg\nICAgICAgcmV0dXJuIChUKSBfYnJva2VyLmZpbmRDYWNoZWQoX2Jyb2tlci5u\nZXdPYmplY3RJZChjbHMsIG9pZCksIHRoaXMpOwogICAgfQoKICAgIHB1Ymxp\nYyBDbGFzcyBnZXRPYmplY3RJZENsYXNzKENsYXNzIGNscykgewogICAgICAg\nIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIGlmIChjbHMgPT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJu\nIEpQQUZhY2FkZUhlbHBlci5mcm9tT3BlbkpQQU9iamVjdElkQ2xhc3MKICAg\nICAgICAgICAgICAgIChfYnJva2VyLmdldE9iamVjdElkVHlwZShjbHMpKTsK\nICAgIH0KCiAgICBwdWJsaWMgT3BlbkpQQUVudGl0eVRyYW5zYWN0aW9uIGdl\ndFRyYW5zYWN0aW9uKCkgewogICAgICAgIGlmIChfYnJva2VyLmlzTWFuYWdl\nZCgpKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0\naW9uKF9sb2MuZ2V0KCJnZXQtbWFuYWdlZC10cmFucyIpLAogICAgICAgICAg\nICAgICAgbnVsbCwgbnVsbCwgZmFsc2UpOwogICAgICAgIHJldHVybiB0aGlz\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGpvaW5UcmFuc2FjdGlvbigpIHsK\nICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBpZiAo\nIV9icm9rZXIuc3luY1dpdGhNYW5hZ2VkVHJhbnNhY3Rpb24oKSkKICAgICAg\nICAgICAgdGhyb3cgbmV3IFRyYW5zYWN0aW9uUmVxdWlyZWRFeGNlcHRpb24o\nX2xvYy5nZXQKICAgICAgICAgICAgICAgICgibm8tbWFuYWdlZC10cmFucyIp\nLCBudWxsLCBudWxsLCBmYWxzZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nYmVnaW4oKSB7CiAgICAgICAgX2Jyb2tlci5iZWdpbigpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGNvbW1pdCgpIHsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBfYnJva2VyLmNvbW1pdCgpOwogICAgICAgIH0gY2F0Y2ggKFJvbGxi\nYWNrRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAg\nICB9IGNhdGNoIChJbGxlZ2FsU3RhdGVFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICB0aHJvdyBlOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIC8vIFJvbGxiYWNrRXhjZXB0aW9ucyBhcmUgc3BlY2lh\nbCBhbmQgYXJlbid0IGhhbmRsZWQgYnkgdGhlCiAgICAgICAgICAgIC8vIG5v\ncm1hbCBleGNlcHRpb24gdHJhbnNsYXRvciwgc2luY2UgdGhlIHNwZWMgc2F5\ncyB0aGV5CiAgICAgICAgICAgIC8vIHNob3VsZCBiZSB0aHJvd24gd2hlbmV2\nZXIgdGhlIGNvbW1pdCBmYWlscyBmb3IgYW55IHJlYXNvbiBhdAogICAgICAg\nICAgICAvLyBhbGwsIHdoZXJhcyB0aGUgZXhjZXB0aW9uIHRyYW5zbGF0b3Ig\naGFuZGxlcyBleGNlcHRpb25zIHRoYXQKICAgICAgICAgICAgLy8gYXJlIGNh\ndXNlZCBmb3Igc3BlY2lmaWMgcmVhc29ucwogICAgICAgICAgICB0aHJvdyBu\nZXcgUm9sbGJhY2tFeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHJvbGxiYWNrKCkgewogICAgICAgIF9icm9rZXIucm9s\nbGJhY2soKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjb21taXRBbmRSZXN1\nbWUoKSB7CiAgICAgICAgX2Jyb2tlci5jb21taXRBbmRSZXN1bWUoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCByb2xsYmFja0FuZFJlc3VtZSgpIHsKICAg\nICAgICBfYnJva2VyLnJvbGxiYWNrQW5kUmVzdW1lKCk7CiAgICB9CgogICAg\ncHVibGljIFRocm93YWJsZSBnZXRSb2xsYmFja0NhdXNlKCkgewogICAgICAg\nIGlmICghaXNBY3RpdmUoKSkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVn\nYWxTdGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgibm8tdHJhbnNhY3Rpb24iKQog\nICAgICAgICAgICAgICAgLmdldE1lc3NhZ2UoKSk7CgogICAgICAgIHJldHVy\nbiBfYnJva2VyLmdldFJvbGxiYWNrQ2F1c2UoKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBnZXRSb2xsYmFja09ubHkoKSB7CiAgICAgICAgaWYgKCFp\nc0FjdGl2ZSgpKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRl\nRXhjZXB0aW9uKF9sb2MuZ2V0KCJuby10cmFuc2FjdGlvbiIpCiAgICAgICAg\nICAgICAgICAuZ2V0TWVzc2FnZSgpKTsKCiAgICAgICAgcmV0dXJuIF9icm9r\nZXIuZ2V0Um9sbGJhY2tPbmx5KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0Um9sbGJhY2tPbmx5KCkgewogICAgICAgIF9icm9rZXIuc2V0Um9sbGJh\nY2tPbmx5KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Um9sbGJhY2tP\nbmx5KFRocm93YWJsZSBjYXVzZSkgewogICAgICAgIF9icm9rZXIuc2V0Um9s\nbGJhY2tPbmx5KGNhdXNlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRT\nYXZlcG9pbnQoU3RyaW5nIG5hbWUpIHsKICAgICAgICBhc3NlcnROb3RDbG9z\nZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnNldFNhdmVwb2ludChuYW1l\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByb2xsYmFja1RvU2F2ZXBvaW50\nKCkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAg\nIF9icm9rZXIucm9sbGJhY2tUb1NhdmVwb2ludCgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHJvbGxiYWNrVG9TYXZlcG9pbnQoU3RyaW5nIG5hbWUpIHsK\nICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJv\na2VyLnJvbGxiYWNrVG9TYXZlcG9pbnQobmFtZSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgcmVsZWFzZVNhdmVwb2ludCgpIHsKICAgICAgICBhc3NlcnRO\nb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnJlbGVhc2VTYXZl\ncG9pbnQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZWxlYXNlU2F2ZXBv\naW50KFN0cmluZyBuYW1lKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7CiAgICAgICAgX2Jyb2tlci5yZWxlYXNlU2F2ZXBvaW50KG5hbWUp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGZsdXNoKCkgewogICAgICAgIGFz\nc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuYXNzZXJ0\nT3BlbigpOwogICAgICAgIF9icm9rZXIuYXNzZXJ0QWN0aXZlVHJhbnNhY3Rp\nb24oKTsKICAgICAgICBfYnJva2VyLmZsdXNoKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgcHJlRmx1c2goKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5wcmVGbHVzaCgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHZhbGlkYXRlQ2hhbmdlcygpIHsKICAgICAgICBh\nc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnZhbGlk\nYXRlQ2hhbmdlcygpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzQWN0\naXZlKCkgewogICAgICAgIHJldHVybiBpc09wZW4oKSAmJiBfYnJva2VyLmlz\nQWN0aXZlKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNTdG9yZUFj\ndGl2ZSgpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5pc1N0b3JlQWN0aXZl\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYmVnaW5TdG9yZSgpIHsKICAg\nICAgICBfYnJva2VyLmJlZ2luU3RvcmUoKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBjb250YWlucyhPYmplY3QgZW50aXR5KSB7CiAgICAgICAgYXNz\nZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgaWYgKGVudGl0eSA9PSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgT3BlbkpQ\nQVN0YXRlTWFuYWdlciBzbSA9IF9icm9rZXIuZ2V0U3RhdGVNYW5hZ2VyKGVu\ndGl0eSk7CiAgICAgICAgaWYgKHNtID09IG51bGwKICAgICAgICAgICAgJiYg\nIUltcGxIZWxwZXIuaXNNYW5hZ2VkVHlwZShnZXRDb25maWd1cmF0aW9uKCks\nIGVudGl0eS5nZXRDbGFzcygpKSkKICAgICAgICAgICAgdGhyb3cgbmV3IEFy\nZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0KCJub3QtZW50aXR5IiwKICAgICAg\nICAgICAgICAgIGVudGl0eS5nZXRDbGFzcygpKSwgbnVsbCwgbnVsbCwgdHJ1\nZSk7CiAgICAgICAgcmV0dXJuIHNtICE9IG51bGwgJiYgIXNtLmlzRGVsZXRl\nZCgpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5zQWxsKE9i\namVjdC4uLiBlbnRpdGllcykgewogICAgICAgIGZvciAoT2JqZWN0IGVudGl0\neSA6IGVudGl0aWVzKQogICAgICAgICAgICBpZiAoIWNvbnRhaW5zKGVudGl0\neSkpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNB\nbGwoQ29sbGVjdGlvbiBlbnRpdGllcykgewogICAgICAgIGZvciAoT2JqZWN0\nIGVudGl0eSA6IGVudGl0aWVzKQogICAgICAgICAgICBpZiAoIWNvbnRhaW5z\nKGVudGl0eSkpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg\nICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIHZvaWQgcGVyc2lz\ndChPYmplY3QgZW50aXR5KSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7CiAgICAgICAgX2Jyb2tlci5wZXJzaXN0KGVudGl0eSwgdGhpcyk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgcGVyc2lzdEFsbChPYmplY3QuLi4g\nZW50aXRpZXMpIHsKICAgICAgICBwZXJzaXN0QWxsKEFycmF5cy5hc0xpc3Qo\nZW50aXRpZXMpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwZXJzaXN0QWxs\nKENvbGxlY3Rpb24gZW50aXRpZXMpIHsKICAgICAgICBhc3NlcnROb3RDbG9z\nZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnBlcnNpc3RBbGwoZW50aXRp\nZXMsIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlbW92ZShPYmpl\nY3QgZW50aXR5KSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7\nCiAgICAgICAgX2Jyb2tlci5kZWxldGUoZW50aXR5LCB0aGlzKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCByZW1vdmVBbGwoT2JqZWN0Li4uIGVudGl0aWVz\nKSB7CiAgICAgICAgcmVtb3ZlQWxsKEFycmF5cy5hc0xpc3QoZW50aXRpZXMp\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZW1vdmVBbGwoQ29sbGVjdGlv\nbiBlbnRpdGllcykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgp\nOwogICAgICAgIF9icm9rZXIuZGVsZXRlQWxsKGVudGl0aWVzLCB0aGlzKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZWxlYXNlKE9iamVjdCBlbnRpdHkp\nIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBf\nYnJva2VyLnJlbGVhc2UoZW50aXR5LCB0aGlzKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCByZWxlYXNlQWxsKENvbGxlY3Rpb24gZW50aXRpZXMpIHsKICAg\nICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2Vy\nLnJlbGVhc2VBbGwoZW50aXRpZXMsIHRoaXMpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHJlbGVhc2VBbGwoT2JqZWN0Li4uIGVudGl0aWVzKSB7CiAgICAg\nICAgcmVsZWFzZUFsbChBcnJheXMuYXNMaXN0KGVudGl0aWVzKSk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgcmVmcmVzaChPYmplY3QgZW50aXR5KSB7CiAg\nICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tl\nci5hc3NlcnRXcml0ZU9wZXJhdGlvbigpOwogICAgICAgIF9icm9rZXIucmVm\ncmVzaChlbnRpdHksIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJl\nZnJlc2hBbGwoKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7\nCiAgICAgICAgX2Jyb2tlci5hc3NlcnRXcml0ZU9wZXJhdGlvbigpOwogICAg\nICAgIF9icm9rZXIucmVmcmVzaEFsbChfYnJva2VyLmdldFRyYW5zYWN0aW9u\nYWxPYmplY3RzKCksIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJl\nZnJlc2hBbGwoQ29sbGVjdGlvbiBlbnRpdGllcykgewogICAgICAgIGFzc2Vy\ndE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuYXNzZXJ0V3Jp\ndGVPcGVyYXRpb24oKTsKICAgICAgICBfYnJva2VyLnJlZnJlc2hBbGwoZW50\naXRpZXMsIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlZnJlc2hB\nbGwoT2JqZWN0Li4uIGVudGl0aWVzKSB7CiAgICAgICAgcmVmcmVzaEFsbChB\ncnJheXMuYXNMaXN0KGVudGl0aWVzKSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgcmV0cmlldmUoT2JqZWN0IGVudGl0eSkgewogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIucmV0cmlldmUoZW50\naXR5LCB0cnVlLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZXRy\naWV2ZUFsbChDb2xsZWN0aW9uIGVudGl0aWVzKSB7CiAgICAgICAgYXNzZXJ0\nTm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5yZXRyaWV2ZUFs\nbChlbnRpdGllcywgdHJ1ZSwgdGhpcyk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgcmV0cmlldmVBbGwoT2JqZWN0Li4uIGVudGl0aWVzKSB7CiAgICAgICAg\ncmV0cmlldmVBbGwoQXJyYXlzLmFzTGlzdChlbnRpdGllcykpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGV2aWN0KE9iamVjdCBlbnRpdHkpIHsKICAgICAg\nICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLmV2\naWN0KGVudGl0eSwgdGhpcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZXZp\nY3RBbGwoQ29sbGVjdGlvbiBlbnRpdGllcykgewogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuZXZpY3RBbGwoZW50\naXRpZXMsIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGV2aWN0QWxs\nKE9iamVjdC4uLiBlbnRpdGllcykgewogICAgICAgIGV2aWN0QWxsKEFycmF5\ncy5hc0xpc3QoZW50aXRpZXMpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBl\ndmljdEFsbCgpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsK\nICAgICAgICBfYnJva2VyLmV2aWN0QWxsKHRoaXMpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGV2aWN0QWxsKENsYXNzIGNscykgewogICAgICAgIGFzc2Vy\ndE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuZXZpY3RBbGwo\nX2Jyb2tlci5uZXdFeHRlbnQoY2xzLCB0cnVlKSwgdGhpcyk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgZXZpY3RBbGwoRXh0ZW50IGV4dGVudCkgewogICAg\nICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIu\nZXZpY3RBbGwoKChFeHRlbnRJbXBsKSBleHRlbnQpLmdldERlbGVnYXRlKCks\nIHRoaXMpOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNr\nZWQiKQogICAgcHVibGljIDxUPiBUIGRldGFjaChUIGVudGl0eSkgewogICAg\nICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIHJldHVybiAo\nVCkgX2Jyb2tlci5kZXRhY2goZW50aXR5LCB0aGlzKTsKICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0W10gZGV0YWNoQWxsKE9iamVjdC4uLiBlbnRpdGllcykg\newogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIHJl\ndHVybiBfYnJva2VyLmRldGFjaEFsbChBcnJheXMuYXNMaXN0KGVudGl0aWVz\nKSwgdGhpcyk7CiAgICB9CgogICAgcHVibGljIENvbGxlY3Rpb24gZGV0YWNo\nQWxsKENvbGxlY3Rpb24gZW50aXRpZXMpIHsKICAgICAgICBhc3NlcnROb3RD\nbG9zZUludm9rZWQoKTsKICAgICAgICByZXR1cm4gQXJyYXlzLmFzTGlzdChf\nYnJva2VyLmRldGFjaEFsbChlbnRpdGllcywgdGhpcykpOwogICAgfQoKICAg\nIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIDxU\nPiBUIG1lcmdlKFQgZW50aXR5KSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7CiAgICAgICAgcmV0dXJuIChUKSBfYnJva2VyLmF0dGFjaChl\nbnRpdHksIHRydWUsIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3Rb\nXSBtZXJnZUFsbChPYmplY3QuLi4gZW50aXRpZXMpIHsKICAgICAgICBpZiAo\nZW50aXRpZXMubGVuZ3RoID09IDApCiAgICAgICAgICAgIHJldHVybiBFTVBU\nWV9PQkpFQ1RTOwogICAgICAgIHJldHVybiBtZXJnZUFsbChBcnJheXMuYXNM\naXN0KGVudGl0aWVzKSkudG9BcnJheSgpOwogICAgfQoKICAgIHB1YmxpYyBD\nb2xsZWN0aW9uIG1lcmdlQWxsKENvbGxlY3Rpb24gZW50aXRpZXMpIHsKICAg\nICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICByZXR1cm4g\nQXJyYXlzLmFzTGlzdChfYnJva2VyLmF0dGFjaEFsbChlbnRpdGllcywgdHJ1\nZSwgdGhpcykpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRyYW5zYWN0aW9u\nYWwoT2JqZWN0IGVudGl0eSwgYm9vbGVhbiB1cGRhdGVWZXJzaW9uKSB7CiAg\nICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tl\nci50cmFuc2FjdGlvbmFsKGVudGl0eSwgdXBkYXRlVmVyc2lvbiwgdGhpcyk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdHJhbnNhY3Rpb25hbEFsbChDb2xs\nZWN0aW9uIG9ianMsIGJvb2xlYW4gdXBkYXRlVmVyc2lvbikgewogICAgICAg\nIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIudHJh\nbnNhY3Rpb25hbEFsbChvYmpzLCB1cGRhdGVWZXJzaW9uLCB0aGlzKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0cmFuc2FjdGlvbmFsQWxsKE9iamVjdFtd\nIG9ianMsIGJvb2xlYW4gdXBkYXRlVmVyc2lvbikgewogICAgICAgIGFzc2Vy\ndE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIudHJhbnNhY3Rp\nb25hbEFsbChBcnJheXMuYXNMaXN0KG9ianMpLCB1cGRhdGVWZXJzaW9uLCB0\naGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBub250cmFuc2FjdGlvbmFs\nKE9iamVjdCBlbnRpdHkpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9r\nZWQoKTsKICAgICAgICBfYnJva2VyLm5vbnRyYW5zYWN0aW9uYWwoZW50aXR5\nLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBub250cmFuc2FjdGlv\nbmFsQWxsKENvbGxlY3Rpb24gb2JqcykgewogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIubm9udHJhbnNhY3Rpb25h\nbEFsbChvYmpzLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBub250\ncmFuc2FjdGlvbmFsQWxsKE9iamVjdFtdIG9ianMpIHsKICAgICAgICBhc3Nl\ncnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLm5vbnRyYW5z\nYWN0aW9uYWxBbGwoQXJyYXlzLmFzTGlzdChvYmpzKSwgdGhpcyk7CiAgICB9\nCgogICAgcHVibGljIEdlbmVyYXRvciBnZXROYW1lZEdlbmVyYXRvcihTdHJp\nbmcgbmFtZSkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIFNlcXVlbmNlTWV0YURhdGEgbWV0\nYSA9IF9icm9rZXIuZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAgICAg\nICAgZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRTZXF1ZW5j\nZU1ldGFEYXRhKG5hbWUsCiAgICAgICAgICAgICAgICBfYnJva2VyLmdldENs\nYXNzTG9hZGVyKCksIHRydWUpOwogICAgICAgICAgICBTZXEgc2VxID0gbWV0\nYS5nZXRJbnN0YW5jZShfYnJva2VyLmdldENsYXNzTG9hZGVyKCkpOwogICAg\nICAgICAgICByZXR1cm4gbmV3IEdlbmVyYXRvckltcGwoc2VxLCBuYW1lLCBf\nYnJva2VyLCBudWxsKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0\naW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0\naW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKHJlKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIEdlbmVyYXRvciBnZXRJZEdlbmVyYXRvcihDbGFz\ncyBmb3JDbGFzcykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIENsYXNzTWV0YURhdGEgbWV0\nYSA9IF9icm9rZXIuZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAgICAg\nICAgZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNZXRhRGF0\nYShmb3JDbGFzcywKICAgICAgICAgICAgICAgIF9icm9rZXIuZ2V0Q2xhc3NM\nb2FkZXIoKSwgdHJ1ZSk7CiAgICAgICAgICAgIFNlcSBzZXEgPSBfYnJva2Vy\nLmdldElkZW50aXR5U2VxdWVuY2UobWV0YSk7CiAgICAgICAgICAgIHJldHVy\nbiAoc2VxID09IG51bGwpID8gbnVsbCA6IG5ldyBHZW5lcmF0b3JJbXBsKHNl\ncSwgbnVsbCwgX2Jyb2tlciwKICAgICAgICAgICAgICAgIG1ldGEpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93\nIFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9u\nKGUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgR2VuZXJhdG9yIGdl\ndEZpZWxkR2VuZXJhdG9yKENsYXNzIGZvckNsYXNzLCBTdHJpbmcgZmllbGRO\nYW1lKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gX2Jy\nb2tlci5nZXRDb25maWd1cmF0aW9uKCkuCiAgICAgICAgICAgICAgICBnZXRN\nZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpLmdldE1ldGFEYXRhKGZvckNs\nYXNzLAogICAgICAgICAgICAgICAgX2Jyb2tlci5nZXRDbGFzc0xvYWRlcigp\nLCB0cnVlKTsKICAgICAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQgPSBtZXRh\nLmdldEZpZWxkKGZpZWxkTmFtZSk7CiAgICAgICAgICAgIGlmIChmbWQgPT0g\nbnVsbCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2Vw\ndGlvbihfbG9jLmdldCgibm8tbmFtZWQtZmllbGQiLAogICAgICAgICAgICAg\nICAgICAgIGZvckNsYXNzLCBmaWVsZE5hbWUpLCBudWxsLCBudWxsLCBmYWxz\nZSk7CgogICAgICAgICAgICBTZXEgc2VxID0gX2Jyb2tlci5nZXRWYWx1ZVNl\ncXVlbmNlKGZtZCk7CiAgICAgICAgICAgIHJldHVybiAoc2VxID09IG51bGwp\nID8gbnVsbCA6IG5ldyBHZW5lcmF0b3JJbXBsKHNlcSwgbnVsbCwgX2Jyb2tl\nciwKICAgICAgICAgICAgICAgIG1ldGEpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhj\nZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgPFQ+IEV4dGVudDxUPiBjcmVhdGVFeHRlbnQo\nQ2xhc3M8VD4gY2xzLCBib29sZWFuIHN1YmNsYXNzZXMpIHsKICAgICAgICBh\nc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICByZXR1cm4gbmV3IEV4\ndGVudEltcGw8VD4odGhpcywgX2Jyb2tlci5uZXdFeHRlbnQoY2xzLCBzdWJj\nbGFzc2VzKSk7CiAgICB9CgogICAgcHVibGljIE9wZW5KUEFRdWVyeSBjcmVh\ndGVRdWVyeShTdHJpbmcgcXVlcnkpIHsKICAgICAgICByZXR1cm4gY3JlYXRl\nUXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUwsIHF1ZXJ5KTsKICAgIH0KCiAg\nICBwdWJsaWMgT3BlbkpQQVF1ZXJ5IGNyZWF0ZVF1ZXJ5KFN0cmluZyBsYW5n\ndWFnZSwgU3RyaW5nIHF1ZXJ5KSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7CiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwodGhpcywg\ncmV0LCBfYnJva2VyLm5ld1F1ZXJ5KGxhbmd1YWdlLCBxdWVyeSkpOwogICAg\nfQoKICAgIHB1YmxpYyBPcGVuSlBBUXVlcnkgY3JlYXRlUXVlcnkoUXVlcnkg\ncXVlcnkpIHsKICAgICAgICBpZiAocXVlcnkgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIGNyZWF0ZVF1ZXJ5KChTdHJpbmcpIG51bGwpOwogICAgICAg\nIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuUXVlcnkgcSA9ICgoUXVlcnlJbXBsKSBxdWVyeSku\nZ2V0RGVsZWdhdGUoKTsKICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbCh0\naGlzLCByZXQsIF9icm9rZXIubmV3UXVlcnkocS5nZXRMYW5ndWFnZSgpLAog\nICAgICAgICAgICBxKSk7CiAgICB9CgogICAgcHVibGljIE9wZW5KUEFRdWVy\neSBjcmVhdGVOYW1lZFF1ZXJ5KFN0cmluZyBuYW1lKSB7CiAgICAgICAgYXNz\nZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5hc3NlcnRP\ncGVuKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgUXVlcnlNZXRhRGF0\nYSBtZXRhID0gX2Jyb2tlci5nZXRDb25maWd1cmF0aW9uKCkuCiAgICAgICAg\nICAgICAgICBnZXRNZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpLmdldFF1\nZXJ5TWV0YURhdGEobnVsbCwgbmFtZSwKICAgICAgICAgICAgICAgIF9icm9r\nZXIuZ2V0Q2xhc3NMb2FkZXIoKSwgdHJ1ZSk7CiAgICAgICAgICAgIG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnkgZGVsID0KICAgICAgICAgICAg\nICAgIF9icm9rZXIubmV3UXVlcnkobWV0YS5nZXRMYW5ndWFnZSgpLCBudWxs\nKTsKICAgICAgICAgICAgbWV0YS5zZXRJbnRvKGRlbCk7CiAgICAgICAgICAg\nIGRlbC5jb21waWxlKCk7CgogICAgICAgICAgICBPcGVuSlBBUXVlcnkgcSA9\nIG5ldyBRdWVyeUltcGwodGhpcywgcmV0LCBkZWwpOwogICAgICAgICAgICBT\ndHJpbmdbXSBoaW50cyA9IG1ldGEuZ2V0SGludEtleXMoKTsKICAgICAgICAg\nICAgT2JqZWN0W10gdmFsdWVzID0gbWV0YS5nZXRIaW50VmFsdWVzKCk7CiAg\nICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaGludHMubGVuZ3RoOyBp\nKyspCiAgICAgICAgICAgICAgICBxLnNldEhpbnQoaGludHNbaV0sIHZhbHVl\nc1tpXSk7CiAgICAgICAgICAgIHJldHVybiBxOwogICAgICAgIH0gY2F0Y2gg\nKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgUGVy\nc2lzdGVuY2VFeGNlcHRpb25zLnRvUGVyc2lzdGVuY2VFeGNlcHRpb24ocmUp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgT3BlbkpQQVF1ZXJ5IGNy\nZWF0ZU5hdGl2ZVF1ZXJ5KFN0cmluZyBxdWVyeSkgewogICAgICAgIHZhbGlk\nYXRlU1FMKHF1ZXJ5KTsKICAgICAgICByZXR1cm4gY3JlYXRlUXVlcnkoUXVl\ncnlMYW5ndWFnZXMuTEFOR19TUUwsIHF1ZXJ5KTsKICAgIH0KCiAgICBwdWJs\naWMgT3BlbkpQQVF1ZXJ5IGNyZWF0ZU5hdGl2ZVF1ZXJ5KFN0cmluZyBxdWVy\neSwgQ2xhc3MgY2xzKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZU5hdGl2ZVF1\nZXJ5KHF1ZXJ5KS5zZXRSZXN1bHRDbGFzcyhjbHMpOwogICAgfQoKICAgIHB1\nYmxpYyBPcGVuSlBBUXVlcnkgY3JlYXRlTmF0aXZlUXVlcnkoU3RyaW5nIHF1\nZXJ5LCBTdHJpbmcgbWFwcGluZ05hbWUpIHsKICAgICAgICBhc3NlcnROb3RD\nbG9zZUludm9rZWQoKTsKICAgICAgICB2YWxpZGF0ZVNRTChxdWVyeSk7CiAg\nICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeSBrZXJuZWxR\ndWVyeSA9IF9icm9rZXIubmV3UXVlcnkoCiAgICAgICAgICAgIFF1ZXJ5TGFu\nZ3VhZ2VzLkxBTkdfU1FMLCBxdWVyeSk7CiAgICAgICAga2VybmVsUXVlcnku\nc2V0UmVzdWx0TWFwcGluZyhudWxsLCBtYXBwaW5nTmFtZSk7CiAgICAgICAg\ncmV0dXJuIG5ldyBRdWVyeUltcGwodGhpcywgcmV0LCBrZXJuZWxRdWVyeSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBWYWxpZGF0ZSB0aGF0IHRoZSB1c2Vy\nIHByb3ZpZGVkIFNRTC4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9p\nZCB2YWxpZGF0ZVNRTChTdHJpbmcgcXVlcnkpIHsKICAgICAgICBpZiAoU3Ry\naW5nVXRpbHMudHJpbVRvTnVsbChxdWVyeSkgPT0gbnVsbCkKICAgICAgICAg\nICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0KCJuby1z\ncWwiKSwgbnVsbCwgbnVsbCwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldEZsdXNoTW9kZShGbHVzaE1vZGVUeXBlIGZsdXNoTW9kZSkgewog\nICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9r\nZXIuYXNzZXJ0T3BlbigpOwogICAgICAgIF9icm9rZXIuZ2V0RmV0Y2hDb25m\naWd1cmF0aW9uKCkuc2V0Rmx1c2hCZWZvcmVRdWVyaWVzCiAgICAgICAgICAg\nICh0b0ZsdXNoQmVmb3JlUXVlcmllcyhmbHVzaE1vZGUpKTsKICAgIH0KCiAg\nICBwdWJsaWMgRmx1c2hNb2RlVHlwZSBnZXRGbHVzaE1vZGUoKSB7CiAgICAg\nICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5h\nc3NlcnRPcGVuKCk7CiAgICAgICAgcmV0dXJuIGZyb21GbHVzaEJlZm9yZVF1\nZXJpZXMoX2Jyb2tlci5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKS4KICAgICAg\nICAgICAgZ2V0Rmx1c2hCZWZvcmVRdWVyaWVzKCkpOwogICAgfQoKICAgIC8q\nKgogICAgICogVHJhbnNsYXRlIG91ciBpbnRlcm5hbCBmbHVzaCBjb25zdGFu\ndCB0byBhIGZsdXNoIG1vZGUgZW51bSB2YWx1ZS4KICAgICAqLwogICAgc3Rh\ndGljIEZsdXNoTW9kZVR5cGUgZnJvbUZsdXNoQmVmb3JlUXVlcmllcyhpbnQg\nZmx1c2gpIHsKICAgICAgICBzd2l0Y2ggKGZsdXNoKSB7CiAgICAgICAgICAg\nIGNhc2UgUXVlcnlGbHVzaE1vZGVzLkZMVVNIX1RSVUU6CiAgICAgICAgICAg\nICAgICByZXR1cm4gRmx1c2hNb2RlVHlwZS5BVVRPOwogICAgICAgICAgICBj\nYXNlIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9GQUxTRToKICAgICAgICAgICAg\nICAgIHJldHVybiBGbHVzaE1vZGVUeXBlLkNPTU1JVDsKICAgICAgICAgICAg\nZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zbGF0ZSBhIGZsdXNoIG1v\nZGUgZW51bSB2YWx1ZSB0byBvdXIgaW50ZXJuYWwgZmx1c2ggY29uc3RhbnQu\nCiAgICAgKi8KICAgIHN0YXRpYyBpbnQgdG9GbHVzaEJlZm9yZVF1ZXJpZXMo\nRmx1c2hNb2RlVHlwZSBmbHVzaE1vZGUpIHsKICAgICAgICAvLyBjaG9vc2Ug\nZGVmYXVsdCBmb3IgbnVsbAogICAgICAgIGlmIChmbHVzaE1vZGUgPT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9X\nSVRIX0NPTk5FQ1RJT047CiAgICAgICAgaWYgKGZsdXNoTW9kZSA9PSBGbHVz\naE1vZGVUeXBlLkFVVE8pCiAgICAgICAgICAgIHJldHVybiBRdWVyeUZsdXNo\nTW9kZXMuRkxVU0hfVFJVRTsKICAgICAgICBpZiAoZmx1c2hNb2RlID09IEZs\ndXNoTW9kZVR5cGUuQ09NTUlUKQogICAgICAgICAgICByZXR1cm4gUXVlcnlG\nbHVzaE1vZGVzLkZMVVNIX0ZBTFNFOwogICAgICAgIHRocm93IG5ldyBBcmd1\nbWVudEV4Y2VwdGlvbihmbHVzaE1vZGUudG9TdHJpbmcoKSwgbnVsbCwgbnVs\nbCwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkgewog\nICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9r\nZXIuZGV0YWNoQWxsKHRoaXMsIGZhbHNlKTsKICAgIH0KCiAgICBwdWJsaWMg\nT2JqZWN0IGdldERlbGVnYXRlKCkgewogICAgICAgIF9icm9rZXIuYXNzZXJ0\nT3BlbigpOwogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAg\nICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHB1YmxpYyBMb2NrTW9kZVR5\ncGUgZ2V0TG9ja01vZGUoT2JqZWN0IGVudGl0eSkgewogICAgICAgIGFzc2Vy\ndE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIHJldHVybiBmcm9tTG9ja0xl\ndmVsKF9icm9rZXIuZ2V0TG9ja0xldmVsKGVudGl0eSkpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGxvY2soT2JqZWN0IGVudGl0eSwgTG9ja01vZGVUeXBl\nIG1vZGUpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAg\nICAgICBfYnJva2VyLmxvY2soZW50aXR5LCB0b0xvY2tMZXZlbChtb2RlKSwg\nLTEsIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvY2soT2JqZWN0\nIGVudGl0eSkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwog\nICAgICAgIF9icm9rZXIubG9jayhlbnRpdHksIHRoaXMpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGxvY2soT2JqZWN0IGVudGl0eSwgTG9ja01vZGVUeXBl\nIG1vZGUsIGludCB0aW1lb3V0KSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5sb2NrKGVudGl0eSwgdG9Mb2Nr\nTGV2ZWwobW9kZSksIHRpbWVvdXQsIHRoaXMpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGxvY2tBbGwoQ29sbGVjdGlvbiBlbnRpdGllcykgewogICAgICAg\nIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIubG9j\na0FsbChlbnRpdGllcywgdGhpcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nbG9ja0FsbChDb2xsZWN0aW9uIGVudGl0aWVzLCBMb2NrTW9kZVR5cGUgbW9k\nZSwgaW50IHRpbWVvdXQpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9r\nZWQoKTsKICAgICAgICBfYnJva2VyLmxvY2tBbGwoZW50aXRpZXMsIHRvTG9j\na0xldmVsKG1vZGUpLCB0aW1lb3V0LCB0aGlzKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBsb2NrQWxsKE9iamVjdC4uLiBlbnRpdGllcykgewogICAgICAg\nIGxvY2tBbGwoQXJyYXlzLmFzTGlzdChlbnRpdGllcykpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGxvY2tBbGwoT2JqZWN0W10gZW50aXRpZXMsIExvY2tN\nb2RlVHlwZSBtb2RlLCBpbnQgdGltZW91dCkgewogICAgICAgIGxvY2tBbGwo\nQXJyYXlzLmFzTGlzdChlbnRpdGllcyksIG1vZGUsIHRpbWVvdXQpOwogICAg\nfQoKICAgIC8qKgogICAgICogVHJhbnNsYXRlIG91ciBpbnRlcm5hbCBsb2Nr\nIGxldmVsIHRvIGEgamF2YXgucGVyc2lzdGVuY2UgZW51bSB2YWx1ZS4KICAg\nICAqLwogICAgc3RhdGljIExvY2tNb2RlVHlwZSBmcm9tTG9ja0xldmVsKGlu\ndCBsZXZlbCkgewogICAgICAgIGlmIChsZXZlbCA8IExvY2tMZXZlbHMuTE9D\nS19SRUFEKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAo\nbGV2ZWwgPCBMb2NrTGV2ZWxzLkxPQ0tfV1JJVEUpCiAgICAgICAgICAgIHJl\ndHVybiBMb2NrTW9kZVR5cGUuUkVBRDsKICAgICAgICByZXR1cm4gTG9ja01v\nZGVUeXBlLldSSVRFOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNsYXRl\nIHRoZSBqYXZheC5wZXJzaXN0ZW5jZSBlbnVtIHZhbHVlIHRvIG91ciBpbnRl\ncm5hbCBsb2NrIGxldmVsLgogICAgICovCiAgICBzdGF0aWMgaW50IHRvTG9j\na0xldmVsKExvY2tNb2RlVHlwZSBtb2RlKSB7CiAgICAgICAgaWYgKG1vZGUg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIExvY2tMZXZlbHMuTE9DS19O\nT05FOwogICAgICAgIGlmIChtb2RlID09IExvY2tNb2RlVHlwZS5SRUFEKQog\nICAgICAgICAgICByZXR1cm4gTG9ja0xldmVscy5MT0NLX1JFQUQ7CiAgICAg\nICAgaWYgKG1vZGUgPT0gTG9ja01vZGVUeXBlLldSSVRFKQogICAgICAgICAg\nICByZXR1cm4gTG9ja0xldmVscy5MT0NLX1dSSVRFOwogICAgICAgIHRocm93\nIG5ldyBBcmd1bWVudEV4Y2VwdGlvbihtb2RlLnRvU3RyaW5nKCksIG51bGws\nIG51bGwsIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGNhbmNl\nbEFsbCgpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5jYW5jZWxBbGwoKTsK\nICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldENvbm5lY3Rpb24oKSB7CiAg\nICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0Q29ubmVjdGlvbigpOwogICAgfQoK\nICAgIHB1YmxpYyBDb2xsZWN0aW9uIGdldE1hbmFnZWRPYmplY3RzKCkgewog\nICAgICAgIHJldHVybiBfYnJva2VyLmdldE1hbmFnZWRPYmplY3RzKCk7CiAg\nICB9CgogICAgcHVibGljIENvbGxlY3Rpb24gZ2V0VHJhbnNhY3Rpb25hbE9i\namVjdHMoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0VHJhbnNhY3Rp\nb25hbE9iamVjdHMoKTsKICAgIH0KCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBn\nZXRQZW5kaW5nVHJhbnNhY3Rpb25hbE9iamVjdHMoKSB7CiAgICAgICAgcmV0\ndXJuIF9icm9rZXIuZ2V0UGVuZGluZ1RyYW5zYWN0aW9uYWxPYmplY3RzKCk7\nCiAgICB9CgogICAgcHVibGljIENvbGxlY3Rpb24gZ2V0RGlydHlPYmplY3Rz\nKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldERpcnR5T2JqZWN0cygp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGdldE9yZGVyRGlydHlPYmpl\nY3RzKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldE9yZGVyRGlydHlP\nYmplY3RzKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0T3JkZXJEaXJ0\neU9iamVjdHMoYm9vbGVhbiBvcmRlcikgewogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuc2V0T3JkZXJEaXJ0eU9i\namVjdHMob3JkZXIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGRpcnR5Q2xh\nc3MoQ2xhc3MgY2xzKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2Vk\nKCk7CiAgICAgICAgX2Jyb2tlci5kaXJ0eVR5cGUoY2xzKTsKICAgIH0KCiAg\nICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikKICAgIHB1YmxpYyBD\nb2xsZWN0aW9uPENsYXNzPiBnZXRQZXJzaXN0ZWRDbGFzc2VzKCkgewogICAg\nICAgIHJldHVybiAoQ29sbGVjdGlvbjxDbGFzcz4pIF9icm9rZXIuZ2V0UGVy\nc2lzdGVkVHlwZXMoKTsKICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5ncygi\ndW5jaGVja2VkIikKICAgIHB1YmxpYyBDb2xsZWN0aW9uPENsYXNzPiBnZXRV\ncGRhdGVkQ2xhc3NlcygpIHsKICAgICAgICByZXR1cm4gKENvbGxlY3Rpb248\nQ2xhc3M+KSBfYnJva2VyLmdldFVwZGF0ZWRUeXBlcygpOwogICAgfQoKICAg\nIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIENv\nbGxlY3Rpb248Q2xhc3M+IGdldFJlbW92ZWRDbGFzc2VzKCkgewogICAgICAg\nIHJldHVybiAoQ29sbGVjdGlvbjxDbGFzcz4pIF9icm9rZXIuZ2V0RGVsZXRl\nZFR5cGVzKCk7CiAgICB9CgogICAgcHVibGljIDxUPiBUIGNyZWF0ZUluc3Rh\nbmNlKENsYXNzPFQ+IGNscykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52\nb2tlZCgpOwogICAgICAgIHJldHVybiAoVCkgX2Jyb2tlci5uZXdJbnN0YW5j\nZShjbHMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgewogICAg\nICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIu\nY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc09wZW4oKSB7\nCiAgICAgICAgcmV0dXJuICFfYnJva2VyLmlzQ2xvc2VJbnZva2VkKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgZGlydHkoT2JqZWN0IG8sIFN0cmluZyBm\naWVsZCkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAg\nICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBfYnJva2VyLmdldFN0YXRl\nTWFuYWdlcihvKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoc20g\nIT0gbnVsbCkKICAgICAgICAgICAgICAgIHNtLmRpcnR5KGZpZWxkKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJv\ndyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4Y2VwdGlv\nbihlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRP\nYmplY3RJZChPYmplY3QgbykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52\nb2tlZCgpOwogICAgICAgIHJldHVybiBKUEFGYWNhZGVIZWxwZXIuZnJvbU9w\nZW5KUEFPYmplY3RJZChfYnJva2VyLmdldE9iamVjdElkKG8pKTsKICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBpc0RpcnR5KE9iamVjdCBvKSB7CiAgICAg\nICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgcmV0dXJuIF9i\ncm9rZXIuaXNEaXJ0eShvKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBp\nc1RyYW5zYWN0aW9uYWwoT2JqZWN0IG8pIHsKICAgICAgICBhc3NlcnROb3RD\nbG9zZUludm9rZWQoKTsKICAgICAgICByZXR1cm4gX2Jyb2tlci5pc1RyYW5z\nYWN0aW9uYWwobyk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNQZXJz\naXN0ZW50KE9iamVjdCBvKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuaXNQZXJzaXN0ZW50KG8p\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzTmV3bHlQZXJzaXN0ZW50\nKE9iamVjdCBvKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7\nCiAgICAgICAgcmV0dXJuIF9icm9rZXIuaXNOZXcobyk7CiAgICB9CgogICAg\ncHVibGljIGJvb2xlYW4gaXNSZW1vdmVkKE9iamVjdCBvKSB7CiAgICAgICAg\nYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgcmV0dXJuIF9icm9r\nZXIuaXNEZWxldGVkKG8pOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlz\nRGV0YWNoZWQoT2JqZWN0IGVudGl0eSkgewogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOwogICAgICAgIHJldHVybiBfYnJva2VyLmlzRGV0YWNo\nZWQoZW50aXR5KTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFZlcnNp\nb24oT2JqZWN0IG8pIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQo\nKTsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRWZXJzaW9uKG8pOwogICAg\nfQoKICAgIC8qKgogICAgICogVGhyb3cgYXBwcm9wcmlhdGUgZXhjZXB0aW9u\nIGlmIGNsb3NlIGhhcyBiZWVuIGludm9rZWQgYnV0IHRoZSBicm9rZXIKICAg\nICAqIGlzIHN0aWxsIG9wZW4uICBXZSB0ZXN0IG9ubHkgZm9yIHRoaXMgYmVj\nYXVzZSBpZiB0aGUgYnJva2VyIGlzIGFscmVhZHkKICAgICAqIGNsb3NlZCwg\naXQgd2lsbCB0aHJvdyBpdHMgb3duIG1vcmUgaW5mb3JtYXRpdmUgZXhjZXB0\naW9uIHdoZW4gd2UgCiAgICAgKiBkZWxlZ2F0ZSB0aGUgcGVuZGluZyBvcGVy\nYXRpb24gdG8gaXQuCiAgICAgKi8KICAgIHZvaWQgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCkgewogICAgICAgIGlmICghX2Jyb2tlci5pc0Nsb3NlZCgpICYm\nIF9icm9rZXIuaXNDbG9zZUludm9rZWQoKSkKICAgICAgICAgICAgdGhyb3cg\nbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgiY2xvc2UtaW52\nb2tlZCIpLCBudWxsLAogICAgICAgICAgICAgICAgbnVsbCwgdHJ1ZSk7CiAg\nICB9CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAg\nIC8vIEZpbmRDYWxsYmFja3MgaW1wbGVtZW50YXRpb24KICAgIC8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgcHVibGljIE9iamVjdCBw\ncm9jZXNzQXJndW1lbnQoT2JqZWN0IGFyZykgewogICAgICAgIHJldHVybiBh\ncmc7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBwcm9jZXNzUmV0dXJuKE9i\namVjdCBvaWQsIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAgICBy\nZXR1cm4gKHNtID09IG51bGwgfHwgc20uaXNEZWxldGVkKCkpID8gbnVsbCA6\nIHNtLmdldE1hbmFnZWRJbnN0YW5jZSgpOwogICAgfQoKICAgIC8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gT3BDYWxsYmFja3MgaW1w\nbGVtZW50YXRpb24KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLwoKICAgIHB1YmxpYyBpbnQgcHJvY2Vzc0FyZ3VtZW50KGludCBvcCwgT2Jq\nZWN0IG9iaiwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkgewogICAgICAgIHN3\naXRjaCAob3ApIHsKICAgICAgICAgICAgY2FzZSBPUF9ERUxFVEU6CiAgICAg\nICAgICAgICAgICAvLyBjYXNjYWRlIHRocm91Z2ggbm9uLXBlcnNpc3RlbnQg\nbm9uLWRldGFjaGVkIGluc3RhbmNlcwogICAgICAgICAgICAgICAgaWYgKHNt\nID09IG51bGwgJiYgIV9icm9rZXIuaXNEZXRhY2hlZChvYmopKQogICAgICAg\nICAgICAgICAgICAgIHJldHVybiBBQ1RfQ0FTQ0FERTsKICAgICAgICAgICAg\nICAgIGlmIChzbSAhPSBudWxsICYmICFzbS5pc0RldGFjaGVkKCkgJiYgIXNt\nLmlzUGVyc2lzdGVudCgpKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBB\nQ1RfQ0FTQ0FERTsKICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBkZWxldGVk\nIGluc3RhbmNlcwogICAgICAgICAgICAgICAgaWYgKHNtICE9IG51bGwgJiYg\nc20uaXNEZWxldGVkKCkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFD\nVF9OT05FOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNh\nc2UgT1BfQVRUQUNIOgogICAgICAgICAgICAgICAgLy8gZGllIG9uIHJlbW92\nZWQKICAgICAgICAgICAgICAgIGlmIChzbSAhPSBudWxsICYmIHNtLmlzRGVs\nZXRlZCgpKQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhj\nZXB0aW9uKF9sb2MuZ2V0KCJyZW1vdmVkIiwKICAgICAgICAgICAgICAgICAg\nICAgICAgRXhjZXB0aW9ucy50b1N0cmluZyhvYmopKSkuc2V0RmFpbGVkT2Jq\nZWN0KG9iaik7CiAgICAgICAgICAgICAgICAvLyBjYXNjYWRlIHRocm91Z2gg\nbWFuYWdlZCBpbnN0YW5jZXMKICAgICAgICAgICAgICAgIGlmIChzbSAhPSBu\ndWxsICYmICFzbS5pc0RldGFjaGVkKCkpCiAgICAgICAgICAgICAgICAgICAg\ncmV0dXJuIEFDVF9DQVNDQURFOwogICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgIGNhc2UgT1BfUkVGUkVTSDoKICAgICAgICAgICAgICAgIC8v\nIGRpZSBvbiB1bm1hbmFnZWQgaW5zdGFuY2VzCiAgICAgICAgICAgICAgICBp\nZiAoc20gPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcg\nVXNlckV4Y2VwdGlvbihfbG9jLmdldCgibm90LW1hbmFnZWQiLAogICAgICAg\nICAgICAgICAgICAgICAgICBFeGNlcHRpb25zLnRvU3RyaW5nKG9iaikpKS5z\nZXRGYWlsZWRPYmplY3Qob2JqKTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gQUNUX1JVTiB8IEFDVF9DQVNDQURF\nOwogICAgfQoKICAgIHB1YmxpYyBpbnQgaGFzaENvZGUoKSB7CiAgICAgICAg\ncmV0dXJuIF9icm9rZXIuaGFzaENvZGUoKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90aGVyKSB7CiAgICAgICAgaWYgKG90\naGVyID09IHRoaXMpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nIGlmICghKG90aGVyIGluc3RhbmNlb2YgRW50aXR5TWFuYWdlckltcGwpKQog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIF9icm9r\nZXIuZXF1YWxzKCgoRW50aXR5TWFuYWdlckltcGwpIG90aGVyKS5fYnJva2Vy\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZWFkRXh0ZXJuYWwoT2JqZWN0\nSW5wdXQgaW4pCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBDbGFzc05v\ndEZvdW5kRXhjZXB0aW9uIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBy\nZXQgPSBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMuZ2V0Um9sbGJhY2tUcmFuc2xh\ndG9yKHRoaXMpOwoKICAgICAgICAgICAgLy8gdGhpcyBhc3N1bWVzIHRoYXQg\nc2VyaWFsaXplZCBCcm9rZXJzIGFyZSBmcm9tIHNvbWV0aGluZwogICAgICAg\nICAgICAvLyB0aGF0IGV4dGVuZHMgQWJzdHJhY3RCcm9rZXJGYWN0b3J5Lgog\nICAgICAgICAgICBPYmplY3QgZmFjdG9yeUtleSA9IGluLnJlYWRPYmplY3Qo\nKTsKICAgICAgICAgICAgQWJzdHJhY3RCcm9rZXJGYWN0b3J5IGZhY3Rvcnkg\nPQogICAgICAgICAgICAgICAgQWJzdHJhY3RCcm9rZXJGYWN0b3J5LmdldFBv\nb2xlZEZhY3RvcnlGb3JLZXkoZmFjdG9yeUtleSk7CiAgICAgICAgICAgIGJ5\ndGVbXSBicm9rZXJCeXRlcyA9IChieXRlW10pIGluLnJlYWRPYmplY3QoKTsK\nICAgICAgICAgICAgT2JqZWN0SW5wdXRTdHJlYW0gaW5uZXJJbiA9IG5ldyBC\ncm9rZXJCeXRlc0lucHV0U3RyZWFtKGJyb2tlckJ5dGVzLAogICAgICAgICAg\nICAgICAgZmFjdG9yeS5nZXRDb25maWd1cmF0aW9uKCkpOwoKICAgICAgICAg\nICAgQnJva2VyIGJyb2tlciA9IChCcm9rZXIpIGlubmVySW4ucmVhZE9iamVj\ndCgpOwogICAgICAgICAgICBFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwgZW1m\nID0gKEVudGl0eU1hbmFnZXJGYWN0b3J5SW1wbCkKICAgICAgICAgICAgICAg\nIEpQQUZhY2FkZUhlbHBlci50b0VudGl0eU1hbmFnZXJGYWN0b3J5KAogICAg\nICAgICAgICAgICAgICAgIGJyb2tlci5nZXRCcm9rZXJGYWN0b3J5KCkpOwog\nICAgICAgICAgICBicm9rZXIucHV0VXNlck9iamVjdChKUEFGYWNhZGVIZWxw\nZXIuRU1fS0VZLCB0aGlzKTsKICAgICAgICAgICAgaW5pdGlhbGl6ZShlbWYs\nIGJyb2tlcik7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiBy\nZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmUgPSBy\nZXQudHJhbnNsYXRlKHJlKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgICAgIC8vIGlnbm9yZQogICAgICAgICAg\nICB9CiAgICAgICAgICAgIHRocm93IHJlOwogICAgICAgIH0KICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB3cml0ZUV4dGVybmFsKE9iamVjdE91dHB1dCBvdXQp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgLy8gdGhpcyByZXF1aXJlcyB0aGF0IG9ubHkgQWJzdHJhY3RCcm9rZXJG\nYWN0b3J5LXNvdXJjZWQKICAgICAgICAgICAgLy8gYnJva2VycyBjYW4gYmUg\nc2VyaWFsaXplZAogICAgICAgICAgICBPYmplY3QgZmFjdG9yeUtleSA9ICgo\nQWJzdHJhY3RCcm9rZXJGYWN0b3J5KSBfYnJva2VyCiAgICAgICAgICAgICAg\nICAuZ2V0QnJva2VyRmFjdG9yeSgpKS5nZXRQb29sS2V5KCk7CiAgICAgICAg\nICAgIG91dC53cml0ZU9iamVjdChmYWN0b3J5S2V5KTsKICAgICAgICAgICAg\nQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGJhb3MgPSBuZXcgQnl0ZUFycmF5T3V0\ncHV0U3RyZWFtKCk7CiAgICAgICAgICAgIE9iamVjdE91dHB1dFN0cmVhbSBp\nbm5lck91dCA9IG5ldyBPYmplY3RPdXRwdXRTdHJlYW0oYmFvcyk7CiAgICAg\nICAgICAgIGlubmVyT3V0LndyaXRlT2JqZWN0KF9icm9rZXIuZ2V0RGVsZWdh\ndGUoKSk7CiAgICAgICAgICAgIGlubmVyT3V0LmZsdXNoKCk7CiAgICAgICAg\nICAgIG91dC53cml0ZU9iamVjdChiYW9zLnRvQnl0ZUFycmF5KCkpOwogICAg\nICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJlID0gcmV0LnRyYW5zbGF0ZShy\nZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgICAgICAvLyBpZ25vcmUKICAgICAgICAgICAgfQogICAgICAgICAg\nICB0aHJvdyByZTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0\naWMgY2xhc3MgQnJva2VyQnl0ZXNJbnB1dFN0cmVhbSBleHRlbmRzIE9iamVj\ndElucHV0U3RyZWFtIHsKCiAgICAgICAgcHJpdmF0ZSBPcGVuSlBBQ29uZmln\ndXJhdGlvbiBjb25mOwoKICAgICAgICBCcm9rZXJCeXRlc0lucHV0U3RyZWFt\nKGJ5dGVbXSBieXRlcywgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZikKICAg\nICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAgc3Vw\nZXIobmV3IEJ5dGVBcnJheUlucHV0U3RyZWFtKGJ5dGVzKSk7CiAgICAgICAg\nICAgIGlmIChjb25mID09IG51bGwpCiAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKAogICAgICAgICAgICAgICAg\nICAgICJJbGxlZ2FsIG51bGwgYXJndW1lbnQgdG8gT2JqZWN0SW5wdXRTdHJl\nYW1XaXRoTG9hZGVyIik7CiAgICAgICAgICAgIHRoaXMuY29uZiA9IGNvbmY7\nCiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBNYWtlIGEgcHJp\nbWl0aXZlIGFycmF5IGNsYXNzCiAgICAgICAgICovCiAgICAgICAgcHJpdmF0\nZSBDbGFzcyBwcmltaXRpdmVUeXBlKGNoYXIgdHlwZSkgewogICAgICAgICAg\nICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ0InOiBy\nZXR1cm4gYnl0ZS5jbGFzczsKICAgICAgICAgICAgICAgIGNhc2UgJ0MnOiBy\nZXR1cm4gY2hhci5jbGFzczsKICAgICAgICAgICAgICAgIGNhc2UgJ0QnOiBy\nZXR1cm4gZG91YmxlLmNsYXNzOwogICAgICAgICAgICAgICAgY2FzZSAnRic6\nIHJldHVybiBmbG9hdC5jbGFzczsKICAgICAgICAgICAgICAgIGNhc2UgJ0kn\nOiByZXR1cm4gaW50LmNsYXNzOwogICAgICAgICAgICAgICAgY2FzZSAnSic6\nIHJldHVybiBsb25nLmNsYXNzOwogICAgICAgICAgICAgICAgY2FzZSAnUyc6\nIHJldHVybiBzaG9ydC5jbGFzczsKICAgICAgICAgICAgICAgIGNhc2UgJ1on\nOiByZXR1cm4gYm9vbGVhbi5jbGFzczsKICAgICAgICAgICAgICAgIGRlZmF1\nbHQ6IHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAg\nICAgICBwcm90ZWN0ZWQgQ2xhc3MgcmVzb2x2ZUNsYXNzKE9iamVjdFN0cmVh\nbUNsYXNzIGNsYXNzRGVzYykKICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0\naW9uLCBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsKCiAgICAgICAgICAgIFN0\ncmluZyBjbmFtZSA9IGNsYXNzRGVzYy5nZXROYW1lKCk7CiAgICAgICAgICAg\nIGlmIChjbmFtZS5zdGFydHNXaXRoKCJbIikpIHsKICAgICAgICAgICAgICAg\nIC8vIEFuIGFycmF5CiAgICAgICAgICAgICAgICBDbGFzcyBjb21wb25lbnQ7\nCQkvLyBjb21wb25lbnQgY2xhc3MKICAgICAgICAgICAgICAgIGludCBkY291\nbnQ7CQkJICAgIC8vIGRpbWVuc2lvbgogICAgICAgICAgICAgICAgZm9yIChk\nY291bnQ9MTsgY25hbWUuY2hhckF0KGRjb3VudCk9PSdbJzsgZGNvdW50Kysp\nIDsKICAgICAgICAgICAgICAgIGlmIChjbmFtZS5jaGFyQXQoZGNvdW50KSA9\nPSAnTCcpIHsKICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQgPSBsb29r\ndXBDbGFzcyhjbmFtZS5zdWJzdHJpbmcoZGNvdW50KzEsCiAgICAgICAgICAg\nICAgICAgICAgICAgIGNuYW1lLmxlbmd0aCgpLTEpKTsKICAgICAgICAgICAg\nICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNuYW1lLmxl\nbmd0aCgpICE9IGRjb3VudCsxKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIHRocm93IG5ldyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uKGNuYW1lKTsvLyBt\nYWxmb3JtZWQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICAgICAgY29tcG9uZW50ID0gcHJpbWl0aXZlVHlwZShjbmFtZS5jaGFyQXQo\nZGNvdW50KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBp\nbnQgZGltW10gPSBuZXcgaW50W2Rjb3VudF07CiAgICAgICAgICAgICAgICBm\nb3IgKGludCBpPTA7IGk8ZGNvdW50OyBpKyspIHsKICAgICAgICAgICAgICAg\nICAgICBkaW1baV09MDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgIHJldHVybiBBcnJheS5uZXdJbnN0YW5jZShjb21wb25lbnQsIGRpbSku\nZ2V0Q2xhc3MoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg\nICAgIHJldHVybiBsb29rdXBDbGFzcyhjbmFtZSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIElmIHRoaXMgaXMg\nYSBnZW5lcmF0ZWQgc3ViY2xhc3MsIGxvb2sgdXAgdGhlIGNvcnJlc3BvbmRp\nbmcgQ2xhc3MKICAgICAgICAgKiBvYmplY3QgdmlhIG1ldGFkYXRhLgogICAg\nICAgICAqLwogICAgICAgIHByaXZhdGUgQ2xhc3MgbG9va3VwQ2xhc3MoU3Ry\naW5nIGNsYXNzTmFtZSkKICAgICAgICAgICAgdGhyb3dzIENsYXNzTm90Rm91\nbmRFeGNlcHRpb24gewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgcmV0dXJuIENsYXNzLmZvck5hbWUoY2xhc3NOYW1lKTsKICAgICAgICAg\nICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgICAgICBpZiAoUENFbmhhbmNlci5pc1BDU3ViY2xhc3NOYW1lKGNs\nYXNzTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICBTdHJpbmcgc3VwZXJO\nYW1lID0gUENFbmhhbmNlci50b01hbmFnZWRUeXBlTmFtZShjbGFzc05hbWUp\nOwogICAgICAgICAgICAgICAgICAgIENsYXNzTWV0YURhdGFbXSBtZXRhcyA9\nIGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKQogICAgICAg\nICAgICAgICAgICAgICAgICAuZ2V0TWV0YURhdGFzKCk7CiAgICAgICAgICAg\nICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtZXRhcy5sZW5ndGg7IGkr\nKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VwZXJOYW1lLmVx\ndWFscygKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFzW2ldLmdl\ndERlc2NyaWJlZFR5cGUoKS5nZXROYW1lKCkpKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICByZXR1cm4gUENSZWdpc3RyeS5nZXRQQ1R5cGUoCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YXNbaV0uZ2V0RGVz\nY3JpYmVkVHlwZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gaWYg\naXQncyBub3QgZm91bmQsIHRyeSB0byBsb29rIGZvciBpdCBhbnl3YXlzCiAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIENsYXNzLmZvck5hbWUoY2xhc3NO\nYW1lKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg\nICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

