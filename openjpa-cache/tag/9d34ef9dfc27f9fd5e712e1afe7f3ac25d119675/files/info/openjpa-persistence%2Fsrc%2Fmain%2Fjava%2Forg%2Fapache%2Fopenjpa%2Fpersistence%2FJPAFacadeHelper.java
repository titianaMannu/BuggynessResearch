{"sha":"7351e34b53ec73078c3b5b8dea3b0e922c8955f2","node_id":"MDQ6QmxvYjIwNjM2NDo3MzUxZTM0YjUzZWM3MzA3OGMzYjViOGRlYTNiMGU5MjJjODk1NWYy","size":11321,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7351e34b53ec73078c3b5b8dea3b0e922c8955f2","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZTsKCmltcG9ydCBq\nYXZhLm1hdGguQmlnRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRl\nZ2VyOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEu\ndXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwpp\nbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQnJva2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXJGYWN0b3J5OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0YTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkJpZ0RlY2ltYWxJZDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkJpZ0ludGVnZXJJZDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkJ5dGVJZDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLkNoYXJJZDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLkRvdWJsZUlkOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuRmxvYXRJZDsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS51dGlsLklkOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW1w\nbEhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludElk\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuTG9uZ0lkOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT2JqZWN0SWQ7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBSWQ7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEudXRpbC5TaG9ydElkOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnV0aWwuU3RyaW5nSWQ7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwoKLyoqCiAqIEhlbHBlciBjbGFz\ncyBmb3Igc3dpdGNoaW5nIGJldHdlZW4gT3BlbkpQQSdzIEpQQSBmYWNhZGUg\nYW5kIHRoZSB1bmRlcmx5aW5nCiAqIEJyb2tlciBrZXJuZWwuCiAqCiAqIEBz\naW5jZSAxLjAuMAogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgSlBB\nRmFjYWRlSGVscGVyIHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmlu\nZyBFTV9LRVkgPQogICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuRW50aXR5TWFuYWdlciI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIFN0cmluZyBFTUZfS0VZID0KICAgICAgICAib3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5IjsKCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9CiAgICAgICAgTG9j\nYWxpemVyLmZvclBhY2thZ2UoSlBBRmFjYWRlSGVscGVyLmNsYXNzKTsKCiAg\nICBwdWJsaWMgc3RhdGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSB0\nb0VudGl0eU1hbmFnZXJGYWN0b3J5KAogICAgICAgIEJyb2tlckZhY3Rvcnkg\nZmFjdG9yeSkgewogICAgICAgIGlmIChmYWN0b3J5ID09IG51bGwpCiAgICAg\nICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBmYWN0b3J5LmxvY2soKTsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nckZhY3RvcnkgZW1mID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSkK\nICAgICAgICAgICAgICAgIGZhY3RvcnkuZ2V0VXNlck9iamVjdChFTUZfS0VZ\nKTsKICAgICAgICAgICAgaWYgKGVtZiA9PSBudWxsKSB7CiAgICAgICAgICAg\nICAgICBlbWYgPSBFbnRpdHlNYW5hZ2VyRmFjdG9yeVZhbHVlLm5ld0ZhY3Rv\ncnkoZmFjdG9yeSk7CiAgICAgICAgICAgICAgICBmYWN0b3J5LnB1dFVzZXJP\nYmplY3QoRU1GX0tFWSwgZW1mKTsKICAgICAgICAgICAgfQogICAgICAgICAg\nICByZXR1cm4gZW1mOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1Bl\ncnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAgICAgIH0gZmluYWxseSB7CiAg\nICAgICAgICAgIGZhY3RvcnkudW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB1bmRlcmx5aW5nIGJyb2tlciBm\nYWN0b3J5IGZvciB0aGUgZ2l2ZW4gcGVyc2lzdGVuY2UgbWFuYWdlcgogICAg\nICogZmFjdG9yeSBmYWNhZGUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nQnJva2VyRmFjdG9yeSB0b0Jyb2tlckZhY3RvcnkoRW50aXR5TWFuYWdlckZh\nY3RvcnkgZW1mKSB7CiAgICAgICAgaWYgKGVtZiA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoIShlbWYgaW5zdGFuY2Vv\nZiBFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwpKSB7CiAgICAgICAgICAgIENs\nYXNzIGMgPSBlbWYuZ2V0Q2xhc3MoKTsKICAgICAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgICAgIC8vIGVpdGhlciBjYXN0IGhlcmUgbWF5IGZhaWwKICAg\nICAgICAgICAgICAgIGVtZiA9IChFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwp\nICgoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5KQogICAgICAgICAgICAg\nICAgICAgIGVtZikuZ2V0VXNlck9iamVjdChFTUZfS0VZKTsKICAgICAgICAg\nICAgfSBjYXRjaCAoQ2xhc3NDYXN0RXhjZXB0aW9uIGNjZSkgewogICAgICAg\nICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0\nKAogICAgICAgICAgICAgICAgICAgICJjYW50LWNvbnZlcnQtYnJva2VyZmFj\ndG9yeSIsIGMpLCBudWxsLCBudWxsLCBmYWxzZSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICAgICAgcmV0dXJuICgoRW50aXR5TWFuYWdlckZhY3Rv\ncnlJbXBsKSBlbWYpLmdldEJyb2tlckZhY3RvcnkoKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiBhIHBlcnNpc3RlbmNlIG1hbmFnZXIgZmFjYWRl\nIHRvIHRoZSBnaXZlbiBicm9rZXIgcmV0YWluaW5nCiAgICAgKiBwcmV2aW91\nc2x5IGFzc29jaWF0ZWQgcGVyc2lzdGVuY2UgY29udGV4dCB0eXBlLgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHRv\nRW50aXR5TWFuYWdlcihCcm9rZXIgYnJva2VyKSB7CiAgICAgICAgaWYgKGJy\nb2tlciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAg\nICAgYnJva2VyLmxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdl\ncikKICAgICAgICAgICAgICAgIGJyb2tlci5nZXRVc2VyT2JqZWN0KEVNX0tF\nWSk7CiAgICAgICAgICAgIGlmIChlbSA9PSBudWxsKSB7CiAgICAgICAgICAg\nICAgICBFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwgZW1mID0gKEVudGl0eU1h\nbmFnZXJGYWN0b3J5SW1wbCkKICAgICAgICAgICAgICAgICAgICB0b0VudGl0\neU1hbmFnZXJGYWN0b3J5KGJyb2tlci5nZXRCcm9rZXJGYWN0b3J5KCkpOwog\nICAgICAgICAgICAgICAgZW0gPSBlbWYubmV3RW50aXR5TWFuYWdlckltcGwo\nYnJva2VyKTsKICAgICAgICAgICAgICAgIGJyb2tlci5wdXRVc2VyT2JqZWN0\nKEVNX0tFWSwgZW0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVy\nbiBlbTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5j\nZUV4Y2VwdGlvbihlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAg\nICBicm9rZXIudW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIHRoZSB1bmRlcmx5aW5nIGJyb2tlciBmb3IgdGhlIGdp\ndmVuIGVudGl0eSBtYW5hZ2VyIGZhY2FkZS4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBCcm9rZXIgdG9Ccm9rZXIoRW50aXR5TWFuYWdlciBlbSkgewog\nICAgICAgIGlmIChlbSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKICAgICAgICBpZiAoIShlbSBpbnN0YW5jZW9mIEVudGl0eU1hbmFnZXJJ\nbXBsKSkgewogICAgICAgICAgICBDbGFzcyBjID0gZW0uZ2V0Q2xhc3MoKTsK\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vIGVpdGhlciBj\nYXN0IGhlcmUgbWF5IGZhaWwKICAgICAgICAgICAgICAgIGVtID0gKEVudGl0\neU1hbmFnZXJJbXBsKSAoKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBlbSkuCiAg\nICAgICAgICAgICAgICAgICAgZ2V0VXNlck9iamVjdChFTV9LRVkpOwogICAg\nICAgICAgICB9IGNhdGNoIChDbGFzc0Nhc3RFeGNlcHRpb24gY2NlKSB7CiAg\nICAgICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oX2xv\nYy5nZXQoImNhbnQtY29udmVydC1icm9rZXIiLCBjKSwKICAgICAgICAgICAg\nICAgICAgICBuZXcgVGhyb3dhYmxlW10geyBjY2UgfSwgbnVsbCwgZmFsc2Up\nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAoKEVu\ndGl0eU1hbmFnZXJJbXBsKSBlbSkuZ2V0QnJva2VyKCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuQ2xhc3NNZXRhRGF0YX0gYXNzb2NpYXRlZCB3aXRoIHRoZQog\nICAgICogcGVyc2lzdGVudCBvYmplY3QgPGNvZGU+bzwvY29kZT4uCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgQ2xhc3NNZXRhRGF0YSBnZXRNZXRhRGF0\nYShPYmplY3QgbykgewogICAgICAgIGlmIChvID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiBudWxsOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBP\ncGVuSlBBUGVyc2lzdGVuY2UuZ2V0RW50aXR5TWFuYWdlcihvKTsKICAgICAg\nICByZXR1cm4gKGVtID09IG51bGwpID8gbnVsbCA6IGdldE1ldGFEYXRhKGVt\nLAogICAgICAgICAgICBJbXBsSGVscGVyLmdldE1hbmFnZWRJbnN0YW5jZShv\nKS5nZXRDbGFzcygpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMg\ndGhlIHtAbGluayBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFE\nYXRhfSBhc3NvY2lhdGVkCiAgICAgKiB3aXRoIHRoZSBwZXJzaXN0ZW50IHR5\ncGUgPGNvZGU+Y2xzPC9jb2RlPi4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBDbGFzc01ldGFEYXRhIGdldE1ldGFEYXRhKEVudGl0eU1hbmFnZXIgZW0s\nIENsYXNzIGNscykgewogICAgICAgIGlmIChlbSA9PSBudWxsKQogICAgICAg\nICAgICB0aHJvdyBuZXcgTnVsbFBvaW50ZXJFeGNlcHRpb24oImVtID09IG51\nbGwiKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkga2VtID0g\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJKQogICAgICAgICAgICBPcGVuSlBB\nUGVyc2lzdGVuY2UuY2FzdChlbSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgcmV0dXJuIGtlbS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0TWV0YURhdGFS\nZXBvc2l0b3J5SW5zdGFuY2UoKS4KICAgICAgICAgICAgICAgIGdldE1ldGFE\nYXRhKGNscywga2VtLmdldENsYXNzTG9hZGVyKCksIGZhbHNlKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBQ\nZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4Y2VwdGlvbihl\nKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRo\nZSB7QGxpbmsgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0\nYX0gYXNzb2NpYXRlZAogICAgICogd2l0aCB0aGUgcGVyc2lzdGVudCB0eXBl\nIDxjb2RlPmNsczwvY29kZT4uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nQ2xhc3NNZXRhRGF0YSBnZXRNZXRhRGF0YShFbnRpdHlNYW5hZ2VyRmFjdG9y\neSBlbWYsCiAgICAgICAgQ2xhc3MgY2xzKSB7CiAgICAgICAgaWYgKGVtZiA9\nPSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgTnVsbFBvaW50ZXJFeGNl\ncHRpb24oImVtZiA9PSBudWxsIik7CgogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeVNQSSBlbWZTUEkgPQogICAgICAgICAgICAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJKSBPcGVuSlBBUGVyc2lzdGVuY2Uu\nY2FzdChlbWYpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBl\nbWZTUEkuZ2V0Q29uZmlndXJhdGlvbigpLmdldE1ldGFEYXRhUmVwb3NpdG9y\neUluc3RhbmNlKCkuCiAgICAgICAgICAgICAgICBnZXRNZXRhRGF0YShjbHMs\nIG51bGwsIGZhbHNlKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9Q\nZXJzaXN0ZW5jZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUcmFuc2xhdGUgZnJvbSBhIE9wZW5KUEEgaWRlbnRpdHkg\nb2JqZWN0IHRvIGEgUGVyc2lzdGVuY2Ugb25lLgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIE9iamVjdCBmcm9tT3BlbkpQQU9iamVjdElkKE9iamVjdCBv\naWQpIHsKICAgICAgICBpZiAob2lkIGluc3RhbmNlb2YgT3BlbkpQQUlkKQog\nICAgICAgICAgICByZXR1cm4gKChPcGVuSlBBSWQpIG9pZCkuZ2V0SWRPYmpl\nY3QoKTsKICAgICAgICByZXR1cm4gb2lkOwogICAgfQoKICAgIC8qKgogICAg\nICogVHJhbnNsYXRlIGZyb20gYSBQZXJzaXN0ZW5jZSBpZGVudGl0eSBvYmpl\nY3QgdG8gYSBPcGVuSlBBIG9uZS4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBPYmplY3QgdG9PcGVuSlBBT2JqZWN0SWQoQ2xhc3NNZXRhRGF0YSBtZXRh\nLCBPYmplY3Qgb2lkKSB7CiAgICAgICAgaWYgKG9pZCA9PSBudWxsIHx8IG1l\ndGEgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAg\nIENsYXNzIGNscyA9IG1ldGEuZ2V0RGVzY3JpYmVkVHlwZSgpOwogICAgICAg\nIGlmIChtZXRhLmdldElkZW50aXR5VHlwZSgpID09IENsYXNzTWV0YURhdGEu\nSURfREFUQVNUT1JFKQogICAgICAgICAgICByZXR1cm4gbmV3IElkKGNscywg\nKChOdW1iZXIpIG9pZCkubG9uZ1ZhbHVlKCkpOwoKICAgICAgICBpZiAob2lk\nIGluc3RhbmNlb2YgQnl0ZSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBCeXRl\nSWQoY2xzLCAoQnl0ZSkgb2lkKTsKICAgICAgICBpZiAob2lkIGluc3RhbmNl\nb2YgQ2hhcmFjdGVyKQogICAgICAgICAgICByZXR1cm4gbmV3IENoYXJJZChj\nbHMsIChDaGFyYWN0ZXIpIG9pZCk7CiAgICAgICAgaWYgKG9pZCBpbnN0YW5j\nZW9mIERvdWJsZSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBEb3VibGVJZChj\nbHMsIChEb3VibGUpIG9pZCk7CiAgICAgICAgaWYgKG9pZCBpbnN0YW5jZW9m\nIEZsb2F0KQogICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0SWQoY2xzLCAo\nRmxvYXQpIG9pZCk7CiAgICAgICAgaWYgKG9pZCBpbnN0YW5jZW9mIEludGVn\nZXIpCiAgICAgICAgICAgIHJldHVybiBuZXcgSW50SWQoY2xzLCAoSW50ZWdl\ncikgb2lkKTsKICAgICAgICBpZiAob2lkIGluc3RhbmNlb2YgTG9uZykKICAg\nICAgICAgICAgcmV0dXJuIG5ldyBMb25nSWQoY2xzLCAoTG9uZykgb2lkKTsK\nICAgICAgICBpZiAob2lkIGluc3RhbmNlb2YgU2hvcnQpCiAgICAgICAgICAg\nIHJldHVybiBuZXcgU2hvcnRJZChjbHMsIChTaG9ydCkgb2lkKTsKICAgICAg\nICBpZiAob2lkIGluc3RhbmNlb2YgU3RyaW5nKQogICAgICAgICAgICByZXR1\ncm4gbmV3IFN0cmluZ0lkKGNscywgKFN0cmluZykgb2lkKTsKICAgICAgICBp\nZiAob2lkIGluc3RhbmNlb2YgQmlnRGVjaW1hbCkKICAgICAgICAgICAgcmV0\ndXJuIG5ldyBCaWdEZWNpbWFsSWQoY2xzLCAoQmlnRGVjaW1hbCkgb2lkKTsK\nICAgICAgICBpZiAob2lkIGluc3RhbmNlb2YgQmlnSW50ZWdlcikKICAgICAg\nICAgICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VySWQoY2xzLCAoQmlnSW50ZWdl\ncikgb2lkKTsKICAgICAgICByZXR1cm4gbmV3IE9iamVjdElkKGNscywgb2lk\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBP\ncGVuSlBBIG9pZHMgZm9yIHRoZSBnaXZlbiBuYXRpdmUgb2lkIGFycmF5Lgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdFtdIHRvT3BlbkpQQU9i\namVjdElkcyhDbGFzc01ldGFEYXRhIG1ldGEsCiAgICAgICAgT2JqZWN0Li4u\nIG9pZHMpIHsKICAgICAgICBpZiAob2lkcyA9PSBudWxsIHx8IG9pZHMubGVu\nZ3RoID09IDApCiAgICAgICAgICAgIHJldHVybiBvaWRzOwoKICAgICAgICAv\nLyBzaW5jZSB0aGUgY2xhc3MgaWYgZml4ZWQgZm9yIGFsbCBvaWRzLCB3ZSBj\nYW4gdGVsbCBpZiB3ZSBoYXZlIHRvCiAgICAgICAgLy8gdHJhbnNsYXRlIHRo\nZSBhcnJheSBiYXNlZCBvbiB3aGV0aGVyIHRoZSBmaXJzdCBvaWQgbmVlZHMg\ndHJhbnNsYXRpbmcKICAgICAgICBPYmplY3Qgb2lkID0gdG9PcGVuSlBBT2Jq\nZWN0SWQobWV0YSwgb2lkc1swXSk7CiAgICAgICAgaWYgKG9pZCA9PSBvaWRz\nWzBdKQogICAgICAgICAgICByZXR1cm4gb2lkczsKCiAgICAgICAgT2JqZWN0\nW10gY29weSA9IG5ldyBPYmplY3Rbb2lkcy5sZW5ndGhdOwogICAgICAgIGNv\ncHlbMF0gPSBvaWQ7CiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBvaWRz\nLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBjb3B5W2ldID0gdG9PcGVuSlBB\nT2JqZWN0SWQobWV0YSwgb2lkc1tpXSk7CiAgICAgICAgcmV0dXJuIGNvcHk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBjb2xsZWN0aW9uIG9m\nIE9wZW5KUEEgb2lkcyBmb3IgdGhlIGdpdmVuIG5hdGl2ZSBvaWQgY29sbGVj\ndGlvbi4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBDb2xsZWN0aW9uIHRv\nT3BlbkpQQU9iamVjdElkcyhDbGFzc01ldGFEYXRhIG1ldGEsCiAgICAgICAg\nQ29sbGVjdGlvbiBvaWRzKSB7CiAgICAgICAgaWYgKG9pZHMgPT0gbnVsbCB8\nfCBvaWRzLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJuIG9pZHM7Cgog\nICAgICAgIC8vIHNpbmNlIHRoZSBjbGFzcyBpZiBmaXhlZCBmb3IgYWxsIG9p\nZHMsIHdlIGNhbiB0ZWxsIGlmIHdlIGhhdmUgdG8KICAgICAgICAvLyB0cmFu\nc2xhdGUgdGhlIGFycmF5IGJhc2VkIG9uIHdoZXRoZXIgdGhlIGZpcnN0IG9p\nZCBuZWVkcyB0cmFuc2xhdGluZwogICAgICAgIEl0ZXJhdG9yIGl0ciA9IG9p\nZHMuaXRlcmF0b3IoKTsKICAgICAgICBPYmplY3Qgb3JpZyA9IGl0ci5uZXh0\nKCk7CiAgICAgICAgT2JqZWN0IG9pZCA9IHRvT3BlbkpQQU9iamVjdElkKG1l\ndGEsIG9yaWcpOwogICAgICAgIGlmIChvaWQgPT0gb3JpZykKICAgICAgICAg\nICAgcmV0dXJuIG9pZHM7CgogICAgICAgIENvbGxlY3Rpb24gY29weSA9IG5l\ndyBBcnJheUxpc3Qob2lkcy5zaXplKCkpOwogICAgICAgIGNvcHkuYWRkKG9p\nZCk7CiAgICAgICAgd2hpbGUgKGl0ci5oYXNOZXh0KCkpCiAgICAgICAgICAg\nIGNvcHkuYWRkKHRvT3BlbkpQQU9iamVjdElkKG1ldGEsIGl0ci5uZXh0KCkp\nKTsKICAgICAgICByZXR1cm4gY29weTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRyYW5zbGF0ZSBmcm9tIGEgT3BlbkpQQSBpZGVudGl0eSBjbGFzcyB0byBh\nIG5hdGl2ZSBvbmUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgQ2xhc3Mg\nZnJvbU9wZW5KUEFPYmplY3RJZENsYXNzKENsYXNzIG9pZENsYXNzKSB7CiAg\nICAgICAgaWYgKG9pZENsYXNzID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBudWxsOwogICAgICAgIGlmIChvaWRDbGFzcyA9PSBJZC5jbGFzcykKICAg\nICAgICAgICAgcmV0dXJuIExvbmcuY2xhc3M7CiAgICAgICAgaWYgKG9pZENs\nYXNzID09IEJ5dGVJZC5jbGFzcykKICAgICAgICAgICAgcmV0dXJuIEJ5dGUu\nY2xhc3M7CiAgICAgICAgaWYgKG9pZENsYXNzID09IENoYXJJZC5jbGFzcykK\nICAgICAgICAgICAgcmV0dXJuIENoYXJhY3Rlci5jbGFzczsKICAgICAgICBp\nZiAob2lkQ2xhc3MgPT0gRG91YmxlSWQuY2xhc3MpCiAgICAgICAgICAgIHJl\ndHVybiBEb3VibGUuY2xhc3M7CiAgICAgICAgaWYgKG9pZENsYXNzID09IEZs\nb2F0SWQuY2xhc3MpCiAgICAgICAgICAgIHJldHVybiBGbG9hdC5jbGFzczsK\nICAgICAgICBpZiAob2lkQ2xhc3MgPT0gSW50SWQuY2xhc3MpCiAgICAgICAg\nICAgIHJldHVybiBJbnRlZ2VyLmNsYXNzOwogICAgICAgIGlmIChvaWRDbGFz\ncyA9PSBMb25nSWQuY2xhc3MpCiAgICAgICAgICAgIHJldHVybiBMb25nLmNs\nYXNzOwogICAgICAgIGlmIChvaWRDbGFzcyA9PSBTaG9ydElkLmNsYXNzKQog\nICAgICAgICAgICByZXR1cm4gU2hvcnQuY2xhc3M7CiAgICAgICAgaWYgKG9p\nZENsYXNzID09IFN0cmluZ0lkLmNsYXNzKQogICAgICAgICAgICByZXR1cm4g\nU3RyaW5nLmNsYXNzOwogICAgICAgIGlmIChvaWRDbGFzcyA9PSBCaWdEZWNp\nbWFsSWQuY2xhc3MpCiAgICAgICAgICAgIHJldHVybiBCaWdEZWNpbWFsLmNs\nYXNzOwogICAgICAgIGlmIChvaWRDbGFzcyA9PSBCaWdJbnRlZ2VySWQuY2xh\nc3MpCiAgICAgICAgICAgIHJldHVybiBCaWdJbnRlZ2VyLmNsYXNzOwogICAg\nICAgIHJldHVybiBvaWRDbGFzczsKCX0KfQo=\n","encoding":"base64"}

