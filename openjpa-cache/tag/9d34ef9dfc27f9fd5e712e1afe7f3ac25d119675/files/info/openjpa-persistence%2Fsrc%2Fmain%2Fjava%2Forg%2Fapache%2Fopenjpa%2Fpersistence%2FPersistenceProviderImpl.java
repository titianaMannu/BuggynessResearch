{"sha":"953fe7c8c0d29e24c05890d45d09ddc14ab70079","node_id":"MDQ6QmxvYjIwNjM2NDo5NTNmZTdjOGMwZDI5ZTI0YzA1ODkwZDQ1ZDA5ZGRjMTRhYjcwMDc5","size":10604,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/953fe7c8c0d29e24c05890d45d09ddc14ab70079","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLmluc3RydW1lbnQuQ2xhc3NGaWxlVHJhbnNmb3JtZXI7\nCmltcG9ydCBqYXZhLmxhbmcuaW5zdHJ1bWVudC5JbGxlZ2FsQ2xhc3NGb3Jt\nYXRFeGNlcHRpb247CmltcG9ydCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRy\nb2xsZXI7CmltcG9ydCBqYXZhLnNlY3VyaXR5LlByb3RlY3Rpb25Eb21haW47\nCmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5z\ncGkuQ2xhc3NUcmFuc2Zvcm1lcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLnNwaS5QZXJzaXN0ZW5jZVByb3ZpZGVyOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2Uuc3BpLlBlcnNpc3RlbmNlVW5pdEluZm87CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmNvbmYuQnJva2VyVmFsdWU7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuY29uZi5NZXRhRGF0YVJlcG9zaXRvcnlWYWx1ZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNv\nbmZpZ3VyYXRpb25JbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVu\naGFuY2UuUENDbGFzc0ZpbGVUcmFuc2Zvcm1lcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuQWJzdHJhY3RCcm9rZXJGYWN0b3J5OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Cb290c3RyYXA7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlckZhY3Rvcnk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1\ncmF0aW9uUHJvdmlkZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLmNvbmYuQ29uZmlndXJhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuSjJEb1ByaXZIZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLk9wdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5NZXRhRGF0YU1vZGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuTWV0YURhdGFSZXBvc2l0b3J5OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnV0aWwuQ2xhc3NSZXNvbHZlcjsKCgovKioKICogQm9vdHN0\ncmFwcGluZyBjbGFzcyB0aGF0IGFsbG93cyB0aGUgY3JlYXRpb24gb2YgYSBz\ndGFuZC1hbG9uZQogKiB7QGxpbmsgRW50aXR5TWFuYWdlcn0uCiAqCiAqIEBz\nZWUgamF2YXgucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2UjY3JlYXRlRW50aXR5\nTWFuYWdlckZhY3RvcnkoU3RyaW5nLE1hcCkKICogQHB1Ymxpc2hlZAogKi8K\ncHVibGljIGNsYXNzIFBlcnNpc3RlbmNlUHJvdmlkZXJJbXBsCiAgICBpbXBs\nZW1lbnRzIFBlcnNpc3RlbmNlUHJvdmlkZXIgewoKICAgIHN0YXRpYyBmaW5h\nbCBTdHJpbmcgQ0xBU1NfVFJBTlNGT1JNRVJfT1BUSU9OUyA9ICJDbGFzc1Ry\nYW5zZm9ybWVyT3B0aW9ucyI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBT\ndHJpbmcgRU1GX1BPT0wgPSAiRW50aXR5TWFuYWdlckZhY3RvcnlQb29sIjsK\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExv\nY2FsaXplci5mb3JQYWNrYWdlKAogICAgICAgIFBlcnNpc3RlbmNlUHJvdmlk\nZXJJbXBsLmNsYXNzKTsKCiAgICAvKioKICAgICAqIExvYWRzIHRoZSBlbnRp\ndHkgbWFuYWdlciBzcGVjaWZpZWQgYnkgPGNvZGU+bmFtZTwvY29kZT4sIGFw\ncGx5aW5nCiAgICAgKiB0aGUgcHJvcGVydGllcyBpbiA8Y29kZT5tPC9jb2Rl\nPiBhcyBvdmVycmlkZXMgdG8gdGhlIHByb3BlcnRpZXMgZGVmaW5lZAogICAg\nICogaW4gdGhlIFhNTCBjb25maWd1cmF0aW9uIGZpbGUgZm9yIDxjb2RlPm5h\nbWU8L2NvZGU+LiBJZiA8Y29kZT5uYW1lPC9jb2RlPgogICAgICogaXMgPGNv\nZGU+bnVsbDwvY29kZT4sIHRoaXMgbWV0aG9kIGxvYWRzIHRoZSBYTUwgaW4g\ndGhlIHJlc291cmNlCiAgICAgKiBpZGVudGlmaWVkIGJ5IDxjb2RlPnJlc291\ncmNlPC9jb2RlPiwgYW5kIHVzZXMgdGhlIGZpcnN0IHJlc291cmNlIGZvdW5k\nCiAgICAgKiB3aGVuIGRvaW5nIHRoaXMgbG9va3VwLCByZWdhcmRsZXNzIG9m\nIHRoZSBuYW1lIHNwZWNpZmllZCBpbiB0aGUgWE1MCiAgICAgKiByZXNvdXJj\nZSBvciB0aGUgbmFtZSBvZiB0aGUgamFyIHRoYXQgdGhlIHJlc291cmNlIGlz\nIGNvbnRhaW5lZCBpbi4KICAgICAqIFRoaXMgZG9lcyBubyBwb29saW5nIG9m\nIEVudGl0eU1hbmFnZXJzRmFjdG9yaWVzLgogICAgICovCiAgICBwdWJsaWMg\nT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IGNyZWF0ZUVudGl0eU1hbmFn\nZXJGYWN0b3J5KFN0cmluZyBuYW1lLAogICAgICAgIFN0cmluZyByZXNvdXJj\nZSwgTWFwIG0pIHsKICAgICAgICBQZXJzaXN0ZW5jZVByb2R1Y3REZXJpdmF0\naW9uIHBkID0gbmV3IFBlcnNpc3RlbmNlUHJvZHVjdERlcml2YXRpb24oKTsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBPYmplY3QgcG9vbFZhbHVlID0g\nQ29uZmlndXJhdGlvbnMucmVtb3ZlUHJvcGVydHkoRU1GX1BPT0wsIG0pOwog\nICAgICAgICAgICBDb25maWd1cmF0aW9uUHJvdmlkZXIgY3AgPSBwZC5sb2Fk\nKHJlc291cmNlLCBuYW1lLCBtKTsKICAgICAgICAgICAgaWYgKGNwID09IG51\nbGwpCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgICAg\nIEJyb2tlckZhY3RvcnkgZmFjdG9yeSA9IGdldEJyb2tlckZhY3RvcnkoY3As\nIHBvb2xWYWx1ZSwgbnVsbCk7CiAgICAgICAgICAgIHByZWxvYWRNZXRhRGF0\nYVJlcG9zaXRvcnkoZmFjdG9yeSk7CiAgICAgICAgICAgIAogICAgICAgICAg\nICByZXR1cm4gSlBBRmFjYWRlSGVscGVyLnRvRW50aXR5TWFuYWdlckZhY3Rv\ncnkoZmFjdG9yeSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgdGhyb3cgUGVyc2lzdGVuY2VFeGNlcHRpb25zLnRvUGVy\nc2lzdGVuY2VFeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAgfQoKICAgIHBy\naXZhdGUgQnJva2VyRmFjdG9yeSBnZXRCcm9rZXJGYWN0b3J5KENvbmZpZ3Vy\nYXRpb25Qcm92aWRlciBjcCwKICAgICAgICBPYmplY3QgcG9vbFZhbHVlLCBD\nbGFzc0xvYWRlciBsb2FkZXIpIHsKICAgICAgICAvLyBoYW5kbGUgInRydWUi\nIGFuZCAiZmFsc2UiCiAgICAgICAgaWYgKHBvb2xWYWx1ZSBpbnN0YW5jZW9m\nIFN0cmluZwogICAgICAgICAgICAmJiAoInRydWUiLmVxdWFsc0lnbm9yZUNh\nc2UoKFN0cmluZykgcG9vbFZhbHVlKQogICAgICAgICAgICAgICAgfHwgImZh\nbHNlIi5lcXVhbHNJZ25vcmVDYXNlKChTdHJpbmcpIHBvb2xWYWx1ZSkpKQog\nICAgICAgICAgICBwb29sVmFsdWUgPSBCb29sZWFuLnZhbHVlT2YoKFN0cmlu\nZykgcG9vbFZhbHVlKTsKCiAgICAgICAgaWYgKHBvb2xWYWx1ZSAhPSBudWxs\nICYmICEocG9vbFZhbHVlIGluc3RhbmNlb2YgQm9vbGVhbikpIHsKICAgICAg\nICAgICAgLy8gd2Ugb25seSBzdXBwb3J0IGJvb2xlYW4gc2V0dGluZ3MgZm9y\nIHRoaXMgb3B0aW9uIGN1cnJlbnRseS4KICAgICAgICAgICAgdGhyb3cgbmV3\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihwb29sVmFsdWUudG9TdHJpbmco\nKSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChwb29sVmFsdWUg\nPT0gbnVsbCB8fCAhKChCb29sZWFuKSBwb29sVmFsdWUpLmJvb2xlYW5WYWx1\nZSgpKQogICAgICAgICAgICByZXR1cm4gQm9vdHN0cmFwLm5ld0Jyb2tlckZh\nY3RvcnkoY3AsIGxvYWRlcik7CiAgICAgICAgZWxzZQogICAgICAgICAgICBy\nZXR1cm4gQm9vdHN0cmFwLmdldEJyb2tlckZhY3RvcnkoY3AsIGxvYWRlcik7\nCiAgICB9CgogICAgcHVibGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neSBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeShTdHJpbmcgbmFtZSwKICAg\nICAgICBNYXAgbSkgewogICAgICAgIHJldHVybiBjcmVhdGVFbnRpdHlNYW5h\nZ2VyRmFjdG9yeShuYW1lLCBudWxsLCBtKTsKICAgIH0KCiAgICBwdWJsaWMg\nT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IGNyZWF0ZUNvbnRhaW5lckVu\ndGl0eU1hbmFnZXJGYWN0b3J5KAogICAgICAgIFBlcnNpc3RlbmNlVW5pdElu\nZm8gcHVpLCBNYXAgbSkgewogICAgICAgIFBlcnNpc3RlbmNlUHJvZHVjdERl\ncml2YXRpb24gcGQgPSBuZXcgUGVyc2lzdGVuY2VQcm9kdWN0RGVyaXZhdGlv\nbigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE9iamVjdCBwb29sVmFs\ndWUgPSBDb25maWd1cmF0aW9ucy5yZW1vdmVQcm9wZXJ0eShFTUZfUE9PTCwg\nbSk7CiAgICAgICAgICAgIENvbmZpZ3VyYXRpb25Qcm92aWRlciBjcCA9IHBk\nLmxvYWQocHVpLCBtKTsKICAgICAgICAgICAgaWYgKGNwID09IG51bGwpCiAg\nICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgICAgIC8vIGFk\nZCBlbmhhbmNlcgogICAgICAgICAgICBFeGNlcHRpb24gdHJhbnNmb3JtZXJF\neGNlcHRpb24gPSBudWxsOwogICAgICAgICAgICBTdHJpbmcgY3RPcHRzID0g\nKFN0cmluZykgQ29uZmlndXJhdGlvbnMuZ2V0UHJvcGVydHkKICAgICAgICAg\nICAgICAgIChDTEFTU19UUkFOU0ZPUk1FUl9PUFRJT05TLCBwdWkuZ2V0UHJv\ncGVydGllcygpKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nIHB1aS5hZGRUcmFuc2Zvcm1lcihuZXcgQ2xhc3NUcmFuc2Zvcm1lckltcGwo\nY3AsIGN0T3B0cywKICAgICAgICAgICAgICAgICAgICBwdWkuZ2V0TmV3VGVt\ncENsYXNzTG9hZGVyKCksIG5ld0NvbmZpZ3VyYXRpb25JbXBsKCkpKTsKICAg\nICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nICAgIC8vIGZhaWwgZ3JhY2VmdWxseQogICAgICAgICAgICAgICAgdHJhbnNm\nb3JtZXJFeGNlcHRpb24gPSBlOwogICAgICAgICAgICB9CgogICAgICAgICAg\nICAvLyBpZiB0aGUgQnJva2VySW1wbCBoYXNuJ3QgYmVlbiBzcGVjaWZpZWQs\nIHN3aXRjaCB0byB0aGUKICAgICAgICAgICAgLy8gbm9uLWZpbmFsaXppbmcg\nb25lLCBzaW5jZSBhbnl0aGluZyBjbGFpbWluZyB0byBiZSBhIGNvbnRhaW5l\ncgogICAgICAgICAgICAvLyBzaG91bGQgYmUgZG9pbmcgcHJvcGVyIHJlc291\ncmNlIG1hbmFnZW1lbnQuCiAgICAgICAgICAgIGlmICghQ29uZmlndXJhdGlv\nbnMuY29udGFpbnNQcm9wZXJ0eShCcm9rZXJWYWx1ZS5LRVksCiAgICAgICAg\nICAgICAgICBjcC5nZXRQcm9wZXJ0aWVzKCkpKSB7CiAgICAgICAgICAgICAg\nICBjcC5hZGRQcm9wZXJ0eSgib3BlbmpwYS4iICsgQnJva2VyVmFsdWUuS0VZ\nLCAKICAgICAgICAgICAgICAgICAgICBnZXREZWZhdWx0QnJva2VyQWxpYXMo\nKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEJyb2tlckZhY3Rvcnkg\nZmFjdG9yeSA9IGdldEJyb2tlckZhY3RvcnkoY3AsIHBvb2xWYWx1ZSwKICAg\nICAgICAgICAgICAgIHB1aS5nZXRDbGFzc0xvYWRlcigpKTsKICAgICAgICAg\nICAgaWYgKHRyYW5zZm9ybWVyRXhjZXB0aW9uICE9IG51bGwpIHsKICAgICAg\nICAgICAgICAgIExvZyBsb2cgPSBmYWN0b3J5LmdldENvbmZpZ3VyYXRpb24o\nKS5nZXRMb2coCiAgICAgICAgICAgICAgICAgICAgT3BlbkpQQUNvbmZpZ3Vy\nYXRpb24uTE9HX1JVTlRJTUUpOwogICAgICAgICAgICAgICAgaWYgKGxvZy5p\nc1RyYWNlRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nLndh\ncm4oCiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2MuZ2V0KCJ0cmFuc2Zv\ncm1lci1yZWdpc3RyYXRpb24tZXJyb3ItZXgiLCBwdWkpLAogICAgICAgICAg\nICAgICAgICAgICAgICB0cmFuc2Zvcm1lckV4Y2VwdGlvbik7CiAgICAgICAg\nICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvZy53YXJu\nKAogICAgICAgICAgICAgICAgICAgICAgICBfbG9jLmdldCgidHJhbnNmb3Jt\nZXItcmVnaXN0cmF0aW9uLWVycm9yIiwgcHVpKSk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcHJlbG9hZE1ldGFEYXRh\nUmVwb3NpdG9yeShmYWN0b3J5KTsgICAgICAgICAgIAogICAgICAgICAgICBy\nZXR1cm4gSlBBRmFjYWRlSGVscGVyLnRvRW50aXR5TWFuYWdlckZhY3Rvcnko\nZmFjdG9yeSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgdGhyb3cgUGVyc2lzdGVuY2VFeGNlcHRpb25zLnRvUGVyc2lz\ndGVuY2VFeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qCiAg\nICAgKiBSZXR1cm5zIGEgZGVmYXVsdCBCcm9rZXIgYWxpYXMgdG8gYmUgdXNl\nZCB3aGVuIG5vIG9wZW5qcGEuQnJva2VySW1wbAogICAgICogIGlzIHNwZWNp\nZmllZC4gVGhpcyBtZXRob2QgYWxsb3dzIFBlcnNpc3RlbmNlUHJvdmlkZXIg\nc3ViY2xhc3MgdG8KICAgICAqICBvdmVycmlkZSB0aGUgZGVmYXVsdCBicm9r\nZXIgYWxpYXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0RGVm\nYXVsdEJyb2tlckFsaWFzKCkgewogICAgICAgIHJldHVybiBCcm9rZXJWYWx1\nZS5OT05fRklOQUxJWklOR19BTElBUzsKICAgIH0KICAgIAogICAgLyoKICAg\nICAqIFJldHVybiBhIG5ldyBpbnN0YW5jZSBvZiBDb25maWd1cmF0aW9uIHN1\nYmNsYXNzIHVzZWQgYnkgZW50aXR5CiAgICAgKiBlbmhhbmNlbWVudCBpbiBD\nbGFzc1RyYW5zZm9ybWVySW1wbC4gSWYgT3BlbkpQQUNvbmZpZ3VyYXRpb25J\nbXBsCiAgICAgKiBpbnN0YW5jZSBpcyB1c2VkLCBjb25maWd1cmF0aW9uIG9w\ndGlvbnMgZGVjbGFyZWQgaW4gY29uZmlndXJhdGlvbgogICAgICogc3ViLWNs\nYXNzIHdpbGwgbm90IGJlIHJlY29nbml6ZWQgYW5kIGEgd2FybmluZyBpcyBw\nb3N0ZWQgaW4gdGhlIGxvZy4KICAgICAqLwogICAgcHJvdGVjdGVkIE9wZW5K\nUEFDb25maWd1cmF0aW9uIG5ld0NvbmZpZ3VyYXRpb25JbXBsKCkgewogICAg\nICAgIHJldHVybiBuZXcgT3BlbkpQQUNvbmZpZ3VyYXRpb25JbXBsKCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBQcml2YXRlIHdvcmtlciBtZXRob2QgdGhh\ndCB3aWxsIGNhbGwgdG8gdGhlIE1ldGFEYXRhUmVwb3NpdG9yeSB0byBwcmVs\nb2FkIGlmIHRoZSBwcm92aWRlZAogICAgICogQnJva2VyRmFjdG9yeSBpcyBj\nb25maWd1cmVkIHRvIGRvIHNvLgogICAgICovCiAgICBwcml2YXRlIHZvaWQg\ncHJlbG9hZE1ldGFEYXRhUmVwb3NpdG9yeShCcm9rZXJGYWN0b3J5IGZhY3Rv\ncnkpewogICAgICAgIC8vIFdlIG5lZWQgdG8gd2FpdCB0byBwcmVsb2FkIHVu\ndGlsIGFmdGVyIHdlIGdldCBiYWNrIGEgZnVsbHkgY29uZmlndXJlZC9pbnN0\nYW50aWF0ZWQKICAgICAgICAvLyBCcm9rZXJGYWN0b3J5LiBUaGlzIGlzIGJl\nY2F1c2UgaXQgaXMgcG9zc2libGUgdGhhdCBzb21lb25lIGhhcyBleHRlbmRl\nZCBPcGVuSlBBCiAgICAgICAgLy8gZnVuY3Rpb25zIGFuZCB0aGV5IG5lZWQg\ndG8gYmUgYWxsb3dlZCB0aW1lIHRvIGNvbmZpZ3VyZSB0aGVtc2VsdmVzIGJl\nZm9yZSB3ZSBnbyBvZmYgYW5kCiAgICAgICAgLy8gc3RhcnQgaW5zdGFudGlu\nZyBjb25maWd1cmFibGUgb2JqZWN0cyAoaWU6b3BlbmpwYS5NZXRhRGF0YVJl\ncG9zaXRvcnkpLiBEb24ndCBjYXRjaAogICAgICAgIC8vIGFueSBleGNlcHRp\nb25zIGhlcmUgYmVjYXVzZSB3ZSB3YW50IHRvIGZhaWwtZmFzdC4KICAgICAg\nICBPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mID0gZmFjdG9yeS5nZXRDb25m\naWd1cmF0aW9uKCk7CiAgICAgICAgT3B0aW9ucyBvID0gQ29uZmlndXJhdGlv\nbnMucGFyc2VQcm9wZXJ0aWVzKENvbmZpZ3VyYXRpb25zLmdldFByb3BlcnRp\nZXMoY29uZi5nZXRNZXRhRGF0YVJlcG9zaXRvcnkoKSkpOwogICAgICAgIGlm\nIChNZXRhRGF0YVJlcG9zaXRvcnkubmVlZHNQcmVsb2FkKG8pID09IHRydWUp\nIHsKICAgICAgICAgICAgTWV0YURhdGFSZXBvc2l0b3J5IG1kciA9IGNvbmYu\nZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsgCiAgICAgICAgICAg\nIG1kci5zZXRWYWxpZGF0ZShNZXRhRGF0YVJlcG9zaXRvcnkuVkFMSURBVEVf\nUlVOVElNRSwgdHJ1ZSk7CiAgICAgICAgICAgIG1kci5zZXRSZXNvbHZlKE1l\ndGFEYXRhUmVwb3NpdG9yeS5NT0RFX01BUFBJTkdfSU5JVCwgdHJ1ZSk7CiAg\nICAgICAgICAgIAogICAgICAgICAgICAvLyBMb2FkIHBlcnNpc3RlbnQgY2xh\nc3NlcyBhbmQgaG9vayBpbiBzdWJjbGFzc2VyCiAgICAgICAgICAgICgoQWJz\ndHJhY3RCcm9rZXJGYWN0b3J5KSBmYWN0b3J5KS5sb2FkUGVyc2lzdGVudFR5\ncGVzKChDbGFzc0xvYWRlcikgQWNjZXNzQ29udHJvbGxlcgogICAgICAgICAg\nICAgICAgLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlci5nZXRDb250ZXh0\nQ2xhc3NMb2FkZXJBY3Rpb24oKSkpOwogICAgICAgICAgICBtZHIucHJlbG9h\nZCgpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBKYXZh\nIEVFIDUgY2xhc3MgdHJhbnNmb3JtZXIuCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIGNsYXNzIENsYXNzVHJhbnNmb3JtZXJJbXBsCiAgICAgICAgaW1w\nbGVtZW50cyBDbGFzc1RyYW5zZm9ybWVyIHsKCiAgICAgICAgcHJpdmF0ZSBm\naW5hbCBDbGFzc0ZpbGVUcmFuc2Zvcm1lciBfdHJhbnM7CgogICAgICAgIHBy\naXZhdGUgQ2xhc3NUcmFuc2Zvcm1lckltcGwoQ29uZmlndXJhdGlvblByb3Zp\nZGVyIGNwLCBTdHJpbmcgcHJvcHMsIAogICAgICAgICAgICBmaW5hbCBDbGFz\nc0xvYWRlciB0bXBMb2FkZXIsIE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYp\nIHsKICAgICAgICAgICAgY3Auc2V0SW50byhjb25mKTsKICAgICAgICAgICAg\nLy8gdXNlIHRoZSB0bXAgbG9hZGVyIGZvciBldmVyeXRoaW5nCiAgICAgICAg\nICAgIGNvbmYuc2V0Q2xhc3NSZXNvbHZlcihuZXcgQ2xhc3NSZXNvbHZlcigp\nIHsKICAgICAgICAgICAgICAgIHB1YmxpYyBDbGFzc0xvYWRlciBnZXRDbGFz\nc0xvYWRlcihDbGFzcyBjb250ZXh0LCAKICAgICAgICAgICAgICAgICAgICBD\nbGFzc0xvYWRlciBlbnYpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4g\ndG1wTG9hZGVyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsK\nICAgICAgICAgICAgY29uZi5zZXRSZWFkT25seShDb25maWd1cmF0aW9uLklO\nSVRfU1RBVEVfRlJFRVpJTkcpOwoKICAgICAgICAgICAgTWV0YURhdGFSZXBv\nc2l0b3J5IHJlcG9zID0gY29uZi5nZXRNZXRhRGF0YVJlcG9zaXRvcnlJbnN0\nYW5jZSgpOwogICAgICAgICAgICByZXBvcy5zZXRSZXNvbHZlKE1ldGFEYXRh\nTW9kZXMuTU9ERV9NQVBQSU5HLCBmYWxzZSk7CiAgICAgICAgICAgIF90cmFu\ncyA9IG5ldyBQQ0NsYXNzRmlsZVRyYW5zZm9ybWVyKHJlcG9zLAogICAgICAg\nICAgICAgICAgQ29uZmlndXJhdGlvbnMucGFyc2VQcm9wZXJ0aWVzKHByb3Bz\nKSwgdG1wTG9hZGVyKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBieXRl\nW10gdHJhbnNmb3JtKENsYXNzTG9hZGVyIGNsLCBTdHJpbmcgbmFtZSwKICAg\nICAgICAgICAgQ2xhc3M8Pz4gcHJldmlvdXNWZXJzaW9uLCBQcm90ZWN0aW9u\nRG9tYWluIHBkLCBieXRlW10gYnl0ZXMpCiAgICAgICAgICAgIHRocm93cyBJ\nbGxlZ2FsQ2xhc3NGb3JtYXRFeGNlcHRpb24gewogICAgICAgICAgICByZXR1\ncm4gX3RyYW5zLnRyYW5zZm9ybShjbCwgbmFtZSwgcHJldmlvdXNWZXJzaW9u\nLCBwZCwgYnl0ZXMpOwogICAgICAgIH0KCX0KfQo=\n","encoding":"base64"}

