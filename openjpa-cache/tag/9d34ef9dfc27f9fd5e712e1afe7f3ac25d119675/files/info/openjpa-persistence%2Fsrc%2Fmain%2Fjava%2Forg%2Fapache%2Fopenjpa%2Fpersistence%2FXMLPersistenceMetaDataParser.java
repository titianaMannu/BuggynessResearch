{"sha":"e467f0e010cba8309deb59c4e6f5acca3970944e","node_id":"MDQ6QmxvYjIwNjM2NDplNDY3ZjBlMDEwY2JhODMwOWRlYjU5YzRlNmY1YWNjYTM5NzA5NDRl","size":56598,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e467f0e010cba8309deb59c4e6f5acca3970944e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuRmllbGQ7CmltcG9ydCBqYXZhLmxhbmcu\ncmVmbGVjdC5NZW1iZXI7CmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRo\nb2Q7CmltcG9ydCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7Cmlt\ncG9ydCBqYXZhLnNlY3VyaXR5LlByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb247\nCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGls\nLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuRW51bVNldDsKaW1wb3J0\nIGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1w\nb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwuU3RhY2s7Cmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5DYXNjYWRlVHlwZTsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLkdlbmVyYXRpb25UeXBlOwppbXBvcnQgc3RhdGlj\nIGphdmF4LnBlcnNpc3RlbmNlLkNhc2NhZGVUeXBlLio7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBvcmcu\neG1sLnNheC5BdHRyaWJ1dGVzOwppbXBvcnQgb3JnLnhtbC5zYXguTG9jYXRv\ncjsKaW1wb3J0IG9yZy54bWwuc2F4LlNBWEV4Y2VwdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2UuUGVyc2lzdGVuY2VD\nYXBhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50LkJlYW5M\naWZlY3ljbGVDYWxsYmFja3M7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nZXZlbnQuTGlmZWN5Y2xlQ2FsbGJhY2tzOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmV2ZW50LkxpZmVjeWNsZUV2ZW50OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmV2ZW50Lk1ldGhvZExpZmVjeWNsZUNhbGxiYWNrczsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnlMYW5ndWFnZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmpwcWwuSlBRTFBh\ncnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25m\naWd1cmF0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9n\nLkxvZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5DRk1l\ndGFEYXRhUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51\ndGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5EZWxlZ2F0aW5nTWV0YURhdGFGYWN0b3J5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLm1ldGEuRmllbGRNZXRhRGF0YTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5tZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5tZXRhLkxpZmVjeWNsZU1ldGFEYXRhOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFEZWZhdWx0czsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLk1ldGFEYXRhRmFjdG9yeTsK\naW1wb3J0IHN0YXRpYyBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0\nYU1vZGVzLio7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRh\nRGF0YVJlcG9zaXRvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5PcmRlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLlF1ZXJ5\nTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5TZXF1\nZW5jZU1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nVmFsdWVNZXRhRGF0YTsKaW1wb3J0IHN0YXRpYyBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuTWV0YURhdGFUYWcuKjsKaW1wb3J0IHN0YXRpYyBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2VTdHJh\ndGVneS4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW1wbEhl\nbHBlcjsKCmltcG9ydCBzZXJwLnV0aWwuTnVtYmVyczsKCi8qKgogKiBDdXN0\nb20gU0FYIHBhcnNlciB1c2VkIGJ5IHRoZSBzeXN0ZW0gdG8gcXVpY2tseSBw\nYXJzZSBwZXJzaXN0ZW5jZSBpCiAqIG1ldGFkYXRhIGZpbGVzLgogKgogKiBA\nYXV0aG9yIFN0ZXZlIEtpbQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xh\nc3MgWE1MUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlcgogICAgZXh0ZW5kcyBD\nRk1ldGFEYXRhUGFyc2VyCiAgICBpbXBsZW1lbnRzIFBlcnNpc3RlbmNlTWV0\nYURhdGFGYWN0b3J5LlBhcnNlciB7CgogICAgLy8gcGFyc2UgY29uc3RhbnRz\nCiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBFTEVNX1BLRyA9\nICJwYWNrYWdlIjsKICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5n\nIEVMRU1fQUNDRVNTID0gImFjY2VzcyI7CiAgICBwcm90ZWN0ZWQgc3RhdGlj\nIGZpbmFsIFN0cmluZyBFTEVNX0FUVFJTID0gImF0dHJpYnV0ZXMiOwogICAg\ncHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgRUxFTV9MSVNURU5FUiA9\nICJlbnRpdHktbGlzdGVuZXIiOwogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5h\nbCBTdHJpbmcgRUxFTV9DQVNDQURFID0gImNhc2NhZGUiOwogICAgcHJvdGVj\ndGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgRUxFTV9DQVNDQURFX0FMTCA9ICJj\nYXNjYWRlLWFsbCI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmlu\nZyBFTEVNX0NBU0NBREVfUEVSID0gImNhc2NhZGUtcGVyc2lzdCI7CiAgICBw\ncm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBFTEVNX0NBU0NBREVfTUVS\nID0gImNhc2NhZGUtbWVyZ2UiOwogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5h\nbCBTdHJpbmcgRUxFTV9DQVNDQURFX1JFTSA9ICJjYXNjYWRlLXJlbW92ZSI7\nCiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBFTEVNX0NBU0NB\nREVfUkVGID0gImNhc2NhZGUtcmVmcmVzaCI7CiAgICBwcm90ZWN0ZWQgc3Rh\ndGljIGZpbmFsIFN0cmluZyBFTEVNX1BVX01FVEEgPSAicGVyc2lzdGVuY2Ut\ndW5pdC1tZXRhZGF0YSI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0\ncmluZyBFTEVNX1BVX0RFRiA9ICJwZXJzaXN0ZW5jZS11bml0LWRlZmF1bHRz\nIjsKICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIEVMRU1fWE1M\nX01BUF9NRVRBX0NPTVBMRVRFID0KICAgICAgICAieG1sLW1hcHBpbmctbWV0\nYWRhdGEtY29tcGxldGUiOwoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIE1h\ncDxTdHJpbmcsIE9iamVjdD4gX2VsZW1zID0KICAgICAgICBuZXcgSGFzaE1h\ncDxTdHJpbmcsIE9iamVjdD4oKTsKCiAgICBzdGF0aWMgewogICAgICAgIF9l\nbGVtcy5wdXQoRUxFTV9QS0csIEVMRU1fUEtHKTsKICAgICAgICBfZWxlbXMu\ncHV0KEVMRU1fQUNDRVNTLCBFTEVNX0FDQ0VTUyk7CiAgICAgICAgX2VsZW1z\nLnB1dChFTEVNX0FUVFJTLCBFTEVNX0FUVFJTKTsKICAgICAgICBfZWxlbXMu\ncHV0KEVMRU1fTElTVEVORVIsIEVMRU1fTElTVEVORVIpOwogICAgICAgIF9l\nbGVtcy5wdXQoRUxFTV9DQVNDQURFLCBFTEVNX0NBU0NBREUpOwogICAgICAg\nIF9lbGVtcy5wdXQoRUxFTV9DQVNDQURFX0FMTCwgRUxFTV9DQVNDQURFX0FM\nTCk7CiAgICAgICAgX2VsZW1zLnB1dChFTEVNX0NBU0NBREVfUEVSLCBFTEVN\nX0NBU0NBREVfUEVSKTsKICAgICAgICBfZWxlbXMucHV0KEVMRU1fQ0FTQ0FE\nRV9SRU0sIEVMRU1fQ0FTQ0FERV9SRU0pOwogICAgICAgIF9lbGVtcy5wdXQo\nRUxFTV9DQVNDQURFX01FUiwgRUxFTV9DQVNDQURFX01FUik7CiAgICAgICAg\nX2VsZW1zLnB1dChFTEVNX0NBU0NBREVfUkVGLCBFTEVNX0NBU0NBREVfUkVG\nKTsKICAgICAgICBfZWxlbXMucHV0KEVMRU1fUFVfTUVUQSwgRUxFTV9QVV9N\nRVRBKTsKICAgICAgICBfZWxlbXMucHV0KEVMRU1fUFVfREVGLCBFTEVNX1BV\nX0RFRik7CiAgICAgICAgX2VsZW1zLnB1dChFTEVNX1hNTF9NQVBfTUVUQV9D\nT01QTEVURSwgRUxFTV9YTUxfTUFQX01FVEFfQ09NUExFVEUpOwoKICAgICAg\nICBfZWxlbXMucHV0KCJlbnRpdHktbGlzdGVuZXJzIiwgRU5USVRZX0xJU1RF\nTkVSUyk7CiAgICAgICAgX2VsZW1zLnB1dCgicHJlLXBlcnNpc3QiLCBQUkVf\nUEVSU0lTVCk7CiAgICAgICAgX2VsZW1zLnB1dCgicG9zdC1wZXJzaXN0Iiwg\nUE9TVF9QRVJTSVNUKTsKICAgICAgICBfZWxlbXMucHV0KCJwcmUtcmVtb3Zl\nIiwgUFJFX1JFTU9WRSk7CiAgICAgICAgX2VsZW1zLnB1dCgicG9zdC1yZW1v\ndmUiLCBQT1NUX1JFTU9WRSk7CiAgICAgICAgX2VsZW1zLnB1dCgicHJlLXVw\nZGF0ZSIsIFBSRV9VUERBVEUpOwogICAgICAgIF9lbGVtcy5wdXQoInBvc3Qt\ndXBkYXRlIiwgUE9TVF9VUERBVEUpOwogICAgICAgIF9lbGVtcy5wdXQoInBv\nc3QtbG9hZCIsIFBPU1RfTE9BRCk7CiAgICAgICAgX2VsZW1zLnB1dCgiZXhj\nbHVkZS1kZWZhdWx0LWxpc3RlbmVycyIsIEVYQ0xVREVfREVGQVVMVF9MSVNU\nRU5FUlMpOwogICAgICAgIF9lbGVtcy5wdXQoImV4Y2x1ZGUtc3VwZXJjbGFz\ncy1saXN0ZW5lcnMiLAogICAgICAgICAgICBFWENMVURFX1NVUEVSQ0xBU1Nf\nTElTVEVORVJTKTsKCiAgICAgICAgX2VsZW1zLnB1dCgibmFtZWQtcXVlcnki\nLCBRVUVSWSk7CiAgICAgICAgX2VsZW1zLnB1dCgibmFtZWQtbmF0aXZlLXF1\nZXJ5IiwgTkFUSVZFX1FVRVJZKTsKICAgICAgICBfZWxlbXMucHV0KCJxdWVy\neS1oaW50IiwgUVVFUllfSElOVCk7CiAgICAgICAgX2VsZW1zLnB1dCgicXVl\ncnkiLCBRVUVSWV9TVFJJTkcpOwoKICAgICAgICBfZWxlbXMucHV0KCJmbHVz\naC1tb2RlIiwgRkxVU0hfTU9ERSk7CiAgICAgICAgX2VsZW1zLnB1dCgic2Vx\ndWVuY2UtZ2VuZXJhdG9yIiwgU0VRX0dFTkVSQVRPUik7CgogICAgICAgIF9l\nbGVtcy5wdXQoImlkIiwgSUQpOwogICAgICAgIF9lbGVtcy5wdXQoImlkLWNs\nYXNzIiwgSURfQ0xBU1MpOwogICAgICAgIF9lbGVtcy5wdXQoImVtYmVkZGVk\nLWlkIiwgRU1CRURERURfSUQpOwogICAgICAgIF9lbGVtcy5wdXQoInZlcnNp\nb24iLCBWRVJTSU9OKTsKICAgICAgICBfZWxlbXMucHV0KCJnZW5lcmF0ZWQt\ndmFsdWUiLCBHRU5FUkFURURfVkFMVUUpOwogICAgICAgIF9lbGVtcy5wdXQo\nIm1hcC1rZXkiLCBNQVBfS0VZKTsKICAgICAgICBfZWxlbXMucHV0KCJvcmRl\nci1ieSIsIE9SREVSX0JZKTsKICAgICAgICBfZWxlbXMucHV0KCJsb2IiLCBM\nT0IpOwoKICAgICAgICBfZWxlbXMucHV0KCJiYXNpYyIsIEJBU0lDKTsKICAg\nICAgICBfZWxlbXMucHV0KCJtYW55LXRvLW9uZSIsIE1BTllfT05FKTsKICAg\nICAgICBfZWxlbXMucHV0KCJvbmUtdG8tb25lIiwgT05FX09ORSk7CiAgICAg\nICAgX2VsZW1zLnB1dCgiZW1iZWRkZWQiLCBFTUJFRERFRCk7CiAgICAgICAg\nX2VsZW1zLnB1dCgib25lLXRvLW1hbnkiLCBPTkVfTUFOWSk7CiAgICAgICAg\nX2VsZW1zLnB1dCgibWFueS10by1tYW55IiwgTUFOWV9NQU5ZKTsKICAgICAg\nICBfZWxlbXMucHV0KCJ0cmFuc2llbnQiLCBUUkFOU0lFTlQpOwogICAgfQoK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9j\nYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoWE1MUGVyc2lzdGVuY2VNZXRh\nRGF0YVBhcnNlci5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBPcGVuSlBB\nQ29uZmlndXJhdGlvbiBfY29uZjsKICAgIHByaXZhdGUgTWV0YURhdGFSZXBv\nc2l0b3J5IF9yZXBvcyA9IG51bGw7CiAgICBwcml2YXRlIEFubm90YXRpb25Q\nZXJzaXN0ZW5jZU1ldGFEYXRhUGFyc2VyIF9wYXJzZXIgPSBudWxsOwogICAg\ncHJpdmF0ZSBDbGFzc0xvYWRlciBfZW52TG9hZGVyID0gbnVsbDsKICAgIHBy\naXZhdGUgaW50IF9tb2RlID0gTU9ERV9OT05FOwogICAgcHJpdmF0ZSBib29s\nZWFuIF9vdmVycmlkZSA9IGZhbHNlOwoKICAgIHByaXZhdGUgZmluYWwgU3Rh\nY2sgX2VsZW1lbnRzID0gbmV3IFN0YWNrKCk7CiAgICBwcml2YXRlIGZpbmFs\nIFN0YWNrIF9wYXJlbnRzID0gbmV3IFN0YWNrKCk7CgogICAgcHJpdmF0ZSBD\nbGFzcyBfY2xzID0gbnVsbDsKICAgIHByaXZhdGUgaW50IF9maWVsZFBvcyA9\nIDA7CiAgICBwcml2YXRlIGludCBfY2xzUG9zID0gMDsKICAgIHByaXZhdGUg\naW50IF9hY2Nlc3MgPSBDbGFzc01ldGFEYXRhLkFDQ0VTU19VTktOT1dOOwog\nICAgcHJpdmF0ZSBQZXJzaXN0ZW5jZVN0cmF0ZWd5IF9zdHJhdGVneSA9IG51\nbGw7CiAgICBwcml2YXRlIFNldDxDYXNjYWRlVHlwZT4gX2Nhc2NhZGVzID0g\nbnVsbDsKICAgIHByaXZhdGUgU2V0PENhc2NhZGVUeXBlPiBfcGtnQ2FzY2Fk\nZXMgPSBudWxsOwoKICAgIHByaXZhdGUgQ2xhc3MgX2xpc3RlbmVyID0gbnVs\nbDsKICAgIHByaXZhdGUgQ29sbGVjdGlvbjxMaWZlY3ljbGVDYWxsYmFja3M+\nW10gX2NhbGxiYWNrcyA9IG51bGw7CiAgICBwcml2YXRlIGludFtdIF9oaWdo\ncyA9IG51bGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5\nIGNvbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBYTUxQZXJzaXN0\nZW5jZU1ldGFEYXRhUGFyc2VyKE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYp\nIHsKICAgICAgICBfY29uZiA9IGNvbmY7CiAgICAgICAgc2V0VmFsaWRhdGlu\nZyh0cnVlKTsKICAgICAgICBzZXRMb2coY29uZi5nZXRMb2coT3BlbkpQQUNv\nbmZpZ3VyYXRpb24uTE9HX01FVEFEQVRBKSk7CiAgICAgICAgc2V0UGFyc2VD\nb21tZW50cyh0cnVlKTsKICAgICAgICBzZXRNb2RlKE1PREVfTUVUQSB8IE1P\nREVfTUFQUElORyB8IE1PREVfUVVFUlkpOwogICAgICAgIHNldFBhcnNlVGV4\ndCh0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbmZpZ3VyYXRpb24g\nc3VwcGxpZWQgb24gY29uc3RydWN0aW9uLgogICAgICovCiAgICBwdWJsaWMg\nT3BlbkpQQUNvbmZpZ3VyYXRpb24gZ2V0Q29uZmlndXJhdGlvbigpIHsKICAg\nICAgICByZXR1cm4gX2NvbmY7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUg\nYW5ub3RhdGlvbiBwYXJzZXIuIFdoZW4gY2xhc3MgaXMgZGlzY292ZXJlZCBp\nbiBhbiBYTUwgZmlsZSwKICAgICAqIHdlIGZpcnN0IHBhcnNlIGFueSBhbm5v\ndGF0aW9ucyBwcmVzZW50LCB0aGVuIG92ZXJyaWRlIHdpdGggdGhlIFhNTC4K\nICAgICAqLwogICAgcHVibGljIEFubm90YXRpb25QZXJzaXN0ZW5jZU1ldGFE\nYXRhUGFyc2VyIGdldEFubm90YXRpb25QYXJzZXIoKSB7CiAgICAgICAgcmV0\ndXJuIF9wYXJzZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgYW5ub3Rh\ndGlvbiBwYXJzZXIuIFdoZW4gY2xhc3MgaXMgZGlzY292ZXJlZCBpbiBhbiBY\nTUwgZmlsZSwKICAgICAqIHdlIGZpcnN0IHBhcnNlIGFueSBhbm5vdGF0aW9u\ncyBwcmVzZW50LCB0aGVuIG92ZXJyaWRlIHdpdGggdGhlIFhNTC4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0QW5ub3RhdGlvblBhcnNlcihBbm5vdGF0\naW9uUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlciBwYXJzZXIpewogICAgICAg\nIF9wYXJzZXIgPSBwYXJzZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm5zIHRoZSByZXBvc2l0b3J5IGZvciB0aGlzIHBhcnNlci4gSWYgbm9uZSBo\nYXMgYmVlbiBzZXQsIGNyZWF0ZXMKICAgICAqIGEgbmV3IHJlcG9zaXRvcnkg\nYW5kIHNldHMgaXQuCiAgICAgKi8KICAgIHB1YmxpYyBNZXRhRGF0YVJlcG9z\naXRvcnkgZ2V0UmVwb3NpdG9yeSgpIHsKICAgICAgICBpZiAoX3JlcG9zID09\nIG51bGwpIHsKICAgICAgICAgICAgTWV0YURhdGFSZXBvc2l0b3J5IHJlcG9z\nID0gX2NvbmYubmV3TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAg\nICAgICAgICAgTWV0YURhdGFGYWN0b3J5IG1kZiA9IHJlcG9zLmdldE1ldGFE\nYXRhRmFjdG9yeSgpOwogICAgICAgICAgICBpZiAobWRmIGluc3RhbmNlb2Yg\nRGVsZWdhdGluZ01ldGFEYXRhRmFjdG9yeSkKICAgICAgICAgICAgICAgIG1k\nZiA9ICgoRGVsZWdhdGluZ01ldGFEYXRhRmFjdG9yeSkgbWRmKS5nZXRJbm5l\ncm1vc3REZWxlZ2F0ZSgpOwogICAgICAgICAgICBpZiAobWRmIGluc3RhbmNl\nb2YgUGVyc2lzdGVuY2VNZXRhRGF0YUZhY3RvcnkpCiAgICAgICAgICAgICAg\nICAoKFBlcnNpc3RlbmNlTWV0YURhdGFGYWN0b3J5KSBtZGYpLnNldFhNTFBh\ncnNlcih0aGlzKTsKICAgICAgICAgICAgX3JlcG9zID0gcmVwb3M7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBfcmVwb3M7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTZXQgdGhlIG1ldGFkYXRhIHJlcG9zaXRvcnkgZm9yIHRoaXMgcGFy\nc2VyLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRSZXBvc2l0b3J5KE1l\ndGFEYXRhUmVwb3NpdG9yeSByZXBvcykgewogICAgICAgIF9yZXBvcyA9IHJl\ncG9zOwogICAgICAgIGlmIChyZXBvcyAhPSBudWxsCiAgICAgICAgICAgICYm\nIChyZXBvcy5nZXRWYWxpZGF0ZSgpICYgcmVwb3MuVkFMSURBVEVfUlVOVElN\nRSkgIT0gMCkKICAgICAgICAgICAgc2V0UGFyc2VDb21tZW50cyhmYWxzZSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGVudmlyb25tZW50\nYWwgY2xhc3MgbG9hZGVyIHRvIHBhc3Mgb24gdG8gcGFyc2VkCiAgICAgKiBt\nZXRhZGF0YSBpbnN0YW5jZXMuCiAgICAgKi8KICAgIHB1YmxpYyBDbGFzc0xv\nYWRlciBnZXRFbnZDbGFzc0xvYWRlcigpIHsKICAgICAgICByZXR1cm4gX2Vu\ndkxvYWRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgZW52aXJv\nbm1lbnRhbCBjbGFzcyBsb2FkZXIgdG8gcGFzcyBvbiB0byBwYXJzZWQKICAg\nICAqIG1ldGFkYXRhIGluc3RhbmNlcy4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0RW52Q2xhc3NMb2FkZXIoQ2xhc3NMb2FkZXIgbG9hZGVyKSB7CiAg\nICAgICAgX2VudkxvYWRlciA9IGxvYWRlcjsKICAgIH0KCiAgICAvKioKICAg\nICAqIFdoZXRoZXIgdG8gYWxsb3cgbGF0ZXIgcGFyc2VzIG9mIG1hcHBpbmcg\naW5mb3JtYXRpb24gdG8gb3ZlcnJpZGUKICAgICAqIGVhcmxpZXIgaW5mb3Jt\nYXRpb24gZm9yIHRoZSBzYW1lIGNsYXNzLiBEZWZhdWx0cyB0byBmYWxzZS4g\nVXNlZnVsCiAgICAgKiB3aGVuIGEgdG9vbCBpcyBtYXBwaW5nIGEgY2xhc3Ms\nIHNvIHRoYXQgLmpkbyBmaWxlIHBhcnRpYWwgbWFwcGluZwogICAgICogaW5m\nb3JtYXRpb24gY2FuIGJlIHVzZWQgZXZlbiB3aGVuIG1hcHBpbmdzIGFyZSBz\ndG9yZWQgaW4gLm9ybSBmaWxlcwogICAgICogb3Igb3RoZXIgbG9jYXRpb25z\nLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRNYXBwaW5nT3ZlcnJp\nZGUoKSB7CiAgICAgICAgcmV0dXJuIF9vdmVycmlkZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFdoZXRoZXIgdG8gYWxsb3cgbGF0ZXIgcGFyc2VzIG9mIG1h\ncHBpbmcgaW5mb3JtYXRpb24gdG8gb3ZlcnJpZGUKICAgICAqIGVhcmxpZXIg\naW5mb3JtYXRpb24gZm9yIHRoZSBzYW1lIGNsYXNzLiBEZWZhdWx0cyB0byBm\nYWxzZS4gVXNlZnVsCiAgICAgKiB3aGVuIGEgdG9vbCBpcyBtYXBwaW5nIGEg\nY2xhc3MsIHNvIHRoYXQgLmpkbyBmaWxlIHBhcnRpYWwgbWFwcGluZwogICAg\nICogaW5mb3JtYXRpb24gY2FuIGJlIHVzZWQgZXZlbiB3aGVuIG1hcHBpbmdz\nIGFyZSBzdG9yZWQgaW4gLm9ybSBmaWxlcwogICAgICogb3Igb3RoZXIgbG9j\nYXRpb25zLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRNYXBwaW5nT3Zl\ncnJpZGUoYm9vbGVhbiBvdmVycmlkZSkgewogICAgICAgIF9vdmVycmlkZSA9\nIG92ZXJyaWRlOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHBhcnNlIG1v\nZGUgYWNjb3JkaW5nIHRvIHRoZSBleHBlY3RlZCBkb2N1bWVudCB0eXBlLiBU\naGUKICAgICAqIG1vZGUgY29uc3RhbnRzIGFjdCBhcyBiaXQgZmxhZ3MsIGFu\nZCB0aGVyZWZvcmUgY2FuIGJlIGNvbWJpbmVkLgogICAgICovCiAgICBwdWJs\naWMgaW50IGdldE1vZGUoKSB7CiAgICAgICAgcmV0dXJuIF9tb2RlOwogICAg\nfQoKICAgIC8qKgogICAgICogVGhlIHBhcnNlIG1vZGUgYWNjb3JkaW5nIHRv\nIHRoZSBleHBlY3RlZCBkb2N1bWVudCB0eXBlLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRNb2RlKGludCBtb2RlLCBib29sZWFuIG9uKSB7CiAgICAg\nICAgaWYgKG1vZGUgPT0gTU9ERV9OT05FKQogICAgICAgICAgICBzZXRNb2Rl\nKE1PREVfTk9ORSk7CiAgICAgICAgZWxzZSBpZiAob24pCiAgICAgICAgICAg\nIHNldE1vZGUoX21vZGUgfCBtb2RlKTsKICAgICAgICBlbHNlCiAgICAgICAg\nICAgIHNldE1vZGUoX21vZGUgJiB+bW9kZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUaGUgcGFyc2UgbW9kZSBhY2NvcmRpbmcgdG8gdGhlIGV4cGVjdGVk\nIGRvY3VtZW50IHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE1v\nZGUoaW50IG1vZGUpIHsKICAgICAgICBfbW9kZSA9IG1vZGU7CiAgICAgICAg\naWYgKF9wYXJzZXIgIT0gbnVsbCkKICAgICAgICAgICAgX3BhcnNlci5zZXRN\nb2RlKG1vZGUpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVuaWVuY2Ug\nbWV0aG9kIGZvciBpbnRlcnByZXRpbmcge0BsaW5rICNnZXRNb2RlfS4KICAg\nICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNNZXRhRGF0YU1vZGUoKSB7\nCiAgICAgICAgcmV0dXJuIChfbW9kZSAmIE1PREVfTUVUQSkgIT0gMDsKICAg\nIH0KCiAgICAvKioKICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgaW50\nZXJwcmV0aW5nIHtAbGluayAjZ2V0TW9kZX0uCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBib29sZWFuIGlzUXVlcnlNb2RlKCkgewogICAgICAgIHJldHVybiAo\nX21vZGUgJiBNT0RFX1FVRVJZKSAhPSAwOwogICAgfQoKICAgIC8qKgogICAg\nICogQ29udmVuaWVuY2UgbWV0aG9kIGZvciBpbnRlcnByZXRpbmcge0BsaW5r\nICNnZXRNb2RlfS4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNN\nYXBwaW5nTW9kZSgpIHsKICAgICAgICByZXR1cm4gKF9tb2RlICYgTU9ERV9N\nQVBQSU5HKSAhPSAwOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0\ncnVlIGlmIHdlJ3JlIGluIG1hcHBpbmcgbW9kZSBvciBpbiBtZXRhZGF0YSBt\nb2RlIHdpdGgKICAgICAqIG1hcHBpbmcgb3ZlcnJpZGUgZW5hYmxlZC4KICAg\nICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNNYXBwaW5nT3ZlcnJpZGVN\nb2RlKCkgewogICAgICAgIHJldHVybiBpc01hcHBpbmdNb2RlKCkgfHwgKF9v\ndmVycmlkZSAmJiBpc01ldGFEYXRhTW9kZSgpKTsKICAgIH0KCiAgICAvLy8v\nLy8vLy8vLy8vLy8KICAgIC8vIFhNTCBwYXJzaW5nCiAgICAvLy8vLy8vLy8v\nLy8vLy8KCiAgICAvKioKICAgICAqIFB1c2ggYSBwYXJzZSBlbGVtZW50IG9u\ndG8gdGhlIHN0YWNrLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBwdXNo\nRWxlbWVudChPYmplY3QgZWxlbSkgewogICAgICAgIF9lbGVtZW50cy5wdXNo\nKGVsZW0pOwogICAgfQoKICAgIC8qKgogICAgICogUG9wIGEgcGFyc2UgZWxl\nbWVudCBmcm9tIHRoZSBzdGFjay4KICAgICAqLwogICAgcHJvdGVjdGVkIE9i\namVjdCBwb3BFbGVtZW50KCkgewogICAgICAgIHJldHVybiBfZWxlbWVudHMu\ncG9wKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGN1cnJl\nbnQgZWxlbWVudCBiZWluZyBwYXJzZWQuIE1heSBiZSBhIGNsYXNzIG1ldGFk\nYXRhLAogICAgICogZmllbGQgbWV0YWRhdGEsIHF1ZXJ5IG1ldGFkYXRhLCBl\ndGMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBPYmplY3QgY3VycmVudEVsZW1l\nbnQoKSB7CiAgICAgICAgaWYgKF9lbGVtZW50cy5pc0VtcHR5KCkpCiAgICAg\nICAgICAgIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiBfZWxlbWVudHMu\ncGVlaygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBjdXJy\nZW50IHtAbGluayBQZXJzaXN0ZW5jZVN0cmF0ZWd5fSBpZiBhbnkuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBQZXJzaXN0ZW5jZVN0cmF0ZWd5IGN1cnJlbnRT\ndHJhdGVneSgpIHsKICAgICAgICByZXR1cm4gX3N0cmF0ZWd5OwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB0YWcgb2YgdGhlIGN1cnJlbnQg\ncGFyZW50IGVsZW1lbnQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBPYmplY3Qg\nY3VycmVudFBhcmVudCgpIHsKICAgICAgICBpZiAoX3BhcmVudHMuaXNFbXB0\neSgpKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4g\nX3BhcmVudHMucGVlaygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHdoZXRoZXIgd2UncmUgcnVubmluZyB0aGUgcGFyc2VyIGF0IHJ1bnRpbWUu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGlzUnVudGltZSgpIHsK\nICAgICAgICByZXR1cm4gKGdldFJlcG9zaXRvcnkoKS5nZXRWYWxpZGF0ZSgp\nCiAgICAgICAgICAgICYgTWV0YURhdGFSZXBvc2l0b3J5LlZBTElEQVRFX1JV\nTlRJTUUpICE9IDA7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0\nZWQgT2JqZWN0IGdldFNjaGVtYVNvdXJjZSgpIHsKICAgICAgICByZXR1cm4g\nWE1MUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlci5jbGFzcy5nZXRSZXNvdXJj\nZUFzU3RyZWFtCiAgICAgICAgICAgICgib3JtLXhzZC5yc3JjIik7CiAgICB9\nCgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFBhY2th\nZ2VBdHRyaWJ1dGVOYW1lKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAg\nfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRDbGFz\nc0F0dHJpYnV0ZU5hbWUoKSB7CiAgICAgICAgcmV0dXJuICJjbGFzcyI7CiAg\nICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgaW50IGdldENsYXNz\nRWxlbWVudERlcHRoKCkgewogICAgICAgIHJldHVybiAxOwogICAgfQoKICAg\nIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNDbGFzc0VsZW1l\nbnROYW1lKFN0cmluZyBuYW1lKSB7CiAgICAgICAgcmV0dXJuICJlbnRpdHki\nLmVxdWFscyhuYW1lKQogICAgICAgICAgICB8fCAiZW1iZWRkYWJsZSIuZXF1\nYWxzKG5hbWUpCiAgICAgICAgICAgIHx8ICJtYXBwZWQtc3VwZXJjbGFzcyIu\nZXF1YWxzKG5hbWUpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVj\ndGVkIHZvaWQgcmVzZXQoKSB7CiAgICAgICAgc3VwZXIucmVzZXQoKTsKICAg\nICAgICBfZWxlbWVudHMuY2xlYXIoKTsKICAgICAgICBfcGFyZW50cy5jbGVh\ncigpOwogICAgICAgIF9jbHMgPSBudWxsOwogICAgICAgIF9maWVsZFBvcyA9\nIDA7CiAgICAgICAgX2Nsc1BvcyA9IDA7CgogICAgICAgIF9hY2Nlc3MgPSBD\nbGFzc01ldGFEYXRhLkFDQ0VTU19VTktOT1dOOwogICAgICAgIF9zdHJhdGVn\neSA9IG51bGw7CiAgICAgICAgX2xpc3RlbmVyID0gbnVsbDsKICAgICAgICBf\nY2FsbGJhY2tzID0gbnVsbDsKICAgICAgICBfaGlnaHMgPSBudWxsOwogICAg\nICAgIF9jYXNjYWRlcyA9IG51bGw7CiAgICAgICAgX3BrZ0Nhc2NhZGVzID0g\nbnVsbDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBib29s\nZWFuIHN0YXJ0U3lzdGVtRWxlbWVudChTdHJpbmcgbmFtZSwgQXR0cmlidXRl\ncyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAg\nICBPYmplY3QgdGFnID0gKE9iamVjdCkgX2VsZW1zLmdldChuYW1lKTsKICAg\nICAgICBib29sZWFuIHJldCA9IGZhbHNlOwogICAgICAgIGlmICh0YWcgPT0g\nbnVsbCkgewogICAgICAgICAgICBpZiAoaXNNYXBwaW5nT3ZlcnJpZGVNb2Rl\nKCkpCiAgICAgICAgICAgICAgICB0YWcgPSBzdGFydFN5c3RlbU1hcHBpbmdF\nbGVtZW50KG5hbWUsIGF0dHJzKTsKICAgICAgICAgICAgcmV0ID0gdGFnICE9\nIG51bGw7CiAgICAgICAgfSBlbHNlIGlmICh0YWcgaW5zdGFuY2VvZiBNZXRh\nRGF0YVRhZykgewogICAgICAgICAgICBzd2l0Y2ggKChNZXRhRGF0YVRhZykg\ndGFnKSB7CiAgICAgICAgICAgICAgICBjYXNlIFFVRVJZOgogICAgICAgICAg\nICAgICAgICAgIHJldCA9IHN0YXJ0TmFtZWRRdWVyeShhdHRycyk7CiAgICAg\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFFV\nRVJZX0hJTlQ6CiAgICAgICAgICAgICAgICAgICAgcmV0ID0gc3RhcnRRdWVy\neUhpbnQoYXR0cnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICAgICAgY2FzZSBOQVRJVkVfUVVFUlk6CiAgICAgICAgICAgICAg\nICAgICAgcmV0ID0gc3RhcnROYW1lZE5hdGl2ZVF1ZXJ5KGF0dHJzKTsKICAg\nICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2Ug\nUVVFUllfU1RSSU5HOgogICAgICAgICAgICAgICAgICAgIHJldCA9IHN0YXJ0\nUXVlcnlTdHJpbmcoYXR0cnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICAgICAgY2FzZSBTRVFfR0VORVJBVE9SOgogICAgICAg\nICAgICAgICAgICAgIHJldCA9IHN0YXJ0U2VxdWVuY2VHZW5lcmF0b3IoYXR0\ncnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAg\nICAgY2FzZSBGTFVTSF9NT0RFOgogICAgICAgICAgICAgICAgICAgIHJldCA9\nIHN0YXJ0Rmx1c2hNb2RlKGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgICAgIGNhc2UgRU5USVRZX0xJU1RFTkVSUzoK\nICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFydEVudGl0eUxpc3RlbmVy\ncyhhdHRycyk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgICAgICBjYXNlIFBSRV9QRVJTSVNUOgogICAgICAgICAgICAgICAgY2Fz\nZSBQT1NUX1BFUlNJU1Q6CiAgICAgICAgICAgICAgICBjYXNlIFBSRV9SRU1P\nVkU6CiAgICAgICAgICAgICAgICBjYXNlIFBPU1RfUkVNT1ZFOgogICAgICAg\nICAgICAgICAgY2FzZSBQUkVfVVBEQVRFOgogICAgICAgICAgICAgICAgY2Fz\nZSBQT1NUX1VQREFURToKICAgICAgICAgICAgICAgIGNhc2UgUE9TVF9MT0FE\nOgogICAgICAgICAgICAgICAgICAgIHJldCA9IHN0YXJ0Q2FsbGJhY2soKE1l\ndGFEYXRhVGFnKSB0YWcsIGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAg\nICAgICAgd2FyblVuc3VwcG9ydGVkVGFnKG5hbWUpOwogICAgICAgICAgICB9\nCiAgICAgICAgfSBlbHNlIGlmICh0YWcgPT0gRUxFTV9QVV9NRVRBIHx8IHRh\nZyA9PSBFTEVNX1BVX0RFRikKICAgICAgICAgICAgcmV0ID0gaXNNZXRhRGF0\nYU1vZGUoKTsKICAgICAgICBlbHNlIGlmICh0YWcgPT0gRUxFTV9YTUxfTUFQ\nX01FVEFfQ09NUExFVEUpCiAgICAgICAgICAgIHNldEFubm90YXRpb25QYXJz\nZXIobnVsbCk7CiAgICAgICAgZWxzZSBpZiAodGFnID09IEVMRU1fQUNDRVNT\nKQogICAgICAgICAgICByZXQgPSBfbW9kZSAhPSBNT0RFX1FVRVJZOwogICAg\nICAgIGVsc2UgaWYgKHRhZyA9PSBFTEVNX0xJU1RFTkVSKQogICAgICAgICAg\nICByZXQgPSBzdGFydEVudGl0eUxpc3RlbmVyKGF0dHJzKTsKICAgICAgICBl\nbHNlIGlmICh0YWcgPT0gRUxFTV9DQVNDQURFKQogICAgICAgICAgICByZXQg\nPSBpc01ldGFEYXRhTW9kZSgpOwogICAgICAgIGVsc2UgaWYgKHRhZyA9PSBF\nTEVNX0NBU0NBREVfQUxMIHx8IHRhZyA9PSBFTEVNX0NBU0NBREVfUEVSCiAg\nICAgICAgICAgIHx8IHRhZyA9PSBFTEVNX0NBU0NBREVfTUVSIHx8IHRhZyA9\nPSBFTEVNX0NBU0NBREVfUkVNCiAgICAgICAgICAgIHx8IHRhZyA9PSBFTEVN\nX0NBU0NBREVfUkVGKQogICAgICAgICAgICByZXQgPSBzdGFydENhc2NhZGUo\ndGFnLCBhdHRycyk7CgogICAgICAgIGlmIChyZXQpCiAgICAgICAgICAgIF9w\nYXJlbnRzLnB1c2godGFnKTsKICAgICAgICByZXR1cm4gcmV0OwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgZW5kU3lzdGVtRWxl\nbWVudChTdHJpbmcgbmFtZSkKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9u\nIHsKICAgICAgICBPYmplY3QgdGFnID0gX2VsZW1zLmdldChuYW1lKTsKICAg\nICAgICBpZiAodGFnID09IG51bGwgJiYgaXNNYXBwaW5nT3ZlcnJpZGVNb2Rl\nKCkpCiAgICAgICAgICAgIGVuZFN5c3RlbU1hcHBpbmdFbGVtZW50KG5hbWUp\nOwogICAgICAgIGVsc2UgaWYgKHRhZyBpbnN0YW5jZW9mIE1ldGFEYXRhVGFn\nKSB7CiAgICAgICAgICAgIHN3aXRjaCAoKE1ldGFEYXRhVGFnKSB0YWcpIHsK\nICAgICAgICAgICAgICAgIGNhc2UgUVVFUlk6CiAgICAgICAgICAgICAgICAg\nICAgZW5kTmFtZWRRdWVyeSgpOwogICAgICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICAgICAgY2FzZSBRVUVSWV9ISU5UOgogICAgICAgICAg\nICAgICAgICAgIGVuZFF1ZXJ5SGludCgpOwogICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBOQVRJVkVfUVVFUlk6CiAg\nICAgICAgICAgICAgICAgICAgZW5kTmFtZWROYXRpdmVRdWVyeSgpOwogICAg\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBR\nVUVSWV9TVFJJTkc6CiAgICAgICAgICAgICAgICAgICAgZW5kUXVlcnlTdHJp\nbmcoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nICAgIGNhc2UgU0VRX0dFTkVSQVRPUjoKICAgICAgICAgICAgICAgICAgICBl\nbmRTZXF1ZW5jZUdlbmVyYXRvcigpOwogICAgICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0YWcgPT0g\nRUxFTV9BQ0NFU1MpCiAgICAgICAgICAgIGVuZEFjY2VzcygpOwogICAgICAg\nIGVsc2UgaWYgKHRhZyA9PSBFTEVNX0xJU1RFTkVSKQogICAgICAgICAgICBl\nbmRFbnRpdHlMaXN0ZW5lcigpOwoKICAgICAgICBfcGFyZW50cy5wb3AoKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIEltcGxlbWVudCB0byBwYXJzZSBhIG1h\ncHBpbmcgZWxlbWVudCBvdXRzaWRlIG9mIGFueSBjbGFzcy4KICAgICAqCiAg\nICAgKiBAcmV0dXJuIHRoZSB0YWcgZm9yIHRoZSBnaXZlbiBlbGVtZW50LCBv\nciBudWxsIHRvIHNraXAgdGhlIGVsZW1lbnQKICAgICAqLwogICAgcHJvdGVj\ndGVkIE9iamVjdCBzdGFydFN5c3RlbU1hcHBpbmdFbGVtZW50KFN0cmluZyBu\nYW1lLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8qKgog\nICAgICogSW1wbGVtZW50IHRvIHBhcnNlIGEgbWFwcGluZyBlbGVtZW50IG91\ndHNpZGUgb2YgYW55IGNsYXNzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9p\nZCBlbmRTeXN0ZW1NYXBwaW5nRWxlbWVudChTdHJpbmcgbmFtZSkKICAgICAg\nICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgIH0KCiAgICBAT3ZlcnJpZGUK\nICAgIHByb3RlY3RlZCBib29sZWFuIHN0YXJ0Q2xhc3NFbGVtZW50KFN0cmlu\nZyBuYW1lLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhF\neGNlcHRpb24gewogICAgICAgIE9iamVjdCB0YWcgPSAoT2JqZWN0KSBfZWxl\nbXMuZ2V0KG5hbWUpOwogICAgICAgIGJvb2xlYW4gcmV0ID0gZmFsc2U7CiAg\nICAgICAgaWYgKHRhZyA9PSBudWxsKSB7CiAgICAgICAgICAgIGlmIChpc01h\ncHBpbmdPdmVycmlkZU1vZGUoKSkKICAgICAgICAgICAgICAgIHRhZyA9IHN0\nYXJ0Q2xhc3NNYXBwaW5nRWxlbWVudChuYW1lLCBhdHRycyk7CiAgICAgICAg\nICAgIHJldCA9IHRhZyAhPSBudWxsOwogICAgICAgIH0gZWxzZSBpZiAodGFn\nIGluc3RhbmNlb2YgTWV0YURhdGFUYWcpIHsKICAgICAgICAgICAgc3dpdGNo\nICgoTWV0YURhdGFUYWcpIHRhZykgewogICAgICAgICAgICAgICAgY2FzZSBH\nRU5FUkFURURfVkFMVUU6CiAgICAgICAgICAgICAgICAgICAgcmV0ID0gc3Rh\ncnRHZW5lcmF0ZWRWYWx1ZShhdHRycyk7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIElEOgogICAgICAgICAgICAg\nICAgICAgIHJldCA9IHN0YXJ0SWQoYXR0cnMpOwogICAgICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBFTUJFRERFRF9JRDoK\nICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFydEVtYmVkZGVkSWQoYXR0\ncnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAg\nICAgY2FzZSBJRF9DTEFTUzoKICAgICAgICAgICAgICAgICAgICByZXQgPSBz\ndGFydElkQ2xhc3MoYXR0cnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICAgICAgY2FzZSBMT0I6CiAgICAgICAgICAgICAgICAg\nICAgcmV0ID0gc3RhcnRMb2IoYXR0cnMpOwogICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBRVUVSWToKICAgICAgICAg\nICAgICAgICAgICByZXQgPSBzdGFydE5hbWVkUXVlcnkoYXR0cnMpOwogICAg\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBR\nVUVSWV9ISU5UOgogICAgICAgICAgICAgICAgICAgIHJldCA9IHN0YXJ0UXVl\ncnlIaW50KGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIGNhc2UgTkFUSVZFX1FVRVJZOgogICAgICAgICAgICAg\nICAgICAgIHJldCA9IHN0YXJ0TmFtZWROYXRpdmVRdWVyeShhdHRycyk7CiAg\nICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNl\nIFFVRVJZX1NUUklORzoKICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFy\ndFF1ZXJ5U3RyaW5nKGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgICAgIGNhc2UgU0VRX0dFTkVSQVRPUjoKICAgICAg\nICAgICAgICAgICAgICByZXQgPSBzdGFydFNlcXVlbmNlR2VuZXJhdG9yKGF0\ndHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nICAgIGNhc2UgVkVSU0lPTjoKICAgICAgICAgICAgICAgICAgICByZXQgPSBz\ndGFydFZlcnNpb24oYXR0cnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICAgICAgY2FzZSBNQVBfS0VZOgogICAgICAgICAgICAg\nICAgICAgIHJldCA9IHN0YXJ0TWFwS2V5KGF0dHJzKTsKICAgICAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgRkxVU0hfTU9E\nRToKICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFydEZsdXNoTW9kZShh\ndHRycyk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nICAgICBjYXNlIE9SREVSX0JZOgogICAgICAgICAgICAgICAgY2FzZSBFTlRJ\nVFlfTElTVEVORVJTOgogICAgICAgICAgICAgICAgICAgIHJldCA9IGlzTWV0\nYURhdGFNb2RlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgICAgICBjYXNlIEVYQ0xVREVfREVGQVVMVF9MSVNURU5FUlM6CiAg\nICAgICAgICAgICAgICAgICAgcmV0ID0gc3RhcnRFeGNsdWRlRGVmYXVsdExp\nc3RlbmVycyhhdHRycyk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICBjYXNlIEVYQ0xVREVfU1VQRVJDTEFTU19MSVNURU5F\nUlM6CiAgICAgICAgICAgICAgICAgICAgcmV0ID0gc3RhcnRFeGNsdWRlU3Vw\nZXJjbGFzc0xpc3RlbmVycyhhdHRycyk7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFBSRV9QRVJTSVNUOgogICAg\nICAgICAgICAgICAgY2FzZSBQT1NUX1BFUlNJU1Q6CiAgICAgICAgICAgICAg\nICBjYXNlIFBSRV9SRU1PVkU6CiAgICAgICAgICAgICAgICBjYXNlIFBPU1Rf\nUkVNT1ZFOgogICAgICAgICAgICAgICAgY2FzZSBQUkVfVVBEQVRFOgogICAg\nICAgICAgICAgICAgY2FzZSBQT1NUX1VQREFURToKICAgICAgICAgICAgICAg\nIGNhc2UgUE9TVF9MT0FEOgogICAgICAgICAgICAgICAgICAgIHJldCA9IHN0\nYXJ0Q2FsbGJhY2soKE1ldGFEYXRhVGFnKSB0YWcsIGF0dHJzKTsKICAgICAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6\nCiAgICAgICAgICAgICAgICAgICAgd2FyblVuc3VwcG9ydGVkVGFnKG5hbWUp\nOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0YWcgaW5zdGFu\nY2VvZiBQZXJzaXN0ZW5jZVN0cmF0ZWd5KSB7CiAgICAgICAgICAgIFBlcnNp\nc3RlbmNlU3RyYXRlZ3kgcHMgPSAoUGVyc2lzdGVuY2VTdHJhdGVneSkgdGFn\nOwogICAgICAgICAgICByZXQgPSBzdGFydFN0cmF0ZWd5KHBzLCBhdHRycyk7\nCiAgICAgICAgICAgIGlmIChyZXQpCiAgICAgICAgICAgICAgICBfc3RyYXRl\nZ3kgPSBwczsKICAgICAgICB9IGVsc2UgaWYgKHRhZyA9PSBFTEVNX0xJU1RF\nTkVSKQogICAgICAgICAgICByZXQgPSBzdGFydEVudGl0eUxpc3RlbmVyKGF0\ndHJzKTsKICAgICAgICBlbHNlIGlmICh0YWcgPT0gRUxFTV9BVFRSUykKICAg\nICAgICAgICAgcmV0ID0gX21vZGUgIT0gTU9ERV9RVUVSWTsKICAgICAgICBl\nbHNlIGlmICh0YWcgPT0gRUxFTV9DQVNDQURFKQogICAgICAgICAgICByZXQg\nPSBpc01ldGFEYXRhTW9kZSgpOwogICAgICAgIGVsc2UgaWYgKHRhZyA9PSBF\nTEVNX0NBU0NBREVfQUxMIHx8IHRhZyA9PSBFTEVNX0NBU0NBREVfUEVSCiAg\nICAgICAgICAgIHx8IHRhZyA9PSBFTEVNX0NBU0NBREVfTUVSIHx8IHRhZyA9\nPSBFTEVNX0NBU0NBREVfUkVNCiAgICAgICAgICAgIHx8IHRhZyA9PSBFTEVN\nX0NBU0NBREVfUkVGKQogICAgICAgICAgICByZXQgPSBzdGFydENhc2NhZGUo\ndGFnLCBhdHRycyk7CgogICAgICAgIGlmIChyZXQpCiAgICAgICAgICAgIF9w\nYXJlbnRzLnB1c2godGFnKTsKICAgICAgICByZXR1cm4gcmV0OwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgZW5kQ2xhc3NFbGVt\nZW50KFN0cmluZyBuYW1lKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24g\newogICAgICAgIE9iamVjdCB0YWcgPSBfZWxlbXMuZ2V0KG5hbWUpOwogICAg\nICAgIGlmICh0YWcgPT0gbnVsbCAmJiBpc01hcHBpbmdPdmVycmlkZU1vZGUo\nKSkKICAgICAgICAgICAgZW5kQ2xhc3NNYXBwaW5nRWxlbWVudChuYW1lKTsK\nICAgICAgICBlbHNlIGlmICh0YWcgaW5zdGFuY2VvZiBNZXRhRGF0YVRhZykg\newogICAgICAgICAgICBzd2l0Y2ggKChNZXRhRGF0YVRhZykgdGFnKSB7CiAg\nICAgICAgICAgICAgICBjYXNlIEdFTkVSQVRFRF9WQUxVRToKICAgICAgICAg\nICAgICAgICAgICBlbmRHZW5lcmF0ZWRWYWx1ZSgpOwogICAgICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBJRDoKICAgICAg\nICAgICAgICAgICAgICBlbmRJZCgpOwogICAgICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICAgICAgY2FzZSBFTUJFRERFRF9JRDoKICAgICAg\nICAgICAgICAgICAgICBlbmRFbWJlZGRlZElkKCk7CiAgICAgICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIElEX0NMQVNTOgog\nICAgICAgICAgICAgICAgICAgIGVuZElkQ2xhc3MoKTsKICAgICAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgTE9COgogICAg\nICAgICAgICAgICAgICAgIGVuZExvYigpOwogICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBRVUVSWToKICAgICAgICAg\nICAgICAgICAgICBlbmROYW1lZFF1ZXJ5KCk7CiAgICAgICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFFVRVJZX0hJTlQ6CiAg\nICAgICAgICAgICAgICAgICAgZW5kUXVlcnlIaW50KCk7CiAgICAgICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIE5BVElWRV9R\nVUVSWToKICAgICAgICAgICAgICAgICAgICBlbmROYW1lZE5hdGl2ZVF1ZXJ5\nKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAg\nICBjYXNlIFFVRVJZX1NUUklORzoKICAgICAgICAgICAgICAgICAgICBlbmRR\ndWVyeVN0cmluZygpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICAgICAgY2FzZSBTRVFfR0VORVJBVE9SOgogICAgICAgICAgICAg\nICAgICAgIGVuZFNlcXVlbmNlR2VuZXJhdG9yKCk7CiAgICAgICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFZFUlNJT046CiAg\nICAgICAgICAgICAgICAgICAgZW5kVmVyc2lvbigpOwogICAgICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBPUkRFUl9CWToK\nICAgICAgICAgICAgICAgICAgICBlbmRPcmRlckJ5KCk7CiAgICAgICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2Ug\naWYgKHRhZyBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlU3RyYXRlZ3kpCiAgICAg\nICAgICAgIGVuZFN0cmF0ZWd5KChQZXJzaXN0ZW5jZVN0cmF0ZWd5KSB0YWcp\nOwogICAgICAgIGVsc2UgaWYgKHRhZyA9PSBFTEVNX0FDQ0VTUykKICAgICAg\nICAgICAgZW5kQWNjZXNzKCk7CiAgICAgICAgZWxzZSBpZiAodGFnID09IEVM\nRU1fTElTVEVORVIpCiAgICAgICAgICAgIGVuZEVudGl0eUxpc3RlbmVyKCk7\nCgogICAgICAgIF9wYXJlbnRzLnBvcCgpOwogICAgfQoKICAgIC8qKgogICAg\nICogTG9nIHdhcm5pbmcgYWJvdXQgYW4gdW5zdXBwb3J0ZWQgdGFnLgogICAg\nICovCiAgICBwcml2YXRlIHZvaWQgd2FyblVuc3VwcG9ydGVkVGFnKFN0cmlu\nZyBuYW1lKSB7CiAgICAgICAgTG9nIGxvZyA9IGdldExvZygpOwogICAgICAg\nIGlmIChsb2cuaXNJbmZvRW5hYmxlZCgpKQogICAgICAgICAgICBsb2cudHJh\nY2UoX2xvYy5nZXQoInVuc3VwcG9ydGVkLXRhZyIsIG5hbWUpKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIEltcGxlbWVudCB0byBwYXJzZSBhIG1hcHBpbmcg\nZWxlbWVudCB3aXRoaW4gYSBjbGFzcy4KICAgICAqCiAgICAgKiBAcmV0dXJu\nIHRoZSB0YWcgZm9yIHRoZSBnaXZlbiBlbGVtZW50LCBvciBudWxsIHRvIHNr\naXAgZWxlbWVudAogICAgICovCiAgICBwcm90ZWN0ZWQgT2JqZWN0IHN0YXJ0\nQ2xhc3NNYXBwaW5nRWxlbWVudChTdHJpbmcgbmFtZSwgQXR0cmlidXRlcyBh\ndHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEltcGxlbWVudCB0\nbyBwYXJzZSBhIG1hcHBpbmcgZWxlbWVudCB3aXRoaW4gYSBjbGFzcy4KICAg\nICAqLwogICAgcHJvdGVjdGVkIHZvaWQgZW5kQ2xhc3NNYXBwaW5nRWxlbWVu\ndChTdHJpbmcgbmFtZSkKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsK\nICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBib29sZWFuIHN0\nYXJ0Q2xhc3MoU3RyaW5nIGVsZW0sIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAg\nICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc3RhcnRD\nbGFzcyhlbGVtLCBhdHRycyk7CgogICAgICAgIC8vIHF1ZXJ5IG1vZGUgb25s\neT8KICAgICAgICBfY2xzID0gY2xhc3NGb3JOYW1lKGN1cnJlbnRDbGFzc05h\nbWUoKSk7CiAgICAgICAgaWYgKF9tb2RlID09IE1PREVfUVVFUlkpIHsKICAg\nICAgICAgICAgaWYgKF9wYXJzZXIgIT0gbnVsbCAmJgogICAgICAgICAgICAg\nICAgISJ0cnVlIi5lcXVhbHMoYXR0cnMuZ2V0VmFsdWUoIm1ldGFkYXRhLWNv\nbXBsZXRlIikpKQogICAgICAgICAgICAgICAgX3BhcnNlci5wYXJzZShfY2xz\nKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAg\nICBMb2cgbG9nID0gZ2V0TG9nKCk7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNl\nRW5hYmxlZCgpKQogICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoInBh\ncnNlLWNsYXNzIiwgX2Nscy5nZXROYW1lKCkpKTsKCiAgICAgICAgTWV0YURh\ndGFSZXBvc2l0b3J5IHJlcG9zID0gZ2V0UmVwb3NpdG9yeSgpOwogICAgICAg\nIENsYXNzTWV0YURhdGEgbWV0YSA9IHJlcG9zLmdldENhY2hlZE1ldGFEYXRh\nKF9jbHMpOwogICAgICAgIGlmIChtZXRhICE9IG51bGwKICAgICAgICAgICAg\nJiYgKChpc01ldGFEYXRhTW9kZSgpICYmIChtZXRhLmdldFNvdXJjZU1vZGUo\nKSAmIE1PREVfTUVUQSkgIT0gMCkKICAgICAgICAgICAgfHwgKGlzTWFwcGlu\nZ01vZGUoKSAmJiAobWV0YS5nZXRTb3VyY2VNb2RlKCkgJiBNT0RFX01BUFBJ\nTkcpICE9IDApKSkKICAgICAgICB7CiAgICAgICAgICAgIGlmIChsb2cuaXNX\nYXJuRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5n\nZXQoImR1cC1tZXRhZGF0YSIsIF9jbHMsIGdldFNvdXJjZU5hbWUoKSkpOwog\nICAgICAgICAgICBfY2xzID0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIH0KCiAgICAgICAgLy8gaWYgd2UgZG9uJ3Qga25vdyB0\naGUgYWNjZXNzIHR5cGUsIGNoZWNrIHRvIHNlZSBpZiBhIHN1cGVyY2xhc3MK\nICAgICAgICAvLyBoYXMgYWxyZWFkeSBkZWZpbmVkIHRoZSBhY2Nlc3MgdHlw\nZQogICAgICAgIGludCBkZWZhdWx0QWNjZXNzID0gX2FjY2VzczsKICAgICAg\nICBpZiAoZGVmYXVsdEFjY2VzcyA9PSBDbGFzc01ldGFEYXRhLkFDQ0VTU19V\nTktOT1dOKSB7CiAgICAgICAgICAgIENsYXNzTWV0YURhdGEgc3VwID0gcmVw\nb3MuZ2V0Q2FjaGVkTWV0YURhdGEoX2Nscy5nZXRTdXBlcmNsYXNzKCkpOwog\nICAgICAgICAgICBpZiAoc3VwICE9IG51bGwpCiAgICAgICAgICAgICAgICBk\nZWZhdWx0QWNjZXNzID0gc3VwLmdldEFjY2Vzc1R5cGUoKTsKICAgICAgICB9\nCgogICAgICAgIGlmIChtZXRhID09IG51bGwpIHsKICAgICAgICAgICAgLy8g\nYWRkIG1ldGFkYXRhIGZvciB0aGlzIHR5cGUKICAgICAgICAgICAgaW50IGFj\nY2VzcyA9IHRvQWNjZXNzVHlwZShhdHRycy5nZXRWYWx1ZSgiYWNjZXNzIiks\nIGRlZmF1bHRBY2Nlc3MpOwogICAgICAgICAgICBtZXRhID0gcmVwb3MuYWRk\nTWV0YURhdGEoX2NscywgYWNjZXNzKTsKICAgICAgICAgICAgbWV0YS5zZXRF\nbnZDbGFzc0xvYWRlcihfZW52TG9hZGVyKTsKICAgICAgICAgICAgbWV0YS5z\nZXRTb3VyY2VNb2RlKE1PREVfTk9ORSk7CgogICAgICAgICAgICAvLyBwYXJz\nZSBhbm5vdGF0aW9ucyBmaXJzdCBzbyBYTUwgb3ZlcnJpZGVzIHRoZW0KICAg\nICAgICAgICAgaWYgKF9wYXJzZXIgIT0gbnVsbCAmJgogICAgICAgICAgICAg\nICAgISJ0cnVlIi5lcXVhbHMoYXR0cnMuZ2V0VmFsdWUoIm1ldGFkYXRhLWNv\nbXBsZXRlIikpKQogICAgICAgICAgICAgICAgX3BhcnNlci5wYXJzZShfY2xz\nKTsKICAgICAgICB9CgogICAgICAgIGJvb2xlYW4gbWFwcGVkU3VwZXIgPSAi\nbWFwcGVkLXN1cGVyY2xhc3MiLmVxdWFscyhlbGVtKTsKICAgICAgICBpZiAo\naXNNZXRhRGF0YU1vZGUoKSkgewogICAgICAgICAgICBtZXRhLnNldFNvdXJj\nZShnZXRTb3VyY2VGaWxlKCksIG1ldGEuU1JDX1hNTCk7CiAgICAgICAgICAg\nIG1ldGEuc2V0U291cmNlTW9kZShNT0RFX01FVEEsIHRydWUpOwogICAgICAg\nICAgICBMb2NhdG9yIGxvY2F0b3IgPSBnZXRMb2NhdGlvbigpLmdldExvY2F0\nb3IoKTsKICAgICAgICAgICAgaWYgKGxvY2F0b3IgIT0gbnVsbCkgewogICAg\nICAgICAgICAgICAgbWV0YS5zZXRMaW5lTnVtYmVyKE51bWJlcnMudmFsdWVP\nZihsb2NhdG9yLmdldExpbmVOdW1iZXIoKSkpOwogICAgICAgICAgICAgICAg\nbWV0YS5zZXRDb2xOdW1iZXIoTnVtYmVycy52YWx1ZU9mKGxvY2F0b3IuZ2V0\nQ29sdW1uTnVtYmVyKCkpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBt\nZXRhLnNldExpc3RpbmdJbmRleChfY2xzUG9zKTsKICAgICAgICAgICAgU3Ry\naW5nIG5hbWUgPSBhdHRycy5nZXRWYWx1ZSgibmFtZSIpOwogICAgICAgICAg\nICBpZiAoIVN0cmluZ1V0aWxzLmlzRW1wdHkobmFtZSkpCiAgICAgICAgICAg\nICAgICBtZXRhLnNldFR5cGVBbGlhcyhuYW1lKTsKICAgICAgICAgICAgbWV0\nYS5zZXRBYnN0cmFjdChtYXBwZWRTdXBlcik7CiAgICAgICAgICAgIG1ldGEu\nc2V0RW1iZWRkZWRPbmx5KG1hcHBlZFN1cGVyIHx8ICJlbWJlZGRhYmxlIi5l\ncXVhbHMoZWxlbSkpOwogICAgICAgICAgICBpZiAobWFwcGVkU3VwZXIpCiAg\nICAgICAgICAgICAgICBtZXRhLnNldElkZW50aXR5VHlwZShtZXRhLklEX1VO\nS05PV04pOwogICAgICAgIH0KICAgICAgICBpZiAoaXNNYXBwaW5nTW9kZSgp\nKQogICAgICAgICAgICBtZXRhLnNldFNvdXJjZU1vZGUoTU9ERV9NQVBQSU5H\nLCB0cnVlKTsKICAgICAgICBpZiAoaXNNYXBwaW5nT3ZlcnJpZGVNb2RlKCkp\nCiAgICAgICAgICAgIHN0YXJ0Q2xhc3NNYXBwaW5nKG1ldGEsIG1hcHBlZFN1\ncGVyLCBhdHRycyk7CiAgICAgICAgaWYgKGlzUXVlcnlNb2RlKCkpCiAgICAg\nICAgICAgIG1ldGEuc2V0U291cmNlTW9kZShNT0RFX1FVRVJZLCB0cnVlKTsK\nCiAgICAgICAgX2Nsc1BvcysrOwogICAgICAgIF9maWVsZFBvcyA9IDA7CiAg\nICAgICAgYWRkQ29tbWVudHMobWV0YSk7CiAgICAgICAgcHVzaEVsZW1lbnQo\nbWV0YSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgQE92ZXJy\naWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBlbmRDbGFzcyhTdHJpbmcgZWxlbSkK\nICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX21v\nZGUgIT0gTU9ERV9RVUVSWSkgewogICAgICAgICAgICBDbGFzc01ldGFEYXRh\nIG1ldGEgPSAoQ2xhc3NNZXRhRGF0YSkgcG9wRWxlbWVudCgpOwogICAgICAg\nICAgICBzdG9yZUNhbGxiYWNrcyhtZXRhKTsKICAgICAgICAgICAgaWYgKGlz\nTWFwcGluZ092ZXJyaWRlTW9kZSgpKQogICAgICAgICAgICAgICAgZW5kQ2xh\nc3NNYXBwaW5nKG1ldGEpOwogICAgICAgIH0KICAgICAgICBfY2xzID0gbnVs\nbDsKICAgICAgICBzdXBlci5lbmRDbGFzcyhlbGVtKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEltcGxlbWVudCB0byBhZGQgbWFwcGluZyBhdHRyaWJ1dGVz\nIHRvIGNsYXNzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBzdGFydENs\nYXNzTWFwcGluZyhDbGFzc01ldGFEYXRhIG1hcHBpbmcsCiAgICAgICAgYm9v\nbGVhbiBtYXBwZWRTdXBlciwgQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0\naHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgIH0KCiAgICAvKioKICAgICAqIElt\ncGxlbWVudCB0byBmaW5hbGl6ZSBjbGFzcyBtYXBwaW5nLgogICAgICovCiAg\nICBwcm90ZWN0ZWQgdm9pZCBlbmRDbGFzc01hcHBpbmcoQ2xhc3NNZXRhRGF0\nYSBtYXBwaW5nKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAg\nfQoKICAgIC8qKgogICAgICogRGVmYXVsdCBhY2Nlc3MgZWxlbWVudC4KICAg\nICAqLwogICAgcHJpdmF0ZSB2b2lkIGVuZEFjY2VzcygpIHsKICAgICAgICBf\nYWNjZXNzID0gdG9BY2Nlc3NUeXBlKGN1cnJlbnRUZXh0KCksIENsYXNzTWV0\nYURhdGEuQUNDRVNTX1VOS05PV04pOwogICAgfQoKICAgIC8qKgogICAgICog\nUGFyc2UgdGhlIGdpdmVuIHN0cmluZyBhcyBhbiBlbnRpdHkgYWNjZXNzIHR5\ncGUsIGRlZmF1bHRpbmcgdG8gZ2l2ZW4KICAgICAqIGRlZmF1bHQgaWYgc3Ry\naW5nIGlzIGVtcHR5LgogICAgICovCiAgICBwcml2YXRlIGludCB0b0FjY2Vz\nc1R5cGUoU3RyaW5nIHN0ciwgaW50IGRlZikgewogICAgICAgIGlmIChTdHJp\nbmdVdGlscy5pc0VtcHR5KHN0cikpCiAgICAgICAgICAgIHJldHVybiBkZWY7\nCiAgICAgICAgaWYgKCJQUk9QRVJUWSIuZXF1YWxzKHN0cikpCiAgICAgICAg\nICAgIHJldHVybiBDbGFzc01ldGFEYXRhLkFDQ0VTU19QUk9QRVJUWTsKICAg\nICAgICByZXR1cm4gQ2xhc3NNZXRhRGF0YS5BQ0NFU1NfRklFTEQ7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBQYXJzZSBmbHVzaC1tb2RlIGVsZW1lbnQuCiAg\nICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBzdGFydEZsdXNoTW9kZShBdHRy\naWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewog\nICAgICAgIExvZyBsb2cgPSBnZXRMb2coKTsKICAgICAgICBpZiAobG9nLmlz\nV2FybkVuYWJsZWQoKSkKICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5nZXQo\nInVuc3VwcG9ydGVkIiwgImZsdXNoLW1vZGUiLCBnZXRTb3VyY2VOYW1lKCkp\nKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBQYXJzZSBzZXF1ZW5jZS1nZW5lcmF0b3IuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBib29sZWFuIHN0YXJ0U2VxdWVuY2VHZW5lcmF0b3IoQXR0cmlidXRl\ncyBhdHRycykgewogICAgICAgIGlmICghaXNNYXBwaW5nT3ZlcnJpZGVNb2Rl\nKCkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgU3RyaW5n\nIG5hbWUgPSBhdHRycy5nZXRWYWx1ZSgibmFtZSIpOwogICAgICAgIExvZyBs\nb2cgPSBnZXRMb2coKTsKICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVk\nKCkpCiAgICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgicGFyc2Utc2Vx\ndWVuY2UiLCBuYW1lKSk7CgogICAgICAgIFNlcXVlbmNlTWV0YURhdGEgbWV0\nYSA9IGdldFJlcG9zaXRvcnkoKS5nZXRDYWNoZWRTZXF1ZW5jZU1ldGFEYXRh\nKG5hbWUpOwogICAgICAgIGlmIChtZXRhICE9IG51bGwgJiYgbG9nLmlzV2Fy\nbkVuYWJsZWQoKSkKICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5nZXQoIm92\nZXJyaWRlLXNlcXVlbmNlIiwgbmFtZSkpOwoKICAgICAgICBtZXRhID0gZ2V0\nUmVwb3NpdG9yeSgpLmFkZFNlcXVlbmNlTWV0YURhdGEobmFtZSk7CiAgICAg\nICAgU3RyaW5nIHNlcSA9IGF0dHJzLmdldFZhbHVlKCJzZXF1ZW5jZS1uYW1l\nIik7CiAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJpbml0\naWFsLXZhbHVlIik7CiAgICAgICAgaW50IGluaXRpYWwgPSB2YWwgPT0gbnVs\nbCA/IDEgOiBJbnRlZ2VyLnBhcnNlSW50KHZhbCk7CiAgICAgICAgdmFsID0g\nYXR0cnMuZ2V0VmFsdWUoImFsbG9jYXRpb24tc2l6ZSIpOwogICAgICAgIGlu\ndCBhbGxvY2F0ZSA9IHZhbCA9PSBudWxsID8gNTAgOiBJbnRlZ2VyLnBhcnNl\nSW50KHZhbCk7CgogICAgICAgIFN0cmluZyBjbHNOYW1lLCBwcm9wczsKICAg\nICAgICBpZiAoc2VxID09IG51bGwgfHwgc2VxLmluZGV4T2YoJygnKSA9PSAt\nMSkgewogICAgICAgICAgICBjbHNOYW1lID0gU2VxdWVuY2VNZXRhRGF0YS5J\nTVBMX05BVElWRTsKICAgICAgICAgICAgcHJvcHMgPSBudWxsOwogICAgICAg\nIH0gZWxzZSB7IC8vIHBsdWdpbgogICAgICAgICAgICBjbHNOYW1lID0gQ29u\nZmlndXJhdGlvbnMuZ2V0Q2xhc3NOYW1lKHNlcSk7CiAgICAgICAgICAgIHBy\nb3BzID0gQ29uZmlndXJhdGlvbnMuZ2V0UHJvcGVydGllcyhzZXEpOwogICAg\nICAgICAgICBzZXEgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgbWV0YS5z\nZXRTZXF1ZW5jZVBsdWdpbihDb25maWd1cmF0aW9ucy5nZXRQbHVnaW4oY2xz\nTmFtZSwgcHJvcHMpKTsKICAgICAgICBtZXRhLnNldFNlcXVlbmNlKHNlcSk7\nCiAgICAgICAgbWV0YS5zZXRJbml0aWFsVmFsdWUoaW5pdGlhbCk7CiAgICAg\nICAgbWV0YS5zZXRBbGxvY2F0ZShhbGxvY2F0ZSk7CgogICAgICAgIE9iamVj\ndCBjdXIgPSBjdXJyZW50RWxlbWVudCgpOwogICAgICAgIE9iamVjdCBzY29w\nZSA9IChjdXIgaW5zdGFuY2VvZiBDbGFzc01ldGFEYXRhKQogICAgICAgICAg\nICA/ICgoQ2xhc3NNZXRhRGF0YSkgY3VyKS5nZXREZXNjcmliZWRUeXBlKCkg\nOiBudWxsOwogICAgICAgIG1ldGEuc2V0U291cmNlKGdldFNvdXJjZUZpbGUo\nKSwgc2NvcGUsIG1ldGEuU1JDX1hNTCk7CiAgICAgICAgTG9jYXRvciBsb2Nh\ndG9yID0gZ2V0TG9jYXRpb24oKS5nZXRMb2NhdG9yKCk7CiAgICAgICAgaWYg\nKGxvY2F0b3IgIT0gbnVsbCkgewogICAgICAgICAgICBtZXRhLnNldExpbmVO\ndW1iZXIoTnVtYmVycy52YWx1ZU9mKGxvY2F0b3IuZ2V0TGluZU51bWJlcigp\nKSk7CiAgICAgICAgICAgIG1ldGEuc2V0Q29sTnVtYmVyKE51bWJlcnMudmFs\ndWVPZihsb2NhdG9yLmdldENvbHVtbk51bWJlcigpKSk7CiAgICAgICAgfQog\nICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lk\nIGVuZFNlcXVlbmNlR2VuZXJhdG9yKCkgewogICAgfQoKICAgIC8qKgogICAg\nICogUGFyc2UgaWQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIHN0\nYXJ0SWQoQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhj\nZXB0aW9uIHsKICAgICAgICBGaWVsZE1ldGFEYXRhIGZtZCA9IHBhcnNlRmll\nbGQoYXR0cnMpOwogICAgICAgIGZtZC5zZXRFeHBsaWNpdCh0cnVlKTsKICAg\nICAgICBmbWQuc2V0UHJpbWFyeUtleSh0cnVlKTsKICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBlbmRJZCgpCiAgICAg\nICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgZmluaXNoRmllbGQo\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIGVtYmVkZGVkLWlkLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBzdGFydEVtYmVkZGVkSWQo\nQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9u\nIHsKICAgICAgICBGaWVsZE1ldGFEYXRhIGZtZCA9IHBhcnNlRmllbGQoYXR0\ncnMpOwogICAgICAgIGZtZC5zZXRFeHBsaWNpdCh0cnVlKTsKICAgICAgICBm\nbWQuc2V0UHJpbWFyeUtleSh0cnVlKTsKICAgICAgICBmbWQuc2V0RW1iZWRk\nZWQodHJ1ZSk7CiAgICAgICAgaWYgKGZtZC5nZXRFbWJlZGRlZE1ldGFEYXRh\nKCkgPT0gbnVsbCkKICAgICAgICAgICAgZm1kLmFkZEVtYmVkZGVkTWV0YURh\ndGEoKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwcm90ZWN0\nZWQgdm9pZCBlbmRFbWJlZGRlZElkKCkKICAgICAgICB0aHJvd3MgU0FYRXhj\nZXB0aW9uIHsKICAgICAgICBmaW5pc2hGaWVsZCgpOwogICAgfQoKICAgIC8q\nKgogICAgICogUGFyc2UgaWQtY2xhc3MuCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCBib29sZWFuIHN0YXJ0SWRDbGFzcyhBdHRyaWJ1dGVzIGF0dHJzKQogICAg\nICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmICghaXNNZXRh\nRGF0YU1vZGUoKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAg\nICBDbGFzc01ldGFEYXRhIG1ldGEgPSAoQ2xhc3NNZXRhRGF0YSkgY3VycmVu\ndEVsZW1lbnQoKTsKICAgICAgICBTdHJpbmcgY2xzID0gYXR0cnMuZ2V0VmFs\ndWUoImNsYXNzIik7CiAgICAgICAgQ2xhc3MgaWRDbHMgPSBudWxsOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGlkQ2xzID0gY2xhc3NGb3JOYW1lKGNs\ncyk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAg\nICAgdGhyb3cgZ2V0RXhjZXB0aW9uKF9sb2MuZ2V0KCJpbnZhbGlkLWlkLWNs\nYXNzIiwgbWV0YSwgY2xzKSwgdCk7CiAgICAgICAgfQogICAgICAgIG1ldGEu\nc2V0T2JqZWN0SWRUeXBlKGlkQ2xzLCB0cnVlKTsKICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBlbmRJZENsYXNzKCkK\nICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgIH0KCiAgICAvKioK\nICAgICAqIFBhcnNlIGxvYi4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xl\nYW4gc3RhcnRMb2IoQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3Mg\nU0FYRXhjZXB0aW9uIHsKICAgICAgICBGaWVsZE1ldGFEYXRhIGZtZCA9IChG\naWVsZE1ldGFEYXRhKSBjdXJyZW50RWxlbWVudCgpOwogICAgICAgIGlmIChm\nbWQuZ2V0RGVjbGFyZWRUeXBlQ29kZSgpICE9IEphdmFUeXBlcy5TVFJJTkcK\nICAgICAgICAgICAgJiYgZm1kLmdldERlY2xhcmVkVHlwZSgpICE9IGNoYXJb\nXS5jbGFzcwogICAgICAgICAgICAmJiBmbWQuZ2V0RGVjbGFyZWRUeXBlKCkg\nIT0gQ2hhcmFjdGVyW10uY2xhc3MKICAgICAgICAgICAgJiYgZm1kLmdldERl\nY2xhcmVkVHlwZSgpICE9IGJ5dGVbXS5jbGFzcwogICAgICAgICAgICAmJiBm\nbWQuZ2V0RGVjbGFyZWRUeXBlKCkgIT0gQnl0ZVtdLmNsYXNzKQogICAgICAg\nICAgICBmbWQuc2V0U2VyaWFsaXplZCh0cnVlKTsKICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBlbmRMb2IoKQogICAg\nICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgfQoKICAgIC8qKgogICAg\nICogUGFyc2UgZ2VuZXJhdGVkLXZhbHVlLgogICAgICovCiAgICBwcm90ZWN0\nZWQgYm9vbGVhbiBzdGFydEdlbmVyYXRlZFZhbHVlKEF0dHJpYnV0ZXMgYXR0\ncnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgaWYg\nKCFpc01hcHBpbmdPdmVycmlkZU1vZGUoKSkKICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwoKICAgICAgICBTdHJpbmcgc3RyYXRlZ3kgPSBhdHRycy5nZXRW\nYWx1ZSgic3RyYXRlZ3kiKTsKICAgICAgICBTdHJpbmcgZ2VuZXJhdG9yID0g\nYXR0cnMuZ2V0VmFsdWUoImdlbmVyYXRvciIpOwogICAgICAgIEdlbmVyYXRp\nb25UeXBlIHR5cGUgPSBTdHJpbmdVdGlscy5pc0VtcHR5KHN0cmF0ZWd5KQog\nICAgICAgICAgICA/IEdlbmVyYXRpb25UeXBlLkFVVE8gOiBHZW5lcmF0aW9u\nVHlwZS52YWx1ZU9mKHN0cmF0ZWd5KTsKCiAgICAgICAgRmllbGRNZXRhRGF0\nYSBmbWQgPSAoRmllbGRNZXRhRGF0YSkgY3VycmVudEVsZW1lbnQoKTsKICAg\nICAgICBBbm5vdGF0aW9uUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlci5wYXJz\nZUdlbmVyYXRlZFZhbHVlKGZtZCwgdHlwZSwKICAgICAgICAgICAgZ2VuZXJh\ndG9yKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwcm90ZWN0\nZWQgdm9pZCBlbmRHZW5lcmF0ZWRWYWx1ZSgpCiAgICAgICAgdGhyb3dzIFNB\nWEV4Y2VwdGlvbiB7CiAgICB9CgogICAgLyoqCiAgICAgKiBMYXppbHkgcGFy\nc2UgY2FzY2FkZXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIHN0\nYXJ0Q2FzY2FkZShPYmplY3QgdGFnLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAg\nICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmICghaXNNZXRh\nRGF0YU1vZGUoKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAg\nICBTZXQ8Q2FzY2FkZVR5cGU+IGNhc2NhZGVzID0gbnVsbDsKICAgICAgICBp\nZiAoY3VycmVudEVsZW1lbnQoKSBpbnN0YW5jZW9mIEZpZWxkTWV0YURhdGEp\nIHsKICAgICAgICAgICAgaWYgKF9jYXNjYWRlcyA9PSBudWxsKQogICAgICAg\nICAgICAgICAgX2Nhc2NhZGVzID0gRW51bVNldC5ub25lT2YoQ2FzY2FkZVR5\ncGUuY2xhc3MpOwogICAgICAgICAgICBjYXNjYWRlcyA9IF9jYXNjYWRlczsK\nICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoX3BrZ0Nhc2NhZGVz\nID09IG51bGwpCiAgICAgICAgICAgICAgICBfcGtnQ2FzY2FkZXMgPSBFbnVt\nU2V0Lm5vbmVPZihDYXNjYWRlVHlwZS5jbGFzcyk7CiAgICAgICAgICAgIGNh\nc2NhZGVzID0gX3BrZ0Nhc2NhZGVzOwogICAgICAgIH0KICAgICAgICBib29s\nZWFuIGFsbCA9IEVMRU1fQ0FTQ0FERV9BTEwgPT0gdGFnOwogICAgICAgIGlm\nIChhbGwgfHwgRUxFTV9DQVNDQURFX1BFUiA9PSB0YWcpCiAgICAgICAgICAg\nIGNhc2NhZGVzLmFkZChQRVJTSVNUKTsKICAgICAgICBpZiAoYWxsIHx8IEVM\nRU1fQ0FTQ0FERV9SRU0gPT0gdGFnKQogICAgICAgICAgICBjYXNjYWRlcy5h\nZGQoUkVNT1ZFKTsKICAgICAgICBpZiAoYWxsIHx8IEVMRU1fQ0FTQ0FERV9N\nRVIgPT0gdGFnKQogICAgICAgICAgICBjYXNjYWRlcy5hZGQoTUVSR0UpOwog\nICAgICAgIGlmIChhbGwgfHwgRUxFTV9DQVNDQURFX1JFRiA9PSB0YWcpCiAg\nICAgICAgICAgIGNhc2NhZGVzLmFkZChSRUZSRVNIKTsKICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgY2FjaGVk\nIGNhc2NhZGVzIGludG8gdGhlIGZpZWxkLgogICAgICovCiAgICBwcm90ZWN0\nZWQgdm9pZCBzZXRDYXNjYWRlcyhGaWVsZE1ldGFEYXRhIGZtZCkgewogICAg\nICAgIFNldDxDYXNjYWRlVHlwZT4gY2FzY2FkZXMgPSBfY2FzY2FkZXM7CiAg\nICAgICAgaWYgKF9jYXNjYWRlcyA9PSBudWxsKQogICAgICAgICAgICBjYXNj\nYWRlcyA9IF9wa2dDYXNjYWRlczsKICAgICAgICBpZiAoY2FzY2FkZXMgPT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICBWYWx1ZU1ldGFE\nYXRhIHZtZCA9IGZtZDsKICAgICAgICBzd2l0Y2ggKF9zdHJhdGVneSkgewog\nICAgICAgICAgICBjYXNlIE9ORV9NQU5ZOgogICAgICAgICAgICBjYXNlIE1B\nTllfTUFOWToKICAgICAgICAgICAgICAgIHZtZCA9IGZtZC5nZXRFbGVtZW50\nKCk7CiAgICAgICAgfQogICAgICAgIGZvciAoQ2FzY2FkZVR5cGUgY2FzY2Fk\nZSA6IGNhc2NhZGVzKSB7CiAgICAgICAgICAgIHN3aXRjaCAoY2FzY2FkZSkg\newogICAgICAgICAgICAgICAgY2FzZSBQRVJTSVNUOgogICAgICAgICAgICAg\nICAgICAgIHZtZC5zZXRDYXNjYWRlUGVyc2lzdChWYWx1ZU1ldGFEYXRhLkNB\nU0NBREVfSU1NRURJQVRFKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgICAgIGNhc2UgTUVSR0U6CiAgICAgICAgICAgICAgICAg\nICAgdm1kLnNldENhc2NhZGVBdHRhY2goVmFsdWVNZXRhRGF0YS5DQVNDQURF\nX0lNTUVESUFURSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgICAgICBjYXNlIFJFTU9WRToKICAgICAgICAgICAgICAgICAgICB2\nbWQuc2V0Q2FzY2FkZURlbGV0ZShWYWx1ZU1ldGFEYXRhLkNBU0NBREVfSU1N\nRURJQVRFKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgICAgIGNhc2UgUkVGUkVTSDoKICAgICAgICAgICAgICAgICAgICB2bWQu\nc2V0Q2FzY2FkZVJlZnJlc2goVmFsdWVNZXRhRGF0YS5DQVNDQURFX0lNTUVE\nSUFURSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICAgICAgX2Nhc2NhZGVzID0gbnVsbDsKICAgIH0K\nCiAgICAvKioKICAgICAqIFBhcnNlIGNvbW1vbiBmaWVsZCBhdHRyaWJ1dGVz\nLgogICAgICovCiAgICBwcml2YXRlIEZpZWxkTWV0YURhdGEgcGFyc2VGaWVs\nZChBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRp\nb24gewogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSA9IChDbGFzc01ldGFE\nYXRhKSBjdXJyZW50RWxlbWVudCgpOwogICAgICAgIFN0cmluZyBuYW1lID0g\nYXR0cnMuZ2V0VmFsdWUoIm5hbWUiKTsKICAgICAgICBGaWVsZE1ldGFEYXRh\nIGZpZWxkID0gbWV0YS5nZXREZWNsYXJlZEZpZWxkKG5hbWUpOwogICAgICAg\nIGlmICgoZmllbGQgPT0gbnVsbCB8fCBmaWVsZC5nZXREZWNsYXJlZFR5cGUo\nKSA9PSBPYmplY3QuY2xhc3MpCiAgICAgICAgICAgICYmIG1ldGEuZ2V0RGVz\nY3JpYmVkVHlwZSgpICE9IE9iamVjdC5jbGFzcykgewogICAgICAgICAgICBN\nZW1iZXIgbWVtYmVyID0gbnVsbDsKICAgICAgICAgICAgQ2xhc3MgdHlwZSA9\nIG51bGw7CiAgICAgICAgICAgIGludCBkZWYgPSBfcmVwb3MuZ2V0TWV0YURh\ndGFGYWN0b3J5KCkuZ2V0RGVmYXVsdHMoKS4KICAgICAgICAgICAgICAgIGdl\ndERlZmF1bHRBY2Nlc3NUeXBlKCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICBpZiAobWV0YS5nZXRBY2Nlc3NUeXBlKCkgPT0gQ2xhc3NN\nZXRhRGF0YS5BQ0NFU1NfUFJPUEVSVFkKICAgICAgICAgICAgICAgICAgICB8\nfCAobWV0YS5nZXRBY2Nlc3NUeXBlKCkgPT0gQ2xhc3NNZXRhRGF0YS5BQ0NF\nU1NfVU5LTk9XTgogICAgICAgICAgICAgICAgICAgICYmIGRlZiA9PSBDbGFz\nc01ldGFEYXRhLkFDQ0VTU19QUk9QRVJUWSkpIHsKICAgICAgICAgICAgICAg\nICAgICBTdHJpbmcgY2FwID0gU3RyaW5nVXRpbHMuY2FwaXRhbGl6ZShuYW1l\nKTsKICAgICAgICAgICAgICAgICAgICB0eXBlID0gbWV0YS5nZXREZXNjcmli\nZWRUeXBlKCk7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgICAgICAgICAgbWVtYmVyID0gKE1ldGhvZCkgQWNjZXNzQ29udHJv\nbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBKMkRvUHJpdkhlbHBlci5nZXREZWNsYXJlZE1ldGhvZEFjdGlvbigKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlLCAiZ2V0IiArIGNh\ncCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQ2xhc3NbXSkg\nbnVsbCkpOy8vIHZhcmFyZ3MgZGlzYW1iaWd1YXRlCiAgICAgICAgICAgICAg\nICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4Y2VwKSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBtZW1iZXIgPSAoTWV0aG9kKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmls\nZWdlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKMkRvUHJp\ndkhlbHBlci5nZXREZWNsYXJlZE1ldGhvZEFjdGlvbigKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSwgImlzIiArIGNhcCwgKENs\nYXNzW10pIG51bGwpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGV4Y2VwMikgewogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgdGhyb3cgZXhjZXA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdHlw\nZSA9ICgoTWV0aG9kKSBtZW1iZXIpLmdldFJldHVyblR5cGUoKTsKICAgICAg\nICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWVtYmVy\nID0gKEZpZWxkKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAg\nICAgICAgICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0RGVjbGFy\nZWRGaWVsZEFjdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1l\ndGEuZ2V0RGVzY3JpYmVkVHlwZSgpLCBuYW1lKSk7CiAgICAgICAgICAgICAg\nICAgICAgdHlwZSA9ICgoRmllbGQpIG1lbWJlcikuZ2V0VHlwZSgpOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBQcml2aWxl\nZ2VkQWN0aW9uRXhjZXB0aW9uKQogICAgICAgICAgICAgICAgICAgIGUgPSAo\nKFByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb24pIGUpLmdldEV4Y2VwdGlvbigp\nOwogICAgICAgICAgICAgICAgdGhyb3cgZ2V0RXhjZXB0aW9uKF9sb2MuZ2V0\nKCJpbnZhbGlkLWF0dHIiLCBuYW1lLCBtZXRhKSwgZSk7CiAgICAgICAgICAg\nIH0KCiAgICAgICAgICAgIGlmIChmaWVsZCA9PSBudWxsKSB7CiAgICAgICAg\nICAgICAgICBmaWVsZCA9IG1ldGEuYWRkRGVjbGFyZWRGaWVsZChuYW1lLCB0\neXBlKTsKICAgICAgICAgICAgICAgIFBlcnNpc3RlbmNlTWV0YURhdGFEZWZh\ndWx0cy5zZXRDYXNjYWRlTm9uZShmaWVsZCk7CiAgICAgICAgICAgICAgICBQ\nZXJzaXN0ZW5jZU1ldGFEYXRhRGVmYXVsdHMuc2V0Q2FzY2FkZU5vbmUoZmll\nbGQuZ2V0S2V5KCkpOwogICAgICAgICAgICAgICAgUGVyc2lzdGVuY2VNZXRh\nRGF0YURlZmF1bHRzLnNldENhc2NhZGVOb25lKGZpZWxkLmdldEVsZW1lbnQo\nKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmllbGQuYmFja2luZ01l\nbWJlcihtZW1iZXIpOwogICAgICAgIH0gZWxzZSBpZiAoZmllbGQgPT0gbnVs\nbCkgewogICAgICAgICAgICBmaWVsZCA9IG1ldGEuYWRkRGVjbGFyZWRGaWVs\nZChuYW1lLCBPYmplY3QuY2xhc3MpOwogICAgICAgICAgICBQZXJzaXN0ZW5j\nZU1ldGFEYXRhRGVmYXVsdHMuc2V0Q2FzY2FkZU5vbmUoZmllbGQpOwogICAg\nICAgICAgICBQZXJzaXN0ZW5jZU1ldGFEYXRhRGVmYXVsdHMuc2V0Q2FzY2Fk\nZU5vbmUoZmllbGQuZ2V0S2V5KCkpOwogICAgICAgICAgICBQZXJzaXN0ZW5j\nZU1ldGFEYXRhRGVmYXVsdHMuc2V0Q2FzY2FkZU5vbmUoZmllbGQuZ2V0RWxl\nbWVudCgpKTsKICAgICAgICB9CgogICAgICAgIGlmIChpc01ldGFEYXRhTW9k\nZSgpKQogICAgICAgICAgICBmaWVsZC5zZXRMaXN0aW5nSW5kZXgoX2ZpZWxk\nUG9zKTsKCiAgICAgICAgX2ZpZWxkUG9zKys7CiAgICAgICAgcHVzaEVsZW1l\nbnQoZmllbGQpOwogICAgICAgIGFkZENvbW1lbnRzKGZpZWxkKTsKCiAgICAg\nICAgaWYgKGlzTWFwcGluZ092ZXJyaWRlTW9kZSgpKQogICAgICAgICAgICBz\ndGFydEZpZWxkTWFwcGluZyhmaWVsZCwgYXR0cnMpOwogICAgICAgIHJldHVy\nbiBmaWVsZDsKICAgIH0KCiAgICAvKioKICAgICAqIFBvcHMgZmllbGQgZWxl\nbWVudC4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGZpbmlzaEZpZWxkKCkK\nICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBGaWVsZE1l\ndGFEYXRhIGZpZWxkID0gKEZpZWxkTWV0YURhdGEpIHBvcEVsZW1lbnQoKTsK\nICAgICAgICBzZXRDYXNjYWRlcyhmaWVsZCk7CiAgICAgICAgaWYgKGlzTWFw\ncGluZ092ZXJyaWRlTW9kZSgpKQogICAgICAgICAgICBlbmRGaWVsZE1hcHBp\nbmcoZmllbGQpOwogICAgICAgIF9zdHJhdGVneSA9IG51bGw7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBJbXBsZW1lbnQgdG8gYWRkIGZpZWxkIG1hcHBpbmcg\nZGF0YS4gRG9lcyBub3RoaW5nIGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCB2b2lkIHN0YXJ0RmllbGRNYXBwaW5nKEZpZWxkTWV0YURhdGEg\nZmllbGQsIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4\nY2VwdGlvbiB7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbXBsZW1lbnQgdG8g\nZmluYWxpemUgZmllbGQgbWFwcGluZy4gRG9lcyBub3RoaW5nIGJ5IGRlZmF1\nbHQuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGVuZEZpZWxkTWFwcGlu\nZyhGaWVsZE1ldGFEYXRhIGZpZWxkKQogICAgICAgIHRocm93cyBTQVhFeGNl\ncHRpb24gewogICAgfQoKICAgIC8qKgogICAgICogUGFyc2UgdmVyc2lvbi4K\nICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gc3RhcnRWZXJzaW9uKEF0\ndHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7\nCiAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQgPSBwYXJzZUZpZWxkKGF0dHJz\nKTsKICAgICAgICBmbWQuc2V0RXhwbGljaXQodHJ1ZSk7CiAgICAgICAgZm1k\nLnNldFZlcnNpb24odHJ1ZSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9\nCgogICAgcHJvdGVjdGVkIHZvaWQgZW5kVmVyc2lvbigpCiAgICAgICAgdGhy\nb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgZmluaXNoRmllbGQoKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFBhcnNlIHN0cmF0ZWd5IGVsZW1lbnQuCiAg\nICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBzdGFydFN0cmF0ZWd5KFBlcnNp\nc3RlbmNlU3RyYXRlZ3kgc3RyYXRlZ3ksCiAgICAgICAgQXR0cmlidXRlcyBh\ndHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBG\naWVsZE1ldGFEYXRhIGZtZCA9IHBhcnNlRmllbGQoYXR0cnMpOwogICAgICAg\nIGZtZC5zZXRFeHBsaWNpdCh0cnVlKTsKICAgICAgICBmbWQuc2V0TWFuYWdl\nbWVudChGaWVsZE1ldGFEYXRhLk1BTkFHRV9QRVJTSVNURU5UKTsKCiAgICAg\nICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJmZXRjaCIpOwogICAg\nICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAgICAgICAgZm1kLnNldEluRGVm\nYXVsdEZldGNoR3JvdXAoIkVBR0VSIi5lcXVhbHModmFsKSk7CiAgICAgICAg\ndmFsID0gYXR0cnMuZ2V0VmFsdWUoIm9wdGlvbmFsIik7CiAgICAgICAgaWYg\nKCJmYWxzZSIuZXF1YWxzKHZhbCkpCiAgICAgICAgICAgIGZtZC5zZXROdWxs\nVmFsdWUoRmllbGRNZXRhRGF0YS5OVUxMX0VYQ0VQVElPTik7CiAgICAgICAg\nZWxzZSBpZiAoInRydWUiLmVxdWFscyh2YWwpCiAgICAgICAgICAgICAgICAm\nJiBmbWQuZ2V0TnVsbFZhbHVlKCkgPT0gRmllbGRNZXRhRGF0YS5OVUxMX0VY\nQ0VQVElPTikgewogICAgICAgICAgICAvLyBSZXNldCB2YWx1ZSBpZiB0aGUg\nZmllbGQgd2FzIGFubm90YXRlZCB3aXRoIG9wdGlvbmFsPWZhbHNlLiAKICAg\nICAgICAgICAgLy8gT3RoZXJ3aXNlIGxlYXZlIGl0IGFsb25lLgogICAgICAg\nICAgICBmbWQuc2V0TnVsbFZhbHVlKEZpZWxkTWV0YURhdGEuTlVMTF9VTlNF\nVCk7CiAgICAgICAgfQogICAgICAgIGlmIChpc01hcHBpbmdPdmVycmlkZU1v\nZGUoKSkgewogICAgICAgICAgICB2YWwgPSBhdHRycy5nZXRWYWx1ZSgibWFw\ncGVkLWJ5Iik7CiAgICAgICAgICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIGZtZC5zZXRNYXBwZWRCeSh2YWwpOwogICAgICAgIH0KICAg\nICAgICBwYXJzZVN0cmF0ZWd5KGZtZCwgc3RyYXRlZ3ksIGF0dHJzKTsKICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5k\nU3RyYXRlZ3koUGVyc2lzdGVuY2VTdHJhdGVneSBzdHJhdGVneSkKICAgICAg\nICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBmaW5pc2hGaWVsZCgp\nOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2Ugc3RyYXRlZ3kgc3BlY2lm\naWMgYXR0cmlidXRlcy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHBhcnNl\nU3RyYXRlZ3koRmllbGRNZXRhRGF0YSBmbWQsCiAgICAgICAgUGVyc2lzdGVu\nY2VTdHJhdGVneSBzdHJhdGVneSwgQXR0cmlidXRlcyBhdHRycykKICAgICAg\nICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBzd2l0Y2ggKHN0cmF0\nZWd5KSB7CiAgICAgICAgICAgIGNhc2UgQkFTSUM6CiAgICAgICAgICAgICAg\nICBwYXJzZUJhc2ljKGZtZCwgYXR0cnMpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIGNhc2UgRU1CRURERUQ6CiAgICAgICAgICAgICAg\nICBwYXJzZUVtYmVkZGVkKGZtZCwgYXR0cnMpOwogICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIGNhc2UgT05FX09ORToKICAgICAgICAgICAg\nICAgIHBhcnNlT25lVG9PbmUoZm1kLCBhdHRycyk7CiAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICAgICAgY2FzZSBNQU5ZX09ORToKICAgICAgICAg\nICAgICAgIHBhcnNlTWFueVRvT25lKGZtZCwgYXR0cnMpOwogICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgTUFOWV9NQU5ZOgogICAg\nICAgICAgICAgICAgcGFyc2VNYW55VG9NYW55KGZtZCwgYXR0cnMpOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgT05FX01BTlk6\nCiAgICAgICAgICAgICAgICBwYXJzZU9uZVRvTWFueShmbWQsIGF0dHJzKTsK\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFRSQU5T\nSUVOVDoKICAgICAgICAgICAgICAgIGZtZC5zZXRNYW5hZ2VtZW50KEZpZWxk\nTWV0YURhdGEuTUFOQUdFX05PTkUpOwogICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUGFyc2UgYmFzaWMu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHBhcnNlQmFzaWMoRmllbGRN\nZXRhRGF0YSBmbWQsIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dz\nIFNBWEV4Y2VwdGlvbiB7CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJzZSBl\nbWJlZGRlZC4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgcGFyc2VFbWJl\nZGRlZChGaWVsZE1ldGFEYXRhIGZtZCwgQXR0cmlidXRlcyBhdHRycykKICAg\nICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRQQyhm\nbWQsICJFbWJlZGRlZCIpOwogICAgICAgIGZtZC5zZXRFbWJlZGRlZCh0cnVl\nKTsKICAgICAgICBmbWQuc2V0U2VyaWFsaXplZChmYWxzZSk7IC8vIG92ZXJy\naWRlIGFueSBMb2IgYW5ub3RhdGlvbgogICAgICAgIGlmIChmbWQuZ2V0RW1i\nZWRkZWRNZXRhRGF0YSgpID09IG51bGwpCiAgICAgICAgICAgIGZtZC5hZGRF\nbWJlZGRlZE1ldGFEYXRhKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaHJv\ndyBwcm9wZXIgZXhjZXB0aW9uIGlmIGdpdmVuIHZhbHVlIGlzIG5vdCBwb3Nz\naWJseSBwZXJzaXN0ZW5jZQogICAgICogY2FwYWJsZS4KICAgICAqLwogICAg\ncHJpdmF0ZSB2b2lkIGFzc2VydFBDKEZpZWxkTWV0YURhdGEgZm1kLCBTdHJp\nbmcgYXR0cikKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAg\nICBpZiAoIUphdmFUeXBlcy5tYXliZVBDKGZtZCkpCiAgICAgICAgICAgIHRo\ncm93IGdldEV4Y2VwdGlvbihfbG9jLmdldCgiYmFkLW1ldGEtYW5ubyIsIGZt\nZCwgYXR0cikpOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2Ugb25lLXRv\nLW9uZS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgcGFyc2VPbmVUb09u\nZShGaWVsZE1ldGFEYXRhIGZtZCwgQXR0cmlidXRlcyBhdHRycykKICAgICAg\nICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcgdmFsID0g\nYXR0cnMuZ2V0VmFsdWUoInRhcmdldC1lbnRpdHkiKTsKICAgICAgICBpZiAo\ndmFsICE9IG51bGwpCiAgICAgICAgICAgIGZtZC5zZXRUeXBlT3ZlcnJpZGUo\nY2xhc3NGb3JOYW1lKHZhbCkpOwogICAgICAgIGFzc2VydFBDKGZtZCwgIk9u\nZVRvT25lIik7CiAgICAgICAgZm1kLnNldFNlcmlhbGl6ZWQoZmFsc2UpOyAv\nLyBvdmVycmlkZSBhbnkgTG9iIGFubm90YXRpb24KICAgICAgICBpZiAoIWZt\nZC5pc0RlZmF1bHRGZXRjaEdyb3VwRXhwbGljaXQoKSkKICAgICAgICAgICAg\nZm1kLnNldEluRGVmYXVsdEZldGNoR3JvdXAodHJ1ZSk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBQYXJzZSBtYW55LXRvLW9uZS4KICAgICAqLwogICAgcHJv\ndGVjdGVkIHZvaWQgcGFyc2VNYW55VG9PbmUoRmllbGRNZXRhRGF0YSBmbWQs\nIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlv\nbiB7CiAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJ0YXJn\nZXQtZW50aXR5Iik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKQogICAgICAg\nICAgICBmbWQuc2V0VHlwZU92ZXJyaWRlKGNsYXNzRm9yTmFtZSh2YWwpKTsK\nICAgICAgICBhc3NlcnRQQyhmbWQsICJNYW55VG9PbmUiKTsKICAgICAgICBm\nbWQuc2V0U2VyaWFsaXplZChmYWxzZSk7IC8vIG92ZXJyaWRlIGFueSBMb2Ig\nYW5ub3RhdGlvbgogICAgICAgIGlmICghZm1kLmlzRGVmYXVsdEZldGNoR3Jv\ndXBFeHBsaWNpdCgpKQogICAgICAgICAgICBmbWQuc2V0SW5EZWZhdWx0RmV0\nY2hHcm91cCh0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIG1h\nbnktdG8tbWFueS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgcGFyc2VN\nYW55VG9NYW55KEZpZWxkTWV0YURhdGEgZm1kLCBBdHRyaWJ1dGVzIGF0dHJz\nKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIFN0cmlu\nZyB2YWwgPSBhdHRycy5nZXRWYWx1ZSgidGFyZ2V0LWVudGl0eSIpOwogICAg\nICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAgICAgICAgZm1kLmdldEVsZW1l\nbnQoKS5zZXREZWNsYXJlZFR5cGUoY2xhc3NGb3JOYW1lKHZhbCkpOwogICAg\nICAgIGFzc2VydFBDQ29sbGVjdGlvbihmbWQsICJNYW55VG9NYW55Iik7CiAg\nICAgICAgZm1kLnNldFNlcmlhbGl6ZWQoZmFsc2UpOyAvLyBvdmVycmlkZSBM\nb2IgaW4gYW5ub3RhdGlvbgogICAgfQoKICAgIC8qKgogICAgICogVGhyb3cg\nZXhjZXB0aW9uIGlmIGdpdmVuIGZpZWxkIG5vdCBhIGNvbGxlY3Rpb24gb2Yg\ncG9zc2libGUgcGVyc2lzdGVuY2UKICAgICAqIGNhcGFibGVzLgogICAgICov\nCiAgICBwcml2YXRlIHZvaWQgYXNzZXJ0UENDb2xsZWN0aW9uKEZpZWxkTWV0\nYURhdGEgZm1kLCBTdHJpbmcgYXR0cikKICAgICAgICB0aHJvd3MgU0FYRXhj\nZXB0aW9uIHsKICAgICAgICBzd2l0Y2ggKGZtZC5nZXREZWNsYXJlZFR5cGVD\nb2RlKCkpIHsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQVJSQVk6CiAg\nICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkNPTExFQ1RJT046CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLk1BUDoKICAgICAgICAgICAgICAgIGlmIChK\nYXZhVHlwZXMubWF5YmVQQyhmbWQuZ2V0RWxlbWVudCgpKSkKICAgICAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIC8vIG5vIGJyZWFr\nCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB0aHJvdyBn\nZXRFeGNlcHRpb24oX2xvYy5nZXQoImJhZC1tZXRhLWFubm8iLCBmbWQsIGF0\ndHIpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJzZSBv\nbmUtdG8tbWFueS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgcGFyc2VP\nbmVUb01hbnkoRmllbGRNZXRhRGF0YSBmbWQsIEF0dHJpYnV0ZXMgYXR0cnMp\nCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5n\nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJ0YXJnZXQtZW50aXR5Iik7CiAgICAg\nICAgaWYgKHZhbCAhPSBudWxsKQogICAgICAgICAgICBmbWQuZ2V0RWxlbWVu\ndCgpLnNldERlY2xhcmVkVHlwZShjbGFzc0Zvck5hbWUodmFsKSk7CiAgICAg\nICAgYXNzZXJ0UENDb2xsZWN0aW9uKGZtZCwgIk9uZVRvTWFueSIpOwogICAg\nICAgIGZtZC5zZXRTZXJpYWxpemVkKGZhbHNlKTsgLy8gb3ZlcnJpZGUgYW55\nIExvYiBhbm5vdGF0aW9uCiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJzZSBt\nYXAta2V5LgogICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gc3RhcnRNYXBL\nZXkoQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0\naW9uIHsKICAgICAgICBpZiAoIWlzTWFwcGluZ092ZXJyaWRlTW9kZSgpKQog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIEZpZWxkTWV0YURh\ndGEgZm1kID0gKEZpZWxkTWV0YURhdGEpIGN1cnJlbnRFbGVtZW50KCk7CiAg\nICAgICAgU3RyaW5nIG1hcEtleSA9IGF0dHJzLmdldFZhbHVlKCJuYW1lIik7\nCiAgICAgICAgaWYgKG1hcEtleSA9PSBudWxsKQogICAgICAgICAgICBmbWQu\nZ2V0S2V5KCkuc2V0VmFsdWVNYXBwZWRCeShWYWx1ZU1ldGFEYXRhLk1BUFBF\nRF9CWV9QSyk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBmbWQuZ2V0S2V5\nKCkuc2V0VmFsdWVNYXBwZWRCeShtYXBLZXkpOwogICAgICAgIHJldHVybiB0\ncnVlOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2Ugb3JkZXItYnkuCiAg\nICAgKi8KICAgIHByaXZhdGUgdm9pZCBlbmRPcmRlckJ5KCkKICAgICAgICB0\naHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBGaWVsZE1ldGFEYXRhIGZt\nZCA9IChGaWVsZE1ldGFEYXRhKSBjdXJyZW50RWxlbWVudCgpOwogICAgICAg\nIFN0cmluZyBkZWMgPSBjdXJyZW50VGV4dCgpOwogICAgICAgIGlmIChTdHJp\nbmdVdGlscy5pc0VtcHR5KGRlYykpCiAgICAgICAgICAgIGRlYyA9IE9yZGVy\nLkVMRU1FTlQgKyAiIGFzYyI7CiAgICAgICAgZm1kLnNldE9yZGVyRGVjbGFy\nYXRpb24oZGVjKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIG5hbWVk\nLXF1ZXJ5LgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBzdGFydE5h\nbWVkUXVlcnkoQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FY\nRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIWlzUXVlcnlNb2RlKCkpCiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgU3RyaW5nIG5hbWUgPSBh\ndHRycy5nZXRWYWx1ZSgibmFtZSIpOwogICAgICAgIExvZyBsb2cgPSBnZXRM\nb2coKTsKICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAg\nICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgicGFyc2UtcXVlcnkiLCBuYW1l\nKSk7CgogICAgICAgIFF1ZXJ5TWV0YURhdGEgbWV0YSA9IGdldFJlcG9zaXRv\ncnkoKS5nZXRDYWNoZWRRdWVyeU1ldGFEYXRhKG51bGwsIG5hbWUpOwogICAg\nICAgIGlmIChtZXRhICE9IG51bGwgJiYgbG9nLmlzV2FybkVuYWJsZWQoKSkK\nICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5nZXQoIm92ZXJyaWRlLXF1ZXJ5\nIiwgbmFtZSwgY3VycmVudExvY2F0aW9uKCkpKTsKCiAgICAgICAgbWV0YSA9\nIGdldFJlcG9zaXRvcnkoKS5hZGRRdWVyeU1ldGFEYXRhKG51bGwsIG5hbWUp\nOwogICAgICAgIG1ldGEuc2V0RGVmaW5pbmdUeXBlKF9jbHMpOwogICAgICAg\nIG1ldGEuc2V0UXVlcnlTdHJpbmcoYXR0cnMuZ2V0VmFsdWUoInF1ZXJ5Iikp\nOwogICAgICAgIG1ldGEuc2V0TGFuZ3VhZ2UoSlBRTFBhcnNlci5MQU5HX0pQ\nUUwpOwogICAgICAgIExvY2F0b3IgbG9jYXRvciA9IGdldExvY2F0aW9uKCku\nZ2V0TG9jYXRvcigpOwogICAgICAgIGlmIChsb2NhdG9yICE9IG51bGwpIHsK\nICAgICAgICAgICAgbWV0YS5zZXRMaW5lTnVtYmVyKE51bWJlcnMudmFsdWVP\nZihsb2NhdG9yLmdldExpbmVOdW1iZXIoKSkpOwogICAgICAgICAgICBtZXRh\nLnNldENvbE51bWJlcihOdW1iZXJzLnZhbHVlT2YobG9jYXRvci5nZXRDb2x1\nbW5OdW1iZXIoKSkpOwogICAgICAgIH0KICAgICAgICBPYmplY3QgY3VyID0g\nY3VycmVudEVsZW1lbnQoKTsKICAgICAgICBPYmplY3Qgc2NvcGUgPSAoY3Vy\nIGluc3RhbmNlb2YgQ2xhc3NNZXRhRGF0YSkKICAgICAgICAgICAgPyAoKENs\nYXNzTWV0YURhdGEpIGN1cikuZ2V0RGVzY3JpYmVkVHlwZSgpIDogbnVsbDsK\nICAgICAgICBtZXRhLnNldFNvdXJjZShnZXRTb3VyY2VGaWxlKCksIHNjb3Bl\nLCBtZXRhLlNSQ19YTUwpOwogICAgICAgIGlmIChpc01ldGFEYXRhTW9kZSgp\nKQogICAgICAgICAgICBtZXRhLnNldFNvdXJjZU1vZGUoTU9ERV9NRVRBKTsK\nICAgICAgICBlbHNlIGlmIChpc01hcHBpbmdNb2RlKCkpCiAgICAgICAgICAg\nIG1ldGEuc2V0U291cmNlTW9kZShNT0RFX01BUFBJTkcpOwogICAgICAgIGVs\nc2UKICAgICAgICAgICAgbWV0YS5zZXRTb3VyY2VNb2RlKE1PREVfUVVFUlkp\nOwogICAgICAgIHB1c2hFbGVtZW50KG1ldGEpOwogICAgICAgIHJldHVybiB0\ncnVlOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGVuZE5hbWVkUXVlcnko\nKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIHBvcEVs\nZW1lbnQoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBzdGFydFF1\nZXJ5U3RyaW5nKEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNB\nWEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAg\ncHJvdGVjdGVkIHZvaWQgZW5kUXVlcnlTdHJpbmcoKQogICAgICAgIHRocm93\ncyBTQVhFeGNlcHRpb24gewogICAgICAgIFF1ZXJ5TWV0YURhdGEgbWV0YSA9\nIChRdWVyeU1ldGFEYXRhKSBjdXJyZW50RWxlbWVudCgpOwogICAgICAgIG1l\ndGEuc2V0UXVlcnlTdHJpbmcoY3VycmVudFRleHQoKSk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBQYXJzZSBxdWVyeS1oaW50LgogICAgICovCiAgICBwcm90\nZWN0ZWQgYm9vbGVhbiBzdGFydFF1ZXJ5SGludChBdHRyaWJ1dGVzIGF0dHJz\nKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIFF1ZXJ5\nTWV0YURhdGEgbWV0YSA9IChRdWVyeU1ldGFEYXRhKSBjdXJyZW50RWxlbWVu\ndCgpOwogICAgICAgIG1ldGEuYWRkSGludChhdHRycy5nZXRWYWx1ZSgibmFt\nZSIpLCBhdHRycy5nZXRWYWx1ZSgidmFsdWUiKSk7CiAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgZW5kUXVlcnlIaW50\nKCkKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgIH0KCiAgICAv\nKioKICAgICAqIFBhcnNlIG5hdGl2ZS1uYW1lZC1xdWVyeS4KICAgICAqLwog\nICAgcHJvdGVjdGVkIGJvb2xlYW4gc3RhcnROYW1lZE5hdGl2ZVF1ZXJ5KEF0\ndHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7\nCiAgICAgICAgaWYgKCFpc1F1ZXJ5TW9kZSgpKQogICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CgogICAgICAgIFN0cmluZyBuYW1lID0gYXR0cnMuZ2V0VmFs\ndWUoIm5hbWUiKTsKICAgICAgICBMb2cgbG9nID0gZ2V0TG9nKCk7CiAgICAg\nICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICBsb2cu\ndHJhY2UoX2xvYy5nZXQoInBhcnNlLW5hdGl2ZS1xdWVyeSIsIG5hbWUpKTsK\nCiAgICAgICAgUXVlcnlNZXRhRGF0YSBtZXRhID0gZ2V0UmVwb3NpdG9yeSgp\nLmdldENhY2hlZFF1ZXJ5TWV0YURhdGEobnVsbCwgbmFtZSk7CiAgICAgICAg\naWYgKG1ldGEgIT0gbnVsbCAmJiBsb2cuaXNXYXJuRW5hYmxlZCgpKQogICAg\nICAgICAgICBsb2cud2FybihfbG9jLmdldCgib3ZlcnJpZGUtcXVlcnkiLCBu\nYW1lLCBjdXJyZW50TG9jYXRpb24oKSkpOwoKICAgICAgICBtZXRhID0gZ2V0\nUmVwb3NpdG9yeSgpLmFkZFF1ZXJ5TWV0YURhdGEobnVsbCwgbmFtZSk7CiAg\nICAgICAgbWV0YS5zZXREZWZpbmluZ1R5cGUoX2Nscyk7CiAgICAgICAgbWV0\nYS5zZXRRdWVyeVN0cmluZyhhdHRycy5nZXRWYWx1ZSgicXVlcnkiKSk7CiAg\nICAgICAgbWV0YS5zZXRMYW5ndWFnZShRdWVyeUxhbmd1YWdlcy5MQU5HX1NR\nTCk7CiAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJyZXN1\nbHQtY2xhc3MiKTsKICAgICAgICBpZiAodmFsICE9IG51bGwpIHsKICAgICAg\nICAgICAgQ2xhc3MgdHlwZSA9IGNsYXNzRm9yTmFtZSh2YWwpOwogICAgICAg\nICAgICBpZiAoSW1wbEhlbHBlci5pc01hbmFnZWRUeXBlKGdldENvbmZpZ3Vy\nYXRpb24oKSwgdHlwZSkpCiAgICAgICAgICAgICAgICBtZXRhLnNldENhbmRp\nZGF0ZVR5cGUodHlwZSk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAg\nICAgIG1ldGEuc2V0UmVzdWx0VHlwZSh0eXBlKTsKICAgICAgICB9CgogICAg\nICAgIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJyZXN1bHQtc2V0LW1hcHBpbmci\nKTsKICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgIG1ldGEu\nc2V0UmVzdWx0U2V0TWFwcGluZ05hbWUodmFsKTsKCiAgICAgICAgT2JqZWN0\nIGN1ciA9IGN1cnJlbnRFbGVtZW50KCk7CiAgICAgICAgT2JqZWN0IHNjb3Bl\nID0gKGN1ciBpbnN0YW5jZW9mIENsYXNzTWV0YURhdGEpCiAgICAgICAgICAg\nID8gKChDbGFzc01ldGFEYXRhKSBjdXIpLmdldERlc2NyaWJlZFR5cGUoKSA6\nIG51bGw7CiAgICAgICAgbWV0YS5zZXRTb3VyY2UoZ2V0U291cmNlRmlsZSgp\nLCBzY29wZSwgbWV0YS5TUkNfWE1MKTsKICAgICAgICBMb2NhdG9yIGxvY2F0\nb3IgPSBnZXRMb2NhdGlvbigpLmdldExvY2F0b3IoKTsKICAgICAgICBpZiAo\nbG9jYXRvciAhPSBudWxsKSB7CiAgICAgICAgICAgIG1ldGEuc2V0TGluZU51\nbWJlcihOdW1iZXJzLnZhbHVlT2YobG9jYXRvci5nZXRMaW5lTnVtYmVyKCkp\nKTsKICAgICAgICAgICAgbWV0YS5zZXRDb2xOdW1iZXIoTnVtYmVycy52YWx1\nZU9mKGxvY2F0b3IuZ2V0Q29sdW1uTnVtYmVyKCkpKTsKICAgICAgICB9CiAg\nICAgICAgaWYgKGlzTWV0YURhdGFNb2RlKCkpCiAgICAgICAgICAgIG1ldGEu\nc2V0U291cmNlTW9kZShNT0RFX01FVEEpOwogICAgICAgIGVsc2UgaWYgKGlz\nTWFwcGluZ01vZGUoKSkKICAgICAgICAgICAgbWV0YS5zZXRTb3VyY2VNb2Rl\nKE1PREVfTUFQUElORyk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBtZXRh\nLnNldFNvdXJjZU1vZGUoTU9ERV9RVUVSWSk7CiAgICAgICAgcHVzaEVsZW1l\nbnQobWV0YSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHJv\ndGVjdGVkIHZvaWQgZW5kTmFtZWROYXRpdmVRdWVyeSgpCiAgICAgICAgdGhy\nb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgcG9wRWxlbWVudCgpOwogICAg\nfQoKICAgIC8qKgogICAgICogU3RhcnQgZW50aXR5LWxpc3RlbmVycwogICAg\nICovCiAgICBwcml2YXRlIGJvb2xlYW4gc3RhcnRFbnRpdHlMaXN0ZW5lcnMo\nQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9u\nIHsKICAgICAgICBpZiAoIWlzTWV0YURhdGFNb2RlKCkpCiAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQoKSA9\nPSBudWxsKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgLy8g\ncmVzZXQgbGlzdGVuZXJzIGRlY2xhcmVkIGluIGFubm90YXRpb25zLgogICAg\nICAgIExpZmVjeWNsZU1ldGFEYXRhIG1ldGEgPSAoKENsYXNzTWV0YURhdGEp\nIGN1cnJlbnRFbGVtZW50KCkpLgogICAgICAgICAgICBnZXRMaWZlY3ljbGVN\nZXRhRGF0YSgpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTGlmZWN5\nY2xlRXZlbnQuQUxMX0VWRU5UUy5sZW5ndGg7IGkrKykKICAgICAgICAgICAg\nbWV0YS5zZXREZWNsYXJlZENhbGxiYWNrcyhpLCBudWxsLCAwKTsKICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIGV4\nY2x1ZGUtZGVmYXVsdC1saXN0ZW5lcnMuCiAgICAgKi8KICAgIHByaXZhdGUg\nYm9vbGVhbiBzdGFydEV4Y2x1ZGVEZWZhdWx0TGlzdGVuZXJzKEF0dHJpYnV0\nZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAg\nICAgaWYgKCFpc01ldGFEYXRhTW9kZSgpKQogICAgICAgICAgICByZXR1cm4g\nZmFsc2U7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gKENsYXNzTWV0\nYURhdGEpIGN1cnJlbnRFbGVtZW50KCk7CiAgICAgICAgbWV0YS5nZXRMaWZl\nY3ljbGVNZXRhRGF0YSgpLnNldElnbm9yZVN5c3RlbUxpc3RlbmVycyh0cnVl\nKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFBhcnNlIGV4Y2x1ZGUtc3VwZXJjbGFzcy1saXN0ZW5lcnMuCiAgICAgKi8K\nICAgIHByaXZhdGUgYm9vbGVhbiBzdGFydEV4Y2x1ZGVTdXBlcmNsYXNzTGlz\ndGVuZXJzKEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4\nY2VwdGlvbiB7CiAgICAgICAgaWYgKCFpc01ldGFEYXRhTW9kZSgpKQogICAg\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBt\nZXRhID0gKENsYXNzTWV0YURhdGEpIGN1cnJlbnRFbGVtZW50KCk7CiAgICAg\nICAgbWV0YS5nZXRMaWZlY3ljbGVNZXRhRGF0YSgpLnNldElnbm9yZVN1cGVy\nY2xhc3NDYWxsYmFja3MKICAgICAgICAgICAgKExpZmVjeWNsZU1ldGFEYXRh\nLklHTk9SRV9ISUdIKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFBhcnNlIGVudGl0eS1saXN0ZW5lci4KICAgICAqLwog\nICAgcHJpdmF0ZSBib29sZWFuIHN0YXJ0RW50aXR5TGlzdGVuZXIoQXR0cmli\ndXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAg\nICAgICBfbGlzdGVuZXIgPSBjbGFzc0Zvck5hbWUoYXR0cnMuZ2V0VmFsdWUo\nImNsYXNzIikpOwogICAgICAgIGJvb2xlYW4gc3lzdGVtID0gY3VycmVudEVs\nZW1lbnQoKSA9PSBudWxsOwogICAgICAgIENvbGxlY3Rpb248TGlmZWN5Y2xl\nQ2FsbGJhY2tzPltdIHBhcnNlZCA9CiAgICAgICAgICAgIEFubm90YXRpb25Q\nZXJzaXN0ZW5jZU1ldGFEYXRhUGFyc2VyLnBhcnNlQ2FsbGJhY2tNZXRob2Rz\nKF9saXN0ZW5lciwKICAgICAgICAgICAgICAgIG51bGwsIHRydWUsIHRydWUs\nIF9yZXBvcyk7CiAgICAgICAgaWYgKHBhcnNlZCA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgaWYgKF9jYWxsYmFja3MgPT0g\nbnVsbCkgewogICAgICAgICAgICBfY2FsbGJhY2tzID0gKENvbGxlY3Rpb248\nTGlmZWN5Y2xlQ2FsbGJhY2tzPltdKQogICAgICAgICAgICAgICAgbmV3IENv\nbGxlY3Rpb25bTGlmZWN5Y2xlRXZlbnQuQUxMX0VWRU5UUy5sZW5ndGhdOwog\nICAgICAgICAgICBpZiAoIXN5c3RlbSkKICAgICAgICAgICAgICAgIF9oaWdo\ncyA9IG5ldyBpbnRbTGlmZWN5Y2xlRXZlbnQuQUxMX0VWRU5UUy5sZW5ndGhd\nOwogICAgICAgIH0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBhcnNl\nZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAocGFyc2VkW2ldID09\nIG51bGwpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAg\naWYgKF9jYWxsYmFja3NbaV0gPT0gbnVsbCkKICAgICAgICAgICAgICAgIF9j\nYWxsYmFja3NbaV0gPSBwYXJzZWRbaV07CiAgICAgICAgICAgIGVsc2UKICAg\nICAgICAgICAgICAgIF9jYWxsYmFja3NbaV0uYWRkQWxsKHBhcnNlZFtpXSk7\nCiAgICAgICAgICAgIGlmICghc3lzdGVtKQogICAgICAgICAgICAgICAgX2hp\nZ2hzW2ldICs9IHBhcnNlZFtpXS5zaXplKCk7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiB0cnVlOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBlbmRFbnRp\ndHlMaXN0ZW5lcigpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAg\nICAgICAgLy8gc2hvdWxkIGJlIGluIGVuZEVudGl0eUxpc3RlbmVycyBJIHRo\naW5rIHRvIG1lcmdlIGNhbGxiYWNrcwogICAgICAgIC8vIGludG8gYSBzaW5n\nbGUgbGlzdGVuZXIuICBCdXQgdGhlbiB0aGUgdXNlciBjYW5ub3QgcmVtb3Zl\nLgogICAgICAgIGlmIChjdXJyZW50RWxlbWVudCgpID09IG51bGwgJiYgX2Nh\nbGxiYWNrcyAhPSBudWxsKSB7CiAgICAgICAgICAgIF9yZXBvcy5hZGRTeXN0\nZW1MaXN0ZW5lcihuZXcgUGVyc2lzdGVuY2VMaXN0ZW5lckFkYXB0ZXIKICAg\nICAgICAgICAgICAgIChfY2FsbGJhY2tzKSk7CiAgICAgICAgICAgIF9jYWxs\nYmFja3MgPSBudWxsOwogICAgICAgIH0KICAgICAgICBfbGlzdGVuZXIgPSBu\ndWxsOwogICAgfQoKICAgIHByaXZhdGUgYm9vbGVhbiBzdGFydENhbGxiYWNr\nKE1ldGFEYXRhVGFnIGNhbGxiYWNrLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAg\nICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmICghaXNNZXRh\nRGF0YU1vZGUoKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nIGludFtdIGV2ZW50cyA9IE1ldGFEYXRhUGFyc2Vycy5nZXRFdmVudFR5cGVz\nKGNhbGxiYWNrKTsKICAgICAgICBpZiAoZXZlbnRzID09IG51bGwpCiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgYm9vbGVhbiBzeXN0ZW0g\nPSBjdXJyZW50RWxlbWVudCgpID09IG51bGw7CiAgICAgICAgQ2xhc3MgdHlw\nZSA9IGN1cnJlbnRFbGVtZW50KCkgPT0gbnVsbCA/IG51bGwgOgogICAgICAg\nICAgICAoKENsYXNzTWV0YURhdGEpIGN1cnJlbnRFbGVtZW50KCkpLmdldERl\nc2NyaWJlZFR5cGUoKTsKICAgICAgICBpZiAodHlwZSA9PSBudWxsKQogICAg\nICAgICAgICB0eXBlID0gT2JqZWN0LmNsYXNzOwoKICAgICAgICBpZiAoX2Nh\nbGxiYWNrcyA9PSBudWxsKSB7CiAgICAgICAgICAgIF9jYWxsYmFja3MgPSAo\nQ29sbGVjdGlvbjxMaWZlY3ljbGVDYWxsYmFja3M+W10pCiAgICAgICAgICAg\nICAgICBuZXcgQ29sbGVjdGlvbltMaWZlY3ljbGVFdmVudC5BTExfRVZFTlRT\nLmxlbmd0aF07CiAgICAgICAgICAgIGlmICghc3lzdGVtKQogICAgICAgICAg\nICAgICAgX2hpZ2hzID0gbmV3IGludFtMaWZlY3ljbGVFdmVudC5BTExfRVZF\nTlRTLmxlbmd0aF07CiAgICAgICAgfQoKICAgICAgICBNZXRhRGF0YURlZmF1\nbHRzIGRlZiA9IF9yZXBvcy5nZXRNZXRhRGF0YUZhY3RvcnkoKS5nZXREZWZh\ndWx0cygpOwogICAgICAgIExpZmVjeWNsZUNhbGxiYWNrcyBhZGFwdGVyOwog\nICAgICAgIGlmIChfbGlzdGVuZXIgIT0gbnVsbCkKICAgICAgICAgICAgYWRh\ncHRlciA9IG5ldyBCZWFuTGlmZWN5Y2xlQ2FsbGJhY2tzKF9saXN0ZW5lciwK\nICAgICAgICAgICAgICAgIGF0dHJzLmdldFZhbHVlKCJtZXRob2QtbmFtZSIp\nLCBmYWxzZSwgdHlwZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBhZGFw\ndGVyID0gbmV3IE1ldGhvZExpZmVjeWNsZUNhbGxiYWNrcyhfY2xzLAogICAg\nICAgICAgICAgICAgYXR0cnMuZ2V0VmFsdWUoIm1ldGhvZC1uYW1lIiksIGZh\nbHNlKTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBldmVudHMubGVu\nZ3RoOyBpKyspIHsKICAgICAgICAgICAgaW50IGV2ZW50ID0gZXZlbnRzW2ld\nOwogICAgICAgICAgICBpZiAoX2xpc3RlbmVyICE9IG51bGwpIHsKICAgICAg\nICAgICAgICAgIE1ldGFEYXRhUGFyc2Vycy52YWxpZGF0ZU1ldGhvZHNGb3JT\nYW1lQ2FsbGJhY2soX2xpc3RlbmVyLAogICAgICAgICAgICAgICAgICAgIF9j\nYWxsYmFja3NbZXZlbnRdLCAoKEJlYW5MaWZlY3ljbGVDYWxsYmFja3MpIGFk\nYXB0ZXIpLgogICAgICAgICAgICAgICAgICAgIGdldENhbGxiYWNrTWV0aG9k\nKCksIGNhbGxiYWNrLCBkZWYsIGdldExvZygpKTsKICAgICAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgICAgIE1ldGFEYXRhUGFyc2Vycy52YWxpZGF0\nZU1ldGhvZHNGb3JTYW1lQ2FsbGJhY2soX2NscywKICAgICAgICAgICAgICAg\nICAgICBfY2FsbGJhY2tzW2V2ZW50XSwgKChNZXRob2RMaWZlY3ljbGVDYWxs\nYmFja3MpIGFkYXB0ZXIpLgogICAgICAgICAgICAgICAgICAgIGdldENhbGxi\nYWNrTWV0aG9kKCksIGNhbGxiYWNrLCBkZWYsIGdldExvZygpKTsKCiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgaWYgKF9jYWxsYmFja3NbZXZlbnRdID09\nIG51bGwpCiAgICAgICAgICAgICAgICBfY2FsbGJhY2tzW2V2ZW50XSA9IG5l\ndyBBcnJheUxpc3Q8TGlmZWN5Y2xlQ2FsbGJhY2tzPigzKTsKICAgICAgICAg\nICAgX2NhbGxiYWNrc1tldmVudF0uYWRkKGFkYXB0ZXIpOwogICAgICAgICAg\nICBpZiAoIXN5c3RlbSAmJiBfbGlzdGVuZXIgIT0gbnVsbCkKICAgICAgICAg\nICAgICAgIF9oaWdoc1tldmVudF0rKzsKICAgICAgICB9CiAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9yZSBsaWZlY3lj\nbGUgbWV0YWRhdGEuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBzdG9yZUNh\nbGxiYWNrcyhDbGFzc01ldGFEYXRhIGNscykgewogICAgICAgIExpZmVjeWNs\nZU1ldGFEYXRhIG1ldGEgPSBjbHMuZ2V0TGlmZWN5Y2xlTWV0YURhdGEoKTsK\nICAgICAgICBDbGFzcyBzdXBDbHMgPSBjbHMuZ2V0RGVzY3JpYmVkVHlwZSgp\nLmdldFN1cGVyY2xhc3MoKTsKICAgICAgICBDb2xsZWN0aW9uPExpZmVjeWNs\nZUNhbGxiYWNrcz5bXSBzdXBDYWxscyA9IG51bGw7CiAgICAgICAgaWYgKCFP\nYmplY3QuY2xhc3MuZXF1YWxzKHN1cENscykpIHsKICAgICAgICAgICAgc3Vw\nQ2FsbHMgPSBBbm5vdGF0aW9uUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlci5w\nYXJzZUNhbGxiYWNrTWV0aG9kcwogICAgICAgICAgICAgICAgKHN1cENscywg\nbnVsbCwgdHJ1ZSwgZmFsc2UsIF9yZXBvcyk7CiAgICAgICAgfQogICAgICAg\nIGlmIChzdXBDYWxscyAhPSBudWxsKSB7CiAgICAgICAgICAgIGZvciAoaW50\nIGV2ZW50IDogTGlmZWN5Y2xlRXZlbnQuQUxMX0VWRU5UUykgewogICAgICAg\nICAgICAgICAgaWYgKHN1cENhbGxzW2V2ZW50XSA9PSBudWxsKQogICAgICAg\nICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgbWV0YS5z\nZXROb25QQ1N1cGVyY2xhc3NDYWxsYmFja3MoZXZlbnQsIHN1cENhbGxzW2V2\nZW50XS50b0FycmF5CiAgICAgICAgICAgICAgICAgICAgKG5ldyBMaWZlY3lj\nbGVDYWxsYmFja3Nbc3VwQ2FsbHNbZXZlbnRdLnNpemUoKV0pLCAwKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoX2NhbGxiYWNrcyA9\nPSBudWxsKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIGZvciAoaW50\nIGV2ZW50IDogTGlmZWN5Y2xlRXZlbnQuQUxMX0VWRU5UUykgewogICAgICAg\nICAgICBpZiAoX2NhbGxiYWNrc1tldmVudF0gPT0gbnVsbCkKICAgICAgICAg\nICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBtZXRhLnNldERlY2xhcmVk\nQ2FsbGJhY2tzKGV2ZW50LCAoTGlmZWN5Y2xlQ2FsbGJhY2tzW10pCiAgICAg\nICAgICAgICAgICBfY2FsbGJhY2tzW2V2ZW50XS50b0FycmF5CiAgICAgICAg\nICAgICAgICAgICAgKG5ldyBMaWZlY3ljbGVDYWxsYmFja3NbX2NhbGxiYWNr\nc1tldmVudF0uc2l6ZSgpXSksCiAgICAgICAgICAgICAgICBfaGlnaHNbZXZl\nbnRdKTsKICAgICAgICB9CiAgICAgICAgX2NhbGxiYWNrcyA9IG51bGw7CiAg\nICAgICAgX2hpZ2hzID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIElu\nc3RhbnRpYXRlIHRoZSBnaXZlbiBjbGFzcywgdGFraW5nIGludG8gYWNjb3Vu\ndCB0aGUgZGVmYXVsdCBwYWNrYWdlLgoJICovCglwcm90ZWN0ZWQgQ2xhc3Mg\nY2xhc3NGb3JOYW1lKFN0cmluZyBuYW1lKQoJCXRocm93cyBTQVhFeGNlcHRp\nb24gewoJCWlmICgiRW50aXR5Ii5lcXVhbHMobmFtZSkpCgkJCXJldHVybiBQ\nZXJzaXN0ZW5jZUNhcGFibGUuY2xhc3M7CgkJcmV0dXJuIHN1cGVyLmNsYXNz\nRm9yTmFtZShuYW1lLCBpc1J1bnRpbWUoKSk7Cgl9Cn0K\n","encoding":"base64"}

