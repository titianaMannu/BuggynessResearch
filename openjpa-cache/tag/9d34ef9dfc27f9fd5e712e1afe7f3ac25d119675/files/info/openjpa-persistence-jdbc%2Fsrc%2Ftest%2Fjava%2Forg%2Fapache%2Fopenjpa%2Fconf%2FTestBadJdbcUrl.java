{"sha":"8a3b4a0e0caa1614854772304bf8ffa8db74db91","node_id":"MDQ6QmxvYjIwNjM2NDo4YTNiNGEwZTBjYWExNjE0ODU0NzcyMzA0YmY4ZmZhOGRiNzRkYjkx","size":6855,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8a3b4a0e0caa1614854772304bf8ffa8db74db91","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZjsKCmltcG9ydCBqYXZh\nLnV0aWwuUHJvcGVydGllczsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5\nTWFuYWdlckZhY3Rvcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5QZXJz\naXN0ZW5jZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNl\nRXhjZXB0aW9uOwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5Bc3NlcnRpb25G\nYWlsZWRFcnJvcjsKaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0Q2FzZTsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQ\nQVBlcnNpc3RlbmNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwu\nVXNlckV4Y2VwdGlvbjsKCi8qKgogKiBWZXJpZmllcyBhcHByb3ByaWF0ZSBl\neGNlcHRpb24gaXMgdGhyb3duIHdoZW4gYW4gaW5jb3JyZWN0IHByb3RvY29s\nIG9yCiAqIHN1Yi1wcm90b2NvbCBpcyBzcGVjaWZpZWQgaW4gdGhlIEpEQkMg\nVVJMLiBQZXIgdGhlIEpEQkMgc3BlY2lmaWNhdGlvbiwgdGhlCiAqIERyaXZl\nciBzaG91bGQgcmV0dXJuIGEgbnVsbCBjb25uZWN0aW9uIHVwb24gZ2V0Q29u\nbmVjdGlvbigpIHdoZW4gYSBiYWQgZHJpdmVyCiAqIGlzIHNwZWNpZmllZCBv\nbiB0aGUgVVJMLiBPcGVuSlBBIG11c3QgYmUgYWJsZSB0byBoYW5kbGUgdGhp\ncyBjb25kaXRpb24gYW5kCiAqIHJldHVybiBhbiBhcHByb3ByaWF0ZSBtZXNz\nYWdlLgogKiAKICogT3BlbkpQQSBKSVJBOiB7QGxpbmsgaHR0cDovL2lzc3Vl\ncy5hcGFjaGUub3JnL2ppcmEvYnJvd3NlL09QRU5KUEEtNjU2fQogKiAKICog\nQGF1dGhvciBKZXJlbXkgQmF1ZXIKICogQGF1dGhvciBQaW5ha2kgUG9kZGFy\nCiAqIAogKi8KcHVibGljIGNsYXNzIFRlc3RCYWRKZGJjVXJsIGV4dGVuZHMg\nVGVzdENhc2UgewoJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgR09PRF9V\nUkwgPSAiamRiYzpkZXJieTp0YXJnZXQvZGF0YWJhc2Uvb3BlbmpwYS1kZXJi\neS1kYXRhYmFzZTtjcmVhdGU9dHJ1ZSI7CglwdWJsaWMgc3RhdGljIGZpbmFs\nIFN0cmluZyBHT09EX0RSSVZFUiA9ICJvcmcuYXBhY2hlLmRlcmJ5LmpkYmMu\nRW1iZWRkZWREcml2ZXIiOwoJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nR09PRF9EQVRBU09VUkNFID0gIm9yZy5hcGFjaGUuY29tbW9ucy5kYmNwLkJh\nc2ljRGF0YVNvdXJjZSI7CgoJcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nQkFEX0RSSVZFUiA9ICJiYWQuZHJpdmVyIjsKCXB1YmxpYyBzdGF0aWMgZmlu\nYWwgU3RyaW5nIEJBRF9VUkxfUFJPVE9DT0wgPSAiYmFkLnVybC5wcm90b2Nv\nbCI7CglwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBCQURfVVJMX1NVQlBS\nT1RPQ09MID0gImJhZC51cmwuc3ViLnByb3RvY29sIjsKCXB1YmxpYyBzdGF0\naWMgZmluYWwgU3RyaW5nIEJBRF9DT05OX1BST1BTID0gImNvbm5lY3Rpb25V\ncmw9YmFkLGNvbm5lY3Rpb25Ecml2ZXI9YmFkIjsKCgkvKgoJICogVGVzdCBz\ncGVjaWZ5aW5nIFVSTCB3aXRoIGJhZCBwcm90b2NvbCBidXQgYSB2YWxpZCBE\ncml2ZXIuCgkgKi8KCXB1YmxpYyB2b2lkIHRlc3RCYWRVcmxQcm90b2NvbFZh\nbHVlV2l0aFZhbGlkRHJpdmVyQ2xhc3MoKSB7CgkJUHJvcGVydGllcyBwID0g\nbmV3IFByb3BlcnRpZXMoKTsKCQlwLnB1dCgib3BlbmpwYS5Db25uZWN0aW9u\nRHJpdmVyTmFtZSIsIEdPT0RfRFJJVkVSKTsKCQlwLnB1dCgib3BlbmpwYS5D\nb25uZWN0aW9uVVJMIiwgQkFEX1VSTF9QUk9UT0NPTCk7CgkJdmVyaWZ5Q29u\nbmVjdEV4Y2VwdGlvbihwLCBQZXJzaXN0ZW5jZUV4Y2VwdGlvbi5jbGFzcywK\nCQkJCVVzZXJFeGNlcHRpb24uY2xhc3MsIEdPT0RfRFJJVkVSLCBCQURfVVJM\nX1BST1RPQ09MKTsKCX0KCgkvKgoJICogVGVzdCBzcGVjaWZ5aW5nIFVSTCB3\naXRoIGJhZCBwcm90b2NvbCBidXQgYSB2YWxpZCBEYXRhU291cmNlLgoJICov\nCglwdWJsaWMgdm9pZCB0ZXN0QmFkVXJsUHJvdG9jb2xWYWx1ZVdpdGhWYWxp\nZERhdGFTb3VyY2UoKSB7CgkJUHJvcGVydGllcyBwID0gbmV3IFByb3BlcnRp\nZXMoKTsKCQlwLnB1dCgib3BlbmpwYS5Db25uZWN0aW9uRHJpdmVyTmFtZSIs\nIEdPT0RfREFUQVNPVVJDRSk7CgkJcC5wdXQoIm9wZW5qcGEuQ29ubmVjdGlv\nblVSTCIsIEJBRF9VUkxfUFJPVE9DT0wpOwoJCXAucHV0KCJvcGVuanBhLkNv\nbm5lY3Rpb25Qcm9wZXJ0aWVzIiwgQkFEX0NPTk5fUFJPUFMpOwoJCXZlcmlm\neUNvbm5lY3RFeGNlcHRpb24ocCwgUGVyc2lzdGVuY2VFeGNlcHRpb24uY2xh\nc3MsCgkJCQludWxsLCAoU3RyaW5nW10pbnVsbCk7Cgl9CgoJLyoKCSAqIFRl\nc3Qgc3BlY2lmeWluZyBVUkwgd2l0aCBiYWQgc3ViLXByb3RvY29sIGJ1dCBh\nIHZhbGlkIERyaXZlci4KCSAqLwoJcHVibGljIHZvaWQgdGVzdEJhZFVybFN1\nYnByb3RvY29sVmFsdWVXaXRoVmFsaWREcml2ZXJDbGFzcygpIHsKCQlQcm9w\nZXJ0aWVzIHAgPSBuZXcgUHJvcGVydGllcygpOwoJCXAucHV0KCJvcGVuanBh\nLkNvbm5lY3Rpb25Ecml2ZXJOYW1lIiwgR09PRF9EUklWRVIpOwoJCXAucHV0\nKCJvcGVuanBhLkNvbm5lY3Rpb25VUkwiLCBCQURfVVJMX1NVQlBST1RPQ09M\nKTsKCQl2ZXJpZnlDb25uZWN0RXhjZXB0aW9uKHAsIFBlcnNpc3RlbmNlRXhj\nZXB0aW9uLmNsYXNzLAoJCQkJVXNlckV4Y2VwdGlvbi5jbGFzcywgR09PRF9E\nUklWRVIsIEJBRF9VUkxfU1VCUFJPVE9DT0wpOwoJfQoKCS8qCgkgKiBUZXN0\nIHNwZWNpZnlpbmcgVVJMIHdpdGggYmFkIHN1Yi1wcm90b2NvbCBidXQgYSB2\nYWxpZCBEcml2ZXIuCgkgKi8KCXB1YmxpYyB2b2lkIHRlc3RCYWRVcmxTdWJw\ncm90b2NvbFZhbHVlV2l0aFZhbGlkRGF0YVNvdXJjZSgpIHsKCQlQcm9wZXJ0\naWVzIHAgPSBuZXcgUHJvcGVydGllcygpOwoJCXAucHV0KCJvcGVuanBhLkNv\nbm5lY3Rpb25Ecml2ZXJOYW1lIiwgR09PRF9EUklWRVIpOwoJCXAucHV0KCJv\ncGVuanBhLkNvbm5lY3Rpb25VUkwiLCBCQURfVVJMX1NVQlBST1RPQ09MKTsK\nCQl2ZXJpZnlDb25uZWN0RXhjZXB0aW9uKHAsIFBlcnNpc3RlbmNlRXhjZXB0\naW9uLmNsYXNzLAoJCQkJVXNlckV4Y2VwdGlvbi5jbGFzcywgR09PRF9EUklW\nRVIsIEJBRF9VUkxfU1VCUFJPVE9DT0wpOwoJfQoKCS8qCgkgKiBUZXN0IHNw\nZWNpZnlpbmcgVmFsaWQgVVJMIHdpdGggYW4gaW52YWxpZCBEcml2ZXIuCgkg\nKi8KCXB1YmxpYyB2b2lkIHRlc3RWYWxpZFVybFdpdGhJbnZhbGlkRHJpdmVy\nKCkgewoJCVByb3BlcnRpZXMgcCA9IG5ldyBQcm9wZXJ0aWVzKCk7CgkJcC5w\ndXQoIm9wZW5qcGEuQ29ubmVjdGlvbkRyaXZlck5hbWUiLCBCQURfRFJJVkVS\nKTsKCQlwLnB1dCgib3BlbmpwYS5Db25uZWN0aW9uVVJMIiwgR09PRF9VUkwp\nOwoJCXZlcmlmeUNvbm5lY3RFeGNlcHRpb24ocCwgUGVyc2lzdGVuY2VFeGNl\ncHRpb24uY2xhc3MsCgkJCQlVc2VyRXhjZXB0aW9uLmNsYXNzLCBHT09EX1VS\nTCwgQkFEX0RSSVZFUik7Cgl9CgoJLyoqCgkgKiBBdHRlbXB0cyB0byBjb25u\nZWN0IHdpdGggZ2l2ZW4gcHJvcGVydGllcyBhbmQgYW5hbHl6ZSBleGNlcHRp\nb24gZm9yIHRoZQoJICogZXhpc3RlbmNlIG9mIGdpdmVuIHRhcmdldCBleGNl\ncHRpb24gYW5kIGVycm9yIG1lc3NhZ2Ugc3RyaW5ncy4KCSAqIAoJICogQHBh\ncmFtIHByb3BzCgkgKiAgICAgICAgICAgIHRoZSBwcm9wZXJ0aWVzIHRvIGlu\naXRpYWxpemUgdGhlIHBlcnNpc3RlbmNlIHVuaXQKCSAqIEBwYXJhbSB0YXJn\nZXQKCSAqICAgICAgICAgICAgdGhlIHR5cGUgZXhwZWN0ZWQgZXhjZXB0aW9u\nIHRvIGJlIHJhaXNlZC4KCSAqIEBwYXJhbSBuZXN0ZWQKCSAqICAgICAgICAg\nICAgdGhlIHR5cGUgZXhwZWN0ZWQgbmVzdGVkIGV4Y2VwdGlvbi4gbnVsbCBp\nbXBsaWVzIG5vdCB0byBsb29rCgkgKiAgICAgICAgICAgIGZvciBhbnkuCgkg\nKiBAcGFyYW0ga2V5cwoJICogICAgICAgICAgICB0aGUgc3RyaW5ncyB0aGF0\nIG11c3Qgb2NjdXIgaW4gdGhlIGV4Y2VwdGlvbiBtZXNzYWdlLgoJICovCglw\ncml2YXRlIHZvaWQgdmVyaWZ5Q29ubmVjdEV4Y2VwdGlvbihQcm9wZXJ0aWVz\nIHByb3BzLCBDbGFzcyB0YXJnZXRUeXBlLAoJCQlDbGFzcyBuZXN0ZWRUeXBl\nLCBTdHJpbmcuLi4ga2V5cykgewoJCUVudGl0eU1hbmFnZXJGYWN0b3J5IGVt\nZiA9IG51bGw7CgkJRW50aXR5TWFuYWdlciBlbSA9IG51bGw7CgkJdHJ5IHsK\nCQkJZW1mID0gUGVyc2lzdGVuY2UuY3JlYXRlRW50aXR5TWFuYWdlckZhY3Rv\ncnkoInRlc3QiLCBwcm9wcyk7CgkJCWVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKCQkJT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0pLmdldENv\nbm5lY3Rpb24oKTsKCQkJZmFpbCgiU2hvdWxkIGhhdmUgY2F1Z2h0IGEgIiAr\nIHRhcmdldFR5cGUuZ2V0TmFtZSgpKTsKCQl9IGNhdGNoIChUaHJvd2FibGUg\ndCkgewoJCQlhc3NlcnRFeGNlcHRpb24odCwgdGFyZ2V0VHlwZSwgbmVzdGVk\nVHlwZSk7CgkJCWFzc2VydE1lc3NhZ2UodCwga2V5cyk7CgkJfSBmaW5hbGx5\nIHsKCQkJaWYgKGVtICE9IG51bGwpCgkJCQllbS5jbG9zZSgpOwoJCQlpZiAo\nZW1mICE9IG51bGwpCgkJCQllbWYuY2xvc2UoKTsKCQl9Cgl9CgoJLyoqCgkg\nKiBBc3NlcnRzIHRoYXQgdGhlIGdpdmVuIHRhcmdldFR5cGUgaXMgYXNzaWdu\nYWJsZSBmcm9tIGFjdHVhbC4gQXNzZXJ0cyB0aGF0CgkgKiB0aGUgbmVzdGVk\nVHlwZSBpcyBhIG5lc3RlZCB3aXRoaW4gdGhlIGdpdmVuIGFjdHVhbCBUaHJv\nd2FibGUKCSAqIAoJICogQHBhcmFtIGFjdHVhbAoJICogQHBhcmFtIHRhcmdl\ndFR5cGUKCSAqIEBwYXJhbSBuZXN0ZWRUeXBlCgkgKi8KCXZvaWQgYXNzZXJ0\nRXhjZXB0aW9uKGZpbmFsIFRocm93YWJsZSBhY3R1YWwsIENsYXNzIHRhcmdl\ndFR5cGUsCgkJCUNsYXNzIG5lc3RlZFRhcmdldFR5cGUpIHsKCQlpZiAodGFy\nZ2V0VHlwZSA9PSBudWxsKQoJCQlyZXR1cm47CgkJYXNzZXJ0Tm90TnVsbChh\nY3R1YWwpOwoJCUNsYXNzIGFjdHVhbFR5cGUgPSBhY3R1YWwuZ2V0Q2xhc3Mo\nKTsKCQlpZiAoIXRhcmdldFR5cGUuaXNBc3NpZ25hYmxlRnJvbShhY3R1YWxU\neXBlKSkgewoJCQlhY3R1YWwucHJpbnRTdGFja1RyYWNlKCk7CgkJCWZhaWwo\ndGFyZ2V0VHlwZS5nZXROYW1lKCkgKyAiIGlzIG5vdCBhc3NpZ25hYmxlIGZy\nb20gIgoJCQkJCSsgYWN0dWFsVHlwZS5nZXROYW1lKCkpOwoJCX0KCgkJaWYg\nKG5lc3RlZFRhcmdldFR5cGUgIT0gbnVsbCkgewoJCQlUaHJvd2FibGUgbmVz\ndGVkID0gYWN0dWFsLmdldENhdXNlKCk7CgkJCUNsYXNzIG5lc3RlZFR5cGUg\nPSAobmVzdGVkID09IG51bGwpID8gbnVsbCA6IG5lc3RlZC5nZXRDbGFzcygp\nOwoJCQl3aGlsZSAobmVzdGVkVHlwZSAhPSBudWxsKSB7CgkJCQlpZiAobmVz\ndGVkVHlwZS5pc0Fzc2lnbmFibGVGcm9tKG5lc3RlZFRhcmdldFR5cGUpKSB7\nCgkJCQkJcmV0dXJuOwoJCQkJfSBlbHNlIHsKCQkJCQlUaHJvd2FibGUgbmV4\ndCA9IG5lc3RlZC5nZXRDYXVzZSgpOwoJCQkJCWlmIChuZXh0ID09IG51bGwg\nfHwgbmV4dCA9PSBuZXN0ZWQpCgkJCQkJCWJyZWFrOwoJCQkJCW5lc3RlZFR5\ncGUgPSBuZXh0LmdldENsYXNzKCk7CgkJCQkJbmVzdGVkICAgICA9IG5leHQ7\nCgkJCQl9CgkJCX0KCQkJYWN0dWFsLnByaW50U3RhY2tUcmFjZSgpOwoJCQlm\nYWlsKCJObyBuZXN0ZWQgdHlwZSAiICsgbmVzdGVkVGFyZ2V0VHlwZSArICIg\naW4gIiArIGFjdHVhbCk7CgkJfQoJfQoKCS8qKgoJICogQXNzZXJ0IHRoYXQg\nZWFjaCBvZiBnaXZlbiBrZXlzIGFyZSBwcmVzZW50IGluIHRoZSBtZXNzYWdl\nIG9mIHRoZSBnaXZlbgoJICogVGhyb3dhYmxlLgoJICovCgl2b2lkIGFzc2Vy\ndE1lc3NhZ2UoVGhyb3dhYmxlIGFjdHVhbCwgU3RyaW5nLi4uIGtleXMpIHsK\nCQlpZiAoYWN0dWFsID09IG51bGwgfHwga2V5cyA9PSBudWxsKQoJCQlyZXR1\ncm47CgkJU3RyaW5nIG1lc3NhZ2UgPSBhY3R1YWwuZ2V0TWVzc2FnZSgpOwoJ\nCWZvciAoU3RyaW5nIGtleSA6IGtleXMpIHsKCQkJYXNzZXJ0VHJ1ZShrZXkg\nKyAiIGlzIG5vdCBpbiAiICsgbWVzc2FnZSwgbWVzc2FnZS5jb250YWlucyhr\nZXkpKTsKCQl9Cgl9Cn0K\n","encoding":"base64"}

