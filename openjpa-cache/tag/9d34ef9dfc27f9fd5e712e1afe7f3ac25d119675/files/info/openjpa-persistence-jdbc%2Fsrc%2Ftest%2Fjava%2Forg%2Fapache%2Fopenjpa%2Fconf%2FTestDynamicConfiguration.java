{"sha":"c05392f3a85917081c6ba8459a308d961c23ed81","node_id":"MDQ6QmxvYjIwNjM2NDpjMDUzOTJmM2E4NTkxNzA4MWM2YmE4NDU5YTMwOGQ5NjFjMjNlZDgx","size":4429,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c05392f3a85917081c6ba8459a308d961c23ed81","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZjsKCmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIuY29uZi5WYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kYXRhY2FjaGUuY29tbW9uLmFwcHMu\nUE9iamVjdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3RzIGR5bmFt\naWMgbW9kaWZpY2F0aW9uIG9mIGNvbmZpZ3VyYXRpb24gcHJvcGVydHkuCiAq\nIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICoKICovCnB1YmxpYyBjbGFz\ncyBUZXN0RHluYW1pY0NvbmZpZ3VyYXRpb24gZXh0ZW5kcyBTaW5nbGVFTUZU\nZXN0Q2FzZSB7CgoJcHVibGljIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0\naW9uIHsKCQlzdXBlci5zZXRVcChQT2JqZWN0LmNsYXNzKTsKCX0KCQogICAg\ncHVibGljIHZvaWQgdGVzdENvbmZpZ3VyYXRpb25Jc0VxdWFsQnlWYWx1ZUFu\nZEhhc2hDb2RlKCkgewoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQ\nSSBlbWYxID0gY3JlYXRlRU1GKCk7CgkJYXNzZXJ0Tm90TnVsbChlbWYxKTsK\nCQlPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mMSA9IGVtZjEuZ2V0Q29uZmln\ndXJhdGlvbigpOwoJCQoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQ\nSSBlbWYyID0gY3JlYXRlRU1GKCk7CgkJYXNzZXJ0Tm90TnVsbChlbWYyKTsK\nCQlPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mMiA9IGVtZjIuZ2V0Q29uZmln\ndXJhdGlvbigpOwoJCQoJCWFzc2VydEZhbHNlKGVtZjE9PWVtZjIpOwoJCWFz\nc2VydEZhbHNlKGVtZjEuZXF1YWxzKGVtZjIpKTsKCQlhc3NlcnRGYWxzZShj\nb25mMT09Y29uZjIpOwoJCWFzc2VydEVxdWFscyhjb25mMSwgY29uZjIpOwoJ\nCWFzc2VydEVxdWFscyhjb25mMS5oYXNoQ29kZSgpLCBjb25mMi5oYXNoQ29k\nZSgpKTsKCQlhc3NlcnRFcXVhbHMoY29uZjEudG9Qcm9wZXJ0aWVzKGZhbHNl\nKSwgY29uZjIudG9Qcm9wZXJ0aWVzKGZhbHNlKSk7Cgl9CgkKCXB1YmxpYyB2\nb2lkIHRlc3RDb25maWd1cmF0aW9uSXNSZWFkT25seUFmdGVyRmlyc3RDb25z\ndHJ1Y3Rpb24oKSB7CgkJT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IGVt\nZi5nZXRDb25maWd1cmF0aW9uKCk7CgkJYXNzZXJ0RmFsc2UoY29uZi5pc1Jl\nYWRPbmx5KCkpOwoJCWVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJYXNz\nZXJ0VHJ1ZShjb25mLmlzUmVhZE9ubHkoKSk7Cgl9CgkKCXB1YmxpYyB2b2lk\nIHRlc3ROb25EeW5hbWljVmFsdWVzQ2FuTm90QmVDaGFuZ2VkKCkgewoJCWVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJT3BlbkpQQUNvbmZpZ3VyYXRp\nb24gY29uZiA9IGVtZi5nZXRDb25maWd1cmF0aW9uKCk7CgkJCgkJU3RyaW5n\nIG9sZFZhbHVlID0gY29uZi5nZXRDb25uZWN0aW9uVVJMKCk7CgkJU3RyaW5n\nIG5ld1ZhbHVlID0gImpkYmM6Ly9teWRiOjgwODcvREJEb2VzTm90RXhpc3Qi\nOwoJCXRyeSB7CgkJCWNvbmYuc2V0Q29ubmVjdGlvblVSTChuZXdWYWx1ZSk7\nCgkJCWZhaWwoIkV4cGVjdGVkIGV4Y2VwdGlvbiB0byBtb2RpZnkgY29uZmln\ndXJhdGlvbiIpOwoJCX0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkgeyAvLyBnb29k\nCgkJCWFzc2VydEVxdWFscyhvbGRWYWx1ZSwgY29uZi5nZXRDb25uZWN0aW9u\nVVJMKCkpOwoJCX0KCX0KCQoJcHVibGljIHZvaWQgdGVzdER5bmFtaWNWYWx1\nZXNDYW5CZUNoYW5nZWQoKSB7CgkJT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29u\nZiA9IGVtZi5nZXRDb25maWd1cmF0aW9uKCk7CgkJCgkJaW50IG9sZFZhbHVl\nID0gY29uZi5nZXRMb2NrVGltZW91dCgpOwoJCWludCBuZXdWYWx1ZSA9IG9s\nZFZhbHVlICsgMTA7CgkJCgkJY29uZi5zZXRMb2NrVGltZW91dChuZXdWYWx1\nZSk7CgkJYXNzZXJ0RXF1YWxzKG5ld1ZhbHVlLCBjb25mLmdldExvY2tUaW1l\nb3V0KCkpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3REeW5hbWljVmFsdWVzQXJl\nQ29ycmVjdGx5U2V0KCkgewoJCU9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYg\nPSBlbWYuZ2V0Q29uZmlndXJhdGlvbigpOwoJCQoJCVZhbHVlIGxvY2tUaW1l\nb3V0VmFsdWUgPSBjb25mLmdldFZhbHVlKCJMb2NrVGltZW91dCIpOwoJCWFz\nc2VydE5vdE51bGwobG9ja1RpbWVvdXRWYWx1ZSk7CgkJYXNzZXJ0VHJ1ZShs\nb2NrVGltZW91dFZhbHVlLmlzRHluYW1pYygpKTsKCQkKCQlWYWx1ZSBjb25u\nZWN0aW9uVVJMVmFsdWUgPSBjb25mLmdldFZhbHVlKCJDb25uZWN0aW9uVVJM\nIik7CgkJYXNzZXJ0Tm90TnVsbChjb25uZWN0aW9uVVJMVmFsdWUpOwoJCWFz\nc2VydEZhbHNlKGNvbm5lY3Rpb25VUkxWYWx1ZS5pc0R5bmFtaWMoKSk7Cgl9\nCgkKCXB1YmxpYyB2b2lkIHRlc3REeW5hbWljQ2hhbmdlRG9lc05vdENoYW5n\nZUhhc2hDb2RlKCkgewoJCU9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYxID0g\nZW1mLmdldENvbmZpZ3VyYXRpb24oKTsKCQkKCQlpbnQgb2xkVmFsdWUgPSBj\nb25mMS5nZXRMb2NrVGltZW91dCgpOwoJCWludCBuZXdWYWx1ZSA9IG9sZFZh\nbHVlKzEwOwoJCWludCBvbGRIYXNoID0gY29uZjEuaGFzaENvZGUoKTsKCQlj\nb25mMS5zZXRMb2NrVGltZW91dChuZXdWYWx1ZSk7CgkJaW50IG5ld0hhc2gg\nPSBjb25mMS5oYXNoQ29kZSgpOwoJCQoJCWFzc2VydEVxdWFscyhvbGRIYXNo\nLCBuZXdIYXNoKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdENsYXNzTWV0YURh\ndGFSZWNvZ25pemVzRGF0YUNhY2hlVGltZW91dFZhbHVlQ2hhbmdlKCkgewoJ\nCU9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYgPSBlbWYuZ2V0Q29uZmlndXJh\ndGlvbigpOwoJCQoJCS8vIGVuc3VyZSB0aGF0IFBPYmplY3QgaXMgaW4gbWV0\nYWRhdGEgcmVwb3NpdG9yeQoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKCQlQT2JqZWN0IHBjID0gbmV3IFBPYmplY3QoKTsKCQllbS5wZXJz\naXN0KHBjKTsKCQkKCQlpbnQgb2xkVmFsdWUgPSBjb25mLmdldERhdGFDYWNo\nZVRpbWVvdXQoKTsKCQkKCQlDbGFzc01ldGFEYXRhIG1ldGEgPSBjb25mLmdl\ndE1ldGFEYXRhUmVwb3NpdG9yeUluc3RhbmNlKCkKCQkJLmdldENhY2hlZE1l\ndGFEYXRhKFBPYmplY3QuY2xhc3MpOwoJCWFzc2VydE5vdE51bGwobWV0YSk7\nCgkJYXNzZXJ0RXF1YWxzKG9sZFZhbHVlLCBtZXRhLmdldERhdGFDYWNoZVRp\nbWVvdXQoKSk7CgkJCgkJaW50IG5ld1ZhbHVlID0gb2xkVmFsdWUgKyAxMDsK\nCQljb25mLnNldERhdGFDYWNoZVRpbWVvdXQobmV3VmFsdWUpOwoJCWFzc2Vy\ndEVxdWFscyhuZXdWYWx1ZSwgY29uZi5nZXREYXRhQ2FjaGVUaW1lb3V0KCkp\nOwoJCWFzc2VydEVxdWFscyhuZXdWYWx1ZSwgbWV0YS5nZXREYXRhQ2FjaGVU\naW1lb3V0KCkpOwoJCQoJfQp9Cg==\n","encoding":"base64"}

