{"sha":"15392bfde1faefb596162be1ed6198ac641438f0","node_id":"MDQ6QmxvYjIwNjM2NDoxNTM5MmJmZGUxZmFlZmI1OTYxNjJiZTFlZDYxOThhYzY0MTQzOGYw","size":6404,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/15392bfde1faefb596162be1ed6198ac641438f0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlOwoKaW1wb3J0IGphdmEu\naW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0Nv\nbnRyb2xsZXI7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQg\namF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNv\nbmZpZ3VyYXRpb25JbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkJ5dGVjb2RlV3JpdGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLk9wdGlvbnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0YVJlcG9zaXRvcnk7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5QZXJzaXN0\nZW5jZVRlc3RDYXNlOwppbXBvcnQgc2VycC5ieXRlY29kZS5CQ0NsYXNzOwpp\nbXBvcnQgc2VycC5ieXRlY29kZS5Qcm9qZWN0OwoKcHVibGljIGNsYXNzIFRl\nc3RFbmhhbmNlbWVudFdpdGhNdWx0aXBsZVBVcwogICAgZXh0ZW5kcyBQZXJz\naXN0ZW5jZVRlc3RDYXNlIHsKCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhwbGlj\naXRFbmhhbmNlbWVudFdpdGhDbGFzc05vdEluRmlyc3RQVSgpCiAgICAgICAg\ndGhyb3dzIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewogICAgICAgIE9wZW5K\nUEFDb25maWd1cmF0aW9uIGNvbmYgPSBuZXcgT3BlbkpQQUNvbmZpZ3VyYXRp\nb25JbXBsKCk7CiAgICAgICAgQ29uZmlndXJhdGlvbnMucG9wdWxhdGVDb25m\naWd1cmF0aW9uKGNvbmYsIG5ldyBPcHRpb25zKCkpOwogICAgICAgIE1ldGFE\nYXRhUmVwb3NpdG9yeSByZXBvcyA9IGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0\nb3J5SW5zdGFuY2UoKTsKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIgPSAo\nQ2xhc3NMb2FkZXIpIEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgLmRv\nUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlci5uZXdUZW1wb3JhcnlDbGFzc0xv\nYWRlckFjdGlvbigKICAgICAgICAgICAgICAgIGdldENsYXNzKCkuZ2V0Q2xh\nc3NMb2FkZXIoKSkpOwogICAgICAgIFByb2plY3QgcHJvamVjdCA9IG5ldyBQ\ncm9qZWN0KCk7CgogICAgICAgIFN0cmluZyBjbGFzc05hbWUgPQogICAgICAg\nICAgICAib3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2UuVW5lbmhhbmNlZEJv\nb3RzdHJhcEluc3RhbmNlIjsKICAgICAgICBCQ0NsYXNzIGJjID0gYXNzZXJ0\nTm90UEMobG9hZGVyLCBwcm9qZWN0LCBjbGFzc05hbWUpOwoKICAgICAgICBQ\nQ0VuaGFuY2VyIGVuaGFuY2VyID0gbmV3IFBDRW5oYW5jZXIoY29uZiwgYmMs\nIHJlcG9zLCBsb2FkZXIpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoUENFbmhh\nbmNlci5FTkhBTkNFX1BDLCBlbmhhbmNlci5ydW4oKSk7CiAgICAgICAgYXNz\nZXJ0VHJ1ZShBcnJheXMuYXNMaXN0KGJjLmdldEludGVyZmFjZU5hbWVzKCkp\nLmNvbnRhaW5zKAogICAgICAgICAgICBQZXJzaXN0ZW5jZUNhcGFibGUuY2xh\nc3MuZ2V0TmFtZSgpKSk7CiAgICB9CgogICAgcHJpdmF0ZSBCQ0NsYXNzIGFz\nc2VydE5vdFBDKENsYXNzTG9hZGVyIGxvYWRlciwgUHJvamVjdCBwcm9qZWN0\nLAogICAgICAgIFN0cmluZyBjbGFzc05hbWUpIHsKICAgICAgICBCQ0NsYXNz\nIGJjID0gcHJvamVjdC5sb2FkQ2xhc3MoY2xhc3NOYW1lLCBsb2FkZXIpOwog\nICAgICAgIGFzc2VydEZhbHNlKGNsYXNzTmFtZSArICIgbXVzdCBub3QgYmUg\nZW5oYW5jZWQgYWxyZWFkeTsgaXQgd2FzLiIsCiAgICAgICAgICAgIEFycmF5\ncy5hc0xpc3QoYmMuZ2V0SW50ZXJmYWNlTmFtZXMoKSkuY29udGFpbnMoCiAg\nICAgICAgICAgICAgICBQZXJzaXN0ZW5jZUNhcGFibGUuY2xhc3MuZ2V0TmFt\nZSgpKSk7CiAgICAgICAgcmV0dXJuIGJjOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RFbmhhbmNlbWVudE9mU2Vjb25kUFVXaXRoQ2xhc3NOb3RJbkZp\ncnN0UFUoKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAg\nT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBPcGVuSlBBQ29uZmln\ndXJhdGlvbkltcGwoKTsKICAgICAgICBPcHRpb25zIG9wdHMgPSBuZXcgT3B0\naW9ucygpOwogICAgICAgIG9wdHMuc2V0UHJvcGVydHkoInAiLAogICAgICAg\nICAgICAiTUVUQS1JTkYvcGVyc2lzdGVuY2UueG1sI3NlY29uZC1wZXJzaXN0\nZW5jZS11bml0Iik7CiAgICAgICAgQ29uZmlndXJhdGlvbnMucG9wdWxhdGVD\nb25maWd1cmF0aW9uKGNvbmYsIG9wdHMpOwogICAgICAgIE1ldGFEYXRhUmVw\nb3NpdG9yeSByZXBvcyA9IGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5z\ndGFuY2UoKTsKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIgPSAoQ2xhc3NM\nb2FkZXIpIEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgLmRvUHJpdmls\nZWdlZChKMkRvUHJpdkhlbHBlci5uZXdUZW1wb3JhcnlDbGFzc0xvYWRlckFj\ndGlvbigKICAgICAgICAgICAgICAgIGdldENsYXNzKCkuZ2V0Q2xhc3NMb2Fk\nZXIoKSkpOwogICAgICAgIFByb2plY3QgcHJvamVjdCA9IG5ldyBQcm9qZWN0\nKCk7CgogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBjbGFzcyBpcyBu\nb3QgYWxyZWFkeSBlbmhhbmNlZCBmb3Igc29tZSByZWFzb24KICAgICAgICBT\ndHJpbmcgY2xhc3NOYW1lID0KICAgICAgICAgICAgIm9yZy5hcGFjaGUub3Bl\nbmpwYS5lbmhhbmNlLlVuZW5oYW5jZWRCb290c3RyYXBJbnN0YW5jZSI7CiAg\nICAgICAgQkNDbGFzcyBiYyA9IGFzc2VydE5vdFBDKGxvYWRlciwgcHJvamVj\ndCwgY2xhc3NOYW1lKTsKCiAgICAgICAgLy8gYnVpbGQgdXAgYSB3cml0ZXIg\ndGhhdCBqdXN0IHN0b3JlcyB0byBhIGxpc3Qgc28gdGhhdCB3ZSBkb24ndAog\nICAgICAgIC8vIG11dGF0ZSB0aGUgZGlzay4KICAgICAgICBmaW5hbCBMaXN0\nPFN0cmluZz4gd3JpdHRlbiA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwog\nICAgICAgIEJ5dGVjb2RlV3JpdGVyIHdyaXRlciA9IG5ldyBCeXRlY29kZVdy\naXRlcigpIHsKCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHdyaXRlKEJDQ2xh\nc3MgdHlwZSkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAgICAg\nIGFzc2VydFRydWUoQXJyYXlzLmFzTGlzdCh0eXBlLmdldEludGVyZmFjZU5h\nbWVzKCkpLmNvbnRhaW5zKAogICAgICAgICAgICAgICAgICAgIFBlcnNpc3Rl\nbmNlQ2FwYWJsZS5jbGFzcy5nZXROYW1lKCkpKTsKICAgICAgICAgICAgICAg\nIHdyaXR0ZW4uYWRkKHR5cGUuZ2V0TmFtZSgpKTsKICAgICAgICAgICAgfQog\nICAgICAgIH07CgogICAgICAgIFBDRW5oYW5jZXIucnVuKGNvbmYsIG51bGws\nIG5ldyBQQ0VuaGFuY2VyLkZsYWdzKCksIHJlcG9zLCB3cml0ZXIsCiAgICAg\nICAgICAgIGxvYWRlcik7CgogICAgICAgIC8vIGVuc3VyZSB0aGF0IHdlIGRv\nbid0IGF0dGVtcHQgdG8gcHJvY2VzcyBjbGFzc2VzIGxpc3RlZCBpbiBvdGhl\nciBQVXMKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgd3JpdHRlbi5zaXplKCkp\nOwoKICAgICAgICAvLyBlbnN1cmUgdGhhdCB3ZSBkbyBwcm9jZXNzIHRoZSBj\nbGFzc2VzIGxpc3RlZCBpbiB0aGUgUFUKICAgICAgICBhc3NlcnRUcnVlKHdy\naXR0ZW4uY29udGFpbnMoY2xhc3NOYW1lKSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEVuaGFuY2VtZW50T2ZBbGxQVXNXaXRoaW5BUmVzb3VyY2Uo\nKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQ\nQUNvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBPcGVuSlBBQ29uZmlndXJhdGlv\nbkltcGwoKTsKICAgICAgICBPcHRpb25zIG9wdHMgPSBuZXcgT3B0aW9ucygp\nOwogICAgICAgIG9wdHMuc2V0UHJvcGVydHkoInAiLCAiTUVUQS1JTkYvcGVy\nc2lzdGVuY2UueG1sIik7CiAgICAgICAgQ29uZmlndXJhdGlvbnMucG9wdWxh\ndGVDb25maWd1cmF0aW9uKGNvbmYsIG9wdHMpOwogICAgICAgIE1ldGFEYXRh\nUmVwb3NpdG9yeSByZXBvcyA9IGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0b3J5\nSW5zdGFuY2UoKTsKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIgPSAoQ2xh\nc3NMb2FkZXIpIEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgLmRvUHJp\ndmlsZWdlZChKMkRvUHJpdkhlbHBlci5uZXdUZW1wb3JhcnlDbGFzc0xvYWRl\nckFjdGlvbigKICAgICAgICAgICAgICAgIGdldENsYXNzKCkuZ2V0Q2xhc3NM\nb2FkZXIoKSkpOwogICAgICAgIFByb2plY3QgcHJvamVjdCA9IG5ldyBQcm9q\nZWN0KCk7CgogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBjbGFzc2Vz\nIGlzIG5vdCBhbHJlYWR5IGVuaGFuY2VkIGZvciBzb21lIHJlYXNvbgogICAg\nICAgIGFzc2VydE5vdFBDKGxvYWRlciwgcHJvamVjdCwKICAgICAgICAgICAg\nIm9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlVuZW5oYW5jZWRCb290c3Ry\nYXBJbnN0YW5jZSIpOwogICAgICAgIGFzc2VydE5vdFBDKGxvYWRlciwgcHJv\namVjdCwKICAgICAgICAgICAgIm9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNl\nLlVuZW5oYW5jZWRCb290c3RyYXBJbnN0YW5jZTIiKTsKCiAgICAgICAgLy8g\nYnVpbGQgdXAgYSB3cml0ZXIgdGhhdCBqdXN0IHN0b3JlcyB0byBhIGxpc3Qg\nc28gdGhhdCB3ZSBkb24ndAogICAgICAgIC8vIG11dGF0ZSB0aGUgZGlzay4K\nICAgICAgICBmaW5hbCBMaXN0PFN0cmluZz4gd3JpdHRlbiA9IG5ldyBBcnJh\neUxpc3Q8U3RyaW5nPigpOwogICAgICAgIEJ5dGVjb2RlV3JpdGVyIHdyaXRl\nciA9IG5ldyBCeXRlY29kZVdyaXRlcigpIHsKCiAgICAgICAgICAgIHB1Ymxp\nYyB2b2lkIHdyaXRlKEJDQ2xhc3MgdHlwZSkgdGhyb3dzIElPRXhjZXB0aW9u\nIHsKICAgICAgICAgICAgICAgIGFzc2VydFRydWUoQXJyYXlzLmFzTGlzdCh0\neXBlLmdldEludGVyZmFjZU5hbWVzKCkpLmNvbnRhaW5zKAogICAgICAgICAg\nICAgICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJsZS5jbGFzcy5nZXROYW1lKCkp\nKTsKICAgICAgICAgICAgICAgIHdyaXR0ZW4uYWRkKHR5cGUuZ2V0TmFtZSgp\nKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9wdHMgPSBu\nZXcgT3B0aW9ucygpOwogICAgICAgIG9wdHMucHV0KFBDRW5oYW5jZXIuY2xh\nc3MuZ2V0TmFtZSgpICsgIiNieXRlY29kZVdyaXRlciIsIHdyaXRlcik7CiAg\nICAgICAgUENFbmhhbmNlci5ydW4obnVsbCwgb3B0cyk7CgogICAgICAgIC8v\nIGVuc3VyZSB0aGF0IHdlIGRvIHByb2Nlc3MgdGhlIGNsYXNzZXMgbGlzdGVk\nIGluIHRoZSBQVXMKICAgICAgICBhc3NlcnRUcnVlKHdyaXR0ZW4uY29udGFp\nbnMoCiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5V\nbmVuaGFuY2VkQm9vdHN0cmFwSW5zdGFuY2UiKSk7CiAgICAgICAgYXNzZXJ0\nVHJ1ZSh3cml0dGVuLmNvbnRhaW5zKAogICAgICAgICAgICAib3JnLmFwYWNo\nZS5vcGVuanBhLmVuaGFuY2UuVW5lbmhhbmNlZEJvb3RzdHJhcEluc3RhbmNl\nMiIpKTsKICAgIH0KfQo=\n","encoding":"base64"}

