{"sha":"01cab7f45ec4f508f2aa511549a4ad5b0b26f4a8","node_id":"MDQ6QmxvYjIwNjM2NDowMWNhYjdmNDVlYzRmNTA4ZjJhYTUxMTU0OWE0YWQ1YjBiMjZmNGE4","size":10447,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/01cab7f45ec4f508f2aa511549a4ad5b0b26f4a8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\nCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHM7\nCgppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKCmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuUXVlcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYu\nT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuZGF0YWNhY2hlLkRhdGFDYWNoZVBDRGF0YTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLk15U1FMRGljdGlv\nbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5PcmFj\nbGVEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc3FsLlBvc3RncmVzRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5TUUxTZXJ2ZXJEaWN0aW9uYXJ5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5KUEFGYWNhZGVIZWxwZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQ\nQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsKCi8qKgogKiBUaGlz\nIGFic3RyYWN0IGNsYXNzIGRlZmluZXMgYWxsIHRoZSB0ZXN0cyBmb3IgTE9C\nUy4KICoKICogQGF1dGhvciBJZ25hY2lvIEFuZHJldQogKiBAc2luY2UgMS4x\nLjAKICovCgpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RMb2JUZXN0\nIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoKICAgIHB1YmxpYyB2b2lk\nIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0\nVXAoZ2V0TG9iRW50aXR5Q2xhc3MoKSwgQ0xFQVJfVEFCTEVTLAogICAgICAg\nICAgICAib3BlbmpwYS5EYXRhQ2FjaGUiLCAidHJ1ZSIsCiAgICAgICAgICAg\nICJvcGVuanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVyIiwgInNqdm0iKTsKICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0RhdGFiYXNlU3VwcG9ydGVkKCkg\newogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gKChKREJDQ29uZmlndXJh\ndGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKSkKICAgICAgICAgICAgLmdl\ndERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgaWYgKGRpY3QgaW5z\ndGFuY2VvZiBNeVNRTERpY3Rpb25hcnkgfHwKICAgICAgICAgICAgZGljdCBp\nbnN0YW5jZW9mIFNRTFNlcnZlckRpY3Rpb25hcnkgfHwKICAgICAgICAgICAg\nZGljdCBpbnN0YW5jZW9mIE9yYWNsZURpY3Rpb25hcnkgfHwKICAgICAgICAg\nICAgZGljdCBpbnN0YW5jZW9mIFBvc3RncmVzRGljdGlvbmFyeSkgewogICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluc2VydChMb2JFbnRp\ndHkgbGUpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChsZSk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RJbnNlcnQoKSB7CiAgICAg\nICAgaWYgKCFpc0RhdGFiYXNlU3VwcG9ydGVkKCkpIHJldHVybjsKICAgICAg\nICBpbnNlcnQobmV3TG9iRW50aXR5KCJvT09PT09vIiwgMSkpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RJbnNlcnRBbmRTZWxlY3QoKSB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgICAgIGlmICghaXNEYXRhYmFzZVN1cHBvcnRl\nZCgpKSByZXR1cm47CiAgICAgICAgU3RyaW5nIHMgPSAib29vT09Pb29vIjsK\nICAgICAgICBpbnNlcnQobmV3TG9iRW50aXR5KHMsIDEpKTsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAg\nIFF1ZXJ5IHF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnkoZ2V0U2VsZWN0UXVlcnko\nKSk7CiAgICAgICAgTG9iRW50aXR5IGVudGl0eSA9IChMb2JFbnRpdHkpIHF1\nZXJ5LmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2VydE5vdE51bGwo\nZW50aXR5LmdldFN0cmVhbSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMocywg\nZ2V0U3RyZWFtQ29udGVudEFzU3RyaW5nKGVudGl0eS5nZXRTdHJlYW0oKSkp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW5z\nZXJ0TnVsbCgpIHsKICAgICAgICBpZiAoIWlzRGF0YWJhc2VTdXBwb3J0ZWQo\nKSkgcmV0dXJuOwogICAgICAgIGluc2VydChuZXdMb2JFbnRpdHkobnVsbCwg\nMSkpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBMb2JFbnRpdHkgbGUgPSAoTG9iRW50aXR5KSBlbS5m\naW5kKGdldExvYkVudGl0eUNsYXNzKCksIDEpOwogICAgICAgIGFzc2VydE51\nbGwobGUuZ2V0U3RyZWFtKCkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0VXBkYXRlKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICBpZiAoIWlzRGF0YWJhc2VTdXBwb3J0ZWQoKSkgcmV0dXJuOwog\nICAgICAgIGluc2VydChuZXdMb2JFbnRpdHkoIm9PT09PT28iLCAxKSk7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIExvYkVudGl0eSBlbnRpdHkgPSAoTG9iRW50aXR5KSBlbS5maW5k\nKGdldExvYkVudGl0eUNsYXNzKCksIDEpOwogICAgICAgIFN0cmluZyBzdHJp\nbmcgPSAiaUlJSUlJaSI7CiAgICAgICAgY2hhbmdlU3RyZWFtKGVudGl0eSwg\nc3RyaW5nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBlbnRpdHkgPSAoTG9iRW50aXR5KSBlbS5maW5k\nKGdldExvYkVudGl0eUNsYXNzKCksIDEpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhzdHJpbmcsIGdldFN0cmVhbUNvbnRlbnRBc1N0cmluZyhlbnRpdHkuZ2V0\nU3RyZWFtKCkpKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdFVwZGF0ZVdpdGhOdWxsKCkgewogICAgICAgIGlmICghaXNEYXRh\nYmFzZVN1cHBvcnRlZCgpKSByZXR1cm47CiAgICAgICAgaW5zZXJ0KG5ld0xv\nYkVudGl0eSgib09PT09PbyIsIDEpKTsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgTG9iRW50aXR5IGVu\ndGl0eSA9IChMb2JFbnRpdHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xhc3Mo\nKSwgMSk7CiAgICAgICAgZW50aXR5LnNldFN0cmVhbShudWxsKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBlbnRpdHkgPSAoTG9iRW50aXR5KSBlbS5maW5kKGdldExvYkVudGl0eUNs\nYXNzKCksIDEpOwogICAgICAgIGFzc2VydE51bGwoZW50aXR5LmdldFN0cmVh\nbSgpKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RVcGRhdGVBTnVsbE9iamVjdFdpdGhvdXROdWxsKCkgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIWlzRGF0YWJhc2VTdXBwb3J0ZWQo\nKSkgcmV0dXJuOwogICAgICAgIGluc2VydChuZXdMb2JFbnRpdHkobnVsbCwg\nMSkpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBMb2JFbnRpdHkgZW50aXR5ID0gKExvYkVudGl0eSkg\nZW0uZmluZChnZXRMb2JFbnRpdHlDbGFzcygpLCAxKTsKICAgICAgICBTdHJp\nbmcgc3RyaW5nID0gImlJSUlJSWkiOwogICAgICAgIGNoYW5nZVN0cmVhbShl\nbnRpdHksIHN0cmluZyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW50aXR5ID0gKExvYkVudGl0eSkg\nZW0uZmluZChnZXRMb2JFbnRpdHlDbGFzcygpLCAxKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoc3RyaW5nLCBnZXRTdHJlYW1Db250ZW50QXNTdHJpbmcoZW50\naXR5LmdldFN0cmVhbSgpKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlKCkgewogICAgICAgIGlmICghaXNE\nYXRhYmFzZVN1cHBvcnRlZCgpKSByZXR1cm47CiAgICAgICAgaW5zZXJ0KG5l\nd0xvYkVudGl0eSgib09PT09PbyIsIDEpKTsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgTG9iRW50aXR5\nIGVudGl0eSA9IChMb2JFbnRpdHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xh\nc3MoKSwgMSk7CiAgICAgICAgZW0ucmVtb3ZlKGVudGl0eSk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAg\nUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGdldFNlbGVjdFF1ZXJ5KCkpOwog\nICAgICAgIGFzc2VydEVxdWFscygwLCBxLmdldFJlc3VsdExpc3QoKS5zaXpl\nKCkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAg\nICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdExpZmVDeWNsZUluc2VydEZsdXNoTW9kaWZ5KCkgewogICAgICAgIGlm\nICghaXNEYXRhYmFzZVN1cHBvcnRlZCgpKSByZXR1cm47CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIExv\nYkVudGl0eSBsZSA9IG5ld0xvYkVudGl0eSgib09PT09PbyIsIDEpOwogICAg\nICAgIGVtLnBlcnNpc3QobGUpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAg\nICAgY2hhbmdlU3RyZWFtKGxlLCAiaUlJSUlJaSIpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0TGlmZUN5Y2xlTG9hZEZsdXNo\nTW9kaWZ5Rmx1c2goKSB7CiAgICAgICAgaWYgKCFpc0RhdGFiYXNlU3VwcG9y\ndGVkKCkpIHJldHVybjsKICAgICAgICBpbnNlcnQobmV3TG9iRW50aXR5KCJv\nT09PT09vIiwgMSkpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICBMb2JFbnRpdHkgZW50aXR5ID0gKExv\nYkVudGl0eSkgZW0uZmluZChnZXRMb2JFbnRpdHlDbGFzcygpLCAxKTsKICAg\nICAgICBlbS5mbHVzaCgpOwogICAgICAgIGNoYW5nZVN0cmVhbShlbnRpdHks\nICJpSUlJSUlpIik7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFJlYWRpbmdNdWx0aXBsZVRp\nbWVzV2l0aEFTaW5nbGVDb25uZWN0aW9uKCkKICAgICAgICB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgIGlmICghaXNEYXRhYmFzZVN1cHBvcnRlZCgp\nKSByZXR1cm47CiAgICAgICAgaW5zZXJ0KG5ld0xvYkVudGl0eSgib09PT09P\nbyIsIDEpKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CiAgICAgICAgTG9iRW50aXR5IGxlID0gKExvYkVudGl0eSkg\nZW0uZmluZChnZXRMb2JFbnRpdHlDbGFzcygpLCAxKTsKICAgICAgICBTdHJp\nbmcgc3RyaW5nID0gImlJSUlJSWkiOwogICAgICAgIGNoYW5nZVN0cmVhbShs\nZSwgc3RyaW5nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICBsZSA9IChMb2JFbnRpdHkpIGVtLmZpbmQo\nZ2V0TG9iRW50aXR5Q2xhc3MoKSwgMSk7CiAgICAgICAgYXNzZXJ0Tm90TnVs\nbChsZS5nZXRTdHJlYW0oKSk7CiAgICAgICAgTG9iRW50aXR5IGVudGl0eSA9\nIG5ld0xvYkVudGl0eSgib09PT09PbyIsIDIpOwogICAgICAgIGVtLnBlcnNp\nc3QoZW50aXR5KTsKICAgICAgICBhc3NlcnRFcXVhbHMoc3RyaW5nLCBnZXRT\ndHJlYW1Db250ZW50QXNTdHJpbmcobGUuZ2V0U3RyZWFtKCkpKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdERhdGFDYWNoZSgp\nIHsKICAgICAgICBpZiAoIWlzRGF0YWJhc2VTdXBwb3J0ZWQoKSkgcmV0dXJu\nOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIExvYkVudGl0eSBsZSA9IG5ld0xvYkVudGl0\neSgib09PT09PbyIsIDEpOwogICAgICAgIGVtLnBlcnNpc3QobGUpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgT3Bl\nbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IGVtZi5nZXRDb25maWd1cmF0aW9u\nKCk7CiAgICAgICAgT2JqZWN0IG8gPSBlbS5nZXRPYmplY3RJZChsZSk7CiAg\nICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gSlBBRmFjYWRlSGVscGVyLmdl\ndE1ldGFEYXRhKGxlKTsKICAgICAgICBPYmplY3Qgb2JqZWN0SWQgPSBKUEFG\nYWNhZGVIZWxwZXIudG9PcGVuSlBBT2JqZWN0SWQobWV0YSwgbyk7CiAgICAg\nICAgRGF0YUNhY2hlUENEYXRhIHBjZCA9CiAgICAgICAgICAgIGNvbmYuZ2V0\nRGF0YUNhY2hlTWFuYWdlckluc3RhbmNlKCkKICAgICAgICAgICAgICAgIC5n\nZXRTeXN0ZW1EYXRhQ2FjaGUoKS5nZXQob2JqZWN0SWQpOwogICAgICAgIGFz\nc2VydEZhbHNlKHBjZC5pc0xvYWRlZChtZXRhLmdldEZpZWxkKCJzdHJlYW0i\nKS5nZXRJbmRleCgpKSk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0U2V0UmVzZXRBbmRGbHVzaCgpIHRocm93cyBJ\nT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCFpc0RhdGFiYXNlU3VwcG9ydGVk\nKCkpIHJldHVybjsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgTG9iRW50aXR5IGxlID0gbmV3TG9iRW50\naXR5KCJvT09PT09vIiwgMSk7CiAgICAgICAgZW0ucGVyc2lzdChsZSk7CiAg\nICAgICAgY2hhbmdlU3RyZWFtKGxlLCAiaUlJSUlJaSIpOwogICAgICAgIGVt\nLmZsdXNoKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CiAgICAgICAgTG9iRW50aXR5IGVudGl0eSA9IChMb2JFbnRp\ndHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xhc3MoKSwgMSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJpSUlJSUlpIiwgZ2V0U3RyZWFtQ29udGVudEFzU3Ry\naW5nKGVudGl0eS5nZXRTdHJlYW0oKSkpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2V0Rmx1c2hBbmRSZXNldCgpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCFpc0RhdGFiYXNlU3VwcG9y\ndGVkKCkpIHJldHVybjsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgTG9iRW50aXR5IGxlID0gbmV3TG9i\nRW50aXR5KCJvT09PT09vIiwgMSk7CiAgICAgICAgZW0ucGVyc2lzdChsZSk7\nCiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBjaGFuZ2VTdHJlYW0obGUs\nICJpSUlJSUlpIik7CiAgICAgICAgTG9iRW50aXR5IGVudGl0eSA9IChMb2JF\nbnRpdHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xhc3MoKSwgMSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJpSUlJSUlpIiwgZ2V0U3RyZWFtQ29udGVudEFz\nU3RyaW5nKGVudGl0eS5nZXRTdHJlYW0oKSkpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgQ2xhc3MgZ2V0TG9iRW50aXR5\nQ2xhc3MoKTsKCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgU3RyaW5nIGdldFN0\ncmVhbUNvbnRlbnRBc1N0cmluZyhPYmplY3QgbykKICAgICAgICB0aHJvd3Mg\nSU9FeGNlcHRpb247CgogICAgcHJvdGVjdGVkIGFic3RyYWN0IExvYkVudGl0\neSBuZXdMb2JFbnRpdHkoU3RyaW5nIHMsIGludCBpZCk7CgogICAgcHJvdGVj\ndGVkIGFic3RyYWN0IExvYkVudGl0eSBuZXdMb2JFbnRpdHlGb3JMb2FkQ29u\ndGVudChTdHJpbmcgcywgaW50IGlkKTsKCiAgICBwcm90ZWN0ZWQgYWJzdHJh\nY3QgU3RyaW5nIGdldFNlbGVjdFF1ZXJ5KCk7CgogICAgcHJvdGVjdGVkIGFi\nc3RyYWN0IHZvaWQgY2hhbmdlU3RyZWFtKExvYkVudGl0eSBsZSwgU3RyaW5n\nIHMpOwp9Cg==\n","encoding":"base64"}

