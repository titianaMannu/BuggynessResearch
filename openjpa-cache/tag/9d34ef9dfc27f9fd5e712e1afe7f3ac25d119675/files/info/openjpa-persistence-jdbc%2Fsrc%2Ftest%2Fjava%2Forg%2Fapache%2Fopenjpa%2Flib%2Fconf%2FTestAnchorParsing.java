{"sha":"61f740e34c5140094d448a0df8e487a8441174bb","node_id":"MDQ6QmxvYjIwNjM2NDo2MWY3NDBlMzRjNTE0MDA5NGQ0NDhhMGRmOGU0ODdhODQ0MTE3NGJi","size":5249,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/61f740e34c5140094d448a0df8e487a8441174bb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZjsKCmltcG9ydCBqYXZh\nLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NaXNzaW5nUmVzb3VyY2VF\neGNlcHRpb247CmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlv\nLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1w\nb3J0IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8u\nT3V0cHV0U3RyZWFtOwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0Q2Fz\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5PcHRpb25z\nOwoKcHVibGljIGNsYXNzIFRlc3RBbmNob3JQYXJzaW5nIGV4dGVuZHMgVGVz\ndENhc2UgewoKICAgIHB1YmxpYyB2b2lkIHRlc3RGUUFuY2hvcigpIHsKICAg\nICAgICBTdHJpbmcgZnFMb2MgPSAiTUVUQS1JTkYvcGVyc2lzdGVuY2UueG1s\nI3Rlc3QiOwogICAgICAgIE9wdGlvbnMgb3B0cyA9IG5ldyBPcHRpb25zKCk7\nCiAgICAgICAgb3B0cy5zZXRQcm9wZXJ0eSgicCIsIGZxTG9jKTsKICAgICAg\nICBMaXN0IGxvY3MgPQogICAgICAgICAgICBDb25maWd1cmF0aW9ucy5nZXRG\ndWxseVF1YWxpZmllZEFuY2hvcnNJblByb3BlcnRpZXNMb2NhdGlvbihvcHRz\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGxvY3MpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBsb2NzLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKGZxTG9jLCBsb2NzLmdldCgwKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdE5vUmVzb3VyY2UoKSB7CiAgICAgICAgYWxsSGVscGVyKG51bGwpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3ROb0FuY2hvcigpIHsKICAgICAg\nICBhbGxIZWxwZXIoIk1FVEEtSU5GL3BlcnNpc3RlbmNlLnhtbCIpOwogICAg\nfQoKICAgIHByaXZhdGUgdm9pZCBhbGxIZWxwZXIoU3RyaW5nIHJlc291cmNl\nKSB7CiAgICAgICAgT3B0aW9ucyBvcHRzID0gbmV3IE9wdGlvbnMoKTsKICAg\nICAgICBpZiAocmVzb3VyY2UgIT0gbnVsbCkKICAgICAgICAgICAgb3B0cy5z\nZXRQcm9wZXJ0eSgicCIsIHJlc291cmNlKTsKICAgICAgICBMaXN0IGxvY3Mg\nPQogICAgICAgICAgICBDb25maWd1cmF0aW9ucy5nZXRGdWxseVF1YWxpZmll\nZEFuY2hvcnNJblByb3BlcnRpZXNMb2NhdGlvbihvcHRzKTsKICAgICAgICBh\nc3NlcnROb3ROdWxsKGxvY3MpOwogICAgICAgIC8vIGFwcHJveGltYXRlIHNv\nIHRoYXQgaWYgc29tZW9uZSBhZGRzIG1vcmUgdW5pdHMsIHRoaXMgZG9lc24n\ndCBicmVhawogICAgICAgIGFzc2VydFRydWUobG9jcy5zaXplKCkgPj0gNCk7\nCiAgICAgICAgYXNzZXJ0VHJ1ZShsb2NzLmNvbnRhaW5zKCJNRVRBLUlORi9w\nZXJzaXN0ZW5jZS54bWwjdGVzdCIpKTsKICAgICAgICBhc3NlcnRUcnVlKGxv\nY3MuY29udGFpbnMoCiAgICAgICAgICAgICJNRVRBLUlORi9wZXJzaXN0ZW5j\nZS54bWwjc2Vjb25kLXBlcnNpc3RlbmNlLXVuaXQiKSk7CiAgICAgICAgYXNz\nZXJ0VHJ1ZShsb2NzLmNvbnRhaW5zKAogICAgICAgICAgICAiTUVUQS1JTkYv\ncGVyc2lzdGVuY2UueG1sI3RoaXJkLXBlcnNpc3RlbmNlLXVuaXQiKSk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZShsb2NzLmNvbnRhaW5zKCJNRVRBLUlORi9wZXJz\naXN0ZW5jZS54bWwjaW52YWxpZCIpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0UHJvZHVjdERlcml2YXRpb25zTG9hZFJlc291cmNlKCkgewogICAg\nICAgIFByb2R1Y3REZXJpdmF0aW9ucy5sb2FkKAogICAgICAgICAgICAib3Jn\nL2FwYWNoZS9vcGVuanBhL2xpYi9jb25mL3Byb2R1Y3QtZGVyaXZhdGlvbnMt\nbG9hZC54bWwiLAogICAgICAgICAgICAiZm9vIiwgbnVsbCk7CgogICAgICAg\nIFByb2R1Y3REZXJpdmF0aW9ucy5sb2FkKAogICAgICAgICAgICAib3JnL2Fw\nYWNoZS9vcGVuanBhL2xpYi9jb25mL3Byb2R1Y3QtZGVyaXZhdGlvbnMtbG9h\nZC54bWwiLAogICAgICAgICAgICBudWxsLCBudWxsKTsKCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgUHJvZHVjdERlcml2YXRpb25zLmxvYWQoCiAgICAg\nICAgICAgICAgICAib3JnL2FwYWNoZS9vcGVuanBhL2xpYi9jb25mL3Byb2R1\nY3QtZGVyaXZhdGlvbnMtbG9hZC54bWwiLAogICAgICAgICAgICAgICAgIm5v\nbmV4aXN0YW50IiwgbnVsbCk7CiAgICAgICAgICAgIGZhaWwoInB1ICdub25l\neGlzdGFudCcgZG9lcyBub3QgZXhpc3QiKTsKICAgICAgICB9IGNhdGNoIChN\naXNzaW5nUmVzb3VyY2VFeGNlcHRpb24gbXJlKSB7CiAgICAgICAgICAgIC8v\nIGV4cGVjdGVkCiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAg\nICBQcm9kdWN0RGVyaXZhdGlvbnMubG9hZCgKICAgICAgICAgICAgICAgICJv\ncmcvYXBhY2hlL29wZW5qcGEvbGliL2NvbmYvcHJvZHVjdC1kZXJpdmF0aW9u\ncy1sb2FkLnhtbCIsCiAgICAgICAgICAgICAgICAiIiwgbnVsbCk7CiAgICAg\nICAgICAgIGZhaWwoInB1ICcnIGRvZXMgbm90IGV4aXN0Iik7CiAgICAgICAg\nfSBjYXRjaCAoTWlzc2luZ1Jlc291cmNlRXhjZXB0aW9uIG1yZSkgewogICAg\nICAgICAgICAvLyBleHBlY3RlZAogICAgICAgIH0KICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0ZXN0Tm9uZXhpc3RhbnRSZXNvdXJjZUxvYWQoKSB7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgUHJvZHVjdERlcml2YXRpb25zLmxvYWQo\nIm5vbmV4aXN0YW50LXJlc291cmNlIiwgbnVsbCwgbnVsbCk7CiAgICAgICAg\nICAgIGZhaWwoInJlc291cmNlICdub25leGlzdGFudC1yZXNvdXJjZScgc2hv\ndWxkIG5vdCBleGlzdCIpOwogICAgICAgIH0gY2F0Y2ggKE1pc3NpbmdSZXNv\ndXJjZUV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIGV4cGVjdGVkCiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcm9kdWN0RGVy\naXZhdGlvbnNMb2FkRmlsZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAg\nICAgRmlsZSB2YWxpZEZpbGUgPSByZXNvdXJjZVRvVGVtcG9yYXJ5RmlsZSgK\nICAgICAgICAgICAgIm9yZy9hcGFjaGUvb3BlbmpwYS9saWIvY29uZi9wcm9k\ndWN0LWRlcml2YXRpb25zLWxvYWQueG1sIik7CgogICAgICAgIFByb2R1Y3RE\nZXJpdmF0aW9ucy5sb2FkKHZhbGlkRmlsZSwgImZvbyIsIG51bGwpOwoKICAg\nICAgICBQcm9kdWN0RGVyaXZhdGlvbnMubG9hZCh2YWxpZEZpbGUsIG51bGws\nIG51bGwpOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBQcm9kdWN0RGVy\naXZhdGlvbnMubG9hZCh2YWxpZEZpbGUsICJub25leGlzdGFudCIsIG51bGwp\nOwogICAgICAgICAgICBmYWlsKCJwdSAnbm9uZXhpc3RhbnQnIGRvZXMgbm90\nIGV4aXN0Iik7CiAgICAgICAgfSBjYXRjaCAoTWlzc2luZ1Jlc291cmNlRXhj\nZXB0aW9uIG1yZSkgewogICAgICAgICAgICAvLyBleHBlY3RlZAogICAgICAg\nIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgUHJvZHVjdERlcml2YXRp\nb25zLmxvYWQodmFsaWRGaWxlLCAiIiwgbnVsbCk7CiAgICAgICAgICAgIGZh\naWwoInB1ICcnIGRvZXMgbm90IGV4aXN0Iik7CiAgICAgICAgfSBjYXRjaCAo\nTWlzc2luZ1Jlc291cmNlRXhjZXB0aW9uIG1yZSkgewogICAgICAgICAgICAv\nLyBleHBlY3RlZAogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0Tm9uZXhpc3RhbnRGaWxlTG9hZCgpIHsKICAgICAgICBGaWxlIGYgPSBu\nZXcgRmlsZSgidGhpcy1zaG91bGQtbm90LWV4aXN0Iik7CiAgICAgICAgYXNz\nZXJ0RmFsc2UoZi5leGlzdHMoKSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgUHJvZHVjdERlcml2YXRpb25zLmxvYWQoZiwgbnVsbCwgbnVsbCk7CiAg\nICAgICAgICAgIGZhaWwoZi5nZXROYW1lKCkgKyAiIGRvZXMgbm90IGV4aXN0\nIik7CiAgICAgICAgfSBjYXRjaCAoTWlzc2luZ1Jlc291cmNlRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgLy8gZXhwZWN0ZWQKICAgICAgICB9CiAgICB9\nCgogICAgcHJpdmF0ZSBGaWxlIHJlc291cmNlVG9UZW1wb3JhcnlGaWxlKFN0\ncmluZyBzKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIElucHV0U3Ry\nZWFtIGluID0gZ2V0Q2xhc3MoKS5nZXRDbGFzc0xvYWRlcigpLmdldFJlc291\ncmNlQXNTdHJlYW0ocyk7CiAgICAgICAgRmlsZSBmID0gRmlsZS5jcmVhdGVU\nZW1wRmlsZSgiVGVzdEFuY2hvclBhcnNpbmciLCAiLnhtbCIpOwogICAgICAg\nIE91dHB1dFN0cmVhbSBvdXQgPSBuZXcgRmlsZU91dHB1dFN0cmVhbShmKTsK\nICAgICAgICBieXRlW10gYnl0ZXMgPSBuZXcgYnl0ZVsxMDI0XTsKICAgICAg\nICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICBpbnQgY291bnQgPSBpbi5y\nZWFkKGJ5dGVzKTsKICAgICAgICAgICAgaWYgKGNvdW50IDwgMCkKICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBvdXQud3JpdGUoYnl0ZXMs\nIDAsIGNvdW50KTsKICAgICAgICB9CiAgICAgICAgZi5kZWxldGVPbkV4aXQo\nKTsKICAgICAgICByZXR1cm4gZjsKICAgIH0KfQo=\n","encoding":"base64"}

