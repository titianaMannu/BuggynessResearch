{"sha":"41acca647d76dc7bee81b89539bccd93052de9f3","node_id":"MDQ6QmxvYjIwNjM2NDo0MWFjY2E2NDdkNzZkYzdiZWU4MWI4OTUzOWJjY2Q5MzA1MmRlOWYz","size":7321,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/41acca647d76dc7bee81b89539bccd93052de9f3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3Rh\ndGlvbnM7CgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQganVuaXQu\nZnJhbWV3b3JrLio7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS4qOwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRp\nbHMuKjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5h\nbm5vdGF0aW9ucy5jb21tb24uYXBwcy5hbm5vdEFwcC5kZHR5cGUuKjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50\naXR5TWFuYWdlcjsKCnB1YmxpYyBjbGFzcyBUZXN0RERDYWxsYmFja01ldGhv\nZHMgZXh0ZW5kcyBBbm5vdGF0aW9uVGVzdENhc2UKewoKCXB1YmxpYyBUZXN0\nRERDYWxsYmFja01ldGhvZHMoU3RyaW5nIG5hbWUpCgl7CgkJc3VwZXIobmFt\nZSwgImRkY2FjdHVzYXBwIik7Cgl9CgoJcHVibGljIHZvaWQgc2V0VXAoKQoJ\newoJCWRlbGV0ZUFsbChMaWZlQ3ljbGVEREVudGl0eS5jbGFzcyk7CgkJZGVs\nZXRlQWxsKExpZmVDeWNsZURERW50aXR5Mi5jbGFzcyk7CgkJQ2FsbGJhY2tT\ndG9yYWdlLmNsZWFyU3RvcmUoKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0RERQ\ncnBQb3AoKQoJewoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CgkJc3Rh\ncnRUeChlbSk7CgoJCUxpZmVDeWNsZURERW50aXR5IGxjZCA9IG5ldyBMaWZl\nQ3ljbGVEREVudGl0eSgiYWZhbSIsICJva2VrZSIpOwoKCQllbS5wZXJzaXN0\nKGxjZCk7CgkJQ2FsbGJhY2tTdG9yYWdlIHN0b3JlID0gQ2FsbGJhY2tTdG9y\nYWdlLmdldEluc3RhbmNlKCk7CgoJCWFzc2VydE5vdE51bGwoc3RvcmUuZ2V0\nQ2xpc3QoKSk7CgkJYXNzZXJ0RXF1YWxzKDIsIHN0b3JlLmdldENsaXN0KCku\nc2l6ZSgpKTsKCQlhc3NlcnRFcXVhbHMoImRlZi1wcmVwZXJzaXN0Iiwgc3Rv\ncmUuZ2V0Q2xpc3QoKS5nZXQoMCkpOwoJCWFzc2VydEVxdWFscygiZGVmLXBv\nc3RwZXJzaXN0Iiwgc3RvcmUuZ2V0Q2xpc3QoKS5nZXQoMSkpOwoKCQllbmRU\neChlbSk7CgkJZW5kRW0oZW0pOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RERFBy\nclBvcigpCgl7CgkJT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPShPcGVuSlBB\nRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCQlzdGFy\ndFR4KGVtKTsKCgkJTGlmZUN5Y2xlRERFbnRpdHkgbGNkID0gbmV3IExpZmVD\neWNsZURERW50aXR5KCJqb2huIiwgInJhc2giKTsKCgkJZW0ucGVyc2lzdChs\nY2QpOwoJCWludCBpZCA9IGxjZC5nZXRJZCgpOwoKCQlsY2QgPSBlbS5maW5k\nKExpZmVDeWNsZURERW50aXR5LmNsYXNzLCBpZCk7CgoJCWFzc2VydE5vdE51\nbGwobGNkKTsKCQlDYWxsYmFja1N0b3JhZ2Ugc3RvcmUgPSBDYWxsYmFja1N0\nb3JhZ2UuZ2V0SW5zdGFuY2UoKTsKCQlzdG9yZS5jbGVhclN0b3JlKCk7CgoJ\nCWVtLnJlbW92ZShsY2QpOwoKCQlhc3NlcnROb3ROdWxsKHN0b3JlLmdldENs\naXN0KCkpOwoJCWFzc2VydEVxdWFscygyLCBzdG9yZS5nZXRDbGlzdCgpLnNp\nemUoKSk7CgkJYXNzZXJ0RXF1YWxzKCJkZWYtcHJlcmVtb3ZlIiwgc3RvcmUu\nZ2V0Q2xpc3QoKS5nZXQoMCkpOwoJCWFzc2VydEVxdWFscygiZGVmLXBvc3Ry\nZW1vdmUiLCBzdG9yZS5nZXRDbGlzdCgpLmdldCgxKSApOwoKCQllbmRUeChl\nbSk7CgkJZW5kRW0oZW0pOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RERFBvdVBy\ndSgpCgl7CgkJT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPShPcGVuSlBBRW50\naXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCQlzdGFydFR4\nKGVtKTsKCgkJTGlmZUN5Y2xlRERFbnRpdHkgbGNkID0gbmV3IExpZmVDeWNs\nZURERW50aXR5KCJEb24iLCAiU2hpZGRsZSIpOwoKCQllbS5wZXJzaXN0KGxj\nZCk7CgkJaW50IGlkID0gbGNkLmdldElkKCk7CgoJCUNhbGxiYWNrU3RvcmFn\nZS5jbGVhclN0b3JlKCk7CgoJCVN0cmluZyBxdWVyeSA9ICJVcGRhdGUgTGlm\nZUN5Y2xlRERFbnRpdHkgZSBTRVQgZS5uYW1lID0gJ0pvc2VwaCcgV0hFUkUg\nZS5pZCA9IDppZCI7CgoJCWludCByZXN1bHQgPSBlbS5jcmVhdGVRdWVyeShx\ndWVyeSkKCQkgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJpZCIsIGlk\nKQoJCSAgICAgICAgICAgICAgIC5leGVjdXRlVXBkYXRlKCk7CgoJCUxpc3Qg\nc3RvcmUgPSBDYWxsYmFja1N0b3JhZ2UuZ2V0SW5zdGFuY2UoKS5nZXRDbGlz\ndCgpOwoKCQlhc3NlcnROb3ROdWxsKHJlc3VsdCk7CgkJYXNzZXJ0RXF1YWxz\nKDEsIHJlc3VsdCk7CgkJYXNzZXJ0Tm90TnVsbChzdG9yZSk7CgkJYXNzZXJ0\nRXF1YWxzKDIsIHN0b3JlLnNpemUoKSk7CgkJYXNzZXJ0RXF1YWxzKCJkZWYt\ncHJldXBkYXRlIiwgc3RvcmUuZ2V0KDApKTsKCQlhc3NlcnRFcXVhbHMoImRl\nZi1wb3N0dXBkYXRlIiwgc3RvcmUuZ2V0KDEpKTsKCgkJZW5kVHgoZW0pOwoJ\nCWVuZEVtKGVtKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0RERQb2woKQoJewoJ\nCU9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3BlbkpQQUVudGl0eU1hbmFn\nZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CgkJc3RhcnRUeChlbSk7CgoJ\nCUxpZmVDeWNsZURERW50aXR5IGxjZCA9IG5ldyBMaWZlQ3ljbGVEREVudGl0\neSgiSnVsaWUiLCAiSm9saWUiKTsKCgkJZW0ucGVyc2lzdChsY2QpOwoJCWlu\ndCBpZCA9IGxjZC5nZXRJZCgpOwoKICAgICAgICBDYWxsYmFja1N0b3JhZ2Uu\nY2xlYXJTdG9yZSgpOwoKCQllbmRUeChlbSk7CgoJCXN0YXJ0VHgoZW0pOwoJ\nCUNhbGxiYWNrU3RvcmFnZS5jbGVhclN0b3JlKCk7CgoJCWFzc2VydFRydWUo\nQ2FsbGJhY2tTdG9yYWdlLmdldEluc3RhbmNlKCkuZ2V0Q2xpc3QoKS5pc0Vt\ncHR5KCkpOwoKCQlsY2QgPSBlbS5maW5kKExpZmVDeWNsZURERW50aXR5LmNs\nYXNzLCBpZCk7CgkJZW0ucmVmcmVzaChsY2QpOwoKCQlhc3NlcnROb3ROdWxs\nKGxjZCk7CgkJYXNzZXJ0Tm90TnVsbChDYWxsYmFja1N0b3JhZ2UuZ2V0SW5z\ndGFuY2UoKS5nZXRDbGlzdCgpKTsKCQlhc3NlcnRFcXVhbHMoMiwgQ2FsbGJh\nY2tTdG9yYWdlLmdldEluc3RhbmNlKCkuZ2V0Q2xpc3QoKS5zaXplKCkpOwoJ\nCWFzc2VydEVxdWFscygiZGVmLXBvc3Rsb2FkIiwgQ2FsbGJhY2tTdG9yYWdl\nLmdldEluc3RhbmNlKCkuZ2V0Q2xpc3QoKS5nZXQoMCkpOwoJCWFzc2VydEVx\ndWFscygiZGVmLXBvc3Rsb2FkIiwgQ2FsbGJhY2tTdG9yYWdlLmdldEluc3Rh\nbmNlKCkuZ2V0Q2xpc3QoKS5nZXQoMSkpOwoKCQllbmRUeChlbSk7CgkJZW5k\nRW0oZW0pOwoKCX0KCgkvKiogIERFRkFVTFQgTElTVEVORVIgREQgVEVTVElO\nRyAqKi8KCglwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdFByZVBvc3RQZXJzaXN0\nTGlzdGVuZXIoKQoJewoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CgkJ\nc3RhcnRUeChlbSk7CgoJCUxpZmVDeWNsZURERW50aXR5MiBsYyA9IG5ldyBM\naWZlQ3ljbGVEREVudGl0eTIoIkJpbGwiLCAiQ2xpbnRvbiIpOwoKCQlDYWxs\nYmFja1N0b3JhZ2Ugc3RvcmUgPSBDYWxsYmFja1N0b3JhZ2UuZ2V0SW5zdGFu\nY2UoKTsKCQlzdG9yZS5jbGVhclN0b3JlKCk7CgoJCWVtLnBlcnNpc3QobGMp\nOwoKCQlhc3NlcnRFcXVhbHMoNCwgc3RvcmUuZ2V0Q2xpc3QoKS5zaXplKCkp\nOwoJCWFzc2VydEVxdWFscygiZGVmLXByZXBlcnNpc3QiLCBzdG9yZS5nZXRD\nbGlzdCgpLmdldCgwKSk7CgkJYXNzZXJ0RXF1YWxzKCJ2ZXJpZnlwcnAiLCBz\ndG9yZS5nZXRDbGlzdCgpLmdldCgxKSk7CgkJYXNzZXJ0RXF1YWxzKCJkZWYt\ncG9zdHBlcnNpc3QiLCBzdG9yZS5nZXRDbGlzdCgpLmdldCgyKSk7CgkJYXNz\nZXJ0RXF1YWxzKCJ2ZXJpZnlwb3AiLCBzdG9yZS5nZXRDbGlzdCgpLmdldCgz\nKSk7CgoJCWVuZFR4KGVtKTsKCQllbmRFbShlbSk7Cgl9CgogICAgLy9GSVgt\nTUUgRGVmYXVsdC1FbnRpdHktbGlzdGVuZXIgSW1wbC4gaXMgb3ZlciBmaXJp\nbmcKCXB1YmxpYyB2b2lkIHRlc3REZWZhdWx0UHJlUG9zdFVwZGF0ZUxpc3Rl\nbmVyKCkKCXsKCQlPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9KE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwoJCXN0YXJ0\nVHgoZW0pOwoKCQlMaWZlQ3ljbGVEREVudGl0eTIgZW1wID0gbmV3IExpZmVD\neWNsZURERW50aXR5MigibGluY29sbiIsICJBYnJhaGFtIik7CgoJCWVtLnBl\ncnNpc3QoZW1wKTsKCgkJaW50IGlkID0gZW1wLmdldElkKCk7CgoJCUNhbGxi\nYWNrU3RvcmFnZS5jbGVhclN0b3JlKCk7CgoJCVN0cmluZyBxdWVyeSA9ICJV\ncGRhdGUgTGlmZUN5Y2xlRERFbnRpdHkyIGUgU0VUIGUubmFtZSA9ICdKb3Nl\ncGgnIFdIRVJFIGUuaWQgPSA6aWQiOwoKCQlpbnQgcmVzdWx0ID0gZW0uY3Jl\nYXRlUXVlcnkocXVlcnkpCgkJICAgICAgICAgICAgICAgLnNldFBhcmFtZXRl\ncigiaWQiLCBpZCkKCQkgICAgICAgICAgICAgICAuZXhlY3V0ZVVwZGF0ZSgp\nOwoKCQlMaXN0IHN0b3JlID0gQ2FsbGJhY2tTdG9yYWdlLmdldEluc3RhbmNl\nKCkuZ2V0Q2xpc3QoKTsKCgkJYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwoJCWFz\nc2VydEVxdWFscygxLCByZXN1bHQpOwoJCWFzc2VydE5vdE51bGwoc3RvcmUp\nOwoJCWFzc2VydEVxdWFscygyLCBzdG9yZS5zaXplKCkpOwoJCWFzc2VydEVx\ndWFscygiZGVmLXByZXVwZGF0ZSIsIHN0b3JlLmdldCgwKSk7CgkJYXNzZXJ0\nRXF1YWxzKCJkZWYtcG9zdHVwZGF0ZSIsIHN0b3JlLmdldCgxKSk7Ci8vCQlh\nc3NlcnRFcXVhbHMoImRlZi1wb3N0dXBkYXRlIiwgc3RvcmUuZ2V0KDIpKTsK\nLy8JCWFzc2VydEVxdWFscygiZGVmLXBvc3R1cGRhdGUiLCBzdG9yZS5nZXQo\nMykpOwoKCQllbmRUeChlbSk7CgkJZW5kRW0oZW0pOwoJfQoKCS8vRklYLU1F\nIERlZmF1bHQtRW50aXR5LWxpc3RlbmVyIEltcGwuIGlzIG92ZXIgZmlyaW5n\nCglwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdFBvc3RMb2FkTGlzdGVuZXIoKQoJ\newoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3BlbkpQQUVudGl0eU1h\nbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CgkJc3RhcnRUeChlbSk7\nCgoJCUxpZmVDeWNsZURERW50aXR5MiBlbXAgPSBuZXcgTGlmZUN5Y2xlRERF\nbnRpdHkyKCJUaG9tYXMiLCAiSmVmZmVyc29uIik7CgoJCWVtLnBlcnNpc3Qo\nZW1wKTsKCQlpbnQgaWQgPSBlbXAuZ2V0SWQoKTsKCQlDYWxsYmFja1N0b3Jh\nZ2UuY2xlYXJTdG9yZSgpOwoKCQllbmRUeChlbSk7CgoJCXN0YXJ0VHgoZW0p\nOwoJCUNhbGxiYWNrU3RvcmFnZS5jbGVhclN0b3JlKCk7CgoJCWFzc2VydFRy\ndWUoIm5vdCBlbXB0eS4uLiIsIENhbGxiYWNrU3RvcmFnZS5pc0VtcHR5KCkp\nOwoKCQllbXAgPSBlbS5maW5kKExpZmVDeWNsZURERW50aXR5Mi5jbGFzcywg\naWQpOwoJCWVtLnJlZnJlc2goZW1wKTsKCgkJYXNzZXJ0Tm90TnVsbChlbXAp\nOwoJCWFzc2VydE5vdE51bGwoQ2FsbGJhY2tTdG9yYWdlLmdldEluc3RhbmNl\nKCkuZ2V0Q2xpc3QoKSk7CgkJYXNzZXJ0RXF1YWxzKDIsIENhbGxiYWNrU3Rv\ncmFnZS5nZXRJbnN0YW5jZSgpLmdldENsaXN0KCkuc2l6ZSgpKTsKCQlhc3Nl\ncnRFcXVhbHMoImRlZi1wb3N0bG9hZCIsIENhbGxiYWNrU3RvcmFnZS5nZXRJ\nbnN0YW5jZSgpLmdldENsaXN0KCkuZ2V0KDApKTsKCQlhc3NlcnRFcXVhbHMo\nImRlZi1wb3N0bG9hZCIsIENhbGxiYWNrU3RvcmFnZS5nZXRJbnN0YW5jZSgp\nLmdldENsaXN0KCkuZ2V0KDEpKTsKCgkJZW5kVHgoZW0pOwoJCWVuZEVtKGVt\nKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0U3ViQ2xhc3NPdmVycmlkZVN1cGVy\nQ2FsbGJhY2tzSW5oKCkKCXsKCQlPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigp\nOwoJCXN0YXJ0VHgoZW0pOwoKCQlMaWZlQ3ljbGVEREVudGl0eTIgZW1wID0g\nbmV3IExpZmVDeWNsZURERW50aXR5MigiVGhvbWFzIiwgIkplZmZlcnNvbiIp\nOwoKCQllbS5wZXJzaXN0KGVtcCk7CgoJCWFzc2VydE5vdE51bGwoZW1wKTsK\nCQlhc3NlcnROb3ROdWxsKENhbGxiYWNrU3RvcmFnZS5nZXRJbnN0YW5jZSgp\nLmdldENsaXN0KCkpOwoJCWFzc2VydEVxdWFscyg0LCBDYWxsYmFja1N0b3Jh\nZ2UuZ2V0SW5zdGFuY2UoKS5nZXRDbGlzdCgpLnNpemUoKSk7CgkJYXNzZXJ0\nRXF1YWxzKCJkZWYtcHJlcGVyc2lzdCIsIENhbGxiYWNrU3RvcmFnZS5nZXRJ\nbnN0YW5jZSgpLmdldENsaXN0KCkuZ2V0KDApKTsKCQlhc3NlcnRFcXVhbHMo\nInZlcmlmeXBycCIsIENhbGxiYWNrU3RvcmFnZS5nZXRJbnN0YW5jZSgpLmdl\ndENsaXN0KCkuZ2V0KDEpKTsKCQlhc3NlcnRFcXVhbHMoImRlZi1wb3N0cGVy\nc2lzdCIsIENhbGxiYWNrU3RvcmFnZS5nZXRJbnN0YW5jZSgpLmdldENsaXN0\nKCkuZ2V0KDIpKTsKCQlhc3NlcnRFcXVhbHMoInZlcmlmeXBvcCIsIENhbGxi\nYWNrU3RvcmFnZS5nZXRJbnN0YW5jZSgpLmdldENsaXN0KCkuZ2V0KDMpKTsK\nCgkJZW5kVHgoZW0pOwoJCWVuZEVtKGVtKTsKCX0KfQ==\n","encoding":"base64"}

