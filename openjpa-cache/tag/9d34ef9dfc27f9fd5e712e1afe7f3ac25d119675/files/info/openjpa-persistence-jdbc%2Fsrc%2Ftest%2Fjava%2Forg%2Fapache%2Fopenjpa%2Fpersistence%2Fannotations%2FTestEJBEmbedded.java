{"sha":"98b6176f22261466a72ecd7c26e0638e661e34bd","node_id":"MDQ6QmxvYjIwNjM2NDo5OGI2MTc2ZjIyMjYxNDY2YTcyZWNkN2MyNmUwNjM4ZTY2MWUzNGJk","size":4777,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/98b6176f22261466a72ecd7c26e0638e661e34bd","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3Rh\ndGlvbnM7CgppbXBvcnQgamF2YS5zcWwuKjsKCmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS4qOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNv\nbmYuKjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuKjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzLio7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuKjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5\nTWFuYWdlcjsKCi8vaW1wb3J0IGtvZG8ucGVyc2lzdGVuY2UudGVzdC4qOwoK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5hbm5vdGF0\naW9ucy5jb21tb24uYXBwcy5hbm5vdEFwcC5hbm5vdHlwZS4qOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy4q\nOwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay4qOwoKLyoqCiAqIFRlc3QgZm9y\nIGVtYmVkZGVkCiAqCiAqIEBhdXRob3IgU3RldmUgS2ltCiAqLwpwdWJsaWMg\nY2xhc3MgVGVzdEVKQkVtYmVkZGVkIGV4dGVuZHMgQW5ub3RhdGlvblRlc3RD\nYXNlCnsKCglwdWJsaWMgVGVzdEVKQkVtYmVkZGVkKFN0cmluZyBuYW1lKQoJ\newoJCXN1cGVyKG5hbWUsICJhbm5vdGF0aW9uY2FjdHVzYXBwIik7Cgl9Cgog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIENMT0I7CgogICAgc3Rh\ndGljIHsKICAgICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1\nZmZlcigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTAwMDsgaSsr\nKQogICAgICAgICAgICBidWYuYXBwZW5kKCdhJyk7CiAgICAgICAgQ0xPQiA9\nIGJ1Zi50b1N0cmluZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVw\nKCkKICAgIHsKICAgICAgICBkZWxldGVBbGwgKEVtYmVkT3duZXIuY2xhc3Mp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbWJlZGRlZCgpCiAgICB7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPShPcGVuSlBBRW50\naXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBz\ndGFydFR4KGVtKTsKICAgICAgICBFbWJlZE93bmVyIG93bmVyID0gbmV3IEVt\nYmVkT3duZXIoKTsKICAgICAgICBvd25lci5zZXRCYXNpYygiZm9vIik7CiAg\nICAgICAgRW1iZWRWYWx1ZSBlbWJlZCA9IG5ldyBFbWJlZFZhbHVlKCk7CiAg\nICAgICAgZW1iZWQuc2V0Q2xvYihDTE9CKTsKICAgICAgICBlbWJlZC5zZXRC\nYXNpYygiYmFyIik7CiAgICAgICAgZW1iZWQuc2V0QmxvYigiZm9vYmFyIi5n\nZXRCeXRlcygpKTsKICAgICAgICBlbWJlZC5zZXRPd25lcihvd25lcik7CiAg\nICAgICAgb3duZXIuc2V0RW1iZWQoZW1iZWQpOwogICAgICAgIGVtLnBlcnNp\nc3Qob3duZXIpOwogICAgICAgIGludCBwayA9IG93bmVyLmdldFBrKCk7CiAg\nICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAg\nZW0gPShPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBvd25lciA9IGVtLmZpbmQoRW1iZWRPd25lci5jbGFz\ncywgcGspOwogICAgICAgIGFzc2VydEVxdWFscygiZm9vIiwgb3duZXIuZ2V0\nQmFzaWMoKSk7CiAgICAgICAgZW1iZWQgPSBvd25lci5nZXRFbWJlZCgpOwog\nICAgICAgIGFzc2VydE5vdE51bGwoZW1iZWQpOwogICAgICAgIGFzc2VydEVx\ndWFscyhDTE9CLCBlbWJlZC5nZXRDbG9iKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscygiYmFyIiwgZW1iZWQuZ2V0QmFzaWMoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJmb29iYXIiLCBuZXcgU3RyaW5nKGVtYmVkLmdldEJsb2IoKSkp\nOwogICAgICAgIGFzc2VydEVxdWFscyhvd25lciwgZW1iZWQuZ2V0T3duZXIo\nKSk7CiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3ROdWxsKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVt\nID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgRW1iZWRPd25lciBv\nd25lciA9IG5ldyBFbWJlZE93bmVyKCk7CiAgICAgICAgb3duZXIuc2V0QmFz\naWMoImZvbyIpOwogICAgICAgIGVtLnBlcnNpc3Qob3duZXIpOwogICAgICAg\nIGludCBwayA9IG93bmVyLmdldFBrKCk7CiAgICAgICAgZW5kVHgoZW0pOwog\nICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgZW0gPShPcGVuSlBBRW50aXR5\nTWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBvd25l\nciA9IGVtLmZpbmQoRW1iZWRPd25lci5jbGFzcywgcGspOwogICAgICAgIGFz\nc2VydEVxdWFscygiZm9vIiwgb3duZXIuZ2V0QmFzaWMoKSk7CiAgICAgICAg\nRW1iZWRWYWx1ZSBlbWJlZCA9IG93bmVyLmdldEVtYmVkKCk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChlbWJlZCk7CiAgICAgICAgYXNzZXJ0TnVsbChlbWJl\nZC5nZXRDbG9iKCkpOwogICAgICAgIGFzc2VydE51bGwoZW1iZWQuZ2V0QmFz\naWMoKSk7CiAgICAgICAgYXNzZXJ0TnVsbChlbWJlZC5nZXRCbG9iKCkpOwog\nICAgICAgIHN0YXJ0VHgoZW0pOwogICAgfQoKLy8gICAgcHVibGljIHZvaWQg\ndGVzdE1hcHBpbmdUcmFuc2ZlckFuZE92ZXJyaWRlKCkgewovLyAgICAgICAg\nSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IChKREJDQ29uZmlndXJhdGlvbikg\nZ2V0Q29uZmlndXJhdGlvbigpOwovLyAgICAgICAgQ2xhc3NNYXBwaW5nIGNs\ncyA9IGNvbmYuZ2V0TWFwcGluZ1JlcG9zaXRvcnlJbnN0YW5jZSgpLmdldE1h\ncHBpbmcKLy8gICAgICAgICAgICAoRW1iZWRPd25lci5jbGFzcywgbnVsbCwg\ndHJ1ZSk7Ci8vICAgICAgICBhc3NlcnRFcXVhbHMoIk9XTl9CQVNJQyIsIGNs\ncy5nZXRGaWVsZE1hcHBpbmcoImJhc2ljIikuCi8vICAgICAgICAgICAgZ2V0\nQ29sdW1ucygpWzBdLmdldE5hbWUoKSk7Ci8vICAgICAgICBDbGFzc01hcHBp\nbmcgZW1iZWQgPSBjbHMuZ2V0RmllbGRNYXBwaW5nKCJlbWJlZCIpLmN1cnJl\nbnRFbnRpdHlNYW5hZ2VyKCliZWRkZWRNYXBwaW5nKCk7Ci8vICAgICAgICBh\nc3NlcnRFcXVhbHMoIkVNQl9CTE9CIiwgZW1iZWQuZ2V0RmllbGRNYXBwaW5n\nKCJibG9iIikuCi8vICAgICAgICAgICAgZ2V0Q29sdW1ucygpWzBdLmdldE5h\nbWUoKSk7Ci8vICAgICAgICBhc3NlcnRFcXVhbHMoIk9WRVJfQkFTSUMiLCBl\nbWJlZC5nZXRGaWVsZE1hcHBpbmcoImJhc2ljIikuCi8vICAgICAgICAgICAg\nZ2V0Q29sdW1ucygpWzBdLmdldE5hbWUoKSk7Ci8vICAgICAgICBhc3NlcnRF\ncXVhbHMoIk9WRVJfT1dORVIiLCBlbWJlZC5nZXRGaWVsZE1hcHBpbmcoIm93\nbmVyIikuCi8vICAgICAgICAgICAgZ2V0Q29sdW1ucygpWzBdLmdldE5hbWUo\nKSk7Ci8vCi8vICAgICAgICBGaWVsZE1hcHBpbmcgZm0gPSBlbWJlZC5nZXRG\naWVsZE1hcHBpbmcoImNsb2IiKTsKLy8gICAgICAgIERCRGljdGlvbmFyeSBk\naWN0ID0gY29uZi5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpOwovLyAgICAg\nICAgaWYgKGRpY3QuZ2V0UHJlZmVycmVkVHlwZShUeXBlcy5DTE9CKSA9PSBU\neXBlcy5DTE9CKSB7Ci8vICAgICAgICAgICAgaWYgKGRpY3QubWF4RW1iZWRk\nZWRDbG9iU2l6ZSA+IDApCi8vICAgICAgICAgICAgICAgIGFzc2VydFRydWUo\nZm0uZ2V0U3RyYXRlZ3koKSBpbnN0YW5jZW9mCi8vICAgICAgICAgICAgICAg\nICAgICBNYXhFbWJlZGRlZENsb2JGaWVsZFN0cmF0ZWd5KTsKLy8gICAgICAg\nICAgICBlbHNlCi8vICAgICAgICAgICAgICAgIGFzc2VydFRydWUoZm0uZ2V0\nSGFuZGxlcigpIGluc3RhbmNlb2YgQ2xvYlZhbHVlSGFuZGxlcik7Ci8vICAg\nICAgICB9IGVsc2UKLy8gICAgICAgICAgICBhc3NlcnRUcnVlKGZtLmdldFN0\ncmF0ZWd5KCkgaW5zdGFuY2VvZiBTdHJpbmdGaWVsZFN0cmF0ZWd5KTsKLy8g\nICAgfQp9Cg==\n","encoding":"base64"}

