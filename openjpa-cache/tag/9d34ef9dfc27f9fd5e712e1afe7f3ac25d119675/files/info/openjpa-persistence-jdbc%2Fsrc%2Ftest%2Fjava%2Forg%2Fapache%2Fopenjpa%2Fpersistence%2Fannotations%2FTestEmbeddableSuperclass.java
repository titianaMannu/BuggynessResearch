{"sha":"a373c898c81d2ffbf7bc9b77b72bcca5136ae7af","node_id":"MDQ6QmxvYjIwNjM2NDphMzczYzg5OGM4MWQyZmZiZjdiYzliNzdiNzJiY2NhNTEzNmFlN2Fm","size":5330,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a373c898c81d2ffbf7bc9b77b72bcca5136ae7af","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3Rh\ndGlvbnM7CgppbXBvcnQgamF2YS5zcWwuKjsKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5jb25mLio7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5tZXRhLio7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLnN0cmF0cy4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLio7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS4qOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyOwoKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuYW5ub3RhdGlvbnMuY29tbW9uLmFwcHMuYW5ub3RBcHAuYW5u\nb3R5cGUuKjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5jb21tb24udXRpbHMuKjsKCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuKjsK\nCi8qKgogKiA8cD5UZXN0IGVtYmVkZGFibGUgc3VwZXJjbGFzc2VzLjwvcD4K\nICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBUZXN0\nRW1iZWRkYWJsZVN1cGVyY2xhc3MgZXh0ZW5kcyBBbm5vdGF0aW9uVGVzdENh\nc2UKewoKCXB1YmxpYyBUZXN0RW1iZWRkYWJsZVN1cGVyY2xhc3MoU3RyaW5n\nIG5hbWUpCgl7CgkJc3VwZXIobmFtZSwgImFubm90YXRpb25jYWN0dXNhcHAi\nKTsKCX0KCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBkZWxl\ndGVBbGwoRW1iZWRkYWJsZVN1cGVyU3ViLmNsYXNzKTsKICAgIH0KCiAgICAv\nKnB1YmxpYyB2b2lkIHRlc3RTdXBlcmNsYXNzRW1iZWRkZWRPbmx5KCkgewog\nICAgICAgIENsYXNzTWFwcGluZyBjbHMgPSAoKEpEQkNDb25maWd1cmF0aW9u\nKSBnZXRDb25maWd1cmF0aW9uKCkpLgogICAgICAgICAgICBnZXRNYXBwaW5n\nUmVwb3NpdG9yeUluc3RhbmNlKCkuZ2V0TWFwcGluZyhFbWJlZGRhYmxlU3Vw\nZXIuY2xhc3MsCiAgICAgICAgICAgIG51bGwsIHRydWUpOwogICAgICAgIGFz\nc2VydFRydWUoY2xzLmlzRW1iZWRkZWRPbmx5KCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhOb25lQ2xhc3NTdHJhdGVneS5nZXRJbnN0YW5jZSgpLCBjbHMu\nZ2V0U3RyYXRlZ3koKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFN1\nYmNsYXNzTWFwcGluZ0RlZmF1bHRzQW5kT3ZlcnJpZGVzKCkgewogICAgICAg\nIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24p\nIGdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBDbGFzc01hcHBpbmcgY2xz\nID0gY29uZi5nZXRNYXBwaW5nUmVwb3NpdG9yeUluc3RhbmNlKCkuCiAgICAg\nICAgICAgIGdldE1hcHBpbmcoRW1iZWRkYWJsZVN1cGVyU3ViLmNsYXNzLCBu\ndWxsLCB0cnVlKTsKICAgICAgICBhc3NlcnRUcnVlKCFjbHMuaXNFbWJlZGRl\nZE9ubHkoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShjbHMuZ2V0U3RyYXRlZ3ko\nKSBpbnN0YW5jZW9mIEZ1bGxDbGFzc1N0cmF0ZWd5KTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoQ2xhc3NNYXBwaW5nLklEX0FQUExJQ0FUSU9OLCBjbHMuZ2V0\nSWRlbnRpdHlUeXBlKCkpOwogICAgICAgIGFzc2VydFRydWUoY2xzLmlzT3Bl\nbkpQQUlkZW50aXR5KCkpOwoKICAgICAgICBGaWVsZE1hcHBpbmcgZm0gPSBj\nbHMuZ2V0RmllbGRNYXBwaW5nKCJwayIpOwogICAgICAgIGFzc2VydFRydWUo\nZm0uaXNQcmltYXJ5S2V5KCkpOwogICAgICAgIGFzc2VydEVxdWFscyhWYWx1\nZVN0cmF0ZWdpZXMuU0VRVUVOQ0UsIGZtLmdldFZhbHVlU3RyYXRlZ3koKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJJRCIsIGZtLmdldENvbHVtbnMoKVsw\nXS5nZXROYW1lKCkpOwoKICAgICAgICBhc3NlcnROdWxsKGNscy5nZXRGaWVs\nZCgidHJhbnMiKSk7CgogICAgICAgIGZtID0gY2xzLmdldEZpZWxkTWFwcGlu\nZygiY2xvYiIpOwogICAgICAgIGFzc2VydEVxdWFscygiQ0MiLCBmbS5nZXRD\nb2x1bW5zKClbMF0uZ2V0TmFtZSgpKTsKICAgICAgICBEQkRpY3Rpb25hcnkg\nZGljdCA9IGNvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsKICAgICAg\nICBpZiAoZGljdC5nZXRQcmVmZXJyZWRUeXBlKFR5cGVzLkNMT0IpID09IFR5\ncGVzLkNMT0IpIHsKICAgICAgICAgICAgaWYgKGRpY3QubWF4RW1iZWRkZWRD\nbG9iU2l6ZSA+IDApCiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKGZtLmdl\ndFN0cmF0ZWd5KCkgaW5zdGFuY2VvZgogICAgICAgICAgICAgICAgICAgIE1h\neEVtYmVkZGVkQ2xvYkZpZWxkU3RyYXRlZ3kpOwogICAgICAgICAgICBlbHNl\nCiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKGZtLmdldEhhbmRsZXIoKSBp\nbnN0YW5jZW9mIENsb2JWYWx1ZUhhbmRsZXIpOwogICAgICAgIH0gZWxzZQog\nICAgICAgICAgICBhc3NlcnRUcnVlKGZtLmdldFN0cmF0ZWd5KCkgaW5zdGFu\nY2VvZiBTdHJpbmdGaWVsZFN0cmF0ZWd5KTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0U3ViY2xhc3NEaXNjcmltaW5hdG9yTWFwcGluZygpIHsKICAg\nICAgICBKREJDQ29uZmlndXJhdGlvbiBjb25mID0gKEpEQkNDb25maWd1cmF0\naW9uKSBnZXRDb25maWd1cmF0aW9uKCk7CiAgICAgICAgQ2xhc3NNYXBwaW5n\nIGNscyA9IGNvbmYuZ2V0TWFwcGluZ1JlcG9zaXRvcnlJbnN0YW5jZSgpLgog\nICAgICAgICAgICBnZXRNYXBwaW5nKEVtYmVkZGFibGVTdXBlclN1Yi5jbGFz\ncywgbnVsbCwgdHJ1ZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJESVNDIiwg\nY2xzLmdldERpc2NyaW1pbmF0b3IoKS5nZXRDb2x1bW5zKClbMF0uCiAgICAg\nICAgICAgIGdldE5hbWUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndFZlcnNpb25PdmVycmlkZU1hcHBpbmcoKSB7CiAgICAgICAgSkRCQ0NvbmZp\nZ3VyYXRpb24gY29uZiA9IChKREJDQ29uZmlndXJhdGlvbikgZ2V0Q29uZmln\ndXJhdGlvbigpOwogICAgICAgIENsYXNzTWFwcGluZyBjbHMgPSBjb25mLmdl\ndE1hcHBpbmdSZXBvc2l0b3J5SW5zdGFuY2UoKS4KICAgICAgICAgICAgZ2V0\nTWFwcGluZyhFbWJlZGRhYmxlU3VwZXJTdWIuY2xhc3MsIG51bGwsIHRydWUp\nOwogICAgICAgIGFzc2VydEVxdWFscygiVkVSU1ZBTCIsIGNscy5nZXRWZXJz\naW9uKCkuZ2V0Q29sdW1ucygpWzBdLmdldE5hbWUoKSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdFJlbGF0aW9uTWFwcGluZ3MoKSB7CiAgICAgICAg\nSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IChKREJDQ29uZmlndXJhdGlvbikg\nZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAgIENsYXNzTWFwcGluZyBjbHMg\nPSBjb25mLmdldE1hcHBpbmdSZXBvc2l0b3J5SW5zdGFuY2UoKS4KICAgICAg\nICAgICAgZ2V0TWFwcGluZyhFbWJlZGRhYmxlU3VwZXJTdWIuY2xhc3MsIG51\nbGwsIHRydWUpOwogICAgICAgIEZpZWxkTWFwcGluZyBmbSA9IGNscy5nZXRG\naWVsZE1hcHBpbmcoInN1YiIpOwogICAgICAgIGFzc2VydFRydWUoZm0uZ2V0\nU3RyYXRlZ3koKSBpbnN0YW5jZW9mIFJlbGF0aW9uRmllbGRTdHJhdGVneSk7\nCgogICAgICAgIGZtID0gY2xzLmdldEZpZWxkTWFwcGluZygic3VwIik7CiAg\nICAgICAgYXNzZXJ0VHJ1ZShmbS5nZXRTdHJhdGVneSgpIGluc3RhbmNlb2Yg\nUmVsYXRpb25GaWVsZFN0cmF0ZWd5KTsKICAgIH0KKi8KICAgIHB1YmxpYyB2\nb2lkIHRlc3RQZXJzaXN0QW5kRmluZCgpIHsKICAgICAgICBFbWJlZGRhYmxl\nU3VwZXJTdWIgcGFyZW50ID0gbmV3IEVtYmVkZGFibGVTdXBlclN1YigpOwog\nICAgICAgIHBhcmVudC5zZXRDbG9iKCJwYXJlbnQiKTsKICAgICAgICBFbWJl\nZGRhYmxlU3VwZXJTdWIgc3ViID0gbmV3IEVtYmVkZGFibGVTdXBlclN1Yigp\nOwogICAgICAgIHN1Yi5zZXRDbG9iKCJzdWIiKTsKICAgICAgICBFbWJlZGRh\nYmxlU3VwZXJTdWIgc3VwID0gbmV3IEVtYmVkZGFibGVTdXBlclN1YigpOwog\nICAgICAgIHN1cC5zZXRDbG9iKCJzdXAiKTsKICAgICAgICBwYXJlbnQuc2V0\nU3ViKHN1Yik7CiAgICAgICAgcGFyZW50LnNldFN1cChzdXApOwoKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IChPcGVuSlBBRW50aXR5TWFu\nYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4\nKGVtKTsKICAgICAgICBlbS5wZXJzaXN0QWxsKHBhcmVudCwgc3ViLCBzdXAp\nOwogICAgICAgIGVuZFR4KGVtKTsKICAgICAgICBsb25nIHBrID0gcGFyZW50\nLmdldFBLKCk7CiAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICBlbSA9IChP\ncGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBwYXJlbnQgPSBlbS5maW5kKEVtYmVkZGFibGVTdXBlclN1Yi5j\nbGFzcywgcGspOwogICAgICAgIGFzc2VydEVxdWFscygicGFyZW50IiwgcGFy\nZW50LmdldENsb2IoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzdWIiLCBw\nYXJlbnQuZ2V0U3ViKCkuZ2V0Q2xvYigpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoInN1cCIsIHBhcmVudC5nZXRTdXAoKS5nZXRDbG9iKCkpOwogICAgICAg\nIGVuZEVtKGVtKTsKICAgIH0KfQo=\n","encoding":"base64"}

