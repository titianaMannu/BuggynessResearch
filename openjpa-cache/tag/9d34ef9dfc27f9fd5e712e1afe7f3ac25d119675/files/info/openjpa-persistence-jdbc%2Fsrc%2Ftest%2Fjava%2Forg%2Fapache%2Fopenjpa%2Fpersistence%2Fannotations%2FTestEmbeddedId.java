{"sha":"2f2fd083403c7a6b9e97c2368b6efef062f471e8","node_id":"MDQ6QmxvYjIwNjM2NDoyZjJmZDA4MzQwM2M3YTZiOWU5N2MyMzY4YjZlZmVmMDYyZjQ3MWU4","size":8709,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2f2fd083403c7a6b9e97c2368b6efef062f471e8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3Rh\ndGlvbnM7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuKjsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS4qOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwoK\naW1wb3J0IGp1bml0LmZyYW1ld29yay4qOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5hbm5vdGF0aW9ucy5jb21tb24uYXBwcy5h\nbm5vdEFwcC5hbm5vdHlwZS4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy4qOwoKLyoqCiAqIDxwPlRlc3Qg\nZW1iZWRkZWQgaWQgY2xhc3Nlcy48L3A+CiAqCiAqIEBhdXRob3IgQWJlIFdo\naXRlCiAqLwpwdWJsaWMgY2xhc3MgVGVzdEVtYmVkZGVkSWQgZXh0ZW5kcyBB\nbm5vdGF0aW9uVGVzdENhc2UKewoKCXB1YmxpYyBUZXN0RW1iZWRkZWRJZChT\ndHJpbmcgbmFtZSkKCXsKCQlzdXBlcihuYW1lLCAiYW5ub3RhdGlvbmNhY3R1\nc2FwcCIpOwoJfQoKICAgIEVtYmVkZGVkSWRDbGFzcyBfb2lkOwogICAgRW1i\nZWRkZWRJZENsYXNzIF9yb2lkOwoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkg\newogICAgICAgIGRlbGV0ZUFsbChFbWJlZGRlZElkRW50aXR5LmNsYXNzKTsK\nCiAgICAgICAgX29pZCA9IG5ldyBFbWJlZGRlZElkQ2xhc3MoKTsKICAgICAg\nICBfb2lkLnNldFBrMSgxKTsKICAgICAgICBfb2lkLnNldFBrMigyKTsKCiAg\nICAgICAgRW1iZWRkZWRJZEVudGl0eSBlID0gbmV3IEVtYmVkZGVkSWRFbnRp\ndHkoKTsKICAgICAgICBlLnNldElkKF9vaWQpOwogICAgICAgIGUuc2V0VmFs\ndWUoImUiKTsKCiAgICAgICAgX3JvaWQgPSBuZXcgRW1iZWRkZWRJZENsYXNz\nKCk7CiAgICAgICAgX3JvaWQuc2V0UGsxKDIpOwogICAgICAgIF9yb2lkLnNl\ndFBrMigzKTsKCiAgICAgICAgRW1iZWRkZWRJZEVudGl0eSByZWwgPSBuZXcg\nRW1iZWRkZWRJZEVudGl0eSgpOwogICAgICAgIHJlbC5zZXRJZChfcm9pZCk7\nCiAgICAgICAgcmVsLnNldFZhbHVlKCJyIik7CiAgICAgICAgZS5zZXRSZWxh\ndGlvbihyZWwpOwoKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9\nIChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBzdGFydFR4KGVtKTsKICAgICAgICBlbS5wZXJzaXN0QWxs\nKGUsIHJlbCk7CiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVt\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0T2JqZWN0SWQoKSB7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSAoT3BlbkpQQUVu\ndGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nRW1iZWRkZWRJZEVudGl0eSBlID0gZW0uZmluZChFbWJlZGRlZElkRW50aXR5\nLmNsYXNzLCBfb2lkKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGUpOwogICAg\nICAgIGFzc2VydEVxdWFscygiZSIsIGUuZ2V0VmFsdWUoKSk7CiAgICAgICAg\nYXNzZXJ0TnVsbChlLmdldE1hcHBpbmdPdmVycmlkZVJlbGF0aW9uKCkpOwog\nICAgICAgIGFzc2VydE5vdE51bGwoZS5nZXRSZWxhdGlvbigpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoInIiLCBlLmdldFJlbGF0aW9uKCkuZ2V0VmFsdWUo\nKSk7CgogICAgICAgIGFzc2VydEVxdWFscyhfb2lkLCBlbS5nZXRPYmplY3RJ\nZChlKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKF9yb2lkLCBlbS5nZXRPYmpl\nY3RJZChlLmdldFJlbGF0aW9uKCkpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nX29pZCwgZS5nZXRJZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoX3JvaWQs\nIGUuZ2V0UmVsYXRpb24oKS5nZXRJZCgpKTsKICAgICAgICBhc3NlcnROdWxs\nKCgoUGVyc2lzdGVuY2VDYXBhYmxlKSBlLmdldElkKCkpLnBjR2V0R2VuZXJp\nY0NvbnRleHQoKSk7CiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RNdXRhdGVFbWJlZGRlZElkRmllbGRWYWx1ZU9mTmV3\nKCkgewogICAgICAgIEVtYmVkZGVkSWRFbnRpdHkgZTEgPSBuZXcgRW1iZWRk\nZWRJZEVudGl0eSgpOwogICAgICAgIGUxLnNldFZhbHVlKCJlMSIpOwogICAg\nICAgIEVtYmVkZGVkSWRFbnRpdHkgZTIgPSBuZXcgRW1iZWRkZWRJZEVudGl0\neSgpOwogICAgICAgIGUyLnNldFZhbHVlKCJlMiIpOwogICAgICAgIAogICAg\nICAgIGUyLnNldElkKG5ldyBFbWJlZGRlZElkQ2xhc3MoKSk7CiAgICAgICAg\nLy9Db21tZW50IHRoaXMgc2luY2UgcGszIGlzIGF1dG8tZ2VuZXJhdGVkIGFu\nZCBhc3NpZ25pbmcKICAgICAgICAvL2l0IGV4cGxpY2l0bHkgY2F1c2VzIGEg\ncm9sbGJhY2sKICAgICAgICAvL2UyLmdldElkKCkuc2V0UGszKDk5KTsgLy8g\ncHJldmVudCBhc3NpZ24gb24gYWNjZXNzCgogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAg\nIC8vZW0ucGVyc2lzdEFsbChlMSwgZTIpOwoKICAgICAgICAgRW1iZWRkZWRJ\nZENsYXNzIG9pZCA9IG5ldyBFbWJlZGRlZElkQ2xhc3MoKTsKICAgICAgICBv\naWQuc2V0UGsxKDQpOwogICAgICAgIG9pZC5zZXRQazIoNSk7CiAgICAgICAg\nLy9Db21tZW50IHRoaXMgc2luY2UgcGszIGlzIGF1dG8tZ2VuZXJhdGVkIGFu\nZCBhc3NpZ25pbmcKICAgICAgICAvL2l0IGV4cGxpY2l0bHkgY2F1c2VzIGEg\ncm9sbGJhY2sKICAgICAgICAvL29pZC5zZXRQazMoNik7CiAgICAgICAgZTEu\nc2V0SWQob2lkKTsKICAgICAgICBlMi5nZXRJZCgpLnNldFBrMSg2KTsKICAg\nICAgICBlMi5nZXRJZCgpLnNldFBrMig3KTsKICAgICAgICBlbS5wZXJzaXN0\nQWxsKGUxLCBlMik7CgogICAgICAgIGVuZFR4KGVtKTsKCiAgICAgICAgRW1i\nZWRkZWRJZENsYXNzIG9pZDEgPSBlMS5nZXRJZCgpOwogICAgICAgIEVtYmVk\nZGVkSWRDbGFzcyBvaWQyID0gZTIuZ2V0SWQoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMob2lkMSwgZW0uZ2V0T2JqZWN0SWQoZTEpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMob2lkMiwgZW0uZ2V0T2JqZWN0SWQoZTIpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoNCwgb2lkMS5nZXRQazEoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDUsIG9pZDEuZ2V0UGsyKCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncyg2LCBvaWQyLmdldFBrMSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNywg\nb2lkMi5nZXRQazIoKSk7CiAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICBl\nbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlMSA9IGVtLmZpbmQoRW1iZWRkZWRJZEVudGl0eS5j\nbGFzcywgb2lkMSk7CiAgICAgICAgZTIgPSBlbS5maW5kKEVtYmVkZGVkSWRF\nbnRpdHkuY2xhc3MsIG9pZDIpOwogICAgICAgIGFzc2VydEVxdWFscyhvaWQx\nLCBlbS5nZXRPYmplY3RJZChlMSkpOwogICAgICAgIGFzc2VydEVxdWFscyhv\naWQyLCBlbS5nZXRPYmplY3RJZChlMikpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhvaWQxLCBlMS5nZXRJZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMob2lk\nMiwgZTIuZ2V0SWQoKSk7CiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RNdXRhdGVFbWJlZGRlZElkRmllbGRWYWx1ZU9m\nRXhpc3RpbmcoKSAKICAgIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAgRW1iZWRk\nZWRJZEVudGl0eSBlID0gZW0uZmluZChFbWJlZGRlZElkRW50aXR5LmNsYXNz\nLCBfb2lkKTsKICAgICAgICBlLnNldFZhbHVlKCJjaGFuZ2VkIik7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZS5nZXRJZCgpLnNldFBrMSg5KTsKICAg\nICAgICAgICAgZW5kVHgoZW0pOwogICAgICAgICAgICBmYWlsKCJDb21taXR0\nZWQgd2l0aCBjaGFuZ2VkIG9pZCBmaWVsZC4iKTsKICAgICAgICB9IGNhdGNo\nIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIGlmIChpc0Fj\ndGl2ZVR4KGVtKSkKICAgICAgICAgICAgCXJvbGxiYWNrVHgoZW0pOwogICAg\nICAgIH0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4YykKICAgICAgICB7\nCiAgICAgICAgICAgIGlmIChpc0FjdGl2ZVR4KGVtKSkKICAgICAgICAgICAg\nCXJvbGxiYWNrVHgoZW0pOwogICAgICAgIH0KICAgICAgICBlbmRFbShlbSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdERldGFjaEF0dGFjaCgpIHsK\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IChPcGVuSlBBRW50\naXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBF\nbWJlZGRlZElkRW50aXR5IGUgPSBlbS5maW5kKEVtYmVkZGVkSWRFbnRpdHku\nY2xhc3MsIF9vaWQpOwogICAgICAgIGUuZ2V0UmVsYXRpb24oKTsKICAgICAg\nICBlbmRFbShlbSk7CgogICAgICAgIGUuc2V0VmFsdWUoImVjaGFuZ2VkIik7\nCiAgICAgICAgZS5nZXRSZWxhdGlvbigpLnNldFZhbHVlKCJyY2hhbmdlZCIp\nOwoKICAgICAgICBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGVtKTsKICAgICAg\nICBFbWJlZGRlZElkRW50aXR5IG1lID0gKEVtYmVkZGVkSWRFbnRpdHkpIGVt\nLm1lcmdlQWxsKGUsCiAgICAgICAgICAgIGUuZ2V0UmVsYXRpb24oKSlbMF07\nCiAgICAgICAgYXNzZXJ0VHJ1ZShtZSAhPSBlKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKG1lLmdldFJlbGF0aW9uKCkpOwogICAgICAgIGFzc2VydFRydWUo\nbWUuZ2V0UmVsYXRpb24oKSAhPSBlLmdldFJlbGF0aW9uKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscygiZWNoYW5nZWQiLCBtZS5nZXRWYWx1ZSgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoInJjaGFuZ2VkIiwgbWUuZ2V0UmVsYXRpb24o\nKS5nZXRWYWx1ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoX29pZCwgbWUu\nZ2V0SWQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKF9vaWQsIGVtLmdldE9i\namVjdElkKG1lKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKF9yb2lkLCBtZS5n\nZXRSZWxhdGlvbigpLmdldElkKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhf\ncm9pZCwgZW0uZ2V0T2JqZWN0SWQobWUuZ2V0UmVsYXRpb24oKSkpOwogICAg\nICAgIGVuZFR4KGVtKTsKICAgICAgICBlbmRFbShlbSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdFF1ZXJ5KCkgewogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVR\ndWVyeSgic2VsZWN0IGUgZnJvbSBFbWJlZGRlZElkRW50aXR5IGUgIgogICAg\nICAgICAgICArICJ3aGVyZSBlLmlkLnBrMSA9IDEiKTsKICAgICAgICBFbWJl\nZGRlZElkRW50aXR5IGUgPSAoRW1iZWRkZWRJZEVudGl0eSkgcS5nZXRTaW5n\nbGVSZXN1bHQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoX29pZCwgZS5nZXRJ\nZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImUiLCBlLmdldFZhbHVlKCkp\nOwoKICAgICAgICBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBlLmlkLnBr\nMiBmcm9tIEVtYmVkZGVkSWRFbnRpdHkgZSAiCiAgICAgICAgICAgICsgIndo\nZXJlIGUuaWQucGsxID0gMSIpOwogICAgICAgIGFzc2VydEVxdWFscyhuZXcg\nTG9uZyhfb2lkLmdldFBrMigpKSwgcS5nZXRTaW5nbGVSZXN1bHQoKSk7Cgog\nICAgICAgIHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGUuaWQgZnJvbSBF\nbWJlZGRlZElkRW50aXR5IGUgIgogICAgICAgICAgICArICJ3aGVyZSBlLmlk\nLnBrMSA9IDEiKTsKICAgICAgICBhc3NlcnRFcXVhbHMoX29pZCwgcS5nZXRT\naW5nbGVSZXN1bHQoKSk7CiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RBdXRvQXNzaWduZWQoKSB7CiAgICAgICAgLy8g\nYmVnaW4gd2l0aCBudWxsIGlkIG9iamVjdAogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAg\nIEVtYmVkZGVkSWRFbnRpdHkgZSA9IG5ldyBFbWJlZGRlZElkRW50aXR5KCk7\nCiAgICAgICAgZW0ucGVyc2lzdChlKTsKICAgICAgICBFbWJlZGRlZElkQ2xh\nc3Mgb2lkID0gZS5nZXRJZCgpOwogICAgICAgIGFzc2VydE5vdE51bGwob2lk\nKTsKICAgICAgICBhc3NlcnRUcnVlKG9pZC5nZXRQazMoKSAhPSAwKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMob2lkLCBlbS5nZXRPYmplY3RJZChlKSk7CiAg\nICAgICAgZW5kVHgoZW0pOwogICAgICAgIGFzc2VydEVxdWFscyhvaWQsIGVt\nLmdldE9iamVjdElkKGUpKTsKICAgICAgICBlbmRFbShlbSk7CgogICAgICAg\nIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFu\nYWdlcigpOwogICAgICAgIGUgPSBlbS5maW5kKEVtYmVkZGVkSWRFbnRpdHku\nY2xhc3MsIG9pZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG9pZCwgZW0uZ2V0\nT2JqZWN0SWQoZSkpOwogICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgLy8g\nYmVnaW4gd2l0aCBub24tbnVsbCBpZCBvYmplY3QKICAgICAgICBlbSA9IChP\ncGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBzdGFydFR4KGVtKTsKICAgICAgICBlID0gbmV3IEVtYmVkZGVk\nSWRFbnRpdHkoKTsKICAgICAgICBvaWQgPSBuZXcgRW1iZWRkZWRJZENsYXNz\nKCk7CiAgICAgICAgb2lkLnNldFBrMSg0KTsKICAgICAgICBvaWQuc2V0UGsy\nKDUpOwogICAgICAgIGUuc2V0SWQob2lkKTsKICAgICAgICBlbS5wZXJzaXN0\nKGUpOwogICAgICAgIG9pZCA9IGUuZ2V0SWQoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoNCwgb2lkLmdldFBrMSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nNSwgb2lkLmdldFBrMigpKTsKICAgICAgICBhc3NlcnRUcnVlKG9pZC5nZXRQ\nazMoKSAhPSAwKTsKICAgICAgICBhc3NlcnRFcXVhbHMob2lkLCBlbS5nZXRP\nYmplY3RJZChlKSk7CiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhvaWQsIGVtLmdldE9iamVjdElkKGUpKTsKICAgICAgICBlbmRF\nbShlbSk7CgogICAgICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBj\ndXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIGUgPSBlbS5maW5kKEVt\nYmVkZGVkSWRFbnRpdHkuY2xhc3MsIG9pZCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKG9pZCwgZW0uZ2V0T2JqZWN0SWQoZSkpOwogICAgICAgIGVuZEVtKGVt\nKTsKCiAgICAgICAgLy8gZmx1c2ggYmVmb3JlIGFjY2Vzc2luZyBpZCBmaWVs\nZAogICAgICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAg\nIGUgPSBuZXcgRW1iZWRkZWRJZEVudGl0eSgpOwogICAgICAgIGVtLnBlcnNp\nc3QoZSk7CiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIG9pZCA9IGUuZ2V0\nSWQoKTsKICAgICAgICBhc3NlcnRUcnVlKG9pZC5nZXRQazMoKSAhPSAwKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMob2lkLCBlbS5nZXRPYmplY3RJZChlKSk7\nCiAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICBlbSA9IChPcGVuSlBBRW50\naXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nID0gZW0uZmluZChFbWJlZGRlZElkRW50aXR5LmNsYXNzLCBvaWQpOwogICAg\nICAgIGFzc2VydEVxdWFscyhvaWQsIGVtLmdldE9iamVjdElkKGUpKTsKICAg\nICAgICBlbmRFbShlbSk7CiAgICB9Cn0K\n","encoding":"base64"}

