{"sha":"6ee4ae17455a1a8637077e453cd5f638978134ca","node_id":"MDQ6QmxvYjIwNjM2NDo2ZWU0YWUxNzQ1NWExYTg2MzcwNzdlNDUzY2Q1ZjYzODk3ODEzNGNh","size":7330,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6ee4ae17455a1a8637077e453cd5f638978134ca","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3Rh\ndGlvbnM7CgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuKjsKaW1wb3J0IGp1bml0LmZyYW1ld29yay4qOwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRp\nbHMuKjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nYW5ub3RhdGlvbnMuY29tbW9uLmFwcHMuYW5ub3RBcHAuYW5ub3R5cGUuKjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBB\nRW50aXR5TWFuYWdlcjsKCnB1YmxpYyBjbGFzcyBUZXN0RW50aXR5TGlzdGVu\nZXJBbm5vdCBleHRlbmRzIEFubm90YXRpb25UZXN0Q2FzZQp7CgoJcHVibGlj\nIFRlc3RFbnRpdHlMaXN0ZW5lckFubm90KFN0cmluZyBuYW1lKQoJewoJCXN1\ncGVyKG5hbWUsICJhbm5vdGF0aW9uY2FjdHVzYXBwIik7Cgl9CgoJcHVibGlj\nIHZvaWQgc2V0VXAoKQoJewoJCWRlbGV0ZUFsbChFbXBsb3llZS5jbGFzcyk7\nCgkJZGVsZXRlQWxsKENvbnRyYWN0RW1wbG95ZWUuY2xhc3MpOwoJCUNhbGxi\nYWNrU3RvcmFnZS5jbGVhclN0b3JlKCk7Cgl9CgoJcHVibGljIHZvaWQgdGVz\ndFByZVBlcnNpc3QoKQoJewoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0o\nT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nCgoJCUNvbnRyYWN0RW1wbG95ZWUgY2VtcCA9IG5ldyBDb250cmFjdEVtcGxv\neWVlKDIxLCAiYWZhbSIsIDI1LCA1KTsKCgkJZW0ucGVyc2lzdChjZW1wKTsK\nCQlDYWxsYmFja1N0b3JhZ2Ugc3RvcmUgPSBDYWxsYmFja1N0b3JhZ2UuZ2V0\nSW5zdGFuY2UoKTsKCgkJYXNzZXJ0Tm90TnVsbChzdG9yZS5nZXRDbGlzdCgp\nKTsKCQlhc3NlcnRFcXVhbHMoIkBwcmUvcG9zdCBwZXJzaXN0IGNhbGxiYWNr\nIGlzIG92ZXIvdW5kZXItZmlyaW5nIiwgMiwgc3RvcmUuZ2V0Q2xpc3QoKS5z\naXplKCkpOwoJCWFzc2VydEVxdWFscygibG9uZ25hbWV2YWxpZGF0b3JwcnIi\nLCBzdG9yZS5nZXRDbGlzdCgpLmdldCgwKSk7CgkJYXNzZXJ0RXF1YWxzKCJj\nb250cmFjdGVtcGxveWVlIiwgc3RvcmUuZ2V0Q2xpc3QoKS5nZXQoMSkpOwoK\nCQllbmRFbShlbSk7Cgl9CgoJcHVibGljIHZvaWQgdGVzdFBvc3RQZXJzaXN0\nKCkKCXsKCQlPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IG51bGw7CQoJICB0\ncnl7CQoJCWVtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CgkJc3RhcnRUeChlbSk7CgoJCUVtcGxveWVlIGVtcCA9\nIG5ldyBFbXBsb3llZSgxLCAiam9obiIpOwoKCQllbS5wZXJzaXN0KGVtcCk7\nCgkJQ2FsbGJhY2tTdG9yYWdlIHN0b3JlID0gQ2FsbGJhY2tTdG9yYWdlLmdl\ndEluc3RhbmNlKCk7CgoJCWFzc2VydE5vdE51bGwoc3RvcmUuZ2V0Q2xpc3Qo\nKSk7CgkJYXNzZXJ0RXF1YWxzKCJAcHJlL3Bvc3QgcGVyc2lzdCBjYWxsYmFj\nayBpcyBvdmVyL3VuZGVyLWZpcmluZyIsIDQsIHN0b3JlLmdldENsaXN0KCku\nc2l6ZSgpKTsKCQlhc3NlcnRFcXVhbHMoIm5hbWV2YWxpZGF0b3IiLCBzdG9y\nZS5nZXRDbGlzdCgpLmdldCgwKSk7CgkJYXNzZXJ0RXF1YWxzKCJsb25nbmFt\nZXZhbGlkYXRvcnByciIsIHN0b3JlLmdldENsaXN0KCkuZ2V0KDEpKTsKCQlh\nc3NlcnRFcXVhbHMoImVtcGxveWVlcG9wIiwgc3RvcmUuZ2V0Q2xpc3QoKS5n\nZXQoMikpOwoJCWFzc2VydEVxdWFscygiV2UgZXhwZWN0ZWQgJ2dlbiMiICsg\nIGVtcC5nZXRDaGVjaygpICsgIiA6ICIgKyBlbXAuZ2V0Q2hlY2soKSArICIn\nLiBIb3dldmVyLCB3ZSBnb3QgJyIgKyBzdG9yZS5nZXRDbGlzdCgpLmdldCgz\nKSArICInIiwgImdlbiMiK2VtcC5nZXRDaGVjaygpLCBzdG9yZS5nZXRDbGlz\ndCgpLmdldCgzKSk7CgkgIH0KICAgICAgZmluYWxseSB7CgkJZW5kVHgoZW0p\nOwoJCWVuZEVtKGVtKTsKICAgICAgfQoJfQoKCXB1YmxpYyB2b2lkIHRlc3RQ\ncmVfUG9zdFJlbW92ZSgpCgl7CgkJT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0g\nPShPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIo\nKTsKCQlzdGFydFR4KGVtKTsKCgkJRW1wbG95ZWUgZW1wID0gbmV3IEVtcGxv\neWVlKDgsICJKb25hdGhhbiIpOwoJCWVtLnBlcnNpc3QoZW1wKTsKCgkJZW5k\nVHgoZW0pOwoJCWVuZEVtKGVtKTsKCQkvLy0tLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJ\nZW0gPShPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsKCQlzdGFydFR4KGVtKTsKCgkJZW1wID0gZW0uZmluZChFbXBsb3ll\nZS5jbGFzcywgOCk7CgoJCUNhbGxiYWNrU3RvcmFnZS5jbGVhclN0b3JlKCk7\nIC8vY2xlYXIgdGhlIHN0b3JlCgkJYXNzZXJ0VHJ1ZShDYWxsYmFja1N0b3Jh\nZ2UuaXNFbXB0eSgpKTsKCgkJZW0ucmVtb3ZlKGVtcCk7CgoJCWFzc2VydFRy\ndWUoIUNhbGxiYWNrU3RvcmFnZS5pc0VtcHR5KCkpOwoJCWFzc2VydEVxdWFs\ncygiY2FsbGJhY2sgaXMgdW5kZXIvb3Zlci1maXJpbmcuLi4iLCAyLCBDYWxs\nYmFja1N0b3JhZ2Uuc2l6ZSgpKTsKCQlhc3NlcnRFcXVhbHMoIm5hbWV2YWxp\nZGF0b3JwcnIiLCBDYWxsYmFja1N0b3JhZ2UuZ2V0SW5zdGFuY2UoKS5nZXRD\nbGlzdCgpLmdldCgwKSk7CgkJYXNzZXJ0RXF1YWxzKCJuYW1ldmFsaWRhdG9y\ncG9yIiwgQ2FsbGJhY2tTdG9yYWdlLmdldEluc3RhbmNlKCkuZ2V0Q2xpc3Qo\nKS5nZXQoMSkpOwoKCQllbmRUeChlbSk7CgkJZW5kRW0oZW0pOwoJfQoKCXB1\nYmxpYyB2b2lkIHRlc3RQcmVVcGRhdGUoKQoJewoJCU9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIGVtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CgkJc3RhcnRUeChlbSk7CgoJCUVtcGxveWVlIGVtcCA9\nIG5ldyBFbXBsb3llZSg1LCAiQWJyYWhhbSIpOwoJCWVtLnBlcnNpc3QoZW1w\nKTsKCgkJQ2FsbGJhY2tTdG9yYWdlLmNsZWFyU3RvcmUoKTsKCgkJU3RyaW5n\nIHF1ZXJ5ID0gIlVwZGF0ZSBFbXBsb3llZSBlIFNFVCBlLm5hbWUgPSAnSm9z\nZXBoJyBXSEVSRSBlLmlkID0gOmlkIjsKCgkJaW50IHJlc3VsdCA9IGVtLmNy\nZWF0ZVF1ZXJ5KHF1ZXJ5KQoJCSAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0\nZXIoImlkIiwgNSkKCQkgICAgICAgICAgICAgICAuZXhlY3V0ZVVwZGF0ZSgp\nOwoKCQlMaXN0IHN0b3JlID0gQ2FsbGJhY2tTdG9yYWdlLmdldEluc3RhbmNl\nKCkuZ2V0Q2xpc3QoKTsKCgkJYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwoJCWFz\nc2VydEVxdWFscygxLCByZXN1bHQpOwoJCWFzc2VydE5vdE51bGwoc3RvcmUp\nOwoJCWFzc2VydEVxdWFscygzLCBzdG9yZS5zaXplKCkpOwoJCWFzc2VydEVx\ndWFscygibmFtZXZhbGlkYXRvcnBvdSIsIHN0b3JlLmdldCgwKSk7CgkJYXNz\nZXJ0RXF1YWxzKCJsb25nbmFtZXZhbGlkYXRvcnBvdSIsIHN0b3JlLmdldCgx\nKSk7CgkJYXNzZXJ0RXF1YWxzKCJlbXBsb3llZXBvdSIsIHN0b3JlLmdldCgy\nKSk7CgoJCWVuZFR4KGVtKTsKCQllbmRFbShlbSk7Cgl9CgoJcHVibGljIHZv\naWQgdGVzdFByZVVwZGF0ZTIoKQoJewoJCU9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nIGVtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5h\nZ2VyKCk7CgkJc3RhcnRUeChlbSk7CgoJCUVtcGxveWVlIGVtcCA9IG5ldyBF\nbXBsb3llZSg1LCAiQWJyYWhhbSIpOwoJCWVtLnBlcnNpc3QoZW1wKTsKCgkJ\nQ2FsbGJhY2tTdG9yYWdlLmNsZWFyU3RvcmUoKTsKCQllbmRUeChlbSk7CgoJ\nCXN0YXJ0VHgoZW0pOwoJCWVtcCA9IGVtLmZpbmQoRW1wbG95ZWUuY2xhc3Ms\nIDUpOwoKCQlDYWxsYmFja1N0b3JhZ2UuY2xlYXJTdG9yZSgpOwoJCWFzc2Vy\ndEVxdWFscygiQWJyYWhhbSIsIGVtcC5nZXROYW1lKCkpOwoKCQllbXAuc2V0\nTmFtZSgiQWJyYWhhbW92aWNoIik7CgkJZW0uZmx1c2goKTsKCgkJTGlzdCBz\ndG9yZSA9IENhbGxiYWNrU3RvcmFnZS5nZXRJbnN0YW5jZSgpLmdldENsaXN0\nKCk7CgoJCWFzc2VydE5vdE51bGwoc3RvcmUpOwoJCWFzc2VydEVxdWFscygi\ndXBkYXRlIGNhbGxiYWNrIGlzIGVpdGhlciB1bmRlcmZpcmluZyBvciBvdmVy\nZmlyaW5nLi4uIiwgMywgc3RvcmUuc2l6ZSgpKTsKCQlhc3NlcnRFcXVhbHMo\nIm5hbWV2YWxpZGF0b3Jwb3UiLCBzdG9yZS5nZXQoMCkpOwoJCWFzc2VydEVx\ndWFscygibG9uZ25hbWV2YWxpZGF0b3Jwb3UiLCBzdG9yZS5nZXQoMSkpOwoJ\nCWFzc2VydEVxdWFscygiZW1wbG95ZWVwb3UiLCBzdG9yZS5nZXQoMikpOwoK\nCQllbmRUeChlbSk7CgkJZW5kRW0oZW0pOwoJfQoKCXB1YmxpYyB2b2lkIHRl\nc3RQb3N0TG9hZCgpCgl7CgkJT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPShP\ncGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsK\nCQlzdGFydFR4KGVtKTsKCgkJRW1wbG95ZWUgZW1wID0gbmV3IEVtcGxveWVl\nKDYsICJKZWZmZXJzb24iKTsKCgkJZW0ucGVyc2lzdChlbXApOwoJCUNhbGxi\nYWNrU3RvcmFnZS5jbGVhclN0b3JlKCk7CgoJCWVuZFR4KGVtKTsKCgkJc3Rh\ncnRUeChlbSk7CgkJQ2FsbGJhY2tTdG9yYWdlLmNsZWFyU3RvcmUoKTsKCgkJ\nYXNzZXJ0VHJ1ZShDYWxsYmFja1N0b3JhZ2UuZ2V0SW5zdGFuY2UoKS5nZXRD\nbGlzdCgpLmlzRW1wdHkoKSk7CgoJCWVtcCA9IGVtLmZpbmQoRW1wbG95ZWUu\nY2xhc3MsIDYpOwoJCWVtLnJlZnJlc2goZW1wKTsKCgkJYXNzZXJ0Tm90TnVs\nbChlbXApOwoJCWFzc2VydE5vdE51bGwoQ2FsbGJhY2tTdG9yYWdlLmdldElu\nc3RhbmNlKCkuZ2V0Q2xpc3QoKSk7CgkJYXNzZXJ0RXF1YWxzKCJQb3N0TG9h\nZCBpcyBvdmVyZmlyaW5nLi4ubm90IGFjY3VyYXRlIiwgMiwgQ2FsbGJhY2tT\ndG9yYWdlLmdldEluc3RhbmNlKCkuZ2V0Q2xpc3QoKS5zaXplKCkpOwoJCWFz\nc2VydEVxdWFscygiZW1wbG95ZWVwb2wiLCBDYWxsYmFja1N0b3JhZ2UuZ2V0\nSW5zdGFuY2UoKS5nZXRDbGlzdCgpLmdldCgwKSk7CgkJYXNzZXJ0RXF1YWxz\nKCJlbXBsb3llZXBvbCIsIENhbGxiYWNrU3RvcmFnZS5nZXRJbnN0YW5jZSgp\nLmdldENsaXN0KCkuZ2V0KDEpKTsKCgkJZW5kVHgoZW0pOwoJCWVuZEVtKGVt\nKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0R2VuUHJpS2V5QXZhaWxJblBvc3RQ\nZXJzaXN0KCkKCXsKCQlPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9KE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwoJCXN0\nYXJ0VHgoZW0pOwoKCQlhc3NlcnROb3ROdWxsKGVtKTsKCgkJRW1wbG95ZWUg\nZW1wID0gbmV3IEVtcGxveWVlKDcsICJNYXh3ZWxsIik7CgoJCWFzc2VydEVx\ndWFscygwLCBlbXAuZ2V0Q2hlY2soKSk7CgoJCWVtLnBlcnNpc3QoZW1wKTsK\nCQlpbnQgY2hlY2sgPSBlbXAuZ2V0Q2hlY2soKTsKCgkJYXNzZXJ0Tm90TnVs\nbChjaGVjayk7CgkJYXNzZXJ0VHJ1ZShDYWxsYmFja1N0b3JhZ2UuZ2V0SW5z\ndGFuY2UoKS5nZXRDbGlzdCgpLmNvbnRhaW5zKCJnZW4jIitjaGVjaykpOwoK\nCQllbmRUeChlbSk7CgkJZW5kRW0oZW0pOwoJfQoJLypGaXggTWU6IGFva2Vr\nZSAtIHNob3VsZCBmYWlsIHdoZW4gcGVyc2lzdGluZyB3aXRoIGludmFsaWQg\naWQqLwovLwlwdWJsaWMgdm9pZCB0ZXN0RXhjZXB0aW9uQ2F1c2VUeFJvbGxi\nYWNrMigpCi8vCXsKLy8JCU9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7Ci8v\nCQlzdGFydFR4KGVtKTsKLy8JCQovLwkJRW1wbG95ZWUgZW1wID0gbmV3IEVt\ncGxveWVlKC0xLCAiZmFpbHVyZSIpOwovLwkJCi8vCQl0cnkKLy8JCXsKLy8J\nCQkvL3BlcnNpc3RpbmcgYW4gZW50aXR5IHdpdGggYW4gaW52YWxpZCBpZCB0\naHJvd3MgYW4gZXhjZXB0aW9uCi8vCQkJZW0ucGVyc2lzdChlbXApOwovLwkJ\nCWVuZFR4KGVtKTsKLy8JCQlmYWlsKCJTaG91bGQgaGF2ZSBmYWlsZWQuLnBl\ncnNpc3RpbmcgYW4gZW50aXR5IHdpdGggaW52YWxpZCBpZCIpOwovLwkJfQov\nLwkJY2F0Y2goUnVudGltZUV4Y2VwdGlvbiBlKQovLwkJewkJCQovLwkJCWFz\nc2VydEZhbHNlKGVtLmlzUGVyc2lzdGVudChlbXApKTsKLy8JCQlhc3NlcnRU\ncnVlKCJ0cmFuc2FjdGlvbiB3YXMgbm90IG1hcmtlZCBmb3Igcm9sbGJhY2si\nLCBlbS5nZXRSb2xsYmFja09ubHkoKSk7Ci8vCQkJZS5wcmludFN0YWNrVHJh\nY2UoKTsKLy8JCQlpZihlbS5nZXRSb2xsYmFja09ubHkoKSA9PSB0cnVlKQov\nLwkJCQllbmRFbShlbSk7Ci8vCQl9Ci8vCQljYXRjaChFeGNlcHRpb24gZSkK\nLy8JCXsKLy8JCQlhc3NlcnRGYWxzZShlbS5pc1BlcnNpc3RlbnQoZW1wKSk7\nCi8vCQkJYXNzZXJ0VHJ1ZSgidHJhbnNhY3Rpb24gd2FzIG5vdCBtYXJrZWQg\nZm9yIHJvbGxiYWNrIiwgZW0uZ2V0Um9sbGJhY2tPbmx5KCkpOwovLwkJCWUu\ncHJpbnRTdGFja1RyYWNlKCk7Ci8vCQkJaWYoZW0uZ2V0Um9sbGJhY2tPbmx5\nKCkgPT0gdHJ1ZSkKLy8JCQkJZW5kRW0oZW0pOwovLwkJfQovLwkJCi8vCQlp\nZihlbS5pc0FjdGl2ZSgpKQovLwkJCWVuZEVtKGVtKTsKLy8JfQp9Cg==\n","encoding":"base64"}

