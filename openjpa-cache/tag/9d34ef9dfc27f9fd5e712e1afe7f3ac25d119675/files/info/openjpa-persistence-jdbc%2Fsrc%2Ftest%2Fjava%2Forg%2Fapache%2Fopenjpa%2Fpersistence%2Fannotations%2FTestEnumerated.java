{"sha":"0ca620f486359f9370ec7fcf20d94025b51f96bf","node_id":"MDQ6QmxvYjIwNjM2NDowY2E2MjBmNDg2MzU5ZjkzNzBlYzdmY2YyMGQ5NDAyNWI1MWY5NmJm","size":4483,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0ca620f486359f9370ec7fcf20d94025b51f96bf","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3Rh\ndGlvbnM7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLio7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLio7CmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuKjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRpbHMuKjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5hbm5vdGF0\naW9ucy5jb21tb24uYXBwcy5hbm5vdEFwcC5hbm5vdHlwZS4qOwoKCgoKCi8q\nKgogKiBUZXN0IGVudW1zIGFuZCB0aGUgQEVudW1lcmF0ZWQgYW5ub3RhdGlv\nbi4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBU\nZXN0RW51bWVyYXRlZCBleHRlbmRzIEFubm90YXRpb25UZXN0Q2FzZQp7CgoJ\ncHVibGljIFRlc3RFbnVtZXJhdGVkKFN0cmluZyBuYW1lKQoJewoJCXN1cGVy\nKG5hbWUsICJhbm5vdGF0aW9uY2FjdHVzYXBwIik7Cgl9CgogICAgcHVibGlj\nIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgZGVsZXRlQWxsKEFubm9UZXN0MS5j\nbGFzcyk7CiAgICB9CgogICAvKiogcHVibGljIHZvaWQgdGVzdE1hcHBpbmco\nKSB7CiAgICAgICAgQ2xhc3NNYXBwaW5nIGNscyA9IChDbGFzc01hcHBpbmcp\nIGdldENvbmZpZ3VyYXRpb24oKS4KICAgICAgICAgICAgZ2V0TWV0YURhdGFS\nZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNZXRhRGF0YShBbm5vVGVzdDEuY2xh\nc3MsCiAgICAgICAgICAgIG51bGwsIHRydWUpOwogICAgICAgIEZpZWxkTWFw\ncGluZyBmbSA9IGNscy5nZXREZWNsYXJlZEZpZWxkTWFwcGluZygiZW51bWVy\nYXRpb24iKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGZtKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoRmllbGRNYXBwaW5nLk1BTkFHRV9QRVJTSVNURU5ULCBm\nbS5nZXRNYW5hZ2VtZW50KCkpOwogICAgICAgIGFzc2VydEVxdWFscyhKYXZh\nVHlwZXMuT0JKRUNULCBmbS5nZXRUeXBlQ29kZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoSmF2YVR5cGVzLlNIT1JULCBmbS5nZXRDb2x1bW5zKClbMF0u\nZ2V0SmF2YVR5cGUoKSk7CgogICAgICAgIGZtID0gY2xzLmdldERlY2xhcmVk\nRmllbGRNYXBwaW5nKCJvcmRpbmFsRW51bWVyYXRpb24iKTsKICAgICAgICBh\nc3NlcnROb3ROdWxsKGZtKTsKICAgICAgICBhc3NlcnRFcXVhbHMoRmllbGRN\nYXBwaW5nLk1BTkFHRV9QRVJTSVNURU5ULCBmbS5nZXRNYW5hZ2VtZW50KCkp\nOwogICAgICAgIGFzc2VydEVxdWFscyhKYXZhVHlwZXMuT0JKRUNULCBmbS5n\nZXRUeXBlQ29kZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSmF2YVR5cGVz\nLlNIT1JULCBmbS5nZXRDb2x1bW5zKClbMF0uZ2V0SmF2YVR5cGUoKSk7Cgog\nICAgICAgIGZtID0gY2xzLmdldERlY2xhcmVkRmllbGRNYXBwaW5nKCJzdHJp\nbmdFbnVtZXJhdGlvbiIpOwogICAgICAgIGFzc2VydE5vdE51bGwoZm0pOwog\nICAgICAgIGFzc2VydEVxdWFscyhGaWVsZE1hcHBpbmcuTUFOQUdFX1BFUlNJ\nU1RFTlQsIGZtLmdldE1hbmFnZW1lbnQoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKEphdmFUeXBlcy5PQkpFQ1QsIGZtLmdldFR5cGVDb2RlKCkpOwogICAg\nICAgIGFzc2VydEVxdWFscyhKYXZhVHlwZXMuU1RSSU5HLCBmbS5nZXRDb2x1\nbW5zKClbMF0uZ2V0SmF2YVR5cGUoKSk7CiAgICB9Ki8KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0QmVoYXZpb3IoKSAKICAgIHsKICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsgICAgICAgIAogICAgICAgIHN0YXJ0VHgoZW0p\nOwogICAgICAgIAogICAgICAgIEFubm9UZXN0MSBwYyA9IG5ldyBBbm5vVGVz\ndDEoMSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbCgicGMgaXMgbnVsbCIsIHBj\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKCJJbmhlcml0YW5jZVR5cGUuVEFC\nTEVfUEVSX0NMQVNTIGlzIG51bGwiLCBJbmhlcml0YW5jZVR5cGUuVEFCTEVf\nUEVSX0NMQVNTKTsKICAgICAgICBhc3NlcnROb3ROdWxsKCJJbmhlcml0YW5j\nZVR5cGUuSk9JTkVEIGlzIG51bGwiLCBJbmhlcml0YW5jZVR5cGUuSk9JTkVE\nKTsKICAgICAgICBwYy5zZXRFbnVtZXJhdGlvbihJbmhlcml0YW5jZVR5cGUu\nVEFCTEVfUEVSX0NMQVNTKTsKICAgICAgICBwYy5zZXRPcmRpbmFsRW51bWVy\nYXRpb24oSW5oZXJpdGFuY2VUeXBlLlRBQkxFX1BFUl9DTEFTUyk7CiAgICAg\nICAgcGMuc2V0U3RyaW5nRW51bWVyYXRpb24oSW5oZXJpdGFuY2VUeXBlLkpP\nSU5FRCk7CiAgICAgICAgZW0ucGVyc2lzdChwYyk7CiAgICAgICAgZW5kVHgo\nZW0pOwogICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgZW0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgT3BlbkpQQVF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIG8g\nRlJPTSBBbm5vVGVzdDEgbyIpOyAKICAgICAgICBhc3NlcnRFcXVhbHMoMSwg\ncS5nZXRSZXN1bHRMaXN0KCkuc2l6ZSgpKTsKICAgICAgICAKLy8gICAgICAg\nIEFubm9UZXN0MSBwYzIgPSBlbS5maW5kKEFubm9UZXN0MS5jbGFzcywgbmV3\nIExvbmcoMSkpOwogICAgICAgIEFubm9UZXN0MSBwYzIgPSAoQW5ub1Rlc3Qx\nKSBxLmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2VydE5vdE51bGwo\nInBjMiBpcyBudWxsIiwgcGMyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSW5o\nZXJpdGFuY2VUeXBlLlRBQkxFX1BFUl9DTEFTUywgcGMyLmdldEVudW1lcmF0\naW9uKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhJbmhlcml0YW5jZVR5cGUu\nVEFCTEVfUEVSX0NMQVNTLCBwYzIuZ2V0T3JkaW5hbEVudW1lcmF0aW9uKCkp\nOwogICAgICAgIGFzc2VydEVxdWFscyhJbmhlcml0YW5jZVR5cGUuSk9JTkVE\nLCAgcGMyLmdldFN0cmluZ0VudW1lcmF0aW9uKCkpOwogICAgICAgIHN0YXJ0\nVHgoZW0pOwogICAgICAgIHBjMi5zZXRFbnVtZXJhdGlvbihJbmhlcml0YW5j\nZVR5cGUuSk9JTkVEKTsKICAgICAgICBwYzIuc2V0T3JkaW5hbEVudW1lcmF0\naW9uKEluaGVyaXRhbmNlVHlwZS5KT0lORUQpOwogICAgICAgIHBjMi5zZXRT\ndHJpbmdFbnVtZXJhdGlvbihJbmhlcml0YW5jZVR5cGUuVEFCTEVfUEVSX0NM\nQVNTKTsKICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgZW5kRW0oZW0pOwoK\nICAgICAgICBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKLy8gICAgICAgIHBjMiA9IGVtLmZpbmQoQW5ub1Rl\nc3QxLmNsYXNzLCBuZXcgTG9uZygxKSk7CiAgICAgICAgcSA9IGVtLmNyZWF0\nZVF1ZXJ5KCJTRUxFQ1QgbyBGUk9NIEFubm9UZXN0MSBvIik7IAogICAgICAg\nIHBjMiA9IChBbm5vVGVzdDEpIHEuZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKEluaGVyaXRhbmNlVHlwZS5KT0lORUQsIHBjMi5n\nZXRFbnVtZXJhdGlvbigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSW5oZXJp\ndGFuY2VUeXBlLkpPSU5FRCwgcGMyLmdldE9yZGluYWxFbnVtZXJhdGlvbigp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSW5oZXJpdGFuY2VUeXBlLlRBQkxF\nX1BFUl9DTEFTUywgcGMyLmdldFN0cmluZ0VudW1lcmF0aW9uKCkpOwogICAg\nICAgIGVuZEVtKGVtKTsKICAgIH0KICAgIAp9Cg==\n","encoding":"base64"}

