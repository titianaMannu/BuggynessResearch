{"sha":"4f551bfcf01f18d30639d0fae4296b76b8e0c011","node_id":"MDQ6QmxvYjIwNjM2NDo0ZjU1MWJmY2YwMWYxOGQzMDYzOWQwZmFlNDI5NmI3NmI4ZTBjMDEx","size":4934,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4f551bfcf01f18d30639d0fae4296b76b8e0c011","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3Rh\ndGlvbnM7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuKjsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLio7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5tZXRhLio7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5tZXRhLnN0cmF0cy4qOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5hbm5vdGF0aW9u\ncy5jb21tb24uYXBwcy5hbm5vdEFwcC5hbm5vdHlwZS4qOwppbXBvcnQganVu\naXQuZnJhbWV3b3JrLio7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmNvbW1vbi51dGlscy4qOwoKCgovKioKICogPHA+VGVzdCB0\naGUgdXNlIG9mIHRoZSB7QGxpbmsgTWFwS2V5fSBhbm5vdGF0aW9uLiAgTm90\nZSB0aGF0IHdlIGhhdmUKICogbW9yZSB0aG9yb3VnaCBLb2RvIGNvcmUgdGVz\ndHMgZm9yIHRoZSBtYXBwaW5ncyB0aGVtc2VsdmVzLiAgU2VlCiAqIHtAbGlu\nayBrb2RvLmpkYmMubWV0YS5UZXN0TWFwcGVkQnlLZXlNYXBzfS4KICoKICog\nQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBUZXN0TWFwS2V5\nIGV4dGVuZHMgQW5ub3RhdGlvblRlc3RDYXNlCnsKCglwdWJsaWMgVGVzdE1h\ncEtleShTdHJpbmcgbmFtZSkKCXsKCQlzdXBlcihuYW1lLCAiYW5ub3RhdGlv\nbmNhY3R1c2FwcCIpOwoJfQoKICAgIC8vcHJpdmF0ZSBDbGFzc01hcHBpbmcg\nX21hcHBpbmc7CgogICAgcHVibGljIHZvaWQgc2V0VXAoKQogICAgewogICAg\nICAgIGRlbGV0ZUFsbChGbGF0MS5jbGFzcyk7CiAgICAgICAgZGVsZXRlQWxs\nKEFubm9UZXN0Mi5jbGFzcyk7CiAgICAgICAgZGVsZXRlQWxsKEFubm9UZXN0\nMS5jbGFzcyk7Ci8vICAgICAgICBfbWFwcGluZyA9ICgoSkRCQ0NvbmZpZ3Vy\nYXRpb24pIGdldENvbmZpZ3VyYXRpb24oKSkuCi8vICAgICAgICAgICAgZ2V0\nTWFwcGluZ1JlcG9zaXRvcnlJbnN0YW5jZSgpLmdldE1hcHBpbmcoQW5ub1Rl\nc3QxLmNsYXNzLAovLyAgICAgICAgICAgIG51bGwsIHRydWUpOwogICAgfQoK\nICAgLyoqIHB1YmxpYyB2b2lkIHRlc3REZWZhdWx0TWFwS2V5TWFwcGluZygp\nIHsKICAgICAgICBGaWVsZE1hcHBpbmcgZm0gPSBfbWFwcGluZy5nZXRGaWVs\nZE1hcHBpbmcoImRlZmF1bHRNYXBLZXkiKTsKICAgICAgICBhc3NlcnRUcnVl\nKGZtLmdldFN0cmF0ZWd5KCkgaW5zdGFuY2VvZiBSZWxhdGlvbk1hcFRhYmxl\nRmllbGRTdHJhdGVneSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJwayIsIGZt\nLmdldEtleSgpLmdldFZhbHVlTWFwcGVkQnkoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKF9tYXBwaW5nLmdldFJlcG9zaXRvcnkoKS5nZXRNZXRhRGF0YShG\nbGF0MS5jbGFzcywgbnVsbCwKICAgICAgICAgICAgdHJ1ZSkuZ2V0RmllbGQo\nInBrIiksIGZtLmdldEtleSgpLmdldFZhbHVlTWFwcGVkQnlNZXRhRGF0YSgp\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0TmFtZWRNYXBLZXlNYXBw\naW5nKCkgewogICAgICAgIEZpZWxkTWFwcGluZyBmbSA9IF9tYXBwaW5nLmdl\ndEZpZWxkTWFwcGluZygibmFtZWRNYXBLZXkiKTsKICAgICAgICBhc3NlcnRU\ncnVlKGZtLmdldFN0cmF0ZWd5KCkgaW5zdGFuY2VvZiBSZWxhdGlvbk1hcFRh\nYmxlRmllbGRTdHJhdGVneSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJiYXNp\nYyIsIGZtLmdldEtleSgpLmdldFZhbHVlTWFwcGVkQnkoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKF9tYXBwaW5nLmdldFJlcG9zaXRvcnkoKS5nZXRNZXRh\nRGF0YShGbGF0MS5jbGFzcywgbnVsbCwKICAgICAgICAgICAgdHJ1ZSkuZ2V0\nRmllbGQoImJhc2ljIiksIGZtLmdldEtleSgpLmdldFZhbHVlTWFwcGVkQnlN\nZXRhRGF0YSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW52ZXJz\nZU93bmVyTWFwS2V5TWFwcGluZygpIHsKICAgICAgICBGaWVsZE1hcHBpbmcg\nZm0gPSBfbWFwcGluZy5nZXRGaWVsZE1hcHBpbmcoImludmVyc2VPd25lck1h\ncEtleSIpOwogICAgICAgIGFzc2VydFRydWUoZm0uZ2V0U3RyYXRlZ3koKSBp\nbnN0YW5jZW9mCiAgICAgICAgICAgIFJlbGF0aW9uTWFwSW52ZXJzZUtleUZp\nZWxkU3RyYXRlZ3kpOwogICAgICAgIGFzc2VydEVxdWFscygiYmFzaWMiLCBm\nbS5nZXRLZXkoKS5nZXRWYWx1ZU1hcHBlZEJ5KCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhfbWFwcGluZy5nZXRSZXBvc2l0b3J5KCkuZ2V0TWV0YURhdGEo\nQW5ub1Rlc3QyLmNsYXNzLAogICAgICAgICAgICBudWxsLCB0cnVlKS5nZXRG\naWVsZCgiYmFzaWMiKSwgZm0uZ2V0S2V5KCkuCiAgICAgICAgICAgIGdldFZh\nbHVlTWFwcGVkQnlNZXRhRGF0YSgpKTsKICAgIH0qKi8KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0SW5zZXJ0QW5kUmV0cmlldmUoKQogICAgewoKICAgICAgICBG\nbGF0MSBmMSA9IG5ldyBGbGF0MSgxKTsKICAgICAgICBmMS5zZXRCYXNpYygx\nMDApOwogICAgICAgIEZsYXQxIGYyID0gbmV3IEZsYXQxKDIpOwogICAgICAg\nIGYyLnNldEJhc2ljKDIwMCk7CiAgICAgICAgQW5ub1Rlc3QyIGExID0gbmV3\nIEFubm9UZXN0MigxTCwgIjEiKTsKICAgICAgICBhMS5zZXRCYXNpYygiMTAw\nIik7CiAgICAgICAgQW5ub1Rlc3QyIGEyID0gbmV3IEFubm9UZXN0MigyTCwg\nIjIiKTsKICAgICAgICBhMi5zZXRCYXNpYygiMjAwIik7CgogICAgICAgIEFu\nbm9UZXN0MSBwYyA9IG5ldyBBbm5vVGVzdDEoMUwpOwogICAgICAgIHBjLmdl\ndERlZmF1bHRNYXBLZXkoKS5wdXQoZjEuZ2V0UGsoKSwgZjEpOwogICAgICAg\nIHBjLmdldERlZmF1bHRNYXBLZXkoKS5wdXQoZjIuZ2V0UGsoKSwgZjIpOwog\nICAgICAgIHBjLmdldE5hbWVkTWFwS2V5KCkucHV0KGYxLmdldEJhc2ljKCks\nIGYxKTsKICAgICAgICBwYy5nZXROYW1lZE1hcEtleSgpLnB1dChmMi5nZXRC\nYXNpYygpLCBmMik7CiAgICAgICAgcGMuZ2V0SW52ZXJzZU93bmVyTWFwS2V5\nKCkucHV0KGExLmdldEJhc2ljKCksIGExKTsKICAgICAgICBwYy5nZXRJbnZl\ncnNlT3duZXJNYXBLZXkoKS5wdXQoYTIuZ2V0QmFzaWMoKSwgYTIpOwogICAg\nICAgIGExLnNldE9uZU1hbnlPd25lcihwYyk7CiAgICAgICAgYTIuc2V0T25l\nTWFueU93bmVyKHBjKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\nZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICBzdGFydFR4KGVtKTsKICAgICAgICBlbS5wZXJzaXN0\nQWxsKG5ldyBPYmplY3RbXXsgcGMsIGYxLCBmMiwgYTEsIGEyIH0pOwogICAg\nICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgZW0g\nPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgcGMgPSBlbS5maW5kKEFubm9UZXN0MS5jbGFzcywgZW0u\nZ2V0T2JqZWN0SWQocGMpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMu\nZ2V0RGVmYXVsdE1hcEtleSgpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIHBjLmdldERlZmF1bHRNYXBLZXkoKS5nZXQoMSkuZ2V0UGsoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldERlZmF1bHRNYXBLZXko\nKS5nZXQoMikuZ2V0UGsoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBj\nLmdldE5hbWVkTWFwS2V5KCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMTAwLCBwYy5nZXROYW1lZE1hcEtleSgpLmdldCgxMDApLmdldEJhc2lj\nKCkpOwogICAgICAgIGFzc2VydEVxdWFscygyMDAsIHBjLmdldE5hbWVkTWFw\nS2V5KCkuZ2V0KDIwMCkuZ2V0QmFzaWMoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDIsIHBjLmdldEludmVyc2VPd25lck1hcEtleSgpLnNpemUoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCIxMDAiLCBwYy5nZXRJbnZlcnNlT3duZXJN\nYXBLZXkoKS5nZXQoIjEwMCIpLgogICAgICAgICAgICBnZXRCYXNpYygpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoIjIwMCIsIHBjLmdldEludmVyc2VPd25l\nck1hcEtleSgpLmdldCgiMjAwIikuCiAgICAgICAgICAgIGdldEJhc2ljKCkp\nOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KfQo=\n","encoding":"base64"}

