{"sha":"834cca869264f4a3127f2dad70b20a4f4ce58de4","node_id":"MDQ6QmxvYjIwNjM2NDo4MzRjY2E4NjkyNjRmNGEzMTI3ZjJkYWQ3MGIyMGE0ZjRjZTU4ZGU0","size":4586,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/834cca869264f4a3127f2dad70b20a4f4ce58de4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3Rh\ndGlvbnM7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuKjsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3RhdGlvbnMuY29t\nbW9uLmFwcHMuYW5ub3RBcHAuYW5ub3R5cGUuKjsKaW1wb3J0IGp1bml0LmZy\nYW1ld29yay4qOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5jb21tb24udXRpbHMuKjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CgovKioKICog\nVGVzdCBmb3IgMS0xCiAqCiAqIEBhdXRob3IgU3RldmUgS2ltCiAqLwpwdWJs\naWMgY2xhc3MgVGVzdE9uZVRvT25lIGV4dGVuZHMgQW5ub3RhdGlvblRlc3RD\nYXNlCnsKCglwdWJsaWMgVGVzdE9uZVRvT25lKFN0cmluZyBuYW1lKQoJewoJ\nCXN1cGVyKG5hbWUsICJhbm5vdGF0aW9uY2FjdHVzYXBwIik7Cgl9CgogICAg\ncHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgZGVsZXRlQWxsKEFubm9U\nZXN0MS5jbGFzcyk7CiAgICAgICAgZGVsZXRlQWxsKEFubm9UZXN0Mi5jbGFz\ncyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE9uZVRvT25lKCkgewog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3BlbkpQQUVudGl0\neU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3Rh\ncnRUeChlbSk7CiAgICAgICAgQW5ub1Rlc3QxIHBjID0gbmV3IEFubm9UZXN0\nMSg1KTsKICAgICAgICBBbm5vVGVzdDIgcGMyID0gbmV3IEFubm9UZXN0Migx\nNSwgImZvbyIpOwogICAgICAgIHBjLnNldE9uZU9uZShwYzIpOwogICAgICAg\nIGVtLnBlcnNpc3QocGMpOwogICAgICAgIGVtLnBlcnNpc3QocGMyKTsKICAg\nICAgICBlbmRUeChlbSk7CiAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICBl\nbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdl\ncigpOwogICAgICAgIHBjID0gZW0uZmluZChBbm5vVGVzdDEuY2xhc3MsIGVt\nLmdldE9iamVjdElkKHBjKSk7CiAgICAgICAgcGMyID0gcGMuZ2V0T25lT25l\nKCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYzIpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxNSwgcGMyLmdldFBrMSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoImZvbyIsIHBjMi5nZXRQazIoKSk7CiAgICAgICAgZW5kRW0oZW0pOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTZWxmT25lVG9PbmUoKSB7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPShPcGVuSlBBRW50aXR5\nTWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFy\ndFR4KGVtKTsKICAgICAgICBBbm5vVGVzdDEgcGMgPSBuZXcgQW5ub1Rlc3Qx\nKDUpOwogICAgICAgIEFubm9UZXN0MSBwYzIgPSBuZXcgQW5ub1Rlc3QxKDE1\nKTsKICAgICAgICBwYy5zZXRTZWxmT25lT25lKHBjMik7CiAgICAgICAgZW0u\ncGVyc2lzdChwYyk7CiAgICAgICAgZW0ucGVyc2lzdChwYzIpOwogICAgICAg\nIGVuZFR4KGVtKTsKICAgICAgICBlbmRFbShlbSk7CgogICAgICAgIGVtID0o\nT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgcGMgPSBlbS5maW5kKEFubm9UZXN0MS5jbGFzcywgZW0uZ2V0\nT2JqZWN0SWQocGMpKTsKICAgICAgICBwYzIgPSBwYy5nZXRTZWxmT25lT25l\nKCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYzIpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhuZXcgTG9uZygxNSksIHBjMi5nZXRQaygpKTsKICAgICAgICBl\nbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFBLSm9pblNl\nbGZPbmVUb09uZSgpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBl\nbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdl\ncigpOwogICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgIEFubm9UZXN0MSBw\nYyA9IG5ldyBBbm5vVGVzdDEoNSk7CiAgICAgICAgQW5ub1Rlc3QxIHBjMiA9\nIG5ldyBBbm5vVGVzdDEoMTUpOwogICAgICAgIHBjLnNldFNlbGZPbmVPbmUo\ncGMyKTsKICAgICAgICBlbS5wZXJzaXN0KHBjKTsKICAgICAgICBlbS5wZXJz\naXN0KHBjMik7CiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVt\nKTsKCiAgICAgICAgZW0gPShPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBwYyA9IGVtLmZpbmQoQW5ub1Rl\nc3QxLmNsYXNzLCBlbS5nZXRPYmplY3RJZChwYykpOwogICAgICAgIHBjMiA9\nIHBjLmdldFNlbGZPbmVPbmUoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBj\nMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ldyBMb25nKDE1KSwgcGMyLmdl\ndFBrKCkpOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0T3RoZXJUYWJsZU9uZVRvT25lKCkgewogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7CiAg\nICAgICAgQW5ub1Rlc3QxIHBjID0gbmV3IEFubm9UZXN0MSg1KTsKICAgICAg\nICBBbm5vVGVzdDIgcGMyID0gbmV3IEFubm9UZXN0MigxNSwgImZvbyIpOwog\nICAgICAgIHBjLnNldE90aGVyVGFibGVPbmVPbmUocGMyKTsKICAgICAgICBl\nbS5wZXJzaXN0KHBjKTsKICAgICAgICBlbS5wZXJzaXN0KHBjMik7CiAgICAg\nICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgZW0g\nPShPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBwYyA9IGVtLmZpbmQoQW5ub1Rlc3QxLmNsYXNzLCBlbS5n\nZXRPYmplY3RJZChwYykpOwogICAgICAgIHBjMiA9IHBjLmdldE90aGVyVGFi\nbGVPbmVPbmUoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBjMik7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDE1LCBwYzIuZ2V0UGsxKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygiZm9vIiwgcGMyLmdldFBrMigpKTsKICAgICAgICBlbmRF\nbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEludmVyc2VPbmVU\nb09uZSgpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9KE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwog\nICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgIEFubm9UZXN0MSBwYyA9IG5l\ndyBBbm5vVGVzdDEoNSk7CiAgICAgICAgQW5ub1Rlc3QyIHBjMiA9IG5ldyBB\nbm5vVGVzdDIoMTUsICJmb28iKTsKICAgICAgICBwYzIuc2V0SW52ZXJzZU9u\nZU9uZShwYyk7CiAgICAgICAgZW0ucGVyc2lzdChwYyk7CiAgICAgICAgZW0u\ncGVyc2lzdChwYzIpOwogICAgICAgIGVuZFR4KGVtKTsKICAgICAgICBlbmRF\nbShlbSk7CgogICAgICAgIGVtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSBlbS5maW5kKEFu\nbm9UZXN0MS5jbGFzcywgZW0uZ2V0T2JqZWN0SWQocGMpKTsKICAgICAgICBw\nYzIgPSBwYy5nZXRJbnZlcnNlT3duZXJPbmVPbmUoKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKHBjMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDE1LCBwYzIu\nZ2V0UGsxKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiZm9vIiwgcGMyLmdl\ndFBrMigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMocGMsIHBjMi5nZXRJbnZl\ncnNlT25lT25lKCkpOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KfQo=\n","encoding":"base64"}

