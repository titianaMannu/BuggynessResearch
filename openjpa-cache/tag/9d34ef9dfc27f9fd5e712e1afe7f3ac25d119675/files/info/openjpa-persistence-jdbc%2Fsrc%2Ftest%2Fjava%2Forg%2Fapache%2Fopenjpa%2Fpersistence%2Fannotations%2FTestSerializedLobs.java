{"sha":"c754b40f20c44e28415b5663f4cb42c1320083fc","node_id":"MDQ6QmxvYjIwNjM2NDpjNzU0YjQwZjIwYzQ0ZTI4NDE1YjU2NjNmNGNiNDJjMTMyMDA4M2Zj","size":4544,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c754b40f20c44e28415b5663f4cb42c1320083fc","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYW5ub3Rh\ndGlvbnM7CgppbXBvcnQgamF2YS5zcWwuKjsKaW1wb3J0IGphdmEudXRpbC5E\nYXRlOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLio7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi4qOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc3FsLio7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmFubm90YXRpb25zLmNv\nbW1vbi5hcHBzLmFubm90QXBwLmFubm90eXBlLio7CmltcG9ydCBqdW5pdC5m\ncmFtZXdvcmsuKjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuY29tbW9uLnV0aWxzLio7CgoKCi8qKgogKiBUZXN0IGZvciBzZXJp\nYWxpemVkLCBjbG9iLCBhbmQgbG9iIHR5cGVzLgogKgogKiBAYXV0aG9yIFN0\nZXZlIEtpbQogKi8KcHVibGljIGNsYXNzIFRlc3RTZXJpYWxpemVkTG9icyBl\neHRlbmRzIEFubm90YXRpb25UZXN0Q2FzZQp7CgoJcHVibGljIFRlc3RTZXJp\nYWxpemVkTG9icyhTdHJpbmcgbmFtZSkKCXsKCQlzdXBlcihuYW1lLCAiYW5u\nb3RhdGlvbmNhY3R1c2FwcCIpOwoJfQoKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIERhdGUgREFURSA9IG5ldyBEYXRlKCk7CgogICAgcHVibGljIHZvaWQg\nc2V0VXAoKSB7CiAgICAgICAgZGVsZXRlQWxsKEFubm9UZXN0MS5jbGFzcyk7\nCiAgICB9CgogICAgLy8gU2VyaWFsaXplZCBmaWVsZHMgbm90IGJlaW5nIHJl\nYWQgcHJvcGVybHkKICAgIHB1YmxpYyB2b2lkIHRlc3RTZXJpYWxpemVkKCkg\newogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3BlbkpQQUVu\ndGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nc3RhcnRUeChlbSk7CiAgICAgICAgQW5ub1Rlc3QxIHBjMSA9IG5ldyBBbm5v\nVGVzdDEoMSk7CiAgICAgICAgQW5ub1Rlc3QxIHBjMiA9IG5ldyBBbm5vVGVz\ndDEoMik7CiAgICAgICAgcGMxLnNldFNlcmlhbGl6ZWQoIkFTREFTRCIpOwog\nICAgICAgIHBjMi5zZXRTZXJpYWxpemVkKERBVEUpOwogICAgICAgIGVtLnBl\ncnNpc3QocGMxKTsKICAgICAgICBlbS5wZXJzaXN0KHBjMik7CiAgICAgICAg\nZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgZW0gPShP\ncGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBwYzEgPSBlbS5maW5kKEFubm9UZXN0MS5jbGFzcywgZW0uZ2V0\nT2JqZWN0SWQocGMxKSk7CiAgICAgICAgcGMyID0gZW0uZmluZChBbm5vVGVz\ndDEuY2xhc3MsIGVtLmdldE9iamVjdElkKHBjMikpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiQVNEQVNEIiwgcGMxLmdldFNlcmlhbGl6ZWQoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKERBVEUsIHBjMi5nZXRTZXJpYWxpemVkKCkpOwog\nICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nQmxvYigpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIp\nIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7\nCgogICAgICAgIEFubm9UZXN0MSBwYyA9IG5ldyBBbm5vVGVzdDEoMSk7CiAg\nICAgICAgcGMuc2V0QmxvYigiTm90IE51bGwiLmdldEJ5dGVzKCkpOwogICAg\nICAgIGVtLnBlcnNpc3QocGMpOwogICAgICAgIGVuZFR4KGVtKTsKICAgICAg\nICBlbmRFbShlbSk7CgogICAgICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHBjID0gZW0u\nZmluZChBbm5vVGVzdDEuY2xhc3MsIGVtLmdldE9iamVjdElkKHBjKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJOb3QgTnVsbCIsIG5ldyBTdHJpbmcocGMu\nZ2V0QmxvYigpKSk7CiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gKENvbm5l\nY3Rpb24pIGVtLmdldENvbm5lY3Rpb24oKTsKICAgICAgICBTdGF0ZW1lbnQg\nc3RtbnQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgpOwogICAgICAgIFJlc3Vs\ndFNldCBycyA9IHN0bW50LmV4ZWN1dGVRdWVyeSgiU0VMRUNUIEJMT0JWQUwg\nRlJPTSBBTk5PVEVTVDEgIgogICAgICAgICAgICArICJXSEVSRSBQSyA9IDEi\nKTsKICAgICAgICBhc3NlcnRUcnVlKHJzLm5leHQoKSk7CgogICAgICAgLyoq\nIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24p\nIGVtLmdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBEQkRpY3Rpb25hcnkg\nZGljdCA9IGNvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsKICAgICAg\nICBpZiAoZGljdC51c2VHZXRCeXRlc0ZvckJsb2JzKQogICAgICAgICAgICBy\ncy5nZXRCeXRlcygxKTsKICAgICAgICBlbHNlIGlmIChkaWN0LnVzZUdldE9i\namVjdEZvckJsb2JzKQogICAgICAgICAgICBycy5nZXRPYmplY3QoMSk7CiAg\nICAgICAgZWxzZSB7CiAgICAgICAgICAgIEJsb2IgYmxvYiA9IHJzLmdldEJs\nb2IoMSk7CiAgICAgICAgICAgIGJsb2IuZ2V0Qnl0ZXMoMUwsIChpbnQpIGJs\nb2IubGVuZ3RoKCkpOwogICAgICAgIH0KICAgICAgICBhc3NlcnRFcXVhbHMo\nIk5vdCBOdWxsIiwgbmV3IFN0cmluZyhwYy5nZXRCbG9iKCkpKTsKCiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgcnMuY2xvc2UoKTsKICAgICAgICB9IGNh\ndGNoIChTUUxFeGNlcHRpb24gZSkgewogICAgICAgIH0KICAgICAgICB0cnkg\newogICAgICAgICAgICBzdG1udC5jbG9zZSgpOwogICAgICAgIH0gY2F0Y2gg\nKFNRTEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGNvbm4uY2xvc2UoKTsKICAgICAgICB9IGNhdGNoIChTUUxF\neGNlcHRpb24gZSkgewogICAgICAgIH0qKi8KICAgICAgICBlbmRFbShlbSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdENsb2IoKQogICAgICAgIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nIGVtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7CgogICAgICAgIEFubm9UZXN0\nMSBwYyA9IG5ldyBBbm5vVGVzdDEoMSk7CiAgICAgICAgU3RyaW5nQnVmZmVy\nIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IDEwMDA7IGkrKykKICAgICAgICAgICAgYnVmLmFwcGVuZCgo\nY2hhcikgKCdhJyArIChpICUgMjQpKSk7CiAgICAgICAgcGMuc2V0Q2xvYihi\ndWYudG9TdHJpbmcoKSk7CiAgICAgICAgZW0ucGVyc2lzdChwYyk7CiAgICAg\nICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgZW0g\nPShPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBwYyA9IGVtLmZpbmQoQW5ub1Rlc3QxLmNsYXNzLGVtLmdl\ndE9iamVjdElkKHBjKSk7CiAgICAgICAgU3RyaW5nIHN0ciA9IHBjLmdldENs\nb2IoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMTAwMCwgc3RyLmxlbmd0aCgp\nKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN0ci5sZW5ndGgoKTsg\naSsrKQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoJ2EnICsgKGkgJSAyNCks\nIHN0ci5jaGFyQXQoaSkpOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KfQo=\n","encoding":"base64"}

