{"sha":"1636b5f94097537c4c36b926e5d9e4afcc7a6302","node_id":"MDQ6QmxvYjIwNjM2NDoxNjM2YjVmOTQwOTc1MzdjNGMzNmI5MjZlNWQ5ZTRhZmNjN2E2MzAy","size":5335,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1636b5f94097537c4c36b926e5d9e4afcc7a6302","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY2FjaGU7\nCgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nTmFtZWRRdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuY2FjaGUuY29tbW9uLmFwcHMuRW50aXR5MTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jYWNoZS5jb21tb24uYXBwcy5F\nbnRpdHkyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmNvbW1vbi51dGlscy5BYnN0cmFjdFRlc3RDYXNlOwoKQE5hbWVkUXVlcnko\nbmFtZSA9ICJzZXRQYXJhbTEiLAogICAgcXVlcnkgPSAiU0VMRUNUIG8gRlJP\nTSBFbnRpdHkxIG8gV0hFUkUgby5wayBMSUtFIDpwayIpCnB1YmxpYyBjbGFz\ncyBUZXN0UXVlcnlDYWNoZSBleHRlbmRzIEFic3RyYWN0VGVzdENhc2UgewoK\nICAgIEVudGl0eU1hbmFnZXIgZW07CgogICAgcHVibGljIFRlc3RRdWVyeUNh\nY2hlKFN0cmluZyBuYW1lKSB7CiAgICAgICAgc3VwZXIobmFtZSk7CiAgICAg\nICAgU3lzdGVtLnNldFByb3BlcnR5KCJjYWN0dXMuY29udGV4dFVSTCIsCiAg\nICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjkwMDAvY2FjaGVjYWN0dXMi\nKTsKICAgICAgICBlbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICB9\nCgogICAgLypwdWJsaWMgc3RhdGljIFRlc3Qgc3VpdGUoKQogICAgewogICAg\nICAgIFNlcnZsZXRUZXN0U3VpdGUgc3VpdGUgPSBuZXcgU2VydmxldFRlc3RT\ndWl0ZSgpOwogICAgICAgIHN1aXRlLmFkZFRlc3RTdWl0ZShUZXN0UXVlcnlD\nYWNoZS5jbGFzcyk7CiAgICAgICAgcmV0dXJuIHN1aXRlOwogICAgfSovCiAg\nICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBTeXN0ZW0uc2V0UHJv\ncGVydHkoImNhY3R1cy5jb250ZXh0VVJMIiwKICAgICAgICAgICAgImh0dHA6\nLy9sb2NhbGhvc3Q6OTAwMC9jYWN0dXN3ZWJhcHAiKTsKCiAgICAgICAgLy9k\nZWxldGVBbGwoRW50aXR5Mi5jbGFzcyk7CiAgICAgICAgZGVsZXRlQWxsKEVu\ndGl0eTEuY2xhc3MpOwoKICAgICAgICBpbnQgaW5zdE51bSA9IDEwOwoKICAg\nICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAgLy9jcmVhdGUgYW5kIHBlcnNp\nc3QgbXVsdGlwbGUgZW50aXR5MSBpbnN0YW5jZXMKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IGluc3ROdW07IGkrKykgewogICAgICAgICAgICBFbnRp\ndHkxIGVudCA9IG5ldyBFbnRpdHkxKGksICJzdHJpbmciICsgaSwgaSArIDIp\nOwogICAgICAgICAgICBFbnRpdHkyIGVudDIgPSBuZXcgRW50aXR5MihpICog\nMiwgImVudDIiICsgaSwgaSk7CiAgICAgICAgICAgIGVudC5zZXRFbnRpdHky\nRmllbGQoZW50Mik7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoZW50KTsKICAg\nICAgICB9CgogICAgICAgIGVuZFR4KGVtKTsKICAgICAgICBlbmRFbShlbSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFJlc3VsdExpc3QoKSB7CiAg\nICAgICAgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIExp\nc3QgbGlzdCA9IGVtLmNyZWF0ZVF1ZXJ5KCJTZWxlY3Qgb2JqZWN0KG8pIGZy\nb20gRW50aXR5MSBvIikKICAgICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsK\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwLCBsaXN0LnNpemUoKSk7CgogICAg\nICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0\nU2luZ2xlTGlzdCgpIHsKICAgICAgICBlbSA9IGN1cnJlbnRFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgU3RyaW5nIGN1cnIgPSAyICsgIiI7CgogICAgICAg\nIEVudGl0eTEgcmV0ID0gKEVudGl0eTEpIGVtCiAgICAgICAgICAgIC5jcmVh\ndGVRdWVyeSgiU0VMRUNUIG8gRlJPTSBFbnRpdHkxIG8gV0hFUkUgby5wayBM\nSUtFIDpwayIpCiAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoInBrIiwgY3Vy\ncikKICAgICAgICAgICAgLmdldFNpbmdsZVJlc3VsdCgpOwoKICAgICAgICBh\nc3NlcnROb3ROdWxsKHJldCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzdHJp\nbmcyIiwgcmV0LmdldFN0cmluZ0ZpZWxkKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscyg0LCByZXQuZ2V0SW50RmllbGQoKSk7CgogICAgICAgIGVuZEVtKGVt\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhlY3V0ZVVwZGF0ZSgp\nIHsKICAgICAgICBTdHJpbmcgY3VyciA9IDIgKyAiIjsKICAgICAgICBTdHJp\nbmcgY3VycjIgPSAyMiArICIiOwoKICAgICAgICBlbSA9IGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7CgogICAgICAgIEVu\ndGl0eTEgZW50aXR5MSA9IChFbnRpdHkxKSBlbQogICAgICAgICAgICAuY3Jl\nYXRlUXVlcnkoIlNFTEVDVCBvIEZST00gRW50aXR5MSBvIFdIRVJFIG8ucGsg\nTElLRSA6cGsiKQogICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJwayIsIGN1\ncnIpCiAgICAgICAgICAgIC5nZXRTaW5nbGVSZXN1bHQoKTsKCiAgICAgICAg\naW50IHJldCA9IGVtLmNyZWF0ZVF1ZXJ5KCJEZWxldGUgRlJPTSBFbnRpdHkx\nIG8gV0hFUkUgby5wayBMSUtFIDpwayIpCiAgICAgICAgICAgIC5zZXRQYXJh\nbWV0ZXIoInBrIiwgY3VycikKICAgICAgICAgICAgLmV4ZWN1dGVVcGRhdGUo\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMocmV0LCAxKTsKCi8vY2FzY2FkZSBy\nZW1vdmUgZG9lc24ndCByZW1vdmUgdGhlIGVudGl0eTIKICAgICAgICBpbnQg\ncmV0VG1wID0gZW0uY3JlYXRlUXVlcnkoIkRlbGV0ZSBGUk9NIEVudGl0eTIg\nbyBXSEVSRSBvLnBrIExJS0UgOnBrIikKICAgICAgICAgICAgLnNldFBhcmFt\nZXRlcigicGsiLCBlbnRpdHkxLmdldEVudGl0eTJGaWVsZCgpLmdldFBrKCkp\nCiAgICAgICAgICAgIC5leGVjdXRlVXBkYXRlKCk7CgogICAgICAgIGludCBy\nZXQyID0gZW0uY3JlYXRlUXVlcnkoIkRlbGV0ZSBGUk9NIEVudGl0eTEgbyBX\nSEVSRSBvLnBrIExJS0UgOnBrIikKICAgICAgICAgICAgLnNldFBhcmFtZXRl\ncigicGsiLCBjdXJyMikKICAgICAgICAgICAgLmV4ZWN1dGVVcGRhdGUoKTsK\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHJldDIsIDApOwoKICAgICAgICBlbmRU\neChlbSk7CiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RTZXRNYXhSZXN1bHRzKCkgewogICAgICAgIGVtID0gY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgTGlzdCBsID0gZW0uY3JlYXRl\nUXVlcnkoIlNlbGVjdCBvYmplY3QobykgZnJvbSBFbnRpdHkxIG8iKQogICAg\nICAgICAgICAuc2V0TWF4UmVzdWx0cyg1KQogICAgICAgICAgICAuZ2V0UmVz\ndWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKGwpOwogICAgICAg\nIGFzc2VydEVxdWFscyg1LCBsLnNpemUoKSk7CgogICAgICAgIGVuZEVtKGVt\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2V0Rmlyc3RSZXN1bHRz\nKCkgewogICAgICAgIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCiAg\nICAgICAgTGlzdCBsID0gZW0uY3JlYXRlUXVlcnkoIlNlbGVjdCBvYmplY3Qo\nbykgZnJvbSBFbnRpdHkxIG8iKQogICAgICAgICAgICAuc2V0Rmlyc3RSZXN1\nbHQoMykKICAgICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAg\nRW50aXR5MSBlbnQgPSAoRW50aXR5MSkgbC5nZXQoMCk7CgogICAgICAgIGFz\nc2VydE5vdE51bGwoZW50KTsKICAgICAgICBhc3NlcnRFcXVhbHMoInN0cmlu\nZzMiLCBlbnQuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDUsIGVudC5nZXRJbnRGaWVsZCgpKTsKCiAgICAgICAgZW5kRW0oZW0p\nOwogICAgfQoKICAgIC8vIFRlc3RzIEJpbmRpbmcgYW4gYXJndW1lbnQgdG8g\nYSBuYW1lZCBwYXJhbWV0ZXIuCiAgICAvLyBwaywgdGhlIG5hbWVkIHBhcmFt\nZXRlciAtLU5vdCB3b3JraW5nIHlldC0tCiAgICBwdWJsaWMgdm9pZCB4eHh0\nZXN0U2V0UGFyYW1ldGVyMSgpIHsKCiAgICAgICAgZW0gPSBjdXJyZW50RW50\naXR5TWFuYWdlcigpOwogICAgICAgIFN0cmluZyBjdXJyID0gMiArICIiOwoK\nICAgICAgICBMaXN0IHJldCA9IGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgbyBG\nUk9NIEVudGl0eTEgbyBXSEVSRSBvLnBrIExJS0UgOnBrIikKICAgICAgICAg\nICAgLnNldFBhcmFtZXRlcigicGsiLCBjdXJyKQogICAgICAgICAgICAuZ2V0\nUmVzdWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKHJldCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJldC5zaXplKCkpOwoKICAgICAgICBy\nZXQgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KCJzZXRQYXJhbTEiKQogICAgICAg\nICAgICAuc2V0UGFyYW1ldGVyKCJwayIsIGN1cnIpCiAgICAgICAgICAgIC5n\nZXRSZXN1bHRMaXN0KCk7CgogICAgICAgIGFzc2VydE5vdE51bGwocmV0KTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcmV0LnNpemUoKSk7CgogICAgICAg\nIGVuZFR4KGVtKTsKICAgIH0KCiAgICAvL3Jlc3Qgb2YgdGhlIGludGVyZmFj\nZSBpcyB0ZXN0ZWQgYnkgdGhlIENUUwp9Cg==\n","encoding":"base64"}

