{"sha":"fe473bc064cb10847de0c81bfa6de9fa6f451068","node_id":"MDQ6QmxvYjIwNjM2NDpmZTQ3M2JjMDY0Y2IxMDg0N2RlMGM4MWJmYTZkZTlmYTZmNDUxMDY4","size":41318,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/fe473bc064cb10847de0c81bfa6de9fa6f451068","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwovKgog\nKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24g\nKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5z\nZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmli\ndXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlv\nbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0Yg\nbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQog\nKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9m\nIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9s\naWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkg\nYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNv\nZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3Ry\naWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFO\nVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhw\ncmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICog\nc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBs\naW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4gICAgCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRp\nbHM7CgppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5E\nYXRlOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZh\nLnV0aWwuRW51bVNldDsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Cmlt\ncG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaXN0\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZExpc3Q7Cmlt\ncG9ydCBqYXZhLnV0aWwuU3RyaW5nVG9rZW5pemVyOwppbXBvcnQgamF2YS51\ndGlsLkxpc3RJdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5Ob1N1Y2hFbGVt\nZW50RXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKaW1wb3J0\nIGphdmEudXRpbC5Db21wYXJhdG9yOwppbXBvcnQgamF2YS5tYXRoLkJpZ0lu\ndGVnZXI7CmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDsKaW1wb3J0IGph\ndmEubGFuZy5yZWZsZWN0Lkludm9jYXRpb25UYXJnZXRFeGNlcHRpb247Cmlt\ncG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7CmltcG9ydCBqYXZhLmJl\nYW5zLkJlYW5JbmZvOwppbXBvcnQgamF2YS5iZWFucy5JbnRyb3NwZWN0b3I7\nCmltcG9ydCBqYXZhLmJlYW5zLlByb3BlcnR5RGVzY3JpcHRvcjsKaW1wb3J0\nIGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJh\neU91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uT2JqZWN0T3V0cHV0U3Ry\nZWFtOwppbXBvcnQgamF2YS5pby5CeXRlQXJyYXlJbnB1dFN0cmVhbTsKaW1w\nb3J0IGphdmEuaW8uT2JqZWN0SW5wdXRTdHJlYW07CmltcG9ydCBqYXZhLmlv\nLlN0cmluZ1dyaXRlcjsKaW1wb3J0IGphdmEuaW8uUHJpbnRXcml0ZXI7Cmlt\ncG9ydCBqYXZhLmlvLlByaW50U3RyZWFtOwppbXBvcnQgamF2YS5uZXQuVVJM\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5OwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBqYXZheC5t\nYW5hZ2VtZW50LkludHJvc3BlY3Rpb25FeGNlcHRpb247CgppbXBvcnQgb3Jn\nLmFwYWNoZS5yZWdleHAuUkVTeW50YXhFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLnJlZ2V4cC5SRTsKaW1wb3J0IG9yZy5hcGFjaGUucmVnZXhwLlJF\nVXRpbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50\nZXN0LlBlcnNpc3RlbmNlVGVzdENhc2U7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5K\nUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLkpQQUZhY2FkZUhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0\nYXRlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nQnJva2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\nbG9nLkxvZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNz\nTWV0YURhdGE7CgpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RUZXN0\nQ2FzZSBleHRlbmRzIFBlcnNpc3RlbmNlVGVzdENhc2UgewoKICAgIHByaXZh\ndGUgU3RyaW5nIHBlcnNpc3RlbmNlWG1sUmVzb3VyY2U7CiAgICBwcml2YXRl\nIE1hcDxNYXAsT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5PiBlbWZzID0K\nICAgICAgICBuZXcgSGFzaE1hcDxNYXAsT3BlbkpQQUVudGl0eU1hbmFnZXJG\nYWN0b3J5PigpOwogICAgcHJpdmF0ZSBPcGVuSlBBRW50aXR5TWFuYWdlciBj\ndXJyZW50RW50aXR5TWFuYWdlcjsKCiAgICBwcm90ZWN0ZWQgZW51bSBQbGF0\nZm9ybSB7CiAgICAgICAgRU1QUkVTUywKICAgICAgICBIWVBFUlNPTklDLAog\nICAgICAgIFBPU1RHUkVTUUwsCiAgICAgICAgTVlTUUwsCiAgICAgICAgU1FM\nU0VSVkVSLAogICAgICAgIERCMiwKICAgICAgICBPUkFDTEUsCiAgICAgICAg\nREVSQlksCiAgICAgICAgSU5GT1JNSVgsCiAgICAgICAgUE9JTlRCQVNFLAog\nICAgICAgIFNZQkFTRSwKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5nIG11\nbHRpVGhyZWFkRXhlY3V0aW5nID0gbnVsbDsKICAgIHByb3RlY3RlZCBib29s\nZWFuIGluVGltZW91dFRocmVhZCA9IGZhbHNlOwoKCiAgICBwdWJsaWMgQWJz\ndHJhY3RUZXN0Q2FzZShTdHJpbmcgbmFtZSwgU3RyaW5nIHMpIHsKICAgICAg\nICBzZXROYW1lKG5hbWUpOwogICAgICAgIHBlcnNpc3RlbmNlWG1sUmVzb3Vy\nY2UgPSBjb21wdXRlUGVyc2lzdGVuY2VYbWxSZXNvdXJjZShzKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN1cGVyLnRlYXJEb3duKCk7\nCiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgZm9yIChFbnRpdHlN\nYW5hZ2VyRmFjdG9yeSBlbWYgOiBlbWZzLnZhbHVlcygpKSB7CiAgICAgICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGNsb3NlRU1GKGVt\nZik7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cgog\nICAgcHVibGljIEFic3RyYWN0VGVzdENhc2UoKSB7CiAgICB9CgogICAgcHVi\nbGljIEFic3RyYWN0VGVzdENhc2UoU3RyaW5nIG5hbWUpIHsKICAgICAgICBz\nZXROYW1lKG5hbWUpOwogICAgfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgY29t\ncHV0ZVBlcnNpc3RlbmNlWG1sUmVzb3VyY2UoU3RyaW5nIHMpIHsKICAgICAg\nICBTdHJpbmcgcmVzb3VyY2VOYW1lID0gZ2V0Q2xhc3MoKS5nZXRQYWNrYWdl\nKCkuZ2V0TmFtZSgpCiAgICAgICAgICAgIC5yZXBsYWNlQWxsKCJcXC4iLCAi\nLyIpOwogICAgICAgIHJlc291cmNlTmFtZSArPSAiL2NvbW1vbi9hcHBzL01F\nVEEtSU5GL3BlcnNpc3RlbmNlLnhtbCI7CiAgICAgICAgVVJMIHJlc291cmNl\nID0gZ2V0Q2xhc3MoKS5nZXRDbGFzc0xvYWRlcigpLmdldFJlc291cmNlKHJl\nc291cmNlTmFtZSk7CiAgICAgICAgaWYgKHJlc291cmNlICE9IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiByZXNvdXJjZU5hbWU7CiAgICAgICAgcmV0dXJu\nIGRlZmF1bHRQZXJzaXN0ZW5jZVhtbFJlc291cmNlKCk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIFN0cmluZyBkZWZhdWx0UGVyc2lzdGVuY2VYbWxSZXNvdXJj\nZSgpIHsKICAgICAgICByZXR1cm4gIm9yZy9hcGFjaGUvb3BlbmpwYS9wZXJz\naXN0ZW5jZS8iICsKICAgICAgICAgICAgImNvbW1vbi9hcHBzL01FVEEtSU5G\nL3BlcnNpc3RlbmNlLnhtbCI7CiAgICB9CgogICAgcHJvdGVjdGVkIE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgZ2V0U3RhdGVNYW5hZ2VyKE9iamVjdCBvYmosCiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSkgewogICAgICAgIHJldHVybiBKUEFG\nYWNhZGVIZWxwZXIudG9Ccm9rZXIoZW0pLmdldFN0YXRlTWFuYWdlcihvYmop\nOwogICAgfQoKICAgIHByb3RlY3RlZCBpbnQgZGVsZXRlQWxsKENsYXNzIHR5\ncGUsIEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBDbGFzc01ldGFEYXRh\nIG1ldGEgPSBKUEFGYWNhZGVIZWxwZXIuZ2V0TWV0YURhdGEoZW0sIHR5cGUp\nOwogICAgICAgIGlmIChtZXRhICE9IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBlbS5jcmVhdGVRdWVyeSgiZGVsZXRlIGZyb20gIiArIG1ldGEuZ2V0VHlw\nZUFsaWFzKCkpCiAgICAgICAgICAgICAgICAuZXhlY3V0ZVVwZGF0ZSgpOwog\nICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgfQoKICAg\nIHByb3RlY3RlZCBpbnQgZGVsZXRlQWxsKENsYXNzLi4uIHR5cGVzKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGdldEVtZigpLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgaW50IHJldCA9IDA7CiAgICAgICAgZm9yIChDbGFzcyB0\neXBlIDogdHlwZXMpCiAgICAgICAgICAgIHJldCArPSBkZWxldGVBbGwodHlw\nZSwgZW0pOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICByZXR1cm4gcmV0OwogICAg\nfQoKICAgIHByb3RlY3RlZCBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkg\nZ2V0RW1mKE1hcCBtYXApIHsKICAgICAgICBpZiAobWFwID09IG51bGwpCiAg\nICAgICAgICAgIG1hcCA9IG5ldyBIYXNoTWFwKCk7CiAgICAgICAgQ29sbGVj\ndGlvbiBrZXlzID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgIGZvciAoT2Jq\nZWN0IGtleSA6IG1hcC5rZXlTZXQoKSkKICAgICAgICAgICAgaWYgKGtleS50\nb1N0cmluZygpLnN0YXJ0c1dpdGgoImtvZG8iKSkKICAgICAgICAgICAgICAg\nIGtleXMuYWRkKGtleSk7CiAgICAgICAgaWYgKGtleXMuc2l6ZSgpID4gMCkK\nICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbigKICAgICAgICAgICAgICAgICJrb2RvLXByZWZpeGVkIHByb3BlcnRpZXMg\nbXVzdCBiZSBjb252ZXJ0ZWQgdG8gb3BlbmpwYS4gIiArCiAgICAgICAgICAg\nICAgICAgICAgIlByb3BlcnRpZXM6ICIgKyBrZXlzKTsKCiAgICAgICAgYWRk\nUHJvcGVydGllcyhtYXApOwoKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nckZhY3RvcnkgZW1mID0gZW1mcy5nZXQobWFwKTsKICAgICAgICBpZiAoZW1m\nID09IG51bGwpIHsKICAgICAgICAgICAgZW1mID0gT3BlbkpQQVBlcnNpc3Rl\nbmNlLmNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KAogICAgICAgICAgICAg\nICAgIlRlc3RDb252IiwgcGVyc2lzdGVuY2VYbWxSZXNvdXJjZSwgbWFwKTsK\nICAgICAgICAgICAgZW1mcy5wdXQobWFwLCBlbWYpOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gZW1mOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGFk\nZFByb3BlcnRpZXMoTWFwIG1hcCkgewogICAgICAgIGlmICghbWFwLmNvbnRh\naW5zS2V5KCJvcGVuanBhLmpkYmMuU3luY2hyb25pemVNYXBwaW5ncyIpKQog\nICAgICAgICAgICBtYXAucHV0KCJvcGVuanBhLmpkYmMuU3luY2hyb25pemVN\nYXBwaW5ncyIsCiAgICAgICAgICAgICAgICAiYnVpbGRTY2hlbWEoRm9yZWln\nbktleXM9dHJ1ZSwiICsKICAgICAgICAgICAgICAgICAgICAiU2NoZW1hQWN0\naW9uPSdhZGQsZGVsZXRlVGFibGVDb250ZW50cycpIik7CiAgICB9CgogICAg\ncHJvdGVjdGVkIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBnZXRFbWYo\nKSB7CiAgICAgICAgTWFwIG0gPSBuZXcgSGFzaE1hcCgpOwogICAgICAgIHJl\ndHVybiBnZXRFbWYobSk7CiAgICB9CgogICAgcHJvdGVjdGVkIEJyb2tlckZh\nY3RvcnkgZ2V0QnJva2VyRmFjdG9yeSgpIHsKICAgICAgICByZXR1cm4gSlBB\nRmFjYWRlSGVscGVyLnRvQnJva2VyRmFjdG9yeShnZXRFbWYoKSk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIEJyb2tlckZhY3RvcnkgZ2V0QnJva2VyRmFjdG9y\neShTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoICUg\nMiAhPSAwKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50\nRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgIm9kZCBudW1iZXIgb2YgZWxl\nbWVudHMgaW4gYXJnIGFycmF5Iik7CiAgICAgICAgTWFwIG1hcCA9IG5ldyBI\nYXNoTWFwKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhcmdzLmxl\nbmd0aDsgaSA9IGkgKyAyKQogICAgICAgICAgICBtYXAucHV0KGFyZ3NbaV0s\nIGFyZ3NbaSsxXSk7CiAgICAgICAgcmV0dXJuIEpQQUZhY2FkZUhlbHBlci50\nb0Jyb2tlckZhY3RvcnkoZ2V0RW1mKG1hcCkpOwogICAgfQoKICAgIHByb3Rl\nY3RlZCBPcGVuSlBBRW50aXR5TWFuYWdlciBjdXJyZW50RW50aXR5TWFuYWdl\ncigpIHsKICAgICAgICBpZiAoY3VycmVudEVudGl0eU1hbmFnZXIgPT0gbnVs\nbCB8fCAhY3VycmVudEVudGl0eU1hbmFnZXIuaXNPcGVuKCkpCiAgICAgICAg\nICAgIGN1cnJlbnRFbnRpdHlNYW5hZ2VyID0gZ2V0RW1mKCkuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIHJldHVybiBjdXJyZW50RW50aXR5TWFu\nYWdlcjsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBzdGFydFR4KEVudGl0\neU1hbmFnZXIgZW0pIHsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNBY3RpdmVU\neChFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAgcmV0dXJuIGVtLmdldFRy\nYW5zYWN0aW9uKCkuaXNBY3RpdmUoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQg\ndm9pZCBlbmRUeChFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAgaWYgKGVt\nLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkgewogICAgICAgICAgICBp\nZiAoZW0uZ2V0VHJhbnNhY3Rpb24oKS5nZXRSb2xsYmFja09ubHkoKSkKICAg\nICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsK\nICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICB9CiAgICB9CgogICAgcHJvdGVj\ndGVkIHZvaWQgcm9sbGJhY2tUeChFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgfQoKICAg\nIHByb3RlY3RlZCB2b2lkIGVuZEVtKEVudGl0eU1hbmFnZXIgZW0pIHsKICAg\nICAgICBpZiAoZW0uaXNPcGVuKCkpCiAgICAgICAgICAgIGVtLmNsb3NlKCk7\nCiAgICAgICAgaWYgKGVtID09IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKQogICAg\nICAgIGN1cnJlbnRFbnRpdHlNYW5hZ2VyID0gbnVsbDsKICAgIH0KCiAgICBw\ncm90ZWN0ZWQgT2JqZWN0IGdldFN0YWNrVHJhY2UoVGhyb3dhYmxlIHQpIHsK\nICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRp\nb24oKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgT3BlbkpQQUNvbmZpZ3VyYXRp\nb24gZ2V0Q29uZmlndXJhdGlvbigpIHsKICAgICAgICByZXR1cm4gZ2V0RW1m\nKCkuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgfQoKICAgIHByb3RlY3RlZCBQ\nbGF0Zm9ybSBnZXRDdXJyZW50UGxhdGZvcm0oKSB7CiAgICAgICAgdGhyb3cg\nbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgYnVnKGludCBpZCwgU3RyaW5nIHMpIHsKICAg\nICAgICBidWcoaWQsIG51bGwsIHMpOwogICAgfQogICAgCiAgICBwcm90ZWN0\nZWQgdm9pZCBidWcoUGxhdGZvcm0gcGxhdGZvcm0sIGludCBpZCwgVGhyb3dh\nYmxlIHQsIFN0cmluZyBzKSB7CiAgICAgICAgYnVnKEVudW1TZXQub2YocGxh\ndGZvcm0pLCBpZCwgdCwgcyk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQg\nYnVnKEVudW1TZXQ8UGxhdGZvcm0+IHBsYXRmb3JtcywgaW50IGlkLCBUaHJv\nd2FibGUgdCwgU3RyaW5nIHMpIHsKICAgICAgICBpZiAocGxhdGZvcm1zLmNv\nbnRhaW5zKGdldEN1cnJlbnRQbGF0Zm9ybSgpKSkKICAgICAgICAgICAgYnVn\nKGlkLCB0LCBzKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGZhaWwoU3Ry\naW5nLmZvcm1hdCgKICAgICAgICAgICAgICAgICJidWcgJXMgaXMgdW5leHBl\nY3RlZGx5IG9jY3VycmluZyBvbiBwbGF0Zm9ybSAlcyIsCiAgICAgICAgICAg\nICAgICBpZCwgZ2V0Q3VycmVudFBsYXRmb3JtKCkpKTsKICAgIH0KCiAgICBw\ncm90ZWN0ZWQgdm9pZCBidWcoaW50IGlkLCBUaHJvd2FibGUgdCwgU3RyaW5n\nIHMpIHsKICAgICAgICBpZiAodCAhPSBudWxsKSB7CiAgICAgICAgICAgIGlm\nICh0IGluc3RhbmNlb2YgUnVudGltZUV4Y2VwdGlvbikKICAgICAgICAgICAg\nICAgIHRocm93IChSdW50aW1lRXhjZXB0aW9uKSB0OwogICAgICAgICAgICBl\nbHNlCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlv\nbih0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmYWlsKHMpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFN1cHBvcnQgbWV0aG9k\nIHRvIGdldCBhIHJhbmRvbSBJbnRlZ2VyIGZvciB0ZXN0aW5nLgogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIEludGVnZXIgcmFuZG9tSW50KCkgewogICAg\nICAgIHJldHVybiBuZXcgSW50ZWdlcigoaW50KSAoTWF0aC5yYW5kb20oKSAq\nIEludGVnZXIuTUFYX1ZBTFVFKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBT\ndXBwb3J0IG1ldGhvZCB0byBnZXQgYSByYW5kb20gQ2hhcmFjdGVyIGZvciB0\nZXN0aW5nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIENoYXJhY3RlciBy\nYW5kb21DaGFyKCkgewogICAgICAgIGNoYXIgW10gVEVTVF9DSEFSX0FSUkFZ\nID0gbmV3IGNoYXIgW117CiAgICAgICAgICAgICdhJywgJ2InLCAnYycsICdk\nJywgJ2UnLCAnZicsICdnJywgJ2gnLCAnaScsCiAgICAgICAgICAgICdqJywg\nJ2snLCAnbCcsICdtJywgJ24nLCAnbycsICdwJywgJ3EnLCAncicsCiAgICAg\nICAgICAgICdzJywgJ3QnLCAndScsICd2JywgJ3cnLCAneCcsICd5JywgJ3on\nLCAnMScsCiAgICAgICAgICAgICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAn\nNycsICc4JywgJzknIH07CgogICAgICAgIHJldHVybiBuZXcgQ2hhcmFjdGVy\nKFRFU1RfQ0hBUl9BUlJBWVsKICAgICAgICAgICAgICAgIChpbnQpIChNYXRo\nLnJhbmRvbSgpICogVEVTVF9DSEFSX0FSUkFZLmxlbmd0aCldKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFN1cHBvcnQgbWV0aG9kIHRvIGdldCBhIHJhbmRv\nbSBMb25nIGZvciB0ZXN0aW5nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIExvbmcgcmFuZG9tTG9uZygpIHsKICAgICAgICByZXR1cm4gbmV3IExvbmco\nKGxvbmcpIChNYXRoLnJhbmRvbSgpICogTG9uZy5NQVhfVkFMVUUpKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFN1cHBvcnQgbWV0aG9kIHRvIGdldCBhIHJh\nbmRvbSBTaG9ydCBmb3IgdGVzdGluZy4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBTaG9ydCByYW5kb21TaG9ydCgpIHsKICAgICAgICByZXR1cm4gbmV3\nIFNob3J0KChzaG9ydCkgKE1hdGgucmFuZG9tKCkgKiBTaG9ydC5NQVhfVkFM\nVUUpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFN1cHBvcnQgbWV0aG9kIHRv\nIGdldCBhIHJhbmRvbSBEb3VibGUgZm9yIHRlc3RpbmcuCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgRG91YmxlIHJhbmRvbURvdWJsZSgpIHsKICAgICAg\nICByZXR1cm4gbmV3IERvdWJsZSgoZG91YmxlKSAoTWF0aC5yb3VuZChNYXRo\nLnJhbmRvbSgpICogNTAwMGQpKSAvIDEwMDBkKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFN1cHBvcnQgbWV0aG9kIHRvIGdldCBhIHJhbmRvbSBGbG9hdCBm\nb3IgdGVzdGluZy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBGbG9hdCBy\nYW5kb21GbG9hdCgpIHsKICAgICAgICByZXR1cm4gbmV3IEZsb2F0KChmbG9h\ndCkgKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDUwMDBmKSkgLyAxMDAw\nZik7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdXBwb3J0IG1ldGhvZCB0byBn\nZXQgYSByYW5kb20gQnl0ZSBmb3IgdGVzdGluZy4KICAgICAqLwogICAgcHVi\nbGljIHN0YXRpYyBCeXRlIHJhbmRvbUJ5dGUoKSB7CiAgICAgICAgcmV0dXJu\nIG5ldyBCeXRlKChieXRlKSAoTWF0aC5yYW5kb20oKSAqIEJ5dGUuTUFYX1ZB\nTFVFKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdXBwb3J0IG1ldGhvZCB0\nbyBnZXQgYSByYW5kb20gQm9vbGVhbiBmb3IgdGVzdGluZy4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBCb29sZWFuIHJhbmRvbUJvb2xlYW4oKSB7CiAg\nICAgICAgcmV0dXJuIG5ldyBCb29sZWFuKE1hdGgucmFuZG9tKCkgPiAwLjUg\nPyB0cnVlIDogZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICogU3VwcG9y\ndCBtZXRob2QgdG8gZ2V0IGEgcmFuZG9tIERhdGUgZm9yIHRlc3RpbmcuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgRGF0ZSByYW5kb21EYXRlKCkgewog\nICAgICAgIGxvbmcgbWlsbGlzID0gKGxvbmcpIChNYXRoLnJhbmRvbSgpICog\nU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpOwoKICAgICAgICAvLyByb3Vu\nZCBtaWxsaXMgdG8gdGhlIG5lYXJlc3QgMTAwMDogdGhpcyBpcyBiZWNhdXNl\nIHNvbWUKICAgICAgICAvLyBkYXRhYmFzZXMgZG8gbm90IHN0b3JlIHRoZSBt\naWxsaXNlY29uZHMgY29ycmVjdGx5IChlLmcuLCBNeVNRTCkuCiAgICAgICAg\nLy8gVGhpcyBpcyBhIHJlYWxseSBhIGJ1ZyB3ZSBzaG91bGQgZml4LiBGQyAj\nMjcuCiAgICAgICAgbWlsbGlzIC09IChtaWxsaXMgJSAxMDAwKTsKCiAgICAg\nICAgcmV0dXJuIG5ldyBEYXRlKG1pbGxpcyk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTdXBwb3J0IG1ldGhvZCB0byBnZXQgYSByYW5kb20gU3RyaW5nIGZv\nciB0ZXN0aW5nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBy\nYW5kb21TdHJpbmcoKSB7CiAgICAgICAgLy8gZGVmYXVsdCB0byBhIHNtYWxs\nIHN0cmluZywgaW4gY2FzZSBjb2x1bW4gc2l6ZXMgYXJlCiAgICAgICAgLy8g\nbGltaXRlZCAoc3VjaCBhcyB3aXRoIGEgc3RyaW5nIHByaW1hcnkga2V5KQog\nICAgICAgIHJldHVybiByYW5kb21TdHJpbmcoNTApOwogICAgfQoKICAgIC8q\nKgogICAgICogU3VwcG9ydCBtZXRob2QgdG8gZ2V0IGEgcmFuZG9tIFN0cmlu\nZyBmb3IgdGVzdGluZy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBTdHJp\nbmcgcmFuZG9tU3RyaW5nKGludCBsZW4pIHsKICAgICAgICBTdHJpbmdCdWZm\nZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgKGludCkgKE1hdGgucmFuZG9tKCkgKiBsZW4pICsgMTsg\naSsrKQogICAgICAgICAgICBidWYuYXBwZW5kKHJhbmRvbUNoYXIoKSk7CiAg\nICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwogICAgfQoKICAgIC8qKgog\nICAgICogU3VwcG9ydCBtZXRob2QgdG8gZ2V0IGEgcmFuZG9tIGNsb2IgZm9y\nIHRlc3RpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIHJh\nbmRvbUNsb2IoKSB7CiAgICAgICAgU3RyaW5nQnVmZmVyIHNidWYgPSBuZXcg\nU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgd2hpbGUgKHNidWYubGVuZ3RoKCkg\nPCAoNSAqIDEwMjQpKSAvLyBhdCBsZWFzdCA1SwogICAgICAgIHsKICAgICAg\nICAgICAgc2J1Zi5hcHBlbmQocmFuZG9tU3RyaW5nKDEwMjQpKTsKICAgICAg\nICB9CgogICAgICAgIHJldHVybiBzYnVmLnRvU3RyaW5nKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTdXBwb3J0IG1ldGhvZCB0byBnZXQgYSByYW5kb20g\nQmlnSW50ZWdlciBmb3IgdGVzdGluZy4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBCaWdJbnRlZ2VyIHJhbmRvbUJpZ0ludGVnZXIoKSB7CiAgICAgICAg\nLy8gdG9vIG1hbnkgb2Ygb3VyIHRlc3QgZGF0YWJhc2VzIGRvbid0IHN1cHBv\ncnQgYmlnaW50cyA+IE1BWF9MT05HOgogICAgICAgIC8vIEkgZG9uJ3QgbGlr\nZSBpdCwgYnV0IGZvciBub3csIGxldCdzIG9ubHkgdGVzdCBiZWxvdyBNQVhf\nTE9ORwogICAgICAgIEJpZ0ludGVnZXIgbG5nID0gbmV3IEJpZ0ludGVnZXIo\nCiAgICAgICAgICAgICAgICAoKGxvbmcpIChNYXRoLnJhbmRvbSgpICogTG9u\nZy5NQVhfVkFMVUUpKSArICIiKTsKCiAgICAgICAgQmlnSW50ZWdlciBtdWx0\naXBsaWVyID0gbmV3IEJpZ0ludGVnZXIoIjEiKTsKICAgICAgICAvLyAoMSAr\nIChpbnQpKE1hdGgucmFuZG9tICgpICogMTAwMDApKSArICIiKTsKICAgICAg\nICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkKICAgICAgICAgICAgbXVsdGlw\nbGllciA9IG11bHRpcGxpZXIubXVsdGlwbHkobmV3IEJpZ0ludGVnZXIoIi0x\nIikpOwoKICAgICAgICByZXR1cm4gbG5nLm11bHRpcGx5KG11bHRpcGxpZXIp\nOwogICAgfQoKICAgIC8qKgogICAgICogU3VwcG9ydCBtZXRob2QgdG8gZ2V0\nIGEgcmFuZG9tIEJpZ0RlY2ltYWwgZm9yIHRlc3RpbmcuCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgQmlnRGVjaW1hbCByYW5kb21CaWdEZWNpbWFsKCkg\newogICAgICAgIEJpZ0ludGVnZXIgc3RhcnQgPSByYW5kb21CaWdJbnRlZ2Vy\nKCk7CiAgICAgICAgU3RyaW5nIHN0ciA9IHN0YXJ0LnRvU3RyaW5nKCk7CiAg\nICAgICAgLy8gdHJ1bmNhdGUgb2ZmIHRoZSBsYXN0IDggZGlnaXRzOiB3ZSBz\ndGlsbCBnZXQgc29tZQogICAgICAgIC8vIG92ZXJmbG93cyB3aXRoIGxhbWUg\nZGF0YWJhc2VzLgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgODsgaSsr\nKQogICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCgpID4gMikKICAgICAgICAg\nICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgc3RyLmxlbmd0aCgpIC0g\nMSk7CiAgICAgICAgc3RhcnQgPSBuZXcgQmlnSW50ZWdlcihzdHIpOwoKICAg\nICAgICBTdHJpbmcgdmFsID0gc3RhcnQgKyAiLiIKICAgICAgICAgICAgICAg\nICsgKChpbnQpIChNYXRoLnJhbmRvbSgpICogMTApKQogICAgICAgICAgICAg\nICAgKyAoKGludCkgKE1hdGgucmFuZG9tKCkgKiAxMCkpCiAgICAgICAgICAg\nICAgICArICgoaW50KSAoTWF0aC5yYW5kb20oKSAqIDEwKSkKICAgICAgICAg\nICAgICAgICsgKChpbnQpIChNYXRoLnJhbmRvbSgpICogMTApKQogICAgICAg\nICAgICAgICAgKyAoKGludCkgKE1hdGgucmFuZG9tKCkgKiAxMCkpCiAgICAg\nICAgICAgICAgICArICgoaW50KSAoTWF0aC5yYW5kb20oKSAqIDEwKSkKICAg\nICAgICAgICAgICAgICsgKChpbnQpIChNYXRoLnJhbmRvbSgpICogMTApKQog\nICAgICAgICAgICAgICAgKyAoKGludCkgKE1hdGgucmFuZG9tKCkgKiAxMCkp\nCiAgICAgICAgICAgICAgICArICgoaW50KSAoTWF0aC5yYW5kb20oKSAqIDEw\nKSkKICAgICAgICAgICAgICAgICsgKChpbnQpIChNYXRoLnJhbmRvbSgpICog\nMTApKTsKCiAgICAgICAgcmV0dXJuIG5ldyBCaWdEZWNpbWFsKHZhbCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBTdXBwb3J0IG1ldGhvZCB0byBnZXQgYSBy\nYW5kb20gYmxvYiBmb3IgdGVzdGluZy4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBieXRlW10gcmFuZG9tQmxvYigpIHsKICAgICAgICAvLyB1cCB0byAx\nMDBLIGJsb2IKICAgICAgICBieXRlIFtdIGJsb2IgPSBuZXcgYnl0ZSBbKGlu\ndCkgKE1hdGgucmFuZG9tKCkgKiAxMDI0ICogMTAwKV07CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBibG9iLmxlbmd0aDsgaSsrKQogICAgICAgICAg\nICBibG9iW2ldID0gcmFuZG9tQnl0ZSgpLmJ5dGVWYWx1ZSgpOwoKICAgICAg\nICByZXR1cm4gYmxvYjsKICAgIH0KCiAgICAvKioKICAgICAqIEludm9rZSBz\nZXR0ZXJzIGZvciBwaW1pdGl2ZXMgYW5kIHByaW1pdGl2ZSB3cmFwcGVycyBv\nbiB0aGUKICAgICAqIHNwZWNpZmllZCBvYmplY3QuCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgT2JqZWN0IHJhbmRvbWl6ZUJlYW4oT2JqZWN0IGJlYW4p\nCiAgICB0aHJvd3MgSW50cm9zcGVjdGlvbkV4Y2VwdGlvbiwgSWxsZWdhbEFj\nY2Vzc0V4Y2VwdGlvbiwKICAgICAgICBJbnZvY2F0aW9uVGFyZ2V0RXhjZXB0\naW9uLCBqYXZhLmJlYW5zLkludHJvc3BlY3Rpb25FeGNlcHRpb24gewogICAg\nICAgIEJlYW5JbmZvIGluZm8gPSBJbnRyb3NwZWN0b3IuZ2V0QmVhbkluZm8o\nYmVhbi5nZXRDbGFzcygpKTsKICAgICAgICBQcm9wZXJ0eURlc2NyaXB0b3Jb\nXSBwcm9wcyA9IGluZm8uZ2V0UHJvcGVydHlEZXNjcmlwdG9ycygpOwogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsK\nICAgICAgICAgICAgTWV0aG9kIHdyaXRlID0gcHJvcHNbaV0uZ2V0V3JpdGVN\nZXRob2QoKTsKICAgICAgICAgICAgaWYgKHdyaXRlID09IG51bGwpCiAgICAg\nICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIENsYXNzIFtdIHBh\ncmFtcyA9IHdyaXRlLmdldFBhcmFtZXRlclR5cGVzKCk7CiAgICAgICAgICAg\nIGlmIChwYXJhbXMgPT0gbnVsbCB8fCBwYXJhbXMubGVuZ3RoICE9IDEpCiAg\nICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIENsYXNzIHBh\ncmFtVHlwZSA9IHBhcmFtc1swXTsKICAgICAgICAgICAgT2JqZWN0IGFyZyA9\nIG51bGw7CgogICAgICAgICAgICBpZiAocGFyYW1UeXBlID09IGJvb2xlYW4u\nY2xhc3MgfHwgcGFyYW1UeXBlID09IEJvb2xlYW4uY2xhc3MpCiAgICAgICAg\nICAgICAgICBhcmcgPSByYW5kb21Cb29sZWFuKCk7CiAgICAgICAgICAgIGVs\nc2UgaWYgKHBhcmFtVHlwZSA9PSBieXRlLmNsYXNzIHx8IHBhcmFtVHlwZSA9\nPSBCeXRlLmNsYXNzKQogICAgICAgICAgICAgICAgYXJnID0gcmFuZG9tQnl0\nZSgpOwogICAgICAgICAgICBlbHNlIGlmIChwYXJhbVR5cGUgPT0gY2hhci5j\nbGFzcyB8fCBwYXJhbVR5cGUgPT0gQ2hhcmFjdGVyLmNsYXNzKQogICAgICAg\nICAgICAgICAgYXJnID0gcmFuZG9tQ2hhcigpOwogICAgICAgICAgICBlbHNl\nIGlmIChwYXJhbVR5cGUgPT0gc2hvcnQuY2xhc3MgfHwgcGFyYW1UeXBlID09\nIFNob3J0LmNsYXNzKQogICAgICAgICAgICAgICAgYXJnID0gcmFuZG9tU2hv\ncnQoKTsKICAgICAgICAgICAgZWxzZSBpZiAocGFyYW1UeXBlID09IGludC5j\nbGFzcyB8fCBwYXJhbVR5cGUgPT0gSW50ZWdlci5jbGFzcykKICAgICAgICAg\nICAgICAgIGFyZyA9IHJhbmRvbUludCgpOwogICAgICAgICAgICBlbHNlIGlm\nIChwYXJhbVR5cGUgPT0gbG9uZy5jbGFzcyB8fCBwYXJhbVR5cGUgPT0gTG9u\nZy5jbGFzcykKICAgICAgICAgICAgICAgIGFyZyA9IHJhbmRvbUxvbmcoKTsK\nICAgICAgICAgICAgZWxzZSBpZiAocGFyYW1UeXBlID09IGRvdWJsZS5jbGFz\ncyB8fCBwYXJhbVR5cGUgPT0gRG91YmxlLmNsYXNzKQogICAgICAgICAgICAg\nICAgYXJnID0gcmFuZG9tRG91YmxlKCk7CiAgICAgICAgICAgIGVsc2UgaWYg\nKHBhcmFtVHlwZSA9PSBmbG9hdC5jbGFzcyB8fCBwYXJhbVR5cGUgPT0gRmxv\nYXQuY2xhc3MpCiAgICAgICAgICAgICAgICBhcmcgPSByYW5kb21GbG9hdCgp\nOwogICAgICAgICAgICBlbHNlIGlmIChwYXJhbVR5cGUgPT0gU3RyaW5nLmNs\nYXNzKQogICAgICAgICAgICAgICAgYXJnID0gcmFuZG9tU3RyaW5nKCk7CiAg\nICAgICAgICAgIGVsc2UgaWYgKHBhcmFtVHlwZSA9PSBCaWdJbnRlZ2VyLmNs\nYXNzKQogICAgICAgICAgICAgICAgYXJnID0gcmFuZG9tQmlnSW50ZWdlcigp\nOwogICAgICAgICAgICBlbHNlIGlmIChwYXJhbVR5cGUgPT0gQmlnRGVjaW1h\nbC5jbGFzcykKICAgICAgICAgICAgICAgIGFyZyA9IHJhbmRvbUJpZ0RlY2lt\nYWwoKTsKICAgICAgICAgICAgZWxzZSBpZiAocGFyYW1UeXBlID09IERhdGUu\nY2xhc3MpCiAgICAgICAgICAgICAgICBhcmcgPSByYW5kb21EYXRlKCk7Cgog\nICAgICAgICAgICBpZiAoYXJnICE9IG51bGwpCiAgICAgICAgICAgICAgICB3\ncml0ZS5pbnZva2UoYmVhbiwgbmV3IE9iamVjdCBbXXsgYXJnIH0pOwogICAg\nICAgIH0KCiAgICAgICAgcmV0dXJuIGJlYW47CiAgICB9CgogICAgcHJvdGVj\ndGVkIHZvaWQgYXNzZXJ0U2l6ZShpbnQgc2l6ZSwgQ29sbGVjdGlvbiBjKSB7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHNpemUsIGMuc2l6ZSgpKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgdm9pZCBhc3NlcnRTaXplKGludCBzaXplLCBRdWVy\neSBxKSB7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHNpemUsIHEuZ2V0UmVzdWx0\nTGlzdCgpLnNpemUoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXJpYWxp\nemUgYW5kIGRlc2VyaWFsaXplIHRoZSBvYmplY3QuCiAgICAgKgogICAgICog\nQHBhcmFtIHZhbGlkYXRlRXF1YWxpdHkgbWFrZSBzdXJlIHRoZSBoYXNoQ29k\nZSBhbmQgZXF1YWxzCiAgICAgKiBtZXRob2RzIGhvbGQgdHJ1ZQogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdCByb3VuZHRyaXAoT2JqZWN0IG9y\naWcsIGJvb2xlYW4gdmFsaWRhdGVFcXVhbGl0eSkKICAgICAgICB0aHJvd3Mg\nSU9FeGNlcHRpb24sIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewogICAgICAg\nIGFzc2VydE5vdE51bGwob3JpZyk7CgogICAgICAgIEJ5dGVBcnJheU91dHB1\ndFN0cmVhbSBib3V0ID0gbmV3IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwog\nICAgICAgIE9iamVjdE91dHB1dFN0cmVhbSBvdXQgPSBuZXcgT2JqZWN0T3V0\ncHV0U3RyZWFtKGJvdXQpOwogICAgICAgIG91dC53cml0ZU9iamVjdChvcmln\nKTsKICAgICAgICBCeXRlQXJyYXlJbnB1dFN0cmVhbSBiaW4gPSBuZXcgQnl0\nZUFycmF5SW5wdXRTdHJlYW0oCiAgICAgICAgICAgIGJvdXQudG9CeXRlQXJy\nYXkoKSk7CiAgICAgICAgT2JqZWN0SW5wdXRTdHJlYW0gaW4gPSBuZXcgT2Jq\nZWN0SW5wdXRTdHJlYW0oYmluKTsKICAgICAgICBPYmplY3QgcmVzdWx0ID0g\naW4ucmVhZE9iamVjdCgpOwoKICAgICAgICBpZiAodmFsaWRhdGVFcXVhbGl0\neSkgewogICAgICAgICAgICBhc3NlcnRFcXVhbHMob3JpZy5oYXNoQ29kZSgp\nLCByZXN1bHQuaGFzaENvZGUoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncyhvcmlnLCByZXN1bHQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJl\nc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0\naGUgc3BlY2lmaWVkIGlucHV0IG1hdGNoZXMgdGhlIHJlZ3VsYXIgZXhwcmVz\nc2lvbiByZWdleC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFu\nIG1hdGNoZXMoU3RyaW5nIHJlZ2V4LCBTdHJpbmcgaW5wdXQpCiAgICAgICAg\ndGhyb3dzIFJFU3ludGF4RXhjZXB0aW9uIHsKICAgICAgICBSRSByZSA9IFJF\nVXRpbC5jcmVhdGVSRShyZWdleCk7CiAgICAgICAgcmV0dXJuIHJlLm1hdGNo\nKGlucHV0KTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYXNzZXJ0\nTWF0Y2hlcyhTdHJpbmcgcmVnZXgsIFN0cmluZyBpbnB1dCkgewogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGlmICghKG1hdGNoZXMocmVnZXgsIGlucHV0\nKSkpCiAgICAgICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCByZWd1bGFyIGV4\ncHJlc3Npb246IDwiICsgcmVnZXggKyAiPiIKICAgICAgICAgICAgICAgICAg\nICArICIgZGlkIG5vdCBtYXRjaDogPCIgKyBpbnB1dCArICI+Iik7CiAgICAg\nICAgfSBjYXRjaCAoUkVTeW50YXhFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKGUudG9TdHJp\nbmcoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9p\nZCBhc3NlcnROb3RNYXRjaGVzKFN0cmluZyByZWdleCwgU3RyaW5nIGlucHV0\nKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKG1hdGNoZXMocmVn\nZXgsIGlucHV0KSkKICAgICAgICAgICAgICAgIGZhaWwoIlJlZ3VsYXIgZXhw\ncmVzc2lvbjogPCIgKyByZWdleCArICI+IgogICAgICAgICAgICAgICAgICAg\nICsgIiBzaG91bGQgbm90IG1hdGNoOiA8IiArIGlucHV0ICsgIj4iKTsKICAg\nICAgICB9IGNhdGNoIChSRVN5bnRheEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oZS50b1N0\ncmluZygpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVj\nayB0aGUgbGlzdCBpZiBzdHJpbmdzIGFuZCByZXR1cm4gdGhlIG9uZXMgdGhh\ndCBtYXRjaAogICAgICogdGhlIHNwZWNpZmllZCBtYXRjaC4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBMaXN0IG1hdGNoZXMoU3RyaW5nIHJlZ2V4LCBD\nb2xsZWN0aW9uIGlucHV0KQogICAgICAgIHRocm93cyBSRVN5bnRheEV4Y2Vw\ndGlvbiB7CiAgICAgICAgTGlzdCBtYXRjaGVzID0gbmV3IEFycmF5TGlzdCgp\nOwogICAgICAgIGZvciAoSXRlcmF0b3IgaSA9IGlucHV0Lml0ZXJhdG9yKCk7\nIGkuaGFzTmV4dCgpOykgewogICAgICAgICAgICBTdHJpbmcgY2hlY2sgPSAo\nU3RyaW5nKSBpLm5leHQoKTsKICAgICAgICAgICAgaWYgKG1hdGNoZXMocmVn\nZXgsIGNoZWNrKSkKICAgICAgICAgICAgICAgIG1hdGNoZXMuYWRkKGNoZWNr\nKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBtYXRjaGVzOwogICAgfQoK\nICAgIC8qKgogICAgICogQXNzZXJ0IHRoYXQgdGhlIHNwZWNpZmllZCBjb2xs\nZWN0aW9uIG9mIFN0cmluZ3MgY29udGFpbnMgYXQgbGVhc3QKICAgICAqIG9u\nZSBzdHJpbmcgdGhhdCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgcmVndWxhciBl\neHByZXNzaW9uLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYXNz\nZXJ0TWF0Y2hlcyhTdHJpbmcgcmVnZXgsIENvbGxlY3Rpb24gaW5wdXQpIHsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAobWF0Y2hlcyhyZWdleCwg\naW5wdXQpLnNpemUoKSA9PSAwKQogICAgICAgICAgICAgICAgZmFpbCgiVGhl\nIHNwZWNpZmllZCBsaXN0IG9mIHNpemUgIiArIGlucHV0LnNpemUoKQogICAg\nICAgICAgICAgICAgICAgICsgIiBkaWQgbm90IGNvbnRhaW4gYW55IHN0cmlu\nZ3MgdGhhdCBtYXRjaCB0aGUiCiAgICAgICAgICAgICAgICAgICAgKyAiIHNw\nZWNpZmllZCByZWd1bGFyIGV4cHJlc3Npb24oXCIiICsgcmVnZXggKyAiXCIp\nIik7CiAgICAgICAgfSBjYXRjaCAoUkVTeW50YXhFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u\nKGUudG9TdHJpbmcoKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogQXNzZXJ0IHRoYXQgdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uIG9mIFN0\ncmluZ3MgZG9lcyBub3QgbWF0Y2gKICAgICAqIHRoZSBzcGVjaWZpZWQgcmVn\ndWxhciBleHByZXNzaW9uLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZv\naWQgYXNzZXJ0Tm90TWF0Y2hlcyhTdHJpbmcgcmVnZXgsIENvbGxlY3Rpb24g\naW5wdXQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBMaXN0IG1hdGNo\nZXM7CgogICAgICAgICAgICBpZiAoKChtYXRjaGVzID0gbWF0Y2hlcyhyZWdl\neCwgaW5wdXQpKSkuc2l6ZSgpID4gMCkKICAgICAgICAgICAgICAgIGZhaWwo\nIlRoZSBzcGVjaWZpZWQgbGlzdCBvZiBzaXplICIgKyBpbnB1dC5zaXplKCkK\nICAgICAgICAgICAgICAgICAgICArICIgZGlkIGNvbnRhaW4gb25lIG9yIG1v\ncmUgc3RyaW5ncyB0aGF0IG1hdGNocyB0aGUiCiAgICAgICAgICAgICAgICAg\nICAgKyAiIHNwZWNpZmllZCBpbGxlZ2FsIHJlZ3VsYXIgZXhwcmVzc2lvbiIK\nICAgICAgICAgICAgICAgICAgICArICIgKFwiIiArIHJlZ2V4ICsgIlwiKS4i\nCiAgICAgICAgICAgICAgICAgICAgKyAiIEZpcnN0IGV4YW1wbGUgb2YgYSBt\nYXRjaGluZyBtZXNzYWdlIGlzOiAiCiAgICAgICAgICAgICAgICAgICAgKyBt\nYXRjaGVzLml0ZXJhdG9yKCkubmV4dCgpKTsKICAgICAgICB9IGNhdGNoIChS\nRVN5bnRheEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oZS50b1N0cmluZygpKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHJvdGVjdGVkIExvZyBnZXRMb2coKSB7CiAgICAg\nICAgcmV0dXJuIGdldENvbmZpZ3VyYXRpb24oKS5nZXRMb2coIlRlc3RzIik7\nCiAgICB9CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gTXVsdGkg\ndGhyZWFkaW5nCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLyoqCiAg\nICAgKiBSZS1leGVjdXRlIHRoZSBpbnZva2luZyBtZXRob2QgYSByYW5kb20g\nbnVtYmVyIG9mIHRpbWVzCiAgICAgKiBpbiBhIHJhbmRvbSBudW1iZXIgb2Yg\nVGhyZWFkcy4KICAgICAqLwogICAgcHVibGljIHZvaWQgbXR0ZXN0KCkgdGhy\nb3dzIFRocmVhZGluZ0V4Y2VwdGlvbiB7CiAgICAgICAgLy8gNiBpdGVyYXRp\nb25zIGluIDggdGhyZWFkcyBpcyBhIGdvb2QgdHJhZGUtb2ZmIGJldHdlZW4K\nICAgICAgICAvLyB0ZXN0cyB0YWtpbmcgd2F5IHRvbyBsb25nIGFuZCBoYXZp\nbmcgYSBkZWNlbnQgY2hhbmNlIG9mCiAgICAgICAgLy8gaWRlbnRpZnlpbmcg\nTVQgcHJvYmxlbXMuCiAgICAgICAgaW50IGl0ZXJhdGlvbnMgPSA2OwogICAg\nICAgIGludCB0aHJlYWRzID0gODsKCiAgICAgICAgbXR0ZXN0KHRocmVhZHMs\nIGl0ZXJhdGlvbnMpOwogICAgfQoKICAgIC8qKgogICAgICogRXhlY3V0ZSB0\naGUgY2FsbGluZyBtZXRob2QgPGNvZGU+aXRlcmF0aW9uczwvY29kZT4KICAg\nICAqIHRpbWVzIGluIDxjb2RlPnRocmVhZHM8L2NvZGU+IFRocmVhZHMuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIG10dGVzdChpbnQgdGhyZWFkcywgaW50\nIGl0ZXJhdGlvbnMpIHsKICAgICAgICBtdHRlc3QoMCwgdGhyZWFkcywgaXRl\ncmF0aW9ucyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgbXR0ZXN0KGludCBz\nZXJpYWxDb3VudCwgaW50IHRocmVhZHMsIGludCBpdGVyYXRpb25zKQogICAg\nICAgIHRocm93cyBUaHJlYWRpbmdFeGNlcHRpb24gewogICAgICAgIFN0cmlu\nZyBtZXRob2ROYW1lID0gY2FsbGluZ01ldGhvZCgibXR0ZXN0Iik7CiAgICAg\nICAgbXR0ZXN0KHNlcmlhbENvdW50LCB0aHJlYWRzLCBpdGVyYXRpb25zLCBt\nZXRob2ROYW1lLCBuZXcgT2JqZWN0IFswXSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBFeGVjdXRlIGEgdGVzdCBtZXRob2QgaW4gbXVsdGlwbGUgdGhyZWFk\ncy4KICAgICAqCiAgICAgKiBAcGFyYW0gdGhyZWFkcyB0aGUgbnVtYmVyIG9m\nIFRocmVhZHMgdG8gcnVuIGluCiAgICAgKiBAcGFyYW0gaXRlcmF0aW9ucyB0\naGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBtZXRob2Qgc2hvdWxkCiAgICAgKiBi\nZSBleGVjdXRlIGluIGEgc2luZ2xlIFRocmVhZAogICAgICogQHBhcmFtIG1l\ndGhvZCB0aGUgbmFtZSBvZiB0aGUgbWV0aG9kIHRvIGV4ZWN1dGUKICAgICAq\nIEBwYXJhbSBhcmdzIHRoZSBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgbWV0\naG9kCiAgICAgKiBAdGhyb3dzIFRocmVhZGluZ0V4Y2VwdGlvbiBpZiBhbiBl\ncnJvcnMgb2NjdXIgaW4KICAgICAqIGFueSBvZiB0aGUgVGhyZWFkcy4gVGhl\nIGFjdHVhbCBleGNlcHRpb25zCiAgICAgKiB3aWxsIGJlIGVtYmVkZGVkIGlu\nIHRoZSBleGNlcHRpb24uIE5vdGUgdGhhdAogICAgICogdGhpcyBtZWFucyB0\naGF0IGFzc2VydCgpIGZhaWx1cmVzIHdpbGwgYmUKICAgICAqIHRyZWF0ZWQg\nYXMgZXJyb3JzIHJhdGhlciB0aGFuIHdhcm5pbmdzLgogICAgICogQGF1dGhv\nciBNYXJjIFBydWQnaG9tbWVhdXgKICAgICAqLwogICAgcHVibGljIHZvaWQg\nbXR0ZXN0KGludCB0aHJlYWRzLCBpbnQgaXRlcmF0aW9ucywgZmluYWwgU3Ry\naW5nIG1ldGhvZCwKICAgICAgICBmaW5hbCBPYmplY3QgW10gYXJncykgdGhy\nb3dzIFRocmVhZGluZ0V4Y2VwdGlvbiB7CiAgICAgICAgbXR0ZXN0KDAsIHRo\ncmVhZHMsIGl0ZXJhdGlvbnMsIG1ldGhvZCwgYXJncyk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgbXR0ZXN0KGludCBzZXJpYWxDb3VudCwKICAgICAgICBp\nbnQgdGhyZWFkcywgaW50IGl0ZXJhdGlvbnMsIGZpbmFsIFN0cmluZyBtZXRo\nb2QsIGZpbmFsIE9iamVjdCBbXSBhcmdzKQogICAgICAgIHRocm93cyBUaHJl\nYWRpbmdFeGNlcHRpb24gewogICAgICAgIGlmIChtdWx0aVRocmVhZEV4ZWN1\ndGluZyAhPSBudWxsICYmIG11bHRpVGhyZWFkRXhlY3V0aW5nLmVxdWFscyht\nZXRob2QpKQogICAgICAgIHsKICAgICAgICAgICAgLy8gd2UgYXJlIGN1cnJl\nbnRseSBleGVjdXRpbmcgaW4gbXVsdGktdGhyZWFkZWQgbW9kZToKICAgICAg\nICAgICAgLy8gZG9uJ3QgZGVhZGxvY2shCiAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICB9CgogICAgICAgIG11bHRpVGhyZWFkRXhlY3V0aW5nID0gbWV0\naG9kOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBDbGFzcyBbXSBwYXJh\nbUNsYXNzZXMgPSBuZXcgQ2xhc3MgW2FyZ3MubGVuZ3RoXTsKICAgICAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwYXJhbUNsYXNzZXMubGVuZ3RoOyBp\nKyspCiAgICAgICAgICAgICAgICBwYXJhbUNsYXNzZXNbaV0gPSBhcmdzW2ld\nLmdldENsYXNzKCk7CgogICAgICAgICAgICBmaW5hbCBNZXRob2QgbWV0aDsK\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBtZXRoID0gZ2V0\nQ2xhc3MoKS5nZXRNZXRob2QobWV0aG9kLCBwYXJhbUNsYXNzZXMpOwogICAg\nICAgICAgICB9IGNhdGNoIChOb1N1Y2hNZXRob2RFeGNlcHRpb24gbnNtZSkg\newogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFRocmVhZGluZ0V4Y2VwdGlv\nbihuc21lLnRvU3RyaW5nKCksIG5zbWUpOwogICAgICAgICAgICB9CgogICAg\nICAgICAgICBmaW5hbCBPYmplY3QgdGhpeiA9IHRoaXM7CgogICAgICAgICAg\nICBtdHRlc3QoInJlZmxlY3Rpb24gaW52b2NhdGlvbjogKCIgKyBtZXRob2Qg\nKyAiKSIsCiAgICAgICAgICAgICAgICBzZXJpYWxDb3VudCwgdGhyZWFkcywg\naXRlcmF0aW9ucywgbmV3IFZvbGF0aWxlUnVubmFibGUoKSB7CiAgICAgICAg\nICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgICAgICAgICBtZXRoLmludm9rZSh0aGl6LCBhcmdzKTsK\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBm\naW5hbGx5IHsKICAgICAgICAgICAgbXVsdGlUaHJlYWRFeGVjdXRpbmcgPSBu\ndWxsOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBtdHRlc3Qo\nU3RyaW5nIHRpdGxlLCBmaW5hbCBpbnQgdGhyZWFkcywgZmluYWwgaW50IGl0\nZXJhdGlvbnMsCiAgICAgICAgZmluYWwgVm9sYXRpbGVSdW5uYWJsZSBydW5u\nZXIpIHRocm93cyBUaHJlYWRpbmdFeGNlcHRpb24gewogICAgICAgIG10dGVz\ndCh0aXRsZSwgMCwgdGhyZWFkcywgaXRlcmF0aW9ucywgcnVubmVyKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEV4ZWN1dGUgYSB0ZXN0IG1ldGhvZCBpbiBt\ndWx0aXBsZSB0aHJlYWRzLgogICAgICoKICAgICAqIEBwYXJhbSB0aXRsZSBh\nIGRlc2NyaXB0aW9uIG9mIHRoZSB0ZXN0LCBmb3IgaW5jbHVzaW9uIGluIHRo\nZQogICAgICogZXJyb3IgbWVzc2FnZQogICAgICogQHBhcmFtIHNlcmlhbENv\ndW50IHRoZSBudW1iZXIgb2YgdGltZXMgdG8gcnVuIHRoZSBtZXRob2QKICAg\nICAqIHNlcmlhbGx5IGJlZm9yZSBzcGF3bmluZyB0aHJlYWRzLgogICAgICog\nQHBhcmFtIHRocmVhZHMgdGhlIG51bWJlciBvZiBUaHJlYWRzIHRvIHJ1biBp\nbgogICAgICogQHBhcmFtIGl0ZXJhdGlvbnMgdGhlIG51bWJlciBvZiB0aW1l\ncyB0aGUgbWV0aG9kIHNob3VsZAogICAgICogQHBhcmFtIHJ1bm5lciB0aGUg\nVm9sYXRpbGVSdW5uYWJsZSB0aGF0IHdpbGwgZXhlY3V0ZQogICAgICogdGhl\nIGFjdHVhbCB0ZXN0IGZyb20gd2l0aGluIHRoZSBUaHJlYWQuCiAgICAgKiBA\ndGhyb3dzIFRocmVhZGluZ0V4Y2VwdGlvbiBpZiBhbiBlcnJvcnMgb2NjdXIg\naW4KICAgICAqIGFueSBvZiB0aGUgVGhyZWFkcy4gVGhlIGFjdHVhbCBleGNl\ncHRpb25zCiAgICAgKiB3aWxsIGJlIGVtYmVkZGVkIGluIHRoZSBleGNlcHRp\nb24uIE5vdGUgdGhhdAogICAgICogdGhpcyBtZWFucyB0aGF0IGFzc2VydCgp\nIGZhaWx1cmVzIHdpbGwgYmUKICAgICAqIHRyZWF0ZWQgYXMgZXJyb3JzIHJh\ndGhlciB0aGFuIHdhcm5pbmdzLgogICAgICogQGF1dGhvciBNYXJjIFBydWQn\naG9tbWVhdXggYmUgZXhlY3V0ZSBpbiBhIHNpbmdsZSBUaHJlYWQKICAgICAq\nIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4CiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIG10dGVzdChTdHJpbmcgdGl0bGUsIGZpbmFsIGludCBzZXJpYWxD\nb3VudCwKICAgICAgICBmaW5hbCBpbnQgdGhyZWFkcywgZmluYWwgaW50IGl0\nZXJhdGlvbnMsIGZpbmFsIFZvbGF0aWxlUnVubmFibGUgcnVubmVyKQogICAg\nICAgIHRocm93cyBUaHJlYWRpbmdFeGNlcHRpb24gewogICAgICAgIGZpbmFs\nIExpc3QgZXhjZXB0aW9ucyA9IENvbGxlY3Rpb25zLnN5bmNocm9uaXplZExp\nc3QobmV3IExpbmtlZExpc3QoKSk7CgogICAgICAgIFRocmVhZCBbXSBydW5u\nZXJzID0gbmV3IFRocmVhZCBbdGhyZWFkc107CgogICAgICAgIGZpbmFsIGxv\nbmcgc3RhcnRNaWxsaXMgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSAr\nIDEwMDA7CgogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IHRocmVhZHM7\nIGkrKykgewogICAgICAgICAgICBmaW5hbCBpbnQgdGhpc1RocmVhZCA9IGk7\nCgogICAgICAgICAgICBydW5uZXJzW2kgLSAxXSA9CiAgICAgICAgICAgICAg\nICBuZXcgVGhyZWFkKHRpdGxlICsgIiBbIiArIGkgKyAiIG9mICIgKyB0aHJl\nYWRzICsgIl0iKSB7CiAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQg\ncnVuKCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBvdXIgYmVz\ndCB0byBoYXZlIGFsbCB0aHJlYWRzIHN0YXJ0IGF0IHRoZSBleGFjdAogICAg\nICAgICAgICAgICAgICAgICAgICAvLyBzYW1lIHRpbWUuIFRoaXMgaXMgaW1w\nZXJmZWN0LCBidXQgdGhlIGNsb3NlciB3ZQogICAgICAgICAgICAgICAgICAg\nICAgICAvLyBnZXQgdG8gZXZlcnlvbmUgc3RhcnRpbmcgYXQgdGhlIHNhbWUg\ndGltZSwgdGhlCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJldHRlciBj\naGFuY2Ugd2UgaGF2ZSBmb3IgaWRlbnRpZnlpbmcgTVQgcHJvYmxlbXMuCiAg\nICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChTeXN0ZW0uY3VycmVudFRp\nbWVNaWxsaXMoKSA8IHN0YXJ0TWlsbGlzKQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgeWllbGQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlu\ndCB0aGlzSXRlcmF0aW9uID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyB0aGlz\nSXRlcmF0aW9uIDw9IGl0ZXJhdGlvbnM7IHRoaXNJdGVyYXRpb24rKykKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAvLyBnbyBnbyBnbyEKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBydW5uZXIucnVuKCk7CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSBlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgc3luY2hyb25pemVkIChleGNlcHRpb25zKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgLy8gZW1iZWQgdGhlIGV4Y2VwdGlvbiBpbnRv\nIHNvbWV0aGluZyB0aGF0IGdpdmVzCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgLy8gdXMgc29tZSBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRo\nZSB0aHJlYWRpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAv\nLyBlbnZpcm9ubWVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGV4Y2VwdGlvbnMuYWRkKG5ldyBUaHJlYWRpbmdFeGNlcHRpb24oInRocmVh\nZD0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgdGhp\ncy50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICsgIjt0aHJlYWROdW09IiArIHRoaXNUaHJlYWQKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKyAiO21heFRocmVhZHM9IiArIHRo\ncmVhZHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAi\nO2l0ZXJhdGlvbj0iICsgdGhpc0l0ZXJhdGlvbgogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICArICI7bWF4SXRlcmF0aW9ucz0iICsgaXRl\ncmF0aW9ucywgZXJyb3IpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICAv\nLyBzdGFydCB0aGUgc2VyaWFsIHRlc3RzKGRvZXMgbm90IHNwYXduIHRoZSB0\naHJlYWRzKQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2VyaWFsQ291\nbnQ7IGkrKykgewogICAgICAgICAgICBydW5uZXJzWzBdLnJ1bigpOwogICAg\nICAgIH0KCiAgICAgICAgLy8gc3RhcnQgdGhlIG11bHRpdGhyZWFkZWQKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRocmVhZHM7IGkrKykgewogICAg\nICAgICAgICBydW5uZXJzW2ldLnN0YXJ0KCk7CiAgICAgICAgfQoKICAgICAg\nICAvLyB3YWl0IGZvciB0aGVtIGFsbCB0byBjb21wbGV0ZQogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgdGhyZWFkczsgaSsrKSB7CiAgICAgICAgICAg\nIHRyeSB7CiAgICAgICAgICAgICAgICBydW5uZXJzW2ldLmpvaW4oKTsKICAg\nICAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXhjZXB0aW9u\ncy5zaXplKCkgPT0gMCkKICAgICAgICAgICAgcmV0dXJuOyAvLyBzd2VlZWVl\nZWVldDogbm8gZXJyb3JzCgogICAgICAgIC8vIGVtYmVkIGFsbCB0aGUgZXhj\nZXB0aW9ucyB0aGF0IHdlcmUgdGhyb3dzIGludG8gYQogICAgICAgIC8vIFRo\ncmVhZGluZ0V4Y2VwdGlvbgogICAgICAgIFRocm93YWJsZSBbXSBlcnJvcnMg\nPSAoVGhyb3dhYmxlIFtdKSBleGNlcHRpb25zLnRvQXJyYXkoCiAgICAgICAg\nICAgIG5ldyBUaHJvd2FibGUgWzBdKTsKICAgICAgICB0aHJvdyBuZXcgVGhy\nZWFkaW5nRXhjZXB0aW9uKCJUaGUgIgogICAgICAgICAgICArIGVycm9ycy5s\nZW5ndGggKyAiIGVtYmVkZGVkIGVycm9ycyAiCiAgICAgICAgICAgICsgIm9j\nY3VyZWQgaW4gdGhlIGV4ZWN1dGlvbiBvZiAiICsgaXRlcmF0aW9ucyArICIg\naXRlcmF0aW9ucyAiCiAgICAgICAgICAgICsgIm9mICIgKyB0aHJlYWRzICsg\nIiB0aHJlYWRzOiBbIiArIHRpdGxlICsgIl0iLCBlcnJvcnMpOwogICAgfQoK\nICAgIC8qKgogICAgICogQ2hlY2sgdG8gc2VlIGlmIHdlIGFyZSBpbiB0aGUg\ndG9wLWxldmVsIGV4ZWN1dGlvbiBzdGFjay4KICAgICAqLwogICAgcHVibGlj\nIGJvb2xlYW4gaXNSb290VGhyZWFkKCkgewogICAgICAgIHJldHVybiBtdWx0\naVRocmVhZEV4ZWN1dGluZyA9PSBudWxsOwogICAgfQoKICAgIC8qKgogICAg\nICogQSBSdW5uYWJsZSB0aGF0IGNhbiB0aHJvdyBhbiBFeGNlcHRpb246IHVz\nZWQgdG8gdGVzdCBjYXNlcy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBp\nbnRlcmZhY2UgVm9sYXRpbGVSdW5uYWJsZSB7CgogICAgICAgIHB1YmxpYyB2\nb2lkIHJ1bigpIHRocm93cyBFeGNlcHRpb247CiAgICB9CgogICAgLyoqCiAg\nICAgKiBFeGNlcHRpb24gZm9yIGVycm9ycyBjYXVnaHQgZHVyaW5nIHRocmVh\nZGluZyB0ZXN0cy4KICAgICAqLwogICAgcHVibGljIGNsYXNzIFRocmVhZGlu\nZ0V4Y2VwdGlvbiBleHRlbmRzIFJ1bnRpbWVFeGNlcHRpb24gewoKICAgICAg\nICBwcml2YXRlIGZpbmFsIFRocm93YWJsZVtdIF9uZXN0ZWQ7CgogICAgICAg\nIHB1YmxpYyBUaHJlYWRpbmdFeGNlcHRpb24oU3RyaW5nIG1zZywgVGhyb3dh\nYmxlIG5lc3RlZCkgewogICAgICAgICAgICBzdXBlcihtc2cpOwogICAgICAg\nICAgICBpZiAobmVzdGVkID09IG51bGwpCiAgICAgICAgICAgICAgICBfbmVz\ndGVkID0gbmV3IFRocm93YWJsZVswXTsKICAgICAgICAgICAgZWxzZQogICAg\nICAgICAgICAgICAgX25lc3RlZCA9IG5ldyBUaHJvd2FibGVbXXsgbmVzdGVk\nIH07CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgVGhyZWFkaW5nRXhjZXB0\naW9uKFN0cmluZyBtc2csIFRocm93YWJsZVtdIG5lc3RlZCkgewogICAgICAg\nICAgICBzdXBlcihtc2cpOwogICAgICAgICAgICBpZiAobmVzdGVkID09IG51\nbGwpCiAgICAgICAgICAgICAgICBfbmVzdGVkID0gbmV3IFRocm93YWJsZVsw\nXTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgX25lc3RlZCA9\nIG5lc3RlZDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHByaW50\nU3RhY2tUcmFjZSgpIHsKICAgICAgICAgICAgcHJpbnRTdGFja1RyYWNlKFN5\nc3RlbS5vdXQpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgcHJp\nbnRTdGFja1RyYWNlKFByaW50U3RyZWFtIG91dCkgewogICAgICAgICAgICBw\ncmludFN0YWNrVHJhY2UobmV3IFByaW50V3JpdGVyKG91dCkpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgcHJpbnRTdGFja1RyYWNlKFByaW50\nV3JpdGVyIG91dCkgewogICAgICAgICAgICBzdXBlci5wcmludFN0YWNrVHJh\nY2Uob3V0KTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbmVz\ndGVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBvdXQucHJpbnQo\nIk5lc3RlZCBUaHJvd2FibGUgIyIgKyAoaSArIDEpICsgIjogIik7CiAgICAg\nICAgICAgICAgICBfbmVzdGVkW2ldLnByaW50U3RhY2tUcmFjZShvdXQpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIHRoZSBsYXN0IG1ldGhvZCBuYW1lIHRoYXQgY2FsbGVkIHRoaXMg\nb25lIGJ5CiAgICAgKiBwYXJzaW5nIHRoZSBjdXJyZW50IHN0YWNrIHRyYWNl\nLgogICAgICoKICAgICAqIEBwYXJhbSBleGNsdWRlIGEgbWV0aG9kIG5hbWUg\ndG8gc2tpcAogICAgICogQHRocm93cyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24g\nSWYgdGhlIGNhbGxpbmcgbWV0aG9kIGNvdWxkIG5vdCBiZQogICAgICogaWRl\nbnRpZmllZC4KICAgICAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4CiAg\nICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgY2FsbGluZ01ldGhvZChTdHJpbmcg\nZXhjbHVkZSkgewogICAgICAgIC8vIGRldGVybWluZSB0aGUgY3VycmVudGx5\nIGV4ZWN1dGluZyBtZXRob2QgYnkKICAgICAgICAvLyBsb29raW5nIGF0IHRo\nZSBzdGFjayB0cmFjay4gSGFja2lzaCwgYnV0IGNvbnZlbmllbnQuCiAgICAg\nICAgU3RyaW5nV3JpdGVyIHN3ID0gbmV3IFN0cmluZ1dyaXRlcigpOwogICAg\nICAgIG5ldyBFeGNlcHRpb24oKS5wcmludFN0YWNrVHJhY2UobmV3IFByaW50\nV3JpdGVyKHN3KSk7CiAgICAgICAgZm9yIChTdHJpbmdUb2tlbml6ZXIgc3Rh\nY2tUcmFjZSA9IG5ldyBTdHJpbmdUb2tlbml6ZXIoc3cudG9TdHJpbmcoKSwK\nICAgICAgICAgICAgU3lzdGVtLmdldFByb3BlcnR5KCJsaW5lLnNlcGFyYXRv\nciIpKTsKICAgICAgICAgICAgc3RhY2tUcmFjZS5oYXNNb3JlVG9rZW5zKCk7\nKSB7CiAgICAgICAgICAgIFN0cmluZyBsaW5lID0gc3RhY2tUcmFjZS5uZXh0\nVG9rZW4oKS50cmltKCk7CgogICAgICAgICAgICAvLyBub3QgYSBzdGFjayB0\ncmFjZSBlbGVtZW50CiAgICAgICAgICAgIGlmICghKGxpbmUuc3RhcnRzV2l0\naCgiYXQgIikpKQogICAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAg\nICAgICBTdHJpbmcgZnVsbE1ldGhvZE5hbWUgPSBsaW5lLnN1YnN0cmluZygw\nLCBsaW5lLmluZGV4T2YoIigiKSk7CgogICAgICAgICAgICBTdHJpbmcgc2hv\ncnRNZXRob2ROYW1lID0gZnVsbE1ldGhvZE5hbWUuc3Vic3RyaW5nKAogICAg\nICAgICAgICAgICAgZnVsbE1ldGhvZE5hbWUubGFzdEluZGV4T2YoIi4iKSAr\nIDEpOwoKICAgICAgICAgICAgLy8gc2tpcCBvdXIgb3duIG1ldGhvZHMhCiAg\nICAgICAgICAgIGlmIChzaG9ydE1ldGhvZE5hbWUuZXF1YWxzKCJjYWxsaW5n\nTWV0aG9kIikpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAg\nICAgaWYgKGV4Y2x1ZGUgIT0gbnVsbCAmJiBzaG9ydE1ldGhvZE5hbWUuZXF1\nYWxzKGV4Y2x1ZGUpKQogICAgICAgICAgICAgICAgY29udGludWU7CgogICAg\nICAgICAgICByZXR1cm4gc2hvcnRNZXRob2ROYW1lOwogICAgICAgIH0KCiAg\nICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigiQ291bGQg\nbm90IGlkZW50aWZ5IGNhbGxpbmcgIgogICAgICAgICAgICArICJtZXRob2Qg\naW4gc3RhY2sgdHJhY2UiKTsKICAgIH0KCiAgICAvLy8vLy8vLy8vCiAgICAv\nLyBUaW1pbmcKICAgIC8vLy8vLy8vLy8KCiAgICAvKioKICAgICAqIFNsZWVw\nIHRoZSBjdXJyZW50IFRocmVhZCBmb3IgYSByYW5kb20gYW1vdW50IG9mIHRp\nbWUgZnJvbSAwLTEwMDAgbXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNs\nZWVwUmFuZG9tKCkgewogICAgICAgIHNsZWVwUmFuZG9tKDEwMDApOwogICAg\nfQoKICAgIC8qKgogICAgICogU2xlZXAgdGhlIGN1cnJlbnQgVGhyZWFkIGZv\nciBhIHJhbmRvbSBhbW91bnQgb2YgdGltZSBmcm9tCiAgICAgKiAwLTxjb2Rl\nPm1heDwvY29kZT4gbXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNsZWVw\nUmFuZG9tKGludCBtYXgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBU\naHJlYWQuY3VycmVudFRocmVhZCgpLnNsZWVwKChsb25nKSAoTWF0aC5yYW5k\nb20oKSAqIG1heCkpOwogICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhj\nZXB0aW9uIGV4KSB7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nUmUtcnVuIHRoaXMgbWV0aG9kIGluIHRoZSBjdXJyZW50IHRocmVhZCwgdGlt\naW5nIG91dAogICAgICogYWZ0ZXIgdGhlIHNwZWNpZmllZCBudW1iZXIgb2Yg\nc2Vjb25kcy4KICAgICAqIFVzYWdlOgogICAgICogPHByZT4gcHVibGljIHZv\naWQgdGltZU91dE9wZXJhdGlvbigpIHsgaWYgKHRpbWVvdXQoNSAqIDEwMDAp\nKSByZXR1cm47CiAgICAgKiAgVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5zbGVl\ncCgxMCAqIDEwMDApOyB9CiAgICAgKiA8L3ByZT4KICAgICAqIDxwLz4KICAg\nICAqIDxwLz4KICAgICAqIDxzdHJvbmc+V2FybmluZzwvc3Ryb25nPiB0aGlz\nIG1ldGhvZCBzaG91bGQgYmUgdXNlZCBzcGFyaW5nbHksCiAgICAgKiBhbmQg\nb25seSB3aGVuIHlvdSBleHBlY3QgdGhhdCBhIHRpbWVvdXQgd2lsbCA8c3Ry\nb25nPm5vdDwvc3Ryb25nPgogICAgICogb2NjdXIuIEl0IHV0aWxpemVkIHRo\nZSBkZXByZWNhdGVkIHtAbGluayBUaHJlYWQjc3RvcCgpfSBhbmQKICAgICAq\nIHtAbGluayBUaHJlYWQjaW50ZXJydXB0fSBtZXRob2RzLCB3aGljaCBjYW4g\nbGVhdmUgbW9uaXRvcnMgaW4gYW4KICAgICAqIGludmFsaWQgc3RhdGUuIEl0\nIGlzIG9ubHkgdXNlZCBiZWNhdXNlIGl0IHByb3ZpZGVzIG1vcmUKICAgICAq\nIG1lYW5pbmdmdWwgaW5mb3JtYXRpb24gdGhhbiBqdXN0IHNlZWluZyB0aGF0\nIHRoZSBlbnRpcmUgYXV0b2J1aWxkCiAgICAgKiB0aW1lZCBvdXQuCiAgICAg\nKgogICAgICogQHBhcmFtIG1pbGxpcyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vj\nb25kcyB3ZSBzaG91bGQgd2FpdC4KICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB3\nZSBhcmUgYXJlIGluIHRoZSB0aHJlYWQgdGhhdCByZXF1ZXN0ZWQgdGhlCiAg\nICAgKiAgICAgICAgIHRpbWVvdXQsIGZhbHNlIGlmIHdlIGFyZSBpbiB0aGUg\ndGltZW91dCB0aHJlYWQgaXRzZWxmLgogICAgICovCiAgICBwdWJsaWMgYm9v\nbGVhbiB0aW1lb3V0KGxvbmcgbWlsbGlzKSB0aHJvd3MgVGhyb3dhYmxlIHsK\nICAgICAgICBTdHJpbmcgbWV0aG9kTmFtZSA9IGNhbGxpbmdNZXRob2QoInRp\nbWVvdXQiKTsKICAgICAgICByZXR1cm4gdGltZW91dChtaWxsaXMsIG1ldGhv\nZE5hbWUpOwogICAgfQoKICAgIC8qKgogICAgICogQHNlZSAjdGltZW91dChs\nb25nKQogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiB0aW1lb3V0KGxvbmcg\nbWlsbGlzLCBTdHJpbmcgbWV0aG9kTmFtZSkgdGhyb3dzIFRocm93YWJsZSB7\nCiAgICAgICAgLy8gd2UgYXJlIGluIHRoZSB0aW1pbmcgb3V0LXRocmVhZDog\nZG8gbm90aGluZyBzbyB0aGUKICAgICAgICAvLyBhY3R1YWwgdGVzdCBtZXRo\nb2QgY2FuIHJ1bgogICAgICAgIGlmIChpblRpbWVvdXRUaHJlYWQpCiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgaW5UaW1lb3V0VGhyZWFk\nID0gdHJ1ZTsKICAgICAgICBsb25nIGVuZFRpbWUgPSBTeXN0ZW0uY3VycmVu\ndFRpbWVNaWxsaXMoKSArIG1pbGxpczsKCiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgZmluYWwgTWV0aG9kIG1ldGhvZCA9IGdldENsYXNzKCkuCiAgICAg\nICAgICAgICAgICBnZXRNZXRob2QobWV0aG9kTmFtZSwgKENsYXNzW10pIG51\nbGwpOwogICAgICAgICAgICBmaW5hbCBPYmplY3QgdGh6ID0gdGhpczsKCiAg\nICAgICAgICAgIC8vIHNwYXduIHRocmVhZAogICAgICAgICAgICBUaW1lT3V0\nVGhyZWFkIHRvdCA9IG5ldyBUaW1lT3V0VGhyZWFkKCJUaW1lT3V0VGhyZWFk\nIFsiCiAgICAgICAgICAgICAgICArIG1ldGhvZE5hbWUgKyAiXSAoIiArIG1p\nbGxpcyArICJtcykiKSB7CiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBy\ndW4oKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgICAgICAgICAgbWV0aG9kLmludm9rZSh0aHosIChPYmplY3RbXSkgbnVs\nbCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQp\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dhYmxlID0gdDsKICAg\nICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAg\nICAgICAgICBjb21wbGV0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAg\nICAgIHRvdC5zdGFydCgpOwoKICAgICAgICAgICAgLy8gd2FpdCBmb3IgdGhl\nIGNvbXBsZXRpb24gb3IgYSB0aW1lb3V0IHRvIG9jY3VyCiAgICAgICAgICAg\nIHRvdC5qb2luKG1pbGxpcyk7CgogICAgICAgICAgICAvLyBoYXZlIHdlIHRp\nbWVkIG91dD8gS2lsbCB0aGUgdGhyZWFkIGFuZCB0aHJvdyBhbiBleGNlcHRp\nb24KICAgICAgICAgICAgaWYgKFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygp\nID49IGVuZFRpbWUpIHsKICAgICAgICAgICAgICAgIC8vIGlmIHdlIGFyZSB3\nYWl0aW5nIG9uIGEgbW9uaXRvciwgdGhpcyB3aWxsIGdpdmUKICAgICAgICAg\nICAgICAgIC8vIHVzIGEgdXNlZnVsIHN0YWNrIHRyYWNlLgogICAgICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0b3QuaW50ZXJydXB0\nKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgZSkgewog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgVGhyZWFkLmN1cnJl\nbnRUaHJlYWQoKS5zbGVlcCg1MDApOwoKICAgICAgICAgICAgICAgIC8vIHRy\neSB0byBraWxsIHRoZSB0aHJlYWQKICAgICAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgICAgICAgdG90LnN0b3AoKTsKICAgICAgICAgICAgICAg\nIH0gY2F0Y2ggKFRocm93YWJsZSBlKSB7CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgICAgICBUaHJlYWQuY3VycmVudFRocmVhZCgpLnNsZWVwKDUw\nMCk7CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IE9wZXJhdGlvblRpbWVk\nT3V0RXhjZXB0aW9uKCJFeGVjdXRpb24gb2YgXCIiCiAgICAgICAgICAgICAg\nICAgICAgKyBtZXRob2ROYW1lICsgIlwiIHRpbWVkIG91dCBhZnRlciAiCiAg\nICAgICAgICAgICAgICAgICAgKyBtaWxsaXMgKyAiIG1pbGxpc2Vjb25kcyIs\nIHRvdC50aHJvd2FibGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAv\nLyB0aHJvdyBhbnkgZXhjZXB0aW9ucyB0aGF0IG1heSBoYXZlIG9jY3VyZWQK\nICAgICAgICAgICAgaWYgKHRvdC50aHJvd2FibGUgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIHRocm93IHRvdC50aHJvd2FibGU7CgogICAgICAgICAgICAv\nLyBJIGd1ZXNzIGV2ZXJ5dGhpbmcgd2FzIE9LCiAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGluVGlt\nZW91dFRocmVhZCA9IGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2\nYXRlIHN0YXRpYyBjbGFzcyBUaW1lT3V0VGhyZWFkIGV4dGVuZHMgVGhyZWFk\nIHsKCiAgICAgICAgcHVibGljIFRocm93YWJsZSB0aHJvd2FibGUgPSBudWxs\nOwogICAgICAgIHB1YmxpYyBib29sZWFuIGNvbXBsZXRlZCA9IGZhbHNlOwoK\nICAgICAgICBwdWJsaWMgVGltZU91dFRocmVhZChTdHJpbmcgbmFtZSkgewog\nICAgICAgICAgICBzdXBlcihuYW1lKTsKICAgICAgICAgICAgc2V0RGFlbW9u\nKHRydWUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEluZGlj\nYXRlcyB0aGF0IGEgdGltZW91dCBvY2N1cmVkLgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIGNsYXNzIE9wZXJhdGlvblRpbWVkT3V0RXhjZXB0aW9uIGV4\ndGVuZHMgUnVudGltZUV4Y2VwdGlvbiB7CgogICAgICAgIHByaXZhdGUgZmlu\nYWwgVGhyb3dhYmxlIF9lcnI7CgogICAgICAgIHB1YmxpYyBPcGVyYXRpb25U\naW1lZE91dEV4Y2VwdGlvbihTdHJpbmcgbXNnLCBUaHJvd2FibGUgdGhyb3dh\nYmxlKSB7CiAgICAgICAgICAgIHN1cGVyKG1zZyk7CiAgICAgICAgICAgIF9l\ncnIgPSB0aHJvd2FibGU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBwcmludFN0YWNrVHJhY2UoKSB7CiAgICAgICAgICAgIHByaW50U3RhY2tU\ncmFjZShTeXN0ZW0ub3V0KTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHByaW50U3RhY2tUcmFjZShQcmludFN0cmVhbSBvdXQpIHsKICAgICAg\nICAgICAgcHJpbnRTdGFja1RyYWNlKG5ldyBQcmludFdyaXRlcihvdXQpKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHByaW50U3RhY2tUcmFj\nZShQcmludFdyaXRlciBvdXQpIHsKICAgICAgICAgICAgc3VwZXIucHJpbnRT\ndGFja1RyYWNlKG91dCk7CiAgICAgICAgICAgIGlmIChfZXJyICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgIG91dC5wcmludCgiTmVzdGVkIFRocm93YWJs\nZTogIik7CiAgICAgICAgICAgICAgICBfZXJyLnByaW50U3RhY2tUcmFjZShv\ndXQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vLy8v\nLy8vLy8vLy8vLwogICAgLy8gQ29sbGVjdGlvbnMKICAgIC8vLy8vLy8vLy8v\nLy8vLwoKICAgIC8qKgogICAgICogVmFsaWRhdGUgdGhhdCB0aGUgc3BlY2lm\naWVkIHtAbGluayBDb2xsZWN0aW9ufSBmdWxmaWxscyB0aGUKICAgICAqIENv\nbGxlY3Rpb24gY29udHJhY3QgYXMgc3BlY2lmaWVkIGJ5IHRoZSBDb2xsZWN0\naW9ucyBBUEkuCiAgICAgKiA8cC8+CiAgICAgKiA8c3Ryb25nPk5vdGU8L3N0\ncm9uZz46IGRvZXMgbm90IHZhbGlkYXRlIG11dGFibGUgb3BlcmF0aW9ucwog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgdmFsaWRhdGVDb2xsZWN0\naW9uKENvbGxlY3Rpb24gY29sbGVjdGlvbikgewogICAgICAgIGludCBzaXpl\nID0gY29sbGVjdGlvbi5zaXplKCk7CiAgICAgICAgaW50IGl0ZXJhdGVkID0g\nMDsKICAgICAgICAvLyBlbnN1cmUgd2UgY2FuIHdhbGsgYWxvbmcgdGhlIGl0\nZXJhdG9yCiAgICAgICAgZm9yIChJdGVyYXRvciBpID0gY29sbGVjdGlvbi5p\ndGVyYXRvcigpOyBpLmhhc05leHQoKTspIHsKICAgICAgICAgICAgaXRlcmF0\nZWQrKzsKICAgICAgICAgICAgaS5uZXh0KCk7CiAgICAgICAgfQoKICAgICAg\nICAvLyBlbnN1cmUgdGhlIG51bWJlciBvZiB2YWx1ZXMgaXRlcmF0ZWQgaXMg\ndGhlIHNhbWUgYXMgdGhlIGxpc3Qgc2l6ZQogICAgICAgIGFzc2VydEVxdWFs\ncyhzaXplLCBpdGVyYXRlZCk7CgogICAgICAgIC8vIGFsc28gdmFsaWRhdGUg\ndGhlIGxpc3QKICAgICAgICBpZiAoY29sbGVjdGlvbiBpbnN0YW5jZW9mIExp\nc3QpIHsKICAgICAgICAgICAgTGlzdCBsbCA9IG5ldyBBcnJheUxpc3QoKTsK\nICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDA7IGkrKykKICAg\nICAgICAgICAgICAgIGxsLmFkZChuZXcgSW50ZWdlcihpKSk7CiAgICAgICAg\nICAgIHZhbGlkYXRlTGlzdCgoTGlzdCkgbGwpOwogICAgICAgICAgICB2YWxp\nZGF0ZUxpc3QoKExpc3QpIGNvbGxlY3Rpb24pOwogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIFZhbGlkYXRlIHRoYXQgdGhlIHNwZWNpZmllZCB7\nQGxpbmsgTGlzdH0gZnVsZmlsbHMgdGhlCiAgICAgKiBMaXN0IGNvbnRyYWN0\nIGFzIHNwZWNpZmllZCBieSB0aGUgQ29sbGVjdGlvbnMgQVBJLgogICAgICog\nPHAvPgogICAgICogPHN0cm9uZz5Ob3RlPC9zdHJvbmc+OiBkb2VzIG5vdCB2\nYWxpZGF0ZSBtdXRhYmxlIG9wZXJhdGlvbnMKICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyB2b2lkIHZhbGlkYXRlTGlzdChMaXN0IGxpc3QpIHsKICAgICAg\nICBPYmplY3QgW10gY29yZVZhbHVlcyA9IGxpc3QudG9BcnJheSgpOwogICAg\nICAgIE9iamVjdCBbXSB2YWx1ZXMxID0gbmV3IE9iamVjdCBbbGlzdC5zaXpl\nKCldOwogICAgICAgIE9iamVjdCBbXSB2YWx1ZXMyID0gbmV3IE9iamVjdCBb\nbGlzdC5zaXplKCldOwogICAgICAgIE9iamVjdCBbXSB2YWx1ZXMzID0gbmV3\nIE9iamVjdCBbbGlzdC5zaXplKCldOwogICAgICAgIE9iamVjdCBbXSB2YWx1\nZXM0ID0gbmV3IE9iamVjdCBbbGlzdC5zaXplKCldOwoKICAgICAgICAvLyBm\naWxsIHNlcXVlbnRpYWwgaW5kZXggYWNjZXNzIGxpc3QKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGxpc3Quc2l6ZSgpOyBpKyspCiAgICAgICAgICAg\nIHZhbHVlczFbaV0gPSBsaXN0LmdldChpKTsKCiAgICAgICAgLy8gZmlsbCBz\nZXF1ZW50aWFsIGxpc3QKICAgICAgICBpbnQgaW5kZXggPSAwOwogICAgICAg\nIExpc3RJdGVyYXRvciBpdGVyOwogICAgICAgIGZvciAoaXRlciA9IGxpc3Qu\nbGlzdEl0ZXJhdG9yKDApOyBpdGVyLmhhc05leHQoKTspIHsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKGluZGV4LCBpdGVyLm5leHRJbmRleCgpKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKGluZGV4LCBpdGVyLnByZXZpb3VzSW5k\nZXgoKSArIDEpOwogICAgICAgICAgICB2YWx1ZXMyW2luZGV4XSA9IGl0ZXIu\nbmV4dCgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGxpc3QuY29udGFpbnMo\ndmFsdWVzMltpbmRleF0pKTsKICAgICAgICAgICAgaW5kZXgrKzsKICAgICAg\nICB9CgogICAgICAgIC8vIGVuc3VyZSBOb1N1Y2hFbGVtZW50RXhjZXB0aW9u\nIGlzIHRocm93biBhcyBhcHByb3ByaWF0ZQogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGl0ZXIubmV4dCgpOwogICAgICAgICAgICBmYWlsKCJuZXh0KCkg\nc2hvdWxkIGhhdmUgcmVzdWx0ZWQgaW4gYSBOb1N1Y2hFbGVtZW50RXhjZXB0\naW9uIik7CiAgICAgICAgfSBjYXRjaCAoTm9TdWNoRWxlbWVudEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgfSAvLyBhcyBleHBlY3RlZAoKICAgICAgICAvLyBm\naWxsIHJldmVyc2Ugc2VxdWVudGlhbCBsaXN0CiAgICAgICAgaW50IGJhY2sg\nPSAwOwogICAgICAgIGZvciAoaXRlciA9IGxpc3QubGlzdEl0ZXJhdG9yKGxp\nc3Quc2l6ZSgpKTsgaXRlci5oYXNQcmV2aW91cygpOykgewogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoaW5kZXgsIGl0ZXIucHJldmlvdXNJbmRleCgpICsg\nMSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhpbmRleCwgaXRlci5uZXh0\nSW5kZXgoKSk7CiAgICAgICAgICAgIHZhbHVlczNbLS1pbmRleF0gPSBpdGVy\nLnByZXZpb3VzKCk7CiAgICAgICAgICAgIGJhY2srKzsKICAgICAgICB9CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKGxpc3Quc2l6ZSgpLCBiYWNrKTsKCiAgICAg\nICAgLy8gZW5zdXJlIE5vU3VjaEVsZW1lbnRFeGNlcHRpb24gaXMgdGhyb3du\nIGFzIGFwcHJvcHJpYXRlCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaXRl\nci5wcmV2aW91cygpOwogICAgICAgICAgICBmYWlsKCJwcmV2aW91cygpIHNo\nb3VsZCBoYXZlIHJlc3VsdGVkIGluIGEgIgogICAgICAgICAgICAgICAgKyAi\nTm9TdWNoRWxlbWVudEV4Y2VwdGlvbiIpOwogICAgICAgIH0gY2F0Y2ggKE5v\nU3VjaEVsZW1lbnRFeGNlcHRpb24gZSkgewogICAgICAgIH0gLy8gYXMgZXhw\nZWN0ZWQKCiAgICAgICAgLy8gZmlsbCByYW5kb20gYWNjZXNzIGxpc3QKICAg\nICAgICBMaXN0IGluZGljZXMgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgbGlzdC5zaXplKCk7IGkrKykKICAgICAg\nICAgICAgaW5kaWNlcy5hZGQobmV3IEludGVnZXIoaSkpOwoKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IGxpc3Quc2l6ZSgpOyBpKyspIHsKICAgICAg\nICAgICAgaW50IHJhbmQgPSAoaW50KSAoTWF0aC5yYW5kb20oKSAqIGluZGlj\nZXMuc2l6ZSgpKTsKICAgICAgICAgICAgSW50ZWdlciByYW5kSW5kZXggPSAo\nSW50ZWdlcikgaW5kaWNlcy5yZW1vdmUocmFuZCk7CiAgICAgICAgICAgIHZh\nbHVlczRbcmFuZEluZGV4LmludFZhbHVlKCldID0gbGlzdC5nZXQocmFuZElu\nZGV4LmludFZhbHVlKCkpOwogICAgICAgIH0KCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKEFycmF5cy5hc0xpc3QoY29yZVZhbHVlcyksIEFycmF5cy5hc0xpc3Qo\ndmFsdWVzMSkpOwogICAgICAgIGFzc2VydElkZW50aWNhbChBcnJheXMuYXNM\naXN0KGNvcmVWYWx1ZXMpLCBBcnJheXMuYXNMaXN0KHZhbHVlczEpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoQXJyYXlzLmFzTGlzdChjb3JlVmFsdWVzKSwg\nQXJyYXlzLmFzTGlzdCh2YWx1ZXMyKSk7CiAgICAgICAgYXNzZXJ0SWRlbnRp\nY2FsKEFycmF5cy5hc0xpc3QoY29yZVZhbHVlcyksIEFycmF5cy5hc0xpc3Qo\ndmFsdWVzMikpOwogICAgICAgIGFzc2VydEVxdWFscyhBcnJheXMuYXNMaXN0\nKGNvcmVWYWx1ZXMpLCBBcnJheXMuYXNMaXN0KHZhbHVlczQpKTsKICAgICAg\nICBhc3NlcnRJZGVudGljYWwoQXJyYXlzLmFzTGlzdChjb3JlVmFsdWVzKSwg\nQXJyYXlzLmFzTGlzdCh2YWx1ZXM0KSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKEFycmF5cy5hc0xpc3QoY29yZVZhbHVlcyksIEFycmF5cy5hc0xpc3QodmFs\ndWVzMykpOwogICAgICAgIGFzc2VydElkZW50aWNhbChBcnJheXMuYXNMaXN0\nKGNvcmVWYWx1ZXMpLCBBcnJheXMuYXNMaXN0KHZhbHVlczMpKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIEFzc2VydCB0aGF0IHRoZSBnaXZlbiBMaXN0IGNv\nbnRhaW4gdGhlIGV4YWN0IHNhbWUKICAgICAqIGVsZW1lbnRzLiBUaGlzIGlz\nIGRpZmZlcmVudCB0aGFuIHRoZSBub3JtYWwgTGlzdCBjb250cmFjdCwgd2hp\nY2gKICAgICAqIHN0YXRlcyB0aGF0IGxpc3QxLmVxdWFscyhsaXN0MikgaWYg\nZWFjaCBlbGVtZW50IGUxLmVxdWFscyhlMikuCiAgICAgKiBUaGlzIG1ldGhv\nZCBhc3NlcnRzIHRoYXQgZTEgPT0gbjIuCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgdm9pZCBhc3NlcnRJZGVudGljYWwoTGlzdCBjMSwgTGlzdCBjMikg\newogICAgICAgIGFzc2VydEVxdWFscyhjMS5zaXplKCksIGMyLnNpemUoKSk7\nCiAgICAgICAgZm9yIChJdGVyYXRvciBpMSA9IGMxLml0ZXJhdG9yKCksIGky\nID0gYzIuaXRlcmF0b3IoKTsKICAgICAgICAgICAgaTEuaGFzTmV4dCgpICYm\nIGkyLmhhc05leHQoKTspCiAgICAgICAgICAgIGFzc2VydFRydWUoaTEubmV4\ndCgpID09IGkyLm5leHQoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBc3Nl\ncnQgdGhhdCB0aGUgY29sbGVjdGlvbiBwYXJhbWV0ZXIgaXMgYWxyZWFkeSBv\ncmRlcmVkCiAgICAgKiBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBjb21w\nYXJhdG9yLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRPcmRlcmVk\nKENvbGxlY3Rpb24gYywgQ29tcGFyYXRvciBjb21wKSB7CiAgICAgICAgTGlz\ndCBsMSA9IG5ldyBMaW5rZWRMaXN0KGMpOwogICAgICAgIExpc3QgbDIgPSBu\nZXcgTGlua2VkTGlzdChjKTsKICAgICAgICBhc3NlcnRFcXVhbHMobDEsIGwy\nKTsKICAgICAgICBDb2xsZWN0aW9ucy5zb3J0KGwyLCBjb21wKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMobDEsIGwyKTsKICAgICAgICBDb2xsZWN0aW9ucy5z\nb3J0KGwxLCBjb21wKTsKICAgICAgICBhc3NlcnRFcXVhbHMobDEsIGwyKTsK\nICAgIH0KfQo=\n","encoding":"base64"}

