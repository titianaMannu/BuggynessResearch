{"sha":"6f438b1c3b829701daaa24ee1eefe41f72d50832","node_id":"MDQ6QmxvYjIwNjM2NDo2ZjQzOGIxYzNiODI5NzAxZGFhYTI0ZWUxZWVmZTQxZjcyZDUwODMy","size":5562,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6f438b1c3b829701daaa24ee1eefe41f72d50832","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNh\nY2hlOwoKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZh\nLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwpp\nbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLk1h\ncDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7Cmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFjdG9yeTsK\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRhdGFj\nYWNoZS5jb21tb24uYXBwcy5BdHRhY2hBOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmRhdGFjYWNoZS5jb21tb24uYXBwcy5BdHRh\nY2hCOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRh\ndGFjYWNoZS5jb21tb24uYXBwcy5BdHRhY2hDOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRhdGFjYWNoZS5jb21tb24uYXBwcy5B\ndHRhY2hEOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmRhdGFjYWNoZS5jb21tb24uYXBwcy5BdHRhY2hFOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0cmFj\ndFRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwoKLyoqCiAqIFRlc3RzIGxvYWQg\nb24gdGhlIGNhY2hlLiBUbyBydW46CiAqIDxwLz4KICogamF2YSAtRGtvZG8u\ncHJvcGVydGllcz1oc3FsLnByb3BlcnRpZXMgLURjYWNoZXRlc3QudGhyZWFk\ncz0zMAogKiAtRGNhY2hldGVzdC5pdGVyYXRpb25zPTEwMDAga29kby5kYXRh\nY2FjaGUuQ2FjaGVMb2FkVGVzdAogKgogKiBAYXV0aG9yIDxhIGhyZWY9Im1h\naWx0bzptYXJjQHNvbGFybWV0cmljLmNvbSI+TWFyYyBQcnVkJ2hvbW1lYXV4\nPC9hPgogKi8KcHVibGljIGNsYXNzIENhY2hlTG9hZFRlc3QKICAgIGV4dGVu\nZHMgQWJzdHJhY3RUZXN0Q2FzZSB7CgogICAgcHJpdmF0ZSBFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBlbWY7CiAgICBwcm90ZWN0ZWQgaW50IHRocmVhZENvdW50\nID0KICAgICAgICBJbnRlZ2VyLmdldEludGVnZXIoImNhY2hldGVzdC50aHJl\nYWRzIiwgMzApLmludFZhbHVlKCk7CiAgICBwcm90ZWN0ZWQgaW50IGludGVy\nYXRpb25Db3VudCA9CiAgICAgICAgSW50ZWdlci5nZXRJbnRlZ2VyKCJjYWNo\nZXRlc3QuaXRlcmF0aW9ucyIsIDEwMDApLmludFZhbHVlKCk7CgogICAgcHVi\nbGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgTWFwIHByb3BzTWFwID0gbmV3\nIEhhc2hNYXAoKTsKICAgICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuRGF0\nYUNhY2hlIiwgInRydWUiKTsKICAgICAgICBwcm9wc01hcC5wdXQoIm9wZW5q\ncGEuUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2bSIpOwogICAgICAgIHBy\nb3BzTWFwLnB1dCgib3BlbmpwYS5RdWVyeUNhY2hlIiwgInRydWUiKTsKICAg\nICAgICBlbWYgPSBnZXRFbWYocHJvcHNNYXApOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RDYWNoZUxvYWQoKQogICAgICAgIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIG10dGVzdChJbnRlZ2VyLmdldEludGVnZXIoImNhY2hl\ndGVzdC50aHJlYWRzIiwgMzApLmludFZhbHVlKCksCiAgICAgICAgICAgIElu\ndGVnZXIuZ2V0SW50ZWdlcigiY2FjaGV0ZXN0Lml0ZXJhdGlvbnMiLCAxMDAw\nKS5pbnRWYWx1ZSgpKTsKCiAgICAgICAgc3dpdGNoICgoaW50KSAoTWF0aC5y\nYW5kb20oKSAqIDQpKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAg\nICAgICAgIGluc2VydCgpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHF1ZXJ5KCk7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAg\nICAgICAgICAgZGVsZXRlKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVhZCgpOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZh\ndGUgaW50IHJuZChpbnQgbnVtKSB7CiAgICAgICAgcmV0dXJuIHJhbmRvbUlu\ndCgpLmludFZhbHVlKCkgJSBudW07CiAgICB9CgogICAgcHJpdmF0ZSB2b2lk\nIGluc2VydCgpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIHN0YXJ0VHgoZW0pOwoKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IChybmQoMTAwKSk7IGkrKykgewogICAgICAgICAgICBlbS5wZXJz\naXN0KHJhbmRvbWl6ZUJlYW4ocm5kY2xhc3MoKS5uZXdJbnN0YW5jZSgpKSk7\nCiAgICAgICAgfQoKICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgZW5kRW0o\nZW0pOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBxdWVyeSgpIHsKCiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPQogICAgICAgICAgICAoT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCgogICAgICAgIFN0cmluZ1tdIGZpbHRlcnMgPSBuZXcgU3RyaW5nW117CiAg\nICAgICAgICAgICJzZWxlY3QgZnJvbSAiICsgQXR0YWNoQS5jbGFzcy5nZXRO\nYW1lKCkgKyAiIHdoZXJlIGFpbnQgPiAwIiwKICAgICAgICAgICAgInNlbGVj\ndCBmcm9tICIgKyBBdHRhY2hBLmNsYXNzLmdldE5hbWUoKSArICIgd2hlcmUg\nYWludCA8IDAiLAogICAgICAgICAgICAic2VsZWN0IGZyb20gIiArIEF0dGFj\naEIuY2xhc3MuZ2V0TmFtZSgpICsgIiB3aGVyZSBhaW50ID4gMCIsCiAgICAg\nICAgICAgICJzZWxlY3QgZnJvbSAiICsgQXR0YWNoQi5jbGFzcy5nZXROYW1l\nKCkgKyAiIHdoZXJlIGFpbnQgPCAwIiwKICAgICAgICAgICAgInNlbGVjdCBm\ncm9tICIgKyBBdHRhY2hDLmNsYXNzLmdldE5hbWUoKSArICIgd2hlcmUgYWlu\ndCA+IDAiLAogICAgICAgICAgICAic2VsZWN0IGZyb20gIiArIEF0dGFjaEMu\nY2xhc3MuZ2V0TmFtZSgpICsgIiB3aGVyZSBhaW50IDwgMCIsCiAgICAgICAg\nfTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBybmQoNTApOyBpKysp\nIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIG5ldyBBcnJh\neUxpc3QoKENvbGxlY3Rpb24pIGVtCiAgICAgICAgICAgICAgICAgICAgLmNy\nZWF0ZVF1ZXJ5KCJvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmpwcWwuSlBR\nTCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnNbcmFuZG9tSW50\nKCkuaW50VmFsdWUoKSAlIGZpbHRlcnMubGVuZ3RoXSkuCiAgICAgICAgICAg\nICAgICAgICAgZ2V0UmVzdWx0TGlzdCgpKTsKICAgICAgICAgICAgfSBjYXRj\naCAoSWxsZWdhbFN0YXRlRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAg\nIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCgogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQg\nZGVsZXRlKCkgewoKICAgICAgICB0cnkgewogICAgICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlciBlbSA9CiAgICAgICAgICAgICAgICAoT3BlbkpQQUVu\ndGl0eU1hbmFnZXIpIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgICAgIHN0YXJ0VHgoZW0pOwoKICAgICAgICAgICAgZm9yIChJdGVyYXRv\nciBpID0gZW0uY3JlYXRlRXh0ZW50KHJuZGNsYXNzKCksIE1hdGgucmFuZG9t\nKCkgPiAwLjVmKS4KICAgICAgICAgICAgICAgIGl0ZXJhdG9yKCk7IGkuaGFz\nTmV4dCgpOykgewogICAgICAgICAgICAgICAgT2JqZWN0IG8gPSBpLm5leHQo\nKTsKICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC42ZikK\nICAgICAgICAgICAgICAgICAgICBlbS5yZW1vdmUobyk7CiAgICAgICAgICAg\nIH0KCiAgICAgICAgICAgIGVuZFR4KGVtKTsKICAgICAgICAgICAgZW5kRW0o\nZW0pOwogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZS5wcmludFN0\nYWNrVHJhY2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lk\nIHJlYWQoKSB7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0K\nICAgICAgICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwoKICAgICAgICBmb3IgKEl0ZXJhdG9yIGkgPSBl\nbS5jcmVhdGVFeHRlbnQocm5kY2xhc3MoKSwgTWF0aC5yYW5kb20oKSA+IDAu\nNWYpLgogICAgICAgICAgICBpdGVyYXRvcigpOyBpLmhhc05leHQoKTspIHsK\nICAgICAgICAgICAgT2JqZWN0IG8gPSBpLm5leHQoKTsKICAgICAgICB9Cgog\nICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwcml2YXRlIENsYXNzIHJu\nZGNsYXNzKCkgewogICAgICAgIENsYXNzW10gYyA9IG5ldyBDbGFzc1tdewog\nICAgICAgICAgICBBdHRhY2hBLmNsYXNzLAogICAgICAgICAgICBBdHRhY2hC\nLmNsYXNzLAogICAgICAgICAgICBBdHRhY2hDLmNsYXNzLAogICAgICAgICAg\nICBBdHRhY2hELmNsYXNzLAogICAgICAgICAgICBBdHRhY2hFLmNsYXNzLAog\nICAgICAgIH07CgogICAgICAgIHJldHVybiBjWyhpbnQpIChNYXRoLnJhbmRv\nbSgpICogYy5sZW5ndGgpXTsKICAgIH0KfQoK\n","encoding":"base64"}

