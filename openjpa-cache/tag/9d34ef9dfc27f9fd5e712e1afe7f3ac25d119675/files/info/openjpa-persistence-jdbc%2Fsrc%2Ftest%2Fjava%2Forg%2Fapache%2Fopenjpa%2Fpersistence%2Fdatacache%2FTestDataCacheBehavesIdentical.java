{"sha":"d0ceaa10c22563860e9574aa1e1ef2d69161d88c","node_id":"MDQ6QmxvYjIwNjM2NDpkMGNlYWExMGMyMjU2Mzg2MGU5NTc0YWExZTFlZjJkNjkxNjFkODhj","size":21229,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d0ceaa10c22563860e9574aa1e1ef2d69161d88c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNh\nY2hlOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5Mb2NrTW9kZVR5cGU7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXJJbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLkVudGl0eU5vdEZvdW5kRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5P\ncGVuSlBBRW50aXR5TWFuYWdlclNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5TdG9yZUNhY2hlOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLlN0b3JlQ2FjaGVJbXBsOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNhY2hlLmNvbW1vbi5h\ncHBzLkJpZGlyZWN0aW9uYWxPbmUyT25lT3duZWQ7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY2FjaGUuY29tbW9uLmFwcHMuQmlk\naXJlY3Rpb25hbE9uZTJPbmVPd25lcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2Fz\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kYXRh\nY2FjaGUuY29tbW9uLmFwcHMuUE9iamVjdDsKCi8qKgogKiBUZXN0cyB2YXJp\nb3VzIGFwcGxpY2F0aW9uIGJlaGF2aW9yIHdpdGggb3Igd2l0aG91dCBEYXRh\nQ2FjaGUuCiAqIElkZWFsbHksIGFuIGFwcGxpY2F0aW9uIHNob3VsZCBiZWhh\ndmUgaWRlbnRpY2FsbHkgaXJyZXNwZWN0aXZlIG9mIHRoZSAKICogRGF0YUNh\nY2hlLiBIb3dldmVyLCBwdXJwb3NlIG9mIHRoaXMgdGVzdCBpcyB0byBpZGVu\ndGlmeSBzcGVjaWZpYyBzY2VuYXJpb3MKICogd2hlcmUgdGhpcyBpZGVhbCBp\ncyB2aW9sYXRlZC4gVGhlIHRlc3QgY2FzZSBhbHNvIGRlbW9uc3RyYXRlcywg\nd2hlcmV2ZXIKICogcG9zc2libGUsIHdoYXQgZXh0cmEgc3RlcCBhbiBhcHBs\naWNhdGlvbiBtYXkgdGFrZSB0byBlbnN1cmUgdGhhdCBpdHMgCiAqIGJlaGF2\naW9yIHdpdGggb3Igd2l0aG91dCBEYXRhQ2FjaGUgcmVtYWlucyBpZGVudGlj\nYWwuICAgCiAqIAogKiBTbyBmYXIgZm9sbG93aW5nIHVzZSBjYXNlcyBhcmUg\nZm91bmQgdG8gZGVtb25zdHJhdGUgYmVoYXZpb3JhbCBkaWZmZXJlbmNlczoK\nICogMS4gSW5jb25zaXN0ZW50IGJpZGlyZWN0aW9uYWwgcmVsYXRpb24KICog\nMi4gUmVmcmVzaAogKiAKICogQGF1dGhvciBQaW5ha2kgUG9kZGFyCiAqIAog\nKi8KcHVibGljIGNsYXNzIFRlc3REYXRhQ2FjaGVCZWhhdmVzSWRlbnRpY2Fs\nIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2FzZSB7Cglwcml2YXRlIHN0YXRpYyBP\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1mV2l0aERhdGFDYWNo\nZTsKCXByaXZhdGUgc3RhdGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neVNQSSBlbWZXaXRob3V0RGF0YUNhY2hlOwoJCglwcml2YXRlIHN0YXRpYyBm\naW5hbCBib29sZWFuIFdJVEhfREFUQUNBQ0hFID0gdHJ1ZTsKCXByaXZhdGUg\nc3RhdGljIGZpbmFsIGJvb2xlYW4gQ09OU0lTVEVOVCA9IHRydWU7Cglwcml2\nYXRlIHN0YXRpYyBmaW5hbCBib29sZWFuIERJUlRZID0gdHJ1ZTsKCXByaXZh\ndGUgc3RhdGljIGZpbmFsIGJvb2xlYW4gUkVGUkVTSF9GUk9NX0RBVEFDQUNI\nRSA9IHRydWU7Cglwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NrTW9kZVR5cGUg\nTk9MT0NLID0gbnVsbDsKCXByaXZhdGUgc3RhdGljIGZpbmFsIENsYXNzIEVO\nVElUWV9OT1RfRk9VTkRfRVJST1IgPSBFbnRpdHlOb3RGb3VuZEV4Y2VwdGlv\nbi5jbGFzczsKCXByaXZhdGUgc3RhdGljIGZpbmFsIENsYXNzIE5PX0VSUk9S\nID0gbnVsbDsKCglwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgTUFSS0VS\nX0RBVEFDQUNIRSA9ICJpbiBEYXRhQ2FjaGUiOwoJcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgU3RyaW5nIE1BUktFUl9EQVRBQkFTRSAgPSAiaW4gRGF0YWJhc2Ui\nOwoJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIE1BUktFUl9DQUNIRSAg\nICAgPSAiaW4gT2JqZWN0IENhY2hlIjsKCXByaXZhdGUgc3RhdGljIGZpbmFs\nIFN0cmluZyBNQVJLRVJfRElSVFlfQ0FDSEUgPSAiaW4gT2JqZWN0IENhY2hl\nIChkaXJ0eSkiOwoJcHJpdmF0ZSBzdGF0aWMgbG9uZyBJRF9DT1VOVEVSID0g\nU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CgkKCgkvKioKCSAqIFNldHMg\ndXAgdHdvIEVudGl0eU1hbmFnZXJGYWN0b3J5OiBvbmUgd2l0aCBEYXRhQ2Fj\naGUgYW5vdGhlciB3aXRob3V0LgoJICovCglwdWJsaWMgdm9pZCBzZXRVcCgp\nIHRocm93cyBFeGNlcHRpb24gewoJCXN1cGVyLnNldFVwKCk7CgkJaWYgKGVt\nZldpdGhEYXRhQ2FjaGUgPT0gbnVsbCkgewoJCQllbWZXaXRoRGF0YUNhY2hl\nID0gY3JlYXRlRU1GKAoJCQkJCSJvcGVuanBhLmpkYmMuU3luY2hyb25pemVN\nYXBwaW5ncyIsCSJidWlsZFNjaGVtYSIsIAoJCQkJCSJvcGVuanBhLlJ1bnRp\nbWVVbmVuaGFuY2VkQ2xhc3NlcyIsCSJ1bnN1cHBvcnRlZCIsIAoJCQkJCSJv\ncGVuanBhLkRhdGFDYWNoZSIsICJ0cnVlIiwKCQkJCQkib3BlbmpwYS5SZW1v\ndGVDb21taXRQcm92aWRlciIsICJzanZtIiwKCQkJCQkib3BlbmpwYS5qZGJj\nLlVwZGF0ZU1hbmFnZXIiLCAiY29uc3RyYWludCIsCgkJCQkJUE9iamVjdC5j\nbGFzcywKCQkJCQlCaWRpcmVjdGlvbmFsT25lMk9uZU93bmVyLmNsYXNzLAoJ\nCQkJCUJpZGlyZWN0aW9uYWxPbmUyT25lT3duZWQuY2xhc3MsIENMRUFSX1RB\nQkxFUyk7CgkJCWVtZldpdGhvdXREYXRhQ2FjaGUgPSBjcmVhdGVFTUYoCgkJ\nCQkJIm9wZW5qcGEuUnVudGltZVVuZW5oYW5jZWRDbGFzc2VzIiwJInVuc3Vw\ncG9ydGVkIiwgCgkJCQkJIm9wZW5qcGEuRGF0YUNhY2hlIiwgImZhbHNlIiwK\nCQkJCQkib3BlbmpwYS5qZGJjLlVwZGF0ZU1hbmFnZXIiLCAiY29uc3RyYWlu\ndCIsCgkJCQkJUE9iamVjdC5jbGFzcywKCQkJCQlCaWRpcmVjdGlvbmFsT25l\nMk9uZU93bmVkLmNsYXNzLAoJCQkJCUJpZGlyZWN0aW9uYWxPbmUyT25lT3du\nZXIuY2xhc3MsIENMRUFSX1RBQkxFUyk7CgoJCQlhc3NlcnROb3ROdWxsKGVt\nZldpdGhEYXRhQ2FjaGUpOwoJCQlhc3NlcnROb3ROdWxsKGVtZldpdGhvdXRE\nYXRhQ2FjaGUpOwoKCQkJLy8gU3RvcmVDYWNoZSBpcywgYnkgZGVzaWduLCBh\nbHdheXMgbm9uLW51bGwgCgkJCWFzc2VydE5vdE51bGwoZW1mV2l0aERhdGFD\nYWNoZS5nZXRTdG9yZUNhY2hlKCkpOwoJCQlhc3NlcnROb3ROdWxsKGVtZldp\ndGhvdXREYXRhQ2FjaGUuZ2V0U3RvcmVDYWNoZSgpKTsKCgkJCS8vIGhvd2V2\nZXIsIGZvbGxvd2luZyBkaXN0aW5ndWlzaGVzIHdoZXRoZXIgRGF0YUNhY2hl\nIGlzIGFjdGl2ZSAgCgkJCWFzc2VydFRydWUoaXNEYXRhQ2FjaGVBY3RpdmUo\nZW1mV2l0aERhdGFDYWNoZSkpOwoJCQlhc3NlcnRGYWxzZShpc0RhdGFDYWNo\nZUFjdGl2ZShlbWZXaXRob3V0RGF0YUNhY2hlKSk7CgkJfQoJfQoJCgkvKioK\nCSAqIEFmZmlybXMgdmlhIGludGVybmFsIHN0cnVjdHVyZXMgaWYgdGhlIGdp\ndmVuIGZhY3RvcnkgaXMgY29uZmlndXJlZCB3aXRoCgkgKiBhY3RpdmUgRGF0\nYUNhY2hlLiBCZWNhdXNlLCBldmVuIHdoZW4gRGF0YUNhY2hlIGlzIGNvbmZp\nZ3VyZWQgdG8gYmUKCSAqIGZhbHNlLCBhIG5vLW9wIFN0b3JlQ2FjaGUgaXMg\naW5zdGFudGlhdGVkIGJ5IGRlc2lnbi4KCSAqLwoJYm9vbGVhbiBpc0RhdGFD\nYWNoZUFjdGl2ZShPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgZW1m\nKSB7CgkJcmV0dXJuICgoU3RvcmVDYWNoZUltcGwpIGVtZi5nZXRTdG9yZUNh\nY2hlKCkpLmdldERlbGVnYXRlKCkgIT0gbnVsbAoJCSAgICAmJiBlbWYuZ2V0\nQ29uZmlndXJhdGlvbigpCgkJICAgICAgICAgIC5nZXREYXRhQ2FjaGVNYW5h\nZ2VySW5zdGFuY2UoKQoJCSAgICAgICAgICAuZ2V0U3lzdGVtRGF0YUNhY2hl\nKCkgIT0gbnVsbDsKCX0KCgkvKioKCSAqIENyZWF0ZSBvbmUtdG8tb25lIGJp\nZGlyZWN0aW9uYWwgcmVsYXRpb24gKG1heSBvciBtYXkgbm90IGJlIGNvbnNp\nc3RlbnQpCgkgKiBiZXR3ZWVuIHR3byBwYWlycyBvZiBpbnN0YW5jZXMuIENy\nZWF0ZXMgZm91ciBpbnN0YW5jZXMgT3duZXIxLCBPd25lZDEsCgkgKiBPd25l\ncjIsIE93bmVkMi4gVGhlIGZpcnN0IGluc3RhbmNlIGhhcyB0aGUgZ2l2ZW4g\naWQuIFRoZSBpZCBvZiB0aGUgb3RoZXIKCSAqIGluc3RhbmNlcyBtb25vdG9u\naWNhbGx5IGluY3JlYXNlIGJ5IDEuIFRoZSByZWxhdGlvbnNoaXAgaXMgc2V0\nIGVpdGhlcgoJICogY29uc2lzdGVudGx5IG9yIGluY29uc2lzdGVudGx5LiBD\nb25zaXN0ZW50IHJlbGF0aW9uIGlzIHdoZW4gT3duZXIxIHBvaW50cwoJICog\ndG8gT3duZWQxIGFuZCBPd25lZDEgcG9pbnRzIGJhY2sgdG8gT3duZXIxLiBJ\nbmNvbnNpc3RlbnQgcmVsYXRpb24gaXMgd2hlbgoJICogT3duZXIxIHBvaW50\ncyB0byBPd25lZDEgYnV0IE93bmVkMSBwb2ludHMgdG8gT3duZXIyIGluc3Rl\nYWQgb2YgT3duZXIxLgoJICogCgkgKiAKCSAqIEBwYXJhbSBlbQoJICogICAg\nICAgICAgICB0aGUgZW50aXR5IG1hbmFnZXIgdG8gcGVyc2lzdCB0aGUgaW5z\ndGFuY2VzCgkgKiBAcGFyYW0gaWQKCSAqICAgICAgICAgICAgdGhlIGlkZW50\naWZpZXIgb2YgdGhlIGZpcnN0IG93bmVyIGluc3RhbmNlLiBUaGUgaWRlbnRp\nZmllciBmb3IKCSAqICAgICAgICAgICAgdGhlIG90aGVyIGluc3RhbmNlcyBh\ncmUgc2VxdWVudGlhbCBpbiBvcmRlciBvZiBjcmVhdGlvbi4KCSAqIEBwYXJh\nbSBjb25zaXN0ZW50CgkgKiAgICAgICAgICAgIGlmIHRydWUgc2V0cyB0aGUg\ncmVsYXRpb25zaGlwIGFzIGNvbnNpc3RlbnQuCgkgKi8KCXB1YmxpYyB2b2lk\nIGNyZWF0ZUJpZGlyZWN0aW9uYWxSZWxhdGlvbihFbnRpdHlNYW5hZ2VyIGVt\nLCBsb25nIGlkLAoJCQlib29sZWFuIGNvbnNpc3RlbnQpIHsKCQlCaWRpcmVj\ndGlvbmFsT25lMk9uZU93bmVyIG93bmVyMSA9IG5ldyBCaWRpcmVjdGlvbmFs\nT25lMk9uZU93bmVyKCk7CgkJQmlkaXJlY3Rpb25hbE9uZTJPbmVPd25lZCBv\nd25lZDEgPSBuZXcgQmlkaXJlY3Rpb25hbE9uZTJPbmVPd25lZCgpOwoJCUJp\nZGlyZWN0aW9uYWxPbmUyT25lT3duZXIgb3duZXIyID0gbmV3IEJpZGlyZWN0\naW9uYWxPbmUyT25lT3duZXIoKTsKCQlCaWRpcmVjdGlvbmFsT25lMk9uZU93\nbmVkIG93bmVkMiA9IG5ldyBCaWRpcmVjdGlvbmFsT25lMk9uZU93bmVkKCk7\nCgkJCgkJb3duZXIxLnNldElkKGlkKyspOwoJCW93bmVkMS5zZXRJZChpZCsr\nKTsKCQlvd25lcjIuc2V0SWQoaWQrKyk7CgkJb3duZWQyLnNldElkKGlkKysp\nOwoJCQoJCW93bmVyMS5zZXROYW1lKCJPd25lcjEiKTsKCQlvd25lZDEuc2V0\nTmFtZSgiT3duZWQxIik7CgkJb3duZWQyLnNldE5hbWUoIk93bmVkMiIpOwoJ\nCW93bmVyMi5zZXROYW1lKCJPd25lcjIiKTsKCgkJb3duZXIxLnNldE93bmVk\nKG93bmVkMSk7CgkJb3duZXIyLnNldE93bmVkKG93bmVkMik7CgoJCWlmIChj\nb25zaXN0ZW50KSB7CgkJCW93bmVkMS5zZXRPd25lcihvd25lcjEpOwoJCQlv\nd25lZDIuc2V0T3duZXIob3duZXIyKTsKCQl9IGVsc2UgewoJCQlvd25lZDEu\nc2V0T3duZXIob3duZXIyKTsKCQkJb3duZWQyLnNldE93bmVyKG93bmVyMSk7\nCgkJfQoKCQllbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgkJZW0ucGVy\nc2lzdChvd25lcjEpOwoJCWVtLnBlcnNpc3Qob3duZWQxKTsKCQllbS5wZXJz\naXN0KG93bmVyMik7CgkJZW0ucGVyc2lzdChvd25lZDIpOwoJCWVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CgkJZW0uY2xlYXIoKTsKCX0KCgkvKioK\nCSAqIFZlcmlmaWVzIHRoYXQgYmlkaXJlY3Rpb25hbGx5IHJlbGF0ZWQgb2Jq\nZWN0cyBjYW4gYmUgcGVyc2lzdGVkIAoJICogYW5kIGxhdGVyIHJldHJpZXZl\nZCBpbiBhIGRpZmZlcmVudCB0cmFuc2FjdGlvbi4gCgkgKiAKCSAqIENyZWF0\nZXMgaW50ZXJyZWxhdGVkIHNldCBvZiBmb3VyIGluc3RhbmNlcy4KCSAqIEVz\ndGFibGlzaCB0aGVpciByZWxhdGlvbiBlaXRoZXIgY29uc2lzdGVudGx5IG9y\nIGluY29uc2lzdGVudGx5IGJhc2VkCgkgKiBvbiB0aGUgZ2l2ZW4gZmxhZy4K\nCSAqIFBlcnNpc3QgdGhlbSBhbmQgdGhlbiBjbGVhciB0aGUgY29udGV4dC4g\nCgkgKiBGZXRjaCB0aGUgaW5zdGFuY2VzIGluIG1lbW9yeSBhZ2FpbiBieSB0\naGVpciBpZGVudGlmaWVycy4gCgkgKiBDb21wYXJlIHRoZSBpbnRlcnJlbGF0\naW9ucyBiZXR3ZWVuIHRoZSBmZXRjaGVkIGluc3RhbmNlcyB3aXRoIHRoZSAK\nCSAqIHJlbGF0aW9ucyBvZiB0aGUgb3JpZ2luYWwgaW5zdGFuY2VzICh3aGlj\naCBjYW4gYmUgY29uc2lzdGVudCBvciAKCSAqIGluY29uc2lzdGVudCkuIAoJ\nICogCgkgKiBUaGUgbWFwcGluZyBzcGVjaWZpY2F0aW9uIGlzIHN1Y2ggdGhh\ndCB0aGUgYmlkaXJlY3Rpb25hbCByZWxhdGlvbiBpcyAKCSAqIHN0b3JlZCBp\nbiBkYXRhYmFzZSBieSBhIHNpbmdsZSBmb3JlaWduIGtleS4gSGVuY2UgZGF0\nYWJhc2UgcmVsYXRpb24KCSAqIGlzIGFsd2F5cyBjb25zaXN0ZW50LiBIZW5j\nZSB0aGUgaW5zdGFuY2VzIHJldHJpZXZlZCBmcm9tIGRhdGFiYXNlIGFyZQoJ\nICogYWx3YXlzIGNvbnNpc3RlbnRseSByZWxhdGVkIGlycmVzcGVjdGl2ZSBv\nZiB3aGV0aGVyIHRoZXkgd2VyZSBjcmVhdGVkCgkgKiB3aXRoIGNvbnNpc3Rl\nbnQgb3IgaW5jb25zaXN0ZW50IHJlbGF0aW9uLgoJICogSG93ZXZlciwgd2hl\nbiB0aGUgaW5zdGFuY2VzIGFyZSByZXRyaWV2ZWQgZnJvbSB0aGUgZGF0YSBj\nYWNoZSwgZGF0YSBjYWNoZQoJICogd2lsbCBwcmVzZXJ2ZSB0aGUgaW4tbWVt\nb3J5IHJlbGF0aW9ucyBldmVuIHdoZW4gdGhleSBhcmUgaW5jb25zaXN0ZW50\nLgoJICogICAgCgkgKiBAcGFyYW0gdXNlRGF0YUNhY2hlCgkgKiAgICAgICAg\nICAgIHVzZSBEYXRhQ2FjaGUKCSAqIEBwYXJhbSBjb25zaXN0ZW50CgkgKiAg\nICAgICAgICAgIGFzc3VtZSB0aGF0IHRoZSByZWxhdGlvbnNoaXAgd2VyZSBj\ncmVhdGVkIGFzIGNvbnNpc3RlbnQuCgkgKi8KCXB1YmxpYyB2b2lkIHZlcmlm\neUJpZGlyZWN0aW9uYWxSZWxhdGlvbihib29sZWFuIHVzZURhdGFDYWNoZSwK\nCQkJYm9vbGVhbiBjcmVhdGVDb25zaXN0ZW50LCBib29sZWFuIGV4cGVjdENv\nbnNpc3RlbnQpIHsKCQlFbnRpdHlNYW5hZ2VyIGVtID0gKHVzZURhdGFDYWNo\nZSkgCgkJICAgICAgICAgICAgICAgICA/IGVtZldpdGhEYXRhQ2FjaGUuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpIAoJCSAgICAgICAgICAgICAgICAgOiBlbWZX\naXRob3V0RGF0YUNhY2hlLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCQkgICAg\nICAgICAgICAgICAgIAoJCWxvbmcgaWQgPSBJRF9DT1VOVEVSKys7CgkJSURf\nQ09VTlRFUiArPSA0OwoJCWNyZWF0ZUJpZGlyZWN0aW9uYWxSZWxhdGlvbihl\nbSwgaWQsIGNyZWF0ZUNvbnNpc3RlbnQpOwoJCQoJCQoJCUJpZGlyZWN0aW9u\nYWxPbmUyT25lT3duZXIgb3duZXIxID0gZW0uZmluZChCaWRpcmVjdGlvbmFs\nT25lMk9uZU93bmVyLmNsYXNzLCBpZCk7CgkJQmlkaXJlY3Rpb25hbE9uZTJP\nbmVPd25lZCBvd25lZDEgPSBlbS5maW5kKEJpZGlyZWN0aW9uYWxPbmUyT25l\nT3duZWQuY2xhc3MsIGlkICsgMSk7CgkJQmlkaXJlY3Rpb25hbE9uZTJPbmVP\nd25lciBvd25lcjIgPSBlbS5maW5kKEJpZGlyZWN0aW9uYWxPbmUyT25lT3du\nZXIuY2xhc3MsIGlkICsgMik7CgkJQmlkaXJlY3Rpb25hbE9uZTJPbmVPd25l\nZCBvd25lZDIgPSBlbS5maW5kKEJpZGlyZWN0aW9uYWxPbmUyT25lT3duZWQu\nY2xhc3MsIGlkICsgMyk7CgoJCWFzc2VydE5vdE51bGwob3duZXIxKTsKCQlh\nc3NlcnROb3ROdWxsKG93bmVyMik7CgkJYXNzZXJ0Tm90TnVsbChvd25lZDEp\nOwoJCWFzc2VydE5vdE51bGwob3duZWQyKTsKCgkJYXNzZXJ0RXF1YWxzKG93\nbmVyMSwgZXhwZWN0Q29uc2lzdGVudCAKCQkJCQk/IG93bmVyMS5nZXRPd25l\nZCgpLmdldE93bmVyKCkgCgkJCQkJOiBvd25lcjIuZ2V0T3duZWQoKS5nZXRP\nd25lcigpKTsKCQlhc3NlcnRFcXVhbHMob3duZXIyLCBleHBlY3RDb25zaXN0\nZW50IAoJCQkJCT8gb3duZXIyLmdldE93bmVkKCkuZ2V0T3duZXIoKSAKCQkJ\nCSAgICA6IG93bmVyMS5nZXRPd25lZCgpLmdldE93bmVyKCkpOwoKCgkJYXNz\nZXJ0RXF1YWxzKG93bmVkMSwgb3duZXIxLmdldE93bmVkKCkpOwoJCWFzc2Vy\ndEVxdWFscyhleHBlY3RDb25zaXN0ZW50ID8gb3duZXIxIDogb3duZXIyLCBv\nd25lZDEuZ2V0T3duZXIoKSk7CgkJYXNzZXJ0RXF1YWxzKG93bmVkMiwgb3du\nZXIyLmdldE93bmVkKCkpOwoJCWFzc2VydEVxdWFscyhleHBlY3RDb25zaXN0\nZW50ID8gb3duZXIyIDogb3duZXIxLCBvd25lZDIuZ2V0T3duZXIoKSk7Cgl9\nCgoJcHVibGljIHZvaWQgdGVzdENvbnNpdGVudEJpZGlyZWN0aW9uYWxSZWxh\ndGlvbklzUHJlc2VydmVkV2l0aERhdGFDYWNoZSgpIHsKCQl2ZXJpZnlCaWRp\ncmVjdGlvbmFsUmVsYXRpb24oV0lUSF9EQVRBQ0FDSEUsIENPTlNJU1RFTlQs\nIENPTlNJU1RFTlQpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RDb25zaXRlbnRC\naWRpcmVjdGlvbmFsUmVsYXRpb25Jc1ByZXNlcnZlZFdpdGhvdXREYXRhQ2Fj\naGUoKSB7CgkJdmVyaWZ5QmlkaXJlY3Rpb25hbFJlbGF0aW9uKCFXSVRIX0RB\nVEFDQUNIRSwgQ09OU0lTVEVOVCwgQ09OU0lTVEVOVCk7Cgl9CgoJcHVibGlj\nIHZvaWQgdGVzdEluY29uc2l0ZW50QmlkaXJlY3Rpb25hbFJlbGF0aW9uSXNQ\ncmVzZXJ2ZWRXaXRoRGF0YUNhY2hlKCkgewoJCXZlcmlmeUJpZGlyZWN0aW9u\nYWxSZWxhdGlvbihXSVRIX0RBVEFDQUNIRSwgIUNPTlNJU1RFTlQsICFDT05T\nSVNURU5UKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0SW5jb25zaXRlbnRCaWRp\ncmVjdGlvbmFsUmVsYXRpb25Jc05vdFByZXNlcnZlZFdpdGhvdXREYXRhQ2Fj\naGUoKSB7CgkJdmVyaWZ5QmlkaXJlY3Rpb25hbFJlbGF0aW9uKCFXSVRIX0RB\nVEFDQUNIRSwgIUNPTlNJU1RFTlQsIENPTlNJU1RFTlQpOwoJfQoJCgkvKioK\nCSAqIFZlcmlmeSB0aGF0IHJlZnJlc2goKSBtYXkgZmV0Y2ggc3RhdGUgZnJv\nbSBlaXRoZXIgdGhlIGRhdGEgY2FjaGUgb3IgdGhlCgkgKiBkYXRhYmFzZSBi\nYXNlZCBvbiBkaWZmZXJlbnQgY29uZGl0aW9ucy4gCgkgKiBUaGUgY29uZGl0\naW9ucyB0aGF0IGltcGFjdCBhcmUgCgkgKiBhKSB3aGV0aGVyIGN1cnJlbnQg\nbG9jayBpcyBzdHJvbmdlciB0aGFuIE5PTkUgCgkgKiBiKSB3aGV0aGVyIHRo\nZSBpbnN0YW5jZSBiZWluZyByZWZyZXNoZWQgaXMgZGlydHkKCSAqIAoJICog\nQW4gaW5zdGFuY2UgaXMgY3JlYXRlZCB3aXRoIGRhdGEgY2FjaGUgbWFya2Vy\nIGFuZCBwZXJzaXN0ZWQuIAoJICogQSBuYXRpdmUgU1FMIGlzIHVzZWQgdG8g\ndXBkYXRlIHRoZSBkYXRhYmFzZSByZWNvcmQgd2l0aCBkYXRhYmFzZSBtYXJr\nZXIuIAoJICogVGhlIGluLW1lbW9yeSBpbnN0YW5jZSBpcyBub3QgYXdhcmUg\nb2YgdGhpcyBvdXQtb2YtYmFuZCB1cGRhdGUuIAoJICogVGhlbiB0aGUgaW4t\nbWVtb3J5IGluc3RhbmNlIGlzIHJlZnJlc2hlZC4gVGhlIG1hcmtlciBvZiB0\naGUgcmVmcmVzaGVkIAoJICogaW5zdGFuY2UgdGVsbHMgd2hldGhlciB0aGUg\naW5zdGFuY2UgaXMgcmVmcmVzaGVkIGZyb20gdGhlIGRhdGEgY2FjaGUKCSAq\nIG9mIHRoZSBkYXRhYmFzZS4gCgkgKiAKCSAqIEBwYXJhbSB1c2VEYXRhQ2Fj\naGUgZmxhZ3MgaWYgZGF0YSBjYWNoZSBpcyBhY3RpdmUuIGlmIG5vdCwgdGhl\nbiBzdXJlbHkKCSAqIHJlZnJlc2ggYWx3YXlzIGZldGNoIHN0YXRlIGZyb20g\ndGhlIGRhdGFiYXNlLgoJICogCgkgKiBAcGFyYW0gZGF0YWNhY2hlIHRoZSBt\nYXJrZXIgZm9yIHRoZSBjb3B5IG9mIHRoZSBkYXRhIGNhY2hlZCBpbnN0YW5j\nZQoJICogQHBhcmFtIGRhdGFiYXNlIHRoZSBtYXJrZXIgZm9yIHRoZSBkYXRh\nYmFzZSByZWNvcmQKCSAqIEBwYXJhbSBsb2NrIGxvY2sgdG8gYmUgdXNlZAoJ\nICogQHBhcmFtIG1ha2VEaXJ0eUJlZm9yZVJlZnJlc2ggZmxhZ3MgaWYgdGhl\nIGluc3RhbmNlIGJlIGRpcnRpZWQgYmVmb3JlCgkgKiByZWZyZXNoKCkKCSAq\nIEBwYXJhbSBleHBlY3RlZCBUaGUgZXhwZWN0ZWQgbWFya2VyIGkuZS4gd2hl\ncmUgdGhlIHN0YXRlIGlzIHJlZnJlc2hlZCAKCSAqIGZyb20uIFRoaXMgc2hv\ndWxkIGJlIGFsd2F5cyA8Y29kZT5NQVJLRVJfREFUQUJBU0U8L2NvZGU+LgoJ\nICogYSkgd2hldGhlciBEYXRhQ2FjaGUgaXMgYWN0aXZlCgkgKiBiKSB3aGV0\naGVyIGN1cnJlbnQgTG9jayBpcyBzdHJvbmdlciB0aGFuIE5PTE9DSwoJICog\nYykgd2hldGhlciB0aGUgb2JqZWN0IHRvIGJlIHJlZnJlc2hlZCBpcyBkaXJ0\neQoJICogCgkgKiBUaGUgZm9sbG93aW5nIHRydXRoIHRhYmxlIGVudW1lcmF0\nZXMgdGhlIHBvc3NpYmlsaXRpZXMKCSAqIAoJICogVXNlIENhY2hlPyAgIExv\nY2s/ICAgRGlydHk/ICAgICBUYXJnZXQKCSAqICAgIFkgICAgICAgICAgWSAg\nICAgICBZICAgICAgICAgRGF0YWJhc2UKCSAqICAgIFkgICAgICAgICAgTiAg\nICAgICBZICAgICAgICAgRGF0YSBDYWNoZQoJICogICAgWSAgICAgICAgICBZ\nICAgICAgIE4gICAgICAgICBEYXRhIENhY2hlCgkgKiAgICBZICAgICAgICAg\nIE4gICAgICAgTiAgICAgICAgIERhdGEgQ2FjaGUKCSAqICAgIAoJICogICAg\nTiAgICAgICAgICBZICAgICAgIFkgICAgICAgICBEYXRhYmFzZQoJICogICAg\nTiAgICAgICAgICBOICAgICAgIFkgICAgICAgICBEYXRhYmFzZQoJICogICAg\nTiAgICAgICAgICBZICAgICAgIE4gICAgICAgICBPYmplY3QgQ2FjaGUKCSAq\nICAgIE4gICAgICAgICAgTiAgICAgICBOICAgICAgICAgT2JqZWN0IENhY2hl\nCgoJICovCglwdWJsaWMgdm9pZCB2ZXJpZnlSZWZyZXNoKGJvb2xlYW4gdXNl\nRGF0YUNhY2hlLCBMb2NrTW9kZVR5cGUgbG9jaywgCgkJCWJvb2xlYW4gbWFr\nZURpcnR5QmVmb3JlUmVmcmVzaCwgYm9vbGVhbiByZWZyZXNoRnJvbURhdGFD\nYWNoZSwgCgkJCVN0cmluZyBleHBlY3RlZCkgewoJCU9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeVNQSSBlbWYgPSAodXNlRGF0YUNhY2hlKQoJCQk/IGVt\nZldpdGhEYXRhQ2FjaGUgOiBlbWZXaXRob3V0RGF0YUNhY2hlOwoJCWVtZi5n\nZXRDb25maWd1cmF0aW9uKCkuc2V0UmVmcmVzaEZyb21EYXRhQ2FjaGUocmVm\ncmVzaEZyb21EYXRhQ2FjaGUpOwoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJ\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAKCQll\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgkJUE9iamVjdCBwYyA9IG5l\ndyBQT2JqZWN0KCk7CgkJcGMuc2V0TmFtZSh1c2VEYXRhQ2FjaGUgPyBNQVJL\nRVJfREFUQUNBQ0hFIDogTUFSS0VSX0NBQ0hFKTsKCQllbS5wZXJzaXN0KHBj\nKTsKCQllbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwoJCQoJCU9iamVj\ndCBvaWQgPSBwYy5nZXRJZCgpOwoJCVN0b3JlQ2FjaGUgZGF0YUNhY2hlID0g\nZW1mLmdldFN0b3JlQ2FjaGUoKTsKCQlhc3NlcnRFcXVhbHModXNlRGF0YUNh\nY2hlLCBkYXRhQ2FjaGUuY29udGFpbnMoUE9iamVjdC5jbGFzcywgb2lkKSk7\nCgkJCgkJLy8gTW9kaWZ5IHRoZSByZWNvcmQgaW4gdGhlIGRhdGFiYXNlIGlu\nIGEgc2VwYXJhdGUgdHJhbnNhY3Rpb24gdXNpbmcKCQkvLyBuYXRpdmUgU1FM\nIHNvIHRoYXQgdGhlIGluLW1lbW9yeSBpbnN0YW5jZSBpcyBub3QgYWx0ZXJl\nZCAKCQllbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgkJU3RyaW5nIHNx\nbCA9ICJVUERBVEUgUE9CSkVDVCBTRVQgTkFNRT0nIisgTUFSS0VSX0RBVEFC\nQVNFICsiJyBXSEVSRSBpZD0iK29pZDsKCQllbS5jcmVhdGVOYXRpdmVRdWVy\neShzcWwpLmV4ZWN1dGVVcGRhdGUoKTsKCQllbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwoJCQoJCWFzc2VydEVxdWFscyh1c2VEYXRhQ2FjaGUgPyBN\nQVJLRVJfREFUQUNBQ0hFIDogTUFSS0VSX0NBQ0hFLCBwYy5nZXROYW1lKCkp\nOwoJCQoJCWVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCQlpZiAobWFr\nZURpcnR5QmVmb3JlUmVmcmVzaCkgewoJCQlwYy5zZXROYW1lKE1BUktFUl9E\nSVJUWV9DQUNIRSk7CgkJfSAKCQlhc3NlcnRFcXVhbHMobWFrZURpcnR5QmVm\nb3JlUmVmcmVzaCwgZW0uaXNEaXJ0eShwYykpOwoKCQlpZiAobG9jayAhPSBu\ndWxsKSB7CgkJCSgoRW50aXR5TWFuYWdlckltcGwpZW0pLmdldEZldGNoUGxh\nbigpLnNldFJlYWRMb2NrTW9kZShsb2NrKTsKCQl9CgkJZW0ucmVmcmVzaChw\nYyk7CgkJCgkJYXNzZXJ0RXF1YWxzKGV4cGVjdGVkLCBwYy5nZXROYW1lKCkp\nOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7Cgl9CgkKCS8qKgoJ\nICogVGhlIGV4cGVjdGVkIG1hcmtlciBpLmUuIHdoZXJlIHRoZSBzdGF0ZSBp\ncyByZWZyZXNoZWQgZnJvbSBkZXBlbmRzIG9uCgkgKiBhKSB3aGV0aGVyIERh\ndGFDYWNoZSBpcyBhY3RpdmUKCSAqIGIpIHdoZXRoZXIgY3VycmVudCBMb2Nr\nIGlzIHN0cm9uZ2VyIHRoYW4gTk9MT0NLCgkgKiBjKSB3aGV0aGVyIHRoZSBv\nYmplY3QgdG8gYmUgcmVmcmVzaGVkIGlzIGRpcnR5CgkgKiAKCSAqIFRoZSBm\nb2xsb3dpbmcgdHJ1dGggdGFibGUgZW51bWVyYXRlcyB0aGUgcG9zc2liaWxp\ndGllcwoJICogCgkgKiBVc2UgQ2FjaGU/ICAgTG9jaz8gICBEaXJ0eT8gICAg\nIFRhcmdldAoJICogICAgWSAgICAgICAgICBZICAgICAgIFkgICAgICAgICBE\nYXRhYmFzZQoJICogICAgWSAgICAgICAgICBOICAgICAgIFkgICAgICAgICBE\nYXRhIENhY2hlCgkgKiAgICBZICAgICAgICAgIFkgICAgICAgTiAgICAgICAg\nIERhdGEgQ2FjaGUKCSAqICAgIFkgICAgICAgICAgTiAgICAgICBOICAgICAg\nICAgRGF0YSBDYWNoZQoJICogICAgCgkgKiAgICBOICAgICAgICAgIFkgICAg\nICAgWSAgICAgICAgIERhdGFiYXNlCgkgKiAgICBOICAgICAgICAgIE4gICAg\nICAgWSAgICAgICAgIERhdGFiYXNlCgkgKiAgICBOICAgICAgICAgIFkgICAg\nICAgTiAgICAgICAgIE9iamVjdCBDYWNoZQoJICogICAgTiAgICAgICAgICBO\nICAgICAgIE4gICAgICAgICBPYmplY3QgQ2FjaGUKCSAqICAgIAoJICogQHBh\ncmFtIGRhdGFjYWNoZSB0aGUgbWFya2VyIGZvciAKCSAqIEBwYXJhbSBkYXRh\nYmFzZQoJICogQHBhcmFtIHVzZURhdGFDYWNoZQoJICogQHBhcmFtIGxvY2sK\nCSAqIEBwYXJhbSBtYWtlRGlydHlCZWZvcmVSZWZyZXNoCgkgKiBAcmV0dXJu\nCgkgKi8KCVN0cmluZyBnZXRFeHBlY3RlZE1hcmtlcihib29sZWFuIHVzZURh\ndGFDYWNoZSwgTG9ja01vZGVUeXBlIGxvY2ssIAoJCQlib29sZWFuIG1ha2VE\naXJ0eUJlZm9yZVJlZnJlc2gpIHsKCQlpZiAodXNlRGF0YUNhY2hlKSB7CgkJ\nCXJldHVybiAobG9jayAhPSBudWxsKSA/IE1BUktFUl9EQVRBQkFTRSA6IE1B\nUktFUl9EQVRBQ0FDSEU7IAoJCX0gZWxzZSB7CgkJCXJldHVybiBNQVJLRVJf\nREFUQUJBU0U7CgkJfQoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0RGlydHlSZWZy\nZXNoV2l0aE5vTG9ja0hpdHNEYXRhYmFzZSgpIHsKCQl2ZXJpZnlSZWZyZXNo\nKFdJVEhfREFUQUNBQ0hFLCBOT0xPQ0ssIERJUlRZLCAhUkVGUkVTSF9GUk9N\nX0RBVEFDQUNIRSwgTUFSS0VSX0RBVEFDQUNIRSk7Cgl9CgkKCXB1YmxpYyB2\nb2lkIHRlc3REaXJ0eVJlZnJlc2hXaXRoTm9Mb2NrSGl0c0RhdGFDYWNoZSgp\nIHsKCQl2ZXJpZnlSZWZyZXNoKFdJVEhfREFUQUNBQ0hFLCBOT0xPQ0ssIERJ\nUlRZLCBSRUZSRVNIX0ZST01fREFUQUNBQ0hFLCBNQVJLRVJfREFUQUNBQ0hF\nKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdENsZWFuUmVmcmVzaFdpdGhOb0xv\nY2tEb2VzTm90SGl0RGF0YWJhc2UoKSB7CgkJdmVyaWZ5UmVmcmVzaChXSVRI\nX0RBVEFDQUNIRSwgTk9MT0NLLCAhRElSVFksICFSRUZSRVNIX0ZST01fREFU\nQUNBQ0hFLCBNQVJLRVJfREFUQUNBQ0hFKTsKCX0KCQoJcHVibGljIHZvaWQg\ndGVzdENsZWFuUmVmcmVzaFdpdGhOb0xvY2tIaXRzRGF0YUNhY2hlKCkgewoJ\nCXZlcmlmeVJlZnJlc2goV0lUSF9EQVRBQ0FDSEUsIE5PTE9DSywgIURJUlRZ\nLCBSRUZSRVNIX0ZST01fREFUQUNBQ0hFLCBNQVJLRVJfREFUQUNBQ0hFKTsK\nCX0KCQoJcHVibGljIHZvaWQgdGVzdERpcnR5UmVmcmVzaFdpdGhSZWFkTG9j\na0hpdHNEYXRhYmFzZSgpIHsKCQl2ZXJpZnlSZWZyZXNoKFdJVEhfREFUQUNB\nQ0hFLCBMb2NrTW9kZVR5cGUuUkVBRCwgRElSVFksIFJFRlJFU0hfRlJPTV9E\nQVRBQ0FDSEUsIE1BUktFUl9EQVRBQkFTRSk7CgkJdmVyaWZ5UmVmcmVzaChX\nSVRIX0RBVEFDQUNIRSwgTG9ja01vZGVUeXBlLlJFQUQsIERJUlRZLCAhUkVG\nUkVTSF9GUk9NX0RBVEFDQUNIRSwgTUFSS0VSX0RBVEFCQVNFKTsKCX0KCQoJ\ncHVibGljIHZvaWQgdGVzdENsZWFuUmVmcmVzaFdpdGhSZWFkTG9ja0RvZXNO\nb3RIaXREYXRhYmFzZSgpIHsKCQl2ZXJpZnlSZWZyZXNoKFdJVEhfREFUQUNB\nQ0hFLCBMb2NrTW9kZVR5cGUuUkVBRCwgIURJUlRZLCBSRUZSRVNIX0ZST01f\nREFUQUNBQ0hFLCBNQVJLRVJfREFUQUNBQ0hFKTsKCQl2ZXJpZnlSZWZyZXNo\nKFdJVEhfREFUQUNBQ0hFLCBMb2NrTW9kZVR5cGUuUkVBRCwgIURJUlRZLCAh\nUkVGUkVTSF9GUk9NX0RBVEFDQUNIRSwgTUFSS0VSX0RBVEFDQUNIRSk7Cgl9\nCgkKCXB1YmxpYyB2b2lkIHRlc3REaXJ0eVJlZnJlc2hXaXRoV3JpdGVMb2Nr\nSGl0c0RhdGFiYXNlKCkgewoJCXZlcmlmeVJlZnJlc2goV0lUSF9EQVRBQ0FD\nSEUsIExvY2tNb2RlVHlwZS5XUklURSwgRElSVFksIFJFRlJFU0hfRlJPTV9E\nQVRBQ0FDSEUsIE1BUktFUl9EQVRBQkFTRSk7CgkJdmVyaWZ5UmVmcmVzaChX\nSVRIX0RBVEFDQUNIRSwgTG9ja01vZGVUeXBlLldSSVRFLCBESVJUWSwgIVJF\nRlJFU0hfRlJPTV9EQVRBQ0FDSEUsIE1BUktFUl9EQVRBQkFTRSk7Cgl9CgkK\nCXB1YmxpYyB2b2lkIHRlc3RDbGVhblJlZnJlc2hXaXRoV3JpdGVMb2NrRG9l\nc05vdEhpdERhdGFiYXNlKCkgewoJCXZlcmlmeVJlZnJlc2goV0lUSF9EQVRB\nQ0FDSEUsIExvY2tNb2RlVHlwZS5XUklURSwgIURJUlRZLCBSRUZSRVNIX0ZS\nT01fREFUQUNBQ0hFLCBNQVJLRVJfREFUQUNBQ0hFKTsKCQl2ZXJpZnlSZWZy\nZXNoKFdJVEhfREFUQUNBQ0hFLCBMb2NrTW9kZVR5cGUuV1JJVEUsICFESVJU\nWSwgIVJFRlJFU0hfRlJPTV9EQVRBQ0FDSEUsIE1BUktFUl9EQVRBQ0FDSEUp\nOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0RGlydHlSZWZyZXNoV2l0aG91dERh\ndGFDYWNoZUFsd2F5c0hpdHNEYXRhYmFzZSgpIHsKCQl2ZXJpZnlSZWZyZXNo\nKCFXSVRIX0RBVEFDQUNIRSwgTk9MT0NLLCBESVJUWSwgUkVGUkVTSF9GUk9N\nX0RBVEFDQUNIRSwgTUFSS0VSX0RBVEFCQVNFKTsKCQl2ZXJpZnlSZWZyZXNo\nKCFXSVRIX0RBVEFDQUNIRSwgTG9ja01vZGVUeXBlLlJFQUQsIERJUlRZLCBS\nRUZSRVNIX0ZST01fREFUQUNBQ0hFLCBNQVJLRVJfREFUQUJBU0UpOwoJCXZl\ncmlmeVJlZnJlc2goIVdJVEhfREFUQUNBQ0hFLCBMb2NrTW9kZVR5cGUuV1JJ\nVEUsIERJUlRZLCBSRUZSRVNIX0ZST01fREFUQUNBQ0hFLCBNQVJLRVJfREFU\nQUJBU0UpOwoJCQoJCXZlcmlmeVJlZnJlc2goIVdJVEhfREFUQUNBQ0hFLCBO\nT0xPQ0ssIERJUlRZLCAhUkVGUkVTSF9GUk9NX0RBVEFDQUNIRSwgTUFSS0VS\nX0RBVEFCQVNFKTsKCQl2ZXJpZnlSZWZyZXNoKCFXSVRIX0RBVEFDQUNIRSwg\nTG9ja01vZGVUeXBlLlJFQUQsIERJUlRZLCAhUkVGUkVTSF9GUk9NX0RBVEFD\nQUNIRSwgTUFSS0VSX0RBVEFCQVNFKTsKCQl2ZXJpZnlSZWZyZXNoKCFXSVRI\nX0RBVEFDQUNIRSwgTG9ja01vZGVUeXBlLldSSVRFLCBESVJUWSwgIVJFRlJF\nU0hfRlJPTV9EQVRBQ0FDSEUsIE1BUktFUl9EQVRBQkFTRSk7Cgl9CgkKCXB1\nYmxpYyB2b2lkIHRlc3RDbGVhblJlZnJlc2hXaXRob3V0RGF0YUNhY2hlRG9l\nc05vdEhpdERhdGFiYXNlKCkgewoJCXZlcmlmeVJlZnJlc2goIVdJVEhfREFU\nQUNBQ0hFLCBOT0xPQ0ssICFESVJUWSwgUkVGUkVTSF9GUk9NX0RBVEFDQUNI\nRSwgTUFSS0VSX0NBQ0hFKTsKCQl2ZXJpZnlSZWZyZXNoKCFXSVRIX0RBVEFD\nQUNIRSwgTG9ja01vZGVUeXBlLlJFQUQsICFESVJUWSwgUkVGUkVTSF9GUk9N\nX0RBVEFDQUNIRSwgIE1BUktFUl9DQUNIRSk7CgkJdmVyaWZ5UmVmcmVzaCgh\nV0lUSF9EQVRBQ0FDSEUsIExvY2tNb2RlVHlwZS5XUklURSwgIURJUlRZLCBS\nRUZSRVNIX0ZST01fREFUQUNBQ0hFLCAgTUFSS0VSX0NBQ0hFKTsKCQkKCQl2\nZXJpZnlSZWZyZXNoKCFXSVRIX0RBVEFDQUNIRSwgTk9MT0NLLCAhRElSVFks\nICFSRUZSRVNIX0ZST01fREFUQUNBQ0hFLCBNQVJLRVJfQ0FDSEUpOwoJCXZl\ncmlmeVJlZnJlc2goIVdJVEhfREFUQUNBQ0hFLCBMb2NrTW9kZVR5cGUuUkVB\nRCwgIURJUlRZLCAhUkVGUkVTSF9GUk9NX0RBVEFDQUNIRSwgTUFSS0VSX0NB\nQ0hFKTsKCQl2ZXJpZnlSZWZyZXNoKCFXSVRIX0RBVEFDQUNIRSwgTG9ja01v\nZGVUeXBlLldSSVRFLCAhRElSVFksICFSRUZSRVNIX0ZST01fREFUQUNBQ0hF\nLCBNQVJLRVJfQ0FDSEUpOwoJfQoJCgkvKioKCSAqIFZlcmlmeSBiZWhhdmlv\nciBvZiByZWZyZXNoaW5nIGFuIGluc3RhbmNlIHdoaWNoIGhhcyBiZWVuIGRl\nbGV0ZWQgYnkKCSAqIG91dC1vZi1iYW5kIHByb2Nlc3MgKGUuZy4gYSBuYXRp\ndmUgU1FMIGluIGEgc2VwYXJhdGUgdHJhbnNhY3Rpb24pLgoJICogVGhlIGJl\naGF2aW9yIGRpZmZlcnMgd2hlbiByZWZyZXNoKCkgd2l0aG91dCBhIGxvY2sg\nZmV0Y2hlcyB0aGUgZGF0YSBmcm9tCgkgKiBEYXRhQ2FjaGUgZXZlbiB3aGVu\nIHRoZSBvcmlnaW5hbCBkYXRhYmFzZSByZWNvcmQgaXMgZGVsZXRlZC4KCSAq\nIAoJICogQHBhcmFtIHVzZURhdGFDYWNoZQoJICogQHBhcmFtIGxvY2sKCSAq\nLwoJcHVibGljIHZvaWQgdmVyaWZ5RGVsZXRlRGV0ZWN0aW9uT25SZWZyZXNo\nKGJvb2xlYW4gdXNlRGF0YUNhY2hlLCAKCQkJYm9vbGVhbiBkaXJ0eSwgTG9j\na01vZGVUeXBlIGxvY2ssIENsYXNzIGV4cGVjdGVkRXhjZXB0aW9uVHlwZSkg\newoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSBlbWYgPSAodXNl\nRGF0YUNhY2hlKQoJCQk/IGVtZldpdGhEYXRhQ2FjaGUgOiBlbWZXaXRob3V0\nRGF0YUNhY2hlOwoJCQkKCQlPcGVuSlBBRW50aXR5TWFuYWdlclNQSSBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgCgkJZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwoJCVBPYmplY3QgcGMgPSBuZXcgUE9i\namVjdCgpOwoJCXBjLnNldE5hbWUodXNlRGF0YUNhY2hlID8gTUFSS0VSX0RB\nVEFDQUNIRSA6IE1BUktFUl9DQUNIRSk7CgkJZW0ucGVyc2lzdChwYyk7CgkJ\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCQkKCQlPYmplY3Qgb2lk\nID0gcGMuZ2V0SWQoKTsKCQlTdG9yZUNhY2hlIGRhdGFDYWNoZSA9IGVtZi5n\nZXRTdG9yZUNhY2hlKCk7CgkJYXNzZXJ0RXF1YWxzKHVzZURhdGFDYWNoZSwg\nZGF0YUNhY2hlLmNvbnRhaW5zKFBPYmplY3QuY2xhc3MsIG9pZCkpOwoJCQoJ\nCS8vIGRlbGV0ZSB0aGUgcmVjb3JkIGluIHRoZSBkYXRhYmFzZSBpbiBhIHNl\ncGFyYXRlIHRyYW5zYWN0aW9uIHVzaW5nCgkJLy8gbmF0aXZlIFNRTCBzbyB0\naGF0IHRoZSBpbi1tZW1vcnkgaW5zdGFuY2UgaXMgbm90IGFsdGVyZWQgCgkJ\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoJCVN0cmluZyBzcWwgPSAi\nREVMRVRFIEZST00gUE9CSkVDVCBXSEVSRSBpZD0iK29pZDsKCQllbS5jcmVh\ndGVOYXRpdmVRdWVyeShzcWwpLmV4ZWN1dGVVcGRhdGUoKTsKCQllbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwoJCQoJCS8vIHRoZSBvYmplY3QgY2Fj\naGUgZG9lcyBub3Qga25vdyB0aGF0IHRoZSByZWNvcmQgd2FzIGRlbGV0ZWQK\nCQlhc3NlcnRUcnVlKGVtLmNvbnRhaW5zKHBjKSk7CgkJLy8gbm9yIGRvZXMg\ndGhlIGRhdGEgY2FjaGUKCQlhc3NlcnRFcXVhbHModXNlRGF0YUNhY2hlLCBk\nYXRhQ2FjaGUuY29udGFpbnMoUE9iamVjdC5jbGFzcywgb2lkKSk7CgkJCgkJ\nLyoqCgkJICogcmVmcmVzaCBiZWhhdmlvciBubyBtb3JlIGRlcGVuZHMgb24g\nY3VycmVudCBsb2NrLiBSZWZyZXNoCgkJICogd2lsbCBhbHdheXMgYXR0ZW1w\ndCB0byBmZXRjaCB0aGUgaW5zdGFuY2UgZnJvbSBkYXRhYmFzZSAKCQkgKiBy\nYWlzaW5nIEVudGl0eU5vdEZvdW5kRXhjZXB0aW9uLgoJCSAqICAgCgkJICov\nCgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoJCWVtLmdldEZldGNo\nUGxhbigpLnNldFJlYWRMb2NrTW9kZShsb2NrKTsKCQlpZiAoZGlydHkpIAoJ\nCQlwYy5zZXROYW1lKCJEaXJ0eSBOYW1lIik7CgkJdHJ5IHsKCQkJZW0ucmVm\ncmVzaChwYyk7CgkJCWlmIChleHBlY3RlZEV4Y2VwdGlvblR5cGUgIT0gbnVs\nbCkgewoJCQkJZmFpbCgiZXhwZWN0ZWQgIiArIGV4cGVjdGVkRXhjZXB0aW9u\nVHlwZS5nZXRTaW1wbGVOYW1lKCkgKyAKCQkJCQkJIiBmb3IgUE9iamVjdDoi\nICsgb2lkKTsKCQkJfQoJCX0gY2F0Y2ggKEV4Y2VwdGlvbiBleCkgewoJCQli\nb29sZWFuIGV4cGVjdGVkRXhjZXB0aW9uID0gZXhwZWN0ZWRFeGNlcHRpb25U\neXBlICE9IG51bGwgJiYKCQkJICAgIGV4cGVjdGVkRXhjZXB0aW9uVHlwZS5p\nc0Fzc2lnbmFibGVGcm9tKGV4LmdldENsYXNzKCkpOwoJCQlpZiAoIWV4cGVj\ndGVkRXhjZXB0aW9uKSB7CgkJCQlleC5wcmludFN0YWNrVHJhY2UoKTsKCQkJ\nCVN0cmluZyBlcnJvciA9IChleHBlY3RlZEV4Y2VwdGlvblR5cGUgPT0gbnVs\nbCkgCgkJCQkJPyAibm8gZXhjZXB0aW9uIiA6IGV4cGVjdGVkRXhjZXB0aW9u\nVHlwZS5nZXROYW1lKCk7CgkJCQlmYWlsKCJleHBlY3RlZCAiICsgZXJyb3Ig\nKyAiIGZvciBQT2JqZWN0OiIgKyBvaWQpOwoJCQl9CgkJfSBmaW5hbGx5IHsK\nCQkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwoJCX0KCX0KCglw\ndWJsaWMgdm9pZCB0ZXN0RGVsZXRlSXNOb3REZXRlY3RlZE9uQ2xlYW5SZWZy\nZXNoV2l0aG91dExvY2tXaXRoRGF0YUNhY2hlKCkgewoJCXZlcmlmeURlbGV0\nZURldGVjdGlvbk9uUmVmcmVzaChXSVRIX0RBVEFDQUNIRSwgIURJUlRZLCBO\nT0xPQ0ssIE5PX0VSUk9SKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdERlbGV0\nZUlzRGV0ZWN0ZWRPbkNsZWFuUmVmcmVzaFdpdGhMb2NrV2l0aERhdGFDYWNo\nZSgpIHsKCQl2ZXJpZnlEZWxldGVEZXRlY3Rpb25PblJlZnJlc2goV0lUSF9E\nQVRBQ0FDSEUsICFESVJUWSwgTG9ja01vZGVUeXBlLlJFQUQsIEVOVElUWV9O\nT1RfRk9VTkRfRVJST1IpOwoJCXZlcmlmeURlbGV0ZURldGVjdGlvbk9uUmVm\ncmVzaChXSVRIX0RBVEFDQUNIRSwgIURJUlRZLCBMb2NrTW9kZVR5cGUuV1JJ\nVEUsIEVOVElUWV9OT1RfRk9VTkRfRVJST1IpOwoJfQoKCXB1YmxpYyB2b2lk\nIHRlc3REZWxldGVJc05vdERldGVjdGVkT25EaXJ0eVJlZnJlc2hXaXRob3V0\nTG9ja1dpdGhEYXRhQ2FjaGUoKSB7CgkJdmVyaWZ5RGVsZXRlRGV0ZWN0aW9u\nT25SZWZyZXNoKFdJVEhfREFUQUNBQ0hFLCBESVJUWSwgTk9MT0NLLCBOT19F\nUlJPUik7CQoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlSXNEZXRlY3Rl\nZE9uRGlydHlSZWZyZXNoV2l0aExvY2tXaXRoRGF0YUNhY2hlKCkgewoJCXZl\ncmlmeURlbGV0ZURldGVjdGlvbk9uUmVmcmVzaChXSVRIX0RBVEFDQUNIRSwg\nRElSVFksIExvY2tNb2RlVHlwZS5SRUFELCBFTlRJVFlfTk9UX0ZPVU5EX0VS\nUk9SKTsKCQl2ZXJpZnlEZWxldGVEZXRlY3Rpb25PblJlZnJlc2goV0lUSF9E\nQVRBQ0FDSEUsIERJUlRZLCBMb2NrTW9kZVR5cGUuV1JJVEUsIEVOVElUWV9O\nT1RfRk9VTkRfRVJST1IpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0RGVsZXRl\nSXNEZXRlY3RlZE9uRGlydHlSZWZyZXNoV2l0RGF0YUNhY2hlKCkgewoJCXZl\ncmlmeURlbGV0ZURldGVjdGlvbk9uUmVmcmVzaChXSVRIX0RBVEFDQUNIRSwg\nRElSVFksIExvY2tNb2RlVHlwZS5SRUFELCBFTlRJVFlfTk9UX0ZPVU5EX0VS\nUk9SKTsKCQl2ZXJpZnlEZWxldGVEZXRlY3Rpb25PblJlZnJlc2goV0lUSF9E\nQVRBQ0FDSEUsIERJUlRZLCBMb2NrTW9kZVR5cGUuV1JJVEUsIEVOVElUWV9O\nT1RfRk9VTkRfRVJST1IpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0RGVsZXRl\nSXNEZXRlY3RlZE9uQ2xlYW5SZWZyZXNoV2l0aG91dExvY2tXaXRob3V0RGF0\nYUNhY2hlKCkgewoJCXZlcmlmeURlbGV0ZURldGVjdGlvbk9uUmVmcmVzaCgh\nV0lUSF9EQVRBQ0FDSEUsICFESVJUWSwgTk9MT0NLLCBFTlRJVFlfTk9UX0ZP\nVU5EX0VSUk9SKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdERlbGV0ZUlzRGV0\nZWN0ZWRPbkNsZWFuUmVmcmVzaFdpdGhMb2NrV2l0aG91dERhdGFDYWNoZSgp\nIHsKCQl2ZXJpZnlEZWxldGVEZXRlY3Rpb25PblJlZnJlc2goIVdJVEhfREFU\nQUNBQ0hFLCAhRElSVFksIExvY2tNb2RlVHlwZS5SRUFELCBFTlRJVFlfTk9U\nX0ZPVU5EX0VSUk9SKTsKCQl2ZXJpZnlEZWxldGVEZXRlY3Rpb25PblJlZnJl\nc2goIVdJVEhfREFUQUNBQ0hFLCAhRElSVFksIExvY2tNb2RlVHlwZS5XUklU\nRSwgRU5USVRZX05PVF9GT1VORF9FUlJPUik7Cgl9Cgp9Cg==\n","encoding":"base64"}

