{"sha":"ae80be19ca2ab5c28141c59083d86491295b7fe6","node_id":"MDQ6QmxvYjIwNjM2NDphZTgwYmUxOWNhMmFiNWMyODE0MWM1OTA4M2Q4NjQ5MTI5NWI3ZmU2","size":3813,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ae80be19ca2ab5c28141c59083d86491295b7fe6","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNh\nY2hlOwoKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2\nYS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwoKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNhY2hlLmNvbW1v\nbi5hcHBzLkZsdXNoRGF0YUNhY2hlT2JqZWN0OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0cmFjdFRl\nc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3RGbHVzaERhdGFDYWNoZQogICAg\nZXh0ZW5kcyBBYnN0cmFjdFRlc3RDYXNlIHsKCiAgICBwdWJsaWMgVGVzdEZs\ndXNoRGF0YUNhY2hlKFN0cmluZyBzdHIpIHsKICAgICAgICBzdXBlcihzdHIs\nICJkYXRhY2FjaGVjYWN0dXNhcHAiKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRVcCgpIHsKICAgICAgICBkZWxldGVBbGwoRmx1c2hEYXRhQ2FjaGVP\nYmplY3QuY2xhc3MpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVy\neUZsdXNoUGx1c0RhdGFDYWNoZSgpIHsKICAgICAgICBNYXAgcHJvcHNNYXAg\nPSBuZXcgSGFzaE1hcCgpOwogICAgICAgIHByb3BzTWFwLnB1dCgib3Blbmpw\nYS5EYXRhQ2FjaGUiLCAidHJ1ZSIpOwogICAgICAgIHByb3BzTWFwLnB1dCgi\nb3BlbmpwYS5SZW1vdGVDb21taXRQcm92aWRlciIsICJzanZtIik7CiAgICAg\nICAgcHJvcHNNYXAucHV0KCJvcGVuanBhLkZsdXNoQmVmb3JlUXVlcmllcyIs\nICJ0cnVlIik7CiAgICAgICAgLy9wcm9wc01hcC5wdXQoImphdmF4Lmpkby5v\ncHRpb24uSWdub3JlQ2FjaGUiLCAiZmFsc2UiKTsKICAgICAgICAvL3Byb3Bz\nTWFwLnB1dCgib3BlbmpwYS5Ccm9rZXJJbXBsIiwgImtvZG8uZGF0YWNhY2hl\nLkNhY2hlVGVzdEJyb2tlciIpOy8vQ2FjaGVUZXN0QnJva2VyLmNsYXNzLmdl\ndE5hbWUgKCkpOwogICAgICAgIEVudGl0eU1hbmFnZXJGYWN0b3J5IGVtZiA9\nIGdldEVtZihwcm9wc01hcCk7CgogICAgICAgIHRyeSB7CgogICAgICAgICAg\nICAvL2Fzc2VydEVxdWFscyhDbGFzcy5mb3JOYW1lKCJvcGVuanBhLmRhdGFj\nYWNoZS5DYWNoZVRlc3RCcm9rZXIiLHRydWUsZW1mLmdldENsYXNzKCkuZ2V0\nQ2xhc3NMb2FkZXIoKSkuZ2V0Q2xhc3NMb2FkZXIoKSxlbWYuZ2V0Q2xhc3Mo\nKS5nZXRDbGFzc0xvYWRlcigpKTsKICAgICAgICAgICAgLy9UaHJlYWQuY3Vy\ncmVudFRocmVhZCgpLnNldENvbnRleHRDbGFzc0xvYWRlcihlbWYuZ2V0Q2xh\nc3MoKS5nZXRDbGFzc0xvYWRlcigpKTsKICAgICAgICAgICAgQ2xhc3MuZm9y\nTmFtZSgib3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRhdGFjYWNo\nZS5DYWNoZVRlc3RCcm9rZXIiLCB0cnVlLAogICAgICAgICAgICAgICAgVGhy\nZWFkLmN1cnJlbnRUaHJlYWQoKS5nZXRDb250ZXh0Q2xhc3NMb2FkZXIoKSk7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKCiAgICAgICAgfQoK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGVtKTsKICAgICAgICBGbHVzaERh\ndGFDYWNoZU9iamVjdCBvID0gbmV3IEZsdXNoRGF0YUNhY2hlT2JqZWN0KCk7\nCiAgICAgICAgby5zZXRTdHJpbmcoImZvbyIpOwogICAgICAgIGVtLnBlcnNp\nc3Qobyk7CiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIC8vT2JqZWN0IG9p\nZCA9IEpET0hlbHBlci5nZXRPYmplY3RJZCAobyk7CiAgICAgICAgZW5kRW0o\nZW0pOwoKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgc3RhcnRUeChlbSk7CgogICAgICAgIENvbGxlY3Rpb24gYyA9\nIChDb2xsZWN0aW9uKSBlbS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAgInNl\nbGVjdCBhIEZST00gIiArIEZsdXNoRGF0YUNhY2hlT2JqZWN0LmNsYXNzLmdl\ndFNpbXBsZU5hbWUoKSArCiAgICAgICAgICAgICAgICAiIGEgd2hlcmUgYS5z\ndHJpbmcgPSAnZm9vJyIpLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIGMuc2l6ZSgpKTsKICAgICAgICBlbS5yZW1vdmUoYy5p\ndGVyYXRvcigpLm5leHQoKSk7CgogICAgICAgIGMgPSAoQ29sbGVjdGlvbikg\nZW0uY3JlYXRlUXVlcnkoCiAgICAgICAgICAgICJzZWxlY3QgYSBGUk9NICIg\nKyBGbHVzaERhdGFDYWNoZU9iamVjdC5jbGFzcy5nZXRTaW1wbGVOYW1lKCkg\nKwogICAgICAgICAgICAgICAgIiBhIHdoZXJlIGEuc3RyaW5nID0gJ2Zvbyci\nKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGMu\nc2l6ZSgpKTsKCiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVt\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlDb21taXQoKSB7\nCiAgICAgICAgTWFwIHByb3BzTWFwID0gbmV3IEhhc2hNYXAoKTsKICAgICAg\nICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuRGF0YUNhY2hlIiwgInRydWUiKTsK\nICAgICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJv\ndmlkZXIiLCAic2p2bSIpOwogICAgICAgIHByb3BzTWFwLnB1dCgib3Blbmpw\nYS5GbHVzaEJlZm9yZVF1ZXJpZXMiLCAidHJ1ZSIpOwogICAgICAgIC8vcHJv\ncHNNYXAucHV0KCJqYXZheC5qZG8ub3B0aW9uLklnbm9yZUNhY2hlIiwgImZh\nbHNlIik7CiAgICAgICAgcHJvcHNNYXAucHV0KCJvcGVuanBhLkJyb2tlcklt\ncGwiLCBDYWNoZVRlc3RCcm9rZXIuY2xhc3MuZ2V0TmFtZSgpKTsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYgPSBnZXRFbWYocHJvcHNNYXAp\nOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgIGVuZFR4\nKGVtKTsKICAgICAgICBlbmRFbShlbSk7CiAgICB9Cn0K\n","encoding":"base64"}

