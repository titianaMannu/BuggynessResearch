{"sha":"59735eb4e768df98ee960d5efae342de8057655d","node_id":"MDQ6QmxvYjIwNjM2NDo1OTczNWViNGU3NjhkZjk4ZWU5NjBkNWVmYWUzNDJkZTgwNTc2NTVk","size":4719,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/59735eb4e768df98ee960d5efae342de8057655d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNh\nY2hlOwoKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2\nYS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlckZhY3Rvcnk7CgoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kYXRhY2FjaGUu\nY29tbW9uLmFwcHMuQ2FjaGVPYmplY3RBOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmRhdGFjYWNoZS5jb21tb24uYXBwcy5DYWNo\nZU9iamVjdEFDaGlsZDE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlckZhY3Rvcnk7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5qcHFsLkpQUUxQYXJzZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuSlBBRmFjYWRlSGVs\ncGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeTsKCnB1YmxpYyBjbGFzcyBUZXN0\nSlBRTDJRdWVyaWVzCiAgICBleHRlbmRzIEFic3RyYWN0VGVzdENhc2UgewoK\nICAgIHB1YmxpYyBUZXN0SlBRTDJRdWVyaWVzKFN0cmluZyB0ZXN0KSB7CiAg\nICAgICAgc3VwZXIodGVzdCwgImRhdGFjYWNoZWNhY3R1c2FwcCIpOwogICAg\nfQoKICAgIHByaXZhdGUgQnJva2VyRmFjdG9yeSBfZmFjdG9yeTsKCiAgICBw\ndWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBkZWxldGVBbGwoQ2FjaGVP\nYmplY3RBLmNsYXNzKTsKCiAgICAgICAgTWFwIHByb3BzTWFwID0gbmV3IEhh\nc2hNYXAoKTsKICAgICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuRGF0YUNh\nY2hlIiwgInRydWUiKTsKICAgICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEu\nUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2bSIpOwogICAgICAgIHByb3Bz\nTWFwLnB1dCgib3BlbmpwYS5Ccm9rZXJJbXBsIiwgQ2FjaGVUZXN0QnJva2Vy\nLmNsYXNzLmdldE5hbWUoKSk7CiAgICAgICAgRW50aXR5TWFuYWdlckZhY3Rv\ncnkgZW1mID0gZ2V0RW1mKHByb3BzTWFwKTsKICAgICAgICBfZmFjdG9yeSA9\nIEpQQUZhY2FkZUhlbHBlci50b0Jyb2tlckZhY3RvcnkoZW1mKTsKICAgICAg\nICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7CiAgICAg\nICAgYnJva2VyLmJlZ2luKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCA1MDsgaSsrKQogICAgICAgICAgICBicm9rZXIucGVyc2lzdChuZXcgQ2Fj\naGVPYmplY3RBQ2hpbGQxKCIiLCAiSlBRTDJRdWVyaWVzIiwgaSksCiAgICAg\nICAgICAgICAgICBudWxsKTsKICAgICAgICBicm9rZXIuY29tbWl0KCk7CiAg\nICAgICAgYnJva2VyLmNsb3NlKCk7CgogICAgICAgIENhY2hlVGVzdEhlbHBl\nci5jYWNoZU1hbmFnZXIoX2ZhY3RvcnkpLmdldFN5c3RlbVF1ZXJ5Q2FjaGUo\nKS5jbGVhcigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkK\nICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICB0cnkgewogICAg\nICAgICAgICBfZmFjdG9yeS5jbG9zZSgpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgfQoKICAgICAgICBzdXBlci50ZWFyRG93\nbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RVcHBlclJhbmdlKCkg\newogICAgICAgIHJhbmdlVGVzdEhlbHBlcigwLCAxMCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdExvd2VyUmFuZ2UoKSB7CiAgICAgICAgcmFuZ2VU\nZXN0SGVscGVyKDUsIDUwKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nQm90aFJhbmdlcygpIHsKICAgICAgICByYW5nZVRlc3RIZWxwZXIoMjAsIDI4\nKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcmFuZ2VUZXN0SGVscGVyKGZp\nbmFsIGludCBzdGFydCwgZmluYWwgaW50IGVuZCkgewogICAgICAgIEJyb2tl\nciBicm9rZXIgPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVy\neSBxID0gYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAi\nU2VsZWN0IGEgRlJPTSAiICsKICAgICAgICAgICAgQ2FjaGVPYmplY3RBQ2hp\nbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArICIgYSIpOwogICAgICAgIHEu\nc2V0UmFuZ2Uoc3RhcnQsIGVuZCk7CgogICAgICAgIC8vIHNob3VsZCBub3Qg\neWV0IGJlIGluIHRoZSBjYWNoZQogICAgICAgIENhY2hlVGVzdEhlbHBlci5h\nc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uRkFMU0UpOwogICAgICAg\nIENvbGxlY3Rpb24gYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsKCiAg\nICAgICAgLy8gaXRlcmF0ZSB0aGUgcmVzdWx0cy4gVGhpcyB3aWxsIGNhdXNl\nIHRoZSBxdWVyeSB0byBiZQogICAgICAgIC8vIGVubGlzdGVkIGluIHRoZSBj\nYWNoZS4KICAgICAgICBDYWNoZVRlc3RIZWxwZXIuaXRlcmF0ZShjKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoZW5kIC0gc3RhcnQsIGMuc2l6ZSgpKTsKICAg\nICAgICBDYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBC\nb29sZWFuLlRSVUUpOwoKICAgICAgICBicm9rZXIuY2xvc2UoKTsKCiAgICAg\nICAgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7CiAgICAgICAgcSA9\nIGJyb2tlci5uZXdRdWVyeShKUFFMUGFyc2VyLkxBTkdfSlBRTCwgIlNlbGVj\ndCBhIEZST00gIiArCiAgICAgICAgICAgIENhY2hlT2JqZWN0QUNoaWxkMS5j\nbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiIGEiKTsKICAgICAgICBxLnNldFJh\nbmdlKHN0YXJ0LCBlbmQpOwogICAgICAgIENhY2hlVGVzdEhlbHBlci5hc3Nl\ncnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJVRSk7CiAgICAgICAgYyA9\nIChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoZW5kIC0gc3RhcnQsIGMuc2l6ZSgpKTsKCiAgICAgICAgLy8gbm93IGNo\nZWNrIGlmIGEgc21hbGxlciByYW5nZSBpcyBpbiBjYWNoZQogICAgICAgIHEg\nPSBicm9rZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUwsICJTZWxl\nY3QgYSBGUk9NICIgKwogICAgICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEu\nY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsgIiBhIik7CiAgICAgICAgcS5zZXRS\nYW5nZShzdGFydCwgZW5kIC0gMSk7CiAgICAgICAgQ2FjaGVUZXN0SGVscGVy\nLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5GQUxTRSk7CiAgICAg\nICAgYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoZW5kIC0gc3RhcnQgLSAxLCBjLnNpemUoKSk7CiAgICAgICAg\nYnJva2VyLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFJl\nc3VsdENsYXNzSXNDYWNoZWQoKSB7CiAgICAgICAgQnJva2VyIGJyb2tlciA9\nIF9mYWN0b3J5Lm5ld0Jyb2tlcigpOwogICAgICAgIFF1ZXJ5IHEgPSBicm9r\nZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUwsICJTZWxlY3QgYSBG\nUk9NICIgKwogICAgICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEuY2xhc3Mu\nZ2V0U2ltcGxlTmFtZSgpICsgIiBhIik7CiAgICAgICAgcS5zZXRSZXN1bHRU\neXBlKE9iamVjdC5jbGFzcyk7CiAgICAgICAgQ29sbGVjdGlvbiBjID0gKENv\nbGxlY3Rpb24pIHEuZXhlY3V0ZSgpOwogICAgICAgIENhY2hlVGVzdEhlbHBl\nci5pdGVyYXRlKGMpOwogICAgICAgIENhY2hlVGVzdEhlbHBlci5hc3NlcnRJ\nbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJVRSk7CiAgICB9Cn0K\n","encoding":"base64"}

