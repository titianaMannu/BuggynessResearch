{"sha":"d5e254a022018c3755db69defc6b323175830122","node_id":"MDQ6QmxvYjIwNjM2NDpkNWUyNTRhMDIyMDE4YzM3NTVkYjY5ZGVmYzZiMzIzMTc1ODMwMTIy","size":17321,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d5e254a022018c3755db69defc6b323175830122","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNh\nY2hlOwoKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2\nYS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0\nIGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwoKCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNhY2hl\nLmNvbW1vbi5hcHBzLkNhY2hlT2JqZWN0QTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5kYXRhY2FjaGUuY29tbW9uLmFwcHMuQ2Fj\naGVPYmplY3RBQ2hpbGQxOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmRhdGFjYWNoZS5jb21tb24uYXBwcy5DYWNoZU9iamVjdEI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNh\nY2hlLmNvbW1vbi5hcHBzLkNhY2hlT2JqZWN0V2l0aEV4dGVybmFsaXplZEZp\nZWxkczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5j\nb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuQnJva2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuUXVlcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLmpwcWwuSlBRTFBhcnNlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5KUEFGYWNhZGVIZWxwZXI7CgpwdWJs\naWMgY2xhc3MgVGVzdEpQUUwyUmVzdWx0c0FuZFJlc3VsdENsYXNzZXMKICAg\nIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2FzZSB7CgogICAgcHVibGljIFRlc3RK\nUFFMMlJlc3VsdHNBbmRSZXN1bHRDbGFzc2VzKFN0cmluZyB0ZXN0KSB7CiAg\nICAgICAgc3VwZXIodGVzdCwgImRhdGFjYWNoZWNhY3R1c2FwcCIpOwogICAg\nfQoKICAgIHByaXZhdGUgQnJva2VyRmFjdG9yeSBfZmFjdG9yeTsKCiAgICBw\ndWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBkZWxldGVBbGwoQ2FjaGVP\nYmplY3RBLmNsYXNzKTsKICAgICAgICBkZWxldGVBbGwoQ2FjaGVPYmplY3RX\naXRoRXh0ZXJuYWxpemVkRmllbGRzLmNsYXNzKTsKCiAgICAgICAgTWFwIHBy\nb3BzTWFwID0gbmV3IEhhc2hNYXAoKTsKICAgICAgICBwcm9wc01hcC5wdXQo\nIm9wZW5qcGEuRGF0YUNhY2hlIiwgInRydWUiKTsKICAgICAgICBwcm9wc01h\ncC5wdXQoIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2bSIp\nOwogICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5Ccm9rZXJJbXBsIiwg\nQ2FjaGVUZXN0QnJva2VyLmNsYXNzLmdldE5hbWUoKSk7CiAgICAgICAgRW50\naXR5TWFuYWdlckZhY3RvcnkgZW1mID0KICAgICAgICAgICAgZ2V0RW1mKHBy\nb3BzTWFwKTsKICAgICAgICBfZmFjdG9yeSA9IEpQQUZhY2FkZUhlbHBlci50\nb0Jyb2tlckZhY3RvcnkoZW1mKTsKICAgICAgICBCcm9rZXIgYnJva2VyID0g\nX2ZhY3RvcnkubmV3QnJva2VyKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgYnJva2VyLmJlZ2luKCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKAogICAgICAg\nICAgICAgICAgIkV4Y2VwdGlvbiBpbiBUZXN0SlBRTDJSZXN1bHRzQW5kUmVz\ndWx0Q2xhc3NlcyBzZXR1cCA6IFxuIiArCiAgICAgICAgICAgICAgICAgICAg\nZ2V0U3RhY2tUcmFjZShlKSk7CiAgICAgICAgfQoKICAgICAgICBpbnQgaiA9\nIDA7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7CiAg\nICAgICAgICAgIC8vIG1ha2Ugc29tZSBjb21tb24gbmFtZXMgc28gdGhhdCBH\nUk9VUCBCWSBpcyB1c2VmdWwuCiAgICAgICAgICAgIGlmIChpICUgMiA9PSAw\nKQogICAgICAgICAgICAgICAgaisrOwogICAgICAgICAgICBDYWNoZU9iamVj\ndEEgbzsKICAgICAgICAgICAgYnJva2VyLnBlcnNpc3QobyA9IG5ldyBDYWNo\nZU9iamVjdEFDaGlsZDEoIiIsICJyZXN1bHRzLSIgKyBqLCBpKSwKICAgICAg\nICAgICAgICAgIG51bGwpOwoKICAgICAgICAgICAgby5zZXREYXRlKG5ldyBE\nYXRlKCkpOwogICAgICAgICAgICBvLnNldERhdGVBcnJheShuZXcgRGF0ZVtd\neyBuZXcgRGF0ZSgxMCksIG5ldyBEYXRlKDIwKSB9KTsKCiAgICAgICAgICAg\nIGlmIChpIDwgNSkKICAgICAgICAgICAgICAgIG8uc2V0UmVsYXRlZEIobmV3\nIENhY2hlT2JqZWN0QigpKTsKICAgICAgICB9CgogICAgICAgIC8vU2VldGhh\nIE9jdCAzMCwyMDA2CiAgICAgICAgLy9kZWxldGVBbGwgY2xvc2VzIHRoZSBU\nWC4gIFNvIHVzZSB0aGUgbG9jYWwKICAgICAgICAvL2RlbGV0ZUFsbCBmbi4K\nICAgICAgICAvL2RlbGV0ZUFsbChDYWNoZU9iamVjdFdpdGhFeHRlcm5hbGl6\nZWRGaWVsZHMuY2xhc3MsKCkpOwogICAgICAgIC8vZGVsZXRlQWxsKGJyb2tl\ncixDYWNoZU9iamVjdFdpdGhFeHRlcm5hbGl6ZWRGaWVsZHMuY2xhc3MsdHJ1\nZSk7CgogICAgICAgIENhY2hlT2JqZWN0V2l0aEV4dGVybmFsaXplZEZpZWxk\ncyBvID0KICAgICAgICAgICAgbmV3IENhY2hlT2JqZWN0V2l0aEV4dGVybmFs\naXplZEZpZWxkcygpOwogICAgICAgIGJyb2tlci5wZXJzaXN0KG8sIG51bGwp\nOwogICAgICAgIG8uc2V0Q2xzKEJyb2tlci5jbGFzcyk7CgogICAgICAgIGJy\nb2tlci5jb21taXQoKTsKICAgICAgICBicm9rZXIuY2xvc2UoKTsKCiAgICAg\nICAgQ2FjaGVUZXN0SGVscGVyLmNhY2hlTWFuYWdlcihfZmFjdG9yeSkuZ2V0\nU3lzdGVtUXVlcnlDYWNoZSgpLmNsZWFyKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVhckRvd24oKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIF9mYWN0b3J5LmNsb3NlKCk7CgogICAgICAgIHN1cGVyLnRlYXJE\nb3duKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEFnZ3JlZ2F0ZVJl\nc3VsdElzQ2FjaGVkKCkgewogICAgICAgIEJyb2tlciBicm9rZXIgPSBfZmFj\ndG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBxID0KICAgICAgICAg\nICAgYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAic2Vs\nZWN0IG1heChhLmFnZSkgRlJPTSAiICsKICAgICAgICAgICAgICAgIENhY2hl\nT2JqZWN0QUNoaWxkMS5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiIGEiKTsK\nCiAgICAgICAgT2JqZWN0IG8gPSBxLmV4ZWN1dGUoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoTG9uZy5jbGFzcywgby5nZXRDbGFzcygpKTsKICAgICAgICBD\nYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBCb29sZWFu\nLlRSVUUpOwoKICAgICAgICBvID0gcS5leGVjdXRlKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKExvbmcuY2xhc3MsIG8uZ2V0Q2xhc3MoKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdEFnZ3JlZ2F0ZU5vblVuaXF1ZVJlc3VsdElz\nQ2FjaGVkKCkgewogICAgICAgIEJyb2tlciBicm9rZXIgPSBfZmFjdG9yeS5u\nZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBxID0KICAgICAgICAgICAgYnJv\na2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAic2VsZWN0IG1h\neChhLmFnZSkgRlJPTSAiICsKICAgICAgICAgICAgICAgIENhY2hlT2JqZWN0\nQUNoaWxkMS5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiIGEiKTsKICAgICAg\nICBxLnNldFVuaXF1ZShmYWxzZSk7CiAgICAgICAgTGlzdCByZXMgPSAoTGlz\ndCkgcS5leGVjdXRlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlcy5z\naXplKCkpOwogICAgICAgIE9iamVjdCBvID0gcmVzLmdldCgwKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoTG9uZy5jbGFzcywgby5nZXRDbGFzcygpKTsKICAg\nICAgICBDYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBC\nb29sZWFuLlRSVUUpOwoKICAgICAgICByZXMgPSAoTGlzdCkgcS5leGVjdXRl\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlcy5zaXplKCkpOwogICAg\nICAgIG8gPSByZXMuZ2V0KDApOwogICAgICAgIGFzc2VydEVxdWFscyhMb25n\nLmNsYXNzLCBvLmdldENsYXNzKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RQcm9qZWN0aW9uUmVzdWx0SXNDYWNoZWQoKSB7CiAgICAgICAgQnJv\na2VyIGJyb2tlciA9IF9mYWN0b3J5Lm5ld0Jyb2tlcigpOwogICAgICAgIFF1\nZXJ5IHEgPSBicm9rZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUws\nICJzZWxlY3QgYS5hZ2UgRlJPTSAiICsKICAgICAgICAgICAgQ2FjaGVPYmpl\nY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArICIgYSIpOwogICAg\nICAgIENvbGxlY3Rpb24gYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsK\nICAgICAgICBDYWNoZVRlc3RIZWxwZXIuaXRlcmF0ZShjKTsKICAgICAgICBD\nYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBCb29sZWFu\nLlRSVUUpOwoKICAgICAgICBjID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZSgp\nOwogICAgICAgIE9iamVjdCBvID0gYy5pdGVyYXRvcigpLm5leHQoKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoTG9uZy5jbGFzcywgby5nZXRDbGFzcygpKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UHJvamVjdGlvbk9mVGhpc0lz\nQ2FjaGVkKCkgewogICAgICAgIC8vICMjIyMjIG5lZWQgdG8gdGVzdCBzaW5n\nbGUgcHJvamVjdGlvbgogICAgICAgIEJyb2tlciBicm9rZXIgPSBfZmFjdG9y\neS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBxID0gYnJva2VyLm5ld1F1\nZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAic2VsZWN0IGEgRlJPTSAiICsK\nICAgICAgICAgICAgQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBs\nZU5hbWUoKSArICIgYSIpOwogICAgICAgIC8vQ2FjaGVPYmplY3RBQ2hpbGQx\nLmNsYXNzLCAic2VsZWN0IHRoaXMiKTsKICAgICAgICBDb2xsZWN0aW9uIGMg\nPSAoQ29sbGVjdGlvbikgcS5leGVjdXRlKCk7CiAgICAgICAgQ2FjaGVUZXN0\nSGVscGVyLml0ZXJhdGUoYyk7CiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLmFz\nc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5UUlVFKTsKCiAgICAgICAg\nYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsKICAgICAgICBPYmplY3Qg\nbyA9IGMuaXRlcmF0b3IoKS5uZXh0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKENhY2hlT2JqZWN0QUNoaWxkMS5jbGFzcywgby5nZXRDbGFzcygpKTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKGJyb2tlci5nZXRPYmplY3RJZChvKSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdFByb2plY3Rpb25SZXN1bHRXaXRo\nVGhpc0lzQ2FjaGVkKCkgewogICAgICAgIEJyb2tlciBicm9rZXIgPSBfZmFj\ndG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBxID0KICAgICAgICAg\nICAgYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAic2Vs\nZWN0IGEubmFtZSxhIEZST00gIiArCiAgICAgICAgICAgICAgICBDYWNoZU9i\namVjdEFDaGlsZDEuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsgIiBhIik7CiAg\nICAgICAgQ29sbGVjdGlvbiBjID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZSgp\nOwogICAgICAgIENhY2hlVGVzdEhlbHBlci5pdGVyYXRlKGMpOwogICAgICAg\nIENhY2hlVGVzdEhlbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xl\nYW4uVFJVRSk7CgogICAgICAgIGMgPSAoQ29sbGVjdGlvbikgcS5leGVjdXRl\nKCk7CiAgICAgICAgT2JqZWN0W10gcmVzdWx0ID0gKE9iamVjdFtdKSBjLml0\nZXJhdG9yKCkubmV4dCgpOwogICAgICAgIGFzc2VydEVxdWFscygyLCByZXN1\nbHQubGVuZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoU3RyaW5nLmNsYXNz\nLCByZXN1bHRbMF0uZ2V0Q2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKENhY2hlT2JqZWN0QUNoaWxkMS5jbGFzcywgcmVzdWx0WzFdLmdldENsYXNz\nKCkpOwogICAgICAgIGFzc2VydE5vdE51bGwoYnJva2VyLmdldE9iamVjdElk\nKHJlc3VsdFsxXSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3ROdWxs\nUHJvamVjdGlvblZhbHVlcygpIHsKICAgICAgICBCcm9rZXIgYnJva2VyID0g\nX2ZhY3RvcnkubmV3QnJva2VyKCk7CiAgICAgICAgUXVlcnkgcSA9CiAgICAg\nICAgICAgIGJyb2tlci5uZXdRdWVyeShKUFFMUGFyc2VyLkxBTkdfSlBRTCwg\nInNlbGVjdCBhLmxvY2FsZSBGUk9NICIgKwogICAgICAgICAgICAgICAgQ2Fj\naGVPYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArICIgYSIp\nOwogICAgICAgIENvbGxlY3Rpb24gYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1\ndGUoKTsKICAgICAgICBDYWNoZVRlc3RIZWxwZXIuaXRlcmF0ZShjKTsKICAg\nICAgICBDYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBC\nb29sZWFuLlRSVUUpOwoKICAgICAgICBjID0gKENvbGxlY3Rpb24pIHEuZXhl\nY3V0ZSgpOwogICAgICAgIGFzc2VydE51bGwoYy5pdGVyYXRvcigpLm5leHQo\nKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE51bGxBbmROb3ROdWxs\nUHJvamVjdGlvblZhbHVlcygpIHsKICAgICAgICBCcm9rZXIgYnJva2VyID0g\nX2ZhY3RvcnkubmV3QnJva2VyKCk7CiAgICAgICAgUXVlcnkgcSA9CiAgICAg\nICAgICAgIGJyb2tlcgogICAgICAgICAgICAgICAgLm5ld1F1ZXJ5KEpQUUxQ\nYXJzZXIuTEFOR19KUFFMLCAic2VsZWN0IGEubmFtZSxhLmxvY2FsZSBGUk9N\nICIgKwogICAgICAgICAgICAgICAgICAgIENhY2hlT2JqZWN0QUNoaWxkMS5j\nbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiIGEiKTsKCiAgICAgICAgQ29sbGVj\ndGlvbiBjID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZSgpOwogICAgICAgIENh\nY2hlVGVzdEhlbHBlci5pdGVyYXRlKGMpOwogICAgICAgIENhY2hlVGVzdEhl\nbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJVRSk7Cgog\nICAgICAgIGMgPSAoQ29sbGVjdGlvbikgcS5leGVjdXRlKCk7CiAgICAgICAg\nT2JqZWN0W10gcmVzdWx0ID0gKE9iamVjdFtdKSBjLml0ZXJhdG9yKCkubmV4\ndCgpOwogICAgICAgIGFzc2VydEVxdWFscygyLCByZXN1bHQubGVuZ3RoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoU3RyaW5nLmNsYXNzLCByZXN1bHRbMF0u\nZ2V0Q2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0TnVsbChyZXN1bHRbMV0pOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIFhYWHRlc3ROdWxsQWdncmVnYXRlVmFs\ndWVzKCkgewogICAgICAgIC8vID8/PwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RNdWx0aXBsZUFnZ3JlZ2F0ZVJlc3VsdElzQ2FjaGVkKCkgewogICAg\nICAgIEJyb2tlciBicm9rZXIgPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsKICAg\nICAgICBRdWVyeSBxID0KICAgICAgICAgICAgYnJva2VyLm5ld1F1ZXJ5KEpQ\nUUxQYXJzZXIuTEFOR19KUFFMLAogICAgICAgICAgICAgICAgInNlbGVjdCBt\nYXgoYS5hZ2UpLCBhdmcoYS5hZ2UpLCBjb3VudChhLmFnZSkgRlJPTSAiICsK\nICAgICAgICAgICAgICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEuY2xhc3Mu\nZ2V0U2ltcGxlTmFtZSgpICsgIiBhIik7CgogICAgICAgIE9iamVjdCBvID0g\ncS5leGVjdXRlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKE9iamVjdFtdLmNs\nYXNzLCBvLmdldENsYXNzKCkpOwogICAgICAgIGFzc2VydEVxdWFscygzLCAo\nKE9iamVjdFtdKSBvKS5sZW5ndGgpOwogICAgICAgIGFzc2VydEVxdWFscyhM\nb25nLmNsYXNzLCAoKE9iamVjdFtdKSBvKVswXS5nZXRDbGFzcygpKTsKCiAg\nICAgICAgQ2FjaGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwg\nQm9vbGVhbi5UUlVFKTsKCiAgICAgICAgbyA9IHEuZXhlY3V0ZSgpOwogICAg\nICAgIGFzc2VydEVxdWFscyhPYmplY3RbXS5jbGFzcywgby5nZXRDbGFzcygp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgKChPYmplY3RbXSkgbykubGVu\nZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoTG9uZy5jbGFzcywgKChPYmpl\nY3RbXSkgbylbMF0uZ2V0Q2xhc3MoKSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEZpZWxkVXNlZFR3aWNlKCkgewogICAgICAgIC8vIFBvc3RncmVz\nIGJ1ZwogICAgICAgIEJyb2tlciBicm9rZXIgPSBfZmFjdG9yeS5uZXdCcm9r\nZXIoKTsKICAgICAgICAvLyBncm91cCBhdm9pZHMgcG9zdGdyZXMgYnVnCiAg\nICAgICAgUXVlcnkgcSA9IGJyb2tlcgogICAgICAgICAgICAubmV3UXVlcnko\nSlBRTFBhcnNlci5MQU5HX0pQUUwsICJzZWxlY3QgYS5hZ2UsIGF2ZyhhLmFn\nZSkgRlJPTSAiICsKICAgICAgICAgICAgICAgIENhY2hlT2JqZWN0QUNoaWxk\nMS5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKwogICAgICAgICAgICAgICAgIiBh\nICBncm91cCBieSBhLmFnZSIpOwogICAgICAgIENvbGxlY3Rpb24gYyA9IChD\nb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsKICAgICAgICBDYWNoZVRlc3RIZWxw\nZXIuaXRlcmF0ZShjKTsKICAgICAgICBDYWNoZVRlc3RIZWxwZXIuYXNzZXJ0\nSW5DYWNoZSh0aGlzLCBxLCBCb29sZWFuLlRSVUUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RBZ2dyZWdhdGVBbmRQcm9qZWN0aW9uKCkgewogICAg\nICAgIC8vIFBvc3RncmVzIGJ1ZwogICAgICAgIEJyb2tlciBicm9rZXIgPSBf\nZmFjdG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICAvLyBncm91cCBhdm9pZHMg\ncG9zdGdyZXMgYnVnCiAgICAgICAgUXVlcnkgcSA9IGJyb2tlcgogICAgICAg\nICAgICAubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUwsICJzZWxlY3Qg\nYS5uYW1lLCBhdmcoYS5hZ2UpIEZST00gIiArCiAgICAgICAgICAgICAgICBD\nYWNoZU9iamVjdEFDaGlsZDEuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsKICAg\nICAgICAgICAgICAgICIgYSAgZ3JvdXAgYnkgYS5uYW1lIik7CgogICAgICAg\nIExpc3QgbCA9IChMaXN0KSBxLmV4ZWN1dGUoKTsKICAgICAgICBDYWNoZVRl\nc3RIZWxwZXIuaXRlcmF0ZShsKTsKICAgICAgICBhc3NlcnRFcXVhbHMoT2Jq\nZWN0W10uY2xhc3MsIGwuZ2V0KDApLmdldENsYXNzKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygyLCAoKE9iamVjdFtdKSBsLmdldCgwKSkubGVuZ3RoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoU3RyaW5nLmNsYXNzLCAoKE9iamVjdFtd\nKSBsLmdldCgwKSlbMF0uZ2V0Q2xhc3MoKSk7CgogICAgICAgIENhY2hlVGVz\ndEhlbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJVRSk7\nCgogICAgICAgIGwgPSAoTGlzdCkgcS5leGVjdXRlKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKE9iamVjdFtdLmNsYXNzLCBsLmdldCgwKS5nZXRDbGFzcygp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgKChPYmplY3RbXSkgbC5nZXQo\nMCkpLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFN0cmluZy5jbGFz\ncywgKChPYmplY3RbXSkgbC5nZXQoMCkpWzBdLmdldENsYXNzKCkpOwogICAg\nfQoKICAgIC8vRklYTUUgU2VldGhhIERlYyAxOSwyMDA2CiAgICAvKnB1Ymxp\nYyB2b2lkIHRlc3RNYXRoKCkgewogICAgICAgIEJyb2tlciBicm9rZXIgPSBf\nZmFjdG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBxID0KICAgICAg\nICAgICAgYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCJz\nZWxlY3QgYXZnKGEuYWdlKSBGUk9NICIrCiAgICAgICAgICAgICAgICAgICAg\nQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSsiIGEi\nKTsKICAgICAgICBOdW1iZXIgbiA9IChOdW1iZXIpIHEuZXhlY3V0ZSgpOwog\nICAgICAgIENhY2hlVGVzdEhlbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEs\nIEJvb2xlYW4uVFJVRSk7CiAgICAgICAgbiA9IChOdW1iZXIpIHEuZXhlY3V0\nZSgpOwogICAgfSovCgogICAgcHVibGljIHZvaWQgdGVzdFJlc3VsdENsYXNz\nSXNDYWNoZWQoKSB7CiAgICAgICAgQnJva2VyIGJyb2tlciA9IF9mYWN0b3J5\nLm5ld0Jyb2tlcigpOwogICAgICAgIFF1ZXJ5IHEgPSBicm9rZXIubmV3UXVl\ncnkoSlBRTFBhcnNlci5MQU5HX0pQUUwsICJTZWxlY3QgYSBGUk9NICIgKwog\nICAgICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEuY2xhc3MuZ2V0U2ltcGxl\nTmFtZSgpICsgIiBhIik7CiAgICAgICAgcS5zZXRSZXN1bHRUeXBlKE9iamVj\ndC5jbGFzcyk7CiAgICAgICAgQ29sbGVjdGlvbiBjID0gKENvbGxlY3Rpb24p\nIHEuZXhlY3V0ZSgpOwogICAgICAgIENhY2hlVGVzdEhlbHBlci5pdGVyYXRl\nKGMpOwogICAgICAgIENhY2hlVGVzdEhlbHBlci5hc3NlcnRJbkNhY2hlKHRo\naXMsIHEsIEJvb2xlYW4uVFJVRSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdEdyb3VwaW5nSXNDYWNoZWQoKSB7CiAgICAgICAgQnJva2VyIGJyb2tl\nciA9IF9mYWN0b3J5Lm5ld0Jyb2tlcigpOwogICAgICAgIFF1ZXJ5IHEgPQog\nICAgICAgICAgICBicm9rZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQ\nUUwsICJzZWxlY3QgbWF4KGEuYWdlKSBGUk9NICIgKwogICAgICAgICAgICAg\nICAgQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSAr\nCiAgICAgICAgICAgICAgICAiIGEgIGdyb3VwIGJ5IGEubmFtZSIpOwoKICAg\nICAgICBDb2xsZWN0aW9uIGMgPSAoQ29sbGVjdGlvbikgcS5leGVjdXRlKCk7\nCiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLml0ZXJhdGUoYyk7CiAgICAgICAg\nQ2FjaGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVh\nbi5UUlVFKTsKCiAgICAgICAgYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUo\nKTsKICAgICAgICBPYmplY3QgbyA9IGMuaXRlcmF0b3IoKS5uZXh0KCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKExvbmcuY2xhc3MsIG8uZ2V0Q2xhc3MoKSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEFnZ3JlZ2F0ZVByb2plY3Rp\nb25Hcm91cGluZ0lzQ2FjaGVkKCkgewogICAgICAgIEJyb2tlciBicm9rZXIg\nPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBxID0KICAg\nICAgICAgICAgYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFM\nLAogICAgICAgICAgICAgICAgInNlbGVjdCBhLm5hbWUsIG1heChhLmFnZSkg\nRlJPTSAiICsKICAgICAgICAgICAgICAgICAgICBDYWNoZU9iamVjdEFDaGls\nZDEuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsKICAgICAgICAgICAgICAgICAg\nICAiIGEgIGdyb3VwIGJ5IGEubmFtZSIpOwoKICAgICAgICBDb2xsZWN0aW9u\nIGMgPSAoQ29sbGVjdGlvbikgcS5leGVjdXRlKCk7CiAgICAgICAgQ2FjaGVU\nZXN0SGVscGVyLml0ZXJhdGUoYyk7CiAgICAgICAgQ2FjaGVUZXN0SGVscGVy\nLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5UUlVFKTsKCiAgICAg\nICAgYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsKICAgICAgICBPYmpl\nY3RbXSByZXN1bHQgPSAoT2JqZWN0W10pIGMuaXRlcmF0b3IoKS5uZXh0KCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHJlc3VsdC5sZW5ndGgpOwogICAg\nICAgIGFzc2VydEVxdWFscyhTdHJpbmcuY2xhc3MsIHJlc3VsdFswXS5nZXRD\nbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoTG9uZy5jbGFzcywgcmVz\ndWx0WzFdLmdldENsYXNzKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RVbmlxdWVSZXN1bHRzQXJlQ2FjaGVkQW5kQ29uc2lzdGVudCgpIHsKICAg\nICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7CiAg\nICAgICAgUXVlcnkgcSA9CiAgICAgICAgICAgIGJyb2tlci5uZXdRdWVyeShK\nUFFMUGFyc2VyLkxBTkdfSlBRTCwgInNlbGVjdCBhIEZST00gIiArCiAgICAg\nICAgICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEuY2xhc3MuZ2V0U2ltcGxl\nTmFtZSgpICsKICAgICAgICAgICAgICAgICIgYSAgd2hlcmUgYS5hZ2UgPTEi\nKTsKCiAgICAgICAgcS5zZXRVbmlxdWUodHJ1ZSk7CiAgICAgICAgQ2FjaGVP\nYmplY3RBQ2hpbGQxIGEgPSAoQ2FjaGVPYmplY3RBQ2hpbGQxKSBxLmV4ZWN1\ndGUoKTsKICAgICAgICBDYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0\naGlzLCBxLCBCb29sZWFuLlRSVUUpOwoKICAgICAgICBDYWNoZU9iamVjdEFD\naGlsZDEgYTIgPSAoQ2FjaGVPYmplY3RBQ2hpbGQxKSBxLmV4ZWN1dGUoKTsK\nICAgICAgICBhc3NlcnRUcnVlKGEgPT0gYTIpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RNdXRhYmxlUHJvamVjdGlvbkZpZWxkc0FyZUNvcGllZCgp\nIHsKICAgICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2Vy\nKCk7CiAgICAgICAgUXVlcnkgcSA9IGJyb2tlci5uZXdRdWVyeShKUFFMUGFy\nc2VyLkxBTkdfSlBRTCwgInNlbGVjdCBhLmRhdGUgRlJPTSAiICsKICAgICAg\nICAgICAgQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUo\nKSArICIgYSAgd2hlcmUgYS5hZ2U9MSIpOwoKICAgICAgICBxLnNldFVuaXF1\nZSh0cnVlKTsKICAgICAgICBEYXRlIGQwID0gKERhdGUpIHEuZXhlY3V0ZSgp\nOyAvLyBnZXQgaXQgaW4gY2FjaGUKICAgICAgICBEYXRlIGQxID0gKERhdGUp\nIHEuZXhlY3V0ZSgpOwogICAgICAgIGFzc2VydE5vdFNhbWUoZDAsIGQxKTsK\nCiAgICAgICAgRGF0ZSBkMiA9IChEYXRlKSBxLmV4ZWN1dGUoKTsKICAgICAg\nICBhc3NlcnROb3RTYW1lKGQxLCBkMik7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEFycmF5UHJvamVjdGlvbkZpZWxkc0FyZU5vdENhY2hlZCgpIHsK\nICAgICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7\nCiAgICAgICAgUXVlcnkgcSA9CiAgICAgICAgICAgIGJyb2tlci5uZXdRdWVy\neShKUFFMUGFyc2VyLkxBTkdfSlBRTCwgInNlbGVjdCBhLmRhdGVBcnJheSBG\nUk9NICIgKwogICAgICAgICAgICAgICAgQ2FjaGVPYmplY3RBQ2hpbGQxLmNs\nYXNzLmdldFNpbXBsZU5hbWUoKSArICIgYSIpOwoKICAgICAgICB0cnkgewog\nICAgICAgICAgICBxLmV4ZWN1dGUoKTsKICAgICAgICAgICAgZmFpbCgiQWxs\nb3dlZCBhcnJheSBwcm9qZWN0aW9uIHF1ZXJ5LiIpOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RDb2xsZWN0aW9uUHJvamVjdGlvbkZpZWxkc0FyZU5vdENh\nY2hlZCgpIHsKICAgICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3\nQnJva2VyKCk7CiAgICAgICAgUXVlcnkgcSA9CiAgICAgICAgICAgIGJyb2tl\nci5uZXdRdWVyeShKUFFMUGFyc2VyLkxBTkdfSlBRTCwgInNlbGVjdCBhLnN0\ncmluZ0NvbGwgRlJPTSAiICsKICAgICAgICAgICAgICAgIENhY2hlT2JqZWN0\nQUNoaWxkMS5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiIGEiKTsKCiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgcS5leGVjdXRlKCk7CiAgICAgICAgICAg\nIGZhaWwoIkFsbG93ZWQgYXJyYXkgcHJvamVjdGlvbiBxdWVyeS4iKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXh0ZXJuYWxpemVkU2luZ2xlVmFsdWVG\naWVsZElzTm90Q2FjaGVkKCkgewogICAgICAgIEJyb2tlciBicm9rZXIgPSBf\nZmFjdG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBxID0gYnJva2Vy\nLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAic2VsZWN0IGEuY2xz\nIEZST00gIiArCiAgICAgICAgICAgIENhY2hlT2JqZWN0V2l0aEV4dGVybmFs\naXplZEZpZWxkcy5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiIGEiKTsKCiAg\nICAgICAgcS5zZXRVbmlxdWUodHJ1ZSk7CiAgICAgICAgT2JqZWN0IG8gPSBx\nLmV4ZWN1dGUoKTsgLy8gZ2V0IGl0IGluIGNhY2hlCiAgICAgICAgLy8gIyMj\nIyMgYXNzZXJ0RXF1YWxzIChDbGFzcy5jbGFzcywgbyk7CiAgICAgICAgQ2Fj\naGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5G\nQUxTRSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE11dGF0ZWRRdWVy\neVJldHVybnNOZXdSZXN1bHRzKCkgewogICAgICAgIEJyb2tlciBicm9rZXIg\nPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBxID0KICAg\nICAgICAgICAgYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFM\nLAogICAgICAgICAgICAgICAgInNlbGVjdCBhLm5hbWUsIG1heChhLmFnZSkg\nRlJPTSAiICsKICAgICAgICAgICAgICAgICAgICBDYWNoZU9iamVjdEFDaGls\nZDEuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsKICAgICAgICAgICAgICAgICAg\nICAiIGEgZ3JvdXAgYnkgYS5uYW1lIik7CgogICAgICAgIExpc3QgbCA9IChM\naXN0KSBxLmV4ZWN1dGUoKTsKICAgICAgICBDYWNoZVRlc3RIZWxwZXIuaXRl\ncmF0ZShsKTsKICAgICAgICBDYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNo\nZSh0aGlzLCBxLCBCb29sZWFuLlRSVUUpOwoKICAgICAgICBsID0gKExpc3Qp\nIHEuZXhlY3V0ZSgpOwogICAgICAgIE9iamVjdFtdIHJlc3VsdCA9IChPYmpl\nY3RbXSkgbC5nZXQoMCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHJlc3Vs\ndC5sZW5ndGgpOwogICAgICAgIGFzc2VydEVxdWFscyhTdHJpbmcuY2xhc3Ms\nIHJlc3VsdFswXS5nZXRDbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nTG9uZy5jbGFzcywgcmVzdWx0WzFdLmdldENsYXNzKCkpOwoKICAgICAgICAv\nLyBub3csIG11dGF0ZSB0aGUgcXVlcnkgYW5kIHNlZSB3aGF0IGhhcHBlbnMK\nICAgICAgICBxLnNldFF1ZXJ5KCJzZWxlY3QgbWF4KGEuYWdlKSxhLm5hbWUg\nRlJPTSAiICsKICAgICAgICAgICAgQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNz\nLmdldFNpbXBsZU5hbWUoKSArICIgYSBncm91cCBieSBhLm5hbWUiKTsKICAg\nICAgICBDYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBC\nb29sZWFuLkZBTFNFKTsKICAgICAgICBsID0gKExpc3QpIHEuZXhlY3V0ZSgp\nOwogICAgICAgIHJlc3VsdCA9IChPYmplY3RbXSkgbC5nZXQoMCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDIsIHJlc3VsdC5sZW5ndGgpOwogICAgICAgIGFz\nc2VydEVxdWFscyhMb25nLmNsYXNzLCByZXN1bHRbMF0uZ2V0Q2xhc3MoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKFN0cmluZy5jbGFzcywgcmVzdWx0WzFd\nLmdldENsYXNzKCkpOwogICAgICAgIENhY2hlVGVzdEhlbHBlci5pdGVyYXRl\nKGwpOwogICAgICAgIENhY2hlVGVzdEhlbHBlci5hc3NlcnRJbkNhY2hlKHRo\naXMsIHEsIEJvb2xlYW4uVFJVRSk7CgogICAgICAgIGwgPSAoTGlzdCkgcS5l\neGVjdXRlKCk7CiAgICAgICAgcmVzdWx0ID0gKE9iamVjdFtdKSBsLmdldCgw\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcmVzdWx0Lmxlbmd0aCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKExvbmcuY2xhc3MsIHJlc3VsdFswXS5nZXRD\nbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoU3RyaW5nLmNsYXNzLCBy\nZXN1bHRbMV0uZ2V0Q2xhc3MoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nWFhYdGVzdEV4dGVybmFsaXplZENvbnRhaW5lckZpZWxkSXNFeHRlcm5hbGl6\nZWQoKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgWFhYdGVzdFNlcmlhbGl6\nZWRTaW5nbGVWYWx1ZUZpZWxkSXNTZXJpYWxpemVkKCkgewogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIFhYWHRlc3RTZXJpYWxpemVkQ29udGFpbmVyRmllbGRJ\nc1NlcmlhbGl6ZWQoKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgWFhYdGVz\ndEN1c3RvbU1hcHBlZFNpbmdsZVZhbHVlRmllbGRJc0hhbmRsZWQoKSB7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgWFhYdGVzdEN1c3RvbU1hcHBlZENvbnRh\naW5lckZpZWxkSXNIYW5kbGVkKCkgewogICAgfQoKICAgIHByaXZhdGUgc3Rh\ndGljIGludCBkZWxldGVBbGwoQnJva2VyIGJyb2tlciwgQ2xhc3MgY2xhenos\nCiAgICAgICAgYm9vbGVhbiBzdWJjbGFzc2VzKSB7CiAgICAgICAgZmluYWwg\nYm9vbGVhbiB1c2VEZWxldGVCeVF1ZXJ5ID0gZmFsc2U7CgogICAgICAgIGlm\nICh1c2VEZWxldGVCeVF1ZXJ5KSB7CiAgICAgICAgICAgIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuUXVlcnkgcXVlcnkgPQogICAgICAgICAgICAgICAg\nYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAiU2VsZWN0\nIGEgRlJPTSAiICsKICAgICAgICAgICAgICAgICAgICBjbGF6ei5nZXRTaW1w\nbGVOYW1lKCkgKyAiIGEiKTsKICAgICAgICAgICAgcXVlcnkuc2V0Q2FuZGlk\nYXRlVHlwZShjbGF6eiwgc3ViY2xhc3Nlcyk7CiAgICAgICAgICAgIHJldHVy\nbiAoaW50KSBxdWVyeS5kZWxldGVBbGwoKTsKICAgICAgICB9IGVsc2Ugewog\nICAgICAgICAgICBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkV4dGVudCBl\neHRlbnQgPQogICAgICAgICAgICAgICAgYnJva2VyLm5ld0V4dGVudChjbGF6\neiwgc3ViY2xhc3Nlcyk7CiAgICAgICAgICAgIExpc3QgbGlzdCA9IGV4dGVu\ndC5saXN0KCk7CiAgICAgICAgICAgIGludCBzaXplID0gbGlzdC5zaXplKCk7\nCiAgICAgICAgICAgIGJyb2tlci5kZWxldGVBbGwobGlzdCwgbnVsbCk7CiAg\nICAgICAgICAgIHJldHVybiBzaXplOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

