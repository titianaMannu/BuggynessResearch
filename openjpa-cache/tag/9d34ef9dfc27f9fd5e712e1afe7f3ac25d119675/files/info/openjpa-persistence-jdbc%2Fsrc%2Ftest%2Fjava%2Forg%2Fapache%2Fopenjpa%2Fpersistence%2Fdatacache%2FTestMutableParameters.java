{"sha":"20ce60eeba563bf990fda171e4e03cfdee0d2799","node_id":"MDQ6QmxvYjIwNjM2NDoyMGNlNjBlZWJhNTYzYmY5OTBmZGExNzFlNGUwM2NmZGVlMGQyNzk5","size":6218,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/20ce60eeba563bf990fda171e4e03cfdee0d2799","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNh\nY2hlOwoKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2\nYS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0\nIGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRp\ndHlNYW5hZ2VyRmFjdG9yeTsKCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLmRhdGFjYWNoZS5jb21tb24uYXBwcy5DYWNoZU9iamVj\ndEE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0\nYWNhY2hlLmNvbW1vbi5hcHBzLkNhY2hlT2JqZWN0QUNoaWxkMTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRpbHMu\nQWJzdHJhY3RUZXN0Q2FzZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLkJyb2tlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJu\nZWwuQnJva2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuUXVlcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLmpwcWwuSlBRTFBhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5KUEFGYWNhZGVIZWxwZXI7CgpwdWJsaWMgY2xhc3MgVGVz\ndE11dGFibGVQYXJhbWV0ZXJzCiAgICBleHRlbmRzIEFic3RyYWN0VGVzdENh\nc2UgewoKICAgIHB1YmxpYyBUZXN0TXV0YWJsZVBhcmFtZXRlcnMoU3RyaW5n\nIHRlc3QpIHsKICAgICAgICBzdXBlcih0ZXN0LCAiZGF0YWNhY2hlY2FjdHVz\nYXBwIik7CiAgICB9CgogICAgcHJpdmF0ZSBCcm9rZXJGYWN0b3J5IF9mYWN0\nb3J5OwogICAgcHJpdmF0ZSBEYXRlIF9zdGFydERhdGU7CgogICAgcHVibGlj\nIHZvaWQgc2V0VXAoKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGRlbGV0ZUFsbChDYWNoZU9iamVjdEEuY2xhc3MpOwogICAgICAgIE1h\ncCBwcm9wc01hcCA9IG5ldyBIYXNoTWFwKCk7CiAgICAgICAgcHJvcHNNYXAu\ncHV0KCJvcGVuanBhLkRhdGFDYWNoZSIsICJ0cnVlIik7CiAgICAgICAgcHJv\ncHNNYXAucHV0KCJvcGVuanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVyIiwgInNq\ndm0iKTsKICAgICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuQnJva2VySW1w\nbCIsIENhY2hlVGVzdEJyb2tlci5jbGFzcy5nZXROYW1lKCkpOwoKICAgICAg\nICBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYgPSBnZXRFbWYocHJvcHNNYXAp\nOwogICAgICAgIF9mYWN0b3J5ID0gSlBBRmFjYWRlSGVscGVyLnRvQnJva2Vy\nRmFjdG9yeShlbWYpOwoKICAgICAgICAvLyBjcmVhdGUgYSB2ZXJ5IGVhcmx5\nIGRhdGUgc28gdGhhdCB3aGVuIHdlIG11dGF0ZSBpdCwgd2UKICAgICAgICAv\nLyB3b24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHByZWNpc2lvbiBpc3N1ZXMu\nCiAgICAgICAgX3N0YXJ0RGF0ZSA9IG5ldyBqYXZhLnRleHQuU2ltcGxlRGF0\nZUZvcm1hdCgiZGQvTU0veXl5eSIpLgogICAgICAgICAgICBwYXJzZSgiMDEv\nMDEvMTk5MCIpOwogICAgICAgIEJyb2tlciBicm9rZXIgPSBfZmFjdG9yeS5u\nZXdCcm9rZXIoKTsKICAgICAgICBicm9rZXIuYmVnaW4oKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IDUwOyBpKyspIHsKICAgICAgICAgICAgQ2Fj\naGVPYmplY3RBQ2hpbGQxIG8gPSBuZXcgQ2FjaGVPYmplY3RBQ2hpbGQxCiAg\nICAgICAgICAgICAgICAoIiIsICJKUFFMMlF1ZXJpZXMiLCBpKTsKICAgICAg\nICAgICAgby5zZXREYXRlKF9zdGFydERhdGUpOwogICAgICAgICAgICBicm9r\nZXIucGVyc2lzdChvLCBudWxsKTsKICAgICAgICB9CiAgICAgICAgYnJva2Vy\nLmNvbW1pdCgpOwogICAgICAgIGJyb2tlci5jbG9zZSgpOwoKICAgICAgICBD\nYWNoZVRlc3RIZWxwZXIuY2FjaGVNYW5hZ2VyKF9mYWN0b3J5KS5nZXRTeXN0\nZW1RdWVyeUNhY2hlKCkuY2xlYXIoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZWFyRG93bigpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgX2ZhY3RvcnkuY2xvc2UoKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KCiAgICAgICAg\nc3VwZXIudGVhckRvd24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nTXV0YXRlZERhdGVQYXJhbWV0ZXIoKSB7CiAgICAgICAgQnJva2VyIGJyb2tl\nciA9IF9mYWN0b3J5Lm5ld0Jyb2tlcigpOwogICAgICAgIFF1ZXJ5IHEgPSBi\ncm9rZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUwsCiAgICAgICAg\nICAgICJzZWxlY3QgYSBmcm9tICIgKwogICAgICAgICAgICAgICAgQ2FjaGVP\nYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArCiAgICAgICAg\nICAgICAgICAiIGEgd2hlcmUgYS5kYXRlIDwgOnBfZGF0ZSIpOwogICAgICAg\nIERhdGUgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgQ29sbGVjdGlvbiBjID0g\nKENvbGxlY3Rpb24pIHEuZXhlY3V0ZShuZXcgT2JqZWN0W117IGQgfSk7CiAg\nICAgICAgQ2FjaGVUZXN0SGVscGVyLml0ZXJhdGUoYyk7CiAgICAgICAgaW50\nIGluaXRpYWxTaXplID0gYy5zaXplKCk7CiAgICAgICAgQ2FjaGVUZXN0SGVs\ncGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5UUlVFLAogICAg\nICAgICAgICBuZXcgT2JqZWN0W117IGQgfSk7CiAgICAgICAgZC5zZXRUaW1l\nKF9zdGFydERhdGUuZ2V0VGltZSgpKTsKICAgICAgICBDYWNoZVRlc3RIZWxw\nZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBCb29sZWFuLkZBTFNFLAogICAg\nICAgICAgICBuZXcgT2JqZWN0W117IGQgfSk7CiAgICAgICAgYyA9IChDb2xs\nZWN0aW9uKSBxLmV4ZWN1dGUobmV3IE9iamVjdFtdeyBkIH0pOwoKICAgICAg\nICBhc3NlcnRGYWxzZShuZXcgSW50ZWdlcihpbml0aWFsU2l6ZSkuZXF1YWxz\nKG5ldyBJbnRlZ2VyKGMuc2l6ZSgpKSkpOwogICAgfQoKICAgIC8vRklYTUUg\nU2VldGhhIE5vdiAxMCwyMDA2CiAgICAvL25lZWQgdG8gZmluZCB0aGUgSlBR\nTCBxdWVyeSBmb3IgOnBfYWdlIGNvbnRhaW5zCiAgICAvKgogICAgcHVibGlj\nIHZvaWQgdGVzdE11dGF0ZWRTZXRQYXJhbWV0ZXIoKSB7CiAgICAgICAgbXV0\nYXRlZENvbGxlY3Rpb25QYXJhbWV0ZXJIZWxwZXIodHJ1ZSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdE11dGF0ZWRMaXN0UGFyYW1ldGVyKCkgewog\nICAgICAgIG11dGF0ZWRDb2xsZWN0aW9uUGFyYW1ldGVySGVscGVyKGZhbHNl\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBtdXRhdGVkQ29sbGVjdGlvblBh\ncmFtZXRlckhlbHBlcihib29sZWFuIHNldCkgewogICAgICAgIEJyb2tlciBi\ncm9rZXIgPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBx\nID0KICAgICAgICAgICAgYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFO\nR19KUFFMLAogICAgICAgICAgICAgICAgICAgICJzZWxlY3QgYSBmcm9tICIr\nCiAgICAgICAgICAgICAgICAgICAgQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNz\nLmdldFNpbXBsZU5hbWUoKSsgImEgOnBfYWdlcy5jb250YWlucyAoYWdlKSIp\nOwogICAgICAgIENvbGxlY3Rpb24gY19wYXJhbTsKICAgICAgICBpZiAoc2V0\nKQogICAgICAgICAgICBjX3BhcmFtID0gbmV3IEhhc2hTZXQoKTsKICAgICAg\nICBlbHNlCiAgICAgICAgICAgIGNfcGFyYW0gPSBuZXcgTGlua2VkTGlzdCgp\nOwogICAgICAgIGNfcGFyYW0uYWRkKG5ldyBMb25nKDApKTsKICAgICAgICBj\nX3BhcmFtLmFkZChuZXcgTG9uZygxKSk7CiAgICAgICAgQ29sbGVjdGlvbiBj\nID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZShuZXcgT2JqZWN0W117IGNfcGFy\nYW0gfSk7CiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLml0ZXJhdGUoYyk7CiAg\nICAgICAgaW50IGluaXRpYWxTaXplID0gYy5zaXplKCk7CiAgICAgICAgQ2Fj\naGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5U\nUlVFLAogICAgICAgICAgICBuZXcgT2JqZWN0W117IGNfcGFyYW0gfSk7CiAg\nICAgICAgY19wYXJhbS5hZGQobmV3IExvbmcoMikpOwogICAgICAgIENhY2hl\nVGVzdEhlbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uRkFM\nU0UsCiAgICAgICAgICAgIG5ldyBPYmplY3RbXXsgY19wYXJhbSB9KTsKICAg\nICAgICBjID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZShuZXcgT2JqZWN0W117\nIGNfcGFyYW0gfSk7CiAgICAgICAgYXNzZXJ0RmFsc2UobmV3IEludGVnZXIo\naW5pdGlhbFNpemUpLmVxdWFscyhuZXcgSW50ZWdlcihjLnNpemUoKSkpKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0TXV0YXRlZFNldFBhcmFtZXRl\nckRhdGVzKCkgewogICAgICAgIG11dGF0ZWRDb2xsZWN0aW9uUGFyYW1ldGVy\nRGF0ZXNIZWxwZXIodHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndE11dGF0ZWRMaXN0UGFyYW1ldGVyRGF0ZXMoKSB7CiAgICAgICAgbXV0YXRl\nZENvbGxlY3Rpb25QYXJhbWV0ZXJEYXRlc0hlbHBlcihmYWxzZSk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgbXV0YXRlZENvbGxlY3Rpb25QYXJhbWV0ZXJE\nYXRlc0hlbHBlcihib29sZWFuIHNldCkgewogICAgICAgIEJyb2tlciBicm9r\nZXIgPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsKICAgICAgICBRdWVyeSBxID0K\nICAgICAgICAgICAgYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19K\nUFFMLCBDYWNoZU9iamVjdEFDaGlsZDEuY2xhc3MsCiAgICAgICAgICAgICAg\nICAiOnBfZGF0ZXMuY29udGFpbnMgKGRhdGUpIik7CiAgICAgICAgQ29sbGVj\ndGlvbiBjX3BhcmFtOwogICAgICAgIGlmIChzZXQpCiAgICAgICAgICAgIGNf\ncGFyYW0gPSBuZXcgSGFzaFNldCgpOwogICAgICAgIGVsc2UKICAgICAgICAg\nICAgY19wYXJhbSA9IG5ldyBMaW5rZWRMaXN0KCk7CiAgICAgICAgY19wYXJh\nbS5hZGQobmV3IERhdGUoKSk7CiAgICAgICAgY19wYXJhbS5hZGQobmV3IERh\ndGUoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLSAxMDAwKSk7CiAgICAg\nICAgQ29sbGVjdGlvbiBjID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZShuZXcg\nT2JqZWN0W117IGNfcGFyYW0gfSk7CiAgICAgICAgQ2FjaGVUZXN0SGVscGVy\nLml0ZXJhdGUoYyk7CiAgICAgICAgaW50IGluaXRpYWxTaXplID0gYy5zaXpl\nKCk7CiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhp\ncywgcSwgQm9vbGVhbi5UUlVFLAogICAgICAgICAgICBuZXcgT2JqZWN0W117\nIGNfcGFyYW0gfSk7CiAgICAgICAgY19wYXJhbS5hZGQobmV3IERhdGUoU3lz\ndGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLSA1MDApKTsKICAgICAgICBDYWNo\nZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBCb29sZWFuLkZB\nTFNFLAogICAgICAgICAgICBuZXcgT2JqZWN0W117IGNfcGFyYW0gfSk7CiAg\nICB9Ki8KfQo=\n","encoding":"base64"}

