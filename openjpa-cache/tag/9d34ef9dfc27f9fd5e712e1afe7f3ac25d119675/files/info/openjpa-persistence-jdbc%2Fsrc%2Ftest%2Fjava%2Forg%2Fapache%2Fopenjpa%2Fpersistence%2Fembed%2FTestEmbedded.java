{"sha":"520bad3308aaad06e7e1535a705ad0ed291bb530","node_id":"MDQ6QmxvYjIwNjM2NDo1MjBiYWQzMzA4YWFhZDA2ZTdlMTUzNWE3MDVhZDBlZDI5MWJiNTMw","size":3718,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/520bad3308aaad06e7e1535a705ad0ed291bb530","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZW1iZWQ7\nCgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLkVudGl0eVRyYW5zYWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKcHVibGlj\nIGNsYXNzIFRlc3RFbWJlZGRlZCBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNl\nIHsKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIHN1cGVyLnNl\ndFVwKEJhc2VFbnRpdHkuY2xhc3MsIEFkZHJlc3MuY2xhc3MsIEdlb2NvZGUu\nY2xhc3MsCiAgICAgICAgICAgICAgICBDTEVBUl9UQUJMRVMpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RJbnNlcnRFbWJlZGRlZCgpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgQWRkcmVzcyBhID0gbmV3IEFkZHJlc3MoKTsKICAgICAgICBhLnNldFN0\ncmVldEFkZHJlc3MoIjEyMyBNYWluIFN0Iik7CiAgICAgICAgYS5zZXRDaXR5\nKCJDaGljYWdvIik7CiAgICAgICAgYS5zZXRTdGF0ZSgiSUwiKTsKICAgICAg\nICBhLnNldFppcCg2MDYwNik7CiAgICAgICAgR2VvY29kZSBnID0gbmV3IEdl\nb2NvZGUoKTsKICAgICAgICBnLnNldExhdGl0dWRlKDEuMGYpOwogICAgICAg\nIGcuc2V0TG9uZ3RpdHVkZSgyLjBmKTsKICAgICAgICBhLnNldEdlb2NvZGUo\nZyk7CiAgICAgICAgZW0ucGVyc2lzdChhKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwogICAgfQoKICAgIC8qCiAgICAgKiBUaGlz\nIHZhcmlhdGlvbiB2ZXJpZmllcyB0aGF0IGFuIGVtYmVkZGVkIGVudGl0eSBj\nYW4gYmUgYWNjZXNzZWQgYWZ0ZXIKICAgICAqIGJlaW5nIGRldGFjaGVkLiBB\nbiBlbnRpdHkgL3cgZW1iZWRkZWQgaXMgcGVyc2lzdGVkIGFuZCB0aGVuIHF1\nZXJpZWQuIFRoZQogICAgICogZW0gaXMgY2xvc2VkLCBkZXRhY2hpbmcgdGhl\nIGVudGl0aWVzLCBhbmQgdGhlbiBhIGdldHRlciBpcyBjYWxsZWQgb24gdGhl\nCiAgICAgKiBlbWJlZGRlZGVkLiBJZiB0aGUgZW1iZWRkZWQgaXMgc3RpbGwg\nYXR0YWNoZWQgKGl0IHNob3VsZCBub3QgYmUpIGFuCiAgICAgKiBJbGxlZ2Fs\nU3RhdGVFeGNlcHRpb24gd2lsbCBiZSB0aHJvd24uCiAgICAgKiAKICAgICAq\nIEpJUkEgUmVmOiBPUEVOSlBBLTczMyBBdXRob3JzOiBDaHJpcyBUaWxsbWFu\nLCBKZXJlbXkgQmF1ZXIKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdERl\ndGFjaGVkUXVlcnlFbWJlZGRlZCgpIHsKICAgICAgICBBZGRyZXNzIGEgPSBu\nZXcgQWRkcmVzcygpOwogICAgICAgIGEuc2V0U3RyZWV0QWRkcmVzcygiNDU2\nIE1haW4gU3QiKTsKICAgICAgICBhLnNldENpdHkoIk5ldyBZb3JrIik7CiAg\nICAgICAgYS5zZXRTdGF0ZSgiTlkiKTsKICAgICAgICBhLnNldFppcCgxMjk1\nNSk7CiAgICAgICAgR2VvY29kZSBnID0gbmV3IEdlb2NvZGUoKTsKICAgICAg\nICBnLnNldExhdGl0dWRlKDEuMGYpOwogICAgICAgIGcuc2V0TG9uZ3RpdHVk\nZSgyLjBmKTsKICAgICAgICBhLnNldEdlb2NvZGUoZyk7CgogICAgICAgIHBl\ncnNpc3RBZGRyZXNzKGEpOwoKICAgICAgICBBZGRyZXNzIGEyID0KICAgICAg\nICAgICAgcXVlcnlBZGRyZXNzZXMoCiAgICAgICAgICAgICAgICAic2VsZWN0\nIGFkZHJlc3MgZnJvbSBBZGRyZXNzIGFkZHJlc3MiCiAgICAgICAgICAgICAg\nICAgICAgKyAiIHdoZXJlIGFkZHJlc3Muc3RyZWV0QWRkcmVzcyA9ICc0NTYg\nTWFpbiBTdCciKS5nZXQoMCk7CgogICAgICAgIGFzc2VydEVxdWFscyhhMi5n\nZXRHZW9jb2RlKCkuZ2V0TGF0aXR1ZGUoKSwgMS4wZik7CiAgICB9CgogICAg\ncHJpdmF0ZSB2b2lkIHBlcnNpc3RBZGRyZXNzKEFkZHJlc3MgYWRkcmVzcykg\newogICAgICAgIGZpbmFsIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGZpbmFsIEVudGl0eVRyYW5zYWN0\naW9uIHR4ID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKCiAgICAgICAgdHguYmVn\naW4oKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0ucGVyc2lzdChh\nZGRyZXNzKTsKICAgICAgICAgICAgdHguY29tbWl0KCk7CiAgICAgICAgfSBm\naW5hbGx5IHsKICAgICAgICAgICAgaWYgKHR4LmlzQWN0aXZlKCkpIHsKICAg\nICAgICAgICAgICAgIHR4LnJvbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGFkZHJlc3MuZ2V0R2VvY29kZSgpLmdldExhdGl0dWRlKCksIDEu\nMGYpOwogICAgfQoKICAgIHByaXZhdGUgTGlzdDxBZGRyZXNzPiBxdWVyeUFk\nZHJlc3NlcyhTdHJpbmcgcXVlcnkpIHsKICAgICAgICBmaW5hbCBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBmaW5hbCBFbnRpdHlUcmFuc2FjdGlvbiB0eCA9IGVtLmdldFRyYW5zYWN0\naW9uKCk7CgogICAgICAgIHR4LmJlZ2luKCk7CgogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGZpbmFsIExpc3Q8QWRkcmVzcz4gbGlzdCA9CiAgICAgICAg\nICAgICAgICAoTGlzdDxBZGRyZXNzPikgZW0uY3JlYXRlUXVlcnkocXVlcnkp\nLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgdHguY29tbWl0KCk7CiAg\nICAgICAgICAgIHJldHVybiBsaXN0OwogICAgICAgIH0gZmluYWxseSB7CiAg\nICAgICAgICAgIGlmICh0eC5pc0FjdGl2ZSgpKSB7CiAgICAgICAgICAgICAg\nICB0eC5yb2xsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVt\nLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKfQ==\n","encoding":"base64"}

