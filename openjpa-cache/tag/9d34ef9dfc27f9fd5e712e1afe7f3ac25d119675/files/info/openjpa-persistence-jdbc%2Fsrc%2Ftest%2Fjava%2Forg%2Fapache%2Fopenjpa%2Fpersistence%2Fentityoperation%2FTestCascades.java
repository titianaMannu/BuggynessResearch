{"sha":"167b64e2d84ce753a791484d55fa65c2eba89cab","node_id":"MDQ6QmxvYjIwNjM2NDoxNjdiNjRlMmQ4NGNlNzUzYTc5MTQ4NGQ1NWZhNjVjMmViYTg5Y2Fi","size":38637,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/167b64e2d84ce753a791484d55fa65c2eba89cab","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZW50aXR5\nb3BlcmF0aW9uOwoKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuZW50aXR5b3BlcmF0aW9uLmNvbW1vbi5hcHBzLkNhc2NhZGVzRW50\naXR5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNv\nbW1vbi51dGlscy5BYnN0cmFjdFRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwoK\nLyoqCiAqIDxwPlRlc3QgRUpCIHBlcnNpc3RlbmNlIGNhc2NhZGUgb3B0aW9u\ncy48L3A+CiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xh\nc3MgVGVzdENhc2NhZGVzIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2FzZSB7Cgog\nICAgcHVibGljIFRlc3RDYXNjYWRlcyhTdHJpbmcgbmFtZSkgewogICAgICAg\nIHN1cGVyKG5hbWUsICJlbnRpdHlvcGNhY3R1c2FwcCIpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIGRlbGV0ZUFsbChDYXNj\nYWRlc0VudGl0eS5jbGFzcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndE5vQ2FzY2FkZVBlcnNpc3QgKCkKICAgICB7CiAgICAgICAgIENhc2NhZGVz\nRW50aXR5IGVudCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAg\nQ2FzY2FkZXNFbnRpdHkgcmVsID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwog\nICAgICAgICBlbnQuc2V0Tm9uZSAocmVsKTsKICAgICAgICAgZW50LmdldE5v\nbmVDb2xsZWN0aW9uICgpLmFkZCAocmVsKTsKCiAgICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJl\nbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgIHN0YXJ0VHgoZW0pOwogICAg\nICAgICBlbS5wZXJzaXN0IChlbnQpOwogICAgICAgICBhc3NlcnRUcnVlIChl\nbS5pc1BlcnNpc3RlbnQgKGVudCkpOwogICAgICAgICBhc3NlcnRGYWxzZSAo\nZW0uaXNQZXJzaXN0ZW50IChyZWwpKTsKICAgICAgICAgcm9sbGJhY2tUeChl\nbSk7CiAgICAgICAgIGVuZEVtKGVtKTsKICAgICB9CgoKICAgICBwdWJsaWMg\ndm9pZCB0ZXN0Q2FzY2FkZVBlcnNpc3RJc0ltbWVkaWF0ZSAoKQogICAgIHsK\nICAgICAgICAgQ2FzY2FkZXNFbnRpdHkgZW50ID0gbmV3IENhc2NhZGVzRW50\naXR5ICgpOwogICAgICAgICBDYXNjYWRlc0VudGl0eSByZWwxID0gbmV3IENh\nc2NhZGVzRW50aXR5ICgpOwogICAgICAgICBDYXNjYWRlc0VudGl0eSByZWwy\nID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAgICAgICBlbnQuc2V0QWxs\nIChyZWwxKTsKICAgICAgICAgZW50LmdldEFsbENvbGxlY3Rpb24gKCkuYWRk\nIChyZWwyKTsKCiAgICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0g\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbS5wZXJzaXN0IChl\nbnQpOwogICAgICAgICBhc3NlcnRUcnVlIChlbS5pc1BlcnNpc3RlbnQgKGVu\ndCkpOwogICAgICAgICBhc3NlcnRUcnVlIChlbS5pc1BlcnNpc3RlbnQgKHJl\nbDEpKTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAoZW0uaXNQZXJzaXN0ZW50IChy\nZWwyKSk7CiAgICAgICAgIHJvbGxiYWNrVHgoZW0pOwogICAgICAgICBlbmRF\nbShlbSk7CiAgICAgfQoKCiAgICAgcHVibGljIHZvaWQgdGVzdE5vQ2FzY2Fk\nZVBlcnNpc3RGbHVzaFdpdGhEZWxldGVkQ2F1c2VzRXhjZXB0aW9uICgpCiAg\nICAgewogICAgICAgICBDYXNjYWRlc0VudGl0eSByZWwgPSBuZXcgQ2FzY2Fk\nZXNFbnRpdHkgKCk7CiAgICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVt\nID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbS5wZXJzaXN0\nIChyZWwpOwogICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgIGxvbmcgaWQg\nPSByZWwuZ2V0SWQgKCk7CiAgICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAg\nIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgIHJlbCA9IGVtLmZpbmQgKENhc2NhZGVzRW50aXR5\nLmNsYXNzLCBpZCk7CiAgICAgICAgIGFzc2VydE5vdE51bGwgKHJlbCk7CiAg\nICAgICAgIENhc2NhZGVzRW50aXR5IGVudCA9IG5ldyBDYXNjYWRlc0VudGl0\neSAoKTsKICAgICAgICAgZW50LnNldE5vbmUgKHJlbCk7CiAgICAgICAgIHN0\nYXJ0VHgoZW0pOwogICAgICAgICBlbS5yZW1vdmUgKHJlbCk7CiAgICAgICAg\nIGVtLnBlcnNpc3QgKGVudCk7CiAgICAgICAgIHRyeQogICAgICAgICB7CiAg\nICAgICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgICAgICBmYWlsICgiQWxs\nb3dlZCBmbHVzaCB3aXRoIGRlbGV0ZWQgb2JqZWN0IGluIG5vbi1jYXNjYWRl\nLXBlcnNpc3QgIgogICAgICAgICAgICAgICAgICsgInJlbGF0aW9uIGZpZWxk\nIik7CiAgICAgICAgIH0KICAgICAgICAgY2F0Y2ggKFJ1bnRpbWVFeGNlcHRp\nb24gcmUpCiAgICAgICAgIHsKICAgICAgICAgfQogICAgICAgICBjYXRjaCAo\nRXhjZXB0aW9uIGUpCiAgICAgICAgIHt9CgogICAgICAgICBhc3NlcnRUcnVl\nICghZW0uZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSAoKSk7CiAgICAgICAg\nIGVuZEVtKGVtKTsKCiAgICAgICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgIHJlbCA9IGVt\nLmZpbmQgKENhc2NhZGVzRW50aXR5LmNsYXNzLCBpZCk7CiAgICAgICAgIGFz\nc2VydE5vdE51bGwgKHJlbCk7CiAgICAgICAgIGVudCA9IG5ldyBDYXNjYWRl\nc0VudGl0eSAoKTsKICAgICAgICAgZW50LmdldE5vbmVDb2xsZWN0aW9uICgp\nLmFkZCAocmVsKTsKICAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgIGVt\nLnJlbW92ZSAocmVsKTsKICAgICAgICAgZW0ucGVyc2lzdCAoZW50KTsKICAg\nICAgICAgdHJ5CiAgICAgICAgIHsKICAgICAgICAgICAgIGVuZFR4KGVtKTsK\nICAgICAgICAgICAgIGZhaWwgKCJBbGxvd2VkIGZsdXNoIHdpdGggZGVsZXRl\nZCBvYmplY3QgaW4gbm9uLWNhc2NhZGUtcGVyc2lzdCAiCiAgICAgICAgICAg\nICAgICAgKyAicmVsYXRpb24gZmllbGQiKTsKICAgICAgICAgfQogICAgICAg\nICBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkKICAgICAgICAgewogICAg\nICAgICB9CiAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gcmUpCiAgICAgICAg\nIHsKICAgICAgICAgfQogICAgICAgICBhc3NlcnRUcnVlICghZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5pc0FjdGl2ZSAoKSk7CgogICAgICAgICBlbmRFbShlbSk7\nCiAgICAgfQoKCiAgICAgcHVibGljIHZvaWQgdGVzdENhc2NhZGVQZXJzaXN0\nRmx1c2hXaXRoRGVsZXRlZCAoKQogICAgIHsKICAgICAgICAgQ2FzY2FkZXNF\nbnRpdHkgcmVsID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdl\nciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgICBzdGFydFR4KGVt\nKTsKICAgICAgICAgZW0ucGVyc2lzdCAocmVsKTsKICAgICAgICAgZW5kVHgo\nZW0pOwogICAgICAgICBsb25nIGlkID0gcmVsLmdldElkICgpOwogICAgICAg\nICBlbmRFbShlbSk7CgogICAgICAgICBlbSA9IChPcGVuSlBBRW50aXR5TWFu\nYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgICByZWwgPSBl\nbS5maW5kIChDYXNjYWRlc0VudGl0eS5jbGFzcywgaWQpOwogICAgICAgICBh\nc3NlcnROb3ROdWxsIChyZWwpOwogICAgICAgICBDYXNjYWRlc0VudGl0eSBl\nbnQgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIGVudC5zZXRB\nbGwgKHJlbCk7CiAgICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbS5y\nZW1vdmUgKHJlbCk7CiAgICAgICAgIGVtLnBlcnNpc3QgKGVudCk7CiAgICAg\nICAgIGVuZFR4KGVtKTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAoIWVtLmdldFRy\nYW5zYWN0aW9uKCkuaXNBY3RpdmUgKCkpOwogICAgICAgICBlbmRFbShlbSk7\nCgogICAgICAgICBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgICByZWwgPSBlbS5maW5kIChDYXNj\nYWRlc0VudGl0eS5jbGFzcywgaWQpOwogICAgICAgICBhc3NlcnROb3ROdWxs\nIChyZWwpOwogICAgICAgICBlbnQgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7\nCiAgICAgICAgIGVudC5nZXRBbGxDb2xsZWN0aW9uICgpLmFkZCAocmVsKTsK\nICAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgIGVtLnJlbW92ZSAocmVs\nKTsKICAgICAgICAgZW0ucGVyc2lzdCAoZW50KTsKICAgICAgICAgZW5kVHgo\nZW0pOwogICAgICAgICBhc3NlcnRUcnVlICghZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5pc0FjdGl2ZSAoKSk7CgogICAgICAgICBlbmRFbShlbSk7CgogICAgICAg\nICBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFu\nYWdlcigpOwogICAgICAgICByZWwgPSBlbS5maW5kIChDYXNjYWRlc0VudGl0\neS5jbGFzcywgaWQpOwogICAgICAgICBhc3NlcnROb3ROdWxsIChyZWwpOwog\nICAgICAgICBlbmRFbShlbSk7CiAgICAgfQoKCiAgICAgcHVibGljIHZvaWQg\ndGVzdE5vQ2FzY2FkZVBlcnNpc3RGbHVzaFdpdGhUcmFuc2llbnRDYXVzZXNF\neGNlcHRpb24gKCkKICAgICB7CiAgICAgICAgIENhc2NhZGVzRW50aXR5IGVu\ndCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAgQ2FzY2FkZXNF\nbnRpdHkgcmVsID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAgICAgICBl\nbnQuc2V0Tm9uZSAocmVsKTsKCiAgICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbS5w\nZXJzaXN0IChlbnQpOwogICAgICAgICB0cnkKICAgICAgICAgewogICAgICAg\nICAgICAgZW5kVHgoZW0pOwogICAgICAgICAgICAgZmFpbCAoIkFsbG93ZWQg\nZmx1c2ggd2l0aCB0cmFuc2llbnQgb2JqZWN0IGluIG5vbi1jYXNjYWRlLXBl\ncnNpc3QgIgogICAgICAgICAgICAgICAgICsgInJlbGF0aW9uIGZpZWxkIik7\nCiAgICAgICAgIH0KICAgICAgICAgY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24g\ncmUpCiAgICAgICAgIHsKICAgICAgICAgfQogICAgICAgICBjYXRjaCAoRXhj\nZXB0aW9uIHJlKQogICAgICAgICB7CiAgICAgICAgIH0KCgogICAgICAgICBh\nc3NlcnRUcnVlICghZW0uZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSAoKSk7\nCiAgICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgIGVudCA9IG5ldyBDYXNj\nYWRlc0VudGl0eSAoKTsKICAgICAgICAgcmVsID0gbmV3IENhc2NhZGVzRW50\naXR5ICgpOwogICAgICAgICBlbnQuZ2V0Tm9uZUNvbGxlY3Rpb24gKCkuYWRk\nIChyZWwpOwoKICAgICAgICAgZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIp\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgc3RhcnRUeChlbSk7\nCiAgICAgICAgIGVtLnBlcnNpc3QgKGVudCk7CiAgICAgICAgIHRyeQogICAg\nICAgICB7CiAgICAgICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgICAgICBm\nYWlsICgiQWxsb3dlZCBmbHVzaCB3aXRoIHRyYW5zaWVudCBvYmplY3QgaW4g\nbm9uLWNhc2NhZGUtcGVyc2lzdCAiCiAgICAgICAgICAgICAgICAgKyAicmVs\nYXRpb24gZmllbGQiKTsKICAgICAgICAgfQogICAgICAgICBjYXRjaCAoUnVu\ndGltZUV4Y2VwdGlvbiByZSkKICAgICAgICAgewogICAgICAgICB9CiAgICAg\nICAgIGNhdGNoIChFeGNlcHRpb24gcmUpCiAgICAgICAgIHsKICAgICAgICAg\nfQogICAgICAgICBhc3NlcnRUcnVlICghZW0uZ2V0VHJhbnNhY3Rpb24oKS5p\nc0FjdGl2ZSAoKSk7CiAgICAgICAgIGVuZEVtKGVtKTsKICAgICB9CgoKICAg\nICBwdWJsaWMgdm9pZCB0ZXN0Tm9DYXNjYWRlUGVyc2lzdEZsdXNoV2l0aFBl\ncnNpc3RlbnQgKCkKICAgICB7CiAgICAgICAgIENhc2NhZGVzRW50aXR5IGVu\ndCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAgQ2FzY2FkZXNF\nbnRpdHkgcmVsID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAgICAgICBl\nbnQuc2V0Tm9uZSAocmVsKTsKCiAgICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbS5w\nZXJzaXN0IChlbnQpOwogICAgICAgICBhc3NlcnRGYWxzZShlbS5pc1BlcnNp\nc3RlbnQgKHJlbCkpOwogICAgICAgICBlbS5wZXJzaXN0IChyZWwpOwogICAg\nICAgICBlbmRUeChlbSk7CiAgICAgICAgIGxvbmcgaWQgPSByZWwuZ2V0SWQg\nKCk7CiAgICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgIGVudCA9IG5ldyBD\nYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAgcmVsID0gbmV3IENhc2NhZGVz\nRW50aXR5ICgpOwogICAgICAgICBlbnQuZ2V0Tm9uZUNvbGxlY3Rpb24gKCku\nYWRkIChyZWwpOwoKICAgICAgICAgZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFn\nZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgYXNzZXJ0Tm90\nTnVsbCAoZW0uZmluZCAoQ2FzY2FkZXNFbnRpdHkuY2xhc3MsIGlkKSk7CiAg\nICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbS5wZXJzaXN0IChlbnQp\nOwogICAgICAgICBhc3NlcnRGYWxzZSAoZW0uaXNQZXJzaXN0ZW50IChyZWwp\nKTsKICAgICAgICAgZW0ucGVyc2lzdCAocmVsKTsKICAgICAgICAgZW5kVHgo\nZW0pOwogICAgICAgICBpZCA9IHJlbC5nZXRJZCAoKTsKICAgICAgICAgZW5k\nRW0oZW0pOwoKICAgICAgICAgZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIp\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgYXNzZXJ0Tm90TnVs\nbCAoZW0uZmluZCAoQ2FzY2FkZXNFbnRpdHkuY2xhc3MsIGlkKSk7CiAgICAg\nICAgIGVuZEVtKGVtKTsKICAgICB9CgoKICAgICBwdWJsaWMgdm9pZCB0ZXN0\nQ2FzY2FkZVBlcnNpc3RGbHVzaFdpdGhUcmFuc2llbnQgKCkKICAgICB7CiAg\nICAgICAgIENhc2NhZGVzRW50aXR5IGVudCA9IG5ldyBDYXNjYWRlc0VudGl0\neSAoKTsKICAgICAgICAgQ2FzY2FkZXNFbnRpdHkgcmVsID0gbmV3IENhc2Nh\nZGVzRW50aXR5ICgpOwoKICAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\nZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgIGVtLnBlcnNp\nc3QgKGVudCk7CiAgICAgICAgIGVudC5zZXRBbGwgKHJlbCk7CiAgICAgICAg\nIGFzc2VydEZhbHNlIChlbS5pc1BlcnNpc3RlbnQgKHJlbCkpOwogICAgICAg\nICBlbmRUeChlbSk7CiAgICAgICAgIGxvbmcgaWQgPSByZWwuZ2V0SWQgKCk7\nCiAgICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgIGVudCA9IG5ldyBDYXNj\nYWRlc0VudGl0eSAoKTsKICAgICAgICAgcmVsID0gbmV3IENhc2NhZGVzRW50\naXR5ICgpOwoKICAgICAgICAgZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIp\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgYXNzZXJ0Tm90TnVs\nbCAoZW0uZmluZCAoQ2FzY2FkZXNFbnRpdHkuY2xhc3MsIGlkKSk7CiAgICAg\nICAgIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbS5wZXJzaXN0IChlbnQpOwog\nICAgICAgICBlbnQuZ2V0QWxsQ29sbGVjdGlvbiAoKS5hZGQgKHJlbCk7CiAg\nICAgICAgIGFzc2VydEZhbHNlIChlbS5pc1BlcnNpc3RlbnQgKHJlbCkpOwog\nICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgIGlkID0gcmVsLmdldElkICgp\nOwogICAgICAgICBlbmRFbShlbSk7CgogICAgICAgICBlbSA9IChPcGVuSlBB\nRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAg\nICBhc3NlcnROb3ROdWxsIChlbS5maW5kIChDYXNjYWRlc0VudGl0eS5jbGFz\ncywgaWQpKTsKICAgICAgICAgZW5kRW0oZW0pOwogICAgIH0KCgogICAgIHB1\nYmxpYyB2b2lkIHRlc3RDYXNjYWRlUGVyc2lzdEZsdXNoV2l0aFBlcnNpc3Rl\nbnQgKCkKICAgICB7CiAgICAgICAgIENhc2NhZGVzRW50aXR5IGVudCA9IG5l\ndyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAgQ2FzY2FkZXNFbnRpdHkg\ncmVsID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAgICAgICBlbnQuc2V0\nQWxsIChyZWwpOwoKICAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0g\nPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgIGVtLnBlcnNpc3Qg\nKGVudCk7CiAgICAgICAgIGFzc2VydFRydWUgKGVtLmlzUGVyc2lzdGVudCAo\ncmVsKSk7CiAgICAgICAgIGVuZFR4KGVtKTsKICAgICAgICAgbG9uZyBpZCA9\nIHJlbC5nZXRJZCAoKTsKICAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICAg\nZW50ID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAgICAgICByZWwgPSBu\nZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIGVudC5nZXRBbGxDb2xs\nZWN0aW9uICgpLmFkZCAocmVsKTsKCiAgICAgICAgIGVtID0gKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nIGFzc2VydE5vdE51bGwgKGVtLmZpbmQgKENhc2NhZGVzRW50aXR5LmNsYXNz\nLCBpZCkpOwogICAgICAgICBzdGFydFR4KGVtKTsKICAgICAgICAgZW0ucGVy\nc2lzdCAoZW50KTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAoZW0uaXNQZXJzaXN0\nZW50IChyZWwpKTsKICAgICAgICAgZW5kVHgoZW0pOwogICAgICAgICBpZCA9\nIHJlbC5nZXRJZCAoKTsKICAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICAg\nZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICAgYXNzZXJ0Tm90TnVsbCAoZW0uZmluZCAoQ2FzY2Fk\nZXNFbnRpdHkuY2xhc3MsIGlkKSk7CiAgICAgICAgIGVuZEVtKGVtKTsKICAg\nICB9CgoKICAgICBwdWJsaWMgdm9pZCB0ZXN0Q2FzY2FkZUNpcmNsZVRocm91\nZ2hQZXJzaXN0ZW50ICgpCiAgICAgewogICAgICAgICBDYXNjYWRlc0VudGl0\neSBlbnQgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgIHN0YXJ0VHgoZW0pOwog\nICAgICAgICBlbS5wZXJzaXN0IChlbnQpOwogICAgICAgICBlbmRUeChlbSk7\nCiAgICAgICAgIGxvbmcgaWQgPSBlbnQuZ2V0SWQgKCk7CiAgICAgICAgIGVu\nZEVtKGVtKTsKCiAgICAgICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgIGVudCA9IGVtLmZp\nbmQgKENhc2NhZGVzRW50aXR5LmNsYXNzLCBpZCk7CiAgICAgICAgIENhc2Nh\nZGVzRW50aXR5IHRvcCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAg\nICAgdG9wLnNldEFsbCAoZW50KTsKICAgICAgICAgQ2FzY2FkZXNFbnRpdHkg\ncmVsID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwoKICAgICAgICAgc3RhcnRU\neChlbSk7CiAgICAgICAgIGVudC5zZXRBbGwgKHJlbCk7CiAgICAgICAgIHJl\nbC5zZXRBbGwgKHRvcCk7CiAgICAgICAgIGVtLnBlcnNpc3QgKHRvcCk7CiAg\nICAgICAgIGFzc2VydFRydWUgKGVtLmlzUGVyc2lzdGVudCAodG9wKSk7CiAg\nICAgICAgIGFzc2VydFRydWUgKGVtLmlzUGVyc2lzdGVudCAoZW50KSk7CiAg\nICAgICAgIGFzc2VydFRydWUgKGVtLmlzUGVyc2lzdGVudCAocmVsKSk7CiAg\nICAgICAgIHJvbGxiYWNrVHgoZW0pOwogICAgICAgICBlbmRFbShlbSk7CiAg\nICAgfQoKCiAgICAgcHVibGljIHZvaWQgdGVzdE5vQ2FzY2FkZURlbGV0ZSAo\nKQogICAgIHsKICAgICAgICAgQ2FzY2FkZXNFbnRpdHkgZW50ID0gbmV3IENh\nc2NhZGVzRW50aXR5ICgpOwogICAgICAgICBDYXNjYWRlc0VudGl0eSByZWwg\nPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIENhc2NhZGVzRW50\naXR5IGRlcGVuZCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAg\nZW50LnNldE5vbmUgKHJlbCk7CiAgICAgICAgIGVudC5zZXREZXBlbmRlbnQg\nKGRlcGVuZCk7CiAgICAgICAgIGVudC5nZXROb25lQ29sbGVjdGlvbiAoKS5h\nZGQgKHJlbCk7CgogICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9\nIChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOwogICAgICAgICBzdGFydFR4KGVtKTsKICAgICAgICAgZW0ucGVyc2lzdEFs\nbCAoZW50LCByZWwsIGRlcGVuZCk7CiAgICAgICAgIGVuZFR4KGVtKTsKICAg\nICAgICAgbG9uZyBpZCA9IGVudC5nZXRJZCAoKTsKICAgICAgICAgbG9uZyBy\nZWxJZCA9IHJlbC5nZXRJZCAoKTsKICAgICAgICAgbG9uZyBkZXBlbmRJZCA9\nIGRlcGVuZC5nZXRJZCAoKTsKICAgICAgICAgZW5kRW0oZW0pOwoKICAgICAg\nICAgZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICAgZW50ID0gZW0uZmluZCAoQ2FzY2FkZXNFbnRp\ndHkuY2xhc3MsIGlkKTsKICAgICAgICAgcmVsID0gZW50LmdldE5vbmUgKCk7\nCiAgICAgICAgIGRlcGVuZCA9IGVudC5nZXREZXBlbmRlbnQgKCk7CiAgICAg\nICAgIGFzc2VydEVxdWFscyAocmVsSWQsIHJlbC5nZXRJZCAoKSk7CiAgICAg\nICAgIGFzc2VydEVxdWFscyAoZGVwZW5kSWQsIGRlcGVuZC5nZXRJZCAoKSk7\nCiAgICAgICAgIGFzc2VydEVxdWFscyAoMSwgZW50LmdldE5vbmVDb2xsZWN0\naW9uICgpLnNpemUgKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKHJlbElk\nLCBlbnQuZ2V0Tm9uZUNvbGxlY3Rpb24gKCkuaXRlcmF0b3IgKCkubmV4dCAo\nKS5nZXRJZCAoKSk7CgogICAgICAgICBzdGFydFR4KGVtKTsKICAgICAgICAg\nZW0ucmVtb3ZlIChlbnQpOwogICAgICAgICBhc3NlcnRUcnVlIChlbS5pc1Jl\nbW92ZWQgKGVudCkpOwogICAgICAgICBhc3NlcnRGYWxzZSAoZW0uaXNSZW1v\ndmVkIChyZWwpKTsKICAgICAgICAgYXNzZXJ0RmFsc2UgKGVtLmlzUmVtb3Zl\nZCAoZGVwZW5kKSk7CiAgICAgICAgIGVuZFR4KGVtKTsKICAgICAgICAgYXNz\nZXJ0RmFsc2UgKGVtLmlzUGVyc2lzdGVudCAoZW50KSk7CiAgICAgICAgIGFz\nc2VydFRydWUgKGVtLmlzUGVyc2lzdGVudCAocmVsKSk7CiAgICAgICAgIGFz\nc2VydEZhbHNlIChlbS5pc1BlcnNpc3RlbnQgKGRlcGVuZCkpOwogICAgICAg\nICBlbmRFbShlbSk7CgogICAgICAgICBlbSA9IChPcGVuSlBBRW50aXR5TWFu\nYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgICBhc3NlcnRO\ndWxsIChlbS5maW5kIChDYXNjYWRlc0VudGl0eS5jbGFzcywgaWQpKTsKICAg\nICAgICAgYXNzZXJ0Tm90TnVsbCAoZW0uZmluZCAoQ2FzY2FkZXNFbnRpdHku\nY2xhc3MsIHJlbElkKSk7CiAgICAgICAgIGFzc2VydE51bGwgKGVtLmZpbmQg\nKENhc2NhZGVzRW50aXR5LmNsYXNzLCBkZXBlbmRJZCkpOwogICAgICAgICBl\nbmRFbShlbSk7CiAgICAgfQoKCiAgICAgcHVibGljIHZvaWQgdGVzdERlZXBD\nYXNjYWRlRGVsZXRlICgpCiAgICAgewogICAgICAgICBDYXNjYWRlc0VudGl0\neSBlbnQgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIENhc2Nh\nZGVzRW50aXR5IHJlbDEgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAg\nICAgIENhc2NhZGVzRW50aXR5IHJlbDIgPSBuZXcgQ2FzY2FkZXNFbnRpdHkg\nKCk7CiAgICAgICAgIENhc2NhZGVzRW50aXR5IGRlcGVuZCA9IG5ldyBDYXNj\nYWRlc0VudGl0eSAoKTsKICAgICAgICAgQ2FzY2FkZXNFbnRpdHkgZGVlcDEg\nPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIENhc2NhZGVzRW50\naXR5IGRlZXAyID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAgICAgICBD\nYXNjYWRlc0VudGl0eSBkZWVwMyA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsK\nICAgICAgICAgZW50LnNldEFsbCAocmVsMSk7CiAgICAgICAgIHJlbDEuc2V0\nQWxsIChkZWVwMSk7CiAgICAgICAgIGVudC5nZXRBbGxDb2xsZWN0aW9uICgp\nLmFkZCAocmVsMik7CiAgICAgICAgIHJlbDIuZ2V0QWxsQ29sbGVjdGlvbiAo\nKS5hZGQgKGRlZXAyKTsKICAgICAgICAgZW50LnNldERlcGVuZGVudCAoZGVw\nZW5kKTsKICAgICAgICAgZGVwZW5kLnNldEFsbCAoZGVlcDMpOwoKICAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSAoT3BlbkpQQUVudGl0eU1h\nbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgc3RhcnRU\neChlbSk7CiAgICAgICAgIGVtLnBlcnNpc3RBbGwgKGVudCwgZGVwZW5kKTsK\nICAgICAgICAgZW5kVHgoZW0pOwogICAgICAgICBsb25nIGlkID0gZW50Lmdl\ndElkICgpOwogICAgICAgICBsb25nIHJlbDFJZCA9IHJlbDEuZ2V0SWQgKCk7\nCiAgICAgICAgIGxvbmcgcmVsMklkID0gcmVsMi5nZXRJZCAoKTsKICAgICAg\nICAgbG9uZyBkZWVwMUlkID0gZGVlcDEuZ2V0SWQgKCk7CiAgICAgICAgIGxv\nbmcgZGVlcDJJZCA9IGRlZXAyLmdldElkICgpOwogICAgICAgICBsb25nIGRl\nZXAzSWQgPSBkZWVwMy5nZXRJZCAoKTsKICAgICAgICAgbG9uZyBkZXBlbmRJ\nZCA9IGRlcGVuZC5nZXRJZCAoKTsKICAgICAgICAgZW5kRW0oZW0pOwoKICAg\nICAgICAgZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKICAgICAgICAgZW50ID0gZW0uZmluZCAoQ2FzY2FkZXNF\nbnRpdHkuY2xhc3MsIGlkKTsKICAgICAgICAgcmVsMSA9IGVudC5nZXRBbGwg\nKCk7CiAgICAgICAgIGFzc2VydEVxdWFscyAocmVsMUlkLCByZWwxLmdldElk\nICgpKTsKICAgICAgICAgZGVlcDEgPSByZWwxLmdldEFsbCAoKTsKICAgICAg\nICAgYXNzZXJ0RXF1YWxzIChkZWVwMUlkLCBkZWVwMS5nZXRJZCAoKSk7CiAg\nICAgICAgIGFzc2VydEVxdWFscyAoMSwgZW50LmdldEFsbENvbGxlY3Rpb24g\nKCkuc2l6ZSAoKSk7CiAgICAgICAgIHJlbDIgPSBlbnQuZ2V0QWxsQ29sbGVj\ndGlvbiAoKS5pdGVyYXRvciAoKS5uZXh0ICgpOwogICAgICAgICBhc3NlcnRF\ncXVhbHMgKHJlbDJJZCwgcmVsMi5nZXRJZCAoKSk7CiAgICAgICAgIGFzc2Vy\ndEVxdWFscyAoMSwgcmVsMi5nZXRBbGxDb2xsZWN0aW9uICgpLnNpemUgKCkp\nOwogICAgICAgICBkZWVwMiA9IHJlbDIuZ2V0QWxsQ29sbGVjdGlvbiAoKS5p\ndGVyYXRvciAoKS5uZXh0ICgpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKGRl\nZXAySWQsIGRlZXAyLmdldElkICgpKTsKICAgICAgICAgZGVwZW5kID0gZW50\nLmdldERlcGVuZGVudCAoKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzIChkZXBl\nbmRJZCwgZGVwZW5kLmdldElkICgpKTsKICAgICAgICAgZGVlcDMgPSBkZXBl\nbmQuZ2V0QWxsICgpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKGRlZXAzSWQs\nIGRlZXAzLmdldElkICgpKTsKCiAgICAgICAgIHN0YXJ0VHgoZW0pOwogICAg\nICAgICBlbS5yZW1vdmUgKGVudCk7CiAgICAgICAgIGFzc2VydFRydWUgKGVt\nLmlzUmVtb3ZlZCAoZW50KSk7CiAgICAgICAgIGFzc2VydFRydWUgKGVtLmlz\nUmVtb3ZlZCAocmVsMSkpOwogICAgICAgICBhc3NlcnRUcnVlIChlbS5pc1Jl\nbW92ZWQgKHJlbDIpKTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAoZW0uaXNSZW1v\ndmVkIChkZWVwMSkpOwogICAgICAgICBhc3NlcnRUcnVlIChlbS5pc1JlbW92\nZWQgKGRlZXAyKSk7CiAgICAgICAgIGFzc2VydEZhbHNlIChlbS5pc1JlbW92\nZWQgKGRlcGVuZCkpOwogICAgICAgICBhc3NlcnRGYWxzZSAoZW0uaXNSZW1v\ndmVkIChkZWVwMykpOwogICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgIGFz\nc2VydEZhbHNlIChlbS5pc1BlcnNpc3RlbnQgKGVudCkpOwogICAgICAgICBh\nc3NlcnRGYWxzZSAoZW0uaXNQZXJzaXN0ZW50IChyZWwxKSk7CiAgICAgICAg\nIGFzc2VydEZhbHNlIChlbS5pc1BlcnNpc3RlbnQgKHJlbDIpKTsKICAgICAg\nICAgYXNzZXJ0RmFsc2UgKGVtLmlzUGVyc2lzdGVudCAoZGVlcDEpKTsKICAg\nICAgICAgYXNzZXJ0RmFsc2UgKGVtLmlzUGVyc2lzdGVudCAoZGVwZW5kKSk7\nCiAgICAgICAgIGFzc2VydEZhbHNlIChlbS5pc1BlcnNpc3RlbnQgKGRlZXAy\nKSk7CiAgICAgICAgIGFzc2VydEZhbHNlKGVtLmlzUGVyc2lzdGVudCAoZGVl\ncDMpKTsKICAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICAgZW0gPSAoT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICAgYXNzZXJ0TnVsbCAoZW0uZmluZCAoQ2FzY2FkZXNFbnRpdHkuY2xh\nc3MsIGlkKSk7CiAgICAgICAgIGFzc2VydE51bGwgKGVtLmZpbmQgKENhc2Nh\nZGVzRW50aXR5LmNsYXNzLCByZWwxSWQpKTsKICAgICAgICAgYXNzZXJ0TnVs\nbCAoZW0uZmluZCAoQ2FzY2FkZXNFbnRpdHkuY2xhc3MsIHJlbDJJZCkpOwog\nICAgICAgICBhc3NlcnROdWxsIChlbS5maW5kIChDYXNjYWRlc0VudGl0eS5j\nbGFzcywgZGVlcDFJZCkpOwogICAgICAgICBhc3NlcnROdWxsIChlbS5maW5k\nIChDYXNjYWRlc0VudGl0eS5jbGFzcywgZGVlcDJJZCkpOwogICAgICAgICBh\nc3NlcnROdWxsIChlbS5maW5kIChDYXNjYWRlc0VudGl0eS5jbGFzcywgZGVl\ncDNJZCkpOwogICAgICAgICBhc3NlcnROdWxsIChlbS5maW5kIChDYXNjYWRl\nc0VudGl0eS5jbGFzcywgZGVwZW5kSWQpKTsKICAgICAgICAgZW5kRW0oZW0p\nOwogICAgIH0KCgogICAgIHB1YmxpYyB2b2lkIHRlc3RDaXJjdWxhckNhc2Nh\nZGVEZWxldGUgKCkKICAgICB7CiAgICAgICAgIENhc2NhZGVzRW50aXR5IGVu\ndCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAgQ2FzY2FkZXNF\nbnRpdHkgcmVsID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAgICAgICBl\nbnQuc2V0QWxsIChyZWwpOwogICAgICAgICBlbnQuZ2V0QWxsQ29sbGVjdGlv\nbiAoKS5hZGQgKHJlbCk7CiAgICAgICAgIHJlbC5zZXRBbGwgKGVudCk7CiAg\nICAgICAgIHJlbC5nZXRBbGxDb2xsZWN0aW9uICgpLmFkZCAoZW50KTsKCiAg\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgIHN0\nYXJ0VHgoZW0pOwogICAgICAgICBlbS5wZXJzaXN0IChlbnQpOwogICAgICAg\nICBlbmRUeChlbSk7CiAgICAgICAgIGxvbmcgaWQgPSBlbnQuZ2V0SWQgKCk7\nCiAgICAgICAgIGxvbmcgcmVsSWQgPSByZWwuZ2V0SWQgKCk7CiAgICAgICAg\nIGVuZEVtKGVtKTsKCiAgICAgICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgIGVudCA9IGVt\nLmZpbmQgKENhc2NhZGVzRW50aXR5LmNsYXNzLCBpZCk7CiAgICAgICAgIHJl\nbCA9IGVudC5nZXRBbGwgKCk7CiAgICAgICAgIGFzc2VydEVxdWFscyAocmVs\nSWQsIHJlbC5nZXRJZCAoKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAocmVs\nLCBlbnQuZ2V0QWxsQ29sbGVjdGlvbiAoKS5pdGVyYXRvciAoKS5uZXh0ICgp\nKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzIChlbnQsIHJlbC5nZXRBbGxDb2xs\nZWN0aW9uICgpLml0ZXJhdG9yICgpLm5leHQgKCkpOwoKICAgICAgICAgc3Rh\ncnRUeChlbSk7CiAgICAgICAgIGVtLnJlbW92ZSAoZW50KTsKICAgICAgICAg\nYXNzZXJ0VHJ1ZSAoZW0uaXNSZW1vdmVkIChlbnQpKTsKICAgICAgICAgYXNz\nZXJ0VHJ1ZSAoZW0uaXNSZW1vdmVkIChyZWwpKTsKICAgICAgICAgZW5kVHgo\nZW0pOwogICAgICAgICBhc3NlcnRGYWxzZSAoZW0uaXNQZXJzaXN0ZW50IChl\nbnQpKTsKICAgICAgICAgYXNzZXJ0RmFsc2UgKGVtLmlzUGVyc2lzdGVudCAo\ncmVsKSk7CiAgICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAgIGVtID0gKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgIGFzc2VydE51bGwgKGVtLmZpbmQgKENhc2NhZGVzRW50aXR5LmNs\nYXNzLCBpZCkpOwogICAgICAgICBhc3NlcnROdWxsIChlbS5maW5kIChDYXNj\nYWRlc0VudGl0eS5jbGFzcywgcmVsSWQpKTsKICAgICAgICAgZW5kRW0oZW0p\nOwogICAgIH0KCgogICAgIHB1YmxpYyB2b2lkIHRlc3ROb0Nhc2NhZGVSZWZy\nZXNoICgpCiAgICAgewogICAgICAgICBDYXNjYWRlc0VudGl0eSBlbnQgPSBu\nZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIENhc2NhZGVzRW50aXR5\nIHJlbCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAgZW50LnNl\ndE5vbmUgKHJlbCk7CiAgICAgICAgIGVudC5nZXROb25lQ29sbGVjdGlvbiAo\nKS5hZGQgKHJlbCk7CgogICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBl\nbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdl\ncigpOwogICAgICAgICBzdGFydFR4KGVtKTsKICAgICAgICAgZW0ucGVyc2lz\ndEFsbCAoZW50LCByZWwpOwogICAgICAgICBlbmRUeChlbSk7CiAgICAgICAg\nIGxvbmcgaWQgPSBlbnQuZ2V0SWQgKCk7CiAgICAgICAgIGxvbmcgcmVsSWQg\nPSByZWwuZ2V0SWQgKCk7CiAgICAgICAgIGVuZEVtKGVtKTsKCiAgICAgICAg\nIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgIGVudCA9IGVtLmZpbmQgKENhc2NhZGVzRW50aXR5\nLmNsYXNzLCBpZCk7CiAgICAgICAgIHJlbCA9IGVudC5nZXROb25lICgpOwog\nICAgICAgICBhc3NlcnRFcXVhbHMgKHJlbElkLCByZWwuZ2V0SWQgKCkpOwoK\nICAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgIGFzc2VydE51bGwgKGVu\ndC5nZXREZXBlbmRlbnQgKCkpOwogICAgICAgICBhc3NlcnROdWxsIChyZWwu\nZ2V0RGVwZW5kZW50ICgpKTsKICAgICAgICAgZW50LnNldERlcGVuZGVudCAo\nbmV3IENhc2NhZGVzRW50aXR5ICgpKTsKICAgICAgICAgcmVsLnNldERlcGVu\nZGVudCAobmV3IENhc2NhZGVzRW50aXR5ICgpKTsKICAgICAgICAgZW0ucGVy\nc2lzdCAoZW50LmdldERlcGVuZGVudCAoKSk7CiAgICAgICAgIGVtLnBlcnNp\nc3QgKHJlbC5nZXREZXBlbmRlbnQgKCkpOwogICAgICAgICBlbS5yZWZyZXNo\nIChlbnQpOwogICAgICAgICBhc3NlcnROdWxsIChlbnQuZ2V0RGVwZW5kZW50\nICgpKTsKICAgICAgICAgYXNzZXJ0Tm90TnVsbCAocmVsLmdldERlcGVuZGVu\ndCAoKSk7CiAgICAgICAgIGVuZFR4KGVtKTsKICAgICAgICAgZW5kRW0oZW0p\nOwoKICAgICAgICAgZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgYXNzZXJ0TnVsbCAoZW0uZmlu\nZCAoQ2FzY2FkZXNFbnRpdHkuY2xhc3MsIGlkKS5nZXREZXBlbmRlbnQgKCkp\nOwogICAgICAgICBhc3NlcnROb3ROdWxsIChlbS5maW5kIChDYXNjYWRlc0Vu\ndGl0eS5jbGFzcywgcmVsSWQpLmdldERlcGVuZGVudCAoKSk7CiAgICAgICAg\nIGVuZEVtKGVtKTsKICAgICB9CgoKICAgICBwdWJsaWMgdm9pZCB0ZXN0Q2ly\nY3VsYXJDYXNjYWRlUmVmcmVzaCAoKQogICAgIHsKICAgICAgICAgQ2FzY2Fk\nZXNFbnRpdHkgZW50ID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAgICAg\nICBDYXNjYWRlc0VudGl0eSByZWwgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7\nCiAgICAgICAgIGVudC5zZXRBbGwgKHJlbCk7CiAgICAgICAgIHJlbC5zZXRB\nbGwgKGVudCk7CgogICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9\nIChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOwogICAgICAgICBzdGFydFR4KGVtKTsKICAgICAgICAgZW0ucGVyc2lzdCAo\nZW50KTsKICAgICAgICAgZW5kVHgoZW0pOwogICAgICAgICBsb25nIGlkID0g\nZW50LmdldElkICgpOwogICAgICAgICBsb25nIHJlbElkID0gcmVsLmdldElk\nICgpOwogICAgICAgICBlbmRFbShlbSk7CgogICAgICAgICBlbSA9IChPcGVu\nSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAg\nICAgICBlbnQgPSBlbS5maW5kIChDYXNjYWRlc0VudGl0eS5jbGFzcywgaWQp\nOwogICAgICAgICByZWwgPSBlbnQuZ2V0QWxsICgpOwogICAgICAgICBhc3Nl\ncnRFcXVhbHMgKHJlbElkLCByZWwuZ2V0SWQgKCkpOwogICAgICAgICBhc3Nl\ncnRFcXVhbHMgKGVudCwgcmVsLmdldEFsbCAoKSk7CgogICAgICAgICBzdGFy\ndFR4KGVtKTsKICAgICAgICAgYXNzZXJ0TnVsbCAoZW50LmdldERlcGVuZGVu\ndCAoKSk7CiAgICAgICAgIGFzc2VydE51bGwgKHJlbC5nZXREZXBlbmRlbnQg\nKCkpOwogICAgICAgICBlbnQuc2V0RGVwZW5kZW50IChuZXcgQ2FzY2FkZXNF\nbnRpdHkgKCkpOwogICAgICAgICByZWwuc2V0RGVwZW5kZW50IChuZXcgQ2Fz\nY2FkZXNFbnRpdHkgKCkpOwogICAgICAgICBlbS5wZXJzaXN0IChlbnQuZ2V0\nRGVwZW5kZW50ICgpKTsKICAgICAgICAgZW0ucGVyc2lzdCAocmVsLmdldERl\ncGVuZGVudCAoKSk7CiAgICAgICAgIGVtLnJlZnJlc2ggKGVudCk7CiAgICAg\nICAgIGFzc2VydE51bGwgKGVudC5nZXREZXBlbmRlbnQgKCkpOwogICAgICAg\nICBhc3NlcnROdWxsIChyZWwuZ2V0RGVwZW5kZW50ICgpKTsKICAgICAgICAg\nZW5kVHgoZW0pOwogICAgICAgICBlbmRFbShlbSk7CgogICAgICAgICBlbSA9\nIChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOwogICAgICAgICBlbnQgPSBlbS5maW5kIChDYXNjYWRlc0VudGl0eS5jbGFz\ncywgaWQpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKHJlbElkLCBlbnQuZ2V0\nQWxsICgpLmdldElkICgpKTsKICAgICAgICAgYXNzZXJ0TnVsbCAoZW50Lmdl\ndERlcGVuZGVudCAoKSk7CiAgICAgICAgIGFzc2VydE51bGwgKGVtLmZpbmQg\nKENhc2NhZGVzRW50aXR5LmNsYXNzLCByZWxJZCkuZ2V0RGVwZW5kZW50ICgp\nKTsKICAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICAgZW50ID0gbmV3IENh\nc2NhZGVzRW50aXR5ICgpOwogICAgICAgICByZWwgPSBuZXcgQ2FzY2FkZXNF\nbnRpdHkgKCk7CiAgICAgICAgIENhc2NhZGVzRW50aXR5IGRlZXAgPSBuZXcg\nQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIGVudC5nZXRBbGxDb2xsZWN0\naW9uICgpLmFkZCAocmVsKTsKICAgICAgICAgcmVsLmdldEFsbENvbGxlY3Rp\nb24gKCkuYWRkIChlbnQpOwogICAgICAgICByZWwuZ2V0QWxsQ29sbGVjdGlv\nbiAoKS5hZGQgKGRlZXApOwoKICAgICAgICAgZW0gPSAoT3BlbkpQQUVudGl0\neU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgc3Rh\ncnRUeChlbSk7CiAgICAgICAgIGVtLnBlcnNpc3QgKGVudCk7CiAgICAgICAg\nIGVuZFR4KGVtKTsKICAgICAgICAgaWQgPSBlbnQuZ2V0SWQgKCk7CiAgICAg\nICAgIHJlbElkID0gcmVsLmdldElkICgpOwogICAgICAgICBsb25nIGRlZXBJ\nZCA9IGRlZXAuZ2V0SWQgKCk7CiAgICAgICAgIGVuZEVtKGVtKTsKCiAgICAg\nICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgIGVudCA9IGVtLmZpbmQgKENhc2NhZGVzRW50\naXR5LmNsYXNzLCBpZCk7CiAgICAgICAgIHJlbCA9IGVudC5nZXRBbGxDb2xs\nZWN0aW9uICgpLml0ZXJhdG9yICgpLm5leHQgKCk7CiAgICAgICAgIGFzc2Vy\ndEVxdWFscyAocmVsSWQsIHJlbC5nZXRJZCAoKSk7CiAgICAgICAgIGFzc2Vy\ndEVxdWFscyAoMiwgcmVsLmdldEFsbENvbGxlY3Rpb24gKCkuc2l6ZSAoKSk7\nCiAgICAgICAgIGRlZXAgPSBudWxsOwogICAgICAgICBmb3IgKENhc2NhZGVz\nRW50aXR5IGVsZW0gOiByZWwuZ2V0QWxsQ29sbGVjdGlvbiAoKSkKICAgICAg\nICAgICAgIGlmIChlbGVtICE9IGVudCkKICAgICAgICAgICAgICAgICBkZWVw\nID0gZWxlbTsKICAgICAgICAgYXNzZXJ0RXF1YWxzIChkZWVwSWQsIGRlZXAu\nZ2V0SWQgKCkpOwoKICAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgIGFz\nc2VydE51bGwgKGVudC5nZXREZXBlbmRlbnQgKCkpOwogICAgICAgICBhc3Nl\ncnROdWxsIChyZWwuZ2V0RGVwZW5kZW50ICgpKTsKICAgICAgICAgYXNzZXJ0\nTnVsbCAoZGVlcC5nZXREZXBlbmRlbnQgKCkpOwogICAgICAgICBlbnQuc2V0\nRGVwZW5kZW50IChuZXcgQ2FzY2FkZXNFbnRpdHkgKCkpOwogICAgICAgICBl\nbnQuZ2V0QWxsQ29sbGVjdGlvbiAoKS5hZGQgKG5ldyBDYXNjYWRlc0VudGl0\neSAoKSk7CiAgICAgICAgIHJlbC5zZXREZXBlbmRlbnQgKG5ldyBDYXNjYWRl\nc0VudGl0eSAoKSk7CiAgICAgICAgIGRlZXAuc2V0RGVwZW5kZW50IChuZXcg\nQ2FzY2FkZXNFbnRpdHkgKCkpOwogICAgICAgICBlbS5wZXJzaXN0QWxsIChl\nbnQuZ2V0QWxsQ29sbGVjdGlvbiAoKSk7CiAgICAgICAgIGVtLnBlcnNpc3Qg\nKGVudC5nZXREZXBlbmRlbnQgKCkpOwogICAgICAgICBlbS5wZXJzaXN0IChy\nZWwuZ2V0RGVwZW5kZW50ICgpKTsKICAgICAgICAgZW0ucGVyc2lzdCAoZGVl\ncC5nZXREZXBlbmRlbnQgKCkpOwogICAgICAgICBlbS5yZWZyZXNoIChlbnQp\nOwogICAgICAgICBhc3NlcnROdWxsIChlbnQuZ2V0RGVwZW5kZW50ICgpKTsK\nICAgICAgICAgYXNzZXJ0RXF1YWxzICgxLCBlbnQuZ2V0QWxsQ29sbGVjdGlv\nbiAoKS5zaXplICgpKTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAoZW50LmdldEFs\nbENvbGxlY3Rpb24gKCkuY29udGFpbnMgKHJlbCkpOwogICAgICAgICBhc3Nl\ncnROdWxsIChyZWwuZ2V0RGVwZW5kZW50ICgpKTsKICAgICAgICAgYXNzZXJ0\nRXF1YWxzICgyLCByZWwuZ2V0QWxsQ29sbGVjdGlvbiAoKS5zaXplICgpKTsK\nICAgICAgICAgYXNzZXJ0VHJ1ZSAocmVsLmdldEFsbENvbGxlY3Rpb24gKCku\nY29udGFpbnMgKGVudCkpOwogICAgICAgICBhc3NlcnRUcnVlIChyZWwuZ2V0\nQWxsQ29sbGVjdGlvbiAoKS5jb250YWlucyAoZGVlcCkpOwogICAgICAgICBh\nc3NlcnROdWxsIChkZWVwLmdldERlcGVuZGVudCAoKSk7CiAgICAgICAgIGVu\nZFR4KGVtKTsKICAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICAgZW0gPSAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICAgZW50ID0gZW0uZmluZCAoQ2FzY2FkZXNFbnRpdHkuY2xhc3Ms\nIGlkKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzICgxLCBlbnQuZ2V0QWxsQ29s\nbGVjdGlvbiAoKS5zaXplICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzIChy\nZWxJZCwgZW50LmdldEFsbENvbGxlY3Rpb24gKCkuaXRlcmF0b3IgKCkubmV4\ndCAoKS4KICAgICAgICAgICAgIGdldElkICgpKTsKICAgICAgICAgYXNzZXJ0\nTnVsbCAoZW50LmdldERlcGVuZGVudCAoKSk7CiAgICAgICAgIGFzc2VydE51\nbGwgKGVtLmZpbmQgKENhc2NhZGVzRW50aXR5LmNsYXNzLCByZWxJZCkuZ2V0\nRGVwZW5kZW50ICgpKTsKICAgICAgICAgYXNzZXJ0TnVsbCAoZW0uZmluZCAo\nQ2FzY2FkZXNFbnRpdHkuY2xhc3MsIGRlZXBJZCkuZ2V0RGVwZW5kZW50ICgp\nKTsKICAgICAgICAgZW5kRW0oZW0pOwogICAgIH0KCgogICAgIHB1YmxpYyB2\nb2lkIHRlc3ROb0Nhc2NhZGVBdHRhY2hDbGVhbiAoKQogICAgIHsKICAgICAg\nICAgQ2FzY2FkZXNFbnRpdHkgZW50ID0gbmV3IENhc2NhZGVzRW50aXR5ICgp\nOwogICAgICAgICBDYXNjYWRlc0VudGl0eSByZWwgPSBuZXcgQ2FzY2FkZXNF\nbnRpdHkgKCk7CiAgICAgICAgIGVudC5zZXROYW1lICgiZW50Iik7CiAgICAg\nICAgIHJlbC5zZXROYW1lICgicmVsIik7CiAgICAgICAgIGVudC5zZXROb25l\nIChyZWwpOwogICAgICAgICBlbnQuZ2V0Tm9uZUNvbGxlY3Rpb24gKCkuYWRk\nIChyZWwpOwoKICAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgIGVtLnBlcnNpc3RBbGwg\nKGVudCwgcmVsKTsKICAgICAgICAgZW5kVHgoZW0pOwogICAgICAgICBsb25n\nIGlkID0gZW50LmdldElkICgpOwogICAgICAgICBsb25nIHJlbElkID0gcmVs\nLmdldElkICgpOwogICAgICAgICBlbmRFbShlbSk7CgogICAgICAgICBhc3Nl\ncnRFcXVhbHMgKCJlbnQiLCBlbnQuZ2V0TmFtZSAoKSk7CiAgICAgICAgIGFz\nc2VydEVxdWFscyAoInJlbCIsIHJlbC5nZXROYW1lICgpKTsKICAgICAgICAg\nYXNzZXJ0RXF1YWxzIChyZWwsIGVudC5nZXROb25lICgpKTsKICAgICAgICAg\nYXNzZXJ0RXF1YWxzIChyZWwsIGVudC5nZXROb25lQ29sbGVjdGlvbiAoKS5p\ndGVyYXRvciAoKS5uZXh0ICgpKTsKCiAgICAgICAgIGVtID0gKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbnQgPSBlbS5tZXJnZSAoZW50KTsK\nICAgICAgICAgYXNzZXJ0VHJ1ZSAoIWVtLmlzRGlydHkgKGVudCkpOwogICAg\nICAgICBhc3NlcnRFcXVhbHMgKCJlbnQiLCBlbnQuZ2V0TmFtZSAoKSk7CiAg\nICAgICAgIGFzc2VydEVxdWFscyAoaWQsIGVudC5nZXRJZCAoKSk7CiAgICAg\nICAgIGFzc2VydFRydWUgKGVudC5nZXROb25lICgpICE9IHJlbCk7CiAgICAg\nICAgIHJlbCA9IGVudC5nZXROb25lICgpOwogICAgICAgICBhc3NlcnROb3RO\ndWxsIChyZWwpOwogICAgICAgICBhc3NlcnRUcnVlICghZW0uaXNEaXJ0eSAo\ncmVsKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAoMSwgZW50LmdldE5vbmVD\nb2xsZWN0aW9uICgpLnNpemUgKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMg\nKHJlbCwgZW50LmdldE5vbmVDb2xsZWN0aW9uICgpLml0ZXJhdG9yICgpLm5l\neHQgKCkpOwoKICAgICAgICAgYXNzZXJ0VHJ1ZSAoZW0uaXNQZXJzaXN0ZW50\nIChyZWwpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzIChyZWxJZCwgcmVsLmdl\ndElkICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzICgicmVsIiwgcmVsLmdl\ndE5hbWUgKCkpOwogICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgIGVuZEVt\nKGVtKTsKICAgICB9CgoKICAgICBwdWJsaWMgdm9pZCB0ZXN0Q2FzY2FkZUF0\ndGFjaENsZWFuICgpCiAgICAgewogICAgICAgICBDYXNjYWRlc0VudGl0eSBl\nbnQgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIENhc2NhZGVz\nRW50aXR5IHJlbDEgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAg\nIENhc2NhZGVzRW50aXR5IHJlbDIgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7\nCiAgICAgICAgIGVudC5zZXROYW1lICgiZW50Iik7CiAgICAgICAgIHJlbDEu\nc2V0TmFtZSAoInJlbDEiKTsKICAgICAgICAgZW50LnNldEFsbCAocmVsMSk7\nCiAgICAgICAgIHJlbDIuc2V0TmFtZSAoInJlbDIiKTsKICAgICAgICAgZW50\nLmdldEFsbENvbGxlY3Rpb24gKCkuYWRkIChyZWwyKTsKCiAgICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgIHN0YXJ0VHgoZW0p\nOwogICAgICAgICBlbS5wZXJzaXN0IChlbnQpOwogICAgICAgICBlbmRUeChl\nbSk7CiAgICAgICAgIGxvbmcgaWQgPSBlbnQuZ2V0SWQgKCk7CiAgICAgICAg\nIGxvbmcgcmVsMUlkID0gcmVsMS5nZXRJZCAoKTsKICAgICAgICAgbG9uZyBy\nZWwySWQgPSByZWwyLmdldElkICgpOwogICAgICAgICBlbmRFbShlbSk7Cgog\nICAgICAgICBhc3NlcnRFcXVhbHMgKCJlbnQiLCBlbnQuZ2V0TmFtZSAoKSk7\nCiAgICAgICAgIGFzc2VydEVxdWFscyAoInJlbDEiLCByZWwxLmdldE5hbWUg\nKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKCJyZWwyIiwgcmVsMi5nZXRO\nYW1lICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzIChyZWwxLCBlbnQuZ2V0\nQWxsICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzIChyZWwyLCBlbnQuZ2V0\nQWxsQ29sbGVjdGlvbiAoKS5pdGVyYXRvciAoKS5uZXh0ICgpKTsKCiAgICAg\nICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbnQg\nPSBlbS5tZXJnZSAoZW50KTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAoIWVtLmlz\nRGlydHkgKGVudCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKCJlbnQiLCBl\nbnQuZ2V0TmFtZSAoKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAoaWQsIGVu\ndC5nZXRJZCAoKSk7CiAgICAgICAgIGFzc2VydFRydWUgKHJlbDEgIT0gZW50\nLmdldEFsbCAoKSk7CiAgICAgICAgIHJlbDEgPSBlbnQuZ2V0QWxsICgpOwog\nICAgICAgICBhc3NlcnRUcnVlICghZW0uaXNEaXJ0eSAocmVsMSkpOwogICAg\nICAgICBhc3NlcnRFcXVhbHMgKDEsIGVudC5nZXRBbGxDb2xsZWN0aW9uICgp\nLnNpemUgKCkpOwogICAgICAgICByZWwyID0gZW50LmdldEFsbENvbGxlY3Rp\nb24gKCkuaXRlcmF0b3IgKCkubmV4dCAoKTsKICAgICAgICAgYXNzZXJ0VHJ1\nZSAoIWVtLmlzRGlydHkgKHJlbDIpKTsKCiAgICAgICAgIGFzc2VydFRydWUg\nKGVtLmlzUGVyc2lzdGVudCAocmVsMSkpOwogICAgICAgICBhc3NlcnRFcXVh\nbHMgKHJlbDFJZCwgcmVsMS5nZXRJZCAoKSk7CiAgICAgICAgIGFzc2VydEVx\ndWFscyAoInJlbDEiLCByZWwxLmdldE5hbWUgKCkpOwogICAgICAgICBhc3Nl\ncnRUcnVlIChlbS5pc1BlcnNpc3RlbnQgKHJlbDIpKTsKICAgICAgICAgYXNz\nZXJ0RXF1YWxzIChyZWwySWQsIHJlbDIuZ2V0SWQgKCkpOwogICAgICAgICBh\nc3NlcnRFcXVhbHMgKCJyZWwyIiwgcmVsMi5nZXROYW1lICgpKTsKICAgICAg\nICAgZW5kVHgoZW0pOwogICAgICAgICBlbmRFbShlbSk7CiAgICAgfQoKCiAg\nICAgcHVibGljIHZvaWQgdGVzdE5vQ2FzY2FkZUF0dGFjaERpcnR5RmllbGRz\nICgpCiAgICAgewogICAgICAgICBDYXNjYWRlc0VudGl0eSBlbnQgPSBuZXcg\nQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIENhc2NhZGVzRW50aXR5IHJl\nbCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAgZW50LnNldE5h\nbWUgKCJlbnQiKTsKICAgICAgICAgcmVsLnNldE5hbWUgKCJyZWwiKTsKICAg\nICAgICAgZW50LnNldE5vbmUgKHJlbCk7CiAgICAgICAgIGVudC5nZXROb25l\nQ29sbGVjdGlvbiAoKS5hZGQgKHJlbCk7CgogICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgICBzdGFydFR4KGVtKTsKICAgICAg\nICAgZW0ucGVyc2lzdEFsbCAoZW50LCByZWwpOwogICAgICAgICBlbmRUeChl\nbSk7CiAgICAgICAgIGxvbmcgaWQgPSBlbnQuZ2V0SWQgKCk7CiAgICAgICAg\nIGxvbmcgcmVsSWQgPSByZWwuZ2V0SWQgKCk7CiAgICAgICAgIGVuZEVtKGVt\nKTsKCiAgICAgICAgIGFzc2VydEVxdWFscyAoImVudCIsIGVudC5nZXROYW1l\nICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzICgicmVsIiwgcmVsLmdldE5h\nbWUgKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKHJlbCwgZW50LmdldE5v\nbmUgKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKHJlbCwgZW50LmdldE5v\nbmVDb2xsZWN0aW9uICgpLml0ZXJhdG9yICgpLm5leHQgKCkpOwogICAgICAg\nICByZWwuc2V0TmFtZSAoImZvbyIpOwoKICAgICAgICAgZW0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICAgc3RhcnRUeChlbSk7CiAgICAgICAgIGVudCA9IGVtLm1lcmdlIChlbnQp\nOwogICAgICAgICBhc3NlcnRUcnVlICghZW0uaXNEaXJ0eSAoZW50KSk7CiAg\nICAgICAgIGFzc2VydEVxdWFscyAoImVudCIsIGVudC5nZXROYW1lICgpKTsK\nICAgICAgICAgYXNzZXJ0RXF1YWxzIChpZCwgZW50LmdldElkICgpKTsKICAg\nICAgICAgYXNzZXJ0VHJ1ZSAoZW50LmdldE5vbmUgKCkgIT0gcmVsKTsKICAg\nICAgICAgcmVsID0gZW50LmdldE5vbmUgKCk7CiAgICAgICAgIGFzc2VydE5v\ndE51bGwgKHJlbCk7CiAgICAgICAgIGFzc2VydFRydWUgKCFlbS5pc0RpcnR5\nIChyZWwpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzIChyZWxJZCwgcmVsLmdl\ndElkICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzICgxLCBlbnQuZ2V0Tm9u\nZUNvbGxlY3Rpb24gKCkuc2l6ZSAoKSk7CiAgICAgICAgIGFzc2VydEVxdWFs\ncyAocmVsLCBlbnQuZ2V0Tm9uZUNvbGxlY3Rpb24gKCkuaXRlcmF0b3IgKCku\nbmV4dCAoKSk7CgogICAgICAgICBhc3NlcnRUcnVlIChlbS5pc1BlcnNpc3Rl\nbnQgKHJlbCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKHJlbElkLCByZWwu\nZ2V0SWQgKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKCJyZWwiLCByZWwu\nZ2V0TmFtZSAoKSk7CiAgICAgICAgIGVuZFR4KGVtKTsKICAgICAgICAgZW5k\nRW0oZW0pOwogICAgIH0KCgogICAgIHB1YmxpYyB2b2lkIHRlc3RDYXNjYWRl\nQXR0YWNoRGlydHlGaWVsZHMgKCkKICAgICB7CiAgICAgICAgIENhc2NhZGVz\nRW50aXR5IGVudCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAg\nQ2FzY2FkZXNFbnRpdHkgcmVsMSA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsK\nICAgICAgICAgQ2FzY2FkZXNFbnRpdHkgcmVsMiA9IG5ldyBDYXNjYWRlc0Vu\ndGl0eSAoKTsKICAgICAgICAgZW50LnNldE5hbWUgKCJlbnQiKTsKICAgICAg\nICAgcmVsMS5zZXROYW1lICgicmVsMSIpOwogICAgICAgICBlbnQuc2V0QWxs\nIChyZWwxKTsKICAgICAgICAgcmVsMi5zZXROYW1lICgicmVsMiIpOwogICAg\nICAgICBlbnQuZ2V0QWxsQ29sbGVjdGlvbiAoKS5hZGQgKHJlbDIpOwoKICAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSAoT3BlbkpQQUVudGl0\neU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgc3Rh\ncnRUeChlbSk7CiAgICAgICAgIGVtLnBlcnNpc3QgKGVudCk7CiAgICAgICAg\nIGVuZFR4KGVtKTsKICAgICAgICAgbG9uZyBpZCA9IGVudC5nZXRJZCAoKTsK\nICAgICAgICAgbG9uZyByZWwxSWQgPSByZWwxLmdldElkICgpOwogICAgICAg\nICBsb25nIHJlbDJJZCA9IHJlbDIuZ2V0SWQgKCk7CiAgICAgICAgIGVuZEVt\nKGVtKTsKCiAgICAgICAgIGFzc2VydEVxdWFscyAoImVudCIsIGVudC5nZXRO\nYW1lICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzICgicmVsMSIsIHJlbDEu\nZ2V0TmFtZSAoKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAoInJlbDIiLCBy\nZWwyLmdldE5hbWUgKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKHJlbDEs\nIGVudC5nZXRBbGwgKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKHJlbDIs\nIGVudC5nZXRBbGxDb2xsZWN0aW9uICgpLml0ZXJhdG9yICgpLm5leHQgKCkp\nOwogICAgICAgICByZWwxLnNldE5hbWUgKCJmb28iKTsKICAgICAgICAgcmVs\nMi5zZXROYW1lICgiYmFyIik7CgogICAgICAgICBlbSA9IChPcGVuSlBBRW50\naXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgICBz\ndGFydFR4KGVtKTsKICAgICAgICAgZW50ID0gZW0ubWVyZ2UgKGVudCk7CiAg\nICAgICAgIGFzc2VydEVxdWFscyAoImVudCIsIGVudC5nZXROYW1lICgpKTsK\nICAgICAgICAgYXNzZXJ0VHJ1ZSAoIWVtLmlzRGlydHkgKGVudCkpOwogICAg\nICAgICBhc3NlcnRFcXVhbHMgKGlkLCBlbnQuZ2V0SWQgKCkpOwogICAgICAg\nICBhc3NlcnRUcnVlIChyZWwxICE9IGVudC5nZXRBbGwgKCkpOwogICAgICAg\nICByZWwxID0gZW50LmdldEFsbCAoKTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAo\nZW0uaXNEaXJ0eSAocmVsMSkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKDEs\nIGVudC5nZXRBbGxDb2xsZWN0aW9uICgpLnNpemUgKCkpOwogICAgICAgICBy\nZWwyID0gZW50LmdldEFsbENvbGxlY3Rpb24gKCkuaXRlcmF0b3IgKCkubmV4\ndCAoKTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAoZW0uaXNEaXJ0eSAocmVsMikp\nOwoKICAgICAgICAgYXNzZXJ0VHJ1ZSAoZW0uaXNQZXJzaXN0ZW50IChyZWwx\nKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAocmVsMUlkLCByZWwxLmdldElk\nICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzICgiZm9vIiwgcmVsMS5nZXRO\nYW1lICgpKTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAoZW0uaXNQZXJzaXN0ZW50\nIChyZWwyKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAocmVsMklkLCByZWwy\nLmdldElkICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzICgiYmFyIiwgcmVs\nMi5nZXROYW1lICgpKTsKICAgICAgICAgZW5kVHgoZW0pOwogICAgICAgICBl\nbmRFbShlbSk7CiAgICAgfQoKCiAgICAgcHVibGljIHZvaWQgdGVzdE5vQ2Fz\nY2FkZUF0dGFjaERpcnR5UmVsYXRpb25zICgpCiAgICAgewogICAgICAgICBD\nYXNjYWRlc0VudGl0eSBlbnQgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAg\nICAgICAgIENhc2NhZGVzRW50aXR5IHJlbCA9IG5ldyBDYXNjYWRlc0VudGl0\neSAoKTsKICAgICAgICAgQ2FzY2FkZXNFbnRpdHkgb3RoZXIgPSBuZXcgQ2Fz\nY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIGVudC5zZXROYW1lICgiZW50Iik7\nCiAgICAgICAgIHJlbC5zZXROYW1lICgicmVsIik7CiAgICAgICAgIG90aGVy\nLnNldE5hbWUgKCJvdGhlciIpOwogICAgICAgICBlbnQuc2V0Tm9uZSAocmVs\nKTsKICAgICAgICAgZW50LmdldE5vbmVDb2xsZWN0aW9uICgpLmFkZCAocmVs\nKTsKCiAgICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gKE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgIHN0YXJ0VHgoZW0pOwogICAgICAgICBlbS5wZXJzaXN0QWxsIChlbnQs\nIHJlbCwgb3RoZXIpOwogICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgIGxv\nbmcgaWQgPSBlbnQuZ2V0SWQgKCk7CiAgICAgICAgIGxvbmcgcmVsSWQgPSBy\nZWwuZ2V0SWQgKCk7CiAgICAgICAgIGxvbmcgb3RoZXJJZCA9IG90aGVyLmdl\ndElkICgpOwogICAgICAgICBlbmRFbShlbSk7CgogICAgICAgICBhc3NlcnRF\ncXVhbHMgKCJlbnQiLCBlbnQuZ2V0TmFtZSAoKSk7CiAgICAgICAgIGFzc2Vy\ndEVxdWFscyAoInJlbCIsIHJlbC5nZXROYW1lICgpKTsKICAgICAgICAgYXNz\nZXJ0RXF1YWxzICgib3RoZXIiLCBvdGhlci5nZXROYW1lICgpKTsKICAgICAg\nICAgYXNzZXJ0RXF1YWxzIChyZWwsIGVudC5nZXROb25lICgpKTsKICAgICAg\nICAgYXNzZXJ0RXF1YWxzIChyZWwsIGVudC5nZXROb25lQ29sbGVjdGlvbiAo\nKS5pdGVyYXRvciAoKS5uZXh0ICgpKTsKICAgICAgICAgb3RoZXIuc2V0TmFt\nZSAoImZvbyIpOwogICAgICAgICBlbnQuc2V0Tm9uZSAob3RoZXIpOwogICAg\nICAgICBlbnQuZ2V0Tm9uZUNvbGxlY3Rpb24gKCkucmVtb3ZlIChyZWwpOwog\nICAgICAgICBlbnQuZ2V0Tm9uZUNvbGxlY3Rpb24gKCkuYWRkIChvdGhlcik7\nCgogICAgICAgICBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgICBzdGFydFR4KGVtKTsKICAgICAg\nICAgZW50ID0gZW0ubWVyZ2UgKGVudCk7CiAgICAgICAgIGFzc2VydFRydWUg\nKGVtLmlzRGlydHkgKGVudCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKCJl\nbnQiLCBlbnQuZ2V0TmFtZSAoKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAo\naWQsIGVudC5nZXRJZCAoKSk7CiAgICAgICAgIGFzc2VydFRydWUgKGVudC5n\nZXROb25lICgpICE9IHJlbCk7CiAgICAgICAgIGFzc2VydFRydWUgKGVudC5n\nZXROb25lICgpICE9IG90aGVyKTsKICAgICAgICAgb3RoZXIgPSBlbnQuZ2V0\nTm9uZSAoKTsKICAgICAgICAgYXNzZXJ0Tm90TnVsbCAob3RoZXIpOwogICAg\nICAgICBhc3NlcnRUcnVlICghZW0uaXNEaXJ0eSAob3RoZXIpKTsKICAgICAg\nICAgYXNzZXJ0RXF1YWxzIChvdGhlcklkLCBvdGhlci5nZXRJZCAoKSk7CiAg\nICAgICAgIGFzc2VydEVxdWFscyAoMSwgZW50LmdldE5vbmVDb2xsZWN0aW9u\nICgpLnNpemUgKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKG90aGVyLCBl\nbnQuZ2V0Tm9uZUNvbGxlY3Rpb24gKCkuaXRlcmF0b3IgKCkubmV4dCAoKSk7\nCgogICAgICAgICBhc3NlcnRUcnVlIChlbS5pc1BlcnNpc3RlbnQgKG90aGVy\nKSk7CiAgICAgICAgIGFzc2VydEZhbHNlIChlbS5pc1BlcnNpc3RlbnQgKHJl\nbCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKG90aGVySWQsIG90aGVyLmdl\ndElkICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzICgib3RoZXIiLCBvdGhl\nci5nZXROYW1lICgpKTsKICAgICAgICAgZW5kVHgoZW0pOwogICAgICAgICBl\nbmRFbShlbSk7CiAgICAgfQoKCiAgICAgcHVibGljIHZvaWQgdGVzdENhc2Nh\nZGVBdHRhY2hEaXJ0eVJlbGF0aW9ucyAoKQogICAgIHsKICAgICAgICAgQ2Fz\nY2FkZXNFbnRpdHkgZW50ID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwogICAg\nICAgICBDYXNjYWRlc0VudGl0eSByZWwxID0gbmV3IENhc2NhZGVzRW50aXR5\nICgpOwogICAgICAgICBDYXNjYWRlc0VudGl0eSByZWwyID0gbmV3IENhc2Nh\nZGVzRW50aXR5ICgpOwogICAgICAgICBDYXNjYWRlc0VudGl0eSBvdGhlcjEg\nPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIENhc2NhZGVzRW50\naXR5IG90aGVyMiA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAg\nZW50LnNldE5hbWUgKCJlbnQiKTsKICAgICAgICAgcmVsMS5zZXROYW1lICgi\ncmVsMSIpOwogICAgICAgICBlbnQuc2V0QWxsIChyZWwxKTsKICAgICAgICAg\ncmVsMi5zZXROYW1lICgicmVsMiIpOwogICAgICAgICBlbnQuZ2V0QWxsQ29s\nbGVjdGlvbiAoKS5hZGQgKHJlbDIpOwogICAgICAgICBvdGhlcjEuc2V0TmFt\nZSAoIm90aGVyMSIpOwogICAgICAgICBvdGhlcjIuc2V0TmFtZSAoIm90aGVy\nMiIpOwoKICAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSAoT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgIGVtLnBlcnNpc3RBbGwgKGVu\ndCwgb3RoZXIxLCBvdGhlcjIpOwogICAgICAgICBlbmRUeChlbSk7CiAgICAg\nICAgIGxvbmcgaWQgPSBlbnQuZ2V0SWQgKCk7CiAgICAgICAgIGxvbmcgcmVs\nMUlkID0gcmVsMS5nZXRJZCAoKTsKICAgICAgICAgbG9uZyByZWwySWQgPSBy\nZWwyLmdldElkICgpOwogICAgICAgICBsb25nIG90aGVyMUlkID0gb3RoZXIx\nLmdldElkICgpOwogICAgICAgICBsb25nIG90aGVyMklkID0gb3RoZXIyLmdl\ndElkICgpOwogICAgICAgICBlbmRFbShlbSk7CgogICAgICAgICBhc3NlcnRF\ncXVhbHMgKCJlbnQiLCBlbnQuZ2V0TmFtZSAoKSk7CiAgICAgICAgIGFzc2Vy\ndEVxdWFscyAoInJlbDEiLCByZWwxLmdldE5hbWUgKCkpOwogICAgICAgICBh\nc3NlcnRFcXVhbHMgKCJyZWwyIiwgcmVsMi5nZXROYW1lICgpKTsKICAgICAg\nICAgYXNzZXJ0RXF1YWxzIChyZWwxLCBlbnQuZ2V0QWxsICgpKTsKICAgICAg\nICAgYXNzZXJ0RXF1YWxzIChyZWwyLCBlbnQuZ2V0QWxsQ29sbGVjdGlvbiAo\nKS5pdGVyYXRvciAoKS5uZXh0ICgpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxz\nICgib3RoZXIxIiwgb3RoZXIxLmdldE5hbWUgKCkpOwogICAgICAgICBvdGhl\ncjEuc2V0TmFtZSAoImZvbyIpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKCJv\ndGhlcjIiLCBvdGhlcjIuZ2V0TmFtZSAoKSk7CiAgICAgICAgIG90aGVyMi5z\nZXROYW1lICgiYmFyIik7CiAgICAgICAgIGVudC5zZXRBbGwgKG90aGVyMSk7\nCiAgICAgICAgIGVudC5nZXRBbGxDb2xsZWN0aW9uICgpLnJlbW92ZSAocmVs\nMik7CiAgICAgICAgIGVudC5nZXRBbGxDb2xsZWN0aW9uICgpLmFkZCAob3Ro\nZXIyKTsKCiAgICAgICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgIHN0YXJ0VHgoZW0pOwog\nICAgICAgICBlbnQgPSBlbS5tZXJnZSAoZW50KTsKICAgICAgICAgYXNzZXJ0\nRXF1YWxzICgiZW50IiwgZW50LmdldE5hbWUgKCkpOwogICAgICAgICBhc3Nl\ncnRUcnVlIChlbS5pc0RpcnR5IChlbnQpKTsKICAgICAgICAgYXNzZXJ0RXF1\nYWxzIChpZCwgZW50LmdldElkICgpKTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAo\ncmVsMSAhPSBlbnQuZ2V0QWxsICgpKTsKICAgICAgICAgYXNzZXJ0VHJ1ZSAo\nb3RoZXIxICE9IGVudC5nZXRBbGwgKCkpOwogICAgICAgICBvdGhlcjEgPSBl\nbnQuZ2V0QWxsICgpOwogICAgICAgICBhc3NlcnRUcnVlIChlbS5pc0RpcnR5\nIChvdGhlcjEpKTsKICAgICAgICAgYXNzZXJ0RXF1YWxzICgxLCBlbnQuZ2V0\nQWxsQ29sbGVjdGlvbiAoKS5zaXplICgpKTsKICAgICAgICAgb3RoZXIyID0g\nZW50LmdldEFsbENvbGxlY3Rpb24gKCkuaXRlcmF0b3IgKCkubmV4dCAoKTsK\nICAgICAgICAgYXNzZXJ0VHJ1ZSAoZW0uaXNEaXJ0eSAob3RoZXIyKSk7Cgog\nICAgICAgICBhc3NlcnRUcnVlIChlbS5pc1BlcnNpc3RlbnQgKG90aGVyMSkp\nOwogICAgICAgICBhc3NlcnRFcXVhbHMgKG90aGVyMUlkLCBvdGhlcjEuZ2V0\nSWQgKCkpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKCJmb28iLCBvdGhlcjEu\nZ2V0TmFtZSAoKSk7CiAgICAgICAgIGFzc2VydFRydWUgKGVtLmlzUGVyc2lz\ndGVudCAob3RoZXIyKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAob3RoZXIy\nSWQsIG90aGVyMi5nZXRJZCAoKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAo\nImJhciIsIG90aGVyMi5nZXROYW1lICgpKTsKICAgICAgICAgZW5kVHgoZW0p\nOwogICAgICAgICBlbmRFbShlbSk7CiAgICAgfQoKCiAgICAgcHVibGljIHZv\naWQgdGVzdE5vQ2FzY2FkZVJlZmVyZW5jZUlzUHJlTG9hZGVkUmVmZXJlbmNl\nICgpCiAgICAgewogICAgICAgICBDYXNjYWRlc0VudGl0eSBlbnQgPSBuZXcg\nQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAgIENhc2NhZGVzRW50aXR5IHJl\nbCA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKICAgICAgICAgQ2FzY2FkZXNF\nbnRpdHkgb3RoZXIgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CiAgICAgICAg\nIGVudC5zZXROYW1lICgiZW50Iik7CiAgICAgICAgIHJlbC5zZXROYW1lICgi\ncmVsIik7CiAgICAgICAgIG90aGVyLnNldE5hbWUgKCJvdGhlciIpOwogICAg\nICAgICBlbnQuc2V0Tm9uZSAocmVsKTsKICAgICAgICAgZW50LmdldE5vbmVD\nb2xsZWN0aW9uICgpLmFkZCAocmVsKTsKCiAgICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAg\nICBlbS5wZXJzaXN0QWxsIChlbnQsIHJlbCwgb3RoZXIpOwogICAgICAgICBl\nbmRUeChlbSk7CiAgICAgICAgIGxvbmcgb3RoZXJJZCA9IG90aGVyLmdldElk\nICgpOwogICAgICAgICBlbmRFbShlbSk7CgogICAgICAgICBlbnQuc2V0Tm9u\nZSAob3RoZXIpOwogICAgICAgICBlbnQuZ2V0Tm9uZUNvbGxlY3Rpb24gKCku\ncmVtb3ZlIChyZWwpOwogICAgICAgICBlbnQuZ2V0Tm9uZUNvbGxlY3Rpb24g\nKCkuYWRkIChvdGhlcik7CgogICAgICAgICBlbSA9IChPcGVuSlBBRW50aXR5\nTWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgICBzdGFy\ndFR4KGVtKTsKICAgICAgICAgb3RoZXIgPSBlbS5maW5kIChDYXNjYWRlc0Vu\ndGl0eS5jbGFzcywgb3RoZXJJZCk7CiAgICAgICAgIGVudCA9IGVtLm1lcmdl\nIChlbnQpOwogICAgICAgICBhc3NlcnRFcXVhbHMgKG90aGVyLCBlbnQuZ2V0\nTm9uZSAoKSk7CiAgICAgICAgIGFzc2VydEVxdWFscyAob3RoZXIsIGVudC5n\nZXROb25lQ29sbGVjdGlvbiAoKS5pdGVyYXRvciAoKS5uZXh0ICgpKTsKICAg\nICAgICAgZW5kVHgoZW0pOwogICAgICAgICBlbmRFbShlbSk7CiAgICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3ROb0Nhc2NhZGVOZXdDYXVzZXNFeGNlcHRp\nb24oKSB7CiAgICAgICAgQ2FzY2FkZXNFbnRpdHkgZW50ID0gbmV3IENhc2Nh\nZGVzRW50aXR5KCk7CiAgICAgICAgQ2FzY2FkZXNFbnRpdHkgcmVsID0gbmV3\nIENhc2NhZGVzRW50aXR5KCk7CiAgICAgICAgZW50LnNldE5vbmUocmVsKTsK\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPQogICAgICAgICAg\nICAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgZW0ucGVyc2lzdEFs\nbChlbnQsIHJlbCk7CiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVt\nKGVtKTsKCiAgICAgICAgQ2FzY2FkZXNFbnRpdHkgb3RoZXIgPSBuZXcgQ2Fz\nY2FkZXNFbnRpdHkoKTsKICAgICAgICBlbnQuc2V0Tm9uZShvdGhlcik7Cgog\nICAgICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50\naXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGVudCA9IGVtLm1lcmdlKGVudCk7CiAgICAgICAg\nICAgIGZhaWwoIkFsbG93ZWQgbWVyZ2Ugb2YgbmV3IGluc3RhbmNlIGluIG5v\nbi1jYXNjYWRpbmcgcmVsYXRpb24uIik7CiAgICAgICAgfQogICAgICAgIGNh\ndGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIGlmIChp\nc0FjdGl2ZVR4KGVtKSkKICAgICAgICAgICAgICAgIHJvbGxiYWNrVHgoZW0p\nOwogICAgICAgIH0KICAgICAgICBlbmRFbShlbSk7CgogICAgICAgIGVudCA9\nIG5ldyBDYXNjYWRlc0VudGl0eSgpOwogICAgICAgIGVtID0gKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAg\nIHN0YXJ0VHgoZW0pOwogICAgICAgIGVtLnBlcnNpc3QoZW50KTsKICAgICAg\nICBlbmRUeChlbSk7CiAgICAgICAgZW5kRW0oZW0pOwoKICAgICAgICBvdGhl\nciA9IG5ldyBDYXNjYWRlc0VudGl0eSgpOwogICAgICAgIGVudC5nZXROb25l\nQ29sbGVjdGlvbigpLmFkZChvdGhlcik7CgogICAgICAgIGVtID0gKE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAg\nICAgIHN0YXJ0VHgoZW0pOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGVu\ndCA9IGVtLm1lcmdlKGVudCk7CiAgICAgICAgICAgIGZhaWwoIkFsbG93ZWQg\nbWVyZ2Ugb2YgbmV3IGluc3RhbmNlIGluIG5vbi1jYXNjYWRpbmcgcmVsYXRp\nb24uIik7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChSdW50aW1lRXhjZXB0\naW9uIHJlKSB7CiAgICAgICAgICAgIGlmIChpc0FjdGl2ZVR4KGVtKSkKICAg\nICAgICAgICAgICAgIHJvbGxiYWNrVHgoZW0pOwogICAgICAgIH0KICAgICAg\nICBlbmRFbShlbSk7CiAgICB9CgoJcHVibGljIHZvaWQgdGVzdENhc2NhZGVO\nZXdQZXJzaXN0ZWQgKCkKCXsKCQlDYXNjYWRlc0VudGl0eSBlbnQgPSBuZXcg\nQ2FzY2FkZXNFbnRpdHkgKCk7CgkJQ2FzY2FkZXNFbnRpdHkgcmVsMSA9IG5l\ndyBDYXNjYWRlc0VudGl0eSAoKTsKCQlDYXNjYWRlc0VudGl0eSByZWwyID0g\nbmV3IENhc2NhZGVzRW50aXR5ICgpOwoJCWVudC5zZXROYW1lICgiZW50Iik7\nCgkJcmVsMS5zZXROYW1lICgicmVsMSIpOwoJCWVudC5zZXRBbGwgKHJlbDEp\nOwoJCXJlbDIuc2V0TmFtZSAoInJlbDIiKTsKCQllbnQuZ2V0QWxsQ29sbGVj\ndGlvbiAoKS5hZGQgKHJlbDIpOwoKCQlPcGVuSlBBRW50aXR5TWFuYWdlciBl\nbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdl\ncigpOwoJCXN0YXJ0VHgoZW0pOwoJCWVtLnBlcnNpc3QgKGVudCk7CgkJZW5k\nVHgoZW0pOwoJCWVuZEVtKGVtKTsKCgkJQ2FzY2FkZXNFbnRpdHkgb3RoZXIx\nID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwoJCUNhc2NhZGVzRW50aXR5IG90\naGVyMiA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKCQlvdGhlcjEuc2V0TmFt\nZSAoIm90aGVyMSIpOwoJCW90aGVyMi5zZXROYW1lICgib3RoZXIyIik7CgoJ\nCWVudC5zZXRBbGwgKG90aGVyMSk7CgkJZW50LmdldEFsbENvbGxlY3Rpb24g\nKCkucmVtb3ZlIChyZWwyKTsKCQllbnQuZ2V0QWxsQ29sbGVjdGlvbiAoKS5h\nZGQgKG90aGVyMik7CgoJCWVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CgkJc3RhcnRUeChlbSk7CgkJZW50ID0g\nZW0ubWVyZ2UgKGVudCk7CgkJYXNzZXJ0VHJ1ZSAoZW0uaXNEaXJ0eSAoZW50\nKSk7CgkJYXNzZXJ0VHJ1ZSAocmVsMSAhPSBlbnQuZ2V0QWxsICgpKTsKCQlh\nc3NlcnRUcnVlIChvdGhlcjEgIT0gZW50LmdldEFsbCAoKSk7CgkJb3RoZXIx\nID0gZW50LmdldEFsbCAoKTsKCQlhc3NlcnRFcXVhbHMgKCJvdGhlcjEiLCBv\ndGhlcjEuZ2V0TmFtZSAoKSk7CgkJYXNzZXJ0VHJ1ZSAoZW0uaXNOZXdseVBl\ncnNpc3RlbnQgKG90aGVyMSkpOwoJCWFzc2VydEVxdWFscyAoMSwgZW50Lmdl\ndEFsbENvbGxlY3Rpb24gKCkuc2l6ZSAoKSk7CgkJb3RoZXIyID0gZW50Lmdl\ndEFsbENvbGxlY3Rpb24gKCkuaXRlcmF0b3IgKCkubmV4dCAoKTsKCQlhc3Nl\ncnRFcXVhbHMgKCJvdGhlcjIiLCBvdGhlcjIuZ2V0TmFtZSAoKSk7CgkJYXNz\nZXJ0VHJ1ZSAoZW0uaXNOZXdseVBlcnNpc3RlbnQgKG90aGVyMikpOwoJCWVu\nZFR4KGVtKTsKCQllbmRFbShlbSk7Cgl9CgoKCXB1YmxpYyB2b2lkIHRlc3RD\nYXNjYWRlc0RlbGV0ZU5vblBlcnNpc3RlbnQgKCkKCXsKCQlDYXNjYWRlc0Vu\ndGl0eSBhbGwgPSBuZXcgQ2FzY2FkZXNFbnRpdHkgKCk7CgkJQ2FzY2FkZXNF\nbnRpdHkgbm9uZSA9IG5ldyBDYXNjYWRlc0VudGl0eSAoKTsKCQlDYXNjYWRl\nc0VudGl0eSBtYW55QWxsID0gbmV3IENhc2NhZGVzRW50aXR5ICgpOwoJCUNh\nc2NhZGVzRW50aXR5IG1hbnlOb25lID0gbmV3IENhc2NhZGVzRW50aXR5ICgp\nOwoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CgkJc3RhcnRUeChlbSk7\nCgkJZW0ucGVyc2lzdCAoYWxsKTsKCQllbS5wZXJzaXN0IChub25lKTsKCQll\nbS5wZXJzaXN0IChtYW55QWxsKTsKCQllbS5wZXJzaXN0IChtYW55Tm9uZSk7\nCgkJZW5kVHgoZW0pOwoJCWxvbmcgYWxsSWQgPSBhbGwuZ2V0SWQgKCk7CgkJ\nbG9uZyBub25lSWQgPSBub25lLmdldElkICgpOwoJCWxvbmcgbWFueUFsbElk\nID0gbWFueUFsbC5nZXRJZCAoKTsKCQlsb25nIG1hbnlOb25lSWQgPSBtYW55\nTm9uZS5nZXRJZCAoKTsKCQllbmRFbShlbSk7CgoJCWVtID0gKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwoJCXN0YXJ0\nVHgoZW0pOwoJCUNhc2NhZGVzRW50aXR5IGVudCA9IG5ldyBDYXNjYWRlc0Vu\ndGl0eSAoKTsKCQllbnQuc2V0QWxsIChlbS5maW5kIChDYXNjYWRlc0VudGl0\neS5jbGFzcywgYWxsSWQpKTsKCQllbnQuc2V0Tm9uZSAoZW0uZmluZCAoQ2Fz\nY2FkZXNFbnRpdHkuY2xhc3MsIG5vbmVJZCkpOwoJCWVudC5nZXRBbGxDb2xs\nZWN0aW9uICgpLmFkZCAoZW0uZmluZCAoQ2FzY2FkZXNFbnRpdHkuY2xhc3Ms\nIG1hbnlBbGxJZCkpOwoJCWVudC5nZXROb25lQ29sbGVjdGlvbiAoKS5hZGQg\nKGVtLmZpbmQgKENhc2NhZGVzRW50aXR5LmNsYXNzLCBtYW55Tm9uZUlkKSk7\nCgkJZW0ucmVtb3ZlIChlbnQpOwoJCWFzc2VydFRydWUgKGVtLmlzUmVtb3Zl\nZCAoZW50LmdldEFsbCAoKSkpOwoJCWFzc2VydEZhbHNlIChlbS5pc1JlbW92\nZWQgKGVudC5nZXROb25lICgpKSk7CgkJZm9yIChDYXNjYWRlc0VudGl0eSBy\nZWwgOiBlbnQuZ2V0QWxsQ29sbGVjdGlvbiAoKSkKCQlhc3NlcnRUcnVlIChl\nbS5pc1JlbW92ZWQgKHJlbCkpOwoJCWZvciAoQ2FzY2FkZXNFbnRpdHkgcmVs\nIDogZW50LmdldE5vbmVDb2xsZWN0aW9uICgpKQoJCQlhc3NlcnRGYWxzZSAo\nZW0uaXNSZW1vdmVkIChyZWwpKTsKCQlhc3NlcnRGYWxzZSAoZW0uY29udGFp\nbnMgKGVudCkpOwoJCWVuZFR4KGVtKTsKCQllbmRFbShlbSk7CgoJCWVtID0g\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigp\nOwoJCWFzc2VydE51bGwgKGVtLmZpbmQgKENhc2NhZGVzRW50aXR5LmNsYXNz\nLCBhbGxJZCkpOwoJCWFzc2VydE5vdE51bGwgKGVtLmZpbmQgKENhc2NhZGVz\nRW50aXR5LmNsYXNzLCBub25lSWQpKTsKCQlhc3NlcnROdWxsIChlbS5maW5k\nIChDYXNjYWRlc0VudGl0eS5jbGFzcywgbWFueUFsbElkKSk7CgkJYXNzZXJ0\nTm90TnVsbCAoZW0uZmluZCAoQ2FzY2FkZXNFbnRpdHkuY2xhc3MsIG1hbnlO\nb25lSWQpKTsKCQllbmRFbShlbSk7Cgl9Cn0K\n","encoding":"base64"}

