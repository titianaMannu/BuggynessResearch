{"sha":"802557211a80c2d3a3c9f40daa1d890bd85e25e5","node_id":"MDQ6QmxvYjIwNjM2NDo4MDI1NTcyMTFhODBjMmQzYTNjOWY0MGRhYTFkODkwYmQ4NWUyNWU1","size":7505,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/802557211a80c2d3a3c9f40daa1d890bd85e25e5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXZlbnQ7\nCgppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0\naWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQg\namF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1w\nb3J0IGphdmEudXRpbC5TZXQ7CgoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5ldmVudC5jb21tb24uYXBwcy5SdW50aW1lVGVzdDE7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9u\nLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7CgppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmV2ZW50LkFic3RyYWN0UmVtb3RlQ29tbWl0UHJvdmlkZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQuUmVtb3RlQ29tbWl0RXZl\nbnQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQuUmVtb3RlQ29t\nbWl0TGlzdGVuZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLklkOwoKcHVibGljIGNsYXNzIFRlc3RGYWtlUmVt\nb3RlRXZlbnRzIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2FzZSB7CgogICAgLyoK\nICAgICAgKiBUaGUgbW9zdCByZWNlbnRseSBzZXQgcHJvdmlkZXIsIGFuZCBh\nIGxvY2sgdG8gY29udHJvbCBhY2Nlc3MgdG8gaXQuIFRoaXMKICAgICAgKiBp\ncyByYXRoZXIgaGFja3kuCiAgICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBP\nYmplY3QgY3VycmVudFByb3ZpZGVyTG9jayA9IG5ldyBPYmplY3QoKTsKCiAg\nICBwcml2YXRlIHN0YXRpYyBSZW1vdGVDb21taXRQcm92aWRlclRlc3RJbXBs\nIGN1cnJlbnRQcm92aWRlcjsKCiAgICBwdWJsaWMgVGVzdEZha2VSZW1vdGVF\ndmVudHMoU3RyaW5nIHMpIHsKICAgICAgICBzdXBlcihzLCAiZXZlbnRjYWN0\ndXNhcHAiKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAg\nICAgICBkZWxldGVBbGwoUnVudGltZVRlc3QxLmNsYXNzKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0TGlzdGVuZXIoKSB7CgogICAgICAgIE1hcCBw\ncm9wc01hcCA9IG5ldyBIYXNoTWFwKCk7CiAgICAgICAgcHJvcHNNYXAucHV0\nKCJvcGVuanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVyIiwgInNqdm0iKTsKICAg\nICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuRGF0YUNhY2hlIiwgInRydWUi\nKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgZmFjdG9y\neSA9IGdldEVtZihwcm9wc01hcCk7CgogICAgICAgIFJlbW90ZUNvbW1pdExp\nc3RlbmVyVGVzdEltcGwgdHJhbnNhY3Rpb25MaXN0ZW5lciA9CiAgICAgICAg\nICAgIG5ldyBSZW1vdGVDb21taXRMaXN0ZW5lclRlc3RJbXBsKCk7CiAgICAg\nICAgKChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpIGZhY3Rvcnkp\nLmdldENvbmZpZ3VyYXRpb24oKQogICAgICAgICAgICAuZ2V0UmVtb3RlQ29t\nbWl0RXZlbnRNYW5hZ2VyKCkuYWRkTGlzdGVuZXIoCiAgICAgICAgICAgIHRy\nYW5zYWN0aW9uTGlzdGVuZXIpOwoKICAgICAgICBPcGVuSlBBRW50aXR5TWFu\nYWdlciBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgZmFjdG9yeQogICAg\nICAgICAgICAuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAgICAvLyBn\nZXQgYW4gb2JqZWN0IGlkCiAgICAgICAgUnVudGltZVRlc3QxIHQxID0gbmV3\nIFJ1bnRpbWVUZXN0MSgiZm9vIiwgNSk7CiAgICAgICAgc3RhcnRUeChwbSk7\nCiAgICAgICAgcG0ucGVyc2lzdCh0MSk7CiAgICAgICAgT2JqZWN0IG9pZCA9\nIHBtLmdldE9iamVjdElkKHQxKTsKICAgICAgICByb2xsYmFja1R4KHBtKTsK\nCiAgICAgICAgLy8gc2ltdWxhdGUgYW4gYWRkCiAgICAgICAgU2V0IHMgPSBu\nZXcgSGFzaFNldCgpOwogICAgICAgIHMuYWRkKG9pZCk7CiAgICAgICAgKChP\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpIGZhY3RvcnkpLmdldENv\nbmZpZ3VyYXRpb24oKQogICAgICAgICAgICAuZ2V0UmVtb3RlQ29tbWl0RXZl\nbnRNYW5hZ2VyKCkuZmlyZUV2ZW50KAogICAgICAgICAgICBuZXcgUmVtb3Rl\nQ29tbWl0RXZlbnQoUmVtb3RlQ29tbWl0RXZlbnQuUEFZTE9BRF9PSURTX1dJ\nVEhfQUREUywKICAgICAgICAgICAgICAgIHMsIG51bGwsIG51bGwsIG51bGwp\nKTsKCiAgICAgICAgYm9vbGVhbiBwYXNzID0gZmFsc2U7CiAgICAgICAgZm9y\nIChJdGVyYXRvciBpdGVyID0gdHJhbnNhY3Rpb25MaXN0ZW5lci5hZGRlZC5p\ndGVyYXRvcigpOyBpdGVyCiAgICAgICAgICAgIC5oYXNOZXh0KCk7KSB7CiAg\nICAgICAgICAgIGlmIChpdGVyLm5leHQoKS5lcXVhbHMob2lkKSkgewogICAg\nICAgICAgICAgICAgcGFzcyA9IHRydWU7CiAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhc3NlcnRUcnVl\nKHBhc3MpOwogICAgICAgIGFzc2VydFRydWUodHJhbnNhY3Rpb25MaXN0ZW5l\nci51cGRhdGVkLnNpemUoKSA9PSAwKTsKICAgICAgICBhc3NlcnRUcnVlKHRy\nYW5zYWN0aW9uTGlzdGVuZXIuZGVsZXRlZC5zaXplKCkgPT0gMCk7CgogICAg\nICAgIC8vIHNpbXVsYXRlIG1vZGlmaWNhdGlvbnMKICAgICAgICAoKE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkgZmFjdG9yeSkuZ2V0Q29uZmln\ndXJhdGlvbigpCiAgICAgICAgICAgIC5nZXRSZW1vdGVDb21taXRFdmVudE1h\nbmFnZXIoKS5maXJlRXZlbnQoCiAgICAgICAgICAgIG5ldyBSZW1vdGVDb21t\naXRFdmVudChSZW1vdGVDb21taXRFdmVudC5QQVlMT0FEX09JRFNfV0lUSF9B\nRERTLAogICAgICAgICAgICAgICAgbnVsbCwgbnVsbCwgcywgbnVsbCkpOwoK\nICAgICAgICBwYXNzID0gZmFsc2U7CiAgICAgICAgZm9yIChJdGVyYXRvciBp\ndGVyID0gdHJhbnNhY3Rpb25MaXN0ZW5lci51cGRhdGVkLml0ZXJhdG9yKCk7\nIGl0ZXIKICAgICAgICAgICAgLmhhc05leHQoKTspIHsKICAgICAgICAgICAg\naWYgKGl0ZXIubmV4dCgpLmVxdWFscyhvaWQpKSB7CiAgICAgICAgICAgICAg\nICBwYXNzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIGFzc2VydFRydWUocGFzcyk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZSh0cmFuc2FjdGlvbkxpc3RlbmVyLmFkZGVkLnNp\nemUoKSA9PSAwKTsKICAgICAgICBhc3NlcnRUcnVlKHRyYW5zYWN0aW9uTGlz\ndGVuZXIuZGVsZXRlZC5zaXplKCkgPT0gMCk7CgogICAgICAgIC8vIHNpbXVs\nYXRlIGEgZGVsZXRlCiAgICAgICAgKChPcGVuSlBBRW50aXR5TWFuYWdlckZh\nY3RvcnlTUEkpIGZhY3RvcnkpLmdldENvbmZpZ3VyYXRpb24oKQogICAgICAg\nICAgICAuZ2V0UmVtb3RlQ29tbWl0RXZlbnRNYW5hZ2VyKCkuZmlyZUV2ZW50\nKAogICAgICAgICAgICBuZXcgUmVtb3RlQ29tbWl0RXZlbnQoUmVtb3RlQ29t\nbWl0RXZlbnQuUEFZTE9BRF9PSURTX1dJVEhfQUREUywKICAgICAgICAgICAg\nICAgIG51bGwsIG51bGwsIG51bGwsIHMpKTsKCiAgICAgICAgcGFzcyA9IGZh\nbHNlOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRlciA9IHRyYW5zYWN0aW9u\nTGlzdGVuZXIuZGVsZXRlZC5pdGVyYXRvcigpOyBpdGVyCiAgICAgICAgICAg\nIC5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGlmIChpdGVyLm5leHQoKS5l\ncXVhbHMob2lkKSkgewogICAgICAgICAgICAgICAgcGFzcyA9IHRydWU7CiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICBhc3NlcnRUcnVlKHBhc3MpOwogICAgICAgIGFzc2VydFRydWUo\ndHJhbnNhY3Rpb25MaXN0ZW5lci5hZGRlZC5zaXplKCkgPT0gMCk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZSh0cmFuc2FjdGlvbkxpc3RlbmVyLnVwZGF0ZWQuc2l6\nZSgpID09IDApOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcm92aWRl\ncigpIHsKICAgICAgICBSZW1vdGVDb21taXRQcm92aWRlclRlc3RJbXBsIHBy\nb3ZpZGVyOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtOwogICAg\nICAgIHN5bmNocm9uaXplZCAoY3VycmVudFByb3ZpZGVyTG9jaykgewogICAg\nICAgICAgICBNYXAgcHJvcHNNYXAgPSBuZXcgSGFzaE1hcCgpOwogICAgICAg\nICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlk\nZXIiLAogICAgICAgICAgICAgICAgUmVtb3RlQ29tbWl0UHJvdmlkZXJUZXN0\nSW1wbC5jbGFzcy5nZXROYW1lKCkKICAgICAgICAgICAgICAgICAgICArICIo\nVHJhbnNtaXRQZXJzaXN0ZWRPYmplY3RJZHM9dHJ1ZSkiKTsKICAgICAgICAg\nICAgcHJvcHNNYXAucHV0KCJvcGVuanBhLkRhdGFDYWNoZSIsICJ0cnVlIik7\nCiAgICAgICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBmYWN0\nb3J5ID0gZ2V0RW1mKHByb3BzTWFwKTsKCiAgICAgICAgICAgIHBtID0gKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKSBmYWN0b3J5LmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICAgICAgcHJvdmlkZXIgPSBjdXJyZW50UHJvdmlkZXI7\nCiAgICAgICAgfQoKICAgICAgICAvLyBnZXQgYW4gb2JqZWN0IGlkCiAgICAg\nICAgUnVudGltZVRlc3QxIHQxID0gbmV3IFJ1bnRpbWVUZXN0MSgiZm9vIiwg\nNSk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgcG0ucGVyc2lzdCh0\nMSk7CiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElkKHQxKTsK\nICAgICAgICBlbmRUeChwbSk7CgogICAgICAgIGJvb2xlYW4gcGFzcyA9IGZh\nbHNlOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRlciA9IHByb3ZpZGVyLmFk\nZGVkLml0ZXJhdG9yKCk7IGl0ZXIuaGFzTmV4dCgpOykgewogICAgICAgICAg\nICBPYmplY3QgYWRkZWQgPSBpdGVyLm5leHQoKTsKICAgICAgICAgICAgaWYg\nKGVxdWFscyhhZGRlZCwgb2lkKSkgewogICAgICAgICAgICAgICAgcGFzcyA9\nIHRydWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgICAgICBhc3NlcnRUcnVlKHBhc3MpOwogICAgICAgIGFz\nc2VydFRydWUocHJvdmlkZXIudXBkYXRlZC5zaXplKCkgPT0gMCk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZShwcm92aWRlci5kZWxldGVkLnNpemUoKSA9PSAwKTsK\nICAgIH0KCiAgICBib29sZWFuIGVxdWFscyhPYmplY3QgYWRkZWQsIE9iamVj\ndCBvaWQpIHsKICAgICAgICBpZiAoYWRkZWQuZXF1YWxzKG9pZCkpCiAgICAg\nICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGlmIChhZGRlZCBpbnN0YW5j\nZW9mIElkKQogICAgICAgICAgICByZXR1cm4gKChJZCkgYWRkZWQpLmdldElk\nT2JqZWN0KCkuZXF1YWxzKG9pZCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIFJlbW90ZUNvbW1pdExp\nc3RlbmVyVGVzdEltcGwgaW1wbGVtZW50cwogICAgICAgIFJlbW90ZUNvbW1p\ndExpc3RlbmVyIHsKCiAgICAgICAgdHJhbnNpZW50IENvbGxlY3Rpb24gYWRk\nZWQ7CgogICAgICAgIHRyYW5zaWVudCBDb2xsZWN0aW9uIHVwZGF0ZWQ7Cgog\nICAgICAgIHRyYW5zaWVudCBDb2xsZWN0aW9uIGRlbGV0ZWQ7CgogICAgICAg\nIHB1YmxpYyB2b2lkIGFmdGVyQ29tbWl0KFJlbW90ZUNvbW1pdEV2ZW50IGV2\nZW50KSB7CiAgICAgICAgICAgIHRoaXMuYWRkZWQgPSBldmVudC5nZXRQZXJz\naXN0ZWRPYmplY3RJZHMoKTsKICAgICAgICAgICAgdGhpcy51cGRhdGVkID0g\nZXZlbnQuZ2V0VXBkYXRlZE9iamVjdElkcygpOwogICAgICAgICAgICB0aGlz\nLmRlbGV0ZWQgPSBldmVudC5nZXREZWxldGVkT2JqZWN0SWRzKCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIHN0YXRpYyBjbGFzcyBSZW1vdGVDb21taXRQ\ncm92aWRlclRlc3RJbXBsIGV4dGVuZHMKICAgICAgICBBYnN0cmFjdFJlbW90\nZUNvbW1pdFByb3ZpZGVyIHsKCiAgICAgICAgQ29sbGVjdGlvbiBhZGRlZDsK\nCiAgICAgICAgQ29sbGVjdGlvbiB1cGRhdGVkOwoKICAgICAgICBDb2xsZWN0\naW9uIGRlbGV0ZWQ7CgogICAgICAgIHB1YmxpYyBSZW1vdGVDb21taXRQcm92\naWRlclRlc3RJbXBsKCkgewogICAgICAgICAgICBzeW5jaHJvbml6ZWQgKGN1\ncnJlbnRQcm92aWRlckxvY2spIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRQ\ncm92aWRlciA9IHRoaXM7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAg\nICAgIC8vIC0tLS0tLS0tLS0gUmVtb3RlQ29tbWl0UHJvdmlkZXIgaW1wbGVt\nZW50YXRpb24gLS0tLS0tLS0tLQoKICAgICAgICBwdWJsaWMgdm9pZCBicm9h\nZGNhc3QoUmVtb3RlQ29tbWl0RXZlbnQgZXZlbnQpIHsKICAgICAgICAgICAg\ndGhpcy5hZGRlZCA9IGV2ZW50LmdldFBlcnNpc3RlZE9iamVjdElkcygpOwog\nICAgICAgICAgICB0aGlzLnVwZGF0ZWQgPSBldmVudC5nZXRVcGRhdGVkT2Jq\nZWN0SWRzKCk7CiAgICAgICAgICAgIHRoaXMuZGVsZXRlZCA9IGV2ZW50Lmdl\ndERlbGV0ZWRPYmplY3RJZHMoKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIGNsb3NlKCkgewogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

