{"sha":"c28fed6d7e3a702017db5b4a9aca1bd12d798c24","node_id":"MDQ6QmxvYjIwNjM2NDpjMjhmZWQ2ZDdlM2E3MDIwMTdkYjViNGE5YWNhMWJkMTJkNzk4YzI0","size":10009,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c28fed6d7e3a702017db5b4a9aca1bd12d798c24","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXZlbnQ7\nCgppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0\naWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXZlbnQuY29tbW9uLmFwcHMuRHVy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nZXZlbnQuY29tbW9uLmFwcHMuUnVudGltZVRlc3QxOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0cmFj\ndFRlc3RDYXNlOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVudC5S\nZW1vdGVDb21taXRFdmVudDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5l\ndmVudC5SZW1vdGVDb21taXRMaXN0ZW5lcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5ldmVudC5UQ1BSZW1vdGVDb21taXRQcm92aWRlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJ\nOwoKcHVibGljIGNsYXNzIFRlc3RUQ1BSZW1vdGVFdmVudHNEdXJhdGlvbgog\nICAgZXh0ZW5kcyBBYnN0cmFjdFRlc3RDYXNlIHsKCiAgICBwdWJsaWMgVGVz\ndFRDUFJlbW90ZUV2ZW50c0R1cmF0aW9uKFN0cmluZyBzKSB7CiAgICAgICAg\nc3VwZXIocywgImV2ZW50Y2FjdHVzYXBwIik7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgZGVsZXRlQWxsKFJ1bnRpbWVUZXN0\nMS5jbGFzcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVhckRvd25UZXN0\nQ2xhc3MoKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8v\nc3VwZXIudGVhckRvd25UZXN0Q2xhc3MoKTsKICAgIH0KCiAgICAvLyBGWUkg\nRm9yIDEwMDAgb2JqZWN0cyB3aXRoIE15U1FMIC0tIDEwMDUgdHJhbnNhY3Rp\nb25zLAogICAgLy8gZG9UcmFuc2FjdGlvbnMgKCkgdGFrZXMgNDUgc2Vjb25k\ncwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IE5VTV9PQkpFQ1RTID0g\nMjAwOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IE5VTV9UT19BVkVS\nQUdFID0gMzsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBOVU1fQ09O\nQ1VSUkVOVCA9IDM7CgogICAgcHVibGljIHZvaWQgdGVzdER1cmF0aW9uRGlm\nZmVyZW5jZSgpIHsKICAgICAgICAvLyBjcmVhdGUgYSBub24tY2x1c2VydGVk\nLCBzaW5nbGUgcG1mCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5IGZhY3RvcnlTaW5nbGUgPSBjcmVhdGVEaXN0aW5jdEZhY3RvcnkoCiAg\nICAgICAgICAgIG51bGwsICIiKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIHBt\nU2luZ2xlID0gZmFjdG9yeVNpbmdsZS5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCgogICAgICAgIC8vIENyZWF0ZSAyIHBtZnMgdGhhdCBhcmUgdXNpbmcgUkNQ\nVENQLiBydW4gc2FtZSBiZW5hY2htYXJrIG9mCiAgICAgICAgLy8gdHJhbnNh\nY3Rpb25zCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IHNl\nbmRlckZhY3RvcnkxVENQID0KICAgICAgICAgICAgY3JlYXRlRGlzdGluY3RG\nYWN0b3J5KFRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyLmNsYXNzLAogICAgICAg\nICAgICAgICAgIk1heEFjdGl2ZT00LCBSZWNvdmVyeVRpbWVNaWxsaXM9MTAw\nMCwgUG9ydD01NjM2LCAiICsKICAgICAgICAgICAgICAgICAgICAiQWRkcmVz\nc2VzPTEyNy4wLjAuMTo1NjM2OzEyNy4wLjAuMTo2NjM2Iik7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IGZhY3RvcnkyVENQID0gY3Jl\nYXRlRGlzdGluY3RGYWN0b3J5KAogICAgICAgICAgICBUQ1BSZW1vdGVDb21t\naXRQcm92aWRlci5jbGFzcywKICAgICAgICAgICAgIlBvcnQ9NjYzNiwgQWRk\ncmVzc2VzPTEyNy4wLjAuMTo2NjM2OzEyNy4wLjAuMTo1NjM2Iik7CgogICAg\nICAgIC8vIFJlZ2lzdGVyIGEgUkNFTGlzdGVuZXIgd2l0aCB0aGUgUkNFTS4g\nVGhlIFJDRUxpc3RlbmVyCiAgICAgICAgLy8gd2lsbCByZWNvcmQgdGhlIG51\nbWJlciBvZgogICAgICAgIC8vIGEsZCwgYW5kIHUgcmVjZXZpZWQgd2hlbiB0\naGUgc2VuZGVyIFBNIHBlcmZvcm1zIGNvbW1pdHMuCiAgICAgICAgUmVtb3Rl\nQ29tbWl0TGlzdGVuZXJUZXN0SW1wbCBsaXN0ZW5lckF0UmVjZWl2ZXIKICAg\nICAgICAgICAgPSBuZXcgUmVtb3RlQ29tbWl0TGlzdGVuZXJUZXN0SW1wbCgp\nOwogICAgICAgICgoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJKSBm\nYWN0b3J5MlRDUCkuZ2V0Q29uZmlndXJhdGlvbigpCiAgICAgICAgICAgIC5n\nZXRSZW1vdGVDb21taXRFdmVudE1hbmFnZXIoKS4KICAgICAgICAgICAgYWRk\nTGlzdGVuZXIobGlzdGVuZXJBdFJlY2VpdmVyKTsKCiAgICAgICAgU3lzdGVt\nLm91dC5wcmludGxuKCItLS0tLS0tLS0tLS0tLS0tLS0tIik7CiAgICAgICAg\nU3lzdGVtLm91dC5wcmludGxuKCIzIFBNRnMgY3JlYXRlZCwgMSBhcyBzdGFu\nZGFsb25lLCBhbmQgMiBhY3RpbmcgIiArCiAgICAgICAgICAgICJhcyBhIGNs\ndXN0ZXIgdXNpbmcgcG9ydHMgNTYzNiBhbmQgNjYzNiIpOwogICAgICAgIC8v\nIFRoaXMgY2FsbCBpcyBhICJ0aHJvdyBhd2F5IiBydW4gdG8gc2VlZCBjYWNo\nZXMsIGV0Yy4KICAgICAgICBkb1RyYW5zYWN0aW9ucyhwbVNpbmdsZSwgTlVN\nX09CSkVDVFMpOwoKICAgICAgICBkb3VibGUgYmVuY2htYXJrU2luZ2xlID0g\nMC4wOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTlVNX1RPX0FWRVJB\nR0U7IGkrKykgewogICAgICAgICAgICBiZW5jaG1hcmtTaW5nbGUgKz0gZG9U\ncmFuc2FjdGlvbnMocG1TaW5nbGUsIE5VTV9PQkpFQ1RTKTsKICAgICAgICB9\nCiAgICAgICAgYmVuY2htYXJrU2luZ2xlIC89IE5VTV9UT19BVkVSQUdFOwoK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIHBtT25lVGhyZWFkID0KICAgICAgICAg\nICAgc2VuZGVyRmFjdG9yeTFUQ1AuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIGRvdWJsZSBiZW5jaG1hcmtDbHVzdGVyT25lVGhyZWFkID0gZG9U\ncmFuc2FjdGlvbnMocG1PbmVUaHJlYWQsCiAgICAgICAgICAgIE5VTV9PQkpF\nQ1RTKTsKICAgICAgICBwbU9uZVRocmVhZC5jbG9zZSgpOwoKICAgICAgICBE\ndXJhdGlvbiB0aW1lVGhyZWFkZWQgPSBuZXcgRHVyYXRpb24oIkZvciAiICsg\nTlVNX0NPTkNVUlJFTlQgKwogICAgICAgICAgICAiIGNvbmN1cnJlbnQgdGhy\nZWFkcyBwZXJmb3JtaW5nIEFkZHMsIHJlbW92ZXMsIGFuZCBkbGV0ZXMgZm9y\nICIgKwogICAgICAgICAgICBOVU1fT0JKRUNUUyArICIgb2JqZWN0cy4iKTsK\nCiAgICAgICAgVGhyZWFkW10gY29uY3VycmVudFRocmVhZHMgPSBuZXcgVGhy\nZWFkW05VTV9DT05DVVJSRU5UXTsKICAgICAgICB0aW1lVGhyZWFkZWQuc3Rh\ncnQoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE5VTV9DT05DVVJS\nRU5UOyBpKyspIHsKICAgICAgICAgICAgV29ya2VyIHdvcmtlciA9IG5ldyBX\nb3JrZXIKICAgICAgICAgICAgICAgIChzZW5kZXJGYWN0b3J5MVRDUC5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCkpOwogICAgICAgICAgICBjb25jdXJyZW50VGhy\nZWFkc1tpXSA9IG5ldyBUaHJlYWQod29ya2VyKTsKICAgICAgICAgICAgY29u\nY3VycmVudFRocmVhZHNbaV0uc3RhcnQoKTsKICAgICAgICB9CiAgICAgICAg\nLy8gV2FpdCBmb3IgYWxsIHRocmVhZHMgdG8gZmluaXNoCiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBOVU1fQ09OQ1VSUkVOVDsgaSsrKSB7CiAgICAg\nICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25jdXJyZW50VGhyZWFk\nc1tpXS5qb2luKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKGZhbHNlKTsKICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nICAgIHRpbWVUaHJlYWRlZC5zdG9wKCk7CiAgICAgICAgZG91YmxlIGJlbmNo\nbWFya0NsdXN0ZXIgPSB0aW1lVGhyZWFkZWQuZ2V0RHVyYXRpb25Bc1NlY29u\nZHMoKTsKCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJGb3IgIiArIE5V\nTV9PQkpFQ1RTICsgIiBvYmplY3RzLCBhbmQgIiArCiAgICAgICAgICAgIE5V\nTV9DT05DVVJSRU5UICsgIiBjb25jdXJyZW50IHRocmVhZHMsIHRoZSByZWNl\naXZpbmcgcG1mIG9mIHRoZSAiICsKICAgICAgICAgICAgImNsdXN0ZXIgcmVj\nZWl2ZWQgOiIgKwogICAgICAgICAgICBsaXN0ZW5lckF0UmVjZWl2ZXIudG90\nYWxBZGRlZENsYXNzZXMgKyAiIGNsYWFzZXMgYWRkcywgIiArCiAgICAgICAg\nICAgIGxpc3RlbmVyQXRSZWNlaXZlci50b3RhbERlbGV0ZWQgKyAiIGRlbGV0\nZXMsICIgKwogICAgICAgICAgICBsaXN0ZW5lckF0UmVjZWl2ZXIudG90YWxV\ncGRhdGVkICsgIiB1cGRhdGVzIik7CiAgICAgICAgU3lzdGVtLm91dC5wcmlu\ndGxuKAogICAgICAgICAgICAiXG5TaW5nbGUgcG1mIC0gIiArIGJlbmNobWFy\na1NpbmdsZSArCiAgICAgICAgICAgICAgICAiKHMpLlxuIENsdXN0ZXJlZCBw\nbWZzIChvbmUgd29ya2VyIHRocmVhZCkgLSIKICAgICAgICAgICAgICAgICsg\nYmVuY2htYXJrQ2x1c3Rlck9uZVRocmVhZCArCiAgICAgICAgICAgICAgICAi\nKHMpLlxuIENsdXN0ZXJlZCBwbWZzICgiICsgTlVNX0NPTkNVUlJFTlQKICAg\nICAgICAgICAgICAgICsgIiB0aHJlYWRzIC0gIiArIGJlbmNobWFya0NsdXN0\nZXIgKyAiKHMpLlxuIik7CgogICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFk\nKCkueWllbGQoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBUaHJlYWQu\nY3VycmVudFRocmVhZCgpLnNsZWVwKChpbnQpIDUwMCk7CiAgICAgICAgfSBj\nYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICAgICAgICBm\nYWlsKCJ1bmV4ZWNwdGVkIGV4Y2VwdGlvbiBkdXJpbmcgcGF1c2UiKTsKICAg\nICAgICB9CiAgICAgICAgYXNzZXJ0RXF1YWxzKChOVU1fQ09OQ1VSUkVOVCAr\nIDEpICogTlVNX09CSkVDVFMsCiAgICAgICAgICAgIGxpc3RlbmVyQXRSZWNl\naXZlci50b3RhbEFkZGVkQ2xhc3Nlcyk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKChOVU1fQ09OQ1VSUkVOVCArIDEpICogTlVNX09CSkVDVFMsCiAgICAgICAg\nICAgIGxpc3RlbmVyQXRSZWNlaXZlci50b3RhbERlbGV0ZWQpOwogICAgICAg\nIGFzc2VydEVxdWFscygoTlVNX0NPTkNVUlJFTlQgKyAxKSAqIE5VTV9PQkpF\nQ1RTLAogICAgICAgICAgICBsaXN0ZW5lckF0UmVjZWl2ZXIudG90YWxVcGRh\ndGVkKTsKCiAgICAgICAgLy8gc2h1dGRvd24KICAgICAgICBwbVNpbmdsZS5j\nbG9zZSgpOwogICAgICAgIGZhY3RvcnlTaW5nbGUuY2xvc2UoKTsKCiAgICAg\nICAgZmFjdG9yeTJUQ1AuY2xvc2UoKTsKICAgICAgICBzZW5kZXJGYWN0b3J5\nMVRDUC5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAgICoJV29ya2VyIHRo\ncmVhZCB0aGF0IHRha2VzIG93bmVyc2hpcCBvZiBhIFBNIHRvIHBlcmZvcm0K\nICAgICAgKgl0cmFuc2FjdGlvbnMuIE9uY2UgdHJhbnNhY3Rpb25zIGFyZSBj\nb21wbGV0ZSB0aGUgdHJlYWQKICAgICAgKgl3aWxsIGNsb3NlIHRoZSBQTSBh\nbmQgZW5kLgogICAgICAqLwogICAgcHJpdmF0ZSBjbGFzcyBXb3JrZXIKICAg\nICAgICBpbXBsZW1lbnRzIFJ1bm5hYmxlIHsKCiAgICAgICAgcHJpdmF0ZSBF\nbnRpdHlNYW5hZ2VyIF9wbTsKCiAgICAgICAgcHVibGljIFdvcmtlcihFbnRp\ndHlNYW5hZ2VyIHBtKSB7CiAgICAgICAgICAgIF9wbSA9IHBtOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICBk\nb1RyYW5zYWN0aW9ucyhfcG0sIE5VTV9PQkpFQ1RTKTsKICAgICAgICAgICAg\nZW5kRW0oX3BtKTsKICAgICAgICB9CiAgICB9CgogICAgcHJvdGVjdGVkIGRv\ndWJsZSBkb1RyYW5zYWN0aW9ucyhFbnRpdHlNYW5hZ2VyIHBtLCBpbnQgbnVt\nT2JqZWN0cykgewogICAgICAgIC8vIFBlcmZvcm0gYSBzZXJpZXMgb2YgdHJh\nbnNhY3Rpb25zICB0aGF0IHdpbGwgdHJpZ2dlcgogICAgICAgIC8vIGFkZHMs\nIGRlbGV0ZXMsIGFuZCB1ZHBhdGVzCiAgICAgICAgRHVyYXRpb24gdGltZVRv\nQU1EID0gbmV3IER1cmF0aW9uKAogICAgICAgICAgICAiQWRkcywgcmVtb3Zl\ncywgYW5kIGRsZXRlcyBmb3IgIiArIG51bU9iamVjdHMgKyAiIG9iamVjdHMu\nIik7CiAgICAgICAgdGltZVRvQU1ELnN0YXJ0KCk7CgogICAgICAgIC8vIGNy\nZWF0ZSBvYmplY3RzCiAgICAgICAgUnVudGltZVRlc3QxW10gcGVyc2lzdGFi\nbGVzID0gbmV3IFJ1bnRpbWVUZXN0MVtudW1PYmplY3RzXTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHBlcnNpc3RhYmxlcy5sZW5ndGg7IGkrKykg\newogICAgICAgICAgICBwZXJzaXN0YWJsZXNbaV0gPSBuZXcgUnVudGltZVRl\nc3QxKCJmb28gIyIgKyBpLCBpKTsKICAgICAgICB9CgogICAgICAgIC8vIGFk\nZCB0aGVtCiAgICAgICAgLy8gVGhpcyB3aWxsIGdlbmVyYXRlIGEgbGFyZ2Vy\nIG51bWJlciBvZiB0cmFuc2FjdGlvbiBpbiBhIHZlcnkKICAgICAgICAvLyBz\naG9ydCBhbW91bnQgb2YgdGltZSAob2xkIHNvY2tldC1wZXItdHJhbnNhY3Rp\nb24gd291bGQKICAgICAgICAvLyBleGhhdXN0IGp2bSBzb2NrZXQgcG9vbCkK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBlcnNpc3RhYmxlcy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICAg\nICAgcG0ucGVyc2lzdChwZXJzaXN0YWJsZXNbaV0pOwogICAgICAgICAgICBl\nbmRUeChwbSk7CiAgICAgICAgfQoKICAgICAgICAvLyBtb2RpZnkgdGhlbQog\nICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgcGVyc2lzdGFibGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHBl\ncnNpc3RhYmxlc1tpXS5zZXRTdHJpbmdGaWVsZCgiYmF6emVkIiArIGkpOwog\nICAgICAgIH0KICAgICAgICBlbmRUeChwbSk7CgogICAgICAgIC8vIGRlbGV0\nZSB0aGVtCiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBwZXJzaXN0YWJsZXMubGVuZ3RoOyBpKyspIHsKICAgICAg\nICAgICAgcG0ucmVtb3ZlKHBlcnNpc3RhYmxlc1tpXSk7CiAgICAgICAgfQog\nICAgICAgIGVuZFR4KHBtKTsKCiAgICAgICAgdGltZVRvQU1ELnN0b3AoKTsK\nICAgICAgICByZXR1cm4gdGltZVRvQU1ELmdldER1cmF0aW9uQXNTZWNvbmRz\nKCk7CiAgICB9CgogICAgc3RhdGljIGludCBfZmV0Y2hHcm91cFNlcmlhbCA9\nIDA7CgogICAgcHJvdGVjdGVkIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neSBjcmVhdGVEaXN0aW5jdEZhY3RvcnkoCiAgICAgICAgQ2xhc3MgcHJvdmlk\nZXJDbGFzcywgU3RyaW5nIGNsYXNzUHJvcHMxKSB7CiAgICAgICAgU3RyaW5n\nIHRyYW5zbWl0ID0gIlRyYW5zbWl0UGVyc2lzdGVkT2JqZWN0SWRzPXRydWUi\nOwogICAgICAgIGlmIChjbGFzc1Byb3BzMSA9PSBudWxsIHx8IGNsYXNzUHJv\ncHMxLmxlbmd0aCgpID09IDApCiAgICAgICAgICAgIGNsYXNzUHJvcHMxID0g\ndHJhbnNtaXQ7CiAgICAgICAgZWxzZQogICAgICAgICAgICBjbGFzc1Byb3Bz\nMSArPSAiLCIgKyB0cmFuc21pdDsKCiAgICAgICAgTWFwIHByb3BzTWFwOwog\nICAgICAgIGlmIChwcm92aWRlckNsYXNzICE9IG51bGwpIHsKCiAgICAgICAg\nICAgIHByb3BzTWFwID0gbmV3IEhhc2hNYXAoKTsKICAgICAgICAgICAgcHJv\ncHNNYXAucHV0KCJvcGVuanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVyIiwgQ29u\nZmlndXJhdGlvbnMuCiAgICAgICAgICAgICAgICBnZXRQbHVnaW4ocHJvdmlk\nZXJDbGFzcy5nZXROYW1lKCksIGNsYXNzUHJvcHMxKSk7CiAgICAgICAgICAg\nIHByb3BzTWFwLnB1dCgib3BlbmpwYS5GZXRjaEdyb3VwcyIsICJkaWZmZXJl\nbnRpYXRpbmdGZXRjaEdyb3VwIiArCiAgICAgICAgICAgICAgICBfZmV0Y2hH\ncm91cFNlcmlhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g\nTm8gUkNQCgogICAgICAgICAgICBwcm9wc01hcCA9IG5ldyBIYXNoTWFwKCk7\nCiAgICAgICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5SZW1vdGVDb21t\naXRQcm92aWRlciIsCiAgICAgICAgICAgICAgICAic2p2bShUcmFuc21pdFBl\ncnNpc3RlZE9iamVjdElkcz10cnVlKSIpOwogICAgICAgICAgICBwcm9wc01h\ncC5wdXQoIm9wZW5qcGEuRmV0Y2hHcm91cHMiLCAiZGlmZmVyZW50aWF0aW5n\nRmV0Y2hHcm91cCIgKwogICAgICAgICAgICAgICAgX2ZldGNoR3JvdXBTZXJp\nYWwpOwogICAgICAgIH0KICAgICAgICBfZmV0Y2hHcm91cFNlcmlhbCArPSAx\nOwoKICAgICAgICByZXR1cm4gZ2V0RW1mKHByb3BzTWFwKTsKICAgIH0KCiAg\nICBwcm90ZWN0ZWQgc3RhdGljIGNsYXNzIFJlbW90ZUNvbW1pdExpc3RlbmVy\nVGVzdEltcGwKICAgICAgICBpbXBsZW1lbnRzIFJlbW90ZUNvbW1pdExpc3Rl\nbmVyIHsKCiAgICAgICAgQ29sbGVjdGlvbiBhZGRDbGFzc2VzOwogICAgICAg\nIENvbGxlY3Rpb24gYWRkZWQ7CiAgICAgICAgQ29sbGVjdGlvbiB1cGRhdGVk\nOwogICAgICAgIENvbGxlY3Rpb24gZGVsZXRlZDsKICAgICAgICBpbnQgdG90\nYWxBZGRlZENsYXNzZXM7CiAgICAgICAgaW50IHRvdGFsVXBkYXRlZDsKICAg\nICAgICBpbnQgdG90YWxEZWxldGVkOwoKICAgICAgICBwdWJsaWMgc3luY2hy\nb25pemVkIHZvaWQgYWZ0ZXJDb21taXQoUmVtb3RlQ29tbWl0RXZlbnQgZXZl\nbnQpIHsKICAgICAgICAgICAgdGhpcy5hZGRDbGFzc2VzID0gZXZlbnQuZ2V0\nUGVyc2lzdGVkVHlwZU5hbWVzKCk7CiAgICAgICAgICAgIHRoaXMudXBkYXRl\nZCA9IGV2ZW50LmdldFVwZGF0ZWRPYmplY3RJZHMoKTsKICAgICAgICAgICAg\ndGhpcy5kZWxldGVkID0gZXZlbnQuZ2V0RGVsZXRlZE9iamVjdElkcygpOwoK\nICAgICAgICAgICAgdG90YWxBZGRlZENsYXNzZXMgKz0gYWRkQ2xhc3Nlcy5z\naXplKCk7CiAgICAgICAgICAgIHRvdGFsVXBkYXRlZCArPSB1cGRhdGVkLnNp\nemUoKTsKICAgICAgICAgICAgdG90YWxEZWxldGVkICs9IGRlbGV0ZWQuc2l6\nZSgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgY2xvc2UoKSB7\nCiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

