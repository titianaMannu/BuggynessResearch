{"sha":"56bfbb599b51af1f3b0c9f80bc895da7849f6c5f","node_id":"MDQ6QmxvYjIwNjM2NDo1NmJmYmI1OTliNTFhZjFmM2IwYzlmODBiYzg5NWRhNzg0OWY2YzVm","size":12776,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/56bfbb599b51af1f3b0c9f80bc895da7849f6c5f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXZlbnQ7\nCgppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0\naWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXZlbnQuY29tbW9uLmFwcHMuRHVy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nZXZlbnQuY29tbW9uLmFwcHMuUnVudGltZVRlc3QxOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0cmFj\ndFRlc3RDYXNlOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVudC5S\nZW1vdGVDb21taXRFdmVudDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5l\ndmVudC5SZW1vdGVDb21taXRMaXN0ZW5lcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5ldmVudC5UQ1BSZW1vdGVDb21taXRQcm92aWRlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJ\nOwoKcHVibGljIGNsYXNzIFRlc3RUQ1BSZW1vdGVSZWNvdmVyeVRyYW5zbWl0\nQWRkcwogICAgZXh0ZW5kcyBBYnN0cmFjdFRlc3RDYXNlIHsKCiAgICBwdWJs\naWMgVGVzdFRDUFJlbW90ZVJlY292ZXJ5VHJhbnNtaXRBZGRzKFN0cmluZyBz\nKSB7CiAgICAgICAgc3VwZXIocywgImV2ZW50Y2FjdHVzYXBwIik7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgZGVsZXRlQWxs\nKFJ1bnRpbWVUZXN0MS5jbGFzcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVhckRvd25UZXN0Q2xhc3MoKQogICAgICAgIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIC8vc3VwZXIudGVhckRvd25UZXN0Q2xhc3MoKTsKICAgIH0K\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgTlVNX09CSkVDVFMgPSAx\nOwoKICAgIHByaXZhdGUgdm9pZCBwYXVzZShkb3VibGUgc2Vjb25kcykgewog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFk\nKCkueWllbGQoKTsKICAgICAgICAgICAgVGhyZWFkLmN1cnJlbnRUaHJlYWQo\nKS5zbGVlcCgoaW50KSBzZWNvbmRzICogMTAwMCk7CiAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdFJlY2VpdmVyUmVjb3ZlcnMoKSB7CiAgICAgICAgLy8gQ3Jl\nYXRlIHR3byBwbWZzIGluIGEgY2x1c3RlciB0aGF0IGFyZSB1c2luZyBSQ1BU\nQ1AuCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IHBtZlNl\nbmRlciA9IGNyZWF0ZURpc3RpbmN0RmFjdG9yeSgKICAgICAgICAgICAgVENQ\nUmVtb3RlQ29tbWl0UHJvdmlkZXIuY2xhc3MsCiAgICAgICAgICAgICJQb3J0\nPTU2MzYsIEFkZHJlc3Nlcz0xMjcuMC4wLjE6NTYzNjsxMjcuMC4wLjE6NjYz\nNiIpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBwbWZS\nZWNlaXZlciA9IGNyZWF0ZURpc3RpbmN0RmFjdG9yeSgKICAgICAgICAgICAg\nVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIuY2xhc3MsCiAgICAgICAgICAgICJQ\nb3J0PTY2MzYsIEFkZHJlc3Nlcz0xMjcuMC4wLjE6NjYzNjsxMjcuMC4wLjE6\nNTYzNiIpOwoKICAgICAgICAvLyBSZWdpc3RlciBhIFJDRUxpc3RlbmVyIHdp\ndGggdGhlIFJDRU0uIE91ciBSQ0VMaXN0ZW5lciB3aWxsCiAgICAgICAgLy8g\ncmVjb3JkIHRoZSB0b3RhbCBudW1iZXIgb2YgYSxkLCBhbmQgdSByZWNldmll\nZCBmcm9tIGVhY2gKICAgICAgICAvLyBSQ0UgYXMgdGhlIHNlbmRpbmcgUE0g\ncGVyZm9ybXMgY29tbWl0cy4KICAgICAgICBSZW1vdGVDb21taXRMaXN0ZW5l\nclRlc3RJbXBsIGxpc3RlbmVyQXRSZWNlaXZlcgogICAgICAgICAgICA9IG5l\ndyBSZW1vdGVDb21taXRMaXN0ZW5lclRlc3RJbXBsKCk7CiAgICAgICAgKChP\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpIHBtZlJlY2VpdmVyKS5n\nZXRDb25maWd1cmF0aW9uKCkKICAgICAgICAgICAgLmdldFJlbW90ZUNvbW1p\ndEV2ZW50TWFuYWdlcigpLgogICAgICAgICAgICBhZGRMaXN0ZW5lcihsaXN0\nZW5lckF0UmVjZWl2ZXIpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIHBtU2Vu\nZGVyID0gcG1mU2VuZGVyLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAg\nICAgU3lzdGVtLm91dC5wcmludGxuKCItLS0tLS0tLS0tLS0tLS0tLS0tIik7\nCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCIyIFBNRnMgY3JlYXRlZCwg\nYWN0aW5nIGFzIGEgY2x1c3RlciB1c2luZyBwb3J0cyAiICsKICAgICAgICAg\nICAgIjU2MzYgYW5kIDY2MzYiKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50\nbG4oIlRlc3Rpbmcgc2NlbmFyaW8gd2hlcmUgcmVjZWl2ZXIgaXMgZmFpbGVk\nLCB0aGVuICIgKwogICAgICAgICAgICAicmVjb3ZlcmVkICIpOwogICAgICAg\nIFN5c3RlbS5vdXQucHJpbnRsbigiYWZ0ZXIgdHdvIHRpbWVvdXRzIGFsbCB0\naGUgd2hpbGUgd2l0aCB0aGUgIiArCiAgICAgICAgICAgICJzZW5kaW5nIHBt\nIGNvbnRpbnVpbmciKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oInRv\nIHNlbmQuIik7CgogICAgICAgIC8vIFBlcmZvcm0gYSBzZXQgb2YgdHJhbnNh\nY3Rpb25zLiBFdmVudHMgd2lsbCBiZSBjb21tdW5pY2F0ZWQKICAgICAgICBw\nZXJmb3JtQWRkc01vZGlmaWVzRGVsZXRlcyhwbVNlbmRlciwgTlVNX09CSkVD\nVFMpOwoKICAgICAgICAvLyBXYWl0IGZvciBhIGJpdCBzbyB0aGUgcmVjZWl2\nZXIgY2FuIGdldCB0aGUgZXZlbnQuCiAgICAgICAgcGF1c2UoMyk7CiAgICAg\nICAgLy8gTm93IEZhaWwgdGhlIHJlY2VpdmVyIGluIHRoZSBjbHVzdGVyCiAg\nICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJBYm91dCB0byBjbG9zZSB0aGUg\ncmVjZWl2aW5nIHBtZi4iKTsKICAgICAgICBwbWZSZWNlaXZlci5jbG9zZSgp\nOwogICAgICAgIC8vIFdhaXQgZm9yIGEgYml0IGxvbmdlciBzbyB0aGUgbGlz\ndGVuZXIncyB0aHJlYWRzIGFsbAogICAgICAgIC8vIGdldCBjbG9zZWQgb3V0\nLgogICAgICAgIHBhdXNlKDMpOwogICAgICAgIGFzc2VydEVxdWFscyhOVU1f\nT0JKRUNUUywgbGlzdGVuZXJBdFJlY2VpdmVyLnRvdGFsQWRkZWQpOwogICAg\nICAgIGFzc2VydEVxdWFscyhOVU1fT0JKRUNUUywgbGlzdGVuZXJBdFJlY2Vp\ndmVyLnRvdGFsRGVsZXRlZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKE5VTV9P\nQkpFQ1RTLCBsaXN0ZW5lckF0UmVjZWl2ZXIudG90YWxVcGRhdGVkKTsKCiAg\nICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJZb3Ugc2hvdWxkIG5vdyBzZWUg\nMSBXQVJOIHRyaWdnZXJlZCBhcyB0aGUgIiArCiAgICAgICAgICAgICJzZW5k\nZXItcG1mIHRyaWVzIHRvIHNlbmQuIik7CiAgICAgICAgLy8gUGVyZm9ybSBz\nZWNvbmQgc2V0IG9mIHRyYW5zYWN0aW9ucy4gVGhpcyB3aWxsIHRyaWdnZXIg\nYSBzaW5nbGUKICAgICAgICAvLyBsb2cgV0FSTiBhcyB0aGUgcG1mIHdvbid0\nIGJlIGFibGUgdG8gY29tbXVuY2lhdGUgZXZlbnRzIHRvIHRoZQogICAgICAg\nIC8vIHNlY29uZCBtZW1iZXIgb2YgdGhlIGNsdXN0ZXIuCiAgICAgICAgcGVy\nZm9ybUFkZHNNb2RpZmllc0RlbGV0ZXMocG1TZW5kZXIsIE5VTV9PQkpFQ1RT\nKTsKCiAgICAgICAgLy8gV2FpdCBmb3IgYSByZWNvdmVyeXRpbWUsIHRyeSB0\ncmFuc2FjdGlvbnMgYWdhaW4sIHRoaXMgd2lsbAogICAgICAgIC8vIHRyaWdn\nZXIgYW4gSU5GTwogICAgICAgIHBhdXNlKDE1LjEpOwogICAgICAgIFN5c3Rl\nbS5vdXQucHJpbnRsbigiV2FpdGVkIGZvciBhIHdoaWxlLiBTaG91bGQgc2Vl\nIDEgSU5GTyBmb3IgbmV4dCAiICsKICAgICAgICAgICAgInRyYW5zYWN0aW9u\nLiIpOwoKICAgICAgICAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIHNpbmdsZSBs\nb2cgSU5GTwogICAgICAgIHBlcmZvcm1BZGRzTW9kaWZpZXNEZWxldGVzKHBt\nU2VuZGVyLCBOVU1fT0JKRUNUUyk7CiAgICAgICAgLy8gVGhpcyBkZWxheSBz\naG91bGQgZW5zdXJlIHRoaXMgc2Vjb25kIHNlbnQgb2YKICAgICAgICAvLyB0\ncmFuc21pc3Npb25zIGlzIGRyb3BwZWQgYXMgZXhwZWN0ZWQuIElmIHdlCiAg\nICAgICAgLy8gZG9uJ3QgcGF1c2UsIHRoZSBuZXcgcG1mIGNhbiBiZSBjcmVh\ndGVkLCB0aGVuIHRoZQogICAgICAgIC8vIGV2ZW50cyB3aWxsIGJlIHNlbnQg\nYnkgdGhlIHdvcmtlciB0aHJlYWRzLCBhbmQKICAgICAgICAvLyB0aGUgbmV3\nIHBtZiB3aWxsIHJlY2VpdmUgdGhpcyBtZXNzYWdlcyAod2hpY2gKICAgICAg\nICAvLyBhcmUgc3VwcG9zZWQgdG8gYmUgZHJvcHBlZCkKICAgICAgICBwYXVz\nZSgxLjEpOwoKICAgICAgICAvLyAtLS0tLQogICAgICAgIC8vIE5vdyByZWNv\ndmVyeSB0aGUgUmVjZWl2ZXIgYW5kIHRlc3QgdGhhdCBtZXNzYWdlcwogICAg\nICAgIC8vIHJlc3VtZSBiZWluZyBkZWxpdmVyZWQuCiAgICAgICAgLy8gLS0t\nLS0KCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJSZWNvdmVyaW5nIHJl\nY2VpdmVyIHBtZi4iKTsKICAgICAgICAvLyBSZWNyZWF0ZSB0aGUgbGlzdGVu\nZXIgcG1mIG9mIHRoZSBjbHVzdGVyLgogICAgICAgIHBtZlJlY2VpdmVyID0g\nY3JlYXRlRGlzdGluY3RGYWN0b3J5KAogICAgICAgICAgICBUQ1BSZW1vdGVD\nb21taXRQcm92aWRlci5jbGFzcywKICAgICAgICAgICAgIlBvcnQ9NjYzNiwg\nQWRkcmVzc2VzPTEyNy4wLjAuMTo2NjM2OzEyNy4wLjAuMTo1NjM2Iik7CiAg\nICAgICAgcGF1c2UoMS4wKTsKICAgICAgICAvLyByZVJlZ2lzdGVyIHRoZSBz\nYW1lIGxpc3RlbmVyCiAgICAgICAgKChPcGVuSlBBRW50aXR5TWFuYWdlckZh\nY3RvcnlTUEkpIHBtZlJlY2VpdmVyKS5nZXRDb25maWd1cmF0aW9uKCkKICAg\nICAgICAgICAgLmdldFJlbW90ZUNvbW1pdEV2ZW50TWFuYWdlcigpLgogICAg\nICAgICAgICBhZGRMaXN0ZW5lcihsaXN0ZW5lckF0UmVjZWl2ZXIpOwogICAg\nICAgIGFzc2VydEVxdWFscyhOVU1fT0JKRUNUUywgbGlzdGVuZXJBdFJlY2Vp\ndmVyLnRvdGFsQWRkZWQpOwogICAgICAgIGFzc2VydEVxdWFscyhOVU1fT0JK\nRUNUUywgbGlzdGVuZXJBdFJlY2VpdmVyLnRvdGFsRGVsZXRlZCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKE5VTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVjZWl2\nZXIudG90YWxVcGRhdGVkKTsKCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxu\nKCJOb3cgd2FpdGluZyBhIHJlY292ZXJ5dGltZSBzbyB0aGF0IHRoZSBzZW5k\nZXIiKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIndpbGwgcmVzdW1l\nIHRyeWluZyB0byBjb25uZWN0IHRvIHRoZSByZWNlaXZlci4iKTsKICAgICAg\nICBwYXVzZSgxNS4xKTsKCiAgICAgICAgLy8gVGhlc2UgZXZlbnRzIHNob3Vs\nZCBnZXQgY29tbXVuaWNhdGVkLgogICAgICAgIHBlcmZvcm1BZGRzTW9kaWZp\nZXNEZWxldGVzKHBtU2VuZGVyLCBOVU1fT0JKRUNUUyk7CgogICAgICAgIC8v\nIFdhaXQgZm9yIGEgbGFzdCBsaXR0bGUgYml0IHNvIHRoZSBsaXN0ZW5lciB0\naHJlYWQgaW4KICAgICAgICAvLyB0aGUgcmVjZWl2ZXIgUE1GIGNhbiBnZXQg\nYWxsIG1lc3NhZ2VzLgogICAgICAgIHBhdXNlKDEuMCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDIgKiBOVU1fT0JKRUNUUywgbGlzdGVuZXJBdFJlY2VpdmVy\nLnRvdGFsQWRkZWQpOwogICAgICAgIGFzc2VydEVxdWFscygyICogTlVNX09C\nSkVDVFMsIGxpc3RlbmVyQXRSZWNlaXZlci50b3RhbERlbGV0ZWQpOwogICAg\nICAgIGFzc2VydEVxdWFscygyICogTlVNX09CSkVDVFMsIGxpc3RlbmVyQXRS\nZWNlaXZlci50b3RhbFVwZGF0ZWQpOwoKICAgICAgICAvLyBzaHV0ZG93bgog\nICAgICAgIHBtU2VuZGVyLmNsb3NlKCk7CiAgICAgICAgcG1mU2VuZGVyLmNs\nb3NlKCk7CiAgICAgICAgcG1mUmVjZWl2ZXIuY2xvc2UoKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0U2VuZGVyUmVjb3ZlcnMoKSB7CiAgICAgICAg\nLy8gQ3JlYXRlIHR3byBwbWZzIGluIGEgY2x1c3RlciB0aGF0IGFyZSB1c2lu\nZyBSQ1BUQ1AuCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5\nIHBtZlNlbmRlciA9IGNyZWF0ZURpc3RpbmN0RmFjdG9yeSgKICAgICAgICAg\nICAgVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIuY2xhc3MsCiAgICAgICAgICAg\nICJQb3J0PTU2MzcsIEFkZHJlc3Nlcz0xMjcuMC4wLjE6NTYzNzsxMjcuMC4w\nLjE6NjYzNyIpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neSBwbWZSZWNlaXZlciA9IGNyZWF0ZURpc3RpbmN0RmFjdG9yeSgKICAgICAg\nICAgICAgVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIuY2xhc3MsCiAgICAgICAg\nICAgICJQb3J0PTY2MzcsIEFkZHJlc3Nlcz0xMjcuMC4wLjE6NjYzNzsxMjcu\nMC4wLjE6NTYzNyIpOwoKICAgICAgICBSZW1vdGVDb21taXRMaXN0ZW5lclRl\nc3RJbXBsIGxpc3RlbmVyQXRSZWNlaXZlcgogICAgICAgICAgICA9IG5ldyBS\nZW1vdGVDb21taXRMaXN0ZW5lclRlc3RJbXBsKCk7CiAgICAgICAgKChPcGVu\nSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpIHBtZlJlY2VpdmVyKS5nZXRD\nb25maWd1cmF0aW9uKCkKICAgICAgICAgICAgLmdldFJlbW90ZUNvbW1pdEV2\nZW50TWFuYWdlcigpLgogICAgICAgICAgICBhZGRMaXN0ZW5lcihsaXN0ZW5l\nckF0UmVjZWl2ZXIpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIHBtU2VuZGVy\nID0gcG1mU2VuZGVyLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAg\nU3lzdGVtLm91dC5wcmludGxuKCItLS0tLS0tLS0tLS0tLS0tLS0tIik7CiAg\nICAgICAgU3lzdGVtLm91dC5wcmludGxuKCIyIFBNRnMgY3JlYXRlZCwgYWN0\naW5nIGFzIGEgY2x1c3RlciB1c2luZyBwb3J0cyAiICsKICAgICAgICAgICAg\nIjU2MzcgYW5kIDY2MzciKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4o\nIlRlc3Rpbmcgc2NlbmFyaW8gd2hlcmUgc2VuZGVyIGZhaWxzIGFuZCB0aGVu\nICIgKwogICAgICAgICAgICAibGF0ZXIgcmVjb3ZlcnMuIik7CiAgICAgICAg\nU3lzdGVtLm91dC5wcmludGxuKCJBbGwgdGhlIHdoaWxlIHRoZSByZWNlaXZp\nbmcgcG0gc3RheXMgdXAgYW5kICIgKwogICAgICAgICAgICAic2hvdWxkIHJl\nY2VpdmUiKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkV2ZW50cyAo\nYm90aCBiZWZvcmUgYW5kIGFmdGVyIHRoZSBzZW5kZXIncyAiICsKICAgICAg\nICAgICAgImZhaWx1cmUpLiIpOwoKICAgICAgICAvLyBQZXJmb3JtIGEgc2V0\nIG9mIHRyYW5zYWN0aW9ucy4gRXZlbnRzIGluIHRoZSBjbHVzdGVyIHdpbGwg\nYmUKICAgICAgICAvLyBjb21tdW5pY2F0ZWQKICAgICAgICBwZXJmb3JtQWRk\nc01vZGlmaWVzRGVsZXRlcyhwbVNlbmRlciwgTlVNX09CSkVDVFMpOwoKICAg\nICAgICAvLyBXYWl0IGZvciBhIGJpdCBzbyB0aGUgc29ja2V0cyBpbiBvdXIg\nc2VuZGVyIFBNRiBjYW4gZnVsbHkgdHJhbnNtaXQKICAgICAgICAvLyB0aGVp\nciBFdmVudCBtZXNzYWdlcyB0byB0aGUgcmVjZWl2ZXIgUE1GLgogICAgICAg\nIHBhdXNlKDIuMSk7CiAgICAgICAgLy8gRmFpbCB0aGUgU2VuZGVyIGluIG91\nciBjbHVzdGVyCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJTZW5kZXIg\ncG1mIGNsb3NlZC4iKTsKICAgICAgICBwbVNlbmRlci5jbG9zZSgpOwogICAg\nICAgIHBtZlNlbmRlci5jbG9zZSgpOwoKICAgICAgICAvLyBXYWl0IGZvciBh\nIHdoaWxlLCB0cnkgYWdhaW4sIHRoaXMgd2lsbCBsZXQgY2xvc2UgZXhjZXB0\naW9uIHByb3BhZ2F0ZQogICAgICAgIHBhdXNlKDQuMSk7CiAgICAgICAgU3lz\ndGVtLm91dC5wcmludGxuKCJXYWl0ZWQgZm9yIGEgd2hpbGUuIik7CiAgICAg\nICAgU3lzdGVtLm91dC5wcmludGxuKCJSZWNvdmVyaW5nIHRoZSBzZW5kZXIg\ncG1mLiIpOwoKICAgICAgICBwbWZTZW5kZXIgPSBjcmVhdGVEaXN0aW5jdEZh\nY3RvcnkoCiAgICAgICAgICAgIFRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyLmNs\nYXNzLAogICAgICAgICAgICAiUG9ydD01NjM3LCBBZGRyZXNzZXM9MTI3LjAu\nMC4xOjU2Mzc7MTI3LjAuMC4xOjY2MzciKTsKICAgICAgICBwbVNlbmRlciA9\nIHBtZlNlbmRlci5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgLy8g\nUGVyZm9ybSBhIHNlY29uZCBzZXQgb2YgdHJhbnNhY3Rpb25zLiBFdmVudHMg\naW4gdGhlIGNsdXN0ZXIgd2lsbCBiZQogICAgICAgIC8vIGNvbW11bmljYXRl\nZAogICAgICAgIHBlcmZvcm1BZGRzTW9kaWZpZXNEZWxldGVzKHBtU2VuZGVy\nLCBOVU1fT0JKRUNUUyk7CgogICAgICAgIC8vIFdhaXQgZm9yIGEgYml0IHNv\nIHRoZSBsaXN0ZW5lciB0aHJlYWQgaW4gdGhlIHJlY2VpdmVyIFBNRiBjYW4g\nZ2V0IGFsbAogICAgICAgIC8vIG1lc3NhZ2VzLgogICAgICAgIHBhdXNlKDQu\nMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIgKiBOVU1fT0JKRUNUUywgbGlz\ndGVuZXJBdFJlY2VpdmVyLnRvdGFsQWRkZWQpOwogICAgICAgIGFzc2VydEVx\ndWFscygyICogTlVNX09CSkVDVFMsIGxpc3RlbmVyQXRSZWNlaXZlci50b3Rh\nbERlbGV0ZWQpOwogICAgICAgIGFzc2VydEVxdWFscygyICogTlVNX09CSkVD\nVFMsIGxpc3RlbmVyQXRSZWNlaXZlci50b3RhbFVwZGF0ZWQpOwoKICAgICAg\nICAvLyBzaHV0ZG93bgogICAgICAgIHBtU2VuZGVyLmNsb3NlKCk7CiAgICAg\nICAgcG1mU2VuZGVyLmNsb3NlKCk7CiAgICAgICAgcG1mUmVjZWl2ZXIuY2xv\nc2UoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgZG91YmxlIHBlcmZvcm1BZGRz\nTW9kaWZpZXNEZWxldGVzKEVudGl0eU1hbmFnZXIgcG0sCiAgICAgICAgaW50\nIG51bU9iamVjdHMpIHsKICAgICAgICAvLyBQZXJmb3JtIGEgc2VyaWVzIG9m\nIHRyYW5zYWN0aW9ucyB0aGF0IHdpbGwgdHJpZ2dlciBhZGRzLAogICAgICAg\nIC8vIGRlbGV0ZXMsIGFuZCB1ZHBhdGVzCiAgICAgICAgRHVyYXRpb24gdGlt\nZVRvQU1EID0gbmV3IER1cmF0aW9uKAogICAgICAgICAgICAiQWRkcywgcmVt\nb3ZlcywgYW5kIGRsZXRlcyBmb3IgIiArIG51bU9iamVjdHMgKyAiIG9iamVj\ndHMuIik7CiAgICAgICAgdGltZVRvQU1ELnN0YXJ0KCk7CgogICAgICAgIC8v\nIGNyZWF0ZSBvYmplY3RzCiAgICAgICAgUnVudGltZVRlc3QxW10gcGVyc2lz\ndGFibGVzID0gbmV3IFJ1bnRpbWVUZXN0MVtudW1PYmplY3RzXTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IHBlcnNpc3RhYmxlcy5sZW5ndGg7IGkr\nKykgewogICAgICAgICAgICBwZXJzaXN0YWJsZXNbaV0gPSBuZXcgUnVudGlt\nZVRlc3QxKCJmb28gIyIgKyBpLCBpKTsKICAgICAgICB9CgogICAgICAgIC8v\nIGFkZCB0aGVtCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwZXJzaXN0\nYWJsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc3RhcnRUeChwbSk7\nCiAgICAgICAgICAgIHBtLnBlcnNpc3QocGVyc2lzdGFibGVzW2ldKTsKICAg\nICAgICAgICAgZW5kVHgocG0pOwogICAgICAgIH0KCiAgICAgICAgLy8gbW9k\naWZ5IHRoZW0KICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IHBlcnNpc3RhYmxlcy5sZW5ndGg7IGkrKykgewogICAg\nICAgICAgICBwZXJzaXN0YWJsZXNbaV0uc2V0U3RyaW5nRmllbGQoImJhenpl\nZCIgKyBpKTsKICAgICAgICB9CiAgICAgICAgZW5kVHgocG0pOwoKICAgICAg\nICAvLyBkZWxldGUgdGhlbQogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgcGVyc2lzdGFibGVzLmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgIHBtLnJlbW92ZShwZXJzaXN0YWJsZXNbaV0pOwog\nICAgICAgIH0KICAgICAgICBlbmRUeChwbSk7CgogICAgICAgIHRpbWVUb0FN\nRC5zdG9wKCk7CiAgICAgICAgcmV0dXJuIHRpbWVUb0FNRC5nZXREdXJhdGlv\nbkFzU2Vjb25kcygpOwogICAgfQoKICAgIHN0YXRpYyBpbnQgX2ZldGNoR3Jv\ndXBTZXJpYWwgPSAwOwoKICAgIHByb3RlY3RlZCBPcGVuSlBBRW50aXR5TWFu\nYWdlckZhY3RvcnkgY3JlYXRlRGlzdGluY3RGYWN0b3J5KAogICAgICAgIENs\nYXNzIHByb3ZpZGVyQ2xhc3MsIFN0cmluZyBjbGFzc1Byb3BzMSkgewogICAg\nICAgIFN0cmluZyB0cmFuc21pdCA9ICJUcmFuc21pdFBlcnNpc3RlZE9iamVj\ndElkcz10cnVlIjsKICAgICAgICBpZiAoY2xhc3NQcm9wczEgPT0gbnVsbCB8\nfCBjbGFzc1Byb3BzMS5sZW5ndGgoKSA9PSAwKQogICAgICAgICAgICBjbGFz\nc1Byb3BzMSA9IHRyYW5zbWl0OwogICAgICAgIGVsc2UKICAgICAgICAgICAg\nY2xhc3NQcm9wczEgKz0gIiwiICsgdHJhbnNtaXQ7CgogICAgICAgIE1hcCBw\ncm9wc01hcDsKICAgICAgICBpZiAocHJvdmlkZXJDbGFzcyAhPSBudWxsKSB7\nCiAgICAgICAgICAgIHByb3BzTWFwID0gbmV3IEhhc2hNYXAoKTsKICAgICAg\nICAgICAgcHJvcHNNYXAucHV0KCJvcGVuanBhLlJlbW90ZUNvbW1pdFByb3Zp\nZGVyIiwgQ29uZmlndXJhdGlvbnMuCiAgICAgICAgICAgICAgICBnZXRQbHVn\naW4ocHJvdmlkZXJDbGFzcy5nZXROYW1lKCksIGNsYXNzUHJvcHMxKSk7CiAg\nICAgICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5GZXRjaEdyb3VwcyIs\nICJkaWZmZXJlbnRpYXRpbmdGZXRjaEdyb3VwIiArCiAgICAgICAgICAgICAg\nICBfZmV0Y2hHcm91cFNlcmlhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAg\nICAgICAgLy8gTm8gUkNQCgogICAgICAgICAgICBwcm9wc01hcCA9IG5ldyBI\nYXNoTWFwKCk7CiAgICAgICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5S\nZW1vdGVDb21taXRQcm92aWRlciIsCiAgICAgICAgICAgICAgICAic2p2bShU\ncmFuc21pdFBlcnNpc3RlZE9iamVjdElkcz10cnVlKSIpOwogICAgICAgICAg\nICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuRmV0Y2hHcm91cHMiLCAiZGlmZmVy\nZW50aWF0aW5nRmV0Y2hHcm91cCIgKwogICAgICAgICAgICAgICAgX2ZldGNo\nR3JvdXBTZXJpYWwpOwogICAgICAgIH0KICAgICAgICBfZmV0Y2hHcm91cFNl\ncmlhbCArPSAxOwoKICAgICAgICByZXR1cm4gZ2V0RW1mKHByb3BzTWFwKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgc3RhdGljIGNsYXNzIFJlbW90ZUNvbW1p\ndExpc3RlbmVyVGVzdEltcGwKICAgICAgICBpbXBsZW1lbnRzIFJlbW90ZUNv\nbW1pdExpc3RlbmVyIHsKCiAgICAgICAgQ29sbGVjdGlvbiBhZGRlZDsKICAg\nICAgICBDb2xsZWN0aW9uIHVwZGF0ZWQ7CiAgICAgICAgQ29sbGVjdGlvbiBk\nZWxldGVkOwogICAgICAgIGludCB0b3RhbEFkZGVkOwogICAgICAgIGludCB0\nb3RhbFVwZGF0ZWQ7CiAgICAgICAgaW50IHRvdGFsRGVsZXRlZDsKCiAgICAg\nICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lkIGFmdGVyQ29tbWl0KFJlbW90\nZUNvbW1pdEV2ZW50IGV2ZW50KSB7CgogICAgICAgICAgICB0aGlzLmFkZGVk\nID0gZXZlbnQuZ2V0UGVyc2lzdGVkT2JqZWN0SWRzKCk7CiAgICAgICAgICAg\nIHRoaXMudXBkYXRlZCA9IGV2ZW50LmdldFVwZGF0ZWRPYmplY3RJZHMoKTsK\nICAgICAgICAgICAgdGhpcy5kZWxldGVkID0gZXZlbnQuZ2V0RGVsZXRlZE9i\namVjdElkcygpOwoKICAgICAgICAgICAgdG90YWxBZGRlZCArPSBhZGRlZC5z\naXplKCk7CiAgICAgICAgICAgIHRvdGFsVXBkYXRlZCArPSB1cGRhdGVkLnNp\nemUoKTsKICAgICAgICAgICAgdG90YWxEZWxldGVkICs9IGRlbGV0ZWQuc2l6\nZSgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgY2xvc2UoKSB7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkg\newogICAgICAgICAgICBTdHJpbmcgcmV0dXJuU3RyaW5nID0gIkFkZHMgIiAr\nIHRvdGFsQWRkZWQgKyAiIERlbHMgIiArCiAgICAgICAgICAgICAgICB0b3Rh\nbERlbGV0ZWQgKyAiIFVwcyAiICsgdG90YWxVcGRhdGVkOwogICAgICAgICAg\nICByZXR1cm4gcmV0dXJuU3RyaW5nOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

