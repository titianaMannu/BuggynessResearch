{"sha":"40c1b5f503db3833caa8b587ab18ddcfb414ab98","node_id":"MDQ6QmxvYjIwNjM2NDo0MGMxYjVmNTAzZGIzODMzY2FhOGI1ODdhYjE4ZGRjZmI0MTRhYjk4","size":6038,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/40c1b5f503db3833caa8b587ab18ddcfb414ab98","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXhjZXB0\naW9uOwoKaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07CmltcG9ydCBqYXZh\nLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlFeGlzdHNFeGNlcHRpb247\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5Tm90Rm91bmRFeGNlcHRpb247\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5PcHRpbWlzdGljTG9ja0V4Y2Vw\ndGlvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlRyYW5zYWN0aW9uUmVx\ndWlyZWRFeGNlcHRpb247CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5TUUxFcnJvckNvZGVSZWFkZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2Fz\nZTsKCi8qKgogKiBUZXN0cyBwcm9wZXIgSlBBIGV4Y2VwdGlvbnMgYXJlIHJh\naXNlZCBieSB0aGUgaW1wbGVtZW50YXRpb24uIAogKiBBY3R1YWwgcnVudGlt\nZSB0eXBlIG9mIHRoZSByYWlzZWQgZXhjZXB0aW9uIGlzIGEgc3ViY2xhc3Mg\nb2YgSlBBLWRlZmluZWQgCiAqIGV4Y2VwdGlvbi4KICogVGhlIHJhaXNlZCBl\neGNlcHRpb24gbWF5IG5lc3QgdGhlIGV4cGVjdGVkIGV4Y2VwdGlvbi4gCiAq\nIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICovCnB1YmxpYyBjbGFzcyBU\nZXN0RXhjZXB0aW9uIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoJcHJp\ndmF0ZSBzdGF0aWMgbG9uZyBJRF9DT1VOVEVSID0gU3lzdGVtLmN1cnJlbnRU\naW1lTWlsbGlzKCk7CiAgICAKCXB1YmxpYyB2b2lkIHNldFVwKCkgewogICAg\nICAgIHN1cGVyLnNldFVwKFBPYmplY3QuY2xhc3MsIENMRUFSX1RBQkxFUyk7\nCiAgICB9CiAgICAKCS8qKgoJICogPHA+VGVzdHMgdGhhdCB3aGVuIE9wdGlt\naXN0aWMgdHJhbnNhY3Rpb24gY29uc2lzdGVuY3kgaXMgdmlvbGF0ZWQsIHRo\nZQoJICogZXhjZXB0aW9uIHRocm93biBpcyBhbiBpbnN0YW5jZSBvZiBqYXZh\neC5wZXJzaXN0ZW5jZS5PcHRpbWlzdGljRXhjZXB0aW9uLjwvcD4KCSAqIDxw\nPkRpc2FibGVkIHBlbmRpbmcgcmVzb2x1dGlvbiBvZiBPUEVOSlBBLTk5MTwv\ncD4KCSAqLwoJcHVibGljIHZvaWQgZGlzYWJsZWRUZXN0VGhyb3dzT3B0aW1p\nc3RpY0V4Y2VwdGlvbigpIHsKCQlFbnRpdHlNYW5hZ2VyIGVtMSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJRW50aXR5TWFuYWdlciBlbTIgPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCWFzc2VydE5vdEVxdWFscyhl\nbTEsIGVtMik7CgkJCgkJZW0xLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nCQlQT2JqZWN0IHBjID0gbmV3IFBPYmplY3QoKTsKCQlsb25nIGlkID0gKytJ\nRF9DT1VOVEVSOwoJCXBjLnNldElkKGlkKTsKCQllbTEucGVyc2lzdChwYyk7\nCgkJZW0xLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgkJZW0xLmNsZWFy\nKCk7CgkJCgkJZW0xLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCQllbTIu\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoJCQoJCVBPYmplY3QgcGMxID0g\nZW0xLmZpbmQoUE9iamVjdC5jbGFzcywgaWQpOwoJCVBPYmplY3QgcGMyID0g\nZW0yLmZpbmQoUE9iamVjdC5jbGFzcywgaWQpOwoJCQoJCWFzc2VydFRydWUo\ncGMxICE9IHBjMik7CgkJCgkJcGMxLnNldE5hbWUoIk1vZGlmaWVkIGluIFRY\nTjEiKTsKCQllbTEuZmx1c2goKTsKCQl0cnkgewoJCQlwYzIuc2V0TmFtZSgi\nTW9kaWZpZWQgaW4gVFhOMiIpOwoJCQllbTIuZmx1c2goKTsKCQkJZmFpbCgi\nRXhwZWN0ZWQgIiArIE9wdGltaXN0aWNMb2NrRXhjZXB0aW9uLmNsYXNzKTsK\nCQl9IGNhdGNoIChUaHJvd2FibGUgdCkgewoJCQlhc3NlcnRFeGNlcHRpb24o\ndCwgT3B0aW1pc3RpY0xvY2tFeGNlcHRpb24uY2xhc3MpOwoJCX0KCQkKCQll\nbTEuZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCQl0cnkgewoJCQllbTIu\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCQkJZmFpbCgiRXhwZWN0ZWQg\nIiArIE9wdGltaXN0aWNMb2NrRXhjZXB0aW9uLmNsYXNzKTsKCQl9IGNhdGNo\nIChUaHJvd2FibGUgdCkgewoJCQlhc3NlcnRFeGNlcHRpb24odCwgT3B0aW1p\nc3RpY0xvY2tFeGNlcHRpb24uY2xhc3MpOwoJCX0KCX0KCQoJcHVibGljIHZv\naWQgdGVzdFRocm93c0VudGl0eUV4aXN0c0V4Y2VwdGlvbigpIHsKCQlFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCQkK\nCQllbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgkJUE9iamVjdCBwYyA9\nIG5ldyBQT2JqZWN0KCk7CgkJbG9uZyBpZCA9ICsrSURfQ09VTlRFUjsKCQlw\nYy5zZXRJZChpZCk7CgkJZW0ucGVyc2lzdChwYyk7CgkJZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKCQllbS5jbGVhcigpOwoJCQoJCWVtLmdldFRy\nYW5zYWN0aW9uKCkuYmVnaW4oKTsKCQlQT2JqZWN0IHBjMiA9IG5ldyBQT2Jq\nZWN0KCk7CgkJcGMyLnNldElkKGlkKTsKCQllbS5wZXJzaXN0KHBjMik7CgkJ\ndHJ5IHsKCQkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCQkJZmFp\nbCgiRXhwZWN0ZWQgIiArIEVudGl0eUV4aXN0c0V4Y2VwdGlvbi5jbGFzcyk7\nCgkJfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKCQkJYXNzZXJ0RXhjZXB0aW9u\nKHQsIEVudGl0eUV4aXN0c0V4Y2VwdGlvbi5jbGFzcyk7CgkJfQoJfQoJCglw\ndWJsaWMgdm9pZCB0ZXN0VGhyb3dzRW50aXR5Tm90Rm91bmRFeGNlcHRpb24o\nKSB7CgkJRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CgkJCgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoJCVBP\nYmplY3QgcGMgPSBuZXcgUE9iamVjdCgpOwoJCWxvbmcgaWQgPSArK0lEX0NP\nVU5URVI7CgkJcGMuc2V0SWQoaWQpOwoJCWVtLnBlcnNpc3QocGMpOwoJCWVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgkJCgkJRW50aXR5TWFuYWdl\nciBlbTIgPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtMi5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CgkJUE9iamVjdCBwYzIgPSBlbTIuZmlu\nZChQT2JqZWN0LmNsYXNzLCBpZCk7CgkJYXNzZXJ0Tm90TnVsbChwYzIpOwoJ\nCWVtMi5yZW1vdmUocGMyKTsKCQllbTIuZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKCQkKCQl0cnkgewoJCQllbS5yZWZyZXNoKHBjKTsKCQkJZmFpbCgi\nRXhwZWN0ZWQgIiArIEVudGl0eU5vdEZvdW5kRXhjZXB0aW9uLmNsYXNzKTsK\nCQl9IGNhdGNoIChUaHJvd2FibGUgdCkgewoJCQlhc3NlcnRFeGNlcHRpb24o\ndCwgRW50aXR5Tm90Rm91bmRFeGNlcHRpb24uY2xhc3MpOwoJCX0KCX0KCQoJ\ncHVibGljIHZvaWQgdGVzdEVycm9yQ29kZUNvbmZpZ3VyYXRpb25IYXNBbGxL\nbm93bkRpY3Rpb25hcmllcygpIHsKCQlTUUxFcnJvckNvZGVSZWFkZXIgcmVh\nZGVyID0gbmV3IFNRTEVycm9yQ29kZVJlYWRlcigpOwoJCUlucHV0U3RyZWFt\nIGluID0gREJEaWN0aW9uYXJ5LmNsYXNzLmdldFJlc291cmNlQXNTdHJlYW0K\nCQkJKCJzcWwtZXJyb3Itc3RhdGUtY29kZXMueG1sIik7CgkJYXNzZXJ0Tm90\nTnVsbChpbik7CgkJTGlzdDxTdHJpbmc+IG5hbWVzID0gcmVhZGVyLmdldERp\nY3Rpb25hcmllcyhpbik7CgkJYXNzZXJ0VHJ1ZShuYW1lcy5zaXplKCk+PTE4\nKTsKCQlmb3IgKFN0cmluZyBuYW1lOm5hbWVzKSB7CgkJCXRyeSB7CgkJCQlD\nbGFzcy5mb3JOYW1lKG5hbWUsIGZhbHNlLCBUaHJlYWQuY3VycmVudFRocmVh\nZCgpCgkJCQkJCQkuZ2V0Q29udGV4dENsYXNzTG9hZGVyKCkpOwoJCQl9IGNh\ndGNoIChUaHJvd2FibGUgdCkgewoJCQkJZmFpbCgiREIgZGljdGlvbmFyeSAi\nICsgbmFtZSArICIgY2FuIG5vdCBiZSBsb2FkZWQiKTsKCQkJCXQucHJpbnRT\ndGFja1RyYWNlKCk7CgkJCX0KCQl9Cgl9CgkKCS8qKgoJICogQXNzZXJ0cyB0\naGF0IHRoZSBnaXZlbiBleHBlY3RlZCB0eXBlIG9mIHRoZSBleGNlcHRpb24g\naXMgZXF1YWwgdG8gb3IgYQoJICogc3ViY2xhc3Mgb2YgdGhlIGdpdmVuIHRo\ncm93YWJsZSBvciBhbnkgb2YgaXRzIG5lc3RlZCBleGNlcHRpb24uCgkgKiBP\ndGhlcndpc2UgZmFpbHMgYXNzZXJ0aW9uIGFuZCBwcmludHMgdGhlIGdpdmVu\nIHRocm93YWJsZSBhbmQgaXRzIG5lc3RlZAoJICogZXhjZXB0aW9uIG9uIHRo\nZSBjb25zb2xlLiAKCSAqLwoJdm9pZCBhc3NlcnRFeGNlcHRpb24oVGhyb3dh\nYmxlIHQsIENsYXNzIGV4cGVjdGVkVHlwZSkgewoJCWlmICghaXNFeHBlY3Rl\nZEV4Y2VwdGlvbih0LCBleHBlY3RlZFR5cGUpKSB7CgkJCXQucHJpbnRTdGFj\na1RyYWNlKCk7CgkJCXByaW50KHQsIDApOwoJCQlmYWlsKHQgKyAiIG9yIGl0\ncyBjYXVzZSBpcyBub3QgaW5zdGFuY2VvZiAiICsgZXhwZWN0ZWRUeXBlKTsK\nCQl9Cgl9CgkKCS8qKgoJICogQWZmaXJtcyBpZiB0aGUgZ2l2ZW4gZXhwZWN0\nZWQgdHlwZSBvZiB0aGUgZXhjZXB0aW9uIGlzIGVxdWFsIHRvIG9yIGEKCSAq\nIHN1YmNsYXNzIG9mIHRoZSBnaXZlbiB0aHJvd2FibGUgb3IgYW55IG9mIGl0\ncyBuZXN0ZWQgZXhjZXB0aW9uLgoJICovCglib29sZWFuIGlzRXhwZWN0ZWRF\neGNlcHRpb24oVGhyb3dhYmxlIHQsIENsYXNzIGV4cGVjdGVkVHlwZSkgewoJ\nCWlmICh0ID09IG51bGwpIAoJCQlyZXR1cm4gZmFsc2U7CgkJaWYgKGV4cGVj\ndGVkVHlwZS5pc0Fzc2lnbmFibGVGcm9tKHQuZ2V0Q2xhc3MoKSkpCgkJCQly\nZXR1cm4gdHJ1ZTsKCQlyZXR1cm4gaXNFeHBlY3RlZEV4Y2VwdGlvbih0Lmdl\ndENhdXNlKCksIGV4cGVjdGVkVHlwZSk7Cgl9CgkKCXZvaWQgcHJpbnQoVGhy\nb3dhYmxlIHQsIGludCB0YWIpIHsKCQlpZiAodCA9PSBudWxsKSByZXR1cm47\nCgkJZm9yIChpbnQgaT0wOyBpPHRhYio0O2krKykgU3lzdGVtLm91dC5wcmlu\ndCgiICIpOwoJCVN0cmluZyBzcWxTdGF0ZSA9ICh0IGluc3RhbmNlb2YgU1FM\nRXhjZXB0aW9uKSA/IAoJCQkiKFNRTFN0YXRlPSIgKyAoKFNRTEV4Y2VwdGlv\nbil0KS5nZXRTUUxTdGF0ZSgpICsgIjoiIAoJCQkJKyB0LmdldE1lc3NhZ2Uo\nKSArICIpIiA6ICIiOwoJCVN5c3RlbS5vdXQucHJpbnRsbih0LmdldENsYXNz\nKCkuZ2V0TmFtZSgpICsgc3FsU3RhdGUpOwoJCWlmICh0LmdldENhdXNlKCkg\nPT0gdCkgCgkJCXJldHVybjsKCQlwcmludCh0LmdldENhdXNlKCksIHRhYisx\nKTsKCX0KfQo=\n","encoding":"base64"}

