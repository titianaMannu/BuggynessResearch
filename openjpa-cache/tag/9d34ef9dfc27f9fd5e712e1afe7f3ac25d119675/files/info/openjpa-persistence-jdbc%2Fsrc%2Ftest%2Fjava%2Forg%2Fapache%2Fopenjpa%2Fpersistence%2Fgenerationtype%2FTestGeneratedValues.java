{"sha":"0a7f6dcabcda6421a0000f914613ad3d3ae58585","node_id":"MDQ6QmxvYjIwNjM2NDowYTdmNmRjYWJjZGE2NDIxYTAwMDBmOTE0NjEzYWQzZDNhZTU4NTg1","size":7382,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0a7f6dcabcda6421a0000f914613ad3d3ae58585","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5nZW5lcmF0aW9u\ndHlwZTsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2Vy\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5RXhpc3RzRXhjZXB0\naW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5J\nbnZhbGlkU3RhdGVFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsKCnB1Ymxp\nYyBjbGFzcyBUZXN0R2VuZXJhdGVkVmFsdWVzIGV4dGVuZHMgU2luZ2xlRU1G\nVGVzdENhc2UgewogICAgCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsgCiAg\nICAgICAgc2V0VXAoR2VuZXJhdGVkVmFsdWVzLmNsYXNzLCBDTEVBUl9UQUJM\nRVMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3REZWZhdWx0VmFsdWVz\nKCkgeyAKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKCiAgICAgICAgR2VuZXJhdGVkVmFsdWVzIGd2ID0g\nbmV3IEdlbmVyYXRlZFZhbHVlcygpOwogICAgICAgIEdlbmVyYXRlZFZhbHVl\ncyBndjIgPSBuZXcgR2VuZXJhdGVkVmFsdWVzKCk7CgogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KGd2\nKTsKICAgICAgICBlbS5wZXJzaXN0KGd2Mik7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKCiAgICAgICAgZW0ucmVmcmVzaChndik7\nCiAgICAgICAgZW0ucmVmcmVzaChndjIpOwoKICAgICAgICBhc3NlcnRGYWxz\nZShndi5nZXRJZCgpID09IGd2Mi5nZXRJZCgpKTsKICAgICAgICBhc3NlcnRG\nYWxzZShndi5nZXRGaWVsZCgpID09IGd2Mi5nZXRGaWVsZCgpKTsKICAgICAg\nICBhc3NlcnRGYWxzZShndi5nZXRVdWlkc3RyaW5nKCkuZXF1YWxzKGd2Mi5n\nZXRVdWlkc3RyaW5nKCkpKTsKICAgICAgICBhc3NlcnRGYWxzZShndi5nZXRV\ndWlkaGV4KCkuZXF1YWxzKGd2Mi5nZXRVdWlkaGV4KCkpKTsKICAgICAgICBh\nc3NlcnRGYWxzZShndi5nZXRVdWlkVDRoZXgoKS5lcXVhbHMoZ3YyLmdldFV1\naWRUNGhleCgpKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UoZ3YuZ2V0VXVpZFQ0\nc3RyaW5nKCkuZXF1YWxzKGd2Mi5nZXRVdWlkVDRzdHJpbmcoKSkpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW5pdGlhbFZhbHVlcygpIHsg\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CgogICAgICAgIEdlbmVyYXRlZFZhbHVlcyBndiA9IG5ldyBH\nZW5lcmF0ZWRWYWx1ZXMoNywgOSwgImEiLCAiYiIsICJjIiwgImQiKTsKCiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgICAgICBlbS5wZXJzaXN0KGd2KTsKICAgICAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICB9IGNh\ndGNoIChJbnZhbGlkU3RhdGVFeGNlcHRpb24gaXNlKSB7CiAgICAgICAgICAg\nIC8vIGV4cGVjdGVkIHJlc3VsdAogICAgICAgICAgICByZXR1cm47CiAgICAg\nICAgfSAgY2F0Y2ggKEVudGl0eUV4aXN0c0V4Y2VwdGlvbiBlZWUpIHsKICAg\nICAgICAgICAgLy8gYWxzbyBvawogICAgICAgICAgICByZXR1cm47CiAgICAg\nICAgfQogICAgICAgIAogICAgICAgIC8vIHNob3VsZCBub3QgZ2V0IGhlcmUu\nLi4KICAgICAgICBmYWlsKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RJZFNldHRlcigpIHsgCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIEdlbmVyYXRl\nZFZhbHVlcyBndiA9IG5ldyBHZW5lcmF0ZWRWYWx1ZXMoKTsKICAgICAgICBn\ndi5zZXRJZCgzKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgICAgICBlbS5wZXJzaXN0\nKGd2KTsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICB9IGNhdGNoIChJbnZhbGlkU3RhdGVFeGNlcHRpb24gaXNl\nKSB7CiAgICAgICAgICAgIC8vIGV4cGVjdGVkIHJlc3VsdAogICAgICAgICAg\nICByZXR1cm47CiAgICAgICAgfSAgY2F0Y2ggKEVudGl0eUV4aXN0c0V4Y2Vw\ndGlvbiBlZWUpIHsKICAgICAgICAgICAgLy8gYWxzbyBvawogICAgICAgICAg\nICByZXR1cm47CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIHNob3Vs\nZCBub3QgZ2V0IGhlcmUuLi4KICAgICAgICBmYWlsKCk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3RGaWVsZFNldHRlcigpIHsgCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCgogICAgICAgIEdlbmVyYXRlZFZhbHVlcyBndiA9IG5ldyBHZW5lcmF0ZWRW\nYWx1ZXMoKTsKICAgICAgICBndi5zZXRGaWVsZCg1KTsKCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgICAgICBlbS5wZXJzaXN0KGd2KTsKICAgICAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICB9IGNhdGNoIChJbnZh\nbGlkU3RhdGVFeGNlcHRpb24gaXNlKSB7CiAgICAgICAgICAgIC8vIGV4cGVj\ndGVkIHJlc3VsdAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAg\nICAgIAogICAgICAgIC8vIHNob3VsZCBub3QgZ2V0IGhlcmUuLi4KICAgICAg\nICBmYWlsKCk7CiAgICB9CgovLyAgICBwdWJsaWMgdm9pZCB0ZXN0Q3VzdG9t\nU2VxdWVuY2VHZW5lcmF0b3IoKSB7Ci8vICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKLy8KLy8gICAgICAg\nIEdlbmVyYXRlZFZhbHVlcyBndiA9IG5ldyBHZW5lcmF0ZWRWYWx1ZXMoKTsK\nLy8KLy8gICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKLy8g\nICAgICAgIGVtLnBlcnNpc3QoZ3YpOwovLyAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKLy8KLy8gICAgICAgIGFzc2VydE5vdEVxdWFs\ncygwLCBndi5nZXRDdXN0b21TZXFGaWVsZCgpKTsKLy8gICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RDdXN0b21TZXF1ZW5jZUdlbmVyYXRvcldpdGhJbmRp\ncmVjdGlvbigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgR2VuZXJhdGVkVmFsdWVz\nIGd2ID0gbmV3IEdlbmVyYXRlZFZhbHVlcygpOwoKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChndik7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAgICAg\nICAgYXNzZXJ0Tm90RXF1YWxzKDAsIGd2LmdldEN1c3RvbVNlcVdpdGhJbmRp\ncmVjdGlvbkZpZWxkKCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0VVVJREdlbmVyYXRvcnMoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIEdlbmVy\nYXRlZFZhbHVlcyBndiA9IG5ldyBHZW5lcmF0ZWRWYWx1ZXMoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVy\nc2lzdChndik7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICAKICAgICAgICBpbnQgaWQgPSBndi5nZXRJZCgpOwoKICAg\nICAgICBhc3NlcnRUcnVlKGlzU3RyaW5nVVVJRChndi5nZXRVdWlkVDRzdHJp\nbmcoKSwgNCkpOwogICAgICAgIGFzc2VydFRydWUoaXNTdHJpbmdVVUlEKGd2\nLmdldFV1aWRzdHJpbmcoKSwgMSkpOwogICAgICAgIGFzc2VydFRydWUoaXNI\nZXhVVUlEKGd2LmdldFV1aWRoZXgoKSwgMSkpOwogICAgICAgIGFzc2VydFRy\ndWUoaXNIZXhVVUlEKGd2LmdldFV1aWRUNGhleCgpLCA0KSk7ICAgICAKICAg\nICAgICAKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIAogICAgICAgIEdl\nbmVyYXRlZFZhbHVlcyBndjIgPSBlbS5maW5kKEdlbmVyYXRlZFZhbHVlcy5j\nbGFzcywgaWQpOyAgCiAgICAgICAgYXNzZXJ0Tm90TnVsbChndjIpOwogICAg\nICAgIC8vIFRoZSBzdHJpbmcgdmFsdWUgY291bGQgY29udGFpbiBudWxsIHZh\nbHVlcyBhbmQgc3VjaCBzbyBsZW5ndGgKICAgICAgICAvLyBjYWxjdWxhdGlv\nbnMgbWF5IGJlIG5vbi1kZXRlcm1pbmlzdGljLiAgRm9yIHN0cmluZyBnZW5l\ncmF0b3JzLCAKICAgICAgICAvLyBzaW1wbHkgZW5zdXJlIHRoZSBmaWVsZHMg\nYXJlIHBvcHVsYXRlZCAobm90IG51bGwpLiAKICAgICAgICBhc3NlcnROb3RO\ndWxsKGd2Mi5nZXRVdWlkc3RyaW5nKCkpOwogICAgICAgIGFzc2VydFRydWUo\naXNIZXhVVUlEKGd2Mi5nZXRVdWlkaGV4KCksIDEpKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKGd2Mi5nZXRVdWlkVDRzdHJpbmcoKSk7CiAgICAgICAgYXNz\nZXJ0VHJ1ZShpc0hleFVVSUQoZ3YyLmdldFV1aWRUNGhleCgpLCA0KSk7ICAg\nICAKICAgICAgICAKICAgICAgICAvLyBDb21wYXJlIG9yaWdpbmFsIGhleCB2\nYWx1ZXMgd2l0aCBuZXcgdmFsdWVzLiAgVGhleSBzaG91bGQgYmUgZXF1YWwu\nCiAgICAgICAgLy8gTm90ZTogVVVJRCAnc3RyaW5nJyB2YWx1ZXMgYXJlIG5v\ndCBjb21wYXJlZC4gIEluIG1vc3QgY2FzZXMgdGhleSB3aWxsCiAgICAgICAg\nLy8gYmUgdGhlIHNhbWUsIGJ1dCBpbiBhbiBlbnZpcm9ubWVudCB3aGVyZSBk\nYXRhIGlzIGNvbnZlcnRlZCB0bwogICAgICAgIC8vIGEgY29uc2lkZXJhYmx5\nIGRpZmZlcmVudCBjaGFyYWN0ZXIgZW5jb2Rpbmcgb2YgdGhlIGRhdGFiYXNl\nIChleC4KICAgICAgICAvLyBVbmljb2RlIC0+IEVCQ0RJQykgdXBvbiBwZXJz\naXN0ZW5jZSwgdGhlIHV1aWQgc3RyaW5nIHJldHVybmVkIGJ5IHRoZSAKICAg\nICAgICAvLyBkYXRhYmFzZSBtYXkgbm90IGJlIGVxdWFsIHRvIHRoZSBvcmln\naW5hbCB2YWx1ZS4gIFRoaXMgaXMgYSBjb21tb24gCiAgICAgICAgLy8gaXNz\ndWUgd2l0aCBzdHJpbmcgZGF0YSwgYnV0IGV2ZW4gbW9yZSBsaWtlbHkgZm9y\nIGEgdXVpZHMgZ2l2ZW4gdGhhdCAKICAgICAgICAvLyB1dWlkIHN0cmluZ3Mg\nYXJlIHByb2R1Y2VkIGZyb20gcHNldWRvLXJhbmRvbSBieXRlIGFycmF5cywg\nd2hpY2ggeWllbGQgCiAgICAgICAgLy8gYWxsIHNvcnRzIG9mIHZhcmlhbnQg\nY2hhcmFjdGVycy4KICAgICAgICBhc3NlcnRUcnVlKGd2LmdldElkKCkgPT0g\nZ3YyLmdldElkKCkpOwogICAgICAgIGFzc2VydFRydWUoZ3YuZ2V0RmllbGQo\nKSA9PSBndjIuZ2V0RmllbGQoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShndi5n\nZXRVdWlkaGV4KCkuZXF1YWxzKGd2Mi5nZXRVdWlkaGV4KCkpKTsKICAgICAg\nICBhc3NlcnRUcnVlKGd2LmdldFV1aWRUNGhleCgpLmVxdWFscyhndjIuZ2V0\nVXVpZFQ0aGV4KCkpKTsKICAgIH0KICAgICAgICAgICAgICAgIAogICAgLyoK\nICAgICAqIFZlcmlmeSBhIHV1aWQgc3RyaW5nIGlzIDE2IGNoYXJhY3RlcnMg\nbG9uZyBhbmQgaXMgdGhlIGV4cGVjdGVkIHR5cGUuCiAgICAgKi8KICAgIHBy\naXZhdGUgYm9vbGVhbiBpc1N0cmluZ1VVSUQoU3RyaW5nIHZhbHVlLCBpbnQg\ndHlwZSkgewogICAgICAgIGlmICh2YWx1ZS5sZW5ndGgoKSAhPSAxNikKICAg\nICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGJ5dGUgdmVyc2lvbiA9\nIChieXRlKSh2YWx1ZS5jaGFyQXQoNikgPj4+IDQpOwogICAgICAgIGlmICh0\neXBlICE9IHZlcnNpb24pIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgIH0KICAgIAogICAgLyoKICAgICAqIFZlcmlmeSBhIHV1aWQg\naGV4IHN0cmluZyB2YWx1ZSBpcyAzMiBjaGFyYWN0ZXJzIGxvbmcsIGNvbnNp\nc3RzIGVudGlyZWx5CiAgICAgKiBvZiBoZXggZGlnaXRzIGFuZCBpcyB0aGUg\nY29ycmVjdCB2ZXJzaW9uLgogICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4g\naXNIZXhVVUlEKFN0cmluZyB2YWx1ZSwgaW50IHR5cGUpIHsKICAgICAgICBp\nZiAodmFsdWUubGVuZ3RoKCkgIT0gMzIpIAogICAgICAgICAgICByZXR1cm4g\nZmFsc2U7CiAgICAgICAgY2hhcltdIGNoQXJyID0gdmFsdWUudG9DaGFyQXJy\nYXkoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDMyOyBpKyspCiAg\nICAgICAgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgY2hhciBjaCA9\nIGNoQXJyW2ldOwogICAgICAgICAgICBpZiAoIShDaGFyYWN0ZXIuaXNEaWdp\ndChjaCkgfHwKICAgICAgICAgICAgICAgIChjaCA+PSAnYScgJiYgY2ggPD0g\nJ2YnKSB8fAogICAgICAgICAgICAgICAgKGNoID49ICdBJyAmJiBjaCA8PSAn\nRicpKSkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAg\nICAgaWYgKGkgPT0gMTIpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlID09\nIDEgJiYgY2ggIT0gJzEnKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBm\nYWxzZTsKICAgICAgICAgICAgICAgIGlmICh0eXBlID09IDQgJiYgY2ggIT0g\nJzQnKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0K\nfQo=\n","encoding":"base64"}

