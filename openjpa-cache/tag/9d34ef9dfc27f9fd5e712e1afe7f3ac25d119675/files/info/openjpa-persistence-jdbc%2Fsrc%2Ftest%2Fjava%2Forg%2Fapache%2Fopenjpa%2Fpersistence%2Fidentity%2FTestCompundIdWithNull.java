{"sha":"7dc78615229e2970d21256859ca41ffb4af8c479","node_id":"MDQ6QmxvYjIwNjM2NDo3ZGM3ODYxNTIyOWUyOTcwZDIxMjU2ODU5Y2E0MWZmYjRhZjhjNDc5","size":5298,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7dc78615229e2970d21256859ca41ffb4af8c479","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuaWRlbnRp\ndHk7CgppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEu\ndXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1h\nbmFnZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRl\nc3RDYXNlOwoKLyoqCiAqIFRlc3QgdGhhdCBjb21wb3VuZCBpZGVudGl0eSBj\nYW4gY29uc2lzdHMgb2YgbnVsbCBjb21wb25lbnQgY29sdW1uIHZhbHVlLgog\nKiAKICogVGhpcyB0ZXN0IHVzZXMgcHJlLWRlZmluZWQgZGF0YWJhc2UgdGFi\nbGVzIGNyZWF0ZWQgYnkgRERMIGV4cGxpY2l0bHkuCiAqIFRoZSB0YWJsZXMg\naGF2ZSA8ZW0+bG9naWNhbDwvZW0+IGNvbXBvdW5kIHByaW1hcnkga2V5cyBp\nbiB0aGUgc2Vuc2Ugbm9uLW51bGwKICogY29uc3RyYWludCBpcyA8ZW0+bm90\nPC9lbT4gc2V0IG9uIHRoZSBwcmltYXJ5IGNvbHVtbnMuIFRoZSB0YWJsZXMg\nYXJlIHBvcHVsYXRlZCAKICogd2l0aCBTUUwgdG8gY29udGFpbiBudWxsIHZh\nbHVlcyBpbiB0aGVzZSBjb2x1bW5zLiAKICogVGhlIHRlc3QgdmVyaWZpZXMg\ndGhhdCByZXN1bHRzIGFyZSByZXR1cm5lZCBhcyBwYXIgZXhwZWN0YXRpb24u\nCiAqIEZvciBtb3JlIGRldGFpbHMsIHJlZmVyCiAqIDxBIGhyZWY9Imh0dHBz\nOi8vaXNzdWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvT1BFTkpQQS0xMzk3\nIj5KSVJBLTEzOTc8L0E+CiAqLwpwdWJsaWMgY2xhc3MgVGVzdENvbXB1bmRJ\nZFdpdGhOdWxsIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewogICAgcHJp\ndmF0ZSBzdGF0aWMgYm9vbGVhbiB0YWJsZXNDcmVhdGVkID0gZmFsc2U7Cglw\ndWJsaWMgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewoJICAgIC8v\nIGRvIG5vdCB1c2UgQ0xFQVJfVEFCTEVTIG9yIERST1BfVEFCTEVTCgkgICAg\nc3VwZXIuc2V0VXAoU2ltcGxlQ29tcG91bmRJZFRlc3RFbnRpdHkuY2xhc3Ms\nIENvbXBsZXhDb21wb3VuZElkVGVzdEVudGl0eS5jbGFzcywgVHlwZUVudGl0\neS5jbGFzcyk7CgkgICAgaWYgKCF0YWJsZXNDcmVhdGVkKSB7CgkgICAgICAg\nIGNyZWF0ZVRhYmxlcyhlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpKTsKCSAg\nICB9CgkgICAgCgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RTaW1wbGVDb21wb3Vu\nZElkVGVzdEVudGl0eSgpIHRocm93cyBFeGNlcHRpb24gIHsKCQkJRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJCVN0\ncmluZyBqcHFsID0gIlNFTEVDVCBvIEZST00gU2ltcGxlQ29tcG91bmRJZFRl\nc3RFbnRpdHkgbyBPUkRFUiBCWSBvLnNlY29uZElkIjsKCQkJTGlzdCBsaXN0\nID0gZW0uY3JlYXRlUXVlcnkoanBxbCkuZ2V0UmVzdWx0TGlzdCgpOwoJCQlh\nc3NlcnRFcXVhbHMoMiwgbGlzdC5zaXplKCkpOwoJCQlhc3NlcnRFcXVhbHMo\nTG9uZy52YWx1ZU9mKDEyMyksICgoU2ltcGxlQ29tcG91bmRJZFRlc3RFbnRp\ndHkpIGxpc3QuZ2V0KDApKS5nZXRTZWNvbmRJZCgpKTsKCQkJCgkJCVNpbXBs\nZUNvbXBvdW5kSWRUZXN0RW50aXR5IHNlY29uZFJlc3VsdCA9IChTaW1wbGVD\nb21wb3VuZElkVGVzdEVudGl0eSkgbGlzdC5nZXQoMSk7CgkJCWFzc2VydE5v\ndE51bGwoIkJVRyAoSklSQS0xMzk3KSEgUmVzdWx0IGxpc3QgY29udGFpbnMg\nbnVsbCBpbiBzZWNvbmQgZWxlbWVudCIsIHNlY29uZFJlc3VsdCk7CgkJCWFz\nc2VydE51bGwoc2Vjb25kUmVzdWx0LmdldFNlY29uZElkKCkpOwoJCQllbS5j\nbG9zZSgpOwoJfQoKCQoJcHVibGljIHZvaWQgdGVzdENvbXBsZXhDb21wb3Vu\nZElkVGVzdEVudGl0eSgpIHRocm93cyBFeGNlcHRpb24gIHsKCQkJRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJCVN0\ncmluZyBqcHFsID0gIlNFTEVDVCBvIEZST00gQ29tcGxleENvbXBvdW5kSWRU\nZXN0RW50aXR5IG8gT1JERVIgQlkgby50eXBlIjsKCQkJTGlzdCBsaXN0ID0g\nZW0uY3JlYXRlUXVlcnkoanBxbCkuZ2V0UmVzdWx0TGlzdCgpOwoJCQlhc3Nl\ncnRFcXVhbHMoMiwgbGlzdC5zaXplKCkpOwoJCQlDb21wbGV4Q29tcG91bmRJ\nZFRlc3RFbnRpdHkgc2Vjb25kUmVzdWx0ID0gKENvbXBsZXhDb21wb3VuZElk\nVGVzdEVudGl0eSkgbGlzdC5nZXQoMSk7CgkJCWFzc2VydE5vdE51bGwoIlJl\nc3VsdCBsaXN0IGNvbnRhaW5zIG51bGwgaW4gc2Vjb25kIGVsZW1lbnQiLCBz\nZWNvbmRSZXN1bHQpOwoJCQlhc3NlcnROdWxsKCJSZXN1bHQgbGlzdCdzIHNl\nY29uZCByZWNvcmQgc2Vjb25kSWQgZmllbGQgd2FzIG5vdCBudWxsIiwgc2Vj\nb25kUmVzdWx0LmdldFR5cGUoKSk7CgkJCWVtLmNsb3NlKCk7Cgl9CgkKCS8q\nKgoJICogQ3JlYXRlIHRhYmxlcyB3aXRoIGxvZ2ljYWwgY29tcG91bmQga2V5\ncyB3aXRob3V0IG5vbi1udWxsIGNvbnN0cmFpbnQuCgkgKiBQb3B1bGF0ZSB0\naGVtIHdpdGggbnVsbCB2YWx1ZXMgaW4gc29tZSBvZiB0aGUgY29sdW1ucy4K\nCSAqLwogICAgcHJpdmF0ZSB2b2lkIGNyZWF0ZVRhYmxlcyhFbnRpdHlNYW5h\nZ2VyIGVtKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXIga2VtID0gT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0pOwoKICAgICAg\nICBDb25uZWN0aW9uIGNvbm4gPSAoQ29ubmVjdGlvbikga2VtLmdldENvbm5l\nY3Rpb24oKTsKICAgICAgICAvLyBOT1RFIHRoYXQgJ2xvZ2ljYWxseScgdGVz\ndF9zaW1wbGUgaGFzIGEgIiwgQ09OU1RSQUlOVCB0ZXN0X3NpbXBsZV9wayBQ\nUklNQVJZIEtFWSAoZmlyc3RJZCwgc2Vjb25kSWQpIiwKICAgICAgICAvLyBi\ndXQgYXQgbGVhc3QgRGVyYnkgZG9lc24ndCBwZXJtaXQgTlVMTCB0aGVuLi4g\naW4gb3VyIHJlYWwtd29ybGQgdW5kZXJseWluZyBzY2hlbWEgdGhhdCBsZWFk\ncwogICAgICAgIC8vIHRvIHRoaXMgdGhlcmUgYXJlICpOTyogUFJJTUFSWSBL\nRVkgb24gYW55IHRhYmxlcywgYnV0IHRoZXJlIGlzIGEgbG9naWNhbCBtb2Rl\nbCBleHByZXNzZWQKICAgICAgICAvLyBlbHNld2hlcmUgc3RhdGluZyB0aGF0\nIHRob3NlIHR3byBjb2x1bW5zIHVuaXF1ZWx5IGlkZW50aWZ5IGEgcm93Lgog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbm4uY3JlYXRlU3RhdGVtZW50\nKCkuZXhlY3V0ZSgiRFJPUCBUQUJMRSB0ZXN0X3R5cGUiKTsKICAgICAgICAg\nICAgY29ubi5jcmVhdGVTdGF0ZW1lbnQoKS5leGVjdXRlKCJEUk9QIFRBQkxF\nIHRlc3Rfc2ltcGxlIik7CiAgICAgICAgICAgIGNvbm4uY3JlYXRlU3RhdGVt\nZW50KCkuZXhlY3V0ZSgiRFJPUCBUQUJMRSB0ZXN0X2NvbXBsZXgiKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KICAgICAg\nICAKICAgICAgICBjb25uLmNyZWF0ZVN0YXRlbWVudCgpLmV4ZWN1dGUoIkNS\nRUFURSBUQUJMRSB0ZXN0X3NpbXBsZShmaXJzdElkIE5VTUVSSUMsIHNlY29u\nZElkIE5VTUVSSUMpIik7CiAgICAgICAgY29ubi5jcmVhdGVTdGF0ZW1lbnQo\nKS5leGVjdXRlKCJJTlNFUlQgSU5UTyB0ZXN0X3NpbXBsZShmaXJzdElkLCBz\nZWNvbmRJZCkgVkFMVUVTICgxLCAxMjMpIik7CiAgICAgICAgY29ubi5jcmVh\ndGVTdGF0ZW1lbnQoKS5leGVjdXRlKCJJTlNFUlQgSU5UTyB0ZXN0X3NpbXBs\nZShmaXJzdElkLCBzZWNvbmRJZCkgVkFMVUVTICgxLCBOVUxMKSIpOwoKICAg\nICAgICBjb25uLmNyZWF0ZVN0YXRlbWVudCgpLmV4ZWN1dGUoIkNSRUFURSBU\nQUJMRSB0ZXN0X3R5cGUoaWQgTlVNRVJJQyBDT05TVFJBSU5UIHRlc3RfdHlw\nZV9wayBQUklNQVJZIEtFWSwgIiArCiAgICAgICAgICAgICAgICAiY29kZSBW\nQVJDSEFSKDE2KSkiKTsKICAgICAgICBjb25uLmNyZWF0ZVN0YXRlbWVudCgp\nLmV4ZWN1dGUoIklOU0VSVCBJTlRPIHRlc3RfdHlwZShpZCwgY29kZSkgVkFM\nVUVTICg5ODcsICdBQkMnKSIpOwoKICAgICAgICBjb25uLmNyZWF0ZVN0YXRl\nbWVudCgpLmV4ZWN1dGUoIkNSRUFURSBUQUJMRSB0ZXN0X2NvbXBsZXgoaWQg\nTlVNRVJJQywgdHlwZV9pZCBOVU1FUklDKSIpOwogICAgICAgIGNvbm4uY3Jl\nYXRlU3RhdGVtZW50KCkuZXhlY3V0ZSgiSU5TRVJUIElOVE8gdGVzdF9jb21w\nbGV4KGlkLCB0eXBlX2lkKSBWQUxVRVMgKDEsIDk4NykiKTsKICAgICAgICBj\nb25uLmNyZWF0ZVN0YXRlbWVudCgpLmV4ZWN1dGUoIklOU0VSVCBJTlRPIHRl\nc3RfY29tcGxleChpZCwgdHlwZV9pZCkgVkFMVUVTICgxLCBOVUxMKSIpOwoK\nICAgICAgICBjb25uLmNsb3NlKCk7CiAgICAgICAgCiAgICAgICAgZW0uZmx1\nc2goKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgkgICAgCn0K\n","encoding":"base64"}

