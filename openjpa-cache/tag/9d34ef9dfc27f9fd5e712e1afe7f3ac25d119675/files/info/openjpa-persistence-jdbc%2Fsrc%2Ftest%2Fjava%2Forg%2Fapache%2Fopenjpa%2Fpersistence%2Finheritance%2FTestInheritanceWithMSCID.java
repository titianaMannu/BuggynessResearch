{"sha":"80029c78830cd47b5ceb616664952143b17166c0","node_id":"MDQ6QmxvYjIwNjM2NDo4MDAyOWM3ODgzMGNkNDdiNWNlYjYxNjY2NDk1MjE0M2IxNzE2NmMw","size":11090,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/80029c78830cd47b5ceb616664952143b17166c0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuaW5oZXJpdGFu\nY2U7CgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuaW5oZXJpdGFuY2UuZW50aXRpZXMuRW50aXR5\nTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5pbmhlcml0YW5jZS5lbnRpdGllcy5FbnRpdHlNYXBwaW5nLgogICAgSW5o\nZXJpdGFuY2VFbnRpdHlNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLmluaGVyaXRhbmNlLmVudGl0aWVzLnRlc3RpbnRl\ncmZhY2VzLgogICAgUm9vdEVudGl0eTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKcHVi\nbGljIGNsYXNzIFRlc3RJbmhlcml0YW5jZVdpdGhNU0NJRCBleHRlbmRzIFNp\nbmdsZUVNRlRlc3RDYXNlIHsKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNo\nZWNrZWQiKQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgLyoK\nICAgICAgICAgKiBBbGwgZW50aXRpZXMgdXNlZCBieSB0aGlzIHRlc3QgYXJl\nIGRlZmluZWQgaW4gdGhlIGVudW1lcmF0aW9uCiAgICAgICAgICogRW50aXR5\nTWFwcGluZy5Jbmhlcml0YW5jZUVudGl0eU1hcHBpbmcuCiAgICAgICAgICov\nCiAgICAgICAgRW50aXR5TWFwcGluZy5Jbmhlcml0YW5jZUVudGl0eU1hcHBp\nbmdbXSBlbnRpdHlDbGFzc0VudW1zID0gCiAgICAgICAgICAgIEVudGl0eU1h\ncHBpbmcuSW5oZXJpdGFuY2VFbnRpdHlNYXBwaW5nLnZhbHVlcygpOwogICAg\nICAgIAogICAgICAgIENsYXNzW10gZW50aXR5Q2xhc3NUeXBlcyA9IG5ldyBD\nbGFzc1tlbnRpdHlDbGFzc0VudW1zLmxlbmd0aF07CiAgICAgICAgaW50IGlk\neCA9IDA7CiAgICAgICAgZm9yIChFbnRpdHlNYXBwaW5nLkluaGVyaXRhbmNl\nRW50aXR5TWFwcGluZyBlRW51bSA6IGVudGl0eUNsYXNzRW51bXMpIHsKICAg\nICAgICAgICAgZW50aXR5Q2xhc3NUeXBlc1tpZHhdID0gZUVudW0uZ2V0RW50\naXR5Q2xhc3MoKTsKICAgICAgICAgICAgaWR4Kys7CiAgICAgICAgfQogICAg\nICAgIAogICAgICAgIHNldFVwKChPYmplY3RbXSkgZW50aXR5Q2xhc3NUeXBl\ncyk7CiAgICB9CgogICAgcHJpdmF0ZSBJbmhlcml0YW5jZUVudGl0eU1hcHBp\nbmdbXVtdIGFsbEVudGl0eUdyb3VwcyA9IHsgCiAgICAgICAgICAgIEVudGl0\neU1hcHBpbmcuUElkSlRJRE1TQywgCiAgICAgICAgICAgIEVudGl0eU1hcHBp\nbmcuUElkSlRDRE1TQywKICAgICAgICAgICAgRW50aXR5TWFwcGluZy5QSWRK\nVFNETVNDLAogICAgICAgICAgICAKICAgICAgICAgICAgRW50aXR5TWFwcGlu\nZy5QSWRTVElETVNDLCAKICAgICAgICAgICAgRW50aXR5TWFwcGluZy5QSWRT\nVENETVNDLAogICAgICAgICAgICBFbnRpdHlNYXBwaW5nLlBJZFNUU0RNU0MK\nICAgIH07CiAgICAKICAgIC8qKgogICAgICogVmVyaWZpZXMgdGhhdCBlYWNo\nIGVudGl0eSB0eXBlIGluIHRoZSBpbmhlcml0YW5jZSBzdHJ1Y3R1cmUgY2Fu\nIGJlCiAgICAgKiBwZXJzaXN0ZWQuICBFbnRpdGllcyBhcmUgbm90IGNsZWFy\nZWQgb3V0IG9mIHRoZSBwZXJzaXN0ZW5jZSBjb250ZXh0CiAgICAgKiAodGhl\nIEwxIGNhY2hlKSB3aGVuIHRoZXkgYXJlIGNyZWF0ZWQuCiAgICAgKi8KICAg\nIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIHZv\naWQgdGVzdFBlcnNpc3RhYmxlV2l0aEVudGl0aWVzSW5MMUNhY2hlKCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIAogICAgICAgIGZvciAoSW5oZXJpdGFuY2VFbnRp\ndHlNYXBwaW5nW10gdEVudGl0aWVzIDogYWxsRW50aXR5R3JvdXBzICkgewog\nICAgICAgICAgICBpbnQgaWR4ID0gMDsKICAgICAgICAgICAgCiAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmb3IgKEluaGVyaXRhbmNlRW50\naXR5TWFwcGluZyB0RW50aXR5IDogdEVudGl0aWVzKSB7CiAgICAgICAgICAg\nICAgICAgICAgUm9vdEVudGl0eSBlbnRpdHkgPSAoUm9vdEVudGl0eSkgCiAg\nICAgICAgICAgICAgICAgICAgICAgIEVudGl0eU1hcHBpbmcuY3JlYXRlRW50\naXR5T2JqZWN0SW5zdGFuY2UodEVudGl0eSk7CiAgICAgICAgICAgICAgICAg\nICAgZW50aXR5LnVwZGF0ZUlkKG5ldyBJbnRlZ2VyKGlkeCsrKSk7CiAgICAg\nICAgICAgICAgICAgICAgZW50aXR5LnNldFJvb3RFbnRpdHlEYXRhKCJSb290\nICIgKyAoaWR4IC0gMSkpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAg\nICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICAgICAgICAgICAgICBlbS5wZXJzaXN0KGVudGl0eSk7CiAgICAgICAg\nICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgICAgIGZhaWwoIlRlc3QgZmFpbGVkIHdpdGgg\nRXhjZXB0aW9uXG4iICsgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\nCiAgICAgICAgICAgIExpc3Q8Um9vdEVudGl0eT4gcmVzdWx0TGlzdCA9IChM\naXN0PFJvb3RFbnRpdHk+KSBlbS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAg\nICAgICAgICAiU0VMRUNUIGUgRlJPTSAiICsgdEVudGl0aWVzWzBdLmdldEVu\ndGl0eU5hbWUoKSArIAogICAgICAgICAgICAgICAgICAgICIgZSBPUkRFUiBC\nWSBlLmlkIikuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHModEVudGl0aWVzLmxlbmd0aCwgcmVzdWx0TGlzdC5zaXplKCkpOwog\nICAgICAKICAgICAgICAgICAgaWR4ID0gMDsKICAgICAgICAgICAgZm9yIChP\nYmplY3Qgb2JqIDogcmVzdWx0TGlzdCkgewogICAgICAgICAgICAgICAgUm9v\ndEVudGl0eSBlbnRpdHkgPSAoUm9vdEVudGl0eSkgb2JqOwogICAgICAgICAg\nICAgICAgQ2xhc3M8PyBleHRlbmRzIFJvb3RFbnRpdHk+IGFjdHVhbFR5cGUg\nPSBlbnRpdHkuZ2V0Q2xhc3MoKTsKICAgICAgICAgICAgICAgIENsYXNzPD8g\nZXh0ZW5kcyBSb290RW50aXR5PiBleHBlY3RlZFR5cGUgPSAKICAgICAgICAg\nICAgICAgICAgICB0RW50aXRpZXNbaWR4XS5nZXRFbnRpdHlDbGFzcygpOwog\nICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nCiAgICAgICAgICAgICAgICAgICAgICAgICJBc3NlcnQgRW50aXR5ICIgKyAo\naWR4ICsgMSkgKyAiaXMgZW50aXR5IG9mIHR5cGUgIiArIAogICAgICAgICAg\nICAgICAgICAgICAgICBleHBlY3RlZFR5cGUsIGV4cGVjdGVkVHlwZSwgYWN0\ndWFsVHlwZSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlk\neCsrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogVmVyaWZp\nZXMgdGhhdCBlYWNoIGVudGl0eSB0eXBlIGluIHRoZSBpbmhlcml0YW5jZSBz\ndHJ1Y3R1cmUgY2FuIGJlCiAgICAgKiBwZXJzaXN0ZWQuICBFbnRpdGllcyBh\ncmUgY2xlYXJlZCBvdXQgb2YgdGhlIHBlcnNpc3RlbmNlIGNvbnRleHQKICAg\nICAqICh0aGUgTDEgY2FjaGUpIGFmdGVyIHRoZXkgYXJlIGNyZWF0ZWQuCiAg\nICAgKi8KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAg\ncHVibGljIHZvaWQgdGVzdFBlcnNpc3RhYmxlV2l0aEVudGl0aWVzQ2xlYXJl\nZEZyb21MMUNhY2hlKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOyAgICAgICAKICAgICAgICAKICAg\nICAgICBmb3IgKEluaGVyaXRhbmNlRW50aXR5TWFwcGluZ1tdIHRFbnRpdGll\ncyA6IGFsbEVudGl0eUdyb3VwcyApIHsKICAgICAgICAgICAgaW50IGlkeCA9\nIDA7CiAgICAgICAgICAgIAogICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgZm9yIChJbmhlcml0YW5jZUVudGl0eU1hcHBpbmcgdEVudGl0eSA6\nIHRFbnRpdGllcykgewogICAgICAgICAgICAgICAgICAgIFJvb3RFbnRpdHkg\nZW50aXR5ID0gKFJvb3RFbnRpdHkpIAogICAgICAgICAgICAgICAgICAgICAg\nICBFbnRpdHlNYXBwaW5nLmNyZWF0ZUVudGl0eU9iamVjdEluc3RhbmNlKHRF\nbnRpdHkpOwogICAgICAgICAgICAgICAgICAgIGVudGl0eS51cGRhdGVJZChu\nZXcgSW50ZWdlcihpZHgrKykpOwogICAgICAgICAgICAgICAgICAgIGVudGl0\neS5zZXRSb290RW50aXR5RGF0YSgiUm9vdCAiICsgKGlkeCAtIDEpKTsKICAg\nICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgICAgICAgICAgZW0u\ncGVyc2lzdChlbnRpdHkpOwogICAgICAgICAgICAgICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgICAgICAgICAgICAgZW0u\nY2xlYXIoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGZhaWwoIlRlc3Qg\nZmFpbGVkIHdpdGggRXhjZXB0aW9uXG4iICsgZSk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgCiAgICAgICAgICAgIExpc3Q8Um9vdEVudGl0eT4gIHJl\nc3VsdExpc3QgPSAoTGlzdDxSb290RW50aXR5PikgZW0uY3JlYXRlUXVlcnko\nCiAgICAgICAgICAgICAgICAgICAgIlNFTEVDVCBlIEZST00gIiArIHRFbnRp\ndGllc1swXS5nZXRFbnRpdHlOYW1lKCkgKyAKICAgICAgICAgICAgICAgICAg\nICAiIGUgT1JERVIgQlkgZS5pZCIpLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKHRFbnRpdGllcy5sZW5ndGgsIHJlc3VsdExp\nc3Quc2l6ZSgpKTsKICAgICAgCiAgICAgICAgICAgIGlkeCA9IDA7CiAgICAg\nICAgICAgIGZvciAoT2JqZWN0IG9iaiA6IHJlc3VsdExpc3QpIHsKICAgICAg\nICAgICAgICAgIFJvb3RFbnRpdHkgZW50aXR5ID0gKFJvb3RFbnRpdHkpIG9i\najsKICAgICAgICAgICAgICAgIENsYXNzPD8gZXh0ZW5kcyBSb290RW50aXR5\nPiBhY3R1YWxUeXBlID0gZW50aXR5LmdldENsYXNzKCk7CiAgICAgICAgICAg\nICAgICBDbGFzczw/IGV4dGVuZHMgUm9vdEVudGl0eT4gZXhwZWN0ZWRUeXBl\nID0gCiAgICAgICAgICAgICAgICAgICAgdEVudGl0aWVzW2lkeF0uZ2V0RW50\naXR5Q2xhc3MoKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKAogICAgICAgICAgICAgICAgICAgICAgICAiQXNzZXJ0\nIEVudGl0eSAiICsgKGlkeCArIDEpICsgImlzIGVudGl0eSBvZiB0eXBlICIg\nKyAKICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRUeXBlLCBleHBl\nY3RlZFR5cGUsIGFjdHVhbFR5cGUpOwogICAgICAgICAgICAgICAgCiAgICAg\nICAgICAgICAgICBpZHgrKzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICAKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAgCgogICAgCiAg\nICAvKgogICAgICogVGhlIGZvbGxvd2luZyB0ZXN0cyBleGVyY2lzZSB0aGUg\nZm9sbG93aW5nIHNjZW5hcmlvOgogICAgICogCiAgICAgKiBWZXJpZnkgdGhh\ndCBhbGwtaW5jbHVzaXZlIFNFTEVDVCBhZ2FpbnN0IGFuIGVudGl0eSB0aGF0\nIGlzIGEgbWVtYmVyCiAgICAgKiBvZiBhbiBpbmhlcml0YW5jZSBoaWVyYXJj\naHkgd2lsbCBpbmNsdWRlIGFsbCBvZiBpdHMgc3ViY2xhc3NlcyB3aXRoaW4K\nICAgICAqIHRoZSBxdWVyeSByZXN1bHRzIGFzIHdlbGwuCiAgICAgKiAKICAg\nICAqIFZhcmlhdGlvbnMgb2YgdGhpcyB0ZXN0IGluY2x1ZGUgY2xlYXJpbmcg\ndGhlIEwxIGNhY2hlIGFmdGVyIGRiIAogICAgICogcG9wdWxhdGlvbiBhbmQg\nYmV0d2VlbiBlYWNoIFF1ZXJ5IGNoZWNrLCBhbmQgbm90IGNsZWFyaW5nIHRo\nZSBMMSAKICAgICAqIGNhY2hlLgogICAgICogCiAgICAgKi8KICAgIAogICAg\ncHJpdmF0ZSBib29sZWFuW11bXSBxdWVyeUxvZ2ljMDAxQWNjZXB0ZW5jZU1h\ncHBpbmcgPSBuZXcgYm9vbGVhbltdW10gewogICAgICAgICAgICAvLyBSb290\nRW50aXR5CiAgICAgICAgICAgIG5ldyBib29sZWFuW10geyB0cnVlLCB0cnVl\nLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLAogICAgICAg\nICAgICAgICAgICAgIHRydWUgfSwKICAgICAgICAgICAgLy8gTGVhZiBBCiAg\nICAgICAgICAgIG5ldyBib29sZWFuW10geyBmYWxzZSwgdHJ1ZSwgZmFsc2Us\nIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLAogICAgICAgICAgICAgICAg\nICAgIGZhbHNlLCBmYWxzZSB9LAogICAgICAgICAgICAvLyBFbnRpdHlCCiAg\nICAgICAgICAgIG5ldyBib29sZWFuW10geyBmYWxzZSwgZmFsc2UsIHRydWUs\nIHRydWUsIHRydWUsIGZhbHNlLCBmYWxzZSwKICAgICAgICAgICAgICAgICAg\nICBmYWxzZSwgZmFsc2UgfSwKICAgICAgICAgICAgLy8gTGVhZiBCMQogICAg\nICAgICAgICBuZXcgYm9vbGVhbltdIHsgZmFsc2UsIGZhbHNlLCBmYWxzZSwg\ndHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwKICAgICAgICAgICAgICAgICAg\nICBmYWxzZSwgZmFsc2UgfSwKICAgICAgICAgICAgLy8gTGVhZiBCMgogICAg\nICAgICAgICBuZXcgYm9vbGVhbltdIHsgZmFsc2UsIGZhbHNlLCBmYWxzZSwg\nZmFsc2UsIHRydWUsIGZhbHNlLCBmYWxzZSwKICAgICAgICAgICAgICAgICAg\nICBmYWxzZSwgZmFsc2UgfSwKICAgICAgICAgICAgLy8gTGVhZiBDCiAgICAg\nICAgICAgIG5ldyBib29sZWFuW10geyBmYWxzZSwgZmFsc2UsIGZhbHNlLCBm\nYWxzZSwgZmFsc2UsIHRydWUsIGZhbHNlLAogICAgICAgICAgICAgICAgICAg\nIGZhbHNlLCBmYWxzZSB9LAogICAgICAgICAgICAvLyBFbnRpdHkgRAogICAg\nICAgICAgICBuZXcgYm9vbGVhbltdIHsgZmFsc2UsIGZhbHNlLCBmYWxzZSwg\nZmFsc2UsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwKICAgICAgICAgICAgICAgICAg\nICB0cnVlLCB0cnVlIH0sCiAgICAgICAgICAgIC8vIExlYWYgRDEKICAgICAg\nICAgICAgbmV3IGJvb2xlYW5bXSB7IGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZh\nbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLAogICAgICAgICAgICAgICAgICAg\nIHRydWUsIGZhbHNlIH0sCiAgICAgICAgICAgIC8vIExlYWYgRDIKICAgICAg\nICAgICAgbmV3IGJvb2xlYW5bXSB7IGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZh\nbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLAogICAgICAgICAgICAgICAgICAg\nIGZhbHNlLCB0cnVlIH0gfTsKCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5j\naGVja2VkIikKICAgIHByaXZhdGUgdm9pZCBxdWVyeTAwMVRlc3RMb2dpYyhi\nb29sZWFuIGNsZWFyTDFDYWNoZSkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOyAgICAgICAgIAogICAg\nICAgICAgICAKICAgICAgICBib29sZWFuW11bXSBhY2NlcHRlbmNlTWFwcGlu\nZyA9IHF1ZXJ5TG9naWMwMDFBY2NlcHRlbmNlTWFwcGluZzsKICAgICAgICAK\nICAgICAgICBmb3IgKEluaGVyaXRhbmNlRW50aXR5TWFwcGluZ1tdIHRFbnRp\ndGllcyA6IGFsbEVudGl0eUdyb3VwcyApIHsKICAgICAgICAgICAgLy8gUG9w\ndWxhdGUgRGF0YWJhc2UKICAgICAgICAgICAgaW50IGlkeCA9IDA7CiAgICAg\nICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmb3IgKEluaGVyaXRhbmNl\nRW50aXR5TWFwcGluZyB0RW50aXR5IDogdEVudGl0aWVzKSB7CiAgICAgICAg\nICAgICAgICAgICAgUm9vdEVudGl0eSBlbnRpdHkgPSAoUm9vdEVudGl0eSkg\nCiAgICAgICAgICAgICAgICAgICAgICAgIEVudGl0eU1hcHBpbmcuY3JlYXRl\nRW50aXR5T2JqZWN0SW5zdGFuY2UodEVudGl0eSk7CiAgICAgICAgICAgICAg\nICAgICAgZW50aXR5LnVwZGF0ZUlkKG5ldyBJbnRlZ2VyKGlkeCsrKSk7CiAg\nICAgICAgICAgICAgICAgICAgZW50aXR5LnNldFJvb3RFbnRpdHlEYXRhKCJS\nb290ICIgKyAoaWR4IC0gMSkpOwogICAgICAgICAgICAgICAgICAgIAogICAg\nICAgICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICAgICAgICAgICAgICBlbS5wZXJzaXN0KGVudGl0eSk7CiAgICAg\nICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsK\nICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAo\nY2xlYXJMMUNhY2hlKQogICAgICAgICAgICAgICAgICAgICAgICBlbS5jbGVh\ncigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgZmFpbCgiVGVzdCBmYWls\nZWQgd2l0aCBFeGNlcHRpb25cbiIgKyBlKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICAKICAgICAgICAgICAgLy8gUnVuIHRocm91Z2ggYWNjZXB0YW5j\nZSB0ZXN0cwogICAgICAgICAgICBpZHggPSAwOwogICAgICAgICAgICBmb3Ig\nKGJvb2xlYW5bXSBhY2NlcHRlbmNlTWFwIDogYWNjZXB0ZW5jZU1hcHBpbmcp\nIHsKICAgICAgICAgICAgICAgIGludCBleHBlY3RlZFF1ZXJ5UmVzdWx0TGlz\ndFNpemUgPSAwOwogICAgICAgICAgICAgICAgZm9yIChib29sZWFuIGFjY2Vw\ndGVuY2UgOiBhY2NlcHRlbmNlTWFwKSB7CiAgICAgICAgICAgICAgICAgICAg\naWYgKGFjY2VwdGVuY2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVj\ndGVkUXVlcnlSZXN1bHRMaXN0U2l6ZSsrOwogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgU3RyaW5nIHF1ZXJ5U3RyID0gIlNFTEVDVCBlIEZS\nT00gIiArIAogICAgICAgICAgICAgICAgICAgIHRFbnRpdGllc1tpZHhdLmdl\ndEVudGl0eU5hbWUoKSArICIgZSI7CiAgICAgICAgICAgICAgICBMaXN0PFJv\nb3RFbnRpdHk+IHJlc3VsdExpc3QgPSAoTGlzdDxSb290RW50aXR5PikKICAg\nICAgICAgICAgICAgICAgICBlbS5jcmVhdGVRdWVyeShxdWVyeVN0cikuZ2V0\nUmVzdWx0TGlzdCgpOwoKICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscygK\nICAgICAgICAgICAgICAgICAgICAgICAgIkFzc2VydCB0aGUgZm9sbG93aW5n\nIHF1ZXJ5IGNyZWF0ZXMgYSByZXN1bHQgbGlzdCAiICsKICAgICAgICAgICAg\nICAgICAgICAgICAgIndpdGggIiArIGV4cGVjdGVkUXVlcnlSZXN1bHRMaXN0\nU2l6ZSArICIgZW50aXRpZXM6ICIgKwogICAgICAgICAgICAgICAgICAgICAg\nICAiXCIiICsgcXVlcnlTdHIgKyAiXCIuICAiLAogICAgICAgICAgICAgICAg\nICAgICAgICBleHBlY3RlZFF1ZXJ5UmVzdWx0TGlzdFNpemUsIAogICAgICAg\nICAgICAgICAgICAgICAgICByZXN1bHRMaXN0LnNpemUoKSk7CiAgICAgICAg\nICAgICAgICBpZHgrKzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAg\nICAgaWYgKGNsZWFyTDFDYWNoZSkKICAgICAgICAgICAgICAgICAgICBlbS5j\nbGVhcigpOwogICAgICAgICAgICB9ICAgICAgICAKICAgICAgICB9CgogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogVmVy\naWZ5IHRoYXQgYWxsLWluY2x1c2l2ZSBTRUxFQ1QgYWdhaW5zdCBhbiBlbnRp\ndHkgdGhhdCBpcyBhIG1lbWJlciBvZiBhbgogICAgICogaW5oZXJpdGFuY2Ug\naGllcmFyY2h5IHdpbGwgaW5jbHVkZSBhbGwgb2YgaXRzIHN1YmNsYXNzZXMg\nd2l0aGluIHRoZSBxdWVyeQogICAgICogcmVzdWx0cyBhcyB3ZWxsLiAgVGVz\ndCB3aWxsIG5vdCBjbGVhciB0aGUgTDEgY2FjaGUgYWZ0ZXIgcG9wdWxhdGlu\nZyBEQgogICAgICogYW5kIHdpbGwgbm90IGNsZWFyIHRoZSBMMSBjYWNoZSBp\nbiBiZXR3ZWVuIFF1ZXJ5IGV4ZWN1dGlvbnMuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RRdWVyeTAwMVdpdGhMMSgpIHsKICAgICAgICBxdWVyeTAw\nMVRlc3RMb2dpYyhmYWxzZSk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICog\nVmVyaWZ5IHRoYXQgYWxsLWluY2x1c2l2ZSBTRUxFQ1QgYWdhaW5zdCBhbiBl\nbnRpdHkgdGhhdCBpcyBhIG1lbWJlciBvZiBhbgogICAgICogaW5oZXJpdGFu\nY2UgaGllcmFyY2h5IHdpbGwgaW5jbHVkZSBhbGwgb2YgaXRzIHN1YmNsYXNz\nZXMgd2l0aGluIHRoZSBxdWVyeQogICAgICogcmVzdWx0cyBhcyB3ZWxsLiAg\nVGVzdCB3aWxsIGNsZWFyIHRoZSBMMSBjYWNoZSBhZnRlciBwb3B1bGF0aW5n\nIERCCiAgICAgKiBhbmQgd2lsbCAgY2xlYXIgdGhlIEwxIGNhY2hlIGluIGJl\ndHdlZW4gUXVlcnkgZXhlY3V0aW9ucy4KICAgICAqLwogICAgcHVibGljIHZv\naWQgdGVzdFF1ZXJ5MDAxTm9MMSgpIHsKICAgICAgICBxdWVyeTAwMVRlc3RM\nb2dpYyh0cnVlKTsKICAgIH0KfQo=\n","encoding":"base64"}

