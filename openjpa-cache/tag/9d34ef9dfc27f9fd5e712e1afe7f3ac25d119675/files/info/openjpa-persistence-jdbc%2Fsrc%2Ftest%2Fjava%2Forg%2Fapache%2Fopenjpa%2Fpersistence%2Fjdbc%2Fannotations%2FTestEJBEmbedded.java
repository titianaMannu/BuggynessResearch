{"sha":"9288fd9de72a08d4aa0f541f7ce3d7f5ee10b00e","node_id":"MDQ6QmxvYjIwNjM2NDo5Mjg4ZmQ5ZGU3MmEwOGQ0YWEwZjU0MWY3Y2UzZDdmNWVlMTBiMDBl","size":5202,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9288fd9de72a08d4aa0f541f7ce3d7f5ee10b00e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmFubm90\nYXRpb25zOwoKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkZpZWxkTWFwcGlu\nZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRz\nLkNsb2JWYWx1ZUhhbmRsZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5tZXRhLnN0cmF0cy5NYXhFbWJlZGRlZENsb2JGaWVsZFN0cmF0ZWd5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHMu\nU3RyaW5nRmllbGRTdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5KUEFGYWNhZGVI\nZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01l\ndGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuRmllbGRN\nZXRhRGF0YTsKCi8qKgogKiBUZXN0IGZvciBlbWJlZGRlZAogKgogKiBAYXV0\naG9yIFN0ZXZlIEtpbQogKi8KcHVibGljIGNsYXNzIFRlc3RFSkJFbWJlZGRl\nZCBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBTdHJpbmcgQ0xPQjsKCiAgICBzdGF0aWMgewogICAgICAg\nIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwOyBpKyspCiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoJ2EnKTsKICAgICAgICBDTE9CID0gYnVmLnRvU3RyaW5n\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAg\nc2V0VXAoRW1iZWRPd25lci5jbGFzcywgRW1iZWRWYWx1ZS5jbGFzcywgQ0xF\nQVJfVEFCTEVTKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1iZWRk\nZWQoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIEVtYmVkT3duZXIgb3duZXIgPSBuZXcgRW1iZWRP\nd25lcigpOwogICAgICAgIG93bmVyLnNldEJhc2ljKCJmb28iKTsKICAgICAg\nICBFbWJlZFZhbHVlIGVtYmVkID0gbmV3IEVtYmVkVmFsdWUoKTsKICAgICAg\nICBlbWJlZC5zZXRDbG9iKENMT0IpOwogICAgICAgIGVtYmVkLnNldEJhc2lj\nKCJiYXIiKTsKICAgICAgICBlbWJlZC5zZXRCbG9iKCJmb29iYXIiLmdldEJ5\ndGVzKCkpOwogICAgICAgIGVtYmVkLnNldE93bmVyKG93bmVyKTsKICAgICAg\nICBvd25lci5zZXRFbWJlZChlbWJlZCk7CiAgICAgICAgZW0ucGVyc2lzdChv\nd25lcik7CiAgICAgICAgaW50IHBrID0gb3duZXIuZ2V0UGsoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBvd25lciA9IGVtLmZpbmQoRW1iZWRPd25lci5jbGFzcywg\ncGspOwogICAgICAgIGFzc2VydEVxdWFscygiZm9vIiwgb3duZXIuZ2V0QmFz\naWMoKSk7CiAgICAgICAgZW1iZWQgPSBvd25lci5nZXRFbWJlZCgpOwogICAg\nICAgIGFzc2VydE5vdE51bGwoZW1iZWQpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhDTE9CLCBlbWJlZC5nZXRDbG9iKCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiYmFyIiwgZW1iZWQuZ2V0QmFzaWMoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJmb29iYXIiLCBuZXcgU3RyaW5nKGVtYmVkLmdldEJsb2IoKSkpOwog\nICAgICAgIGFzc2VydEVxdWFscyhvd25lciwgZW1iZWQuZ2V0T3duZXIoKSk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RW1iZWRkZWRNZXRhRGF0YSgpIHsKICAgICAgICBDbGFzc01ldGFEYXRh\nIG93bmVyTWV0YSA9CiAgICAgICAgICAgIEpQQUZhY2FkZUhlbHBlci5nZXRN\nZXRhRGF0YShlbWYsIEVtYmVkT3duZXIuY2xhc3MpOwogICAgICAgIEZpZWxk\nTWV0YURhdGEgZm1kID0gb3duZXJNZXRhLmdldEZpZWxkKCJlbWJlZCIpOwog\nICAgICAgIENsYXNzTWV0YURhdGEgZW1iZWRkZWRNZXRhID0gZm1kLmdldERl\nZmluaW5nTWV0YURhdGEoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGVtYmVk\nZGVkTWV0YSk7CiAgICAgICAgYXNzZXJ0TnVsbChlbWJlZGRlZE1ldGEuZ2V0\nRmllbGQoInRyYW5zaWVudEZpZWxkIikpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3ROdWxsKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBFbWJlZE93bmVyIG93bmVyID0g\nbmV3IEVtYmVkT3duZXIoKTsKICAgICAgICBvd25lci5zZXRCYXNpYygiZm9v\nIik7CiAgICAgICAgZW0ucGVyc2lzdChvd25lcik7CiAgICAgICAgaW50IHBr\nID0gb3duZXIuZ2V0UGsoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBvd25lciA9IGVt\nLmZpbmQoRW1iZWRPd25lci5jbGFzcywgcGspOwogICAgICAgIGFzc2VydEVx\ndWFscygiZm9vIiwgb3duZXIuZ2V0QmFzaWMoKSk7CiAgICAgICAgRW1iZWRW\nYWx1ZSBlbWJlZCA9IG93bmVyLmdldEVtYmVkKCk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChlbWJlZCk7CiAgICAgICAgYXNzZXJ0TnVsbChlbWJlZC5nZXRD\nbG9iKCkpOwogICAgICAgIGFzc2VydE51bGwoZW1iZWQuZ2V0QmFzaWMoKSk7\nCiAgICAgICAgYXNzZXJ0TnVsbChlbWJlZC5nZXRCbG9iKCkpOwogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE1hcHBp\nbmdUcmFuc2ZlckFuZE92ZXJyaWRlKCkgewogICAgICAgIEpEQkNDb25maWd1\ncmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pIGVtZi5nZXRDb25m\naWd1cmF0aW9uKCk7CiAgICAgICAgQ2xhc3NNYXBwaW5nIGNscyA9IGNvbmYu\nZ2V0TWFwcGluZ1JlcG9zaXRvcnlJbnN0YW5jZSgpLmdldE1hcHBpbmcKICAg\nICAgICAgICAgKEVtYmVkT3duZXIuY2xhc3MsIG51bGwsIHRydWUpOwogICAg\nICAgIGFzc2VydEVxdWFscygiT1dOX0JBU0lDIiwgY2xzLmdldEZpZWxkTWFw\ncGluZygiYmFzaWMiKS4KICAgICAgICAgICAgZ2V0Q29sdW1ucygpWzBdLmdl\ndE5hbWUoKSk7CiAgICAgICAgQ2xhc3NNYXBwaW5nIGVtYmVkID0gY2xzLmdl\ndEZpZWxkTWFwcGluZygiZW1iZWQiKS5nZXRFbWJlZGRlZE1hcHBpbmcoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoIkVNQl9CTE9CIiwgZW1iZWQuZ2V0Rmll\nbGRNYXBwaW5nKCJibG9iIikuCiAgICAgICAgICAgIGdldENvbHVtbnMoKVsw\nXS5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiT1ZFUl9CQVNJ\nQyIsIGVtYmVkLmdldEZpZWxkTWFwcGluZygiYmFzaWMiKS4KICAgICAgICAg\nICAgZ2V0Q29sdW1ucygpWzBdLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJPVkVSX09XTkVSIiwgZW1iZWQuZ2V0RmllbGRNYXBwaW5nKCJv\nd25lciIpLgogICAgICAgICAgICBnZXRDb2x1bW5zKClbMF0uZ2V0TmFtZSgp\nKTsKCiAgICAgICAgRmllbGRNYXBwaW5nIGZtID0gZW1iZWQuZ2V0RmllbGRN\nYXBwaW5nKCJjbG9iIik7CiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSBj\nb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgaWYgKGRp\nY3QuZ2V0UHJlZmVycmVkVHlwZShUeXBlcy5DTE9CKSA9PSBUeXBlcy5DTE9C\nKSB7CiAgICAgICAgICAgIGlmIChkaWN0Lm1heEVtYmVkZGVkQ2xvYlNpemUg\nPiAwKQogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZShmbS5nZXRTdHJhdGVn\neSgpIGluc3RhbmNlb2YKICAgICAgICAgICAgICAgICAgICBNYXhFbWJlZGRl\nZENsb2JGaWVsZFN0cmF0ZWd5KTsKICAgICAgICAgICAgZWxzZQogICAgICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZShmbS5nZXRIYW5kbGVyKCkgaW5zdGFuY2Vv\nZiBDbG9iVmFsdWVIYW5kbGVyKTsKICAgICAgICB9IGVsc2UKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZShmbS5nZXRTdHJhdGVneSgpIGluc3RhbmNlb2YgU3Ry\naW5nRmllbGRTdHJhdGVneSk7CiAgICB9Cn0K\n","encoding":"base64"}

