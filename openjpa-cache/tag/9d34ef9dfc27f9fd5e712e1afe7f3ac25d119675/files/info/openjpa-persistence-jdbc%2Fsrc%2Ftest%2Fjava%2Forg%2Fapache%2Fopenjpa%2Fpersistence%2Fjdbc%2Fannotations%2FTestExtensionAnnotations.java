{"sha":"bbd9f592acb022c7788bd5498e9f3426b3a1f36d","node_id":"MDQ6QmxvYjIwNjM2NDpiYmQ5ZjU5MmFjYjAyMmM3Nzg4YmQ1NDk4ZTlmMzQyNmIzYTFmMzZk","size":5609,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bbd9f592acb022c7788bd5498e9f3426b3a1f36d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmFubm90\nYXRpb25zOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYu\nSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLm1ldGEuRmllbGRNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLm1ldGEuRmV0Y2hHcm91cDsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLlVwZGF0ZVN0cmF0ZWdpZXM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubWV0YS5WYWx1ZU1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLm1ldGEuVmFsdWVTdHJhdGVnaWVzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENh\nc2U7CgovKioKICogPHA+VGVzdCB0aGUgcGFyc2luZyBvZiBLb2RvIG1ldGFk\nYXRhIGV4dGVuc2lvbiBhbm5vdGF0aW9ucy48L3A+CiAqCiAqIEBhdXRob3Ig\nQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgVGVzdEV4dGVuc2lvbkFubm90\nYXRpb25zCiAgICBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKCiAgICBw\ncml2YXRlIENsYXNzTWFwcGluZyBfbWFwcGluZzsKCiAgICBwdWJsaWMgdm9p\nZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChFeHRlbnNpb25zRW50aXR5LmNs\nYXNzKTsKICAgICAgICBfbWFwcGluZyA9ICgoSkRCQ0NvbmZpZ3VyYXRpb24p\nIGVtZi5nZXRDb25maWd1cmF0aW9uKCkpLgogICAgICAgICAgICBnZXRNYXBw\naW5nUmVwb3NpdG9yeUluc3RhbmNlKCkuZ2V0TWFwcGluZyhFeHRlbnNpb25z\nRW50aXR5LmNsYXNzLAogICAgICAgICAgICBudWxsLCB0cnVlKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGF0YVN0b3JlSWQoKSB7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKENsYXNzTWFwcGluZy5JRF9EQVRBU1RPUkUsIF9tYXBw\naW5nLmdldElkZW50aXR5VHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nVmFsdWVTdHJhdGVnaWVzLlNFUVVFTkNFLCBfbWFwcGluZy5nZXRJZGVudGl0\neVN0cmF0ZWd5KCkpOwogICAgICAgIGFzc2VydEVxdWFscygic3lzdGVtIiwg\nX21hcHBpbmcuZ2V0SWRlbnRpdHlTZXF1ZW5jZU5hbWUoKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdERhdGFDYWNoZSgpIHsKICAgICAgICBhc3Nl\ncnROdWxsKF9tYXBwaW5nLmdldERhdGFDYWNoZU5hbWUoKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdEZldGNoR3JvdXBzKCkgewogICAgICAgIEZl\ndGNoR3JvdXAgZmcgPSBfbWFwcGluZy5nZXRGZXRjaEdyb3VwKCJkZXRhaWwi\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGZnKTsKICAgICAgICBhc3NlcnRG\nYWxzZShmZy5pc1Bvc3RMb2FkKCkpOwogICAgICAgIEZpZWxkTWFwcGluZyBm\nbSA9IF9tYXBwaW5nLmdldEZpZWxkTWFwcGluZygicmVsIik7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEN1c3RvbUZldGNoR3JvdXBzKCkubGVu\nZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImRldGFpbCIsIGZtLmdldEN1\nc3RvbUZldGNoR3JvdXBzKClbMF0pOwogICAgICAgIGFzc2VydEVxdWFscygt\nMSwgZmcuZ2V0UmVjdXJzaW9uRGVwdGgoZm0pKTsKICAgICAgICBmbSA9IF9t\nYXBwaW5nLmdldEZpZWxkTWFwcGluZygic2VxIik7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIGZtLmdldEN1c3RvbUZldGNoR3JvdXBzKCkubGVuZ3RoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoImRldGFpbCIsIGZtLmdldEN1c3RvbUZl\ndGNoR3JvdXBzKClbMF0pOwogICAgICAgIGFzc2VydEVxdWFscygxLCBmZy5n\nZXRSZWN1cnNpb25EZXB0aChmbSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RWYWx1ZVN0cmF0ZWd5KCkgewogICAgICAgIGFzc2VydEVxdWFscyhW\nYWx1ZVN0cmF0ZWdpZXMuVVVJRF9IRVgsCiAgICAgICAgICAgIF9tYXBwaW5n\nLmdldEZpZWxkKCJ1dWlkIikuZ2V0VmFsdWVTdHJhdGVneSgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoVmFsdWVTdHJhdGVnaWVzLlVVSURfU1RSSU5HLAog\nICAgICAgICAgICBfbWFwcGluZy5nZXRGaWVsZCgidXVpZFN0cmluZyIpLmdl\ndFZhbHVlU3RyYXRlZ3koKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFZhbHVl\nU3RyYXRlZ2llcy5VVUlEX1RZUEU0X0hFWCwKICAgICAgICAgICAgX21hcHBp\nbmcuZ2V0RmllbGQoInV1aWRUNEhleCIpLmdldFZhbHVlU3RyYXRlZ3koKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKFZhbHVlU3RyYXRlZ2llcy5VVUlEX1RZ\nUEU0X1NUUklORywKICAgICAgICAgICAgX21hcHBpbmcuZ2V0RmllbGQoInV1\naWRUNFN0cmluZyIpLmdldFZhbHVlU3RyYXRlZ3koKSk7CiAgICAgICAgRmll\nbGRNYXBwaW5nIHNlcSA9IF9tYXBwaW5nLmdldEZpZWxkTWFwcGluZygic2Vx\nIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFZhbHVlU3RyYXRlZ2llcy5TRVFV\nRU5DRSwgc2VxLmdldFZhbHVlU3RyYXRlZ3koKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJzeXN0ZW0iLCBzZXEuZ2V0VmFsdWVTZXF1ZW5jZU5hbWUoKSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFJlYWRPbmx5KCkgewogICAg\nICAgIGFzc2VydEVxdWFscyhVcGRhdGVTdHJhdGVnaWVzLlJFU1RSSUNULAog\nICAgICAgICAgICBfbWFwcGluZy5nZXRGaWVsZCgic2VxIikuZ2V0VXBkYXRl\nU3RyYXRlZ3koKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEludmVy\nc2VMb2dpY2FsKCkgewogICAgICAgIGFzc2VydEVxdWFscygib3duZXIiLCBf\nbWFwcGluZy5nZXRGaWVsZCgicmVsIikuZ2V0SW52ZXJzZSgpKTsKICAgICAg\nICBhc3NlcnROdWxsKF9tYXBwaW5nLmdldEZpZWxkKCJvd25lciIpLmdldElu\ndmVyc2UoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdERlcGVuZGVu\ndCgpIHsKICAgICAgICBhc3NlcnRFcXVhbHMoVmFsdWVNZXRhRGF0YS5DQVND\nQURFX0FVVE8sCiAgICAgICAgICAgIF9tYXBwaW5nLmdldEZpZWxkKCJyZWwi\nKS5nZXRDYXNjYWRlRGVsZXRlKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhW\nYWx1ZU1ldGFEYXRhLkNBU0NBREVfTk9ORSwKICAgICAgICAgICAgX21hcHBp\nbmcuZ2V0RmllbGQoImVhZ2VyIikuZ2V0Q2FzY2FkZURlbGV0ZSgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoVmFsdWVNZXRhRGF0YS5DQVNDQURFX0FVVE8s\nCiAgICAgICAgICAgIF9tYXBwaW5nLmdldEZpZWxkKCJlYWdlciIpLmdldEVs\nZW1lbnQoKS5nZXRDYXNjYWRlRGVsZXRlKCkpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RMUlMoKSB7CiAgICAgICAgYXNzZXJ0VHJ1ZShfbWFwcGlu\nZy5nZXRGaWVsZCgibHJzIikuaXNMUlMoKSk7CiAgICAgICAgYXNzZXJ0RmFs\nc2UoX21hcHBpbmcuZ2V0RmllbGQoImVhZ2VyIikuaXNMUlMoKSk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdENsYXNzQ3JpdGVyaWEoKSB7CiAgICAg\nICAgYXNzZXJ0VHJ1ZShfbWFwcGluZy5nZXRGaWVsZE1hcHBpbmcoImVhZ2Vy\nIikuZ2V0RWxlbWVudE1hcHBpbmcoKS4KICAgICAgICAgICAgZ2V0VXNlQ2xh\nc3NDcml0ZXJpYSgpKTsKICAgICAgICBhc3NlcnRGYWxzZShfbWFwcGluZy5n\nZXRGaWVsZE1hcHBpbmcoImVhZ2VyIikuZ2V0VXNlQ2xhc3NDcml0ZXJpYSgp\nKTsKICAgICAgICBhc3NlcnRGYWxzZShfbWFwcGluZy5nZXRGaWVsZE1hcHBp\nbmcoImxycyIpLmdldEVsZW1lbnRNYXBwaW5nKCkuCiAgICAgICAgICAgIGdl\ndFVzZUNsYXNzQ3JpdGVyaWEoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdEV4dGVybmFsVmFsdWVzKCkgewogICAgICAgIEZpZWxkTWFwcGluZyBl\neHRlcm5hbFZhbHVlcyA9IF9tYXBwaW5nLmdldEZpZWxkTWFwcGluZwogICAg\nICAgICAgICAoImV4dGVybmFsVmFsdWVzIik7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKEphdmFUeXBlcy5DSEFSLCBleHRlcm5hbFZhbHVlcy5nZXREZWNsYXJl\nZFR5cGVDb2RlKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhKYXZhVHlwZXMu\nSU5ULCBleHRlcm5hbFZhbHVlcy5nZXRUeXBlQ29kZSgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMobmV3IEludGVnZXIoMSksIGV4dGVybmFsVmFsdWVzLmdl\ndEV4dGVybmFsVmFsdWVNYXAoKS4KICAgICAgICAgICAgZ2V0KG5ldyBDaGFy\nYWN0ZXIoJ00nKSkpOwogICAgICAgIGFzc2VydEVxdWFscyhuZXcgSW50ZWdl\ncigyKSwgZXh0ZXJuYWxWYWx1ZXMuZ2V0RXh0ZXJuYWxWYWx1ZU1hcCgpLgog\nICAgICAgICAgICBnZXQobmV3IENoYXJhY3RlcignRicpKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdEV4dGVybmFsaXplcigpIHsKICAgICAgICBG\naWVsZE1hcHBpbmcgZXh0ZXJuYWxpemVyID0gX21hcHBpbmcuZ2V0RmllbGRN\nYXBwaW5nKCJleHRlcm5hbGl6ZXIiKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nSmF2YVR5cGVzLk9CSkVDVCwgZXh0ZXJuYWxpemVyLmdldERlY2xhcmVkVHlw\nZUNvZGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEphdmFUeXBlcy5TVFJJ\nTkcsIGV4dGVybmFsaXplci5nZXRUeXBlQ29kZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoImphdmEubGFuZy5TdHJpbmciLCBleHRlcm5hbGl6ZXIuZ2V0\nRXh0ZXJuYWxWYWx1ZQogICAgICAgICAgICAoU3RyaW5nLmNsYXNzLCBudWxs\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFN0cmluZy5jbGFzcywgZXh0ZXJu\nYWxpemVyLmdldEZpZWxkVmFsdWUKICAgICAgICAgICAgKFN0cmluZy5jbGFz\ncy5nZXROYW1lKCksIG51bGwpKTsKICAgIH0KfQo=\n","encoding":"base64"}

