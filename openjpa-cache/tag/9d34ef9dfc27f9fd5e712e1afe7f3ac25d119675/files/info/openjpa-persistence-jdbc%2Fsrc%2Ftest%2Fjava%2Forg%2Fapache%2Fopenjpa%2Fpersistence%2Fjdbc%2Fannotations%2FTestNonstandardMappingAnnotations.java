{"sha":"dc5d262929c8d8b8ca4f07e628b81e67e7211a0a","node_id":"MDQ6QmxvYjIwNjM2NDpkYzVkMjYyOTI5YzhkOGI4Y2E0ZjA3ZTYyOGI4MWU2N2U3MjExYTBh","size":12298,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/dc5d262929c8d8b8ca4f07e628b81e67e7211a0a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmFubm90\nYXRpb25zOwoKaW1wb3J0IGphdmEuYXd0Lio7CmltcG9ydCBqYXZhLnV0aWwu\nTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRC\nQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLm1ldGEuRGlzY3JpbWluYXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuRmllbGRNYXBwaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5WYWx1ZU1hcHBpbmc7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0cy5DbGFzc05hbWVE\naXNjcmltaW5hdG9yU3RyYXRlZ3k7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuSlBBRmFjYWRlSGVscGVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRp\ndHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgovKioKICogPHA+VGVzdCB0\naGUgcGFyc2luZyBvZiBub24tc3RhbmRhcmQgbWFwcGluZyBhbm5vdGF0aW9u\ncy48L3A+CiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xh\nc3MgVGVzdE5vbnN0YW5kYXJkTWFwcGluZ0Fubm90YXRpb25zCiAgICBleHRl\nbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKCiAgICBwcml2YXRlIENsYXNzTWFw\ncGluZyBfbWFwcGluZzsKICAgIHByaXZhdGUgREJEaWN0aW9uYXJ5IF9kaWN0\nOwoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIHNldFVwKE5v\nbnN0YW5kYXJkTWFwcGluZ0VudGl0eS5jbGFzcywgRXh0ZW5zaW9uc0VudGl0\neS5jbGFzcywKICAgICAgICAgICAgTm9uc3RhbmRhcmRNYXBwaW5nTWFwcGVk\nU3VwZXIuY2xhc3MsIEVtYmVkVmFsdWUyLmNsYXNzLAogICAgICAgICAgICBF\nbWJlZFZhbHVlLmNsYXNzLAogICAgICAgICAgICBDTEVBUl9UQUJMRVMpOwoK\nICAgICAgICAvLyB0cmlnZ2VyIGNvbXBsZXRlIHJlc29sdXRpb24gb2YgbWV0\nYWRhdGEgZXRjLgogICAgICAgIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCku\nY2xvc2UoKTsKCiAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IChK\nREJDQ29uZmlndXJhdGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKTsKICAg\nICAgICBfZGljdCA9IGNvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsK\nICAgICAgICBfbWFwcGluZyA9IChDbGFzc01hcHBpbmcpIEpQQUZhY2FkZUhl\nbHBlci5nZXRNZXRhRGF0YShlbWYsCiAgICAgICAgICAgIE5vbnN0YW5kYXJk\nTWFwcGluZ0VudGl0eS5jbGFzcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdE5vbnBvbHltb3JwaGljKCkgewogICAgICAgIEZpZWxkTWFwcGluZyBm\nbSA9IF9tYXBwaW5nLmdldEZpZWxkTWFwcGluZygic3VwZXJSZWwiKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoVmFsdWVNYXBwaW5nLlBPTFlfRkFMU0UsIGZt\nLmdldFBvbHltb3JwaGljKCkpOwoKICAgICAgICBWYWx1ZU1hcHBpbmcgdm0g\nPSBfbWFwcGluZy5nZXRGaWVsZE1hcHBpbmcoImpvaW5Db2xsZWN0aW9uIiku\nCiAgICAgICAgICAgIGdldEVsZW1lbnRNYXBwaW5nKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKFZhbHVlTWFwcGluZy5QT0xZX0pPSU5BQkxFLCB2bS5nZXRQ\nb2x5bW9ycGhpYygpKTsKCiAgICAgICAgdm0gPSBfbWFwcGluZy5nZXRGaWVs\nZE1hcHBpbmcoImpvaW5NYXAiKS5nZXRLZXlNYXBwaW5nKCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKFZhbHVlTWFwcGluZy5QT0xZX0ZBTFNFLCB2bS5nZXRQ\nb2x5bW9ycGhpYygpKTsKICAgICAgICB2bSA9IF9tYXBwaW5nLmdldEZpZWxk\nTWFwcGluZygiam9pbk1hcCIpLmdldEVsZW1lbnRNYXBwaW5nKCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKFZhbHVlTWFwcGluZy5QT0xZX0ZBTFNFLCB2bS5n\nZXRQb2x5bW9ycGhpYygpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRGF0YVN0b3JlSWRDb2x1bW4oKSB7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJO\nT05TVERfRU5USVRZIiwgX21hcHBpbmcuZ2V0VGFibGUoKS5nZXROYW1lKCkp\nOwogICAgICAgIGFzc2VydEVxdWFscyhDbGFzc01hcHBpbmcuSURfREFUQVNU\nT1JFLCBfbWFwcGluZy5nZXRJZGVudGl0eVR5cGUoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIF9tYXBwaW5nLmdldFByaW1hcnlLZXlDb2x1bW5zKCku\nbGVuZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIk9JRCIsIF9tYXBwaW5n\nLmdldFByaW1hcnlLZXlDb2x1bW5zKClbMF0uZ2V0TmFtZSgpKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGlzY3JpbWluYXRvcigpIHsKICAgICAg\nICBEaXNjcmltaW5hdG9yIGRpc2MgPSBfbWFwcGluZy5nZXREaXNjcmltaW5h\ndG9yKCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShkaXNjLmdldFN0cmF0ZWd5KCkg\naW5zdGFuY2VvZgogICAgICAgICAgICBDbGFzc05hbWVEaXNjcmltaW5hdG9y\nU3RyYXRlZ3kpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBkaXNjLmdldENv\nbHVtbnMoKS5sZW5ndGgpOwogICAgICAgIGFzc2VydEVxdWFscygiRElTQ1JJ\nTSIsIGRpc2MuZ2V0Q29sdW1ucygpWzBdLmdldE5hbWUoKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdFN1cGVyY2xhc3NPdmVycmlkZSgpIHsKICAg\nICAgICBGaWVsZE1hcHBpbmcgZm0gPSBfbWFwcGluZy5nZXRGaWVsZE1hcHBp\nbmcoInN1cGVyQ29sbGVjdGlvbiIpOwogICAgICAgIGFzc2VydEVxdWFscygi\nU1VQX0NPTEwiLCBmbS5nZXRUYWJsZSgpLmdldE5hbWUoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEpvaW5Gb3JlaWduS2V5KCkuZ2V0Q29s\ndW1ucygpLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJPV05FUiIs\nIGZtLmdldEpvaW5Gb3JlaWduS2V5KCkuZ2V0Q29sdW1ucygpWzBdLgogICAg\nICAgICAgICBnZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBm\nbS5nZXRFbGVtZW50TWFwcGluZygpLmdldENvbHVtbnMoKS5sZW5ndGgpOwog\nICAgICAgIGFzc2VydEVxdWFscygiU1VQX0VMRU0iLCBmbS5nZXRFbGVtZW50\nTWFwcGluZygpLmdldENvbHVtbnMoKVswXS4KICAgICAgICAgICAgZ2V0TmFt\nZSgpKTsKICAgICAgICBhc3NlcnROdWxsKGZtLmdldEVsZW1lbnRNYXBwaW5n\nKCkuZ2V0VmFsdWVJbmRleCgpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGZt\nLmdldEpvaW5JbmRleCgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nQ3VzdG9tRmllbGQoKSB7CiAgICAgICAgRmllbGRNYXBwaW5nIGZtID0gX21h\ncHBpbmcuZ2V0RmllbGRNYXBwaW5nKCJjdXN0b20iKTsKICAgICAgICBhc3Nl\ncnRUcnVlKGZtLmdldEhhbmRsZXIoKSBpbnN0YW5jZW9mIFBvaW50SGFuZGxl\ncik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIGZtLmdldENvbHVtbnMoKS5s\nZW5ndGgpOwogICAgICAgIGFzc2VydEVxdWFscygiWF9DT0wiLCBmbS5nZXRD\nb2x1bW5zKClbMF0uZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nIllfQ09MIiwgZm0uZ2V0Q29sdW1ucygpWzFdLmdldE5hbWUoKSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChmbS5nZXRWYWx1ZUluZGV4KCkpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RWYWx1ZUNvbGxlY3Rpb24oKSB7CiAgICAg\nICAgRmllbGRNYXBwaW5nIGZtID0gX21hcHBpbmcuZ2V0RmllbGRNYXBwaW5n\nKCJzdHJpbmdDb2xsZWN0aW9uIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJT\nVFJJTkdTX0NPTEwiLCBmbS5nZXRUYWJsZSgpLmdldE5hbWUoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEpvaW5Gb3JlaWduS2V5KCkuZ2V0\nQ29sdW1ucygpLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJPV05F\nUiIsIGZtLmdldEpvaW5Gb3JlaWduS2V5KCkuZ2V0Q29sdW1ucygpWzBdLgog\nICAgICAgICAgICBnZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygx\nLCBmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldENvbHVtbnMoKS5sZW5ndGgp\nOwogICAgICAgIGFzc2VydEVxdWFscygiU1RSX0VMRU0iLCBmbS5nZXRFbGVt\nZW50TWFwcGluZygpLmdldENvbHVtbnMoKVswXS4KICAgICAgICAgICAgZ2V0\nTmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMTI3LCBmbS5nZXRFbGVt\nZW50TWFwcGluZygpLmdldENvbHVtbnMoKVswXS5nZXRTaXplKCkpOwogICAg\nICAgIGFzc2VydE5vdE51bGwoZm0uZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRW\nYWx1ZUluZGV4KCkpOwogICAgICAgIGFzc2VydE51bGwoZm0uZ2V0Sm9pbklu\nZGV4KCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RKb2luQ29sbGVj\ndGlvbigpIHsKICAgICAgICBGaWVsZE1hcHBpbmcgZm0gPSBfbWFwcGluZy5n\nZXRGaWVsZE1hcHBpbmcoImpvaW5Db2xsZWN0aW9uIik7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJKT0lOX0NPTEwiLCBmbS5nZXRUYWJsZSgpLmdldE5hbWUo\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEpvaW5Gb3JlaWdu\nS2V5KCkuZ2V0Q29sdW1ucygpLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJPV05FUiIsIGZtLmdldEpvaW5Gb3JlaWduS2V5KCkuZ2V0Q29sdW1u\ncygpWzBdLgogICAgICAgICAgICBnZXROYW1lKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldENvbHVtbnMo\nKS5sZW5ndGgpOwogICAgICAgIGFzc2VydEVxdWFscygiSk9JTl9FTEVNIiwg\nZm0uZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRDb2x1bW5zKClbMF0uCiAgICAg\nICAgICAgIGdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0Rm9yZWlnbktleShm\nbS5nZXRKb2luRm9yZWlnbktleSgpKTsKICAgICAgICBhc3NlcnRGb3JlaWdu\nS2V5KGZtLmdldEVsZW1lbnRNYXBwaW5nKCkuZ2V0Rm9yZWlnbktleSgpKTsK\nICAgIH0KCiAgICBwcml2YXRlIHZvaWQgYXNzZXJ0Rm9yZWlnbktleShGb3Jl\naWduS2V5IGZrKSB7CiAgICAgICAgaWYgKF9kaWN0LnN1cHBvcnRzRm9yZWln\nbktleXMpCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhGb3JlaWduS2V5LkFD\nVElPTl9SRVNUUklDVCwgZmsuZ2V0RGVsZXRlQWN0aW9uKCkpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RWYWx1ZU1hcCgpIHsKICAgICAgICBGaWVs\nZE1hcHBpbmcgZm0gPSBfbWFwcGluZy5nZXRGaWVsZE1hcHBpbmcoInN0cmlu\nZ01hcCIpOwogICAgICAgIGFzc2VydEVxdWFscygiU1RSSU5HU19NQVAiLCBm\nbS5nZXRUYWJsZSgpLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEsIGZtLmdldEpvaW5Gb3JlaWduS2V5KCkuZ2V0Q29sdW1ucygpLmxlbmd0\naCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJPV05FUiIsIGZtLmdldEpvaW5G\nb3JlaWduS2V5KCkuZ2V0Q29sdW1ucygpWzBdLgogICAgICAgICAgICBnZXRO\nYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBmbS5nZXRLZXlNYXBw\naW5nKCkuZ2V0Q29sdW1ucygpLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJTVFJfS0VZIiwgZm0uZ2V0S2V5TWFwcGluZygpLmdldENvbHVtbnMo\nKVswXS4KICAgICAgICAgICAgZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMTI3LCBmbS5nZXRLZXlNYXBwaW5nKCkuZ2V0Q29sdW1ucygpWzBd\nLmdldFNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEVs\nZW1lbnRNYXBwaW5nKCkuZ2V0Q29sdW1ucygpLmxlbmd0aCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJTVFJfVkFMIiwgZm0uZ2V0RWxlbWVudE1hcHBpbmco\nKS5nZXRDb2x1bW5zKClbMF0uCiAgICAgICAgICAgIGdldE5hbWUoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEyNywgZm0uZ2V0RWxlbWVudE1hcHBpbmco\nKS5nZXRDb2x1bW5zKClbMF0uZ2V0U2l6ZSgpKTsKICAgICAgICBhc3NlcnRO\ndWxsKGZtLmdldEpvaW5JbmRleCgpKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKGZtLmdldEtleU1hcHBpbmcoKS5nZXRWYWx1ZUluZGV4KCkpOwogICAgICAg\nIGFzc2VydE5vdE51bGwoZm0uZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRWYWx1\nZUluZGV4KCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RKb2luTWFw\nKCkgewogICAgICAgIEZpZWxkTWFwcGluZyBmbSA9IF9tYXBwaW5nLmdldEZp\nZWxkTWFwcGluZygiam9pbk1hcCIpOwogICAgICAgIGFzc2VydEVxdWFscygi\nSk9JTl9NQVAiLCBmbS5nZXRUYWJsZSgpLmdldE5hbWUoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEpvaW5Gb3JlaWduS2V5KCkuZ2V0Q29s\ndW1ucygpLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJPV05FUiIs\nIGZtLmdldEpvaW5Gb3JlaWduS2V5KCkuZ2V0Q29sdW1ucygpWzBdLgogICAg\nICAgICAgICBnZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBm\nbS5nZXRLZXlNYXBwaW5nKCkuZ2V0Q29sdW1ucygpLmxlbmd0aCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJKT0lOX0tFWSIsIGZtLmdldEtleU1hcHBpbmco\nKS5nZXRDb2x1bW5zKClbMF0uCiAgICAgICAgICAgIGdldE5hbWUoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEVsZW1lbnRNYXBwaW5nKCku\nZ2V0Q29sdW1ucygpLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJK\nT0lOX1ZBTCIsIGZtLmdldEVsZW1lbnRNYXBwaW5nKCkuZ2V0Q29sdW1ucygp\nWzBdLgogICAgICAgICAgICBnZXROYW1lKCkpOwogICAgICAgIGFzc2VydEZv\ncmVpZ25LZXkoZm0uZ2V0Sm9pbkZvcmVpZ25LZXkoKSk7CiAgICAgICAgYXNz\nZXJ0Rm9yZWlnbktleShmbS5nZXRLZXlNYXBwaW5nKCkuZ2V0Rm9yZWlnbktl\neSgpKTsKICAgICAgICBhc3NlcnRGb3JlaWduS2V5KGZtLmdldEVsZW1lbnRN\nYXBwaW5nKCkuZ2V0Rm9yZWlnbktleSgpKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RW1iZWRkZWRPdmVycmlkZSgpIHsKICAgICAgICBGaWVsZE1h\ncHBpbmcgZm0gPSBfbWFwcGluZy5nZXRGaWVsZE1hcHBpbmcoImVtYmVkIik7\nCiAgICAgICAgYXNzZXJ0VHJ1ZShmbS5pc0VtYmVkZGVkKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscygxLCBmbS5nZXRDb2x1bW5zKCkubGVuZ3RoKTsKICAg\nICAgICBhc3NlcnRUcnVlKCJVVUlEX0hFWCIuZXF1YWxzSWdub3JlQ2FzZShm\nbS5nZXRDb2x1bW5zKClbMF0uCiAgICAgICAgICAgIGdldE5hbWUoKSkpOwoK\nICAgICAgICBDbGFzc01hcHBpbmcgZW1iZWQgPSBmbS5nZXRFbWJlZGRlZE1h\ncHBpbmcoKTsKICAgICAgICBmbSA9IGVtYmVkLmdldEZpZWxkTWFwcGluZygi\ncmVsIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGZtLmdldENvbHVtbnMo\nKS5sZW5ndGgpOwogICAgICAgIGFzc2VydEVxdWFscygiRU1fUkVMX0lEIiwg\nZm0uZ2V0Q29sdW1ucygpWzBdLmdldE5hbWUoKSk7CiAgICAgICAgZm0gPSBl\nbWJlZC5nZXRGaWVsZE1hcHBpbmcoImVhZ2VyIik7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJFTV9FQUdFUiIsIGZtLmdldFRhYmxlKCkuZ2V0TmFtZSgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgZm0uZ2V0RWxlbWVudE1hcHBpbmco\nKS5nZXRDb2x1bW5zKCkubGVuZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nIkVMRU1fRUFHRVJfSUQiLCBmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldENv\nbHVtbnMoKVswXS4KICAgICAgICAgICAgZ2V0TmFtZSgpKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RW1iZWRkZWRFbGVtZW50T3ZlcnJpZGUoKSB7\nCiAgICAgICAgRmllbGRNYXBwaW5nIGZtID0gX21hcHBpbmcuZ2V0RmllbGRN\nYXBwaW5nKCJlbWJlZENvbGxlY3Rpb24iKTsKICAgICAgICBhc3NlcnRUcnVl\nKGZtLmdldEVsZW1lbnQoKS5pc0VtYmVkZGVkKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiRU1CRURfQ09MTCIsIGZtLmdldFRhYmxlKCkuZ2V0TmFtZSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMCwgZm0uZ2V0RWxlbWVudE1hcHBp\nbmcoKS5nZXRDb2x1bW5zKCkubGVuZ3RoKTsKCiAgICAgICAgQ2xhc3NNYXBw\naW5nIGVtYmVkID0gZm0uZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRFbWJlZGRl\nZE1hcHBpbmcoKTsKICAgICAgICBmbSA9IGVtYmVkLmdldEZpZWxkTWFwcGlu\nZygiYmFzaWMiKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgZm0uZ2V0Q29s\ndW1ucygpLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJFTV9CQVNJ\nQyIsIGZtLmdldENvbHVtbnMoKVswXS5nZXROYW1lKCkpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RJbnNlcnRBbmRSZXRyaWV2ZSgpIHsKICAgICAg\nICBOb25zdGFuZGFyZE1hcHBpbmdFbnRpdHkgcGMgPSBuZXcgTm9uc3RhbmRh\ncmRNYXBwaW5nRW50aXR5KCk7CiAgICAgICAgcGMuZ2V0U3VwZXJDb2xsZWN0\naW9uKCkuYWRkKCJzdXBlciIpOwogICAgICAgIHBjLnNldEN1c3RvbShuZXcg\nUG9pbnQoMSwgMikpOwogICAgICAgIHBjLmdldFN0cmluZ0NvbGxlY3Rpb24o\nKS5hZGQoInN0cmluZyIpOwogICAgICAgIE5vbnN0YW5kYXJkTWFwcGluZ0Vu\ndGl0eSBwYzIgPSBuZXcgTm9uc3RhbmRhcmRNYXBwaW5nRW50aXR5KCk7CiAg\nICAgICAgcGMuZ2V0Sm9pbkNvbGxlY3Rpb24oKS5hZGQocGMyKTsKICAgICAg\nICBwYy5nZXRTdHJpbmdNYXAoKS5wdXQoInN0cmluZ0tleSIsICJzdHJpbmdW\nYWx1ZSIpOwogICAgICAgIE5vbnN0YW5kYXJkTWFwcGluZ0VudGl0eSBwYzMg\nPSBuZXcgTm9uc3RhbmRhcmRNYXBwaW5nRW50aXR5KCk7CiAgICAgICAgcGMu\nZ2V0Sm9pbk1hcCgpLnB1dChwYzIsIHBjMyk7CiAgICAgICAgRXh0ZW5zaW9u\nc0VudGl0eSBlbWJlZCA9IG5ldyBFeHRlbnNpb25zRW50aXR5KCk7CiAgICAg\nICAgZW1iZWQuc2V0RXh0ZXJuYWxWYWx1ZXMoJ00nKTsKICAgICAgICBlbWJl\nZC5zZXRFeHRlcm5hbGl6ZXIoU3RyaW5nLmNsYXNzKTsKICAgICAgICBwYy5z\nZXRFbWJlZChlbWJlZCk7CiAgICAgICAgRW1iZWRWYWx1ZTIgZW1iZWQyID0g\nbmV3IEVtYmVkVmFsdWUyKCk7CiAgICAgICAgZW1iZWQyLnNldEJhc2ljKCJi\nYXNpYyIpOwogICAgICAgIHBjLmdldEVtYmVkQ29sbGVjdGlvbigpLmFkZChl\nbWJlZDIpOwoKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3RBbGwobmV3IE9i\namVjdFtdeyBwYywgcGMyLCBwYzMgfSk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBPYmplY3QgcGNJZCA9IGVtLmdl\ndE9iamVjdElkKHBjKTsKICAgICAgICBPYmplY3QgcGMySWQgPSBlbS5nZXRP\nYmplY3RJZChwYzIpOwogICAgICAgIE9iamVjdCBwYzNJZCA9IGVtLmdldE9i\namVjdElkKHBjMyk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIHBjID0gZW0u\nZmluZChOb25zdGFuZGFyZE1hcHBpbmdFbnRpdHkuY2xhc3MsIHBjSWQpOwog\nICAgICAgIGFzc2VydEVxdWFscygxLCBwYy5nZXRTdXBlckNvbGxlY3Rpb24o\nKS5zaXplKCkpOwogICAgICAgIGFzc2VydEVxdWFscygic3VwZXIiLCBwYy5n\nZXRTdXBlckNvbGxlY3Rpb24oKS5nZXQoMCkpOwogICAgICAgIGFzc2VydEVx\ndWFscygxLCBwYy5nZXRDdXN0b20oKS54KTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMiwgcGMuZ2V0Q3VzdG9tKCkueSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEsIHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5zaXplKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscygic3RyaW5nIiwgcGMuZ2V0U3RyaW5nQ29sbGVjdGlv\nbigpLmdldCgwKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBjLmdldEpv\naW5Db2xsZWN0aW9uKCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\ncGMySWQsIGVtLmdldE9iamVjdElkKHBjLmdldEpvaW5Db2xsZWN0aW9uKCku\nZ2V0KDApKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBjLmdldFN0cmlu\nZ01hcCgpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzdHJpbmdW\nYWx1ZSIsIHBjLmdldFN0cmluZ01hcCgpLmdldCgic3RyaW5nS2V5IikpOwog\nICAgICAgIGFzc2VydEVxdWFscygxLCBwYy5nZXRKb2luTWFwKCkuc2l6ZSgp\nKTsKICAgICAgICBNYXAuRW50cnkgZW50cnkgPSBwYy5nZXRKb2luTWFwKCku\nZW50cnlTZXQoKS5pdGVyYXRvcigpLm5leHQoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMocGMySWQsIGVtLmdldE9iamVjdElkKGVudHJ5LmdldEtleSgpKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHBjM0lkLCBlbS5nZXRPYmplY3RJZChl\nbnRyeS5nZXRWYWx1ZSgpKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCdNJywg\ncGMuZ2V0RW1iZWQoKS5nZXRFeHRlcm5hbFZhbHVlcygpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoU3RyaW5nLmNsYXNzLCBwYy5nZXRFbWJlZCgpLmdldEV4\ndGVybmFsaXplcigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0\nRW1iZWRDb2xsZWN0aW9uKCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoImJhc2ljIiwgcGMuZ2V0RW1iZWRDb2xsZWN0aW9uKCkuZ2V0KDApLmdl\ndEJhc2ljKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEluc2VydEFuZFJldHJpZXZlRW1iZWRkZWRDb2xsZWN0\naW9uKCkgewogICAgICAgIE5vbnN0YW5kYXJkTWFwcGluZ0VudGl0eSBwYyA9\nIG5ldyBOb25zdGFuZGFyZE1hcHBpbmdFbnRpdHkoKTsKICAgICAgICBFbWJl\nZFZhbHVlMiBlbWJlZDIgPSBuZXcgRW1iZWRWYWx1ZTIoKTsKICAgICAgICBl\nbWJlZDIuc2V0QmFzaWMoImJhc2ljIik7CiAgICAgICAgcGMuZ2V0RW1iZWRD\nb2xsZWN0aW9uKCkuYWRkKGVtYmVkMik7CgogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0u\ncGVyc2lzdChwYyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBPYmplY3QgcGNJZCA9IGVtLmdldE9iamVjdElkKHBj\nKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSBlbS5maW5kKE5vbnN0\nYW5kYXJkTWFwcGluZ0VudGl0eS5jbGFzcywgcGNJZCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIHBjLmdldEVtYmVkQ29sbGVjdGlvbigpLnNpemUoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJiYXNpYyIsIHBjLmdldEVtYmVkQ29s\nbGVjdGlvbigpLmdldCgwKS5nZXRCYXNpYygpKTsKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

