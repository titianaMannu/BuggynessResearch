{"sha":"44b9c6cd448b265c952f8087e1973c8056fd8d08","node_id":"MDQ6QmxvYjIwNjM2NDo0NGI5YzZjZDQ0OGIyNjVjOTUyZjgwODdlMTk3M2M4MDU2ZmQ4ZDA4","size":3390,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/44b9c6cd448b265c952f8087e1973c8056fd8d08","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmFubm90\nYXRpb25zOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMg\nY2xhc3MgVGVzdFByb3BlcnR5QWNjZXNzCiAgICBleHRlbmRzIFNpbmdsZUVN\nRlRlc3RDYXNlIHsKCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAg\nICBzZXRVcChQcm9wZXJ0eUFjY2VzczEuY2xhc3MsIENMRUFSX1RBQkxFUyk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFByb3BlcnR5QWNjZXNzQmFz\naWNDcmVhdGlvbigpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIFByb3BlcnR5QWNjZXNz\nMSBwYTFfMSA9IG5ldyBQcm9wZXJ0eUFjY2VzczEoMTApOwogICAgICAgIHBh\nMV8xLnNldE5hbWUoImZvbyIpOwogICAgICAgIGVtLnBlcnNpc3QocGExXzEp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgogICAg\nICAgIC8vIGdldHRpbmcgYSBuZXcgRU0gc2hvdWxkIG5vdCBiZSBuZWNlc3Nh\ncnkgb25jZSB0aGUgZXh0ZW5kZWQgUEMgc3R1ZmYKICAgICAgICAvLyBpcyBj\nb21wbGV0ZS4KICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CgogICAgICAgIFByb3BlcnR5QWNjZXNzMSBwYTFfMiA9IGVtLmZpbmQo\nUHJvcGVydHlBY2Nlc3MxLmNsYXNzLCAxMCk7CiAgICAgICAgYXNzZXJ0Tm90\nU2FtZShwYTFfMSwgcGExXzIpOwogICAgICAgIGFzc2VydE5vdE51bGwocGEx\nXzIpOwogICAgICAgIGFzc2VydEVxdWFscygxMCwgcGExXzIuZ2V0SWQoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJmb28iLCBwYTFfMi5nZXROYW1lKCkp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcm9wZXJ0eUFjY2Vzc0Jh\nc2ljTXV0YXRpb24oKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBQcm9wZXJ0eUFjY2Vz\nczEgcGExXzEgPSBuZXcgUHJvcGVydHlBY2Nlc3MxKDEwKTsKICAgICAgICBw\nYTFfMS5zZXROYW1lKCJmb28iKTsKICAgICAgICBlbS5wZXJzaXN0KHBhMV8x\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwoKICAg\nICAgICAvLyBnZXR0aW5nIGEgbmV3IEVNIHNob3VsZCBub3QgYmUgbmVjZXNz\nYXJ5IG9uY2UgdGhlIGV4dGVuZGVkIFBDIHN0dWZmCiAgICAgICAgLy8gaXMg\nY29tcGxldGUuCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgUHJvcGVydHlBY2Nlc3MxIHBhMV8yID0gZW0uZmluZChQcm9wZXJ0\neUFjY2VzczEuY2xhc3MsIDEwKTsKICAgICAgICBwYTFfMi5zZXROYW1lKHBh\nMV8yLmdldE5hbWUoKSArICJiYXIiKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgUHJvcGVydHlBY2Nlc3MxIHBhMV8zID0g\nZW0uZmluZChQcm9wZXJ0eUFjY2VzczEuY2xhc3MsIDEwKTsKICAgICAgICBh\nc3NlcnROb3RTYW1lKHBhMV8yLCBwYTFfMyk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJmb29iYXIiLCBwYTFfMy5nZXROYW1lKCkpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RKUFFMKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmNy\nZWF0ZVF1ZXJ5KCJzZWxlY3QgbyBmcm9tIFByb3BlcnR5QWNjZXNzMSBvIHdo\nZXJlICIgKwogICAgICAgICAgICAiby5uYW1lID0gJ2ZvbyciKS5nZXRSZXN1\nbHRMaXN0KCk7CiAgICAgICAgZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBvIGZy\nb20gUHJvcGVydHlBY2Nlc3MxIG8gb3JkZXIgYnkgIiArCiAgICAgICAgICAg\nICJvLm5hbWUgYXNjIikuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEpQUUxXaXRoRmll\nbGROYW1lTWlzbWF0Y2goKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uY3JlYXRl\nUXVlcnkoInNlbGVjdCBvIGZyb20gUHJvcGVydHlBY2Nlc3MxIG8gd2hlcmUg\nIiArCiAgICAgICAgICAgICJvLmludFZhbHVlID0gMCIpLmdldFJlc3VsdExp\nc3QoKTsKICAgICAgICBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IG8gZnJvbSBQ\ncm9wZXJ0eUFjY2VzczEgbyBvcmRlciBieSAiICsKICAgICAgICAgICAgIm8u\naW50VmFsdWUgYXNjIikuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9Cn0K\n","encoding":"base64"}

