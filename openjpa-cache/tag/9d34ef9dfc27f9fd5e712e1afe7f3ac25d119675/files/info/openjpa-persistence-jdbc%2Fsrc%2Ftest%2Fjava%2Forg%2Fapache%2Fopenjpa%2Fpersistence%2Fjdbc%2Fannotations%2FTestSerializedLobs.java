{"sha":"b515d3dacf653772aa7f71a155d37ecf4e89ce4e","node_id":"MDQ6QmxvYjIwNjM2NDpiNTE1ZDNkYWNmNjUzNzcyYWE3ZjcxYTE1NWQzN2VjZjRlODljZTRl","size":4499,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b515d3dacf653772aa7f71a155d37ecf4e89ce4e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmFubm90\nYXRpb25zOwoKaW1wb3J0IGphdmEuc3FsLkJsb2I7CmltcG9ydCBqYXZhLnNx\nbC5Db25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0OwppbXBv\ncnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuU3Rh\ndGVtZW50OwppbXBvcnQgamF2YS51dGlsLkRhdGU7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRp\ndHlNYW5hZ2VyU1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgovKioKICogVGVzdCBm\nb3Igc2VyaWFsaXplZCwgY2xvYiwgYW5kIGxvYiB0eXBlcy4KICoKICogQGF1\ndGhvciBTdGV2ZSBLaW0KICovCnB1YmxpYyBjbGFzcyBUZXN0U2VyaWFsaXpl\nZExvYnMgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7CgogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgRGF0ZSBEQVRFID0gbmV3IERhdGUoKTsKCiAgICBw\ndWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChBbm5vVGVzdDEu\nY2xhc3MsIEFubm9UZXN0Mi5jbGFzcywgRmxhdDEuY2xhc3MsIENMRUFSX1RB\nQkxFUyk7CiAgICB9CgogICAgLy8gU2VyaWFsaXplZCBmaWVsZHMgbm90IGJl\naW5nIHJlYWQgcHJvcGVybHkKICAgIHB1YmxpYyB2b2lkIHRlc3RTZXJpYWxp\nemVkKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBBbm5vVGVzdDEgcGMxID0gbmV3IEFubm9UZXN0\nMSgxKTsKICAgICAgICBBbm5vVGVzdDEgcGMyID0gbmV3IEFubm9UZXN0MSgy\nKTsKICAgICAgICBwYzEuc2V0U2VyaWFsaXplZCgiQVNEQVNEIik7CiAgICAg\nICAgcGMyLnNldFNlcmlhbGl6ZWQoREFURSk7CiAgICAgICAgZW0ucGVyc2lz\ndChwYzEpOwogICAgICAgIGVtLnBlcnNpc3QocGMyKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7\nCgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBwYzEgPSBlbS5maW5kKEFubm9UZXN0MS5jbGFzcywgbmV3IExvbmco\nMSkpOwogICAgICAgIHBjMiA9IGVtLmZpbmQoQW5ub1Rlc3QxLmNsYXNzLCBu\nZXcgTG9uZygyKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJBU0RBU0QiLCBw\nYzEuZ2V0U2VyaWFsaXplZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoREFU\nRSwgcGMyLmdldFNlcmlhbGl6ZWQoKSk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0QmxvYigpCiAgICAgICAgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJT\nUEkgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgQW5ub1Rlc3Qx\nIHBjID0gbmV3IEFubm9UZXN0MSgxKTsKICAgICAgICBwYy5zZXRCbG9iKCJO\nb3QgTnVsbCIuZ2V0Qnl0ZXMoKSk7CiAgICAgICAgZW0ucGVyc2lzdChwYyk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICBlbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgcGMgPSBlbS5maW5kKEFubm9UZXN0MS5jbGFz\ncywgbmV3IExvbmcoMSkpOwogICAgICAgIGFzc2VydEVxdWFscygiTm90IE51\nbGwiLCBuZXcgU3RyaW5nKHBjLmdldEJsb2IoKSkpOwogICAgICAgIENvbm5l\nY3Rpb24gY29ubiA9IChDb25uZWN0aW9uKSBlbS5nZXRDb25uZWN0aW9uKCk7\nCiAgICAgICAgU3RhdGVtZW50IHN0bW50ID0gY29ubi5jcmVhdGVTdGF0ZW1l\nbnQoKTsKICAgICAgICBSZXN1bHRTZXQgcnMgPSBzdG1udC5leGVjdXRlUXVl\ncnkoIlNFTEVDVCBCTE9CVkFMIEZST00gQU5OT1RFU1QxICIKICAgICAgICAg\nICAgKyAiV0hFUkUgUEsgPSAxIik7CiAgICAgICAgYXNzZXJ0VHJ1ZShycy5u\nZXh0KCkpOwoKICAgICAgICBKREJDQ29uZmlndXJhdGlvbiBjb25mID0gKEpE\nQkNDb25maWd1cmF0aW9uKSBlbS5nZXRDb25maWd1cmF0aW9uKCk7CiAgICAg\nICAgREJEaWN0aW9uYXJ5IGRpY3QgPSBjb25mLmdldERCRGljdGlvbmFyeUlu\nc3RhbmNlKCk7CiAgICAgICAgaWYgKGRpY3QudXNlR2V0Qnl0ZXNGb3JCbG9i\ncykKICAgICAgICAgICAgcnMuZ2V0Qnl0ZXMoMSk7CiAgICAgICAgZWxzZSBp\nZiAoZGljdC51c2VHZXRPYmplY3RGb3JCbG9icykKICAgICAgICAgICAgcnMu\nZ2V0T2JqZWN0KDEpOwogICAgICAgIGVsc2UgewogICAgICAgICAgICBCbG9i\nIGJsb2IgPSBycy5nZXRCbG9iKDEpOwogICAgICAgICAgICBibG9iLmdldEJ5\ndGVzKDFMLCAoaW50KSBibG9iLmxlbmd0aCgpKTsKICAgICAgICB9CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJOb3QgTnVsbCIsIG5ldyBTdHJpbmcocGMuZ2V0\nQmxvYigpKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJzLmNsb3Nl\nKCk7CiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHsKICAgICAg\nICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc3RtbnQuY2xvc2UoKTsK\nICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkgewogICAgICAgIH0K\nICAgICAgICB0cnkgewogICAgICAgICAgICBjb25uLmNsb3NlKCk7CiAgICAg\nICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHsKICAgICAgICB9CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q2xv\nYigpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoKICAgICAgICBBbm5v\nVGVzdDEgcGMgPSBuZXcgQW5ub1Rlc3QxKDEpOwogICAgICAgIFN0cmluZ0J1\nZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCAxMDAwOyBpKyspCiAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoKGNoYXIpICgnYScgKyAoaSAlIDI0KSkpOwogICAgICAgIHBjLnNldENs\nb2IoYnVmLnRvU3RyaW5nKCkpOwogICAgICAgIGVtLnBlcnNpc3QocGMpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIHBjID0gZW0uZmluZChBbm5vVGVzdDEuY2xhc3Ms\nIG5ldyBMb25nKDEpKTsKICAgICAgICBTdHJpbmcgc3RyID0gcGMuZ2V0Q2xv\nYigpOwogICAgICAgIGFzc2VydEVxdWFscygxMDAwLCBzdHIubGVuZ3RoKCkp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyLmxlbmd0aCgpOyBp\nKyspCiAgICAgICAgICAgIGFzc2VydEVxdWFscygnYScgKyAoaSAlIDI0KSwg\nc3RyLmNoYXJBdChpKSk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KfQo=\n","encoding":"base64"}

