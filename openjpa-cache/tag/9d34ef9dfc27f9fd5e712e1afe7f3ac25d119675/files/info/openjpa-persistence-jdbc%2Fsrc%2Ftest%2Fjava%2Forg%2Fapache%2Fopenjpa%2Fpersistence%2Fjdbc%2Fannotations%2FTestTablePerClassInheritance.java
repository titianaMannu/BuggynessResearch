{"sha":"d2bf954afc45e0660d8ef24215ff59292108607b","node_id":"MDQ6QmxvYjIwNjM2NDpkMmJmOTU0YWZjNDVlMDY2MGQ4ZWYyNDIxNWZmNTkyOTIxMDg2MDdi","size":4190,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d2bf954afc45e0660d8ef24215ff59292108607b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmFubm90\nYXRpb25zOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYu\nSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLm1ldGEuc3RyYXRzLkZ1bGxDbGFzc1N0cmF0ZWd5OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHMuTm9uZURp\nc2NyaW1pbmF0b3JTdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRl\nc3RDYXNlOwoKLyoqCiAqIDxwPlRlc3QgdGhhdCBJbmhlcml0YW5jZVR5cGUu\nVEFCTEVfUEVSX0NMQVNTIEpQQSBtYXBwaW5nIGlzIHRyYW5zbGF0ZWQKICog\nY29ycmVjdGx5LiAgU2VlIHRoZSA8Y29kZT5rb2RvLmpkYmMubWV0YS50YWJs\nZXBlcmNsYXNzPC9jb2RlPiB0ZXN0IHBhY2thZ2UKICogZm9yIG1vcmUgZGV0\nYWlsZWQgdGVzdHMgb2YgZnVuY3Rpb25hbGl0eS48L3A+CiAqCiAqIEBhdXRo\nb3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgVGVzdFRhYmxlUGVyQ2xh\nc3NJbmhlcml0YW5jZQogICAgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7\nCgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgc2V0VXAoVGFi\nbGVQZXJDbGFzczEuY2xhc3MsIFRhYmxlUGVyQ2xhc3MyLmNsYXNzLCBFbWJl\nZE93bmVyLmNsYXNzLAogICAgICAgICAgICBFbWJlZFZhbHVlLmNsYXNzLCBD\nTEVBUl9UQUJMRVMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNYXBw\naW5nKCkgewogICAgICAgIENsYXNzTWFwcGluZyBtYXBwaW5nID0gKChKREJD\nQ29uZmlndXJhdGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKSkuCiAgICAg\nICAgICAgIGdldE1hcHBpbmdSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNYXBw\naW5nKFRhYmxlUGVyQ2xhc3MyLmNsYXNzLAogICAgICAgICAgICBudWxsLCB0\ncnVlKTsKICAgICAgICBhc3NlcnRUcnVlKG1hcHBpbmcuZ2V0U3RyYXRlZ3ko\nKSBpbnN0YW5jZW9mIEZ1bGxDbGFzc1N0cmF0ZWd5KTsKICAgICAgICBhc3Nl\ncnRUcnVlKG1hcHBpbmcuZ2V0RGlzY3JpbWluYXRvcigpLmdldFN0cmF0ZWd5\nKCkKICAgICAgICAgICAgaW5zdGFuY2VvZiBOb25lRGlzY3JpbWluYXRvclN0\ncmF0ZWd5KTsKICAgICAgICBhc3NlcnROdWxsKG1hcHBpbmcuZ2V0Sm9pbkZv\ncmVpZ25LZXkoKSk7CiAgICAgICAgYXNzZXJ0TnVsbChtYXBwaW5nLmdldEpv\naW5hYmxlUENTdXBlcmNsYXNzTWFwcGluZygpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoIlRQQ19CQVNJQyIsIG1hcHBpbmcuZ2V0RmllbGRNYXBwaW5nKCJi\nYXNpYyIpLgogICAgICAgICAgICBnZXRDb2x1bW5zKClbMF0uZ2V0TmFtZSgp\nKTsKICAgICAgICBDbGFzc01hcHBpbmcgZW1iZWQgPSBtYXBwaW5nLmdldEZp\nZWxkTWFwcGluZygiZW1iZWQiKS4KICAgICAgICAgICAgZ2V0RW1iZWRkZWRN\nYXBwaW5nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJUUENfRU1CX0JBU0lD\nIiwgZW1iZWQuZ2V0RmllbGRNYXBwaW5nKCJiYXNpYyIpLgogICAgICAgICAg\nICBnZXRDb2x1bW5zKClbMF0uZ2V0TmFtZSgpKTsKCiAgICAgICAgQ2xhc3NN\nYXBwaW5nIHN1cCA9IG1hcHBpbmcuZ2V0UENTdXBlcmNsYXNzTWFwcGluZygp\nOwogICAgICAgIGFzc2VydEVxdWFscyhUYWJsZVBlckNsYXNzMS5jbGFzcywg\nc3VwLmdldERlc2NyaWJlZFR5cGUoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShz\ndXAuZ2V0U3RyYXRlZ3koKSBpbnN0YW5jZW9mIEZ1bGxDbGFzc1N0cmF0ZWd5\nKTsKICAgICAgICBhc3NlcnRUcnVlKHN1cC5nZXREaXNjcmltaW5hdG9yKCku\nZ2V0U3RyYXRlZ3koKQogICAgICAgICAgICBpbnN0YW5jZW9mIE5vbmVEaXNj\ncmltaW5hdG9yU3RyYXRlZ3kpOwogICAgICAgIGFzc2VydEVxdWFscygiVFBD\nX0JBU0lDIiwgc3VwLmdldEZpZWxkTWFwcGluZygiYmFzaWMiKS4KICAgICAg\nICAgICAgZ2V0Q29sdW1ucygpWzBdLmdldE5hbWUoKSk7CiAgICAgICAgZW1i\nZWQgPSBzdXAuZ2V0RmllbGRNYXBwaW5nKCJlbWJlZCIpLmdldEVtYmVkZGVk\nTWFwcGluZygpOwogICAgICAgIGFzc2VydEVxdWFscygiVFBDX0VNQl9CQVNJ\nQyIsIGVtYmVkLmdldEZpZWxkTWFwcGluZygiYmFzaWMiKS4KICAgICAgICAg\nICAgZ2V0Q29sdW1ucygpWzBdLmdldE5hbWUoKSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEluc2VydEFuZFJldHJpZXZlKCkgewogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgVGFibGVQZXJDbGFzczEgdHBjMSA9IG5ldyBUYWJsZVBlckNsYXNz\nMSgpOwogICAgICAgIHRwYzEuc2V0QmFzaWMoMSk7CiAgICAgICAgRW1iZWRW\nYWx1ZSBldiA9IG5ldyBFbWJlZFZhbHVlKCk7CiAgICAgICAgZXYuc2V0QmFz\naWMoIjExIik7CiAgICAgICAgdHBjMS5zZXRFbWJlZChldik7CiAgICAgICAg\nVGFibGVQZXJDbGFzczIgdHBjMiA9IG5ldyBUYWJsZVBlckNsYXNzMigpOwog\nICAgICAgIHRwYzIuc2V0QmFzaWMoMik7CiAgICAgICAgdHBjMi5zZXRCYXNp\nYzIoIjIiKTsKICAgICAgICBldiA9IG5ldyBFbWJlZFZhbHVlKCk7CiAgICAg\nICAgZXYuc2V0QmFzaWMoIjIyIik7CiAgICAgICAgdHBjMi5zZXRFbWJlZChl\ndik7CiAgICAgICAgZW0ucGVyc2lzdEFsbCh0cGMxLCB0cGMyKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGludCBp\nZDEgPSB0cGMxLmdldFBrKCk7CiAgICAgICAgaW50IGlkMiA9IHRwYzIuZ2V0\nUGsoKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgdHBjMSA9IGVtLmZpbmQo\nVGFibGVQZXJDbGFzczEuY2xhc3MsIGlkMSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIHRwYzEuZ2V0QmFzaWMoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCIxMSIsIHRwYzEuZ2V0RW1iZWQoKS5nZXRCYXNpYygpKTsKICAgICAgICB0\ncGMyID0gKFRhYmxlUGVyQ2xhc3MyKSBlbS5maW5kKFRhYmxlUGVyQ2xhc3Mx\nLmNsYXNzLCBpZDIpOwogICAgICAgIGFzc2VydEVxdWFscygyLCB0cGMyLmdl\ndEJhc2ljKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiMiIsIHRwYzIuZ2V0\nQmFzaWMyKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiMjIiLCB0cGMyLmdl\ndEVtYmVkKCkuZ2V0QmFzaWMoKSk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

