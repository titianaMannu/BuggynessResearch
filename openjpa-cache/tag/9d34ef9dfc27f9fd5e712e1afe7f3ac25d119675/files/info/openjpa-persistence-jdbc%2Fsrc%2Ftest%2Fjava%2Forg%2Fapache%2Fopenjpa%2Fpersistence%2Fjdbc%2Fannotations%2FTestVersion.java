{"sha":"3106e02fa02cf35317b0427160cd14ede59e7ccf","node_id":"MDQ6QmxvYjIwNjM2NDozMTA2ZTAyZmEwMmNmMzUzMTdiMDQyNzE2MGNkMTRlZGU1OWU3Y2Nm","size":6582,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3106e02fa02cf35317b0427160cd14ede59e7ccf","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmFubm90\nYXRpb25zOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJD\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5zdHJhdHMuTm9uZVZlcnNpb25TdHJhdGVneTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVN\nRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3QgZm9yIG9wdC1sb2NrCiAqCiAqIEBh\ndXRob3IgU3RldmUgS2ltCiAqLwpwdWJsaWMgY2xhc3MgVGVzdFZlcnNpb24g\nZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7CgogICAgcHVibGljIHZvaWQg\nc2V0VXAoKSB7CiAgICAgICAgc2V0VXAoQW5ub1Rlc3QxLmNsYXNzLCBBbm5v\nVGVzdDIuY2xhc3MsIEFubm9UZXN0My5jbGFzcywgRmxhdDEuY2xhc3MsCiAg\nICAgICAgICAgIEVtYmVkT3duZXIuY2xhc3MsIEVtYmVkVmFsdWUuY2xhc3Ms\nIENMRUFSX1RBQkxFUyk7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBBbm5vVGVzdDEgdGVzdDEgPSBu\nZXcgQW5ub1Rlc3QxKCk7CiAgICAgICAgdGVzdDEuc2V0UGsobmV3IExvbmco\nNSkpOwogICAgICAgIHRlc3QxLnNldEJhc2ljKDUwKTsKICAgICAgICB0ZXN0\nMS5zZXRUcmFuc2llbnQoNTAwKTsKICAgICAgICBlbS5wZXJzaXN0KHRlc3Qx\nKTsKCiAgICAgICAgQW5ub1Rlc3QyIHRlc3QyID0gbmV3IEFubm9UZXN0Migp\nOwogICAgICAgIHRlc3QyLnNldFBrMSg1KTsKICAgICAgICB0ZXN0Mi5zZXRQ\nazIoImJhciIpOwogICAgICAgIHRlc3QyLnNldEJhc2ljKCI1MCIpOwogICAg\nICAgIGVtLnBlcnNpc3QodGVzdDIpOwoKICAgICAgICBBbm5vVGVzdDMgdGVz\ndDMgPSBuZXcgQW5ub1Rlc3QzKCk7CiAgICAgICAgdGVzdDMuc2V0UGsobmV3\nIExvbmcoMykpOwogICAgICAgIHRlc3QzLnNldEJhc2ljMig1MCk7CiAgICAg\nICAgZW0ucGVyc2lzdCh0ZXN0Myk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RWZXJzaW9uTnVtZXJpYygpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtMSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgZW0xLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtMiA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAg\nICAgICAgQW5ub1Rlc3QxIHBjMSA9IGVtMS5maW5kKEFubm9UZXN0MS5jbGFz\ncywgbmV3IExvbmcoNSkpOwogICAgICAgIEFubm9UZXN0MSBwYzIgPSBlbTIu\nZmluZChBbm5vVGVzdDEuY2xhc3MsIG5ldyBMb25nKDUpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgcGMxLmdldFZlcnNpb24oKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIHBjMi5nZXRWZXJzaW9uKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygwLCBwYzEuZ2V0VHJhbnNpZW50KCkpOwogICAgICAgIHBjMS5z\nZXRCYXNpYyg3NSk7CiAgICAgICAgcGMyLnNldEJhc2ljKDc1KTsKICAgICAg\nICBlbTEuZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbTEu\nY2xvc2UoKTsKCiAgICAgICAgZW0xID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBwYzEgPSBlbTEuZmluZChBbm5vVGVzdDEuY2xhc3Ms\nIG5ldyBMb25nKDUpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMxLmdl\ndFZlcnNpb24oKSk7CiAgICAgICAgZW0xLmNsb3NlKCk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgICAgIGZhaWwoIk9wdGltaXN0aWMgZmFpbCIpOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICAgICAgZW0yLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RWZXJzaW9uVGltZXN0YW1wKCkgewogICAgICAg\nIC8vIGVuc3VyZSB0aGF0IHNvbWUgdGltZSBoYXMgcGFzc2VkCiAgICAgICAg\nLy8gc2luY2UgdGhlIHJlY29yZHMgd2VyZSBjcmVhdGVkCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgVGhyZWFkLnNsZWVwKDUwKTsKICAgICAgICB9CiAg\nICAgICAgY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgLy8gZG8gbm90aGluZwogICAgICAgIH0KICAgICAgICAKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtMSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgZW0xLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtMiA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nCiAgICAgICAgQW5ub1Rlc3QyIHBjMSA9IGVtMS5maW5kKEFubm9UZXN0Mi5j\nbGFzcywKICAgICAgICAgICAgbmV3IEFubm9UZXN0Mi5PaWQoNSwgImJhciIp\nKTsKICAgICAgICBBbm5vVGVzdDIgcGMyID0gZW0yLmZpbmQoQW5ub1Rlc3Qy\nLmNsYXNzLAogICAgICAgICAgICBuZXcgQW5ub1Rlc3QyLk9pZCg1LCAiYmFy\nIikpOwogICAgICAgIGFzc2VydE5vdE51bGwocGMxLmdldFZlcnNpb24oKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHBjMS5nZXRWZXJzaW9uKCksIHBjMi5n\nZXRWZXJzaW9uKCkpOwogICAgICAgIHBjMS5zZXRCYXNpYygiNzUiKTsKICAg\nICAgICBwYzIuc2V0QmFzaWMoIjc1Iik7CiAgICAgICAgZW0xLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0xLmNsb3NlKCk7CgogICAg\nICAgIGVtMSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\ncGMxID0gZW0xLmZpbmQoQW5ub1Rlc3QyLmNsYXNzLAogICAgICAgICAgICBu\nZXcgQW5ub1Rlc3QyLk9pZCg1LCAiYmFyIikpOwogICAgICAgIGphdmEudXRp\nbC5EYXRlIHBjMVZlcnNpb24gPSBwYzEuZ2V0VmVyc2lvbigpOwogICAgICAg\nIGphdmEudXRpbC5EYXRlIHBjMlZlcnNpb24gPSBwYzIuZ2V0VmVyc2lvbigp\nOwogICAgICAgIGFzc2VydFRydWUocGMxVmVyc2lvbi5jb21wYXJlVG8ocGMy\nVmVyc2lvbikgPiAwKTsKICAgICAgICBlbTEuY2xvc2UoKTsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICAgICAgZmFpbCgiT3B0aW1pc3RpYyBmYWlsIik7CiAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICBlbTIuY2xvc2UoKTsKICAgICAgICB9CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdFZlcnNpb25TdWJjbGFzcygpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtMSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgZW0xLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtMiA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nCiAgICAgICAgQW5ub1Rlc3QzIHBjMSA9IGVtMS5maW5kKEFubm9UZXN0My5j\nbGFzcywgbmV3IExvbmcoMykpOwogICAgICAgIEFubm9UZXN0MyBwYzIgPSBl\nbTIuZmluZChBbm5vVGVzdDMuY2xhc3MsIG5ldyBMb25nKDMpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgcGMxLmdldFZlcnNpb24oKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIHBjMi5nZXRWZXJzaW9uKCkpOwogICAgICAgIHBj\nMS5zZXRCYXNpYzIoNzUpOwogICAgICAgIHBjMi5zZXRCYXNpYzIoNzUpOwog\nICAgICAgIGVtMS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIGVtMS5jbG9zZSgpOwoKICAgICAgICBlbTEgPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIHBjMSA9IGVtMS5maW5kKEFubm9UZXN0My5j\nbGFzcywgbmV3IExvbmcoMykpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBw\nYzEuZ2V0VmVyc2lvbigpKTsKICAgICAgICBlbTEuY2xvc2UoKTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICAgICAgZmFpbCgiT3B0aW1pc3RpYyBmYWlsIik7CiAg\nICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9IGZpbmFs\nbHkgewogICAgICAgICAgICBlbTIuY2xvc2UoKTsKICAgICAgICB9CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdFZlcnNpb25Ob0NoYW5nZSgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7Cgog\nICAgICAgIEFubm9UZXN0MSBwYyA9IGVtLmZpbmQoQW5ub1Rlc3QxLmNsYXNz\nLCBuZXcgTG9uZyg1KSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBjLmdl\ndFZlcnNpb24oKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHBjLmdldFRy\nYW5zaWVudCgpKTsKICAgICAgICBwYy5zZXRUcmFuc2llbnQoNzUwKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVt\nLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBwYyA9IGVtLmZpbmQoQW5ub1Rlc3QxLmNsYXNzLCBu\nZXcgTG9uZyg1KSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBjLmdldFZl\ncnNpb24oKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHBjLmdldFRyYW5z\naWVudCgpKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3ROb0RlZmF1bHRWZXJzaW9uV2l0aG91dEZpZWxkT3JDb2x1\nbW4oKSB7CiAgICAgICAgQ2xhc3NNYXBwaW5nIGNscyA9ICgoSkRCQ0NvbmZp\nZ3VyYXRpb24pIGVtZi5nZXRDb25maWd1cmF0aW9uKCkpLgogICAgICAgICAg\nICBnZXRNYXBwaW5nUmVwb3NpdG9yeUluc3RhbmNlKCkuZ2V0TWFwcGluZyhF\nbWJlZE93bmVyLmNsYXNzLCAKICAgICAgICAgICAgbnVsbCwgdHJ1ZSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKE5vbmVWZXJzaW9uU3RyYXRlZ3kuZ2V0SW5z\ndGFuY2UoKSwKICAgICAgICAgICAgY2xzLmdldFZlcnNpb24oKS5nZXRTdHJh\ndGVneSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMCwgY2xzLmdldFZlcnNp\nb24oKS5nZXRDb2x1bW5zKCkubGVuZ3RoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0VmVyc2lvbldpdGhGaWVsZCgpIHsKICAgICAgICBDbGFzc01h\ncHBpbmcgY2xzID0gKChKREJDQ29uZmlndXJhdGlvbikgZW1mLmdldENvbmZp\nZ3VyYXRpb24oKSkuCiAgICAgICAgICAgIGdldE1hcHBpbmdSZXBvc2l0b3J5\nSW5zdGFuY2UoKS5nZXRNYXBwaW5nKEFubm9UZXN0MS5jbGFzcywgCiAgICAg\nICAgICAgIG51bGwsIHRydWUpOwogICAgICAgIGFzc2VydFRydWUoTm9uZVZl\ncnNpb25TdHJhdGVneS5nZXRJbnN0YW5jZSgpICE9CiAgICAgICAgICAgIGNs\ncy5nZXRWZXJzaW9uKCkuZ2V0U3RyYXRlZ3koKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIGNscy5nZXRWZXJzaW9uKCkuZ2V0Q29sdW1ucygpLmxlbmd0\naCk7CiAgICB9Cn0K\n","encoding":"base64"}

