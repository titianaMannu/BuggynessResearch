{"sha":"f87f5d32727a60b5f26ce753b8fa4c90d3cd7377","node_id":"MDQ6QmxvYjIwNjM2NDpmODdmNWQzMjcyN2E2MGI1ZjI2Y2U3NTNiOGZhNGM5MGQzY2Q3Mzc3","size":6335,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f87f5d32727a60b5f26ce753b8fa4c90d3cd7377","content":"LyoKICogQmFzZUpEQkNUZXN0LmphdmEKICoKICogQ3JlYXRlZCBvbiBPY3Rv\nYmVyIDksIDIwMDYsIDEyOjU2IFBNCiAqCiAqIFRvIGNoYW5nZSB0aGlzIHRl\nbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2VyCiAqIGFu\nZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgogKi8KCi8qCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xp\nY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBh\ncHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29m\ndHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJp\nYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5U\nSUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHBy\nZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBz\ncGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxp\nbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAKICovCnBhY2th\nZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMua2VybmVs\nOwoKaW1wb3J0IGphdmEuYmVhbnMuQmVhbkluZm87CmltcG9ydCBqYXZhLmJl\nYW5zLkludHJvc3BlY3RvcjsKaW1wb3J0IGphdmEuYmVhbnMuUHJvcGVydHlE\nZXNjcmlwdG9yOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuSW52b2NhdGlv\nblRhcmdldEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0Lk1l\ndGhvZDsKaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsOwppbXBvcnQgamF2\nYS5tYXRoLkJpZ0ludGVnZXI7CmltcG9ydCBqYXZhLnV0aWwuKjsKaW1wb3J0\nIGphdmF4Lm1hbmFnZW1lbnQuSW50cm9zcGVjdGlvbkV4Y2VwdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQnJva2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2Vy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5qcHFsLkpQUUxQ\nYXJzZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29u\nZmlndXJhdGlvblByb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsKCgoKaW1w\nb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkFubm90YXRpb247CmltcG9ydCBq\ndW5pdC5mcmFtZXdvcmsuKjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlN\nYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1h\nbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nSlBBRmFjYWRlSGVscGVyOwoKCnB1YmxpYyBjbGFzcyBCYXNlSkRCQ1Rlc3Qg\nZXh0ZW5kcyBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9u\nLnV0aWxzLkFic3RyYWN0VGVzdENhc2V7CiAgICAKICAgIAogICAgcHJpdmF0\nZSBzdGF0aWMgTWFwIF9zeXNwcm9wcyA9IG5ldyBIYXNoTWFwKCk7CiAgICAK\nICAgIAogICAgLyoqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgQmFzZUpE\nQkNUZXN0ICovCiAgICBwdWJsaWMgQmFzZUpEQkNUZXN0KCkgewogICAgfQog\nICAgCiAgICBwdWJsaWMgQmFzZUpEQkNUZXN0KFN0cmluZyBuYW1lKSAKICAg\nIHsKICAgICAgICBzdXBlcihuYW1lLCAiamRiY2NhY3R1c2FwcCIpOwogICAg\nfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIFN0cmluZyBkZWZhdWx0\nUGVyc2lzdGVuY2VYbWxSZXNvdXJjZSgpIHsKICAgICAgICByZXR1cm4gIm9y\nZy9hcGFjaGUvb3BlbmpwYS9wZXJzaXN0ZW5jZS9qZGJjL2NvbW1vbiIgKwog\nICAgICAgICAgICAiL2FwcHMvTUVUQS1JTkYvcGVyc2lzdGVuY2UueG1sIjsK\nICAgIH0KICAgIAogICAgcHJvdGVjdGVkIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nIGdldFBNKCkgewogICAgICAgIHJldHVybiAoT3BlbkpQQUVudGl0eU1hbmFn\nZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgIH0KICAgIAogICAgcHJv\ndGVjdGVkIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGdldFBNKGJvb2xlYW4gb3B0\naW1pc3RpYyxib29sZWFuIHJldGFpblZhbHVlcykgewogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uc2V0Tm9udHJhbnNh\nY3Rpb25hbFJlYWQodHJ1ZSk7CiAgICAgICAgZW0uc2V0UmV0YWluU3RhdGUo\ncmV0YWluVmFsdWVzKTsKICAgICAgICBlbS5zZXRPcHRpbWlzdGljKG9wdGlt\naXN0aWMpOwogICAgICAgIHJldHVybiBlbTsKICAgIH0KICAgIAogICAgLyoq\nCiAgICAgKiBEZWxldGUgYWxsIGluc3RhbmNlcyBvZiB0aGUgZ2l2ZW4gY2xh\nc3MuCiAgICAgKi8KICAgIHByb3RlY3RlZCAgaW50IGRlbGV0ZUFsbChCcm9r\nZXIgYnJva2VyLCBDbGFzcyBjbGF6eikgewogICAgICAgIHJldHVybiBkZWxl\ndGVBbGwoYnJva2VyLCBjbGF6eiwgdHJ1ZSk7CiAgICB9CiAgICAKICAgIC8q\nKgogICAgICogRGVsZXRlIGFsbCBpbnN0YW5jZXMgb2YgdGhlIGdpdmVuIGNs\nYXNzLgogICAgICovCiAgICBwcm90ZWN0ZWQgaW50IGRlbGV0ZUFsbChCcm9r\nZXIgYnJva2VyLCBDbGFzcyBjbGF6eiwKICAgICAgICAgICAgYm9vbGVhbiBz\ndWJjbGFzc2VzKSB7CiAgICAgICAgZmluYWwgYm9vbGVhbiB1c2VEZWxldGVC\neVF1ZXJ5ID0gZmFsc2U7CiAgICAgICAgCiAgICAgICAgaWYgKHVzZURlbGV0\nZUJ5UXVlcnkpIHsKICAgICAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5RdWVyeSBxdWVyeSA9IGJyb2tlci5uZXdRdWVyeSgKICAgICAgICAg\nICAgICAgICAgICBKUFFMUGFyc2VyLkxBTkdfSlBRTCwgY2xhenosICIiKTsK\nICAgICAgICAgICAgcXVlcnkuc2V0Q2FuZGlkYXRlVHlwZShjbGF6eiwgc3Vi\nY2xhc3Nlcyk7CiAgICAgICAgICAgIHJldHVybiAoaW50KSBxdWVyeS5kZWxl\ndGVBbGwoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkV4dGVudCBleHRlbnQgPQogICAgICAgICAg\nICAgICAgICAgIGJyb2tlci5uZXdFeHRlbnQoY2xhenosIHN1YmNsYXNzZXMp\nOwogICAgICAgICAgICBMaXN0IGxpc3QgPSBleHRlbnQubGlzdCgpOwogICAg\nICAgICAgICBpbnQgc2l6ZSA9IGxpc3Quc2l6ZSgpOwogICAgICAgICAgICBi\ncm9rZXIuZGVsZXRlQWxsKGxpc3QsIG51bGwpOwogICAgICAgICAgICByZXR1\ncm4gc2l6ZTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICog\nRGVsZXRlIGFsbCBpbnN0YW5jZXMgb2YgdGhlIGdpdmVuIGNsYXNzLgogICAg\nICovCiAgICBwcm90ZWN0ZWQgaW50IGRlbGV0ZUFsbChPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSwgQ2xhc3MgY2xhenopIHsKICAgICAgICByZXR1cm4gZGVs\nZXRlQWxsKEpQQUZhY2FkZUhlbHBlci50b0Jyb2tlcihwbSksIGNsYXp6KTsK\nICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBEZWxldGUgYWxsIGluc3RhbmNl\ncyBvZiB0aGUgZ2l2ZW4gY2xhc3MuCiAgICAgKi8KICAgIHByb3RlY3RlZCBp\nbnQgZGVsZXRlQWxsKE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtLCBDbGFzcyBj\nbGF6eiwKICAgICAgICAgICAgYm9vbGVhbiBzdWJjbGFzc2VzKSB7CiAgICAg\nICAgcmV0dXJuIGRlbGV0ZUFsbChKUEFGYWNhZGVIZWxwZXIudG9Ccm9rZXIo\ncG0pLCBjbGF6eiwgc3ViY2xhc3Nlcyk7CiAgICB9CiAgICAKICAgIAogICAg\ncHJvdGVjdGVkIE9iamVjdCBwZXJzaXN0KE9iamVjdCBvYikgewogICAgICAg\nIEJyb2tlciBicm9rZXIgPSBnZXRCcm9rZXJGYWN0b3J5KCkubmV3QnJva2Vy\nKCk7CiAgICAgICAgYnJva2VyLmJlZ2luKCk7CiAgICAgICAgYnJva2VyLnBl\ncnNpc3Qob2IsIG51bGwpOwogICAgICAgIE9iamVjdCBpZCA9IGJyb2tlci5n\nZXRPYmplY3RJZChvYik7CiAgICAgICAgYnJva2VyLmNvbW1pdCgpOwogICAg\nICAgIGJyb2tlci5jbG9zZSgpOwogICAgICAgIHJldHVybiBpZDsKICAgIH0K\nICAgIAogICAgcHJvdGVjdGVkIFByb3BlcnRpZXMgZ2V0UHJvcGVydGllcygp\nIHsKICAgICAgICByZXR1cm4gZ2V0UHJvcGVydGllcyhudWxsKTsKICAgIH0K\nICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHJ1bnRpbWUgcHJvcGVy\ndGllcywgb3B0aW9uYWxseSBvdmVycmlkaW5nIG9yIHNldHRpbmcKICAgICAq\nIHNvbWUgdmlhIHRoZSBnaXZlbiBhcnJheSwgd2hpY2ggc2hvdWxkIGJlIGlu\nIHRoZSBmb3JtCiAgICAgKiB7IGtleSwgdmFsLCBrZXksIHZhbCwgLi4uIH0u\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBzeW5jaHJvbml6ZWQgUHJvcGVydGll\ncyBnZXRQcm9wZXJ0aWVzKFN0cmluZ1tdIHByb3BzKSB7CiAgICAgICAgUHJv\ncGVydGllcyBwID0gbmV3IFByb3BlcnRpZXMoU3lzdGVtLmdldFByb3BlcnRp\nZXMoKSk7CiAgICAgICAgU3RyaW5nIHN0ciA9IHAuZ2V0UHJvcGVydHkoIm9w\nZW5qcGEucHJvcGVydGllcyIsICJrb2RvLnByb3BlcnRpZXMiKTsKICAgICAg\nICBpZiAoc3RyICE9IG51bGwgJiYgc3RyLmxlbmd0aCgpID4gMCkgewogICAg\nICAgICAgICAvLyBjYWNoZSBzeXN0ZW0gcHJvcGVydGllcyB0byByZWR1Y2Ug\nbG9hZCBvbiBmaWxlIHN5c3RlbQogICAgICAgICAgICBQcm9wZXJ0aWVzIGxv\nYWRlZCA9IChQcm9wZXJ0aWVzKSBfc3lzcHJvcHMuZ2V0KHN0cik7CiAgICAg\nICAgICAgIGlmIChsb2FkZWQgPT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nbG9hZGVkID0gbmV3IFByb3BlcnRpZXMoKTsKICAgICAgICAgICAgICAgIENv\nbmZpZ3VyYXRpb25Qcm92aWRlciBjcCA9IChDb25maWd1cmF0aW9uUHJvdmlk\nZXIpIENvbmZpZ3VyYXRpb25zLmdldFByb3BlcnR5KHN0ciwgbnVsbCk7CiAg\nICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChjcCAhPSBudWxs\nKQogICAgICAgICAgICAgICAgICAgIGxvYWRlZC5wdXRBbGwoY3AuZ2V0UHJv\ncGVydGllcygpKTsKICAgICAgICAgICAgICAgIF9zeXNwcm9wcy5wdXQoc3Ry\nLCBsb2FkZWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHAucHV0QWxs\nKGxvYWRlZCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBwcm9wcyAhPSBudWxsICYmIGkgPCBwcm9wcy5sZW5ndGg7IGkg\nKz0gMikgewogICAgICAgICAgICBpZiAocHJvcHNbaSArIDFdICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgZHVwbGljYXRlIGtv\nZG8vb3BlbmpwYSBwcm9wZXJ0eSBzbyB3ZSBkb24ndCBjbGFzaAogICAgICAg\nICAgICAgICAgaWYgKHByb3BzW2ldLnN0YXJ0c1dpdGgoIm9wZW5qcGEuIikp\nCiAgICAgICAgICAgICAgICAgICAgcC5yZW1vdmUoIm9wZW5qcGEuIiArIHBy\nb3BzW2ldLnN1YnN0cmluZyg1KSk7CiAgICAgICAgICAgICAgICBlbHNlIGlm\nIChwcm9wc1tpXS5zdGFydHNXaXRoKCJvcGVuanBhLiIpKQogICAgICAgICAg\nICAgICAgICAgIHAucmVtb3ZlKCJvcGVuanBhLiIgKyBwcm9wc1tpXS5zdWJz\ndHJpbmcoOCkpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBw\nLnNldFByb3BlcnR5KHByb3BzW2ldLCBwcm9wc1tpICsgMV0pOwogICAgICAg\nICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcC5yZW1vdmUocHJvcHNb\naV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBw\nOwogICAgfQogICAgCiAgICAKICAgIAogICAgCiAgICAKfQo=\n","encoding":"base64"}

