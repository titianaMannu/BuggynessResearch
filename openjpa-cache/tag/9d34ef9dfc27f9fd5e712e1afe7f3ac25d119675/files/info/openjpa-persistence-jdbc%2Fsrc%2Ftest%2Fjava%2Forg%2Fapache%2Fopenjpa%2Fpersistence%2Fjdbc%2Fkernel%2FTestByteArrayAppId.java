{"sha":"d54d1b928926b83a645846765a92b17042abf1c1","node_id":"MDQ6QmxvYjIwNjM2NDpkNTRkMWI5Mjg5MjZiODNhNjQ1ODQ2NzY1YTkyYjE3MDQyYWJmMWMx","size":13054,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d54d1b928926b83a645846765a92b17042abf1c1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5r\nZXJuZWw7Ci8qCiAqIFRlc3RCeXRlQXJyYXlBcHBJZC5qYXZhCiAqCiAqIENy\nZWF0ZWQgb24gT2N0b2JlciAyLCAyMDA2LCAxMDo1NiBBTQogKgogKiBUbyBj\naGFuZ2UgdGhpcyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUg\nTWFuYWdlcgogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRv\nci4KICovCgoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5qZGJjLmNvbW1vbi5hcHBzLio7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7\nCgppbXBvcnQgamF2YS51dGlsLio7CgoKaW1wb3J0IGphdmEubGFuZy5hbm5v\ndGF0aW9uLkFubm90YXRpb247CmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuKjsK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50\naXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXJTUEk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5NYXBwaW5nVG9vbDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkV4dGVudDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVy\nc2lzdGVuY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk9w\nZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLlF1ZXJ5OwoKCnB1YmxpYyBjbGFzcyBUZXN0Qnl0ZUFycmF5QXBw\nSWQgZXh0ZW5kcyBCYXNlSkRCQ1Rlc3QgewogICAgCiAgICBwcml2YXRlIHN0\nYXRpYyBib29sZWFuIF9pbml0ID0gZmFsc2U7CiAgICBwcml2YXRlIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBfcG1mID0gbnVsbDsKICAgIAogICAg\nCiAgICAvKiogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBUZXN0Qnl0ZUFy\ncmF5QXBwSWQgKi8KICAgIHB1YmxpYyBUZXN0Qnl0ZUFycmF5QXBwSWQoU3Ry\naW5nIG5hbWUpIAogICAgewogICAgCXN1cGVyKG5hbWUpOwogICAgfQogICAg\nCiAgICBwdWJsaWMgYm9vbGVhbiBza2lwVGVzdCgpIHsKICAgICAgICByZXR1\ncm4gZ2V0Q3VycmVudFBsYXRmb3JtKCkgIT0gQWJzdHJhY3RUZXN0Q2FzZS5Q\nbGF0Zm9ybS5EQjI7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHNldFVw\nKCkKICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIHdlIGhhdmUg\ndG8gdXNlIGdldGJ5dGVzL3NldGJ5dGVzIGZvciBieXRlIGFycmF5cyB0byB3\nb3JrIHByb3Blcmx5CiAgICAgICAgX3BtZiA9KE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSkgZ2V0RW1mKGdldFByb3BzKCkpOwogICAgICAgIAogICAg\nICAgIGlmICghX2luaXQpIHsKICAgICAgICAgICAgaW5pdGlhbGl6ZSgoSkRC\nQ0NvbmZpZ3VyYXRpb24pICgoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5\nU1BJKSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChfcG1mKSkuZ2V0Q29uZmln\ndXJhdGlvbigpKTsKICAgICAgICAgICAgX2luaXQgPSB0cnVlOwogICAgICAg\nIH0KICAgICAgICBFbnRpdHlNYW5hZ2VyIHBtID0gX3BtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgCiAg\nICAgICBkZWxldGVBbGwoQnl0ZUFycmF5UEtQQy5jbGFzcyxwbSk7CiAgICAg\nICAgZW5kVHgocG0pOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICAgICAgcG0g\nPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0p\nOwogICAgICAgIEJ5dGVBcnJheVBLUEMyIHRlc3RCeXRlcyA9IG5ldyBCeXRl\nQXJyYXlQS1BDMihuZXcgYnl0ZVtdeyAxLCAyIH0sCiAgICAgICAgICAgICAg\nICAiY2hpbGQiKTsKICAgICAgICB0ZXN0Qnl0ZXMuc2V0U3ViZmllbGQoInN1\nYiIpOwogICAgICAgIHRlc3RCeXRlcy5zZXRQYXJlbnQobmV3IEJ5dGVBcnJh\neVBLUEMobmV3IGJ5dGVbXXsgMywgNCB9LCAicGFyZW50IikpOwogICAgICAg\nIHBtLnBlcnNpc3QodGVzdEJ5dGVzKTsKICAgICAgICBlbmRUeChwbSk7CiAg\nICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVhckRvd24oKQogICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8g\nY2xvc2luZyB0aGUgcG1mIGV2ZXJ5IHRpbWUgc2xvd3MgdGhpbmdzIGRvd24g\ndG9vIG11Y2ggYi9jCiAgICAgICAgLy8gc2NoZW1hIHJlZmxlY3Rpb24gaXMg\nc28gc2xvdyBvbiBEQjIKICAgICAgICAvLwl0cnkgeyBfcG1mLmNsb3NlICgp\nOyB9IGNhdGNoIChFeGNlcHRpb24gZSkge30KICAgICAgICAKICAgICAgICBz\ndXBlci50ZWFyRG93bigpOwogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQg\naW5pdGlhbGl6ZShKREJDQ29uZmlndXJhdGlvbiBjb25mKQogICAgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgCiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbT0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBrZW0gPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdCAoZW0p\nOwogICAgICAgIC8vSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IChKREJDQ29u\nZmlndXJhdGlvbikga2VtLmdldENvbmZpZ3VyYXRpb24oKTsgICAgICAgIAog\nICAgICAgIAogICAgICAgIE1hcHBpbmdUb29sIHRvb2wgPSBuZXcgTWFwcGlu\nZ1Rvb2woKEpEQkNDb25maWd1cmF0aW9uKQogICAgICAgIAkJKChPcGVuSlBB\nRW50aXR5TWFuYWdlclNQSSkga2VtKS5nZXRDb25maWd1cmF0aW9uKCksIE1h\ncHBpbmdUb29sLkFDVElPTl9SRUZSRVNILCBmYWxzZSk7CiAgICAgICAgdG9v\nbC5ydW4oQnl0ZUFycmF5UEtQQy5jbGFzcyk7CiAgICAgICAgdG9vbC5ydW4o\nQnl0ZUFycmF5UEtQQzIuY2xhc3MpOwogICAgICAgIHRvb2wucmVjb3JkKCk7\nCiAgICB9CiAgICAKICAgIC8qKgogICAgICogVGVzdHMgdGhhdCBhcHBsaWNh\ndGlvbiBpZGVudGl0eSBjbGFzc2VzIGFyZSByZXR1cm5lZCBjb3JyZWN0bHku\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRPYmplY3RJZENsYXNz\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW09IGN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBP\ncGVuSlBBUGVyc2lzdGVuY2UuY2FzdCAoZW0pOwoKICAgICAgICAKICAgICAg\nICBhc3NlcnRFcXVhbHMoQnl0ZUFycmF5UEtQQ0lkLmNsYXNzLAogICAgICAg\nICAgICAgICAgcG0uZ2V0T2JqZWN0SWRDbGFzcyhCeXRlQXJyYXlQS1BDLmNs\nYXNzKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEJ5dGVBcnJheVBLUENJZC5j\nbGFzcywKICAgICAgICAgICAgICAgIHBtLmdldE9iamVjdElkQ2xhc3MoQnl0\nZUFycmF5UEtQQzIuY2xhc3MpKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogVGVz\ndHMgZmluZGluZyBhbiBpbnN0YW5jZSBieSBhIG1hbnVhbGx5LWNyZWF0ZWQg\naWQgdmFsdWUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRTdWJj\nbGFzc09iamVjdEJ5SWQoKSB7CiAgICAgICAgQnl0ZUFycmF5UEtQQzIgYnl0\nZXMyID0gZ2V0Q2hpbGQoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGJ5dGVz\nMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGJ5dGVzMi5nZXRQSygpWzBd\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgYnl0ZXMyLmdldFBLKClbMV0p\nOwogICAgICAgIGFzc2VydEVxdWFscygiY2hpbGQiLCBieXRlczIuZ2V0U3Ry\naW5nRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzdWIiLCBieXRl\nczIuZ2V0U3ViZmllbGQoKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChieXRl\nczIuZ2V0UGFyZW50KCkpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBieXRl\nczIuZ2V0UGFyZW50KCkuZ2V0UEsoKVswXSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDQsIGJ5dGVzMi5nZXRQYXJlbnQoKS5nZXRQSygpWzFdKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoInBhcmVudCIsIGJ5dGVzMi5nZXRQYXJlbnQoKS5n\nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnROdWxsKGJ5dGVzMi5n\nZXRQYXJlbnQoKS5nZXRQYXJlbnQoKSk7CiAgICAgICAgLy9GSVhNRSBuZXh0\nIGxpbmUgY29tbWVudGVkIAogICAgICAgIC8vSkRPSGVscGVyLmdldFBlcnNp\nc3RlbmNlTWFuYWdlcihieXRlczIpLmNsb3NlKCk7CiAgICB9CiAgICAKICAg\nIC8qKgogICAgICogVGVzdHMgZmluZGluZyBhbiBpbnN0YW5jZSBieSBhIG1h\nbnVhbGx5LWNyZWF0ZWQgaWQgdmFsdWUuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHRlc3RHZXRPYmplY3RCeUlkKCkgewogICAgICAgIEJ5dGVBcnJheVBL\nUEMgYnl0ZXMgPSBnZXRQYXJlbnQoKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKGJ5dGVzKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgYnl0ZXMuZ2V0UEso\nKVswXSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIGJ5dGVzLmdldFBLKClb\nMV0pOwogICAgICAgIGFzc2VydEVxdWFscygicGFyZW50IiwgYnl0ZXMuZ2V0\nU3RyaW5nRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0TnVsbChieXRlcy5nZXRQ\nYXJlbnQoKSk7CiAgICAgICAgLy9GSVhNRSBuZXh0IGxpbmUgY29tbWVudGVk\nIAogICAgICAgIC8vSkRPSGVscGVyLmdldFBlcnNpc3RlbmNlTWFuYWdlcihi\neXRlcykuY2xvc2UoKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBUZXN0\ncyB0aGF0IHRoZSBvaWQgaW5zdGFuY2VzIHJldHVybmVkIGZyb20gdGhlIHBt\nIGFyZSBjb3BpZWQgdG8KICAgICAqIHByZXZlbnQgYnktcmVmZXJlbmNlIG1v\nZGlmaWNhdGlvbiBieSB0aGUgdXNlci4KICAgICAqLwogICAgcHVibGljIHZv\naWQgdGVzdEdldE9iamVjdElkKCkgewogICAgICAgIAogICAgICAgIEVudGl0\neU1hbmFnZXIgZW09IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIga2VtID0gT3BlbkpQQVBlcnNpc3RlbmNl\nLmNhc3QgKGVtKTsKICAgICAgICBpZiAoISAoKE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyU1BJKSBrZW0pLmdldENvbmZpZ3VyYXRpb24oKS5nZXRDb21wYXRpYmls\naXR5SW5zdGFuY2UoKS5nZXRDb3B5T2JqZWN0SWRzKCkpCiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICAKICAgICAgICBCeXRlQXJyYXlQS1BDSWQgb2lk\nID0gbmV3IEJ5dGVBcnJheVBLUENJZCgpOwogICAgICAgIG9pZC5wayA9IG5l\ndyBieXRlW117IDEsIDIgfTsKICAgICAgICBCeXRlQXJyYXlQS1BDIGJ5dGVz\nID0gKEJ5dGVBcnJheVBLUEMpIGtlbS5nZXRPYmplY3RJZChvaWQpOwogICAg\nICAgIEJ5dGVBcnJheVBLUENJZCBvaWRDb3B5ID0gKEJ5dGVBcnJheVBLUENJ\nZCkga2VtLmdldE9iamVjdElkKGJ5dGVzKTsKICAgICAgICBhc3NlcnRUcnVl\nKCJPaWQgbm90IGNvcGllZC4iLCBvaWQgIT0gb2lkQ29weSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIG9pZENvcHkucGtbMF0pOwogICAgICAgIGFzc2Vy\ndEVxdWFscygyLCBvaWRDb3B5LnBrWzFdKTsKICAgICAgICAKICAgICAgICBl\nbS5jbG9zZSgpOwogICAgICAgIGtlbS5jbG9zZSgpOwogICAgfQogICAgCiAg\nICAvKioKICAgICAqIFRlc3RzIHRoYXQgY2hhbmdpbmcgcHJpbWFyeSBrZXkg\ndmFsdWVzIHdpbGwgZmFpbC4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVz\ndENoYW5nZUlkZW50aXR5KCkgewogICAgICAgIEJ5dGVBcnJheVBLUEMyIGJ5\ndGVzID0gZ2V0Q2hpbGQoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBwbSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5nZXRFbnRpdHlNYW5hZ2VyKGJ5\ndGVzKTsKICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICAKICAgICAgICAv\nLyBtYWtlIHN1cmUgc2V0dGluZyB0byBzYW1lIHZhbHVlIGlzIE9LCiAgICAg\nICAgYnl0ZXMuc2V0UEsoYnl0ZXMuZ2V0UEsoKSk7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgYnl0ZXMuc2V0UEsobmV3IGJ5dGVbXXsgNSwgNiB9KTsK\nICAgICAgICAgICAgZmFpbCgiQWxsb3dlZCBjaGFuZ2luZyBvZiBway4iKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gamUpIHsKICAgICAgICB9CiAg\nICAgICAgcm9sbGJhY2tUeChwbSk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAg\nIH0KICAgIAogICAgLyoqCiAgICAgKiBUZXN0cyB0aGF0IHBrIGZpZWxkcyBh\ncmUgcmV0YWluZWQgb24gc3RhdGUgdHJhbnNpdGlvbiB0byBob2xsb3cuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RQS1JldGFpbigpIHsKICAgICAg\nICBCeXRlQXJyYXlQS1BDMiBieXRlcyA9IGdldENoaWxkKCk7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBPcGVuSlBBUGVyc2lzdGVuY2Uu\nZ2V0RW50aXR5TWFuYWdlcihieXRlcyk7CiAgICAgICAgCiAgICAgICAgLy9G\nSVhNRSBuZXh0IGxpbmUgY29tbWVudGVkIC4uLi4gbmVlZCBzdWJzdGl0dXRl\nIEFQSQogICAgICAgIC8vcG0uY3VycmVudFRyYW5zYWN0aW9uKCkuc2V0Tm9u\ndHJhbnNhY3Rpb25hbFJlYWQoZmFsc2UpOwogICAgICAgIAogICAgICAgIHN0\nYXJ0VHgocG0pOwogICAgICAgIGJ5dGVzLnNldFBhcmVudChudWxsKTsKICAg\nICAgICBlbmRUeChwbSk7ICAgICAgICAKICAgICAgICAKICAgICAgICAvLyBi\neXRlcyBzaG91bGQgc3RpbGwgYWxsb3cgYWNjZXNzIHRvIG9pZCBmaWVsZHMK\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYnl0ZXMuZ2V0UEsoKVswXSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDIsIGJ5dGVzLmdldFBLKClbMV0pOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGJ5dGVzLmdldFBhcmVudCgpOwogICAg\nICAgICAgICBmYWlsKCJBbGxvd2VkIHJlYWQgb2Ygbm9uLXBrIHZhbHVlIG91\ndHNpZGUgb2YgdHJhbnNhY3Rpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGplKSB7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGJ5dGVzLnNldFBLKG5ldyBieXRlW117IDUsIDYgfSk7CiAgICAgICAg\nICAgIGZhaWwoIkFsbG93ZWQgc2V0dGluZyBvZiBwayB2YWx1ZSBvdXRzaWRl\nIG9mIHRyYW5zYWN0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBqZSkgewogICAgICAgIH0KICAgICAgICBwbS5jbG9zZSgpOwogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlQW5kSW5zZXJ0KCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW09IGN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIga2VtID0gT3BlbkpQ\nQVBlcnNpc3RlbmNlLmNhc3QgKGVtKTsKICAgICAgICAKICAgICAgICBzdGFy\ndFR4KGtlbSk7CiAgICAgICAKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIDIwOyBpKyspIHsKICAgICAgICAgICAgQnl0ZUFycmF5UEtQQyBieXRlcyA9\nIG5ldyBCeXRlQXJyYXlQS1BDKG5ldyBieXRlW10KICAgICAgICAgICAgeyAo\nYnl0ZSkgKGkgKyA1KSwgKGJ5dGUpIChpICsgNikgfSwgU3RyaW5nLnZhbHVl\nT2YoaSkpOwogICAgICAgICAgICBrZW0ucGVyc2lzdChieXRlcyk7CiAgICAg\nICAgfQogICAgICAgIGVuZFR4KGtlbSk7ICAgICAgICAKICAgICAgICAKICAg\nICAgICBrZW0uY2xvc2UoKTsKICAgICAgICAKICAgICAgICBrZW0gPSBfcG1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGtlbSk7\nCiAgICAgICAgRXh0ZW50IGV4dGVudCA9IChFeHRlbnQpIGtlbS5jcmVhdGVF\neHRlbnQoQnl0ZUFycmF5UEtQQy5jbGFzcyxmYWxzZSk7CiAgICAgICAga2Vt\nLmRldGFjaEFsbChleHRlbnQubGlzdCgpKTsKICAgICAgICBleHRlbnQuY2xv\nc2VBbGwoKTsKICAgICAgICAKICAgICAgICBCeXRlQXJyYXlQS1BDIG93bmVy\nID0gbmV3IEJ5dGVBcnJheVBLUEMoKTsKICAgICAgICBrZW0ucGVyc2lzdChv\nd25lcik7CiAgICAgICAgb3duZXIuc2V0UEsobmV3IGJ5dGVbXXsgMTAwLCAx\nMDEgfSk7CiAgICAgICAgb3duZXIuc2V0U3RyaW5nRmllbGQoIm93bmVyIik7\nCiAgICAgICAgCiAgICAgICAgLy8gbWFrZSBuZXcgaW5zdGFuY2VzIHdpdGgg\nc2FtZSBvaWRzIHBlcnNpc3RlbnQKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IDIwOyBpKyspIHsKICAgICAgICAgICAgQnl0ZUFycmF5UEtQQyBieXRl\ncyA9IG5ldyBCeXRlQXJyYXlQS1BDKG5ldyBieXRlW10KICAgICAgICAgICAg\neyAoYnl0ZSkgKGkgKyA1KSwgKGJ5dGUpIChpICsgNikgfSwgU3RyaW5nLnZh\nbHVlT2YoaSkpOwogICAgICAgICAgICBrZW0ucGVyc2lzdChieXRlcyk7CiAg\nICAgICAgICAgIGFzc2VydEVxdWFscyhieXRlcywgZ2V0U3RhdGVNYW5hZ2Vy\nKGJ5dGVzLCBrZW0pLmdldE1hbmFnZWRJbnN0YW5jZSgpKTsKICAgICAgICAg\nICAgb3duZXIuZ2V0UmVscygpLmFkZChieXRlcyk7CiAgICAgICAgfQogICAg\nICAgIAogICAgICAgIGVuZFR4KGtlbSk7ICAKICAgICAgICAKICAgICAgICBP\nYmplY3Qgb2lkID0ga2VtLmdldE9iamVjdElkKG93bmVyKTsKICAgICAgICBh\nc3NlcnRPd25lcihrZW0sIG9pZCk7CiAgICAgICAga2VtLmNsb3NlKCk7CiAg\nICAgICAgCiAgICAgICAga2VtID0gX3BtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgYXNzZXJ0T3duZXIoa2VtLCBvaWQpOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICAgICAga2VtLmNsb3NlKCk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RRdWVyeSgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIHBtID0gX3BtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nLy9GSVhNRSBqdGhvbWFzIC0gcGFydGx5IGNvbW1lbnRlZCAKICAgICAgICAv\nL1F1ZXJ5IHEgPSBwbS5uZXdRdWVyeShCeXRlQXJyYXlQS1BDLmNsYXNzLCAi\ncGsgPT0gYnl0ZXMiKTsKICAgICAgICBRdWVyeSBxID1udWxsOy8vPSBwbS5u\nZXdRdWVyeShCeXRlQXJyYXlQS1BDLmNsYXNzLCAicGsgPT0gYnl0ZXMiKTsK\nICAgICAgICBxLmRlY2xhcmVQYXJhbWV0ZXJzKCJieXRlW10gYnl0ZXMiKTsK\nICAgICAgICAvL0ZJWE1FIGp0aG9tYXMgLSBubyBleGVjdXRlIGZvciBieXRl\nIAogICAgICAgIC8vQ29sbGVjdGlvbiByZXN1bHRzID0gKENvbGxlY3Rpb24p\nIHEuZXhlY3V0ZShuZXcgYnl0ZVtdeyAxLCAyIH0pOwogICAgICAgIENvbGxl\nY3Rpb24gcmVzdWx0cyA9bnVsbDsvLz0gKENvbGxlY3Rpb24pIHEuZXhlY3V0\nZShuZXcgYnl0ZVtdeyAxLCAyIH0pOwogICAgICAgIGFzc2VydEVxdWFscygx\nLCByZXN1bHRzLnNpemUoKSk7CiAgICAgICAgQnl0ZUFycmF5UEtQQzIgY2hp\nbGQgPSAoQnl0ZUFycmF5UEtQQzIpIHJlc3VsdHMuaXRlcmF0b3IoKS5uZXh0\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJjaGlsZCIsIGNoaWxkLmdldFN0\ncmluZ0ZpZWxkKCkpOwogICAgICAgIHEuY2xvc2VBbGwoKTsKICAgICAgICBw\nbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29u\nZmxpY3RpbmdJZHMoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\ncG0gPSBfcG1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFy\ndFR4KHBtKTsgICAgIAogICAgICAgIAogICAgICAgIC8vIG1ha2UgYSBidW5j\naCBvZiBvYmplY3RzIHBlcnNpc3RlbnQgd2l0aCB0aGUgc2FtZSBpbml0aWFs\nIHBrIHZhbHVlcwogICAgICAgIEJ5dGVBcnJheVBLUEMgb3duZXIgPSBuZXcg\nQnl0ZUFycmF5UEtQQygpOwogICAgICAgIHBtLnBlcnNpc3Qob3duZXIpOwog\nICAgICAgIG93bmVyLnNldFBLKG5ldyBieXRlW117IDEwMCwgMTAxIH0pOwog\nICAgICAgIG93bmVyLnNldFN0cmluZ0ZpZWxkKCJvd25lciIpOwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgMjA7IGkrKykgewogICAgICAgICAgICBC\neXRlQXJyYXlQS1BDIGJ5dGVzID0gbmV3IEJ5dGVBcnJheVBLUEMoKTsKICAg\nICAgICAgICAgcG0ucGVyc2lzdChieXRlcyk7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhieXRlcywgZ2V0U3RhdGVNYW5hZ2VyKGJ5dGVzLCBwbSkuCiAg\nICAgICAgICAgICAgICAgICAgZ2V0TWFuYWdlZEluc3RhbmNlKCkpOwogICAg\nICAgICAgICBieXRlcy5zZXRQSyhuZXcgYnl0ZVtdeyAoYnl0ZSkgKGkgKyA1\nKSwgKGJ5dGUpIChpICsgNikgfSk7CiAgICAgICAgICAgIGJ5dGVzLnNldFN0\ncmluZ0ZpZWxkKFN0cmluZy52YWx1ZU9mKGkpKTsKICAgICAgICAgICAgb3du\nZXIuZ2V0UmVscygpLmFkZChieXRlcyk7CiAgICAgICAgfQogICAgICAgIGVu\nZFR4KHBtKTsKICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQo\nb3duZXIpOwogICAgICAgIGFzc2VydE93bmVyKHBtLCBvaWQpOwogICAgICAg\nIHBtLmNsb3NlKCk7CiAgICAgICAgCiAgICAgICAgcG0gPSBfcG1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBhc3NlcnRPd25lcihwbSwgb2lk\nKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwcml2YXRl\nIHZvaWQgYXNzZXJ0T3duZXIoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0sIE9i\namVjdCBvaWQpIHsKICAgICAgICBCeXRlQXJyYXlQS1BDIG93bmVyID0gKEJ5\ndGVBcnJheVBLUEMpIHBtLmdldE9iamVjdElkKG9pZCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEwMCwgb3duZXIuZ2V0UEsoKVswXSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEwMSwgb3duZXIuZ2V0UEsoKVsxXSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJvd25lciIsIG93bmVyLmdldFN0cmluZ0ZpZWxkKCkpOwog\nICAgICAgIExpc3QgcmVscyA9IG93bmVyLmdldFJlbHMoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMjAsIHJlbHMuc2l6ZSgpKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IHJlbHMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAg\nQnl0ZUFycmF5UEtQQyBieXRlcyA9IChCeXRlQXJyYXlQS1BDKSByZWxzLmdl\ndChpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGkgKyA1LCBieXRlcy5n\nZXRQSygpWzBdKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGkgKyA2LCBi\neXRlcy5nZXRQSygpWzFdKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKFN0\ncmluZy52YWx1ZU9mKGkpLCBieXRlcy5nZXRTdHJpbmdGaWVsZCgpKTsKICAg\nICAgICB9CiAgICB9CiAgICAKICAgIHByaXZhdGUgQnl0ZUFycmF5UEtQQyBn\nZXRQYXJlbnQoKSB7CiAgICAgICAgQnl0ZUFycmF5UEtQQ0lkIG9pZCA9IG5l\ndyBCeXRlQXJyYXlQS1BDSWQoKTsKICAgICAgICBvaWQucGsgPSBuZXcgYnl0\nZVtdeyAzLCA0IH07CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPSBfcG1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICByZXR1cm4g\nKEJ5dGVBcnJheVBLUEMpIHBtLmdldE9iamVjdElkKG9pZCk7CiAgICB9CiAg\nICAKICAgIHByaXZhdGUgQnl0ZUFycmF5UEtQQzIgZ2V0Q2hpbGQoKSB7CiAg\nICAgICAgQnl0ZUFycmF5UEtQQ0lkIG9pZCA9IG5ldyBCeXRlQXJyYXlQS1BD\nSWQoKTsKICAgICAgICBvaWQucGsgPSBuZXcgYnl0ZVtdeyAxLCAyIH07CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBfcG1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICByZXR1cm4gKEJ5dGVBcnJheVBLUEMy\nKSBwbS5nZXRPYmplY3RJZChvaWQpOwogICAgfQogICAgCiAgICBwdWJsaWMg\nc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAvLyBt\nYWluKCk7CiAgICB9CiAgICAKICAgIHByaXZhdGUgTWFwIGdldFByb3BzKCkg\newogICAgICAgIE1hcCBwcm9wcz1uZXcgSGFzaE1hcCgpOwogICAgICAgIHBy\nb3BzLnB1dCgib3BlbmpwYS5qZGJjLkRCRGljdGlvbmFyeSIsICIiKTsKICAg\nICAgICBwcm9wcy5wdXQoIlVzZUdldEJ5dGVzRm9yQmxvYnMiLCAidHJ1ZSIp\nOwogICAgICAgIHByb3BzLnB1dCgiVXNlU2V0Qnl0ZXNGb3JCbG9icyIsICJ0\ncnVlIik7CiAgICAgICAgcHJvcHMucHV0KCJCYXRjaExpbWl0IiwgIjAiKTsK\nICAgICAgICAKICAgICAgICByZXR1cm4gcHJvcHM7CiAgICB9CiAgICAKICAg\nIAp9Cg==\n","encoding":"base64"}

