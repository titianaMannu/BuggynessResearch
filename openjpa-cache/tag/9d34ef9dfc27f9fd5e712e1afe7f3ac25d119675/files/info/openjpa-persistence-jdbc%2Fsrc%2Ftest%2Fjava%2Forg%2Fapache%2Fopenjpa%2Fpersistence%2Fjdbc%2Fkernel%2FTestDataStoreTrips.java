{"sha":"acc5341b81781afa9561f85cd6837f05c23a40dc","node_id":"MDQ6QmxvYjIwNjM2NDphY2M1MzQxYjgxNzgxYWZhOTU2MWY4NWNkNjgzN2YwNWMyM2E0MGRj","size":6650,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/acc5341b81781afa9561f85cd6837f05c23a40dc","content":"LyoKICogVGVzdERhdGFTdG9yZVRyaXBzLmphdmEKICoKICogQ3JlYXRlZCBv\nbiBTZXB0ZW1iZXIgMjksIDIwMDYsIDQ6NDggUE0KICoKICogVG8gY2hhbmdl\nIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFn\nZXIKICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuCiAq\nLwoKLyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNo\nZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVp\ncmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5n\nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBp\ncyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VU\nIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0\naGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3Ig\ndGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9u\ncyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAog\nKi8KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRi\nYy5rZXJuZWw7CgppbXBvcnQgamF2YS51dGlsLio7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuY29tbW9uLmFwcHMuKjsK\nCgppbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uQW5ub3RhdGlvbjsKaW1w\nb3J0IGp1bml0LmZyYW1ld29yay4qOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eU1hbmFnZXJGYWN0b3J5OwoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVu\ndGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5qZGJjLkFic3RyYWN0SkRCQ0xpc3Rl\nbmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5qZGJjLkpEQkNF\ndmVudDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5P\ncGVuSlBBRW50aXR5TWFuYWdlclNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNl\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01h\ncHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nRXh0ZW50OwoKCgpwdWJsaWMgY2xhc3MgVGVzdERhdGFTdG9yZVRyaXBzIGV4\ndGVuZHMgQmFzZUpEQkNUZXN0ewoKCi8vICAgIHByaXZhdGUgYm9vbGVhbiAg\nPSB0cnVlOy8vQm9vbGVhbi52YWx1ZU9mKGJvb2wpOwoJCiAgICBwcml2YXRl\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBfZmFjdG9yeSA9IG51bGw7\nCiAgICBwcml2YXRlIE9iamVjdCBfb2lkID0gbnVsbDsKICAgIHByaXZhdGUg\nU2VsZWN0Q291bnRlciBfY291bnRlciA9IG51bGw7CiAgICAKICAgIC8qKiBD\ncmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIFRlc3REYXRhU3RvcmVUcmlwcyAq\nLwogICAgcHVibGljIFRlc3REYXRhU3RvcmVUcmlwcygpIHsKICAgIH0KICAg\nIHB1YmxpYyBUZXN0RGF0YVN0b3JlVHJpcHMoU3RyaW5nIG5hbWUpIHsKICAg\nICAgICBzdXBlcihuYW1lKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\nc2V0VXAoKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgZGVs\nZXRlQWxsKERhdGFTdG9yZVRyaXBzUEMuY2xhc3MpOwoKICAgICAgICAvLyBm\naWd1cmUgb3V0IHdoYXQgdGFibGUgdG8gbG9vayBmb3IgaW4gU1FMIHN0YXRl\nbWVudHMKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtPSBjdXJyZW50RW50aXR5\nTWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGtlbSA9\nIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0IChlbSk7CiAgICAgICAgSkRCQ0Nv\nbmZpZ3VyYXRpb24gY29uZiA9IChKREJDQ29uZmlndXJhdGlvbikgKChPcGVu\nSlBBRW50aXR5TWFuYWdlclNQSSkga2VtKS5nZXRDb25maWd1cmF0aW9uKCk7\nICAgICAgICAKCiAgICAgICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcgPSBjb25m\nLmdldE1hcHBpbmdSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNYXBwaW5nCiAg\nICAgICAgICAgIChEYXRhU3RvcmVUcmlwc1BDLmNsYXNzLCBudWxsLCB0cnVl\nKTsKICAgICAgICBTdHJpbmcgdGFibGUgPSBjb25mLmdldERCRGljdGlvbmFy\neUluc3RhbmNlKCkKICAgICAgICAgICAgLmdldEZ1bGxOYW1lKG1hcHBpbmcu\nZ2V0VGFibGUoKSwgZmFsc2UpOwoKICAgICAgICAvLyBnZXQgZmFjdG9yeSB3\naXRoIGNvdW50ZXIgbGlzdGVuZXIKICAgICAgICBfZmFjdG9yeSA9IGdldEVt\nZigpOwovKiAgICAgICAgICAgICAgICBnZXRQTUZhY3RvcnkobmV3IFN0cmlu\nZ1tdewogICAgICAgICAgICAib3BlbmpwYS5qZGJjLkpEQkNMaXN0ZW5lcnMi\nLAogICAgICAgICAgICBTZWxlY3RDb3VudGVyLmNsYXNzLmdldE5hbWUoKSAr\nICIoVGFibGU9IiArIHRhYmxlICsgIikiLAogICAgICAgICAgICAib3Blbmpw\nYS5Db21wYXRpYmlsaXR5IiwKICAgICAgICAgICAgIlZhbGlkYXRlVHJ1ZUNo\nZWNrc1N0b3JlPXRydWUiCiAgICAgICAgfSk7CiovCiAgICAgICAgCiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBfZmFjdG9yeS5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAg\nCiAgICAgICAgRGF0YVN0b3JlVHJpcHNQQyBwYyA9IG5ldyBEYXRhU3RvcmVU\ncmlwc1BDKDApOwogICAgICAgIHBtLnBlcnNpc3QocGMpOwogICAgICAgIF9v\naWQgPSBwbS5nZXRPYmplY3RJZChwYyk7CgogICAgICAgIGZvciAoaW50IGkg\nPSAxOyBpIDwgMTA7IGkrKykKICAgICAgICAgICAgICBwbS5wZXJzaXN0KG5l\ndyBEYXRhU3RvcmVUcmlwc1BDKGkpKTsKICAgICAgICBlbmRUeChwbSk7CiAg\nICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgLy8gZG8gYSBxdWVyeSBzbyB0\naGF0IHRoZSBzdWJjbGFzcyBsaXN0IHdpbGwgZ2V0IGluaXRpYWxpemVkIGFu\nZAogICAgICAgIC8vIHdvbid0IGNvdW50IGFzIGEgc2VsZWN0CiAgICAgICAg\ncG0gPSBfZmFjdG9yeS5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\ncG0uZ2V0T2JqZWN0SWQoX29pZCk7CiAgICAgICAgcG0uY2xvc2UoKTsKCiAg\nICAgICAgX2NvdW50ZXIgPSAoU2VsZWN0Q291bnRlcikgKChKREJDQ29uZmln\ndXJhdGlvbikKICAgICAgICAJCSgoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5U1BJKSBfZmFjdG9yeSkuZ2V0Q29uZmlndXJhdGlvbigpKS5nZXRKREJD\nTGlzdGVuZXJJbnN0YW5jZXMoKVswXTsKICAgICAgICBfY291bnRlci5zZWxl\nY3RzID0gMDsKICAgICAgICBfY291bnRlci5jb3VudHMgPSAwOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RUcmlwcygpIHsKICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlciBwbSA9IF9mYWN0b3J5LmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBFeHRlbnQgZXh0ID0gcG0uY3JlYXRlRXh0ZW50KERh\ndGFTdG9yZVRyaXBzUEMuY2xhc3MsIHRydWUpOwogICAgICAgIGZvciAoSXRl\ncmF0b3IgaXRyID0gZXh0Lml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KQog\nICAgICAgICAgICBpdHIubmV4dCgpOwogICAgICAgIGV4dC5jbG9zZUFsbCgp\nOwogICAgICAgIHBtLmNsb3NlKCk7CgogICAgICAgIC8vIHRoZXJlIG1pZ2h0\nIGJlIG1vcmUgdGhhbiAxIHRyaXAgaWYgc3ViY2xhc3NlcyBuZWVkIHRvIGJl\nCiAgICAgICAgLy8gaW5pdGlhbGl6ZWQgYW5kIHNvIGZvcnRoLCBidXQgbWFr\nZSBzdXJlIHRoZXJlIGlzbid0IG1vcmUgdGhhbgogICAgICAgIC8vIDEgKyAj\nIG9iamVjdHMgdHJpcHMgdG8gdGhlIERCCiAgICAgICAgYXNzZXJ0VHJ1ZShf\nY291bnRlci5zZWxlY3RzID4gMCk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgiU2hv\ndWxkIGhhdmUgYmVlbiAxLTMgdHJpcHMgdG8gdGhlIGRhdGEgc3RvcmU7IGdv\ndCAiCiAgICAgICAgICAgICsgX2NvdW50ZXIuc2VsZWN0cywgX2NvdW50ZXIu\nc2VsZWN0cyA8IDUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFeGlz\ndHNDYWxscygpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nIF9mYWN0b3J5LmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgLy8g\nZmlyc3QgdGltZSB0aGVyZSBzaG91bGRuJ3QgYmUgYW55IGNhbGwgdG8gZXhp\nc3RzIGIvYyB0aGUgZGF0YQogICAgICAgIC8vIG5lZWRzIHRvIGJlIGxvYWRl\nZAogICAgICAgIHBtLmdldE9iamVjdElkKF9vaWQpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygwLCBfY291bnRlci5jb3VudHMpOwogICAgICAgIGFzc2VydEVx\ndWFscygxLCBfY291bnRlci5zZWxlY3RzKTsKCiAgICAgICAgLy8gdGhpcyB0\naW1lIHRoZXJlIHNob3VsZCBiZSBhIGNhbGwgYi9jIGRhdGEgaXMgYWxyZWFk\neSBsb2FkZWQgYnV0CiAgICAgICAgLy8gd2UncmUgc3RpbGwgYXNraW5nIHRv\nIHZhbGlkYXRlCiAgICAgICAgcG0uZ2V0T2JqZWN0SWQoX29pZCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIF9jb3VudGVyLmNvdW50cyk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIF9jb3VudGVyLnNlbGVjdHMpOwogICAgICAgIHBt\nLmdldE9iamVjdElkKF9vaWQpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBf\nY291bnRlci5jb3VudHMpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBfY291\nbnRlci5zZWxlY3RzKTsKCiAgICAgICAgLy8gc2hvdWxkbid0IGJlIGEgY2Fs\nbCBpZiB2YWxpZGF0ZSBpcyBmYWxzZTsgbm8gc2VsZWN0IGIvYyBkYXRhIGxv\nYWRlZAogICAgICAgIHBtLmdldE9iamVjdElkKF9vaWQpOwogICAgICAgIGFz\nc2VydEVxdWFscygyLCBfY291bnRlci5jb3VudHMpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygzLCBfY291bnRlci5zZWxlY3RzKTsKCiAgICAgICAgLy8gdGhp\ncyB3aWxsIGhvbGxvdyB0aGUgb2JqZWN0CiAgICAgICAgLy9GSVhNRSBqdGhv\nbWFzIC4uLm5lZWQgdG8gZmluZCBhIHN1YnN0aXR1dGUKICAgICAgICAvL3Bt\nLmN1cnJlbnRUcmFuc2FjdGlvbigpLnNldE9wdGltaXN0aWMoZmFsc2UpOwog\nICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIAoKICAgICAgICAvLyBubyBj\nb3VudCBjYWxsIGIvYyBsb2FkaW5nIGRhdGEKICAgICAgICBwbS5nZXRPYmpl\nY3RJZChfb2lkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgX2NvdW50ZXIu\nY291bnRzKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNCwgX2NvdW50ZXIuc2Vs\nZWN0cyk7CgogICAgICAgIC8vIG5vIGNvdW50IGNhbGwgYi9jIHRyYW5zYWN0\naW9uYWw7IG5vIHNlbGVjdCBiL2MgZGF0YSBsb2FkZWQKICAgICAgICBwbS5n\nZXRPYmplY3RJZChfb2lkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgX2Nv\ndW50ZXIuY291bnRzKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNCwgX2NvdW50\nZXIuc2VsZWN0cyk7CgogICAgICAgIHJvbGxiYWNrVHgocG0pOwogICAgICAg\nIHBtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBjbGFzcyBT\nZWxlY3RDb3VudGVyCiAgICAgICAgZXh0ZW5kcyBBYnN0cmFjdEpEQkNMaXN0\nZW5lciB7CgogICAgICAgIHB1YmxpYyBpbnQgc2VsZWN0cyA9IDA7CiAgICAg\nICAgcHVibGljIGludCBjb3VudHMgPSAwOwoKICAgICAgICBwcml2YXRlIFN0\ncmluZyBfdGFibGUgPSBudWxsOwoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRU\nYWJsZShTdHJpbmcgdGFibGUpIHsKICAgICAgICAgICAgX3RhYmxlID0gdGFi\nbGU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBiZWZvcmVFeGVj\ndXRlU3RhdGVtZW50KEpEQkNFdmVudCBldmVudCkgewogICAgICAgICAgICBp\nZiAoZXZlbnQuZ2V0U1FMKCkuaW5kZXhPZihfdGFibGUpICE9IC0xKQogICAg\nICAgICAgICAgICAgc2VsZWN0cysrOwogICAgICAgICAgICB7CiAgICAgICAg\nICAgICAgICBpZiAoZXZlbnQuZ2V0U1FMKCkuaW5kZXhPZigiIENPVU5UKCIp\nICE9IC0xKQogICAgICAgICAgICAgICAgICAgIGNvdW50cysrOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgfQogICAgCiAgICAKfQo=\n","encoding":"base64"}

