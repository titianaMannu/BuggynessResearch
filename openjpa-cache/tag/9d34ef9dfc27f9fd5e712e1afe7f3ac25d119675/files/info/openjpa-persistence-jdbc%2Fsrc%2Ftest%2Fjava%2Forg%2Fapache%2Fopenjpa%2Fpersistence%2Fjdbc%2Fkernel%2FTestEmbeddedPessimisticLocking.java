{"sha":"4df2e5d4551c83c32253ad516a42b12c9d6d8d5e","node_id":"MDQ6QmxvYjIwNjM2NDo0ZGYyZTVkNDU1MWM4M2MzMjI1M2FkNTE2YTQyYjEyYzlkNmQ4ZDVl","size":10600,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4df2e5d4551c83c32253ad516a42b12c9d6d8d5e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5r\nZXJuZWw7CgoKaW1wb3J0IGphdmEudXRpbC4qOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmtlcm5lbC4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuY29uZi4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmpkYmMuY29tbW9uLmFwcHMuKjsKCgppbXBvcnQgamF2YS5sYW5n\nLmFubm90YXRpb24uQW5ub3RhdGlvbjsKaW1wb3J0IGp1bml0LmZyYW1ld29y\nay4qOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29u\nZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuRmV0\nY2hQbGFuOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVy\nc2lzdGVuY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuamRiYy5rZXJuZWwuVGVzdFNRTExpc3RlbmVyVGVzdENhc2U7IAoKCi8q\nKgogKiBUZXN0IHZhcmlvdXMgYml0cyBvZiBlbWJlZGRlZC1maWVsZCBmdW5j\ndGlvbmFsaXR5LgogKiA8cC8+CiAqICMjIyMjIHRoaXMgc2hvdWxkIHRlc3Qg\nZW1iZWRkZWQtZWxlbWVudCBjb2xsZWN0aW9ucywgbWFwcywgYXQgbGVhc3Qg\ndG8gZW5zdXJlCiAqICMjIyMjIHRoYXQgdGhlIHN0YXRlIG1hbmFnZXJzIG9m\nIHZhbHVlcyBpbiBlbWJlZGRlZCBjb2xsZWN0aW9ucywgbWFwcyBkbyBub3QK\nICogIyMjIyMgaGF2ZSBvd25lcnMuIE5vdCByZWxldmFudCBpbiAzLng7IHdp\nbGwgYmUgaW1wb3J0YW50IGluIDQuMC4KICovCnB1YmxpYyBjbGFzcyBUZXN0\nRW1iZWRkZWRQZXNzaW1pc3RpY0xvY2tpbmcKICAgIGV4dGVuZHMgVGVzdFNR\nTExpc3RlbmVyVGVzdENhc2UgewoKCiAgICBwcml2YXRlIGJvb2xlYW4gc3Vw\ncG9ydHNMb2NraW5nOwogICAgcHJpdmF0ZSBPYmplY3Qgb2lkOwogICAgcHJp\ndmF0ZSBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mOwogICAgCiAg\nICBwdWJsaWMgVGVzdEVtYmVkZGVkUGVzc2ltaXN0aWNMb2NraW5nKFN0cmlu\nZyBuYW1lKQogICAgewogICAgCXN1cGVyKG5hbWUpOwogICAgfQoKCXB1Ymxp\nYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbnsKCQlzdXBlci5zZXRV\ncCgpOwoJCWVtZiA9IChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkpZ2V0\nRW1mKGdldFByb3BzKCkpOwoJfQoKCgogICAgcHVibGljIHZvaWQgc2V0VXBU\nZXN0Q2FzZSgpIHsKCgkJSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IChKREJD\nQ29uZmlndXJhdGlvbikgKChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlT\nUEkpIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtZikpLmdldENvbmZpZ3Vy\nYXRpb24oKTsKCiAgICAgICAgc3VwcG9ydHNMb2NraW5nID0gY29uZi5nZXRE\nQkRpY3Rpb25hcnlJbnN0YW5jZSgpLnN1cHBvcnRzU2VsZWN0Rm9yVXBkYXRl\nOwoKICAgICAgIGRlbGV0ZUFsbChFbWJlZGRlZE93bmVyUEMuY2xhc3MpOwoK\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9KE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3Rh\ncnRUeChlbSk7CiAgICAgICAgRW1iZWRkZWRPd25lclBDIG93bmVyID0gbmV3\nIEVtYmVkZGVkT3duZXJQQygxMCwgMjApOwogICAgICAgIGVtLnBlcnNpc3Qo\nb3duZXIpOwoKICAgICAgICBFbWJlZGRlZFBDIGVtYmVkZGVkID0gbmV3IEVt\nYmVkZGVkUEMoKTsKICAgICAgICBlbWJlZGRlZC5zZXRJbnRGaWVsZCg0KTsK\nICAgICAgICBlbWJlZGRlZC5zZXRTdHJpbmdGaWVsZCgiZm9vIik7CiAgICAg\nICAgb3duZXIuc2V0RW1iZWRkZWQoZW1iZWRkZWQpOwoKICAgICAgICBFbWJl\nZGRlZFBDIGVtYmVkZGVkMiA9IG5ldyBFbWJlZGRlZFBDKCk7CiAgICAgICAg\nZW1iZWRkZWQyLnNldEludEZpZWxkKDgpOwogICAgICAgIGVtYmVkZGVkMi5z\nZXRTdHJpbmdGaWVsZCgiYmFyIik7CiAgICAgICAgQ29tcGxleEVtYmVkZGVk\nUEMgY29tcGxleCA9IG5ldyBDb21wbGV4RW1iZWRkZWRQQygpOwogICAgICAg\nIGNvbXBsZXguc2V0U3RyaW5nRmllbGQoImNvbXBsZXgiKTsKICAgICAgICBj\nb21wbGV4LnNldEVtYmVkZGVkKGVtYmVkZGVkMik7CiAgICAgICAgb3duZXIu\nc2V0Q29tcGxleEVtYmVkZGVkKGNvbXBsZXgpOwoKICAgICAgICBlbmRUeChl\nbSk7CgogICAgICAgIG9pZCA9IGVtLmdldE9iamVjdElkKG93bmVyKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBwcmVw\nYXJlRU1GKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsKICAg\nICAgICAvLyBkbyB0aGlzIHRvIGVuc3VyZSB0aGF0IHRoZSBTRUxFQ1QgRElT\nVElOQ1QgZ2V0cyBwZXJmb3JtZWQgaGVyZS4KICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7Cgog\nICAgICAgIC8vRklYTUUganRob21hcyBjb21tZW50aW5nIHRoaXMgc2luY2Ug\nc2V0T3B0aW1pc3RpYyBpcyBub3QgYXZhaWxhYmxlIGZvciB1c2VyVHgKICAg\nICAgICAvL2VtLmdldFRyYW5zYWN0aW9uKCkuc2V0T3B0aW1pc3RpYyhmYWxz\nZSk7CiAgICAgICAgc3RhcnRUeChlbSk7CgogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIEVtYmVkZGVkT3duZXJQQyBwYyA9IChFbWJlZGRlZE93bmVyUEMp\nIGVtLmdldE9iamVjdElkKG9pZCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgcm9sbGJhY2tUeChlbSk7CiAgICAgICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbWJl\nZGRlZEZpZWxkc1dpdGhMb2NrZWRQYXJlbnQoKSB7CiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgZW0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJy\nZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHByZXBhcmVFTUYoZW0uZ2V0\nRW50aXR5TWFuYWdlckZhY3RvcnkoKSk7CiAgICAgICAgKChGZXRjaFBsYW4p\nIGVtLmdldEZldGNoUGxhbigpKS5hZGRGaWVsZChFbWJlZGRlZE93bmVyUEMu\nY2xhc3MsICJlbWJlZGRlZCIpOwovL0ZJWE1FIGp0aG9tYXMgY29tbWVudGlu\nZyB0aGlzIHNpbmNlIHNldE9wdGltaXN0aWMgaXMgbm90IGF2YWlsYWJsZSBm\nb3IgdXNlclR4Ci8vICAgICAgICBwbS5jdXJyZW50VHJhbnNhY3Rpb24oKS5z\nZXRPcHRpbWlzdGljKGZhbHNlKTsKICAgICAgICBzdGFydFR4KGVtKTsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBzcWwuY2xlYXIoKTsKICAgICAgICAg\nICAgRW1iZWRkZWRPd25lclBDIHBjID0gKEVtYmVkZGVkT3duZXJQQykgZW0u\nZ2V0T2JqZWN0SWQob2lkKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDEs\nIHNxbC5zaXplKCkpOwoKICAgICAgICAgICAgcGMuZ2V0RW1iZWRkZWQoKS5z\nZXRTdHJpbmdGaWVsZAogICAgICAgICAgICAgICAgKHBjLmdldEVtYmVkZGVk\nKCkuZ2V0U3RyaW5nRmllbGQoKSArICJiYXIiKTsKICAgICAgICAgICAgLy8g\nc2hvdWxkIG5vdCBnbyB0byB0aGUgZGIgZm9yIGFub3RoZXIgbG9jazsgd2Ug\ndXNlIDw9LCBzaW5jZQogICAgICAgICAgICAvLyBzb21lIGRhdGFiYXNlcyAo\nbGlrZSBIU1FMKSBkb24ndCBzdXBwb3J0IGxvY2tpbmcgYXQgYWxsCiAgICAg\nICAgICAgIGFzc2VydFRydWUoc3FsLnNpemUoKSA8PSAxKTsKICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICByb2xsYmFja1R4KGVtKTsKICAgICAg\nICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEVtYmVkZGVkRmllbGRzV2l0aFVubG9ja2VkUGFyZW50KCkg\newoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3BlbkpQQUVudGl0eU1h\nbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCQlwcmVwYXJlRU1GKGVt\nLmdldEVudGl0eU1hbmFnZXJGYWN0b3J5KCkpOwoJCSgoRmV0Y2hQbGFuKSBl\nbS5nZXRGZXRjaFBsYW4oKSkuYWRkRmllbGQoRW1iZWRkZWRPd25lclBDLmNs\nYXNzLCAiZW1iZWRkZWQiKTsKCgovL0ZJWE1FIGp0aG9tYXMgY29tbWVudGlu\nZyB0aGlzIHNpbmNlIHNldE9wdGltaXN0aWMgaXMgbm90IGF2YWlsYWJsZSBm\nb3IgdXNlclR4Ci8vICAgICAgICBwbS5jdXJyZW50VHJhbnNhY3Rpb24oKS5z\nZXRPcHRpbWlzdGljKGZhbHNlKTsKICAgICAgICBzdGFydFR4KGVtKTsKCiAg\nICAgICAgdHJ5IHsKCiAgICAgICAgICAgIC8vRklYTUUganRob21hcyAtIG5v\nIGVxdWl2YWxlbnQgZm91bmQgZm9yIExvY2tMZXZlbHMuTE9DS19OT05FCiAg\nICAgICAgICAgIC8vKChGZXRjaFBsYW4pIHBtLmdldEZldGNoUGxhbigpKS5z\nZXRSZWFkTG9ja01vZGUoTG9ja0xldmVscy5MT0NLX05PTkUpOwoKICAgICAg\nICAgICAgc3FsLmNsZWFyKCk7CiAgICAgICAgICAgIEVtYmVkZGVkT3duZXJQ\nQyBwYyA9IChFbWJlZGRlZE93bmVyUEMpIGVtLmdldE9iamVjdElkKG9pZCk7\nCiAgICAgICAgICAgIEVtYmVkZGVkUEMgZW1iZWRkZWQgPSBwYy5nZXRFbWJl\nZGRlZCgpOwoKICAgICAgICAgICAgYXNzZXJ0TnVsbChnZXRTdGF0ZU1hbmFn\nZXIocGMsIGVtKS5nZXRMb2NrKCkpOwogICAgICAgICAgICBhc3NlcnROdWxs\nKGdldFN0YXRlTWFuYWdlcihlbWJlZGRlZCwgZW0pLmdldExvY2soKSk7CiAg\nICAgICAgICAgIGFzc2VydEVxdWFscygxLCBzcWwuc2l6ZSgpKTsKICAgICAg\nICAgICAgc3FsLmNsZWFyKCk7CgogICAgICAgICAgICBlbWJlZGRlZC5zZXRT\ndHJpbmdGaWVsZChlbWJlZGRlZC5nZXRTdHJpbmdGaWVsZCgpICsgImJhciIp\nOwogICAgICAgICAgICAvLyBzaG91bGQgbm90IGdvIHRvIHRoZSBkYiBmb3Ig\nYW5vdGhlciBsb2NrIC0tIHNob3VsZCBoYXZlIGdvdHRlbgogICAgICAgICAg\nICAvLyBvbmUgYWxvbmcgd2l0aCB0aGUgZW1iZWRkZWQgZmllbGQncyBsb2Nr\nCiAgICAgICAgICAgIGFzc2VydFRydWUoc3FsLnNpemUoKSA8PSAxKTsKICAg\nICAgICAgICAgYXNzZXJ0Tm90TnVsbChnZXRTdGF0ZU1hbmFnZXIocGMsIGVt\nKS5nZXRMb2NrKCkpOwoKICAgICAgICAgICAgLy8gZW1iZWRkZWRzIGRvbid0\nIGdldCBsb2NrcyBhdCBhbGwuCiAgICAgICAgICAgIGFzc2VydE51bGwoZ2V0\nU3RhdGVNYW5hZ2VyKGVtYmVkZGVkLCBlbSkuZ2V0TG9jaygpKTsKCiAgICAg\nICAgICAgIC8vIG93bmVyIGlzIGRpcnRpZWQgd2hlbiBlbWJlZGRlZCByZWNv\ncmQgaXMgY2hhbmdlZAogICAgICAgICAgICBhc3NlcnRUcnVlKGdldFN0YXRl\nTWFuYWdlcihwYywgZW0pLmlzRGlydHkoKSk7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoZ2V0U3RhdGVNYW5hZ2VyKGVtYmVkZGVkLCBlbSkuaXNEaXJ0eSgp\nKTsKCiAgICAgICAgICAgIHBjLnNldFN0cmluZ0ZpZWxkKHBjLmdldFN0cmlu\nZ0ZpZWxkKCkgKyAiYmFyIik7CiAgICAgICAgICAgIC8vIHNob3VsZCBub3Qg\nZ28gdG8gdGhlIGRiIGZvciBhbm90aGVyIGxvY2suCiAgICAgICAgICAgIGFz\nc2VydFRydWUoc3FsLnNpemUoKSA8PSAxKTsKICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICByb2xsYmFja1R4KGVtKTsKICAgICAgICAgICAgZW0u\nY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndENvbXBsZXhFbWJlZGRlZEZpZWxkc1dpdGhMb2NrZWRQYXJlbnQoKSB7CgoJ\nCU9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3BlbkpQQUVudGl0eU1hbmFn\nZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCQlwcmVwYXJlRU1GKGVtLmdl\ndEVudGl0eU1hbmFnZXJGYWN0b3J5KCkpOwoJCWVtLmdldEZldGNoUGxhbigp\nLnNldE1heEZldGNoRGVwdGgoLTEpOwoJCSgoRmV0Y2hQbGFuKSBlbS5nZXRG\nZXRjaFBsYW4oKSkuYWRkRmllbGQoRW1iZWRkZWRPd25lclBDLmNsYXNzLCAi\nY29tcGxleEVtYmVkZGVkIik7CgkJKChGZXRjaFBsYW4pIGVtLmdldEZldGNo\nUGxhbigpKS5hZGRGaWVsZChSZWN1cnNpdmVseUVtYmVkZGVkUEMuY2xhc3Ms\nICJlbWJlZGRlZCIpOwoKLy9GSVhNRSBqdGhvbWFzIGNvbW1lbnRpbmcgdGhp\ncyBzaW5jZSBzZXRPcHRpbWlzdGljIGlzIG5vdCBhdmFpbGFibGUgZm9yIHVz\nZXJUeAovLyAgICAgICAgcG0uY3VycmVudFRyYW5zYWN0aW9uKCkuc2V0T3B0\naW1pc3RpYyhmYWxzZSk7CiAgICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgc3FsLmNsZWFyKCk7CiAgICAgICAgICAgIEVt\nYmVkZGVkT3duZXJQQyBwYyA9IChFbWJlZGRlZE93bmVyUEMpIGVtLmdldE9i\namVjdElkKG9pZCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygxLCBzcWwu\nc2l6ZSgpKTsKCiAgICAgICAgICAgIHBjLmdldENvbXBsZXhFbWJlZGRlZCgp\nLmdldEVtYmVkZGVkKCkuc2V0U3RyaW5nRmllbGQKICAgICAgICAgICAgICAg\nIChwYy5nZXRDb21wbGV4RW1iZWRkZWQoKS5nZXRFbWJlZGRlZCgpLmdldFN0\ncmluZ0ZpZWxkKCkgKwogICAgICAgICAgICAgICAgICAgICJiYXIiKTsKICAg\nICAgICAgICAgLy8gc2hvdWxkIG5vdCBnbyB0byB0aGUgZGIgZm9yIGFub3Ro\nZXIgbG9jay4KICAgICAgICAgICAgYXNzZXJ0VHJ1ZShzcWwuc2l6ZSgpIDw9\nIDEpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHJvbGxiYWNr\nVHgoZW0pOwogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29tcGxleEVtYmVkZGVkRmllbGRz\nV2l0aFVubG9ja2VkUGFyZW50KCkgewogICAgICAgIC8vIGRvaW5nIHRoaXMg\nYmVjYXVzZSBzZXR0aW5nIHRoZSByZWFkIGxvY2sgbGV2ZWwKICAgICAgICAv\nLyBkb2VzIG5vdCBzZWVtIHRvIGJlIGRpc2FibGluZyBGT1IgVVBEQVRFLgoK\nCgkJT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPShPcGVuSlBBRW50aXR5TWFu\nYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwoJCXByZXBhcmVFTUYoZW0u\nZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKSk7CgkJZW0uZ2V0RmV0Y2hQbGFu\nKCkuc2V0TWF4RmV0Y2hEZXB0aCgtMSk7CgkJKChGZXRjaFBsYW4pIGVtLmdl\ndEZldGNoUGxhbigpKS5hZGRGaWVsZChFbWJlZGRlZE93bmVyUEMuY2xhc3Ms\nICJjb21wbGV4RW1iZWRkZWQiKTsKCQkoKEZldGNoUGxhbikgZW0uZ2V0RmV0\nY2hQbGFuKCkpLmFkZEZpZWxkKFJlY3Vyc2l2ZWx5RW1iZWRkZWRQQy5jbGFz\ncywgImVtYmVkZGVkIik7CgoKCi8vRklYTUUganRob21hcyBjb21tZW50aW5n\nIHRoaXMgc2luY2Ugc2V0T3B0aW1pc3RpYyBpcyBub3QgYXZhaWxhYmxlIGZv\nciB1c2VyVHgKLy8gICAgICAgIHBtLmN1cnJlbnRUcmFuc2FjdGlvbigpLnNl\ndE9wdGltaXN0aWMoZmFsc2UpOwogICAgICAgIHN0YXJ0VHgoZW0pOwoKICAg\nICAgICB0cnkgewogICAgICAgICAgICAvL0ZJWE1FIGp0aG9tYXMgRmV0Y2hQ\nbGFuLkxPQ0tfTk9ORT8/CiAgICAgICAgICAgIC8vKChGZXRjaFBsYW4pIGVt\nLmdldEZldGNoUGxhbigpKS5zZXRSZWFkTG9ja0xldmVsCiAgICAgICAgICAg\nIC8vICAgIChGZXRjaFBsYW4uTE9DS19OT05FKTsKCiAgICAgICAgICAgIHNx\nbC5jbGVhcigpOwogICAgICAgICAgICBFbWJlZGRlZE93bmVyUEMgcGMgPSAo\nRW1iZWRkZWRPd25lclBDKSBlbS5nZXRPYmplY3RJZChvaWQpOwogICAgICAg\nICAgICBDb21wbGV4RW1iZWRkZWRQQyBjb21wbGV4ID0gcGMuZ2V0Q29tcGxl\neEVtYmVkZGVkKCk7CiAgICAgICAgICAgIEVtYmVkZGVkUEMgZW1iZWRkZWQg\nPSBjb21wbGV4LmdldEVtYmVkZGVkKCk7CgogICAgICAgICAgICBhc3NlcnRO\ndWxsKGdldFN0YXRlTWFuYWdlcihwYywgZW0pLmdldExvY2soKSk7CiAgICAg\nICAgICAgIGFzc2VydE51bGwoZ2V0U3RhdGVNYW5hZ2VyKGNvbXBsZXgsIGVt\nKS5nZXRMb2NrKCkpOwogICAgICAgICAgICBhc3NlcnROdWxsKGdldFN0YXRl\nTWFuYWdlcihlbWJlZGRlZCwgZW0pLmdldExvY2soKSk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscygxLCBzcWwuc2l6ZSgpKTsKICAgICAgICAgICAgc3Fs\nLmNsZWFyKCk7CgogICAgICAgICAgICBlbWJlZGRlZC5zZXRTdHJpbmdGaWVs\nZChlbWJlZGRlZC5nZXRTdHJpbmdGaWVsZCgpICsgImJhciIpOwogICAgICAg\nICAgICAvLyBzaG91bGQgbm90IGdvIHRvIHRoZSBkYiBmb3IgYW5vdGhlciBs\nb2NrIC0tIHNob3VsZCBoYXZlIGdvdHRlbgogICAgICAgICAgICAvLyBvbmUg\nYWxvbmcgd2l0aCB0aGUgZW1iZWRkZWQgZmllbGQncyBsb2NrCiAgICAgICAg\nICAgIGFzc2VydFRydWUoc3FsLnNpemUoKSA8PSAxKTsKICAgICAgICAgICAg\nYXNzZXJ0Tm90TnVsbChnZXRTdGF0ZU1hbmFnZXIocGMsIGVtKS5nZXRMb2Nr\nKCkpOwoKICAgICAgICAgICAgLy8gZW1iZWRkZWRzIGRvbid0IGdldCBsb2Nr\ncyBhdCBhbGwuCiAgICAgICAgICAgIGFzc2VydE51bGwoZ2V0U3RhdGVNYW5h\nZ2VyKGNvbXBsZXgsIGVtKS5nZXRMb2NrKCkpOwogICAgICAgICAgICBhc3Nl\ncnROdWxsKGdldFN0YXRlTWFuYWdlcihlbWJlZGRlZCwgZW0pLmdldExvY2so\nKSk7CgogICAgICAgICAgICAvLyBvd25lciBpcyBkaXJ0aWVkIHdoZW4gZW1i\nZWRkZWQgcmVjb3JkIGlzIGNoYW5nZWQKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZShnZXRTdGF0ZU1hbmFnZXIocGMsIGVtKS5pc0RpcnR5KCkpOwogICAgICAg\nICAgICBhc3NlcnRUcnVlKGdldFN0YXRlTWFuYWdlcihjb21wbGV4LCBlbSku\naXNEaXJ0eSgpKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShnZXRTdGF0ZU1h\nbmFnZXIoZW1iZWRkZWQsIGVtKS5pc0RpcnR5KCkpOwoKICAgICAgICAgICAg\nY29tcGxleC5zZXRTdHJpbmdGaWVsZChjb21wbGV4LmdldFN0cmluZ0ZpZWxk\nKCkgKyAiYmFyIik7CiAgICAgICAgICAgIC8vIHNob3VsZCBub3QgZ28gdG8g\ndGhlIGRiIGZvciBhbm90aGVyIGxvY2suCiAgICAgICAgICAgIGFzc2VydFRy\ndWUoc3FsLnNpemUoKSA8PSAxKTsKCiAgICAgICAgICAgIHBjLnNldFN0cmlu\nZ0ZpZWxkKHBjLmdldFN0cmluZ0ZpZWxkKCkgKyAiYmFyIik7CiAgICAgICAg\nICAgIC8vIHNob3VsZCBub3QgZ28gdG8gdGhlIGRiIGZvciBhbm90aGVyIGxv\nY2suCiAgICAgICAgICAgIGFzc2VydFRydWUoc3FsLnNpemUoKSA8PSAxKTsK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICByb2xsYmFja1R4KGVt\nKTsKICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgoJ\ncHJpdmF0ZSBNYXAgZ2V0UHJvcHMoKSB7CgkJTWFwIHByb3BzPW5ldyBIYXNo\nTWFwKCk7CgkJcHJvcHMucHV0KCJvcGVuanBhLkRhdGFDYWNoZSIsICJ0cnVl\nIik7CgkJcHJvcHMucHV0KCJvcGVuanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVy\nIiwgInNqdm0iKTsKCQlwcm9wcy5wdXQoIm9wZW5qcGEuRmx1c2hCZWZvcmVR\ndWVyaWVzIiwgInRydWUiKTsKCQlwcm9wcy5wdXQoImphdmF4Lmpkby5vcHRp\nb24uSWdub3JlQ2FjaGUiLCAiZmFsc2UiKTsKCQkvL3Byb3BzTWFwLnB1dCgi\nb3BlbmpwYS5Ccm9rZXJJbXBsIiwgImtvZG8uZGF0YWNhY2hlLkNhY2hlVGVz\ndEJyb2tlciIpOy8vQ2FjaGVUZXN0QnJva2VyLmNsYXNzLmdldE5hbWUgKCkp\nOwoJCXJldHVybiBwcm9wczsKCX0KCgp9Cg==\n","encoding":"base64"}

