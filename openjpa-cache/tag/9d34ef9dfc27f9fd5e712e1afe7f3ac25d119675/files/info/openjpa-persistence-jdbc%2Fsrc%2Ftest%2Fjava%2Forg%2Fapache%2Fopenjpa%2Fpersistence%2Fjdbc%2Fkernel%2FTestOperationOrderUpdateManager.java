{"sha":"a62a7c67718ddefa5961f2343605c64b11bfab45","node_id":"MDQ6QmxvYjIwNjM2NDphNjJhN2M2NzcxOGRkZWZhNTk2MWYyMzQzNjA1YzY0YjExYmZhYjQ1","size":9523,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a62a7c67718ddefa5961f2343605c64b11bfab45","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5r\nZXJuZWw7CgoKCmltcG9ydCBqYXZhLnV0aWwuKjsKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5jb21tb24uYXBwcy4qOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51\ndGlscy4qOwoKaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0aW9uLkFubm90YXRp\nb247CmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuKjsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5FbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeTsKCgpwdWJsaWMgY2xhc3MgVGVzdE9wZXJhdGlv\nbk9yZGVyVXBkYXRlTWFuYWdlcgogICAgZXh0ZW5kcyBBYnN0cmFjdFRlc3RD\nYXNlIHsKCgovLwlwcml2YXRlIGJvb2xlYW4gID0gdHJ1ZTsvL0Jvb2xlYW4u\ndmFsdWVPZihib29sKTsKCgogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBf\nbWFwcGVkID0gZmFsc2U7CgogICAgcHJpdmF0ZSBFbnRpdHlNYW5hZ2VyRmFj\ndG9yeSBlbWY7CgogICAgLypwcm90ZWN0ZWQgYm9vbGVhbiBza2lwVGVzdCgp\nIHsKICAgICAgICBpZiAoIWdldE5hbWUoKS5zdGFydHNXaXRoKCJ0ZXN0QXV0\nbyIpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgoJCWVtZiA9IGdldEVt\nZigpOwoKCQlKREJDQ29uZmlndXJhdGlvbiBjb25mID0gKEpEQkNDb25maWd1\ncmF0aW9uKSAoKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkgT3Bl\nbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW1mKSkuZ2V0Q29uZmlndXJhdGlvbigp\nOwogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gY29uZi5nZXREQkRpY3Rp\nb25hcnlJbnN0YW5jZSgpOwogICAgICAgIHJldHVybiAhZGljdC5zdXBwb3J0\nc0F1dG9Bc3NpZ247CiAgICB9CiovCiAgICBwdWJsaWMgVGVzdE9wZXJhdGlv\nbk9yZGVyVXBkYXRlTWFuYWdlcihTdHJpbmcgbmFtZSkKICAgIHsKICAgIAlz\ndXBlcihuYW1lKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgaW5zZXJ0VGVz\ndChib29sZWFuIGF1dG9Bc3NpZ24pIHsKICAgICAgICBPcE9yZGVyIG9pZCA9\nIChhdXRvQXNzaWduKSA/IGluc2VydEF1dG9Bc3NpZ24oKSA6IGluc2VydCgp\nOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsKCiAgICAgICAgT3BPcmRlciBwYyA9IChPcE9yZGVyKSBlbS5m\naW5kKE9wT3JkZXIuY2xhc3Msb2lkLmdldElkKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygicGMiLCBwYy5nZXRTZWNvbmRhcnkoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJwY3N1YiIsIHBjLmdldFN1YigpKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKHBjLmdldFJlbCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nInJlbCIsIHBjLmdldFJlbCgpLmdldFNlY29uZGFyeSgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgcGMuZ2V0UmVsTGlzdCgpLnNpemUoKSk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZSgoKE9wT3JkZXIpIHBjLmdldFJlbExpc3QoKS5pdGVy\nYXRvcigpLm5leHQoKSkuCiAgICAgICAgICAgIGdldFNlY29uZGFyeSgpLnN0\nYXJ0c1dpdGgoImNoaWxkIikpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBw\nYy5nZXRNYXBwZWRSZWxMaXN0KCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRU\ncnVlKCgoT3BPcmRlcikgcGMuZ2V0TWFwcGVkUmVsTGlzdCgpLml0ZXJhdG9y\nKCkubmV4dCgpKS4KICAgICAgICAgICAgZ2V0U2Vjb25kYXJ5KCkuc3RhcnRz\nV2l0aCgibWFwcGVkIikpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5n\nZXRJbnZlcnNlS2V5UmVsTGlzdCgpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0\nVHJ1ZSgoKE9wT3JkZXIpIHBjLmdldEludmVyc2VLZXlSZWxMaXN0KCkuaXRl\ncmF0b3IoKS4KICAgICAgICAgICAgbmV4dCgpKS5nZXRTZWNvbmRhcnkoKS5z\ndGFydHNXaXRoKCJpbnZlcnNlIikpOwogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgoKCiAgICBwcml2YXRlIE9wT3JkZXIgaW5zZXJ0KCkgewogICAgICAg\nIE9wT3JkZXJQQ1N1YiBwYyA9IG5ldyBPcE9yZGVyUENTdWIoKTsKICAgICAg\nICBwYy5zZXRTZWNvbmRhcnkoInBjIik7CiAgICAgICAgcGMuc2V0U3ViKCJw\nY3N1YiIpOwogICAgICAgIE9wT3JkZXJQQ1N1YiByZWwgPSBuZXcgT3BPcmRl\nclBDU3ViKCk7CiAgICAgICAgcmVsLnNldFNlY29uZGFyeSgicmVsIik7CiAg\nICAgICAgcGMuc2V0UmVsKHJlbCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCAyOyBpKyspIHsKICAgICAgICAgICAgT3BPcmRlclBDU3ViIGNoaWxk\nID0gbmV3IE9wT3JkZXJQQ1N1YigpOwogICAgICAgICAgICBjaGlsZC5zZXRT\nZWNvbmRhcnkoImNoaWxkIiArIGkpOwogICAgICAgICAgICBwYy5nZXRSZWxM\naXN0KCkuYWRkKGNoaWxkKTsKCiAgICAgICAgICAgIE9wT3JkZXJQQ1N1YiBt\nYXBwZWQgPSBuZXcgT3BPcmRlclBDU3ViKCk7CiAgICAgICAgICAgIG1hcHBl\nZC5zZXRTZWNvbmRhcnkoIm1hcHBlZCIgKyBpKTsKICAgICAgICAgICAgbWFw\ncGVkLnNldE93bmVyKHBjKTsKICAgICAgICAgICAgcGMuZ2V0TWFwcGVkUmVs\nTGlzdCgpLmFkZChtYXBwZWQpOwoKICAgICAgICAgICAgT3BPcmRlclBDU3Vi\nIGludmVyc2UgPSBuZXcgT3BPcmRlclBDU3ViKCk7CiAgICAgICAgICAgIGlu\ndmVyc2Uuc2V0U2Vjb25kYXJ5KCJpbnZlcnNlIiArIGkpOwogICAgICAgICAg\nICBwYy5nZXRJbnZlcnNlS2V5UmVsTGlzdCgpLmFkZChpbnZlcnNlKTsKICAg\nICAgICB9CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50\naXR5TWFuYWdlcigpOwoJCXN0YXJ0VHgoZW0pOwogICAgICAgIGVtLnBlcnNp\nc3QocmVsKTsKICAgICAgICBwZXJzaXN0QWxsKGVtLHBjLmdldEludmVyc2VL\nZXlSZWxMaXN0KCkpOwogICAgICAgIGVtLnBlcnNpc3QocGMpOwogICAgICAg\nIGVuZFR4KGVtKTsKICAgICAgICBPcE9yZGVyIG9pZCA9IGVtLmZpbmQoT3BP\ncmRlci5jbGFzcyxwYy5nZXRJZCgpKTsKICAgICAgICAvL2VtLmdldE9iamVj\ndElkKHBjKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIHJldHVybiBv\naWQ7CiAgICB9CgogICAgcHJpdmF0ZSBPcE9yZGVyIGluc2VydEF1dG9Bc3Np\nZ24oKSB7CiAgICAgICAgQXV0b0luY3JlbWVudE9wT3JkZXJQQ1N1YiBwYyA9\nIG5ldyBBdXRvSW5jcmVtZW50T3BPcmRlclBDU3ViKCk7CiAgICAgICAgcGMu\nc2V0U2Vjb25kYXJ5KCJwYyIpOwogICAgICAgIHBjLnNldFN1YigicGNzdWIi\nKTsKICAgICAgICBBdXRvSW5jcmVtZW50T3BPcmRlclBDU3ViIHJlbCA9IG5l\ndyBBdXRvSW5jcmVtZW50T3BPcmRlclBDU3ViKCk7CiAgICAgICAgcmVsLnNl\ndFNlY29uZGFyeSgicmVsIik7CiAgICAgICAgcGMuc2V0UmVsKHJlbCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAgICAg\nICAgQXV0b0luY3JlbWVudE9wT3JkZXJQQ1N1YiBjaGlsZCA9IG5ldyBBdXRv\nSW5jcmVtZW50T3BPcmRlclBDU3ViKCk7CiAgICAgICAgICAgIGNoaWxkLnNl\ndFNlY29uZGFyeSgiY2hpbGQiICsgaSk7CiAgICAgICAgICAgIHBjLmdldFJl\nbExpc3QoKS5hZGQoY2hpbGQpOwoKICAgICAgICAgICAgQXV0b0luY3JlbWVu\ndE9wT3JkZXJQQ1N1YiBtYXBwZWQgPSBuZXcgQXV0b0luY3JlbWVudE9wT3Jk\nZXJQQ1N1YigpOwogICAgICAgICAgICBtYXBwZWQuc2V0U2Vjb25kYXJ5KCJt\nYXBwZWQiICsgaSk7CiAgICAgICAgICAgIG1hcHBlZC5zZXRPd25lcihwYyk7\nCiAgICAgICAgICAgIHBjLmdldE1hcHBlZFJlbExpc3QoKS5hZGQobWFwcGVk\nKTsKCiAgICAgICAgICAgIEF1dG9JbmNyZW1lbnRPcE9yZGVyUENTdWIgaW52\nZXJzZSA9IG5ldyBBdXRvSW5jcmVtZW50T3BPcmRlclBDU3ViKCk7CiAgICAg\nICAgICAgIGludmVyc2Uuc2V0U2Vjb25kYXJ5KCJpbnZlcnNlIiArIGkpOwog\nICAgICAgICAgICBwYy5nZXRJbnZlcnNlS2V5UmVsTGlzdCgpLmFkZChpbnZl\ncnNlKTsKICAgICAgICB9CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBj\ndXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgoZW0pOwog\nICAgICAgIGVtLnBlcnNpc3QocmVsKTsKICAgICAgICBwZXJzaXN0QWxsKGVt\nLHBjLmdldEludmVyc2VLZXlSZWxMaXN0KCkpOwogICAgICAgIGVtLnBlcnNp\nc3QocGMpOwogICAgICAgIGVuZFR4KGVtKTsKICAgICAgICBPcE9yZGVyIG9p\nZCA9IGVtLmZpbmQoQXV0b0luY3JlbWVudE9wT3JkZXJQQ1N1Yi5jbGFzcyxw\nYy5nZXRJZCgpKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIHJldHVy\nbiBvaWQ7CiAgICB9CgoKICAgIHByaXZhdGUgdm9pZCBpbnNlcnRDaXJjdWxh\nckNvbnN0cmFpbnRUZXN0KGJvb2xlYW4gYXV0b0Fzc2lnbikgewogICAgICAg\nIE9wT3JkZXIgb2lkID0gKGF1dG9Bc3NpZ24pID8gaW5zZXJ0Q2lyY3VsYXJB\ndXRvQXNzaWduKCkKICAgICAgICAgICAgOiBpbnNlcnRDaXJjdWxhcigpOwoK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBPcE9yZGVyIHBjMSA9IChPcE9yZGVyKSBlbS5maW5k\nKE9wT3JkZXIuY2xhc3Msb2lkLmdldElkKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscygicGMxIiwgcGMxLmdldFNlY29uZGFyeSgpKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKHBjMS5nZXRSZWwoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJwYzIiLCBwYzEuZ2V0UmVsKCkuZ2V0U2Vjb25kYXJ5KCkpOwogICAgICAg\nIGFzc2VydE5vdE51bGwocGMxLmdldFJlbCgpLmdldFJlbCgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMocGMxLCBwYzEuZ2V0UmVsKCkuZ2V0UmVsKCkpOwog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0ZSBPcE9yZGVy\nIGluc2VydENpcmN1bGFyKCkgewogICAgICAgIE9wT3JkZXJQQ1N1YiBwYzEg\nPSBuZXcgT3BPcmRlclBDU3ViKCk7CiAgICAgICAgcGMxLnNldFNlY29uZGFy\neSgicGMxIik7CiAgICAgICAgcGMxLnNldFN1YigicGNzdWIiKTsKICAgICAg\nICBPcE9yZGVyUENTdWIgcGMyID0gbmV3IE9wT3JkZXJQQ1N1YigpOwogICAg\nICAgIHBjMi5zZXRTZWNvbmRhcnkoInBjMiIpOwogICAgICAgIHBjMS5zZXRS\nZWwocGMyKTsKICAgICAgICBwYzIuc2V0UmVsKHBjMSk7CgogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAg\nICAgIHN0YXJ0VHgoZW0pOwogICAgICAgIGVtLnBlcnNpc3QocGMxKTsKICAg\nICAgICBlbS5wZXJzaXN0KHBjMik7CiAgICAgICAgZW5kVHgoZW0pOwogICAg\nICAgIE9wT3JkZXIgb2lkID0gZW0uZmluZChPcE9yZGVyLmNsYXNzLHBjMS5n\nZXRJZCgpKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIHJldHVybiBv\naWQ7CiAgICB9CgogICAgcHJpdmF0ZSBPcE9yZGVyIGluc2VydENpcmN1bGFy\nQXV0b0Fzc2lnbigpIHsKICAgICAgICBBdXRvSW5jcmVtZW50T3BPcmRlclBD\nU3ViIHBjMSA9IG5ldyBBdXRvSW5jcmVtZW50T3BPcmRlclBDU3ViKCk7CiAg\nICAgICAgcGMxLnNldFNlY29uZGFyeSgicGMxIik7CiAgICAgICAgcGMxLnNl\ndFN1YigicGNzdWIiKTsKICAgICAgICBBdXRvSW5jcmVtZW50T3BPcmRlclBD\nU3ViIHBjMiA9IG5ldyBBdXRvSW5jcmVtZW50T3BPcmRlclBDU3ViKCk7CiAg\nICAgICAgcGMyLnNldFNlY29uZGFyeSgicGMyIik7CiAgICAgICAgcGMxLnNl\ndFJlbChwYzIpOwogICAgICAgIHBjMi5zZXRSZWwocGMxKTsKCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgc3RhcnRUeChlbSk7CiAgICAgICAgZW0ucGVyc2lzdChwYzEpOwog\nICAgICAgIGVtLnBlcnNpc3QocGMyKTsKICAgICAgICBlbmRUeChlbSk7CiAg\nICAgICAgT3BPcmRlciBvaWQgPSBlbS5maW5kKE9wT3JkZXIuY2xhc3MscGMx\nLmdldElkKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgcmV0dXJu\nIG9pZDsKICAgIH0KCgogICAgcHJpdmF0ZSB2b2lkIGRlbGV0ZUNpcmN1bGFy\nVGVzdChib29sZWFuIGF1dG9Bc3NpZ24pIHsKICAgICAgICBPcE9yZGVyIG9p\nZCA9IChhdXRvQXNzaWduKSA/IGluc2VydENpcmN1bGFyQXV0b0Fzc2lnbigp\nCiAgICAgICAgICAgIDogaW5zZXJ0Q2lyY3VsYXIoKTsKCiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgc3RhcnRUeChlbSk7CiAgICAgICAgT3BPcmRlciBwYzEgPSAoT3BPcmRl\ncikgZW0uZmluZChPcE9yZGVyLmNsYXNzLG9pZC5nZXRJZCgpKTsKICAgICAg\nICBlbS5yZW1vdmUocGMxLmdldFJlbCgpKTsKICAgICAgICBlbS5yZW1vdmUo\ncGMxKTsKICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nCi8qICAgICAgICBwbSA9IF9wbWYuZ2V0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7\nCiAgICAgICAgaWYgKGF1dG9Bc3NpZ24pCiAgICAgICAgICAgIGFzc2VydEVx\ndWFscygwLCAoKEtvZG9FeHRlbnQpIHBtLmdldEV4dGVudAogICAgICAgICAg\nICAgICAgKEF1dG9JbmNyZW1lbnRPcE9yZGVyUENTdWIuY2xhc3MsIHRydWUp\nKS5saXN0KCkuc2l6ZSgpKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGFz\nc2VydEVxdWFscygwLCAoKEtvZG9FeHRlbnQpIHBtLmdldEV4dGVudChPcE9y\nZGVyUEMuY2xhc3MsCiAgICAgICAgICAgICAgICB0cnVlKSkubGlzdCgpLnNp\nemUoKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKKi8KICAgIH0KCiAgICBwcml2\nYXRlIHZvaWQgZGVsZXRlVGVzdChib29sZWFuIGF1dG9Bc3NpZ24pIHsKICAg\nICAgICBPcE9yZGVyIG9pZCA9IChhdXRvQXNzaWduKSA/IGluc2VydEF1dG9B\nc3NpZ24oKSA6IGluc2VydCgpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGVt\nKTsKICAgICAgICBPcE9yZGVyIHBjID0gKE9wT3JkZXIpIGVtLmZpbmQoT3BP\ncmRlci5jbGFzcyxvaWQuZ2V0SWQoKSk7CiAgICAgICAgcmVtb3ZlQWxsKGVt\nLHBjLmdldE1hcHBlZFJlbExpc3QoKSk7CiAgICAgICAgcmVtb3ZlQWxsKGVt\nLHBjLmdldEludmVyc2VLZXlSZWxMaXN0KCkpOwogICAgICAgIHJlbW92ZUFs\nbChlbSxwYy5nZXRSZWxMaXN0KCkpOwogICAgICAgIGVtLnJlbW92ZShwYy5n\nZXRSZWwoKSk7CiAgICAgICAgZW0ucmVtb3ZlKHBjKTsKICAgICAgICBlbmRU\neChlbSk7CiAgICAgICAgZW0uY2xvc2UoKTsKLyoKICAgICAgICBwbSA9IF9w\nbWYuZ2V0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7CiAgICAgICAgaWYgKGF1dG9B\nc3NpZ24pCiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCAoKEtvZG9FeHRl\nbnQpIHBtLmdldEV4dGVudAogICAgICAgICAgICAgICAgKEF1dG9JbmNyZW1l\nbnRPcE9yZGVyUENTdWIuY2xhc3MsIHRydWUpKS5saXN0KCkuc2l6ZSgpKTsK\nICAgICAgICBlbHNlCiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCAoKEtv\nZG9FeHRlbnQpIHBtLmdldEV4dGVudChPcE9yZGVyUEMuY2xhc3MsCiAgICAg\nICAgICAgICAgICB0cnVlKSkubGlzdCgpLnNpemUoKSk7CiAgICAgICAgcG0u\nY2xvc2UoKTsKKi8KICAgIH0KCgogICAgcHVibGljIHZvaWQgdGVzdEluc2Vy\ndCgpIHsKICAgICAgICBpbnNlcnRUZXN0KGZhbHNlKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0QXV0b0Fzc2lnbkluc2VydCgpIHsKICAgICAgICBp\nbnNlcnRUZXN0KHRydWUpOwogICAgfQoKCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRGVsZXRlQ2lyY3VsYXIoKSB7CiAgICAgICAgZGVsZXRlQ2lyY3VsYXJUZXN0\nKGZhbHNlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0QXV0b0Fzc2ln\nbkRlbGV0ZUNpcmN1bGFyKCkgewogICAgICAgIGRlbGV0ZUNpcmN1bGFyVGVz\ndCh0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlKCkg\newogICAgICAgIGRlbGV0ZVRlc3QoZmFsc2UpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RBdXRvQXNzaWduRGVsZXRlKCkgewogICAgICAgIGRlbGV0\nZVRlc3QodHJ1ZSk7CiAgICB9CgoKICAgIHB1YmxpYyB2b2lkIHRlc3RJbnNl\ncnRDaXJjdWxhckNvbnN0cmFpbnQoKSB7CiAgICAgICAgaW5zZXJ0Q2lyY3Vs\nYXJDb25zdHJhaW50VGVzdChmYWxzZSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEF1dG9Bc3NpZ25JbnNlcnRDaXJjdWxhckNvbnN0cmFpbnQoKSB7\nCiAgICAgICAgaW5zZXJ0Q2lyY3VsYXJDb25zdHJhaW50VGVzdCh0cnVlKTsK\nICAgIH0KCgoKICAgIHByaXZhdGUgdm9pZCBwZXJzaXN0QWxsKEVudGl0eU1h\nbmFnZXIgZW0sIExpc3QgbGlzdCkgewoKCQlJdGVyYXRvciBpID0gbGlzdC5p\ndGVyYXRvcigpOwoJCXdoaWxlKGkuaGFzTmV4dCgpKSB7CgkJCU9iamVjdCBv\nID0gaS5uZXh0KCk7CgkJCWVtLnBlcnNpc3Qobyk7CgkJfQoJfQoKCglwcml2\nYXRlIHZvaWQgcmVtb3ZlQWxsKEVudGl0eU1hbmFnZXIgZW0sIExpc3QgbGlz\ndCkgewoKCQlJdGVyYXRvciBpID0gbGlzdC5pdGVyYXRvcigpOwoJCXdoaWxl\nKGkuaGFzTmV4dCgpKSB7CgkJCU9iamVjdCBvID0gaS5uZXh0KCk7CgkJCWVt\nLnJlbW92ZShvKTsKCQl9Cgl9CgoKCgoKCgp9Cg==\n","encoding":"base64"}

