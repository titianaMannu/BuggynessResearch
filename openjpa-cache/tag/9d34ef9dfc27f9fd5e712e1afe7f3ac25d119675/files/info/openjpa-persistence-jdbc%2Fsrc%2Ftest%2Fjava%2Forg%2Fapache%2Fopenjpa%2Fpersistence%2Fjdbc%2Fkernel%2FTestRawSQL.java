{"sha":"ef66634821d7e41c2b10f2700377fe28d451a60b","node_id":"MDQ6QmxvYjIwNjM2NDplZjY2NjM0ODIxZDdlNDFjMmIxMGYyNzAwMzc3ZmUyOGQ0NTFhNjBi","size":5939,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ef66634821d7e41c2b10f2700377fe28d451a60b","content":"Ci8qCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUu\nb3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJl\nZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywK\nICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMg\nZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBX\nQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhl\nciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAKICov\nCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMu\na2VybmVsOwoKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuamRiYy5jb21tb24uYXBwcy4qOwoKCmltcG9ydCBqYXZhLmxhbmcuYW5u\nb3RhdGlvbi5Bbm5vdGF0aW9uOwppbXBvcnQganVuaXQuZnJhbWV3b3JrLio7\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlckZhY3Rvcnk7Cgpp\nbXBvcnQgamF2YS5zcWwuKjsKaW1wb3J0IGphdmEudXRpbC4qOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNl\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkpQQUZh\nY2FkZUhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtl\ncm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuUmVzdWx0U2V0UmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5yb3AuUmVzdWx0T2JqZWN0UHJvdmlkZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuR2VuZXJpY1Jlc3VsdE9iamVj\ndFByb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5yb3Au\nUmVzdWx0TGlzdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIucm9w\nLkVhZ2VyUmVzdWx0TGlzdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIucm9wLlJlc3VsdE9iamVjdFByb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmtlcm5lbC5BYnN0cmFjdFBDUmVzdWx0T2JqZWN0UHJvdmlk\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFE\nYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBB\nU3RhdGVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5GZXRjaENvbmZpZ3VyYXRpb247Ci8qKgogKgogKi8KCgpwdWJsaWMgY2xh\nc3MgVGVzdFJhd1NRTCBleHRlbmRzIEJhc2VKREJDVGVzdCB7CiAgICAKICAg\nIC8qKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIFRlc3RSYXdTUUwgKi8K\nICAgIHByaXZhdGUgT2JqZWN0W10gX29pZHMgPSBuZXcgT2JqZWN0WzNdOwog\nICAgcHJpdmF0ZSBTdHJpbmdbXSBfc3RyaW5ncyA9IG5ldyBTdHJpbmdbXXsg\nImEiLCAiYiIsICJjIiB9OwogICAgcHJpdmF0ZSBpbnRbXSBfaW50cyA9IG5l\ndyBpbnRbXXsgMSwgMiwgMyB9OwoKICAgIHB1YmxpYyBUZXN0UmF3U1FMKFN0\ncmluZyB0ZXN0KSB7CiAgICAgICAgc3VwZXIodGVzdCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICBkZWxldGVBbGwoUmF3U1FM\nLmNsYXNzKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBCcm9rZXIgYnJva2VyID0gSlBBRmFj\nYWRlSGVscGVyLnRvQnJva2VyKGVtKTsKCiAgICAgICAgYnJva2VyLmJlZ2lu\nKCk7CiAgICAgICAgUmF3U1FMIHJhdzsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IF9vaWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHJhdyA9\nIG5ldyBSYXdTUUwoX3N0cmluZ3NbaV0sIF9pbnRzW2ldKTsKICAgICAgICAg\nICAgYnJva2VyLnBlcnNpc3QocmF3LCBudWxsKTsKICAgICAgICAgICAgX29p\nZHNbaV0gPSBicm9rZXIuZ2V0VXNlck9iamVjdChyYXcpOwogICAgICAgIH0K\nICAgICAgICBicm9rZXIuY29tbWl0KCk7CiAgICAgICAgYnJva2VyLmNsb3Nl\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0TG9hZFdpdGhSZXN1bHQoKQogICAgICAgIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIAogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJy\nZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIEJyb2tlciBicm9rZXIgPSBK\nUEFGYWNhZGVIZWxwZXIudG9Ccm9rZXIoZW0pOwogICAgICAgCiAgICAgICAg\nSkRCQ1N0b3JlIHN0b3JlID0gKEpEQkNTdG9yZSlicm9rZXIuZ2V0U3RvcmVN\nYW5hZ2VyKCk7CgogICAgICAgIENvbm5lY3Rpb24gY29ubiA9IHN0b3JlLmdl\ndENvbm5lY3Rpb24oKTsKICAgICAgICBTdGF0ZW1lbnQgc3RtbnQgPSBjb25u\nLmNyZWF0ZVN0YXRlbWVudCgpOwogICAgICAgIFJlc3VsdFNldCBycyA9IHN0\nbW50LmV4ZWN1dGVRdWVyeSgiU0VMRUNUICogRlJPTSBSQVdTUUwgIgogICAg\nICAgICsgIk9SREVSIEJZIElOVEZJRUxEIik7CiAgICAgICAgUmVzdWx0U2V0\nUmVzdWx0IHJlcyA9IG5ldyBSZXN1bHRTZXRSZXN1bHQocnMsCiAgICAgICAg\nc3RvcmUuZ2V0Q29uZmlndXJhdGlvbigpLmdldERCRGljdGlvbmFyeUluc3Rh\nbmNlKCkpOwogICAgICAgIFJlc3VsdE9iamVjdFByb3ZpZGVyIHJvcCA9IG5l\ndyBHZW5lcmljUmVzdWx0T2JqZWN0UHJvdmlkZXIKICAgICAgICAoUmF3U1FM\nLmNsYXNzLCBzdG9yZSwgbnVsbCwgcmVzKTsKICAgICAgICBSZXN1bHRMaXN0\nIHJsID0gbmV3IEVhZ2VyUmVzdWx0TGlzdChyb3ApOwogICAgICAgIGNoZWNr\nKHJsLCBicm9rZXIpOwogICAgICAgIHJsLmNsb3NlKCk7CiAgICAgICAgYnJv\na2VyLmNsb3NlKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAg\nICAgcHVibGljIHZvaWQgdGVzdExvYWRXaXRoUENST1AoKQogICAgICAgIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgICAgICAKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsgICAgCiAgICAg\nICAgQnJva2VyIGJyb2tlciA9IEpQQUZhY2FkZUhlbHBlci50b0Jyb2tlcihl\nbSk7CiAgICAgICAgUmVzdWx0T2JqZWN0UHJvdmlkZXIgcm9wID0gbmV3IEFi\nc3RyYWN0UENSZXN1bHRPYmplY3RQcm92aWRlcihicm9rZXIpIHsKICAgICAg\nICAgICAgcHJpdmF0ZSBpbnQgX3JvdyA9IC0xOwoKICAgICAgICAgICAgcHVi\nbGljIGJvb2xlYW4gc3VwcG9ydHNSYW5kb21BY2Nlc3MoKSB7CiAgICAgICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgcHVibGljIGJvb2xlYW4gbmV4dCgpIHsKICAgICAgICAgICAgICAgIHJl\ndHVybiArK19yb3cgPCBfb2lkcy5sZW5ndGg7CiAgICAgICAgICAgIH0KCiAg\nICAgICAgICAgIHB1YmxpYyBib29sZWFuIGFic29sdXRlKGludCBwb3MpIHsK\nICAgICAgICAgICAgICAgIF9yb3cgPSBwb3M7CiAgICAgICAgICAgICAgICBy\nZXR1cm4gX3JvdyA8IF9vaWRzLmxlbmd0aDsKICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgcHVibGljIGludCBzaXplKCkgewogICAgICAgICAgICAgICAg\ncmV0dXJuIF9vaWRzLmxlbmd0aDsKICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIGhhbmRsZUNoZWNrZWRFeGNlcHRpb24oRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1l\nRXhjZXB0aW9uKGUudG9TdHJpbmcoKSk7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIHByb3RlY3RlZCBPYmplY3QgZ2V0T2JqZWN0SWQoQ2xhc3NNZXRh\nRGF0YSBtZXRhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX29pZHNbX3Jv\nd107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHByb3RlY3RlZCBDbGFz\ncyBnZXRQQ1R5cGUoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUmF3U1FM\nLmNsYXNzOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwcm90ZWN0ZWQg\ndm9pZCBsb2FkKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIAogICAgICAgICAg\nICAgICAgRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAgICAgICAg\nICAgICBDbGFzc01ldGFEYXRhIG1ldGEgPSBzbS5nZXRNZXRhRGF0YSgpOwog\nICAgICAgICAgICAgICAgc20uc3RvcmVTdHJpbmdGaWVsZChtZXRhLmdldEZp\nZWxkKCJzdHJpbmdGaWVsZCIpLmdldEluZGV4KCksCiAgICAgICAgICAgICAg\nICAgICAgX3N0cmluZ3NbX3Jvd10pOwogICAgICAgICAgICAgICAgc20uc3Rv\ncmVJbnRGaWVsZChtZXRhLmdldEZpZWxkKCJpbnRGaWVsZCIpLmdldEluZGV4\nKCksCiAgICAgICAgICAgICAgICAgICAgX2ludHNbX3Jvd10pOwoKICAgICAg\nICAgICAgICAgIC8vIG5vdGUgdGhhdCB3ZSdyZSBub3QgbG9hZGluZyB2ZXJz\naW9uIGluZm8gaGVyZSwgc28gdGhlIHN5c3RlbQogICAgICAgICAgICAgICAg\nLy8gd2lsbCBnbyBvdXQgYW5kIGdldCBpdCBhZnRlciB0aGlzIGludGlhbCBs\nb2FkOyBraW5kYSBuZWF0CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAg\nICAgIFJlc3VsdExpc3QgcmwgPSBuZXcgRWFnZXJSZXN1bHRMaXN0KHJvcCk7\nCiAgICAgICAgY2hlY2socmwsIGJyb2tlcik7CiAgICAgICAgcmwuY2xvc2Uo\nKTsKICAgICAgICBicm9rZXIuY2xvc2UoKTsKICAgIH0KCiAgICAKICAgIAog\nICAgcHJpdmF0ZSB2b2lkIGNoZWNrKFJlc3VsdExpc3QgcmwsIEJyb2tlciBi\ncm9rZXIpIHsKICAgICAgICBSYXdTUUwgcmF3OwogICAgICAgIGludCBpID0g\nMDsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IHJsLml0ZXJhdG9yKCk7\nIGl0ci5oYXNOZXh0KCk7IGkrKykgewogICAgICAgICAgICByYXcgPSAoUmF3\nU1FMKSBpdHIubmV4dCgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGJyb2tl\nci5nZXRTdGF0ZU1hbmFnZXIocmF3KS5nZXRMb2FkZWQoKS5nZXQoMCkpOwog\nICAgICAgICAgICBhc3NlcnRUcnVlKGJyb2tlci5nZXRTdGF0ZU1hbmFnZXIo\ncmF3KS5nZXRMb2FkZWQoKS5nZXQoMSkpOwogICAgICAgICAgICBpZiAoaSA8\nIF9vaWRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKF9zdHJpbmdzW2ldLCByYXcuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAgICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoX2ludHNbaV0sIHJhdy5nZXRJbnRGaWVs\nZCgpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhc3NlcnRF\ncXVhbHMoX29pZHMubGVuZ3RoLCBpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nX29pZHMubGVuZ3RoLCBybC5zaXplKCkpOwogICAgfQogICAgCiAgICAKfQo=\n","encoding":"base64"}

