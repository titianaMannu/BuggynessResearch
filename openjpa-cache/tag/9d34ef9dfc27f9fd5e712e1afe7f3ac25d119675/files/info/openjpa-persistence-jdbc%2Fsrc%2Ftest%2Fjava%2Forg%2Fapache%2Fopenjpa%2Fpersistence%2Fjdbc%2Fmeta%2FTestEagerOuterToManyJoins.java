{"sha":"89814d79e0b35bf69bafed78266dd10efcdace70","node_id":"MDQ6QmxvYjIwNjM2NDo4OTgxNGQ3OWUwYjM1YmY2OWJhZmVkNzgyNjZkZDEwZWZjZGFjZTcw","size":32793,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/89814d79e0b35bf69bafed78266dd10efcdace70","content":"LyoKICogVGVzdEVhZ2VyT3V0ZXJUb01hbnlKb2lucy5qYXZhCiAqCiAqIENy\nZWF0ZWQgb24gT2N0b2JlciAzLCAyMDA2LCAxMDo1MyBBTQogKgogKiBUbyBj\naGFuZ2UgdGhpcyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUg\nTWFuYWdlcgogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRv\nci4KICovCgoKLyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2Fy\nZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRy\naWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZp\nbGUKICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9u\nYWwgaW5mb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNo\naXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5k\nZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJM\naWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGlu\nIGNvbXBsaWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0\nYWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNz\nIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3\ncml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGlj\nZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBX\nSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lO\nRCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5z\nZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJt\naXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2Uu\nICAgIAogKi8KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuamRiYy5tZXRhOwoKaW1wb3J0IGphdmEudXRpbC4qOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25h\ncnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkZldGNoUGxh\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVu\nSlBBUXVlcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmpkYmMuY29tbW9uLmFwcHMuKjsKCgppbXBvcnQgamF2YS5sYW5nLmFu\nbm90YXRpb24uQW5ub3RhdGlvbjsKaW1wb3J0IGp1bml0LmZyYW1ld29yay4q\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmNvbW1vbi5hcHBz\nLkVhZ2VyT3V0ZXJKb2luUEM7CgoKcHVibGljIGNsYXNzIFRlc3RFYWdlck91\ndGVyVG9NYW55Sm9pbnMgZXh0ZW5kcyBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuamRiYy5rZXJuZWwuQmFzZUpEQkNUZXN0ewogICAgCiAgICAv\nKiogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBUZXN0RWFnZXJPdXRlclRv\nTWFueUpvaW5zICovCiAgICBwdWJsaWMgVGVzdEVhZ2VyT3V0ZXJUb01hbnlK\nb2lucyhTdHJpbmcgbmFtZSkgewogICAgCXN1cGVyKG5hbWUpOwogICAgfQog\nICAgCiAgICBwdWJsaWMgYm9vbGVhbiBza2lwVGVzdCgpIHsKICAgICAgICBE\nQkRpY3Rpb25hcnkgZGljdCA9ICgoSkRCQ0NvbmZpZ3VyYXRpb24pIGdldENv\nbmZpZ3VyYXRpb24oKSkuCiAgICAgICAgICAgICAgICBnZXREQkRpY3Rpb25h\ncnlJbnN0YW5jZSgpOwogICAgICAgIHJldHVybiAhZGljdC5zdXBwb3J0c1N1\nYnNlbGVjdDsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7\nCiAgICAgICAgCiAgICAgICBkZWxldGVBbGwoSGVscGVyUEMuY2xhc3MpOwog\nICAgICAgZGVsZXRlQWxsKEVhZ2VyT3V0ZXJKb2luUEMyLmNsYXNzKTsKICAg\nICAgIGRlbGV0ZUFsbChFYWdlck91dGVySm9pblBDLmNsYXNzKTsKICAgIH0K\nICAgIAogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RyaW5nQ29sbGVjdGlv\nbkJ5SWQoKSB7CiAgICAgICAgc3RyaW5nQ29sbGVjdGlvbkJ5SWRUZXN0KGZh\nbHNlKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEVtcHR5U3Ry\naW5nQ29sbGVjdGlvbkJ5SWQoKSB7CiAgICAgICAgc3RyaW5nQ29sbGVjdGlv\nbkJ5SWRUZXN0KHRydWUpOwogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQg\nc3RyaW5nQ29sbGVjdGlvbkJ5SWRUZXN0KGJvb2xlYW4gZW1wdHkpIHsKICAg\nICAgICBPYmplY3Qgb2lkID0gaW5zZXJ0U3RyaW5nQ29sbGVjdGlvbigoZW1w\ndHkpID8gMSA6IDApOwogICAgICAgIAogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBGZXRjaFBsYW4gZmV0Y2ggPSAoRmV0Y2hQ\nbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBmZXRjaC5hZGRGaWVs\nZChFYWdlck91dGVySm9pblBDLmNsYXNzLCAic3RyaW5nQ29sbGVjdGlvbiIp\nOwogICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSAoRWFnZXJPdXRlckpv\naW5QQykgcG0uZ2V0T2JqZWN0SWQob2lkKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoIjEiLCBwYy5nZXROYW1lKCkpOwogICAgICAgIGlmIChlbXB0eSkKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24o\nKS50b1N0cmluZygpLAogICAgICAgICAgICAgICAgICAgIDAsIHBjLmdldFN0\ncmluZ0NvbGxlY3Rpb24oKS5zaXplKCkpOwogICAgICAgIGVsc2UgewogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMocGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigp\nLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgMiwgcGMuZ2V0U3Ry\naW5nQ29sbGVjdGlvbigpLnNpemUoKSk7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUocGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmNvbnRhaW5zKCIxLjEiKSk7\nCiAgICAgICAgICAgIGFzc2VydFRydWUocGMuZ2V0U3RyaW5nQ29sbGVjdGlv\nbigpLmNvbnRhaW5zKCIxLjIiKSk7CiAgICAgICAgfQogICAgICAgIHBtLmNs\nb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RTdHJpbmdD\nb2xsZWN0aW9uQnlRdWVyeSgpIHsKICAgICAgICBzdHJpbmdDb2xsZWN0aW9u\nQnlRdWVyeVRlc3QoMCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RFbXB0eVN0cmluZ0NvbGxlY3Rpb25CeVF1ZXJ5MSgpIHsKICAgICAgICBz\ndHJpbmdDb2xsZWN0aW9uQnlRdWVyeVRlc3QoMSk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RFbXB0eVN0cmluZ0NvbGxlY3Rpb25CeVF1ZXJ5\nMigpIHsKICAgICAgICBzdHJpbmdDb2xsZWN0aW9uQnlRdWVyeVRlc3QoMik7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RFbXB0eVN0cmluZ0Nv\nbGxlY3Rpb25CeVF1ZXJ5MygpIHsKICAgICAgICBzdHJpbmdDb2xsZWN0aW9u\nQnlRdWVyeVRlc3QoMyk7CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBz\ndHJpbmdDb2xsZWN0aW9uQnlRdWVyeVRlc3QoaW50IGVtcHR5KSB7CiAgICAg\nICAgaW5zZXJ0U3RyaW5nQ29sbGVjdGlvbihlbXB0eSk7CiAgICAgICAgCiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5\nTWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIEZldGNo\nUGxhbiBmZXRjaCA9IChGZXRjaFBsYW4pIHBtLmdldEZldGNoUGxhbigpOwog\nICAgICAgIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3Ms\nICJzdHJpbmdDb2xsZWN0aW9uIik7CiAgICAgICAgZmV0Y2guc2V0RmV0Y2hC\nYXRjaFNpemUoLTEpOwogICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3Jl\nYXRlTmF0aXZlUXVlcnkoIiIsRWFnZXJPdXRlckpvaW5QQy5jbGFzcyk7CiAg\nICAgICAgCiAgICAgICAgLy9GSVhNRSBqdGhvbWFzCiAgICAgICAgLy9xLnNl\ndE9yZGVyaW5nKCJuYW1lIGFzY2VuZGluZyIpOwogICAgICAgIENvbGxlY3Rp\nb24gcmVzdWx0cyA9IChDb2xsZWN0aW9uKSBxLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcmVzdWx0cy5zaXpl\nKCkpOwogICAgICAgIEl0ZXJhdG9yIGl0ciA9IHJlc3VsdHMuaXRlcmF0b3Io\nKTsKICAgICAgICBFYWdlck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJK\nb2luUEMpIGl0ci5uZXh0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxIiwg\ncGMuZ2V0TmFtZSgpKTsKICAgICAgICBpZiAoKGVtcHR5ICYgMSkgPiAwKQog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMocGMuZ2V0U3RyaW5nQ29sbGVjdGlv\nbigpLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgMCwgcGMuZ2V0\nU3RyaW5nQ29sbGVjdGlvbigpLnNpemUoKSk7CiAgICAgICAgZWxzZSB7CiAg\nICAgICAgICAgIGFzc2VydEVxdWFscyhwYy5nZXRTdHJpbmdDb2xsZWN0aW9u\nKCkudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAyLCBwYy5nZXRT\ndHJpbmdDb2xsZWN0aW9uKCkuc2l6ZSgpKTsKICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZShwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuY29udGFpbnMoIjEuMSIp\nKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShwYy5nZXRTdHJpbmdDb2xsZWN0\naW9uKCkuY29udGFpbnMoIjEuMiIpKTsKICAgICAgICB9CiAgICAgICAgCiAg\nICAgICAgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykgaXRyLm5leHQoKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoIjIiLCBwYy5nZXROYW1lKCkpOwogICAgICAg\nIGlmICgoZW1wdHkgJiAyKSA+IDApCiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncyhwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkudG9TdHJpbmcoKSwKICAgICAg\nICAgICAgICAgICAgICAwLCBwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuc2l6\nZSgpKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS50b1N0cmluZygpLAogICAgICAg\nICAgICAgICAgICAgIDIsIHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5zaXpl\nKCkpOwogICAgICAgICAgICBhc3NlcnRUcnVlKHBjLmdldFN0cmluZ0NvbGxl\nY3Rpb24oKS5jb250YWlucygiMi4xIikpOwogICAgICAgICAgICBhc3NlcnRU\ncnVlKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5jb250YWlucygiMi4yIikp\nOwogICAgICAgIH0KICAgICAgICBhc3NlcnRUcnVlKCFpdHIuaGFzTmV4dCgp\nKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwcml2YXRl\nIE9iamVjdCBpbnNlcnRTdHJpbmdDb2xsZWN0aW9uKGludCBlbXB0eSkgewog\nICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMxID0gbmV3IEVhZ2VyT3V0ZXJK\nb2luUEMoKTsKICAgICAgICBwYzEuc2V0TmFtZSgiMSIpOwogICAgICAgIGlm\nICgoZW1wdHkgJiAxKSA9PSAwKSB7CiAgICAgICAgICAgIHBjMS5nZXRTdHJp\nbmdDb2xsZWN0aW9uKCkuYWRkKCIxLjEiKTsKICAgICAgICAgICAgcGMxLmdl\ndFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoIjEuMiIpOwogICAgICAgIH0KICAg\nICAgICAKICAgICAgICBFYWdlck91dGVySm9pblBDIHBjMiA9IG5ldyBFYWdl\nck91dGVySm9pblBDKCk7CiAgICAgICAgcGMyLnNldE5hbWUoIjIiKTsKICAg\nICAgICBpZiAoKGVtcHR5ICYgMikgPT0gMCkgewogICAgICAgICAgICBwYzIu\nZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmFkZCgiMi4xIik7CiAgICAgICAgICAg\nIHBjMi5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRkKCIyLjIiKTsKICAgICAg\nICB9CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBB\nRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAg\nIAogICAgICAgIHN0YXJ0VHgocG0pOzsKICAgICAgICBwbS5wZXJzaXN0KHBj\nMSk7CiAgICAgICAgcG0ucGVyc2lzdChwYzIpOwogICAgICAgIGVuZFR4KHBt\nKTs7CiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElkKHBjMSk7\nCiAgICAgICAgcG0uY2xvc2UoKTsKICAgICAgICByZXR1cm4gb2lkOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RyaW5nTGlzdEJ5SWQoKSB7\nCiAgICAgICAgT2JqZWN0IG9pZCA9IGluc2VydFN0cmluZ0xpc3QoKTsKICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgCiAgICAg\nICAgCiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNoUGxhbikgcG0u\nZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJP\ndXRlckpvaW5QQy5jbGFzcywgInN0cmluZ0xpc3QiKTsKICAgICAgICBFYWdl\nck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIHBtLmdldE9i\namVjdElkKG9pZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxIiwgcGMuZ2V0\nTmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0U3RyaW5n\nTGlzdCgpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxLjEiLCBw\nYy5nZXRTdHJpbmdMaXN0KCkuZ2V0KDApKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoIjEuMiIsIHBjLmdldFN0cmluZ0xpc3QoKS5nZXQoMSkpOwogICAgICAg\nIHBtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RT\ndHJpbmdMaXN0QnlRdWVyeSgpIHsKICAgICAgICBpbnNlcnRTdHJpbmdMaXN0\nKCk7CiAgICAgICAgCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOwogICAgICAgIEZldGNoUGxhbiBmZXRjaCA9IChGZXRjaFBsYW4pIHBtLmdl\ndEZldGNoUGxhbigpOwogICAgICAgIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0\nZXJKb2luUEMuY2xhc3MsICJzdHJpbmdMaXN0Iik7CiAgICAgICAgZmV0Y2gu\nc2V0RmV0Y2hCYXRjaFNpemUoLTEpOwogICAgICAgIE9wZW5KUEFRdWVyeSBx\nID0gcG0uY3JlYXRlTmF0aXZlUXVlcnkoIiIsRWFnZXJPdXRlckpvaW5QQy5j\nbGFzcyk7CiAgICAgICAgLy9GSVhNRSBqdGhvbWFzCiAgICAgICAgLy9xLnNl\ndE9yZGVyaW5nKCJuYW1lIGFzY2VuZGluZyIpOwogICAgICAgIENvbGxlY3Rp\nb24gcmVzdWx0cyA9IChDb2xsZWN0aW9uKSBxLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcmVzdWx0cy5zaXpl\nKCkpOwogICAgICAgIEl0ZXJhdG9yIGl0ciA9IHJlc3VsdHMuaXRlcmF0b3Io\nKTsKICAgICAgICBFYWdlck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJK\nb2luUEMpIGl0ci5uZXh0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxIiwg\ncGMuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0\nU3RyaW5nTGlzdCgpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIx\nLjEiLCBwYy5nZXRTdHJpbmdMaXN0KCkuZ2V0KDApKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoIjEuMiIsIHBjLmdldFN0cmluZ0xpc3QoKS5nZXQoMSkpOwog\nICAgICAgIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIGl0ci5uZXh0KCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCIyIiwgcGMuZ2V0TmFtZSgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0U3RyaW5nTGlzdCgpLnNpemUoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIyLjEiLCBwYy5nZXRTdHJpbmdMaXN0\nKCkuZ2V0KDApKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjIuMiIsIHBjLmdl\ndFN0cmluZ0xpc3QoKS5nZXQoMSkpOwogICAgICAgIGFzc2VydFRydWUoIWl0\nci5oYXNOZXh0KCkpOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICB9CiAgICAK\nICAgIHByaXZhdGUgT2JqZWN0IGluc2VydFN0cmluZ0xpc3QoKSB7CiAgICAg\nICAgRWFnZXJPdXRlckpvaW5QQyBwYzEgPSBuZXcgRWFnZXJPdXRlckpvaW5Q\nQygpOwogICAgICAgIHBjMS5zZXROYW1lKCIxIik7CiAgICAgICAgcGMxLmdl\ndFN0cmluZ0xpc3QoKS5hZGQoIjEuMSIpOwogICAgICAgIHBjMS5nZXRTdHJp\nbmdMaXN0KCkuYWRkKCIxLjIiKTsKICAgICAgICAKICAgICAgICBFYWdlck91\ndGVySm9pblBDIHBjMiA9IG5ldyBFYWdlck91dGVySm9pblBDKCk7CiAgICAg\nICAgcGMyLnNldE5hbWUoIjIiKTsKICAgICAgICBwYzIuZ2V0U3RyaW5nTGlz\ndCgpLmFkZCgiMi4xIik7CiAgICAgICAgcGMyLmdldFN0cmluZ0xpc3QoKS5h\nZGQoIjIuMiIpOwogICAgICAgIAogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICBwbS5wZXJz\naXN0KHBjMSk7CiAgICAgICAgcG0ucGVyc2lzdChwYzIpOwogICAgICAgIGVu\nZFR4KHBtKTs7CiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElk\nKHBjMSk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAgICAgICByZXR1cm4gb2lk\nOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25lTWFueUNvbGxl\nY3Rpb25CeUlkKCkgewogICAgICAgIG9uZU1hbnlDb2xsZWN0aW9uQnlJZFRl\nc3QoZmFsc2UpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1w\ndHlPbmVNYW55Q29sbGVjdGlvbkJ5SWQoKSB7CiAgICAgICAgb25lTWFueUNv\nbGxlY3Rpb25CeUlkVGVzdCh0cnVlKTsKICAgIH0KICAgIAogICAgcHJpdmF0\nZSB2b2lkIG9uZU1hbnlDb2xsZWN0aW9uQnlJZFRlc3QoYm9vbGVhbiBlbXB0\neSkgewogICAgICAgIE9iamVjdCBvaWQgPSBpbnNlcnRPbmVNYW55Q29sbGVj\ndGlvbigoZW1wdHkpID8gMSA6IDApOwogICAgICAgIAogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3Vy\ncmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBGZXRjaFBsYW4gZmV0Y2gg\nPSAoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBmZXRj\naC5hZGRGaWVsZChFYWdlck91dGVySm9pblBDLmNsYXNzLCAib25lTWFueUNv\nbGxlY3Rpb24iKTsKICAgICAgICBFYWdlck91dGVySm9pblBDIHBjID0gKEVh\nZ2VyT3V0ZXJKb2luUEMpIHBtLmdldE9iamVjdElkKG9pZCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCIxIiwgcGMuZ2V0TmFtZSgpKTsKICAgICAgICBpZiAo\nZW1wdHkpCiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBwYy5nZXRPbmVN\nYW55Q29sbGVjdGlvbigpLnNpemUoKSk7CiAgICAgICAgZWxzZQogICAgICAg\nICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0T25lTWFueUNvbGxlY3Rpb24o\nKS5zaXplKCkpOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RPbmVNYW55Q29sbGVjdGlvbkJ5UXVlcnkoKSB7\nCiAgICAgICAgb25lTWFueUNvbGxlY3Rpb25CeVF1ZXJ5VGVzdCgwKTsKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEVtcHR5T25lTWFueUNvbGxl\nY3Rpb25CeVF1ZXJ5MSgpIHsKICAgICAgICBvbmVNYW55Q29sbGVjdGlvbkJ5\nUXVlcnlUZXN0KDEpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRW1wdHlPbmVNYW55Q29sbGVjdGlvbkJ5UXVlcnkyKCkgewogICAgICAgIG9u\nZU1hbnlDb2xsZWN0aW9uQnlRdWVyeVRlc3QoMik7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RFbXB0eU9uZU1hbnlDb2xsZWN0aW9uQnlRdWVy\neTMoKSB7CiAgICAgICAgb25lTWFueUNvbGxlY3Rpb25CeVF1ZXJ5VGVzdCgz\nKTsKICAgIH0KICAgIAogICAgcHJpdmF0ZSB2b2lkIG9uZU1hbnlDb2xsZWN0\naW9uQnlRdWVyeVRlc3QoaW50IGVtcHR5KSB7CiAgICAgICAgaW5zZXJ0T25l\nTWFueUNvbGxlY3Rpb24oZW1wdHkpOwogICAgICAgIAogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3Vy\ncmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBGZXRjaFBsYW4gZmV0Y2gg\nPSAoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBmZXRj\naC5hZGRGaWVsZChFYWdlck91dGVySm9pblBDLmNsYXNzLCAib25lTWFueUNv\nbGxlY3Rpb24iKTsKICAgICAgICBmZXRjaC5zZXRGZXRjaEJhdGNoU2l6ZSgt\nMSk7CiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5jcmVhdGVOYXRpdmVR\ndWVyeSgiIixFYWdlck91dGVySm9pblBDLmNsYXNzKTsKICAgICAgICAvL0ZJ\nWE1FIGp0aG9tYXMKICAgICAgICAvL3Euc2V0T3JkZXJpbmcoIm5hbWUgYXNj\nZW5kaW5nIik7CiAgICAgICAgQ29sbGVjdGlvbiByZXN1bHRzID0gKENvbGxl\nY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIAogICAgICAgIGFz\nc2VydEVxdWFscygyLCByZXN1bHRzLnNpemUoKSk7CiAgICAgICAgSXRlcmF0\nb3IgaXRyID0gcmVzdWx0cy5pdGVyYXRvcigpOwogICAgICAgIEVhZ2VyT3V0\nZXJKb2luUEMgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykgaXRyLm5leHQoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoIjEiLCBwYy5nZXROYW1lKCkpOwogICAg\nICAgIGlmICgoZW1wdHkgJiAxKSA+IDApCiAgICAgICAgICAgIGFzc2VydEVx\ndWFscygwLCBwYy5nZXRPbmVNYW55Q29sbGVjdGlvbigpLnNpemUoKSk7CiAg\nICAgICAgZWxzZQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0\nT25lTWFueUNvbGxlY3Rpb24oKS5zaXplKCkpOwogICAgICAgIAogICAgICAg\nIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIGl0ci5uZXh0KCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCIyIiwgcGMuZ2V0TmFtZSgpKTsKICAgICAgICBpZiAo\nKGVtcHR5ICYgMikgPiAwKQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMCwg\ncGMuZ2V0T25lTWFueUNvbGxlY3Rpb24oKS5zaXplKCkpOwogICAgICAgIGVs\nc2UKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldE9uZU1hbnlD\nb2xsZWN0aW9uKCkuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRU\ncnVlKCFpdHIuaGFzTmV4dCgpKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAg\nfQogICAgCiAgICBwcml2YXRlIE9iamVjdCBpbnNlcnRPbmVNYW55Q29sbGVj\ndGlvbihpbnQgZW1wdHkpIHsKICAgICAgICBFYWdlck91dGVySm9pblBDIHBj\nMSA9IG5ldyBFYWdlck91dGVySm9pblBDKCk7CiAgICAgICAgcGMxLnNldE5h\nbWUoIjEiKTsKICAgICAgICBFYWdlck91dGVySm9pblBDMiBocGM7CiAgICAg\nICAgaWYgKChlbXB0eSAmIDEpID09IDApIHsKICAgICAgICAgICAgaHBjID0g\nbmV3IEVhZ2VyT3V0ZXJKb2luUEMyKCk7CiAgICAgICAgICAgIGhwYy5zZXRO\nYW1lKCIxLjEiKTsKICAgICAgICAgICAgaHBjLnNldFJlZihwYzEpOwogICAg\nICAgICAgICBwYzEuZ2V0T25lTWFueUNvbGxlY3Rpb24oKS5hZGQoaHBjKTsK\nICAgICAgICAgICAgaHBjID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMyKCk7CiAg\nICAgICAgICAgIGhwYy5zZXROYW1lKCIxLjIiKTsKICAgICAgICAgICAgaHBj\nLnNldFJlZihwYzEpOwogICAgICAgICAgICBwYzEuZ2V0T25lTWFueUNvbGxl\nY3Rpb24oKS5hZGQoaHBjKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAg\nRWFnZXJPdXRlckpvaW5QQyBwYzIgPSBuZXcgRWFnZXJPdXRlckpvaW5QQygp\nOwogICAgICAgIHBjMi5zZXROYW1lKCIyIik7CiAgICAgICAgaWYgKChlbXB0\neSAmIDIpID09IDApIHsKICAgICAgICAgICAgaHBjID0gbmV3IEVhZ2VyT3V0\nZXJKb2luUEMyKCk7CiAgICAgICAgICAgIGhwYy5zZXROYW1lKCIyLjEiKTsK\nICAgICAgICAgICAgaHBjLnNldFJlZihwYzIpOwogICAgICAgICAgICBwYzIu\nZ2V0T25lTWFueUNvbGxlY3Rpb24oKS5hZGQoaHBjKTsKICAgICAgICAgICAg\naHBjID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMyKCk7CiAgICAgICAgICAgIGhw\nYy5zZXROYW1lKCIyLjIiKTsKICAgICAgICAgICAgaHBjLnNldFJlZihwYzIp\nOwogICAgICAgICAgICBwYzIuZ2V0T25lTWFueUNvbGxlY3Rpb24oKS5hZGQo\naHBjKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50\naXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIHBt\nLnBlcnNpc3QocGMxKTsKICAgICAgICBwbS5wZXJzaXN0KHBjMik7CiAgICAg\nICAgZW5kVHgocG0pOwogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmpl\nY3RJZChwYzEpOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICAgICAgcmV0dXJu\nIG9pZDsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE1hbnlNYW55\nQ29sbGVjdGlvbkJ5SWQoKSB7CiAgICAgICAgT2JqZWN0IG9pZCA9IGluc2Vy\ndE1hbnlNYW55Q29sbGVjdGlvbigpOwogICAgICAgIAogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3Vy\ncmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBGZXRjaFBsYW4gZmV0Y2gg\nPSAoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBmZXRj\naC5hZGRGaWVsZChFYWdlck91dGVySm9pblBDLmNsYXNzLCAibWFueU1hbnlD\nb2xsZWN0aW9uIik7CiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYyA9IChF\nYWdlck91dGVySm9pblBDKSBwbS5nZXRPYmplY3RJZChvaWQpOwogICAgICAg\nIGFzc2VydEVxdWFscygiMSIsIHBjLmdldE5hbWUoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDIsIHBjLmdldE1hbnlNYW55Q29sbGVjdGlvbigpLnNpemUo\nKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdE1hbnlNYW55Q29sbGVjdGlvbkJ5UXVlcnkoKSB7CiAgICAg\nICAgaW5zZXJ0TWFueU1hbnlDb2xsZWN0aW9uKCk7CiAgICAgICAgCiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFu\nYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIEZldGNoUGxh\nbiBmZXRjaCA9IChGZXRjaFBsYW4pIHBtLmdldEZldGNoUGxhbigpOwogICAg\nICAgIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJt\nYW55TWFueUNvbGxlY3Rpb24iKTsKICAgICAgICBmZXRjaC5zZXRGZXRjaEJh\ndGNoU2l6ZSgtMSk7CiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5jcmVh\ndGVOYXRpdmVRdWVyeSgiIixFYWdlck91dGVySm9pblBDLmNsYXNzKTsKICAg\nICAgICAvL0ZJWE1FIGp0aG9tYXMKICAgICAgICAvL3Euc2V0T3JkZXJpbmco\nIm5hbWUgYXNjZW5kaW5nIik7CiAgICAgICAgQ29sbGVjdGlvbiByZXN1bHRz\nID0gKENvbGxlY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIAog\nICAgICAgIGFzc2VydEVxdWFscygyLCByZXN1bHRzLnNpemUoKSk7CiAgICAg\nICAgSXRlcmF0b3IgaXRyID0gcmVzdWx0cy5pdGVyYXRvcigpOwogICAgICAg\nIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykgaXRy\nLm5leHQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjEiLCBwYy5nZXROYW1l\nKCkpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRNYW55TWFueUNv\nbGxlY3Rpb24oKS5zaXplKCkpOwogICAgICAgIHBjID0gKEVhZ2VyT3V0ZXJK\nb2luUEMpIGl0ci5uZXh0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIyIiwg\ncGMuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0\nTWFueU1hbnlDb2xsZWN0aW9uKCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRU\ncnVlKCFpdHIuaGFzTmV4dCgpKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAg\nfQogICAgCiAgICBwcml2YXRlIE9iamVjdCBpbnNlcnRNYW55TWFueUNvbGxl\nY3Rpb24oKSB7CiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYzEgPSBuZXcg\nRWFnZXJPdXRlckpvaW5QQygpOwogICAgICAgIHBjMS5zZXROYW1lKCIxIik7\nCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQzIgaHBjID0gbmV3IEVhZ2VyT3V0\nZXJKb2luUEMyKCk7CiAgICAgICAgaHBjLnNldE5hbWUoIjEuMSIpOwogICAg\nICAgIHBjMS5nZXRNYW55TWFueUNvbGxlY3Rpb24oKS5hZGQoaHBjKTsKICAg\nICAgICBocGMgPSBuZXcgRWFnZXJPdXRlckpvaW5QQzIoKTsKICAgICAgICBo\ncGMuc2V0TmFtZSgiMS4yIik7CiAgICAgICAgcGMxLmdldE1hbnlNYW55Q29s\nbGVjdGlvbigpLmFkZChocGMpOwogICAgICAgIAogICAgICAgIEVhZ2VyT3V0\nZXJKb2luUEMgcGMyID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMoKTsKICAgICAg\nICBwYzIuc2V0TmFtZSgiMiIpOwogICAgICAgIGhwYyA9IG5ldyBFYWdlck91\ndGVySm9pblBDMigpOwogICAgICAgIGhwYy5zZXROYW1lKCIyLjEiKTsKICAg\nICAgICBwYzIuZ2V0TWFueU1hbnlDb2xsZWN0aW9uKCkuYWRkKGhwYyk7CiAg\nICAgICAgaHBjID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMyKCk7CiAgICAgICAg\naHBjLnNldE5hbWUoIjIuMiIpOwogICAgICAgIHBjMi5nZXRNYW55TWFueUNv\nbGxlY3Rpb24oKS5hZGQoaHBjKTsKICAgICAgICAKICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJl\nbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAg\nICAgcG0ucGVyc2lzdChwYzEpOwogICAgICAgIHBtLnBlcnNpc3QocGMyKTsK\nICAgICAgICBlbmRUeChwbSk7OwogICAgICAgIE9iamVjdCBvaWQgPSBwbS5n\nZXRPYmplY3RJZChwYzEpOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICAgICAg\ncmV0dXJuIG9pZDsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE1h\nbnlNYW55TGlzdEJ5SWQoKSB7CiAgICAgICAgbWFueU1hbnlMaXN0QnlJZFRl\nc3QoZmFsc2UpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1w\ndHlNYW55TWFueUxpc3RCeUlkKCkgewogICAgICAgIG1hbnlNYW55TGlzdEJ5\nSWRUZXN0KHRydWUpOwogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgbWFu\neU1hbnlMaXN0QnlJZFRlc3QoYm9vbGVhbiBlbXB0eSkgewogICAgICAgIE9i\namVjdCBvaWQgPSBpbnNlcnRNYW55TWFueUxpc3QoKGVtcHR5KSA/IDEgOiAw\nKTsKICAgICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNoUGxhbikgcG0uZ2V0\nRmV0Y2hQbGFuKCk7CiAgICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRl\nckpvaW5QQy5jbGFzcywgIm1hbnlNYW55TGlzdCIpOwogICAgICAgIEVhZ2Vy\nT3V0ZXJKb2luUEMgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykgcG0uZ2V0T2Jq\nZWN0SWQob2lkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjEiLCBwYy5nZXRO\nYW1lKCkpOwogICAgICAgIGlmIChlbXB0eSkKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKDAsIHBjLmdldE1hbnlNYW55TGlzdCgpLnNpemUoKSk7CiAgICAg\nICAgZWxzZSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRN\nYW55TWFueUxpc3QoKS5zaXplKCkpOwogICAgICAgICAgICBFYWdlck91dGVy\nSm9pblBDMiBocGMgPSAoRWFnZXJPdXRlckpvaW5QQzIpCiAgICAgICAgICAg\nIHBjLmdldE1hbnlNYW55TGlzdCgpLmdldCgwKTsKICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKCIxLjEiLCBocGMuZ2V0TmFtZSgpKTsKICAgICAgICAgICAg\naHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMyKSBwYy5nZXRNYW55TWFueUxpc3Qo\nKS5nZXQoMSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygiMS4yIiwgaHBj\nLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIHBtLmNsb3NlKCk7CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RNYW55TWFueUxpc3RCeVF1\nZXJ5KCkgewogICAgICAgIG1hbnlNYW55TGlzdEJ5UXVlcnlUZXN0KDApOwog\nICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlNYW55TWFueUxp\nc3RCeVF1ZXJ5MSgpIHsKICAgICAgICBtYW55TWFueUxpc3RCeVF1ZXJ5VGVz\ndCgxKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEVtcHR5TWFu\neU1hbnlMaXN0QnlRdWVyeTIoKSB7CiAgICAgICAgbWFueU1hbnlMaXN0QnlR\ndWVyeVRlc3QoMik7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RF\nbXB0eU1hbnlNYW55TGlzdEJ5UXVlcnkzKCkgewogICAgICAgIG1hbnlNYW55\nTGlzdEJ5UXVlcnlUZXN0KDMpOwogICAgfQogICAgCiAgICBwcml2YXRlIHZv\naWQgbWFueU1hbnlMaXN0QnlRdWVyeVRlc3QoaW50IGVtcHR5KSB7CiAgICAg\nICAgaW5zZXJ0TWFueU1hbnlMaXN0KGVtcHR5KTsKICAgICAgICAKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRmV0Y2hQbGFu\nIGZldGNoID0gKEZldGNoUGxhbikgcG0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAg\nICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpvaW5QQy5jbGFzcywgIm1h\nbnlNYW55TGlzdCIpOwogICAgICAgIGZldGNoLnNldEZldGNoQmF0Y2hTaXpl\nKC0xKTsKICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZU5hdGl2\nZVF1ZXJ5KCIiLEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MpOwogICAgICAgIC8v\nRklYTUUganRob21hcwogICAgICAgIC8vcS5zZXRPcmRlcmluZygibmFtZSBh\nc2NlbmRpbmciKTsKICAgICAgICBDb2xsZWN0aW9uIHJlc3VsdHMgPSAoQ29s\nbGVjdGlvbikgcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIHJlc3VsdHMuc2l6ZSgpKTsKICAgICAgICBJdGVy\nYXRvciBpdHIgPSByZXN1bHRzLml0ZXJhdG9yKCk7CiAgICAgICAgRWFnZXJP\ndXRlckpvaW5QQyBwYyA9IChFYWdlck91dGVySm9pblBDKSBpdHIubmV4dCgp\nOwogICAgICAgIGFzc2VydEVxdWFscygiMSIsIHBjLmdldE5hbWUoKSk7CiAg\nICAgICAgRWFnZXJPdXRlckpvaW5QQzIgaHBjOwogICAgICAgIGlmICgoZW1w\ndHkgJiAxKSA+IDApCiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBwYy5n\nZXRNYW55TWFueUxpc3QoKS5zaXplKCkpOwogICAgICAgIGVsc2UgewogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0TWFueU1hbnlMaXN0KCku\nc2l6ZSgpKTsKICAgICAgICAgICAgaHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMy\nKSBwYy5nZXRNYW55TWFueUxpc3QoKS5nZXQoMCk7CiAgICAgICAgICAgIGFz\nc2VydEVxdWFscygiMS4xIiwgaHBjLmdldE5hbWUoKSk7CiAgICAgICAgICAg\nIGhwYyA9IChFYWdlck91dGVySm9pblBDMikgcGMuZ2V0TWFueU1hbnlMaXN0\nKCkuZ2V0KDEpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoIjEuMiIsIGhw\nYy5nZXROYW1lKCkpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBwYyA9\nIChFYWdlck91dGVySm9pblBDKSBpdHIubmV4dCgpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiMiIsIHBjLmdldE5hbWUoKSk7CiAgICAgICAgaWYgKChlbXB0\neSAmIDIpID4gMCkKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHBjLmdl\ndE1hbnlNYW55TGlzdCgpLnNpemUoKSk7CiAgICAgICAgZWxzZSB7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRNYW55TWFueUxpc3QoKS5z\naXplKCkpOwogICAgICAgICAgICBocGMgPSAoRWFnZXJPdXRlckpvaW5QQzIp\nIHBjLmdldE1hbnlNYW55TGlzdCgpLmdldCgwKTsKICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKCIyLjEiLCBocGMuZ2V0TmFtZSgpKTsKICAgICAgICAgICAg\naHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMyKSBwYy5nZXRNYW55TWFueUxpc3Qo\nKS5nZXQoMSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygiMi4yIiwgaHBj\nLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGFzc2Vy\ndFRydWUoIWl0ci5oYXNOZXh0KCkpOwogICAgICAgIHBtLmNsb3NlKCk7CiAg\nICB9CiAgICAKICAgIHByaXZhdGUgT2JqZWN0IGluc2VydE1hbnlNYW55TGlz\ndChpbnQgZW1wdHkpIHsKICAgICAgICBFYWdlck91dGVySm9pblBDIHBjMSA9\nIG5ldyBFYWdlck91dGVySm9pblBDKCk7CiAgICAgICAgcGMxLnNldE5hbWUo\nIjEiKTsKICAgICAgICBFYWdlck91dGVySm9pblBDMiBocGM7CiAgICAgICAg\naWYgKChlbXB0eSAmIDEpID09IDApIHsKICAgICAgICAgICAgaHBjID0gbmV3\nIEVhZ2VyT3V0ZXJKb2luUEMyKCk7CiAgICAgICAgICAgIGhwYy5zZXROYW1l\nKCIxLjEiKTsKICAgICAgICAgICAgcGMxLmdldE1hbnlNYW55TGlzdCgpLmFk\nZChocGMpOwogICAgICAgICAgICBocGMgPSBuZXcgRWFnZXJPdXRlckpvaW5Q\nQzIoKTsKICAgICAgICAgICAgaHBjLnNldE5hbWUoIjEuMiIpOwogICAgICAg\nICAgICBwYzEuZ2V0TWFueU1hbnlMaXN0KCkuYWRkKGhwYyk7CiAgICAgICAg\nfQogICAgICAgIAogICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMyID0gbmV3\nIEVhZ2VyT3V0ZXJKb2luUEMoKTsKICAgICAgICBwYzIuc2V0TmFtZSgiMiIp\nOwogICAgICAgIGlmICgoZW1wdHkgJiAyKSA9PSAwKSB7CiAgICAgICAgICAg\nIGhwYyA9IG5ldyBFYWdlck91dGVySm9pblBDMigpOwogICAgICAgICAgICBo\ncGMuc2V0TmFtZSgiMi4xIik7CiAgICAgICAgICAgIHBjMi5nZXRNYW55TWFu\neUxpc3QoKS5hZGQoaHBjKTsKICAgICAgICAgICAgaHBjID0gbmV3IEVhZ2Vy\nT3V0ZXJKb2luUEMyKCk7CiAgICAgICAgICAgIGhwYy5zZXROYW1lKCIyLjIi\nKTsKICAgICAgICAgICAgcGMyLmdldE1hbnlNYW55TGlzdCgpLmFkZChocGMp\nOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5TWFu\nYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChwbSk7OwogICAgICAgIHBtLnBl\ncnNpc3QocGMxKTsKICAgICAgICBwbS5wZXJzaXN0KHBjMik7CiAgICAgICAg\nZW5kVHgocG0pOzsKICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0\nSWQocGMxKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAgICAgIHJldHVybiBv\naWQ7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RUd29Db2xsZWN0\naW9uc0luRmV0Y2hHcm91cHNCeUlkKCkgewogICAgICAgIE9iamVjdCBvaWQg\nPSBpbnNlcnRUd29Db2xsZWN0aW9ucygpOwogICAgICAgIAogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIp\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBGZXRjaFBsYW4gZmV0\nY2ggPSAoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBm\nZXRjaC5hZGRGaWVsZChFYWdlck91dGVySm9pblBDLmNsYXNzLCAic3RyaW5n\nQ29sbGVjdGlvbiIpOwogICAgICAgIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0\nZXJKb2luUEMuY2xhc3MsICJtYW55TWFueUxpc3QiKTsKICAgICAgICBFYWdl\nck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIHBtLmdldE9i\namVjdElkKG9pZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxIiwgcGMuZ2V0\nTmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0U3RyaW5n\nQ29sbGVjdGlvbigpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwYy5n\nZXRTdHJpbmdDb2xsZWN0aW9uKCkuY29udGFpbnMoIjEuMSIpKTsKICAgICAg\nICBhc3NlcnRUcnVlKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5jb250YWlu\ncygiMS4yIikpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRNYW55\nTWFueUxpc3QoKS5zaXplKCkpOwogICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMy\nIGhwYyA9IChFYWdlck91dGVySm9pblBDMikKICAgICAgICBwYy5nZXRNYW55\nTWFueUxpc3QoKS5nZXQoMCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxLjEi\nLCBocGMuZ2V0TmFtZSgpKTsKICAgICAgICBocGMgPSAoRWFnZXJPdXRlckpv\naW5QQzIpIHBjLmdldE1hbnlNYW55TGlzdCgpLmdldCgxKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoIjEuMiIsIGhwYy5nZXROYW1lKCkpOwogICAgICAgIHBt\nLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RUd29D\nb2xsZWN0aW9uc0luRmV0Y2hHcm91cHNCeVF1ZXJ5KCkgewogICAgICAgIGlu\nc2VydFR3b0NvbGxlY3Rpb25zKCk7CiAgICAgICAgCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJy\nZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIEZldGNoUGxhbiBmZXRjaCA9\nIChGZXRjaFBsYW4pIHBtLmdldEZldGNoUGxhbigpOwogICAgICAgIGZldGNo\nLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJzdHJpbmdDb2xs\nZWN0aW9uIik7CiAgICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpv\naW5QQy5jbGFzcywgIm1hbnlNYW55TGlzdCIpOwogICAgICAgIGZldGNoLnNl\ndEZldGNoQmF0Y2hTaXplKC0xKTsKICAgICAgICAKICAgICAgICBPcGVuSlBB\nUXVlcnkgcSA9IHBtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCIiLEVhZ2VyT3V0ZXJK\nb2luUEMuY2xhc3MpOwogICAgICAgIC8vRklYTUUganRob21hcwogICAgICAg\nIC8vcS5zZXRPcmRlcmluZygibmFtZSBhc2NlbmRpbmciKTsKICAgICAgICBD\nb2xsZWN0aW9uIHJlc3VsdHMgPSAoQ29sbGVjdGlvbikgcS5nZXRSZXN1bHRM\naXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHJlc3Vs\ndHMuc2l6ZSgpKTsKICAgICAgICBJdGVyYXRvciBpdHIgPSByZXN1bHRzLml0\nZXJhdG9yKCk7CiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYyA9IChFYWdl\nck91dGVySm9pblBDKSBpdHIubmV4dCgpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiMSIsIHBjLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIs\nIHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5zaXplKCkpOwogICAgICAgIGFz\nc2VydFRydWUocGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmNvbnRhaW5zKCIx\nLjEiKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwYy5nZXRTdHJpbmdDb2xsZWN0\naW9uKCkuY29udGFpbnMoIjEuMiIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMiwgcGMuZ2V0TWFueU1hbnlMaXN0KCkuc2l6ZSgpKTsKICAgICAgICBFYWdl\nck91dGVySm9pblBDMiBocGMgPSAoRWFnZXJPdXRlckpvaW5QQzIpCiAgICAg\nICAgcGMuZ2V0TWFueU1hbnlMaXN0KCkuZ2V0KDApOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiMS4xIiwgaHBjLmdldE5hbWUoKSk7CiAgICAgICAgaHBjID0g\nKEVhZ2VyT3V0ZXJKb2luUEMyKSBwYy5nZXRNYW55TWFueUxpc3QoKS5nZXQo\nMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxLjIiLCBocGMuZ2V0TmFtZSgp\nKTsKICAgICAgICAKICAgICAgICBwYyA9IChFYWdlck91dGVySm9pblBDKSBp\ndHIubmV4dCgpOwogICAgICAgIGFzc2VydEVxdWFscygiMiIsIHBjLmdldE5h\nbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldFN0cmluZ0Nv\nbGxlY3Rpb24oKS5zaXplKCkpOwogICAgICAgIGFzc2VydFRydWUocGMuZ2V0\nU3RyaW5nQ29sbGVjdGlvbigpLmNvbnRhaW5zKCIyLjEiKSk7CiAgICAgICAg\nYXNzZXJ0VHJ1ZShwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuY29udGFpbnMo\nIjIuMiIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0TWFueU1h\nbnlMaXN0KCkuc2l6ZSgpKTsKICAgICAgICBocGMgPSAoRWFnZXJPdXRlckpv\naW5QQzIpIHBjLmdldE1hbnlNYW55TGlzdCgpLmdldCgwKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoIjIuMSIsIGhwYy5nZXROYW1lKCkpOwogICAgICAgIGhw\nYyA9IChFYWdlck91dGVySm9pblBDMikgcGMuZ2V0TWFueU1hbnlMaXN0KCku\nZ2V0KDEpOwogICAgICAgIGFzc2VydEVxdWFscygiMi4yIiwgaHBjLmdldE5h\nbWUoKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0VHJ1ZSghaXRyLmhhc05l\neHQoKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHJp\ndmF0ZSBPYmplY3QgaW5zZXJ0VHdvQ29sbGVjdGlvbnMoKSB7CiAgICAgICAg\nRWFnZXJPdXRlckpvaW5QQyBwYzEgPSBuZXcgRWFnZXJPdXRlckpvaW5QQygp\nOwogICAgICAgIHBjMS5zZXROYW1lKCIxIik7CiAgICAgICAgcGMxLmdldFN0\ncmluZ0NvbGxlY3Rpb24oKS5hZGQoIjEuMSIpOwogICAgICAgIHBjMS5nZXRT\ndHJpbmdDb2xsZWN0aW9uKCkuYWRkKCIxLjIiKTsKICAgICAgICBFYWdlck91\ndGVySm9pblBDMiBocGMgPSBuZXcgRWFnZXJPdXRlckpvaW5QQzIoKTsKICAg\nICAgICBocGMuc2V0TmFtZSgiMS4xIik7CiAgICAgICAgcGMxLmdldE1hbnlN\nYW55TGlzdCgpLmFkZChocGMpOwogICAgICAgIGhwYyA9IG5ldyBFYWdlck91\ndGVySm9pblBDMigpOwogICAgICAgIGhwYy5zZXROYW1lKCIxLjIiKTsKICAg\nICAgICBwYzEuZ2V0TWFueU1hbnlMaXN0KCkuYWRkKGhwYyk7CiAgICAgICAg\nCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYzIgPSBuZXcgRWFnZXJPdXRl\nckpvaW5QQygpOwogICAgICAgIHBjMi5zZXROYW1lKCIyIik7CiAgICAgICAg\ncGMyLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoIjIuMSIpOwogICAgICAg\nIHBjMi5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRkKCIyLjIiKTsKICAgICAg\nICBocGMgPSBuZXcgRWFnZXJPdXRlckpvaW5QQzIoKTsKICAgICAgICBocGMu\nc2V0TmFtZSgiMi4xIik7CiAgICAgICAgcGMyLmdldE1hbnlNYW55TGlzdCgp\nLmFkZChocGMpOwogICAgICAgIGhwYyA9IG5ldyBFYWdlck91dGVySm9pblBD\nMigpOwogICAgICAgIGhwYy5zZXROYW1lKCIyLjIiKTsKICAgICAgICBwYzIu\nZ2V0TWFueU1hbnlMaXN0KCkuYWRkKGhwYyk7CiAgICAgICAgCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdl\nciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0p\nOzsKICAgICAgICBwbS5wZXJzaXN0KHBjMSk7CiAgICAgICAgcG0ucGVyc2lz\ndChwYzIpOwogICAgICAgIGVuZFR4KHBtKTs7CiAgICAgICAgT2JqZWN0IG9p\nZCA9IHBtLmdldE9iamVjdElkKHBjMSk7CiAgICAgICAgcG0uY2xvc2UoKTsK\nICAgICAgICByZXR1cm4gb2lkOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0UXVlcnlSYW5kb21BY2Nlc3MoKSB7CiAgICAgICAgaW5zZXJ0TWFu\neVN0cmluZ0xpc3QoKTsKICAgICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNo\nUGxhbikgcG0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgZmV0Y2guYWRkRmll\nbGQoRWFnZXJPdXRlckpvaW5QQy5jbGFzcywgInN0cmluZ0xpc3QiKTsKICAg\nICAgICBmZXRjaC5zZXRGZXRjaEJhdGNoU2l6ZSgzKTsKICAgICAgICBPcGVu\nSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCIiLEVhZ2VyT3V0\nZXJKb2luUEMuY2xhc3MpOwogICAgICAgIC8vRklYTUUganRob21hcwogICAg\nICAgIC8vcS5zZXRPcmRlcmluZygibmFtZSBhc2NlbmRpbmciKTsKICAgICAg\nICBMaXN0IHJlc3VsdHMgPSAoTGlzdCkgcS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEwLCByZXN1bHRzLnNpemUoKSk7CiAgICAg\nICAgCiAgICAgICAgZm9yIChpbnQgaSA9IDU7IGkgPCByZXN1bHRzLnNpemUo\nKTsgaSsrKSB7CiAgICAgICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSAo\nRWFnZXJPdXRlckpvaW5QQykgcmVzdWx0cy5nZXQoaSk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscyhTdHJpbmcudmFsdWVPZihpKSwgcGMuZ2V0TmFtZSgp\nKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldFN0cmluZ0xp\nc3QoKS5zaXplKCkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoaSArICIu\nMSIsIHBjLmdldFN0cmluZ0xpc3QoKS5nZXQoMCkpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoaSArICIuMiIsIHBjLmdldFN0cmluZ0xpc3QoKS5nZXQo\nMSkpOwogICAgICAgIH0KICAgICAgICBxLmNsb3NlQWxsKCk7CiAgICAgICAg\ncG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFF1\nZXJ5UmFuZ2UoKSB7CiAgICAgICAgaW5zZXJ0TWFueVN0cmluZ0xpc3QoKTsK\nICAgICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNoUGxhbikgcG0uZ2V0RmV0\nY2hQbGFuKCk7CiAgICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpv\naW5QQy5jbGFzcywgInN0cmluZ0xpc3QiKTsKICAgICAgICBmZXRjaC5zZXRG\nZXRjaEJhdGNoU2l6ZSgzKTsKICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IHBt\nLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCIiLEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3Mp\nOwogICAgICAgIC8vRklYTUUganRob21hcwogICAgICAgIC8vcS5zZXRPcmRl\ncmluZygibmFtZSBhc2NlbmRpbmciKTsKICAgICAgICAvL3Euc2V0UmFuZ2Uo\nNSwgMjApOwogICAgICAgIAogICAgICAgIExpc3QgcmVzdWx0cyA9IChMaXN0\nKSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNSwg\ncmVzdWx0cy5zaXplKCkpOwogICAgICAgIAogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgcmVzdWx0cy5zaXplKCk7IGkrKykgewogICAgICAgICAgICBF\nYWdlck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIHJlc3Vs\ndHMuZ2V0KGkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoU3RyaW5nLnZh\nbHVlT2YoaSArIDUpLCBwYy5nZXROYW1lKCkpOwogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoMiwgcGMuZ2V0U3RyaW5nTGlzdCgpLnNpemUoKSk7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscygoaSArIDUpICsgIi4xIiwgcGMuZ2V0U3Ry\naW5nTGlzdCgpLmdldCgwKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygo\naSArIDUpICsgIi4yIiwgcGMuZ2V0U3RyaW5nTGlzdCgpLmdldCgxKSk7CiAg\nICAgICAgfQogICAgICAgIHEuY2xvc2VBbGwoKTsKICAgICAgICBwbS5jbG9z\nZSgpOwogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgaW5zZXJ0TWFueVN0\ncmluZ0xpc3QoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOwogICAgICAgIHN0YXJ0VHgocG0pOzsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IDEwOyBpKyspIHsKICAgICAgICAgICAgRWFnZXJPdXRlckpvaW5Q\nQyBwYyA9IG5ldyBFYWdlck91dGVySm9pblBDKCk7CiAgICAgICAgICAgIHBj\nLnNldE5hbWUoU3RyaW5nLnZhbHVlT2YoaSkpOwogICAgICAgICAgICBwYy5n\nZXRTdHJpbmdMaXN0KCkuYWRkKGkgKyAiLjEiKTsKICAgICAgICAgICAgcGMu\nZ2V0U3RyaW5nTGlzdCgpLmFkZChpICsgIi4yIik7CiAgICAgICAgICAgIHBt\nLnBlcnNpc3QocGMpOwogICAgICAgIH0KICAgICAgICBlbmRUeChwbSk7Owog\nICAgICAgIHBtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFYWdlclRvT25lVGhlbkVhZ2VyVG9NYW55KCkgewogICAgICAgIGlu\nc2VydEVhZ2VycygpOwogICAgICAgIAogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBGZXRjaFBsYW4gZmV0Y2ggPSAoRmV0Y2hQ\nbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBmZXRjaC5hZGRGaWVs\nZChFYWdlck91dGVySm9pblBDMi5jbGFzcywgInJlZiIpOwogICAgICAgIGZl\ndGNoLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJzdHJpbmdD\nb2xsZWN0aW9uIik7CiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5jcmVh\ndGVOYXRpdmVRdWVyeSgiIixFYWdlck91dGVySm9pblBDMi5jbGFzcyk7CiAg\nICAgICAgLy9GSVhNRSBqdGhvbWFzCiAgICAgICAgLy9xLnNldE9yZGVyaW5n\nKCJuYW1lIGFzY2VuZGluZyIpOwogICAgICAgIENvbGxlY3Rpb24gcmVzdWx0\ncyA9IChDb2xsZWN0aW9uKSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMobmV3IEFycmF5TGlzdChyZXN1bHRzKS50b1N0cmluZygp\nLCAyLCByZXN1bHRzLnNpemUoKSk7CiAgICAgICAgCiAgICAgICAgSXRlcmF0\nb3IgaXRyID0gcmVzdWx0cy5pdGVyYXRvcigpOwogICAgICAgIEVhZ2VyT3V0\nZXJKb2luUEMyIHJlZiA9IChFYWdlck91dGVySm9pblBDMikgaXRyLm5leHQo\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInIxIiwgcmVmLmdldE5hbWUoKSk7\nCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYyA9IHJlZi5nZXRSZWYoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoIjEiLCBwYy5nZXROYW1lKCkpOwogICAg\nICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCku\nc2l6ZSgpKTsKICAgICAgICBhc3NlcnRUcnVlKHBjLmdldFN0cmluZ0NvbGxl\nY3Rpb24oKS5jb250YWlucygiMS4xIikpOwogICAgICAgIGFzc2VydFRydWUo\ncGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmNvbnRhaW5zKCIxLjIiKSk7CiAg\nICAgICAgCiAgICAgICAgcmVmID0gKEVhZ2VyT3V0ZXJKb2luUEMyKSBpdHIu\nbmV4dCgpOwogICAgICAgIGFzc2VydEVxdWFscygicjIiLCByZWYuZ2V0TmFt\nZSgpKTsKICAgICAgICBhc3NlcnRUcnVlKHBjID09IHJlZi5nZXRSZWYoKSk7\nCiAgICAgICAgCiAgICAgICAgYXNzZXJ0VHJ1ZSghaXRyLmhhc05leHQoKSk7\nCiAgICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZv\naWQgdGVzdEVhZ2VyVG9NYW55VGhlbkVhZ2VyVG9PbmUoKSB7CiAgICAgICAg\naW5zZXJ0RWFnZXJzKCk7CiAgICAgICAgCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50\naXR5TWFuYWdlcigpOwogICAgICAgIEZldGNoUGxhbiBmZXRjaCA9IChGZXRj\naFBsYW4pIHBtLmdldEZldGNoUGxhbigpOwogICAgICAgIGZldGNoLmFkZEZp\nZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJtYW55TWFueUxpc3QiKTsK\nICAgICAgICBmZXRjaC5hZGRGaWVsZChFYWdlck91dGVySm9pblBDMi5jbGFz\ncywgImhlbHBlciIpOwogICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3Jl\nYXRlTmF0aXZlUXVlcnkoIiIsRWFnZXJPdXRlckpvaW5QQy5jbGFzcyk7CiAg\nICAgICAgLy9GSVhNRSBqdGhvbWFzCiAgICAgICAgLy9xLnNldE9yZGVyaW5n\nKCJuYW1lIGFzY2VuZGluZyIpOwogICAgICAgIENvbGxlY3Rpb24gcmVzdWx0\ncyA9IChDb2xsZWN0aW9uKSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgcmVzdWx0cy5zaXplKCkpOwogICAgICAgIAogICAg\nICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykg\ncmVzdWx0cy5pdGVyYXRvcigpLm5leHQoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoIjEiLCBwYy5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygy\nLCBwYy5nZXRNYW55TWFueUxpc3QoKS5zaXplKCkpOwogICAgICAgIEVhZ2Vy\nT3V0ZXJKb2luUEMyIHJlZiA9IChFYWdlck91dGVySm9pblBDMikKICAgICAg\nICBwYy5nZXRNYW55TWFueUxpc3QoKS5nZXQoMCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJyMSIsIHJlZi5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscygiaDEiLCByZWYuZ2V0SGVscGVyKCkuZ2V0U3RyaW5nRmllbGQoKSk7\nCiAgICAgICAgcmVmID0gKEVhZ2VyT3V0ZXJKb2luUEMyKSBwYy5nZXRNYW55\nTWFueUxpc3QoKS5nZXQoMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJyMiIs\nIHJlZi5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiaDIiLCBy\nZWYuZ2V0SGVscGVyKCkuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAgICAgCiAg\nICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdEVhZ2VyVG9NYW55VGhlbkVhZ2VyVG9NYW55KCkgewogICAgICAgIGlu\nc2VydEVhZ2VycygpOwogICAgICAgIAogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBGZXRjaFBsYW4gZmV0Y2ggPSAoRmV0Y2hQ\nbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBmZXRjaC5hZGRGaWVs\nZChFYWdlck91dGVySm9pblBDLmNsYXNzLCAibWFueU1hbnlMaXN0Iik7CiAg\nICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpvaW5QQzIuY2xhc3Ms\nICJzdHJpbmdDb2xsZWN0aW9uIik7CiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEg\nPSBwbS5jcmVhdGVOYXRpdmVRdWVyeSgiIixFYWdlck91dGVySm9pblBDLmNs\nYXNzKTsKICAgICAgICAvL0ZJWE1FIGp0aG9tYXMKICAgICAgICAvL3Euc2V0\nT3JkZXJpbmcoIm5hbWUgYXNjZW5kaW5nIik7CiAgICAgICAgQ29sbGVjdGlv\nbiByZXN1bHRzID0gKENvbGxlY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIGFzc2VydEVxdWFscygxLCByZXN1bHRzLnNpemUoKSk7CiAgICAg\nICAgCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYyA9IChFYWdlck91dGVy\nSm9pblBDKSByZXN1bHRzLml0ZXJhdG9yKCkubmV4dCgpOwogICAgICAgIGFz\nc2VydEVxdWFscygiMSIsIHBjLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDIsIHBjLmdldE1hbnlNYW55TGlzdCgpLnNpemUoKSk7CiAgICAg\nICAgRWFnZXJPdXRlckpvaW5QQzIgcmVmID0gKEVhZ2VyT3V0ZXJKb2luUEMy\nKQogICAgICAgIHBjLmdldE1hbnlNYW55TGlzdCgpLmdldCgwKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoInIxIiwgcmVmLmdldE5hbWUoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIHJlZi5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuc2l6\nZSgpKTsKICAgICAgICBhc3NlcnRUcnVlKHJlZi5nZXRTdHJpbmdDb2xsZWN0\naW9uKCkuY29udGFpbnMoInIxLjEiKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShy\nZWYuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmNvbnRhaW5zKCJyMS4yIikpOwog\nICAgICAgIAogICAgICAgIHJlZiA9IChFYWdlck91dGVySm9pblBDMikgcGMu\nZ2V0TWFueU1hbnlMaXN0KCkuZ2V0KDEpOwogICAgICAgIGFzc2VydEVxdWFs\ncygicjIiLCByZWYuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMiwgcmVmLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5zaXplKCkpOwogICAgICAg\nIGFzc2VydFRydWUocmVmLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5jb250YWlu\ncygicjIuMSIpKTsKICAgICAgICBhc3NlcnRUcnVlKHJlZi5nZXRTdHJpbmdD\nb2xsZWN0aW9uKCkuY29udGFpbnMoInIyLjIiKSk7CiAgICAgICAgCiAgICAg\nICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVz\ndEVhZ2VyVG9PbmVBbmRUb01hbnlUaGVuRWFnZXJUb09uZSgpIHsKICAgICAg\nICBPYmplY3Qgb2lkID0gaW5zZXJ0RWFnZXJzKCk7CiAgICAgICAgCiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFu\nYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIEZldGNoUGxh\nbiBmZXRjaCA9IChGZXRjaFBsYW4pIHBtLmdldEZldGNoUGxhbigpOwogICAg\nICAgIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJv\nbmVNYW55Q29sbGVjdGlvbiIpOwogICAgICAgIGZldGNoLmFkZEZpZWxkKEVh\nZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJoZWxwZXIiKTsKICAgICAgICBmZXRj\naC5hZGRGaWVsZChFYWdlck91dGVySm9pblBDMi5jbGFzcywgImhlbHBlciIp\nOwogICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlTmF0aXZlUXVl\ncnkoIiIsRWFnZXJPdXRlckpvaW5QQy5jbGFzcyk7CiAgICAgICAgLy9GSVhN\nRSBqdGhvbWFzCiAgICAgICAgLy9xLnNldE9yZGVyaW5nKCJuYW1lIGFzY2Vu\nZGluZyIpOwogICAgICAgIENvbGxlY3Rpb24gcmVzdWx0cyA9IChDb2xsZWN0\naW9uKSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgcmVzdWx0cy5zaXplKCkpOwogICAgICAgIAogICAgICAgIEVhZ2VyT3V0\nZXJKb2luUEMgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykgcmVzdWx0cy5pdGVy\nYXRvcigpLm5leHQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjEiLCBwYy5n\nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiaDMiLCBwYy5nZXRI\nZWxwZXIoKS5nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMiwgcGMuZ2V0T25lTWFueUNvbGxlY3Rpb24oKS5zaXplKCkpOwogICAg\nICAgIEl0ZXJhdG9yIGl0ciA9IHBjLmdldE9uZU1hbnlDb2xsZWN0aW9uKCku\naXRlcmF0b3IoKTsKICAgICAgICBFYWdlck91dGVySm9pblBDMiByZWYgPSAo\nRWFnZXJPdXRlckpvaW5QQzIpIGl0ci5uZXh0KCk7CiAgICAgICAgaWYgKCJy\nMSIuZXF1YWxzKHJlZi5nZXROYW1lKCkpKSB7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscygiaDEiLCByZWYuZ2V0SGVscGVyKCkuZ2V0U3RyaW5nRmllbGQo\nKSk7CiAgICAgICAgICAgIHJlZiA9IChFYWdlck91dGVySm9pblBDMikgaXRy\nLm5leHQoKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJyMiIsIHJlZi5n\nZXROYW1lKCkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoImgyIiwgcmVm\nLmdldEhlbHBlcigpLmdldFN0cmluZ0ZpZWxkKCkpOwogICAgICAgIH0gZWxz\nZSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygicjIiLCByZWYuZ2V0TmFt\nZSgpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJoMiIsIHJlZi5nZXRI\nZWxwZXIoKS5nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICAgICAgcmVmID0g\nKEVhZ2VyT3V0ZXJKb2luUEMyKSBpdHIubmV4dCgpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoInIxIiwgcmVmLmdldE5hbWUoKSk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscygiaDEiLCByZWYuZ2V0SGVscGVyKCkuZ2V0U3RyaW5n\nRmllbGQoKSk7CiAgICAgICAgfQogICAgICAgIGFzc2VydFRydWUoIWl0ci5o\nYXNOZXh0KCkpOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICB9CiAgICAKICAg\nIHByaXZhdGUgT2JqZWN0IGluc2VydEVhZ2VycygpIHsKICAgICAgICBFYWdl\nck91dGVySm9pblBDIHBjMSA9IG5ldyBFYWdlck91dGVySm9pblBDKCk7CiAg\nICAgICAgcGMxLnNldE5hbWUoIjEiKTsKICAgICAgICBwYzEuZ2V0U3RyaW5n\nQ29sbGVjdGlvbigpLmFkZCgiMS4xIik7CiAgICAgICAgcGMxLmdldFN0cmlu\nZ0NvbGxlY3Rpb24oKS5hZGQoIjEuMiIpOwogICAgICAgIAogICAgICAgIEVh\nZ2VyT3V0ZXJKb2luUEMyIHJlZjEgPSBuZXcgRWFnZXJPdXRlckpvaW5QQzIo\nKTsKICAgICAgICByZWYxLnNldE5hbWUoInIxIik7CiAgICAgICAgcmVmMS5n\nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRkKCJyMS4xIik7CiAgICAgICAgcmVm\nMS5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRkKCJyMS4yIik7CiAgICAgICAg\nCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQzIgcmVmMiA9IG5ldyBFYWdlck91\ndGVySm9pblBDMigpOwogICAgICAgIHJlZjIuc2V0TmFtZSgicjIiKTsKICAg\nICAgICByZWYyLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoInIyLjEiKTsK\nICAgICAgICByZWYyLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoInIyLjIi\nKTsKICAgICAgICAKICAgICAgICBIZWxwZXJQQyBocGMxID0gbmV3IEhlbHBl\nclBDKCk7CiAgICAgICAgaHBjMS5zZXRTdHJpbmdGaWVsZCgiaDEiKTsKICAg\nICAgICAKICAgICAgICBIZWxwZXJQQyBocGMyID0gbmV3IEhlbHBlclBDKCk7\nCiAgICAgICAgaHBjMi5zZXRTdHJpbmdGaWVsZCgiaDIiKTsKICAgICAgICAK\nICAgICAgICBIZWxwZXJQQyBocGMzID0gbmV3IEhlbHBlclBDKCk7CiAgICAg\nICAgaHBjMy5zZXRTdHJpbmdGaWVsZCgiaDMiKTsKICAgICAgICAKICAgICAg\nICBwYzEuZ2V0TWFueU1hbnlMaXN0KCkuYWRkKHJlZjEpOwogICAgICAgIHBj\nMS5nZXRPbmVNYW55Q29sbGVjdGlvbigpLmFkZChyZWYxKTsKICAgICAgICBy\nZWYxLnNldFJlZihwYzEpOwogICAgICAgIHBjMS5nZXRNYW55TWFueUxpc3Qo\nKS5hZGQocmVmMik7CiAgICAgICAgcGMxLmdldE9uZU1hbnlDb2xsZWN0aW9u\nKCkuYWRkKHJlZjIpOwogICAgICAgIHJlZjIuc2V0UmVmKHBjMSk7CiAgICAg\nICAgCiAgICAgICAgcmVmMS5zZXRIZWxwZXIoaHBjMSk7CiAgICAgICAgcmVm\nMi5zZXRIZWxwZXIoaHBjMik7CiAgICAgICAgcGMxLnNldEhlbHBlcihocGMz\nKTsKICAgICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgc3RhcnRUeChwbSk7OwogICAgICAgIHBtLnBlcnNpc3QocGMx\nKTsKICAgICAgICBlbmRUeChwbSk7OwogICAgICAgIE9iamVjdCBvaWQgPSBw\nbS5nZXRPYmplY3RJZChwYzEpOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICAg\nICAgcmV0dXJuIG9pZDsKICAgIH0KICAgIAogICAgCn0K\n","encoding":"base64"}

