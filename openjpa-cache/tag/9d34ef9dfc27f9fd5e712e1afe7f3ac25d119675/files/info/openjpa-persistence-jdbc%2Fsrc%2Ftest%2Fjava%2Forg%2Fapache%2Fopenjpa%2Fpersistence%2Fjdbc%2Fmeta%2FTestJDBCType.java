{"sha":"6cb687ae511534fb62b60417ce20afd4d04fc909","node_id":"MDQ6QmxvYjIwNjM2NDo2Y2I2ODdhZTUxMTUzNGZiNjJiNjA0MTdjZTIwYWZkNGQwNGZjOTA5","size":5003,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6cb687ae511534fb62b60417ce20afd4d04fc909","content":"LyoKICogVGVzdEpEQkNUeXBlLmphdmEKICoKICogQ3JlYXRlZCBvbiBPY3Rv\nYmVyIDMsIDIwMDYsIDQ6MTEgUE0KICoKICogVG8gY2hhbmdlIHRoaXMgdGVt\ncGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFnZXIKICogYW5k\nIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuCiAqLwoKLyoKICog\nTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChB\nU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2Ug\nYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJpYnV0\nZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24K\nICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxp\nY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBM\naWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlvdSBt\nYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UKICog\nd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0\naGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGlj\nZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFw\ncGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0\nd2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmli\ndXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJ\nRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNw\nZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGlt\naXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5tZXRhOwoK\naW1wb3J0IGphdmEudXRpbC4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb25JbXBsOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBp\nbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLk1hcHBp\nbmdSZXBvc2l0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nbWV0YS5SZWZyZXNoU3RyYXRlZ3lJbnN0YWxsZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0cy5CbG9iVmFsdWVIYW5kbGVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHMu\nQ2xvYlZhbHVlSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLm1ldGEuc3RyYXRzLk1heEVtYmVkZGVkQ2xvYkZpZWxkU3RyYXRlZ3k7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0cy5T\ndHJpbmdGaWVsZFN0cmF0ZWd5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNjaGVtYS5TY2hlbWFHcm91cDsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5UYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnk7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuY29tbW9uLmFwcHMuKjsK\nCgppbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uQW5ub3RhdGlvbjsKaW1w\nb3J0IGp1bml0LmZyYW1ld29yay4qOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eU1hbmFnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50\naXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1l\ndGEuSmF2YVNRTFR5cGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc2NoZW1hLkNvbHVtbjsKCnB1YmxpYyBjbGFzcyBUZXN0SkRCQ1R5cGUg\nZXh0ZW5kcyBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5r\nZXJuZWwuQmFzZUpEQkNUZXN0CnsKCQogICAgLyoqIENyZWF0ZXMgYSBuZXcg\naW5zdGFuY2Ugb2YgVGVzdEpEQkNUeXBlICovCiAgICBwdWJsaWMgVGVzdEpE\nQkNUeXBlKFN0cmluZyBuYW1lKSAKICAgIHsKICAgIAlzdXBlcihuYW1lKTsK\nICAgIH0KICAgIC8qKgogICAgICogVGVzdHMgdGhhdCBhcHBsaWNhdGlvbiBp\nZGVudGl0eSBjbGFzc2VzIGFyZSByZXR1cm5lZCBjb3JyZWN0bHkuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RTY2hlbWFHZW5lcmF0aW9uKCkgewog\nICAgICAgIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSBuZXcgSkRCQ0NvbmZp\nZ3VyYXRpb25JbXBsKCk7CiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSBj\nb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgTWFwcGlu\nZ1JlcG9zaXRvcnkgcmVwb3MgPSBjb25mLmdldE1hcHBpbmdSZXBvc2l0b3J5\nSW5zdGFuY2UoKTsKICAgICAgICByZXBvcy5zZXRTdHJhdGVneUluc3RhbGxl\ncihuZXcgUmVmcmVzaFN0cmF0ZWd5SW5zdGFsbGVyKHJlcG9zKSk7CiAgICAg\nICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcgPSByZXBvcy5nZXRNYXBwaW5nKENv\nbHVtbi5jbGFzcywgbnVsbCwgdHJ1ZSk7CgogICAgICAgIENsYXNzIGNsczsK\nICAgICAgICBpZiAoZGljdC5nZXRQcmVmZXJyZWRUeXBlKEphdmFTUUxUeXBl\ncy5DTE9CKSA9PSAgSmF2YVNRTFR5cGVzLkNMT0IpIHsKICAgICAgICAgICAg\naWYgKGRpY3QubWF4RW1iZWRkZWRDbG9iU2l6ZSA+IDApIHsKICAgICAgICAg\nICAgICAgIGNscyA9IG1hcHBpbmcuZ2V0RmllbGRNYXBwaW5nKCJ0b0Nsb2Ii\nKS5nZXRTdHJhdGVneSgpLgogICAgICAgICAgICAgICAgICAgIGdldENsYXNz\nKCk7CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKGNscy5nZXROYW1lKCks\nCiAgICAgICAgICAgICAgICAgICAgTWF4RW1iZWRkZWRDbG9iRmllbGRTdHJh\ndGVneS5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGNscykpOwogICAgICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2xzID0gbWFwcGluZy5nZXRG\naWVsZE1hcHBpbmcoInRvQ2xvYiIpLmdldEhhbmRsZXIoKS4KICAgICAgICAg\nICAgICAgICAgICBnZXRDbGFzcygpOwogICAgICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZShjbHMuZ2V0TmFtZSgpLAogICAgICAgICAgICAgICAgICAgIENsb2JW\nYWx1ZUhhbmRsZXIuY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShjbHMpKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0gZWxzZQogICAgICAgICAgICBhc3NlcnRU\ncnVlKG1hcHBpbmcuZ2V0RmllbGRNYXBwaW5nKCJ0b0Nsb2IiKS5nZXRTdHJh\ndGVneSgpCiAgICAgICAgICAgICAgICBpbnN0YW5jZW9mIFN0cmluZ0ZpZWxk\nU3RyYXRlZ3kpOwoKICAgICAgICBjbHMgPSBtYXBwaW5nLmdldEZpZWxkTWFw\ncGluZygidG9CbG9iIikuZ2V0SGFuZGxlcigpLmdldENsYXNzKCk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZShjbHMuZ2V0TmFtZSgpLAogICAgICAgICAgICBCbG9i\nVmFsdWVIYW5kbGVyLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oY2xzKSk7Cgog\nICAgICAgIFNjaGVtYUdyb3VwIHNjaGVtYSA9IHJlcG9zLmdldFNjaGVtYUdy\nb3VwKCk7CiAgICAgICAgVGFibGUgdGFibGUgPSBzY2hlbWEuZ2V0U2NoZW1h\ncygpWzBdLmdldFRhYmxlcygpWzBdOwogICAgICAgIENvbHVtbltdIGNvbHMg\nPSB0YWJsZS5nZXRDb2x1bW5zKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChjb2xz\nW2ldLmdldE5hbWUoKS5lcXVhbHNJZ25vcmVDYXNlKCJpZCIpCiAgICAgICAg\nICAgICAgICB8fCBjb2xzW2ldLmdldE5hbWUoKS5lcXVhbHNJZ25vcmVDYXNl\nKCJ2ZXJzbiIpCiAgICAgICAgICAgICAgICB8fCBjb2xzW2ldLmdldE5hbWUo\nKS5lcXVhbHNJZ25vcmVDYXNlKCJ0eXAiKSkKICAgICAgICAgICAgICAgIGNv\nbnRpbnVlOwogICAgICAgICAgICBpZiAoImxvbmdUb0ludCIuZXF1YWxzSWdu\nb3JlQ2FzZShjb2xzW2ldLmdldE5hbWUoKSkpCiAgICAgICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoZGljdC5nZXRQcmVmZXJyZWRUeXBlKEphdmFTUUxUeXBl\ncy5JTlQpLAogICAgICAgICAgICAgICAgICAgIGNvbHNbaV0uZ2V0VHlwZSgp\nKTsKICAgICAgICAgICAgZWxzZSBpZiAoImxvbmdUb1NRTCIuZXF1YWxzSWdu\nb3JlQ2FzZShjb2xzW2ldLmdldE5hbWUoKSkpCiAgICAgICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoInZhcmNoYXIiLCBjb2xzW2ldLmdldFR5cGVOYW1lKCkp\nOwogICAgICAgICAgICBlbHNlIGlmICgidG9DbG9iIi5lcXVhbHNJZ25vcmVD\nYXNlKGNvbHNbaV0uZ2V0TmFtZSgpKSkKICAgICAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhkaWN0LmdldFByZWZlcnJlZFR5cGUoSmF2YVNRTFR5cGVzLkNM\nT0IpLAogICAgICAgICAgICAgICAgICAgIGNvbHNbaV0uZ2V0VHlwZSgpKTsK\nICAgICAgICAgICAgZWxzZSBpZiAoInRvQmxvYiIuZXF1YWxzSWdub3JlQ2Fz\nZShjb2xzW2ldLmdldE5hbWUoKSkpCiAgICAgICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoZGljdC5nZXRQcmVmZXJyZWRUeXBlKEphdmFTUUxUeXBlcy5CTE9C\nKSwKICAgICAgICAgICAgICAgICAgICBjb2xzW2ldLmdldFR5cGUoKSk7CiAg\nICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZhaWwoIlVua25vd24g\nY29sdW1uOiIgKyBjb2xzW2ldLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAg\nfSAgICAKfQo=\n","encoding":"base64"}

