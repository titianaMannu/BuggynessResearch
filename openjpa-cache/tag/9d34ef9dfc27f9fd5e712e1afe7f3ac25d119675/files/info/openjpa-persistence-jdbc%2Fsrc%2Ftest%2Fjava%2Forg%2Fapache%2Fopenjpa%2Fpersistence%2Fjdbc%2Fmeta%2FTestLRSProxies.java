{"sha":"84f2e672db31aa5a3fa3e736e67020798f90882c","node_id":"MDQ6QmxvYjIwNjM2NDo4NGYyZTY3MmRiMzFhYTVhM2ZhM2U3MzZlNjcwMjA3OThmOTA4ODJj","size":20136,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/84f2e672db31aa5a3fa3e736e67020798f90882c","content":"LyoKICogVGVzdExSU1Byb3hpZXMuamF2YQogKgogKiBDcmVhdGVkIG9uIE9j\ndG9iZXIgMywgMjAwNiwgNTowMSBQTQogKgogKiBUbyBjaGFuZ2UgdGhpcyB0\nZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFuYWdlcgogKiBh\nbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4KICovCgovKgog\nKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24g\nKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5z\nZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmli\ndXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlv\nbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0Yg\nbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQog\nKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9m\nIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9s\naWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkg\nYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNv\nZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3Ry\naWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFO\nVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhw\ncmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICog\nc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBs\naW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4gICAgCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLm1ldGE7\nCgppbXBvcnQgamF2YS51dGlsLio7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi5qZGJjLkpEQkNFdmVudDsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5jb21tb24uYXBwcy4q\nOwoKCmltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5Bbm5vdGF0aW9uOwpp\nbXBvcnQganVuaXQuZnJhbWV3b3JrLio7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyOwoKCnB1YmxpYyBjbGFzcyBUZXN0TFJTUHJveGllcyBl\neHRlbmRzIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmtl\ncm5lbC5CYXNlSkRCQ1Rlc3R7CiAgIAogICAgcHJpdmF0ZSBPYmplY3QgX29p\nZCA9IG51bGw7CiAgICBwcml2YXRlIE9iamVjdCBfY29pZCA9IG51bGw7CiAg\nICAKICAgIHB1YmxpYyBUZXN0TFJTUHJveGllcyhTdHJpbmcgY2FzZW5hbWUp\nIHsKICAgICAgICBzdXBlcihjYXNlbmFtZSk7CiAgICB9CiAgICAKICAgIAog\nICAgLyoqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdExSU1Byb3hp\nZXMgKi8KICAgIHB1YmxpYyBUZXN0TFJTUHJveGllcygpIHsKICAgIH0KICAg\nIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgZGVsZXRlQWxsKExSU1BD\nLmNsYXNzKTsKICAgICAgIGRlbGV0ZUFsbChMUlNDb21wb3VuZFBDLmNsYXNz\nKTsKICAgICAgICAKICAgICAgICBMUlNQQyBwYyA9IG5ldyBMUlNQQygibWFp\nbiIpOwogICAgICAgIAogICAgICAgIHBjLmdldFN0cmluZ1NldCgpLmFkZCgi\ndmFsMSIpOwogICAgICAgIHBjLmdldFN0cmluZ1NldCgpLmFkZCgidmFsMiIp\nOwogICAgICAgIHBjLmdldFN0cmluZ1NldCgpLmFkZCgidmFsMyIpOwogICAg\nICAgIAogICAgICAgIHBjLmdldFJlbFNldCgpLmFkZChuZXcgTFJTUEMoInNl\ndDEiKSk7CiAgICAgICAgcGMuZ2V0UmVsU2V0KCkuYWRkKG5ldyBMUlNQQygi\nc2V0MiIpKTsKICAgICAgICBwYy5nZXRSZWxTZXQoKS5hZGQobmV3IExSU1BD\nKCJzZXQzIikpOwogICAgICAgIAogICAgICAgIHBjLmdldFN0cmluZ0NvbGxl\nY3Rpb24oKS5hZGQoInZhbDEiKTsKICAgICAgICBwYy5nZXRTdHJpbmdDb2xs\nZWN0aW9uKCkuYWRkKCJ2YWwyIik7CiAgICAgICAgcGMuZ2V0U3RyaW5nQ29s\nbGVjdGlvbigpLmFkZCgidmFsMyIpOwogICAgICAgIAogICAgICAgIHBjLmdl\ndFJlbENvbGxlY3Rpb24oKS5hZGQobmV3IExSU1BDKCJzZXQxIikpOwogICAg\nICAgIHBjLmdldFJlbENvbGxlY3Rpb24oKS5hZGQobmV3IExSU1BDKCJzZXQy\nIikpOwogICAgICAgIHBjLmdldFJlbENvbGxlY3Rpb24oKS5hZGQobmV3IExS\nU1BDKCJzZXQzIikpOwogICAgICAgIAogICAgICAgIHBjLmdldFN0cmluZ01h\ncCgpLnB1dCgia2V5MSIsICIxIik7CiAgICAgICAgcGMuZ2V0U3RyaW5nTWFw\nKCkucHV0KCJrZXkyIiwgIjIiKTsKICAgICAgICBwYy5nZXRTdHJpbmdNYXAo\nKS5wdXQoImtleTMiLCAiMyIpOwogICAgICAgIAogICAgICAgIHBjLmdldFJl\nbE1hcCgpLnB1dCgia2V5MSIsIG5ldyBMUlNQQygibWFwMSIpKTsKICAgICAg\nICBwYy5nZXRSZWxNYXAoKS5wdXQoImtleTIiLCBuZXcgTFJTUEMoIm1hcDIi\nKSk7CiAgICAgICAgcGMuZ2V0UmVsTWFwKCkucHV0KCJrZXkzIiwgbmV3IExS\nU1BDKCJtYXAzIikpOwogICAgICAgIAogICAgICAgIExSU0NvbXBvdW5kUEMg\nY3BjID0gbmV3IExSU0NvbXBvdW5kUEMoIm1haW4iKTsKICAgICAgICAKICAg\nICAgICBjcGMuZ2V0U3RyaW5nU2V0KCkuYWRkKCJ2YWwxIik7CiAgICAgICAg\nY3BjLmdldFN0cmluZ1NldCgpLmFkZCgidmFsMiIpOwogICAgICAgIGNwYy5n\nZXRTdHJpbmdTZXQoKS5hZGQoInZhbDMiKTsKICAgICAgICAKICAgICAgICBj\ncGMuZ2V0UmVsU2V0KCkuYWRkKG5ldyBMUlNDb21wb3VuZFBDKCJzZXQxIikp\nOwogICAgICAgIGNwYy5nZXRSZWxTZXQoKS5hZGQobmV3IExSU0NvbXBvdW5k\nUEMoInNldDIiKSk7CiAgICAgICAgY3BjLmdldFJlbFNldCgpLmFkZChuZXcg\nTFJTQ29tcG91bmRQQygic2V0MyIpKTsKICAgICAgICAKICAgICAgICBjcGMu\nZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmFkZCgidmFsMSIpOwogICAgICAgIGNw\nYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRkKCJ2YWwyIik7CiAgICAgICAg\nY3BjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoInZhbDMiKTsKICAgICAg\nICAKICAgICAgICBjcGMuZ2V0UmVsQ29sbGVjdGlvbigpLmFkZChuZXcgTFJT\nQ29tcG91bmRQQygic2V0MSIpKTsKICAgICAgICBjcGMuZ2V0UmVsQ29sbGVj\ndGlvbigpLmFkZChuZXcgTFJTQ29tcG91bmRQQygic2V0MiIpKTsKICAgICAg\nICBjcGMuZ2V0UmVsQ29sbGVjdGlvbigpLmFkZChuZXcgTFJTQ29tcG91bmRQ\nQygic2V0MyIpKTsKICAgICAgICAKICAgICAgICBjcGMuZ2V0U3RyaW5nTWFw\nKCkucHV0KCJrZXkxIiwgIjEiKTsKICAgICAgICBjcGMuZ2V0U3RyaW5nTWFw\nKCkucHV0KCJrZXkyIiwgIjIiKTsKICAgICAgICBjcGMuZ2V0U3RyaW5nTWFw\nKCkucHV0KCJrZXkzIiwgIjMiKTsKICAgICAgICAKICAgICAgICBjcGMuZ2V0\nUmVsTWFwKCkucHV0KCJrZXkxIiwgbmV3IExSU0NvbXBvdW5kUEMoIm1hcDEi\nKSk7CiAgICAgICAgY3BjLmdldFJlbE1hcCgpLnB1dCgia2V5MiIsIG5ldyBM\nUlNDb21wb3VuZFBDKCJtYXAyIikpOwogICAgICAgIGNwYy5nZXRSZWxNYXAo\nKS5wdXQoImtleTMiLCBuZXcgTFJTQ29tcG91bmRQQygibWFwMyIpKTsKICAg\nICAgICAKICAgICAgICAKICAgICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9IGdldEVtKGZhbHNlLCBmYWxzZSk7CiAgICAgICAgCiAg\nICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgcG0ucGVyc2lzdChwYyk7CiAg\nICAgICAgcG0ucGVyc2lzdChjcGMpOwogICAgICAgIGVuZFR4KHBtKTsKICAg\nICAgICBfb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMpOwogICAgICAgIF9jb2lk\nID0gcG0uZ2V0T2JqZWN0SWQoY3BjKTsKICAgICAgICBwbS5jbG9zZSgpOwog\nICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RyaW5nU2V0KCkgewog\nICAgICAgIHN0cmluZ0NvbGxlY3Rpb25UZXN0KF9vaWQsIHRydWUsIHRydWUp\nOwogICAgICAgIHN0cmluZ0NvbGxlY3Rpb25UZXN0KF9jb2lkLCB0cnVlLCB0\ncnVlKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFN0cmluZ1Nl\ndFJldGFpbigpIHsKICAgICAgICBzdHJpbmdDb2xsZWN0aW9uVGVzdChfb2lk\nLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgc3RyaW5nQ29sbGVjdGlvblRlc3Qo\nX2NvaWQsIGZhbHNlLCB0cnVlKTsKICAgIH0KICAgIAogICAgcHVibGljIHZv\naWQgdGVzdFN0cmluZ0NvbGxlY3Rpb24oKSB7CiAgICAgICAgc3RyaW5nQ29s\nbGVjdGlvblRlc3QoX29pZCwgdHJ1ZSwgZmFsc2UpOwogICAgICAgIHN0cmlu\nZ0NvbGxlY3Rpb25UZXN0KF9jb2lkLCB0cnVlLCBmYWxzZSk7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHRlc3RTdHJpbmdDb2xsZWN0aW9uUmV0YWlu\nKCkgewogICAgICAgIHN0cmluZ0NvbGxlY3Rpb25UZXN0KF9vaWQsIGZhbHNl\nLCBmYWxzZSk7CiAgICAgICAgc3RyaW5nQ29sbGVjdGlvblRlc3QoX2NvaWQs\nIGZhbHNlLCBmYWxzZSk7CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBz\ndHJpbmdDb2xsZWN0aW9uVGVzdChPYmplY3Qgb2lkLCBib29sZWFuIGNsb3Nl\nLAogICAgICAgICAgICBib29sZWFuIGlzU2V0KSB7CiAgICAgICAgLy9GSVhN\nRSBqdGhvbWFzCiAgICAgICAgLy9QZXJzaXN0ZW5jZU1hbmFnZXIgcG0gPSBn\nZXRQTSghY2xvc2UsICFjbG9zZSk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1h\nbmFnZXIgcG0gPW51bGw7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAg\nCiAgICAgICAgTFJTUENJbnRmIHBjID0gKExSU1BDSW50ZikgcG0uZ2V0T2Jq\nZWN0SWQob2lkKTsKICAgICAgICAKICAgICAgICAvLyBjaGVjayB0aGF0IG9y\naWcgdmFsdWVzIGFyZSBjb3JyZWN0CiAgICAgICAgQ29sbGVjdGlvbiBzZXQg\nPSBpc1NldCA/IHBjLmdldFN0cmluZ1NldCgpIDogcGMuZ2V0U3RyaW5nQ29s\nbGVjdGlvbigpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBzZXQuc2l6ZSgp\nKTsKICAgICAgICBhc3NlcnRUcnVlKHNldC5jb250YWlucygidmFsMSIpKTsK\nICAgICAgICBhc3NlcnRUcnVlKHNldC5jb250YWlucygidmFsMiIpKTsKICAg\nICAgICBhc3NlcnRUcnVlKHNldC5jb250YWlucygidmFsMyIpKTsKICAgICAg\nICBpZiAoIWlzU2V0KSB7CiAgICAgICAgICAgIEl0ZXJhdG9yIGl0ciA9IHNl\ndC5pdGVyYXRvcigpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoInZhbDEi\nLCBpdHIubmV4dCgpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJ2YWwy\nIiwgaXRyLm5leHQoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygidmFs\nMyIsIGl0ci5uZXh0KCkpOwogICAgICAgICAgICAvL0ZJWE1FIGp0aG9tYXMK\nICAgICAgICAgICAgLy9Lb2RvSkRPSGVscGVyLmNsb3NlKGl0cik7CiAgICAg\nICAgfQogICAgICAgIAogICAgICAgIC8vIGRvIHNvbWUgbW9kcyB0byB0cnkg\ndG8gY29uZnVzZSB0aGUgcHJveHkKICAgICAgICBzZXQucmVtb3ZlKCJ2YWwx\nIik7CiAgICAgICAgc2V0LnJlbW92ZSgidmFsMSIpOwogICAgICAgIHNldC5h\nZGQoInZhbDQiKTsKICAgICAgICBzZXQucmVtb3ZlKCJ2YWw0Iik7CiAgICAg\nICAgc2V0LmFkZCgidmFsNSIpOwogICAgICAgIHNldC5hZGQoInZhbDYiKTsK\nICAgICAgICBhc3NlcnRTdHJpbmdDb2xsZWN0aW9uQ2hhbmdlZChzZXQsIGlz\nU2V0KTsKICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgaWYgKGNsb3NlKSB7\nCiAgICAgICAgICAgIHBtLmNsb3NlKCk7CiAgICAgICAgICAgIHBtID0gZ2V0\nRW0oZmFsc2UsIGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAg\nLy8gcmUtcmV0cmlldmUgYW5kIGNoZWNrIHNldAogICAgICAgIHBjID0gKExS\nU1BDSW50ZikgcG0uZ2V0T2JqZWN0SWQob2lkKTsKICAgICAgICBzZXQgPSBp\nc1NldCA/IHBjLmdldFN0cmluZ1NldCgpIDogcGMuZ2V0U3RyaW5nQ29sbGVj\ndGlvbigpOwogICAgICAgIGFzc2VydFN0cmluZ0NvbGxlY3Rpb25DaGFuZ2Vk\nKHNldCwgaXNTZXQpOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICB9CiAgICAK\nICAgIHByaXZhdGUgdm9pZCBhc3NlcnRTdHJpbmdDb2xsZWN0aW9uQ2hhbmdl\nZChDb2xsZWN0aW9uIHNldCwgYm9vbGVhbiBpc1NldCkgewogICAgICAgIGFz\nc2VydEVxdWFscyg0LCBzZXQuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRUcnVl\nKCFzZXQuY29udGFpbnMoInZhbDEiKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShz\nZXQuY29udGFpbnMoInZhbDIiKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShzZXQu\nY29udGFpbnMoInZhbDMiKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZSghc2V0LmNv\nbnRhaW5zKCJ2YWw0IikpOwogICAgICAgIGFzc2VydFRydWUoc2V0LmNvbnRh\naW5zKCJ2YWw1IikpOwogICAgICAgIGFzc2VydFRydWUoc2V0LmNvbnRhaW5z\nKCJ2YWw2IikpOwogICAgICAgIGlmICghaXNTZXQpIHsKICAgICAgICAgICAg\nSXRlcmF0b3IgaXRyID0gc2V0Lml0ZXJhdG9yKCk7CiAgICAgICAgICAgIGFz\nc2VydEVxdWFscygidmFsMiIsIGl0ci5uZXh0KCkpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoInZhbDMiLCBpdHIubmV4dCgpKTsKICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJ2YWw1IiwgaXRyLm5leHQoKSk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscygidmFsNiIsIGl0ci5uZXh0KCkpOwogICAgICAgICAg\nICBhc3NlcnRUcnVlKCFpdHIuaGFzTmV4dCgpKTsKICAgICAgICAgICAgLy9G\nSVhNRSBqdGhvbWFzCiAgICAgICAgICAgIC8vS29kb0pET0hlbHBlci5jbG9z\nZShpdHIpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFN0cmluZ01hcCgpIHsKICAgICAgICBzdHJpbmdNYXBUZXN0KF9vaWQs\nIHRydWUpOwogICAgICAgIHN0cmluZ01hcFRlc3QoX2NvaWQsIHRydWUpOwog\nICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RyaW5nTWFwUmV0YWlu\nKCkgewogICAgICAgIHN0cmluZ01hcFRlc3QoX29pZCwgZmFsc2UpOwogICAg\nICAgIHN0cmluZ01hcFRlc3QoX2NvaWQsIGZhbHNlKTsKICAgIH0KICAgIAog\nICAgcHJpdmF0ZSB2b2lkIHN0cmluZ01hcFRlc3QoT2JqZWN0IG9pZCwgYm9v\nbGVhbiBjbG9zZSkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nID0gZ2V0RW0oIWNsb3NlLCAhY2xvc2UpOwogICAgICAgIHN0YXJ0VHgocG0p\nOwogICAgICAgIExSU1BDSW50ZiBwYyA9IChMUlNQQ0ludGYpIHBtLmdldE9i\namVjdElkKG9pZCk7CiAgICAgICAgCiAgICAgICAgLy8gY2hlY2sgdGhhdCBv\ncmlnIHZhbHVlcyBhcmUgY29ycmVjdAogICAgICAgIE1hcCBtYXAgPSBwYy5n\nZXRTdHJpbmdNYXAoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgbWFwLnNp\nemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxIiwgbWFwLmdldCgia2V5\nMSIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjIiLCBtYXAuZ2V0KCJrZXky\nIikpOwogICAgICAgIGFzc2VydEVxdWFscygiMyIsIG1hcC5nZXQoImtleTMi\nKSk7CiAgICAgICAgCiAgICAgICAgLy8gZG8gc29tZSBtb2RzIHRvIHRyeSB0\nbyBjb25mdXNlIHRoZSBwcm94eQogICAgICAgIG1hcC5wdXQoImtleTEiLCAi\nMWEiKTsKICAgICAgICBtYXAucHV0KCJrZXkxIiwgIjFiIik7CiAgICAgICAg\nbWFwLnB1dCgia2V5MiIsICI0Iik7CiAgICAgICAgbWFwLnJlbW92ZSgia2V5\nMiIpOwogICAgICAgIG1hcC5yZW1vdmUoImZvbyIpOwogICAgICAgIG1hcC5w\ndXQoImtleTUiLCAiNSIpOwogICAgICAgIGFzc2VydFN0cmluZ01hcENoYW5n\nZWQobWFwKTsKICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgCiAgICAgICAg\naWYgKGNsb3NlKSB7CiAgICAgICAgICAgIHBtLmNsb3NlKCk7CiAgICAgICAg\nICAgIHBtID0gZ2V0RW0oZmFsc2UsIGZhbHNlKTsKICAgICAgICB9CiAgICAg\nICAgCiAgICAgICAgLy8gcmUtcmV0cmlldmUgYW5kIGNoZWNrIG1hcAogICAg\nICAgIHBjID0gKExSU1BDSW50ZikgcG0uZ2V0T2JqZWN0SWQob2lkKTsKICAg\nICAgICBtYXAgPSBwYy5nZXRTdHJpbmdNYXAoKTsKICAgICAgICBhc3NlcnRT\ndHJpbmdNYXBDaGFuZ2VkKG1hcCk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAg\nIH0KICAgIAogICAgcHJpdmF0ZSB2b2lkIGFzc2VydFN0cmluZ01hcENoYW5n\nZWQoTWFwIG1hcCkgewogICAgICAgIGFzc2VydEVxdWFscygzLCBtYXAuc2l6\nZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjFiIiwgbWFwLmdldCgia2V5\nMSIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjMiLCBtYXAuZ2V0KCJrZXkz\nIikpOwogICAgICAgIGFzc2VydEVxdWFscygiNSIsIG1hcC5nZXQoImtleTUi\nKSk7CiAgICAgICAgYXNzZXJ0TnVsbChtYXAuZ2V0KCJrZXkyIikpOwogICAg\nICAgIGFzc2VydFRydWUobWFwLmNvbnRhaW5zS2V5KCJrZXkxIikpOwogICAg\nICAgIGFzc2VydEZhbHNlKG1hcC5jb250YWluc0tleSgia2V5MiIpKTsKICAg\nICAgICBhc3NlcnRUcnVlKG1hcC5jb250YWluc1ZhbHVlKCI1IikpOwogICAg\nICAgIGFzc2VydEZhbHNlKG1hcC5jb250YWluc1ZhbHVlKCIxIikpOwogICAg\nICAgIAogICAgICAgIEl0ZXJhdG9yIGl0ciA9IG1hcC5lbnRyeVNldCgpLml0\nZXJhdG9yKCk7CiAgICAgICAgTWFwLkVudHJ5IGVudHJ5OwogICAgICAgIGlu\ndCBjb3VudCA9IDA7CiAgICAgICAgZm9yICg7IGl0ci5oYXNOZXh0KCk7IGNv\ndW50KyspIHsKICAgICAgICAgICAgZW50cnkgPSAoTWFwLkVudHJ5KSBpdHIu\nbmV4dCgpOwogICAgICAgICAgICBpZiAoZW50cnkuZ2V0S2V5KCkuZXF1YWxz\nKCJrZXkxIikpCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoIjFiIiwg\nZW50cnkuZ2V0VmFsdWUoKSk7CiAgICAgICAgICAgIGVsc2UgaWYgKGVudHJ5\nLmdldEtleSgpLmVxdWFscygia2V5MyIpKQogICAgICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKCIzIiwgZW50cnkuZ2V0VmFsdWUoKSk7CiAgICAgICAgICAg\nIGVsc2UgaWYgKGVudHJ5LmdldEtleSgpLmVxdWFscygia2V5NSIpKQogICAg\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCI1IiwgZW50cnkuZ2V0VmFsdWUo\nKSk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZhaWwoIkJh\nZCBrZXk6ICIgKyBlbnRyeS5nZXRLZXkoKSk7CiAgICAgICAgfQogICAgICAg\nIGFzc2VydEVxdWFscygzLCBjb3VudCk7CiAgICAgICAgLy9GSVhNRQogICAg\nICAgIC8vS29kb0pET0hlbHBlci5jbG9zZShpdHIpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0UmVsU2V0KCkgewogICAgICAgIHJlbENvbGxl\nY3Rpb25UZXN0KF9vaWQsIHRydWUsIHRydWUpOwogICAgICAgIHJlbENvbGxl\nY3Rpb25UZXN0KF9jb2lkLCB0cnVlLCB0cnVlKTsKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgdGVzdFJlbFNldFJldGFpbigpIHsKICAgICAgICByZWxD\nb2xsZWN0aW9uVGVzdChfb2lkLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgcmVs\nQ29sbGVjdGlvblRlc3QoX2NvaWQsIGZhbHNlLCB0cnVlKTsKICAgIH0KICAg\nIAogICAgcHVibGljIHZvaWQgdGVzdFJlbENvbGxlY3Rpb24oKSB7CiAgICAg\nICAgcmVsQ29sbGVjdGlvblRlc3QoX29pZCwgdHJ1ZSwgZmFsc2UpOwogICAg\nICAgIHJlbENvbGxlY3Rpb25UZXN0KF9jb2lkLCB0cnVlLCBmYWxzZSk7CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RSZWxDb2xsZWN0aW9uUmV0\nYWluKCkgewogICAgICAgIHJlbENvbGxlY3Rpb25UZXN0KF9vaWQsIGZhbHNl\nLCBmYWxzZSk7CiAgICAgICAgcmVsQ29sbGVjdGlvblRlc3QoX2NvaWQsIGZh\nbHNlLCBmYWxzZSk7CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCByZWxD\nb2xsZWN0aW9uVGVzdChPYmplY3Qgb2lkLCBib29sZWFuIGNsb3NlLCBib29s\nZWFuIGlzU2V0KSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPSBnZXRFbSghY2xvc2UsICFjbG9zZSk7CiAgICAgICAgc3RhcnRUeChwbSk7\nCiAgICAgICAgTFJTUENJbnRmIHBjID0gKExSU1BDSW50ZikgcG0uZ2V0T2Jq\nZWN0SWQob2lkKTsKICAgICAgICAKICAgICAgICAvLyBjaGVjayB0aGF0IG9y\naWcgdmFsdWVzIGFyZSBjb3JyZWN0CiAgICAgICAgQ29sbGVjdGlvbiBzZXQg\nPSBpc1NldCA/IHBjLmdldFJlbFNldCgpIDogcGMuZ2V0UmVsQ29sbGVjdGlv\nbigpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBzZXQuc2l6ZSgpKTsKICAg\nICAgICBDb2xsZWN0aW9uIG9yZGVyZWQgPSBuZXcgVHJlZVNldCgpOwogICAg\nICAgIEl0ZXJhdG9yIGl0ciA9IHNldC5pdGVyYXRvcigpOwogICAgICAgIG9y\nZGVyZWQuYWRkKGl0ci5uZXh0KCkpOwogICAgICAgIG9yZGVyZWQuYWRkKGl0\nci5uZXh0KCkpOwogICAgICAgIG9yZGVyZWQuYWRkKGl0ci5uZXh0KCkpOwog\nICAgICAgIGFzc2VydFRydWUoIWl0ci5oYXNOZXh0KCkpOwogICAgICAgIC8v\nRklYTUUKICAgICAgICAvL0tvZG9KRE9IZWxwZXIuY2xvc2UoaXRyKTsKICAg\nICAgICBpdHIgPSBvcmRlcmVkLml0ZXJhdG9yKCk7CiAgICAgICAgTFJTUENJ\nbnRmIHNldDEgPSAoTFJTUENJbnRmKSBpdHIubmV4dCgpOwogICAgICAgIGlm\nICghaXNTZXQpIHsKICAgICAgICAgICAgTFJTUENJbnRmIHNldDIgPSAoTFJT\nUENJbnRmKSBpdHIubmV4dCgpOwogICAgICAgICAgICBMUlNQQ0ludGYgc2V0\nMyA9IChMUlNQQ0ludGYpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscygic2V0MSIsIHNldDEuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscygic2V0MiIsIHNldDIuZ2V0U3RyaW5nRmll\nbGQoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygic2V0MyIsIHNldDMu\nZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAgICAgfQogICAgICAgIGFzc2VydFRy\ndWUoc2V0LmNvbnRhaW5zKHNldDEpKTsKICAgICAgICBhc3NlcnRGYWxzZShz\nZXQuY29udGFpbnMocGMpKTsKICAgICAgICAKICAgICAgICAvLyBkbyBzb21l\nIG1vZHMgdG8gdHJ5IHRvIGNvbmZ1c2UgdGhlIHByb3h5CiAgICAgICAgc2V0\nLnJlbW92ZShzZXQxKTsKICAgICAgICBzZXQucmVtb3ZlKHNldDEpOwogICAg\nICAgIExSU1BDSW50ZiBzZXQ0ID0gcGMubmV3SW5zdGFuY2UoInNldDQiKTsK\nICAgICAgICBzZXQuYWRkKHNldDQpOwogICAgICAgIHNldC5yZW1vdmUoc2V0\nNCk7CiAgICAgICAgTFJTUENJbnRmIHNldDUgPSBwYy5uZXdJbnN0YW5jZSgi\nc2V0NSIpOwogICAgICAgIHNldC5hZGQoc2V0NSk7CiAgICAgICAgYXNzZXJ0\nUmVsQ29sbGVjdGlvbkNoYW5nZWQocGMsIGlzU2V0KTsKICAgICAgICBlbmRU\neChwbSk7CiAgICAgICAgCiAgICAgICAgaWYgKGNsb3NlKSB7CiAgICAgICAg\nICAgIHBtLmNsb3NlKCk7CiAgICAgICAgICAgIHBtID0gZ2V0RW0oZmFsc2Us\nIGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gcmUtcmV0\ncmlldmUgYW5kIGNoZWNrIHNldAogICAgICAgIHBjID0gKExSU1BDSW50Zikg\ncG0uZ2V0T2JqZWN0SWQob2lkKTsKICAgICAgICBhc3NlcnRSZWxDb2xsZWN0\naW9uQ2hhbmdlZChwYywgaXNTZXQpOwogICAgICAgIHBtLmNsb3NlKCk7CiAg\nICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBhc3NlcnRSZWxDb2xsZWN0aW9u\nQ2hhbmdlZChMUlNQQ0ludGYgcGMsIGJvb2xlYW4gaXNTZXQpIHsKICAgICAg\nICBDb2xsZWN0aW9uIHNldCA9IGlzU2V0ID8gcGMuZ2V0UmVsU2V0KCkgOiBw\nYy5nZXRSZWxDb2xsZWN0aW9uKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDMs\nIHNldC5zaXplKCkpOwogICAgICAgIENvbGxlY3Rpb24gb3JkZXJlZCA9IG5l\ndyBUcmVlU2V0KCk7CiAgICAgICAgSXRlcmF0b3IgaXRyID0gc2V0Lml0ZXJh\ndG9yKCk7CiAgICAgICAgb3JkZXJlZC5hZGQoaXRyLm5leHQoKSk7CiAgICAg\nICAgb3JkZXJlZC5hZGQoaXRyLm5leHQoKSk7CiAgICAgICAgb3JkZXJlZC5h\nZGQoaXRyLm5leHQoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZSghaXRyLmhhc05l\neHQoKSk7CiAgICAgICAgLy9GSVhNRQogICAgICAgIC8vS29kb0pET0hlbHBl\nci5jbG9zZShpdHIpOwogICAgICAgIGl0ciA9IG9yZGVyZWQuaXRlcmF0b3Io\nKTsKICAgICAgICBMUlNQQ0ludGYgc2V0MiA9IChMUlNQQ0ludGYpIGl0ci5u\nZXh0KCk7CiAgICAgICAgaWYgKCFpc1NldCkgewogICAgICAgICAgICBMUlNQ\nQ0ludGYgc2V0MyA9IChMUlNQQ0ludGYpIGl0ci5uZXh0KCk7CiAgICAgICAg\nICAgIExSU1BDSW50ZiBzZXQ1ID0gKExSU1BDSW50ZikgaXRyLm5leHQoKTsK\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJzZXQyIiwgc2V0Mi5nZXRTdHJp\nbmdGaWVsZCgpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJzZXQzIiwg\nc2V0My5nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJzZXQ1Iiwgc2V0NS5nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICB9\nCiAgICAgICAgYXNzZXJ0VHJ1ZShzZXQuY29udGFpbnMoc2V0MikpOwogICAg\nICAgIGFzc2VydEZhbHNlKHNldC5jb250YWlucyhwYykpOwogICAgfQogICAg\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVsTWFwKCkgewogICAgICAgIHJlbE1h\ncFRlc3QoX29pZCwgdHJ1ZSk7CiAgICAgICAgcmVsTWFwVGVzdChfY29pZCwg\ndHJ1ZSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RSZWxNYXBS\nZXRhaW4oKSB7CiAgICAgICAgcmVsTWFwVGVzdChfb2lkLCBmYWxzZSk7CiAg\nICAgICAgcmVsTWFwVGVzdChfY29pZCwgZmFsc2UpOwogICAgfQogICAgCiAg\nICBwcml2YXRlIHZvaWQgcmVsTWFwVGVzdChPYmplY3Qgb2lkLCBib29sZWFu\nIGNsb3NlKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBn\nZXRFbSghY2xvc2UsICFjbG9zZSk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAg\nICAgICAgTFJTUENJbnRmIHBjID0gKExSU1BDSW50ZikgcG0uZ2V0T2JqZWN0\nSWQob2lkKTsKICAgICAgICAKICAgICAgICAvLyBjaGVjayB0aGF0IG9yaWcg\ndmFsdWVzIGFyZSBjb3JyZWN0CiAgICAgICAgTWFwIG1hcCA9IHBjLmdldFJl\nbE1hcCgpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBtYXAuc2l6ZSgpKTsK\nICAgICAgICBMUlNQQ0ludGYgbWFwMSA9IChMUlNQQ0ludGYpIG1hcC5nZXQo\nImtleTEiKTsKICAgICAgICBMUlNQQ0ludGYgbWFwMiA9IChMUlNQQ0ludGYp\nIG1hcC5nZXQoImtleTIiKTsKICAgICAgICBMUlNQQ0ludGYgbWFwMyA9IChM\nUlNQQ0ludGYpIG1hcC5nZXQoImtleTMiKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoIm1hcDEiLCBtYXAxLmdldFN0cmluZ0ZpZWxkKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygibWFwMiIsIG1hcDIuZ2V0U3RyaW5nRmllbGQoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJtYXAzIiwgbWFwMy5nZXRTdHJpbmdGaWVs\nZCgpKTsKICAgICAgICBhc3NlcnRUcnVlKG1hcC5jb250YWluc0tleSgia2V5\nMSIpKTsKICAgICAgICBhc3NlcnRGYWxzZShtYXAuY29udGFpbnNLZXkoImtl\neTQiKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShtYXAuY29udGFpbnNWYWx1ZSht\nYXAxKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UobWFwLmNvbnRhaW5zVmFsdWUo\ncGMpKTsKICAgICAgICAKICAgICAgICAvLyBkbyBzb21lIG1vZHMgdG8gdHJ5\nIHRvIGNvbmZ1c2UgdGhlIHByb3h5CiAgICAgICAgTFJTUENJbnRmIG1hcDFh\nID0gcGMubmV3SW5zdGFuY2UoIm1hcDFhIik7CiAgICAgICAgbWFwLnB1dCgi\na2V5MSIsIG1hcDFhKTsKICAgICAgICBMUlNQQ0ludGYgbWFwMWIgPSBwYy5u\nZXdJbnN0YW5jZSgibWFwMWIiKTsKICAgICAgICBtYXAucHV0KCJrZXkxIiwg\nbWFwMWIpOwogICAgICAgIG1hcC5yZW1vdmUoImtleTIiKTsKICAgICAgICBt\nYXAucHV0KCJrZXk0IiwgcGMubmV3SW5zdGFuY2UoIm1hcDQiKSk7CiAgICAg\nICAgbWFwLnJlbW92ZSgia2V5NCIpOwogICAgICAgIG1hcC5yZW1vdmUoImZv\nbyIpOwogICAgICAgIG1hcC5wdXQoImtleTUiLCBwYy5uZXdJbnN0YW5jZSgi\nbWFwNSIpKTsKICAgICAgICBhc3NlcnRSZWxNYXBDaGFuZ2VkKHBjKTsKICAg\nICAgICBlbmRUeChwbSk7CiAgICAgICAgCiAgICAgICAgaWYgKGNsb3NlKSB7\nCiAgICAgICAgICAgIHBtLmNsb3NlKCk7CiAgICAgICAgICAgIHBtID0gZ2V0\nRW0oZmFsc2UsIGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAg\nLy8gcmUtcmV0cmlldmUgYW5kIGNoZWNrIG1hcAogICAgICAgIHBjID0gKExS\nU1BDSW50ZikgcG0uZ2V0T2JqZWN0SWQob2lkKTsKICAgICAgICBhc3NlcnRS\nZWxNYXBDaGFuZ2VkKHBjKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAgfQog\nICAgCiAgICBwcml2YXRlIHZvaWQgYXNzZXJ0UmVsTWFwQ2hhbmdlZChMUlNQ\nQ0ludGYgcGMpIHsKICAgICAgICBNYXAgbWFwID0gcGMuZ2V0UmVsTWFwKCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIG1hcC5zaXplKCkpOwogICAgICAg\nIExSU1BDSW50ZiBtYXAxYiA9IChMUlNQQ0ludGYpIG1hcC5nZXQoImtleTEi\nKTsKICAgICAgICBMUlNQQ0ludGYgbWFwMyA9IChMUlNQQ0ludGYpIG1hcC5n\nZXQoImtleTMiKTsKICAgICAgICBMUlNQQ0ludGYgbWFwNSA9IChMUlNQQ0lu\ndGYpIG1hcC5nZXQoImtleTUiKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIm1h\ncDFiIiwgbWFwMWIuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJtYXAzIiwgbWFwMy5nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoIm1hcDUiLCBtYXA1LmdldFN0cmluZ0ZpZWxkKCkp\nOwogICAgICAgIGFzc2VydFRydWUobWFwLmNvbnRhaW5zS2V5KCJrZXkxIikp\nOwogICAgICAgIGFzc2VydEZhbHNlKG1hcC5jb250YWluc0tleSgia2V5MiIp\nKTsKICAgICAgICBhc3NlcnRUcnVlKG1hcC5jb250YWluc1ZhbHVlKG1hcDFi\nKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UobWFwLmNvbnRhaW5zVmFsdWUocGMp\nKTsKICAgICAgICAKICAgICAgICBJdGVyYXRvciBpdHIgPSBtYXAuZW50cnlT\nZXQoKS5pdGVyYXRvcigpOwogICAgICAgIE1hcC5FbnRyeSBlbnRyeTsKICAg\nICAgICBpbnQgY291bnQgPSAwOwogICAgICAgIGZvciAoOyBpdHIuaGFzTmV4\ndCgpOyBjb3VudCsrKSB7CiAgICAgICAgICAgIGVudHJ5ID0gKE1hcC5FbnRy\neSkgaXRyLm5leHQoKTsKICAgICAgICAgICAgaWYgKGVudHJ5LmdldEtleSgp\nLmVxdWFscygia2V5MSIpKQogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKG1hcDFiLCBlbnRyeS5nZXRWYWx1ZSgpKTsKICAgICAgICAgICAgZWxzZSBp\nZiAoZW50cnkuZ2V0S2V5KCkuZXF1YWxzKCJrZXkzIikpCiAgICAgICAgICAg\nICAgICBhc3NlcnRFcXVhbHMobWFwMywgZW50cnkuZ2V0VmFsdWUoKSk7CiAg\nICAgICAgICAgIGVsc2UgaWYgKGVudHJ5LmdldEtleSgpLmVxdWFscygia2V5\nNSIpKQogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKG1hcDUsIGVudHJ5\nLmdldFZhbHVlKCkpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAg\nICBmYWlsKCJCYWQga2V5OiAiICsgZW50cnkuZ2V0S2V5KCkpOwogICAgICAg\nIH0KICAgICAgICBhc3NlcnRFcXVhbHMoMywgY291bnQpOwogICAgICAgIC8v\nRklYTUUKICAgICAgICAvL0tvZG9KRE9IZWxwZXIuY2xvc2UoaXRyKTsKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFRyYW5zZmVyKCkgewogICAg\nICAgIC8vIGNhbm5vdCB0cmFuc2ZlciBhbiBscnMgZnJvbSBvbmUgZmllbGQg\ndG8gYW5vdGhlcgogICAgICAgIAogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0gZ2V0RW0odHJ1ZSwgdHJ1ZSk7CiAgICAgICAgTFJTUEMgcGMg\nPSAoTFJTUEMpIHBtLmdldE9iamVjdElkKF9vaWQpOwogICAgICAgIExSU1BD\nIG1hcDEgPSAoTFJTUEMpIHBjLmdldFJlbE1hcCgpLmdldCgia2V5MSIpOwog\nICAgICAgIGFzc2VydE5vdE51bGwobWFwMSk7CiAgICAgICAgCiAgICAgICAg\nc3RhcnRUeChwbSk7CiAgICAgICAgTWFwIG1hcCA9IHBjLmdldFJlbE1hcCgp\nOwogICAgICAgIHBjLnNldFJlbE1hcChudWxsKTsKICAgICAgICBtYXAxLnNl\ndFJlbE1hcChtYXApOwogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGVuZFR4KHBtKTsKICAgICAgICAgICAgZmFpbCgiQWxsb3dlZCB0cmFu\nc2ZlciBvZiBscnMgZmllbGQiKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24ganVlKSB7CiAgICAgICAgfQogICAgICAgIGlmIChwbS5nZXRUcmFuc2Fj\ndGlvbigpLmlzQWN0aXZlKCkpCiAgICAgICAgICAgIHBtLmdldFRyYW5zYWN0\naW9uKCkucm9sbGJhY2soKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2hhcmUoKSB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRFbSh0cnVlLCB0cnVlKTsKICAg\nICAgICBMUlNQQyBwYyA9IChMUlNQQykgcG0uZ2V0T2JqZWN0SWQoX29pZCk7\nCiAgICAgICAgTFJTUEMgbWFwMSA9IChMUlNQQykgcGMuZ2V0UmVsTWFwKCku\nZ2V0KCJrZXkxIik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChtYXAxKTsKICAg\nICAgICAKICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICBNYXAgbWFwID0g\ncGMuZ2V0UmVsTWFwKCk7CiAgICAgICAgbWFwMS5zZXRSZWxNYXAobWFwKTsK\nICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwYy5nZXRS\nZWxNYXAoKSAhPSBtYXAxLmdldFJlbE1hcCgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMywgbWFwMS5nZXRSZWxNYXAoKS5zaXplKCkpOwogICAgICAgIGFz\nc2VydFRydWUobWFwMS5nZXRSZWxNYXAoKS5jb250YWluc1ZhbHVlKG1hcDEp\nKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAgICAgIAogICAgICAgIC8vIG1h\na2Ugc3VyZSBpdCBzdGlja3MKICAgICAgICBwbSA9IGdldEVtKHRydWUsIHRy\ndWUpOwogICAgICAgIHBjID0gKExSU1BDKSBwbS5nZXRPYmplY3RJZChfb2lk\nKTsKICAgICAgICBtYXAxID0gKExSU1BDKSBwYy5nZXRSZWxNYXAoKS5nZXQo\nImtleTEiKTsKICAgICAgICBhc3NlcnRFcXVhbHMobWFwMSwgbWFwMS5nZXRS\nZWxNYXAoKS5nZXQoImtleTEiKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFJvbGxiYWNrKCkgewogICAg\nICAgIC8vRklYTUUKICAgICAgICAvL1BlcnNpc3RlbmNlTWFuYWdlckZhY3Rv\ncnkgZmFjdG9yeSA9IGdldFBNRmFjdG9yeShuZXcgU3RyaW5nW117CiAgICAg\nICAgLy8gICAgIm9wZW5qcGEuUmVzdG9yZU11dGFibGVWYWx1ZXMiLCAidHJ1\nZSIsCiAgICAgICAgLy99KTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nckZhY3RvcnkgZmFjdG9yeSA9bnVsbDsKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9IGZhY3RvcnkuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIExSU1BDIHBjID0gKExSU1BDKSBwbS5nZXRPYmplY3RJZChfb2lk\nKTsKICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICBwYy5nZXRTdHJpbmdD\nb2xsZWN0aW9uKCkucmVtb3ZlKCJ2YWwyIik7CiAgICAgICAgcGMuZ2V0U3Ry\naW5nQ29sbGVjdGlvbigpLmFkZCgidmFsNCIpOwogICAgICAgIHJvbGxiYWNr\nVHgocG0pOwogICAgICAgIGFzc2VydFRydWUocGMuZ2V0U3RyaW5nQ29sbGVj\ndGlvbigpLmNvbnRhaW5zKCJ2YWwyIikpOwogICAgICAgIGFzc2VydEZhbHNl\nKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5jb250YWlucygidmFsNCIpKTsK\nICAgICAgICBwbS5jbG9zZSgpOwogICAgICAgIGZhY3RvcnkuY2xvc2UoKTsK\nICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFJlcGxhY2UoKSB7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRFbShmYWxzZSwg\nZmFsc2UpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIExSU1BDIHBj\nID0gKExSU1BDKSBwbS5nZXRPYmplY3RJZChfb2lkKTsKICAgICAgICAKICAg\nICAgICAvLyB0b3RhbGx5IHJlcGxhY2Ugc2V0CiAgICAgICAgQ29sbGVjdGlv\nbiBzZXQgPSBuZXcgSGFzaFNldCgpOwogICAgICAgIHNldC5hZGQoIm5ldyIp\nOwogICAgICAgIHBjLnNldFN0cmluZ0NvbGxlY3Rpb24oc2V0KTsKICAgICAg\nICAKICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAg\nICAgICAKICAgICAgICAvLyByZS1yZXRyaWV2ZSBhbmQgY2hlY2sgc2V0CiAg\nICAgICAgcG0gPSBnZXRFbShmYWxzZSwgZmFsc2UpOwogICAgICAgIHBjID0g\nKExSU1BDKSBwbS5nZXRPYmplY3RJZChfb2lkKTsKICAgICAgICAKICAgICAg\nICBzZXQgPSBwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIHNldC5zaXplKCkpOwogICAgICAgIGFzc2VydFRydWUo\nc2V0LmNvbnRhaW5zKCJuZXciKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEFkZCgpCiAgICB0aHJvd3Mg\nRXhjZXB0aW9uIHsKLyoKICAgICAgICAvL0ZJWE1FCiAgICAgICAgLy9Lb2Rv\nUGVyc2lzdGVuY2VNYW5hZ2VyRmFjdG9yeSBwbWYgPSBnZXRQTUZhY3Rvcnko\nbmV3IFN0cmluZyBbXXsKICAgICAgICAvLyAgICAib3BlbmpwYS5qZGJjLkpE\nQkNMaXN0ZW5lcnMiLCBMaXN0ZW5lci5jbGFzcy5nZXROYW1lKCksCiAgICAg\nICAgLy99KTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkg\ncG1mID1udWxsOwogICAgICAgIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSAo\nSkRCQ0NvbmZpZ3VyYXRpb24pIHBtZi5nZXRDb25maWd1cmF0aW9uKCk7CiAg\nICAgICAgLy9GSVhNRSBuZWVkIHRvIGZpeCBpbm5lciBjbGFzcwogICAgICAg\nIC8vTGlzdGVuZXIgbCA9IChMaXN0ZW5lcikgY29uZi5nZXRKREJDTGlzdGVu\nZXJJbnN0YW5jZXMoKVswXTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBwbSA9IHBtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgICAgIExSU1BD\nIHBjID0gKExSU1BDKSBwbS5nZXRPYmplY3RJZChfb2lkKTsKICAgICAgICAg\nICAgbC5jb3VudCA9IDA7CiAgICAgICAgICAgIHBjLmdldFN0cmluZ0NvbGxl\nY3Rpb24oKS5hZGQoInRlc3RBZGRTdHJpbmdWYWx1ZSIpOwogICAgICAgICAg\nICBlbmRUeChwbSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygzLCBsLmNv\ndW50KTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICBpZiAocG0uZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgpKQogICAg\nICAgICAgICAgICAgcG0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwog\nICAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0gZmluYWxseSB7CiAgICAg\nICAgICAgIHBtLmNsb3NlKCk7CiAgICAgICAgfQogKi8KICAgIH0KICAgIAog\nICAgcHJpdmF0ZSBPcGVuSlBBRW50aXR5TWFuYWdlciBnZXRFbShib29sZWFu\nIG9wdGltaXN0aWMsYm9vbGVhbiByZXRhaW5WYWx1ZXMpIHsKICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdl\nciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLnNldE5vbnRy\nYW5zYWN0aW9uYWxSZWFkKHRydWUpOwogICAgICAgIGVtLnNldFJldGFpblN0\nYXRlKHJldGFpblZhbHVlcyk7CiAgICAgICAgZW0uc2V0T3B0aW1pc3RpYyhv\ncHRpbWlzdGljKTsKICAgICAgICByZXR1cm4gZW07CiAgICB9CiAgICAKICAg\nIC8vRklYTUUgLSBjb3VsZCBub3QgZmluZCBBYnN0cmFjdEpEQkNMaXN0ZW5l\nciBiZWNhdXNlIG9mIHBhY2thZ2UgaW1wb3J0cyBpbiBzb3VyY2UgZmlsZQov\nKgogICAgcHVibGljIHN0YXRpYyBjbGFzcyBMaXN0ZW5lciBleHRlbmRzIEFi\nc3RyYWN0SkRCQ0xpc3RlbmVyIHsKIAogICAgICAgIHB1YmxpYyBpbnQgY291\nbnQgPSAwOwogCiAgICAgICAgcHVibGljIHZvaWQgYWZ0ZXJFeGVjdXRlU3Rh\ndGVtZW50KEpEQkNFdmVudCBldikgewogICAgICAgICAgICBjb3VudCsrOwog\nICAgICAgIH0KICAgIH0KICovCn0K\n","encoding":"base64"}

