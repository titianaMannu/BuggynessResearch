{"sha":"69daf02d15151131cee4b1a9153edddbebe407d3","node_id":"MDQ6QmxvYjIwNjM2NDo2OWRhZjAyZDE1MTUxMTMxY2VlNGIxYTkxNTNlZGRkYmViZTQwN2Qz","size":7517,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/69daf02d15151131cee4b1a9153edddbebe407d3","content":"LyoKICogVGVzdExvY2F0b3JzLmphdmEKICoKICogQ3JlYXRlZCBvbiBPY3Rv\nYmVyIDMsIDIwMDYsIDQ6MzcgUE0KICoKICogVG8gY2hhbmdlIHRoaXMgdGVt\ncGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFnZXIKICogYW5k\nIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuCiAqLwoKLyoKICog\nTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChB\nU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2Ug\nYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJpYnV0\nZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24K\nICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxp\nY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBM\naWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlvdSBt\nYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UKICog\nd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0\naGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGlj\nZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFw\ncGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0\nd2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmli\ndXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJ\nRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNw\nZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGlt\naXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5tZXRhOwoK\naW1wb3J0IGphdmEudXRpbC4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNxbC5PcmFjbGVEaWN0aW9uYXJ5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkV4dGVudDsKCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5jb21tb24u\nYXBwcy4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmNvbW1vbi51dGlscy5BYnN0cmFjdFRlc3RDYXNlOwoKaW1wb3J0IGphdmEu\nbGFuZy5hbm5vdGF0aW9uLkFubm90YXRpb247CmltcG9ydCBqdW5pdC5mcmFt\nZXdvcmsuKjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFj\ndG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5P\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJz\naXN0ZW5jZTsKCgpwdWJsaWMgY2xhc3MgVGVzdExvY2F0b3JzIGV4dGVuZHMg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMua2VybmVsLkJh\nc2VKREJDVGVzdHsKICAgIAogICAgcHJpdmF0ZSBPcGVuSlBBRW50aXR5TWFu\nYWdlckZhY3RvcnkgcG1mOwoKICAgIHB1YmxpYyBUZXN0TG9jYXRvcnMoU3Ry\naW5nIG5hbWUpIHsKICAgICAgICBzdXBlcihuYW1lKTsKICAgIH0gICAgCiAg\nICAKICAgIC8qKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIFRlc3RMb2Nh\ndG9ycyAqLwogICAgcHVibGljIFRlc3RMb2NhdG9ycygpIHsKICAgIH0KICAg\nIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICAKICAg\nICAgICBFeHRlbnQgZSA9IHBtLmNyZWF0ZUV4dGVudChMb2NhdG9yVGVzdE9i\namVjdC5jbGFzcywgdHJ1ZSk7CiAgICAgICAgZm9yIChJdGVyYXRvciBpID0g\nZS5pdGVyYXRvcigpOyBpLmhhc05leHQoKTspIHsKICAgICAgICAgICAgcG0u\ncmVtb3ZlKGkubmV4dCgpKTsKICAgICAgICAgICAgCiAgICAgICAgfQogICAg\nICAgIGVuZFR4KHBtKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkKICAgICAgICB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICBzdXBlci50ZWFyRG93bigpOwoKICAgICAgIGRlbGV0\nZUFsbChMb2NhdG9yVGVzdE9iamVjdC5jbGFzcyk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEJMT0JzKCkgewogICAgICAgIGRvQmxvYlRlc3QoNTAw\nMDApOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTbWFsbEJMT0JzKCkg\newogICAgICAgIGRvQmxvYlRlc3QoNTApOwoKICAgICAgICBpZiAoZ2V0Q3Vy\ncmVudFBsYXRmb3JtKCkgPT0gQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5P\nUkFDTEUpIHsKICAgICAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOwogICAgICAgICAgICBKREJDQ29uZmlndXJhdGlvbiBjb25mID0gKEpEQkND\nb25maWd1cmF0aW9uKQogICAgICAgICAgICAgICAgKChPcGVuSlBBRW50aXR5\nTWFuYWdlclNQSSkgcG0pLmdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAg\nICAgT3JhY2xlRGljdGlvbmFyeSBkaWN0ID0gKE9yYWNsZURpY3Rpb25hcnkp\nCiAgICAgICAgICAgICAgICBjb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNl\nKCk7CgogICAgICAgICAgICBpbnQgdCA9IGRpY3QubWF4RW1iZWRkZWRCbG9i\nU2l6ZTsKICAgICAgICAgICAgZG9CbG9iVGVzdCh0IC0gMSk7CiAgICAgICAg\nICAgIGRvQmxvYlRlc3QodCk7CiAgICAgICAgICAgIGRvQmxvYlRlc3QodCAr\nIDEpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBkb0Jsb2JU\nZXN0KGludCBzaXplKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\ncG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdl\ncigpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIExvY2F0b3JUZXN0\nT2JqZWN0IG8gPSBuZXcgTG9jYXRvclRlc3RPYmplY3QoKTsKICAgICAgICBi\neXRlW10gYnl0ZXMgPSBuZXcgYnl0ZVtzaXplXTsKICAgICAgICBBcnJheXMu\nZmlsbChieXRlcywgKGJ5dGUpICdiJyk7CiAgICAgICAgby5zZXRCeXRlcyhi\neXRlcyk7CiAgICAgICAgcG0ucGVyc2lzdChvKTsKICAgICAgICBPYmplY3Qg\nb2lkID0gcG0uZ2V0T2JqZWN0SWQobyk7CiAgICAgICAgZW5kVHgocG0pOwog\nICAgICAgIHBtLmNsb3NlKCk7CgogICAgICAgIHBtID0gKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgbyA9\nIChMb2NhdG9yVGVzdE9iamVjdCkgcG0uZ2V0T2JqZWN0SWQob2lkKTsKICAg\nICAgICBieXRlW10gbmV3Ynl0ZXMgPSBvLmdldEJ5dGVzKCk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChuZXdieXRlcyk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKGJ5dGVzLmxlbmd0aCwgbmV3Ynl0ZXMubGVuZ3RoKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIGFzc2VydEVxdWFscyhieXRlc1tpXSwgbmV3Ynl0ZXNbaV0pOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2hyaW5rQkxPQigp\nIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nc3RhcnRUeChwbSk7CiAgICAgICAgTG9jYXRvclRlc3RPYmplY3QgbyA9IG5l\ndyBMb2NhdG9yVGVzdE9iamVjdCgpOwogICAgICAgIGJ5dGVbXSBieXRlcyA9\nIG5ldyBieXRlWzUwMDAwXTsKICAgICAgICBBcnJheXMuZmlsbChieXRlcywg\nKGJ5dGUpICdiJyk7CiAgICAgICAgby5zZXRCeXRlcyhieXRlcyk7CiAgICAg\nICAgcG0ucGVyc2lzdChvKTsKICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0\nT2JqZWN0SWQobyk7CiAgICAgICAgZW5kVHgocG0pOwogICAgICAgIHBtLmNs\nb3NlKCk7CgogICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgbyA9IChMb2NhdG9yVGVz\ndE9iamVjdCkgcG0uZ2V0T2JqZWN0SWQob2lkKTsKCiAgICAgICAgc3RhcnRU\neChwbSk7CiAgICAgICAgYnl0ZXMgPSBuZXcgYnl0ZVs0MDAwMF07CiAgICAg\nICAgQXJyYXlzLmZpbGwoYnl0ZXMsIChieXRlKSAnYycpOwogICAgICAgIG8u\nc2V0Qnl0ZXMoYnl0ZXMpOwogICAgICAgIGVuZFR4KHBtKTsKICAgICAgICBw\nbS5jbG9zZSgpOwoKICAgICAgICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdl\nciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIG8gPSAoTG9jYXRv\nclRlc3RPYmplY3QpIHBtLmdldE9iamVjdElkKG9pZCk7CiAgICAgICAgYnl0\nZVtdIG5ld2J5dGVzID0gby5nZXRCeXRlcygpOwogICAgICAgIGFzc2VydEVx\ndWFscyhieXRlcy5sZW5ndGgsIG5ld2J5dGVzLmxlbmd0aCk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykgewogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoYnl0ZXNbaV0sIG5ld2J5dGVzW2ldKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdENMT0JzKCkg\newogICAgICAgIGRvQ2xvYlRlc3QoNTAwMDApOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RTbWFsbENMT0JzKCkgewogICAgICAgIGRvQ2xvYlRlc3Qo\nNTApOwoKICAgICAgICBpZiAoZ2V0Q3VycmVudFBsYXRmb3JtKCkgPT0gQWJz\ndHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5PUkFDTEUpIHsKICAgICAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdl\nciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBKREJDQ29u\nZmlndXJhdGlvbiBjb25mID0gKEpEQkNDb25maWd1cmF0aW9uKQogICAgICAg\nICAgICAgICAgKChPcGVuSlBBRW50aXR5TWFuYWdlclNQSSkgcG0pLmdldENv\nbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAgT3JhY2xlRGljdGlvbmFyeSBk\naWN0ID0gKE9yYWNsZURpY3Rpb25hcnkpCiAgICAgICAgICAgICAgICBjb25m\nLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CgogICAgICAgICAgICBpbnQg\ndCA9IGRpY3QubWF4RW1iZWRkZWRDbG9iU2l6ZTsKICAgICAgICAgICAgZG9D\nbG9iVGVzdCh0IC0gMSk7CiAgICAgICAgICAgIGRvQ2xvYlRlc3QodCk7CiAg\nICAgICAgICAgIGRvQ2xvYlRlc3QodCArIDEpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBkb0Nsb2JUZXN0KGludCBzaXplKSB7CiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFu\nYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgo\ncG0pOwogICAgICAgIExvY2F0b3JUZXN0T2JqZWN0IG8gPSBuZXcgTG9jYXRv\nclRlc3RPYmplY3QoKTsKICAgICAgICBjaGFyW10gY2hhcnMgPSBuZXcgY2hh\ncltzaXplXTsKICAgICAgICBBcnJheXMuZmlsbChjaGFycywgKGNoYXIpICdj\nJyk7CiAgICAgICAgby5zZXRDbG9iU3RyaW5nKG5ldyBTdHJpbmcoY2hhcnMp\nKTsKICAgICAgICBwbS5wZXJzaXN0KG8pOwogICAgICAgIE9iamVjdCBvaWQg\nPSBwbS5nZXRPYmplY3RJZChvKTsKICAgICAgICBlbmRUeChwbSk7CiAgICAg\nICAgcG0uY2xvc2UoKTsKCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1h\nbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBvID0gKExv\nY2F0b3JUZXN0T2JqZWN0KSBwbS5nZXRPYmplY3RJZChvaWQpOwogICAgICAg\nIGNoYXJbXSBuZXdjaGFycyA9IG8uZ2V0Q2xvYlN0cmluZygpLnRvQ2hhckFy\ncmF5KCk7CgogICAgICAgIGFzc2VydE5vdE51bGwobmV3Y2hhcnMpOwogICAg\nICAgIGFzc2VydEVxdWFscyhjaGFycy5sZW5ndGgsIG5ld2NoYXJzLmxlbmd0\naCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICBhc3NlcnRFcXVhbHMoY2hhcnNbaV0sIG5l\nd2NoYXJzW2ldKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdFNocmlua0NMT0IoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFu\nYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIExvY2F0b3JU\nZXN0T2JqZWN0IG8gPSBuZXcgTG9jYXRvclRlc3RPYmplY3QoKTsKICAgICAg\nICBjaGFyW10gY2hhcnMgPSBuZXcgY2hhcls1MDAwMF07CiAgICAgICAgQXJy\nYXlzLmZpbGwoY2hhcnMsIChjaGFyKSAnYycpOwogICAgICAgIG8uc2V0Q2xv\nYlN0cmluZyhuZXcgU3RyaW5nKGNoYXJzKSk7CiAgICAgICAgcG0ucGVyc2lz\ndChvKTsKICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQobyk7\nCiAgICAgICAgZW5kVHgocG0pOwogICAgICAgIHBtLmNsb3NlKCk7CgogICAg\nICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgbyA9IChMb2NhdG9yVGVzdE9iamVjdCkgcG0u\nZ2V0T2JqZWN0SWQob2lkKTsKCiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAg\nICAgY2hhcnMgPSBuZXcgY2hhcls0MDAwMF07CiAgICAgICAgQXJyYXlzLmZp\nbGwoY2hhcnMsIChjaGFyKSAnZCcpOwogICAgICAgIG8uc2V0Q2xvYlN0cmlu\nZyhuZXcgU3RyaW5nKGNoYXJzKSk7CiAgICAgICAgZW5kVHgocG0pOwogICAg\nICAgIHBtLmNsb3NlKCk7CgogICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgbyA9IChM\nb2NhdG9yVGVzdE9iamVjdCkgcG0uZ2V0T2JqZWN0SWQob2lkKTsKICAgICAg\nICBjaGFyW10gbmV3Y2hhcnMgPSBvLmdldENsb2JTdHJpbmcoKS50b0NoYXJB\ncnJheSgpOwogICAgICAgIGFzc2VydEVxdWFscyhjaGFycy5sZW5ndGgsIG5l\nd2NoYXJzLmxlbmd0aCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBj\naGFycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nY2hhcnNbaV0sIG5ld2NoYXJzW2ldKTsKICAgICAgICB9CiAgICB9CiAgICAK\nfQo=\n","encoding":"base64"}

