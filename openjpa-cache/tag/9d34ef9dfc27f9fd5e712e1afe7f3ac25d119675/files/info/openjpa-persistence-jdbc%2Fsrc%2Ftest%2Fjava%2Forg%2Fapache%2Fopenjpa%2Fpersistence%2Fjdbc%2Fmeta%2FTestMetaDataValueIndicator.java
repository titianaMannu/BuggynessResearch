{"sha":"987d44bc8babc9e21d9473198a638def55504a95","node_id":"MDQ6QmxvYjIwNjM2NDo5ODdkNDRiYzhiYWJjOWUyMWQ5NDczMTk4YTYzOGRlZjU1NTA0YTk1","size":4971,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/987d44bc8babc9e21d9473198a638def55504a95","content":"LyoKICogVGVzdE1ldGFEYXRhVmFsdWVJbmRpY2F0b3IuamF2YQogKgogKiBD\ncmVhdGVkIG9uIE9jdG9iZXIgNCwgMjAwNiwgMTozNSBQTQogKgogKiBUbyBj\naGFuZ2UgdGhpcyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUg\nTWFuYWdlcgogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRv\nci4KICovCgovKgogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJl\nIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJp\nYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmls\nZQogKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25h\nbCBpbmZvcm1hdGlvbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hp\ncC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRl\nciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxp\nY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4g\nY29tcGxpYW5jZQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRh\naW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cu\nYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3Mg\ncmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdy\naXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNl\nbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJ\nVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5E\nLCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNl\nIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1p\nc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4g\nICAgCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5qZGJjLm1ldGE7CgppbXBvcnQgamF2YS51dGlsLio7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzLlN1cGVyY2xh\nc3NEaXNjcmltaW5hdG9yU3RyYXRlZ3k7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5tZXRhLnN0cmF0cy5WYWx1ZU1hcERpc2NyaW1pbmF0b3JT\ndHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5FeHRlbnQ7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmpkYmMuY29tbW9uLmFwcHMuKjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRpbHMuKjsKaW1wb3J0IGphdmEu\nbGFuZy5hbm5vdGF0aW9uLkFubm90YXRpb247CmltcG9ydCBqdW5pdC5mcmFt\nZXdvcmsuKjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFj\ndG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5P\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJz\naXN0ZW5jZTsKCgpwdWJsaWMgY2xhc3MgVGVzdE1ldGFEYXRhVmFsdWVJbmRp\nY2F0b3IgZXh0ZW5kcyBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\namRiYy5rZXJuZWwuQmFzZUpEQkNUZXN0CnsgICAgCiAgICBwcml2YXRlIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIHBtOwogICAgCiAgICBwcml2YXRlIENsYXNz\nTWFwcGluZyBlTWFwcGluZzsKICAgIHByaXZhdGUgQ2xhc3NNYXBwaW5nIGZN\nYXBwaW5nOwogICAgCiAgICBwdWJsaWMgVGVzdE1ldGFEYXRhVmFsdWVJbmRp\nY2F0b3IoU3RyaW5nIHN0cikgewogICAgICAgIHN1cGVyKHN0cik7CiAgICB9\nCiAgICAKICAgIC8qKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIFRlc3RN\nZXRhRGF0YVZhbHVlSW5kaWNhdG9yICovCiAgICBwdWJsaWMgVGVzdE1ldGFE\nYXRhVmFsdWVJbmRpY2F0b3IoKSB7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2\nb2lkIHNldFVwKCkgewogICAgICAgIC8vICMjIyBJIGhhdGUgdGhhdCB3ZSBo\nYXZlIHRvIGRvIHRoaXMKICAgICAgICBDbGFzcyBjID0gTXVsdGlFLmNsYXNz\nOwogICAgICAgIGMgPSBNdWx0aUYuY2xhc3M7CiAgICAgICAgCiAgICAgICAg\ncG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICAKICAgICAgICBlTWFwcGluZyA9IChDbGFzc01hcHBp\nbmcpICgoT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkpIHBtKS5nZXRDb25maWd1\ncmF0aW9uKCkuCiAgICAgICAgICAgICAgICBnZXRNZXRhRGF0YVJlcG9zaXRv\ncnlJbnN0YW5jZSgpLmdldE1ldGFEYXRhKE11bHRpRS5jbGFzcywKICAgICAg\nICAgICAgICAgIHBtLmdldENsYXNzTG9hZGVyKCksIHRydWUpOwogICAgICAg\nIGZNYXBwaW5nID0gKENsYXNzTWFwcGluZykgKChPcGVuSlBBRW50aXR5TWFu\nYWdlclNQSSkgcG0pLmdldENvbmZpZ3VyYXRpb24oKS4KICAgICAgICAgICAg\nICAgIGdldE1ldGFEYXRhUmVwb3NpdG9yeUluc3RhbmNlKCkuZ2V0TWV0YURh\ndGEoTXVsdGlGLmNsYXNzLAogICAgICAgICAgICAgICAgcG0uZ2V0Q2xhc3NM\nb2FkZXIoKSwgdHJ1ZSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nYXJEb3duKCkKICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGlmIChw\nbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpCiAgICAgICAgICAgIHBt\nLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICBwbS5jbG9z\nZSgpOwogICAgICAgIHN1cGVyLnRlYXJEb3duKCk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RNZXRhRGF0YSgpIHsKICAgICAgICBhc3NlcnRF\ncXVhbHMoVmFsdWVNYXBEaXNjcmltaW5hdG9yU3RyYXRlZ3kuY2xhc3MsCiAg\nICAgICAgICAgICAgICBlTWFwcGluZy5nZXREaXNjcmltaW5hdG9yKCkuZ2V0\nU3RyYXRlZ3koKS5nZXRDbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nU3VwZXJjbGFzc0Rpc2NyaW1pbmF0b3JTdHJhdGVneS5jbGFzcywKICAgICAg\nICAgICAgICAgIGZNYXBwaW5nLmdldERpc2NyaW1pbmF0b3IoKS5nZXRTdHJh\ndGVneSgpLmdldENsYXNzKCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0T3BlcmF0aW9ucygpIHsKICAgICAgIGRlbGV0ZUFsbChNdWx0aUUu\nY2xhc3MpOwogICAgICAgIAogICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcG0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIAogICAgICAgIE11bHRp\nRSBlID0gbmV3IE11bHRpRSgpOwogICAgICAgIGUuc2V0U3RyaW5nMCgiZm9v\nIik7CiAgICAgICAgcG0ucGVyc2lzdChlKTsKICAgICAgICAKICAgICAgICBN\ndWx0aUYgZiA9IG5ldyBNdWx0aUYoKTsKICAgICAgICBmLnNldFN0cmluZzAo\nImJhciIpOwogICAgICAgIHBtLnBlcnNpc3QoZik7CiAgICAgICAgCiAgICAg\nICAgcG0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAKICAg\nICAgICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5\nTWFuYWdlcigpOwogICAgICAgIC8vRklYTUUganRob21hcwogICAgICAgIC8q\nIENhbnQgZmluZCBlcXVpdmFsZW50IG9mIGdldEV4dGVudCgpCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIGNvdW50RXh0ZW50KHBtLmdldEV4dGVudChNdWx0\naUUuY2xhc3MsIHRydWUpKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGNv\ndW50RXh0ZW50KHBtLmdldEV4dGVudChNdWx0aUUuY2xhc3MsIGZhbHNlKSkp\nOwogICAgICAgIGFzc2VydEVxdWFscygxLCBjb3VudEV4dGVudChwbS5nZXRF\neHRlbnQoTXVsdGlGLmNsYXNzLCB0cnVlKSkpOwogICAgICAgIGFzc2VydEVx\ndWFscygxLCBjb3VudEV4dGVudChwbS5nZXRFeHRlbnQoTXVsdGlGLmNsYXNz\nLCBmYWxzZSkpKTsKICAgICAgICAgCiAgICAgICAgT2JqZWN0IG9pZCA9IHBt\nLmdldE9iamVjdElkCiAgICAgICAgICAgIChwbS5nZXRFeHRlbnQoTXVsdGlF\nLmNsYXNzLCB0cnVlKS5pdGVyYXRvcigpLm5leHQoKSk7CiAgICAgICAgICov\nCiAgICAgICAgLy9GSVhNRSByZW1vdmUgdGhlIG5leHQgbGluZSBvbmNlIHRo\nZSBhYm92ZSBibG9jayBpcyBmaXhlZAogICAgICAgIE9iamVjdCBvaWQgPW51\nbGw7CiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBtLmdl\ndE9iamVjdElkKG9pZCkpOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICAgICAg\nCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBtLmdldE9i\namVjdElkKG9pZCkpOwogICAgfQogICAgCiAgICBwcml2YXRlIGludCBjb3Vu\ndEV4dGVudChFeHRlbnQgZSkgewogICAgICAgIGludCBjb3VudCA9IDA7CiAg\nICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0gZS5pdGVyYXRvcigpOyBpdGVy\nLmhhc05leHQoKTspIHsKICAgICAgICAgICAgaXRlci5uZXh0KCk7CiAgICAg\nICAgICAgIGNvdW50Kys7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb3Vu\ndDsKICAgIH0KICAgIAogICAgCn0K\n","encoding":"base64"}

