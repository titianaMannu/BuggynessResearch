{"sha":"8b3980d79bb6a57cd1f31f815ec9cb4fa95864bf","node_id":"MDQ6QmxvYjIwNjM2NDo4YjM5ODBkNzliYjZhNTdjZDFmMzFmODE1ZWM5Y2I0ZmE5NTg2NGJm","size":7692,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8b3980d79bb6a57cd1f31f815ec9cb4fa95864bf","content":"LyoKICogVGVzdE11bHRpVGFibGVNYXBwaW5ncy5qYXZhCiAqCiAqIENyZWF0\nZWQgb24gT2N0b2JlciA0LCAyMDA2LCA0OjA5IFBNCiAqCiAqIFRvIGNoYW5n\nZSB0aGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5h\nZ2VyCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgog\nKi8KCi8qCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFj\naGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1\naXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGlu\nZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2Ug\naXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9V\nVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVp\ndGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lv\nbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAK\nICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpk\nYmMubWV0YTsKCmltcG9ydCBqYXZhLnV0aWwuKjsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eVRyYW5zYWN0aW9uOwppbXBvcnQgamF2YXgudHJh\nbnNhY3Rpb24uVHJhbnNhY3Rpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQVF1ZXJ5OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuSkRCQ0ZldGNoUGxhbjsKCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5jb21t\nb24uYXBwcy4qOwoKCmltcG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5Bbm5v\ndGF0aW9uOwppbXBvcnQganVuaXQuZnJhbWV3b3JrLio7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJG\nYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwoKCnB1YmxpYyBjbGFzcyBUZXN0TXVs\ndGlUYWJsZU1hcHBpbmdzIGV4dGVuZHMgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmpkYmMua2VybmVsLlRlc3RTUUxMaXN0ZW5lclRlc3RDYXNl\nIHsKICAgIAoKICAgIHByaXZhdGUgT2JqZWN0IGFvaWQ7CiAgICBwcml2YXRl\nIE9iamVjdCBib2lkOwogICAgcHJpdmF0ZSBPYmplY3QgY29pZDsKICAgIHBy\naXZhdGUgT2JqZWN0IGRvaWQ7CiAgICAKICAgIHB1YmxpYyBUZXN0TXVsdGlU\nYWJsZU1hcHBpbmdzKFN0cmluZyBuYW1lKSB7CiAgICAgICAgc3VwZXIobmFt\nZSk7CiAgICB9CiAgICAKICAgIC8qKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNl\nIG9mIFRlc3RNdWx0aVRhYmxlTWFwcGluZ3MgKi8KICAgIHB1YmxpYyBUZXN0\nTXVsdGlUYWJsZU1hcHBpbmdzKCkgewogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCBzZXRVcFRlc3RDYXNlKCkgewogICAgICAgZGVsZXRlQWxsKE11bHRp\nQS5jbGFzcyk7CiAgICAgICAgCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFu\nYWdlcigpOwogICAgICAgIENvbGxlY3Rpb24gb3MgPSBuZXcgQXJyYXlMaXN0\nKCk7CiAgICAgICAgTXVsdGlBIGEgPSBuZXcgTXVsdGlBKCk7CiAgICAgICAg\nTXVsdGlCIGIgPSBuZXcgTXVsdGlCKCk7CiAgICAgICAgTXVsdGlDIGMgPSBu\nZXcgTXVsdGlDKCk7CiAgICAgICAgTXVsdGlEIGQgPSBuZXcgTXVsdGlEKCk7\nCiAgICAgICAgb3MuYWRkKGEpOwogICAgICAgIG9zLmFkZChiKTsKICAgICAg\nICBvcy5hZGQoYyk7CiAgICAgICAgb3MuYWRkKGQpOwogICAgICAgIGQuc2V0\nQShuZXcgTXVsdGlBKCkpOwogICAgICAgIG9zLmFkZChuZXcgTXVsdGlEKCkp\nOwogICAgICAgIGQuc2V0RFN0cmluZzEoImQgc3RyaW5nIDEiKTsKICAgICAg\nICAKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0ID0gcG0uZ2V0VHJhbnNh\nY3Rpb24oKTsKICAgICAgICB0LmJlZ2luKCk7CiAgICAgICAgcG0ucGVyc2lz\ndEFsbChvcyk7CiAgICAgICAgdC5jb21taXQoKTsKICAgICAgICBhb2lkID0g\ncG0uZ2V0T2JqZWN0SWQoYSk7CiAgICAgICAgYm9pZCA9IHBtLmdldE9iamVj\ndElkKGIpOwogICAgICAgIGNvaWQgPSBwbS5nZXRPYmplY3RJZChjKTsKICAg\nICAgICBkb2lkID0gcG0uZ2V0T2JqZWN0SWQoZCk7CiAgICAgICAgcG0uY2xv\nc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgWFhYdGVzdFVwZGF0\nZXMoKSB7CiAgICAgICAgLy9URVNUIERJU0FCTEVEIC4uLiBub3QgY29udmVy\ndGVkCiAgICAgICAgLyoKICAgICAgICBQZXJzaXN0ZW5jZU1hbmFnZXIgcG0g\nPSBnZXRQTSgpOwogICAgICAgIFRyYW5zYWN0aW9uIHQgPSBwbS5jdXJyZW50\nVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IDI7IGkrKykgewogICAgICAgICAgICAgICAgdC5i\nZWdpbigpOwogICAgICAgICAgICAgICAgY2hhbmdlQSgoTXVsdGlBKSBwbS5n\nZXRPYmplY3RCeUlkKGFvaWQsIGkgPT0gMCkpOwogICAgICAgICAgICAgICAg\nY2hhbmdlQigoTXVsdGlCKSBwbS5nZXRPYmplY3RCeUlkKGJvaWQsIGkgPT0g\nMCkpOwogICAgICAgICAgICAgICAgY2hhbmdlQygoTXVsdGlDKSBwbS5nZXRP\nYmplY3RCeUlkKGNvaWQsIGkgPT0gMCkpOwogICAgICAgICAgICAgICAgY2hh\nbmdlRCgoTXVsdGlEKSBwbS5nZXRPYmplY3RCeUlkKGRvaWQsIGkgPT0gMCkp\nOwogICAgICAgICAgICAgICAgdC5jb21taXQoKTsKICAgICAgICAgICAgfQog\nICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlmICh0LmlzQWN0aXZl\nKCkpIHsKICAgICAgICAgICAgICAgIHQucm9sbGJhY2soKTsKICAgICAgICAg\nICAgfQogICAgICAgICAgICBwbS5jbG9zZSgpOwogICAgICAgIH0KICAgICAg\nICAgKi8KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgWFhYdGVzdEluc2Vy\ndHMoKSB7CiAgICAgICAgLy9URVNUIERJU0FCTEVEIC4uLiBub3QgY29udmVy\ndGVkCiAgICAgICAgLyoKICAgICAgICBQZXJzaXN0ZW5jZU1hbmFnZXIgcG0g\nPSBnZXRQTSgpOwogICAgICAgIGFzc2VydEVxdWFscygyLAogICAgICAgICAg\nICAgICAgKChDb2xsZWN0aW9uKSBwbS5uZXdRdWVyeQogICAgICAgICAgICAg\nICAgKHBtLmdldEV4dGVudChNdWx0aUEuY2xhc3MsIGZhbHNlKSkuZXhlY3V0\nZSgpKS5zaXplKCkpOwogICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMo\nNCwKICAgICAgICAgICAgICAgICgoQ29sbGVjdGlvbikgcG0ubmV3UXVlcnkK\nICAgICAgICAgICAgICAgIChwbS5nZXRFeHRlbnQoTXVsdGlCLmNsYXNzLCB0\ncnVlKSkuZXhlY3V0ZSgpKS5zaXplKCkpOwogICAgICAgICAKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwKICAgICAgICAgICAgICAgICgoQ29sbGVjdGlvbikg\ncG0ubmV3UXVlcnkKICAgICAgICAgICAgICAgIChwbS5nZXRFeHRlbnQoTXVs\ndGlCLmNsYXNzLCBmYWxzZSkpLmV4ZWN1dGUoKSkuc2l6ZSgpKTsKICAgICAg\nICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsCiAgICAgICAgICAgICAgICAo\nKENvbGxlY3Rpb24pIHBtLm5ld1F1ZXJ5CiAgICAgICAgICAgICAgICAocG0u\nZ2V0RXh0ZW50KE11bHRpQy5jbGFzcywgZmFsc2UpKS5leGVjdXRlKCkpLnNp\nemUoKSk7CiAgICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygyLAogICAg\nICAgICAgICAgICAgKChDb2xsZWN0aW9uKSBwbS5uZXdRdWVyeQogICAgICAg\nICAgICAgICAgKHBtLmdldEV4dGVudChNdWx0aUQuY2xhc3MsIGZhbHNlKSku\nZXhlY3V0ZSgpKS5zaXplKCkpOwogICAgICAgICAKICAgICAgICBhc3NlcnRF\ncXVhbHMoNiwKICAgICAgICAgICAgICAgICgoQ29sbGVjdGlvbikgcG0ubmV3\nUXVlcnkKICAgICAgICAgICAgICAgIChwbS5nZXRFeHRlbnQoTXVsdGlBLmNs\nYXNzLCB0cnVlKSkuZXhlY3V0ZSgpKS5zaXplKCkpOwogICAgICAgICAKICAg\nICAgICBwbS5jbG9zZSgpOwogICAgICAgICAqLwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCBYWFh0ZXN0T25lVG9PbmUoKSB7CiAgICAgICAgLy9URVNU\nIERJU0FCTEVEIC4uLiBub3QgY29udmVydGVkCiAgICAgICAgLyoKICAgICAg\nICBQZXJzaXN0ZW5jZU1hbmFnZXIgcG0gPSBnZXRQTSgpOwogICAgICAgIE11\nbHRpRCBkID0gKE11bHRpRCkgcG0uZ2V0T2JqZWN0QnlJZChkb2lkLCB0cnVl\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGQuZ2V0QSgpKTsKICAgICAgICBw\nbS5jbG9zZSgpOwogICAgICAgICAqLwogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCBYWFh0ZXN0UXVlcmllcygpIHsKICAgICAgICAvL1RFU1QgRElTQUJM\nRUQgLi4uIG5vdCBjb252ZXJ0ZWQKICAgICAgICAvKgogICAgICAgIFBlcnNp\nc3RlbmNlTWFuYWdlciBwbSA9IGdldFBNKCk7CiAgICAgICAgUXVlcnkgcSA9\nIHBtLm5ld1F1ZXJ5KHBtLmdldEV4dGVudChNdWx0aUQuY2xhc3MsIGZhbHNl\nKSwKICAgICAgICAgICAgICAgICJkU3RyaW5nMSA9PSBcImQgc3RyaW5nIDFc\nIiIpOwogICAgICAgIC8vIyMjIHRoaXMgYmVoYXZlcyBsaWtlICciIic6ICJk\nIHN0cmluZyAxIik7CiAgICAgICAgQ29sbGVjdGlvbiBjID0gKENvbGxlY3Rp\nb24pIHEuZXhlY3V0ZSgpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBjLnNp\nemUoKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAgICAgICAgKi8KICAgIH0K\nICAgIAogICAgLy8gIyMjIG1vcmUgdGVzdHM6CiAgICAvLyAjIyMgLSBob3Jp\nem9udGFsIHdpdGggZXh0ZW50IHdpdGggc3ViY2xhc3M9ZmFsc2UKICAgIC8v\nICMjIyAtIGFnZ3JlZ2F0ZXMgd2l0aCBob3Jpem9udGFsLCBpbnRlcmZhY2Us\nIHRoaXMgc3R1ZmYsCiAgICAvLyAjIyMgLSBiYXNlIEEsIHZlcnRpY2FsIEIg\nZXh0ZW5kcyBBLCB2aXJ0dWFsIEMgZXh0ZW5kcyBCLAogICAgLy8gIyMjICAg\ndmVydGljYWwgRCBleHRlbmRzIEMsIHZlcnRpY2FsIEUgZXh0ZW5kcyBDLCBm\nbGF0IEYgZXh0ZW5kcyBDCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RWZXJ0\naWNhbFF1ZXJ5TW9kZVF1ZXJpZXMoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50\naXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3Jl\nYXRlTmF0aXZlUXVlcnkoIiIsTXVsdGlBLmNsYXNzKTsKICAgICAgICAoKEpE\nQkNGZXRjaFBsYW4pIHEuZ2V0RmV0Y2hQbGFuKCkpLgogICAgICAgICAgICAg\nICAgc2V0U3ViY2xhc3NGZXRjaE1vZGUoSkRCQ0ZldGNoUGxhbi5FQUdFUl9Q\nQVJBTExFTCk7CiAgICAgICAgLy8gd2UgbmVlZCBvcmRlcmluZzsgb3RoZXJ3\naXNlIGtvZG8gaXMgc21hcnQgZW5vdWdoIHRvIG9ubHkgcnVuIGZpcnN0CiAg\nICAgICAgLy8gc2VsZWN0IHVudGlsIGl0cyByZXN1bHRzIGFyZSBleGhhdXN0\nZWQKICAgICAgICAKICAgICAgICAvL0ZJWE1FIGp0aG9tYXMKICAgICAgICAv\nL3Euc2V0T3JkZXJpbmcoInN0cmluZzAgYXNjZW5kaW5nIik7CiAgICAgICAg\nc3FsLmNsZWFyKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHNxbC50b1N0cmlu\nZygpLCAwLCBzcWwuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBDb2xsZWN0\naW9uIGMgPSAoQ29sbGVjdGlvbikgcS5nZXRDYW5kaWRhdGVDb2xsZWN0aW9u\nKCk7CiAgICAgICAgCiAgICAgICAgLy8gYWNjb3VudCBmb3IgdGhlIHNlbGVj\ndCBkaXN0aW5jdAogICAgICAgIGlmICgoKFN0cmluZykgc3FsLmdldCgwKSku\nc3RhcnRzV2l0aCgiU0VMRUNUIERJU1RJTkNUIikpCiAgICAgICAgICAgIGFz\nc2VydEVxdWFscyhzcWwudG9TdHJpbmcoKSwgNSwgc3FsLnNpemUoKSk7CiAg\nICAgICAgZWxzZQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoc3FsLnRvU3Ry\naW5nKCksIDQsIHNxbC5zaXplKCkpOwogICAgICAgIHNxbC5jbGVhcigpOwog\nICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscyg2LCBjLnNpemUoKSk7CiAg\nICAgICAgCiAgICAgICAgLy8gb25seSBjaGVjayBmb3IgY291bnRzIHNxbCBp\nZiBhbnkgd2FzIGV4ZWN1dGVkIChzb21lIGRhdGFiYXNlcwogICAgICAgIC8v\nIG1pZ2h0IGVhZ2VybHkgaW5zdGFudGlhdGUgYWxsIHRoZSByb3dzLCBzdWNo\nIGFzIHBvaW50YmFzZSkKICAgICAgICBpZiAoc3FsLnNpemUoKSAhPSAwKQog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoc3FsLnRvU3RyaW5nKCksIDQsIHNx\nbC5zaXplKCkpOyAvLyBzZWxlY3QgY291bnRzCiAgICAgICAgc3FsLmNsZWFy\nKCk7CiAgICAgICAgCiAgICAgICAgLy8gd2FsayB0aHJvdWdoIHRoZSByZXN1\nbHRzLiBUaGlzIHdpbGwgY2F1c2UgaW5kaXZpZHVhbAogICAgICAgIC8vIG9i\namVjdHMgdG8gYmUgbG9hZGVkLCBhbmQgdGhlcmVmb3JlIHRoZSBkZmdzIHRv\nIGJlIGxvYWRlZCwKICAgICAgICAvLyBhbmQgdGhlcmVmb3JlIGFueSBhZGRp\ndGlvbmFsIFNRTCB0byBiZSBleGVjdXRlZC4KICAgICAgICBmb3IgKEl0ZXJh\ndG9yIGl0ZXIgPSBjLml0ZXJhdG9yKCk7IGl0ZXIuaGFzTmV4dCgpOykKICAg\nICAgICAgICAgaXRlci5uZXh0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKHNxbC50b1N0cmluZygpLCAwLCBzcWwuc2l6ZSgpKTsKICAgICAg\nICAKICAgICAgICBwbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwcml2YXRl\nIHZvaWQgY2hhbmdlQShNdWx0aUEgYSkgewogICAgICAgIGEuc2V0U3RyaW5n\nMChhLmdldFN0cmluZzAoKSArICIgY2hhbmdlZCIpOwogICAgICAgIGEuc2V0\nSW50MChhLmdldEludDAoKSArIDEpOwogICAgfQogICAgCiAgICBwcml2YXRl\nIHZvaWQgY2hhbmdlQihNdWx0aUIgYikgewogICAgICAgIGNoYW5nZUEoYik7\nCiAgICAgICAgYi5zZXRCU3RyaW5nKGIuZ2V0QlN0cmluZygpICsgIiBjaGFu\nZ2VkIik7CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBjaGFuZ2VDKE11\nbHRpQyBjKSB7CiAgICAgICAgY2hhbmdlQihjKTsKICAgICAgICBjLnNldENT\ndHJpbmcwKGMuZ2V0Q1N0cmluZzAoKSArICIgY2hhbmdlZCIpOwogICAgfQog\nICAgCiAgICBwcml2YXRlIHZvaWQgY2hhbmdlRChNdWx0aUQgZCkgewogICAg\nICAgIGNoYW5nZUIoZCk7CiAgICAgICAgZC5zZXREU3RyaW5nMChkLmdldERT\ndHJpbmcwKCkgKyAiIGNoYW5nZWQiKTsKICAgIH0KICAgIAogICAgCn0K\n","encoding":"base64"}

