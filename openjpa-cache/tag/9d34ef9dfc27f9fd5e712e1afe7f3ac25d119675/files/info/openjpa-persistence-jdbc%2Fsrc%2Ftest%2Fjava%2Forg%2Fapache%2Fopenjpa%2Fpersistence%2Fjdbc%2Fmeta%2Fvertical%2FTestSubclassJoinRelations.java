{"sha":"b2cc5e9da661419c07925bc614028212028f2a1d","node_id":"MDQ6QmxvYjIwNjM2NDpiMmNjNWU5ZGE2NjE0MTljMDc5MjViYzYxNDAyODIxMjAyOGYyYTFk","size":15014,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b2cc5e9da661419c07925bc614028212028f2a1d","content":"LyoKICogVGVzdFN1YmNsYXNzSm9pblJlbGF0aW9ucy5qYXZhCiAqCiAqIENy\nZWF0ZWQgb24gT2N0b2JlciA1LCAyMDA2LCA0OjI4IFBNCiAqCiAqIFRvIGNo\nYW5nZSB0aGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBN\nYW5hZ2VyCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9y\nLgogKi8KCi8qCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUg\nRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmli\ndXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxl\nCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFs\nIGluZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlw\nLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVy\nIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGlj\nZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBj\nb21wbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5h\ncGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyBy\nZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3Jp\ndGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vu\nc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lU\nSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQs\nIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2Ug\nZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlz\nc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAg\nICAKICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmpkYmMubWV0YS52ZXJ0aWNhbDsKCmltcG9ydCBqYXZhLnV0aWwuKjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3Vy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9p\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVu\nSlBBUXVlcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmpkYmMuY29tbW9uLmFwcHMuKjsKCgppbXBvcnQgamF2YS5sYW5nLmFu\nbm90YXRpb24uQW5ub3RhdGlvbjsKaW1wb3J0IGp1bml0LmZyYW1ld29yay4q\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKCgpwdWJsaWMg\nY2xhc3MgVGVzdFN1YmNsYXNzSm9pblJlbGF0aW9ucyBleHRlbmRzIG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmtlcm5lbC5UZXN0U1FM\nTGlzdGVuZXJUZXN0Q2FzZSAKewogICAgcHJpdmF0ZSBTdHJpbmcgX291dGVy\nID0gIk9VVEVSIjsKICAgIHByaXZhdGUgT2JqZWN0IF9vaWQgPSBudWxsOwog\nICAgCiAgICAvKiogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBUZXN0U3Vi\nY2xhc3NKb2luUmVsYXRpb25zICovCiAgICBwdWJsaWMgVGVzdFN1YmNsYXNz\nSm9pblJlbGF0aW9ucyhTdHJpbmcgbmFtZSkgCiAgICB7CiAgICAJc3VwZXIo\nbmFtZSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBib29sZWFuIHNraXBUZXN0\nKCkgewogICAgICAgIC8vRklYTUUgCiAgICAgICAgLyoKICAgICAgICByZXR1\ncm4gc3VwZXIuc2tpcFRlc3QoKQogICAgICAgICAgICB8fCAoKEpEQkNDb25m\naWd1cmF0aW9uKSBnZXRDb25maWd1cmF0aW9uKCkpLgogICAgICAgICAgICBn\nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpLmpvaW5TeW50YXggPT0gSm9pbi5T\nWU5UQVhfVFJBRElUSU9OQUw7CiAgICAgICAgICovCiAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVwVGVzdENhc2Uo\nKSB7CiAgICAgICAgLy8gbWFrZSBzdXJlIGFsbCBjbGFzc2VzIGFyZSByZWdp\nc3RlcmVkCiAgICAgICAgQ2xhc3NbXSByZWcgPSBuZXcgQ2xhc3NbXXsKICAg\nICAgICAgICAgQmFzZS5jbGFzcywgQmFzZVN1YjEuY2xhc3MsIEJhc2VTdWIy\nLmNsYXNzLAogICAgICAgICAgICBCYXNlU3ViMVN1YjEuY2xhc3MsIEJhc2VT\ndWIxU3ViMi5jbGFzcywKICAgICAgICB9OwoKICAgICAgICBpZiAoKChKREJD\nQ29uZmlndXJhdGlvbikgZ2V0Q29uZmlndXJhdGlvbigpKS5nZXREQkRpY3Rp\nb25hcnlJbnN0YW5jZSgpLgogICAgICAgICAgICBqb2luU3ludGF4ID09IEpv\naW4uU1lOVEFYX0RBVEFCQVNFKQogICAgICAgICAgICBfb3V0ZXIgPSAiKCsp\nIjsKCiAgICAgICBkZWxldGVBbGwoUmVsYXRpb25zLmNsYXNzKTsKICAgICAg\nIGRlbGV0ZUFsbChCYXNlLmNsYXNzKTsKCiAgICAgICAgUmVsYXRpb25zIHJl\nbCA9IG5ldyBSZWxhdGlvbnMoKTsKICAgICAgICBCYXNlU3ViMiBzdWIyID0g\nbmV3IEJhc2VTdWIyKCk7CiAgICAgICAgc3ViMi5zZXRCYXNlRmllbGQoMyk7\nCiAgICAgICAgc3ViMi5zZXRCYXNlU3ViMkZpZWxkKDQpOwogICAgICAgIHJl\nbC5zZXRCYXNlKHN1YjIpOwoKICAgICAgICBCYXNlU3ViMSBzdWIxID0gbmV3\nIEJhc2VTdWIxKCk7CiAgICAgICAgc3ViMS5zZXRCYXNlRmllbGQoMik7CiAg\nICAgICAgc3ViMS5zZXRCYXNlU3ViMUZpZWxkKDMpOwogICAgICAgIHJlbC5z\nZXRCYXNlU3ViMShzdWIxKTsKCiAgICAgICAgQmFzZVN1YjFTdWIyIHN1YjFz\ndWIyID0gbmV3IEJhc2VTdWIxU3ViMigpOwogICAgICAgIHN1YjFzdWIyLnNl\ndEJhc2VGaWVsZCg0KTsKICAgICAgICBzdWIxc3ViMi5zZXRCYXNlU3ViMUZp\nZWxkKDUpOwogICAgICAgIHN1YjFzdWIyLnNldEJhc2VTdWIxU3ViMkZpZWxk\nKDYpOwogICAgICAgIHJlbC5zZXRCYXNlU3ViMVN1YjIoc3ViMXN1YjIpOwoK\nICAgICAgICBCYXNlIGJhc2UgPSBuZXcgQmFzZSgpOwogICAgICAgIGJhc2Uu\nc2V0QmFzZUZpZWxkKDEpOwogICAgICAgIHJlbC5nZXRCYXNlTGlzdCgpLmFk\nZChiYXNlKTsKICAgICAgICByZWwuZ2V0QmFzZUxpc3QoKS5hZGQoc3ViMik7\nCgogICAgICAgIHJlbC5nZXRCYXNlU3ViMUxpc3QoKS5hZGQoc3ViMSk7CiAg\nICAgICAgcmVsLmdldEJhc2VTdWIxTGlzdCgpLmFkZChzdWIxc3ViMik7Cgog\nICAgICAgIHJlbC5nZXRCYXNlU3ViMVN1YjJMaXN0KCkuYWRkKHN1YjFzdWIy\nKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBB\nRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAg\nIHN0YXJ0VHgocG0pOzsKICAgICAgICBwbS5wZXJzaXN0KHJlbCk7CiAgICAg\nICAgZW5kVHgocG0pOzsKICAgICAgICBfb2lkID0gcG0uZ2V0T2JqZWN0SWQo\ncmVsKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3ROdWxsT25lT25lKCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nUmVsYXRpb25zIHJlbCA9IChSZWxhdGlvbnMpIHBtLmdldE9iamVjdElkKF9v\naWQpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7CiAg\nICAgICAgYXNzZXJ0Tm90U1FMKF9vdXRlcik7CiAgICAgICAgc3FsLmNsZWFy\nKCk7CgogICAgICAgIGFzc2VydE51bGwocmVsLmdldE51bGxCYXNlKCkpOwog\nICAgICAgIHBtLmNsb3NlKCk7CgogICAgICAgIGFzc2VydEVxdWFscygwLCBz\ncWwuc2l6ZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RWFnZXJO\ndWxsT25lT25lKCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcG0uZ2V0RmV0\nY2hQbGFuKCkuYWRkRmV0Y2hHcm91cCgibnVsbEJhc2UiKTsKICAgICAgICBS\nZWxhdGlvbnMgcmVsID0gKFJlbGF0aW9ucykgcG0uZ2V0T2JqZWN0SWQoX29p\nZCk7CgogICAgICAgIGFzc2VydEVxdWFscygxLCBzcWwuc2l6ZSgpKTsKICAg\nICAgICBhc3NlcnRTUUwoX291dGVyKTsKICAgICAgICBzcWwuY2xlYXIoKTsK\nCiAgICAgICAgYXNzZXJ0TnVsbChyZWwuZ2V0TnVsbEJhc2UoKSk7CiAgICAg\nICAgcG0uY2xvc2UoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHNxbC5z\naXplKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbXB0eUJhc2VM\naXN0KCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgUmVsYXRpb25zIHJlbCA9\nIChSZWxhdGlvbnMpIHBtLmdldE9iamVjdElkKF9vaWQpOwoKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0Tm90\nU1FMKF9vdXRlcik7CiAgICAgICAgc3FsLmNsZWFyKCk7CgogICAgICAgIGFz\nc2VydEVxdWFscygwLCByZWwuZ2V0RW1wdHlCYXNlTGlzdCgpLnNpemUoKSk7\nCiAgICAgICAgcG0uY2xvc2UoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEs\nIHNxbC5zaXplKCkpOwogICAgICAgIGFzc2VydFNRTChfb3V0ZXIpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFYWdlckVtcHR5QmFzZUxpc3QoKQog\nICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBwbS5nZXRGZXRjaFBsYW4oKS5hZGRG\nZXRjaEdyb3VwKCJlbXB0eUJhc2VMaXN0Iik7CiAgICAgICAgUmVsYXRpb25z\nIHJlbCA9IChSZWxhdGlvbnMpIHBtLmdldE9iamVjdElkKF9vaWQpOwoKICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7CiAgICAgICAgYXNz\nZXJ0U1FMKF9vdXRlcik7CiAgICAgICAgc3FsLmNsZWFyKCk7CgogICAgICAg\nIGFzc2VydEVxdWFscygwLCByZWwuZ2V0RW1wdHlCYXNlTGlzdCgpLnNpemUo\nKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDAsIHNxbC5zaXplKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RC\nYXNlT25lT25lKCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgUmVsYXRpb25z\nIHJlbCA9IChSZWxhdGlvbnMpIHBtLmdldE9iamVjdElkKF9vaWQpOwoKICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7CiAgICAgICAgYXNz\nZXJ0Tm90U1FMKF9vdXRlcik7CiAgICAgICAgc3FsLmNsZWFyKCk7CgogICAg\nICAgIEJhc2VTdWIyIHN1YjIgPSAoQmFzZVN1YjIpIHJlbC5nZXRCYXNlKCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIHN1YjIuZ2V0QmFzZUZpZWxkKCkp\nOwogICAgICAgIGFzc2VydEVxdWFscyg0LCBzdWIyLmdldEJhc2VTdWIyRmll\nbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEJhc2VTdWIyLmNsYXNzLCBz\ndWIyLmdldENsYXNzKCkpOwogICAgICAgIHBtLmNsb3NlKCk7CgogICAgICAg\nIGFzc2VydEVxdWFscyhzcWwudG9TdHJpbmcoKSwgMSwgc3FsLnNpemUoKSk7\nCiAgICAgICAgYXNzZXJ0U1FMKF9vdXRlcik7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEVhZ2VyQmFzZU9uZU9uZSgpCiAgICAgICAgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShP\ncGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwog\nICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFkZEZldGNoR3JvdXAoImJhc2Ui\nKTsKICAgICAgICBSZWxhdGlvbnMgcmVsID0gKFJlbGF0aW9ucykgcG0uZ2V0\nT2JqZWN0SWQoX29pZCk7CgogICAgICAgIGFzc2VydEVxdWFscygxLCBzcWwu\nc2l6ZSgpKTsKICAgICAgICBhc3NlcnRTUUwoX291dGVyKTsKICAgICAgICBz\ncWwuY2xlYXIoKTsKCiAgICAgICAgQmFzZVN1YjIgc3ViMiA9IChCYXNlU3Vi\nMikgcmVsLmdldEJhc2UoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgc3Vi\nMi5nZXRCYXNlRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHN1\nYjIuZ2V0QmFzZVN1YjJGaWVsZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nQmFzZVN1YjIuY2xhc3MsIHN1YjIuZ2V0Q2xhc3MoKSk7CiAgICAgICAgcG0u\nY2xvc2UoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHNxbC5zaXplKCkp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RMZWFmT25lT25lKCkKICAg\nICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgUmVsYXRpb25zIHJlbCA9IChSZWxhdGlv\nbnMpIHBtLmdldE9iamVjdElkKF9vaWQpOwoKICAgICAgICBhc3NlcnRFcXVh\nbHMoMSwgc3FsLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0Tm90U1FMKF9vdXRl\ncik7CiAgICAgICAgc3FsLmNsZWFyKCk7CgogICAgICAgIEJhc2VTdWIxU3Vi\nMiBzdWIxc3ViMiA9IChCYXNlU3ViMVN1YjIpIHJlbC5nZXRCYXNlU3ViMVN1\nYjIoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNCwgc3ViMXN1YjIuZ2V0QmFz\nZUZpZWxkKCkpOwogICAgICAgIGFzc2VydEVxdWFscyg1LCBzdWIxc3ViMi5n\nZXRCYXNlU3ViMUZpZWxkKCkpOwogICAgICAgIGFzc2VydEVxdWFscyg2LCBz\ndWIxc3ViMi5nZXRCYXNlU3ViMVN1YjJGaWVsZCgpKTsKICAgICAgICBwbS5j\nbG9zZSgpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7\nCiAgICAgICAgYXNzZXJ0Tm90U1FMKF9vdXRlcik7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEVhZ2VyTGVhZk9uZU9uZSgpCiAgICAgICAgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOwogICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFkZEZldGNoR3JvdXAoImJh\nc2VTdWIxU3ViMiIpOwogICAgICAgIFJlbGF0aW9ucyByZWwgPSAoUmVsYXRp\nb25zKSBwbS5nZXRPYmplY3RJZChfb2lkKTsKCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAgIGFzc2VydFNRTChfb3V0ZXIp\nOwogICAgICAgIHNxbC5jbGVhcigpOwoKICAgICAgICBCYXNlU3ViMVN1YjIg\nc3ViMXN1YjIgPSAoQmFzZVN1YjFTdWIyKSByZWwuZ2V0QmFzZVN1YjFTdWIy\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHN1YjFzdWIyLmdldEJhc2VG\naWVsZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNSwgc3ViMXN1YjIuZ2V0\nQmFzZVN1YjFGaWVsZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNiwgc3Vi\nMXN1YjIuZ2V0QmFzZVN1YjFTdWIyRmllbGQoKSk7CiAgICAgICAgcG0uY2xv\nc2UoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHNxbC5zaXplKCkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNaWRPbmVPbmUoKQogICAgICAg\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBSZWxhdGlvbnMgcmVsID0gKFJlbGF0aW9ucykg\ncG0uZ2V0T2JqZWN0SWQoX29pZCk7CgogICAgICAgIGFzc2VydEVxdWFscygx\nLCBzcWwuc2l6ZSgpKTsKICAgICAgICBhc3NlcnROb3RTUUwoX291dGVyKTsK\nICAgICAgICBzcWwuY2xlYXIoKTsKCiAgICAgICAgQmFzZVN1YjEgc3ViMSA9\nIChCYXNlU3ViMSkgcmVsLmdldEJhc2VTdWIxKCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDIsIHN1YjEuZ2V0QmFzZUZpZWxkKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygzLCBzdWIxLmdldEJhc2VTdWIxRmllbGQoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKEJhc2VTdWIxLmNsYXNzLCBzdWIxLmdldENsYXNzKCkp\nOwogICAgICAgIHBtLmNsb3NlKCk7CgogICAgICAgIGFzc2VydEVxdWFscygx\nLCBzcWwuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRTUUwoX291dGVyKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RWFnZXJNaWRPbmVPbmUoKQogICAg\nICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBwbS5nZXRGZXRjaFBsYW4oKS5hZGRGZXRj\naEdyb3VwKCJiYXNlU3ViMSIpOwogICAgICAgIFJlbGF0aW9ucyByZWwgPSAo\nUmVsYXRpb25zKSBwbS5nZXRPYmplY3RJZChfb2lkKTsKCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAgIGFzc2VydFNRTChf\nb3V0ZXIpOwogICAgICAgIHNxbC5jbGVhcigpOwoKICAgICAgICBCYXNlU3Vi\nMSBzdWIxID0gKEJhc2VTdWIxKSByZWwuZ2V0QmFzZVN1YjEoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMiwgc3ViMS5nZXRCYXNlRmllbGQoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDMsIHN1YjEuZ2V0QmFzZVN1YjFGaWVsZCgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoQmFzZVN1YjEuY2xhc3MsIHN1YjEuZ2V0\nQ2xhc3MoKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDAsIHNxbC5zaXplKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RCYXNlTGlzdCgpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5\nTWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIFJlbGF0\naW9ucyByZWwgPSAoUmVsYXRpb25zKSBwbS5nZXRPYmplY3RJZChfb2lkKTsK\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAg\nIGFzc2VydE5vdFNRTChfb3V0ZXIpOwogICAgICAgIHNxbC5jbGVhcigpOwoK\nICAgICAgICBMaXN0IGxpc3QgPSByZWwuZ2V0QmFzZUxpc3QoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMiwgbGlzdC5zaXplKCkpOwogICAgICAgIEJhc2Ug\nYmFzZSA9IChCYXNlKSBsaXN0LmdldCgwKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMSwgYmFzZS5nZXRCYXNlRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKEJhc2UuY2xhc3MsIGJhc2UuZ2V0Q2xhc3MoKSk7CiAgICAgICAgQmFz\nZVN1YjIgc3ViMiA9IChCYXNlU3ViMikgbGlzdC5nZXQoMSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDMsIHN1YjIuZ2V0QmFzZUZpZWxkKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscyg0LCBzdWIyLmdldEJhc2VTdWIyRmllbGQoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKEJhc2VTdWIyLmNsYXNzLCBzdWIyLmdldENs\nYXNzKCkpOwogICAgICAgIHBtLmNsb3NlKCk7CgogICAgICAgIGFzc2VydEVx\ndWFscygxLCBzcWwuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRTUUwoX291dGVy\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RWFnZXJCYXNlTGlzdCgp\nCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFk\nZEZldGNoR3JvdXAoImJhc2VMaXN0Iik7CiAgICAgICAgUmVsYXRpb25zIHJl\nbCA9IChSZWxhdGlvbnMpIHBtLmdldE9iamVjdElkKF9vaWQpOwoKICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0\nU1FMKF9vdXRlcik7CiAgICAgICAgc3FsLmNsZWFyKCk7CgogICAgICAgIExp\nc3QgbGlzdCA9IHJlbC5nZXRCYXNlTGlzdCgpOwogICAgICAgIGFzc2VydEVx\ndWFscygyLCBsaXN0LnNpemUoKSk7CiAgICAgICAgQmFzZSBiYXNlID0gKEJh\nc2UpIGxpc3QuZ2V0KDApOwogICAgICAgIGFzc2VydEVxdWFscygxLCBiYXNl\nLmdldEJhc2VGaWVsZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoQmFzZS5j\nbGFzcywgYmFzZS5nZXRDbGFzcygpKTsKICAgICAgICBCYXNlU3ViMiBzdWIy\nID0gKEJhc2VTdWIyKSBsaXN0LmdldCgxKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMywgc3ViMi5nZXRCYXNlRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDQsIHN1YjIuZ2V0QmFzZVN1YjJGaWVsZCgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoQmFzZVN1YjIuY2xhc3MsIHN1YjIuZ2V0Q2xhc3MoKSk7CiAg\nICAgICAgcG0uY2xvc2UoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHNx\nbC5zaXplKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RMZWFmTGlz\ndCgpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJy\nZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIFJlbGF0aW9ucyByZWwgPSAo\nUmVsYXRpb25zKSBwbS5nZXRPYmplY3RJZChfb2lkKTsKCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAgIGFzc2VydE5vdFNR\nTChfb3V0ZXIpOwogICAgICAgIHNxbC5jbGVhcigpOwoKICAgICAgICBMaXN0\nIGxpc3QgPSByZWwuZ2V0QmFzZVN1YjFTdWIyTGlzdCgpOwogICAgICAgIGFz\nc2VydEVxdWFscygxLCBsaXN0LnNpemUoKSk7CiAgICAgICAgQmFzZVN1YjFT\ndWIyIHN1YjFzdWIyID0gKEJhc2VTdWIxU3ViMikgbGlzdC5nZXQoMCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDQsIHN1YjFzdWIyLmdldEJhc2VGaWVsZCgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNSwgc3ViMXN1YjIuZ2V0QmFzZVN1\nYjFGaWVsZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNiwgc3ViMXN1YjIu\nZ2V0QmFzZVN1YjFTdWIyRmllbGQoKSk7CiAgICAgICAgcG0uY2xvc2UoKTsK\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAg\nIGFzc2VydE5vdFNRTChfb3V0ZXIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFYWdlckxlYWZMaXN0KCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\ncG0uZ2V0RmV0Y2hQbGFuKCkuYWRkRmV0Y2hHcm91cCgiYmFzZVN1YjFTdWIy\nTGlzdCIpOwogICAgICAgIFJlbGF0aW9ucyByZWwgPSAoUmVsYXRpb25zKSBw\nbS5nZXRPYmplY3RJZChfb2lkKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIs\nIHNxbC5zaXplKCkpOwogICAgICAgIGFzc2VydE5vdFNRTChfb3V0ZXIpOwog\nICAgICAgIHNxbC5jbGVhcigpOwoKICAgICAgICBMaXN0IGxpc3QgPSByZWwu\nZ2V0QmFzZVN1YjFTdWIyTGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscygx\nLCBsaXN0LnNpemUoKSk7CiAgICAgICAgQmFzZVN1YjFTdWIyIHN1YjFzdWIy\nID0gKEJhc2VTdWIxU3ViMikgbGlzdC5nZXQoMCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDQsIHN1YjFzdWIyLmdldEJhc2VGaWVsZCgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoNSwgc3ViMXN1YjIuZ2V0QmFzZVN1YjFGaWVsZCgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoNiwgc3ViMXN1YjIuZ2V0QmFzZVN1YjFT\ndWIyRmllbGQoKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDAsIHNxbC5zaXplKCkpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RNaWRMaXN0KCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgUmVs\nYXRpb25zIHJlbCA9IChSZWxhdGlvbnMpIHBtLmdldE9iamVjdElkKF9vaWQp\nOwoKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7CiAgICAg\nICAgYXNzZXJ0Tm90U1FMKF9vdXRlcik7CiAgICAgICAgc3FsLmNsZWFyKCk7\nCgogICAgICAgIExpc3QgbGlzdCA9IHJlbC5nZXRCYXNlU3ViMUxpc3QoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMiwgbGlzdC5zaXplKCkpOwogICAgICAg\nIEJhc2VTdWIxIHN1YjEgPSAoQmFzZVN1YjEpIGxpc3QuZ2V0KDApOwogICAg\nICAgIGFzc2VydEVxdWFscygyLCBzdWIxLmdldEJhc2VGaWVsZCgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMywgc3ViMS5nZXRCYXNlU3ViMUZpZWxkKCkp\nOwogICAgICAgIGFzc2VydEVxdWFscyhCYXNlU3ViMS5jbGFzcywgc3ViMS5n\nZXRDbGFzcygpKTsKICAgICAgICBCYXNlU3ViMVN1YjIgc3ViMXN1YjIgPSAo\nQmFzZVN1YjFTdWIyKSBsaXN0LmdldCgxKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoNCwgc3ViMXN1YjIuZ2V0QmFzZUZpZWxkKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyg1LCBzdWIxc3ViMi5nZXRCYXNlU3ViMUZpZWxkKCkpOwogICAg\nICAgIGFzc2VydEVxdWFscyg2LCBzdWIxc3ViMi5nZXRCYXNlU3ViMVN1YjJG\naWVsZCgpKTsKICAgICAgICBwbS5jbG9zZSgpOwoKICAgICAgICBhc3NlcnRF\ncXVhbHMoMSwgc3FsLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0U1FMKF9vdXRl\ncik7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVhZ2VyTWlkTGlzdCgp\nCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFk\nZEZldGNoR3JvdXAoImJhc2VTdWIxTGlzdCIpOwogICAgICAgIFJlbGF0aW9u\ncyByZWwgPSAoUmVsYXRpb25zKSBwbS5nZXRPYmplY3RJZChfb2lkKTsKCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAgIGFz\nc2VydFNRTChfb3V0ZXIpOwogICAgICAgIHNxbC5jbGVhcigpOwoKICAgICAg\nICBMaXN0IGxpc3QgPSByZWwuZ2V0QmFzZVN1YjFMaXN0KCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIGxpc3Quc2l6ZSgpKTsKICAgICAgICBCYXNlU3Vi\nMSBzdWIxID0gKEJhc2VTdWIxKSBsaXN0LmdldCgwKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMiwgc3ViMS5nZXRCYXNlRmllbGQoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDMsIHN1YjEuZ2V0QmFzZVN1YjFGaWVsZCgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoQmFzZVN1YjEuY2xhc3MsIHN1YjEuZ2V0Q2xhc3Mo\nKSk7CiAgICAgICAgQmFzZVN1YjFTdWIyIHN1YjFzdWIyID0gKEJhc2VTdWIx\nU3ViMikgbGlzdC5nZXQoMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHN1\nYjFzdWIyLmdldEJhc2VGaWVsZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nNSwgc3ViMXN1YjIuZ2V0QmFzZVN1YjFGaWVsZCgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoNiwgc3ViMXN1YjIuZ2V0QmFzZVN1YjFTdWIyRmllbGQoKSk7\nCiAgICAgICAgcG0uY2xvc2UoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAs\nIHNxbC5zaXplKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcm9q\nZWN0aW9ucygpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdl\nciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFRdWVy\neSBxID0gcG0uY3JlYXRlTmF0aXZlUXVlcnkoIiIsUmVsYXRpb25zLmNsYXNz\nKTsKICAgICAgICAvL0ZJWE1FIGp0aG9tYXMKICAgICAgICAvKgogICAgICAg\nIHEuc2V0UmVzdWx0KCJiYXNlLCBiYXNlU3ViMSwgYmFzZVN1YjFTdWIyIik7\nCiAgICAgICAgcS5zZXRVbmlxdWUodHJ1ZSk7CiAgICAgICAgT2JqZWN0W10g\ncmVzID0gKE9iamVjdFtdKSBxLmV4ZWN1dGUoKTsKICAgICAgICAgKi8KICAg\nICAgICBPYmplY3RbXSByZXM9bnVsbDsKICAgICAgICBhc3NlcnROb3ROdWxs\nKHJlcyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIHJlcy5sZW5ndGgpOwoK\nICAgICAgICBCYXNlU3ViMiBzdWIyID0gKEJhc2VTdWIyKSByZXNbMF07CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDMsIHN1YjIuZ2V0QmFzZUZpZWxkKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyg0LCBzdWIyLmdldEJhc2VTdWIyRmllbGQo\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEJhc2VTdWIyLmNsYXNzLCBzdWIy\nLmdldENsYXNzKCkpOwoKICAgICAgICBCYXNlU3ViMSBzdWIxID0gKEJhc2VT\ndWIxKSByZXNbMV07CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHN1YjEuZ2V0\nQmFzZUZpZWxkKCkpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBzdWIxLmdl\ndEJhc2VTdWIxRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEJhc2VT\ndWIxLmNsYXNzLCBzdWIxLmdldENsYXNzKCkpOwoKICAgICAgICBCYXNlU3Vi\nMVN1YjIgc3ViMXN1YjIgPSAoQmFzZVN1YjFTdWIyKSByZXNbMl07CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDQsIHN1YjFzdWIyLmdldEJhc2VGaWVsZCgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoNSwgc3ViMXN1YjIuZ2V0QmFzZVN1YjFG\naWVsZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNiwgc3ViMXN1YjIuZ2V0\nQmFzZVN1YjFTdWIyRmllbGQoKSk7CiAgICAgICAgcG0uY2xvc2UoKTsKCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAgIGFz\nc2VydFNRTChfb3V0ZXIpOwogICAgfSAgICAKfQo=\n","encoding":"base64"}

