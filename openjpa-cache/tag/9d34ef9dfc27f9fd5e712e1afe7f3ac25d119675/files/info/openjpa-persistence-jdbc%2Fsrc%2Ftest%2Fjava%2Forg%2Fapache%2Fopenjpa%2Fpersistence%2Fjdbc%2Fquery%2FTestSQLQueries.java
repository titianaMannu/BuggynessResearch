{"sha":"25aa14dde8c28c49ce3119c6728910617a2f7492","node_id":"MDQ6QmxvYjIwNjM2NDoyNWFhMTRkZGU4YzI4YzQ5Y2UzMTE5YzY3Mjg5MTA2MTdhMmY3NDky","size":18552,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/25aa14dde8c28c49ce3119c6728910617a2f7492","content":"LyoKICogVGVzdFNRTFF1ZXJpZXMuamF2YQogKgogKiBDcmVhdGVkIG9uIE9j\ndG9iZXIgNSwgMjAwNiwgNDo1OSBQTQogKgogKiBUbyBjaGFuZ2UgdGhpcyB0\nZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFuYWdlcgogKiBh\nbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4KICovCgovKgog\nKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24g\nKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5z\nZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmli\ndXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlv\nbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0Yg\nbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQog\nKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9m\nIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9s\naWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkg\nYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNv\nZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3Ry\naWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFO\nVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhw\ncmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICog\nc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBs\naW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4gICAgCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLnF1ZXJ5\nOwoKaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5SW5wdXRTdHJlYW07CmltcG9y\ndCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5PYmplY3RJ\nbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uT2JqZWN0T3V0cHV0U3RyZWFt\nOwppbXBvcnQgamF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW07CmltcG9y\ndCBqYXZhLnV0aWwuKjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLm1ldGEuTWFwcGluZ1JlcG9zaXRvcnk7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVN\nYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFRdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuamRiYy5jb21tb24uYXBwcy4qOwoKCmltcG9ydCBqYXZhLmxh\nbmcuYW5ub3RhdGlvbi5Bbm5vdGF0aW9uOwppbXBvcnQganVuaXQuZnJhbWV3\nb3JrLio7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2Vy\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlckZhY3Rv\ncnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CgoKcHVibGljIGNs\nYXNzIFRlc3RTUUxRdWVyaWVzIGV4dGVuZHMgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLmpkYmMua2VybmVsLkJhc2VKREJDVGVzdHsKICAgICAK\nICAgIAogICAgLyoqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdFNR\nTFF1ZXJpZXMgKi8KICAgIHB1YmxpYyBUZXN0U1FMUXVlcmllcyhTdHJpbmcg\nbmFtZSkgCiAgICB7CiAgICAJc3VwZXIobmFtZSk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyBUZXN0U1FMUXVlcmllcygpIAogICAge30KICAgIAogICAgcHJp\ndmF0ZSBTdHJpbmcgX3RhYmxlTmFtZSA9IG51bGw7CiAgICBwcml2YXRlIFN0\ncmluZyBfZnVsbFRhYmxlTmFtZSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmlu\nZyBfcGtDb2xOYW1lID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9pbnRD\nb2xOYW1lID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9zdHJpbmdDb2xO\nYW1lID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9yZWxDb2xOYW1lID0g\nbnVsbDsKICAgIAogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICBk\nZWxldGVBbGwoUnVudGltZVRlc3QxLmNsYXNzKTsKICAgICAgICAKICAgICAg\nICBSdW50aW1lVGVzdDEgcGMxID0gbmV3IFJ1bnRpbWVUZXN0MSgiMSIsIDEp\nOwogICAgICAgIFJ1bnRpbWVUZXN0MSBwYzIgPSBuZXcgUnVudGltZVRlc3Qx\nKCIyIiwgMik7CiAgICAgICAgcGMxLnNldFNlbGZPbmVPbmUocGMyKTsKICAg\nICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgc3RhcnRUeChwbSk7OwogICAgICAgIHBtLnBlcnNpc3QocGMxKTsKICAg\nICAgICBlbmRUeChwbSk7OwogICAgICAgIAogICAgICAgIEpEQkNDb25maWd1\ncmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pICgoT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5U1BJKSBwbSkuZ2V0Q29uZmlndXJhdGlvbigp\nOwogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gY29uZi5nZXREQkRpY3Rp\nb25hcnlJbnN0YW5jZSgpOwogICAgICAgIE1hcHBpbmdSZXBvc2l0b3J5IHJl\ncG9zID0gY29uZi5nZXRNYXBwaW5nUmVwb3NpdG9yeUluc3RhbmNlKCk7CiAg\nICAgICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcgPSByZXBvcy5nZXRNYXBwaW5n\nKFJ1bnRpbWVUZXN0MS5jbGFzcywKICAgICAgICAgICAgICAgIHBtLmdldENs\nYXNzTG9hZGVyKCksIHRydWUpOwogICAgICAgIAogICAgICAgIF90YWJsZU5h\nbWUgPSBtYXBwaW5nLmdldFRhYmxlKCkuZ2V0TmFtZSgpOwogICAgICAgIF9m\ndWxsVGFibGVOYW1lID0gZGljdC5nZXRGdWxsTmFtZShtYXBwaW5nLmdldFRh\nYmxlKCksIGZhbHNlKTsKICAgICAgICBfcGtDb2xOYW1lID0gbWFwcGluZy5n\nZXRUYWJsZSgpLmdldFByaW1hcnlLZXkoKS4KICAgICAgICAgICAgICAgIGdl\ndENvbHVtbnMoKVswXS5nZXROYW1lKCk7CiAgICAgICAgX2ludENvbE5hbWUg\nPSBtYXBwaW5nLmdldEZpZWxkTWFwcGluZygiaW50RmllbGQiKS4KICAgICAg\nICAgICAgICAgIGdldENvbHVtbnMoKVswXS5nZXROYW1lKCk7CiAgICAgICAg\nX3N0cmluZ0NvbE5hbWUgPSBtYXBwaW5nLmdldEZpZWxkTWFwcGluZygic3Ry\naW5nRmllbGQiKS4KICAgICAgICAgICAgICAgIGdldENvbHVtbnMoKVswXS5n\nZXROYW1lKCk7CiAgICAgICAgX3JlbENvbE5hbWUgPSBtYXBwaW5nLmdldEZp\nZWxkTWFwcGluZygic2VsZk9uZU9uZSIpLgogICAgICAgICAgICAgICAgZ2V0\nQ29sdW1ucygpWzBdLmdldE5hbWUoKTsKICAgICAgICAKICAgICAgICBwbS5j\nbG9zZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RhclF1\nZXJ5KCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZVF1ZXJ5KCJqYXZheC5q\nZG8ucXVlcnkuU1FMIiwKICAgICAgICAgICAgICAgICJzZWxlY3QgKiBmcm9t\nICIgKyBfZnVsbFRhYmxlTmFtZSArICIgb3JkZXIgYnkgIiArIF9pbnRDb2xO\nYW1lKTsKICAgICAgICBxLnNldFJlc3VsdENsYXNzKFJ1bnRpbWVUZXN0MS5j\nbGFzcyk7CiAgICAgICAgSXRlcmF0b3IgaXRyID0gKChDb2xsZWN0aW9uKSBx\nLmdldENhbmRpZGF0ZUNvbGxlY3Rpb24oKSkuaXRlcmF0b3IoKTsKICAgICAg\nICBhc3NlcnRUcnVlKGl0ci5oYXNOZXh0KCkpOwogICAgICAgIGFzc2VydEVx\ndWFscygiMSIsICgoUnVudGltZVRlc3QxKSBpdHIubmV4dCgpKS5nZXRTdHJp\nbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnRUcnVlKGl0ci5oYXNOZXh0KCkp\nOwogICAgICAgIGFzc2VydEVxdWFscygiMiIsICgoUnVudGltZVRlc3QxKSBp\ndHIubmV4dCgpKS5nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnRG\nYWxzZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBxLmNsb3NlQWxsKCk7CiAg\nICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdENvbXBpbGVkUXVlcnkoKQogICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5\nTWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5K\nUEFRdWVyeSBxID0gcG0uY3JlYXRlUXVlcnkoImphdmF4Lmpkby5xdWVyeS5T\nUUwiLAogICAgICAgICAgICAgICAgInNlbGVjdCAqIGZyb20gIiArIF9mdWxs\nVGFibGVOYW1lICsgIiBvcmRlciBieSAiICsgX2ludENvbE5hbWUpOwogICAg\nICAgIHEuc2V0UmVzdWx0Q2xhc3MoUnVudGltZVRlc3QxLmNsYXNzKTsKICAg\nICAgICAKICAgICAgICAvL0ZJWE1FIGp0aG9tYXMKICAgICAgICAvL3EgPSBw\nbS5jcmVhdGVRdWVyeShyb3VuZHRyaXBzKHEsIGZhbHNlKSk7CiAgICAgICAg\nSXRlcmF0b3IgaXRyID0gKChDb2xsZWN0aW9uKSBxLmdldENhbmRpZGF0ZUNv\nbGxlY3Rpb24oKSkuaXRlcmF0b3IoKTsKICAgICAgICBhc3NlcnRUcnVlKGl0\nci5oYXNOZXh0KCkpOwogICAgICAgIGFzc2VydEVxdWFscygiMSIsICgoUnVu\ndGltZVRlc3QxKSBpdHIubmV4dCgpKS5nZXRTdHJpbmdGaWVsZCgpKTsKICAg\nICAgICBhc3NlcnRUcnVlKGl0ci5oYXNOZXh0KCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiMiIsICgoUnVudGltZVRlc3QxKSBpdHIubmV4dCgpKS5nZXRT\ndHJpbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnRGYWxzZShpdHIuaGFzTmV4\ndCgpKTsKICAgICAgICBxLmNsb3NlQWxsKCk7CiAgICAgICAgcG0uY2xvc2Uo\nKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdENvbXBpbGVkTGFu\nZ3VhZ2VRdWVyeSgpCiAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQVF1ZXJ5\nIHEgPSBwbS5jcmVhdGVRdWVyeSgiamF2YXguamRvLnF1ZXJ5LlNRTCIsCiAg\nICAgICAgICAgICAgICAic2VsZWN0ICogZnJvbSAiICsgX2Z1bGxUYWJsZU5h\nbWUgKyAiIG9yZGVyIGJ5ICIgKyBfaW50Q29sTmFtZSk7CiAgICAgICAgcS5z\nZXRSZXN1bHRDbGFzcyhSdW50aW1lVGVzdDEuY2xhc3MpOwogICAgICAgIAog\nICAgICAgIC8vRklYTUUganRob21hcwogICAgICAgIC8vcSA9IHBtLmNyZWF0\nZVF1ZXJ5KCJqYXZheC5qZG8ucXVlcnkuU1FMIiwgcm91bmR0cmlwcyhxLCBm\nYWxzZSkpOwogICAgICAgIEl0ZXJhdG9yIGl0ciA9ICgoQ29sbGVjdGlvbikg\ncS5nZXRDYW5kaWRhdGVDb2xsZWN0aW9uKCkpLml0ZXJhdG9yKCk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoIjEiLCAoKFJ1bnRpbWVUZXN0MSkgaXRyLm5leHQoKSkuZ2V0U3Ry\naW5nRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShpdHIuaGFzTmV4dCgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjIiLCAoKFJ1bnRpbWVUZXN0MSkg\naXRyLm5leHQoKSkuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0\nRmFsc2UoaXRyLmhhc05leHQoKSk7CiAgICAgICAgcS5jbG9zZUFsbCgpOwog\nICAgICAgIHBtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RUYWJsZVN0YXJRdWVyeSgpIHsKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5jcmVh\ndGVRdWVyeSgiamF2YXguamRvLnF1ZXJ5LlNRTCIsCiAgICAgICAgICAgICAg\nICAic2VsZWN0ICIgKyBfdGFibGVOYW1lICsgIi4qIGZyb20gIiArIF9mdWxs\nVGFibGVOYW1lICsgIiBvcmRlciBieSAiCiAgICAgICAgICAgICAgICArIF9p\nbnRDb2xOYW1lKTsKICAgICAgICBxLnNldFJlc3VsdENsYXNzKFJ1bnRpbWVU\nZXN0MS5jbGFzcyk7CiAgICAgICAgSXRlcmF0b3IgaXRyID0gKChDb2xsZWN0\naW9uKSBxLmdldENhbmRpZGF0ZUNvbGxlY3Rpb24oKSkuaXRlcmF0b3IoKTsK\nICAgICAgICBhc3NlcnRUcnVlKGl0ci5oYXNOZXh0KCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygiMSIsICgoUnVudGltZVRlc3QxKSBpdHIubmV4dCgpKS5n\nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnRUcnVlKGl0ci5oYXNO\nZXh0KCkpOwogICAgICAgIGFzc2VydEVxdWFscygiMiIsICgoUnVudGltZVRl\nc3QxKSBpdHIubmV4dCgpKS5nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICBh\nc3NlcnRGYWxzZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBxLmNsb3NlQWxs\nKCk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdENvbHVtblF1ZXJ5KCkgewogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNy\nZWF0ZVF1ZXJ5KCJqYXZheC5qZG8ucXVlcnkuU1FMIiwKICAgICAgICAgICAg\nICAgICJzZWxlY3QgIiArIF9wa0NvbE5hbWUgKyAiLCAiICsgX2ludENvbE5h\nbWUgKyAiLCAiICsgX3N0cmluZ0NvbE5hbWUKICAgICAgICAgICAgICAgICsg\nIiBmcm9tICIgKyBfZnVsbFRhYmxlTmFtZSArICIgb3JkZXIgYnkgIiArIF9p\nbnRDb2xOYW1lKTsKICAgICAgICBxLnNldFJlc3VsdENsYXNzKFJ1bnRpbWVU\nZXN0MS5jbGFzcyk7CiAgICAgICAgSXRlcmF0b3IgaXRyID0gKChDb2xsZWN0\naW9uKSBxLmdldENhbmRpZGF0ZUNvbGxlY3Rpb24oKSkuaXRlcmF0b3IoKTsK\nICAgICAgICBhc3NlcnRUcnVlKGl0ci5oYXNOZXh0KCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygiMSIsICgoUnVudGltZVRlc3QxKSBpdHIubmV4dCgpKS5n\nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnRUcnVlKGl0ci5oYXNO\nZXh0KCkpOwogICAgICAgIGFzc2VydEVxdWFscygiMiIsICgoUnVudGltZVRl\nc3QxKSBpdHIubmV4dCgpKS5nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICBh\nc3NlcnRGYWxzZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBxLmNsb3NlQWxs\nKCk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdEpvaW5RdWVyeSgpIHsKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5jcmVh\ndGVRdWVyeSgiamF2YXguamRvLnF1ZXJ5LlNRTCIsCiAgICAgICAgICAgICAg\nICAic2VsZWN0IHQwLiogZnJvbSAiICsgX2Z1bGxUYWJsZU5hbWUgKyAiIHQw\nLCAiCiAgICAgICAgICAgICAgICArIF9mdWxsVGFibGVOYW1lICsgIiB0MSB3\naGVyZSB0MC4iICsgX3JlbENvbE5hbWUgKyAiID0gdDEuIgogICAgICAgICAg\nICAgICAgKyBfcGtDb2xOYW1lICsgIiBhbmQgdDEuIiArIF9pbnRDb2xOYW1l\nICsgIiA9IDIiKTsKICAgICAgICBxLnNldFJlc3VsdENsYXNzKFJ1bnRpbWVU\nZXN0MS5jbGFzcyk7CiAgICAgICAgSXRlcmF0b3IgaXRyID0gKChDb2xsZWN0\naW9uKSBxLmdldENhbmRpZGF0ZUNvbGxlY3Rpb24oKSkuaXRlcmF0b3IoKTsK\nICAgICAgICBhc3NlcnRUcnVlKGl0ci5oYXNOZXh0KCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygiMSIsICgoUnVudGltZVRlc3QxKSBpdHIubmV4dCgpKS5n\nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnRGYWxzZShpdHIuaGFz\nTmV4dCgpKTsKICAgICAgICBxLmNsb3NlQWxsKCk7CiAgICAgICAgcG0uY2xv\nc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFBhcmFtZXRl\ncnMoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVu\nSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAg\nICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlUXVlcnkoImphdmF4Lmpk\nby5xdWVyeS5TUUwiLAogICAgICAgICAgICAgICAgInNlbGVjdCAqIGZyb20g\nIiArIF9mdWxsVGFibGVOYW1lICsgIiB3aGVyZSAnZm9vJyA9ID8gYW5kICIK\nICAgICAgICAgICAgICAgICsgX2ludENvbE5hbWUgKyAiID0gPyIpOwogICAg\nICAgIHEuc2V0UmVzdWx0Q2xhc3MoUnVudGltZVRlc3QxLmNsYXNzKTsKICAg\nICAgICAvL0ZJWE1FIGp0aG9tYXMKICAgICAgICAvKkl0ZXJhdG9yIGl0ciA9\nICgoQ29sbGVjdGlvbikgcS5leGVjdXRlKCJmb28iLCBuZXcgSW50ZWdlcigy\nKSkpLgogICAgICAgICAgICAgICAgaXRlcmF0b3IoKTsKICAgICAgICBhc3Nl\ncnRUcnVlKGl0ci5oYXNOZXh0KCkpOwogICAgICAgIGFzc2VydEVxdWFscygi\nMiIsICgoUnVudGltZVRlc3QxKSBpdHIubmV4dCgpKS5nZXRTdHJpbmdGaWVs\nZCgpKTsKICAgICAgICBhc3NlcnRGYWxzZShpdHIuaGFzTmV4dCgpKTsKICAg\nICAgICAgKi8KICAgICAgICBxLmNsb3NlQWxsKCk7CiAgICAgICAgCiAgICAg\nICAgTWFwIHBhcmFtcyA9IG5ldyBIYXNoTWFwKCk7CiAgICAgICAgcGFyYW1z\nLnB1dChuZXcgSW50ZWdlcigxKSwgImZvbyIpOwogICAgICAgIHBhcmFtcy5w\ndXQobmV3IEludGVnZXIoMiksIG5ldyBJbnRlZ2VyKDIpKTsKICAgICAgICAv\nL0ZJWE1FIGp0aG9tYXMKICAgICAgICAvKml0ciA9ICgoQ29sbGVjdGlvbikg\ncS5leGVjdXRlV2l0aE1hcChwYXJhbXMpKS5pdGVyYXRvcigpOwogICAgICAg\nIGFzc2VydFRydWUoaXRyLmhhc05leHQoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCIyIiwgKChSdW50aW1lVGVzdDEpIGl0ci5uZXh0KCkpLmdldFN0cmlu\nZ0ZpZWxkKCkpOwogICAgICAgIGFzc2VydEZhbHNlKGl0ci5oYXNOZXh0KCkp\nOwogICAgICAgICAqLwogICAgICAgIHEuY2xvc2VBbGwoKTsKICAgICAgICBw\nbS5jbG9zZSgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25s\neVNlbGVjdGVkRmllbGRzTG9hZGVkKCkgewogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNy\nZWF0ZVF1ZXJ5KCJqYXZheC5qZG8ucXVlcnkuU1FMIiwKICAgICAgICAgICAg\nICAgICJzZWxlY3QgIiArIF9wa0NvbE5hbWUgKyAiLCAiICsgX2ludENvbE5h\nbWUgKyAiLCAiICsgX3N0cmluZ0NvbE5hbWUKICAgICAgICAgICAgICAgICsg\nIiBmcm9tICIgKyBfZnVsbFRhYmxlTmFtZSArICIgb3JkZXIgYnkgIiArIF9p\nbnRDb2xOYW1lKTsKICAgICAgICBxLnNldFJlc3VsdENsYXNzKFJ1bnRpbWVU\nZXN0MS5jbGFzcyk7CiAgICAgICAgSXRlcmF0b3IgaXRyID0gKChDb2xsZWN0\naW9uKSBxLmdldENhbmRpZGF0ZUNvbGxlY3Rpb24oKSkuaXRlcmF0b3IoKTsK\nICAgICAgICBhc3NlcnRUcnVlKGl0ci5oYXNOZXh0KCkpOwogICAgICAgIFJ1\nbnRpbWVUZXN0MSBwYyA9IChSdW50aW1lVGVzdDEpIGl0ci5uZXh0KCk7CiAg\nICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSA9IGdldFN0YXRlTWFuYWdl\ncihwYywgcG0pOwogICAgICAgIGFzc2VydFRydWUoc20uZ2V0TG9hZGVkKCku\nZ2V0KHNtLmdldE1ldGFEYXRhKCkuCiAgICAgICAgICAgICAgICBnZXRGaWVs\nZCgiaW50RmllbGQiKS5nZXRJbmRleCgpKSk7CiAgICAgICAgYXNzZXJ0VHJ1\nZShzbS5nZXRMb2FkZWQoKS5nZXQoc20uZ2V0TWV0YURhdGEoKS4KICAgICAg\nICAgICAgICAgIGdldEZpZWxkKCJzdHJpbmdGaWVsZCIpLmdldEluZGV4KCkp\nKTsKICAgICAgICBhc3NlcnRGYWxzZShzbS5nZXRMb2FkZWQoKS5nZXQoc20u\nZ2V0TWV0YURhdGEoKS4KICAgICAgICAgICAgICAgIGdldEZpZWxkKCJsb25n\nRmllbGQiKS5nZXRJbmRleCgpKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIx\nIiwgcGMuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RmFsc2Uo\nc20uZ2V0TG9hZGVkKCkuZ2V0KHNtLmdldE1ldGFEYXRhKCkuCiAgICAgICAg\nICAgICAgICBnZXRGaWVsZCgibG9uZ0ZpZWxkIikuZ2V0SW5kZXgoKSkpOwog\nICAgICAgIHEuY2xvc2VBbGwoKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2luZ2xlQ29sdW1uQ2xhc3Ns\nZXNzUXVlcnkoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOwogICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlUXVlcnkoImph\ndmF4Lmpkby5xdWVyeS5TUUwiLAogICAgICAgICAgICAgICAgInNlbGVjdCAi\nICsgX3N0cmluZ0NvbE5hbWUgKyAiIGZyb20gIiArIF9mdWxsVGFibGVOYW1l\nCiAgICAgICAgICAgICAgICArICIgb3JkZXIgYnkgIiArIF9zdHJpbmdDb2xO\nYW1lKTsKICAgICAgICBJdGVyYXRvciBpdHIgPSAoKENvbGxlY3Rpb24pIHEu\nZ2V0Q2FuZGlkYXRlQ29sbGVjdGlvbigpKS5pdGVyYXRvcigpOwogICAgICAg\nIGFzc2VydFRydWUoaXRyLmhhc05leHQoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCIxIiwgaXRyLm5leHQoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShpdHIu\naGFzTmV4dCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjIiLCBpdHIubmV4\ndCgpKTsKICAgICAgICBhc3NlcnRGYWxzZShpdHIuaGFzTmV4dCgpKTsKICAg\nICAgICBxLmNsb3NlQWxsKCk7CiAgICAgICAgCiAgICAgICAgcS5zZXRSZXN1\nbHRDbGFzcyhPYmplY3RbXS5jbGFzcyk7CiAgICAgICAgaXRyID0gKChDb2xs\nZWN0aW9uKSBxLmdldENhbmRpZGF0ZUNvbGxlY3Rpb24oKSkuaXRlcmF0b3Io\nKTsKICAgICAgICBhc3NlcnRUcnVlKGl0ci5oYXNOZXh0KCkpOwogICAgICAg\nIE9iamVjdFtdIHZhbHMgPSAoT2JqZWN0W10pIGl0ci5uZXh0KCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIHZhbHMubGVuZ3RoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoIjEiLCB2YWxzWzBdKTsKICAgICAgICBhc3NlcnRUcnVlKGl0\nci5oYXNOZXh0KCkpOwogICAgICAgIHZhbHMgPSAoT2JqZWN0W10pIGl0ci5u\nZXh0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHZhbHMubGVuZ3RoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoIjIiLCB2YWxzWzBdKTsKICAgICAgICBh\nc3NlcnRGYWxzZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBxLmNsb3NlQWxs\nKCk7CiAgICAgICAgCiAgICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAog\nICAgcHVibGljIHZvaWQgdGVzdE11bHRpQ29sdW1uQ2xhc3NsZXNzUXVlcnko\nKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBB\nRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAg\nIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlUXVlcnkoImphdmF4Lmpkby5x\ndWVyeS5TUUwiLAogICAgICAgICAgICAgICAgInNlbGVjdCAiICsgX2ludENv\nbE5hbWUgKyAiLCAiICsgX3N0cmluZ0NvbE5hbWUgKyAiIGZyb20gIgogICAg\nICAgICAgICAgICAgKyBfZnVsbFRhYmxlTmFtZSArICIgb3JkZXIgYnkgIiAr\nIF9zdHJpbmdDb2xOYW1lKTsKICAgICAgICBJdGVyYXRvciBpdHIgPSAoKENv\nbGxlY3Rpb24pIHEuZ2V0Q2FuZGlkYXRlQ29sbGVjdGlvbigpKS5pdGVyYXRv\ncigpOwogICAgICAgIGFzc2VydFRydWUoaXRyLmhhc05leHQoKSk7CiAgICAg\nICAgT2JqZWN0W10gdmFscyA9IChPYmplY3RbXSkgaXRyLm5leHQoKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMiwgdmFscy5sZW5ndGgpOwogICAgICAgIGFz\nc2VydEVxdWFscygxLCAoKE51bWJlcikgdmFsc1swXSkuaW50VmFsdWUoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxIiwgdmFsc1sxXSk7CiAgICAgICAg\nYXNzZXJ0VHJ1ZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICB2YWxzID0gKE9i\namVjdFtdKSBpdHIubmV4dCgpOwogICAgICAgIGFzc2VydEVxdWFscygyLCB2\nYWxzLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsICgoTnVtYmVy\nKSB2YWxzWzBdKS5pbnRWYWx1ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nIjIiLCB2YWxzWzFdKTsKICAgICAgICBhc3NlcnRGYWxzZShpdHIuaGFzTmV4\ndCgpKTsKICAgICAgICBxLmNsb3NlQWxsKCk7CiAgICAgICAgcG0uY2xvc2Uo\nKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFJlc3VsdENsYXNz\nKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZVF1ZXJ5KCJqYXZheC5qZG8u\ncXVlcnkuU1FMIiwKICAgICAgICAgICAgICAgICJzZWxlY3QgKiBmcm9tICIg\nKyBfZnVsbFRhYmxlTmFtZSArICIgb3JkZXIgYnkgIiArIF9pbnRDb2xOYW1l\nKTsKICAgICAgICBxLnNldFJlc3VsdENsYXNzKFJ1bnRpbWVUZXN0MS5jbGFz\ncyk7CiAgICAgICAgcS5zZXRSZXN1bHRDbGFzcyhIb2xkZXIuY2xhc3MpOwog\nICAgICAgIEl0ZXJhdG9yIGl0ciA9ICgoQ29sbGVjdGlvbikgcS5nZXRDYW5k\naWRhdGVDb2xsZWN0aW9uKCkpLml0ZXJhdG9yKCk7CiAgICAgICAgYXNzZXJ0\nVHJ1ZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBIb2xkZXIgaG9sZGVyID0g\nKEhvbGRlcikgaXRyLm5leHQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMCwg\naG9sZGVyLkkpOwogICAgICAgIGFzc2VydE51bGwoaG9sZGVyLlMpOwogICAg\nICAgIGFzc2VydE5vdE51bGwoaG9sZGVyLnBjKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoIjEiLCBob2xkZXIucGMuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBob2xkZXIg\nPSAoSG9sZGVyKSBpdHIubmV4dCgpOwogICAgICAgIGFzc2VydEVxdWFscygw\nLCBob2xkZXIuSSk7CiAgICAgICAgYXNzZXJ0TnVsbChob2xkZXIuUyk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChob2xkZXIucGMpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiMiIsIGhvbGRlci5wYy5nZXRTdHJpbmdGaWVsZCgpKTsKICAg\nICAgICBhc3NlcnRGYWxzZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBxLmNs\nb3NlQWxsKCk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgdGVzdENsYXNzbGVzc1Byb2plY3Rpb24oKSB7CiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFu\nYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFR\ndWVyeSBxID0gcG0uY3JlYXRlUXVlcnkoImphdmF4Lmpkby5xdWVyeS5TUUwi\nLAogICAgICAgICAgICAgICAgInNlbGVjdCAiICsgX2ludENvbE5hbWUgKyAi\nIGFzIEksICIgKyBfc3RyaW5nQ29sTmFtZSArICIgYXMgUyBmcm9tICIKICAg\nICAgICAgICAgICAgICsgX2Z1bGxUYWJsZU5hbWUgKyAiIG9yZGVyIGJ5ICIg\nKyBfaW50Q29sTmFtZSk7CiAgICAgICAgcS5zZXRSZXN1bHRDbGFzcyhIb2xk\nZXIuY2xhc3MpOwogICAgICAgIEl0ZXJhdG9yIGl0ciA9ICgoQ29sbGVjdGlv\nbikgcS5nZXRDYW5kaWRhdGVDb2xsZWN0aW9uKCkpLml0ZXJhdG9yKCk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBIb2xk\nZXIgaG9sZGVyID0gKEhvbGRlcikgaXRyLm5leHQoKTsKICAgICAgICBhc3Nl\ncnROdWxsKGhvbGRlci5wYyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhv\nbGRlci5JKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIjEiLCBob2xkZXIuUyk7\nCiAgICAgICAgYXNzZXJ0VHJ1ZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBo\nb2xkZXIgPSAoSG9sZGVyKSBpdHIubmV4dCgpOwogICAgICAgIGFzc2VydE51\nbGwoaG9sZGVyLnBjKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgaG9sZGVy\nLkkpOwogICAgICAgIGFzc2VydEVxdWFscygiMiIsIGhvbGRlci5TKTsKICAg\nICAgICBhc3NlcnRGYWxzZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICBxLmNs\nb3NlQWxsKCk7CiAgICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAg\nLyoqCiAgICAgKiBNYW51YWwgdGVzdCB0byBzZWUgaWYgYSByZWxhdGlvbiB3\naWxsIGJlIGVhZ2VybHkgbG9hZGVkIHdoZW4gU1FMCiAgICAgKiBjb250YWlu\naW5nIGVub3VnaCBpbmZvcm1hdGlvbiBpcyBydW4uIFRoaXMgaXMgbm90IHJ1\nbiBhcyBwYXJ0IG9mCiAgICAgKiB0aGUgdW5pdCB0ZXN0cyBzaW5jZSB3ZSBk\nb24ndCBrbm93IGlmIHRoaXMgYmVoYXZpb3Igc2hvdWxkIGJlCiAgICAgKiBy\nZWFsbHkgZXhwZWN0ZWQgdG8gd29yayBvciBub3QuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHJlbGF0aW9uTG9hZGVkVGVzdCgpIHsKICAgICAgIGRlbGV0\nZUFsbChBdHRhY2hELmNsYXNzKTsKICAgICAgIGRlbGV0ZUFsbChBdHRhY2hB\nLmNsYXNzKTsKICAgICAgICAKICAgICAgICBBdHRhY2hEIGQgPSBuZXcgQXR0\nYWNoRCgpOwogICAgICAgIEF0dGFjaEEgYSA9IG5ldyBBdHRhY2hBKCk7CiAg\nICAgICAgZC5zZXRBKGEpOwogICAgICAgIAogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBwbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgcG0ucGVyc2lzdChkKTsKICAgICAgICBwbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIHBtLmNsb3NlKCk7CiAg\nICAgICAgCiAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IChKREJD\nQ29uZmlndXJhdGlvbikgKChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlT\nUEkpIHBtKS5nZXRDb25maWd1cmF0aW9uKCk7CiAgICAgICAgREJEaWN0aW9u\nYXJ5IGRpY3QgPSBjb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAg\nICAgICAgTWFwcGluZ1JlcG9zaXRvcnkgcmVwb3MgPSBjb25mLmdldE1hcHBp\nbmdSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAgICAgICAKICAgICAgICBDbGFz\nc01hcHBpbmcgbWFwcGluZ0EgPSByZXBvcy5nZXRNYXBwaW5nKEF0dGFjaEQu\nY2xhc3MsCiAgICAgICAgICAgICAgICBwbS5nZXRDbGFzc0xvYWRlcigpLCB0\ncnVlKTsKICAgICAgICBTdHJpbmcgdGFibGVOYW1lQSA9IG1hcHBpbmdBLmdl\ndFRhYmxlKCkuZ2V0TmFtZSgpOwogICAgICAgIFN0cmluZyBmdWxsVGFibGVO\nYW1lQSA9IGRpY3QuZ2V0RnVsbE5hbWUobWFwcGluZ0EuZ2V0VGFibGUoKSwg\nZmFsc2UpOwogICAgICAgIFN0cmluZyByZWxDb2xOYW1lQSA9IG1hcHBpbmdB\nLmdldEZpZWxkTWFwcGluZygiYSIpLgogICAgICAgICAgICAgICAgZ2V0Q29s\ndW1ucygpWzBdLmdldE5hbWUoKTsKICAgICAgICAKICAgICAgICBDbGFzc01h\ncHBpbmcgbWFwcGluZ0QgPSByZXBvcy5nZXRNYXBwaW5nKEF0dGFjaEEuY2xh\nc3MsCiAgICAgICAgICAgICAgICBwbS5nZXRDbGFzc0xvYWRlcigpLCB0cnVl\nKTsKICAgICAgICBTdHJpbmcgdGFibGVOYW1lRCA9IG1hcHBpbmdELmdldFRh\nYmxlKCkuZ2V0TmFtZSgpOwogICAgICAgIFN0cmluZyBmdWxsVGFibGVOYW1l\nRCA9IGRpY3QuZ2V0RnVsbE5hbWUobWFwcGluZ0QuZ2V0VGFibGUoKSwgZmFs\nc2UpOwogICAgICAgIFN0cmluZyBwa0NvbE5hbWVEID0gbWFwcGluZ0QuZ2V0\nVGFibGUoKS5nZXRQcmltYXJ5S2V5KCkuCiAgICAgICAgICAgICAgICBnZXRD\nb2x1bW5zKClbMF0uZ2V0TmFtZSgpOwogICAgICAgIAogICAgICAgIHBtID0g\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5jcmVhdGVRdWVyeSgiamF2\nYXguamRvLnF1ZXJ5LlNRTCIsCiAgICAgICAgICAgICAgICAic2VsZWN0IHQw\nLiosIHQxLiogZnJvbSAiCiAgICAgICAgICAgICAgICArIGZ1bGxUYWJsZU5h\nbWVBICsgIiB0MCwgIgogICAgICAgICAgICAgICAgKyBmdWxsVGFibGVOYW1l\nRCArICIgdDEgIgogICAgICAgICAgICAgICAgKyAid2hlcmUgdDAuIiArIHJl\nbENvbE5hbWVBICsgIiA9IHQxLiIgKyBwa0NvbE5hbWVEKTsKICAgICAgICAK\nICAgICAgICAvLyBldmVuIHRoZSBleGFjdCBzYW1lIFNRTCB0aGF0IEtvZG8g\nZ2VuZXJhdGVzIHdpbGwgbm90CiAgICAgICAgLy8gZWFnZXJseSBsb2FkIHRo\nZSByZWxhdGlvbgogICAgICAgIC8qCiAgICAgICAgICBxID0gcG0ubmV3UXVl\ncnkgKCJqYXZheC5qZG8ucXVlcnkuU1FMIiwKICAgICAgICAgICAgICAiU0VM\nRUNUIHQxLklELCB0MS5UWVAsIHQxLlZFUlNOLCB0MS5BREJMLCB0MS5BSU5U\nLCAiCiAgICAgICAgICAgICAgKyAidDEuQVNUUiwgdDEuQkRCTCwgdDEuQklO\nVCwgdDEuQlNUUiwgdDEuQ0RCTCwgdDEuQ0lOVCwgIgogICAgICAgICAgICAg\nICsgInQxLkNTVFIsIHQwLkREQkwsIHQwLkRJTlQsIHQwLkRTVFIgIgogICAg\nICAgICAgICAgICsgIkZST00gQVRUQUNIRCB0MCBMRUZUIE9VVEVSIEpPSU4g\nQVRUQUNIQSB0MSBPTiB0MC5BID0gdDEuSUQiKTsKICAgICAgICAgKi8KICAg\nICAgICAKICAgICAgICBxLnNldFJlc3VsdENsYXNzKEF0dGFjaEQuY2xhc3Mp\nOwogICAgICAgIEl0ZXJhdG9yIGl0ciA9ICgoQ29sbGVjdGlvbikgcS5nZXRD\nYW5kaWRhdGVDb2xsZWN0aW9uKCkpLml0ZXJhdG9yKCk7CiAgICAgICAgYXNz\nZXJ0VHJ1ZShpdHIuaGFzTmV4dCgpKTsKICAgICAgICAKICAgICAgICBkID0g\nKEF0dGFjaEQpIGl0ci5uZXh0KCk7CiAgICAgICAgLy8gZC5nZXREc3RyICgp\nOwogICAgICAgIAogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBn\nZXRTdGF0ZU1hbmFnZXIoZCwgcG0pOwogICAgICAgIGFzc2VydFRydWUoc20u\nZ2V0TG9hZGVkKCkuCiAgICAgICAgICAgICAgICBnZXQoc20uZ2V0TWV0YURh\ndGEoKS5nZXRGaWVsZCgiYSIpLmdldEluZGV4KCkpKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKGQuZ2V0QSgpKTsKICAgICAgICBhc3NlcnRGYWxzZShpdHIu\naGFzTmV4dCgpKTsKICAgICAgICAKICAgICAgICBxLmNsb3NlQWxsKCk7CiAg\nICAgICAgcG0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHVibGljIHN0YXRp\nYyBjbGFzcyBIb2xkZXIgewogICAgICAgIAogICAgICAgIHB1YmxpYyBSdW50\naW1lVGVzdDEgcGM7CiAgICAgICAgcHVibGljIGludCBJOwogICAgICAgIHB1\nYmxpYyBTdHJpbmcgUzsKICAgICAgICAKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXRSdW50aW1lVGVzdDEoUnVudGltZVRlc3QxIHBjKSB7CiAgICAgICAgICAg\nIHRoaXMucGMgPSBwYzsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpCiAgICB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICAvLyBtYWluICgpOwogICAgICAgIAogICAg\nICAgIG5ldyBUZXN0U1FMUXVlcmllcygpLnJlbGF0aW9uTG9hZGVkVGVzdCgp\nOwogICAgfQogICAgCiAgICBwcml2YXRlIHN0YXRpYyBPYmplY3Qgcm91bmR0\ncmlwcyhPYmplY3Qgb3JpZywgYm9vbGVhbiB2YWxpZGF0ZUVxdWFsaXR5KQog\nICAgdGhyb3dzIElPRXhjZXB0aW9uLCBDbGFzc05vdEZvdW5kRXhjZXB0aW9u\nIHsKICAgICAgICBhc3NlcnROb3ROdWxsKG9yaWcpOwogICAgICAgIAogICAg\nICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBib3V0ID0gbmV3IEJ5dGVBcnJh\neU91dHB1dFN0cmVhbSgpOwogICAgICAgIE9iamVjdE91dHB1dFN0cmVhbSBv\ndXQgPSBuZXcgT2JqZWN0T3V0cHV0U3RyZWFtKGJvdXQpOwogICAgICAgIG91\ndC53cml0ZU9iamVjdChvcmlnKTsKICAgICAgICBCeXRlQXJyYXlJbnB1dFN0\ncmVhbSBiaW4gPSBuZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0oCiAgICAgICAg\nICAgICAgICBib3V0LnRvQnl0ZUFycmF5KCkpOwogICAgICAgIE9iamVjdElu\ncHV0U3RyZWFtIGluID0gbmV3IE9iamVjdElucHV0U3RyZWFtKGJpbik7CiAg\nICAgICAgT2JqZWN0IHJlc3VsdCA9IGluLnJlYWRPYmplY3QoKTsKICAgICAg\nICAKICAgICAgICBpZiAodmFsaWRhdGVFcXVhbGl0eSkgewogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMob3JpZy5oYXNoQ29kZSgpLCByZXN1bHQuaGFzaENv\nZGUoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhvcmlnLCByZXN1bHQp\nOwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gcmVzdWx0Owog\nICAgfQogICAgCn0K\n","encoding":"base64"}

