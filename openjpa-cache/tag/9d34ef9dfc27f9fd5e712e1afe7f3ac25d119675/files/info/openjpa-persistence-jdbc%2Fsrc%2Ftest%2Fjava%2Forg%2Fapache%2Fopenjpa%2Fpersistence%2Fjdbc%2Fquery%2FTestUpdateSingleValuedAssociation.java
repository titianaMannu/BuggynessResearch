{"sha":"d6bbd08352adc1e71ab35f44a0e19233762f2331","node_id":"MDQ6QmxvYjIwNjM2NDpkNmJiZDA4MzUyYWRjMWU3MWFiMzVmNDRhMGUxOTIzMzc2MmYyMzMx","size":4196,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d6bbd08352adc1e71ab35f44a0e19233762f2331","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLnF1ZXJ5\nOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5RdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuamRiYy5xdWVyeS5kb21haW4uQXBwbGljYXRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5xdWVyeS5kb21haW4u\nQXBwbGljYW50OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgovKioKICogVGVzdHMgdGhh\ndCB1cGRhdGUgcXVlcnkgY2FuIHNldCBzaW5nbGUtdmFsdWVkIGFzc29jaWF0\naW9uIGZpZWxkIHRvIG5vbi1udWxsCiAqIG9yIG51bGwgdmFsdWVzLgogKiAK\nICogT3JpZ2luYWxseSByZXBvcnRlZCBpbiAKICogPEEgSFJFPSJodHRwOi8v\naXNzdWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvT1BFTkpQQS01MzM+T1BF\nTkpQQS01MzM8L0E+CiAqICAKICogQGF1dGhvciBQaW5ha2kgUG9kZGFyCiAq\nCiAqLwpwdWJsaWMgY2xhc3MgVGVzdFVwZGF0ZVNpbmdsZVZhbHVlZEFzc29j\naWF0aW9uIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoJcHJpdmF0ZSBz\ndGF0aWMgYm9vbGVhbiBNVVNUX0JFX05VTEwgPSB0cnVlOwoJCglAT3ZlcnJp\nZGUKCXB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CgkJ\nc3VwZXIuc2V0VXAoQ0xFQVJfVEFCTEVTLCBBcHBsaWNhdGlvbi5jbGFzcywg\nQXBwbGljYW50LmNsYXNzKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdFVwZGF0\nZVNpbmdsZVZhbHVlZEFzc29jaWF0aW9uVG9OdWxsVmlhUGFyYW1ldGVyKCkg\newoJCWNyZWF0ZUFwcGxpY2F0aW9uV2l0aE5vbk51bGxBcHBsaWNhbnQoKTsK\nCQlhc3NlcnRVc2VyTnVsbGl0eSghTVVTVF9CRV9OVUxMKTsKCQkKCQlTdHJp\nbmcganBxbCA9ICJVUERBVEUgQXBwbGljYXRpb24gYSBTRVQgYS51c2VyID0g\nOnVzZXIiOwoJCXVwZGF0ZUJ5UXVlcnkoanBxbCwgInVzZXIiLCBudWxsKTsK\nCQkKCQlhc3NlcnRVc2VyTnVsbGl0eShNVVNUX0JFX05VTEwpOwoJfQoJCglw\ndWJsaWMgdm9pZCB0ZXN0VXBkYXRlU2luZ2xlVmFsdWVkQXNzb2NpYXRpb25U\nb051bGxWaWFMaXRlcmFsKCkgewoJCWNyZWF0ZUFwcGxpY2F0aW9uV2l0aE5v\nbk51bGxBcHBsaWNhbnQoKTsKCQlhc3NlcnRVc2VyTnVsbGl0eSghTVVTVF9C\nRV9OVUxMKTsKCQkKCQlTdHJpbmcganBxbCA9ICJVUERBVEUgQXBwbGljYXRp\nb24gYSBTRVQgYS51c2VyID0gTlVMTCI7CgkJdXBkYXRlQnlRdWVyeShqcHFs\nKTsKCQkKCQlhc3NlcnRVc2VyTnVsbGl0eShNVVNUX0JFX05VTEwpOwoJfQoJ\nCglwdWJsaWMgdm9pZCB0ZXN0VXBkYXRlU2luZ2xlVmFsdWVkQXNzb2NpYXRp\nb25Ub05vbk51bGxWaWFQYXJhbWV0ZXIoKSB7CgkJQXBwbGljYXRpb24gcGMg\nPSBjcmVhdGVBcHBsaWNhdGlvbldpdGhOdWxsQXBwbGljYW50KCk7CgkJYXNz\nZXJ0TnVsbChwYy5nZXRVc2VyKCkpOwoJCQoJCVN0cmluZyBqcHFsID0gIlVQ\nREFURSBBcHBsaWNhdGlvbiBhIFNFVCBhLnVzZXIgPSA6dXNlciI7CgkJQXBw\nbGljYW50IG5ld1VzZXIgPSBjcmVhdGVBcHBsaWNhbnQoKTsKCQl1cGRhdGVC\neVF1ZXJ5KGpwcWwsICJ1c2VyIiwgbmV3VXNlcik7CgkJCgkJYXNzZXJ0VXNl\nck51bGxpdHkoIU1VU1RfQkVfTlVMTCk7Cgl9CgkKCXZvaWQgYXNzZXJ0VXNl\nck51bGxpdHkoYm9vbGVhbiBzaG91bGRCZU51bGwpIHsKCQlFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCQllbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CgkJTGlzdDxBcHBsaWNhdGlvbj4gcmVz\ndWx0ID0gCgkJCWVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgYSBGUk9NIEFwcGxp\nY2F0aW9uIGEiKS5nZXRSZXN1bHRMaXN0KCk7CgkJYXNzZXJ0RmFsc2UocmVz\ndWx0LmlzRW1wdHkoKSk7CgkJZm9yIChBcHBsaWNhdGlvbiBwYyA6IHJlc3Vs\ndCkgewoJCQlBcHBsaWNhbnQgdXNlciA9IHBjLmdldFVzZXIoKTsKCQkJaWYg\nKHNob3VsZEJlTnVsbCkKCQkJCWFzc2VydE51bGwodXNlcik7CgkJCWVsc2UK\nCQkJCWFzc2VydE5vdE51bGwodXNlcik7CgkJfQoJCWVtLmdldFRyYW5zYWN0\naW9uKCkucm9sbGJhY2soKTsKCX0KCQoJQXBwbGljYXRpb24gY3JlYXRlQXBw\nbGljYXRpb25XaXRoTm9uTnVsbEFwcGxpY2FudCgpIHsKCQlFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCQllbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CgkJQXBwbGljYXRpb24gYXBwID0gbmV3\nIEFwcGxpY2F0aW9uKCk7CgkJQXBwbGljYW50IHVzZXIgPSBuZXcgQXBwbGlj\nYW50KCk7CgkJdXNlci5zZXROYW1lKCJOb24tTnVsbCBVc2VyIik7CgkJYXBw\nLnNldFVzZXIodXNlcik7CgkJZW0ucGVyc2lzdChhcHApOwoJCWVtLnBlcnNp\nc3QodXNlcik7CgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCQly\nZXR1cm4gYXBwOwoJfQoJCglBcHBsaWNhdGlvbiBjcmVhdGVBcHBsaWNhdGlv\nbldpdGhOdWxsQXBwbGljYW50KCkgewoJCUVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKCQlBcHBsaWNhdGlvbiBhcHAgPSBuZXcgQXBwbGljYXRp\nb24oKTsKCQllbS5wZXJzaXN0KGFwcCk7CgkJZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKCQlyZXR1cm4gYXBwOwoJfQoJCglBcHBsaWNhbnQgY3Jl\nYXRlQXBwbGljYW50KCkgewoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKCQlBcHBsaWNhbnQgdXNlciA9IG5ldyBBcHBsaWNhbnQoKTsKCQl1\nc2VyLnNldE5hbWUoIk5vbi1OdWxsIFVzZXIiKTsKCQllbS5wZXJzaXN0KHVz\nZXIpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgkJcmV0dXJu\nIHVzZXI7Cgl9CgkKCXB1YmxpYyB2b2lkIHVwZGF0ZUJ5UXVlcnkoU3RyaW5n\nIGpwcWwsIE9iamVjdC4uLnBhcmFtcykgewoJCUVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKCQlRdWVyeSBxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5\nKGpwcWwpOwoJCWZvciAoaW50IGk9MDsgcGFyYW1zICE9IG51bGwgJiYgaTxw\nYXJhbXMubGVuZ3RoOyBpPSsyKSB7CgkJCXF1ZXJ5LnNldFBhcmFtZXRlcihw\nYXJhbXNbaV0udG9TdHJpbmcoKSwgcGFyYW1zW2krMV0pOwoJCX0KCQlxdWVy\neS5leGVjdXRlVXBkYXRlKCk7CgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKCX0KfQo=\n","encoding":"base64"}

