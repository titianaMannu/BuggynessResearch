{"sha":"06174fd3dedccda1a42e247299e7cec70375770f","node_id":"MDQ6QmxvYjIwNjM2NDowNjE3NGZkM2RlZGNjZGExYTQyZTI0NzI5OWU3Y2VjNzAzNzU3NzBm","size":5941,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/06174fd3dedccda1a42e247299e7cec70375770f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5x\ndWVyeS5jYWNoZTsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuRW50aXR5VHJhbnNhY3Rpb247CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UudGVzdC5TUUxMaXN0ZW5lclRlc3RDYXNlOwoKLyoqCiAq\nIFRlc3RzIHRoYXQgZmluZCgpIHF1ZXJpZXMgdGhhdCB1c2Ugbm9uLXByaW1h\ncnkga2V5cyBjYW4gYmUgY2FjaGVkLgogKiAKICogU1FMIFF1ZXJ5IENhY2hl\nIGNhY2hlcyBTUUwgcXVlcmllcyBnZW5lcmF0ZWQgdG8gc2VsZWN0IHNpbmds\nZSBlbnRpdHkuCiAqIEhvd2V2ZXIsIHNpbmdsZSBpbnN0YW5jZSBxdWVyaWVz\nIG1heSBhbHNvIGpvaW4gdG8gb3RoZXIgcmVsYXRpb25zLiBIZW5jZSwKICog\ncHJpbWFyeSBrZXkgYW5kIGZvcmVpZ24ga2V5cyBhcmUgbm9ybWFsbHkgdGhl\nIHBhcmFtZXRlcnMgdG8gdGhlc2UgcXVlcmllcwogKiB3aGljaCBjYWNoZWQg\ncXVlcnkgYmluZHMgYWdhaW4gd2hlbiBiZWluZyByZXVzZWQuCiAqIAogKiBU\naGUgdGVzdCB2ZXJpZmllcyB0aGUgY2FzZSB3aGVyZSBub24tcHJpbWFyeSBr\nZXlzIGFyZSB1c2VkIGFzIHF1ZXJ5CiAqIHBhcmFtZXRlcnMuIFRoZSB0ZXN0\nIGVtcGxveXMgYSBpbmhlcml0YW5jZSBoaWVyYXJjaHkgbWFwcGVkIHRvIFNJ\nTkdMRV9UQUJMRS4KICogV2hlbiBkZXJpdmVkIGluc3RhbmNlcyBhcmUgdXNl\nZCBpbiByZWxhdGlvbnNoaXAsIHRoZSBkaXNjcmltaW5hdG9yIHZhbHVlcwog\nKiBtdXN0IGJlIHVzZWQgaW4gdG8gam9pbiB0byB0aGUgdGFyZ2V0IHR5cGUu\nCiAqIAogKiBGb3IgZnVydGhlciBkZXRhaWxzLCByZWZlciA8QQogKiBIUkVG\nPSJodHRwczovL2lzc3Vlcy5hcGFjaGUub3JnL2ppcmEvYnJvd3NlL09QRU5K\nUEEtNjYwIj5PUEVOSlBBLTY2MDwvQT4KICogCiAqIAogKiBAYXV0aG9yIFBp\nbmFraSBQb2RkYXIKICogQGF1dGhvciBWaWtyYW0gQmhhdGlhCiAqIEBhdXRo\nb3IgRGF2aWQgQmxldmlucwogKi8KcHVibGljIGNsYXNzIFRlc3ROb25Qcmlt\nYXJ5S2V5UXVlcnlQYXJhbWV0ZXJzIGV4dGVuZHMgU1FMTGlzdGVuZXJUZXN0\nQ2FzZSB7Cglwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgRlVMTFRJTUVfRU1Q\nTE9ZRUVfQ09VTlQgPSAzOwoJcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IFBB\nUlRUSU1FX0VNUExPWUVFX0NPVU5UID0gMjsKICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIGludCBMSU5FSVRFTV9QRVJfSU5WT0lDRSA9IDE7Cglwcml2YXRl\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgREVQVF9OQU1FID0gIkVOR0lORUVSSU5H\nIjsKCglwdWJsaWMgdm9pZCBzZXRVcCgpIHsKCQlzdXBlci5zZXRVcChDTEVB\nUl9UQUJMRVMsIERlcGFydG1lbnQuY2xhc3MsIEVtcGxveWVlLmNsYXNzLAoJ\nCQkJRnVsbFRpbWVFbXBsb3llZS5jbGFzcywgUGFydFRpbWVFbXBsb3llZS5j\nbGFzcywKCQkJCUludm9pY2UuY2xhc3MsIExpbmVJdGVtLmNsYXNzLAoJCQkJ\nIm9wZW5qcGEuamRiYy5RdWVyeVNRTENhY2hlIiwgInRydWUiKTsKCQljcmVh\ndGVEZXBhcnRtZW50KERFUFRfTkFNRSk7CgkJY3JlYXRlSW52b2ljZSgpOwoJ\nCXNxbC5jbGVhcigpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RTZWxlY3RRdWVy\neVdpdGhQcmltYXJ5S2V5UGFyYW1ldGVyKCkgewoJCUVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKCQlRdWVyeSBxdWVy\neSA9IGVtCgkJCQkuY3JlYXRlUXVlcnkoIlNFTEVDVCBkIGZyb20gRGVwYXJ0\nbWVudCBkIHdoZXJlIGQubmFtZT0/MSIpOwoJCXF1ZXJ5LnNldFBhcmFtZXRl\ncigxLCBERVBUX05BTUUpOwoJCURlcGFydG1lbnQgZGVwdCA9IChEZXBhcnRt\nZW50KSBxdWVyeS5nZXRTaW5nbGVSZXN1bHQoKTsKCgkJYXNzZXJ0RXF1YWxz\nKEZVTExUSU1FX0VNUExPWUVFX0NPVU5ULCBkZXB0LmdldEZ1bGxUaW1lRW1w\nbG95ZWVzKCkKCQkJCS5zaXplKCkpOwoJCWFzc2VydEVxdWFscyhQQVJUVElN\nRV9FTVBMT1lFRV9DT1VOVCwgZGVwdC5nZXRQYXJ0VGltZUVtcGxveWVlcygp\nCgkJCQkuc2l6ZSgpKTsKCQlhc3NlcnRTUUwoIi4qIEFORCB0MC5UWVBFID0g\nLioiKTsKCQllbS5jbG9zZSgpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RTZWxl\nY3RRdWVyeVdpdGhOb1BhcmFtZXRlcigpIHsKCQlFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCgkJUXVlcnkgcXVlcnkg\nPSBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIGQgZnJvbSBEZXBhcnRtZW50IGQi\nKTsKCQlxdWVyeS5zZXRQYXJhbWV0ZXIoMSwgREVQVF9OQU1FKTsKCQlEZXBh\ncnRtZW50IGRlcHQgPSAoRGVwYXJ0bWVudCkgcXVlcnkuZ2V0U2luZ2xlUmVz\ndWx0KCk7CgoJCWFzc2VydEVxdWFscyhGVUxMVElNRV9FTVBMT1lFRV9DT1VO\nVCwgZGVwdC5nZXRGdWxsVGltZUVtcGxveWVlcygpCgkJCQkuc2l6ZSgpKTsK\nCQlhc3NlcnRFcXVhbHMoUEFSVFRJTUVfRU1QTE9ZRUVfQ09VTlQsIGRlcHQu\nZ2V0UGFydFRpbWVFbXBsb3llZXMoKQoJCQkJLnNpemUoKSk7CgoJCWFzc2Vy\ndFNRTCgiLiogQU5EIHQwLlRZUEUgPSAuKiIpOwoJCWVtLmNsb3NlKCk7Cgl9\nCgoJcHVibGljIHZvaWQgdGVzdEZpbmQoKSB7CgkJRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgoJCURlcGFydG1lbnQg\nZGVwdCA9IGVtLmZpbmQoRGVwYXJ0bWVudC5jbGFzcywgREVQVF9OQU1FKTsK\nCgkJYXNzZXJ0RXF1YWxzKEZVTExUSU1FX0VNUExPWUVFX0NPVU5ULCBkZXB0\nLmdldEZ1bGxUaW1lRW1wbG95ZWVzKCkKCQkJCS5zaXplKCkpOwoJCWFzc2Vy\ndEVxdWFscyhQQVJUVElNRV9FTVBMT1lFRV9DT1VOVCwgZGVwdC5nZXRQYXJ0\nVGltZUVtcGxveWVlcygpCgkJCQkuc2l6ZSgpKTsKCgkJYXNzZXJ0U1FMKCIu\nKiBBTkQgdDAuVFlQRSA9IC4qIik7CgkJCiAgICAgICAgSW52b2ljZSBpbnZv\naWNlID0gZW0uZmluZChJbnZvaWNlLmNsYXNzLCBuZXcgSW52b2ljZUtleSgx\nLCAiUmVkIikpOwogICAgICAgIExpc3Q8TGluZUl0ZW0+IGxpc3QgPSBpbnZv\naWNlLmdldExpbmVJdGVtcygpOwogICAgICAgIGFzc2VydEVxdWFscyhMSU5F\nSVRFTV9QRVJfSU5WT0lDRSwgbGlzdC5zaXplKCkpOwoJCWVtLmNsb3NlKCk7\nCgl9CgoJcHVibGljIHZvaWQgdGVzdFNlbGVjdFN1YkNsYXNzKCkgewoJCUVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoK\nCQlRdWVyeSBxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgZSBmcm9t\nIEZ1bGxUaW1lRW1wbG95ZWUgZSIpOwoJCWFzc2VydEVxdWFscyhGVUxMVElN\nRV9FTVBMT1lFRV9DT1VOVCwgcXVlcnkuZ2V0UmVzdWx0TGlzdCgpLnNpemUo\nKSk7CgoJCXF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnkoIlNFTEVDVCBlIGZyb20g\nUGFydFRpbWVFbXBsb3llZSBlIik7CgkJYXNzZXJ0RXF1YWxzKFBBUlRUSU1F\nX0VNUExPWUVFX0NPVU5ULCBxdWVyeS5nZXRSZXN1bHRMaXN0KCkuc2l6ZSgp\nKTsKCgkJYXNzZXJ0U1FMKCIuKiBXSEVSRSB0MC5UWVBFID0gLioiKTsKCX0K\nCglwdWJsaWMgdm9pZCB0ZXN0U2VsZWN0QmFzZUNsYXNzKCkgewoJCUVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKCQlR\ndWVyeSBxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgZSBmcm9tIEVt\ncGxveWVlIGUiKTsKCQlhc3NlcnRFcXVhbHMoRlVMTFRJTUVfRU1QTE9ZRUVf\nQ09VTlQgKyBQQVJUVElNRV9FTVBMT1lFRV9DT1VOVCwgcXVlcnkKCQkJCS5n\nZXRSZXN1bHRMaXN0KCkuc2l6ZSgpKTsKCQlhc3NlcnROb3RTUUwoIi4qIFdI\nRVJFIHQwLlRZUEUgPSAuKiIpOwoJfQoKCXByaXZhdGUgdm9pZCBjcmVhdGVE\nZXBhcnRtZW50KFN0cmluZyBkZXB0TmFtZSkgewoJCWlmIChjb3VudChEZXBh\ncnRtZW50LmNsYXNzKSA+IDApCgkJCXJldHVybjsKCgkJRGVwYXJ0bWVudCBk\nZXB0ID0gbmV3IERlcGFydG1lbnQoKTsKCQlkZXB0LnNldE5hbWUoZGVwdE5h\nbWUpOwoKCQlmb3IgKGludCBpID0gMTsgaSA8PSBGVUxMVElNRV9FTVBMT1lF\nRV9DT1VOVDsgaSsrKSB7CgkJCUZ1bGxUaW1lRW1wbG95ZWUgZSA9IG5ldyBG\ndWxsVGltZUVtcGxveWVlKCk7CgkJCWUuc2V0U3NuKCI4ODgtUFAtMDAxIiAr\nIGkpOwoJCQllLnNldFNhbGFyeSgxMDAwMDApOwoJCQlkZXB0LmFkZEVtcGxv\neWVlKGUpOwoJCX0KCQlmb3IgKGludCBpID0gMTsgaSA8PSBQQVJUVElNRV9F\nTVBMT1lFRV9DT1VOVDsgaSsrKSB7CgkJCVBhcnRUaW1lRW1wbG95ZWUgZSA9\nIG5ldyBQYXJ0VGltZUVtcGxveWVlKCk7CgkJCWUuc2V0U3NuKCI5OTktUFAt\nMDAxIiArIGkpOwoJCQllLnNldEhvdXJseVdhZ2UoMjApOwoJCQlkZXB0LmFk\nZEVtcGxveWVlKGUpOwoJCX0KCgkJRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwoJCWVtLnBlcnNpc3QoZGVwdCk7CgkJZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKCQllbS5jbG9zZSgpOwoKCX0KCQogICAgcHJpdmF0\nZSB2b2lkIGNyZWF0ZUludm9pY2UoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50\naXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAg\nICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIEludm9pY2UgaW52b2ljZSA9\nIG5ldyBJbnZvaWNlKDEsICJSZWQiLCAxLjMwKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMTsgIGkgPD0gTElORUlURU1fUEVSX0lOVk9JQ0U7IGkrKykgewog\nICAgICAgICAgICBMaW5lSXRlbSBpdGVtID0gbmV3IExpbmVJdGVtKFN0cmlu\nZy52YWx1ZU9mKGkpLCAxMCk7CiAgICAgICAgICAgIGl0ZW0uc2V0SW52b2lj\nZShpbnZvaWNlKTsKICAgICAgICAgICAgaW52b2ljZS5nZXRMaW5lSXRlbXMo\nKS5hZGQoaXRlbSk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoaW52b2ljZSk7\nCiAgICAgICAgfQogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5j\nb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOyAgICAgICAgCiAgICB9CQp9\nCg==\n","encoding":"base64"}

