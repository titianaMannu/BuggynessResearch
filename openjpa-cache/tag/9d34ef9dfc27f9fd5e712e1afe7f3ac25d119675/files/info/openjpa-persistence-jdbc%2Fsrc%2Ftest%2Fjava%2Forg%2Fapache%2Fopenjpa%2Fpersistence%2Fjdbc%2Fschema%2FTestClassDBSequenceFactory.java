{"sha":"c2761173ccab7f46becde63cc1650a16ef107619","node_id":"MDQ6QmxvYjIwNjM2NDpjMjc2MTE3M2NjYWI3ZjQ2YmVjZGU2M2NjMTY1MGExNmVmMTA3NjE5","size":7679,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c2761173ccab7f46becde63cc1650a16ef107619","content":"LyoKICogVGVzdENsYXNzREJTZXF1ZW5jZUZhY3RvcnkuamF2YQogKgogKiBD\ncmVhdGVkIG9uIE9jdG9iZXIgNiwgMjAwNiwgMTE6MjkgQU0KICoKICogVG8g\nY2hhbmdlIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRl\nIE1hbmFnZXIKICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0\nb3IuCiAqLwoKCi8qCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdh\ncmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250\ncmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBm\naWxlCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlv\nbmFsIGluZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJz\naGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVu\nZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAi\nTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBp\nbiBjb21wbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9i\ndGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3\ndy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVz\ncyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4g\nd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExp\nY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywg\nV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJ\nTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vu\nc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVy\nbWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNl\nLiAgICAKICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmpkYmMuc2NoZW1hOwoKaW1wb3J0IGphdmEudXRpbC4qOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25m\naWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2Vy\nbmVsLkNsYXNzVGFibGVKREJDU2VxOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zY2hlbWEuU2VxdWVuY2U7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5jb21tb24uYXBwcy4qOwoKCmlt\ncG9ydCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5Bbm5vdGF0aW9uOwppbXBvcnQg\nanVuaXQuZnJhbWV3b3JrLio7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5\nTWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlN\nYW5hZ2VyOwoKCnB1YmxpYyBjbGFzcyBUZXN0Q2xhc3NEQlNlcXVlbmNlRmFj\ndG9yeSBleHRlbmRzIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5q\nZGJjLmtlcm5lbC5CYXNlSkRCQ1Rlc3R7CiAgICAKICAgIAogICAgLyoqIENy\nZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdENsYXNzREJTZXF1ZW5jZUZh\nY3RvcnkgKi8KICAgIHB1YmxpYyBUZXN0Q2xhc3NEQlNlcXVlbmNlRmFjdG9y\neSgpIHsKICAgIH0KICAgIAogICAgcHVibGljIFRlc3RDbGFzc0RCU2VxdWVu\nY2VGYWN0b3J5KFN0cmluZyB0ZXN0KSB7CiAgICAgICAgc3VwZXIodGVzdCk7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAg\nZGVsZXRlQWxsKFNlcUUuY2xhc3MpOwogICAgfQogICAgCiAgICBib29sZWFu\nIHN1cHBvcnRzUGVzc2ltaXN0aWNMb2NraW5nKCkgewogICAgICAgIE9wZW5K\nUEFDb25maWd1cmF0aW9uIGNvbmYgPSBnZXRDb25maWd1cmF0aW9uKCk7CiAg\nICAgICAgcmV0dXJuIGNvbmYgaW5zdGFuY2VvZiBKREJDQ29uZmlndXJhdGlv\nbgogICAgICAgICAgICAgICAgJiYgKChKREJDQ29uZmlndXJhdGlvbikgY29u\nZikuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKS4KICAgICAgICAgICAgICAg\nIHN1cHBvcnRzU2VsZWN0Rm9yVXBkYXRlOwogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCB0ZXN0VmlydHVhbFN1cGVyY2xhc3MoKSB7CiAgICAgICAgCiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IHBtZiA9KE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSkKICAgICAgICAgICAgICAgIGdldEVt\nZihnZXRQcm9wcygpKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBw\nbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgcG1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICAvL0ZJWE1FIGp0aG9tYXMKICAgICAgICAvL1Nl\ncXVlbmNlIGdlbiA9IHBtLmdldElkZW50aXR5U2VxdWVuY2UoU2VxRi5jbGFz\ncyk7CiAgICAgICAgU2VxdWVuY2UgZ2VuPW51bGw7CiAgICAgICAgbG9uZyBu\nZXh0ID0gKChOdW1iZXIpIGdlbi5nZXRJbmNyZW1lbnQoKSkubG9uZ1ZhbHVl\nKCk7CiAgICAgICAgLy9GSVhNRSBqdGhvbWFzCiAgICAgICAgLy9nZW4gPSBw\nbS5nZXRJZGVudGl0eVNlcXVlbmNlKFNlcUcuY2xhc3MpOwogICAgICAgIGFz\nc2VydEVxdWFscyhuZXh0ICsgMSwgKChOdW1iZXIpIGdlbi5nZXRJbmNyZW1l\nbnQoKSkubG9uZ1ZhbHVlKCkpOwogICAgICAgIHBtLmNsb3NlKCk7CiAgICAg\nICAgcG1mLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RJZ25vcmVWaXJ0dWFsU3VwZXJjbGFzcygpIHsKICAgICAgICAKICAgICAg\nICBNYXAgcHJvcHM9bmV3IEhhc2hNYXAoKTsKICAgICAgICBwcm9wcy5wdXQo\nIlRhYmxlTmFtZSIsICJKRE9fQ0xBU1NfU0VRVUVOQ0UiKTsKICAgICAgICBw\ncm9wcy5wdXQoIklnbm9yZVZpcnR1YWwiLCAidHJ1ZSIpOwogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBwbWYgPShPcGVuSlBBRW50aXR5\nTWFuYWdlckZhY3RvcnkpCiAgICAgICAgICAgICAgICBnZXRFbWYocHJvcHMp\nOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gcG1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAvL0ZJWE1FIGp0aG9tYXMKICAg\nICAgICAvL1NlcXVlbmNlIGdlbiA9IHBtLmdldElkZW50aXR5U2VxdWVuY2Uo\nU2VxRi5jbGFzcyk7CiAgICAgICAgU2VxdWVuY2UgZ2VuID1udWxsOwogICAg\nICAgIGxvbmcgbmV4dCA9ICgoTnVtYmVyKSBnZW4uZ2V0SW5jcmVtZW50KCkp\nLmxvbmdWYWx1ZSgpOwogICAgICAgIC8vRklYTUUganRob21hcwogICAgICAg\nIC8vU2VxdWVuY2UgZ2VuMiA9IHBtLmdldElkZW50aXR5U2VxdWVuY2UoU2Vx\nRy5jbGFzcyk7CiAgICAgICAgU2VxdWVuY2UgZ2VuMiA9bnVsbDsKICAgICAg\nICBsb25nIG5leHQyID0gKChOdW1iZXIpIGdlbjIuZ2V0SW5jcmVtZW50KCkp\nLmxvbmdWYWx1ZSgpOwogICAgICAgIGlmIChuZXh0MiAhPSBuZXh0ICsgMSkK\nICAgICAgICAgICAgcmV0dXJuOyAvLyB2YWxpZC4KICAgICAgICBhc3NlcnRU\ncnVlKCgoTnVtYmVyKSBnZW4uZ2V0SW5jcmVtZW50KCkpLmxvbmdWYWx1ZSgp\nICE9IG5leHQyICsgMSk7CiAgICAgICAgCiAgICAgICAgcG0uY2xvc2UoKTsK\nICAgICAgICBwbWYuY2xvc2UoKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAg\nKiBCYXNlZCBvbiByZXBvcnRlZCBidWcgY2FzZS4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgdGVzdE5vU2VxdWVuY2VIb2xlc09uQXR0YWNoKCkgewogICAg\nICAgIFBlckNsYXNzVGVzdE9iamVjdDMgcGMgPSBuZXcgUGVyQ2xhc3NUZXN0\nT2JqZWN0MygpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0o\nT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBzdGFydFR4KHBtKTs7CiAgICAgICAgcG0ucGVyc2lzdChwYyk7\nCiAgICAgICAgZW5kVHgocG0pOzsKICAgICAgICBsb25nIGlkMSA9IHBjLmdl\ndElkKCk7CiAgICAgICAgCiAgICAgICAgcGMgPSBuZXcgUGVyQ2xhc3NUZXN0\nT2JqZWN0MygpOwogICAgICAgIHN0YXJ0VHgocG0pOzsKICAgICAgICBwbS5w\nZXJzaXN0KHBjKTsKICAgICAgICBsb25nIGlkMiA9IHBjLmdldElkKCk7CiAg\nICAgICAgZW5kVHgocG0pOzsKICAgICAgICBwbS5jbG9zZSgpOwogICAgICAg\nIAogICAgICAgIHBjID0gbmV3IFBlckNsYXNzVGVzdE9iamVjdDMoKTsKICAg\nICAgICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5\nTWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0pOzsKICAgICAgICBwbS5w\nZXJzaXN0KHBjKTsKICAgICAgICBlbmRUeChwbSk7OwogICAgICAgIGxvbmcg\naWQzID0gcGMuZ2V0SWQoKTsKICAgICAgICBwbS5jbG9zZSgpOwogICAgICAg\nIAogICAgICAgIGFzc2VydEVxdWFscyhpZDEgKyAxLCBpZDIpOwogICAgICAg\nIGFzc2VydEVxdWFscyhpZDIgKyAxLCBpZDMpOwogICAgfQogICAgCiAgICAv\nKioKICAgICAqIFRlc3RzIHRoYXQgYWxsIHNlcXVlbmNlIG51bWJlcnMgYXJl\nIHVuaXF1ZSBhbmQgaW4gb3JkZXIuCiAgICAgKiBXaWxsIGZhaWwgZm9yIGRi\ncyB3aXRob3V0IHBlc3NpbWlzdGljIGxvY2tpbmcuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHRlc3RTZXF1ZW5jZSgpCiAgICB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICBpZiAoIShzdXBwb3J0c1Blc3NpbWlzdGljTG9ja2luZygp\nKSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIAogICAgICAgIFNldCBz\nZXQgPSBuZXcgSGFzaFNldCgpOwogICAgICAgIEpEQkNDb25maWd1cmF0aW9u\nIGNvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pIGdldENvbmZpZ3VyYXRpb24o\nKTsKICAgICAgICBCcm9rZXIgYnJva2VyID0gZ2V0QnJva2VyRmFjdG9yeSgp\nLm5ld0Jyb2tlcigpOwogICAgICAgIAogICAgICAgIAogICAgICAgIFVwZGF0\nZVRocmVhZCB0MSA9IG5ldyBVcGRhdGVUaHJlYWQoc2V0LCBicm9rZXIpOwog\nICAgICAgIFVwZGF0ZVRocmVhZCB0MiA9IG5ldyBVcGRhdGVUaHJlYWQoc2V0\nLCBicm9rZXIpOwogICAgICAgIAogICAgICAgIHQxLnN0YXJ0KCk7CiAgICAg\nICAgdDIuc3RhcnQoKTsKICAgICAgICB0MS5qb2luKCk7CiAgICAgICAgdDIu\nam9pbigpOwogICAgICAgIAogICAgICAgIGlmICh0MS5lcnJvciAhPSBudWxs\nKQogICAgICAgICAgICB0aHJvdyB0MS5lcnJvcjsKICAgICAgICBpZiAodDIu\nZXJyb3IgIT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgdDIuZXJyb3I7CiAg\nICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwMiwgc2V0LnNpemUoKSk7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RTZXF1ZW5jZUdlbmVy\nYXRvcigpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgCiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBzZXF1ZW5jZSBnZW5l\ncmF0b3IgY3JlYXRlcyBzZXBhcmF0ZQogICAgICAgIC8vIGluc3RhbmNlcy4K\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgICAg\nICAgICAgIC8vRklYTUUganRob21hcwogICAgICAgICAgICAvKmFzc2VydEVx\ndWFscygoKE51bWJlcikgcG0uZ2V0SWRlbnRpdHlTZXF1ZW5jZShTZXFELmNs\nYXNzKS4KICAgICAgICAgICAgICAgICAgICBuZXh0KCkpLmxvbmdWYWx1ZSgp\nICsgMSwKICAgICAgICAgICAgICAgICAgICAoKE51bWJlcikgcG0uZ2V0SWRl\nbnRpdHlTZXF1ZW5jZShTZXFELmNsYXNzKS4KICAgICAgICAgICAgICAgICAg\nICBnZXRJbmNyZW1lbnQoKSkubG9uZ1ZhbHVlKCkpOwogICAgICAgICAgICAg\nCiAgICAgICAgICAgICAqLwogICAgICAgIH0KICAgICAgICAvLyBtYWtlIHN1\ncmUgdGhlIHNlcXVlbmNlIGdlbmVyYXRlIGlzIG5vdCB0aGUgc2FtZSBhcyBp\ncwogICAgICAgIC8vIHVzZWQgZWxzZXdoZXJlCiAgICAgICAgCiAgICAgICAg\nZm9yIChpbnQgaiA9IDA7IGogPCAxMDA7IGorKykgewogICAgICAgICAgICAv\nL0ZJWE1FCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgIGFzc2VydE5vdEVx\ndWFscyhuZXcgTG9uZygoKE51bWJlcikgcG0uZ2V0SWRlbnRpdHlTZXF1ZW5j\nZQogICAgICAgICAgICAgICAgICAgIChTZXFBLmNsYXNzKS5nZXRJbmNyZW1l\nbnQoKSkubG9uZ1ZhbHVlKCkgKyAxKSwKICAgICAgICAgICAgICAgICAgICBw\nbS5nZXRJZGVudGl0eVNlcXVlbmNlKFNlcUQuY2xhc3MpLm5leHQoKSk7CiAg\nICAgICAgICAgICAqLwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGlj\nIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIC8v\nbWFpbigpOwogICAgfQogICAgcHJpdmF0ZSBNYXAgZ2V0UHJvcHMoKSB7CiAg\nICAgICAgTWFwIHByb3BzPW5ldyBIYXNoTWFwKCk7CiAgICAgICAgcHJvcHMu\ncHV0KCJvcGVuanBhLlNlcXVlbmNlIiwgImRiLWNsYXNzKFRhYmxlTmFtZT1K\nRE9fQ0xBU1NfU0VRVUVOQ0UiKTsKICAgICAgICByZXR1cm4gcHJvcHM7CiAg\nICB9CiAgICAKICAgIAogICAgCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBV\ncGRhdGVUaHJlYWQKICAgICAgICAgICAgZXh0ZW5kcyBUaHJlYWQgewogICAg\nICAgIAogICAgICAgIHByaXZhdGUgU2V0IF9zZXQgPSBudWxsOwogICAgICAg\nIHByaXZhdGUgQnJva2VyIF9icm9rZXIgPSBudWxsOwogICAgICAgIHB1Ymxp\nYyBFeGNlcHRpb24gZXJyb3IgPSBudWxsOwogICAgICAgIAogICAgICAgIHB1\nYmxpYyBVcGRhdGVUaHJlYWQoU2V0IHNldCwgQnJva2VyIGJyb2tlcikgewog\nICAgICAgICAgICBfc2V0ID0gc2V0OwogICAgICAgICAgICBfYnJva2VyID0g\nYnJva2VyOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBwdWJsaWMgdm9p\nZCBydW4oKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBD\nbGFzc01hcHBpbmcgbWFwcGluZyA9CiAgICAgICAgICAgICAgICAgICAgICAg\nICgoSkRCQ0NvbmZpZ3VyYXRpb24pIF9icm9rZXIuZ2V0Q29uZmlndXJhdGlv\nbigpKS4KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TWFwcGluZ1JlcG9z\naXRvcnlJbnN0YW5jZSgpLgogICAgICAgICAgICAgICAgICAgICAgICBnZXRN\nYXBwaW5nKFNlcUQuY2xhc3MsIG51bGwsIHRydWUpOwogICAgICAgICAgICAg\nICAgQ2xhc3NUYWJsZUpEQkNTZXEgc2VxID0gKENsYXNzVGFibGVKREJDU2Vx\nKQogICAgICAgICAgICAgICAgX2Jyb2tlci5nZXRJZGVudGl0eVNlcXVlbmNl\nKG1hcHBpbmcpOwogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCA1MTsgaSsrKQogICAgICAgICAgICAgICAgICAgIF9zZXQuYWRkKHNlcS5u\nZXh0KF9icm9rZXIsIG1hcHBpbmcpKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGVycm9yID0gZTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

