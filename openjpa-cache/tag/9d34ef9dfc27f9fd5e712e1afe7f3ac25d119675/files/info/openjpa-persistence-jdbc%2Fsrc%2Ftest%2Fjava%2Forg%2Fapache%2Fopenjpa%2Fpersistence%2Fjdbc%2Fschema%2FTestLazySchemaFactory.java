{"sha":"fbc3220e5cb4f142434cede7ab78b1c4dac1bec9","node_id":"MDQ6QmxvYjIwNjM2NDpmYmMzMjIwZTVjYjRmMTQyNDM0Y2VkZTdhYjc4YjFjNGRhYzFiZWM5","size":4051,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/fbc3220e5cb4f142434cede7ab78b1c4dac1bec9","content":"LyoKICogVGVzdExhenlTY2hlbWFGYWN0b3J5LmphdmEKICoKICogQ3JlYXRl\nZCBvbiBPY3RvYmVyIDYsIDIwMDYsIDE6NDcgUE0KICoKICogVG8gY2hhbmdl\nIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFn\nZXIKICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuCiAq\nLwoKLyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNo\nZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVp\ncmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5n\nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBp\ncyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VU\nIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0\naGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3Ig\ndGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9u\ncyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAog\nKi8KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRi\nYy5zY2hlbWE7CgppbXBvcnQgamF2YS51dGlsLio7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkxhenlTY2hlbWFG\nYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLlNjaGVtYUdyb3VwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlRhYmxlOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5qZGJjLmNvbW1vbi5hcHBzLio7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVz\ndENhc2U7CgppbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uQW5ub3RhdGlv\nbjsKaW1wb3J0IGp1bml0LmZyYW1ld29yay4qOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVu\nSlBBRW50aXR5TWFuYWdlcjsKCgpwdWJsaWMgY2xhc3MgVGVzdExhenlTY2hl\nbWFGYWN0b3J5IGV4dGVuZHMgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmpkYmMua2VybmVsLkJhc2VKREJDVGVzdHsKICAgICAgIAogICAgcHJp\ndmF0ZSBTY2hlbWFHcm91cCBfZ3JvdXAgPSBudWxsOwogICAgcHJpdmF0ZSBi\nb29sZWFuIF9ma3MgPSB0cnVlOwogICAgCiAgICAvKiogQ3JlYXRlcyBhIG5l\ndyBpbnN0YW5jZSBvZiBUZXN0TGF6eVNjaGVtYUZhY3RvcnkgKi8KICAgIHB1\nYmxpYyBUZXN0TGF6eVNjaGVtYUZhY3RvcnkoKSB7CiAgICB9CgogICAgcHVi\nbGljIFRlc3RMYXp5U2NoZW1hRmFjdG9yeShTdHJpbmcgdGVzdCkgewogICAg\nICAgIHN1cGVyKHRlc3QpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVw\nKCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBzZWUg\naWYgdGhlIGRpY3Qgc3VwcG9ydHMgZm9yZWlnbiBrZXlzOyBteXNxbCBjYW4g\nc3VwcG9ydCB0aGVtLCBidXQKICAgICAgICAvLyBjYW4ndCBkZXRlY3Qga2V5\ncyBhZGRlZCB0aHJvdWdoIGFsdGVyIHRhYmxlIGNvbW1hbmRzLCB3aGljaCBp\ncyB3aGF0CiAgICAgICAgLy8ga29kbyB1c2VzCiAgICAgICAgSkRCQ0NvbmZp\nZ3VyYXRpb24gY29uZiA9IChKREJDQ29uZmlndXJhdGlvbikgZ2V0Q29uZmln\ndXJhdGlvbigpOwogICAgICAgIF9ma3MgPSBjb25mLmdldERCRGljdGlvbmFy\neUluc3RhbmNlKCkuc3VwcG9ydHNGb3JlaWduS2V5cwogICAgICAgICAgICAm\nJiBnZXRDdXJyZW50UGxhdGZvcm0oKSAhPSBBYnN0cmFjdFRlc3RDYXNlLlBs\nYXRmb3JtLk1ZU1FMOwoKICAgICAgICBMYXp5U2NoZW1hRmFjdG9yeSBmYWN0\nb3J5ID0gbmV3IExhenlTY2hlbWFGYWN0b3J5KCk7CiAgICAgICAgZmFjdG9y\neS5zZXRDb25maWd1cmF0aW9uKGNvbmYpOwogICAgICAgIGZhY3Rvcnkuc2V0\nUHJpbWFyeUtleXModHJ1ZSk7CiAgICAgICAgZmFjdG9yeS5zZXRJbmRleGVz\nKHRydWUpOwogICAgICAgIGZhY3Rvcnkuc2V0Rm9yZWlnbktleXModHJ1ZSk7\nCiAgICAgICAgX2dyb3VwID0gZmFjdG9yeTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0TGF6eVNjaGVtYUZhY3RvcnkoKSB7CiAgICAgICAgLy8gc2hv\ndWxkIHJlYWQgdGFibGVzIDEgYW5kIDIuLi4KICAgICAgICBUYWJsZSB0YWJs\nZSA9IF9ncm91cC5maW5kVGFibGUoIlQxIik7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbCh0YWJsZSk7CiAgICAgICAgVGFibGUgdGFibGUyID0gX2dyb3VwLmZp\nbmRUYWJsZSgidDEiKTsKICAgICAgICBhc3NlcnRUcnVlKHRhYmxlID09IHRh\nYmxlMik7CgogICAgICAgIGludCBleHBlY3RlZENvbHVtbnMgPSAyOwoKICAg\nICAgICAvLyBTeWJhc2UgaGFzIGFuIGV4dHJhICJVTlFfSU5ERVgiIGNvbHVt\nbi4KICAgICAgICBpZiAoZ2V0Q3VycmVudFBsYXRmb3JtKCkgPT0gQWJzdHJh\nY3RUZXN0Q2FzZS5QbGF0Zm9ybS5TWUJBU0UpCiAgICAgICAgICAgIGV4cGVj\ndGVkQ29sdW1ucysrOwoKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRD\nb2x1bW5zLCB0YWJsZS5nZXRDb2x1bW5zKCkubGVuZ3RoKTsKICAgICAgICBp\nZiAoX2ZrcykKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHRhYmxlLmdl\ndEZvcmVpZ25LZXlzKCkubGVuZ3RoKTsKCiAgICAgICAgdGFibGUyID0gX2dy\nb3VwLmZpbmRUYWJsZSgiVDIiKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHRh\nYmxlMik7CiAgICAgICAgaWYgKF9ma3MpCiAgICAgICAgICAgIGFzc2VydFRy\ndWUodGFibGUuZ2V0Rm9yZWlnbktleXMoKVswXS5nZXRQcmltYXJ5S2V5Q29s\ndW1ucygpWzBdLgogICAgICAgICAgICAgICAgZ2V0VGFibGUoKSA9PSB0YWJs\nZTIpOwoKICAgICAgICBhc3NlcnROdWxsKHRhYmxlLmdldFNjaGVtYSgpLmdl\ndFRhYmxlKCJUMyIpKTsKCiAgICAgICAgLy8gc2hvdWxkIHJlYWQgdGFibGUg\nMyBvbmx5Li4uCiAgICAgICAgVGFibGUgdGFibGUzID0gX2dyb3VwLmZpbmRU\nYWJsZSgiVDMiKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHRhYmxlMyk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZSh0YWJsZS5nZXRTY2hlbWEoKS5nZXRUYWJsZSgi\nVDMiKSA9PSB0YWJsZTMpOwogICAgICAgIGlmIChfZmtzKQogICAgICAgICAg\nICBhc3NlcnRUcnVlKHRhYmxlMy5nZXRGb3JlaWduS2V5cygpWzBdLmdldFBy\naW1hcnlLZXlDb2x1bW5zKClbMF0uCiAgICAgICAgICAgICAgICBnZXRUYWJs\nZSgpID09IHRhYmxlKTsKCiAgICAgICAgYXNzZXJ0TnVsbCh0YWJsZTMuZ2V0\nU2NoZW1hKCkuZ2V0VGFibGUoIlQ0IikpOwogICAgfQoKICAgIHB1YmxpYyBz\ndGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICAvL21h\naW4oVGVzdExhenlTY2hlbWFGYWN0b3J5LmNsYXNzKTsKICAgIH0KICAgIAp9\nCg==\n","encoding":"base64"}

