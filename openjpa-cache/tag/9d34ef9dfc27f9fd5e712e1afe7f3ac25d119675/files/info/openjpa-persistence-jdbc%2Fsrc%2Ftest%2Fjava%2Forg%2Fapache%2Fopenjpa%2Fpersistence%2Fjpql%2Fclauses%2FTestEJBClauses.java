{"sha":"ac9cd9084f03b0c54aa79e8efea4963644d7db02","node_id":"MDQ6QmxvYjIwNjM2NDphYzljZDkwODRmMDNiMGM1NGFhNzllOGVmZWE0OTYzNjQ0ZDdkYjAy","size":6614,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ac9cd9084f03b0c54aa79e8efea4963644d7db02","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5j\nbGF1c2VzOwoKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBq\nYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0\neU1hbmFnZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmNvbW1vbi51dGlscy5BYnN0cmFjdFRlc3RDYXNlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi5hcHBzLkNvdXJz\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21t\nb24uYXBwcy5BcnRDb3Vyc2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuY29tbW9uLmFwcHMuRGVwYXJ0bWVudDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24uYXBwcy5TdHVk\nZW50OwoKcHVibGljIGNsYXNzIFRlc3RFSkJDbGF1c2VzIGV4dGVuZHMgQWJz\ndHJhY3RUZXN0Q2FzZSB7CgogICAgcHVibGljIFRlc3RFSkJDbGF1c2VzKFN0\ncmluZyBuYW1lKSB7CiAgICAgICAgc3VwZXIobmFtZSwgImpwcWxjbGF1c2Vz\nY2FjdHVzYXBwIik7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7\nCiAgICAgICAgZGVsZXRlQWxsKENvdXJzZS5jbGFzcyk7CiAgICAgICAgZGVs\nZXRlQWxsKFN0dWRlbnQuY2xhc3MpOwogICAgICAgIGRlbGV0ZUFsbChEZXBh\ncnRtZW50LmNsYXNzKTsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7Cgog\nICAgICAgIFN0cmluZyBuYW1lID0gIiI7CiAgICAgICAgTGlzdDxDb3Vyc2U+\nIGNsaXN0ID0gbmV3IEFycmF5TGlzdDxDb3Vyc2U+KCk7CiAgICAgICAgTGlz\ndDxEZXBhcnRtZW50PiBkbGlzdCA9IG5ldyBBcnJheUxpc3Q8RGVwYXJ0bWVu\ndD4oKTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsK\nICAgICAgICAgICAgQ291cnNlIGN1cnIgPSBuZXcgQ291cnNlKCJNYXRoICIg\nKyBpLCBpICogMiwgaSk7CiAgICAgICAgICAgIENvdXJzZSBhY3VyciA9IG5l\ndyBBcnRDb3Vyc2UoaSArIDIwLCAiRW5nbGlzaCIgKyAoMiAqIGkpKTsKICAg\nICAgICAgICAgRGVwYXJ0bWVudCBkdXJyID0gbmV3IERlcGFydG1lbnQoIkNv\nbXBTY2kiICsgaSwgbnVsbCwgaSArIDIpOwogICAgICAgICAgICBjbGlzdC5h\nZGQoY3Vycik7CiAgICAgICAgICAgIGNsaXN0LmFkZChhY3Vycik7CiAgICAg\nICAgICAgIGRsaXN0LmFkZChkdXJyKTsKICAgICAgICB9CgogICAgICAgIFN0\ndWRlbnQgc3R1ZCA9IG5ldyBTdHVkZW50KCJKb25hdGhhbiIsIGNsaXN0LCBk\nbGlzdCk7CiAgICAgICAgU3R1ZGVudCBzdHVkMiA9IG5ldyBTdHVkZW50KCJT\ndGFtIiwgbnVsbCwgZGxpc3QpOwogICAgICAgIFN0dWRlbnQgc3R1ZDMgPSBu\nZXcgU3R1ZGVudCgiSm9obiIsIGNsaXN0LCBudWxsKTsKICAgICAgICBTdHVk\nZW50IHN0dWQ0ID0gbmV3IFN0dWRlbnQoIkJpbGwiLCBudWxsLCBudWxsKTsK\nCiAgICAgICAgZW0ucGVyc2lzdChzdHVkKTsKICAgICAgICBlbS5wZXJzaXN0\nKHN0dWQyKTsKICAgICAgICBlbS5wZXJzaXN0KHN0dWQzKTsKICAgICAgICBl\nbS5wZXJzaXN0KHN0dWQ0KTsKCiAgICAgICAgZW5kVHgoZW0pOwogICAgICAg\nIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RnJvbUNs\nYXVzZTEoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1cnJlbnRF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVD\nVCBvLm5hbWUgRlJPTSBTdHVkZW50IG8iOwoKICAgICAgICBMaXN0IHJlc3Vs\ndCA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KQogICAgICAgICAgICAuZ2V0UmVz\ndWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKHJlc3VsdCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDQsIHJlc3VsdC5zaXplKCkpOwoKICAgICAg\nICBlbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEZyb21D\nbGF1c2UyKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOwoKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VM\nRUNUIE5FVyBhcHBzLkFydENvdXJzZShlLm5hbWUpIiArCiAgICAgICAgICAg\nICJGUk9NIFN0dWRlbnQgZSI7CgogICAgICAgIExpc3QgcmVzdWx0ID0gZW0u\nY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwogICAgICAgIGFzc2VydEVxdWFscyg0\nLCByZXN1bHQuc2l6ZSgpKTsKCiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RGcm9tQ2xhdXNlMygpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNUIG8ubmFtZSAiICsKICAgICAg\nICAgICAgIkZST00gU3R1ZGVudCBvLCBDb3Vyc2UgYyAiICsKICAgICAgICAg\nICAgIldIRVJFIG8uY291cnNlIElTIE5VTEwgQU5EIG8uZGVwYXJ0bWVudCBJ\nUyBOVUxMIjsKCiAgICAgICAgTGlzdCBscyA9IChMaXN0KSBlbS5jcmVhdGVR\ndWVyeShxdWVyeSkKICAgICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsKICAg\nICAgICBTdHJpbmcgdW5vID0gKFN0cmluZykgbHMuZ2V0KDApOwoKICAgICAg\nICBhc3NlcnROb3ROdWxsKGxzKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwg\nbHMuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIkJpbGwiLCB1bm8p\nOwoKICAgICAgICBlbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdFdoZXJlQ2xhdXNlMSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBTdHJpbmcgcXVl\ncnkgPSAiU0VMRUNUIGRpc3RpbmN0IHMubmFtZSAiICsKICAgICAgICAgICAg\nIkZST00gU3R1ZGVudCBzLCBDb3Vyc2UgZCAiICsKICAgICAgICAgICAgIldI\nRVJFIGQuY291cnNlSWQgPj0gNCBBTkQgcy5kZXBhcnRtZW50IElTIE5PVCBO\nVUxMIjsKCiAgICAgICAgTGlzdCBscyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5\nKS5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAgIGFzc2VydE5vdE51bGwobHMp\nOwogICAgICAgIGFzc2VydEVxdWFscygyLCBscy5zaXplKCkpOwoKICAgICAg\nICBlbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFdoZXJl\nQ2xhdXNlMigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VM\nRUNUIGRpc3RpbmN0IHMubmFtZSAiICsKICAgICAgICAgICAgIkZST00gU3R1\nZGVudCBzICIgKwogICAgICAgICAgICAiV0hFUkUiICsKICAgICAgICAgICAg\nIiBFeGlzdHMoU0VMRUNUIGMgRlJPTSBzLmNvdXJzZSBjIFdIRVJFIGMubmFt\nZSBMSUtFICdNYXRoJScpIjsKCiAgICAgICAgTGlzdCBscyA9IGVtLmNyZWF0\nZVF1ZXJ5KHF1ZXJ5KS5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAgIGFzc2Vy\ndE5vdE51bGwobHMpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBscy5zaXpl\nKCkpOwogICAgICAgIGFzc2VydFRydWUobHMuY29udGFpbnMoIkpvbmF0aGFu\nIikpOwogICAgICAgIGFzc2VydFRydWUobHMuY29udGFpbnMoIkpvaG4iKSk7\nCgogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0Q2xhdXNlUmFuZ2VWYXIoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgU3RyaW5nIHF1\nZXJ5ID0gIlNFTEVDVCBESVNUSU5DVCBzIEZST00gU3R1ZGVudCBzLCBTdHVk\nZW50IHMyICIgKwogICAgICAgICAgICAiV0hFUkUgcy5uYW1lID0gJ0pvaG4n\nIEFORCBzMi5uYW1lID0gJ0pvbmF0aGFuJyI7CgogICAgICAgIExpc3QgbHMg\nPSBlbS5jcmVhdGVRdWVyeShxdWVyeSkuZ2V0UmVzdWx0TGlzdCgpOwoKICAg\nICAgICBhc3NlcnROb3ROdWxsKGxzKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgbHMuc2l6ZSgpKTsKCiAgICAgICAgU3R1ZGVudCByZXQgPSAoU3R1ZGVu\ndCkgbHMuZ2V0KDApOwogICAgICAgIGFzc2VydEVxdWFscygiSm9obiIsIHJl\ndC5nZXROYW1lKCkpOwoKICAgICAgICBlbmRFbShlbSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdENsYXVzZVBhdGhFeHByKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAg\nICAgIFN0cmluZyBmYWlsdXJlID0gIlNFTEVDVCBESVNUSU5DVCBzICIgKwog\nICAgICAgICAgICAiRlJPTSBTdHVkZW50IHMgV0hFUkUiICsKICAgICAgICAg\nICAgIiBzLmRlcGFydG1lbnQubmFtZSA9ICdDb21wU2NpMSciOwogICAgICAg\nIC8vIENoYW5nZXMgcmVsYXRlZCB0byBPUEVOSlBBLTQ4NSBhbGxvd3MgdGhp\ncyBxdWVyeSB0byBwYXNzLgogICAgICAgIC8vIFRoZSBxdWVyeSBpcyBub3Qg\na29zaGVyIGFzIGl0IGRvZXMgbmF2aWdhdGUgdGhyb3VnaCBhIAogICAgICAg\nIC8vIGNvbGxlY3Rpb24tdmFsdWVkLXBhdGgtZXhwcmVzc2lvbiAocy5kZXBh\ncnRtZW50Lm5hbWUpIHdoZXJlCiAgICAgICAgLy8gZGVwYXJ0bWVudCBpcyBh\nIENvbGxlY3Rpb24uIAogICAgICAgIC8vIEJ1dCB3ZSBhbGxvdyB0aGlzIGJl\nY2F1c2Ugb2YgdGhlIGNvbnZlbmllbmNlIG9mIHRoZSBxdWVyeSBleHByZXNz\naW9uIAogICAgICAgIExpc3QgbHMgPSBlbS5jcmVhdGVRdWVyeShmYWlsdXJl\nKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RmFsc2UobHMuaXNF\nbXB0eSgpKTsKICAgICAgICBlbmRFbShlbSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdENsYXVzZVBhdGhFeHByMigpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBT\ndHJpbmcgc3VjY2VzcyA9CiAgICAgICAgICAgICJTRUxFQ1QgRElTVElOQ1Qg\nZC5uYW1lIEZST00gU3R1ZGVudCBBUyBzLCBJTihzLmRlcGFydG1lbnQpIGQg\nIjsKCiAgICAgICAgTGlzdCBsczIgPSBlbS5jcmVhdGVRdWVyeShzdWNjZXNz\nKS5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAgIGFzc2VydE5vdE51bGwobHMy\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNSwgbHMyLnNpemUoKSk7CgogICAg\nICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29s\nbE1lbWJlckRlY2woKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIFN0cmluZyBjb2xsZGVj\nID0gIlNFTEVDVCBESVNUSU5DVCBzLm5hbWUgIiArCiAgICAgICAgICAgICJG\nUk9NIFN0dWRlbnQgcywiICsKICAgICAgICAgICAgIiBJTihzLmRlcGFydG1l\nbnQpIGQiICsKICAgICAgICAgICAgIiBXSEVSRSBkLm5hbWUgPSAnQ29tcFNj\naTInIjsKCiAgICAgICAgTGlzdCBscyA9IGVtLmNyZWF0ZVF1ZXJ5KGNvbGxk\nZWMpLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChs\ncyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIGxzLnNpemUoKSk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZShscy5jb250YWlucygiSm9uYXRoYW4iKSk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZShscy5jb250YWlucygiU3RhbSIpKTsKCiAgICAgICAg\nZW5kRW0oZW0pOwogICAgfQoKICAgIC8qKgogICAgICogR3JvdXBCeSAsIE9y\nZGVyQnkgY2xhdXNlIGlzIHRlc3RlZCBieSB0ZXN0ZWpicWxmdW5jdGlvbiB1\nbmRlcgogICAgICogZnVuY3Rpb25hbCBkaXJlY3RvcnkuCiAgICAgKi8KfQo=\n","encoding":"base64"}

