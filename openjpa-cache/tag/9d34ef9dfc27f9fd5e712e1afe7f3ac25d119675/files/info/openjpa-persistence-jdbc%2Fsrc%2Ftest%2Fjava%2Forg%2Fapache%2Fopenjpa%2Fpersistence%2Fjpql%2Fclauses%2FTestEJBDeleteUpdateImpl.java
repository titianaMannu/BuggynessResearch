{"sha":"87096d5db2e8cb0c459d52984cf3a4810a4a5e8e","node_id":"MDQ6QmxvYjIwNjM2NDo4NzA5NmQ1ZGIyZThjYjBjNDU5ZDUyOTg0Y2YzYTQ4MTBhNGE1ZThl","size":4901,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/87096d5db2e8cb0c459d52984cf3a4810a4a5e8e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5j\nbGF1c2VzOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFwcHMuUnVu\ndGltZVRlc3QxOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmNvbW1vbi5hcHBzLlJ1bnRpbWVUZXN0MjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJhY3RU\nZXN0Q2FzZTsKCnB1YmxpYyBjbGFzcyBUZXN0RUpCRGVsZXRlVXBkYXRlSW1w\nbCBleHRlbmRzIEFic3RyYWN0VGVzdENhc2UgewoKICAgIHB1YmxpYyBUZXN0\nRUpCRGVsZXRlVXBkYXRlSW1wbCgpIHsKICAgIH0KCiAgICBwdWJsaWMgVGVz\ndEVKQkRlbGV0ZVVwZGF0ZUltcGwoU3RyaW5nIG5hbWUpIHsKICAgICAgICBz\ndXBlcihuYW1lLCAianBxbGNsYXVzZXNjYWN0dXNhcHAiKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBkZWxldGVBbGwoUnVu\ndGltZVRlc3QxLmNsYXNzKTsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7\nCgogICAgICAgIFJ1bnRpbWVUZXN0MSBydW50MSA9IG5ldyBSdW50aW1lVGVz\ndDEoMSk7CiAgICAgICAgcnVudDEuc2V0U3RyaW5nRmllbGQoInJ1bnQxIik7\nCiAgICAgICAgcnVudDEuc2V0U2VsZk9uZU9uZShuZXcgUnVudGltZVRlc3Qx\nKDIpKTsKICAgICAgICBSdW50aW1lVGVzdDIgcnVudDIgPSBuZXcgUnVudGlt\nZVRlc3QyKDMpOwogICAgICAgIHJ1bnQyLnNldFN0cmluZ0ZpZWxkKCJydW50\nMiIpOwoKICAgICAgICBlbS5wZXJzaXN0KHJ1bnQxKTsKICAgICAgICBlbS5w\nZXJzaXN0KHJ1bnQyKTsKCiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVu\nZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VXBkYXRlMSgp\nIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAgUnVudGlt\nZVRlc3QxIHJldCA9IGVtLmZpbmQoUnVudGltZVRlc3QxLmNsYXNzLCAxKTsK\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXQpOwogICAgICAgIGFzc2VydEVx\ndWFscygicnVudDEiLCByZXQuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChyZXQuZ2V0U2VsZk9uZU9uZSgpKTsKCiAgICAgICAg\nU3RyaW5nIGVqYnFsVXBkYXRlID0KICAgICAgICAgICAgIlVQREFURSBSdW50\naW1lVGVzdDEgeCBTRVQgeC5zdHJpbmdGaWVsZCA9IDpzdHJuZ2ZsZCBXSEVS\nRSB4LnN0cmluZ0ZpZWxkID0gOnN0ZGZpZWxkIjsKICAgICAgICBpbnQgdXBk\nYXRlZEVudGl0aWVzID0gZW0uY3JlYXRlUXVlcnkoZWpicWxVcGRhdGUpCiAg\nICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoInN0cm5nZmxkIiwgInJ1bm5lcjEz\nIikKICAgICAgICAgICAgLnNldFBhcmFtZXRlcigic3RkZmllbGQiLCAicnVu\ndDEiKQogICAgICAgICAgICAuZXhlY3V0ZVVwZGF0ZSgpOwoKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgdXBkYXRlZEVudGl0aWVzKTsKCiAgICAgICAgZW5k\nVHgoZW0pOwoKICAgICAgICBSdW50aW1lVGVzdDEgcmV0MiA9IGVtLmZpbmQo\nUnVudGltZVRlc3QxLmNsYXNzLCAxKTsKICAgICAgICBlbS5yZWZyZXNoKHJl\ndDIpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKHJldDIpOwogICAgICAgIGFz\nc2VydEVxdWFscygicnVubmVyMTMiLCByZXQyLmdldFN0cmluZ0ZpZWxkKCkp\nOwoKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RVcGRhdGUyKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBj\ndXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgoZW0pOwoK\nICAgICAgICBSdW50aW1lVGVzdDEgcnVuID0gZW0uZmluZChSdW50aW1lVGVz\ndDEuY2xhc3MsIDEpOwogICAgICAgIGFzc2VydE5vdE51bGwocnVuKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoInJ1bnQxIiwgcnVuLmdldFN0cmluZ0ZpZWxk\nKCkpOwogICAgICAgIGFzc2VydE5vdE51bGwocnVuLmdldFNlbGZPbmVPbmUo\nKSk7CgogICAgICAgIFN0cmluZyBlamJxbFVwZGF0ZSA9ICJVUERBVEUgUnVu\ndGltZVRlc3QxIHggIiArCiAgICAgICAgICAgICJTRVQgeC5zdHJpbmdGaWVs\nZCA9IDpzdHJuZ2ZsZCAiICsKICAgICAgICAgICAgIldIRVJFIHguc3RyaW5n\nRmllbGQgPSA6ZmllbGQgIiArCiAgICAgICAgICAgICJBTkQgeC5zZWxmT25l\nT25lICIgKwogICAgICAgICAgICAiSVMgTk9UIE5VTEwiOwoKICAgICAgICBp\nbnQgdXBFbnRpdGllcyA9IGVtLmNyZWF0ZVF1ZXJ5KGVqYnFsVXBkYXRlKQog\nICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJzdHJuZ2ZsZCIsICJ1cGQiKQog\nICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJmaWVsZCIsICJydW50MSIpCiAg\nICAgICAgICAgIC5leGVjdXRlVXBkYXRlKCk7CgogICAgICAgIGFzc2VydEVx\ndWFscygxLCB1cEVudGl0aWVzKTsKCiAgICAgICAgUnVudGltZVRlc3QxIGlu\nc3QgPSBlbS5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcywgMSk7CiAgICAgICAg\nZW0ucmVmcmVzaChpbnN0KTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChpbnN0\nKTsKLy8JCWFzc2VydEVxdWFscygidXBkIiwgaW5zdC5nZXRTdHJpbmdGaWVs\nZCgpKTsKCiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlMSgpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAgUnVudGltZVRlc3QxIHJ1\nbiA9IGVtLmZpbmQoUnVudGltZVRlc3QxLmNsYXNzLCAxKTsKICAgICAgICBh\nc3NlcnROb3ROdWxsKHJ1bik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJydW50\nMSIsIHJ1bi5nZXRTdHJpbmdGaWVsZCgpKTsKICAgICAgICBhc3NlcnROb3RO\ndWxsKHJ1bi5nZXRTZWxmT25lT25lKCkpOwoKICAgICAgICBTdHJpbmcgZWpi\nZGVsVXBkYXRlID0gIkRFTEVURSBGUk9NIFJ1bnRpbWVUZXN0MSBzICIgKwog\nICAgICAgICAgICAiV0hFUkUgcy5zdHJpbmdGaWVsZCA9IDpzdHJuZ2ZsZCI7\nCiAgICAgICAgaW50IGRlbEVudGl0eSA9IGVtLmNyZWF0ZVF1ZXJ5KGVqYmRl\nbFVwZGF0ZSkKICAgICAgICAgICAgLnNldFBhcmFtZXRlcigic3RybmdmbGQi\nLCAicnVudDEiKQogICAgICAgICAgICAuZXhlY3V0ZVVwZGF0ZSgpOwoKICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgZGVsRW50aXR5KTsKCiAgICAgICAgUnVu\ndGltZVRlc3QxIGRlbCA9IGVtLmZpbmQoUnVudGltZVRlc3QxLmNsYXNzLCAx\nKTsKICAgICAgICBhc3NlcnROdWxsKGRlbCk7CgogICAgICAgIGVuZFR4KGVt\nKTsKICAgICAgICBlbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdERlbGV0ZTIoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7Cgog\nICAgICAgIFJ1bnRpbWVUZXN0MSBydW4gPSBlbS5maW5kKFJ1bnRpbWVUZXN0\nMS5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChydW4pOwogICAg\nICAgIGFzc2VydEVxdWFscygicnVudDEiLCBydW4uZ2V0U3RyaW5nRmllbGQo\nKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChydW4uZ2V0U2VsZk9uZU9uZSgp\nKTsKCiAgICAgICAgU3RyaW5nIGVqYmRlbFVwZGF0ZSA9CiAgICAgICAgICAg\nICJERUxFVEUgRlJPTSBSdW50aW1lVGVzdDEgciBXSEVSRSByLnN0cmluZ0Zp\nZWxkID0gPzEiOwogICAgICAgIFF1ZXJ5IHF1ZXJ5ID0gZW0uY3JlYXRlUXVl\ncnkoZWpiZGVsVXBkYXRlKTsKCiAgICAgICAgcXVlcnkuc2V0UGFyYW1ldGVy\nKDEsICJydW50MSIpOwogICAgICAgIGludCBvayA9IHF1ZXJ5LmV4ZWN1dGVV\ncGRhdGUoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIG9rKTsKCiAgICAg\nICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KfQo=\n","encoding":"base64"}

