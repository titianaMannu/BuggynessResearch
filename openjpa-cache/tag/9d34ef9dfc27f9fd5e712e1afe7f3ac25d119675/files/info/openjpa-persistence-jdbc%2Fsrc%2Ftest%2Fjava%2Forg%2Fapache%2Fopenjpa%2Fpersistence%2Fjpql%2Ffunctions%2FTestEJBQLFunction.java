{"sha":"13eb2b1d510622c91fb4f1e4fed5d0ac9c60b4de","node_id":"MDQ6QmxvYjIwNjM2NDoxM2ViMmIxZDUxMDYyMmM5MWZiNGYxZTRmZWQ1ZDBhYzljNjBiNGRl","size":14054,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/13eb2b1d510622c91fb4f1e4fed5d0ac9c60b4de","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5m\ndW5jdGlvbnM7CgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyU1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmNvbW1vbi5hcHBzLkFkZHJlc3M7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLmFwcHMuQ29tcFVzZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9u\nLmFwcHMuRmVtYWxlVXNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5jb21tb24uYXBwcy5NYWxlVXNlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJh\nY3RUZXN0Q2FzZTsKCnB1YmxpYyBjbGFzcyBUZXN0RUpCUUxGdW5jdGlvbiBl\neHRlbmRzIEFic3RyYWN0VGVzdENhc2UgewoKICAgIHByaXZhdGUgaW50IHVz\nZXJpZDEsIHVzZXJpZDIsIHVzZXJpZDMsIHVzZXJpZDQsIHVzZXJpZDUsIHVz\nZXJpZDY7CgogICAgcHVibGljIFRlc3RFSkJRTEZ1bmN0aW9uKFN0cmluZyBu\nYW1lKSB7CiAgICAgICAgc3VwZXIobmFtZSwgImpwcWxjbGF1c2VzY2FjdHVz\nYXBwIik7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAg\nICAgZGVsZXRlQWxsKENvbXBVc2VyLmNsYXNzKTsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBz\ndGFydFR4KGVtKTsKCiAgICAgICAgQWRkcmVzc1tdIGFkZCA9IG5ldyBBZGRy\nZXNzW117CiAgICAgICAgICAgIG5ldyBBZGRyZXNzKCI0MyBTYW5zb21lIiwg\nIlNGIiwgIlVuaXRlZC1LaW5nZG9tIiwgIjk0MTA0IiksCiAgICAgICAgICAg\nIG5ldyBBZGRyZXNzKCIyNCBNaW5rIiwgIkFOVElPQ0giLCAiVVNBIiwgIjk0\nNTEzIiksCiAgICAgICAgICAgIG5ldyBBZGRyZXNzKCIyMyBPZ2JldGUiLCAi\nQ29hbENhbXAiLCAiTklHRVJJQSIsICIwMDAwMCIpLAogICAgICAgICAgICBu\nZXcgQWRkcmVzcygiMTAgV2lsc2hpcmUiLCAiV29yY2VzdGVyIiwgIkNBTkFE\nQSIsICI4MDA4MCIpLAogICAgICAgICAgICBuZXcgQWRkcmVzcygiMjMgQmVs\nbGZsb3dlciIsICJPZ3VpIiwgbnVsbCwgIjAyMDAwIiksCiAgICAgICAgICAg\nIG5ldyBBZGRyZXNzKCIyMiBNb250Z29tZXJ5IiwgIlNGIiwgbnVsbCwgIjUw\nMDU0IikgfTsKCiAgICAgICAgQ29tcFVzZXIgdXNlcjEgPSBjcmVhdGVVc2Vy\nKCJTZWV0aGEiLCAiTUFDIiwgYWRkWzBdLCAzNiwgdHJ1ZSk7CiAgICAgICAg\nQ29tcFVzZXIgdXNlcjIgPSBjcmVhdGVVc2VyKCJTaGFubm9uICIsICJQQyIs\nIGFkZFsxXSwgMzYsIGZhbHNlKTsKICAgICAgICBDb21wVXNlciB1c2VyMyA9\nIGNyZWF0ZVVzZXIoIlVnbyIsICJQQyIsIGFkZFsyXSwgMTksIHRydWUpOwog\nICAgICAgIENvbXBVc2VyIHVzZXI0ID0gY3JlYXRlVXNlcigiX0phY29iIiwg\nIkxJTlVYIiwgYWRkWzNdLCAxMCwgdHJ1ZSk7CiAgICAgICAgQ29tcFVzZXIg\ndXNlcjUgPSBjcmVhdGVVc2VyKCJGYW16eSIsICJVTklYIiwgYWRkWzRdLCAy\nOSwgZmFsc2UpOwogICAgICAgIENvbXBVc2VyIHVzZXI2ID0gY3JlYXRlVXNl\ncigiU2hhZGUiLCAiVU5JWCIsIGFkZFs1XSwgMjMsIGZhbHNlKTsKCiAgICAg\nICAgZW0ucGVyc2lzdCh1c2VyMSk7CiAgICAgICAgdXNlcmlkMSA9IHVzZXIx\nLmdldFVzZXJpZCgpOwogICAgICAgIGVtLnBlcnNpc3QodXNlcjIpOwogICAg\nICAgIHVzZXJpZDIgPSB1c2VyMi5nZXRVc2VyaWQoKTsKICAgICAgICBlbS5w\nZXJzaXN0KHVzZXIzKTsKICAgICAgICB1c2VyaWQzID0gdXNlcjMuZ2V0VXNl\ncmlkKCk7CiAgICAgICAgZW0ucGVyc2lzdCh1c2VyNCk7CiAgICAgICAgdXNl\ncmlkNCA9IHVzZXI0LmdldFVzZXJpZCgpOwogICAgICAgIGVtLnBlcnNpc3Qo\ndXNlcjUpOwogICAgICAgIHVzZXJpZDUgPSB1c2VyNS5nZXRVc2VyaWQoKTsK\nICAgICAgICBlbS5wZXJzaXN0KHVzZXI2KTsKICAgICAgICB1c2VyaWQ2ID0g\ndXNlcjYuZ2V0VXNlcmlkKCk7CgogICAgICAgIGVuZFR4KGVtKTsKICAgICAg\nICBlbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdENvbmNh\ndFN1YlN0cmluZ0Z1bmMoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7\nCgogICAgICAgIENvbXBVc2VyIHVzZXIgPSBlbS5maW5kKENvbXBVc2VyLmNs\nYXNzLCB1c2VyaWQxKTsKICAgICAgICBhc3NlcnROb3ROdWxsKCJ1c2VyIGlz\nIG51bGwiLCB1c2VyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInRoZSBuYW1l\nIGlzIG5vdCBzZWV0aGEiLCAiU2VldGhhIiwgdXNlci5nZXROYW1lKCkpOwoK\nICAgICAgICBTdHJpbmcgcXVlcnkgPSAiVVBEQVRFIENvbXBVc2VyIGUgU0VU\nIGUubmFtZSA9ICIgKwogICAgICAgICAgICAiQ09OQ0FUKCdBYmxhaHVtJywg\nU1VCU1RSSU5HKGUubmFtZSwgTE9DQVRFKCdlJywgZS5uYW1lKSwgNCkpICIg\nKwogICAgICAgICAgICAiV0hFUkUgZS5uYW1lPSdTZWV0aGEnIjsKICAgICAg\nICBpbnQgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmV4ZWN1dGVV\ncGRhdGUoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgcmVzdWx0IGlz\nIG5vdCAxIiwgMSwgcmVzdWx0KTsKCiAgICAgICAgdXNlciA9IGVtLmZpbmQo\nQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDEpOwogICAgICAgIGVtLnJlZnJlc2go\ndXNlcik7CgogICAgICAgIGFzc2VydE5vdE51bGwoInRoZSB1c2VyIGlzIG51\nbGwiLCB1c2VyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInRoZSB1c2VycyBu\nYW1lIGlzIG5vdCBBYmxhaHVtU2VldCIsICJBYmxhaHVtZWV0aCIsCiAgICAg\nICAgICAgIHVzZXIuZ2V0TmFtZSgpKTsKCiAgICAgICAgZW5kVHgoZW0pOwog\nICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nQ29uY2F0RnVuYzIoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChlbSk7Cgog\nICAgICAgIENvbXBVc2VyIHVzZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNz\nLCB1c2VyaWQxKTsKICAgICAgICBhc3NlcnROb3ROdWxsKCJ0aGUgdXNlciBp\ncyBudWxsIiwgdXNlcik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0aGUgdXNl\ncnMgbmFtZSBpcyBub3Qgc2VldGhhIiwgdXNlci5nZXROYW1lKCksICJTZWV0\naGEiKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlVQREFURSBDb21wVXNl\nciBlICIgKwogICAgICAgICAgICAiU0VUIGUubmFtZSA9ICIgKwogICAgICAg\nICAgICAiQ09OQ0FUKCcnLCAnJykgV0hFUkUgZS5uYW1lPSdTZWV0aGEnIjsK\nICAgICAgICBpbnQgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmV4\nZWN1dGVVcGRhdGUoKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3Vs\ndCk7CgogICAgICAgIHVzZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNzLCB1\nc2VyaWQxKTsKICAgICAgICBlbS5yZWZyZXNoKHVzZXIpOwogICAgICAgIGFz\nc2VydE5vdE51bGwodXNlcik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCIiLCB1\nc2VyLmdldE5hbWUoKSk7CgogICAgICAgIGVuZFR4KGVtKTsKICAgICAgICBl\nbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFRyaW1GdW5j\nMygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAgQ29t\ncFVzZXIgdXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDIp\nOwogICAgICAgIGFzc2VydE5vdE51bGwodXNlcik7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJTaGFubm9uICIsIHVzZXIuZ2V0TmFtZSgpKTsKCiAgICAgICAg\nU3RyaW5nIHF1ZXJ5ID0gIlVQREFURSBDb21wVXNlciBlIFNFVCAiICsKICAg\nICAgICAgICAgImUubmFtZSA9IFRyaW0oZS5uYW1lKSBXSEVSRSAiICsKICAg\nICAgICAgICAgImUubmFtZT0nU2hhbm5vbiAnIjsKICAgICAgICBpbnQgcmVz\ndWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmV4ZWN1dGVVcGRhdGUoKTsK\nCiAgICAgICAgdXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJp\nZDIpOwogICAgICAgIGVtLnJlZnJlc2godXNlcik7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbCh1c2VyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlNoYW5ub24i\nLCB1c2VyLmdldE5hbWUoKSk7CgogICAgICAgIGVuZFR4KGVtKTsKICAgICAg\nICBlbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdExvd2Vy\nRnVuYygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAg\nQ29tcFVzZXIgdXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJp\nZDMpOwogICAgICAgIGFzc2VydE5vdE51bGwodXNlcik7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJVZ28iLCB1c2VyLmdldE5hbWUoKSk7CgogICAgICAgIFN0\ncmluZyBxdWVyeSA9ICJVUERBVEUgQ29tcFVzZXIgZSBTRVQgIiArCiAgICAg\nICAgICAgICJlLm5hbWUgPSBMT1dFUihlLm5hbWUpIFdIRVJFIGUubmFtZT0n\nVWdvJyI7CgogICAgICAgIGludCByZXN1bHQgPSBlbS5jcmVhdGVRdWVyeShx\ndWVyeSkuZXhlY3V0ZVVwZGF0ZSgpOwoKICAgICAgICB1c2VyID0gZW0uZmlu\nZChDb21wVXNlci5jbGFzcywgdXNlcmlkMyk7CiAgICAgICAgZW0ucmVmcmVz\naCh1c2VyKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAgICAg\nIGFzc2VydEVxdWFscygidWdvIiwgdXNlci5nZXROYW1lKCkpOwoKICAgICAg\nICBlbmRUeChlbSk7CiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RMb3dlckNsb2JGdW5jKCkgewogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyU1BJIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nU1BJKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIC8vIHNvbWUg\nZGF0YWJhc2VzIGRvIG5vdCBzdXBwb3J0IGNhc2UgY29udmVyc2lvbiBvbiBM\nT0JzLAogICAgICAgIC8vIGp1c3Qgc2tpcCB0aGlzIHRlc3QgY2FzZQogICAg\nICAgIERCRGljdGlvbmFyeSBkaWN0ID0gKChKREJDQ29uZmlndXJhdGlvbikg\nZW0uZ2V0Q29uZmlndXJhdGlvbigpKQogICAgICAgICAgICAuZ2V0REJEaWN0\naW9uYXJ5SW5zdGFuY2UoKTsKICAgICAgICBpZiAoIWRpY3Quc3VwcG9ydHND\nYXNlQ29udmVyc2lvbkZvckxvYikgewogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgfQogICAgICAgIHN0YXJ0VHgoZW0pOwoKICAgICAgICBDb21wVXNl\nciB1c2VyID0gZW0uZmluZChDb21wVXNlci5jbGFzcywgdXNlcmlkNSk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbCh1c2VyKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoIkZhbXp5IiwgdXNlci5nZXROYW1lKCkpOwoKICAgICAgICBTdHJpbmcg\ncXVlcnkgPSAiVVBEQVRFIENvbXBVc2VyIGUgU0VUICIgKwogICAgICAgICAg\nICAgICAgImUubmFtZSA9IExPV0VSKGUubmFtZSkgV0hFUkUgTE9XRVIoZS5u\nYW1lQXNMb2IpPSdmYW16eSciOwoKICAgICAgICBpbnQgcmVzdWx0ID0gZW0u\nY3JlYXRlUXVlcnkocXVlcnkpLmV4ZWN1dGVVcGRhdGUoKTsKCiAgICAgICAg\ndXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDUpOwogICAg\nICAgIGVtLnJlZnJlc2godXNlcik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbCh1\nc2VyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImZhbXp5IiwgdXNlci5nZXRO\nYW1lKCkpOwoKICAgICAgICBlbmRUeChlbSk7CiAgICAgICAgZW5kRW0oZW0p\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RVcHBlckZ1bmMoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgc3RhcnRUeChlbSk7CgogICAgICAgIENvbXBVc2VyIHVz\nZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNzLCB1c2VyaWQzKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAgICAgIGFzc2VydEVxdWFscygi\nVWdvIiwgdXNlci5nZXROYW1lKCkpOwoKICAgICAgICBTdHJpbmcgcXVlcnkg\nPSAiVVBEQVRFIENvbXBVc2VyIGUgU0VUICIgKwogICAgICAgICAgICAiZS5u\nYW1lID0gVVBQRVIoZS5uYW1lKSBXSEVSRSBlLm5hbWU9J1VnbyciOwoKICAg\nICAgICBpbnQgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmV4ZWN1\ndGVVcGRhdGUoKTsKCiAgICAgICAgdXNlciA9IGVtLmZpbmQoQ29tcFVzZXIu\nY2xhc3MsIHVzZXJpZDMpOwogICAgICAgIGVtLnJlZnJlc2godXNlcik7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbCh1c2VyKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoIlVHTyIsIHVzZXIuZ2V0TmFtZSgpKTsKCiAgICAgICAgZW5kVHgoZW0p\nOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0VXBwZXJDbG9iRnVuYygpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFu\nYWdlclNQSSBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlclNQSSkgY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsKICAgICAgICAvLyBzb21lIGRhdGFiYXNlcyBk\nbyBub3Qgc3VwcG9ydCBjYXNlIGNvbnZlcnNpb24gb24gTE9CcywKICAgICAg\nICAvLyBqdXN0IHNraXAgdGhpcyB0ZXN0IGNhc2UKICAgICAgICBEQkRpY3Rp\nb25hcnkgZGljdCA9ICgoSkRCQ0NvbmZpZ3VyYXRpb24pIGVtLmdldENvbmZp\nZ3VyYXRpb24oKSkKICAgICAgICAgICAgLmdldERCRGljdGlvbmFyeUluc3Rh\nbmNlKCk7CiAgICAgICAgaWYgKCFkaWN0LnN1cHBvcnRzQ2FzZUNvbnZlcnNp\nb25Gb3JMb2IpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAg\nICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAgQ29tcFVzZXIgdXNlciA9IGVt\nLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDUpOwogICAgICAgIGFzc2Vy\ndE5vdE51bGwodXNlcik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJGYW16eSIs\nIHVzZXIuZ2V0TmFtZSgpKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlVQ\nREFURSBDb21wVXNlciBlIFNFVCAiICsKICAgICAgICAgICAgICAgICJlLm5h\nbWUgPSBVUFBFUihlLm5hbWUpIFdIRVJFIFVQUEVSKGUubmFtZUFzTG9iKT0n\nRkFNWlknIjsKCiAgICAgICAgaW50IHJlc3VsdCA9IGVtLmNyZWF0ZVF1ZXJ5\nKHF1ZXJ5KS5leGVjdXRlVXBkYXRlKCk7CgogICAgICAgIHVzZXIgPSBlbS5m\naW5kKENvbXBVc2VyLmNsYXNzLCB1c2VyaWQ1KTsKICAgICAgICBlbS5yZWZy\nZXNoKHVzZXIpOwogICAgICAgIGFzc2VydE5vdE51bGwodXNlcik7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJGQU1aWSIsIHVzZXIuZ2V0TmFtZSgpKTsKCiAg\nICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0TGVuZ3RoRnVuYygpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCiAgICAg\nICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVDVCBvLm5hbWUgIiArCiAgICAgICAg\nICAgICJGUk9NIENvbXBVc2VyIG8gIiArCiAgICAgICAgICAgICJXSEVSRSBM\nRU5HVEgoby5hZGRyZXNzLmNvdW50cnkpID0gMyI7CgogICAgICAgIExpc3Qg\ncmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3VsdExpc3Qo\nKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwogICAgICAgIGFz\nc2VydEVxdWFscygxLCByZXN1bHQuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRU\ncnVlKHJlc3VsdC5jb250YWlucygiU2hhbm5vbiAiKSk7CgogICAgICAgIGVu\nZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0QXJpdGhtRnVu\nYygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KGVtKTsKCiAgICAgICAgQ29t\ncFVzZXIgdXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDEp\nOwoKICAgICAgICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiU2VldGhhIiwgdXNlci5nZXROYW1lKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygzNiwgdXNlci5nZXRBZ2UoKSk7CgogICAgICAgIFN0cmlu\nZyBxdWVyeSA9CiAgICAgICAgICAgICJVUERBVEUgQ29tcFVzZXIgZSBTRVQg\nZS5hZ2UgPSBBQlMoZS5hZ2UpIFdIRVJFIGUubmFtZT0nU2VldGhhJyI7CiAg\nICAgICAgaW50IG51bSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5leGVjdXRl\nVXBkYXRlKCk7CgogICAgICAgIGFzc2VydE5vdE51bGwobnVtKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgbnVtKTsKCiAgICAgICAgdXNlciA9IGVtLmZp\nbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDEpOwogICAgICAgIGVtLnJlZnJl\nc2godXNlcik7CgogICAgICAgIGFzc2VydEVxdWFscygzNiwgdXNlci5nZXRB\nZ2UoKSk7CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUFCUyBU\nZXN0ZWQKCiAgICAgICAgcXVlcnkgPQogICAgICAgICAgICAiVVBEQVRFIENv\nbXBVc2VyIGUgU0VUIGUuYWdlID0gU1FSVChlLmFnZSkgV0hFUkUgZS5uYW1l\nPSdTZWV0aGEnIjsKICAgICAgICBudW0gPSBlbS5jcmVhdGVRdWVyeShxdWVy\neSkuZXhlY3V0ZVVwZGF0ZSgpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKG51\nbSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIG51bSk7CgogICAgICAgIHVz\nZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNzLCB1c2VyaWQxKTsKICAgICAg\nICBlbS5yZWZyZXNoKHVzZXIpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoNiwg\ndXNlci5nZXRBZ2UoKSk7CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLVNRUlQgVGVzdGVkCgogICAgICAgIHF1ZXJ5ID0KICAgICAgICAg\nICAgIlVQREFURSBDb21wVXNlciBlIFNFVCBlLmFnZSA9IE1PRChlLmFnZSwg\nNCkgV0hFUkUgZS5uYW1lPSdTZWV0aGEnIjsKICAgICAgICBudW0gPSBlbS5j\ncmVhdGVRdWVyeShxdWVyeSkuZXhlY3V0ZVVwZGF0ZSgpOwoKICAgICAgICBh\nc3NlcnROb3ROdWxsKG51bSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIG51\nbSk7CgogICAgICAgIHVzZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNzLCB1\nc2VyaWQxKTsKICAgICAgICBlbS5yZWZyZXNoKHVzZXIpOwoKICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgdXNlci5nZXRBZ2UoKSk7CgogICAgICAgIC8vLS0t\nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLU1PRCBUZXN0ZWQKCiAgICAgICAgcXVl\ncnkgPSAiU0VMRUNUIGUubmFtZSBGUk9NIENvbXBVc2VyIGUgV0hFUkUgU0la\nRShlLm5pY2tuYW1lcykgPSA2IjsKICAgICAgICBMaXN0IHJlc3VsdCA9IGVt\nLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAg\nIGFzc2VydE5vdE51bGwocmVzdWx0KTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMCwgcmVzdWx0LnNpemUoKSk7CgogICAgICAgIC8vLS0tLS0tLS0tLS0tLS0t\nLS0tLS0tLS0tU0laRSBUZXN0ZWQKCiAgICAgICAgZW5kVHgoZW0pOwogICAg\nICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0R3Jv\ndXBCeUhhdmluZ0NsYXVzZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgU3RyaW5nIHF1\nZXJ5ID0KICAgICAgICAgICAgIlNFTEVDVCBjLm5hbWUgRlJPTSBDb21wVXNl\nciBjIEdST1VQIEJZIGMubmFtZSBIQVZJTkcgYy5uYW1lIExJS0UgJ1MlJyI7\nCgogICAgICAgIExpc3QgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkp\nLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXN1\nbHQpOwogICAgICAgIGFzc2VydEVxdWFscygzLCByZXN1bHQuc2l6ZSgpKTsK\nICAgICAgICBhc3NlcnRUcnVlKHJlc3VsdC5jb250YWlucygiU2hhbm5vbiAi\nKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShyZXN1bHQuY29udGFpbnMoIlNoYWRl\nIikpOwogICAgICAgIGFzc2VydFRydWUocmVzdWx0LmNvbnRhaW5zKCJTZWV0\naGEiKSk7CgogICAgICAgIGVuZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0T3JkZXJCeUNsYXVzZSgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgU3Ry\naW5nIHF1ZXJ5ID0KICAgICAgICAgICAgIlNFTEVDVCBjLm5hbWUgRlJPTSBD\nb21wVXNlciBjIFdIRVJFIGMubmFtZSBMSUtFICdTJScgT1JERVIgQlkgYy5u\nYW1lIjsKCiAgICAgICAgTGlzdCByZXN1bHQgPSBlbS5jcmVhdGVRdWVyeShx\ndWVyeSkuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnROb3ROdWxs\nKHJlc3VsdCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIHJlc3VsdC5zaXpl\nKCkpOwogICAgICAgIGFzc2VydFRydWUocmVzdWx0LmNvbnRhaW5zKCJTaGFu\nbm9uICIpKTsKICAgICAgICBhc3NlcnRUcnVlKHJlc3VsdC5jb250YWlucygi\nU2VldGhhIikpOwogICAgICAgIGFzc2VydFRydWUocmVzdWx0LmNvbnRhaW5z\nKCJTaGFkZSIpKTsKCiAgICAgICAgZW5kRW0oZW0pOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RBVkdBZ2dyZWdGdW5jKCkgewogICAgICAgIC8qKgog\nICAgICAgICAqIFRvIGJlIFRlc3RlZDogQVZHLCBDT1VOVCwgTUFYLCBNSU4s\nIFNVTQogICAgICAgICAqLwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5\nID0gIlNFTEVDVCBBVkcoZS5hZ2UpIEZST00gQ29tcFVzZXIgZSI7CgogICAg\nICAgIExpc3QgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmdldFJl\nc3VsdExpc3QoKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwog\nICAgICAgIGFzc2VydEVxdWFscygxLCByZXN1bHQuc2l6ZSgpKTsKICAgICAg\nICBhc3NlcnRUcnVlKHJlc3VsdC5jb250YWlucygyNSkpOwoKICAgICAgICBl\nbmRFbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdENPVU5UQWdn\ncmVnRnVuYygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNF\nTEVDVCBDT1VOVChjLm5hbWUpIEZST00gQ29tcFVzZXIgYyI7CgogICAgICAg\nIExpc3QgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3Vs\ndExpc3QoKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwogICAg\nICAgIGFzc2VydEVxdWFscygxLCByZXN1bHQuc2l6ZSgpKTsKICAgICAgICBh\nc3NlcnRUcnVlKHJlc3VsdC5jb250YWlucyg2bCkpOwoKICAgICAgICBlbmRF\nbShlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE1BWEFnZ3JlZ0Z1\nbmMoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CgogICAgICAgIFN0cmluZyBxdWVyeSA9ICJTRUxFQ1Qg\nRElTVElOQ1QgTUFYKGMuYWdlKSBGUk9NIENvbXBVc2VyIGMiOwoKICAgICAg\nICBMaXN0IHJlc3VsdCA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5nZXRSZXN1\nbHRMaXN0KCk7CgogICAgICAgIGFzc2VydE5vdE51bGwocmVzdWx0KTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgcmVzdWx0LnNpemUoKSk7CiAgICAgICAg\nYXNzZXJ0VHJ1ZShyZXN1bHQuY29udGFpbnMoMzYpKTsKCiAgICAgICAgZW5k\nRW0oZW0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNSU5BZ2dyZWdG\ndW5jKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50\naXR5TWFuYWdlcigpOwoKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNU\nIERJU1RJTkNUIE1JTihjLmFnZSkgRlJPTSBDb21wVXNlciBjIjsKCiAgICAg\nICAgTGlzdCByZXN1bHQgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSkuZ2V0UmVz\ndWx0TGlzdCgpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKHJlc3VsdCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3VsdC5zaXplKCkpOwogICAgICAg\nIGFzc2VydFRydWUocmVzdWx0LmNvbnRhaW5zKDEwKSk7CgogICAgICAgIGVu\nZEVtKGVtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U1VNQWdncmVn\nRnVuYygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlNFTEVD\nVCBTVU0oYy5hZ2UpIEZST00gQ29tcFVzZXIgYyI7CgogICAgICAgIExpc3Qg\ncmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3VsdExpc3Qo\nKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChyZXN1bHQpOwogICAgICAgIGFz\nc2VydEVxdWFscygxLCByZXN1bHQuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRU\ncnVlKHJlc3VsdC5jb250YWlucygxNTNsKSk7CgogICAgICAgIGVuZEVtKGVt\nKTsKICAgIH0KCiAgICBwdWJsaWMgQ29tcFVzZXIgY3JlYXRlVXNlcihTdHJp\nbmcgbmFtZSwgU3RyaW5nIGNOYW1lLCBBZGRyZXNzIGFkZCwgaW50IGFnZSwK\nICAgICAgICBib29sZWFuIGlzTWFsZSkgewogICAgICAgIENvbXBVc2VyIHVz\nZXIgPSBudWxsOwogICAgICAgIGlmIChpc01hbGUpIHsKICAgICAgICAgICAg\ndXNlciA9IG5ldyBNYWxlVXNlcigpOwogICAgICAgICAgICB1c2VyLnNldE5h\nbWUobmFtZSk7CiAgICAgICAgICAgIHVzZXIuc2V0Q29tcHV0ZXJOYW1lKGNO\nYW1lKTsKICAgICAgICAgICAgdXNlci5zZXRBZGRyZXNzKGFkZCk7CiAgICAg\nICAgICAgIHVzZXIuc2V0QWdlKGFnZSk7CiAgICAgICAgICAgIHVzZXIuc2V0\nTmFtZUFzTG9iKG5hbWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg\nIHVzZXIgPSBuZXcgRmVtYWxlVXNlcigpOwogICAgICAgICAgICB1c2VyLnNl\ndE5hbWUobmFtZSk7CiAgICAgICAgICAgIHVzZXIuc2V0Q29tcHV0ZXJOYW1l\nKGNOYW1lKTsKICAgICAgICAgICAgdXNlci5zZXRBZGRyZXNzKGFkZCk7CiAg\nICAgICAgICAgIHVzZXIuc2V0QWdlKGFnZSk7CiAgICAgICAgICAgIHVzZXIu\nc2V0TmFtZUFzTG9iKG5hbWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\ndXNlcjsKICAgIH0KfQo=\n","encoding":"base64"}

