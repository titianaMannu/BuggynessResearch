{"sha":"c3817cf30314537f5bb3c107356cbc9e37b4682f","node_id":"MDQ6QmxvYjIwNjM2NDpjMzgxN2NmMzAzMTQ1MzdmNWJiM2MxMDczNTZjYmM5ZTM3YjQ2ODJm","size":7038,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c3817cf30314537f5bb3c107356cbc9e37b4682f","content":"LyoKICogQmFzZUtlcm5lbFRlc3QuamF2YQogKgogKiBDcmVhdGVkIG9uIE9j\ndG9iZXIgOSwgMjAwNiwgMTI6NTYgUE0KICoKICogVG8gY2hhbmdlIHRoaXMg\ndGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFnZXIKICog\nYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuCiAqLwoKLyoK\nICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9u\nIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vu\nc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRp\nb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNG\nIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UK\nICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsOwoK\naW1wb3J0IGphdmEuYmVhbnMuQmVhbkluZm87CmltcG9ydCBqYXZhLmJlYW5z\nLkludHJvc3BlY3RvcjsKaW1wb3J0IGphdmEuYmVhbnMuUHJvcGVydHlEZXNj\ncmlwdG9yOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuSW52b2NhdGlvblRh\ncmdldEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0Lk1ldGhv\nZDsKaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsOwppbXBvcnQgamF2YS5t\nYXRoLkJpZ0ludGVnZXI7CmltcG9ydCBqYXZhLnV0aWwuKjsKaW1wb3J0IGph\ndmF4Lm1hbmFnZW1lbnQuSW50cm9zcGVjdGlvbkV4Y2VwdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQnJva2VyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRp\nb25Qcm92aWRlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29u\nZi5Db25maWd1cmF0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuSlBBRmFjYWRlSGVscGVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21t\nb24uYXBwcy4qOwppbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uQW5ub3Rh\ndGlvbjsKaW1wb3J0IGp1bml0LmZyYW1ld29yay4qOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFj\ndG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5P\ncGVuSlBBRW50aXR5TWFuYWdlcjsKCgpwdWJsaWMgYWJzdHJhY3QgY2xhc3Mg\nQmFzZUtlcm5lbFRlc3QgZXh0ZW5kcyBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2UKeyAgICAK\nICAgIHByaXZhdGUgc3RhdGljIE1hcCBfc3lzcHJvcHMgPSBuZXcgSGFzaE1h\ncCgpOyAgICAKICAgIAogICAgLyoqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ug\nb2YgQmFzZUtlcm5lbFRlc3QgKi8KICAgIHB1YmxpYyBCYXNlS2VybmVsVGVz\ndCgpIHsKICAgIH0KICAgIAogICAgcHVibGljIEJhc2VLZXJuZWxUZXN0KFN0\ncmluZyBuYW1lKSB7CiAgICAgICAgc3VwZXIobmFtZSwgImtlcm5lbGNhY3R1\nc2FwcCIpOwogICAgfQogICAgCiAgICBwcm90ZWN0ZWQgT3BlbkpQQUVudGl0\neU1hbmFnZXIgZ2V0UE0oKSB7CiAgICAgICAgcmV0dXJuIGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICB9CiAgICAKICAgIHByb3RlY3RlZCBPcGVuSlBB\nRW50aXR5TWFuYWdlciBnZXRQTShib29sZWFuIG9wdGltaXN0aWMsYm9vbGVh\nbiByZXRhaW5WYWx1ZXMpIAogICAgewogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5zZXROb250cmFuc2FjdGlvbmFsUmVhZCh0cnVlKTsKICAgICAgICBlbS5z\nZXRSZXRhaW5TdGF0ZShyZXRhaW5WYWx1ZXMpOwogICAgICAgIGlmKGVtLmdl\ndFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICB7CiAgICAgICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgICAg\nIGVtLnNldE9wdGltaXN0aWMob3B0aW1pc3RpYyk7CiAgICAgICAgfQoKICAg\nICAgICByZXR1cm4gZW07CiAgICB9CiAgICAKICAgIHByb3RlY3RlZCBPYmpl\nY3QgcGVyc2lzdChPYmplY3Qgb2IpIHsKICAgICAgICAvL0ZJWE1FICAtIHRo\naXMgaXMganVzdCBhIHdvcmthcm91bmQgCiAgICAgICAgLy8gIEJyb2tlciBi\ncm9rZXIgPSAuZ2V0QnJva2VyRmFjdG9yeSgpLm5ld0Jyb2tlcigpOwogICAg\nICAgIEJyb2tlciBicm9rZXIgPSBKUEFGYWNhZGVIZWxwZXIudG9Ccm9rZXIo\nY3VycmVudEVudGl0eU1hbmFnZXIoKSk7CiAgICAgICAgYnJva2VyLmJlZ2lu\nKCk7CiAgICAgICAgYnJva2VyLnBlcnNpc3Qob2IsIG51bGwpOwogICAgICAg\nIE9iamVjdCBpZCA9IGJyb2tlci5nZXRPYmplY3RJZChvYik7CiAgICAgICAg\nYnJva2VyLmNvbW1pdCgpOwogICAgICAgIGJyb2tlci5jbG9zZSgpOwogICAg\nICAgIHJldHVybiBpZDsKICAgIH0KICAgIAoKICAgIHByb3RlY3RlZCBQcm9w\nZXJ0aWVzIGdldFByb3BlcnRpZXMoKSB7CiAgICAgICAgcmV0dXJuIGdldFBy\nb3BlcnRpZXMobnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4g\ndGhlIHJ1bnRpbWUgcHJvcGVydGllcywgb3B0aW9uYWxseSBvdmVycmlkaW5n\nIG9yIHNldHRpbmcKICAgICAqIHNvbWUgdmlhIHRoZSBnaXZlbiBhcnJheSwg\nd2hpY2ggc2hvdWxkIGJlIGluIHRoZSBmb3JtCiAgICAgKiB7IGtleSwgdmFs\nLCBrZXksIHZhbCwgLi4uIH0uCiAgICAgKi8KICAgIHByb3RlY3RlZCBzeW5j\naHJvbml6ZWQgUHJvcGVydGllcyBnZXRQcm9wZXJ0aWVzKFN0cmluZ1tdIHBy\nb3BzKSB7CiAgICAgICAgUHJvcGVydGllcyBwID0gbmV3IFByb3BlcnRpZXMo\nU3lzdGVtLmdldFByb3BlcnRpZXMoKSk7CiAgICAgICAgU3RyaW5nIHN0ciA9\nIHAuZ2V0UHJvcGVydHkoIm9wZW5qcGEucHJvcGVydGllcyIsICJrb2RvLnBy\nb3BlcnRpZXMiKTsKICAgICAgICBpZiAoc3RyICE9IG51bGwgJiYgc3RyLmxl\nbmd0aCgpID4gMCkgewogICAgICAgICAgICAvLyBjYWNoZSBzeXN0ZW0gcHJv\ncGVydGllcyB0byByZWR1Y2UgbG9hZCBvbiBmaWxlIHN5c3RlbQogICAgICAg\nICAgICBQcm9wZXJ0aWVzIGxvYWRlZCA9IChQcm9wZXJ0aWVzKSBfc3lzcHJv\ncHMuZ2V0KHN0cik7CiAgICAgICAgICAgIGlmIChsb2FkZWQgPT0gbnVsbCkg\newogICAgICAgICAgICAgICAgbG9hZGVkID0gbmV3IFByb3BlcnRpZXMoKTsK\nICAgICAgICAgICAgICAgIENvbmZpZ3VyYXRpb25Qcm92aWRlciBjcCA9IChD\nb25maWd1cmF0aW9uUHJvdmlkZXIpIENvbmZpZ3VyYXRpb25zLmdldFByb3Bl\ncnR5KHN0ciwgbnVsbCk7CgogICAgICAgICAgICAgICAgaWYgKGNwICE9IG51\nbGwpCiAgICAgICAgICAgICAgICAgICAgbG9hZGVkLnB1dEFsbChjcC5nZXRQ\ncm9wZXJ0aWVzKCkpOwogICAgICAgICAgICAgICAgX3N5c3Byb3BzLnB1dChz\ndHIsIGxvYWRlZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcC5wdXRB\nbGwobG9hZGVkKTsKICAgICAgICB9CgogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBwcm9wcyAhPSBudWxsICYmIGkgPCBwcm9wcy5sZW5ndGg7IGkgKz0gMikg\newogICAgICAgICAgICBpZiAocHJvcHNbaSArIDFdICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgZHVwbGljYXRlIGtvZG8vb3Bl\nbmpwYSBwcm9wZXJ0eSBzbyB3ZSBkb24ndCBjbGFzaAogICAgICAgICAgICAg\nICAgaWYgKHByb3BzW2ldLnN0YXJ0c1dpdGgoIm9wZW5qcGEuIikpCiAgICAg\nICAgICAgICAgICAgICAgcC5yZW1vdmUoIm9wZW5qcGEuIiArIHByb3BzW2ld\nLnN1YnN0cmluZyg1KSk7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9w\nc1tpXS5zdGFydHNXaXRoKCJvcGVuanBhLiIpKQogICAgICAgICAgICAgICAg\nICAgIHAucmVtb3ZlKCJvcGVuanBhLiIgKyBwcm9wc1tpXS5zdWJzdHJpbmco\nOCkpOwoKICAgICAgICAgICAgICAgIHAuc2V0UHJvcGVydHkocHJvcHNbaV0s\nIHByb3BzW2kgKyAxXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg\nICAgICAgICBwLnJlbW92ZShwcm9wc1tpXSk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICAgICAgcmV0dXJuIHA7CiAgICB9Ci8vCi8vCi8vICAgIC8q\nKgovLyAgICAgKiBBc3NlcnQgdGhhdCB0aGUgZ2l2ZW4gTGlzdCBjb250YWlu\nIHRoZSBleGFjdCBzYW1lCi8vICAgICAqIGVsZW1lbnRzLiBUaGlzIGlzIGRp\nZmZlcmVudCB0aGFuIHRoZSBub3JtYWwgTGlzdCBjb250cmFjdCwgd2hpY2gK\nLy8gICAgICogc3RhdGVzIHRoYXQgbGlzdDEuZXF1YWxzKGxpc3QyKSBpZiBl\nYWNoIGVsZW1lbnQgZTEuZXF1YWxzKGUyKS4KLy8gICAgICogVGhpcyBtZXRo\nb2QgYXNzZXJ0cyB0aGF0IGUxID09IG4yLgovLyAgICAgKi8KLy8gICAgcHVi\nbGljIHN0YXRpYyB2b2lkIGFzc2VydElkZW50aWNhbChMaXN0IGMxLCBMaXN0\nIGMyKSB7Ci8vICAgICAgICBhc3NlcnRFcXVhbHMoYzEuc2l6ZSgpLCBjMi5z\naXplKCkpOwovLyAgICAgICAgZm9yIChJdGVyYXRvciBpMSA9IGMxLml0ZXJh\ndG9yKCksIGkyID0gYzIuaXRlcmF0b3IoKTsKLy8gICAgICAgICAgICBpMS5o\nYXNOZXh0KCkgJiYgaTIuaGFzTmV4dCgpOykKLy8gICAgICAgICAgICBhc3Nl\ncnRUcnVlKGkxLm5leHQoKSA9PSBpMi5uZXh0KCkpOwovLyAgICB9Ci8vCi8v\nICAgIC8qKgovLyAgICAgKiBBc3NlcnQgdGhhdCB0aGUgY29sbGVjdGlvbiBw\nYXJhbWV0ZXIgaXMgYWxyZWFkeSBvcmRlcmVkCi8vICAgICAqIGFjY29yZGlu\nZyB0byB0aGUgc3BlY2lmaWVkIGNvbXBhcmF0b3IuCi8vICAgICAqLwovLyAg\nICBwdWJsaWMgdm9pZCBhc3NlcnRPcmRlcmVkKENvbGxlY3Rpb24gYywgQ29t\ncGFyYXRvciBjb21wKSB7Ci8vICAgICAgICBMaXN0IGwxID0gbmV3IExpbmtl\nZExpc3QoYyk7Ci8vICAgICAgICBMaXN0IGwyID0gbmV3IExpbmtlZExpc3Qo\nYyk7Ci8vICAgICAgICBhc3NlcnRFcXVhbHMobDEsIGwyKTsKLy8gICAgICAg\nIENvbGxlY3Rpb25zLnNvcnQobDIsIGNvbXApOwovLyAgICAgICAgYXNzZXJ0\nRXF1YWxzKGwxLCBsMik7Ci8vICAgICAgICBDb2xsZWN0aW9ucy5zb3J0KGwx\nLCBjb21wKTsKLy8gICAgICAgIGFzc2VydEVxdWFscyhsMSwgbDIpOwovLyAg\nICB9Ci8vCi8vICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vICAgIC8vIEFz\nc2VydGlvbiBIZWxwZXJzCi8vICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vCi8v\nCi8vICAgIHB1YmxpYyB2b2lkIGFzc2VydE5vdEVxdWFscyhPYmplY3QgYSwg\nT2JqZWN0IGIpIHsKLy8gICAgICAgIGlmIChhID09IG51bGwgJiYgYiAhPSBu\ndWxsKQovLyAgICAgICAgICAgIHJldHVybjsKLy8gICAgICAgIGlmIChhICE9\nIG51bGwgJiYgYiA9PSBudWxsKQovLyAgICAgICAgICAgIHJldHVybjsKLy8g\nICAgICAgIGlmICghKGEuZXF1YWxzKGIpKSkKLy8gICAgICAgICAgICByZXR1\ncm47Ci8vICAgICAgICBpZiAoIShiLmVxdWFscyhhKSkpCi8vICAgICAgICAg\nICAgcmV0dXJuOwovLwovLyAgICAgICAgZmFpbCgiZXhwZWN0ZWQgITwiICsg\nYSArICI+LmVxdWFscyg8IiArIGIgKyAiPikiKTsKLy8gICAgfQovLwovLyAg\nICBwdWJsaWMgdm9pZCBhc3NlcnRTaXplKGludCBzaXplLCBPYmplY3Qgb2Ip\nIHsKLy8gICAgICAgIGlmIChvYiA9PSBudWxsKSB7Ci8vICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKHNpemUsIDApOwovLyAgICAgICAgICAgIHJldHVybjsK\nLy8gICAgICAgIH0KLy8KLy8gICAgICAgIGlmIChvYiBpbnN0YW5jZW9mIENv\nbGxlY3Rpb24pCi8vICAgICAgICAgICAgb2IgPSAoKENvbGxlY3Rpb24pIG9i\nKS5pdGVyYXRvcigpOwovLyAgICAgICAgaWYgKG9iIGluc3RhbmNlb2YgSXRl\ncmF0b3IpIHsKLy8gICAgICAgICAgICBJdGVyYXRvciBpID0gKEl0ZXJhdG9y\nKSBvYjsKLy8gICAgICAgICAgICBpbnQgY291bnQgPSAwOwovLyAgICAgICAg\nICAgIHdoaWxlIChpLmhhc05leHQoKSkgewovLyAgICAgICAgICAgICAgICBj\nb3VudCsrOwovLyAgICAgICAgICAgICAgICBpLm5leHQoKTsKLy8gICAgICAg\nICAgICB9Ci8vCi8vICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHNpemUsIGNv\ndW50KTsKLy8gICAgICAgIH0gZWxzZQovLyAgICAgICAgICAgIGZhaWwoImFz\nc2VydFNpemU6IGV4cGVjdGVkIENvbGxlY3Rpb24sIEl0ZXJhdG9yLCAiCi8v\nICAgICAgICAgICAgICAgICsgIlF1ZXJ5LCBvciBFeHRlbnQsIGJ1dCBnb3Qg\nIgovLyAgICAgICAgICAgICAgICArIG9iLmdldENsYXNzKCkuZ2V0TmFtZSgp\nKTsKLy8gICAgfQogICAgCn0K\n","encoding":"base64"}

