{"sha":"77d253f961bced02dc609e4b1f286ce57b897bbb","node_id":"MDQ6QmxvYjIwNjM2NDo3N2QyNTNmOTYxYmNlZDAyZGM2MDllNGIxZjI4NmNlNTdiODk3YmJi","size":4186,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/77d253f961bced02dc609e4b1f286ce57b897bbb","content":"LyoKICogVGVzdERhdGVRdWVyaWVzLmphdmEKICoKICogQ3JlYXRlZCBvbiBP\nY3RvYmVyIDEwLCAyMDA2LCAxOjI4IFBNCiAqCiAqIFRvIGNoYW5nZSB0aGlz\nIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2VyCiAq\nIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgogKi8KCi8q\nCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlv\nbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNl\nbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3Ry\naWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0\naW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFT\nRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFj\naGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5\nb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNl\nCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkg\nb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3Jn\nL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBi\neSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICog\nc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlz\ndHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJS\nQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBl\neHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQog\nKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAKICovCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsK\nCmltcG9ydCBqYXZhLnRleHQuU2ltcGxlRGF0ZUZvcm1hdDsKaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkRhdGU7Cmlt\ncG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlz\ndDsKCgoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5r\nZXJuZWwuY29tbW9uLmFwcHMuQWxsRmllbGRUeXBlc1Rlc3Q7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlN\nYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFRdWVyeTsKCnB1YmxpYyBjbGFzcyBUZXN0RGF0ZVF1ZXJpZXMg\nZXh0ZW5kcyBCYXNlS2VybmVsVGVzdCB7CgogICAgcHJpdmF0ZSBPcGVuSlBB\nRW50aXR5TWFuYWdlciBfcG0gPSBudWxsOwogICAgcHJpdmF0ZSBEYXRlIF9k\nYXRlID0gbnVsbDsKICAgIHByaXZhdGUgRGF0ZSBfYmVmb3JlID0gbnVsbDsK\nICAgIHByaXZhdGUgRGF0ZSBfYWZ0ZXIgPSBudWxsOwoKICAgIC8qKgogICAg\nICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBUZXN0RGF0ZVF1ZXJpZXMK\nICAgICAqLwogICAgcHVibGljIFRlc3REYXRlUXVlcmllcygpIHsKICAgIH0K\nCiAgICBwdWJsaWMgVGVzdERhdGVRdWVyaWVzKFN0cmluZyBuYW1lKSB7CiAg\nICAgICAgc3VwZXIobmFtZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nVXAoKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVy\nLnNldFVwKCk7CgogICAgICAgIFNpbXBsZURhdGVGb3JtYXQgc2RmID0gbmV3\nIFNpbXBsZURhdGVGb3JtYXQoIk1NTU1NIGRkLCB5eXl5Iik7CiAgICAgICAg\nX2RhdGUgPSBzZGYucGFyc2UoIkFwcmlsIDI2LCAxOTc4Iik7CiAgICAgICAg\nX2JlZm9yZSA9IHNkZi5wYXJzZSgiQXByaWwgMjUsIDE5NzgiKTsKICAgICAg\nICBfYWZ0ZXIgPSBzZGYucGFyc2UoIkFwcmlsIDI3LCAxOTc4Iik7CiAgICAg\nICAgX3BtID0gZ2V0UE0oKTsKCiAgICAgICAgLy8gZGVsZXRlIGFsbCBleGlz\ndGluZyBpbnN0YW5jZXMKICAgICAgICBkZWxldGVBbGwoQWxsRmllbGRUeXBl\nc1Rlc3QuY2xhc3MpOwoKICAgICAgICAvLyBjcmVhdGUgc29tZSBpbnN0YW5j\nZXMgdG8gcXVlcnkgb24KICAgICAgICBzdGFydFR4KF9wbSk7CiAgICAgICAg\nQWxsRmllbGRUeXBlc1Rlc3QgdGVzdCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVz\ndCgpOwogICAgICAgIHRlc3Quc2V0VGVzdERhdGUoX2RhdGUpOwogICAgICAg\nIF9wbS5wZXJzaXN0KHRlc3QpOwoKICAgICAgICB0ZXN0ID0gbmV3IEFsbEZp\nZWxkVHlwZXNUZXN0KCk7CiAgICAgICAgdGVzdC5zZXRUZXN0RGF0ZShfYmVm\nb3JlKTsKICAgICAgICBfcG0ucGVyc2lzdCh0ZXN0KTsKCiAgICAgICAgdGVz\ndCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOwogICAgICAgIHRlc3Quc2V0\nVGVzdERhdGUoX2FmdGVyKTsKICAgICAgICBfcG0ucGVyc2lzdCh0ZXN0KTsK\nICAgICAgICBlbmRUeChfcG0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RFcXVhbHMoKSB7CiAgICAgICAgQ29sbGVjdGlvbiB2YWxzID0gZXhlY3V0\nZVF1ZXJ5KCJ0ZXN0RGF0ZSA9IDpkYXRlIik7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIHZhbHMuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoX2Rh\ndGUsICgoQWxsRmllbGRUeXBlc1Rlc3QpIHZhbHMuaXRlcmF0b3IoKS5uZXh0\nKCkpLgogICAgICAgICAgICBnZXRUZXN0RGF0ZSgpKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0Tm90RXF1YWxzKCkgewogICAgICAgIENvbGxlY3Rp\nb24gdmFscyA9IGV4ZWN1dGVRdWVyeSgidGVzdERhdGUgPD4gOmRhdGUiKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMiwgdmFscy5zaXplKCkpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RCZWZvcmUoKSB7CiAgICAgICAgQ29sbGVj\ndGlvbiB2YWxzID0gZXhlY3V0ZVF1ZXJ5KCJ0ZXN0RGF0ZSA8IDpkYXRlIik7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHZhbHMuc2l6ZSgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoX2JlZm9yZSwgKChBbGxGaWVsZFR5cGVzVGVzdCkg\ndmFscy5pdGVyYXRvcigpLm5leHQoKSkuCiAgICAgICAgICAgIGdldFRlc3RE\nYXRlKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RBZnRlcigpIHsK\nICAgICAgICBDb2xsZWN0aW9uIHZhbHMgPSBleGVjdXRlUXVlcnkoInRlc3RE\nYXRlID4gOmRhdGUiKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgdmFscy5z\naXplKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhfYWZ0ZXIsICgoQWxsRmll\nbGRUeXBlc1Rlc3QpIHZhbHMuaXRlcmF0b3IoKS5uZXh0KCkpLgogICAgICAg\nICAgICBnZXRUZXN0RGF0ZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0T3JkZXJCeSgpIHsKICAgICAgICBTdHJpbmcgcXVlcnkgPQogICAgICAg\nICAgICAiU0VMRUNUIG8gRlJPTSBBbGxGaWVsZFR5cGVzVGVzdCBvIE9SREVS\nIEJZIG8udGVzdERhdGUgQVNDIjsKICAgICAgICBPcGVuSlBBUXVlcnkgcSA9\nIF9wbS5jcmVhdGVRdWVyeShxdWVyeSk7CiAgICAgICAgTGlzdCB2YWxzID0g\ncS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIHZh\nbHMuc2l6ZSgpKTsKCiAgICAgICAgSXRlcmF0b3IgaSA9IHZhbHMuaXRlcmF0\nb3IoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoX2JlZm9yZSwgKChBbGxGaWVs\nZFR5cGVzVGVzdCkgaS5uZXh0KCkpLmdldFRlc3REYXRlKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscyhfZGF0ZSwgKChBbGxGaWVsZFR5cGVzVGVzdCkgaS5u\nZXh0KCkpLmdldFRlc3REYXRlKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhf\nYWZ0ZXIsICgoQWxsRmllbGRUeXBlc1Rlc3QpIGkubmV4dCgpKS5nZXRUZXN0\nRGF0ZSgpKTsKICAgIH0KCiAgICBwcml2YXRlIExpc3QgZXhlY3V0ZVF1ZXJ5\nKFN0cmluZyBmaWx0ZXIpIHsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiU0VM\nRUNUIG8gRlJPTSBBbGxGaWVsZFR5cGVzVGVzdCBvIFdIRVJFIG8uIiArIGZp\nbHRlcjsKICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IF9wbS5jcmVhdGVRdWVy\neShxdWVyeSk7CiAgICAgICAgcS5zZXRQYXJhbWV0ZXIoImRhdGUiLCBfZGF0\nZSk7CiAgICAgICAgcmV0dXJuIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgfQp9\nCg==\n","encoding":"base64"}

