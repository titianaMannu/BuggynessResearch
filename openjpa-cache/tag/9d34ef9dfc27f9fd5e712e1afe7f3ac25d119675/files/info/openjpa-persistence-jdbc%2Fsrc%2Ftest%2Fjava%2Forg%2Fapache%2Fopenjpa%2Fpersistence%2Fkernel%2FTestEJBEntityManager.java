{"sha":"e497d6a93e5fc381c674a77241998f47ac045ee2","node_id":"MDQ6QmxvYjIwNjM2NDplNDk3ZDZhOTNlNWZjMzgxYzY3NGE3NzI0MTk5OGY0N2FjMDQ1ZWUy","size":4088,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e497d6a93e5fc381c674a77241998f47ac045ee2","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVs\nOwoKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0\naWwuTGlzdDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CgoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5r\nZXJuZWwuY29tbW9uLmFwcHMuUnVudGltZVRlc3QxOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21tb24uYXBwcy5S\ndW50aW1lVGVzdDI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7CgpwdWJsaWMg\nY2xhc3MgVGVzdEVKQkVudGl0eU1hbmFnZXIgZXh0ZW5kcyBBYnN0cmFjdFRl\nc3RDYXNlIHsKCiAgICBwcml2YXRlIE9iamVjdCBfaWQgPSBudWxsOwoKICAg\nIHByaXZhdGUgT2JqZWN0IF9pZDIgPSBudWxsOwoKICAgIHB1YmxpYyBUZXN0\nRUpCRW50aXR5TWFuYWdlcihTdHJpbmcgbmFtZSkgewogICAgICAgIHN1cGVy\nKG5hbWUsICJrZXJuZWxjYWN0dXNhcHAiKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGRlbGV0\nZUFsbChSdW50aW1lVGVzdDEuY2xhc3MpOwoKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFy\ndFR4KGVtKTsKCiAgICAgICAgUnVudGltZVRlc3QxIGEgPSBuZXcgUnVudGlt\nZVRlc3QxKCJTVFJJTkciLCAxMCk7CiAgICAgICAgUnVudGltZVRlc3QyIGIg\nPSBuZXcgUnVudGltZVRlc3QyKCJTVFJJTkcyIiwgMTEpOwogICAgICAgIGVt\nLnBlcnNpc3QoYSk7CiAgICAgICAgZW0ucGVyc2lzdChiKTsKICAgICAgICBf\naWQgPSBhLmdldEludEZpZWxkKCk7CiAgICAgICAgX2lkMiA9IGIuZ2V0SW50\nRmllbGQoKTsKCiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVt\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIHRoYXQgdGhlIFBNIHRo\ncm93cyBFeGNlcHRpb25zIG9uIHVzYWdlIGF0dGVtcHRzIGFmdGVyIGl0IGhh\ncyBiZWVuCiAgICAgKiBjbG9zZWQuCiAgICAgKi8KICAgIC8qIEZpeCBNZSAt\nIGFva2VrZSAtIHRha2VzIGEgbG90IG9mIHRpbWUgdG8gcnVuICovCiAgICAv\nLyBwdWJsaWMgdm9pZCB0ZXN0Q2xvc2VkICgpCiAgICAvLyB7CiAgICAvLyBF\nbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAg\nIC8vIHN0YXJ0VHgoZW0pOwogICAgLy8gZW5kRW0oZW0pOwogICAgLy8KICAg\nIC8vIHRyeQogICAgLy8gewogICAgLy8gLy8gdGhpcyBpcyB0aGUgb25seSBt\nZXRob2QgdGhhdCBzaG91bGQgc3VjY2VlZAogICAgLy8gaWYoZW0uaXNPcGVu\nICgpKQogICAgLy8gZmFpbCgiU3VwcG9zZWQgdG8gYmUgY2xvc2VkLi4uYnV0\nIGNhbm5vdCBiZSBjbG9zZWQgaW5zaWRlCiAgICAvLyBjb250YWluZXIuLmNs\nb3NlZCBhdCB0aGUgZW5kIG9mIGZ1bmN0Iik7CiAgICAvLyB9CiAgICAvLyBj\nYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkKICAgIC8vIHsKICAgIC8vIGZh\naWwgKCJpc0Nsb3NlZCIpOwogICAgLy8gfQogICAgLy8gdHJ5CiAgICAvLyB7\nCiAgICAvLyBlbS5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcywgX2lkKTsKICAg\nIC8vIGZhaWwgKCJmaW5kIik7CiAgICAvLyB9CiAgICAvLyBjYXRjaCAoUnVu\ndGltZUV4Y2VwdGlvbiByZSkKICAgIC8vIHsKICAgIC8vIH0KICAgIC8vIH0K\nICAgIHB1YmxpYyB2b2lkIHRlc3RNdWx0aXBsZUNsb3NlVGhyZWFkZWQoKSB0\naHJvd3MgVGhyb3dhYmxlIHsKICAgICAgICBmaW5hbCBFbnRpdHlNYW5hZ2Vy\nIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBmaW5hbCBM\naXN0IHJlc3VsdCA9IG5ldyBBcnJheUxpc3QoKTsKICAgICAgICAvLyBFbnRp\ndHlUcmFuc2FjdGlvbiB0ID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAg\nICAvLyB0LmJlZ2luICgpOwoKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAg\nICBuZXcgVGhyZWFkKCkgewogICAgICAgICAgICBAU3VwcHJlc3NXYXJuaW5n\ncygidW5jaGVja2VkIikKICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkg\newogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBl\nbS5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hZGQobmV3\nIEludGVnZXIoMCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgY2F0Y2ggKEV4Y2VwdGlvbiBqZG9lKSB7CiAgICAgICAgICAgICAgICAg\nICAgcmVzdWx0LmFkZChqZG9lKTsKICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgIGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICAg\nICAgICAgIHJlc3VsdC5hZGQodCk7CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgIH0KICAgICAgICB9LnN0YXJ0KCk7CgogICAgICAgIHdoaWxlIChy\nZXN1bHQuc2l6ZSgpID09IDApCiAgICAgICAgICAgIFRocmVhZC5jdXJyZW50\nVGhyZWFkKCkueWllbGQoKTsgLy8gd2FpdCBmb3IgcmVzdWx0cwogICAgICAg\nIE9iamVjdCByZXQgPSByZXN1bHQuZ2V0KDApOwoKICAgICAgICBpZiAocmV0\nIGluc3RhbmNlb2YgRXhjZXB0aW9uKQogICAgICAgICAgICByZXR1cm47IC8v\nIGdvb2QKCiAgICAgICAgaWYgKHJldCBpbnN0YW5jZW9mIFRocm93YWJsZSkK\nICAgICAgICAgICAgdGhyb3cgKFRocm93YWJsZSkgcmV0OwogICAgfQoKICAg\nIC8qKgogICAgICogVGhpcyBtZXRob2QgdHJpZXMgdG8gcGVyZm9ybSBvcGVy\nYXRpb25zIHRoYXQgc2hvdWxkIGxlYWQgdG8gaWxsZWdhbAogICAgICogc3Rh\ndGVzLCBzdWNoIGFzIHBlcnNpc3RpbmcgaW5zdGFuY2VzIG91dHNpZGUgb2Yg\ndHJhbnNhY3Rpb25zLCBldGMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRl\nc3RJbGxlZ2FsU3RhdGUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIFJ1bnRpbWVUZXN0\nMSBhID0gbmV3IFJ1bnRpbWVUZXN0MSgiZm9vIiwgMTApOwogICAgICAgIFJ1\nbnRpbWVUZXN0MSBhMiA9IChSdW50aW1lVGVzdDEpIGVtLmZpbmQoUnVudGlt\nZVRlc3QxLmNsYXNzLCBfaWQpOwoKICAgICAgICB0cnkgewogICAgICAgICAg\nICBlbS5wZXJzaXN0KGEpOwogICAgICAgICAgICBmYWlsKCJwZXJzaXN0Li4u\nIik7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gaXNlKSB7\nCiAgICAgICAgfQoKICAgICAgICBlbmRFbShlbSk7CiAgICB9Cn0=\n","encoding":"base64"}

