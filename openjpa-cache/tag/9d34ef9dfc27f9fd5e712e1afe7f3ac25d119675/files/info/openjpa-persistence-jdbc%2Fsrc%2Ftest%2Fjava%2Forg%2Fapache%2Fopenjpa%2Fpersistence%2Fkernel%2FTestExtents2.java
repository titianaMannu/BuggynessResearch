{"sha":"98d2cef3b5b5730549bde5617f7b93f9bc05a4be","node_id":"MDQ6QmxvYjIwNjM2NDo5OGQyY2VmM2I1YjU3MzA1NDliZGU1NjE3ZjdiOTNmOWJjMDVhNGJl","size":6348,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/98d2cef3b5b5730549bde5617f7b93f9bc05a4be","content":"LyoKICogVGVzdEV4dGVudHMyLmphdmEKICoKICogQ3JlYXRlZCBvbiBPY3Rv\nYmVyIDEwLCAyMDA2LCA1OjMwIFBNCiAqCiAqIFRvIGNoYW5nZSB0aGlzIHRl\nbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2VyCiAqIGFu\nZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgogKi8KCi8qCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xp\nY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBh\ncHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29m\ndHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJp\nYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5U\nSUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHBy\nZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBz\ncGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxp\nbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAKICovCnBhY2th\nZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsKCmlt\ncG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CgoKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLlJ1bnRp\nbWVUZXN0MTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5rZXJuZWwuY29tbW9uLmFwcHMuUnVudGltZVRlc3QyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21tb24uYXBw\ncy5SdW50aW1lVGVzdDM7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLkV4dGVudDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKCnB1YmxpYyBjbGFz\ncyBUZXN0RXh0ZW50czIgZXh0ZW5kcyBCYXNlS2VybmVsVGVzdCB7CgogICAg\ncHJpdmF0ZSBPYmplY3QgX29pZDEgPSBudWxsOwogICAgcHJpdmF0ZSBPYmpl\nY3QgX29pZDIgPSBudWxsOwogICAgcHJpdmF0ZSBPYmplY3QgX29pZDMgPSBu\ndWxsOwoKICAgIHB1YmxpYyBUZXN0RXh0ZW50czIoU3RyaW5nIG5hbWUpIHsK\nICAgICAgICBzdXBlcihuYW1lKTsKICAgIH0KCiAgICAvKioKICAgICAqIENy\nZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdEV4dGVudHMyCiAgICAgKi8K\nICAgIHB1YmxpYyBUZXN0RXh0ZW50czIoKSB7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgZGVsZXRlQWxsKFJ1bnRpbWVUZXN0\nMS5jbGFzcyk7CgogICAgICAgIFJ1bnRpbWVUZXN0MSB0ZXN0MSA9IG5ldyBS\ndW50aW1lVGVzdDEoKTsKICAgICAgICB0ZXN0MS5zZXRJbnRGaWVsZCgxKTsK\nICAgICAgICBSdW50aW1lVGVzdDIgdGVzdDIgPSBuZXcgUnVudGltZVRlc3Qy\nKCk7CiAgICAgICAgdGVzdDIuc2V0SW50RmllbGQoMik7CiAgICAgICAgdGVz\ndDIuc2V0SW50RmllbGQyKDIpOwogICAgICAgIFJ1bnRpbWVUZXN0MyB0ZXN0\nMyA9IG5ldyBSdW50aW1lVGVzdDMoKTsKICAgICAgICB0ZXN0My5zZXRJbnRG\naWVsZCgzKTsKICAgICAgICB0ZXN0My5zZXRJbnRGaWVsZDMoMyk7CgogICAg\nICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAg\nICBzdGFydFR4KHBtKTsKICAgICAgICBwbS5wZXJzaXN0KHRlc3QxKTsKICAg\nICAgICBwbS5wZXJzaXN0KHRlc3QyKTsKICAgICAgICBwbS5wZXJzaXN0KHRl\nc3QzKTsKICAgICAgICBfb2lkMSA9IHBtLmdldE9iamVjdElkKHRlc3QxKTsK\nICAgICAgICBfb2lkMiA9IHBtLmdldE9iamVjdElkKHRlc3QyKTsKICAgICAg\nICBfb2lkMyA9IHBtLmdldE9iamVjdElkKHRlc3QzKTsKICAgICAgICBlbmRU\neChwbSk7CiAgICAgICAgZW5kRW0ocG0pOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RQcm9wZXJ0aWVzKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBFeHRlbnQgZXh0ID0gcG0u\nY3JlYXRlRXh0ZW50KFJ1bnRpbWVUZXN0Mi5jbGFzcywgZmFsc2UpOwogICAg\nICAgIGFzc2VydEVxdWFscyhwbSwgZXh0LmdldEVudGl0eU1hbmFnZXIoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKFJ1bnRpbWVUZXN0Mi5jbGFzcywgZXh0\nLmdldEVsZW1lbnRDbGFzcygpKTsKICAgICAgICBhc3NlcnRUcnVlKCFleHQu\naGFzU3ViY2xhc3NlcygpKTsKCiAgICAgICAgZXh0ID0gcG0uY3JlYXRlRXh0\nZW50KFJ1bnRpbWVUZXN0MS5jbGFzcywgdHJ1ZSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKHBtLCBleHQuZ2V0RW50aXR5TWFuYWdlcigpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoUnVudGltZVRlc3QxLmNsYXNzLCBleHQuZ2V0RWxlbWVu\ndENsYXNzKCkpOwogICAgICAgIGFzc2VydFRydWUoZXh0Lmhhc1N1YmNsYXNz\nZXMoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE5vU3ViY2xhc3Nl\ncygpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBN\nKCk7CiAgICAgICAgRXh0ZW50IGV4dCA9IHBtLmNyZWF0ZUV4dGVudChSdW50\naW1lVGVzdDEuY2xhc3MsIGZhbHNlKTsKICAgICAgICBJdGVyYXRvciBpdHIg\nPSBleHQuaXRlcmF0b3IoKTsKICAgICAgICBhc3NlcnRUcnVlKGl0ci5oYXNO\nZXh0KCkpOwogICAgICAgIGFzc2VydEVxdWFscyhfb2lkMSwgcG0uZ2V0T2Jq\nZWN0SWQoaXRyLm5leHQoKSkpOwogICAgICAgIGFzc2VydFRydWUoIWl0ci5o\nYXNOZXh0KCkpOwogICAgICAgIGV4dC5jbG9zZUFsbCgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RTdWJjbGFzc2VzKCkgewogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBFeHRlbnQg\nZXh0ID0gcG0uY3JlYXRlRXh0ZW50KFJ1bnRpbWVUZXN0MS5jbGFzcywgdHJ1\nZSk7CgogICAgICAgIGludCB0ZXN0MUNvdW50ID0gMDsKICAgICAgICBpbnQg\ndGVzdDJDb3VudCA9IDA7CiAgICAgICAgaW50IHRlc3QzQ291bnQgPSAwOwog\nICAgICAgIE9iamVjdCBuZXh0OwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRy\nID0gZXh0Lml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAg\nICAgIG5leHQgPSBwbS5nZXRPYmplY3RJZChpdHIubmV4dCgpKTsKICAgICAg\nICAgICAgaWYgKF9vaWQxLmVxdWFscyhuZXh0KSkKICAgICAgICAgICAgICAg\nIHRlc3QxQ291bnQrKzsKICAgICAgICAgICAgZWxzZSBpZiAoX29pZDIuZXF1\nYWxzKG5leHQpKQogICAgICAgICAgICAgICAgdGVzdDJDb3VudCsrOwogICAg\nICAgICAgICBlbHNlIGlmIChfb2lkMy5lcXVhbHMobmV4dCkpCiAgICAgICAg\nICAgICAgICB0ZXN0M0NvdW50Kys7CiAgICAgICAgfQogICAgICAgIGV4dC5j\nbG9zZUFsbCgpOwogICAgICAgIGFzc2VydEVxdWFscygxLCB0ZXN0MUNvdW50\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgdGVzdDJDb3VudCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIHRlc3QzQ291bnQpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RDb250YWluc05ld2x5UGVyc2lzdGVkKCkgewogICAg\nICAgIFJ1bnRpbWVUZXN0MSB0ZXN0MSA9IG5ldyBSdW50aW1lVGVzdDEoKTsK\nICAgICAgICBSdW50aW1lVGVzdDEgdGVzdDIgPSBuZXcgUnVudGltZVRlc3Qy\nKCk7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0o\nKTsKCiAgICAgICAgLy8gcGNsOiAxNCBPY3QgMjAwMzogZGVmYXVsdCBpbiAz\nLjAgaXMgbm93IHRydWUsIGJ1dCB0aGlzIHRlc3QKICAgICAgICAvLyBhc3N1\nbWVzIGZhbHNlIHNvbWV3aGVyZS4KCiAgICAgICAgcG0uc2V0SWdub3JlQ2hh\nbmdlcyhmYWxzZSk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgcG0ucGVyc2lzdCh0ZXN0MSk7CiAgICAgICAgICAg\nIHBtLnBlcnNpc3QodGVzdDIpOwogICAgICAgICAgICBPYmplY3QgbmV3T2lk\nID0gcG0uZ2V0T2JqZWN0SWQodGVzdDEpOwoKICAgICAgICAgICAgRXh0ZW50\nIGV4dCA9IHBtLmNyZWF0ZUV4dGVudChSdW50aW1lVGVzdDEuY2xhc3MsIGZh\nbHNlKTsKICAgICAgICAgICAgYm9vbGVhbiBmb3VuZE9pZDEgPSBmYWxzZTsK\nICAgICAgICAgICAgYm9vbGVhbiBmb3VuZE5ldyA9IGZhbHNlOwogICAgICAg\nICAgICBPYmplY3QgbmV4dDsKICAgICAgICAgICAgZm9yIChJdGVyYXRvciBp\ndHIgPSBleHQuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAg\nICAgICAgICAgIG5leHQgPSBwbS5nZXRPYmplY3RJZChpdHIubmV4dCgpKTsK\nICAgICAgICAgICAgICAgIGlmIChfb2lkMS5lcXVhbHMobmV4dCkpCiAgICAg\nICAgICAgICAgICAgICAgZm91bmRPaWQxID0gdHJ1ZTsKICAgICAgICAgICAg\nICAgIGVsc2UgaWYgKG5ld09pZC5lcXVhbHMobmV4dCkpCiAgICAgICAgICAg\nICAgICAgICAgZm91bmROZXcgPSB0cnVlOwogICAgICAgICAgICAgICAgZWxz\nZQogICAgICAgICAgICAgICAgICAgIGZhaWwoIkJhZCBvYmplY3QgaW4gZXh0\nZW50LiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGV4dC5jbG9zZUFs\nbCgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGZvdW5kT2lkMSk7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoZm91bmROZXcpOwogICAgICAgIH0gZmluYWxs\neSB7CiAgICAgICAgICAgIHJvbGxiYWNrVHgocG0pOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Tm90Q29udGFpbnNOZXdseURlbGV0\nZWQoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQ\nTSgpOwoKICAgICAgICAvLyBwY2w6IDE0IE9jdCAyMDAzOiBkZWZhdWx0IGlu\nIDMuMCBpcyBub3cgdHJ1ZSwgYnV0IHRoaXMgdGVzdAogICAgICAgIC8vIGFz\nc3VtZXMgZmFsc2Ugc29tZXdoZXJlLgogICAgICAgIHBtLnNldElnbm9yZUNo\nYW5nZXMoZmFsc2UpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIFJ1bnRpbWVUZXN0MiB0ZXN0MiA9CiAgICAgICAg\nICAgICAgICAoUnVudGltZVRlc3QyKSBwbS5maW5kKFJ1bnRpbWVUZXN0Mi5j\nbGFzcywgX29pZDIpOwogICAgICAgICAgICBwbS5yZW1vdmUodGVzdDIpOwog\nICAgICAgICAgICBSdW50aW1lVGVzdDEgdGVzdDEgPSBuZXcgUnVudGltZVRl\nc3QxKCk7CiAgICAgICAgICAgIHBtLnBlcnNpc3QodGVzdDEpOwogICAgICAg\nICAgICBwbS5yZW1vdmUodGVzdDEpOwoKICAgICAgICAgICAgRXh0ZW50IGV4\ndCA9IHBtLmNyZWF0ZUV4dGVudChSdW50aW1lVGVzdDEuY2xhc3MsIHRydWUp\nOwogICAgICAgICAgICBib29sZWFuIGZvdW5kT2lkMSA9IGZhbHNlOwogICAg\nICAgICAgICBib29sZWFuIGZvdW5kT2lkMyA9IGZhbHNlOwogICAgICAgICAg\nICBPYmplY3QgbmV4dDsKICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdHIg\nPSBleHQuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAg\nICAgICAgIG5leHQgPSBwbS5nZXRPYmplY3RJZChpdHIubmV4dCgpKTsKICAg\nICAgICAgICAgICAgIGlmIChfb2lkMS5lcXVhbHMobmV4dCkpCiAgICAgICAg\nICAgICAgICAgICAgZm91bmRPaWQxID0gdHJ1ZTsKICAgICAgICAgICAgICAg\nIGVsc2UgaWYgKF9vaWQzLmVxdWFscyhuZXh0KSkKICAgICAgICAgICAgICAg\nICAgICBmb3VuZE9pZDMgPSB0cnVlOwogICAgICAgICAgICAgICAgZWxzZQog\nICAgICAgICAgICAgICAgICAgIGZhaWwoIkJhZCBvYmplY3QgaW4gZXh0ZW50\nLiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGV4dC5jbG9zZUFsbCgp\nOwogICAgICAgICAgICBhc3NlcnRUcnVlKGZvdW5kT2lkMSk7CiAgICAgICAg\nICAgIGFzc2VydFRydWUoZm91bmRPaWQzKTsKICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICByb2xsYmFja1R4KHBtKTsKICAgICAgICB9CiAgICB9\nCn0K\n","encoding":"base64"}

