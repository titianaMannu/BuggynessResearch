{"sha":"8df8554cda685d6ea21aecf4a43d3f5ecc95a6ed","node_id":"MDQ6QmxvYjIwNjM2NDo4ZGY4NTU0Y2RhNjg1ZDZlYTIxYWVjZjRhNDNkM2Y1ZWNjOTVhNmVk","size":13770,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8df8554cda685d6ea21aecf4a43d3f5ecc95a6ed","content":"LyoKICogVGVzdEZldGNoR3JvdXBzLmphdmEKICoKICogQ3JlYXRlZCBvbiBP\nY3RvYmVyIDEwLCAyMDA2LCA1OjQ2IFBNCiAqCiAqIFRvIGNoYW5nZSB0aGlz\nIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2VyCiAq\nIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgogKi8KCi8q\nCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlv\nbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNl\nbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3Ry\naWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0\naW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFT\nRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFj\naGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5\nb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNl\nCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkg\nb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3Jn\nL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBi\neSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICog\nc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlz\ndHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJS\nQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBl\neHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQog\nKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAKICovCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsK\nCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkJp\ndFNldDsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwppbXBvcnQgamF2YS51dGls\nLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGph\ndmEudXRpbC5NYXA7CgoKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkF0dGFjaEE7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5h\ncHBzLkF0dGFjaEI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkF0dGFjaEM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBz\nLkF0dGFjaEQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2Uua2VybmVsLmNvbW1vbi5hcHBzLkF0dGFjaEU7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkF0\ndGFjaEY7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\na2VybmVsLmNvbW1vbi5hcHBzLkZldGNoR3JvdXBUZXN0T2JqZWN0OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21t\nb24uYXBwcy5GZXRjaEdyb3VwVGVzdE9iamVjdENoaWxkOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkZpZWxkTWV0YURhdGE7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuRmV0Y2hQ\nbGFuOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeTsKCnB1\nYmxpYyBjbGFzcyBUZXN0RmV0Y2hHcm91cHMgZXh0ZW5kcyBCYXNlS2VybmVs\nVGVzdCB7CgogICAgcHJpdmF0ZSBpbnQgb2lkMTsKICAgIHByaXZhdGUgaW50\nIG9pZDI7CiAgICBwcml2YXRlIGludCBvaWRjMTsKCiAgICBwdWJsaWMgVGVz\ndEZldGNoR3JvdXBzKFN0cmluZyBzKSB7CiAgICAgICAgc3VwZXIocyk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9m\nIFRlc3RGZXRjaEdyb3VwcwogICAgICovCiAgICBwdWJsaWMgVGVzdEZldGNo\nR3JvdXBzKCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewog\nICAgICAgIGRlbGV0ZUFsbChGZXRjaEdyb3VwVGVzdE9iamVjdC5jbGFzcyk7\nCgogICAgICAgIEZldGNoR3JvdXBUZXN0T2JqZWN0IG8xID0gbmV3IEZldGNo\nR3JvdXBUZXN0T2JqZWN0KCk7CiAgICAgICAgLy8gdGhlIHZhbHVlIHRoYXQg\nJ2EnIGlzIHNldCB0byBpcyBpbXBvcnRhbnQgLS0gVGVzdEZldGNoR3JvdXBz\nRXh0ZW50CiAgICAgICAgLy8gYW5kIFRlc3RGZXRjaEdyb3Vwc1F1ZXJ5IHJl\nbHkgb24gdGhpcwogICAgICAgIG8xLnNldEEoNSk7CiAgICAgICAgbzEuc2V0\nQigiZm9vIik7CiAgICAgICAgLy9vMS5zZXRDIChuZXcgQmlnSW50ZWdlciAo\nODkpKTsKICAgICAgICBvMS5zZXREKG5ldyBEYXRlKCkpOwogICAgICAgIG8x\nLnNldEUoImUtZm9vIik7CiAgICAgICAgbzEuc2V0RigiZi1mb28iKTsKCiAg\nICAgICAgRmV0Y2hHcm91cFRlc3RPYmplY3QgbzIgPSBuZXcgRmV0Y2hHcm91\ncFRlc3RPYmplY3QoKTsKICAgICAgICAvLyB0aGUgdmFsdWUgdGhhdCAnYScg\naXMgc2V0IHRvIGlzIGltcG9ydGFudCAtLSBUZXN0RmV0Y2hHcm91cHNFeHRl\nbnQKICAgICAgICAvLyBhbmQgVGVzdEZldGNoR3JvdXBzUXVlcnkgcmVseSBv\nbiB0aGlzCiAgICAgICAgbzIuc2V0QSgzKTsKICAgICAgICBvMi5zZXRCKCJi\nYXIiKTsKICAgICAgICAvL28yLnNldEMgKG5ldyBCaWdJbnRlZ2VyICgxMykp\nOwogICAgICAgIG8yLnNldEQobmV3IERhdGUoKSk7CiAgICAgICAgbzIuc2V0\nRSgiZS1iYXIiKTsKICAgICAgICBvMi5zZXRGKCJmLWJhciIpOwogICAgICAg\nIG8yLnNldEcobzEpOwogICAgICAgIG8yLnNldEgobzEpOwoKICAgICAgICBG\nZXRjaEdyb3VwVGVzdE9iamVjdENoaWxkIGMxID0gbmV3IEZldGNoR3JvdXBU\nZXN0T2JqZWN0Q2hpbGQoKTsKICAgICAgICAvLyB0aGUgdmFsdWUgdGhhdCAn\nYScgaXMgc2V0IHRvIGlzIGltcG9ydGFudCAtLSBUZXN0RmV0Y2hHcm91cHNF\neHRlbnQKICAgICAgICAvLyBhbmQgVGVzdEZldGNoR3JvdXBzUXVlcnkgcmVs\neSBvbiB0aGlzCiAgICAgICAgYzEuc2V0QSg0KTsKICAgICAgICBjMS5zZXRC\nKCJjaGlsZCIpOwogICAgICAgIGMxLnNldEQobmV3IERhdGUoKSk7CiAgICAg\nICAgYzEuc2V0RSgiZS1iYXoiKTsKICAgICAgICBjMS5zZXRGKCJmLWJheiIp\nOwogICAgICAgIGMxLnNldEcobzEpOwogICAgICAgIGMxLnNldEgobzEpOwog\nICAgICAgIGMxLnNldENoaWxkQSgxKTsKICAgICAgICBjMS5zZXRDaGlsZEIo\nMik7CiAgICAgICAgYzEuc2V0Q2hpbGRDKDMpOwogICAgICAgIGMxLnNldENo\naWxkRCg0KTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBn\nZXRQTSgpOwogICAgICAgIHN0YXJ0VHgocG0pOwoKICAgICAgICBwbS5wZXJz\naXN0KG8xKTsKICAgICAgICBwbS5wZXJzaXN0KG8yKTsKICAgICAgICBwbS5w\nZXJzaXN0KGMxKTsKICAgICAgICBlbmRUeChwbSk7CgogICAgICAgIG9pZDEg\nPSBvMS5nZXRJZCgpOwogICAgICAgIG9pZDIgPSBvMi5nZXRJZCgpOwogICAg\nICAgIG9pZGMxID0gYzEuZ2V0SWQoKTsKCiAgICAgICAgZW5kRW0ocG0pOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaEdyb3Vwc0Zyb21Db25m\naWd1cmF0aW9uKCkgewogICAgICAgIE1hcCBwcm9wcyA9IG5ldyBIYXNoTWFw\nKCk7CiAgICAgICAgcHJvcHMucHV0KCJvcGVuanBhLkZldGNoR3JvdXBzIiwg\nImRlZmF1bHQsZmcxLGZnMiIpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBmYWN0b3J5ID0gZ2V0RW1mKHByb3BzKTsKCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPQogICAgICAgICAgICAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIGZhY3RvcnkuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIGNoZWNrR3JvdXBzKHBtLCBuZXcgU3RyaW5nW117ICJmZzEi\nLCAiZmcyIiB9KTsKICAgICAgICBmYWN0b3J5LmNsb3NlKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdEZldGNoR3JvdXBzTm9Db25maWd1cmF0aW9u\nKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0o\nKTsKCiAgICAgICAgRmV0Y2hHcm91cFRlc3RPYmplY3QgbzEgPSBnZXRPMShw\nbSk7CiAgICAgICAgRmV0Y2hHcm91cFRlc3RPYmplY3QgbzIgPSBnZXRPMihw\nbSk7CgogICAgICAgIC8vIG9ubHkgZmllbGQgYSBzaG91bGQgYmUgbG9hZGVk\nLgogICAgICAgIGNoZWNrT2JqZWN0KHBtLCBvMSwgdHJ1ZSwgZmFsc2UsIGZh\nbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTsKCiAgICAgICAgLy8gdXBvbiBs\nb2FkaW5nIGZpZWxkIGIsIGZpZWxkcyBjIGFuZCBkIHNob3VsZCBhbHNvIGJl\nIGxvYWRlZCwKICAgICAgICAvLyBidXQgZSBhbmQgZiBzaG91bGQgbm90Lgog\nICAgICAgIG8xLmdldEIoKTsKICAgICAgICBjaGVja09iamVjdChwbSwgbzEs\nIHRydWUsIHRydWUsIHRydWUsIHRydWUsIGZhbHNlLCBmYWxzZSk7CgogICAg\nICAgIC8vIGxvYWRpbmcgZmllbGQgaCBzaG91bGQgbm90IGNhdXNlIGFueSBv\nZiB0aGUgb3RoZXJzIHRvIGJlIGxvYWRlZC4KICAgICAgICBhc3NlcnRFcXVh\nbHMobzEsIG8yLmdldEgoKSk7CiAgICAgICAgY2hlY2tPYmplY3QocG0sIG8y\nLCB0cnVlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpOwoK\nICAgICAgICAvLyBsb2FkaW5nIGZpZWxkIGcgc2hvdWxkIGNhdXNlIGUgYW5k\nIGYgdG8gYmUgbG9hZGVkLgogICAgICAgIGFzc2VydEVxdWFscyhvMSwgbzIu\nZ2V0RygpKTsKICAgICAgICBjaGVja09iamVjdChwbSwgbzIsIHRydWUsIGZh\nbHNlLCBmYWxzZSwgZmFsc2UsIHRydWUsIHRydWUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RSZXRyaWV2ZUFsbCgpIHsKICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7CgogICAgICAgIEZldGNoR3Jv\ndXBUZXN0T2JqZWN0IG8xID0gZ2V0TzEocG0pOwogICAgICAgIEZldGNoR3Jv\ndXBUZXN0T2JqZWN0IG8yID0gZ2V0TzIocG0pOwoKICAgICAgICAvLyBvbmx5\nIGZpZWxkIGEgc2hvdWxkIGJlIGxvYWRlZC4KICAgICAgICBjaGVja09iamVj\ndChwbSwgbzEsIHRydWUsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBm\nYWxzZSk7CiAgICAgICAgY2hlY2tPYmplY3QocG0sIG8yLCB0cnVlLCBmYWxz\nZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpOwoKICAgICAgICAvLyBv\nbmx5IGZpZWxkIGEgc2hvdWxkIGJlIGxvYWRlZC4KICAgICAgICBwbS5yZXRy\naWV2ZShvMSk7CiAgICAgICAgY2hlY2tPYmplY3QocG0sIG8xLCB0cnVlLCBm\nYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpOwoKICAgICAgICAv\nLyBBZGQgZ3JvdXBzIDEgYW5kIDMgdG8gdGhlIGRlZmF1bHQgZmV0Y2ggY29u\nZmlndXJhdGlvbi4KICAgICAgICBwbS5nZXRGZXRjaFBsYW4oKS5hZGRGZXRj\naEdyb3VwKCJnMSIpOwogICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFkZEZl\ndGNoR3JvdXAoImczIik7CgogICAgICAgIC8vIFJldHJpZXZlIG8xJ3MgIkRG\nRyIgd2hpY2ggd2lsbCBhY3R1YWxseSBkbyBhbGwgY29uZmlndXJlZAogICAg\nICAgIC8vIGZldGNoIGdyb3Vwcy4KICAgICAgICAvLyBERkcgZmllbGRzIGFu\nZCBmaWVsZHMgaW4gZ3JvdXBzIDEgYW5kIDMgc2hvdWxkIGJlIGxvYWRlZAog\nICAgICAgIHBtLnJldHJpZXZlKG8xKTsKICAgICAgICBjaGVja09iamVjdChw\nbSwgbzEsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIGZhbHNlLCBmYWxzZSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEZldGNoR3JvdXBDb25maWd1\ncmF0aW9uKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0g\nZ2V0UE0oKTsKICAgICAgICBGZXRjaFBsYW4gZmV0Y2ggPSBwbS5nZXRGZXRj\naFBsYW4oKTsKCiAgICAgICAgY2hlY2tHcm91cHMocG0sIG5ldyBTdHJpbmdb\nMF0pOwoKICAgICAgICBmZXRjaC5hZGRGZXRjaEdyb3VwKCJmb28iKTsKICAg\nICAgICBjaGVja0dyb3VwcyhwbSwgbmV3IFN0cmluZ1tdeyAiZm9vIiB9KTsK\nCiAgICAgICAgZmV0Y2guYWRkRmV0Y2hHcm91cCgiYmFyIik7CiAgICAgICAg\nZmV0Y2guYWRkRmV0Y2hHcm91cCgiYmF6Iik7CiAgICAgICAgY2hlY2tHcm91\ncHMocG0sIG5ldyBTdHJpbmdbXXsgImZvbyIsICJiYXIiLCAiYmF6IiB9KTsK\nCiAgICAgICAgZmV0Y2guYWRkRmV0Y2hHcm91cCgiYSIpOwogICAgICAgIGZl\ndGNoLmFkZEZldGNoR3JvdXAoImIiKTsKICAgICAgICBmZXRjaC5hZGRGZXRj\naEdyb3VwKCJjIik7CiAgICAgICAgZmV0Y2guYWRkRmV0Y2hHcm91cCgiZCIp\nOwogICAgICAgIGNoZWNrR3JvdXBzKHBtLCBuZXcgU3RyaW5nW10KICAgICAg\nICAgICAgeyAiZm9vIiwgImJhciIsICJiYXoiLCAiYSIsICJiIiwgImMiLCAi\nZCIgfSk7CgogICAgICAgIGZldGNoLnJlbW92ZUZldGNoR3JvdXAoImJhciIp\nOwogICAgICAgIGNoZWNrR3JvdXBzKHBtLCBuZXcgU3RyaW5nW117ICJmb28i\nLCAiYmF6IiwgImEiLCAiYiIsICJjIiwgImQiIH0pOwoKICAgICAgICBmZXRj\naC5yZW1vdmVGZXRjaEdyb3VwKCJiYXoiKTsKICAgICAgICBmZXRjaC5yZW1v\ndmVGZXRjaEdyb3VwKCJjIik7CiAgICAgICAgY2hlY2tHcm91cHMocG0sIG5l\ndyBTdHJpbmdbXXsgImZvbyIsICJhIiwgImIiLCAiZCIgfSk7CgogICAgICAg\nIGZldGNoLmNsZWFyRmV0Y2hHcm91cHMoKS5hZGRGZXRjaEdyb3VwKEZldGNo\nUGxhbi5HUk9VUF9ERUZBVUxUKTsKICAgICAgICBjaGVja0dyb3VwcyhwbSwg\nbmV3IFN0cmluZ1swXSk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGNoZWNr\nR3JvdXBzKE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtLCBTdHJpbmdbXSBncm91\ncHMpIHsKICAgICAgICBIYXNoU2V0IGdyb3VwU2V0ID0gbmV3IEhhc2hTZXQo\nQXJyYXlzLmFzTGlzdChncm91cHMpKTsKICAgICAgICBncm91cFNldC5hZGQo\nRmV0Y2hQbGFuLkdST1VQX0RFRkFVTFQpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiZ3JvdXBTZXQgZG9udCBtYXRjaCIsIGdyb3VwU2V0LAogICAgICAgICAg\nICBuZXcgSGFzaFNldChwbS5nZXRGZXRjaFBsYW4oKS5nZXRGZXRjaEdyb3Vw\ncygpKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEZldGNoR3JvdXBz\nQ2hpbGRXaXRoQ29uZmlndXJhdGlvbigpIHsKICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBwbSA9IGdldFBNKCk7CiAgICAgICAgcG0uZ2V0RmV0Y2hQ\nbGFuKCkuYWRkRmV0Y2hHcm91cCgiZzEiKTsKICAgICAgICBwbS5nZXRGZXRj\naFBsYW4oKS5hZGRGZXRjaEdyb3VwKCJnMyIpOwoKICAgICAgICAvLyBnZXQg\ndGhpcyBzbyB0aGF0IGgncyB2YWx1ZSBpcyBsb2FkZWQgaW50byBjYWNoZS4K\nICAgICAgICBGZXRjaEdyb3VwVGVzdE9iamVjdCBvMSA9IGdldE8xKHBtKTsK\nCiAgICAgICAgRmV0Y2hHcm91cFRlc3RPYmplY3RDaGlsZCBjMSA9IGdldEMx\nKHBtKTsKCiAgICAgICAgLy8gREZHIGZpZWxkcyBhbmQgZmllbGRzIGluIGdy\nb3VwcyAxIGFuZCAzIHNob3VsZCBiZSBsb2FkZWQKICAgICAgICBjaGVja0No\naWxkT2JqZWN0KHBtLCBjMSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFs\nc2UsIGZhbHNlLAogICAgICAgICAgICB0cnVlLCB0cnVlLCBmYWxzZSwgdHJ1\nZSk7CgogICAgICAgIC8vIHVwb24gYWNjZXNzaW5nIGZpZWxkIGIsIG5vdGhp\nbmcgc2hvdWxkIGNoYW5nZS4KICAgICAgICBjMS5nZXRCKCk7CiAgICAgICAg\nY2hlY2tDaGlsZE9iamVjdChwbSwgYzEsIHRydWUsIHRydWUsIHRydWUsIHRy\ndWUsIGZhbHNlLCBmYWxzZSwKICAgICAgICAgICAgdHJ1ZSwgdHJ1ZSwgZmFs\nc2UsIHRydWUpOwoKICAgICAgICBjMS5nZXRIKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEZldGNoR3JvdXBzV2l0aENvbmZpZ3VyYXRpb24oKSB7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOwoK\nICAgICAgICBwbS5nZXRGZXRjaFBsYW4oKS5hZGRGZXRjaEdyb3VwKCJnMSIp\nOwogICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFkZEZldGNoR3JvdXAoImcz\nIik7CgogICAgICAgIEZldGNoR3JvdXBUZXN0T2JqZWN0IG8xID0gZ2V0TzEo\ncG0pOwogICAgICAgIEZldGNoR3JvdXBUZXN0T2JqZWN0IG8yID0gZ2V0TzIo\ncG0pOwoKICAgICAgICAvLyBERkcgZmllbGRzIGFuZCBmaWVsZHMgaW4gZ3Jv\ndXBzIDEgYW5kIDMgc2hvdWxkIGJlIGxvYWRlZAogICAgICAgIGNoZWNrT2Jq\nZWN0KHBtLCBvMSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIGZh\nbHNlKTsKCiAgICAgICAgLy8gdXBvbiBhY2Nlc3NpbmcgZmllbGQgYiwgbm90\naGluZyBzaG91bGQgY2hhbmdlLgogICAgICAgIG8xLmdldEIoKTsKICAgICAg\nICBjaGVja09iamVjdChwbSwgbzEsIHRydWUsIHRydWUsIHRydWUsIHRydWUs\nIGZhbHNlLCBmYWxzZSk7CgogICAgICAgIC8vIGxvYWRpbmcgZmllbGQgaCBz\naG91bGQgbm90IGNhdXNlIGFueSBvZiB0aGUgb3RoZXJzIHRvIGJlIGxvYWRl\nZC4KICAgICAgICBhc3NlcnRFcXVhbHMobzEsIG8yLmdldEgoKSk7CiAgICAg\nICAgY2hlY2tPYmplY3QocG0sIG8yLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVl\nLCBmYWxzZSwgZmFsc2UpOwoKICAgICAgICAvLyBsb2FkaW5nIGZpZWxkIGcg\nc2hvdWxkIGNhdXNlIGUgYW5kIGYgdG8gYmUgbG9hZGVkLgogICAgICAgIGFz\nc2VydEVxdWFscyhvMSwgbzIuZ2V0RygpKTsKICAgICAgICBjaGVja09iamVj\ndChwbSwgbzIsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUp\nOwogICAgfQoKICAgIC8qKgogICAgICogVGVzdHMgdGhhdCByZWxhdGlvbiBm\naWVsZHMgYXJlIGxvYWRlZCBpbW1lZGlhdGVseSB3aGVuCiAgICAgKiB0aGV5\nIGFyZSBpbiBvbmUgb2YgdGhlIFBNJ3MgY29uZmlndXJlZCBmZXRjaCBncm91\ncHMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RSZWxhdGlvbnNMb2Fk\nZWQoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQ\nTSgpOwogICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFkZEZldGNoR3JvdXAo\nImcyIik7CgogICAgICAgIC8vIG5vdGU6IGltcG9ydGFudCB0aGUgbzEgaXMg\nKm5vdCogaW4gcG0ncyBjYWNoZSBhdCB0aGlzIHBvaW50LCBzbyB0aGF0CiAg\nICAgICAgLy8gd2Uga25vdyBpdCB0YWtlcyBhbm90aGVyIGRhdGFzdG9yZSB0\ncmlwIHRvIGdldCBvMQoKICAgICAgICAvLyBsb2FkIG8yIGFuZCByZXRyaWV2\nZSBpdHMgc3RhdGUgbWFuYWdlcgogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20gPSBnZXRTdGF0ZU1hbmFnZXIoZ2V0TzIocG0pLCBwbSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbCgiU00gaXMgTlVMTCIsIHNtKTsKCiAgICAgICAg\nLy8gJ2cnIGlzIHRoZSBuYW1lIG9mIGEgMS0xIHJlbGF0aW9uIGZpZWxkIHRv\nIG8xIGluIGNvbmZpZ3VyZWQKICAgICAgICAvLyBmZXRjaCBncm91cCAnZzIn\nOyBtYWtlIHN1cmUgaXQgaXMgbG9hZGVkCiAgICAgICAgaW50IGZpZWxkID0g\nc20uZ2V0TWV0YURhdGEoKS5nZXRGaWVsZCgiZyIpLmdldEluZGV4KCk7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShzbS5nZXRMb2Fk\nZWQoKS5nZXQoZmllbGQpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKG9p\nZDEsCiAgICAgICAgICAgICAgICAoKEZldGNoR3JvdXBUZXN0T2JqZWN0KSBz\nbS5mZXRjaE9iamVjdEZpZWxkKGZpZWxkKSkuZ2V0SWQoKSk7CiAgICAgICAg\nfSBjYXRjaCAoanVuaXQuZnJhbWV3b3JrLkFzc2VydGlvbkZhaWxlZEVycm9y\nIGFmZSkgewogICAgICAgICAgICBidWcoNjIzLCBhZmUsICJPbmUgdG8gb25l\nIG1hcHBpbmdzIGRvIG5vdCB3b3JrIHdpdGggY3VzdG9tICIKICAgICAgICAg\nICAgICAgICsgImZldGNoIGdyb3VwcyIpOwogICAgICAgIH0KICAgIH0KCiAg\nICBwcm90ZWN0ZWQgdm9pZCBjaGVja09iamVjdChPcGVuSlBBRW50aXR5TWFu\nYWdlciBwbSwKICAgICAgICBGZXRjaEdyb3VwVGVzdE9iamVjdCBvLCBib29s\nZWFuIGEsIGJvb2xlYW4gYiwKICAgICAgICBib29sZWFuIGMsIGJvb2xlYW4g\nZCwgYm9vbGVhbiBlLCBib29sZWFuIGYpIHsKICAgICAgICBPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtID0gZ2V0U3RhdGVNYW5hZ2VyKG8sIHBtKTsKICAgICAg\nICBCaXRTZXQgbG9hZGVkID0gc20uZ2V0TG9hZGVkKCk7CgogICAgICAgIEZp\nZWxkTWV0YURhdGFbXSBmbWRzID0gc20uZ2V0TWV0YURhdGEoKS5nZXRGaWVs\nZHMoKTsKICAgICAgICBpbnQgaSA9IDA7CiAgICAgICAgZm9yICg7IGkgPCBm\nbWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChmbWRzW2ldLmdl\ndE5hbWUoKS5lcXVhbHMoImEiKSkKICAgICAgICAgICAgICAgIGFzc2VydEVx\ndWFscyhhLCBsb2FkZWQuZ2V0KGkpKTsKICAgICAgICAgICAgZWxzZSBpZiAo\nZm1kc1tpXS5nZXROYW1lKCkuZXF1YWxzKCJiIikpCiAgICAgICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoYiwgbG9hZGVkLmdldChpKSk7CiAgICAgICAgICAg\nIGVsc2UgaWYgKGZtZHNbaV0uZ2V0TmFtZSgpLmVxdWFscygiYyIpKQogICAg\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGMsIGxvYWRlZC5nZXQoaSkpOwog\nICAgICAgICAgICBlbHNlIGlmIChmbWRzW2ldLmdldE5hbWUoKS5lcXVhbHMo\nImQiKSkKICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhkLCBsb2FkZWQu\nZ2V0KGkpKTsKICAgICAgICAgICAgZWxzZSBpZiAoZm1kc1tpXS5nZXROYW1l\nKCkuZXF1YWxzKCJlIikpCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nZSwgbG9hZGVkLmdldChpKSk7CiAgICAgICAgICAgIGVsc2UgaWYgKGZtZHNb\naV0uZ2V0TmFtZSgpLmVxdWFscygiZiIpKQogICAgICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKGYsIGxvYWRlZC5nZXQoaSkpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwcm90ZWN0ZWQgdm9pZCBjaGVja0NoaWxkT2JqZWN0KE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtLAogICAgICAgIEZldGNoR3JvdXBUZXN0T2JqZWN0\nQ2hpbGQgbywgYm9vbGVhbiBhLCBib29sZWFuIGIsCiAgICAgICAgYm9vbGVh\nbiBjLCBib29sZWFuIGQsIGJvb2xlYW4gZSwgYm9vbGVhbiBmLCBib29sZWFu\nIGNoaWxkQSwKICAgICAgICBib29sZWFuIGNoaWxkQiwgYm9vbGVhbiBjaGls\nZEMsIGJvb2xlYW4gY2hpbGREKSB7CiAgICAgICAgY2hlY2tPYmplY3QocG0s\nIG8sIGEsIGIsIGMsIGQsIGUsIGYpOwoKICAgICAgICBPcGVuSlBBU3RhdGVN\nYW5hZ2VyIHNtID0gZ2V0U3RhdGVNYW5hZ2VyKG8sIHBtKTsKICAgICAgICBC\naXRTZXQgbG9hZGVkID0gc20uZ2V0TG9hZGVkKCk7CgogICAgICAgIEZpZWxk\nTWV0YURhdGFbXSBmbWRzID0gc20uZ2V0TWV0YURhdGEoKS5nZXRGaWVsZHMo\nKTsKICAgICAgICBpbnQgaSA9IDA7CiAgICAgICAgZm9yICg7IGkgPCBmbWRz\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChmbWRzW2ldLmdldE5h\nbWUoKS5lcXVhbHMoImNoaWxkQSIpKQogICAgICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKGNoaWxkQSwgbG9hZGVkLmdldChpKSk7CiAgICAgICAgICAgIGVs\nc2UgaWYgKGZtZHNbaV0uZ2V0TmFtZSgpLmVxdWFscygiY2hpbGRCIikpCiAg\nICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoY2hpbGRCLCBsb2FkZWQuZ2V0\nKGkpKTsKICAgICAgICAgICAgZWxzZSBpZiAoZm1kc1tpXS5nZXROYW1lKCku\nZXF1YWxzKCJjaGlsZEMiKSkKICAgICAgICAgICAgICAgIGFzc2VydEVxdWFs\ncyhjaGlsZEMsIGxvYWRlZC5nZXQoaSkpOwogICAgICAgICAgICBlbHNlIGlm\nIChmbWRzW2ldLmdldE5hbWUoKS5lcXVhbHMoImNoaWxkRCIpKQogICAgICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKGNoaWxkRCwgbG9hZGVkLmdldChpKSk7\nCiAgICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCBGZXRjaEdyb3VwVGVz\ndE9iamVjdCBnZXRPMShPcGVuSlBBRW50aXR5TWFuYWdlciBwbSkgewogICAg\nICAgIHJldHVybiBwbS5maW5kKEZldGNoR3JvdXBUZXN0T2JqZWN0LmNsYXNz\nLCBvaWQxKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgRmV0Y2hHcm91cFRlc3RP\nYmplY3QgZ2V0TzIoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0pIHsKICAgICAg\nICByZXR1cm4gcG0uZmluZChGZXRjaEdyb3VwVGVzdE9iamVjdC5jbGFzcywg\nb2lkMik7CiAgICB9CgogICAgcHJvdGVjdGVkIEZldGNoR3JvdXBUZXN0T2Jq\nZWN0Q2hpbGQgZ2V0QzEoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0pIHsKICAg\nICAgICByZXR1cm4gcG0uZmluZChGZXRjaEdyb3VwVGVzdE9iamVjdENoaWxk\nLmNsYXNzLCBvaWRjMSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUZXN0cyB0\naGF0IG5hbWVkIGZldGNoIGdyb3VwcyBhY3R1YWxseSBicmluZyBpbiB0aGUK\nICAgICAqIG1hbmFnZWQgb2JqZWN0LgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RmV0Y2hHcm91cEluc3RhbnRpYXRlZCgpIHsKICAgICAgICBkZWxl\ndGVBbGwoQXR0YWNoQS5jbGFzcyk7CiAgICAgICAgZGVsZXRlQWxsKEF0dGFj\naEIuY2xhc3MpOwogICAgICAgIGRlbGV0ZUFsbChBdHRhY2hDLmNsYXNzKTsK\nICAgICAgICBkZWxldGVBbGwoQXR0YWNoRC5jbGFzcyk7CiAgICAgICAgZGVs\nZXRlQWxsKEF0dGFjaEUuY2xhc3MpOwogICAgICAgIGRlbGV0ZUFsbChBdHRh\nY2hGLmNsYXNzKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG07\nCgogICAgICAgIHBtID0gZ2V0UE0oKTsKICAgICAgICBzdGFydFR4KHBtKTsK\nICAgICAgICBBdHRhY2hFIGUgPSBuZXcgQXR0YWNoRSgpOwogICAgICAgIEF0\ndGFjaEIgYiA9IG5ldyBBdHRhY2hCKCk7CiAgICAgICAgZS5zZXRCKGIpOwog\nICAgICAgIHBtLnBlcnNpc3QoZSk7CgogICAgICAgIGVuZFR4KHBtKTsKICAg\nICAgICBlbmRFbShwbSk7CgogICAgICAgIE9iamVjdCBvYjsKCiAgICAgICAg\ncG0gPSBnZXRQTSgpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIGFz\nc2VydFNpemUoMCwgcG0uZ2V0TWFuYWdlZE9iamVjdHMoKSk7CiAgICAgICAg\nb2IgPSBwbS5jcmVhdGVFeHRlbnQoQXR0YWNoRS5jbGFzcywgdHJ1ZSkuaXRl\ncmF0b3IoKS5uZXh0KCk7CiAgICAgICAgLy8gbWFrZSBzdXJlIHJlbGF0aW9u\nIGlzIG5vdCBsb2FkZWQKICAgICAgICBhc3NlcnRTaXplKDEsIHBtLmdldE1h\nbmFnZWRPYmplY3RzKCkpOwogICAgICAgIHJvbGxiYWNrVHgocG0pOwogICAg\nICAgIGVuZEVtKHBtKTsKCiAgICAgICAgcG0gPSBnZXRQTSgpOwogICAgICAg\nIHN0YXJ0VHgocG0pOwogICAgICAgIC8vIG5vdyBtYWtlIHN1cmUgd2UgbG9h\nZCByZWxhdGlvbnMKICAgICAgICBwbS5nZXRGZXRjaFBsYW4oKS5hZGRGZXRj\naEdyb3VwKCJhbGwiKTsKICAgICAgICBhc3NlcnRTaXplKDAsIHBtLmdldE1h\nbmFnZWRPYmplY3RzKCkpOwogICAgICAgIG9iID0gcG0uY3JlYXRlRXh0ZW50\nKEF0dGFjaEUuY2xhc3MsIHRydWUpLml0ZXJhdG9yKCkubmV4dCgpOwogICAg\nICAgIC8vIG1ha2Ugc3VyZSByZWxhdGlvbiBpcyBsb2FkZWQKICAgICAgICBh\nc3NlcnRTaXplKDIsIHBtLmdldE1hbmFnZWRPYmplY3RzKCkpOwogICAgICAg\nIHJvbGxiYWNrVHgocG0pOwogICAgICAgIGVuZEVtKHBtKTsKICAgIH0KfQog\n","encoding":"base64"}

