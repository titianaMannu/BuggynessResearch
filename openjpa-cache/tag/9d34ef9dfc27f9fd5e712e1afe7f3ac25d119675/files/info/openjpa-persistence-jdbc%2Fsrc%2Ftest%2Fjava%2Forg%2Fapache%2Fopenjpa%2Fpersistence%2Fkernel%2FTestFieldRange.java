{"sha":"6f684b6f5b9af814ef66775e1b051a160e43e534","node_id":"MDQ6QmxvYjIwNjM2NDo2ZjY4NGI2ZjViOWFmODE0ZWY2Njc3NWUxYjA1MWExNjBlNDNlNTM0","size":13402,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6f684b6f5b9af814ef66775e1b051a160e43e534","content":"LyoKICogVGVzdEZpZWxkUmFuZ2UuamF2YQogKgogKiBDcmVhdGVkIG9uIE9j\ndG9iZXIgMTIsIDIwMDYsIDEwOjE0IEFNCiAqCiAqIFRvIGNoYW5nZSB0aGlz\nIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2VyCiAq\nIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgogKi8KLyoK\nICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9u\nIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vu\nc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRp\nb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNG\nIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UK\nICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsOwoK\naW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlOwppbXBvcnQgamF2YS5tYXRo\nLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGguQmlnSW50ZWdlcjsKaW1w\nb3J0IGphdmEudXRpbC5EYXRlOwoKCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21tb24uYXBwcy5BbGxGaWVsZFR5\ncGVzVGVzdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsKaW1wb3J0IGp1bml0\nLmZyYW1ld29yay5Bc3NlcnQ7CmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuQXNz\nZXJ0aW9uRmFpbGVkRXJyb3I7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwoKcHVibGljIGNs\nYXNzIFRlc3RGaWVsZFJhbmdlIGV4dGVuZHMgQmFzZUtlcm5lbFRlc3QgewoK\nICAgIHByb3RlY3RlZCBzdGF0aWMgU3RyaW5nIFJBTkRPTV9TVFJJTkcgPQog\nICAgICAgICJUaGlzIGlzIG15IHRlc3QgU3RyaW5nIHdpdGggYWxsICIKICAg\nICAgICAgICAgKyAia2luZHMgb2Ygd2llcmQgY2hhcmFjdGVyczogIgogICAg\nICAgICAgICArICIhQEAjJFxcJV4mXCIqKCktPVxcfFwiXCJcIlwiXCIrXy8/\nLj4sPH5gIgogICAgICAgICAgICArICInJycnJycnJycnJ1xcXFxcXFxcXFxc\nXFxcXFxcXFxcXFxcXFxcXFwiCiAgICAgICAgICAgICsgIicnJycnJycnJycn\nJ1xcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFwiCiAgICAgICAgICAgICsg\nIiFAQCMkXFwlXiZcIiooKS09XFx8K18vPy4+LDx+YCI7CgogICAgLyoqCiAg\nICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIFRlc3RGaWVsZFJhbmdl\nCiAgICAgKi8KICAgIHB1YmxpYyBUZXN0RmllbGRSYW5nZSgpIHsKICAgIH0K\nCiAgICBwdWJsaWMgVGVzdEZpZWxkUmFuZ2UoU3RyaW5nIG5hbWUpIHsKICAg\nICAgICBzdXBlcihuYW1lKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRV\ncCgpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIu\nc2V0VXAoKTsKICAgICAgICBkZWxldGVBbGwoQWxsRmllbGRUeXBlc1Rlc3Qu\nY2xhc3MpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTYXZlU3RhdGUo\nKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGFsbEZpZWxk\nU2F2ZVN0YXRlKAogICAgICAgICAgICAoaW50KSAyNTk2NDUsCiAgICAgICAg\nICAgIChzaG9ydCkgNTA4NDksCiAgICAgICAgICAgIChsb25nKSAyMzQ5ODQ3\nOTgyTCwKICAgICAgICAgICAgKGZsb2F0KSA0MzI3MzQyMy4wMjM0NzIzRiwK\nICAgICAgICAgICAgKGRvdWJsZSkgMzQ2NzguMDIzODQ3MjNELAogICAgICAg\nICAgICAoYnl0ZSkgLTEyMCwKICAgICAgICAgICAgKGJvb2xlYW4pIHRydWUs\nCiAgICAgICAgICAgIChjaGFyKSAnJScsCiAgICAgICAgICAgIChEYXRlKSBu\nZXcgRGF0ZSgpLAogICAgICAgICAgICAoU2VyaWFsaXphYmxlKSBuZXcgU3Ry\naW5nQnVmZmVyKDUwMDApLAogICAgICAgICAgICAoU3RyaW5nKSBSQU5ET01f\nU1RSSU5HLAogICAgICAgICAgICByYW5kb21CaWdJbnRlZ2VyKCksCiAgICAg\nICAgICAgIHJhbmRvbUJpZ0RlY2ltYWwoKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUZXN0IHRvIG1ha2Ugc3VyZSBhbGwgdGhlIG51bWVyaWMgZmllbGRz\nIGNhbiBhY2NlcHQgdGhlIG1heGltdW0KICAgICAqIHZhbHVlcyBmb3IgdGhl\naXIgZGF0YSBzaXplLiBOb3RlIHRoYXQgd2Ugc3VidHJhY3Qgb25lIGZyb20K\nICAgICAqIGVhY2ggb2YgdGhlIHZhbHVlcyBiZWNhdXNlIHNvbWUgZGF0YWJh\nc2VzIChsaWtlIEluc3RhbnREQikKICAgICAqIG1heSBjb25zaWRlciB0aGVt\nIHRvIGJlIGVxdWl2YWxlbnQgdG8gTlVMTC4KICAgICAqIEZpeE1lOiBIYW5n\ncyBmb3Igc29tZSBteXN0ZXJpb3VzIHJlYXNvbi4gYW9rZWtlCiAgICAgKi8K\nCi8vICAgIHB1YmxpYyB2b2lkIHRlc3RMYXJnZU51bWJlcnMoKQovLyAgICB0\naHJvd3MgRXhjZXB0aW9uIHsKLy8gICAgICAgIHRyeSB7Ci8vICAgICAgICAg\nICAgYWxsRmllbGRTYXZlU3RhdGUoCi8vICAgICAgICAgICAgICAgICAgICAo\naW50KSAoSW50ZWdlci5NQVhfVkFMVUUgLSAxKSwKLy8gICAgICAgICAgICAg\nICAgICAgIChzaG9ydCkgKFNob3J0Lk1BWF9WQUxVRSAtIDEpLAovLyAgICAg\nICAgICAgICAgICAgICAgKGxvbmcpIChMb25nLk1BWF9WQUxVRSAtIDFsKSwK\nLy8gICAgICAgICAgICAgICAgICAgIChmbG9hdCkgKEZsb2F0Lk1BWF9WQUxV\nRSAtIDEuMGYpLAovLyAgICAgICAgICAgICAgICAgICAgKGRvdWJsZSkgKERv\ndWJsZS5NQVhfVkFMVUUgLSAxLjBkKSwKLy8gICAgICAgICAgICAgICAgICAg\nIChieXRlKSAoQnl0ZS5NQVhfVkFMVUUpLAovLyAgICAgICAgICAgICAgICAg\nICAgKGJvb2xlYW4pIHRydWUsCi8vICAgICAgICAgICAgICAgICAgICAoY2hh\ncikgJ3EnLAovLyAgICAgICAgICAgICAgICAgICAgKERhdGUpIG5ldyBEYXRl\nKCksCi8vICAgICAgICAgICAgICAgICAgICAoU2VyaWFsaXphYmxlKSBuZXcg\nU3RyaW5nQnVmZmVyKDUwMDApLAovLyAgICAgICAgICAgICAgICAgICAgKFN0\ncmluZykgUkFORE9NX1NUUklORywKLy8gICAgICAgICAgICAgICAgICAgIHJh\nbmRvbUJpZ0ludGVnZXIoKSwKLy8gICAgICAgICAgICAgICAgICAgIHJhbmRv\nbUJpZ0RlY2ltYWwoKSk7Ci8vICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUg\nZSkgewovLyAgICAgICAgICAgIGJ1ZygzLCBlLCAiZG91YmxlcyBhbmQgZmxv\nYXRzIik7Ci8vICAgICAgICB9Ci8vICAgIH0KCiAgICAvKioKICAgICAqIFRl\nc3QgdG8gbWFrZSBzdXJlIGFsbCB0aGUgbnVtZXJpYyBmaWVsZHMgY2FuIGJl\nIHNldCB0bwogICAgICogdmVyeSBsb3cgdmFsdWVzLiBXZSBhZGQgb25lIHRv\nIHRoZSBtaW5pbWltIHZhbHVlIGJlY2F1c2UKICAgICAqIHNvbWUgZGF0YWJh\nc2VzIChzdWNoIGFzIEluc3RhbnREQikgY29uc2lkZXIgdGhlIE1JTl9WQUxV\nRQogICAgICogdG8gYmUgZXF1aXZhbGVudCB0byBudWxsLiBUaGlzIGlzIGFy\nZ3VhYmx5IGEgYnVnLCBidXQKICAgICAqIG5vdCBhIGtpbGxlciBvbmUuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RMYXJnZU51bWJlcnNOZWdhdGl2\nZSgpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgYWxsRmll\nbGRTYXZlU3RhdGUoCiAgICAgICAgICAgIChpbnQpIChJbnRlZ2VyLk1JTl9W\nQUxVRSArIDEpLAogICAgICAgICAgICAoc2hvcnQpIChTaG9ydC5NSU5fVkFM\nVUUgKyAxKSwKICAgICAgICAgICAgKGxvbmcpIChMb25nLk1JTl9WQUxVRSAr\nIDFsKSwKICAgICAgICAgICAgKGZsb2F0KSAoRmxvYXQuTUlOX1ZBTFVFICsg\nMS4wZiksCiAgICAgICAgICAgIChkb3VibGUpIChEb3VibGUuTUlOX1ZBTFVF\nICsgMS4wZCksCiAgICAgICAgICAgIChieXRlKSAoQnl0ZS5NSU5fVkFMVUUg\nKyAxKSwKICAgICAgICAgICAgKGJvb2xlYW4pIHRydWUsCiAgICAgICAgICAg\nIChjaGFyKSAncScsCiAgICAgICAgICAgIChEYXRlKSBuZXcgRGF0ZSgpLAog\nICAgICAgICAgICAoU2VyaWFsaXphYmxlKSBuZXcgU3RyaW5nQnVmZmVyKDUw\nMDApLAogICAgICAgICAgICAoU3RyaW5nKSBSQU5ET01fU1RSSU5HLAogICAg\nICAgICAgICByYW5kb21CaWdJbnRlZ2VyKCksCiAgICAgICAgICAgIHJhbmRv\nbUJpZ0RlY2ltYWwoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdERv\ndWJsZUFuZEZsb2F0UHJlY2lzaW9uKCkKICAgICAgICB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICBhbGxGaWVsZFNhdmVTdGF0ZSgKICAgICAgICAgICAg\nKGludCkgKDApLAogICAgICAgICAgICAoc2hvcnQpICgwKSwKICAgICAgICAg\nICAgKGxvbmcpICgwbCksCiAgICAgICAgICAgIChmbG9hdCkgKDEwLjBmIC8g\nMy4wZiksCiAgICAgICAgICAgIChkb3VibGUpICgxMDAuMGQgLyAzLjBkKSwK\nICAgICAgICAgICAgKGJ5dGUpICgwKSwKICAgICAgICAgICAgKGJvb2xlYW4p\nIHRydWUsCiAgICAgICAgICAgIChjaGFyKSAncScsCiAgICAgICAgICAgIChE\nYXRlKSBuZXcgRGF0ZSgpLAogICAgICAgICAgICAoU2VyaWFsaXphYmxlKSBu\nZXcgU3RyaW5nQnVmZmVyKDUwMDApLAogICAgICAgICAgICAoU3RyaW5nKSBS\nQU5ET01fU1RSSU5HLAogICAgICAgICAgICByYW5kb21CaWdJbnRlZ2VyKCks\nCiAgICAgICAgICAgIHJhbmRvbUJpZ0RlY2ltYWwoKSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdFplcm9OdW1iZXJzKCkKICAgICAgICB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICBhbGxGaWVsZFNhdmVTdGF0ZSgKICAgICAg\nICAgICAgKGludCkgKDApLAogICAgICAgICAgICAoc2hvcnQpICgwKSwKICAg\nICAgICAgICAgKGxvbmcpICgwbCksCiAgICAgICAgICAgIChmbG9hdCkgKDAu\nMGYpLAogICAgICAgICAgICAoZG91YmxlKSAoMC4wZCksCiAgICAgICAgICAg\nIChieXRlKSAoMCksCiAgICAgICAgICAgIChib29sZWFuKSB0cnVlLAogICAg\nICAgICAgICAoY2hhcikgJ3EnLAogICAgICAgICAgICAoRGF0ZSkgbmV3IERh\ndGUoKSwKICAgICAgICAgICAgKFNlcmlhbGl6YWJsZSkgbmV3IFN0cmluZ0J1\nZmZlcig1MDAwKSwKICAgICAgICAgICAgKFN0cmluZykgUkFORE9NX1NUUklO\nRywKICAgICAgICAgICAgbmV3IEJpZ0ludGVnZXIoIjAiKSwKICAgICAgICAg\nICAgbmV3IEJpZ0RlY2ltYWwoIjAuMCIpKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0TG93RGF0ZSgpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7\nCiAgICAgICAgZGF0ZVRlc3QoMCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdEN1ckRhdGUoKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGRhdGVUZXN0KFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SGlnaERhdGUoKQogICAgICAgIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8v\nIHBvc3RncmVzIHdpbGwgc29tZXRpbWVzIHN0b3JlIHRoZSBTdHJpbmcgImlu\ndmFsaWQiIGlmIHRoZQogICAgICAgICAgICAvLyBkYXRlIGlzIHRvbyBoaWdo\nLCB3aGljaCB3aWxsIHByZXZlbnQgdXMgZnJvbSBldmVuIHJlYWRpbmcKICAg\nICAgICAgICAgLy8gdGhlIHJlY29yZHMgdGhhdCBjb250YWluIHRoaXMgY29y\ncnVwdCB2YWx1ZSAodGh1cyBicmVha2luZwogICAgICAgICAgICAvLyBhbnkg\nc3Vic2VxdWVudCBhdHRlbXB0cyB0byByZWFkIGluc3RhbmNlcyBvZiBBbGxG\naWVsZFR5cGVzVGVzdCkuCiAgICAgICAgICAgIC8vIEFuIEV4YW1wbGUgb2Yg\nYSBkYXRlIGxpa2UgdGhpcyBpczoKICAgICAgICAgICAgLy8gICAoVGltZXN0\nYW1wKSAyMDM4LTAyLTA4IDIyOjIwOjA3LjY1CiAgICAgICAgICAgIGlmIChn\nZXRDdXJyZW50UGxhdGZvcm0oKSA9PQogICAgICAgICAgICAgICAgQWJzdHJh\nY3RUZXN0Q2FzZS5QbGF0Zm9ybS5QT1NUR1JFU1FMKQogICAgICAgICAgICAg\nICAgZmFpbCgiUG9zdGdyZXMgY2FuJ3QgZXZlbiB0cnkgdG8gc3RvcmUgYSBo\naWdoIGRhdGUiKTsKCiAgICAgICAgICAgIGRhdGVUZXN0KFN5c3RlbS5jdXJy\nZW50VGltZU1pbGxpcygpICogMik7CiAgICAgICAgfSBjYXRjaCAoQXNzZXJ0\naW9uRmFpbGVkRXJyb3IgZSkgewogICAgICAgICAgICBidWcoNiwgZSwgIlNv\nbWUgZGF0YSBzdG9yZXMgY2Fubm90IGRlYWwgIgogICAgICAgICAgICAgICAg\nKyAid2l0aCB2ZXJ5IGhpZ2ggZGF0ZXMiKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTb21lIGRhdGUgaW5zdGFuY2VzIHRoYXQgaGF2ZSBi\nZWVuIGtub3duIHRvIGhhdmUgcHJvYmxlbXMuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RQcm9ibGVtYXRpY0RhdGVzKCkKICAgICAgICB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICBkYXRlVGVzdCgxMDQ3NzQ0NjM5KTsgICAg\nICAgIC8vIHBvaW50YmFzZSBoYWQgcHJvYnMgd2l0aCB0aGlzCiAgICB9Cgog\nICAgcHJpdmF0ZSB2b2lkIGRhdGVUZXN0KGxvbmcgbCkKICAgICAgICB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBEYXRlIGQgPSBuZXcgRGF0ZShsKTsK\nCiAgICAgICAgYWxsRmllbGRTYXZlU3RhdGUoCiAgICAgICAgICAgIChpbnQp\nIDEwLAogICAgICAgICAgICAoc2hvcnQpIDEwLAogICAgICAgICAgICAobG9u\nZykgMTAsCiAgICAgICAgICAgIChmbG9hdCkgMCwKICAgICAgICAgICAgKGRv\ndWJsZSkgMCwKICAgICAgICAgICAgKGJ5dGUpIDEwLAogICAgICAgICAgICAo\nYm9vbGVhbikgdHJ1ZSwKICAgICAgICAgICAgKGNoYXIpICd4JywKICAgICAg\nICAgICAgKERhdGUpIGQsCiAgICAgICAgICAgIChTZXJpYWxpemFibGUpIG5l\ndyBTdHJpbmdCdWZmZXIoMTApLAogICAgICAgICAgICAoU3RyaW5nKSBSQU5E\nT01fU1RSSU5HLAogICAgICAgICAgICBuZXcgQmlnSW50ZWdlcigiMCIpLAog\nICAgICAgICAgICBuZXcgQmlnRGVjaW1hbCgiMCIpKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBhbGxGaWVsZFNhdmVTdGF0ZShpbnQgdGVzdGludCwgc2hv\ncnQgdGVzdHNob3J0LCBsb25nIHRlc3Rsb25nLAogICAgICAgIGZsb2F0IHRl\nc3RmbG9hdCwgZG91YmxlIHRlc3Rkb3VibGUsIGJ5dGUgdGVzdGJ5dGUsCiAg\nICAgICAgYm9vbGVhbiB0ZXN0Ym9vbGVhbiwgY2hhciB0ZXN0Y2hhciwgRGF0\nZSB0ZXN0RGF0ZSwKICAgICAgICBTZXJpYWxpemFibGUgdGVzdE9iamVjdCwg\nU3RyaW5nIHRlc3RTdHJpbmcsCiAgICAgICAgQmlnSW50ZWdlciB0ZXN0Qmln\nSW50ZWdlciwgQmlnRGVjaW1hbCB0ZXN0QmlnRGVjaW1hbCkKICAgICAgICB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBh\nbGxGaWVsZFNhdmVTdGF0ZUludGVybmFsKHRlc3RpbnQsIHRlc3RzaG9ydCwg\ndGVzdGxvbmcsCiAgICAgICAgICAgICAgICB0ZXN0ZmxvYXQsIHRlc3Rkb3Vi\nbGUsIHRlc3RieXRlLAogICAgICAgICAgICAgICAgdGVzdGJvb2xlYW4sIHRl\nc3RjaGFyLCB0ZXN0RGF0ZSwKICAgICAgICAgICAgICAgIHRlc3RPYmplY3Qs\nIHRlc3RTdHJpbmcsIHRlc3RCaWdJbnRlZ2VyLCB0ZXN0QmlnRGVjaW1hbCk7\nCiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgIC8vIG1ha2UgKnN1cmUqIHdlIGRvIG5vdCBsZWF2ZSBhIHRy\nYW5zYWN0aW9uIG9wZW4KICAgICAgICAgICAgICAgIHJvbGxiYWNrVHgoZ2V0\nUE0odHJ1ZSwgZmFsc2UpKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIHQpIHsKCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAg\ncHVibGljIHZvaWQgYWxsRmllbGRTYXZlU3RhdGVJbnRlcm5hbCgKICAgICAg\nICBpbnQgdGVzdGludCwgc2hvcnQgdGVzdHNob3J0LCBsb25nIHRlc3Rsb25n\nLAogICAgICAgIGZsb2F0IHRlc3RmbG9hdCwgZG91YmxlIHRlc3Rkb3VibGUs\nIGJ5dGUgdGVzdGJ5dGUsCiAgICAgICAgYm9vbGVhbiB0ZXN0Ym9vbGVhbiwg\nY2hhciB0ZXN0Y2hhciwgRGF0ZSB0ZXN0RGF0ZSwKICAgICAgICBTZXJpYWxp\nemFibGUgdGVzdE9iamVjdCwgU3RyaW5nIHRlc3RTdHJpbmcsCiAgICAgICAg\nQmlnSW50ZWdlciB0ZXN0QmlnSW50ZWdlciwgQmlnRGVjaW1hbCB0ZXN0Qmln\nRGVjaW1hbCkKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKHRydWUsIGZhbHNlKTsK\nICAgICAgICBzdGFydFR4KHBtKTsKCiAgICAgICAgQWxsRmllbGRUeXBlc1Rl\nc3QgdGVzdCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOwogICAgICAgIHBt\nLnBlcnNpc3QodGVzdCk7CiAgICAgICAgT2JqZWN0IHRlc3RJRCA9IHBtLmdl\ndE9iamVjdElkKHRlc3QpOwoKICAgICAgICB0ZXN0LnNldFRlc3RpbnQodGVz\ndGludCk7CiAgICAgICAgdGVzdC5zZXRUZXN0bG9uZyh0ZXN0bG9uZyk7CiAg\nICAgICAgdGVzdC5zZXRUZXN0ZG91YmxlKHRlc3Rkb3VibGUpOwogICAgICAg\nIHRlc3Quc2V0VGVzdHNob3J0KHRlc3RzaG9ydCk7CiAgICAgICAgdGVzdC5z\nZXRUZXN0ZmxvYXQodGVzdGZsb2F0KTsKICAgICAgICB0ZXN0LnNldFRlc3Ri\neXRlKHRlc3RieXRlKTsKICAgICAgICB0ZXN0LnNldFRlc3Rib29sZWFuKHRl\nc3Rib29sZWFuKTsKICAgICAgICB0ZXN0LnNldFRlc3RjaGFyKHRlc3RjaGFy\nKTsKICAgICAgICB0ZXN0LnNldFRlc3RTdHJpbmcodGVzdFN0cmluZyk7CiAg\nICAgICAgdGVzdC5zZXRUZXN0RGF0ZSh0ZXN0RGF0ZSk7CiAgICAgICAgdGVz\ndC5zZXRUZXN0T2JqZWN0KHRlc3RPYmplY3QpOwogICAgICAgIHRlc3Quc2V0\nVGVzdEJpZ0ludGVnZXIodGVzdEJpZ0ludGVnZXIpOwogICAgICAgIHRlc3Qu\nc2V0VGVzdEJpZ0RlY2ltYWwodGVzdEJpZ0RlY2ltYWwpOwoKICAgICAgICB0\ncnkgewogICAgICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBF\neGNlcHRpb24gJiYKICAgICAgICAgICAgICAgICgoRXhjZXB0aW9uKSBlKS5n\nZXRNZXNzYWdlKCkuaW5kZXhPZgogICAgICAgICAgICAgICAgICAgICgiTWF4\naW11bSBsZW5ndGggaXMgODAwMCIpICE9IC0xKSB7CiAgICAgICAgICAgICAg\nICBidWcoQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5TUUxTRVJWRVIsIDUs\nIGUsCiAgICAgICAgICAgICAgICAgICAgIlNRTFNlcnZlciBjYW5ub3QgZGVh\nbCIKICAgICAgICAgICAgICAgICAgICAgICAgKyAiIHdpdGggbnVtYmVycyB3\naXRoIG1vcmUgdGhhbiA4MDAwIGRpZ2l0cyIpOwogICAgICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KCiAgICAgICAgZW5kRW0ocG0pOwoKICAgICAgICAvL2Fzc2Vy\ndFBlcnNpc3RlbnQgKHRlc3QsIHRydWUsIGZhbHNlLCBmYWxzZSwgZmFsc2Up\nOwoKICAgICAgICBwbSA9IGdldFBNKHRydWUsIGZhbHNlKTsKICAgICAgICBz\ndGFydFR4KHBtKTsKCiAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgcmV0cmll\ndmVkT2JqZWN0ID0KICAgICAgICAgICAgKEFsbEZpZWxkVHlwZXNUZXN0KSBw\nbS5maW5kKEFsbEZpZWxkVHlwZXNUZXN0LmNsYXNzLCB0ZXN0SUQpOwoKICAg\nICAgICBhc3NlcnRFcXVhbHMoIkZpZWxkIHR5cGUgaW50IiwgdGVzdGludCwK\nICAgICAgICAgICAgcmV0cmlldmVkT2JqZWN0LmdldFRlc3RpbnQoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJGaWVsZCB0eXBlIHNob3J0IiwgdGVzdHNo\nb3J0LAogICAgICAgICAgICByZXRyaWV2ZWRPYmplY3QuZ2V0VGVzdHNob3J0\nKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiRmllbGQgdHlwZSBib29sZWFu\nIiwgdGVzdGJvb2xlYW4sCiAgICAgICAgICAgIHJldHJpZXZlZE9iamVjdC5n\nZXRUZXN0Ym9vbGVhbigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIkZpZWxk\nIHR5cGUgY2hhciIsIHRlc3RjaGFyLAogICAgICAgICAgICByZXRyaWV2ZWRP\nYmplY3QuZ2V0VGVzdGNoYXIoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJG\naWVsZCB0eXBlIGxvbmciLCB0ZXN0bG9uZywKICAgICAgICAgICAgcmV0cmll\ndmVkT2JqZWN0LmdldFRlc3Rsb25nKCkpOwoKICAgICAgICBhc3NlcnRFcXVh\nbHMoIkZpZWxkIHR5cGUgYnl0ZSIsIHRlc3RieXRlLAogICAgICAgICAgICBy\nZXRyaWV2ZWRPYmplY3QuZ2V0VGVzdGJ5dGUoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJGaWVsZCB0eXBlIFN0cmluZyIsIHRlc3RTdHJpbmcsCiAgICAg\nICAgICAgIHJldHJpZXZlZE9iamVjdC5nZXRUZXN0U3RyaW5nKCkpOwoKICAg\nICAgICBpbnQgaTEgPSAoaW50KSAodGVzdERhdGUuZ2V0VGltZSgpIC8gMTAw\nMCk7CiAgICAgICAgaW50IGkyID0gKGludCkgKHJldHJpZXZlZE9iamVjdC5n\nZXRUZXN0RGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApOwoKICAgICAgICBpbnQg\ndGVzdERhdGVEYXkgPSB0ZXN0RGF0ZS5nZXREYXkoKTsKICAgICAgICBpbnQg\ndGVzdERhdGVNb250aCA9IHRlc3REYXRlLmdldE1vbnRoKCk7CiAgICAgICAg\naW50IHRlc3REYXRlWWVhciA9IHRlc3REYXRlLmdldFllYXIoKTsKCiAgICAg\nICAgaW50IHJldHJpZXZlZE9iamVjdERheSA9IHJldHJpZXZlZE9iamVjdC5n\nZXRUZXN0RGF0ZSgpLmdldERheSgpOwogICAgICAgIGludCByZXRyaWV2ZWRP\nYmplY3RNb250aCA9IHJldHJpZXZlZE9iamVjdC5nZXRUZXN0RGF0ZSgpLmdl\ndE1vbnRoKCk7CiAgICAgICAgaW50IHJldHJpZXZlZE9iamVjdFllYXIgPSBy\nZXRyaWV2ZWRPYmplY3QuZ2V0VGVzdERhdGUoKS5nZXRZZWFyKCk7CgogICAg\nICAgIFN5c3RlbS5vdXQucHJpbnRsbigiaTEgOiAiICsgaTEgKyAiXG5pMiA6\nICIgKyBpMik7CgogICAgICAgIC8vQ1IzNDYxNjIuIEluIHRoaXMgQ1IsIGl0\nIHdhcyBzdGF0ZWQgdGhhdCBAVGVtcG9yYWwoREFURSkgZmllbGRzIHdpbGwg\nYmUgZXF1YWwgZm9yIHllYXIsIG1vbnRoLCBkYXkgYnV0IG5vdCBmb3IgaG91\ncnMsIAogICAgICAgIC8vbWludXRlcywgc2Vjb25kcy4gU28sIHdlIHJlbW92\nZWQgdGhlIHRpbWUgY2hlY2sgYW5kIGNoZWNrZWQgb25seSBmb3IgdGhlIGVx\ndWFsaXR5IG9mIGRheSwgbW9udGggYW5kIHllYXIKCiAgICAgICAgLyogYXNz\nZXJ0RXF1YWxzKCJGaWVsZCB0eXBlIERhdGU6ICIKICAgICArIHRlc3REYXRl\nLmdldFRpbWUoKSArICIhPSIKICAgICArIHJldHJpZXZlZE9iamVjdC5nZXRU\nZXN0RGF0ZSgpLmdldFRpbWUoKQogICAgICsgIlsiICsgbmV3IERhdGUodGVz\ndERhdGUuZ2V0VGltZSgpKSArICIgIT0gIgogICAgICsgbmV3IERhdGUocmV0\ncmlldmVkT2JqZWN0LmdldFRlc3REYXRlKCkuZ2V0VGltZSgpKSArICJdIiwK\nICAgICAoaW50KSAodGVzdERhdGUuZ2V0VGltZSgpIC8gMTAwMCksCiAgICAg\nKGludCkgKHJldHJpZXZlZE9iamVjdC5nZXRUZXN0RGF0ZSgpLmdldFRpbWUo\nKSAvIDEwMDApKTsqLwoKICAgICAgICBpZiAoKHRlc3REYXRlRGF5ICE9IHJl\ndHJpZXZlZE9iamVjdERheSkgfHwKICAgICAgICAgICAgKHRlc3REYXRlTW9u\ndGggIT0gcmV0cmlldmVkT2JqZWN0TW9udGgpIHx8CiAgICAgICAgICAgICh0\nZXN0RGF0ZVllYXIgIT0gcmV0cmlldmVkT2JqZWN0WWVhcikpIHsKICAgICAg\nICAgICAgQXNzZXJ0LmZhaWwoCiAgICAgICAgICAgICAgICAiRmllbGQgdHlw\nZSBEYXRlIG5vdCBzdG9yZWQgcHJvcGVybHkuIE9uZSBvciBtb3JlIG9mIHRo\nZSBjb21wb25lbnRzIG9mIHRoZSBkYXRlIChkYXksIG1vbnRoIG9yIHllYXIp\nIGRvIG5vdCBtYXRjaC4gXG4iICsKICAgICAgICAgICAgICAgICAgICAiIFZh\nbHVlIHRoYXQgc2hvdWxkIGJlIHN0b3JlZCA6ICIgKyB0ZXN0RGF0ZS50b0dN\nVFN0cmluZygpICsKICAgICAgICAgICAgICAgICAgICAiLiBcblZhbHVlIHRo\nYXQgaXMgYWN0dWFsbHkiICsKICAgICAgICAgICAgICAgICAgICAic3RvcmVk\nIDogIiArIHJldHJpZXZlZE9iamVjdC5nZXRUZXN0RGF0ZSgpLnRvR01UU3Ry\naW5nKCkpOwogICAgICAgIH0KICAgICAgICAvL2Fzc2VydEVxdWFscyAoIkZp\nZWxkIHR5cGUgT2JqZWN0IiwgdGVzdE9iamVjdCwKICAgICAgICAvL3JldHJp\nZXZlZE9iamVjdC5nZXRUZXN0T2JqZWN0ICgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoIkZpZWxkIHR5cGUgQmlnSW50ZWdlciIsIHRlc3RCaWdJbnRlZ2Vy\nLAogICAgICAgICAgICByZXRyaWV2ZWRPYmplY3QuZ2V0VGVzdEJpZ0ludGVn\nZXIoKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncygiRmllbGQgdHlwZSBCaWdEZWNpbWFsIChCaWdJbnRlZ2VyIHBhcnQpIiwK\nICAgICAgICAgICAgICAgIHRlc3RCaWdEZWNpbWFsLnRvQmlnSW50ZWdlcigp\nLAogICAgICAgICAgICAgICAgcmV0cmlldmVkT2JqZWN0LmdldFRlc3RCaWdE\nZWNpbWFsKCkudG9CaWdJbnRlZ2VyKCkpOwoKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJGaWVsZCB0eXBlIEJpZ0RlY2ltYWwiLAogICAgICAgICAgICAg\nICAgdGVzdEJpZ0RlY2ltYWwsCiAgICAgICAgICAgICAgICByZXRyaWV2ZWRP\nYmplY3QuZ2V0VGVzdEJpZ0RlY2ltYWwoKSk7CgogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoIkZpZWxkIHR5cGUgZmxvYXQiLCB0ZXN0ZmxvYXQsCiAgICAg\nICAgICAgICAgICByZXRyaWV2ZWRPYmplY3QuZ2V0VGVzdGZsb2F0KCksIDAu\nMDFmKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJGaWVsZCB0eXBlIGRv\ndWJsZSIsIHRlc3Rkb3VibGUsCiAgICAgICAgICAgICAgICByZXRyaWV2ZWRP\nYmplY3QuZ2V0VGVzdGRvdWJsZSgpLCAwLjAxZCk7CiAgICAgICAgfSBjYXRj\naCAoQXNzZXJ0aW9uRmFpbGVkRXJyb3IgYWZlKSB7CiAgICAgICAgICAgIGJ1\nZygzLCBhZmUsCiAgICAgICAgICAgICAgICAiRG91YmxlcyBhbmQgRmxvYXRz\nIGxvc2UgcHJlY2lzaW9uIGluIHNvbWUgZGF0YSBzdG9yZXMiKTsKICAgICAg\nICB9CgogICAgICAgIHJvbGxiYWNrVHgocG0pOwogICAgfQp9Cg==\n","encoding":"base64"}

