{"sha":"888d1569fcff36a987af4f691cedda0e187bc8eb","node_id":"MDQ6QmxvYjIwNjM2NDo4ODhkMTU2OWZjZmYzNmE5ODdhZjRmNjkxY2VkZGEwZTE4N2JjOGVi","size":9459,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/888d1569fcff36a987af4f691cedda0e187bc8eb","content":"LyoKICogVGVzdEluc3RhbmNlQ2FsbGJhY2tzLmphdmEKICoKICogQ3JlYXRl\nZCBvbiBPY3RvYmVyIDEyLCAyMDA2LCAxOjE5IFBNCiAqCiAqIFRvIGNoYW5n\nZSB0aGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5h\nZ2VyCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgog\nKi8KCi8qCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFj\naGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1\naXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGlu\nZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2Ug\naXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9V\nVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVp\ndGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lv\nbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAK\nICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtl\ncm5lbDsKCgoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5rZXJuZWwuY29tbW9uLmFwcHMuSW5zdGFuY2VDYWxsYmFja3NUZXN0Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5j\nb21tb24uYXBwcy5SdW50aW1lVGVzdDE7CmltcG9ydCBqdW5pdC5mcmFtZXdv\ncmsuQXNzZXJ0aW9uRmFpbGVkRXJyb3I7CgppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwoKcHVi\nbGljIGNsYXNzIFRlc3RJbnN0YW5jZUNhbGxiYWNrcyBleHRlbmRzIEJhc2VL\nZXJuZWxUZXN0IHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgQ09N\nTUlUID0gMDsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBGTFVTSCA9\nIDE7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgUFJFU1RPUkUgPSAy\nOwoKICAgIHByaXZhdGUgT3BlbkpQQUVudGl0eU1hbmFnZXIgX3BtID0gbnVs\nbDsKICAgIHByaXZhdGUgSW5zdGFuY2VDYWxsYmFja3NUZXN0IF9jYWxsYmFj\na3MgPSBudWxsOwoKICAgIHB1YmxpYyBUZXN0SW5zdGFuY2VDYWxsYmFja3Mo\nU3RyaW5nIG5hbWUpIHsKICAgICAgICBzdXBlcihuYW1lKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdElu\nc3RhbmNlQ2FsbGJhY2tzCiAgICAgKi8KICAgIHB1YmxpYyBUZXN0SW5zdGFu\nY2VDYWxsYmFja3MoKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VXAo\nKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBkZWxldGVBbGwoSW5zdGFu\nY2VDYWxsYmFja3NUZXN0LmNsYXNzKTsKICAgICAgICBkZWxldGVBbGwoUnVu\ndGltZVRlc3QxLmNsYXNzKTsKICAgICAgICBfcG0gPSBnZXRQTSh0cnVlLCB0\ncnVlKTsKICAgICAgICBzdGFydFR4KF9wbSk7CiAgICAgICAgX2NhbGxiYWNr\ncyA9IG5ldyBJbnN0YW5jZUNhbGxiYWNrc1Rlc3QoKTsKICAgICAgICBfY2Fs\nbGJhY2tzLnNldFN0cmluZ0ZpZWxkKCJmb28iKTsKICAgICAgICBfcG0ucGVy\nc2lzdChfY2FsbGJhY2tzKTsKICAgICAgICBPYmplY3QgaWQgPSBfcG0uZ2V0\nT2JqZWN0SWQoX2NhbGxiYWNrcyk7CiAgICAgICAgZW5kVHgoX3BtKTsKICAg\nICAgICBlbmRFbShfcG0pOwoKICAgICAgICAvLyByZS1maW5kIHdpdGggZGlm\nZmVyZW50IFBNCiAgICAgICAgX3BtID0gZ2V0UE0oKTsKICAgICAgICBfY2Fs\nbGJhY2tzID0KICAgICAgICAgICAgKEluc3RhbmNlQ2FsbGJhY2tzVGVzdCkg\nX3BtLmZpbmQoSW5zdGFuY2VDYWxsYmFja3NUZXN0LmNsYXNzLCBpZCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVhckRvd24oKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICByb2xsYmFja1R4KF9wbSk7CiAgICAgICAgZW5kRW0o\nX3BtKTsKICAgICAgICBzdXBlci50ZWFyRG93bigpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RQb3N0TG9hZCgpIHsKICAgICAgICBfY2FsbGJhY2tz\nLmdldFN0cmluZ0ZpZWxkKCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShfY2FsbGJh\nY2tzLnBvc3RMb2FkQ2FsbGVkKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UHJlU3RvcmUoKSB7CiAgICAgICAgcHJlU3RvcmVUZXN0KENPTU1JVCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFByZVN0b3JlV2l0aEZsdXNo\nKCkgewogICAgICAgIHByZVN0b3JlVGVzdChGTFVTSCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdFByZVN0b3JlV2l0aFByZVN0b3JlKCkgewogICAg\nICAgIHByZVN0b3JlVGVzdChQUkVTVE9SRSk7CiAgICB9CgogICAgcHJpdmF0\nZSB2b2lkIHByZVN0b3JlVGVzdChpbnQgYWN0aW9uKSB7CiAgICAgICAgYXNz\nZXJ0Tm9DYWxsYmFja3NJbnZva2VkKF9jYWxsYmFja3MpOwovLyAgICAgICAg\nX3BtLmJlZ2luKCk7CiAgICAgICAgc3RhcnRUeChfcG0pOwoKICAgICAgICBf\nY2FsbGJhY2tzLnNldFN0cmluZ0ZpZWxkKCJiYXIiKTsKICAgICAgICBPYmpl\nY3Qgb2lkID0gX3BtLmdldE9iamVjdElkKF9jYWxsYmFja3MpOwogICAgICAg\nIGlmIChhY3Rpb24gPT0gQ09NTUlUKSB7CiAgICAgICAgICAgIF9wbS5mbHVz\naCgpOwogICAgICAgICAgICBlbmRUeChfcG0pOwogICAgICAgIH0gZWxzZSBp\nZiAoYWN0aW9uID09IEZMVVNIKQogICAgICAgICAgICBfcG0uZmx1c2goKTsK\nICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT0gUFJFU1RPUkUpCiAgICAgICAg\nICAgIF9wbS5wcmVGbHVzaCgpOwogICAgICAgIGFzc2VydFRydWUoInByZXN0\nb3JlIHdhc250IGNhbGxlZCIsIF9jYWxsYmFja3MucHJlU3RvcmVDYWxsZWQp\nOwogICAgICAgIGlmIChhY3Rpb24gIT0gQ09NTUlUKSB7Ci8vICAgICAgICAg\nICAgX3BtLmNvbW1pdCgpOwogICAgICAgICAgICBpZiAoYWN0aW9uICE9IEZM\nVVNIKQogICAgICAgICAgICAgICAgX3BtLmZsdXNoKCk7CiAgICAgICAgICAg\nIGVuZFR4KF9wbSk7CiAgICAgICAgfQoKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9IGdldFBNKCk7CiAgICAgICAgSW5zdGFuY2VDYWxsYmFj\na3NUZXN0IGNhbGxiYWNrcyA9IChJbnN0YW5jZUNhbGxiYWNrc1Rlc3QpCiAg\nICAgICAgICAgIHBtLmZpbmQoSW5zdGFuY2VDYWxsYmFja3NUZXN0LmNsYXNz\nLCBvaWQpOwogICAgICAgIGFzc2VydE5vQ2FsbGJhY2tzSW52b2tlZChjYWxs\nYmFja3MpOwogICAgICAgIGFzc2VydEVxdWFscygiZ2V0b25ldG9vbmUgc3Ry\nbmcgaXMgbm90IGpkb3ByZXN0b3JlIiwgImpkb1ByZVN0b3JlIiwKICAgICAg\nICAgICAgY2FsbGJhY2tzLmdldE9uZU9uZSgpLmdldFN0cmluZ0ZpZWxkKCkp\nOwogICAgICAgIGVuZEVtKHBtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UHJlRGVsZXRlKCkgewogICAgICAgIGFzc2VydE5vQ2FsbGJhY2tzSW52\nb2tlZChfY2FsbGJhY2tzKTsKICAgICAgICBzdGFydFR4KF9wbSk7CiAgICAg\nICAgX3BtLnJlbW92ZShfY2FsbGJhY2tzKTsKICAgICAgICBhc3NlcnRUcnVl\nKF9jYWxsYmFja3MucHJlRGVsZXRlQ2FsbGVkKTsKICAgICAgICBlbmRUeChf\ncG0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcmVEZWxldGVSZWN1\ncnNpb24oKSB7CiAgICAgICAgYXNzZXJ0Tm9DYWxsYmFja3NJbnZva2VkKF9j\nYWxsYmFja3MpOwogICAgICAgIHN0YXJ0VHgoX3BtKTsKICAgICAgICBfY2Fs\nbGJhY2tzLnByZURlbGV0ZUN5Y2xlID0gMDsKICAgICAgICBfcG0ucmVtb3Zl\nKF9jYWxsYmFja3MpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBfY2FsbGJh\nY2tzLnByZURlbGV0ZUN5Y2xlKTsKICAgICAgICBlbmRUeChfcG0pOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTZXRSZWxhdGVkUmVmZXJlbmNlSW5Q\ncmVTdG9yZSgpIHsKICAgICAgICBhc3NlcnROdWxsKF9jYWxsYmFja3MuZ2V0\nUmVsSWQoKSk7CiAgICAgICAgSW5zdGFuY2VDYWxsYmFja3NUZXN0IGNhbGxi\nYWNrczIgPSBuZXcgSW5zdGFuY2VDYWxsYmFja3NUZXN0KCk7CiAgICAgICAg\nY2FsbGJhY2tzMi5zZXRSZWxJZChfcG0uZ2V0T2JqZWN0SWQoX2NhbGxiYWNr\ncykpOwogICAgICAgIHN0YXJ0VHgoX3BtKTsKICAgICAgICBfcG0ucGVyc2lz\ndChjYWxsYmFja3MyKTsKICAgICAgICBfcG0uZmx1c2goKTsKICAgICAgICBl\nbmRUeChfcG0pOwogICAgICAgIGFzc2VydEVxdWFscyg4ODg4LCBfY2FsbGJh\nY2tzLmdldEludEZpZWxkKCkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscyhjYWxsYmFja3MyLCBfY2FsbGJhY2tzLmdldFJlbCgp\nKTsKICAgICAgICB9IGNhdGNoIChBc3NlcnRpb25GYWlsZWRFcnJvciBhZmUp\nIHsKICAgICAgICAgICAgYnVnKDExNjIsIGFmZSwgIlNldHRpbmcgYSByZWxh\ndGVkIG9iamVjdCByZWZlcmVuY2UgaW4gIgogICAgICAgICAgICAgICAgKyAi\ncHJlU3RvcmUgZmFpbHMiKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEZsdXNoQ2F1c2VzRmx1c2goKSB7CiAgICAgICAgLy8jIyMg\nSkRPMk1JRyA6IHRoaXMgaXMgZmFpbGluZyBiZWNhdXNlIHdlJ3JlIGNvbnN1\nbWluZyBleGNlcHRpb25zCiAgICAgICAgLy8gdGhyb3dzIGZyb20gY2FsbGJh\nY2tzOyBuZWVkIHRvIGRlY2lkZSB3aGF0IHRvIGRvIHdpdGggdGhlbQogICAg\nICAgIGNhdXNlRmx1c2hUZXN0KEZMVVNIKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0UHJlU3RvcmVDYXVzZXNGbHVzaCgpIHsKICAgICAgICAvLyMj\nIyBKRE8yTUlHIDogdGhpcyBpcyBmYWlsaW5nIGJlY2F1c2Ugd2UncmUgY29u\nc3VtaW5nIGV4Y2VwdGlvbnMKICAgICAgICAvLyB0aHJvd3MgZnJvbSBjYWxs\nYmFja3M7IG5lZWQgdG8gZGVjaWRlIHdoYXQgdG8gZG8gd2l0aCB0aGVtCiAg\nICAgICAgY2F1c2VGbHVzaFRlc3QoUFJFU1RPUkUpOwogICAgfQoKICAgIHBy\naXZhdGUgdm9pZCBjYXVzZUZsdXNoVGVzdChpbnQgYWN0aW9uKSB7CiAgICAg\nICAgc3RhcnRUeChfcG0pOwogICAgICAgIF9jYWxsYmFja3Muc2V0U3RyaW5n\nRmllbGQoInNzcyIpOwogICAgICAgIF9jYWxsYmFja3MuZmx1c2hJblByZVN0\nb3JlID0gdHJ1ZTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoYWN0\naW9uID09IEZMVVNIKQogICAgICAgICAgICAgICAgX3BtLmZsdXNoKCk7CiAg\nICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIF9wbS5wcmVGbHVzaCgp\nOwoKICAgICAgICAgICAgYnVnKDExMzksICJSZWN1cnNpdmUgZmx1c2ggYWxs\nb3dlZCBiZWNhdXNlIGV4Y2VwdGlvbiBzd2FsbG93ZWQiKTsKICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gamUpIHsKICAgICAgICB9CiAgICAgICAgcm9s\nbGJhY2tUeChfcG0pOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBhc3NlcnRO\nb0NhbGxiYWNrc0ludm9rZWQoSW5zdGFuY2VDYWxsYmFja3NUZXN0IHBjKSB7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPQogICAgICAgICAg\nICAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7CgogICAgICAgIGFzc2VydEZhbHNlKCJFeHBlY3RlZCBwcmVEZWxldGUg\ndG8gbm90IGhhdmUgYmVlbiBjYWxsZWQgZm9yIG9iamVjdCBJRCAiCiAgICAg\nICAgICAgICsgcG0uZ2V0T2JqZWN0SWQocGMpLCBwYy5wcmVEZWxldGVDYWxs\nZWQpOwogICAgICAgIGFzc2VydEZhbHNlKCJFeHBlY3RlZCBwcmVDbGVhciB0\nbyBub3QgaGF2ZSBiZWVuIGNhbGxlZCBmb3Igb2JqZWN0IElEICIKICAgICAg\nICAgICAgKyBwbS5nZXRPYmplY3RJZChwYyksIHBjLnByZUNsZWFyQ2FsbGVk\nKTsKICAgICAgICBhc3NlcnRGYWxzZSgiRXhwZWN0ZWQgcHJlU3RvcmUgdG8g\nbm90IGhhdmUgYmVlbiBjYWxsZWQgZm9yIG9iamVjdCBJRCAiCiAgICAgICAg\nICAgICsgcG0uZ2V0T2JqZWN0SWQocGMpLCBwYy5wcmVTdG9yZUNhbGxlZCk7\nCiAgICB9CgogICAgLyogCiAgICAvLyBubyBKUEEgZXF1aXZhbGVudAoKICAg\nIHB1YmxpYyB2b2lkIHRlc3REZXRhY2hBdHRhY2goKQogICAgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBn\nZXRQTSgpOwogICAgICAgIERldGFjaEF0dGFjaEV2ZW50IHBjID0gKERldGFj\naEF0dGFjaEV2ZW50KSBwbS5maW5kCiAgICAgICAgICAgICAgICAoRGV0YWNo\nQXR0YWNoRXZlbnQuY2xhc3MsY3JlYXRlRGV0YWNoYWJsZUlkKDQpKTsKICAg\nICAgICBEZXRhY2hBdHRhY2hFdmVudC5FVkVOVFMuY2xlYXIoKTsKICAgICAg\nICBwYyA9IChEZXRhY2hBdHRhY2hFdmVudCkgcG0uZGV0YWNoKHBjKTsKICAg\nICAgICBhc3NlcnREZXRhY2hFdmVudHMobmV3IFN0cmluZ1tdeyAiUFJFRDQi\nLCAiUE9TVEQ0IiB9KTsKICAgICAgICBlbmRFbShwbSwoKSk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0VHJ1ZShwbS5pc0RldGFjaGVkKHBjKSk7CiAgICAg\nICAgCiAgICAgICAgcG0gPSBnZXRQTSgpOwogICAgICAgIHN0YXJ0VHgocG0s\nKCkpOwogICAgICAgIC8vRklYTUUganRob21hcwogICAgICAgIAovLyAgICAg\nICAgcG0uYWRkSW5zdGFuY2VMaWZlY3ljbGVMaXN0ZW5lcihuZXcgQ3JlYXRl\nTGlmZWN5Y2xlTGlzdGVuZXIoKSB7Ci8vICAgICAgICAgICAgcHVibGljIHZv\naWQgcG9zdENyZWF0ZShJbnN0YW5jZUxpZmVjeWNsZUV2ZW50IGV2KSB7Ci8v\nICAgICAgICAgICAgICAgIGZhaWwoIk5vIHBvc3QgY3JlYXRlIG5lY2Vzc2Fy\neSIpOwovLyAgICAgICAgICAgIH0KLy8gICAgICAgIH0sIG51bGwpOwogICAg\nICAgIHBtLnBlcnNpc3QocGMpOwogICAgICAgIGFzc2VydERldGFjaEV2ZW50\ncyhuZXcgU3RyaW5nW117ICJQUkVBNCIsICJQT1NUQTQiIH0pOwogICAgICAg\nIGVuZFR4KHBtLCgpKTsKICAgICAgICBlbmRFbShwbSwoKSk7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHRlc3REZXRhY2hBdHRhY2hSZWxhdGlvbnMo\nKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgp\nOwogICAgICAgIHN0YXJ0VHgocG0sKCkpOwogICAgICAgIERldGFjaEF0dGFj\naEV2ZW50IHBjID0gKERldGFjaEF0dGFjaEV2ZW50KSBwbS5maW5kCiAgICAg\nICAgICAgICAgICAoRGV0YWNoQXR0YWNoRXZlbnQuY2xhc3MsY3JlYXRlRGV0\nYWNoYWJsZUlkKDIpKTsKICAgICAgICBwYy5zZXRPbmVPbmUoKERldGFjaEF0\ndGFjaEV2ZW50KSBwbS5maW5kCiAgICAgICAgICAgICAgICAoRGV0YWNoQXR0\nYWNoRXZlbnQuY2xhc3MsY3JlYXRlRGV0YWNoYWJsZUlkKDQpKSk7CiAgICAg\nICAgZW5kVHgocG0sKCkpOwogICAgICAgIERldGFjaEF0dGFjaEV2ZW50LkVW\nRU5UUy5jbGVhcigpOwogICAgICAgIHBjID0gKERldGFjaEF0dGFjaEV2ZW50\nKSBwbS5kZXRhY2gocGMpOwogICAgICAgIGVuZEVtKHBtLCgpKTsKICAgICAg\nICBhc3NlcnREZXRhY2hFdmVudHMoCiAgICAgICAgICAgICAgICBuZXcgU3Ry\naW5nW117ICJQUkVEMiIsICJQUkVENCIsICJQT1NURDIiLCAiUE9TVEQ0IiB9\nKTsKICAgICAgICAKICAgICAgICBwbSA9IGdldFBNKCk7CiAgICAgICAgc3Rh\ncnRUeChwbSwoKSk7CiAgICAgICAgcG0ucGVyc2lzdChwYyk7CiAgICAgICAg\nYXNzZXJ0RGV0YWNoRXZlbnRzKAogICAgICAgICAgICAgICAgbmV3IFN0cmlu\nZ1tdeyAiUFJFQTIiLCAiUFJFQTQiLCAiUE9TVEEyIiwgIlBPU1RBNCIgfSk7\nCiAgICAgICAgcm9sbGJhY2tUeChwbSwoKSk7CiAgICAgICAgZW5kRW0ocG0s\nKCkpOwogICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgYXNzZXJ0RGV0YWNo\nRXZlbnRzKFN0cmluZ1tdIGV4cGVjdGVkKSB7CiAgICAgICAgQ29sbGVjdGlv\nbiBldmVudHMgPSBEZXRhY2hBdHRhY2hFdmVudC5FVkVOVFM7CiAgICAgICAg\naWYgKGV4cGVjdGVkLmxlbmd0aCAhPSBldmVudHMuc2l6ZSgpKSB7CiAgICAg\nICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7\nCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZXhwZWN0ZWQubGVu\nZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKGV4cGVjdGVk\nW2ldKS5hcHBlbmQoIiwiKTsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiIT0i\nKTsKICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdCA9IGV2ZW50cy5pdGVy\nYXRvcigpOyBpdC5oYXNOZXh0KCk7KQogICAgICAgICAgICAgICAgYnVmLmFw\ncGVuZChpdC5uZXh0KCkpLmFwcGVuZCgiLCIpOwogICAgICAgICAgICBmYWls\nKCJtaXNtYXRjaCBldmVudCBjb3VudDoiICsgYnVmKTsKICAgICAgICB9CiAg\nICAgICAgU3RyaW5nIGV2ZW50OwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgZXhwZWN0ZWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKCFl\ndmVudHMucmVtb3ZlKGV4cGVjdGVkW2ldKSkKICAgICAgICAgICAgICAgIGZh\naWwoIkV2ZW50IG5vdCBmaXJlZDoiICsgZXhwZWN0ZWRbaV0pOwogICAgICAg\nICAgICBpZiAoZXZlbnRzLmNvbnRhaW5zKGV4cGVjdGVkW2ldKSkKICAgICAg\nICAgICAgICAgIGZhaWwoIkV2ZW50IGZpcmVkIHR3aWNlOiIgKyBleHBlY3Rl\nZFtpXSk7CiAgICAgICAgfQogICAgICAgIGlmICghZXZlbnRzLmlzRW1wdHko\nKSkKICAgICAgICAgICAgZmFpbCgiRXhjZXNzIGV2ZW50cyBmaXJlZDoiICsg\nZXZlbnRzKTsKICAgICAgICBEZXRhY2hBdHRhY2hFdmVudC5FVkVOVFMuY2xl\nYXIoKTsKICAgIH0KICAgIAogICAgcHJpdmF0ZSBPYmplY3QgY3JlYXRlRGV0\nYWNoYWJsZUlkKGludCBmaWVsZCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBzdGFydFR4KHBtLCgpKTsK\nICAgICAgICBEZXRhY2hBdHRhY2hFdmVudCBwYyA9IG5ldyBEZXRhY2hBdHRh\nY2hFdmVudCgpOwogICAgICAgIHBjLnNldEludEZpZWxkKGZpZWxkKTsKICAg\nICAgICBwbS5wZXJzaXN0KHBjKTsKICAgICAgICBlbmRUeChwbSwoKSk7CiAg\nICAgICAgZW5kRW0ocG0sKCkpOwovLyAgICAgICAgcmV0dXJuIHBtLmdldE9i\namVjdElkKHBjKTsKICAgICAgICByZXR1cm4gcGMuZ2V0SWQoKTsKICAgIH0K\nICAgICovCn0K\n","encoding":"base64"}

