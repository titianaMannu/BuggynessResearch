{"sha":"9e57ee81eb678f1435517d4e8639b9f4b7cab3ab","node_id":"MDQ6QmxvYjIwNjM2NDo5ZTU3ZWU4MWViNjc4ZjE0MzU1MTdkNGU4NjM5YjlmNGI3Y2FiM2Fi","size":4411,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9e57ee81eb678f1435517d4e8639b9f4b7cab3ab","content":"LyoKICogVGVzdE11bHRpVGhyZWFkZWQuamF2YQogKgogKiBDcmVhdGVkIG9u\nIE9jdG9iZXIgMTIsIDIwMDYsIDI6MjEgUE0KICoKICogVG8gY2hhbmdlIHRo\naXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFnZXIK\nICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuCiAqLwov\nKgogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRp\nb24gKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGlj\nZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0\ncmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1h\ndGlvbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBB\nU0YgbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBh\nY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsg\neW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5j\nZQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5\nIG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9y\nZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQg\nYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAq\nIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FS\nUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUK\nICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFu\nZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4gICAgCiAqLwpw\nYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWw7\nCgppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwu\nSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKCgppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21tb24uYXBw\ncy5SdW50aW1lVGVzdDE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJG\nYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFRdWVyeTsKCnB1YmxpYyBjbGFzcyBUZXN0TXVsdGlUaHJlYWRl\nZCBleHRlbmRzIEJhc2VLZXJuZWxUZXN0IHsKCiAgICBzdGF0aWMgaW50IHNl\ncmlhbCA9IDU7CiAgICBzdGF0aWMgaW50IHRocmVhZHMgPSA1OwogICAgc3Rh\ndGljIGludCBpdGVyYXRpb25zID0gNTsKCiAgICBwcml2YXRlIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtOwogICAgcHJpdmF0ZSBPYmplY3QgaWQ7CiAgICBw\ncml2YXRlIFN0cmluZyBuYW1lOwoKICAgIC8qKgogICAgICogQ3JlYXRlcyBh\nIG5ldyBpbnN0YW5jZSBvZiBUZXN0TXVsdGlUaHJlYWRlZAogICAgICovCiAg\nICBwdWJsaWMgVGVzdE11bHRpVGhyZWFkZWQoKSB7CiAgICB9CgogICAgcHVi\nbGljIFRlc3RNdWx0aVRocmVhZGVkKFN0cmluZyBuYW1lKSB7CiAgICAgICAg\nc3VwZXIobmFtZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7\nCiAgICAgICAgZGVsZXRlQWxsKFJ1bnRpbWVUZXN0MS5jbGFzcyk7CgogICAg\nICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtMiA9IGdldFBNKCk7CiAgICAg\nICAgc3RhcnRUeChwbTIpOwogICAgICAgIG5hbWUgPSAidGVzdE11bHRpVGhy\nZWFkZWQiICsgTWF0aC5yYW5kb20oKTsKICAgICAgICBSdW50aW1lVGVzdDEg\nYSA9IG5ldyBSdW50aW1lVGVzdDEobmFtZSwKICAgICAgICAgICAgKGludCkg\nKE1hdGgucmFuZG9tKCkgKiBJbnRlZ2VyLk1BWF9WQUxVRSkpOwogICAgICAg\nIHBtMi5wZXJzaXN0KGEpOwogICAgICAgIGlkID0gcG0yLmdldE9iamVjdElk\nKGEpOwogICAgICAgIGVuZFR4KHBtMik7CgogICAgICAgIE1hcCBwcm9wcyA9\nIG5ldyBIYXNoTWFwKCk7CiAgICAgICAgcHJvcHMucHV0KCJvcGVuanBhLk11\nbHRpdGhyZWFkZWQiLCAidHJ1ZSIpOwogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeSBwbWYgPQogICAgICAgICAgICAoT3BlbkpQQUVudGl0\neU1hbmFnZXJGYWN0b3J5KSBnZXRFbWYocHJvcHMpOwogICAgICAgIHBtID0g\ncG1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KHBt\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpCiAgICAgICAg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\ncm9sbGJhY2tUeChwbSk7CiAgICAgICAgICAgIGVuZEVtKHBtKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAvLyB0aGlz\nIGlzIG5vdCB3aGF0IHdlIGFyZSB0ZXN0aW5nCiAgICAgICAgfQogICAgICAg\nIHN1cGVyLnRlYXJEb3duKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndGdldFRyYW5zYWN0aW9uKCkgewogICAgICAgIG10dGVzdChzZXJpYWwsIHRo\ncmVhZHMsIGl0ZXJhdGlvbnMpOwogICAgICAgIHBtLmdldFRyYW5zYWN0aW9u\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEdldE9iamVjdEJ5SWQo\nKSB7CiAgICAgICAgbXR0ZXN0KHNlcmlhbCwgdGhyZWFkcywgaXRlcmF0aW9u\ncyk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwbS5maW5kKFJ1bnRpbWVUZXN0\nMS5jbGFzcywgaWQpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UXVl\ncnlFeGVjdXRpb24oKSB7CiAgICAgICAgbXR0ZXN0KHNlcmlhbCwgdGhyZWFk\ncywgaXRlcmF0aW9ucyk7CiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5j\ncmVhdGVRdWVyeSgic2VsZWN0IG8gZnJvbSBSdW50aW1lVGVzdDEgbyAiCiAg\nICAgICAgICAgICsgIndoZXJlIG8uc3RyaW5nRmllbGQgPSAnIiArIG5hbWUg\nKyAiJyIpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBxLmdldFJlc3VsdExp\nc3QoKS5zaXplKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3REZWxl\ndGVQZXJzaXN0ZW50KCkgewogICAgICAgIG10dGVzdChzZXJpYWwsIHRocmVh\nZHMsIGl0ZXJhdGlvbnMpOwogICAgICAgIHBtLnJlbW92ZUFsbChwbS5jcmVh\ndGVRdWVyeSgic2VsZWN0IG8gZnJvbSBSdW50aW1lVGVzdDEgbyAiCiAgICAg\nICAgICAgICsgIndoZXJlIG8uc3RyaW5nRmllbGQgPSAnIiArIG5hbWUgKyAi\nJyIpLmdldFJlc3VsdExpc3QoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdFJlZnJlc2hBbGwoKSB7CiAgICAgICAgbXR0ZXN0KHNlcmlhbCwgdGhy\nZWFkcywgaXRlcmF0aW9ucyk7CiAgICAgICAgcG0ucmVmcmVzaEFsbCgpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFdmljdEFsbCgpIHsKICAgICAg\nICBtdHRlc3Qoc2VyaWFsLCB0aHJlYWRzLCBpdGVyYXRpb25zKTsKICAgICAg\nICBwbS5ldmljdEFsbCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RJ\ndGVyYXRlRXh0ZW50KCkKICAgICAgICB0aHJvd3MgVGhyb3dhYmxlIHsKICAg\nICAgICBpZiAodGltZW91dCgxMjAgKiAxMDAwKSkgcmV0dXJuOwoKICAgICAg\nICBtdHRlc3Qoc2VyaWFsLCB0aHJlYWRzLCBpdGVyYXRpb25zKTsKCiAgICAg\nICAgYXNzZXJ0VHJ1ZSgiVHJhbnNhY3Rpb24gc2hvdWxkIGhhdmUgYmVlbiBh\nY3RpdmUiLAogICAgICAgICAgICBwbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0\naXZlKCkpOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDM7IGkrKykg\newogICAgICAgICAgICBwbS5wZXJzaXN0KG5ldyBSdW50aW1lVGVzdDEoInRl\nc3RJdGVyYXRlRXh0ZW50IiArIE1hdGgucmFuZG9tKCksCiAgICAgICAgICAg\nICAgICAoaW50KSAoTWF0aC5yYW5kb20oKSAqIEludGVnZXIuTUFYX1ZBTFVF\nKSkpOwogICAgICAgIH0KCiAgICAgICAgYXNzZXJ0VHJ1ZSgiVHJhbnNhY3Rp\nb24gc2hvdWxkIGhhdmUgYmVlbiBhY3RpdmUiLAogICAgICAgICAgICBwbS5n\nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpOwoKICAgICAgICBmb3IgKEl0\nZXJhdG9yIGkgPSBwbS5jcmVhdGVFeHRlbnQoUnVudGltZVRlc3QxLmNsYXNz\nLCB0cnVlKS5pdGVyYXRvcigpOwogICAgICAgICAgICBpLmhhc05leHQoKTsg\naS5uZXh0KCkpCiAgICAgICAgICAgIDsKCiAgICAgICAgYXNzZXJ0VHJ1ZSgi\nVHJhbnNhY3Rpb24gc2hvdWxkIGhhdmUgYmVlbiBhY3RpdmUiLAogICAgICAg\nICAgICBwbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpOwogICAgfQp9\nCg==\n","encoding":"base64"}

