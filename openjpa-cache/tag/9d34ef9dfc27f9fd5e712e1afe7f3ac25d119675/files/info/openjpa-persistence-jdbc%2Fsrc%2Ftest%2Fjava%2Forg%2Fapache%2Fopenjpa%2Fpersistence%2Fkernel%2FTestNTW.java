{"sha":"189b2ddaf985836d7180628ce375555542750685","node_id":"MDQ6QmxvYjIwNjM2NDoxODliMmRkYWY5ODU4MzZkNzE4MDYyOGNlMzc1NTU1NTQyNzUwNjg1","size":3498,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/189b2ddaf985836d7180628ce375555542750685","content":"LyoKICogVGVzdE5UVy5qYXZhCiAqCiAqIENyZWF0ZWQgb24gT2N0b2JlciAx\nMiwgMjAwNiwgMjozMyBQTQogKgogKiBUbyBjaGFuZ2UgdGhpcyB0ZW1wbGF0\nZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFuYWdlcgogKiBhbmQgb3Bl\nbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4KICovCi8qCiAqIExpY2Vu\nc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1\nbmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVl\nbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1dGVkIHdp\ndGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uCiAqIHJl\nZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNl\ncyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5z\nZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5v\ndCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAqIHdpdGgg\ndGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUg\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9y\nIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZp\nYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRp\nb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICAKICovCnBhY2thZ2Ugb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsKCmltcG9ydCBq\nYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFw\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLk1hcDsKCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmtlcm5lbC5jb21tb24uYXBwcy5SdW50aW1lVGVzdDE7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUXVlcnk7\nCgpwdWJsaWMgY2xhc3MgVGVzdE5UVyBleHRlbmRzIEJhc2VLZXJuZWxUZXN0\nIHsKCiAgICBwcml2YXRlIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBm\nYWN0b3J5OwoKICAgIC8qKgogICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5j\nZSBvZiBUZXN0TlRXCiAgICAgKi8KICAgIHB1YmxpYyBUZXN0TlRXKCkgewog\nICAgfQoKICAgIHB1YmxpYyBUZXN0TlRXKFN0cmluZyBuYW1lKSB7CiAgICAg\nICAgc3VwZXIobmFtZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VXAo\nKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBkZWxldGVBbGwoUnVudGlt\nZVRlc3QxLmNsYXNzKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\nZW0gPSBnZXRQTSgpOwogICAgICAgIHN0YXJ0VHgoZW0pOwogICAgICAgIGVt\nLnBlcnNpc3QobmV3IFJ1bnRpbWVUZXN0MSgibnR3MCIsIDApKTsKICAgICAg\nICBlbS5wZXJzaXN0KG5ldyBSdW50aW1lVGVzdDEoIm50dzEiLCAxKSk7CiAg\nICAgICAgZW0ucGVyc2lzdChuZXcgUnVudGltZVRlc3QxKCJudHcyIiwgMikp\nOwogICAgICAgIGVtLnBlcnNpc3QobmV3IFJ1bnRpbWVUZXN0MSgibnR3MyIs\nIDMpKTsKICAgICAgICBlbS5wZXJzaXN0KG5ldyBSdW50aW1lVGVzdDEoIm50\ndzQiLCA0KSk7CiAgICAgICAgZW5kVHgoZW0pOwogICAgICAgIGVuZEVtKGVt\nKTsKCiAgICAgICAgZW0gPSBnZXRQTSgpOwogICAgICAgIHN0YXJ0VHgoZW0p\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3ROb25UcmFuc2FjdGlvbmFs\nV3JpdGUoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlckZhY3RvcnkgZmFjdG9yeSA9IGJyb2tlcigpOwogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZmFjdG9yeS5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBlbS5jcmVh\ndGVRdWVyeSgKICAgICAgICAgICAgIlNFTEVDVCBvIEZST00gUnVudGltZVRl\nc3QxIG8gT1JERVIgQlkgby5zdHJpbmdGaWVsZCBBU0MiKTsKICAgICAgICBx\nLnNldFN1YmNsYXNzZXMoZmFsc2UpOwogICAgICAgIENvbGxlY3Rpb24gYyA9\nIChDb2xsZWN0aW9uKSBxLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgSXRl\ncmF0b3IgaXRlciA9IGMuaXRlcmF0b3IoKTsKICAgICAgICBSdW50aW1lVGVz\ndDEgbzsKICAgICAgICB3aGlsZSAoaXRlci5oYXNOZXh0KCkpIHsKICAgICAg\nICAgICAgbyA9IChSdW50aW1lVGVzdDEpIGl0ZXIubmV4dCgpOwogICAgICAg\nICAgICBvLnNldFN0cmluZ0ZpZWxkKG8uZ2V0U3RyaW5nRmllbGQoKSArICIg\nbW9kaWZpZWQiKTsKICAgICAgICB9CgogICAgICAgIHN0YXJ0VHgoZW0pOwog\nICAgICAgIGVuZFR4KGVtKTsKCiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5\nKAogICAgICAgICAgICAiU0VMRUNUIG8gRlJPTSBSdW50aW1lVGVzdDEgbyBP\nUkRFUiBCWSBvLnN0cmluZ0ZpZWxkIEFTQyIpOwogICAgICAgIHEuc2V0U3Vi\nY2xhc3NlcyhmYWxzZSk7CiAgICAgICAgQ29sbGVjdGlvbiByZXN1bHRzID0g\nKENvbGxlY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyg1LCByZXN1bHRzLnNpemUoKSk7CiAgICAgICAgZW5kRW0oZW0p\nOwogICAgfQoKICAgIHByaXZhdGUgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5IGJyb2tlcigpIHsKICAgICAgICBNYXAgbWFwID0gbmV3IEhhc2hNYXAo\nKTsKICAgICAgICBtYXAucHV0KCJPcGVuSlBBLk9wdGltaXN0aWMiLCAidHJ1\nZSIpOwogICAgICAgIG1hcC5wdXQoIk9wZW5KUEEuTm9udHJhbnNhY3Rpb25h\nbFJlYWQiLCAidHJ1ZSIpOwogICAgICAgIG1hcC5wdXQoIk9wZW5KUEEuTm9u\ndHJhbnNhY3Rpb25hbFdyaXRlIiwgInRydWUiKTsKCiAgICAgICAgaWYgKGZh\nY3RvcnkgPT0gbnVsbCkgewogICAgICAgICAgICBmYWN0b3J5ID0gT3BlbkpQ\nQVBlcnNpc3RlbmNlCiAgICAgICAgICAgICAgICAuY3JlYXRlRW50aXR5TWFu\nYWdlckZhY3RvcnkoIlRlc3RDb252IiwgbnVsbCwgbWFwKTsKICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7CiAgICB9Cn0K\n","encoding":"base64"}

