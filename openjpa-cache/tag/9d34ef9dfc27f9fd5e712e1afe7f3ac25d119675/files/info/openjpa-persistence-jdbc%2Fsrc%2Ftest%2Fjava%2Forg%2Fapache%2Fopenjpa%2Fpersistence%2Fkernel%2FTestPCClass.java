{"sha":"84ec4b4ff4c7669a0393670d986ebc5f642f2590","node_id":"MDQ6QmxvYjIwNjM2NDo4NGVjNGI0ZmY0Yzc2NjlhMDM5MzY3MGQ5ODZlYmM1ZjY0MmYyNTkw","size":5647,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/84ec4b4ff4c7669a0393670d986ebc5f642f2590","content":"LyoKICogVGVzdFBDQ2xhc3MuamF2YQogKgogKiBDcmVhdGVkIG9uIE9jdG9i\nZXIgMTIsIDIwMDYsIDQ6MjcgUE0KICoKICogVG8gY2hhbmdlIHRoaXMgdGVt\ncGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFnZXIKICogYW5k\nIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuCiAqLwovKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNl\nbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBw\nbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3\nYXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1\ndGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElF\nUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVz\ncyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1p\ndGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4gICAgCiAqLwpwYWNrYWdl\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWw7CgppbXBv\ncnQgamF2YS5pby5TZXJpYWxpemFibGU7CgoKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLlBDQ2xh\nc3NJbnRlcmZhY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLlBDQ2xhc3NQQzsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QZXJzaXN0ZW5jZUNhcGFibGU7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRh\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuRmllbGRNZXRhRGF0\nYTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkphdmFUeXBlczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLk1ldGFEYXRhUmVwb3Np\ndG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5P\ncGVuSlBBRW50aXR5TWFuYWdlcjsKCnB1YmxpYyBjbGFzcyBUZXN0UENDbGFz\ncyBleHRlbmRzIEJhc2VLZXJuZWxUZXN0IHsKCiAgICAvKioKICAgICAqIENy\nZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdFBDQ2xhc3MKICAgICAqLwog\nICAgcHVibGljIFRlc3RQQ0NsYXNzKCkgewogICAgfQoKICAgIHB1YmxpYyBU\nZXN0UENDbGFzcyhTdHJpbmcgdGVzdCkgewogICAgICAgIHN1cGVyKHRlc3Qp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIGRl\nbGV0ZUFsbChQQ0NsYXNzUEMuY2xhc3MpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RNZXRhRGF0YSgpIHsKCiAgICAgICAgTWV0YURhdGFSZXBvc2l0\nb3J5IHJlcG9zID0gZ2V0Q29uZmlndXJhdGlvbigpCiAgICAgICAgICAgIC5n\nZXRNZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpOwogICAgICAgIENsYXNz\nTWV0YURhdGEgbWV0YSA9IHJlcG9zLmdldE1ldGFEYXRhKFBDQ2xhc3NQQy5j\nbGFzcywgbnVsbCwgdHJ1ZSk7CgogICAgICAgIEZpZWxkTWV0YURhdGEgZm1k\nID0gbWV0YS5nZXRGaWVsZCgic3BlY2lmaWNQQyIpOwogICAgICAgIGFzc2Vy\ndE5vdE51bGwoImZtZCBpcyBudWxsbCIsIGZtZCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJKYXZhVHlwZXMuUEMgIT0gZm1kLmdldFR5cGVDb2RlKCkiLCBK\nYXZhVHlwZXMuUEMsCiAgICAgICAgICAgIGZtZC5nZXRUeXBlQ29kZSgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoIlBDQ2xhc3NQQy5jbGFzcy5nZXROYW1l\nKCkgIT0gZm1kLmdldFR5cGUoKS5nZXROYW1lKCkiLAogICAgICAgICAgICBQ\nQ0NsYXNzUEMuY2xhc3MuZ2V0TmFtZSgpLCBmbWQuZ2V0VHlwZSgpLmdldE5h\nbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKAogICAgICAgICAgICAiT2Jq\nZWN0LmNsYXNzLmdldE5hbWUoKSAhPSBmbWQuZ2V0RGVjbGFyZWRUeXBlKCku\nZ2V0TmFtZSgpIiwKICAgICAgICAgICAgT2JqZWN0LmNsYXNzLmdldE5hbWUo\nKSwgZm1kLmdldERlY2xhcmVkVHlwZSgpLmdldE5hbWUoKSk7CgogICAgICAg\nIGZtZCA9IG1ldGEuZ2V0RmllbGQoImdlbmVyaWNQQyIpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoImZtZCBpcyBudWxsIiwgZm1kKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoIkphdmFUeXBlcy5QQ19VTlRZUEUgIT0gZm1kLmdldFR5cGVD\nb2RlKCkiLAogICAgICAgICAgICBKYXZhVHlwZXMuUENfVU5UWVBFRCwgZm1k\nLmdldFR5cGVDb2RlKCkpOwogICAgICAgIGFzc2VydEVxdWFscygKICAgICAg\nICAgICAgIlBlcnNpc3RlbmNlQ2FwYWJsZS5jbGFzcy5nZXROYW1lKCkgIT0g\nZm1kLmdldFR5cGUoKS5nZXROYW1lKCkiLAogICAgICAgICAgICBQZXJzaXN0\nZW5jZUNhcGFibGUuY2xhc3MuZ2V0TmFtZSgpLCBmbWQuZ2V0VHlwZSgpLmdl\ndE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKE9iamVjdC5jbGFzcy5n\nZXROYW1lKCksCiAgICAgICAgICAgIGZtZC5nZXREZWNsYXJlZFR5cGUoKS5n\nZXROYW1lKCkpOwoKICAgICAgICBmbWQgPSBtZXRhLmdldEZpZWxkKCJnZW5l\ncmljT2JqZWN0Iik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChmbWQpOwogICAg\nICAgIGFzc2VydEVxdWFscyhKYXZhVHlwZXMuT0JKRUNULCBmbWQuZ2V0VHlw\nZUNvZGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKE9iamVjdC5jbGFzcy5n\nZXROYW1lKCksIGZtZC5nZXRUeXBlKCkuZ2V0TmFtZSgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoT2JqZWN0LmNsYXNzLmdldE5hbWUoKSwKICAgICAgICAg\nICAgZm1kLmdldERlY2xhcmVkVHlwZSgpLmdldE5hbWUoKSk7CgogICAgICAg\nIGZtZCA9IG1ldGEuZ2V0RmllbGQoInNwZWNpZmljSW50ZXJmYWNlIik7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChmbWQpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhKYXZhVHlwZXMuUEMsIGZtZC5nZXRUeXBlQ29kZSgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoUENDbGFzc1BDLmNsYXNzLmdldE5hbWUoKSwgZm1kLmdl\ndFR5cGUoKS5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhQQ0Ns\nYXNzSW50ZXJmYWNlLmNsYXNzLmdldE5hbWUoKSwKICAgICAgICAgICAgZm1k\nLmdldERlY2xhcmVkVHlwZSgpLmdldE5hbWUoKSk7CgogICAgICAgIGZtZCA9\nIG1ldGEuZ2V0RmllbGQoImRlZmF1bHRJbnRlcmZhY2UiKTsKICAgICAgICBh\nc3NlcnROb3ROdWxsKGZtZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEphdmFU\neXBlcy5QQ19VTlRZUEVELCBmbWQuZ2V0VHlwZUNvZGUoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKFBDQ2xhc3NJbnRlcmZhY2UuY2xhc3MuZ2V0TmFtZSgp\nLAogICAgICAgICAgICBmbWQuZ2V0VHlwZSgpLmdldE5hbWUoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKFBDQ2xhc3NJbnRlcmZhY2UuY2xhc3MuZ2V0TmFt\nZSgpLAogICAgICAgICAgICBmbWQuZ2V0RGVjbGFyZWRUeXBlKCkuZ2V0TmFt\nZSgpKTsKCiAgICAgICAgZm1kID0gbWV0YS5nZXRGaWVsZCgic2VyaWFsaXph\nYmxlSW50ZXJmYWNlIik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChmbWQpOwog\nICAgICAgIGFzc2VydEVxdWFscyhKYXZhVHlwZXMuT0JKRUNULCBmbWQuZ2V0\nVHlwZUNvZGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFNlcmlhbGl6YWJs\nZS5jbGFzcy5nZXROYW1lKCksIGZtZC5nZXRUeXBlKCkuZ2V0TmFtZSgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoU2VyaWFsaXphYmxlLmNsYXNzLmdldE5h\nbWUoKSwKICAgICAgICAgICAgZm1kLmdldERlY2xhcmVkVHlwZSgpLmdldE5h\nbWUoKSk7CgogICAgICAgIGZtZCA9IG1ldGEuZ2V0RmllbGQoImdlbmVyaWNJ\nbnRlcmZhY2UiKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGZtZCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKEphdmFUeXBlcy5PQkpFQ1QsIGZtZC5nZXRUeXBl\nQ29kZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoT2JqZWN0LmNsYXNzLmdl\ndE5hbWUoKSwgZm1kLmdldFR5cGUoKS5nZXROYW1lKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyhQQ0NsYXNzSW50ZXJmYWNlLmNsYXNzLmdldE5hbWUoKSwK\nICAgICAgICAgICAgZm1kLmdldERlY2xhcmVkVHlwZSgpLmdldE5hbWUoKSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFBlcnNpc3QoKSB7CiAgICAg\nICAgUENDbGFzc1BDIHBjID0gbmV3IFBDQ2xhc3NQQygpOwogICAgICAgIHBj\nLnNldFNwZWNpZmljUEMocGMpOwogICAgICAgIHBjLnNldEdlbmVyaWNQQyhw\nYyk7CiAgICAgICAgcGMuc2V0R2VuZXJpY09iamVjdChwYyk7CiAgICAgICAg\ncGMuc2V0U3BlY2lmaWNJbnRlcmZhY2UocGMpOwogICAgICAgIHBjLnNldERl\nZmF1bHRJbnRlcmZhY2UocGMpOwogICAgICAgIHBjLnNldEdlbmVyaWNJbnRl\ncmZhY2UocGMpOwogICAgICAgIHBjLnNldFNlcmlhbGl6YWJsZUludGVyZmFj\nZShwYyk7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0\nUE0oKTsKICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICBwbS5wZXJzaXN0\nKHBjKTsKICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMp\nOwogICAgICAgIGVuZFR4KHBtKTsKICAgICAgICBlbmRFbShwbSk7CgogICAg\nICAgIHBtID0gZ2V0UE0oKTsKCiAgICAgICAgcGMgPSAoUENDbGFzc1BDKSBw\nbS5maW5kKFBDQ2xhc3NQQy5jbGFzcywgb2lkKTsKCiAgICAgICAgYXNzZXJ0\nVHJ1ZShwYyA9PSBwYy5nZXRTcGVjaWZpY1BDKCkpOwogICAgICAgIGFzc2Vy\ndFRydWUocGMgPT0gcGMuZ2V0R2VuZXJpY1BDKCkpOwogICAgICAgIGFzc2Vy\ndE5vdE51bGwocGMuZ2V0R2VuZXJpY09iamVjdCgpKTsKICAgICAgICBhc3Nl\ncnRUcnVlKHBjID09IHBjLmdldEdlbmVyaWNPYmplY3QoKSk7CiAgICAgICAg\nYXNzZXJ0VHJ1ZShwYyA9PSBwYy5nZXRTcGVjaWZpY0ludGVyZmFjZSgpKTsK\nICAgICAgICBhc3NlcnRUcnVlKHBjID09IHBjLmdldERlZmF1bHRJbnRlcmZh\nY2UoKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYy5nZXRHZW5lcmljSW50\nZXJmYWNlKCkpOwogICAgICAgIGFzc2VydFRydWUocGMgPT0gcGMuZ2V0R2Vu\nZXJpY0ludGVyZmFjZSgpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBjLmdl\ndFNlcmlhbGl6YWJsZUludGVyZmFjZSgpKTsKICAgICAgICBhc3NlcnRUcnVl\nKHBjID09IHBjLmdldFNlcmlhbGl6YWJsZUludGVyZmFjZSgpKTsKCiAgICAg\nICAgZW5kRW0ocG0pOwogICAgfQp9Cg==\n","encoding":"base64"}

