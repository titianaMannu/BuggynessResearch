{"sha":"f820cc0129c8d9b9d75af127534987b9b308d0e9","node_id":"MDQ6QmxvYjIwNjM2NDpmODIwY2MwMTI5YzhkOWI5ZDc1YWYxMjc1MzQ5ODdiOWIzMDhkMGU5","size":9318,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f820cc0129c8d9b9d75af127534987b9b308d0e9","content":"LyoKICogVGVzdFBNTWVtb3J5LmphdmEKICoKICogQ3JlYXRlZCBvbiBPY3Rv\nYmVyIDEzLCAyMDA2LCAzOjI4IFBNCiAqCiAqIFRvIGNoYW5nZSB0aGlzIHRl\nbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2VyCiAqIGFu\nZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgogKi8KLyoKICog\nTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChB\nU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2Ug\nYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJpYnV0\nZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24K\nICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxp\nY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBM\naWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlvdSBt\nYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UKICog\nd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0\naGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGlj\nZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFw\ncGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0\nd2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmli\ndXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJ\nRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNw\nZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGlt\naXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsOwoKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkl0\nZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLk1hcDsKCgoKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMu\nUnVudGltZVRlc3QxOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVu\ndC5BYnN0cmFjdFRyYW5zYWN0aW9uTGlzdGVuZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuZXZlbnQuVHJhbnNhY3Rpb25FdmVudDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5ldmVudC5UcmFuc2FjdGlvbkxpc3RlbmVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUXVlcnk7Cgpw\ndWJsaWMgY2xhc3MgVGVzdFBNTWVtb3J5IGV4dGVuZHMgQmFzZUtlcm5lbFRl\nc3QgewoKICAgIC8qKgogICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBv\nZiBUZXN0UE1NZW1vcnkKICAgICAqLwogICAgcHVibGljIFRlc3RQTU1lbW9y\neSgpIHsKICAgIH0KCiAgICBwdWJsaWMgVGVzdFBNTWVtb3J5KFN0cmluZyBz\nKSB7CiAgICAgICAgc3VwZXIocyk7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gc2tpcFRlc3QoKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cgog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgYm9vbGVhbiBfZG9QYXVzZSA9IGZh\nbHNlOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IE5VTV9PQkpFQ1RT\nID0gMjAwMDsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBOVU1fRkxV\nU0hFUyA9IDU7CgogICAgLy8gSGFjayB0byBydW4gc3RhbmQgYWxvbmUuCiAg\nICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKQogICAg\nICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIFRlc3RQTU1lbW9yeSB0\nZXN0cG0gPSBuZXcgVGVzdFBNTWVtb3J5KCJ0ZXN0UE1NZW1vcnkiKTsKICAg\nICAgICB0ZXN0cG0uc2V0VXAoKTsKICAgICAgICB0ZXN0cG0udGVzdE1lbW9y\neVVzZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAg\nICAgIFN5c3RlbS5vdXQucHJpbnRsbigiQWJvdXQgdG8gZGVsZXRlIGFsbCIp\nOwogICAgICAgIGRlbGV0ZUFsbFN0YWdlZChnZXRQTSgpLCBSdW50aW1lVGVz\ndDEuY2xhc3MpOwogICAgICAgIC8vIGRlbGV0ZUFsbCAoUnVudGltZVRlc3Qx\nLmNsYXNzKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkRvbmUgZGVs\nZXRlIGFsbCIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGRlbGV0ZUFsbFN0\nYWdlZChPcGVuSlBBRW50aXR5TWFuYWdlciBwbUFyZywgQ2xhc3MgY2xhc3NU\neXBlKSB7CiAgICAgICAgLyoKICAgICAgICAgIC8vIGNyZWF0ZSA2NDAwMCBv\nYmplY3RzCiAgICAgICAgICAvLyBub3cgY2FsbCB0aGlzLCBXSVRIIHRoZSBk\nYXRhY2FjaGUgb24sCiAgICAgICAgICAvLyBhbmQgZGVzcGl0ZSB1c2luZyBh\nIGZldGNoQmF0Y2ggc2l6ZSwKICAgICAgICAgIC8vCQl0aGlzIF93aWxsXyBy\ndW4gb3V0IG9mIG1lbW9yeQogICAgICAgICAgLy8gcHJvcHM6CiAga29kby5E\nYXRhQ2FjaGU6IHRydWUoQ2FjaGVTaXplPTUsIFNvZnRSZWZlcmVuY2VTaXpl\nPTEpCiAga29kby5SZW1vdGVDb21taXRQcm92aWRlcjogc2p2bQogICAgICAg\nICAgKi8KICAgICAgICBpbnQgZGVsQ291bnQgPSAwOwogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtOwoKICAgICAgICBib29sZWFuIG5lZWRUb0Rl\nbGV0ZSA9IHRydWU7CiAgICAgICAgd2hpbGUgKG5lZWRUb0RlbGV0ZSkgewog\nICAgICAgICAgICBwbSA9IGdldFBNKCk7CiAgICAgICAgICAgIHN0YXJ0VHgo\ncG0pOwogICAgICAgICAgICAvL3BtLnNldExhcmdlVHJhbnNhY3Rpb24odHJ1\nZSk7CiAgICAgICAgICAgIHBtLnNldFRyYWNrQ2hhbmdlc0J5VHlwZSh0cnVl\nKTsKICAgICAgICAgICAgU3RyaW5nIGNzdHJuZyA9IGNsYXNzVHlwZS5nZXRO\nYW1lKCk7CiAgICAgICAgICAgIE9wZW5KUEFRdWVyeSBrcSA9IHBtLmNyZWF0\nZVF1ZXJ5KCJTRUxFQ1QgbyBGUk9NICIgKyBjc3RybmcgKyAiIG8iKTsKICAg\nICAgICAgICAga3EuZ2V0RmV0Y2hQbGFuKCkuc2V0RmV0Y2hCYXRjaFNpemUo\nMTAwKTsKICAgICAgICAgICAgQ29sbGVjdGlvbiByZXN1bHRzID0gKENvbGxl\nY3Rpb24pIGtxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgaWYgKHJl\nc3VsdHMuc2l6ZSgpID09IDApIHsKICAgICAgICAgICAgICAgIG5lZWRUb0Rl\nbGV0ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIH0KICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJXZSBuZWVk\nIHRvIGRlbGV0ZSAiICsgcmVzdWx0cy5zaXplKCkpOwogICAgICAgICAgICBJ\ndGVyYXRvciBpdGVyID0gcmVzdWx0cy5pdGVyYXRvcigpOwogICAgICAgICAg\nICB3aGlsZSAoaXRlci5oYXNOZXh0KCkpIHsKICAgICAgICAgICAgICAgIHBt\nLnJlbW92ZShpdGVyLm5leHQoKSk7CiAgICAgICAgICAgICAgICBkZWxDb3Vu\ndCArPSAxOwogICAgICAgICAgICAgICAgaWYgKChkZWxDb3VudCAlIDgwMCkg\nPT0gMCkgewogICAgICAgICAgICAgICAgICAgIHBtLmZsdXNoKCk7CiAgICAg\nICAgICAgICAgICAgICAgLy8gaXMgdGhlIHRyYW5zIGNhaGNlIG5vdyBob2xk\naW5nCiAgICAgICAgICAgICAgICAgICAgLy8gYWxsIHRoZXNlIG9iamVjdHM/\nCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludCgi\nZGVsZXRlZCAyMDAiKTsKICAgICAgICAgICAgZW5kVHgocG0pOwogICAgICAg\nICAgICBlbmRFbShwbSk7CiAgICAgICAgfQogICAgICAgIFN5c3RlbS5vdXQu\ncHJpbnRsbigiRG9uZSBkZWxldGluZyIpOwogICAgfQoKICAgIHByaXZhdGUg\ndm9pZCByZXBvcnRNZW1vcnkoKSB7CiAgICAgICAgcmVwb3J0TWVtb3J5KCJN\nZW1vcnkgdXNlZCIpOwogICAgICAgIC8qCiAgICAgIERhdGFDYWNoZUltcGwg\nZGM7CiAgICAgIGRjID0gKERhdGFDYWNoZUltcGwpIGtwbS5nZXRDb25maWd1\ncmF0aW9uICgpLmdldERhdGFDYWNoZU1hbmFnZXIgKCkuCiAgICAgICAgICBn\nZXREYXRhQ2FjaGUgKCkKICAgICAgQ2FjaGVNYXAgY2FjaGVNYXAgPSBkYy5n\nZXRDYWNoZU1hcCAoKTsKICAgICAgdmFsdWVzL2tleVNldAogICAgICAqLwog\nICAgfQoKICAgIHByaXZhdGUgdm9pZCByZXBvcnRNZW1vcnkoU3RyaW5nIG1z\nZykgewogICAgICAgIFN5c3RlbS5nYygpOwogICAgICAgIGxvbmcgbWVtVXNl\nZCA9IFJ1bnRpbWUuZ2V0UnVudGltZSgpLnRvdGFsTWVtb3J5KCk7CiAgICAg\nICAgbG9uZyBtZW1GcmVlID0gUnVudGltZS5nZXRSdW50aW1lKCkuZnJlZU1l\nbW9yeSgpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiIiArIG1zZyAr\nICIgOiAiICsgbWVtVXNlZCArICIsICIgKwogICAgICAgICAgICBtZW1GcmVl\nKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcGF1c2UoZG91YmxlIHNlY29u\nZHMpIHsKICAgICAgICBpZiAoIV9kb1BhdXNlKQogICAgICAgICAgICByZXR1\ncm47CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgVGhyZWFkLmN1cnJlbnRU\naHJlYWQoKS55aWVsZCgpOwogICAgICAgICAgICBUaHJlYWQuY3VycmVudFRo\ncmVhZCgpLnNsZWVwKChpbnQpIHNlY29uZHMgKiAxMDAwKTsKICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0TWVtb3J5VXNlKCkgdGhyb3dzIEV4Y2VwdGlvbiB7\nCgogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiQmFzZWxpbmUsIHN0YXJ0\naW5nIG1lbW9yeSBmb3IgTiBvYmplY3RzIG9mICIgKwogICAgICAgICAgICBO\nVU1fT0JKRUNUUyk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5IGtwbWYgPQogICAgICAgICAgICAoT3BlbkpQQUVudGl0eU1hbmFnZXJG\nYWN0b3J5KSBnZXRFbWYoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBrcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpCiAgICAgICAgICAgIGtw\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAgICBzdGFydFR4KGtw\nbSk7CiAgICAgICAgaW50IHJ1bm5pbmdJZCA9IHBlcmZvcm1BZGRzTW9kaWZp\nZXNEZWxldGVzKGtwbSwgTlVNX09CSkVDVFMsIDApOwogICAgICAgIGVuZFR4\nKGtwbSk7CgogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiQmFzZWxpbmUs\nIHN0YXJ0aW5nIG1lbW9yeSAiKTsKICAgICAgICByZXBvcnRNZW1vcnkoKTsK\nCiAgICAgICAgVHJhbnNhY3Rpb25MaXN0ZW5lciBsID0gbmV3IEFic3RyYWN0\nVHJhbnNhY3Rpb25MaXN0ZW5lcigpIHsKICAgICAgICAgICAgcHVibGljIHZv\naWQgYWZ0ZXJDb21taXQoVHJhbnNhY3Rpb25FdmVudCBldikgewogICAgICAg\nICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKAogICAgICAgICAgICAgICAg\nICAgICJNeSBMaXN0ZW5lciBpbiBhZnRlckNvbW1pdCIpOwogICAgICAgICAg\nICAgICAgU3lzdGVtLm91dC5wcmludGxuKAogICAgICAgICAgICAgICAgICAg\nICJOdW0gb2JqZWN0cyBpbiB0cmFuc2FjdGlvbiAiCiAgICAgICAgICAgICAg\nICAgICAgICAgICsgZXYuZ2V0VHJhbnNhY3Rpb25hbE9iamVjdHMoKS5zaXpl\nKCkpOwoKICAgICAgICAgICAgICAgIC8vIHNlbmQgb3V0IGFuIGVtYWlsIGNv\nbmZpcm1pbmcgdGhhdCB0aGUKICAgICAgICAgICAgICAgIC8vIHRyYW5zYWN0\naW9uIHdhcyBhIHN1Y2Nlc3MKICAgICAgICAgICAgfQogICAgICAgIH07Cgog\nICAgICAgIC8vIGtwbS5yZWdpc3Rlckxpc3RlbmVyIChsKTsKCiAgICAgICAg\nLy8ganByb2JlLCBqcHJvZmlsZXIuCiAgICAgICAgLy8gcHJlZmVyIHRyZWV2\naWV3CgogICAgICAgIC8vIFJ1biBhIHRyYW5zYWN0aW9uIGZvciBhIHdoaWx3\nIGFuZCByZXBvcnQgbWVtb3J5CiAgICAgICAgc3RhcnRUeChrcG0pOwogICAg\nICAgIGludCBvYmpDb3VudCA9IDA7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBOVU1fRkxVU0hFUzsgaSsrKSB7CiAgICAgICAgICAgIFN5c3RlbS5v\ndXQucHJpbnRsbigpOwogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4o\nIkl0ZXJhdGlvbiAjIiArIGkgKyAiIGNyZWF0ZWQgIiArCiAgICAgICAgICAg\nICAgICBvYmpDb3VudCk7CiAgICAgICAgICAgIHJlcG9ydE1lbW9yeSgpOwog\nICAgICAgICAgICAvL2twbS5zZXRMYXJnZVRyYW5zYWN0aW9uKHRydWUpOwog\nICAgICAgICAgICBrcG0uc2V0VHJhY2tDaGFuZ2VzQnlUeXBlKHRydWUpOwog\nICAgICAgICAgICBydW5uaW5nSWQgPSBwZXJmb3JtQWRkc01vZGlmaWVzRGVs\nZXRlcyhrcG0sIE5VTV9PQkpFQ1RTLCBydW5uaW5nSWQpOwogICAgICAgICAg\nICBvYmpDb3VudCArPSBOVU1fT0JKRUNUUzsKICAgICAgICAgICAga3BtLmZs\ndXNoKCk7CiAgICAgICAgICAgIGdyYWJBbGxNZW1vcnkoKTsKICAgICAgICAg\nICAgLy8gICAgcGF1c2UoMzApOwogICAgICAgIH0KCiAgICAgICAgU3lzdGVt\nLm91dC5wcmludGxuKCJDcmVhdGVkIG9iamVjdHMsIGFib3V0IHRvIGNvbW1p\ndCAoKSIpOwogICAgICAgIHBhdXNlKDkwKTsKICAgICAgICBlbmRUeChrcG0p\nOwogICAgICAgIHBhdXNlKDEpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRs\nbigiTm93IGNvbW1pdCAoKSIpOwogICAgICAgIHJlcG9ydE1lbW9yeSgpOwog\nICAgICAgIHBhdXNlKDMzKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBn\ncmFiQWxsTWVtb3J5KCkgewogICAgICAgIC8vIGV4aGF1c3QgYWxsIG1lbW9y\neSBzbyB0aGF0IEdDIGlzIHJ1bi4KICAgICAgICBpbnQgc2l6ZSA9IDQwOTY7\nCiAgICAgICAgYm9vbGVhbiBncmFiID0gdHJ1ZTsKICAgICAgICBpbnRbXSBn\nbG9iOwogICAgICAgIHdoaWxlIChncmFiKSB7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICBnbG9iID0gbmV3IGludFtzaXplXTsKICAgICAg\nICAgICAgICAgIHNpemUgKj0gMjsKICAgICAgICAgICAgfSBjYXRjaCAoT3V0\nT2ZNZW1vcnlFcnJvciBlKSB7CiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0\nLnByaW50bG4oIk1lbSBncmFiYmVkICIgKyBzaXplKTsKICAgICAgICAgICAg\nICAgIGdyYWIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGdsb2IgPSBudWxs\nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGdsb2IgPSBudWxs\nOwogICAgfQoKICAgIHByb3RlY3RlZCBpbnQgcGVyZm9ybUFkZHNNb2RpZmll\nc0RlbGV0ZXMoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0sCiAgICAgICAgaW50\nIG51bU9iamVjdHMsIGludCBydW5uaW5nSWQpIHsKICAgICAgICAvLyBwbSBz\naG91bGQgYmUgYWN0aXZlLiBGdW5jdGlvbiBkb2VzIG5vdCBwZXJmb3JtIGNv\nbW1pdC4KCiAgICAgICAgLy8gUGVyZm9ybSBhIHNlcmllcyBvZiB0cmFuc2Fj\ndGlvbnMgdGhhdCB3aWxsIHRyaWdnZXIgYWRkcywKICAgICAgICAvLyBkZWxl\ndGVzLCBhbmQgdWRwYXRlcwoKICAgICAgICAvLyBjcmVhdGUgb2JqZWN0cwog\nICAgICAgIFJ1bnRpbWVUZXN0MVtdIHBlcnNpc3RhYmxlcyA9IG5ldyBSdW50\naW1lVGVzdDFbbnVtT2JqZWN0c107CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBwZXJzaXN0YWJsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\ncGVyc2lzdGFibGVzW2ldID0gbmV3IFJ1bnRpbWVUZXN0MSgiZm9vICMiICsg\naSwgcnVubmluZ0lkICsgaSk7CiAgICAgICAgfQogICAgICAgIHJ1bm5pbmdJ\nZCArPSBwZXJzaXN0YWJsZXMubGVuZ3RoOwoKICAgICAgICAvLyBhZGQgdGhl\nbQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGVyc2lzdGFibGVzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHBtLnBlcnNpc3QocGVyc2lzdGFi\nbGVzW2ldKTsKICAgICAgICB9CgogICAgICAgIC8vIG1vZGlmeSB0aGVtCiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwZXJzaXN0YWJsZXMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgcGVyc2lzdGFibGVzW2ldLnNldEludEZp\nZWxkMShpICsgMSk7CiAgICAgICAgfQoKLyoKCQkvLyBkZWxldGUgdGhlbQoJ\nCWZvciAoaW50IGkgPSAwOyBpIDwgcGVyc2lzdGFibGVzLmxlbmd0aDsgaSsr\nKQoJCXsKCQkJcG0uZGVsZXRlUGVyc2lzdGVudCAocGVyc2lzdGFibGVzIFtp\nXSk7CgkJfQoqLwogICAgICAgIHJldHVybiBydW5uaW5nSWQgKyAxOwogICAg\nfQoKICAgIHN0YXRpYyBpbnQgX2ZldGNoR3JvdXBTZXJpYWwgPSAwOwoKICAg\nIHByb3RlY3RlZCBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgY3JlYXRl\nRGlzdGluY3RGYWN0b3J5KAogICAgICAgIENsYXNzIHByb3ZpZGVyQ2xhc3Ms\nIFN0cmluZyBjbGFzc1Byb3BzMSkgewogICAgICAgIE1hcCBwcm9wcyA9IG51\nbGw7CgogICAgICAgIC8vRklYTUUganRob21hcwogICAgICAgIC8qCiAgICAg\nICAgaWYgKHByb3ZpZGVyQ2xhc3MgIT0gbnVsbCkgewogICAgICAgICAgICBw\ncm9wcyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAgICAgICJvcGVuanBh\nLlJlbW90ZUNvbW1pdFByb3ZpZGVyIiwgQ29uZmlndXJhdGlvbnMuZ2V0UGx1\nZ2luKAogICAgICAgICAgICAgICAgcHJvdmlkZXJDbGFzcy5nZXROYW1lY2xh\nc3NQcm9wczEpLAogICAgICAgICAgICAgICAgLy8gdXNlIHRoaXMgcHJvcGVy\ndHkgdG8gZGlmZmVyZW50aWF0ZSB0aGUgZmFjdG9yeQogICAgICAgICAgICAg\nICAgIm9wZW5qcGEuRmV0Y2hHcm91cHMiLCAiZGlmZmVyZW50aWF0aW5nRmV0\nY2hHcm91cCIgKwogICAgICAgICAgICAgICAgX2ZldGNoR3JvdXBTZXJpYWws\nCiAgICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg\nLy8gTm8gUkNQCiAgICAgICAgICAgIHByb3BzID0gbmV3IFN0cmluZ1tdewog\nICAgICAgICAgICAgICAgLy8gdXNlIHRoaXMgcHJvcGVydHkgdG8gZGlmZmVy\nZW50aWF0ZSB0aGUgZmFjdG9yeQogICAgICAgICAgICAgICAgIm9wZW5qcGEu\nUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2bSIsCiAgICAgICAgICAgICAg\nICAib3BlbmpwYS5GZXRjaEdyb3VwcyIsICJkaWZmZXJlbnRpYXRpbmdGZXRj\naEdyb3VwIiArCiAgICAgICAgICAgICAgICBfZmV0Y2hHcm91cFNlcmlhbCwK\nICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgX2ZldGNoR3JvdXBT\nZXJpYWwgKz0gMTsKICAgICAgICAgKi8KCiAgICAgICAgcmV0dXJuIChPcGVu\nSlBBRW50aXR5TWFuYWdlckZhY3RvcnkpIGdldEVtZihwcm9wcyk7CiAgICB9\nCn0K\n","encoding":"base64"}

