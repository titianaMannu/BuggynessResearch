{"sha":"d8aac1d8f5c8cd237448229e4bfab062c37e40bc","node_id":"MDQ6QmxvYjIwNjM2NDpkOGFhYzFkOGY1YzhjZDIzNzQ0ODIyOWU0YmZhYjA2MmMzN2U0MGJj","size":5270,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d8aac1d8f5c8cd237448229e4bfab062c37e40bc","content":"LyoKICogVGVzdFJldGFpblZhbHVlc0luT3B0aW1pc3RpYy5qYXZhCiAqCiAq\nIENyZWF0ZWQgb24gT2N0b2JlciAxNiwgMjAwNiwgMTA6MTggQU0KICoKICog\nVG8gY2hhbmdlIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBs\nYXRlIE1hbmFnZXIKICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBl\nZGl0b3IuCiAqLwoKLyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0\nd2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNv\nbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNF\nIGZpbGUKICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0\naW9uYWwgaW5mb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25l\ncnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3Ug\ndW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAq\nICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0\nIGluIGNvbXBsaWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkg\nb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8v\nd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5s\nZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBp\nbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lT\nLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICog\nS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGlj\nZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBw\nZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vu\nc2UuICAgIAogKi8KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2Uua2VybmVsOwoKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBv\ncnQgamF2YS51dGlsLkxvY2FsZTsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgoK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVs\nLmNvbW1vbi5hcHBzLlJ1bnRpbWVUZXN0MTsKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5OwoKcHVibGljIGNsYXNzIFRlc3RSZXRhaW5W\nYWx1ZXNJbk9wdGltaXN0aWMgZXh0ZW5kcyBCYXNlS2VybmVsVGVzdCB7Cgog\nICAgcHJpdmF0ZSBPYmplY3QgX29pZCA9IG51bGw7CgogICAgLyoqCiAgICAg\nKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIFRlc3RSZXRhaW5WYWx1ZXNJ\nbk9wdGltaXN0aWMKICAgICAqLwogICAgcHVibGljIFRlc3RSZXRhaW5WYWx1\nZXNJbk9wdGltaXN0aWMoKSB7CiAgICB9CgogICAgcHVibGljIFRlc3RSZXRh\naW5WYWx1ZXNJbk9wdGltaXN0aWMoU3RyaW5nIHRlc3QpIHsKICAgICAgICBz\ndXBlcih0ZXN0KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpCiAg\nICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0VXAo\nKTsKCiAgICAgICAgZGVsZXRlQWxsKFJ1bnRpbWVUZXN0MS5jbGFzcyk7Cgog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAg\nICAgICBzdGFydFR4KHBtKTsKICAgICAgICBSdW50aW1lVGVzdDEgcGMgPSBu\nZXcgUnVudGltZVRlc3QxKCJzdHIxIiwgMSk7CiAgICAgICAgcG0ucGVyc2lz\ndChwYyk7CiAgICAgICAgZW5kVHgocG0pOwogICAgICAgIF9vaWQgPSBwbS5n\nZXRPYmplY3RJZChwYyk7CiAgICAgICAgZW5kRW0ocG0pOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RSZXRhaW4oKSB7CiAgICAgICAgY2xlYXJUZXN0\nKHRydWUpOwogICAgICAgIG9wdExvY2tUZXN0KHRydWUpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3ROb3RSZXRhaW4oKSB7CiAgICAgICAgY2xlYXJU\nZXN0KGZhbHNlKTsKICAgICAgICBvcHRMb2NrVGVzdChmYWxzZSk7CiAgICB9\nCgogICAgcHJpdmF0ZSB2b2lkIGNsZWFyVGVzdChib29sZWFuIHJldGFpbikg\newogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0ocmV0\nYWluKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgcG1m\nID0gcG0uZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKTsKICAgICAgICBSdW50\naW1lVGVzdDEgcGMgPSAoUnVudGltZVRlc3QxKSBwbS5maW5kKFJ1bnRpbWVU\nZXN0MS5jbGFzcywgX29pZCk7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtMiA9IGdldFBNKCk7CiAgICAgICAgUnVudGltZVRlc3QxIHBjMiA9\nIChSdW50aW1lVGVzdDEpIHBtMi5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcywg\nX29pZCk7CiAgICAgICAgc3RhcnRUeChwbTIpOwogICAgICAgIHBjMi5zZXRT\ndHJpbmdGaWVsZCgic3RyMiIpOwogICAgICAgIHBjMi5zZXRJbnRGaWVsZDEo\nMik7CiAgICAgICAgZW5kVHgocG0yKTsKICAgICAgICBlbmRFbShwbTIpOwoK\nICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICAvLyB0aWNrbGUgdGhlIG9i\namVjdCBzbyB0aGF0IGl0IGVudGVycyB0aGUgdHJhbnNhY3Rpb24KICAgICAg\nICBwYy5zZXRMb2NhbGVGaWVsZChMb2NhbGUuQ0hJTkEpOwogICAgICAgIGFz\nc2VydEVxdWFscygocmV0YWluKSA/ICJzdHIxIiA6ICJzdHIyIiwgcGMuZ2V0\nU3RyaW5nRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKChyZXRhaW4p\nID8gMSA6IDIsIHBjLmdldEludEZpZWxkMSgpKTsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgICAgIGlmIChyZXRhaW4p\nCiAgICAgICAgICAgICAgICBmYWlsKCJTaG91bGQgaGF2ZSBjYXVzZWQgT0wg\ndmlvbGF0aW9uIik7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChSdW50aW1l\nRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIGlmICghcmV0YWluKQogICAg\nICAgICAgICAgICAgdGhyb3cgcmU7CiAgICAgICAgfQogICAgICAgIGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAvLwogICAgICAgIH0KCiAg\nICAgICAgZW5kRW0ocG0pOwoKICAgICAgICAvLyBtYWtlIHN1cmUgZXZlcnl0\naGluZyBzdHVjawogICAgICAgIGlmICghcmV0YWluKSB7CiAgICAgICAgICAg\nIHBtID0gZ2V0UE0oKTsKICAgICAgICAgICAgcGMgPSAoUnVudGltZVRlc3Qx\nKSBwbS5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcywgX29pZCk7CiAgICAgICAg\nICAgIGFzc2VydEVxdWFscygic3RyMiIsIHBjLmdldFN0cmluZ0ZpZWxkKCkp\nOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0SW50RmllbGQx\nKCkpOwogICAgICAgICAgICBlbmRFbShwbSk7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICBwbWYuY2xvc2UoKTsKICAgICAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIC8vIGNvbnN1\nbW1lIGV4Y2VwdGlvbnMgLi4uIG90aGVyIFBNcyBtaWdodCBiZSBvcGVuIGFu\nZAogICAgICAgICAgICAgICAgLy8gYWN0aXZlIG9uIHRoaXMgUE1GLgogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBv\ncHRMb2NrVGVzdChib29sZWFuIHJldGFpbikgewogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtMSA9IGdldFBNKHJldGFpbik7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IHBtZiA9IHBtMS5nZXRFbnRpdHlN\nYW5hZ2VyRmFjdG9yeSgpOwoKICAgICAgICBzdGFydFR4KHBtMSk7CiAgICAg\nICAgUnVudGltZVRlc3QxIHBjMSA9IChSdW50aW1lVGVzdDEpIHBtMS5maW5k\nKFJ1bnRpbWVUZXN0MS5jbGFzcywgX29pZCk7CiAgICAgICAgZW5kVHgocG0x\nKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0yID0gZ2V0UE0o\ncmV0YWluKTsKICAgICAgICBzdGFydFR4KHBtMik7CiAgICAgICAgUnVudGlt\nZVRlc3QxIHBjMiA9IChSdW50aW1lVGVzdDEpIHBtMi5maW5kKFJ1bnRpbWVU\nZXN0MS5jbGFzcywgX29pZCk7CiAgICAgICAgcGMyLnNldFN0cmluZ0ZpZWxk\nKCJzdHIzIik7CiAgICAgICAgcGMyLnNldEludEZpZWxkMSgzKTsKICAgICAg\nICBlbmRUeChwbTIpOwoKICAgICAgICBzdGFydFR4KHBtMSk7CiAgICAgICAg\ncGMxLnNldFN0cmluZ0ZpZWxkKCJzdHI0Iik7CiAgICAgICAgcGMxLnNldElu\ndEZpZWxkMSg0KTsKICAgICAgICB0cnkgewogICAgICAgICAgICBlbmRUeChw\nbTEpOwogICAgICAgICAgICBpZiAocmV0YWluKQogICAgICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0ZWQgb3B0IGxvY2sgZXJyb3IuIik7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGpvdmUpIHsKICAgICAgICAgICAgaWYgKCFyZXRh\naW4pCiAgICAgICAgICAgICAgICBmYWlsKCJDYXVnaHQgb3B0IGxvY2sgZXJy\nb3IuIik7CiAgICAgICAgfQoKICAgICAgICBwbTEuY2xvc2UoKTsKICAgICAg\nICBlbmRFbShwbTIpOwogICAgICAgIGlmIChyZXRhaW4pIHsKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIHBtZi5jbG9zZSgpOwogICAgICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAg\nLy8gbWF5YmUgb3RoZXIgUE1zIGFyZSBvcGVuLi4uCiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBPcGVuSlBBRW50aXR5TWFu\nYWdlciBnZXRQTShib29sZWFuIHJldGFpbikgewogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtOwogICAgICAgIE1hcCBwcm9wcyA9IG5ldyBIYXNo\nTWFwKCk7CiAgICAgICAgcHJvcHMucHV0KCJvcGVuanBhLkF1dG9DbGVhciIs\nICJhbGwiKTsKCiAgICAgICAgaWYgKHJldGFpbikKICAgICAgICAgICAgcG0g\nPSBnZXRQTSh0cnVlLCB0cnVlKTsKICAgICAgICBlbHNlIHsKICAgICAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IHBtZiA9IGdldEVtZihw\ncm9wcyk7CgogICAgICAgICAgICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdl\ncikgcG1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgICAgcG0u\nc2V0T3B0aW1pc3RpYyh0cnVlKTsKICAgICAgICAgICAgcG0uc2V0UmV0YWlu\nU3RhdGUodHJ1ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwbTsKICAg\nIH0KfQo=\n","encoding":"base64"}

