{"sha":"ee3bf894fd6494f5ef32e71acc44e56bcd0b7c68","node_id":"MDQ6QmxvYjIwNjM2NDplZTNiZjg5NGZkNjQ5NGY1ZWYzMmU3MWFjYzQ0ZTU2YmNkMGI3YzY4","size":9276,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ee3bf894fd6494f5ef32e71acc44e56bcd0b7c68","content":"LyoKICogVGVzdFNhdmVwb2ludEVtYmVkZGVkLmphdmEKICoKICogQ3JlYXRl\nZCBvbiBPY3RvYmVyIDE2LCAyMDA2LCAxMDoyOSBBTQogKgogKiBUbyBjaGFu\nZ2UgdGhpcyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFu\nYWdlcgogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4K\nICovCgovKgogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZv\ndW5kYXRpb24gKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0\nb3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQog\nKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBp\nbmZvcm1hdGlvbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4g\nIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vu\nc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29t\ncGxpYW5jZQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4g\nYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4gICAg\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5r\nZXJuZWw7CgppbXBvcnQgamF2YS51dGlsLlByb3BlcnRpZXM7CgoKCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1v\nbi5hcHBzLkVtYmVkZGVkT3duZXJQQzsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMuRW1iZWRkZWRQ\nQzsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3Bl\nbkpQQUVudGl0eU1hbmFnZXI7CgpwdWJsaWMgY2xhc3MgVGVzdFNhdmVwb2lu\ndEVtYmVkZGVkIGV4dGVuZHMgQmFzZUtlcm5lbFRlc3QgewoKICAgIHByaXZh\ndGUgaW50IGlkID0gMTAwMDA7CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEg\nbmV3IGluc3RhbmNlIG9mIFRlc3RTYXZlcG9pbnRFbWJlZGRlZAogICAgICov\nCiAgICBwdWJsaWMgVGVzdFNhdmVwb2ludEVtYmVkZGVkKFN0cmluZyBuYW1l\nKSB7CiAgICAgICAgc3VwZXIobmFtZSk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIFN0cmluZyBnZXRTYXZlcG9pbnRQbHVnaW4oKSB7CiAgICAgICAgcmV0dXJu\nICJpbi1tZW0oUHJlRmx1c2g9ZmFsc2UpIjsKICAgIH0KCiAgICBwcm90ZWN0\nZWQgYm9vbGVhbiBleHBlY3ROZXdFbWJlZGRlZEZhaWx1cmUoKSB7CiAgICAg\nICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIFByb3BlcnRpZXMg\nZ2V0UHJvcGVydGllcyhTdHJpbmdbXSBwcm9wcykgewogICAgICAgIFByb3Bl\ncnRpZXMgcHJvcGVydGllcyA9IHN1cGVyLmdldFByb3BlcnRpZXMocHJvcHMp\nOwogICAgICAgIHByb3BlcnRpZXMucHV0KCJvcGVuanBhLlNhdmVwb2ludE1h\nbmFnZXIiLCBnZXRTYXZlcG9pbnRQbHVnaW4oKSk7CiAgICAgICAgcmV0dXJu\nIHByb3BlcnRpZXM7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7\nCiAgICAgICAgZGVsZXRlQWxsKEVtYmVkZGVkT3duZXJQQy5jbGFzcyk7CiAg\nICB9CgogICAgcHJpdmF0ZSBFbWJlZGRlZE93bmVyUEMgbmV3RW1iZWRkZWRP\nd25lclBDKCkgewogICAgICAgIHJldHVybiBuZXcgRW1iZWRkZWRPd25lclBD\nKGlkKyssIGlkKyspOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RDbGVh\nck5ldygpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgZG9D\nbGVhck5ld1Rlc3QodHJ1ZSwgMCwgMCk7CiAgICAgICAgZG9DbGVhck5ld1Rl\nc3QodHJ1ZSwgMiwgMCk7CiAgICAgICAgZG9DbGVhck5ld1Rlc3QodHJ1ZSwg\nMCwgMik7CiAgICAgICAgZG9DbGVhck5ld1Rlc3QodHJ1ZSwgMiwgMik7CiAg\nICAgICAgZG9DbGVhck5ld1Rlc3QoZmFsc2UsIDAsIDApOwogICAgICAgIGRv\nQ2xlYXJOZXdUZXN0KGZhbHNlLCAyLCAwKTsKICAgICAgICBkb0NsZWFyTmV3\nVGVzdChmYWxzZSwgMCwgMik7CiAgICAgICAgZG9DbGVhck5ld1Rlc3QoZmFs\nc2UsIDIsIDIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGRvQ2xlYXJOZXdU\nZXN0KGJvb2xlYW4gbmV3UEMsIGludCBiZWZvcmUsIGludCBhZnRlcikKICAg\nICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBkZWxldGVBbGwoRW1i\nZWRkZWRPd25lclBDLmNsYXNzKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFu\nYWdlciBwbSA9IGdldFBNKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAg\nICAgRW1iZWRkZWRPd25lclBDIHBjID0gbmV3RW1iZWRkZWRPd25lclBDKCk7\nCiAgICAgICAgcG0ucGVyc2lzdChwYyk7CiAgICAgICAgcGMuc2V0U3RyaW5n\nRmllbGQoIm9yaWciKTsKICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2Jq\nZWN0SWQocGMpOwogICAgICAgIGlmICghbmV3UEMpIHsKICAgICAgICAgICAg\nZW5kVHgocG0pOwogICAgICAgICAgICBlbmRFbShwbSk7CiAgICAgICAgICAg\nIHBtID0gZ2V0UE0oKTsKICAgICAgICAgICAgc3RhcnRUeChwbSk7CiAgICAg\nICAgICAgIHBjID0gKEVtYmVkZGVkT3duZXJQQykgcG0uZmluZChFbWJlZGRl\nZE93bmVyUEMuY2xhc3MsIG9pZCk7CiAgICAgICAgfQogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgYmVmb3JlOyBpKyspIHsKICAgICAgICAgICAgcGMu\nc2V0U3RyaW5nRmllbGQoImIiICsgaSk7CiAgICAgICAgICAgIHBtLnNldFNh\ndmVwb2ludCgiYiIgKyBpKTsKICAgICAgICB9CgogICAgICAgIHBjLnNldFN0\ncmluZ0ZpZWxkKCJ0ZXN0Iik7CiAgICAgICAgcG0uc2V0U2F2ZXBvaW50KCJ0\nZXN0Iik7CiAgICAgICAgRW1iZWRkZWRQQyBlbWJlZCA9IG5ldyBFbWJlZGRl\nZFBDKCk7CiAgICAgICAgZW1iZWQuc2V0SW50RmllbGQoOTkpOwogICAgICAg\nIHBjLnNldEVtYmVkZGVkKGVtYmVkKTsKCiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBhZnRlcjsgaSsrKSB7CiAgICAgICAgICAgIHBjLnNldFN0cmlu\nZ0ZpZWxkKCJhIiArIGkpOwogICAgICAgICAgICBwbS5zZXRTYXZlcG9pbnQo\nImEiICsgaSk7CiAgICAgICAgfQoKICAgICAgICBwbS5yb2xsYmFja1RvU2F2\nZXBvaW50KCJ0ZXN0Iik7CiAgICAgICAgaWYgKG5ld1BDKQogICAgICAgICAg\nICBhc3NlcnROdWxsKHBjLmdldEVtYmVkZGVkKCkpOwogICAgICAgIGVsc2UK\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHBjLmdldEVtYmVkZGVkKCku\nZ2V0SW50RmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0ZXN0Iiwg\ncGMuZ2V0U3RyaW5nRmllbGQoKSk7CiAgICAgICAgZW5kVHgocG0pOwogICAg\nICAgIGVuZEVtKHBtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1i\nZWRkZWRSZWFzc2lnbigpIHsKICAgICAgICBkb0VtYmVkZGVkUmVhc3NpZ25U\nZXN0KHRydWUsIDAsIDApOwogICAgICAgIGRvRW1iZWRkZWRSZWFzc2lnblRl\nc3QodHJ1ZSwgMiwgMCk7CiAgICAgICAgZG9FbWJlZGRlZFJlYXNzaWduVGVz\ndCh0cnVlLCAwLCAyKTsKICAgICAgICBkb0VtYmVkZGVkUmVhc3NpZ25UZXN0\nKHRydWUsIDIsIDIpOwogICAgICAgIGRvRW1iZWRkZWRSZWFzc2lnblRlc3Qo\nZmFsc2UsIDAsIDApOwogICAgICAgIGRvRW1iZWRkZWRSZWFzc2lnblRlc3Qo\nZmFsc2UsIDIsIDApOwogICAgICAgIGRvRW1iZWRkZWRSZWFzc2lnblRlc3Qo\nZmFsc2UsIDAsIDIpOwogICAgICAgIGRvRW1iZWRkZWRSZWFzc2lnblRlc3Qo\nZmFsc2UsIDIsIDIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGRvRW1iZWRk\nZWRSZWFzc2lnblRlc3QoYm9vbGVhbiBuZXdQQywgaW50IGJlZm9yZSwgaW50\nIGFmdGVyKSB7CiAgICAgICAgZGVsZXRlQWxsKEVtYmVkZGVkT3duZXJQQy5j\nbGFzcyk7CiAgICAgICAgZGVsZXRlQWxsKEVtYmVkZGVkUEMuY2xhc3MpOwoK\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7CiAg\nICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgRW1iZWRkZWRPd25lclBDIHBj\nID0gbmV3RW1iZWRkZWRPd25lclBDKCk7CiAgICAgICAgRW1iZWRkZWRQQyBl\nbWJlZCA9IG5ldyBFbWJlZGRlZFBDKCk7CiAgICAgICAgZW1iZWQuc2V0SW50\nRmllbGQxKDEwMDApOwogICAgICAgIHBjLnNldFN0cmluZ0ZpZWxkKCJvcmln\nIik7CiAgICAgICAgcG0ucGVyc2lzdChwYyk7CiAgICAgICAgcGMuc2V0RW1i\nZWRkZWQoZW1iZWQpOwoKICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2Jq\nZWN0SWQocGMpOwogICAgICAgIGlmICghbmV3UEMpIHsKICAgICAgICAgICAg\nZW5kVHgocG0pOwogICAgICAgICAgICBlbmRFbShwbSk7CiAgICAgICAgICAg\nIHBtID0gZ2V0UE0oKTsKICAgICAgICAgICAgc3RhcnRUeChwbSk7CiAgICAg\nICAgICAgIHBjID0gKEVtYmVkZGVkT3duZXJQQykgcG0uZmluZChFbWJlZGRl\nZE93bmVyUEMuY2xhc3MsIG9pZCk7CiAgICAgICAgfQogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgYmVmb3JlOyBpKyspIHsKICAgICAgICAgICAgcGMu\nc2V0U3RyaW5nRmllbGQoImIiICsgaSk7CiAgICAgICAgICAgIHBtLnNldFNh\ndmVwb2ludCgiYiIgKyBpKTsKICAgICAgICB9CgogICAgICAgIHBtLnNldFNh\ndmVwb2ludCgidGVzdCIpOwogICAgICAgIGVtYmVkID0gbmV3IEVtYmVkZGVk\nUEMoKTsKICAgICAgICBlbWJlZC5zZXRJbnRGaWVsZDEoMjAwMCk7CiAgICAg\nICAgcGMuc2V0RW1iZWRkZWQoZW1iZWQpOwoKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGFmdGVyOyBpKyspIHsKICAgICAgICAgICAgcGMuc2V0U3Ry\naW5nRmllbGQoImIiICsgaSk7CiAgICAgICAgICAgIHBtLnNldFNhdmVwb2lu\ndCgiYSIgKyBpKTsKICAgICAgICB9CgogICAgICAgIHBtLnJvbGxiYWNrVG9T\nYXZlcG9pbnQoInRlc3QiKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBjLmdl\ndEVtYmVkZGVkKCkpOwogICAgICAgIGFzc2VydEVxdWFscygxMDAwLCBwYy5n\nZXRFbWJlZGRlZCgpLmdldEludEZpZWxkMSgpKTsKICAgICAgICBlbmRUeChw\nbSk7CiAgICAgICAgZW5kRW0ocG0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFbWJlZGRlZENoYW5nZSgpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZG9FbWJlZGRlZENoYW5n\nZVRlc3QodHJ1ZSwgMCwgMCk7CiAgICAgICAgICAgIGRvRW1iZWRkZWRDaGFu\nZ2VUZXN0KHRydWUsIDIsIDApOwogICAgICAgICAgICBkb0VtYmVkZGVkQ2hh\nbmdlVGVzdCh0cnVlLCAwLCAyKTsKICAgICAgICAgICAgZG9FbWJlZGRlZENo\nYW5nZVRlc3QodHJ1ZSwgMiwgMik7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIHQpIHsKICAgICAgICAgICAgaWYgKGV4cGVjdE5ld0VtYmVkZGVkRmFp\nbHVyZSgpKQogICAgICAgICAgICAgICAgYnVnKDExNDEsIHQsICJjaGFuZ2Vz\nIHRvIG5ldyBlbWJlZGRlZCBub3QgZGV0ZWN0ZWQiKTsKICAgICAgICAgICAg\nZWxzZQogICAgICAgICAgICAgICAgdGhyb3cgKEV4Y2VwdGlvbikgdDsKICAg\nICAgICB9CiAgICAgICAgZG9FbWJlZGRlZENoYW5nZVRlc3QoZmFsc2UsIDAs\nIDApOwogICAgICAgIGRvRW1iZWRkZWRDaGFuZ2VUZXN0KGZhbHNlLCAyLCAw\nKTsKICAgICAgICBkb0VtYmVkZGVkQ2hhbmdlVGVzdChmYWxzZSwgMCwgMik7\nCiAgICAgICAgZG9FbWJlZGRlZENoYW5nZVRlc3QoZmFsc2UsIDIsIDIpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIGRvRW1iZWRkZWRDaGFuZ2VUZXN0KGJv\nb2xlYW4gbmV3UEMsIGludCBiZWZvcmUsIGludCBhZnRlcikgewogICAgICAg\nIGRlbGV0ZUFsbChFbWJlZGRlZE93bmVyUEMuY2xhc3MpOwogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAgICAgICBzdGFy\ndFR4KHBtKTsKICAgICAgICBFbWJlZGRlZE93bmVyUEMgcGMgPSBuZXdFbWJl\nZGRlZE93bmVyUEMoKTsKICAgICAgICBFbWJlZGRlZFBDIGVtYmVkID0gbmV3\nIEVtYmVkZGVkUEMoKTsKICAgICAgICBlbWJlZC5zZXRJbnRGaWVsZDEoMTAw\nMCk7CiAgICAgICAgcGMuc2V0U3RyaW5nRmllbGQoIm9yaWciKTsKICAgICAg\nICBwbS5wZXJzaXN0KHBjKTsKICAgICAgICBwYy5zZXRFbWJlZGRlZChlbWJl\nZCk7CgogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmplY3RJZChwYyk7\nCiAgICAgICAgaWYgKCFuZXdQQykgewogICAgICAgICAgICBlbmRUeChwbSk7\nCiAgICAgICAgICAgIGVuZEVtKHBtKTsKICAgICAgICAgICAgcG0gPSBnZXRQ\nTSgpOwogICAgICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICAgICAgcGMg\nPSAoRW1iZWRkZWRPd25lclBDKSBwbS5maW5kKEVtYmVkZGVkT3duZXJQQy5j\nbGFzcywgb2lkKTsKICAgICAgICB9CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBiZWZvcmU7IGkrKykgewogICAgICAgICAgICBwYy5zZXRTdHJpbmdG\naWVsZCgiYiIgKyBpKTsKICAgICAgICAgICAgcG0uc2V0U2F2ZXBvaW50KCJi\nIiArIGkpOwogICAgICAgIH0KCiAgICAgICAgcG0uc2V0U2F2ZXBvaW50KCJ0\nZXN0Iik7CiAgICAgICAgcGMuZ2V0RW1iZWRkZWQoKS5zZXRJbnRGaWVsZDEo\nMjAwMCk7CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYWZ0ZXI7IGkr\nKykgewogICAgICAgICAgICBwYy5zZXRTdHJpbmdGaWVsZCgiYSIgKyBpKTsK\nICAgICAgICAgICAgcG0uc2V0U2F2ZXBvaW50KCJhIiArIGkpOwogICAgICAg\nIH0KCiAgICAgICAgcG0ucm9sbGJhY2tUb1NhdmVwb2ludCgidGVzdCIpOwog\nICAgICAgIGFzc2VydE5vdE51bGwocGMuZ2V0RW1iZWRkZWQoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEwMDAsIHBjLmdldEVtYmVkZGVkKCkuZ2V0SW50\nRmllbGQxKCkpOwogICAgICAgIGVuZFR4KHBtKTsKICAgICAgICBlbmRFbShw\nbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVtYmVkZGVkQ2hhbmdl\nMigpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgZG9FbWJlZGRlZENoYW5nZVRlc3QyKHRydWUsIDAsIDAp\nOwogICAgICAgICAgICBkb0VtYmVkZGVkQ2hhbmdlVGVzdDIodHJ1ZSwgMiwg\nMCk7CiAgICAgICAgICAgIGRvRW1iZWRkZWRDaGFuZ2VUZXN0Mih0cnVlLCAw\nLCAyKTsKICAgICAgICAgICAgZG9FbWJlZGRlZENoYW5nZVRlc3QyKHRydWUs\nIDIsIDIpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAg\nICAgICAgIGlmIChleHBlY3ROZXdFbWJlZGRlZEZhaWx1cmUoKSkKICAgICAg\nICAgICAgICAgIGJ1ZygxMTQxLCB0LCAiY2hhbmdlcyB0byBuZXcgZW1iZWRk\nZWQgbm90IGRldGVjdGVkIik7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAg\nICAgICAgIHRocm93IChFeGNlcHRpb24pIHQ7CiAgICAgICAgfQogICAgICAg\nIGRvRW1iZWRkZWRDaGFuZ2VUZXN0MihmYWxzZSwgMCwgMCk7CiAgICAgICAg\nZG9FbWJlZGRlZENoYW5nZVRlc3QyKGZhbHNlLCAyLCAwKTsKICAgICAgICBk\nb0VtYmVkZGVkQ2hhbmdlVGVzdDIoZmFsc2UsIDAsIDIpOwogICAgICAgIGRv\nRW1iZWRkZWRDaGFuZ2VUZXN0MihmYWxzZSwgMiwgMik7CiAgICB9CgogICAg\nLy8gdmFyaWF0aW9uIHdpdGggY2hhbmdpbmcgZW1iZWRkZSBmaWVsZHMgdnMg\nb3duZXIgZmllbGQKICAgIHB1YmxpYyB2b2lkIGRvRW1iZWRkZWRDaGFuZ2VU\nZXN0Mihib29sZWFuIG5ld1BDLCBpbnQgYmVmb3JlLCBpbnQgYWZ0ZXIpIHsK\nICAgICAgICBkZWxldGVBbGwoRW1iZWRkZWRPd25lclBDLmNsYXNzKTsKICAg\nICAgICBkZWxldGVBbGwoRW1iZWRkZWRQQy5jbGFzcyk7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOwogICAgICAgIHN0YXJ0\nVHgocG0pOwogICAgICAgIEVtYmVkZGVkT3duZXJQQyBwYyA9IG5ld0VtYmVk\nZGVkT3duZXJQQygpOwogICAgICAgIEVtYmVkZGVkUEMgZW1iZWQgPSBuZXcg\nRW1iZWRkZWRQQygpOwogICAgICAgIGVtYmVkLnNldEludEZpZWxkMSgxMDAw\nKTsKICAgICAgICBwYy5zZXRTdHJpbmdGaWVsZCgib3JpZyIpOwogICAgICAg\nIHBtLnBlcnNpc3QocGMpOwogICAgICAgIHBjLnNldEVtYmVkZGVkKGVtYmVk\nKTsKCiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElkKHBjKTsK\nICAgICAgICBpZiAoIW5ld1BDKSB7CiAgICAgICAgICAgIGVuZFR4KHBtKTsK\nICAgICAgICAgICAgZW5kRW0ocG0pOwogICAgICAgICAgICBwbSA9IGdldFBN\nKCk7CiAgICAgICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgICAgICBwYyA9\nIChFbWJlZGRlZE93bmVyUEMpIHBtLmZpbmQoRW1iZWRkZWRPd25lclBDLmNs\nYXNzLCBvaWQpOwogICAgICAgIH0KICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IGJlZm9yZTsgaSsrKSB7CiAgICAgICAgICAgIHBjLmdldEVtYmVkZGVk\nKCkuc2V0SW50RmllbGQxKGkpOwogICAgICAgICAgICBwbS5zZXRTYXZlcG9p\nbnQoImIiICsgaSk7CiAgICAgICAgfQoKICAgICAgICBwbS5zZXRTYXZlcG9p\nbnQoInRlc3QiKTsKICAgICAgICBwYy5nZXRFbWJlZGRlZCgpLnNldEludEZp\nZWxkMSgyMDAwKTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhZnRl\ncjsgaSsrKSB7CiAgICAgICAgICAgIHBjLmdldEVtYmVkZGVkKCkuc2V0SW50\nRmllbGQxKGkgKiAtMSk7CiAgICAgICAgICAgIHBtLnNldFNhdmVwb2ludCgi\nYSIgKyBpKTsKICAgICAgICB9CgogICAgICAgIHBtLnJvbGxiYWNrVG9TYXZl\ncG9pbnQoInRlc3QiKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBjLmdldEVt\nYmVkZGVkKCkpOwogICAgICAgIGlmIChiZWZvcmUgPT0gMCkKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEwMDAsIHBjLmdldEVtYmVkZGVkKCkuZ2V0SW50\nRmllbGQxKCkpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKGJlZm9yZSAtIDEsIHBjLmdldEVtYmVkZGVkKCkuZ2V0SW50RmllbGQx\nKCkpOwogICAgICAgIGVuZFR4KHBtKTsKICAgICAgICBlbmRFbShwbSk7CiAg\nICB9Cn0K\n","encoding":"base64"}

