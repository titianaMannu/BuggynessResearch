{"sha":"022d526221bc89fb67b8e38b6c7059bed6617adb","node_id":"MDQ6QmxvYjIwNjM2NDowMjJkNTI2MjIxYmM4OWZiNjdiOGUzOGI2YzcwNTliZWQ2NjE3YWRi","size":11644,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/022d526221bc89fb67b8e38b6c7059bed6617adb","content":"LyoKICogVGVzdFNwZWNpYWxOdW1iZXJzLmphdmEKICoKICogQ3JlYXRlZCBv\nbiBPY3RvYmVyIDEzLCAyMDA2LCA0OjU2IFBNCiAqCiAqIFRvIGNoYW5nZSB0\naGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2Vy\nCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLgogKi8K\nLyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVs\nOwoKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRlZ2VyOwppbXBvcnQgamF2YS51\ndGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuRW51bVNldDsKCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNv\nbW1vbi5hcHBzLkFsbEZpZWxkVHlwZXNUZXN0OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0cmFjdFRl\nc3RDYXNlOwppbXBvcnQganVuaXQuZnJhbWV3b3JrLkFzc2VydGlvbkZhaWxl\nZEVycm9yOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUXVlcnk7CgpwdWJsaWMgY2xhc3Mg\nVGVzdFNwZWNpYWxOdW1iZXJzIGV4dGVuZHMgQmFzZUtlcm5lbFRlc3QgewoK\nICAgIC8qKgogICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBUZXN0\nU3BlY2lhbE51bWJlcnMKICAgICAqLwogICAgcHVibGljIFRlc3RTcGVjaWFs\nTnVtYmVycygpIHsKICAgIH0KCiAgICBwdWJsaWMgVGVzdFNwZWNpYWxOdW1i\nZXJzKFN0cmluZyBuYW1lKSB7CiAgICAgICAgc3VwZXIobmFtZSk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgZGVsZXRlQWxsKEFsbEZpZWxkVHlwZXNUZXN0LmNsYXNzKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAv\nLyBjYXRjaCBlcnJvcnMgd2hlbiBkZWxldGluZyAuLi4gUG9zdGdyZVNRTCBo\nYXMKICAgICAgICAgICAgLy8gYSBjb3VwbGUgcHJvYmxlbXMgd2l0aCBzb21l\nIG9mIHRoZSB2YWx1ZXMgdGhhdAogICAgICAgICAgICAvLyB0cnkgdG8gZ2V0\nIGluc2VydGVkLgogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0U2hvcnRNYXgoKSB7CiAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0\ndCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOwogICAgICAgIGFmdHQuc2V0\nVGVzdHNob3J0KFNob3J0Lk1BWF9WQUxVRSk7CiAgICAgICAgc2F2ZUFuZFF1\nZXJ5KGFmdHQsICJ0ZXN0c2hvcnQgPSA6cGFyYW0iLCBuZXcgU2hvcnQoU2hv\ncnQuTUFYX1ZBTFVFKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFNo\nb3J0TWluKCkgewogICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBu\nZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAgICBhZnR0LnNldFRlc3Rz\naG9ydChTaG9ydC5NSU5fVkFMVUUpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdHNob3J0ID0gOnBhcmFtIiwK\nICAgICAgICAgICAgICAgIG5ldyBTaG9ydChTaG9ydC5NSU5fVkFMVUUpKTsK\nICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICBi\ndWcoQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5FTVBSRVNTLCA4ODksIHQs\nCiAgICAgICAgICAgICAgICAiRW1wcmVzcyBjYW5ub3Qgc3RvcmUgbWluIHZh\nbHVlcyIpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nTG9uZ01heCgpIHsKICAgICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0g\nbmV3IEFsbEZpZWxkVHlwZXNUZXN0KCk7CiAgICAgICAgYWZ0dC5zZXRUZXN0\nbG9uZyhMb25nLk1BWF9WQUxVRSk7CiAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFm\ndHQsICJ0ZXN0bG9uZyA9IDpwYXJhbSIsIG5ldyBMb25nKExvbmcuTUFYX1ZB\nTFVFKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdExvbmdNaW4oKSB7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3Qg\nYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOwogICAgICAgICAgICBh\nZnR0LnNldFRlc3Rsb25nKExvbmcuTUlOX1ZBTFVFKTsKICAgICAgICAgICAg\nc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0bG9uZyA9IDpwYXJhbSIsIG5ldyBM\nb25nKExvbmcuTUlOX1ZBTFVFKSk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIHQpIHsKICAgICAgICAgICAgYnVnKEFic3RyYWN0VGVzdENhc2UuUGxh\ndGZvcm0uSFlQRVJTT05JQywgNDc0LCB0LAogICAgICAgICAgICAgICAgIlNv\nbWUgZGF0YWJhc2VzIGNhbm5vdCBzdG9yZSBMb25nLk1JTl9WQUxVRSIpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW50ZWdlck1h\neCgpIHsKICAgICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFs\nbEZpZWxkVHlwZXNUZXN0KCk7CiAgICAgICAgYWZ0dC5zZXRUZXN0aW50KElu\ndGVnZXIuTUFYX1ZBTFVFKTsKICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwg\nInRlc3RpbnQgPSA6cGFyYW0iLAogICAgICAgICAgICBuZXcgSW50ZWdlcihJ\nbnRlZ2VyLk1BWF9WQUxVRSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RJbnRlZ2VyTWluKCkgewogICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFm\ndHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAgICBhZnR0LnNl\ndFRlc3RpbnQoSW50ZWdlci5NSU5fVkFMVUUpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGludCA9IDpwYXJh\nbSIsCiAgICAgICAgICAgICAgICBuZXcgSW50ZWdlcihJbnRlZ2VyLk1JTl9W\nQUxVRSkpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAg\nICAgICAgIGJ1ZyhBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLkVNUFJFU1Ms\nIDg4OSwgdCwKICAgICAgICAgICAgICAgICJFbXByZXNzIGNhbm5vdCBzdG9y\nZSBtaW4gdmFsdWVzIik7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RGbG9hdE1heCgpIHsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlwZXNU\nZXN0KCk7CiAgICAgICAgICAgIGFmdHQuc2V0VGVzdGZsb2F0KEZsb2F0Lk1B\nWF9WQUxVRSk7CiAgICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVz\ndGZsb2F0ID0gOnBhcmFtIiwKICAgICAgICAgICAgICAgIG5ldyBGbG9hdChG\nbG9hdC5NQVhfVkFMVUUpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICBidWcoRW51bVNldC5vZihBYnN0cmFjdFRlc3RD\nYXNlLlBsYXRmb3JtLlBPU1RHUkVTUUwsCiAgICAgICAgICAgICAgICBBYnN0\ncmFjdFRlc3RDYXNlLlBsYXRmb3JtLkRCMiwKICAgICAgICAgICAgICAgIEFi\nc3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uTVlTUUwsCiAgICAgICAgICAgICAg\nICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLkRFUkJZKSwgNDk0LCBlLAog\nICAgICAgICAgICAgICAgIlNvbWUgZGF0YXN0b3JlcyBjYW5ub3Qgc3RvcmUg\nRmxvYXQuTUFYX1ZBTFVFIik7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RGbG9hdE1pbigpIHsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlw\nZXNUZXN0KCk7CiAgICAgICAgICAgIGFmdHQuc2V0VGVzdGZsb2F0KEZsb2F0\nLk1JTl9WQUxVRSk7CiAgICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAi\ndGVzdGZsb2F0ID0gOnBhcmFtIiwKICAgICAgICAgICAgICAgIG5ldyBGbG9h\ndChGbG9hdC5NSU5fVkFMVUUpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICBidWcoRW51bVNldC5vZihBYnN0cmFjdFRl\nc3RDYXNlLlBsYXRmb3JtLlBPU1RHUkVTUUwsCiAgICAgICAgICAgICAgICBB\nYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLlNRTFNFUlZFUiwKICAgICAgICAg\nICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uREIyLAogICAgICAg\nICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5JTkZPUk1JWCwK\nICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uREVS\nQlkpLCA0OTQsIGUsCiAgICAgICAgICAgICAgICAiU29tZSBkYXRhYmFzZXMg\nY2Fubm90IHN0b3JlIEZsb2F0Lk1JTl9WQUxVRSIpOwogICAgICAgIH0gY2F0\nY2ggKEFzc2VydGlvbkZhaWxlZEVycm9yIGUpIHsKICAgICAgICAgICAgYnVn\nKEVudW1TZXQub2YoQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5NWVNRTCwK\nICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uU1FM\nU0VSVkVSKSwgNDk0LCBlLAogICAgICAgICAgICAgICAgIlNvbWUgZGF0YWJh\nc2VzIGNhbm5vdCBzdG9yZSBGbG9hdC5NSU5fVkFMVUUiKTsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEZsb2F0TmFOKCkgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQg\nPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAgICAgICAgYWZ0dC5z\nZXRUZXN0ZmxvYXQoRmxvYXQuTmFOKTsKICAgICAgICAgICAgc2F2ZUFuZFF1\nZXJ5KGFmdHQsICJ0ZXN0ZmxvYXQgPSA6cGFyYW0iLCBuZXcgRmxvYXQoRmxv\nYXQuTmFOKSk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAg\nICAgICAgICAgYnVnKDQ2MSwgdCwgIk5hTiBwcm9ibGVtcyIpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmxvYXROZWdhdGl2ZUlu\nZmluaXR5KCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEFsbEZpZWxk\nVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAg\nICAgICAgICAgYWZ0dC5zZXRUZXN0ZmxvYXQoRmxvYXQuTkVHQVRJVkVfSU5G\nSU5JVFkpOwogICAgICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3Rm\nbG9hdCA9IDpwYXJhbSIsCiAgICAgICAgICAgICAgICBuZXcgRmxvYXQoRmxv\nYXQuTkVHQVRJVkVfSU5GSU5JVFkpKTsKICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICBidWcoRW51bVNldC5vZihBYnN0cmFj\ndFRlc3RDYXNlLlBsYXRmb3JtLlBPSU5UQkFTRSwKICAgICAgICAgICAgICAg\nIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uUE9TVEdSRVNRTCwKICAgICAg\nICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uTVlTUUwsCiAg\nICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLkRCMiwK\nICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uT1JB\nQ0xFLAogICAgICAgICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9y\nbS5JTkZPUk1JWCwKICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2Uu\nUGxhdGZvcm0uREVSQlksCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RD\nYXNlLlBsYXRmb3JtLlNRTFNFUlZFUiksIDQ5NCwgZSwKICAgICAgICAgICAg\nICAgICJTb21lIGRhdGFiYXNlcyBjYW5ub3Qgc3RvcmUgRmxvYXQuTkVHQVRJ\nVkVfSU5GSU5JVFkiKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEZsb2F0UG9zdGl2aWVJbmZpbml0eSgpIHsKICAgICAgICB0cnkg\newogICAgICAgICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFs\nbEZpZWxkVHlwZXNUZXN0KCk7CiAgICAgICAgICAgIGFmdHQuc2V0VGVzdGZs\nb2F0KEZsb2F0LlBPU0lUSVZFX0lORklOSVRZKTsKICAgICAgICAgICAgc2F2\nZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0ZmxvYXQgPSA6cGFyYW0iLAogICAgICAg\nICAgICAgICAgbmV3IEZsb2F0KEZsb2F0LlBPU0lUSVZFX0lORklOSVRZKSk7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nYnVnKEVudW1TZXQub2YoQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5QT0lO\nVEJBU0UsCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRm\nb3JtLlBPU1RHUkVTUUwsCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RD\nYXNlLlBsYXRmb3JtLk1ZU1FMLAogICAgICAgICAgICAgICAgQWJzdHJhY3RU\nZXN0Q2FzZS5QbGF0Zm9ybS5EQjIsCiAgICAgICAgICAgICAgICBBYnN0cmFj\ndFRlc3RDYXNlLlBsYXRmb3JtLk9SQUNMRSwKICAgICAgICAgICAgICAgIEFi\nc3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uSU5GT1JNSVgsCiAgICAgICAgICAg\nICAgICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLkRFUkJZLAogICAgICAg\nICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5TUUxTRVJWRVIp\nLCA0OTQsIGUsCiAgICAgICAgICAgICAgICAiU29tZSBkYXRhYmFzZXMgY2Fu\nbm90IHN0b3JlIEZsb2F0LlBPU0lUSVZFX0lORklOSVRZIik7CiAgICAgICAg\nfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3REb3VibGVNYXgoKSB7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0\ndCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOwogICAgICAgICAgICBhZnR0\nLnNldFRlc3Rkb3VibGUoRG91YmxlLk1BWF9WQUxVRSk7CiAgICAgICAgICAg\nIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGRvdWJsZSA9IDpwYXJhbSIsCiAg\nICAgICAgICAgICAgICBuZXcgRG91YmxlKERvdWJsZS5NQVhfVkFMVUUpKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBi\ndWcoRW51bVNldC5vZihBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLlBPSU5U\nQkFTRSwKICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZv\ncm0uTVlTUUwsCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBs\nYXRmb3JtLk9SQUNMRSwKICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENh\nc2UuUGxhdGZvcm0uUE9TVEdSRVNRTCwKICAgICAgICAgICAgICAgIEFic3Ry\nYWN0VGVzdENhc2UuUGxhdGZvcm0uRU1QUkVTUywKICAgICAgICAgICAgICAg\nIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uREIyLAogICAgICAgICAgICAg\nICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5JTkZPUk1JWCwKICAgICAg\nICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uREVSQlkpLCA0\nOTQsIGUsCiAgICAgICAgICAgICAgICAiU29tZSBkYXRhYmFzZXMgY2Fubm90\nIHN0b3JlIERvdWJsZS5NQVhfVkFMVUUiKTsKICAgICAgICB9CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdERvdWJsZU1pbigpIHsKICAgICAgICB0cnkg\newogICAgICAgICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFs\nbEZpZWxkVHlwZXNUZXN0KCk7CiAgICAgICAgICAgIGFmdHQuc2V0VGVzdGRv\ndWJsZShEb3VibGUuTUlOX1ZBTFVFKTsKICAgICAgICAgICAgc2F2ZUFuZFF1\nZXJ5KGFmdHQsICJ0ZXN0ZG91YmxlID0gOnBhcmFtIiwKICAgICAgICAgICAg\nICAgIG5ldyBEb3VibGUoRG91YmxlLk1JTl9WQUxVRSkpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGJ1ZyhFbnVtU2V0\nLm9mKEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uUE9TVEdSRVNRTCwKICAg\nICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uU1FMU0VS\nVkVSLAogICAgICAgICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9y\nbS5PUkFDTEUsCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBs\nYXRmb3JtLkVNUFJFU1MsCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RD\nYXNlLlBsYXRmb3JtLkRCMiwKICAgICAgICAgICAgICAgIEFic3RyYWN0VGVz\ndENhc2UuUGxhdGZvcm0uSU5GT1JNSVgsCiAgICAgICAgICAgICAgICBBYnN0\ncmFjdFRlc3RDYXNlLlBsYXRmb3JtLkRFUkJZKSwgNDk0LCBlLAogICAgICAg\nICAgICAgICAgIlNvbWUgZGF0YWJhc2VzIGNhbm5vdCBzdG9yZSBEb3VibGUu\nTUlOX1ZBTFVFIik7CiAgICAgICAgfSBjYXRjaCAoQXNzZXJ0aW9uRmFpbGVk\nRXJyb3IgZSkgewogICAgICAgICAgICBidWcoQWJzdHJhY3RUZXN0Q2FzZS5Q\nbGF0Zm9ybS5NWVNRTCwgNDk0LCBlLAogICAgICAgICAgICAgICAgIlNvbWUg\nZGF0YWJhc2VzIGNhbm5vdCBzdG9yZSBEb3VibGUuTUlOX1ZBTFVFIik7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3REb3VibGVOYU4o\nKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQWxsRmllbGRUeXBlc1Rl\nc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOwogICAgICAgICAg\nICBhZnR0LnNldFRlc3Rkb3VibGUoRG91YmxlLk5hTik7CiAgICAgICAgICAg\nIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGRvdWJsZSA9IDpwYXJhbSIsIG5l\ndyBEb3VibGUoRG91YmxlLk5hTikpOwogICAgICAgIH0gY2F0Y2ggKFRocm93\nYWJsZSB0KSB7CiAgICAgICAgICAgIGJ1Zyg0NjEsIHQsICJOYU4gcHJvYmxl\nbXMiKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdERv\ndWJsZU5lZ2F0aXZlSW5maW5pdHkoKSB7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5\ncGVzVGVzdCgpOwogICAgICAgICAgICBhZnR0LnNldFRlc3Rkb3VibGUoRG91\nYmxlLk5FR0FUSVZFX0lORklOSVRZKTsKICAgICAgICAgICAgc2F2ZUFuZFF1\nZXJ5KGFmdHQsICJ0ZXN0ZG91YmxlID0gOnBhcmFtIiwKICAgICAgICAgICAg\nICAgIG5ldyBEb3VibGUoRG91YmxlLk5FR0FUSVZFX0lORklOSVRZKSk7CiAg\nICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgYnVn\nKDQ2MSwgdCwgImluZmluaXR5IHByb2JsZW1zIik7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3REb3VibGVQb3N0aXZpZUluZmluaXR5\nKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNU\nZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAgICAg\nICAgYWZ0dC5zZXRUZXN0ZG91YmxlKERvdWJsZS5QT1NJVElWRV9JTkZJTklU\nWSk7CiAgICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGRvdWJs\nZSA9IDpwYXJhbSIsCiAgICAgICAgICAgICAgICBuZXcgRG91YmxlKERvdWJs\nZS5QT1NJVElWRV9JTkZJTklUWSkpOwogICAgICAgIH0gY2F0Y2ggKFRocm93\nYWJsZSB0KSB7CiAgICAgICAgICAgIGJ1Zyg0NjEsIHQsICJpbmZpbml0eSBw\ncm9ibGVtcyIpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0Qnl0ZU1pbigpIHsKICAgICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0\nID0gbmV3IEFsbEZpZWxkVHlwZXNUZXN0KCk7CiAgICAgICAgYWZ0dC5zZXRU\nZXN0Ynl0ZShCeXRlLk1JTl9WQUxVRSk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0Ynl0ZSA9IDpwYXJhbSIs\nIG5ldyBCeXRlKEJ5dGUuTUlOX1ZBTFVFKSk7CiAgICAgICAgfSBjYXRjaCAo\nVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgYnVnKEFic3RyYWN0VGVzdENh\nc2UuUGxhdGZvcm0uRU1QUkVTUywgODg5LCB0LAogICAgICAgICAgICAgICAg\nIkVtcHJlc3MgY2Fubm90IHN0b3JlIG1pbiB2YWx1ZXMiKTsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEJ5dGVNYXgoKSB7CiAgICAg\nICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVz\nVGVzdCgpOwogICAgICAgIGFmdHQuc2V0VGVzdGJ5dGUoQnl0ZS5NQVhfVkFM\nVUUpOwogICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGJ5dGUgPSA6\ncGFyYW0iLCBuZXcgQnl0ZShCeXRlLk1BWF9WQUxVRSkpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RaZXJvQmlnSW50ZWdlcigpIHsKICAgICAgICBB\nbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlwZXNUZXN0\nKCk7CiAgICAgICAgYWZ0dC5zZXRUZXN0QmlnSW50ZWdlcihCaWdJbnRlZ2Vy\nLlpFUk8pOwogICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdEJpZ0lu\ndGVnZXIgPSA6cGFyYW0iLCBCaWdJbnRlZ2VyLlpFUk8pOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RPbmVCaWdJbnRlZ2VyKCkgewogICAgICAgIEFs\nbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3Qo\nKTsKICAgICAgICBhZnR0LnNldFRlc3RCaWdJbnRlZ2VyKEJpZ0ludGVnZXIu\nT05FKTsKICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3RCaWdJbnRl\nZ2VyID0gOnBhcmFtIiwgQmlnSW50ZWdlci5PTkUpOwogICAgfQoKICAgIHBy\naXZhdGUgdm9pZCBzYXZlQW5kUXVlcnkoT2JqZWN0IG9iaiwgU3RyaW5nIHF1\nZXJ5LCBPYmplY3QgcGFyYW0pIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFu\nYWdlciBwbSA9IGdldFBNKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAg\nICAgcG0ucGVyc2lzdChvYmopOwogICAgICAgIGVuZFR4KHBtKTsKICAgICAg\nICBlbmRFbShwbSk7CgogICAgICAgIHBtID0gZ2V0UE0oKTsKICAgICAgICBP\ncGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgbyBmcm9t\nICIKICAgICAgICAgICAgKyBvYmouZ2V0Q2xhc3MoKS5nZXROYW1lKCkgKyAi\nIG8gd2hlcmUgIiArIHF1ZXJ5KTsKICAgICAgICBxLnNldFBhcmFtZXRlcigi\ncGFyYW0iLCBwYXJhbSk7CiAgICAgICAgQ29sbGVjdGlvbiBjID0gKENvbGxl\nY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydFNpemUo\nMSwgYyk7CiAgICAgICAgZW5kRW0ocG0pOwogICAgfQp9Cg==\n","encoding":"base64"}

