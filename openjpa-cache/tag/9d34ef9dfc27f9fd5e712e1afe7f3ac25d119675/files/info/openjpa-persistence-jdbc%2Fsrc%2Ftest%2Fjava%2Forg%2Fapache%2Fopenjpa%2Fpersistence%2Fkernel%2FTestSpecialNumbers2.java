{"sha":"af2f8e50ebdf21cbfa1b0b6a89d1fe40ec043cee","node_id":"MDQ6QmxvYjIwNjM2NDphZjJmOGU1MGViZGYyMWNiZmExYjBiNmE4OWQxZmU0MGVjMDQzY2Vl","size":10195,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/af2f8e50ebdf21cbfa1b0b6a89d1fe40ec043cee","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVs\nOwoKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkVudW1TZXQ7CmltcG9ydCBqYXZhLm1hdGguQmlnSW50ZWdlcjsKCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNv\nbW1vbi5hcHBzLkFsbEZpZWxkVHlwZXNUZXN0OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0cmFjdFRl\nc3RDYXNlOwppbXBvcnQganVuaXQuZnJhbWV3b3JrLkFzc2VydDsKaW1wb3J0\nIGp1bml0LmZyYW1ld29yay5Bc3NlcnRpb25GYWlsZWRFcnJvcjsKCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0\neU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuT3BlbkpQQVF1ZXJ5OwoKLyoqCiAqIFRlc3QgdmFyaW91cyBzcGVjaWFs\nIG51bWJlcnMsIHN1Y2ggYXMgRG91YmxlLk5hTi4KICoKICogQGF1dGhvciA8\nYSBocmVmPSJtYWlsdG86bWFyY0Bzb2xhcm1ldHJpYy5jb20iPk1hcmMgUHJ1\nZCdob21tZWF1eDwvYT4KICovCnB1YmxpYyBjbGFzcyBUZXN0U3BlY2lhbE51\nbWJlcnMyIGV4dGVuZHMgQmFzZUtlcm5lbFRlc3QgewoKICAgIHB1YmxpYyBU\nZXN0U3BlY2lhbE51bWJlcnMyKFN0cmluZyBuYW1lKSB7CiAgICAgICAgc3Vw\nZXIobmFtZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZGVsZXRlQWxsKEFsbEZpZWxkVHlw\nZXNUZXN0LmNsYXNzKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIC8vIGNhdGNoIGVycm9ycyB3aGVuIGRl\nbGV0aW5nIC4uLiBQb3N0Z3JlU1FMIGhhcwogICAgICAgICAgICAvLyBhIGNv\ndXBsZSBwcm9ibGVtcyB3aXRoIHNvbWUgb2YgdGhlIHZhbHVlcyB0aGF0CiAg\nICAgICAgICAgIC8vIHRyeSB0byBnZXQgaW5zZXJ0ZWQuCiAgICAgICAgfQog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTaG9ydE1heCgpIHsKICAgICAg\nICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlwZXNU\nZXN0KCk7CiAgICAgICAgYWZ0dC5zZXRUZXN0c2hvcnQoU2hvcnQuTUFYX1ZB\nTFVFKTsKICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3RzaG9ydCA9\nIiwgbmV3IFNob3J0KFNob3J0Lk1BWF9WQUxVRSkpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0U2hvcnRNaW4oKSB7CiAgICAgICAgQWxsRmll\nbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOwog\nICAgICAgIGFmdHQuc2V0VGVzdHNob3J0KFNob3J0Lk1JTl9WQUxVRSk7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0\nZXN0c2hvcnQgPSIsCiAgICAgICAgICAgICAgICAgICAgbmV3IFNob3J0KFNo\nb3J0Lk1JTl9WQUxVRSkpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0\nKSB7CiAgICAgICAgICAgIGJ1ZyhBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3Jt\nLkVNUFJFU1MsIDg4OSwgdCwKICAgICAgICAgICAgICAgICAgICAiRW1wcmVz\ncyBjYW5ub3Qgc3RvcmUgbWluIHZhbHVlcyIpOwogICAgICAgIH0KICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdExvbmdNYXgoKSB7CiAgICAgICAg\nQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVz\ndCgpOwogICAgICAgIGFmdHQuc2V0VGVzdGxvbmcoTG9uZy5NQVhfVkFMVUUp\nOwogICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGxvbmcgPSIsIG5l\ndyBMb25nKExvbmcuTUFYX1ZBTFVFKSk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RMb25nTWluKCkgewogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBl\nc1Rlc3QoKTsKICAgICAgICAgICAgYWZ0dC5zZXRUZXN0bG9uZyhMb25nLk1J\nTl9WQUxVRSk7CiAgICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVz\ndGxvbmcgPSIsIG5ldyBMb25nKExvbmcuTUlOX1ZBTFVFKSk7CiAgICAgICAg\nfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgYnVnKEFic3Ry\nYWN0VGVzdENhc2UuUGxhdGZvcm0uSFlQRVJTT05JQywgNDc0LCB0LAogICAg\nICAgICAgICAgICAgICAgICJTb21lIGRhdGFiYXNlcyBjYW5ub3Qgc3RvcmUg\nTG9uZy5NSU5fVkFMVUUiKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIHRlc3RJbnRlZ2VyTWF4KCkgewogICAgICAgIEFsbEZpZWxk\nVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAg\nICAgICBhZnR0LnNldFRlc3RpbnQoSW50ZWdlci5NQVhfVkFMVUUpOwogICAg\nICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGludCA9IiwKICAgICAgICAg\nICAgICAgIG5ldyBJbnRlZ2VyKEludGVnZXIuTUFYX1ZBTFVFKSk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RJbnRlZ2VyTWluKCkgewogICAg\nICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBl\nc1Rlc3QoKTsKICAgICAgICBhZnR0LnNldFRlc3RpbnQoSW50ZWdlci5NSU5f\nVkFMVUUpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHNhdmVBbmRRdWVy\neShhZnR0LCAidGVzdGludCA9IiwKICAgICAgICAgICAgICAgICAgICBuZXcg\nSW50ZWdlcihJbnRlZ2VyLk1JTl9WQUxVRSkpOwogICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIGJ1ZyhBYnN0cmFjdFRlc3RD\nYXNlLlBsYXRmb3JtLkVNUFJFU1MsIDg4OSwgdCwKICAgICAgICAgICAgICAg\nICAgICAiRW1wcmVzcyBjYW5ub3Qgc3RvcmUgbWluIHZhbHVlcyIpOwogICAg\nICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEZsb2F0TWF4\nKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgCUFsbEZpZWxkVHlwZXNUZXN0\nIGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAgICAgICAg\nYWZ0dC5zZXRUZXN0ZmxvYXQoRmxvYXQuTUFYX1ZBTFVFKTsKICAgICAgICAg\nICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0ZmxvYXQgPSIsCiAgICAgICAg\nICAgICAgICAgICAgbmV3IEZsb2F0KEZsb2F0Lk1BWF9WQUxVRSkpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGJ1Zyhn\nZXRDdXJyZW50UGxhdGZvcm0oKSwgNDk0LCBlLAogICAgICAgICAgICAgICAg\nICAgICJTb21lIGRhdGFzdG9yZXMgY2Fubm90IHN0b3JlIEZsb2F0Lk1BWF9W\nQUxVRSIpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdEZsb2F0TWluKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEFs\nbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3Qo\nKTsKICAgICAgICAgICAgYWZ0dC5zZXRUZXN0ZmxvYXQoRmxvYXQuTUlOX1ZB\nTFVFKTsKICAgICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0Zmxv\nYXQgPSIsCiAgICAgICAgICAgICAgICAgICAgbmV3IEZsb2F0KEZsb2F0Lk1J\nTl9WQUxVRSkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgIGJ1ZyhnZXRDdXJyZW50UGxhdGZvcm0oKSwgNDk0LCBlLAog\nICAgICAgICAgICAgICAgICAgICJTb21lIGRhdGFiYXNlcyBjYW5ub3Qgc3Rv\ncmUgRmxvYXQuTUlOX1ZBTFVFIik7CiAgICAgICAgfSBjYXRjaCAoQXNzZXJ0\naW9uRmFpbGVkRXJyb3IgZSkgewogICAgICAgICAgICBidWcoZ2V0Q3VycmVu\ndFBsYXRmb3JtKCksIDQ5NCwgZSwKICAgICAgICAgICAgICAgICAgICAiU29t\nZSBkYXRhYmFzZXMgY2Fubm90IHN0b3JlIEZsb2F0Lk1JTl9WQUxVRSIpOwog\nICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEZsb2F0\nTmFOKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEFsbEZpZWxkVHlw\nZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAg\nICAgICAgYWZ0dC5zZXRUZXN0ZmxvYXQoRmxvYXQuTmFOKTsKICAgICAgICAg\nICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0ZmxvYXQgPSIsIG5ldyBGbG9h\ndChGbG9hdC5OYU4pKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkg\newogICAgICAgICAgICBidWcoNDYxLCB0LCAiTmFOIHByb2JsZW1zIik7CiAg\nICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmxvYXRO\nZWdhdGl2ZUluZmluaXR5KCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rl\nc3QoKTsKICAgICAgICAgICAgYWZ0dC5zZXRUZXN0ZmxvYXQoRmxvYXQuTkVH\nQVRJVkVfSU5GSU5JVFkpOwogICAgICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0\ndCwgInRlc3RmbG9hdCA9IiwKICAgICAgICAgICAgICAgICAgICBuZXcgRmxv\nYXQoRmxvYXQuTkVHQVRJVkVfSU5GSU5JVFkpKTsKICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBidWcoZ2V0Q3VycmVudFBs\nYXRmb3JtKCksIDQ5NCwgZSwKICAgICAgICAgICAgICAgICAgICAiU29tZSBk\nYXRhYmFzZXMgY2Fubm90IHN0b3JlIEZsb2F0Lk5FR0FUSVZFX0lORklOSVRZ\nIik7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRmxvYXRQb3N0aXZpZUluZmluaXR5KCkgewogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRU\neXBlc1Rlc3QoKTsKICAgICAgICAgICAgYWZ0dC5zZXRUZXN0ZmxvYXQoRmxv\nYXQuUE9TSVRJVkVfSU5GSU5JVFkpOwogICAgICAgICAgICBzYXZlQW5kUXVl\ncnkoYWZ0dCwgInRlc3RmbG9hdCA9IiwKICAgICAgICAgICAgICAgICAgICBu\nZXcgRmxvYXQoRmxvYXQuUE9TSVRJVkVfSU5GSU5JVFkpKTsKICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBidWcoZ2V0Q3Vy\ncmVudFBsYXRmb3JtKCksIDQ5NCwgZSwKICAgICAgICAgICAgICAgICAgICAi\nU29tZSBkYXRhYmFzZXMgY2Fubm90IHN0b3JlIEZsb2F0LlBPU0lUSVZFX0lO\nRklOSVRZIik7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RG91YmxlTWF4KCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rl\nc3QoKTsKICAgICAgICAgICAgYWZ0dC5zZXRUZXN0ZG91YmxlKERvdWJsZS5N\nQVhfVkFMVUUpOwogICAgICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwgInRl\nc3Rkb3VibGUgPSIsCiAgICAgICAgICAgICAgICAgICAgbmV3IERvdWJsZShE\nb3VibGUuTUFYX1ZBTFVFKSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgYnVnKGdldEN1cnJlbnRQbGF0Zm9ybSgpLCA0\nOTQsIGUsCiAgICAgICAgICAgICAgICAgICAgIlNvbWUgZGF0YWJhc2VzIGNh\nbm5vdCBzdG9yZSBEb3VibGUuTUFYX1ZBTFVFIik7CiAgICAgICAgfQogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RG91YmxlTWluKCkgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQg\nPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAgICAgICAgYWZ0dC5z\nZXRUZXN0ZG91YmxlKERvdWJsZS5NSU5fVkFMVUUpOwogICAgICAgICAgICBz\nYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3Rkb3VibGUgPSIsCiAgICAgICAgICAg\nICAgICAgICAgbmV3IERvdWJsZShEb3VibGUuTUlOX1ZBTFVFKSk7CiAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYnVnKEVu\ndW1TZXQub2YoQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5QT1NUR1JFU1FM\nLAogICAgICAgICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5T\nUUxTRVJWRVIsCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBs\nYXRmb3JtLk9SQUNMRSwKICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENh\nc2UuUGxhdGZvcm0uRU1QUkVTUywKICAgICAgICAgICAgICAgIEFic3RyYWN0\nVGVzdENhc2UuUGxhdGZvcm0uREIyLAogICAgICAgICAgICAgICAgQWJzdHJh\nY3RUZXN0Q2FzZS5QbGF0Zm9ybS5JTkZPUk1JWCwKICAgICAgICAgICAgICAg\nIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uREVSQlkpLCA0OTQsIGUsCiAg\nICAgICAgICAgICAgICAiU29tZSBkYXRhYmFzZXMgY2Fubm90IHN0b3JlIERv\ndWJsZS5NSU5fVkFMVUUiKTsKICAgICAgICB9IGNhdGNoIChBc3NlcnRpb25G\nYWlsZWRFcnJvciBlKSB7CiAgICAgICAgICAgIGJ1ZyhBYnN0cmFjdFRlc3RD\nYXNlLlBsYXRmb3JtLk1ZU1FMLCA0OTQsIGUsCiAgICAgICAgICAgICAgICAg\nICAgIlNvbWUgZGF0YWJhc2VzIGNhbm5vdCBzdG9yZSBEb3VibGUuTUlOX1ZB\nTFVFIik7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RG91YmxlTmFOKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEFs\nbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3Qo\nKTsKICAgICAgICAgICAgYWZ0dC5zZXRUZXN0ZG91YmxlKERvdWJsZS5OYU4p\nOwogICAgICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3Rkb3VibGUg\nPSIsIG5ldyBEb3VibGUoRG91YmxlLk5hTikpOwogICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIGJ1Zyg0NjEsIHQsICJOYU4g\ncHJvYmxlbXMiKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyB2\nb2lkIHRlc3REb3VibGVOZWdhdGl2ZUluZmluaXR5KCkgewogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcg\nQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAgICAgICAgYWZ0dC5zZXRUZXN0\nZG91YmxlKERvdWJsZS5ORUdBVElWRV9JTkZJTklUWSk7CiAgICAgICAgICAg\nIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGRvdWJsZSA9IiwKICAgICAgICAg\nICAgICAgICAgICBuZXcgRG91YmxlKERvdWJsZS5ORUdBVElWRV9JTkZJTklU\nWSkpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAg\nICAgIGJ1Zyg0NjEsIHQsICJpbmZpbml0eSBwcm9ibGVtcyIpOwogICAgICAg\nIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdERvdWJsZVBvc3Rp\ndmllSW5maW5pdHkoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQWxs\nRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgp\nOwogICAgICAgICAgICBhZnR0LnNldFRlc3Rkb3VibGUoRG91YmxlLlBPU0lU\nSVZFX0lORklOSVRZKTsKICAgICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQs\nICJ0ZXN0ZG91YmxlID0iLAogICAgICAgICAgICAgICAgICAgIG5ldyBEb3Vi\nbGUoRG91YmxlLlBPU0lUSVZFX0lORklOSVRZKSk7CiAgICAgICAgfSBjYXRj\naCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgYnVnKDQ2MSwgdCwgImlu\nZmluaXR5IHByb2JsZW1zIik7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RCeXRlTWluKCkgewogICAgICAgIEFsbEZpZWxkVHlwZXNU\nZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAgICBh\nZnR0LnNldFRlc3RieXRlKEJ5dGUuTUlOX1ZBTFVFKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3RieXRlID0i\nLCBuZXcgQnl0ZShCeXRlLk1JTl9WQUxVRSkpOwogICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIC8vYnVnKEFic3RyYWN0VGVz\ndENhc2UuUGxhdGZvcm0uRU1QUkVTUywgODg5LCB0LCAiRW1wcmVzcyBjYW5u\nb3Qgc3RvcmUgbWluIHZhbHVlcyIpOwogICAgICAgICAgICBBc3NlcnQuZmFp\nbCgKICAgICAgICAgICAgICAgICJFeGNlcHRpb24gd2FzIHRocm93biB3aGls\nZSBzdG9yaW5nIEJ5dGUuTUlOX1ZBTFVFIDogXG4iICsKICAgICAgICAgICAg\nICAgICAgICBnZXRTdGFja1RyYWNlKHQpKTsKICAgICAgICB9CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdEJ5dGVNYXgoKSB7CiAgICAgICAgQWxsRmll\nbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOwog\nICAgICAgIGFmdHQuc2V0VGVzdGJ5dGUoQnl0ZS5NQVhfVkFMVUUpOwogICAg\nICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGJ5dGUgPSIsIG5ldyBCeXRl\nKEJ5dGUuTUFYX1ZBTFVFKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RaZXJvQmlnSW50ZWdlcigpIHsKICAgICAgICBBbGxGaWVsZFR5cGVz\nVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlwZXNUZXN0KCk7CiAgICAgICAg\nYWZ0dC5zZXRUZXN0QmlnSW50ZWdlcihCaWdJbnRlZ2VyLlpFUk8pOwogICAg\nICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdEJpZ0ludGVnZXIgPSIsIEJp\nZ0ludGVnZXIuWkVSTyk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RPbmVCaWdJbnRlZ2VyKCkgewogICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0\nIGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsKICAgICAgICBhZnR0\nLnNldFRlc3RCaWdJbnRlZ2VyKEJpZ0ludGVnZXIuT05FKTsKICAgICAgICBz\nYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3RCaWdJbnRlZ2VyID0iLCBCaWdJbnRl\nZ2VyLk9ORSk7CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBzYXZlQW5k\nUXVlcnkoT2JqZWN0IG9iaiwgU3RyaW5nIHF1ZXJ5LCBPYmplY3QgcGFyYW0p\nIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKGZh\nbHNlLCBmYWxzZSk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgcG0u\ncGVyc2lzdChvYmopOwogICAgICAgIGVuZFR4KHBtKTsKICAgICAgICBlbmRF\nbShwbSk7CgogICAgICAgIHBtID0gZ2V0UE0oZmFsc2UsIGZhbHNlKTsKLy8g\nICAgICAgIFF1ZXJ5IHEgPSBwbS5uZXdRdWVyeShvYmouZ2V0Q2xhc3NxdWVy\neSk7Ci8vICAgICAgICBxLmRlY2xhcmVQYXJhbWV0ZXJzKCJPYmplY3QgcGFy\nYW0iKTsKLy8gICAgICAgIENvbGxlY3Rpb24gYyA9IChDb2xsZWN0aW9uKSBx\nLmV4ZWN1dGUocGFyYW0pOwogICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0u\nY3JlYXRlUXVlcnkoCiAgICAgICAgICAgICJTRUxFQ1QgYSBGUk9NIEFsbEZp\nZWxkVHlwZXNUZXN0IGEgV0hFUkUgYS4iICsgcXVlcnkgKyAiICIgKyBwYXJh\nbSk7CiAgICAgICAgQ29sbGVjdGlvbiBjID0gKENvbGxlY3Rpb24pIHEuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydFNpemUoMSwgYyk7CiAgICAg\nICAgcG0uY2xvc2UoKTsKICAgIH0KfQoKCg==\n","encoding":"base64"}

