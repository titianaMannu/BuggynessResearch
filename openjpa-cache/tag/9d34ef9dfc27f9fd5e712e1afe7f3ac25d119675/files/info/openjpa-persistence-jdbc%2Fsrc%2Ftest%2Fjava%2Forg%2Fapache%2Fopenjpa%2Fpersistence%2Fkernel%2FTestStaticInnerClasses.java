{"sha":"dd09b918af09b5ab5c3d355bc606a7f15a08fd37","node_id":"MDQ6QmxvYjIwNjM2NDpkZDA5YjkxOGFmMDliNWFiNWMzZDM1NWJjNjA2YTdmMTVhMDhmZDM3","size":4416,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/dd09b918af09b5ab5c3d355bc606a7f15a08fd37","content":"LyoKICogVGVzdFN0YXRpY0lubmVyQ2xhc3Nlcy5qYXZhCiAqCiAqIENyZWF0\nZWQgb24gT2N0b2JlciAxMywgMjAwNiwgNTo0NSBQTQogKgogKiBUbyBjaGFu\nZ2UgdGhpcyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFu\nYWdlcgogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4K\nICovCgovKgogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZv\ndW5kYXRpb24gKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0\nb3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQog\nKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBp\nbmZvcm1hdGlvbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4g\nIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vu\nc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29t\ncGxpYW5jZQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4g\nYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4gICAg\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5r\nZXJuZWw7CgppbXBvcnQgamF2YS51dGlsLkxpbmtlZExpc3Q7CmltcG9ydCBq\nYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0\neTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlRhYmxlOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFu\nYWdlcjsKCnB1YmxpYyBjbGFzcyBUZXN0U3RhdGljSW5uZXJDbGFzc2VzIGV4\ndGVuZHMgQmFzZUtlcm5lbFRlc3QgewoKICAgIHByaXZhdGUgT2JqZWN0IF9v\naWQgPSBudWxsOwoKICAgIC8qKgogICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0\nYW5jZSBvZiBUZXN0U3RhdGljSW5uZXJDbGFzc2VzCiAgICAgKi8KICAgIHB1\nYmxpYyBUZXN0U3RhdGljSW5uZXJDbGFzc2VzKCkgewogICAgfQoKICAgIHB1\nYmxpYyBUZXN0U3RhdGljSW5uZXJDbGFzc2VzKFN0cmluZyBuYW1lKSB7CiAg\nICAgICAgc3VwZXIobmFtZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nVXAoKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIElubmVy\nIGlubmVyID0gbmV3IElubmVyKCJmb28iKTsKICAgICAgICBpbm5lci5hZGRU\nd2luKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQ\nTSgpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIHBtLnBlcnNpc3Qo\naW5uZXIpOwogICAgICAgIF9vaWQgPSBwbS5nZXRPYmplY3RJZChpbm5lcik7\nCiAgICAgICAgZW5kVHgocG0pOwogICAgICAgIGVuZEVtKHBtKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0QnlJZCgpIHsKICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7CiAgICAgICAgSW5uZXIg\naW5uZXIgPSAoSW5uZXIpIHBtLmZpbmQoSW5uZXIuY2xhc3MsIF9vaWQpOwog\nICAgICAgIGFzc2VydE5vdE51bGwoaW5uZXIpOwogICAgICAgIGFzc2VydEVx\ndWFscygiZm9vIiwgaW5uZXIuZ2V0U3RyaW5nKCkpOwogICAgICAgIGVuZEVt\nKHBtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0QnlRdWVyeSgp\nIHsKLy8gICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0o\nKTsKLy8KLy8gICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlTmF0\naXZlUXVlcnkoIiIsSW5uZXIuY2xhc3MpOwovLyAgICAgICAgLy9GSVhNRSBq\ndGhvbWFzCi8vICAgICAgICAvKgovLyAgICAgICAgcS5zc2V0Q2FuZGlkYXRl\ncyhwbS5jcmVhdGVFeHRlbnQoSW5uZXIuY2xhc3MsIGZhbHNlKSk7Ci8vICAg\nICAgICBxLmRlY2xhcmVWYXJpYWJsZXMoSW5uZXIuY2xhc3MuZ2V0TmFtZSgp\nICsgIiBpbm5lcjsiKTsKLy8gICAgICAgIHEuc2V0RmlsdGVyKCJ0d2lucy5j\nb250YWlucyAoaW5uZXIpICYmIGlubmVyLnN0cmluZyA9PSBcImZvb1wiIik7\nCi8vICAgICAgICBxLnNldE9yZGVyaW5nKCJzdHJpbmcgYXNjZW5kaW5nLCBu\ndW0gZGVzY2VuZGluZyIpOwovLyAgICAgICAgSXRlcmF0b3IgaXRlciA9IG51\nbGw7Ci8vICAgICAgICB0cnkgewovLyAgICAgICAgICAgIGl0ZXIgPSAoKENv\nbGxlY3Rpb24pIHEuZXhlY3V0ZSgpKS5pdGVyYXRvcigpOwovLyAgICAgICAg\nfSBjYXRjaCAoSkRPRXhjZXB0aW9uIGpkb2UpIHsKLy8gICAgICAgICAgICBp\nZiAoamRvZS5nZXRNZXNzYWdlKCkuaW5kZXhPZigiaXMgYW1iaWd1b3VzIikg\nIT0gLTEpCi8vICAgICAgICAgICAgICAgIGJ1ZyhBYnN0cmFjdFRlc3RDYXNl\nLlBsYXRmb3JtLlBPU1RHUkVTUUwsIDc0LCBqZG9lLAovLyAgICAgICAgICAg\nICAgICAgICAgICAgICJTb3J0cyBpbiBQb3N0Z3JlU1FMIG1heSByZXN1bHQi\nCi8vICAgICAgICAgICAgICAgICAgICAgICAgKyAiaW4gXCJPUkRFUiBCWSAn\nbXlfc29ydF9rZXknIGlzIGFtYmlndW91c1wiIik7Ci8vICAgICAgICAgICAg\nZWxzZQovLyAgICAgICAgICAgICAgICB0aHJvdyBqZG9lOwovLyAgICAgICAg\nfQovLwovLyAgICAgICAgYXNzZXJ0Tm90TnVsbChpdGVyKTsKLy8gICAgICAg\nIGFzc2VydFRydWUoaXRlci5oYXNOZXh0KCkpOwovLyAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJmb28iLCAoKElubmVyKSBpdGVyLm5leHQoKSkuZ2V0U3RyaW5n\nKCkpOwovLyAgICAgICAgKi8KLy8gICAgICAgIGVuZEVtKHBtLCgpKTsKICAg\nICAgICAvKk9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsKICAg\nICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlUXVlcnkoIlNFTEVD\nVCBjIEZST00gVGVzdFN0YXRpY0lubmVyQ2xhc3Nlcy5Jbm5lciBjIFdIRVJF\nIGMuc3RyaW5nID0gJ2ZvbycgT1JERVIgQlkgYy5zdHJpbmcgQVNDIik7CiAg\nICAgICAgICBxLnNldENhbmRpZGF0ZUNvbGxlY3Rpb24oKENvbGxlY3Rpb24p\ncG0uY3JlYXRlRXh0ZW50KFRlc3RTdGF0aWNJbm5lckNsYXNzZXMuSW5uZXIu\nY2xhc3MsIGZhbHNlKSk7CgogICAgICAgICAgdHJ5CiAgICAgICAgICB7CiAg\nICAgICAgICAgICAgSXRlcmF0b3IgaXRlciA9ICgoQ29sbGVjdGlvbikgcS5n\nZXRSZXN1bHRMaXN0KCkpLml0ZXJhdG9yKCk7CiAgICAgICAgICB9CiAgICAg\nICAgICBjYXRjaCAoRXhjZXB0aW9uIGpkb2UpCiAgICAgICAgICB7CiAgICAg\nICAgICAgICAgaWYgKGpkb2UuZ2V0TWVzc2FnZSgpLmluZGV4T2YoImlzIGFt\nYmlndW91cyIpICE9IC0xKQogICAgICAgICAgICAgICAgICBidWcoQWJzdHJh\nY3RUZXN0Q2FzZS5QbGF0Zm9ybS5QT1NUR1JFU1FMLCA3NCwgamRvZSwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAiU29ydHMgaW4gUG9zdGdyZVNRTCBt\nYXkgcmVzdWx0IgogICAgICAgICAgICAgICAgICAgICAgICAgICsgImluIFwi\nT1JERVIgQlkgJ215X3NvcnRfa2V5JyBpcyBhbWJpZ3VvdXNcIiIpOwogICAg\nICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgdGhyb3cgamRvZTsK\nICAgICAgICAgIH0qLwoKICAgIH0KCiAgICBARW50aXR5CiAgICBAVGFibGUo\nbmFtZT0iU3RhdGljSW5uZXIiKQogICAgcHVibGljIHN0YXRpYyBjbGFzcyBJ\nbm5lciB7CgogICAgICAgIHByaXZhdGUgaW50IG51bSA9IDA7CiAgICAgICAg\ncHJpdmF0ZSBTdHJpbmcgc3RyaW5nID0gbnVsbDsKICAgICAgICBwcml2YXRl\nIExpc3QgdHdpbnMgPSBuZXcgTGlua2VkTGlzdCgpOwoKICAgICAgICBwcm90\nZWN0ZWQgSW5uZXIoKSB7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgSW5u\nZXIoU3RyaW5nIHN0cmluZykgewogICAgICAgICAgICB0aGlzLnN0cmluZyA9\nIHN0cmluZzsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGFkZFR3\naW4oKSB7CiAgICAgICAgICAgIHR3aW5zLmFkZChuZXcgSW5uZXIoc3RyaW5n\nKSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmlu\nZygpIHsKICAgICAgICAgICAgcmV0dXJuIHN0cmluZzsKICAgICAgICB9CiAg\nICB9Cn0K\n","encoding":"base64"}

