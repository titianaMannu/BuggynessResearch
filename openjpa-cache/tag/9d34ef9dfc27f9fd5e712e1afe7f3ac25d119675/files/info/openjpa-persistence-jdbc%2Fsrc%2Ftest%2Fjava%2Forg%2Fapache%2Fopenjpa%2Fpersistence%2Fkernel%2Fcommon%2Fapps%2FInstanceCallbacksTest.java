{"sha":"2f057b33d0d889530cb73ce87edeabbc295a9859","node_id":"MDQ6QmxvYjIwNjM2NDoyZjA1N2IzM2QwZDg4OTUzMGNiNzNjZTg3ZWRlYWJiYzI5NWE5ODU5","size":5217,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2f057b33d0d889530cb73ce87edeabbc295a9859","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVs\nLmNvbW1vbi5hcHBzOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkJhc2lj\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuQ2FzY2FkZVR5cGU7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5Db2x1bW47CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5FbnRpdHk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5PbmVU\nb09uZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlBvc3RMb2FkOwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuUHJlUGVyc2lzdDsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLlByZVJlbW92ZTsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLlByZVVwZGF0ZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlRhYmxl\nOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVu\nSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CgovKioKICogVXNlZCBp\nbiB0ZXN0aW5nOyBzaG91bGQgYmUgZW5oYW5jZWQuCiAqLwpARW50aXR5CkBU\nYWJsZShuYW1lID0gImljYnQiKQpwdWJsaWMgY2xhc3MgSW5zdGFuY2VDYWxs\nYmFja3NUZXN0IHsKCiAgICBwdWJsaWMgc3RhdGljIGxvbmcgcHJlRGVsZXRl\nSW52b2NhdGlvbnMgPSAwOwogICAgcHVibGljIHN0YXRpYyBsb25nIHBvc3RM\nb2FkSW52b2NhdGlvbnMgPSAwOwogICAgcHVibGljIHN0YXRpYyBsb25nIHBy\nZVN0b3JlSW52b2NhdGlvbnMgPSAwOwogICAgcHVibGljIHN0YXRpYyBsb25n\nIHByZUNsZWFySW52b2NhdGlvbnMgPSAwOwoKICAgIHB1YmxpYyB0cmFuc2ll\nbnQgYm9vbGVhbiBwb3N0TG9hZENhbGxlZCA9IGZhbHNlOwogICAgcHVibGlj\nIHRyYW5zaWVudCBib29sZWFuIHByZVN0b3JlQ2FsbGVkID0gZmFsc2U7CiAg\nICBwdWJsaWMgdHJhbnNpZW50IGJvb2xlYW4gcHJlRGVsZXRlQ2FsbGVkID0g\nZmFsc2U7CiAgICBwdWJsaWMgdHJhbnNpZW50IGJvb2xlYW4gcHJlQ2xlYXJD\nYWxsZWQgPSBmYWxzZTsKCiAgICBwdWJsaWMgdHJhbnNpZW50IGludCBwcmVE\nZWxldGVDeWNsZSA9IC0xOwogICAgcHVibGljIHRyYW5zaWVudCBib29sZWFu\nIGZsdXNoSW5QcmVTdG9yZSA9IGZhbHNlOwoKICAgIC8vIHRoaXMgc3RyaW5n\nIHNob3VsZCBuZXZlciBiZSBudWxsIGluIGpkb1Bvc3RMb2FkCiAgICBAQ29s\ndW1uKGxlbmd0aCA9IDM1KQogICAgcHJpdmF0ZSBTdHJpbmcgbm9uTnVsbFN0\ncmluZyA9IG51bGw7CgogICAgQENvbHVtbihsZW5ndGggPSAzNSkKICAgIHBy\naXZhdGUgU3RyaW5nIHN0cmluZ0ZpZWxkID0gbnVsbDsKICAgIEBCYXNpYwog\nICAgcHJpdmF0ZSBpbnQgaW50RmllbGQgPSAwOwogICAgQEJhc2ljCiAgICBw\ncml2YXRlIGludCBub25ERkdGaWVsZCA9IDA7CgogICAgQE9uZVRvT25lKGNh\nc2NhZGUgPSBDYXNjYWRlVHlwZS5QRVJTSVNUKQogICAgcHJpdmF0ZSBSdW50\naW1lVGVzdDEgb25lT25lID0gbnVsbDsKCiAgICBAT25lVG9PbmUoY2FzY2Fk\nZSA9IENhc2NhZGVUeXBlLlBFUlNJU1QpCiAgICBwcml2YXRlIEluc3RhbmNl\nQ2FsbGJhY2tzVGVzdCByZWw7CiAgICBwcml2YXRlIHRyYW5zaWVudCBPYmpl\nY3QgcmVsSWQ7CgogICAgcHVibGljIEluc3RhbmNlQ2FsbGJhY2tzVGVzdCgp\nIHsKICAgIH0KCiAgICBwdWJsaWMgSW5zdGFuY2VDYWxsYmFja3NUZXN0KFN0\ncmluZyBzdHJpbmdGaWVsZCwgaW50IGludEZpZWxkKSB7CiAgICAgICAgdGhp\ncy5zdHJpbmdGaWVsZCA9IHN0cmluZ0ZpZWxkOwogICAgICAgIHRoaXMuaW50\nRmllbGQgPSBpbnRGaWVsZDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRO\nb25OdWxsU3RyaW5nKFN0cmluZyB2YWwpIHsKICAgICAgICBub25OdWxsU3Ry\naW5nID0gdmFsOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3RyaW5n\nRmllbGQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nRmllbGQ7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0U3RyaW5nRmllbGQoU3RyaW5nIHN0\ncmluZ0ZpZWxkKSB7CiAgICAgICAgdGhpcy5zdHJpbmdGaWVsZCA9IHN0cmlu\nZ0ZpZWxkOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0SW50RmllbGQoKSB7\nCiAgICAgICAgcmV0dXJuIHRoaXMuaW50RmllbGQ7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0SW50RmllbGQoaW50IGludEZpZWxkKSB7CiAgICAgICAg\ndGhpcy5pbnRGaWVsZCA9IGludEZpZWxkOwogICAgfQoKICAgIHB1YmxpYyBp\nbnQgZ2V0Tm9uREZHRmllbGQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubm9u\nREZHRmllbGQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Tm9uREZHRmll\nbGQoaW50IG5vbkRGR0ZpZWxkKSB7CiAgICAgICAgdGhpcy5ub25ERkdGaWVs\nZCA9IG5vbkRGR0ZpZWxkOwogICAgfQoKICAgIHB1YmxpYyBSdW50aW1lVGVz\ndDEgZ2V0T25lT25lKCkgewogICAgICAgIHJldHVybiB0aGlzLm9uZU9uZTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRPbmVPbmUoUnVudGltZVRlc3Qx\nIG9uZU9uZSkgewogICAgICAgIHRoaXMub25lT25lID0gb25lT25lOwogICAg\nfQoKICAgIEBQb3N0TG9hZAogICAgcHVibGljIHZvaWQgamRvUG9zdExvYWQo\nKSB7CiAgICAgICAgcG9zdExvYWRJbnZvY2F0aW9ucysrOwoKICAgICAgICBw\nb3N0TG9hZENhbGxlZCA9IHRydWU7CiAgICAgICAgaWYgKG5vbk51bGxTdHJp\nbmcgPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0\nZUV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGpkb1ByZUNs\nZWFyKCkgewogICAgICAgIHByZUNsZWFySW52b2NhdGlvbnMrKzsKCiAgICAg\nICAgcHJlQ2xlYXJDYWxsZWQgPSB0cnVlOwogICAgfQoKICAgIEBQcmVQZXJz\naXN0CiAgICBAUHJlVXBkYXRlCiAgICBwdWJsaWMgdm9pZCBqZG9QcmVTdG9y\nZSgpIHsKICAgICAgICBwcmVTdG9yZUludm9jYXRpb25zKys7CgogICAgICAg\nIHByZVN0b3JlQ2FsbGVkID0gdHJ1ZTsKCiAgICAgICAgLy8gZW5zdXJlIHRo\nYXQgd2hlbmV2ZXIgdGhpcyBvYmplY3QgaXMgcGVyc2lzdGVkLAogICAgICAg\nIC8vIG5vbk51bGxTdHJpbmcgaXMsIGluIGZhY3QsIG5vdCBudWxsLgogICAg\nICAgIGlmIChub25OdWxsU3RyaW5nID09IG51bGwpCiAgICAgICAgICAgIG5v\nbk51bGxTdHJpbmcgPSAiKiogdGhpcyBzdHJpbmcgaXMgbm90IG51bGwgKioi\nOwoKICAgICAgICAvLyBhc3NpZ24gbmV3IHZhbHVlIHRvIHJlbGF0aW9uOyBz\naG91bGQgZ2V0IHBlcnNpc3RlZAogICAgICAgIGlmICgiYmFyIi5lcXVhbHMo\nc3RyaW5nRmllbGQpKQogICAgICAgICAgICBvbmVPbmUgPSBuZXcgUnVudGlt\nZVRlc3QxKCJqZG9QcmVTdG9yZSIsCiAgICAgICAgICAgICAgICAoaW50KSAo\nTWF0aC5yYW5kb20oKSAqIEludGVnZXIuTUFYX1ZBTFVFKSk7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBPcGVuSlBBUGVyc2lzdGVuY2Uu\nZ2V0RW50aXR5TWFuYWdlcih0aGlzKTsKICAgICAgICBpZiAoZW0gIT0gbnVs\nbCkgewogICAgICAgICAgICBpZiAocmVsSWQgIT0gbnVsbCkgewogICAgICAg\nICAgICAgICAgSW5zdGFuY2VDYWxsYmFja3NUZXN0IHJlbCA9IGVtLmZpbmQo\nSW5zdGFuY2VDYWxsYmFja3NUZXN0LmNsYXNzLAogICAgICAgICAgICAgICAg\nICAgIHJlbElkKTsKICAgICAgICAgICAgICAgIHJlbC5zZXRSZWwodGhpcyk7\nCiAgICAgICAgICAgICAgICByZWwuc2V0SW50RmllbGQoODg4OCk7CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgaWYgKGZsdXNoSW5QcmVTdG9yZSkKICAg\nICAgICAgICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgfQogICAgfQoKICAg\nIEBQcmVSZW1vdmUKICAgIHB1YmxpYyB2b2lkIGpkb1ByZURlbGV0ZSgpIHsK\nICAgICAgICBwcmVEZWxldGVJbnZvY2F0aW9ucysrOwogICAgICAgIHByZURl\nbGV0ZUNhbGxlZCA9IHRydWU7CiAgICAgICAgaWYgKHByZURlbGV0ZUN5Y2xl\nID49IDAgJiYgcHJlRGVsZXRlQ3ljbGUgPCA1KSB7CiAgICAgICAgICAgIHBy\nZURlbGV0ZUN5Y2xlKys7CiAgICAgICAgICAgIE9wZW5KUEFQZXJzaXN0ZW5j\nZS5nZXRFbnRpdHlNYW5hZ2VyKHRoaXMpLnJlbW92ZSh0aGlzKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHVibGljIEluc3RhbmNlQ2FsbGJhY2tzVGVzdCBn\nZXRSZWwoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVsOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldFJlbChJbnN0YW5jZUNhbGxiYWNrc1Rlc3QgcmVs\nKSB7CiAgICAgICAgdGhpcy5yZWwgPSByZWw7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdCBnZXRSZWxJZCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZWxJ\nZDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRSZWxJZChPYmplY3QgcmVs\nSWQpIHsKICAgICAgICB0aGlzLnJlbElkID0gcmVsSWQ7CiAgICB9Cn0K\n","encoding":"base64"}

