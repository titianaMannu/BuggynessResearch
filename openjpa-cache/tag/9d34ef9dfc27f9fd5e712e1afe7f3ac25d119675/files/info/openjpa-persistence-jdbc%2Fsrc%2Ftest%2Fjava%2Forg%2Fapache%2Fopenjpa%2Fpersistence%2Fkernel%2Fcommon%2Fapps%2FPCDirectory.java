{"sha":"3087418fd723f8a5f2be4d4eed9702ae880989df","node_id":"MDQ6QmxvYjIwNjM2NDozMDg3NDE4ZmQ3MjNmOGE1ZjJiZTRkNGVlZDk3MDJhZTg4MDk4OWRm","size":5184,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3087418fd723f8a5f2be4d4eed9702ae880989df","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVs\nLmNvbW1vbi5hcHBzOwoKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBv\ncnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLlNldDsK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkNhc2NhZGVUeXBlOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5OwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuRmV0Y2hUeXBlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuR2Vu\nZXJhdGVkVmFsdWU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5HZW5lcmF0\naW9uVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLklkOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuTWFueVRvTWFueTsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLk1hbnlUb09uZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLkNvbHVtbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuRmV0Y2hBdHRyaWJ1dGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuRmV0Y2hHcm91cDsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5GZXRjaEdyb3VwczsKCi8qKgogKiBAYXV0aG9y\nIDxBIEhSRUY9Im1haWx0bzpwaW5ha2kucG9kZGFyQGdtYWlsLmNvbT5QaW5h\na2kgUG9kZGFyPC9BPgogKi8KQEVudGl0eQpARmV0Y2hHcm91cHMoewpARmV0\nY2hHcm91cChuYW1lID0gIm5hbWUrcGFyZW50K2dyYW5kcGFyZW50IiwgYXR0\ncmlidXRlcyA9IHsKQEZldGNoQXR0cmlidXRlKG5hbWUgPSAiX25hbWUiKSwK\nQEZldGNoQXR0cmlidXRlKG5hbWUgPSAiX3BhcmVudCIsIHJlY3Vyc2lvbkRl\ncHRoID0gMikKICAgIH0pLApARmV0Y2hHcm91cChuYW1lID0gIm5hbWUrcGFy\nZW50K2dyYW5kcGFyZW50K2dyZWF0Z3JhbmRwYXJlbnQiLCBhdHRyaWJ1dGVz\nID0gewpARmV0Y2hBdHRyaWJ1dGUobmFtZSA9ICJfbmFtZSIpLApARmV0Y2hB\ndHRyaWJ1dGUobmFtZSA9ICJfcGFyZW50IiwgcmVjdXJzaW9uRGVwdGggPSAz\nKQogICAgfSksCkBGZXRjaEdyb3VwKG5hbWUgPSAibmFtZStwYXJlbnQiLCBh\ndHRyaWJ1dGVzID0gewpARmV0Y2hBdHRyaWJ1dGUobmFtZSA9ICJfbmFtZSIp\nLApARmV0Y2hBdHRyaWJ1dGUobmFtZSA9ICJfcGFyZW50IikKICAgIH0pLApA\nRmV0Y2hHcm91cChuYW1lID0gImFsbHBhcmVudHMiLCBhdHRyaWJ1dGVzID0g\newpARmV0Y2hBdHRyaWJ1dGUobmFtZSA9ICJfbmFtZSIpLApARmV0Y2hBdHRy\naWJ1dGUobmFtZSA9ICJfcGFyZW50IiwgcmVjdXJzaW9uRGVwdGggPSAtMSkK\nICAgIH0pLApARmV0Y2hHcm91cChuYW1lID0gIm5hbWUiLCBhdHRyaWJ1dGVz\nID0gQEZldGNoQXR0cmlidXRlKG5hbWUgPSAiX25hbWUiKSkKICAgIH0pCnB1\nYmxpYyBjbGFzcyBQQ0RpcmVjdG9yeSB7CgogICAgQElkCiAgICBAR2VuZXJh\ndGVkVmFsdWUoc3RyYXRlZ3kgPSBHZW5lcmF0aW9uVHlwZS5BVVRPKQogICAg\ncHJpdmF0ZSBpbnQgaWQ7CgogICAgQENvbHVtbihuYW1lPSJuYW1lX2NvbCIp\nCiAgICBwcml2YXRlIFN0cmluZyBfbmFtZTsKCiAgICBATWFueVRvT25lKGZl\ndGNoID0gRmV0Y2hUeXBlLkxBWlksIGNhc2NhZGUgPSBDYXNjYWRlVHlwZS5Q\nRVJTSVNUKQogICAgcHJpdmF0ZSBQQ0RpcmVjdG9yeSBfcGFyZW50OwoKICAg\nIEBNYW55VG9NYW55KGNhc2NhZGUgPSBDYXNjYWRlVHlwZS5QRVJTSVNUKQog\nICAgcHJpdmF0ZSBTZXQ8UENEaXJlY3Rvcnk+IF9jaGlsZHJlbjsKCiAgICBA\nTWFueVRvTWFueShjYXNjYWRlID0gQ2FzY2FkZVR5cGUuUEVSU0lTVCkKICAg\nIHByaXZhdGUgU2V0PFBDRmlsZT4gX2ZpbGVzOwoKICAgIC8qKgogICAgICoK\nICAgICAqLwogICAgcHVibGljIFBDRGlyZWN0b3J5KCkgewogICAgICAgIHN1\ncGVyKCk7CiAgICB9CgogICAgcHVibGljIFBDRGlyZWN0b3J5KFN0cmluZyBu\nYW1lKSB7CiAgICAgICAgc3VwZXIoKTsKICAgICAgICBfbmFtZSA9IG5hbWU7\nCiAgICB9CgogICAgcHVibGljIGludCBnZXRJZCgpIHsKICAgICAgICByZXR1\ncm4gdGhpcy5pZDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldE5hbWUo\nKSB7CiAgICAgICAgcmV0dXJuIF9uYW1lOwogICAgfQoKICAgIHB1YmxpYyBQ\nQ0RpcmVjdG9yeSBnZXRQYXJlbnQoKSB7CiAgICAgICAgcmV0dXJuIF9wYXJl\nbnQ7CiAgICB9CgogICAgcHVibGljIFNldCBnZXRDaGlsZHJlbigpIHsKICAg\nICAgICByZXR1cm4gX2NoaWxkcmVuOwogICAgfQoKICAgIHB1YmxpYyBTZXQg\nZ2V0RmlsZXMoKSB7CiAgICAgICAgcmV0dXJuIF9maWxlczsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBhZGQoUENEaXJlY3RvcnkgZGlyKSB7CiAgICAgICAg\naWYgKGRpciA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgTnVsbFBv\naW50ZXJFeGNlcHRpb24oIm51bGwgZGlyZWN0b3J5Iik7CiAgICAgICAgaWYg\nKGRpci5nZXRQYXJlbnQoKSAhPSBudWxsICYmIGRpci5nZXRQYXJlbnQoKSAh\nPSB0aGlzKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50\nRXhjZXB0aW9uKGRpciArICIgaGFzIGEgZGlmZmVyZW50IHBhcmVudCIpOwog\nICAgICAgIGlmIChfY2hpbGRyZW4gPT0gbnVsbCkKICAgICAgICAgICAgX2No\naWxkcmVuID0gbmV3IEhhc2hTZXQoKTsKICAgICAgICBfY2hpbGRyZW4uYWRk\nKGRpcik7CiAgICAgICAgZGlyLl9wYXJlbnQgPSB0aGlzOwogICAgfQoKICAg\nIHB1YmxpYyBQQ0ZpbGUgYWRkKFN0cmluZyBuYW1lKSB7CiAgICAgICAgaWYg\nKG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IE51bGxQb2lu\ndGVyRXhjZXB0aW9uKCJudWxsIGZpbGUiKTsKICAgICAgICBQQ0ZpbGUgZmls\nZSA9IG5ldyBQQ0ZpbGUodGhpcywgbmFtZSk7CiAgICAgICAgaWYgKF9maWxl\ncyA9PSBudWxsKQogICAgICAgICAgICBfZmlsZXMgPSBuZXcgSGFzaFNldCgp\nOwogICAgICAgIGlmIChfZmlsZXMuY29udGFpbnMoZmlsZSkpCiAgICAgICAg\nICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oImR1cGxp\nY2F0ZSBmaWxlIiArIGZpbGUpOwogICAgICAgIF9maWxlcy5hZGQoZmlsZSk7\nCiAgICAgICAgcmV0dXJuIGZpbGU7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gaXNDaGlsZChQQ0RpcmVjdG9yeSBkaXIsIGJvb2xlYW4gcmVjdXJzZSkg\newogICAgICAgIGlmIChfY2hpbGRyZW4gPT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwoKICAgICAgICBpZiAoX2NoaWxkcmVuLmNvbnRhaW5z\nKGRpcikpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGlmIChy\nZWN1cnNlKSB7CiAgICAgICAgICAgIEl0ZXJhdG9yIGkgPSBfY2hpbGRyZW4u\naXRlcmF0b3IoKTsKICAgICAgICAgICAgd2hpbGUgKGkuaGFzTmV4dCgpKSB7\nCiAgICAgICAgICAgICAgICBQQ0RpcmVjdG9yeSBjaGlsZCA9IChQQ0RpcmVj\ndG9yeSkgaS5uZXh0KCk7CiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuaXND\naGlsZChkaXIsIHJlY3Vyc2UpKQogICAgICAgICAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0NoaWxkKFBD\nRmlsZSBmaWxlLCBib29sZWFuIHJlY3Vyc2UpIHsKICAgICAgICBpZiAoX2Zp\nbGVzICE9IG51bGwgJiYgX2ZpbGVzLmNvbnRhaW5zKGZpbGUpKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgaWYgKF9jaGlsZHJlbiA9PSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIGlmIChy\nZWN1cnNlKSB7CiAgICAgICAgICAgIEl0ZXJhdG9yIGkgPSBfY2hpbGRyZW4u\naXRlcmF0b3IoKTsKICAgICAgICAgICAgd2hpbGUgKGkuaGFzTmV4dCgpKSB7\nCiAgICAgICAgICAgICAgICBQQ0RpcmVjdG9yeSBjaGlsZCA9IChQQ0RpcmVj\ndG9yeSkgaS5uZXh0KCk7CiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuaXND\naGlsZChmaWxlLCByZWN1cnNlKSkKICAgICAgICAgICAgICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBPYmplY3QgcmVm\nbGVjdChQQ0RpcmVjdG9yeSBpbnN0YW5jZSwgU3RyaW5nIG5hbWUpIHsKICAg\nICAgICBpZiAoaW5zdGFuY2UgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIFBDRGly\nZWN0b3J5LmNsYXNzLmdldERlY2xhcmVkRmllbGQobmFtZSkuZ2V0KGluc3Rh\nbmNlKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihlKTsKICAgICAgICB9\nCiAgICB9Cn0K\n","encoding":"base64"}

