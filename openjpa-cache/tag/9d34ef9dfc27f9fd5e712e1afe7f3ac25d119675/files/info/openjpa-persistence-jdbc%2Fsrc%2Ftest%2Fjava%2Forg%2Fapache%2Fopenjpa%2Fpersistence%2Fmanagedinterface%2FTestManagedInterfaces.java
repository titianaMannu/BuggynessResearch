{"sha":"e378fe1c926fabfc459c768ac9ab0652d41069ce","node_id":"MDQ6QmxvYjIwNjM2NDplMzc4ZmUxYzkyNmZhYmZjNDU5Yzc2OGFjOWFiMDY1MmQ0MTA2OWNl","size":16590,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e378fe1c926fabfc459c768ac9ab0652d41069ce","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5tYW5hZ2VkaW50\nZXJmYWNlOwoKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0\naWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9y\ndCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5JdGVy\nYXRvcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5OwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5Tm90Rm91bmRFeGNlcHRpb247Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2lu\nZ2xlRU1GVGVzdENhc2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuSlBBRmFjYWRlSGVscGVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkV4dGVudDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeS5TaW1w\nbGVFbnRpdHk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFz\nc01ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLlBlcnNpc3RlbmNlRXhjZXB0aW9uOwoKcHVibGljIGNsYXNzIFRlc3RN\nYW5hZ2VkSW50ZXJmYWNlcyBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsK\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAg\nICAgIHN1cGVyLnNldFVwKFNpbXBsZUVudGl0eS5jbGFzcywgTWFuYWdlZElu\ndGVyZmFjZUVtYmVkLmNsYXNzLAogICAgICAgICAgICBNYW5hZ2VkSW50ZXJm\nYWNlU3VwLmNsYXNzLCBNYW5hZ2VkSWZhY2UuY2xhc3MsCiAgICAgICAgICAg\nIE1hbmFnZWRJbnRlcmZhY2VPd25lci5jbGFzcywgTWl4ZWRJbnRlcmZhY2Uu\nY2xhc3MsCiAgICAgICAgICAgIE1peGVkSW50ZXJmYWNlSW1wbC5jbGFzcywg\nTm9uTWFwcGVkSW50ZXJmYWNlSW1wbC5jbGFzcywKICAgICAgICAgICAgQ0xF\nQVJfVEFCTEVTKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1iZWRk\nZWRNZXRhRGF0YSgpIHsKICAgICAgICBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpLmNsb3NlKCk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBvd25lck1ldGEg\nPSBKUEFGYWNhZGVIZWxwZXIuZ2V0TWV0YURhdGEoZW1mLAogICAgICAgICAg\nICBNYW5hZ2VkSWZhY2UuY2xhc3MpOwogICAgICAgIENsYXNzTWV0YURhdGEg\nZW1iZWRkZWRNZXRhID0gb3duZXJNZXRhLmdldEZpZWxkKCJlbWJlZCIpCiAg\nICAgICAgICAgIC5nZXREZWZpbmluZ01ldGFEYXRhKCk7CiAgICAgICAgYXNz\nZXJ0VHJ1ZShlbWJlZGRlZE1ldGEuaXNNYW5hZ2VkSW50ZXJmYWNlKCkpOwog\nICAgICAgIGFzc2VydFRydWUoZW1iZWRkZWRNZXRhLmlzSW50ZXJjZXB0aW5n\nKCkpOwoKICAgICAgICBDbGFzc01ldGFEYXRhIGVtYmVkZGFibGVNZXRhID0g\nSlBBRmFjYWRlSGVscGVyLmdldE1ldGFEYXRhKGVtZiwKICAgICAgICAgICAg\nTWFuYWdlZEludGVyZmFjZUVtYmVkLmNsYXNzKTsKICAgICAgICBhc3NlcnRU\ncnVlKGVtYmVkZGFibGVNZXRhLmlzTWFuYWdlZEludGVyZmFjZSgpKTsKICAg\nICAgICBhc3NlcnRUcnVlKGVtYmVkZGFibGVNZXRhLmlzSW50ZXJjZXB0aW5n\nKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNYW5hZ2VkSW50ZXJm\nYWNlKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBNYW5h\nZ2VkSWZhY2UgcGMgPSBlbS5jcmVhdGVJbnN0YW5jZShNYW5hZ2VkSWZhY2Uu\nY2xhc3MpOwogICAgICAgIHBjLnNldEludEZpZWxkU3VwKDMpOwogICAgICAg\nIHBjLnNldEludEZpZWxkKDQpOwogICAgICAgIHBjLnNldEVtYmVkKGVtLmNy\nZWF0ZUluc3RhbmNlKE1hbmFnZWRJbnRlcmZhY2VFbWJlZC5jbGFzcykpOwoK\nICAgICAgICBwYy5nZXRFbWJlZCgpLnNldEVtYmVkSW50RmllbGQoNSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDUsIHBjLmdldEVtYmVkKCkuZ2V0RW1iZWRJ\nbnRGaWVsZCgpKTsKICAgICAgICBlbS5wZXJzaXN0KHBjKTsKICAgICAgICBP\nYmplY3Qgb2lkID0gZW0uZ2V0T2JqZWN0SWQocGMpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIHBjID0gZW0uZmluZChNYW5hZ2VkSWZhY2UuY2xhc3MsIG9pZCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDMsIHBjLmdldEludEZpZWxkU3VwKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyg0LCBwYy5nZXRJbnRGaWVsZCgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoNSwgcGMuZ2V0RW1iZWQoKS5nZXRFbWJlZElu\ndEZpZWxkKCkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICBwYy5zZXRJbnRGaWVsZCgxNCk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoK\nICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyICgpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBRdWVy\neSBxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgbyBmcm9tIE1hbmFn\nZWRJZmFjZSBvICIgKwogICAgICAgICAgICAid2hlcmUgby5pbnRGaWVsZCA9\nIDE0Iik7CiAgICAgICAgcGMgPSAoTWFuYWdlZElmYWNlKSBxdWVyeS5nZXRT\naW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMTQsIHBjLmdl\ndEludEZpZWxkKCkpOwogICAgICAgIGVtLnJlbW92ZShwYyk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9z\nZSgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYXNzZXJ0TnVsbChlbS5maW5k\nKE1hbmFnZWRJZmFjZS5jbGFzcywgb2lkKSk7CiAgICAgICAgfSBjYXRjaCAo\nRW50aXR5Tm90Rm91bmRFeGNlcHRpb24gb25mZSkge30KCiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW50ZXJmYWNl\nT3duZXIoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE1hbmFnZWRJbnRl\ncmZhY2VPd25lciBwYyA9IG5ldyBNYW5hZ2VkSW50ZXJmYWNlT3duZXIoKTsK\nICAgICAgICBwYy5zZXRJRmFjZShlbS5jcmVhdGVJbnN0YW5jZShNYW5hZ2Vk\nSW50ZXJmYWNlU3VwLmNsYXNzKSk7CiAgICAgICAgcGMuc2V0RW1iZWQoZW0u\nY3JlYXRlSW5zdGFuY2UoTWFuYWdlZEludGVyZmFjZUVtYmVkLmNsYXNzKSk7\nCiAgICAgICAgcGMuZ2V0SUZhY2UoKS5zZXRJbnRGaWVsZFN1cCgzKTsKICAg\nICAgICBwYy5nZXRFbWJlZCgpLnNldEVtYmVkSW50RmllbGQoNSk7CgogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5w\nZXJzaXN0KHBjKTsKICAgICAgICBPYmplY3Qgb2lkID0gZW0uZ2V0T2JqZWN0\nSWQocGMpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgcGMgPSBlbS5maW5kKE1hbmFnZWRJbnRlcmZhY2VPd25lci5j\nbGFzcywgb2lkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgcGMuZ2V0SUZh\nY2UoKS5nZXRJbnRGaWVsZFN1cCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nNSwgcGMuZ2V0RW1iZWQoKS5nZXRFbWJlZEludEZpZWxkKCkpOwogICAgICAg\nIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBwYyA9IGVtLmZpbmQoTWFuYWdlZEludGVyZmFj\nZU93bmVyLmNsYXNzLCBvaWQpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBw\nYy5nZXRJRmFjZSgpLmdldEludEZpZWxkU3VwKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyg1LCBwYy5nZXRFbWJlZCgpLmdldEVtYmVkSW50RmllbGQoKSk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNl\nbGVjdCBvIGZyb20gTWFuYWdlZEludGVyZmFjZU93bmVyIG8gIiArCiAgICAg\nICAgICAgICJ3aGVyZSBvLmlmYWNlLmludEZpZWxkU3VwID0gMyBhbmQgby5l\nbWJlZC5lbWJlZEludEZpZWxkID0gNSIpOwogICAgICAgIHBjID0gKE1hbmFn\nZWRJbnRlcmZhY2VPd25lcikgcS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMywgcGMuZ2V0SUZhY2UoKS5nZXRJbnRGaWVsZFN1\ncCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNSwgcGMuZ2V0RW1iZWQoKS5n\nZXRFbWJlZEludEZpZWxkKCkpOwoKICAgICAgICBwYy5nZXRJRmFjZSgpLnNl\ndEludEZpZWxkU3VwKDEzKTsKICAgICAgICBwYy5nZXRFbWJlZCgpLnNldEVt\nYmVkSW50RmllbGQoMTUpOwogICAgICAgIGFzc2VydEVxdWFscygxMywgcGMu\nZ2V0SUZhY2UoKS5nZXRJbnRGaWVsZFN1cCgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMTUsIHBjLmdldEVtYmVkKCkuZ2V0RW1iZWRJbnRGaWVsZCgpKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBwYyA9IGVtLmZpbmQoTWFuYWdlZEludGVyZmFj\nZU93bmVyLmNsYXNzLCBvaWQpOwogICAgICAgIGFzc2VydEVxdWFscygxMywg\ncGMuZ2V0SUZhY2UoKS5nZXRJbnRGaWVsZFN1cCgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMTUsIHBjLmdldEVtYmVkKCkuZ2V0RW1iZWRJbnRGaWVsZCgp\nKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RDb2xsZWN0aW9uKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgTWFuYWdlZElm\nYWNlIHBjID0gZW0uY3JlYXRlSW5zdGFuY2UoTWFuYWdlZElmYWNlLmNsYXNz\nKTsKICAgICAgICBTZXQgc2V0ID0gbmV3IEhhc2hTZXQoKTsKICAgICAgICBz\nZXQuYWRkKG5ldyBJbnRlZ2VyKDMpKTsKICAgICAgICBzZXQuYWRkKG5ldyBJ\nbnRlZ2VyKDQpKTsKICAgICAgICBzZXQuYWRkKG5ldyBJbnRlZ2VyKDUpKTsK\nICAgICAgICBwYy5zZXRTZXRJbnRlZ2VyKHNldCk7CiAgICAgICAgZW0ucGVy\nc2lzdChwYyk7CiAgICAgICAgT2JqZWN0IG9pZCA9IGVtLmdldE9iamVjdElk\nKHBjKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBwYyA9IGVtLmZpbmQoTWFuYWdlZElm\nYWNlLmNsYXNzLCBvaWQpOwogICAgICAgIHNldCA9IHBjLmdldFNldEludGVn\nZXIoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgc2V0LnNpemUoKSk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZShzZXQuY29udGFpbnMobmV3IEludGVnZXIoMykp\nKTsKICAgICAgICBhc3NlcnRUcnVlKHNldC5jb250YWlucyhuZXcgSW50ZWdl\ncig0KSkpOwogICAgICAgIGFzc2VydFRydWUoc2V0LmNvbnRhaW5zKG5ldyBJ\nbnRlZ2VyKDUpKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgIHNldC5yZW1vdmUobmV3IEludGVnZXIoNCkpOwogICAg\nICAgIHNldC5hZGQobmV3IEludGVnZXIoMTQpKTsKICAgICAgICBzZXQuYWRk\nKG5ldyBJbnRlZ2VyKDE1KSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSBlbS5m\naW5kKE1hbmFnZWRJZmFjZS5jbGFzcywgb2lkKTsKICAgICAgICBzZXQgPSBw\nYy5nZXRTZXRJbnRlZ2VyKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHNl\ndC5zaXplKCkpOwogICAgICAgIGFzc2VydFRydWUoc2V0LmNvbnRhaW5zKG5l\ndyBJbnRlZ2VyKDMpKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShzZXQuY29udGFp\nbnMobmV3IEludGVnZXIoNSkpKTsKICAgICAgICBhc3NlcnRUcnVlKHNldC5j\nb250YWlucyhuZXcgSW50ZWdlcigxNCkpKTsKICAgICAgICBhc3NlcnRUcnVl\nKHNldC5jb250YWlucyhuZXcgSW50ZWdlcigxNSkpKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgcGMuc2V0U2V0SW50\nZWdlcihudWxsKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBwYyA9IGVtLmZpbmQoTWFu\nYWdlZElmYWNlLmNsYXNzLCBvaWQpOwogICAgICAgIHNldCA9IHBjLmdldFNl\ndEludGVnZXIoKTsKICAgICAgICBhc3NlcnRUcnVlIChzZXQgPT0gbnVsbCB8\nfCBzZXQuc2l6ZSgpID09IDApOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdENvbGxlY3Rpb25QQygpIHsKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwogICAgICAgIE1hbmFnZWRJZmFjZSBwYyA9IGVtLmNyZWF0ZUluc3RhbmNl\nKE1hbmFnZWRJZmFjZS5jbGFzcyk7CiAgICAgICAgU2V0IHNldCA9IG5ldyBI\nYXNoU2V0KCk7CiAgICAgICAgc2V0LmFkZChuZXcgU2ltcGxlRW50aXR5KCJh\nIiwgIjMiKSk7CiAgICAgICAgc2V0LmFkZChuZXcgU2ltcGxlRW50aXR5KCJi\nIiwgIjQiKSk7CiAgICAgICAgc2V0LmFkZChuZXcgU2ltcGxlRW50aXR5KCJj\nIiwgIjUiKSk7CiAgICAgICAgcGMuc2V0U2V0UEMoc2V0KTsKICAgICAgICBl\nbS5wZXJzaXN0KHBjKTsKICAgICAgICBPYmplY3Qgb2lkID0gZW0uZ2V0T2Jq\nZWN0SWQocGMpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIHBjID0gZW0uZmluZChNYW5h\nZ2VkSWZhY2UuY2xhc3MsIG9pZCk7CiAgICAgICAgc2V0ID0gcGMuZ2V0U2V0\nUEMoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgc2V0LnNpemUoKSk7CiAg\nICAgICAgQ29sbGVjdGlvbiBzZWVuID0gbmV3IEFycmF5TGlzdCgpOwogICAg\nICAgIFNpbXBsZUVudGl0eSByZWw7CiAgICAgICAgU2ltcGxlRW50aXR5IHRv\nUmVtID0gbnVsbDsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ID0gc2V0Lml0\nZXJhdG9yKCk7IGl0Lmhhc05leHQoKTspIHsKICAgICAgICAgICAgcmVsID0g\nKFNpbXBsZUVudGl0eSkgaXQubmV4dCgpOwogICAgICAgICAgICBzZWVuLmFk\nZChyZWwuZ2V0TmFtZSgpKTsKICAgICAgICAgICAgaWYgKHJlbC5nZXRWYWx1\nZSgpLmVxdWFscygiNCIpKQogICAgICAgICAgICAgICAgdG9SZW0gPSByZWw7\nCiAgICAgICAgfQogICAgICAgIGFzc2VydEVxdWFscygzLCBzZWVuLnNpemUo\nKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShzZWVuLmNvbnRhaW5zKCJhIikpOwog\nICAgICAgIGFzc2VydFRydWUoc2Vlbi5jb250YWlucygiYiIpKTsKICAgICAg\nICBhc3NlcnRUcnVlKHNlZW4uY29udGFpbnMoImMiKSk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGFzc2VydE5vdE51\nbGwodG9SZW0pOwogICAgICAgIHNldC5yZW1vdmUodG9SZW0pOwogICAgICAg\nIHNldC5hZGQobmV3IFNpbXBsZUVudGl0eSgieCIsICIxNCIpKTsKICAgICAg\nICBzZXQuYWRkKG5ldyBTaW1wbGVFbnRpdHkoInkiLCAiMTUiKSk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5j\nbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgcGMgPSBlbS5maW5kKE1hbmFnZWRJZmFjZS5jbGFzcywg\nb2lkKTsKICAgICAgICBzZXQgPSBwYy5nZXRTZXRQQygpOwogICAgICAgIGFz\nc2VydEVxdWFscyg0LCBzZXQuc2l6ZSgpKTsKICAgICAgICBzZWVuLmNsZWFy\nKCk7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdCA9IHNldC5pdGVyYXRvcigp\nOyBpdC5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIHJlbCA9IChTaW1wbGVF\nbnRpdHkpIGl0Lm5leHQoKTsKICAgICAgICAgICAgc2Vlbi5hZGQocmVsLmdl\ndE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIGFzc2VydEVxdWFscyg0LCBz\nZWVuLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShzZWVuLmNvbnRhaW5z\nKCJhIikpOwogICAgICAgIGFzc2VydFRydWUoc2Vlbi5jb250YWlucygiYyIp\nKTsKICAgICAgICBhc3NlcnRUcnVlKHNlZW4uY29udGFpbnMoIngiKSk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZShzZWVuLmNvbnRhaW5zKCJ5IikpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBwYy5zZXRT\nZXRQQyhudWxsKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBwYyA9IGVtLmZpbmQoTWFu\nYWdlZElmYWNlLmNsYXNzLCBvaWQpOwogICAgICAgIHNldCA9IHBjLmdldFNl\ndFBDKCk7CiAgICAgICAgYXNzZXJ0VHJ1ZSAoc2V0ID09IG51bGwgfHwgc2V0\nLnNpemUoKSA9PSAwKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RDb2xsZWN0aW9uSW50ZXJmYWNlcygpIHsKICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgIE1hbmFnZWRJZmFjZSBwYyA9IGVtLmNyZWF0ZUluc3Rh\nbmNlKE1hbmFnZWRJZmFjZS5jbGFzcyk7CiAgICAgICAgU2V0IHNldCA9IG5l\ndyBIYXNoU2V0KCk7CiAgICAgICAgc2V0LmFkZChjcmVhdGVJbnN0YW5jZShl\nbSwgMykpOwogICAgICAgIHNldC5hZGQoY3JlYXRlSW5zdGFuY2UoZW0sIDQp\nKTsKICAgICAgICBzZXQuYWRkKGNyZWF0ZUluc3RhbmNlKGVtLCA1KSk7CiAg\nICAgICAgcGMuc2V0U2V0SShzZXQpOwogICAgICAgIGVtLnBlcnNpc3QocGMp\nOwogICAgICAgIE9iamVjdCBvaWQgPSBlbS5nZXRPYmplY3RJZChwYyk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBl\nbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgcGMgPSBlbS5maW5kKE1hbmFnZWRJZmFjZS5jbGFz\ncywgb2lkKTsKICAgICAgICBzZXQgPSBwYy5nZXRTZXRJKCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDMsIHNldC5zaXplKCkpOwogICAgICAgIENvbGxlY3Rp\nb24gc2VlbiA9IG5ldyBBcnJheUxpc3QoKTsKICAgICAgICBNYW5hZ2VkSWZh\nY2UgcmVsID0gbnVsbDsKICAgICAgICBNYW5hZ2VkSWZhY2UgdG9SZW0gPSBu\ndWxsOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXQgPSBzZXQuaXRlcmF0b3Io\nKTsgaXQuaGFzTmV4dCgpOykgewogICAgICAgICAgICByZWwgPSAoTWFuYWdl\nZElmYWNlKSBpdC5uZXh0KCk7CiAgICAgICAgICAgIHNlZW4uYWRkKG5ldyBJ\nbnRlZ2VyKHJlbC5nZXRJbnRGaWVsZCgpKSk7CiAgICAgICAgICAgIGlmIChy\nZWwuZ2V0SW50RmllbGQoKSA9PSA0KQogICAgICAgICAgICAgICAgdG9SZW0g\nPSByZWw7CiAgICAgICAgfQogICAgICAgIGFzc2VydEVxdWFscygzLCBzZWVu\nLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShzZWVuLmNvbnRhaW5zKG5l\ndyBJbnRlZ2VyKDMpKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShzZWVuLmNvbnRh\naW5zKG5ldyBJbnRlZ2VyKDQpKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShzZWVu\nLmNvbnRhaW5zKG5ldyBJbnRlZ2VyKDUpKSk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGFzc2VydE5vdE51bGwodG9S\nZW0pOwogICAgICAgIHNldC5yZW1vdmUodG9SZW0pOwogICAgICAgIHNldC5h\nZGQoY3JlYXRlSW5zdGFuY2UoZW0sIDE0KSk7CiAgICAgICAgc2V0LmFkZChj\ncmVhdGVJbnN0YW5jZShlbSwgMTUpKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAg\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBwYyA9\nIGVtLmZpbmQoTWFuYWdlZElmYWNlLmNsYXNzLCBvaWQpOwogICAgICAgIHNl\ndCA9IHBjLmdldFNldEkoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoNCwgc2V0\nLnNpemUoKSk7CiAgICAgICAgc2Vlbi5jbGVhcigpOwogICAgICAgIGZvciAo\nSXRlcmF0b3IgaXQgPSBzZXQuaXRlcmF0b3IoKTsgaXQuaGFzTmV4dCgpOykg\newogICAgICAgICAgICByZWwgPSAoTWFuYWdlZElmYWNlKSBpdC5uZXh0KCk7\nCiAgICAgICAgICAgIHNlZW4uYWRkKG5ldyBJbnRlZ2VyKHJlbC5nZXRJbnRG\naWVsZCgpKSk7CiAgICAgICAgfQogICAgICAgIGFzc2VydEVxdWFscyg0LCBz\nZWVuLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShzZWVuLmNvbnRhaW5z\nKG5ldyBJbnRlZ2VyKDMpKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShzZWVuLmNv\nbnRhaW5zKG5ldyBJbnRlZ2VyKDUpKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShz\nZWVuLmNvbnRhaW5zKG5ldyBJbnRlZ2VyKDE0KSkpOwogICAgICAgIGFzc2Vy\ndFRydWUoc2Vlbi5jb250YWlucyhuZXcgSW50ZWdlcigxNSkpKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgcGMuc2V0\nU2V0UEMobnVsbCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSBlbS5maW5kKE1h\nbmFnZWRJZmFjZS5jbGFzcywgb2lkKTsKICAgICAgICBzZXQgPSBwYy5nZXRT\nZXRQQygpOwogICAgICAgIGFzc2VydFRydWUgKHNldCA9PSBudWxsIHx8IHNl\ndC5zaXplKCkgPT0gMCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0TWl4ZWRRdWVyeSgpIHsKICAgICAgICBjcmVh\ndGVNaXhlZCgpOwoKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgUXVlcnkgcSA9\nIGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgbyBmcm9tIE1peGVkSW50ZXJmYWNl\nIG8gIiArCiAgICAgICAgICAgICJ3aGVyZSBvLmludEZpZWxkID0gNCIpOwog\nICAgICAgIENvbGxlY3Rpb24gYyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgIFNldCBzZWVuID0gbmV3IEhhc2hTZXQoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMiwgYy5zaXplKCkpOwogICAgICAgIE1peGVkSW50ZXJmYWNlIHBj\nOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXQgPSBjLml0ZXJhdG9yKCk7IGl0\nLmhhc05leHQoKTspIHsKICAgICAgICAgICAgcGMgPSAoTWl4ZWRJbnRlcmZh\nY2UpIGl0Lm5leHQoKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHBj\nLmdldEludEZpZWxkKCkpOwogICAgICAgICAgICBzZWVuLmFkZChwYy5nZXRD\nbGFzcygpKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHNl\nZW4uc2l6ZSgpKTsKICAgICAgICAKICAgICAgICAvLyBDaGFuZ2VzIG9mIE9Q\nRU5KUEEtNDg1IGhhZCB0aGUgcG9zaXRpdmUgKGJ1dCB1bmludGVuZGVkKSBj\nb25zZXF1ZW5jZQogICAgICAgIC8vIG9mIG1ha2luZyB0aGlzIGNhc2UgcGFz\ncywgd2hpY2ggd2FzIGZhaWxpbmcgYmVmb3JlIGFzIHJlcG9ydGVkIGluCiAg\nICAgICAgLy8gT1BFTkpQQS00ODEKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UXVlcnlGb3JNaXhlZEludGVyZmFjZUltcGxzKCkgewogICAgICAgIGNy\nZWF0ZU1peGVkKCk7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBRdWVyeSBx\nID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBvIGZyb20gTWl4ZWRJbnRlcmZh\nY2VJbXBsIG8gIiArCiAgICAgICAgICAgICJ3aGVyZSBvLmludEZpZWxkID0g\nNCIpOwogICAgICAgIE1peGVkSW50ZXJmYWNlIHBjID0gKE1peGVkSW50ZXJm\nYWNlKSBxLmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2VydEVxdWFs\ncyg0LCBwYy5nZXRJbnRGaWVsZCgpKTsKICAgICAgICBhc3NlcnRUcnVlKHBj\nIGluc3RhbmNlb2YgTWl4ZWRJbnRlcmZhY2VJbXBsKTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNaXhlZEV4dGVu\ndCgpIHsKICAgICAgICBjcmVhdGVNaXhlZCgpOwoKICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgRXh0ZW50IGUgPSBlbS5jcmVhdGVFeHRlbnQoTWl4ZWRJbnRl\ncmZhY2UuY2xhc3MsIHRydWUpOwogICAgICAgIFNldCBzZWVuID0gbmV3IEhh\nc2hTZXQoKTsKICAgICAgICBpbnQgc2l6ZSA9IDA7CiAgICAgICAgZm9yIChJ\ndGVyYXRvciBpdCA9IGUuaXRlcmF0b3IoKTsgaXQuaGFzTmV4dCgpOykgewog\nICAgICAgICAgICBzZWVuLmFkZChpdC5uZXh0KCkuZ2V0Q2xhc3MoKSk7CiAg\nICAgICAgICAgIHNpemUrKzsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDMsIHNpemUpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBzZWVuLnNp\nemUoKSk7CgogICAgICAgIGUgPSBlbS5jcmVhdGVFeHRlbnQoTWl4ZWRJbnRl\ncmZhY2UuY2xhc3MsIGZhbHNlKTsKICAgICAgICBzZWVuID0gbmV3IEhhc2hT\nZXQoKTsKICAgICAgICBzaXplID0gMDsKICAgICAgICBmb3IgKEl0ZXJhdG9y\nIGl0ID0gZS5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7KSB7CiAgICAgICAg\nICAgIHNlZW4uYWRkKGl0Lm5leHQoKS5nZXRDbGFzcygpKTsKICAgICAgICAg\nICAgc2l6ZSsrOwogICAgICAgIH0KICAgICAgICBhc3NlcnRFcXVhbHMoMSwg\nc2l6ZSk7CiAgICAgICAgYXNzZXJ0Tm90RXF1YWxzKE1peGVkSW50ZXJmYWNl\nSW1wbC5jbGFzcywgc2Vlbi5pdGVyYXRvcigpLm5leHQoKSk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgY3JlYXRlTWl4\nZWQoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICBNaXhlZEludGVyZmFjZSBwYyA9IGVt\nLmNyZWF0ZUluc3RhbmNlKE1peGVkSW50ZXJmYWNlLmNsYXNzKTsKICAgICAg\nICBwYy5zZXRJbnRGaWVsZCg0KTsKICAgICAgICBlbS5wZXJzaXN0KHBjKTsK\nICAgICAgICBwYyA9IG5ldyBNaXhlZEludGVyZmFjZUltcGwoKTsKICAgICAg\nICBwYy5zZXRJbnRGaWVsZCg0KTsKICAgICAgICBlbS5wZXJzaXN0KHBjKTsK\nICAgICAgICBwYyA9IG5ldyBNaXhlZEludGVyZmFjZUltcGwoKTsKICAgICAg\nICBwYy5zZXRJbnRGaWVsZCg4KTsKICAgICAgICBlbS5wZXJzaXN0KHBjKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFVuaW1w\nbGVtZW50ZWRUaHJvd3NFeGNlcHRpb24oKSB7CiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIE1hbmFnZWRJZmFjZSBwYyA9IGNyZWF0ZUluc3RhbmNlKGVtLCAx\nKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBwYy51bmltcGxlbWVudGVk\nKCk7CiAgICAgICAgICAgIGZhaWwoIkV4Y2VwdGlvbiBleHBlY3RlZC4iKTsK\nICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlv\nbiB1b2UpIHt9IC8vIGdvb2QKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3ROb25NYXBwZWRDcmVhdGVJbnN0YW5jZUV4\nY2VwdGlvbigpIHsKICAgICAgICAvLyBPcGVuSlBBJ3Mgc3VwcG9ydCBvZiBu\nb24tbWFwcGVkIGludGVyZmFjZXMgZGlmZmVycyBmcm9tIEpETyBzdXBwb3J0\nOwogICAgICAgIC8vIHRoZXJlIGlzIG5vIHNwZWNpYWwgcXVlcnkgb3IgcmVs\nYXRpb24gc3VwcG9ydCBmb3Igbm9uLW1hcHBlZAogICAgICAgIC8vIGludGVy\nZmFjZXMgaW4gT3BlbkpQQSBhdCB0aGlzIHRpbWUuCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgZW0gPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICAgICAgZW0uY3JlYXRlSW5zdGFuY2UoTm9uTWFwcGVkSW50ZXJmYWNlLmNs\nYXNzKTsKICAgICAgICAgICAgZmFpbCgiSWxsZWdhbEFyZ3VtZW50RXhjZXB0\naW9uIGV4cGVjdGVkIik7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uIGUpIHt9IC8vIGdvb2QKICAgICAgICBpZiAoZW0gIT0g\nbnVsbCkKICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0ZXN0RGV0YWNoKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgTWFuYWdl\nZElmYWNlIHBjID0gY3JlYXRlSW5zdGFuY2UoZW0sIDQpOwogICAgICAgIGVt\nLnBlcnNpc3QocGMpOwogICAgICAgIE9iamVjdCBvaWQgPSBlbS5nZXRPYmpl\nY3RJZChwYyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgTWFuYWdlZElmYWNlIHBjeCA9\nIGVtLmZpbmQoTWFuYWdlZElmYWNlLmNsYXNzLCBvaWQpOwogICAgICAgIHBj\nID0gZW0uZGV0YWNoKHBjeCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAg\nICAgYXNzZXJ0VHJ1ZShlbS5pc0RldGFjaGVkKHBjKSk7CiAgICAgICAgcGMu\nc2V0SW50RmllbGQoNyk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgZW0ubWVyZ2UocGMpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAg\nICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIHBj\nID0gZW0uZmluZChNYW5hZ2VkSWZhY2UuY2xhc3MsIG9pZCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDcsIHBjLmdldEludEZpZWxkKCkpOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0ZSBNYW5hZ2VkSWZhY2UgY3Jl\nYXRlSW5zdGFuY2UoT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0sIGludCBpKSB7\nCiAgICAgICAgTWFuYWdlZElmYWNlIHBjID0gZW0uY3JlYXRlSW5zdGFuY2Uo\nTWFuYWdlZElmYWNlLmNsYXNzKTsKICAgICAgICBwYy5zZXRJbnRGaWVsZChp\nKTsKICAgICAgICByZXR1cm4gcGM7CiAgICB9Cn0K\n","encoding":"base64"}

