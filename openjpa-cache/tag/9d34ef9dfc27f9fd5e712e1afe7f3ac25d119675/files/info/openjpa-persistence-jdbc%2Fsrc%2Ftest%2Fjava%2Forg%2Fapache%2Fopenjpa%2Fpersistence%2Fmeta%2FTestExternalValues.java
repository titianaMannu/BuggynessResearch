{"sha":"2b14f0935623b8531ffb5e5499db3ebc1eeb18e6","node_id":"MDQ6QmxvYjIwNjM2NDoyYjE0ZjA5MzU2MjNiODUzMWZmYjVlNTQ5OWRiM2ViYzFlZWIxOGU2","size":6556,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2b14f0935623b8531ffb5e5499db3ebc1eeb18e6","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YTsK\nCgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuVVVJ\nRDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwpp\nbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLm1ldGEuY29tbW9uLmFwcHMuRXh0\nZXJuYWxWYWx1ZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuQXJndW1lbnRFeGNlcHRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3Bl\nbkpQQUVudGl0eU1hbmFnZXI7CgovKioKICogPHA+VGVzdHMgdGhlIHtAbGlu\nayBFeHRlcm5hbFZhbHVlc0ZpZWxkTWFwcGluZ30uPC9wPgogKgogKiBAYXV0\naG9yIEFiZSBXaGl0ZQogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIgKGFkZGVk\nIGJpbmRpbmcgcXVlcnkgcGFyYW1ldGVyIHRlc3RzKSAKICovCnB1YmxpYyBj\nbGFzcyBUZXN0RXh0ZXJuYWxWYWx1ZXMKICAgIGV4dGVuZHMgQWJzdHJhY3RU\nZXN0Q2FzZSB7CiAgICAKICAgIHB1YmxpYyBUZXN0RXh0ZXJuYWxWYWx1ZXMo\nU3RyaW5nIHRlc3QpIHsKICAgICAgICBzdXBlcih0ZXN0LCAibWV0YWNhY3R1\nc2FwcCIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkKICAgICAg\nICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBkZWxldGVBbGwoRXh0ZXJu\nYWxWYWx1ZXMuY2xhc3MpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RJ\nbnNlcnQoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPQog\nICAgICAgICAgICAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CgogICAgICAgIEV4\ndGVybmFsVmFsdWVzIHBjID0gbmV3IEV4dGVybmFsVmFsdWVzKCk7CiAgICAg\nICAgcGMuc2V0Qm9vbGVhblRvU2hvcnQodHJ1ZSk7CiAgICAgICAgcGMuc2V0\nQnl0ZVRvRG91YmxlKChieXRlKSA0KTsKICAgICAgICBwYy5zZXRJbnRUb0Zs\nb2F0KDQpOwogICAgICAgIHBjLnNldExvbmdUb0NoYXIoNCk7CiAgICAgICAg\ncGMuc2V0U2hvcnRUb1N0cmluZygoc2hvcnQpIDQpOwogICAgICAgIHBjLnNl\ndEZsb2F0VG9Cb29sZWFuKDQuNWYpOwogICAgICAgIHBjLnNldERvdWJsZVRv\nQnl0ZSg0LjUpOwogICAgICAgIHBjLnNldENoYXJUb0ludCgnZicpOwogICAg\nICAgIHBjLnNldFN0cmluZ1RvTG9uZygiZm9vIik7CiAgICAgICAgcG0ucGVy\nc2lzdChwYyk7CiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElk\nKHBjKTsKICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgZW5kRW0ocG0pOwoK\nICAgICAgICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBwYyA9IChFeHRlcm5hbFZhbHVlcykg\ncG0uZmluZChFeHRlcm5hbFZhbHVlcy5jbGFzcywgb2lkKTsKCiAgICAgICAg\nYXNzZXJ0VHJ1ZShwYy5nZXRCb29sZWFuVG9TaG9ydCgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoKGJ5dGUpIDQsIHBjLmdldEJ5dGVUb0RvdWJsZSgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoNCwgcGMuZ2V0SW50VG9GbG9hdCgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoNCwgcGMuZ2V0TG9uZ1RvQ2hhcigpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoKHNob3J0KSA0LCBwYy5nZXRTaG9ydFRv\nU3RyaW5nKCkpOwogICAgICAgIGFzc2VydFRydWUoNC41ZiA9PSBwYy5nZXRG\nbG9hdFRvQm9vbGVhbigpKTsKICAgICAgICBhc3NlcnRUcnVlKDQuNSA9PSBw\nYy5nZXREb3VibGVUb0J5dGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCdm\nJywgcGMuZ2V0Q2hhclRvSW50KCkpOwogICAgICAgIGFzc2VydEVxdWFscygi\nZm9vIiwgcGMuZ2V0U3RyaW5nVG9Mb25nKCkpOwoKICAgICAgICBlbmRFbShw\nbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdENvbXBsZXhTdHJpbmdz\nKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0KICAgICAg\nICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFu\nYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0pOwoKICAgICAgICBFeHRlcm5h\nbFZhbHVlcyBwYyA9IG5ldyBFeHRlcm5hbFZhbHVlcygpOwogICAgICAgIHBj\nLnNldFNob3J0VG9TdHJpbmcoKHNob3J0KSAzKTsKICAgICAgICBwYy5zZXRT\ndHJpbmdUb0xvbmcoImxvbmcgc3RyaW5nIik7CgogICAgICAgIHBtLnBlcnNp\nc3QocGMpOwogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmplY3RJZChw\nYyk7CiAgICAgICAgZW5kVHgocG0pOwogICAgICAgIGVuZEVtKHBtKTsKCiAg\nICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSAoRXh0ZXJuYWxWYWx1ZXMpIHBt\nLmZpbmQoRXh0ZXJuYWxWYWx1ZXMuY2xhc3MsIG9pZCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDMsIHBjLmdldFNob3J0VG9TdHJpbmcoKSk7CiAgICAgICAg\nZW5kRW0ocG0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RBbGxOdWxs\nKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0KICAgICAg\nICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFu\nYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0pOwoKICAgICAgICBFeHRlcm5h\nbFZhbHVlcyBwYyA9IG5ldyBFeHRlcm5hbFZhbHVlcygpOwogICAgICAgIHBt\nLnBlcnNpc3QocGMpOwogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmpl\nY3RJZChwYyk7CiAgICAgICAgZW5kVHgocG0pOwogICAgICAgIGVuZEVtKHBt\nKTsKCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJl\nbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSAoRXh0ZXJuYWxWYWx1\nZXMpIHBtLmZpbmQoRXh0ZXJuYWxWYWx1ZXMuY2xhc3MsIG9pZCk7CiAgICAg\nICAgZW5kRW0ocG0pOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nUG9zaXRpb25hbEJpbmRpbmdRdWVyeVBhcmFtZXRlckVxdWFsc0RlY2xhcmVk\nVHlwZSgpIHsKICAgICAgICBVVUlEIHV1aWQgPSBuZXcgVVVJRCgxLDQpOwog\nICAgICAgIGNyZWF0ZUluc3RhbmNlKHV1aWQpOwogICAgICAgIAogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwog\nICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBwIEZST00gRXh0ZXJuYWxW\nYWx1ZXMgcCBXSEVSRSBwLnV1aWQ9PzEiOwogICAgICAgIExpc3Q8RXh0ZXJu\nYWxWYWx1ZXM+IHJlc3VsdCA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1l\ndGVyKDEsIHV1aWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEZhbHNl\nKHJlc3VsdC5pc0VtcHR5KCkpOwogICAgICAgIGZvciAoRXh0ZXJuYWxWYWx1\nZXMgeDpyZXN1bHQpIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHV1aWQs\nIHguZ2V0VXVpZCgpKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHRlc3ROYW1lZEJpbmRpbmdRdWVyeVBhcmFtZXRlckVxdWFsc0Rl\nY2xhcmVkVHlwZSgpIHsKICAgICAgICBVVUlEIHV1aWQgPSBuZXcgVVVJRCgy\nLDQpOwogICAgICAgIGNyZWF0ZUluc3RhbmNlKHV1aWQpOwogICAgICAgIAog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdl\ncigpOwogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBwIEZST00gRXh0\nZXJuYWxWYWx1ZXMgcCBXSEVSRSBwLnV1aWQ9OnV1aWQiOwogICAgICAgIExp\nc3Q8RXh0ZXJuYWxWYWx1ZXM+IHJlc3VsdCA9IGVtLmNyZWF0ZVF1ZXJ5KGpw\ncWwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAu\nc2V0UGFyYW1ldGVyKCJ1dWlkIiwgdXVpZCkKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgYXNzZXJ0RmFsc2UocmVzdWx0LmlzRW1wdHkoKSk7CiAgICAgICAgZm9y\nIChFeHRlcm5hbFZhbHVlcyBwYzpyZXN1bHQpIHsKICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKHV1aWQsIHBjLmdldFV1aWQoKSk7CiAgICAgICAgfQogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0UG9zaXRpb25hbEJpbmRpbmdR\ndWVyeVBhcmFtZXRlck5vdEVxdWFsc0V4dGVybmFsaXplZFR5cGUoKSB7CiAg\nICAgICAgVVVJRCB1dWlkID0gbmV3IFVVSUQoMSw0KTsKICAgICAgICBjcmVh\ndGVJbnN0YW5jZSh1dWlkKTsKICAgICAgICAKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBTdHJp\nbmcganBxbCA9ICJTRUxFQ1QgcCBGUk9NIEV4dGVybmFsVmFsdWVzIHAgV0hF\nUkUgcC51dWlkPT8xIjsKICAgICAgICBRdWVyeSBxdWVyeSA9IGVtLmNyZWF0\nZVF1ZXJ5KGpwcWwpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQYXJh\nbWV0ZXIoMSwgdXVpZC50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgZmFpbCgi\nRXhwZWN0ZWQgQXJndW1lbnRFeGNlcHRpb24iKTsKICAgICAgIH0gY2F0Y2gg\nKEFyZ3VtZW50RXhjZXB0aW9uIGV4KSB7CiAgICAgICAgICAgLy8gZXhwZWN0\nZWQKICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0TmFtZWRC\naW5kaW5nUXVlcnlQYXJhbWV0ZXJOb3RFcXVhbHNFeHRlcm5hbGl6ZWRUeXBl\nKCkgewogICAgICAgIFVVSUQgdXVpZCA9IG5ldyBVVUlEKDIsNCk7CiAgICAg\nICAgY3JlYXRlSW5zdGFuY2UodXVpZCk7CiAgICAgICAgCiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIHAgRlJPTSBFeHRlcm5hbFZhbHVl\ncyBwIFdIRVJFIHAudXVpZD06dXVpZCI7CiAgICAgICAgUXVlcnkgcXVlcnkg\nPSBlbS5jcmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgICAgICAgICAgICAg\nICAuc2V0UGFyYW1ldGVyKCJ1dWlkIiwgdXVpZC50b1N0cmluZygpKTsKICAg\nICAgICB0cnkgewogICAgICAgICAgICAgcXVlcnkuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgQXJndW1lbnRFeGNlcHRp\nb24iKTsKICAgICAgICB9IGNhdGNoIChBcmd1bWVudEV4Y2VwdGlvbiBleCkg\newogICAgICAgICAgICAvLyBleHBlY3RlZAogICAgICAgIH0KICAgIH0KICAg\nIAogICAgcHJpdmF0ZSB2b2lkIGNyZWF0ZUluc3RhbmNlKFVVSUQgdXVpZCkg\newogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5TWFu\nYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBFeHRlcm5hbFZhbHVlcyBwYyA9IG5ldyBFeHRlcm5hbFZhbHVl\ncygpOwogICAgICAgIHBjLnNldFV1aWQodXVpZCk7CiAgICAgICAgZW0ucGVy\nc2lzdChwYyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgfQp9Cg==\n","encoding":"base64"}

