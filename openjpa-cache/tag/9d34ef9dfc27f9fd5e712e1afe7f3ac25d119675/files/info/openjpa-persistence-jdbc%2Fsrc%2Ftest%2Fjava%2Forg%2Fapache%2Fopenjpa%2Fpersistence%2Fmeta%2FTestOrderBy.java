{"sha":"66bb501349d1418779d97fd5a77c8e2444d278ac","node_id":"MDQ6QmxvYjIwNjM2NDo2NmJiNTAxMzQ5ZDE0MTg3NzlkOTdmZDVhNzdjOGUyNDQ0ZDI3OGFj","size":9389,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/66bb501349d1418779d97fd5a77c8e2444d278ac","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YTsK\nCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkxp\nc3Q7CgoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5t\nZXRhLmNvbW1vbi5hcHBzLk9yZGVyQnlQQzsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5tZXRhLmNvbW1vbi5hcHBzLk9yZGVyQnlQ\nQ1JlbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5t\nZXRhLmNvbW1vbi5hcHBzLk9yZGVyQnlQQ1JlbFN1YjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJh\nY3RUZXN0Q2FzZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5GZXRjaFBsYW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVF1ZXJ5OwoKLyoqCiAq\nIDxwPlRlc3QgdGhlIDxjb2RlPm9yZGVyLWJ5PC9jb2RlPiBmaWVsZCBleHRl\nbnNpb24uPC9wPgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGlj\nIGNsYXNzIFRlc3RPcmRlckJ5CiAgICBleHRlbmRzIEFic3RyYWN0VGVzdENh\nc2UgewoKICAgIHB1YmxpYyBUZXN0T3JkZXJCeShTdHJpbmcgdGVzdCkgewog\nICAgICAgIHN1cGVyKHRlc3QsICJtZXRhY2FjdHVzYXBwIik7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgZGVsZXRlQWxsKE9y\nZGVyQnlQQ1JlbC5jbGFzcyk7CiAgICAgICAgZGVsZXRlQWxsKE9yZGVyQnlQ\nQy5jbGFzcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFN0cmluZ0xp\nc3QoKSB7CiAgICAgICAgc3RyaW5nTGlzdFRlc3QoZmFsc2UsIGZhbHNlKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RWFnZXJQYXJhbGxlbFN0cmlu\nZ0xpc3QoKSB7CiAgICAgICAgc3RyaW5nTGlzdFRlc3QodHJ1ZSwgdHJ1ZSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVhZ2VySm9pblN0cmluZ0xp\nc3QoKSB7CiAgICAgICAgc3RyaW5nTGlzdFRlc3QodHJ1ZSwgZmFsc2UpOwog\nICAgfQoKICAgIHByaXZhdGUgdm9pZCBzdHJpbmdMaXN0VGVzdChib29sZWFu\nIGVhZ2VyLCBib29sZWFuIHBhcmFsbGVsKSB7CiAgICAgICAgU3RyaW5nW10g\nc3RycyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAgIjkiLCAiMCIsICI1\nIiwgIjEiLCAiMyIsICI3IiwgIjgiLCAiMiIsICI2IiwgIjQiLAogICAgICAg\nIH07CiAgICAgICAgT3JkZXJCeVBDIHBjID0gbmV3IE9yZGVyQnlQQygpOwog\nICAgICAgIHBjLnNldElkKDFMKTsKICAgICAgICBwYy5nZXRTdHJpbmdMaXN0\nQXNjKCkuYWRkQWxsKEFycmF5cy5hc0xpc3Qoc3RycykpOwoKICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBwbSA9CiAgICAgICAgICAgIChPcGVuSlBB\nRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBzdGFydFR4KHBtKTsKICAgICAgICBwbS5wZXJzaXN0KHBjKTsKICAgICAg\nICBlbmRUeChwbSk7CiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVj\ndElkKHBjKTsKICAgICAgICBlbmRFbShwbSk7CgogICAgICAgIHBtID0gKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwog\nICAgICAgIGlmIChlYWdlcikKICAgICAgICAgICAgKChGZXRjaFBsYW4pIHBt\nLmdldEZldGNoUGxhbigpKS5hZGRGaWVsZChPcmRlckJ5UEMuY2xhc3MsCiAg\nICAgICAgICAgICAgICAic3RyaW5nTGlzdEFzYyIpOwogICAgICAgIGlmIChw\nYXJhbGxlbCkgewoKICAgICAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5j\ncmVhdGVRdWVyeSgKICAgICAgICAgICAgICAgICJzZWxlY3QgYSBGUk9NICIg\nKyBPcmRlckJ5UEMuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpKTsKICAgICAgICAg\nICAgTGlzdCByZXMgPSAoTGlzdCkgcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscygxLCByZXMuc2l6ZSgpKTsKICAgICAgICAg\nICAgcGMgPSAoT3JkZXJCeVBDKSByZXMuZ2V0KDApOwogICAgICAgIH0gZWxz\nZQogICAgICAgICAgICBwYyA9IChPcmRlckJ5UEMpIHBtLmZpbmQoT3JkZXJC\neVBDLmNsYXNzLCBvaWQpOwogICAgICAgIExpc3Qgc3RyaW5nTGlzdCA9IHBj\nLmdldFN0cmluZ0xpc3RBc2MoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IDEwOyBpKyspCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhTdHJpbmcu\ndmFsdWVPZihpKSwgc3RyaW5nTGlzdC5nZXQoaSkpOwogICAgICAgIGVuZEVt\nKHBtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW50QXJyYXkoKSB7\nCiAgICAgICAgaW50W10gaW50cyA9IG5ldyBpbnRbXXsgOSwgMCwgNSwgMSwg\nMywgNywgOCwgMiwgNiwgNCwgfTsKICAgICAgICBPcmRlckJ5UEMgcGMgPSBu\nZXcgT3JkZXJCeVBDKCk7CiAgICAgICAgcGMuc2V0SWQoMUwpOwogICAgICAg\nIHBjLnNldEludEFycmF5RGVzYyhpbnRzKTsKCiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgcG0gPQogICAgICAgICAgICAoT3BlbkpQQUVudGl0eU1h\nbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRU\neChwbSk7CiAgICAgICAgcG0ucGVyc2lzdChwYyk7CiAgICAgICAgZW5kVHgo\ncG0pOwogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmplY3RJZChwYyk7\nCiAgICAgICAgZW5kRW0ocG0pOwoKICAgICAgICBwbSA9IChPcGVuSlBBRW50\naXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBw\nYyA9IChPcmRlckJ5UEMpIHBtLmZpbmQoT3JkZXJCeVBDLmNsYXNzLCBvaWQp\nOwogICAgICAgIGludFtdIGludEFycmF5ID0gcGMuZ2V0SW50QXJyYXlEZXNj\nKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDsgaSsrKQogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoOSAtIGksIGludEFycmF5W2ldKTsKICAg\nICAgICBlbmRFbShwbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE9y\nZGVyQnlQSygpIHsKICAgICAgICBvcmRlckJ5UEtUZXN0KGZhbHNlLCBmYWxz\nZSwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFYWdlckpv\naW5PcmRlckJ5UEsoKSB7CiAgICAgICAgb3JkZXJCeVBLVGVzdCh0cnVlLCBm\nYWxzZSwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFYWdl\nclBhcmFsbGVsT3JkZXJCeVBLKCkgewogICAgICAgIG9yZGVyQnlQS1Rlc3Qo\ndHJ1ZSwgdHJ1ZSwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RPbmVUb01hbnlPcmRlckJ5UEsoKSB7CiAgICAgICAgb3JkZXJCeVBLVGVz\ndChmYWxzZSwgZmFsc2UsIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFYWdlckpvaW5PbmVUb01hbnlPcmRlckJ5UEsoKSB7CiAgICAgICAg\nb3JkZXJCeVBLVGVzdCh0cnVlLCBmYWxzZSwgdHJ1ZSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdEVhZ2VyUGFyYWxsZWxPbmVUb01hbnlPcmRlckJ5\nUEsoKSB7CiAgICAgICAgb3JkZXJCeVBLVGVzdCh0cnVlLCB0cnVlLCB0cnVl\nKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgb3JkZXJCeVBLVGVzdChib29s\nZWFuIGVhZ2VyLCBib29sZWFuIHBhcmFsbGVsLAogICAgICAgIGJvb2xlYW4g\nb25lVG9NYW55KSB7CiAgICAgICAgbG9uZ1tdIGlkcyA9IG5ldyBsb25nW117\nIDksIDAsIDUsIDEsIDMsIDcsIDgsIDIsIDYsIDQsIH07CiAgICAgICAgT3Jk\nZXJCeVBDIHBjID0gbmV3IE9yZGVyQnlQQygpOwogICAgICAgIHBjLnNldElk\nKDFMKTsKICAgICAgICBPcmRlckJ5UEMgcGMyID0gbmV3IE9yZGVyQnlQQygp\nOwogICAgICAgIHBjMi5zZXRJZCgyTCk7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgT3JkZXJC\neVBDUmVsIHJlbCA9IChpICUgMiA9PSAwKSA/IG5ldyBPcmRlckJ5UENSZWwo\nKQogICAgICAgICAgICAgICAgOiBuZXcgT3JkZXJCeVBDUmVsU3ViKCk7CiAg\nICAgICAgICAgIHJlbC5zZXRJZChpZHNbaV0pOwogICAgICAgICAgICBpZiAo\nb25lVG9NYW55KSB7CiAgICAgICAgICAgICAgICBwYy5nZXRPbmVUb01hbnlB\nc2MoKS5hZGQocmVsKTsKICAgICAgICAgICAgICAgIHJlbC5zZXRUb09uZShw\nYyk7CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgcGMuZ2V0\nT3JkZXJCeVBLQXNjKCkuYWRkKHJlbCk7CgogICAgICAgICAgICBpZiAocGFy\nYWxsZWwpCiAgICAgICAgICAgICAgICBwYzIuZ2V0T3JkZXJCeVBLQXNjKCku\nYWRkKHJlbCk7CiAgICAgICAgfQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0KICAgICAgICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBj\ndXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0pOwog\nICAgICAgIHBtLnBlcnNpc3QocGMpOwogICAgICAgIHBtLnBlcnNpc3QocGMy\nKTsKICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgT2JqZWN0IG9pZCA9IHBt\nLmdldE9iamVjdElkKHBjKTsKICAgICAgICBlbmRFbShwbSk7CgogICAgICAg\nIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFu\nYWdlcigpOwogICAgICAgIGlmIChlYWdlcikKICAgICAgICAgICAgKChGZXRj\naFBsYW4pIHBtLmdldEZldGNoUGxhbigpKS5hZGRGaWVsZChPcmRlckJ5UEMu\nY2xhc3MsCiAgICAgICAgICAgICAgICAib3JkZXJCeVBLQXNjIik7CiAgICAg\nICAgaWYgKHBhcmFsbGVsKSB7CgogICAgICAgICAgICBPcGVuSlBBUXVlcnkg\ncSA9IHBtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgYSBGUk9NICIgKwogICAgICAg\nICAgICAgICAgT3JkZXJCeVBDLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArICIg\nc2VsZWN0IG9yZGVyIGJ5IGlkIGFzYyIpOwogICAgICAgICAgICBwYyA9IChP\ncmRlckJ5UEMpICgoTGlzdCkgcS5nZXRSZXN1bHRMaXN0KCkpLmdldCgwKTsK\nICAgICAgICAgICAgcS5jbG9zZUFsbCgpOwogICAgICAgIH0gZWxzZQogICAg\nICAgICAgICBwYyA9IChPcmRlckJ5UEMpIHBtLmZpbmQoT3JkZXJCeVBDLmNs\nYXNzLCBvaWQpOwoKICAgICAgICBMaXN0IG9yZGVyQnlQSyA9IChvbmVUb01h\nbnkpID8gcGMuZ2V0T25lVG9NYW55QXNjKCkKICAgICAgICAgICAgOiBwYy5n\nZXRPcmRlckJ5UEtBc2MoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIDEwOyBpKyspCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhpLCAoKE9yZGVy\nQnlQQ1JlbCkgb3JkZXJCeVBLLmdldChpKSkuZ2V0SWQoKSk7CiAgICAgICAg\nZW5kRW0ocG0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RPcmRlckJ5\nUmVsYXRlZEZpZWxkKCkgewogICAgICAgIFN0cmluZ1tdIHN0cnMgPSBuZXcg\nU3RyaW5nW117CiAgICAgICAgICAgICI5IiwgIjAiLCAiNSIsICIxIiwgIjMi\nLCAiNyIsICI4IiwgIjIiLCAiNiIsICI0IiwKICAgICAgICB9OwogICAgICAg\nIE9yZGVyQnlQQyBwYyA9IG5ldyBPcmRlckJ5UEMoKTsKICAgICAgICBwYy5z\nZXRJZCgxTCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIE9yZGVyQnlQQ1JlbCByZWwgPSAo\naSAlIDIgPT0gMCkgPyBuZXcgT3JkZXJCeVBDUmVsKCkKICAgICAgICAgICAg\nICAgIDogbmV3IE9yZGVyQnlQQ1JlbFN1YigpOwogICAgICAgICAgICByZWwu\nc2V0SWQoaSk7CiAgICAgICAgICAgIHJlbC5zZXRTdHJpbmcoc3Ryc1tpXSk7\nCiAgICAgICAgICAgIHBjLmdldE9yZGVyQnlTdHJpbmdEZXNjKCkuYWRkKHJl\nbCk7CiAgICAgICAgfQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nID0KICAgICAgICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAg\nIHBtLnBlcnNpc3QocGMpOwogICAgICAgIGVuZFR4KHBtKTsKICAgICAgICBP\nYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMpOwogICAgICAgIGVuZEVt\nKHBtKTsKCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1\ncnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSAoT3JkZXJCeVBD\nKSBwbS5maW5kKE9yZGVyQnlQQy5jbGFzcywgb2lkKTsKICAgICAgICBMaXN0\nIG9yZGVyQnlSZWxGaWVsZCA9IHBjLmdldE9yZGVyQnlTdHJpbmdEZXNjKCk7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDsgaSsrKQogICAgICAg\nICAgICBhc3NlcnRFcXVhbHMoU3RyaW5nLnZhbHVlT2YoOSAtIGkpLCAoKE9y\nZGVyQnlQQ1JlbCkKICAgICAgICAgICAgICAgIG9yZGVyQnlSZWxGaWVsZC5n\nZXQoaSkpLmdldFN0cmluZygpKTsKICAgICAgICBlbmRFbShwbSk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdE9yZGVyQnlQS0FuZFJlbGF0ZWRGaWVs\nZCgpIHsKICAgICAgICBvcmRlckJ5UEtBbmRSZWxhdGVkRmllbGRUZXN0KGZh\nbHNlLCBmYWxzZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVhZ2Vy\nSm9pbk9yZGVyQnlQS0FuZFJlbGF0ZWRGaWVsZCgpIHsKICAgICAgICBvcmRl\nckJ5UEtBbmRSZWxhdGVkRmllbGRUZXN0KHRydWUsIGZhbHNlKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RWFnZXJQYXJhbGxlbE9yZGVyQnlQS0Fu\nZFJlbGF0ZWRGaWVsZCgpIHsKICAgICAgICBvcmRlckJ5UEtBbmRSZWxhdGVk\nRmllbGRUZXN0KHRydWUsIHRydWUpOwogICAgfQoKICAgIHByaXZhdGUgdm9p\nZCBvcmRlckJ5UEtBbmRSZWxhdGVkRmllbGRUZXN0KGJvb2xlYW4gZWFnZXIs\nIGJvb2xlYW4gcGFyYWxsZWwpIHsKICAgICAgICBPcmRlckJ5UEMgcGMgPSBu\nZXcgT3JkZXJCeVBDKCk7CiAgICAgICAgcGMuc2V0SWQoMUwpOwogICAgICAg\nIE9yZGVyQnlQQyBwYzIgPSBuZXcgT3JkZXJCeVBDKCk7CiAgICAgICAgcGMu\nc2V0SWQoMkwpOwoKICAgICAgICBPcmRlckJ5UENSZWwgcmVsMSA9IG5ldyBP\ncmRlckJ5UENSZWwoKTsKICAgICAgICByZWwxLnNldElkKDFMKTsKICAgICAg\nICByZWwxLnNldFN0cmluZygiMSIpOwogICAgICAgIE9yZGVyQnlQQ1JlbCBy\nZWwyID0gbmV3IE9yZGVyQnlQQ1JlbFN1YigpOwogICAgICAgIHJlbDIuc2V0\nSWQoMkwpOwogICAgICAgIHJlbDIuc2V0U3RyaW5nKCIxIik7CiAgICAgICAg\nT3JkZXJCeVBDUmVsIHJlbDMgPSBuZXcgT3JkZXJCeVBDUmVsKCk7CiAgICAg\nICAgcmVsMy5zZXRJZCgzTCk7CiAgICAgICAgcmVsMy5zZXRTdHJpbmcoIjIi\nKTsKICAgICAgICBPcmRlckJ5UENSZWwgcmVsNCA9IG5ldyBPcmRlckJ5UENS\nZWxTdWIoKTsKICAgICAgICByZWw0LnNldElkKDRMKTsKICAgICAgICByZWw0\nLnNldFN0cmluZygiMiIpOwogICAgICAgIHBjLmdldE9yZGVyQnlTdHJpbmdB\nbmRQS0Rlc2MoKS5hZGRBbGwoQXJyYXlzLmFzTGlzdAogICAgICAgICAgICAo\nbmV3IE9iamVjdFtdeyByZWwxLCByZWwyLCByZWw0LCByZWwzLCB9KSk7CiAg\nICAgICAgaWYgKHBhcmFsbGVsKQogICAgICAgICAgICBwYzIuZ2V0T3JkZXJC\neVN0cmluZ0FuZFBLRGVzYygpLmFkZEFsbChBcnJheXMuYXNMaXN0CiAgICAg\nICAgICAgICAgICAobmV3IE9iamVjdFtdeyByZWwxLCByZWwyLCByZWw0LCBy\nZWwzLCB9KSk7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0K\nICAgICAgICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50\naXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIHBt\nLnBlcnNpc3QocGMpOwogICAgICAgIHBtLnBlcnNpc3QocGMyKTsKICAgICAg\nICBlbmRUeChwbSk7CiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVj\ndElkKHBjKTsKICAgICAgICBlbmRFbShwbSk7CgogICAgICAgIHBtID0gKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwog\nICAgICAgIGlmIChlYWdlcikKICAgICAgICAgICAgKChGZXRjaFBsYW4pIHBt\nLmdldEZldGNoUGxhbigpKS5hZGRGaWVsZChPcmRlckJ5UEMuY2xhc3MsCiAg\nICAgICAgICAgICAgICAib3JkZXJCeVN0cmluZ0FuZFBLRGVzYyIpOwogICAg\nICAgIGlmIChwYXJhbGxlbCkgewogICAgICAgICAgICBPcGVuSlBBUXVlcnkg\ncSA9IHBtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgYSBGUk9NICIgKwogICAgICAg\nICAgICAgICAgT3JkZXJCeVBDLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArICIg\nc2VsZWN0IG9yZGVyIGJ5IGlkIGFzYyIpOwogICAgICAgICAgICBwYyA9IChP\ncmRlckJ5UEMpICgoTGlzdCkgcS5nZXRSZXN1bHRMaXN0KCkpLmdldCgwKTsK\nICAgICAgICAgICAgcS5jbG9zZUFsbCgpOwogICAgICAgIH0gZWxzZQogICAg\nICAgICAgICBwYyA9IChPcmRlckJ5UEMpIHBtLmZpbmQoT3JkZXJCeVBDLmNs\nYXNzLCBvaWQpOwogICAgICAgIExpc3QgbXVsdGlPcmRlciA9IHBjLmdldE9y\nZGVyQnlTdHJpbmdBbmRQS0Rlc2MoKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IDQ7IGkrKykKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDQgLSBp\nLCAoKE9yZGVyQnlQQ1JlbCkgbXVsdGlPcmRlci5nZXQoaSkpLmdldElkKCkp\nOwogICAgICAgIGVuZEVtKHBtKTsKICAgIH0KfQo=\n","encoding":"base64"}

