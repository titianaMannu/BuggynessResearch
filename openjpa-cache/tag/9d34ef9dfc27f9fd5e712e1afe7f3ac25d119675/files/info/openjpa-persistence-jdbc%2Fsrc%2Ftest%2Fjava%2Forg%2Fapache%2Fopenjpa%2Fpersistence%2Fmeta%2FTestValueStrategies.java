{"sha":"dce945df09a057f0648a6f95a94262bf8983f1f3","node_id":"MDQ6QmxvYjIwNjM2NDpkY2U5NDVkZjA5YTA1N2YwNjQ4YTZmOTVhOTQyNjJiZjg5ODNmMWYz","size":12985,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/dce945df09a057f0648a6f95a94262bf8983f1f3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YTsK\nCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5N\nYXA7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFj\ndG9yeTsKCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLm1ldGEuY29tbW9uLmFwcHMuVmFsdWVTdHJhdGVneVBDOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0\ncmFjdFRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLk9wZW5KUEFFeGNlcHRpb247CgovKioKICogPHA+\nVGVzdCB2YWx1ZSBhbmQgdXBkYXRlIHN0cmF0ZWdpZXMuICBBbHNvIHRlc3Rz\nIHZlcnNpb24gZmllbGRzLCB3aGljaAogKiBhcmUgcmVwcmVzZW50ZWQgaW4g\nSkRPIGFzIGEgdmFsdWUgc3RyYXRlZ3kuPC9wPgogKgogKiBAYXV0aG9yIEFi\nZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFRlc3RWYWx1ZVN0cmF0ZWdpZXMK\nICAgIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2FzZSB7CgogICAgcHVibGljIFRl\nc3RWYWx1ZVN0cmF0ZWdpZXMoU3RyaW5nIHRlc3QpIHsKICAgICAgICBzdXBl\ncih0ZXN0LCAibWV0YWNhY3R1c2FwcCIpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldFVwKCkgewogICAgICAgIGRlbGV0ZUFsbChWYWx1ZVN0cmF0ZWd5\nUEMuY2xhc3MpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RJZ25vcmVV\ncGRhdGUoKSB7CiAgICAgICAgVmFsdWVTdHJhdGVneVBDIHBjID0gbmV3IFZh\nbHVlU3RyYXRlZ3lQQygpOwogICAgICAgIHBjLnNldE5hbWUoInBjIik7CiAg\nICAgICAgcGMuc2V0SWdub3JlVXBkYXRlKDEwKTsKCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG0gPQogICAgICAgICAgICAoT3BlbkpQQUVudGl0\neU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgc3Rh\ncnRUeChwbSk7CiAgICAgICAgcG0ucGVyc2lzdChwYyk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEwLCBwYy5nZXRJZ25vcmVVcGRhdGUoKSk7CiAgICAgICAg\nZW5kVHgocG0pOwogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmplY3RJ\nZChwYyk7CiAgICAgICAgZW5kRW0ocG0pOwoKICAgICAgICAvL3BtID0gZ2V0\nUE0oZmFsc2UsIGZhbHNlKTsKICAgICAgICBwbSA9IChPcGVuSlBBRW50aXR5\nTWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBwYyA9\nIChWYWx1ZVN0cmF0ZWd5UEMpIHBtLmZpbmQoVmFsdWVTdHJhdGVneVBDLmNs\nYXNzLCBvaWQpOwogICAgICAgIGFzc2VydE5vdE51bGwocGMpOwogICAgICAg\nIGFzc2VydEVxdWFscygxMCwgcGMuZ2V0SWdub3JlVXBkYXRlKCkpOwogICAg\nICAgIHN0YXJ0VHgocG0pOwogICAgICAgIHBjLnNldElnbm9yZVVwZGF0ZSgx\nMDApOwogICAgICAgIGFzc2VydEZhbHNlKHBtLmlzRGlydHkocGMpKTsKICAg\nICAgICBwbS50cmFuc2FjdGlvbmFsKHBjLCBmYWxzZSk7CiAgICAgICAgZW5k\nVHgocG0pOwogICAgICAgIGFzc2VydEVxdWFscygxMCwgcGMuZ2V0SWdub3Jl\nVXBkYXRlKCkpOwogICAgICAgIGVuZEVtKHBtKTsKCiAgICAgICAgcG0gPSAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgcGMgPSAoVmFsdWVTdHJhdGVneVBDKSBwbS5maW5kKFZhbHVl\nU3RyYXRlZ3lQQy5jbGFzcywgb2lkKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKHBjKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMTAsIHBjLmdldElnbm9yZVVw\nZGF0ZSgpKTsKICAgICAgICBlbmRFbShwbSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdFJlc3RyaWN0VXBkYXRlKCkgewogICAgICAgIFZhbHVlU3Ry\nYXRlZ3lQQyBwYyA9IG5ldyBWYWx1ZVN0cmF0ZWd5UEMoKTsKICAgICAgICBw\nYy5zZXROYW1lKCJwYyIpOwogICAgICAgIHBjLnNldFJlc3RyaWN0VXBkYXRl\nKDEwKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPQogICAg\nICAgICAgICAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgcG0ucGVy\nc2lzdChwYyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwLCBwYy5nZXRSZXN0\ncmljdFVwZGF0ZSgpKTsKICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgT2Jq\nZWN0IG9pZCA9IHBtLmdldE9iamVjdElkKHBjKTsKICAgICAgICBlbmRFbShw\nbSk7CgogICAgICAgIC8vcG0gPSBnZXRQTShmYWxzZSwgZmFsc2UpOwogICAg\nICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5\nTWFuYWdlcigpOwogICAgICAgIHBjID0gKFZhbHVlU3RyYXRlZ3lQQykgcG0u\nZmluZChWYWx1ZVN0cmF0ZWd5UEMuY2xhc3MsIG9pZCk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChwYyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwLCBwYy5n\nZXRSZXN0cmljdFVwZGF0ZSgpKTsKICAgICAgICBzdGFydFR4KHBtKTsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBwYy5zZXRSZXN0cmljdFVwZGF0ZSgx\nMDApOwogICAgICAgICAgICBmYWlsKCJBbGxvd2VkIHVwZGF0ZSBvZiByZXN0\ncmljdGVkIGZpZWxkLiIpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNl\ncHRpb24gcmUpIHsKICAgICAgICB9CiAgICAgICAgZW5kVHgocG0pOwogICAg\nICAgIGFzc2VydEVxdWFscygxMCwgcGMuZ2V0UmVzdHJpY3RVcGRhdGUoKSk7\nCiAgICAgICAgZW5kRW0ocG0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RVVUlEKCkgewogICAgICAgIFZhbHVlU3RyYXRlZ3lQQyBwYyA9IG5ldyBW\nYWx1ZVN0cmF0ZWd5UEMoKTsKICAgICAgICBWYWx1ZVN0cmF0ZWd5UEMgcGMy\nID0gbmV3IFZhbHVlU3RyYXRlZ3lQQygpOwogICAgICAgIHBjLnNldE5hbWUo\nInBjIik7CiAgICAgICAgcGMyLnNldE5hbWUoInBjMiIpOwogICAgICAgIGFz\nc2VydE51bGwocGMuZ2V0VVVJRCgpKTsKICAgICAgICBhc3NlcnROdWxsKHBj\nMi5nZXRVVUlEKCkpOwogICAgICAgIGFzc2VydE51bGwocGMuZ2V0VVVJREhl\neCgpKTsKICAgICAgICBhc3NlcnROdWxsKHBjMi5nZXRVVUlESGV4KCkpOwoK\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9CiAgICAgICAgICAg\nIChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBwbS5zZXRPcHRpbWlzdGljKHRydWUpOwogICAgICAgIHN0\nYXJ0VHgocG0pOwogICAgICAgIHBtLnBlcnNpc3QocGMpOwogICAgICAgIHBt\nLnBlcnNpc3QocGMyKTsKICAgICAgICBTdHJpbmcgc3RyID0gcGMuZ2V0VVVJ\nRCgpOwogICAgICAgIFN0cmluZyBoZXggPSBwYy5nZXRVVUlESGV4KCk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZSghcG0uaXNTdG9yZUFjdGl2ZSgpKTsgICAgLy8g\nbm8gZmx1c2ggbmVlZGVkCiAgICAgICAgZW5kVHgocG0pOwogICAgICAgIFN0\ncmluZyBzdHIyID0gcGMyLmdldFVVSUQoKTsKICAgICAgICBTdHJpbmcgaGV4\nMiA9IHBjMi5nZXRVVUlESGV4KCk7CiAgICAgICAgT2JqZWN0IG9pZCA9IHBt\nLmdldE9iamVjdElkKHBjKTsKICAgICAgICBPYmplY3Qgb2lkMiA9IHBtLmdl\ndE9iamVjdElkKHBjMik7CiAgICAgICAgZW5kRW0ocG0pOwoKICAgICAgICBh\nc3NlcnROb3ROdWxsKHN0cik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdHIy\nKTsKICAgICAgICBhc3NlcnRUcnVlKCFzdHIuZXF1YWxzKHN0cjIpKTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKGhleCk7CiAgICAgICAgYXNzZXJ0Tm90TnVs\nbChoZXgyKTsKICAgICAgICBhc3NlcnRUcnVlKCFoZXguZXF1YWxzKGhleDIp\nKTsKCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJl\nbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSAoVmFsdWVTdHJhdGVn\neVBDKSBwbS5maW5kKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkKTsKICAg\nICAgICBwYzIgPSAoVmFsdWVTdHJhdGVneVBDKSBwbS5maW5kKFZhbHVlU3Ry\nYXRlZ3lQQy5jbGFzcywgb2lkMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHN0\nciwgcGMuZ2V0VVVJRCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoc3RyMiwg\ncGMyLmdldFVVSUQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGhleCwgcGMu\nZ2V0VVVJREhleCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoaGV4MiwgcGMy\nLmdldFVVSURIZXgoKSk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAg\ncGMuc2V0VVVJREhleCgiZm9vIik7CiAgICAgICAgcGMyLnNldFVVSURIZXgo\nImJhciIpOwogICAgICAgIGVuZFR4KHBtKTsKICAgICAgICBlbmRFbShwbSk7\nCgogICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIHBjID0gKFZhbHVlU3RyYXRlZ3lQ\nQykgcG0uZmluZChWYWx1ZVN0cmF0ZWd5UEMuY2xhc3MsIG9pZCk7CiAgICAg\nICAgcGMyID0gKFZhbHVlU3RyYXRlZ3lQQykgcG0uZmluZChWYWx1ZVN0cmF0\nZWd5UEMuY2xhc3MsIG9pZDIpOwogICAgICAgIGFzc2VydEVxdWFscygiZm9v\nIiwgcGMuZ2V0VVVJREhleCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImJh\nciIsIHBjMi5nZXRVVUlESGV4KCkpOwogICAgICAgIGVuZEVtKHBtKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2VxdWVuY2UoKSB7CiAgICAgICAg\nVmFsdWVTdHJhdGVneVBDIHBjID0gbmV3IFZhbHVlU3RyYXRlZ3lQQygpOwog\nICAgICAgIFZhbHVlU3RyYXRlZ3lQQyBwYzIgPSBuZXcgVmFsdWVTdHJhdGVn\neVBDKCk7CiAgICAgICAgcGMuc2V0TmFtZSgicGMiKTsKICAgICAgICBwYzIu\nc2V0TmFtZSgicGMyIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHBjLmdl\ndFNlcXVlbmNlKCkpOwogICAgICAgIGFzc2VydEVxdWFscygwLCBwYzIuZ2V0\nU2VxdWVuY2UoKSk7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nID0KICAgICAgICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIHBtLnNldE9wdGltaXN0aWModHJ1\nZSk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgcG0ucGVyc2lzdChw\nYyk7CiAgICAgICAgcG0ucGVyc2lzdChwYzIpOwogICAgICAgIGludCBzZXEg\nPSBwYy5nZXRTZXF1ZW5jZSgpOwogICAgICAgIGFzc2VydFRydWUoIXBtLmlz\nU3RvcmVBY3RpdmUoKSk7ICAgIC8vIG5vIGZsdXNoIG5lZWRlZAogICAgICAg\nIGVuZFR4KHBtKTsKICAgICAgICBpbnQgc2VxMiA9IHBjMi5nZXRTZXF1ZW5j\nZSgpOwogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmplY3RJZChwYyk7\nCiAgICAgICAgT2JqZWN0IG9pZDIgPSBwbS5nZXRPYmplY3RJZChwYzIpOwog\nICAgICAgIGVuZEVtKHBtKTsKCiAgICAgICAgYXNzZXJ0VHJ1ZShzZXEgPiAw\nKTsKICAgICAgICBhc3NlcnRUcnVlKHNlcTIgPiAwKTsKICAgICAgICBhc3Nl\ncnRUcnVlKHNlcSAhPSBzZXEyKTsKCiAgICAgICAgcG0gPSAoT3BlbkpQQUVu\ndGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\ncGMgPSAoVmFsdWVTdHJhdGVneVBDKSBwbS5maW5kKFZhbHVlU3RyYXRlZ3lQ\nQy5jbGFzcywgb2lkKTsKICAgICAgICBwYzIgPSAoVmFsdWVTdHJhdGVneVBD\nKSBwbS5maW5kKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkMik7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKHNlcSwgcGMuZ2V0U2VxdWVuY2UoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKHNlcTIsIHBjMi5nZXRTZXF1ZW5jZSgpKTsKICAg\nICAgICBzdGFydFR4KHBtKTsKICAgICAgICBwYy5zZXRTZXF1ZW5jZSg5OSk7\nCiAgICAgICAgcGMyLnNldFNlcXVlbmNlKDEwMCk7CiAgICAgICAgZW5kVHgo\ncG0pOwogICAgICAgIGVuZEVtKHBtKTsKCiAgICAgICAgcG0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgcGMgPSAoVmFsdWVTdHJhdGVneVBDKSBwbS5maW5kKFZhbHVlU3RyYXRl\nZ3lQQy5jbGFzcywgb2lkKTsKICAgICAgICBwYzIgPSAoVmFsdWVTdHJhdGVn\neVBDKSBwbS5maW5kKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkMik7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDk5LCBwYy5nZXRTZXF1ZW5jZSgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMTAwLCBwYzIuZ2V0U2VxdWVuY2UoKSk7CiAg\nICAgICAgZW5kRW0ocG0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RW\nZXJzaW9uKCkgewogICAgICAgIHZlcnNpb25UZXN0KGdldEVtZigpKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VmVyc2lvbkRhdGFDYWNoZSgpIHsK\nCiAgICAgICAgTWFwIG1hcCA9IG5ldyBIYXNoTWFwKCk7CiAgICAgICAgbWFw\nLnB1dCgib3BlbmpwYS5EYXRhQ2FjaGUiLCAidHJ1ZSIpOwogICAgICAgIG1h\ncC5wdXQoIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2bSIp\nOwogICAgICAgIHZlcnNpb25UZXN0KGdldEVtZihtYXApKTsKICAgIH0KCiAg\nICBwcml2YXRlIHZvaWQgdmVyc2lvblRlc3QoRW50aXR5TWFuYWdlckZhY3Rv\ncnkgcG1mKSB7CiAgICAgICAgVmFsdWVTdHJhdGVneVBDIHBjID0gbmV3IFZh\nbHVlU3RyYXRlZ3lQQygpOwogICAgICAgIHBjLnNldE5hbWUoInBjIik7Cgog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKQogICAgICAgICAgICBwbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIHBtLnBlcnNpc3Qo\ncGMpOwogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSA9IGdldENvbmZpZ3Vy\nYXRpb24oKQogICAgICAgICAgICAuZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5z\ndGFuY2UoKS4KICAgICAgICAgICAgZ2V0TWV0YURhdGEocGMuZ2V0Q2xhc3Mo\nKSwgbnVsbCwgZmFsc2UpOwogICAgICAgIGFzc2VydE5vdE51bGwobWV0YS5n\nZXRWZXJzaW9uRmllbGQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ2ZXJz\naW9uIiwgbWV0YS5nZXRWZXJzaW9uRmllbGQoKS5nZXROYW1lKCkpOwogICAg\nICAgIGFzc2VydEVxdWFscygwLCBwYy5nZXRWZXJzaW9uKCkpOwogICAgICAg\nIGVuZFR4KHBtKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0VmVy\nc2lvbigpKTsKICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQo\ncGMpOwogICAgICAgIGVuZEVtKHBtKTsKCiAgICAgICAgLy8gZG8gbm8tb3Ag\nY29tbWl0CiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIHBt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSAoVmFsdWVT\ndHJhdGVneVBDKSBwbS5maW5kKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lk\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBjKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMSwgcGMuZ2V0VmVyc2lvbigpKTsKICAgICAgICBzdGFydFR4KHBt\nKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBwYy5zZXRWZXJzaW9uKDEw\nKTsKICAgICAgICAgICAgZmFpbCgiQWxsb3dlZCBjaGFuZ2UgdG8gdmVyc2lv\nbiBmaWVsZC4iKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9u\nIHJlKSB7CiAgICAgICAgfQogICAgICAgIGVuZFR4KHBtKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgcGMuZ2V0VmVyc2lvbigpKTsKICAgICAgICBlbmRF\nbShwbSk7CgogICAgICAgIC8vIGRvIHJlYWwgY29tbWl0CiAgICAgICAgcG0g\nPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIHBtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgcGMgPSAoVmFsdWVTdHJhdGVneVBDKSBwbS5maW5k\nKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKHBjKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0VmVy\nc2lvbigpKTsKICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICBwYy5zZXRO\nYW1lKCJjaGFuZ2VkIik7CiAgICAgICAgcG0uZmx1c2goKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgcGMuZ2V0VmVyc2lvbigpKTsKICAgICAgICBlbmRU\neChwbSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJjaGFuZ2VkIiwgcGMuZ2V0\nTmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0VmVyc2lv\nbigpKTsKICAgICAgICBlbmRFbShwbSk7CgogICAgICAgIC8vIHJvbGxiYWNr\nCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIHBtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSAoVmFsdWVTdHJhdGVn\neVBDKSBwbS5maW5kKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkKTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKHBjKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMiwgcGMuZ2V0VmVyc2lvbigpKTsKICAgICAgICBzdGFydFR4KHBtKTsKICAg\nICAgICBwYy5zZXROYW1lKCJjaGFuZ2VkMiIpOwogICAgICAgIHBtLmZsdXNo\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldFZlcnNpb24oKSk7\nCiAgICAgICAgcm9sbGJhY2tUeChwbSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDIsIHBjLmdldFZlcnNpb24oKSk7CiAgICAgICAgZW5kRW0ocG0pOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RWZXJzaW9uRGV0YWNoKCkgewogICAg\nICAgIFZhbHVlU3RyYXRlZ3lQQyBwYyA9IG5ldyBWYWx1ZVN0cmF0ZWd5UEMo\nKTsKICAgICAgICBWYWx1ZVN0cmF0ZWd5UEMgcGMyID0gbmV3IFZhbHVlU3Ry\nYXRlZ3lQQygpOwogICAgICAgIHBjLnNldE5hbWUoInBjIik7CiAgICAgICAg\ncGMyLnNldE5hbWUoInBjMiIpOwoKICAgICAgICBPcGVuSlBBRW50aXR5TWFu\nYWdlciBwbSA9CiAgICAgICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdlcikg\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KHBtKTsK\nICAgICAgICBwbS5wZXJzaXN0KHBjKTsKICAgICAgICBwbS5wZXJzaXN0KHBj\nMik7CiAgICAgICAgZW5kVHgocG0pOwogICAgICAgIHN0YXJ0VHgocG0pOwog\nICAgICAgIHBjLnNldE5hbWUoImNoYW5nZWQiKTsKICAgICAgICBwYzIuc2V0\nTmFtZSgiY2hhbmdlZDIiKTsKICAgICAgICBlbmRUeChwbSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIHBjLmdldFZlcnNpb24oKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDIsIHBjMi5nZXRWZXJzaW9uKCkpOwogICAgICAgIFZhbHVl\nU3RyYXRlZ3lQQyBkZXRhY2hlZCA9IChWYWx1ZVN0cmF0ZWd5UEMpIHBtLmRl\ndGFjaChwYyk7CiAgICAgICAgVmFsdWVTdHJhdGVneVBDIGRldGFjaGVkMiA9\nIChWYWx1ZVN0cmF0ZWd5UEMpIHBtLmRldGFjaChwYzIpOwogICAgICAgIGVu\nZEVtKHBtKTsKCiAgICAgICAgLy8gY2xlYW4gYXR0YWNoCiAgICAgICAgcG0g\nPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgcGMgPSAoVmFsdWVT\ndHJhdGVneVBDKSBwbS5tZXJnZShkZXRhY2hlZCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDIsIHBjLmdldFZlcnNpb24oKSk7CiAgICAgICAgZW5kVHgocG0p\nOwogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRWZXJzaW9uKCkpOwog\nICAgICAgIGVuZEVtKHBtKTsKCiAgICAgICAgLy8gZGlydHkgYXR0YWNoCiAg\nICAgICAgZGV0YWNoZWQuc2V0TmFtZSgiY2hhbmdlZC1kZXRhY2hlZCIpOwog\nICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50\naXR5TWFuYWdlcigpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAgICAgIHBj\nID0gKFZhbHVlU3RyYXRlZ3lQQykgcG0ubWVyZ2UoZGV0YWNoZWQpOwogICAg\nICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRWZXJzaW9uKCkpOwogICAgICAg\nIGVuZFR4KHBtKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgcGMuZ2V0VmVy\nc2lvbigpKTsKICAgICAgICBlbmRFbShwbSk7CgogICAgICAgIC8vIHN0YWxl\nIGF0dGFjaAogICAgICAgIGRldGFjaGVkLnNldE5hbWUoInN0YWxlIik7CiAg\nICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgc3RhcnRUeChwbSk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgcG0ubWVyZ2UoZGV0YWNoZWQpOwogICAgICAgICAg\nICBlbmRUeChwbSk7CiAgICAgICAgICAgIGZhaWwoIkNvbW1pdHRlZCBzdGFs\nZSB2ZXJzaW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKE9wZW5KUEFFeGNlcHRp\nb24gamUpIHsKICAgICAgICB9CiAgICAgICAgaWYgKGlzQWN0aXZlVHgocG0p\nKQogICAgICAgICAgICByb2xsYmFja1R4KHBtKTsKICAgICAgICBlbmRFbShw\nbSk7CgogICAgICAgIC8vIG1vZGlmeSB2ZXJzaW9uIGZpZWxkIGluIGRldGFj\naGVkOyBhbGxvdyBlaXRoZXIgZXhjZXB0aW9uIG9yCiAgICAgICAgLy8gYWxs\nb3cgdGhlIHVwZGF0ZSB0byBiZSBpZ25vcmVkCiAgICAgICAgZGV0YWNoZWQy\nLnNldE5hbWUoImNoYW5nZWQyLWRldGFjaGVkIik7CiAgICAgICAgZGV0YWNo\nZWQyLnNldFZlcnNpb24oOTkpOwogICAgICAgIHBtID0gKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOwogICAgICAgIHN0\nYXJ0VHgocG0pOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHBjMiA9IChW\nYWx1ZVN0cmF0ZWd5UEMpIHBtLm1lcmdlKGRldGFjaGVkMik7CiAgICAgICAg\nICAgIGFzc2VydEVxdWFscygyLCBwYzIuZ2V0VmVyc2lvbigpKTsKICAgICAg\nICAgICAgZW5kVHgocG0pOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMywg\ncGMyLmdldFZlcnNpb24oKSk7CiAgICAgICAgfSBjYXRjaCAoT3BlbkpQQUV4\nY2VwdGlvbiBqZSkgewogICAgICAgIH0KICAgICAgICBpZiAoaXNBY3RpdmVU\neChwbSkpCiAgICAgICAgICAgIHJvbGxiYWNrVHgocG0pOwogICAgICAgIDsK\nICAgICAgICBlbmRFbShwbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndFZlcnNpb25SZWZyZXNoKCkgewogICAgICAgIFZhbHVlU3RyYXRlZ3lQQyBw\nYyA9IG5ldyBWYWx1ZVN0cmF0ZWd5UEMoKTsKICAgICAgICBwYy5zZXROYW1l\nKCJwYyIpOwoKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9CiAg\nICAgICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KHBtKTsKICAgICAgICBwbS5w\nZXJzaXN0KHBjKTsKICAgICAgICBlbmRUeChwbSk7CiAgICAgICAgc3RhcnRU\neChwbSk7CiAgICAgICAgcGMuc2V0TmFtZSgiY2hhbmdlZCIpOwogICAgICAg\nIGVuZFR4KHBtKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0VmVy\nc2lvbigpKTsKCiAgICAgICAgLy8gY2xlYW4gcmVmcmVzaAogICAgICAgIHN0\nYXJ0VHgocG0pOwogICAgICAgIHBtLnJlZnJlc2gocGMpOwogICAgICAgIGFz\nc2VydEVxdWFscygyLCBwYy5nZXRWZXJzaW9uKCkpOwoKICAgICAgICAvLyBj\nb25jdXJyZW50IG1vZAogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nMiA9CiAgICAgICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsKICAgICAgICBzdGFydFR4KHBtMik7CiAgICAg\nICAgVmFsdWVTdHJhdGVneVBDIHBjMiA9IChWYWx1ZVN0cmF0ZWd5UEMpIHBt\nMi5maW5kCiAgICAgICAgICAgIChWYWx1ZVN0cmF0ZWd5UEMuY2xhc3MsIHBt\nMi5nZXRPYmplY3RJZChwYykpOwogICAgICAgIHBjMi5zZXROYW1lKCJjaGFu\nZ2VkMiIpOwogICAgICAgIGVuZFR4KHBtMik7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDMsIHBjMi5nZXRWZXJzaW9uKCkpOwogICAgICAgIGVuZEVtKHBtMik7\nCgogICAgICAgIC8vIHN0YWxlIHJlZnJlc2gKICAgICAgICBwbS5yZWZyZXNo\nKHBjKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywgcGMuZ2V0VmVyc2lvbigp\nKTsKCiAgICAgICAgLy8gZGlydHkgcmVmcmVzaAogICAgICAgIHBjLnNldE5h\nbWUoImNoYW5nZWQtMSIpOwogICAgICAgIHBtLnJlZnJlc2gocGMpOwogICAg\nICAgIGFzc2VydEVxdWFscygzLCBwYy5nZXRWZXJzaW9uKCkpOwoKICAgICAg\nICBwYy5zZXROYW1lKCJjaGFuZ2VkLTIiKTsKICAgICAgICBlbmRUeChwbSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHBjLmdldFZlcnNpb24oKSk7CiAg\nICAgICAgZW5kRW0ocG0pOwogICAgfQp9Cg==\n","encoding":"base64"}

