{"sha":"9955ee86e5d2193d7882632dca3aac267a57f325","node_id":"MDQ6QmxvYjIwNjM2NDo5OTU1ZWU4NmU1ZDIxOTNkNzg4MjYzMmRjYTNhYWMyNjdhNTdmMzI1","size":7090,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9955ee86e5d2193d7882632dca3aac267a57f325","content":"LyoKICogVGVzdFF1b3RlZE51bWJlcnNJbkZpbHRlcnMuamF2YQogKgogKiBD\ncmVhdGVkIG9uIE9jdG9iZXIgMTgsIDIwMDYsIDI6MjkgUE0KICoKICogVG8g\nY2hhbmdlIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRl\nIE1hbmFnZXIKICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0\nb3IuCiAqLwovKgogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJl\nIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJp\nYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmls\nZQogKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25h\nbCBpbmZvcm1hdGlvbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hp\ncC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRl\nciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxp\nY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4g\nY29tcGxpYW5jZQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRh\naW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cu\nYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3Mg\ncmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdy\naXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNl\nbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJ\nVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5E\nLCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNl\nIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1p\nc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4g\nICAgCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5xdWVyeTsKCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0\nIGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5OwoKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnkuY29tbW9uLmFwcHMuUnVu\ndGltZVRlc3QxOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFRdWVyeTsKCnB1YmxpYyBjbGFz\ncyBUZXN0UXVvdGVkTnVtYmVyc0luRmlsdGVyczIgZXh0ZW5kcyBCYXNlUXVl\ncnlUZXN0IHsKCiAgICBwdWJsaWMgVGVzdFF1b3RlZE51bWJlcnNJbkZpbHRl\ncnMyKFN0cmluZyBuYW1lKSB7CiAgICAgICAgc3VwZXIobmFtZSk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgZGVsZXRlQWxs\nKFJ1bnRpbWVUZXN0MS5jbGFzcyk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1h\nbmFnZXIgcG0gPSBnZXRFTSgpOwogICAgICAgIHN0YXJ0VHgocG0pOwogICAg\nICAgIHBtLnBlcnNpc3QobmV3IFJ1bnRpbWVUZXN0MSgiZm9vIiwgMykpOwog\nICAgICAgIHBtLnBlcnNpc3QobmV3IFJ1bnRpbWVUZXN0MSgiYmFyIiwgMTUp\nKTsKICAgICAgICBwbS5wZXJzaXN0KG5ldyBSdW50aW1lVGVzdDEoImJheiIs\nIC04KSk7CiAgICAgICAgcG0ucGVyc2lzdChuZXcgUnVudGltZVRlc3QxKCJi\nYXoyIiwgNDUpKTsgLy8gNDUgaXMgJy0nCiAgICAgICAgcG0ucGVyc2lzdChu\nZXcgUnVudGltZVRlc3QxKCIzIiwgKGludCkgJzQnKSk7CiAgICAgICAgZW5k\nVHgocG0pOwogICAgICAgIGVuZEVtKHBtKTsKCiAgICAgICAgLy8gbWFrZSBz\ndXJlIGV2ZXJ5dGhpbmcgaXMgd29ya2luZyBhcyBleHBlY3RlZCBmb3IgdGhl\nIGJhc2UgY2FzZS4KICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaGVscGVyKCJp\nbnRGaWVsZCA9IC04IikpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxw\nZXIoImludEZpZWxkID0gMTUiKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEs\nIGhlbHBlcigiaW50RmllbGQgPSAzIikpOwogICAgICAgIGFzc2VydEVxdWFs\ncygwLCBoZWxwZXIoImludEZpZWxkID0gNTEiKSk7IC8vIHRoZSBpbnQgdmFs\ndWUgb2YgJzMnCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGhlbHBlcigiaW50\nRmllbGQgPSA0IikpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxwZXIo\nImludEZpZWxkID0gNTIiKSk7IC8vIHRoZSBpbnQgdmFsdWUgb2YgJzQnCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcigic3RyaW5nRmllbGQgPSBc\nJ2Zvb1wnIikpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxwZXIoInN0\ncmluZ0ZpZWxkID0gXCdiYXJcJyIpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0VW5xdW90ZWROdW1iZXJzV2l0aEV4dHJhUHJlY2lzaW9uKCkgewog\nICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxwZXIoImludEZpZWxkID0gMTUi\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcigiaW50RmllbGQg\nPSAtOCIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaGVscGVyKCJpbnRG\naWVsZCA9IDMiKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcigi\naW50RmllbGQgPSA0NSIpKTsKCi8vICAgIHRyeSB7Ci8vICAgICAgICAvLyB0\nZXN0IHdpdGhvdXQgY2FzdGluZyAuLi4gc29tZSBEQnMgZG9uJ3QgbGlrZSB0\naGlzCi8vLy8gICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxwZXIoImludEZp\nZWxkID0gMTUuMCIpKTsKLy8vLyAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhl\nbHBlcigiaW50RmllbGQgPSAtOC4wIikpOwovLyAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIGhlbHBlcigiaW50RmllbGQgPSAzLjAiKSk7Ci8vICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgaGVscGVyKCJpbnRGaWVsZCA9IDQ1LjAiKSk7Ci8v\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBqZG9lKSB7Ci8vICAgICAgICBidWco\nQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5IWVBFUlNPTklDLCA0MTQsIGpk\nb2UsCi8vICAgICAgICAgICAgIlNvbWUgZGF0YWJhc2VzIHJlcXVpcmUgZXhw\nbGljaXQgY2FzdHMiKTsKLy8gICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RTaW5nbGVRdW90ZWRTdHJpbmdzKCkgewogICAgICAgIGFzc2VydEVx\ndWFscygxLCBoZWxwZXIoInN0cmluZ0ZpZWxkID0gJ2ZvbyciKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcigic3RyaW5nRmllbGQgPSAnMyci\nKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdERvdWJsZVF1b3RlZFN0\ncmluZ3MoKSB7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcigic3Ry\naW5nRmllbGQgPSBcJ2Zvb1wnIikpOwogICAgICAgIGFzc2VydEVxdWFscygx\nLCBoZWxwZXIoInN0cmluZ0ZpZWxkID0gXCczXCciKSk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBLb2RvIDMuMSBhbmQgcHJpb3IgdHJlYXRlZCBzaW5nbGUt\ncXVvdGVkIG51bWJlcnMgYXMgY2hhcmFjdGVyIGxpdGVyYWxzLAogICAgICog\ndG8gdGhlIGRlZ3JlZSB0aGF0IHByZXBhcmVkIHN0YXRlbWVudCBzZXRJbnQo\nKSBjYWxscyB3ZXJlIG1hZGUuCiAgICAgKiBPbmx5IHRoZSBmaXJzdCBkaWdp\ndCBvZiBtdWx0aXBsZS1kaWdpdCBzaW5nbGUtcXVvdGVkIG51bWJlcnMgd2Fz\nIHVzZWQuCiAgICAgKiBGSVggTUU6IGFva2VrZSAtIGNvbW1lbnRpbmcgdGhp\ncyAtLT4gYXBwbGllcyB0byBrb2RvIDMuMSBhbmQgcHJpb3IKICAgICAqLwog\nICAgcHVibGljIHZvaWQgdGVzdEtvZG8zMVNpbmdsZVF1b3RlZE11bHRpcGxl\nQ2hhcmFjdGVyQmVoYXZpb3IoKSB7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAs\nIGhlbHBlcjMxKCJpbnRGaWVsZCA9ICcxNSciLCB0cnVlKSk7IC8vIGxvb2tz\nIGxpa2UgJzEnCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGhlbHBlcjMxKCJp\nbnRGaWVsZCA9ICc1MiciLCB0cnVlKSk7IC8vIGxvb2tzIGxpa2UgJzUnCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcjMxKCJpbnRGaWVsZCA9ICc0\nOSciLCB0cnVlKSk7IC8vIGxvb2tzIGxpa2UgJzQnCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIGhlbHBlcjMxKCJpbnRGaWVsZCA9ICctOCciLCB0cnVlKSk7\nIC8vIGxvb2tzIGxpa2UgJy0nCgogICAgICAgIGFzc2VydEVxdWFscygwLCBo\nZWxwZXIzMSgiaW50RmllbGQgPSAnMTUnIiwgZmFsc2UpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMCwgaGVscGVyMzEoImludEZpZWxkID0gJzUyJyIsIGZh\nbHNlKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBLb2RvIDMuMSBhbmQgcHJp\nb3IgZGlkIG5vdCBtYXRjaCBuZWdhdGl2ZSBudW1iZXJzIG9mIGRpZmZlcmVu\ndCB0eXBlcwogICAgICogaW4gaW4tbWVtIHF1ZXJpZXMuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHRlc3RLb2RvMzFVbnF1b3RlZEluTWVtQmVoYXZpb3Io\nKSB7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcjMxKCJpbnRGaWVs\nZCA9IDMiLCBmYWxzZSkpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxw\nZXIzMSgiaW50RmllbGQgPSAtOCIsIGZhbHNlKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIGhlbHBlcjMxKCJpbnRGaWVsZCA9IDE1IiwgZmFsc2UpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaGVscGVyMzEoImludEZpZWxkID0g\nNDUiLCBmYWxzZSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RLb2Rv\nMzFVbnF1b3RlZERhdGFzdG9yZUJlaGF2aW9yKCkgewogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBoZWxwZXIzMSgiaW50RmllbGQgPSAzIiwgZmFsc2UpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaGVscGVyMzEoImludEZpZWxkID0g\nLTgiLCBmYWxzZSkpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxwZXIz\nMSgiaW50RmllbGQgPSAxNSIsIGZhbHNlKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIGhlbHBlcjMxKCJpbnRGaWVsZCA9IDQ1IiwgZmFsc2UpKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlICMgb2YgbWF0Y2hlcyB0\nbyB0aGUgcXVlcnkuCiAgICAgKi8KICAgIHByaXZhdGUgbG9uZyBoZWxwZXIo\nU3RyaW5nIGZpbHRlcikgewogICAgICAgIHJldHVybiBoZWxwZXIoZmlsdGVy\nLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSAj\nIG9mIG1hdGNoZXMgdG8gdGhlIHF1ZXJ5LiBSZXR1cm5zIC0xIGlmIHNob3Vs\nZEZhaWwKICAgICAqIGlzIHRydWUgYW5kIHRoZSBxdWVyeSByYWlzZWQgYW4g\nZXhjZXB0aW9uIGluIGJvdGggaW4tbWVtIGFuZCBkYXRhc3RvcmUKICAgICAq\nIHF1ZXJpZXMuCiAgICAgKi8KICAgIHByaXZhdGUgbG9uZyBoZWxwZXIoU3Ry\naW5nIGZpbHRlciwgYm9vbGVhbiBzaG91bGRGYWlsKSB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRFTSgpOwoKICAgICAgICBPcGVu\nSlBBUXVlcnkgcSA9CiAgICAgICAgICAgIHBtLmNyZWF0ZVF1ZXJ5KCJTRUxF\nQ1QgciBGUk9NIFJ1bnRpbWVUZXN0MSByIFdIRVJFIHIuIiArIGZpbHRlcik7\nCgogICAgICAgIGxvbmcgZGF0YXN0b3JlID0gZ2V0UmVzdWx0cyhxLCBzaG91\nbGRGYWlsKTsKCiAgICAgICAgcS5zZXRDYW5kaWRhdGVDb2xsZWN0aW9uKChD\nb2xsZWN0aW9uKSBxLmdldFJlc3VsdExpc3QoKSk7CiAgICAgICAgbG9uZyBp\nbm1lbSA9IGdldFJlc3VsdHMocSwgc2hvdWxkRmFpbCk7CgogICAgICAgIGlm\nIChkYXRhc3RvcmUgIT0gaW5tZW0pCiAgICAgICAgICAgIGZhaWwoImRhdGFz\ndG9yZSBxdWVyeSByZXR1cm5lZCAiICsgZGF0YXN0b3JlICsgIiB2YWx1ZXM7\nICIgKwogICAgICAgICAgICAgICAgImlubWVtIHF1ZXJ5IHJldHVybmVkICIg\nKyBpbm1lbSk7CgogICAgICAgIGVuZEVtKHBtKTsKICAgICAgICByZXR1cm4g\nZGF0YXN0b3JlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUg\nIyBvZiBtYXRjaGVzIHRvIHRoZSBxdWVyeS4gUGVyZm9ybXMgdGhlIHF1ZXJ5\nIGluIGRhdGFzdG9yZQogICAgICogb3IgbWVtb3J5IGFzIGFwcHJvcHJpYXRl\nLgogICAgICovCiAgICBwcml2YXRlIGxvbmcgaGVscGVyMzEoU3RyaW5nIGZp\nbHRlciwgYm9vbGVhbiBkYXRhc3RvcmUpIHsKICAgICAgICBNYXAgcHJvcHMg\nPSBuZXcgSGFzaE1hcCgpOwogICAgICAgIHByb3BzLnB1dCgib3BlbmpwYS5D\nb21wYXRpYmlsaXR5IiwgIlF1b3RlZE51bWJlcnNJblF1ZXJpZXM9dHJ1ZSIp\nOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0RW1mKHBy\nb3BzKS5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlUXVlcnkoCiAg\nICAgICAgICAgICAgICAiU0VMRUNUIHIgRlJPTSBSdW50aW1lVGVzdDEgciBX\nSEVSRSByLiIgKyBmaWx0ZXIpOwoKICAgICAgICAgICAgaWYgKCFkYXRhc3Rv\ncmUpCiAgICAgICAgICAgICAgICBxLnNldENhbmRpZGF0ZUNvbGxlY3Rpb24o\nKENvbGxlY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpKTsKICAgICAgICAgICAg\ncmV0dXJuIGdldFJlc3VsdHMocSwgZmFsc2UpOwogICAgICAgIH0KICAgICAg\nICBmaW5hbGx5IHsKICAgICAgICAgICAgZW5kRW0ocG0pOwogICAgICAgIH0K\nICAgIH0KCiAgICBwcml2YXRlIGxvbmcgZ2V0UmVzdWx0cyhRdWVyeSBxLCBi\nb29sZWFuIHNob3VsZEZhaWwpIHsKICAgICAgICB0cnkgewoKICAgICAgICAg\nICAgSW50ZWdlciByZXN1bHQgPSBuZXcgSW50ZWdlcihxLmdldFJlc3VsdExp\nc3QoKS5zaXplKCkpOwogICAgICAgICAgICBpZiAoc2hvdWxkRmFpbCkgewog\nICAgICAgICAgICAgICAgZmFpbCgic2hvdWxkIGhhdmUgZmFpbGVkIik7CiAg\nICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiAoKE51bWJlcikgcmVz\ndWx0KS5sb25nVmFsdWUoKTsKICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24gZSkgewogICAgICAgICAgICBpZiAoIXNob3VsZEZh\naWwpCiAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICByZXR1\ncm4gLTE7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

