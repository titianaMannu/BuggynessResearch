{"sha":"5044ba084bf249f1e799083a1b2ec4e6aa0eb2e0","node_id":"MDQ6QmxvYjIwNjM2NDo1MDQ0YmEwODRiZjI0OWYxZTc5OTA4M2ExYjJlYzRlNmFhMGViMmUw","size":3912,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5044ba084bf249f1e799083a1b2ec4e6aa0eb2e0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuc2xpY2U7CgppbXBvcnQgamF2\nYS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQg\namF2YS51dGlsLmNvbmN1cnJlbnQuRXhlY3V0b3JTZXJ2aWNlOwppbXBvcnQg\namF2YS51dGlsLmNvbmN1cnJlbnQuRXhlY3V0b3JzOwppbXBvcnQgamF2YS51\ndGlsLmNvbmN1cnJlbnQuUHJpb3JpdHlCbG9ja2luZ1F1ZXVlOwppbXBvcnQg\namF2YS51dGlsLmNvbmN1cnJlbnQuU3luY2hyb25vdXNRdWV1ZTsKaW1wb3J0\nIGphdmEudXRpbC5jb25jdXJyZW50LlRocmVhZEZhY3Rvcnk7CmltcG9ydCBq\nYXZhLnV0aWwuY29uY3VycmVudC5UaHJlYWRQb29sRXhlY3V0b3I7CmltcG9y\ndCBqYXZhLnV0aWwuY29uY3VycmVudC5UaW1lVW5pdDsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5QbHVnaW5WYWx1\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuT3B0aW9u\nczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRp\nb247CgovKioKICogVmFsdWUgdHlwZSB1c2VkIHRvIHJlcHJlc2VudCBhIHtA\nbGluayBFeGVjdXRvclNlcnZpY2V9LgogKiBUaGlzIHZhbHVlIGNvbnRyb2xz\nIHRoZSB0aHJlYWQgcG9vbCBwYXJhbWV0ZXJzLiBUaGUgdGhyZWFkIHBvb2wg\naXMgdXNlZAogKiB0byBleGVjdXRlIHRoZSBxdWVyaWVzLgogKiAKICogQGF1\ndGhvciBQaW5ha2kgUG9kZGFyCiAqIEBub2phdmFkb2MKICovCgpwdWJsaWMg\nY2xhc3MgRXhlY3V0b3JTZXJ2aWNlVmFsdWUgZXh0ZW5kcyBQbHVnaW5WYWx1\nZSB7CiAgICBwcml2YXRlIHN0YXRpYyBMaXN0PFN0cmluZz4ga25vd24gPQog\nICAgICAgICAgICBBcnJheXMuYXNMaXN0KG5ldyBTdHJpbmdbXSB7ICJjYWNo\nZWQiLCAiZml4ZWQiIH0pOwoKICAgIHByaXZhdGUgc3RhdGljIExvY2FsaXpl\nciBfbG9jID0KICAgICAgICAgICAgTG9jYWxpemVyLmZvclBhY2thZ2UoRXhl\nY3V0b3JTZXJ2aWNlVmFsdWUuY2xhc3MpOwoKICAgIHB1YmxpYyBFeGVjdXRv\nclNlcnZpY2VWYWx1ZSgpIHsKICAgICAgICBzdXBlcigiVGhyZWFkaW5nUG9s\naWN5IiwgdHJ1ZSk7CiAgICAgICAgc2V0RGVmYXVsdCgiY2FjaGVkIik7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0UHJvcGVydGllcyhTdHJpbmcgcHJv\ncHMpIHsKICAgICAgICBzdXBlci5zZXRQcm9wZXJ0aWVzKHByb3BzKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIENvbmZpZ3VyZXMgYSBjYWNoZWQgb3IgZml4\nZWQgdGhyZWFkIHBvb2wuCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgcHVi\nbGljIE9iamVjdCBpbnN0YW50aWF0ZShDbGFzcyB0eXBlLCBDb25maWd1cmF0\naW9uIGNvbmYsIGJvb2xlYW4gZmF0YWwpIHsKICAgICAgICBPYmplY3Qgb2Jq\nID0gbnVsbDsKICAgICAgICBpbnQgZGVmYXVsdFNpemUgPSAxMDsKICAgICAg\nICBTdHJpbmcgY2xzID0gZ2V0Q2xhc3NOYW1lKCk7CiAgICAgICAgaWYgKCFr\nbm93bi5jb250YWlucyhjbHMpKQogICAgICAgICAgICBjbHMgPSAiY2FjaGVk\nIjsKCiAgICAgICAgT3B0aW9ucyBvcHRzID0gQ29uZmlndXJhdGlvbnMucGFy\nc2VQcm9wZXJ0aWVzKGdldFByb3BlcnRpZXMoKSk7CgogICAgICAgIFRocmVh\nZEZhY3RvcnkgZmFjdG9yeSA9IG51bGw7CiAgICAgICAgaWYgKG9wdHMuY29u\ndGFpbnNLZXkoIlRocmVhZEZhY3RvcnkiKSkgewogICAgICAgICAgICBTdHJp\nbmcgZk5hbWUgPSBvcHRzLmdldFByb3BlcnR5KCJUaHJlYWRGYWN0b3J5Iik7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmYWN0b3J5ID0g\nKFRocmVhZEZhY3RvcnkpIENsYXNzLmZvck5hbWUoZk5hbWUpLm5ld0luc3Rh\nbmNlKCk7CiAgICAgICAgICAgICAgICBDb25maWd1cmF0aW9ucy5jb25maWd1\ncmVJbnN0YW5jZShmYWN0b3J5LCBjb25mLCBvcHRzLAogICAgICAgICAgICAg\nICAgICAgICAgICBnZXRQcm9wZXJ0eSgpKTsKICAgICAgICAgICAgfSBjYXRj\naCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBV\nc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJiYWQtdGhyZWFkLWZhY3RvcnkiLCBm\nTmFtZSksIHQpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAg\nICAgICAgb3B0cy5yZW1vdmVQcm9wZXJ0eSgiVGhyZWFkRmFjdG9yeSIpOwog\nICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmFj\ndG9yeSA9IEV4ZWN1dG9ycy5kZWZhdWx0VGhyZWFkRmFjdG9yeSgpOwogICAg\nICAgIH0KICAgICAgICBpZiAoImNhY2hlZCIuZXF1YWxzKGNscykpIHsKICAg\nICAgICAgICAgb2JqID0gRXhlY3V0b3JzLm5ld0NhY2hlZFRocmVhZFBvb2wo\nZmFjdG9yeSk7CiAgICAgICAgfSBlbHNlIGlmICgiZml4ZWQiLmVxdWFscyhj\nbHMpKSB7CiAgICAgICAgICAgIGxvbmcga2VlcEFsaXZlVGltZSA9IDYwTDsK\nICAgICAgICAgICAgaWYgKG9wdHMuY29udGFpbnNLZXkoIktlZXBBbGl2ZVRp\nbWUiKSkgewogICAgICAgICAgICAgICAga2VlcEFsaXZlVGltZSA9IG9wdHMu\nZ2V0TG9uZ1Byb3BlcnR5KCJLZWVwQWxpdmVUaW1lIik7CiAgICAgICAgICAg\nICAgICBvcHRzLnJlbW92ZUxvbmdQcm9wZXJ0eSgiS2VlcEFsaXZlVGltZSIp\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9iaiA9IG5ldyBUaHJlYWRQ\nb29sRXhlY3V0b3IoZGVmYXVsdFNpemUsIGRlZmF1bHRTaXplLAogICAgICAg\nICAgICAgICAgICAgICAgICAgICAga2VlcEFsaXZlVGltZSwgVGltZVVuaXQu\nU0VDT05EUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTeW5j\naHJvbm91c1F1ZXVlPFJ1bm5hYmxlPigpLCBmYWN0b3J5KTsKCiAgICAgICAg\nICAgIENvbmZpZ3VyYXRpb25zLmNvbmZpZ3VyZUluc3RhbmNlKG9iaiwgY29u\nZiwgb3B0cywgZ2V0UHJvcGVydHkoKSk7CiAgICAgICAgfQogICAgICAgIHNl\ndChvYmosIHRydWUpOwogICAgICAgIHJldHVybiBvYmo7CiAgICB9Cn0K\n","encoding":"base64"}

