{"sha":"33836ededb0b0073584f69445ff7d0d237375fde","node_id":"MDQ6QmxvYjIwNjM2NDozMzgzNmVkZWRiMGIwMDczNTg0ZjY5NDQ1ZmY3ZDBkMjM3Mzc1ZmRl","size":6548,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/33836ededb0b0073584f69445ff7d0d237375fde","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuc2xpY2UuamRiYzsKCmltcG9y\ndCBqYXZhLnNxbC5Db25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwuUmVzdWx0\nU2V0OwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2\nYS5zcWwuU1FMV2FybmluZzsKaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDsK\naW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwu\nSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCi8qKgogKiBBIHRl\nbXBsYXRlIGZvciBtdWx0aXBsZSBTdGF0ZW1lbnRzIGJlaW5nIGV4ZWN1dGVk\nIGJ5IG11bHRpcGxlIGNvbm5lY3Rpb25zLgogKiAKICogQGF1dGhvciBQaW5h\na2kgUG9kZGFyIAogKgogKi8KY2xhc3MgRGlzdHJpYnV0ZWRUZW1wbGF0ZTxU\nIGV4dGVuZHMgU3RhdGVtZW50PiAKCWltcGxlbWVudHMgU3RhdGVtZW50LCBJ\ndGVyYWJsZTxUPiB7Cglwcm90ZWN0ZWQgTGlzdDxUPiBzdG10cyA9IG5ldyBB\ncnJheUxpc3Q8VD4oKTsKCXByb3RlY3RlZCBmaW5hbCBEaXN0cmlidXRlZENv\nbm5lY3Rpb24gY29uOwoJcHJvdGVjdGVkIFQgbWFzdGVyOwoJCglwdWJsaWMg\nRGlzdHJpYnV0ZWRUZW1wbGF0ZShEaXN0cmlidXRlZENvbm5lY3Rpb24gYykg\newoJCWNvbiA9IGM7Cgl9CgkKCXB1YmxpYyBJdGVyYXRvcjxUPiBpdGVyYXRv\ncigpIHsKCQlyZXR1cm4gc3RtdHMuaXRlcmF0b3IoKTsKCX0KCQoJcHVibGlj\nIHZvaWQgYWRkKFQgcykgewoJCWlmIChzdG10cy5pc0VtcHR5KCkpCgkJCW1h\nc3RlciA9IHM7CgkJdHJ5IHsKCQkJaWYgKCFjb24uY29udGFpbnMocy5nZXRD\nb25uZWN0aW9uKCkpKQoJCQkJdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbihzICsgIiBoYXMgZGlmZmVyZW50IGNvbm5lY3Rpb24iKTsKCQkJ\nc3RtdHMuYWRkKHMpOwoJCX0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7CgkJ\nCWUucHJpbnRTdGFja1RyYWNlKCk7CgkJfQoJfQoJCglwdWJsaWMgdm9pZCBh\nZGRCYXRjaChTdHJpbmcgc3FsKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlm\nb3IgKFQgczp0aGlzKQoJCQlzLmFkZEJhdGNoKHNxbCk7Cgl9CgoJcHVibGlj\nIHZvaWQgY2FuY2VsKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJZm9yIChU\nIHM6dGhpcykKCQkJcy5jYW5jZWwoKTsKCX0KCglwdWJsaWMgdm9pZCBjbGVh\nckJhdGNoKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJZm9yIChUIHM6dGhp\ncykKCQkJcy5jbGVhckJhdGNoKCk7Cgl9CgoJcHVibGljIHZvaWQgY2xlYXJX\nYXJuaW5ncygpIHRocm93cyBTUUxFeGNlcHRpb24gewoJCWZvciAoVCBzOnRo\naXMpCgkJCXMuY2xlYXJXYXJuaW5ncygpOwoJfQoKCXB1YmxpYyB2b2lkIGNs\nb3NlKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJZm9yIChUIHM6dGhpcykK\nCQkJcy5jbG9zZSgpOwoJfQoKCXB1YmxpYyBib29sZWFuIGV4ZWN1dGUoU3Ry\naW5nIGFyZzApIHRocm93cyBTUUxFeGNlcHRpb24gewoJCWJvb2xlYW4gcmV0\nID0gdHJ1ZTsKCQlmb3IgKFQgczp0aGlzKQoJCQlyZXQgPSBzLmV4ZWN1dGUo\nYXJnMCkgJiByZXQ7CgkJcmV0dXJuIHJldDsKCX0KCglwdWJsaWMgYm9vbGVh\nbiBleGVjdXRlKFN0cmluZyBhcmcwLCBpbnQgYXJnMSkgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CgkJYm9vbGVhbiByZXQgPSB0cnVlOwoJCWZvciAoVCBzOnRo\naXMpCgkJCXJldCA9IHMuZXhlY3V0ZShhcmcwLCBhcmcxKSAmIHJldDsKCQly\nZXR1cm4gcmV0OwoJfQoKCXB1YmxpYyBib29sZWFuIGV4ZWN1dGUoU3RyaW5n\nIGFyZzAsIGludFtdIGFyZzEpIHRocm93cyBTUUxFeGNlcHRpb24gewoJCWJv\nb2xlYW4gcmV0ID0gdHJ1ZTsKCQlmb3IgKFQgczp0aGlzKQoJCQlyZXQgPSBz\nLmV4ZWN1dGUoYXJnMCwgYXJnMSkgJiByZXQ7CgkJcmV0dXJuIHJldDsKCX0K\nCglwdWJsaWMgYm9vbGVhbiBleGVjdXRlKFN0cmluZyBhcmcwLCBTdHJpbmdb\nXSBhcmcxKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlib29sZWFuIHJldCA9\nIHRydWU7CgkJZm9yIChUIHM6dGhpcykKCQkJcmV0ID0gcy5leGVjdXRlKGFy\nZzAsIGFyZzEpICYgcmV0OwoJCXJldHVybiByZXQ7Cgl9CgoJcHVibGljIGlu\ndFtdIGV4ZWN1dGVCYXRjaCgpIHRocm93cyBTUUxFeGNlcHRpb24gewoJCWlu\ndFtdIHJldCA9IG5ldyBpbnRbMF07CgkJZm9yIChTdGF0ZW1lbnQgczp0aGlz\nKSB7CgkJCWludFtdIHRtcCA9IHMuZXhlY3V0ZUJhdGNoKCk7CgkJCXJldCA9\nIG5ldyBpbnRbcmV0Lmxlbmd0aCArIHRtcC5sZW5ndGhdOwoJCQlTeXN0ZW0u\nYXJyYXljb3B5KHRtcCwgMCwgcmV0LCByZXQubGVuZ3RoLXRtcC5sZW5ndGgs\nIHRtcC5sZW5ndGgpOwoJCX0KCQlyZXR1cm4gcmV0OwoJfQoKCXB1YmxpYyBS\nZXN1bHRTZXQgZXhlY3V0ZVF1ZXJ5KCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCgkJRGlzdHJpYnV0ZWRSZXN1bHRTZXQgcnMgPSBuZXcgRGlzdHJpYnV0ZWRS\nZXN1bHRTZXQoKTsKCQlmb3IgKFQgczp0aGlzKQoJCQlycy5hZGQocy5leGVj\ndXRlUXVlcnkobnVsbCkpOwoJCXJldHVybiByczsKCX0KCglwdWJsaWMgUmVz\ndWx0U2V0IGV4ZWN1dGVRdWVyeShTdHJpbmcgYXJnMCkgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CgkJRGlzdHJpYnV0ZWRSZXN1bHRTZXQgcnMgPSBuZXcgRGlz\ndHJpYnV0ZWRSZXN1bHRTZXQoKTsKCQlmb3IgKFQgczp0aGlzKQoJCQlycy5h\nZGQocy5leGVjdXRlUXVlcnkoYXJnMCkpOwoJCXJldHVybiByczsKCX0KCglw\ndWJsaWMgaW50IGV4ZWN1dGVVcGRhdGUoU3RyaW5nIGFyZzApIHRocm93cyBT\nUUxFeGNlcHRpb24gewoJCWludCByZXQgPSAwOwoJCWZvciAoVCBzOnRoaXMp\nCgkJCXJldCArPSBzLmV4ZWN1dGVVcGRhdGUoYXJnMCk7CgkJcmV0dXJuIHJl\ndDsKCX0KCglwdWJsaWMgaW50IGV4ZWN1dGVVcGRhdGUoU3RyaW5nIGFyZzAs\nIGludCBhcmcxKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlpbnQgcmV0ID0g\nMDsKCQlmb3IgKFQgczp0aGlzKQoJCQlyZXQgKz0gcy5leGVjdXRlVXBkYXRl\nKGFyZzAsIGFyZzEpOwoJCXJldHVybiByZXQ7Cgl9CgoJcHVibGljIGludCBl\neGVjdXRlVXBkYXRlKFN0cmluZyBhcmcwLCBpbnRbXSBhcmcxKSB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKCQlpbnQgcmV0ID0gMDsKCQlmb3IgKFQgczp0aGlz\nKQoJCQlyZXQgKz0gcy5leGVjdXRlVXBkYXRlKGFyZzAsIGFyZzEpOwoJCXJl\ndHVybiByZXQ7Cgl9CgoJcHVibGljIGludCBleGVjdXRlVXBkYXRlKFN0cmlu\nZyBhcmcwLCBTdHJpbmdbXSBhcmcxKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nCQlpbnQgcmV0ID0gMDsKCQlmb3IgKFQgczp0aGlzKQoJCQlyZXQgKz0gcy5l\neGVjdXRlVXBkYXRlKGFyZzAsIGFyZzEpOwoJCXJldHVybiByZXQ7Cgl9CgoJ\ncHVibGljIENvbm5lY3Rpb24gZ2V0Q29ubmVjdGlvbigpIHRocm93cyBTUUxF\neGNlcHRpb24gewoJCXJldHVybiBjb247Cgl9CgoJcHVibGljIGludCBnZXRG\nZXRjaERpcmVjdGlvbigpIHRocm93cyBTUUxFeGNlcHRpb24gewoJCXJldHVy\nbiBtYXN0ZXIuZ2V0RmV0Y2hEaXJlY3Rpb24oKTsKCX0KCglwdWJsaWMgaW50\nIGdldEZldGNoU2l6ZSgpIHRocm93cyBTUUxFeGNlcHRpb24gewoJCXJldHVy\nbiBtYXN0ZXIuZ2V0RmV0Y2hTaXplKCk7Cgl9CgoJcHVibGljIFJlc3VsdFNl\ndCBnZXRHZW5lcmF0ZWRLZXlzKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJ\nRGlzdHJpYnV0ZWRSZXN1bHRTZXQgbXJzID0gbmV3IERpc3RyaWJ1dGVkUmVz\ndWx0U2V0KCk7CgkJZm9yIChUIHM6dGhpcykKCQkJbXJzLmFkZChzLmdldEdl\nbmVyYXRlZEtleXMoKSk7CgkJcmV0dXJuIG1yczsKCX0KCglwdWJsaWMgaW50\nIGdldE1heEZpZWxkU2l6ZSgpIHRocm93cyBTUUxFeGNlcHRpb24gewoJCXJl\ndHVybiBtYXN0ZXIuZ2V0TWF4RmllbGRTaXplKCk7Cgl9CgoJcHVibGljIGlu\ndCBnZXRNYXhSb3dzKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJcmV0dXJu\nIG1hc3Rlci5nZXRNYXhSb3dzKCk7Cgl9CgoJcHVibGljIGJvb2xlYW4gZ2V0\nTW9yZVJlc3VsdHMoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlmb3IgKFQg\nczp0aGlzKQoJCQlpZiAocy5nZXRNb3JlUmVzdWx0cygpKQoJCQkJcmV0dXJu\nIHRydWU7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBib29sZWFuIGdl\ndE1vcmVSZXN1bHRzKGludCBhcmcwKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nCQlmb3IgKFQgczp0aGlzKQoJCQlpZiAocy5nZXRNb3JlUmVzdWx0cyhhcmcw\nKSkKCQkJCXJldHVybiB0cnVlOwoJCXJldHVybiBmYWxzZTsKCX0KCglwdWJs\naWMgaW50IGdldFF1ZXJ5VGltZW91dCgpIHRocm93cyBTUUxFeGNlcHRpb24g\newoJCXJldHVybiBtYXN0ZXIuZ2V0UXVlcnlUaW1lb3V0KCk7Cgl9CgoJcHVi\nbGljIFJlc3VsdFNldCBnZXRSZXN1bHRTZXQoKSB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKCQlEaXN0cmlidXRlZFJlc3VsdFNldCBycyA9IG5ldyBEaXN0cmli\ndXRlZFJlc3VsdFNldCgpOwoJCWZvciAoVCBzOnRoaXMpCgkJCXJzLmFkZChz\nLmdldFJlc3VsdFNldCgpKTsKCQlyZXR1cm4gcnM7Cgl9CgoJcHVibGljIGlu\ndCBnZXRSZXN1bHRTZXRDb25jdXJyZW5jeSgpIHRocm93cyBTUUxFeGNlcHRp\nb24gewoJCXJldHVybiBtYXN0ZXIuZ2V0UmVzdWx0U2V0Q29uY3VycmVuY3ko\nKTsKCX0KCglwdWJsaWMgaW50IGdldFJlc3VsdFNldEhvbGRhYmlsaXR5KCkg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJcmV0dXJuIG1hc3Rlci5nZXRSZXN1\nbHRTZXRIb2xkYWJpbGl0eSgpOwoJfQoKCXB1YmxpYyBpbnQgZ2V0UmVzdWx0\nU2V0VHlwZSgpIHRocm93cyBTUUxFeGNlcHRpb24gewoJCXJldHVybiBtYXN0\nZXIuZ2V0UmVzdWx0U2V0VHlwZSgpOwoJfQoKCXB1YmxpYyBpbnQgZ2V0VXBk\nYXRlQ291bnQoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlyZXR1cm4gbWFz\ndGVyLmdldFVwZGF0ZUNvdW50KCk7Cgl9CgoJcHVibGljIFNRTFdhcm5pbmcg\nZ2V0V2FybmluZ3MoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlyZXR1cm4g\nbWFzdGVyLmdldFdhcm5pbmdzKCk7Cgl9CgoJcHVibGljIHZvaWQgc2V0Q3Vy\nc29yTmFtZShTdHJpbmcgbmFtZSkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJ\nZm9yIChUIHM6dGhpcykKCQkJcy5zZXRDdXJzb3JOYW1lKG5hbWUpOwoJfQoK\nCXB1YmxpYyB2b2lkIHNldEVzY2FwZVByb2Nlc3NpbmcoYm9vbGVhbiBmbGFn\nKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlmb3IgKFQgczp0aGlzKQoJCQlz\nLnNldEVzY2FwZVByb2Nlc3NpbmcoZmxhZyk7Cgl9CgoJcHVibGljIHZvaWQg\nc2V0RmV0Y2hEaXJlY3Rpb24oaW50IGRpcikgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CgkJZm9yIChUIHM6dGhpcykKCQkJcy5zZXRGZXRjaERpcmVjdGlvbihk\naXIpOwoJfQoKCXB1YmxpYyB2b2lkIHNldEZldGNoU2l6ZShpbnQgc2l6ZSkg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CgkJZm9yIChUIHM6dGhpcykKCQkJcy5z\nZXRGZXRjaFNpemUoc2l6ZSk7Cgl9CgoJcHVibGljIHZvaWQgc2V0TWF4Rmll\nbGRTaXplKGludCBzaXplKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlmb3Ig\nKFQgczp0aGlzKQoJCQlzLnNldE1heEZpZWxkU2l6ZShzaXplKTsKCX0KCglw\ndWJsaWMgdm9pZCBzZXRNYXhSb3dzKGludCBuKSB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKCQlmb3IgKFQgczp0aGlzKQoJCQlzLnNldE1heEZpZWxkU2l6ZShu\nKTsKCX0KCQoJcHVibGljIHZvaWQgc2V0UXVlcnlUaW1lb3V0KGludCBuKSB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKCQlmb3IgKFQgczp0aGlzKQoJCQlzLnNl\ndE1heEZpZWxkU2l6ZShuKTsKCX0KfQo=\n","encoding":"base64"}

