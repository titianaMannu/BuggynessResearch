{"sha":"235df3645c3674ad4ac847118baa4a79a3bd6ea1","node_id":"MDQ6QmxvYjIwNjM2NDoyMzVkZjM2NDVjMzY3NGFkNGFjODQ3MTE4YmFhNGE3OWEzYmQ2ZWEx","size":5706,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/235df3645c3674ad4ac847118baa4a79a3bd6ea1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuc2xpY2U7CgppbXBvcnQgamF2\nYS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CgovKioKICog\nVGVzdHMgYmFzaWMgY3JlYXRlLCByZWFkLCB1cGRhdGUgYW5kIGRlbGV0ZSBv\ncGVyYXRpb25zLgogKiAKICogQGF1dGhvciBQaW5ha2kgUG9kZGFyIAogKgog\nKi8KcHVibGljIGNsYXNzIFRlc3RCYXNpYyBleHRlbmRzIFNsaWNlVGVzdENh\nc2UgewogICAgCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFBlcnNpc3RlbmNl\nVW5pdE5hbWUoKSB7CiAgICAgICAgcmV0dXJuICJzbGljZSI7CiAgICB9CgoK\nICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgc3VwZXIuc2V0VXAoUE9iamVjdC5jbGFzcywgUGVyc29uLmNsYXNz\nLCBBZGRyZXNzLmNsYXNzLCBDTEVBUl9UQUJMRVMpOwogICAgfQoKICAgIC8q\nKgogICAgICogUGVyc2lzdCBOIG9iamVjdHMuCiAgICAgKi8KICAgIExpc3Q8\nUE9iamVjdD4gY3JlYXRlKGludCBOKSB7CiAgICAgICAgTGlzdDxQT2JqZWN0\nPiBwY3MgPSBuZXcgQXJyYXlMaXN0PFBPYmplY3Q+KCk7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgICAgIFBPYmpl\nY3QgcGMgPSBuZXcgUE9iamVjdCgpOwogICAgICAgICAgICBwY3MuYWRkKHBj\nKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChwYyk7CiAgICAgICAgICAgIHBj\nLnNldFZhbHVlKGkpOwogICAgICAgIH0KICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAg\ncmV0dXJuIHBjczsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIHNp\nbmdsZSBvYmplY3QuCiAgICAgKi8KICAgIFBPYmplY3QgY3JlYXRlKCkgewog\nICAgICAgIHJldHVybiBjcmVhdGUoMSkuZ2V0KDApOwogICAgfQoKICAgIC8q\nKgogICAgICogRGVsZXRlIGEgc2luZ2xlIG9iamVjdCBieSBFbnRpdHlNYW5h\nZ2VyLnJlbW92ZSgpCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3REZWxl\ndGUoKSB7CiAgICAgICAgaW50IE4gPSAxMDsKICAgICAgICBjcmVhdGUoTik7\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwogICAgICAgIGludCBiZWZvcmUgPSBjb3VudChQT2JqZWN0LmNsYXNzKTsK\nICAgICAgICBMaXN0IGFsbCA9IGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgcCBG\nUk9NIFBPYmplY3QgcCIpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3Nl\ncnRGYWxzZShhbGwuaXNFbXB0eSgpKTsKICAgICAgICBlbS5yZW1vdmUoYWxs\nLmdldCgwKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKCiAgICAgICAgaW50IGFmdGVyID0gY291bnQoUE9iamVjdC5jbGFzcyk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKGJlZm9yZSAtIDEsIGFmdGVyKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIERlbGV0ZSBpbiBidWxrIGJ5IHF1ZXJ5Lgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0QnVsa0RlbGV0ZSgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgaW50IGMgPSBjb3VudChQT2JqZWN0LmNsYXNzKTsKICAgICAgICBp\nbnQgZCA9IGVtLmNyZWF0ZVF1ZXJ5KCJERUxFVEUgRlJPTSBQT2JqZWN0IHAi\nKS5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGMsIGQp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgYyA9IGNvdW50KFBPYmplY3QuY2xhc3MpOwogICAgICAgIGFzc2VydEVx\ndWFscygwLCBjKTsKCiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9yZSBhbmQg\nZmluZCB0aGUgc2FtZSBvYmplY3QuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHRlc3RGaW5kKCkgewogICAgICAgIFBPYmplY3QgcGMgPSBjcmVhdGUoKTsK\nICAgICAgICBpbnQgdmFsdWUgPSBwYy5nZXRWYWx1ZSgpOwoKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAg\nUE9iamVjdCBwYzIgPSBlbS5maW5kKFBPYmplY3QuY2xhc3MsIHBjLmdldElk\nKCkpOwogICAgICAgIGFzc2VydE5vdE51bGwocGMyKTsKICAgICAgICBhc3Nl\ncnROb3RFcXVhbHMocGMsIHBjMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHBj\nLmdldElkKCksIHBjMi5nZXRJZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\ndmFsdWUsIHBjMi5nZXRWYWx1ZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0UGVyc2lzdEluZGVwZW5kZW50T2JqZWN0cygpIHsKICAgICAgICBp\nbnQgYmVmb3JlID0gY291bnQoUE9iamVjdC5jbGFzcyk7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgaW50IE4gPSAyOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKykK\nICAgICAgICAgICAgZW0ucGVyc2lzdChuZXcgUE9iamVjdCgpKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nZWFyKCk7CiAgICAgICAgaW50IGFmdGVyID0gY291bnQoUE9iamVjdC5jbGFz\ncyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGJlZm9yZSArIE4sIGFmdGVyKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UGVyc2lzdENvbm5lY3RlZE9i\namVjdEdyYXBoKCkgewogICAgICAgIFBlcnNvbiBwMSA9IG5ldyBQZXJzb24o\nIkEiKTsKICAgICAgICBQZXJzb24gcDIgPSBuZXcgUGVyc29uKCJCIik7CiAg\nICAgICAgUGVyc29uIHAzID0gbmV3IFBlcnNvbigiQyIpOwogICAgICAgIEFk\nZHJlc3MgYTEgPSBuZXcgQWRkcmVzcygiUm9tZSIsIDEyMzQ1KTsKICAgICAg\nICBBZGRyZXNzIGEyID0gbmV3IEFkZHJlc3MoIlNhbiBGcmFuY2lzY28iLCAy\nMzQ1Nik7CiAgICAgICAgQWRkcmVzcyBhMyA9IG5ldyBBZGRyZXNzKCJOZXcg\nWW9yayIsIDM0NTY3KTsKICAgICAgICBwMS5zZXRBZGRyZXNzKGExKTsKICAg\nICAgICBwMi5zZXRBZGRyZXNzKGEyKTsKICAgICAgICBwMy5zZXRBZGRyZXNz\nKGEzKTsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QocDEpOwogICAgICAgIGVtLnBl\ncnNpc3QocDIpOwogICAgICAgIGVtLnBlcnNpc3QocDMpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgogICAgICAgIGVtLmNsZWFy\nKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAg\nTGlzdDxQZXJzb24+IHBlcnNvbnMgPQogICAgICAgICAgICAgICAgZW0uY3Jl\nYXRlUXVlcnkoIlNFTEVDVCBwIEZST00gUGVyc29uIHAgV0hFUkUgcC5uYW1l\nPT8xIikKICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigx\nLCAiQSIpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBMaXN0PEFkZHJlc3M+\nIGFkZHJlc3NlcyA9CiAgICAgICAgICAgICAgICBlbS5jcmVhdGVRdWVyeSgi\nU0VMRUNUIGEgRlJPTSBBZGRyZXNzIGEiKS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgZm9yIChBZGRyZXNzIHBjIDogYWRkcmVzc2VzKSB7CiAgICAgICAg\nICAgIGFzc2VydE5vdE51bGwocGMuZ2V0Q2l0eSgpKTsKICAgICAgICAgICAg\nYXNzZXJ0Tm90TnVsbChwYy5nZXRPd25lcigpLmdldE5hbWUoKSk7CiAgICAg\nICAgfQogICAgICAgIGZvciAoUGVyc29uIHBjIDogcGVyc29ucykgewogICAg\nICAgICAgICBhc3NlcnROb3ROdWxsKHBjLmdldE5hbWUoKSk7CiAgICAgICAg\nICAgIGFzc2VydE5vdE51bGwocGMuZ2V0QWRkcmVzcygpLmdldENpdHkoKSk7\nCiAgICAgICAgfQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJh\nY2soKTsKICAgIH0KCiAgICAvKioKICAgICAqIE1lcmdlIG9ubHkgd29ya3Mg\naWYgdGhlIGRpc3RyaWJ1dGlvbiBwb2xpY3kgYXNzaWducyB0aGUgY29ycmVj\ndCBzbGljZQogICAgICogZnJvbSB3aGljaCB0aGUgaW5zdGFuY2Ugd2FzIGZl\ndGNoZWQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RNZXJnZSgpIHsK\nICAgICAgICBQT2JqZWN0IHBjID0gY3JlYXRlKDEpLmdldCgwKTsKICAgICAg\nICBpbnQgdmFsdWUgPSBwYy5nZXRWYWx1ZSgpOwogICAgICAgIHBjLnNldFZh\nbHVlKHZhbHVlICsgMSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYyk7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIFBPYmplY3QgcGMyID0gZW0ubWVyZ2UocGMpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIo\nKTsKCiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYzIpOwogICAgICAgIGFzc2Vy\ndE5vdEVxdWFscyhwYywgcGMyKTsKICAgICAgICBhc3NlcnRFcXVhbHMocGMu\nZ2V0SWQoKSwgcGMyLmdldElkKCkpOwogICAgICAgIGFzc2VydEVxdWFscyh2\nYWx1ZSArIDEsIHBjMi5nZXRWYWx1ZSgpKTsKICAgIH0KCn0K\n","encoding":"base64"}

