{"sha":"9cb60aca8b1160e77247c22869b54352338296b8","node_id":"MDQ6QmxvYjIwNjM2NDo5Y2I2MGFjYThiMTE2MGU3NzI0N2MyMjg2OWI1NDM1MjMzODI5NmI4","size":7465,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9cb60aca8b1160e77247c22869b54352338296b8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5hbnQ7CgppbXBvcnQg\namF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwoKaW1wb3J0IG9yZy5h\ncGFjaGUudG9vbHMuYW50LkJ1aWxkRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS50b29scy5hbnQudHlwZXMuRW51bWVyYXRlZEF0dHJpYnV0ZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3Vy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpE\nQkNDb25maWd1cmF0aW9uSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLm1ldGEuTWFwcGluZ1Rvb2w7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuU2NoZW1hVG9vbDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIuYW50LkFic3RyYWN0VGFzazsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uSW1wbDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5GaWxlczsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5NdWx0aUxvYWRlckNs\nYXNzUmVzb2x2ZXI7CgovKioKICogRXhlY3V0ZXMgdGhlIHtAbGluayBNYXBw\naW5nVG9vbH0gb24gdGhlIHNwZWNpZmllZCBmaWxlcy4KICogVGhpcyB0YXNr\nIGNhbiB0YWtlIHRoZSBmb2xsb3dpbmcgYXJndW1lbnRzOgogKiA8dWw+CiAq\nIDxsaT48Y29kZT5hY3Rpb248L2NvZGU+PC9saT4KICogPGxpPjxjb2RlPm1l\ndGE8L2NvZGU+PC9saT4KICogPGxpPjxjb2RlPnNjaGVtYUFjdGlvbjwvY29k\nZT48L2xpPgogKiA8bGk+PGNvZGU+ZHJvcFRhYmxlczwvY29kZT48L2xpPgog\nKiA8bGk+PGNvZGU+aWdub3JlRXJyb3JzPC9jb2RlPjwvbGk+CiAqIDxsaT48\nY29kZT5yZWFkU2NoZW1hPC9jb2RlPjwvbGk+CiAqIDxsaT48Y29kZT5wcmlt\nYXJ5S2V5czwvY29kZT48L2xpPgogKiA8bGk+PGNvZGU+Zm9yZWlnbktleXM8\nL2NvZGU+PC9saT4KICogPGxpPjxjb2RlPmluZGV4ZXM8L2NvZGU+PC9saT4K\nICogPGxpPjxjb2RlPmZpbGU8L2NvZGU+PC9saT4KICogPGxpPjxjb2RlPnNj\naGVtYUZpbGU8L2NvZGU+PC9saT4KICogPGxpPjxjb2RlPnNxbEZpbGU8L2Nv\nZGU+PC9saT4KICogPGxpPjxjb2RlPnRtcENsYXNzTG9hZGVyPC9jb2RlPjwv\nbGk+CiAqIDwvdWw+IE9mIHRoZXNlIGFyZ3VtZW50cywgb25seSA8Y29kZT5h\nY3Rpb248L2NvZGU+IGlzIHJlcXVpcmVkLgogKi8KcHVibGljIGNsYXNzIE1h\ncHBpbmdUb29sVGFzawogICAgZXh0ZW5kcyBBYnN0cmFjdFRhc2sgewoKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxp\nemVyLmZvclBhY2thZ2UKICAgICAgICAoTWFwcGluZ1Rvb2xUYXNrLmNsYXNz\nKTsKCiAgICBwcm90ZWN0ZWQgTWFwcGluZ1Rvb2wuRmxhZ3MgZmxhZ3MgPSBu\nZXcgTWFwcGluZ1Rvb2wuRmxhZ3MoKTsKICAgIHByb3RlY3RlZCBTdHJpbmcg\nZmlsZSA9IG51bGw7CiAgICBwcm90ZWN0ZWQgU3RyaW5nIHNjaGVtYUZpbGUg\nPSBudWxsOwogICAgcHJvdGVjdGVkIFN0cmluZyBzcWxGaWxlID0gbnVsbDsK\nICAgIHByb3RlY3RlZCBib29sZWFuIHRtcENsYXNzTG9hZGVyID0gdHJ1ZTsK\nCiAgICAvKioKICAgICAqIFNldCB0aGUgZW51bWVyYXRlZCBNYXBwaW5nVG9v\nbCBhY3Rpb24gdHlwZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0QWN0\naW9uKEFjdGlvbiBhY3QpIHsKICAgICAgICBmbGFncy5hY3Rpb24gPSBhY3Qu\nZ2V0VmFsdWUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgZW51\nbWVyYXRlZCBTY2hlbWFUb29sIGFjdGlvbiB0eXBlLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXRTY2hlbWFBY3Rpb24oU2NoZW1hQWN0aW9uIGFjdCkg\newogICAgICAgIGZsYWdzLnNjaGVtYUFjdGlvbiA9IGFjdC5nZXRWYWx1ZSgp\nOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHdoZXRoZXIgdGhlIE1hcHBp\nbmdUb29sIHNob3VsZCByZWFkIHRoZSBmdWxsIHNjaGVtYS4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0UmVhZFNjaGVtYShib29sZWFuIHJlYWRTY2hl\nbWEpIHsKICAgICAgICBmbGFncy5yZWFkU2NoZW1hID0gcmVhZFNjaGVtYTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFNldCB3aGV0aGVyIHdlIHdhbnQgdGhl\nIE1hcHBpbmdUb29sIHRvIGlnbm9yZSBTUUwgZXJyb3JzLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRJZ25vcmVFcnJvcnMoYm9vbGVhbiBpZ25vcmVF\ncnJvcnMpIHsKICAgICAgICBmbGFncy5pZ25vcmVFcnJvcnMgPSBpZ25vcmVF\ncnJvcnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgd2hldGhlciB0aGUg\nTWFwcGluZ1Rvb2wgc2hvdWxkIGRyb3AgdGFibGVzLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXREcm9wVGFibGVzKGJvb2xlYW4gZHJvcFRhYmxlcykg\newogICAgICAgIGZsYWdzLmRyb3BUYWJsZXMgPSBkcm9wVGFibGVzOwogICAg\nfQoKICAgIC8qKgogICAgICogU2V0IHdoZXRoZXIgdG8gZHJvcCBPcGVuSlBB\nIHRhYmxlcy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0T3BlbkpQQVRh\nYmxlcyhib29sZWFuIG9wZW5qcGFUYWJsZXMpIHsKICAgICAgICBmbGFncy5v\ncGVuanBhVGFibGVzID0gb3BlbmpwYVRhYmxlczsKICAgIH0KCiAgICAvKioK\nICAgICAqIFNldCB3aGV0aGVyIHRoZSBNYXBwaW5nVG9vbCBzaG91bGQgZHJv\ncCBzZXF1ZW5jZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldERyb3BT\nZXF1ZW5jZXMoYm9vbGVhbiBkcm9wU2VxdWVuY2VzKSB7CiAgICAgICAgZmxh\nZ3MuZHJvcFNlcXVlbmNlcyA9IGRyb3BTZXF1ZW5jZXM7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBTZXQgd2hldGhlciB0aGUgTWFwcGluZ1Rvb2wgc2hvdWxk\nIG1hbmlwdWxhdGUgc2VxdWVuY2VzLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRTZXF1ZW5jZXMoYm9vbGVhbiBzZXF1ZW5jZXMpIHsKICAgICAgICBm\nbGFncy5zZXF1ZW5jZXMgPSBzZXF1ZW5jZXM7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTZXQgd2hldGhlciB0byBnZW5lcmF0ZSBwcmltYXJ5IGtleSBpbmZv\ncm1hdGlvbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0UHJpbWFyeUtl\neXMoYm9vbGVhbiBwa3MpIHsKICAgICAgICBmbGFncy5wcmltYXJ5S2V5cyA9\nIHBrczsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB3aGV0aGVyIHRvIGdl\nbmVyYXRlIGZvcmVpZ24ga2V5IGluZm9ybWF0aW9uLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXRGb3JlaWduS2V5cyhib29sZWFuIGZrcykgewogICAg\nICAgIGZsYWdzLmZvcmVpZ25LZXlzID0gZmtzOwogICAgfQoKICAgIC8qKgog\nICAgICogU2V0IHdoZXRoZXIgdG8gZ2VuZXJhdGUgaW5kZXggaW5mb3JtYXRp\nb24uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEluZGV4ZXMoYm9vbGVh\nbiBpZHhzKSB7CiAgICAgICAgZmxhZ3MuaW5kZXhlcyA9IGlkeHM7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBTZXQgdGhlIG91dHB1dCBmaWxlIHdlIHdhbnQg\ndGhlIE1hcHBpbmdUb29sIHRvIHdyaXRlIHRvLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRGaWxlKFN0cmluZyBmaWxlKSB7CiAgICAgICAgdGhpcy5m\naWxlID0gZmlsZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgb3V0\ncHV0IGZpbGUgZm9yIGFuIFhNTCByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGxh\nbm5lZCBzY2hlbWEuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFNjaGVt\nYUZpbGUoU3RyaW5nIHNjaGVtYUZpbGUpIHsKICAgICAgICB0aGlzLnNjaGVt\nYUZpbGUgPSBzY2hlbWFGaWxlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0\nIHRoZSBvdXRwdXQgZmlsZSB3ZSB3YW50IHRoZSBNYXBwaW5nVG9vbCB0byB3\ncml0ZSBhIFNRTCBzY3JpcHQgdG8uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldFNRTEZpbGUoU3RyaW5nIHNxbEZpbGUpIHsKICAgICAgICB0aGlzLnNx\nbEZpbGUgPSBzcWxGaWxlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHdo\nZXRoZXIgdGhpcyBhY3Rpb24gYXBwbGllcyB0byBtZXRhZGF0YSBhcyB3ZWxs\nIGFzIG1hcHBpbmdzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRNZXRh\nKGJvb2xlYW4gbWV0YSkgewogICAgICAgIGZsYWdzLm1ldGEgPSBtZXRhOwog\nICAgfQoKICAgIHByb3RlY3RlZCBDb25maWd1cmF0aW9uSW1wbCBuZXdDb25m\naWd1cmF0aW9uKCkgewogICAgICAgIHJldHVybiBuZXcgSkRCQ0NvbmZpZ3Vy\nYXRpb25JbXBsKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgZXhlY3V0\nZU9uKFN0cmluZ1tdIGZpbGVzKQogICAgICAgIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIGlmIChNYXBwaW5nVG9vbC5BQ1RJT05fSU1QT1JULmVxdWFs\ncyhmbGFncy5hY3Rpb24pKQogICAgICAgICAgICBhc3NlcnRGaWxlcyhmaWxl\ncyk7CgogICAgICAgIENsYXNzTG9hZGVyIHRvb2xMb2FkZXIgPSAoQ2xhc3NM\nb2FkZXIpIEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgICAgIC5kb1By\naXZpbGVnZWQoSjJEb1ByaXZIZWxwZXIKICAgICAgICAgICAgICAgICAgICAg\nICAgLmdldENsYXNzTG9hZGVyQWN0aW9uKE1hcHBpbmdUb29sLmNsYXNzKSk7\nCiAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVyID0gdG9vbExvYWRlcjsKICAg\nICAgICBNdWx0aUxvYWRlckNsYXNzUmVzb2x2ZXIgcmVzb2x2ZXIgPSBuZXcg\nTXVsdGlMb2FkZXJDbGFzc1Jlc29sdmVyKCk7CgogICAgICAgIGlmICh0bXBD\nbGFzc0xvYWRlcikgewogICAgICAgICAgICBsb2FkZXIgPSAoQ2xhc3NMb2Fk\nZXIpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVs\ncGVyCiAgICAgICAgICAgICAgICAgICAgLm5ld1RlbXBvcmFyeUNsYXNzTG9h\nZGVyQWN0aW9uKGdldENsYXNzTG9hZGVyKCkpKTsKICAgICAgICAgICAgcmVz\nb2x2ZXIuYWRkQ2xhc3NMb2FkZXIobG9hZGVyKTsKICAgICAgICB9CiAgICAg\nICAgcmVzb2x2ZXIuYWRkQ2xhc3NMb2FkZXIodG9vbExvYWRlcik7CiAgICAg\nICAgICAgIAogICAgICAgIGlmIChmbGFncy5tZXRhICYmIE1hcHBpbmdUb29s\nLkFDVElPTl9BREQuZXF1YWxzKGZsYWdzLmFjdGlvbikpCiAgICAgICAgICAg\nIGZsYWdzLm1ldGFEYXRhRmlsZSA9IEZpbGVzLmdldEZpbGUoZmlsZSwgbG9h\nZGVyKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGZsYWdzLm1hcHBpbmdX\ncml0ZXIgPSBGaWxlcy5nZXRXcml0ZXIoZmlsZSwgbG9hZGVyKTsKCiAgICAg\nICAgZmxhZ3Muc2NoZW1hV3JpdGVyID0gRmlsZXMuZ2V0V3JpdGVyKHNjaGVt\nYUZpbGUsIGxvYWRlcik7CiAgICAgICAgZmxhZ3Muc3FsV3JpdGVyID0gRmls\nZXMuZ2V0V3JpdGVyKHNxbEZpbGUsIGxvYWRlcik7CgogICAgICAgIEpEQkND\nb25maWd1cmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pIGdldENv\nbmZpZ3VyYXRpb24oKTsKICAgICAgICBjb25mLnNldENsYXNzUmVzb2x2ZXIo\ncmVzb2x2ZXIpOwogICAgICAgIAogICAgICAgIGlmICghTWFwcGluZ1Rvb2wu\ncnVuKGNvbmYsIGZpbGVzLCBmbGFncywgbG9hZGVyKSkKICAgICAgICAgICAg\ndGhyb3cgbmV3IEJ1aWxkRXhjZXB0aW9uKF9sb2MuZ2V0KCJiYWQtY29uZiIs\nICJNYXBwaW5nVG9vbFRhc2siKQogICAgICAgICAgICAgICAgLmdldE1lc3Nh\nZ2UoKSk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBjbGFzcyBBY3Rpb24K\nICAgICAgICBleHRlbmRzIEVudW1lcmF0ZWRBdHRyaWJ1dGUgewoKICAgICAg\nICBwdWJsaWMgU3RyaW5nW10gZ2V0VmFsdWVzKCkgewogICAgICAgICAgICBy\nZXR1cm4gTWFwcGluZ1Rvb2wuQUNUSU9OUzsKICAgICAgICB9CiAgICB9Cgog\nICAgcHVibGljIHN0YXRpYyBjbGFzcyBTY2hlbWFBY3Rpb24KICAgICAgICBl\neHRlbmRzIEVudW1lcmF0ZWRBdHRyaWJ1dGUgewoKICAgICAgICBwdWJsaWMg\nU3RyaW5nW10gZ2V0VmFsdWVzKCkgewogICAgICAgICAgICBTdHJpbmdbXSBh\nY3Rpb25zID0gbmV3IFN0cmluZ1tTY2hlbWFUb29sLkFDVElPTlMubGVuZ3Ro\nICsgMV07CiAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkoU2NoZW1hVG9v\nbC5BQ1RJT05TLCAwLCBhY3Rpb25zLCAwLAogICAgICAgICAgICAgICAgU2No\nZW1hVG9vbC5BQ1RJT05TLmxlbmd0aCk7CiAgICAgICAgICAgIGFjdGlvbnNb\nYWN0aW9ucy5sZW5ndGggLSAxXSA9ICJub25lIjsKICAgICAgICAgICAgcmV0\ndXJuIGFjdGlvbnM7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nPFA+CiAgICAgKiBTZXQgd2hldGhlciBhIHRlbXBvcmFyeSBDbGFzc0xvYWRl\nciBzaG91bGQgYmUgdXNlZCBieSB0aGUgTWFwcGluZ1Rvb2wuCiAgICAgKiBU\naGUgZGVmYXVsdCB2YWx1ZSBpcyB0cnVlCiAgICAgKiA8L1A+CiAgICAgKiAK\nICAgICAqIEBwYXJhbSB0bXBDbGFzc0xvYWRlcgogICAgICogICAgICAgICAg\nICBXaGV0aGVyIHRoZSB0ZW1wb3JhcnkgQ2xhc3NMb2FkZXIgc2hvdWxkIGJl\nIHVzZWQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFRtcENsYXNzTG9h\nZGVyKGJvb2xlYW4gdG1wQ2xhc3NMb2FkZXIpIHsKICAgICAgICB0aGlzLnRt\ncENsYXNzTG9hZGVyID0gdG1wQ2xhc3NMb2FkZXI7CiAgICB9Cn0KCg==\n","encoding":"base64"}

