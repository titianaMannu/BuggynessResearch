{"sha":"f25cdff8f1e9630a1d46c9bc16217527c7643a98","node_id":"MDQ6QmxvYjIwNjM2NDpmMjVjZGZmOGYxZTk2MzBhMWQ0NmM5YmMxNjIxNzUyN2M3NjQzYTk4","size":9828,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f25cdff8f1e9630a1d46c9bc16217527c7643a98","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlByZXBh\ncmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50OwppbXBv\ncnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFy\ncmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGph\ndmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zcWwuUm93OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc3FsLlJvd0ltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zcWwuU1FMRXhjZXB0aW9uczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEudXRpbC5PcHRpbWlzdGljRXhjZXB0aW9uOwoKLyoq\nCiAqIEJhdGNoIHByZXBhcmVkIHN0YXRlbWVudCBtYW5hZ2VyIGltcGxlbWVu\ndGF0aW9uLiBUaGlzIHByZXBhcmVkIHN0YXRlbWVudAogKiBtYW5hZ2VyIHdp\nbGwgdXRpbGl6ZSB0aGUgSkRCQyBhZGRCYXRjaCgpIGFuZCBleGNldXRlQmF0\nY2goKSB0byBiYXRjaCB0aGUgU1FMCiAqIHN0YXRlbWVudHMgdG9nZXRoZXIg\ndG8gaW1wcm92ZSB0aGUgZXhlY3V0aW9uIHBlcmZvcm1hbmNlLgogKiAKICog\nQGF1dGhvciBUZXJlc2EgS2FuCiAqLwoKcHVibGljIGNsYXNzIEJhdGNoaW5n\nUHJlcGFyZWRTdGF0ZW1lbnRNYW5hZ2VySW1wbCBleHRlbmRzCiAgICAgICAg\nUHJlcGFyZWRTdGF0ZW1lbnRNYW5hZ2VySW1wbCB7CgogICAgcHJpdmF0ZSBm\naW5hbCBzdGF0aWMgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIKICAgICAg\nICAgICAgLmZvclBhY2thZ2UoQmF0Y2hpbmdQcmVwYXJlZFN0YXRlbWVudE1h\nbmFnZXJJbXBsLmNsYXNzKTsKCiAgICBwcml2YXRlIFN0cmluZyBfYmF0Y2hl\nZFNxbCA9IG51bGw7CiAgICBwcml2YXRlIExpc3QgX2JhdGNoZWRSb3dzID0g\nbmV3IEFycmF5TGlzdCgpOwogICAgcHJpdmF0ZSBpbnQgX2JhdGNoTGltaXQ7\nCiAgICBwcml2YXRlIGJvb2xlYW4gX2Rpc2FibGVCYXRjaCA9IGZhbHNlOwog\nICAgcHJpdmF0ZSB0cmFuc2llbnQgTG9nIF9sb2cgPSBudWxsOwoKICAgIC8q\nKgogICAgICogQ29uc3RydWN0b3IuIFN1cHBseSBjb25uZWN0aW9uLgogICAg\nICovCiAgICBwdWJsaWMgQmF0Y2hpbmdQcmVwYXJlZFN0YXRlbWVudE1hbmFn\nZXJJbXBsKEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBDb25uZWN0aW9uIGNv\nbm4sIGludCBiYXRjaExpbWl0KSB7CiAgICAgICAgc3VwZXIoc3RvcmUsIGNv\nbm4pOwogICAgICAgIF9iYXRjaExpbWl0ID0gYmF0Y2hMaW1pdDsKICAgICAg\nICBfbG9nID0gc3RvcmUuZ2V0Q29uZmlndXJhdGlvbigpLmdldExvZyhKREJD\nQ29uZmlndXJhdGlvbi5MT0dfSkRCQyk7CiAgICAgICAgaWYgKF9sb2cuaXNU\ncmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgX2xvZy50cmFjZShfbG9jLmdl\ndCgiYmF0Y2hfbGltaXQiLCBTdHJpbmcudmFsdWVPZihfYmF0Y2hMaW1pdCkp\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIEZsdXNoIHRoZSBnaXZlbiByb3cg\naW1tZWRpYXRlbHkgb3IgZGVmZXJyZWQgdGhlIGZsdXNoIGluIGJhdGNoLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBmbHVzaEFuZFVwZGF0ZShSb3dJ\nbXBsIHJvdykgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKGlz\nQmF0Y2hEaXNhYmxlZChyb3cpKSB7CiAgICAgICAgICAgIC8vIGlmIHRoZXJl\nIHdlcmUgc29tZSBzdGF0ZW1lbnRzIGJhdGNoZWQgYmVmb3JlLCB0aGVuCiAg\nICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZmx1c2ggdGhlbSBvdXQgZmlyc3Qg\nYmVmb3JlIHByb2Nlc3NpbmcgdGhlCiAgICAgICAgICAgIC8vIGN1cnJlbnQg\nbm9uIGJhdGNoIHByb2Nlc3MuCiAgICAgICAgICAgIGZsdXNoQmF0Y2goKTsK\nCiAgICAgICAgICAgIHN1cGVyLmZsdXNoQW5kVXBkYXRlKHJvdyk7CiAgICAg\nICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gcHJvY2VzcyB0aGUgU1FMIHN0\nYXRlbWVudCwgZWl0aGVyIGV4ZWN1dGUgaXQgaW1tZWRpYXRlbHkgb3IKICAg\nICAgICAgICAgLy8gYmF0Y2ggaXQgZm9yIGxhdGVyIGV4ZWN1dGlvbi4KICAg\nICAgICAgICAgU3RyaW5nIHNxbCA9IHJvdy5nZXRTUUwoX2RpY3QpOwogICAg\nICAgICAgICBpZiAoX2JhdGNoZWRTcWwgPT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgLy8gYnJhbmQgbmV3IFNRTAogICAgICAgICAgICAgICAgX2JhdGNo\nZWRTcWwgPSBzcWw7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXNxbC5lcXVh\nbHMoX2JhdGNoZWRTcWwpKSB7CiAgICAgICAgICAgICAgICAvLyBTUUwgc3Rh\ndGVtZW50cyBjaGFuZ2VkLgogICAgICAgICAgICAgICAgc3dpdGNoIChfYmF0\nY2hlZFJvd3Muc2l6ZSgpKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAg\nICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNl\nIDE6CiAgICAgICAgICAgICAgICAgICAgLy8gc2luZ2xlIGVudHJ5IGluIGNh\nY2hlLCBkaXJlY3QgU1FMIGV4ZWN1dGlvbi4gCiAgICAgICAgICAgICAgICAg\nICAgc3VwZXIuZmx1c2hBbmRVcGRhdGUoKFJvd0ltcGwpIF9iYXRjaGVkUm93\ncy5nZXQoMCkpOwogICAgICAgICAgICAgICAgICAgIF9iYXRjaGVkUm93cy5j\nbGVhcigpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAvLyBmbHVzaCBh\nbGwgZW50cmllcyBpbiBjYWNoZSBpbiBiYXRjaC4KICAgICAgICAgICAgICAg\nICAgICBmbHVzaEJhdGNoKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgICAgICBfYmF0Y2hlZFNxbCA9IHNxbDsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBfYmF0Y2hlZFJvd3MuYWRkKHJvdyk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qCiAgICAgKiBDb21wdXRlIGlmIGJhdGNoaW5nIGlzIGRpc2Fi\nbGVkLCBiYXNlZCBvbiB2YWx1ZXMgb2YgYmF0Y2ggbGltaXQKICAgICAqIGFu\nZCBkYXRhYmFzZSBjaGFyYWN0ZXJpc3RpY3MuCiAgICAgKi8KICAgIHByaXZh\ndGUgYm9vbGVhbiBpc0JhdGNoRGlzYWJsZWQoUm93SW1wbCByb3cpIHsKICAg\nICAgICBib29sZWFuIHJ0blZhbCA9IHRydWU7CiAgICAgICAgaWYgKF9iYXRj\naExpbWl0ICE9IDAgJiYgIV9kaXNhYmxlQmF0Y2gpIHsKICAgICAgICAgICAg\nU3RyaW5nIHNxbCA9IHJvdy5nZXRTUUwoX2RpY3QpOwogICAgICAgICAgICBP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtID0gcm93LmdldFByaW1hcnlLZXkoKTsK\nICAgICAgICAgICAgQ2xhc3NNYXBwaW5nIGNtZCA9IG51bGw7CiAgICAgICAg\nICAgIGlmIChzbSAhPSBudWxsKQogICAgICAgICAgICAgICAgY21kID0gKENs\nYXNzTWFwcGluZykgc20uZ2V0TWV0YURhdGEoKTsKICAgICAgICAgICAgQ29s\ndW1uW10gYXV0b0Fzc2lnbiA9IG51bGw7CiAgICAgICAgICAgIGlmIChyb3cu\nZ2V0QWN0aW9uKCkgPT0gUm93LkFDVElPTl9JTlNFUlQpCiAgICAgICAgICAg\nICAgICBhdXRvQXNzaWduID0gcm93LmdldFRhYmxlKCkuZ2V0QXV0b0Fzc2ln\nbmVkQ29sdW1ucygpOwogICAgICAgICAgICAvLyB2YWxpZGF0ZSBiYXRjaCBj\nYXBhYmlsaXR5CiAgICAgICAgICAgIF9kaXNhYmxlQmF0Y2ggPSBfZGljdAog\nICAgICAgICAgICAgICAgLnZhbGlkYXRlQmF0Y2hQcm9jZXNzKHJvdywgYXV0\nb0Fzc2lnbiwgc20sIGNtZCk7CiAgICAgICAgICAgIHJ0blZhbCA9IF9kaXNh\nYmxlQmF0Y2g7CiAgICAgICAgfQogICAgICAgIHJldHVybiBydG5WYWw7CiAg\nICB9CiAgICAKICAgIC8qKgogICAgICogZmx1c2ggYWxsIGNhY2hlZCB1cCBz\ndGF0ZW1lbnRzIHRvIGJlIGV4ZWN1dGVkIGFzIGEgc2luZ2xlIG9yIGJhdGNo\nZWQKICAgICAqIHByZXBhcmVkIHN0YXRlbWVudHMuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCB2b2lkIGZsdXNoQmF0Y2goKSB7CiAgICAgICAgaWYgKF9iYXRj\naGVkU3FsICE9IG51bGwgJiYgX2JhdGNoZWRSb3dzLnNpemUoKSA+IDApIHsK\nICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHMgPSBudWxsOwogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgUm93SW1wbCBvbmVyb3cg\nPSBudWxsOwogICAgICAgICAgICAgICAgcHMgPSBfY29ubi5wcmVwYXJlU3Rh\ndGVtZW50KF9iYXRjaGVkU3FsKTsKICAgICAgICAgICAgICAgIGlmIChfYmF0\nY2hlZFJvd3Muc2l6ZSgpID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAv\nLyBleGVjdXRlIGEgc2luZ2xlIHJvdy4KICAgICAgICAgICAgICAgICAgICBv\nbmVyb3cgPSAoUm93SW1wbCkgX2JhdGNoZWRSb3dzLmdldCgwKTsKICAgICAg\nICAgICAgICAgICAgICBmbHVzaFNpbmdsZVJvdyhvbmVyb3csIHBzKTsKICAg\nICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8g\nY2FjaGUgaGFzIG1vcmUgdGhhbiBvbmUgcm93cywgZXhlY3V0ZSBhcyBiYXRj\naC4KICAgICAgICAgICAgICAgICAgICBpbnQgY291bnQgPSAwOwogICAgICAg\nICAgICAgICAgICAgIGludCBiYXRjaGVkUm93c0Jhc2VJbmRleCA9IDA7CiAg\nICAgICAgICAgICAgICAgICAgSXRlcmF0b3IgaXRyID0gX2JhdGNoZWRSb3dz\nLml0ZXJhdG9yKCk7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGl0ci5o\nYXNOZXh0KCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb25lcm93ID0g\nKFJvd0ltcGwpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGlmIChfYmF0Y2hMaW1pdCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBmbHVzaFNpbmdsZVJvdyhvbmVyb3csIHBzKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGlmIChjb3VudCA8IF9iYXRjaExpbWl0IHx8IF9iYXRjaExpbWl0\nID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25l\ncm93LmZsdXNoKHBzLCBfZGljdCwgX3N0b3JlKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBwcy5hZGRCYXRjaCgpOwogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIC8vIHJlYWNoIHRoZSBiYXRjaExpbWl0LCBleGVjdXRlIHRoZSBi\nYXRjaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludFtdIHJ0\nbiA9IHBzLmV4ZWN1dGVCYXRjaCgpOwogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGNoZWNrVXBkYXRlQ291bnQocnRuLCBiYXRjaGVkUm93c0Jh\nc2VJbmRleCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJh\ndGNoZWRSb3dzQmFzZUluZGV4ICs9IF9iYXRjaExpbWl0OwoKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBvbmVyb3cuZmx1c2gocHMsIF9kaWN0\nLCBfc3RvcmUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBz\nLmFkZEJhdGNoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nLy8gcmVzZXQgdGhlIGNvdW50IHRvIDEgZm9yIG5ldyBiYXRjaAogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMTsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAv\nLyBlbmQgb2YgdGhlIGxvb3AsIGV4ZWN1dGUgdGhlIGJhdGNoCiAgICAgICAg\nICAgICAgICAgICAgaW50W10gcnRuID0gcHMuZXhlY3V0ZUJhdGNoKCk7CiAg\nICAgICAgICAgICAgICAgICAgY2hlY2tVcGRhdGVDb3VudChydG4sIGJhdGNo\nZWRSb3dzQmFzZUluZGV4KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAg\nICBTUUxFeGNlcHRpb24gc3FleCA9IHNlLmdldE5leHRFeGNlcHRpb24oKTsK\nICAgICAgICAgICAgICAgIGlmIChzcWV4ID09IG51bGwpCiAgICAgICAgICAg\nICAgICAgICAgc3FleCA9IHNlOwogICAgICAgICAgICAgICAgdGhyb3cgU1FM\nRXhjZXB0aW9ucy5nZXRTdG9yZShzcWV4LCBwcywgX2RpY3QpOwogICAgICAg\nICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgX2JhdGNoZWRTcWwg\nPSBudWxsOwogICAgICAgICAgICAgICAgX2JhdGNoZWRSb3dzLmNsZWFyKCk7\nCiAgICAgICAgICAgICAgICBpZiAocHMgIT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBzLmNs\nb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0\naW9uIHNxZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgU1FM\nRXhjZXB0aW9ucy5nZXRTdG9yZShzcWV4LCBwcywgX2RpY3QpOwogICAgICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgIH0KCiAgICAvKgogICAgICogRXhlY3V0ZSBhbiB1\ncGRhdGUgb2YgYSBzaW5nbGUgcm93LgogICAgICovCiAgICBwcml2YXRlIHZv\naWQgZmx1c2hTaW5nbGVSb3coUm93SW1wbCByb3csIFByZXBhcmVkU3RhdGVt\nZW50IHBzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJvdy5mbHVzaChwcywgX2RpY3QsIF9zdG9yZSk7CiAgICAgICAgaW50IGNv\ndW50ID0gcHMuZXhlY3V0ZVVwZGF0ZSgpOwogICAgICAgIGlmIChjb3VudCAh\nPSAxKSB7CiAgICAgICAgICAgIE9iamVjdCBmYWlsZWQgPSByb3cuZ2V0RmFp\nbGVkT2JqZWN0KCk7CiAgICAgICAgICAgIGlmIChmYWlsZWQgIT0gbnVsbCkK\nICAgICAgICAgICAgICAgIF9leGNlcHRpb25zLmFkZChuZXcgT3B0aW1pc3Rp\nY0V4Y2VwdGlvbihmYWlsZWQpKTsKICAgICAgICAgICAgZWxzZSBpZiAocm93\nLmdldEFjdGlvbigpID09IFJvdy5BQ1RJT05fSU5TRVJUKQogICAgICAgICAg\nICAgICAgdGhyb3cgbmV3IFNRTEV4Y2VwdGlvbihfbG9jLmdldCgidXBkYXRl\nLWZhaWxlZC1uby1mYWlsZWQtb2JqIiwKICAgICAgICAgICAgICAgICAgICBT\ndHJpbmcudmFsdWVPZihjb3VudCksIHJvdy5nZXRTUUwoX2RpY3QpKS5nZXRN\nZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKgogICAgICogUHJv\nY2VzcyBleGVjdXRlQmF0Y2ggZnVuY3Rpb24gYXJyYXkgb2YgcmV0dXJuIGNv\ndW50cy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGNoZWNrVXBkYXRlQ291\nbnQoaW50W10gY291bnQsIGludCBiYXRjaGVkUm93c0Jhc2VJbmRleCkKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpbnQgY250ID0g\nMDsKICAgICAgICBPYmplY3QgZmFpbGVkID0gbnVsbDsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGNvdW50Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIGNudCA9IGNvdW50W2ldOwogICAgICAgICAgICBSb3dJbXBsIHJvdyA9\nIChSb3dJbXBsKSBfYmF0Y2hlZFJvd3MuZ2V0KGJhdGNoZWRSb3dzQmFzZUlu\nZGV4ICsgaSk7CiAgICAgICAgICAgIHN3aXRjaCAoY250KSB7CiAgICAgICAg\nICAgIGNhc2UgU3RhdGVtZW50LkVYRUNVVEVfRkFJTEVEOiAvLyAtMwogICAg\nICAgICAgICAgICAgZmFpbGVkID0gcm93LmdldEZhaWxlZE9iamVjdCgpOwog\nICAgICAgICAgICAgICAgaWYgKGZhaWxlZCAhPSBudWxsIHx8IHJvdy5nZXRB\nY3Rpb24oKSA9PSBSb3cuQUNUSU9OX1VQREFURSkKICAgICAgICAgICAgICAg\nICAgICBfZXhjZXB0aW9ucy5hZGQobmV3IE9wdGltaXN0aWNFeGNlcHRpb24o\nZmFpbGVkKSk7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChyb3cuZ2V0QWN0\naW9uKCkgPT0gUm93LkFDVElPTl9JTlNFUlQpCiAgICAgICAgICAgICAgICAg\nICAgdGhyb3cgbmV3IFNRTEV4Y2VwdGlvbihfbG9jLmdldCgKICAgICAgICAg\nICAgICAgICAgICAgICAgInVwZGF0ZS1mYWlsZWQtbm8tZmFpbGVkLW9iaiIs\nCiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZy52YWx1ZU9mKGNvdW50\nW2ldKSwgX2JhdGNoZWRTcWwpLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBTdGF0ZW1lbnQuU1VDQ0VT\nU19OT19JTkZPOiAvLyAtMgogICAgICAgICAgICAgICAgaWYgKF9sb2cuaXNU\ncmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICBfbG9nLnRyYWNl\nKF9sb2MuZ2V0KCJiYXRjaF91cGRhdGVfaW5mbyIsCiAgICAgICAgICAgICAg\nICAgICAgICAgIFN0cmluZy52YWx1ZU9mKGNudCksIF9iYXRjaGVkU3FsKS5n\nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIGNhc2UgMDogLy8gbm8gcm93IGlzIGluc2VydGVkLCB0cmVhdHMgaXQg\nYXMgZmFpbGVkCiAgICAgICAgICAgICAgICAvLyBjYXNlCiAgICAgICAgICAg\nICAgICBmYWlsZWQgPSByb3cuZ2V0RmFpbGVkT2JqZWN0KCk7CiAgICAgICAg\nICAgICAgICBpZiAoKGZhaWxlZCAhPSBudWxsIHx8IHJvdy5nZXRBY3Rpb24o\nKSA9PSBSb3cuQUNUSU9OX0lOU0VSVCkpCiAgICAgICAgICAgICAgICAgICAg\ndGhyb3cgbmV3IFNRTEV4Y2VwdGlvbihfbG9jLmdldCgKICAgICAgICAgICAg\nICAgICAgICAgICAgInVwZGF0ZS1mYWlsZWQtbm8tZmFpbGVkLW9iaiIsCiAg\nICAgICAgICAgICAgICAgICAgICAgIFN0cmluZy52YWx1ZU9mKGNvdW50W2ld\nKSwgX2JhdGNoZWRTcWwpLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

