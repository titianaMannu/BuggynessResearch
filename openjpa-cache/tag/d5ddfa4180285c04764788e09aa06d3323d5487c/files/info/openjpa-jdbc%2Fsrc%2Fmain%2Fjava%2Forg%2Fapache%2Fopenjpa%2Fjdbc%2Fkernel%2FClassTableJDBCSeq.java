{"sha":"00533d390daebc9b8922f4573668c065633849ce","node_id":"MDQ6QmxvYjIwNjM2NDowMDUzM2QzOTBkYWViYzliODkyMmY0NTczNjY4YzA2NTYzMzg0OWNl","size":9420,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/00533d390daebc9b8922f4573668c065633849ce","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51\ndGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25m\naWd1cmF0aW9uSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5NYXBwaW5nUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLkNsYXNzQXJnUGFyc2Vy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXpl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5PcHRpb25z\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwoK\nLyoqCiAqIFNwZWNpYWxpemF0aW9uIG9mIHRoZSB7QGxpbmsgVGFibGVKREJD\nU2VxfSB0aGF0IG1haW50YWlucyBhCiAqIHNlcGFyYXRlIHNlcXVlbmNlIGNv\ndW50IHBlci1jbGFzcy4gVGFibGUgbmFtZSBkZWZhdWx0cyB0bwogKiA8Y29k\nZT5PUEVOSlBBX1NFUVVFTkNFU19UQUJMRTwvY29kZT4uCiAqCiAqIEBhdXRo\nb3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgQ2xhc3NUYWJsZUpEQkNT\nZXEgCiAgICBleHRlbmRzIFRhYmxlSkRCQ1NlcSB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZQogICAgICAgIChDbGFzc1RhYmxlSkRCQ1NlcS5jbGFzcyk7CgogICAg\ncHJpdmF0ZSBmaW5hbCBNYXAgX3N0YXRzID0gbmV3IEhhc2hNYXAoKTsKICAg\nIHByaXZhdGUgYm9vbGVhbiBfaWdub3JlID0gZmFsc2U7CiAgICBwcml2YXRl\nIGJvb2xlYW4gX2FsaWFzZXMgPSBmYWxzZTsKCiAgICBwdWJsaWMgQ2xhc3NU\nYWJsZUpEQkNTZXEoKSB7CiAgICAgICAgc2V0VGFibGUoIk9QRU5KUEFfU0VR\nVUVOQ0VTX1RBQkxFIik7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVy\nIHVubWFwcGVkIGNsYXNzZXMgc2hvdWxkIGJlIGlnbm9yZWQgYXMgcG9zc2li\nbGUgcHJpbWFyeQogICAgICoga2V5IHZhbHVlcyBpbiB0aGUgdGFibGUuIERl\nZmF1bHRzIHRvIGZhbHNlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBn\nZXRJZ25vcmVVbm1hcHBlZCgpIHsKICAgICAgICByZXR1cm4gX2lnbm9yZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdW5tYXBwZWQgY2xhc3Nl\ncyBzaG91bGQgYmUgaWdub3JlZCBhcyBwb3NzaWJsZSBwcmltYXJ5CiAgICAg\nKiBrZXkgdmFsdWVzIGluIHRoZSB0YWJsZS4gRGVmYXVsdHMgdG8gZmFsc2Uu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldElnbm9yZVVubWFwcGVkKGJv\nb2xlYW4gaWdub3JlKSB7CiAgICAgICAgX2lnbm9yZSA9IGlnbm9yZTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgI3Nl\ndElnbm9yZVVubWFwcGVkfS4gUmV0YWluZWQgZm9yCiAgICAgKiBiYWNrd2Fy\nZHMtY29tcGF0aWJpbGl0eSBmb3IgYXV0by1jb25maWd1cmF0aW9uLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXRJZ25vcmVWaXJ0dWFsKGJvb2xlYW4g\naWdub3JlKSB7CiAgICAgICAgc2V0SWdub3JlVW5tYXBwZWQoaWdub3JlKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gdXNlIHR5cGUgYWxp\nc2VzIGZvciBwcmltYXJ5IGtleSB2YWx1ZXMgaW4gcGxhY2Ugb2YgY2xhc3MK\nICAgICAqIG5hbWVzLiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gZ2V0VXNlQWxpYXNlcygpIHsKICAgICAgICByZXR1\ncm4gX2FsaWFzZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRv\nIHVzZSB0eXBlIGFsaXNlcyBmb3IgcHJpbWFyeSBrZXkgdmFsdWVzIGluIHBs\nYWNlIG9mIGNsYXNzCiAgICAgKiBuYW1lcy4gRGVmYXVsdHMgdG8gZmFsc2Uu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFVzZUFsaWFzZXMoYm9vbGVh\nbiBhbGlhc2VzKSB7CiAgICAgICAgX2FsaWFzZXMgPSBhbGlhc2VzOwogICAg\nfQoKICAgIHByb3RlY3RlZCBzeW5jaHJvbml6ZWQgU3RhdHVzIGdldFN0YXR1\ncyhDbGFzc01hcHBpbmcgbWFwcGluZykgewogICAgICAgIGlmIChtYXBwaW5n\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIFN0\ncmluZyBrZXkgPSBnZXRLZXkobWFwcGluZywgZmFsc2UpOwogICAgICAgIFN0\nYXR1cyBzdGF0ID0gKFN0YXR1cykgX3N0YXRzLmdldChrZXkpOwogICAgICAg\nIGlmIChzdGF0ID09IG51bGwpIHsKICAgICAgICAgICAgc3RhdCA9IG5ldyBT\ndGF0dXMoKTsKICAgICAgICAgICAgX3N0YXRzLnB1dChrZXksIHN0YXQpOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gc3RhdDsKICAgIH0KCiAgICBwcm90\nZWN0ZWQgQ29sdW1uIGFkZFByaW1hcnlLZXlDb2x1bW4oVGFibGUgdGFibGUp\nIHsKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9IGdldENvbmZpZ3VyYXRp\nb24oKS5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpOwogICAgICAgIENvbHVt\nbiBwa0NvbHVtbiA9IHRhYmxlLmFkZENvbHVtbihkaWN0LmdldFZhbGlkQ29s\ndW1uTmFtZSgKICAgICAgICAgICAgZ2V0UHJpbWFyeUtleUNvbHVtbigpLCB0\nYWJsZSkpOwogICAgICAgIHBrQ29sdW1uLnNldFR5cGUoZGljdC5nZXRQcmVm\nZXJyZWRUeXBlKFR5cGVzLlZBUkNIQVIpKTsKICAgICAgICBwa0NvbHVtbi5z\nZXRKYXZhVHlwZShKYXZhVHlwZXMuU1RSSU5HKTsKICAgICAgICBwa0NvbHVt\nbi5zZXRTaXplKGRpY3QuY2hhcmFjdGVyQ29sdW1uU2l6ZSk7CiAgICAgICAg\ncmV0dXJuIHBrQ29sdW1uOwogICAgfQoKICAgIHByb3RlY3RlZCBPYmplY3Qg\nZ2V0UHJpbWFyeUtleShDbGFzc01hcHBpbmcgbWFwcGluZykgewogICAgICAg\nIGlmIChtYXBwaW5nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIHJldHVybiBnZXRLZXkobWFwcGluZywgdHJ1ZSk7CiAgICB9\nCgogICAgcHJpdmF0ZSBTdHJpbmcgZ2V0S2V5KENsYXNzTWFwcGluZyBtYXBw\naW5nLCBib29sZWFuIGRiKSB7CiAgICAgICAgaWYgKF9pZ25vcmUpIHsKICAg\nICAgICAgICAgd2hpbGUgKG1hcHBpbmcuZ2V0TWFwcGVkUENTdXBlcmNsYXNz\nTWFwcGluZygpICE9IG51bGwpCiAgICAgICAgICAgICAgICBtYXBwaW5nID0g\nbWFwcGluZy5nZXRNYXBwZWRQQ1N1cGVyY2xhc3NNYXBwaW5nKCk7CiAgICAg\nICAgfSBlbHNlIHsKICAgICAgICAgICAgd2hpbGUgKG1hcHBpbmcuZ2V0UENT\ndXBlcmNsYXNzKCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIG1hcHBpbmcg\nPSBtYXBwaW5nLmdldFBDU3VwZXJjbGFzc01hcHBpbmcoKTsKICAgICAgICB9\nCiAgICAgICAgaWYgKF9hbGlhc2VzKQogICAgICAgICAgICByZXR1cm4gbWFw\ncGluZy5nZXRUeXBlQWxpYXMoKTsKICAgICAgICByZXR1cm4gbWFwcGluZy5n\nZXREZXNjcmliZWRUeXBlKCkuZ2V0TmFtZSgpOwogICAgfQoKICAgIC8vLy8v\nLy8vLwogICAgLy8gTWFpbgogICAgLy8vLy8vLy8vCgogICAgLyoqCiAgICAg\nKiBVc2FnZTogamF2YSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwu\nQ2xhc3NUYWJsZUpEQkNTZXEgW29wdGlvbl0qCiAgICAgKiAtYWN0aW9uLy1h\nICZsdDthZGQgfCBkcm9wIHwgZ2V0IHwgc2V0Jmd0OwogICAgICogW2NsYXNz\nIG5hbWUgfCAuamF2YSBmaWxlIHwgLmNsYXNzIGZpbGUgfCAuamRvIGZpbGVd\nIFt2YWx1ZV0KICAgICAqICBXaGVyZSB0aGUgZm9sbG93aW5nIG9wdGlvbnMg\nYXJlIHJlY29nbml6ZWQuCiAgICAgKiA8dWw+CiAgICAgKiA8bGk+PGk+LXBy\nb3BlcnRpZXMvLXAgJmx0O3Byb3BlcnRpZXMgZmlsZSBvciByZXNvdXJjZSZn\ndDs8L2k+OiBUaGUKICAgICAqIHBhdGggb3IgcmVzb3VyY2UgbmFtZSBvZiBh\nIE9wZW5KUEEgcHJvcGVydGllcyBmaWxlIGNvbnRhaW5pbmcKICAgICAqIGlu\nZm9ybWF0aW9uIHN1Y2ggYXMgY29ubmVjdGlvbiBkYXRhIGFzCiAgICAgKiBv\ndXRsaW5lZCBpbiB7QGxpbmsgSkRCQ0NvbmZpZ3VyYXRpb259LiBPcHRpb25h\nbC48L2xpPgogICAgICogPGxpPjxpPi0mbHQ7cHJvcGVydHkgbmFtZSZndDsg\nJmx0O3Byb3BlcnR5IHZhbHVlJmd0OzwvaT46IEFsbCBiZWFuCiAgICAgKiBw\ncm9wZXJ0aWVzIG9mIHRoZSBPcGVuSlBBIHtAbGluayBKREJDQ29uZmlndXJh\ndGlvbn0gY2FuIGJlIHNldCBieQogICAgICogdXNpbmcgdGhlaXIJbmFtZXMg\nYW5kIHN1cHBseWluZyBhIHZhbHVlLjwvbGk+CiAgICAgKiA8L3VsPgogICAg\nICogIFRoZSB2YXJpb3VzIGFjdGlvbnMgYXJlIGFzIGZvbGxvd3MuCiAgICAg\nKiA8dWw+CiAgICAgKiA8bGk+PGk+YWRkPC9pPjogQ3JlYXRlIHRoZSBzZXF1\nZW5jZSB0YWJsZS48L2xpPgogICAgICogPGxpPjxpPmRyb3A8L2k+OiBEcm9w\nIHRoZSBzZXF1ZW5jZSB0YWJsZS48L2xpPgogICAgICogPGxpPjxpPmdldDwv\naT46IFByaW50IHRoZSBjdXJyZW50IHNlcXVlbmNlIHZhbHVlIGZvciB0aGUg\nZ2l2ZW4KICAgICAqIGNsYXNzLjwvbGk+CiAgICAgKiA8bGk+PGk+c2V0PC9p\nPjogU2V0IHRoZSBzZXF1ZW5jZSB2YWx1ZSBmb3IgdGhlIGdpdmVuIGNsYXNz\nLjwvbGk+CiAgICAgKiA8L3VsPgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBPcHRpb25zIG9wdHMgPSBuZXcgT3B0aW9ucygpOwogICAgICAg\nIGZpbmFsIFN0cmluZ1tdIGFyZ3VtZW50cyA9IG9wdHMuc2V0RnJvbUNtZExp\nbmUoYXJncyk7CiAgICAgICAgYm9vbGVhbiByZXQgPSBDb25maWd1cmF0aW9u\ncy5ydW5BZ2FpbnN0QWxsQW5jaG9ycyhvcHRzLAogICAgICAgICAgICBuZXcg\nQ29uZmlndXJhdGlvbnMuUnVubmFibGUoKSB7CiAgICAgICAgICAgIHB1Ymxp\nYyBib29sZWFuIHJ1bihPcHRpb25zIG9wdHMpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgICAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IG5l\ndyBKREJDQ29uZmlndXJhdGlvbkltcGwoKTsKICAgICAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENsYXNzVGFibGVKREJD\nU2VxLnJ1bihjb25mLCBhcmd1bWVudHMsIG9wdHMpOwogICAgICAgICAgICAg\nICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICBjb25mLmNsb3Nl\nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9\nKTsKICAgICAgICBpZiAoIXJldCkKICAgICAgICAgICAgU3lzdGVtLm91dC5w\ncmludGxuKF9sb2MuZ2V0KCJjbHN0YWJsZS1zZXEtdXNhZ2UiKSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSdW4gdGhlIHRvb2wuIFJldHVybnMgZmFsc2Ug\naWYgaW52YWxpZCBvcHRpb25zIHdlcmUgZ2l2ZW4uCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgYm9vbGVhbiBydW4oSkRCQ0NvbmZpZ3VyYXRpb24gY29u\nZiwgU3RyaW5nW10gYXJncywKICAgICAgICBPcHRpb25zIG9wdHMpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIFN0cmluZyBhY3Rpb24gPSBvcHRzLnJl\nbW92ZVByb3BlcnR5KCJhY3Rpb24iLCAiYSIsIG51bGwpOwogICAgICAgIENv\nbmZpZ3VyYXRpb25zLnBvcHVsYXRlQ29uZmlndXJhdGlvbihjb25mLCBvcHRz\nKTsKICAgICAgICByZXR1cm4gcnVuKGNvbmYsIGFyZ3MsIGFjdGlvbiwgbnVs\nbCwgbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSdW4gdGhlIHRvb2wu\nIFJldHVybiBmYWxzZSBpZiBhbiBpbnZhbGlkIG9wdGlvbiB3YXMgZ2l2ZW4u\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBydW4oSkRCQ0Nv\nbmZpZ3VyYXRpb24gY29uZiwgU3RyaW5nW10gYXJncywKICAgICAgICBTdHJp\nbmcgYWN0aW9uLCBNYXBwaW5nUmVwb3NpdG9yeSByZXBvcywgQ2xhc3NMb2Fk\nZXIgbG9hZGVyKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAg\nIENsYXNzVGFibGVKREJDU2VxIHNlcSA9IG5ldyBDbGFzc1RhYmxlSkRCQ1Nl\ncSgpOwogICAgICAgIFN0cmluZyBwcm9wcyA9IENvbmZpZ3VyYXRpb25zLmdl\ndFByb3BlcnRpZXMoY29uZi5nZXRTZXF1ZW5jZSgpKTsKICAgICAgICBDb25m\naWd1cmF0aW9ucy5jb25maWd1cmVJbnN0YW5jZShzZXEsIGNvbmYsIHByb3Bz\nKTsKCiAgICAgICAgaWYgKEFDVElPTl9EUk9QLmVxdWFscyhhY3Rpb24pKSB7\nCiAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCAhPSAwKQogICAgICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICBzZXEuZHJvcFRhYmxl\nKCk7CiAgICAgICAgfSBlbHNlIGlmIChBQ1RJT05fQURELmVxdWFscyhhY3Rp\nb24pKSB7CiAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCAhPSAwKQogICAg\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICBzZXEucmVm\ncmVzaFRhYmxlKCk7CiAgICAgICAgfSBlbHNlIGlmIChBQ1RJT05fR0VULmVx\ndWFscyhhY3Rpb24pIHx8IEFDVElPTl9TRVQuZXF1YWxzKGFjdGlvbikpIHsK\nICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09IDApCiAgICAgICAgICAg\nICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICBpZiAobG9hZGVyID09\nIG51bGwpCiAgICAgICAgICAgICAgICBsb2FkZXIgPSBjb25mLmdldENsYXNz\nUmVzb2x2ZXJJbnN0YW5jZSgpLmdldENsYXNzTG9hZGVyKAogICAgICAgICAg\nICAgICAgICAgIENsYXNzVGFibGVKREJDU2VxLmNsYXNzLCBudWxsKTsKCiAg\nICAgICAgICAgIENsYXNzQXJnUGFyc2VyIGNhcCA9IGNvbmYuZ2V0TWV0YURh\ndGFSZXBvc2l0b3J5SW5zdGFuY2UoKQogICAgICAgICAgICAgICAgLmdldE1l\ndGFEYXRhRmFjdG9yeSgpLm5ld0NsYXNzQXJnUGFyc2VyKCk7CiAgICAgICAg\nICAgIGNhcC5zZXRDbGFzc0xvYWRlcihsb2FkZXIpOwogICAgICAgICAgICBD\nbGFzcyBjbHMgPSBjYXAucGFyc2VUeXBlcyhhcmdzWzBdKVswXTsKCiAgICAg\nICAgICAgIGlmIChyZXBvcyA9PSBudWxsKQogICAgICAgICAgICAgICAgcmVw\nb3MgPSBjb25mLmdldE1hcHBpbmdSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAg\nICAgICAgICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcgPSByZXBvcy5nZXRNYXBw\naW5nKGNscywgbnVsbCwgdHJ1ZSk7CgogICAgICAgICAgICBDb25uZWN0aW9u\nIGNvbm4gPSBjb25mLmdldERhdGFTb3VyY2UyKG51bGwpLmdldENvbm5lY3Rp\nb24oKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxvbmcg\nY3VyID0gc2VxLmdldFNlcXVlbmNlKG1hcHBpbmcsIGNvbm4pOwogICAgICAg\nICAgICAgICAgaWYgKEFDVElPTl9HRVQuZXF1YWxzKGFjdGlvbikpCiAgICAg\nICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKG1hcHBpbmcgKyAi\nOiAiICsgY3VyKTsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAg\nICAgICAgICAgIGxvbmcgc2V0OwogICAgICAgICAgICAgICAgICAgIGlmIChh\ncmdzLmxlbmd0aCA+IDEpCiAgICAgICAgICAgICAgICAgICAgICAgIHNldCA9\nIExvbmcucGFyc2VMb25nKGFyZ3NbMV0pOwogICAgICAgICAgICAgICAgICAg\nIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgc2V0ID0gY3VyICsgc2Vx\nLmdldEFsbG9jYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNldCA8\nIGN1cikKICAgICAgICAgICAgICAgICAgICAgICAgc2V0ID0gY3VyOwogICAg\nICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAg\nICBTdGF0dXMgc3RhdCA9IHNlcS5nZXRTdGF0dXMobWFwcGluZyk7CiAgICAg\nICAgICAgICAgICAgICAgICAgIHNlcS5zZXRTZXF1ZW5jZShudWxsLCBzdGF0\nLCAoaW50KSAoc2V0IC0gY3VyKSwgdHJ1ZSwKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGNvbm4pOwogICAgICAgICAgICAgICAgICAgICAgICBzZXQg\nPSBzdGF0LnNlcTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKG1hcHBpbmcgKyAiOiAiICsg\nc2V0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAo\nTnVtYmVyRm9ybWF0RXhjZXB0aW9uIG5mZSkgewogICAgICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25uLmNsb3Nl\nKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2Up\nIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0g\nZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICB9Cn0K\n","encoding":"base64"}

