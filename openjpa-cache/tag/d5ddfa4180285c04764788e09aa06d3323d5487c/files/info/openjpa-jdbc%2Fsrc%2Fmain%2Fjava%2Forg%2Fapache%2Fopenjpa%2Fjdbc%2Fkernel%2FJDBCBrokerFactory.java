{"sha":"54586274be79664e3cf2242abf2cb8271db12611","node_id":"MDQ6QmxvYjIwNjM2NDo1NDU4NjI3NGJlNzk2NjRlM2NmMjI0MmFiZjJjYjgyNzFkYjEyNjEx","size":5541,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/54586274be79664e3cf2242abf2cb8271db12611","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0\naW9uOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51\ndGlsLlByb3BlcnRpZXM7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0\nIG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0Nv\nbmZpZ3VyYXRpb25JbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMubWV0YS5NYXBwaW5nUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuTWFwcGluZ1Rvb2w7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkFic3RyYWN0QnJva2VyRmFjdG9yeTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQm9vdHN0cmFwOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXJJbXBsOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZU1hbmFnZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlv\nblByb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25m\nLkNvbmZpZ3VyYXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLlVzZXJFeGNlcHRpb247CgovKioKICogQnJva2VyRmFjdG9yeSB0eXBl\nIGZvciB1c2Ugd2l0aCB0aGUgSkRCQyBydW50aW1lLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKiBAYXV0aG9yIE1hcmMgUHJ1ZCdob21tZWF1eAogKi8K\ncHVibGljIGNsYXNzIEpEQkNCcm9rZXJGYWN0b3J5CiAgICBleHRlbmRzIEFi\nc3RyYWN0QnJva2VyRmFjdG9yeSB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmlu\nYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAg\nICAgIChKREJDQnJva2VyRmFjdG9yeS5jbGFzcyk7CgogICAgcHJpdmF0ZSBi\nb29sZWFuIF9zeW5jaHJvbml6ZWRNYXBwaW5ncyA9IGZhbHNlOwoKICAgIC8q\nKgogICAgICogRmFjdG9yeSBtZXRob2QgZm9yIGNvbnN0cnVjdGluZyBhIGZh\nY3RvcnkgZnJvbSBwcm9wZXJ0aWVzLiBJbnZva2VkIGZyb20KICAgICAqIHtA\nbGluayBCb290c3RyYXAjbmV3QnJva2VyRmFjdG9yeX0uCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgSkRCQ0Jyb2tlckZhY3RvcnkgbmV3SW5zdGFuY2Uo\nQ29uZmlndXJhdGlvblByb3ZpZGVyIGNwKSB7CiAgICAgICAgSkRCQ0NvbmZp\nZ3VyYXRpb25JbXBsIGNvbmYgPSBuZXcgSkRCQ0NvbmZpZ3VyYXRpb25JbXBs\nKCk7CiAgICAgICAgY3Auc2V0SW50byhjb25mKTsKICAgICAgICByZXR1cm4g\nbmV3IEpEQkNCcm9rZXJGYWN0b3J5KGNvbmYpOwogICAgfQoKICAgIC8qKgog\nICAgICogRmFjdG9yeSBtZXRob2QgZm9yIG9idGFpbmluZyBhIHBvc3NpYmx5\nLXBvb2xlZCBmYWN0b3J5IGZyb20gcHJvcGVydGllcy4KICAgICAqIEludm9r\nZWQgZnJvbSB7QGxpbmsgQm9vdHN0cmFwI2dldEJyb2tlckZhY3Rvcnl9Lgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIEpEQkNCcm9rZXJGYWN0b3J5IGdl\ndEluc3RhbmNlKENvbmZpZ3VyYXRpb25Qcm92aWRlciBjcCkgewogICAgICAg\nIE1hcCBwcm9wcyA9IGNwLmdldFByb3BlcnRpZXMoKTsKICAgICAgICBPYmpl\nY3Qga2V5ID0gdG9Qb29sS2V5KHByb3BzKTsKICAgICAgICBKREJDQnJva2Vy\nRmFjdG9yeSBmYWN0b3J5ID0gKEpEQkNCcm9rZXJGYWN0b3J5KQogICAgICAg\nICAgICBnZXRQb29sZWRGYWN0b3J5Rm9yS2V5KGtleSk7CiAgICAgICAgaWYg\nKGZhY3RvcnkgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7\nCgogICAgICAgIGZhY3RvcnkgPSBuZXdJbnN0YW5jZShjcCk7CiAgICAgICAg\ncG9vbChrZXksIGZhY3RvcnkpOwogICAgICAgIHJldHVybiBmYWN0b3J5Owog\nICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0IHRoZSBmYWN0b3J5IHdp\ndGggdGhlIGdpdmVuIG9wdGlvbiBzZXR0aW5nczsgaG93ZXZlciwgdGhlCiAg\nICAgKiBmYWN0b3J5IGNvbnN0cnVjdGlvbiBtZXRob2RzIGFyZSByZWNvbW1l\nbmRlZC4KICAgICAqLwogICAgcHVibGljIEpEQkNCcm9rZXJGYWN0b3J5KEpE\nQkNDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICBzdXBlcihjb25mKTsK\nICAgIH0KCiAgICBwdWJsaWMgUHJvcGVydGllcyBnZXRQcm9wZXJ0aWVzKCkg\newogICAgICAgIC8vIGFkZCBwbGF0Zm9ybSBwcm9wZXJ0eQogICAgICAgIFBy\nb3BlcnRpZXMgcHJvcHMgPSBzdXBlci5nZXRQcm9wZXJ0aWVzKCk7CiAgICAg\nICAgU3RyaW5nIGRiID0gIlVua25vd24iOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3Vy\nYXRpb24pIGdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAgZGIgPSBj\nb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCkucGxhdGZvcm07CiAgICAg\nICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgIH0K\nICAgICAgICBwcm9wcy5zZXRQcm9wZXJ0eSgiUGxhdGZvcm0iLAogICAgICAg\nICAgICAiT3BlbkpQQSBKREJDIEVkaXRpb246ICIgKyBkYiArICIgRGF0YWJh\nc2UiKTsKCiAgICAgICAgcmV0dXJuIHByb3BzOwogICAgfQoKICAgIHByb3Rl\nY3RlZCBTdG9yZU1hbmFnZXIgbmV3U3RvcmVNYW5hZ2VyKCkgewogICAgICAg\nIHJldHVybiBuZXcgSkRCQ1N0b3JlTWFuYWdlcigpOwogICAgfQoKICAgIHBy\nb3RlY3RlZCBCcm9rZXJJbXBsIG5ld0Jyb2tlckltcGwoU3RyaW5nIHVzZXIs\nIFN0cmluZyBwYXNzKSB7CiAgICAgICAgQnJva2VySW1wbCBicm9rZXIgPSBz\ndXBlci5uZXdCcm9rZXJJbXBsKHVzZXIsIHBhc3MpOwoKICAgICAgICBsb2Nr\nKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gc3luY2hyb25pemUg\nbWFwcGluZ3M7IHdlIHdhaXQgdW50aWwgbm93IHRvIGRvIHRoaXMgc28gdGhh\ndAogICAgICAgICAgICAvLyB3ZSBjYW4gdXNlIHRoZSBmaXJzdCBicm9rZXIg\ndXNlci9wYXNzIGZvciBjb25uZWN0aW9uIGlmIG5vCiAgICAgICAgICAgIC8v\nIGdsb2JhbCBsb2dpbiBpcyBnaXZlbgogICAgICAgICAgICBpZiAoIV9zeW5j\naHJvbml6ZWRNYXBwaW5ncykgewogICAgICAgICAgICAgICAgX3N5bmNocm9u\naXplZE1hcHBpbmdzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHN5bmNocm9u\naXplTWFwcGluZ3MoYnJva2VyLmdldENsYXNzTG9hZGVyKCkpOwogICAgICAg\nICAgICB9CgogICAgICAgICAgICByZXR1cm4gYnJva2VyOwogICAgICAgIH0g\nZmluYWxseSB7CiAgICAgICAgICAgIHVubG9jaygpOwogICAgICAgIH0KICAg\nIH0KCiAgICAvKioKICAgICAqIFN5bmNocm9uaXplIHRoZSBtYXBwaW5ncyBv\nZiB0aGUgY2xhc3NlcyBsaXN0ZWQgaW4gdGhlIGNvbmZpZ3VyYXRpb24uCiAg\nICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHN5bmNocm9uaXplTWFwcGluZ3Mo\nQ2xhc3NMb2FkZXIgbG9hZGVyKSB7CiAgICAgICAgSkRCQ0NvbmZpZ3VyYXRp\nb24gY29uZiA9IChKREJDQ29uZmlndXJhdGlvbikgZ2V0Q29uZmlndXJhdGlv\nbigpOwogICAgICAgIFN0cmluZyBhY3Rpb24gPSBjb25mLmdldFN5bmNocm9u\naXplTWFwcGluZ3MoKTsKICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0\neShhY3Rpb24pKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIE1hcHBp\nbmdSZXBvc2l0b3J5IHJlcG8gPSBjb25mLmdldE1hcHBpbmdSZXBvc2l0b3J5\nSW5zdGFuY2UoKTsKICAgICAgICBDb2xsZWN0aW9uIGNsYXNzZXMgPSByZXBv\nLmxvYWRQZXJzaXN0ZW50VHlwZXMoZmFsc2UsIGxvYWRlcik7CiAgICAgICAg\naWYgKGNsYXNzZXMuaXNFbXB0eSgpKQogICAgICAgICAgICByZXR1cm47Cgog\nICAgICAgIFN0cmluZyBwcm9wcyA9IENvbmZpZ3VyYXRpb25zLmdldFByb3Bl\ncnRpZXMoYWN0aW9uKTsKICAgICAgICBhY3Rpb24gPSBDb25maWd1cmF0aW9u\ncy5nZXRDbGFzc05hbWUoYWN0aW9uKTsKICAgICAgICBNYXBwaW5nVG9vbCB0\nb29sID0gbmV3IE1hcHBpbmdUb29sKGNvbmYsIGFjdGlvbiwgZmFsc2UpOwog\nICAgICAgIENvbmZpZ3VyYXRpb25zLmNvbmZpZ3VyZUluc3RhbmNlKHRvb2ws\nIGNvbmYsIHByb3BzLAogICAgICAgICAgICAiU3luY2hyb25pemVNYXBwaW5n\ncyIpOwoKICAgICAgICAvLyBpbml0aWFsaXplIHRoZSBzY2hlbWEKICAgICAg\nICBDbGFzcyBjbHM7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBjbGFz\nc2VzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAg\nIGNscyA9IChDbGFzcykgaXRyLm5leHQoKTsKICAgICAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgICAgIHRvb2wucnVuKGNscyk7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpYWUpIHsKICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJi\nYWQtc3luY2gtbWFwcGluZ3MiLAogICAgICAgICAgICAgICAgICAgIGFjdGlv\nbiwgQXJyYXlzLmFzTGlzdChNYXBwaW5nVG9vbC5BQ1RJT05TKSkpOwogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRvb2wucmVjb3JkKCk7CiAg\nICB9Cn0K\n","encoding":"base64"}

