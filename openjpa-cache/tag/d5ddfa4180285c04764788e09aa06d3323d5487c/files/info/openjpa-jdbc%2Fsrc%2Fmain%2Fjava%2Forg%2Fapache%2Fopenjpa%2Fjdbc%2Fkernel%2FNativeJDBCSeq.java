{"sha":"cf0621618fc44dd29b79c50e3a0ac937426224ad","node_id":"MDQ6QmxvYjIwNjM2NDpjZjA2MjE2MThmYzQ0ZGQyOWI3OWM1MGUzYTBhYzkzNzQyNjIyNGFk","size":11676,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/cf0621618fc44dd29b79c50e3a0ac937426224ad","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlByZXBh\ncmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0OwppbXBv\ncnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS50ZXh0Lk1l\nc3NhZ2VGb3JtYXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYu\nT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbkltcGw7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFw\ncGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5T\nY2hlbWE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEu\nU2NoZW1hR3JvdXA7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\nY2hlbWEuU2NoZW1hVG9vbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5TY2hlbWFzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc2NoZW1hLlNlcXVlbmNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuY29uZi5Db25maWd1cmFibGU7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuT3B0aW9uczsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLk1ldGFEYXRhRXhjZXB0aW9uOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuVXNlckV4Y2VwdGlvbjsKaW1w\nb3J0IHNlcnAudXRpbC5OdW1iZXJzOwppbXBvcnQgc2VycC51dGlsLlN0cmlu\nZ3M7CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBOT1RFOiBEbyBub3QgY2hhbmdlIHBy\nb3BlcnR5IG5hbWVzOyBzZWUgU2VxdWVuY2VNZXRhRGF0YQovLyBhbmQgU2Vx\ndWVuY2VNYXBwaW5nIGZvciBzdGFuZGFyZCBwcm9wZXJ0eSBuYW1lcy4KLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vCgovKioKICoge0BsaW5rIEpEQkNTZXF9IGltcGxlbWVu\ndGF0aW9uIHRoYXQgdXNlcyBhIGRhdGFiYXNlIHNlcXVlbmNlcwogKiB0byBn\nZW5lcmF0ZSBudW1iZXJzLgogKgogKiBAc2VlIEpEQkNTZXEKICogQHNlZSBB\nYnN0cmFjdEpEQkNTZXEKICovCnB1YmxpYyBjbGFzcyBOYXRpdmVKREJDU2Vx\nCiAgICBleHRlbmRzIEFic3RyYWN0SkRCQ1NlcQogICAgaW1wbGVtZW50cyBD\nb25maWd1cmFibGUgewoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5n\nIEFDVElPTl9EUk9QID0gImRyb3AiOwogICAgcHVibGljIHN0YXRpYyBmaW5h\nbCBTdHJpbmcgQUNUSU9OX0FERCA9ICJhZGQiOwogICAgcHVibGljIHN0YXRp\nYyBmaW5hbCBTdHJpbmcgQUNUSU9OX0dFVCA9ICJnZXQiOwoKICAgIHByaXZh\ndGUgc3RhdGljIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2th\nZ2UoTmF0aXZlSkRCQ1NlcS5jbGFzcyk7CgogICAgcHJpdmF0ZSBKREJDQ29u\nZmlndXJhdGlvbiBfY29uZiA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBf\nc2VxTmFtZSA9ICJPUEVOSlBBX1NFUVVFTkNFIjsKICAgIHByaXZhdGUgaW50\nIF9pbmNyZW1lbnQgPSAxOwogICAgcHJpdmF0ZSBpbnQgX2luaXRpYWwgPSAx\nOwogICAgcHJpdmF0ZSBpbnQgX2FsbG9jYXRlID0gMDsKICAgIHByaXZhdGUg\nU2VxdWVuY2UgX3NlcSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfc2Vs\nZWN0ID0gbnVsbDsKCiAgICAvLyBmb3IgZGVwcmVjYXRlZCBhdXRvLWNvbmZp\nZ3VyYXRpb24gc3VwcG9ydAogICAgcHJpdmF0ZSBTdHJpbmcgX2Zvcm1hdCA9\nIG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfdGFibGVOYW1lID0gIkRVQUwi\nOwogICAgcHJpdmF0ZSBib29sZWFuIF9zdWJUYWJsZSA9IGZhbHNlOwoKICAg\nIC8qKgogICAgICogVGhlIHNlcXVlbmNlIG5hbWUuIERlZmF1bHRzIHRvIDxj\nb2RlPk9QRU5KUEFfU0VRVUVOQ0U8L2NvZGU+LgogICAgICovCiAgICBwdWJs\naWMgU3RyaW5nIGdldFNlcXVlbmNlKCkgewogICAgICAgIHJldHVybiBfc2Vx\nTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBzZXF1ZW5jZSBuYW1l\nLiBEZWZhdWx0cyB0byA8Y29kZT5PUEVOSlBBX1NFUVVFTkNFPC9jb2RlPi4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0U2VxdWVuY2UoU3RyaW5nIHNl\ncU5hbWUpIHsKICAgICAgICBfc2VxTmFtZSA9IHNlcU5hbWU7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rICNzZXRTZXF1\nZW5jZX0uIFJldGFpbmVkIGZvcgogICAgICogYmFja3dhcmRzLWNvbXBhdGli\naWxpdHkgZm9yIGF1dG8tY29uZmlndXJhdGlvbi4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0U2VxdWVuY2VOYW1lKFN0cmluZyBzZXFOYW1lKSB7CiAg\nICAgICAgc2V0U2VxdWVuY2Uoc2VxTmFtZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBAc2VlIFNlcXVlbmNlI2dldEluaXRpYWxWYWx1ZQogICAgICovCiAg\nICBwdWJsaWMgaW50IGdldEluaXRpYWxWYWx1ZSgpIHsKICAgICAgICByZXR1\ncm4gX2luaXRpYWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBAc2VlIFNlcXVl\nbmNlI3NldEluaXRpYWxWYWx1ZQogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXRJbml0aWFsVmFsdWUoaW50IGluaXRpYWwpIHsKICAgICAgICBfaW5pdGlh\nbCA9IGluaXRpYWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBAc2VlIFNlcXVl\nbmNlI2dldEFsbG9jYXRlCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0QWxs\nb2NhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9hbGxvY2F0ZTsKICAgIH0KCiAg\nICAvKioKICAgICAqIEBzZWUgU2VxdWVuY2Ujc2V0QWxsb2NhdGUKICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0QWxsb2NhdGUoaW50IGFsbG9jYXRlKSB7\nCiAgICAgICAgX2FsbG9jYXRlID0gYWxsb2NhdGU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBAc2VlIFNlcXVlbmNlI2dldEluY3JlbWVudAogICAgICovCiAg\nICBwdWJsaWMgaW50IGdldEluY3JlbWVudCgpIHsKICAgICAgICByZXR1cm4g\nX2luY3JlbWVudDsKICAgIH0KCiAgICAvKioKICAgICAqIEBzZWUgU2VxdWVu\nY2Ujc2V0SW5jcmVtZW50CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldElu\nY3JlbWVudChpbnQgaW5jcmVtZW50KSB7CiAgICAgICAgX2luY3JlbWVudCA9\nIGluY3JlbWVudDsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXByZWNhdGVk\nIFJldGFpbmVkIGZvciBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgYXV0\nby1jb25maWd1cmF0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRU\nYWJsZU5hbWUoU3RyaW5nIHRhYmxlKSB7CiAgICAgICAgX3RhYmxlTmFtZSA9\nIHRhYmxlOwogICAgfQoKICAgIC8qKgogICAgICogQGRlcHJlY2F0ZWQgUmV0\nYWluZWQgZm9yIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciBhdXRvLWNv\nbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEZvcm1h\ndChTdHJpbmcgZm9ybWF0KSB7CiAgICAgICAgX2Zvcm1hdCA9IGZvcm1hdDsK\nICAgICAgICBfc3ViVGFibGUgPSB0cnVlOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGFkZFNjaGVtYShDbGFzc01hcHBpbmcgbWFwcGluZywgU2NoZW1hR3Jv\ndXAgZ3JvdXApIHsKICAgICAgICAvLyBzZXF1ZW5jZSBhbHJlYWR5IGV4aXN0\ncz8KICAgICAgICBpZiAoZ3JvdXAuaXNLbm93blNlcXVlbmNlKF9zZXFOYW1l\nKSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICBTdHJpbmcgc2NoZW1h\nTmFtZSA9IFN0cmluZ3MuZ2V0UGFja2FnZU5hbWUoX3NlcU5hbWUpOwogICAg\nICAgIGlmIChzY2hlbWFOYW1lLmxlbmd0aCgpID09IDApCiAgICAgICAgICAg\nIHNjaGVtYU5hbWUgPSBTY2hlbWFzLmdldE5ld1RhYmxlU2NoZW1hKF9jb25m\nKTsKCiAgICAgICAgLy8gY3JlYXRlIHRhYmxlIGluIHRoaXMgZ3JvdXAKICAg\nICAgICBTY2hlbWEgc2NoZW1hID0gZ3JvdXAuZ2V0U2NoZW1hKHNjaGVtYU5h\nbWUpOwogICAgICAgIGlmIChzY2hlbWEgPT0gbnVsbCkKICAgICAgICAgICAg\nc2NoZW1hID0gZ3JvdXAuYWRkU2NoZW1hKHNjaGVtYU5hbWUpOwogICAgICAg\nIHNjaGVtYS5pbXBvcnRTZXF1ZW5jZShfc2VxKTsKICAgIH0KCiAgICBwdWJs\naWMgSkRCQ0NvbmZpZ3VyYXRpb24gZ2V0Q29uZmlndXJhdGlvbigpIHsKICAg\nICAgICByZXR1cm4gX2NvbmY7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHNldENvbmZpZ3VyYXRpb24oQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAg\nICAgX2NvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pIGNvbmY7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc3RhcnRDb25maWd1cmF0aW9uKCkgewogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAg\nYnVpbGRTZXF1ZW5jZSgpOwoKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9\nIF9jb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgaWYg\nKF9mb3JtYXQgPT0gbnVsbCkgewogICAgICAgICAgICBfZm9ybWF0ID0gZGlj\ndC5uZXh0U2VxdWVuY2VRdWVyeTsKICAgICAgICAgICAgaWYgKF9mb3JtYXQg\nPT0gbnVsbCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4\nY2VwdGlvbihfbG9jLmdldCgibm8tc2VxLXNxbCIsIF9zZXFOYW1lKSk7CiAg\nICAgICAgfQogICAgICAgIGlmIChfdGFibGVOYW1lID09IG51bGwpCiAgICAg\nICAgICAgIF90YWJsZU5hbWUgPSAiRFVBTCI7CgogICAgICAgIFN0cmluZyBu\nYW1lID0gZGljdC5nZXRGdWxsTmFtZShfc2VxKTsKICAgICAgICBPYmplY3Rb\nXSBzdWJzID0gKF9zdWJUYWJsZSkgPyBuZXcgT2JqZWN0W117IG5hbWUsIF90\nYWJsZU5hbWUgfQogICAgICAgICAgICA6IG5ldyBPYmplY3RbXXsgbmFtZSB9\nOwogICAgICAgIF9zZWxlY3QgPSBNZXNzYWdlRm9ybWF0LmZvcm1hdChfZm9y\nbWF0LCBzdWJzKTsKICAgIH0KICAgIAogICAgcHJvdGVjdGVkIE9iamVjdCBu\nZXh0SW50ZXJuYWwoSkRCQ1N0b3JlIHN0b3JlLCBDbGFzc01hcHBpbmcgbWFw\ncGluZykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBD\nb25uZWN0aW9uIGNvbm4gPSBnZXRDb25uZWN0aW9uKHN0b3JlKTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICByZXR1cm4gTnVtYmVycy52YWx1ZU9mKGdl\ndFNlcXVlbmNlKGNvbm4pKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICBjbG9zZUNvbm5lY3Rpb24oY29ubik7CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogQ3JlYXRlcyB0aGUgc2VxdWVuY2Ugb2JqZWN0Lgog\nICAgICovCiAgICBwcml2YXRlIHZvaWQgYnVpbGRTZXF1ZW5jZSgpIHsKICAg\nICAgICBTdHJpbmcgc2VxTmFtZSA9IFN0cmluZ3MuZ2V0Q2xhc3NOYW1lKF9z\nZXFOYW1lKTsKICAgICAgICBTdHJpbmcgc2NoZW1hTmFtZSA9IFN0cmluZ3Mu\nZ2V0UGFja2FnZU5hbWUoX3NlcU5hbWUpOwogICAgICAgIGlmIChzY2hlbWFO\nYW1lLmxlbmd0aCgpID09IDApCiAgICAgICAgICAgIHNjaGVtYU5hbWUgPSBT\nY2hlbWFzLmdldE5ld1RhYmxlU2NoZW1hKF9jb25mKTsKCiAgICAgICAgLy8g\nYnVpbGQgdGhlIHNlcXVlbmNlIGluIG9uZSBvZiB0aGUgZGVzaWduYXRlZCBz\nY2hlbWFzCiAgICAgICAgU2NoZW1hR3JvdXAgZ3JvdXAgPSBuZXcgU2NoZW1h\nR3JvdXAoKTsKICAgICAgICBTY2hlbWEgc2NoZW1hID0gZ3JvdXAuYWRkU2No\nZW1hKHNjaGVtYU5hbWUpOwoKICAgICAgICBfc2VxID0gc2NoZW1hLmFkZFNl\ncXVlbmNlKHNlcU5hbWUpOwogICAgICAgIF9zZXEuc2V0SW5pdGlhbFZhbHVl\nKF9pbml0aWFsKTsKICAgICAgICBfc2VxLnNldEluY3JlbWVudChfaW5jcmVt\nZW50KTsKICAgICAgICBfc2VxLnNldEFsbG9jYXRlKF9hbGxvY2F0ZSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIHRoZSBzZXF1ZW5jZSBpbiB0\naGUgREIuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlZnJlc2hTZXF1ZW5j\nZSgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgTG9n\nIGxvZyA9IF9jb25mLmdldExvZyhPcGVuSlBBQ29uZmlndXJhdGlvbi5MT0df\nUlVOVElNRSk7CiAgICAgICAgaWYgKGxvZy5pc0luZm9FbmFibGVkKCkpCiAg\nICAgICAgICAgIGxvZy5pbmZvKF9sb2MuZ2V0KCJtYWtlLW5hdGl2ZS1zZXEi\nKSk7CgogICAgICAgIC8vIGNyZWF0ZSB0aGUgc2VxdWVuY2UKICAgICAgICBT\nY2hlbWFUb29sIHRvb2wgPSBuZXcgU2NoZW1hVG9vbChfY29uZik7CiAgICAg\nICAgdG9vbC5zZXRJZ25vcmVFcnJvcnModHJ1ZSk7CiAgICAgICAgdG9vbC5j\ncmVhdGVTZXF1ZW5jZShfc2VxKTsKICAgIH0KCiAgICAvKioKICAgICAqIERy\nb3BzIHRoZSBzZXF1ZW5jZSBpbiB0aGUgREIuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIGRyb3BTZXF1ZW5jZSgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgTG9nIGxvZyA9IF9jb25mLmdldExvZyhPcGVuSlBB\nQ29uZmlndXJhdGlvbi5MT0dfUlVOVElNRSk7CiAgICAgICAgaWYgKGxvZy5p\nc0luZm9FbmFibGVkKCkpCiAgICAgICAgICAgIGxvZy5pbmZvKF9sb2MuZ2V0\nKCJkcm9wLW5hdGl2ZS1zZXEiKSk7CgogICAgICAgIC8vIGRyb3AgdGhlIHRh\nYmxlCiAgICAgICAgU2NoZW1hVG9vbCB0b29sID0gbmV3IFNjaGVtYVRvb2wo\nX2NvbmYpOwogICAgICAgIHRvb2wuc2V0SWdub3JlRXJyb3JzKHRydWUpOwog\nICAgICAgIHRvb2wuZHJvcFNlcXVlbmNlKF9zZXEpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHRoZSBuZXh0IHNlcXVlbmNlIHZhbHVlLgogICAg\nICovCiAgICBwcml2YXRlIGxvbmcgZ2V0U2VxdWVuY2UoQ29ubmVjdGlvbiBj\nb25uKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFBy\nZXBhcmVkU3RhdGVtZW50IHN0bW50ID0gbnVsbDsKICAgICAgICBSZXN1bHRT\nZXQgcnMgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN0bW50\nID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KF9zZWxlY3QpOwogICAgICAgICAg\nICBycyA9IHN0bW50LmV4ZWN1dGVRdWVyeSgpOwogICAgICAgICAgICBpZiAo\ncnMubmV4dCgpKQogICAgICAgICAgICAgICAgcmV0dXJuIHJzLmdldExvbmco\nMSk7CgogICAgICAgICAgICAvLyBubyByb3cgIT8KICAgICAgICAgICAgdGhy\nb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoImludmFsaWQtc2VxLXNx\nbCIsIF9zZWxlY3QpKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAg\nICAvLyBjbGVhbiB1cCBvdXIgcmVzb3VyY2VzCiAgICAgICAgICAgIGlmIChy\ncyAhPSBudWxsKQogICAgICAgICAgICAgICAgdHJ5IHsgcnMuY2xvc2UoKTsg\nfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7fQogICAgICAgICAgICBpZiAo\nc3RtbnQgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHRyeSB7IHN0bW50LmNs\nb3NlKCk7IH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkge30KICAgICAgICB9\nCiAgICB9CgogICAgLy8vLy8vLy8vCiAgICAvLyBNYWluCiAgICAvLy8vLy8v\nLy8KCiAgICAvKioKICAgICAqIFVzYWdlOiBqYXZhIG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNjaGVtYS5OYXRpdmVKREJDU2VxdWVuY2UgW29wdGlvbl0q\nCiAgICAgKiAtYWN0aW9uLy1hICZsdDthZGQgfCBkcm9wIHwgZ2V0Jmd0Owog\nICAgICogIFdoZXJlIHRoZSBmb2xsb3dpbmcgb3B0aW9ucyBhcmUgcmVjb2du\naXplZC4KICAgICAqIDx1bD4KICAgICAqIDxsaT48aT4tcHJvcGVydGllcy8t\ncCAmbHQ7cHJvcGVydGllcyBmaWxlIG9yIHJlc291cmNlJmd0OzwvaT46IFRo\nZQogICAgICogcGF0aCBvciByZXNvdXJjZSBuYW1lIG9mIGEgT3BlbkpQQSBw\ncm9wZXJ0aWVzIGZpbGUgY29udGFpbmluZwogICAgICogaW5mb3JtYXRpb24g\nc3VjaCBhcyB0aGUgbGljZW5zZSBrZXkJYW5kIGNvbm5lY3Rpb24gZGF0YSBh\ncwogICAgICogb3V0bGluZWQgaW4ge0BsaW5rIEpEQkNDb25maWd1cmF0aW9u\nfS4gT3B0aW9uYWwuPC9saT4KICAgICAqIDxsaT48aT4tJmx0O3Byb3BlcnR5\nIG5hbWUmZ3Q7ICZsdDtwcm9wZXJ0eSB2YWx1ZSZndDs8L2k+OiBBbGwgYmVh\nbgogICAgICogcHJvcGVydGllcyBvZiB0aGUgT3BlbkpQQSB7QGxpbmsgSkRC\nQ0NvbmZpZ3VyYXRpb259IGNhbiBiZSBzZXQgYnkKICAgICAqIHVzaW5nIHRo\nZWlyCW5hbWVzIGFuZCBzdXBwbHlpbmcgYSB2YWx1ZS4gRm9yIGV4YW1wbGU6\nCiAgICAgKiA8Y29kZT4tbGljZW5zZUtleSBhZHNsZmphODNyM2xrYWRmPC9j\nb2RlPjwvbGk+CiAgICAgKiA8L3VsPgogICAgICogIFRoZSB2YXJpb3VzIGFj\ndGlvbnMgYXJlIGFzIGZvbGxvd3MuCiAgICAgKiA8dWw+CiAgICAgKiA8bGk+\nPGk+YWRkPC9pPjogQ3JlYXRlIHRoZSBzZXF1ZW5jZS48L2xpPgogICAgICog\nPGxpPjxpPmRyb3A8L2k+OiBEcm9wIHRoZSBzZXF1ZW5jZS48L2xpPgogICAg\nICogPGxpPjxpPmdldDwvaT46IFByaW50IHRoZSBuZXh0IHNlcXVlbmNlIHZh\nbHVlLjwvbGk+CiAgICAgKiA8L3VsPgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKQogICAgICAgIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIE9wdGlvbnMgb3B0cyA9IG5ldyBPcHRpb25z\nKCk7CiAgICAgICAgZmluYWwgU3RyaW5nW10gYXJndW1lbnRzID0gb3B0cy5z\nZXRGcm9tQ21kTGluZShhcmdzKTsKICAgICAgICBib29sZWFuIHJldCA9IENv\nbmZpZ3VyYXRpb25zLnJ1bkFnYWluc3RBbGxBbmNob3JzKG9wdHMsCiAgICAg\nICAgICAgIG5ldyBDb25maWd1cmF0aW9ucy5SdW5uYWJsZSgpIHsKICAgICAg\nICAgICAgcHVibGljIGJvb2xlYW4gcnVuKE9wdGlvbnMgb3B0cykgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgICAgICAgICBKREJDQ29uZmlndXJhdGlv\nbiBjb25mID0gbmV3IEpEQkNDb25maWd1cmF0aW9uSW1wbCgpOwogICAgICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTmF0\naXZlSkRCQ1NlcS5ydW4oY29uZiwgYXJndW1lbnRzLCBvcHRzKTsKICAgICAg\nICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgY29u\nZi5jbG9zZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg\nICAgICAgfSk7CiAgICAgICAgaWYgKCFyZXQpCiAgICAgICAgICAgIFN5c3Rl\nbS5vdXQucHJpbnRsbihfbG9jLmdldCgibmF0aXZlLXNlcS11c2FnZSIpKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJ1biB0aGUgdG9vbC4gUmV0dXJucyBm\nYWxzZSBpZiBpbnZhbGlkIG9wdGlvbnMgd2VyZSBnaXZlbi4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBib29sZWFuIHJ1bihKREJDQ29uZmlndXJhdGlv\nbiBjb25mLCBTdHJpbmdbXSBhcmdzLAogICAgICAgIE9wdGlvbnMgb3B0cykK\nICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcgYWN0\naW9uID0gb3B0cy5yZW1vdmVQcm9wZXJ0eSgiYWN0aW9uIiwgImEiLCBudWxs\nKTsKICAgICAgICBDb25maWd1cmF0aW9ucy5wb3B1bGF0ZUNvbmZpZ3VyYXRp\nb24oY29uZiwgb3B0cyk7CiAgICAgICAgcmV0dXJuIHJ1bihjb25mLCBhcmdz\nLCBhY3Rpb24pOwogICAgfQoKICAgIC8qKgogICAgICogUnVuIHRoZSB0b29s\nLiBSZXR1cm4gZmFsc2UgaWYgYW4gaW52YWxpZCBvcHRpb24gd2FzIGdpdmVu\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gcnVuKEpEQkND\nb25maWd1cmF0aW9uIGNvbmYsIFN0cmluZ1tdIGFyZ3MsCiAgICAgICAgU3Ry\naW5nIGFjdGlvbikKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBpZiAoYXJncy5sZW5ndGggIT0gMCkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwoKICAgICAgICBOYXRpdmVKREJDU2VxIHNlcSA9IG5ldyBOYXRpdmVK\nREJDU2VxKCk7CiAgICAgICAgU3RyaW5nIHByb3BzID0gQ29uZmlndXJhdGlv\nbnMuZ2V0UHJvcGVydGllcyhjb25mLmdldFNlcXVlbmNlKCkpOwogICAgICAg\nIENvbmZpZ3VyYXRpb25zLmNvbmZpZ3VyZUluc3RhbmNlKHNlcSwgY29uZiwg\ncHJvcHMpOwoKICAgICAgICBpZiAoQUNUSU9OX0RST1AuZXF1YWxzKGFjdGlv\nbikpCiAgICAgICAgICAgIHNlcS5kcm9wU2VxdWVuY2UoKTsKICAgICAgICBl\nbHNlIGlmIChBQ1RJT05fQURELmVxdWFscyhhY3Rpb24pKQogICAgICAgICAg\nICBzZXEucmVmcmVzaFNlcXVlbmNlKCk7CiAgICAgICAgZWxzZSBpZiAoQUNU\nSU9OX0dFVC5lcXVhbHMoYWN0aW9uKSkgewogICAgICAgICAgICBDb25uZWN0\naW9uIGNvbm4gPSBjb25mLmdldERhdGFTb3VyY2UyKG51bGwpLmdldENvbm5l\nY3Rpb24oKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxv\nbmcgY3VyID0gc2VxLmdldFNlcXVlbmNlKGNvbm4pOwogICAgICAgICAgICAg\nICAgU3lzdGVtLm91dC5wcmludGxuKGN1cik7CiAgICAgICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgICAgICB0cnkgeyBjb25uLmNsb3NlKCk7IH0g\nY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkge30KICAgICAgICAgICAgfQogICAg\nICAgIH0gZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICB9Cn0K\n","encoding":"base64"}

