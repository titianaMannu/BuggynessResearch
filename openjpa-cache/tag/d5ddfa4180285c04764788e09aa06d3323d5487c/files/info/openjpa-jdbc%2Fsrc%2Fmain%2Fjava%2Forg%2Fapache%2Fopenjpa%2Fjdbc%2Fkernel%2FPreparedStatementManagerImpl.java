{"sha":"87908437f65898459fe10788eaf2b020dff15cba","node_id":"MDQ6QmxvYjIwNjM2NDo4NzkwODQzN2Y2NTg5ODQ1OWZlMTA3ODhlYWYyYjAyMGRmZjE1Y2Jh","size":5425,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/87908437f65898459fe10788eaf2b020dff15cba","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlByZXBh\ncmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwpp\nbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLlJvdzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5Sb3dJbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLlNRTEV4Y2VwdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnV0aWwuQXBwbGljYXRpb25JZHM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3B0aW1pc3RpY0V4Y2VwdGlvbjsK\nCi8qKgogKiBCYXNpYyBwcmVwYXJlZCBzdGF0ZW1lbnQgbWFuYWdlciBpbXBs\nZW1lbnRhdGlvbi4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1Ymxp\nYyBjbGFzcyBQcmVwYXJlZFN0YXRlbWVudE1hbmFnZXJJbXBsIAogICAgaW1w\nbGVtZW50cyBQcmVwYXJlZFN0YXRlbWVudE1hbmFnZXIgewoKICAgIHByaXZh\ndGUgZmluYWwgc3RhdGljIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyCiAg\nICAgICAgLmZvclBhY2thZ2UoUHJlcGFyZWRTdGF0ZW1lbnRNYW5hZ2VySW1w\nbC5jbGFzcyk7CgogICAgcHJvdGVjdGVkIGZpbmFsIEpEQkNTdG9yZSBfc3Rv\ncmU7CiAgICBwcm90ZWN0ZWQgZmluYWwgQ29ubmVjdGlvbiBfY29ubjsKICAg\nIHByb3RlY3RlZCBmaW5hbCBEQkRpY3Rpb25hcnkgX2RpY3Q7CgogICAgLy8g\ndHJhY2sgZXhjZXB0aW9ucwogICAgcHJvdGVjdGVkIGZpbmFsIENvbGxlY3Rp\nb24gX2V4Y2VwdGlvbnMgPSBuZXcgTGlua2VkTGlzdCgpOwoKICAgIC8qKgog\nICAgICogQ29uc3RydWN0b3IuIFN1cHBseSBjb25uZWN0aW9uLgogICAgICov\nCiAgICBwdWJsaWMgUHJlcGFyZWRTdGF0ZW1lbnRNYW5hZ2VySW1wbChKREJD\nU3RvcmUgc3RvcmUsIENvbm5lY3Rpb24gY29ubikgewogICAgICAgIF9zdG9y\nZSA9IHN0b3JlOwogICAgICAgIF9kaWN0ID0gc3RvcmUuZ2V0REJEaWN0aW9u\nYXJ5KCk7CiAgICAgICAgX2Nvbm4gPSBjb25uOwogICAgfQoKICAgIHB1Ymxp\nYyBDb2xsZWN0aW9uIGdldEV4Y2VwdGlvbnMoKSB7CiAgICAgICAgcmV0dXJu\nIF9leGNlcHRpb25zOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGZsdXNoKFJv\nd0ltcGwgcm93KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZmx1c2hJ\nbnRlcm5hbChyb3cpOwogICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBz\nZSkgewogICAgICAgICAgICBfZXhjZXB0aW9ucy5hZGQoU1FMRXhjZXB0aW9u\ncy5nZXRTdG9yZShzZSwgX2RpY3QpKTsKICAgICAgICB9IGNhdGNoIChPcGVu\nSlBBRXhjZXB0aW9uIGtlKSB7CiAgICAgICAgICAgIF9leGNlcHRpb25zLmFk\nZChrZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRmx1c2gg\ndGhlIGdpdmVuIHJvdy4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgZmx1\nc2hJbnRlcm5hbChSb3dJbXBsIHJvdykgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgLy8gY2FuJ3QgYmF0Y2ggcm93cyB3aXRoIGF1dG8taW5jIGNv\nbHVtbnMKICAgICAgICBDb2x1bW5bXSBhdXRvQXNzaWduID0gbnVsbDsKICAg\nICAgICBpZiAocm93LmdldEFjdGlvbigpID09IFJvdy5BQ1RJT05fSU5TRVJU\nKQogICAgICAgICAgICBhdXRvQXNzaWduID0gcm93LmdldFRhYmxlKCkuZ2V0\nQXV0b0Fzc2lnbmVkQ29sdW1ucygpOwoKICAgICAgICBmbHVzaEFuZFVwZGF0\nZShyb3cpOwoKICAgICAgICAvLyBzZXQgYXV0byBhc3NpZ24gdmFsdWVzCiAg\nICAgICAgaWYgKGF1dG9Bc3NpZ24gIT0gbnVsbCAmJiBhdXRvQXNzaWduLmxl\nbmd0aCA+IDAKICAgICAgICAgICAgJiYgcm93LmdldFByaW1hcnlLZXkoKSAh\nPSBudWxsKSB7CiAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20g\nPSByb3cuZ2V0UHJpbWFyeUtleSgpOwogICAgICAgICAgICBDbGFzc01hcHBp\nbmcgbWFwcGluZyA9IChDbGFzc01hcHBpbmcpIHNtLmdldE1ldGFEYXRhKCk7\nCiAgICAgICAgICAgIE9iamVjdCB2YWw7CiAgICAgICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgYXV0b0Fzc2lnbi5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICAgICAgdmFsID0gX2RpY3QuZ2V0R2VuZXJhdGVkS2V5KGF1dG9Bc3Np\nZ25baV0sIF9jb25uKTsKICAgICAgICAgICAgICAgIG1hcHBpbmcuYXNzZXJ0\nSm9pbmFibGUoYXV0b0Fzc2lnbltpXSkuc2V0QXV0b0Fzc2lnbmVkVmFsdWUo\nc20sCiAgICAgICAgICAgICAgICAgICAgX3N0b3JlLCBhdXRvQXNzaWduW2ld\nLCB2YWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNtLnNldE9iamVj\ndElkKAogICAgICAgICAgICAgICAgQXBwbGljYXRpb25JZHMuY3JlYXRlKHNt\nLmdldFBlcnNpc3RlbmNlQ2FwYWJsZSgpLCBtYXBwaW5nKSk7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogRmx1c2ggdGhlIGdpdmVuIHJvdyBp\nbW1lZGlhdGVseS4gCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGZsdXNo\nQW5kVXBkYXRlKFJvd0ltcGwgcm93KQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIC8vIHByZXBhcmUgc3RhdGVtZW50CiAgICAgICAg\nU3RyaW5nIHNxbCA9IHJvdy5nZXRTUUwoX2RpY3QpOwogICAgICAgIFByZXBh\ncmVkU3RhdGVtZW50IHN0bW50ID0gcHJlcGFyZVN0YXRlbWVudChzcWwpOwoK\nICAgICAgICAvLyBzZXR1cCBwYXJhbWV0ZXJzIGFuZCBleGVjdXRlIHN0YXRl\nbWVudAogICAgICAgIGlmIChzdG1udCAhPSBudWxsKQogICAgICAgICAgICBy\nb3cuZmx1c2goc3RtbnQsIF9kaWN0LCBfc3RvcmUpOwogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGludCBjb3VudCA9IGV4ZWN1dGVVcGRhdGUoc3RtbnQs\nIHNxbCwgcm93KTsKICAgICAgICAgICAgaWYgKGNvdW50ICE9IDEpIHsKICAg\nICAgICAgICAgICAgIE9iamVjdCBmYWlsZWQgPSByb3cuZ2V0RmFpbGVkT2Jq\nZWN0KCk7CiAgICAgICAgICAgICAgICBpZiAoZmFpbGVkICE9IG51bGwpCiAg\nICAgICAgICAgICAgICAgICAgX2V4Y2VwdGlvbnMuYWRkKG5ldyBPcHRpbWlz\ndGljRXhjZXB0aW9uKGZhaWxlZCkpOwogICAgICAgICAgICAgICAgZWxzZSBp\nZiAocm93LmdldEFjdGlvbigpID09IFJvdy5BQ1RJT05fSU5TRVJUKQogICAg\nICAgICAgICAgICAgICAgIHRocm93IG5ldyBTUUxFeGNlcHRpb24oX2xvYy5n\nZXQoCiAgICAgICAgICAgICAgICAgICAgICAgICJ1cGRhdGUtZmFpbGVkLW5v\nLWZhaWxlZC1vYmoiLCBTdHJpbmcudmFsdWVPZihjb3VudCksCiAgICAgICAg\nICAgICAgICAgICAgICAgIHNxbCkuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAg\nICAgICAgICB0aHJvdyBTUUxFeGNlcHRpb25zLmdldFN0b3JlKHNlLCByb3cu\nZ2V0RmFpbGVkT2JqZWN0KCksIF9kaWN0KTsKICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICBpZiAoc3RtbnQgIT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdG1udC5jbG9zZSgp\nOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIHZvaWQgZmx1c2goKSB7CiAgICB9CiAgICAKICAg\nIC8qKgogICAgICogVGhpcyBtZXRob2QgaXMgdG8gcHJvdmlkZSBvdmVycmlk\nZSBmb3Igbm9uLUpEQkMgb3IgSkRCQy1saWtlIAogICAgICogaW1wbGVtZW50\nYXRpb24gb2YgZXhlY3V0aW5nIHVwZGF0ZS4KICAgICAqLwogICAgcHJvdGVj\ndGVkIGludCBleGVjdXRlVXBkYXRlKFByZXBhcmVkU3RhdGVtZW50IHN0bW50\nLCBTdHJpbmcgc3FsLCAKICAgICAgICBSb3dJbXBsIHJvdykgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIHN0bW50LmV4ZWN1dGVVcGRh\ndGUoKTsKICAgIH0KICAgICAgICAKICAgIC8qKgogICAgICogVGhpcyBtZXRo\nb2QgaXMgdG8gcHJvdmlkZSBvdmVycmlkZSBmb3Igbm9uLUpEQkMgb3IgSkRC\nQy1saWtlIAogICAgICogaW1wbGVtZW50YXRpb24gb2YgcHJlcGFyaW5nIHN0\nYXRlbWVudC4KICAgICAqLwogICAgcHJvdGVjdGVkIFByZXBhcmVkU3RhdGVt\nZW50IHByZXBhcmVTdGF0ZW1lbnQoU3RyaW5nIHNxbCkKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2Nvbm4ucHJlcGFy\nZVN0YXRlbWVudChzcWwpOwogICAgfQp9Cg==\n","encoding":"base64"}

