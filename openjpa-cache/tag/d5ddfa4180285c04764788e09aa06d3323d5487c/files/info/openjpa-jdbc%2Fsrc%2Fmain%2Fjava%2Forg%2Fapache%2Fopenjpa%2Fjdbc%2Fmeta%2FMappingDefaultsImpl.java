{"sha":"7f28dadda517aa79a2ae391ba3f8c0b8c34aa0cc","node_id":"MDQ6QmxvYjIwNjM2NDo3ZjI4ZGFkZGE1MTdhYTc5YTJhZTM5MWJhM2Y4YzBiOGMzNGFhMGNj","size":23520,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7f28dadda517aa79a2ae391ba3f8c0b8c34aa0cc","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7Cmlt\ncG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLlByb3BlcnRp\nZXM7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJD\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLm1ldGEuc3RyYXRzLlVudHlwZWRQQ1ZhbHVlSGFuZGxlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzLkVudW1WYWx1ZUhh\nbmRsZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEu\nQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLkZvcmVpZ25LZXk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\nY2hlbWEuSW5kZXg7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\nY2hlbWEuU2NoZW1hOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlVuaXF1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmNvbmYuQ29uZmlndXJhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuSmF2YVZlcnNpb25zOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBvcnQgc2Vy\ncC51dGlsLlN0cmluZ3M7CgovKioKICogRGVmYXVsdCBpbXBsZW1lbnRhdGlv\nbiBvZiB7QGxpbmsgTWFwcGluZ0RlZmF1bHRzfS4KICoKICogQGF1dGhvciBB\nYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBNYXBwaW5nRGVmYXVsdHNJbXBs\nCiAgICBpbXBsZW1lbnRzIE1hcHBpbmdEZWZhdWx0cywgQ29uZmlndXJhYmxl\nIHsKCiAgICBwcm90ZWN0ZWQgdHJhbnNpZW50IERCRGljdGlvbmFyeSBkaWN0\nID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9iYXNlQ2xhc3NTdHJhdGVn\neSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfc3ViY2xhc3NTdHJhdGVn\neSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfdmVyc2lvblN0cmF0ZWd5\nID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9kaXNjU3RyYXRlZ3kgPSBu\ndWxsOwogICAgcHJpdmF0ZSBmaW5hbCBNYXAgX2ZpZWxkTWFwID0gbmV3IEhh\nc2hNYXAoKTsKICAgIHByaXZhdGUgYm9vbGVhbiBfZGVmTWlzc2luZyA9IGZh\nbHNlOwogICAgcHJpdmF0ZSBib29sZWFuIF9jbGFzc0NyaXRlcmlhID0gZmFs\nc2U7CiAgICBwcml2YXRlIGludCBfam9pbkZLQWN0aW9uID0gRm9yZWlnbktl\neS5BQ1RJT05fTk9ORTsKICAgIHByaXZhdGUgaW50IF9ma0FjdGlvbiA9IEZv\ncmVpZ25LZXkuQUNUSU9OX05PTkU7CiAgICBwcml2YXRlIGJvb2xlYW4gX2Rl\nZmVyID0gZmFsc2U7CiAgICBwcml2YXRlIGJvb2xlYW4gX2luZGV4RksgPSB0\ncnVlOwogICAgcHJpdmF0ZSBib29sZWFuIF9pbmRleERpc2MgPSB0cnVlOwog\nICAgcHJpdmF0ZSBib29sZWFuIF9pbmRleFZlcnMgPSBmYWxzZTsKICAgIHBy\naXZhdGUgYm9vbGVhbiBfb3JkZXJMaXN0cyA9IHRydWU7CiAgICBwcml2YXRl\nIGJvb2xlYW4gX2FkZE51bGxJbmQgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9v\nbGVhbiBfb3JkaW5hbEVudW0gPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVh\nbiBfc3RyaW5naWZ5VW5tYXBwZWQgPSBmYWxzZTsKICAgIHByaXZhdGUgU3Ry\naW5nIF9kc0lkTmFtZSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfdmVy\nc05hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX2Rpc2NOYW1lID0g\nbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9vcmRlck5hbWUgPSBudWxsOwog\nICAgcHJpdmF0ZSBTdHJpbmcgX251bGxJbmROYW1lID0gbnVsbDsKICAgIHBy\naXZhdGUgYm9vbGVhbiBfcmVtb3ZlSHVuZ2FyaWFuTm90YXRpb24gPSBmYWxz\nZTsKCiAgICBwdWJsaWMgYm9vbGVhbiBpc1JlbW92ZUh1bmdhcmlhbk5vdGF0\naW9uKCkgewogICAgICAgIHJldHVybiBfcmVtb3ZlSHVuZ2FyaWFuTm90YXRp\nb247CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UmVtb3ZlSHVuZ2FyaWFu\nTm90YXRpb24oYm9vbGVhbiByZW1vdmVIdW5nYXJpYW5Ob3RhdGlvbikgewog\nICAgICAgIHRoaXMuX3JlbW92ZUh1bmdhcmlhbk5vdGF0aW9uID0gcmVtb3Zl\nSHVuZ2FyaWFuTm90YXRpb247CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZh\ndWx0IGJhc2UgY2xhc3Mgc3RyYXRlZ3kgYWxpYXMuCiAgICAgKi8KICAgIHB1\nYmxpYyBTdHJpbmcgZ2V0QmFzZUNsYXNzU3RyYXRlZ3koKSB7CiAgICAgICAg\ncmV0dXJuIF9iYXNlQ2xhc3NTdHJhdGVneTsKICAgIH0KCiAgICAvKioKICAg\nICAqIERlZmF1bHQgYmFzZSBjbGFzcyBzdHJhdGVneSBhbGlhcy4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0QmFzZUNsYXNzU3RyYXRlZ3koU3RyaW5n\nIGJhc2VDbGFzc1N0cmF0ZWd5KSB7CiAgICAgICAgX2Jhc2VDbGFzc1N0cmF0\nZWd5ID0gYmFzZUNsYXNzU3RyYXRlZ3k7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBEZWZhdWx0IHN1YmNsYXNzIHN0cmF0ZWd5IGFsaWFzLgogICAgICovCiAg\nICBwdWJsaWMgU3RyaW5nIGdldFN1YmNsYXNzU3RyYXRlZ3koKSB7CiAgICAg\nICAgcmV0dXJuIF9zdWJjbGFzc1N0cmF0ZWd5OwogICAgfQoKICAgIC8qKgog\nICAgICogRGVmYXVsdCBzdWJjbGFzcyBzdHJhdGVneSBhbGlhcy4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0U3ViY2xhc3NTdHJhdGVneShTdHJpbmcg\nc3ViY2xhc3NTdHJhdGVneSkgewogICAgICAgIF9zdWJjbGFzc1N0cmF0ZWd5\nID0gc3ViY2xhc3NTdHJhdGVneTsKICAgIH0KCiAgICAvKioKICAgICAqIERl\nZmF1bHQgdmVyc2lvbiBzdHJhdGVneSBhbGlhcy4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXRWZXJzaW9uU3RyYXRlZ3koKSB7CiAgICAgICAgcmV0\ndXJuIF92ZXJzaW9uU3RyYXRlZ3k7CiAgICB9CgogICAgLyoqCiAgICAgKiBE\nZWZhdWx0IHZlcnNpb24gc3RyYXRlZ3kgYWxpYXMuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldFZlcnNpb25TdHJhdGVneShTdHJpbmcgdmVyc2lvblN0\ncmF0ZWd5KSB7CiAgICAgICAgX3ZlcnNpb25TdHJhdGVneSA9IHZlcnNpb25T\ndHJhdGVneTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQgZGlzY3Jp\nbWluYXRvciBzdHJhdGVneSBhbGlhcy4KICAgICAqLwogICAgcHVibGljIFN0\ncmluZyBnZXREaXNjcmltaW5hdG9yU3RyYXRlZ3koKSB7CiAgICAgICAgcmV0\ndXJuIF9kaXNjU3RyYXRlZ3k7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZh\ndWx0IGRpc2NyaW1pbmF0b3Igc3RyYXRlZ3kgYWxpYXMuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldERpc2NyaW1pbmF0b3JTdHJhdGVneShTdHJpbmcg\nZGlzY1N0cmF0ZWd5KSB7CiAgICAgICAgX2Rpc2NTdHJhdGVneSA9IGRpc2NT\ndHJhdGVneTsKICAgIH0KCiAgICAvKioKICAgICAqIFByb3BlcnR5IHN0cmlu\nZyBtYXBwaW5nIGZpZWxkIHR5cGUgbmFtZXMgdG8gdmFsdWUgaGFuZGxlciBv\nciBmaWVsZAogICAgICogbWFwcGluZyBjbGFzcyBuYW1lcy4gRm9yIGF1dG8t\nY29uZmlndXJhdGlvbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Rmll\nbGRTdHJhdGVnaWVzKFN0cmluZyBmaWVsZE1hcFN0cmluZykgewogICAgICAg\nIFByb3BlcnRpZXMgcHJvcHMgPSBDb25maWd1cmF0aW9ucy5wYXJzZVByb3Bl\ncnRpZXMoZmllbGRNYXBTdHJpbmcpOwogICAgICAgIGlmIChwcm9wcyAhPSBu\ndWxsKQogICAgICAgICAgICBfZmllbGRNYXAucHV0QWxsKHByb3BzKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEFzc29jaWF0aW9uIG9mIGEgZmllbGQgdmFs\ndWUgdHlwZSBuYW1lIHdpdGggdGhlIGhhbmRsZXIgb3Igc3RyYXRlZ3kKICAg\nICAqIGNsYXNzIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEZp\nZWxkU3RyYXRlZ3koU3RyaW5nIHZhbHVlVHlwZSwgU3RyaW5nIGhhbmRsZXJU\neXBlKSB7CiAgICAgICAgaWYgKGhhbmRsZXJUeXBlID09IG51bGwpCiAgICAg\nICAgICAgIF9maWVsZE1hcC5yZW1vdmUodmFsdWVUeXBlKTsKICAgICAgICBl\nbHNlCiAgICAgICAgICAgIF9maWVsZE1hcC5wdXQodmFsdWVUeXBlLCBoYW5k\nbGVyVHlwZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBc3NvY2lhdGlvbiBv\nZiBhIGZpZWxkIHZhbHVlIHR5cGUgbmFtZSB3aXRoIHRoZSBoYW5kbGVyIG9y\nIHN0cmF0ZWd5CiAgICAgKiBjbGFzcyBuYW1lLgogICAgICovCiAgICBwdWJs\naWMgU3RyaW5nIGdldEZpZWxkU3RyYXRlZ3koU3RyaW5nIHZhbHVlVHlwZSkg\newogICAgICAgIHJldHVybiAoU3RyaW5nKSBfZmllbGRNYXAuZ2V0KHZhbHVl\nVHlwZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHN0b3Jl\nIGVudW1zIGFzIHRoZSBvcmRpbmFsIHZhbHVlIHJhdGhlciB0aGFuIHRoZSBl\nbnVtIG5hbWUuCiAgICAgKiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwog\nICAgcHVibGljIGJvb2xlYW4gZ2V0U3RvcmVFbnVtT3JkaW5hbCgpIHsKICAg\nICAgICByZXR1cm4gX29yZGluYWxFbnVtOwogICAgfQoKICAgIC8qKgogICAg\nICogV2hldGhlciB0byBzdG9yZSBlbnVtcyBhcyB0aGUgb3JkaW5hbCB2YWx1\nZSByYXRoZXIgdGhhbiB0aGUgZW51bSBuYW1lLgogICAgICogRGVmYXVsdHMg\ndG8gZmFsc2UuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFN0b3JlRW51\nbU9yZGluYWwoYm9vbGVhbiBvcmRpbmFsKSB7CiAgICAgICAgX29yZGluYWxF\nbnVtID0gb3JkaW5hbDsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\ndG8gc3RvcmUgYSByZWxhdGlvbiB0byBhbiB1bm1hcHBlZCBjbGFzcyBieSBz\ndHJpbmdpZnlpbmcgdGhlCiAgICAgKiBvaWQgb2YgdGhlIHJlbGF0ZWQgb2Jq\nZWN0LCByYXRoZXIgdGhhbiBzdG9yaW5nIHByaW1hcnkga2V5IHZhbHVlcy4K\nICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0U3RvcmVVbm1hcHBlZE9i\namVjdElkU3RyaW5nKCkgewogICAgICAgIHJldHVybiBfc3RyaW5naWZ5VW5t\nYXBwZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHN0b3Jl\nIGEgcmVsYXRpb24gdG8gYW4gdW5tYXBwZWQgY2xhc3MgYnkgc3RyaW5naWZ5\naW5nIHRoZQogICAgICogb2lkIG9mIHRoZSByZWxhdGVkIG9iamVjdCwgcmF0\naGVyIHRoYW4gc3RvcmluZyBwcmltYXJ5IGtleSB2YWx1ZXMuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldFN0b3JlVW5tYXBwZWRPYmplY3RJZFN0cmlu\nZyhib29sZWFuIHN0cmluZ2lmeSkgewogICAgICAgIF9zdHJpbmdpZnlVbm1h\ncHBlZCA9IHN0cmluZ2lmeTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1\nbHQgZm9yZWlnbiBrZXkgYWN0aW9uIGZvciBqb2luIGtleXMuIERlZmF1bHRz\nIHRvIGxvZ2ljYWwga2V5cy4KICAgICAqLwogICAgcHVibGljIGludCBnZXRK\nb2luRm9yZWlnbktleURlbGV0ZUFjdGlvbigpIHsKICAgICAgICByZXR1cm4g\nX2pvaW5GS0FjdGlvbjsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQg\nZm9yZWlnbiBrZXkgYWN0aW9uIGZvciBqb2luIGtleXMuIERlZmF1bHRzIHRv\nIGxvZ2ljYWwga2V5cy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Sm9p\nbkZvcmVpZ25LZXlEZWxldGVBY3Rpb24oaW50IGpvaW5GS0FjdGlvbikgewog\nICAgICAgIF9qb2luRktBY3Rpb24gPSBqb2luRktBY3Rpb247CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBEZWZhdWx0IGZvcmVpZ24ga2V5IGFjdGlvbiBuYW1l\nIGZvciBqb2luIGtleXMuIFVzZWQgaW4gYXV0bwogICAgICogY29uZmlndXJh\ndGlvbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Sm9pbkZvcmVpZ25L\nZXlEZWxldGVBY3Rpb24oU3RyaW5nIGpvaW5GS0FjdGlvbikgewogICAgICAg\nIF9qb2luRktBY3Rpb24gPSBGb3JlaWduS2V5LmdldEFjdGlvbihqb2luRktB\nY3Rpb24pOwogICAgfQoKICAgIC8qKgogICAgICogRGVmYXVsdCBmb3JlaWdu\nIGtleSBhY3Rpb24gZm9yIHJlbGF0aW9uIGtleXMuIERlZmF1bHRzIHRvIGxv\nZ2ljYWwga2V5cy4KICAgICAqLwogICAgcHVibGljIGludCBnZXRGb3JlaWdu\nS2V5RGVsZXRlQWN0aW9uKCkgewogICAgICAgIHJldHVybiBfZmtBY3Rpb247\nCiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGZvcmVpZ24ga2V5IGFj\ndGlvbiBmb3IgcmVsYXRpb24ga2V5cy4gRGVmYXVsdHMgdG8gbG9naWNhbCBr\nZXlzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRGb3JlaWduS2V5RGVs\nZXRlQWN0aW9uKGludCBma0FjdGlvbikgewogICAgICAgIF9ma0FjdGlvbiA9\nIGZrQWN0aW9uOwogICAgfQoKICAgIC8qKgogICAgICogRGVmYXVsdCBmb3Jl\naWduIGtleSBhY3Rpb24gbmFtZSBmb3IgcmVsYXRpb24ga2V5cy4gVXNlZCBp\nbiBhdXRvCiAgICAgKiBjb25maWd1cmF0aW9uLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRGb3JlaWduS2V5RGVsZXRlQWN0aW9uKFN0cmluZyBma0Fj\ndGlvbikgewogICAgICAgIF9ma0FjdGlvbiA9IEZvcmVpZ25LZXkuZ2V0QWN0\naW9uKGZrQWN0aW9uKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\ndG8gaW5kZXggbG9naWNhbCBmb3JlaWduIGtleXMgYnkgZGVmYXVsdC4gRGVm\nYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0\nSW5kZXhMb2dpY2FsRm9yZWlnbktleXMoKSB7CiAgICAgICAgcmV0dXJuIF9p\nbmRleEZLOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBpbmRl\neCBsb2dpY2FsIGZvcmVpZ24ga2V5cyBieSBkZWZhdWx0LiBEZWZhdWx0cyB0\nbyB0cnVlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRJbmRleExvZ2lj\nYWxGb3JlaWduS2V5cyhib29sZWFuIGluZGV4RkspIHsKICAgICAgICBfaW5k\nZXhGSyA9IGluZGV4Rks7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVy\nIHRvIGluZGV4IGRpc2NyaW1pbmF0b3IgY29sdW1ucyBieSBkZWZhdWx0LiBE\nZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBn\nZXRJbmRleERpc2NyaW1pbmF0b3IoKSB7CiAgICAgICAgcmV0dXJuIF9pbmRl\neERpc2M7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGluZGV4\nIGRpc2NyaW1pbmF0b3IgY29sdW1ucyBieSBkZWZhdWx0LiBEZWZhdWx0cyB0\nbyB0cnVlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRJbmRleERpc2Ny\naW1pbmF0b3IoYm9vbGVhbiBpbmRleERpc2MpIHsKICAgICAgICBfaW5kZXhE\naXNjID0gaW5kZXhEaXNjOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhl\nciB0byBpbmRleCB2ZXJzaW9uIGNvbHVtbnMgYnkgZGVmYXVsdC4gRGVmYXVs\ndHMgdG8gdHJ1ZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0SW5k\nZXhWZXJzaW9uKCkgewogICAgICAgIHJldHVybiBfaW5kZXhWZXJzOwogICAg\nfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBpbmRleCB2ZXJzaW9uIGNv\nbHVtbnMgYnkgZGVmYXVsdC4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0SW5kZXhWZXJzaW9uKGJvb2xlYW4gaW5kZXhW\nZXJzKSB7CiAgICAgICAgX2luZGV4VmVycyA9IGluZGV4VmVyczsKICAgIH0K\nCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gb3JkZXIgbGlzdHMgYW5kIGFy\ncmF5cyB1c2luZyBhIGRlZGljYXRlZCBvcmRlcmluZyBjb2x1bW4KICAgICAq\nIGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldE9y\nZGVyTGlzdHMoKSB7CiAgICAgICAgcmV0dXJuIF9vcmRlckxpc3RzOwogICAg\nfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBvcmRlciBsaXN0cyBhbmQg\nYXJyYXlzIHVzaW5nIGEgZGVkaWNhdGVkIG9yZGVyaW5nIGNvbHVtbgogICAg\nICogYnkgZGVmYXVsdC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0T3Jk\nZXJMaXN0cyhib29sZWFuIG9yZGVyTGlzdHMpIHsKICAgICAgICBfb3JkZXJM\naXN0cyA9IG9yZGVyTGlzdHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0\naGVyIHRvIGFkZCBhIHN5bnRoZXRpYyBudWxsIGluZGljYXRvciBjb2x1bW4g\ndG8gZW1iZWRkZWQgbWFwcGluZ3MKICAgICAqIGJ5IGRlZmF1bHQuCiAgICAg\nKi8KICAgIHB1YmxpYyBib29sZWFuIGdldEFkZE51bGxJbmRpY2F0b3IoKSB7\nCiAgICAgICAgcmV0dXJuIF9hZGROdWxsSW5kOwogICAgfQoKICAgIC8qKgog\nICAgICogV2hldGhlciB0byBhZGQgYSBzeW50aGV0aWMgbnVsbCBpbmRpY2F0\nb3IgY29sdW1uIHRvIGVtYmVkZGVkIG1hcHBpbmdzCiAgICAgKiBieSBkZWZh\ndWx0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRBZGROdWxsSW5kaWNh\ndG9yKGJvb2xlYW4gYWRkTnVsbEluZCkgewogICAgICAgIF9hZGROdWxsSW5k\nID0gYWRkTnVsbEluZDsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\ndG8gZGVmZXIgY29uc3RyYWludHMgYnkgZGVmYXVsdC4gRGVmYXVsdHMgdG8g\nZmFsc2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldERlZmVyQ29u\nc3RyYWludHMoKSB7CiAgICAgICAgcmV0dXJuIF9kZWZlcjsKICAgIH0KCiAg\nICAvKioKICAgICAqIFdoZXRoZXIgdG8gZGVmZXIgY29uc3RyYWludHMgYnkg\nZGVmYXVsdC4gRGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldERlZmVyQ29uc3RyYWludHMoYm9vbGVhbiBkZWZlcikgewog\nICAgICAgIF9kZWZlciA9IGRlZmVyOwogICAgfQoKICAgIC8qKgogICAgICog\nRGVmYXVsdCBiYXNlIG5hbWUgZm9yIGRhdGFzdG9yZSBpZGVudGl0eSBjb2x1\nbW5zLCBvciBudWxsIHRvIHRoZQogICAgICogbWFwcGluZydzIGJ1aWx0LWlu\nIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGF0YVN0b3Jl\nSWRDb2x1bW5OYW1lKCkgewogICAgICAgIHJldHVybiBfZHNJZE5hbWU7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFtZSBmb3IgZGF0\nYXN0b3JlIGlkZW50aXR5IGNvbHVtbnMsIG9yIG51bGwgdG8gdGhlCiAgICAg\nKiBtYXBwaW5nJ3MgYnVpbHQtaW4gbmFtZS4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0RGF0YVN0b3JlSWRDb2x1bW5OYW1lKFN0cmluZyBkc0lkTmFt\nZSkgewogICAgICAgIF9kc0lkTmFtZSA9IGRzSWROYW1lOwogICAgfQoKICAg\nIC8qKgogICAgICogRGVmYXVsdCBiYXNlIG5hbWUgZm9yIHZlcnNpb24gaWRl\nbnRpdHkgY29sdW1ucywgb3IgbnVsbCB0byB0aGUgbWFwcGluZydzCiAgICAg\nKiBidWlsdC1pbiBuYW1lLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdl\ndFZlcnNpb25Db2x1bW5OYW1lKCkgewogICAgICAgIHJldHVybiBfdmVyc05h\nbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFtZSBm\nb3IgdmVyc2lvbiBpZGVudGl0eSBjb2x1bW5zLCBvciBudWxsIHRvIHRoZSBt\nYXBwaW5nJ3MKICAgICAqIGJ1aWx0LWluIG5hbWUuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldFZlcnNpb25Db2x1bW5OYW1lKFN0cmluZyB2ZXJzTmFt\nZSkgewogICAgICAgIF92ZXJzTmFtZSA9IHZlcnNOYW1lOwogICAgfQoKICAg\nIC8qKgogICAgICogRGVmYXVsdCBiYXNlIG5hbWUgZm9yIGRpc2NyaW1pbmF0\nb3IgY29sdW1ucywgb3IgbnVsbCB0byB0aGUgbWFwcGluZydzCiAgICAgKiBi\ndWlsdC1pbiBuYW1lLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldERp\nc2NyaW1pbmF0b3JDb2x1bW5OYW1lKCkgewogICAgICAgIHJldHVybiBfZGlz\nY05hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFt\nZSBmb3IgZGlzY3JpbWluYXRvciBjb2x1bW5zLCBvciBudWxsIHRvIHRoZSBt\nYXBwaW5nJ3MKICAgICAqIGJ1aWx0LWluIG5hbWUuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldERpc2NyaW1pbmF0b3JDb2x1bW5OYW1lKFN0cmluZyBk\naXNjTmFtZSkgewogICAgICAgIF9kaXNjTmFtZSA9IGRpc2NOYW1lOwogICAg\nfQoKICAgIC8qKgogICAgICogRGVmYXVsdCBiYXNlIG5hbWUgZm9yIG9yZGVy\nIGNvbHVtbnMsIG9yIG51bGwgdG8gdGhlIG1hcHBpbmcncwogICAgICogYnVp\nbHQtaW4gbmFtZS4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRPcmRl\nckNvbHVtbk5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9vcmRlck5hbWU7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFtZSBmb3Igb3Jk\nZXIgY29sdW1ucywgb3IgbnVsbCB0byB0aGUgbWFwcGluZydzCiAgICAgKiBi\ndWlsdC1pbiBuYW1lLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRPcmRl\nckNvbHVtbk5hbWUoU3RyaW5nIG9yZGVyTmFtZSkgewogICAgICAgIF9vcmRl\nck5hbWUgPSBvcmRlck5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZh\ndWx0IGJhc2UgbmFtZSBmb3IgbnVsbCBpbmRpY2F0b3IgY29sdW1ucywgb3Ig\nbnVsbCB0byB0aGUgbWFwcGluZydzCiAgICAgKiBidWlsdC1pbiBuYW1lLgog\nICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldE51bGxJbmRpY2F0b3JDb2x1\nbW5OYW1lKCkgewogICAgICAgIHJldHVybiBfbnVsbEluZE5hbWU7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFtZSBmb3IgbnVsbCBp\nbmRpY2F0b3IgY29sdW1ucywgb3IgbnVsbCB0byB0aGUgbWFwcGluZydzCiAg\nICAgKiBidWlsdC1pbiBuYW1lLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXROdWxsSW5kaWNhdG9yQ29sdW1uTmFtZShTdHJpbmcgbnVsbEluZE5hbWUp\nIHsKICAgICAgICBfbnVsbEluZE5hbWUgPSBudWxsSW5kTmFtZTsKICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBkZWZhdWx0TWlzc2luZ0luZm8oKSB7CiAg\nICAgICAgcmV0dXJuIF9kZWZNaXNzaW5nOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldERlZmF1bHRNaXNzaW5nSW5mbyhib29sZWFuIGRlZk1pc3Npbmcp\nIHsKICAgICAgICBfZGVmTWlzc2luZyA9IGRlZk1pc3Npbmc7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gdXNlQ2xhc3NDcml0ZXJpYSgpIHsKICAgICAg\nICByZXR1cm4gX2NsYXNzQ3JpdGVyaWE7CiAgICB9CgogICAgcHVibGljIHZv\naWQgc2V0VXNlQ2xhc3NDcml0ZXJpYShib29sZWFuIGNsYXNzQ3JpdGVyaWEp\nIHsKICAgICAgICBfY2xhc3NDcml0ZXJpYSA9IGNsYXNzQ3JpdGVyaWE7CiAg\nICB9CgogICAgcHVibGljIE9iamVjdCBnZXRTdHJhdGVneShDbGFzc01hcHBp\nbmcgY2xzLCBib29sZWFuIGFkYXB0KSB7CiAgICAgICAgaWYgKGFkYXB0IHx8\nIGRlZmF1bHRNaXNzaW5nSW5mbygpKQogICAgICAgICAgICByZXR1cm4gKGNs\ncy5nZXRNYXBwZWRQQ1N1cGVyY2xhc3NNYXBwaW5nKCkgPT0gbnVsbCkKICAg\nICAgICAgICAgICAgID8gX2Jhc2VDbGFzc1N0cmF0ZWd5IDogX3N1YmNsYXNz\nU3RyYXRlZ3k7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCBnZXRTdHJhdGVneShWZXJzaW9uIHZlcnMsIGJvb2xlYW4g\nYWRhcHQpIHsKICAgICAgICBDbGFzc01hcHBpbmcgY2xzID0gdmVycy5nZXRD\nbGFzc01hcHBpbmcoKTsKICAgICAgICBpZiAoKGFkYXB0IHx8IGRlZmF1bHRN\naXNzaW5nSW5mbygpKQogICAgICAgICAgICAmJiBjbHMuZ2V0Sm9pbmFibGVQ\nQ1N1cGVyY2xhc3NNYXBwaW5nKCkgPT0gbnVsbAogICAgICAgICAgICAmJiBj\nbHMuZ2V0VmVyc2lvbkZpZWxkKCkgPT0gbnVsbCkKICAgICAgICAgICAgcmV0\ndXJuIF92ZXJzaW9uU3RyYXRlZ3k7CiAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICB9CgogICAgcHVibGljIE9iamVjdCBnZXRTdHJhdGVneShEaXNjcmltaW5h\ndG9yIGRpc2MsIGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBDbGFzc01hcHBp\nbmcgY2xzID0gZGlzYy5nZXRDbGFzc01hcHBpbmcoKTsKICAgICAgICBpZiAo\nKGFkYXB0IHx8IGRlZmF1bHRNaXNzaW5nSW5mbygpKQogICAgICAgICAgICAm\nJiBjbHMuZ2V0Sm9pbmFibGVQQ1N1cGVyY2xhc3NNYXBwaW5nKCkgPT0gbnVs\nbAogICAgICAgICAgICAmJiBkaXNjLmdldE1hcHBpbmdJbmZvKCkuZ2V0VmFs\ndWUoKSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gX2Rpc2NTdHJhdGVn\neTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgT2Jq\nZWN0IGdldFN0cmF0ZWd5KFZhbHVlTWFwcGluZyB2bSwgQ2xhc3MgdHlwZSwg\nYm9vbGVhbiBhZGFwdCkgewogICAgICAgIE9iamVjdCByZXQgPSBfZmllbGRN\nYXAuZ2V0KHR5cGUuZ2V0TmFtZSgpKTsKICAgICAgICBpZiAocmV0ICE9IG51\nbGwpCiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgaWYgKF9zdHJp\nbmdpZnlVbm1hcHBlZCAmJiB2bS5nZXRUeXBlTWFwcGluZygpICE9IG51bGwK\nICAgICAgICAgICAgJiYgIXZtLmdldFR5cGVNYXBwaW5nKCkuaXNNYXBwZWQo\nKSkKICAgICAgICAgICAgcmV0dXJuIFVudHlwZWRQQ1ZhbHVlSGFuZGxlci5n\nZXRJbnN0YW5jZSgpOwogICAgICAgIGlmICh0eXBlLmlzRW51bSgpICYmICF2\nbS5pc1NlcmlhbGl6ZWQoKSkgewogICAgICAgICAgICBFbnVtVmFsdWVIYW5k\nbGVyIGVudW1IYW5kbGVyID0gbmV3IEVudW1WYWx1ZUhhbmRsZXIoKTsKICAg\nICAgICAgICAgZW51bUhhbmRsZXIuc2V0U3RvcmVPcmRpbmFsKF9vcmRpbmFs\nRW51bSk7CiAgICAgICAgICAgIHJldHVybiBlbnVtSGFuZGxlcjsKICAgICAg\nICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBQcm92aWRlcyBhIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBnaXZlbiBEaXNj\ncmltaW5hdG9yLiAKICAgICAqIAogICAgICogPFA+CiAgICAgKiBUaGUgdHlw\nZSBvZiB0aGUgb2JqZWN0IHJldHVybmVkIHJlbGllcyBvbiB0aGUgamF2YVR5\ncGUgZmllbGQgYmVpbmcgc2V0IG9uIAogICAgICogdGhlIERpc2NyaW1pbmF0\nb3Igd2hpY2ggaXMgcHJvdmlkZWQuCiAgICAgKiA8VEFCTEUgYm9yZGVyPSIy\nIj4gCiAgICAgKiA8VEg+SmF2YVR5cGUKICAgICAqIDxUSD5EZWZhdWx0IHZh\nbHVlCiAgICAgKiA8VEJPRFk+CiAgICAgKiA8VFI+PFREPntAbGluayBKYXZh\nVHlwZXMuSU5UfTxURD4gVGhlIGhhc2hjb2RlIG9mIHRoZSBlbnRpdHkgbmFt\nZTwvVFI+CiAgICAgKiA8VFI+PFREPntAbGluayBKYXZhVHlwZXMuQ0hBUn08\nVEQ+VGhlIGZpcnN0IGNoYXJhY3RlciBvZiB0aGUgZW50aXR5IG5hbWUgCiAg\nICAgKiA8L1RSPgogICAgICogPFRSPjxURD57QGxpbmsgSmF2YVR5cGVzLlNU\nUklOR308VEQ+VGhlIGVudGl0eSBuYW1lPC9UUj4KICAgICAqIDwvVEJPRFk+\nCiAgICAgKiA8L1RBQkxFPgogICAgICogCiAgICAgKiBAcGFyYW0gZGlzYyBU\naGUgZGlzY3JpbWluYXRvciB0aGF0IG5lZWRzIGEgZGVmYXVsdCB2YWx1ZQog\nICAgICogQHBhcmFtIGFkYXB0IAogICAgICogCiAgICAgKiBAcmV0dXJuIEEg\nbmV3IG9iamVjdCBjb250YWluaW5nIHRoZSBnZW5lcmF0ZWQgRGlzY3JpbWlu\nYXRvciB2YWx1ZS4KICAgICAqLwogICAgcHVibGljIE9iamVjdCBnZXREaXNj\ncmltaW5hdG9yVmFsdWUoRGlzY3JpbWluYXRvciBkaXNjLCBib29sZWFuIGFk\nYXB0KSB7CiAgICAgICAgaWYgKCFhZGFwdCAmJiAhZGVmYXVsdE1pc3NpbmdJ\nbmZvKCkpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAvLyBX\nQVJOSU5HOiBDSEFOR0lORyBUSElTIFdJTEwgSU5WQUxJREFURSBFWElTVElO\nRyBEQVRBIElGIERFRkFVTFRJTkcKICAgICAgICAvLyBNSVNTSU5HIE1BUFBJ\nTkcgSU5GTwogICAgICAgIAogICAgICAgIFN0cmluZyBhbGlhcyA9IFN0cmlu\nZ3MuZ2V0Q2xhc3NOYW1lKGRpc2MuZ2V0Q2xhc3NNYXBwaW5nKCkKICAgICAg\nICAgICAgICAgIC5nZXRUeXBlQWxpYXMoKSk7CiAgICAgICAgCiAgICAgICAg\nc3dpdGNoIChkaXNjLmdldEphdmFUeXBlKCkpIHsKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuSU5UOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJ\nbnRlZ2VyKGFsaWFzLmhhc2hDb2RlKCkpOwogICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5DSEFSOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGFy\nYWN0ZXIoYWxpYXMuY2hhckF0KDApKTsgCiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLlNUUklORzoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAg\nICAgICAgIHJldHVybiBhbGlhczsKICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIFN0cmluZyBnZXRUYWJsZU5hbWUoQ2xhc3NNYXBwaW5nIGNscywgU2No\nZW1hIHNjaGVtYSkgewogICAgICAgIFN0cmluZyBuYW1lID0gU3RyaW5ncy5n\nZXRDbGFzc05hbWUoY2xzLmdldERlc2NyaWJlZFR5cGUoKSkuCiAgICAgICAg\nICAgIHJlcGxhY2UoJyQnLCAnXycpOwogICAgICAgIGlmICghX2RlZk1pc3Np\nbmcpCiAgICAgICAgICAgIG5hbWUgPSBkaWN0LmdldFZhbGlkVGFibGVOYW1l\nKG5hbWUsIHNjaGVtYSk7CiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICB9Cgog\nICAgcHVibGljIFN0cmluZyBnZXRUYWJsZU5hbWUoRmllbGRNYXBwaW5nIGZt\nLCBTY2hlbWEgc2NoZW1hKSB7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBmbS5n\nZXROYW1lKCk7CiAgICAgICAgVGFibGUgdGFibGUgPSBmbS5nZXREZWZpbmlu\nZ01hcHBpbmcoKS5nZXRUYWJsZSgpOwogICAgICAgIGlmICh0YWJsZSAhPSBu\ndWxsKSB7CiAgICAgICAgICAgIFN0cmluZyB0YWJsZU5hbWUgPSB0YWJsZS5n\nZXROYW1lKCk7CiAgICAgICAgICAgIGlmICh0YWJsZU5hbWUubGVuZ3RoKCkg\nPiA1KQogICAgICAgICAgICAgICAgdGFibGVOYW1lID0gdGFibGVOYW1lLnN1\nYnN0cmluZygwLCA1KTsKICAgICAgICAgICAgbmFtZSA9IHRhYmxlTmFtZSAr\nICJfIiArIG5hbWU7CiAgICAgICAgfQogICAgICAgIGlmICghX2RlZk1pc3Np\nbmcpCiAgICAgICAgICAgIG5hbWUgPSBkaWN0LmdldFZhbGlkVGFibGVOYW1l\nKG5hbWUsIHNjaGVtYSk7CiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgcG9wdWxhdGVEYXRhU3RvcmVJZENvbHVtbnMoQ2xh\nc3NNYXBwaW5nIGNscywgVGFibGUgdGFibGUsCiAgICAgICAgQ29sdW1uW10g\nY29scykgewogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29scy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoX2RzSWROYW1lICE9IG51bGwg\nJiYgY29scy5sZW5ndGggPT0gMSkKICAgICAgICAgICAgICAgIGNvbHNbaV0u\nc2V0TmFtZShfZHNJZE5hbWUpOwogICAgICAgICAgICBlbHNlIGlmIChfZHNJ\nZE5hbWUgIT0gbnVsbCkKICAgICAgICAgICAgICAgIGNvbHNbaV0uc2V0TmFt\nZShfZHNJZE5hbWUgKyBpKTsKICAgICAgICAgICAgY29ycmVjdE5hbWUodGFi\nbGUsIGNvbHNbaV0pOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIENvcnJlY3QgdGhlIGdpdmVuIGNvbHVtbidzIG5hbWUuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCB2b2lkIGNvcnJlY3ROYW1lKFRhYmxlIHRhYmxlLCBDb2x1\nbW4gY29sKSB7CiAgICAgICAgaWYgKCFfZGVmTWlzc2luZyB8fCBfcmVtb3Zl\nSHVuZ2FyaWFuTm90YXRpb24pCiAgICAgICAgewogICAgICAgICAgICBTdHJp\nbmcgbmFtZSA9IGNvbC5nZXROYW1lKCk7CiAgICAgICAgICAgIGlmIChfcmVt\nb3ZlSHVuZ2FyaWFuTm90YXRpb24pCiAgICAgICAgICAgICAgICBuYW1lID0g\ncmVtb3ZlSHVuZ2FyaWFuTm90YXRpb24obmFtZSk7CiAgICAgICAgICAgIGNv\nbC5zZXROYW1lKGRpY3QuZ2V0VmFsaWRDb2x1bW5OYW1lKG5hbWUsIHRhYmxl\nKSk7CiAgICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgcmVt\nb3ZlSHVuZ2FyaWFuTm90YXRpb24oU3RyaW5nIGNvbHVtbk5hbWUpIHsKICAg\nICAgICBjaGFyW10gbmFtZSA9IGNvbHVtbk5hbWUudG9DaGFyQXJyYXkoKTsK\nICAgICAgICBpbnQgbmV3U3RhcnQgPSAwOwoKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IG5hbWUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYg\nKENoYXJhY3Rlci5pc1VwcGVyQ2FzZShuYW1lW2ldKSkKICAgICAgICAgICAg\newogICAgICAgICAgICAgICAgbmV3U3RhcnQgPSBpOwogICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJl\ndHVybiBjb2x1bW5OYW1lLnN1YnN0cmluZyhuZXdTdGFydCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgcG9wdWxhdGVDb2x1bW5zKFZlcnNpb24gdmVycywg\nVGFibGUgdGFibGUsIENvbHVtbltdIGNvbHMpIHsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\naWYgKF92ZXJzTmFtZSAhPSBudWxsICYmIGNvbHMubGVuZ3RoID09IDEpCiAg\nICAgICAgICAgICAgICBjb2xzW2ldLnNldE5hbWUoX3ZlcnNOYW1lKTsKICAg\nICAgICAgICAgZWxzZSBpZiAoX3ZlcnNOYW1lICE9IG51bGwpIHsKICAgICAg\nICAgICAgICAgIGlmIChpID09IDApCiAgICAgICAgICAgICAgICAgICAgY29s\nc1tpXS5zZXROYW1lKF92ZXJzTmFtZSk7CiAgICAgICAgICAgICAgICBlbHNl\nCiAgICAgICAgICAgICAgICAgICAgY29sc1tpXS5zZXROYW1lKF92ZXJzTmFt\nZSArICJfIiArIGkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKF92ZXJzTmFt\nZSAhPSBudWxsKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXROYW1lKF92\nZXJzTmFtZSArIGkpOwogICAgICAgICAgICBjb3JyZWN0TmFtZSh0YWJsZSwg\nY29sc1tpXSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBv\ncHVsYXRlQ29sdW1ucyhEaXNjcmltaW5hdG9yIGRpc2MsIFRhYmxlIHRhYmxl\nLAogICAgICAgIENvbHVtbltdIGNvbHMpIHsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYg\nKF9kaXNjTmFtZSAhPSBudWxsICYmIGNvbHMubGVuZ3RoID09IDEpCiAgICAg\nICAgICAgICAgICBjb2xzW2ldLnNldE5hbWUoX2Rpc2NOYW1lKTsKICAgICAg\nICAgICAgZWxzZSBpZiAoX2Rpc2NOYW1lICE9IG51bGwpCiAgICAgICAgICAg\nICAgICBjb2xzW2ldLnNldE5hbWUoX2Rpc2NOYW1lICsgaSk7CiAgICAgICAg\nICAgIGNvcnJlY3ROYW1lKHRhYmxlLCBjb2xzW2ldKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcG9wdWxhdGVKb2luQ29sdW1uKENsYXNz\nTWFwcGluZyBjbSwgVGFibGUgbG9jYWwsIFRhYmxlIGZvcmVpZ24sCiAgICAg\nICAgQ29sdW1uIGNvbCwgT2JqZWN0IHRhcmdldCwgaW50IHBvcywgaW50IGNv\nbHMpIHsKICAgICAgICBjb3JyZWN0TmFtZShsb2NhbCwgY29sKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBwb3B1bGF0ZUpvaW5Db2x1bW4oRmllbGRNYXBw\naW5nIGZtLCBUYWJsZSBsb2NhbCwgVGFibGUgZm9yZWlnbiwKICAgICAgICBD\nb2x1bW4gY29sLCBPYmplY3QgdGFyZ2V0LCBpbnQgcG9zLCBpbnQgY29scykg\newogICAgICAgIGNvcnJlY3ROYW1lKGxvY2FsLCBjb2wpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHBvcHVsYXRlRm9yZWlnbktleUNvbHVtbihWYWx1ZU1h\ncHBpbmcgdm0sIFN0cmluZyBuYW1lLAogICAgICAgIFRhYmxlIGxvY2FsLCBU\nYWJsZSBmb3JlaWduLCBDb2x1bW4gY29sLCBPYmplY3QgdGFyZ2V0LCBib29s\nZWFuIGludmVyc2UsCiAgICAgICAgaW50IHBvcywgaW50IGNvbHMpIHsKICAg\nICAgICBpZiAoY29scyA9PSAxKQogICAgICAgICAgICBjb2wuc2V0TmFtZShu\nYW1lKTsKICAgICAgICBlbHNlIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBDb2x1\nbW4pCiAgICAgICAgICAgIGNvbC5zZXROYW1lKG5hbWUgKyAiXyIgKyAoKENv\nbHVtbikgdGFyZ2V0KS5nZXROYW1lKCkpOwogICAgICAgIGNvcnJlY3ROYW1l\nKGxvY2FsLCBjb2wpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBvcHVsYXRl\nQ29sdW1ucyhWYWx1ZU1hcHBpbmcgdm0sIFN0cmluZyBuYW1lLCBUYWJsZSB0\nYWJsZSwKICAgICAgICBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBj\nb3JyZWN0TmFtZSh0YWJsZSwgY29sc1tpXSk7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gcG9wdWxhdGVPcmRlckNvbHVtbnMoRmllbGRNYXBwaW5nIGZt\nLCBUYWJsZSB0YWJsZSwKICAgICAgICBDb2x1bW5bXSBjb2xzKSB7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7CiAg\nICAgICAgICAgIGlmIChfb3JkZXJOYW1lICE9IG51bGwgJiYgY29scy5sZW5n\ndGggPT0gMSkKICAgICAgICAgICAgICAgIGNvbHNbaV0uc2V0TmFtZShfb3Jk\nZXJOYW1lKTsKICAgICAgICAgICAgZWxzZSBpZiAoX29yZGVyTmFtZSAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXROYW1lKF9vcmRlck5h\nbWUgKyBpKTsKICAgICAgICAgICAgY29ycmVjdE5hbWUodGFibGUsIGNvbHNb\naV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX29yZGVyTGlzdHMgJiYg\nKEphdmFUeXBlcy5BUlJBWSA9PSBmbS5nZXRUeXBlQ29kZSgpCiAgICAgICAg\nICAgIHx8IExpc3QuY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShmbS5nZXRUeXBl\nKCkpKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBwb3B1bGF0ZU51bGxJ\nbmRpY2F0b3JDb2x1bW5zKFZhbHVlTWFwcGluZyB2bSwgU3RyaW5nIG5hbWUs\nCiAgICAgICAgVGFibGUgdGFibGUsIENvbHVtbltdIGNvbHMpIHsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgaWYgKF9udWxsSW5kTmFtZSAhPSBudWxsICYmIGNvbHMubGVu\nZ3RoID09IDEpCiAgICAgICAgICAgICAgICBjb2xzW2ldLnNldE5hbWUoX251\nbGxJbmROYW1lKTsKICAgICAgICAgICAgZWxzZSBpZiAoX251bGxJbmROYW1l\nICE9IG51bGwpCiAgICAgICAgICAgICAgICBjb2xzW2ldLnNldE5hbWUoX251\nbGxJbmROYW1lICsgaSk7CiAgICAgICAgICAgIGNvcnJlY3ROYW1lKHRhYmxl\nLCBjb2xzW2ldKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9hZGROdWxs\nSW5kOwogICAgfQoKICAgIHB1YmxpYyBGb3JlaWduS2V5IGdldEpvaW5Gb3Jl\naWduS2V5KENsYXNzTWFwcGluZyBjbHMsIFRhYmxlIGxvY2FsLAogICAgICAg\nIFRhYmxlIGZvcmVpZ24pIHsKICAgICAgICBpZiAoX2pvaW5GS0FjdGlvbiA9\nPSBGb3JlaWduS2V5LkFDVElPTl9OT05FKQogICAgICAgICAgICByZXR1cm4g\nbnVsbDsKICAgICAgICBGb3JlaWduS2V5IGZrID0gbmV3IEZvcmVpZ25LZXko\nKTsKICAgICAgICBmay5zZXREZWxldGVBY3Rpb24oX2pvaW5GS0FjdGlvbik7\nCiAgICAgICAgZmsuc2V0RGVmZXJyZWQoX2RlZmVyKTsKICAgICAgICByZXR1\ncm4gZms7CiAgICB9CgogICAgcHVibGljIEZvcmVpZ25LZXkgZ2V0Sm9pbkZv\ncmVpZ25LZXkoRmllbGRNYXBwaW5nIGZtLCBUYWJsZSBsb2NhbCwKICAgICAg\nICBUYWJsZSBmb3JlaWduKSB7CiAgICAgICAgaWYgKF9qb2luRktBY3Rpb24g\nPT0gRm9yZWlnbktleS5BQ1RJT05fTk9ORSkKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICAgICAgRm9yZWlnbktleSBmayA9IG5ldyBGb3JlaWduS2V5\nKCk7CiAgICAgICAgZmsuc2V0RGVsZXRlQWN0aW9uKF9qb2luRktBY3Rpb24p\nOwogICAgICAgIGZrLnNldERlZmVycmVkKF9kZWZlcik7CiAgICAgICAgcmV0\ndXJuIGZrOwogICAgfQoKICAgIHB1YmxpYyBGb3JlaWduS2V5IGdldEZvcmVp\nZ25LZXkoVmFsdWVNYXBwaW5nIHZtLCBTdHJpbmcgbmFtZSwgVGFibGUgbG9j\nYWwsCiAgICAgICAgVGFibGUgZm9yZWlnbiwgYm9vbGVhbiBpbnZlcnNlKSB7\nCiAgICAgICAgaWYgKF9ma0FjdGlvbiA9PSBGb3JlaWduS2V5LkFDVElPTl9O\nT05FKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBGb3JlaWdu\nS2V5IGZrID0gbmV3IEZvcmVpZ25LZXkoKTsKICAgICAgICBmay5zZXREZWxl\ndGVBY3Rpb24oX2ZrQWN0aW9uKTsKICAgICAgICBmay5zZXREZWZlcnJlZChf\nZGVmZXIpOwogICAgICAgIHJldHVybiBmazsKICAgIH0KCiAgICBwdWJsaWMg\nSW5kZXggZ2V0Sm9pbkluZGV4KEZpZWxkTWFwcGluZyBmbSwgVGFibGUgdGFi\nbGUsIENvbHVtbltdIGNvbHMpIHsKICAgICAgICBpZiAoIV9pbmRleEZLIHx8\nIGZtLmdldEpvaW5Gb3JlaWduS2V5KCkgPT0gbnVsbAogICAgICAgICAgICB8\nfCAhZm0uZ2V0Sm9pbkZvcmVpZ25LZXkoKS5pc0xvZ2ljYWwoKSkKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGFyZUFsbFByaW1hcnlL\nZXlDb2x1bW5zKGNvbHMpKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAg\nICAgICAgSW5kZXggaWR4ID0gbmV3IEluZGV4KCk7CiAgICAgICAgaWR4LnNl\ndE5hbWUoZ2V0SW5kZXhOYW1lKG51bGwsIHRhYmxlLCBjb2xzKSk7CiAgICAg\nICAgcmV0dXJuIGlkeDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3\naGV0aGVyIGFsbCB0aGUgZ2l2ZW4gY29sdW1ucyBhcmUgcHJpbWFyeSBrZXkg\nY29sdW1ucy4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gYXJlQWxs\nUHJpbWFyeUtleUNvbHVtbnMoQ29sdW1uW10gY29scykgewogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykKICAgICAgICAg\nICAgaWYgKCFjb2xzW2ldLmlzUHJpbWFyeUtleSgpKQogICAgICAgICAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoK\nICAgIC8qKgogICAgICogR2VuZXJhdGUgYW4gaW5kZXggbmFtZS4KICAgICAq\nLwogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRJbmRleE5hbWUoU3RyaW5nIG5h\nbWUsIFRhYmxlIHRhYmxlLCBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgLy8g\nYWx3YXlzIHVzZSBkaWN0IGZvciBpbmRleCBuYW1lcyBiZWNhdXNlIG5vIHNw\nZWMgbWFuZGF0ZXMgdGhlbQogICAgICAgIC8vIGJhc2VkIG9uIGRlZmF1bHRz\nCiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgbmFtZSA9\nIGNvbHNbMF0uZ2V0TmFtZSgpOwoKICAgICAgICBpZiAoX3JlbW92ZUh1bmdh\ncmlhbk5vdGF0aW9uKQogICAgICAgICAgICBuYW1lID0gcmVtb3ZlSHVuZ2Fy\naWFuTm90YXRpb24obmFtZSk7CgogICAgICAgIHJldHVybiBkaWN0LmdldFZh\nbGlkSW5kZXhOYW1lKG5hbWUsIHRhYmxlKTsKICAgIH0KCiAgICBwdWJsaWMg\nSW5kZXggZ2V0SW5kZXgoVmFsdWVNYXBwaW5nIHZtLCBTdHJpbmcgbmFtZSwg\nVGFibGUgdGFibGUsCiAgICAgICAgQ29sdW1uW10gY29scykgewogICAgICAg\nIGlmICghX2luZGV4RksgfHwgdm0uZ2V0Rm9yZWlnbktleSgpID09IG51bGwK\nICAgICAgICAgICAgfHwgIXZtLmdldEZvcmVpZ25LZXkoKS5pc0xvZ2ljYWwo\nKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGFyZUFs\nbFByaW1hcnlLZXlDb2x1bW5zKGNvbHMpKQogICAgICAgICAgICByZXR1cm4g\nbnVsbDsKCiAgICAgICAgSW5kZXggaWR4ID0gbmV3IEluZGV4KCk7CiAgICAg\nICAgaWR4LnNldE5hbWUoZ2V0SW5kZXhOYW1lKG5hbWUsIHRhYmxlLCBjb2xz\nKSk7CiAgICAgICAgcmV0dXJuIGlkeDsKICAgIH0KCiAgICBwdWJsaWMgSW5k\nZXggZ2V0SW5kZXgoVmVyc2lvbiB2ZXJzLCBUYWJsZSB0YWJsZSwgQ29sdW1u\nW10gY29scykgewogICAgICAgIGlmICghX2luZGV4VmVycykKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgSW5kZXggaWR4ID0gbmV3IEluZGV4\nKCk7CiAgICAgICAgaWR4LnNldE5hbWUoZ2V0SW5kZXhOYW1lKF92ZXJzTmFt\nZSwgdGFibGUsIGNvbHMpKTsKICAgICAgICByZXR1cm4gaWR4OwogICAgfQoK\nICAgIHB1YmxpYyBJbmRleCBnZXRJbmRleChEaXNjcmltaW5hdG9yIGRpc2Ms\nIFRhYmxlIHRhYmxlLCBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgaWYgKCFf\naW5kZXhEaXNjKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBJ\nbmRleCBpZHggPSBuZXcgSW5kZXgoKTsKICAgICAgICBpZHguc2V0TmFtZShn\nZXRJbmRleE5hbWUoX2Rpc2NOYW1lLCB0YWJsZSwgY29scykpOwogICAgICAg\nIHJldHVybiBpZHg7CiAgICB9CgogICAgcHVibGljIFVuaXF1ZSBnZXRKb2lu\nVW5pcXVlKEZpZWxkTWFwcGluZyBmbSwgVGFibGUgdGFibGUsIENvbHVtbltd\nIGNvbHMpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJs\naWMgVW5pcXVlIGdldFVuaXF1ZShWYWx1ZU1hcHBpbmcgdm0sIFN0cmluZyBu\nYW1lLCBUYWJsZSB0YWJsZSwKICAgICAgICBDb2x1bW5bXSBjb2xzKSB7CiAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBn\nZXRQcmltYXJ5S2V5TmFtZShDbGFzc01hcHBpbmcgY20sIFRhYmxlIHRhYmxl\nKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcHVibGljIHZv\naWQgaW5zdGFsbFByaW1hcnlLZXkoRmllbGRNYXBwaW5nIGZtLCBUYWJsZSB0\nYWJsZSkgewogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8KICAgIC8vIENvbmZpZ3VyYWJsZSBpbXBsZW1lbnRhdGlvbgogICAg\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIHB1YmxpYyB2\nb2lkIHNldENvbmZpZ3VyYXRpb24oQ29uZmlndXJhdGlvbiBjb25mKSB7CiAg\nICAgICAgZGljdCA9ICgoSkRCQ0NvbmZpZ3VyYXRpb24pIGNvbmYpLmdldERC\nRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc3RhcnRDb25maWd1cmF0aW9uKCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGVuZENvbmZpZ3VyYXRpb24oKSB7CiAgICB9Cn0K\n","encoding":"base64"}

