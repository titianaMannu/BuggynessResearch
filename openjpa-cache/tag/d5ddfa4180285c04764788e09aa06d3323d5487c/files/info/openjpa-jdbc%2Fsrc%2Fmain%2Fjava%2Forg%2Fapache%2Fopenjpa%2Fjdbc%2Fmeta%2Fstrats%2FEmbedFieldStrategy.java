{"sha":"57232a4bc772ea16b0d5bdd503b91afe1177d629","node_id":"MDQ6QmxvYjIwNjM2NDo1NzIzMmE0YmM3NzJlYTE2YjBkNWJkZDUwM2I5MWFmZTExNzdkNjI5","size":49650,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/57232a4bc772ea16b0d5bdd503b91afe1177d629","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5P\nYmplY3RPdXRwdXQ7CmltcG9ydCBqYXZhLmlvLlJlYWRlcjsKaW1wb3J0IGph\ndmEubWF0aC5CaWdEZWNpbWFsOwppbXBvcnQgamF2YS5tYXRoLkJpZ0ludGVn\nZXI7CmltcG9ydCBqYXZhLnNxbC5BcnJheTsKaW1wb3J0IGphdmEuc3FsLkJs\nb2I7CmltcG9ydCBqYXZhLnNxbC5DbG9iOwppbXBvcnQgamF2YS5zcWwuU1FM\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1wb3J0IGphdmEu\nc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEudXRpbC5CaXRTZXQ7CmltcG9y\ndCBqYXZhLnV0aWwuQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwppbXBvcnQgamF2YS51dGls\nLkxvY2FsZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5Q\nZXJzaXN0ZW5jZUNhcGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nZW5oYW5jZS5TdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGlu\nZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuRmllbGRN\nYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5K\nYXZhU1FMVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLlJlbGF0aW9uSWQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLlZhbHVlTWFwcGluZ0luZm87CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLkZvcmVpZ25LZXk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc3FsLlJvdzsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5Sb3dNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUENTdGF0ZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RvcmVDb250ZXh0OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFEYXRhOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuVmFsdWVNZXRhRGF0YTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludGVybmFsRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuTWV0YURhdGFF\neGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5Vc2Vy\nRXhjZXB0aW9uOwoKLyoqCiAqIE1hcHBpbmcgZm9yIGFuIGVtYmVkZGVkIHBl\ncnNpc3RlbnQgb2JqZWN0LgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBA\nc2luY2UgMC40LjAKICovCnB1YmxpYyBjbGFzcyBFbWJlZEZpZWxkU3RyYXRl\nZ3kKICAgIGV4dGVuZHMgQWJzdHJhY3RGaWVsZFN0cmF0ZWd5IHsKCiAgICBw\ncml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgSU5TRVJUID0gMDsKICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIGludCBVUERBVEUgPSAxOwogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgaW50IERFTEVURSA9IDI7CgogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2Fn\nZQogICAgICAgIChFbWJlZEZpZWxkU3RyYXRlZ3kuY2xhc3MpOwoKICAgIHBy\naXZhdGUgYm9vbGVhbiBfc3ludGhldGljID0gZmFsc2U7CgogICAgcHVibGlj\nIHZvaWQgbWFwKGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBpZiAoZmllbGQu\nZ2V0RW1iZWRkZWRNZXRhRGF0YSgpID09IG51bGwpCiAgICAgICAgICAgIHRo\ncm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgibm90LWVtYmVk\nIiwgZmllbGQpKTsKICAgICAgICBhc3NlcnROb3RNYXBwZWRCeSgpOwoKICAg\nICAgICAvLyBtYXAgam9pbiBrZXkgKGlmIGFueSkKICAgICAgICBmaWVsZC5t\nYXBKb2luKGFkYXB0LCBmYWxzZSk7CiAgICAgICAgZmllbGQuZ2V0S2V5TWFw\ncGluZygpLmdldFZhbHVlSW5mbygpLmFzc2VydE5vU2NoZW1hQ29tcG9uZW50\ncwogICAgICAgICAgICAoZmllbGQuZ2V0S2V5KCksICFhZGFwdCk7CiAgICAg\nICAgZmllbGQuZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRWYWx1ZUluZm8oKS5h\nc3NlcnROb1NjaGVtYUNvbXBvbmVudHMKICAgICAgICAgICAgKGZpZWxkLmdl\ndEVsZW1lbnQoKSwgIWFkYXB0KTsKCiAgICAgICAgVmFsdWVNYXBwaW5nSW5m\nbyB2aW5mbyA9IGZpZWxkLmdldFZhbHVlSW5mbygpOwogICAgICAgIHZpbmZv\nLmFzc2VydE5vSm9pbihmaWVsZCwgdHJ1ZSk7CiAgICAgICAgdmluZm8uYXNz\nZXJ0Tm9Gb3JlaWduS2V5KGZpZWxkLCAhYWRhcHQpOwogICAgICAgIHZpbmZv\nLmFzc2VydE5vVW5pcXVlKGZpZWxkLCAhYWRhcHQpOwogICAgICAgIHZpbmZv\nLmFzc2VydE5vSW5kZXgoZmllbGQsICFhZGFwdCk7CgogICAgICAgIC8vIGJl\nZm9yZSB3ZSBtYXAgdGhlIG51bGwgaW5kaWNhdG9yIGNvbHVtbiwgd2UgbmVl\nZCB0byBtYWtlIHN1cmUgb3VyCiAgICAgICAgLy8gdmFsdWUgaXMgbWFwcGVk\nIHNvIHdlIGNhbiB0ZWxsIHdoZXRoZXIgdGhlIGNvbHVtbiBpcyBzeW50aGV0\naWMKICAgICAgICBmaWVsZC5nZXRWYWx1ZU1hcHBpbmcoKS5yZXNvbHZlKGZp\nZWxkLk1PREVfTUVUQSB8IGZpZWxkLk1PREVfTUFQUElORyk7CiAgICAgICAg\nQ29sdW1uIGNvbCA9IHZpbmZvLmdldE51bGxJbmRpY2F0b3JDb2x1bW4oZmll\nbGQsIGZpZWxkLmdldE5hbWUoKSwKICAgICAgICAgICAgZmllbGQuZ2V0VGFi\nbGUoKSwgYWRhcHQpOwogICAgICAgIGlmIChjb2wgIT0gbnVsbCkgewogICAg\nICAgICAgICBmaWVsZC5zZXRDb2x1bW5zKG5ldyBDb2x1bW5bXXsgY29sIH0p\nOwogICAgICAgICAgICBmaWVsZC5zZXRDb2x1bW5JTyh2aW5mby5nZXRDb2x1\nbW5JTygpKTsKICAgICAgICB9CgogICAgICAgIGZpZWxkLm1hcFByaW1hcnlL\nZXkoYWRhcHQpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUo\nKSB7CiAgICAgICAgQ29sdW1uW10gY29scyA9IGZpZWxkLmdldENvbHVtbnMo\nKTsKICAgICAgICBpZiAoY29scy5sZW5ndGggIT0gMSkKICAgICAgICAgICAg\nX3N5bnRoZXRpYyA9IGZhbHNlOwogICAgICAgIGVsc2UgewogICAgICAgICAg\nICAvLyBkbyBhbnkgb2YgdGhlIGVtYmVkZGVkIGZpZWxkIG1hcHBpbmdzIHVz\nZSB0aGlzIGNvbHVtbj8KICAgICAgICAgICAgLy8gaWYgbm90LCBjb25zaWRl\nciBpdCBzeW50aGV0aWMKICAgICAgICAgICAgQ29sdW1uIGNvbCA9IGNvbHNb\nMF07CiAgICAgICAgICAgIGJvb2xlYW4gZm91bmQgPSBmYWxzZTsKICAgICAg\nICAgICAgRmllbGRNYXBwaW5nW10gZmllbGRzID0gZmllbGQuZ2V0RW1iZWRk\nZWRNYXBwaW5nKCkuCiAgICAgICAgICAgICAgICBnZXRGaWVsZE1hcHBpbmdz\nKCk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyAhZm91bmQgJiYgaSA8\nIGZpZWxkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29scyA9\nIGZpZWxkc1tpXS5nZXRDb2x1bW5zKCk7CiAgICAgICAgICAgICAgICBmb3Ig\nKGludCBqID0gMDsgaiA8IGNvbHMubGVuZ3RoOyBqKyspCiAgICAgICAgICAg\nICAgICAgICAgaWYgKGNvbHNbal0uZXF1YWxzKGNvbCkpCiAgICAgICAgICAg\nICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBfc3ludGhldGljID0gIWZvdW5kOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBpbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFJvdyByb3cgPSBmaWVsZC5n\nZXRSb3coc20sIHN0b3JlLCBybSwgUm93LkFDVElPTl9JTlNFUlQpOwogICAg\nICAgIGlmIChyb3cgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoKICAg\nICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIGVtID0gc3RvcmUuZ2V0Q29udGV4\ndCgpLmdldFN0YXRlTWFuYWdlcgogICAgICAgICAgICAoc20uZmV0Y2hPYmpl\nY3QoZmllbGQuZ2V0SW5kZXgoKSkpOwogICAgICAgIGluc2VydChzbSwgZW0s\nIHN0b3JlLCBybSwgcm93KTsKICAgIH0KCiAgICAvKioKICAgICAqIEluc2Vy\ndCBhbiBlbWJlZGRlZCBvYmplY3QuCiAgICAgKgogICAgICogQHBhcmFtIG93\nbmVyIHRoZSBvd25pbmcgc3RhdGUgbWFuYWdlcgogICAgICogQHBhcmFtIHNt\nIHRoZSBlbWJlZGRlZCBzdGF0ZSBtYW5hZ2VyLCBvciBudWxsIGlmIHRoZSB2\nYWx1ZSBpcyBudWxsCiAgICAgKiBAcGFyYW0gcm0gdGhlIHJvdyBtYW5hZ2Vy\nCiAgICAgKiBAcGFyYW0gcm93IGV4cGVjdGVkIHJvdyBmb3IgdGhpcyBlbWJl\nZGRlZCB2YWx1ZQogICAgICovCiAgICBwdWJsaWMgdm9pZCBpbnNlcnQoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBvd25lciwgT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwKICAgICAgICBKREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0sIFJv\ndyByb3cpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nT3BlbkpQQVN0YXRlTWFuYWdlciBlbSA9IHNtOwogICAgICAgIGlmIChlbSA9\nPSBudWxsKQogICAgICAgICAgICBlbSA9IG5ldyBOdWxsRW1iZWRkZWRTdGF0\nZU1hbmFnZXIob3duZXIsIGZpZWxkKTsKICAgICAgICBybSA9IG5ldyBFbWJl\nZGRlZFJvd01hbmFnZXIocm0sIHJvdyk7CiAgICAgICAgRmllbGRNYXBwaW5n\nW10gZmllbGRzID0gZmllbGQuZ2V0RW1iZWRkZWRNYXBwaW5nKCkuZ2V0Rmll\nbGRNYXBwaW5ncygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmll\nbGRzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoIUJvb2xlYW4uVFJV\nRS5lcXVhbHMoZmllbGRzW2ldLmlzQ3VzdG9tSW5zZXJ0KGVtLCBzdG9yZSkp\nKQogICAgICAgICAgICAgICAgaWYgKCFmaWVsZHNbaV0uaXNQcmltYXJ5S2V5\nKCkpCiAgICAgICAgICAgICAgICAgICAgZmllbGRzW2ldLmluc2VydChlbSwg\nc3RvcmUsIHJtKTsKCiAgICAgICAgaWYgKGZpZWxkLmdldENvbHVtbklPKCku\naXNJbnNlcnRhYmxlKDAsIHRydWUpKQogICAgICAgICAgICBzZXROdWxsSW5k\naWNhdG9yQ29sdW1uKHNtLCByb3cpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3Rv\ncmUsIFJvd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBlbSA9IHN0b3JlLmdl\ndENvbnRleHQoKS5nZXRTdGF0ZU1hbmFnZXIKICAgICAgICAgICAgKHNtLmZl\ndGNoT2JqZWN0KGZpZWxkLmdldEluZGV4KCkpKTsKICAgICAgICBib29sZWFu\nIG5ld1ZhbCA9IGVtID09IG51bGwgfHwgZW0uZ2V0UENTdGF0ZSgpID09IFBD\nU3RhdGUuRUNPUFk7CgogICAgICAgIFJvdyByb3cgPSBudWxsOwogICAgICAg\nIGlmIChuZXdWYWwgJiYgZmllbGQuZ2V0Sm9pbkZvcmVpZ25LZXkoKSAhPSBu\ndWxsCiAgICAgICAgICAgICYmIGZpZWxkLmlzSm9pbk91dGVyKCkpIHsKICAg\nICAgICAgICAgLy8gaWYgb3VyIHJlY29yZCBpcyBpbiBhbiBvdXRlci1qb2lu\nZWQgcmVsYXRlZCB0YWJsZSBhbmQgd2UncmUgbm90CiAgICAgICAgICAgIC8v\nIHVwZGF0aW5nIGFuIGV4aXN0aW5nIHZhbHVlLCBkZWxldGUgdGhlIG9sZCBv\nbmUKICAgICAgICAgICAgUm93IGRlbCA9IHJtLmdldFJvdyhmaWVsZC5nZXRU\nYWJsZSgpLCBSb3cuQUNUSU9OX0RFTEVURSwgc20sIHRydWUpOwogICAgICAg\nICAgICBkZWwud2hlcmVGb3JlaWduS2V5KGZpZWxkLmdldEpvaW5Gb3JlaWdu\nS2V5KCksIHNtKTsKICAgICAgICAgICAgZGVsZXRlKHNtLCBudWxsLCBzdG9y\nZSwgcm0sIGRlbCk7CgogICAgICAgICAgICAvLyBpbnNlcnQgdGhlIG5ldyB2\nYWx1ZQogICAgICAgICAgICByb3cgPSBybS5nZXRSb3coZmllbGQuZ2V0VGFi\nbGUoKSwgUm93LkFDVElPTl9JTlNFUlQsIHNtLAogICAgICAgICAgICAgICAg\nZW0gIT0gbnVsbCk7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICAgIHJvdyA9\nIHJtLmdldFJvdyhmaWVsZC5nZXRUYWJsZSgpLCBSb3cuQUNUSU9OX1VQREFU\nRSwgc20sIHRydWUpOwogICAgICAgIGlmIChyb3cgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuOwoKICAgICAgICBpZiAocm93LmdldEFjdGlvbigpID09\nIFJvdy5BQ1RJT05fSU5TRVJUKQogICAgICAgICAgICBpbnNlcnQoc20sIGVt\nLCBzdG9yZSwgcm0sIHJvdyk7CiAgICAgICAgZWxzZQogICAgICAgICAgICB1\ncGRhdGUoc20sIGVtLCBzdG9yZSwgcm0sIHJvdyk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBVcGRhdGUgYW4gZW1iZWRkZWQgb2JqZWN0LgogICAgICoKICAg\nICAqIEBwYXJhbSBvd25lciB0aGUgb3duaW5nIHN0YXRlIG1hbmFnZXIKICAg\nICAqIEBwYXJhbSBzbSB0aGUgZW1iZWRkZWQgc3RhdGUgbWFuYWdlciwgb3Ig\nbnVsbCBpZiB0aGUgdmFsdWUgaXMgbnVsbAogICAgICogQHBhcmFtIHJtIHRo\nZSByb3cgbWFuYWdlcgogICAgICogQHBhcmFtIHJvdyBleHBlY3RlZCByb3cg\nZm9yIHRoaXMgZW1iZWRkZWQgdmFsdWUKICAgICAqLwogICAgcHVibGljIHZv\naWQgdXBkYXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgb3duZXIsIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBSb3dN\nYW5hZ2VyIHJtLCBSb3cgcm93KQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZW0gPSBzbTsKICAg\nICAgICBpZiAoZW0gPT0gbnVsbCkKICAgICAgICAgICAgZW0gPSBuZXcgTnVs\nbEVtYmVkZGVkU3RhdGVNYW5hZ2VyKG93bmVyLCBmaWVsZCk7CiAgICAgICAg\ncm0gPSBuZXcgRW1iZWRkZWRSb3dNYW5hZ2VyKHJtLCByb3cpOwogICAgICAg\nIEZpZWxkTWFwcGluZ1tdIGZpZWxkcyA9IGZpZWxkLmdldEVtYmVkZGVkTWFw\ncGluZygpLmdldEZpZWxkTWFwcGluZ3MoKTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYg\nKGVtLmdldERpcnR5KCkuZ2V0KGkpCiAgICAgICAgICAgICAgICAmJiAhZW0u\nZ2V0Rmx1c2hlZCgpLmdldChpKQogICAgICAgICAgICAgICAgJiYgIUJvb2xl\nYW4uVFJVRS5lcXVhbHMoZmllbGRzW2ldLmlzQ3VzdG9tVXBkYXRlKGVtLCBz\ndG9yZSkpKQogICAgICAgICAgICAgICAgZmllbGRzW2ldLnVwZGF0ZShlbSwg\nc3RvcmUsIHJtKTsKCiAgICAgICAgaWYgKGZpZWxkLmdldENvbHVtbklPKCku\naXNVcGRhdGFibGUoMCwgdHJ1ZSkpCiAgICAgICAgICAgIHNldE51bGxJbmRp\nY2F0b3JDb2x1bW4oc20sIHJvdyk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nZGVsZXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9y\nZSwgUm93TWFuYWdlciBybSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIGVtID0gbnVsbDsKICAg\nICAgICBpZiAoc20uZ2V0TG9hZGVkKCkuZ2V0KGZpZWxkLmdldEluZGV4KCkp\nKQogICAgICAgICAgICBlbSA9IHN0b3JlLmdldENvbnRleHQoKS5nZXRTdGF0\nZU1hbmFnZXIoc20uZmV0Y2hPYmplY3QKICAgICAgICAgICAgICAgIChmaWVs\nZC5nZXRJbmRleCgpKSk7CiAgICAgICAgUm93IHJvdyA9IGZpZWxkLmdldFJv\ndyhzbSwgc3RvcmUsIHJtLCBSb3cuQUNUSU9OX0RFTEVURSk7CiAgICAgICAg\nZGVsZXRlKHNtLCBlbSwgc3RvcmUsIHJtLCByb3cpOwogICAgfQoKICAgIC8q\nKgogICAgICogRGVsZXRlIGFuIGVtYmVkZGVkIG9iamVjdCByZWNvcmQuCiAg\nICAgKgogICAgICogQHBhcmFtIG93bmVyIHRoZSBvd25pbmcgc3RhdGUgbWFu\nYWdlcgogICAgICogQHBhcmFtIHNtIHRoZSBlbWJlZGRlZCBzdGF0ZSBtYW5h\nZ2VyLCBvciBudWxsIGlmIG5vdCBrbm93bgogICAgICogQHBhcmFtIHJtIHRo\nZSByb3cgbWFuYWdlcgogICAgICogQHBhcmFtIHJvdyBleHBlY3RlZCByb3cg\nZm9yIHRoaXMgZW1iZWRkZWQgdmFsdWUKICAgICAqLwogICAgcHVibGljIHZv\naWQgZGVsZXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgb3duZXIsIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBSb3dN\nYW5hZ2VyIHJtLCBSb3cgcm93KQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIHJtID0gbmV3IEVtYmVkZGVkUm93TWFuYWdlcihybSwg\ncm93KTsKICAgICAgICBpZiAoc20gPT0gbnVsbCkKICAgICAgICAgICAgc20g\nPSBuZXcgTnVsbEVtYmVkZGVkU3RhdGVNYW5hZ2VyKG93bmVyLCBmaWVsZCk7\nCiAgICAgICAgRmllbGRNYXBwaW5nW10gZmllbGRzID0gZmllbGQuZ2V0RW1i\nZWRkZWRNYXBwaW5nKCkuZ2V0RmllbGRNYXBwaW5ncygpOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKQogICAgICAg\nICAgICBpZiAoIUJvb2xlYW4uVFJVRS5lcXVhbHMoZmllbGRzW2ldLmlzQ3Vz\ndG9tRGVsZXRlKHNtLCBzdG9yZSkpKQogICAgICAgICAgICAgICAgZmllbGRz\nW2ldLmRlbGV0ZShzbSwgc3RvcmUsIHJtKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFNldCB0aGUgcHJvcGVyIG51bGwgaW5kaWNhdG9yIHZhbHVlIGludG8g\ndGhlIGdpdmVuIHJvdy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHNldE51\nbGxJbmRpY2F0b3JDb2x1bW4oT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgUm93\nIHJvdykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBp\nZiAoIV9zeW50aGV0aWMpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAg\nQ29sdW1uIGNvbCA9IGZpZWxkLmdldENvbHVtbnMoKVswXTsKICAgICAgICBP\nYmplY3QgdmFsID0gKChFbWJlZGRlZENsYXNzU3RyYXRlZ3kpIGZpZWxkLmdl\ndEVtYmVkZGVkTWFwcGluZygpLgogICAgICAgICAgICBnZXRTdHJhdGVneSgp\nKS5nZXROdWxsSW5kaWNhdG9yVmFsdWUoc20pOwogICAgICAgIGlmICh2YWwg\nPT0gbnVsbCkKICAgICAgICAgICAgcm93LnNldE51bGwoY29sLCB0cnVlKTsK\nICAgICAgICBlbHNlCiAgICAgICAgICAgIHJvdy5zZXRPYmplY3QoY29sLCB2\nYWwpOwogICAgfQoKICAgIHB1YmxpYyBCb29sZWFuIGlzQ3VzdG9tSW5zZXJ0\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewog\nICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZW0gPSBzbS5nZXRDb250ZXh0\nKCkuZ2V0U3RhdGVNYW5hZ2VyKHNtLmZldGNoT2JqZWN0CiAgICAgICAgICAg\nIChmaWVsZC5nZXRJbmRleCgpKSk7CiAgICAgICAgQm9vbGVhbiBjdXN0b20g\nPSBpc0N1c3RvbShJTlNFUlQsIHNtLCBlbSwgc3RvcmUpOwogICAgICAgIGlm\nIChCb29sZWFuLlRSVUUuZXF1YWxzKGN1c3RvbSkgJiYgX3N5bnRoZXRpYykK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIGN1c3Rv\nbTsKICAgIH0KCiAgICBwdWJsaWMgQm9vbGVhbiBpc0N1c3RvbVVwZGF0ZShP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpIHsKICAg\nICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIGVtID0gc20uZ2V0Q29udGV4dCgp\nLmdldFN0YXRlTWFuYWdlcihzbS5mZXRjaE9iamVjdAogICAgICAgICAgICAo\nZmllbGQuZ2V0SW5kZXgoKSkpOwogICAgICAgIEJvb2xlYW4gY3VzdG9tID0g\naXNDdXN0b20oVVBEQVRFLCBzbSwgZW0sIHN0b3JlKTsKICAgICAgICBpZiAo\nQm9vbGVhbi5UUlVFLmVxdWFscyhjdXN0b20pICYmIF9zeW50aGV0aWMpCiAg\nICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiBjdXN0b207\nCiAgICB9CgogICAgcHVibGljIEJvb2xlYW4gaXNDdXN0b21EZWxldGUoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAg\nICAgT3BlbkpQQVN0YXRlTWFuYWdlciBlbSA9IHNtLmdldENvbnRleHQoKS5n\nZXRTdGF0ZU1hbmFnZXIoc20uZmV0Y2hPYmplY3QKICAgICAgICAgICAgKGZp\nZWxkLmdldEluZGV4KCkpKTsKICAgICAgICByZXR1cm4gaXNDdXN0b20oREVM\nRVRFLCBzbSwgZW0sIHN0b3JlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB3aGV0aGVyIHRoZSBnaXZlbiBhY3Rpb24gcmVxdWlyZXMgY3VzdG9t\nIGhhbmRsaW5nIGZvciBhbnkgZmllbGRzLgogICAgICovCiAgICBwcml2YXRl\nIEJvb2xlYW4gaXNDdXN0b20oaW50IGFjdGlvbiwgT3BlbkpQQVN0YXRlTWFu\nYWdlciBvd25lciwKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBK\nREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICBpZiAoc20gPT0gbnVsbCkKICAg\nICAgICAgICAgc20gPSBuZXcgTnVsbEVtYmVkZGVkU3RhdGVNYW5hZ2VyKG93\nbmVyLCBmaWVsZCk7CiAgICAgICAgYm9vbGVhbiBoYXNDdXN0b20gPSBmYWxz\nZTsKICAgICAgICBib29sZWFuIGhhc1N0ZCA9IGZhbHNlOwoKICAgICAgICBG\naWVsZE1hcHBpbmdbXSBmaWVsZHMgPSBmaWVsZC5nZXRFbWJlZGRlZE1hcHBp\nbmcoKS5nZXRGaWVsZE1hcHBpbmdzKCk7CiAgICAgICAgQm9vbGVhbiBjdXN0\nb20gPSBudWxsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGRz\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7\nCiAgICAgICAgICAgICAgICBjYXNlIElOU0VSVDoKICAgICAgICAgICAgICAg\nICAgICBjdXN0b20gPSBmaWVsZHNbaV0uaXNDdXN0b21JbnNlcnQoc20sIHN0\nb3JlKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nICAgIGNhc2UgVVBEQVRFOgogICAgICAgICAgICAgICAgICAgIGN1c3RvbSA9\nIGZpZWxkc1tpXS5pc0N1c3RvbVVwZGF0ZShzbSwgc3RvcmUpOwogICAgICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBERUxF\nVEU6CiAgICAgICAgICAgICAgICAgICAgY3VzdG9tID0gZmllbGRzW2ldLmlz\nQ3VzdG9tRGVsZXRlKHNtLCBzdG9yZSk7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghQm9vbGVh\nbi5GQUxTRS5lcXVhbHMoY3VzdG9tKSkKICAgICAgICAgICAgICAgIGhhc0N1\nc3RvbSA9IHRydWU7CiAgICAgICAgICAgIGlmICghQm9vbGVhbi5UUlVFLmVx\ndWFscyhjdXN0b20pKQogICAgICAgICAgICAgICAgaGFzU3RkID0gdHJ1ZTsK\nICAgICAgICB9CgogICAgICAgIGlmIChoYXNDdXN0b20gJiYgaGFzU3RkKQog\nICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gKGhhc0N1\nc3RvbSkgPyBCb29sZWFuLlRSVUUgOiBCb29sZWFuLkZBTFNFOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGN1c3RvbUluc2VydChPcGVuSlBBU3RhdGVNYW5h\nZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBlbSA9IHN0\nb3JlLmdldENvbnRleHQoKS5nZXRTdGF0ZU1hbmFnZXIKICAgICAgICAgICAg\nKHNtLmZldGNoT2JqZWN0KGZpZWxkLmdldEluZGV4KCkpKTsKICAgICAgICBp\nZiAoZW0gPT0gbnVsbCkKICAgICAgICAgICAgZW0gPSBuZXcgTnVsbEVtYmVk\nZGVkU3RhdGVNYW5hZ2VyKHNtLCBmaWVsZCk7CiAgICAgICAgRmllbGRNYXBw\naW5nW10gZmllbGRzID0gZmllbGQuZ2V0RW1iZWRkZWRNYXBwaW5nKCkuZ2V0\nRmllbGRNYXBwaW5ncygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nZmllbGRzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoIUJvb2xlYW4u\nRkFMU0UuZXF1YWxzKGZpZWxkc1tpXS5pc0N1c3RvbUluc2VydChlbSwgc3Rv\ncmUpKSkKICAgICAgICAgICAgICAgIGZpZWxkc1tpXS5jdXN0b21JbnNlcnQo\nZW0sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjdXN0b21VcGRh\ndGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgZW0gPSBzdG9yZS5nZXRDb250ZXh0KCkuZ2V0U3RhdGVN\nYW5hZ2VyCiAgICAgICAgICAgIChzbS5mZXRjaE9iamVjdChmaWVsZC5nZXRJ\nbmRleCgpKSk7CiAgICAgICAgaWYgKGVtID09IG51bGwpCiAgICAgICAgICAg\nIGVtID0gbmV3IE51bGxFbWJlZGRlZFN0YXRlTWFuYWdlcihzbSwgZmllbGQp\nOwogICAgICAgIEZpZWxkTWFwcGluZ1tdIGZpZWxkcyA9IGZpZWxkLmdldEVt\nYmVkZGVkTWFwcGluZygpLmdldEZpZWxkTWFwcGluZ3MoKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykKICAgICAg\nICAgICAgaWYgKGVtLmdldERpcnR5KCkuZ2V0KGkpCiAgICAgICAgICAgICAg\nICAmJiAhZW0uZ2V0Rmx1c2hlZCgpLmdldChpKQogICAgICAgICAgICAgICAg\nJiYgIUJvb2xlYW4uRkFMU0UuZXF1YWxzKGZpZWxkc1tpXS5pc0N1c3RvbVVw\nZGF0ZShlbSwgc3RvcmUpKSkKICAgICAgICAgICAgICAgIGZpZWxkc1tpXS5j\ndXN0b21VcGRhdGUoZW0sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBjdXN0b21EZWxldGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0\nb3JlIHN0b3JlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZW0gPSBzdG9yZS5nZXRDb250ZXh0\nKCkuZ2V0U3RhdGVNYW5hZ2VyCiAgICAgICAgICAgIChzbS5mZXRjaE9iamVj\ndChmaWVsZC5nZXRJbmRleCgpKSk7CiAgICAgICAgaWYgKGVtID09IG51bGwp\nCiAgICAgICAgICAgIGVtID0gbmV3IE51bGxFbWJlZGRlZFN0YXRlTWFuYWdl\ncihzbSwgZmllbGQpOwogICAgICAgIEZpZWxkTWFwcGluZ1tdIGZpZWxkcyA9\nIGZpZWxkLmdldEVtYmVkZGVkTWFwcGluZygpLmdldEZpZWxkTWFwcGluZ3Mo\nKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7\nIGkrKykKICAgICAgICAgICAgaWYgKCFCb29sZWFuLkZBTFNFLmVxdWFscyhm\naWVsZHNbaV0uaXNDdXN0b21EZWxldGUoZW0sIHN0b3JlKSkpCiAgICAgICAg\nICAgICAgICBmaWVsZHNbaV0uY3VzdG9tRGVsZXRlKGVtLCBzdG9yZSk7CiAg\nICB9CgogICAgcHVibGljIGludCBzdXBwb3J0c1NlbGVjdChTZWxlY3Qgc2Vs\nLCBpbnQgdHlwZSwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICBK\nREJDU3RvcmUgc3RvcmUsIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gp\nIHsKICAgICAgICBpZiAodHlwZSA9PSBTZWxlY3QuVFlQRV9KT0lOTEVTUyAm\nJiBzZWwuaXNTZWxlY3RlZChmaWVsZC5nZXRUYWJsZSgpKSkKICAgICAgICAg\nICAgcmV0dXJuIDE7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgcHVi\nbGljIGludCBzZWxlY3QoU2VsZWN0IHNlbCwgT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwgSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENvbmZp\nZ3VyYXRpb24gZmV0Y2gsIGludCBlYWdlck1vZGUpIHsKICAgICAgICBKb2lu\ncyBqb2lucyA9IGZpZWxkLmpvaW4oc2VsKTsKICAgICAgICBzZWwuc2VsZWN0\nKGZpZWxkLmdldENvbHVtbnMoKSwgam9pbnMpOyAvLyBudWxsIGluZGljYXRv\ncgoKICAgICAgICAvLyBsaW1pdCBlYWdlciBtb2RlIHRvIGpvaW4gYi9jIGF0\nIHRoaXMgcG9pbnQgdGhlIHNlbGVjdCBoYXMgYmVlbgogICAgICAgIC8vIG1v\nZGlmaWVkIGFuZCBhbiBhdHRlbXB0IHRvIGNsb25lIGl0IGZvciBhIHRvLW1h\nbnkgZWFnZXIgc2VsZWN0IGNhbgogICAgICAgIC8vIHJlc3VsdCBpbiBhIGNs\nb25lIHRoYXQgcHJvZHVjZXMgaW52YWxpZCBTUUwKICAgICAgICBlYWdlck1v\nZGUgPSBNYXRoLm1pbihlYWdlck1vZGUsIEpEQkNGZXRjaENvbmZpZ3VyYXRp\nb24uRUFHRVJfSk9JTik7CiAgICAgICAgc2VsLnNlbGVjdChmaWVsZC5nZXRF\nbWJlZGRlZE1hcHBpbmcoKSwgc2VsLlNVQlNfRVhBQ1QsIHN0b3JlLAogICAg\nICAgICAgICBmZXRjaCwgZWFnZXJNb2RlLCBqb2lucyk7CiAgICAgICAgcmV0\ndXJuIDE7CiAgICB9CgogICAgcHVibGljIHZvaWQgbG9hZChPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsCiAgICAgICAgSkRCQ0Zl\ndGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgUmVzdWx0IHJlcykKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBCb29sZWFuIGlzTnVsbCA9\nIGluZGljYXRlc051bGwocmVzKTsKICAgICAgICBpZiAoaXNOdWxsID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgaWYgKEJvb2xlYW4u\nVFJVRS5lcXVhbHMoaXNOdWxsKSkgewogICAgICAgICAgICBzbS5zdG9yZU9i\namVjdChmaWVsZC5nZXRJbmRleCgpLCBudWxsKTsKICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgIH0KCiAgICAgICAgLy8jIyMgbm90ZTogd2l0aG91dCBh\nIG51bGwgaW5kaWNhdG9yIGNvbHVtbiwgdGhlIGFib3ZlIGluZGljYXRlc051\nbGwoKQogICAgICAgIC8vIyMjIGNhbGwgd2lsbCBhbHdheXMgcmV0dXJuIGZh\nbHNlLCBtZWFuaW5nIHdlIGFsd2F5cyBoYXZlIHRvIGFzc3VtZQogICAgICAg\nIC8vIyMjIHdlIHNlbGVjdGVkIHRoZSBlbWJlZGRlZCBvYmplY3QgZmllbGRz\nIGFuZCBsb2FkIHRoZSBvYmplY3QKICAgICAgICAvLyMjIyBpbW1lZGlhdGVs\neTsgdGhpcyB3aWxsIGJlIGluZWZmaWNpZW50IHdoZW4gdGhlIGVtYmVkZGVk\nIG9iamVjdAogICAgICAgIC8vIyMjIHdhcyBub3Qgc2VsZWN0ZWQgYWZ0ZXIg\nYWxsCiAgICAgICAgU3RvcmVDb250ZXh0IGN0eCA9IHN0b3JlLmdldENvbnRl\neHQoKTsKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIGVtID0gY3R4LmVt\nYmVkKG51bGwsIG51bGwsIHNtLCBmaWVsZCk7CiAgICAgICAgc20uc3RvcmVP\nYmplY3QoZmllbGQuZ2V0SW5kZXgoKSwgZW0uZ2V0TWFuYWdlZEluc3RhbmNl\nKCkpOwoKICAgICAgICBGaWVsZE1hcHBpbmdbXSBmaWVsZHMgPSBmaWVsZC5n\nZXRFbWJlZGRlZE1hcHBpbmcoKS5nZXRGaWVsZE1hcHBpbmdzKCk7CiAgICAg\nICAgT2JqZWN0IGVyZXMsIHByb2Nlc3NlZDsKICAgICAgICBib29sZWFuIG5l\nZWRzTG9hZCA9IGZhbHNlOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nZmllbGRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGVyZXMgPSByZXMu\nZ2V0RWFnZXIoZmllbGRzW2ldKTsKICAgICAgICAgICAgcmVzLnN0YXJ0RGF0\nYVJlcXVlc3QoZmllbGRzW2ldKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgIGlmIChlcmVzID09IHJlcykKICAgICAgICAgICAgICAgICAg\nICBmaWVsZHNbaV0ubG9hZEVhZ2VySm9pbihlbSwgc3RvcmUsIGZldGNoLCBy\nZXMpOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJlcyAhPSBudWxsKSB7\nCiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0KICAgICAgICAgICAg\nICAgICAgICAgICAgZmllbGRzW2ldLmxvYWRFYWdlclBhcmFsbGVsKGVtLCBz\ndG9yZSwgZmV0Y2gsIGVyZXMpOwogICAgICAgICAgICAgICAgICAgIGlmIChw\ncm9jZXNzZWQgIT0gZXJlcykKICAgICAgICAgICAgICAgICAgICAgICAgcmVz\nLnB1dEVhZ2VyKGZpZWxkc1tpXSwgcHJvY2Vzc2VkKTsKICAgICAgICAgICAg\nICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZmllbGRzW2ldLmxv\nYWQoZW0sIHN0b3JlLCBmZXRjaCwgcmVzKTsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgIG5lZWRzTG9hZCA9IG5lZWRzTG9hZCB8fCAoIWVt\nLmdldExvYWRlZCgpLmdldChpKSAmJiAKICAgICAgICAgICAgICAgICAgICBm\nZXRjaC5yZXF1aXJlc0ZldGNoKGZpZWxkc1tpXSkKICAgICAgICAgICAgICAg\nICAgICAgICAgPT0gRmV0Y2hDb25maWd1cmF0aW9uLkZFVENIX0xPQUQpOwog\nICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgcmVzLmVu\nZERhdGFSZXF1ZXN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAg\nICAgIC8vIEFmdGVyIGxvYWRpbmcgZXZlcnl0aGluZyBmcm9tIHJlc3VsdCwg\nbG9hZCB0aGUgcmVzdCBvZiB0aGUKICAgICAgICAvLyBjb25maWd1cmVkIGZp\nZWxkcyBpZiBhbnl0aGluZyBpcyBtaXNzaW5nLgogICAgICAgIGlmIChuZWVk\nc0xvYWQgJiYgCiAgICAgICAgICAgIGZldGNoLnJlcXVpcmVzRmV0Y2goZmll\nbGQuZ2V0RmllbGRNZXRhRGF0YSgpKSA9PSAKICAgICAgICAgICAgICAgIEpE\nQkNGZXRjaENvbmZpZ3VyYXRpb24uRkVUQ0hfTE9BRCkgewogICAgICAgICAg\nZW0ubG9hZChmZXRjaCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHdoZXRoZXIgdGhlIGdpdmVuIHJlc3VsdCBpbmRpY2F0ZXMg\ndGhhdCB0aGUgZW1iZWRkZWQgdmFsdWUgaXMKICAgICAqIG51bGwuCiAgICAg\nKgogICAgICogQHJldHVybiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBpZiB0aGUg\ndmFsdWUgaXMgbnVsbCwge0BsaW5rIEJvb2xlYW4jRkFMU0V9CiAgICAgKiBp\nZiBpdCBpcyBub3QsIG9yIDxjb2RlPm51bGw8L2NvZGU+IGlmIHRoZSByZXN1\nbHQgZG9lcyBub3QKICAgICAqIGNvbnRhaW4gdGhlIGVtYmVkZGVkIHZhbHVl\nCiAgICAgKi8KICAgIHByaXZhdGUgQm9vbGVhbiBpbmRpY2F0ZXNOdWxsKFJl\nc3VsdCByZXMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgQ29sdW1uW10gY29scyA9IGZpZWxkLmdldENvbHVtbnMoKTsKICAgICAg\nICBpZiAoY29scy5sZW5ndGggIT0gMSkKICAgICAgICAgICAgcmV0dXJuIEJv\nb2xlYW4uRkFMU0U7CiAgICAgICAgaWYgKCFyZXMuY29udGFpbnMoY29sc1sw\nXSkpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBPYmplY3Qg\nb2JqID0gcmVzLmdldE9iamVjdChjb2xzWzBdLCAtMSwgKE9iamVjdCkgbnVs\nbCk7CiAgICAgICAgaWYgKCgoRW1iZWRkZWRDbGFzc1N0cmF0ZWd5KSBmaWVs\nZC5nZXRFbWJlZGRlZE1hcHBpbmcoKS5nZXRTdHJhdGVneSgpKS4KICAgICAg\nICAgICAgaW5kaWNhdGVzTnVsbChvYmopKQogICAgICAgICAgICByZXR1cm4g\nQm9vbGVhbi5UUlVFOwogICAgICAgIHJldHVybiBCb29sZWFuLkZBTFNFOwog\nICAgfQoKICAgIHB1YmxpYyBPYmplY3QgdG9EYXRhU3RvcmVWYWx1ZShPYmpl\nY3QgdmFsLCBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICBDbGFzc01hcHBp\nbmcgdHlwZSA9IGZpZWxkLmdldFR5cGVNYXBwaW5nKCk7CiAgICAgICAgcmV0\ndXJuIHR5cGUudG9EYXRhU3RvcmVWYWx1ZSh2YWwsIHR5cGUuZ2V0UHJpbWFy\neUtleUNvbHVtbnMoKSwgc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGFwcGVuZElzTnVsbChTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2VsLCBKb2lu\ncyBqb2lucykgewogICAgICAgIGFwcGVuZFRlc3ROdWxsKHNxbCwgc2VsLCBq\nb2lucywgdHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kSXNO\nb3ROdWxsKFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWwsIEpvaW5zIGpvaW5z\nKSB7CiAgICAgICAgYXBwZW5kVGVzdE51bGwoc3FsLCBzZWwsIGpvaW5zLCBm\nYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBcHBlbmQgU1FMIHRvIHRl\nc3Qgd2hldGhlciB0aGUgZW1iZWRkZWQgb2JqZWN0IGlzIG51bGwuCiAgICAg\nKi8KICAgIHByaXZhdGUgdm9pZCBhcHBlbmRUZXN0TnVsbChTUUxCdWZmZXIg\nc3FsLCBTZWxlY3Qgc2VsLCBKb2lucyBqb2lucywKICAgICAgICBib29sZWFu\nIGlzTnVsbCkgewogICAgICAgIENvbHVtbltdIGNvbHMgPSBmaWVsZC5nZXRD\nb2x1bW5zKCk7CiAgICAgICAgaWYgKGNvbHMubGVuZ3RoICE9IDEpIHsKICAg\nICAgICAgICAgaWYgKGlzTnVsbCkKICAgICAgICAgICAgICAgIHNxbC5hcHBl\nbmQoIjEgPD4gMSIpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAg\nICBzcWwuYXBwZW5kKCIxID0gMSIpOwogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgfQoKICAgICAgICBPYmplY3QgdmFsOwogICAgICAgIGlmIChjb2xz\nWzBdLmlzTm90TnVsbCgpKSB7CiAgICAgICAgICAgIGlmIChfc3ludGhldGlj\nIHx8IGNvbHNbMF0uZ2V0RGVmYXVsdFN0cmluZygpID09IG51bGwpCiAgICAg\nICAgICAgICAgICB2YWwgPSBKYXZhU1FMVHlwZXMuZ2V0RW1wdHlWYWx1ZShj\nb2xzWzBdLmdldEphdmFUeXBlKCkpOwogICAgICAgICAgICBlbHNlCiAgICAg\nICAgICAgICAgICB2YWwgPSBjb2xzWzBdLmdldERlZmF1bHQoKTsKICAgICAg\nICB9IGVsc2UKICAgICAgICAgICAgdmFsID0gbnVsbDsKCiAgICAgICAgam9p\nbnMgPSBqb2luKGpvaW5zLCBmYWxzZSk7CiAgICAgICAgc3FsLmFwcGVuZChz\nZWwuZ2V0Q29sdW1uQWxpYXMoY29sc1swXSwgam9pbnMpKTsKICAgICAgICBp\nZiAoaXNOdWxsICYmIHZhbCA9PSBudWxsKQogICAgICAgICAgICBzcWwuYXBw\nZW5kKCIgSVMgIik7CiAgICAgICAgZWxzZSBpZiAoaXNOdWxsKQogICAgICAg\nICAgICBzcWwuYXBwZW5kKCIgPSAiKTsKICAgICAgICBlbHNlIGlmICh2YWwg\nPT0gbnVsbCkKICAgICAgICAgICAgc3FsLmFwcGVuZCgiIElTIE5PVCAiKTsK\nICAgICAgICBlbHNlCiAgICAgICAgICAgIHNxbC5hcHBlbmQoIiA8PiAiKTsK\nICAgICAgICBzcWwuYXBwZW5kVmFsdWUodmFsLCBjb2xzWzBdKTsKICAgIH0K\nCiAgICBwdWJsaWMgSm9pbnMgam9pbihKb2lucyBqb2lucywgYm9vbGVhbiBm\nb3JjZU91dGVyKSB7CiAgICAgICAgcmV0dXJuIGZpZWxkLmpvaW4oam9pbnMs\nIGZvcmNlT3V0ZXIsIGZhbHNlKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0\nIGxvYWRQcm9qZWN0aW9uKEpEQkNTdG9yZSBzdG9yZSwgSkRCQ0ZldGNoQ29u\nZmlndXJhdGlvbiBmZXRjaCwKICAgICAgICBSZXN1bHQgcmVzLCBKb2lucyBq\nb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICB0\naHJvdyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdldCgiY2FudC1wcm9qZWN0\nLW93bmVkIiwgZmllbGQpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFN0YXRl\nIG1hbmFnZXIgdGhhdCByZXByZXNlbnRzIGEgbnVsbCBlbWJlZGRlZCBvYmpl\nY3QuCiAgICAgKiBVc2VkIHRvIHVwZGF0ZSBlbWJlZGRlZCBmaWVsZHMgd2hl\nbiB0aGUgZW1iZWRkZWQgdmFsdWUgaXMgbnVsbC4gVGhpcwogICAgICogc3Rh\ndGUgbWFuYWdlciBkb2Vzbid0IHJlcXVpcmUgYWNjZXNzIHRvIHRoZSBvbGQg\nZW1iZWRkZWQgdmFsdWUsIGJlY2F1c2UKICAgICAqIGFsbCB1cGRhdGVzIGFy\nZSBmbHVzaGVkIGJlZm9yZSBhbGwgZGVsZXRlcywgc28gYWxsIGZvcmVpZ24g\na2V5cyB3aWxsCiAgICAgKiBiZSBwcm9wZXJseSBudWxsZWQgYmVmb3JlIHRo\nZSByZWxhdGVkIG9iamVjdCBpcyBkZWxldGVkLiBIb3dldmVyLCB0aGlzCiAg\nICAgKiBzdGF0ZSBtYW5hZ2VyIHNob3VsZCBub3QgYmUgdXNlZCBpZiBwb3Nz\naWJsZSB3aGVuIHRoZSBwYXJlbnQgb2JqZWN0IGlzCiAgICAgKiBiZWluZyBk\nZWxldGVkOyBpbiB0aGF0IGNhc2UgaGF2aW5nIHRoZSBvcmlnaW5hbCBlbWJl\nZGRlZCBzdGF0ZSBtYW5hZ2VyCiAgICAgKiBpcyBwcmVmZXJhYmxlIHNvIHRo\nYXQgaXQgY2FuIHNldCBmb3JlaWduIGtleSByZWxhdGlvbnMgdG8gb3JkZXIg\nREVMRVRFCiAgICAgKiBzdGF0ZW1lbnRzIHRvIG1lZXQgY29uc3RyYWludHMu\nCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIE51bGxFbWJlZGRl\nZFN0YXRlTWFuYWdlcgogICAgICAgIGltcGxlbWVudHMgT3BlbkpQQVN0YXRl\nTWFuYWdlciB7CgogICAgICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIEJpdFNl\ndCBFTVBUWV9CSVRTRVQgPSBuZXcgQml0U2V0KCk7CgogICAgICAgIHByaXZh\ndGUgZmluYWwgT3BlbkpQQVN0YXRlTWFuYWdlciBfb3duZXI7CiAgICAgICAg\ncHJpdmF0ZSBmaW5hbCBWYWx1ZU1ldGFEYXRhIF92bWQ7CiAgICAgICAgcHJp\ndmF0ZSBCaXRTZXQgX2Z1bGwgPSBudWxsOwoKICAgICAgICAvKioKICAgICAg\nICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5IHRoZSBvd25lciBvZiB0aGUgbnVs\nbC9kZWxldGVkIGVtYmVkZGVkIHZhbHVlLAogICAgICAgICAqIGFuZCB0aGUg\ndmFsdWUgbWV0YWRhdGEuCiAgICAgICAgICovCiAgICAgICAgcHVibGljIE51\nbGxFbWJlZGRlZFN0YXRlTWFuYWdlcihPcGVuSlBBU3RhdGVNYW5hZ2VyIG93\nbmVyLAogICAgICAgICAgICBWYWx1ZU1ldGFEYXRhIHZtZCkgewogICAgICAg\nICAgICBfb3duZXIgPSBvd25lcjsKICAgICAgICAgICAgX3ZtZCA9IHZtZDsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoQ2xh\nc3MgZm9yVHlwZSwgUENTdGF0ZSBzdGF0ZSkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIGxvYWQoRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gYXNzaWduT2JqZWN0\nSWQoYm9vbGVhbiBmbHVzaCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBP\nYmplY3QgZ2V0TWFuYWdlZEluc3RhbmNlKCkgewogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBQZXJzaXN0ZW5j\nZUNhcGFibGUgZ2V0UGVyc2lzdGVuY2VDYXBhYmxlKCkgewogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBDbGFz\nc01ldGFEYXRhIGdldE1ldGFEYXRhKCkgewogICAgICAgICAgICByZXR1cm4g\nX3ZtZC5nZXRFbWJlZGRlZE1ldGFEYXRhKCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgT3BlbkpQQVN0YXRlTWFuYWdlciBnZXRPd25lcigpIHsKICAg\nICAgICAgICAgcmV0dXJuIF9vd25lcjsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBpbnQgZ2V0T3duZXJJbmRleCgpIHsKICAgICAgICAgICAgcmV0dXJu\nIF92bWQuZ2V0RmllbGRNZXRhRGF0YSgpLmdldEluZGV4KCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc0VtYmVkZGVkKCkgewogICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBib29sZWFuIGlzVHJhbnNhY3Rpb25hbCgpIHsKICAgICAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBp\nc1BlcnNpc3RlbnQoKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNOZXcoKSB7CiAgICAg\nICAgICAgIHJldHVybiBfb3duZXIuaXNOZXcoKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBib29sZWFuIGlzRGVsZXRlZCgpIHsKICAgICAgICAgICAg\ncmV0dXJuIF9vd25lci5pc0RlbGV0ZWQoKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyBib29sZWFuIGlzRGV0YWNoZWQoKSB7CiAgICAgICAgICAgIHJl\ndHVybiBfb3duZXIuaXNEZXRhY2hlZCgpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIGJvb2xlYW4gaXNWZXJzaW9uVXBkYXRlUmVxdWlyZWQoKSB7CiAg\nICAgICAgICAgIHJldHVybiBfb3duZXIuaXNWZXJzaW9uVXBkYXRlUmVxdWly\nZWQoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzVmVy\nc2lvbkNoZWNrUmVxdWlyZWQoKSB7CiAgICAgICAgICAgIHJldHVybiBfb3du\nZXIuaXNWZXJzaW9uQ2hlY2tSZXF1aXJlZCgpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIGJvb2xlYW4gaXNEaXJ0eSgpIHsKICAgICAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBp\nc0ZsdXNoZWQoKSB7CiAgICAgICAgICAgIHJldHVybiBfb3duZXIuaXNGbHVz\naGVkKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc0Zs\ndXNoZWREaXJ0eSgpIHsKICAgICAgICAgICAgcmV0dXJuIGlzRmx1c2hlZCgp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNQcm92aXNp\nb25hbCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9vd25lci5pc1Byb3Zpc2lv\nbmFsKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgQml0U2V0IGdldExv\nYWRlZCgpIHsKICAgICAgICAgICAgLy8gY29uc2lkZXIgZXZlcnl0aGluZyBs\nb2FkZWQKICAgICAgICAgICAgaWYgKF9mdWxsID09IG51bGwpIHsKICAgICAg\nICAgICAgICAgIEZpZWxkTWV0YURhdGFbXSBmbWRzID0gX3ZtZC5nZXRFbWJl\nZGRlZE1ldGFEYXRhKCkuZ2V0RmllbGRzKCk7CiAgICAgICAgICAgICAgICBf\nZnVsbCA9IG5ldyBCaXRTZXQoZm1kcy5sZW5ndGgpOwogICAgICAgICAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmbWRzLmxlbmd0aDsgaSsrKQogICAg\nICAgICAgICAgICAgICAgIF9mdWxsLnNldChpKTsKICAgICAgICAgICAgfQog\nICAgICAgICAgICByZXR1cm4gX2Z1bGw7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgQml0U2V0IGdldERpcnR5KCkgewogICAgICAgICAgICAvLyBjb25z\naWRlciBldmVyeXRoaW5nIGRpcnR5CiAgICAgICAgICAgIGlmIChfZnVsbCA9\nPSBudWxsKSB7CiAgICAgICAgICAgICAgICBGaWVsZE1ldGFEYXRhW10gZm1k\ncyA9IF92bWQuZ2V0RW1iZWRkZWRNZXRhRGF0YSgpLmdldEZpZWxkcygpOwog\nICAgICAgICAgICAgICAgX2Z1bGwgPSBuZXcgQml0U2V0KGZtZHMubGVuZ3Ro\nKTsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZm1kcy5s\nZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgICAgICBfZnVsbC5zZXQoaSk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9mdWxsOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIEJpdFNldCBnZXRGbHVzaGVkKCkgewog\nICAgICAgICAgICByZXR1cm4gRU1QVFlfQklUU0VUOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIEJpdFNldCBnZXRVbmxvYWRlZChGZXRjaENvbmZpZ3Vy\nYXRpb24gZmV0Y2gpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFs\nRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0\nIG5ld1Byb3h5KGludCBmaWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBPYmplY3QgbmV3RmllbGRQcm94eShpbnQgZmllbGQpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc0RlZmF1bHRWYWx1ZShpbnQgZmll\nbGQpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgU3RvcmVDb250ZXh0IGdldENvbnRleHQoKSB7CiAgICAg\nICAgICAgIHJldHVybiBfb3duZXIuZ2V0Q29udGV4dCgpOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIE9iamVjdCBnZXRJZCgpIHsKICAgICAgICAgICAg\ncmV0dXJuIF9vd25lci5nZXRJZCgpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIE9iamVjdCBnZXRPYmplY3RJZCgpIHsKICAgICAgICAgICAgcmV0dXJu\nIF9vd25lci5nZXRPYmplY3RJZCgpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc2V0T2JqZWN0SWQoT2JqZWN0IG9pZCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0TG9jaygpIHsKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXRMb2NrKE9iamVjdCBsb2NrKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIE9iamVjdCBnZXRWZXJzaW9uKCkgewogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldFZlcnNpb24o\nT2JqZWN0IHZlcnNpb24pIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVy\nbmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzZXROZXh0VmVyc2lvbihPYmplY3QgdmVyc2lvbikgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBQQ1N0YXRlIGdldFBDU3RhdGUoKSB7CiAgICAgICAg\nICAgIHJldHVybiAoX293bmVyLmlzRGVsZXRlZCgpKSA/IFBDU3RhdGUuRURF\nTEVURUQgOiBQQ1N0YXRlLkVDT1BZOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIE9iamVjdCBnZXRJbXBsRGF0YSgpIHsKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IHNldElt\ncGxEYXRhKE9iamVjdCBkYXRhLCBib29sZWFuIGNhY2hlYWJsZSkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzSW1wbERhdGFDYWNoZWFi\nbGUoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0SW1wbERhdGEoaW50IGZpZWxkKSB7\nCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIE9iamVjdCBzZXRJbXBsRGF0YShpbnQgZmllbGQsIE9iamVjdCBk\nYXRhKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNJbXBs\nRGF0YUNhY2hlYWJsZShpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIE9iamVjdCBnZXRJ\nbnRlcm1lZGlhdGUoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybiBu\ndWxsOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0SW50ZXJt\nZWRpYXRlKGludCBmaWVsZCwgT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIGJvb2xlYW4gZmV0Y2hCb29sZWFuRmllbGQoaW50IGZp\nZWxkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBieXRlIGZldGNoQnl0ZUZpZWxkKGludCBmaWVsZCkg\newogICAgICAgICAgICByZXR1cm4gKGJ5dGUpIDA7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgY2hhciBmZXRjaENoYXJGaWVsZChpbnQgZmllbGQpIHsK\nICAgICAgICAgICAgcmV0dXJuIChjaGFyKSAwOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIGRvdWJsZSBmZXRjaERvdWJsZUZpZWxkKGludCBmaWVsZCkg\newogICAgICAgICAgICByZXR1cm4gMEQ7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgZmxvYXQgZmV0Y2hGbG9hdEZpZWxkKGludCBmaWVsZCkgewogICAg\nICAgICAgICByZXR1cm4gMEY7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\naW50IGZldGNoSW50RmllbGQoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJl\ndHVybiAwOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGxvbmcgZmV0Y2hM\nb25nRmllbGQoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybiAwTDsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZmV0Y2hPYmplY3RG\naWVsZChpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgc2hvcnQgZmV0Y2hTaG9ydEZpZWxk\nKGludCBmaWVsZCkgewogICAgICAgICAgICByZXR1cm4gKHNob3J0KSAwOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIFN0cmluZyBmZXRjaFN0cmluZ0Zp\nZWxkKGludCBmaWVsZCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZmV0Y2hGaWVsZChpbnQg\nZmllbGQsIGJvb2xlYW4gdHJhbnNpdGlvbnMpIHsKICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9y\nZUJvb2xlYW5GaWVsZChpbnQgZmllbGQsIGJvb2xlYW4gZXh0ZXJuYWxWYWwp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZUJ5dGVGaWVs\nZChpbnQgZmllbGQsIGJ5dGUgZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzdG9yZUNoYXJGaWVsZChpbnQgZmllbGQsIGNo\nYXIgZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVy\nbmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzdG9yZURvdWJsZUZpZWxkKGludCBmaWVsZCwgZG91YmxlIGV4dGVybmFs\nVmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVGbG9h\ndEZpZWxkKGludCBmaWVsZCwgZmxvYXQgZXh0ZXJuYWxWYWwpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZUludEZpZWxkKGludCBmaWVs\nZCwgaW50IGV4dGVybmFsVmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgc3RvcmVMb25nRmllbGQoaW50IGZpZWxkLCBsb25nIGV4dGVybmFs\nVmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVPYmpl\nY3RGaWVsZChpbnQgZmllbGQsIE9iamVjdCBleHRlcm5hbFZhbCkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlU2hvcnRGaWVsZChpbnQg\nZmllbGQsIHNob3J0IGV4dGVybmFsVmFsKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIHZvaWQgc3RvcmVTdHJpbmdGaWVsZChpbnQgZmllbGQsIFN0cmlu\nZyBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIHN0b3JlRmllbGQoaW50IGZpZWxkLCBPYmplY3QgdmFsdWUpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBmZXRjaEJvb2xlYW4oaW50IGZp\nZWxkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBieXRlIGZldGNoQnl0ZShpbnQgZmllbGQpIHsKICAg\nICAgICAgICAgcmV0dXJuIChieXRlKSAwOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIGNoYXIgZmV0Y2hDaGFyKGludCBmaWVsZCkgewogICAgICAgICAg\nICByZXR1cm4gKGNoYXIpIDA7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nZG91YmxlIGZldGNoRG91YmxlKGludCBmaWVsZCkgewogICAgICAgICAgICBy\nZXR1cm4gMEQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgZmxvYXQgZmV0\nY2hGbG9hdChpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIDBGOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGludCBmZXRjaEludChpbnQgZmll\nbGQpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgbG9uZyBmZXRjaExvbmcoaW50IGZpZWxkKSB7CiAgICAgICAg\nICAgIHJldHVybiAwTDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmpl\nY3QgZmV0Y2hPYmplY3QoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVy\nbiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHNob3J0IGZldGNo\nU2hvcnQoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybiAoc2hvcnQp\nIDA7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgU3RyaW5nIGZldGNoU3Ry\naW5nKGludCBmaWVsZCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZmV0Y2goaW50IGZpZWxk\nKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIHZvaWQgc3RvcmVCb29sZWFuKGludCBmaWVsZCwgYm9vbGVh\nbiBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIHN0b3JlQnl0ZShpbnQgZmllbGQsIGJ5dGUgZXh0ZXJuYWxWYWwpIHsKICAg\nICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZUNoYXIoaW50IGZpZWxk\nLCBjaGFyIGV4dGVybmFsVmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgc3RvcmVEb3VibGUoaW50IGZpZWxkLCBkb3VibGUgZXh0ZXJuYWxW\nYWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9u\nKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZUZsb2F0\nKGludCBmaWVsZCwgZmxvYXQgZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzdG9yZUludChpbnQgZmllbGQsIGludCBleHRl\ncm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNl\ncHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHN0b3Jl\nTG9uZyhpbnQgZmllbGQsIGxvbmcgZXh0ZXJuYWxWYWwpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZU9iamVjdChpbnQgZmllbGQsIE9i\namVjdCBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHN0b3JlU2hvcnQoaW50IGZpZWxkLCBzaG9ydCBleHRlcm5hbFZhbCkg\newogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlU3RyaW5nKGlu\ndCBmaWVsZCwgU3RyaW5nIGV4dGVybmFsVmFsKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIHZvaWQgc3RvcmUoaW50IGZpZWxkLCBPYmplY3QgdmFsdWUp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGZldGNoSW5pdGlh\nbEZpZWxkKGludCBmaWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIGRpcnR5KGludCBmaWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHJlbW92ZWQoaW50IGZpZWxkLCBPYmplY3QgcmVtb3ZlZCwgYm9v\nbGVhbiBrZXkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhj\nZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBi\nZWZvcmVSZWZyZXNoKGJvb2xlYW4gcmVmcmVzaEFsbCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHNldFJlbW90ZShpbnQgZmllbGQsIE9iamVj\ndCB2YWx1ZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNl\ncHRpb24oKTsKICAgICAgICB9CgogICAgICAgIC8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBTdGF0ZU1hbmFnZXIgaW1wbGVt\nZW50YXRpb24KICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vCgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0UENQcmltYXJ5S2V5KE9i\namVjdCBvaWQsIGludCBmaWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBTdGF0ZU1hbmFnZXIgcmVwbGFjZVN0YXRlTWFuYWdlcihTdGF0ZU1hbmFn\nZXIgc20pIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGdldEdl\nbmVyaWNDb250ZXh0KCkgewogICAgICAgICAgICByZXR1cm4gZ2V0Q29udGV4\ndCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgZGlydHkoU3Ry\naW5nIGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4\nY2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIE9iamVjdCBm\nZXRjaE9iamVjdElkKCkgewogICAgICAgICAgICByZXR1cm4gZ2V0T2JqZWN0\nSWQoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGFjY2Vzc2lu\nZ0ZpZWxkKGludCBmaWVsZCkgewogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGJvb2xlYW4gc2VyaWFsaXppbmcoKSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gd3JpdGVEZXRhY2hlZChPYmplY3RPdXRwdXQgb3V0KSB7\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgcHJveHlEZXRhY2hlZERl\nc2VyaWFsaXplZChpbnQgaWR4KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgc2V0dGluZ0Jvb2xlYW5GaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUg\ncGMsIGludCBmaWVsZCwKICAgICAgICAgICAgYm9vbGVhbiB2YWwxLCBib29s\nZWFuIHZhbDIsIGludCBzZXQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElu\ndGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\ndm9pZCBzZXR0aW5nQ2hhckZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywg\naW50IGZpZWxkLAogICAgICAgICAgICBjaGFyIHZhbDEsIGNoYXIgdmFsMiwg\naW50IHNldCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNl\ncHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldHRp\nbmdCeXRlRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQs\nCiAgICAgICAgICAgIGJ5dGUgdmFsMSwgYnl0ZSB2YWwyLCBpbnQgc2V0KSB7\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0dGluZ1Nob3J0Rmll\nbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQsCiAgICAgICAg\nICAgIHNob3J0IHZhbDEsIHNob3J0IHZhbDIsIGludCBzZXQpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXR0aW5nSW50RmllbGQoUGVyc2lz\ndGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQsCiAgICAgICAgICAgIGludCB2\nYWwxLCBpbnQgdmFsMiwgaW50IHNldCkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHNldHRpbmdMb25nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxl\nIHBjLCBpbnQgZmllbGQsCiAgICAgICAgICAgIGxvbmcgdmFsMSwgbG9uZyB2\nYWwyLCBpbnQgc2V0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5h\nbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQg\nc2V0dGluZ0Zsb2F0RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQg\nZmllbGQsCiAgICAgICAgICAgIGZsb2F0IHZhbDEsIGZsb2F0IHZhbDIsIGlu\ndCBzZXQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXR0aW5n\nRG91YmxlRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQs\nCiAgICAgICAgICAgIGRvdWJsZSB2YWwxLCBkb3VibGUgdmFsMiwgaW50IHNl\ndCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24o\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldHRpbmdTdHJp\nbmdGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAg\nICAgICAgICAgU3RyaW5nIHZhbDEsIFN0cmluZyB2YWwyLCBpbnQgc2V0KSB7\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0dGluZ09iamVjdEZp\nZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAg\nICAgICBPYmplY3QgdmFsMSwgT2JqZWN0IHZhbDIsIGludCBzZXQpIHsKICAg\nICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBwcm92aWRlZEJvb2xlYW5GaWVs\nZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAg\nICAgYm9vbGVhbiB2YWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVy\nbmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBwcm92aWRlZENoYXJGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGlu\ndCBmaWVsZCwKICAgICAgICAgICAgY2hhciB2YWwpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBwcm92aWRlZEJ5dGVGaWVsZChQZXJzaXN0ZW5j\nZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAgYnl0ZSB2YWwp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBwcm92aWRlZFNob3J0\nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQsCiAgICAg\nICAgICAgIHNob3J0IHZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHByb3ZpZGVkSW50RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBp\nbnQgZmllbGQsCiAgICAgICAgICAgIGludCB2YWwpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBwcm92aWRlZExvbmdGaWVsZChQZXJzaXN0ZW5j\nZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAgbG9uZyB2YWwp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBwcm92aWRlZEZsb2F0\nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQsCiAgICAg\nICAgICAgIGZsb2F0IHZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHByb3ZpZGVkRG91YmxlRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBj\nLCBpbnQgZmllbGQsCiAgICAgICAgICAgIGRvdWJsZSB2YWwpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBwcm92aWRlZFN0cmluZ0ZpZWxkKFBl\ncnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAgICAgICBT\ndHJpbmcgdmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4\nY2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgcHJv\ndmlkZWRPYmplY3RGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBm\naWVsZCwKICAgICAgICAgICAgT2JqZWN0IHZhbCkgewogICAgICAgICAgICB0\naHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBib29sZWFuIHJlcGxhY2VCb29sZWFuRmllbGQoUGVyc2lz\ndGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQpIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgY2hhciByZXBsYWNlQ2hhckZpZWxkKFBlcnNpc3RlbmNlQ2Fw\nYWJsZSBwYywgaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGJ5dGUgcmVwbGFjZUJ5dGVGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMs\nIGludCBmaWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxF\neGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzaG9ydCBy\nZXBsYWNlU2hvcnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBm\naWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRp\nb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBpbnQgcmVwbGFjZUlu\ndEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIGxvbmcgcmVwbGFjZUxvbmdGaWVsZChQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBmbG9hdCByZXBsYWNlRmxvYXRGaWVsZChQZXJzaXN0\nZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyBkb3VibGUgcmVwbGFjZURvdWJsZUZpZWxkKFBlcnNpc3RlbmNl\nQ2FwYWJsZSBwYywgaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIFN0cmluZyByZXBsYWNlU3RyaW5nRmllbGQoUGVyc2lzdGVuY2VDYXBh\nYmxlIHBjLCBpbnQgZmllbGQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElu\ndGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nT2JqZWN0IHJlcGxhY2VPYmplY3RGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUg\ncGMsIGludCBmaWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAg\nKiBTcGVjaWFsIHJvdyBtYW5hZ2VyIHR5cGUgdGhhdCB1bndyYXBzIGVtYmVk\nZGVkIG9iamVjdHMuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNz\nIEVtYmVkZGVkUm93TWFuYWdlcgogICAgICAgIGltcGxlbWVudHMgUm93TWFu\nYWdlciB7CgogICAgICAgIHByaXZhdGUgZmluYWwgUm93TWFuYWdlciBfcm07\nCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBSb3cgX3JvdzsKCiAgICAgICAgcHVi\nbGljIEVtYmVkZGVkUm93TWFuYWdlcihSb3dNYW5hZ2VyIGRlbGVnYXRlLCBS\nb3cgcm93KSB7CiAgICAgICAgICAgIF9ybSA9IGRlbGVnYXRlOwogICAgICAg\nICAgICBfcm93ID0gKHJvdyA9PSBudWxsKSA/IG51bGwgOiBuZXcgRW1iZWRk\nZWRSb3cocm93KTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFu\nIGhhc0F1dG9Bc3NpZ25Db25zdHJhaW50cygpIHsKICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIENvbGxlY3Rp\nb24gZ2V0SW5zZXJ0cygpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVy\nbmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgQ29s\nbGVjdGlvbiBnZXRVcGRhdGVzKCkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBDb2xsZWN0aW9uIGdldERlbGV0ZXMoKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIENvbGxlY3Rpb24gZ2V0U2Vjb25kYXJ5VXBkYXRlcygpIHsKICAg\nICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRTZWNvbmRhcnlE\nZWxldGVzKCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNl\ncHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9u\nIGdldEFsbFJvd1VwZGF0ZXMoKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIENvbGxlY3Rpb24gZ2V0QWxsUm93RGVsZXRlcygpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgUm93IGdldFJvdyhUYWJsZSB0YWJsZSwgaW50IGFjdGlv\nbiwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICAgICAgYm9vbGVh\nbiBjcmVhdGUpIHsKICAgICAgICAgICAgd2hpbGUgKHNtICE9IG51bGwgJiYg\nc20uZ2V0T3duZXIoKSAhPSBudWxsKQogICAgICAgICAgICAgICAgc20gPSBz\nbS5nZXRPd25lcigpOwogICAgICAgICAgICBpZiAoX3JvdyAhPSBudWxsICYm\nIHRhYmxlID09IF9yb3cuZ2V0VGFibGUoKQogICAgICAgICAgICAgICAgJiYg\nYWN0aW9uID09IF9yb3cuZ2V0QWN0aW9uKCkpCiAgICAgICAgICAgICAgICBy\nZXR1cm4gX3JvdzsKICAgICAgICAgICAgcmV0dXJuIG5ldyBFbWJlZGRlZFJv\ndyhfcm0uZ2V0Um93KHRhYmxlLCBhY3Rpb24sIHNtLCBjcmVhdGUpKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBSb3cgZ2V0U2Vjb25kYXJ5Um93KFRh\nYmxlIHRhYmxlLCBpbnQgYWN0aW9uKSB7CiAgICAgICAgICAgIHJldHVybiBu\nZXcgRW1iZWRkZWRSb3coX3JtLmdldFNlY29uZGFyeVJvdyh0YWJsZSwgYWN0\naW9uKSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBmbHVzaFNl\nY29uZGFyeVJvdyhSb3cgcm93KQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgX3JtLmZsdXNoU2Vjb25kYXJ5Um93KCgo\nRW1iZWRkZWRSb3cpIHJvdykuZ2V0RGVsZWdhdGUoKSk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgUm93IGdldEFsbFJvd3MoVGFibGUgdGFibGUsIGlu\ndCBhY3Rpb24pIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBFbWJlZGRlZFJv\ndyhfcm0uZ2V0QWxsUm93cyh0YWJsZSwgYWN0aW9uKSk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCBmbHVzaEFsbFJvd3MoUm93IHJvdykKICAg\nICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9y\nbS5mbHVzaEFsbFJvd3MoKChFbWJlZGRlZFJvdykgcm93KS5nZXREZWxlZ2F0\nZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTcGVjaWFs\nIHJvdyB0eXBlIHRoYXQgdW53cmFwcyBlbWJlZGRlZCBvYmplY3RzLgogICAg\nICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBFbWJlZGRlZFJvdwogICAg\nICAgIGltcGxlbWVudHMgUm93IHsKCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBS\nb3cgX3JvdzsKCiAgICAgICAgcHVibGljIEVtYmVkZGVkUm93KFJvdyBkZWxl\nZ2F0ZSkgewogICAgICAgICAgICBfcm93ID0gZGVsZWdhdGU7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgUm93IGdldERlbGVnYXRlKCkgewogICAgICAg\nICAgICByZXR1cm4gX3JvdzsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBi\nb29sZWFuIGlzVmFsaWQoKSB7CiAgICAgICAgICAgIHJldHVybiBfcm93Lmlz\nVmFsaWQoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldFZh\nbGlkKGJvb2xlYW4gdmFsaWQpIHsKICAgICAgICAgICAgX3Jvdy5zZXRWYWxp\nZCh2YWxpZCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRQ\ncmltYXJ5S2V5KE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pCiAgICAgICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldFBy\naW1hcnlLZXkoZ2V0T3duZXIoc20pKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHNldFByaW1hcnlLZXkoQ29sdW1uSU8gaW8sIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20pCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgICAgICBfcm93LnNldFByaW1hcnlLZXkoaW8sIGdldE93\nbmVyKHNtKSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCB3aGVy\nZVByaW1hcnlLZXkoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkKICAgICAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cud2hl\ncmVQcmltYXJ5S2V5KGdldE93bmVyKHNtKSk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgdm9pZCBzZXRGb3JlaWduS2V5KEZvcmVpZ25LZXkgZmssIE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20pCiAgICAgICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldEZvcmVpZ25LZXkoZmss\nIGdldE93bmVyKHNtKSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzZXRGb3JlaWduS2V5KEZvcmVpZ25LZXkgZmssIENvbHVtbklPIGlvLAog\nICAgICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtKQogICAgICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRG\nb3JlaWduS2V5KGZrLCBpbywgZ2V0T3duZXIoc20pKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlRm9yZWlnbktleShGb3JlaWduS2V5\nIGZrLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtKQogICAgICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUZvcmVp\nZ25LZXkoZmssIGdldE93bmVyKHNtKSk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgdm9pZCBzZXRSZWxhdGlvbklkKENvbHVtbiBjb2wsIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20sCiAgICAgICAgICAgIFJlbGF0aW9uSWQgcmVsKQog\nICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nX3Jvdy5zZXRSZWxhdGlvbklkKGNvbCwgZ2V0T3duZXIoc20pLCByZWwpOwog\nICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSBPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIGdldE93bmVyKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAgICAg\nICAgd2hpbGUgKHNtICE9IG51bGwgJiYgc20uZ2V0T3duZXIoKSAhPSBudWxs\nKQogICAgICAgICAgICAgICAgc20gPSBzbS5nZXRPd25lcigpOwogICAgICAg\nICAgICByZXR1cm4gc207CiAgICAgICAgfQoKICAgICAgICAvLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBQYXNzLXRocm91Z2ggbWV0aG9k\ncwogICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgICAgICBw\ndWJsaWMgVGFibGUgZ2V0VGFibGUoKSB7CiAgICAgICAgICAgIHJldHVybiBf\ncm93LmdldFRhYmxlKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgaW50\nIGdldEFjdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIF9yb3cuZ2V0QWN0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGdldEZh\naWxlZE9iamVjdCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9yb3cuZ2V0RmFp\nbGVkT2JqZWN0KCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXRGYWlsZWRPYmplY3QoT2JqZWN0IGZhaWxlZCkgewogICAgICAgICAgICBf\ncm93LnNldEZhaWxlZE9iamVjdChmYWlsZWQpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZ2V0UHJpbWFyeUtleSgp\nIHsKICAgICAgICAgICAgcmV0dXJuIF9yb3cuZ2V0UHJpbWFyeUtleSgpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0QXJyYXkoQ29sdW1u\nIGNvbCwgQXJyYXkgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRBcnJheShjb2wsIHZhbCk7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRBc2NpaVN0cmVhbShD\nb2x1bW4gY29sLCBJbnB1dFN0cmVhbSB2YWwsIGludCBsZW5ndGgpCiAgICAg\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93\nLnNldEFzY2lpU3RyZWFtKGNvbCwgdmFsLCBsZW5ndGgpOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIHZvaWQgc2V0QmlnRGVjaW1hbChDb2x1bW4gY29s\nLCBCaWdEZWNpbWFsIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0QmlnRGVjaW1hbChjb2wsIHZh\nbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRCaWdJbnRl\nZ2VyKENvbHVtbiBjb2wsIEJpZ0ludGVnZXIgdmFsKQogICAgICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRCaWdJ\nbnRlZ2VyKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHNldEJpbmFyeVN0cmVhbShDb2x1bW4gY29sLCBJbnB1dFN0cmVhbSB2\nYWwsIGludCBsZW5ndGgpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgICAgICBfcm93LnNldEJpbmFyeVN0cmVhbShjb2wsIHZh\nbCwgbGVuZ3RoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNl\ndEJsb2IoQ29sdW1uIGNvbCwgQmxvYiB2YWwpCiAgICAgICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldEJsb2IoY29s\nLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0Qm9v\nbGVhbihDb2x1bW4gY29sLCBib29sZWFuIHZhbCkKICAgICAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0Qm9vbGVh\nbihjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXRCeXRlKENvbHVtbiBjb2wsIGJ5dGUgdmFsKQogICAgICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRCeXRlKGNv\nbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldEJ5\ndGVzKENvbHVtbiBjb2wsIGJ5dGVbXSB2YWwpCiAgICAgICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldEJ5dGVzKGNv\nbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldENh\nbGVuZGFyKENvbHVtbiBjb2wsIENhbGVuZGFyIHZhbCkKICAgICAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0Q2Fs\nZW5kYXIoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZv\naWQgc2V0Q2hhcihDb2x1bW4gY29sLCBjaGFyIHZhbCkKICAgICAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0Q2hh\ncihjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXRDaGFyYWN0ZXJTdHJlYW0oQ29sdW1uIGNvbCwgUmVhZGVyIHZhbCwgaW50\nIGxlbmd0aCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIF9yb3cuc2V0Q2hhcmFjdGVyU3RyZWFtKGNvbCwgdmFsLCBs\nZW5ndGgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0Q2xv\nYihDb2x1bW4gY29sLCBDbG9iIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0Q2xvYihjb2wsIHZh\nbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXREYXRlKENv\nbHVtbiBjb2wsIERhdGUgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXREYXRlKGNvbCwgdmFsKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldERhdGUoQ29sdW1u\nIGNvbCwgamF2YS5zcWwuRGF0ZSB2YWwsIENhbGVuZGFyIGNhbCkKICAgICAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cu\nc2V0RGF0ZShjb2wsIHZhbCwgY2FsKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHNldERvdWJsZShDb2x1bW4gY29sLCBkb3VibGUgdmFsKQog\nICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nX3Jvdy5zZXREb3VibGUoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIHZvaWQgc2V0RmxvYXQoQ29sdW1uIGNvbCwgZmxvYXQgdmFsKQog\nICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nX3Jvdy5zZXRGbG9hdChjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgdm9pZCBzZXRJbnQoQ29sdW1uIGNvbCwgaW50IHZhbCkKICAgICAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cu\nc2V0SW50KGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHNldExvbmcoQ29sdW1uIGNvbCwgbG9uZyB2YWwpCiAgICAgICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldExv\nbmcoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQg\nc2V0TG9jYWxlKENvbHVtbiBjb2wsIExvY2FsZSB2YWwpCiAgICAgICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldExv\nY2FsZShjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzZXROdWxsKENvbHVtbiBjb2wpCiAgICAgICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldE51bGwoY29sKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldE51bGwoQ29sdW1uIGNv\nbCwgYm9vbGVhbiBvdmVycmlkZURlZmF1bHQpCiAgICAgICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldE51bGwoY29s\nLCBvdmVycmlkZURlZmF1bHQpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgc2V0TnVtYmVyKENvbHVtbiBjb2wsIE51bWJlciB2YWwpCiAgICAg\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93\nLnNldE51bWJlcihjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCBzZXRPYmplY3QoQ29sdW1uIGNvbCwgT2JqZWN0IHZhbCkKICAg\nICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9y\nb3cuc2V0T2JqZWN0KGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHNldFJhdyhDb2x1bW4gY29sLCBTdHJpbmcgdmFsKQogICAg\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jv\ndy5zZXRSYXcoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgc2V0U2hvcnQoQ29sdW1uIGNvbCwgc2hvcnQgdmFsKQogICAgICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5z\nZXRTaG9ydChjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\ndm9pZCBzZXRTdHJpbmcoQ29sdW1uIGNvbCwgU3RyaW5nIHZhbCkKICAgICAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cu\nc2V0U3RyaW5nKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHNldFRpbWUoQ29sdW1uIGNvbCwgVGltZSB2YWwsIENhbGVuZGFy\nIGNhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgICAgIF9yb3cuc2V0VGltZShjb2wsIHZhbCwgY2FsKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHNldFRpbWVzdGFtcChDb2x1bW4gY29s\nLCBUaW1lc3RhbXAgdmFsLCBDYWxlbmRhciBjYWwpCiAgICAgICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldFRpbWVz\ndGFtcChjb2wsIHZhbCwgY2FsKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHdoZXJlQXJyYXkoQ29sdW1uIGNvbCwgQXJyYXkgdmFsKQogICAg\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jv\ndy53aGVyZUFycmF5KGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHdoZXJlQXNjaWlTdHJlYW0oQ29sdW1uIGNvbCwgSW5wdXRT\ndHJlYW0gdmFsLCBpbnQgbGVuZ3RoKQogICAgICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUFzY2lpU3RyZWFt\nKGNvbCwgdmFsLCBsZW5ndGgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgd2hlcmVCaWdEZWNpbWFsKENvbHVtbiBjb2wsIEJpZ0RlY2ltYWwg\ndmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICAgICAgX3Jvdy53aGVyZUJpZ0RlY2ltYWwoY29sLCB2YWwpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVCaWdJbnRlZ2VyKENvbHVt\nbiBjb2wsIEJpZ0ludGVnZXIgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUJpZ0ludGVnZXIo\nY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hl\ncmVCaW5hcnlTdHJlYW0oQ29sdW1uIGNvbCwgSW5wdXRTdHJlYW0gdmFsLCBp\nbnQgbGVuZ3RoKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgX3Jvdy53aGVyZUJpbmFyeVN0cmVhbShjb2wsIHZhbCwg\nbGVuZ3RoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJl\nQmxvYihDb2x1bW4gY29sLCBCbG9iIHZhbCkKICAgICAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cud2hlcmVCbG9iKGNv\nbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJl\nQm9vbGVhbihDb2x1bW4gY29sLCBib29sZWFuIHZhbCkKICAgICAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cud2hlcmVC\nb29sZWFuKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHdoZXJlQnl0ZShDb2x1bW4gY29sLCBieXRlIHZhbCkKICAgICAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cud2hl\ncmVCeXRlKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHdoZXJlQnl0ZXMoQ29sdW1uIGNvbCwgYnl0ZVtdIHZhbCkKICAgICAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cu\nd2hlcmVCeXRlcyhjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCB3aGVyZUNhbGVuZGFyKENvbHVtbiBjb2wsIENhbGVuZGFyIHZh\nbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nICAgIF9yb3cud2hlcmVDYWxlbmRhcihjb2wsIHZhbCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCB3aGVyZUNoYXIoQ29sdW1uIGNvbCwgY2hh\nciB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgICAgICBfcm93LndoZXJlQ2hhcihjb2wsIHZhbCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCB3aGVyZUNoYXJhY3RlclN0cmVhbShDb2x1\nbW4gY29sLCBSZWFkZXIgdmFsLCBpbnQgbGVuZ3RoKQogICAgICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUNo\nYXJhY3RlclN0cmVhbShjb2wsIHZhbCwgbGVuZ3RoKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlQ2xvYihDb2x1bW4gY29sLCBDbG9i\nIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgICAgIF9yb3cud2hlcmVDbG9iKGNvbCwgdmFsKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlRGF0ZShDb2x1bW4gY29sLCBEYXRl\nIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgICAgIF9yb3cud2hlcmVEYXRlKGNvbCwgdmFsKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlRGF0ZShDb2x1bW4gY29sLCBqYXZh\nLnNxbC5EYXRlIHZhbCwgQ2FsZW5kYXIgY2FsKQogICAgICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZURhdGUo\nY29sLCB2YWwsIGNhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCB3aGVyZURvdWJsZShDb2x1bW4gY29sLCBkb3VibGUgdmFsKQogICAgICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53\naGVyZURvdWJsZShjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCB3aGVyZUZsb2F0KENvbHVtbiBjb2wsIGZsb2F0IHZhbCkKICAg\nICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9y\nb3cud2hlcmVGbG9hdChjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgdm9pZCB3aGVyZUludChDb2x1bW4gY29sLCBpbnQgdmFsKQogICAg\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jv\ndy53aGVyZUludChjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCB3aGVyZUxvbmcoQ29sdW1uIGNvbCwgbG9uZyB2YWwpCiAgICAg\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93\nLndoZXJlTG9uZyhjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCB3aGVyZUxvY2FsZShDb2x1bW4gY29sLCBMb2NhbGUgdmFsKQog\nICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nX3Jvdy53aGVyZUxvY2FsZShjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgdm9pZCB3aGVyZU51bGwoQ29sdW1uIGNvbCkKICAgICAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cud2hl\ncmVOdWxsKGNvbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCB3\naGVyZU51bWJlcihDb2x1bW4gY29sLCBOdW1iZXIgdmFsKQogICAgICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVy\nZU51bWJlcihjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\ndm9pZCB3aGVyZU9iamVjdChDb2x1bW4gY29sLCBPYmplY3QgdmFsKQogICAg\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jv\ndy53aGVyZU9iamVjdChjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgdm9pZCB3aGVyZVJhdyhDb2x1bW4gY29sLCBTdHJpbmcgdmFsKQog\nICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nX3Jvdy53aGVyZVJhdyhjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgdm9pZCB3aGVyZVNob3J0KENvbHVtbiBjb2wsIHNob3J0IHZhbCkK\nICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAg\nIF9yb3cud2hlcmVTaG9ydChjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgdm9pZCB3aGVyZVN0cmluZyhDb2x1bW4gY29sLCBTdHJpbmcg\ndmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICAgICAgX3Jvdy53aGVyZVN0cmluZyhjb2wsIHZhbCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCB3aGVyZVRpbWUoQ29sdW1uIGNvbCwgVGlt\nZSB2YWwsIENhbGVuZGFyIGNhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cud2hlcmVUaW1lKGNvbCwgdmFs\nLCBjYWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVU\naW1lc3RhbXAoQ29sdW1uIGNvbCwgVGltZXN0YW1wIHZhbCwgQ2FsZW5kYXIg\nY2FsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICAgICAgX3Jvdy53aGVyZVRpbWVzdGFtcChjb2wsIHZhbCwgY2FsKTsKICAg\nICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

