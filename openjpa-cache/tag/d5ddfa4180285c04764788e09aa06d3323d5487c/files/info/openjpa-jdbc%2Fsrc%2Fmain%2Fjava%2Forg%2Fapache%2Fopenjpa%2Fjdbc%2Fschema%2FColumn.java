{"sha":"45dedec18f7173217fd4e3fd6d196dcca3f62c5f","node_id":"MDQ6QmxvYjIwNjM2NDo0NWRlZGVjMThmNzE3MzIxN2ZkNGUzZmQ2ZDE5NmRjY2EzZjYyYzVm","size":22040,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/45dedec18f7173217fd4e3fd6d196dcca3f62c5f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGguQmln\nSW50ZWdlcjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNlTWV0YURhdGE7Cmlt\ncG9ydCBqYXZhLnNxbC5EYXRlOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1w\nb3J0IGphdmEuc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEuc3FsLlR5cGVz\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FM\nVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLlZl\ncnNpb25TdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkphdmFUeXBlczsKaW1wb3J0IHNlcnAudXRpbC5OdW1iZXJzOwoKLyoqCiAq\nIFJlcHJlc2VudHMgYSBkYXRhYmFzZSBjb2x1bW4uIENsb3NlbHkgYWxpZ25l\nZCB3aXRoIHRoZSBjb2x1bW4KICogaW5mb3JtYXRpb24gYXZhaWxhYmxlIGZy\nb20ge0BsaW5rIERhdGFiYXNlTWV0YURhdGF9LgogKgogKiBAYXV0aG9yIEFi\nZSBXaGl0ZQogKiBAYXV0aG9yIFN0ZXBoZW4gS2ltCiAqLwpwdWJsaWMgY2xh\nc3MgQ29sdW1uCiAgICBleHRlbmRzIFJlZmVyZW5jZUNvdW50ZXIgewoKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfVU5JTlNFUlRBQkxFID0g\nMiA8PCAwOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRkxBR19VTlVQ\nREFUQUJMRSA9IDIgPDwgMTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50\nIEZMQUdfRElSRUNUX0lOU0VSVCA9IDIgPDwgMjsKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgaW50IEZMQUdfRElSRUNUX1VQREFURSA9IDIgPDwgMzsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfRktfSU5TRVJUID0gMiA8\nPCA0OwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRkxBR19GS19VUERB\nVEUgPSAyIDw8IDU7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBGTEFH\nX1BLX0pPSU4gPSAyIDw8IDY7CgogICAgcHJpdmF0ZSBTdHJpbmcgX25hbWUg\nPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX2Z1bGxOYW1lID0gbnVsbDsK\nICAgIHByaXZhdGUgVGFibGUgX3RhYmxlID0gbnVsbDsKICAgIHByaXZhdGUg\nU3RyaW5nIF90YWJsZU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcg\nX3NjaGVtYU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBpbnQgX3R5cGUgPSBU\neXBlcy5PVEhFUjsKICAgIHByaXZhdGUgU3RyaW5nIF90eXBlTmFtZSA9IG51\nbGw7CiAgICBwcml2YXRlIGludCBfamF2YVR5cGUgPSBKYXZhVHlwZXMuT0JK\nRUNUOwogICAgcHJpdmF0ZSBpbnQgX3NpemUgPSAwOwogICAgcHJpdmF0ZSBp\nbnQgX2RlY2ltYWxzID0gMDsKICAgIHByaXZhdGUgU3RyaW5nIF9kZWZhdWx0\nU3RyID0gbnVsbDsKICAgIHByaXZhdGUgT2JqZWN0IF9kZWZhdWx0ID0gbnVs\nbDsKICAgIHByaXZhdGUgQm9vbGVhbiBfbm90TnVsbCA9IG51bGw7CiAgICBw\ncml2YXRlIGJvb2xlYW4gX2F1dG9Bc3NpZ24gPSBmYWxzZTsKICAgIHByaXZh\ndGUgYm9vbGVhbiBfcmVsID0gZmFsc2U7CiAgICBwcml2YXRlIFN0cmluZyBf\ndGFyZ2V0ID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF90YXJnZXRGaWVs\nZCA9IG51bGw7CiAgICBwcml2YXRlIGludCBfZmxhZ3MgPSAwOwoKICAgIHBy\naXZhdGUgaW50IF9pbmRleCA9IDA7CiAgICBwcml2YXRlIGJvb2xlYW4gX3Br\nID0gZmFsc2U7CiAgICBwcml2YXRlIFZlcnNpb25TdHJhdGVneSBfdmVyc2lv\nblN0cmF0ZWd5ID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9jb21tZW50\nID0gbnVsbDsKCiAgICAvKioKICAgICAqIERlZmF1bHQgY29uc3RydWN0b3Iu\nCiAgICAgKi8KICAgIHB1YmxpYyBDb2x1bW4oKSB7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBAcGFyYW0gbmFt\nZSB0aGUgbmFtZSBvZiB0aGUgY29sdW1uCiAgICAgKiBAcGFyYW0gdGFibGUg\ndGhlIGNvbHVtbidzIHRhYmxlCiAgICAgKi8KICAgIHB1YmxpYyBDb2x1bW4o\nU3RyaW5nIG5hbWUsIFRhYmxlIHRhYmxlKSB7CiAgICAgICAgc2V0TmFtZShu\nYW1lKTsKICAgICAgICBpZiAodGFibGUgIT0gbnVsbCkgewogICAgICAgICAg\nICBzZXRUYWJsZU5hbWUodGFibGUuZ2V0TmFtZSgpKTsKICAgICAgICAgICAg\nc2V0U2NoZW1hTmFtZSh0YWJsZS5nZXRTY2hlbWFOYW1lKCkpOwogICAgICAg\nIH0KICAgICAgICBfdGFibGUgPSB0YWJsZTsKICAgIH0KCiAgICAvKioKICAg\nICAqIENhbGxlZCB3aGVuIHRoZSBjb2x1bW4gaXMgcmVtb3ZlZCBmcm9tIGl0\ncyB0YWJsZS4gUmVtb3ZlcyB0aGUgY29sdW1uCiAgICAgKiBmcm9tIGFsbCB0\nYWJsZSBjb25zdHJhaW50cyBhbmQgaW5kZXhlcywgdGhlbiBpbnZhbGlkYXRl\ncyBpdC4KICAgICAqLwogICAgdm9pZCByZW1vdmUoKSB7CiAgICAgICAgVGFi\nbGUgdGFibGUgPSBnZXRUYWJsZSgpOwogICAgICAgIGlmICh0YWJsZSA9PSBu\ndWxsKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIFNjaGVtYSBzY2hl\nbWEgPSB0YWJsZS5nZXRTY2hlbWEoKTsKICAgICAgICBpZiAoc2NoZW1hICE9\nIG51bGwgJiYgc2NoZW1hLmdldFNjaGVtYUdyb3VwKCkgIT0gbnVsbCkgewog\nICAgICAgICAgICBTY2hlbWFbXSBzY2hlbWFzID0gc2NoZW1hLmdldFNjaGVt\nYUdyb3VwKCkuZ2V0U2NoZW1hcygpOwogICAgICAgICAgICBUYWJsZVtdIHRh\nYnM7CiAgICAgICAgICAgIEZvcmVpZ25LZXlbXSBma3M7CiAgICAgICAgICAg\nIENvbHVtbltdIGNvbHM7CiAgICAgICAgICAgIENvbHVtbltdIHBrczsKICAg\nICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzY2hlbWFzLmxlbmd0aDsg\naSsrKSB7CiAgICAgICAgICAgICAgICB0YWJzID0gc2NoZW1hc1tpXS5nZXRU\nYWJsZXMoKTsKICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwg\ndGFicy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGZrcyA9\nIHRhYnNbal0uZ2V0Rm9yZWlnbktleXMoKTsKICAgICAgICAgICAgICAgICAg\nICBmb3IgKGludCBrID0gMDsgayA8IGZrcy5sZW5ndGg7IGsrKykgewogICAg\nICAgICAgICAgICAgICAgICAgICBjb2xzID0gZmtzW2tdLmdldENvbHVtbnMo\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGtzID0gZmtzW2tdLmdldFBy\naW1hcnlLZXlDb2x1bW5zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZv\nciAoaW50IGwgPSAwOyBsIDwgY29scy5sZW5ndGg7IGwrKykKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVxdWFscyhjb2xzW2xdKSB8\nfCB0aGlzLmVxdWFscyhwa3NbbF0pKQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGZrc1trXS5yZW1vdmVKb2luKGNvbHNbbF0pOwoKICAgICAg\nICAgICAgICAgICAgICAgICAgY29scyA9IGZrc1trXS5nZXRDb25zdGFudENv\nbHVtbnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgbCA9\nIDA7IGwgPCBjb2xzLmxlbmd0aDsgbCsrKQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgaWYgKHRoaXMuZXF1YWxzKGNvbHNbbF0pKQogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGZrc1trXS5yZW1vdmVKb2luKGNvbHNb\nbF0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgcGtzID0gZmtzW2tdLmdl\ndENvbnN0YW50UHJpbWFyeUtleUNvbHVtbnMoKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgZm9yIChpbnQgbCA9IDA7IGwgPCBwa3MubGVuZ3RoOyBsKysp\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lcXVhbHMo\ncGtzW2xdKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma3Nb\na10ucmVtb3ZlSm9pbihwa3NbbF0pOwoKICAgICAgICAgICAgICAgICAgICAg\nICAgaWYgKGZrc1trXS5nZXRDb2x1bW5zKCkubGVuZ3RoID09IDAKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICYmIGZrc1trXS5nZXRDb25zdGFudENv\nbHVtbnMoKS5sZW5ndGggPT0gMCkKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIHRhYnNbal0ucmVtb3ZlRm9yZWlnbktleShma3Nba10pOwogICAgICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nfQogICAgICAgIH0KCiAgICAgICAgSW5kZXhbXSBpZHhzID0gdGFibGUuZ2V0\nSW5kZXhlcygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaWR4cy5s\nZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKGlkeHNbaV0ucmVtb3ZlQ29s\ndW1uKHRoaXMpICYmIGlkeHNbaV0uZ2V0Q29sdW1ucygpLmxlbmd0aCA9PSAw\nKQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlSW5kZXgoaWR4c1tpXSk7\nCgogICAgICAgIFVuaXF1ZVtdIHVucXMgPSB0YWJsZS5nZXRVbmlxdWVzKCk7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB1bnFzLmxlbmd0aDsgaSsr\nKQogICAgICAgICAgICBpZiAodW5xc1tpXS5yZW1vdmVDb2x1bW4odGhpcykg\nJiYgdW5xc1tpXS5nZXRDb2x1bW5zKCkubGVuZ3RoID09IDApCiAgICAgICAg\nICAgICAgICB0YWJsZS5yZW1vdmVVbmlxdWUodW5xc1tpXSk7CgogICAgICAg\nIFByaW1hcnlLZXkgcGsgPSB0YWJsZS5nZXRQcmltYXJ5S2V5KCk7CiAgICAg\nICAgaWYgKHBrICE9IG51bGwgJiYgcGsucmVtb3ZlQ29sdW1uKHRoaXMpICYm\nIHBrLmdldENvbHVtbnMoKS5sZW5ndGggPT0gMCkKICAgICAgICAgICAgdGFi\nbGUucmVtb3ZlUHJpbWFyeUtleSgpOwoKICAgICAgICBfdGFibGUgPSBudWxs\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB0YWJsZSBmb3Ig\ndGhlIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIFRhYmxlIGdldFRhYmxl\nKCkgewogICAgICAgIHJldHVybiBfdGFibGU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUaGUgY29sdW1uJ3MgdGFibGUgbmFtZS4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXRUYWJsZU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF90\nYWJsZU5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgY29sdW1uJ3Mg\ndGFibGUgbmFtZS4gWW91IGNhbiBvbmx5IGNhbGwgdGhpcyBtZXRob2Qgb24g\nY29sdW1ucwogICAgICogd2hvc2UgdGFibGUgb2JqZWN0IGlzIG5vdCBzZXQu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFRhYmxlTmFtZShTdHJpbmcg\nbmFtZSkgewogICAgICAgIGlmIChnZXRUYWJsZSgpICE9IG51bGwpCiAgICAg\nICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKTsKICAg\nICAgICBfdGFibGVOYW1lID0gbmFtZTsKICAgICAgICBfZnVsbE5hbWUgPSBu\ndWxsOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJlc2V0IHRoZSB0YWJs\nZSBuYW1lIHdpdGggdGhlIGZ1bGx5IHF1YWxpZmllZCB0YWJsZSBuYW1lIHdo\naWNoCiAgICAgKiBpbmNsdWRlcyB0aGUgc2NoZW1hIG5hbWUKICAgICAqLwog\nICAgcHVibGljIHZvaWQgcmVzZXRUYWJsZU5hbWUoU3RyaW5nIG5hbWUpIHsK\nICAgICAgICBfdGFibGVOYW1lID0gbmFtZTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFRoZSBjb2x1bW4ncyBzY2hlbWEgbmFtZS4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXRTY2hlbWFOYW1lKCkgewogICAgICAgIHJldHVybiBf\nc2NoZW1hTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBjb2x1bW4n\ncyBzY2hlbWEgbmFtZS4gWW91IGNhbiBvbmx5IGNhbGwgdGhpcyBtZXRob2Qg\nb24gY29sdW1ucwogICAgICogd2hvc2UgdGFibGUgb2JqZWN0IGlzIG5vdCBz\nZXQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFNjaGVtYU5hbWUoU3Ry\naW5nIG5hbWUpIHsKICAgICAgICBpZiAoZ2V0VGFibGUoKSAhPSBudWxsKQog\nICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7\nCiAgICAgICAgX3NjaGVtYU5hbWUgPSBuYW1lOwogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIHRoZSBjb2x1bW4ncyBuYW1lLgogICAgICovCiAgICBw\ndWJsaWMgU3RyaW5nIGdldE5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9uYW1l\nOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBjb2x1bW4ncyBuYW1l\nLiBZb3UgY2FuIG9ubHkgY2FsbCB0aGlzIG1ldGhvZCBvbiBjb2x1bW5zCiAg\nICAgKiB3aG9zZSB0YWJsZSBvYmplY3QgaXMgbm90IHNldC4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0TmFtZShTdHJpbmcgbmFtZSkgewogICAgICAg\nIGlmIChnZXRUYWJsZSgpICE9IG51bGwpCiAgICAgICAgICAgIHRocm93IG5l\ndyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKTsKICAgICAgICBfbmFtZSA9IG5h\nbWU7CiAgICAgICAgX2Z1bGxOYW1lID0gbnVsbDsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgY29sdW1uJ3MgZnVsbCBuYW1lLCBpbiB0aGUg\nZm9ybSAmbHQ7dGFibGUmZ3Q7LiZsdDtuYW1lJmd0Oy4KICAgICAqLwogICAg\ncHVibGljIFN0cmluZyBnZXRGdWxsTmFtZSgpIHsKICAgICAgICBpZiAoX2Z1\nbGxOYW1lID09IG51bGwpIHsKICAgICAgICAgICAgU3RyaW5nIG5hbWUgPSBn\nZXROYW1lKCk7CiAgICAgICAgICAgIGlmIChuYW1lID09IG51bGwpCiAgICAg\nICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgU3RyaW5nIHRu\nYW1lID0gZ2V0VGFibGVOYW1lKCk7CiAgICAgICAgICAgIGlmICh0bmFtZSA9\nPSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIG5hbWU7CiAgICAgICAg\nICAgIF9mdWxsTmFtZSA9IHRuYW1lICsgIi4iICsgbmFtZTsKICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIF9mdWxsTmFtZTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUgY29sdW1uJ3MgU1FMIHR5cGUuIFRoaXMgd2lsbCBi\nZSBvbmUgb2YgdGhlIHR5cGUgY29uc3RhbnRzCiAgICAgKiBkZWZpbmVkIGlu\nIHtAbGluayBUeXBlc30uCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0VHlw\nZSgpIHsKICAgICAgICByZXR1cm4gX3R5cGU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTZXQgdGhlIGNvbHVtbidzIFNRTCB0eXBlLiBUaGlzIHNob3VsZCBi\nZSBvbmUgb2YgdGhlIHR5cGUgY29uc3RhbnRzCiAgICAgKiBkZWZpbmVkIGlu\nIHtAbGluayBUeXBlc30uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFR5\ncGUoaW50IHNxbFR5cGUpIHsKICAgICAgICBfdHlwZSA9IHNxbFR5cGU7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGF0YWJhc2Utc3BlY2lmaWMgU1FM\nIHR5cGUgb2YgdGhpcyBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0VHlwZU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF90eXBlTmFtZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBkYXRhYmFzZS1zcGVjaWZpYyBT\nUUwgdHlwZSBvZiB0aGlzIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0VHlwZU5hbWUoU3RyaW5nIHR5cGVOYW1lKSB7CiAgICAgICAgX3R5\ncGVOYW1lID0gdHlwZU5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUg\nSmF2YSB0eXBlIHRoZSBkYXRhIGluIHRoaXMgY29sdW1uIGlzIHRyZWF0ZWQg\nYXMsIGZyb20KICAgICAqIHtAbGluayBKYXZhVHlwZXN9IG9yIHtAbGluayBK\nYXZhU1FMVHlwZXN9LgogICAgICovCiAgICBwdWJsaWMgaW50IGdldEphdmFU\neXBlKCkgewogICAgICAgIHJldHVybiBfamF2YVR5cGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgSmF2YSB0eXBlIHRoZSBkYXRhIGluIHRoaXMgY29s\ndW1uIGlzIHRyZWF0ZWQgYXMsIGZyb20KICAgICAqIHtAbGluayBKYXZhVHlw\nZXN9IG9yIHtAbGluayBKYXZhU1FMVHlwZXN9LgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRKYXZhVHlwZShpbnQgdHlwZSkgewogICAgICAgIF9qYXZh\nVHlwZSA9IHR5cGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhl\nIGNvbHVtbidzIHNpemUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0U2l6\nZSgpIHsKICAgICAgICByZXR1cm4gX3NpemU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTZXQgdGhlIGNvbHVtbidzIHNpemUuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldFNpemUoaW50IHNpemUpIHsKICAgICAgICBfc2l6ZSA9IHNp\nemU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG51bWJlciBv\nZiBkZWNpbWFsIGRpZ2l0cyBmb3IgdGhlIGNvbHVtbiwgaWYgYXBwbGljYWJs\nZS4KICAgICAqLwogICAgcHVibGljIGludCBnZXREZWNpbWFsRGlnaXRzKCkg\newogICAgICAgIHJldHVybiBfZGVjaW1hbHM7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTZXQgdGhlIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cyBmb3IgdGhl\nIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGVjaW1hbERp\nZ2l0cyhpbnQgZGlnaXRzKSB7CiAgICAgICAgX2RlY2ltYWxzID0gZGlnaXRz\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBkZWZhdWx0IHZh\nbHVlIHNldCBmb3IgdGhlIGNvbHVtbiwgaWYgYW55LgogICAgICovCiAgICBw\ndWJsaWMgU3RyaW5nIGdldERlZmF1bHRTdHJpbmcoKSB7CiAgICAgICAgcmV0\ndXJuIF9kZWZhdWx0U3RyOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRo\nZSBkZWZhdWx0IHZhbHVlIGZvciB0aGUgY29sdW1uLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXREZWZhdWx0U3RyaW5nKFN0cmluZyBkZWYpIHsKICAg\nICAgICBfZGVmYXVsdFN0ciA9IGRlZjsKICAgICAgICBfZGVmYXVsdCA9IG51\nbGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRlZmF1bHQg\ndmFsdWUgc2V0IGZvciB0aGlzIGNvbHVtbiwgaWYgYW55LiBJZiBvbmx5IGEg\nZGVmYXVsdAogICAgICogc3RyaW5nIGhhcyBiZWVuIHNldCwgYXR0ZW1wdHMg\ndG8gY29udmVydCBpdCB0byB0aGUgcmlnaHQgdHlwZSBiYXNlZAogICAgICog\nb24gdGhlIEphdmEgdHlwZSBzZXQgZm9yIHRoaXMgY29sdW1uLgogICAgICov\nCiAgICBwdWJsaWMgT2JqZWN0IGdldERlZmF1bHQoKSB7CiAgICAgICAgaWYg\nKF9kZWZhdWx0ICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBfZGVmYXVs\ndDsKICAgICAgICBpZiAoX2RlZmF1bHRTdHIgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CgogICAgICAgIHN3aXRjaCAoX2phdmFUeXBlKSB7\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJPT0xFQU46CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkJPT0xFQU5fT0JKOgogICAgICAgICAgICAg\nICAgX2RlZmF1bHQgPSAoInRydWUiLmVxdWFscyhfZGVmYXVsdFN0cikpID8g\nQm9vbGVhbi5UUlVFCiAgICAgICAgICAgICAgICAgICAgOiBCb29sZWFuLkZB\nTFNFOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2Ug\nSmF2YVR5cGVzLkJZVEU6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJZ\nVEVfT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgQnl0ZShf\nZGVmYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgY2FzZSBKYXZhVHlwZXMuQ0hBUjoKICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuQ0hBUl9PQko6CiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IG5l\ndyBDaGFyYWN0ZXIoX2RlZmF1bHRTdHIuY2hhckF0KDApKTsKICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5ET1VC\nTEU6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkRPVUJMRV9PQko6CiAg\nICAgICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBEb3VibGUoX2RlZmF1bHRT\ndHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2Ug\nSmF2YVR5cGVzLkZMT0FUOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5G\nTE9BVF9PQko6CiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBGbG9h\ndChfZGVmYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UOgogICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5JTlRfT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBO\ndW1iZXJzLnZhbHVlT2YoSW50ZWdlci5wYXJzZUludChfZGVmYXVsdFN0cikp\nOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLkxPTkc6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxPTkdf\nT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBOdW1iZXJzLnZhbHVl\nT2YoTG9uZy5wYXJzZUxvbmcoX2RlZmF1bHRTdHIpKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5OVU1CRVI6\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJJR0RFQ0lNQUw6CiAgICAg\nICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBCaWdEZWNpbWFsKF9kZWZhdWx0\nU3RyKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNl\nIEphdmFUeXBlcy5TSE9SVDoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nU0hPUlRfT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgU2hv\ncnQoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgIGNhc2UgSmF2YVR5cGVzLkRBVEU6CiAgICAgICAgICAgICAgICBf\nZGVmYXVsdCA9IG5ldyBqYXZhLnV0aWwuRGF0ZShfZGVmYXVsdFN0cik7CiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuQklHSU5URUdFUjoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gbmV3\nIEJpZ0ludGVnZXIoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVNRTFR5cGVzLlNRTF9EQVRFOgog\nICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBEYXRlLnZhbHVlT2YoX2RlZmF1\nbHRTdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNh\nc2UgSmF2YVNRTFR5cGVzLlRJTUVTVEFNUDoKICAgICAgICAgICAgICAgIF9k\nZWZhdWx0ID0gVGltZXN0YW1wLnZhbHVlT2YoX2RlZmF1bHRTdHIpOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVNRTFR5\ncGVzLlRJTUU6CiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IFRpbWUudmFs\ndWVPZihfZGVmYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0g\nX2RlZmF1bHRTdHI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfZGVmYXVs\ndDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgZGVmYXVsdCB2YWx1\nZSBmb3IgdGhlIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nRGVmYXVsdChPYmplY3QgZGVmKSB7CiAgICAgICAgX2RlZmF1bHQgPSBkZWY7\nCiAgICAgICAgX2RlZmF1bHRTdHIgPSAoZGVmID09IG51bGwpID8gbnVsbCA6\nIGRlZi50b1N0cmluZygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRydWUgaWYgdGhpcyBpcyBhIE5PVCBOVUxMIGNvbHVtbi4KICAgICAqLwog\nICAgcHVibGljIGJvb2xlYW4gaXNOb3ROdWxsKCkgewogICAgICAgIHJldHVy\nbiBfbm90TnVsbCA9PSBCb29sZWFuLlRSVUU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTZXQgd2hldGhlciB0aGlzIGlzIGEgTk9UIE5VTEwgY29sdW1uLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXROb3ROdWxsKGJvb2xlYW4gbm90\nTnVsbCkgewogICAgICAgIF9ub3ROdWxsID0gKG5vdE51bGwpID8gQm9vbGVh\nbi5UUlVFIDogQm9vbGVhbi5GQUxTRTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFdoZXRoZXIgdGhlIG5vdC1udWxsIHByb3BlcnR5IGhhcyBiZWVuIHNldC4K\nICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNOb3ROdWxsRXhwbGljaXQo\nKSB7CiAgICAgICAgcmV0dXJuIF9ub3ROdWxsICE9IG51bGw7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgY29sdW1uIGlzIGF1dG8tYXNz\naWduZWQgYSB2YWx1ZSBvbiBpbnNlcnQuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGlzQXV0b0Fzc2lnbmVkKCkgewogICAgICAgIHJldHVybiBfYXV0\nb0Fzc2lnbjsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBj\nb2x1bW4gaXMgYXV0by1pbmNyZW1lbnRpbmcuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldEF1dG9Bc3NpZ25lZChib29sZWFuIGF1dG9Bc3NpZ24pIHsK\nICAgICAgICBpZiAoYXV0b0Fzc2lnbiAhPSBfYXV0b0Fzc2lnbiAmJiBnZXRU\nYWJsZSgpICE9IG51bGwpCiAgICAgICAgICAgIGdldFRhYmxlKCkuY2hhbmdl\nQXV0b0Fzc2lnbmVkKHRoaXMpOwogICAgICAgIF9hdXRvQXNzaWduID0gYXV0\nb0Fzc2lnbjsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBj\nb2x1bW4gc3RvcmVzIHNvbWUgZm9ybSBvZiBzZXJpYWxpemVkIGlkZW50aXR5\nIHZhbHVlIGZvcgogICAgICogYSByZWxhdGVkIHJlY29yZC4gVGhpcyBtYWtl\ncyB0aGUgY29sdW1uIGRlcGVuZGVudCBvbiB0aGUga25vd2luZyB0aGUKICAg\nICAqIGZpbmFsIGlkZW50aXR5IG9mIHRoZSByZWxhdGlvbiBiZWZvcmUgdGhl\nIGNvbHVtbiB2YWx1ZSBpcyBzZXQuCiAgICAgKi8KICAgIHB1YmxpYyBib29s\nZWFuIGlzUmVsYXRpb25JZCgpIHsKICAgICAgICByZXR1cm4gX3JlbDsKICAg\nIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gc3RvcmVz\nIHNvbWUgZm9ybSBvZiBzZXJpYWxpemVkIGlkZW50aXR5IHZhbHVlIGZvcgog\nICAgICogYSByZWxhdGVkIHJlY29yZC4gVGhpcyBtYWtlcyB0aGUgY29sdW1u\nIGRlcGVuZGVudCBvbiB0aGUga25vd2luZyB0aGUKICAgICAqIGZpbmFsIGlk\nZW50aXR5IG9mIHRoZSByZWxhdGlvbiBiZWZvcmUgdGhlIGNvbHVtbiB2YWx1\nZSBpcyBzZXQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFJlbGF0aW9u\nSWQoYm9vbGVhbiByZWwpIHsKICAgICAgICBpZiAocmVsICE9IF9yZWwgJiYg\nZ2V0VGFibGUoKSAhPSBudWxsKQogICAgICAgICAgICBnZXRUYWJsZSgpLmNo\nYW5nZVJlbGF0aW9uSWQodGhpcyk7CiAgICAgICAgX3JlbCA9IHJlbDsKICAg\nIH0KCiAgICAvKioKICAgICAqIFRoZSBuYW1lIG9mIHRoZSBjb2x1bW4gdGhp\ncyBjb2x1bW4gam9pbnMgdG8sIGlmIGFueS4gVXNlZCBmb3IgbWFwcGluZy4K\nICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRUYXJnZXQoKSB7CiAgICAg\nICAgcmV0dXJuIF90YXJnZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUg\nbmFtZSBvZiB0aGUgY29sdW1uIHRoaXMgY29sdW1uIGpvaW5zIHRvLCBpZiBh\nbnkuIFVzZWQgZm9yIG1hcHBpbmcuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldFRhcmdldChTdHJpbmcgdGFyZ2V0KSB7CiAgICAgICAgX3RhcmdldCA9\nIFN0cmluZ1V0aWxzLnRyaW1Ub051bGwodGFyZ2V0KTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmaWVsZCB0aGlzIGNvbHVtbiBq\nb2lucyB0bywgaWYgYW55LiBVc2VkIGZvciBtYXBwaW5nLgogICAgICovCiAg\nICBwdWJsaWMgU3RyaW5nIGdldFRhcmdldEZpZWxkKCkgewogICAgICAgIHJl\ndHVybiBfdGFyZ2V0RmllbGQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUg\nbmFtZSBvZiB0aGUgZmllbGQgdGhpcyBjb2x1bW4gam9pbnMgdG8sIGlmIGFu\neS4gVXNlZCBmb3IgbWFwcGluZy4KICAgICAqLwogICAgcHVibGljIHZvaWQg\nc2V0VGFyZ2V0RmllbGQoU3RyaW5nIHRhcmdldCkgewogICAgICAgIGlmICh0\nYXJnZXQgIT0gbnVsbCAmJiB0YXJnZXQubGVuZ3RoKCkgPT0gMCkKICAgICAg\nICAgICAgdGFyZ2V0ID0gbnVsbDsKICAgICAgICBfdGFyZ2V0RmllbGQgPSB0\nYXJnZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBGbGFncyBhcmUgdXNlZCBm\nb3IgYm9va2tlZXBpbmcgaW5mb3JtYXRpb24uIFRoZXkgYXJlIGlnbm9yZWQg\nYXQgcnVudGltZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0Rmxh\nZyhpbnQgZmxhZykgewogICAgICAgIHJldHVybiAoX2ZsYWdzICYgZmxhZykg\nIT0gMDsKICAgIH0KCiAgICAvKioKICAgICAqIEZsYWdzIGFyZSB1c2VkIGZv\nciBib29ra2VlcGluZyBpbmZvcm1hdGlvbi4gVGhleSBhcmUgaWdub3JlZCBh\ndCBydW50aW1lLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRGbGFnKGlu\ndCBmbGFnLCBib29sZWFuIG9uKSB7CiAgICAgICAgaWYgKG9uKQogICAgICAg\nICAgICBfZmxhZ3MgfD0gZmxhZzsKICAgICAgICBlbHNlCiAgICAgICAgICAg\nIF9mbGFncyAmPSB+ZmxhZzsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiB0cnVlIGlmIHRoaXMgY29sdW1uIGJlbG9uZ3MgdG8gdGhlIHRhYmxlJ3Mg\ncHJpbWFyeSBrZXkuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzUHJp\nbWFyeUtleSgpIHsKICAgICAgICByZXR1cm4gX3BrOwogICAgfQoKICAgIC8q\nKgogICAgICogU2V0IHdoZXRoZXIgdGhpcyBjb2x1bW4gYmVsb25ncyB0byB0\naGUgdGFibGUncyBwcmltYXJ5IGtleS4KICAgICAqLwogICAgdm9pZCBzZXRQ\ncmltYXJ5S2V5KGJvb2xlYW4gcGspIHsKICAgICAgICBfcGsgPSBwazsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY29sdW1uJ3MgMC1iYXNl\nZCBpbmRleCBpbiB0aGUgb3duaW5nIHRhYmxlLgogICAgICovCiAgICBwdWJs\naWMgaW50IGdldEluZGV4KCkgewogICAgICAgIGlmIChnZXRUYWJsZSgpICE9\nIG51bGwpCiAgICAgICAgICAgIGdldFRhYmxlKCkuaW5kZXhDb2x1bW5zKCk7\nCiAgICAgICAgcmV0dXJuIF9pbmRleDsKICAgIH0KCiAgICAvKioKICAgICAq\nIFNldCB0aGUgY29sdW1uJ3MgMC1iYXNlZCBpbmRleCBpbiB0aGUgb3duaW5n\nIHRhYmxlLgogICAgICovCiAgICB2b2lkIHNldEluZGV4KGludCBpbmRleCkg\newogICAgICAgIF9pbmRleCA9IGluZGV4OwogICAgfQoKICAgIC8qKgogICAg\nICogV2hldGhlciB0aGlzIGNvbHVtbiBpcyBhIExPQi4KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gaXNMb2IoKSB7CiAgICAgICAgc3dpdGNoIChfdHlw\nZSkgewogICAgICAgICAgICBjYXNlIFR5cGVzLkJJTkFSWToKICAgICAgICAg\nICAgY2FzZSBUeXBlcy5CTE9COgogICAgICAgICAgICBjYXNlIFR5cGVzLkxP\nTkdWQVJCSU5BUlk6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuVkFSQklOQVJZ\nOgogICAgICAgICAgICBjYXNlIFR5cGVzLkNMT0I6CiAgICAgICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGlzIGNvbHVtbiBpcyBjb21wYXRp\nYmxlIHdpdGggdGhlIGdpdmVuIEpEQkMgdHlwZQogICAgICogZnJvbSB7QGxp\nbmsgVHlwZXN9IGFuZCBzaXplLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVh\nbiBpc0NvbXBhdGlibGUoaW50IHR5cGUsIFN0cmluZyB0eXBlTmFtZSwgaW50\nIHNpemUsIAogICAgICAgIGludCBkZWNpbWFscykgewogICAgICAgIGlmICh0\neXBlID09IFR5cGVzLk9USEVSIHx8IGdldFR5cGUoKSA9PSBUeXBlcy5PVEhF\nUikKICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIC8vIG5vdGUg\ndGhhdCB0aGUgZ2l2ZW4gc2l6ZSBpcyBjdXJyZW50bHkgaWdub3JlZCwgYnV0\nIG1heSBiZSB1c2VmdWwKICAgICAgICAvLyB0byBkeW5hbWljYWxseS1wb3B1\nbGF0aW5nIHN1YmNsYXNzZXMKICAgICAgICBzd2l0Y2ggKGdldFR5cGUoKSkg\newogICAgICAgICAgICBjYXNlIFR5cGVzLkJJVDoKICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5USU5ZSU5UOgogICAgICAgICAgICBjYXNlIFR5cGVzLkJJR0lO\nVDoKICAgICAgICAgICAgY2FzZSBUeXBlcy5JTlRFR0VSOgogICAgICAgICAg\nICBjYXNlIFR5cGVzLk5VTUVSSUM6CiAgICAgICAgICAgIGNhc2UgVHlwZXMu\nU01BTExJTlQ6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuREVDSU1BTDoKICAg\nICAgICAgICAgY2FzZSBUeXBlcy5ET1VCTEU6CiAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuRkxPQVQ6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuUkVBTDoKICAg\nICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAg\nICAgIGNhc2UgVHlwZXMuQklUOgogICAgICAgICAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuVElOWUlOVDoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVz\nLkJJR0lOVDoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLklOVEVH\nRVI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5OVU1FUklDOgog\nICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuU01BTExJTlQ6CiAgICAg\nICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5ERUNJTUFMOgogICAgICAgICAg\nICAgICAgICAgIGNhc2UgVHlwZXMuRE9VQkxFOgogICAgICAgICAgICAgICAg\nICAgIGNhc2UgVHlwZXMuRkxPQVQ6CiAgICAgICAgICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5SRUFMOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAg\nICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIGNhc2UgVHlwZXMuQklOQVJZOgogICAgICAgICAgICBj\nYXNlIFR5cGVzLkJMT0I6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuTE9OR1ZB\nUkJJTkFSWToKICAgICAgICAgICAgY2FzZSBUeXBlcy5WQVJCSU5BUlk6CiAg\nICAgICAgICAgIGNhc2UgVHlwZXMuT1RIRVI6CiAgICAgICAgICAgICAgICBz\nd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVz\nLkJJTkFSWToKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkJMT0I6\nCiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5MT05HVkFSQklOQVJZ\nOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuVkFSQklOQVJZOgog\nICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuT1RIRVI6CiAgICAgICAg\nICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAg\nICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBm\nYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSBUeXBl\ncy5DTE9COgogICAgICAgICAgICBjYXNlIFR5cGVzLkNIQVI6CiAgICAgICAg\nICAgIGNhc2UgVHlwZXMuTE9OR1ZBUkNIQVI6CiAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuVkFSQ0hBUjoKICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkg\newogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuQ0xPQjoKICAgICAg\nICAgICAgICAgICAgICBjYXNlIFR5cGVzLkNIQVI6CiAgICAgICAgICAgICAg\nICAgICAgY2FzZSBUeXBlcy5MT05HVkFSQ0hBUjoKICAgICAgICAgICAgICAg\nICAgICBjYXNlIFR5cGVzLlZBUkNIQVI6CiAgICAgICAgICAgICAgICAgICAg\nY2FzZSBUeXBlcy5EQVRFOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlw\nZXMuVElNRToKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLlRJTUVT\nVEFNUDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAg\nICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICBjYXNlIFR5cGVzLkRBVEU6CiAgICAgICAgICAgIGNhc2UgVHlwZXMu\nVElNRToKICAgICAgICAgICAgY2FzZSBUeXBlcy5USU1FU1RBTVA6CiAgICAg\nICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAg\nICBjYXNlIFR5cGVzLkxPTkdWQVJDSEFSOgogICAgICAgICAgICAgICAgICAg\nIGNhc2UgVHlwZXMuQ0xPQjoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5\ncGVzLlZBUkNIQVI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5E\nQVRFOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuVElNRToKICAg\nICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLlRJTUVTVEFNUDoKICAgICAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAg\nICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBkZWZhdWx0\nOgogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT0gZ2V0VHlwZSgpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGNv\nbHVtbiBuYW1lLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5n\nKCkgewogICAgICAgIHJldHVybiBnZXROYW1lKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBVc2VmdWwgZm9yIGRlYnVnZ2luZy4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXREZXNjcmlwdGlvbigpIHsKICAgICAgICBTdHJpbmdC\ndWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOwogICAgICAgIGJ1Zi5h\ncHBlbmQoIkZ1bGwgTmFtZTogIikuYXBwZW5kKGdldEZ1bGxOYW1lKCkpLmFw\ncGVuZCgiXG4iKTsKICAgICAgICBidWYuYXBwZW5kKCJUeXBlOiAiKS5hcHBl\nbmQoU2NoZW1hcy5nZXRKREJDTmFtZShnZXRUeXBlKCkpKS4KICAgICAgICAg\nICAgYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1Zi5hcHBlbmQoIlNpemU6ICIp\nLmFwcGVuZChnZXRTaXplKCkpLmFwcGVuZCgiXG4iKTsKICAgICAgICBidWYu\nYXBwZW5kKCJEZWZhdWx0OiAiKS5hcHBlbmQoZ2V0RGVmYXVsdFN0cmluZygp\nKS5hcHBlbmQoIlxuIik7CiAgICAgICAgYnVmLmFwcGVuZCgiTm90IE51bGw6\nICIpLmFwcGVuZChpc05vdE51bGwoKSkuYXBwZW5kKCJcbiIpOwogICAgICAg\nIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRlc3RzIGNvbXBhdGliaWxpdHkuCiAgICAgKi8KICAgIHB1YmxpYyBib29s\nZWFuIGVxdWFsc0NvbHVtbihDb2x1bW4gY29sKSB7CiAgICAgICAgaWYgKGNv\nbCA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBp\nZiAoY29sID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAg\nICAgICAgaWYgKCFnZXRGdWxsTmFtZSgpLmVxdWFsc0lnbm9yZUNhc2UoY29s\nLmdldEZ1bGxOYW1lKCkpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICAgICAgaWYgKCFpc0NvbXBhdGlibGUoY29sLmdldFR5cGUoKSwgY29sLmdl\ndFR5cGVOYW1lKCksIGNvbC5nZXRTaXplKCksCiAgICAgICAgICAgIGNvbC5n\nZXREZWNpbWFsRGlnaXRzKCkpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICAgaWYgKGdldFR5cGUoKSA9PSBUeXBlcy5WQVJDSEFSICYmIGdl\ndFNpemUoKSA+IDAgJiYgY29sLmdldFNpemUoKSA+IDAKICAgICAgICAgICAg\nJiYgZ2V0U2l6ZSgpICE9IGNvbC5nZXRTaXplKCkpCiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvcHkgaW5mb3JtYXRpb24gZnJvbSB0aGUgZ2l2ZW4gY29s\ndW1uIHRvIHRoaXMgb25lLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBjb3B5\nKENvbHVtbiBmcm9tKSB7CiAgICAgICAgaWYgKGZyb20gPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIGlmIChnZXROYW1lKCkgPT0gbnVs\nbCkKICAgICAgICAgICAgc2V0TmFtZShmcm9tLmdldE5hbWUoKSk7CiAgICAg\nICAgaWYgKGdldFR5cGUoKSA9PSBUeXBlcy5PVEhFUikKICAgICAgICAgICAg\nc2V0VHlwZShmcm9tLmdldFR5cGUoKSk7CiAgICAgICAgaWYgKGdldFR5cGVO\nYW1lKCkgPT0gbnVsbCkKICAgICAgICAgICAgc2V0VHlwZU5hbWUoZnJvbS5n\nZXRUeXBlTmFtZSgpKTsKICAgICAgICBpZiAoZ2V0SmF2YVR5cGUoKSA9PSBK\nYXZhVHlwZXMuT0JKRUNUKQogICAgICAgICAgICBzZXRKYXZhVHlwZShmcm9t\nLmdldEphdmFUeXBlKCkpOwogICAgICAgIGlmIChnZXRTaXplKCkgPT0gMCkK\nICAgICAgICAgICAgc2V0U2l6ZShmcm9tLmdldFNpemUoKSk7CiAgICAgICAg\naWYgKGdldERlY2ltYWxEaWdpdHMoKSA9PSAwKQogICAgICAgICAgICBzZXRE\nZWNpbWFsRGlnaXRzKGZyb20uZ2V0RGVjaW1hbERpZ2l0cygpKTsKICAgICAg\nICBpZiAoZ2V0RGVmYXVsdFN0cmluZygpID09IG51bGwpCiAgICAgICAgICAg\nIHNldERlZmF1bHRTdHJpbmcoZnJvbS5nZXREZWZhdWx0U3RyaW5nKCkpOwog\nICAgICAgIGlmICghaXNOb3ROdWxsRXhwbGljaXQoKSAmJiBmcm9tLmlzTm90\nTnVsbEV4cGxpY2l0KCkpCiAgICAgICAgICAgIHNldE5vdE51bGwoZnJvbS5p\nc05vdE51bGwoKSk7CiAgICAgICAgaWYgKCFpc0F1dG9Bc3NpZ25lZCgpKQog\nICAgICAgICAgICBzZXRBdXRvQXNzaWduZWQoZnJvbS5pc0F1dG9Bc3NpZ25l\nZCgpKTsKICAgICAgICBpZiAoIWlzUmVsYXRpb25JZCgpKQogICAgICAgICAg\nICBzZXRSZWxhdGlvbklkKGZyb20uaXNSZWxhdGlvbklkKCkpOwogICAgICAg\nIGlmIChnZXRUYXJnZXQoKSA9PSBudWxsKQogICAgICAgICAgICBzZXRUYXJn\nZXQoZnJvbS5nZXRUYXJnZXQoKSk7CiAgICAgICAgaWYgKGdldFRhcmdldEZp\nZWxkKCkgPT0gbnVsbCkKICAgICAgICAgICAgc2V0VGFyZ2V0RmllbGQoZnJv\nbS5nZXRUYXJnZXRGaWVsZCgpKTsKICAgICAgICBpZiAoX2ZsYWdzID09IDAp\nCiAgICAgICAgICAgIF9mbGFncyA9IGZyb20uX2ZsYWdzOwogICAgfQogICAg\nCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gaXMgYW4gWE1M\nIHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzWE1MKCkgewog\nICAgICAgIHJldHVybiBfdHlwZU5hbWUgIT0gbnVsbCAmJiBfdHlwZU5hbWUu\nc3RhcnRzV2l0aCgiWE1MIik7CiAgICB9CgogICAgcHVibGljIFZlcnNpb25T\ndHJhdGVneSBnZXRWZXJzaW9uU3RyYXRlZ3koKSB7CiAgICAgICAgcmV0dXJu\nIF92ZXJzaW9uU3RyYXRlZ3k7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nVmVyc2lvblN0cmF0ZWd5KFZlcnNpb25TdHJhdGVneSBzdHJhdGVneSkgewog\nICAgICAgIHRoaXMuX3ZlcnNpb25TdHJhdGVneSA9IHN0cmF0ZWd5OwogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIGhhc0NvbW1lbnQoKSB7CiAgICAgICAg\ncmV0dXJuIF9jb21tZW50ICE9IG51bGwgJiYgIV9jb21tZW50LmVxdWFsc0ln\nbm9yZUNhc2UoX25hbWUpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0\nQ29tbWVudCgpIHsKICAgICAgICByZXR1cm4gX2NvbW1lbnQ7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0Q29tbWVudChTdHJpbmcgY29tbWVudCkgewog\nICAgICAgIF9jb21tZW50ID0gY29tbWVudDsKICAgIH0KfQo=\n","encoding":"base64"}

