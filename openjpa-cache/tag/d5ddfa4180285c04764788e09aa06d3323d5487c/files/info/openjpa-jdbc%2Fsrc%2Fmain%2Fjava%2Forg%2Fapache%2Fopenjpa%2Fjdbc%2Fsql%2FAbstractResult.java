{"sha":"ed780bef0c6d17eea673676bc79233054b306bcd","node_id":"MDQ6QmxvYjIwNjM2NDplZDc4MGJlZjBjNmQxN2VlYTY3MzY3NmJjNzkyMzMwNTRiMzA2YmNk","size":26679,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ed780bef0c6d17eea673676bc79233054b306bcd","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5pby5JbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uUmVhZGVyOwpp\nbXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7CmltcG9ydCBqYXZhLm1hdGgu\nQmlnRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRlZ2VyOwppbXBv\ncnQgamF2YS5zcWwuQXJyYXk7CmltcG9ydCBqYXZhLnNxbC5CbG9iOwppbXBv\ncnQgamF2YS5zcWwuQ2xvYjsKaW1wb3J0IGphdmEuc3FsLlJlZjsKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlRpbWU7\nCmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7CmltcG9ydCBqYXZhLnV0aWwu\nQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsKaW1wb3J0IGphdmEu\ndXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBv\ncnQgamF2YS51dGlsLkxvY2FsZTsKaW1wb3J0IGphdmEudXRpbC5NYXA7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkpEQkNGZXRj\naENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMua2VybmVsLkpEQkNTdG9yZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuRmllbGRNYXBwaW5nOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlwZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkZvcmVp\nZ25LZXk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEu\nVGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuQ2xv\nc2VhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5\ncGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuVW5zdXBwb3J0\nZWRFeGNlcHRpb247CgppbXBvcnQgc2VycC51dGlsLlN0cmluZ3M7CgovKioK\nICogQSB7QGxpbmsgUmVzdWx0fSBpbXBsZW1lbnRhdGlvbiBkZXNpZ25lZCB0\nbyBiZSBzdWJjbGFzc2VkIGVhc2lseSBieQogKiBpbXBsZW1lbnRhdGlvbnMu\nIEFsbCA8Y29kZT5nZXQmbHQ7dHlwZSZndDs8L2NvZGU+IGNhbGxzIGFyZSBk\nZWxlZ2F0ZWQgdG8KICogdGhlIHtAbGluayAjZ2V0T2JqZWN0SW50ZXJuYWwo\nT2JqZWN0LGludCxPYmplY3QsSm9pbnMpfSBtZXRob2QsIHdoaWNoCiAqIHNo\nb3VsZCBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzIGFsb25nIHdpdGgg\ne0BsaW5rICNuZXh0SW50ZXJuYWx9LAogKiB7QGxpbmsgI2NvbnRhaW5zSW50\nZXJuYWx9LCBhbmQge0BsaW5rIFJlc3VsdCNzaXplfS4KICogIE1vc3Qgb2Yg\ndGhlIG1ldGhvZHMgb2YgdGhpcyBjbGFzcyB3aWxsIGFjY2VwdCByZXR1cm4g\ndmFsdWVzIGZyb20KICoge0BsaW5rICNnZXRPYmplY3RJbnRlcm5hbChPYmpl\nY3QsaW50LE9iamVjdCxKb2lucyl9IHRoYXQgYXJlIG5vdCBleGFjdGx5CiAq\nIHRoZSByaWdodCB0eXBlLiBGb3IgZXhhbXBsZSwgYW55IG51bWVyaWMgdHlw\nZSBjYW4gYmUgcmV0dXJuZWQgYXMgYW55CiAqIHtAbGluayBOdW1iZXJ9IHR5\ncGUsIGFuZCBkYXRlcywgbG9jYWxlcywgY2hhcmFjdGVycywgYW5kIGJvb2xl\nYW5zIGNhbiBiZQogKiByZXR1cm5lZCBhcyBzdHJpbmdzLgogKgogKiBAYXV0\naG9yIEFiZSBXaGl0ZQogKiBAc2VlIFJlc3VsdFNldFJlc3VsdAogKi8KcHVi\nbGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0UmVzdWx0CiAgICBpbXBsZW1l\nbnRzIFJlc3VsdCB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgSm9pbnMg\nSk9JTlMgPSBuZXcgTm9PcEpvaW5zKCk7CgogICAgcHJpdmF0ZSBNYXAgX2Vh\nZ2VyID0gbnVsbDsKICAgIHByaXZhdGUgQ2xhc3NNYXBwaW5nIF9iYXNlID0g\nbnVsbDsKICAgIHByaXZhdGUgaW50IF9pbmRleCA9IDA7CiAgICBwcml2YXRl\nIGJvb2xlYW4gX2dvdEVhZ2VyID0gZmFsc2U7CiAgICBwcml2YXRlIGJvb2xl\nYW4gX3dhc051bGwgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfbG9j\na2luZyA9IGZhbHNlOwogICAgcHJpdmF0ZSBib29sZWFuIF9pZ25vcmVOZXh0\nID0gZmFsc2U7CiAgICBwcml2YXRlIGJvb2xlYW4gX2xhc3QgPSBmYWxzZTsK\nCiAgICBwdWJsaWMgT2JqZWN0IGdldEVhZ2VyKEZpZWxkTWFwcGluZyBrZXkp\nIHsKICAgICAgICBNYXAgbWFwID0gZ2V0RWFnZXJNYXAodHJ1ZSk7CiAgICAg\nICAgcmV0dXJuIChtYXAgPT0gbnVsbCkgPyBudWxsIDogbWFwLmdldChrZXkp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHB1dEVhZ2VyKEZpZWxkTWFwcGlu\nZyBrZXksIE9iamVjdCByZXMpIHsKICAgICAgICBNYXAgbWFwID0gZ2V0RWFn\nZXJNYXAoZmFsc2UpOwogICAgICAgIGlmIChtYXAgPT0gbnVsbCkgewogICAg\nICAgICAgICBtYXAgPSBuZXcgSGFzaE1hcCgpOwogICAgICAgICAgICBzZXRF\nYWdlck1hcChtYXApOwogICAgICAgIH0KICAgICAgICBtYXAucHV0KGtleSwg\ncmVzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJhdyBlYWdlciBpbmZvcm1h\ndGlvbi4gTWF5IGJlIG51bGwuCiAgICAgKgogICAgICogQHBhcmFtIGNsaWVu\ndCB3aGV0aGVyIHRoZSBjbGllbnQgaXMgYWNjZXNzaW5nIGVhZ2VyIGluZm9y\nbWF0aW9uCiAgICAgKi8KICAgIHByb3RlY3RlZCBNYXAgZ2V0RWFnZXJNYXAo\nYm9vbGVhbiBjbGllbnQpIHsKICAgICAgICBpZiAoY2xpZW50KQogICAgICAg\nICAgICBfZ290RWFnZXIgPSB0cnVlOwogICAgICAgIHJldHVybiBfZWFnZXI7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSYXcgZWFnZXIgaW5mb3JtYXRpb24u\nCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHNldEVhZ2VyTWFwKE1hcCBl\nYWdlcikgewogICAgICAgIF9lYWdlciA9IGVhZ2VyOwogICAgfQoKICAgIC8q\nKgogICAgICogQ2xvc2VzIGFsbCBlYWdlciByZXN1bHRzLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsKICAgICAgICBjbG9zZUVhZ2VyTWFw\nKF9lYWdlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbG9zZSBhbGwgcmVz\ndWx0cyBpbiBlYWdlciBtYXAuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lk\nIGNsb3NlRWFnZXJNYXAoTWFwIGVhZ2VyKSB7CiAgICAgICAgaWYgKGVhZ2Vy\nICE9IG51bGwpIHsKICAgICAgICAgICAgT2JqZWN0IHJlczsKICAgICAgICAg\nICAgZm9yIChJdGVyYXRvciBpdHIgPSBlYWdlci52YWx1ZXMoKS5pdGVyYXRv\ncigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAgcmVzID0g\naXRyLm5leHQoKTsKICAgICAgICAgICAgICAgIGlmIChyZXMgIT0gdGhpcyAm\nJiByZXMgaW5zdGFuY2VvZiBDbG9zZWFibGUpCiAgICAgICAgICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgKChDbG9zZWFibGUp\nIHJlcykuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMg\nZmFsc2UgYnkgZGVmYXVsdC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4g\nc3VwcG9ydHNSYW5kb21BY2Nlc3MoKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBhYnNvbHV0ZShpbnQgcm93KQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIF9nb3RFYWdlciA9IGZhbHNlOwogICAg\nICAgIHJldHVybiBhYnNvbHV0ZUludGVybmFsKHJvdyk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaHJvd3MgYW4gZXhjZXB0aW9uIGJ5IGRlZmF1bHQuCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGFic29sdXRlSW50ZXJuYWwo\naW50IHJvdykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRFeGNlcHRpb24oKTsKICAgIH0KCiAg\nICBwdWJsaWMgYm9vbGVhbiBuZXh0KCkKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICBfZ290RWFnZXIgPSBmYWxzZTsKICAgICAgICBp\nZiAoX2lnbm9yZU5leHQpIHsKICAgICAgICAgICAgX2lnbm9yZU5leHQgPSBm\nYWxzZTsKICAgICAgICAgICAgcmV0dXJuIF9sYXN0OwogICAgICAgIH0KICAg\nICAgICBfbGFzdCA9IG5leHRJbnRlcm5hbCgpOwogICAgICAgIHJldHVybiBf\nbGFzdDsKICAgIH0KCiAgICAvKioKICAgICAqIEFkdmFuY2UgdGhpcyByb3cu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBib29sZWFuIG5leHRJ\nbnRlcm5hbCgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbjsKCiAgICBw\ndWJsaWMgdm9pZCBwdXNoQmFjaygpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgX2lnbm9yZU5leHQgPSB0cnVlOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJucyBhIG5vLW9wIGpvaW5zIG9iamVjdCBieSBk\nZWZhdWx0LgogICAgICovCiAgICBwdWJsaWMgSm9pbnMgbmV3Sm9pbnMoKSB7\nCiAgICAgICAgcmV0dXJuIEpPSU5TOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGNvbnRhaW5zKE9iamVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGNvbnRhaW5zSW50ZXJuYWwob2Jq\nLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBjb250YWluc0Fs\nbChPYmplY3RbXSBvYmpzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHJldHVybiBjb250YWluc0FsbEludGVybmFsKG9ianMsIG51\nbGwpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5zKENvbHVt\nbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIHJldHVybiBjb250YWluc0ludGVybmFsKGNvbCwgam9p\nbnMpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5zQWxsKENv\nbHVtbltdIGNvbHMsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBjb250YWluc0FsbEludGVybmFs\nKGNvbHMsIGpvaW5zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3\naGV0aGVyIHRoaXMgcmVzdWx0IGNvbnRhaW5zIGRhdGEgZm9yIHRoZSBnaXZl\nbiBpZCBvciBjb2x1bW4uCiAgICAgKiBUaGUgaWQgb3IgY29sdW1uIGhhcyBu\nb3QgYmVlZCBwYXNzZWQgdGhyb3VnaCB7QGxpbmsgI3RyYW5zbGF0ZX0uCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBib29sZWFuIGNvbnRhaW5z\nSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbjsKCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0\naGVyIHRoaXMgcmVzdWx0IGNvbnRhaW5zIGRhdGEgZm9yIGFsbCB0aGUgZ2l2\nZW4gaWRzIG9yCiAgICAgKiBjb2x1bW5zLiBUaGUgaWRzIG9yIGNvbHVtbnMg\naGF2ZSBub3QgYmVlbiBwYXNzZWQgdGhyb3VnaAogICAgICoge0BsaW5rICN0\ncmFuc2xhdGV9LiBEZWxlZ2F0ZXMgdG8ge0BsaW5rICNjb250YWluc0ludGVy\nbmFsfSBieSBkZWZhdWx0LgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVh\nbiBjb250YWluc0FsbEludGVybmFsKE9iamVjdFtdIG9ianMsIEpvaW5zIGpv\naW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgb2Jqcy5sZW5ndGg7IGkrKykKICAgICAgICAg\nICAgaWYgKCFjb250YWluc0ludGVybmFsKG9ianNbaV0sIGpvaW5zKSkKICAg\nICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nIGdldEJhc2VNYXBw\naW5nKCkgewogICAgICAgIC8vIGlmIHdlJ3ZlIHJldHVybmVkIGFuIGVhZ2Vy\nIHJlc3VsdCB0aGlzIGNhbGwgbWlnaHQgYmUgZm9yIHRoYXQgZWFnZXIKICAg\nICAgICAvLyByZXN1bHQgaW5zdGVhZCBvZiBvdXIgcHJpbWFyeSBtYXBwaW5n\nLCBzbyByZXR1cm4gbnVsbAogICAgICAgIHJldHVybiAoX2dvdEVhZ2VyKSA/\nIG51bGwgOiBfYmFzZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRCYXNl\nTWFwcGluZyhDbGFzc01hcHBpbmcgYmFzZSkgewogICAgICAgIF9iYXNlID0g\nYmFzZTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGluZGV4T2YoKSB7CiAgICAg\nICAgcmV0dXJuIF9pbmRleDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJ\nbmRleE9mKGludCBpZHgpIHsKICAgICAgICBfaW5kZXggPSBpZHg7CiAgICB9\nCgogICAgcHVibGljIE9iamVjdCBsb2FkKENsYXNzTWFwcGluZyBtYXBwaW5n\nLCBKREJDU3RvcmUgc3RvcmUsCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJh\ndGlvbiBmZXRjaCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gbG9hZChtYXBwaW5nLCBzdG9yZSwgZmV0Y2gsIG51bGwp\nOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbG9hZChDbGFzc01hcHBpbmcg\nbWFwcGluZywgSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENv\nbmZpZ3VyYXRpb24gZmV0Y2gsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiAoKEpEQkNTdG9yZU1h\nbmFnZXIpIHN0b3JlKS5sb2FkKG1hcHBpbmcsIGZldGNoLCBudWxsLCB0aGlz\nKTsKICAgIH0KCiAgICBwdWJsaWMgQXJyYXkgZ2V0QXJyYXkoT2JqZWN0IG9i\naikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1\ncm4gZ2V0QXJyYXlJbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxsKSwgbnVs\nbCk7CiAgICB9CgogICAgcHVibGljIEFycmF5IGdldEFycmF5KENvbHVtbiBj\nb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHJldHVybiBnZXRBcnJheUludGVybmFsKHRyYW5zbGF0ZShj\nb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHByb3RlY3RlZCBBcnJh\neSBnZXRBcnJheUludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiAo\nQXJyYXkpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmosCiAgICAg\nICAgICAgIEphdmFTUUxUeXBlcy5TUUxfQVJSQVksIG51bGwsIGpvaW5zKSk7\nCiAgICB9CgogICAgcHVibGljIElucHV0U3RyZWFtIGdldEFzY2lpU3RyZWFt\nKE9iamVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIGdldEFzY2lpU3RyZWFtSW50ZXJuYWwodHJhbnNsYXRl\nKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBJbnB1dFN0\ncmVhbSBnZXRBc2NpaVN0cmVhbShDb2x1bW4gY29sLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nZ2V0QXNjaWlTdHJlYW1JbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyks\nIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgSW5wdXRTdHJlYW0gZ2V0\nQXNjaWlTdHJlYW1JbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nKElucHV0U3RyZWFtKSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2Jq\nLAogICAgICAgICAgICBKYXZhU1FMVHlwZXMuQVNDSUlfU1RSRUFNLCBudWxs\nLCBqb2lucykpOwogICAgfQoKICAgIHB1YmxpYyBCaWdEZWNpbWFsIGdldEJp\nZ0RlY2ltYWwoT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICByZXR1cm4gZ2V0QmlnRGVjaW1hbEludGVybmFsKHRy\nYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMg\nQmlnRGVjaW1hbCBnZXRCaWdEZWNpbWFsKENvbHVtbiBjb2wsIEpvaW5zIGpv\naW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBnZXRCaWdEZWNpbWFsSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9p\nbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVkIEJpZ0RlY2ltYWwg\nZ2V0QmlnRGVjaW1hbEludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5z\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIE9iamVj\ndCB2YWwgPSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2JqLAogICAg\nICAgICAgICBKYXZhVHlwZXMuQklHREVDSU1BTCwgbnVsbCwgam9pbnMpKTsK\nICAgICAgICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBu\ndWxsOwogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBCaWdEZWNpbWFsKQog\nICAgICAgICAgICByZXR1cm4gKEJpZ0RlY2ltYWwpIHZhbDsKICAgICAgICBy\nZXR1cm4gbmV3IEJpZ0RlY2ltYWwodmFsLnRvU3RyaW5nKCkpOwogICAgfQoK\nICAgIHB1YmxpYyBCaWdJbnRlZ2VyIGdldEJpZ0ludGVnZXIoT2JqZWN0IG9i\naikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1\ncm4gZ2V0QmlnSW50ZWdlckludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwp\nLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgQmlnSW50ZWdlciBnZXRCaWdJ\nbnRlZ2VyKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRCaWdJbnRlZ2Vy\nSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIEJpZ0ludGVnZXIgZ2V0QmlnSW50ZWdlckludGVy\nbmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIE9iamVjdCB2YWwgPSBjaGVja051bGwo\nZ2V0T2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAgICAgICBKYXZhVHlwZXMu\nQklHSU5URUdFUiwgbnVsbCwgam9pbnMpKTsKICAgICAgICBpZiAodmFsID09\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmICh2\nYWwgaW5zdGFuY2VvZiBCaWdJbnRlZ2VyKQogICAgICAgICAgICByZXR1cm4g\nKEJpZ0ludGVnZXIpIHZhbDsKICAgICAgICByZXR1cm4gbmV3IEJpZ0ludGVn\nZXIodmFsLnRvU3RyaW5nKCkpOwogICAgfQoKICAgIHB1YmxpYyBJbnB1dFN0\ncmVhbSBnZXRCaW5hcnlTdHJlYW0oT2JqZWN0IG9iaikKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0QmluYXJ5U3Ry\nZWFtSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAg\nfQoKICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRCaW5hcnlTdHJlYW0oQ29s\ndW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmV0dXJuIGdldEJpbmFyeVN0cmVhbUludGVybmFs\nKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHB1\nYmxpYyBJbnB1dFN0cmVhbSBnZXRMT0JTdHJlYW0oSkRCQ1N0b3JlIHN0b3Jl\nLCBPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIHJldHVybiBnZXRMT0JTdHJlYW1JbnRlcm5hbChzdG9yZSwgdHJh\nbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoKICAgIHByb3RlY3Rl\nZCBJbnB1dFN0cmVhbSBnZXRCaW5hcnlTdHJlYW1JbnRlcm5hbChPYmplY3Qg\nb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICByZXR1cm4gKElucHV0U3RyZWFtKSBjaGVja051bGwoZ2V0\nT2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAgICAgICBKYXZhU1FMVHlwZXMu\nQklOQVJZX1NUUkVBTSwgbnVsbCwgam9pbnMpKTsKICAgIH0KCiAgICBwcm90\nZWN0ZWQgSW5wdXRTdHJlYW0gZ2V0TE9CU3RyZWFtSW50ZXJuYWwoSkRCQ1N0\nb3JlIHN0b3JlLCBPYmplY3Qgb2JqLAogICAgICAgIEpvaW5zIGpvaW5zKSB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gKElucHV0U3Ry\nZWFtKSBjaGVja051bGwoZ2V0U3RyZWFtSW50ZXJuYWwoc3RvcmUsIG9iaiwK\nICAgICAgICAgICAgSmF2YVNRTFR5cGVzLkJJTkFSWV9TVFJFQU0sIG51bGws\nIGpvaW5zKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBCbG9iIGdldEJsb2Io\nT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gZ2V0QmxvYkludGVybmFsKHRyYW5zbGF0ZShvYmosIG51\nbGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgQmxvYiBnZXRCbG9iKENv\nbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBnZXRCbG9iSW50ZXJuYWwodHJhbnNs\nYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIEJsb2IgZ2V0QmxvYkludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5z\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiAoQmxvYikgY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwgSmF2\nYVNRTFR5cGVzLkJMT0IsCiAgICAgICAgICAgIG51bGwsIGpvaW5zKSk7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0Qm9vbGVhbihPYmplY3Qgb2Jq\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiBnZXRCb29sZWFuSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51\nbGwpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGdldEJvb2xlYW4oQ29s\ndW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmV0dXJuIGdldEJvb2xlYW5JbnRlcm5hbCh0cmFu\nc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0\nZWQgYm9vbGVhbiBnZXRCb29sZWFuSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9p\nbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgT2JqZWN0IHZhbCA9IGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChv\nYmosIEphdmFUeXBlcy5CT09MRUFOLAogICAgICAgICAgICBudWxsLCBqb2lu\ncykpOwogICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwogICAgICAgIHJldHVybiBCb29sZWFuLnZhbHVlT2YodmFs\nLnRvU3RyaW5nKCkpLmJvb2xlYW5WYWx1ZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyBieXRlIGdldEJ5dGUoT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0Qnl0ZUludGVybmFsKHRy\nYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMg\nYnl0ZSBnZXRCeXRlKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRCeXRl\nSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIGJ5dGUgZ2V0Qnl0ZUludGVybmFsKE9iamVjdCBv\nYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIE51bWJlciB2YWwgPSAoTnVtYmVyKSBjaGVja051bGwoZ2V0\nT2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAgICAgICBKYXZhVHlwZXMuQllU\nRSwgbnVsbCwgam9pbnMpKTsKICAgICAgICByZXR1cm4gKHZhbCA9PSBudWxs\nKSA/IDAgOiB2YWwuYnl0ZVZhbHVlKCk7CiAgICB9CgogICAgcHVibGljIGJ5\ndGVbXSBnZXRCeXRlcyhPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRCeXRlc0ludGVybmFsKHRy\nYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMg\nYnl0ZVtdIGdldEJ5dGVzKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRC\neXRlc0ludGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwog\nICAgfQoKICAgIHByb3RlY3RlZCBieXRlW10gZ2V0Qnl0ZXNJbnRlcm5hbChP\nYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICByZXR1cm4gKGJ5dGVbXSkgY2hlY2tOdWxsKGdl\ndE9iamVjdEludGVybmFsKG9iaiwKICAgICAgICAgICAgSmF2YVNRTFR5cGVz\nLkJZVEVTLCBudWxsLCBqb2lucykpOwogICAgfQoKICAgIHB1YmxpYyBDYWxl\nbmRhciBnZXRDYWxlbmRhcihPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRDYWxlbmRhckludGVy\nbmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBw\ndWJsaWMgQ2FsZW5kYXIgZ2V0Q2FsZW5kYXIoQ29sdW1uIGNvbCwgSm9pbnMg\nam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIGdldENhbGVuZGFySW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9p\nbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVkIENhbGVuZGFyIGdl\ndENhbGVuZGFySW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgT2JqZWN0IHZh\nbCA9IGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmosIEphdmFUeXBl\ncy5DQUxFTkRBUiwKICAgICAgICAgICAgbnVsbCwgam9pbnMpKTsKICAgICAg\nICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwog\nICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBDYWxlbmRhcikKICAgICAgICAg\nICAgcmV0dXJuIChDYWxlbmRhcikgdmFsOwoKICAgICAgICBDYWxlbmRhciBj\nYWwgPSBDYWxlbmRhci5nZXRJbnN0YW5jZSgpOwogICAgICAgIGNhbC5zZXRU\naW1lKG5ldyBEYXRlKHZhbC50b1N0cmluZygpKSk7CiAgICAgICAgcmV0dXJu\nIGNhbDsKICAgIH0KCiAgICBwdWJsaWMgY2hhciBnZXRDaGFyKE9iamVjdCBv\nYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0\ndXJuIGdldENoYXJJbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxsKSwgbnVs\nbCk7CiAgICB9CgogICAgcHVibGljIGNoYXIgZ2V0Q2hhcihDb2x1bW4gY29s\nLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gZ2V0Q2hhckludGVybmFsKHRyYW5zbGF0ZShjb2ws\nIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHByb3RlY3RlZCBjaGFyIGdl\ndENoYXJJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBPYmplY3QgdmFsID0g\nY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwgSmF2YVR5cGVzLkNI\nQVIsCiAgICAgICAgICAgIG51bGwsIGpvaW5zKSk7CiAgICAgICAgaWYgKHZh\nbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICBpZiAo\ndmFsIGluc3RhbmNlb2YgQ2hhcmFjdGVyKQogICAgICAgICAgICByZXR1cm4g\nKChDaGFyYWN0ZXIpIHZhbCkuY2hhclZhbHVlKCk7CgogICAgICAgIFN0cmlu\nZyBzdHIgPSB2YWwudG9TdHJpbmcoKTsKICAgICAgICByZXR1cm4gKHN0ci5s\nZW5ndGgoKSA9PSAwKSA/IDAgOiBzdHIuY2hhckF0KDApOwogICAgfQoKICAg\nIHB1YmxpYyBSZWFkZXIgZ2V0Q2hhcmFjdGVyU3RyZWFtKE9iamVjdCBvYmop\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIGdldENoYXJhY3RlclN0cmVhbUludGVybmFsKHRyYW5zbGF0ZShvYmosIG51\nbGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgUmVhZGVyIGdldENoYXJh\nY3RlclN0cmVhbShDb2x1bW4gY29sLCBKb2lucyBqb2lucykKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0Q2hhcmFj\ndGVyU3RyZWFtSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lu\ncyk7CiAgICB9CgogICAgcHJvdGVjdGVkIFJlYWRlciBnZXRDaGFyYWN0ZXJT\ndHJlYW1JbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBPYmplY3QgdmFsID0g\nY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwKICAgICAgICAgICAg\nSmF2YVNRTFR5cGVzLkNIQVJfU1RSRUFNLCBudWxsLCBqb2lucykpOwogICAg\nICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIFJlYWRlcikKICAgICAgICAg\nICAgcmV0dXJuIChSZWFkZXIpIHZhbDsKICAgICAgICByZXR1cm4gbmV3IFN0\ncmluZ1JlYWRlcih2YWwudG9TdHJpbmcoKSk7CiAgICB9CgogICAgcHVibGlj\nIENsb2IgZ2V0Q2xvYihPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRDbG9iSW50ZXJuYWwodHJh\nbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBD\nbG9iIGdldENsb2IoQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldENsb2JJ\nbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgQ2xvYiBnZXRDbG9iSW50ZXJuYWwoT2JqZWN0IG9i\naiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgcmV0dXJuIChDbG9iKSBjaGVja051bGwoZ2V0T2JqZWN0SW50\nZXJuYWwob2JqLCBKYXZhU1FMVHlwZXMuQ0xPQiwKICAgICAgICAgICAgbnVs\nbCwgam9pbnMpKTsKICAgIH0KCiAgICBwdWJsaWMgRGF0ZSBnZXREYXRlKE9i\namVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIGdldERhdGVJbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxs\nKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIERhdGUgZ2V0RGF0ZShDb2x1\nbW4gY29sLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICByZXR1cm4gZ2V0RGF0ZUludGVybmFsKHRyYW5zbGF0\nZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHByb3RlY3RlZCBE\nYXRlIGdldERhdGVJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBPYmplY3Qg\ndmFsID0gY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwgSmF2YVR5\ncGVzLkRBVEUsCiAgICAgICAgICAgIG51bGwsIGpvaW5zKSk7CiAgICAgICAg\naWYgKHZhbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICBpZiAodmFsIGluc3RhbmNlb2YgRGF0ZSkKICAgICAgICAgICAgcmV0\ndXJuIChEYXRlKSB2YWw7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHZhbC50\nb1N0cmluZygpKTsKICAgIH0KCiAgICBwdWJsaWMgamF2YS5zcWwuRGF0ZSBn\nZXREYXRlKE9iamVjdCBvYmosIENhbGVuZGFyIGNhbCkKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RGF0ZUludGVy\nbmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBjYWwsIG51bGwpOwogICAgfQoK\nICAgIHB1YmxpYyBqYXZhLnNxbC5EYXRlIGdldERhdGUoQ29sdW1uIGNvbCwg\nQ2FsZW5kYXIgY2FsLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RGF0ZUludGVybmFsKHRy\nYW5zbGF0ZShjb2wsIGpvaW5zKSwgY2FsLCBqb2lucyk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIGphdmEuc3FsLkRhdGUgZ2V0RGF0ZUludGVybmFsKE9iamVj\ndCBvYmosIENhbGVuZGFyIGNhbCwKICAgICAgICBKb2lucyBqb2lucykKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gKGph\ndmEuc3FsLkRhdGUpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmos\nCiAgICAgICAgICAgIEphdmFTUUxUeXBlcy5TUUxfREFURSwgY2FsLCBqb2lu\ncykpOwogICAgfQoKICAgIHB1YmxpYyBkb3VibGUgZ2V0RG91YmxlKE9iamVj\ndCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIGdldERvdWJsZUludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwp\nLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgZG91YmxlIGdldERvdWJsZShD\nb2x1bW4gY29sLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RG91YmxlSW50ZXJuYWwodHJh\nbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVj\ndGVkIGRvdWJsZSBnZXREb3VibGVJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lu\ncyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICBOdW1iZXIgdmFsID0gKE51bWJlcikgY2hlY2tOdWxsKGdldE9iamVjdElu\ndGVybmFsKG9iaiwKICAgICAgICAgICAgSmF2YVR5cGVzLkRPVUJMRSwgbnVs\nbCwgam9pbnMpKTsKICAgICAgICByZXR1cm4gKHZhbCA9PSBudWxsKSA/IDAg\nOiB2YWwuZG91YmxlVmFsdWUoKTsKICAgIH0KCiAgICBwdWJsaWMgZmxvYXQg\nZ2V0RmxvYXQoT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICByZXR1cm4gZ2V0RmxvYXRJbnRlcm5hbCh0cmFuc2xh\ndGUob2JqLCBudWxsKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGZsb2F0\nIGdldEZsb2F0KENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRGbG9hdElu\ndGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoK\nICAgIHByb3RlY3RlZCBmbG9hdCBnZXRGbG9hdEludGVybmFsKE9iamVjdCBv\nYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIE51bWJlciB2YWwgPSAoTnVtYmVyKSBjaGVja051bGwoZ2V0\nT2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAgICAgICBKYXZhVHlwZXMuRkxP\nQVQsIG51bGwsIGpvaW5zKSk7CiAgICAgICAgcmV0dXJuICh2YWwgPT0gbnVs\nbCkgPyAwIDogdmFsLmZsb2F0VmFsdWUoKTsKICAgIH0KCiAgICBwdWJsaWMg\naW50IGdldEludChPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBnZXRJbnRJbnRlcm5hbCh0cmFuc2xh\ndGUob2JqLCBudWxsKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGludCBn\nZXRJbnQoQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldEludEludGVybmFs\nKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHBy\nb3RlY3RlZCBpbnQgZ2V0SW50SW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMg\nam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nTnVtYmVyIHZhbCA9IChOdW1iZXIpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRl\ncm5hbChvYmosCiAgICAgICAgICAgIEphdmFUeXBlcy5JTlQsIG51bGwsIGpv\naW5zKSk7CiAgICAgICAgcmV0dXJuICh2YWwgPT0gbnVsbCkgPyAwIDogdmFs\nLmludFZhbHVlKCk7CiAgICB9CgogICAgcHVibGljIExvY2FsZSBnZXRMb2Nh\nbGUoT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gZ2V0TG9jYWxlSW50ZXJuYWwodHJhbnNsYXRlKG9i\naiwgbnVsbCksIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBMb2NhbGUgZ2V0\nTG9jYWxlKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRMb2NhbGVJbnRl\ncm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAg\nICBwcm90ZWN0ZWQgTG9jYWxlIGdldExvY2FsZUludGVybmFsKE9iamVjdCBv\nYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIE9iamVjdCB2YWwgPSBjaGVja051bGwoZ2V0T2JqZWN0SW50\nZXJuYWwob2JqLCBKYXZhVHlwZXMuTE9DQUxFLAogICAgICAgICAgICBudWxs\nLCBqb2lucykpOwogICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIExv\nY2FsZSkKICAgICAgICAgICAgcmV0dXJuIChMb2NhbGUpIHZhbDsKICAgICAg\nICBTdHJpbmdbXSB2YWxzID0gU3RyaW5ncy5zcGxpdCh2YWwudG9TdHJpbmco\nKSwgIl8iLCAwKTsKICAgICAgICBpZiAodmFscy5sZW5ndGggPCAyKQogICAg\nICAgICAgICB0aHJvdyBuZXcgU1FMRXhjZXB0aW9uKHZhbC50b1N0cmluZygp\nKTsKICAgICAgICBpZiAodmFscy5sZW5ndGggPT0gMikKICAgICAgICAgICAg\ncmV0dXJuIG5ldyBMb2NhbGUodmFsc1swXSwgdmFsc1sxXSk7CiAgICAgICAg\ncmV0dXJuIG5ldyBMb2NhbGUodmFsc1swXSwgdmFsc1sxXSwgdmFsc1syXSk7\nCiAgICB9CgogICAgcHVibGljIGxvbmcgZ2V0TG9uZyhPYmplY3Qgb2JqKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBn\nZXRMb25nSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwog\nICAgfQoKICAgIHB1YmxpYyBsb25nIGdldExvbmcoQ29sdW1uIGNvbCwgSm9p\nbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIGdldExvbmdJbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lu\ncyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgbG9uZyBnZXRMb25n\nSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgTnVtYmVyIHZhbCA9IChOdW1i\nZXIpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmosCiAgICAgICAg\nICAgIEphdmFUeXBlcy5JTlQsIG51bGwsIGpvaW5zKSk7CiAgICAgICAgcmV0\ndXJuICh2YWwgPT0gbnVsbCkgPyAwIDogdmFsLmludFZhbHVlKCk7CiAgICB9\nCgogICAgcHVibGljIE51bWJlciBnZXROdW1iZXIoT2JqZWN0IG9iaikKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0\nTnVtYmVySW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwog\nICAgfQoKICAgIHB1YmxpYyBOdW1iZXIgZ2V0TnVtYmVyKENvbHVtbiBjb2ws\nIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIHJldHVybiBnZXROdW1iZXJJbnRlcm5hbCh0cmFuc2xhdGUoY29s\nLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgTnVtYmVy\nIGdldE51bWJlckludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIE9iamVjdCB2\nYWwgPSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAg\nICAgICBKYXZhVHlwZXMuTlVNQkVSLCBudWxsLCBqb2lucykpOwogICAgICAg\nIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIE51bWJlcikKICAgICAgICAgICAg\ncmV0dXJuIChOdW1iZXIpIHZhbDsKICAgICAgICByZXR1cm4gbmV3IEJpZ0Rl\nY2ltYWwodmFsLnRvU3RyaW5nKCkpOwogICAgfQoKICAgIHB1YmxpYyBPYmpl\nY3QgZ2V0T2JqZWN0KE9iamVjdCBvYmosIGludCBtZXRhVHlwZSwgT2JqZWN0\nIGFyZykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gZ2V0T2JqZWN0SW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCks\nIG1ldGFUeXBlLCBhcmcsIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBPYmpl\nY3QgZ2V0T2JqZWN0KENvbHVtbiBjb2wsIE9iamVjdCBhcmcsIEpvaW5zIGpv\naW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBnZXRPYmplY3RJbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyks\nIGNvbC5nZXRKYXZhVHlwZSgpLAogICAgICAgICAgICBhcmcsIGpvaW5zKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgdmFsdWUgc3RvcmVk\nIGluIHRoZSBnaXZlbiBpZCBvciBjb2x1bW4uCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBhYnN0cmFjdCBPYmplY3QgZ2V0T2JqZWN0SW50ZXJuYWwoT2JqZWN0\nIG9iaiwgaW50IG1ldGFUeXBlLAogICAgICAgIE9iamVjdCBhcmcsIEpvaW5z\nIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb247CgogICAgcHJv\ndGVjdGVkIGFic3RyYWN0IE9iamVjdCBnZXRTdHJlYW1JbnRlcm5hbChKREJD\nU3RvcmUgc3RvcmUsIE9iamVjdCBvYmosCiAgICAgICAgICAgIGludCBtZXRh\nVHlwZSwgT2JqZWN0IGFyZywgSm9pbnMgam9pbnMpIHRocm93cyBTUUxFeGNl\ncHRpb247CiAgICAKICAgIHB1YmxpYyBPYmplY3QgZ2V0U1FMT2JqZWN0KE9i\namVjdCBvYmosIE1hcCBtYXApCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIGdldFNRTE9iamVjdEludGVybmFsKHRyYW5z\nbGF0ZShvYmosIG51bGwpLCBtYXAsIG51bGwpOwogICAgfQoKICAgIHB1Ymxp\nYyBPYmplY3QgZ2V0U1FMT2JqZWN0KENvbHVtbiBjb2wsIE1hcCBtYXAsIEpv\naW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBnZXRTUUxPYmplY3RJbnRlcm5hbCh0cmFuc2xhdGUoY29s\nLCBqb2lucyksIG1hcCwgam9pbnMpOwogICAgfQoKICAgIHByb3RlY3RlZCBP\nYmplY3QgZ2V0U1FMT2JqZWN0SW50ZXJuYWwoT2JqZWN0IG9iaiwgTWFwIG1h\ncCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgcmV0dXJuIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChv\nYmosIEphdmFTUUxUeXBlcy5TUUxfT0JKRUNULAogICAgICAgICAgICBtYXAs\nIGpvaW5zKSk7CiAgICB9CgogICAgcHVibGljIFJlZiBnZXRSZWYoT2JqZWN0\nIG9iaiwgTWFwIG1hcCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gZ2V0UmVmSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwg\nbnVsbCksIG1hcCwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIFJlZiBnZXRS\nZWYoQ29sdW1uIGNvbCwgTWFwIG1hcCwgSm9pbnMgam9pbnMpCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldFJlZklu\ndGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgbWFwLCBqb2lucyk7CiAg\nICB9CgogICAgcHJvdGVjdGVkIFJlZiBnZXRSZWZJbnRlcm5hbChPYmplY3Qg\nb2JqLCBNYXAgbWFwLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gKFJlZikgY2hlY2tOdWxsKGdl\ndE9iamVjdEludGVybmFsKG9iaiwgSmF2YVNRTFR5cGVzLlJFRiwKICAgICAg\nICAgICAgbWFwLCBqb2lucykpOwogICAgfQoKICAgIHB1YmxpYyBzaG9ydCBn\nZXRTaG9ydChPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIHJldHVybiBnZXRTaG9ydEludGVybmFsKHRyYW5zbGF0\nZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgc2hvcnQg\nZ2V0U2hvcnQoQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldFNob3J0SW50\nZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIHNob3J0IGdldFNob3J0SW50ZXJuYWwoT2JqZWN0IG9i\naiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgTnVtYmVyIHZhbCA9IChOdW1iZXIpIGNoZWNrTnVsbChnZXRP\nYmplY3RJbnRlcm5hbChvYmosCiAgICAgICAgICAgIEphdmFUeXBlcy5TSE9S\nVCwgbnVsbCwgam9pbnMpKTsKICAgICAgICByZXR1cm4gKHZhbCA9PSBudWxs\nKSA/IDAgOiB2YWwuc2hvcnRWYWx1ZSgpOwogICAgfQoKICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0U3RyaW5nKE9iamVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldFN0cmluZ0ludGVybmFs\nKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJs\naWMgU3RyaW5nIGdldFN0cmluZyhDb2x1bW4gY29sLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nZ2V0U3RyaW5nSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lu\ncyk7CiAgICB9CgogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRTdHJpbmdJbnRl\ncm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICBPYmplY3QgdmFsID0gY2hlY2tOdWxs\nKGdldE9iamVjdEludGVybmFsKG9iaiwgSmF2YVR5cGVzLlNUUklORywKICAg\nICAgICAgICAgbnVsbCwgam9pbnMpKTsKICAgICAgICByZXR1cm4gKHZhbCA9\nPSBudWxsKSA/IG51bGwgOiB2YWwudG9TdHJpbmcoKTsKICAgIH0KCiAgICBw\ndWJsaWMgVGltZSBnZXRUaW1lKE9iamVjdCBvYmosIENhbGVuZGFyIGNhbCkK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nZ2V0VGltZUludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBjYWwsIG51\nbGwpOwogICAgfQoKICAgIHB1YmxpYyBUaW1lIGdldFRpbWUoQ29sdW1uIGNv\nbCwgQ2FsZW5kYXIgY2FsLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0VGltZUludGVybmFs\nKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgY2FsLCBqb2lucyk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIFRpbWUgZ2V0VGltZUludGVybmFsKE9iamVjdCBvYmos\nIENhbGVuZGFyIGNhbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIChUaW1lKSBjaGVja051bGwo\nZ2V0T2JqZWN0SW50ZXJuYWwob2JqLCBKYXZhU1FMVHlwZXMuVElNRSwKICAg\nICAgICAgICAgY2FsLCBqb2lucykpOwogICAgfQoKICAgIHB1YmxpYyBUaW1l\nc3RhbXAgZ2V0VGltZXN0YW1wKE9iamVjdCBvYmosIENhbGVuZGFyIGNhbCkK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nZ2V0VGltZXN0YW1wSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIGNh\nbCwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIFRpbWVzdGFtcCBnZXRUaW1l\nc3RhbXAoQ29sdW1uIGNvbCwgQ2FsZW5kYXIgY2FsLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nZ2V0VGltZXN0YW1wSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBj\nYWwsIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgVGltZXN0YW1wIGdl\ndFRpbWVzdGFtcEludGVybmFsKE9iamVjdCBvYmosIENhbGVuZGFyIGNhbCwK\nICAgICAgICBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICByZXR1cm4gKFRpbWVzdGFtcCkgY2hlY2tOdWxsKGdl\ndE9iamVjdEludGVybmFsKG9iaiwKICAgICAgICAgICAgSmF2YVNRTFR5cGVz\nLlRJTUVTVEFNUCwgY2FsLCBqb2lucykpOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIHdhc051bGwoKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHJldHVybiBfd2FzTnVsbDsKICAgIH0KCiAgICBwcm90ZWN0\nZWQgT2JqZWN0IGNoZWNrTnVsbChPYmplY3QgdmFsKSB7CiAgICAgICAgX3dh\nc051bGwgPSAodmFsID09IG51bGwpOwogICAgICAgIHJldHVybiB2YWw7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0TG9ja2luZyhib29sZWFuIGxvY2tp\nbmcpIHsKICAgICAgICBfbG9ja2luZyA9IGxvY2tpbmc7CiAgICB9CgogICAg\ncHVibGljIGJvb2xlYW4gaXNMb2NraW5nKCkgewogICAgICAgIHJldHVybiBf\nbG9ja2luZzsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFydERhdGFSZXF1\nZXN0KE9iamVjdCBtYXBwaW5nKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nZW5kRGF0YVJlcXVlc3QoKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFu\nc2xhdGUgdGhlIHVzZXItZ2l2ZW4gaWQgb3IgY29sdW1uLiBUaGlzIG1ldGhv\nZCBpcyBjYWxsZWQgYmVmb3JlCiAgICAgKiBkZWxlZ2F0aW5nIHRvIGFueSA8\nY29kZT5nZXQqSW50ZXJuYWw8L2NvZGU+IG1ldGhvZHMuIFJldHVybiB0aGUK\nICAgICAqIG9yaWdpbmFsIHZhbHVlIGJ5IGRlZmF1bHQuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBPYmplY3QgdHJhbnNsYXRlKE9iamVjdCBvYmosIEpvaW5z\nIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBvYmo7CiAgICB9CgogICAgLyoqCiAgICAgKiBEby1ub3RoaW5n\nIGpvaW5zIGltcGxlbWVudGF0aW9uLgogICAgICovCiAgICBwcml2YXRlIHN0\nYXRpYyBjbGFzcyBOb09wSm9pbnMKICAgICAgICBpbXBsZW1lbnRzIEpvaW5z\nIHsKCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNFbXB0eSgpIHsKICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nYm9vbGVhbiBpc091dGVyKCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgSm9pbnMgY3Jvc3NKb2luKFRh\nYmxlIGxvY2FsVGFibGUsIFRhYmxlIGZvcmVpZ25UYWJsZSkgewogICAgICAg\nICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBK\nb2lucyBqb2luKEZvcmVpZ25LZXkgZmssIGJvb2xlYW4gaW52ZXJzZSwgYm9v\nbGVhbiB0b01hbnkpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgSm9pbnMgb3V0ZXJKb2luKEZvcmVpZ25L\nZXkgZmssIGJvb2xlYW4gaW52ZXJzZSwgYm9vbGVhbiB0b01hbnkpIHsKICAg\nICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgSm9pbnMgam9pblJlbGF0aW9uKFN0cmluZyBuYW1lLCBGb3JlaWduS2V5\nIGZrLCAKICAgICAgICAgICAgQ2xhc3NNYXBwaW5nIHRhcmdldCwgaW50IHN1\nYnMsIGJvb2xlYW4gaW52ZXJzZSwgYm9vbGVhbiB0b01hbnkpIHsKICAgICAg\nICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nSm9pbnMgb3V0ZXJKb2luUmVsYXRpb24oU3RyaW5nIG5hbWUsIEZvcmVpZ25L\nZXkgZmssCiAgICAgICAgICAgIENsYXNzTWFwcGluZyB0YXJnZXQsIGludCBz\ndWJzLCBib29sZWFuIGludmVyc2UsIGJvb2xlYW4gdG9NYW55KSB7CiAgICAg\nICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIEpvaW5zIHNldFZhcmlhYmxlKFN0cmluZyB2YXIpIHsKICAgICAgICAgICAg\ncmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgSm9pbnMg\nc2V0U3Vic2VsZWN0KFN0cmluZyBhbGlhcykgewogICAgICAgICAgICByZXR1\ncm4gdGhpczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGFwcGVu\nZFRvKFNRTEJ1ZmZlciBidWYpIHsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

