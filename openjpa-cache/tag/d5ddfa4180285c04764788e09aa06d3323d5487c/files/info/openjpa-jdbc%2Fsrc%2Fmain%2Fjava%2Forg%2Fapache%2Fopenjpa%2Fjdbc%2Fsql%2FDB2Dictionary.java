{"sha":"8dea6ced5bc6d8bb26e66902e421bb384af8766d","node_id":"MDQ6QmxvYjIwNjM2NDo4ZGVhNmNlZDViYzZkOGJiMjZlNjY5MDJlNDIxYmIzODRhZjg3NjZk","size":32707,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8dea6ced5bc6d8bb26e66902e421bb384af8766d","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWw7DQoNCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7\nDQppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsNCmltcG9ydCBqYXZhLnNx\nbC5EYXRhYmFzZU1ldGFEYXRhOw0KaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2Vw\ndGlvbjsNCmltcG9ydCBqYXZhLnNxbC5UeXBlczsNCmltcG9ydCBqYXZhLnV0\naWwuQXJyYXlzOw0KaW1wb3J0IGphdmEudXRpbC5TdHJpbmdUb2tlbml6ZXI7\nDQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5MaXQ7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuUGFyYW07DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuVmFs\nOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1\nbW47DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLklu\nZGV4Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5T\nY2hlbWE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLlNlcXVlbmNlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5UYWJsZTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkZpbHRlcnM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5K\nYXZhVHlwZXM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3Bl\nbkpQQUV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsNCg0KaW1wb3J0IHNlcnAudXRpbC5T\ndHJpbmdzOw0KDQovKioNCiAqIERpY3Rpb25hcnkgZm9yIElCTSBEQjIgZGF0\nYWJhc2UuDQogKi8NCnB1YmxpYyBjbGFzcyBEQjJEaWN0aW9uYXJ5DQogICAg\nZXh0ZW5kcyBBYnN0cmFjdERCMkRpY3Rpb25hcnkgew0KICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBh\nY2thZ2UNCiAgICAgICAgKERCMkRpY3Rpb25hcnkuY2xhc3MpOw0KDQogICAg\ncHVibGljIFN0cmluZyBvcHRpbWl6ZUNsYXVzZSA9ICJvcHRpbWl6ZSBmb3Ii\nOw0KICAgIHB1YmxpYyBTdHJpbmcgcm93Q2xhdXNlID0gInJvdyI7DQogICAg\ncHJvdGVjdGVkIGludCBkYjJTZXJ2ZXJUeXBlID0gMDsNCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIGludCBkYjJJU2VyaWVzVjVSM09yRWFybGllciA9IDE7\nDQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgZGIyVURCVjgxT3JFYXJs\naWVyID0gMjsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBkYjJaT1NW\nOHhPckxhdGVyID0gMzsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBk\nYjJVREJWODJPckxhdGVyID0gNDsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBkYjJJU2VyaWVzVjVSNE9yTGF0ZXIgPSA1Ow0KCXByaXZhdGUgc3Rh\ndGljIGZpbmFsIFN0cmluZyBmb3JVcGRhdGUgPSAiRk9SIFVQREFURSI7DQog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIHdpdGhSU0NsYXVzZSA9\nICJXSVRIIFJTIjsNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nd2l0aFJSQ2xhdXNlID0gIldJVEggUlIiOw0KICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIFN0cmluZyB1c2VLZWVwVXBkYXRlTG9ja0NsYXVzZQ0KICAgICAg\nICA9ICJVU0UgQU5EIEtFRVAgVVBEQVRFIExPQ0tTIjsNCiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgdXNlS2VlcEV4Y2x1c2l2ZUxvY2tDbGF1\nc2UNCiAgICAgICAgPSAiVVNFIEFORCBLRUVQIEVYQ0xVU0lWRSBMT0NLUyI7\nDQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIGZvclJlYWRPbmx5\nQ2xhdXNlID0gIkZPUiBSRUFEIE9OTFkiOw0KICAgIHByb3RlY3RlZCBTdHJp\nbmcgZGF0YWJhc2VQcm9kdWN0TmFtZSA9IG51bGw7DQogICAgcHJvdGVjdGVk\nIFN0cmluZyBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uID0gbnVsbDsNCiAgICBw\ncm90ZWN0ZWQgaW50IG1haiA9IDA7DQogICAgcHJvdGVjdGVkIGludCBtaW4g\nPSAwOw0KICAgIA0KICAgIHByaXZhdGUgaW50IGRlZmF1bHRCYXRjaExpbWl0\nID0gMTAwOw0KDQogICAgcHVibGljIERCMkRpY3Rpb25hcnkoKSB7DQogICAg\nICAgIHBsYXRmb3JtID0gIkRCMiI7DQogICAgICAgIHZhbGlkYXRpb25TUUwg\nPSAiU0VMRUNUIERJU1RJTkNUKENVUlJFTlQgVElNRVNUQU1QKSBGUk9NICIN\nCiAgICAgICAgICAgICsgIlNZU0lCTS5TWVNUQUJMRVMiOw0KICAgICAgICBz\ndXBwb3J0c1NlbGVjdEVuZEluZGV4ID0gdHJ1ZTsNCg0KICAgICAgICBuZXh0\nU2VxdWVuY2VRdWVyeSA9ICJWQUxVRVMgTkVYVFZBTCBGT1IgezB9IjsNCg0K\nICAgICAgICBzZXF1ZW5jZVNRTCA9ICJTRUxFQ1QgU0VRU0NIRU1BIEFTIFNF\nUVVFTkNFX1NDSEVNQSwgIg0KICAgICAgICAgICAgKyAiU0VRTkFNRSBBUyBT\nRVFVRU5DRV9OQU1FIEZST00gU1lTQ0FULlNFUVVFTkNFUyI7DQogICAgICAg\nIHNlcXVlbmNlU2NoZW1hU1FMID0gIlNFUVNDSEVNQSA9ID8iOw0KICAgICAg\nICBzZXF1ZW5jZU5hbWVTUUwgPSAiU0VRTkFNRSA9ID8iOw0KICAgICAgICBj\naGFyYWN0ZXJDb2x1bW5TaXplID0gMjU0Ow0KDQogICAgICAgIGJpbmFyeVR5\ncGVOYW1lID0gIkJMT0IoMU0pIjsNCiAgICAgICAgbG9uZ1ZhcmJpbmFyeVR5\ncGVOYW1lID0gIkJMT0IoMU0pIjsNCiAgICAgICAgdmFyYmluYXJ5VHlwZU5h\nbWUgPSAiQkxPQigxTSkiOw0KICAgICAgICBjbG9iVHlwZU5hbWUgPSAiQ0xP\nQigxTSkiOw0KICAgICAgICBsb25nVmFyY2hhclR5cGVOYW1lID0gIkxPTkcg\nVkFSQ0hBUiI7DQogICAgICAgIGRhdGVQcmVjaXNpb24gPSBNSUNSTzsNCiAg\nICAgICAgc3RvcmVDaGFyc0FzTnVtYmVycyA9IGZhbHNlOw0KDQogICAgICAg\nIGZpeGVkU2l6ZVR5cGVOYW1lU2V0LmFkZEFsbChBcnJheXMuYXNMaXN0KG5l\ndyBTdHJpbmdbXXsNCiAgICAgICAgICAgICJMT05HIFZBUkNIQVIgRk9SIEJJ\nVCBEQVRBIiwgIkxPTkcgVkFSQ0hBUiIsICJMT05HIFZBUkdSQVBISUMiLA0K\nICAgICAgICB9KSk7DQogICAgICAgIHN5c3RlbVNjaGVtYXMgPSBuZXcgU3Ry\naW5nKA0KICAgICAgICAgICAgICAgICJTWVNDQVQsU1lTSUJNLFNZU1NUQVQs\nU1lTSUJNQURNLFNZU1RPT0xTIik7DQogICAgICAgIG1heENvbnN0cmFpbnRO\nYW1lTGVuZ3RoID0gMTg7DQogICAgICAgIG1heEluZGV4TmFtZUxlbmd0aCA9\nIDE4Ow0KICAgICAgICBtYXhDb2x1bW5OYW1lTGVuZ3RoID0gMzA7DQogICAg\nICAgIHN1cHBvcnRzRGVmZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOw0KICAg\nICAgICBzdXBwb3J0c0RlZmF1bHREZWxldGVBY3Rpb24gPSBmYWxzZTsNCiAg\nICAgICAgc3VwcG9ydHNBbHRlclRhYmxlV2l0aERyb3BDb2x1bW4gPSBmYWxz\nZTsNCg0KICAgICAgICBzdXBwb3J0c051bGxUYWJsZUZvckdldENvbHVtbnMg\nPSBmYWxzZTsNCiAgICAgICAgcmVxdWlyZXNDYXN0Rm9yTWF0aEZ1bmN0aW9u\ncyA9IHRydWU7DQogICAgICAgIHJlcXVpcmVzQ2FzdEZvckNvbXBhcmlzb25z\nID0gdHJ1ZTsNCg0KICAgICAgICByZXNlcnZlZFdvcmRTZXQuYWRkQWxsKEFy\ncmF5cy5hc0xpc3QobmV3IFN0cmluZ1tdew0KICAgICAgICAgICAgIkFGVEVS\nIiwgIkFMSUFTIiwgIkFMTE9XIiwgIkFQUExJQ0FUSU9OIiwgIkFTU09DSUFU\nRSIsICJBU1VUSU1FIiwNCiAgICAgICAgICAgICJBVURJVCIsICJBVVgiLCAi\nQVVYSUxJQVJZIiwgIkJFRk9SRSIsICJCSU5BUlkiLCAiQlVGRkVSUE9PTCIs\nDQogICAgICAgICAgICAiQ0FDSEUiLCAiQ0FMTCIsICJDQUxMRUQiLCAiQ0FQ\nVFVSRSIsICJDQVJESU5BTElUWSIsICJDQ1NJRCIsDQogICAgICAgICAgICAi\nQ0xVU1RFUiIsICJDT0xMRUNUSU9OIiwgIkNPTExJRCIsICJDT01NRU5UIiwg\nIkNPTkNBVCIsDQogICAgICAgICAgICAiQ09ORElUSU9OIiwgIkNPTlRBSU5T\nIiwgIkNPVU5UX0JJRyIsICJDVVJSRU5UX0xDX0NUWVBFIiwNCiAgICAgICAg\nICAgICJDVVJSRU5UX1BBVEgiLCAiQ1VSUkVOVF9TRVJWRVIiLCAiQ1VSUkVO\nVF9USU1FWk9ORSIsICJDWUNMRSIsDQogICAgICAgICAgICAiREFUQSIsICJE\nQVRBQkFTRSIsICJEQVlTIiwgIkRCMkdFTkVSQUwiLCAiREIyR0VOUkwiLCAi\nREIyU1FMIiwNCiAgICAgICAgICAgICJEQklORk8iLCAiREVGQVVMVFMiLCAi\nREVGSU5JVElPTiIsICJERVRFUk1JTklTVElDIiwgIkRJU0FMTE9XIiwNCiAg\nICAgICAgICAgICJETyIsICJEU05IQVRUUiIsICJEU1NJWkUiLCAiRFlOQU1J\nQyIsICJFQUNIIiwgIkVESVRQUk9DIiwgIkVMU0VJRiIsDQogICAgICAgICAg\nICAiRU5DT0RJTkciLCAiRU5ELUVYRUMxIiwgIkVSQVNFIiwgIkVYQ0xVRElO\nRyIsICJFWElUIiwgIkZFTkNFRCIsDQogICAgICAgICAgICAiRklFTERQUk9D\nIiwgIkZJTEUiLCAiRklOQUwiLCAiRlJFRSIsICJGVU5DVElPTiIsICJHRU5F\nUkFMIiwNCiAgICAgICAgICAgICJHRU5FUkFURUQiLCAiR1JBUEhJQyIsICJI\nQU5ETEVSIiwgIkhPTEQiLCAiSE9VUlMiLCAiSUYiLA0KICAgICAgICAgICAg\nIklOQ0xVRElORyIsICJJTkNSRU1FTlQiLCAiSU5ERVgiLCAiSU5IRVJJVCIs\nICJJTk9VVCIsICJJTlRFR1JJVFkiLA0KICAgICAgICAgICAgIklTT0JJRCIs\nICJJVEVSQVRFIiwgIkpBUiIsICJKQVZBIiwgIkxBQkVMIiwgIkxDX0NUWVBF\nIiwgIkxFQVZFIiwNCiAgICAgICAgICAgICJMSU5LVFlQRSIsICJMT0NBTEUi\nLCAiTE9DQVRPUiIsICJMT0NBVE9SUyIsICJMT0NLIiwgIkxPQ0tNQVgiLA0K\nICAgICAgICAgICAgIkxPQ0tTSVpFIiwgIkxPTkciLCAiTE9PUCIsICJNQVhW\nQUxVRSIsICJNSUNST1NFQ09ORCIsDQogICAgICAgICAgICAiTUlDUk9TRUNP\nTkRTIiwgIk1JTlVURVMiLCAiTUlOVkFMVUUiLCAiTU9ERSIsICJNT0RJRklF\nUyIsICJNT05USFMiLA0KICAgICAgICAgICAgIk5FVyIsICJORVdfVEFCTEUi\nLCAiTk9DQUNIRSIsICJOT0NZQ0xFIiwgIk5PREVOQU1FIiwgIk5PREVOVU1C\nRVIiLA0KICAgICAgICAgICAgIk5PTUFYVkFMVUUiLCAiTk9NSU5WQUxVRSIs\nICJOT09SREVSIiwgIk5VTExTIiwgIk5VTVBBUlRTIiwgIk9CSUQiLA0KICAg\nICAgICAgICAgIk9MRCIsICJPTERfVEFCTEUiLCAiT1BUSU1JWkFUSU9OIiwg\nIk9QVElNSVpFIiwgIk9VVCIsICJPVkVSUklESU5HIiwNCiAgICAgICAgICAg\nICJQQUNLQUdFIiwgIlBBUkFNRVRFUiIsICJQQVJUIiwgIlBBUlRJVElPTiIs\nICJQQVRIIiwgIlBJRUNFU0laRSIsDQogICAgICAgICAgICAiUExBTiIsICJQ\nUklRVFkiLCAiUFJPR1JBTSIsICJQU0lEIiwgIlFVRVJZTk8iLCAiUkVBRFMi\nLCAiUkVDT1ZFUlkiLA0KICAgICAgICAgICAgIlJFRkVSRU5DSU5HIiwgIlJF\nTEVBU0UiLCAiUkVOQU1FIiwgIlJFUEVBVCIsICJSRVNFVCIsICJSRVNJR05B\nTCIsDQogICAgICAgICAgICAiUkVTVEFSVCIsICJSRVNVTFQiLCAiUkVTVUxU\nX1NFVF9MT0NBVE9SIiwgIlJFVFVSTiIsICJSRVRVUk5TIiwNCiAgICAgICAg\nICAgICJST1VUSU5FIiwgIlJPVyIsICJSUk4iLCAiUlVOIiwgIlNBVkVQT0lO\nVCIsICJTQ1JBVENIUEFEIiwNCiAgICAgICAgICAgICJTRUNPTkRTIiwgIlNF\nQ1FUWSIsICJTRUNVUklUWSIsICJTRU5TSVRJVkUiLCAiU0lHTkFMIiwgIlNJ\nTVBMRSIsDQogICAgICAgICAgICAiU09VUkNFIiwgIlNQRUNJRklDIiwgIlNR\nTElEIiwgIlNUQU5EQVJEIiwgIlNUQVJUIiwgIlNUQVRJQyIsDQogICAgICAg\nICAgICAiU1RBWSIsICJTVE9HUk9VUCIsICJTVE9SRVMiLCAiU1RZTEUiLCAi\nU1VCUEFHRVMiLCAiU1lOT05ZTSIsDQogICAgICAgICAgICAiU1lTRlVOIiwg\nIlNZU0lCTSIsICJTWVNQUk9DIiwgIlNZU1RFTSIsICJUQUJMRVNQQUNFIiwg\nIlRSSUdHRVIiLA0KICAgICAgICAgICAgIlRZUEUiLCAiVU5ETyIsICJVTlRJ\nTCIsICJWQUxJRFBST0MiLCAiVkFSSUFCTEUiLCAiVkFSSUFOVCIsICJWQ0FU\nIiwNCiAgICAgICAgICAgICJWT0xVTUVTIiwgIldISUxFIiwgIldMTSIsICJZ\nRUFSUyIsDQogICAgICAgIH0pKTsNCiAgICAgICAgDQogICAgICAgIHN1cGVy\nLnNldEJhdGNoTGltaXQoZGVmYXVsdEJhdGNoTGltaXQpOw0KICAgICAgICAN\nCiAgICAgICAgc2VsZWN0V29yZFNldC5hZGQoIldJVEgiKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgYm9vbGVhbiBzdXBwb3J0c1JhbmRvbUFjY2Vzc1Jlc3Vs\ndFNldChTZWxlY3Qgc2VsLA0KICAgICAgICBib29sZWFuIGZvclVwZGF0ZSkg\new0KICAgICAgICByZXR1cm4gIWZvclVwZGF0ZQ0KICAgICAgICAgICAgJiYg\nc3VwZXIuc3VwcG9ydHNSYW5kb21BY2Nlc3NSZXN1bHRTZXQoc2VsLCBmb3JV\ncGRhdGUpOw0KICAgIH0NCg0KICAgIHByb3RlY3RlZCB2b2lkIGFwcGVuZFNl\nbGVjdFJhbmdlKFNRTEJ1ZmZlciBidWYsIGxvbmcgc3RhcnQsIGxvbmcgZW5k\nLA0KICAgICAgICBib29sZWFuIHN1YnNlbGVjdCkgew0KICAgICAgICAvLyBh\ncHBlbmRzIHRoZSBsaXRlcmFsIHJhbmdlIHN0cmluZywgc2luY2UgREIyIGlz\nIHVuYWJsZSB0byBoYW5kbGUNCiAgICAgICAgLy8gYSBib3VuZCBwYXJhbWV0\nZXIgZm9yIGl0DQogICAgICAgIC8vIGRvIG5vdCBnZW5lcmF0ZSBGRVRDSCBG\nSVJTVCBjbGF1c2UgZm9yIHN1YnNlbGVjdA0KICAgICAgICBpZiAoIXN1YnNl\nbGVjdCkNCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBGRVRDSCBGSVJTVCAi\nKS5hcHBlbmQoTG9uZy50b1N0cmluZyhlbmQpKS4NCiAgICAgICAgICAgICAg\nICBhcHBlbmQoIiBST1dTIE9OTFkiKTsNCiAgICB9DQoNCiAgICBwcm90ZWN0\nZWQgdm9pZCBhcHBlbmRTZWxlY3QoU1FMQnVmZmVyIHNlbGVjdFNRTCwgT2Jq\nZWN0IGFsaWFzLCBTZWxlY3Qgc2VsLA0KICAgICAgICBpbnQgaWR4KSB7DQog\nICAgICAgIC8vIGlmIHRoaXMgaXMgYSBsaXRlcmFsIHZhbHVlLCBhZGQgYSBj\nYXN0Li4uDQogICAgICAgIE9iamVjdCB2YWwgPSBzZWwuZ2V0U2VsZWN0cygp\nLmdldChpZHgpOw0KICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgTGl0KQ0K\nICAgICAgICAgICAgc2VsZWN0U1FMLmFwcGVuZCgiQ0FTVCgiKTsNCg0KICAg\nICAgICAvLyAuLi4gYW5kIGFkZCB0aGUgc2VsZWN0IHBlciBzdXBlcidzIGJl\naGF2aW9yLi4uDQogICAgICAgIHN1cGVyLmFwcGVuZFNlbGVjdChzZWxlY3RT\nUUwsIGFsaWFzLCBzZWwsIGlkeCk7DQoNCiAgICAgICAgLy8gLi4uIGFuZCBm\naW5pc2ggdGhlIGNhc3QNCiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIExp\ndCkgew0KICAgICAgICAgICAgQ2xhc3MgYyA9ICgoTGl0KSB2YWwpLmdldFR5\ncGUoKTsNCiAgICAgICAgICAgIGludCBqYXZhVHlwZUNvZGUgPSBKYXZhVHlw\nZXMuZ2V0VHlwZUNvZGUoYyk7DQogICAgICAgICAgICBpbnQgamRiY1R5cGVD\nb2RlID0gZ2V0SkRCQ1R5cGUoamF2YVR5cGVDb2RlLCBmYWxzZSk7DQogICAg\nICAgICAgICBTdHJpbmcgdHlwZU5hbWUgPSBnZXRUeXBlTmFtZShqZGJjVHlw\nZUNvZGUpOw0KICAgICAgICAgICAgc2VsZWN0U1FMLmFwcGVuZCgiIEFTICIg\nKyB0eXBlTmFtZSk7DQoNCiAgICAgICAgICAgIC8vIGlmIHRoZSBsaXRlcmFs\nIGlzIGEgc3RyaW5nLCB1c2UgdGhlIGRlZmF1bHQgY2hhciBjb2wgc2l6ZQ0K\nICAgICAgICAgICAgLy8gaW4gdGhlIGNhc3Qgc3RhdGVtZW50Lg0KICAgICAg\nICAgICAgaWYgKFN0cmluZy5jbGFzcy5lcXVhbHMoYykpDQogICAgICAgICAg\nICAgICAgc2VsZWN0U1FMLmFwcGVuZCgiKCIgKyBjaGFyYWN0ZXJDb2x1bW5T\naXplICsgIikiKTsNCg0KICAgICAgICAgICAgc2VsZWN0U1FMLmFwcGVuZCgi\nKSIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIFN0cmluZ1td\nIGdldENyZWF0ZVNlcXVlbmNlU1FMKFNlcXVlbmNlIHNlcSkgew0KICAgICAg\nICBTdHJpbmdbXSBzcWwgPSBzdXBlci5nZXRDcmVhdGVTZXF1ZW5jZVNRTChz\nZXEpOw0KICAgICAgICBpZiAoc2VxLmdldEFsbG9jYXRlKCkgPiAxKQ0KICAg\nICAgICAgICAgc3FsWzBdICs9ICIgQ0FDSEUgIiArIHNlcS5nZXRBbGxvY2F0\nZSgpOw0KICAgICAgICByZXR1cm4gc3FsOw0KICAgIH0NCg0KICAgIHByb3Rl\nY3RlZCBTdHJpbmcgZ2V0U2VxdWVuY2VzU1FMKFN0cmluZyBzY2hlbWFOYW1l\nLCBTdHJpbmcgc2VxdWVuY2VOYW1lKSB7DQogICAgICAgIFN0cmluZ0J1ZmZl\nciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7DQogICAgICAgIGJ1Zi5hcHBl\nbmQoc2VxdWVuY2VTUUwpOw0KICAgICAgICBpZiAoc2NoZW1hTmFtZSAhPSBu\ndWxsIHx8IHNlcXVlbmNlTmFtZSAhPSBudWxsKQ0KICAgICAgICAgICAgYnVm\nLmFwcGVuZCgiIFdIRVJFICIpOw0KICAgICAgICBpZiAoc2NoZW1hTmFtZSAh\nPSBudWxsKSB7DQogICAgICAgICAgICBidWYuYXBwZW5kKHNlcXVlbmNlU2No\nZW1hU1FMKTsNCiAgICAgICAgICAgIGlmIChzZXF1ZW5jZU5hbWUgIT0gbnVs\nbCkNCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIgQU5EICIpOw0KICAg\nICAgICB9DQogICAgICAgIGlmIChzZXF1ZW5jZU5hbWUgIT0gbnVsbCkNCiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoc2VxdWVuY2VOYW1lU1FMKTsNCiAgICAg\nICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOw0KICAgIH0NCg0KICAgIHB1Ymxp\nYyBDb25uZWN0aW9uIGRlY29yYXRlKENvbm5lY3Rpb24gY29ubikNCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7DQogICAgICAgIC8vIHNvbWUgdmVy\nc2lvbnMgb2YgdGhlIERCMiBkcml2ZXIgc2VlbSB0byBkZWZhdWx0IHRvDQog\nICAgICAgIC8vIFJFQURfVU5DT01NSVRURUQsIHdoaWNoIHdpbGwgcHJldmVu\ndCBsb2NraW5nIGZyb20gd29ya2luZw0KICAgICAgICAvLyAobXVsdGlwbGUg\nU0VMRUNUIC4uLiBGT1IgVVBEQVRFIHN0YXRlbWVudHMgYXJlIGFsbG93ZWQg\nb24NCiAgICAgICAgLy8gdGhlIHNhbWUgaW5zdGFuY2UpOyBpZiB3ZSBoYXZl\nIG5vdCBvdmVycmlkZGVuIHRoZQ0KICAgICAgICAvLyB0cmFuc2FjdGlvbiBp\nc29sYXRpb24gaW4gdGhlIGNvbmZpZ3VyYXRpb24sIGRlZmF1bHQgdG8NCiAg\nICAgICAgLy8gVFJBTlNBQ1RJT05fUkVBRF9DT01NSVRURUQNCiAgICAgICAg\nY29ubiA9IHN1cGVyLmRlY29yYXRlKGNvbm4pOw0KDQogICAgICAgIGlmIChj\nb25mLmdldFRyYW5zYWN0aW9uSXNvbGF0aW9uQ29uc3RhbnQoKSA9PSAtMQ0K\nICAgICAgICAgICAgJiYgY29ubi5nZXRUcmFuc2FjdGlvbklzb2xhdGlvbigp\nIDwgY29ubi5UUkFOU0FDVElPTl9SRUFEX0NPTU1JVFRFRCkNCiAgICAgICAg\nICAgIGNvbm4uc2V0VHJhbnNhY3Rpb25Jc29sYXRpb24oY29ubi5UUkFOU0FD\nVElPTl9SRUFEX0NPTU1JVFRFRCk7DQoNCiAgICAgICAgcmV0dXJuIGNvbm47\nDQogICAgfQ0KDQogICAgcHJpdmF0ZSBib29sZWFuIGlzSkRCQzMoRGF0YWJh\nc2VNZXRhRGF0YSBtZXRhKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAg\nICAvLyBKREJDMy1vbmx5IG1ldGhvZCwgc28gaXQgbWlnaHQgdGhyb3cgYSBB\nYnN0cmFjdE1ldGhvZEVycm9yDQogICAgICAgICAgICByZXR1cm4gbWV0YS5n\nZXRKREJDTWFqb3JWZXJzaW9uKCkgPj0gMzsNCiAgICAgICAgfSBjYXRjaCAo\nVGhyb3dhYmxlIHQpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAg\nICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGNvbm5lY3RlZENv\nbmZpZ3VyYXRpb24oQ29ubmVjdGlvbiBjb25uKSB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsNCiAgICAJc3VwZXIuY29ubmVjdGVkQ29uZmlndXJhdGlvbihjb25u\nKTsNCg0KICAgIAlEYXRhYmFzZU1ldGFEYXRhIG1ldGFEYXRhID0gY29ubi5n\nZXRNZXRhRGF0YSgpOw0KICAgICAgICBkYXRhYmFzZVByb2R1Y3ROYW1lID0g\nbWV0YURhdGEuZ2V0RGF0YWJhc2VQcm9kdWN0TmFtZSgpOw0KICAgICAgICBk\nYXRhYmFzZVByb2R1Y3RWZXJzaW9uID0gbWV0YURhdGEuZ2V0RGF0YWJhc2VQ\ncm9kdWN0VmVyc2lvbigpOw0KICAgICAgICANCiAgICAgICAgLy8gRGV0ZXJt\naW5lIHRoZSB0eXBlIG9mIERCMiBkYXRhYmFzZQ0KICAgICAgICAvLyBGaXJz\ndCBjaGVjayBmb3IgQVMvNDAwDQogICAgICAgIGdldFByb2R1Y3RWZXJzaW9u\nTWFqb3JNaW5vckZvcklTZXJpZXMoKTsNCg0KICAgICAgICBpZiAobWFqID4g\nMCkgew0KICAgICAgICAgICAgaWYgKGlzREIySVNlcmllc1Y1UjNPckVhcmxp\nZXIoKSkNCiAgICAgICAgICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIySVNl\ncmllc1Y1UjNPckVhcmxpZXI7DQogICAgICAgICAgICBlbHNlIGlmIChpc0RC\nMklTZXJpZXNWNVI0T3JMYXRlcigpKQ0KICAgICAgICAgICAgICAgIGRiMlNl\ncnZlclR5cGUgPSBkYjJJU2VyaWVzVjVSNE9yTGF0ZXI7DQogICAgICAgIH0N\nCiAgICAgICAgDQogICAgCWlmIChkYjJTZXJ2ZXJUeXBlID09IDApIHsNCiAg\nICAJICAgIGlmIChpc0pEQkMzKG1ldGFEYXRhKSkgew0KICAgIAkgICAgICAg\nIG1haiA9IG1ldGFEYXRhLmdldERhdGFiYXNlTWFqb3JWZXJzaW9uKCk7DQog\nICAgCSAgICAgICAgbWluID0gbWV0YURhdGEuZ2V0RGF0YWJhc2VNaW5vclZl\ncnNpb24oKTsNCiAgICAJICAgIH0NCiAgICAJICAgIGVsc2UNCiAgICAJICAg\nICAgICBnZXRQcm9kdWN0VmVyc2lvbk1ham9yTWlub3IoKTsNCg0KICAgIAkg\nICAgLy8gRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIERCMiBkYXRhYmFzZSBmb3Ig\nWk9TICYgVURCDQogICAgCSAgICBpZiAoaXNEQjJVREJWODFPckVhcmxpZXIo\nKSkNCiAgICAJICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIyVURCVjgxT3JF\nYXJsaWVyOw0KICAgIAkgICAgZWxzZSBpZiAoaXNEQjJaT1NWOHhPckxhdGVy\nKCkpDQogICAgCSAgICAgICAgZGIyU2VydmVyVHlwZSA9IGRiMlpPU1Y4eE9y\nTGF0ZXI7DQogICAgCSAgICBlbHNlIGlmIChpc0RCMlVEQlY4Mk9yTGF0ZXIo\nKSkNCiAgICAJICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIyVURCVjgyT3JM\nYXRlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIHZlcmlmeSB0aGF0IGRh\ndGFiYWUgcHJvZHVjdCBpcyBzdXBwb3J0ZWQNCiAgICAgICAgaWYgKGRiMlNl\ncnZlclR5cGUgPT0gMCB8fCBtYWogPT0gMCkNCiAgICAgICAgICAgIHRocm93\nIG5ldyBVbnN1cHBvcnRlZEV4Y2VwdGlvbihfbG9jLmdldCgiZGItbm90LXN1\ncHBvcnRlZCIsDQogICAgICAgICAgICAgICAgbmV3IE9iamVjdFtdIHtkYXRh\nYmFzZVByb2R1Y3ROYW1lLCBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uIH0pKTsg\nICAgICAgICAgICAgICAgICAgIA0KDQogICAgCWlmIChtYWogPj0gOSB8fCAo\nbWFqID09IDggJiYgbWluID49IDIpKSB7DQogICAgCSAgICBzdXBwb3J0c0xv\nY2tpbmdXaXRoTXVsdGlwbGVUYWJsZXMgPSB0cnVlOw0KICAgIAkgICAgc3Vw\ncG9ydHNMb2NraW5nV2l0aElubmVySm9pbiA9IHRydWU7DQogICAgCSAgICBz\ndXBwb3J0c0xvY2tpbmdXaXRoT3V0ZXJKb2luID0gdHJ1ZTsNCiAgICAJICAg\nIGZvclVwZGF0ZUNsYXVzZSA9ICJXSVRIIFJSIFVTRSBBTkQgS0VFUCBVUERB\nVEUgTE9DS1MiOw0KICAgIAkgICAgaWYgKG1haiA+PTkpDQogICAgCSAgICAg\nICAgc3VwcG9ydHNYTUxDb2x1bW4gPSB0cnVlOw0KICAgIAl9DQoNCiAgICAg\nICAgLy8gcGxhdGZvcm0gc3BlY2lmaWMgc2V0dGluZ3MNCiAgICAgICAgc3dp\ndGNoIChkYjJTZXJ2ZXJUeXBlKSB7DQogICAgICAgIGNhc2UgIGRiMlpPU1Y4\neE9yTGF0ZXI6DQogICAgICAgICAgICAvLyBEQjIgWi9PUyANCiAgICAgICAg\nICAgIGNoYXJhY3RlckNvbHVtblNpemUgPSAyNTU7DQogICAgICAgICAgICBs\nYXN0R2VuZXJhdGVkS2V5UXVlcnkgPSAiU0VMRUNUIElERU5USVRZX1ZBTF9M\nT0NBTCgpIEZST00gIg0KICAgICAgICAgICAgICAgICsgIlNZU0lCTS5TWVNE\nVU1NWTEiOw0KICAgICAgICAgICAgbmV4dFNlcXVlbmNlUXVlcnkgPSAiU0VM\nRUNUIE5FWFRWQUwgRk9SIHswfSBGUk9NICINCiAgICAgICAgICAgICAgICAr\nICJTWVNJQk0uU1lTRFVNTVkxIjsNCiAgICAgICAgICAgIHNlcXVlbmNlU1FM\nID0gIlNFTEVDVCBTQ0hFTUEgQVMgU0VRVUVOQ0VfU0NIRU1BLCAiDQogICAg\nICAgICAgICAgICAgKyAiTkFNRSBBUyBTRVFVRU5DRV9OQU1FIEZST00gU1lT\nSUJNLlNZU1NFUVVFTkNFUyI7DQogICAgICAgICAgICBzZXF1ZW5jZVNjaGVt\nYVNRTCA9ICJTQ0hFTUEgPSA/IjsNCiAgICAgICAgICAgIHNlcXVlbmNlTmFt\nZVNRTCA9ICJOQU1FID0gPyI7DQogICAgICAgICAgICBpZiAobWFqID09IDgp\nDQogICAgICAgICAgICAgICAgLy8gREIyIFovT1MgVmVyc2lvbiA4OiBubyBi\naWdpbnQgc3VwcG9ydCwgaGVuY2UgbWFwIEphdmENCiAgICAgICAgICAgICAg\nICAvLyBsb25nIHRvIGRlY2ltYWwNCiAgICAgICAgICAgICAgICBiaWdpbnRU\neXBlTmFtZSA9ICJERUNJTUFMKDMxLDApIjsNCiAgICAgICAgICAgIGJyZWFr\nOw0KICAgICAgICBjYXNlIGRiMklTZXJpZXNWNVIzT3JFYXJsaWVyOg0KICAg\nICAgICBjYXNlIGRiMklTZXJpZXNWNVI0T3JMYXRlcjoNCiAgICAgICAgICAg\nIGxhc3RHZW5lcmF0ZWRLZXlRdWVyeSA9ICJTRUxFQ1QgSURFTlRJVFlfVkFM\nX0xPQ0FMKCkgRlJPTSAiDQogICAgICAgICAgICAgICAgKyAiU1lTSUJNLlNZ\nU0RVTU1ZMSI7DQogICAgICAgICAgICBuZXh0U2VxdWVuY2VRdWVyeSA9ICJT\nRUxFQ1QgTkVYVFZBTCBGT1IgezB9IEZST00gIg0KICAgICAgICAgICAgICAg\nICsgIlNZU0lCTS5TWVNEVU1NWTEiOw0KICAgICAgICAgICAgdmFsaWRhdGlv\nblNRTCA9ICJTRUxFQ1QgRElTVElOQ1QoQ1VSUkVOVCBUSU1FU1RBTVApIEZS\nT00gIg0KICAgICAgICAgICAgICAgICsgIlFTWVMyLlNZU1RBQkxFUyI7DQog\nICAgICAgICAgICBzZXF1ZW5jZVNRTCA9ICJTRUxFQ1QgU0VRVUVOQ0VfU0NI\nRU1BLCAiDQogICAgICAgICAgICAgICAgKyAiU0VRVUVOQ0VfTkFNRSBGUk9N\nIFFTWVMyLlNZU1NFUVVFTkNFUyI7DQogICAgICAgICAgICBzZXF1ZW5jZVNj\naGVtYVNRTCA9ICJTRVFVRU5DRV9TQ0hFTUEgPSA/IjsNCiAgICAgICAgICAg\nIHNlcXVlbmNlTmFtZVNRTCA9ICJTRVFVRU5DRV9OQU1FID0gPyI7DQogICAg\nICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0K\nICAgICAqIEdldCB0aGUgdXBkYXRlIGNsYXVzZSBmb3IgdGhlIHF1ZXJ5IGJh\nc2VkIG9uIHRoZQ0KICAgICAqIHVwZGF0ZUNsYXVzZSBhbmQgaXNvbGF0aW9u\nTGV2ZWwgaGludHMNCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdl\ndEZvclVwZGF0ZUNsYXVzZShKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNo\nLA0KICAgICAgICBib29sZWFuIGlzRm9yVXBkYXRlLCBTZWxlY3Qgc2VsKSB7\nDQogICAgICAgIGludCBpc29sYXRpb25MZXZlbDsNCiAgICAgICAgLy8gRm9y\nIGRiMlVEQlY4MU9yRWFybGllciBhbmQgZGIySVNlcmllc1Y1UjNPckVhcmxp\nZXI6DQogICAgICAgIC8vICJvcHRpbWl6ZSBmb3IiIGNsYXVzZSBhcHBlYXJz\nIGJlZm9yZSAiZm9yIHVwZGF0ZSIgY2xhdXNlLg0KICAgICAgICBTdHJpbmdC\ndWZmZXIgZm9yVXBkYXRlU3RyaW5nID0gbmV3IFN0cmluZ0J1ZmZlcigNCiAg\nICAgICAgICAgIGdldE9wdGltaXplQ2xhdXNlKHNlbCkpOw0KICAgICAgICB0\ncnkgew0KICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpc29sYXRpb25M\nZXZlbDsgdGhlIGZldGNoDQogICAgICAgICAgICAvLyBjb25maWd1cmF0aW9u\nIGRhdGEgb3ZlcnJpZGVzIHRoZSBwZXJzaXN0ZW5jZS54bWwgdmFsdWUNCiAg\nICAgICAgICAgIGlmIChmZXRjaCAhPSBudWxsICYmIGZldGNoLmdldElzb2xh\ndGlvbigpICE9IC0xKQ0KICAgICAgICAgICAgICAgIGlzb2xhdGlvbkxldmVs\nID0gZmV0Y2guZ2V0SXNvbGF0aW9uKCk7DQogICAgICAgICAgICBlbHNlDQog\nICAgICAgICAgICAgICAgaXNvbGF0aW9uTGV2ZWwgPSBjb25mLmdldFRyYW5z\nYWN0aW9uSXNvbGF0aW9uQ29uc3RhbnQoKTsNCg0KICAgICAgICAgICAgaWYg\nKGlzRm9yVXBkYXRlKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoKGRiMlNl\ncnZlclR5cGUpIHsNCiAgICAgICAgICAgICAgICBjYXNlIGRiMklTZXJpZXNW\nNVIzT3JFYXJsaWVyOg0KICAgICAgICAgICAgICAgIGNhc2UgZGIyVURCVjgx\nT3JFYXJsaWVyOg0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNvbGF0aW9u\nTGV2ZWwgPT0gQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9TRVJJQUxJWkFCTEUp\nDQogICAgICAgICAgICAgICAgICAgICAgICBmb3JVcGRhdGVTdHJpbmcuYXBw\nZW5kKCIgIikuYXBwZW5kKGZvclVwZGF0ZUNsYXVzZSk7DQogICAgICAgICAg\nICAgICAgICAgIGVsc2UgDQogICAgICAgICAgICAgICAgICAgICAgICBmb3JV\ncGRhdGVTdHJpbmcuYXBwZW5kKCIgIikuYXBwZW5kKGZvclVwZGF0ZSkNCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5k\nKHdpdGhSU0NsYXVzZSk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0K\nICAgICAgICAgICAgICAgIGNhc2UgZGIyWk9TVjh4T3JMYXRlcjoNCiAgICAg\nICAgICAgICAgICBjYXNlIGRiMlVEQlY4Mk9yTGF0ZXI6DQogICAgICAgICAg\nICAgICAgICAgIGlmIChpc29sYXRpb25MZXZlbCA9PSBDb25uZWN0aW9uLlRS\nQU5TQUNUSU9OX1NFUklBTElaQUJMRSkgew0KICAgICAgICAgICAgICAgICAg\nICAgICAgZm9yVXBkYXRlU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JS\nZWFkT25seUNsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAu\nYXBwZW5kKCIgIikuYXBwZW5kKHdpdGhSUkNsYXVzZSkNCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtlZXBV\ncGRhdGVMb2NrQ2xhdXNlKTsgICANCiAgICAgICAgICAgICAgICAgICAgfSBl\nbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmlu\nZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yUmVhZE9ubHlDbGF1c2UpDQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh3\naXRoUlNDbGF1c2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFw\ncGVuZCgiICIpLmFwcGVuZCh1c2VLZWVwVXBkYXRlTG9ja0NsYXVzZSk7ICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAg\nICB9DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAg\nICAgIGNhc2UgZGIySVNlcmllc1Y1UjRPckxhdGVyOg0KICAgICAgICAgICAg\nICAgICAgICBpZiAoaXNvbGF0aW9uTGV2ZWwgPT0gQ29ubmVjdGlvbi5UUkFO\nU0FDVElPTl9TRVJJQUxJWkFCTEUpIHsNCiAgICAgICAgICAgICAgICAgICAg\nICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yUmVh\nZE9ubHlDbGF1c2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFw\ncGVuZCgiICIpLmFwcGVuZCh3aXRoUlJDbGF1c2UpDQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh1c2VLZWVwRXhj\nbHVzaXZlTG9ja0NsYXVzZSk7ICAgICAgIA0KICAgICAgICAgICAgICAgICAg\nICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yVXBkYXRl\nU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JSZWFkT25seUNsYXVzZSkN\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBw\nZW5kKHdpdGhSU0NsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAuYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtlZXBFeGNsdXNpdmVMb2NrQ2xh\ndXNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg\nICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9\nDQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQog\nICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpDQogICAgICAg\nICAgICAgICAgbG9nLmVycm9yKGUudG9TdHJpbmcoKSxlKTsNCiAgICAgICAg\nfQ0KICAgICAgICByZXR1cm4gZm9yVXBkYXRlU3RyaW5nLnRvU3RyaW5nKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNEQjJVREJWODJPckxh\ndGVyKCkgew0KICAgICAgICBib29sZWFuIG1hdGNoID0gZmFsc2U7DQogICAg\nICAgIGlmIChkYXRhYmFzZVByb2R1Y3ROYW1lICE9IG51bGwgJiYNCiAgICAg\nICAgICAgIChkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4T2YoIlNRTCIp\nICE9IC0xDQogICAgICAgICAgICB8fCBkYXRhYmFzZVByb2R1Y3ROYW1lLmlu\nZGV4T2YoIkRCMi8iKSAhPSAtMSkNCiAgICAgICAgICAgICYmICgobWFqID09\nIDggJiYgbWluID49IDIpIHx8IChtYWogPj0gOSkpKQ0KICAgICAgICAgICAg\nbWF0Y2ggPSB0cnVlOw0KICAgICAgICByZXR1cm4gbWF0Y2g7DQogICAgfQ0K\nDQogICAgcHVibGljIGJvb2xlYW4gaXNEQjJaT1NWOHhPckxhdGVyKCkgew0K\nICAgICAgIGJvb2xlYW4gbWF0Y2ggPSBmYWxzZTsNCiAgICAgICBpZiAoZGF0\nYWJhc2VQcm9kdWN0TmFtZSAhPSBudWxsICYmDQogICAgICAgICAgIChkYXRh\nYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4T2YoIkRTTiIpICE9IC0xDQogICAg\nICAgICAgIHx8IGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIyLyIp\nID09IC0xKQ0KICAgICAgICAgICAmJiBtYWogPj0gOCkNCiAgICAgICAgICAg\nbWF0Y2ggPSB0cnVlOw0KICAgICAgICByZXR1cm4gbWF0Y2g7DQogICAgfQ0K\nDQogICAgcHVibGljIGJvb2xlYW4gaXNEQjJJU2VyaWVzVjVSM09yRWFybGll\ncigpIHsNCiAgICAgICBib29sZWFuIG1hdGNoID0gZmFsc2U7DQogICAgICAg\naWYgKGRhdGFiYXNlUHJvZHVjdE5hbWUgIT0gbnVsbCAmJg0KICAgICAgICAg\nICBkYXRhYmFzZVByb2R1Y3ROYW1lLmluZGV4T2YoIkFTIikgIT0gLTENCiAg\nICAgICAgICAgJiYgKChtYWogPT0gNSAmJiBtaW4gPD0zKSB8fCBtYWogPCA1\nKSkNCiAgICAgICAgICAgbWF0Y2ggPSB0cnVlOw0KICAgICAgIHJldHVybiBt\nYXRjaDsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBpc0RCMklTZXJp\nZXNWNVI0T3JMYXRlcigpIHsNCiAgICAgICBib29sZWFuIG1hdGNoID0gZmFs\nc2U7DQogICAgICAgaWYgKGRhdGFiYXNlUHJvZHVjdE5hbWUgIT0gbnVsbCAm\nJg0KICAgICAgICAgICBkYXRhYmFzZVByb2R1Y3ROYW1lLmluZGV4T2YoIkFT\nIikgIT0gLTENCiAgICAgICAgICAgJiYgKG1haiA+PTYgfHwgKG1haiA9PSA1\nICYmIG1pbiA+PTQpKSkNCiAgICAgICAgICAgbWF0Y2ggPSB0cnVlOw0KICAg\nICAgcmV0dXJuIG1hdGNoOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFu\nIGlzREIyVURCVjgxT3JFYXJsaWVyKCkgew0KICAgICAgICBib29sZWFuIG1h\ndGNoID0gZmFsc2U7DQogICAgICAgIGlmIChkYXRhYmFzZVByb2R1Y3ROYW1l\nICE9IG51bGwgJiYNCiAgICAgICAgICAgIChkYXRhYmFzZVByb2R1Y3RWZXJz\naW9uLmluZGV4T2YoIlNRTCIpICE9IC0xIA0KICAgICAgICAgICAgfHwgZGF0\nYWJhc2VQcm9kdWN0TmFtZS5pbmRleE9mKCJEQjIvIikgIT0gLTEpICYmDQog\nICAgICAgICAgICAoKG1haiA9PSA4ICYmIG1pbiA8PSAxKSB8fCBtYWogPCA4\nKSkNCiAgICAgICAgICAgIG1hdGNoID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJu\nIG1hdGNoOw0KICAgIH0NCg0KICAgIC8qKiBHZXQgdGhlIHZlcnNpb24gTWFq\nb3IvTWlub3IgZm9yIHRoZSBJU2VyaWVzDQogICAgICovDQogICAgcHJpdmF0\nZSB2b2lkIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5vckZvcklTZXJpZXMo\nKSB7DQogICAgICAgIC8vIElTZXJpZXMgICAgREJQcm9kTmFtZSAgICAgICAg\nICAgICAgICAgREIyIFVEQiBmb3IgQVMvNDAwDQogICAgICAgIC8vICAgKFRv\nb2xib3gpREJQcm9kVmVyc2lvbiAgICAgICAgICAgICAgMDUuMDQuMDAwMCBW\nNVI0bTANCiAgICAgICAgLy8gSVNlcmllcyAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBEQjIgVURCIGZvciBBUy80MDANCiAgICAgICAgLy8gICAo\nTmF0aXZlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICBWNVI0TTANCiAg\nICAgICAgaWYgKGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiQVMiKSAh\nPSAtMSkgew0KICAgICAgICAgICAgU3RyaW5nIHMgPSBkYXRhYmFzZVByb2R1\nY3RWZXJzaW9uLnN1YnN0cmluZyhkYXRhYmFzZVByb2R1Y3RWZXJzaW9uDQog\nICAgICAgICAgICAgICAgLmluZGV4T2YoJ1YnKSk7DQogICAgICAgICAgICBz\nID0gcy50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICBTdHJpbmdUb2tl\nbml6ZXIgc3RyaW5ndG9rZW5pemVyID0gbmV3IFN0cmluZ1Rva2VuaXplcihz\nLCAiVlJNIg0KICAgICAgICAgICAgICAgICwgZmFsc2UpOw0KICAgICAgICAg\nICAgaWYgKHN0cmluZ3Rva2VuaXplci5jb3VudFRva2VucygpID09IDMpIHsN\nCiAgICAgICAgICAgICAgICBTdHJpbmcgczEgPSBzdHJpbmd0b2tlbml6ZXIu\nbmV4dFRva2VuKCk7DQogICAgICAgICAgICAgICAgbWFqID0gSW50ZWdlci5w\nYXJzZUludChzMSk7DQogICAgICAgICAgICAgICAgU3RyaW5nIHMyID0gIHN0\ncmluZ3Rva2VuaXplci5uZXh0VG9rZW4oKTsNCiAgICAgICAgICAgICAgICBt\naW4gPSBJbnRlZ2VyLnBhcnNlSW50KHMyKTsNCiAgICAgICAgICAgIH0NCiAg\nICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZvaWQgZ2V0UHJv\nZHVjdFZlcnNpb25NYWpvck1pbm9yKCkgew0KICAgICAgICAvLyBJbmNhc2Ug\nSkRCQyBkcml2ZXIgdmVyc2lvbiBpcyBsb3dlciB0aGFuIDMNCiAgICAgICAg\nLy8gdXNlIGZvbGxvd2luZyBpbmZvIHRvIGRldGVybWluZSBNYWpvciBhbmQg\nTWlub3IgDQogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgQ0xJ\nICAgIHZzICAgICAgSkNDDQogICAgICAgIC8vIFpEQlY4IERCUHJvZE5hbWUg\nICAgICAgREIyICAgICAgICAgICAgREIyDQogICAgICAgIC8vICAgICAgIERC\nUHJvZFZlcnNpb24gICAgMDguMDEuMDAwNSAgICAgRFNOMDgwMTUNCiAgICAg\nICAgLy8gWkRCVjkgICAgICAgICAgICAgICAgICBEQjIgICAgICAgICAgICBE\nQjINCiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAwOS4wMS4w\nMDA1ICAgICBEU04wOTAxNQ0KICAgICAgICAvLyBXaW5WOSAgICAgICAgICAg\nICAgICAgIERCMi9OVCAgICAgICAgIERCMi9OVA0KICAgICAgICAvLyAgICAg\nICAgICAgICAgICAgICAgICAgIDA5LjAxLjAwMDAgICAgIFNRTDA5MDEwDQog\nICAgICAgIC8vIFNvbGFyaXNWOSAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgREIyL1NVTjY0DQogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgU1FMMDkwMQ0KICAgICAgICAvLyBMaW51eCAg\nICAgICAgICAgICAgICAgIERCMi9MSU5VWCAgICAgIERCMi9MSU5VWA0KICAg\nICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIDA5LjAxLjAwMDAgICAg\nIFNRTDA5MDENCiAgICAgICAgaWYgKGRhdGFiYXNlUHJvZHVjdFZlcnNpb24u\naW5kZXhPZigiMDkiKSAhPSAtMSkgew0KICAgICAgICAgICAgbWFqID0gOTsN\nCiAgICAgICAgICAgIGlmIChkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4\nT2YoIjAxIikgIT0gLTEpIHsNCiAgICAgICAgICAgICAgICBtaW4gPSAxOw0K\nICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKGRhdGFiYXNlUHJv\nZHVjdFZlcnNpb24uaW5kZXhPZigiMDgiKSAhPSAtMSkgew0KICAgICAgICAg\nICAgbWFqID0gODsNCiAgICAgICAgICAgIG1pbiA9IDI7DQogICAgICAgICAg\nICBpZiAoZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCIwMSIpICE9\nIC0xKSB7DQogICAgICAgICAgICAgICAgbWluID0gMTsNCiAgICAgICAgICAg\nIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBTdHJpbmcg\nZ2V0T3B0aW1pemVDbGF1c2UoU2VsZWN0IHNlbCkgew0KICAgICAgICBpZiAo\nc2VsICE9IG51bGwgJiYgc2VsLmdldEV4cGVjdGVkUmVzdWx0Q291bnQoKSA+\nIDApIHsNCiAgICAgICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3Ry\naW5nQnVmZmVyKCk7DQogICAgICAgICAgICBidWYuYXBwZW5kKCIgIikuYXBw\nZW5kKG9wdGltaXplQ2xhdXNlKS5hcHBlbmQoIiAiKQ0KICAgICAgICAgICAg\nICAgIC5hcHBlbmQoU3RyaW5nLnZhbHVlT2Yoc2VsLmdldEV4cGVjdGVkUmVz\ndWx0Q291bnQoKSkpDQogICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFw\ncGVuZChyb3dDbGF1c2UpOw0KICAgICAgICAgICAgcmV0dXJuIGJ1Zi50b1N0\ncmluZygpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICIiOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyBPcGVuSlBBRXhjZXB0aW9uIG5ld1N0b3JlRXhj\nZXB0aW9uKFN0cmluZyBtc2csIFNRTEV4Y2VwdGlvbltdIGNhdXNlcywNCiAg\nICAgICAgT2JqZWN0IGZhaWxlZCkgew0KICAgICAgICBpZiAoY2F1c2VzICE9\nIG51bGwgJiYgY2F1c2VzLmxlbmd0aCA+IDApDQogICAgICAgICAgICBtc2cg\nPSBhcHBlbmRFeHRlbmRlZEV4Y2VwdGlvbk1zZyhtc2csIGNhdXNlc1swXSk7\nDQogICAgICAgIHJldHVybiBzdXBlci5uZXdTdG9yZUV4Y2VwdGlvbihtc2cs\nIGNhdXNlcywgZmFpbGVkKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiAg\nQXBwZW5kIGV4Y2VwdGlvbiBpbmZvcm1hdGlvbiBmcm9tIFNRTENBIHRvIHRo\nZSBleHNpc3RpbmcNCiAgICAgKiAgZXhjZXB0aW9uIG1lYXNzYWdlDQogICAg\nICovDQogICAgcHJpdmF0ZSBTdHJpbmcgYXBwZW5kRXh0ZW5kZWRFeGNlcHRp\nb25Nc2coU3RyaW5nIG1zZywgU1FMRXhjZXB0aW9uIHNxbGUpew0KICAgICAg\nIGZpbmFsIFN0cmluZyBHRVRTUUxDQSA9ImdldFNxbGNhIjsNCiAgICAgICBT\ndHJpbmcgZXhjZXB0aW9uTXNnID0gbmV3IFN0cmluZygpOw0KICAgICAgIHRy\neSB7DQogICAgICAgICAgICBNZXRob2Qgc3FsY2FNMiA9IHNxbGUuZ2V0TmV4\ndEV4Y2VwdGlvbigpLmdldENsYXNzKCkNCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgLmdldE1ldGhvZChHRVRTUUxDQSxudWxsKTsNCiAgICAgICAg\nICAgIE9iamVjdCBzcWxjYSA9IHNxbGNhTTIuaW52b2tlKHNxbGUuZ2V0TmV4\ndEV4Y2VwdGlvbigpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgbmV3IE9iamVjdFtdIHt9KTsNCiAgICAgICAgICAgIE1l\ndGhvZCAgZ2V0U3FsRXJycE1ldGhkID0gc3FsY2EuZ2V0Q2xhc3MoKS4NCiAg\nICAgICAgICAgIGdldE1ldGhvZCgiZ2V0U3FsRXJycCIsIG51bGwpOw0KICAg\nICAgICAgICAgTWV0aG9kICBnZXRTcWxXYXJuTWV0aGQgPSBzcWxjYS5nZXRD\nbGFzcygpLg0KICAgICAgICAgICAgZ2V0TWV0aG9kKCJnZXRTcWxXYXJuIiwg\nbnVsbCk7DQogICAgICAgICAgICBNZXRob2QgIGdldFNxbEVycmRNZXRoZCA9\nIHNxbGNhLmdldENsYXNzKCkuDQogICAgICAgICAgICBnZXRNZXRob2QoImdl\ndFNxbEVycmQiLCBudWxsKTsNCiAgICAgICAgICAgIFN0cmluZ0J1ZmZlciBl\ncnJkU3RyID0gbmV3IFN0cmluZ0J1ZmZlcigpOw0KDQogICAgICAgICAgICBp\nbnRbXSBlcnJkcyA9IChpbnRbXSkgZ2V0U3FsRXJyZE1ldGhkLmludm9rZShz\ncWxjYSwgbmV3IE9iamVjdFtde30pOw0KICAgICAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBlcnJkcy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAg\nICBlcnJkU3RyLmFwcGVuZChlcnJkU3RyLmxlbmd0aCgpID4gMCA/ICIsICIg\nOiAiIikuDQogICAgICAgICAgICAgICAgICAgIGFwcGVuZChlcnJkc1tpXSk7\nDQogICAgICAgICAgICBleGNlcHRpb25Nc2cgPSBleGNlcHRpb25Nc2cuY29u\nY2F0KCAiU1FMQ0EgT1VUUFVUIiArDQogICAgICAgICAgICAgICAgICAgICJb\nRXJycD0iICsgZ2V0U3FsRXJycE1ldGhkLmludm9rZShzcWxjYSwgbmV3IE9i\namVjdFtde30pDQogICAgICAgICAgICAgICAgICAgICsgIiwgRXJyZD0iICsg\nZXJyZFN0cik7DQoNCiAgICAgICAgICAgIFN0cmluZyBXYXJuID0gbmV3IFN0\ncmluZygoY2hhcltdKSBnZXRTcWxXYXJuTWV0aGQuDQogICAgICAgICAgICAg\nICAgICAgIGludm9rZShzcWxjYSwgbmV3IE9iamVjdFtde30pKTsNCiAgICAg\nICAgICAgIGlmKFdhcm4udHJpbSgpLmxlbmd0aCgpICE9IDApDQogICAgICAg\nICAgICAgICAgZXhjZXB0aW9uTXNnID0gZXhjZXB0aW9uTXNnLmNvbmNhdCgi\nLCBXYXJuPSIgK1dhcm4gKyAiXSIgKTsNCiAgICAgICAgICAgIGVsc2UNCiAg\nICAgICAgICAgICAgICBleGNlcHRpb25Nc2cgPSBleGNlcHRpb25Nc2cuY29u\nY2F0KCAiXSIgKTsNCiAgICAgICAgICAgIG1zZyA9IG1zZy5jb25jYXQoZXhj\nZXB0aW9uTXNnKTsNCiAgICAgICAgICAgIHJldHVybiBtc2c7DQogICAgICAg\nIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7DQogICAgICAgICAgICByZXR1cm4g\nc3FsZS5nZXRNZXNzYWdlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBw\ndWJsaWMgaW50IGdldERiMlNlcnZlclR5cGUoKSB7DQogICAgICAgIHJldHVy\nbiBkYjJTZXJ2ZXJUeXBlOw0KICAgIH0NCiAgICANCiAgICBwcm90ZWN0ZWQg\ndm9pZCBhcHBlbmRMZW5ndGgoU1FMQnVmZmVyIGJ1ZiwgaW50IHR5cGUpIHsN\nCiAgICAgICAgaWYgKHR5cGUgPT0gVHlwZXMuVkFSQ0hBUikNCiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoIigiKS5hcHBlbmQoSW50ZWdlci50b1N0cmluZyhj\naGFyYWN0ZXJDb2x1bW5TaXplKSkuDQogICAgICAgICAgICAgICAgYXBwZW5k\nKCIpIik7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogSWYgdGhpcyBkaWN0\naW9uYXJ5IHN1cHBvcnRzIFhNTCB0eXBlLA0KICAgICAqIHVzZSB0aGlzIG1l\ndGhvZCB0byBhcHBlbmQgeG1sIHByZWRpY2F0ZS4NCiAgICAgKiANCiAgICAg\nKiBAcGFyYW0gYnVmIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRoZSBjb21w\nYXJpc29uDQogICAgICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJh\ndGlvbiB0byBwZXJmb3JtDQogICAgICogQHBhcmFtIGxocyB0aGUgbGVmdCBo\nYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24NCiAgICAgKiBAcGFyYW0gcmhz\nIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24NCiAgICAg\nKiBAcGFyYW0gbGhzeG1sIGluZGljYXRlcyB3aGV0aGVyIHRoZSBsZWZ0IG9w\nZXJhbmQgbWFwcyB0byB4bWwNCiAgICAgKiBAcGFyYW0gcmhzeG1sIGluZGlj\nYXRlcyB3aGV0aGVyIHRoZSByaWdodCBvcGVyYW5kIG1hcHMgdG8geG1sDQog\nICAgICovDQogICAgcHVibGljIHZvaWQgYXBwZW5kWG1sQ29tcGFyaXNvbihT\nUUxCdWZmZXIgYnVmLCBTdHJpbmcgb3AsIEZpbHRlclZhbHVlIGxocywNCiAg\nICAgICAgRmlsdGVyVmFsdWUgcmhzLCBib29sZWFuIGxoc3htbCwgYm9vbGVh\nbiByaHN4bWwpIHsNCiAgICAgICAgc3VwZXIuYXBwZW5kWG1sQ29tcGFyaXNv\nbihidWYsIG9wLCBsaHMsIHJocywgbGhzeG1sLCByaHN4bWwpOw0KICAgICAg\nICBpZiAobGhzeG1sICYmIHJoc3htbCkNCiAgICAgICAgICAgIGFwcGVuZFht\nbENvbXBhcmlzb24yKGJ1Ziwgb3AsIGxocywgcmhzKTsNCiAgICAgICAgZWxz\nZSBpZiAobGhzeG1sKQ0KICAgICAgICAgICAgYXBwZW5kWG1sQ29tcGFyaXNv\nbjEoYnVmLCBvcCwgbGhzLCByaHMpOw0KICAgICAgICBlbHNlIA0KICAgICAg\nICAgICAgYXBwZW5kWG1sQ29tcGFyaXNvbjEoYnVmLCBvcCwgcmhzLCBsaHMp\nOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEFwcGVuZCBhbiB4bWwgY29t\ncGFyaXNvbiBwcmVkaWNhdGUuDQogICAgICoNCiAgICAgKiBAcGFyYW0gYnVm\nIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRoZSBjb21wYXJpc29uDQogICAg\nICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJhdGlvbiB0byBwZXJm\nb3JtDQogICAgICogQHBhcmFtIGxocyB0aGUgbGVmdCBoYW5kIHNpZGUgb2Yg\ndGhlIGNvbXBhcmlzb24gKG1hcHMgdG8geG1sIGNvbHVtbikNCiAgICAgKiBA\ncGFyYW0gcmhzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlz\nb24NCiAgICAgKi8NCiAgICBwcml2YXRlIHZvaWQgYXBwZW5kWG1sQ29tcGFy\naXNvbjEoU1FMQnVmZmVyIGJ1ZiwgU3RyaW5nIG9wLCANCiAgICAgICAgICAg\nIEZpbHRlclZhbHVlIGxocywgRmlsdGVyVmFsdWUgcmhzKSB7DQogICAgICAg\nIGJvb2xlYW4gY2FzdHJocyA9IGZhbHNlOw0KICAgICAgICBDbGFzcyByYyA9\nIEZpbHRlcnMud3JhcChyaHMuZ2V0VHlwZSgpKTsNCiAgICAgICAgaW50IHR5\ncGUgPSAwOw0KICAgICAgICBpZiAocmhzLmlzQ29uc3RhbnQoKSkgew0KICAg\nICAgICAgICAgdHlwZSA9IGdldEpEQkNUeXBlKEphdmFUeXBlcy5nZXRUeXBl\nQ29kZShyYyksIGZhbHNlKTsNCiAgICAgICAgICAgIGNhc3RyaHMgPSB0cnVl\nOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBhcHBlbmRYbWxFeGlz\ndHMoYnVmLCBsaHMpOw0KDQogICAgICAgIGJ1Zi5hcHBlbmQoIiAiKS5hcHBl\nbmQob3ApLmFwcGVuZCgiICIpOw0KICAgICAgICANCiAgICAgICAgYnVmLmFw\ncGVuZCgiJCIpOw0KICAgICAgICBpZiAoY2FzdHJocykNCiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoIlBhcm0iKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAg\nICAgcmhzLmFwcGVuZFRvKGJ1Zik7DQogICAgICAgIA0KICAgICAgICBidWYu\nYXBwZW5kKCJdJyBQQVNTSU5HICIpOw0KICAgICAgICBhcHBlbmRYbWxWYXIo\nYnVmLCBsaHMpOw0KICAgICAgICBidWYuYXBwZW5kKCIsICIpOw0KICAgICAg\nICANCiAgICAgICAgaWYgKGNhc3RyaHMpDQogICAgICAgICAgICBhcHBlbmRD\nYXN0KGJ1ZiwgcmhzLCB0eXBlKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAg\nICAgcmhzLmFwcGVuZFRvKGJ1Zik7DQogICAgICAgIA0KICAgICAgICBidWYu\nYXBwZW5kKCIgQVMgXCIiKTsNCiAgICAgICAgaWYgKGNhc3RyaHMpDQogICAg\nICAgICAgICBidWYuYXBwZW5kKCJQYXJtIik7DQogICAgICAgIGVsc2UNCiAg\nICAgICAgICAgIHJocy5hcHBlbmRUbyhidWYpOw0KICAgICAgICBidWYuYXBw\nZW5kKCJcIikiKTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgICogQXBw\nZW5kIGFuIHhtbCBjb21wYXJpc29uIHByZWRpY2F0ZS4gKGJvdGggb3BlcmFu\nZHMgbWFwIHRvIHhtbCBjb2x1bW4pDQogICAgICoNCiAgICAgKiBAcGFyYW0g\nYnVmIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRoZSBjb21wYXJpc29uDQog\nICAgICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJhdGlvbiB0byBw\nZXJmb3JtDQogICAgICogQHBhcmFtIGxocyB0aGUgbGVmdCBoYW5kIHNpZGUg\nb2YgdGhlIGNvbXBhcmlzb24gKG1hcHMgdG8geG1sIGNvbHVtbikNCiAgICAg\nKiBAcGFyYW0gcmhzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBh\ncmlzb24gKG1hcHMgdG8geG1sIGNvbHVtbikNCiAgICAgKi8NCiAgICBwcml2\nYXRlIHZvaWQgYXBwZW5kWG1sQ29tcGFyaXNvbjIoU1FMQnVmZmVyIGJ1Ziwg\nU3RyaW5nIG9wLCANCiAgICAgICAgICAgIEZpbHRlclZhbHVlIGxocywgRmls\ndGVyVmFsdWUgcmhzKSB7DQogICAgICAgIGFwcGVuZFhtbEV4aXN0cyhidWYs\nIGxocyk7DQogICAgICAgIA0KICAgICAgICBidWYuYXBwZW5kKCIgIikuYXBw\nZW5kKG9wKS5hcHBlbmQoIiAiKTsNCiAgICAgICAgDQogICAgICAgIGJ1Zi5h\ncHBlbmQoIiQiKS5hcHBlbmQocmhzLmdldENvbHVtbkFsaWFzKA0KICAgICAg\nICAgICAgcmhzLmdldEZpZWxkTWFwcGluZygpLmdldENvbHVtbnMoKVswXSkp\nLg0KICAgICAgICAgICAgYXBwZW5kKCIvKi8iKTsNCiAgICAgICAgcmhzLmFw\ncGVuZFRvKGJ1Zik7DQogICAgICAgIA0KICAgICAgICBidWYuYXBwZW5kKCJd\nJyBQQVNTSU5HICIpOw0KICAgICAgICBhcHBlbmRYbWxWYXIoYnVmLCBsaHMp\nOw0KICAgICAgICBidWYuYXBwZW5kKCIsICIpOw0KICAgICAgICBhcHBlbmRY\nbWxWYXIoYnVmLCByaHMpOw0KICAgICAgICBidWYuYXBwZW5kKCIpIik7DQog\nICAgfQ0KICAgIA0KICAgIHByaXZhdGUgdm9pZCBhcHBlbmRYbWxWYXIoU1FM\nQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgdmFsKSB7DQogICAgICAgIGJ1Zi5h\ncHBlbmQodmFsLmdldENvbHVtbkFsaWFzKA0KICAgICAgICAgICAgdmFsLmdl\ndEZpZWxkTWFwcGluZygpLmdldENvbHVtbnMoKVswXSkpLg0KICAgICAgICAg\nICAgYXBwZW5kKCIgQVMgIikuDQogICAgICAgICAgICBhcHBlbmQoIlwiIiku\nYXBwZW5kKHZhbC5nZXRDb2x1bW5BbGlhcygNCiAgICAgICAgICAgIHZhbC5n\nZXRGaWVsZE1hcHBpbmcoKS5nZXRDb2x1bW5zKClbMF0pKS4NCiAgICAgICAg\nICAgIGFwcGVuZCgiXCIiKTsgICAgICAgIA0KICAgIH0NCiAgICANCiAgICBw\ncml2YXRlIHZvaWQgYXBwZW5kWG1sRXhpc3RzKFNRTEJ1ZmZlciBidWYsIEZp\nbHRlclZhbHVlIHZhbCkgew0KICAgICAgICBidWYuYXBwZW5kKCJYTUxFWElT\nVFMoJyIpOw0KICAgICAgICBidWYuYXBwZW5kKCIkIikuYXBwZW5kKHZhbC5n\nZXRDb2x1bW5BbGlhcygNCiAgICAgICAgICAgIHZhbC5nZXRGaWVsZE1hcHBp\nbmcoKS5nZXRDb2x1bW5zKClbMF0pKS4NCiAgICAgICAgICAgIGFwcGVuZCgi\nLypbIik7DQogICAgICAgIHZhbC5hcHBlbmRUbyhidWYpOyAgICAgICAgDQog\nICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICAqIGFkZCBDQVNUIGZvciBhIHNj\nYWxhciBmdW5jdGlvbiB3aGVyZSBvcGVyYW5kIGlzIGEgcGFyYW0NCiAgICAg\nKiANCiAgICAgKiBAcGFyYW0gZnVuYyBvcmlnaW5hbCBzdHJpbmcNCiAgICAg\nKiBAcGFyYW0gdGFyZ2V0IHN1YnN0cmluZyB0byBsb29rIGZvcg0KICAgICAq\nIEBwYXJhbSBhc1N0cmluZyANCiAgICAgKiBAcmV0dXJuIHVwZGF0ZWQgc3Ry\naW5nIChmdW5jKQ0KICAgICAqLw0KICAgIHByaXZhdGUgU3RyaW5nIGFkZENh\nc3RBc1N0cmluZyhTdHJpbmcgZnVuYywgU3RyaW5nIHRhcmdldCwgDQogICAg\nICAgICAgICBTdHJpbmcgYXNTdHJpbmcpIHsNCiAgICAgICAgU3RyaW5nIGZz\ndHJpbmcgPSBmdW5jOw0KICAgICAgICBpZiAoZnVuYy5pbmRleE9mKHRhcmdl\ndCkgIT0gLTEpDQogICAgICAgICAgICBmc3RyaW5nID0gU3RyaW5ncy5yZXBs\nYWNlKA0KICAgICAgICAgICAgICAgIGZ1bmMsIHRhcmdldCwgIkNBU1QoIiAr\nIHRhcmdldCArIGFzU3RyaW5nICsgIikiKTsNCiAgICAgICAgcmV0dXJuIGZz\ndHJpbmc7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogYWRkIENBU1QgZm9y\nIGEgZnVuY3Rpb24gb3BlcmF0b3Igd2hlcmUgb3BlcmFuZCBpcyBhIHBhcmFt\nDQogICAgICogDQogICAgICogQHBhcmFtIGZ1bmMgZnVuY3Rpb24gbmFtZQ0K\nICAgICAqIEBwYXJhbSB2YWwgdHlwZQ0KICAgICAqIEByZXR1cm4gdXBkYXRl\nZCBzdHJpbmcgKGZ1bmMpDQogICAgICovDQogICAgcHVibGljIFN0cmluZyBh\nZGRDYXN0QXNUeXBlKFN0cmluZyBmdW5jLCBWYWwgdmFsKSB7DQogICAgICAg\nIFN0cmluZyBmc3RyaW5nID0gbnVsbDsNCiAgICAgICAgU3RyaW5nIHR5cGUg\nPSBnZXRUeXBlTmFtZShnZXRKREJDVHlwZShKYXZhVHlwZXMuZ2V0VHlwZUNv\nZGUodmFsDQogICAgICAgICAgICAuZ2V0VHlwZSgpKSwgZmFsc2UpKTsNCiAg\nICAgICAgaWYgKFN0cmluZy5jbGFzcy5lcXVhbHModmFsLmdldFR5cGUoKSkp\nDQogICAgICAgICAgICB0eXBlID0gdHlwZSArICIoIiArIGNoYXJhY3RlckNv\nbHVtblNpemUgKyAiKSI7DQogICAgICAgIGZzdHJpbmcgPSAiQ0FTVCg/IEFT\nICIgKyB0eXBlICsgIikiOw0KICAgICAgICByZXR1cm4gZnN0cmluZzsNCiAg\nICB9DQoNCiAgICAvKioNCiAgICAgKiBSZXR1cm4gdGhlIGJhdGNoIGxpbWl0\nLiBJZiB0aGUgYmF0Y2hMaW1pdCBpcyAtMSwgY2hhbmdlIGl0IHRvIDEwMCBm\nb3INCiAgICAgKiBiZXN0IHBlcmZvcm1hbmNlDQogICAgICovDQogICAgcHVi\nbGljIGludCBnZXRCYXRjaExpbWl0KCkgew0KICAgICAgICBpbnQgbGltaXQg\nPSBzdXBlci5nZXRCYXRjaExpbWl0KCk7DQogICAgICAgIGlmIChsaW1pdCA9\nPSBVTkxJTUlURUQpIHsNCiAgICAgICAgICAgIGxpbWl0ID0gZGVmYXVsdEJh\ndGNoTGltaXQ7DQogICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVk\nKCkpDQogICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJiYXRj\naF91bmxpbWl0IiwgU3RyaW5nLnZhbHVlT2YobGltaXQpKSk7DQogICAgICAg\nIH0NCiAgICAgICAgcmV0dXJuIGxpbWl0Ow0KICAgIH0NCg0KICAgIC8qKg0K\nICAgICAqIFJldHVybiB0aGUgY29ycmVjdCBDQVNUIGZ1bmN0aW9uIHN5bnRh\neA0KICAgICAqIA0KICAgICAqIEBwYXJhbSB2YWwgb3BlcmFuZCBvZiBjYXN0\nDQogICAgICogQHBhcmFtIGZ1bmMgb3JpZ2luYWwgc3RyaW5nDQogICAgICog\nQHJldHVybiBhIFN0cmluZyB3aXRoIHRoZSBjb3JyZWN0IENBU1QgZnVuY3Rp\nb24gc3ludGF4DQogICAgICovDQogICAgcHVibGljIFN0cmluZyBnZXRDYXN0\nRnVuY3Rpb24oVmFsIHZhbCwgU3RyaW5nIGZ1bmMpIHsNCiAgICAgICAgaWYg\nKHZhbCBpbnN0YW5jZW9mIExpdCB8fCB2YWwgaW5zdGFuY2VvZiBQYXJhbSkN\nCiAgICAgICAgICAgIGlmIChmdW5jLmluZGV4T2YoIlZBUkNIQVIiKSA9PSAt\nMSkNCiAgICAgICAgICAgICAgICBmdW5jID0gYWRkQ2FzdEFzU3RyaW5nKGZ1\nbmMsICJ7MH0iLCAiIEFTIFZBUkNIQVIoMTAwMCkiKTsNCiAgICAgICAgcmV0\ndXJuIGZ1bmM7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgaW5kZXhPZihT\nUUxCdWZmZXIgYnVmLCBGaWx0ZXJWYWx1ZSBzdHIsIEZpbHRlclZhbHVlIGZp\nbmQsDQogICAgICAgICAgICBGaWx0ZXJWYWx1ZSBzdGFydCkgew0KICAgICAg\nICBpZiAoZmluZC5nZXRWYWx1ZSgpICE9IG51bGwpIHsgLy8gbm9uIGNvbnN0\nYW50cw0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiKExPQ0FURShDQVNUKCgi\nKTsNCiAgICAgICAgICAgIGZpbmQuYXBwZW5kVG8oYnVmKTsNCiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoIikgQVMgVkFSQ0hBUigxMDAwKSksICIpOw0KICAg\nICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gdGhpcyBpcyBhIGNvbnN0\nYW50DQogICAgICAgICAgICBidWYuYXBwZW5kKCIoTE9DQVRFKCIpOw0KICAg\nICAgICAgICAgZmluZC5hcHBlbmRUbyhidWYpOw0KICAgICAgICAgICAgYnVm\nLmFwcGVuZCgiLCAiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc3RyLmdl\ndFZhbHVlKCkgIT0gbnVsbCkgew0KICAgICAgICAgICAgYnVmLmFwcGVuZCgi\nQ0FTVCgoIik7DQogICAgICAgICAgICBzdHIuYXBwZW5kVG8oYnVmKTsNCiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIikgQVMgVkFSQ0hBUigxMDAwKSkiKTsN\nCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHN0ci5hcHBlbmRUbyhi\ndWYpOw0KICAgICAgICB9DQogICAgICAgIGlmIChzdGFydCAhPSBudWxsKSB7\nDQogICAgICAgICAgICBpZiAoc3RhcnQuZ2V0VmFsdWUoKSA9PSBudWxsKSB7\nDQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiLCBDQVNUKCgiKTsNCiAg\nICAgICAgICAgICAgICBzdGFydC5hcHBlbmRUbyhidWYpOw0KICAgICAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIikgQVMgSU5URUdFUikgKyAxIik7DQogICAg\nICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQo\nIiwgIik7DQogICAgICAgICAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsN\nCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBidWYuYXBwZW5k\nKCIpIC0gMSkiKTsNCiAgICB9DQogICAgDQogICAgLyoqIA0KICAgICAqIENh\nc3QgdGhlIHNwZWNpZmllZCB2YWx1ZSB0byB0aGUgc3BlY2lmaWVkIHR5cGUu\nDQogICAgICoNCiAgICAgKiBAcGFyYW0gYnVmIHRoZSBidWZmZXIgdG8gYXBw\nZW5kIHRoZSBjYXN0IHRvDQogICAgICogQHBhcmFtIHZhbCB0aGUgdmFsdWUg\ndG8gY2FzdA0KICAgICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIG9mIHRoZSBj\nYXNlLCBlLmcuIHtAbGluayBUeXBlcyNOVU1FUklDfQ0KICAgICAqLw0KICAg\nIHB1YmxpYyB2b2lkIGFwcGVuZENhc3QoU1FMQnVmZmVyIGJ1ZiwgRmlsdGVy\nVmFsdWUgdmFsLCBpbnQgdHlwZSkgew0KDQogICAgICAgIC8vIENvbnZlcnQg\ndGhlIGNhc3QgZnVuY3Rpb246ICJDQVNUKHswfSBBUyB7MX0pIg0KICAgICAg\nICBpbnQgZmlyc3RQYXJhbSA9IGNhc3RGdW5jdGlvbi5pbmRleE9mKCJ7MH0i\nKTsNCiAgICAgICAgU3RyaW5nIHByZSA9IGNhc3RGdW5jdGlvbi5zdWJzdHJp\nbmcoMCwgZmlyc3RQYXJhbSk7IC8vICJDQVNUKCINCiAgICAgICAgU3RyaW5n\nIG1pZCA9IGNhc3RGdW5jdGlvbi5zdWJzdHJpbmcoZmlyc3RQYXJhbSArIDMp\nOw0KICAgICAgICBpbnQgc2Vjb25kUGFyYW0gPSBtaWQuaW5kZXhPZigiezF9\nIik7DQogICAgICAgIFN0cmluZyBwb3N0Ow0KICAgICAgICBpZiAoc2Vjb25k\nUGFyYW0gPiAtMSkgew0KICAgICAgICAgICAgcG9zdCA9IG1pZC5zdWJzdHJp\nbmcoc2Vjb25kUGFyYW0gKyAzKTsgLy8gIikiDQogICAgICAgICAgICBtaWQg\nPSBtaWQuc3Vic3RyaW5nKDAsIHNlY29uZFBhcmFtKTsgLy8gIiBBUyAiDQog\nICAgICAgIH0gZWxzZQ0KICAgICAgICAgICAgcG9zdCA9ICIiOw0KDQogICAg\nICAgIC8vIE5vIG5lZWQgdG8gYWRkIENBU1QgaWYgdGhlIHZhbHVlIGlzIGEg\nY29uc3RhbnQNCiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIExpdCB8fCB2\nYWwgaW5zdGFuY2VvZiBQYXJhbSkgew0KICAgICAgICAgICAgYnVmLmFwcGVu\nZChwcmUpOw0KICAgICAgICAgICAgdmFsLmFwcGVuZFRvKGJ1Zik7DQogICAg\nICAgICAgICBidWYuYXBwZW5kKG1pZCk7DQogICAgICAgICAgICBidWYuYXBw\nZW5kKGdldFR5cGVOYW1lKHR5cGUpKTsNCiAgICAgICAgICAgIGFwcGVuZExl\nbmd0aChidWYsIHR5cGUpOw0KICAgICAgICAgICAgYnVmLmFwcGVuZChwb3N0\nKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHZhbC5hcHBlbmRU\nbyhidWYpOw0KICAgICAgICAgICAgU3RyaW5nIHNxbFN0cmluZyA9IGJ1Zi5n\nZXRTUUwoZmFsc2UpOw0KICAgICAgICAgICAgaWYgKHNxbFN0cmluZy5lbmRz\nV2l0aCgiPyIpKSB7DQogICAgICAgICAgICAgICAgLy8gY2FzZSAiKD8iIC0g\nY29udmVydCB0byAiQ0FTVCg/IEFTIHR5cGUiDQogICAgICAgICAgICAgICAg\nU3RyaW5nIHR5cGVOYW1lID0gZ2V0VHlwZU5hbWUodHlwZSk7DQogICAgICAg\nICAgICAgICAgaWYgKFN0cmluZy5jbGFzcy5lcXVhbHModmFsLmdldFR5cGUo\nKSkpDQogICAgICAgICAgICAgICAgICAgIHR5cGVOYW1lID0gdHlwZU5hbWUg\nKyAiKCIgKyBjaGFyYWN0ZXJDb2x1bW5TaXplICsgIikiOw0KICAgICAgICAg\nICAgICAgIFN0cmluZyBzdHIgPSAiQ0FTVCg/IEFTICIgKyB0eXBlTmFtZSAr\nICIpIjsNCiAgICAgICAgICAgICAgICBidWYucmVwbGFjZVNxbFN0cmluZyhz\ncWxTdHJpbmcubGVuZ3RoKCkgLSAxLA0KICAgICAgICAgICAgICAgICAgICAg\nICAgc3FsU3RyaW5nLmxlbmd0aCgpLCBzdHIpOw0KICAgICAgICAgICAgfQ0K\nICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQ3JlYXRlIGFu\nIGluZGV4IGlmIG5lY2Vzc2FyeSBmb3Igc29tZSBkYXRhYmFzZSB0YWJsZXMN\nCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVJbmRleElmTmVjZXNz\nYXJ5KFNjaGVtYSBzY2hlbWEsIFN0cmluZyB0YWJsZSwNCiAgICAgICAgICAg\nIENvbHVtbiBwa0NvbHVtbikgew0KICAgICAgICBpZiAoaXNEQjJaT1NWOHhP\nckxhdGVyKCkpIHsNCiAgICAgICAgICAgIC8vIGJ1aWxkIHRoZSBpbmRleCBm\nb3IgdGhlIHNlcXVlbmNlIHRhYmxlcw0KICAgICAgICAgICAgLy8gdGhlIGlu\nZGV4IG5hbWUgd2lsbCB0aGUgZnVsbHkgcXVhbGlmaWVkIHRhYmxlIG5hbWUg\nKyBfSURYDQogICAgICAgICAgICBUYWJsZSB0YWIgPSBzY2hlbWEuZ2V0VGFi\nbGUodGFibGUpOw0KICAgICAgICAgICAgSW5kZXggaWR4ID0gdGFiLmFkZElu\nZGV4KHRhYi5nZXRGdWxsTmFtZSgpICsgIl9JRFgiKTsNCiAgICAgICAgICAg\nIGlkeC5zZXRVbmlxdWUodHJ1ZSk7DQogICAgICAgICAgICBpZHguYWRkQ29s\ndW1uKHBrQ29sdW1uKTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg==\n","encoding":"base64"}

