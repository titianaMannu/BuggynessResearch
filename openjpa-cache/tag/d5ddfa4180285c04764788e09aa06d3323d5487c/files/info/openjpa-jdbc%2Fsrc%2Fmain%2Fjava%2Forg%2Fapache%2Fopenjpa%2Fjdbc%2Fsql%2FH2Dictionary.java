{"sha":"75a6b6ed38ad8a379381c3621453343fa3f7f9da","node_id":"MDQ6QmxvYjIwNjM2NDo3NWE2YjZlZDM4YWQ4YTM3OTM4MWMzNjIxNDUzMzQzZmEzZjdmOWRh","size":7136,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/75a6b6ed38ad8a379381c3621453343fa3f7f9da","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLnNxbC5Db25uZWN0\naW9uOwppbXBvcnQgamF2YS5zcWwuRGF0YWJhc2VNZXRhRGF0YTsKaW1wb3J0\nIGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwu\nU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuVHlwZXM7CmltcG9ydCBq\nYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkxvY2FsZTsKCmlt\ncG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdVdGlsczsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzLkZpbHRl\nclZhbHVlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVt\nYS5QcmltYXJ5S2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlVuaXF1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkphdmFUeXBlczsKCi8qKgogKiBTdXBwb3J0IGZvciB0aGUgSDIgZGF0YWJh\nc2UgKHtAbGluayBodHRwOi8vd3d3LmgyZGF0YWJhc2UuY29tfSkuCiAqCiAq\nIEBzaW5jZSAwLjkuNwogKi8KcHVibGljIGNsYXNzIEgyRGljdGlvbmFyeSBl\neHRlbmRzIERCRGljdGlvbmFyeSB7CgogICAgcHVibGljIEgyRGljdGlvbmFy\neSgpIHsKICAgICAgICBwbGF0Zm9ybSA9ICJIMiI7CiAgICAgICAgdmFsaWRh\ndGlvblNRTCA9ICJDQUxMIDEiOwogICAgICAgIGNsb3NlUG9vbFNRTCA9ICJT\nSFVURE9XTiI7CgogICAgICAgIHN1cHBvcnRzQXV0b0Fzc2lnbiA9IHRydWU7\nCiAgICAgICAgbGFzdEdlbmVyYXRlZEtleVF1ZXJ5ID0gIkNBTEwgSURFTlRJ\nVFkoKSI7CiAgICAgICAgYXV0b0Fzc2lnbkNsYXVzZSA9ICJJREVOVElUWSI7\nCiAgICAgICAgYXV0b0Fzc2lnblR5cGVOYW1lID0gIklOVEVHRVIiOwogICAg\nICAgIG5leHRTZXF1ZW5jZVF1ZXJ5ID0gIkNBTEwgTkVYVCBWQUxVRSBGT1Ig\nezB9IjsKCiAgICAgICAgLy8gQ1JPU1MgSk9JTiBpcyBjdXJyZW50bHkgbm90\nIHN1cHBvcnRlZAogICAgICAgIGNyb3NzSm9pbkNsYXVzZSA9ICJKT0lOIjsK\nICAgICAgICByZXF1aXJlc0NvbmRpdGlvbkZvckNyb3NzSm9pbiA9IHRydWU7\nCiAgICAgICAgc3RyaW5nTGVuZ3RoRnVuY3Rpb24gPSAiTEVOR1RIKHswfSki\nOwogICAgICAgIHRyaW1MZWFkaW5nRnVuY3Rpb24gPSAiTFRSSU0oezB9KSI7\nCiAgICAgICAgdHJpbVRyYWlsaW5nRnVuY3Rpb24gPSAiUlRSSU0oezB9KSI7\nCiAgICAgICAgdHJpbUJvdGhGdW5jdGlvbiA9ICJUUklNKHswfSkiOwoKICAg\nICAgICB1c2VTY2hlbWFOYW1lID0gdHJ1ZTsKICAgICAgICBzdXBwb3J0c1Nl\nbGVjdEZvclVwZGF0ZSA9IHRydWU7CiAgICAgICAgc3VwcG9ydHNTZWxlY3RT\ndGFydEluZGV4ID0gdHJ1ZTsKICAgICAgICBzdXBwb3J0c1NlbGVjdEVuZElu\nZGV4ID0gdHJ1ZTsKICAgICAgICByYW5nZVBvc2l0aW9uID0gUkFOR0VfUE9T\nVF9MT0NLOwogICAgICAgIHN1cHBvcnRzRGVmZXJyZWRDb25zdHJhaW50cyA9\nIGZhbHNlOwoKICAgICAgICBibG9iVHlwZU5hbWUgPSAiQkxPQiI7CiAgICAg\nICAgZG91YmxlVHlwZU5hbWUgPSAiRE9VQkxFIjsKCiAgICAgICAgc3VwcG9y\ndHNOdWxsVGFibGVGb3JHZXRQcmltYXJ5S2V5cyA9IHRydWU7CiAgICAgICAg\nc3VwcG9ydHNOdWxsVGFibGVGb3JHZXRJbmRleEluZm8gPSB0cnVlOwoKICAg\nICAgICByZXF1aXJlc0Nhc3RGb3JNYXRoRnVuY3Rpb25zID0gZmFsc2U7CiAg\nICAgICAgcmVxdWlyZXNDYXN0Rm9yQ29tcGFyaXNvbnMgPSBmYWxzZTsKCiAg\nICAgICAgcmVzZXJ2ZWRXb3JkU2V0LmFkZEFsbChBcnJheXMuYXNMaXN0KG5l\ndyBTdHJpbmdbXSB7CiAgICAgICAgICAgICJDVVJSRU5UX1RJTUVTVEFNUCIs\nICJDVVJSRU5UX1RJTUUiLCAiQ1VSUkVOVF9EQVRFIiwgIkNST1NTIiwKICAg\nICAgICAgICAgIkRJU1RJTkNUIiwgIkVYQ0VQVCIsICJFWElTVFMiLCAiRlJP\nTSIsICJGT1IiLCAiRkFMU0UiLCAiRlVMTCIsCiAgICAgICAgICAgICJHUk9V\nUCIsICJIQVZJTkciLCAiSU5ORVIiLCAiSU5URVJTRUNUIiwgIklTIiwgIkpP\nSU4iLCAiTElLRSIsCiAgICAgICAgICAgICJNSU5VUyIsICJOQVRVUkFMIiwg\nIk5PVCIsICJOVUxMIiwgIk9OIiwgIk9SREVSIiwgIlBSSU1BUlkiLAogICAg\nICAgICAgICAiUk9XTlVNIiwgIlNFTEVDVCIsICJTWVNEQVRFIiwgIlNZU1RJ\nTUUiLCAiU1lTVElNRVNUQU1QIiwgIlRPREFZIiwKICAgICAgICAgICAgIlRS\nVUUiLCAiVU5JT04iLCAiV0hFUkUiIAogICAgICAgICAgICB9KSk7CiAgICB9\nCgogICAgcHVibGljIGludCBnZXRKREJDVHlwZShpbnQgbWV0YVR5cGVDb2Rl\nLCBib29sZWFuIGxvYikgewogICAgICAgIGludCB0eXBlID0gc3VwZXIuZ2V0\nSkRCQ1R5cGUobWV0YVR5cGVDb2RlLCBsb2IpOwogICAgICAgIHN3aXRjaCAo\ndHlwZSkgewogICAgICAgIGNhc2UgVHlwZXMuQklHSU5UOgogICAgICAgICAg\nICBpZiAobWV0YVR5cGVDb2RlID09IEphdmFUeXBlcy5CSUdJTlRFR0VSKQog\nICAgICAgICAgICAgICAgcmV0dXJuIFR5cGVzLk5VTUVSSUM7CiAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHlwZTsKICAg\nIH0KCiAgICBwdWJsaWMgaW50IGdldFByZWZlcnJlZFR5cGUoaW50IHR5cGUp\nIHsKICAgICAgICByZXR1cm4gc3VwZXIuZ2V0UHJlZmVycmVkVHlwZSh0eXBl\nKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0QWRkUHJpbWFyeUtl\neVNRTChQcmltYXJ5S2V5IHBrKSB7CiAgICAgICAgcmV0dXJuIG5ldyBTdHJp\nbmdbMF07CiAgICB9CgogICAgcHVibGljIFN0cmluZ1tdIGdldERyb3BQcmlt\nYXJ5S2V5U1FMKFByaW1hcnlLZXkgcGspIHsKICAgICAgICByZXR1cm4gbmV3\nIFN0cmluZ1swXTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0QWRk\nQ29sdW1uU1FMKENvbHVtbiBjb2x1bW4pIHsKICAgICAgICByZXR1cm4gbmV3\nIFN0cmluZ1tdIHsgCiAgICAgICAgICAgICJBTFRFUiBUQUJMRSAiICsgZ2V0\nRnVsbE5hbWUoY29sdW1uLmdldFRhYmxlKCksIGZhbHNlKSAKICAgICAgICAg\nICAgICAgICsgIiBBREQgQ09MVU1OICIgKyBnZXREZWNsYXJlQ29sdW1uU1FM\nKGNvbHVtbiwgdHJ1ZSkgCiAgICAgICAgfTsKICAgIH0KCiAgICBwdWJsaWMg\nU3RyaW5nW10gZ2V0Q3JlYXRlVGFibGVTUUwoVGFibGUgdGFibGUpIHsKICAg\nICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOwog\nICAgICAgIGJ1Zi5hcHBlbmQoIkNSRUFURSBUQUJMRSAiKS5hcHBlbmQoZ2V0\nRnVsbE5hbWUodGFibGUsIGZhbHNlKSkKICAgICAgICAgICAgLmFwcGVuZCgi\nICgiKTsKCiAgICAgICAgQ29sdW1uW10gY29scyA9IHRhYmxlLmdldENvbHVt\nbnMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgaWYgKGkgPiAwKQogICAgICAgICAgICAg\nICAgYnVmLmFwcGVuZCgiLCAiKTsKICAgICAgICAgICAgYnVmLmFwcGVuZChn\nZXREZWNsYXJlQ29sdW1uU1FMKGNvbHNbaV0sIGZhbHNlKSk7CiAgICAgICAg\nfQoKICAgICAgICBQcmltYXJ5S2V5IHBrID0gdGFibGUuZ2V0UHJpbWFyeUtl\neSgpOwogICAgICAgIFN0cmluZyBwa1N0cjsKICAgICAgICBpZiAocGsgIT0g\nbnVsbCkgewogICAgICAgICAgICBwa1N0ciA9IGdldFByaW1hcnlLZXlDb25z\ndHJhaW50U1FMKHBrKTsKICAgICAgICAgICAgaWYgKCFTdHJpbmdVdGlscy5p\nc0VtcHR5KHBrU3RyKSkKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiwg\nIikuYXBwZW5kKHBrU3RyKTsKICAgICAgICB9CgogICAgICAgIFVuaXF1ZVtd\nIHVucXMgPSB0YWJsZS5nZXRVbmlxdWVzKCk7CiAgICAgICAgU3RyaW5nIHVu\ncVN0cjsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHVucXMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgdW5xU3RyID0gZ2V0VW5pcXVlQ29uc3Ry\nYWludFNRTCh1bnFzW2ldKTsKICAgICAgICAgICAgaWYgKHVucVN0ciAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiLCAiKS5hcHBlbmQo\ndW5xU3RyKTsKICAgICAgICB9CgogICAgICAgIGJ1Zi5hcHBlbmQoIikiKTsK\nICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1tdIHsgYnVmLnRvU3RyaW5nKCkg\nfTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFByaW1hcnlLZXlD\nb25zdHJhaW50U1FMKFByaW1hcnlLZXkgcGspIHsKICAgICAgICBDb2x1bW5b\nXSBjb2xzID0gcGsuZ2V0Q29sdW1ucygpOwogICAgICAgIGlmIChjb2xzLmxl\nbmd0aCA9PSAxICYmIGNvbHNbMF0uaXNBdXRvQXNzaWduZWQoKSkKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIHN1cGVyLmdldFBy\naW1hcnlLZXlDb25zdHJhaW50U1FMKHBrKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc1N5c3RlbUluZGV4KFN0cmluZyBuYW1lLCBUYWJsZSB0YWJs\nZSkgewogICAgICAgIHJldHVybiBuYW1lLnRvVXBwZXJDYXNlKExvY2FsZS5F\nTkdMSVNIKS5zdGFydHNXaXRoKCJTWVNURU1fIik7CiAgICB9CgogICAgcHJv\ndGVjdGVkIFN0cmluZyBnZXRTZXF1ZW5jZXNTUUwoU3RyaW5nIHNjaGVtYU5h\nbWUsIFN0cmluZyBzZXF1ZW5jZU5hbWUpIHsKICAgICAgICBTdHJpbmdCdWZm\nZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOwogICAgICAgIGJ1Zi5hcHBl\nbmQoIlNFTEVDVCBTRVFVRU5DRV9TQ0hFTUEsIFNFUVVFTkNFX05BTUUgRlJP\nTSAiKQogICAgICAgICAgICAuYXBwZW5kKCJJTkZPUk1BVElPTl9TQ0hFTUEu\nU0VRVUVOQ0VTIik7CiAgICAgICAgaWYgKHNjaGVtYU5hbWUgIT0gbnVsbCB8\nfCBzZXF1ZW5jZU5hbWUgIT0gbnVsbCkKICAgICAgICAgICAgYnVmLmFwcGVu\nZCgiIFdIRVJFICIpOwogICAgICAgIGlmIChzY2hlbWFOYW1lICE9IG51bGwp\nIHsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiU0VRVUVOQ0VfU0NIRU1BID0g\nPyIpOwogICAgICAgICAgICBpZiAoc2VxdWVuY2VOYW1lICE9IG51bGwpCiAg\nICAgICAgICAgICAgICBidWYuYXBwZW5kKCIgQU5EICIpOwogICAgICAgIH0K\nICAgICAgICBpZiAoc2VxdWVuY2VOYW1lICE9IG51bGwpCiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoIlNFUVVFTkNFX05BTUUgPSA/Iik7CiAgICAgICAgcmV0\ndXJuIGJ1Zi50b1N0cmluZygpOwogICAgfQoKICAgIHB1YmxpYyBDb2x1bW5b\nXSBnZXRDb2x1bW5zKERhdGFiYXNlTWV0YURhdGEgbWV0YSwgU3RyaW5nIGNh\ndGFsb2csCiAgICAgICAgU3RyaW5nIHNjaGVtYU5hbWUsIFN0cmluZyB0YWJs\nZU5hbWUsIFN0cmluZyBjb2x1bW5OYW1lLCBDb25uZWN0aW9uIGNvbm4pCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgQ29sdW1uW10g\nY29scyA9IHN1cGVyLmdldENvbHVtbnMobWV0YSwgY2F0YWxvZywgc2NoZW1h\nTmFtZSwgdGFibGVOYW1lLCAKICAgICAgICAgICAgY29sdW1uTmFtZSwgY29u\nbik7CiAgICAgICAgcmV0dXJuIGNvbHM7CiAgICB9CgogICAgcHJvdGVjdGVk\nIHZvaWQgYXBwZW5kU2VsZWN0UmFuZ2UoU1FMQnVmZmVyIGJ1ZiwgbG9uZyBz\ndGFydCwgbG9uZyBlbmQsCiAgICAgICAgYm9vbGVhbiBzdWJzZWxlY3QpIHsK\nICAgICAgICBpZiAoZW5kICE9IExvbmcuTUFYX1ZBTFVFKQogICAgICAgICAg\nICBidWYuYXBwZW5kKCIgTElNSVQgIikuYXBwZW5kVmFsdWUoZW5kIC0gc3Rh\ncnQpOwogICAgICAgIGlmIChzdGFydCAhPSAwKQogICAgICAgICAgICBidWYu\nYXBwZW5kKCIgT0ZGU0VUICIpLmFwcGVuZFZhbHVlKHN0YXJ0KTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBpbmRleE9mKFNRTEJ1ZmZlciBidWYsIEZpbHRl\nclZhbHVlIHN0ciwgRmlsdGVyVmFsdWUgZmluZCwKICAgICAgICBGaWx0ZXJW\nYWx1ZSBzdGFydCkgewogICAgICAgIGJ1Zi5hcHBlbmQoIihQT1NJVElPTigi\nKTsKICAgICAgICBmaW5kLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgYnVmLmFw\ncGVuZCgiIElOICIpOwogICAgICAgIGlmIChzdGFydCAhPSBudWxsKQogICAg\nICAgICAgICBzdWJzdHJpbmcoYnVmLCBzdHIsIHN0YXJ0LCBudWxsKTsKICAg\nICAgICBlbHNlCiAgICAgICAgICAgIHN0ci5hcHBlbmRUbyhidWYpOwogICAg\nICAgIGJ1Zi5hcHBlbmQoIikgLSAxIik7CiAgICAgICAgaWYgKHN0YXJ0ICE9\nIG51bGwpIHsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiICsgIik7CiAgICAg\nICAgICAgIHN0YXJ0LmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgfQogICAgICAg\nIGJ1Zi5hcHBlbmQoIikiKTsKICAgIH0KfQo=\n","encoding":"base64"}

