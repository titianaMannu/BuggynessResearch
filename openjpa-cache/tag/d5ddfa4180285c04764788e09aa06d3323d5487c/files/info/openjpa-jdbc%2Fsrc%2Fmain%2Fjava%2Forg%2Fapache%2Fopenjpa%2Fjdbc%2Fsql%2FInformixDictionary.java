{"sha":"e03b63d0e98bfde3098c117b1652072ba871a83b","node_id":"MDQ6QmxvYjIwNjM2NDplMDNiNjNkMGU5OGJmZGUzMDk4YzExN2IxNjUyMDcyYmE4NzFhODNi","size":9333,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e03b63d0e98bfde3098c117b1652072ba871a83b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsK\naW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDsKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDsKaW1wb3J0\nIGphdmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5QcmltYXJ5S2V5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlJlZmVyZW5jZUhhc2hTZXQ7\nCgovKioKICogRGljdGlvbmFyeSBmb3IgSW5mb3JtaXggZGF0YWJhc2UuIE5v\ndGFibGUgZmVhdHVyZXM6CiAqIDx1bD4KICogPGxpPkluZm9ybWl4IGRvZXMg\nbm90IGFsbG93IHBlc3NpbWlzdGljIGxvY2tpbmcgb24gc2Nyb2xsYWJsZSBy\nZXN1bHQKICogc2V0cy48L2xpPgogKiA8bGk+U0VUIExPQ0sgTU9ERSBUTyBX\nQUlUIE4gc3RhdGVtZW50cyBhcmUgaXNzdWVkIHRvIHdhaXQgb24gbG9ja3Mu\nIFNlZQogKiB7QGxpbmsgI2xvY2tXYWl0U2Vjb25kc30gYW5kIHtAbGluayAj\nbG9ja01vZGVFbmFibGVkfS48L2xpPgogKiA8bGk+TE9DSyBNT0RFIFJPVyBp\ncyB1c2VkIGJ5IGRlZmF1bHQgZm9yIHRhYmxlIGNyZWF0aW9uIHRvIGFsbG93\nIHRoZQogKiBtYXhpbXVtIGNvbmN1cnJlbmN5LjwvbGk+CiAqIDwvdWw+CiAq\nLwpwdWJsaWMgY2xhc3MgSW5mb3JtaXhEaWN0aW9uYXJ5CiAgICBleHRlbmRz\nIERCRGljdGlvbmFyeSB7CgogICAgLyoqCiAgICAgKiBJZiB0cnVlLCB0aGVu\nIHdlIHdpbGwgaXNzdWUgYSAiU0VUIExPQ0sgTU9ERSBUTyBXQUlUIE4iCiAg\nICAgKiBzdGF0ZW1lbnQgd2hlbmV2ZXIgd2UgY3JlYXRlIGEge0BsaW5rIENv\nbm5lY3Rpb259LCBpbiBvcmRlcgogICAgICogYWxsb3cgd2FpdGluZyBvbiBs\nb2Nrcy4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gbG9ja01vZGVFbmFi\nbGVkID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBJZiB7QGxpbmsgI2xvY2tN\nb2RlRW5hYmxlZH0gaXMgPGNvZGU+dHJ1ZTwvY29kZT4sIHRoZW4gdGhpcwog\nICAgICogcGFyYW1ldGVyIHNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIHNlY29u\nZHMgd2Ugd2lsbCB3YWl0IHRvCiAgICAgKiBvYnRhaW4gYSBsb2NrIGZvciBp\nbnNlcnRzIGFuZCBwZXNzaW1pc3RpYyBsb2NraW5nLgogICAgICovCiAgICBw\ndWJsaWMgaW50IGxvY2tXYWl0U2Vjb25kcyA9IDMwOwoKICAgIC8qKgogICAg\nICogSW5mb3JtaXggSkRCQyBtZXRhZGF0YSBmb3IgYWxsIGtub3duIGRyaXZl\ncnMgcmV0dXJucyB3aXRoIHRoZQogICAgICogdGFibGUgY2F0YWxvZyBhbmQg\ndGhlIHRhYmxlIHNjaGVtYSBuYW1lIHN3YXBwZWQuIEEgPGNvZGU+dHJ1ZTwv\nY29kZT4KICAgICAqIHZhbHVlIGZvciB0aGlzIHByb3BlcnR5IGluZGljYXRl\ncyB0aGF0IHRoZXkgc2hvdWxkIGJlIHJldmVyc2VkLgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiBzd2FwU2NoZW1hQW5kQ2F0YWxvZyA9IHRydWU7Cgog\nICAgLy8gd2VhayBzZXQgb2YgY29ubmVjdGlvbnMgd2UndmUgYWxyZWFkeSBl\neGVjdXRlZCBsb2NrIG1vZGUgc3FsIG9uCiAgICBwcml2YXRlIGZpbmFsIENv\nbGxlY3Rpb24gX3NlZW5Db25uZWN0aW9ucyA9IG5ldyBSZWZlcmVuY2VIYXNo\nU2V0CiAgICAgICAgKFJlZmVyZW5jZUhhc2hTZXQuV0VBSyk7CgogICAgcHVi\nbGljIEluZm9ybWl4RGljdGlvbmFyeSgpIHsKICAgICAgICBwbGF0Zm9ybSA9\nICJJbmZvcm1peCI7CiAgICAgICAgdmFsaWRhdGlvblNRTCA9ICJTRUxFQ1Qg\nRklSU1QgMSBDVVJSRU5UIFRJTUVTVEFNUCAiCiAgICAgICAgICAgICsgIkZS\nT00gaW5mb3JtaXguc3lzdGFibGVzIjsKCiAgICAgICAgc3VwcG9ydHNBdXRv\nQXNzaWduID0gdHJ1ZTsKICAgICAgICBhdXRvQXNzaWduVHlwZU5hbWUgPSAi\nc2VyaWFsIjsKICAgICAgICBsYXN0R2VuZXJhdGVkS2V5UXVlcnkgPSAiU0VM\nRUNUIEZJUlNUIDEgREJJTkZPKCdzcWxjYS5zcWxlcnJkMScpICIKICAgICAg\nICAgICAgKyAiRlJPTSBpbmZvcm1peC5zeXN0YWJsZXMiOwoKICAgICAgICAv\nLyBpbmZvcm1peCBhY3R1YWxseSBkb2VzIHN1cHBvcnQgZGVmZXJyZWQgY29u\nc3RyYWludHMsIGJ1dCBub3QKICAgICAgICAvLyBpbiB0aGUgdGFibGUgZGVm\naW5pdGlvbjsgZGVmZXJyZWQgY29uc3RyYWludHMgY2FuIGJlIGFjdGl2YXRl\nZCBieQogICAgICAgIC8vIGludm9raW5nICJzZXQgY29uc3RyYWludHMgYWxs\nIGRlZmVycmVkIiBvbiB0aGUgY29ubmVjdGlvbiwgd2hpY2gKICAgICAgICAv\nLyB3ZSBkb24ndCBkbyB5ZXQKICAgICAgICBzdXBwb3J0c0RlZmVycmVkQ29u\nc3RyYWludHMgPSBmYWxzZTsKICAgICAgICBjb25zdHJhaW50TmFtZU1vZGUg\nPSBDT05TX05BTUVfQUZURVI7CgogICAgICAgIG1heFRhYmxlTmFtZUxlbmd0\naCA9IDE4OwogICAgICAgIG1heENvbHVtbk5hbWVMZW5ndGggPSAxODsKICAg\nICAgICBtYXhJbmRleE5hbWVMZW5ndGggPSAxODsKICAgICAgICBtYXhDb25z\ndHJhaW50TmFtZUxlbmd0aCA9IDE4OwoKICAgICAgICAvLyBpbmZvcm1peCBz\ndXBwb3J0cyAiQ0xPQiIgdHlwZSwgYnV0IGFueSBhdHRlbXB0IHRvIGluc2Vy\ndAogICAgICAgIC8vIGludG8gdGhlbSByYWlzZXM6ICJqYXZhLnNxbC5TUUxF\neGNlcHRpb246IENhbid0IGNvbnZlcnQgZnJvbW51bGwiCiAgICAgICAgdXNl\nR2V0U3RyaW5nRm9yQ2xvYnMgPSB0cnVlOwogICAgICAgIGxvbmdWYXJjaGFy\nVHlwZU5hbWUgPSAiVEVYVCI7CiAgICAgICAgY2xvYlR5cGVOYW1lID0gIlRF\nWFQiOwogICAgICAgIHNtYWxsaW50VHlwZU5hbWUgPSAiSU5UOCI7CiAgICAg\nICAgdGlueWludFR5cGVOYW1lID0gIklOVDgiOwogICAgICAgIGZsb2F0VHlw\nZU5hbWUgPSAiRkxPQVQiOwogICAgICAgIGJpdFR5cGVOYW1lID0gIkJPT0xF\nQU4iOwogICAgICAgIGJsb2JUeXBlTmFtZSA9ICJCWVRFIjsKICAgICAgICBk\nb3VibGVUeXBlTmFtZSA9ICJOVU1FUklDKDMyLDIwKSI7CiAgICAgICAgZGF0\nZVR5cGVOYW1lID0gIkRBVEUiOwogICAgICAgIHRpbWVUeXBlTmFtZSA9ICJE\nQVRFVElNRSBIT1VSIFRPIFNFQ09ORCI7CiAgICAgICAgdGltZXN0YW1wVHlw\nZU5hbWUgPSAiREFURVRJTUUgWUVBUiBUTyBTRUNPTkQiOwogICAgICAgIGRv\ndWJsZVR5cGVOYW1lID0gIk5VTUVSSUMoMzIsMjApIjsKICAgICAgICBmbG9h\ndFR5cGVOYW1lID0gIlJFQUwiOwogICAgICAgIGJpZ2ludFR5cGVOYW1lID0g\nIk5VTUVSSUMoMzIsMCkiOwogICAgICAgIGRvdWJsZVR5cGVOYW1lID0gIkRP\nVUJMRSBQUkVDSVNJT04iOwogICAgICAgIGZpeGVkU2l6ZVR5cGVOYW1lU2V0\nLmFkZEFsbChBcnJheXMuYXNMaXN0KG5ldyBTdHJpbmdbXXsKICAgICAgICAg\nICAgIkJZVEUiLCAiRE9VQkxFIFBSRUNJU0lPTiIsICJJTlRFUlZBTCIsICJT\nTUFMTEZMT0FUIiwgIlRFWFQiLAogICAgICAgICAgICAiSU5UOCIsCiAgICAg\nICAgfSkpOwoKICAgICAgICBzdXBwb3J0c1F1ZXJ5VGltZW91dCA9IGZhbHNl\nOwogICAgICAgIHN1cHBvcnRzTXVsdGlwbGVOb250cmFuc2FjdGlvbmFsUmVz\ndWx0U2V0cyA9IGZhbHNlOwogICAgICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhE\naXN0aW5jdENsYXVzZSA9IGZhbHNlOwogICAgICAgIHN1cHBvcnRzTG9ja2lu\nZ1dpdGhNdWx0aXBsZVRhYmxlcyA9IGZhbHNlOwogICAgICAgIHN1cHBvcnRz\nTG9ja2luZ1dpdGhPcmRlckNsYXVzZSA9IGZhbHNlOwoKICAgICAgICAvLyB0\naGUgaW5mb3JtaXggSkRCQyBkcml2ZXJzIGhhdmUgcHJvYmxlbXMgd2l0aCB1\nc2luZyB0aGUKICAgICAgICAvLyBzY2hlbWEgbmFtZSBpbiByZWZsZWN0aW9u\nIG9uIGNvbHVtbnMgYW5kIHRhYmxlcwogICAgICAgIHN1cHBvcnRzU2NoZW1h\nRm9yR2V0Q29sdW1ucyA9IGZhbHNlOwogICAgICAgIHN1cHBvcnRzU2NoZW1h\nRm9yR2V0VGFibGVzID0gZmFsc2U7CgogICAgICAgIC8vIEluZm9ybWl4IGRv\nZXNuJ3Qgc3VwcG9ydCBhbGlhc2VzIGluIGRlbGV0ZXMgaWYgdGhlIHRhYmxl\nIGhhcyBhbiBpbmRleAogICAgICAgIGFsbG93c0FsaWFzSW5CdWxrQ2xhdXNl\nID0gZmFsc2U7CiAgICAgICAgCiAgICAgICAgc3VwcG9ydHNTdWJzZWxlY3Qg\nPSBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjb25uZWN0ZWRDb25m\naWd1cmF0aW9uKENvbm5lY3Rpb24gY29ubikKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICBzdXBlci5jb25uZWN0ZWRDb25maWd1cmF0\naW9uKGNvbm4pOwogICAgICAgIGlmIChkcml2ZXJWZW5kb3IgPT0gbnVsbCkg\newogICAgICAgICAgICBEYXRhYmFzZU1ldGFEYXRhIG1ldGEgPSBjb25uLmdl\ndE1ldGFEYXRhKCk7CiAgICAgICAgICAgIGlmICgiSW5mb3JtaXgiLmVxdWFs\nc0lnbm9yZUNhc2UobWV0YS5nZXREcml2ZXJOYW1lKCkpKQogICAgICAgICAg\nICAgICAgZHJpdmVyVmVuZG9yID0gVkVORE9SX0RBVEFESVJFQ1Q7CiAgICAg\nICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGRyaXZlclZlbmRvciA9IFZF\nTkRPUl9PVEhFUjsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIENvbHVt\nbltdIGdldENvbHVtbnMoRGF0YWJhc2VNZXRhRGF0YSBtZXRhLCBTdHJpbmcg\nY2F0YWxvZywKICAgICAgICBTdHJpbmcgc2NoZW1hTmFtZSwgU3RyaW5nIHRh\nYmxlTmFtZSwgU3RyaW5nIGNvbHVtbk5hbWUsIENvbm5lY3Rpb24gY29ubikK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBDb2x1bW5b\nXSBjb2xzID0gc3VwZXIuZ2V0Q29sdW1ucyhtZXRhLCBjYXRhbG9nLCBzY2hl\nbWFOYW1lLCB0YWJsZU5hbWUsCiAgICAgICAgICAgIGNvbHVtbk5hbWUsIGNv\nbm4pOwoKICAgICAgICAvLyB0cmVhdCBsb2d2YXJjaGFyIGFzIGNsb2IKICAg\nICAgICBmb3IgKGludCBpID0gMDsgY29scyAhPSBudWxsICYmIGkgPCBjb2xz\nLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoY29sc1tpXS5nZXRUeXBl\nKCkgPT0gVHlwZXMuTE9OR1ZBUkNIQVIpCiAgICAgICAgICAgICAgICBjb2xz\nW2ldLnNldFR5cGUoVHlwZXMuQ0xPQik7CiAgICAgICAgcmV0dXJuIGNvbHM7\nCiAgICB9CgogICAgcHVibGljIENvbHVtbiBuZXdDb2x1bW4oUmVzdWx0U2V0\nIGNvbE1ldGEpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgQ29sdW1uIGNvbCA9IHN1cGVyLm5ld0NvbHVtbihjb2xNZXRhKTsKICAg\nICAgICBpZiAoc3dhcFNjaGVtYUFuZENhdGFsb2cpCiAgICAgICAgICAgIGNv\nbC5zZXRTY2hlbWFOYW1lKGNvbE1ldGEuZ2V0U3RyaW5nKCJUQUJMRV9DQVQi\nKSk7CiAgICAgICAgcmV0dXJuIGNvbDsKICAgIH0KCiAgICBwdWJsaWMgUHJp\nbWFyeUtleSBuZXdQcmltYXJ5S2V5KFJlc3VsdFNldCBwa01ldGEpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgUHJpbWFyeUtleSBw\nayA9IHN1cGVyLm5ld1ByaW1hcnlLZXkocGtNZXRhKTsKICAgICAgICBpZiAo\nc3dhcFNjaGVtYUFuZENhdGFsb2cpCiAgICAgICAgICAgIHBrLnNldFNjaGVt\nYU5hbWUocGtNZXRhLmdldFN0cmluZygiVEFCTEVfQ0FUIikpOwogICAgICAg\nIHJldHVybiBwazsKICAgIH0KCiAgICBwdWJsaWMgSW5kZXggbmV3SW5kZXgo\nUmVzdWx0U2V0IGlkeE1ldGEpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgSW5kZXggaWR4ID0gc3VwZXIubmV3SW5kZXgoaWR4TWV0\nYSk7CiAgICAgICAgaWYgKHN3YXBTY2hlbWFBbmRDYXRhbG9nKQogICAgICAg\nICAgICBpZHguc2V0U2NoZW1hTmFtZShpZHhNZXRhLmdldFN0cmluZygiVEFC\nTEVfQ0FUIikpOwogICAgICAgIHJldHVybiBpZHg7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0Qm9vbGVhbihQcmVwYXJlZFN0YXRlbWVudCBzdG1udCwg\naW50IGlkeCwgYm9vbGVhbiB2YWwsCiAgICAgICAgQ29sdW1uIGNvbCkKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAvLyBpbmZvcm1p\neCBhY3R1YWxseSByZXF1aXJlcyB0aGF0IGEgYm9vbGVhbiBiZSBzZXQ6IGl0\nIGNhbm5vdAogICAgICAgIC8vIGhhbmRsZSBhIG51bWVyaWMgYXJndW1lbnQK\nICAgICAgICBzdG1udC5zZXRCb29sZWFuKGlkeCwgdmFsKTsKICAgIH0KCiAg\nICBwdWJsaWMgU3RyaW5nW10gZ2V0Q3JlYXRlVGFibGVTUUwoVGFibGUgdGFi\nbGUpIHsKICAgICAgICBTdHJpbmdbXSBjcmVhdGUgPSBzdXBlci5nZXRDcmVh\ndGVUYWJsZVNRTCh0YWJsZSk7CiAgICAgICAgY3JlYXRlWzBdID0gY3JlYXRl\nWzBdICsgIiBMT0NLIE1PREUgUk9XIjsKICAgICAgICByZXR1cm4gY3JlYXRl\nOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRBZGRQcmltYXJ5S2V5\nU1FMKFByaW1hcnlLZXkgcGspIHsKICAgICAgICBTdHJpbmcgcGtzcWwgPSBn\nZXRQcmltYXJ5S2V5Q29uc3RyYWludFNRTChwayk7CiAgICAgICAgaWYgKHBr\nc3FsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nWzBd\nOwogICAgICAgIHJldHVybiBuZXcgU3RyaW5nW117ICJBTFRFUiBUQUJMRSAi\nCiAgICAgICAgICAgICsgZ2V0RnVsbE5hbWUocGsuZ2V0VGFibGUoKSwgZmFs\nc2UpICsgIiBBREQgQ09OU1RSQUlOVCAiICsgcGtzcWwgfTsKICAgIH0KCiAg\nICBwdWJsaWMgU3RyaW5nW10gZ2V0QWRkRm9yZWlnbktleVNRTChGb3JlaWdu\nS2V5IGZrKSB7CiAgICAgICAgU3RyaW5nIGZrc3FsID0gZ2V0Rm9yZWlnbktl\neUNvbnN0cmFpbnRTUUwoZmspOwogICAgICAgIGlmIChma3NxbCA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1swXTsKICAgICAgICBy\nZXR1cm4gbmV3IFN0cmluZ1tdeyAiQUxURVIgVEFCTEUgIgogICAgICAgICAg\nICArIGdldEZ1bGxOYW1lKGZrLmdldFRhYmxlKCksIGZhbHNlKSArICIgQURE\nIENPTlNUUkFJTlQgIiArIGZrc3FsIH07CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gc3VwcG9ydHNSYW5kb21BY2Nlc3NSZXN1bHRTZXQoU2VsZWN0IHNl\nbCwKICAgICAgICBib29sZWFuIGZvclVwZGF0ZSkgewogICAgICAgIHJldHVy\nbiAhZm9yVXBkYXRlICYmICFzZWwuaXNMb2IoKQogICAgICAgICAgICAmJiBz\ndXBlci5zdXBwb3J0c1JhbmRvbUFjY2Vzc1Jlc3VsdFNldChzZWwsIGZvclVw\nZGF0ZSk7CiAgICB9CgogICAgcHVibGljIENvbm5lY3Rpb24gZGVjb3JhdGUo\nQ29ubmVjdGlvbiBjb25uKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIGNvbm4gPSBzdXBlci5kZWNvcmF0ZShjb25uKTsKCiAgICAg\nICAgLy8gaWYgd2UgaGF2ZW4ndCBhbHJlYWR5IGRvbmUgc28sIGluaXRpYWxp\nemUgdGhlIGxvY2sgbW9kZSBvZiB0aGUKICAgICAgICAvLyBjb25uZWN0aW9u\nCiAgICAgICAgaWYgKGxvY2tNb2RlRW5hYmxlZCAmJiBfc2VlbkNvbm5lY3Rp\nb25zLmFkZChjb25uKSkgewogICAgICAgICAgICBTdHJpbmcgc3FsID0gIlNF\nVCBMT0NLIE1PREUgVE8gV0FJVCI7CiAgICAgICAgICAgIGlmIChsb2NrV2Fp\ndFNlY29uZHMgPiAwKQogICAgICAgICAgICAgICAgc3FsID0gc3FsICsgIiAi\nICsgbG9ja1dhaXRTZWNvbmRzOwoKICAgICAgICAgICAgU3RhdGVtZW50IHN0\nbW50ID0gbnVsbDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nIHN0bW50ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTsKICAgICAgICAgICAg\nICAgIHN0bW50LmV4ZWN1dGVVcGRhdGUoc3FsKTsKICAgICAgICAgICAgfSBj\nYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICB0aHJv\ndyBTUUxFeGNlcHRpb25zLmdldFN0b3JlKHNlLCB0aGlzKTsKICAgICAgICAg\nICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIGlmIChzdG1udCAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgIHN0bW50LmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAg\nfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB0aGUg\nZGF0YWRpcmVjdCBkcml2ZXIgcmVxdWlyZXMgdGhhdCB3ZSBpc3N1ZSBhIHJv\nbGxiYWNrIGJlZm9yZSB1c2luZwogICAgICAgIC8vIGVhY2ggY29ubmVjdGlv\nbgogICAgICAgIGlmIChWRU5ET1JfREFUQURJUkVDVC5lcXVhbHNJZ25vcmVD\nYXNlKGRyaXZlclZlbmRvcikpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgICAgICBjb25uLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIH0gY2F0Y2gg\nKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICB9CiAgICAgICAgcmV0\ndXJuIGNvbm47CiAgICB9Cn0K\n","encoding":"base64"}

