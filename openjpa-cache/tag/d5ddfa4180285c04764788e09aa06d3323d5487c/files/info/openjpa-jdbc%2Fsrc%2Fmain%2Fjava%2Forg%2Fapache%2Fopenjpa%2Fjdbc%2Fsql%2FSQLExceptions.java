{"sha":"134f02bdcf1eafbae6f8e7c52de292e699597001","node_id":"MDQ6QmxvYjIwNjM2NDoxMzRmMDJiZGNmMWVhZmJhZTZmOGU3YzUyZGUyOTJlNjk5NTk3MDAx","size":5409,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/134f02bdcf1eafbae6f8e7c52de292e699597001","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkxpbmtl\nZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyLk1lc3NhZ2U7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5Mb2NrRXhjZXB0aW9uOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT2JqZWN0RXhpc3RzRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT2JqZWN0Tm90\nRm91bmRFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5PcGVuSlBBRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnV0aWwuT3B0aW1pc3RpY0V4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLlJlZmVyZW50aWFsSW50ZWdyaXR5RXhjZXB0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RvcmVFeGNlcHRpb247\nCgovKioKICogSGVscGVyIGNsYXNzIGZvciBjb252ZXJ0aW5nIGEge0BsaW5r\nIFNRTEV4Y2VwdGlvbn0gaW50bwogKiB0aGUgYXBwcm9wcmlhdGUgT3BlbkpQ\nQSB0eXBlLgogKgogKiBAYXV0aG9yIE1hcmMgUHJ1ZCdob21tZWF1eAogKiBA\nbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgU1FMRXhjZXB0aW9ucyB7Cgog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU1FMRXhjZXB0aW9uW10gRU1QVFlf\nRVhDRVBTID0gbmV3IFNRTEV4Y2VwdGlvblswXTsKCiAgICAvKioKICAgICAq\nIENvbnZlcnQgdGhlIHNwZWNpZmllZCBleGNlcHRpb24gaW50byBhIHtAbGlu\nayBTdG9yZUV4Y2VwdGlvbn0uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nT3BlbkpQQUV4Y2VwdGlvbiBnZXRTdG9yZShTUUxFeGNlcHRpb24gc2UpIHsK\nICAgICAgICByZXR1cm4gZ2V0U3RvcmUoc2UsIG51bGwsIG51bGwpOwogICAg\nfQoKICAgIC8qKgogICAgICogQ29udmVydCB0aGUgc3BlY2lmaWVkIGV4Y2Vw\ndGlvbiBpbnRvIGEge0BsaW5rIE9wZW5KUEFFeGNlcHRpb259LgogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIE9wZW5KUEFFeGNlcHRpb24gZ2V0U3RvcmUo\nU1FMRXhjZXB0aW9uIHNlLCBPYmplY3QgZmFpbGVkKSB7CiAgICAgICAgcmV0\ndXJuIGdldFN0b3JlKHNlLCBmYWlsZWQsIG51bGwpOwogICAgfQoKICAgIC8q\nKgogICAgICogQ29udmVydCB0aGUgc3BlY2lmaWVkIGV4Y2VwdGlvbiBpbnRv\nIGEge0BsaW5rIFN0b3JlRXhjZXB0aW9ufS4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBPcGVuSlBBRXhjZXB0aW9uIGdldFN0b3JlKFNRTEV4Y2VwdGlv\nbiBzZSwKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCkgewogICAgICAgIHJl\ndHVybiBnZXRTdG9yZShzZS5nZXRNZXNzYWdlKCksIHNlLCBkaWN0KTsKICAg\nIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHNwZWNpZmllZCBleGNl\ncHRpb24gaW50byBhIHtAbGluayBTdG9yZUV4Y2VwdGlvbn0uCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgT3BlbkpQQUV4Y2VwdGlvbiBnZXRTdG9yZShT\nUUxFeGNlcHRpb24gc2UsIE9iamVjdCBmYWlsZWQsCiAgICAgICAgREJEaWN0\naW9uYXJ5IGRpY3QpIHsKICAgICAgICByZXR1cm4gZ2V0U3RvcmUoc2UuZ2V0\nTWVzc2FnZSgpLCBzZSwgZmFpbGVkLCBkaWN0KTsKICAgIH0KCiAgICAvKioK\nICAgICAqIENvbnZlcnQgdGhlIHNwZWNpZmllZCBleGNlcHRpb24gaW50byBh\nIHtAbGluayBTdG9yZUV4Y2VwdGlvbn0uCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgT3BlbkpQQUV4Y2VwdGlvbiBnZXRTdG9yZShNZXNzYWdlIG1zZywg\nU1FMRXhjZXB0aW9uIHNlLAogICAgICAgIERCRGljdGlvbmFyeSBkaWN0KSB7\nCiAgICAgICAgcmV0dXJuIGdldFN0b3JlKG1zZy5nZXRNZXNzYWdlKCksIHNl\nLCBudWxsLCBkaWN0KTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQg\ndGhlIHNwZWNpZmllZCBleGNlcHRpb24gaW50byBhIHtAbGluayBTdG9yZUV4\nY2VwdGlvbn0uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgT3BlbkpQQUV4\nY2VwdGlvbiBnZXRTdG9yZShTdHJpbmcgbXNnLCBTUUxFeGNlcHRpb24gc2Us\nCiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QpIHsKICAgICAgICByZXR1cm4g\nZ2V0U3RvcmUobXNnLCBzZSwgbnVsbCwgZGljdCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDb252ZXJ0IHRoZSBzcGVjaWZpZWQgZXhjZXB0aW9uIGludG8g\nYSB7QGxpbmsgU3RvcmVFeGNlcHRpb259LgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIE9wZW5KUEFFeGNlcHRpb24gZ2V0U3RvcmUoU3RyaW5nIG1zZywg\nU1FMRXhjZXB0aW9uIHNlLAogICAgICAgIE9iamVjdCBmYWlsZWQsIERCRGlj\ndGlvbmFyeSBkaWN0KSB7CiAgICAgICAgaWYgKG1zZyA9PSBudWxsKQogICAg\nICAgICAgICBtc2cgPSBzZS5nZXRDbGFzcygpLmdldE5hbWUoKTsKICAgICAg\nICBTUUxFeGNlcHRpb25bXSBzZXMgPSBnZXRTUUxFeGNlcHRpb25zKHNlKTsK\nICAgICAgICBpZiAoZGljdCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4g\nbmV3IFN0b3JlRXhjZXB0aW9uKG1zZykuc2V0RmFpbGVkT2JqZWN0KGZhaWxl\nZCkuCiAgICAgICAgICAgICAgICBzZXROZXN0ZWRUaHJvd2FibGVzKHNlcyk7\nCiAgICAgICAgcmV0dXJuIGRpY3QubmV3U3RvcmVFeGNlcHRpb24obXNnLCBz\nZXMsIGZhaWxlZCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0dXJu\ncyBhbiBhcnJheSBvZiB7QGxpbmsgU1FMRXhjZXB0aW9ufSBpbnN0YW5jZXMg\nZm9yIHRoZQogICAgICogc3BlY2lmaWVkIGV4Y2VwdGlvbi4KICAgICAqLwog\nICAgcHJpdmF0ZSBzdGF0aWMgU1FMRXhjZXB0aW9uW10gZ2V0U1FMRXhjZXB0\naW9ucyhTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICBpZiAoc2UgPT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0VYQ0VQUzsKCiAgICAgICAg\nTGlzdCBlcnJzID0gbmV3IExpbmtlZExpc3QoKTsKICAgICAgICB3aGlsZSAo\nc2UgIT0gbnVsbCAmJiAhZXJycy5jb250YWlucyhzZSkpIHsKICAgICAgICAg\nICAgZXJycy5hZGQoc2UpOwogICAgICAgICAgICBzZSA9IHNlLmdldE5leHRF\neGNlcHRpb24oKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChTUUxFeGNl\ncHRpb25bXSkgZXJycy50b0FycmF5KG5ldyBTUUxFeGNlcHRpb25bZXJycy5z\naXplKCldKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBOYXJyb3dzIHRo\nZSBnaXZlbiBTUUxFeGNlcHRpb24gdG8gYSBzcGVjaWZpYyB0eXBlIG9mIAog\nICAgICoge0BsaW5rIFN0b3JlRXhjZXB0aW9uI2dldFN1YnR5cGUoKSBTdG9y\nZUV4Y2VwdGlvbn0gYnkgYW5hbHl6aW5nIHRoZQogICAgICogU1FMU3RhdGUg\nY29kZSBzdXBwbGllZCBieSBTUUxFeGNlcHRpb24uIEVhY2ggZGF0YWJhc2Ut\nc3BlY2lmaWMgCiAgICAgKiB7QGxpbmsgREJEaWN0aW9uYXJ5IGRpY3Rpb25h\ncnl9IGNhbiBzdXBwbHkgYSBzZXQgb2YgZXJyb3IgY29kZXMgdGhhdCB3aWxs\nCiAgICAgKiBtYXAgdG8gYSBzcGVjaWZpYyBzcGVjaWZpYyB0eXBlIG9mIFN0\nb3JlRXhjZXB0aW9uIHZpYSAKICAgICAqIHtAbGluayBEQkRpY3Rpb25hcnkj\nZ2V0U1FMU3RhdGVzKGludCkgZ2V0U1FMU3RhdGVzKCl9IG1ldGhvZC4KICAg\nICAqIFRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHRvIHJldHVybiBnZW5lcmlj\nIHtAbGluayBTdG9yZUV4Y2VwdGlvbiAKICAgICAqIFN0b3JlRXhjZXB0aW9u\nfS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPcGVuSlBBRXhjZXB0aW9u\nIG5hcnJvdyhTdHJpbmcgbXNnLCBTUUxFeGNlcHRpb24gc2UsIAogICAgCQlE\nQkRpY3Rpb25hcnkgZGljdCkgewogICAgICAgIFN0cmluZyBlID0gc2UuZ2V0\nU1FMU3RhdGUoKTsKICAgICAgICBpZiAoZGljdC5nZXRTUUxTdGF0ZXMoU3Rv\ncmVFeGNlcHRpb24uTE9DSykuY29udGFpbnMoZSkpIAogICAgICAgICAgICBy\nZXR1cm4gbmV3IExvY2tFeGNlcHRpb24obXNnKTsKICAgICAgICBlbHNlIGlm\nIChkaWN0LmdldFNRTFN0YXRlcyhTdG9yZUV4Y2VwdGlvbi5PQkpFQ1RfRVhJ\nU1RTKS5jb250YWlucyhlKSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBPYmpl\nY3RFeGlzdHNFeGNlcHRpb24obXNnKTsKICAgICAgICBlbHNlIGlmIChkaWN0\nLmdldFNRTFN0YXRlcyhTdG9yZUV4Y2VwdGlvbi5PQkpFQ1RfTk9UX0ZPVU5E\nKS5jb250YWlucyhlKSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RO\nb3RGb3VuZEV4Y2VwdGlvbihtc2cpOwogICAgICAgIGVsc2UgaWYgKGRpY3Qu\nZ2V0U1FMU3RhdGVzKFN0b3JlRXhjZXB0aW9uLk9QVElNSVNUSUMpLmNvbnRh\naW5zKGUpKQogICAgICAgICAgICByZXR1cm4gbmV3IE9wdGltaXN0aWNFeGNl\ncHRpb24obXNnKTsKICAgICAgICBlbHNlIGlmIChkaWN0LmdldFNRTFN0YXRl\ncyhTdG9yZUV4Y2VwdGlvbi5SRUZFUkVOVElBTF9JTlRFR1JJVFkpCiAgICAg\nICAgCQkuY29udGFpbnMoZSkpIAogICAgICAgICAgICByZXR1cm4gbmV3IFJl\nZmVyZW50aWFsSW50ZWdyaXR5RXhjZXB0aW9uKG1zZyk7CiAgICAgICAgZWxz\nZQogICAgICAgICAgICByZXR1cm4gbmV3IFN0b3JlRXhjZXB0aW9uKG1zZyk7\nCiAgICB9Cn0K\n","encoding":"base64"}

