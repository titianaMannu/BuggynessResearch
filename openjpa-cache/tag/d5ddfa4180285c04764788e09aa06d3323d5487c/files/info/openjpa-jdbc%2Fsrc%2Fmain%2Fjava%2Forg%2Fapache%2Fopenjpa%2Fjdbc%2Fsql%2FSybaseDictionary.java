{"sha":"636a8f5c4cc3332ce98f4fedb7c2f81ab792d15a","node_id":"MDQ6QmxvYjIwNjM2NDo2MzZhOGY1YzRjYzMzMzJjZTk4ZjRmZWRiN2MyZjgxYWI3OTJkMTVh","size":12063,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/636a8f5c4cc3332ce98f4fedb7c2f81ab792d15a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGguQmlnSW50\nZWdlcjsKaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZh\nLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51\ndGlsLkFycmF5czsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5T\ndHJpbmdVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\nY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5QcmltYXJ5S2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc2NoZW1hLlVuaXF1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIuamRiYy5EZWxlZ2F0aW5nQ29ubmVjdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubWV0YS5KYXZhVHlwZXM7CgovKioKICogRGlj\ndGlvbmFyeSBmb3IgU3liYXNlLgogKiAgVGhlIG1haW4gcG9pbnQgb2YgaW50\nZXJlc3QgaXMgdGhhdCBieSBkZWZhdWx0LCBldmVyeSB0YWJsZQogKiB0aGF0\nIGlzIGNyZWF0ZWQgd2lsbCBoYXZlIGEgdW5pcXVlIGNvbHVtbiBuYW1lZCAi\nVU5RX0lOREVYIiBvZgogKiB0aGUgIklERU5USVRZIiB0eXBlLiBPcGVuSlBB\nIHdpbGwgbm90IGV2ZXIgdXRpbGl6ZSB0aGlzIGNvbHVtbi4gSG93ZXZlciwK\nICogZHVlIHRvIGludGVybmFsIFN5YmFzZSByZXN0cmljdGlvbnMsIHRoaXMg\nY29sdW1uIGlzIHJlcXVpcmVkCiAqIGluIG9yZGVyIHRvIHN1cHBvcnQgcGVz\nc2ltaXN0aWMgKGRhdGFzdG9yZSkgbG9ja2luZywgc2luY2UgU3liYXNlCiAq\nIHJlcXVpcmVzIHRoYXQgYW55IHRhYmxlcyBpbiBhICJTRUxFQ1QgLi4uIEZP\nUiBVUERBVEUiIGNsYXVzZSBoYXZlCiAqIGEgdW5pcXVlIGluZGV4IHRoYXQg\naXMgPHN0cm9uZz5ub3Q8L3N0cm9uZz4gaW5jbHVkZWQgaW4gdGhlIGxpc3QK\nICogb2YgY29sdW1ucywgYXMgZGVzY3JpYmVkIGluIHRoZQogKiA8YSBocmVm\nPSJodHRwOi8vd3d3LnN5YmFzZS5jb20vZGV0YWlsLzEsNjkwNCwxMDIzMDc1\nLDAwLmh0bWwiCiAqID5TeWJhc2UgZG9jdW1lbnRhdGlvbjwvYT4uIFRoaXMg\nYmVoYXZpb3IgY2FuIGJlIHN1cnByZXNzZWQgYnkgc2V0dGluZyB0aGUKICog\nZGljdGlvbmFyeSBwcm9wZXJ0eSA8Y29kZT5DcmVhdGVJZGVudGl0eUNvbHVt\nbj1mYWxzZTwvY29kZT4uIFRoZQogKiBuYW1lIG9mIHRoZSB1bmlxdWUgY29s\ndW1uIGNhbiBiZSBjaGFuZ2VkIGJ5IHNldHRpbmcgdGhlIHByb3BlcnR5CiAq\nIDxjb2RlPklkZW50aXR5Q29sdW1uTmFtZT1DT0xVTU5fTkFNRTwvY29kZT4u\nCiAqICBBIGdvb2QgU3liYXNlIHR5cGUgcmVmZXJlbmNlIGlzIGNhbiBiZSBm\nb3VuZCA8YQogKiBocmVmPSJodHRwOi8vd3d3LmlzcGlyZXIuY29tL2RvYy9z\ncWx3YXlzMzYvc3liYXNlL3N5Yl9kdHlwZXMuaHRtbCI+aGVyZTwvYT4uCiAq\nLwpwdWJsaWMgY2xhc3MgU3liYXNlRGljdGlvbmFyeQogICAgZXh0ZW5kcyBB\nYnN0cmFjdFNRTFNlcnZlckRpY3Rpb25hcnkgewoKICAgIHByaXZhdGUgc3Rh\ndGljIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAg\nICAgICAoU3liYXNlRGljdGlvbmFyeS5jbGFzcyk7CgogICAgLyoqCiAgICAg\nKiBJZiB0cnVlLCB0aGVuIHdoZW5ldmVyIHRoZSA8Y29kZT5zY2hlbWF0b29s\nPC9jb2RlPiBjcmVhdGVzIGEKICAgICAqIHRhYmxlLCBpdCB3aWxsIGFwcGVu\nZCBhbiBhZGRpdGlvbmFsIElERU5USVRZIGNvbHVtbiB0byB0aGUKICAgICAq\nIHRhYmxlJ3MgY3JlYXRpb24gU1FMLiBUaGlzIGlzIHNvIFN5YmFzZSB3aWxs\nIGJlIGFibGUgdG8KICAgICAqIHBlcmZvcm0gPGNvZGU+U0VMRUNULi4uRk9S\nIFVQREFURTwvY29kZT4gc3RhdGVtZW50cy4KICAgICAqLwogICAgcHVibGlj\nIGJvb2xlYW4gY3JlYXRlSWRlbnRpdHlDb2x1bW4gPSB0cnVlOwoKICAgIC8q\nKgogICAgICogSWYge0BsaW5rICNjcmVhdGVJZGVudGl0eUNvbHVtbn0gaXMg\ndHJ1ZSwgdGhlbiB0aGUKICAgICAqIDxjb2RlPmlkZW50aXR5Q29sdW1uTmFt\nZTwvY29kZT4gd2lsbCBiZSB0aGUgbmFtZSBvZiB0aGUKICAgICAqIGFkZGl0\naW9uYWwgdW5pcXVlIGNvbHVtbiB0aGF0IHdpbGwgYmUgY3JlYXRlZC4KICAg\nICAqLwogICAgcHVibGljIFN0cmluZyBpZGVudGl0eUNvbHVtbk5hbWUgPSAi\nVU5RX0lOREVYIjsKCiAgICBwdWJsaWMgU3liYXNlRGljdGlvbmFyeSgpIHsK\nICAgICAgICBwbGF0Zm9ybSA9ICJTeWJhc2UiOwogICAgICAgIHNjaGVtYUNh\nc2UgPSBTQ0hFTUFfQ0FTRV9QUkVTRVJWRTsKICAgICAgICBmb3JVcGRhdGVD\nbGF1c2UgPSAiRk9SIFVQREFURSBBVCBJU09MQVRJT04gU0VSSUFMSVpBQkxF\nIjsKCiAgICAgICAgc3VwcG9ydHNMb2NraW5nV2l0aERpc3RpbmN0Q2xhdXNl\nID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNOdWxsVGFibGVGb3JHZXRDb2x1\nbW5zID0gZmFsc2U7CiAgICAgICAgcmVxdWlyZXNBbGlhc0ZvclN1YnNlbGVj\ndCA9IHRydWU7CiAgICAgICAgcmVxdWlyZXNBdXRvQ29tbWl0Rm9yTWV0YURh\ndGEgPSB0cnVlOwoKICAgICAgICBtYXhUYWJsZU5hbWVMZW5ndGggPSAzMDsK\nICAgICAgICBtYXhDb2x1bW5OYW1lTGVuZ3RoID0gMzA7CiAgICAgICAgbWF4\nSW5kZXhOYW1lTGVuZ3RoID0gMzA7CiAgICAgICAgbWF4Q29uc3RyYWludE5h\nbWVMZW5ndGggPSAzMDsKCiAgICAgICAgYmlnaW50VHlwZU5hbWUgPSAiTlVN\nRVJJQygzOCkiOwogICAgICAgIGJpdFR5cGVOYW1lID0gIlRJTllJTlQiOwoK\nICAgICAgICAvLyBTeWJhc2UgZG9lc24ndCB1bmRlcnN0YW5kICJYIENST1NT\nIEpPSU4gWSIsIGJ1dCBpdCBkb2VzIHVuZGVyc3RhbmQKICAgICAgICAvLyB0\naGUgZXF1aXZhbGVudCAiWCBKT0lOIFkgT04gMSA9IDEiCiAgICAgICAgY3Jv\nc3NKb2luQ2xhdXNlID0gIkpPSU4iOwogICAgICAgIHJlcXVpcmVzQ29uZGl0\naW9uRm9yQ3Jvc3NKb2luID0gdHJ1ZTsKCiAgICAgICAgLy8gdGhlc2UgdGFi\nbGVzIHNob3VsZCBub3QgYmUgcmVmbGVjdGVkIG9uCiAgICAgICAgc3lzdGVt\nVGFibGVTZXQuYWRkQWxsKEFycmF5cy5hc0xpc3QobmV3IFN0cmluZ1tdewog\nICAgICAgICAgICAiSUpEQkNfRlVOQ1RJT05fRVNDQVBFUyIsICJKREJDX0ZV\nTkNUSU9OX0VTQ0FQRVMiLAogICAgICAgICAgICAiU1BUX0lKREJDX0NPTlZF\nUlNJT04iLCAiU1BUX0lKREJDX01EQSIsICJTUFRfSUpEQkNfVEFCTEVfVFlQ\nRVMiLAogICAgICAgICAgICAiU1BUX0pEQkNfQ09OVkVSU0lPTiIsICJTUFRf\nSkRCQ19UQUJMRV9UWVBFUyIsICJTUFRfSlRFWFQiLAogICAgICAgICAgICAi\nU1BUX0xJTUlUX1RZUEVTIiwgIlNQVF9NREEiLCAiU1BUX01PTklUT1IiLCAi\nU1BUX1ZBTFVFUyIsCiAgICAgICAgICAgICJTWUJMSUNFTlNFU0xPRyIsCiAg\nICAgICAgfSkpOwoKICAgICAgICAvLyByZXNlcnZlZCB3b3JkcyBzcGVjaWZp\nZWQgYXQ6CiAgICAgICAgLy8gaHR0cDovL21hbnVhbHMuc3liYXNlLmNvbS9v\nbmxpbmVib29rcy9ncm91cC1hcy9hc2cxMjUwZS8KICAgICAgICAvLyByZWZt\nYW4vQEdlbmVyaWNfX0Jvb2tUZXh0Vmlldy8yNjYwMwogICAgICAgIHJlc2Vy\ndmVkV29yZFNldC5hZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117\nCiAgICAgICAgICAgICJBUklUSF9PVkVSRkxPVyIsICJCUkVBSyIsICJCUk9X\nU0UiLCAiQlVMSyIsICJDSEFSX0NPTlZFUlQiLAogICAgICAgICAgICAiQ0hF\nQ0tQT0lOVCIsICJDTFVTVEVSRUQiLCAiQ09NUFVURSIsICJDT05GSVJNIiwg\nIkNPTlRST0xST1ciLAogICAgICAgICAgICAiREFUQUJBU0UiLCAiREJDQyIs\nICJERVRFUk1JTklTVElDIiwgIkRJU0sgRElTVElOQ1QiLCAiRFVNTVkiLAog\nICAgICAgICAgICAiRFVNUCIsICJFTkRUUkFOIiwgIkVSUkxWTCIsICJFUlJP\nUkRBVEEiLCAiRVJST1JFWElUIiwgIkVYQ0xVU0lWRSIsCiAgICAgICAgICAg\nICJFWElUIiwgIkVYUF9ST1dfU0laRSIsICJGSUxMRkFDVE9SIiwgIkZVTkMi\nLCAiRlVOQ1RJT04iLAogICAgICAgICAgICAiSE9MRExPQ0siLCAiSURFTlRJ\nVFlfR0FQIiwgIklERU5USVRZX0lOU0VSVCIsICJJREVOVElUWV9TVEFSVCIs\nCiAgICAgICAgICAgICJJRiIsICJJTkRFWCIsICJJTk9VVCIsICJJTlNUQUxM\nIiwgIklOVEVSU0VDVCIsICJKQVIiLCAiS0lMTCIsCiAgICAgICAgICAgICJM\nSU5FTk8iLCAiTE9BRCIsICJMT0NLIiwgIk1BWF9ST1dTX1BFUl9QQUdFIiwg\nIk1JUlJPUiIsCiAgICAgICAgICAgICJNSVJST1JFWElUIiwgIk1PRElGWSIs\nICJORVciLCAiTk9IT0xETE9DSyIsICJOT05DTFVTVEVSRUQiLAogICAgICAg\nICAgICAiTlVNRVJJQ19UUlVOQ0FUSU9OIiwgIk9GRiIsICJPRkZTRVRTIiwg\nIk9OQ0UiLCAiT05MSU5FIiwgIk9VVCIsCiAgICAgICAgICAgICJPVkVSIiwg\nIlBBUlRJVElPTiIsICJQRVJNIiwgIlBFUk1BTkVOVCIsICJQTEFOIiwgIlBS\nSU5UIiwgIlBST0MiLAogICAgICAgICAgICAiUFJPQ0VTU0VYSVQiLCAiUFJP\nWFlfVEFCTEUiLCAiUVVJRVNDRSIsICJSQUlTRVJST1IiLCAiUkVBRCIsCiAg\nICAgICAgICAgICJSRUFEUEFTVCIsICJSRUFEVEVYVCIsICJSRUNPTkZJR1VS\nRSIsICJSRUZFUkVOQ0VTIFJFTU9WRSIsICJSRU9SRyIsCiAgICAgICAgICAg\nICJSRVBMQUNFIiwgIlJFUExJQ0FUSU9OIiwgIlJFU0VSVkVQQUdFR0FQIiwg\nIlJFVFVSTiIsICJSRVRVUk5TIiwKICAgICAgICAgICAgIlJPTEUiLCAiUk9X\nQ09VTlQiLCAiUlVMRSIsICJTQVZFIiwgIlNFVFVTRVIiLCAiU0hBUkVEIiwK\nICAgICAgICAgICAgIlNIVVRET1dOIiwgIlNPTUUiLCAiU1RBVElTVElDUyIs\nICJTVFJJTkdTSVpFIiwgIlNUUklQRSIsCiAgICAgICAgICAgICJTWUJfSURF\nTlRJVFkiLCAiU1lCX1JFU1RSRUUiLCAiU1lCX1RFUk1JTkFURSIsICJURU1Q\nIiwgIlRFWFRTSVpFIiwKICAgICAgICAgICAgIlRSQU4iLCAiVFJJR0dFUiIs\nICJUUlVOQ0FURSIsICJUU0VRVUFMIiwgIlVOUEFSVElUSU9OIiwgIlVTRSIs\nCiAgICAgICAgICAgICJVU0VSX09QVElPTiIsICJXQUlURk9SIiwgIldISUxF\nIiwgIldSSVRFVEVYVCIsCiAgICAgICAgfSkpOwogICAgfQoKICAgIHB1Ymxp\nYyBpbnQgZ2V0SkRCQ1R5cGUoaW50IG1ldGFUeXBlQ29kZSwgYm9vbGVhbiBs\nb2IpIHsKICAgICAgICBzd2l0Y2ggKG1ldGFUeXBlQ29kZSkgewogICAgICAg\nICAgICAvLyB0aGUgZGVmYXVsdCBtYXBwaW5nIGZvciBCWVRFIGlzIGEgVElO\nWUlOVCwgYnV0IFN5YmFzZSdzIFRJTllJTlQKICAgICAgICAgICAgLy8gdHlw\nZSBjYW4ndCBoYW5kbGUgdGhlIGNvbXBsZXRlIHJhbmdlIGZvciBhIEphdmEg\nYnl0ZQogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CWVRFOgogICAgICAg\nICAgICBjYXNlIEphdmFUeXBlcy5CWVRFX09CSjoKICAgICAgICAgICAgICAg\nIHJldHVybiBnZXRQcmVmZXJyZWRUeXBlKFR5cGVzLlNNQUxMSU5UKTsKICAg\nICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiBzdXBl\nci5nZXRKREJDVHlwZShtZXRhVHlwZUNvZGUsIGxvYik7CiAgICAgICAgfQog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEJpZ0ludGVnZXIoUHJlcGFyZWRT\ndGF0ZW1lbnQgc3RtbnQsIGludCBpZHgsIEJpZ0ludGVnZXIgdmFsLAogICAg\nICAgIENvbHVtbiBjb2wpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgLy8gc2V0QmlnRGVjaW1hbCBkb2Vzbid0IHdvcmsgaGVyZTog\naW4gb25lIGNhc2UsIGEgc3RvcmVkIHZhbHVlCiAgICAgICAgLy8gb2YgNzc5\nOTQzODUxNDkyNDM0OTQ0MCB0dXJucyBpbnRvIDc3OTk0Mzg1MTQ5MjQzNDk0\nMDAKICAgICAgICAvLyBzZXRPYmplY3QgZ2V0cyBhcm91bmQgdGhpcyBpbiB0\naGUgU3liYXNlIEpEQkMgZHJpdmVycwogICAgICAgIHNldE9iamVjdChzdG1u\ndCwgaWR4LCBuZXcgQmlnRGVjaW1hbCh2YWwpLCBUeXBlcy5CSUdJTlQsIGNv\nbCk7CiAgICB9CgogICAgcHVibGljIFN0cmluZ1tdIGdldEFkZEZvcmVpZ25L\nZXlTUUwoRm9yZWlnbktleSBmaykgewogICAgICAgIC8vIFN5YmFzZSBoYXMg\ncHJvYmxlbXMgd2l0aCBhZGRpbmcgZm9yaWVnbiBrZXlzIHZpYSBBTFRFUiBU\nQUJMRSBjb21tYW5kCiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbMF07CiAg\nICB9CgogICAgcHVibGljIFN0cmluZ1tdIGdldENyZWF0ZVRhYmxlU1FMKFRh\nYmxlIHRhYmxlKSB7CiAgICAgICAgaWYgKCFjcmVhdGVJZGVudGl0eUNvbHVt\nbikKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldENyZWF0ZVRhYmxlU1FM\nKHRhYmxlKTsKCiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJp\nbmdCdWZmZXIoKTsKICAgICAgICBidWYuYXBwZW5kKCJDUkVBVEUgVEFCTEUg\nIikuYXBwZW5kKGdldEZ1bGxOYW1lKHRhYmxlLCBmYWxzZSkpLgogICAgICAg\nICAgICBhcHBlbmQoIiAoIik7CgogICAgICAgIENvbHVtbltdIGNvbHMgPSB0\nYWJsZS5nZXRDb2x1bW5zKCk7CiAgICAgICAgYm9vbGVhbiBoYXNJZGVudGl0\neSA9IGZhbHNlOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMu\nbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGNvbHNbaV0uaXNBdXRv\nQXNzaWduZWQoKSkKICAgICAgICAgICAgICAgIGhhc0lkZW50aXR5ID0gdHJ1\nZTsKCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoaSA9PSAwID8gIiIgOiAiLCAi\nKTsKICAgICAgICAgICAgYnVmLmFwcGVuZChnZXREZWNsYXJlQ29sdW1uU1FM\nKGNvbHNbaV0sIGZhbHNlKSk7CiAgICAgICAgfQoKICAgICAgICAvLyBhZGQg\nYW4gaWRlbnRpdHkgY29sdW1uIGlmIHdlIGRvIG5vdCBhbHJlYWR5IGhhdmUg\nb25lCiAgICAgICAgaWYgKCFoYXNJZGVudGl0eSkKICAgICAgICAgICAgYnVm\nLmFwcGVuZCgiLCAiKS5hcHBlbmQoaWRlbnRpdHlDb2x1bW5OYW1lKS4KICAg\nICAgICAgICAgICAgIGFwcGVuZCgiIE5VTUVSSUMgSURFTlRJVFkgVU5JUVVF\nIik7CgogICAgICAgIFByaW1hcnlLZXkgcGsgPSB0YWJsZS5nZXRQcmltYXJ5\nS2V5KCk7CiAgICAgICAgaWYgKHBrICE9IG51bGwpCiAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoIiwgIikuYXBwZW5kKGdldFByaW1hcnlLZXlDb25zdHJhaW50\nU1FMKHBrKSk7CgogICAgICAgIFVuaXF1ZVtdIHVucXMgPSB0YWJsZS5nZXRV\nbmlxdWVzKCk7CiAgICAgICAgU3RyaW5nIHVucVN0cjsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IHVucXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgdW5xU3RyID0gZ2V0VW5pcXVlQ29uc3RyYWludFNRTCh1bnFzW2ldKTsK\nICAgICAgICAgICAgaWYgKHVucVN0ciAhPSBudWxsKQogICAgICAgICAgICAg\nICAgYnVmLmFwcGVuZCgiLCAiKS5hcHBlbmQodW5xU3RyKTsKICAgICAgICB9\nCgogICAgICAgIGJ1Zi5hcHBlbmQoIikiKTsKICAgICAgICByZXR1cm4gbmV3\nIFN0cmluZ1tdeyBidWYudG9TdHJpbmcoKSB9OwogICAgfQoKICAgIHByb3Rl\nY3RlZCBTdHJpbmcgZ2V0RGVjbGFyZUNvbHVtblNRTChDb2x1bW4gY29sLCBi\nb29sZWFuIGFsdGVyKSB7CiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5l\ndyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICBidWYuYXBwZW5kKGNvbCkuYXBw\nZW5kKCIgIik7CiAgICAgICAgYnVmLmFwcGVuZChnZXRUeXBlTmFtZShjb2wp\nKTsKCiAgICAgICAgLy8gY2FuJ3QgYWRkIGNvbnN0cmFpbnRzIHRvIGEgY29s\ndW1uIHdlJ3JlIGFkZGluZyBhZnRlciB0YWJsZQogICAgICAgIC8vIGNyZWF0\naW9uLCBjYXVzZSBzb21lIGRhdGEgbWlnaHQgYWxyZWFkeSBiZSBpbnNlcnRl\nZAogICAgICAgIGlmICghYWx0ZXIpIHsKICAgICAgICAgICAgaWYgKGNvbC5n\nZXREZWZhdWx0U3RyaW5nKCkgIT0gbnVsbCAmJiAhY29sLmlzQXV0b0Fzc2ln\nbmVkKCkpCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIgREVGQVVMVCAi\nKS5hcHBlbmQoY29sLmdldERlZmF1bHRTdHJpbmcoKSk7CiAgICAgICAgICAg\nIGlmIChjb2wuaXNBdXRvQXNzaWduZWQoKSkKICAgICAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoIiBJREVOVElUWSIpOwogICAgICAgIH0KCiAgICAgICAgaWYg\nKGNvbC5pc05vdE51bGwoKSkKICAgICAgICAgICAgYnVmLmFwcGVuZCgiIE5P\nVCBOVUxMIik7CiAgICAgICAgZWxzZSBpZiAoIWNvbC5pc1ByaW1hcnlLZXko\nKSkgewogICAgICAgICAgICAvLyBzeWJhc2UgZm9yY2VzIHlvdSB0byBleHBs\naWNpdGx5IHNwZWNpZnkgdGhhdAogICAgICAgICAgICAvLyB5b3Ugd2lsbCBh\nbGxvdyBOVUxMIHZhbHVlcwogICAgICAgICAgICBidWYuYXBwZW5kKCIgTlVM\nTCIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygp\nOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXREcm9wQ29sdW1uU1FM\nKENvbHVtbiBjb2x1bW4pIHsKICAgICAgICAvLyBTeWJhc2UgdXNlcyAiQUxU\nRVIgVEFCTEUgRFJPUCA8Q09MVU1OX05BTUU+IiByYXRoZXIgdGhhbiB0aGUK\nICAgICAgICAvLyB1c3VhbCAiQUxURVIgVEFCTEUgRFJPUCBDT0xVTU4gPENP\nTFVNTl9OQU1FPiIKICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1tdeyAiQUxU\nRVIgVEFCTEUgIgogICAgICAgICAgICArIGdldEZ1bGxOYW1lKGNvbHVtbi5n\nZXRUYWJsZSgpLCBmYWxzZSkgKyAiIERST1AgIiArIGNvbHVtbiB9OwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHJlZlNjaGVtYUNvbXBvbmVudHMoVGFibGUg\ndGFibGUpIHsKICAgICAgICAvLyBub3RlIHRoYXQgd2UgdXNlIGdldENvbHVt\nbnMoKSByYXRoZXIgdGhhbiBnZXR0aW5nIHRoZSBjb2x1bW4gYnkgbmFtZQog\nICAgICAgIC8vIGJlY2F1c2UgdW5kZXIgc29tZSBjaXJjdW1zdGFuY2VzIHRo\naXMgbWV0aG9kIGlzIGNhbGxlZCB1bmRlciB0aGUKICAgICAgICAvLyBkeW5h\nbWljIHNjaGVtYSBmYWN0b3J5LCB3aGVyZSBnZXR0aW5nIGEgY29sdW1uIGJ5\nIG5hbWUgY3JlYXRlcwogICAgICAgIC8vIHRoYXQgY29sdW1uCiAgICAgICAg\nQ29sdW1uW10gY29scyA9IHRhYmxlLmdldENvbHVtbnMoKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspCiAgICAgICAg\nICAgIGlmIChpZGVudGl0eUNvbHVtbk5hbWUuZXF1YWxzSWdub3JlQ2FzZShj\nb2xzW2ldLmdldE5hbWUoKSkpCiAgICAgICAgICAgICAgICBjb2xzW2ldLnJl\nZigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24o\nKSB7CiAgICAgICAgc3VwZXIuZW5kQ29uZmlndXJhdGlvbigpOwoKICAgICAg\nICAvLyB3YXJuIGFib3V0IGpkYmMgY29tcGxpYW50IGZsYWcKICAgICAgICBT\ndHJpbmcgdXJsID0gY29uZi5nZXRDb25uZWN0aW9uVVJMKCk7CiAgICAgICAg\naWYgKCFTdHJpbmdVdGlscy5pc0VtcHR5KHVybCkKICAgICAgICAgICAgJiYg\ndXJsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiamRiYzpzeWJhc2U6dGRzIikg\nIT0gLTEKICAgICAgICAgICAgJiYgdXJsLnRvTG93ZXJDYXNlKCkuaW5kZXhP\nZigiYmVfYXNfamRiY19jb21wbGlhbnRfYXNfcG9zc2libGU9IikKICAgICAg\nICAgICAgPT0gLTEpIHsKICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5nZXQo\nInN5YmFzZS1jb21wbGlhbmNlIiwgdXJsKSk7CiAgICAgICAgfQogICAgfQoK\nICAgIHB1YmxpYyBDb25uZWN0aW9uIGRlY29yYXRlKENvbm5lY3Rpb24gY29u\nbikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1\ncm4gbmV3IFN5YmFzZUNvbm5lY3Rpb24oc3VwZXIuZGVjb3JhdGUoY29ubikp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ29ubmVjdGlvbiB3cmFwcGVyIHRv\nIGNhY2hlIHRoZSB7QGxpbmsgQ29ubmVjdGlvbiNnZXRDYXRhbG9nfSByZXN1\nbHQsCiAgICAgKiB3aGljaCB0YWtlcyBhIHZlcnkgbG9uZyB0aW1lIHdpdGgg\ndGhlIFN5YmFzZSBDb25uZWN0aW9uIChhbmQKICAgICAqIHdoaWNoIHdlIGZy\nZXF1ZW50bHkgaW52b2tlKS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMg\nY2xhc3MgU3liYXNlQ29ubmVjdGlvbgogICAgICAgIGV4dGVuZHMgRGVsZWdh\ndGluZ0Nvbm5lY3Rpb24gewoKICAgICAgICBwcml2YXRlIFN0cmluZyBfY2F0\nYWxvZyA9IG51bGw7CgogICAgICAgIHB1YmxpYyBTeWJhc2VDb25uZWN0aW9u\nKENvbm5lY3Rpb24gY29ubikgewogICAgICAgICAgICBzdXBlcihjb25uKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2F0YWxvZygp\nCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAg\nICBpZiAoX2NhdGFsb2cgPT0gbnVsbCkKICAgICAgICAgICAgICAgIF9jYXRh\nbG9nID0gc3VwZXIuZ2V0Q2F0YWxvZygpOwogICAgICAgICAgICByZXR1cm4g\nX2NhdGFsb2c7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRB\ndXRvQ29tbWl0KGJvb2xlYW4gYXV0b2NvbW1pdCkKICAgICAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIC8vIHRoZSBzeWJhc2Ug\namRiYyBkcml2ZXIgZGVtYW5kcyB0aGF0IHRoZSBDb25uZWN0aW9uIGFsd2F5\ncwogICAgICAgICAgICAvLyBiZSByb2xsZWQgYmFjayBiZWZvcmUgYXV0b2Nv\nbW1pdCBzdGF0dXMgY2hhbmdlcy4gRmFpbHVyZSB0bwogICAgICAgICAgICAv\nLyBkbyBzbyB3aWxsIHlpZWxkICJTRVQgQ0hBSU5FRCBjb21tYW5kIG5vdCBh\nbGxvd2VkIHdpdGhpbgogICAgICAgICAgICAvLyBtdWx0aS1zdGF0ZW1lbnQg\ndHJhbnNhY3Rpb24uIiBleGNlcHRpb25zCiAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgICBzdXBlci5zZXRBdXRvQ29tbWl0KGF1dG9jb21taXQp\nOwogICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICAgICAgLy8gZmFpbGVkIGZvciBzb21lIHJlYXNvbjogdHJ5IHJv\nbGxpbmcgYmFjayBhbmQgdGhlbgogICAgICAgICAgICAgICAgLy8gc2V0dGlu\nZyBhdXRvY29tbWl0IGFnYWluLgogICAgICAgICAgICAgICAgaWYgKGF1dG9j\nb21taXQpCiAgICAgICAgICAgICAgICAgICAgc3VwZXIuY29tbWl0KCk7CiAg\nICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgc3VwZXIu\ncm9sbGJhY2soKTsKICAgICAgICAgICAgICAgIHN1cGVyLnNldEF1dG9Db21t\naXQoYXV0b2NvbW1pdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9\nCn0K\n","encoding":"base64"}

