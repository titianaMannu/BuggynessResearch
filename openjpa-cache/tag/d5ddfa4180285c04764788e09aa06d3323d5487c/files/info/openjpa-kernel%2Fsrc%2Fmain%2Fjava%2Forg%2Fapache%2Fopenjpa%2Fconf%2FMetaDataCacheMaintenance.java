{"sha":"6762bd9614112d55a14eecc0dfca8bd8126dd486","node_id":"MDQ6QmxvYjIwNjM2NDo2NzYyYmQ5NjE0MTEyZDU1YTE0ZWVjYzBkZmNhOGJkODEyNmRkNDg2","size":7254,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6762bd9614112d55a14eecc0dfca8bd8126dd486","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5jb25m\nOw0KDQppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247DQppbXBvcnQgamF2\nYS51dGlsLkl0ZXJhdG9yOw0KaW1wb3J0IGphdmEudXRpbC5NYXA7DQoNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJvb3RzdHJhcDsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlckZhY3Rvcnk7DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeTsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuT3B0aW9uczsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7DQppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLk1hcENvbmZpZ3VyYXRpb25Qcm92\naWRlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29u\nZmlndXJhdGlvblByb3ZpZGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLkNsYXNzTWV0YURhdGE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuTWV0YURhdGFSZXBvc2l0b3J5Ow0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5tZXRhLlF1ZXJ5TWV0YURhdGE7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLm1ldGEuU2VxdWVuY2VNZXRhRGF0YTsNCg0KLyoqDQog\nKiBQZXJmb3JtcyBtYWludGVuYW5jZSB0YXNrcyBvbiB0aGUgbWV0YWRhdGEg\nY2FjaGVzIGFjY2Vzc2libGUgdmlhIHRoZQ0KICoge0BsaW5rIENhY2hlTWFy\nc2hhbGxlcn0gYXJjaGl0ZWN0dXJlLg0KICoNCiAqIEBzaW5jZSAxLjEuMA0K\nICovDQpwdWJsaWMgY2xhc3MgTWV0YURhdGFDYWNoZU1haW50ZW5hbmNlIHsN\nCg0KICAgIHByaXZhdGUgZmluYWwgQnJva2VyRmFjdG9yeSBmYWN0b3J5Ow0K\nICAgIHByaXZhdGUgZmluYWwgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZjsN\nCiAgICBwcml2YXRlIGZpbmFsIGJvb2xlYW4gZGV2cGF0aDsNCiAgICBwcml2\nYXRlIExvZyBsb2c7DQoNCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihT\ndHJpbmdbXSBhcmdzKSB7DQogICAgICAgIE9wdGlvbnMgb3B0cyA9IG5ldyBP\ncHRpb25zKCk7DQogICAgICAgIGFyZ3MgPSBvcHRzLnNldEZyb21DbWRMaW5l\nKGFyZ3MpOw0KICAgICAgICBib29sZWFuIGRldnBhdGggPSBvcHRzLmdldEJv\nb2xlYW5Qcm9wZXJ0eSgic2NhbkRldlBhdGgiLCAiU2NhbkRldlBhdGgiLA0K\nICAgICAgICAgICAgdHJ1ZSk7DQoNCiAgICAgICAgQ29uZmlndXJhdGlvblBy\nb3ZpZGVyIGNwID0gbmV3IE1hcENvbmZpZ3VyYXRpb25Qcm92aWRlcihvcHRz\nKTsNCiAgICAgICAgQnJva2VyRmFjdG9yeSBmYWN0b3J5ID0gQm9vdHN0cmFw\nLm5ld0Jyb2tlckZhY3RvcnkoY3AsIG51bGwpOw0KICAgICAgICB0cnkgew0K\nICAgICAgICAgICAgTWV0YURhdGFDYWNoZU1haW50ZW5hbmNlIG1haW50ID0g\nbmV3IE1ldGFEYXRhQ2FjaGVNYWludGVuYW5jZSgNCiAgICAgICAgICAgICAg\nICBmYWN0b3J5LCBkZXZwYXRoKTsNCg0KICAgICAgICAgICAgaWYgKGFyZ3Mu\nbGVuZ3RoICE9IDEpIHsNCiAgICAgICAgICAgICAgICB1c2FnZSgpOw0KICAg\nICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAg\nICAgICAgaWYgKCJzdG9yZSIuZXF1YWxzKGFyZ3NbMF0pKQ0KICAgICAgICAg\nICAgICAgIG1haW50LnN0b3JlKCk7DQogICAgICAgICAgICBlbHNlIGlmICgi\nZHVtcCIuZXF1YWxzKGFyZ3NbMF0pKQ0KICAgICAgICAgICAgICAgIG1haW50\nLmR1bXAoKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB1\nc2FnZSgpOw0KICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgZmFj\ndG9yeS5jbG9zZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQog\nICAgICogQGRlcHJlY2F0ZWQgbG9nZ2luZyBpcyByb3V0ZWQgdG8gdGhlIGxv\nZ2dpbmcgc3lzdGVtIG5vdy4NCiAgICAgKi8NCiAgICBwdWJsaWMgTWV0YURh\ndGFDYWNoZU1haW50ZW5hbmNlKEJyb2tlckZhY3RvcnkgZmFjdG9yeSwgYm9v\nbGVhbiBkZXZwYXRoLA0KICAgICAgICBib29sZWFuIHZlcmJvc2UpIHsNCiAg\nICAgICAgdGhpcyhmYWN0b3J5LCBkZXZwYXRoKTsNCiAgICB9DQoNCiAgICAv\nKioNCiAgICAgKiBAcGFyYW0gZmFjdG9yeSBUaGUge0BsaW5rIEJyb2tlckZh\nY3Rvcnl9IGZvciB3aGljaCBjYWNoZWQgbWV0YWRhdGENCiAgICAgKiBzaG91\nbGQgYmUgYnVpbHQuDQogICAgICogQHBhcmFtIGRldnBhdGggV2hldGhlciBv\nciBub3QgdG8gc2NhbiB0aGUgZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnQgcGF0\naHMNCiAgICAgKiB0byBmaW5kIHBlcnNpc3RlbnQgdHlwZXMgdG8gc3RvcmUu\nDQogICAgICovDQogICAgcHVibGljIE1ldGFEYXRhQ2FjaGVNYWludGVuYW5j\nZShCcm9rZXJGYWN0b3J5IGZhY3RvcnksIGJvb2xlYW4gZGV2cGF0aCkgew0K\nICAgICAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5Ow0KICAgICAgICB0aGlz\nLmNvbmYgPSBmYWN0b3J5LmdldENvbmZpZ3VyYXRpb24oKTsNCiAgICAgICAg\ndGhpcy5kZXZwYXRoID0gZGV2cGF0aDsNCiAgICAgICAgdGhpcy5sb2cgPSBj\nb25mLmdldExvZyhPcGVuSlBBQ29uZmlndXJhdGlvbi5MT0dfVE9PTCk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0TG9nKExvZyBsb2cpIHsNCiAg\nICAgICAgdGhpcy5sb2cgPSBsb2c7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBz\ndGF0aWMgaW50IHVzYWdlKCkgew0KICAgICAgICBTeXN0ZW0uZXJyLnByaW50\nbG4oIlVzYWdlOiBqYXZhIE1ldGFEYXRhQ2FjaGVNYWludGVuYW5jZSAiICsN\nCiAgICAgICAgICAgICJbLXNjYW5EZXZQYXRoIHR8Zl0gWy08b3BlbmpwYS5Q\ncm9wZXJ0eU5hbWU+IHZhbHVlXSBzdG9yZSB8IGR1bXAiKTsNCiAgICAgICAg\ncmV0dXJuIC0xOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRoZSBtZXRh\nZGF0YSByZXBvc2l0b3J5IGZvciB0aGUgZmFjdG9yeSB0aGF0IHRoaXMgaW5z\ndGFuY2Ugd2FzDQogICAgICogY29uc3RydWN0ZWQgd2l0aCB3aWxsIGJlIHNl\ncmlhbGl6ZWQsIGFsb25nIHdpdGggYW55IHF1ZXJ5DQogICAgICogY29tcGls\nYXRpb25zIGV0Yy4gdGhhdCBoYXZlIGJlZW4gY3JlYXRlZCBmb3IgdGhlIGZh\nY3RvcnkuDQogICAgICovDQogICAgcHVibGljIHZvaWQgc3RvcmUoKSB7DQog\nICAgICAgIE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyA9IGNvbmYuZ2V0TWV0\nYURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsNCiAgICAgICAgcmVwb3Muc2V0\nU291cmNlTW9kZShNZXRhRGF0YVJlcG9zaXRvcnkuTU9ERV9BTEwpOw0KICAg\nICAgICBDb2xsZWN0aW9uIHR5cGVzID0gcmVwb3MubG9hZFBlcnNpc3RlbnRU\neXBlcyhkZXZwYXRoLCBudWxsKTsNCiAgICAgICAgZm9yIChJdGVyYXRvciBp\ndGVyID0gdHlwZXMuaXRlcmF0b3IoKTsgaXRlci5oYXNOZXh0KCk7ICkNCiAg\nICAgICAgICAgIHJlcG9zLmdldE1ldGFEYXRhKChDbGFzcykgaXRlci5uZXh0\nKCksIG51bGwsIHRydWUpOw0KDQogICAgICAgIGxvYWRRdWVyaWVzKCk7DQoN\nCiAgICAgICAgbG9nLmluZm8oIlRoZSBmb2xsb3dpbmcgZGF0YSB3aWxsIGJl\nIHN0b3JlZDogIik7DQogICAgICAgIGxvZyhyZXBvcywgY29uZi5nZXRRdWVy\neUNvbXBpbGF0aW9uQ2FjaGVJbnN0YW5jZSgpKTsNCg0KICAgICAgICBDYWNo\nZU1hcnNoYWxsZXJzVmFsdWUuZ2V0TWFyc2hhbGxlckJ5SWQoY29uZiwgZ2V0\nQ2xhc3MoKS5nZXROYW1lKCkpDQogICAgICAgICAgICAuc3RvcmUobmV3IE9i\namVjdFtdIHsNCiAgICAgICAgICAgICAgICByZXBvcywgY29uZi5nZXRRdWVy\neUNvbXBpbGF0aW9uQ2FjaGVJbnN0YW5jZSgpDQogICAgICAgICAgICB9KTsN\nCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgbG9hZFF1ZXJpZXMoKSB7DQog\nICAgICAgIEJyb2tlciBicm9rZXIgPSBmYWN0b3J5Lm5ld0Jyb2tlcigpOw0K\nICAgICAgICB0cnkgew0KICAgICAgICAgICAgUXVlcnlNZXRhRGF0YVtdIHFt\nZHMgPQ0KICAgICAgICAgICAgICAgIGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0\nb3J5SW5zdGFuY2UoKS5nZXRRdWVyeU1ldGFEYXRhcygpOw0KICAgICAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxbWRzLmxlbmd0aDsgaSsrKQ0KICAg\nICAgICAgICAgICAgIGxvYWRRdWVyeShicm9rZXIsIHFtZHNbaV0pOw0KICAg\nICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgYnJva2VyLmNsb3NlKCk7\nDQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgbG9hZFF1\nZXJ5KEJyb2tlciBicm9rZXIsIFF1ZXJ5TWV0YURhdGEgcW1kKSB7DQogICAg\nICAgIHRyeSB7DQogICAgICAgICAgICBRdWVyeSBxID0gYnJva2VyLm5ld1F1\nZXJ5KHFtZC5nZXRMYW5ndWFnZSgpLCBudWxsKTsNCiAgICAgICAgICAgIHFt\nZC5zZXRJbnRvKHEpOw0KICAgICAgICAgICAgcS5jb21waWxlKCk7DQogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICBpZiAo\nbG9nLmlzVHJhY2VFbmFibGVkKCkpIHsNCiAgICAgICAgICAgICAgICBsb2cu\nd2FybigiU2tpcHBpbmcgbmFtZWQgcXVlcnkgIiArIHFtZC5nZXROYW1lKCkg\nKyAiOiAiDQogICAgICAgICAgICAgICAgICAgICsgZS5nZXRNZXNzYWdlKCks\nIGUpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBs\nb2cud2FybigiU2tpcHBpbmcgbmFtZWQgcXVlcnkgIiArIHFtZC5nZXROYW1l\nKCkgKyAiOiAiDQogICAgICAgICAgICAgICAgICAgICsgZS5nZXRNZXNzYWdl\nKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgZHVtcCgpIHsNCiAgICAgICAgT2JqZWN0W10gb3MgPSAo\nT2JqZWN0W10pDQogICAgICAgICAgICBDYWNoZU1hcnNoYWxsZXJzVmFsdWUu\nZ2V0TWFyc2hhbGxlckJ5SWQoY29uZiwgZ2V0Q2xhc3MoKS5nZXROYW1lKCkp\nDQogICAgICAgICAgICAubG9hZCgpOw0KICAgICAgICBpZiAob3MgPT0gbnVs\nbCkgew0KICAgICAgICAgICAgbG9nLmluZm8oIk5vIGNhY2hlZCBkYXRhIHdh\ncyBmb3VuZCIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQog\nICAgICAgIE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyA9IChNZXRhRGF0YVJl\ncG9zaXRvcnkpIG9zWzBdOw0KICAgICAgICBNYXAgcWNjID0gKE1hcCkgb3Nb\nMV07DQoNCiAgICAgICAgbG9nLmluZm8oIlRoZSBmb2xsb3dpbmcgZGF0YSB3\nYXMgZm91bmQ6ICIpOw0KICAgICAgICBsb2cocmVwb3MsIHFjYyk7DQogICAg\nfQ0KDQogICAgcHJpdmF0ZSB2b2lkIGxvZyhNZXRhRGF0YVJlcG9zaXRvcnkg\ncmVwb3MsIE1hcCBxY2MpIHsNCiAgICAgICAgQ2xhc3NNZXRhRGF0YVtdIG1l\ndGFzID0gcmVwb3MuZ2V0TWV0YURhdGFzKCk7DQogICAgICAgIGxvZy5pbmZv\nKCIgIFR5cGVzOiAiICsgbWV0YXMubGVuZ3RoKTsNCiAgICAgICAgaWYgKGxv\nZy5pc1RyYWNlRW5hYmxlZCgpKQ0KICAgICAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBtZXRhcy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICBs\nb2cudHJhY2UoIiAgICAiICsgbWV0YXNbaV0uZ2V0RGVzY3JpYmVkVHlwZSgp\nLmdldE5hbWUoKSk7DQoNCiAgICAgICAgUXVlcnlNZXRhRGF0YVtdIHFtZHMg\nPSByZXBvcy5nZXRRdWVyeU1ldGFEYXRhcygpOw0KICAgICAgICBsb2cuaW5m\nbygiICBRdWVyaWVzOiAiICsgcW1kcy5sZW5ndGgpOw0KICAgICAgICBpZiAo\nbG9nLmlzVHJhY2VFbmFibGVkKCkpDQogICAgICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IHFtZHMubGVuZ3RoOyBpKyspDQogICAgICAgICAgICAgICAg\nbG9nLnRyYWNlKCIgICAgIiArIHFtZHNbaV0uZ2V0TmFtZSgpICsgIjogIg0K\nICAgICAgICAgICAgICAgICAgICArIHFtZHNbaV0uZ2V0UXVlcnlTdHJpbmco\nKSk7DQoNCiAgICAgICAgU2VxdWVuY2VNZXRhRGF0YVtdIHNtZHMgPSByZXBv\ncy5nZXRTZXF1ZW5jZU1ldGFEYXRhcygpOw0KICAgICAgICBsb2cuaW5mbygi\nICBTZXF1ZW5jZXM6ICIgKyBzbWRzLmxlbmd0aCk7DQogICAgICAgIGlmIChs\nb2cuaXNUcmFjZUVuYWJsZWQoKSkNCiAgICAgICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgc21kcy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICBs\nb2cudHJhY2UoIiAgICAiICsgc21kc1tpXS5nZXROYW1lKCkpOw0KDQogICAg\nICAgIGxvZy5pbmZvKCIgIENvbXBpbGVkIHF1ZXJpZXM6ICINCiAgICAgICAg\nICAgICsgKHFjYyA9PSBudWxsID8gIjAiIDogIiIgKyBxY2Muc2l6ZSgpKSk7\nDQogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSAmJiBxY2MgIT0g\nbnVsbCkNCiAgICAgICAgICAgIGZvciAoSXRlcmF0b3IgaXRlciA9IHFjYy5r\nZXlTZXQoKS5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTsgKQ0KICAgICAg\nICAgICAgICAgIGxvZy50cmFjZSgiICAgICIgKyBpdGVyLm5leHQoKSk7DQog\nICAgfQ0KfQ0K\n","encoding":"base64"}

