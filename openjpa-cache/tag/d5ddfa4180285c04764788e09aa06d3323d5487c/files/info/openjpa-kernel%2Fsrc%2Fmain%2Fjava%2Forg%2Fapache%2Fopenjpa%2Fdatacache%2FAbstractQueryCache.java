{"sha":"6adbd8bc58e4e1ef1e2ea28e14188d64e73280e7","node_id":"MDQ6QmxvYjIwNjM2NDo2YWRiZDhiYzU4ZTRlMWVmMWUyZWEyOGUxNDE4OGQ2NGU3MzI4MGU3","size":10438,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6adbd8bc58e4e1ef1e2ea28e14188d64e73280e7","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\nZGF0YWNhY2hlOw0KDQppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsNCmlt\ncG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsNCmltcG9ydCBqYXZhLnV0aWwu\nSGFzaFNldDsNCmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7DQppbXBvcnQg\namF2YS51dGlsLkxpc3Q7DQppbXBvcnQgamF2YS51dGlsLlNldDsNCg0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0\naW9uOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVudC5SZW1vdGVD\nb21taXRFdmVudDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQu\nUmVtb3RlQ29tbWl0TGlzdGVuZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5jb25mLkNvbmZpZ3VyYWJsZTsNCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbjsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsNCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudC5BYnN0cmFjdENvbmN1\ncnJlbnRFdmVudE1hbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudFJlZmVyZW5jZUhhc2hT\nZXQ7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRh\nRGF0YTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0\nYVJlcG9zaXRvcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwu\nSWQ7DQoNCi8qKg0KICogQWJzdHJhY3Qge0BsaW5rIFF1ZXJ5Q2FjaGV9IGlt\ncGxlbWVudGF0aW9uIHRoYXQgcHJvdmlkZXMgdmFyaW91cw0KICogc3RhdGlz\ndGljcywgbG9nZ2luZywgYW5kIHRpbWVvdXQgZnVuY3Rpb25hbGl0eSBjb21t\nb24gYWNyb3NzIGNhY2hlDQogKiBpbXBsZW1lbnRhdGlvbnMuDQogKg0KICog\nQGF1dGhvciBQYXRyaWNrIExpbnNrZXkNCiAqIEBhdXRob3IgQWJlIFdoaXRl\nDQogKi8NCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdFF1ZXJ5Q2Fj\naGUNCiAgICBleHRlbmRzIEFic3RyYWN0Q29uY3VycmVudEV2ZW50TWFuYWdl\nciANCiAgICBpbXBsZW1lbnRzIFF1ZXJ5Q2FjaGUsIENvbmZpZ3VyYWJsZSB7\nDQoNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgc19sb2Mg\nPQ0KICAgICAgICBMb2NhbGl6ZXIuZm9yUGFja2FnZShBYnN0cmFjdFF1ZXJ5\nQ2FjaGUuY2xhc3MpOw0KDQogICAgLyoqDQogICAgICogVGhlIGNvbmZpZ3Vy\nYXRpb24gc2V0IGJ5IHRoZSBzeXN0ZW0uDQogICAgICovDQogICAgcHJvdGVj\ndGVkIE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmY7DQoNCiAgICAvKioNCiAg\nICAgKiBUaGUgbG9nIHRvIHVzZS4NCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQg\nTG9nIGxvZzsNCg0KICAgIHByaXZhdGUgYm9vbGVhbiBfY2xvc2VkID0gZmFs\nc2U7DQoNCiAgICBwdWJsaWMgdm9pZCBpbml0aWFsaXplKERhdGFDYWNoZU1h\nbmFnZXIgbWFuYWdlcikgew0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIG9u\nVHlwZXNDaGFuZ2VkKFR5cGVzQ2hhbmdlZEV2ZW50IGV2KSB7DQogICAgICAg\nIHdyaXRlTG9jaygpOw0KICAgICAgICBDb2xsZWN0aW9uIGtleXMgPSBudWxs\nOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgaWYgKGhhc0xpc3RlbmVy\ncygpKQ0KICAgICAgICAgICAgICAgIGZpcmVFdmVudChldik7DQogICAgICAg\nICAgICBrZXlzID0ga2V5U2V0KCk7DQogICAgICAgIH0gZmluYWxseSB7DQog\nICAgICAgICAgICB3cml0ZVVubG9jaygpOw0KICAgICAgICB9DQoNCiAgICAg\nICAgUXVlcnlLZXkgcWs7DQogICAgICAgIExpc3QgcmVtb3ZlcyA9IG51bGw7\nDQogICAgICAgIGZvciAoSXRlcmF0b3IgaXRlciA9IGtleXMuaXRlcmF0b3Io\nKTsgaXRlci5oYXNOZXh0KCk7KSB7DQogICAgICAgICAgICBxayA9IChRdWVy\neUtleSkgaXRlci5uZXh0KCk7DQogICAgICAgICAgICBpZiAocWsuY2hhbmdl\nSW52YWxpZGF0ZXNRdWVyeShldi5nZXRUeXBlcygpKSkgew0KICAgICAgICAg\nICAgICAgIGlmIChyZW1vdmVzID09IG51bGwpDQogICAgICAgICAgICAgICAg\nICAgIHJlbW92ZXMgPSBuZXcgQXJyYXlMaXN0KCk7DQogICAgICAgICAgICAg\nICAgcmVtb3Zlcy5hZGQocWspOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9\nDQogICAgICAgIGlmIChyZW1vdmVzICE9IG51bGwpDQogICAgICAgICAgICBy\nZW1vdmVBbGxJbnRlcm5hbChyZW1vdmVzKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgUXVlcnlSZXN1bHQgZ2V0KFF1ZXJ5S2V5IGtleSkgew0KICAgICAgICBR\ndWVyeVJlc3VsdCBvID0gZ2V0SW50ZXJuYWwoa2V5KTsNCiAgICAgICAgaWYg\nKG8gIT0gbnVsbCAmJiBvLmlzVGltZWRPdXQoKSkgew0KICAgICAgICAgICAg\nbyA9IG51bGw7DQogICAgICAgICAgICByZW1vdmVJbnRlcm5hbChrZXkpOw0K\nICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQ0KICAgICAg\nICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5nZXQoImNhY2hlLXRpbWVvdXQi\nLCBrZXkpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChsb2cuaXNUcmFj\nZUVuYWJsZWQoKSkgew0KICAgICAgICAgICAgaWYgKG8gPT0gbnVsbCkNCiAg\nICAgICAgICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJjYWNoZS1taXNz\nIiwga2V5KSk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAg\nbG9nLnRyYWNlKHNfbG9jLmdldCgiY2FjaGUtaGl0Iiwga2V5KSk7DQogICAg\nICAgIH0NCiAgICAgICAgcmV0dXJuIG87DQogICAgfQ0KDQogICAgcHVibGlj\nIFF1ZXJ5UmVzdWx0IHB1dChRdWVyeUtleSBxaywgUXVlcnlSZXN1bHQgb2lk\ncykgew0KICAgICAgICBRdWVyeVJlc3VsdCBvID0gcHV0SW50ZXJuYWwocWss\nIG9pZHMpOw0KICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpDQog\nICAgICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJjYWNoZS1wdXQiLCBx\naykpOw0KICAgICAgICByZXR1cm4gKG8gPT0gbnVsbCB8fCBvLmlzVGltZWRP\ndXQoKSkgPyBudWxsIDogbzsNCiAgICB9DQoNCiAgICBwdWJsaWMgUXVlcnlS\nZXN1bHQgcmVtb3ZlKFF1ZXJ5S2V5IGtleSkgew0KICAgICAgICBRdWVyeVJl\nc3VsdCBvID0gcmVtb3ZlSW50ZXJuYWwoa2V5KTsNCiAgICAgICAgaWYgKG8g\nIT0gbnVsbCAmJiBvLmlzVGltZWRPdXQoKSkNCiAgICAgICAgICAgIG8gPSBu\ndWxsOw0KICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsNCiAg\nICAgICAgICAgIGlmIChvID09IG51bGwpDQogICAgICAgICAgICAgICAgbG9n\nLnRyYWNlKHNfbG9jLmdldCgiY2FjaGUtcmVtb3ZlLW1pc3MiLCBrZXkpKTsN\nCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBsb2cudHJhY2Uo\nc19sb2MuZ2V0KCJjYWNoZS1yZW1vdmUtaGl0Iiwga2V5KSk7DQogICAgICAg\nIH0NCiAgICAgICAgcmV0dXJuIG87DQogICAgfQ0KDQogICAgcHVibGljIGJv\nb2xlYW4gcGluKFF1ZXJ5S2V5IGtleSkgew0KICAgICAgICBib29sZWFuIGJv\nb2wgPSBwaW5JbnRlcm5hbChrZXkpOw0KICAgICAgICBpZiAobG9nLmlzVHJh\nY2VFbmFibGVkKCkpIHsNCiAgICAgICAgICAgIGlmIChib29sKQ0KICAgICAg\nICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5nZXQoImNhY2hlLXBpbi1oaXQi\nLCBrZXkpKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBs\nb2cudHJhY2Uoc19sb2MuZ2V0KCJjYWNoZS1waW4tbWlzcyIsIGtleSkpOw0K\nICAgICAgICB9DQogICAgICAgIHJldHVybiBib29sOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyBib29sZWFuIHVucGluKFF1ZXJ5S2V5IGtleSkgew0KICAgICAg\nICBib29sZWFuIGJvb2wgPSB1bnBpbkludGVybmFsKGtleSk7DQogICAgICAg\nIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgew0KICAgICAgICAgICAgaWYg\nKGJvb2wpDQogICAgICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9jLmdldCgi\nY2FjaGUtdW5waW4taGl0Iiwga2V5KSk7DQogICAgICAgICAgICBlbHNlDQog\nICAgICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9jLmdldCgiY2FjaGUtdW5w\naW4tbWlzcyIsIGtleSkpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBi\nb29sOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkgew0KICAg\nICAgICBjbGVhckludGVybmFsKCk7DQogICAgICAgIGlmIChsb2cuaXNUcmFj\nZUVuYWJsZWQoKSkNCiAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5nZXQo\nImNhY2hlLWNsZWFyIiwgIjxxdWVyeS1jYWNoZT4iKSk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgY2xvc2UoKSB7DQogICAgICAgIGNsb3NlKHRydWUp\nOw0KICAgIH0NCg0KICAgIHByb3RlY3RlZCB2b2lkIGNsb3NlKGJvb2xlYW4g\nY2xlYXIpIHsNCiAgICAgICAgaWYgKCFfY2xvc2VkKSB7DQogICAgICAgICAg\nICBpZiAoY2xlYXIpDQogICAgICAgICAgICAgICAgY2xlYXJJbnRlcm5hbCgp\nOw0KICAgICAgICAgICAgX2Nsb3NlZCA9IHRydWU7DQogICAgICAgIH0NCiAg\nICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBpc0Nsb3NlZCgpIHsNCiAgICAg\nICAgcmV0dXJuIF9jbG9zZWQ7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\nYWRkVHlwZXNDaGFuZ2VkTGlzdGVuZXIoVHlwZXNDaGFuZ2VkTGlzdGVuZXIg\nbGlzdGVuKSB7DQogICAgICAgIGFkZExpc3RlbmVyKGxpc3Rlbik7DQogICAg\nfQ0KDQogICAgcHVibGljIGJvb2xlYW4gcmVtb3ZlVHlwZXNDaGFuZ2VkTGlz\ndGVuZXIoVHlwZXNDaGFuZ2VkTGlzdGVuZXIgbGlzdGVuKSB7DQogICAgICAg\nIHJldHVybiByZW1vdmVMaXN0ZW5lcihsaXN0ZW4pOw0KICAgIH0NCg0KICAg\nIC8qKg0KICAgICAqIFRoaXMgbWV0aG9kIGlzIHBhcnQgb2YgdGhlIHtAbGlu\nayBSZW1vdGVDb21taXRMaXN0ZW5lcn0gaW50ZXJmYWNlLiBJZg0KICAgICAq\nIHlvdXIgY2FjaGUgc3ViY2xhc3MgcmVsaWVzIG9uIE9wZW5KUEEgZm9yIGNs\ndXN0ZXJpbmcgc3VwcG9ydCwgbWFrZSBpdA0KICAgICAqIGltcGxlbWVudCA8\nY29kZT5SZW1vdGVDb21taXRMaXN0ZW5lcjwvY29kZT4uIFRoaXMgbWV0aG9k\nIHdpbGwgdGFrZQ0KICAgICAqIGNhcmUgb2YgaW52YWxpZGF0aW5nIGVudHJp\nZXMgZnJvbSByZW1vdGUgY29tbWl0cywgYnkgZGVsZWdhdGluZyB0bw0KICAg\nICAqIHtAbGluayAjb25UeXBlc0NoYW5nZWR9Lg0KICAgICAqLw0KICAgIHB1\nYmxpYyB2b2lkIGFmdGVyQ29tbWl0KFJlbW90ZUNvbW1pdEV2ZW50IGV2ZW50\nKSB7DQogICAgICAgIGlmIChfY2xvc2VkKQ0KICAgICAgICAgICAgcmV0dXJu\nOw0KDQogICAgICAgIC8vIGRyb3AgYWxsIGNvbW1pdHRlZCBjbGFzc2VzDQog\nICAgICAgIFNldCBjbGFzc2VzID0gQ2FjaGVzLmFkZFR5cGVzQnlOYW1lKGNv\nbmYsDQogICAgICAgICAgICBldmVudC5nZXRQZXJzaXN0ZWRUeXBlTmFtZXMo\nKSwgbnVsbCk7DQogICAgICAgIGlmIChldmVudC5nZXRQYXlsb2FkVHlwZSgp\nID09IFJlbW90ZUNvbW1pdEV2ZW50LlBBWUxPQURfRVhURU5UUykgew0KICAg\nICAgICAgICAgY2xhc3NlcyA9IENhY2hlcy5hZGRUeXBlc0J5TmFtZShjb25m\nLCBldmVudC5nZXRVcGRhdGVkVHlwZU5hbWVzKCksDQogICAgICAgICAgICAg\nICAgY2xhc3Nlcyk7DQogICAgICAgICAgICBjbGFzc2VzID0gQ2FjaGVzLmFk\nZFR5cGVzQnlOYW1lKGNvbmYsIGV2ZW50LmdldERlbGV0ZWRUeXBlTmFtZXMo\nKSwNCiAgICAgICAgICAgICAgICBjbGFzc2VzKTsNCiAgICAgICAgfSBlbHNl\nIHsNCiAgICAgICAgICAgIGNsYXNzZXMgPSBhZGRUeXBlcyhldmVudC5nZXRV\ncGRhdGVkT2JqZWN0SWRzKCksIGNsYXNzZXMpOw0KICAgICAgICAgICAgY2xh\nc3NlcyA9IGFkZFR5cGVzKGV2ZW50LmdldERlbGV0ZWRPYmplY3RJZHMoKSwg\nY2xhc3Nlcyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGNsYXNzZXMgIT0g\nbnVsbCkNCiAgICAgICAgICAgIG9uVHlwZXNDaGFuZ2VkKG5ldyBUeXBlc0No\nYW5nZWRFdmVudCh0aGlzLCBjbGFzc2VzKSk7DQogICAgfQ0KDQogICAgLyoq\nDQogICAgICogQnVpbGQgdXAgYSBzZXQgb2YgY2xhc3NlcyBmb3IgdGhlIGdp\ndmVuIG9pZHMuDQogICAgICovDQogICAgcHJpdmF0ZSBTZXQgYWRkVHlwZXMo\nQ29sbGVjdGlvbiBvaWRzLCBTZXQgY2xhc3Nlcykgew0KICAgICAgICBpZiAo\nb2lkcy5pc0VtcHR5KCkpDQogICAgICAgICAgICByZXR1cm4gY2xhc3NlczsN\nCiAgICAgICAgaWYgKGNsYXNzZXMgPT0gbnVsbCkNCiAgICAgICAgICAgIGNs\nYXNzZXMgPSBuZXcgSGFzaFNldCgpOw0KDQogICAgICAgIE1ldGFEYXRhUmVw\nb3NpdG9yeSByZXBvcyA9IGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5z\ndGFuY2UoKTsNCiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhOw0KICAgICAg\nICBPYmplY3Qgb2lkOw0KICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IG9p\nZHMuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsNCiAgICAgICAgICAg\nIG9pZCA9IGl0ci5uZXh0KCk7DQogICAgICAgICAgICBpZiAob2lkIGluc3Rh\nbmNlb2YgSWQpDQogICAgICAgICAgICAgICAgY2xhc3Nlcy5hZGQoKChJZCkg\nb2lkKS5nZXRUeXBlKCkpOw0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAg\nICAgICAgICAgLy8gb2sgaWYgbm8gbWV0YWRhdGEgZm9yIG9pZDsgdGhhdCBq\ndXN0IG1lYW5zIHRoZSBwYyB0eXBlDQogICAgICAgICAgICAgICAgLy8gcHJv\nYmFibHkgaGFzbid0IGJlZW4gbG9hZGVkIGludG8gdGhpcyBKVk0geWV0LCBh\nbmQgdGhlcmVmb3JlDQogICAgICAgICAgICAgICAgLy8gdGhlcmUncyBubyBj\naGFuY2UgdGhhdCBpdCdzIGluIHRoZSBjYWNoZSBhbnl3YXkNCiAgICAgICAg\nICAgICAgICBtZXRhID0gcmVwb3MuZ2V0TWV0YURhdGEob2lkLCBudWxsLCBm\nYWxzZSk7DQogICAgICAgICAgICAgICAgaWYgKG1ldGEgIT0gbnVsbCkNCiAg\nICAgICAgICAgICAgICAgICAgY2xhc3Nlcy5hZGQobWV0YS5nZXREZXNjcmli\nZWRUeXBlKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAg\nIHJldHVybiBjbGFzc2VzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJl\ndHVybiBhIHRocmVhZHNhZmUgdmlldyBvZiB0aGUga2V5cyBpbiB0aGlzIGNh\nY2hlLiBUaGlzIGNvbGxlY3Rpb24NCiAgICAgKiBtdXN0IGJlIGl0ZXJhYmxl\nIHdpdGhvdXQgcmlzayBvZiBjb25jdXJyZW50IG1vZGlmaWNhdGlvbiBleGNl\ncHRpb25zLg0KICAgICAqIEl0IGRvZXMgbm90IGhhdmUgdG8gaW1wbGVtZW50\nIGNvbnRhaW5zKCkgZWZmaWNpZW50bHkgb3IgdXNlIHNldA0KICAgICAqIHNl\nbWFudGljcy4NCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgQ29s\nbGVjdGlvbiBrZXlTZXQoKTsNCg0KICAgIC8qKg0KICAgICAqIFJldHVybiB0\naGUgbGlzdCBmb3IgdGhlIGdpdmVuIGtleS4NCiAgICAgKi8NCiAgICBwcm90\nZWN0ZWQgYWJzdHJhY3QgUXVlcnlSZXN1bHQgZ2V0SW50ZXJuYWwoUXVlcnlL\nZXkgcWspOw0KDQogICAgLyoqDQogICAgICogQWRkIHRoZSBnaXZlbiByZXN1\nbHQgdG8gdGhlIGNhY2hlLCByZXR1cm5pbmcgdGhlIG9sZCByZXN1bHQgdW5k\nZXIgdGhlDQogICAgICogZ2l2ZW4ga2V5Lg0KICAgICAqLw0KICAgIHByb3Rl\nY3RlZCBhYnN0cmFjdCBRdWVyeVJlc3VsdCBwdXRJbnRlcm5hbChRdWVyeUtl\neSBxaywgUXVlcnlSZXN1bHQgb2lkcyk7DQoNCiAgICAvKioNCiAgICAgKiBS\nZW1vdmUgdGhlIHJlc3VsdCB1bmRlciB0aGUgZ2l2ZW4ga2V5IGZyb20gdGhl\nIGNhY2hlLg0KICAgICAqLw0KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBRdWVy\neVJlc3VsdCByZW1vdmVJbnRlcm5hbChRdWVyeUtleSBxayk7DQoNCiAgICAv\nKioNCiAgICAgKiBSZW1vdmUgYWxsIHJlc3VsdHMgdW5kZXIgdGhlIGdpdmVu\nIGtleXMgZnJvbSB0aGUgY2FjaGUuDQogICAgICovDQogICAgcHJvdGVjdGVk\nIHZvaWQgcmVtb3ZlQWxsSW50ZXJuYWwoQ29sbGVjdGlvbiBxa3MpIHsNCiAg\nICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0gcWtzLml0ZXJhdG9yKCk7IGl0\nZXIuaGFzTmV4dCgpOykNCiAgICAgICAgICAgIHJlbW92ZUludGVybmFsKChR\ndWVyeUtleSkgaXRlci5uZXh0KCkpOw0KICAgIH0NCg0KICAgIC8qKg0KICAg\nICAqIENsZWFyIHRoZSBjYWNoZS4NCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQg\nYWJzdHJhY3Qgdm9pZCBjbGVhckludGVybmFsKCk7DQoNCiAgICAvKioNCiAg\nICAgKiBQaW4gYW4gb2JqZWN0IHRvIHRoZSBjYWNoZS4NCiAgICAgKi8NCiAg\nICBwcm90ZWN0ZWQgYWJzdHJhY3QgYm9vbGVhbiBwaW5JbnRlcm5hbChRdWVy\neUtleSBxayk7DQoNCiAgICAvKioNCiAgICAgKiBVbnBpbiBhbiBvYmplY3Qg\nZnJvbSB0aGUgY2FjaGUuDQogICAgICovDQogICAgcHJvdGVjdGVkIGFic3Ry\nYWN0IGJvb2xlYW4gdW5waW5JbnRlcm5hbChRdWVyeUtleSBxayk7DQoNCiAg\nICAvLyAtLS0tLS0tLS0tIENvbmZpZ3VyYWJsZSBpbXBsZW1lbnRhdGlvbiAt\nLS0tLS0tLS0tDQoNCiAgICBwdWJsaWMgdm9pZCBzZXRDb25maWd1cmF0aW9u\nKENvbmZpZ3VyYXRpb24gY29uZikgew0KICAgICAgICB0aGlzLmNvbmYgPSAo\nT3BlbkpQQUNvbmZpZ3VyYXRpb24pIGNvbmY7DQogICAgICAgIHRoaXMubG9n\nID0gY29uZi5nZXRMb2coT3BlbkpQQUNvbmZpZ3VyYXRpb24uTE9HX0RBVEFD\nQUNIRSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc3RhcnRDb25maWd1\ncmF0aW9uKCkgew0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGVuZENvbmZp\nZ3VyYXRpb24oKSB7DQogICAgfQ0KDQogICAgLy8gLS0tLS0tLS0tLSBBYnN0\ncmFjdEV2ZW50TWFuYWdlciBpbXBsZW1lbnRhdGlvbiAtLS0tLS0tLS0tDQoN\nCiAgICBwcm90ZWN0ZWQgdm9pZCBmaXJlRXZlbnQoT2JqZWN0IGV2ZW50LCBP\nYmplY3QgbGlzdGVuZXIpIHsNCiAgICAgICAgVHlwZXNDaGFuZ2VkTGlzdGVu\nZXIgbGlzdGVuID0gKFR5cGVzQ2hhbmdlZExpc3RlbmVyKSBsaXN0ZW5lcjsN\nCiAgICAgICAgVHlwZXNDaGFuZ2VkRXZlbnQgZXYgPSAoVHlwZXNDaGFuZ2Vk\nRXZlbnQpIGV2ZW50Ow0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgbGlz\ndGVuLm9uVHlwZXNDaGFuZ2VkKGV2KTsNCiAgICAgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIGlmIChsb2cuaXNXYXJuRW5hYmxl\nZCgpKQ0KICAgICAgICAgICAgICAgIGxvZy53YXJuKHNfbG9jLmdldCgiZXhw\nLWxpc3RlbmVyLWV4IiksIGUpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAg\nLyoqDQogICAgICogSW5kaXZpZHVhbCBxdWVyeSByZXN1bHRzIHdpbGwgYmUg\ncmVnaXN0ZXJlZCBhcyB0eXBlcyBjaGFuZ2VkDQogICAgICogbGlzdGVuZXJz\nLiBXZSB3YW50IHN1Y2ggcXVlcnkgcmVzdWx0cyB0byBiZSBnYydkIG9uY2UN\nCiAgICAgKiB0aGUgb25seSByZWZlcmVuY2UgaXMgaGVsZCBieSB0aGUgbGlz\ndCBvZiBleHBpcmF0aW9uIGxpc3RlbmVycy4NCiAgICAgKi8NCiAgICBwcm90\nZWN0ZWQgQ29sbGVjdGlvbiBuZXdMaXN0ZW5lckNvbGxlY3Rpb24oKSB7DQog\nICAgICAgIHJldHVybiBuZXcgQ29uY3VycmVudFJlZmVyZW5jZUhhc2hTZXQg\nKENvbmN1cnJlbnRSZWZlcmVuY2VIYXNoU2V0LldFQUspOw0KCX0NCn0NCg==\n","encoding":"base64"}

