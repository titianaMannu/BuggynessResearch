{"sha":"6224fe80c510fc51211971195b338796e746c23d","node_id":"MDQ6QmxvYjIwNjM2NDo2MjI0ZmU4MGM1MTBmYzUxMjExOTcxMTk1YjMzODc5NmU3NDZjMjNk","size":8663,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6224fe80c510fc51211971195b338796e746c23d","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\nZGF0YWNhY2hlOw0KDQppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250\ncm9sbGVyOw0KaW1wb3J0IGphdmEudGV4dC5EYXRlRm9ybWF0Ow0KaW1wb3J0\nIGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0Ow0KaW1wb3J0IGphdmEudXRp\nbC5DYWxlbmRhcjsNCmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsNCmltcG9ydCBq\nYXZhLnV0aWwuSXRlcmF0b3I7DQppbXBvcnQgamF2YS51dGlsLk1hcDsNCmlt\ncG9ydCBqYXZhLnV0aWwuU3RyaW5nVG9rZW5pemVyOw0KDQppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOw0KaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVy\nOw0KaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNo\nTWFwOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludmFsaWRT\ndGF0ZUV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5Vc2VyRXhjZXB0aW9uOw0KaW1wb3J0IHNlcnAudXRpbC5TdHJpbmdzOw0K\nDQovKioNCiAqIENyb24tc3R5bGUgY2FjaGUgZXZpY3Rpb24uIFVuZGVyc3Rh\nbmRzIHNjaGVkdWxlcyBiYXNlZCBvbiBjcm9uIGZvcm1hdDoNCiAqIDxjb2Rl\nPm1pbnV0ZSBob3VyIG1kYXkgbW9udGggd2RheTwvY29kZT4NCiAqIEZvciBl\neGFtcGxlOg0KICogPGNvZGU+MTUsMzAgNiwxOSAyLDEwIDEgMiA8L2NvZGU+\nDQogKiBXb3VsZCBydW4gYXQgMTUgYW5kIDMwIHBhc3QgdGhlIDZBTSBhbmQg\nN1BNLCBvbiB0aGUgMm5kIGFuZCAxMHRoDQogKiBvZiBKYW51YXJ5IHdoZW4g\naXRzIGEgTW9uZGF5Lg0KICoNCiAqIEBhdXRob3IgU3RldmUgS2ltDQogKi8N\nCnB1YmxpYyBjbGFzcyBEYXRhQ2FjaGVTY2hlZHVsZXINCiAgICBpbXBsZW1l\nbnRzIFJ1bm5hYmxlIHsNCg0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExv\nY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UNCiAgICAgICAg\nKERhdGFDYWNoZVNjaGVkdWxlci5jbGFzcyk7DQoNCiAgICBwcml2YXRlIE1h\ncCBfY2FjaGVzID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwKCk7DQogICAgcHJp\ndmF0ZSBib29sZWFuIF9zdG9wID0gZmFsc2U7DQogICAgcHJpdmF0ZSBpbnQg\nX2ludGVydmFsID0gMjsNCiAgICBwcml2YXRlIExvZyBfbG9nOw0KICAgIHBy\naXZhdGUgVGhyZWFkIF90aHJlYWQ7DQoNCiAgICBwdWJsaWMgRGF0YUNhY2hl\nU2NoZWR1bGVyKE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYpIHsNCiAgICAg\nICAgX2xvZyA9IGNvbmYuZ2V0TG9nRmFjdG9yeSgpLmdldExvZyhPcGVuSlBB\nQ29uZmlndXJhdGlvbi5MT0dfREFUQUNBQ0hFKTsNCiAgICB9DQoNCiAgICAv\nKioNCiAgICAgKiBUaGUgaW50ZXJ2YWwgdGltZSBpbiBtaW51dGVzIGJldHdl\nZW4gY2FjaGUgY2hlY2tzLiBEZWZhdWx0cyB0byAyLg0KICAgICAqLw0KICAg\nIHB1YmxpYyBpbnQgZ2V0SW50ZXJ2YWwoKSB7DQogICAgICAgIHJldHVybiBf\naW50ZXJ2YWw7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVGhlIGludGVy\ndmFsIHRpbWUgaW4gbWludXRlcyBiZXR3ZWVuIGNhY2hlIGNoZWNrcy4gRGVm\nYXVsdHMgdG8gMi4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBzZXRJbnRl\ncnZhbChpbnQgaW50ZXJ2YWwpIHsNCiAgICAgICAgX2ludGVydmFsID0gaW50\nZXJ2YWw7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU3RvcCB0aGUgYXNz\nb2NpYXRlZCB0aHJlYWQgaWYgdGhlcmUgYW5kIHN0b3AgdGhlIGN1cnJlbnQg\ncnVubmFibGUuDQogICAgICovDQogICAgcHVibGljIHN5bmNocm9uaXplZCB2\nb2lkIHN0b3AoKSB7DQogICAgICAgIF9zdG9wID0gdHJ1ZTsNCiAgICB9DQoN\nCiAgICBwcml2YXRlIGJvb2xlYW4gaXNTdG9wcGVkKCkgew0KICAgICAgICBy\nZXR1cm4gX3N0b3A7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2NoZWR1\nbGUgdGhlIGdpdmVuIGNhY2hlIGZvciBldmljdGlvbi4gU3RhcnRzIHRoZSBz\nY2hlZHVsaW5nIHRocmVhZA0KICAgICAqIGlmIG5vdCBzdGFydGVkLg0KICAg\nICAqLw0KICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCBzY2hlZHVsZUV2\naWN0aW9uKERhdGFDYWNoZSBjYWNoZSwgU3RyaW5nIHRpbWVzKSB7DQogICAg\nICAgIGlmICh0aW1lcyA9PSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuOw0K\nDQogICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gbmV3IFNjaGVkdWxlKHRp\nbWVzKTsNCiAgICAgICAgX2NhY2hlcy5wdXQoY2FjaGUsIHNjaGVkdWxlKTsN\nCiAgICAgICAgX3N0b3AgPSBmYWxzZTsNCiAgICAgICAgaWYgKF90aHJlYWQg\nPT0gbnVsbCkgew0KICAgICAgICAgICAgX3RocmVhZCA9IChUaHJlYWQpIEFj\nY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyDQog\nICAgICAgICAgICAgICAgLm5ld0RhZW1vblRocmVhZEFjdGlvbih0aGlzLCBf\nbG9jLmdldCgic2NoZWR1bGVyLW5hbWUiKQ0KICAgICAgICAgICAgICAgICAg\nICAuZ2V0TWVzc2FnZSgpKSk7DQogICAgICAgICAgICBfdGhyZWFkLnN0YXJ0\nKCk7DQogICAgICAgICAgICBpZiAoX2xvZy5pc1RyYWNlRW5hYmxlZCgpKQ0K\nICAgICAgICAgICAgICAgIF9sb2cudHJhY2UoX2xvYy5nZXQoInNjaGVkdWxl\nci1zdGFydCIsIF90aHJlYWQuZ2V0TmFtZSgpKSk7DQogICAgICAgIH0NCiAg\nICB9DQoNCiAgICAvKioNCiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhY2hl\nIGZyb20gc2NoZWR1bGluZy4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3luY2hy\nb25pemVkIHZvaWQgcmVtb3ZlRnJvbVNjaGVkdWxlKERhdGFDYWNoZSBjYWNo\nZSkgew0KICAgICAgICBfY2FjaGVzLnJlbW92ZShjYWNoZSk7DQogICAgICAg\nIGlmIChfY2FjaGVzLnNpemUoKSA9PSAwKQ0KICAgICAgICAgICAgc3RvcCgp\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsNCiAgICAgICAg\naWYgKF9sb2cuaXNUcmFjZUVuYWJsZWQoKSkNCiAgICAgICAgICAgIF9sb2cu\ndHJhY2UoX2xvYy5nZXQoInNjaGVkdWxlci1pbnRlcnZhbCIsIF9pbnRlcnZh\nbCArICIiKSk7DQoNCiAgICAgICAgRGF0ZSBsYXN0UnVuID0gbmV3IERhdGUo\nKTsNCiAgICAgICAgRGF0ZUZvcm1hdCBmb20gPSBuZXcgU2ltcGxlRGF0ZUZv\ncm1hdCgiRSBISDptbTpzcyIpOw0KICAgICAgICB3aGlsZSAoIWlzU3RvcHBl\nZCgpKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIFRo\ncmVhZC5zbGVlcChfaW50ZXJ2YWwgKiA2MCAqIDEwMDApOw0KDQogICAgICAg\nICAgICAgICAgRGF0ZSBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAg\nICAgIERhdGFDYWNoZSBjYWNoZTsNCiAgICAgICAgICAgICAgICBTY2hlZHVs\nZSBzY2hlZHVsZTsNCiAgICAgICAgICAgICAgICBNYXAuRW50cnkgZW50cnk7\nDQogICAgICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpID0gX2NhY2hlcy5l\nbnRyeVNldCgpLml0ZXJhdG9yKCk7IGkuaGFzTmV4dCgpOykgew0KICAgICAg\nICAgICAgICAgICAgICBlbnRyeSA9IChNYXAuRW50cnkpIGkubmV4dCgpOw0K\nICAgICAgICAgICAgICAgICAgICBjYWNoZSA9IChEYXRhQ2FjaGUpIGVudHJ5\nLmdldEtleSgpOw0KICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZSA9IChT\nY2hlZHVsZSkgZW50cnkuZ2V0VmFsdWUoKTsNCiAgICAgICAgICAgICAgICAg\nICAgaWYgKHNjaGVkdWxlLm1hdGNoZXMobGFzdFJ1biwgbm93KSkgew0KICAg\nICAgICAgICAgICAgICAgICAgICAgaWYgKF9sb2cuaXNUcmFjZUVuYWJsZWQo\nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nLnRyYWNlKF9s\nb2MuZ2V0KCJzY2hlZHVsZXItY2xlYXIiLA0KICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBjYWNoZS5nZXROYW1lKCksIGZvbS5mb3JtYXQobm93\nKSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZXZpY3QoY2FjaGUpOw0K\nICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAg\nICAgICAgICAgICAgIGxhc3RSdW4gPSBub3c7DQogICAgICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgew0KICAgICAgICAgICAgICAgIHRocm93IG5l\ndyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoInNjaGVkdWxlci1m\nYWlsIiksIGUpLg0KICAgICAgICAgICAgICAgICAgICBzZXRGYXRhbCh0cnVl\nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIF9sb2cu\naW5mbyhfbG9jLmdldCgic2NoZWR1bGVyLXN0b3AiKSk7DQogICAgICAgIHN5\nbmNocm9uaXplZCAodGhpcykgew0KICAgICAgICAgICAgaWYgKGlzU3RvcHBl\nZCgpKQ0KICAgICAgICAgICAgICAgIF90aHJlYWQgPSBudWxsOyAvLyBiZSBz\ndXJlIHRvIGRlcmVmIHRoZSB0aHJlYWQgc28gaXQgY2FuIHJlc3RhcnQNCiAg\nICAgICAgfQ0KICAgIH0NCg0KICAgIHByb3RlY3RlZCB2b2lkIGV2aWN0KERh\ndGFDYWNoZSBjYWNoZSkgew0KICAgICAgICBjYWNoZS5jbGVhcigpOw0KICAg\nIH0NCg0KICAgIC8qKg0KICAgICAqIFNpbXBsZSBjbGFzcyB3aGljaCByZXBy\nZXNlbnRzIHRoZSBnaXZlbiB0aW1lIHNjaGVkdWxlLg0KICAgICAqLw0KICAg\nIHByaXZhdGUgc3RhdGljIGNsYXNzIFNjaGVkdWxlIHsNCg0KICAgICAgICBz\ndGF0aWMgZmluYWwgaW50W10gV0lMRENBUkQgPSBuZXcgaW50WzBdOw0KICAg\nICAgICBzdGF0aWMgZmluYWwgaW50W10gVU5JVFMgPSB7DQogICAgICAgICAg\nICBDYWxlbmRhci5NT05USCwNCiAgICAgICAgICAgIENhbGVuZGFyLkRBWV9P\nRl9NT05USCwNCiAgICAgICAgICAgIENhbGVuZGFyLkRBWV9PRl9XRUVLLA0K\nICAgICAgICAgICAgQ2FsZW5kYXIuSE9VUl9PRl9EQVksDQogICAgICAgICAg\nICBDYWxlbmRhci5NSU5VVEUNCiAgICAgICAgfTsNCiAgICAgICAgZmluYWwg\naW50W10gbW9udGg7DQogICAgICAgIGZpbmFsIGludFtdIGRheU9mTW9udGg7\nDQogICAgICAgIGZpbmFsIGludFtdIGRheU9mV2VlazsNCiAgICAgICAgZmlu\nYWwgaW50W10gaG91cjsNCiAgICAgICAgZmluYWwgaW50W10gbWluOw0KDQog\nICAgICAgIHB1YmxpYyBTY2hlZHVsZShTdHJpbmcgZGF0ZSkgew0KICAgICAg\nICAgICAgU3RyaW5nVG9rZW5pemVyIHRva2VuID0gbmV3IFN0cmluZ1Rva2Vu\naXplcihkYXRlLCAiIFx0Iik7DQogICAgICAgICAgICBpZiAodG9rZW4uY291\nbnRUb2tlbnMoKSAhPSA1KQ0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBV\nc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJiYWQtY291bnQiLCBkYXRlKSkuDQog\nICAgICAgICAgICAgICAgICAgIHNldEZhdGFsKHRydWUpOw0KICAgICAgICAg\nICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBtaW4gPSBwYXJzZSh0b2tlbi5u\nZXh0VG9rZW4oKSwgMCwgNjApOw0KICAgICAgICAgICAgICAgIGhvdXIgPSBw\nYXJzZSh0b2tlbi5uZXh0VG9rZW4oKSwgMCwgMjQpOw0KICAgICAgICAgICAg\nICAgIGRheU9mTW9udGggPSBwYXJzZSh0b2tlbi5uZXh0VG9rZW4oKSwgMSwg\nMzEpOw0KICAgICAgICAgICAgICAgIG1vbnRoID0gcGFyc2UodG9rZW4ubmV4\ndFRva2VuKCksIDEsIDEzKTsNCiAgICAgICAgICAgICAgICBkYXlPZldlZWsg\nPSBwYXJzZSh0b2tlbi5uZXh0VG9rZW4oKSwgMSwgOCk7DQogICAgICAgICAg\nICB9IGNhdGNoIChUaHJvd2FibGUgdCkgew0KICAgICAgICAgICAgICAgIHRo\ncm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJiYWQtc2NoZWR1bGUi\nLCBkYXRlKSwgdCkuDQogICAgICAgICAgICAgICAgICAgIHNldEZhdGFsKHRy\ndWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHJp\ndmF0ZSBpbnRbXSBwYXJzZShTdHJpbmcgdG9rZW4sIGludCBtaW4sIGludCBt\nYXgpIHsNCiAgICAgICAgICAgIGlmICgiKiIuZXF1YWxzKHRva2VuLnRyaW0o\nKSkpDQogICAgICAgICAgICAgICAgcmV0dXJuIFdJTERDQVJEOw0KICAgICAg\nICAgICAgU3RyaW5nW10gdG9rZW5zID0gU3RyaW5ncy5zcGxpdCh0b2tlbiwg\nIiwiLCAwKTsNCiAgICAgICAgICAgIGludCBbXSB0aW1lcyA9IG5ldyBpbnRb\ndG9rZW5zLmxlbmd0aF07DQogICAgICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IHRva2Vucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIHRy\neSB7DQogICAgICAgICAgICAgICAgICAgIHRpbWVzW2ldID0gSW50ZWdlci5w\nYXJzZUludCh0b2tlbnNbaV0pOw0KICAgICAgICAgICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSB0KSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5l\ndyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJub3QtbnVtYmVyIiwgdG9rZW4p\nKS4NCiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZhdGFsKHRydWUpOw0K\nICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAodGltZXNb\naV0gPCBtaW4gfHwgdGltZXNbaV0gPj0gbWF4KQ0KICAgICAgICAgICAgICAg\nICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdldCgibm90LXJh\nbmdlIiwgdG9rZW4sDQogICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcu\ndmFsdWVPZihtaW4pLCBTdHJpbmcudmFsdWVPZihtYXgpKSkuDQogICAgICAg\nICAgICAgICAgICAgICAgICBzZXRGYXRhbCh0cnVlKTsNCiAgICAgICAgICAg\nIH0NCiAgICAgICAgICAgIHJldHVybiB0aW1lczsNCiAgICAgICAgfQ0KDQog\nICAgICAgIGJvb2xlYW4gbWF0Y2hlcyhEYXRlIGxhc3QsIERhdGUgbm93KSB7\nDQogICAgICAgICAgICBDYWxlbmRhciB0aW1lID0gQ2FsZW5kYXIuZ2V0SW5z\ndGFuY2UoKTsNCiAgICAgICAgICAgIHRpbWUuc2V0VGltZShub3cpOw0KICAg\nICAgICAgICAgdGltZS5zZXQoQ2FsZW5kYXIuU0VDT05ELCAwKTsNCiAgICAg\nICAgICAgIHRpbWUuc2V0KENhbGVuZGFyLk1JTExJU0VDT05ELCAwKTsNCg0K\nICAgICAgICAgICAgaW50W11bXSBhbGwgPQ0KICAgICAgICAgICAgICAgIG5l\ndyBpbnRbXVtdeyBtb250aCwgZGF5T2ZNb250aCwgZGF5T2ZXZWVrLCBob3Vy\nLCBtaW4gfTsNCiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzKGxhc3QsIG5v\ndywgdGltZSwgYWxsLCAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByaXZh\ndGUgYm9vbGVhbiBtYXRjaGVzKERhdGUgbGFzdCwgRGF0ZSBub3csIENhbGVu\nZGFyIHRpbWUsDQogICAgICAgICAgICBpbnRbXVtdIHRpbWVzLCBpbnQgZGVw\ndGgpIHsNCiAgICAgICAgICAgIGlmIChkZXB0aCA9PSBVTklUUy5sZW5ndGgp\nIHsNCiAgICAgICAgICAgICAgICBEYXRlIGNvbXBhcmUgPSB0aW1lLmdldFRp\nbWUoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZS5jb21wYXJl\nVG8obGFzdCkgPj0gMCAmJg0KICAgICAgICAgICAgICAgICAgICBjb21wYXJl\nLmNvbXBhcmVUbyhub3cpIDwgMDsNCiAgICAgICAgICAgIH0NCg0KICAgICAg\nICAgICAgaWYgKHRpbWVzW2RlcHRoXSAhPSBXSUxEQ0FSRCkgew0KICAgICAg\nICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdGltZXNbZGVwdGhdLmxl\nbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIHRpbWUuc2V0KFVO\nSVRTW2RlcHRoXSwgdGltZXNbZGVwdGhdW2ldKTsNCiAgICAgICAgICAgICAg\nICAgICAgaWYgKG1hdGNoZXMobGFzdCwgbm93LCB0aW1lLCB0aW1lcywgZGVw\ndGggKyAxKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVl\nOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAg\nICAgIHJldHVybiBtYXRjaGVzKGxhc3QsIG5vdywgdGltZSwgdGltZXMsIGRl\ncHRoICsgMSk7DQoJCX0NCgl9DQp9DQo=\n","encoding":"base64"}

