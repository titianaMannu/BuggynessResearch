{"sha":"869c5e81ff3c35ee28d684eadae4ab7318572f2e","node_id":"MDQ6QmxvYjIwNjM2NDo4NjljNWU4MWZmM2MzNWVlMjhkNjg0ZWFkYWU0YWI3MzE4NTcyZjJl","size":13640,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/869c5e81ff3c35ee28d684eadae4ab7318572f2e","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5lbmhh\nbmNlOw0KDQppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsNCmltcG9ydCBq\nYXZhLmlvLk9iamVjdElucHV0U3RyZWFtOw0KaW1wb3J0IGphdmEuaW8uT2Jq\nZWN0T3V0cHV0U3RyZWFtOw0KaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxl\nOw0KaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0LkZpZWxkOw0KaW1wb3J0IGph\ndmEubGFuZy5yZWZsZWN0Lk1ldGhvZDsNCg0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOw0KaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0YXRlTWFuYWdl\nckltcGw7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NN\nZXRhRGF0YTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVs\nZE1ldGFEYXRhOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkph\ndmFUeXBlczsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5BcHBs\naWNhdGlvbklkczsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5J\nbXBsSGVscGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLklu\ndGVybmFsRXhjZXB0aW9uOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLk9iamVjdElkOw0KDQovKioNCiAqIEltcGxlbWVudGF0aW9uIG9mIHRo\nZSB7QGxpbmsgUGVyc2lzdGVuY2VDYXBhYmxlfSBpbnRlcmZhY2UgdGhhdCBj\nYW4gaGFuZGxlDQogKiB0aGUgcGVyc2lzdGVuY2UtY2FwYWJsZSBjb250cmFj\ndCBmb3IgaW5zdGFuY2VzIHRoYXQgd2VyZSBub3QgZW5oYW5jZWQNCiAqIGJl\nZm9yZSBjbGFzcyBsb2FkIHRpbWUuDQogKg0KICogQHNpbmNlIDEuMC4wDQog\nKi8NCnB1YmxpYyBjbGFzcyBSZWZsZWN0aW5nUGVyc2lzdGVuY2VDYXBhYmxl\nDQogICAgaW1wbGVtZW50cyBQZXJzaXN0ZW5jZUNhcGFibGUsIE1hbmFnZWRJ\nbnN0YW5jZVByb3ZpZGVyLCBTZXJpYWxpemFibGUgew0KDQogICAgcHJpdmF0\nZSBPYmplY3QgbzsNCiAgICBwcml2YXRlIFN0YXRlTWFuYWdlciBzbTsNCg0K\nICAgIC8vIHRoaXMgd2lsbCBiZSByZWNvbnN0aXR1dGVkIGluIHJlYWRPYmpl\nY3QoKQ0KICAgIHByaXZhdGUgdHJhbnNpZW50IFBlcnNpc3RlbmNlQ2FwYWJs\nZSBwY1N1YmNsYXNzSW5zdGFuY2U7DQoNCiAgICAvLyB0aGlzIHdpbGwgcmVj\nb25zdGl0dXRlZCBieSBhIGNhbGwgdG8gcGNSZXBsYWNlU3RhdGVNYW5hZ2Vy\nKCkgYnkgdGhlDQogICAgLy8gaW5zdGFuY2UgdGhhdCBoYXMgYSByZWZlcmVu\nY2UgdG8gdGhlIGRlc2VyaWFsaXplZCBkYXRhDQogICAgcHJpdmF0ZSB0cmFu\nc2llbnQgQ2xhc3NNZXRhRGF0YSBtZXRhOw0KDQogICAgcHJpdmF0ZSBib29s\nZWFuIHNlcmlhbGl6YXRpb25Vc2VyVmlzaWJsZSA9IHRydWU7DQoNCiAgICBw\ndWJsaWMgUmVmbGVjdGluZ1BlcnNpc3RlbmNlQ2FwYWJsZShPYmplY3Qgbywg\nT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZikgew0KICAgICAgICB0aGlzLm8g\nPSBvOw0KICAgICAgICBDbGFzcyB0eXBlID0gby5nZXRDbGFzcygpOw0KICAg\nICAgICBwY1N1YmNsYXNzSW5zdGFuY2UgPSBQQ1JlZ2lzdHJ5Lm5ld0luc3Rh\nbmNlKHR5cGUsIG51bGwsIGZhbHNlKTsNCiAgICAgICAgbWV0YSA9IGNvbmYu\nZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKQ0KICAgICAgICAgICAg\nLmdldE1ldGFEYXRhKHR5cGUsIG51bGwsIHRydWUpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyBpbnQgcGNHZXRFbmhhbmNlbWVudENvbnRyYWN0VmVyc2lvbigp\nIHsNCiAgICAgICAgcmV0dXJuIFBDRW5oYW5jZXIuRU5IQU5DRVJfVkVSU0lP\nTjsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0IHBjR2V0R2VuZXJpY0Nv\nbnRleHQoKSB7DQogICAgICAgIGlmIChzbSA9PSBudWxsKQ0KICAgICAgICAg\nICAgcmV0dXJuIG51bGw7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJl\ndHVybiBzbS5nZXRHZW5lcmljQ29udGV4dCgpOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyBTdGF0ZU1hbmFnZXIgcGNHZXRTdGF0ZU1hbmFnZXIoKSB7DQogICAg\nICAgIHJldHVybiBzbTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBwY1Jl\ncGxhY2VTdGF0ZU1hbmFnZXIoU3RhdGVNYW5hZ2VyIHNtKSB7DQogICAgICAg\nIHRoaXMuc20gPSBzbTsNCiAgICAgICAgaWYgKG1ldGEgPT0gbnVsbCAmJiBz\nbSBpbnN0YW5jZW9mIE9wZW5KUEFTdGF0ZU1hbmFnZXIpDQogICAgICAgICAg\nICBtZXRhID0gKChPcGVuSlBBU3RhdGVNYW5hZ2VyKSBzbSkuZ2V0TWV0YURh\ndGEoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBwY1Byb3ZpZGVGaWVs\nZChpbnQgaSkgew0KICAgICAgICBPYmplY3QgdmFsdWUgPSBnZXRWYWx1ZShp\nLCBvKTsNCiAgICAgICAgc3dpdGNoIChtZXRhLmdldEZpZWxkKGkpLmdldFR5\ncGVDb2RlKCkpIHsNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJPT0xF\nQU46DQogICAgICAgICAgICAgICAgc20ucHJvdmlkZWRCb29sZWFuRmllbGQo\ndGhpcywgaSwgdmFsdWUgPT0gbnVsbCA/IGZhbHNlIDoNCiAgICAgICAgICAg\nICAgICAgICAgKChCb29sZWFuKSB2YWx1ZSkuYm9vbGVhblZhbHVlKCkpOw0K\nICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuQllURToNCiAgICAgICAgICAgICAgICBzbS5wcm92aWRlZEJ5dGVG\naWVsZCh0aGlzLCBpLCB2YWx1ZSA9PSBudWxsID8gMCA6DQogICAgICAgICAg\nICAgICAgICAgICgoQnl0ZSkgdmFsdWUpLmJ5dGVWYWx1ZSgpKTsNCiAgICAg\nICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLkNIQVI6DQogICAgICAgICAgICAgICAgc20ucHJvdmlkZWRDaGFyRmllbGQo\ndGhpcywgaSwgdmFsdWUgPT0gbnVsbCA/IDAgOg0KICAgICAgICAgICAgICAg\nICAgICAoKENoYXJhY3RlcikgdmFsdWUpLmNoYXJWYWx1ZSgpKTsNCiAgICAg\nICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLkRPVUJMRToNCiAgICAgICAgICAgICAgICBzbS5wcm92aWRlZERvdWJsZUZp\nZWxkKHRoaXMsIGksIHZhbHVlID09IG51bGwgPyAwIDoNCiAgICAgICAgICAg\nICAgICAgICAgKChEb3VibGUpIHZhbHVlKS5kb3VibGVWYWx1ZSgpKTsNCiAg\nICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkZMT0FUOg0KICAgICAgICAgICAgICAgIHNtLnByb3ZpZGVkRmxvYXRG\naWVsZCh0aGlzLCBpLCB2YWx1ZSA9PSBudWxsID8gMCA6DQogICAgICAgICAg\nICAgICAgICAgICgoRmxvYXQpIHZhbHVlKS5mbG9hdFZhbHVlKCkpOw0KICAg\nICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuSU5UOg0KICAgICAgICAgICAgICAgIHNtLnByb3ZpZGVkSW50RmllbGQo\ndGhpcywgaSwgdmFsdWUgPT0gbnVsbCA/IDAgOg0KICAgICAgICAgICAgICAg\nICAgICAoKEludGVnZXIpIHZhbHVlKS5pbnRWYWx1ZSgpKTsNCiAgICAgICAg\nICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxP\nTkc6DQogICAgICAgICAgICAgICAgc20ucHJvdmlkZWRMb25nRmllbGQodGhp\ncywgaSwgdmFsdWUgPT0gbnVsbCA/IDAgOg0KICAgICAgICAgICAgICAgICAg\nICAoKExvbmcpIHZhbHVlKS5sb25nVmFsdWUoKSk7DQogICAgICAgICAgICAg\nICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5TSE9SVDoN\nCiAgICAgICAgICAgICAgICBzbS5wcm92aWRlZFNob3J0RmllbGQodGhpcywg\naSwgdmFsdWUgPT0gbnVsbCA/IDAgOg0KICAgICAgICAgICAgICAgICAgICAo\nKFNob3J0KSB2YWx1ZSkuc2hvcnRWYWx1ZSgpKTsNCiAgICAgICAgICAgICAg\nICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNUUklORzoN\nCiAgICAgICAgICAgICAgICBzbS5wcm92aWRlZFN0cmluZ0ZpZWxkKHRoaXMs\nIGksIChTdHJpbmcpIHZhbHVlKTsNCiAgICAgICAgICAgICAgICBicmVhazsN\nCiAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgc20ucHJv\ndmlkZWRPYmplY3RGaWVsZCh0aGlzLCBpLCB2YWx1ZSk7DQogICAgICAgICAg\nICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCBwY1Byb3ZpZGVGaWVsZHMoaW50W10gZmllbGRJbmRpY2VzKSB7DQog\nICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBmaWVsZEluZGljZXMubGVuZ3Ro\nOyBpKyspDQogICAgICAgICAgICBwY1Byb3ZpZGVGaWVsZChmaWVsZEluZGlj\nZXNbaV0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHBjUmVwbGFjZUZp\nZWxkKGludCBpKSB7DQogICAgICAgIHN3aXRjaChtZXRhLmdldEZpZWxkKGkp\nLmdldFR5cGVDb2RlKCkpIHsNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLkJPT0xFQU46DQogICAgICAgICAgICAgICAgc2V0VmFsdWUoaSwgbywgQm9v\nbGVhbi52YWx1ZU9mKA0KICAgICAgICAgICAgICAgICAgICBzbS5yZXBsYWNl\nQm9vbGVhbkZpZWxkKHRoaXMsIGkpKSk7DQogICAgICAgICAgICAgICAgYnJl\nYWs7DQogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CWVRFOg0KICAgICAg\nICAgICAgICAgIHNldFZhbHVlKGksIG8sIG5ldyBCeXRlKHNtLnJlcGxhY2VC\neXRlRmllbGQodGhpcywgaSkpKTsNCiAgICAgICAgICAgICAgICBicmVhazsN\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkNIQVI6DQogICAgICAgICAg\nICAgICAgc2V0VmFsdWUoaSwgbywgbmV3IENoYXJhY3RlcihzbS5yZXBsYWNl\nQ2hhckZpZWxkKHRoaXMsIGkpKSk7DQogICAgICAgICAgICAgICAgYnJlYWs7\nDQogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5ET1VCTEU6DQogICAgICAg\nICAgICAgICAgc2V0VmFsdWUoaSwgbywgbmV3IERvdWJsZShzbS5yZXBsYWNl\nRG91YmxlRmllbGQodGhpcywgaSkpKTsNCiAgICAgICAgICAgICAgICBicmVh\nazsNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkZMT0FUOg0KICAgICAg\nICAgICAgICAgIHNldFZhbHVlKGksIG8sIG5ldyBGbG9hdChzbS5yZXBsYWNl\nRmxvYXRGaWVsZCh0aGlzLCBpKSkpOw0KICAgICAgICAgICAgICAgIGJyZWFr\nOw0KICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UOg0KICAgICAgICAg\nICAgICAgIHNldFZhbHVlKGksIG8sIG5ldyBJbnRlZ2VyKHNtLnJlcGxhY2VJ\nbnRGaWVsZCh0aGlzLCBpKSkpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0K\nICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9ORzoNCiAgICAgICAgICAg\nICAgICBzZXRWYWx1ZShpLCBvLCBuZXcgTG9uZyhzbS5yZXBsYWNlTG9uZ0Zp\nZWxkKHRoaXMsIGkpKSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5TSE9SVDoNCiAgICAgICAgICAgICAg\nICBzZXRWYWx1ZShpLCBvLCBuZXcgU2hvcnQoc20ucmVwbGFjZVNob3J0Rmll\nbGQodGhpcywgaSkpKTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAg\nICAgICAgIGNhc2UgSmF2YVR5cGVzLlNUUklORzoNCiAgICAgICAgICAgICAg\nICBzZXRWYWx1ZShpLCBvLCBzbS5yZXBsYWNlU3RyaW5nRmllbGQodGhpcywg\naSkpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgZGVm\nYXVsdDoNCiAgICAgICAgICAgICAgICBzZXRWYWx1ZShpLCBvLCBzbS5yZXBs\nYWNlT2JqZWN0RmllbGQodGhpcywgaSkpOw0KICAgICAgICAgICAgICAgIGJy\nZWFrOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgcGNS\nZXBsYWNlRmllbGRzKGludFtdIGZpZWxkSW5kaWNlcykgew0KICAgICAgICBm\nb3IoaW50IGkgPSAwOyBpIDwgZmllbGRJbmRpY2VzLmxlbmd0aDsgaSsrKQ0K\nICAgICAgICAgICAgcGNSZXBsYWNlRmllbGQoZmllbGRJbmRpY2VzW2ldKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBwY0NvcHlGaWVsZChPYmplY3Qg\nZnJvbU9iamVjdCwgaW50IGkpIHsNCiAgICAgICAgLy8gdGhpcyBkb2Vzbid0\nIG5lZWQgc3dpdGNoIHRyZWF0bWVudCBiZWNhdXNlIHdlJ3JlIGp1c3QNCiAg\nICAgICAgLy8gcmVmbGVjdGluZyBvbiBib3RoIHNpZGVzLCBieXBhc3Npbmcg\nZmllbGQgbWFuYWdlcnMuDQogICAgICAgIHNldFZhbHVlKGksIG8sIGdldFZh\nbHVlKGksIGZyb21PYmplY3QpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCBwY0NvcHlGaWVsZHMoT2JqZWN0IGZyb21PYmplY3QsIGludFtdIGZpZWxk\nSW5kaWNlcykgew0KICAgICAgICBpZiAoZnJvbU9iamVjdCBpbnN0YW5jZW9m\nIFJlZmxlY3RpbmdQZXJzaXN0ZW5jZUNhcGFibGUpDQogICAgICAgICAgICBm\ncm9tT2JqZWN0ID0gKChSZWZsZWN0aW5nUGVyc2lzdGVuY2VDYXBhYmxlKSBm\ncm9tT2JqZWN0KQ0KICAgICAgICAgICAgICAgIC5nZXRNYW5hZ2VkSW5zdGFu\nY2UoKTsNCiAgICAgICAgDQogICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBm\naWVsZEluZGljZXMubGVuZ3RoOyBpKyspDQogICAgICAgICAgICBwY0NvcHlG\naWVsZChmcm9tT2JqZWN0LCBmaWVsZEluZGljZXNbaV0pOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyB2b2lkIHBjRGlydHkoU3RyaW5nIGZpZWxkTmFtZSkgew0K\nICAgICAgICBpZiAoc20gIT0gbnVsbCkNCiAgICAgICAgICAgIHNtLmRpcnR5\nKGZpZWxkTmFtZSk7DQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBwY0Zl\ndGNoT2JqZWN0SWQoKSB7DQogICAgICAgIGlmIChzbSAhPSBudWxsKQ0KICAg\nICAgICAgICAgcmV0dXJuIHNtLmZldGNoT2JqZWN0SWQoKTsNCiAgICAgICAg\nZWxzZQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfQ0KDQogICAg\ncHVibGljIE9iamVjdCBwY0dldFZlcnNpb24oKSB7DQogICAgICAgIGlmIChz\nbSA9PSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAg\nIGVsc2UNCiAgICAgICAgICAgIHJldHVybiBzbS5nZXRWZXJzaW9uKCk7DQog\nICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gcGNJc0RpcnR5KCkgew0KICAg\nICAgICBpZiAoc20gPT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVybiBmYWxz\nZTsNCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBpZiAoc20gaW5zdGFu\nY2VvZiBTdGF0ZU1hbmFnZXJJbXBsKQ0KICAgICAgICAgICAgICAgICgoU3Rh\ndGVNYW5hZ2VySW1wbCkgc20pLmRpcnR5Q2hlY2soKTsNCiAgICAgICAgICAg\nIHJldHVybiBzbS5pc0RpcnR5KCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAg\nICBwdWJsaWMgYm9vbGVhbiBwY0lzVHJhbnNhY3Rpb25hbCgpIHsNCiAgICAg\nICAgaWYgKHNtID09IG51bGwpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiBzbS5pc1RyYW5z\nYWN0aW9uYWwoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBwY0lz\nUGVyc2lzdGVudCgpIHsNCiAgICAgICAgaWYgKHNtID09IG51bGwpDQogICAg\nICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIGVsc2UNCiAgICAgICAg\nICAgIHJldHVybiBzbS5pc1BlcnNpc3RlbnQoKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgYm9vbGVhbiBwY0lzTmV3KCkgew0KICAgICAgICBpZiAoc20gPT0g\nbnVsbCkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgZWxz\nZQ0KICAgICAgICAgICAgcmV0dXJuIHNtLmlzTmV3KCk7DQogICAgfQ0KDQog\nICAgcHVibGljIGJvb2xlYW4gcGNJc0RlbGV0ZWQoKSB7DQogICAgICAgIGlm\nIChzbSA9PSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAg\nICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gc20uaXNEZWxldGVkKCk7\nDQogICAgfQ0KDQogICAgLy8gbnVsbCA9PSB1bmtub3duDQogICAgcHVibGlj\nIEJvb2xlYW4gcGNJc0RldGFjaGVkKCkgew0KICAgICAgICBpZiAoc20gIT0g\nbnVsbCkNCiAgICAgICAgICAgIHJldHVybiBCb29sZWFuLnZhbHVlT2Yoc20u\naXNEZXRhY2hlZCgpKTsNCg0KICAgICAgICAvLyAjIyMjIyB3ZSBjb3VsZCBk\nbyBhIGxvdCBtb3JlIGhlcmUgaWYgYSBkZXRhY2hlZCBzdGF0ZSBmaWVsZA0K\nICAgICAgICAvLyAjIyMjIyB3YXMgc3BlY2lmaWVkLg0KICAgICAgICByZXR1\ncm4gbnVsbDsNCiAgICB9DQoNCiAgICBwdWJsaWMgUGVyc2lzdGVuY2VDYXBh\nYmxlIHBjTmV3SW5zdGFuY2UoU3RhdGVNYW5hZ2VyIHNtLCBib29sZWFuIGNs\nZWFyKSB7DQogICAgICAgIHJldHVybiBwY1N1YmNsYXNzSW5zdGFuY2UucGNO\nZXdJbnN0YW5jZShzbSwgY2xlYXIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGNOZXdJbnN0YW5jZShTdGF0ZU1hbmFnZXIg\nc20sIE9iamVjdCBvaWQsDQogICAgICAgIGJvb2xlYW4gY2xlYXIpIHsNCiAg\nICAgICAgcmV0dXJuIHBjU3ViY2xhc3NJbnN0YW5jZS5wY05ld0luc3RhbmNl\nKHNtLCBvaWQsIGNsZWFyKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0\nIHBjTmV3T2JqZWN0SWRJbnN0YW5jZSgpIHsNCiAgICAgICAgRmllbGRNZXRh\nRGF0YVtdIHBrRmllbGRzID0gbWV0YS5nZXRQcmltYXJ5S2V5RmllbGRzKCk7\nDQogICAgICAgIE9iamVjdFtdIHBrcyA9IG5ldyBPYmplY3RbcGtGaWVsZHMu\nbGVuZ3RoXTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwa0ZpZWxk\ncy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgIHBrc1tpXSA9IGdldFZhbHVl\nKHBrRmllbGRzW2ldLmdldEluZGV4KCksIG8pOw0KICAgICAgICByZXR1cm4g\nQXBwbGljYXRpb25JZHMuZnJvbVBLVmFsdWVzKHBrcywgbWV0YSk7DQogICAg\nfQ0KICAgIA0KICAgIHB1YmxpYyBPYmplY3QgcGNOZXdPYmplY3RJZEluc3Rh\nbmNlKE9iamVjdCBvaWQpIHsNCiAgICAgICAgcmV0dXJuIHBjU3ViY2xhc3NJ\nbnN0YW5jZS5wY05ld09iamVjdElkSW5zdGFuY2Uob2lkKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCBwY0NvcHlLZXlGaWVsZHNUb09iamVjdElkKE9i\namVjdCBvaWQpIHsNCiAgICAgICAgT2JqZWN0IHRhcmdldDsNCiAgICAgICAg\naWYgKG9pZCBpbnN0YW5jZW9mIE9iamVjdElkKQ0KICAgICAgICAgICAgdGFy\nZ2V0ID0gKChPYmplY3RJZCkgb2lkKS5nZXRJZCgpOw0KICAgICAgICBlbHNl\nDQogICAgICAgICAgICB0YXJnZXQgPSBvaWQ7DQoNCiAgICAgICAgRmllbGRN\nZXRhRGF0YVtdIHBrcyA9IG1ldGEuZ2V0UHJpbWFyeUtleUZpZWxkcygpOw0K\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBrcy5sZW5ndGg7IGkrKykg\new0KICAgICAgICAgICAgT2JqZWN0IHZhbCA9IGdldFZhbHVlKHBrc1tpXS5n\nZXRJbmRleCgpLCBvKTsNCiAgICAgICAgICAgIEZpZWxkIGYgPSBSZWZsZWN0\naW9uLmZpbmRGaWVsZCh0YXJnZXQuZ2V0Q2xhc3MoKSwgcGtzW2ldLmdldE5h\nbWUoKSwNCiAgICAgICAgICAgICAgICB0cnVlKTsNCiAgICAgICAgICAgIFJl\nZmxlY3Rpb24uc2V0KHRhcmdldCwgZiwgdmFsKTsNCiAgICAgICAgfQ0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIHBjQ29weUtleUZpZWxkc1RvT2JqZWN0\nSWQoRmllbGRTdXBwbGllciBzdXBwbGllciwgT2JqZWN0IG9iaikgew0KICAg\nICAgICAvLyBUaGlzIGlzIG9ubHkgZXZlciBpbnZva2VkIGFnYWluc3QgUENz\nIGluIHRoZSBQQ1JlZ2lzdHJ5LiBTdWNoIFBDcw0KICAgICAgICAvLyB3aWxs\nIGFsd2F5cyBiZSBlbmhhbmNlZCB0eXBlcyBvciBzdWJ0eXBlcyBvZiB1c2Vy\nIHR5cGVzLCBhbmQgd2lsbA0KICAgICAgICAvLyBuZXZlciBiZSBhIFJlZmxl\nY3RpbmdQZXJzaXN0ZW5jZUNhcGFibGUuDQogICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIHBjQ29weUtleUZpZWxkc0Zyb21PYmplY3RJZChGaWVsZENvbnN1bWVyIGNv\nbnN1bWVyLA0KICAgICAgICBPYmplY3Qgb2JqKSB7DQogICAgICAgIC8vIFRo\naXMgaXMgb25seSBldmVyIGludm9rZWQgYWdhaW5zdCBQQ3MgaW4gdGhlIFBD\nUmVnaXN0cnkuIFN1Y2ggUENzDQogICAgICAgIC8vIHdpbGwgYWx3YXlzIGJl\nIGVuaGFuY2VkIHR5cGVzIG9yIHN1YnR5cGVzIG9mIHVzZXIgdHlwZXMsIGFu\nZCB3aWxsDQogICAgICAgIC8vIG5ldmVyIGJlIGEgUmVmbGVjdGluZ1BlcnNp\nc3RlbmNlQ2FwYWJsZS4NCiAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhj\nZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBwY0dldERl\ndGFjaGVkU3RhdGUoKSB7DQogICAgICAgIC8vICMjIyMjIHdlIGNhbiBpbXBs\nZW1lbnQgdGhpcyBpZiBhIHN0YXRlIGZpZWxkIGhhcyBiZWVuIHNldA0KICAg\nICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBw\nY1NldERldGFjaGVkU3RhdGUoT2JqZWN0IHN0YXRlKSB7DQogICAgICAgIC8v\nIFN0YXRlTWFuYWdlckltcGwgd2lsbCBpbnZva2UgdGhpcyB3aXRoIG51bGwg\nZHVyaW5nIGluc3RhbmNlDQogICAgICAgIC8vIGluaXRpYWxpemF0aW9uDQog\nICAgICAgIGlmIChzdGF0ZSAhPSBudWxsKQ0KICAgICAgICAgICAgdGhyb3cg\nbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQogICAgICAg\nIC8vICMjIyMjIHdlIGNhbiBpbXBsZW1lbnQgdGhpcyBpZiBhIHN0YXRlIGZp\nZWxkIGhhcyBiZWVuIHNldA0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHBj\nU2V0U2VyaWFsaXphdGlvblVzZXJWaXNpYmxlKGJvb2xlYW4gdXNlclZpc2li\nbGUpIHsNCiAgICAgICAgc2VyaWFsaXphdGlvblVzZXJWaXNpYmxlID0gdXNl\nclZpc2libGU7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gcGNJc1Nl\ncmlhbGl6YXRpb25Vc2VyVmlzaWJsZSgpIHsNCiAgICAgICAgcmV0dXJuIHNl\ncmlhbGl6YXRpb25Vc2VyVmlzaWJsZTsNCiAgICB9DQoNCiAgICBwdWJsaWMg\nT2JqZWN0IGdldE1hbmFnZWRJbnN0YW5jZSgpIHsNCiAgICAgICAgcmV0dXJu\nIG87DQogICAgfQ0KDQogICAgcHJpdmF0ZSBPYmplY3QgZ2V0VmFsdWUoaW50\nIGksIE9iamVjdCBvKSB7DQogICAgICAgIGlmIChtZXRhLmdldEFjY2Vzc1R5\ncGUoKSA9PSBDbGFzc01ldGFEYXRhLkFDQ0VTU19QUk9QRVJUWSkgew0KICAg\nICAgICAgICAgRmllbGQgZmllbGQgPSBSZWZsZWN0aW9uLmZpbmRGaWVsZCht\nZXRhLmdldERlc2NyaWJlZFR5cGUoKSwNCiAgICAgICAgICAgICAgICB0b0Zp\nZWxkTmFtZShpKSwgdHJ1ZSk7DQogICAgICAgICAgICByZXR1cm4gUmVmbGVj\ndGlvbi5nZXQobywgZmllbGQpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAg\nICAgICAgRmllbGQgZmllbGQgPSAoRmllbGQpIG1ldGEuZ2V0RmllbGQoaSku\nZ2V0QmFja2luZ01lbWJlcigpOw0KICAgICAgICAgICAgcmV0dXJuIFJlZmxl\nY3Rpb24uZ2V0KG8sIGZpZWxkKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAg\nIHByaXZhdGUgU3RyaW5nIHRvRmllbGROYW1lKGludCBpKSB7DQogICAgICAg\nIGlmIChwY1N1YmNsYXNzSW5zdGFuY2UgaW5zdGFuY2VvZiBBdHRyaWJ1dGVU\ncmFuc2xhdG9yKQ0KICAgICAgICAgICAgcmV0dXJuICgoQXR0cmlidXRlVHJh\nbnNsYXRvcikgcGNTdWJjbGFzc0luc3RhbmNlKQ0KICAgICAgICAgICAgICAg\nIC5wY0F0dHJpYnV0ZUluZGV4VG9GaWVsZE5hbWUoaSk7DQogICAgICAgIGVs\nc2UNCiAgICAgICAgICAgIHJldHVybiBtZXRhLmdldEZpZWxkKGkpLmdldE5h\nbWUoKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgc2V0VmFsdWUoaW50\nIGksIE9iamVjdCBvLCBPYmplY3QgdmFsKSB7DQogICAgICAgIGlmIChtZXRh\nLmdldEFjY2Vzc1R5cGUoKSA9PSBDbGFzc01ldGFEYXRhLkFDQ0VTU19QUk9Q\nRVJUWSkgew0KICAgICAgICAgICAgaWYgKCFtZXRhLmlzSW50ZXJjZXB0aW5n\nKCkpIHsNCiAgICAgICAgICAgICAgICBNZXRob2QgbWV0aCA9IFJlZmxlY3Rp\nb24uZmluZFNldHRlcihtZXRhLmdldERlc2NyaWJlZFR5cGUoKSwNCiAgICAg\nICAgICAgICAgICAgICAgbWV0YS5nZXRGaWVsZChpKS5nZXROYW1lKCksIHRy\ndWUpOw0KICAgICAgICAgICAgICAgIFJlZmxlY3Rpb24uc2V0KG8sIG1ldGgs\nIHZhbCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAg\nIEZpZWxkIGZpZWxkID0gUmVmbGVjdGlvbi5maW5kRmllbGQobWV0YS5nZXRE\nZXNjcmliZWRUeXBlKCksDQogICAgICAgICAgICAgICAgICAgIHRvRmllbGRO\nYW1lKGkpLCB0cnVlKTsNCiAgICAgICAgICAgICAgICBSZWZsZWN0aW9uLnNl\ndChvLCBmaWVsZCwgdmFsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBl\nbHNlIHsNCiAgICAgICAgICAgIEZpZWxkIGZpZWxkID0gKEZpZWxkKSBtZXRh\nLmdldEZpZWxkKGkpLmdldEJhY2tpbmdNZW1iZXIoKTsNCiAgICAgICAgICAg\nIFJlZmxlY3Rpb24uc2V0KG8sIGZpZWxkLCB2YWwpOw0KICAgICAgICB9DQog\nICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIHdyaXRlT2JqZWN0KE9iamVjdE91\ndHB1dFN0cmVhbSBvdXQpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAg\nIG91dC5kZWZhdWx0V3JpdGVPYmplY3QoKTsNCiAgICAgICAgb3V0LndyaXRl\nT2JqZWN0KG1ldGEuZ2V0RGVzY3JpYmVkVHlwZSgpKTsNCiAgICB9DQoNCiAg\nICBwcml2YXRlIHZvaWQgcmVhZE9iamVjdChPYmplY3RJbnB1dFN0cmVhbSBp\nbikNCiAgICAgICAgdGhyb3dzIENsYXNzTm90Rm91bmRFeGNlcHRpb24sIElP\nRXhjZXB0aW9uIHsNCiAgICAgICAgaW4uZGVmYXVsdFJlYWRPYmplY3QoKTsN\nCiAgICAgICAgQ2xhc3MgdHlwZSA9IChDbGFzcykgaW4ucmVhZE9iamVjdCgp\nOw0KICAgICAgICBwY1N1YmNsYXNzSW5zdGFuY2UgPSBQQ1JlZ2lzdHJ5Lm5l\nd0luc3RhbmNlKHR5cGUsIG51bGwsIGZhbHNlKTsNCiAgICAgICAgSW1wbEhl\nbHBlci5yZWdpc3RlclBlcnNpc3RlbmNlQ2FwYWJsZSh0aGlzKTsNCiAgICB9\nDQp9DQo=\n","encoding":"base64"}

