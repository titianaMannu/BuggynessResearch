{"sha":"6003ae0643efc2d07fef417013fbedc73c3ef34b","node_id":"MDQ6QmxvYjIwNjM2NDo2MDAzYWUwNjQzZWZjMmQwN2ZlZjQxNzAxM2ZiZWRjNzNjM2VmMzRi","size":26128,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6003ae0643efc2d07fef417013fbedc73c3ef34b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQ7CgppbXBvcnQgamF2\nYS5pby5TZXJpYWxpemFibGU7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0\nOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0\naWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0\nIGphdmEudXRpbC5MaW5rZWRMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7\nCmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubWV0YS5NZXRhRGF0YURlZmF1bHRzOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5sb2cuTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS51dGlsLkludmFsaWRTdGF0ZUV4Y2VwdGlvbjsKCi8qKgogKiBNYW5h\nZ2VyIHRoYXQgY2FuIGJlIHVzZWQgdG8gdHJhY2sgYW5kIG5vdGlmeSBsaXN0\nZW5lcnMgb24gbGlmZWN5Y2xlIGV2ZW50cy4KICogIFRoaXMgY2xhc3MgaXMg\nb3B0aW1pemVkIGZvciBldmVudCBmaXJpbmcgcmF0aGVyIHRoYW4gZm9yIGFk\nZGluZyBhbmQKICogcmVtb3ZpbmcgbGlzdGVuZXJzLCB3aGljaCBhcmUgTyhu\nKSBvcGVyYXRpb25zLiBUaGlzIGNsYXNzIGFsc28gZG9lcyBub3QKICogbWFp\nbnRhaW4gcGVyZmVjdCBzZXQgc2VtYW50aWNzIGZvciBsaXN0ZW5lcnM7IGl0\nIGlzIHBvc3NpYmxlIHRvIHdpbmQgdXAKICogaGF2aW5nIHRoZSBzYW1lIGxp\nc3RlbmVyIGludm9rZWQgbXVsdGlwbGUgdGltZXMgZm9yIGEgc2luZ2xlIGV2\nZW50IGlmIGl0CiAqIGlzIGFkZGVkIHRvIHRoaXMgbWFuYWdlciBtdWx0aXBs\nZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBjbGFzc2VzLCBvciB3aXRoCiAqIGEg\nYmFzZSBjbGFzcyBhbmQgaXRzIHN1YmNsYXNzLgogKgogKiBAYXV0aG9yIFN0\nZXZlIEtpbQogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAc2luY2UgMC4zLjMK\nICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIExpZmVjeWNsZUV2ZW50\nTWFuYWdlcgogICAgaW1wbGVtZW50cyBDYWxsYmFja01vZGVzLCBTZXJpYWxp\nemFibGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIEV4Y2VwdGlvbltd\nIEVNUFRZX0VYQ0VQVElPTlMgPSBuZXcgRXhjZXB0aW9uWzBdOwoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVy\nLmZvclBhY2thZ2UoCiAgICAgICAgTGlmZWN5Y2xlRXZlbnRNYW5hZ2VyLmNs\nYXNzKTsKCiAgICBwcml2YXRlIE1hcCBfY2xhc3NMaXN0ZW5lcnMgPSBudWxs\nOyAvLyBjbGFzcyAtPiBsaXN0ZW5lciBsaXN0CiAgICBwcml2YXRlIExpc3Rl\nbmVyTGlzdCBfbGlzdGVuZXJzID0gbnVsbDsKICAgIHByaXZhdGUgTGlzdCBf\nYWRkTGlzdGVuZXJzID0gbmV3IExpbmtlZExpc3QoKTsKICAgIHByaXZhdGUg\nTGlzdCBfcmVtTGlzdGVuZXJzID0gbmV3IExpbmtlZExpc3QoKTsKICAgIHBy\naXZhdGUgTGlzdCBfZXhjZXBzID0gbmV3IExpbmtlZExpc3QoKTsKICAgIHBy\naXZhdGUgYm9vbGVhbiBfZmlyaW5nID0gZmFsc2U7CiAgICBwcml2YXRlIGJv\nb2xlYW4gX2ZhaWwgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfZmFp\nbEZhc3QgPSBmYWxzZTsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gZmFp\nbCBhZnRlciBmaXJzdCBleGNlcHRpb24gd2hlbiBmaXJpbmcgZXZlbnRzIHRv\nIGxpc3RlbmVycy4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNGYWls\nRmFzdCgpIHsKICAgICAgICByZXR1cm4gX2ZhaWxGYXN0OwogICAgfQoKICAg\nIC8qKgogICAgICogV2hldGhlciB0byBmYWlsIGFmdGVyIGZpcnN0IGV4Y2Vw\ndGlvbiB3aGVuIGZpcmluZyBldmVudHMgdG8gbGlzdGVuZXJzLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRGYWlsRmFzdChib29sZWFuIGZhaWxGYXN0\nKSB7CiAgICAgICAgX2ZhaWxGYXN0ID0gZmFpbEZhc3Q7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZWdpc3RlciBhIGxpZmVjeWNsZSBsaXN0ZW5lciBmb3Ig\ndGhlIGdpdmVuIGNsYXNzZXMuIElmIHRoZSBjbGFzc2VzCiAgICAgKiBhcnJh\neSBpcyBudWxsLCByZWdpc3RlciBmb3IgYWxsIGNsYXNzZXMuCiAgICAgKi8K\nICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCBhZGRMaXN0ZW5lcihPYmpl\nY3QgbGlzdGVuZXIsIENsYXNzW10gY2xhc3NlcykgewogICAgICAgIGlmIChs\naXN0ZW5lciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAg\naWYgKGNsYXNzZXMgIT0gbnVsbCAmJiBjbGFzc2VzLmxlbmd0aCA9PSAwKQog\nICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKF9maXJpbmcpIHsKICAg\nICAgICAgICAgX2FkZExpc3RlbmVycy5hZGQobGlzdGVuZXIpOwogICAgICAg\nICAgICBfYWRkTGlzdGVuZXJzLmFkZChjbGFzc2VzKTsKICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNsYXNzZXMgPT0gbnVs\nbCkgewogICAgICAgICAgICBpZiAoX2xpc3RlbmVycyA9PSBudWxsKQogICAg\nICAgICAgICAgICAgX2xpc3RlbmVycyA9IG5ldyBMaXN0ZW5lckxpc3QoNSk7\nCiAgICAgICAgICAgIF9saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTsKICAgICAg\nICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKF9jbGFzc0xp\nc3RlbmVycyA9PSBudWxsKQogICAgICAgICAgICBfY2xhc3NMaXN0ZW5lcnMg\nPSBuZXcgSGFzaE1hcCgpOwogICAgICAgIExpc3RlbmVyTGlzdCBsaXN0ZW5l\ncnM7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0\naDsgaSsrKSB7CiAgICAgICAgICAgIGxpc3RlbmVycyA9IChMaXN0ZW5lckxp\nc3QpIF9jbGFzc0xpc3RlbmVycy5nZXQoY2xhc3Nlc1tpXSk7CiAgICAgICAg\nICAgIGlmIChsaXN0ZW5lcnMgPT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nbGlzdGVuZXJzID0gbmV3IExpc3RlbmVyTGlzdCgzKTsKICAgICAgICAgICAg\nICAgIF9jbGFzc0xpc3RlbmVycy5wdXQoY2xhc3Nlc1tpXSwgbGlzdGVuZXJz\nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsaXN0ZW5lcnMuYWRkKGxp\nc3RlbmVyKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1v\ndmUgdGhlIGdpdmVuIGxpc3RlbmVyLgogICAgICovCiAgICBwdWJsaWMgc3lu\nY2hyb25pemVkIHZvaWQgcmVtb3ZlTGlzdGVuZXIoT2JqZWN0IGxpc3RlbmVy\nKSB7CiAgICAgICAgaWYgKF9maXJpbmcpIHsKICAgICAgICAgICAgX3JlbUxp\nc3RlbmVycy5hZGQobGlzdGVuZXIpOwogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgfQoKICAgICAgICBpZiAoX2xpc3RlbmVycyAhPSBudWxsICYmIF9s\naXN0ZW5lcnMucmVtb3ZlKGxpc3RlbmVyKSkKICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgIGlmIChfY2xhc3NMaXN0ZW5lcnMgIT0gbnVsbCkgewogICAg\nICAgICAgICBMaXN0ZW5lckxpc3QgbGlzdGVuZXJzOwogICAgICAgICAgICBm\nb3IgKEl0ZXJhdG9yIGl0ciA9IF9jbGFzc0xpc3RlbmVycy52YWx1ZXMoKS5p\ndGVyYXRvcigpOwogICAgICAgICAgICAgICAgaXRyLmhhc05leHQoKTspIHsK\nICAgICAgICAgICAgICAgIGxpc3RlbmVycyA9IChMaXN0ZW5lckxpc3QpIGl0\nci5uZXh0KCk7CiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMucmVtb3ZlKGxp\nc3RlbmVyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoZXJlIGFyZSBsaXN0ZW5lcnMg\nb3IgY2FsbGJhY2tzIGZvciB0aGUgZ2l2ZW4gc291cmNlLgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBoYXNQZXJzaXN0TGlzdGVuZXJzKE9iamVjdCBz\nb3VyY2UsIENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIHJldHVybiBo\nYXNIYW5kbGVycyhzb3VyY2UsIG1ldGEsIExpZmVjeWNsZUV2ZW50LkJFRk9S\nRV9QRVJTSVNUKQogICAgICAgICAgICB8fCBoYXNIYW5kbGVycyhzb3VyY2Us\nIG1ldGEsIExpZmVjeWNsZUV2ZW50LkFGVEVSX1BFUlNJU1QpCiAgICAgICAg\nICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwKICAgICAgICAgICAg\nICAgIExpZmVjeWNsZUV2ZW50LkFGVEVSX1BFUlNJU1RfUEVSRk9STUVEKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoZXJlIGFy\nZSBsaXN0ZW5lcnMgb3IgY2FsbGJhY2tzIGZvciB0aGUgZ2l2ZW4gc291cmNl\nLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNEZWxldGVMaXN0ZW5l\ncnMoT2JqZWN0IHNvdXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAg\nICAgcmV0dXJuIGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xl\nRXZlbnQuQkVGT1JFX0RFTEVURSkKICAgICAgICAgICAgfHwgaGFzSGFuZGxl\ncnMoc291cmNlLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5BRlRFUl9ERUxFVEUp\nCiAgICAgICAgICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlm\nZWN5Y2xlRXZlbnQuQUZURVJfREVMRVRFX1BFUkZPUk1FRCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGVyZSBhcmUgbGlzdGVu\nZXJzIG9yIGNhbGxiYWNrcyBmb3IgdGhlIGdpdmVuIHNvdXJjZS4KICAgICAq\nLwogICAgcHVibGljIGJvb2xlYW4gaGFzQ2xlYXJMaXN0ZW5lcnMoT2JqZWN0\nIHNvdXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgcmV0dXJu\nIGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQkVG\nT1JFX0NMRUFSKQogICAgICAgICAgICB8fCBoYXNIYW5kbGVycyhzb3VyY2Us\nIG1ldGEsIExpZmVjeWNsZUV2ZW50LkFGVEVSX0NMRUFSKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoZXJlIGFyZSBsaXN0ZW5l\ncnMgb3IgY2FsbGJhY2tzIGZvciB0aGUgZ2l2ZW4gc291cmNlLgogICAgICov\nCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNMb2FkTGlzdGVuZXJzKE9iamVjdCBz\nb3VyY2UsIENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIHJldHVybiBo\nYXNIYW5kbGVycyhzb3VyY2UsIG1ldGEsIExpZmVjeWNsZUV2ZW50LkFGVEVS\nX0xPQUQpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIg\ndGhlcmUgYXJlIGxpc3RlbmVycyBvciBjYWxsYmFja3MgZm9yIHRoZSBnaXZl\nbiBzb3VyY2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGhhc1N0b3Jl\nTGlzdGVuZXJzKE9iamVjdCBzb3VyY2UsIENsYXNzTWV0YURhdGEgbWV0YSkg\newogICAgICAgIHJldHVybiBoYXNIYW5kbGVycyhzb3VyY2UsIG1ldGEsIExp\nZmVjeWNsZUV2ZW50LkJFRk9SRV9TVE9SRSkKICAgICAgICAgICAgfHwgaGFz\nSGFuZGxlcnMoc291cmNlLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5BRlRFUl9T\nVE9SRSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0\naGVyZSBhcmUgbGlzdGVuZXJzIG9yIGNhbGxiYWNrcyBmb3IgdGhlIGdpdmVu\nIHNvdXJjZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaGFzVXBkYXRl\nTGlzdGVuZXJzKE9iamVjdCBzb3VyY2UsIENsYXNzTWV0YURhdGEgbWV0YSkg\newogICAgICAgIHJldHVybiBoYXNIYW5kbGVycyhzb3VyY2UsIG1ldGEsIExp\nZmVjeWNsZUV2ZW50LkJFRk9SRV9VUERBVEUpCiAgICAgICAgICAgIHx8IGhh\nc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQUZURVJf\nVVBEQVRFX1BFUkZPUk1FRCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm4gd2hldGhlciB0aGVyZSBhcmUgbGlzdGVuZXJzIG9yIGNhbGxiYWNrcyBm\nb3IgdGhlIGdpdmVuIHNvdXJjZS4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gaGFzRGlydHlMaXN0ZW5lcnMoT2JqZWN0IHNvdXJjZSwgQ2xhc3NNZXRh\nRGF0YSBtZXRhKSB7CiAgICAgICAgcmV0dXJuIGhhc0hhbmRsZXJzKHNvdXJj\nZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0RJUlRZKQogICAgICAg\nICAgICB8fCBoYXNIYW5kbGVycyhzb3VyY2UsIG1ldGEsIExpZmVjeWNsZUV2\nZW50LkFGVEVSX0RJUlRZKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiB3aGV0aGVyIHRoZXJlIGFyZSBsaXN0ZW5lcnMgb3IgY2FsbGJhY2tzIGZv\nciB0aGUgZ2l2ZW4gc291cmNlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVh\nbiBoYXNEZXRhY2hMaXN0ZW5lcnMoT2JqZWN0IHNvdXJjZSwgQ2xhc3NNZXRh\nRGF0YSBtZXRhKSB7CiAgICAgICAgcmV0dXJuIGhhc0hhbmRsZXJzKHNvdXJj\nZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0RFVEFDSCkKICAgICAg\nICAgICAgfHwgaGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLCBMaWZlY3ljbGVF\ndmVudC5BRlRFUl9ERVRBQ0gpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHdoZXRoZXIgdGhlcmUgYXJlIGxpc3RlbmVycyBvciBjYWxsYmFja3Mg\nZm9yIHRoZSBnaXZlbiBzb3VyY2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29s\nZWFuIGhhc0F0dGFjaExpc3RlbmVycyhPYmplY3Qgc291cmNlLCBDbGFzc01l\ndGFEYXRhIG1ldGEpIHsKICAgICAgICByZXR1cm4gaGFzSGFuZGxlcnMoc291\ncmNlLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfQVRUQUNIKQogICAg\nICAgICAgICB8fCBoYXNIYW5kbGVycyhzb3VyY2UsIG1ldGEsIExpZmVjeWNs\nZUV2ZW50LkFGVEVSX0FUVEFDSCk7CiAgICB9CgogICAgcHJpdmF0ZSBib29s\nZWFuIGhhc0hhbmRsZXJzKE9iamVjdCBzb3VyY2UsIENsYXNzTWV0YURhdGEg\nbWV0YSwgaW50IHR5cGUpIHsKICAgICAgICByZXR1cm4gaGFzQ2FsbGJhY2tz\nKHNvdXJjZSwgbWV0YSwgdHlwZSkKICAgICAgICAgICAgfHwgaGFzTGlzdGVu\nZXJzKHNvdXJjZSwgbWV0YSwgdHlwZSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gdHJ1ZSBpZiBhbnkgY2FsbGJhY2tzIGFyZSByZWdpc3RlcmVk\nIGZvciB0aGUgZ2l2ZW4gc291cmNlIGFuZAogICAgICogZXZlbnQgdHlwZS4K\nICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGhhc0NhbGxiYWNrcyhPYmpl\nY3Qgc291cmNlLCBDbGFzc01ldGFEYXRhIG1ldGEsIGludCB0eXBlKSB7CiAg\nICAgICAgTGlmZWN5Y2xlQ2FsbGJhY2tzW10gY2FsbGJhY2tzID0gbWV0YS5n\nZXRMaWZlY3ljbGVNZXRhRGF0YSgpLgogICAgICAgICAgICBnZXRDYWxsYmFj\na3ModHlwZSk7CiAgICAgICAgaWYgKGNhbGxiYWNrcy5sZW5ndGggPT0gMCkK\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBp\nZiAoY2FsbGJhY2tzW2ldLmhhc0NhbGxiYWNrKHNvdXJjZSwgdHlwZSkpCiAg\nICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBhbnkg\nbGlzdGVuZXJzIGFyZSByZWdpc3RlcmVkIGZvciB0aGUgZ2l2ZW4gc291cmNl\nIGFuZAogICAgICogZXZlbnQgdHlwZS4KICAgICAqLwogICAgcHJpdmF0ZSBz\neW5jaHJvbml6ZWQgYm9vbGVhbiBoYXNMaXN0ZW5lcnMoT2JqZWN0IHNvdXJj\nZSwKICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEsIGludCB0eXBlKSB7CiAg\nICAgICAgaWYgKG1ldGEuZ2V0TGlmZWN5Y2xlTWV0YURhdGEoKS5nZXRJZ25v\ncmVTeXN0ZW1MaXN0ZW5lcnMoKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgIGlmIChmaXJlRXZlbnQobnVsbCwgc291cmNlLCBudWxsLCB0\neXBlLCBfbGlzdGVuZXJzLCB0cnVlLCBudWxsKSAKICAgICAgICAgICAgPT0g\nQm9vbGVhbi5UUlVFKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg\nICBMaXN0ZW5lckxpc3Qgc3lzdGVtID0gbWV0YS5nZXRSZXBvc2l0b3J5KCku\nZ2V0U3lzdGVtTGlzdGVuZXJzKCk7CiAgICAgICAgaWYgKCFzeXN0ZW0uaXNF\nbXB0eSgpICYmIGZpcmVFdmVudChudWxsLCBzb3VyY2UsIG51bGwsIHR5cGUs\nIHN5c3RlbSwKICAgICAgICAgICAgdHJ1ZSwgbnVsbCkgPT0gQm9vbGVhbi5U\nUlVFKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAoX2Ns\nYXNzTGlzdGVuZXJzICE9IG51bGwpIHsKICAgICAgICAgICAgQ2xhc3MgYyA9\nIHNvdXJjZSA9PSBudWxsID8gbWV0YS5nZXREZXNjcmliZWRUeXBlKCkgOgog\nICAgICAgICAgICAgICAgc291cmNlLmdldENsYXNzKCk7CiAgICAgICAgICAg\nIGRvIHsKICAgICAgICAgICAgICAgIGlmIChmaXJlRXZlbnQobnVsbCwgc291\ncmNlLCBudWxsLCB0eXBlLCAoTGlzdGVuZXJMaXN0KQogICAgICAgICAgICAg\nICAgICAgIF9jbGFzc0xpc3RlbmVycy5nZXQoYyksIHRydWUsIG51bGwpID09\nIEJvb2xlYW4uVFJVRSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICAgICAgICAgIGMgPSBjLmdldFN1cGVyY2xhc3MoKTsKICAg\nICAgICAgICAgfSB3aGlsZSAoYyAhPSBudWxsICYmIGMgIT0gT2JqZWN0LmNs\nYXNzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoK\nICAgIC8qKgogICAgICogRmlyZSBsaWZlY3ljbGUgZXZlbnQgdG8gYWxsIHJl\nZ2lzdGVyZWQgbGlzdGVuZXJzIHdpdGhvdXQgYW4gYXJndW1lbnQuCiAgICAg\nKi8KICAgIHB1YmxpYyBFeGNlcHRpb25bXSBmaXJlRXZlbnQoT2JqZWN0IHNv\ndXJjZSwKICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEsIGludCB0eXBlKSB7\nCiAgICAgICAgcmV0dXJuIGZpcmVFdmVudChzb3VyY2UsIG51bGwsIG1ldGEs\nIHR5cGUpOwogICAgfQoKICAgIC8qKgogICAgICogRmlyZSBsaWZlY3ljbGUg\nZXZlbnQgdG8gYWxsIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLgogICAgICovCiAg\nICBwdWJsaWMgc3luY2hyb25pemVkIEV4Y2VwdGlvbltdIGZpcmVFdmVudChP\nYmplY3Qgc291cmNlLCBPYmplY3QgcmVsYXRlZCwKICAgICAgICBDbGFzc01l\ndGFEYXRhIG1ldGEsIGludCB0eXBlKSB7CiAgICAgICAgYm9vbGVhbiByZWVu\ndHJhbnQgPSBfZmlyaW5nOwogICAgICAgIF9maXJpbmcgPSB0cnVlOwogICAg\nICAgIExpc3QgZXhjZXB0aW9ucyA9IChyZWVudHJhbnQpID8gbmV3IExpbmtl\nZExpc3QoKSA6IF9leGNlcHM7CiAgICAgICAgTWV0YURhdGFEZWZhdWx0cyBk\nZWYgPSBtZXRhLmdldFJlcG9zaXRvcnkoKS5nZXRNZXRhRGF0YUZhY3Rvcnko\nKS4KICAgICAgICAgICAgZ2V0RGVmYXVsdHMoKTsKCiAgICAgICAgYm9vbGVh\nbiBjYWxsYmFja3MgPSBkZWYuZ2V0Q2FsbGJhY2tzQmVmb3JlTGlzdGVuZXJz\nKHR5cGUpOwogICAgICAgIGlmIChjYWxsYmFja3MpCiAgICAgICAgICAgIG1h\na2VDYWxsYmFja3Moc291cmNlLCByZWxhdGVkLCBtZXRhLCB0eXBlLCBleGNl\ncHRpb25zKTsKCiAgICAgICAgTGlmZWN5Y2xlRXZlbnQgZXYgPSAoTGlmZWN5\nY2xlRXZlbnQpIGZpcmVFdmVudChudWxsLCBzb3VyY2UsIHJlbGF0ZWQsCiAg\nICAgICAgICAgIHR5cGUsIF9saXN0ZW5lcnMsIGZhbHNlLCBleGNlcHRpb25z\nKTsKCiAgICAgICAgaWYgKF9jbGFzc0xpc3RlbmVycyAhPSBudWxsKSB7CiAg\nICAgICAgICAgIENsYXNzIGMgPSBzb3VyY2UgPT0gbnVsbCA/IG1ldGEuZ2V0\nRGVzY3JpYmVkVHlwZSgpIDoKICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRD\nbGFzcygpOwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICBldiA9\nIChMaWZlY3ljbGVFdmVudCkgZmlyZUV2ZW50KGV2LCBzb3VyY2UsIHJlbGF0\nZWQsIHR5cGUsCiAgICAgICAgICAgICAgICAgICAgKExpc3RlbmVyTGlzdCkg\nX2NsYXNzTGlzdGVuZXJzLmdldChjKSwgZmFsc2UsIGV4Y2VwdGlvbnMpOwog\nICAgICAgICAgICAgICAgYyA9IGMuZ2V0U3VwZXJjbGFzcygpOwogICAgICAg\nICAgICB9IHdoaWxlIChjICE9IG51bGwgJiYgYyAhPSBPYmplY3QuY2xhc3Mp\nOwogICAgICAgIH0KCiAgICAgICAgLy8gbWFrZSBzeXN0ZW0gbGlzdGVuZXJz\nCiAgICAgICAgaWYgKCFtZXRhLmdldExpZmVjeWNsZU1ldGFEYXRhKCkuZ2V0\nSWdub3JlU3lzdGVtTGlzdGVuZXJzKCkpIHsKICAgICAgICAgICAgTGlzdGVu\nZXJMaXN0IHN5c3RlbSA9IG1ldGEuZ2V0UmVwb3NpdG9yeSgpLmdldFN5c3Rl\nbUxpc3RlbmVycygpOwogICAgICAgICAgICBmaXJlRXZlbnQoZXYsIHNvdXJj\nZSwgcmVsYXRlZCwgdHlwZSwgc3lzdGVtLCBmYWxzZSwgZXhjZXB0aW9ucyk7\nCiAgICAgICAgfQoKICAgICAgICBpZiAoIWNhbGxiYWNrcykKICAgICAgICAg\nICAgbWFrZUNhbGxiYWNrcyhzb3VyY2UsIHJlbGF0ZWQsIG1ldGEsIHR5cGUs\nIGV4Y2VwdGlvbnMpOwoKICAgICAgICAvLyBjcmVhdGUgcmV0dXJuIGFycmF5\nIGJlZm9yZSBjbGVhcmluZyBleGNlcHRpb25zCiAgICAgICAgRXhjZXB0aW9u\nW10gcmV0OwogICAgICAgIGlmIChleGNlcHRpb25zLmlzRW1wdHkoKSkKICAg\nICAgICAgICAgcmV0ID0gRU1QVFlfRVhDRVBUSU9OUzsKICAgICAgICBlbHNl\nCiAgICAgICAgICAgIHJldCA9IChFeGNlcHRpb25bXSkgZXhjZXB0aW9ucy50\nb0FycmF5CiAgICAgICAgICAgICAgICAobmV3IEV4Y2VwdGlvbltleGNlcHRp\nb25zLnNpemUoKV0pOwoKICAgICAgICAvLyBpZiB0aGlzIHdhc24ndCBhIHJl\nZW50cmFudCBjYWxsLCBjYXRjaCB1cCB3aXRoIGNhbGxzIHRvIGFkZAogICAg\nICAgIC8vIGFuZCByZW1vdmUgbGlzdGVuZXJzIG1hZGUgd2hpbGUgZmlyaW5n\nCiAgICAgICAgaWYgKCFyZWVudHJhbnQpIHsKICAgICAgICAgICAgX2Zpcmlu\nZyA9IGZhbHNlOwogICAgICAgICAgICBfZmFpbCA9IGZhbHNlOwogICAgICAg\nICAgICBpZiAoIV9hZGRMaXN0ZW5lcnMuaXNFbXB0eSgpKQogICAgICAgICAg\nICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBfYWRkTGlzdGVuZXJzLml0ZXJh\ndG9yKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICAgICAgICAgIGFk\nZExpc3RlbmVyKGl0ci5uZXh0KCksIChDbGFzc1tdKSBpdHIubmV4dCgpKTsK\nICAgICAgICAgICAgaWYgKCFfcmVtTGlzdGVuZXJzLmlzRW1wdHkoKSkKICAg\nICAgICAgICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gX3JlbUxpc3RlbmVy\ncy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykKICAgICAgICAgICAgICAg\nICAgICByZW1vdmVMaXN0ZW5lcihpdHIubmV4dCgpKTsKICAgICAgICAgICAg\nX2FkZExpc3RlbmVycy5jbGVhcigpOwogICAgICAgICAgICBfcmVtTGlzdGVu\nZXJzLmNsZWFyKCk7CiAgICAgICAgICAgIF9leGNlcHMuY2xlYXIoKTsKICAg\nICAgICB9CiAgICAgICAgcmV0dXJuIHJldDsKICAgIH0KCiAgICAvKioKICAg\nICAqIE1ha2UgY2FsbGJhY2tzLCByZWNvcmRpbmcgYW55IGV4Y2VwdGlvbnMg\naW4gdGhlIGdpdmVuIGNvbGxlY3Rpb24uCiAgICAgKi8KICAgIHByaXZhdGUg\ndm9pZCBtYWtlQ2FsbGJhY2tzKE9iamVjdCBzb3VyY2UsIE9iamVjdCByZWxh\ndGVkLAogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSwgaW50IHR5cGUsIENv\nbGxlY3Rpb24gZXhjZXB0aW9ucykgewogICAgICAgIC8vIG1ha2UgbGlmZWN5\nY2xlIGNhbGxiYWNrcwogICAgICAgIExpZmVjeWNsZUNhbGxiYWNrc1tdIGNh\nbGxiYWNrcyA9IG1ldGEuZ2V0TGlmZWN5Y2xlTWV0YURhdGEoKS4KICAgICAg\nICAgICAgZ2V0Q2FsbGJhY2tzKHR5cGUpOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyAhX2ZhaWwgJiYgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykgewog\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY2FsbGJhY2tzW2ld\nLm1ha2VDYWxsYmFjayhzb3VyY2UsIHJlbGF0ZWQsIHR5cGUpOwogICAgICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAg\nZXhjZXB0aW9ucy5hZGQoZSk7CiAgICAgICAgICAgICAgICBpZiAoX2ZhaWxG\nYXN0KQogICAgICAgICAgICAgICAgICAgIF9mYWlsID0gdHJ1ZTsKICAgICAg\nICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEZpcmUg\nYW4gZXZlbnQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCB0eXBlIHRvIHRo\nZSBnaXZlbiBsaXN0IG9mCiAgICAgKiBsaXN0ZW5lcnMuIFRoZSBldmVudCBt\nYXkgaGF2ZSBhbHJlYWR5IGJlZW4gY29uc3RydWN0ZWQuCiAgICAgKi8KICAg\nIHByaXZhdGUgT2JqZWN0IGZpcmVFdmVudChMaWZlY3ljbGVFdmVudCBldiwg\nT2JqZWN0IHNvdXJjZSwgT2JqZWN0IHJlbCwKICAgICAgICBpbnQgdHlwZSwg\nTGlzdGVuZXJMaXN0IGxpc3RlbmVycywgYm9vbGVhbiBtb2NrLCBMaXN0IGV4\nY2VwdGlvbnMpIHsKICAgICAgICBpZiAobGlzdGVuZXJzID09IG51bGwgfHwg\nIWxpc3RlbmVycy5oYXNMaXN0ZW5lcnModHlwZSkpCiAgICAgICAgICAgIHJl\ndHVybiBudWxsOwoKICAgICAgICBPYmplY3QgbGlzdGVuZXI7CiAgICAgICAg\nYm9vbGVhbiByZXNwb25kczsKICAgICAgICBmb3IgKGludCBpID0gMCwgc2l6\nZSA9IGxpc3RlbmVycy5zaXplKCk7ICFfZmFpbCAmJiBpIDwgc2l6ZTsgaSsr\nKSB7CiAgICAgICAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXJzLmdldChpKTsK\nICAgICAgICAgICAgaWYgKHNpemUgPT0gMSkKICAgICAgICAgICAgICAgIHJl\nc3BvbmRzID0gdHJ1ZTsKICAgICAgICAgICAgZWxzZSBpZiAobGlzdGVuZXIg\naW5zdGFuY2VvZiBMaXN0ZW5lckFkYXB0ZXIpIHsKICAgICAgICAgICAgICAg\nIHJlc3BvbmRzID0gKChMaXN0ZW5lckFkYXB0ZXIpIGxpc3RlbmVyKS5yZXNw\nb25kc1RvKHR5cGUpOwogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25kcykK\nICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfSBl\nbHNlCiAgICAgICAgICAgICAgICByZXNwb25kcyA9IGZhbHNlOwoKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewog\nICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQkVGT1JF\nX0NMRUFSOgogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZl\nbnQuQUZURVJfQ0xFQVI6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChy\nZXNwb25kcyB8fCBsaXN0ZW5lciBpbnN0YW5jZW9mIENsZWFyTGlzdGVuZXIp\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2NrKQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuLlRS\nVUU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXYgPT0gbnVs\nbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldiA9IG5ldyBM\naWZlY3ljbGVFdmVudChzb3VyY2UsIHR5cGUpOwogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgaWYgKHR5cGUgPT0gTGlmZWN5Y2xlRXZlbnQuQkVGT1JF\nX0NMRUFSKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoQ2xl\nYXJMaXN0ZW5lcikgbGlzdGVuZXIpLmJlZm9yZUNsZWFyKGV2KTsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAoKENsZWFyTGlzdGVuZXIpIGxpc3RlbmVyKS5hZnRl\nckNsZWFyKGV2KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBj\nYXNlIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9QRVJTSVNUOgogICAgICAgICAg\nICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQUZURVJfUEVSU0lTVDoK\nICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbmRzIHx8IGxpc3Rl\nbmVyIGluc3RhbmNlb2YgUGVyc2lzdExpc3RlbmVyKSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBpZiAobW9jaykKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbi5UUlVFOwogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgaWYgKGV2ID09IG51bGwpCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgZXYgPSBuZXcgTGlmZWN5Y2xlRXZlbnQo\nc291cmNlLCB0eXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlm\nICh0eXBlID09IExpZmVjeWNsZUV2ZW50LkJFRk9SRV9QRVJTSVNUKQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoUGVyc2lzdExpc3RlbmVy\nKSBsaXN0ZW5lcikuYmVmb3JlUGVyc2lzdChldik7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgKChQZXJzaXN0TGlzdGVuZXIpIGxpc3RlbmVyKS5hZnRlclBlcnNp\nc3QoZXYpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2Ug\nTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0RFTEVURToKICAgICAgICAgICAgICAg\nICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkFGVEVSX0RFTEVURToKICAgICAg\nICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbmRzIHx8IGxpc3RlbmVyIGlu\nc3RhbmNlb2YgRGVsZXRlTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGlmIChtb2NrKQogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIHJldHVybiBCb29sZWFuLlRSVUU7CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBpZiAoZXYgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBldiA9IG5ldyBMaWZlY3ljbGVFdmVudChzb3VyY2Us\nIHR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUg\nPT0gTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0RFTEVURSkKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAoKERlbGV0ZUxpc3RlbmVyKSBsaXN0ZW5l\ncikuYmVmb3JlRGVsZXRlKGV2KTsKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKERl\nbGV0ZUxpc3RlbmVyKSBsaXN0ZW5lcikuYWZ0ZXJEZWxldGUoZXYpOwogICAg\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZl\nbnQuQkVGT1JFX0RJUlRZOgogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlm\nZWN5Y2xlRXZlbnQuQUZURVJfRElSVFk6CiAgICAgICAgICAgICAgICAgICAg\nY2FzZSBMaWZlY3ljbGVFdmVudC5CRUZPUkVfRElSVFlfRkxVU0hFRDoKICAg\nICAgICAgICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkFGVEVSX0RJ\nUlRZX0ZMVVNIRUQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNw\nb25kcyB8fCBsaXN0ZW5lciBpbnN0YW5jZW9mIERpcnR5TGlzdGVuZXIpIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2NrKQogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuLlRSVUU7\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXYgPT0gbnVsbCkK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldiA9IG5ldyBMaWZl\nY3ljbGVFdmVudChzb3VyY2UsIHR5cGUpOwogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5CRUZPUkVfRElSVFk6\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoRGlydHlM\naXN0ZW5lcikgbGlzdGVuZXIpLmJlZm9yZURpcnR5KGV2KTsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRF\nUl9ESVJUWToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nKChEaXJ0eUxpc3RlbmVyKSBsaXN0ZW5lcikuYWZ0ZXJEaXJ0eShldik7CiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZl\nbnQuQkVGT1JFX0RJUlRZX0ZMVVNIRUQ6CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICgoRGlydHlMaXN0ZW5lcikgbGlzdGVuZXIpCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmVmb3Jl\nRGlydHlGbHVzaGVkKGV2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRFUl9ESVJUWV9GTFVTSEVEOgog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKERpcnR5TGlz\ndGVuZXIpIGxpc3RlbmVyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgLmFmdGVyRGlydHlGbHVzaGVkKGV2KTsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAg\nICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRFUl9MT0FEOgogICAgICAg\nICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQUZURVJfUkVGUkVT\nSDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbmRzIHx8IGxp\nc3RlbmVyIGluc3RhbmNlb2YgTG9hZExpc3RlbmVyKSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBpZiAobW9jaykKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbi5UUlVFOwogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgaWYgKGV2ID09IG51bGwpCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgZXYgPSBuZXcgTGlmZWN5Y2xlRXZlbnQo\nc291cmNlLCB0eXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlm\nICh0eXBlID09IExpZmVjeWNsZUV2ZW50LkFGVEVSX0xPQUQpCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKChMb2FkTGlzdGVuZXIpIGxpc3Rl\nbmVyKS5hZnRlckxvYWQoZXYpOwogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoTG9h\nZExpc3RlbmVyKSBsaXN0ZW5lcikuYWZ0ZXJSZWZyZXNoKGV2KTsKICAgICAg\nICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50\nLkJFRk9SRV9TVE9SRToKICAgICAgICAgICAgICAgICAgICBjYXNlIExpZmVj\neWNsZUV2ZW50LkFGVEVSX1NUT1JFOgogICAgICAgICAgICAgICAgICAgICAg\nICBpZiAocmVzcG9uZHMgfHwgbGlzdGVuZXIgaW5zdGFuY2VvZiBTdG9yZUxp\nc3RlbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9j\naykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQm9v\nbGVhbi5UUlVFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2\nID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYg\nPSBuZXcgTGlmZWN5Y2xlRXZlbnQoc291cmNlLCB0eXBlKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09IExpZmVjeWNsZUV2ZW50\nLkJFRk9SRV9TVE9SRSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAoKFN0b3JlTGlzdGVuZXIpIGxpc3RlbmVyKS5iZWZvcmVTdG9yZShldik7\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgKChTdG9yZUxpc3RlbmVyKSBsaXN0ZW5l\ncikuYWZ0ZXJTdG9yZShldik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAg\nICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5CRUZPUkVfREVUQUNIOgogICAg\nICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQUZURVJfREVU\nQUNIOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uZHMgfHwg\nbGlzdGVuZXIgaW5zdGFuY2VvZiBEZXRhY2hMaXN0ZW5lcikgewogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgaWYgKG1vY2spCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4uVFJVRTsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGlmIChldiA9PSBudWxsKQogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGV2ID0gbmV3IExpZmVjeWNsZUV2\nZW50KHNvdXJjZSwgcmVsLCB0eXBlKTsKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGlmICh0eXBlID09IExpZmVjeWNsZUV2ZW50LkJFRk9SRV9ERVRB\nQ0gpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChEZXRhY2hM\naXN0ZW5lcikgbGlzdGVuZXIpLmJlZm9yZURldGFjaChldik7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgKChEZXRhY2hMaXN0ZW5lcikgbGlzdGVuZXIpLmFmdGVy\nRGV0YWNoKGV2KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBj\nYXNlIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9BVFRBQ0g6CiAgICAgICAgICAg\nICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRFUl9BVFRBQ0g6CiAg\nICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25kcyB8fCBsaXN0ZW5l\nciBpbnN0YW5jZW9mIEF0dGFjaExpc3RlbmVyKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBpZiAobW9jaykKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICByZXR1cm4gQm9vbGVhbi5UUlVFOwogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgaWYgKGV2ID09IG51bGwpCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgZXYgPSBuZXcgTGlmZWN5Y2xlRXZlbnQoc291\ncmNlLCByZWwsIHR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAg\naWYgKHR5cGUgPT0gTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0FUVEFDSCkKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKEF0dGFjaExpc3RlbmVy\nKSBsaXN0ZW5lcikuYmVmb3JlQXR0YWNoKGV2KTsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAoKEF0dGFjaExpc3RlbmVyKSBsaXN0ZW5lcikuYWZ0ZXJBdHRhY2go\nZXYpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIExp\nZmVjeWNsZUV2ZW50LkFGVEVSX1BFUlNJU1RfUEVSRk9STUVEOgogICAgICAg\nICAgICAgICAgICAgICAgICBpZiAocmVzcG9uZHMgfHwgbGlzdGVuZXIgaW5z\ndGFuY2VvZiBQb3N0UGVyc2lzdExpc3RlbmVyKQogICAgICAgICAgICAgICAg\nICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9j\naykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQm9v\nbGVhbi5UUlVFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2\nID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYg\nPSBuZXcgTGlmZWN5Y2xlRXZlbnQoc291cmNlLCByZWwsIHR5cGUpOwogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKChQb3N0UGVyc2lzdExpc3RlbmVy\nKSBsaXN0ZW5lcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAu\nYWZ0ZXJQZXJzaXN0UGVyZm9ybWVkKGV2KTsKICAgICAgICAgICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9VUERB\nVEU6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5B\nRlRFUl9VUERBVEVfUEVSRk9STUVEOgogICAgICAgICAgICAgICAgICAgICAg\nICBpZiAocmVzcG9uZHMgfHwgbGlzdGVuZXIgaW5zdGFuY2VvZiBVcGRhdGVM\naXN0ZW5lcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1v\nY2spCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJv\nb2xlYW4uVFJVRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChl\ndiA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2\nID0gbmV3IExpZmVjeWNsZUV2ZW50KHNvdXJjZSwgcmVsLCB0eXBlKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09IExpZmVjeWNs\nZUV2ZW50LkJFRk9SRV9VUERBVEUpCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgKChVcGRhdGVMaXN0ZW5lcikgbGlzdGVuZXIpLmJlZm9yZVVw\nZGF0ZShldik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChVcGRhdGVMaXN0ZW5l\ncikgbGlzdGVuZXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC5hZnRlclVwZGF0ZVBlcmZvcm1lZChldik7CiAgICAgICAgICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRFUl9E\nRUxFVEVfUEVSRk9STUVEOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAo\ncmVzcG9uZHMgfHwgbGlzdGVuZXIgaW5zdGFuY2VvZiBQb3N0RGVsZXRlTGlz\ndGVuZXIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vY2sp\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xl\nYW4uVFJVRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldiA9\nPSBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ID0g\nbmV3IExpZmVjeWNsZUV2ZW50KHNvdXJjZSwgcmVsLCB0eXBlKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICgoUG9zdERlbGV0ZUxpc3RlbmVyKSBs\naXN0ZW5lcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWZ0\nZXJEZWxldGVQZXJmb3JtZWQoZXYpOwogICAgICAgICAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHRo\ncm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBfbG9jLmdldCgidW5rbm93bi1saWZlY3ljbGUtZXZl\nbnQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEludGVnZXIu\ndG9TdHJpbmcodHlwZSkpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgfQogICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgICAgIGV4Y2VwdGlvbnMuYWRkKGUpOwogICAgICAgICAgICAgICAg\naWYgKF9mYWlsRmFzdCkKICAgICAgICAgICAgICAgICAgICBfZmFpbCA9IHRy\ndWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGV2\nOwogICAgfQoKICAgIC8qKgogICAgICogSW50ZXJmYWNlIHRoYXQgZmFjYWRl\ncyB0byBvdGhlciBsaWZlY3ljbGUgbGlzdGVuZXIgaW50ZXJmYWNlcyBjYW4K\nICAgICAqIGltcGxlbWVudCB0byBjaG9vc2Ugd2hpY2ggZXZlbnRzIHRvIHJl\nc3BvbmQgdG8gYmFzZWQgb24gdGhlaXIgZGVsZWdhdGUuCiAgICAgKiBUaGlz\nIGlzIG1vcmUgZWZmaWNpZW50IHRoYW4gcmVnaXN0ZXJpbmcgYXMgYSBsaXN0\nZW5lciBmb3IgYWxsIGV2ZW50cwogICAgICogYnV0IG9ubHkgcmVzcG9uZGlu\nZyB0byBzb21lLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGludGVyZmFj\nZSBMaXN0ZW5lckFkYXB0ZXIgewoKICAgICAgICAvKioKICAgICAgICAgKiBS\nZXR1cm4gd2hldGhlciB0aGlzIGluc3RhbmNlIHJlc3BvbmRzIHRvIHRoZSBn\naXZlbiBldmVudCB0eXBlIGZyb20KICAgICAgICAgKiB7QGxpbmsgTGlmZWN5\nY2xlRXZlbnR9LgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBib29sZWFu\nIHJlc3BvbmRzVG8oaW50IGV2ZW50VHlwZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBFeHRlbmRlZCBsaXN0IHRoYXQgdHJhY2tzIHdoYXQgZXZlbnQgdHlw\nZXMgaXRzIGVsZW1lbnRzIGNhcmUgYWJvdXQuCiAgICAgKiBNYWludGFpbnMg\nc2V0IHNlbWFudGljcyBhcyB3ZWxsLgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIGNsYXNzIExpc3RlbmVyTGlzdAogICAgICAgIGV4dGVuZHMgQXJyYXlM\naXN0IHsKCiAgICAgICAgcHJpdmF0ZSBpbnQgX3R5cGVzID0gMDsKCiAgICAg\nICAgcHVibGljIExpc3RlbmVyTGlzdChpbnQgc2l6ZSkgewogICAgICAgICAg\nICBzdXBlcihzaXplKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBMaXN0\nZW5lckxpc3QoTGlzdGVuZXJMaXN0IGNvcHkpIHsKICAgICAgICAgICAgc3Vw\nZXIoY29weSk7CiAgICAgICAgICAgIF90eXBlcyA9IGNvcHkuX3R5cGVzOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaGFzTGlzdGVuZXJz\nKGludCB0eXBlKSB7CiAgICAgICAgICAgIHJldHVybiAoX3R5cGVzICYgKDIg\nPDwgdHlwZSkpID4gMDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29s\nZWFuIGFkZChPYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICAgICAgaWYgKGNv\nbnRhaW5zKGxpc3RlbmVyKSkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxz\nZTsKICAgICAgICAgICAgc3VwZXIuYWRkKGxpc3RlbmVyKTsKICAgICAgICAg\nICAgX3R5cGVzIHw9IGdldEV2ZW50VHlwZXMobGlzdGVuZXIpOwogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBi\nb29sZWFuIHJlbW92ZShPYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICAgICAg\naWYgKCFzdXBlci5yZW1vdmUobGlzdGVuZXIpKQogICAgICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgLy8gcmVjb21wdXRlIHR5cGVz\nIG1hc2sKICAgICAgICAgICAgX3R5cGVzID0gMDsKICAgICAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBzaXplKCk7IGkrKykKICAgICAgICAgICAgICAg\nIF90eXBlcyB8PSBnZXRFdmVudFR5cGVzKGdldChpKSk7CiAgICAgICAgICAg\nIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAg\nICogUmV0dXJuIGEgbWFzayBvZiB0aGUgZXZlbnQgdHlwZXMgdGhlIGdpdmVu\nIGxpc3RlbmVyIHByb2Nlc3Nlcy4KICAgICAgICAgKi8KICAgICAgICBwcml2\nYXRlIHN0YXRpYyBpbnQgZ2V0RXZlbnRUeXBlcyhPYmplY3QgbGlzdGVuZXIp\nIHsKICAgICAgICAgICAgaW50IHR5cGVzID0gMDsKICAgICAgICAgICAgaWYg\nKGxpc3RlbmVyIGluc3RhbmNlb2YgTGlzdGVuZXJBZGFwdGVyKSB7CiAgICAg\nICAgICAgICAgICBMaXN0ZW5lckFkYXB0ZXIgYWRhcHRlciA9IChMaXN0ZW5l\nckFkYXB0ZXIpIGxpc3RlbmVyOwogICAgICAgICAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBMaWZlY3ljbGVFdmVudC5BTExfRVZFTlRTLmxlbmd0aDsg\naSsrKQogICAgICAgICAgICAgICAgICAgIGlmIChhZGFwdGVyLnJlc3BvbmRz\nVG8oTGlmZWN5Y2xlRXZlbnQuQUxMX0VWRU5UU1tpXSkpCiAgICAgICAgICAg\nICAgICAgICAgICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQUxM\nX0VWRU5UU1tpXTsKICAgICAgICAgICAgICAgIHJldHVybiB0eXBlczsKICAg\nICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGxpc3RlbmVyIGluc3RhbmNl\nb2YgUGVyc2lzdExpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICB0eXBlcyB8\nPSAyIDw8IExpZmVjeWNsZUV2ZW50LkJFRk9SRV9QRVJTSVNUOwogICAgICAg\nICAgICAgICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5BRlRFUl9Q\nRVJTSVNUOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChsaXN0ZW5l\nciBpbnN0YW5jZW9mIENsZWFyTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAg\nIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0NMRUFSOwog\nICAgICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5B\nRlRFUl9DTEVBUjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobGlz\ndGVuZXIgaW5zdGFuY2VvZiBEZWxldGVMaXN0ZW5lcikgewogICAgICAgICAg\nICAgICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfREVM\nRVRFOwogICAgICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVF\ndmVudC5BRlRFUl9ERUxFVEU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\naWYgKGxpc3RlbmVyIGluc3RhbmNlb2YgRGlydHlMaXN0ZW5lcikgewogICAg\nICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5CRUZP\nUkVfRElSVFk7CiAgICAgICAgICAgICAgICB0eXBlcyB8PSAyIDw8IExpZmVj\neWNsZUV2ZW50LkFGVEVSX0RJUlRZOwogICAgICAgICAgICAgICAgdHlwZXMg\nfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfRElSVFlfRkxVU0hFRDsK\nICAgICAgICAgICAgICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQu\nQUZURVJfRElSVFlfRkxVU0hFRDsKICAgICAgICAgICAgfQogICAgICAgICAg\nICBpZiAobGlzdGVuZXIgaW5zdGFuY2VvZiBMb2FkTGlzdGVuZXIpIHsKICAg\nICAgICAgICAgICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQUZU\nRVJfTE9BRDsKICAgICAgICAgICAgICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5\nY2xlRXZlbnQuQUZURVJfUkVGUkVTSDsKICAgICAgICAgICAgfQogICAgICAg\nICAgICBpZiAobGlzdGVuZXIgaW5zdGFuY2VvZiBTdG9yZUxpc3RlbmVyKSB7\nCiAgICAgICAgICAgICAgICB0eXBlcyB8PSAyIDw8IExpZmVjeWNsZUV2ZW50\nLkJFRk9SRV9TVE9SRTsKICAgICAgICAgICAgICAgIHR5cGVzIHw9IDIgPDwg\nTGlmZWN5Y2xlRXZlbnQuQUZURVJfU1RPUkU7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgaWYgKGxpc3RlbmVyIGluc3RhbmNlb2YgRGV0YWNoTGlzdGVu\nZXIpIHsKICAgICAgICAgICAgICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xl\nRXZlbnQuQkVGT1JFX0RFVEFDSDsKICAgICAgICAgICAgICAgIHR5cGVzIHw9\nIDIgPDwgTGlmZWN5Y2xlRXZlbnQuQUZURVJfREVUQUNIOwogICAgICAgICAg\nICB9CiAgICAgICAgICAgIGlmIChsaXN0ZW5lciBpbnN0YW5jZW9mIEF0dGFj\naExpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICB0eXBlcyB8PSAyIDw8IExp\nZmVjeWNsZUV2ZW50LkJFRk9SRV9BVFRBQ0g7CiAgICAgICAgICAgICAgICB0\neXBlcyB8PSAyIDw8IExpZmVjeWNsZUV2ZW50LkFGVEVSX0FUVEFDSDsKCQkJ\nfQoJCQlyZXR1cm4gdHlwZXM7CgkJfQoJfQp9Cg==\n","encoding":"base64"}

