{"sha":"5476ee05ded870358111d5a614290f3b3e30e2ac","node_id":"MDQ6QmxvYjIwNjM2NDo1NDc2ZWUwNWRlZDg3MDM1ODExMWQ1YTYxNDI5MGYzYjNlMzBlMmFj","size":29773,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5476ee05ded870358111d5a614290f3b3e30e2ac","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsOw0KDQppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsNCmltcG9y\ndCBqYXZhLmlvLk9iamVjdE91dHB1dDsNCmltcG9ydCBqYXZhLmlvLlNlcmlh\nbGl6YWJsZTsNCmltcG9ydCBqYXZhLnV0aWwuQml0U2V0Ow0KaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uOw0KaW1wb3J0IGphdmEudXRpbC5NYXA7DQoN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QZXJzaXN0ZW5j\nZUNhcGFibGU7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2Uu\nU3RhdGVNYW5hZ2VyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5Mb2NhbGl6ZXI7DQppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQu\nbG9ja3MuUmVlbnRyYW50TG9jazsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5DbGFzc01ldGFEYXRhOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkZpZWxkTWV0YURhdGE7DQppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLm1ldGEuSmF2YVR5cGVzOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLlZhbHVlTWV0YURhdGE7DQppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuRXhjZXB0aW9uczsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEudXRpbC5Qcm94eTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5JbXBsSGVscGVyOw0KDQovKioNCiAqIEludGVybmFs\nIHN0YXRlIG1hbmFnZXIgZm9yIGRldGFjaGVkIGluc3RhbmNlcy4gRG9lcyBu\nb3QgZnVsbHkNCiAqIGltcGxlbWVudCB7QGxpbmsgT3BlbkpQQVN0YXRlTWFu\nYWdlcn0gY29udHJhY3QgdG8gYWxsb3cgZm9yIHNlcmlhbGl6YXRpb24uDQog\nKg0KICogQGF1dGhvciBTdGV2ZSBLaW0NCiAqIEBub2phdmFkb2MNCiAqLw0K\ncHVibGljIGNsYXNzIERldGFjaGVkU3RhdGVNYW5hZ2VyDQogICAgZXh0ZW5k\ncyBBdHRhY2hTdHJhdGVneQ0KICAgIGltcGxlbWVudHMgT3BlbkpQQVN0YXRl\nTWFuYWdlciwgU2VyaWFsaXphYmxlIHsNCg0KICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDQxMTIyMjM2NjU1ODQ3\nMzExMDBMOw0KDQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVy\nIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQ0KICAgICAgICAoRGV0YWNo\nZWRTdGF0ZU1hbmFnZXIuY2xhc3MpOw0KDQogICAgcHJpdmF0ZSBmaW5hbCBQ\nZXJzaXN0ZW5jZUNhcGFibGUgX3BjOw0KICAgIHByaXZhdGUgZmluYWwgYm9v\nbGVhbiBfZW1iZWRkZWQ7DQogICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9h\nY2Nlc3M7DQogICAgcHJpdmF0ZSBmaW5hbCBCaXRTZXQgX2xvYWRlZDsNCiAg\nICBwcml2YXRlIGZpbmFsIEJpdFNldCBfZGlydHk7DQogICAgcHJpdmF0ZSBm\naW5hbCBPYmplY3QgX29pZDsNCiAgICBwcml2YXRlIGZpbmFsIE9iamVjdCBf\ndmVyc2lvbjsNCiAgICBwcml2YXRlIGZpbmFsIFJlZW50cmFudExvY2sgX2xv\nY2s7DQoNCiAgICAvKioNCiAgICAgKiBDb25zdHJ1Y3Rvci4NCiAgICAgKg0K\nICAgICAqIEBwYXJhbSBwYyB0aGUgbWFuYWdlZCBpbnN0YW5jZQ0KICAgICAq\nIEBwYXJhbSBzbSB0aGUgaW5zdGFuY2UncyBzdGF0ZSBtYW5hZ2VyDQogICAg\nICogQHBhcmFtIGxvYWQgdGhlIHNldCBvZiBkZXRhY2hlZCBmaWVsZCBpbmRl\neGVzDQogICAgICogQHBhcmFtIGFjY2VzcyB3aGV0aGVyIHRvIGFsbG93IGFj\nY2VzcyB0byB1bmxvYWRlZCBmaWVsZHMNCiAgICAgKiBAcGFyYW0gbXVsdGl0\naHJlYWRlZCB3aGV0aGVyIHRoZSBpbnN0YW5jZSB3aWxsIGJlIHVzZWQgY29u\nY3VycmVudGx5DQogICAgICogYnkgbXVsdGlwbGUgdGhyZWFkcw0KICAgICAq\nLw0KICAgIHB1YmxpYyBEZXRhY2hlZFN0YXRlTWFuYWdlcihQZXJzaXN0ZW5j\nZUNhcGFibGUgcGMsIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sDQogICAgICAg\nIEJpdFNldCBsb2FkLCBib29sZWFuIGFjY2VzcywgYm9vbGVhbiBtdWx0aXRo\ncmVhZGVkKSB7DQogICAgICAgIF9wYyA9IHBjOw0KICAgICAgICBfZW1iZWRk\nZWQgPSBzbS5pc0VtYmVkZGVkKCk7DQogICAgICAgIF9sb2FkZWQgPSBsb2Fk\nOw0KICAgICAgICBfYWNjZXNzID0gYWNjZXNzOw0KICAgICAgICBfZGlydHkg\nPSBuZXcgQml0U2V0KF9sb2FkZWQubGVuZ3RoKCkpOw0KICAgICAgICBfb2lk\nID0gc20uZmV0Y2hPYmplY3RJZCgpOw0KICAgICAgICBfdmVyc2lvbiA9IHNt\nLmdldFZlcnNpb24oKTsNCiAgICAgICAgaWYgKG11bHRpdGhyZWFkZWQpDQog\nICAgICAgICAgICBfbG9jayA9IG5ldyBSZWVudHJhbnRMb2NrKCk7DQogICAg\nICAgIGVsc2UNCiAgICAgICAgICAgIF9sb2NrID0gbnVsbDsNCiAgICB9DQoN\nCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgICAv\nLyBBdHRhY2hTdHJhdGVneSBpbXBsZW1lbnRhdGlvbg0KICAgIC8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KDQogICAgcHVibGljIE9iamVj\ndCBhdHRhY2goQXR0YWNoTWFuYWdlciBtYW5hZ2VyLCBPYmplY3QgdG9BdHRh\nY2gsDQogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSwgUGVyc2lzdGVuY2VD\nYXBhYmxlIGludG8sIE9wZW5KUEFTdGF0ZU1hbmFnZXIgb3duZXIsDQogICAg\nICAgIFZhbHVlTWV0YURhdGEgb3duZXJNZXRhLCBib29sZWFuIGV4cGxpY2l0\nKSB7DQogICAgICAgIEJyb2tlckltcGwgYnJva2VyID0gbWFuYWdlci5nZXRC\ncm9rZXIoKTsNCiAgICAgICAgU3RhdGVNYW5hZ2VySW1wbCBzbTsNCiAgICAg\nICAgaWYgKF9lbWJlZGRlZCkgew0KICAgICAgICAgICAgaWYgKF9kaXJ0eS5s\nZW5ndGggKCkgPiAwKQ0KICAgICAgICAgICAgICAgIG93bmVyLmRpcnR5KG93\nbmVyTWV0YS5nZXRGaWVsZE1ldGFEYXRhKCkuZ2V0SW5kZXgoKSk7DQogICAg\nICAgICAgICBzbSA9IChTdGF0ZU1hbmFnZXJJbXBsKSBicm9rZXIuZW1iZWQo\nX3BjLCBfb2lkLCBvd25lciwgb3duZXJNZXRhKTsNCiAgICAgICAgICAgIElt\ncGxIZWxwZXIudG9QZXJzaXN0ZW5jZUNhcGFibGUodG9BdHRhY2gsIGJyb2tl\nci5nZXRDb25maWd1cmF0aW9uKCkpDQogICAgICAgICAgICAgICAgLnBjUmVw\nbGFjZVN0YXRlTWFuYWdlcih0aGlzKTsNCiAgICAgICAgfSBlbHNlIHsNCiAg\nICAgICAgICAgIFBDU3RhdGUgc3RhdGUgPSAoX2RpcnR5Lmxlbmd0aCgpID4g\nMCkgPyBQQ1N0YXRlLlBESVJUWQ0KICAgICAgICAgICAgICAgIDogUENTdGF0\nZS5QQ0xFQU47DQogICAgICAgICAgICBzbSA9IChTdGF0ZU1hbmFnZXJJbXBs\nKSBicm9rZXIuY29weSh0aGlzLCBzdGF0ZSk7DQogICAgICAgIH0NCiAgICAg\nICAgUGVyc2lzdGVuY2VDYXBhYmxlIHBjID0gc20uZ2V0UGVyc2lzdGVuY2VD\nYXBhYmxlKCk7DQogICAgICAgIG1hbmFnZXIuc2V0QXR0YWNoZWRDb3B5KHRv\nQXR0YWNoLCBwYyk7DQoNCiAgICAgICAgbWFuYWdlci5maXJlQmVmb3JlQXR0\nYWNoKHRvQXR0YWNoLCBtZXRhKTsNCg0KICAgICAgICAvLyBwcmUtbG9hZCBm\nb3IgZWZmaWNpZW5jeTogY3VycmVudCBmaWVsZCB2YWx1ZXMgZm9yIHJlc3Rv\ncmUsIGRlcGVuZGVudA0KICAgICAgICAvLyBmb3IgZGVsZXRlDQogICAgICAg\nIEZpZWxkTWV0YURhdGFbXSBmaWVsZHMgPSBtZXRhLmdldEZpZWxkcygpOw0K\nICAgICAgICBpbnQgcmVzdG9yZSA9IGJyb2tlci5nZXRSZXN0b3JlU3RhdGUo\nKTsNCiAgICAgICAgaWYgKF9kaXJ0eS5sZW5ndGgoKSA+IDApIHsNCiAgICAg\nICAgICAgIEJpdFNldCBsb2FkID0gbmV3IEJpdFNldChmaWVsZHMubGVuZ3Ro\nKTsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGRzLmxl\nbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKCFfZGlydHkuZ2V0\nKGkpKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCg0KICAgICAg\nICAgICAgICAgIHN3aXRjaCAoZmllbGRzW2ldLmdldERlY2xhcmVkVHlwZUNv\nZGUoKSkgew0KICAgICAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5B\nUlJBWToNCiAgICAgICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ09M\nTEVDVElPTjoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN0b3Jl\nID09IFJlc3RvcmVTdGF0ZS5SRVNUT1JFX0FMTA0KICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIHx8IGZpZWxkc1tpXS5nZXRFbGVtZW50KCkuZ2V0Q2Fz\nY2FkZURlbGV0ZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPT0g\nVmFsdWVNZXRhRGF0YS5DQVNDQURFX0FVVE8pDQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgbG9hZC5zZXQoaSk7DQogICAgICAgICAgICAgICAgICAg\nICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuTUFQOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3RvcmUg\nPT0gUmVzdG9yZVN0YXRlLlJFU1RPUkVfQUxMDQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgfHwgZmllbGRzW2ldLmdldEVsZW1lbnQoKS5nZXRDYXNj\nYWRlRGVsZXRlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PSBW\nYWx1ZU1ldGFEYXRhLkNBU0NBREVfQVVUTw0KICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIHx8IGZpZWxkc1tpXS5nZXRLZXkoKS5nZXRDYXNjYWRlRGVs\nZXRlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PSBWYWx1ZU1l\ndGFEYXRhLkNBU0NBREVfQVVUTykNCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBsb2FkLnNldChpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJy\nZWFrOw0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAg\nICAgICAgICAgICAgICAgaWYgKHJlc3RvcmUgIT0gUmVzdG9yZVN0YXRlLlJF\nU1RPUkVfTk9ORQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IGZp\nZWxkc1tpXS5nZXRDYXNjYWRlRGVsZXRlKCkNCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICA9PSBWYWx1ZU1ldGFEYXRhLkNBU0NBREVfQVVUTykNCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkLnNldChpKTsNCiAgICAg\nICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBGZXRj\naENvbmZpZ3VyYXRpb24gZmMgPSBicm9rZXIuZ2V0RmV0Y2hDb25maWd1cmF0\naW9uKCk7DQogICAgICAgICAgICBzbS5sb2FkRmllbGRzKGxvYWQsIGZjLCBm\nYy5nZXRXcml0ZUxvY2tMZXZlbCgpLCBudWxsKTsNCiAgICAgICAgfSAgICAg\nICAgDQogICAgICAgIE9iamVjdCBvcmlnVmVyc2lvbiA9IHNtLmdldFZlcnNp\nb24oKTsNCiAgICAgICAgc20uc2V0VmVyc2lvbihfdmVyc2lvbik7DQoNCiAg\nICAgICAgQml0U2V0IGxvYWRlZCA9IHNtLmdldExvYWRlZCgpOw0KICAgICAg\nICBpbnQgc2V0ID0gU3RhdGVNYW5hZ2VyLlNFVF9BVFRBQ0g7DQogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7DQog\nICAgICAgICAgICBpZiAoIV9sb2FkZWQuZ2V0KGkpKQ0KICAgICAgICAgICAg\nICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgLy8gZG9uJ3QgcmVsb2FkIGFs\ncmVhZHkgbG9hZGVkIG5vbi1tdXRhYmxlIG9iamVjdHMNCiAgICAgICAgICAg\nIGlmICghX2RpcnR5LmdldChpKSAmJiBsb2FkZWQuZ2V0KGkpICYmIGlnbm9y\nZUxvYWRlZChmaWVsZHNbaV0pKQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVl\nOw0KDQogICAgICAgICAgICBwcm92aWRlRmllbGQoaSk7DQogICAgICAgICAg\nICBzd2l0Y2ggKGZpZWxkc1tpXS5nZXREZWNsYXJlZFR5cGVDb2RlKCkpIHsN\nCiAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOOg0KICAg\nICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkNCiAgICAgICAg\nICAgICAgICAgICAgICAgIHNtLnNldHRpbmdCb29sZWFuRmllbGQocGMsIGks\nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGxvYWRlZC5nZXQoaSkp\nICYmIHNtLmZldGNoQm9vbGVhbkZpZWxkKGkpLA0KICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGxvbmd2YWwgPT0gMSwgc2V0KTsNCiAgICAgICAgICAg\nICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc20uc3Rv\ncmVCb29sZWFuRmllbGQoaSwgbG9uZ3ZhbCA9PSAxKTsNCiAgICAgICAgICAg\nICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuQllURToNCiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaXJ0eS5nZXQo\naSkpDQogICAgICAgICAgICAgICAgICAgICAgICBzbS5zZXR0aW5nQnl0ZUZp\nZWxkKHBjLCBpLCAoIWxvYWRlZC5nZXQoaSkpID8gKGJ5dGUpIDANCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICA6IHNtLmZldGNoQnl0ZUZpZWxkKGkp\nLCAoYnl0ZSkgbG9uZ3ZhbCwgc2V0KTsNCiAgICAgICAgICAgICAgICAgICAg\nZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgc20uc3RvcmVCeXRlRmll\nbGQoaSwgKGJ5dGUpIGxvbmd2YWwpOw0KICAgICAgICAgICAgICAgICAgICBi\ncmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DSEFSOg0K\nICAgICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkNCiAgICAg\nICAgICAgICAgICAgICAgICAgIHNtLnNldHRpbmdDaGFyRmllbGQocGMsIGks\nICghbG9hZGVkLmdldChpKSkgPyAoY2hhcikgMA0KICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIDogc20uZmV0Y2hDaGFyRmllbGQoaSksIChjaGFyKSBs\nb25ndmFsLCBzZXQpOw0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAg\nICAgICAgICAgICAgICAgICAgICBzbS5zdG9yZUNoYXJGaWVsZChpLCAoY2hh\ncikgbG9uZ3ZhbCk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAg\nICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVDoNCiAgICAgICAgICAg\nICAgICAgICAgaWYgKF9kaXJ0eS5nZXQoaSkpDQogICAgICAgICAgICAgICAg\nICAgICAgICBzbS5zZXR0aW5nSW50RmllbGQocGMsIGksICghbG9hZGVkLmdl\ndChpKSkgPyAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzbS5m\nZXRjaEludEZpZWxkKGkpLCAoaW50KSBsb25ndmFsLCBzZXQpOw0KICAgICAg\nICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBz\nbS5zdG9yZUludEZpZWxkKGksIChpbnQpIGxvbmd2YWwpOw0KICAgICAgICAg\nICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5MT05HOg0KICAgICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5Lmdl\ndChpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNtLnNldHRpbmdMb25n\nRmllbGQocGMsIGksICghbG9hZGVkLmdldChpKSkgPyAwTA0KICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIDogc20uZmV0Y2hMb25nRmllbGQoaSksIGxv\nbmd2YWwsIHNldCk7DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAg\nICAgICAgICAgICAgICAgICAgIHNtLnN0b3JlTG9uZ0ZpZWxkKGksIGxvbmd2\nYWwpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAg\nICAgICBjYXNlIEphdmFUeXBlcy5TSE9SVDoNCiAgICAgICAgICAgICAgICAg\nICAgaWYgKF9kaXJ0eS5nZXQoaSkpDQogICAgICAgICAgICAgICAgICAgICAg\nICBzbS5zZXR0aW5nU2hvcnRGaWVsZChwYywgaSwgKCFsb2FkZWQuZ2V0KGkp\nKSA/IChzaG9ydCkgMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDog\nc20uZmV0Y2hTaG9ydEZpZWxkKGkpLCAoc2hvcnQpIGxvbmd2YWwsIHNldCk7\nDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAg\nICAgICAgIHNtLnN0b3JlU2hvcnRGaWVsZChpLCAoc2hvcnQpIGxvbmd2YWwp\nOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAg\nICBjYXNlIEphdmFUeXBlcy5GTE9BVDoNCiAgICAgICAgICAgICAgICAgICAg\naWYgKF9kaXJ0eS5nZXQoaSkpDQogICAgICAgICAgICAgICAgICAgICAgICBz\nbS5zZXR0aW5nRmxvYXRGaWVsZChwYywgaSwgKCFsb2FkZWQuZ2V0KGkpKSA/\nIDBGDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzbS5mZXRjaEZs\nb2F0RmllbGQoaSksIChmbG9hdCkgZGJsdmFsLCBzZXQpOw0KICAgICAgICAg\nICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBzbS5z\ndG9yZUZsb2F0RmllbGQoaSwgKGZsb2F0KSBkYmx2YWwpOw0KICAgICAgICAg\nICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5ET1VCTEU6DQogICAgICAgICAgICAgICAgICAgIGlmIChfZGlydHku\nZ2V0KGkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc20uc2V0dGluZ0Rv\ndWJsZUZpZWxkKHBjLCBpLCAoIWxvYWRlZC5nZXQoaSkpID8gMEQNCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICA6IHNtLmZldGNoRG91YmxlRmllbGQo\naSksIGRibHZhbCwgc2V0KTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0K\nICAgICAgICAgICAgICAgICAgICAgICAgc20uc3RvcmVEb3VibGVGaWVsZChp\nLCBkYmx2YWwpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAg\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5TVFJJTkc6DQogICAgICAgICAg\nICAgICAgICAgIGlmIChfZGlydHkuZ2V0KGkpKQ0KICAgICAgICAgICAgICAg\nICAgICAgICAgc20uc2V0dGluZ1N0cmluZ0ZpZWxkKHBjLCBpLCAoIWxvYWRl\nZC5nZXQoaSkpID8gbnVsbA0KICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIDogc20uZmV0Y2hTdHJpbmdGaWVsZChpKSwgKFN0cmluZykgb2JqdmFsLCBz\nZXQpOw0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAg\nICAgICAgICAgICBzbS5zdG9yZVN0cmluZ0ZpZWxkKGksIChTdHJpbmcpIG9i\nanZhbCk7DQogICAgICAgICAgICAgICAgICAgIG9ianZhbCA9IG51bGw7DQog\nICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLlBDOg0KICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLlBDX1VOVFlQRUQ6DQogICAgICAgICAgICAgICAgICAgIGlmIChmaWVs\nZHNbaV0uZ2V0Q2FzY2FkZUF0dGFjaCgpID09IFZhbHVlTWV0YURhdGENCiAg\nICAgICAgICAgICAgICAgICAgICAgIC5DQVNDQURFX05PTkUpDQogICAgICAg\nICAgICAgICAgICAgICAgICBvYmp2YWwgPSBnZXRSZWZlcmVuY2UobWFuYWdl\nciwgb2JqdmFsLCBzbSwgZmllbGRzW2ldKTsNCiAgICAgICAgICAgICAgICAg\nICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBQZXJzaXN0ZW5j\nZUNhcGFibGUgdG9QQyA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAg\nICBpZiAob2JqdmFsICE9IG51bGwgJiYgZmllbGRzW2ldLmlzRW1iZWRkZWRQ\nQygpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvUEMgPSBJbXBs\nSGVscGVyLnRvUGVyc2lzdGVuY2VDYXBhYmxlKG9ianZhbCwNCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgYnJva2VyLmdldENvbmZpZ3VyYXRp\nb24oKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBvYmp2YWwgPSBtYW5h\nZ2VyLmF0dGFjaChvYmp2YWwsIHRvUEMsIHNtLCBmaWVsZHNbaV0sDQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UpOw0KICAgICAgICAgICAg\nICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChfZGlydHkuZ2V0\nKGkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc20uc2V0dGluZ09iamVj\ndEZpZWxkKHBjLCBpLCAoIWxvYWRlZC5nZXQoaSkpID8gbnVsbA0KICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIDogc20uZmV0Y2hPYmplY3RGaWVsZChp\nKSwgb2JqdmFsLCBzZXQpOw0KICAgICAgICAgICAgICAgICAgICBlbHNlDQog\nICAgICAgICAgICAgICAgICAgICAgICBzbS5zdG9yZU9iamVjdEZpZWxkKGks\nIG9ianZhbCk7DQogICAgICAgICAgICAgICAgICAgIG9ianZhbCA9IG51bGw7\nDQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkNPTExFQ1RJT046DQogICAgICAgICAgICAgICAg\nICAgIENvbGxlY3Rpb24gY29sbCA9IChDb2xsZWN0aW9uKSBvYmp2YWw7DQog\nICAgICAgICAgICAgICAgICAgIG9ianZhbCA9IG51bGw7DQogICAgICAgICAg\nICAgICAgICAgIGlmIChjb2xsICE9IG51bGwpDQogICAgICAgICAgICAgICAg\nICAgICAgICBjb2xsID0gYXR0YWNoQ29sbGVjdGlvbihtYW5hZ2VyLCBjb2xs\nLCBzbSwgZmllbGRzW2ldKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKF9k\naXJ0eS5nZXQoaSkpDQogICAgICAgICAgICAgICAgICAgICAgICBzbS5zZXR0\naW5nT2JqZWN0RmllbGQocGMsIGksICghbG9hZGVkLmdldChpKSkgPyBudWxs\nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzbS5mZXRjaE9iamVj\ndEZpZWxkKGkpLCBjb2xsLCBzZXQpOw0KICAgICAgICAgICAgICAgICAgICBl\nbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBzbS5zdG9yZU9iamVjdEZp\nZWxkKGksIGNvbGwpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAg\nICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5NQVA6DQogICAgICAgICAg\nICAgICAgICAgIE1hcCBtYXAgPSAoTWFwKSBvYmp2YWw7DQogICAgICAgICAg\nICAgICAgICAgIG9ianZhbCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAg\nIGlmIChtYXAgIT0gbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIG1h\ncCA9IGF0dGFjaE1hcChtYW5hZ2VyLCBtYXAsIHNtLCBmaWVsZHNbaV0pOw0K\nICAgICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkNCiAgICAg\nICAgICAgICAgICAgICAgICAgIHNtLnNldHRpbmdPYmplY3RGaWVsZChwYywg\naSwgKCFsb2FkZWQuZ2V0KGkpKSA/IG51bGwNCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICA6IHNtLmZldGNoT2JqZWN0RmllbGQoaSksIG1hcCwgc2V0\nKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAg\nICAgICAgICAgc20uc3RvcmVPYmplY3RGaWVsZChpLCBtYXApOw0KICAgICAg\nICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0\nOg0KICAgICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkNCiAg\nICAgICAgICAgICAgICAgICAgICAgIHNtLnNldHRpbmdPYmplY3RGaWVsZChw\nYywgaSwgKCFsb2FkZWQuZ2V0KGkpKSA/IG51bGwNCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICA6IHNtLmZldGNoT2JqZWN0RmllbGQoaSksIG9ianZh\nbCwgc2V0KTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAg\nICAgICAgICAgICAgICAgc20uc3RvcmVPYmplY3RGaWVsZChpLCBvYmp2YWwp\nOw0KICAgICAgICAgICAgICAgICAgICBvYmp2YWwgPSBudWxsOw0KICAgICAg\nICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHBjLnBjUmVwbGFjZVN0YXRl\nTWFuYWdlcihzbSk7DQoNCiAgICAgICAgLy8gaWYgd2Ugd2VyZSBjbGVhbiBh\ndCBsZWFzdCBtYWtlIHN1cmUgYSB2ZXJzaW9uIGNoZWNrIGlzIGRvbmUgdG8N\nCiAgICAgICAgLy8gcHJldmVudCB1c2luZyBvbGQgc3RhdGUNCiAgICAgICAg\naWYgKCFzbS5pc1ZlcnNpb25DaGVja1JlcXVpcmVkKCkgJiYgYnJva2VyLmlz\nQWN0aXZlKCkNCiAgICAgICAgICAgICYmIF92ZXJzaW9uICE9IG9yaWdWZXJz\naW9uICYmIChvcmlnVmVyc2lvbiA9PSBudWxsIA0KICAgICAgICAgICAgfHwg\nYnJva2VyLmdldFN0b3JlTWFuYWdlcigpLmNvbXBhcmVWZXJzaW9uKHNtLCBf\ndmVyc2lvbiwgDQogICAgICAgICAgICBvcmlnVmVyc2lvbikgIT0gU3RvcmVN\nYW5hZ2VyLlZFUlNJT05fU0FNRSkpIHsNCiAgICAgICAgICAgIGJyb2tlci50\ncmFuc2FjdGlvbmFsKHNtLmdldE1hbmFnZWRJbnN0YW5jZSgpLCBmYWxzZSwg\nDQogICAgICAgICAgICAgICAgbWFuYWdlci5nZXRCZWhhdmlvcigpKTsNCiAg\nICAgICAgfQ0KDQogICAgICAgIHJldHVybiBzbS5nZXRNYW5hZ2VkSW5zdGFu\nY2UoKTsNCiAgICB9DQoNCiAgICBwcm90ZWN0ZWQgT2JqZWN0IGdldERldGFj\naGVkT2JqZWN0SWQoQXR0YWNoTWFuYWdlciBtYW5hZ2VyLA0KICAgICAgICBP\nYmplY3QgdG9BdHRhY2gpIHsNCiAgICAgICAgcmV0dXJuIF9vaWQ7DQogICAg\nfQ0KDQogICAgdm9pZCBwcm92aWRlRmllbGQoaW50IGZpZWxkKSB7DQogICAg\nICAgIF9wYy5wY1Byb3ZpZGVGaWVsZChmaWVsZCk7DQogICAgfQ0KDQogICAg\ncHJvdGVjdGVkIHZvaWQgcHJvdmlkZUZpZWxkKE9iamVjdCB0b0F0dGFjaCwg\nU3RhdGVNYW5hZ2VySW1wbCBzbSwNCiAgICAgICAgaW50IGZpZWxkKSB7DQog\nICAgICAgIHByb3ZpZGVGaWVsZChmaWVsZCk7DQogICAgfQ0KDQogICAgLyoq\nDQogICAgICogSWdub3JlIGlmIHRoZSBmaWVsZCBpcyBub3QgZGlydHkgYnV0\nIGxvYWRlZA0KICAgICAqLw0KICAgIHByb3RlY3RlZCBzdGF0aWMgYm9vbGVh\nbiBpZ25vcmVMb2FkZWQoRmllbGRNZXRhRGF0YSBmbWQpIHsNCiAgICAgICAg\nc3dpdGNoIChmbWQuZ2V0VHlwZUNvZGUoKSkgew0KICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuQk9PTEVBTjoNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkJPT0xFQU5fT0JKOg0KICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQllURToNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJZVEVfT0JKOg0K\nICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UOg0KICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuSU5UX09CSjoNCiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLkxPTkc6DQogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5MT05H\nX09CSjoNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNIT1JUOg0KICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hPUlRfT0JKOg0KICAgICAgICAg\nICAgY2FzZSBKYXZhVHlwZXMuRE9VQkxFOg0KICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuRE9VQkxFX09CSjoNCiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkZMT0FUOg0KICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRkxPQVRf\nT0JKOg0KICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ0hBUjoNCiAgICAg\nICAgICAgIGNhc2UgSmF2YVR5cGVzLkNIQVJfT0JKOg0KICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuU1RSSU5HOg0KICAgICAgICAgICAgICAgIHJldHVy\nbiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAg\nICB9DQoNCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQog\nICAgLy8gU3RhdGVNYW5hZ2VyIGltcGxlbWVudGF0aW9uDQogICAgLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KDQogICAgcHVibGljIE9iamVj\ndCBnZXRHZW5lcmljQ29udGV4dCgpIHsNCiAgICAgICAgcmV0dXJuIG51bGw7\nDQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBnZXRQQ1ByaW1hcnlLZXko\nT2JqZWN0IG9pZCwgaW50IGZpZWxkKSB7DQogICAgICAgIHRocm93IG5ldyBV\nbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyBTdGF0ZU1hbmFnZXIgcmVwbGFjZVN0YXRlTWFuYWdlcihTdGF0\nZU1hbmFnZXIgc20pIHsNCiAgICAgICAgcmV0dXJuIHNtOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyBPYmplY3QgZ2V0VmVyc2lvbigpIHsNCiAgICAgICAgcmV0\ndXJuIF92ZXJzaW9uOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldFZl\ncnNpb24oT2JqZWN0IHZlcnNpb24pIHsNCiAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIGJv\nb2xlYW4gaXNEaXJ0eSgpIHsNCiAgICAgICAgcmV0dXJuIF9kaXJ0eS5sZW5n\ndGgoKSAhPSAwOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzVHJh\nbnNhY3Rpb25hbCgpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyBib29sZWFuIGlzUGVyc2lzdGVudCgpIHsNCiAgICAg\nICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFu\nIGlzTmV3KCkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQog\nICAgcHVibGljIGJvb2xlYW4gaXNEZWxldGVkKCkgew0KICAgICAgICByZXR1\ncm4gZmFsc2U7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNEZXRh\nY2hlZCgpIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAg\ncHVibGljIGJvb2xlYW4gaXNWZXJzaW9uVXBkYXRlUmVxdWlyZWQoKSB7DQog\nICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc1ZlcnNpb25DaGVja1JlcXVpcmVkKCkgew0KICAgICAgICByZXR1\ncm4gZmFsc2U7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgZGlydHkoU3Ry\naW5nIGZpZWxkKSB7DQogICAgICAgIC8vIHNob3VsZCB3ZSBzdG9yZSBDbGFz\nc01ldGFEYXRhPw0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRFeGNl\ncHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0IGZldGNoT2Jq\nZWN0SWQoKSB7DQogICAgICAgIHJldHVybiBfb2lkOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyB2b2lkIGFjY2Vzc2luZ0ZpZWxkKGludCBpZHgpIHsNCiAgICAg\nICAgaWYgKCFfYWNjZXNzICYmICFfbG9hZGVkLmdldChpZHgpKQ0KICAgICAg\nICAJLy8gZG8gbm90IGFjY2VzcyB0aGUgcGMgZmllbGRzIGJ5IGltcGxpY3Rs\neSBpbnZva2luZyBfcGMudG9TdHJpbmcoKQ0KICAgICAgICAJLy8gbWF5IGNh\ndXNlIGluZmluaXRlIGxvb3AgaWYgYWdhaW4gdHJpZXMgdG8gYWNjZXNzIHVu\nbG9hZGVkIGZpZWxkIA0KICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxT\ndGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgidW5sb2FkZWQtZGV0YWNoZWQiLA0K\nICAgICAgICAgICAgICAgRXhjZXB0aW9ucy50b1N0cmluZyhfcGMpKS5nZXRN\nZXNzYWdlKCkpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIHNlcmlh\nbGl6aW5nKCkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQog\nICAgcHVibGljIGJvb2xlYW4gd3JpdGVEZXRhY2hlZChPYmplY3RPdXRwdXQg\nb3V0KQ0KICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBv\ndXQud3JpdGVPYmplY3QoX3BjLnBjR2V0RGV0YWNoZWRTdGF0ZSgpKTsNCiAg\nICAgICAgb3V0LndyaXRlT2JqZWN0KHRoaXMpOw0KICAgICAgICByZXR1cm4g\nZmFsc2U7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgcHJveHlEZXRhY2hl\nZERlc2VyaWFsaXplZChpbnQgaWR4KSB7DQogICAgICAgIGxvY2soKTsNCiAg\nICAgICAgdHJ5IHsNCiAgICAgICAgICAgIF9wYy5wY1Byb3ZpZGVGaWVsZChp\nZHgpOw0KICAgICAgICAgICAgaWYgKG9ianZhbCBpbnN0YW5jZW9mIFByb3h5\nKQ0KICAgICAgICAgICAgICAgICgoUHJveHkpIG9ianZhbCkuc2V0T3duZXIo\ndGhpcywgaWR4KTsNCiAgICAgICAgICAgIG9ianZhbCA9IG51bGw7DQogICAg\nICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICB1bmxvY2soKTsNCiAgICAg\nICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldHRpbmdCb29sZWFu\nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LA0KICAgICAg\nICBib29sZWFuIGN1ciwgYm9vbGVhbiBuZXh0LCBpbnQgc2V0KSB7DQogICAg\nICAgIGFjY2Vzc2luZ0ZpZWxkKGlkeCk7DQogICAgICAgIGlmIChjdXIgPT0g\nbmV4dCB8fCAhX2xvYWRlZC5nZXQoaWR4KSkNCiAgICAgICAgICAgIHJldHVy\nbjsNCiAgICAgICAgbG9jaygpOw0KICAgICAgICB0cnkgew0KICAgICAgICAg\nICAgX2RpcnR5LnNldChpZHgpOw0KICAgICAgICAgICAgbG9uZ3ZhbCA9IG5l\neHQgPyAxIDogMDsNCiAgICAgICAgICAgIHBjLnBjUmVwbGFjZUZpZWxkKGlk\neCk7DQogICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICB1bmxvY2so\nKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldHRp\nbmdDaGFyRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBj\naGFyIGN1ciwNCiAgICAgICAgY2hhciBuZXh0LCBpbnQgc2V0KSB7DQogICAg\nICAgIGFjY2Vzc2luZ0ZpZWxkKGlkeCk7DQogICAgICAgIGlmIChjdXIgPT0g\nbmV4dCB8fCAhX2xvYWRlZC5nZXQoaWR4KSkNCiAgICAgICAgICAgIHJldHVy\nbjsNCiAgICAgICAgbG9jaygpOw0KICAgICAgICB0cnkgew0KICAgICAgICAg\nICAgX2RpcnR5LnNldChpZHgpOw0KICAgICAgICAgICAgbG9uZ3ZhbCA9IG5l\neHQ7DQogICAgICAgICAgICBwYy5wY1JlcGxhY2VGaWVsZChpZHgpOw0KICAg\nICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgdW5sb2NrKCk7DQogICAg\nICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBzZXR0aW5nQnl0ZUZp\nZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwgYnl0ZSBjdXIs\nDQogICAgICAgIGJ5dGUgbmV4dCwgaW50IHNldCkgew0KICAgICAgICBhY2Nl\nc3NpbmdGaWVsZChpZHgpOw0KICAgICAgICBpZiAoY3VyID09IG5leHQgfHwg\nIV9sb2FkZWQuZ2V0KGlkeCkpDQogICAgICAgICAgICByZXR1cm47DQogICAg\nICAgIGxvY2soKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIF9kaXJ0\neS5zZXQoaWR4KTsNCiAgICAgICAgICAgIGxvbmd2YWwgPSBuZXh0Ow0KICAg\nICAgICAgICAgcGMucGNSZXBsYWNlRmllbGQoaWR4KTsNCiAgICAgICAgfSBm\naW5hbGx5IHsNCiAgICAgICAgICAgIHVubG9jaygpOw0KICAgICAgICB9DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0dGluZ1Nob3J0RmllbGQoUGVy\nc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBzaG9ydCBjdXIsDQogICAg\nICAgIHNob3J0IG5leHQsIGludCBzZXQpIHsNCiAgICAgICAgYWNjZXNzaW5n\nRmllbGQoaWR4KTsNCiAgICAgICAgaWYgKGN1ciA9PSBuZXh0IHx8ICFfbG9h\nZGVkLmdldChpZHgpKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBs\nb2NrKCk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBfZGlydHkuc2V0\nKGlkeCk7DQogICAgICAgICAgICBsb25ndmFsID0gbmV4dDsNCiAgICAgICAg\nICAgIHBjLnBjUmVwbGFjZUZpZWxkKGlkeCk7DQogICAgICAgIH0gZmluYWxs\neSB7DQogICAgICAgICAgICB1bmxvY2soKTsNCiAgICAgICAgfQ0KICAgIH0N\nCg0KICAgIHB1YmxpYyB2b2lkIHNldHRpbmdJbnRGaWVsZChQZXJzaXN0ZW5j\nZUNhcGFibGUgcGMsIGludCBpZHgsIGludCBjdXIsDQogICAgICAgIGludCBu\nZXh0LCBpbnQgc2V0KSB7DQogICAgICAgIGFjY2Vzc2luZ0ZpZWxkKGlkeCk7\nDQogICAgICAgIGlmIChjdXIgPT0gbmV4dCB8fCAhX2xvYWRlZC5nZXQoaWR4\nKSkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgbG9jaygpOw0KICAg\nICAgICB0cnkgew0KICAgICAgICAgICAgX2RpcnR5LnNldChpZHgpOw0KICAg\nICAgICAgICAgbG9uZ3ZhbCA9IG5leHQ7DQogICAgICAgICAgICBwYy5wY1Jl\ncGxhY2VGaWVsZChpZHgpOw0KICAgICAgICB9IGZpbmFsbHkgew0KICAgICAg\nICAgICAgdW5sb2NrKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCBzZXR0aW5nTG9uZ0ZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBw\nYywgaW50IGlkeCwgbG9uZyBjdXIsDQogICAgICAgIGxvbmcgbmV4dCwgaW50\nIHNldCkgew0KICAgICAgICBhY2Nlc3NpbmdGaWVsZChpZHgpOw0KICAgICAg\nICBpZiAoY3VyID09IG5leHQgfHwgIV9sb2FkZWQuZ2V0KGlkeCkpDQogICAg\nICAgICAgICByZXR1cm47DQogICAgICAgIGxvY2soKTsNCiAgICAgICAgdHJ5\nIHsNCiAgICAgICAgICAgIF9kaXJ0eS5zZXQoaWR4KTsNCiAgICAgICAgICAg\nIGxvbmd2YWwgPSBuZXh0Ow0KICAgICAgICAgICAgcGMucGNSZXBsYWNlRmll\nbGQoaWR4KTsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIHVu\nbG9jaygpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\nc2V0dGluZ0Zsb2F0RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQg\naWR4LCBmbG9hdCBjdXIsDQogICAgICAgIGZsb2F0IG5leHQsIGludCBzZXQp\nIHsNCiAgICAgICAgYWNjZXNzaW5nRmllbGQoaWR4KTsNCiAgICAgICAgaWYg\nKGN1ciA9PSBuZXh0IHx8ICFfbG9hZGVkLmdldChpZHgpKQ0KICAgICAgICAg\nICAgcmV0dXJuOw0KICAgICAgICBsb2NrKCk7DQogICAgICAgIHRyeSB7DQog\nICAgICAgICAgICBfZGlydHkuc2V0KGlkeCk7DQogICAgICAgICAgICBkYmx2\nYWwgPSBuZXh0Ow0KICAgICAgICAgICAgcGMucGNSZXBsYWNlRmllbGQoaWR4\nKTsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIHVubG9jaygp\nOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0dGlu\nZ0RvdWJsZUZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwg\nZG91YmxlIGN1ciwNCiAgICAgICAgZG91YmxlIG5leHQsIGludCBzZXQpIHsN\nCiAgICAgICAgYWNjZXNzaW5nRmllbGQoaWR4KTsNCiAgICAgICAgaWYgKGN1\nciA9PSBuZXh0IHx8ICFfbG9hZGVkLmdldChpZHgpKQ0KICAgICAgICAgICAg\ncmV0dXJuOw0KICAgICAgICBsb2NrKCk7DQogICAgICAgIHRyeSB7DQogICAg\nICAgICAgICBfZGlydHkuc2V0KGlkeCk7DQogICAgICAgICAgICBkYmx2YWwg\nPSBuZXh0Ow0KICAgICAgICAgICAgcGMucGNSZXBsYWNlRmllbGQoaWR4KTsN\nCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIHVubG9jaygpOw0K\nICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0dGluZ1N0\ncmluZ0ZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwgU3Ry\naW5nIGN1ciwNCiAgICAgICAgU3RyaW5nIG5leHQsIGludCBzZXQpIHsNCiAg\nICAgICAgYWNjZXNzaW5nRmllbGQoaWR4KTsNCiAgICAgICAgaWYgKGN1ciA9\nPSBuZXh0IHx8IChjdXIgIT0gbnVsbCAmJiBjdXIuZXF1YWxzKG5leHQpKQ0K\nICAgICAgICAgICAgICAgIHx8ICFfbG9hZGVkLmdldChpZHgpKQ0KICAgICAg\nICAgICAgcmV0dXJuOw0KICAgICAgICBsb2NrKCk7DQogICAgICAgIHRyeSB7\nDQogICAgICAgICAgICBfZGlydHkuc2V0KGlkeCk7DQogICAgICAgICAgICBv\nYmp2YWwgPSBuZXh0Ow0KICAgICAgICAgICAgcGMucGNSZXBsYWNlRmllbGQo\naWR4KTsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIHVubG9j\naygpOw0KICAgICAgICAgICAgb2JqdmFsID0gbnVsbDsNCiAgICAgICAgfQ0K\nICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldHRpbmdPYmplY3RGaWVsZChQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgsIE9iamVjdCBjdXIsDQog\nICAgICAgIE9iamVjdCBuZXh0LCBpbnQgc2V0KSB7DQogICAgICAgIGFjY2Vz\nc2luZ0ZpZWxkKGlkeCk7DQogICAgICAgIGlmIChjdXIgPT0gbmV4dCB8fCAh\nX2xvYWRlZC5nZXQoaWR4KSkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAg\nICAgbG9jaygpOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgX2RpcnR5\nLnNldChpZHgpOw0KICAgICAgICAgICAgb2JqdmFsID0gbmV4dDsNCiAgICAg\nICAgICAgIHBjLnBjUmVwbGFjZUZpZWxkKGlkeCk7DQogICAgICAgIH0gZmlu\nYWxseSB7DQogICAgICAgICAgICB1bmxvY2soKTsNCiAgICAgICAgICAgIG9i\nanZhbCA9IG51bGw7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCBwcm92aWRlZEJvb2xlYW5GaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUg\ncGMsIGludCBpZHgsDQogICAgICAgIGJvb2xlYW4gY3VyKSB7DQogICAgICAg\nIGxvbmd2YWwgPSBjdXIgPyAxIDogMDsNCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCBwcm92aWRlZENoYXJGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMs\nIGludCBpZHgsIGNoYXIgY3VyKSB7DQogICAgICAgIGxvbmd2YWwgPSBjdXI7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgcHJvdmlkZWRCeXRlRmllbGQo\nUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBieXRlIGN1cikgew0K\nICAgICAgICBsb25ndmFsID0gY3VyOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2\nb2lkIHByb3ZpZGVkU2hvcnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMs\nIGludCBpZHgsIHNob3J0IGN1cikgew0KICAgICAgICBsb25ndmFsID0gY3Vy\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkSW50RmllbGQo\nUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBpbnQgY3VyKSB7DQog\nICAgICAgIGxvbmd2YWwgPSBjdXI7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgcHJvdmlkZWRMb25nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBp\nbnQgaWR4LCBsb25nIGN1cikgew0KICAgICAgICBsb25ndmFsID0gY3VyOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkRmxvYXRGaWVsZChQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgsIGZsb2F0IGN1cikgew0K\nICAgICAgICBkYmx2YWwgPSBjdXI7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgcHJvdmlkZWREb3VibGVGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMs\nIGludCBpZHgsDQogICAgICAgIGRvdWJsZSBjdXIpIHsNCiAgICAgICAgZGJs\ndmFsID0gY3VyOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVk\nU3RyaW5nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LA0K\nICAgICAgICBTdHJpbmcgY3VyKSB7DQogICAgICAgIG9ianZhbCA9IGN1cjsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBwcm92aWRlZE9iamVjdEZpZWxk\nKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwNCiAgICAgICAgT2Jq\nZWN0IGN1cikgew0KICAgICAgICBvYmp2YWwgPSBjdXI7DQogICAgfQ0KDQog\nICAgcHVibGljIGJvb2xlYW4gcmVwbGFjZUJvb2xlYW5GaWVsZChQZXJzaXN0\nZW5jZUNhcGFibGUgcGMsIGludCBpZHgpIHsNCiAgICAgICAgcmV0dXJuIGxv\nbmd2YWwgPT0gMTsNCiAgICB9DQoNCiAgICBwdWJsaWMgY2hhciByZXBsYWNl\nQ2hhckZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCkgew0K\nICAgICAgICByZXR1cm4gKGNoYXIpIGxvbmd2YWw7DQogICAgfQ0KDQogICAg\ncHVibGljIGJ5dGUgcmVwbGFjZUJ5dGVGaWVsZChQZXJzaXN0ZW5jZUNhcGFi\nbGUgcGMsIGludCBpZHgpIHsNCiAgICAgICAgcmV0dXJuIChieXRlKSBsb25n\ndmFsOw0KICAgIH0NCg0KICAgIHB1YmxpYyBzaG9ydCByZXBsYWNlU2hvcnRG\naWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgpIHsNCiAgICAg\nICAgcmV0dXJuIChzaG9ydCkgbG9uZ3ZhbDsNCiAgICB9DQoNCiAgICBwdWJs\naWMgaW50IHJlcGxhY2VJbnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMs\nIGludCBpZHgpIHsNCiAgICAgICAgcmV0dXJuIChpbnQpIGxvbmd2YWw7DQog\nICAgfQ0KDQogICAgcHVibGljIGxvbmcgcmVwbGFjZUxvbmdGaWVsZChQZXJz\naXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgpIHsNCiAgICAgICAgcmV0dXJu\nIGxvbmd2YWw7DQogICAgfQ0KDQogICAgcHVibGljIGZsb2F0IHJlcGxhY2VG\nbG9hdEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCkgew0K\nICAgICAgICByZXR1cm4gKGZsb2F0KSBkYmx2YWw7DQogICAgfQ0KDQogICAg\ncHVibGljIGRvdWJsZSByZXBsYWNlRG91YmxlRmllbGQoUGVyc2lzdGVuY2VD\nYXBhYmxlIHBjLCBpbnQgaWR4KSB7DQogICAgICAgIHJldHVybiBkYmx2YWw7\nDQogICAgfQ0KDQogICAgcHVibGljIFN0cmluZyByZXBsYWNlU3RyaW5nRmll\nbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4KSB7DQogICAgICAg\nIFN0cmluZyBzdHIgPSAoU3RyaW5nKSBvYmp2YWw7DQogICAgICAgIG9ianZh\nbCA9IG51bGw7DQogICAgICAgIHJldHVybiBzdHI7DQogICAgfQ0KDQogICAg\ncHVibGljIE9iamVjdCByZXBsYWNlT2JqZWN0RmllbGQoUGVyc2lzdGVuY2VD\nYXBhYmxlIHBjLCBpbnQgaWR4KSB7DQogICAgICAgIE9iamVjdCByZXQgPSBv\nYmp2YWw7DQogICAgICAgIG9ianZhbCA9IG51bGw7DQogICAgICAgIHJldHVy\nbiByZXQ7DQogICAgfQ0KDQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8NCiAgICAvLyBPcGVuSlBBU3RhdGVNYW5hZ2VyIGlt\ncGxlbWVudGF0aW9uDQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8NCg0KICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoQ2xh\nc3MgZm9yVHlwZSwgUENTdGF0ZSBzdGF0ZSkgew0KICAgICAgICB0aHJvdyBu\nZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCBsb2FkKEZldGNoQ29uZmlndXJhdGlvbiBmZXRj\naCkgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25F\neGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0IGdldE1h\nbmFnZWRJbnN0YW5jZSgpIHsNCiAgICAgICAgcmV0dXJuIF9wYzsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgUGVyc2lzdGVuY2VDYXBhYmxlIGdldFBlcnNpc3Rl\nbmNlQ2FwYWJsZSgpIHsNCiAgICAgICAgcmV0dXJuIF9wYzsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgQ2xhc3NNZXRhRGF0YSBnZXRNZXRhRGF0YSgpIHsNCiAg\nICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9u\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIE9wZW5KUEFTdGF0ZU1hbmFnZXIg\nZ2V0T3duZXIoKSB7DQogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9w\nZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBpbnQg\nZ2V0T3duZXJJbmRleCgpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9y\ndGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGlj\nIGJvb2xlYW4gaXNFbWJlZGRlZCgpIHsNCiAgICAgICAgcmV0dXJuIF9lbWJl\nZGRlZDsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBpc0ZsdXNoZWQo\nKSB7DQogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4\nY2VwdGlvbigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzRmx1\nc2hlZERpcnR5KCkgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRP\ncGVyYXRpb25FeGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc1Byb3Zpc2lvbmFsKCkgew0KICAgICAgICB0aHJvdyBuZXcgVW5z\ndXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgQml0U2V0IGdldExvYWRlZCgpIHsNCiAgICAgICAgcmV0dXJuIF9s\nb2FkZWQ7DQogICAgfQ0KDQogICAgcHVibGljIEJpdFNldCBnZXREaXJ0eSgp\nIHsNCiAgICAgICAgcmV0dXJuIF9kaXJ0eTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgQml0U2V0IGdldEZsdXNoZWQoKSB7DQogICAgICAgIHRocm93IG5ldyBV\nbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyBCaXRTZXQgZ2V0VW5sb2FkZWQoRmV0Y2hDb25maWd1cmF0aW9u\nIGZldGNoKSB7DQogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJh\ndGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBPYmplY3Qg\nbmV3UHJveHkoaW50IGZpZWxkKSB7DQogICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyBPYmplY3QgbmV3RmllbGRQcm94eShpbnQgZmllbGQpIHsNCiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNEZWZhdWx0VmFsdWUo\naW50IGZpZWxkKSB7DQogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9w\nZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBTdG9y\nZUNvbnRleHQgZ2V0Q29udGV4dCgpIHsNCiAgICAgICAgcmV0dXJuIG51bGw7\nDQogICAgfQ0KDQogICAgcHVibGljIFBDU3RhdGUgZ2V0UENTdGF0ZSgpIHsN\nCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0\naW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBnZXRPYmplY3RJ\nZCgpIHsNCiAgICAgICAgcmV0dXJuIF9vaWQ7DQogICAgfQ0KDQogICAgcHVi\nbGljIHZvaWQgc2V0T2JqZWN0SWQoT2JqZWN0IG9pZCkgew0KICAgICAgICB0\naHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsNCiAg\nICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBhc3NpZ25PYmplY3RJZChib29s\nZWFuIGZsdXNoKSB7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyBPYmplY3QgZ2V0SWQoKSB7DQogICAgICAgIHJldHVybiBn\nZXRPYmplY3RJZCgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBPYmplY3QgZ2V0\nTG9jaygpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0\nTG9jayhPYmplY3QgbG9jaykgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCBzZXROZXh0VmVyc2lvbihPYmplY3QgdmVyc2lvbikgew0KICAg\nICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24o\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0IGdldEltcGxEYXRhKCkg\new0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNl\ncHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0IHNldEltcGxE\nYXRhKE9iamVjdCBkYXRhLCBib29sZWFuIGNhY2hlYWJsZSkgew0KICAgICAg\nICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBpc0ltcGxEYXRhQ2FjaGVh\nYmxlKCkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAg\ncHVibGljIE9iamVjdCBnZXRJbXBsRGF0YShpbnQgZmllbGQpIHsNCiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBzZXRJbXBsRGF0YShpbnQg\nZmllbGQsIE9iamVjdCBkYXRhKSB7DQogICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyBib29sZWFuIGlzSW1wbERhdGFDYWNoZWFibGUoaW50IGZpZWxkKSB7\nDQogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2Vw\ndGlvbigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBPYmplY3QgZ2V0SW50ZXJt\nZWRpYXRlKGludCBmaWVsZCkgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCBzZXRJbnRlcm1lZGlhdGUoaW50IGZpZWxkLCBPYmplY3QgZGF0\nYSkgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25F\neGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCByZW1vdmVk\nKGludCBmaWVsZCwgT2JqZWN0IHJlbW92ZWQsIGJvb2xlYW4ga2V5KSB7DQog\nICAgICAgIGRpcnR5KGZpZWxkKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9v\nbGVhbiBiZWZvcmVSZWZyZXNoKGJvb2xlYW4gYWxsKSB7DQogICAgICAgIHRo\ncm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIGRpcnR5KGludCBmaWVsZCkgew0KICAg\nICAgICBsb2NrKCk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBfZGly\ndHkuc2V0KGZpZWxkKTsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAg\nICAgIHVubG9jaygpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgc3RvcmVCb29sZWFuKGludCBmaWVsZCwgYm9vbGVhbiBleHRWYWwp\nIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhj\nZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc3RvcmVCeXRl\nKGludCBmaWVsZCwgYnl0ZSBleHRWYWwpIHsNCiAgICAgICAgdGhyb3cgbmV3\nIFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgc3RvcmVDaGFyKGludCBmaWVsZCwgY2hhciBleHRW\nYWwpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9u\nRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc3RvcmVJ\nbnQoaW50IGZpZWxkLCBpbnQgZXh0VmFsKSB7DQogICAgICAgIHRocm93IG5l\ndyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyB2b2lkIHN0b3JlU2hvcnQoaW50IGZpZWxkLCBzaG9ydCBl\neHRWYWwpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc3Rv\ncmVMb25nKGludCBmaWVsZCwgbG9uZyBleHRWYWwpIHsNCiAgICAgICAgdGhy\nb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQogICAg\nfQ0KDQogICAgcHVibGljIHZvaWQgc3RvcmVGbG9hdChpbnQgZmllbGQsIGZs\nb2F0IGV4dFZhbCkgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRP\ncGVyYXRpb25FeGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCBzdG9yZURvdWJsZShpbnQgZmllbGQsIGRvdWJsZSBleHRWYWwpIHsNCiAg\nICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9u\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc3RvcmVTdHJpbmcoaW50\nIGZpZWxkLCBTdHJpbmcgZXh0VmFsKSB7DQogICAgICAgIHRocm93IG5ldyBV\nbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyB2b2lkIHN0b3JlT2JqZWN0KGludCBmaWVsZCwgT2JqZWN0IGV4\ndFZhbCkgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRp\nb25FeGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBzdG9y\nZShpbnQgZmllbGQsIE9iamVjdCBleHRWYWwpIHsNCiAgICAgICAgdGhyb3cg\nbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQogICAgfQ0K\nDQogICAgcHVibGljIHZvaWQgc3RvcmVGaWVsZChpbnQgZmllbGQsIE9iamVj\ndCB2YWx1ZSkgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVy\nYXRpb25FeGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVh\nbiBmZXRjaEJvb2xlYW4oaW50IGZpZWxkKSB7DQogICAgICAgIHRocm93IG5l\ndyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyBieXRlIGZldGNoQnl0ZShpbnQgZmllbGQpIHsNCiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIGNoYXIgZmV0Y2hDaGFyKGludCBmaWVs\nZCkgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25F\neGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgc2hvcnQgZmV0Y2hT\naG9ydChpbnQgZmllbGQpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9y\ndGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGlj\nIGludCBmZXRjaEludChpbnQgZmllbGQpIHsNCiAgICAgICAgdGhyb3cgbmV3\nIFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQogICAgfQ0KDQog\nICAgcHVibGljIGxvbmcgZmV0Y2hMb25nKGludCBmaWVsZCkgew0KICAgICAg\nICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgZmxvYXQgZmV0Y2hGbG9hdChpbnQgZmll\nbGQpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9u\nRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIGRvdWJsZSBmZXRj\naERvdWJsZShpbnQgZmllbGQpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3Vw\ncG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVi\nbGljIFN0cmluZyBmZXRjaFN0cmluZyhpbnQgZmllbGQpIHsNCiAgICAgICAg\ndGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQog\nICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBmZXRjaE9iamVjdChpbnQgZmll\nbGQpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9u\nRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBmZXRj\naChpbnQgZmllbGQpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVk\nT3BlcmF0aW9uRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIE9i\namVjdCBmZXRjaEZpZWxkKGludCBmaWVsZCwgYm9vbGVhbiB0cmFuc2l0aW9u\ncykgew0KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25F\neGNlcHRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0IGZldGNo\nSW5pdGlhbEZpZWxkKGludCBmaWVsZCkgew0KICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgdm9pZCBzZXRSZW1vdGUoaW50IGZpZWxkLCBPYmplY3QgdmFs\ndWUpIHsNCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9u\nRXhjZXB0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgbG9jaygp\nIHsNCiAgICAgICAgaWYgKF9sb2NrICE9IG51bGwpDQogICAgICAgICAgICBf\nbG9jay5sb2NrKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdW5sb2Nr\nKCkgew0KICAgICAgICBpZiAoX2xvY2sgIT0gbnVsbCkNCiAgICAgICAgICAg\nIF9sb2NrLnVubG9jaygpOw0KICAgIH0NCn0NCg==\n","encoding":"base64"}

