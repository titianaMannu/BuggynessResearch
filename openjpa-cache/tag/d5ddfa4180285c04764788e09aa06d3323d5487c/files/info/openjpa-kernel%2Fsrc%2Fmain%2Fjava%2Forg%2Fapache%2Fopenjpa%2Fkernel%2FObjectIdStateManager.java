{"sha":"99cdcaab6642a673675a9f86ae2f80a4089efbca","node_id":"MDQ6QmxvYjIwNjM2NDo5OWNkY2FhYjY2NDJhNjczNjc1YTlmODZhZTJmODBhNDA4OWVmYmNh","size":20819,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/99cdcaab6642a673675a9f86ae2f80a4089efbca","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLk9iamVjdE91dHB1\ndDsKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0LkZpZWxkOwppbXBvcnQgamF2\nYS5sYW5nLnJlZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS5zZWN1cml0eS5B\nY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Qcml2aWxl\nZ2VkQWN0aW9uRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkJpdFNldDsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QZXJzaXN0ZW5j\nZUNhcGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5T\ndGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5j\nZS5SZWZsZWN0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51\ndGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLm1ldGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLkZpZWxkTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5KYXZhVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbWV0YS5WYWx1ZU1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnV0aWwuR2VuZXJhbEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS51dGlsLkltcGxIZWxwZXI7CmltcG9ydCBzZXJwLnV0aWwuTnVtYmVy\nczsKCi8qKgogKiBTdGF0ZSBtYW5hZ2VyIHVzZWQgdG8gYWNjZXNzIHN0YXRl\nIG9mIGVtYmVkZGVkIG9iamVjdCBpZCBwcmltYXJ5IGtleSBmaWVsZHMuCiAq\nCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICovCnB1Ymxp\nYyBjbGFzcyBPYmplY3RJZFN0YXRlTWFuYWdlcgogICAgaW1wbGVtZW50cyBP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBCeXRlIFpFUk9fQllURSA9IG5ldyBCeXRlKChieXRlKSAwKTsKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIENoYXJhY3RlciBaRVJPX0NIQVIgPSBuZXcg\nQ2hhcmFjdGVyKChjaGFyKSAwKTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIERvdWJsZSBaRVJPX0RPVUJMRSA9IG5ldyBEb3VibGUoMCk7CiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBGbG9hdCBaRVJPX0ZMT0FUID0gbmV3IEZsb2F0\nKDApOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU2hvcnQgWkVST19TSE9S\nVCA9IG5ldyBTaG9ydCgoc2hvcnQpIDApOwoKICAgIHByaXZhdGUgT2JqZWN0\nIF9vaWQ7CiAgICBwcml2YXRlIGZpbmFsIE9wZW5KUEFTdGF0ZU1hbmFnZXIg\nX293bmVyOwogICAgcHJpdmF0ZSBmaW5hbCBWYWx1ZU1ldGFEYXRhIF92bWQ7\nCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5IGVtYmVkZGVk\nIG9iamVjdCBpZCBhbmQgaXRzIG93bmVyLgogICAgICoKICAgICAqIEBwYXJh\nbSBvd25lciBtYXkgYmUgbnVsbAogICAgICovCiAgICBwdWJsaWMgT2JqZWN0\nSWRTdGF0ZU1hbmFnZXIoT2JqZWN0IG9pZCwgT3BlbkpQQVN0YXRlTWFuYWdl\nciBvd25lciwKICAgICAgICBWYWx1ZU1ldGFEYXRhIG93bmVyVmFsKSB7CiAg\nICAgICAgX29pZCA9IG9pZDsKICAgICAgICBfb3duZXIgPSBvd25lcjsKICAg\nICAgICBfdm1kID0gb3duZXJWYWw7CiAgICB9CgogICAgcHVibGljIE9iamVj\ndCBnZXRHZW5lcmljQ29udGV4dCgpIHsKICAgICAgICByZXR1cm4gKF9vd25l\nciA9PSBudWxsKSA/IG51bGwgOiBfb3duZXIuZ2V0R2VuZXJpY0NvbnRleHQo\nKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFBDUHJpbWFyeUtleShP\nYmplY3Qgb2lkLCBpbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBuZXcgVW5z\ndXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJs\naWMgU3RhdGVNYW5hZ2VyIHJlcGxhY2VTdGF0ZU1hbmFnZXIoU3RhdGVNYW5h\nZ2VyIHNtKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRW\nZXJzaW9uKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldFZlcnNpb24oT2JqZWN0IHZlcnNpb24pIHsKICAgICAg\nICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsK\nICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0RpcnR5KCkgewogICAgICAg\nIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1Ry\nYW5zYWN0aW9uYWwoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGlzUGVyc2lzdGVudCgpIHsKICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNOZXco\nKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIGlzRGVsZXRlZCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNEZXRhY2hlZCgpIHsKICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1Zl\ncnNpb25VcGRhdGVSZXF1aXJlZCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNWZXJzaW9uQ2hlY2tSZXF1\naXJlZCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgZGlydHkoU3RyaW5nIGZpZWxkKSB7CiAgICAgICAgdGhyb3cg\nbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9Cgog\nICAgcHVibGljIE9iamVjdCBmZXRjaE9iamVjdElkKCkgewogICAgICAgIHJl\ndHVybiBudWxsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFjY2Vzc2luZ0Zp\nZWxkKGludCBpZHgpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRP\ncGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVh\nbiBzZXJpYWxpemluZygpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0\nZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYm9v\nbGVhbiB3cml0ZURldGFjaGVkKE9iamVjdE91dHB1dCBvdXQpCiAgICAgICAg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBwcm94eURldGFjaGVkRGVzZXJpYWxpemVkKGludCBpZHgpIHsKICAg\nICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24o\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR0aW5nQm9vbGVhbkZpZWxk\nKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwKICAgICAgICBib29s\nZWFuIGN1ciwgYm9vbGVhbiBuZXh0LCBpbnQgc2V0KSB7CiAgICAgICAgdGhy\nb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0dGluZ0NoYXJGaWVsZChQZXJzaXN0ZW5j\nZUNhcGFibGUgcGMsIGludCBpZHgsIGNoYXIgY3VyLAogICAgICAgIGNoYXIg\nbmV4dCwgaW50IHNldCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRl\nZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldHRpbmdCeXRlRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQg\naWR4LCBieXRlIGN1ciwKICAgICAgICBieXRlIG5leHQsIGludCBzZXQpIHsK\nICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRp\nb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR0aW5nU2hvcnRGaWVs\nZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgsIHNob3J0IGN1ciwK\nICAgICAgICBzaG9ydCBuZXh0LCBpbnQgc2V0KSB7CiAgICAgICAgdGhyb3cg\nbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0dGluZ0ludEZpZWxkKFBlcnNpc3RlbmNlQ2Fw\nYWJsZSBwYywgaW50IGlkeCwgaW50IGN1ciwKICAgICAgICBpbnQgbmV4dCwg\naW50IHNldCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJh\ndGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldHRp\nbmdMb25nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBs\nb25nIGN1ciwKICAgICAgICBsb25nIG5leHQsIGludCBzZXQpIHsKICAgICAg\nICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR0aW5nRmxvYXRGaWVsZChQZXJz\naXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgsIGZsb2F0IGN1ciwKICAgICAg\nICBmbG9hdCBuZXh0LCBpbnQgc2V0KSB7CiAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0dGluZ0RvdWJsZUZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJs\nZSBwYywgaW50IGlkeCwgZG91YmxlIGN1ciwKICAgICAgICBkb3VibGUgbmV4\ndCwgaW50IHNldCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9w\nZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndHRpbmdTdHJpbmdGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBp\nZHgsIFN0cmluZyBjdXIsCiAgICAgICAgU3RyaW5nIG5leHQsIGludCBzZXQp\nIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNl\ncHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR0aW5nT2JqZWN0\nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBPYmplY3Qg\nY3VyLAogICAgICAgIE9iamVjdCBuZXh0LCBpbnQgc2V0KSB7CiAgICAgICAg\ndGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcHJvdmlkZWRCb29sZWFuRmllbGQoUGVy\nc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LAogICAgICAgIGJvb2xlYW4g\nY3VyKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9u\nRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcHJvdmlkZWRD\naGFyRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBjaGFy\nIGN1cikgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVk\nQnl0ZUZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwgYnl0\nZSBjdXIpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRp\nb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcm92aWRl\nZFNob3J0RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBz\naG9ydCBjdXIpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVy\nYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcm92\naWRlZEludEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwg\naW50IGN1cikgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJh\ndGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHByb3Zp\nZGVkTG9uZ0ZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwg\nbG9uZyBjdXIpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVy\nYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcm92\naWRlZEZsb2F0RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4\nLCBmbG9hdCBjdXIpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRP\ncGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBw\ncm92aWRlZERvdWJsZUZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50\nIGlkeCwKICAgICAgICBkb3VibGUgY3VyKSB7CiAgICAgICAgdGhyb3cgbmV3\nIFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgcHJvdmlkZWRTdHJpbmdGaWVsZChQZXJzaXN0ZW5jZUNh\ncGFibGUgcGMsIGludCBpZHgsCiAgICAgICAgU3RyaW5nIGN1cikgewogICAg\nICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkT2JqZWN0RmllbGQo\nUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LAogICAgICAgIE9iamVj\ndCBjdXIpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRp\nb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiByZXBs\nYWNlQm9vbGVhbkZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlk\neCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4\nY2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBjaGFyIHJlcGxhY2VDaGFy\nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nCiAgICB9CgogICAgcHVibGljIGJ5dGUgcmVwbGFjZUJ5dGVGaWVsZChQZXJz\naXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgpIHsKICAgICAgICB0aHJvdyBu\nZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAg\nICBwdWJsaWMgc2hvcnQgcmVwbGFjZVNob3J0RmllbGQoUGVyc2lzdGVuY2VD\nYXBhYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3Vw\ncG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGlj\nIGludCByZXBsYWNlSW50RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBp\nbnQgaWR4KSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIGxvbmcgcmVwbGFj\nZUxvbmdGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgpIHsK\nICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRp\nb24oKTsKICAgIH0KCiAgICBwdWJsaWMgZmxvYXQgcmVwbGFjZUZsb2F0Rmll\nbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAgICAg\ndGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAg\nICB9CgogICAgcHVibGljIGRvdWJsZSByZXBsYWNlRG91YmxlRmllbGQoUGVy\nc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAgICAgdGhyb3cg\nbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9Cgog\nICAgcHVibGljIFN0cmluZyByZXBsYWNlU3RyaW5nRmllbGQoUGVyc2lzdGVu\nY2VDYXBhYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCByZXBsYWNlT2JqZWN0RmllbGQoUGVyc2lzdGVuY2VDYXBh\nYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9y\ndGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIE9wZW5KUEFTdGF0\nZU1hbmFnZXIgaW1wbGVtZW50YXRpb24KICAgIC8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgcHVibGljIHZvaWQgaW5pdGlhbGl6\nZShDbGFzcyBmb3JUeXBlLCBQQ1N0YXRlIHN0YXRlKSB7CiAgICAgICAgdGhy\nb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgbG9hZChGZXRjaENvbmZpZ3VyYXRpb24gZmV0\nY2gpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25F\neGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldE1hbmFn\nZWRJbnN0YW5jZSgpIHsKICAgICAgICByZXR1cm4gX29pZDsKICAgIH0KCiAg\nICBwdWJsaWMgUGVyc2lzdGVuY2VDYXBhYmxlIGdldFBlcnNpc3RlbmNlQ2Fw\nYWJsZSgpIHsKICAgICAgICByZXR1cm4gSW1wbEhlbHBlci50b1BlcnNpc3Rl\nbmNlQ2FwYWJsZShfb2lkLAogICAgICAgICAgICBfdm1kLmdldFJlcG9zaXRv\ncnkoKS5nZXRDb25maWd1cmF0aW9uKCkpOwogICAgfQoKICAgIHB1YmxpYyBD\nbGFzc01ldGFEYXRhIGdldE1ldGFEYXRhKCkgewogICAgICAgIHJldHVybiBf\ndm1kLmdldEVtYmVkZGVkTWV0YURhdGEoKTsKICAgIH0KCiAgICBwdWJsaWMg\nT3BlbkpQQVN0YXRlTWFuYWdlciBnZXRPd25lcigpIHsKICAgICAgICByZXR1\ncm4gX293bmVyOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0T3duZXJJbmRl\neCgpIHsKICAgICAgICByZXR1cm4gX3ZtZC5nZXRGaWVsZE1ldGFEYXRhKCku\nZ2V0SW5kZXgoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0VtYmVk\nZGVkKCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHB1Ymxp\nYyBib29sZWFuIGlzRmx1c2hlZCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNGbHVzaGVkRGlydHkoKSB7\nCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGlzUHJvdmlzaW9uYWwoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgfQoKICAgIHB1YmxpYyBCaXRTZXQgZ2V0TG9hZGVkKCkgewogICAgICAg\nIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwog\nICAgfQoKICAgIHB1YmxpYyBCaXRTZXQgZ2V0RGlydHkoKSB7CiAgICAgICAg\ndGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAg\nICB9CgogICAgcHVibGljIEJpdFNldCBnZXRGbHVzaGVkKCkgewogICAgICAg\nIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwog\nICAgfQoKICAgIHB1YmxpYyBCaXRTZXQgZ2V0VW5sb2FkZWQoRmV0Y2hDb25m\naWd1cmF0aW9uIGZldGNoKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9y\ndGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIE9i\namVjdCBuZXdQcm94eShpbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0IG5ld0ZpZWxkUHJveHkoaW50IGZpZWxkKSB7CiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nCiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNEZWZhdWx0VmFsdWUoaW50\nIGZpZWxkKSB7CiAgICAgICAgT2JqZWN0IHZhbCA9IGdldFZhbHVlKGZpZWxk\nKTsKICAgICAgICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwoKICAgICAgICBGaWVsZE1ldGFEYXRhIGZtZCA9IGdldE1ldGFE\nYXRhKCkuZ2V0RmllbGQoZmllbGQpOwogICAgICAgIHN3aXRjaCAoZm1kLmdl\ndERlY2xhcmVkVHlwZUNvZGUoKSkgewogICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5CT09MRUFOOgogICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4u\nRkFMU0UuZXF1YWxzKHZhbCk7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLkNIQVI6CiAgICAgICAgICAgICAgICByZXR1cm4gKChDaGFyYWN0ZXIpIHZh\nbCkuY2hhclZhbHVlKCkgPT0gMDsKICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuQllURToKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRE9VQkxFOgog\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5GTE9BVDoKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuSU5UOgogICAgICAgICAgICBjYXNlIEphdmFUeXBl\ncy5MT05HOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5TSE9SVDoKICAg\nICAgICAgICAgICAgIHJldHVybiAoKE51bWJlcikgdmFsKS5pbnRWYWx1ZSgp\nID09IDA7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNUUklORzoKICAg\nICAgICAgICAgICAgIHJldHVybiAiIi5lcXVhbHModmFsKTsKICAgICAgICAg\nICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAg\nICAgICB9CiAgICB9CgogICAgcHVibGljIFN0b3JlQ29udGV4dCBnZXRDb250\nZXh0KCkgewogICAgICAgIHJldHVybiAoX293bmVyID09IG51bGwpID8gbnVs\nbCA6IF9vd25lci5nZXRDb250ZXh0KCk7CiAgICB9CgogICAgcHVibGljIFBD\nU3RhdGUgZ2V0UENTdGF0ZSgpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMg\nT2JqZWN0IGdldE9iamVjdElkKCkgewogICAgICAgIHJldHVybiBudWxsOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE9iamVjdElkKE9iamVjdCBvaWQp\nIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNl\ncHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBhc3NpZ25PYmpl\nY3RJZChib29sZWFuIGZsdXNoKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3Vw\ncG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdCBnZXRJZCgpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0K\nCiAgICBwdWJsaWMgT2JqZWN0IGdldExvY2soKSB7CiAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TG9jayhPYmplY3Qg\nbG9jaykgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE5leHRW\nZXJzaW9uKE9iamVjdCB2ZXJzaW9uKSB7CiAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCBnZXRJbXBsRGF0YSgpIHsKICAgICAgICByZXR1cm4gbnVs\nbDsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IHNldEltcGxEYXRhKE9iamVj\ndCBkYXRhLCBib29sZWFuIGNhY2hlYWJsZSkgewogICAgICAgIHRocm93IG5l\ndyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAg\nIHB1YmxpYyBib29sZWFuIGlzSW1wbERhdGFDYWNoZWFibGUoKSB7CiAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0\nSW1wbERhdGEoaW50IGZpZWxkKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICB9CgogICAgcHVibGljIE9iamVjdCBzZXRJbXBsRGF0YShpbnQgZmllbGQs\nIE9iamVjdCBkYXRhKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVk\nT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gaXNJbXBsRGF0YUNhY2hlYWJsZShpbnQgZmllbGQpIHsKICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRJbnRl\ncm1lZGlhdGUoaW50IGZpZWxkKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0SW50ZXJtZWRpYXRlKGludCBmaWVs\nZCwgT2JqZWN0IGRhdGEpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0\nZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCByZW1vdmVkKGludCBmaWVsZCwgT2JqZWN0IHJlbW92ZWQsIGJvb2xlYW4g\na2V5KSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9u\nRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYmVmb3Jl\nUmVmcmVzaChib29sZWFuIGFsbCkgewogICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGRpcnR5KGludCBmaWVsZCkgewogICAgICAgIHRocm93IG5ldyBV\nbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHN0b3JlQm9vbGVhbihpbnQgZmllbGQsIGJvb2xlYW4gZXh0\nVmFsKSB7CiAgICAgICAgc2V0VmFsdWUoZmllbGQsIChleHRWYWwpID8gQm9v\nbGVhbi5UUlVFIDogQm9vbGVhbi5GQUxTRSwgdHJ1ZSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc3RvcmVCeXRlKGludCBmaWVsZCwgYnl0ZSBleHRWYWwp\nIHsKICAgICAgICBzZXRWYWx1ZShmaWVsZCwgbmV3IEJ5dGUoZXh0VmFsKSwg\ndHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RvcmVDaGFyKGludCBm\naWVsZCwgY2hhciBleHRWYWwpIHsKICAgICAgICBzZXRWYWx1ZShmaWVsZCwg\nbmV3IENoYXJhY3RlcihleHRWYWwpLCB0cnVlKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzdG9yZUludChpbnQgZmllbGQsIGludCBleHRWYWwpIHsKICAg\nICAgICBzZXRWYWx1ZShmaWVsZCwgTnVtYmVycy52YWx1ZU9mKGV4dFZhbCks\nIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0b3JlU2hvcnQoaW50\nIGZpZWxkLCBzaG9ydCBleHRWYWwpIHsKICAgICAgICBzZXRWYWx1ZShmaWVs\nZCwgbmV3IFNob3J0KGV4dFZhbCksIHRydWUpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHN0b3JlTG9uZyhpbnQgZmllbGQsIGxvbmcgZXh0VmFsKSB7CiAg\nICAgICAgc2V0VmFsdWUoZmllbGQsIE51bWJlcnMudmFsdWVPZihleHRWYWwp\nLCB0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdG9yZUZsb2F0KGlu\ndCBmaWVsZCwgZmxvYXQgZXh0VmFsKSB7CiAgICAgICAgc2V0VmFsdWUoZmll\nbGQsIG5ldyBGbG9hdChleHRWYWwpLCB0cnVlKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzdG9yZURvdWJsZShpbnQgZmllbGQsIGRvdWJsZSBleHRWYWwp\nIHsKICAgICAgICBzZXRWYWx1ZShmaWVsZCwgbmV3IERvdWJsZShleHRWYWwp\nLCB0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdG9yZVN0cmluZyhp\nbnQgZmllbGQsIFN0cmluZyBleHRWYWwpIHsKICAgICAgICBzZXRWYWx1ZShm\naWVsZCwgZXh0VmFsLCBleHRWYWwgIT0gbnVsbCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc3RvcmVPYmplY3QoaW50IGZpZWxkLCBPYmplY3QgZXh0VmFs\nKSB7CiAgICAgICAgc2V0VmFsdWUoZmllbGQsIGV4dFZhbCwgZXh0VmFsICE9\nIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0b3JlKGludCBmaWVs\nZCwgT2JqZWN0IGV4dFZhbCkgewogICAgICAgIGJvb2xlYW4gZm9yY2VJbnN0\nID0gdHJ1ZTsKICAgICAgICBpZiAoZXh0VmFsID09IG51bGwpIHsKICAgICAg\nICAgICAgZXh0VmFsID0gZ2V0RGVmYXVsdFZhbHVlKGZpZWxkKTsKICAgICAg\nICAgICAgZm9yY2VJbnN0ID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHNl\ndFZhbHVlKGZpZWxkLCBleHRWYWwsIGZvcmNlSW5zdCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc3RvcmVCb29sZWFuRmllbGQoaW50IGZpZWxkLCBib29s\nZWFuIGV4dFZhbCkgewogICAgICAgIHN0b3JlQm9vbGVhbihmaWVsZCwgZXh0\nVmFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdG9yZUJ5dGVGaWVsZChp\nbnQgZmllbGQsIGJ5dGUgZXh0VmFsKSB7CiAgICAgICAgc3RvcmVCeXRlKGZp\nZWxkLCBleHRWYWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0b3JlQ2hh\nckZpZWxkKGludCBmaWVsZCwgY2hhciBleHRWYWwpIHsKICAgICAgICBzdG9y\nZUNoYXIoZmllbGQsIGV4dFZhbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc3RvcmVJbnRGaWVsZChpbnQgZmllbGQsIGludCBleHRWYWwpIHsKICAgICAg\nICBzdG9yZUludChmaWVsZCwgZXh0VmFsKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzdG9yZVNob3J0RmllbGQoaW50IGZpZWxkLCBzaG9ydCBleHRWYWwp\nIHsKICAgICAgICBzdG9yZVNob3J0KGZpZWxkLCBleHRWYWwpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHN0b3JlTG9uZ0ZpZWxkKGludCBmaWVsZCwgbG9u\nZyBleHRWYWwpIHsKICAgICAgICBzdG9yZUxvbmcoZmllbGQsIGV4dFZhbCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc3RvcmVGbG9hdEZpZWxkKGludCBm\naWVsZCwgZmxvYXQgZXh0VmFsKSB7CiAgICAgICAgc3RvcmVGbG9hdChmaWVs\nZCwgZXh0VmFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdG9yZURvdWJs\nZUZpZWxkKGludCBmaWVsZCwgZG91YmxlIGV4dFZhbCkgewogICAgICAgIHN0\nb3JlRG91YmxlKGZpZWxkLCBleHRWYWwpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHN0b3JlU3RyaW5nRmllbGQoaW50IGZpZWxkLCBTdHJpbmcgZXh0VmFs\nKSB7CiAgICAgICAgc3RvcmVTdHJpbmcoZmllbGQsIGV4dFZhbCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc3RvcmVPYmplY3RGaWVsZChpbnQgZmllbGQs\nIE9iamVjdCBleHRWYWwpIHsKICAgICAgICBzdG9yZU9iamVjdChmaWVsZCwg\nZXh0VmFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdG9yZUZpZWxkKGlu\ndCBmaWVsZCwgT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgc3RvcmUoZmllbGQs\nIHZhbHVlKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBmZXRjaEJvb2xl\nYW4oaW50IGZpZWxkKSB7CiAgICAgICAgcmV0dXJuICgoQm9vbGVhbikgZ2V0\nVmFsdWUoZmllbGQpKS5ib29sZWFuVmFsdWUoKTsKICAgIH0KCiAgICBwdWJs\naWMgYnl0ZSBmZXRjaEJ5dGUoaW50IGZpZWxkKSB7CiAgICAgICAgcmV0dXJu\nICgoTnVtYmVyKSBnZXRWYWx1ZShmaWVsZCkpLmJ5dGVWYWx1ZSgpOwogICAg\nfQoKICAgIHB1YmxpYyBjaGFyIGZldGNoQ2hhcihpbnQgZmllbGQpIHsKICAg\nICAgICByZXR1cm4gKChDaGFyYWN0ZXIpIGdldFZhbHVlKGZpZWxkKSkuY2hh\nclZhbHVlKCk7CiAgICB9CgogICAgcHVibGljIHNob3J0IGZldGNoU2hvcnQo\naW50IGZpZWxkKSB7CiAgICAgICAgcmV0dXJuICgoTnVtYmVyKSBnZXRWYWx1\nZShmaWVsZCkpLnNob3J0VmFsdWUoKTsKICAgIH0KCiAgICBwdWJsaWMgaW50\nIGZldGNoSW50KGludCBmaWVsZCkgewogICAgICAgIHJldHVybiAoKE51bWJl\ncikgZ2V0VmFsdWUoZmllbGQpKS5pbnRWYWx1ZSgpOwogICAgfQoKICAgIHB1\nYmxpYyBsb25nIGZldGNoTG9uZyhpbnQgZmllbGQpIHsKICAgICAgICByZXR1\ncm4gKChOdW1iZXIpIGdldFZhbHVlKGZpZWxkKSkubG9uZ1ZhbHVlKCk7CiAg\nICB9CgogICAgcHVibGljIGZsb2F0IGZldGNoRmxvYXQoaW50IGZpZWxkKSB7\nCiAgICAgICAgcmV0dXJuICgoTnVtYmVyKSBnZXRWYWx1ZShmaWVsZCkpLmZs\nb2F0VmFsdWUoKTsKICAgIH0KCiAgICBwdWJsaWMgZG91YmxlIGZldGNoRG91\nYmxlKGludCBmaWVsZCkgewogICAgICAgIHJldHVybiAoKE51bWJlcikgZ2V0\nVmFsdWUoZmllbGQpKS5kb3VibGVWYWx1ZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyBTdHJpbmcgZmV0Y2hTdHJpbmcoaW50IGZpZWxkKSB7CiAgICAgICAgcmV0\ndXJuIChTdHJpbmcpIGdldFZhbHVlKGZpZWxkKTsKICAgIH0KCiAgICBwdWJs\naWMgT2JqZWN0IGZldGNoT2JqZWN0KGludCBmaWVsZCkgewogICAgICAgIHJl\ndHVybiBnZXRWYWx1ZShmaWVsZCk7CiAgICB9CgogICAgcHVibGljIE9iamVj\ndCBmZXRjaChpbnQgZmllbGQpIHsKICAgICAgICBPYmplY3QgcmV0ID0gZ2V0\nVmFsdWUoZmllbGQpOwogICAgICAgIGlmIChyZXQgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0ID0gZ2V0RGVmYXVsdFZhbHVlKGZpZWxkKTsKICAgICAgICBy\nZXR1cm4gcmV0OwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGZldGNoQm9v\nbGVhbkZpZWxkKGludCBmaWVsZCkgewogICAgICAgIHJldHVybiBmZXRjaEJv\nb2xlYW4oZmllbGQpOwogICAgfQoKICAgIHB1YmxpYyBieXRlIGZldGNoQnl0\nZUZpZWxkKGludCBmaWVsZCkgewogICAgICAgIHJldHVybiBmZXRjaEJ5dGUo\nZmllbGQpOwogICAgfQoKICAgIHB1YmxpYyBjaGFyIGZldGNoQ2hhckZpZWxk\nKGludCBmaWVsZCkgewogICAgICAgIHJldHVybiBmZXRjaENoYXIoZmllbGQp\nOwogICAgfQoKICAgIHB1YmxpYyBzaG9ydCBmZXRjaFNob3J0RmllbGQoaW50\nIGZpZWxkKSB7CiAgICAgICAgcmV0dXJuIGZldGNoU2hvcnQoZmllbGQpOwog\nICAgfQoKICAgIHB1YmxpYyBpbnQgZmV0Y2hJbnRGaWVsZChpbnQgZmllbGQp\nIHsKICAgICAgICByZXR1cm4gZmV0Y2hJbnQoZmllbGQpOwogICAgfQoKICAg\nIHB1YmxpYyBsb25nIGZldGNoTG9uZ0ZpZWxkKGludCBmaWVsZCkgewogICAg\nICAgIHJldHVybiBmZXRjaExvbmcoZmllbGQpOwogICAgfQoKICAgIHB1Ymxp\nYyBmbG9hdCBmZXRjaEZsb2F0RmllbGQoaW50IGZpZWxkKSB7CiAgICAgICAg\ncmV0dXJuIGZldGNoRmxvYXQoZmllbGQpOwogICAgfQoKICAgIHB1YmxpYyBk\nb3VibGUgZmV0Y2hEb3VibGVGaWVsZChpbnQgZmllbGQpIHsKICAgICAgICBy\nZXR1cm4gZmV0Y2hEb3VibGUoZmllbGQpOwogICAgfQoKICAgIHB1YmxpYyBT\ndHJpbmcgZmV0Y2hTdHJpbmdGaWVsZChpbnQgZmllbGQpIHsKICAgICAgICBy\nZXR1cm4gZmV0Y2hTdHJpbmcoZmllbGQpOwogICAgfQoKICAgIHB1YmxpYyBP\nYmplY3QgZmV0Y2hPYmplY3RGaWVsZChpbnQgZmllbGQpIHsKICAgICAgICBy\nZXR1cm4gZmV0Y2goZmllbGQpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3Qg\nZmV0Y2hGaWVsZChpbnQgZmllbGQsIGJvb2xlYW4gdHJhbnNpdGlvbnMpIHsK\nICAgICAgICByZXR1cm4gZmV0Y2goZmllbGQpOwogICAgfQoKICAgIHB1Ymxp\nYyBPYmplY3QgZmV0Y2hJbml0aWFsRmllbGQoaW50IGZpZWxkKSB7CiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UmVtb3RlKGludCBmaWVsZCwg\nT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgc3RvcmUoZmllbGQsIHZhbHVlKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2NrKCkgewogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHVubG9jaygpIHsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB0aGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQgYmFz\nZWQgb24gaXRzIHR5cGUuCiAgICAgKi8KICAgIHByaXZhdGUgT2JqZWN0IGdl\ndERlZmF1bHRWYWx1ZShpbnQgZmllbGQpIHsKICAgICAgICBGaWVsZE1ldGFE\nYXRhIGZtZCA9IGdldE1ldGFEYXRhKCkuZ2V0RmllbGQoZmllbGQpOwogICAg\nICAgIHN3aXRjaCAoZm1kLmdldERlY2xhcmVkVHlwZUNvZGUoKSkgewogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOOgogICAgICAgICAgICAg\nICAgcmV0dXJuIEJvb2xlYW4uRkFMU0U7CiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLkJZVEU6CiAgICAgICAgICAgICAgICByZXR1cm4gWkVST19CWVRF\nOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DSEFSOgogICAgICAgICAg\nICAgICAgcmV0dXJuIFpFUk9fQ0hBUjsKICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuRE9VQkxFOgogICAgICAgICAgICAgICAgcmV0dXJuIFpFUk9fRE9V\nQkxFOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5GTE9BVDoKICAgICAg\nICAgICAgICAgIHJldHVybiBaRVJPX0ZMT0FUOwogICAgICAgICAgICBjYXNl\nIEphdmFUeXBlcy5JTlQ6CiAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVy\ncy52YWx1ZU9mKDApOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5MT05H\nOgogICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcnMudmFsdWVPZigwTCk7\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNIT1JUOgogICAgICAgICAg\nICAgICAgcmV0dXJuIFpFUk9fU0hPUlQ7CiAgICAgICAgICAgIGRlZmF1bHQ6\nCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBnaXZl\nbiBmaWVsZCB1c2luZyByZWZsZWN0aW9uLgogICAgICogUmVsaWVzIG9uIHRo\nZSBmYWN0IHRoYXQgYWxsIG9pZCBmaWVsZHMvcHJvcGVydGllcyBhcmUgbWFk\nZSBwdWJsaWMKICAgICAqIGR1cmluZyBlbmhhbmNlbWVudC4KICAgICAqLwog\nICAgcHJpdmF0ZSBPYmplY3QgZ2V0VmFsdWUoaW50IGZpZWxkKSB7CiAgICAg\nICAgaWYgKF9vaWQgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7\nCgogICAgICAgIEZpZWxkTWV0YURhdGEgZm1kID0gZ2V0TWV0YURhdGEoKS5n\nZXRGaWVsZChmaWVsZCk7CiAgICAgICAgaWYgKGZtZC5nZXRCYWNraW5nTWVt\nYmVyKCkgaW5zdGFuY2VvZiBGaWVsZCkKICAgICAgICAgICAgcmV0dXJuIFJl\nZmxlY3Rpb24uZ2V0KF9vaWQsIChGaWVsZCkgZm1kLmdldEJhY2tpbmdNZW1i\nZXIoKSk7CiAgICAgICAgaWYgKGZtZC5nZXRCYWNraW5nTWVtYmVyKCkgaW5z\ndGFuY2VvZiBNZXRob2QpCiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0aW9u\nLmdldChfb2lkLCAoTWV0aG9kKSBmbWQuZ2V0QmFja2luZ01lbWJlcigpKTsK\nCiAgICAgICAgaWYgKGZtZC5nZXREZWZpbmluZ01ldGFEYXRhKCkuZ2V0QWNj\nZXNzVHlwZSgpCiAgICAgICAgICAgID09IENsYXNzTWV0YURhdGEuQUNDRVNT\nX0ZJRUxEKQogICAgICAgICAgICByZXR1cm4gUmVmbGVjdGlvbi5nZXQoX29p\nZCwgUmVmbGVjdGlvbi5maW5kRmllbGQoX29pZC5nZXRDbGFzcygpLCAKICAg\nICAgICAgICAgICAgIGZtZC5nZXROYW1lKCksIHRydWUpKTsKICAgICAgICBy\nZXR1cm4gUmVmbGVjdGlvbi5nZXQoX29pZCwgUmVmbGVjdGlvbi5maW5kR2V0\ndGVyKF9vaWQuZ2V0Q2xhc3MoKSwKICAgICAgICAgICAgZm1kLmdldE5hbWUo\nKSwgdHJ1ZSkpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSB2YWx1\nZSBvZiB0aGUgZ2l2ZW4gZmllbGQgdXNpbmcgcmVmbGVjdGlvbi4KICAgICAq\nIFJlbGllcyBvbiB0aGUgZmFjdCB0aGF0IGFsbCBvaWQgZmllbGRzL3Byb3Bl\ncnRpZXMgYXJlIG1hZGUgcHVibGljCiAgICAgKiBkdXJpbmcgZW5oYW5jZW1l\nbnQuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBzZXRWYWx1ZShpbnQgZmll\nbGQsIE9iamVjdCB2YWwsIGJvb2xlYW4gZm9yY2VJbnN0KSB7CiAgICAgICAg\naWYgKF9vaWQgPT0gbnVsbCAmJiBmb3JjZUluc3QpIHsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIF9vaWQgPSBBY2Nlc3NDb250cm9sbGVy\nLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgICAgICBKMkRvUHJpdkhl\nbHBlci5uZXdJbnN0YW5jZUFjdGlvbigKICAgICAgICAgICAgICAgICAgICAg\nICAgZ2V0TWV0YURhdGEoKS5nZXREZXNjcmliZWRUeXBlKCkpKTsKICAgICAg\nICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAg\nIGlmIChlIGluc3RhbmNlb2YgUHJpdmlsZWdlZEFjdGlvbkV4Y2VwdGlvbikK\nICAgICAgICAgICAgICAgICAgICBlID0gKChQcml2aWxlZ2VkQWN0aW9uRXhj\nZXB0aW9uKSBlKS5nZXRFeGNlcHRpb24oKTsKICAgICAgICAgICAgICAgIHRo\ncm93IG5ldyBHZW5lcmFsRXhjZXB0aW9uKGUpOwogICAgICAgICAgICB9CiAg\nICAgICAgfSBlbHNlIGlmIChfb2lkID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybjsKCiAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQgPSBnZXRNZXRhRGF0\nYSgpLmdldEZpZWxkKGZpZWxkKTsKICAgICAgICBpZiAoZm1kLmdldEJhY2tp\nbmdNZW1iZXIoKSBpbnN0YW5jZW9mIEZpZWxkKQogICAgICAgICAgICBSZWZs\nZWN0aW9uLnNldChfb2lkLCAoRmllbGQpIGZtZC5nZXRCYWNraW5nTWVtYmVy\nKCksIHZhbCk7CiAgICAgICAgZWxzZSBpZiAoZm1kLmdldERlZmluaW5nTWV0\nYURhdGEoKS5nZXRBY2Nlc3NUeXBlKCkKICAgICAgICAgICAgPT0gQ2xhc3NN\nZXRhRGF0YS5BQ0NFU1NfRklFTEQpIHsKICAgICAgICAgICAgUmVmbGVjdGlv\nbi5zZXQoX29pZCwgUmVmbGVjdGlvbi5maW5kRmllbGQoX29pZC5nZXRDbGFz\ncygpLCAKICAgICAgICAgICAgICAgIGZtZC5nZXROYW1lKCksIHRydWUpLCB2\nYWwpOwogICAgICAgIH0gZWxzZQogICAgICAgICAgICBSZWZsZWN0aW9uLnNl\ndChfb2lkLCBSZWZsZWN0aW9uLmZpbmRTZXR0ZXIoX29pZC5nZXRDbGFzcygp\nLAogICAgICAgICAgICAgICAgZm1kLmdldE5hbWUoKSwgZm1kLmdldERlY2xh\ncmVkVHlwZSgpLCB0cnVlKSwgdmFsKTsKCX0KfQo=\n","encoding":"base64"}

