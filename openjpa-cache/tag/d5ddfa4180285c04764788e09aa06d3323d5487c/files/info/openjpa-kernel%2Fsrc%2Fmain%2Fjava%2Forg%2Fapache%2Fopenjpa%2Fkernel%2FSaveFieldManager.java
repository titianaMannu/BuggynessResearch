{"sha":"9a8b0f45b1c4911b72dbe6238efacf964d297f53","node_id":"MDQ6QmxvYjIwNjM2NDo5YThiMGY0NWIxYzQ5MTFiNzJkYmU2MjM4ZWZhY2Y5NjRkMjk3ZjUz","size":8633,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9a8b0f45b1c4911b72dbe6238efacf964d297f53","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLk9iamVjdElucHV0\nU3RyZWFtOwppbXBvcnQgamF2YS5pby5PYmplY3RPdXRwdXRTdHJlYW07Cmlt\ncG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKaW1wb3J0IGphdmEudXRpbC5C\naXRTZXQ7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGph\ndmEudXRpbC5EYXRlOwppbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QZXJzaXN0ZW5jZUNhcGFibGU7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFEYXRh\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuUHJveHlNYW5hZ2VyOwoK\nLyoqCiAqIEZpZWxkTWFuYWdlciB0eXBlIHVzZWQgdG8gc3RvcmUgaW5mb3Jt\nYXRpb24gZm9yIHJvbGxiYWNrLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQog\nKi8KcHVibGljIGNsYXNzIFNhdmVGaWVsZE1hbmFnZXIKICAgIGV4dGVuZHMg\nQ2xlYXJGaWVsZE1hbmFnZXIKICAgIGltcGxlbWVudHMgU2VyaWFsaXphYmxl\nIHsKCiAgICBwcml2YXRlIGZpbmFsIFN0YXRlTWFuYWdlckltcGwgX3NtOwog\nICAgcHJpdmF0ZSBmaW5hbCBCaXRTZXQgX3VubG9hZGVkOwogICAgcHJpdmF0\nZSBCaXRTZXQgX3NhdmVkID0gbnVsbDsKICAgIHByaXZhdGUgaW50W10gX2Nv\ncHlGaWVsZCA9IG51bGw7CiAgICBwcml2YXRlIHRyYW5zaWVudCBQZXJzaXN0\nZW5jZUNhcGFibGUgX3N0YXRlID0gbnVsbDsKCiAgICAvLyB1c2VkIHRvIHRy\nYWNrIGZpZWxkIHZhbHVlIGR1cmluZyBzdG9yZS9mZXRjaCBjeWNsZQogICAg\ncHJpdmF0ZSBPYmplY3QgX2ZpZWxkID0gbnVsbDsKCiAgICAvKioKICAgICAq\nIENvbnN0cnVjdG9yLiBQcm92aWRlIHtAbGluayBTdGF0ZU1hbmFnZXJJbXBs\nfSBvZiBpbnN0YW5jZSB0byBzYXZlLgogICAgICovCiAgICBTYXZlRmllbGRN\nYW5hZ2VyKFN0YXRlTWFuYWdlckltcGwgc20sIFBlcnNpc3RlbmNlQ2FwYWJs\nZSBwYywgQml0U2V0IGRpcnR5KSB7CiAgICAgICAgX3NtID0gc207CiAgICAg\nICAgX3N0YXRlID0gcGM7CgogICAgICAgIC8vIGlmIGluc3RhbmNlIGlzIG5l\ndyBvciB0cmFuc2llbnQgYWxsIGZpZWxkcyB3aWxsIGJlIG1hcmtlZCBkaXJ0\neSBldmVuCiAgICAgICAgLy8gdGhvdWdoIHRoZXkgaGF2ZSB0aGVpciBvcmln\naW5hbCB2YWx1ZXMsIHNvIHdlIGNhbiByZXN0b3JlIHRoZW07CiAgICAgICAg\nLy8gb3RoZXJ3aXNlLCB3ZSBuZWVkIHRvIHJlY29yZCBhbHJlYWR5LWRpcnR5\nIHBlcnNpc3RlbnQgZmllbGRzIGFzCiAgICAgICAgLy8gb25lcyB3ZSB3b24n\ndCBiZSBhYmxlIHRvIHJlc3RvcmUKICAgICAgICBGaWVsZE1ldGFEYXRhW10g\nZmllbGRzID0gX3NtLmdldE1ldGFEYXRhKCkuZ2V0RmllbGRzKCk7CiAgICAg\nICAgaWYgKF9zbS5pc05ldygpIHx8ICFfc20uaXNQZXJzaXN0ZW50KCkgfHwg\nZGlydHkgPT0gbnVsbCkKICAgICAgICAgICAgX3VubG9hZGVkID0gbmV3IEJp\ndFNldChmaWVsZHMubGVuZ3RoKTsKICAgICAgICBlbHNlIHsKICAgICAgICAg\nICAgX3VubG9hZGVkID0gKEJpdFNldCkgZGlydHkuY2xvbmUoKTsKICAgICAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKysp\nCiAgICAgICAgICAgICAgICBpZiAoZmllbGRzW2ldLmdldE1hbmFnZW1lbnQo\nKSAhPSBmaWVsZHNbaV0uTUFOQUdFX1BFUlNJU1RFTlQpCiAgICAgICAgICAg\nICAgICAgICAgX3VubG9hZGVkLmNsZWFyKGkpOwogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgcGVyc2lzdGVuY2UgY2FwYWJs\nZSBjb3B5IGhvbGRpbmcgdGhlIHJvbGxiYWNrIGZpZWxkIHZhbHVlcy4KICAg\nICAqLwogICAgcHVibGljIFBlcnNpc3RlbmNlQ2FwYWJsZSBnZXRTdGF0ZSgp\nIHsKICAgICAgICByZXR1cm4gX3N0YXRlOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSBjdXJyZW50bHktbG9hZGVkIGZpZWxkcyB0aGF0IHdp\nbGwgYmUgdW5sb2FkZWQgYWZ0ZXIgcm9sbGJhY2suCiAgICAgKi8KICAgIHB1\nYmxpYyBCaXRTZXQgZ2V0VW5sb2FkZWQoKSB7CiAgICAgICAgcmV0dXJuIF91\nbmxvYWRlZDsKICAgIH0KCiAgICAvKioKICAgICAqIFNhdmUgdGhlIGdpdmVu\nIGZpZWxkLiBJZiB0aGlzIG1ldGhvZCByZXR1cm5zIHRydWUsIHRoZW4geW91\nIG5lZWQKICAgICAqIHRvIHVzZSB0aGlzIGZpZWxkIG1hbmFnZXIgdG8gcmVw\nbGFjZSB0aGUgZ2l2ZW4gZmllbGQgaW4gdGhlIGluc3RhbmNlCiAgICAgKiBy\nZXR1cm5lZCBieSB7QGxpbmsgI2dldFN0YXRlfS4KICAgICAqLwogICAgcHVi\nbGljIGJvb2xlYW4gc2F2ZUZpZWxkKGludCBmaWVsZCkgewogICAgICAgIC8v\nIGlmIG5vdCBsb2FkZWQgd2UgY2FuJ3Qgc2F2ZSBvcmlnIHZhbHVlOyBtYXJr\nIGFzIHVubG9hZGVkIG9uIHJvbGxiYWNrCiAgICAgICAgaWYgKF9zbS5nZXRM\nb2FkZWQoKSAhPSBudWxsICYmICFfc20uZ2V0TG9hZGVkKCkuZ2V0KGZpZWxk\nKSkgewogICAgICAgICAgICBfdW5sb2FkZWQuc2V0KGZpZWxkKTsKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgLy8gYWxy\nZWFkeSBzYXZlZD8KICAgICAgICBpZiAoX3NhdmVkICE9IG51bGwgJiYgX3Nh\ndmVkLmdldChmaWVsZCkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAg\nICAgICAgRmllbGRNZXRhRGF0YSBmbWQgPSBfc20uZ2V0TWV0YURhdGEoKS5n\nZXRGaWVsZChmaWVsZCk7CiAgICAgICAgYm9vbGVhbiBtdXRhYmxlID0gZmFs\nc2U7CiAgICAgICAgc3dpdGNoIChmbWQuZ2V0RGVjbGFyZWRUeXBlQ29kZSgp\nKSB7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkRBVEU6CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkFSUkFZOgogICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5DT0xMRUNUSU9OOgogICAgICAgICAgICBjYXNlIEphdmFUeXBl\ncy5NQVA6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk9CSkVDVDoKICAg\nICAgICAgICAgICAgIG11dGFibGUgPSB0cnVlOwogICAgICAgIH0KCiAgICAg\nICAgLy8gaWYgdGhpcyBpcyBub3QgYW4gaW52ZXJzZSBmaWVsZCBhbmQgdGhl\nIHByb3BlciByZXN0b3JlIGZsYWcgaXMKICAgICAgICAvLyBub3Qgc2V0LCBz\na2lwIGl0CgogICAgICAgIGlmIChfc20uZ2V0QnJva2VyKCkuZ2V0SW52ZXJz\nZU1hbmFnZXIoKSA9PSBudWxsCiAgICAgICAgICAgIHx8IGZtZC5nZXRJbnZl\ncnNlTWV0YURhdGFzKCkubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgLy8g\ndXNlIHNtJ3MgcmVzdG9yZSBkaXJlY3RpdmUsIG5vdCBicm9rZXIncwogICAg\nICAgICAgICBpbnQgcmVzdG9yZSA9IF9zbS5nZXRCcm9rZXIoKS5nZXRSZXN0\nb3JlU3RhdGUoKTsKICAgICAgICAgICAgaWYgKHJlc3RvcmUgPT0gUmVzdG9y\nZVN0YXRlLlJFU1RPUkVfTk9ORQogICAgICAgICAgICAgICAgfHwgKG11dGFi\nbGUgJiYgcmVzdG9yZSA9PSBSZXN0b3JlU3RhdGUuUkVTVE9SRV9JTU1VVEFC\nTEUpKSB7CiAgICAgICAgICAgICAgICBfdW5sb2FkZWQuc2V0KGZpZWxkKTsK\nICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KCiAgICAgICAgLy8gcHJlcGFyZSB0byBzYXZlIHRoZSBmaWVs\nZAogICAgICAgIGlmIChfc3RhdGUgPT0gbnVsbCkKICAgICAgICAgICAgX3N0\nYXRlID0gX3NtLmdldFBlcnNpc3RlbmNlQ2FwYWJsZSgpLnBjTmV3SW5zdGFu\nY2UoX3NtLCB0cnVlKTsKICAgICAgICBpZiAoX3NhdmVkID09IG51bGwpCiAg\nICAgICAgICAgIF9zYXZlZCA9IG5ldyBCaXRTZXQoX3NtLmdldE1ldGFEYXRh\nKCkuZ2V0RmllbGRzKCkubGVuZ3RoKTsKCiAgICAgICAgX3NhdmVkLnNldChm\naWVsZCk7CgogICAgICAgIC8vIGlmIG11dGFibGUsIHJldHVybiB0cnVlIHRv\nIGluZGljYXRlIHRoYXQgdGhlIGZpZWxkIG5lZWRzIHRvIGJlCiAgICAgICAg\nLy8gY29waWVkIGJ5IHByb3ZpZGluZyBhbmQgcmVwbGFjaW5nIGl0IHVzaW5n\nIHRoaXMgZmllbGQgbWFuYWdlcgogICAgICAgIGlmIChtdXRhYmxlKQogICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgLy8gaW1tdXRhYmxlIGZp\nZWxkcyBjYW4ganVzdCBiZSBjb3BpZWQgb3ZlcgogICAgICAgIGlmIChfY29w\neUZpZWxkID09IG51bGwpCiAgICAgICAgICAgIF9jb3B5RmllbGQgPSBuZXcg\naW50WzFdOwogICAgICAgIF9jb3B5RmllbGRbMF0gPSBmaWVsZDsKICAgICAg\nICBnZXRTdGF0ZSgpLnBjQ29weUZpZWxkcyhfc20uZ2V0UGVyc2lzdGVuY2VD\nYXBhYmxlKCksIF9jb3B5RmllbGQpOwogICAgICAgIHJldHVybiBmYWxzZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJlc3RvcmUgdGhlIGdpdmVuIGZpZWxk\nLiBJZiB0aGlzIG1ldGhvZCByZXR1cm5zIHRydWUsIHRoZW4geW91IG5lZWQK\nICAgICAqIHRvIHVzZSB0aGlzIGZpZWxkIG1hbmFnZXIgdG8gcmVwbGFjZSB0\naGUgZ2l2ZW4gZmllbGQgaW4gdGhlIHN0YXRlCiAgICAgKiBtYW5hZ2VyJ3Mg\naW5zdGFuY2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIHJlc3RvcmVG\naWVsZChpbnQgZmllbGQpIHsKICAgICAgICAvLyBpZiB0aGUgZ2l2ZW4gZmll\nbGQgbmVlZHMgdG8gYmUgdW5sb2FkZWQsIHJldHVybiB0cnVlIHNvIHRoYXQg\naXQgZ2V0cwogICAgICAgIC8vIHJlcGxhY2VkIHdpdGggYSBkZWZhdWx0IHZh\nbHVlCiAgICAgICAgaWYgKF91bmxvYWRlZC5nZXQoZmllbGQpKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgLy8gaWYgdGhlIGZpZWxkIHdh\ncyBub3Qgc2F2ZWQsIGl0IG11c3Qgbm90IGhhdmUgZ290dGVuIGRpcnR5OyBq\ndXN0CiAgICAgICAgLy8gcmV0dXJuIGZhbHNlIHNvIHRoYXQgdGhlIGN1cnJl\nbnQgdmFsdWUgaXMga2VwdAogICAgICAgIGlmIChfc2F2ZWQgPT0gbnVsbCB8\nfCAhX3NhdmVkLmdldChmaWVsZCkpCiAgICAgICAgICAgIHJldHVybiBmYWxz\nZTsKCiAgICAgICAgLy8gY29weSB0aGUgc2F2ZWQgZmllbGQgb3ZlcgogICAg\nICAgIGlmIChfY29weUZpZWxkID09IG51bGwpCiAgICAgICAgICAgIF9jb3B5\nRmllbGQgPSBuZXcgaW50WzFdOwogICAgICAgIF9jb3B5RmllbGRbMF0gPSBm\naWVsZDsKICAgICAgICBfc20uZ2V0UGVyc2lzdGVuY2VDYXBhYmxlKCkucGND\nb3B5RmllbGRzKGdldFN0YXRlKCksIF9jb3B5RmllbGQpOwogICAgICAgIHJl\ndHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbXBhcmUgdGhl\nIGdpdmVuIGZpZWxkLgogICAgICogQHJldHVybiA8Y29kZT50cnVlPC9jb2Rl\nPiBpZiB0aGUgZmllbGQgaXMgdGhlIHNhbWUgaW4gdGhlIGN1cnJlbnQKICAg\nICAqIHN0YXRlIGFuZCBpbiB0aGUgc2F2ZWQgc3RhdGU7IG90aGVyd2lzZSwg\nPGNvZGU+ZmFsc2U8L2NvZGU+LgogICAgICovCiAgICBwdWJsaWMgYm9vbGVh\nbiBpc0ZpZWxkRXF1YWwoaW50IGZpZWxkLCBPYmplY3QgY3VycmVudCkgewog\nICAgICAgIC8vIGlmIHRoZSBmaWVsZCBpcyBub3QgYXZhaWxhYmxlLCBhc3N1\nbWUgdGhhdCBpdCBoYXMgY2hhbmdlZC4KICAgICAgICBpZiAoX3NhdmVkID09\nIG51bGwgfHwgIV9zYXZlZC5nZXQoZmllbGQpKQogICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICAgICAgaWYgKCEoZ2V0U3RhdGUoKS5wY0dldFN0YXRl\nTWFuYWdlcigpIGluc3RhbmNlb2YgU3RhdGVNYW5hZ2VySW1wbCkpCiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgU3RhdGVNYW5hZ2VySW1w\nbCBzbSA9IChTdGF0ZU1hbmFnZXJJbXBsKSBnZXRTdGF0ZSgpLnBjR2V0U3Rh\ndGVNYW5hZ2VyKCk7CiAgICAgICAgU2luZ2xlRmllbGRNYW5hZ2VyIHNpbmds\nZSA9IG5ldyBTaW5nbGVGaWVsZE1hbmFnZXIoc20sIHNtLmdldEJyb2tlcigp\nKTsKICAgICAgICBzbS5wcm92aWRlRmllbGQoZ2V0U3RhdGUoKSwgc2luZ2xl\nLCBmaWVsZCk7CiAgICAgICAgT2JqZWN0IG9sZCA9IHNpbmdsZS5mZXRjaE9i\namVjdEZpZWxkKGZpZWxkKTsKICAgICAgICByZXR1cm4gY3VycmVudCA9PSBv\nbGQgfHwgY3VycmVudCAhPSBudWxsICYmIGN1cnJlbnQuZXF1YWxzKG9sZCk7\nCiAgICB9CgogICAgcHVibGljIE9iamVjdCBmZXRjaE9iamVjdEZpZWxkKGlu\ndCBmaWVsZCkgewogICAgICAgIC8vIHJldHVybiB0aGUgY29waWVkIGZpZWxk\nIGR1cmluZyBzYXZlLCBvciBhIG51bGwgdmFsdWUgZHVyaW5nIHJlc3RvcmUK\nICAgICAgICBPYmplY3QgdmFsID0gX2ZpZWxkOwogICAgICAgIF9maWVsZCA9\nIG51bGw7CiAgICAgICAgcmV0dXJuIHZhbDsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzdG9yZU9iamVjdEZpZWxkKGludCBmaWVsZCwgT2JqZWN0IGN1clZh\nbCkgewogICAgICAgIC8vIGNvcHkgbXV0YWJsZSBmaWVsZHMKICAgICAgICBQ\ncm94eU1hbmFnZXIgcHJveHkgPSBfc20uZ2V0QnJva2VyKCkuZ2V0Q29uZmln\ndXJhdGlvbigpLgogICAgICAgICAgICBnZXRQcm94eU1hbmFnZXJJbnN0YW5j\nZSgpOwogICAgICAgIEZpZWxkTWV0YURhdGEgZm1kID0gX3NtLmdldE1ldGFE\nYXRhKCkuZ2V0RmllbGQoZmllbGQpOwogICAgICAgIHN3aXRjaCAoZm1kLmdl\ndERlY2xhcmVkVHlwZUNvZGUoKSkgewogICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5BUlJBWToKICAgICAgICAgICAgICAgIF9maWVsZCA9IHByb3h5LmNv\ncHlBcnJheShjdXJWYWwpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgIGNhc2UgSmF2YVR5cGVzLkNPTExFQ1RJT046CiAgICAgICAgICAg\nICAgICBfZmllbGQgPSBwcm94eS5jb3B5Q29sbGVjdGlvbigoQ29sbGVjdGlv\nbikgY3VyVmFsKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICBjYXNlIEphdmFUeXBlcy5NQVA6CiAgICAgICAgICAgICAgICBfZmllbGQg\nPSBwcm94eS5jb3B5TWFwKChNYXApIGN1clZhbCk7CiAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuREFURToKICAg\nICAgICAgICAgICAgIF9maWVsZCA9IHByb3h5LmNvcHlEYXRlKChEYXRlKSBj\ndXJWYWwpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLk9CSkVDVDoKICAgICAgICAgICAgICAgIF9maWVsZCA9\nIHByb3h5LmNvcHlDdXN0b20oY3VyVmFsKTsKICAgICAgICAgICAgICAgIGlm\nIChfZmllbGQgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBfZmllbGQg\nPSBjdXJWYWw7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nZGVmYXVsdDoKICAgICAgICAgICAgICAgIF9maWVsZCA9IGN1clZhbDsKICAg\nICAgICB9CgogICAgICAgIC8vIGlmIHdlIGNvdWxkbid0IGdldCBhIGNvcHkg\nb2YgdGhlIHNjbywgYWN0IGxpa2UgaXQgd2Fzbid0IHNhdmVkCiAgICAgICAg\naWYgKGN1clZhbCAhPSBudWxsICYmIF9maWVsZCA9PSBudWxsKSB7CiAgICAg\nICAgICAgIF91bmxvYWRlZC5zZXQoZmllbGQpOwogICAgICAgICAgICBfc2F2\nZWQuY2xlYXIoZmllbGQpOwoJCX0KCX0KCiAgICBwcml2YXRlIHZvaWQgd3Jp\ndGVPYmplY3QoT2JqZWN0T3V0cHV0U3RyZWFtIG9vcykgdGhyb3dzIElPRXhj\nZXB0aW9uIHsKICAgICAgICBvb3MuZGVmYXVsdFdyaXRlT2JqZWN0KCk7CiAg\nICAgICAgX3NtLndyaXRlUEMob29zLCBfc3RhdGUpOwogICAgfQoKICAgIHBy\naXZhdGUgdm9pZCByZWFkT2JqZWN0KE9iamVjdElucHV0U3RyZWFtIG9pcykK\nICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIENsYXNzTm90Rm91bmRFeGNl\ncHRpb24gewogICAgICAgIG9pcy5kZWZhdWx0UmVhZE9iamVjdCgpOwogICAg\nICAgIF9zdGF0ZSA9IF9zbS5yZWFkUEMob2lzKTsKICAgIH0KfQo=\n","encoding":"base64"}

