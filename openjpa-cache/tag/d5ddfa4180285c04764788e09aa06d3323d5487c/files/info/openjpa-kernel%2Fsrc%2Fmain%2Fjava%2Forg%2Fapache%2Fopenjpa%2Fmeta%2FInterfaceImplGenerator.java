{"sha":"5f6fdd2b0e9de608c0f85548dcbface6b5b0daba","node_id":"MDQ6QmxvYjIwNjM2NDo1ZjZmZGQyYjBlOWRlNjA4YzBmODU1NDhkY2JmYWNlNmI1YjBkYWJh","size":9207,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5f6fdd2b0e9de608c0f85548dcbface6b5b0daba","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YTsKCmltcG9ydCBqYXZh\nLmxhbmcucmVmbGVjdC5NZXRob2Q7CmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJh\neUlucHV0U3RyZWFtOwppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250\ncm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Qcml2aWxlZ2VkQWN0aW9u\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLlNldDsKaW1wb3J0IGphdmEu\ndXRpbC5IYXNoU2V0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGph\ndmEudXRpbC5XZWFrSGFzaE1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1v\nbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5lbmhhbmNlLlBDRW5oYW5jZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5JbnRlcm5hbEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBzZXJw\nLmJ5dGVjb2RlLkJDQ2xhc3M7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLkJDQ2xh\nc3NMb2FkZXI7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLkJDRmllbGQ7CmltcG9y\ndCBzZXJwLmJ5dGVjb2RlLkJDTWV0aG9kOwppbXBvcnQgc2VycC5ieXRlY29k\nZS5Db2RlOwppbXBvcnQgc2VycC5ieXRlY29kZS5Db25zdGFudHM7CmltcG9y\ndCBzZXJwLmJ5dGVjb2RlLlByb2plY3Q7CgovKioKICogQ3JlYXRlcyBpbXBs\nZW1lbnRhdGlvbnMgb2YgbWFuYWdlZCBpbnRlcmZhY2VzLiAgV2lsbCB0aHJv\ndyBleGNlcHRpb25zCiAqIG9uIHVua25vd24gcHJvcGVydGllcy4KICoKICog\nQGF1dGhvciBTdGV2ZSBLaW0KICovCmNsYXNzIEludGVyZmFjZUltcGxHZW5l\ncmF0b3IgewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9s\nb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChJbnRlcmZhY2VJ\nbXBsR2VuZXJhdG9yLmNsYXNzKTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIFN0cmluZyBQT1NURklYID0gIm9wZW5qcGFpbXBsIjsKCiAgICBwcml2YXRl\nIGZpbmFsIE1ldGFEYXRhUmVwb3NpdG9yeSBfcmVwb3M7CiAgICBwcml2YXRl\nIGZpbmFsIE1hcCBfaW1wbHMgPSBuZXcgV2Vha0hhc2hNYXAoKTsKICAgIHBy\naXZhdGUgZmluYWwgUHJvamVjdCBfcHJvamVjdCA9IG5ldyBQcm9qZWN0KCk7\nCiAKICAgIC8vIGRpc3RpbmN0IHByb2plY3QgLyBsb2FkZXIgZm9yIGVuaGFu\nY2VkIHZlcnNpb24gb2YgY2xhc3MKICAgIHByaXZhdGUgZmluYWwgUHJvamVj\ndCBfZW5oUHJvamVjdCA9IG5ldyBQcm9qZWN0KCk7CgogICAgLyoqCiAgICAg\nKiBDb25zdHJ1Y3Rvci4gIFN1cHBseSByZXBvc2l0b3J5LgogICAgICovCiAg\nICBwdWJsaWMgSW50ZXJmYWNlSW1wbEdlbmVyYXRvcihNZXRhRGF0YVJlcG9z\naXRvcnkgcmVwb3MpIHsKICAgICAgICBfcmVwb3MgPSByZXBvczsKICAgIH0K\nCiAgICAvKioKICAgICAqIENyZWF0ZSBhIGNvbmNyZXRlIGltcGxlbWVudGF0\naW9uIG9mIHRoZSBnaXZlbiB0eXBlLCBwb3NzaWJseQogICAgICogcmV0dXJu\naW5nIGEgY2FjaGVkIHZlcnNpb24gb2YgdGhlIGNsYXNzLgogICAgICovCiAg\nICBwdWJsaWMgc3luY2hyb25pemVkIENsYXNzIGNyZWF0ZUltcGwoQ2xhc3NN\nZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgQ2xhc3MgaWZhY2UgPSBtZXRhLmdl\ndERlc2NyaWJlZFR5cGUoKTsKCiAgICAgICAgLy8gY2hlY2sgY2FjaGUuCiAg\nICAgICAgQ2xhc3MgaW1wbCA9IChDbGFzcykgX2ltcGxzLmdldChpZmFjZSk7\nCiAgICAgICAgaWYgKGltcGwgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIGltcGw7CgogICAgICAgIENsYXNzTG9hZGVyIHBhcmVudExvYWRlciA9IChD\nbGFzc0xvYWRlcikgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAg\nICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdldENsYXNzTG9hZGVyQWN0aW9u\nKGlmYWNlKSk7IAogICAgICAgIEJDQ2xhc3NMb2FkZXIgbG9hZGVyID0gKEJD\nQ2xhc3NMb2FkZXIpIEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgLmRv\nUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlci5uZXdCQ0NsYXNzTG9hZGVyQWN0\naW9uKF9wcm9qZWN0LAogICAgICAgICAgICAgICAgcGFyZW50TG9hZGVyKSk7\nCiAgICAgICAgQkNDbGFzc0xvYWRlciBlbmhMb2FkZXIgPSAoQkNDbGFzc0xv\nYWRlcikgQWNjZXNzQ29udHJvbGxlcgogICAgICAgICAgICAuZG9Qcml2aWxl\nZ2VkKEoyRG9Qcml2SGVscGVyLm5ld0JDQ2xhc3NMb2FkZXJBY3Rpb24oX2Vu\naFByb2plY3QsCiAgICAgICAgICAgICAgICBwYXJlbnRMb2FkZXIpKTsKICAg\nICAgICBCQ0NsYXNzIGJjID0gX3Byb2plY3QubG9hZENsYXNzKGdldENsYXNz\nTmFtZShtZXRhKSk7CiAgICAgICAgYmMuZGVjbGFyZUludGVyZmFjZShpZmFj\nZSk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBzdXAgPSBtZXRhLmdldFBDU3Vw\nZXJjbGFzc01ldGFEYXRhKCk7CiAgICAgICAgaWYgKHN1cCAhPSBudWxsKSB7\nCiAgICAgICAgICAgIGJjLnNldFN1cGVyY2xhc3Moc3VwLmdldEludGVyZmFj\nZUltcGwoKSk7CiAgICAgICAgICAgIGVuaExvYWRlciA9IChCQ0NsYXNzTG9h\nZGVyKSBBY2Nlc3NDb250cm9sbGVyCiAgICAgICAgICAgICAgICAuZG9Qcml2\naWxlZ2VkKEoyRG9Qcml2SGVscGVyLm5ld0JDQ2xhc3NMb2FkZXJBY3Rpb24o\nCiAgICAgICAgICAgICAgICAgICAgX2VuaFByb2plY3QsIChDbGFzc0xvYWRl\ncikgQWNjZXNzQ29udHJvbGxlcgogICAgICAgICAgICAgICAgICAgICAgICAu\nZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyLmdldENsYXNzTG9hZGVyQWN0\naW9uKHN1cAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldEludGVy\nZmFjZUltcGwoKSkpKSk7CiAgICAgICAgfQoKICAgICAgICBGaWVsZE1ldGFE\nYXRhW10gZmllbGRzID0gbWV0YS5nZXREZWNsYXJlZEZpZWxkcygpOwogICAg\nICAgIFNldCBtZXRob2RzID0gbmV3IEhhc2hTZXQoKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykgCiAgICAgICAg\nICAgIGFkZEZpZWxkKGJjLCBpZmFjZSwgZmllbGRzW2ldLCBtZXRob2RzKTsK\nICAgICAgICBpbnZhbGlkYXRlTm9uQmVhbk1ldGhvZHMoYmMsIGlmYWNlLCBt\nZXRob2RzKTsKCiAgICAgICAgLy8gZmlyc3QgbG9hZCB0aGUgYmFzZSBjbGFz\ncyBhcyB0aGUgZW5oYW5jZXIgcmVxdWlyZXMgdGhlIGNsYXNzCiAgICAgICAg\nLy8gdG8gYmUgYXZhaWxhYmxlCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nbWV0YS5zZXRJbnRlcmZhY2VJbXBsKENsYXNzLmZvck5hbWUoYmMuZ2V0TmFt\nZSgpLCB0cnVlLCBsb2FkZXIpKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2Fi\nbGUgdCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRp\nb24oX2xvYy5nZXQoImludGVyZmFjZS1sb2FkIiwgaWZhY2UsIAogICAgICAg\nICAgICAgICAgbG9hZGVyKSwgdCkuc2V0RmF0YWwodHJ1ZSk7CiAgICAgICAg\nfQogICAgICAgIC8vIGNvcHkgdGhlIEJDQ2xhc3MgaW50byB0aGUgZW5oYW5j\nZXIgcHJvamVjdC4KICAgICAgICBiYyA9IF9lbmhQcm9qZWN0LmxvYWRDbGFz\ncyhuZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0oYmMudG9CeXRlQXJyYXkoKSks\nIAogICAgICAgICAgICBsb2FkZXIpOwogICAgICAgIFBDRW5oYW5jZXIgZW5o\nYW5jZXIgPSBuZXcgUENFbmhhbmNlcihfcmVwb3MsIGJjLCBtZXRhKTsKCiAg\nICAgICAgaW50IHJlc3VsdCA9IGVuaGFuY2VyLnJ1bigpOwogICAgICAgIGlm\nIChyZXN1bHQgIT0gUENFbmhhbmNlci5FTkhBTkNFX1BDKQogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oX2xvYy5nZXQoImludGVy\nZmFjZS1iYWRlbmhhbmNlIiwgCiAgICAgICAgICAgICAgICBpZmFjZSkpLnNl\ndEZhdGFsKHRydWUpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIGxv\nYWQgdGhlIGNsYXNzIGZvciByZWFsLgogICAgICAgICAgICBpbXBsID0gQ2xh\nc3MuZm9yTmFtZShiYy5nZXROYW1lKCksIHRydWUsIGVuaExvYWRlcik7CiAg\nICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKF9sb2MuZ2V0KCJpbnRlcmZhY2Ut\nbG9hZDIiLCBpZmFjZSwgCiAgICAgICAgICAgICAgICBlbmhMb2FkZXIpLCB0\nKS5zZXRGYXRhbCh0cnVlKTsKICAgICAgICB9CiAgICAgICAgLy8gY2FjaGUg\ndGhlIGdlbmVyYXRlZCBpbXBsLgogICAgICAgIF9pbXBscy5wdXQoaWZhY2Us\nIGltcGwpOwogICAgICAgIHJldHVybiBpbXBsOwogICAgfQoKICAgIC8qKgog\nICAgICogQWRkIGJlYW4gZ2V0dGVycyBhbmQgc2V0dGVycywgYWxzbyByZWNv\ncmRpbmcgc2VlbiBtZXRob2RzCiAgICAgKiBpbnRvIHRoZSBnaXZlbiBzZXQu\nCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBhZGRGaWVsZCAoQkNDbGFzcyBi\nYywgQ2xhc3MgaWZhY2UsIEZpZWxkTWV0YURhdGEgZm1kLCAKICAgICAgICBT\nZXQgbWV0aG9kcykgewogICAgICAgIFN0cmluZyBuYW1lID0gZm1kLmdldE5h\nbWUoKTsKICAgICAgICBDbGFzcyB0eXBlID0gZm1kLmdldERlY2xhcmVkVHlw\nZSgpOwogICAgICAgIEJDRmllbGQgZmllbGQgPSBiYy5kZWNsYXJlRmllbGQo\nbmFtZSwgdHlwZSk7CiAgICAgICAgZmllbGQuc2V0QWNjZXNzRmxhZ3MoQ29u\nc3RhbnRzLkFDQ0VTU19QUklWQVRFKTsKCiAgICAgICAgLy8gZ2V0dGVyCiAg\nICAgICAgbmFtZSA9IFN0cmluZ1V0aWxzLmNhcGl0YWxpemUobmFtZSk7CiAg\nICAgICAgU3RyaW5nIHByZWZpeCA9IGlzR2V0dGVyKGlmYWNlLCBmbWQpID8g\nImdldCIgOiAiaXMiOwogICAgICAgIEJDTWV0aG9kIG1ldGggPSBiYy5kZWNs\nYXJlTWV0aG9kKHByZWZpeCArIG5hbWUsIHR5cGUsIG51bGwpOwogICAgICAg\nIG1ldGgubWFrZVB1YmxpYygpOwogICAgICAgIENvZGUgY29kZSA9IG1ldGgu\nZ2V0Q29kZSh0cnVlKTsKICAgICAgICBjb2RlLmFsb2FkKCkuc2V0VGhpcygp\nOwogICAgICAgIGNvZGUuZ2V0ZmllbGQoKS5zZXRGaWVsZChmaWVsZCk7CiAg\nICAgICAgY29kZS54cmV0dXJuKCkuc2V0VHlwZSh0eXBlKTsKICAgICAgICBj\nb2RlLmNhbGN1bGF0ZU1heFN0YWNrKCk7CiAgICAgICAgY29kZS5jYWxjdWxh\ndGVNYXhMb2NhbHMoKTsKICAgICAgICBtZXRob2RzLmFkZChnZXRNZXRob2RT\nYWZlKGlmYWNlLCBtZXRoLmdldE5hbWUoKSwgbnVsbCkpOwoKICAgICAgICAv\nLyBzZXR0ZXIKICAgICAgICBtZXRoID0gYmMuZGVjbGFyZU1ldGhvZCgic2V0\nIiArIG5hbWUsIHZvaWQuY2xhc3MsIG5ldyBDbGFzc1tde3R5cGV9KTsKICAg\nICAgICBtZXRoLm1ha2VQdWJsaWMoKTsKICAgICAgICBjb2RlID0gbWV0aC5n\nZXRDb2RlKHRydWUpOwogICAgICAgIGNvZGUuYWxvYWQoKS5zZXRUaGlzKCk7\nCiAgICAgICAgY29kZS54bG9hZCgpLnNldFBhcmFtKDApLnNldFR5cGUodHlw\nZSk7CiAgICAgICAgY29kZS5wdXRmaWVsZCgpLnNldEZpZWxkKGZpZWxkKTsK\nICAgICAgICBjb2RlLnZyZXR1cm4oKTsKICAgICAgICBjb2RlLmNhbGN1bGF0\nZU1heFN0YWNrKCk7CiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhMb2NhbHMo\nKTsKICAgICAgICBtZXRob2RzLmFkZChnZXRNZXRob2RTYWZlKGlmYWNlLCBt\nZXRoLmdldE5hbWUoKSwgdHlwZSkpOwogICAgfQoKICAgIC8qKgogICAgICog\nSW52YWxpZGF0ZSBtZXRob2RzIG9uIHRoZSBpbnRlcmZhY2Ugd2hpY2ggYXJl\nIG5vdCBtYW5hZ2VkLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgaW52YWxp\nZGF0ZU5vbkJlYW5NZXRob2RzKEJDQ2xhc3MgYmMsIENsYXNzIGlmYWNlLCAK\nICAgICAgICBTZXQgbWV0aG9kcykgewogICAgICAgIE1ldGhvZFtdIG1ldGhz\nID0gKE1ldGhvZFtdKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgK\nICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0RGVjbGFyZWRNZXRob2Rz\nQWN0aW9uKGlmYWNlKSk7IAogICAgICAgIEJDTWV0aG9kIG1ldGg7CiAgICAg\nICAgQ29kZSBjb2RlOwogICAgICAgIENsYXNzIHR5cGUgPSBfcmVwb3MuZ2V0\nTWV0YURhdGFGYWN0b3J5KCkuZ2V0RGVmYXVsdHMoKS4KICAgICAgICAgICAg\nZ2V0VW5pbXBsZW1lbnRlZEV4Y2VwdGlvblR5cGUoKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IG1ldGhzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIGlmIChtZXRob2RzLmNvbnRhaW5zKG1ldGhzW2ldKSkKICAgICAgICAg\nICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBtZXRoID0gYmMuZGVjbGFy\nZU1ldGhvZChtZXRoc1tpXS5nZXROYW1lKCksIAogICAgICAgICAgICAgICAg\nbWV0aHNbaV0uZ2V0UmV0dXJuVHlwZSgpLCBtZXRoc1tpXS5nZXRQYXJhbWV0\nZXJUeXBlcygpKTsKICAgICAgICAgICAgbWV0aC5tYWtlUHVibGljKCk7CiAg\nICAgICAgICAgIGNvZGUgPSBtZXRoLmdldENvZGUodHJ1ZSk7CiAgICAgICAg\nICAgIGNvZGUuYW5ldygpLnNldFR5cGUodHlwZSk7CiAgICAgICAgICAgIGNv\nZGUuZHVwKCk7CiAgICAgICAgICAgIGNvZGUuaW52b2tlc3BlY2lhbCgpLnNl\ndE1ldGhvZCh0eXBlLCAiPGluaXQ+Iiwgdm9pZC5jbGFzcywgbnVsbCk7CiAg\nICAgICAgICAgIGNvZGUuYXRocm93KCk7CiAgICAgICAgICAgIGNvZGUuY2Fs\nY3VsYXRlTWF4TG9jYWxzKCk7CiAgICAgICAgICAgIGNvZGUuY2FsY3VsYXRl\nTWF4U3RhY2soKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gYSB1bmlxdWUgY2xhc3MgbmFtZS4KICAgICAqLwogICAgcHJvdGVj\ndGVkIGZpbmFsIFN0cmluZyBnZXRDbGFzc05hbWUoQ2xhc3NNZXRhRGF0YSBt\nZXRhKSB7CiAgICAgICAgQ2xhc3MgaWZhY2UgPSBtZXRhLmdldERlc2NyaWJl\nZFR5cGUoKTsKICAgICAgICByZXR1cm4gaWZhY2UuZ2V0TmFtZSgpICsgIiQi\nICsgU3lzdGVtLmlkZW50aXR5SGFzaENvZGUoaWZhY2UpICsgUE9TVEZJWDsK\nICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBy\nZXR1cm4gdGhlIGdpdmVuIG1ldGhvZCAvIGFyZy4KICAgICAqLwogICAgcHJp\ndmF0ZSBzdGF0aWMgTWV0aG9kIGdldE1ldGhvZFNhZmUoQ2xhc3MgaWZhY2Us\nIFN0cmluZyBuYW1lLCBDbGFzcyBhcmcpIHsKICAgICAgICB0cnkgewogICAg\nICAgICAgICByZXR1cm4gKE1ldGhvZCkgQWNjZXNzQ29udHJvbGxlci5kb1By\naXZpbGVnZWQoCiAgICAgICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRE\nZWNsYXJlZE1ldGhvZEFjdGlvbigKICAgICAgICAgICAgICAgICAgICBpZmFj\nZSwgbmFtZSwgYXJnID09IG51bGwgPyBudWxsIDogbmV3IENsYXNzW117YXJn\nfSkpOwogICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRBY3Rpb25FeGNlcHRp\nb24gcGFlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2Vw\ndGlvbiAoX2xvYy5nZXQgKCJpbnRlcmZhY2UtbWlzbWF0Y2giLCBuYW1lKSk7\nCiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4g\naXNHZXR0ZXIoQ2xhc3MgaWZhY2UsIEZpZWxkTWV0YURhdGEgZm1kKSB7CiAg\nICAgICAgaWYgKGZtZC5nZXRUeXBlKCkgIT0gYm9vbGVhbi5jbGFzcyAmJiBm\nbWQuZ2V0VHlwZSgpICE9IEJvb2xlYW4uY2xhc3MpCiAgICAgICAgICAgIHJl\ndHVybiB0cnVlOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE1ldGhvZCBt\nZXRoID0gKE1ldGhvZCkgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQo\nCiAgICAgICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXREZWNsYXJlZE1l\ndGhvZEFjdGlvbihpZmFjZSwgImlzIiArCiAgICAgICAgICAgICAgICAgICAg\nU3RyaW5nVXRpbHMuY2FwaXRhbGl6ZShmbWQuZ2V0TmFtZSgpKSwgKENsYXNz\nW10pIG51bGwpKTsKICAgICAgICAgICAgcmV0dXJuIG1ldGggPT0gbnVsbDsK\nICAgICAgICB9IGNhdGNoIChQcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uIHBh\nZSkge30KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBib29sZWFu\nIGlzSW1wbFR5cGUoQ2xhc3MgY2xzKSB7CiAgICAgICAgcmV0dXJuIChjbHMu\nZ2V0TmFtZSgpLmVuZHNXaXRoKFBPU1RGSVgpCiAgICAgICAgICAgICYmIGNs\ncy5nZXROYW1lKCkuaW5kZXhPZignJCcpICE9IC0xKTsKICAgIH0KCiAgICBw\ndWJsaWMgQ2xhc3MgdG9NYW5hZ2VkSW50ZXJmYWNlKENsYXNzIGNscykgewog\nICAgICAgIENsYXNzW10gaWZhY2VzID0gY2xzLmdldEludGVyZmFjZXMoKTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGlmYWNlcy5sZW5ndGg7IGkr\nKykgewogICAgICAgICAgICBpZiAoX2ltcGxzLmdldChpZmFjZXNbaV0pID09\nIGNscykKICAgICAgICAgICAgICAgIHJldHVybiBpZmFjZXNbaV07CiAgICAg\nICAgfQogICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24oY2xzLmdldE5hbWUoKSk7CiAgICB9Cn0K\n","encoding":"base64"}

