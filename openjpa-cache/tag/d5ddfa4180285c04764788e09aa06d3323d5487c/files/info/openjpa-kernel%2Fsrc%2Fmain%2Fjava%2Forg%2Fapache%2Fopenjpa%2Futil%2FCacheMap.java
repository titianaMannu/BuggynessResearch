{"sha":"c8317bee3b84d86b707888691df3e5033374095c","node_id":"MDQ6QmxvYjIwNjM2NDpjODMxN2JlZTNiODRkODZiNzA3ODg4NjkxZGYzZTUwMzMzNzQwOTVj","size":18236,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c8317bee3b84d86b707888691df3e5033374095c","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbDsNCg0KaW1wb3J0IGphdmEudXRpbC5BYnN0cmFjdENvbGxlY3Rpb247\nDQppbXBvcnQgamF2YS51dGlsLkFic3RyYWN0U2V0Ow0KaW1wb3J0IGphdmEu\ndXRpbC5Db2xsZWN0aW9uOw0KaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nczsNCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsNCmltcG9ydCBqYXZhLnV0\naWwuSXRlcmF0b3I7DQppbXBvcnQgamF2YS51dGlsLk1hcDsNCmltcG9ydCBq\nYXZhLnV0aWwuU2V0Ow0KDQppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNv\nbGxlY3Rpb25zLlByZWRpY2F0ZTsNCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1v\nbnMuY29sbGVjdGlvbnMuaXRlcmF0b3JzLkZpbHRlckl0ZXJhdG9yOw0KaW1w\nb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2xsZWN0aW9ucy5pdGVyYXRvcnMu\nSXRlcmF0b3JDaGFpbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuTFJVTWFwOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5SZWZlcmVuY2VIYXNoTWFwOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIudXRpbC5SZWZlcmVuY2VNYXA7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLlNpemVkTWFwOw0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRSZWZl\ncmVuY2VIYXNoTWFwOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5jb25jdXJyZW50Lk51bGxTYWZlQ29uY3VycmVudEhhc2hNYXA7DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLmNvbmN1cnJlbnQu\nU2l6ZWRDb25jdXJyZW50SGFzaE1hcDsNCg0KaW1wb3J0IGphdmEudXRpbC5j\nb25jdXJyZW50LmxvY2tzLlJlZW50cmFudExvY2s7DQoNCi8qKg0KICogRml4\nZWQtc2l6ZSBtYXAgdGhhdCBoYXMgYWJpbGl0eSB0byBwaW4vdW5waW4gZW50\ncmllcyBhbmQgbW92ZSBvdmVyZmxvdyB0bw0KICogYSBiYWNraW5nIHNvZnQg\nbWFwLg0KICoNCiAqIEBhdXRob3IgUGF0cmljayBMaW5za2V5DQogKiBAYXV0\naG9yIEFiZSBXaGl0ZQ0KICovDQpwdWJsaWMgY2xhc3MgQ2FjaGVNYXANCiAg\nICBpbXBsZW1lbnRzIE1hcCB7DQoNCiAgICAvKioNCiAgICAgKiBUaGUgbWFw\nIGZvciBub24tZXhwaXJlZCBhbmQgbm9uLXBpbm5lZCByZWZlcmVuY2VzLg0K\nICAgICAqLw0KICAgIHByb3RlY3RlZCBmaW5hbCBTaXplZE1hcCBjYWNoZU1h\ncDsNCg0KICAgIC8qKg0KICAgICAqIFRoZSBtYXAgZm9yIGV4cGlyZWQgcmVm\nZXJlbmNlcy4NCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgZmluYWwgU2l6ZWRN\nYXAgc29mdE1hcDsNCg0KICAgIC8qKg0KICAgICAqIFRoZSBzZXQgb2Ygb2Jq\nZWN0cyBwaW5uZWQgaW50byB0aGUgY2FjaGUuDQogICAgICovDQogICAgcHJv\ndGVjdGVkIGZpbmFsIE1hcCBwaW5uZWRNYXA7DQoNCiAgICAvLyBudW1iZXIg\nb2YgcGlubmVkIHZhbHVlcyAobm90IGluY2x1ZGluZyBrZXlzIG5vdCBtYXBw\nZWQgdG8gdmFsdWVzKQ0KICAgIHByaXZhdGUgaW50IF9waW5uZWRTaXplID0g\nMDsNCg0KICAgIHByaXZhdGUgZmluYWwgUmVlbnRyYW50TG9jayBfd3JpdGVM\nb2NrID0gbmV3IFJlZW50cmFudExvY2soKTsNCiAgICBwcml2YXRlIGZpbmFs\nIFJlZW50cmFudExvY2sgX3JlYWRMb2NrOw0KDQogICAgLyoqDQogICAgICog\nQ3JlYXRlIGEgbm9uLUxSVSAoYW5kIHRoZXJlZm9yZSBoaWdobHkgY29uY3Vy\ncmVudCkgY2FjaGUgbWFwIHdpdGggYQ0KICAgICAqIHNpemUgb2YgMTAwMC4N\nCiAgICAgKi8NCiAgICBwdWJsaWMgQ2FjaGVNYXAoKSB7DQogICAgICAgIHRo\naXMoZmFsc2UsIDEwMDApOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIENy\nZWF0ZSBhIGNhY2hlIG1hcCB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0aWVzLg0K\nICAgICAqLw0KICAgIHB1YmxpYyBDYWNoZU1hcChib29sZWFuIGxydSwgaW50\nIG1heCkgew0KICAgICAgICB0aGlzKGxydSwgbWF4LCBtYXggLyAyLCAuNzVG\nKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAZGVwcmVjYXRlZCB1c2Ug\ne0BsaW5rIENhY2hlTWFwI0NhY2hlTWFwKGJvb2xlYW4sIGludCwgaW50LCBm\nbG9hdCwgaW50KX0NCiAgICAgKiBpbnN0ZWFkLg0KICAgICAqLw0KICAgIHB1\nYmxpYyBDYWNoZU1hcChib29sZWFuIGxydSwgaW50IG1heCwgaW50IHNpemUs\nIGZsb2F0IGxvYWQpIHsNCiAgICAgICAgdGhpcyhscnUsIG1heCwgc2l6ZSwg\nbG9hZCwgMTYpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIENyZWF0ZSBh\nIGNhY2hlIG1hcCB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0aWVzLg0KICAgICAq\nDQogICAgICogQHNpbmNlIDEuMS4wDQogICAgICovDQogICAgcHVibGljIENh\nY2hlTWFwKGJvb2xlYW4gbHJ1LCBpbnQgbWF4LCBpbnQgc2l6ZSwgZmxvYXQg\nbG9hZCwNCiAgICAgICAgaW50IGNvbmN1cnJlbmN5TGV2ZWwpIHsNCiAgICAg\nICAgaWYgKHNpemUgPCAwKQ0KICAgICAgICAgICAgc2l6ZSA9IDUwMDsNCg0K\nICAgICAgICBzb2Z0TWFwID0gbmV3IENvbmN1cnJlbnRSZWZlcmVuY2VIYXNo\nTWFwKFJlZmVyZW5jZU1hcC5IQVJELA0KICAgICAgICAgICAgUmVmZXJlbmNl\nTWFwLlNPRlQsIHNpemUsIGxvYWQpIHsNCiAgICAgICAgICAgIHB1YmxpYyB2\nb2lkIG92ZXJmbG93UmVtb3ZlZChPYmplY3Qga2V5LCBPYmplY3QgdmFsdWUp\nIHsNCiAgICAgICAgICAgICAgICBzb2Z0TWFwT3ZlcmZsb3dSZW1vdmVkKGtl\neSwgdmFsdWUpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBwdWJs\naWMgdm9pZCB2YWx1ZUV4cGlyZWQoT2JqZWN0IGtleSkgew0KICAgICAgICAg\nICAgICAgIHNvZnRNYXBWYWx1ZUV4cGlyZWQoa2V5KTsNCiAgICAgICAgICAg\nIH0NCiAgICAgICAgfTsNCiAgICAgICAgcGlubmVkTWFwID0gbmV3IE51bGxT\nYWZlQ29uY3VycmVudEhhc2hNYXAoKTsNCg0KICAgICAgICBpZiAoIWxydSkg\new0KICAgICAgICAgICAgY2FjaGVNYXAgPSBuZXcgU2l6ZWRDb25jdXJyZW50\nSGFzaE1hcChzaXplLCBsb2FkLCBjb25jdXJyZW5jeUxldmVsKXsNCiAgICAg\nICAgICAgICAgICBwdWJsaWMgdm9pZCBvdmVyZmxvd1JlbW92ZWQoT2JqZWN0\nIGtleSwgT2JqZWN0IHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgIGNh\nY2hlTWFwT3ZlcmZsb3dSZW1vdmVkKGtleSwgdmFsdWUpOw0KICAgICAgICAg\nICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBfcmVhZExv\nY2sgPSBudWxsOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY2Fj\naGVNYXAgPSBuZXcgTFJVTWFwKHNpemUsIGxvYWQpIHsNCiAgICAgICAgICAg\nICAgICBwdWJsaWMgdm9pZCBvdmVyZmxvd1JlbW92ZWQoT2JqZWN0IGtleSwg\nT2JqZWN0IHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgIGNhY2hlTWFw\nT3ZlcmZsb3dSZW1vdmVkKGtleSwgdmFsdWUpOw0KICAgICAgICAgICAgICAg\nIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBfcmVhZExvY2sgPSBf\nd3JpdGVMb2NrOw0KICAgICAgICB9DQogICAgICAgIGlmIChtYXggPCAwKQ0K\nICAgICAgICAgICAgbWF4ID0gSW50ZWdlci5NQVhfVkFMVUU7DQogICAgICAg\nIGNhY2hlTWFwLnNldE1heFNpemUobWF4KTsNCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBDYWxsZWQgZnJvbSB7QGxpbmsgU2l6ZWRNYXAjb3ZlcmZsb3dS\nZW1vdmVkfSBpbiB0aGUgY2FjaGUgbWFwLg0KICAgICAqLw0KICAgIHByb3Rl\nY3RlZCB2b2lkIGNhY2hlTWFwT3ZlcmZsb3dSZW1vdmVkKE9iamVjdCBrZXks\nIE9iamVjdCB2YWx1ZSkgew0KICAgICAgICBpZiAoc29mdE1hcC5zaXplKCkg\nPCBzb2Z0TWFwLmdldE1heFNpemUoKSkNCiAgICAgICAgICAgIHB1dChzb2Z0\nTWFwLCBrZXksIHZhbHVlKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAg\nZW50cnlSZW1vdmVkKGtleSwgdmFsdWUsIHRydWUpOw0KICAgIH0NCg0KICAg\nIC8qKg0KICAgICAqIENhbGxlZCBmcm9tIHtAbGluayBTaXplZE1hcCNvdmVy\nZmxvd1JlbW92ZWR9IGluIHRoZSBzb2Z0IG1hcC4NCiAgICAgKi8NCiAgICBw\ncm90ZWN0ZWQgdm9pZCBzb2Z0TWFwT3ZlcmZsb3dSZW1vdmVkKE9iamVjdCBr\nZXksIE9iamVjdCB2YWx1ZSkgew0KICAgICAgICBlbnRyeVJlbW92ZWQoa2V5\nLCB2YWx1ZSwgdHJ1ZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQ2Fs\nbGVkIHdoZW4gYSB2YWx1ZSBleHBpcmVzIGZyb20gdGhlIHNvZnQgbWFwLg0K\nICAgICAqLw0KICAgIHByb3RlY3RlZCB2b2lkIHNvZnRNYXBWYWx1ZUV4cGly\nZWQoT2JqZWN0IGtleSkgew0KICAgICAgICBlbnRyeVJlbW92ZWQoa2V5LCBu\ndWxsLCB0cnVlKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBQdXQgdGhl\nIGdpdmVuIGVudHJ5IGludG8gdGhlIGdpdmVuIG1hcC4gQWxsb3dzIHN1YmNs\nYXNzZXMgdG8NCiAgICAgKiB0YWtlIGFkZGl0aW9uYWwgYWN0aW9ucy4NCiAg\nICAgKi8NCiAgICBwcm90ZWN0ZWQgT2JqZWN0IHB1dChNYXAgbWFwLCBPYmpl\nY3Qga2V5LCBPYmplY3QgdmFsdWUpIHsNCiAgICAgICAgcmV0dXJuIG1hcC5w\ndXQoa2V5LCB2YWx1ZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVt\nb3ZlIHRoZSBnaXZlbiBrZXkgZnJvbSB0aGUgZ2l2ZW4gbWFwLiBBbGxvd3Mg\nc3ViY2xhc3NlcyB0bw0KICAgICAqIHRha2UgYWRkaXRpb25hbCBhY3Rpb25z\nLg0KICAgICAqLw0KICAgIHByb3RlY3RlZCBPYmplY3QgcmVtb3ZlKE1hcCBt\nYXAsIE9iamVjdCBrZXkpIHsNCiAgICAgICAgcmV0dXJuIG1hcC5yZW1vdmUo\na2V5KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBBY3F1aXJlIHJlYWQg\nbG9jay4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCByZWFkTG9jaygpIHsN\nCiAgICAgICAgaWYgKF9yZWFkTG9jayAhPSBudWxsKQ0KICAgICAgICAgICAg\nX3JlYWRMb2NrLmxvY2soKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBS\nZWxlYXNlIHJlYWQgbG9jay4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBy\nZWFkVW5sb2NrKCkgew0KICAgICAgICBpZiAoX3JlYWRMb2NrICE9IG51bGwp\nDQogICAgICAgICAgICBfcmVhZExvY2sudW5sb2NrKCk7DQogICAgfQ0KDQog\nICAgLyoqDQogICAgICogQWNxdWlyZSB3cml0ZSBsb2NrLg0KICAgICAqLw0K\nICAgIHB1YmxpYyB2b2lkIHdyaXRlTG9jaygpIHsNCiAgICAgICAgX3dyaXRl\nTG9jay5sb2NrKCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVsZWFz\nZSB3cml0ZSBsb2NrLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHdyaXRl\nVW5sb2NrKCkgew0KICAgICAgICBfd3JpdGVMb2NrLnVubG9jaygpOw0KICAg\nIH0NCg0KICAgIC8qKg0KICAgICAqIFdoZXRoZXIgdGhpcyBjYWNoZSBtYXAg\ndXNlcyBMUlUgZXZpY3Rpb24uDQogICAgICovDQogICAgcHVibGljIGJvb2xl\nYW4gaXNMUlUoKSB7DQogICAgICAgIHJldHVybiBfcmVhZExvY2sgIT0gbnVs\nbDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUaGUgbWF4aW11bSBudW1i\nZXIgb2YgaGFyZCByZWZlcmVuY2VzIHRvIG1haW50YWluLCBvciAtMSBmb3Ig\nbm8gbGltaXQuDQogICAgICovDQogICAgcHVibGljIHZvaWQgc2V0Q2FjaGVT\naXplKGludCBzaXplKSB7DQogICAgICAgIHdyaXRlTG9jaygpOw0KICAgICAg\nICB0cnkgew0KICAgICAgICAgICAgY2FjaGVNYXAuc2V0TWF4U2l6ZSgoc2l6\nZSA8IDApID8gSW50ZWdlci5NQVhfVkFMVUUgOiBzaXplKTsNCiAgICAgICAg\nfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIHdyaXRlVW5sb2NrKCk7DQogICAg\nICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUaGUgbWF4aW11bSBu\ndW1iZXIgb2YgaGFyZCByZWZlcmVuY2VzIHRvIG1haW50YWluLCBvciAtMSBm\nb3Igbm8gbGltaXQuDQogICAgICovDQogICAgcHVibGljIGludCBnZXRDYWNo\nZVNpemUoKSB7DQogICAgICAgIGludCBtYXggPSBjYWNoZU1hcC5nZXRNYXhT\naXplKCk7DQogICAgICAgIHJldHVybiAobWF4ID09IEludGVnZXIuTUFYX1ZB\nTFVFKSA/IC0xIDogbWF4Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRo\nZSBtYXhpbXVtIG51bWJlciBvZiBzb2Z0IHJlZmVyZW5jZXMgdG8gbWFpbnRh\naW4sIG9yIC0xIGZvciBubyBsaW1pdC4NCiAgICAgKi8NCiAgICBwdWJsaWMg\ndm9pZCBzZXRTb2Z0UmVmZXJlbmNlU2l6ZShpbnQgc2l6ZSkgew0KICAgICAg\nICB3cml0ZUxvY2soKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHNv\nZnRNYXAuc2V0TWF4U2l6ZSgoc2l6ZSA8IDApID8gSW50ZWdlci5NQVhfVkFM\nVUUgOiBzaXplKTsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAg\nIHdyaXRlVW5sb2NrKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygc29mdCByZWZlcmVuY2Vz\nIHRvIG1haW50YWluLCBvciAtMSBmb3Igbm8gbGltaXQuDQogICAgICovDQog\nICAgcHVibGljIGludCBnZXRTb2Z0UmVmZXJlbmNlU2l6ZSgpIHsNCiAgICAg\nICAgaW50IG1heCA9IHNvZnRNYXAuZ2V0TWF4U2l6ZSgpOw0KICAgICAgICBy\nZXR1cm4gKG1heCA9PSBJbnRlZ2VyLk1BWF9WQUxVRSkgPyAtMSA6IG1heDsN\nCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUaGUga2V5cyBwaW5uZWQgaW50\nbyB0aGUgbWFwLg0KICAgICAqLw0KICAgIHB1YmxpYyBTZXQgZ2V0UGlubmVk\nS2V5cygpIHsNCiAgICAgICAgcmVhZExvY2soKTsNCiAgICAgICAgdHJ5IHsN\nCiAgICAgICAgICAgIHJldHVybiBDb2xsZWN0aW9ucy51bm1vZGlmaWFibGVT\nZXQocGlubmVkTWFwLmtleVNldCgpKTsNCiAgICAgICAgfSBmaW5hbGx5IHsN\nCiAgICAgICAgICAgIHJlYWRVbmxvY2soKTsNCiAgICAgICAgfQ0KICAgIH0N\nCg0KICAgIC8qKg0KICAgICAqIExvY2tzIHRoZSBnaXZlbiBrZXkgYW5kIGl0\ncyB2YWx1ZSBpbnRvIHRoZSBtYXAuIE9iamVjdHMgcGlubmVkIGludG8NCiAg\nICAgKiB0aGUgbWFwIGFyZSBub3QgY291bnRlZCB0b3dhcmRzIHRoZSBtYXhp\nbXVtIGNhY2hlIHNpemUsIGFuZCBhcmUgbmV2ZXINCiAgICAgKiBldmljdGVk\nIGltcGxpY2l0bHkuIFlvdSBtYXkgcGluIGtleXMgZm9yIHdoaWNoIG5vIHZh\nbHVlIGlzIGluIHRoZSBtYXAuDQogICAgICoNCiAgICAgKiBAcmV0dXJuIHRy\ndWUgaWYgdGhlIGdpdm5lIGtleSdzIHZhbHVlIHdhcyBwaW5uZWQ7IGZhbHNl\nIGlmIG5vIHZhbHVlDQogICAgICogZm9yIHRoZSBnaXZlbiBrZXkgaXMgY2Fj\naGVkDQogICAgICovDQogICAgcHVibGljIGJvb2xlYW4gcGluKE9iamVjdCBr\nZXkpIHsNCiAgICAgICAgd3JpdGVMb2NrKCk7DQogICAgICAgIHRyeSB7DQog\nICAgICAgICAgICAvLyBpZiB3ZSBkb24ndCBoYXZlIGEgcGlubmVkIG1hcCB3\nZSBuZWVkIHRvIGNyZWF0ZSBvbmU7IGVsc2UgaWYgdGhlDQogICAgICAgICAg\nICAvLyBwaW5uZWQgbWFwIGFscmVhZHkgY29udGFpbnMgdGhlIGtleSwgbm90\naGluZyB0byBkbw0KICAgICAgICAgICAgaWYgKHBpbm5lZE1hcC5jb250YWlu\nc0tleShrZXkpKQ0KICAgICAgICAgICAgICAgIHJldHVybiBwaW5uZWRNYXAu\nZ2V0KGtleSkgIT0gbnVsbDsNCg0KICAgICAgICAgICAgLy8gY2hlY2sgb3Ro\nZXIgbWFwcyBmb3Iga2V5DQogICAgICAgICAgICBPYmplY3QgdmFsID0gcmVt\nb3ZlKGNhY2hlTWFwLCBrZXkpOw0KICAgICAgICAgICAgaWYgKHZhbCA9PSBu\ndWxsKQ0KICAgICAgICAgICAgICAgIHZhbCA9IHJlbW92ZShzb2Z0TWFwLCBr\nZXkpOw0KDQogICAgICAgICAgICAvLyBwaW4ga2V5DQogICAgICAgICAgICBw\ndXQocGlubmVkTWFwLCBrZXksIHZhbCk7DQogICAgICAgICAgICBpZiAodmFs\nICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICBfcGlubmVkU2l6ZSsrOw0K\nICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0K\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9IGZpbmFsbHkg\new0KICAgICAgICAgICAgd3JpdGVVbmxvY2soKTsNCiAgICAgICAgfQ0KICAg\nIH0NCg0KICAgIC8qKg0KICAgICAqIFVuZG8gYSBwaW5uaW5nLg0KICAgICAq\nLw0KICAgIHB1YmxpYyBib29sZWFuIHVucGluKE9iamVjdCBrZXkpIHsNCiAg\nICAgICAgd3JpdGVMb2NrKCk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAg\nICBPYmplY3QgdmFsID0gcmVtb3ZlKHBpbm5lZE1hcCwga2V5KTsNCiAgICAg\nICAgICAgIGlmICh2YWwgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIC8v\nIHB1dCBiYWNrIGludG8gdW5waW5uZWQgY2FjaGUNCiAgICAgICAgICAgICAg\nICBwdXQoa2V5LCB2YWwpOw0KICAgICAgICAgICAgICAgIF9waW5uZWRTaXpl\nLS07DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAg\nICB9DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZmlu\nYWxseSB7DQogICAgICAgICAgICB3cml0ZVVubG9jaygpOw0KICAgICAgICB9\nDQogICAgfQ0KDQogICAgLyoqDQogICAgICogSW52b2tlZCB3aGVuIGEga2V5\nLXZhbHVlIHBhaXIgaXMgZXZpY3RlZCBmcm9tIHRoaXMgZGF0YQ0KICAgICAq\nIHN0cnVjdHVyZS4gVGhpcyBpcyBpbnZva2VkIHdpdGggPGNvZGU+ZXhwaXJl\nZDwvY29kZT4gc2V0IHRvDQogICAgICogPGNvZGU+dHJ1ZTwvY29kZT4gd2hl\nbiBhbiBvYmplY3QgaXMgZHJvcHBlZCBiZWNhdXNlIG9mIHNwYWNlDQogICAg\nICogcmVxdWlyZW1lbnRzIG9yIHRocm91Z2ggZ2FyYmFnZSBjb2xsZWN0aW9u\nIG9mIHNvZnQgcmVmZXJlbmNlcy4NCiAgICAgKiBJdCBpcyBpbnZva2VkIHdp\ndGggPGNvZGU+ZXhwaXJlZDwvY29kZT4gc2V0IHRvIDxjb2RlPmZhbHNlPC9j\nb2RlPg0KICAgICAqIHdoZW4gYW4gb2JqZWN0IGlzIGV4cGxpY2l0bHkgcmVt\nb3ZlZCB2aWEgdGhlIHtAbGluayAjcmVtb3ZlfSBvcg0KICAgICAqIHtAbGlu\nayAjY2xlYXJ9IG1ldGhvZHMuIFRoaXMgbWF5IGJlIGludm9rZWQgbW9yZSB0\naGFuIG9uY2UgZm9yIGENCiAgICAgKiBnaXZlbiBlbnRyeS4NCiAgICAgKg0K\nICAgICAqIEBwYXJhbSB2YWx1ZSBtYXkgYmUgbnVsbCBpZiB0aGUgdmFsdWUg\nd2FzIGEgc29mdCByZWZlcmVuY2UgdGhhdCBoYXMNCiAgICAgKiBiZWVuIEdD\nZA0KICAgICAqIEBzaW5jZSAwLjIuNS4wDQogICAgICovDQogICAgcHJvdGVj\ndGVkIHZvaWQgZW50cnlSZW1vdmVkKE9iamVjdCBrZXksIE9iamVjdCB2YWx1\nZSwgYm9vbGVhbiBleHBpcmVkKSB7DQogICAgfQ0KDQogICAgLyoqDQogICAg\nICogSW52b2tlZCB3aGVuIGFuIGVudHJ5IGlzIGFkZGVkIHRvIHRoZSBjYWNo\nZS4gVGhpcyBtYXkgYmUgaW52b2tlZA0KICAgICAqIG1vcmUgdGhhbiBvbmNl\nIGZvciBhbiBlbnRyeS4NCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgdm9pZCBl\nbnRyeUFkZGVkKE9iamVjdCBrZXksIE9iamVjdCB2YWx1ZSkgew0KICAgIH0N\nCg0KICAgIHB1YmxpYyBPYmplY3QgZ2V0KE9iamVjdCBrZXkpIHsNCiAgICAg\nICAgcmVhZExvY2soKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIE9i\namVjdCB2YWwgPSBwaW5uZWRNYXAuZ2V0KGtleSk7DQogICAgICAgICAgICBp\nZiAodmFsICE9IG51bGwpDQogICAgICAgICAgICAgICAgcmV0dXJuIHZhbDsN\nCg0KICAgICAgICAgICAgdmFsID0gY2FjaGVNYXAuZ2V0KGtleSk7DQogICAg\nICAgICAgICBpZiAodmFsID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAv\nLyBpZiB3ZSBmaW5kIHRoZSBrZXkgaW4gdGhlIHNvZnQgbWFwLCBtb3ZlIGl0\nIGJhY2sgaW50bw0KICAgICAgICAgICAgICAgIC8vIHRoZSBwcmltYXJ5IG1h\ncA0KICAgICAgICAgICAgICAgIHZhbCA9IHNvZnRNYXAuZ2V0KGtleSk7DQog\nICAgICAgICAgICAgICAgaWYgKHZhbCAhPSBudWxsKQ0KICAgICAgICAgICAg\nICAgICAgICBwdXQoa2V5LCB2YWwpOw0KICAgICAgICAgICAgfQ0KICAgICAg\nICAgICAgcmV0dXJuIHZhbDsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAg\nICAgICAgIHJlYWRVbmxvY2soKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAg\nIHB1YmxpYyBPYmplY3QgcHV0KE9iamVjdCBrZXksIE9iamVjdCB2YWx1ZSkg\new0KICAgICAgICB3cml0ZUxvY2soKTsNCiAgICAgICAgdHJ5IHsNCiAgICAg\nICAgICAgIC8vIGlmIHRoZSBrZXkgaXMgcGlubmVkLCBqdXN0IGludGVyYWN0\nIGRpcmVjdGx5IHdpdGggdGhlIHBpbm5lZCBtYXANCiAgICAgICAgICAgIE9i\namVjdCB2YWw7DQogICAgICAgICAgICBpZiAocGlubmVkTWFwLmNvbnRhaW5z\nS2V5KGtleSkpIHsNCiAgICAgICAgICAgICAgICB2YWwgPSBwdXQocGlubmVk\nTWFwLCBrZXksIHZhbHVlKTsNCiAgICAgICAgICAgICAgICBpZiAodmFsID09\nIG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgX3Bpbm5lZFNpemUrKzsN\nCiAgICAgICAgICAgICAgICAgICAgZW50cnlBZGRlZChrZXksIHZhbHVlKTsN\nCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAg\nICBlbnRyeVJlbW92ZWQoa2V5LCB2YWwsIGZhbHNlKTsNCiAgICAgICAgICAg\nICAgICAgICAgZW50cnlBZGRlZChrZXksIHZhbHVlKTsNCiAgICAgICAgICAg\nICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHZhbDsNCiAgICAgICAg\nICAgIH0NCg0KICAgICAgICAgICAgLy8gaWYgbm8gaGFyZCByZWZzLCBkb24n\ndCBwdXQgYW55dGhpbmcNCiAgICAgICAgICAgIGlmIChjYWNoZU1hcC5nZXRN\nYXhTaXplKCkgPT0gMCkNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsN\nCg0KICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBwdXQgdGhlIHZhbHVlIGlu\ndG8gdGhlIG1hcCBhbmQgY2xlYXIgaXQgZnJvbSB0aGUNCiAgICAgICAgICAg\nIC8vIHNvZnQgbWFwDQogICAgICAgICAgICB2YWwgPSBwdXQoY2FjaGVNYXAs\nIGtleSwgdmFsdWUpOw0KICAgICAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7\nDQogICAgICAgICAgICAgICAgdmFsID0gcmVtb3ZlKHNvZnRNYXAsIGtleSk7\nDQogICAgICAgICAgICAgICAgaWYgKHZhbCA9PSBudWxsKQ0KICAgICAgICAg\nICAgICAgICAgICBlbnRyeUFkZGVkKGtleSwgdmFsdWUpOw0KICAgICAgICAg\nICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBlbnRyeVJlbW92\nZWQoa2V5LCB2YWwsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICAgICAgZW50\ncnlBZGRlZChrZXksIHZhbHVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAg\nICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGVudHJ5UmVtb3Zl\nZChrZXksIHZhbCwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIGVudHJ5QWRk\nZWQoa2V5LCB2YWx1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBy\nZXR1cm4gdmFsOw0KICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAg\nd3JpdGVVbmxvY2soKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1Ymxp\nYyB2b2lkIHB1dEFsbChNYXAgbWFwKSB7DQogICAgICAgIE1hcC5FbnRyeSBl\nbnRyeTsNCiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBtYXAuZW50cnlT\nZXQoKS5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgew0KICAgICAgICAg\nICAgZW50cnkgPSAoTWFwLkVudHJ5KSBpdHIubmV4dCgpOw0KICAgICAgICAg\nICAgcHV0KGVudHJ5LmdldEtleSgpLCBlbnRyeS5nZXRWYWx1ZSgpKTsNCiAg\nICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIElmIDxjb2RlPmtl\neTwvY29kZT4gaXMgcGlubmVkIGludG8gdGhlIGNhY2hlLCB0aGUgcGluIGlz\nDQogICAgICogY2xlYXJlZCBhbmQgdGhlIG9iamVjdCBpcyByZW1vdmVkLg0K\nICAgICAqLw0KICAgIHB1YmxpYyBPYmplY3QgcmVtb3ZlKE9iamVjdCBrZXkp\nIHsNCiAgICAgICAgd3JpdGVMb2NrKCk7DQogICAgICAgIHRyeSB7DQogICAg\nICAgICAgICAvLyBpZiB0aGUga2V5IGlzIHBpbm5lZCwganVzdCBpbnRlcmFj\ndCBkaXJlY3RseSB3aXRoIHRoZQ0KICAgICAgICAgICAgLy8gcGlubmVkIG1h\ncA0KICAgICAgICAgICAgT2JqZWN0IHZhbDsNCiAgICAgICAgICAgIGlmIChw\naW5uZWRNYXAuY29udGFpbnNLZXkoa2V5KSkgew0KICAgICAgICAgICAgICAg\nIC8vIHJlLXB1dCB3aXRoIG51bGwgdmFsdWU7IHdlIHN0aWxsIHdhbnQga2V5\nIHBpbm5lZA0KICAgICAgICAgICAgICAgIHZhbCA9IHB1dChwaW5uZWRNYXAs\nIGtleSwgbnVsbCk7DQogICAgICAgICAgICAgICAgaWYgKHZhbCAhPSBudWxs\nKSB7DQogICAgICAgICAgICAgICAgICAgIF9waW5uZWRTaXplLS07DQogICAg\nICAgICAgICAgICAgICAgIGVudHJ5UmVtb3ZlZChrZXksIHZhbCwgZmFsc2Up\nOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4g\ndmFsOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YWwgPSByZW1v\ndmUoY2FjaGVNYXAsIGtleSk7DQogICAgICAgICAgICBpZiAodmFsID09IG51\nbGwpDQogICAgICAgICAgICAgICAgdmFsID0gc29mdE1hcC5yZW1vdmUoa2V5\nKTsNCiAgICAgICAgICAgIGlmICh2YWwgIT0gbnVsbCkNCiAgICAgICAgICAg\nICAgICBlbnRyeVJlbW92ZWQoa2V5LCB2YWwsIGZhbHNlKTsNCg0KICAgICAg\nICAgICAgcmV0dXJuIHZhbDsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAg\nICAgICAgIHdyaXRlVW5sb2NrKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAg\nICAvKioNCiAgICAgKiBSZW1vdmVzIHBpbm5lZCBvYmplY3RzIGFzIHdlbGwg\nYXMgdW5waW5uZWQgb25lcy4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBj\nbGVhcigpIHsNCiAgICAgICAgd3JpdGVMb2NrKCk7DQogICAgICAgIHRyeSB7\nDQogICAgICAgICAgICBub3RpZnlFbnRyeVJlbW92YWxzKHBpbm5lZE1hcC5l\nbnRyeVNldCgpKTsNCiAgICAgICAgICAgIHBpbm5lZE1hcC5jbGVhcigpOw0K\nICAgICAgICAgICAgX3Bpbm5lZFNpemUgPSAwOw0KDQogICAgICAgICAgICBu\nb3RpZnlFbnRyeVJlbW92YWxzKGNhY2hlTWFwLmVudHJ5U2V0KCkpOw0KICAg\nICAgICAgICAgY2FjaGVNYXAuY2xlYXIoKTsNCg0KICAgICAgICAgICAgbm90\naWZ5RW50cnlSZW1vdmFscyhzb2Z0TWFwLmVudHJ5U2V0KCkpOw0KICAgICAg\nICAgICAgc29mdE1hcC5jbGVhcigpOw0KICAgICAgICB9IGZpbmFsbHkgew0K\nICAgICAgICAgICAgd3JpdGVVbmxvY2soKTsNCiAgICAgICAgfQ0KICAgIH0N\nCg0KICAgIHByaXZhdGUgdm9pZCBub3RpZnlFbnRyeVJlbW92YWxzKFNldCBz\nZXQpIHsNCiAgICAgICAgTWFwLkVudHJ5IGVudHJ5Ow0KICAgICAgICBmb3Ig\nKEl0ZXJhdG9yIGl0ciA9IHNldC5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgp\nOykgew0KICAgICAgICAgICAgZW50cnkgPSAoTWFwLkVudHJ5KSBpdHIubmV4\ndCgpOw0KICAgICAgICAgICAgaWYgKGVudHJ5LmdldFZhbHVlKCkgIT0gbnVs\nbCkNCiAgICAgICAgICAgICAgICBlbnRyeVJlbW92ZWQoZW50cnkuZ2V0S2V5\nKCksIGVudHJ5LmdldFZhbHVlKCksIGZhbHNlKTsNCiAgICAgICAgfQ0KICAg\nIH0NCg0KICAgIHB1YmxpYyBpbnQgc2l6ZSgpIHsNCiAgICAgICAgcmVhZExv\nY2soKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHJldHVybiBfcGlu\nbmVkU2l6ZSArIGNhY2hlTWFwLnNpemUoKSArIHNvZnRNYXAuc2l6ZSgpOw0K\nICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgcmVhZFVubG9jaygp\nOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNF\nbXB0eSgpIHsNCiAgICAgICAgcmV0dXJuIHNpemUoKSA9PSAwOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5zS2V5KE9iamVjdCBrZXkp\nIHsNCiAgICAgICAgcmVhZExvY2soKTsNCiAgICAgICAgdHJ5IHsNCiAgICAg\nICAgICAgIHJldHVybiBwaW5uZWRNYXAuZ2V0KGtleSkgIT0gbnVsbA0KICAg\nICAgICAgICAgICAgIHx8IGNhY2hlTWFwLmNvbnRhaW5zS2V5KGtleSkNCiAg\nICAgICAgICAgICAgICB8fCBzb2Z0TWFwLmNvbnRhaW5zS2V5KGtleSk7DQog\nICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICByZWFkVW5sb2NrKCk7\nDQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBjb250\nYWluc1ZhbHVlKE9iamVjdCB2YWwpIHsNCiAgICAgICAgcmVhZExvY2soKTsN\nCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHJldHVybiBwaW5uZWRNYXAu\nY29udGFpbnNWYWx1ZSh2YWwpDQogICAgICAgICAgICAgICAgfHwgY2FjaGVN\nYXAuY29udGFpbnNWYWx1ZSh2YWwpDQogICAgICAgICAgICAgICAgfHwgc29m\ndE1hcC5jb250YWluc1ZhbHVlKHZhbCk7DQogICAgICAgIH0gZmluYWxseSB7\nDQogICAgICAgICAgICByZWFkVW5sb2NrKCk7DQogICAgICAgIH0NCiAgICB9\nDQoNCiAgICBwdWJsaWMgU2V0IGtleVNldCgpIHsNCiAgICAgICAgcmV0dXJu\nIG5ldyBLZXlTZXQoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgQ29sbGVjdGlv\nbiB2YWx1ZXMoKSB7DQogICAgICAgIHJldHVybiBuZXcgVmFsdWVDb2xsZWN0\naW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIFNldCBlbnRyeVNldCgpIHsN\nCiAgICAgICAgcmV0dXJuIG5ldyBFbnRyeVNldCgpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7DQogICAgICAgIHJlYWRMb2Nr\nKCk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICByZXR1cm4gIkNhY2hl\nTWFwOiIgKyBjYWNoZU1hcC50b1N0cmluZygpICsgIjo6Ig0KICAgICAgICAg\nICAgICAgICsgc29mdE1hcC50b1N0cmluZygpOw0KICAgICAgICB9IGZpbmFs\nbHkgew0KICAgICAgICAgICAgcmVhZFVubG9jaygpOw0KICAgICAgICB9DQog\nICAgfQ0KDQogICAgLyoqDQogICAgICogVmlldyBvZiB0aGUgZW50cnkgc2V0\nLg0KICAgICAqLw0KICAgIHByaXZhdGUgY2xhc3MgRW50cnlTZXQNCiAgICAg\nICAgZXh0ZW5kcyBBYnN0cmFjdFNldCB7DQoNCiAgICAgICAgcHVibGljIGlu\ndCBzaXplKCkgew0KICAgICAgICAgICAgcmV0dXJuIENhY2hlTWFwLnRoaXMu\nc2l6ZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIGJvb2xlYW4g\nYWRkKE9iamVjdCBvKSB7DQogICAgICAgICAgICBNYXAuRW50cnkgZW50cnkg\nPSAoTWFwLkVudHJ5KSBvOw0KICAgICAgICAgICAgcHV0KGVudHJ5LmdldEtl\neSgpLCBlbnRyeS5nZXRWYWx1ZSgpKTsNCiAgICAgICAgICAgIHJldHVybiB0\ncnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIEl0ZXJhdG9yIGl0\nZXJhdG9yKCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnRyeUl0ZXJh\ndG9yKEVudHJ5SXRlcmF0b3IuRU5UUlkpOw0KICAgICAgICB9DQogICAgfQ0K\nDQogICAgLyoqDQogICAgICogVmlldyBvZiB0aGUga2V5IHNldC4NCiAgICAg\nKi8NCiAgICBwcml2YXRlIGNsYXNzIEtleVNldA0KICAgICAgICBleHRlbmRz\nIEFic3RyYWN0U2V0IHsNCg0KICAgICAgICBwdWJsaWMgaW50IHNpemUoKSB7\nDQogICAgICAgICAgICByZXR1cm4gQ2FjaGVNYXAudGhpcy5zaXplKCk7DQog\nICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgSXRlcmF0b3IgaXRlcmF0b3Io\nKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEVudHJ5SXRlcmF0b3IoRW50\ncnlJdGVyYXRvci5LRVkpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoq\nDQogICAgICogVmlldyBvZiB0aGUgdmFsdWUgY29sbGVjdGlvbi4NCiAgICAg\nKi8NCiAgICBwcml2YXRlIGNsYXNzIFZhbHVlQ29sbGVjdGlvbg0KICAgICAg\nICBleHRlbmRzIEFic3RyYWN0Q29sbGVjdGlvbiB7DQoNCiAgICAgICAgcHVi\nbGljIGludCBzaXplKCkgew0KICAgICAgICAgICAgcmV0dXJuIENhY2hlTWFw\nLnRoaXMuc2l6ZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIEl0\nZXJhdG9yIGl0ZXJhdG9yKCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBF\nbnRyeUl0ZXJhdG9yKEVudHJ5SXRlcmF0b3IuVkFMVUUpOw0KICAgICAgICB9\nDQogICAgfQ0KDQogICAgLyoqDQogICAgICogSXRlcmF0b3Igb3ZlciBhbGwg\nZW50cmllcy4NCiAgICAgKi8NCiAgICBwcml2YXRlIGNsYXNzIEVudHJ5SXRl\ncmF0b3INCiAgICAgICAgaW1wbGVtZW50cyBJdGVyYXRvciwgUHJlZGljYXRl\nIHsNCg0KICAgICAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBFTlRSWSA9\nIDA7DQogICAgICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEtFWSA9IDE7\nDQogICAgICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFZBTFVFID0gMjsN\nCg0KICAgICAgICBwcml2YXRlIGZpbmFsIEl0ZXJhdG9yQ2hhaW4gX2l0ciA9\nIG5ldyBJdGVyYXRvckNoYWluKCk7DQogICAgICAgIHByaXZhdGUgZmluYWwg\naW50IF90eXBlOw0KDQogICAgICAgIHB1YmxpYyBFbnRyeUl0ZXJhdG9yKGlu\ndCB0eXBlKSB7DQogICAgICAgICAgICBfdHlwZSA9IHR5cGU7DQogICAgICAg\nICAgICBfaXRyLmFkZEl0ZXJhdG9yKG5ldyBGaWx0ZXJJdGVyYXRvcihnZXRW\naWV3KHBpbm5lZE1hcCksIHRoaXMpKTsNCiAgICAgICAgICAgIF9pdHIuYWRk\nSXRlcmF0b3IoZ2V0VmlldyhjYWNoZU1hcCkpOw0KICAgICAgICAgICAgX2l0\nci5hZGRJdGVyYXRvcihnZXRWaWV3KHNvZnRNYXApKTsNCiAgICAgICAgfQ0K\nDQogICAgICAgIC8qKg0KICAgICAgICAgKiBSZXR1cm4gYW4gaXRlcmF0b3Ig\nb3ZlciB0aGUgYXBwcm9wcmlhdGUgdmlldyBvZiB0aGUgZ2l2ZW4gbWFwLg0K\nICAgICAgICAgKi8NCiAgICAgICAgcHJpdmF0ZSBJdGVyYXRvciBnZXRWaWV3\nKE1hcCBtKSB7DQogICAgICAgICAgICBpZiAobSA9PSBudWxsKQ0KICAgICAg\nICAgICAgICAgIHJldHVybiBudWxsOw0KDQogICAgICAgICAgICBzd2l0Y2gg\nKF90eXBlKSB7DQogICAgICAgICAgICAgICAgY2FzZSBLRVk6DQogICAgICAg\nICAgICAgICAgICAgIHJldHVybiBtLmtleVNldCgpLml0ZXJhdG9yKCk7DQog\nICAgICAgICAgICAgICAgY2FzZSBWQUxVRToNCiAgICAgICAgICAgICAgICAg\nICAgcmV0dXJuIG0udmFsdWVzKCkuaXRlcmF0b3IoKTsNCiAgICAgICAgICAg\nICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbS5l\nbnRyeVNldCgpLml0ZXJhdG9yKCk7DQogICAgICAgICAgICB9DQogICAgICAg\nIH0NCg0KICAgICAgICBwdWJsaWMgYm9vbGVhbiBoYXNOZXh0KCkgew0KICAg\nICAgICAgICAgcmV0dXJuIF9pdHIuaGFzTmV4dCgpOw0KICAgICAgICB9DQoN\nCiAgICAgICAgcHVibGljIE9iamVjdCBuZXh0KCkgew0KICAgICAgICAgICAg\ncmV0dXJuIF9pdHIubmV4dCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHVi\nbGljIHZvaWQgcmVtb3ZlKCkgew0KICAgICAgICAgICAgX2l0ci5yZW1vdmUo\nKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyBib29sZWFuIGV2YWx1\nYXRlKE9iamVjdCBvYmopIHsNCiAgICAgICAgICAgIHN3aXRjaCAoX3R5cGUp\nIHsNCiAgICAgICAgICAgICAgICBjYXNlIEVOVFJZOg0KICAgICAgICAgICAg\nICAgICAgICByZXR1cm4gKChNYXAuRW50cnkpIG9iaikuZ2V0VmFsdWUoKSAh\nPSBudWxsOw0KCQkJY2FzZSBWQUxVRToNCgkJCQlyZXR1cm4gb2JqICE9IG51\nbGw7DQoJCQlkZWZhdWx0Og0KCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KCQl9\nDQoJfQ0KfQ0KDQo=\n","encoding":"base64"}

