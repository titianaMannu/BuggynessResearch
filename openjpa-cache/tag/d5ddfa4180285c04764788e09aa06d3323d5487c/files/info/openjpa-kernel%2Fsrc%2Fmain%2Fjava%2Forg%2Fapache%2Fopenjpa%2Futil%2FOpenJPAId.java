{"sha":"37ad42064d2d4035ae6702092b28eee10961dc52","node_id":"MDQ6QmxvYjIwNjM2NDozN2FkNDIwNjRkMmQ0MDM1YWU2NzAyMDkyYjI4ZWVlMTA5NjFkYzUy","size":4537,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/37ad42064d2d4035ae6702092b28eee10961dc52","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbDsNCg0KaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlOw0KDQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlJlZmVyZW5jZU1hcDsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVu\ndC5Db25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcDsNCg0KLyoqDQogKiBJZGVu\ndGl0eSBjbGFzcyBleHRlbmRlZCBieSBidWlsdGluIE9wZW5KUEEgaWRlbnRp\ndHkgb2JqZWN0cy4NCiAqDQogKiBAYXV0aG9yIFN0ZXZlIEtpbQ0KICovDQpw\ndWJsaWMgYWJzdHJhY3QgY2xhc3MgT3BlbkpQQUlkDQogICAgaW1wbGVtZW50\ncyBDb21wYXJhYmxlLCBTZXJpYWxpemFibGUgew0KDQogICAgLy8gY2FjaGUg\ndGhlIHR5cGVzJyBnZW5lcmF0ZWQgaGFzaGNvZGVzDQogICAgcHJpdmF0ZSBz\ndGF0aWMgQ29uY3VycmVudFJlZmVyZW5jZUhhc2hNYXAgX3R5cGVDYWNoZSA9\nDQogICAgICAgIG5ldyBDb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcChSZWZl\ncmVuY2VNYXAuV0VBSywgUmVmZXJlbmNlTWFwLkhBUkQpOw0KDQogICAgcHJv\ndGVjdGVkIENsYXNzIHR5cGU7DQogICAgcHJvdGVjdGVkIGJvb2xlYW4gc3Vi\ncyA9IHRydWU7DQoNCiAgICAvLyB0eXBlIGhhcyBoaXMgYmFzZWQgb24gdGhl\nIGxlYXN0LWRlcml2ZWQgbm9uLW9iamVjdCBjbGFzcyBzbyB0aGF0DQogICAg\nLy8gdXNlci1naXZlbiBpZHMgd2l0aCBub24tZXhhY3QgdHlwZXMgbWF0Y2gg\naWRzIHdpdGggZXhhY3QgdHlwZXMNCiAgICBwcml2YXRlIHRyYW5zaWVudCBp\nbnQgX3R5cGVIYXNoID0gMDsNCg0KICAgIHByb3RlY3RlZCBPcGVuSlBBSWQo\nKSB7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIE9wZW5KUEFJZChDbGFzcyB0\neXBlKSB7DQogICAgICAgIHRoaXMudHlwZSA9IHR5cGU7DQogICAgfQ0KDQog\nICAgcHJvdGVjdGVkIE9wZW5KUEFJZChDbGFzcyB0eXBlLCBib29sZWFuIHN1\nYnMpIHsNCiAgICAgICAgdGhpcy50eXBlID0gdHlwZTsNCiAgICAgICAgdGhp\ncy5zdWJzID0gc3ViczsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBSZXR1\ncm4gdGhlIHBlcnNpdGVudCBjbGFzcyB3aGljaCB0aGlzIGlkIGluc3RhbmNl\nIHJlcHJlc2VudHMuDQogICAgICovDQogICAgcHVibGljIENsYXNzIGdldFR5\ncGUoKSB7DQogICAgICAgIHJldHVybiB0eXBlOw0KICAgIH0NCg0KICAgIC8q\nKg0KICAgICAqIFdoZXRoZXIgdGhpcyBvaWQgbWlnaHQgYmUgZm9yIGEgc3Vi\nY2xhc3Mgb2YgdGhlIGdpdmVuIHR5cGUuDQogICAgICogRGVmYXVsdHMgdG8g\ndHJ1ZS4NCiAgICAgKi8NCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNTdWJjbGFz\nc2VzKCkgew0KICAgICAgICByZXR1cm4gc3ViczsNCiAgICB9DQoNCiAgICAv\nKioNCiAgICAgKiBTZXQgdGhlIGV4YWN0IHR5cGUgb2YgdGhlIGRlc2NyaWJl\nZCBpbnN0YW5jZSBvbmNlIGl0IGlzIGtub3duLg0KICAgICAqLw0KICAgIHB1\nYmxpYyB2b2lkIHNldE1hbmFnZWRJbnN0YW5jZVR5cGUoQ2xhc3MgdHlwZSkg\new0KICAgICAgICB0aGlzLnR5cGUgPSB0eXBlOw0KICAgICAgICB0aGlzLnN1\nYnMgPSBmYWxzZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBTZXQgdGhl\nIGV4YWN0IHR5cGUgb2YgdGhlIGRlc2NyaWJlZCBpbnN0YW5jZSBvbmNlIGl0\nIGlzIGtub3duLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHNldE1hbmFn\nZWRJbnN0YW5jZVR5cGUoQ2xhc3MgdHlwZSwgYm9vbGVhbiBzdWJzKSB7DQog\nICAgICAgIHRoaXMudHlwZSA9IHR5cGU7DQogICAgICAgIHRoaXMuc3VicyA9\nIHN1YnM7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmV0dXJuIHRoZSBp\nZGVudGl0eSB2YWx1ZSBhcyBhbiBvYmplY3QuDQogICAgICovDQogICAgcHVi\nbGljIGFic3RyYWN0IE9iamVjdCBnZXRJZE9iamVjdCgpOw0KDQogICAgLyoq\nDQogICAgICogUmV0dXJuIHRoZSBpZCdzIGhhc2ggY29kZS4NCiAgICAgKi8N\nCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgaW50IGlkSGFzaCgpOw0KDQogICAg\nLyoqDQogICAgICogQ29tcGFyZSB0aGUgaWQgdG8gdGhlIGlkIG9mIHRoZSBn\naXZlbiBpbnN0YW5jZS4NCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgYWJzdHJh\nY3QgYm9vbGVhbiBpZEVxdWFscyhPcGVuSlBBSWQgb3RoZXIpOw0KDQogICAg\nLyoqDQogICAgICogR2VuZXJhdGUgdGhlIGhhc2hjb2RlIGZvciB0aGlzIElk\nLiAgQ2FjaGUgdGhlIHR5cGUncyBnZW5lcmF0ZWQgaGFzaGNvZGUNCiAgICAg\nKiBzbyB0aGF0IGl0IGRvZXNuJ3QgaGF2ZSB0byBiZSBnZW5lcmF0ZWQgZWFj\naCB0aW1lLg0KICAgICAqLw0KICAgIHB1YmxpYyBpbnQgaGFzaENvZGUoKSB7\nDQogICAgICAgIGlmIChfdHlwZUhhc2ggPT0gMCkgew0KICAgICAgICAgICAg\nSW50ZWdlciB0eXBlSGFzaEludCA9IChJbnRlZ2VyKSBfdHlwZUNhY2hlLmdl\ndCh0eXBlKTsNCiAgICAgICAgICAgIGlmICh0eXBlSGFzaEludCA9PSBudWxs\nKSB7DQogICAgICAgICAgICAgICAgQ2xhc3MgYmFzZSA9IHR5cGU7DQogICAg\nICAgICAgICAgICAgQ2xhc3Mgc3VwZXJjbGFzcyA9IGJhc2UuZ2V0U3VwZXJj\nbGFzcygpOw0KICAgICAgICAgICAgICAgIHdoaWxlIChzdXBlcmNsYXNzICE9\nIG51bGwgJiYgc3VwZXJjbGFzcyAhPSBPYmplY3QuY2xhc3MpIHsNCiAgICAg\nICAgICAgICAgICAgICAgYmFzZSA9IGJhc2UuZ2V0U3VwZXJjbGFzcygpOw0K\nICAgICAgICAgICAgICAgICAgICBzdXBlcmNsYXNzID0gYmFzZS5nZXRTdXBl\ncmNsYXNzKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg\nIF90eXBlSGFzaCA9IGJhc2UuaGFzaENvZGUoKTsNCiAgICAgICAgICAgICAg\nICBfdHlwZUNhY2hlLnB1dCh0eXBlLCBuZXcgSW50ZWdlcihfdHlwZUhhc2gp\nKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgX3R5\ncGVIYXNoID0gdHlwZUhhc2hJbnQuaW50VmFsdWUoKTsNCiAgICAgICAgICAg\nIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gX3R5cGVIYXNoIF4gaWRI\nYXNoKCk7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9i\namVjdCBvKSB7DQogICAgICAgIGlmIChvID09IHRoaXMpDQogICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgaWYgKG8gPT0gbnVsbCB8fCBnZXRD\nbGFzcygpICE9IG8uZ2V0Q2xhc3MoKSkNCiAgICAgICAgICAgIHJldHVybiBm\nYWxzZTsNCg0KICAgICAgICBPcGVuSlBBSWQgaWQgPSAoT3BlbkpQQUlkKSBv\nOw0KICAgICAgICByZXR1cm4gaWRFcXVhbHMoaWQpICYmIChpZC50eXBlLmlz\nQXNzaWduYWJsZUZyb20odHlwZSkNCiAgICAgICAgICAgIHx8IChzdWJzICYm\nIHR5cGUuaXNBc3NpZ25hYmxlRnJvbShpZC50eXBlKSkpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7DQogICAgICAgIHJldHVy\nbiB0eXBlLmdldE5hbWUoKSArICItIiArIGdldElkT2JqZWN0KCk7DQogICAg\nfQ0KDQogICAgcHVibGljIGludCBjb21wYXJlVG8oT2JqZWN0IG90aGVyKSB7\nDQogICAgICAgIGlmIChvdGhlciA9PSB0aGlzKQ0KICAgICAgICAgICAgcmV0\ndXJuIDA7DQogICAgICAgIGlmIChvdGhlciA9PSBudWxsKQ0KICAgICAgICAg\nICAgcmV0dXJuIDE7DQogICAgICAgIHJldHVybiAoKENvbXBhcmFibGUpIGdl\ndElkT2JqZWN0KCkpLmNvbXBhcmVUbygoKE9wZW5KUEFJZCkgb3RoZXIpLg0K\nICAgICAgICAgICAgZ2V0SWRPYmplY3QgKCkpOw0KCX0NCn0NCg==\n","encoding":"base64"}

