{"sha":"eee99d6844191a5bbaf2fa17cd3edf63202ecb2e","node_id":"MDQ6QmxvYjIwNjM2NDplZWU5OWQ2ODQ0MTkxYTViYmFmMmZhMTdjZDNlZGY2MzIwMmVjYjJl","size":14328,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/eee99d6844191a5bbaf2fa17cd3edf63202ecb2e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db21wYXJhdG9y\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdEl0ZXJhdG9yOwoKLyoqCiAq\nIFV0aWxpdHkgbWV0aG9kcyB1c2VkIGJ5IGNvbGxlY3Rpb24gcHJveGllcy4K\nICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVi\nbGljIGNsYXNzIFByb3h5Q29sbGVjdGlvbnMgCiAgICBleHRlbmRzIFByb3hp\nZXMgewoKICAgIC8qKgogICAgICogQ2FsbCBiZWZvcmUgaW52b2tpbmcge0Bs\naW5rIExpc3QjYWRkKGludCxPYmplY3QpfSBvbiBzdXBlci4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyB2b2lkIGJlZm9yZUFkZChQcm94eUNvbGxlY3Rp\nb24gY29sbCwgaW50IGluZGV4LCBPYmplY3QgdmFsdWUpewogICAgICAgIGFz\nc2VydEFsbG93ZWRUeXBlKHZhbHVlLCBjb2xsLmdldEVsZW1lbnRUeXBlKCkp\nOwogICAgICAgIGlmIChpbmRleCA9PSBjb2xsLnNpemUoKSkKICAgICAgICAg\nICAgLy8gb3B0aW1pemUgZm9yIGFkZGluZyB0byB0aGUgZW5kCiAgICAgICAg\nICAgIGJlZm9yZUFkZChjb2xsLCB2YWx1ZSk7CiAgICAgICAgZWxzZQogICAg\nICAgICAgICBkaXJ0eShjb2xsLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIENhbGwgYmVmb3JlIGludm9raW5nIHtAbGluayBWZWN0b3IjaW5zZXJ0\nRWxlbWVudEF0KE9iamVjdCxpbnQpfSBvbiBzdXBlci4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyB2b2lkIGJlZm9yZUluc2VydEVsZW1lbnRBdChQcm94\neUNvbGxlY3Rpb24gY29sbCwgT2JqZWN0IHZhbHVlLAogICAgICAgIGludCBp\nbmRleCkgewogICAgICAgIGJlZm9yZUFkZChjb2xsLCBpbmRleCwgdmFsdWUp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbCBiZWZvcmUgaW52b2tpbmcg\ne0BsaW5rIENvbGxlY3Rpb24jYWRkKE9iamVjdCl9IG9uIHN1cGVyLgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYmVmb3JlQWRkKFByb3h5Q29s\nbGVjdGlvbiBjb2xsLCBPYmplY3QgdmFsdWUpIHsKICAgICAgICBhc3NlcnRB\nbGxvd2VkVHlwZSh2YWx1ZSwgY29sbC5nZXRFbGVtZW50VHlwZSgpKTsKICAg\nICAgICBkaXJ0eShjb2xsLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBDYWxsIGFmdGVyIGludm9raW5nIHtAbGluayBDb2xsZWN0aW9uI2FkZChP\nYmplY3QpfSBvbiBzdXBlci4KICAgICAqCiAgICAgKiBAcGFyYW0gYWRkZWQg\nd2hldGhlciB0aGUgb2JqZWN0IHdhcyBhZGRlZAogICAgICogQHJldHVybiA8\nY29kZT5hZGRlZDwvY29kZT4sIGZvciBjb252ZW5pZW5jZQogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gYWZ0ZXJBZGQoUHJveHlDb2xsZWN0\naW9uIGNvbGwsIE9iamVjdCB2YWx1ZSwgCiAgICAgICAgYm9vbGVhbiBhZGRl\nZCkgewogICAgICAgIGlmIChhZGRlZCAmJiBjb2xsLmdldENoYW5nZVRyYWNr\nZXIoKSAhPSBudWxsKQogICAgICAgICAgICAoKENvbGxlY3Rpb25DaGFuZ2VU\ncmFja2VyKSBjb2xsLmdldENoYW5nZVRyYWNrZXIoKSkuYWRkZWQodmFsdWUp\nOwogICAgICAgIHJldHVybiBhZGRlZDsKICAgIH0KCiAgICAvKioKICAgICAq\nIENhbGwgYmVmb3JlIGludm9raW5nIHtAbGluayBWZWN0b3IjYWRkRWxlbWVu\ndChPYmplY3QpfSBvbiBzdXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyB2b2lkIGJlZm9yZUFkZEVsZW1lbnQoUHJveHlDb2xsZWN0aW9uIGNvbGws\nIE9iamVjdCB2YWx1ZSkgewogICAgICAgIGJlZm9yZUFkZChjb2xsLCB2YWx1\nZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxsIGFmdGVyIGludm9raW5n\nIHtAbGluayBWZWN0b3IjYWRkRWxlbWVudChPYmplY3QpfSBvbiBzdXBlci4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGFmdGVyQWRkRWxlbWVu\ndChQcm94eUNvbGxlY3Rpb24gY29sbCwgT2JqZWN0IHZhbHVlKSB7CiAgICAg\nICAgYWZ0ZXJBZGQoY29sbCwgdmFsdWUsIHRydWUpOwogICAgfQoKICAgIC8q\nKgogICAgICogQ2FsbCBiZWZvcmUgaW52b2tpbmcge0BsaW5rIExpbmtlZExp\nc3QjYWRkRmlyc3QoT2JqZWN0KX0gb24gc3VwZXIuCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgdm9pZCBiZWZvcmVBZGRGaXJzdChQcm94eUNvbGxlY3Rp\nb24gY29sbCwgT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgYmVmb3JlQWRkKGNv\nbGwsIDAsIHZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGwgYmVm\nb3JlIGludm9raW5nIHtAbGluayBMaW5rZWRMaXN0I2FkZExhc3QoT2JqZWN0\nKX0gb24gc3VwZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBi\nZWZvcmVBZGRMYXN0KFByb3h5Q29sbGVjdGlvbiBjb2xsLCBPYmplY3QgdmFs\ndWUpIHsKICAgICAgICBiZWZvcmVBZGQoY29sbCwgdmFsdWUpOwogICAgfQoK\nICAgIC8qKgogICAgICogQ2FsbCBhZnRlciBpbnZva2luZyB7QGxpbmsgTGlu\na2VkTGlzdCNhZGRMYXN0KE9iamVjdCl9IG9uIHN1cGVyLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIHZvaWQgYWZ0ZXJBZGRMYXN0KFByb3h5Q29sbGVj\ndGlvbiBjb2xsLCBPYmplY3QgdmFsdWUpIHsKICAgICAgICBhZnRlckFkZChj\nb2xsLCB2YWx1ZSwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxs\nIGJlZm9yZSBpbnZva2luZyB7QGxpbmsgUXVldWUjb2ZmZXIoT2JqZWN0KX0g\nb24gc3VwZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBiZWZv\ncmVPZmZlcihQcm94eUNvbGxlY3Rpb24gY29sbCwgT2JqZWN0IHZhbHVlKSB7\nCiAgICAgICAgYmVmb3JlQWRkKGNvbGwsIHZhbHVlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENhbGwgYWZ0ZXIgaW52b2tpbmcge0BsaW5rIFF1ZXVlI29m\nZmVyKE9iamVjdCl9IG9uIHN1cGVyLgogICAgICoKICAgICAqIEBwYXJhbSBh\nZGRlZCB3aGV0aGVyIHRoZSBvYmplY3Qgd2FzIGFkZGVkCiAgICAgKiBAcmV0\ndXJuIDxjb2RlPmFkZGVkPC9jb2RlPiwgZm9yIGNvbnZlbmllbmNlCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBhZnRlck9mZmVyKFByb3h5\nQ29sbGVjdGlvbiBjb2xsLCBPYmplY3QgdmFsdWUsIAogICAgICAgIGJvb2xl\nYW4gYWRkZWQpIHsKICAgICAgICByZXR1cm4gYWZ0ZXJBZGQoY29sbCwgdmFs\ndWUsIGFkZGVkKTsKICAgIH0KCiAgICAvKioKICAgICAqIE92ZXJyaWRlIGZv\nciB7QGxpbmsgTGlzdCNhZGRBbGwoaW50LCBDb2xsZWN0aW9uKX0uCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBhZGRBbGwoUHJveHlDb2xs\nZWN0aW9uIGNvbGwsIGludCBpbmRleCwgCiAgICAgICAgQ29sbGVjdGlvbiB2\nYWx1ZXMpIHsKICAgICAgICBMaXN0IGxpc3QgPSAoTGlzdCkgY29sbDsKICAg\nICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IHZhbHVlcy5pdGVyYXRvcigpOyBp\ndHIuaGFzTmV4dCgpOyBpbmRleCsrKQogICAgICAgICAgICBsaXN0LmFkZChp\nbmRleCwgaXRyLm5leHQoKSk7CiAgICAgICAgcmV0dXJuIHZhbHVlcy5zaXpl\nKCkgPiAwOwogICAgfQoKICAgIC8qKgogICAgICogT3ZlcnJpZGUgZm9yIHtA\nbGluayBDb2xsZWN0aW9uI2FkZEFsbH0uCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgYm9vbGVhbiBhZGRBbGwoUHJveHlDb2xsZWN0aW9uIGNvbGwsIENv\nbGxlY3Rpb24gdmFsdWVzKSB7CiAgICAgICAgYm9vbGVhbiBhZGRlZCA9IGZh\nbHNlOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gdmFsdWVzLml0ZXJh\ndG9yKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICBhZGRlZCB8PSBj\nb2xsLmFkZChpdHIubmV4dCgpKTsKICAgICAgICByZXR1cm4gYWRkZWQ7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDYWxsIGJlZm9yZSBjbGVhcmluZyBjb2xs\nZWN0aW9uLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYmVmb3Jl\nQ2xlYXIoUHJveHlDb2xsZWN0aW9uIGNvbGwpIHsKICAgICAgICBkaXJ0eShj\nb2xsLCB0cnVlKTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGNvbGwu\naXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspCiAgICAgICAgICAgIHJlbW92\nZWQoY29sbCwgaXRyLm5leHQoKSwgZmFsc2UpOwogICAgfQoKICAgIC8qKgog\nICAgICogQ2FsbCBiZWZvcmUgY2xlYXJpbmcgdmVjdG9yLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIHZvaWQgYmVmb3JlUmVtb3ZlQWxsRWxlbWVudHMo\nUHJveHlDb2xsZWN0aW9uIGNvbGwpIHsKICAgICAgICBiZWZvcmVDbGVhcihj\nb2xsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdyYXAgZ2l2ZW4gaXRlcmF0\nb3IgaW4gYSBwcm94eS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBJdGVy\nYXRvciBhZnRlckl0ZXJhdG9yKGZpbmFsIFByb3h5Q29sbGVjdGlvbiBjb2xs\nLCAKICAgICAgICBmaW5hbCBJdGVyYXRvciBpdHIpIHsKICAgICAgICAvLyBj\naGVjayBmb3IgcHJveGllZDsgc29tZSBjb2xsIGltcGxzIGRlbGVnYXRlIGl0\nZXJhdG9yIG1ldGhvZHMKICAgICAgICBpZiAoaXRyIGluc3RhbmNlb2YgUHJv\neHlJdGVyYXRvcikKICAgICAgICAgICAgcmV0dXJuIGl0cjsKICAgICAgICBy\nZXR1cm4gbmV3IFByb3h5SXRlcmF0b3IoKSB7CiAgICAgICAgICAgIHByaXZh\ndGUgT2JqZWN0IF9sYXN0ID0gbnVsbDsKCiAgICAgICAgICAgIHB1YmxpYyBi\nb29sZWFuIGhhc05leHQoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXRy\nLmhhc05leHQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHVibGlj\nIE9iamVjdCBuZXh0KCkgewogICAgICAgICAgICAgICAgX2xhc3QgPSBpdHIu\nbmV4dCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9sYXN0OwogICAgICAg\nICAgICB9CgogICAgICAgICAgICBwdWJsaWMgdm9pZCByZW1vdmUoKSB7CiAg\nICAgICAgICAgICAgICBkaXJ0eShjb2xsLCBmYWxzZSk7CiAgICAgICAgICAg\nICAgICBpdHIucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBpZiAoY29sbC5n\nZXRDaGFuZ2VUcmFja2VyKCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAg\nICAoKENvbGxlY3Rpb25DaGFuZ2VUcmFja2VyKSBjb2xsLmdldENoYW5nZVRy\nYWNrZXIoKSkuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQoX2xh\nc3QpOwogICAgICAgICAgICAgICAgUHJveGllcy5yZW1vdmVkKGNvbGwsIF9s\nYXN0LCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfQoK\nICAgIC8qKgogICAgICogV3JhcCBnaXZlbiBpdGVyYXRvciBpbiBhIHByb3h5\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIExpc3RJdGVyYXRvciBhZnRl\nckxpc3RJdGVyYXRvcihmaW5hbCBQcm94eUNvbGxlY3Rpb24gY29sbCwgCiAg\nICAgICAgaW50IGlkeCwgZmluYWwgTGlzdEl0ZXJhdG9yIGl0cikgewogICAg\nICAgIHJldHVybiBhZnRlckxpc3RJdGVyYXRvcihjb2xsLCBpdHIpOwogICAg\nfQoKICAgIC8qKgogICAgICogV3JhcCBnaXZlbiBpdGVyYXRvciBpbiBhIHBy\nb3h5LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIExpc3RJdGVyYXRvciBh\nZnRlckxpc3RJdGVyYXRvcihmaW5hbCBQcm94eUNvbGxlY3Rpb24gY29sbCwg\nCiAgICAgICAgZmluYWwgTGlzdEl0ZXJhdG9yIGl0cikgewogICAgICAgIC8v\nIGNoZWNrIGZvciBwcm94aWVkOyBzb21lIGNvbGwgaW1wbHMgZGVsZWdhdGUg\naXRlcmF0b3IgbWV0aG9kcwogICAgICAgIGlmIChpdHIgaW5zdGFuY2VvZiBQ\ncm94eUxpc3RJdGVyYXRvcikKICAgICAgICAgICAgcmV0dXJuIGl0cjsKICAg\nICAgICByZXR1cm4gbmV3IFByb3h5TGlzdEl0ZXJhdG9yKCkgewogICAgICAg\nICAgICBwcml2YXRlIE9iamVjdCBfbGFzdCA9IG51bGw7CgogICAgICAgICAg\nICBwdWJsaWMgYm9vbGVhbiBoYXNOZXh0KCkgewogICAgICAgICAgICAgICAg\ncmV0dXJuIGl0ci5oYXNOZXh0KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAg\nICAgIHB1YmxpYyBpbnQgbmV4dEluZGV4KCkgewogICAgICAgICAgICAgICAg\ncmV0dXJuIGl0ci5uZXh0SW5kZXgoKTsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgcHVibGljIE9iamVjdCBuZXh0KCkgewogICAgICAgICAgICAgICAg\nX2xhc3QgPSBpdHIubmV4dCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9s\nYXN0OwogICAgICAgICAgICB9CgogICAgICAgICAgICBwdWJsaWMgYm9vbGVh\nbiBoYXNQcmV2aW91cygpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpdHIu\naGFzUHJldmlvdXMoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHVi\nbGljIGludCBwcmV2aW91c0luZGV4KCkgewogICAgICAgICAgICAgICAgcmV0\ndXJuIGl0ci5wcmV2aW91c0luZGV4KCk7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIHB1YmxpYyBPYmplY3QgcHJldmlvdXMoKSB7CiAgICAgICAgICAg\nICAgICBfbGFzdCA9IGl0ci5wcmV2aW91cygpOwogICAgICAgICAgICAgICAg\ncmV0dXJuIF9sYXN0OwogICAgICAgICAgICB9CgogICAgICAgICAgICBwdWJs\naWMgdm9pZCBzZXQoT2JqZWN0IG8pIHsKICAgICAgICAgICAgICAgIGFzc2Vy\ndEFsbG93ZWRUeXBlKG8sIGNvbGwuZ2V0RWxlbWVudFR5cGUoKSk7CiAgICAg\nICAgICAgICAgICBkaXJ0eShjb2xsLCBmYWxzZSk7CiAgICAgICAgICAgICAg\nICBpdHIuc2V0KG8pOwogICAgICAgICAgICAgICAgaWYgKGNvbGwuZ2V0Q2hh\nbmdlVHJhY2tlcigpICE9IG51bGwpCiAgICAgICAgICAgICAgICAgICAgY29s\nbC5nZXRDaGFuZ2VUcmFja2VyKCkuc3RvcFRyYWNraW5nKCk7CiAgICAgICAg\nICAgICAgICBQcm94aWVzLnJlbW92ZWQoY29sbCwgX2xhc3QsIGZhbHNlKTsK\nICAgICAgICAgICAgICAgIF9sYXN0ID0gbzsKICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgcHVibGljIHZvaWQgYWRkKE9iamVjdCBvKSB7CiAgICAgICAg\nICAgICAgICBhc3NlcnRBbGxvd2VkVHlwZShvLCBjb2xsLmdldEVsZW1lbnRU\neXBlKCkpOwogICAgICAgICAgICAgICAgZGlydHkoY29sbCwgZmFsc2UpOwog\nICAgICAgICAgICAgICAgaXRyLmFkZChvKTsKICAgICAgICAgICAgICAgIGlm\nIChjb2xsLmdldENoYW5nZVRyYWNrZXIoKSAhPSBudWxsKSB7CiAgICAgICAg\nICAgICAgICAgICAgaWYgKGhhc05leHQoKSkKICAgICAgICAgICAgICAgICAg\nICAgICAgY29sbC5nZXRDaGFuZ2VUcmFja2VyKCkuc3RvcFRyYWNraW5nKCk7\nCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAg\nICAgICAoKENvbGxlY3Rpb25DaGFuZ2VUcmFja2VyKSBjb2xsLmdldENoYW5n\nZVRyYWNrZXIoKSkuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRl\nZChvKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9sYXN0\nID0gbzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHVibGljIHZvaWQg\ncmVtb3ZlKCkgewogICAgICAgICAgICAgICAgZGlydHkoY29sbCwgZmFsc2Up\nOwogICAgICAgICAgICAgICAgaXRyLnJlbW92ZSgpOwogICAgICAgICAgICAg\nICAgaWYgKGNvbGwuZ2V0Q2hhbmdlVHJhY2tlcigpICE9IG51bGwpCiAgICAg\nICAgICAgICAgICAgICAgKChDb2xsZWN0aW9uQ2hhbmdlVHJhY2tlcikgY29s\nbC5nZXRDaGFuZ2VUcmFja2VyKCkpLgogICAgICAgICAgICAgICAgICAgICAg\nICByZW1vdmVkKF9sYXN0KTsKICAgICAgICAgICAgICAgIFByb3hpZXMucmVt\nb3ZlZChjb2xsLCBfbGFzdCwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAg\nICAgfTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGwgYmVmb3JlIGludm9r\naW5nIHtAbGluayBMaXN0I3JlbW92ZShpbnQpfSBvbiBzdXBlci4KICAgICAq\nLyAKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBiZWZvcmVSZW1vdmUoUHJveHlD\nb2xsZWN0aW9uIGNvbGwsIGludCBpbmRleCkgewogICAgICAgIGRpcnR5KGNv\nbGwsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGwgYWZ0ZXIg\naW52b2tpbmcge0BsaW5rIExpc3QjcmVtb3ZlKGludCl9IG9uIHN1cGVyLgog\nICAgICoKICAgICAqIEBwYXJhbSByZW1vdmVkIHRoZSByZW1vdmVkIG9iamVj\ndAogICAgICogQHJldHVybiB0aGUgcmVtb3ZlZCBvYmplY3QsIGZvciBjb252\nZW5pZW5jZQogICAgICovIAogICAgcHVibGljIHN0YXRpYyBPYmplY3QgYWZ0\nZXJSZW1vdmUoUHJveHlDb2xsZWN0aW9uIGNvbGwsIGludCBpbmRleCwgCiAg\nICAgICAgT2JqZWN0IHJlbW92ZWQpIHsKICAgICAgICBpZiAoY29sbC5nZXRD\naGFuZ2VUcmFja2VyKCkgIT0gbnVsbCkKICAgICAgICAgICAgKChDb2xsZWN0\naW9uQ2hhbmdlVHJhY2tlcikgY29sbC5nZXRDaGFuZ2VUcmFja2VyKCkpLnJl\nbW92ZWQocmVtb3ZlZCk7CiAgICAgICAgcmVtb3ZlZChjb2xsLCByZW1vdmVk\nLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIHJlbW92ZWQ7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBDYWxsIGJlZm9yZSBpbnZva2luZyB7QGxpbmsgVmVjdG9y\nI3JlbW92ZUVsZW1lbnRBdChpbnQpfSBvbiBzdXBlci4KICAgICAqLyAKICAg\nIHB1YmxpYyBzdGF0aWMgdm9pZCBiZWZvcmVSZW1vdmVFbGVtZW50QXQoUHJv\neHlDb2xsZWN0aW9uIGNvbGwsIGludCBpbmRleCkgewogICAgICAgIGJlZm9y\nZVJlbW92ZShjb2xsLCBpbmRleCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\nYWxsIGJlZm9yZSBpbnZva2luZyB7QGxpbmsgQ29sbGVjdGlvbiNyZW1vdmV9\nIG9uIHN1cGVyLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYmVm\nb3JlUmVtb3ZlKFByb3h5Q29sbGVjdGlvbiBjb2xsLCBPYmplY3Qgbykgewog\nICAgICAgIGRpcnR5KGNvbGwsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIENhbGwgYWZ0ZXIgaW52b2tpbmcge0BsaW5rIENvbGxlY3Rpb24jcmVt\nb3ZlfSBvbiBzdXBlci4KICAgICAqCiAgICAgKiBAcGFyYW0gcmVtb3ZlZCB3\naGV0aGVyIHRoZSBvYmplY3Qgd2FzIHJlbW92ZWQKICAgICAqIEByZXR1cm4g\nd2hldGhlciB0aGUgb2JqZWN0IHdhcyByZW1vdmVkLCBmb3IgY29udmVuaWVu\nY2UKICAgICAqLyAKICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBhZnRlclJl\nbW92ZShQcm94eUNvbGxlY3Rpb24gY29sbCwgT2JqZWN0IG8sIAogICAgICAg\nIGJvb2xlYW4gcmVtb3ZlZCl7CiAgICAgICAgaWYgKCFyZW1vdmVkKQogICAg\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKGNvbGwuZ2V0Q2hh\nbmdlVHJhY2tlcigpICE9IG51bGwpCiAgICAgICAgICAgICgoQ29sbGVjdGlv\nbkNoYW5nZVRyYWNrZXIpIGNvbGwuZ2V0Q2hhbmdlVHJhY2tlcigpKS5yZW1v\ndmVkKG8pOwogICAgICAgIHJlbW92ZWQoY29sbCwgbywgZmFsc2UpOwogICAg\nICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbCBi\nZWZvcmUgaW52b2tpbmcge0BsaW5rIFZlY3RvciNyZW1vdmVFbGVtZW50fSBv\nbiBzdXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGJlZm9y\nZVJlbW92ZUVsZW1lbnQoUHJveHlDb2xsZWN0aW9uIGNvbGwsIE9iamVjdCBv\nKSB7CiAgICAgICAgYmVmb3JlUmVtb3ZlKGNvbGwsIG8pOwogICAgfQoKICAg\nIC8qKgogICAgICogQ2FsbCBhZnRlciBpbnZva2luZyB7QGxpbmsgVmVjdG9y\nI3JlbW92ZUVsZW1lbnR9IG9uIHN1cGVyLgogICAgICovIAogICAgcHVibGlj\nIHN0YXRpYyBib29sZWFuIGFmdGVyUmVtb3ZlRWxlbWVudChQcm94eUNvbGxl\nY3Rpb24gY29sbCwgT2JqZWN0IG8sIAogICAgICAgIGJvb2xlYW4gcmVtb3Zl\nZCkgewogICAgICAgIHJldHVybiBhZnRlclJlbW92ZShjb2xsLCBvLCByZW1v\ndmVkKTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGwgYmVmb3JlIGludm9r\naW5nIHtAbGluayBMaW5rZWRMaXN0I3JlbW92ZUZpcnN0fSBvbiBzdXBlci4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGJlZm9yZVJlbW92ZUZp\ncnN0KFByb3h5Q29sbGVjdGlvbiBjb2xsKSB7CiAgICAgICAgYmVmb3JlUmVt\nb3ZlKGNvbGwsIDApOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbCBhZnRl\nciBpbnZva2luZyB7QGxpbmsgTGlua2VkTGlzdCNyZW1vdmVGaXJzdH0gb24g\nc3VwZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0IGFmdGVy\nUmVtb3ZlRmlyc3QoUHJveHlDb2xsZWN0aW9uIGNvbGwsIE9iamVjdCByZW1v\ndmVkKXsKICAgICAgICByZXR1cm4gYWZ0ZXJSZW1vdmUoY29sbCwgMCwgcmVt\nb3ZlZCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxsIGFmdGVyIGludm9r\naW5nIHtAbGluayBMaW5rZWRMaXN0I3JlbW92ZUxhc3R9IG9uIHN1cGVyLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYmVmb3JlUmVtb3ZlTGFz\ndChQcm94eUNvbGxlY3Rpb24gY29sbCkgewogICAgICAgIGJlZm9yZVJlbW92\nZShjb2xsLCBjb2xsLnNpemUoKSAtIDEpOwogICAgfQoKICAgIC8qKgogICAg\nICogQ2FsbCBhZnRlciBpbnZva2luZyB7QGxpbmsgTGlua2VkTGlzdCNyZW1v\ndmVMYXN0fSBvbiBzdXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBP\nYmplY3QgYWZ0ZXJSZW1vdmVMYXN0KFByb3h5Q29sbGVjdGlvbiBjb2xsLCBP\nYmplY3QgcmVtb3ZlZCkgewogICAgICAgIHJldHVybiBhZnRlclJlbW92ZShj\nb2xsLCBjb2xsLnNpemUoKSwgcmVtb3ZlZCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDYWxsIGJlZm9yZSBpbnZva2luZyB7QGxpbmsgUXVldWUjcmVtb3Zl\nfSBvbiBzdXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGJl\nZm9yZVJlbW92ZShQcm94eUNvbGxlY3Rpb24gY29sbCkgewogICAgICAgIGJl\nZm9yZVJlbW92ZShjb2xsLCAwKTsKICAgIH0KCiAgICAvKioKICAgICAqIENh\nbGwgYWZ0ZXIgaW52b2tpbmcge0BsaW5rIFF1ZXVlI3JlbW92ZX0gb24gc3Vw\nZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0IGFmdGVyUmVt\nb3ZlKFByb3h5Q29sbGVjdGlvbiBjb2xsLCBPYmplY3QgcmVtb3ZlZCl7CiAg\nICAgICAgcmV0dXJuIGFmdGVyUmVtb3ZlKGNvbGwsIDAsIHJlbW92ZWQpOwog\nICAgfQoKICAgIC8qKgogICAgICogQ2FsbCBiZWZvcmUgaW52b2tpbmcge0Bs\naW5rIFF1ZXVlI3BvbGx9IG9uIHN1cGVyLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIHZvaWQgYmVmb3JlUG9sbChQcm94eUNvbGxlY3Rpb24gY29sbCkg\newogICAgICAgIGlmICghY29sbC5pc0VtcHR5KCkpCiAgICAgICAgICAgIGJl\nZm9yZVJlbW92ZShjb2xsLCAwKTsKICAgIH0KCiAgICAvKioKICAgICAqIENh\nbGwgYWZ0ZXIgaW52b2tpbmcge0BsaW5rIFF1ZXVlI3BvbGx9IG9uIHN1cGVy\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdCBhZnRlclBvbGwo\nUHJveHlDb2xsZWN0aW9uIGNvbGwsIE9iamVjdCByZW1vdmVkKSB7CiAgICAg\nICAgaWYgKHJlbW92ZWQgIT0gbnVsbCkKICAgICAgICAgICAgYWZ0ZXJSZW1v\ndmUoY29sbCwgMCwgcmVtb3ZlZCk7CiAgICAgICAgcmV0dXJuIHJlbW92ZWQ7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBPdmVycmlkZSBmb3Ige0BsaW5rIENv\nbGxlY3Rpb24jcmVtb3ZlQWxsfS4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBib29sZWFuIHJlbW92ZUFsbChQcm94eUNvbGxlY3Rpb24gY29sbCwgQ29s\nbGVjdGlvbiB2YWxzKSB7CiAgICAgICAgYm9vbGVhbiByZW1vdmVkID0gZmFs\nc2U7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSB2YWxzLml0ZXJhdG9y\nKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICByZW1vdmVkIHw9IGNv\nbGwucmVtb3ZlKGl0ci5uZXh0KCkpOwogICAgICAgIHJldHVybiByZW1vdmVk\nOwogICAgfQoKICAgIC8qKgogICAgICogT3ZlcnJpZGUgZm9yIHtAbGluayBD\nb2xsZWN0aW9uI3JldGFpbkFsbH0uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgYm9vbGVhbiByZXRhaW5BbGwoUHJveHlDb2xsZWN0aW9uIGNvbGwsIENv\nbGxlY3Rpb24gdmFscykgewogICAgICAgIGludCBzaXplID0gY29sbC5zaXpl\nKCk7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBjb2xsLml0ZXJhdG9y\nKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICBpZiAoIXZhbHMuY29u\ndGFpbnMoaXRyLm5leHQoKSkpCiAgICAgICAgICAgICAgICBpdHIucmVtb3Zl\nKCk7CiAgICAgICAgcmV0dXJuIGNvbGwuc2l6ZSgpIDwgc2l6ZTsKICAgIH0K\nCiAgICAvKioKICAgICAqIENhbGwgYmVmb3JlIGludm9raW5nIHtAbGluayBM\naXN0I3NldH0gb24gc3VwZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\ndm9pZCBiZWZvcmVTZXQoUHJveHlDb2xsZWN0aW9uIGNvbGwsIGludCBpbmRl\neCwgCiAgICAgICAgT2JqZWN0IGVsZW1lbnQpIHsKICAgICAgICBhc3NlcnRB\nbGxvd2VkVHlwZShlbGVtZW50LCBjb2xsLmdldEVsZW1lbnRUeXBlKCkpOwog\nICAgICAgIGRpcnR5KGNvbGwsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAg\nICogQ2FsbCBhZnRlciBpbnZva2luZyB7QGxpbmsgTGlzdCNzZXR9IG9uIHN1\ncGVyLgogICAgICoKICAgICAqIEBwYXJhbSByZXBsYWNlZCB0aGUgcmVwbGFj\nZWQgb2JqZWN0CiAgICAgKiBAcmV0dXJuIHRoZSByZXBsYWNlZCBvYmplY3Qs\nIGZvciBjb252ZW5pZW5jZQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9i\namVjdCBhZnRlclNldChQcm94eUNvbGxlY3Rpb24gY29sbCwgaW50IGluZGV4\nLCAKICAgICAgICBPYmplY3QgZWxlbWVudCwgT2JqZWN0IHJlcGxhY2VkKSB7\nCiAgICAgICAgaWYgKHJlcGxhY2VkICE9IGVsZW1lbnQpCiAgICAgICAgICAg\nIHJlbW92ZWQoY29sbCwgcmVwbGFjZWQsIGZhbHNlKTsKICAgICAgICByZXR1\ncm4gcmVwbGFjZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxsIGJlZm9y\nZSBpbnZva2luZyB7QGxpbmsgVmVjdG9yI3NldEVsZW1lbnRBdH0gb24gc3Vw\nZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBiZWZvcmVTZXRF\nbGVtZW50QXQoUHJveHlDb2xsZWN0aW9uIGNvbGwsIE9iamVjdCBlbGVtZW50\nLAogICAgICAgIGludCBpbmRleCkgewogICAgICAgIGJlZm9yZVNldChjb2xs\nLCBpbmRleCwgZWxlbWVudCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxs\nIGFmdGVyIGludm9raW5nIHtAbGluayBWZWN0b3Ijc2V0RWxlbWVudEF0fSBv\nbiBzdXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPYmplY3QgYWZ0\nZXJTZXRFbGVtZW50QXQoUHJveHlDb2xsZWN0aW9uIGNvbGwsIE9iamVjdCBl\nbGVtZW50LAogICAgICAgIGludCBpbmRleCwgT2JqZWN0IHJlcGxhY2VkKSB7\nCiAgICAgICAgcmV0dXJuIGFmdGVyU2V0KGNvbGwsIGluZGV4LCBlbGVtZW50\nLCByZXBsYWNlZCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBNYXJrZXIgaW50\nZXJmYWNlIGZvciBhIHByb3hpZWQgaXRlcmF0b3IuIAogICAgICovCiAgICBw\ndWJsaWMgc3RhdGljIGludGVyZmFjZSBQcm94eUl0ZXJhdG9yIAogICAgICAg\nIGV4dGVuZHMgSXRlcmF0b3IgewogICAgfQoKICAgIC8qKgogICAgICogTWFy\na2VyIGludGVyZmFjZSBmb3IgYSBwcm94aWVkIGxpc3QgaXRlcmF0b3IuIAog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGludGVyZmFjZSBQcm94eUxpc3RJ\ndGVyYXRvciAKICAgICAgICBleHRlbmRzIFByb3h5SXRlcmF0b3IsIExpc3RJ\ndGVyYXRvciB7CiAgICB9Cn0K\n","encoding":"base64"}

