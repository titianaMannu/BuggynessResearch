{"sha":"8d4bcd457b196418511b2f143a509ba15e8fa72a","node_id":"MDQ6QmxvYjIwNjM2NDo4ZDRiY2Q0NTdiMTk2NDE4NTExYjJmMTQzYTUwOWJhMTVlOGZhNzJh","size":4254,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8d4bcd457b196418511b2f143a509ba15e8fa72a","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbDsNCg0KaW1wb3J0IGphdmEudXRpbC5NYXA7DQoNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlTWFuYWdlcjsNCmltcG9ydCBq\nYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcDsNCg0KLyoq\nDQogKiBSZXBvc2l0b3J5IG9mIHN0b3JlLXNwZWNpZmljIGZhY2FkZSBjbGFz\nc2VzLiBUaGlzIGlzIHVzZWQgYnkgZmFjYWRlIA0KICogaW1wbGVtZW50YXRp\nb25zIHRvIHdyYXAgc3RvcmUtc3BlY2lmaWMgY29tcG9uZW50cyB3aXRob3V0\nIGtub3dpbmcgDQogKiBhYm91dCBhbGwgcG9zc2libGUgYmFjay1lbmRzLg0K\nICovDQpwdWJsaWMgY2xhc3MgU3RvcmVGYWNhZGVUeXBlUmVnaXN0cnkgew0K\nDQogICAgcHJpdmF0ZSBNYXAgX2ltcGxzID0gbmV3IENvbmN1cnJlbnRIYXNo\nTWFwKCk7DQoNCiAgICAvKioNCiAgICAgKiBSZWdpc3RlciBhIGZhY2FkZSBp\nbXBsZW1lbnRhdGlvbi4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBmYWNhZGVU\neXBlIHRoZSBmYWNhZGUgaW50ZXJmYWNlDQogICAgICogQHBhcmFtIHN0b3Jl\nVHlwZSB0aGUgc3RvcmUncyANCiAgICAgKiB7QGxpbmsgb3JnLmFwYWNoZS5v\ncGVuanBhLmtlcm5lbC5TdG9yZU1hbmFnZXJ9IHR5cGUsIG9yIG51bGwgZm9y\nIGdlbmVyaWMNCiAgICAgKiBAcGFyYW0gaW1wbFR5cGUgdGhlIGNsYXNzIGlt\ncGxlbWVudGluZyB0aGUgZmFjYWRlDQogICAgICovDQogICAgcHVibGljIHZv\naWQgcmVnaXN0ZXJJbXBsZW1lbnRhdGlvbihDbGFzcyBmYWNhZGVUeXBlLCBD\nbGFzcyBzdG9yZVR5cGUsIA0KICAgICAgICBDbGFzcyBpbXBsVHlwZSkgew0K\nICAgICAgICBPYmplY3Qga2V5ID0gKHN0b3JlVHlwZSA9PSBudWxsKSA/IChP\nYmplY3QpIGZhY2FkZVR5cGUgDQogICAgICAgICAgICA6IG5ldyBLZXkoZmFj\nYWRlVHlwZSwgc3RvcmVUeXBlKTsNCiAgICAgICAgX2ltcGxzLnB1dChrZXks\nIGltcGxUeXBlKTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgICogUmV0\ndXJuIHRoZSBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIGdpdmVuIGZhY2FkZSBh\nbmQgc3RvcmUuDQogICAgICoNCiAgICAgKiBAcGFyYW0gZmFjYWRlVHlwZSB0\naGUgZmFjYWRlIGludGVyZmFjZQ0KICAgICAqIEBwYXJhbSBzdG9yZVR5cGUg\ndGhlIHN0b3JlJ3MgDQogICAgICoge0BsaW5rIG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuU3RvcmVNYW5hZ2VyfSB0eXBlLCBvciBudWxsIGZvciBnZW5l\ncmljDQogICAgICogQHBhcmFtIGltcGxUeXBlIHRoZSByZWdpc3RlcmVkIGlt\ncGxlbWVudG9yDQogICAgICovDQogICAgcHVibGljIENsYXNzIGdldEltcGxl\nbWVudGF0aW9uKENsYXNzIGZhY2FkZVR5cGUsIENsYXNzIHN0b3JlVHlwZSkg\new0KICAgICAgICAvLyB0cmF2ZXJzZSBzdG9yZSB0eXBlIGhpZXJhcmNoeSB0\nbyBzdG9yZSBtYW5hZ2VyIHRvIGZpbmQgbW9zdCBzcGVjaWZpYw0KICAgICAg\nICAvLyBzdG9yZSBhdmFpYWxibGUNCiAgICAgICAgQ2xhc3MgaW1wbDsNCiAg\nICAgICAgZm9yICg7IHN0b3JlVHlwZSAhPSBudWxsICYmIHN0b3JlVHlwZSAh\nPSBTdG9yZU1hbmFnZXIuY2xhc3M7IA0KICAgICAgICAgICAgc3RvcmVUeXBl\nID0gc3RvcmVUeXBlLmdldFN1cGVyY2xhc3MoKSkgew0KICAgICAgICAgICAg\naW1wbCA9IChDbGFzcykgX2ltcGxzLmdldChuZXcgS2V5KGZhY2FkZVR5cGUs\nIHN0b3JlVHlwZSkpOw0KICAgICAgICAgICAgaWYgKGltcGwgIT0gbnVsbCkN\nCiAgICAgICAgICAgICAgICByZXR1cm4gaW1wbDsgDQogICAgICAgIH0gICAg\nDQogICAgICAgIHJldHVybiAoQ2xhc3MpIF9pbXBscy5nZXQoZmFjYWRlVHlw\nZSk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICAqIFJldHVybiB0aGUg\naW1wbGVtZW50YXRpb24gZm9yIHRoZSBnaXZlbiBmYWNhZGUgYW5kIHN0b3Jl\nLiBJZiBubyANCiAgICAgKiByZWdpc3RlcmVkIGltcGxlbWVudGF0aW9uIGlz\nIGZvdW5kIHRoZW4gcmV0dXJucyB0aGUgZ2l2ZW4gZGVmYXVsdCB0eXBlDQog\nICAgICogcHJvdmlkZWQgaXQgdGhlIGZhY2FkZSB0eXBlIGlzIGFzc2lnbmFi\nbGUgZnJvbSB0aGUgZGVhZnVsdCB0eXBlLg0KICAgICAqDQogICAgICogQHBh\ncmFtIGZhY2FkZVR5cGUgdGhlIGZhY2FkZSBpbnRlcmZhY2UNCiAgICAgKiBA\ncGFyYW0gc3RvcmVUeXBlIHRoZSBzdG9yZSdzIA0KICAgICAqIHtAbGluayBv\ncmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlTWFuYWdlcn0gdHlwZSwg\nb3IgbnVsbCBmb3IgZ2VuZXJpYw0KICAgICAqIEBwYXJhbSBpbXBsVHlwZSB0\naGUgcmVnaXN0ZXJlZCBpbXBsZW1lbnRvcg0KICAgICAqIEBwYXJhbSBkZWZh\ndWx0VHlwZSBjbGFzcyBpZiBubyByZWdpc3RlcmVkIGltcGxlbWVudGF0aW9u\nIGlzIGF2YWlsYWJsZS4NCiAgICAgKi8NCiAgICBwdWJsaWMgQ2xhc3MgZ2V0\nSW1wbGVtZW50YXRpb24oQ2xhc3MgZmFjYWRlVHlwZSwgQ2xhc3Mgc3RvcmVU\neXBlLCANCiAgICAJQ2xhc3MgZGVmYXVsdFR5cGUpIHsNCiAgICAJQ2xhc3Mg\ncmVzdWx0ID0gZ2V0SW1wbGVtZW50YXRpb24oZmFjYWRlVHlwZSwgc3RvcmVU\neXBlKTsNCiAgICAJaWYgKHJlc3VsdCA9PSBudWxsKQ0KICAgIAkJcmVzdWx0\nID0gZGVmYXVsdFR5cGU7DQogICAgCWlmIChmYWNhZGVUeXBlID09IG51bGwg\nfHwgIWZhY2FkZVR5cGUuaXNBc3NpZ25hYmxlRnJvbShyZXN1bHQpKQ0KICAg\nIAkJdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7DQogICAgCXJldHVy\nbiByZXN1bHQ7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogTG9va3VwIGtl\neSBmb3IgZmFjYWRlK3N0b3JlIGhhc2guDQogICAgICovDQogICAgcHJpdmF0\nZSBzdGF0aWMgY2xhc3MgS2V5IHsNCiAgICAgICAgcHVibGljIGZpbmFsIENs\nYXNzIF9mYWNhZGVUeXBlOw0KICAgICAgICBwdWJsaWMgZmluYWwgQ2xhc3Mg\nX3N0b3JlVHlwZTsNCg0KICAgICAgICBwdWJsaWMgS2V5KENsYXNzIGZhY2Fk\nZVR5cGUsIENsYXNzIHN0b3JlVHlwZSkgew0KICAgICAgICAgICAgX2ZhY2Fk\nZVR5cGUgPSBmYWNhZGVUeXBlOw0KICAgICAgICAgICAgX3N0b3JlVHlwZSA9\nIHN0b3JlVHlwZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyBpbnQg\naGFzaENvZGUoKSB7DQogICAgICAgICAgICByZXR1cm4gX2ZhY2FkZVR5cGUu\naGFzaENvZGUoKSBeIF9zdG9yZVR5cGUuaGFzaENvZGUoKTsNCiAgICAgICAg\nfQ0KDQogICAgICAgIHB1YmxpYyBib29sZWFuIGVxdWFscyhPYmplY3Qgb3Ro\nZXIpIHsNCiAgICAgICAgICAgIGlmIChvdGhlciA9PSB0aGlzKQ0KICAgICAg\nICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgS2V5IGsgPSAo\nS2V5KSBvdGhlcjsNCiAgICAgICAgICAgIHJldHVybiBfZmFjYWRlVHlwZSA9\nPSBrLl9mYWNhZGVUeXBlICYmIF9zdG9yZVR5cGUgPT0gay5fc3RvcmVUeXBl\nOw0KICAgICAgICB9DQogICAgfQ0KfQ0K\n","encoding":"base64"}

