{"sha":"c72f91b26a36a114fa7c43985ce31ab5f1adadae","node_id":"MDQ6QmxvYjIwNjM2NDpjNzJmOTFiMjZhMzZhMTE0ZmE3YzQzOTg1Y2UzMWFiNWYxYWRhZGFl","size":17778,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c72f91b26a36a114fa7c43985ce31ab5f1adadae","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\namF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250\ncm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Qcml2aWxlZ2VkQWN0aW9u\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0\nIGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkNvbGxl\nY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7CmltcG9ydCBq\nYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1w\nb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuTWlzc2luZ1Jl\nc291cmNlRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5s\nYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkphdmFWZXJzaW9uczsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuU2VydmljZXM7CgovKioKICogVXRpbGl0aWVz\nIGZvciBydW5uaW5nIHByb2R1Y3QgZGVyaXZhdGlvbnMuCiAqCiAqIEBhdXRo\nb3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBQ\ncm9kdWN0RGVyaXZhdGlvbnMgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAg\nICAoUHJvZHVjdERlcml2YXRpb25zLmNsYXNzKTsKCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBQcm9kdWN0RGVyaXZhdGlvbltdIF9kZXJpdmF0aW9uczsK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZ1tdIF9kZXJpdmF0aW9u\nTmFtZXM7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBUaHJvd2FibGVbXSBf\nZGVyaXZhdGlvbkVycm9yczsKICAgIHByaXZhdGUgc3RhdGljIFN0cmluZ1td\nIF9wcmVmaXhlczsKICAgIHN0YXRpYyB7CiAgICAgICAgQ2xhc3NMb2FkZXIg\nbCA9IChDbGFzc0xvYWRlcikgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVn\nZWQoCiAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdldENsYXNzTG9hZGVy\nQWN0aW9uKFByb2R1Y3REZXJpdmF0aW9uLmNsYXNzKSk7IAogICAgICAgIF9k\nZXJpdmF0aW9uTmFtZXMgPSBTZXJ2aWNlcy5nZXRJbXBsZW1lbnRvcnMoUHJv\nZHVjdERlcml2YXRpb24uY2xhc3MsIGwpOwogICAgICAgIF9kZXJpdmF0aW9u\nRXJyb3JzID0gbmV3IFRocm93YWJsZVtfZGVyaXZhdGlvbk5hbWVzLmxlbmd0\naF07CiAgICAgICAgTGlzdCBkZXJpdmF0aW9ucyA9IG5ldyBBcnJheUxpc3Qo\nX2Rlcml2YXRpb25OYW1lcy5sZW5ndGgpOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgX2Rlcml2YXRpb25OYW1lcy5sZW5ndGg7IGkrKykgewogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgUHJvZHVjdERlcml2YXRp\nb24gZCA9IChQcm9kdWN0RGVyaXZhdGlvbikKICAgICAgICAgICAgICAgICAg\nICBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAg\nICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIubmV3SW5zdGFuY2VBY3Rpb24o\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDbGFzcy5mb3JOYW1lKF9k\nZXJpdmF0aW9uTmFtZXNbaV0sIHRydWUsIGwpKSk7CiAgICAgICAgICAgICAg\nICBkLnZhbGlkYXRlKCk7CiAgICAgICAgICAgICAgICBkZXJpdmF0aW9ucy5h\nZGQoZCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAg\nICAgICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFByaXZpbGVnZWRBY3Rp\nb25FeGNlcHRpb24pCiAgICAgICAgICAgICAgICAgICAgdCA9ICgoUHJpdmls\nZWdlZEFjdGlvbkV4Y2VwdGlvbikgdCkuZ2V0RXhjZXB0aW9uKCk7CiAgICAg\nICAgICAgICAgICBfZGVyaXZhdGlvbkVycm9yc1tpXSA9IHQ7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIG11c3QgYmUgYXQgbGVhc3Qg\nb25lIHByb2R1Y3QgZGVyaXZhdGlvbiB0byBkZWZpbmUgbWV0YWRhdGEgZmFj\ndG9yaWVzLAogICAgICAgIC8vIGV0Yy4gCiAgICAgICAgaWYgKGRlcml2YXRp\nb25zLmlzRW1wdHkoKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2lu\nZ1Jlc291cmNlRXhjZXB0aW9uKF9sb2MuZ2V0CiAgICAgICAgICAgICAgICAo\nIm5vLXByb2R1Y3QtZGVyaXZhdGlvbnMiLCBQcm9kdWN0RGVyaXZhdGlvbi5j\nbGFzcy5nZXROYW1lKCksCiAgICAgICAgICAgICAgICBkZXJpdmF0aW9uRXJy\nb3JzVG9TdHJpbmcoKSkuZ2V0TWVzc2FnZSgpLCAKICAgICAgICAgICAgICAg\nIFByb2R1Y3REZXJpdmF0aW9ucy5jbGFzcy5nZXROYW1lKCksImRlcml2YXRp\nb25zIik7CiAgICAgICAgfQoKICAgICAgICAvLyBpZiBzb21lIGRlcml2YXRp\nb25zIHdlcmVuJ3QgaW5zdGFudGlhYmxlLCB3YXJuCiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBfZGVyaXZhdGlvbkVycm9ycy5sZW5ndGg7IGkrKykg\newogICAgICAgICAgICBpZiAoX2Rlcml2YXRpb25FcnJvcnNbaV0gPT0gbnVs\nbCkKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBTeXN0\nZW0uZXJyLnByaW50bG4oX2xvYy5nZXQoImJhZC1wcm9kdWN0LWRlcml2YXRp\nb25zIiwKICAgICAgICAgICAgICAgIFByb2R1Y3REZXJpdmF0aW9ucy5jbGFz\ncy5nZXROYW1lKCkpKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoK\nICAgICAgICBDb2xsZWN0aW9ucy5zb3J0KGRlcml2YXRpb25zLCBuZXcgUHJv\nZHVjdERlcml2YXRpb25Db21wYXJhdG9yKCkpOwogICAgICAgIF9kZXJpdmF0\naW9ucyA9IChQcm9kdWN0RGVyaXZhdGlvbltdKSBkZXJpdmF0aW9ucy50b0Fy\ncmF5CiAgICAgICAgICAgIChuZXcgUHJvZHVjdERlcml2YXRpb25bZGVyaXZh\ndGlvbnMuc2l6ZSgpXSk7CgogICAgICAgIExpc3QgcHJlZml4ZXMgPSBuZXcg\nQXJyYXlMaXN0KDIpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2Rl\ncml2YXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChfZGVy\naXZhdGlvbnNbaV0uZ2V0Q29uZmlndXJhdGlvblByZWZpeCgpICE9IG51bGwK\nICAgICAgICAgICAgICAgICYmICEib3BlbmpwYSIuZXF1YWxzKF9kZXJpdmF0\naW9uc1tpXS5nZXRDb25maWd1cmF0aW9uUHJlZml4KCkpKQogICAgICAgICAg\nICAgICAgcHJlZml4ZXMuYWRkKF9kZXJpdmF0aW9uc1tpXS5nZXRDb25maWd1\ncmF0aW9uUHJlZml4KCkpOwogICAgICAgIH0KICAgICAgICBTdHJpbmdbXSBw\ncmVmaXhBcnJheSA9IG5ldyBTdHJpbmdbMSArIHByZWZpeGVzLnNpemUoKV07\nCiAgICAgICAgcHJlZml4QXJyYXlbMF0gPSAib3BlbmpwYSI7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBwcmVmaXhlcy5zaXplKCk7IGkrKykKICAg\nICAgICAgICAgcHJlZml4QXJyYXlbaSArIDFdID0gKFN0cmluZykgcHJlZml4\nZXMuZ2V0KGkpOwogICAgICAgIHNldENvbmZpZ3VyYXRpb25QcmVmaXhlcyhw\ncmVmaXhBcnJheSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYWxs\nIHRoZSBwcm9kdWN0IGRlcml2YXRpb25zIHJlZ2lzdGVyZWQgaW4gdGhlIGN1\ncnJlbnQgY2xhc3Nsb2FkZXIKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBQ\ncm9kdWN0RGVyaXZhdGlvbltdIGdldFByb2R1Y3REZXJpdmF0aW9ucygpIHsK\nICAgICAgICByZXR1cm4gX2Rlcml2YXRpb25zOwogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIHRoZSByZWNvZ25pemVkIHByZWZpeGVzIGZvciBjb25m\naWd1cmF0aW9uIHByb3BlcnRpZXMuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgU3RyaW5nW10gZ2V0Q29uZmlndXJhdGlvblByZWZpeGVzKCkgewogICAg\nICAgIHJldHVybiBfcHJlZml4ZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBT\nZXQgdGhlIGNvbmZpZ3VyYXRpb24gcHJlZml4IGFycmF5LiBUaGlzIGlzIHBh\nY2thZ2UtdmlzaWJsZSBmb3IgCiAgICAgKiB0ZXN0aW5nIHB1cnBvc2VzLgog\nICAgICogCiAgICAgKiBAc2luY2UgMC45LjcKICAgICAqLwogICAgc3RhdGlj\nIHZvaWQgc2V0Q29uZmlndXJhdGlvblByZWZpeGVzKFN0cmluZ1tdIHByZWZp\neGVzKSB7CiAgICAgICAgX3ByZWZpeGVzID0gcHJlZml4ZXM7CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogRGV0ZXJtaW5lIHRoZSBmdWxsIGtleSBuYW1l\nIGZvciA8Y29kZT5rZXk8L2NvZGU+LCBnaXZlbiB0aGUgcmVnaXN0ZXJlZAog\nICAgICogcHJlZml4ZXMgYW5kIHRoZSBlbnRyaWVzIGluIDxjb2RlPm1hcDwv\nY29kZT4uIFRoaXMgbWV0aG9kCiAgICAgKiBjb21wdXRlcyB0aGUgYXBwcm9w\ncmlhdGUgY29uZmlndXJhdGlvbiBwcmVmaXggdG8gdXNlIGJ5IGxvb2tpbmcg\nCiAgICAgKiB0aHJvdWdoIDxjb2RlPm1hcDwvY29kZT4gZm9yIGEga2V5IHN0\nYXJ0aW5nIHdpdGggYW55IG9mIHRoZSBrbm93bgogICAgICogY29uZmlndXJh\ndGlvbiBwcmVmaXhlcyBhbmQgZW5kaW5nIHdpdGggPGNvZGU+a2V5PC9jb2Rl\nPiBhbmQsIGlmIGEKICAgICAqIHZhbHVlIGlzIGZvdW5kLCB1c2luZyB0aGUg\ncHJlZml4IG9mIHRoYXQga2V5LiBPdGhlcndpc2UsIGl0IHVzZXMKICAgICAq\nIHRoZSBmaXJzdCByZWdpc3RlcmVkIHByZWZpeC4gCiAgICAgKiAKICAgICAq\nIEBzaW5jZSAwLjkuNwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFN0cmlu\nZyBnZXRDb25maWd1cmF0aW9uS2V5KFN0cmluZyBwYXJ0aWFsS2V5LCBNYXAg\nbWFwKSB7CiAgICAgICAgU3RyaW5nIGZpcnN0S2V5ID0gbnVsbDsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgbWFwICE9IG51bGwgJiYgaSA8IF9wcmVmaXhl\ncy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBTdHJpbmcgZnVsbEtleSA9\nIF9wcmVmaXhlc1tpXSArICIuIiArIHBhcnRpYWxLZXk7CiAgICAgICAgICAg\nIGlmIChtYXAuY29udGFpbnNLZXkoZnVsbEtleSkpIHsKICAgICAgICAgICAg\nICAgIGlmIChmaXJzdEtleSA9PSBudWxsKSAKICAgICAgICAgICAgICAgICAg\nICBmaXJzdEtleSA9IGZ1bGxLZXk7CiAgICAgICAgICAgICAgICBlbHNlIHsK\nICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSd2ZSBhbHJlYWR5IGZvdW5k\nIGEgcHJvcGVydHkgd2l0aCBhIHByZXZpb3VzIAogICAgICAgICAgICAgICAg\nICAgIC8vIHByZWZpeCwgdGhlbiB0aGlzIGlzIGEgY29sbGlzaW9uLgogICAg\nICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRp\nb24oX2xvYy5nZXQoCiAgICAgICAgICAgICAgICAgICAgICAgICJkdXAtd2l0\naC1kaWZmZXJlbnQtcHJlZml4ZXMiLCBmaXJzdEtleSwgZnVsbEtleSkKICAg\nICAgICAgICAgICAgICAgICAgICAgLmdldE1lc3NhZ2UoKSk7CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAg\nICAgICAgaWYgKGZpcnN0S2V5ID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBfcHJlZml4ZXNbMF0gKyAiLiIgKyBwYXJ0aWFsS2V5OwogICAgICAgIGVs\nc2UKICAgICAgICAgICAgcmV0dXJuIGZpcnN0S2V5OwogICAgfQoKICAgIC8q\nKgogICAgICogQXBwbHkge0BsaW5rIFByb2R1Y3REZXJpdmF0aW9uI2JlZm9y\nZUNvbmZpZ3VyYXRpb25Db25zdHJ1Y3R9IGNhbGxiYWNrcwogICAgICogdG8g\ndGhlIHRoZSBnaXZlbiBpbnN0YW5jZS4gRXhjZXB0aW9ucyBvdGhlciB0aGFu\nIGZhdGFsCiAgICAgKiB7QGxpbmsgQm9vdHN0cmFwRXhjZXB0aW9ufSBhcmUg\nc3dhbGxvd2VkLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYmVm\nb3JlQ29uZmlndXJhdGlvbkNvbnN0cnVjdChDb25maWd1cmF0aW9uUHJvdmlk\nZXIgY3ApIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9kZXJpdmF0\naW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgX2Rlcml2YXRpb25zW2ldLmJlZm9yZUNvbmZpZ3VyYXRpb25D\nb25zdHJ1Y3QoY3ApOwogICAgICAgICAgICB9IGNhdGNoIChCb290c3RyYXBF\neGNlcHRpb24gYmUpIHsKICAgICAgICAgICAgCWlmIChiZS5pc0ZhdGFsKCkp\nCiAgICAgICAgICAgIAkJdGhyb3cgYmU7CiAgICAgICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAvLyBjYW4ndCBsb2c7\nIG5vIGNvbmZpZ3VyYXRpb24geWV0CiAgICAgICAgICAgICAgICBlLnByaW50\nU3RhY2tUcmFjZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogQXBwbHkge0BsaW5rIFByb2R1Y3REZXJpdmF0aW9u\nI2JlZm9yZUNvbmZpZ3VyYXRpb25Mb2FkfSBjYWxsYmFja3MKICAgICAqIHRv\nIHRoZSB0aGUgZ2l2ZW4gaW5zdGFuY2UuIEV4Y2VwdGlvbnMgb3RoZXIgdGhh\nbiBmYXRhbAogICAgICoge0BsaW5rIEJvb3RzdHJhcEV4Y2VwdGlvbn0gYXJl\nIHN3YWxsb3dlZC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGJl\nZm9yZUNvbmZpZ3VyYXRpb25Mb2FkKENvbmZpZ3VyYXRpb24gY29uZikgewog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2Rlcml2YXRpb25zLmxlbmd0\naDsgaSsrKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBf\nZGVyaXZhdGlvbnNbaV0uYmVmb3JlQ29uZmlndXJhdGlvbkxvYWQoY29uZik7\nCiAgICAgICAgICAgIH0gY2F0Y2ggKEJvb3RzdHJhcEV4Y2VwdGlvbiBiZSkg\newogICAgICAgICAgICAJaWYgKGJlLmlzRmF0YWwoKSkKICAgICAgICAgICAg\nCQl0aHJvdyBiZTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgICAgIC8vIGxvZ2dpbmcgbm90IGNvbmZpZ3VyZWQg\neWV0CiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQXBw\nbHkge0BsaW5rIFByb2R1Y3REZXJpdmF0aW9uI2FmdGVyU3BlY2lmaWNhdGlv\nblNldH0gY2FsbGJhY2tzCiAgICAgKiB0byB0aGUgdGhlIGdpdmVuIGluc3Rh\nbmNlLiBFeGNlcHRpb25zIG90aGVyIHRoYW4gZmF0YWwKICAgICAqIHtAbGlu\nayBCb290c3RyYXBFeGNlcHRpb259IGFyZSBzd2FsbG93ZWQuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBhZnRlclNwZWNpZmljYXRpb25TZXQo\nQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBfZGVyaXZhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIF9kZXJpdmF0aW9uc1tpXS5hZnRlclNw\nZWNpZmljYXRpb25TZXQoY29uZik7CiAgICAgICAgICAgIH0gY2F0Y2ggKEJv\nb3RzdHJhcEV4Y2VwdGlvbiBiZSkgewogICAgICAgICAgICAJaWYgKGJlLmlz\nRmF0YWwoKSkKICAgICAgICAgICAgCQl0aHJvdyBiZTsKICAgICAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIC8vIGxv\nZ2dpbmcgbm90IGNvbmZpZ3VyZWQgeWV0CiAgICAgICAgICAgICAgICBlLnBy\naW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogQ2FsbGVkIGFzIHRoZSBmaXJzdCBzdGVwIG9m\nIGEgQ29uZmlndXJhdGlvbidzIGNsb3NlKCkgbWV0aG9kLiAKICAgICAqIEV4\nY2VwdGlvbnMgYXJlIHN3YWxsb3dlZC4KICAgICAqIAogICAgICogQHNpbmNl\nIDAuOS43CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBiZWZvcmVD\nbG9zZShDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IF9kZXJpdmF0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgX2Rlcml2YXRpb25zW2ldLmJl\nZm9yZUNvbmZpZ3VyYXRpb25DbG9zZShjb25mKTsKICAgICAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGNvbmYuZ2V0\nQ29uZmlndXJhdGlvbkxvZygpLndhcm4oX2xvYy5nZXQoImJlZm9yZS1jbG9z\nZS1leCIpLCBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAg\nICAvKioKICAgICAqIExvYWQgdGhlIGdpdmVuIGdpdmVuIHJlc291cmNlLCBv\nciByZXR1cm4gZmFsc2UgaWYgaXQgaXMgbm90IGEgcmVzb3VyY2UKICAgICAq\nIHRoaXMgcHJvdmlkZXIgdW5kZXJzdGFuZHMuIFRoZSBnaXZlbiBjbGFzcyBs\nb2FkZXIgbWF5IGJlIG51bGwuCiAgICAgKgogICAgICogQHBhcmFtIGFuY2hv\nciBvcHRpb25hbCBuYW1lZCBhbmNob3Igd2l0aGluIGEgbXVsdGlwbGUtY29u\nZmlndXJhdGlvbgogICAgICogcmVzb3VyY2UKICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBDb25maWd1cmF0aW9uUHJvdmlkZXIgbG9hZChTdHJpbmcgcmVz\nb3VyY2UsIFN0cmluZyBhbmNob3IsIAogICAgICAgIENsYXNzTG9hZGVyIGxv\nYWRlcikgewogICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHJlc291\ncmNlKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGxv\nYWRlciA9PSBudWxsKQogICAgICAgICAgICBsb2FkZXIgPSAoQ2xhc3NMb2Fk\nZXIpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAg\nICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0Q29udGV4dENsYXNzTG9hZGVyQWN0\naW9uKCkpOwogICAgICAgIENvbmZpZ3VyYXRpb25Qcm92aWRlciBwcm92aWRl\nciA9IG51bGw7CiAgICAgICAgU3RyaW5nQnVmZmVyIGVycnMgPSBudWxsOwog\nICAgICAgIC8vIG1vc3Qgc3BlY2lmaWMgdG8gbGVhc3QKICAgICAgICBUaHJv\nd2FibGUgZXJyID0gbnVsbDsKICAgICAgICBmb3IgKGludCBpID0gX2Rlcml2\nYXRpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAg\nIHRyeSB7CiAgICAgICAgICAgICAgICBwcm92aWRlciA9IF9kZXJpdmF0aW9u\nc1tpXS5sb2FkKHJlc291cmNlLCBhbmNob3IsIGxvYWRlcik7CiAgICAgICAg\nICAgICAgICBpZiAocHJvdmlkZXIgIT0gbnVsbCkKICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gcHJvdmlkZXI7CiAgICAgICAgICAgIH0gY2F0Y2ggKFRo\ncm93YWJsZSB0KSB7CiAgICAgICAgICAgICAgICBlcnIgPSB0OwogICAgICAg\nICAgICAgICAgZXJycyA9IChlcnJzID09IG51bGwpID8gbmV3IFN0cmluZ0J1\nZmZlcigpIDogZXJycy5hcHBlbmQoIlxuIik7CiAgICAgICAgICAgICAgICBl\ncnJzLmFwcGVuZChfZGVyaXZhdGlvbnNbaV0uZ2V0Q2xhc3MoKS5nZXROYW1l\nKCkgKyAiOiIgKyB0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAg\nICByZXBvcnRFcnJvcnMoZXJycywgcmVzb3VyY2UsIGVycik7CiAgICAgICAg\nU3RyaW5nIHJzcmMgPSByZXNvdXJjZSArICIjIiArIGFuY2hvcjsKICAgICAg\nICB0aHJvdyAoTWlzc2luZ1Jlc291cmNlRXhjZXB0aW9uKSBKYXZhVmVyc2lv\nbnMuaW5pdENhdXNlCiAgICAgICAgICAgIChuZXcgTWlzc2luZ1Jlc291cmNl\nRXhjZXB0aW9uKHJzcmMsCiAgICAgICAgICAgICAgICBQcm9kdWN0RGVyaXZh\ndGlvbnMuY2xhc3MuZ2V0TmFtZSgpLCByc3JjKSwgZXJyKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIExvYWQgZ2l2ZW4gZmlsZSwgb3IgcmV0dXJuIGZhbHNl\nIGlmIGl0IGlzIG5vdCBhIGZpbGUgdGhpcyBwcm92aWRlcgogICAgICogdW5k\nZXJzdGFuZHMuCiAgICAgKgogICAgICogQHBhcmFtIGFuY2hvciBvcHRpb25h\nbCBuYW1lZCBhbmNob3Igd2l0aGluIGEgbXVsdGlwbGUtY29uZmlndXJhdGlv\nbiBmaWxlCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgQ29uZmlndXJhdGlv\nblByb3ZpZGVyIGxvYWQoRmlsZSBmaWxlLCBTdHJpbmcgYW5jaG9yLCAKICAg\nICAgICBDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAgICAgICBpZiAoZmlsZSA9\nPSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAo\nbG9hZGVyID09IG51bGwpCiAgICAgICAgICAgIGxvYWRlciA9IChDbGFzc0xv\nYWRlcikgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAg\nICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRDb250ZXh0Q2xhc3NMb2FkZXJB\nY3Rpb24oKSk7CiAgICAgICAgQ29uZmlndXJhdGlvblByb3ZpZGVyIHByb3Zp\nZGVyID0gbnVsbDsKICAgICAgICBTdHJpbmdCdWZmZXIgZXJycyA9IG51bGw7\nCiAgICAgICAgVGhyb3dhYmxlIGVyciA9IG51bGw7CiAgICAgICAgLy8gbW9z\ndCBzcGVjaWZpYyB0byBsZWFzdAogICAgICAgIGZvciAoaW50IGkgPSBfZGVy\naXZhdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIHByb3ZpZGVyID0gX2Rlcml2YXRp\nb25zW2ldLmxvYWQoZmlsZSwgYW5jaG9yKTsKICAgICAgICAgICAgICAgIGlm\nIChwcm92aWRlciAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgIHJldHVy\nbiBwcm92aWRlcjsKICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQp\nIHsKICAgICAgICAgICAgICAgIGVyciA9IHQ7CiAgICAgICAgICAgICAgICBl\ncnJzID0gKGVycnMgPT0gbnVsbCkgPyBuZXcgU3RyaW5nQnVmZmVyKCkgOiBl\ncnJzLmFwcGVuZCgiXG4iKTsKICAgICAgICAgICAgICAgIGVycnMuYXBwZW5k\nKF9kZXJpdmF0aW9uc1tpXS5nZXRDbGFzcygpLmdldE5hbWUoKSArICI6IiAr\nIHQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIFN0cmluZyBh\nUGF0aCA9IChTdHJpbmcpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2Vk\nKAogICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRBYnNvbHV0ZVBhdGhB\nY3Rpb24oZmlsZSkpOwogICAgICAgIHJlcG9ydEVycm9ycyhlcnJzLCBhUGF0\naCwgZXJyKTsKICAgICAgICBTdHJpbmcgcnNyYyA9IGFQYXRoICsgIiMiICsg\nYW5jaG9yOwogICAgICAgIHRocm93IChNaXNzaW5nUmVzb3VyY2VFeGNlcHRp\nb24pIEphdmFWZXJzaW9ucy5pbml0Q2F1c2UKICAgICAgICAgICAgKG5ldyBN\naXNzaW5nUmVzb3VyY2VFeGNlcHRpb24ocnNyYywKICAgICAgICAgICAgICAg\nIFByb2R1Y3REZXJpdmF0aW9ucy5jbGFzcy5nZXROYW1lKCksIHJzcmMpLCBl\ncnIpOwogICAgfQogICAKICAgIC8qKgogICAgICogUmV0dXJuIGEge0BsaW5r\nIENvbmZpZ3VyYXRpb25Qcm92aWRlcn0gdGhhdCBoYXMgcGFyc2VkIHN5c3Rl\nbSBkZWZhdWx0cy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBDb25maWd1\ncmF0aW9uUHJvdmlkZXIgbG9hZERlZmF1bHRzKENsYXNzTG9hZGVyIGxvYWRl\ncikgewogICAgICAgIHJldHVybiBsb2FkKGxvYWRlciwgZmFsc2UpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEge0BsaW5rIENvbmZpZ3VyYXRp\nb25Qcm92aWRlcn0gdGhhdCBoYXMgcGFyc2VkIHN5c3RlbSBnbG9iYWxzLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIENvbmZpZ3VyYXRpb25Qcm92aWRl\nciBsb2FkR2xvYmFscyhDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAgICAgICBy\nZXR1cm4gbG9hZChsb2FkZXIsIHRydWUpOwogICAgfQogICAgICAgICAgICAK\nICAgIC8qKgogICAgICogTG9hZCBhIGJ1aWx0LWluIHJlc291cmNlIGxvY2F0\naW9uLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBDb25maWd1cmF0aW9u\nUHJvdmlkZXIgbG9hZChDbGFzc0xvYWRlciBsb2FkZXIsIAogICAgICAgYm9v\nbGVhbiBnbG9iYWxzKSB7CiAgICAgICAgaWYgKGxvYWRlciA9PSBudWxsKQog\nICAgICAgICAgICBsb2FkZXIgPSAoQ2xhc3NMb2FkZXIpIEFjY2Vzc0NvbnRy\nb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZI\nZWxwZXIuZ2V0Q29udGV4dENsYXNzTG9hZGVyQWN0aW9uKCkpOwogICAgICAg\nIAogICAgICAgIENvbmZpZ3VyYXRpb25Qcm92aWRlciBwcm92aWRlciA9IG51\nbGw7CiAgICAgICAgU3RyaW5nQnVmZmVyIGVycnMgPSBudWxsOwogICAgICAg\nIFN0cmluZyB0eXBlID0gKGdsb2JhbHMpID8gImdsb2JhbHMiIDogImRlZmF1\nbHRzIjsKICAgICAgICBUaHJvd2FibGUgZXJyID0gbnVsbDsKICAgICAgICAv\nLyBtb3N0IHNwZWNpZmljIHRvIGxlYXN0CiAgICAgICAgZm9yIChpbnQgaSA9\nIF9kZXJpdmF0aW9ucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcHJvdmlkZXIgPSAoZ2xv\nYmFscykgPyBfZGVyaXZhdGlvbnNbaV0ubG9hZEdsb2JhbHMobG9hZGVyKSAK\nICAgICAgICAgICAgICAgICAgICA6IF9kZXJpdmF0aW9uc1tpXS5sb2FkRGVm\nYXVsdHMobG9hZGVyKTsKICAgICAgICAgICAgICAgIGlmIChwcm92aWRlciAh\nPSBudWxsKQogICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVyOwog\nICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAg\nICAgICAgZXJyID0gdDsKICAgICAgICAgICAgICAgIGVycnMgPSAoZXJycyA9\nPSBudWxsKSA/IG5ldyBTdHJpbmdCdWZmZXIoKSA6IGVycnMuYXBwZW5kKCJc\nbiIpOwogICAgICAgICAgICAgICAgZXJycy5hcHBlbmQoX2Rlcml2YXRpb25z\nW2ldLmdldENsYXNzKCkuZ2V0TmFtZSgpICsgIjoiICsgdCk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgcmVwb3J0RXJyb3JzKGVycnMsIHR5\ncGUsIGVycik7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAKICAgIC8q\nKgogICAgICogVGhyb3duIHByb3BlciBleGNlcHRpb24gZm9yIGdpdmVuIGVy\ncm9ycy4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCByZXBvcnRF\ncnJvcnMoU3RyaW5nQnVmZmVyIGVycnMsIFN0cmluZyByZXNvdXJjZSwKICAg\nICAgICBUaHJvd2FibGUgbmVzdGVkKSB7CiAgICAgICAgaWYgKGVycnMgPT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIHRocm93IChNaXNz\naW5nUmVzb3VyY2VFeGNlcHRpb24pIEphdmFWZXJzaW9ucy5pbml0Q2F1c2UK\nICAgICAgICAgICAgKG5ldyBNaXNzaW5nUmVzb3VyY2VFeGNlcHRpb24oZXJy\ncy50b1N0cmluZygpLAogICAgICAgICAgICAgICAgUHJvZHVjdERlcml2YXRp\nb25zLmNsYXNzLmdldE5hbWUoKSwgcmVzb3VyY2UpLCBuZXN0ZWQpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgTGlzdDxTdHJpbmc+IG9mIGFs\nbCB0aGUgZnVsbHktcXVhbGlmaWVkIGFuY2hvcnMgc3BlY2lmaWVkIGluCiAg\nICAgKiA8Y29kZT5wcm9wZXJ0aWVzTG9jYXRpb248L2NvZGU+LiBUaGUgcmV0\ndXJuIHZhbHVlcyBtdXN0IGJlIHVzZWQgaW4KICAgICAqIGNvbmp1bmN0aW9u\nIHdpdGggPGNvZGU+cHJvcGVydGllc0xvY2F0aW9uPC9jb2RlPi4gSWYgdGhl\ncmUgYXJlIG5vCiAgICAgKiBwcm9kdWN0IGRlcml2YXRpb25zIG9yIGlmIG5v\nIHByb2R1Y3QgZGVyaXZhdGlvbnMgY291bGQgZmluZCBhbmNob3JzLAogICAg\nICogdGhpcyByZXR1cm5zIGFuIGVtcHR5IGxpc3QuCiAgICAgKgogICAgICog\nQHNpbmNlIDEuMS4wCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgTGlzdCBn\nZXRGdWxseVF1YWxpZmllZEFuY2hvcnNJblByb3BlcnRpZXNMb2NhdGlvbigK\nICAgICAgICBmaW5hbCBTdHJpbmcgcHJvcGVydGllc0xvY2F0aW9uKSB7CiAg\nICAgICAgTGlzdCBmcUFuY2hvcnMgPSBuZXcgQXJyYXlMaXN0KCk7CiAgICAg\nICAgU3RyaW5nQnVmZmVyIGVycnMgPSBudWxsOwogICAgICAgIFRocm93YWJs\nZSBlcnIgPSBudWxsOwogICAgICAgIGZvciAoaW50IGkgPSBfZGVyaXZhdGlv\nbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzTG9jYXRpb24gPT0g\nbnVsbCkgewogICAgICAgICAgICAgICAgICAgIFN0cmluZyBsb2MgPSBfZGVy\naXZhdGlvbnNbaV0uZ2V0RGVmYXVsdFJlc291cmNlTG9jYXRpb24oKTsKICAg\nICAgICAgICAgICAgICAgICBhZGRBbGwoZnFBbmNob3JzLCBsb2MsCiAgICAg\nICAgICAgICAgICAgICAgICAgIF9kZXJpdmF0aW9uc1tpXS5nZXRBbmNob3Jz\nSW5SZXNvdXJjZShsb2MpKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51\nZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBGaWxlIGYg\nPSBuZXcgRmlsZShwcm9wZXJ0aWVzTG9jYXRpb24pOwogICAgICAgICAgICAg\nICAgaWYgKCgoQm9vbGVhbikgSjJEb1ByaXZIZWxwZXIuaXNGaWxlQWN0aW9u\nKGYpLnJ1bigpKQogICAgICAgICAgICAgICAgICAgIC5ib29sZWFuVmFsdWUo\nKSkgewogICAgICAgICAgICAgICAgICAgIGFkZEFsbChmcUFuY2hvcnMsIHBy\nb3BlcnRpZXNMb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgX2Rl\ncml2YXRpb25zW2ldLmdldEFuY2hvcnNJbkZpbGUoZikpOwogICAgICAgICAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBmID0gbmV3IEZp\nbGUoIk1FVEEtSU5GIiArIEZpbGUuc2VwYXJhdG9yQ2hhcgogICAgICAgICAg\nICAgICAgICAgICAgICArIHByb3BlcnRpZXNMb2NhdGlvbik7CiAgICAgICAg\nICAgICAgICAgICAgaWYgKCgoQm9vbGVhbikgSjJEb1ByaXZIZWxwZXIuaXNG\naWxlQWN0aW9uKGYpLnJ1bigpKQogICAgICAgICAgICAgICAgICAgICAgICAu\nYm9vbGVhblZhbHVlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRk\nQWxsKGZxQW5jaG9ycywgcHJvcGVydGllc0xvY2F0aW9uLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgX2Rlcml2YXRpb25zW2ldLmdldEFuY2hvcnNJ\nbkZpbGUoZikpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGFkZEFsbChmcUFuY2hvcnMsIHByb3BlcnRp\nZXNMb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZXJp\ndmF0aW9uc1tpXS5nZXRBbmNob3JzSW5SZXNvdXJjZSgKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzTG9jYXRpb24pKTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgICAgICBl\ncnIgPSB0OwogICAgICAgICAgICAgICAgZXJycyA9IChlcnJzID09IG51bGwp\nID8gbmV3IFN0cmluZ0J1ZmZlcigpIDogZXJycy5hcHBlbmQoIlxuIik7CiAg\nICAgICAgICAgICAgICBlcnJzLmFwcGVuZChfZGVyaXZhdGlvbnNbaV0uZ2V0\nQ2xhc3MoKS5nZXROYW1lKCkgKyAiOiIgKyB0KTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgICAgICByZXBvcnRFcnJvcnMoZXJycywgcHJvcGVydGll\nc0xvY2F0aW9uLCBlcnIpOwogICAgICAgIHJldHVybiBmcUFuY2hvcnM7CiAg\nICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBhZGRBbGwoQ29sbGVjdGlv\nbiBjb2xsZWN0aW9uLCBTdHJpbmcgYmFzZSwKICAgICAgICBDb2xsZWN0aW9u\nIG5ld01lbWJlcnMpIHsKICAgICAgICBpZiAobmV3TWVtYmVycyA9PSBudWxs\nIHx8IGNvbGxlY3Rpb24gPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwog\nICAgICAgIGZvciAoSXRlcmF0b3IgaXRlciA9IG5ld01lbWJlcnMuaXRlcmF0\nb3IoKTsgaXRlci5oYXNOZXh0KCk7ICkgewogICAgICAgICAgICBTdHJpbmcg\nZnFMb2MgPSBiYXNlICsgIiMiICsgaXRlci5uZXh0KCk7CiAgICAgICAgICAg\nIGlmICghY29sbGVjdGlvbi5jb250YWlucyhmcUxvYykpCiAgICAgICAgICAg\nICAgICBjb2xsZWN0aW9uLmFkZChmcUxvYyk7CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogQ29tcGFyZSB7QGxpbmsgUHJvZHVjdERlcml2YXRp\nb259cy4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgUHJvZHVj\ndERlcml2YXRpb25Db21wYXJhdG9yCiAgICAgICAgaW1wbGVtZW50cyBDb21w\nYXJhdG9yIHsKCiAgICAgICAgcHVibGljIGludCBjb21wYXJlKE9iamVjdCBv\nMSwgT2JqZWN0IG8yKSB7CiAgICAgICAgICAgIGludCB0eXBlMSA9ICgoUHJv\nZHVjdERlcml2YXRpb24pIG8xKS5nZXRUeXBlKCk7CiAgICAgICAgICAgIGlu\ndCB0eXBlMiA9ICgoUHJvZHVjdERlcml2YXRpb24pIG8yKS5nZXRUeXBlKCk7\nCiAgICAgICAgICAgIGlmICh0eXBlMSAhPSB0eXBlMikKICAgICAgICAgICAg\nICAgIHJldHVybiB0eXBlMSAtIHR5cGUyOwoKICAgICAgICAgICAgLy8gYXJi\naXRyYXJ5IGJ1dCBjb25zaXN0ZW50IG9yZGVyCiAgICAgICAgICAgIHJldHVy\nbiBvMS5nZXRDbGFzcygpLmdldE5hbWUoKS5jb21wYXJlVG8obzIuZ2V0Q2xh\nc3MoKS4KICAgICAgICAgICAgICAgIGdldE5hbWUoKSk7CgkJfQoJfQoKICAg\nIC8qKgogICAgICogUHJpbnRzIHByb2R1Y3QgZGVyaXZhdGlvbiBpbmZvcm1h\ndGlvbi4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3Ry\naW5nW10gYXJncykgewogICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihkZXJp\ndmF0aW9uRXJyb3JzVG9TdHJpbmcoKSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gYSBtZXNzYWdlIGFib3V0IHRoZSBzdGF0dXMgb2YgZWFjaCBw\ncm9kdWN0IGRlcml2YXRpb24uCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGlj\nIFN0cmluZyBkZXJpdmF0aW9uRXJyb3JzVG9TdHJpbmcoKSB7CiAgICAgICAg\nU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgICAg\nICBidWYuYXBwZW5kKCJQcm9kdWN0RGVyaXZhdGlvbnM6ICIpLmFwcGVuZChf\nZGVyaXZhdGlvbk5hbWVzLmxlbmd0aCk7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBfZGVyaXZhdGlvbk5hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIlxuIikuYXBwZW5kKGkgKyAxKS5hcHBlbmQo\nIi4gIikuCiAgICAgICAgICAgICAgICBhcHBlbmQoX2Rlcml2YXRpb25OYW1l\nc1tpXSkuYXBwZW5kKCI6ICIpOwogICAgICAgICAgICBpZiAoX2Rlcml2YXRp\nb25FcnJvcnNbaV0gPT0gbnVsbCkKICAgICAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoIk9LIik7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoX2Rlcml2YXRpb25FcnJvcnNbaV0udG9TdHJpbmcoKSk7CiAg\nICAgICAgfQogICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgIH0K\nfQoK\n","encoding":"base64"}

