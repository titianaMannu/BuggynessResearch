{"sha":"52ed8f2208b08bb0c90667fdc1059f469e6cecab","node_id":"MDQ6QmxvYjIwNjM2NDo1MmVkOGYyMjA4YjA4YmIwYzkwNjY3ZmRjMTA1OWY0NjllNmNlY2Fi","size":10783,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/52ed8f2208b08bb0c90667fdc1059f469e6cecab","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmpkYmM7DQoNCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uOw0KaW1w\nb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50Ow0KaW1wb3J0IGphdmEu\nc3FsLlJlc3VsdFNldDsNCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247\nDQppbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50Ow0KDQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLmNvbmN1cnJlbnQuQWJzdHJhY3RDb25j\ndXJyZW50RXZlbnRNYW5hZ2VyOw0KDQovKioNCiAqIE1hbmFnZXMgdGhlIGZp\ncmluZyBvZiB7QGxpbmsgSkRCQ0V2ZW50fXMuDQogKg0KICogQGF1dGhvciBB\nYmUgV2hpdGUNCiAqIEBub2phdmFkb2MNCiAqLw0KcHVibGljIGNsYXNzIEpE\nQkNFdmVudENvbm5lY3Rpb25EZWNvcmF0b3IgZXh0ZW5kcyBBYnN0cmFjdENv\nbmN1cnJlbnRFdmVudE1hbmFnZXINCiAgICBpbXBsZW1lbnRzIENvbm5lY3Rp\nb25EZWNvcmF0b3Igew0KDQogICAgcHVibGljIENvbm5lY3Rpb24gZGVjb3Jh\ndGUoQ29ubmVjdGlvbiBjb25uKSB7DQogICAgICAgIGlmICghaGFzTGlzdGVu\nZXJzKCkpDQogICAgICAgICAgICByZXR1cm4gY29ubjsNCiAgICAgICAgcmV0\ndXJuIG5ldyBFdmVudENvbm5lY3Rpb24oY29ubik7DQogICAgfQ0KDQogICAg\nLyoqDQogICAgICogRmlyZSB0aGUgZ2l2ZW4gZXZlbnQgdG8gYWxsIGxpc3Rl\nbmVycy4gUHJldmVudHMgY3JlYXRpb24gb2YgYW4NCiAgICAgKiBldmVudCBv\nYmplY3Qgd2hlbiB0aGVyZSBhcmUgbm8gbGlzdGVuZXJzLg0KICAgICAqLw0K\nICAgIHByaXZhdGUgSkRCQ0V2ZW50IGZpcmVFdmVudChDb25uZWN0aW9uIHNv\ndXJjZSwgc2hvcnQgdHlwZSwNCiAgICAgICAgSkRCQ0V2ZW50IGFzc29jaWF0\nZWRFdmVudCwgU3RhdGVtZW50IHN0bW50LCBTdHJpbmcgc3FsKSB7DQogICAg\nICAgIGlmICghaGFzTGlzdGVuZXJzKCkpDQogICAgICAgICAgICByZXR1cm4g\nbnVsbDsNCg0KICAgICAgICBKREJDRXZlbnQgZXZlbnQgPSBuZXcgSkRCQ0V2\nZW50KHNvdXJjZSwgdHlwZSwgYXNzb2NpYXRlZEV2ZW50LA0KICAgICAgICAg\nICAgc3RtbnQsIHNxbCk7DQogICAgICAgIGZpcmVFdmVudChldmVudCk7DQog\nICAgICAgIHJldHVybiBldmVudDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAg\nKiBGaXJlIHRoZSBnaXZlbiBldmVudCB0byBhbGwgbGlzdGVuZXJzLg0KICAg\nICAqLw0KICAgIHByb3RlY3RlZCB2b2lkIGZpcmVFdmVudChPYmplY3QgZXZl\nbnQsIE9iamVjdCBsaXN0ZW5lcikgew0KICAgICAgICBKREJDTGlzdGVuZXIg\nbGlzdGVuID0gKEpEQkNMaXN0ZW5lcikgbGlzdGVuZXI7DQogICAgICAgIEpE\nQkNFdmVudCBldiA9IChKREJDRXZlbnQpIGV2ZW50Ow0KICAgICAgICBzd2l0\nY2ggKGV2LmdldFR5cGUoKSkgew0KICAgICAgICAgICAgY2FzZSBKREJDRXZl\nbnQuQkVGT1JFX1BSRVBBUkVfU1RBVEVNRU5UOg0KICAgICAgICAgICAgICAg\nIGxpc3Rlbi5iZWZvcmVQcmVwYXJlU3RhdGVtZW50KGV2KTsNCiAgICAgICAg\nICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgSkRCQ0V2ZW50LkFG\nVEVSX1BSRVBBUkVfU1RBVEVNRU5UOg0KICAgICAgICAgICAgICAgIGxpc3Rl\nbi5hZnRlclByZXBhcmVTdGF0ZW1lbnQoZXYpOw0KICAgICAgICAgICAgICAg\nIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSBKREJDRXZlbnQuQkVGT1JFX0NS\nRUFURV9TVEFURU1FTlQ6DQogICAgICAgICAgICAgICAgbGlzdGVuLmJlZm9y\nZUNyZWF0ZVN0YXRlbWVudChldik7DQogICAgICAgICAgICAgICAgYnJlYWs7\nDQogICAgICAgICAgICBjYXNlIEpEQkNFdmVudC5BRlRFUl9DUkVBVEVfU1RB\nVEVNRU5UOg0KICAgICAgICAgICAgICAgIGxpc3Rlbi5hZnRlckNyZWF0ZVN0\nYXRlbWVudChldik7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAg\nICAgICBjYXNlIEpEQkNFdmVudC5CRUZPUkVfRVhFQ1VURV9TVEFURU1FTlQ6\nDQogICAgICAgICAgICAgICAgbGlzdGVuLmJlZm9yZUV4ZWN1dGVTdGF0ZW1l\nbnQoZXYpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAg\nY2FzZSBKREJDRXZlbnQuQUZURVJfRVhFQ1VURV9TVEFURU1FTlQ6DQogICAg\nICAgICAgICAgICAgbGlzdGVuLmFmdGVyRXhlY3V0ZVN0YXRlbWVudChldik7\nDQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIEpE\nQkNFdmVudC5CRUZPUkVfQ09NTUlUOg0KICAgICAgICAgICAgICAgIGxpc3Rl\nbi5iZWZvcmVDb21taXQoZXYpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0K\nICAgICAgICAgICAgY2FzZSBKREJDRXZlbnQuQUZURVJfQ09NTUlUOg0KICAg\nICAgICAgICAgICAgIGxpc3Rlbi5hZnRlckNvbW1pdChldik7DQogICAgICAg\nICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlIEpEQkNFdmVudC5C\nRUZPUkVfUk9MTEJBQ0s6DQogICAgICAgICAgICAgICAgbGlzdGVuLmJlZm9y\nZVJvbGxiYWNrKGV2KTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAg\nICAgICAgIGNhc2UgSkRCQ0V2ZW50LkFGVEVSX1JPTExCQUNLOg0KICAgICAg\nICAgICAgICAgIGxpc3Rlbi5hZnRlclJvbGxiYWNrKGV2KTsNCiAgICAgICAg\nICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgSkRCQ0V2ZW50LkFG\nVEVSX0NPTk5FQ1Q6DQogICAgICAgICAgICAgICAgbGlzdGVuLmFmdGVyQ29u\nbmVjdChldik7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAg\nICBjYXNlIEpEQkNFdmVudC5CRUZPUkVfQ0xPU0U6DQogICAgICAgICAgICAg\nICAgbGlzdGVuLmJlZm9yZUNsb3NlKGV2KTsNCiAgICAgICAgICAgICAgICBi\ncmVhazsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEZp\ncmVzIGV2ZW50cyBhcyBhcHByb3ByaWF0ZS4NCiAgICAgKi8NCiAgICBwcml2\nYXRlIGNsYXNzIEV2ZW50Q29ubmVjdGlvbiBleHRlbmRzIERlbGVnYXRpbmdD\nb25uZWN0aW9uIHsNCg0KICAgICAgICBwdWJsaWMgRXZlbnRDb25uZWN0aW9u\nKENvbm5lY3Rpb24gY29ubikgew0KICAgICAgICAgICAgc3VwZXIoY29ubik7\nDQogICAgICAgICAgICBmaXJlRXZlbnQoZ2V0RGVsZWdhdGUoKSwgSkRCQ0V2\nZW50LkFGVEVSX0NPTk5FQ1QsIG51bGwsIG51bGwsIG51bGwpOw0KICAgICAg\nICB9DQoNCiAgICAgICAgcHVibGljIHZvaWQgY29tbWl0KCkgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7DQogICAgICAgICAgICBKREJDRXZlbnQgYmVmb3JlID0g\nZmlyZUV2ZW50KGdldERlbGVnYXRlKCksDQogICAgICAgICAgICAgICAgSkRC\nQ0V2ZW50LkJFRk9SRV9DT01NSVQsIG51bGwsIG51bGwsIG51bGwpOw0KICAg\nICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBzdXBlci5jb21taXQo\nKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAg\nZmlyZUV2ZW50KGdldERlbGVnYXRlKCksIEpEQkNFdmVudC5BRlRFUl9DT01N\nSVQsIGJlZm9yZSwNCiAgICAgICAgICAgICAgICAgICAgbnVsbCwgbnVsbCk7\nDQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMg\ndm9pZCByb2xsYmFjaygpIHRocm93cyBTUUxFeGNlcHRpb24gew0KICAgICAg\nICAgICAgSkRCQ0V2ZW50IGJlZm9yZSA9IGZpcmVFdmVudChnZXREZWxlZ2F0\nZSgpLA0KICAgICAgICAgICAgICAgIEpEQkNFdmVudC5CRUZPUkVfUk9MTEJB\nQ0ssIG51bGwsIG51bGwsIG51bGwpOw0KICAgICAgICAgICAgdHJ5IHsNCiAg\nICAgICAgICAgICAgICBzdXBlci5yb2xsYmFjaygpOw0KICAgICAgICAgICAg\nfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBmaXJlRXZlbnQoZ2V0RGVs\nZWdhdGUoKSwgSkRCQ0V2ZW50LkFGVEVSX1JPTExCQUNLLCBiZWZvcmUsDQog\nICAgICAgICAgICAgICAgICAgIG51bGwsIG51bGwpOw0KICAgICAgICAgICAg\nfQ0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIFN0YXRlbWVudCBj\ncmVhdGVTdGF0ZW1lbnQoYm9vbGVhbiB3cmFwKSB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsNCiAgICAgICAgICAgIEpEQkNFdmVudCBiZWZvcmUgPSBmaXJlRXZl\nbnQoZ2V0RGVsZWdhdGUoKSwNCiAgICAgICAgICAgICAgICBKREJDRXZlbnQu\nQkVGT1JFX0NSRUFURV9TVEFURU1FTlQsIG51bGwsIG51bGwsIG51bGwpOw0K\nICAgICAgICAgICAgU3RhdGVtZW50IHN0bW50ID0gbnVsbDsNCiAgICAgICAg\nICAgIHRyeSB7DQogICAgICAgICAgICAgICAgc3RtbnQgPSBuZXcgRXZlbnRT\ndGF0ZW1lbnQoc3VwZXIuY3JlYXRlU3RhdGVtZW50KGZhbHNlKSwNCiAgICAg\nICAgICAgICAgICAgICAgRXZlbnRDb25uZWN0aW9uLnRoaXMpOw0KICAgICAg\nICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICBmaXJlRXZlbnQo\nZ2V0RGVsZWdhdGUoKSwgSkRCQ0V2ZW50LkFGVEVSX0NSRUFURV9TVEFURU1F\nTlQsDQogICAgICAgICAgICAgICAgICAgIGJlZm9yZSwgc3RtbnQsIG51bGwp\nOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHN0bW50Ow0K\nICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIFN0YXRlbWVudCBjcmVh\ndGVTdGF0ZW1lbnQoaW50IHJzVHlwZSwgaW50IHJzQ29uY3VyLA0KICAgICAg\nICAgICAgYm9vbGVhbiB3cmFwKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsNCiAg\nICAgICAgICAgIEpEQkNFdmVudCBiZWZvcmUgPSBmaXJlRXZlbnQoZ2V0RGVs\nZWdhdGUoKSwNCiAgICAgICAgICAgICAgICBKREJDRXZlbnQuQkVGT1JFX0NS\nRUFURV9TVEFURU1FTlQsIG51bGwsIG51bGwsIG51bGwpOw0KICAgICAgICAg\nICAgU3RhdGVtZW50IHN0bW50ID0gbnVsbDsNCiAgICAgICAgICAgIHRyeSB7\nDQogICAgICAgICAgICAgICAgc3RtbnQgPSBuZXcgRXZlbnRTdGF0ZW1lbnQo\nc3VwZXIuY3JlYXRlU3RhdGVtZW50DQogICAgICAgICAgICAgICAgICAgIChy\nc1R5cGUsIHJzQ29uY3VyLCBmYWxzZSksIEV2ZW50Q29ubmVjdGlvbi50aGlz\nKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAg\nZmlyZUV2ZW50KGdldERlbGVnYXRlKCksIEpEQkNFdmVudC5BRlRFUl9DUkVB\nVEVfU1RBVEVNRU5ULA0KICAgICAgICAgICAgICAgICAgICBiZWZvcmUsIHN0\nbW50LCBudWxsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVy\nbiBzdG1udDsNCiAgICAgICAgfQ0KDQogICAgICAgIHByb3RlY3RlZCBQcmVw\nYXJlZFN0YXRlbWVudCBwcmVwYXJlU3RhdGVtZW50KFN0cmluZyBzcWwsIGJv\nb2xlYW4gd3JhcCkNCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\new0KICAgICAgICAgICAgSkRCQ0V2ZW50IGJlZm9yZSA9IGZpcmVFdmVudChn\nZXREZWxlZ2F0ZSgpLA0KICAgICAgICAgICAgICAgIEpEQkNFdmVudC5CRUZP\nUkVfUFJFUEFSRV9TVEFURU1FTlQsIG51bGwsIG51bGwsIHNxbCk7DQogICAg\nICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG1udCA9IG51bGw7DQogICAg\nICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHN0bW50ID0gbmV3IEV2\nZW50UHJlcGFyZWRTdGF0ZW1lbnQoc3VwZXIucHJlcGFyZVN0YXRlbWVudA0K\nICAgICAgICAgICAgICAgICAgICAoc3FsLCBmYWxzZSksIEV2ZW50Q29ubmVj\ndGlvbi50aGlzLCBzcWwpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAg\nICAgICAgICAgICAgICBmaXJlRXZlbnQoZ2V0RGVsZWdhdGUoKSwgSkRCQ0V2\nZW50LkFGVEVSX1BSRVBBUkVfU1RBVEVNRU5ULA0KICAgICAgICAgICAgICAg\nICAgICBiZWZvcmUsIHN0bW50LCBzcWwpOw0KICAgICAgICAgICAgfQ0KICAg\nICAgICAgICAgcmV0dXJuIHN0bW50Ow0KICAgICAgICB9DQoNCiAgICAgICAg\ncHJvdGVjdGVkIFByZXBhcmVkU3RhdGVtZW50IHByZXBhcmVTdGF0ZW1lbnQo\nU3RyaW5nIHNxbCwgaW50IHJzVHlwZSwNCiAgICAgICAgICAgIGludCByc0Nv\nbmN1ciwgYm9vbGVhbiB3cmFwKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsNCiAg\nICAgICAgICAgIEpEQkNFdmVudCBiZWZvcmUgPSBmaXJlRXZlbnQoZ2V0RGVs\nZWdhdGUoKSwNCiAgICAgICAgICAgICAgICBKREJDRXZlbnQuQkVGT1JFX1BS\nRVBBUkVfU1RBVEVNRU5ULCBudWxsLCBudWxsLCBzcWwpOw0KICAgICAgICAg\nICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtbnQgPSBudWxsOw0KICAgICAgICAg\nICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBzdG1udCA9IG5ldyBFdmVudFBy\nZXBhcmVkU3RhdGVtZW50KHN1cGVyLnByZXBhcmVTdGF0ZW1lbnQNCiAgICAg\nICAgICAgICAgICAgICAgKHNxbCwgcnNUeXBlLCByc0NvbmN1ciwgZmFsc2Up\nLCBFdmVudENvbm5lY3Rpb24udGhpcywgc3FsKTsNCiAgICAgICAgICAgIH0g\nZmluYWxseSB7DQogICAgICAgICAgICAgICAgZmlyZUV2ZW50KGdldERlbGVn\nYXRlKCksIEpEQkNFdmVudC5BRlRFUl9QUkVQQVJFX1NUQVRFTUVOVCwNCiAg\nICAgICAgICAgICAgICAgICAgYmVmb3JlLCBzdG1udCwgc3FsKTsNCiAgICAg\nICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBzdG1udDsNCiAgICAgICAg\nfQ0KDQogICAgICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAg\nIGZpcmVFdmVudChnZXREZWxlZ2F0ZSgpLCBKREJDRXZlbnQuQkVGT1JFX0NM\nT1NFLA0KICAgICAgICAgICAgICAgICAgICBudWxsLCBudWxsLCBudWxsKTsN\nCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgICAgc3Vw\nZXIuY2xvc2UoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0N\nCg0KICAgIC8qKg0KICAgICAqIEZpcmVzIGV2ZW50cyBhcyBhcHByb3ByaWF0\nZS4NCiAgICAgKi8NCiAgICBwcml2YXRlIGNsYXNzIEV2ZW50UHJlcGFyZWRT\ndGF0ZW1lbnQgZXh0ZW5kcyBEZWxlZ2F0aW5nUHJlcGFyZWRTdGF0ZW1lbnQg\new0KDQogICAgICAgIHByaXZhdGUgZmluYWwgRXZlbnRDb25uZWN0aW9uIF9j\nb25uOw0KICAgICAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBfc3FsOw0KDQog\nICAgICAgIHB1YmxpYyBFdmVudFByZXBhcmVkU3RhdGVtZW50KFByZXBhcmVk\nU3RhdGVtZW50IHBzLA0KICAgICAgICAgICAgRXZlbnRDb25uZWN0aW9uIGNv\nbm4sIFN0cmluZyBzcWwpIHsNCiAgICAgICAgICAgIHN1cGVyKHBzLCBjb25u\nKTsNCiAgICAgICAgICAgIF9jb25uID0gY29ubjsNCiAgICAgICAgICAgIF9z\ncWwgPSBzcWw7DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgaW50IGV4\nZWN1dGVVcGRhdGUoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsNCiAgICAgICAg\nICAgIEpEQkNFdmVudCBiZWZvcmUgPSBmaXJlRXZlbnQoX2Nvbm4uZ2V0RGVs\nZWdhdGUoKSwNCiAgICAgICAgICAgICAgICBKREJDRXZlbnQuQkVGT1JFX0VY\nRUNVVEVfU1RBVEVNRU5ULCBudWxsLCBnZXREZWxlZ2F0ZSgpLCBfc3FsKTsN\nCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHN1\ncGVyLmV4ZWN1dGVVcGRhdGUoKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7\nDQogICAgICAgICAgICAgICAgZmlyZUV2ZW50KF9jb25uLmdldERlbGVnYXRl\nKCksDQogICAgICAgICAgICAgICAgICAgIEpEQkNFdmVudC5BRlRFUl9FWEVD\nVVRFX1NUQVRFTUVOVCwgYmVmb3JlLA0KICAgICAgICAgICAgICAgICAgICBn\nZXREZWxlZ2F0ZSgpLCBfc3FsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAg\nfQ0KDQogICAgICAgIHByb3RlY3RlZCBSZXN1bHRTZXQgZXhlY3V0ZVF1ZXJ5\nKGJvb2xlYW4gd3JhcCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7DQogICAgICAg\nICAgICBKREJDRXZlbnQgYmVmb3JlID0gZmlyZUV2ZW50KF9jb25uLmdldERl\nbGVnYXRlKCksDQogICAgICAgICAgICAgICAgSkRCQ0V2ZW50LkJFRk9SRV9F\nWEVDVVRFX1NUQVRFTUVOVCwgbnVsbCwgZ2V0RGVsZWdhdGUoKSwgX3NxbCk7\nDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJldHVybiBz\ndXBlci5leGVjdXRlUXVlcnkod3JhcCk7DQogICAgICAgICAgICB9IGZpbmFs\nbHkgew0KICAgICAgICAgICAgICAgIGZpcmVFdmVudChfY29ubi5nZXREZWxl\nZ2F0ZSgpLA0KICAgICAgICAgICAgICAgICAgICBKREJDRXZlbnQuQUZURVJf\nRVhFQ1VURV9TVEFURU1FTlQsIGJlZm9yZSwNCiAgICAgICAgICAgICAgICAg\nICAgZ2V0RGVsZWdhdGUoKSwgX3NxbCk7DQogICAgICAgICAgICB9DQogICAg\nICAgIH0NCg0KICAgICAgICBwdWJsaWMgaW50W10gZXhlY3V0ZUJhdGNoKCkg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7DQogICAgICAgICAgICBKREJDRXZlbnQg\nYmVmb3JlID0gZmlyZUV2ZW50KF9jb25uLmdldERlbGVnYXRlKCksDQogICAg\nICAgICAgICAgICAgSkRCQ0V2ZW50LkJFRk9SRV9FWEVDVVRFX1NUQVRFTUVO\nVCwgbnVsbCwgZ2V0RGVsZWdhdGUoKSwgX3NxbCk7DQogICAgICAgICAgICB0\ncnkgew0KICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5leGVjdXRlQmF0\nY2goKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAg\nICAgZmlyZUV2ZW50KF9jb25uLmdldERlbGVnYXRlKCksDQogICAgICAgICAg\nICAgICAgICAgIEpEQkNFdmVudC5BRlRFUl9FWEVDVVRFX1NUQVRFTUVOVCwg\nYmVmb3JlLA0KICAgICAgICAgICAgICAgICAgICBnZXREZWxlZ2F0ZSgpLCBf\nc3FsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAg\nIC8qKg0KICAgICAqIEZpcmVzIGV2ZW50cyBhcyBhcHByb3ByaWF0ZS4NCiAg\nICAgKi8NCiAgICBwcml2YXRlIGNsYXNzIEV2ZW50U3RhdGVtZW50IGV4dGVu\nZHMgRGVsZWdhdGluZ1N0YXRlbWVudCB7DQoNCiAgICAgICAgcHJpdmF0ZSBm\naW5hbCBFdmVudENvbm5lY3Rpb24gX2Nvbm47DQoNCiAgICAgICAgcHVibGlj\nIEV2ZW50U3RhdGVtZW50KFN0YXRlbWVudCBzdG1udCwgRXZlbnRDb25uZWN0\naW9uIGNvbm4pIHsNCiAgICAgICAgICAgIHN1cGVyKHN0bW50LCBjb25uKTsN\nCiAgICAgICAgICAgIF9jb25uID0gY29ubjsNCiAgICAgICAgfQ0KDQogICAg\nICAgIHB1YmxpYyBpbnQgZXhlY3V0ZVVwZGF0ZShTdHJpbmcgc3FsKSB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsNCiAgICAgICAgICAgIEpEQkNFdmVudCBiZWZv\ncmUgPSBmaXJlRXZlbnQoX2Nvbm4uZ2V0RGVsZWdhdGUoKSwNCiAgICAgICAg\nICAgICAgICBKREJDRXZlbnQuQkVGT1JFX0VYRUNVVEVfU1RBVEVNRU5ULCBu\ndWxsLCBnZXREZWxlZ2F0ZSgpLCBzcWwpOw0KICAgICAgICAgICAgdHJ5IHsN\nCiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZVVwZGF0ZShz\ncWwpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAg\nICBmaXJlRXZlbnQoX2Nvbm4uZ2V0RGVsZWdhdGUoKSwNCiAgICAgICAgICAg\nICAgICAgICAgSkRCQ0V2ZW50LkFGVEVSX0VYRUNVVEVfU1RBVEVNRU5ULCBi\nZWZvcmUsDQogICAgICAgICAgICAgICAgICAgIGdldERlbGVnYXRlKCksIHNx\nbCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBwcm90\nZWN0ZWQgUmVzdWx0U2V0IGV4ZWN1dGVRdWVyeShTdHJpbmcgc3FsLCBib29s\nZWFuIHdyYXApDQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsN\nCiAgICAgICAgICAgIEpEQkNFdmVudCBiZWZvcmUgPSBmaXJlRXZlbnQoX2Nv\nbm4uZ2V0RGVsZWdhdGUoKSwNCiAgICAgICAgICAgICAgICBKREJDRXZlbnQu\nQkVGT1JFX0VYRUNVVEVfU1RBVEVNRU5ULCBudWxsLCBnZXREZWxlZ2F0ZSgp\nLCBzcWwpOw0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBy\nZXR1cm4gc3VwZXIuZXhlY3V0ZVF1ZXJ5KHNxbCwgd3JhcCk7DQogICAgICAg\nICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgICAgIGZpcmVFdmVudChf\nY29ubi5nZXREZWxlZ2F0ZSgpLA0KICAgICAgICAgICAgICAgICAgICBKREJD\nRXZlbnQuQUZURVJfRVhFQ1VURV9TVEFURU1FTlQsIGJlZm9yZSwNCiAgICAg\nICAgICAgICAgICAgICAgZ2V0RGVsZWdhdGUoKSwgc3FsKTsNCiAgICAgICAg\nICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCn0NCg==\n","encoding":"base64"}

