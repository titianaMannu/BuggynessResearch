{"sha":"8cf5412976275f30c2c40a5c894f10d3ee02385e","node_id":"MDQ6QmxvYjIwNjM2NDo4Y2Y1NDEyOTc2Mjc1ZjMwYzJjNDBhNWM4OTRmMTBkM2VlMDIzODVl","size":12041,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8cf5412976275f30c2c40a5c894f10d3ee02385e","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmxvZzsNCg0KaW1wb3J0IGphdmEuaW8uRmlsZTsNCmltcG9ydCBqYXZh\nLmlvLkZpbGVPdXRwdXRTdHJlYW07DQppbXBvcnQgamF2YS5pby5JT0V4Y2Vw\ndGlvbjsNCmltcG9ydCBqYXZhLmlvLlByaW50U3RyZWFtOw0KaW1wb3J0IGph\ndmEuaW8uUHJpbnRXcml0ZXI7DQppbXBvcnQgamF2YS5pby5TdHJpbmdXcml0\nZXI7DQppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOw0K\naW1wb3J0IGphdmEuc2VjdXJpdHkuUHJpdmlsZWdlZEFjdGlvbkV4Y2VwdGlv\nbjsNCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsNCmltcG9ydCBqYXZhLnV0\naWwuSXRlcmF0b3I7DQppbXBvcnQgamF2YS51dGlsLk1hcDsNCg0KaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmFibGU7DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRp\nb247DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkdlbmVy\naWNDb25maWd1cmFibGU7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkZpbGVzOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5KMkRvUHJpdkhlbHBlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnV0aWwuTG9jYWxpemVyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIudXRpbC5PcHRpb25zOw0KaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOw0KDQovKioNCiAqIERlZmF1bHQg\ne0BsaW5rIExvZ0ZhY3Rvcnl9IGltcGxlbWVudGF0aW9uLiBGb3IgZWFzZSBv\nZiBhdXRvbWF0aWMNCiAqIGNvbmZpZ3VyYXRpb24sIHRoaXMgaW1wbGVtZW50\nYXRpb24ga2V5cyBvbiBvbmx5IHRoZSBsYXN0IGRvdC1zZXBhcmF0ZWQNCiAq\nIHRva2VuIG9mIHRoZSBsb2cgY2hhbm5lbCBuYW1lLg0KICoNCiAqIEBhdXRo\nb3IgUGF0cmljayBMaW5za2V5DQogKi8NCnB1YmxpYyBjbGFzcyBMb2dGYWN0\nb3J5SW1wbCANCiAgICBpbXBsZW1lbnRzIExvZ0ZhY3RvcnksIEdlbmVyaWND\nb25maWd1cmFibGUsIENvbmZpZ3VyYWJsZSB7DQoNCiAgICBwcml2YXRlIHN0\nYXRpYyBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlKExv\nZ0ZhY3RvcnlJbXBsLmNsYXNzKTsNCg0KICAgIHB1YmxpYyBzdGF0aWMgZmlu\nYWwgU3RyaW5nIFRSQUNFX1NUUiA9IF9sb2MuZ2V0KCJsb2ctdHJhY2UiKS5n\nZXRNZXNzYWdlKCk7DQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nSU5GT19TVFIgPSBfbG9jLmdldCgibG9nLWluZm8iKS5nZXRNZXNzYWdlKCk7\nDQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgV0FSTl9TVFIgPSBf\nbG9jLmdldCgibG9nLXdhcm4iKS5nZXRNZXNzYWdlKCk7DQogICAgcHVibGlj\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgRVJST1JfU1RSID0gX2xvYy5nZXQoImxv\nZy1lcnJvciIpLmdldE1lc3NhZ2UoKTsNCiAgICBwdWJsaWMgc3RhdGljIGZp\nbmFsIFN0cmluZyBGQVRBTF9TVFIgPSBfbG9jLmdldCgibG9nLWZhdGFsIiku\nZ2V0TWVzc2FnZSgpOw0KDQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJp\nbmcgU1RET1VUID0gInN0ZG91dCI7DQogICAgcHVibGljIHN0YXRpYyBmaW5h\nbCBTdHJpbmcgU1RERVJSID0gInN0ZGVyciI7DQoNCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBTdHJpbmcgTkVXTElORSA9IEoyRG9Qcml2SGVscGVyLmdl\ndExpbmVTZXBhcmF0b3IoKTsNCg0KICAgIC8qKg0KICAgICAqIFRoZSB0aW1l\nIGF0IHdoaWNoIHRoaXMgZmFjdG9yeSB3YXMgaW5pdGlhbGl6ZWQuDQogICAg\nICovDQogICAgcHJvdGVjdGVkIGZpbmFsIGxvbmcgaW5pdGlhbGl6YXRpb25N\naWxsaXM7DQoNCiAgICAvKioNCiAgICAgKiBUaGUge0BsaW5rIExvZ31zIHRo\nYXQgdGhpcyBmYWN0b3J5IG1hbmFnZXMsIGtleWVkIGJ5IGxvZyBjaGFubmVs\nIG5hbWUuDQogICAgICovDQogICAgcHJpdmF0ZSBNYXAgX2xvZ3MgPSBuZXcg\nQ29uY3VycmVudEhhc2hNYXAoKTsgLy8gPFN0cmluZyxMb2c+DQoNCiAgICAv\nKioNCiAgICAgKiBUaGUgZGVmYXVsdCBsb2dnaW5nIGxldmVsLg0KICAgICAq\nLw0KICAgIHByaXZhdGUgc2hvcnQgX2RlZmF1bHRMb2dMZXZlbCA9IExvZy5J\nTkZPOw0KDQogICAgLyoqDQogICAgICogU3RvcmFnZSBmb3IgbG9nZ2luZyBs\nZXZlbCBjb25maWd1cmF0aW9uIHNwZWNpZmllZCBhdCBjb25maWd1cmF0aW9u\nIHRpbWUuDQogICAgICovDQogICAgcHJpdmF0ZSBNYXAgX2NvbmZpZ3VyZWRM\nZXZlbHMgPSBuZXcgSGFzaE1hcCgpOyAvLyA8U3RyaW5nLEludGVnZXI+DQoN\nCiAgICAvKioNCiAgICAgKiBUaGUgc3RyZWFtIHRvIHdyaXRlIHRvLiBEZWZh\ndWx0cyB0byBTeXN0ZW0uZXJyLg0KICAgICAqLw0KICAgIHByaXZhdGUgUHJp\nbnRTdHJlYW0gX291dCA9IFN5c3RlbS5lcnI7DQoNCiAgICAvKioNCiAgICAg\nKiBBIHRva2VuIHRvIGFkZCB0byBhbGwgbG9nIG1lc3NhZ2VzLiBJZiA8Y29k\nZT5udWxsPC9jb2RlPiwgdGhlIA0KICAgICAqIGNvbmZpZ3VyYXRpb24ncyBp\nZCB3aWxsIGJlIHVzZWQuDQogICAgICovDQogICAgcHJpdmF0ZSBTdHJpbmcg\nX2RpYWdDb250ZXh0ID0gbnVsbDsNCiAgICBwcml2YXRlIGJvb2xlYW4gX2Rp\nYWdDb250ZXh0Q29tcHV0ZWQgPSBmYWxzZTsNCiAgICANCiAgICBwcml2YXRl\nIENvbmZpZ3VyYXRpb24gX2NvbmY7DQoNCg0KICAgIHB1YmxpYyBMb2dGYWN0\nb3J5SW1wbCgpIHsNCiAgICAgICAgaW5pdGlhbGl6YXRpb25NaWxsaXMgPSBT\neXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgTG9nIGdldExvZyhTdHJpbmcgY2hhbm5lbCkgew0KICAgICAgICAvLyBu\nbyBsb2NraW5nOyBvayBpZiBzYW1lIGxvZyBjcmVhdGVkIG11bHRpcGxlIHRp\nbWVzDQogICAgICAgIExvZ0ltcGwgbCA9IChMb2dJbXBsKSBfbG9ncy5nZXQo\nY2hhbm5lbCk7DQogICAgICAgIGlmIChsID09IG51bGwpIHsNCiAgICAgICAg\nICAgIGwgPSBuZXdMb2dJbXBsKCk7DQogICAgICAgICAgICBsLnNldENoYW5u\nZWwoY2hhbm5lbCk7DQogICAgICAgICAgICBTaG9ydCBsdmwgPSAoU2hvcnQp\nIF9jb25maWd1cmVkTGV2ZWxzLmdldChzaG9ydGVuKGNoYW5uZWwpKTsNCiAg\nICAgICAgICAgIGwuc2V0TGV2ZWwobHZsID09IG51bGwgPyBfZGVmYXVsdExv\nZ0xldmVsIDogbHZsLnNob3J0VmFsdWUoKSk7DQogICAgICAgICAgICBfbG9n\ncy5wdXQoY2hhbm5lbCwgbCk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJu\nIGw7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQ3JlYXRlIGEgbmV3IGxv\nZy4gVGhlIGxvZyB3aWxsIGJlIGNhY2hlZC4NCiAgICAgKi8NCiAgICBwcm90\nZWN0ZWQgTG9nSW1wbCBuZXdMb2dJbXBsKCkgew0KICAgICAgICByZXR1cm4g\nbmV3IExvZ0ltcGwoKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUaGUg\nc3RyaW5nIG5hbWUgb2YgdGhlIGRlZmF1bHQgbGV2ZWwgZm9yIHVuY29uZmln\ndXJlZCBsb2cgY2hhbm5lbHM7DQogICAgICogdXNlZCBmb3IgYXV0b21hdGlj\nIGNvbmZpZ3VyYXRpb24uDQogICAgICovDQogICAgcHVibGljIHZvaWQgc2V0\nRGVmYXVsdExldmVsKFN0cmluZyBsZXZlbCkgew0KICAgICAgICBfZGVmYXVs\ndExvZ0xldmVsID0gZ2V0TGV2ZWwobGV2ZWwpOw0KICAgIH0NCg0KICAgIC8q\nKg0KICAgICAqIFRoZSBkZWZhdWx0IGxldmVsIGZvciB1bmNvbmZpZ3VyZWQg\nbG9nIGNoYW5uZWxzLg0KICAgICAqLw0KICAgIHB1YmxpYyBzaG9ydCBnZXRE\nZWZhdWx0TGV2ZWwoKSB7DQogICAgICAgIHJldHVybiBfZGVmYXVsdExvZ0xl\ndmVsOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRoZSBkZWZhdWx0IGxl\ndmVsIGZvciB1bmNvbmZpZ3VyZWQgbG9nIGNoYW5uZWxzLg0KICAgICAqLw0K\nICAgIHB1YmxpYyB2b2lkIHNldERlZmF1bHRMZXZlbChzaG9ydCBsZXZlbCkg\new0KICAgICAgICBfZGVmYXVsdExvZ0xldmVsID0gbGV2ZWw7DQogICAgfQ0K\nDQogICAgLyoqDQogICAgICogQSBzdHJpbmcgdG8gcHJlZml4IGFsbCBsb2cg\nbWVzc2FnZXMgd2l0aC4gU2V0IHRvDQogICAgICogPGNvZGU+bnVsbDwvY29k\nZT4gdG8gdXNlIHRoZSBjb25maWd1cmF0aW9uJ3MgSWQgcHJvcGVydHkgc2V0\ndGluZy4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBzZXREaWFnbm9zdGlj\nQ29udGV4dChTdHJpbmcgdmFsKSB7DQogICAgICAgIF9kaWFnQ29udGV4dCA9\nIHZhbDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBBIHN0cmluZyB0byBw\ncmVmaXggYWxsIGxvZyBtZXNzYWdlcyB3aXRoLiBTZXQgdG8NCiAgICAgKiA8\nY29kZT5udWxsPC9jb2RlPiB0byB1c2UgdGhlIGNvbmZpZ3VyYXRpb24ncyBJ\nZCBwcm9wZXJ0eSBzZXR0aW5nLg0KICAgICAqLw0KICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0RGlhZ25vc3RpY0NvbnRleHQoKSB7DQogICAgICAgIGlmICghX2Rp\nYWdDb250ZXh0Q29tcHV0ZWQpIHsNCiAgICAgICAgICAgIC8vIHRoaXMgaW5p\ndGlhbGl6YXRpb24gaGFzIHRvIGhhcHBlbiBsYXppbHkgYmVjYXVzZSB0aGVy\nZSBpcyBubw0KICAgICAgICAgICAgLy8gZ3VhcmFudGVlIHRoYXQgY29uZi5n\nZXRJZCgpIHdpbGwgYmUgcG9wdWxhdGVkIGJ5IHRoZSB0aW1lIHRoYXQNCiAg\nICAgICAgICAgIC8vIGVuZENvbmZpZ3VyYXRpb24oKSBpcyBjYWxsZWQuDQog\nICAgICAgICAgICBpZiAoX2RpYWdDb250ZXh0ID09IG51bGwgJiYgX2NvbmYg\nIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIF9kaWFnQ29udGV4dCA9IF9j\nb25mLmdldElkKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAo\nIiIuZXF1YWxzKF9kaWFnQ29udGV4dCkpDQogICAgICAgICAgICAgICAgX2Rp\nYWdDb250ZXh0ID0gbnVsbDsNCiAgICAgICAgICAgIF9kaWFnQ29udGV4dENv\nbXB1dGVkID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gX2Rp\nYWdDb250ZXh0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRoZSBzdHJl\nYW0gdG8gd3JpdGUgdG8uIFJlY29nbml6ZWQgdmFsdWVzIGFyZTogPGNvZGU+\nc3Rkb3V0PC9jb2RlPg0KICAgICAqIGFuZCA8Y29kZT5zdGRlcnI8L2NvZGU+\nLiBBbnkgb3RoZXIgdmFsdWUgd2lsbCBiZSBjb25zaWRlcmVkIGEgZmlsZSBu\nYW1lLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHNldEZpbGUoU3RyaW5n\nIGZpbGUpIHsNCiAgICAgICAgaWYgKFNURE9VVC5lcXVhbHMoZmlsZSkpDQog\nICAgICAgICAgICBfb3V0ID0gU3lzdGVtLm91dDsNCiAgICAgICAgZWxzZSBp\nZiAoU1RERVJSLmVxdWFscyhmaWxlKSkNCiAgICAgICAgICAgIF9vdXQgPSBT\neXN0ZW0uZXJyOw0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIEZpbGUg\nZiA9IEZpbGVzLmdldEZpbGUoZmlsZSwgbnVsbCk7DQogICAgICAgICAgICB0\ncnkgew0KICAgICAgICAgICAgICAgIF9vdXQgPSBuZXcgUHJpbnRTdHJlYW0o\nKEZpbGVPdXRwdXRTdHJlYW0pDQogICAgICAgICAgICAgICAgICAgIEFjY2Vz\nc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKA0KICAgICAgICAgICAgICAgICAg\nICAgICAgSjJEb1ByaXZIZWxwZXIubmV3RmlsZU91dHB1dFN0cmVhbUFjdGlv\nbigNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoU3RyaW5nKSBBY2Nl\nc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgNCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0Q2Fub25pY2FsUGF0\naEFjdGlvbihmKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1\nZSkpKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRBY3Rpb25F\neGNlcHRpb24gcGFlKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihfbG9jLmdldCgibG9nLWJhZC1maWxl\nIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUpICsgIiAiICsgcGFl\nLmdldEV4Y2VwdGlvbigpKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhj\nZXB0aW9uIGlvZSkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24oX2xvYy5nZXQoImxvZy1iYWQtZmlsZSIs\nDQogICAgICAgICAgICAgICAgICAgIGZpbGUpICsgIiAiICsgaW9lLnRvU3Ry\naW5nKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQog\nICAgLyoqDQogICAgICogVGhlIHN0cmVhbSB0byB3cml0ZSB0by4NCiAgICAg\nKi8NCiAgICBwdWJsaWMgUHJpbnRTdHJlYW0gZ2V0U3RyZWFtKCkgew0KICAg\nICAgICByZXR1cm4gX291dDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBU\naGUgc3RyZWFtIHRvIHdyaXRlIHRvLg0KICAgICAqLw0KICAgIHB1YmxpYyB2\nb2lkIHNldFN0cmVhbShQcmludFN0cmVhbSBzdHJlYW0pIHsNCiAgICAgICAg\naWYgKHN0cmVhbSA9PSBudWxsKQ0KICAgICAgICAgICAgdGhyb3cgbmV3IE51\nbGxQb2ludGVyRXhjZXB0aW9uKCJzdHJlYW0gPT0gbnVsbCIpOw0KICAgICAg\nICBfb3V0ID0gc3RyZWFtOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJl\ndHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHNwZWNpZmll\nZCBsb2cgbGV2ZWwgY29uc3RhbnQuDQogICAgICovDQogICAgcHVibGljIHN0\nYXRpYyBTdHJpbmcgZ2V0TGV2ZWxOYW1lKHNob3J0IGxldmVsKSB7DQogICAg\nICAgIHN3aXRjaCAobGV2ZWwpIHsNCiAgICAgICAgICAgIGNhc2UgTG9nLlRS\nQUNFOg0KICAgICAgICAgICAgICAgIHJldHVybiBUUkFDRV9TVFI7DQogICAg\nICAgICAgICBjYXNlIExvZy5JTkZPOg0KICAgICAgICAgICAgICAgIHJldHVy\nbiBJTkZPX1NUUjsNCiAgICAgICAgICAgIGNhc2UgTG9nLldBUk46DQogICAg\nICAgICAgICAgICAgcmV0dXJuIFdBUk5fU1RSOw0KICAgICAgICAgICAgY2Fz\nZSBMb2cuRVJST1I6DQogICAgICAgICAgICAgICAgcmV0dXJuIEVSUk9SX1NU\nUjsNCiAgICAgICAgICAgIGNhc2UgTG9nLkZBVEFMOg0KICAgICAgICAgICAg\nICAgIHJldHVybiBGQVRBTF9TVFI7DQogICAgICAgICAgICBkZWZhdWx0Og0K\nICAgICAgICAgICAgICAgIHJldHVybiBfbG9jLmdldCgibG9nLXVua25vd24i\nKS5nZXRNZXNzYWdlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBSZXR1cm5zIGEgc3ltYm9saWMgY29uc3RhbnQgZm9yIHRoZSBz\ncGVjaWZpZWQgc3RyaW5nIGxldmVsLg0KICAgICAqLw0KICAgIHB1YmxpYyBz\ndGF0aWMgc2hvcnQgZ2V0TGV2ZWwoU3RyaW5nIHN0cikgew0KICAgICAgICBz\ndHIgPSBzdHIudG9VcHBlckNhc2UoKS50cmltKCk7DQogICAgICAgIHNob3J0\nIHZhbCA9IFRSQUNFX1NUUi5lcXVhbHMoc3RyKSA/IExvZy5UUkFDRSA6DQog\nICAgICAgICAgICBJTkZPX1NUUi5lcXVhbHMoc3RyKSA/IExvZy5JTkZPIDoN\nCiAgICAgICAgICAgICAgICBXQVJOX1NUUi5lcXVhbHMoc3RyKSA/IExvZy5X\nQVJOIDoNCiAgICAgICAgICAgICAgICAgICAgRVJST1JfU1RSLmVxdWFscyhz\ndHIpID8gTG9nLkVSUk9SIDoNCiAgICAgICAgICAgICAgICAgICAgICAgIEZB\nVEFMX1NUUi5lcXVhbHMoc3RyKSA/IExvZy5GQVRBTCA6IC0xOw0KDQogICAg\nICAgIGlmICh2YWwgPT0gLTEpDQogICAgICAgICAgICB0aHJvdyBuZXcgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uDQogICAgICAgICAgICAgICAgKF9sb2Mu\nZ2V0KCJsb2ctYmFkLWNvbnN0YW50Iiwgc3RyKS5nZXRNZXNzYWdlKCkpOw0K\nDQogICAgICAgIHJldHVybiB2YWw7DQogICAgfQ0KDQogICAgLy8gLS0tLS0t\nLS0tLSBDb25maWd1cmFibGUgaW1wbGVtZW50YXRpb24gLS0tLS0tLS0tLQ0K\nICAgIA0KICAgIHB1YmxpYyB2b2lkIHNldENvbmZpZ3VyYXRpb24oQ29uZmln\ndXJhdGlvbiBjb25mKSB7DQogICAgICAgIF9jb25mID0gY29uZjsNCiAgICB9\nDQogICAgDQogICAgcHVibGljIHZvaWQgc3RhcnRDb25maWd1cmF0aW9uKCkg\new0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24o\nKSB7DQogICAgfQ0KDQogICAgLy8gLS0tLS0tLS0tLSBHZW5lcmljQ29uZmln\ndXJhYmxlIGltcGxlbWVudGF0aW9uIC0tLS0tLS0tLS0NCg0KICAgIHB1Ymxp\nYyB2b2lkIHNldEludG8oT3B0aW9ucyBvcHRzKSB7DQogICAgICAgIGlmICgh\nb3B0cy5pc0VtcHR5KCkpIHsNCiAgICAgICAgICAgIE1hcC5FbnRyeSBlOw0K\nICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0gb3B0cy5lbnRyeVNl\ndCgpLml0ZXJhdG9yKCk7IGl0ZXIuaGFzTmV4dCgpOykgew0KICAgICAgICAg\nICAgICAgIGUgPSAoTWFwLkVudHJ5KSBpdGVyLm5leHQoKTsNCiAgICAgICAg\nICAgICAgICBfY29uZmlndXJlZExldmVscy5wdXQoc2hvcnRlbigoU3RyaW5n\nKSBlLmdldEtleSgpKSwNCiAgICAgICAgICAgICAgICAgICAgbmV3IFNob3J0\nKGdldExldmVsKChTdHJpbmcpIGUuZ2V0VmFsdWUoKSkpKTsNCiAgICAgICAg\nICAgIH0NCiAgICAgICAgICAgIG9wdHMuY2xlYXIoKTsNCiAgICAgICAgfQ0K\nICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIFN0cmluZyBzaG9ydGVuKFN0\ncmluZyBjaGFubmVsKSB7DQogICAgICAgIHJldHVybiBjaGFubmVsLnN1YnN0\ncmluZyhjaGFubmVsLmxhc3RJbmRleE9mKCcuJykgKyAxKTsNCiAgICB9DQoN\nCiAgICAvKioNCiAgICAgKiBBIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiB0\naGUge0BsaW5rIExvZ30gaW50ZXJmYWNlLiBXcml0ZXMNCiAgICAgKiBvdXRw\ndXQgdG8gc3RkZXJyLg0KICAgICAqLw0KICAgIHB1YmxpYyBjbGFzcyBMb2dJ\nbXBsIGV4dGVuZHMgQWJzdHJhY3RMb2cgew0KDQogICAgICAgIHByaXZhdGUg\nc2hvcnQgX2xldmVsID0gSU5GTzsNCiAgICAgICAgcHJpdmF0ZSBTdHJpbmcg\nX2NoYW5uZWw7DQoNCiAgICAgICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNFbmFi\nbGVkKHNob3J0IGxldmVsKSB7DQogICAgICAgICAgICByZXR1cm4gbGV2ZWwg\nPj0gX2xldmVsOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJvdGVjdGVkIHZv\naWQgbG9nKHNob3J0IGxldmVsLCBTdHJpbmcgbWVzc2FnZSwgVGhyb3dhYmxl\nIHQpIHsNCiAgICAgICAgICAgIFN0cmluZyBtc2cgPSBmb3JtYXRNZXNzYWdl\nKGxldmVsLCBtZXNzYWdlLCB0KTsNCiAgICAgICAgICAgIHN5bmNocm9uaXpl\nZCAoX291dCkgew0KICAgICAgICAgICAgICAgIF9vdXQucHJpbnQobXNnKTsN\nCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8qKg0KICAg\nICAgICAgKiBDb252ZXJ0IDxjb2RlPm1lc3NhZ2U8L2NvZGU+IGludG8gYSBz\ndHJpbmcgcmVhZHkgdG8gYmUgd3JpdHRlbiB0bw0KICAgICAgICAgKiB0aGUg\nbG9nLiBUaGUgc3RyaW5nIHNob3VsZCBpbmNsdWRlIHRoZSB0ZXJtaW5hdGlu\nZyBuZXdsaW5lLg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0gdCBt\nYXkgYmUgbnVsbA0KICAgICAgICAgKi8NCiAgICAgICAgcHJvdGVjdGVkIFN0\ncmluZyBmb3JtYXRNZXNzYWdlKHNob3J0IGxldmVsLCBTdHJpbmcgbWVzc2Fn\nZSwNCiAgICAgICAgICAgIFRocm93YWJsZSB0KSB7DQogICAgICAgICAgICAv\nLyB3ZSB3cml0ZSB0byBhIFN0cmluZ0J1ZmZlciBhbmQgdGhlbiBmbHVzaCBp\ndCBhbGwgYXQNCiAgICAgICAgICAgIC8vIG9uY2UgYXMgYSBzaW5nbGUgbGlu\nZSwgc2luY2Ugc29tZSBlbnZpcm9ubWVudHMoZS5nLiwgSkJvc3MpDQogICAg\nICAgICAgICAvLyBvdmVycmlkZSB0aGUgU3lzdGVtIG91dHB1dCBzdHJlYW0g\ndG8gZmx1c2ggYW55IGNhbGxzDQogICAgICAgICAgICAvLyB0byB3cml0ZSB3\naXRob3V0IHJlZ2FyZCB0byBsaW5lIGJyZWFrcywgbWFraW5nIHRoZQ0KICAg\nICAgICAgICAgLy8gb3V0cHV0IGluY29tcHJlaGVuc2liZS4NCiAgICAgICAg\nICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7DQoN\nCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoZ2V0T2Zmc2V0KCkpOw0KICAgICAg\nICAgICAgYnVmLmFwcGVuZCgiICAiKTsNCiAgICAgICAgICAgIGlmIChnZXRE\naWFnbm9zdGljQ29udGV4dCgpICE9IG51bGwpDQogICAgICAgICAgICAgICAg\nYnVmLmFwcGVuZChnZXREaWFnbm9zdGljQ29udGV4dCgpKS5hcHBlbmQoIiAg\nIik7DQogICAgICAgICAgICBidWYuYXBwZW5kKGdldExldmVsTmFtZShsZXZl\nbCkpOw0KICAgICAgICAgICAgaWYgKGxldmVsID09IElORk8gfHwgbGV2ZWwg\nPT0gV0FSTikNCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIgIik7DQog\nICAgICAgICAgICBidWYuYXBwZW5kKCIgIFsiKTsNCiAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5nZXROYW1lKCkpOw0K\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiXSAiKTsNCiAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoX2NoYW5uZWwpOw0KICAgICAgICAgICAgYnVmLmFwcGVuZCgi\nIC0gIik7DQogICAgICAgICAgICBidWYuYXBwZW5kKG1lc3NhZ2UpOw0KICAg\nICAgICAgICAgYnVmLmFwcGVuZChORVdMSU5FKTsNCg0KICAgICAgICAgICAg\naWYgKHQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIFN0cmluZ1dyaXRl\nciBzd3JpdGVyID0gbmV3IFN0cmluZ1dyaXRlcigpOw0KICAgICAgICAgICAg\nICAgIFByaW50V3JpdGVyIHB3cml0ZXIgPSBuZXcgUHJpbnRXcml0ZXIoc3dy\naXRlcik7DQogICAgICAgICAgICAgICAgdC5wcmludFN0YWNrVHJhY2UocHdy\naXRlcik7DQogICAgICAgICAgICAgICAgcHdyaXRlci5mbHVzaCgpOw0KICAg\nICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoc3dyaXRlci50b1N0cmluZygpKTsN\nCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBidWYudG9TdHJp\nbmcoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHByaXZhdGUgbG9uZyBnZXRP\nZmZzZXQoKSB7DQogICAgICAgICAgICByZXR1cm4gU3lzdGVtLmN1cnJlbnRU\naW1lTWlsbGlzKCkgLSBpbml0aWFsaXphdGlvbk1pbGxpczsNCiAgICAgICAg\nfQ0KDQogICAgICAgIHB1YmxpYyB2b2lkIHNldENoYW5uZWwoU3RyaW5nIHZh\nbCkgew0KICAgICAgICAgICAgX2NoYW5uZWwgPSB2YWw7DQogICAgICAgIH0N\nCg0KICAgICAgICBwdWJsaWMgU3RyaW5nIGdldENoYW5uZWwoKSB7DQogICAg\nICAgICAgICByZXR1cm4gX2NoYW5uZWw7DQogICAgICAgIH0NCg0KICAgICAg\nICBwdWJsaWMgdm9pZCBzZXRMZXZlbChzaG9ydCB2YWwpIHsNCiAgICAgICAg\nICAgIF9sZXZlbCA9IHZhbDsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1Ymxp\nYyBzaG9ydCBnZXRMZXZlbCgpIHsNCiAgICAgICAgICAgIHJldHVybiBfbGV2\nZWw7DQogICAgICAgIH0NCiAgICB9DQp9DQo=\n","encoding":"base64"}

