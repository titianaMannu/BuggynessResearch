{"sha":"a82b2f7f45bc93eef6995b41e6c6befc2b190c88","node_id":"MDQ6QmxvYjIwNjM2NDphODJiMmY3ZjQ1YmM5M2VlZjY5OTViNDFlNmM2YmVmYzJiMTkwYzg4","size":10001,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a82b2f7f45bc93eef6995b41e6c6befc2b190c88","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbDsNCg0KaW1wb3J0IGphdmEuc2VjdXJpdHkuQWNjZXNzQ29udHJvbGxl\ncjsNCmltcG9ydCBqYXZhLnRleHQuTWVzc2FnZUZvcm1hdDsNCmltcG9ydCBq\nYXZhLnV0aWwuQXJyYXlzOw0KaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nOw0KaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsNCmltcG9ydCBqYXZhLnV0\naWwuTG9jYWxlOw0KaW1wb3J0IGphdmEudXRpbC5NYXA7DQppbXBvcnQgamF2\nYS51dGlsLk1pc3NpbmdSZXNvdXJjZUV4Y2VwdGlvbjsNCmltcG9ydCBqYXZh\nLnV0aWwuUHJvcGVydGllczsNCmltcG9ydCBqYXZhLnV0aWwuUmVzb3VyY2VC\ndW5kbGU7DQoNCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJy\nZW50SGFzaE1hcDsNCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db3B5\nT25Xcml0ZUFycmF5U2V0Ow0KDQovKioNCiAqIFRoZSBMb2NhbGl6ZXIgcHJv\ndmlkZXMgY29udmVuaWVudCBhY2Nlc3MgdG8gbG9jYWxpemVkDQogKiBzdHJp\nbmdzLiBJdCBpbmxjdWRlcyBidWlsdC1pbiBzdXBwb3J0IGZvciBwYXJhbWV0\nZXIgc3Vic3RpdHV0aW9uIHRocm91Z2gNCiAqIHRoZSB1c2Ugb2YgdGhlIHtA\nbGluayBNZXNzYWdlRm9ybWF0fSB1dGlsaXR5Lg0KICogU3RyaW5ncyBhcmUg\nc3RvcmVkIGluIHBlci1wYWNrYWdlIHtAbGluayBQcm9wZXJ0aWVzfSBmaWxl\ncy4NCiAqIFRoZSBwcm9wZXJ0eSBmaWxlIGZvciB0aGUgZGVmYXVsdCBsb2Nh\nbGUgbXVzdCBiZSBuYW1lZA0KICogPGNvZGU+bG9jYWxpemVyLnByb3BlcnRp\nZXM8L2NvZGU+LiBBZGRpdGlvbmFsIGxvY2FsZXMgY2FuIGJlIHN1cHBvcnRl\nZA0KICogdGhyb3VnaCBhZGRpdGlvbmFsIHByb3BlcnR5IGZpbGVzIHVzaW5n\nIHRoZSBuYW1pbmcgY29udmVudGlvbnMgc3BlY2lmaWVkDQogKiBpbiB0aGUg\ne0BsaW5rIFJlc291cmNlQnVuZGxlfSBjbGFzcy4gRm9yIGV4YW1wbGUsIHRo\nZSBnZXJtYW4gbG9jYWxlDQogKiBjb3VsZCBiZSBzdXBwb3J0ZWQgdGhyb3Vn\naCBhIDxjb2RlPmxvY2FsaXplcl9kZV9ERS5wcm9wZXJ0aWVzPC9jb2RlPiBm\naWxlLg0KICoNCiAqIEBhdXRob3IgQWJlIFdoaXRlDQogKi8NCnB1YmxpYyBj\nbGFzcyBMb2NhbGl6ZXIgew0KDQogICAgLy8gc3RhdGljIGNhY2hlIG9mIHBh\nY2thZ2UrbG9jIG5hbWUgdG8gbG9jYWxpemVyIG1hcHBpbmdzDQogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgTWFwIF9sb2NhbGl6ZXJzID0gbmV3IENvbmN1\ncnJlbnRIYXNoTWFwKCk7DQoNCiAgICAvLyBsaXN0IG9mIHJlc291cmNlIHBy\nb3ZpZGVycyB0byBkZWxlZ2F0ZSB0byB3aGVuIGxvY2F0aW5nIHJlc291cmNl\ncw0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIENvbGxlY3Rpb24gX3Byb3Zp\nZGVycyA9IG5ldyBDb3B5T25Xcml0ZUFycmF5U2V0DQogICAgICAgIChBcnJh\neXMuYXNMaXN0KG5ldyBPYmplY3RbXXsNCiAgICAgICAgICAgIG5ldyBTaW1w\nbGVSZXNvdXJjZUJ1bmRsZVByb3ZpZGVyKCksDQogICAgICAgICAgICBuZXcg\nU3RyZWFtUmVzb3VyY2VCdW5kbGVQcm92aWRlcigpLA0KICAgICAgICAgICAg\nbmV3IFppcFJlc291cmNlQnVuZGxlUHJvdmlkZXIoKSwgfSkpOw0KDQogICAg\nLyoqDQogICAgICogUmV0dXJuIGEgTG9jYWxpemVyIGluc3RhbmNlIHRoYXQg\nd2lsbCBhY2Nlc3MgdGhlIHByb3BlcnRpZXMgZmlsZQ0KICAgICAqIGluIHRo\nZSBwYWNrYWdlIG9mIHRoZSBnaXZlbiBjbGFzcyB1c2luZyB0aGUgc3lzdGVt\nIGRlZmF1bHQgbG9jYWxlLg0KICAgICAqDQogICAgICogQHNlZSAjZm9yUGFj\na2FnZShDbGFzcyxMb2NhbGUpDQogICAgICovDQogICAgcHVibGljIHN0YXRp\nYyBMb2NhbGl6ZXIgZm9yUGFja2FnZShDbGFzcyBjbHMpIHsNCiAgICAgICAg\ncmV0dXJuIGZvclBhY2thZ2UoY2xzLCBudWxsKTsNCiAgICB9DQoNCiAgICAv\nKioNCiAgICAgKiBSZXR1cm4gYSBMb2NhbGl6ZXIgaW5zdGFuY2UgdGhhdCB3\naWxsIGFjY2VzcyB0aGUgcHJvcGVydGllcyBmaWxlDQogICAgICogaW4gdGhl\nIHBhY2thZ2Ugb2YgdGhlIGdpdmVuIGNsYXNzIHVzaW5nIHRoZSBnaXZlbiBs\nb2NhbGUuDQogICAgICoNCiAgICAgKiBAcGFyYW0gY2xzIHRoZSBjbGFzcyB3\naG9zZSBwYWNrYWdlIHRvIGNoZWNrIGZvciB0aGUgbG9jYWxpemVkDQogICAg\nICogcHJvcGVydGllcyBmaWxlOyBpZiBudWxsLCB0aGUgc3lzdGVtIHdpbGwg\nY2hlY2sgZm9yDQogICAgICogYSB0b3AtbGV2ZWwgcHJvcGVydGllcyBmaWxl\nDQogICAgICogQHBhcmFtIGxvY2FsZSB0aGUgbG9jYWxlIHRvIHdoaWNoIHN0\ncmluZ3Mgc2hvdWxkIGJlIGxvY2FsaXplZDsgaWYNCiAgICAgKiBudWxsLCB0\naGUgc3lzdGVtIGRlZmF1bHQgd2lsbCBiZSBhc3N1bWVkDQogICAgICovDQog\nICAgcHVibGljIHN0YXRpYyBMb2NhbGl6ZXIgZm9yUGFja2FnZShDbGFzcyBj\nbHMsIExvY2FsZSBsb2NhbGUpIHsNCiAgICAgICAgaWYgKGxvY2FsZSA9PSBu\ndWxsKQ0KICAgICAgICAgICAgbG9jYWxlID0gTG9jYWxlLmdldERlZmF1bHQo\nKTsNCg0KICAgICAgICBpbnQgZG90ID0gKGNscyA9PSBudWxsKSA/IC0xIDog\nY2xzLmdldE5hbWUoKS5sYXN0SW5kZXhPZignLicpOw0KICAgICAgICBTdHJp\nbmcgcGtnOw0KICAgICAgICBTdHJpbmcgZmlsZTsNCiAgICAgICAgaWYgKGRv\ndCA9PSAtMSkgew0KICAgICAgICAgICAgcGtnID0gIiI7DQogICAgICAgICAg\nICBmaWxlID0gImxvY2FsaXplciI7DQogICAgICAgIH0gZWxzZSB7DQogICAg\nICAgICAgICBwa2cgPSBjbHMuZ2V0TmFtZSgpLnN1YnN0cmluZygwLCBkb3Qp\nOw0KICAgICAgICAgICAgZmlsZSA9IHBrZyArICIubG9jYWxpemVyIjsNCiAg\nICAgICAgfQ0KICAgICAgICBTdHJpbmcga2V5ID0gZmlsZSArIGxvY2FsZS50\nb1N0cmluZygpOw0KDQogICAgICAgIC8vIG5vIGxvY2tpbmc7IG9rIGlmIGJ1\nbmRsZSBjcmVhdGVkIG11bHRpcGxlIHRpbWVzDQogICAgICAgIC8vIGNoZWNr\nIGZvciBjYWNoZWQgdmVyc2lvbg0KICAgICAgICBMb2NhbGl6ZXIgbG9jID0g\nKExvY2FsaXplcikgX2xvY2FsaXplcnMuZ2V0KGtleSk7DQogICAgICAgIGlm\nIChsb2MgIT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVybiBsb2M7DQogICAg\nICAgIGVsc2Ugew0KICAgICAgICAgICAgbG9jID0gbmV3IExvY2FsaXplcihw\na2csIGZpbGUsIGxvY2FsZSwNCiAgICAgICAgICAgICAgICBjbHMgPT0gbnVs\nbCA/IG51bGw6KENsYXNzTG9hZGVyKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJp\ndmlsZWdlZCgNCiAgICAgICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIu\nZ2V0Q2xhc3NMb2FkZXJBY3Rpb24oY2xzKSkpOw0KICAgICAgICAgICAgX2xv\nY2FsaXplcnMucHV0KGtleSwgbG9jKTsNCiAgICAgICAgICAgIHJldHVybiBs\nb2M7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBSZWdp\nc3RlciBhIHJlc291cmNlIHByb3ZpZGVyLg0KICAgICAqLw0KICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBhZGRQcm92aWRlcihSZXNvdXJjZUJ1bmRsZVByb3Zp\nZGVyIHByb3ZpZGVyKSB7DQogICAgICAgIF9wcm92aWRlcnMuYWRkKHByb3Zp\nZGVyKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBSZW1vdmUgYSByZXNv\ndXJjZSBwcm92aWRlci4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGJv\nb2xlYW4gcmVtb3ZlUHJvdmlkZXIoUmVzb3VyY2VCdW5kbGVQcm92aWRlciBw\ncm92aWRlcikgew0KICAgICAgICByZXR1cm4gX3Byb3ZpZGVycy5yZW1vdmUo\ncHJvdmlkZXIpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgU3RyaW5nIF9maWxl\nOw0KICAgIHByaXZhdGUgU3RyaW5nIF9wa2c7DQogICAgcHJpdmF0ZSBSZXNv\ndXJjZUJ1bmRsZSBfYnVuZGxlID0gbnVsbDsNCiAgICBwcml2YXRlIExvY2Fs\nZSBfbG9jYWxlOw0KICAgIHByaXZhdGUgQ2xhc3NMb2FkZXIgX2xvYWRlcjsN\nCg0KICAgIHByaXZhdGUgTG9jYWxpemVyKFN0cmluZyBwa2csIFN0cmluZyBm\nLCBMb2NhbGUgbG9jYWxlLCBDbGFzc0xvYWRlciBsb2FkZXIpIHsNCiAgICAg\nICAgX3BrZyA9IHBrZzsNCiAgICAgICAgX2ZpbGUgPSBmOw0KICAgICAgICBf\nbG9jYWxlID0gbG9jYWxlOw0KICAgICAgICBfbG9hZGVyID0gbG9hZGVyOw0K\nICAgIH0NCg0KICAgIHByaXZhdGUgUmVzb3VyY2VCdW5kbGUgZ2V0QnVuZGxl\nKCkgew0KICAgICAgICAvLyBubyBsb2NraW5nOyBpdCdzIG9rIHRvIGNyZWF0\nZSBtdWx0aXBsZSBidW5kbGVzDQogICAgICAgIGlmIChfYnVuZGxlID09IG51\nbGwpIHsNCiAgICAgICAgICAgIC8vIGZpbmQgcmVzb3VyY2UgYnVuZGxlDQog\nICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IF9wcm92aWRlcnMuaXRl\ncmF0b3IoKTsNCiAgICAgICAgICAgICAgICBpdHIuaGFzTmV4dCgpICYmIF9i\ndW5kbGUgPT0gbnVsbDsgKSB7DQogICAgICAgICAgICAgICAgX2J1bmRsZSA9\nICgoUmVzb3VyY2VCdW5kbGVQcm92aWRlcikgaXRyLm5leHQoKSkNCiAgICAg\nICAgICAgICAgICAgICAgLmZpbmRSZXNvdXJjZShfZmlsZSwgX2xvY2FsZSwg\nX2xvYWRlcik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAg\ncmV0dXJuIF9idW5kbGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmV0\ndXJuIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIG1hdGNoaW5nIHRoZSBnaXZlbiBr\nZXkuDQogICAgICovDQogICAgcHVibGljIE1lc3NhZ2UgZ2V0KFN0cmluZyBr\nZXkpIHsNCiAgICAgICAgcmV0dXJuIGdldChrZXksIG51bGwpOw0KICAgIH0N\nCg0KICAgIC8qKg0KICAgICAqIFJldHVybiB0aGUgbG9jYWxpemVkIHN0cmlu\nZyBtYXRjaGluZyB0aGUgZ2l2ZW4ga2V5Lg0KICAgICAqLw0KICAgIHB1Ymxp\nYyBNZXNzYWdlIGdldEZhdGFsKFN0cmluZyBrZXkpIHsNCiAgICAgICAgcmV0\ndXJuIGdldEZhdGFsKGtleSwgbnVsbCk7DQogICAgfQ0KDQogICAgLyoqDQog\nICAgICogUmV0dXJuIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIG1hdGNoaW5nIHRo\nZSBnaXZlbiBrZXkuIFRoZSBnaXZlbg0KICAgICAqIDxjb2RlPnN1YjwvY29k\nZT4gb2JqZWN0IHdpbGwgYmUgcGFja2VkIGludG8gYW4gYXJyYXkgYW5kIHN1\nYnN0aXR1dGVkDQogICAgICogaW50byB0aGUgZm91bmQgc3RyaW5nIGFjY29y\nZGluZyB0byB0aGUgcnVsZXMgb2YgdGhlDQogICAgICoge0BsaW5rIE1lc3Nh\nZ2VGb3JtYXR9IGNsYXNzLg0KICAgICAqDQogICAgICogQHNlZSAjZ2V0KFN0\ncmluZykNCiAgICAgKi8NCiAgICBwdWJsaWMgTWVzc2FnZSBnZXQoU3RyaW5n\nIGtleSwgT2JqZWN0IHN1Yikgew0KICAgICAgICByZXR1cm4gZ2V0KGtleSwg\nbmV3IE9iamVjdFtdeyBzdWIgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAg\nICogUmV0dXJuIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIG1hdGNoaW5nIHRoZSBn\naXZlbiBrZXkuIFRoZSBnaXZlbg0KICAgICAqIDxjb2RlPnN1YjwvY29kZT4g\nb2JqZWN0IHdpbGwgYmUgcGFja2VkIGludG8gYW4gYXJyYXkgYW5kIHN1YnN0\naXR1dGVkDQogICAgICogaW50byB0aGUgZm91bmQgc3RyaW5nIGFjY29yZGlu\nZyB0byB0aGUgcnVsZXMgb2YgdGhlDQogICAgICoge0BsaW5rIE1lc3NhZ2VG\nb3JtYXR9IGNsYXNzLg0KICAgICAqDQogICAgICogQHNlZSAjZ2V0RmF0YWwo\nU3RyaW5nKQ0KICAgICAqLw0KICAgIHB1YmxpYyBNZXNzYWdlIGdldEZhdGFs\nKFN0cmluZyBrZXksIE9iamVjdCBzdWIpIHsNCiAgICAgICAgcmV0dXJuIGdl\ndEZhdGFsKGtleSwgbmV3IE9iamVjdFtdeyBzdWIgfSk7DQogICAgfQ0KDQog\nICAgLyoqDQogICAgICogUmV0dXJuIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIGZv\nciB0aGUgZ2l2ZW4ga2V5Lg0KICAgICAqDQogICAgICogQHNlZSAjZ2V0KFN0\ncmluZyxPYmplY3QpDQogICAgICovDQogICAgcHVibGljIE1lc3NhZ2UgZ2V0\nKFN0cmluZyBrZXksIE9iamVjdCBzdWIxLCBPYmplY3Qgc3ViMikgew0KICAg\nICAgICByZXR1cm4gZ2V0KGtleSwgbmV3IE9iamVjdFtdeyBzdWIxLCBzdWIy\nIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJldHVybiB0aGUgbG9j\nYWxpemVkIHN0cmluZyBmb3IgdGhlIGdpdmVuIGtleS4NCiAgICAgKg0KICAg\nICAqIEBzZWUgI2dldEZhdGFsKFN0cmluZyxPYmplY3QpDQogICAgICovDQog\nICAgcHVibGljIE1lc3NhZ2UgZ2V0RmF0YWwoU3RyaW5nIGtleSwgT2JqZWN0\nIHN1YjEsIE9iamVjdCBzdWIyKSB7DQogICAgICAgIHJldHVybiBnZXRGYXRh\nbChrZXksIG5ldyBPYmplY3RbXXsgc3ViMSwgc3ViMiB9KTsNCiAgICB9DQoN\nCiAgICAvKioNCiAgICAgKiBSZXR1cm4gdGhlIGxvY2FsaXplZCBzdHJpbmcg\nZm9yIHRoZSBnaXZlbiBrZXkuDQogICAgICoNCiAgICAgKiBAc2VlICNnZXQo\nU3RyaW5nLE9iamVjdCkNCiAgICAgKi8NCiAgICBwdWJsaWMgTWVzc2FnZSBn\nZXQoU3RyaW5nIGtleSwgT2JqZWN0IHN1YjEsIE9iamVjdCBzdWIyLCBPYmpl\nY3Qgc3ViMykgew0KICAgICAgICByZXR1cm4gZ2V0KGtleSwgbmV3IE9iamVj\ndFtdeyBzdWIxLCBzdWIyLCBzdWIzIH0pOw0KICAgIH0NCg0KICAgIC8qKg0K\nICAgICAqIFJldHVybiB0aGUgbG9jYWxpemVkIHN0cmluZyBtYXRjaGluZyB0\naGUgZ2l2ZW4ga2V5LiBUaGUgZ2l2ZW4NCiAgICAgKiA8Y29kZT5zdWJzPC9j\nb2RlPiBvYmplY3RzIHdpbGwgYmUgc3Vic3RpdHV0ZWQNCiAgICAgKiBpbnRv\nIHRoZSBmb3VuZCBzdHJpbmcgYWNjb3JkaW5nIHRvIHRoZSBydWxlcyBvZiB0\naGUNCiAgICAgKiB7QGxpbmsgTWVzc2FnZUZvcm1hdH0gY2xhc3MuDQogICAg\nICoNCiAgICAgKiBAc2VlICNnZXQoU3RyaW5nKQ0KICAgICAqLw0KICAgIHB1\nYmxpYyBNZXNzYWdlIGdldChTdHJpbmcga2V5LCBPYmplY3RbXSBzdWJzKSB7\nDQogICAgICAgIHJldHVybiBuZXcgTWVzc2FnZShfcGtnLCBnZXRCdW5kbGUo\nKSwga2V5LCBzdWJzLCBmYWxzZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAg\nICogUmV0dXJuIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIG1hdGNoaW5nIHRoZSBn\naXZlbiBrZXkuIFRoZSBnaXZlbg0KICAgICAqIDxjb2RlPnN1YnM8L2NvZGU+\nIG9iamVjdHMgd2lsbCBiZSBzdWJzdGl0dXRlZA0KICAgICAqIGludG8gdGhl\nIGZvdW5kIHN0cmluZyBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIG9mIHRoZQ0K\nICAgICAqIHtAbGluayBNZXNzYWdlRm9ybWF0fSBjbGFzcy4NCiAgICAgKg0K\nICAgICAqIEBzZWUgI2dldEZhdGFsKFN0cmluZykNCiAgICAgKi8NCiAgICBw\ndWJsaWMgTWVzc2FnZSBnZXRGYXRhbChTdHJpbmcga2V5LCBPYmplY3RbXSBz\ndWJzKSB7DQogICAgICAgIHJldHVybiBuZXcgTWVzc2FnZShfcGtnLCBnZXRC\ndW5kbGUoKSwga2V5LCBzdWJzLCB0cnVlKTsNCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBBIDxjb2RlPk1lc3NhZ2U8L2NvZGU+IGNhbiBwcm92aWRlIGEg\nbG9jYWxpemVkIG1lc3NhZ2UgdmlhIHRoZQ0KICAgICAqIHtAbGluayAjZ2V0\nTWVzc2FnZX0gbWV0aG9kIGNhbGwsIGFuZCBjYW4gYWxzbyBwcm92aWRlIHRo\nZSBvcmlnaW5hbCBrZXksDQogICAgICogcGFja2FnZSwgYW5kIHN1YnN0aXR1\ndGlvbiBhcnJheSB0aGF0IHdlcmUgdXNlZCB0byBhc3NlbWJsZSB0aGUgbWVz\nc2FnZS4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE1lc3Nh\nZ2Ugew0KDQogICAgICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIF9wa2c7DQog\nICAgICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIF9rZXk7DQogICAgICAgIHBy\naXZhdGUgZmluYWwgT2JqZWN0W10gX3N1YnM7DQogICAgICAgIHByaXZhdGUg\nZmluYWwgU3RyaW5nIF9sb2NhbGl6ZWRNZXNzYWdlOw0KDQogICAgICAgIHBy\naXZhdGUgTWVzc2FnZShTdHJpbmcgcGFja2FnZU5hbWUsIFJlc291cmNlQnVu\nZGxlIGJ1bmRsZSwgU3RyaW5nIGtleSwNCiAgICAgICAgICAgIE9iamVjdFtd\nIHN1YnMsIGJvb2xlYW4gZmF0YWwpIHsNCiAgICAgICAgICAgIGlmIChidW5k\nbGUgPT0gbnVsbCAmJiBmYXRhbCkNCiAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgTWlzc2luZ1Jlc291cmNlRXhjZXB0aW9uKGtleSwga2V5LCBrZXkpOw0K\nDQogICAgICAgICAgICBfcGtnID0gcGFja2FnZU5hbWU7DQogICAgICAgICAg\nICBfa2V5ID0ga2V5Ow0KICAgICAgICAgICAgX3N1YnMgPSBzdWJzOw0KICAg\nICAgICAgICAgaWYgKGJ1bmRsZSA9PSBudWxsKSB7DQogICAgICAgICAgICAg\nICAgX2xvY2FsaXplZE1lc3NhZ2UgPSBrZXk7DQogICAgICAgICAgICB9IGVs\nc2Ugew0KICAgICAgICAgICAgICAgIFN0cmluZyBsb2NhbGl6ZWQgPSBudWxs\nOw0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAg\nIGxvY2FsaXplZCA9IGJ1bmRsZS5nZXRTdHJpbmcoa2V5KTsNCiAgICAgICAg\nICAgICAgICB9IGNhdGNoIChNaXNzaW5nUmVzb3VyY2VFeGNlcHRpb24gbXJl\nKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChmYXRhbCkNCiAgICAgICAg\nICAgICAgICAgICAgICAgIHRocm93IG1yZTsNCiAgICAgICAgICAgICAgICB9\nDQogICAgICAgICAgICAgICAgX2xvY2FsaXplZE1lc3NhZ2UgPSAobG9jYWxp\nemVkID09IG51bGwpID8ga2V5IDogbG9jYWxpemVkOw0KICAgICAgICAgICAg\nfQ0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFRoZSBs\nb2NhbGl6ZWQgbWVzc2FnZS4NCiAgICAgICAgICovDQogICAgICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0TWVzc2FnZSgpIHsNCiAgICAgICAgICAgIHJldHVybiBN\nZXNzYWdlRm9ybWF0LmZvcm1hdChfbG9jYWxpemVkTWVzc2FnZSwgX3N1YnMp\nOw0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFRoZSB1\nbmlxdWUga2V5IGZvciB0aGUgbG9jYWxpemVkIG1lc3NhZ2UuDQogICAgICAg\nICAqLw0KICAgICAgICBwdWJsaWMgU3RyaW5nIGdldEtleSgpIHsNCiAgICAg\nICAgICAgIHJldHVybiBfa2V5Ow0KICAgICAgICB9DQoNCiAgICAgICAgLyoq\nDQogICAgICAgICAqIFN1YnN0aXR1dGlvbnMgaW5zZXJ0ZWQgaW50byB0aGUg\nbWVzc2FnZS4NCiAgICAgICAgICovDQogICAgICAgIHB1YmxpYyBPYmplY3Rb\nXSBnZXRTdWJzdGl0dXRpb25zKCkgew0KICAgICAgICAgICAgcmV0dXJuIF9z\ndWJzOw0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIFN0cmluZyBnZXRQ\nYWNrYWdlTmFtZSgpIHsNCiAgICAgICAgICAgIHJldHVybiBfcGtnOw0KICAg\nICAgICB9DQoNCiAgICAgICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHsN\nCiAgICAgICAgICAgIHJldHVybiBnZXRNZXNzYWdlKCk7DQogICAgICAgIH0N\nCiAgICB9DQp9DQo=\n","encoding":"base64"}

