{"sha":"47e59619581ddafaaa07fba791cf1ae30c8f1368","node_id":"MDQ6QmxvYjIwNjM2NDo0N2U1OTYxOTU4MWRkYWZhYWEwN2ZiYTc5MWNmMWFlMzBjOGYxMzY4","size":8825,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/47e59619581ddafaaa07fba791cf1ae30c8f1368","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLmluc3RydW1lbnQuQ2xhc3NGaWxlVHJhbnNmb3JtZXI7\nCmltcG9ydCBqYXZhLmxhbmcuaW5zdHJ1bWVudC5JbGxlZ2FsQ2xhc3NGb3Jt\nYXRFeGNlcHRpb247CmltcG9ydCBqYXZhLnNlY3VyaXR5LlByb3RlY3Rpb25E\nb21haW47CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLnNwaS5DbGFzc1RyYW5zZm9ybWVyOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2Uuc3BpLlBlcnNpc3RlbmNlUHJvdmlkZXI7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5zcGkuUGVyc2lzdGVuY2VVbml0SW5mbzsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuY29uZi5Ccm9rZXJWYWx1ZTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3Vy\nYXRpb25JbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2Uu\nUENDbGFzc0ZpbGVUcmFuc2Zvcm1lcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuQm9vdHN0cmFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5Ccm9rZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvblByb3ZpZGVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRp\nb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLk1ldGFEYXRhTW9kZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0YVJlcG9z\naXRvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5DbGFzc1Jl\nc29sdmVyOwoKCi8qKgogKiBCb290c3RyYXBwaW5nIGNsYXNzIHRoYXQgYWxs\nb3dzIHRoZSBjcmVhdGlvbiBvZiBhIHN0YW5kLWFsb25lCiAqIHtAbGluayBF\nbnRpdHlNYW5hZ2VyfS4KICoKICogQHNlZSBqYXZheC5wZXJzaXN0ZW5jZS5Q\nZXJzaXN0ZW5jZSNjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeShTdHJpbmcs\nTWFwKQogKiBAcHVibGlzaGVkCiAqLwpwdWJsaWMgY2xhc3MgUGVyc2lzdGVu\nY2VQcm92aWRlckltcGwKICAgIGltcGxlbWVudHMgUGVyc2lzdGVuY2VQcm92\naWRlciB7CgogICAgc3RhdGljIGZpbmFsIFN0cmluZyBDTEFTU19UUkFOU0ZP\nUk1FUl9PUFRJT05TID0gIkNsYXNzVHJhbnNmb3JtZXJPcHRpb25zIjsKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBFTUZfUE9PTCA9ICJFbnRp\ndHlNYW5hZ2VyRmFjdG9yeVBvb2wiOwoKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UoCiAg\nICAgICAgUGVyc2lzdGVuY2VQcm92aWRlckltcGwuY2xhc3MpOwoKICAgIC8q\nKgogICAgICogTG9hZHMgdGhlIGVudGl0eSBtYW5hZ2VyIHNwZWNpZmllZCBi\neSA8Y29kZT5uYW1lPC9jb2RlPiwgYXBwbHlpbmcKICAgICAqIHRoZSBwcm9w\nZXJ0aWVzIGluIDxjb2RlPm08L2NvZGU+IGFzIG92ZXJyaWRlcyB0byB0aGUg\ncHJvcGVydGllcyBkZWZpbmVkCiAgICAgKiBpbiB0aGUgWE1MIGNvbmZpZ3Vy\nYXRpb24gZmlsZSBmb3IgPGNvZGU+bmFtZTwvY29kZT4uIElmIDxjb2RlPm5h\nbWU8L2NvZGU+CiAgICAgKiBpcyA8Y29kZT5udWxsPC9jb2RlPiwgdGhpcyBt\nZXRob2QgbG9hZHMgdGhlIFhNTCBpbiB0aGUgcmVzb3VyY2UKICAgICAqIGlk\nZW50aWZpZWQgYnkgPGNvZGU+cmVzb3VyY2U8L2NvZGU+LCBhbmQgdXNlcyB0\naGUgZmlyc3QgcmVzb3VyY2UgZm91bmQKICAgICAqIHdoZW4gZG9pbmcgdGhp\ncyBsb29rdXAsIHJlZ2FyZGxlc3Mgb2YgdGhlIG5hbWUgc3BlY2lmaWVkIGlu\nIHRoZSBYTUwKICAgICAqIHJlc291cmNlIG9yIHRoZSBuYW1lIG9mIHRoZSBq\nYXIgdGhhdCB0aGUgcmVzb3VyY2UgaXMgY29udGFpbmVkIGluLgogICAgICog\nVGhpcyBkb2VzIG5vIHBvb2xpbmcgb2YgRW50aXR5TWFuYWdlcnNGYWN0b3Jp\nZXMuCiAgICAgKi8KICAgIHB1YmxpYyBPcGVuSlBBRW50aXR5TWFuYWdlckZh\nY3RvcnkgY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkoU3RyaW5nIG5hbWUs\nCiAgICAgICAgU3RyaW5nIHJlc291cmNlLCBNYXAgbSkgewogICAgICAgIFBl\ncnNpc3RlbmNlUHJvZHVjdERlcml2YXRpb24gcGQgPSBuZXcgUGVyc2lzdGVu\nY2VQcm9kdWN0RGVyaXZhdGlvbigpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIE9iamVjdCBwb29sVmFsdWUgPSBDb25maWd1cmF0aW9ucy5yZW1vdmVQ\ncm9wZXJ0eShFTUZfUE9PTCwgbSk7CiAgICAgICAgICAgIENvbmZpZ3VyYXRp\nb25Qcm92aWRlciBjcCA9IHBkLmxvYWQocmVzb3VyY2UsIG5hbWUsIG0pOwog\nICAgICAgICAgICBpZiAoY3AgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJl\ndHVybiBudWxsOwoKICAgICAgICAgICAgQnJva2VyRmFjdG9yeSBmYWN0b3J5\nID0gZ2V0QnJva2VyRmFjdG9yeShjcCwgcG9vbFZhbHVlLCBudWxsKTsKICAg\nICAgICAgICAgcmV0dXJuIEpQQUZhY2FkZUhlbHBlci50b0VudGl0eU1hbmFn\nZXJGYWN0b3J5KGZhY3RvcnkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9u\ncy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwcml2YXRlIEJyb2tlckZhY3RvcnkgZ2V0QnJva2VyRmFjdG9yeShD\nb25maWd1cmF0aW9uUHJvdmlkZXIgY3AsCiAgICAgICAgT2JqZWN0IHBvb2xW\nYWx1ZSwgQ2xhc3NMb2FkZXIgbG9hZGVyKSB7CiAgICAgICAgLy8gaGFuZGxl\nICJ0cnVlIiBhbmQgImZhbHNlIgogICAgICAgIGlmIChwb29sVmFsdWUgaW5z\ndGFuY2VvZiBTdHJpbmcKICAgICAgICAgICAgJiYgKCJ0cnVlIi5lcXVhbHNJ\nZ25vcmVDYXNlKChTdHJpbmcpIHBvb2xWYWx1ZSkKICAgICAgICAgICAgICAg\nIHx8ICJmYWxzZSIuZXF1YWxzSWdub3JlQ2FzZSgoU3RyaW5nKSBwb29sVmFs\ndWUpKSkKICAgICAgICAgICAgcG9vbFZhbHVlID0gQm9vbGVhbi52YWx1ZU9m\nKChTdHJpbmcpIHBvb2xWYWx1ZSk7CgogICAgICAgIGlmIChwb29sVmFsdWUg\nIT0gbnVsbCAmJiAhKHBvb2xWYWx1ZSBpbnN0YW5jZW9mIEJvb2xlYW4pKSB7\nCiAgICAgICAgICAgIC8vIHdlIG9ubHkgc3VwcG9ydCBib29sZWFuIHNldHRp\nbmdzIGZvciB0aGlzIG9wdGlvbiBjdXJyZW50bHkuCiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24ocG9vbFZhbHVlLnRv\nU3RyaW5nKCkpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAocG9v\nbFZhbHVlID09IG51bGwgfHwgISgoQm9vbGVhbikgcG9vbFZhbHVlKS5ib29s\nZWFuVmFsdWUoKSkKICAgICAgICAgICAgcmV0dXJuIEJvb3RzdHJhcC5uZXdC\ncm9rZXJGYWN0b3J5KGNwLCBsb2FkZXIpOwogICAgICAgIGVsc2UKICAgICAg\nICAgICAgcmV0dXJuIEJvb3RzdHJhcC5nZXRCcm9rZXJGYWN0b3J5KGNwLCBs\nb2FkZXIpOwogICAgfQoKICAgIHB1YmxpYyBPcGVuSlBBRW50aXR5TWFuYWdl\nckZhY3RvcnkgY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkoU3RyaW5nIG5h\nbWUsCiAgICAgICAgTWFwIG0pIHsKICAgICAgICByZXR1cm4gY3JlYXRlRW50\naXR5TWFuYWdlckZhY3RvcnkobmFtZSwgbnVsbCwgbSk7CiAgICB9CgogICAg\ncHVibGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBjcmVhdGVDb250\nYWluZXJFbnRpdHlNYW5hZ2VyRmFjdG9yeSgKICAgICAgICBQZXJzaXN0ZW5j\nZVVuaXRJbmZvIHB1aSwgTWFwIG0pIHsKICAgICAgICBQZXJzaXN0ZW5jZVBy\nb2R1Y3REZXJpdmF0aW9uIHBkID0gbmV3IFBlcnNpc3RlbmNlUHJvZHVjdERl\ncml2YXRpb24oKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBPYmplY3Qg\ncG9vbFZhbHVlID0gQ29uZmlndXJhdGlvbnMucmVtb3ZlUHJvcGVydHkoRU1G\nX1BPT0wsIG0pOwogICAgICAgICAgICBDb25maWd1cmF0aW9uUHJvdmlkZXIg\nY3AgPSBwZC5sb2FkKHB1aSwgbSk7CiAgICAgICAgICAgIGlmIChjcCA9PSBu\ndWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgICAg\nICAvLyBhZGQgZW5oYW5jZXIKICAgICAgICAgICAgRXhjZXB0aW9uIHRyYW5z\nZm9ybWVyRXhjZXB0aW9uID0gbnVsbDsKICAgICAgICAgICAgU3RyaW5nIGN0\nT3B0cyA9IChTdHJpbmcpIENvbmZpZ3VyYXRpb25zLmdldFByb3BlcnR5CiAg\nICAgICAgICAgICAgICAoQ0xBU1NfVFJBTlNGT1JNRVJfT1BUSU9OUywgcHVp\nLmdldFByb3BlcnRpZXMoKSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgICAgICBwdWkuYWRkVHJhbnNmb3JtZXIobmV3IENsYXNzVHJhbnNmb3Jt\nZXJJbXBsKGNwLCBjdE9wdHMsCiAgICAgICAgICAgICAgICAgICAgcHVpLmdl\ndE5ld1RlbXBDbGFzc0xvYWRlcigpLCBuZXdDb25maWd1cmF0aW9uSW1wbCgp\nKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgICAgICAvLyBmYWlsIGdyYWNlZnVsbHkKICAgICAgICAgICAgICAg\nIHRyYW5zZm9ybWVyRXhjZXB0aW9uID0gZTsKICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgLy8gaWYgdGhlIEJyb2tlckltcGwgaGFzbid0IGJlZW4gc3Bl\nY2lmaWVkLCBzd2l0Y2ggdG8gdGhlCiAgICAgICAgICAgIC8vIG5vbi1maW5h\nbGl6aW5nIG9uZSwgc2luY2UgYW55dGhpbmcgY2xhaW1pbmcgdG8gYmUgYSBj\nb250YWluZXIKICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGRvaW5nIHByb3Bl\nciByZXNvdXJjZSBtYW5hZ2VtZW50LgogICAgICAgICAgICBpZiAoIUNvbmZp\nZ3VyYXRpb25zLmNvbnRhaW5zUHJvcGVydHkoQnJva2VyVmFsdWUuS0VZLAog\nICAgICAgICAgICAgICAgY3AuZ2V0UHJvcGVydGllcygpKSkgewogICAgICAg\nICAgICAgICAgY3AuYWRkUHJvcGVydHkoIm9wZW5qcGEuIiArIEJyb2tlclZh\nbHVlLktFWSwgCiAgICAgICAgICAgICAgICAgICAgZ2V0RGVmYXVsdEJyb2tl\nckFsaWFzKCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBCcm9rZXJG\nYWN0b3J5IGZhY3RvcnkgPSBnZXRCcm9rZXJGYWN0b3J5KGNwLCBwb29sVmFs\ndWUsCiAgICAgICAgICAgICAgICBwdWkuZ2V0Q2xhc3NMb2FkZXIoKSk7CiAg\nICAgICAgICAgIGlmICh0cmFuc2Zvcm1lckV4Y2VwdGlvbiAhPSBudWxsKSB7\nCiAgICAgICAgICAgICAgICBMb2cgbG9nID0gZmFjdG9yeS5nZXRDb25maWd1\ncmF0aW9uKCkuZ2V0TG9nKAogICAgICAgICAgICAgICAgICAgIE9wZW5KUEFD\nb25maWd1cmF0aW9uLkxPR19SVU5USU1FKTsKICAgICAgICAgICAgICAgIGlm\nIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgICAg\nIGxvZy53YXJuKAogICAgICAgICAgICAgICAgICAgICAgICBfbG9jLmdldCgi\ndHJhbnNmb3JtZXItcmVnaXN0cmF0aW9uLWVycm9yLWV4IiwgcHVpKSwKICAg\nICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtZXJFeGNlcHRpb24pOwog\nICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBs\nb2cud2FybigKICAgICAgICAgICAgICAgICAgICAgICAgX2xvYy5nZXQoInRy\nYW5zZm9ybWVyLXJlZ2lzdHJhdGlvbi1lcnJvciIsIHB1aSkpOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBK\nUEFGYWNhZGVIZWxwZXIudG9FbnRpdHlNYW5hZ2VyRmFjdG9yeShmYWN0b3J5\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4\nY2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoKICAgICAqIFJl\ndHVybnMgYSBkZWZhdWx0IEJyb2tlciBhbGlhcyB0byBiZSB1c2VkIHdoZW4g\nbm8gb3BlbmpwYS5Ccm9rZXJJbXBsCiAgICAgKiAgaXMgc3BlY2lmaWVkLiBU\naGlzIG1ldGhvZCBhbGxvd3MgUGVyc2lzdGVuY2VQcm92aWRlciBzdWJjbGFz\ncyB0bwogICAgICogIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGJyb2tlciBhbGlh\ncy4KICAgICAqLwogICAgcHJvdGVjdGVkIFN0cmluZyBnZXREZWZhdWx0QnJv\na2VyQWxpYXMoKSB7CiAgICAgICAgcmV0dXJuIEJyb2tlclZhbHVlLk5PTl9G\nSU5BTElaSU5HX0FMSUFTOwogICAgfQogICAgCiAgICAvKgogICAgICogUmV0\ndXJuIGEgbmV3IGluc3RhbmNlIG9mIENvbmZpZ3VyYXRpb24gc3ViY2xhc3Mg\ndXNlZCBieSBlbnRpdHkKICAgICAqIGVuaGFuY2VtZW50IGluIENsYXNzVHJh\nbnNmb3JtZXJJbXBsLiBJZiBPcGVuSlBBQ29uZmlndXJhdGlvbkltcGwKICAg\nICAqIGluc3RhbmNlIGlzIHVzZWQsIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBk\nZWNsYXJlZCBpbiBjb25maWd1cmF0aW9uCiAgICAgKiBzdWItY2xhc3Mgd2ls\nbCBub3QgYmUgcmVjb2duaXplZCBhbmQgYSB3YXJuaW5nIGlzIHBvc3RlZCBp\nbiB0aGUgbG9nLgogICAgICovCiAgICBwcm90ZWN0ZWQgT3BlbkpQQUNvbmZp\nZ3VyYXRpb24gbmV3Q29uZmlndXJhdGlvbkltcGwoKSB7CiAgICAgICAgcmV0\ndXJuIG5ldyBPcGVuSlBBQ29uZmlndXJhdGlvbkltcGwoKTsKICAgIH0KICAg\nIAogICAgLyoqCiAgICAgKiBKYXZhIEVFIDUgY2xhc3MgdHJhbnNmb3JtZXIu\nCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIENsYXNzVHJhbnNm\nb3JtZXJJbXBsCiAgICAgICAgaW1wbGVtZW50cyBDbGFzc1RyYW5zZm9ybWVy\nIHsKCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBDbGFzc0ZpbGVUcmFuc2Zvcm1l\nciBfdHJhbnM7CgogICAgICAgIHByaXZhdGUgQ2xhc3NUcmFuc2Zvcm1lcklt\ncGwoQ29uZmlndXJhdGlvblByb3ZpZGVyIGNwLCBTdHJpbmcgcHJvcHMsIAog\nICAgICAgICAgICBmaW5hbCBDbGFzc0xvYWRlciB0bXBMb2FkZXIsIE9wZW5K\nUEFDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICAgICAgY3Auc2V0SW50\nbyhjb25mKTsKICAgICAgICAgICAgLy8gdXNlIHRoZSB0bXAgbG9hZGVyIGZv\nciBldmVyeXRoaW5nCiAgICAgICAgICAgIGNvbmYuc2V0Q2xhc3NSZXNvbHZl\ncihuZXcgQ2xhc3NSZXNvbHZlcigpIHsKICAgICAgICAgICAgICAgIHB1Ymxp\nYyBDbGFzc0xvYWRlciBnZXRDbGFzc0xvYWRlcihDbGFzcyBjb250ZXh0LCAK\nICAgICAgICAgICAgICAgICAgICBDbGFzc0xvYWRlciBlbnYpIHsKICAgICAg\nICAgICAgICAgICAgICByZXR1cm4gdG1wTG9hZGVyOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uZi5zZXRSZWFk\nT25seShDb25maWd1cmF0aW9uLklOSVRfU1RBVEVfRlJFRVpJTkcpOwoKICAg\nICAgICAgICAgTWV0YURhdGFSZXBvc2l0b3J5IHJlcG9zID0gY29uZi5nZXRN\nZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpOwogICAgICAgICAgICByZXBv\ncy5zZXRSZXNvbHZlKE1ldGFEYXRhTW9kZXMuTU9ERV9NQVBQSU5HLCBmYWxz\nZSk7CiAgICAgICAgICAgIF90cmFucyA9IG5ldyBQQ0NsYXNzRmlsZVRyYW5z\nZm9ybWVyKHJlcG9zLAogICAgICAgICAgICAgICAgQ29uZmlndXJhdGlvbnMu\ncGFyc2VQcm9wZXJ0aWVzKHByb3BzKSwgdG1wTG9hZGVyKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyBieXRlW10gdHJhbnNmb3JtKENsYXNzTG9hZGVy\nIGNsLCBTdHJpbmcgbmFtZSwKICAgICAgICAgICAgQ2xhc3M8Pz4gcHJldmlv\ndXNWZXJzaW9uLCBQcm90ZWN0aW9uRG9tYWluIHBkLCBieXRlW10gYnl0ZXMp\nCiAgICAgICAgICAgIHRocm93cyBJbGxlZ2FsQ2xhc3NGb3JtYXRFeGNlcHRp\nb24gewogICAgICAgICAgICByZXR1cm4gX3RyYW5zLnRyYW5zZm9ybShjbCwg\nbmFtZSwgcHJldmlvdXNWZXJzaW9uLCBwZCwgYnl0ZXMpOwogICAgICAgIH0K\nCX0KfQo=\n","encoding":"base64"}

