{"sha":"f9d672201306e1dce1e241a75c418e5c310b8c4c","node_id":"MDQ6QmxvYjIwNjM2NDpmOWQ2NzIyMDEzMDZlMWRjZTFlMjQxYTc1YzQxOGU1YzMxMGI4YzRj","size":4690,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f9d672201306e1dce1e241a75c418e5c310b8c4c","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuYW5ub3RhdGlvbnM7DQoNCmltcG9ydCBqYXZhLnNxbC4q\nOw0KaW1wb3J0IGphdmEudXRpbC5EYXRlOw0KDQppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuKjsNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLmNvbmYuKjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwu\nKjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3Bl\nbkpQQUVudGl0eU1hbmFnZXI7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuYW5ub3RhdGlvbnMuY29tbW9uLmFwcHMuYW5ub3RB\ncHAuYW5ub3R5cGUuKjsNCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuKjsNCg0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24u\ndXRpbHMuKjsNCg0KDQoNCi8qKg0KICogVGVzdCBmb3Igc2VyaWFsaXplZCwg\nY2xvYiwgYW5kIGxvYiB0eXBlcy4NCiAqDQogKiBAYXV0aG9yIFN0ZXZlIEtp\nbQ0KICovDQpwdWJsaWMgY2xhc3MgVGVzdFNlcmlhbGl6ZWRMb2JzIGV4dGVu\nZHMgQW5ub3RhdGlvblRlc3RDYXNlDQp7DQoNCglwdWJsaWMgVGVzdFNlcmlh\nbGl6ZWRMb2JzKFN0cmluZyBuYW1lKQ0KCXsNCgkJc3VwZXIobmFtZSwgImFu\nbm90YXRpb25jYWN0dXNhcHAiKTsNCgl9DQoNCiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBEYXRlIERBVEUgPSBuZXcgRGF0ZSgpOw0KDQogICAgcHVibGlj\nIHZvaWQgc2V0VXAoKSB7DQogICAgICAgIGRlbGV0ZUFsbChBbm5vVGVzdDEu\nY2xhc3MpOw0KICAgIH0NCg0KICAgIC8vIFNlcmlhbGl6ZWQgZmllbGRzIG5v\ndCBiZWluZyByZWFkIHByb3Blcmx5DQogICAgcHVibGljIHZvaWQgdGVzdFNl\ncmlhbGl6ZWQoKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVt\nID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7DQogICAgICAgIHN0YXJ0VHgoZW0pOw0KICAgICAgICBBbm5vVGVzdDEg\ncGMxID0gbmV3IEFubm9UZXN0MSgxKTsNCiAgICAgICAgQW5ub1Rlc3QxIHBj\nMiA9IG5ldyBBbm5vVGVzdDEoMik7DQogICAgICAgIHBjMS5zZXRTZXJpYWxp\nemVkKCJBU0RBU0QiKTsNCiAgICAgICAgcGMyLnNldFNlcmlhbGl6ZWQoREFU\nRSk7DQogICAgICAgIGVtLnBlcnNpc3QocGMxKTsNCiAgICAgICAgZW0ucGVy\nc2lzdChwYzIpOw0KICAgICAgICBlbmRUeChlbSk7DQogICAgICAgIGVuZEVt\nKGVtKTsNCg0KICAgICAgICBlbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBj\ndXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYzEgPSBlbS5maW5k\nKEFubm9UZXN0MS5jbGFzcywgZW0uZ2V0T2JqZWN0SWQocGMxKSk7DQogICAg\nICAgIHBjMiA9IGVtLmZpbmQoQW5ub1Rlc3QxLmNsYXNzLCBlbS5nZXRPYmpl\nY3RJZChwYzIpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJBU0RBU0QiLCBw\nYzEuZ2V0U2VyaWFsaXplZCgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKERB\nVEUsIHBjMi5nZXRTZXJpYWxpemVkKCkpOw0KICAgICAgICBlbmRFbShlbSk7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEJsb2IoKQ0KICAgICAg\nICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1h\nbmFnZXIgZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgoZW0pOw0KDQogICAgICAg\nIEFubm9UZXN0MSBwYyA9IG5ldyBBbm5vVGVzdDEoMSk7DQogICAgICAgIHBj\nLnNldEJsb2IoIk5vdCBOdWxsIi5nZXRCeXRlcygpKTsNCiAgICAgICAgZW0u\ncGVyc2lzdChwYyk7DQogICAgICAgIGVuZFR4KGVtKTsNCiAgICAgICAgZW5k\nRW0oZW0pOw0KDQogICAgICAgIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYyA9IGVtLmZp\nbmQoQW5ub1Rlc3QxLmNsYXNzLCBlbS5nZXRPYmplY3RJZChwYykpOw0KICAg\nICAgICBhc3NlcnRFcXVhbHMoIk5vdCBOdWxsIiwgbmV3IFN0cmluZyhwYy5n\nZXRCbG9iKCkpKTsNCiAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gKENvbm5l\nY3Rpb24pIGVtLmdldENvbm5lY3Rpb24oKTsNCiAgICAgICAgU3RhdGVtZW50\nIHN0bW50ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTsNCiAgICAgICAgUmVz\ndWx0U2V0IHJzID0gc3RtbnQuZXhlY3V0ZVF1ZXJ5KCJTRUxFQ1QgQkxPQlZB\nTCBGUk9NIEFOTk9URVNUMSAiDQogICAgICAgICAgICArICJXSEVSRSBQSyA9\nIDEiKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShycy5uZXh0KCkpOw0KDQogICAg\nICAgLyoqIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3Vy\nYXRpb24pIGVtLmdldENvbmZpZ3VyYXRpb24oKTsNCiAgICAgICAgREJEaWN0\naW9uYXJ5IGRpY3QgPSBjb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7\nDQogICAgICAgIGlmIChkaWN0LnVzZUdldEJ5dGVzRm9yQmxvYnMpDQogICAg\nICAgICAgICBycy5nZXRCeXRlcygxKTsNCiAgICAgICAgZWxzZSBpZiAoZGlj\ndC51c2VHZXRPYmplY3RGb3JCbG9icykNCiAgICAgICAgICAgIHJzLmdldE9i\namVjdCgxKTsNCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBCbG9iIGJs\nb2IgPSBycy5nZXRCbG9iKDEpOw0KICAgICAgICAgICAgYmxvYi5nZXRCeXRl\ncygxTCwgKGludCkgYmxvYi5sZW5ndGgoKSk7DQogICAgICAgIH0NCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJOb3QgTnVsbCIsIG5ldyBTdHJpbmcocGMuZ2V0\nQmxvYigpKSk7DQoNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHJzLmNs\nb3NlKCk7DQogICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7DQog\nICAgICAgIH0NCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHN0bW50LmNs\nb3NlKCk7DQogICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7DQog\nICAgICAgIH0NCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGNvbm4uY2xv\nc2UoKTsNCiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHsNCiAg\nICAgICAgfSoqLw0KICAgICAgICBlbmRFbShlbSk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgdGVzdENsb2IoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0\naW9uIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPShPcGVu\nSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgc3RhcnRUeChlbSk7DQoNCiAgICAgICAgQW5ub1Rlc3QxIHBjID0g\nbmV3IEFubm9UZXN0MSgxKTsNCiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9\nIG5ldyBTdHJpbmdCdWZmZXIoKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCAxMDAwOyBpKyspDQogICAgICAgICAgICBidWYuYXBwZW5kKChjaGFy\nKSAoJ2EnICsgKGkgJSAyNCkpKTsNCiAgICAgICAgcGMuc2V0Q2xvYihidWYu\ndG9TdHJpbmcoKSk7DQogICAgICAgIGVtLnBlcnNpc3QocGMpOw0KICAgICAg\nICBlbmRUeChlbSk7DQogICAgICAgIGVuZEVtKGVtKTsNCg0KICAgICAgICBl\nbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdl\ncigpOw0KICAgICAgICBwYyA9IGVtLmZpbmQoQW5ub1Rlc3QxLmNsYXNzLGVt\nLmdldE9iamVjdElkKHBjKSk7DQogICAgICAgIFN0cmluZyBzdHIgPSBwYy5n\nZXRDbG9iKCk7DQogICAgICAgIGFzc2VydEVxdWFscygxMDAwLCBzdHIubGVu\nZ3RoKCkpOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN0ci5sZW5n\ndGgoKTsgaSsrKQ0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCdhJyArIChp\nICUgMjQpLCBzdHIuY2hhckF0KGkpKTsNCiAgICAgICAgZW5kRW0oZW0pOw0K\nICAgIH0NCn0NCg==\n","encoding":"base64"}

