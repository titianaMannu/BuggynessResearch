{"sha":"e4645c73a700acfbf66c15cd10a56795b06ee270","node_id":"MDQ6QmxvYjIwNjM2NDplNDY0NWM3M2E3MDBhY2ZiZjY2YzE1Y2QxMGE1Njc5NWIwNmVlMjcw","size":19406,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e4645c73a700acfbf66c15cd10a56795b06ee270","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY2FsbGJh\nY2tzOwoKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwu\nSGFzaFNldDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5Sb2xsYmFja0V4Y2VwdGlv\nbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3Bl\nbkpQQVBlcnNpc3RlbmNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmNhbGxiYWNrcy5FeGNlcHRpb25zRnJvbUNhbGxiYWNrc0Vu\ndGl0eS5DYWxsYmFja1Rlc3RFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlBlcnNpc3RlbmNl\nQ2FwYWJsZTsKCi8qKgogKiBUZXN0cyBhZ2FpbnN0IEpQQSBzZWN0aW9uIDMu\nNSdzIGRlc2NyaXB0aW9uIG9mIGNhbGxiYWNrIGV4Y2VwdGlvbiBoYW5kbGlu\nZy4KICovCnB1YmxpYyBjbGFzcyBUZXN0RXhjZXB0aW9uc0Zyb21DYWxsYmFj\na3MKICAgIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoKICAgIHB1Ymxp\nYyBzdGF0aWMgYm9vbGVhbiB0ZXN0UnVubmluZyA9IGZhbHNlOwoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgU2V0\nIG5lZWRFbmhhbmNlbWVudCA9IG5ldyBIYXNoU2V0KCk7CiAgICAgICAgbmVl\nZEVuaGFuY2VtZW50LmFkZCgKICAgICAgICAgICAgInRlc3RQb3N0VXBkYXRl\nRXhjZXB0aW9uRHVyaW5nRmx1c2hXaXRoTmV3SW5zdGFuY2UiKTsKICAgICAg\nICBuZWVkRW5oYW5jZW1lbnQuYWRkKAogICAgICAgICAgICAidGVzdFByZVVw\nZGF0ZUV4Y2VwdGlvbkR1cmluZ0ZsdXNoV2l0aEV4aXN0aW5nRmx1c2hlZElu\nc3RhbmNlIik7CiAgICAgICAgbmVlZEVuaGFuY2VtZW50LmFkZCgKICAgICAg\nICAgICAgInRlc3RQcmVVcGRhdGVFeGNlcHRpb25EdXJpbmdDb21taXRXaXRo\nRXhpc3RpbmdGbHVzaGVkSW5zdGFuY2UiKTsKICAgICAgICBuZWVkRW5oYW5j\nZW1lbnQuYWRkKAogICAgICAgICAgICAidGVzdFBvc3RVcGRhdGVFeGNlcHRp\nb25EdXJpbmdGbHVzaFdpdGhFeGlzdGluZ0ZsdXNoZWRJbnN0YW5jZSIpOwog\nICAgICAgIG5lZWRFbmhhbmNlbWVudC5hZGQoCiAgICAgICAgICAgICJ0ZXN0\nUG9zdFVwZGF0ZUV4Y2VwdGlvbkR1cmluZ0NvbW1pdFdpdGhFeGlzdGluZ0Zs\ndXNoZWRJbnN0YW5jZSIpOwogICAgICAgIGlmICghUGVyc2lzdGVuY2VDYXBh\nYmxlLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oCiAgICAgICAgICAgIEV4Y2Vw\ndGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5LmNsYXNzKQogICAgICAgICAgICAm\nJiBuZWVkRW5oYW5jZW1lbnQuY29udGFpbnMoZ2V0TmFtZSgpKSkKICAgICAg\nICAgICAgLy8gYWN0dWFsbHksIHdlIHJlYWxseSBvbmx5IG5lZWQgcmVkZWYK\nICAgICAgICAgICAgZmFpbCgidGhpcyB0ZXN0IG1ldGhvZCBkb2VzIG5vdCB3\nb3JrIHdpdGhvdXQgZW5oYW5jZW1lbnQiKTsKCiAgICAgICAgc2V0VXAoRXhj\nZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkuY2xhc3MsIENMRUFSX1RBQkxF\nUyk7CiAgICAgICAgdGVzdFJ1bm5pbmcgPSB0cnVlOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgdGVhckRvd24oKSB0aHJvd3MgRXhj\nZXB0aW9uIHsKICAgICAgICB0ZXN0UnVubmluZyA9IGZhbHNlOwogICAgICAg\nIHN1cGVyLnRlYXJEb3duKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndFByZVBlcnNpc3RFeGNlcHRpb24oKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNG\ncm9tQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zyb21DYWxs\nYmFja3NFbnRpdHkoKTsKICAgICAgICBvLnNldFRocm93T25QcmVQZXJzaXN0\nKHRydWUpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGVtLnBlcnNpc3Qo\nbyk7CiAgICAgICAgICAgIGZhaWwoInBlcnNpc3Qgc2hvdWxkIGhhdmUgZmFp\nbGVkIik7CiAgICAgICAgfSBjYXRjaCAoQ2FsbGJhY2tUZXN0RXhjZXB0aW9u\nIGN0ZSkgewogICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBzaG91bGQgYmUg\nc3RpbGwgYWN0aXZlLCBidXQgbWFya2VkIGZvciByb2xsYmFjawogICAgICAg\nICAgICBhc3NlcnRUcnVlKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUo\nKSk7CiAgICAgICAgICAgIGFzc2VydFRydWUoZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5nZXRSb2xsYmFja09ubHkoKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgaWYgKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkK\nICAgICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2so\nKTsKICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdFByZVBlcnNpc3RFeGNlcHRpb25Pbk1lcmdl\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBv\nID0gbmV3IEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAg\nICAgby5zZXRUaHJvd09uUHJlUGVyc2lzdCh0cnVlKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICBlbS5tZXJnZShvKTsKICAgICAgICAgICAgZmFpbCgi\nbWVyZ2Ugc2hvdWxkIGhhdmUgZmFpbGVkIik7CiAgICAgICAgfSBjYXRjaCAo\nQ2FsbGJhY2tUZXN0RXhjZXB0aW9uIGN0ZSkgewogICAgICAgICAgICAvLyB0\ncmFuc2FjdGlvbiBzaG91bGQgYmUgc3RpbGwgYWN0aXZlLCBidXQgbWFya2Vk\nIGZvciByb2xsYmFjawogICAgICAgICAgICBhc3NlcnRUcnVlKGVtLmdldFRy\nYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSk7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUoZW0uZ2V0VHJhbnNhY3Rpb24oKS5nZXRSb2xsYmFja09ubHkoKSk7CiAg\nICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVtLmdldFRyYW5z\nYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFBvc3RQ\nZXJzaXN0RXhjZXB0aW9uRHVyaW5nRmx1c2goKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2Vw\ndGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zy\nb21DYWxsYmFja3NFbnRpdHkoKTsKICAgICAgICBvLnNldFRocm93T25Qb3N0\nUGVyc2lzdCh0cnVlKTsKICAgICAgICBlbS5wZXJzaXN0KG8pOwogICAgICAg\nIG11dGF0ZUFuZEZsdXNoKGVtLCBvKTsKICAgIH0KCiAgICBwcml2YXRlIHZv\naWQgbXV0YXRlQW5kRmx1c2goRW50aXR5TWFuYWdlciBlbSwKICAgICAgICBF\neGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvKSB7CiAgICAgICAgby5z\nZXRTdHJpbmdGaWVsZCgiZm9vIik7CiAgICAgICAgZmx1c2goZW0pOwogICAg\nfQoKICAgIHByaXZhdGUgdm9pZCBmbHVzaChFbnRpdHlNYW5hZ2VyIGVtKSB7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0uZmx1c2goKTsKICAgICAg\nICAgICAgZmFpbCgiZmx1c2ggc2hvdWxkIGhhdmUgZmFpbGVkIik7CiAgICAg\nICAgfSBjYXRjaCAoQ2FsbGJhY2tUZXN0RXhjZXB0aW9uIGN0ZSkgewogICAg\nICAgICAgICAvLyB0cmFuc2FjdGlvbiBzaG91bGQgYmUgc3RpbGwgYWN0aXZl\nLCBidXQgbWFya2VkIGZvciByb2xsYmFjawogICAgICAgICAgICBhc3NlcnRU\ncnVlKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSk7CiAgICAgICAg\nICAgIGFzc2VydFRydWUoZW0uZ2V0VHJhbnNhY3Rpb24oKS5nZXRSb2xsYmFj\na09ubHkoKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYg\nKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAg\nICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdFBvc3RQZXJzaXN0RXhjZXB0aW9uRHVyaW5nQ29tbWl0KCkgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvID0gbmV3\nIEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAgICAgby5z\nZXRUaHJvd09uUG9zdFBlcnNpc3QodHJ1ZSk7CiAgICAgICAgZW0ucGVyc2lz\ndChvKTsKICAgICAgICBtdXRhdGVBbmRDb21taXQoZW0sIG8pOwogICAgfQoK\nICAgIHByaXZhdGUgdm9pZCBtdXRhdGVBbmRDb21taXQoRW50aXR5TWFuYWdl\nciBlbSwKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBv\nKSB7CiAgICAgICAgby5zZXRTdHJpbmdGaWVsZCgiZm9vIik7CiAgICAgICAg\nY29tbWl0KGVtKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgY29tbWl0KEVu\ndGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgICAgICBmYWls\nKCJjb21taXQgc2hvdWxkIGhhdmUgZmFpbGVkIik7CiAgICAgICAgfSBjYXRj\naCAoUm9sbGJhY2tFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKENhbGxiYWNrVGVzdEV4Y2VwdGlvbi5jbGFzcywKICAgICAgICAg\nICAgICAgIHJlLmdldENhdXNlKCkuZ2V0Q2xhc3MoKSk7CgogICAgICAgICAg\nICAvLyB0cmFuc2FjdGlvbiBzaG91bGQgYmUgcm9sbGVkIGJhY2sgYXQgdGhp\ncyBwb2ludAogICAgICAgICAgICBhc3NlcnRGYWxzZShlbS5nZXRUcmFuc2Fj\ndGlvbigpLmlzQWN0aXZlKCkpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAg\nICAgICAgIGlmIChlbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpCiAg\nICAgICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7\nCiAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RQcmVQZXJzaXN0RXhjZXB0aW9uRHVyaW5nRmx1\nc2hXaXRoTmV3Rmx1c2hlZEluc3RhbmNlKCkgewogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBFeGNlcHRp\nb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvID0gbmV3IEV4Y2VwdGlvbnNGcm9t\nQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAgICAgZW0ucGVyc2lzdChvKTsKICAg\nICAgICBlbS5mbHVzaCgpOwogICAgICAgIG8uc2V0VGhyb3dPblByZVBlcnNp\nc3QodHJ1ZSk7CiAgICAgICAgLy8gc2hvdWxkIHBhc3M7IHByZS1wZXJzaXN0\nIHNob3VsZCBub3QgYmUgdHJpZ2dlcmVkCiAgICAgICAgby5zZXRTdHJpbmdG\naWVsZCgiZm9vIik7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFByZVBlcnNpc3RFeGNlcHRp\nb25EdXJpbmdDb21taXRXaXRoTmV3Rmx1c2hlZEluc3RhbmNlKCkgewogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvID0gbmV3IEV4\nY2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAgICAgZW0ucGVy\nc2lzdChvKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIG8uc2V0VGhy\nb3dPblByZVBlcnNpc3QodHJ1ZSk7CiAgICAgICAgLy8gc2hvdWxkIHBhc3M7\nIHByZS1wZXJzaXN0IHNob3VsZCBub3QgYmUgdHJpZ2dlcmVkCiAgICAgICAg\nby5zZXRTdHJpbmdGaWVsZCgiZm9vIik7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0UGVyc2lzdEV4Y2VwdGlvbkR1cmlu\nZ0ZsdXNoV2l0aE5ld0ZsdXNoZWRJbnN0YW5jZSgpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhj\nZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25z\nRnJvbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAgIGVtLnBlcnNpc3Qobyk7\nCiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBvLnNldFRocm93T25Qb3N0\nUGVyc2lzdCh0cnVlKTsKICAgICAgICAvLyBzaG91bGQgcGFzczsgcG9zdC1w\nZXJzaXN0IHNob3VsZCBub3QgYmUgdHJpZ2dlcmVkCiAgICAgICAgby5zZXRT\ndHJpbmdGaWVsZCgiZm9vIik7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFBvc3RQZXJzaXN0\nRXhjZXB0aW9uRHVyaW5nQ29tbWl0V2l0aE5ld0ZsdXNoZWRJbnN0YW5jZSgp\nIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9\nIG5ldyBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAg\nIGVtLnBlcnNpc3Qobyk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBv\nLnNldFRocm93T25Qb3N0UGVyc2lzdCh0cnVlKTsKICAgICAgICAvLyBzaG91\nbGQgcGFzczsgcG9zdC1wZXJzaXN0IHNob3VsZCBub3QgYmUgdHJpZ2dlcmVk\nCiAgICAgICAgby5zZXRTdHJpbmdGaWVsZCgiZm9vIik7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcmVVcGRhdGVFeGNlcHRp\nb25XaXRoTmV3SW5zdGFuY2UoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNGcm9t\nQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zyb21DYWxsYmFj\na3NFbnRpdHkoKTsKICAgICAgICBvLnNldFRocm93T25QcmVVcGRhdGUodHJ1\nZSk7CiAgICAgICAgZW0ucGVyc2lzdChvKTsKICAgICAgICBvLnNldFN0cmlu\nZ0ZpZWxkKCJmb28iKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdFBvc3RVcGRhdGVFeGNlcHRpb25EdXJpbmdGbHVzaFdpdGhO\nZXdJbnN0YW5jZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zyb21DYWxsYmFj\na3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0\neSgpOwogICAgICAgIG8uc2V0VGhyb3dPblBvc3RVcGRhdGUodHJ1ZSk7CiAg\nICAgICAgZW0ucGVyc2lzdChvKTsKICAgICAgICBvLnNldFN0cmluZ0ZpZWxk\nKCJmb28iKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UG9zdFVwZGF0ZUV4Y2VwdGlvbkR1\ncmluZ0NvbW1pdFdpdGhOZXdJbnN0YW5jZSgpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0\naW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJv\nbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAgIG8uc2V0VGhyb3dPblBvc3RV\ncGRhdGUodHJ1ZSk7CiAgICAgICAgZW0ucGVyc2lzdChvKTsKICAgICAgICBv\nLnNldFN0cmluZ0ZpZWxkKCJmb28iKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdFByZVVwZGF0ZUV4Y2VwdGlvbkR1cmluZ0Zs\ndXNoV2l0aE5ld0ZsdXNoZWRJbnN0YW5jZSgpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0\naW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJv\nbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAgIGVtLnBlcnNpc3Qobyk7CiAg\nICAgICAgZW0uZmx1c2goKTsKICAgICAgICBvLnNldFRocm93T25QcmVVcGRh\ndGUodHJ1ZSk7CiAgICAgICAgbXV0YXRlQW5kRmx1c2goZW0sIG8pOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcmVVcGRhdGVFeGNlcHRpb25EdXJp\nbmdDb21taXRXaXRoTmV3Rmx1c2hlZEluc3RhbmNlKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBF\neGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvID0gbmV3IEV4Y2VwdGlv\nbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAgICAgZW0ucGVyc2lzdChv\nKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIG8uc2V0VGhyb3dPblBy\nZVVwZGF0ZSh0cnVlKTsKICAgICAgICBtdXRhdGVBbmRDb21taXQoZW0sIG8p\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0VXBkYXRlRXhjZXB0\naW9uRHVyaW5nRmx1c2hXaXRoTmV3Rmx1c2hlZEluc3RhbmNlKCkgewogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvID0gbmV3IEV4\nY2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAgICAgZW0ucGVy\nc2lzdChvKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIG8uc2V0VGhy\nb3dPblBvc3RVcGRhdGUodHJ1ZSk7CiAgICAgICAgbXV0YXRlQW5kRmx1c2go\nZW0sIG8pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0VXBkYXRl\nRXhjZXB0aW9uRHVyaW5nQ29tbWl0V2l0aE5ld0ZsdXNoZWRJbnN0YW5jZSgp\nIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9\nIG5ldyBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAg\nIGVtLnBlcnNpc3Qobyk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBv\nLnNldFRocm93T25Qb3N0VXBkYXRlKHRydWUpOwogICAgICAgIG11dGF0ZUFu\nZENvbW1pdChlbSwgbyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFBy\nZVVwZGF0ZUV4Y2VwdGlvbkR1cmluZ0ZsdXNoV2l0aEV4aXN0aW5nSW5zdGFu\nY2UoKSB7CiAgICAgICAgT2JqZWN0IG9pZCA9IGluc2VydCgibmV3IGluc3Rh\nbmNlIik7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0\neSBvID0KICAgICAgICAgICAgZW0uZmluZChFeGNlcHRpb25zRnJvbUNhbGxi\nYWNrc0VudGl0eS5jbGFzcywgb2lkKTsKICAgICAgICBvLnNldFRocm93T25Q\ncmVVcGRhdGUodHJ1ZSk7CiAgICAgICAgbXV0YXRlQW5kRmx1c2goZW0sIG8p\nOwogICAgfQoKICAgIHByaXZhdGUgT2JqZWN0IGluc2VydChTdHJpbmcgcykg\newogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvID0g\nbmV3IEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAgICAg\nby5zZXRTdHJpbmdGaWVsZChzKTsKICAgICAgICBlbS5wZXJzaXN0KG8pOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgICAgICByZXR1cm4gby5nZXRJZCgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RQcmVVcGRhdGVFeGNlcHRpb25EdXJpbmdD\nb21taXRXaXRoRXhpc3RpbmdJbnN0YW5jZSgpIHsKICAgICAgICBPYmplY3Qg\nb2lkID0gaW5zZXJ0KCJuZXcgaW5zdGFuY2UiKTsKCiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2Vw\ndGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPQogICAgICAgICAgICBlbS5m\naW5kKEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5LmNsYXNzLCBvaWQp\nOwogICAgICAgIG8uc2V0VGhyb3dPblByZVVwZGF0ZSh0cnVlKTsKICAgICAg\nICBtdXRhdGVBbmRDb21taXQoZW0sIG8pOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RQb3N0VXBkYXRlRXhjZXB0aW9uRHVyaW5nRmx1c2hXaXRoRXhp\nc3RpbmdJbnN0YW5jZSgpIHsKICAgICAgICBPYmplY3Qgb2lkID0gaW5zZXJ0\nKCJuZXcgaW5zdGFuY2UiKTsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNGcm9tQ2Fs\nbGJhY2tzRW50aXR5IG8gPQogICAgICAgICAgICBlbS5maW5kKEV4Y2VwdGlv\nbnNGcm9tQ2FsbGJhY2tzRW50aXR5LmNsYXNzLCBvaWQpOwogICAgICAgIG8u\nc2V0VGhyb3dPblBvc3RVcGRhdGUodHJ1ZSk7CiAgICAgICAgbXV0YXRlQW5k\nRmx1c2goZW0sIG8pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0\nVXBkYXRlRXhjZXB0aW9uRHVyaW5nQ29tbWl0V2l0aEV4aXN0aW5nSW5zdGFu\nY2UoKSB7CiAgICAgICAgT2JqZWN0IG9pZCA9IGluc2VydCgibmV3IGluc3Rh\nbmNlIik7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0\neSBvID0KICAgICAgICAgICAgZW0uZmluZChFeGNlcHRpb25zRnJvbUNhbGxi\nYWNrc0VudGl0eS5jbGFzcywgb2lkKTsKICAgICAgICBvLnNldFRocm93T25Q\nb3N0VXBkYXRlKHRydWUpOwogICAgICAgIG11dGF0ZUFuZENvbW1pdChlbSwg\nbyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFByZVVwZGF0ZUV4Y2Vw\ndGlvbkR1cmluZ0ZsdXNoV2l0aEV4aXN0aW5nRmx1c2hlZEluc3RhbmNlKCkg\newogICAgICAgIE9iamVjdCBvaWQgPSBpbnNlcnQoIm5ldyBpbnN0YW5jZSIp\nOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9\nCiAgICAgICAgICAgIGVtLmZpbmQoRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NF\nbnRpdHkuY2xhc3MsIG9pZCk7CiAgICAgICAgby5zZXRTdHJpbmdGaWVsZCgi\nZm9vIik7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBvLnNldFRocm93\nT25QcmVVcGRhdGUodHJ1ZSk7CiAgICAgICAgLy8gdGhlcmUncyBubyBhZGRp\ndGlvbmFsIGZsdXNoIHdvcms7IHNob3VsZCBub3QgcmUtaW52b2tlIHRoZSBj\nYWxsYmFjawogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcmVVcGRhdGVFeGNlcHRpb25EdXJp\nbmdDb21taXRXaXRoRXhpc3RpbmdGbHVzaGVkSW5zdGFuY2UoKXsKICAgICAg\nICBPYmplY3Qgb2lkID0gaW5zZXJ0KCJuZXcgaW5zdGFuY2UiKTsKCiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAg\nICAgIEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPQogICAgICAg\nICAgICBlbS5maW5kKEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5LmNs\nYXNzLCBvaWQpOwogICAgICAgIG8uc2V0U3RyaW5nRmllbGQoImZvbyIpOwog\nICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgby5zZXRUaHJvd09uUHJlVXBk\nYXRlKHRydWUpOwogICAgICAgIC8vIHRoZXJlJ3Mgbm8gYWRkaXRpb25hbCBm\nbHVzaCB3b3JrOyBzaG91bGQgbm90IHJlLWludm9rZSB0aGUgY2FsbGJhY2sK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFBvc3RV\ncGRhdGVFeGNlcHRpb25EdXJpbmdGbHVzaFdpdGhFeGlzdGluZ0ZsdXNoZWRJ\nbnN0YW5jZSgpewogICAgICAgIE9iamVjdCBvaWQgPSBpbnNlcnQoIm5ldyBp\nbnN0YW5jZSIpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NF\nbnRpdHkgbyA9CiAgICAgICAgICAgIGVtLmZpbmQoRXhjZXB0aW9uc0Zyb21D\nYWxsYmFja3NFbnRpdHkuY2xhc3MsIG9pZCk7CiAgICAgICAgby5zZXRTdHJp\nbmdGaWVsZCgiZm9vIik7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBv\nLnNldFRocm93T25Qb3N0VXBkYXRlKHRydWUpOwogICAgICAgIC8vIG5vIG11\ndGF0aW9uczsgc2hvdWxkIG5vdCB0cmlnZ2VyIGEgUG9zdFVwZGF0ZQogICAg\nICAgIGVtLmZsdXNoKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RQb3N0VXBkYXRlRXhjZXB0aW9uRHVyaW5nQ29tbWl0V2l0\naEV4aXN0aW5nRmx1c2hlZEluc3RhbmNlKCkKICAgIHsKICAgICAgICBPYmpl\nY3Qgb2lkID0gaW5zZXJ0KCJuZXcgaW5zdGFuY2UiKTsKCiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4\nY2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPQogICAgICAgICAgICBl\nbS5maW5kKEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5LmNsYXNzLCBv\naWQpOwogICAgICAgIG8uc2V0U3RyaW5nRmllbGQoImZvbyIpOwogICAgICAg\nIGVtLmZsdXNoKCk7CiAgICAgICAgLy8gbm8gbXV0YXRpb25zOyBzaG91bGQg\nbm90IHRyaWdnZXIgYSBQb3N0VXBkYXRlCiAgICAgICAgby5zZXRUaHJvd09u\nUG9zdFVwZGF0ZSh0cnVlKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdFBvc3RMb2FkRXhjZXB0aW9uKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBF\neGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvID0gbmV3IEV4Y2VwdGlv\nbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAgICAgby5zZXRUaHJvd09u\nUG9zdExvYWQodHJ1ZSk7CiAgICAgICAgZW0ucGVyc2lzdChvKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIE9iamVj\ndCBvaWQgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChlbSkuZ2V0T2JqZWN0\nSWQobyk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAKICAgICAgICBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGVtLmZpbmQoRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkuY2xh\nc3MsIG9pZCk7CiAgICAgICAgICAgIGZhaWwoImZpbmQgc2hvdWxkIGhhdmUg\nZmFpbGVkIik7CiAgICAgICAgfSBjYXRjaCAoQ2FsbGJhY2tUZXN0RXhjZXB0\naW9uIGN0ZSkgewogICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBzaG91bGQg\nYmUgYWN0aXZlIGJ1dCBtYXJrZWQgZm9yIHJvbGxiYWNrCiAgICAgICAgICAg\nIGFzc2VydFRydWUoZW0uZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgpKTsK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShlbS5nZXRUcmFuc2FjdGlvbigpLmdl\ndFJvbGxiYWNrT25seSgpKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICBpZiAoZW0uZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgpKQogICAg\nICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwog\nICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0UHJlRGVsZXRlRXhjZXB0aW9uKCkgewogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvID0gbmV3IEV4Y2Vw\ndGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAgICAgZW0ucGVyc2lz\ndChvKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIG8uc2V0VGhyb3dP\nblByZVJlbW92ZSh0cnVlKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBl\nbS5yZW1vdmUobyk7CiAgICAgICAgfSBjYXRjaCAoQ2FsbGJhY2tUZXN0RXhj\nZXB0aW9uIGN0ZSkgewogICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBzaG91\nbGQgYmUgYWN0aXZlIGJ1dCBtYXJrZWQgZm9yIHJvbGxiYWNrCiAgICAgICAg\nICAgIGFzc2VydFRydWUoZW0uZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgp\nKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShlbS5nZXRUcmFuc2FjdGlvbigp\nLmdldFJvbGxiYWNrT25seSgpKTsKICAgICAgICB9IGZpbmFsbHkgewogICAg\nICAgICAgICBpZiAoZW0uZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgpKQog\nICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygp\nOwogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0KICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0UG9zdERlbGV0ZUV4Y2VwdGlvbkR1cmluZ0Zs\ndXNoKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0\neSBvID0gbmV3IEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAg\nICAgICAgZW0ucGVyc2lzdChvKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAg\nICAgIG8uc2V0VGhyb3dPblBvc3RSZW1vdmUodHJ1ZSk7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZW0ucmVtb3ZlKG8pOwogICAgICAgIH0gY2F0Y2gg\nKENhbGxiYWNrVGVzdEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgZW0uY2xv\nc2UoKTsKICAgICAgICAgICAgZmFpbCgiUG9zdFJlbW92ZSBpcyBiZWluZyBj\nYWxsZWQgdG9vIHNvb24gKGJlZm9yZSBTUUwgaXMgaXNzdWVkKSIpOwogICAg\nICAgIH0KICAgICAgICBmbHVzaChlbSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdFBvc3REZWxldGVFeGNlcHRpb25EdXJpbmdDb21taXQoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcg\nRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkoKTsKICAgICAgICBlbS5w\nZXJzaXN0KG8pOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgby5zZXRU\naHJvd09uUG9zdFJlbW92ZSh0cnVlKTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBlbS5yZW1vdmUobyk7CiAgICAgICAgfSBjYXRjaCAoQ2FsbGJhY2tU\nZXN0RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5yb2xsYmFjaygpOwogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAg\nICAgICAgICBmYWlsKCJQb3N0UmVtb3ZlIGlzIGJlaW5nIGNhbGxlZCB0b28g\nc29vbiAoYmVmb3JlIFNRTCBpcyBpc3N1ZWQpIik7CiAgICAgICAgfQogICAg\nICAgIGNvbW1pdChlbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFBy\nZURlbGV0ZUV4Y2VwdGlvbkRvdWJsZURlbGV0ZSgpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhj\nZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25z\nRnJvbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAgIGVtLnBlcnNpc3Qobyk7\nCiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICAvLyB0aGlzIHNob3VsZCBw\nYXNzCiAgICAgICAgZW0ucmVtb3ZlKG8pOwogICAgICAgIGVtLmZsdXNoKCk7\nCiAgICAgICAgby5zZXRUaHJvd09uUHJlUmVtb3ZlKHRydWUpOwogICAgICAg\nIC8vIHRoaXMgc2hvdWQgYWxzbyBwYXNzOyBubyB3b3JrIHRvIGRvIGZvciBk\nZWxldGUKICAgICAgICBlbS5yZW1vdmUobyk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0RGVsZXRlRXhjZXB0aW9uRHVy\naW5nRmx1c2hEb3VibGVEZWxldGUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNG\ncm9tQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zyb21DYWxs\nYmFja3NFbnRpdHkoKTsKICAgICAgICBlbS5wZXJzaXN0KG8pOwogICAgICAg\nIGVtLmZsdXNoKCk7CiAgICAgICAgLy8gdGhpcyBzaG91bGQgcGFzcwogICAg\nICAgIGVtLnJlbW92ZShvKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAg\nIG8uc2V0VGhyb3dPblBvc3RSZW1vdmUodHJ1ZSk7CiAgICAgICAgLy8gdGhp\ncyBzaG91ZCBhbHNvIHBhc3M7IG5vIHdvcmsgdG8gZG8gZm9yIGRlbGV0ZQog\nICAgICAgIGVtLnJlbW92ZShvKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UG9zdERlbGV0\nZUV4Y2VwdGlvbkR1cmluZ0NvbW1pdERvdWJsZURlbGV0ZSgpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNl\ncHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAgIGVtLnBlcnNp\nc3Qobyk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICAvLyB0aGlzIHNo\nb3VsZCBwYXNzCiAgICAgICAgZW0ucmVtb3ZlKG8pOwogICAgICAgIGVtLmZs\ndXNoKCk7CiAgICAgICAgby5zZXRUaHJvd09uUG9zdFJlbW92ZSh0cnVlKTsK\nICAgICAgICAvLyB0aGlzIHNob3VkIGFsc28gcGFzczsgbm8gd29yayB0byBk\nbyBmb3IgZGVsZXRlCiAgICAgICAgZW0ucmVtb3ZlKG8pOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KfQo=\n","encoding":"base64"}

