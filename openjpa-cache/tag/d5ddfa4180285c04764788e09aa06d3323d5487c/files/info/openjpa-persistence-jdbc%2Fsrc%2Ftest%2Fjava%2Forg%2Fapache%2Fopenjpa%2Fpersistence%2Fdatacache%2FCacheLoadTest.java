{"sha":"e60b35d07e8b14483c8d3f97624fd428742d408e","node_id":"MDQ6QmxvYjIwNjM2NDplNjBiMzVkMDdlOGIxNDQ4M2M4ZDNmOTc2MjRmZDQyODc0MmQ0MDhl","size":5740,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e60b35d07e8b14483c8d3f97624fd428742d408e","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZGF0YWNhY2hlOw0KDQppbXBvcnQgamF2YS51dGlsLkFy\ncmF5TGlzdDsNCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsNCmltcG9y\ndCBqYXZhLnV0aWwuSGFzaE1hcDsNCmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0\nb3I7DQppbXBvcnQgamF2YS51dGlsLk1hcDsNCmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOw0KaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5Ow0KDQoNCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNhY2hlLmNvbW1vbi5hcHBz\nLkF0dGFjaEE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmRhdGFjYWNoZS5jb21tb24uYXBwcy5BdHRhY2hCOw0KaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5kYXRhY2FjaGUuY29tbW9u\nLmFwcHMuQXR0YWNoQzsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuZGF0YWNhY2hlLmNvbW1vbi5hcHBzLkF0dGFjaEQ7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRhdGFjYWNoZS5j\nb21tb24uYXBwcy5BdHRhY2hFOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQ\nQUVudGl0eU1hbmFnZXI7DQoNCi8qKg0KICogVGVzdHMgbG9hZCBvbiB0aGUg\nY2FjaGUuIFRvIHJ1bjoNCiAqIDxwLz4NCiAqIGphdmEgLURrb2RvLnByb3Bl\ncnRpZXM9aHNxbC5wcm9wZXJ0aWVzIC1EY2FjaGV0ZXN0LnRocmVhZHM9MzAN\nCiAqIC1EY2FjaGV0ZXN0Lml0ZXJhdGlvbnM9MTAwMCBrb2RvLmRhdGFjYWNo\nZS5DYWNoZUxvYWRUZXN0DQogKg0KICogQGF1dGhvciA8YSBocmVmPSJtYWls\ndG86bWFyY0Bzb2xhcm1ldHJpYy5jb20iPk1hcmMgUHJ1ZCdob21tZWF1eDwv\nYT4NCiAqLw0KcHVibGljIGNsYXNzIENhY2hlTG9hZFRlc3QNCiAgICBleHRl\nbmRzIEFic3RyYWN0VGVzdENhc2Ugew0KDQogICAgcHJpdmF0ZSBFbnRpdHlN\nYW5hZ2VyRmFjdG9yeSBlbWY7DQogICAgcHJvdGVjdGVkIGludCB0aHJlYWRD\nb3VudCA9DQogICAgICAgIEludGVnZXIuZ2V0SW50ZWdlcigiY2FjaGV0ZXN0\nLnRocmVhZHMiLCAzMCkuaW50VmFsdWUoKTsNCiAgICBwcm90ZWN0ZWQgaW50\nIGludGVyYXRpb25Db3VudCA9DQogICAgICAgIEludGVnZXIuZ2V0SW50ZWdl\ncigiY2FjaGV0ZXN0Lml0ZXJhdGlvbnMiLCAxMDAwKS5pbnRWYWx1ZSgpOw0K\nDQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7DQogICAgICAgIE1hcCBwcm9w\nc01hcCA9IG5ldyBIYXNoTWFwKCk7DQogICAgICAgIHByb3BzTWFwLnB1dCgi\nb3BlbmpwYS5EYXRhQ2FjaGUiLCAidHJ1ZSIpOw0KICAgICAgICBwcm9wc01h\ncC5wdXQoIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2bSIp\nOw0KICAgICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuUXVlcnlDYWNoZSIs\nICJ0cnVlIik7DQogICAgICAgIGVtZiA9IGdldEVtZihwcm9wc01hcCk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdENhY2hlTG9hZCgpDQogICAg\nICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBtdHRlc3QoSW50ZWdl\nci5nZXRJbnRlZ2VyKCJjYWNoZXRlc3QudGhyZWFkcyIsIDMwKS5pbnRWYWx1\nZSgpLA0KICAgICAgICAgICAgSW50ZWdlci5nZXRJbnRlZ2VyKCJjYWNoZXRl\nc3QuaXRlcmF0aW9ucyIsIDEwMDApLmludFZhbHVlKCkpOw0KDQogICAgICAg\nIHN3aXRjaCAoKGludCkgKE1hdGgucmFuZG9tKCkgKiA0KSkgew0KICAgICAg\nICAgICAgY2FzZSAwOg0KICAgICAgICAgICAgICAgIGluc2VydCgpOw0KICAg\nICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAxOg0KICAg\nICAgICAgICAgICAgIHF1ZXJ5KCk7DQogICAgICAgICAgICAgICAgYnJlYWs7\nDQogICAgICAgICAgICBjYXNlIDI6DQogICAgICAgICAgICAgICAgZGVsZXRl\nKCk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNl\nIDM6DQogICAgICAgICAgICAgICAgcmVhZCgpOw0KICAgICAgICAgICAgICAg\nIGJyZWFrOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJpdmF0ZSBpbnQg\ncm5kKGludCBudW0pIHsNCiAgICAgICAgcmV0dXJuIHJhbmRvbUludCgpLmlu\ndFZhbHVlKCkgJSBudW07DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIGlu\nc2VydCgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0KDQogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOw0KICAgICAgICBzdGFydFR4KGVtKTsNCg0KICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IChybmQoMTAwKSk7IGkrKykgew0KICAgICAgICAgICAgZW0u\ncGVyc2lzdChyYW5kb21pemVCZWFuKHJuZGNsYXNzKCkubmV3SW5zdGFuY2Uo\nKSkpOw0KICAgICAgICB9DQoNCiAgICAgICAgZW5kVHgoZW0pOw0KICAgICAg\nICBlbmRFbShlbSk7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIHF1ZXJ5\nKCkgew0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0NCiAg\nICAgICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdlcikgZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsNCg0KICAgICAgICBTdHJpbmdbXSBmaWx0ZXJzID0g\nbmV3IFN0cmluZ1tdew0KICAgICAgICAgICAgInNlbGVjdCBmcm9tICIgKyBB\ndHRhY2hBLmNsYXNzLmdldE5hbWUoKSArICIgd2hlcmUgYWludCA+IDAiLA0K\nICAgICAgICAgICAgInNlbGVjdCBmcm9tICIgKyBBdHRhY2hBLmNsYXNzLmdl\ndE5hbWUoKSArICIgd2hlcmUgYWludCA8IDAiLA0KICAgICAgICAgICAgInNl\nbGVjdCBmcm9tICIgKyBBdHRhY2hCLmNsYXNzLmdldE5hbWUoKSArICIgd2hl\ncmUgYWludCA+IDAiLA0KICAgICAgICAgICAgInNlbGVjdCBmcm9tICIgKyBB\ndHRhY2hCLmNsYXNzLmdldE5hbWUoKSArICIgd2hlcmUgYWludCA8IDAiLA0K\nICAgICAgICAgICAgInNlbGVjdCBmcm9tICIgKyBBdHRhY2hDLmNsYXNzLmdl\ndE5hbWUoKSArICIgd2hlcmUgYWludCA+IDAiLA0KICAgICAgICAgICAgInNl\nbGVjdCBmcm9tICIgKyBBdHRhY2hDLmNsYXNzLmdldE5hbWUoKSArICIgd2hl\ncmUgYWludCA8IDAiLA0KICAgICAgICB9Ow0KDQogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgcm5kKDUwKTsgaSsrKSB7DQogICAgICAgICAgICB0cnkg\new0KICAgICAgICAgICAgICAgIG5ldyBBcnJheUxpc3QoKENvbGxlY3Rpb24p\nIGVtDQogICAgICAgICAgICAgICAgICAgIC5jcmVhdGVRdWVyeSgib3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5qcHFsLkpQUUwiLA0KICAgICAgICAgICAg\nICAgICAgICAgICAgZmlsdGVyc1tyYW5kb21JbnQoKS5pbnRWYWx1ZSgpICUg\nZmlsdGVycy5sZW5ndGhdKS4NCiAgICAgICAgICAgICAgICAgICAgZ2V0UmVz\ndWx0TGlzdCgpKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxTdGF0\nZUV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICAgICAgZS5wcmludFN0YWNr\nVHJhY2UoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAg\nIGVuZEVtKGVtKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgZGVsZXRl\nKCkgew0KDQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBlbSA9DQogICAgICAgICAgICAgICAgKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAg\nICAgICAgc3RhcnRUeChlbSk7DQoNCiAgICAgICAgICAgIGZvciAoSXRlcmF0\nb3IgaSA9IGVtLmNyZWF0ZUV4dGVudChybmRjbGFzcygpLCBNYXRoLnJhbmRv\nbSgpID4gMC41ZikuDQogICAgICAgICAgICAgICAgaXRlcmF0b3IoKTsgaS5o\nYXNOZXh0KCk7KSB7DQogICAgICAgICAgICAgICAgT2JqZWN0IG8gPSBpLm5l\neHQoKTsNCiAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAu\nNmYpDQogICAgICAgICAgICAgICAgICAgIGVtLnJlbW92ZShvKTsNCiAgICAg\nICAgICAgIH0NCg0KICAgICAgICAgICAgZW5kVHgoZW0pOw0KICAgICAgICAg\nICAgZW5kRW0oZW0pOw0KICAgICAgICB9IGNhdGNoIChJbGxlZ2FsU3RhdGVF\neGNlcHRpb24gZSkgew0KICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2Uo\nKTsNCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAg\nICAgIGUucHJpbnRTdGFja1RyYWNlKCk7DQogICAgICAgIH0NCiAgICB9DQoN\nCiAgICBwcml2YXRlIHZvaWQgcmVhZCgpIHsNCg0KICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlciBlbSA9DQogICAgICAgICAgICAoT3BlbkpQQUVudGl0\neU1hbmFnZXIpIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQoNCiAgICAg\nICAgZm9yIChJdGVyYXRvciBpID0gZW0uY3JlYXRlRXh0ZW50KHJuZGNsYXNz\nKCksIE1hdGgucmFuZG9tKCkgPiAwLjVmKS4NCiAgICAgICAgICAgIGl0ZXJh\ndG9yKCk7IGkuaGFzTmV4dCgpOykgew0KICAgICAgICAgICAgT2JqZWN0IG8g\nPSBpLm5leHQoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGVuZEVtKGVtKTsN\nCiAgICB9DQoNCiAgICBwcml2YXRlIENsYXNzIHJuZGNsYXNzKCkgew0KICAg\nICAgICBDbGFzc1tdIGMgPSBuZXcgQ2xhc3NbXXsNCiAgICAgICAgICAgIEF0\ndGFjaEEuY2xhc3MsDQogICAgICAgICAgICBBdHRhY2hCLmNsYXNzLA0KICAg\nICAgICAgICAgQXR0YWNoQy5jbGFzcywNCiAgICAgICAgICAgIEF0dGFjaEQu\nY2xhc3MsDQogICAgICAgICAgICBBdHRhY2hFLmNsYXNzLA0KICAgICAgICB9\nOw0KDQogICAgICAgIHJldHVybiBjWyhpbnQpIChNYXRoLnJhbmRvbSgpICog\nYy5sZW5ndGgpXTsNCiAgICB9DQp9DQoNCg==\n","encoding":"base64"}

