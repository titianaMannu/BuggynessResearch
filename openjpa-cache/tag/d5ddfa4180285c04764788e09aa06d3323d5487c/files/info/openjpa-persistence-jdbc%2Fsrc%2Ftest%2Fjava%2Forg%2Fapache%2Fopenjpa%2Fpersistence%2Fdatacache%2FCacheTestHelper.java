{"sha":"92a8689b77d55a62512320145f2edb5d52cdc16a","node_id":"MDQ6QmxvYjIwNjM2NDo5MmE4Njg5Yjc3ZDU1YTYyNTEyMzIwMTQ1ZjJlZGI1ZDUyY2RjMTZh","size":4853,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/92a8689b77d55a62512320145f2edb5d52cdc16a","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZGF0YWNhY2hlOw0KDQppbXBvcnQgamF2YS51dGlsLkNv\nbGxlY3Rpb247DQppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOw0KaW1wb3J0\nIGphdmEudXRpbC5Ob1N1Y2hFbGVtZW50RXhjZXB0aW9uOw0KDQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5EYXRhQ2FjaGU7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5RdWVyeUNhY2hlOw0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5kYXRhY2FjaGUuUXVlcnlLZXk7\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5EYXRhQ2Fj\naGVNYW5hZ2VyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nQnJva2VyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQnJv\na2VyRmFjdG9yeTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLlF1ZXJ5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsNCg0KY2xhc3MgQ2Fj\naGVUZXN0SGVscGVyIHsNCg0KICAgIHN0YXRpYyB2b2lkIGNoZWNrQ2FjaGUo\nQWJzdHJhY3RUZXN0Q2FzZSB0YywgRGF0YUNhY2hlIGNhY2hlLCBPYmplY3Rb\nXSBpZHMsDQogICAgICAgIGJvb2xlYW5bXSBzdGF0aSkgew0KICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykgew0KICAgICAg\nICAgICAgaWYgKHN0YXRpW2ldKQ0KICAgICAgICAgICAgICAgIHRjLmFzc2Vy\ndFRydWUoImlkICIgKyBpICsgIiAoIiArIGlkc1tpXQ0KICAgICAgICAgICAg\nICAgICAgICArICIpIHdhcyBub3QgaW4gY2FjaGU7IHNob3VsZCBoYXZlIGJl\nZW4iLA0KICAgICAgICAgICAgICAgICAgICBjYWNoZS5jb250YWlucyhpZHNb\naV0pKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0Yy5h\nc3NlcnRGYWxzZSgiaWQgIiArIGkgKyAiICgiICsgaWRzW2ldDQogICAgICAg\nICAgICAgICAgICAgICsgIikgd2FzIGluIGNhY2hlOyBzaG91bGQgbm90IGhh\ndmUgYmVlbiIsDQogICAgICAgICAgICAgICAgICAgIGNhY2hlLmNvbnRhaW5z\nKGlkc1tpXSkpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgc3RhdGljIHZv\naWQgYXNzZXJ0SW5DYWNoZShBYnN0cmFjdFRlc3RDYXNlIHRjLCBRdWVyeSBx\nLCBCb29sZWFuIGluQ2FjaGUpIHsNCiAgICAgICAgYXNzZXJ0SW5DYWNoZSh0\nYywgcSwgaW5DYWNoZSwgbmV3IE9iamVjdFswXSk7DQogICAgfQ0KDQogICAg\nLyoqDQogICAgICogVGVzdCB3aGV0aGVyIHRoZSBnaXZlbiBxdWVyeSBoYXMg\ndmFsaWQgY2FjaGVkIHJlc3VsdHMuDQogICAgICoNCiAgICAgKiBAcGFyYW0g\naW5DYWNoZSBpZiB7QGxpbmsgQm9vbGVhbiNUUlVFfSwgdGhlIHF1ZXJ5IG11\nc3QgaGF2ZSB2YWxpZA0KICAgICAqIGNhY2hlZCByZXN1bHRzOyBpZiB7QGxp\nbmsgQm9vbGVhbiNGQUxTRX0gdGhlIHF1ZXJ5DQogICAgICogbXVzdCBub3Qg\naGF2ZSBhbnkgY2FjaGVkIHJlc3VsdHM7IGlmIG51bGwgdGhlDQogICAgICog\ncXVlcnkgbWF5IGhhdmUgY2FjaGVkIHJlc3VsdHMsIGJ1dCB0aGV5IGNhbm5v\ndCBiZQ0KICAgICAqIHZhbGlkIChpLmUuIHRoZXkgY2FuJ3QgYmUgcmV0dXJu\nZWQgdG8gdGhlIHVzZXIpDQogICAgICovDQogICAgc3RhdGljIHZvaWQgYXNz\nZXJ0SW5DYWNoZShBYnN0cmFjdFRlc3RDYXNlIHRjLCBRdWVyeSBxdWVyeSwg\nQm9vbGVhbiBpbkNhY2hlLA0KICAgICAgICBPYmplY3RbXSBhcmdzKSB7DQog\nICAgICAgIFF1ZXJ5S2V5IHFrID0gUXVlcnlLZXkubmV3SW5zdGFuY2UocXVl\ncnksIGFyZ3MpOw0KICAgICAgICBCcm9rZXIgYnJva2VyID0gcXVlcnkuZ2V0\nQnJva2VyKCk7DQogICAgICAgIEJyb2tlckZhY3RvcnkgZmFjdG9yeSA9IGJy\nb2tlci5nZXRCcm9rZXJGYWN0b3J5KCk7DQoNCiAgICAgICAgUXVlcnlDYWNo\nZSBxYyA9IGNhY2hlTWFuYWdlcihmYWN0b3J5KS5nZXRTeXN0ZW1RdWVyeUNh\nY2hlKCk7DQogICAgICAgIGlmIChpbkNhY2hlID09IEJvb2xlYW4uRkFMU0Ug\nJiYgcWMuZ2V0KHFrKSAhPSBudWxsKSB7DQogICAgICAgICAgICB0Yy5mYWls\nKCJxdWVyeSBzaG91bGQgbm90IGJlIGluIGNhY2hlOyB3YXMuIik7DQogICAg\nICAgIH0gZWxzZSBpZiAoaW5DYWNoZSA9PSBCb29sZWFuLlRSVUUgfHwgKGlu\nQ2FjaGUgPT0gbnVsbA0KICAgICAgICAgICAgJiYgcWMuZ2V0KHFrKSAhPSBu\ndWxsKSkgew0KICAgICAgICAgICAgT2JqZWN0IHJlcyA9IChhcmdzID09IG51\nbGwpID8gcXVlcnkuZXhlY3V0ZSgpDQogICAgICAgICAgICAgICAgOiBxdWVy\neS5leGVjdXRlKGFyZ3MpOw0KICAgICAgICAgICAgaWYgKGluQ2FjaGUgPT0g\nQm9vbGVhbi5UUlVFICYmDQogICAgICAgICAgICAgICAgIWlzQ2FjaGVkUmVz\ndWx0KHJlcywgaW5DYWNoZSwgcXVlcnkuZ2V0QnJva2VyKCkpKQ0KICAgICAg\nICAgICAgICAgIHRjLmZhaWwoInF1ZXJ5IHNob3VsZCBiZSBpbiBjYWNoZTsg\nd2FzIG5vdC4iKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGluQ2FjaGUgPT0g\nbnVsbCAmJg0KICAgICAgICAgICAgICAgIGlzQ2FjaGVkUmVzdWx0KHJlcywg\naW5DYWNoZSwgcXVlcnkuZ2V0QnJva2VyKCkpKQ0KICAgICAgICAgICAgICAg\nIHRjLmZhaWwoInF1ZXJ5IHNob3VsZCBub3QgYmUgcmV0dXJuZWQgdG8gdXNl\ncjsgd2FzLiIpOw0KICAgICAgICAgICAgcXVlcnkuY2xvc2VBbGwoKTsNCiAg\nICAgICAgfQ0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4g\naXNDYWNoZWRSZXN1bHQoT2JqZWN0IHJlcywgQm9vbGVhbiBleHBlY3RlZCwN\nCiAgICAgICAgQnJva2VyIGJyb2tlcikgew0KICAgICAgICAvLyB3ZSBjYW4g\nb25seSBjaGVjayBmb3IgYSBDYWNoZWRRdWVyeVJlc3VsdCBpZiB0aGUNCiAg\nICAgICAgLy8gQnJva2VyIHdhcyBjb25maWd1cmVkIHRvIGJlIGEgQ2FjaGVU\nZXN0QnJva2VyDQogICAgICAgIGlmICghKGJyb2tlciBpbnN0YW5jZW9mIENh\nY2hlVGVzdEJyb2tlcikpDQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uKCJCcm9rZXIgd2FzIG5vdCBzZXQgdG8gYmUg\nIg0KICAgICAgICAgICAgICAgICsgImEgQ2FjaGVUZXN0QnJva2VyLCBtYWtp\nbmcgaXQgaW1wb3NzaWJsZSB0byB2ZXJpZnkgIg0KICAgICAgICAgICAgICAg\nICsgImlmIHF1ZXJ5IHJlc3VsdCBpcyBjYWNoZWQiKTsNCg0KICAgICAgICBp\nZiAocmVzIGluc3RhbmNlb2YgQ29sbGVjdGlvbikNCiAgICAgICAgICAgIHJl\ndHVybiByZXMgaW5zdGFuY2VvZiBDYWNoZVRlc3RCcm9rZXIuQ2FjaGVkUXVl\ncnlSZXN1bHQ7DQogICAgICAgIC8vIG5vIHdheSB0byB0ZWxsIGlmIHVuaXF1\nZSByZXN1bHRzIGZyb20gY2FjaGUNCiAgICAgICAgcmV0dXJuIGV4cGVjdGVk\nLmJvb2xlYW5WYWx1ZSgpOw0KICAgIH0NCg0KICAgIHN0YXRpYyB2b2lkIGl0\nZXJhdGUoQ29sbGVjdGlvbiBjKSB7DQogICAgICAgIC8vIGl0ZXJhdGUgdGhy\nb3VnaCB0aGUgY29sbGVjdGlvbiBzbyB0aGF0IHRoZSByZXN1bHRzIGhhdmUg\nYW4NCiAgICAgICAgLy8gb3Bwb3J0dW5pdHkgdG8gcmVnaXN0ZXIgdGhlbXNl\nbHZlcyB3aXRoIHRoZSBQTS4NCiAgICAgICAgaW50IGNvdW50ID0gMDsNCiAg\nICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0gYy5pdGVyYXRvcigpOyBpdGVy\nLmhhc05leHQoKTspIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAg\nICAgICAgY291bnQrKzsNCiAgICAgICAgICAgICAgICBpdGVyLm5leHQoKTsN\nCiAgICAgICAgICAgIH0gY2F0Y2ggKE5vU3VjaEVsZW1lbnRFeGNlcHRpb24g\nZSkgew0KICAgICAgICAgICAgICAgIHRocm93IGU7DQogICAgICAgICAgICB9\nDQogICAgICAgIH0NCiAgICB9DQoNCiAgICBzdGF0aWMgRGF0YUNhY2hlTWFu\nYWdlciBjYWNoZU1hbmFnZXIoQnJva2VyRmFjdG9yeSBmYWN0b3J5KSB7DQog\nICAgICAgIHJldHVybiBmYWN0b3J5LmdldENvbmZpZ3VyYXRpb24oKS5nZXRE\nYXRhQ2FjaGVNYW5hZ2VySW5zdGFuY2UoKTsNCiAgICB9DQp9DQo=\n","encoding":"base64"}

