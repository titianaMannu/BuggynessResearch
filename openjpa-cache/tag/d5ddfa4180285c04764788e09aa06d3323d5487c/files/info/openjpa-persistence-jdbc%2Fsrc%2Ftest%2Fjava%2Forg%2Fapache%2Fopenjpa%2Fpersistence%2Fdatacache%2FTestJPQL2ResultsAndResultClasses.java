{"sha":"1fd8f7893b6c84b930f46c1983954387219c113f","node_id":"MDQ6QmxvYjIwNjM2NDoxZmQ4Zjc4OTNiNmM4NGI5MzBmNDZjMTk4Mzk1NDM4NzIxOWMxMTNm","size":17793,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1fd8f7893b6c84b930f46c1983954387219c113f","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZGF0YWNhY2hlOw0KDQppbXBvcnQgamF2YS51dGlsLkNv\nbGxlY3Rpb247DQppbXBvcnQgamF2YS51dGlsLkRhdGU7DQppbXBvcnQgamF2\nYS51dGlsLkhhc2hNYXA7DQppbXBvcnQgamF2YS51dGlsLkxpc3Q7DQppbXBv\ncnQgamF2YS51dGlsLk1hcDsNCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlNYW5hZ2VyRmFjdG9yeTsNCg0KDQppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmRhdGFjYWNoZS5jb21tb24uYXBwcy5DYWNo\nZU9iamVjdEE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmRhdGFjYWNoZS5jb21tb24uYXBwcy5DYWNoZU9iamVjdEFDaGlsZDE7\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRhdGFj\nYWNoZS5jb21tb24uYXBwcy5DYWNoZU9iamVjdEI7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRhdGFjYWNoZS5jb21tb24uYXBw\ncy5DYWNoZU9iamVjdFdpdGhFeHRlcm5hbGl6ZWRGaWVsZHM7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5B\nYnN0cmFjdFRlc3RDYXNlOw0KDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5Ccm9rZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5Ccm9rZXJGYWN0b3J5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuUXVlcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5qcHFsLkpQUUxQYXJzZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLkpQQUZhY2FkZUhlbHBlcjsNCg0KcHVibGljIGNs\nYXNzIFRlc3RKUFFMMlJlc3VsdHNBbmRSZXN1bHRDbGFzc2VzDQogICAgZXh0\nZW5kcyBBYnN0cmFjdFRlc3RDYXNlIHsNCg0KICAgIHB1YmxpYyBUZXN0SlBR\nTDJSZXN1bHRzQW5kUmVzdWx0Q2xhc3NlcyhTdHJpbmcgdGVzdCkgew0KICAg\nICAgICBzdXBlcih0ZXN0LCAiZGF0YWNhY2hlY2FjdHVzYXBwIik7DQogICAg\nfQ0KDQogICAgcHJpdmF0ZSBCcm9rZXJGYWN0b3J5IF9mYWN0b3J5Ow0KDQog\nICAgcHVibGljIHZvaWQgc2V0VXAoKSB7DQogICAgICAgIGRlbGV0ZUFsbChD\nYWNoZU9iamVjdEEuY2xhc3MpOw0KICAgICAgICBkZWxldGVBbGwoQ2FjaGVP\nYmplY3RXaXRoRXh0ZXJuYWxpemVkRmllbGRzLmNsYXNzKTsNCg0KICAgICAg\nICBNYXAgcHJvcHNNYXAgPSBuZXcgSGFzaE1hcCgpOw0KICAgICAgICBwcm9w\nc01hcC5wdXQoIm9wZW5qcGEuRGF0YUNhY2hlIiwgInRydWUiKTsNCiAgICAg\nICAgcHJvcHNNYXAucHV0KCJvcGVuanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVy\nIiwgInNqdm0iKTsNCiAgICAgICAgcHJvcHNNYXAucHV0KCJvcGVuanBhLkJy\nb2tlckltcGwiLCBDYWNoZVRlc3RCcm9rZXIuY2xhc3MuZ2V0TmFtZSgpKTsN\nCiAgICAgICAgRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mID0NCiAgICAgICAg\nICAgIGdldEVtZihwcm9wc01hcCk7DQogICAgICAgIF9mYWN0b3J5ID0gSlBB\nRmFjYWRlSGVscGVyLnRvQnJva2VyRmFjdG9yeShlbWYpOw0KICAgICAgICBC\ncm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7DQogICAgICAg\nIHRyeSB7DQogICAgICAgICAgICBicm9rZXIuYmVnaW4oKTsNCiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIFN5c3RlbS5v\ndXQucHJpbnRsbigNCiAgICAgICAgICAgICAgICAiRXhjZXB0aW9uIGluIFRl\nc3RKUFFMMlJlc3VsdHNBbmRSZXN1bHRDbGFzc2VzIHNldHVwIDogXG4iICsN\nCiAgICAgICAgICAgICAgICAgICAgZ2V0U3RhY2tUcmFjZShlKSk7DQogICAg\nICAgIH0NCg0KICAgICAgICBpbnQgaiA9IDA7DQogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgMTA7IGkrKykgew0KICAgICAgICAgICAgLy8gbWFrZSBz\nb21lIGNvbW1vbiBuYW1lcyBzbyB0aGF0IEdST1VQIEJZIGlzIHVzZWZ1bC4N\nCiAgICAgICAgICAgIGlmIChpICUgMiA9PSAwKQ0KICAgICAgICAgICAgICAg\nIGorKzsNCiAgICAgICAgICAgIENhY2hlT2JqZWN0QSBvOw0KICAgICAgICAg\nICAgYnJva2VyLnBlcnNpc3QobyA9IG5ldyBDYWNoZU9iamVjdEFDaGlsZDEo\nIiIsICJyZXN1bHRzLSIgKyBqLCBpKSwNCiAgICAgICAgICAgICAgICBudWxs\nKTsNCg0KICAgICAgICAgICAgby5zZXREYXRlKG5ldyBEYXRlKCkpOw0KICAg\nICAgICAgICAgby5zZXREYXRlQXJyYXkobmV3IERhdGVbXXsgbmV3IERhdGUo\nMTApLCBuZXcgRGF0ZSgyMCkgfSk7DQoNCiAgICAgICAgICAgIGlmIChpIDwg\nNSkNCiAgICAgICAgICAgICAgICBvLnNldFJlbGF0ZWRCKG5ldyBDYWNoZU9i\namVjdEIoKSk7DQogICAgICAgIH0NCg0KICAgICAgICAvL1NlZXRoYSBPY3Qg\nMzAsMjAwNg0KICAgICAgICAvL2RlbGV0ZUFsbCBjbG9zZXMgdGhlIFRYLiAg\nU28gdXNlIHRoZSBsb2NhbA0KICAgICAgICAvL2RlbGV0ZUFsbCBmbi4NCiAg\nICAgICAgLy9kZWxldGVBbGwoQ2FjaGVPYmplY3RXaXRoRXh0ZXJuYWxpemVk\nRmllbGRzLmNsYXNzLCgpKTsNCiAgICAgICAgLy9kZWxldGVBbGwoYnJva2Vy\nLENhY2hlT2JqZWN0V2l0aEV4dGVybmFsaXplZEZpZWxkcy5jbGFzcyx0cnVl\nKTsNCg0KICAgICAgICBDYWNoZU9iamVjdFdpdGhFeHRlcm5hbGl6ZWRGaWVs\nZHMgbyA9DQogICAgICAgICAgICBuZXcgQ2FjaGVPYmplY3RXaXRoRXh0ZXJu\nYWxpemVkRmllbGRzKCk7DQogICAgICAgIGJyb2tlci5wZXJzaXN0KG8sIG51\nbGwpOw0KICAgICAgICBvLnNldENscyhCcm9rZXIuY2xhc3MpOw0KDQogICAg\nICAgIGJyb2tlci5jb21taXQoKTsNCiAgICAgICAgYnJva2VyLmNsb3NlKCk7\nDQoNCiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLmNhY2hlTWFuYWdlcihfZmFj\ndG9yeSkuZ2V0U3lzdGVtUXVlcnlDYWNoZSgpLmNsZWFyKCk7DQogICAgfQ0K\nDQogICAgcHVibGljIHZvaWQgdGVhckRvd24oKQ0KICAgICAgICB0aHJvd3Mg\nRXhjZXB0aW9uIHsNCiAgICAgICAgX2ZhY3RvcnkuY2xvc2UoKTsNCg0KICAg\nICAgICBzdXBlci50ZWFyRG93bigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2\nb2lkIHRlc3RBZ2dyZWdhdGVSZXN1bHRJc0NhY2hlZCgpIHsNCiAgICAgICAg\nQnJva2VyIGJyb2tlciA9IF9mYWN0b3J5Lm5ld0Jyb2tlcigpOw0KICAgICAg\nICBRdWVyeSBxID0NCiAgICAgICAgICAgIGJyb2tlci5uZXdRdWVyeShKUFFM\nUGFyc2VyLkxBTkdfSlBRTCwgInNlbGVjdCBtYXgoYS5hZ2UpIEZST00gIiAr\nDQogICAgICAgICAgICAgICAgQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNzLmdl\ndFNpbXBsZU5hbWUoKSArICIgYSIpOw0KDQogICAgICAgIE9iamVjdCBvID0g\ncS5leGVjdXRlKCk7DQogICAgICAgIGFzc2VydEVxdWFscyhMb25nLmNsYXNz\nLCBvLmdldENsYXNzKCkpOw0KICAgICAgICBDYWNoZVRlc3RIZWxwZXIuYXNz\nZXJ0SW5DYWNoZSh0aGlzLCBxLCBCb29sZWFuLlRSVUUpOw0KDQogICAgICAg\nIG8gPSBxLmV4ZWN1dGUoKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKExvbmcu\nY2xhc3MsIG8uZ2V0Q2xhc3MoKSk7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgdGVzdEFnZ3JlZ2F0ZU5vblVuaXF1ZVJlc3VsdElzQ2FjaGVkKCkgew0K\nICAgICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7\nDQogICAgICAgIFF1ZXJ5IHEgPQ0KICAgICAgICAgICAgYnJva2VyLm5ld1F1\nZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAic2VsZWN0IG1heChhLmFnZSkg\nRlJPTSAiICsNCiAgICAgICAgICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEu\nY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsgIiBhIik7DQogICAgICAgIHEuc2V0\nVW5pcXVlKGZhbHNlKTsNCiAgICAgICAgTGlzdCByZXMgPSAoTGlzdCkgcS5l\neGVjdXRlKCk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCByZXMuc2l6ZSgp\nKTsNCiAgICAgICAgT2JqZWN0IG8gPSByZXMuZ2V0KDApOw0KICAgICAgICBh\nc3NlcnRFcXVhbHMoTG9uZy5jbGFzcywgby5nZXRDbGFzcygpKTsNCiAgICAg\nICAgQ2FjaGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9v\nbGVhbi5UUlVFKTsNCg0KICAgICAgICByZXMgPSAoTGlzdCkgcS5leGVjdXRl\nKCk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCByZXMuc2l6ZSgpKTsNCiAg\nICAgICAgbyA9IHJlcy5nZXQoMCk7DQogICAgICAgIGFzc2VydEVxdWFscyhM\nb25nLmNsYXNzLCBvLmdldENsYXNzKCkpOw0KICAgIH0NCg0KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RQcm9qZWN0aW9uUmVzdWx0SXNDYWNoZWQoKSB7DQogICAg\nICAgIEJyb2tlciBicm9rZXIgPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsNCiAg\nICAgICAgUXVlcnkgcSA9IGJyb2tlci5uZXdRdWVyeShKUFFMUGFyc2VyLkxB\nTkdfSlBRTCwgInNlbGVjdCBhLmFnZSBGUk9NICIgKw0KICAgICAgICAgICAg\nQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArICIg\nYSIpOw0KICAgICAgICBDb2xsZWN0aW9uIGMgPSAoQ29sbGVjdGlvbikgcS5l\neGVjdXRlKCk7DQogICAgICAgIENhY2hlVGVzdEhlbHBlci5pdGVyYXRlKGMp\nOw0KICAgICAgICBDYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlz\nLCBxLCBCb29sZWFuLlRSVUUpOw0KDQogICAgICAgIGMgPSAoQ29sbGVjdGlv\nbikgcS5leGVjdXRlKCk7DQogICAgICAgIE9iamVjdCBvID0gYy5pdGVyYXRv\ncigpLm5leHQoKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKExvbmcuY2xhc3Ms\nIG8uZ2V0Q2xhc3MoKSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVz\ndFByb2plY3Rpb25PZlRoaXNJc0NhY2hlZCgpIHsNCiAgICAgICAgLy8gIyMj\nIyMgbmVlZCB0byB0ZXN0IHNpbmdsZSBwcm9qZWN0aW9uDQogICAgICAgIEJy\nb2tlciBicm9rZXIgPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsNCiAgICAgICAg\nUXVlcnkgcSA9IGJyb2tlci5uZXdRdWVyeShKUFFMUGFyc2VyLkxBTkdfSlBR\nTCwgInNlbGVjdCBhIEZST00gIiArDQogICAgICAgICAgICBDYWNoZU9iamVj\ndEFDaGlsZDEuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsgIiBhIik7DQogICAg\nICAgIC8vQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNzLCAic2VsZWN0IHRoaXMi\nKTsNCiAgICAgICAgQ29sbGVjdGlvbiBjID0gKENvbGxlY3Rpb24pIHEuZXhl\nY3V0ZSgpOw0KICAgICAgICBDYWNoZVRlc3RIZWxwZXIuaXRlcmF0ZShjKTsN\nCiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywg\ncSwgQm9vbGVhbi5UUlVFKTsNCg0KICAgICAgICBjID0gKENvbGxlY3Rpb24p\nIHEuZXhlY3V0ZSgpOw0KICAgICAgICBPYmplY3QgbyA9IGMuaXRlcmF0b3Io\nKS5uZXh0KCk7DQogICAgICAgIGFzc2VydEVxdWFscyhDYWNoZU9iamVjdEFD\naGlsZDEuY2xhc3MsIG8uZ2V0Q2xhc3MoKSk7DQogICAgICAgIGFzc2VydE5v\ndE51bGwoYnJva2VyLmdldE9iamVjdElkKG8pKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0UHJvamVjdGlvblJlc3VsdFdpdGhUaGlzSXNDYWNo\nZWQoKSB7DQogICAgICAgIEJyb2tlciBicm9rZXIgPSBfZmFjdG9yeS5uZXdC\ncm9rZXIoKTsNCiAgICAgICAgUXVlcnkgcSA9DQogICAgICAgICAgICBicm9r\nZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUwsICJzZWxlY3QgYS5u\nYW1lLGEgRlJPTSAiICsNCiAgICAgICAgICAgICAgICBDYWNoZU9iamVjdEFD\naGlsZDEuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsgIiBhIik7DQogICAgICAg\nIENvbGxlY3Rpb24gYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsNCiAg\nICAgICAgQ2FjaGVUZXN0SGVscGVyLml0ZXJhdGUoYyk7DQogICAgICAgIENh\nY2hlVGVzdEhlbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4u\nVFJVRSk7DQoNCiAgICAgICAgYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUo\nKTsNCiAgICAgICAgT2JqZWN0W10gcmVzdWx0ID0gKE9iamVjdFtdKSBjLml0\nZXJhdG9yKCkubmV4dCgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcmVz\ndWx0Lmxlbmd0aCk7DQogICAgICAgIGFzc2VydEVxdWFscyhTdHJpbmcuY2xh\nc3MsIHJlc3VsdFswXS5nZXRDbGFzcygpKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKENhY2hlT2JqZWN0QUNoaWxkMS5jbGFzcywgcmVzdWx0WzFdLmdldENs\nYXNzKCkpOw0KICAgICAgICBhc3NlcnROb3ROdWxsKGJyb2tlci5nZXRPYmpl\nY3RJZChyZXN1bHRbMV0pKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0\nZXN0TnVsbFByb2plY3Rpb25WYWx1ZXMoKSB7DQogICAgICAgIEJyb2tlciBi\ncm9rZXIgPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsNCiAgICAgICAgUXVlcnkg\ncSA9DQogICAgICAgICAgICBicm9rZXIubmV3UXVlcnkoSlBRTFBhcnNlci5M\nQU5HX0pQUUwsICJzZWxlY3QgYS5sb2NhbGUgRlJPTSAiICsNCiAgICAgICAg\nICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEuY2xhc3MuZ2V0U2ltcGxlTmFt\nZSgpICsgIiBhIik7DQogICAgICAgIENvbGxlY3Rpb24gYyA9IChDb2xsZWN0\naW9uKSBxLmV4ZWN1dGUoKTsNCiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLml0\nZXJhdGUoYyk7DQogICAgICAgIENhY2hlVGVzdEhlbHBlci5hc3NlcnRJbkNh\nY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJVRSk7DQoNCiAgICAgICAgYyA9IChD\nb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsNCiAgICAgICAgYXNzZXJ0TnVsbChj\nLml0ZXJhdG9yKCkubmV4dCgpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0TnVsbEFuZE5vdE51bGxQcm9qZWN0aW9uVmFsdWVzKCkgew0KICAg\nICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7DQog\nICAgICAgIFF1ZXJ5IHEgPQ0KICAgICAgICAgICAgYnJva2VyDQogICAgICAg\nICAgICAgICAgLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAic2Vs\nZWN0IGEubmFtZSxhLmxvY2FsZSBGUk9NICIgKw0KICAgICAgICAgICAgICAg\nICAgICBDYWNoZU9iamVjdEFDaGlsZDEuY2xhc3MuZ2V0U2ltcGxlTmFtZSgp\nICsgIiBhIik7DQoNCiAgICAgICAgQ29sbGVjdGlvbiBjID0gKENvbGxlY3Rp\nb24pIHEuZXhlY3V0ZSgpOw0KICAgICAgICBDYWNoZVRlc3RIZWxwZXIuaXRl\ncmF0ZShjKTsNCiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLmFzc2VydEluQ2Fj\naGUodGhpcywgcSwgQm9vbGVhbi5UUlVFKTsNCg0KICAgICAgICBjID0gKENv\nbGxlY3Rpb24pIHEuZXhlY3V0ZSgpOw0KICAgICAgICBPYmplY3RbXSByZXN1\nbHQgPSAoT2JqZWN0W10pIGMuaXRlcmF0b3IoKS5uZXh0KCk7DQogICAgICAg\nIGFzc2VydEVxdWFscygyLCByZXN1bHQubGVuZ3RoKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKFN0cmluZy5jbGFzcywgcmVzdWx0WzBdLmdldENsYXNzKCkp\nOw0KICAgICAgICBhc3NlcnROdWxsKHJlc3VsdFsxXSk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgWFhYdGVzdE51bGxBZ2dyZWdhdGVWYWx1ZXMoKSB7\nDQogICAgICAgIC8vID8/Pw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRl\nc3RNdWx0aXBsZUFnZ3JlZ2F0ZVJlc3VsdElzQ2FjaGVkKCkgew0KICAgICAg\nICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7DQogICAg\nICAgIFF1ZXJ5IHEgPQ0KICAgICAgICAgICAgYnJva2VyLm5ld1F1ZXJ5KEpQ\nUUxQYXJzZXIuTEFOR19KUFFMLA0KICAgICAgICAgICAgICAgICJzZWxlY3Qg\nbWF4KGEuYWdlKSwgYXZnKGEuYWdlKSwgY291bnQoYS5hZ2UpIEZST00gIiAr\nDQogICAgICAgICAgICAgICAgICAgIENhY2hlT2JqZWN0QUNoaWxkMS5jbGFz\ncy5nZXRTaW1wbGVOYW1lKCkgKyAiIGEiKTsNCg0KICAgICAgICBPYmplY3Qg\nbyA9IHEuZXhlY3V0ZSgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoT2JqZWN0\nW10uY2xhc3MsIG8uZ2V0Q2xhc3MoKSk7DQogICAgICAgIGFzc2VydEVxdWFs\ncygzLCAoKE9iamVjdFtdKSBvKS5sZW5ndGgpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoTG9uZy5jbGFzcywgKChPYmplY3RbXSkgbylbMF0uZ2V0Q2xhc3Mo\nKSk7DQoNCiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUo\ndGhpcywgcSwgQm9vbGVhbi5UUlVFKTsNCg0KICAgICAgICBvID0gcS5leGVj\ndXRlKCk7DQogICAgICAgIGFzc2VydEVxdWFscyhPYmplY3RbXS5jbGFzcywg\nby5nZXRDbGFzcygpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsICgoT2Jq\nZWN0W10pIG8pLmxlbmd0aCk7DQogICAgICAgIGFzc2VydEVxdWFscyhMb25n\nLmNsYXNzLCAoKE9iamVjdFtdKSBvKVswXS5nZXRDbGFzcygpKTsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmllbGRVc2VkVHdpY2UoKSB7DQog\nICAgICAgIC8vIFBvc3RncmVzIGJ1Zw0KICAgICAgICBCcm9rZXIgYnJva2Vy\nID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7DQogICAgICAgIC8vIGdyb3VwIGF2\nb2lkcyBwb3N0Z3JlcyBidWcNCiAgICAgICAgUXVlcnkgcSA9IGJyb2tlcg0K\nICAgICAgICAgICAgLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLCAi\nc2VsZWN0IGEuYWdlLCBhdmcoYS5hZ2UpIEZST00gIiArDQogICAgICAgICAg\nICAgICAgQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUo\nKSArDQogICAgICAgICAgICAgICAgIiBhICBncm91cCBieSBhLmFnZSIpOw0K\nICAgICAgICBDb2xsZWN0aW9uIGMgPSAoQ29sbGVjdGlvbikgcS5leGVjdXRl\nKCk7DQogICAgICAgIENhY2hlVGVzdEhlbHBlci5pdGVyYXRlKGMpOw0KICAg\nICAgICBDYWNoZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBC\nb29sZWFuLlRSVUUpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RB\nZ2dyZWdhdGVBbmRQcm9qZWN0aW9uKCkgew0KICAgICAgICAvLyBQb3N0Z3Jl\ncyBidWcNCiAgICAgICAgQnJva2VyIGJyb2tlciA9IF9mYWN0b3J5Lm5ld0Jy\nb2tlcigpOw0KICAgICAgICAvLyBncm91cCBhdm9pZHMgcG9zdGdyZXMgYnVn\nDQogICAgICAgIFF1ZXJ5IHEgPSBicm9rZXINCiAgICAgICAgICAgIC5uZXdR\ndWVyeShKUFFMUGFyc2VyLkxBTkdfSlBRTCwgInNlbGVjdCBhLm5hbWUsIGF2\nZyhhLmFnZSkgRlJPTSAiICsNCiAgICAgICAgICAgICAgICBDYWNoZU9iamVj\ndEFDaGlsZDEuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsNCiAgICAgICAgICAg\nICAgICAiIGEgIGdyb3VwIGJ5IGEubmFtZSIpOw0KDQogICAgICAgIExpc3Qg\nbCA9IChMaXN0KSBxLmV4ZWN1dGUoKTsNCiAgICAgICAgQ2FjaGVUZXN0SGVs\ncGVyLml0ZXJhdGUobCk7DQogICAgICAgIGFzc2VydEVxdWFscyhPYmplY3Rb\nXS5jbGFzcywgbC5nZXQoMCkuZ2V0Q2xhc3MoKSk7DQogICAgICAgIGFzc2Vy\ndEVxdWFscygyLCAoKE9iamVjdFtdKSBsLmdldCgwKSkubGVuZ3RoKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKFN0cmluZy5jbGFzcywgKChPYmplY3RbXSkg\nbC5nZXQoMCkpWzBdLmdldENsYXNzKCkpOw0KDQogICAgICAgIENhY2hlVGVz\ndEhlbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJVRSk7\nDQoNCiAgICAgICAgbCA9IChMaXN0KSBxLmV4ZWN1dGUoKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKE9iamVjdFtdLmNsYXNzLCBsLmdldCgwKS5nZXRDbGFz\ncygpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsICgoT2JqZWN0W10pIGwu\nZ2V0KDApKS5sZW5ndGgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoU3RyaW5n\nLmNsYXNzLCAoKE9iamVjdFtdKSBsLmdldCgwKSlbMF0uZ2V0Q2xhc3MoKSk7\nDQogICAgfQ0KDQogICAgLy9GSVhNRSBTZWV0aGEgRGVjIDE5LDIwMDYNCiAg\nICAvKnB1YmxpYyB2b2lkIHRlc3RNYXRoKCkgew0KICAgICAgICBCcm9rZXIg\nYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7DQogICAgICAgIFF1ZXJ5\nIHEgPQ0KICAgICAgICAgICAgYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIu\nTEFOR19KUFFMLCJzZWxlY3QgYXZnKGEuYWdlKSBGUk9NICIrDQogICAgICAg\nICAgICAgICAgICAgIENhY2hlT2JqZWN0QUNoaWxkMS5jbGFzcy5nZXRTaW1w\nbGVOYW1lKCkrIiBhIik7DQogICAgICAgIE51bWJlciBuID0gKE51bWJlcikg\ncS5leGVjdXRlKCk7DQogICAgICAgIENhY2hlVGVzdEhlbHBlci5hc3NlcnRJ\nbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJVRSk7DQogICAgICAgIG4gPSAo\nTnVtYmVyKSBxLmV4ZWN1dGUoKTsNCiAgICB9Ki8NCg0KICAgIHB1YmxpYyB2\nb2lkIHRlc3RSZXN1bHRDbGFzc0lzQ2FjaGVkKCkgew0KICAgICAgICBCcm9r\nZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7DQogICAgICAgIFF1\nZXJ5IHEgPSBicm9rZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUws\nICJTZWxlY3QgYSBGUk9NICIgKw0KICAgICAgICAgICAgQ2FjaGVPYmplY3RB\nQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArICIgYSIpOw0KICAgICAg\nICBxLnNldFJlc3VsdFR5cGUoT2JqZWN0LmNsYXNzKTsNCiAgICAgICAgQ29s\nbGVjdGlvbiBjID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZSgpOw0KICAgICAg\nICBDYWNoZVRlc3RIZWxwZXIuaXRlcmF0ZShjKTsNCiAgICAgICAgQ2FjaGVU\nZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5UUlVF\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0R3JvdXBpbmdJc0Nh\nY2hlZCgpIHsNCiAgICAgICAgQnJva2VyIGJyb2tlciA9IF9mYWN0b3J5Lm5l\nd0Jyb2tlcigpOw0KICAgICAgICBRdWVyeSBxID0NCiAgICAgICAgICAgIGJy\nb2tlci5uZXdRdWVyeShKUFFMUGFyc2VyLkxBTkdfSlBRTCwgInNlbGVjdCBt\nYXgoYS5hZ2UpIEZST00gIiArDQogICAgICAgICAgICAgICAgQ2FjaGVPYmpl\nY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArDQogICAgICAgICAg\nICAgICAgIiBhICBncm91cCBieSBhLm5hbWUiKTsNCg0KICAgICAgICBDb2xs\nZWN0aW9uIGMgPSAoQ29sbGVjdGlvbikgcS5leGVjdXRlKCk7DQogICAgICAg\nIENhY2hlVGVzdEhlbHBlci5pdGVyYXRlKGMpOw0KICAgICAgICBDYWNoZVRl\nc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBCb29sZWFuLlRSVUUp\nOw0KDQogICAgICAgIGMgPSAoQ29sbGVjdGlvbikgcS5leGVjdXRlKCk7DQog\nICAgICAgIE9iamVjdCBvID0gYy5pdGVyYXRvcigpLm5leHQoKTsNCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKExvbmcuY2xhc3MsIG8uZ2V0Q2xhc3MoKSk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEFnZ3JlZ2F0ZVByb2plY3Rp\nb25Hcm91cGluZ0lzQ2FjaGVkKCkgew0KICAgICAgICBCcm9rZXIgYnJva2Vy\nID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7DQogICAgICAgIFF1ZXJ5IHEgPQ0K\nICAgICAgICAgICAgYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19K\nUFFMLA0KICAgICAgICAgICAgICAgICJzZWxlY3QgYS5uYW1lLCBtYXgoYS5h\nZ2UpIEZST00gIiArDQogICAgICAgICAgICAgICAgICAgIENhY2hlT2JqZWN0\nQUNoaWxkMS5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKw0KICAgICAgICAgICAg\nICAgICAgICAiIGEgIGdyb3VwIGJ5IGEubmFtZSIpOw0KDQogICAgICAgIENv\nbGxlY3Rpb24gYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsNCiAgICAg\nICAgQ2FjaGVUZXN0SGVscGVyLml0ZXJhdGUoYyk7DQogICAgICAgIENhY2hl\nVGVzdEhlbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJV\nRSk7DQoNCiAgICAgICAgYyA9IChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUoKTsN\nCiAgICAgICAgT2JqZWN0W10gcmVzdWx0ID0gKE9iamVjdFtdKSBjLml0ZXJh\ndG9yKCkubmV4dCgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcmVzdWx0\nLmxlbmd0aCk7DQogICAgICAgIGFzc2VydEVxdWFscyhTdHJpbmcuY2xhc3Ms\nIHJlc3VsdFswXS5nZXRDbGFzcygpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKExvbmcuY2xhc3MsIHJlc3VsdFsxXS5nZXRDbGFzcygpKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0VW5pcXVlUmVzdWx0c0FyZUNhY2hlZEFu\nZENvbnNpc3RlbnQoKSB7DQogICAgICAgIEJyb2tlciBicm9rZXIgPSBfZmFj\ndG9yeS5uZXdCcm9rZXIoKTsNCiAgICAgICAgUXVlcnkgcSA9DQogICAgICAg\nICAgICBicm9rZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUwsICJz\nZWxlY3QgYSBGUk9NICIgKw0KICAgICAgICAgICAgICAgIENhY2hlT2JqZWN0\nQUNoaWxkMS5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKw0KICAgICAgICAgICAg\nICAgICIgYSAgd2hlcmUgYS5hZ2UgPTEiKTsNCg0KICAgICAgICBxLnNldFVu\naXF1ZSh0cnVlKTsNCiAgICAgICAgQ2FjaGVPYmplY3RBQ2hpbGQxIGEgPSAo\nQ2FjaGVPYmplY3RBQ2hpbGQxKSBxLmV4ZWN1dGUoKTsNCiAgICAgICAgQ2Fj\naGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5U\nUlVFKTsNCg0KICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEgYTIgPSAoQ2Fj\naGVPYmplY3RBQ2hpbGQxKSBxLmV4ZWN1dGUoKTsNCiAgICAgICAgYXNzZXJ0\nVHJ1ZShhID09IGEyKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nTXV0YWJsZVByb2plY3Rpb25GaWVsZHNBcmVDb3BpZWQoKSB7DQogICAgICAg\nIEJyb2tlciBicm9rZXIgPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsNCiAgICAg\nICAgUXVlcnkgcSA9IGJyb2tlci5uZXdRdWVyeShKUFFMUGFyc2VyLkxBTkdf\nSlBRTCwgInNlbGVjdCBhLmRhdGUgRlJPTSAiICsNCiAgICAgICAgICAgIENh\nY2hlT2JqZWN0QUNoaWxkMS5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiIGEg\nIHdoZXJlIGEuYWdlPTEiKTsNCg0KICAgICAgICBxLnNldFVuaXF1ZSh0cnVl\nKTsNCiAgICAgICAgRGF0ZSBkMCA9IChEYXRlKSBxLmV4ZWN1dGUoKTsgLy8g\nZ2V0IGl0IGluIGNhY2hlDQogICAgICAgIERhdGUgZDEgPSAoRGF0ZSkgcS5l\neGVjdXRlKCk7DQogICAgICAgIGFzc2VydE5vdFNhbWUoZDAsIGQxKTsNCg0K\nICAgICAgICBEYXRlIGQyID0gKERhdGUpIHEuZXhlY3V0ZSgpOw0KICAgICAg\nICBhc3NlcnROb3RTYW1lKGQxLCBkMik7DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgdGVzdEFycmF5UHJvamVjdGlvbkZpZWxkc0FyZU5vdENhY2hlZCgp\nIHsNCiAgICAgICAgQnJva2VyIGJyb2tlciA9IF9mYWN0b3J5Lm5ld0Jyb2tl\ncigpOw0KICAgICAgICBRdWVyeSBxID0NCiAgICAgICAgICAgIGJyb2tlci5u\nZXdRdWVyeShKUFFMUGFyc2VyLkxBTkdfSlBRTCwgInNlbGVjdCBhLmRhdGVB\ncnJheSBGUk9NICIgKw0KICAgICAgICAgICAgICAgIENhY2hlT2JqZWN0QUNo\naWxkMS5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiIGEiKTsNCg0KICAgICAg\nICB0cnkgew0KICAgICAgICAgICAgcS5leGVjdXRlKCk7DQogICAgICAgICAg\nICBmYWlsKCJBbGxvd2VkIGFycmF5IHByb2plY3Rpb24gcXVlcnkuIik7DQog\nICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgIH0NCiAg\nICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29sbGVjdGlvblByb2plY3Rp\nb25GaWVsZHNBcmVOb3RDYWNoZWQoKSB7DQogICAgICAgIEJyb2tlciBicm9r\nZXIgPSBfZmFjdG9yeS5uZXdCcm9rZXIoKTsNCiAgICAgICAgUXVlcnkgcSA9\nDQogICAgICAgICAgICBicm9rZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5H\nX0pQUUwsICJzZWxlY3QgYS5zdHJpbmdDb2xsIEZST00gIiArDQogICAgICAg\nICAgICAgICAgQ2FjaGVPYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5h\nbWUoKSArICIgYSIpOw0KDQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBx\nLmV4ZWN1dGUoKTsNCiAgICAgICAgICAgIGZhaWwoIkFsbG93ZWQgYXJyYXkg\ncHJvamVjdGlvbiBxdWVyeS4iKTsNCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIHRlc3RFeHRlcm5hbGl6ZWRTaW5nbGVWYWx1ZUZpZWxkSXNOb3RDYWNoZWQo\nKSB7DQogICAgICAgIEJyb2tlciBicm9rZXIgPSBfZmFjdG9yeS5uZXdCcm9r\nZXIoKTsNCiAgICAgICAgUXVlcnkgcSA9IGJyb2tlci5uZXdRdWVyeShKUFFM\nUGFyc2VyLkxBTkdfSlBRTCwgInNlbGVjdCBhLmNscyBGUk9NICIgKw0KICAg\nICAgICAgICAgQ2FjaGVPYmplY3RXaXRoRXh0ZXJuYWxpemVkRmllbGRzLmNs\nYXNzLmdldFNpbXBsZU5hbWUoKSArICIgYSIpOw0KDQogICAgICAgIHEuc2V0\nVW5pcXVlKHRydWUpOw0KICAgICAgICBPYmplY3QgbyA9IHEuZXhlY3V0ZSgp\nOyAvLyBnZXQgaXQgaW4gY2FjaGUNCiAgICAgICAgLy8gIyMjIyMgYXNzZXJ0\nRXF1YWxzIChDbGFzcy5jbGFzcywgbyk7DQogICAgICAgIENhY2hlVGVzdEhl\nbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uRkFMU0UpOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RNdXRhdGVkUXVlcnlSZXR1\ncm5zTmV3UmVzdWx0cygpIHsNCiAgICAgICAgQnJva2VyIGJyb2tlciA9IF9m\nYWN0b3J5Lm5ld0Jyb2tlcigpOw0KICAgICAgICBRdWVyeSBxID0NCiAgICAg\nICAgICAgIGJyb2tlci5uZXdRdWVyeShKUFFMUGFyc2VyLkxBTkdfSlBRTCwN\nCiAgICAgICAgICAgICAgICAic2VsZWN0IGEubmFtZSwgbWF4KGEuYWdlKSBG\nUk9NICIgKw0KICAgICAgICAgICAgICAgICAgICBDYWNoZU9iamVjdEFDaGls\nZDEuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsNCiAgICAgICAgICAgICAgICAg\nICAgIiBhIGdyb3VwIGJ5IGEubmFtZSIpOw0KDQogICAgICAgIExpc3QgbCA9\nIChMaXN0KSBxLmV4ZWN1dGUoKTsNCiAgICAgICAgQ2FjaGVUZXN0SGVscGVy\nLml0ZXJhdGUobCk7DQogICAgICAgIENhY2hlVGVzdEhlbHBlci5hc3NlcnRJ\nbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJVRSk7DQoNCiAgICAgICAgbCA9\nIChMaXN0KSBxLmV4ZWN1dGUoKTsNCiAgICAgICAgT2JqZWN0W10gcmVzdWx0\nID0gKE9iamVjdFtdKSBsLmdldCgwKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDIsIHJlc3VsdC5sZW5ndGgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoU3Ry\naW5nLmNsYXNzLCByZXN1bHRbMF0uZ2V0Q2xhc3MoKSk7DQogICAgICAgIGFz\nc2VydEVxdWFscyhMb25nLmNsYXNzLCByZXN1bHRbMV0uZ2V0Q2xhc3MoKSk7\nDQoNCiAgICAgICAgLy8gbm93LCBtdXRhdGUgdGhlIHF1ZXJ5IGFuZCBzZWUg\nd2hhdCBoYXBwZW5zDQogICAgICAgIHEuc2V0UXVlcnkoInNlbGVjdCBtYXgo\nYS5hZ2UpLGEubmFtZSBGUk9NICIgKw0KICAgICAgICAgICAgQ2FjaGVPYmpl\nY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArICIgYSBncm91cCBi\neSBhLm5hbWUiKTsNCiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLmFzc2VydElu\nQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5GQUxTRSk7DQogICAgICAgIGwgPSAo\nTGlzdCkgcS5leGVjdXRlKCk7DQogICAgICAgIHJlc3VsdCA9IChPYmplY3Rb\nXSkgbC5nZXQoMCk7DQogICAgICAgIGFzc2VydEVxdWFscygyLCByZXN1bHQu\nbGVuZ3RoKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKExvbmcuY2xhc3MsIHJl\nc3VsdFswXS5nZXRDbGFzcygpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKFN0\ncmluZy5jbGFzcywgcmVzdWx0WzFdLmdldENsYXNzKCkpOw0KICAgICAgICBD\nYWNoZVRlc3RIZWxwZXIuaXRlcmF0ZShsKTsNCiAgICAgICAgQ2FjaGVUZXN0\nSGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5UUlVFKTsN\nCg0KICAgICAgICBsID0gKExpc3QpIHEuZXhlY3V0ZSgpOw0KICAgICAgICBy\nZXN1bHQgPSAoT2JqZWN0W10pIGwuZ2V0KDApOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMiwgcmVzdWx0Lmxlbmd0aCk7DQogICAgICAgIGFzc2VydEVxdWFs\ncyhMb25nLmNsYXNzLCByZXN1bHRbMF0uZ2V0Q2xhc3MoKSk7DQogICAgICAg\nIGFzc2VydEVxdWFscyhTdHJpbmcuY2xhc3MsIHJlc3VsdFsxXS5nZXRDbGFz\ncygpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBYWFh0ZXN0RXh0ZXJu\nYWxpemVkQ29udGFpbmVyRmllbGRJc0V4dGVybmFsaXplZCgpIHsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgdm9pZCBYWFh0ZXN0U2VyaWFsaXplZFNpbmdsZVZh\nbHVlRmllbGRJc1NlcmlhbGl6ZWQoKSB7DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgWFhYdGVzdFNlcmlhbGl6ZWRDb250YWluZXJGaWVsZElzU2VyaWFs\naXplZCgpIHsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBYWFh0ZXN0Q3Vz\ndG9tTWFwcGVkU2luZ2xlVmFsdWVGaWVsZElzSGFuZGxlZCgpIHsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgdm9pZCBYWFh0ZXN0Q3VzdG9tTWFwcGVkQ29udGFp\nbmVyRmllbGRJc0hhbmRsZWQoKSB7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBz\ndGF0aWMgaW50IGRlbGV0ZUFsbChCcm9rZXIgYnJva2VyLCBDbGFzcyBjbGF6\neiwNCiAgICAgICAgYm9vbGVhbiBzdWJjbGFzc2VzKSB7DQogICAgICAgIGZp\nbmFsIGJvb2xlYW4gdXNlRGVsZXRlQnlRdWVyeSA9IGZhbHNlOw0KDQogICAg\nICAgIGlmICh1c2VEZWxldGVCeVF1ZXJ5KSB7DQogICAgICAgICAgICBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5IHF1ZXJ5ID0NCiAgICAgICAg\nICAgICAgICBicm9rZXIubmV3UXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUws\nICJTZWxlY3QgYSBGUk9NICIgKw0KICAgICAgICAgICAgICAgICAgICBjbGF6\nei5nZXRTaW1wbGVOYW1lKCkgKyAiIGEiKTsNCiAgICAgICAgICAgIHF1ZXJ5\nLnNldENhbmRpZGF0ZVR5cGUoY2xhenosIHN1YmNsYXNzZXMpOw0KICAgICAg\nICAgICAgcmV0dXJuIChpbnQpIHF1ZXJ5LmRlbGV0ZUFsbCgpOw0KICAgICAg\nICB9IGVsc2Ugew0KICAgICAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5FeHRlbnQgZXh0ZW50ID0NCiAgICAgICAgICAgICAgICBicm9rZXIu\nbmV3RXh0ZW50KGNsYXp6LCBzdWJjbGFzc2VzKTsNCiAgICAgICAgICAgIExp\nc3QgbGlzdCA9IGV4dGVudC5saXN0KCk7DQogICAgICAgICAgICBpbnQgc2l6\nZSA9IGxpc3Quc2l6ZSgpOw0KICAgICAgICAgICAgYnJva2VyLmRlbGV0ZUFs\nbChsaXN0LCBudWxsKTsNCiAgICAgICAgICAgIHJldHVybiBzaXplOw0KICAg\nICAgICB9DQogICAgfQ0KfQ0K\n","encoding":"base64"}

