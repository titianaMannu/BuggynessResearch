{"sha":"554a1f1b6b6b07ad4d12b78e93f7fa972facf798","node_id":"MDQ6QmxvYjIwNjM2NDo1NTRhMWYxYjZiNmIwN2FkNGQxMmI3OGU5M2Y3ZmE5NzJmYWNmNzk4","size":6390,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/554a1f1b6b6b07ad4d12b78e93f7fa972facf798","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZGF0YWNhY2hlOw0KDQppbXBvcnQgamF2YS51dGlsLkNv\nbGxlY3Rpb247DQppbXBvcnQgamF2YS51dGlsLkRhdGU7DQppbXBvcnQgamF2\nYS51dGlsLkhhc2hNYXA7DQppbXBvcnQgamF2YS51dGlsLk1hcDsNCmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFjdG9yeTsNCg0K\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRhdGFj\nYWNoZS5jb21tb24uYXBwcy5DYWNoZU9iamVjdEE7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRhdGFjYWNoZS5jb21tb24uYXBw\ncy5DYWNoZU9iamVjdEFDaGlsZDE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0cmFjdFRlc3RDYXNl\nOw0KDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXI7\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXJGYWN0\nb3J5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnk7\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5qcHFsLkpQUUxQ\nYXJzZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLkpQQUZhY2FkZUhlbHBlcjsNCg0KcHVibGljIGNsYXNzIFRlc3RNdXRhYmxl\nUGFyYW1ldGVycw0KICAgIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2FzZSB7DQoN\nCiAgICBwdWJsaWMgVGVzdE11dGFibGVQYXJhbWV0ZXJzKFN0cmluZyB0ZXN0\nKSB7DQogICAgICAgIHN1cGVyKHRlc3QsICJkYXRhY2FjaGVjYWN0dXNhcHAi\nKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIEJyb2tlckZhY3RvcnkgX2ZhY3Rv\ncnk7DQogICAgcHJpdmF0ZSBEYXRlIF9zdGFydERhdGU7DQoNCiAgICBwdWJs\naWMgdm9pZCBzZXRVcCgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0K\nICAgICAgICBkZWxldGVBbGwoQ2FjaGVPYmplY3RBLmNsYXNzKTsNCiAgICAg\nICAgTWFwIHByb3BzTWFwID0gbmV3IEhhc2hNYXAoKTsNCiAgICAgICAgcHJv\ncHNNYXAucHV0KCJvcGVuanBhLkRhdGFDYWNoZSIsICJ0cnVlIik7DQogICAg\nICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5SZW1vdGVDb21taXRQcm92aWRl\nciIsICJzanZtIik7DQogICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5C\ncm9rZXJJbXBsIiwgQ2FjaGVUZXN0QnJva2VyLmNsYXNzLmdldE5hbWUoKSk7\nDQoNCiAgICAgICAgRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mID0gZ2V0RW1m\nKHByb3BzTWFwKTsNCiAgICAgICAgX2ZhY3RvcnkgPSBKUEFGYWNhZGVIZWxw\nZXIudG9Ccm9rZXJGYWN0b3J5KGVtZik7DQoNCiAgICAgICAgLy8gY3JlYXRl\nIGEgdmVyeSBlYXJseSBkYXRlIHNvIHRoYXQgd2hlbiB3ZSBtdXRhdGUgaXQs\nIHdlDQogICAgICAgIC8vIHdvbid0IG5lZWQgdG8gd29ycnkgYWJvdXQgcHJl\nY2lzaW9uIGlzc3Vlcy4NCiAgICAgICAgX3N0YXJ0RGF0ZSA9IG5ldyBqYXZh\nLnRleHQuU2ltcGxlRGF0ZUZvcm1hdCgiZGQvTU0veXl5eSIpLg0KICAgICAg\nICAgICAgcGFyc2UoIjAxLzAxLzE5OTAiKTsNCiAgICAgICAgQnJva2VyIGJy\nb2tlciA9IF9mYWN0b3J5Lm5ld0Jyb2tlcigpOw0KICAgICAgICBicm9rZXIu\nYmVnaW4oKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA1MDsgaSsr\nKSB7DQogICAgICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEgbyA9IG5ldyBD\nYWNoZU9iamVjdEFDaGlsZDENCiAgICAgICAgICAgICAgICAoIiIsICJKUFFM\nMlF1ZXJpZXMiLCBpKTsNCiAgICAgICAgICAgIG8uc2V0RGF0ZShfc3RhcnRE\nYXRlKTsNCiAgICAgICAgICAgIGJyb2tlci5wZXJzaXN0KG8sIG51bGwpOw0K\nICAgICAgICB9DQogICAgICAgIGJyb2tlci5jb21taXQoKTsNCiAgICAgICAg\nYnJva2VyLmNsb3NlKCk7DQoNCiAgICAgICAgQ2FjaGVUZXN0SGVscGVyLmNh\nY2hlTWFuYWdlcihfZmFjdG9yeSkuZ2V0U3lzdGVtUXVlcnlDYWNoZSgpLmNs\nZWFyKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVhckRvd24oKQ0K\nICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgdHJ5IHsNCiAg\nICAgICAgICAgIF9mYWN0b3J5LmNsb3NlKCk7DQogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgIH0NCg0KICAgICAgICBzdXBlci50\nZWFyRG93bigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RNdXRh\ndGVkRGF0ZVBhcmFtZXRlcigpIHsNCiAgICAgICAgQnJva2VyIGJyb2tlciA9\nIF9mYWN0b3J5Lm5ld0Jyb2tlcigpOw0KICAgICAgICBRdWVyeSBxID0gYnJv\na2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLA0KICAgICAgICAg\nICAgInNlbGVjdCBhIGZyb20gIiArDQogICAgICAgICAgICAgICAgQ2FjaGVP\nYmplY3RBQ2hpbGQxLmNsYXNzLmdldFNpbXBsZU5hbWUoKSArDQogICAgICAg\nICAgICAgICAgIiBhIHdoZXJlIGEuZGF0ZSA8IDpwX2RhdGUiKTsNCiAgICAg\nICAgRGF0ZSBkID0gbmV3IERhdGUoKTsNCiAgICAgICAgQ29sbGVjdGlvbiBj\nID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZShuZXcgT2JqZWN0W117IGQgfSk7\nDQogICAgICAgIENhY2hlVGVzdEhlbHBlci5pdGVyYXRlKGMpOw0KICAgICAg\nICBpbnQgaW5pdGlhbFNpemUgPSBjLnNpemUoKTsNCiAgICAgICAgQ2FjaGVU\nZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5UUlVF\nLA0KICAgICAgICAgICAgbmV3IE9iamVjdFtdeyBkIH0pOw0KICAgICAgICBk\nLnNldFRpbWUoX3N0YXJ0RGF0ZS5nZXRUaW1lKCkpOw0KICAgICAgICBDYWNo\nZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBCb29sZWFuLkZB\nTFNFLA0KICAgICAgICAgICAgbmV3IE9iamVjdFtdeyBkIH0pOw0KICAgICAg\nICBjID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZShuZXcgT2JqZWN0W117IGQg\nfSk7DQoNCiAgICAgICAgYXNzZXJ0RmFsc2UobmV3IEludGVnZXIoaW5pdGlh\nbFNpemUpLmVxdWFscyhuZXcgSW50ZWdlcihjLnNpemUoKSkpKTsNCiAgICB9\nDQoNCiAgICAvL0ZJWE1FIFNlZXRoYSBOb3YgMTAsMjAwNg0KICAgIC8vbmVl\nZCB0byBmaW5kIHRoZSBKUFFMIHF1ZXJ5IGZvciA6cF9hZ2UgY29udGFpbnMN\nCiAgICAvKg0KICAgIHB1YmxpYyB2b2lkIHRlc3RNdXRhdGVkU2V0UGFyYW1l\ndGVyKCkgew0KICAgICAgICBtdXRhdGVkQ29sbGVjdGlvblBhcmFtZXRlckhl\nbHBlcih0cnVlKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0TXV0\nYXRlZExpc3RQYXJhbWV0ZXIoKSB7DQogICAgICAgIG11dGF0ZWRDb2xsZWN0\naW9uUGFyYW1ldGVySGVscGVyKGZhbHNlKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCBtdXRhdGVkQ29sbGVjdGlvblBhcmFtZXRlckhlbHBlcihib29s\nZWFuIHNldCkgew0KICAgICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3Rvcnku\nbmV3QnJva2VyKCk7DQogICAgICAgIFF1ZXJ5IHEgPQ0KICAgICAgICAgICAg\nYnJva2VyLm5ld1F1ZXJ5KEpQUUxQYXJzZXIuTEFOR19KUFFMLA0KICAgICAg\nICAgICAgICAgICAgICAic2VsZWN0IGEgZnJvbSAiKw0KICAgICAgICAgICAg\nICAgICAgICBDYWNoZU9iamVjdEFDaGlsZDEuY2xhc3MuZ2V0U2ltcGxlTmFt\nZSgpKyAiYSA6cF9hZ2VzLmNvbnRhaW5zIChhZ2UpIik7DQogICAgICAgIENv\nbGxlY3Rpb24gY19wYXJhbTsNCiAgICAgICAgaWYgKHNldCkNCiAgICAgICAg\nICAgIGNfcGFyYW0gPSBuZXcgSGFzaFNldCgpOw0KICAgICAgICBlbHNlDQog\nICAgICAgICAgICBjX3BhcmFtID0gbmV3IExpbmtlZExpc3QoKTsNCiAgICAg\nICAgY19wYXJhbS5hZGQobmV3IExvbmcoMCkpOw0KICAgICAgICBjX3BhcmFt\nLmFkZChuZXcgTG9uZygxKSk7DQogICAgICAgIENvbGxlY3Rpb24gYyA9IChD\nb2xsZWN0aW9uKSBxLmV4ZWN1dGUobmV3IE9iamVjdFtdeyBjX3BhcmFtIH0p\nOw0KICAgICAgICBDYWNoZVRlc3RIZWxwZXIuaXRlcmF0ZShjKTsNCiAgICAg\nICAgaW50IGluaXRpYWxTaXplID0gYy5zaXplKCk7DQogICAgICAgIENhY2hl\nVGVzdEhlbHBlci5hc3NlcnRJbkNhY2hlKHRoaXMsIHEsIEJvb2xlYW4uVFJV\nRSwNCiAgICAgICAgICAgIG5ldyBPYmplY3RbXXsgY19wYXJhbSB9KTsNCiAg\nICAgICAgY19wYXJhbS5hZGQobmV3IExvbmcoMikpOw0KICAgICAgICBDYWNo\nZVRlc3RIZWxwZXIuYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBCb29sZWFuLkZB\nTFNFLA0KICAgICAgICAgICAgbmV3IE9iamVjdFtdeyBjX3BhcmFtIH0pOw0K\nICAgICAgICBjID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZShuZXcgT2JqZWN0\nW117IGNfcGFyYW0gfSk7DQogICAgICAgIGFzc2VydEZhbHNlKG5ldyBJbnRl\nZ2VyKGluaXRpYWxTaXplKS5lcXVhbHMobmV3IEludGVnZXIoYy5zaXplKCkp\nKSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdE11dGF0ZWRTZXRQ\nYXJhbWV0ZXJEYXRlcygpIHsNCiAgICAgICAgbXV0YXRlZENvbGxlY3Rpb25Q\nYXJhbWV0ZXJEYXRlc0hlbHBlcih0cnVlKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCB0ZXN0TXV0YXRlZExpc3RQYXJhbWV0ZXJEYXRlcygpIHsNCiAg\nICAgICAgbXV0YXRlZENvbGxlY3Rpb25QYXJhbWV0ZXJEYXRlc0hlbHBlcihm\nYWxzZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgbXV0YXRlZENvbGxl\nY3Rpb25QYXJhbWV0ZXJEYXRlc0hlbHBlcihib29sZWFuIHNldCkgew0KICAg\nICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3RvcnkubmV3QnJva2VyKCk7DQog\nICAgICAgIFF1ZXJ5IHEgPQ0KICAgICAgICAgICAgYnJva2VyLm5ld1F1ZXJ5\nKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBDYWNoZU9iamVjdEFDaGlsZDEuY2xh\nc3MsDQogICAgICAgICAgICAgICAgIjpwX2RhdGVzLmNvbnRhaW5zIChkYXRl\nKSIpOw0KICAgICAgICBDb2xsZWN0aW9uIGNfcGFyYW07DQogICAgICAgIGlm\nIChzZXQpDQogICAgICAgICAgICBjX3BhcmFtID0gbmV3IEhhc2hTZXQoKTsN\nCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgY19wYXJhbSA9IG5ldyBMaW5r\nZWRMaXN0KCk7DQogICAgICAgIGNfcGFyYW0uYWRkKG5ldyBEYXRlKCkpOw0K\nICAgICAgICBjX3BhcmFtLmFkZChuZXcgRGF0ZShTeXN0ZW0uY3VycmVudFRp\nbWVNaWxsaXMoKSAtIDEwMDApKTsNCiAgICAgICAgQ29sbGVjdGlvbiBjID0g\nKENvbGxlY3Rpb24pIHEuZXhlY3V0ZShuZXcgT2JqZWN0W117IGNfcGFyYW0g\nfSk7DQogICAgICAgIENhY2hlVGVzdEhlbHBlci5pdGVyYXRlKGMpOw0KICAg\nICAgICBpbnQgaW5pdGlhbFNpemUgPSBjLnNpemUoKTsNCiAgICAgICAgQ2Fj\naGVUZXN0SGVscGVyLmFzc2VydEluQ2FjaGUodGhpcywgcSwgQm9vbGVhbi5U\nUlVFLA0KICAgICAgICAgICAgbmV3IE9iamVjdFtdeyBjX3BhcmFtIH0pOw0K\nICAgICAgICBjX3BhcmFtLmFkZChuZXcgRGF0ZShTeXN0ZW0uY3VycmVudFRp\nbWVNaWxsaXMoKSAtIDUwMCkpOw0KICAgICAgICBDYWNoZVRlc3RIZWxwZXIu\nYXNzZXJ0SW5DYWNoZSh0aGlzLCBxLCBCb29sZWFuLkZBTFNFLA0KICAgICAg\nICAgICAgbmV3IE9iamVjdFtdeyBjX3BhcmFtIH0pOw0KICAgIH0qLw0KfQ0K\n","encoding":"base64"}

