{"sha":"e2fbb6c9bc03761dd7dc9b4dc5e7c42092be7856","node_id":"MDQ6QmxvYjIwNjM2NDplMmZiYjZjOWJjMDM3NjFkZDdkYzliNGRjNWU3YzQyMDkyYmU3ODU2","size":6537,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e2fbb6c9bc03761dd7dc9b4dc5e7c42092be7856","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGlzY3Jp\nbWluYXRvcjsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLm1ldGEuRGlzY3JpbWluYXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKcHVi\nbGljIGNsYXNzIFRlc3REaXNjcmltaW5hdG9yVHlwZXMgZXh0ZW5kcyBTaW5n\nbGVFTUZUZXN0Q2FzZSB7CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAg\nICAgICAgc3VwZXIuc2V0VXAoQ2hhckFic3RyYWN0RW50aXR5LmNsYXNzLCBD\naGFyTGVhZkVudGl0eS5jbGFzcywKICAgICAgICAgICAgICAgIENoYXJSb290\nRW50aXR5LmNsYXNzLCBJbnRlZ2VyQWJzdHJhY3RFbnRpdHkuY2xhc3MsCiAg\nICAgICAgICAgICAgICBJbnRlZ2VyTGVhZkVudGl0eS5jbGFzcywgSW50ZWdl\nclJvb3RFbnRpdHkuY2xhc3MsCiAgICAgICAgICAgICAgICBTdHJpbmdBYnN0\ncmFjdEVudGl0eS5jbGFzcywgU3RyaW5nTGVhZkVudGl0eS5jbGFzcywKICAg\nICAgICAgICAgICAgIFN0cmluZ1Jvb3RFbnRpdHkuY2xhc3MsIENMRUFSX1RB\nQkxFUyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdENoYXJEaXNjcmlt\naW5hdG9ycygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsgLy8gbG9hZCB0eXBlcwoKICAgICAgICBE\naXNjcmltaW5hdG9yIGRpc2NyaW0gPSBnZXRNYXBwaW5nKCJDaGFyQWJzdHJh\nY3RFbnRpdHkiKQogICAgICAgICAgICAgICAgLmdldERpc2NyaW1pbmF0b3Io\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMobmV3IENoYXJhY3RlcignQycpLCBk\naXNjcmltLmdldFZhbHVlKCkpOyAvLyBHZW5lcmF0ZWQKICAgICAgICBhc3Nl\ncnRFcXVhbHMoSmF2YVR5cGVzLkNIQVIsIGRpc2NyaW0uZ2V0SmF2YVR5cGUo\nKSk7CgogICAgICAgIGRpc2NyaW0gPSBnZXRNYXBwaW5nKCJjaHJMZWFmIiku\nZ2V0RGlzY3JpbWluYXRvcigpOwogICAgICAgIGFzc2VydEVxdWFscyhuZXcg\nQ2hhcmFjdGVyKCdjJyksIGRpc2NyaW0uZ2V0VmFsdWUoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKEphdmFUeXBlcy5DSEFSLCBkaXNjcmltLmdldEphdmFU\neXBlKCkpOwoKICAgICAgICBkaXNjcmltID0gZ2V0TWFwcGluZygiQ2hhclJv\nb3RFbnRpdHkiKS5nZXREaXNjcmltaW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKG5ldyBDaGFyYWN0ZXIoJ1InKSwgZGlzY3JpbS5nZXRWYWx1ZSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSmF2YVR5cGVzLkNIQVIsIGRpc2Ny\naW0uZ2V0SmF2YVR5cGUoKSk7CiAgICAgICAgCiAgICAgICAgQ2hhckxlYWZF\nbnRpdHkgbGVhZiA9IG5ldyBDaGFyTGVhZkVudGl0eSgpOwogICAgICAgIENo\nYXJSb290RW50aXR5IHJvb3QgPSBuZXcgQ2hhclJvb3RFbnRpdHkoKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0u\ncGVyc2lzdChsZWFmKTsKICAgICAgICBlbS5wZXJzaXN0KHJvb3QpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAg\nICAgICAgZW0ucmVmcmVzaChsZWFmKTsKICAgICAgICBlbS5yZWZyZXNoKHJv\nb3QpOwogICAgICAgIAogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgCiAg\nICAgICAgQ2hhckxlYWZFbnRpdHkgbGVhZjIgPSBlbS5maW5kKENoYXJMZWFm\nRW50aXR5LmNsYXNzLCBsZWFmLmdldElkKCkpOwogICAgICAgIENoYXJSb290\nRW50aXR5IHJvb3QyID0gZW0uZmluZChDaGFyUm9vdEVudGl0eS5jbGFzcywg\ncm9vdC5nZXRJZCgpKTsKICAgICAgICAKICAgICAgICBhc3NlcnROb3ROdWxs\nKGxlYWYyKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHJvb3QyKTsKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RJbnRE\naXNjcmltaW5hdG9ycygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsgLy8gbG9hZCB0aGUgdHlwZXMK\nCiAgICAgICAgRGlzY3JpbWluYXRvciBkaXNjcmltID0gZ2V0TWFwcGluZygi\nSW50ZWdlckFic3RyYWN0RW50aXR5IikKICAgICAgICAgICAgICAgIC5nZXRE\naXNjcmltaW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ldyBJbnRl\nZ2VyKCJJbnRlZ2VyQWJzdHJhY3RFbnRpdHkiLmhhc2hDb2RlKCkpLCBkaXNj\ncmltCiAgICAgICAgICAgICAgICAuZ2V0VmFsdWUoKSk7IC8vIEdlbmVyYXRl\nZCB2YWx1ZQogICAgICAgIGFzc2VydEVxdWFscyhKYXZhVHlwZXMuSU5ULCBk\naXNjcmltLmdldEphdmFUeXBlKCkpOwoKICAgICAgICBkaXNjcmltID0gZ2V0\nTWFwcGluZygiaW50TGVhZiIpLmdldERpc2NyaW1pbmF0b3IoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMobmV3IEludGVnZXIoImludExlYWYiLmhhc2hDb2Rl\nKCkpLCBkaXNjcmltLmdldFZhbHVlKCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhKYXZhVHlwZXMuSU5ULCBkaXNjcmltLmdldEphdmFUeXBlKCkpOwoKICAg\nICAgICBkaXNjcmltID0gZ2V0TWFwcGluZygiSW50ZWdlclJvb3RFbnRpdHki\nKS5nZXREaXNjcmltaW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5l\ndyBJbnRlZ2VyKDEwMTAxKSwgZGlzY3JpbS5nZXRWYWx1ZSgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoSmF2YVR5cGVzLklOVCwgZGlzY3JpbS5nZXRKYXZh\nVHlwZSgpKTsKCiAgICAgICAgSW50ZWdlckxlYWZFbnRpdHkgbGVhZiA9IG5l\ndyBJbnRlZ2VyTGVhZkVudGl0eSgpOwogICAgICAgIEludGVnZXJSb290RW50\naXR5IHJvb3QgPSBuZXcgSW50ZWdlclJvb3RFbnRpdHkoKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lz\ndChsZWFmKTsKICAgICAgICBlbS5wZXJzaXN0KHJvb3QpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAg\nZW0ucmVmcmVzaChsZWFmKTsKICAgICAgICBlbS5yZWZyZXNoKHJvb3QpOwog\nICAgICAgIAogICAgICAgIGVtLmNsZWFyKCk7CgogICAgICAgIEludGVnZXJM\nZWFmRW50aXR5IGxlYWYyID0KICAgICAgICAgICAgICAgIGVtLmZpbmQoSW50\nZWdlckxlYWZFbnRpdHkuY2xhc3MsIGxlYWYuZ2V0SWQoKSk7CiAgICAgICAg\nSW50ZWdlclJvb3RFbnRpdHkgcm9vdDIgPQogICAgICAgICAgICAgICAgZW0u\nZmluZChJbnRlZ2VyUm9vdEVudGl0eS5jbGFzcywgcm9vdC5nZXRJZCgpKTsK\nICAgICAgICAKICAgICAgICBhc3NlcnROb3ROdWxsKGxlYWYyKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKHJvb3QyKTsKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTdHJpbmdEaXNjcmltaW5hdG9y\ncygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsgLy8gbG9hZCB0aGUgdHlwZXMKICAgICAgICBEaXNj\ncmltaW5hdG9yIGRpc2NyaW0gPSBnZXRNYXBwaW5nKCJTdHJpbmdBYnN0cmFj\ndEVudGl0eSIpCiAgICAgICAgICAgICAgICAuZ2V0RGlzY3JpbWluYXRvcigp\nOwogICAgICAgIGFzc2VydEVxdWFscygiU3RyaW5nQWJzdHJhY3RFbnRpdHki\nLCBkaXNjcmltLmdldFZhbHVlKCkpOyAvLyBHZW5lcmF0ZWQKICAgICAgICBh\nc3NlcnRFcXVhbHMoSmF2YVR5cGVzLlNUUklORywgZGlzY3JpbS5nZXRKYXZh\nVHlwZSgpKTsKCiAgICAgICAgZGlzY3JpbSA9IGdldE1hcHBpbmcoInN0ckxl\nYWYiKS5nZXREaXNjcmltaW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJzdHJMZWFmIiwgZGlzY3JpbS5nZXRWYWx1ZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoSmF2YVR5cGVzLlNUUklORywgZGlzY3JpbS5nZXRKYXZhVHlw\nZSgpKTsKCiAgICAgICAgZGlzY3JpbSA9IGdldE1hcHBpbmcoIlN0cmluZ1Jv\nb3RFbnRpdHkiKS5nZXREaXNjcmltaW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJTdHJpbmdSb290IiwgZGlzY3JpbS5nZXRWYWx1ZSgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoSmF2YVR5cGVzLlNUUklORywgZGlzY3JpbS5n\nZXRKYXZhVHlwZSgpKTsKICAgICAgICAKICAgICAgICBTdHJpbmdMZWFmRW50\naXR5IGxlYWYgPSBuZXcgU3RyaW5nTGVhZkVudGl0eSgpOwogICAgICAgIFN0\ncmluZ1Jvb3RFbnRpdHkgcm9vdCA9IG5ldyBTdHJpbmdSb290RW50aXR5KCk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAg\nIGVtLnBlcnNpc3QobGVhZik7CiAgICAgICAgZW0ucGVyc2lzdChyb290KTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIAogICAgICAgIGVtLnJlZnJlc2gobGVhZik7CiAgICAgICAgZW0ucmVmcmVz\naChyb290KTsKICAgICAgICAKICAgICAgICBlbS5jbGVhcigpOwogICAgICAg\nIAogICAgICAgIFN0cmluZ0xlYWZFbnRpdHkgbGVhZjIgPSBlbS5maW5kKFN0\ncmluZ0xlYWZFbnRpdHkuY2xhc3MsIGxlYWYuZ2V0SWQoKSk7CiAgICAgICAg\nU3RyaW5nUm9vdEVudGl0eSByb290MiA9IGVtLmZpbmQoU3RyaW5nUm9vdEVu\ndGl0eS5jbGFzcywgcm9vdC5nZXRJZCgpKTsKICAgICAgICAKICAgICAgICBh\nc3NlcnROb3ROdWxsKGxlYWYyKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHJv\nb3QyKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RFeGlzdHNRdWVyeSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIFN0cmluZ1Jvb3RF\nbnRpdHkgZSA9IG5ldyBTdHJpbmdSb290RW50aXR5KCk7CiAgICAgICAgZS5z\nZXROYW1lKCJmb28iKTsKICAgICAgICBlbS5wZXJzaXN0KGUpOwoKICAgICAg\nICBlID0gbmV3IFN0cmluZ1Jvb3RFbnRpdHkoKTsKICAgICAgICBlLnNldE5h\nbWUoImZvbyIpOwogICAgICAgIGVtLnBlcnNpc3QoZSk7CgogICAgICAgIGUg\nPSBuZXcgU3RyaW5nUm9vdEVudGl0eSgpOwogICAgICAgIGUuc2V0TmFtZSgi\nYmFyIik7CiAgICAgICAgZW0ucGVyc2lzdChlKTsKCiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoK\nICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgbyBmcm9tIFN0\ncmluZ0Fic3RyYWN0RW50aXR5IG8gIiArCiAgICAgICAgICAgICJ3aGVyZSBl\neGlzdHMgKHNlbGVjdCBvMiBmcm9tIFN0cmluZ0xlYWZFbnRpdHkgbzIpIik7\nCiAgICAgICAgTGlzdDxTdHJpbmdBYnN0cmFjdEVudGl0eT4gbGlzdCA9IHEu\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscygwLCBsaXN0\nLnNpemUoKSk7CiAgICAgICAgZm9yIChTdHJpbmdBYnN0cmFjdEVudGl0eSBl\nbnRpdHkgOiBsaXN0KQogICAgICAgICAgICBhc3NlcnRUcnVlKGVudGl0eSBp\nbnN0YW5jZW9mIFN0cmluZ0xlYWZFbnRpdHkpOwogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICB9Cn0K\n","encoding":"base64"}

