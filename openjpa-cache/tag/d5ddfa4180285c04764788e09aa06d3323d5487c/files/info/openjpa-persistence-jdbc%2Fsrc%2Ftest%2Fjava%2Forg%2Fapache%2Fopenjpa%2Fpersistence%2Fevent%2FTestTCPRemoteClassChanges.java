{"sha":"030bf8fe0e7aa990d3dd3406822ae34b3c0a3423","node_id":"MDQ6QmxvYjIwNjM2NDowMzBiZjhmZTBlN2FhOTkwZDNkZDM0MDY4MjJhZTM0YjNjMGEzNDIz","size":10251,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/030bf8fe0e7aa990d3dd3406822ae34b3c0a3423","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZXZlbnQ7DQoNCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsNCmltcG9ydCBqYXZh\nLnV0aWwuTWFwOw0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1h\nbmFnZXI7DQoNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5ldmVudC5jb21tb24uYXBwcy5EdXJhdGlvbjsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXZlbnQuY29tbW9uLmFwcHMu\nUnVudGltZVRlc3QxOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsNCg0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVudC5SZW1vdGVDb21taXRFdmVu\ndDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQuUmVtb3RlQ29t\nbWl0TGlzdGVuZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50\nLlRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeTsNCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5U1BJOw0KDQpwdWJsaWMgY2xhc3MgVGVzdFRDUFJlbW90ZUNsYXNzQ2hh\nbmdlcw0KICAgIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2FzZSB7DQoNCiAgICBw\ndWJsaWMgVGVzdFRDUFJlbW90ZUNsYXNzQ2hhbmdlcyhTdHJpbmcgcykgew0K\nICAgICAgICBzdXBlcihzLCAiZXZlbnRjYWN0dXNhcHAiKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsNCiAgICAgICAgZGVsZXRlQWxs\nKFJ1bnRpbWVUZXN0MS5jbGFzcyk7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgdGVhckRvd25UZXN0Q2xhc3MoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0\naW9uIHsNCiAgICAgICAgLy9zdXBlci50ZWFyRG93blRlc3RDbGFzcygpOw0K\nICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBOVU1fT0JK\nRUNUUyA9IDQ7DQoNCiAgICBwcml2YXRlIHZvaWQgcGF1c2UoZG91YmxlIHNl\nY29uZHMpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIFRocmVhZC5j\ndXJyZW50VGhyZWFkKCkueWllbGQoKTsNCiAgICAgICAgICAgIFRocmVhZC5j\ndXJyZW50VGhyZWFkKCkuc2xlZXAoKGludCkgc2Vjb25kcyAqIDEwMDApOw0K\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgew0KICAgICAgICB9DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEFkZGVkQ2xhc3NlcygpIHsN\nCiAgICAgICAgLy8gQ3JlYXRlIHR3byBwbWZzIGluIGEgY2x1c3RlciB0aGF0\nIGFyZSB1c2luZyBSQ1BUQ1AuDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBwbWZTZW5kZXIgPSBjcmVhdGVEaXN0aW5jdEZhY3Rvcnko\nDQogICAgICAgICAgICBUQ1BSZW1vdGVDb21taXRQcm92aWRlci5jbGFzcywN\nCiAgICAgICAgICAgICJQb3J0PTU2MzYsIEFkZHJlc3Nlcz0xMjcuMC4wLjE6\nNTYzNjsxMjcuMC4wLjE6NjYzNiIpOw0KICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlckZhY3RvcnkgcG1mUmVjZWl2ZXIgPSBjcmVhdGVEaXN0aW5jdEZh\nY3RvcnkoDQogICAgICAgICAgICBUQ1BSZW1vdGVDb21taXRQcm92aWRlci5j\nbGFzcywNCiAgICAgICAgICAgICJQb3J0PTY2MzYsIEFkZHJlc3Nlcz0xMjcu\nMC4wLjE6NjYzNjsxMjcuMC4wLjE6NTYzNiIpOw0KDQogICAgICAgIC8vIFJl\nZ2lzdGVyIGEgUkNFTGlzdGVuZXIgd2l0aCB0aGUgUkNFTS4gT3VyIFJDRUxp\nc3RlbmVyIHdpbGwNCiAgICAgICAgLy8gcmVjb3JkIHRoZSB0b3RhbCBudW1i\nZXIgb2YgYSxkLCBhbmQgdSByZWNldmllZCBmcm9tIGVhY2gNCiAgICAgICAg\nLy8gUkNFIGFzIHRoZSBzZW5kaW5nIFBNIHBlcmZvcm1zIGNvbW1pdHMuDQog\nICAgICAgIFJlbW90ZUNvbW1pdExpc3RlbmVyVGVzdEltcGwgbGlzdGVuZXJB\ndFJlY2VpdmVyDQogICAgICAgICAgICA9IG5ldyBSZW1vdGVDb21taXRMaXN0\nZW5lclRlc3RJbXBsKCk7DQogICAgICAgICgoT3BlbkpQQUVudGl0eU1hbmFn\nZXJGYWN0b3J5U1BJKSBwbWZSZWNlaXZlcikuZ2V0Q29uZmlndXJhdGlvbigp\nDQogICAgICAgICAgICAuZ2V0UmVtb3RlQ29tbWl0RXZlbnRNYW5hZ2VyKCku\nDQogICAgICAgICAgICBhZGRMaXN0ZW5lcihsaXN0ZW5lckF0UmVjZWl2ZXIp\nOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtU2VuZGVyID0g\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKQ0KICAgICAgICAgICAgcG1mU2VuZGVy\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCg0KICAgICAgICBTeXN0ZW0ub3V0\nLnByaW50bG4oIi0tLS0tLS0tLS0tLS0tLS0tLS0iKTsNCiAgICAgICAgU3lz\ndGVtLm91dC5wcmludGxuKA0KICAgICAgICAgICAgIjIgUE1GcyBjcmVhdGVk\nLCBhY3RpbmcgYXMgYSBjbHVzdGVyIHVzaW5nIHBvcnRzIDU2MzYgYW5kIDY2\nMzYiKTsNCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKA0KICAgICAgICAg\nICAgIlRlc3Rpbmcgc2NlbmFyaW86Iik7DQogICAgICAgIFN5c3RlbS5vdXQu\ncHJpbnRsbigNCiAgICAgICAgICAgICIgIC0gdHggb2YgaW5zZXJ0cyAobm9y\nbWFsIHRyYW5zKVxuIiArDQogICAgICAgICAgICAgICAgIiAgLSB0eCBvZiBp\nbnNlcnRzIChsYXJnZSB0cmFucylcbiIgKw0KICAgICAgICAgICAgICAgICIg\nIC0gdHggb2YgaW5zZXJ0cyx1cGRhdGVzLCBkZWxzIChsYXJnZSB0cmFucyki\nKTsNCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKA0KICAgICAgICAgICAg\nIlJlbW90ZSBjb21taXQgZXZlbnQgd2lsbCB0cmFuc21pdCBjbGFzc2VzLiIp\nOw0KDQogICAgICAgIC8vIFBlcmZvcm0gdHJhbnNhY3Rpb24gdGhhdCBhZGRz\nIG9iamVjdHMuDQogICAgICAgIC8vIE5vcmFtbCB0cmFuc2FjdGlvbg0KICAg\nICAgICBwZXJmb3JtQWRkcyhwbVNlbmRlciwgTlVNX09CSkVDVFMpOw0KDQog\nICAgICAgIC8vIFdhaXQgZm9yIGEgYml0IHNvIHRoZSByZWNlaXZlciBjYW4g\nZ2V0IHRoZSBldmVudC4NCiAgICAgICAgcGF1c2UoMSk7DQogICAgICAgIGFz\nc2VydEVxdWFscyhOVU1fT0JKRUNUUywgbGlzdGVuZXJBdFJlY2VpdmVyLnRv\ndGFsQWRkZWRDbGFzc2VzKTsNCg0KICAgICAgICAvLyBsYXJnZVRyYW5zYWN0\naW9uDQogICAgICAgIC8vcG1TZW5kZXIuc2V0TGFyZ2VUcmFuc2FjdGlvbih0\ncnVlKTsNCiAgICAgICAgcG1TZW5kZXIuc2V0VHJhY2tDaGFuZ2VzQnlUeXBl\nKHRydWUpOw0KICAgICAgICBwZXJmb3JtQWRkcyhwbVNlbmRlciwgTlVNX09C\nSkVDVFMpOw0KICAgICAgICBwYXVzZSgxKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDIgKiBOVU1fT0JKRUNUUywgbGlzdGVuZXJBdFJlY2VpdmVyLnRvdGFs\nQWRkZWRDbGFzc2VzKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGxpc3Rl\nbmVyQXRSZWNlaXZlci50b3RhbFVwZGF0ZWRDbGFzc2VzKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDAsIGxpc3RlbmVyQXRSZWNlaXZlci50b3RhbERlbGV0\nZWRDbGFzc2VzKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKE5VTV9PQkpFQ1RT\nLCBsaXN0ZW5lckF0UmVjZWl2ZXIucmVjZWl2ZWRFeHRlbnRFdkNvdW50KTsN\nCg0KICAgICAgICAvLyBTdGlsbCBpbiBsYXJnZSB0cmFucyBtb2RlLCBwZXJm\nb3JtIHVwZGF0ZXMgYW5kIGRlbGV0ZXMgb2YNCiAgICAgICAgLy8gY2hlY2sg\ndGhhdCBjbGFzcyBuYW1lcyBhcmUgY29tbXVuaWNhdGVkDQoNCiAgICAgICAg\nLy9wbVNlbmRlci5zZXRMYXJnZVRyYW5zYWN0aW9uKHRydWUpOw0KICAgICAg\nICBwbVNlbmRlci5zZXRUcmFja0NoYW5nZXNCeVR5cGUodHJ1ZSk7DQogICAg\nICAgIHBlcmZvcm1BZGRzTW9kaWZpZXNEZWxldGVzKHBtU2VuZGVyLCBOVU1f\nT0JKRUNUUyk7DQogICAgICAgIHBhdXNlKDEpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMyAqIE5VTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVjZWl2ZXIudG90\nYWxBZGRlZENsYXNzZXMpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoTlVNX09C\nSkVDVFMsIGxpc3RlbmVyQXRSZWNlaXZlci50b3RhbFVwZGF0ZWRDbGFzc2Vz\nKTsNCiAgICAgICAgLy8gYWxsIGRlbGV0ZXMgdGhlbiBhIGNvbW1pdA0KICAg\nICAgICBhc3NlcnRFcXVhbHMoTlVNX09CSkVDVFMsIGxpc3RlbmVyQXRSZWNl\naXZlci50b3RhbERlbGV0ZWRDbGFzc2VzKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDQgKiBOVU1fT0JKRUNUUywNCiAgICAgICAgICAgIGxpc3RlbmVyQXRS\nZWNlaXZlci5yZWNlaXZlZEV4dGVudEV2Q291bnQpOw0KICAgICAgICBhc3Nl\ncnRFcXVhbHMoMCwgbGlzdGVuZXJBdFJlY2VpdmVyLnRvdGFsT2lkVXBkYXRl\nZCk7DQogICAgICAgIGFzc2VydEVxdWFscygwLCBsaXN0ZW5lckF0UmVjZWl2\nZXIudG90YWxPaWREZWxldGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAs\nIGxpc3RlbmVyQXRSZWNlaXZlci50b3RhbE9pZEFkZGVkKTsNCg0KICAgICAg\nICAvLyBzaHV0ZG93bg0KICAgICAgICBwbVNlbmRlci5jbG9zZSgpOw0KICAg\nICAgICBwbWZTZW5kZXIuY2xvc2UoKTsNCiAgICAgICAgcG1mUmVjZWl2ZXIu\nY2xvc2UoKTsNCiAgICB9DQoNCiAgICBwcm90ZWN0ZWQgZG91YmxlIHBlcmZv\ncm1BZGRzKEVudGl0eU1hbmFnZXIgcG0sDQogICAgICAgIGludCBudW1PYmpl\nY3RzKSB7DQogICAgICAgIC8vIFBlcmZvcm0gYSB0cmFuc2FjdGlvbiB0aGF0\nIHdpbGwgdHJpZ2dlciBhZGRzDQogICAgICAgIER1cmF0aW9uIHRpbWVUb0FN\nRCA9IG5ldyBEdXJhdGlvbigNCiAgICAgICAgICAgICJBZGRzLCAiICsgbnVt\nT2JqZWN0cyArICIgb2JqZWN0cy4iKTsNCiAgICAgICAgdGltZVRvQU1ELnN0\nYXJ0KCk7DQoNCiAgICAgICAgLy8gY3JlYXRlIG9iamVjdHMNCiAgICAgICAg\nUnVudGltZVRlc3QxW10gcGVyc2lzdGFibGVzID0gbmV3IFJ1bnRpbWVUZXN0\nMVtudW1PYmplY3RzXTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBw\nZXJzaXN0YWJsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHBlcnNp\nc3RhYmxlc1tpXSA9IG5ldyBSdW50aW1lVGVzdDEoImZvbyAjIiArIGksIGkp\nOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gYWRkIHRoZW0sIGEgY29tbWl0\nIHBlciBvYmplY3QNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwZXJz\naXN0YWJsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHN0YXJ0VHgo\ncG0pOw0KICAgICAgICAgICAgcG0ucGVyc2lzdChwZXJzaXN0YWJsZXNbaV0p\nOw0KICAgICAgICAgICAgZW5kVHgocG0pOw0KICAgICAgICB9DQoNCiAgICAg\nICAgdGltZVRvQU1ELnN0b3AoKTsNCiAgICAgICAgcmV0dXJuIHRpbWVUb0FN\nRC5nZXREdXJhdGlvbkFzU2Vjb25kcygpOw0KICAgIH0NCg0KICAgIHByb3Rl\nY3RlZCB2b2lkIHBlcmZvcm1BZGRzTW9kaWZpZXNEZWxldGVzKEVudGl0eU1h\nbmFnZXIgcG0sDQogICAgICAgIGludCBudW1PYmplY3RzKSB7DQogICAgICAg\nIC8vIFBlcmZvcm0gYSBzZXJpZXMgb2YgdHJhbnNhY3Rpb25zIHRoYXQgd2ls\nbCB0cmlnZ2VyIGFkZHMsDQogICAgICAgIC8vIGRlbGV0ZXMsIGFuZCB1ZHBh\ndGVzDQoNCiAgICAgICAgLy8gY3JlYXRlIG9iamVjdHMNCiAgICAgICAgUnVu\ndGltZVRlc3QxW10gcGVyc2lzdGFibGVzID0gbmV3IFJ1bnRpbWVUZXN0MVtu\ndW1PYmplY3RzXTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwZXJz\naXN0YWJsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHBlcnNpc3Rh\nYmxlc1tpXSA9IG5ldyBSdW50aW1lVGVzdDEoImZvbyAjIiArIGksIGkpOw0K\nICAgICAgICB9DQoNCiAgICAgICAgLy8gYWRkIHRoZW0NCiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBwZXJzaXN0YWJsZXMubGVuZ3RoOyBpKyspIHsN\nCiAgICAgICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICAgICAgcG0ucGVy\nc2lzdChwZXJzaXN0YWJsZXNbaV0pOw0KICAgICAgICAgICAgZW5kVHgocG0p\nOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gbW9kaWZ5IHRoZW0NCiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwZXJzaXN0YWJsZXMubGVuZ3RoOyBp\nKyspIHsNCiAgICAgICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICAgICAg\ncGVyc2lzdGFibGVzW2ldLnNldFN0cmluZ0ZpZWxkKCJiYXp6ZWQiICsgaSk7\nDQogICAgICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIH0NCg0KICAgICAg\nICAvLyBkZWxldGUgdGhlbQ0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIHBlcnNpc3RhYmxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgc3Rh\ncnRUeChwbSk7DQogICAgICAgICAgICBwbS5yZW1vdmUocGVyc2lzdGFibGVz\nW2ldKTsNCiAgICAgICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgfQ0KICAg\nIH0NCg0KICAgIHN0YXRpYyBpbnQgX2ZldGNoR3JvdXBTZXJpYWwgPSAwOw0K\nDQogICAgcHJvdGVjdGVkIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBj\ncmVhdGVEaXN0aW5jdEZhY3RvcnkoDQogICAgICAgIENsYXNzIHByb3ZpZGVy\nQ2xhc3MsIFN0cmluZyBjbGFzc1Byb3BzMSkgew0KICAgICAgICBNYXAgcHJv\ncHNNYXA7DQoNCiAgICAgICAgaWYgKHByb3ZpZGVyQ2xhc3MgIT0gbnVsbCkg\new0KDQogICAgICAgICAgICBwcm9wc01hcCA9IG5ldyBIYXNoTWFwKCk7DQog\nICAgICAgICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuUmVtb3RlQ29tbWl0\nUHJvdmlkZXIiLCBDb25maWd1cmF0aW9ucy4NCiAgICAgICAgICAgICAgICBn\nZXRQbHVnaW4ocHJvdmlkZXJDbGFzcy5nZXROYW1lKCksIGNsYXNzUHJvcHMx\nKSk7DQogICAgICAgICAgICBwcm9wc01hcC5wdXQoIm9wZW5qcGEuRmV0Y2hH\ncm91cHMiLCAiZGlmZmVyZW50aWF0aW5nRmV0Y2hHcm91cCIgKw0KICAgICAg\nICAgICAgICAgIF9mZXRjaEdyb3VwU2VyaWFsKTsNCiAgICAgICAgfSBlbHNl\nIHsNCiAgICAgICAgICAgIC8vIE5vIFJDUA0KICAgICAgICAgICAgcHJvcHNN\nYXAgPSBuZXcgSGFzaE1hcCgpOw0KICAgICAgICAgICAgcHJvcHNNYXAucHV0\nKCJvcGVuanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVyIiwgInNqdm0iKTsNCiAg\nICAgICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5GZXRjaEdyb3VwcyIs\nICJkaWZmZXJlbnRpYXRpbmdGZXRjaEdyb3VwIiArDQogICAgICAgICAgICAg\nICAgX2ZldGNoR3JvdXBTZXJpYWwpOw0KICAgICAgICB9DQogICAgICAgIF9m\nZXRjaEdyb3VwU2VyaWFsICs9IDE7DQoNCiAgICAgICAgcmV0dXJuIChPcGVu\nSlBBRW50aXR5TWFuYWdlckZhY3RvcnkpIGdldEVtZihwcm9wc01hcCk7DQog\nICAgfQ0KDQogICAgcHJvdGVjdGVkIHN0YXRpYyBjbGFzcyBSZW1vdGVDb21t\naXRMaXN0ZW5lclRlc3RJbXBsDQogICAgICAgIGltcGxlbWVudHMgUmVtb3Rl\nQ29tbWl0TGlzdGVuZXIgew0KDQogICAgICAgIENvbGxlY3Rpb24gdXBkYXRl\nZDsNCiAgICAgICAgQ29sbGVjdGlvbiBkZWxldGVkOw0KICAgICAgICBpbnQg\ndG90YWxBZGRlZENsYXNzZXMgPSAwOw0KICAgICAgICBpbnQgdG90YWxVcGRh\ndGVkQ2xhc3NlcyA9IDA7DQogICAgICAgIGludCB0b3RhbERlbGV0ZWRDbGFz\nc2VzID0gMDsNCg0KICAgICAgICBpbnQgdG90YWxPaWRBZGRlZCA9IDA7DQog\nICAgICAgIGludCB0b3RhbE9pZFVwZGF0ZWQgPSAwOw0KICAgICAgICBpbnQg\ndG90YWxPaWREZWxldGVkID0gMDsNCg0KICAgICAgICBpbnQgcmVjZWl2ZWRF\neHRlbnRFdkNvdW50ID0gMDsNCg0KICAgICAgICBwdWJsaWMgc3luY2hyb25p\nemVkIHZvaWQgYWZ0ZXJDb21taXQoUmVtb3RlQ29tbWl0RXZlbnQgZXZlbnQp\nIHsNCiAgICAgICAgICAgIHRvdGFsQWRkZWRDbGFzc2VzICs9IGV2ZW50Lmdl\ndFBlcnNpc3RlZFR5cGVOYW1lcygpLnNpemUoKTsNCiAgICAgICAgICAgIGlm\nIChldmVudC5nZXRQYXlsb2FkVHlwZSgpID09IFJlbW90ZUNvbW1pdEV2ZW50\nLlBBWUxPQURfRVhURU5UUykgew0KICAgICAgICAgICAgICAgIHJlY2VpdmVk\nRXh0ZW50RXZDb3VudCArPSAxOw0KICAgICAgICAgICAgICAgIHRvdGFsVXBk\nYXRlZENsYXNzZXMgKz0gZXZlbnQuZ2V0VXBkYXRlZFR5cGVOYW1lcygpLnNp\nemUoKTsNCiAgICAgICAgICAgICAgICB0b3RhbERlbGV0ZWRDbGFzc2VzICs9\nIGV2ZW50LmdldERlbGV0ZWRUeXBlTmFtZXMoKS5zaXplKCk7DQogICAgICAg\nICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmIChldmVudC5nZXRQ\nYXlsb2FkVHlwZSgpID09DQogICAgICAgICAgICAgICAgICAgIFJlbW90ZUNv\nbW1pdEV2ZW50LlBBWUxPQURfT0lEU19XSVRIX0FERFMpDQogICAgICAgICAg\nICAgICAgICAgIHRvdGFsT2lkQWRkZWQgPSBldmVudC5nZXRQZXJzaXN0ZWRP\nYmplY3RJZHMoKS5zaXplKCk7DQogICAgICAgICAgICAgICAgdGhpcy51cGRh\ndGVkID0gZXZlbnQuZ2V0VXBkYXRlZE9iamVjdElkcygpOw0KICAgICAgICAg\nICAgICAgIHRoaXMuZGVsZXRlZCA9IGV2ZW50LmdldERlbGV0ZWRPYmplY3RJ\nZHMoKTsNCiAgICAgICAgICAgICAgICB0b3RhbE9pZFVwZGF0ZWQgKz0gdXBk\nYXRlZC5zaXplKCk7DQogICAgICAgICAgICAgICAgdG90YWxPaWREZWxldGVk\nICs9IGRlbGV0ZWQuc2l6ZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9\nDQoNCiAgICAgICAgcHVibGljIHZvaWQgcmVzZXRDb3VudHMoKSB7DQogICAg\nICAgICAgICB0b3RhbEFkZGVkQ2xhc3NlcyA9IDA7DQogICAgICAgICAgICB0\nb3RhbFVwZGF0ZWRDbGFzc2VzID0gMDsNCiAgICAgICAgICAgIHRvdGFsRGVs\nZXRlZENsYXNzZXMgPSAwOw0KICAgICAgICAgICAgdG90YWxPaWRBZGRlZCA9\nIDA7DQogICAgICAgICAgICB0b3RhbE9pZFVwZGF0ZWQgPSAwOw0KICAgICAg\nICAgICAgdG90YWxPaWREZWxldGVkID0gMDsNCiAgICAgICAgfQ0KDQogICAg\nICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgew0KICAgICAgICB9DQoNCiAgICAg\nICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHsNCiAgICAgICAgICAgIFN0\ncmluZyByZXR1cm5TdHJpbmcgPSAiQ2xzc2VzIGFkZD0iICsgdG90YWxBZGRl\nZENsYXNzZXMgKyAiIGRlbHM9IiArDQogICAgICAgICAgICAgICAgdG90YWxE\nZWxldGVkQ2xhc3NlcyArICIgdXBzPSIgKyB0b3RhbFVwZGF0ZWRDbGFzc2Vz\nOw0KICAgICAgICAgICAgcmV0dXJuU3RyaW5nID0gcmV0dXJuU3RyaW5nICsg\nIk9pZHMgYWRkPSIgKyB0b3RhbEFkZGVkQ2xhc3NlcyArDQogICAgICAgICAg\nICAgICAgIiBkZWxzPSIgKyB0b3RhbERlbGV0ZWRDbGFzc2VzICsgIiB1cHM9\nIiArIHRvdGFsVXBkYXRlZENsYXNzZXM7DQogICAgICAgICAgICByZXR1cm4g\ncmV0dXJuU3RyaW5nOw0KICAgICAgICB9DQogICAgfQ0KfQ0K\n","encoding":"base64"}

