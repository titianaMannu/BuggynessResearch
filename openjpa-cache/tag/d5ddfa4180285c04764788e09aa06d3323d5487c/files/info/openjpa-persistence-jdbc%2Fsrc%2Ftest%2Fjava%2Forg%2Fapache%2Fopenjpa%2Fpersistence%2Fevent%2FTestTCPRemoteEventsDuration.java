{"sha":"f5d6145c567fc01f7790ab829ed98fd821757ed5","node_id":"MDQ6QmxvYjIwNjM2NDpmNWQ2MTQ1YzU2N2ZjMDFmNzc5MGFiODI5ZWQ5OGZkODIxNzU3ZWQ1","size":10287,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f5d6145c567fc01f7790ab829ed98fd821757ed5","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZXZlbnQ7DQoNCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsNCmltcG9ydCBqYXZh\nLnV0aWwuTWFwOw0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1h\nbmFnZXI7DQoNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5ldmVudC5jb21tb24uYXBwcy5EdXJhdGlvbjsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXZlbnQuY29tbW9uLmFwcHMu\nUnVudGltZVRlc3QxOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsNCg0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVudC5SZW1vdGVDb21taXRFdmVu\ndDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQuUmVtb3RlQ29t\nbWl0TGlzdGVuZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50\nLlRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXJGYWN0b3J5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEk7DQoNCnB1Ymxp\nYyBjbGFzcyBUZXN0VENQUmVtb3RlRXZlbnRzRHVyYXRpb24NCiAgICBleHRl\nbmRzIEFic3RyYWN0VGVzdENhc2Ugew0KDQogICAgcHVibGljIFRlc3RUQ1BS\nZW1vdGVFdmVudHNEdXJhdGlvbihTdHJpbmcgcykgew0KICAgICAgICBzdXBl\ncihzLCAiZXZlbnRjYWN0dXNhcHAiKTsNCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCBzZXRVcCgpIHsNCiAgICAgICAgZGVsZXRlQWxsKFJ1bnRpbWVUZXN0\nMS5jbGFzcyk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVhckRvd25U\nZXN0Q2xhc3MoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAg\nICAgLy9zdXBlci50ZWFyRG93blRlc3RDbGFzcygpOw0KICAgIH0NCg0KICAg\nIC8vIEZZSSBGb3IgMTAwMCBvYmplY3RzIHdpdGggTXlTUUwgLS0gMTAwNSB0\ncmFuc2FjdGlvbnMsDQogICAgLy8gZG9UcmFuc2FjdGlvbnMgKCkgdGFrZXMg\nNDUgc2Vjb25kcw0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBOVU1f\nT0JKRUNUUyA9IDIwMDsNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQg\nTlVNX1RPX0FWRVJBR0UgPSAzOw0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIGludCBOVU1fQ09OQ1VSUkVOVCA9IDM7DQoNCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RHVyYXRpb25EaWZmZXJlbmNlKCkgew0KICAgICAgICAvLyBjcmVhdGUg\nYSBub24tY2x1c2VydGVkLCBzaW5nbGUgcG1mDQogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSBmYWN0b3J5U2luZ2xlID0gY3JlYXRlRGlz\ndGluY3RGYWN0b3J5KA0KICAgICAgICAgICAgbnVsbCwgIiIpOw0KICAgICAg\nICBFbnRpdHlNYW5hZ2VyIHBtU2luZ2xlID0gZmFjdG9yeVNpbmdsZS5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7DQoNCiAgICAgICAgLy8gQ3JlYXRlIDIgcG1m\ncyB0aGF0IGFyZSB1c2luZyBSQ1BUQ1AuIHJ1biBzYW1lIGJlbmFjaG1hcmsg\nb2YNCiAgICAgICAgLy8gdHJhbnNhY3Rpb25zDQogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSBzZW5kZXJGYWN0b3J5MVRDUCA9DQogICAg\nICAgICAgICBjcmVhdGVEaXN0aW5jdEZhY3RvcnkoVENQUmVtb3RlQ29tbWl0\nUHJvdmlkZXIuY2xhc3MsDQogICAgICAgICAgICAgICAgIk1heEFjdGl2ZT00\nLCBSZWNvdmVyeVRpbWVNaWxsaXM9MTAwMCwgUG9ydD01NjM2LCAiICsNCiAg\nICAgICAgICAgICAgICAgICAgIkFkZHJlc3Nlcz0xMjcuMC4wLjE6NTYzNjsx\nMjcuMC4wLjE6NjYzNiIpOw0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nckZhY3RvcnkgZmFjdG9yeTJUQ1AgPSBjcmVhdGVEaXN0aW5jdEZhY3Rvcnko\nDQogICAgICAgICAgICBUQ1BSZW1vdGVDb21taXRQcm92aWRlci5jbGFzcywN\nCiAgICAgICAgICAgICJQb3J0PTY2MzYsIEFkZHJlc3Nlcz0xMjcuMC4wLjE6\nNjYzNjsxMjcuMC4wLjE6NTYzNiIpOw0KDQogICAgICAgIC8vIFJlZ2lzdGVy\nIGEgUkNFTGlzdGVuZXIgd2l0aCB0aGUgUkNFTS4gVGhlIFJDRUxpc3RlbmVy\nDQogICAgICAgIC8vIHdpbGwgcmVjb3JkIHRoZSBudW1iZXIgb2YNCiAgICAg\nICAgLy8gYSxkLCBhbmQgdSByZWNldmllZCB3aGVuIHRoZSBzZW5kZXIgUE0g\ncGVyZm9ybXMgY29tbWl0cy4NCiAgICAgICAgUmVtb3RlQ29tbWl0TGlzdGVu\nZXJUZXN0SW1wbCBsaXN0ZW5lckF0UmVjZWl2ZXINCiAgICAgICAgICAgID0g\nbmV3IFJlbW90ZUNvbW1pdExpc3RlbmVyVGVzdEltcGwoKTsNCiAgICAgICAg\nKChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpIGZhY3RvcnkyVENQ\nKS5nZXRDb25maWd1cmF0aW9uKCkNCiAgICAgICAgICAgIC5nZXRSZW1vdGVD\nb21taXRFdmVudE1hbmFnZXIoKS4NCiAgICAgICAgICAgIGFkZExpc3RlbmVy\nKGxpc3RlbmVyQXRSZWNlaXZlcik7DQoNCiAgICAgICAgU3lzdGVtLm91dC5w\ncmludGxuKCItLS0tLS0tLS0tLS0tLS0tLS0tIik7DQogICAgICAgIFN5c3Rl\nbS5vdXQucHJpbnRsbigiMyBQTUZzIGNyZWF0ZWQsIDEgYXMgc3RhbmRhbG9u\nZSwgYW5kIDIgYWN0aW5nICIgKw0KICAgICAgICAgICAgImFzIGEgY2x1c3Rl\nciB1c2luZyBwb3J0cyA1NjM2IGFuZCA2NjM2Iik7DQogICAgICAgIC8vIFRo\naXMgY2FsbCBpcyBhICJ0aHJvdyBhd2F5IiBydW4gdG8gc2VlZCBjYWNoZXMs\nIGV0Yy4NCiAgICAgICAgZG9UcmFuc2FjdGlvbnMocG1TaW5nbGUsIE5VTV9P\nQkpFQ1RTKTsNCg0KICAgICAgICBkb3VibGUgYmVuY2htYXJrU2luZ2xlID0g\nMC4wOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE5VTV9UT19BVkVS\nQUdFOyBpKyspIHsNCiAgICAgICAgICAgIGJlbmNobWFya1NpbmdsZSArPSBk\nb1RyYW5zYWN0aW9ucyhwbVNpbmdsZSwgTlVNX09CSkVDVFMpOw0KICAgICAg\nICB9DQogICAgICAgIGJlbmNobWFya1NpbmdsZSAvPSBOVU1fVE9fQVZFUkFH\nRTsNCg0KICAgICAgICBFbnRpdHlNYW5hZ2VyIHBtT25lVGhyZWFkID0NCiAg\nICAgICAgICAgIHNlbmRlckZhY3RvcnkxVENQLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsNCiAgICAgICAgZG91YmxlIGJlbmNobWFya0NsdXN0ZXJPbmVUaHJl\nYWQgPSBkb1RyYW5zYWN0aW9ucyhwbU9uZVRocmVhZCwNCiAgICAgICAgICAg\nIE5VTV9PQkpFQ1RTKTsNCiAgICAgICAgcG1PbmVUaHJlYWQuY2xvc2UoKTsN\nCg0KICAgICAgICBEdXJhdGlvbiB0aW1lVGhyZWFkZWQgPSBuZXcgRHVyYXRp\nb24oIkZvciAiICsgTlVNX0NPTkNVUlJFTlQgKw0KICAgICAgICAgICAgIiBj\nb25jdXJyZW50IHRocmVhZHMgcGVyZm9ybWluZyBBZGRzLCByZW1vdmVzLCBh\nbmQgZGxldGVzIGZvciAiICsNCiAgICAgICAgICAgIE5VTV9PQkpFQ1RTICsg\nIiBvYmplY3RzLiIpOw0KDQogICAgICAgIFRocmVhZFtdIGNvbmN1cnJlbnRU\naHJlYWRzID0gbmV3IFRocmVhZFtOVU1fQ09OQ1VSUkVOVF07DQogICAgICAg\nIHRpbWVUaHJlYWRlZC5zdGFydCgpOw0KICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IE5VTV9DT05DVVJSRU5UOyBpKyspIHsNCiAgICAgICAgICAgIFdv\ncmtlciB3b3JrZXIgPSBuZXcgV29ya2VyDQogICAgICAgICAgICAgICAgKHNl\nbmRlckZhY3RvcnkxVENQLmNyZWF0ZUVudGl0eU1hbmFnZXIoKSk7DQogICAg\nICAgICAgICBjb25jdXJyZW50VGhyZWFkc1tpXSA9IG5ldyBUaHJlYWQod29y\na2VyKTsNCiAgICAgICAgICAgIGNvbmN1cnJlbnRUaHJlYWRzW2ldLnN0YXJ0\nKCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gV2FpdCBmb3IgYWxsIHRocmVh\nZHMgdG8gZmluaXNoDQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTlVN\nX0NPTkNVUlJFTlQ7IGkrKykgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAg\nICAgICAgICAgICBjb25jdXJyZW50VGhyZWFkc1tpXS5qb2luKCk7DQogICAg\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgew0KICAgICAgICAgICAg\nICAgIGFzc2VydFRydWUoZmFsc2UpOw0KICAgICAgICAgICAgICAgIGJyZWFr\nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHRpbWVUaHJl\nYWRlZC5zdG9wKCk7DQogICAgICAgIGRvdWJsZSBiZW5jaG1hcmtDbHVzdGVy\nID0gdGltZVRocmVhZGVkLmdldER1cmF0aW9uQXNTZWNvbmRzKCk7DQoNCiAg\nICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJGb3IgIiArIE5VTV9PQkpFQ1RT\nICsgIiBvYmplY3RzLCBhbmQgIiArDQogICAgICAgICAgICBOVU1fQ09OQ1VS\nUkVOVCArICIgY29uY3VycmVudCB0aHJlYWRzLCB0aGUgcmVjZWl2aW5nIHBt\nZiBvZiB0aGUgIiArDQogICAgICAgICAgICAiY2x1c3RlciByZWNlaXZlZCA6\nIiArDQogICAgICAgICAgICBsaXN0ZW5lckF0UmVjZWl2ZXIudG90YWxBZGRl\nZENsYXNzZXMgKyAiIGNsYWFzZXMgYWRkcywgIiArDQogICAgICAgICAgICBs\naXN0ZW5lckF0UmVjZWl2ZXIudG90YWxEZWxldGVkICsgIiBkZWxldGVzLCAi\nICsNCiAgICAgICAgICAgIGxpc3RlbmVyQXRSZWNlaXZlci50b3RhbFVwZGF0\nZWQgKyAiIHVwZGF0ZXMiKTsNCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxu\nKA0KICAgICAgICAgICAgIlxuU2luZ2xlIHBtZiAtICIgKyBiZW5jaG1hcmtT\naW5nbGUgKw0KICAgICAgICAgICAgICAgICIocykuXG4gQ2x1c3RlcmVkIHBt\nZnMgKG9uZSB3b3JrZXIgdGhyZWFkKSAtIg0KICAgICAgICAgICAgICAgICsg\nYmVuY2htYXJrQ2x1c3Rlck9uZVRocmVhZCArDQogICAgICAgICAgICAgICAg\nIihzKS5cbiBDbHVzdGVyZWQgcG1mcyAoIiArIE5VTV9DT05DVVJSRU5UDQog\nICAgICAgICAgICAgICAgKyAiIHRocmVhZHMgLSAiICsgYmVuY2htYXJrQ2x1\nc3RlciArICIocykuXG4iKTsNCg0KICAgICAgICBUaHJlYWQuY3VycmVudFRo\ncmVhZCgpLnlpZWxkKCk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBU\naHJlYWQuY3VycmVudFRocmVhZCgpLnNsZWVwKChpbnQpIDUwMCk7DQogICAg\nICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsNCiAgICAg\nICAgICAgIGZhaWwoInVuZXhlY3B0ZWQgZXhjZXB0aW9uIGR1cmluZyBwYXVz\nZSIpOw0KICAgICAgICB9DQogICAgICAgIGFzc2VydEVxdWFscygoTlVNX0NP\nTkNVUlJFTlQgKyAxKSAqIE5VTV9PQkpFQ1RTLA0KICAgICAgICAgICAgbGlz\ndGVuZXJBdFJlY2VpdmVyLnRvdGFsQWRkZWRDbGFzc2VzKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKChOVU1fQ09OQ1VSUkVOVCArIDEpICogTlVNX09CSkVD\nVFMsDQogICAgICAgICAgICBsaXN0ZW5lckF0UmVjZWl2ZXIudG90YWxEZWxl\ndGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKChOVU1fQ09OQ1VSUkVOVCAr\nIDEpICogTlVNX09CSkVDVFMsDQogICAgICAgICAgICBsaXN0ZW5lckF0UmVj\nZWl2ZXIudG90YWxVcGRhdGVkKTsNCg0KICAgICAgICAvLyBzaHV0ZG93bg0K\nICAgICAgICBwbVNpbmdsZS5jbG9zZSgpOw0KICAgICAgICBmYWN0b3J5U2lu\nZ2xlLmNsb3NlKCk7DQoNCiAgICAgICAgZmFjdG9yeTJUQ1AuY2xvc2UoKTsN\nCiAgICAgICAgc2VuZGVyRmFjdG9yeTFUQ1AuY2xvc2UoKTsNCiAgICB9DQoN\nCiAgICAvKg0KICAgICAgKglXb3JrZXIgdGhyZWFkIHRoYXQgdGFrZXMgb3du\nZXJzaGlwIG9mIGEgUE0gdG8gcGVyZm9ybQ0KICAgICAgKgl0cmFuc2FjdGlv\nbnMuIE9uY2UgdHJhbnNhY3Rpb25zIGFyZSBjb21wbGV0ZSB0aGUgdHJlYWQN\nCiAgICAgICoJd2lsbCBjbG9zZSB0aGUgUE0gYW5kIGVuZC4NCiAgICAgICov\nDQogICAgcHJpdmF0ZSBjbGFzcyBXb3JrZXINCiAgICAgICAgaW1wbGVtZW50\ncyBSdW5uYWJsZSB7DQoNCiAgICAgICAgcHJpdmF0ZSBFbnRpdHlNYW5hZ2Vy\nIF9wbTsNCg0KICAgICAgICBwdWJsaWMgV29ya2VyKEVudGl0eU1hbmFnZXIg\ncG0pIHsNCiAgICAgICAgICAgIF9wbSA9IHBtOw0KICAgICAgICB9DQoNCiAg\nICAgICAgcHVibGljIHZvaWQgcnVuKCkgew0KICAgICAgICAgICAgZG9UcmFu\nc2FjdGlvbnMoX3BtLCBOVU1fT0JKRUNUUyk7DQogICAgICAgICAgICBlbmRF\nbShfcG0pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIGRv\ndWJsZSBkb1RyYW5zYWN0aW9ucyhFbnRpdHlNYW5hZ2VyIHBtLCBpbnQgbnVt\nT2JqZWN0cykgew0KICAgICAgICAvLyBQZXJmb3JtIGEgc2VyaWVzIG9mIHRy\nYW5zYWN0aW9ucyAgdGhhdCB3aWxsIHRyaWdnZXINCiAgICAgICAgLy8gYWRk\ncywgZGVsZXRlcywgYW5kIHVkcGF0ZXMNCiAgICAgICAgRHVyYXRpb24gdGlt\nZVRvQU1EID0gbmV3IER1cmF0aW9uKA0KICAgICAgICAgICAgIkFkZHMsIHJl\nbW92ZXMsIGFuZCBkbGV0ZXMgZm9yICIgKyBudW1PYmplY3RzICsgIiBvYmpl\nY3RzLiIpOw0KICAgICAgICB0aW1lVG9BTUQuc3RhcnQoKTsNCg0KICAgICAg\nICAvLyBjcmVhdGUgb2JqZWN0cw0KICAgICAgICBSdW50aW1lVGVzdDFbXSBw\nZXJzaXN0YWJsZXMgPSBuZXcgUnVudGltZVRlc3QxW251bU9iamVjdHNdOw0K\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBlcnNpc3RhYmxlcy5sZW5n\ndGg7IGkrKykgew0KICAgICAgICAgICAgcGVyc2lzdGFibGVzW2ldID0gbmV3\nIFJ1bnRpbWVUZXN0MSgiZm9vICMiICsgaSwgaSk7DQogICAgICAgIH0NCg0K\nICAgICAgICAvLyBhZGQgdGhlbQ0KICAgICAgICAvLyBUaGlzIHdpbGwgZ2Vu\nZXJhdGUgYSBsYXJnZXIgbnVtYmVyIG9mIHRyYW5zYWN0aW9uIGluIGEgdmVy\neQ0KICAgICAgICAvLyBzaG9ydCBhbW91bnQgb2YgdGltZSAob2xkIHNvY2tl\ndC1wZXItdHJhbnNhY3Rpb24gd291bGQNCiAgICAgICAgLy8gZXhoYXVzdCBq\ndm0gc29ja2V0IHBvb2wpDQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\ncGVyc2lzdGFibGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBzdGFy\ndFR4KHBtKTsNCiAgICAgICAgICAgIHBtLnBlcnNpc3QocGVyc2lzdGFibGVz\nW2ldKTsNCiAgICAgICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgfQ0KDQog\nICAgICAgIC8vIG1vZGlmeSB0aGVtDQogICAgICAgIHN0YXJ0VHgocG0pOw0K\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBlcnNpc3RhYmxlcy5sZW5n\ndGg7IGkrKykgew0KICAgICAgICAgICAgcGVyc2lzdGFibGVzW2ldLnNldFN0\ncmluZ0ZpZWxkKCJiYXp6ZWQiICsgaSk7DQogICAgICAgIH0NCiAgICAgICAg\nZW5kVHgocG0pOw0KDQogICAgICAgIC8vIGRlbGV0ZSB0aGVtDQogICAgICAg\nIHN0YXJ0VHgocG0pOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBl\ncnNpc3RhYmxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgcG0ucmVt\nb3ZlKHBlcnNpc3RhYmxlc1tpXSk7DQogICAgICAgIH0NCiAgICAgICAgZW5k\nVHgocG0pOw0KDQogICAgICAgIHRpbWVUb0FNRC5zdG9wKCk7DQogICAgICAg\nIHJldHVybiB0aW1lVG9BTUQuZ2V0RHVyYXRpb25Bc1NlY29uZHMoKTsNCiAg\nICB9DQoNCiAgICBzdGF0aWMgaW50IF9mZXRjaEdyb3VwU2VyaWFsID0gMDsN\nCg0KICAgIHByb3RlY3RlZCBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkg\nY3JlYXRlRGlzdGluY3RGYWN0b3J5KA0KICAgICAgICBDbGFzcyBwcm92aWRl\nckNsYXNzLCBTdHJpbmcgY2xhc3NQcm9wczEpIHsNCiAgICAgICAgU3RyaW5n\nIHRyYW5zbWl0ID0gIlRyYW5zbWl0UGVyc2lzdGVkT2JqZWN0SWRzPXRydWUi\nOw0KICAgICAgICBpZiAoY2xhc3NQcm9wczEgPT0gbnVsbCB8fCBjbGFzc1By\nb3BzMS5sZW5ndGgoKSA9PSAwKQ0KICAgICAgICAgICAgY2xhc3NQcm9wczEg\nPSB0cmFuc21pdDsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgY2xhc3NQ\ncm9wczEgKz0gIiwiICsgdHJhbnNtaXQ7DQoNCiAgICAgICAgTWFwIHByb3Bz\nTWFwOw0KICAgICAgICBpZiAocHJvdmlkZXJDbGFzcyAhPSBudWxsKSB7DQoN\nCiAgICAgICAgICAgIHByb3BzTWFwID0gbmV3IEhhc2hNYXAoKTsNCiAgICAg\nICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5SZW1vdGVDb21taXRQcm92\naWRlciIsIENvbmZpZ3VyYXRpb25zLg0KICAgICAgICAgICAgICAgIGdldFBs\ndWdpbihwcm92aWRlckNsYXNzLmdldE5hbWUoKSwgY2xhc3NQcm9wczEpKTsN\nCiAgICAgICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5GZXRjaEdyb3Vw\ncyIsICJkaWZmZXJlbnRpYXRpbmdGZXRjaEdyb3VwIiArDQogICAgICAgICAg\nICAgICAgX2ZldGNoR3JvdXBTZXJpYWwpOw0KICAgICAgICB9IGVsc2Ugew0K\nICAgICAgICAgICAgLy8gTm8gUkNQDQoNCiAgICAgICAgICAgIHByb3BzTWFw\nID0gbmV3IEhhc2hNYXAoKTsNCiAgICAgICAgICAgIHByb3BzTWFwLnB1dCgi\nb3BlbmpwYS5SZW1vdGVDb21taXRQcm92aWRlciIsDQogICAgICAgICAgICAg\nICAgInNqdm0oVHJhbnNtaXRQZXJzaXN0ZWRPYmplY3RJZHM9dHJ1ZSkiKTsN\nCiAgICAgICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5GZXRjaEdyb3Vw\ncyIsICJkaWZmZXJlbnRpYXRpbmdGZXRjaEdyb3VwIiArDQogICAgICAgICAg\nICAgICAgX2ZldGNoR3JvdXBTZXJpYWwpOw0KICAgICAgICB9DQogICAgICAg\nIF9mZXRjaEdyb3VwU2VyaWFsICs9IDE7DQoNCiAgICAgICAgcmV0dXJuIGdl\ndEVtZihwcm9wc01hcCk7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIHN0YXRp\nYyBjbGFzcyBSZW1vdGVDb21taXRMaXN0ZW5lclRlc3RJbXBsDQogICAgICAg\nIGltcGxlbWVudHMgUmVtb3RlQ29tbWl0TGlzdGVuZXIgew0KDQogICAgICAg\nIENvbGxlY3Rpb24gYWRkQ2xhc3NlczsNCiAgICAgICAgQ29sbGVjdGlvbiBh\nZGRlZDsNCiAgICAgICAgQ29sbGVjdGlvbiB1cGRhdGVkOw0KICAgICAgICBD\nb2xsZWN0aW9uIGRlbGV0ZWQ7DQogICAgICAgIGludCB0b3RhbEFkZGVkQ2xh\nc3NlczsNCiAgICAgICAgaW50IHRvdGFsVXBkYXRlZDsNCiAgICAgICAgaW50\nIHRvdGFsRGVsZXRlZDsNCg0KICAgICAgICBwdWJsaWMgc3luY2hyb25pemVk\nIHZvaWQgYWZ0ZXJDb21taXQoUmVtb3RlQ29tbWl0RXZlbnQgZXZlbnQpIHsN\nCiAgICAgICAgICAgIHRoaXMuYWRkQ2xhc3NlcyA9IGV2ZW50LmdldFBlcnNp\nc3RlZFR5cGVOYW1lcygpOw0KICAgICAgICAgICAgdGhpcy51cGRhdGVkID0g\nZXZlbnQuZ2V0VXBkYXRlZE9iamVjdElkcygpOw0KICAgICAgICAgICAgdGhp\ncy5kZWxldGVkID0gZXZlbnQuZ2V0RGVsZXRlZE9iamVjdElkcygpOw0KDQog\nICAgICAgICAgICB0b3RhbEFkZGVkQ2xhc3NlcyArPSBhZGRDbGFzc2VzLnNp\nemUoKTsNCiAgICAgICAgICAgIHRvdGFsVXBkYXRlZCArPSB1cGRhdGVkLnNp\nemUoKTsNCiAgICAgICAgICAgIHRvdGFsRGVsZXRlZCArPSBkZWxldGVkLnNp\nemUoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyB2b2lkIGNsb3Nl\nKCkgew0KICAgICAgICB9DQogICAgfQ0KfQ0K\n","encoding":"base64"}

