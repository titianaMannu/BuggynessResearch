{"sha":"e36647a23673671c63a4c9a1114a1572ed2a7279","node_id":"MDQ6QmxvYjIwNjM2NDplMzY2NDdhMjM2NzM2NzFjNjNhNGM5YTExMTRhMTU3MmVkMmE3Mjc5","size":12820,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e36647a23673671c63a4c9a1114a1572ed2a7279","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZXZlbnQ7DQoNCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsNCmltcG9ydCBqYXZh\nLnV0aWwuTWFwOw0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1h\nbmFnZXI7DQoNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5ldmVudC5jb21tb24uYXBwcy5EdXJhdGlvbjsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXZlbnQuY29tbW9uLmFwcHMu\nUnVudGltZVRlc3QxOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsNCg0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVudC5SZW1vdGVDb21taXRFdmVu\ndDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQuUmVtb3RlQ29t\nbWl0TGlzdGVuZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50\nLlRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXJGYWN0b3J5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEk7DQoNCnB1Ymxp\nYyBjbGFzcyBUZXN0VENQUmVtb3RlUmVjb3ZlcnkNCiAgICBleHRlbmRzIEFi\nc3RyYWN0VGVzdENhc2Ugew0KDQogICAgcHVibGljIFRlc3RUQ1BSZW1vdGVS\nZWNvdmVyeShTdHJpbmcgcykgew0KICAgICAgICBzdXBlcihzLCAiZXZlbnRj\nYWN0dXNhcHAiKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgp\nIHsNCiAgICAgICAgZGVsZXRlQWxsKFJ1bnRpbWVUZXN0MS5jbGFzcyk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVhckRvd25UZXN0Q2xhc3MoKQ0K\nICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgLy9zdXBlci50\nZWFyRG93blRlc3RDbGFzcygpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgc3Rh\ndGljIGZpbmFsIGludCBOVU1fT0JKRUNUUyA9IDE7DQoNCiAgICBwcml2YXRl\nIHZvaWQgcGF1c2UoZG91YmxlIHNlY29uZHMpIHsNCiAgICAgICAgdHJ5IHsN\nCiAgICAgICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFkKCkueWllbGQoKTsN\nCiAgICAgICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuc2xlZXAoKGlu\ndCkgc2Vjb25kcyAqIDEwMDApOw0KICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgew0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\ndGVzdFJlY2VpdmVyUmVjb3ZlcnMoKSB7DQogICAgICAgIC8vIENyZWF0ZSB0\nd28gcG1mcyBpbiBhIGNsdXN0ZXIgdGhhdCBhcmUgdXNpbmcgUkNQVENQLg0K\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgcG1mU2VuZGVy\nID0gY3JlYXRlRGlzdGluY3RGYWN0b3J5KA0KICAgICAgICAgICAgVENQUmVt\nb3RlQ29tbWl0UHJvdmlkZXIuY2xhc3MsDQogICAgICAgICAgICAiUG9ydD01\nNjM2LCBBZGRyZXNzZXM9MTI3LjAuMC4xOjU2MzY7MTI3LjAuMC4xOjY2MzYi\nKTsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IHBtZlJl\nY2VpdmVyID0gY3JlYXRlRGlzdGluY3RGYWN0b3J5KA0KICAgICAgICAgICAg\nVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIuY2xhc3MsDQogICAgICAgICAgICAi\nUG9ydD02NjM2LCBBZGRyZXNzZXM9MTI3LjAuMC4xOjY2MzY7MTI3LjAuMC4x\nOjU2MzYiKTsNCg0KICAgICAgICAvLyBSZWdpc3RlciBhIFJDRUxpc3RlbmVy\nIHdpdGggdGhlIFJDRU0uIE91ciBSQ0VMaXN0ZW5lciB3aWxsDQogICAgICAg\nIC8vIHJlY29yZCB0aGUgdG90YWwgbnVtYmVyIG9mIGEsZCwgYW5kIHUgcmVj\nZXZpZWQgZnJvbSBlYWNoDQogICAgICAgIC8vIFJDRSBhcyB0aGUgc2VuZGlu\nZyBQTSBwZXJmb3JtcyBjb21taXRzLg0KICAgICAgICBSZW1vdGVDb21taXRM\naXN0ZW5lclRlc3RJbXBsIGxpc3RlbmVyQXRSZWNlaXZlcg0KICAgICAgICAg\nICAgPSBuZXcgUmVtb3RlQ29tbWl0TGlzdGVuZXJUZXN0SW1wbCgpOw0KICAg\nICAgICAoKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkgcG1mUmVj\nZWl2ZXIpLmdldENvbmZpZ3VyYXRpb24oKQ0KICAgICAgICAgICAgLmdldFJl\nbW90ZUNvbW1pdEV2ZW50TWFuYWdlcigpLg0KICAgICAgICAgICAgYWRkTGlz\ndGVuZXIobGlzdGVuZXJBdFJlY2VpdmVyKTsNCg0KICAgICAgICBFbnRpdHlN\nYW5hZ2VyIHBtU2VuZGVyID0gcG1mU2VuZGVyLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsNCg0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIi0tLS0tLS0t\nLS0tLS0tLS0tLS0iKTsNCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCIy\nIFBNRnMgY3JlYXRlZCwgYWN0aW5nIGFzIGEgY2x1c3RlciB1c2luZyBwb3J0\ncyAiICsNCiAgICAgICAgICAgICI1NjM2IGFuZCA2NjM2Iik7DQogICAgICAg\nIFN5c3RlbS5vdXQucHJpbnRsbigiVGVzdGluZyBzY2VuYXJpbyB3aGVyZSBy\nZWNlaXZlciBpcyBmYWlsZWQsIHRoZW4gIiArDQogICAgICAgICAgICAicmVj\nb3ZlcmVkICIpOw0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oImFmdGVy\nIHR3byB0aW1lb3V0cyBhbGwgdGhlIHdoaWxlIHdpdGggdGhlICIgKw0KICAg\nICAgICAgICAgInNlbmRpbmcgcG0gY29udGludWluZyIpOw0KICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oInRvIHNlbmQuIik7DQoNCiAgICAgICAgLy8g\nUGVyZm9ybSBhIHNldCBvZiB0cmFuc2FjdGlvbnMuIEV2ZW50cyB3aWxsIGJl\nIGNvbW11bmljYXRlZA0KICAgICAgICBwZXJmb3JtQWRkc01vZGlmaWVzRGVs\nZXRlcyhwbVNlbmRlciwgTlVNX09CSkVDVFMpOw0KDQogICAgICAgIC8vIFdh\naXQgZm9yIGEgYml0IHNvIHRoZSByZWNlaXZlciBjYW4gZ2V0IHRoZSBldmVu\ndC4NCiAgICAgICAgcGF1c2UoMSk7DQogICAgICAgIC8vIE5vdyBGYWlsIHRo\nZSByZWNlaXZlciBpbiB0aGUgY2x1c3Rlcg0KICAgICAgICBTeXN0ZW0ub3V0\nLnByaW50bG4oIkFib3V0IHRvIGNsb3NlIHRoZSByZWNlaXZpbmcgcG1mLiIp\nOw0KICAgICAgICBwbWZSZWNlaXZlci5jbG9zZSgpOw0KICAgICAgICAvLyBX\nYWl0IGZvciBhIGJpdCBsb25nZXIgc28gdGhlIGxpc3RlbmVyJ3MgdGhyZWFk\ncyBhbGwNCiAgICAgICAgLy8gZ2V0IGNsb3NlZCBvdXQuDQogICAgICAgIHBh\ndXNlKDEpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMSwgbGlzdGVuZXJBdFJl\nY2VpdmVyLnRvdGFsQWRkZWRDbGFzc2VzKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKE5VTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVjZWl2ZXIudG90YWxEZWxl\ndGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKE5VTV9PQkpFQ1RTLCBsaXN0\nZW5lckF0UmVjZWl2ZXIudG90YWxVcGRhdGVkKTsNCg0KICAgICAgICBTeXN0\nZW0ub3V0LnByaW50bG4oIllvdSBzaG91bGQgbm93IHNlZSAxIFdBUk4gdHJp\nZ2dlcmVkIGFzIHRoZSAiICsNCiAgICAgICAgICAgICJzZW5kZXItcG1mIHRy\naWVzIHRvIHNlbmQuIik7DQogICAgICAgIC8vIFBlcmZvcm0gc2Vjb25kIHNl\ndCBvZiB0cmFuc2FjdGlvbnMuIFRoaXMgd2lsbCB0cmlnZ2VyIGEgc2luZ2xl\nDQogICAgICAgIC8vIGxvZyBXQVJOIGFzIHRoZSBwbWYgd29uJ3QgYmUgYWJs\nZSB0byBjb21tdW5jaWF0ZSBldmVudHMgdG8gdGhlDQogICAgICAgIC8vIHNl\nY29uZCBtZW1iZXIgb2YgdGhlIGNsdXN0ZXIuDQogICAgICAgIHBlcmZvcm1B\nZGRzTW9kaWZpZXNEZWxldGVzKHBtU2VuZGVyLCBOVU1fT0JKRUNUUyk7DQoN\nCiAgICAgICAgLy8gV2FpdCBmb3IgYSByZWNvdmVyeXRpbWUsIHRyeSB0cmFu\nc2FjdGlvbnMgYWdhaW4sIHRoaXMgd2lsbA0KICAgICAgICAvLyB0cmlnZ2Vy\nIGFuIElORk8NCiAgICAgICAgcGF1c2UoMTUuMSk7DQogICAgICAgIFN5c3Rl\nbS5vdXQucHJpbnRsbigiV2FpdGVkIGZvciBhIHdoaWxlLiBTaG91bGQgc2Vl\nIDEgSU5GTyBmb3IgbmV4dCAiICsNCiAgICAgICAgICAgICJ0cmFuc2FjdGlv\nbi4iKTsNCg0KICAgICAgICAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIHNpbmds\nZSBsb2cgSU5GTw0KICAgICAgICBwZXJmb3JtQWRkc01vZGlmaWVzRGVsZXRl\ncyhwbVNlbmRlciwgTlVNX09CSkVDVFMpOw0KICAgICAgICAvLyBUaGlzIGRl\nbGF5IHNob3VsZCBlbnN1cmUgdGhpcyBzZWNvbmQgc2VudCBvZg0KICAgICAg\nICAvLyB0cmFuc21pc3Npb25zIGlzIGRyb3BwZWQgYXMgZXhwZWN0ZWQuIElm\nIHdlDQogICAgICAgIC8vIGRvbid0IHBhdXNlLCB0aGUgbmV3IHBtZiBjYW4g\nYmUgY3JlYXRlZCwgdGhlbiB0aGUNCiAgICAgICAgLy8gZXZlbnRzIHdpbGwg\nYmUgc2VudCBieSB0aGUgd29ya2VyIHRocmVhZHMsIGFuZA0KICAgICAgICAv\nLyB0aGUgbmV3IHBtZiB3aWxsIHJlY2VpdmUgdGhpcyBtZXNzYWdlcyAod2hp\nY2gNCiAgICAgICAgLy8gYXJlIHN1cHBvc2VkIHRvIGJlIGRyb3BwZWQpDQog\nICAgICAgIHBhdXNlKDEuMSk7DQoNCiAgICAgICAgLy8gLS0tLS0NCiAgICAg\nICAgLy8gTm93IHJlY292ZXJ5IHRoZSBSZWNlaXZlciBhbmQgdGVzdCB0aGF0\nIG1lc3NhZ2VzDQogICAgICAgIC8vIHJlc3VtZSBiZWluZyBkZWxpdmVyZWQu\nDQogICAgICAgIC8vIC0tLS0tDQoNCiAgICAgICAgU3lzdGVtLm91dC5wcmlu\ndGxuKCJSZWNvdmVyaW5nIHJlY2VpdmVyIHBtZi4iKTsNCiAgICAgICAgLy8g\nUmVjcmVhdGUgdGhlIGxpc3RlbmVyIHBtZiBvZiB0aGUgY2x1c3Rlci4NCiAg\nICAgICAgcG1mUmVjZWl2ZXIgPSBjcmVhdGVEaXN0aW5jdEZhY3RvcnkoDQog\nICAgICAgICAgICBUQ1BSZW1vdGVDb21taXRQcm92aWRlci5jbGFzcywNCiAg\nICAgICAgICAgICJQb3J0PTY2MzYsIEFkZHJlc3Nlcz0xMjcuMC4wLjE6NjYz\nNjsxMjcuMC4wLjE6NTYzNiIpOw0KICAgICAgICBwYXVzZSgxLjApOw0KICAg\nICAgICAvLyByZVJlZ2lzdGVyIHRoZSBzYW1lIGxpc3RlbmVyDQogICAgICAg\nICgoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJKSBwbWZSZWNlaXZl\ncikuZ2V0Q29uZmlndXJhdGlvbigpDQogICAgICAgICAgICAuZ2V0UmVtb3Rl\nQ29tbWl0RXZlbnRNYW5hZ2VyKCkuDQogICAgICAgICAgICBhZGRMaXN0ZW5l\ncihsaXN0ZW5lckF0UmVjZWl2ZXIpOw0KICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgbGlzdGVuZXJBdFJlY2VpdmVyLnRvdGFsQWRkZWRDbGFzc2VzKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKE5VTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVj\nZWl2ZXIudG90YWxEZWxldGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKE5V\nTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVjZWl2ZXIudG90YWxVcGRhdGVkKTsN\nCg0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIk5vdyB3YWl0aW5nIGEg\ncmVjb3Zlcnl0aW1lIHNvIHRoYXQgdGhlIHNlbmRlciIpOw0KICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oIndpbGwgcmVzdW1lIHRyeWluZyB0byBjb25u\nZWN0IHRvIHRoZSByZWNlaXZlci4iKTsNCiAgICAgICAgcGF1c2UoMTUuMSk7\nDQoNCiAgICAgICAgLy8gVGhlc2UgZXZlbnRzIHNob3VsZCBnZXQgY29tbXVu\naWNhdGVkLg0KICAgICAgICBwZXJmb3JtQWRkc01vZGlmaWVzRGVsZXRlcyhw\nbVNlbmRlciwgTlVNX09CSkVDVFMpOw0KDQogICAgICAgIC8vIFdhaXQgZm9y\nIGEgbGFzdCBsaXR0bGUgYml0IHNvIHRoZSBsaXN0ZW5lciB0aHJlYWQgaW4N\nCiAgICAgICAgLy8gdGhlIHJlY2VpdmVyIFBNRiBjYW4gZ2V0IGFsbCBtZXNz\nYWdlcy4NCiAgICAgICAgcGF1c2UoMS4wKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDIsIGxpc3RlbmVyQXRSZWNlaXZlci50b3RhbEFkZGVkQ2xhc3Nlcyk7\nDQogICAgICAgIGFzc2VydEVxdWFscygyICogTlVNX09CSkVDVFMsIGxpc3Rl\nbmVyQXRSZWNlaXZlci50b3RhbERlbGV0ZWQpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMiAqIE5VTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVjZWl2ZXIudG90\nYWxVcGRhdGVkKTsNCg0KICAgICAgICAvLyBzaHV0ZG93bg0KICAgICAgICBw\nbVNlbmRlci5jbG9zZSgpOw0KICAgICAgICBwbWZTZW5kZXIuY2xvc2UoKTsN\nCiAgICAgICAgcG1mUmVjZWl2ZXIuY2xvc2UoKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0U2VuZGVyUmVjb3ZlcnMoKSB7DQogICAgICAgIC8v\nIENyZWF0ZSB0d28gcG1mcyBpbiBhIGNsdXN0ZXIgdGhhdCBhcmUgdXNpbmcg\nUkNQVENQLg0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkg\ncG1mU2VuZGVyID0gY3JlYXRlRGlzdGluY3RGYWN0b3J5KA0KICAgICAgICAg\nICAgVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIuY2xhc3MsDQogICAgICAgICAg\nICAiUG9ydD01NjM3LCBBZGRyZXNzZXM9MTI3LjAuMC4xOjU2Mzc7MTI3LjAu\nMC4xOjY2MzciKTsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5IHBtZlJlY2VpdmVyID0gY3JlYXRlRGlzdGluY3RGYWN0b3J5KA0KICAg\nICAgICAgICAgVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIuY2xhc3MsDQogICAg\nICAgICAgICAiUG9ydD02NjM3LCBBZGRyZXNzZXM9MTI3LjAuMC4xOjY2Mzc7\nMTI3LjAuMC4xOjU2MzciKTsNCg0KICAgICAgICBSZW1vdGVDb21taXRMaXN0\nZW5lclRlc3RJbXBsIGxpc3RlbmVyQXRSZWNlaXZlcg0KICAgICAgICAgICAg\nPSBuZXcgUmVtb3RlQ29tbWl0TGlzdGVuZXJUZXN0SW1wbCgpOw0KICAgICAg\nICAoKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkgcG1mUmVjZWl2\nZXIpLmdldENvbmZpZ3VyYXRpb24oKQ0KICAgICAgICAgICAgLmdldFJlbW90\nZUNvbW1pdEV2ZW50TWFuYWdlcigpLg0KICAgICAgICAgICAgYWRkTGlzdGVu\nZXIobGlzdGVuZXJBdFJlY2VpdmVyKTsNCg0KICAgICAgICBFbnRpdHlNYW5h\nZ2VyIHBtU2VuZGVyID0gcG1mU2VuZGVyLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsNCg0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIi0tLS0tLS0tLS0t\nLS0tLS0tLS0iKTsNCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCIyIFBN\nRnMgY3JlYXRlZCwgYWN0aW5nIGFzIGEgY2x1c3RlciB1c2luZyBwb3J0cyAi\nICsNCiAgICAgICAgICAgICI1NjM3IGFuZCA2NjM3Iik7DQogICAgICAgIFN5\nc3RlbS5vdXQucHJpbnRsbigiVGVzdGluZyBzY2VuYXJpbyB3aGVyZSBzZW5k\nZXIgZmFpbHMgYW5kIHRoZW4gIiArDQogICAgICAgICAgICAibGF0ZXIgcmVj\nb3ZlcnMuIik7DQogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiQWxsIHRo\nZSB3aGlsZSB0aGUgcmVjZWl2aW5nIHBtIHN0YXlzIHVwIGFuZCAiICsNCiAg\nICAgICAgICAgICJzaG91bGQgcmVjZWl2ZSIpOw0KICAgICAgICBTeXN0ZW0u\nb3V0LnByaW50bG4oIkV2ZW50cyAoYm90aCBiZWZvcmUgYW5kIGFmdGVyIHRo\nZSBzZW5kZXIncyAiICsNCiAgICAgICAgICAgICJmYWlsdXJlKS4iKTsNCg0K\nICAgICAgICAvLyBQZXJmb3JtIGEgc2V0IG9mIHRyYW5zYWN0aW9ucy4gRXZl\nbnRzIGluIHRoZSBjbHVzdGVyIHdpbGwgYmUNCiAgICAgICAgLy8gY29tbXVu\naWNhdGVkDQogICAgICAgIHBlcmZvcm1BZGRzTW9kaWZpZXNEZWxldGVzKHBt\nU2VuZGVyLCBOVU1fT0JKRUNUUyk7DQoNCiAgICAgICAgLy8gV2FpdCBmb3Ig\nYSBiaXQgc28gdGhlIHNvY2tldHMgaW4gb3VyIHNlbmRlciBQTUYgY2FuIGZ1\nbGx5IHRyYW5zbWl0DQogICAgICAgIC8vIHRoZWlyIEV2ZW50IG1lc3NhZ2Vz\nIHRvIHRoZSByZWNlaXZlciBQTUYuDQogICAgICAgIHBhdXNlKDIuMSk7DQog\nICAgICAgIC8vIEZhaWwgdGhlIFNlbmRlciBpbiBvdXIgY2x1c3Rlcg0KICAg\nICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlNlbmRlciBwbWYgY2xvc2VkLiIp\nOw0KICAgICAgICBwbVNlbmRlci5jbG9zZSgpOw0KICAgICAgICBwbWZTZW5k\nZXIuY2xvc2UoKTsNCg0KICAgICAgICAvLyBXYWl0IGZvciBhIHdoaWxlLCB0\ncnkgYWdhaW4sIHRoaXMgd2lsbCBsZXQgY2xvc2UgZXhjZXB0aW9uIHByb3Bh\nZ2F0ZQ0KICAgICAgICBwYXVzZSg0LjEpOw0KICAgICAgICBTeXN0ZW0ub3V0\nLnByaW50bG4oIldhaXRlZCBmb3IgYSB3aGlsZS4iKTsNCiAgICAgICAgU3lz\ndGVtLm91dC5wcmludGxuKCJSZWNvdmVyaW5nIHRoZSBzZW5kZXIgcG1mLiIp\nOw0KDQogICAgICAgIHBtZlNlbmRlciA9IGNyZWF0ZURpc3RpbmN0RmFjdG9y\neSgNCiAgICAgICAgICAgIFRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyLmNsYXNz\nLA0KICAgICAgICAgICAgIlBvcnQ9NTYzNywgQWRkcmVzc2VzPTEyNy4wLjAu\nMTo1NjM3OzEyNy4wLjAuMTo2NjM3Iik7DQogICAgICAgIHBtU2VuZGVyID0g\ncG1mU2VuZGVyLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgLy8g\nUGVyZm9ybSBhIHNlY29uZCBzZXQgb2YgdHJhbnNhY3Rpb25zLiBFdmVudHMg\naW4gdGhlIGNsdXN0ZXIgd2lsbCBiZQ0KICAgICAgICAvLyBjb21tdW5pY2F0\nZWQNCiAgICAgICAgcGVyZm9ybUFkZHNNb2RpZmllc0RlbGV0ZXMocG1TZW5k\nZXIsIE5VTV9PQkpFQ1RTKTsNCg0KICAgICAgICAvLyBXYWl0IGZvciBhIGJp\ndCBzbyB0aGUgbGlzdGVuZXIgdGhyZWFkIGluIHRoZSByZWNlaXZlciBQTUYg\nY2FuIGdldCBhbGwNCiAgICAgICAgLy8gbWVzc2FnZXMuDQogICAgICAgIHBh\ndXNlKDQuMSk7DQogICAgICAgIGFzc2VydEVxdWFscygyLCBsaXN0ZW5lckF0\nUmVjZWl2ZXIudG90YWxBZGRlZENsYXNzZXMpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMiAqIE5VTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVjZWl2ZXIudG90\nYWxEZWxldGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIgKiBOVU1fT0JK\nRUNUUywgbGlzdGVuZXJBdFJlY2VpdmVyLnRvdGFsVXBkYXRlZCk7DQoNCiAg\nICAgICAgLy8gc2h1dGRvd24NCiAgICAgICAgcG1TZW5kZXIuY2xvc2UoKTsN\nCiAgICAgICAgcG1mU2VuZGVyLmNsb3NlKCk7DQogICAgICAgIHBtZlJlY2Vp\ndmVyLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIGRvdWJsZSBw\nZXJmb3JtQWRkc01vZGlmaWVzRGVsZXRlcyhFbnRpdHlNYW5hZ2VyIHBtLA0K\nICAgICAgICBpbnQgbnVtT2JqZWN0cykgew0KICAgICAgICAvLyBQZXJmb3Jt\nIGEgc2VyaWVzIG9mIHRyYW5zYWN0aW9ucyB0aGF0IHdpbGwgdHJpZ2dlciBh\nZGRzLA0KICAgICAgICAvLyBkZWxldGVzLCBhbmQgdWRwYXRlcw0KICAgICAg\nICBEdXJhdGlvbiB0aW1lVG9BTUQgPSBuZXcgRHVyYXRpb24oDQogICAgICAg\nICAgICAiQWRkcywgcmVtb3ZlcywgYW5kIGRsZXRlcyBmb3IgIiArIG51bU9i\namVjdHMgKyAiIG9iamVjdHMuIik7DQogICAgICAgIHRpbWVUb0FNRC5zdGFy\ndCgpOw0KDQogICAgICAgIC8vIGNyZWF0ZSBvYmplY3RzDQogICAgICAgIFJ1\nbnRpbWVUZXN0MVtdIHBlcnNpc3RhYmxlcyA9IG5ldyBSdW50aW1lVGVzdDFb\nbnVtT2JqZWN0c107DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGVy\nc2lzdGFibGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBwZXJzaXN0\nYWJsZXNbaV0gPSBuZXcgUnVudGltZVRlc3QxKCJmb28gIyIgKyBpLCBpKTsN\nCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGFkZCB0aGVtDQogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgcGVyc2lzdGFibGVzLmxlbmd0aDsgaSsrKSB7\nDQogICAgICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgICAgIHBtLnBl\ncnNpc3QocGVyc2lzdGFibGVzW2ldKTsNCiAgICAgICAgICAgIGVuZFR4KHBt\nKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIG1vZGlmeSB0aGVtDQogICAg\nICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIHBlcnNpc3RhYmxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgcGVy\nc2lzdGFibGVzW2ldLnNldFN0cmluZ0ZpZWxkKCJiYXp6ZWQiICsgaSk7DQog\nICAgICAgIH0NCiAgICAgICAgZW5kVHgocG0pOw0KDQogICAgICAgIC8vIGRl\nbGV0ZSB0aGVtDQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IHBlcnNpc3RhYmxlcy5sZW5ndGg7IGkrKykgew0K\nICAgICAgICAgICAgcG0ucmVtb3ZlKHBlcnNpc3RhYmxlc1tpXSk7DQogICAg\nICAgIH0NCiAgICAgICAgZW5kVHgocG0pOw0KDQogICAgICAgIHRpbWVUb0FN\nRC5zdG9wKCk7DQogICAgICAgIHJldHVybiB0aW1lVG9BTUQuZ2V0RHVyYXRp\nb25Bc1NlY29uZHMoKTsNCiAgICB9DQoNCiAgICBzdGF0aWMgaW50IF9mZXRj\naEdyb3VwU2VyaWFsID0gMDsNCg0KICAgIHByb3RlY3RlZCBPcGVuSlBBRW50\naXR5TWFuYWdlckZhY3RvcnkgY3JlYXRlRGlzdGluY3RGYWN0b3J5KA0KICAg\nICAgICBDbGFzcyBwcm92aWRlckNsYXNzLCBTdHJpbmcgY2xhc3NQcm9wczEp\nIHsNCiAgICAgICAgTWFwIHByb3BzTWFwOw0KDQogICAgICAgIGlmIChwcm92\naWRlckNsYXNzICE9IG51bGwpIHsNCg0KICAgICAgICAgICAgcHJvcHNNYXAg\nPSBuZXcgSGFzaE1hcCgpOw0KICAgICAgICAgICAgcHJvcHNNYXAucHV0KCJv\ncGVuanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVyIiwgQ29uZmlndXJhdGlvbnMu\nDQogICAgICAgICAgICAgICAgZ2V0UGx1Z2luKHByb3ZpZGVyQ2xhc3MuZ2V0\nTmFtZSgpLCBjbGFzc1Byb3BzMSkpOw0KICAgICAgICAgICAgcHJvcHNNYXAu\ncHV0KCJvcGVuanBhLkZldGNoR3JvdXBzIiwgImRpZmZlcmVudGlhdGluZ0Zl\ndGNoR3JvdXAiICsNCiAgICAgICAgICAgICAgICBfZmV0Y2hHcm91cFNlcmlh\nbCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBObyBSQ1AN\nCiAgICAgICAgICAgIHByb3BzTWFwID0gbmV3IEhhc2hNYXAoKTsNCiAgICAg\nICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5SZW1vdGVDb21taXRQcm92\naWRlciIsICJzanZtIik7DQogICAgICAgICAgICBwcm9wc01hcC5wdXQoIm9w\nZW5qcGEuRmV0Y2hHcm91cHMiLCAiZGlmZmVyZW50aWF0aW5nRmV0Y2hHcm91\ncCIgKw0KICAgICAgICAgICAgICAgIF9mZXRjaEdyb3VwU2VyaWFsKTsNCiAg\nICAgICAgfQ0KICAgICAgICBfZmV0Y2hHcm91cFNlcmlhbCArPSAxOw0KDQog\nICAgICAgIHJldHVybiBnZXRFbWYocHJvcHNNYXApOw0KICAgIH0NCg0KICAg\nIHByb3RlY3RlZCBzdGF0aWMgY2xhc3MgUmVtb3RlQ29tbWl0TGlzdGVuZXJU\nZXN0SW1wbA0KICAgICAgICBpbXBsZW1lbnRzIFJlbW90ZUNvbW1pdExpc3Rl\nbmVyIHsNCg0KICAgICAgICBDb2xsZWN0aW9uIHVwZGF0ZWQ7DQogICAgICAg\nIENvbGxlY3Rpb24gZGVsZXRlZDsNCiAgICAgICAgaW50IHRvdGFsQWRkZWRD\nbGFzc2VzOw0KICAgICAgICBpbnQgdG90YWxVcGRhdGVkOw0KICAgICAgICBp\nbnQgdG90YWxEZWxldGVkOw0KDQogICAgICAgIHB1YmxpYyBzeW5jaHJvbml6\nZWQgdm9pZCBhZnRlckNvbW1pdChSZW1vdGVDb21taXRFdmVudCBldmVudCkg\new0KICAgICAgICAgICAgdGhpcy51cGRhdGVkID0gZXZlbnQuZ2V0VXBkYXRl\nZE9iamVjdElkcygpOw0KICAgICAgICAgICAgdGhpcy5kZWxldGVkID0gZXZl\nbnQuZ2V0RGVsZXRlZE9iamVjdElkcygpOw0KDQogICAgICAgICAgICB0b3Rh\nbEFkZGVkQ2xhc3NlcyArPSBldmVudC5nZXRQZXJzaXN0ZWRUeXBlTmFtZXMo\nKS5zaXplKCk7DQogICAgICAgICAgICB0b3RhbFVwZGF0ZWQgKz0gdXBkYXRl\nZC5zaXplKCk7DQogICAgICAgICAgICB0b3RhbERlbGV0ZWQgKz0gZGVsZXRl\nZC5zaXplKCk7DQogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkFm\ndGVyY29tbWl0ICIgKyB0aGlzKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1\nYmxpYyB2b2lkIGNsb3NlKCkgew0KICAgICAgICB9DQoNCiAgICAgICAgcHVi\nbGljIFN0cmluZyB0b1N0cmluZygpIHsNCiAgICAgICAgICAgIFN0cmluZyBy\nZXR1cm5TdHJpbmcgPSAiQWRkZWQgY2xzc2VzICIgKyB0b3RhbEFkZGVkQ2xh\nc3NlcyArDQogICAgICAgICAgICAgICAgIiBEZWxzICIgKyB0b3RhbERlbGV0\nZWQgKyAiIFVwcyAiICsgdG90YWxVcGRhdGVkOw0KICAgICAgICAgICAgcmV0\ndXJuIHJldHVyblN0cmluZzsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg==\n","encoding":"base64"}

