{"sha":"92252588dc74b60e842f74c67a2ef9b8be2c25d8","node_id":"MDQ6QmxvYjIwNjM2NDo5MjI1MjU4OGRjNzRiNjBlODQyZjc0YzY3YTJlZjliOGJlMmMyNWQ4","size":13111,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/92252588dc74b60e842f74c67a2ef9b8be2c25d8","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZXZlbnQ7DQoNCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsNCmltcG9ydCBqYXZh\nLnV0aWwuTWFwOw0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1h\nbmFnZXI7DQoNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5ldmVudC5jb21tb24uYXBwcy5EdXJhdGlvbjsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXZlbnQuY29tbW9uLmFwcHMu\nUnVudGltZVRlc3QxOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsNCg0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVudC5SZW1vdGVDb21taXRFdmVu\ndDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQuUmVtb3RlQ29t\nbWl0TGlzdGVuZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50\nLlRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXJGYWN0b3J5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEk7DQoNCnB1Ymxp\nYyBjbGFzcyBUZXN0VENQUmVtb3RlUmVjb3ZlcnlUcmFuc21pdEFkZHMNCiAg\nICBleHRlbmRzIEFic3RyYWN0VGVzdENhc2Ugew0KDQogICAgcHVibGljIFRl\nc3RUQ1BSZW1vdGVSZWNvdmVyeVRyYW5zbWl0QWRkcyhTdHJpbmcgcykgew0K\nICAgICAgICBzdXBlcihzLCAiZXZlbnRjYWN0dXNhcHAiKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsNCiAgICAgICAgZGVsZXRlQWxs\nKFJ1bnRpbWVUZXN0MS5jbGFzcyk7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgdGVhckRvd25UZXN0Q2xhc3MoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0\naW9uIHsNCiAgICAgICAgLy9zdXBlci50ZWFyRG93blRlc3RDbGFzcygpOw0K\nICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBOVU1fT0JK\nRUNUUyA9IDE7DQoNCiAgICBwcml2YXRlIHZvaWQgcGF1c2UoZG91YmxlIHNl\nY29uZHMpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIFRocmVhZC5j\ndXJyZW50VGhyZWFkKCkueWllbGQoKTsNCiAgICAgICAgICAgIFRocmVhZC5j\ndXJyZW50VGhyZWFkKCkuc2xlZXAoKGludCkgc2Vjb25kcyAqIDEwMDApOw0K\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgew0KICAgICAgICB9DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFJlY2VpdmVyUmVjb3ZlcnMo\nKSB7DQogICAgICAgIC8vIENyZWF0ZSB0d28gcG1mcyBpbiBhIGNsdXN0ZXIg\ndGhhdCBhcmUgdXNpbmcgUkNQVENQLg0KICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlckZhY3RvcnkgcG1mU2VuZGVyID0gY3JlYXRlRGlzdGluY3RGYWN0\nb3J5KA0KICAgICAgICAgICAgVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIuY2xh\nc3MsDQogICAgICAgICAgICAiUG9ydD01NjM2LCBBZGRyZXNzZXM9MTI3LjAu\nMC4xOjU2MzY7MTI3LjAuMC4xOjY2MzYiKTsNCiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5IHBtZlJlY2VpdmVyID0gY3JlYXRlRGlzdGlu\nY3RGYWN0b3J5KA0KICAgICAgICAgICAgVENQUmVtb3RlQ29tbWl0UHJvdmlk\nZXIuY2xhc3MsDQogICAgICAgICAgICAiUG9ydD02NjM2LCBBZGRyZXNzZXM9\nMTI3LjAuMC4xOjY2MzY7MTI3LjAuMC4xOjU2MzYiKTsNCg0KICAgICAgICAv\nLyBSZWdpc3RlciBhIFJDRUxpc3RlbmVyIHdpdGggdGhlIFJDRU0uIE91ciBS\nQ0VMaXN0ZW5lciB3aWxsDQogICAgICAgIC8vIHJlY29yZCB0aGUgdG90YWwg\nbnVtYmVyIG9mIGEsZCwgYW5kIHUgcmVjZXZpZWQgZnJvbSBlYWNoDQogICAg\nICAgIC8vIFJDRSBhcyB0aGUgc2VuZGluZyBQTSBwZXJmb3JtcyBjb21taXRz\nLg0KICAgICAgICBSZW1vdGVDb21taXRMaXN0ZW5lclRlc3RJbXBsIGxpc3Rl\nbmVyQXRSZWNlaXZlcg0KICAgICAgICAgICAgPSBuZXcgUmVtb3RlQ29tbWl0\nTGlzdGVuZXJUZXN0SW1wbCgpOw0KICAgICAgICAoKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeVNQSSkgcG1mUmVjZWl2ZXIpLmdldENvbmZpZ3VyYXRp\nb24oKQ0KICAgICAgICAgICAgLmdldFJlbW90ZUNvbW1pdEV2ZW50TWFuYWdl\ncigpLg0KICAgICAgICAgICAgYWRkTGlzdGVuZXIobGlzdGVuZXJBdFJlY2Vp\ndmVyKTsNCg0KICAgICAgICBFbnRpdHlNYW5hZ2VyIHBtU2VuZGVyID0gcG1m\nU2VuZGVyLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCg0KICAgICAgICBTeXN0\nZW0ub3V0LnByaW50bG4oIi0tLS0tLS0tLS0tLS0tLS0tLS0iKTsNCiAgICAg\nICAgU3lzdGVtLm91dC5wcmludGxuKCIyIFBNRnMgY3JlYXRlZCwgYWN0aW5n\nIGFzIGEgY2x1c3RlciB1c2luZyBwb3J0cyAiICsNCiAgICAgICAgICAgICI1\nNjM2IGFuZCA2NjM2Iik7DQogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigi\nVGVzdGluZyBzY2VuYXJpbyB3aGVyZSByZWNlaXZlciBpcyBmYWlsZWQsIHRo\nZW4gIiArDQogICAgICAgICAgICAicmVjb3ZlcmVkICIpOw0KICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oImFmdGVyIHR3byB0aW1lb3V0cyBhbGwgdGhl\nIHdoaWxlIHdpdGggdGhlICIgKw0KICAgICAgICAgICAgInNlbmRpbmcgcG0g\nY29udGludWluZyIpOw0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oInRv\nIHNlbmQuIik7DQoNCiAgICAgICAgLy8gUGVyZm9ybSBhIHNldCBvZiB0cmFu\nc2FjdGlvbnMuIEV2ZW50cyB3aWxsIGJlIGNvbW11bmljYXRlZA0KICAgICAg\nICBwZXJmb3JtQWRkc01vZGlmaWVzRGVsZXRlcyhwbVNlbmRlciwgTlVNX09C\nSkVDVFMpOw0KDQogICAgICAgIC8vIFdhaXQgZm9yIGEgYml0IHNvIHRoZSBy\nZWNlaXZlciBjYW4gZ2V0IHRoZSBldmVudC4NCiAgICAgICAgcGF1c2UoMyk7\nDQogICAgICAgIC8vIE5vdyBGYWlsIHRoZSByZWNlaXZlciBpbiB0aGUgY2x1\nc3Rlcg0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkFib3V0IHRvIGNs\nb3NlIHRoZSByZWNlaXZpbmcgcG1mLiIpOw0KICAgICAgICBwbWZSZWNlaXZl\nci5jbG9zZSgpOw0KICAgICAgICAvLyBXYWl0IGZvciBhIGJpdCBsb25nZXIg\nc28gdGhlIGxpc3RlbmVyJ3MgdGhyZWFkcyBhbGwNCiAgICAgICAgLy8gZ2V0\nIGNsb3NlZCBvdXQuDQogICAgICAgIHBhdXNlKDMpOw0KICAgICAgICBhc3Nl\ncnRFcXVhbHMoTlVNX09CSkVDVFMsIGxpc3RlbmVyQXRSZWNlaXZlci50b3Rh\nbEFkZGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKE5VTV9PQkpFQ1RTLCBs\naXN0ZW5lckF0UmVjZWl2ZXIudG90YWxEZWxldGVkKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKE5VTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVjZWl2ZXIudG90\nYWxVcGRhdGVkKTsNCg0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIllv\ndSBzaG91bGQgbm93IHNlZSAxIFdBUk4gdHJpZ2dlcmVkIGFzIHRoZSAiICsN\nCiAgICAgICAgICAgICJzZW5kZXItcG1mIHRyaWVzIHRvIHNlbmQuIik7DQog\nICAgICAgIC8vIFBlcmZvcm0gc2Vjb25kIHNldCBvZiB0cmFuc2FjdGlvbnMu\nIFRoaXMgd2lsbCB0cmlnZ2VyIGEgc2luZ2xlDQogICAgICAgIC8vIGxvZyBX\nQVJOIGFzIHRoZSBwbWYgd29uJ3QgYmUgYWJsZSB0byBjb21tdW5jaWF0ZSBl\ndmVudHMgdG8gdGhlDQogICAgICAgIC8vIHNlY29uZCBtZW1iZXIgb2YgdGhl\nIGNsdXN0ZXIuDQogICAgICAgIHBlcmZvcm1BZGRzTW9kaWZpZXNEZWxldGVz\nKHBtU2VuZGVyLCBOVU1fT0JKRUNUUyk7DQoNCiAgICAgICAgLy8gV2FpdCBm\nb3IgYSByZWNvdmVyeXRpbWUsIHRyeSB0cmFuc2FjdGlvbnMgYWdhaW4sIHRo\naXMgd2lsbA0KICAgICAgICAvLyB0cmlnZ2VyIGFuIElORk8NCiAgICAgICAg\ncGF1c2UoMTUuMSk7DQogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiV2Fp\ndGVkIGZvciBhIHdoaWxlLiBTaG91bGQgc2VlIDEgSU5GTyBmb3IgbmV4dCAi\nICsNCiAgICAgICAgICAgICJ0cmFuc2FjdGlvbi4iKTsNCg0KICAgICAgICAv\nLyBUaGlzIHdpbGwgdHJpZ2dlciBhIHNpbmdsZSBsb2cgSU5GTw0KICAgICAg\nICBwZXJmb3JtQWRkc01vZGlmaWVzRGVsZXRlcyhwbVNlbmRlciwgTlVNX09C\nSkVDVFMpOw0KICAgICAgICAvLyBUaGlzIGRlbGF5IHNob3VsZCBlbnN1cmUg\ndGhpcyBzZWNvbmQgc2VudCBvZg0KICAgICAgICAvLyB0cmFuc21pc3Npb25z\nIGlzIGRyb3BwZWQgYXMgZXhwZWN0ZWQuIElmIHdlDQogICAgICAgIC8vIGRv\nbid0IHBhdXNlLCB0aGUgbmV3IHBtZiBjYW4gYmUgY3JlYXRlZCwgdGhlbiB0\naGUNCiAgICAgICAgLy8gZXZlbnRzIHdpbGwgYmUgc2VudCBieSB0aGUgd29y\na2VyIHRocmVhZHMsIGFuZA0KICAgICAgICAvLyB0aGUgbmV3IHBtZiB3aWxs\nIHJlY2VpdmUgdGhpcyBtZXNzYWdlcyAod2hpY2gNCiAgICAgICAgLy8gYXJl\nIHN1cHBvc2VkIHRvIGJlIGRyb3BwZWQpDQogICAgICAgIHBhdXNlKDEuMSk7\nDQoNCiAgICAgICAgLy8gLS0tLS0NCiAgICAgICAgLy8gTm93IHJlY292ZXJ5\nIHRoZSBSZWNlaXZlciBhbmQgdGVzdCB0aGF0IG1lc3NhZ2VzDQogICAgICAg\nIC8vIHJlc3VtZSBiZWluZyBkZWxpdmVyZWQuDQogICAgICAgIC8vIC0tLS0t\nDQoNCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJSZWNvdmVyaW5nIHJl\nY2VpdmVyIHBtZi4iKTsNCiAgICAgICAgLy8gUmVjcmVhdGUgdGhlIGxpc3Rl\nbmVyIHBtZiBvZiB0aGUgY2x1c3Rlci4NCiAgICAgICAgcG1mUmVjZWl2ZXIg\nPSBjcmVhdGVEaXN0aW5jdEZhY3RvcnkoDQogICAgICAgICAgICBUQ1BSZW1v\ndGVDb21taXRQcm92aWRlci5jbGFzcywNCiAgICAgICAgICAgICJQb3J0PTY2\nMzYsIEFkZHJlc3Nlcz0xMjcuMC4wLjE6NjYzNjsxMjcuMC4wLjE6NTYzNiIp\nOw0KICAgICAgICBwYXVzZSgxLjApOw0KICAgICAgICAvLyByZVJlZ2lzdGVy\nIHRoZSBzYW1lIGxpc3RlbmVyDQogICAgICAgICgoT3BlbkpQQUVudGl0eU1h\nbmFnZXJGYWN0b3J5U1BJKSBwbWZSZWNlaXZlcikuZ2V0Q29uZmlndXJhdGlv\nbigpDQogICAgICAgICAgICAuZ2V0UmVtb3RlQ29tbWl0RXZlbnRNYW5hZ2Vy\nKCkuDQogICAgICAgICAgICBhZGRMaXN0ZW5lcihsaXN0ZW5lckF0UmVjZWl2\nZXIpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoTlVNX09CSkVDVFMsIGxpc3Rl\nbmVyQXRSZWNlaXZlci50b3RhbEFkZGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKE5VTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVjZWl2ZXIudG90YWxEZWxl\ndGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKE5VTV9PQkpFQ1RTLCBsaXN0\nZW5lckF0UmVjZWl2ZXIudG90YWxVcGRhdGVkKTsNCg0KICAgICAgICBTeXN0\nZW0ub3V0LnByaW50bG4oIk5vdyB3YWl0aW5nIGEgcmVjb3Zlcnl0aW1lIHNv\nIHRoYXQgdGhlIHNlbmRlciIpOw0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50\nbG4oIndpbGwgcmVzdW1lIHRyeWluZyB0byBjb25uZWN0IHRvIHRoZSByZWNl\naXZlci4iKTsNCiAgICAgICAgcGF1c2UoMTUuMSk7DQoNCiAgICAgICAgLy8g\nVGhlc2UgZXZlbnRzIHNob3VsZCBnZXQgY29tbXVuaWNhdGVkLg0KICAgICAg\nICBwZXJmb3JtQWRkc01vZGlmaWVzRGVsZXRlcyhwbVNlbmRlciwgTlVNX09C\nSkVDVFMpOw0KDQogICAgICAgIC8vIFdhaXQgZm9yIGEgbGFzdCBsaXR0bGUg\nYml0IHNvIHRoZSBsaXN0ZW5lciB0aHJlYWQgaW4NCiAgICAgICAgLy8gdGhl\nIHJlY2VpdmVyIFBNRiBjYW4gZ2V0IGFsbCBtZXNzYWdlcy4NCiAgICAgICAg\ncGF1c2UoMS4wKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIgKiBOVU1fT0JK\nRUNUUywgbGlzdGVuZXJBdFJlY2VpdmVyLnRvdGFsQWRkZWQpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoMiAqIE5VTV9PQkpFQ1RTLCBsaXN0ZW5lckF0UmVj\nZWl2ZXIudG90YWxEZWxldGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIg\nKiBOVU1fT0JKRUNUUywgbGlzdGVuZXJBdFJlY2VpdmVyLnRvdGFsVXBkYXRl\nZCk7DQoNCiAgICAgICAgLy8gc2h1dGRvd24NCiAgICAgICAgcG1TZW5kZXIu\nY2xvc2UoKTsNCiAgICAgICAgcG1mU2VuZGVyLmNsb3NlKCk7DQogICAgICAg\nIHBtZlJlY2VpdmVyLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgdGVzdFNlbmRlclJlY292ZXJzKCkgew0KICAgICAgICAvLyBDcmVhdGUg\ndHdvIHBtZnMgaW4gYSBjbHVzdGVyIHRoYXQgYXJlIHVzaW5nIFJDUFRDUC4N\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IHBtZlNlbmRl\nciA9IGNyZWF0ZURpc3RpbmN0RmFjdG9yeSgNCiAgICAgICAgICAgIFRDUFJl\nbW90ZUNvbW1pdFByb3ZpZGVyLmNsYXNzLA0KICAgICAgICAgICAgIlBvcnQ9\nNTYzNywgQWRkcmVzc2VzPTEyNy4wLjAuMTo1NjM3OzEyNy4wLjAuMTo2NjM3\nIik7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBwbWZS\nZWNlaXZlciA9IGNyZWF0ZURpc3RpbmN0RmFjdG9yeSgNCiAgICAgICAgICAg\nIFRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyLmNsYXNzLA0KICAgICAgICAgICAg\nIlBvcnQ9NjYzNywgQWRkcmVzc2VzPTEyNy4wLjAuMTo2NjM3OzEyNy4wLjAu\nMTo1NjM3Iik7DQoNCiAgICAgICAgUmVtb3RlQ29tbWl0TGlzdGVuZXJUZXN0\nSW1wbCBsaXN0ZW5lckF0UmVjZWl2ZXINCiAgICAgICAgICAgID0gbmV3IFJl\nbW90ZUNvbW1pdExpc3RlbmVyVGVzdEltcGwoKTsNCiAgICAgICAgKChPcGVu\nSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpIHBtZlJlY2VpdmVyKS5nZXRD\nb25maWd1cmF0aW9uKCkNCiAgICAgICAgICAgIC5nZXRSZW1vdGVDb21taXRF\ndmVudE1hbmFnZXIoKS4NCiAgICAgICAgICAgIGFkZExpc3RlbmVyKGxpc3Rl\nbmVyQXRSZWNlaXZlcik7DQoNCiAgICAgICAgRW50aXR5TWFuYWdlciBwbVNl\nbmRlciA9IHBtZlNlbmRlci5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQoNCiAg\nICAgICAgU3lzdGVtLm91dC5wcmludGxuKCItLS0tLS0tLS0tLS0tLS0tLS0t\nIik7DQogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiMiBQTUZzIGNyZWF0\nZWQsIGFjdGluZyBhcyBhIGNsdXN0ZXIgdXNpbmcgcG9ydHMgIiArDQogICAg\nICAgICAgICAiNTYzNyBhbmQgNjYzNyIpOw0KICAgICAgICBTeXN0ZW0ub3V0\nLnByaW50bG4oIlRlc3Rpbmcgc2NlbmFyaW8gd2hlcmUgc2VuZGVyIGZhaWxz\nIGFuZCB0aGVuICIgKw0KICAgICAgICAgICAgImxhdGVyIHJlY292ZXJzLiIp\nOw0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkFsbCB0aGUgd2hpbGUg\ndGhlIHJlY2VpdmluZyBwbSBzdGF5cyB1cCBhbmQgIiArDQogICAgICAgICAg\nICAic2hvdWxkIHJlY2VpdmUiKTsNCiAgICAgICAgU3lzdGVtLm91dC5wcmlu\ndGxuKCJFdmVudHMgKGJvdGggYmVmb3JlIGFuZCBhZnRlciB0aGUgc2VuZGVy\nJ3MgIiArDQogICAgICAgICAgICAiZmFpbHVyZSkuIik7DQoNCiAgICAgICAg\nLy8gUGVyZm9ybSBhIHNldCBvZiB0cmFuc2FjdGlvbnMuIEV2ZW50cyBpbiB0\naGUgY2x1c3RlciB3aWxsIGJlDQogICAgICAgIC8vIGNvbW11bmljYXRlZA0K\nICAgICAgICBwZXJmb3JtQWRkc01vZGlmaWVzRGVsZXRlcyhwbVNlbmRlciwg\nTlVNX09CSkVDVFMpOw0KDQogICAgICAgIC8vIFdhaXQgZm9yIGEgYml0IHNv\nIHRoZSBzb2NrZXRzIGluIG91ciBzZW5kZXIgUE1GIGNhbiBmdWxseSB0cmFu\nc21pdA0KICAgICAgICAvLyB0aGVpciBFdmVudCBtZXNzYWdlcyB0byB0aGUg\ncmVjZWl2ZXIgUE1GLg0KICAgICAgICBwYXVzZSgyLjEpOw0KICAgICAgICAv\nLyBGYWlsIHRoZSBTZW5kZXIgaW4gb3VyIGNsdXN0ZXINCiAgICAgICAgU3lz\ndGVtLm91dC5wcmludGxuKCJTZW5kZXIgcG1mIGNsb3NlZC4iKTsNCiAgICAg\nICAgcG1TZW5kZXIuY2xvc2UoKTsNCiAgICAgICAgcG1mU2VuZGVyLmNsb3Nl\nKCk7DQoNCiAgICAgICAgLy8gV2FpdCBmb3IgYSB3aGlsZSwgdHJ5IGFnYWlu\nLCB0aGlzIHdpbGwgbGV0IGNsb3NlIGV4Y2VwdGlvbiBwcm9wYWdhdGUNCiAg\nICAgICAgcGF1c2UoNC4xKTsNCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxu\nKCJXYWl0ZWQgZm9yIGEgd2hpbGUuIik7DQogICAgICAgIFN5c3RlbS5vdXQu\ncHJpbnRsbigiUmVjb3ZlcmluZyB0aGUgc2VuZGVyIHBtZi4iKTsNCg0KICAg\nICAgICBwbWZTZW5kZXIgPSBjcmVhdGVEaXN0aW5jdEZhY3RvcnkoDQogICAg\nICAgICAgICBUQ1BSZW1vdGVDb21taXRQcm92aWRlci5jbGFzcywNCiAgICAg\nICAgICAgICJQb3J0PTU2MzcsIEFkZHJlc3Nlcz0xMjcuMC4wLjE6NTYzNzsx\nMjcuMC4wLjE6NjYzNyIpOw0KICAgICAgICBwbVNlbmRlciA9IHBtZlNlbmRl\nci5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIC8vIFBlcmZvcm0g\nYSBzZWNvbmQgc2V0IG9mIHRyYW5zYWN0aW9ucy4gRXZlbnRzIGluIHRoZSBj\nbHVzdGVyIHdpbGwgYmUNCiAgICAgICAgLy8gY29tbXVuaWNhdGVkDQogICAg\nICAgIHBlcmZvcm1BZGRzTW9kaWZpZXNEZWxldGVzKHBtU2VuZGVyLCBOVU1f\nT0JKRUNUUyk7DQoNCiAgICAgICAgLy8gV2FpdCBmb3IgYSBiaXQgc28gdGhl\nIGxpc3RlbmVyIHRocmVhZCBpbiB0aGUgcmVjZWl2ZXIgUE1GIGNhbiBnZXQg\nYWxsDQogICAgICAgIC8vIG1lc3NhZ2VzLg0KICAgICAgICBwYXVzZSg0LjEp\nOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiAqIE5VTV9PQkpFQ1RTLCBsaXN0\nZW5lckF0UmVjZWl2ZXIudG90YWxBZGRlZCk7DQogICAgICAgIGFzc2VydEVx\ndWFscygyICogTlVNX09CSkVDVFMsIGxpc3RlbmVyQXRSZWNlaXZlci50b3Rh\nbERlbGV0ZWQpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiAqIE5VTV9PQkpF\nQ1RTLCBsaXN0ZW5lckF0UmVjZWl2ZXIudG90YWxVcGRhdGVkKTsNCg0KICAg\nICAgICAvLyBzaHV0ZG93bg0KICAgICAgICBwbVNlbmRlci5jbG9zZSgpOw0K\nICAgICAgICBwbWZTZW5kZXIuY2xvc2UoKTsNCiAgICAgICAgcG1mUmVjZWl2\nZXIuY2xvc2UoKTsNCiAgICB9DQoNCiAgICBwcm90ZWN0ZWQgZG91YmxlIHBl\ncmZvcm1BZGRzTW9kaWZpZXNEZWxldGVzKEVudGl0eU1hbmFnZXIgcG0sDQog\nICAgICAgIGludCBudW1PYmplY3RzKSB7DQogICAgICAgIC8vIFBlcmZvcm0g\nYSBzZXJpZXMgb2YgdHJhbnNhY3Rpb25zIHRoYXQgd2lsbCB0cmlnZ2VyIGFk\nZHMsDQogICAgICAgIC8vIGRlbGV0ZXMsIGFuZCB1ZHBhdGVzDQogICAgICAg\nIER1cmF0aW9uIHRpbWVUb0FNRCA9IG5ldyBEdXJhdGlvbigNCiAgICAgICAg\nICAgICJBZGRzLCByZW1vdmVzLCBhbmQgZGxldGVzIGZvciAiICsgbnVtT2Jq\nZWN0cyArICIgb2JqZWN0cy4iKTsNCiAgICAgICAgdGltZVRvQU1ELnN0YXJ0\nKCk7DQoNCiAgICAgICAgLy8gY3JlYXRlIG9iamVjdHMNCiAgICAgICAgUnVu\ndGltZVRlc3QxW10gcGVyc2lzdGFibGVzID0gbmV3IFJ1bnRpbWVUZXN0MVtu\ndW1PYmplY3RzXTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwZXJz\naXN0YWJsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHBlcnNpc3Rh\nYmxlc1tpXSA9IG5ldyBSdW50aW1lVGVzdDEoImZvbyAjIiArIGksIGkpOw0K\nICAgICAgICB9DQoNCiAgICAgICAgLy8gYWRkIHRoZW0NCiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBwZXJzaXN0YWJsZXMubGVuZ3RoOyBpKyspIHsN\nCiAgICAgICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICAgICAgcG0ucGVy\nc2lzdChwZXJzaXN0YWJsZXNbaV0pOw0KICAgICAgICAgICAgZW5kVHgocG0p\nOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gbW9kaWZ5IHRoZW0NCiAgICAg\nICAgc3RhcnRUeChwbSk7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\ncGVyc2lzdGFibGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBwZXJz\naXN0YWJsZXNbaV0uc2V0U3RyaW5nRmllbGQoImJhenplZCIgKyBpKTsNCiAg\nICAgICAgfQ0KICAgICAgICBlbmRUeChwbSk7DQoNCiAgICAgICAgLy8gZGVs\nZXRlIHRoZW0NCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgcGVyc2lzdGFibGVzLmxlbmd0aDsgaSsrKSB7DQog\nICAgICAgICAgICBwbS5yZW1vdmUocGVyc2lzdGFibGVzW2ldKTsNCiAgICAg\nICAgfQ0KICAgICAgICBlbmRUeChwbSk7DQoNCiAgICAgICAgdGltZVRvQU1E\nLnN0b3AoKTsNCiAgICAgICAgcmV0dXJuIHRpbWVUb0FNRC5nZXREdXJhdGlv\nbkFzU2Vjb25kcygpOw0KICAgIH0NCg0KICAgIHN0YXRpYyBpbnQgX2ZldGNo\nR3JvdXBTZXJpYWwgPSAwOw0KDQogICAgcHJvdGVjdGVkIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeSBjcmVhdGVEaXN0aW5jdEZhY3RvcnkoDQogICAg\nICAgIENsYXNzIHByb3ZpZGVyQ2xhc3MsIFN0cmluZyBjbGFzc1Byb3BzMSkg\new0KICAgICAgICBTdHJpbmcgdHJhbnNtaXQgPSAiVHJhbnNtaXRQZXJzaXN0\nZWRPYmplY3RJZHM9dHJ1ZSI7DQogICAgICAgIGlmIChjbGFzc1Byb3BzMSA9\nPSBudWxsIHx8IGNsYXNzUHJvcHMxLmxlbmd0aCgpID09IDApDQogICAgICAg\nICAgICBjbGFzc1Byb3BzMSA9IHRyYW5zbWl0Ow0KICAgICAgICBlbHNlDQog\nICAgICAgICAgICBjbGFzc1Byb3BzMSArPSAiLCIgKyB0cmFuc21pdDsNCg0K\nICAgICAgICBNYXAgcHJvcHNNYXA7DQogICAgICAgIGlmIChwcm92aWRlckNs\nYXNzICE9IG51bGwpIHsNCiAgICAgICAgICAgIHByb3BzTWFwID0gbmV3IEhh\nc2hNYXAoKTsNCiAgICAgICAgICAgIHByb3BzTWFwLnB1dCgib3BlbmpwYS5S\nZW1vdGVDb21taXRQcm92aWRlciIsIENvbmZpZ3VyYXRpb25zLg0KICAgICAg\nICAgICAgICAgIGdldFBsdWdpbihwcm92aWRlckNsYXNzLmdldE5hbWUoKSwg\nY2xhc3NQcm9wczEpKTsNCiAgICAgICAgICAgIHByb3BzTWFwLnB1dCgib3Bl\nbmpwYS5GZXRjaEdyb3VwcyIsICJkaWZmZXJlbnRpYXRpbmdGZXRjaEdyb3Vw\nIiArDQogICAgICAgICAgICAgICAgX2ZldGNoR3JvdXBTZXJpYWwpOw0KICAg\nICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gTm8gUkNQDQoNCiAgICAg\nICAgICAgIHByb3BzTWFwID0gbmV3IEhhc2hNYXAoKTsNCiAgICAgICAgICAg\nIHByb3BzTWFwLnB1dCgib3BlbmpwYS5SZW1vdGVDb21taXRQcm92aWRlciIs\nDQogICAgICAgICAgICAgICAgInNqdm0oVHJhbnNtaXRQZXJzaXN0ZWRPYmpl\nY3RJZHM9dHJ1ZSkiKTsNCiAgICAgICAgICAgIHByb3BzTWFwLnB1dCgib3Bl\nbmpwYS5GZXRjaEdyb3VwcyIsICJkaWZmZXJlbnRpYXRpbmdGZXRjaEdyb3Vw\nIiArDQogICAgICAgICAgICAgICAgX2ZldGNoR3JvdXBTZXJpYWwpOw0KICAg\nICAgICB9DQogICAgICAgIF9mZXRjaEdyb3VwU2VyaWFsICs9IDE7DQoNCiAg\nICAgICAgcmV0dXJuIGdldEVtZihwcm9wc01hcCk7DQogICAgfQ0KDQogICAg\ncHJvdGVjdGVkIHN0YXRpYyBjbGFzcyBSZW1vdGVDb21taXRMaXN0ZW5lclRl\nc3RJbXBsDQogICAgICAgIGltcGxlbWVudHMgUmVtb3RlQ29tbWl0TGlzdGVu\nZXIgew0KDQogICAgICAgIENvbGxlY3Rpb24gYWRkZWQ7DQogICAgICAgIENv\nbGxlY3Rpb24gdXBkYXRlZDsNCiAgICAgICAgQ29sbGVjdGlvbiBkZWxldGVk\nOw0KICAgICAgICBpbnQgdG90YWxBZGRlZDsNCiAgICAgICAgaW50IHRvdGFs\nVXBkYXRlZDsNCiAgICAgICAgaW50IHRvdGFsRGVsZXRlZDsNCg0KICAgICAg\nICBwdWJsaWMgc3luY2hyb25pemVkIHZvaWQgYWZ0ZXJDb21taXQoUmVtb3Rl\nQ29tbWl0RXZlbnQgZXZlbnQpIHsNCg0KICAgICAgICAgICAgdGhpcy5hZGRl\nZCA9IGV2ZW50LmdldFBlcnNpc3RlZE9iamVjdElkcygpOw0KICAgICAgICAg\nICAgdGhpcy51cGRhdGVkID0gZXZlbnQuZ2V0VXBkYXRlZE9iamVjdElkcygp\nOw0KICAgICAgICAgICAgdGhpcy5kZWxldGVkID0gZXZlbnQuZ2V0RGVsZXRl\nZE9iamVjdElkcygpOw0KDQogICAgICAgICAgICB0b3RhbEFkZGVkICs9IGFk\nZGVkLnNpemUoKTsNCiAgICAgICAgICAgIHRvdGFsVXBkYXRlZCArPSB1cGRh\ndGVkLnNpemUoKTsNCiAgICAgICAgICAgIHRvdGFsRGVsZXRlZCArPSBkZWxl\ndGVkLnNpemUoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyB2b2lk\nIGNsb3NlKCkgew0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIFN0cmlu\nZyB0b1N0cmluZygpIHsNCiAgICAgICAgICAgIFN0cmluZyByZXR1cm5TdHJp\nbmcgPSAiQWRkcyAiICsgdG90YWxBZGRlZCArICIgRGVscyAiICsNCiAgICAg\nICAgICAgICAgICB0b3RhbERlbGV0ZWQgKyAiIFVwcyAiICsgdG90YWxVcGRh\ndGVkOw0KICAgICAgICAgICAgcmV0dXJuIHJldHVyblN0cmluZzsNCiAgICAg\nICAgfQ0KICAgIH0NCn0NCg==\n","encoding":"base64"}

