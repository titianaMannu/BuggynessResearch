{"sha":"d86635b9397c2c6e2e34cb92f92c9105389aacf3","node_id":"MDQ6QmxvYjIwNjM2NDpkODY2MzViOTM5N2MyYzZlMmUzNGNiOTJmOTJjOTEwNTM4OWFhY2Yz","size":5082,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d86635b9397c2c6e2e34cb92f92c9105389aacf3","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5maWVsZHM7DQoNCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5R\ndWVyeTsNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS50ZXN0LlNpbmdsZUVNVGVzdENhc2U7DQoNCnB1YmxpYyBjbGFzcyBUZXN0\nRW51bXNJbkpQUUwNCiAgICBleHRlbmRzIFNpbmdsZUVNVGVzdENhc2Ugew0K\nDQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7DQogICAgICAgIHNldFVwKEVu\ndW1GaWVsZFR5cGUuY2xhc3MsIENMRUFSX1RBQkxFUyk7DQoNCiAgICAgICAg\nRW51bUZpZWxkVHlwZSBvID0gbmV3IEVudW1GaWVsZFR5cGUoKTsNCiAgICAg\nICAgby5zZXRFbnVtRmllbGQoU2FtcGxlRW51bS5CQVIpOw0KICAgICAgICBv\nLmdldEVudW1MaXN0KCkuYWRkKFNhbXBsZUVudW0uRk9PKTsNCg0KICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAgICAgIGVtLnBl\ncnNpc3Qobyk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQogICAgICAgIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RW51bUxpdGVyYWxJblNlbGVjdCgpIHsNCiAgICAgICAgUXVlcnkg\ncSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgY291bnQobykgZnJvbSBFbnVt\nRmllbGRUeXBlIG8gd2hlcmUgIiArDQogICAgICAgICAgICAiby5lbnVtRmll\nbGQgPSAiICsNCiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuZmllbGRzLlNhbXBsZUVudW0uQkFSIik7DQogICAgICAgIGFz\nc2VydEVxdWFscygxLCAoKE51bWJlcikgcS5nZXRTaW5nbGVSZXN1bHQoKSku\naW50VmFsdWUoKSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEVu\ndW1MaXRlcmFsSW5TZXRJblVwZGF0ZSgpIHsNCiAgICAgICAgdGVzdEVudW1M\naXRlcmFsSW5TZWxlY3QoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOw0KICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnko\nInVwZGF0ZSBFbnVtRmllbGRUeXBlIG8gc2V0ICIgKw0KICAgICAgICAgICAg\nIm8uZW51bUZpZWxkID0gIiArDQogICAgICAgICAgICAib3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmZpZWxkcy5TYW1wbGVFbnVtLkJBWiIpOw0K\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgKChOdW1iZXIpIHEuZXhlY3V0ZVVw\nZGF0ZSgpKS5pbnRWYWx1ZSgpKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsNCiAgICAgICAgcG9zdFVwZGF0ZUNoZWNrKHRydWUp\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RFbnVtTGl0ZXJhbElu\nV2hlcmVJblVwZGF0ZSgpIHsNCiAgICAgICAgdGVzdEVudW1MaXRlcmFsSW5T\nZWxlY3QoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOw0KICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInVwZGF0ZSBF\nbnVtRmllbGRUeXBlIG8gc2V0IG8uaW50RmllbGQgPSAzICIgKw0KICAgICAg\nICAgICAgIndoZXJlIG8uZW51bUZpZWxkID0gIiArDQogICAgICAgICAgICAi\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmZpZWxkcy5TYW1wbGVF\nbnVtLkJBUiIpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMSwgKChOdW1iZXIp\nIHEuZXhlY3V0ZVVwZGF0ZSgpKS5pbnRWYWx1ZSgpKTsNCiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgcG9zdFVwZGF0\nZUNoZWNrKGZhbHNlKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgcG9z\ndFVwZGF0ZUNoZWNrKGJvb2xlYW4gd2FzRW51bU1vZGlmaWVkKSB7DQogICAg\nICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGNvdW50KG8p\nIGZyb20gRW51bUZpZWxkVHlwZSBvIHdoZXJlICIgKw0KICAgICAgICAgICAg\nIm8uZW51bUZpZWxkID0gIiArDQogICAgICAgICAgICAib3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmZpZWxkcy5TYW1wbGVFbnVtLkJBUiIpOw0K\nICAgICAgICBhc3NlcnRFcXVhbHMod2FzRW51bU1vZGlmaWVkID8gMCA6IDEs\nDQogICAgICAgICAgICAoKE51bWJlcikgcS5nZXRTaW5nbGVSZXN1bHQoKSku\naW50VmFsdWUoKSk7DQoNCiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJz\nZWxlY3QgY291bnQobykgZnJvbSBFbnVtRmllbGRUeXBlIG8gd2hlcmUgIiAr\nDQogICAgICAgICAgICAiby5lbnVtRmllbGQgPSAiICsNCiAgICAgICAgICAg\nICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZmllbGRzLlNhbXBs\nZUVudW0uQkFaIik7DQogICAgICAgIGFzc2VydEVxdWFscyh3YXNFbnVtTW9k\naWZpZWQgPyAxIDogMCwNCiAgICAgICAgICAgICgoTnVtYmVyKSBxLmdldFNp\nbmdsZVJlc3VsdCgpKS5pbnRWYWx1ZSgpKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCB0ZXN0RW51bVBvc2l0aW9uYWxQYXJhbUluU2VsZWN0KCkgew0K\nICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBjb3Vu\ndChvKSBmcm9tIEVudW1GaWVsZFR5cGUgbyB3aGVyZSAiICsNCiAgICAgICAg\nICAgICJvLmVudW1GaWVsZCA9ID8xIik7DQogICAgICAgIHEuc2V0UGFyYW1l\ndGVyKDEsIFNhbXBsZUVudW0uQkFSKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEsICgoTnVtYmVyKSBxLmdldFNpbmdsZVJlc3VsdCgpKS5pbnRWYWx1ZSgp\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW51bU5hbWVkUGFy\nYW1JblNlbGVjdCgpIHsNCiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1\nZXJ5KCJzZWxlY3QgY291bnQobykgZnJvbSBFbnVtRmllbGRUeXBlIG8gd2hl\ncmUgIiArDQogICAgICAgICAgICAiby5lbnVtRmllbGQgPSA6ZSIpOw0KICAg\nICAgICBxLnNldFBhcmFtZXRlcigiZSIsIFNhbXBsZUVudW0uQkFSKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsICgoTnVtYmVyKSBxLmdldFNpbmdsZVJl\nc3VsdCgpKS5pbnRWYWx1ZSgpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RW51bVBhcmFtSW5TZXRJblVwZGF0ZSgpIHsNCiAgICAgICAgdGVz\ndEVudW1MaXRlcmFsSW5TZWxlY3QoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRl\nUXVlcnkoInVwZGF0ZSBFbnVtRmllbGRUeXBlIG8gc2V0IG8uZW51bUZpZWxk\nID0gOmUiKTsNCiAgICAgICAgcS5zZXRQYXJhbWV0ZXIoImUiLCBTYW1wbGVF\nbnVtLkJBWik7DQogICAgICAgIGFzc2VydEVxdWFscygxLCAoKE51bWJlcikg\ncS5leGVjdXRlVXBkYXRlKCkpLmludFZhbHVlKCkpOw0KICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOw0KICAgICAgICBwb3N0VXBkYXRl\nQ2hlY2sodHJ1ZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEVu\ndW1QYXJhbUluV2hlcmVJblVwZGF0ZSgpIHsNCiAgICAgICAgdGVzdEVudW1M\naXRlcmFsSW5TZWxlY3QoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOw0KICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnko\nInVwZGF0ZSBFbnVtRmllbGRUeXBlIG8gc2V0IG8uaW50RmllbGQgPSAzICIg\nKw0KICAgICAgICAgICAgIndoZXJlIG8uZW51bUZpZWxkID0gOmUiKTsNCiAg\nICAgICAgcS5zZXRQYXJhbWV0ZXIoImUiLCBTYW1wbGVFbnVtLkJBUik7DQog\nICAgICAgIGFzc2VydEVxdWFscygxLCAoKE51bWJlcikgcS5leGVjdXRlVXBk\nYXRlKCkpLmludFZhbHVlKCkpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmNvbW1pdCgpOw0KICAgICAgICBwb3N0VXBkYXRlQ2hlY2soZmFsc2Up\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RNZW1iZXJPZigpIHsN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKExvbmcudmFsdWVPZigxKSwNCiAgICAg\nICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgY291bnQobykgZnJvbSBF\nbnVtRmllbGRUeXBlIG8gd2hlcmUgIiArDQogICAgICAgICAgICAgICAgIig6\ncGFyYW0gbWVtYmVyIG9mIG8uZW51bUxpc3Qgb3IgOnBhcmFtMiBtZW1iZXIg\nb2Ygby5lbnVtTGlzdCkiKQ0KICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0\nZXIoInBhcmFtIiwgU2FtcGxlRW51bS5GT08pDQogICAgICAgICAgICAgICAg\nLnNldFBhcmFtZXRlcigicGFyYW0yIiwgU2FtcGxlRW51bS5CQVIpDQogICAg\nICAgICAgICAgICAgLmdldFNpbmdsZVJlc3VsdCgpKTsNCiAgICB9DQp9\n","encoding":"base64"}

