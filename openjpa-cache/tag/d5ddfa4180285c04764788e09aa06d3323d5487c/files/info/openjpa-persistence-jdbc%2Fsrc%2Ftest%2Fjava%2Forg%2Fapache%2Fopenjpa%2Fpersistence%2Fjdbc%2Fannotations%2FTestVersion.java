{"sha":"589ee3a196257964c1f48ea13fe9fe579261cc31","node_id":"MDQ6QmxvYjIwNjM2NDo1ODllZTNhMTk2MjU3OTY0YzFmNDhlYTEzZmU5ZmU1NzkyNjFjYzMx","size":6777,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/589ee3a196257964c1f48ea13fe9fe579261cc31","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5qZGJjLmFubm90YXRpb25zOw0KDQppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsNCg0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHMuTm9u\nZVZlcnNpb25TdHJhdGVneTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsNCg0KLyoqDQog\nKiBUZXN0IGZvciBvcHQtbG9jaw0KICoNCiAqIEBhdXRob3IgU3RldmUgS2lt\nDQogKi8NCnB1YmxpYyBjbGFzcyBUZXN0VmVyc2lvbiBleHRlbmRzIFNpbmds\nZUVNRlRlc3RDYXNlIHsNCg0KICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgew0K\nICAgICAgICBzZXRVcChBbm5vVGVzdDEuY2xhc3MsIEFubm9UZXN0Mi5jbGFz\ncywgQW5ub1Rlc3QzLmNsYXNzLCBGbGF0MS5jbGFzcywNCiAgICAgICAgICAg\nIEVtYmVkT3duZXIuY2xhc3MsIEVtYmVkVmFsdWUuY2xhc3MsIENMRUFSX1RB\nQkxFUyk7DQoNCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsNCiAgICAgICAgQW5ub1Rlc3QxIHRlc3QxID0gbmV3IEFu\nbm9UZXN0MSgpOw0KICAgICAgICB0ZXN0MS5zZXRQayhuZXcgTG9uZyg1KSk7\nDQogICAgICAgIHRlc3QxLnNldEJhc2ljKDUwKTsNCiAgICAgICAgdGVzdDEu\nc2V0VHJhbnNpZW50KDUwMCk7DQogICAgICAgIGVtLnBlcnNpc3QodGVzdDEp\nOw0KDQogICAgICAgIEFubm9UZXN0MiB0ZXN0MiA9IG5ldyBBbm5vVGVzdDIo\nKTsNCiAgICAgICAgdGVzdDIuc2V0UGsxKDUpOw0KICAgICAgICB0ZXN0Mi5z\nZXRQazIoImJhciIpOw0KICAgICAgICB0ZXN0Mi5zZXRCYXNpYygiNTAiKTsN\nCiAgICAgICAgZW0ucGVyc2lzdCh0ZXN0Mik7DQoNCiAgICAgICAgQW5ub1Rl\nc3QzIHRlc3QzID0gbmV3IEFubm9UZXN0MygpOw0KICAgICAgICB0ZXN0My5z\nZXRQayhuZXcgTG9uZygzKSk7DQogICAgICAgIHRlc3QzLnNldEJhc2ljMig1\nMCk7DQogICAgICAgIGVtLnBlcnNpc3QodGVzdDMpOw0KICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOw0KICAgICAgICBlbS5jbG9zZSgp\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RWZXJzaW9uTnVtZXJp\nYygpIHsNCiAgICAgICAgRW50aXR5TWFuYWdlciBlbTEgPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBlbTEuZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOw0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtMiA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIGVtMi5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7DQoNCiAgICAgICAgQW5ub1Rlc3QxIHBjMSA9IGVt\nMS5maW5kKEFubm9UZXN0MS5jbGFzcywgbmV3IExvbmcoNSkpOw0KICAgICAg\nICBBbm5vVGVzdDEgcGMyID0gZW0yLmZpbmQoQW5ub1Rlc3QxLmNsYXNzLCBu\nZXcgTG9uZyg1KSk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCBwYzEuZ2V0\nVmVyc2lvbigpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBjMi5nZXRW\nZXJzaW9uKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMCwgcGMxLmdldFRy\nYW5zaWVudCgpKTsNCiAgICAgICAgcGMxLnNldEJhc2ljKDc1KTsNCiAgICAg\nICAgcGMyLnNldEJhc2ljKDc1KTsNCiAgICAgICAgZW0xLmdldFRyYW5zYWN0\naW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVtMS5jbG9zZSgpOw0KDQogICAg\nICAgIGVtMSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAg\nIHBjMSA9IGVtMS5maW5kKEFubm9UZXN0MS5jbGFzcywgbmV3IExvbmcoNSkp\nOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMxLmdldFZlcnNpb24oKSk7\nDQogICAgICAgIGVtMS5jbG9zZSgpOw0KICAgICAgICB0cnkgew0KICAgICAg\nICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAg\nICAgICBmYWlsKCJPcHRpbWlzdGljIGZhaWwiKTsNCiAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAg\nICAgICAgIGVtMi5jbG9zZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgdGVzdFZlcnNpb25UaW1lc3RhbXAoKSB7DQogICAgICAg\nIC8vIGVuc3VyZSB0aGF0IHNvbWUgdGltZSBoYXMgcGFzc2VkDQogICAgICAg\nIC8vIHNpbmNlIHRoZSByZWNvcmRzIHdlcmUgY3JlYXRlZA0KICAgICAgICB0\ncnkgew0KICAgICAgICAgICAgVGhyZWFkLnNsZWVwKDUwKTsNCiAgICAgICAg\nfQ0KICAgICAgICBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgew0K\nICAgICAgICAgICAgLy8gZG8gbm90aGluZw0KICAgICAgICB9DQogICAgICAg\nIA0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtMSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7DQogICAgICAgIGVtMS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7DQogICAgICAgIEVudGl0eU1hbmFnZXIgZW0yID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsNCg0KICAgICAgICBBbm5vVGVzdDIgcGMxID0gZW0xLmZp\nbmQoQW5ub1Rlc3QyLmNsYXNzLA0KICAgICAgICAgICAgbmV3IEFubm9UZXN0\nMi5PaWQoNSwgImJhciIpKTsNCiAgICAgICAgQW5ub1Rlc3QyIHBjMiA9IGVt\nMi5maW5kKEFubm9UZXN0Mi5jbGFzcywNCiAgICAgICAgICAgIG5ldyBBbm5v\nVGVzdDIuT2lkKDUsICJiYXIiKSk7DQogICAgICAgIGFzc2VydE5vdE51bGwo\ncGMxLmdldFZlcnNpb24oKSk7DQogICAgICAgIGFzc2VydEVxdWFscyhwYzEu\nZ2V0VmVyc2lvbigpLCBwYzIuZ2V0VmVyc2lvbigpKTsNCiAgICAgICAgcGMx\nLnNldEJhc2ljKCI3NSIpOw0KICAgICAgICBwYzIuc2V0QmFzaWMoIjc1Iik7\nDQogICAgICAgIGVtMS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOw0KICAg\nICAgICBlbTEuY2xvc2UoKTsNCg0KICAgICAgICBlbTEgPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYzEgPSBlbTEuZmluZChBbm5v\nVGVzdDIuY2xhc3MsDQogICAgICAgICAgICBuZXcgQW5ub1Rlc3QyLk9pZCg1\nLCAiYmFyIikpOw0KICAgICAgICBqYXZhLnV0aWwuRGF0ZSBwYzFWZXJzaW9u\nID0gcGMxLmdldFZlcnNpb24oKTsNCiAgICAgICAgamF2YS51dGlsLkRhdGUg\ncGMyVmVyc2lvbiA9IHBjMi5nZXRWZXJzaW9uKCk7DQogICAgICAgIGFzc2Vy\ndFRydWUocGMxVmVyc2lvbi5jb21wYXJlVG8ocGMyVmVyc2lvbikgPiAwKTsN\nCiAgICAgICAgZW0xLmNsb3NlKCk7DQogICAgICAgIHRyeSB7DQogICAgICAg\nICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAg\nICAgIGZhaWwoIk9wdGltaXN0aWMgZmFpbCIpOw0KICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgew0KICAgICAgICB9IGZpbmFsbHkgew0KICAgICAg\nICAgICAgZW0yLmNsb3NlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0VmVyc2lvblN1YmNsYXNzKCkgew0KICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtMSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nDQogICAgICAgIGVtMS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0yID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsNCiAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsN\nCg0KICAgICAgICBBbm5vVGVzdDMgcGMxID0gZW0xLmZpbmQoQW5ub1Rlc3Qz\nLmNsYXNzLCBuZXcgTG9uZygzKSk7DQogICAgICAgIEFubm9UZXN0MyBwYzIg\nPSBlbTIuZmluZChBbm5vVGVzdDMuY2xhc3MsIG5ldyBMb25nKDMpKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBjMS5nZXRWZXJzaW9uKCkpOw0KICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgcGMyLmdldFZlcnNpb24oKSk7DQogICAg\nICAgIHBjMS5zZXRCYXNpYzIoNzUpOw0KICAgICAgICBwYzIuc2V0QmFzaWMy\nKDc1KTsNCiAgICAgICAgZW0xLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nDQogICAgICAgIGVtMS5jbG9zZSgpOw0KDQogICAgICAgIGVtMSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHBjMSA9IGVtMS5maW5k\nKEFubm9UZXN0My5jbGFzcywgbmV3IExvbmcoMykpOw0KICAgICAgICBhc3Nl\ncnRFcXVhbHMoMiwgcGMxLmdldFZlcnNpb24oKSk7DQogICAgICAgIGVtMS5j\nbG9zZSgpOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgZW0yLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgICAgICBmYWlsKCJPcHRp\nbWlzdGljIGZhaWwiKTsNCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIGVtMi5jbG9z\nZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVz\ndFZlcnNpb25Ob0NoYW5nZSgpIHsNCiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsNCg0KICAgICAgICBBbm5vVGVzdDEg\ncGMgPSBlbS5maW5kKEFubm9UZXN0MS5jbGFzcywgbmV3IExvbmcoNSkpOw0K\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0VmVyc2lvbigpKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDAsIHBjLmdldFRyYW5zaWVudCgpKTsNCiAg\nICAgICAgcGMuc2V0VHJhbnNpZW50KDc1MCk7DQogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQoN\nCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAg\nICAgICBwYyA9IGVtLmZpbmQoQW5ub1Rlc3QxLmNsYXNzLCBuZXcgTG9uZyg1\nKSk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCBwYy5nZXRWZXJzaW9uKCkp\nOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMCwgcGMuZ2V0VHJhbnNpZW50KCkp\nOw0KICAgICAgICBlbS5jbG9zZSgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2\nb2lkIHRlc3ROb0RlZmF1bHRWZXJzaW9uV2l0aG91dEZpZWxkT3JDb2x1bW4o\nKSB7DQogICAgICAgIENsYXNzTWFwcGluZyBjbHMgPSAoKEpEQkNDb25maWd1\ncmF0aW9uKSBlbWYuZ2V0Q29uZmlndXJhdGlvbigpKS4NCiAgICAgICAgICAg\nIGdldE1hcHBpbmdSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNYXBwaW5nKEVt\nYmVkT3duZXIuY2xhc3MsIA0KICAgICAgICAgICAgbnVsbCwgdHJ1ZSk7DQog\nICAgICAgIGFzc2VydEVxdWFscyhOb25lVmVyc2lvblN0cmF0ZWd5LmdldElu\nc3RhbmNlKCksDQogICAgICAgICAgICBjbHMuZ2V0VmVyc2lvbigpLmdldFN0\ncmF0ZWd5KCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMCwgY2xzLmdldFZl\ncnNpb24oKS5nZXRDb2x1bW5zKCkubGVuZ3RoKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0VmVyc2lvbldpdGhGaWVsZCgpIHsNCiAgICAgICAg\nQ2xhc3NNYXBwaW5nIGNscyA9ICgoSkRCQ0NvbmZpZ3VyYXRpb24pIGVtZi5n\nZXRDb25maWd1cmF0aW9uKCkpLg0KICAgICAgICAgICAgZ2V0TWFwcGluZ1Jl\ncG9zaXRvcnlJbnN0YW5jZSgpLmdldE1hcHBpbmcoQW5ub1Rlc3QxLmNsYXNz\nLCANCiAgICAgICAgICAgIG51bGwsIHRydWUpOw0KICAgICAgICBhc3NlcnRU\ncnVlKE5vbmVWZXJzaW9uU3RyYXRlZ3kuZ2V0SW5zdGFuY2UoKSAhPQ0KICAg\nICAgICAgICAgY2xzLmdldFZlcnNpb24oKS5nZXRTdHJhdGVneSgpKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIGNscy5nZXRWZXJzaW9uKCkuZ2V0Q29s\ndW1ucygpLmxlbmd0aCk7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

