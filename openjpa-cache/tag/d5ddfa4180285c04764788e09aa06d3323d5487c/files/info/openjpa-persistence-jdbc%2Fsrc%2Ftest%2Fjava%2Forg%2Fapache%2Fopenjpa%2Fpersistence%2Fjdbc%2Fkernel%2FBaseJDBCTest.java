{"sha":"210e84606175e6d392bdf02c1fd3d494cb791f91","node_id":"MDQ6QmxvYjIwNjM2NDoyMTBlODQ2MDYxNzVlNmQzOTJiZGYwMmMxZmQzZDQ5NGNiNzkxZjkx","size":6526,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/210e84606175e6d392bdf02c1fd3d494cb791f91","content":"LyoNCiAqIEJhc2VKREJDVGVzdC5qYXZhDQogKg0KICogQ3JlYXRlZCBvbiBP\nY3RvYmVyIDksIDIwMDYsIDEyOjU2IFBNDQogKg0KICogVG8gY2hhbmdlIHRo\naXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFnZXIN\nCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLg0KICov\nDQoNCi8qDQogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZv\ndW5kYXRpb24gKEFTRikgdW5kZXIgb25lDQogKiBvciBtb3JlIGNvbnRyaWJ1\ndG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUN\nCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFs\nIGluZm9ybWF0aW9uDQogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hp\ncC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlDQogKiB0byB5b3UgdW5k\nZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlDQogKiAi\nTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBp\nbiBjb21wbGlhbmNlDQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBv\nYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogKg0KICogaHR0cDov\nL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogKg0KICog\nVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0\nbyBpbiB3cml0aW5nLA0KICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIg\ndGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4NCiAqICJBUyBJUyIg\nQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFO\nWQ0KICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0\naGUgTGljZW5zZSBmb3IgdGhlDQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zl\ncm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zDQogKiB1bmRlciB0\naGUgTGljZW5zZS4gICAgDQogKi8NCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLmpkYmMua2VybmVsOw0KDQppbXBvcnQgamF2YS5i\nZWFucy5CZWFuSW5mbzsNCmltcG9ydCBqYXZhLmJlYW5zLkludHJvc3BlY3Rv\ncjsNCmltcG9ydCBqYXZhLmJlYW5zLlByb3BlcnR5RGVzY3JpcHRvcjsNCmlt\ncG9ydCBqYXZhLmxhbmcucmVmbGVjdC5JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0\naW9uOw0KaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0Lk1ldGhvZDsNCmltcG9y\ndCBqYXZhLm1hdGguQmlnRGVjaW1hbDsNCmltcG9ydCBqYXZhLm1hdGguQmln\nSW50ZWdlcjsNCmltcG9ydCBqYXZhLnV0aWwuKjsNCmltcG9ydCBqYXZheC5t\nYW5hZ2VtZW50LkludHJvc3BlY3Rpb25FeGNlcHRpb247DQppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXI7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOw0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuanBxbC5KUFFMUGFyc2Vy\nOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1\ncmF0aW9uUHJvdmlkZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5jb25mLkNvbmZpZ3VyYXRpb25zOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7DQoNCg0KDQpp\nbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uQW5ub3RhdGlvbjsNCmltcG9y\ndCBqdW5pdC5mcmFtZXdvcmsuKjsNCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5FbnRpdHlNYW5hZ2VyOw0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eU1hbmFnZXJGYWN0b3J5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnk7DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5KUEFGYWNhZGVIZWxwZXI7DQoNCg0KcHVibGljIGNsYXNzIEJh\nc2VKREJDVGVzdCBleHRlbmRzIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZXsNCiAgICANCiAg\nICANCiAgICBwcml2YXRlIHN0YXRpYyBNYXAgX3N5c3Byb3BzID0gbmV3IEhh\nc2hNYXAoKTsNCiAgICANCiAgICANCiAgICAvKiogQ3JlYXRlcyBhIG5ldyBp\nbnN0YW5jZSBvZiBCYXNlSkRCQ1Rlc3QgKi8NCiAgICBwdWJsaWMgQmFzZUpE\nQkNUZXN0KCkgew0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgQmFzZUpEQkNU\nZXN0KFN0cmluZyBuYW1lKSANCiAgICB7DQogICAgICAgIHN1cGVyKG5hbWUs\nICJqZGJjY2FjdHVzYXBwIik7DQogICAgfQ0KDQogICAgQE92ZXJyaWRlDQog\nICAgcHJvdGVjdGVkIFN0cmluZyBkZWZhdWx0UGVyc2lzdGVuY2VYbWxSZXNv\ndXJjZSgpIHsNCiAgICAgICAgcmV0dXJuICJvcmcvYXBhY2hlL29wZW5qcGEv\ncGVyc2lzdGVuY2UvamRiYy9jb21tb24iICsNCiAgICAgICAgICAgICIvYXBw\ncy9NRVRBLUlORi9wZXJzaXN0ZW5jZS54bWwiOw0KICAgIH0NCiAgICANCiAg\nICBwcm90ZWN0ZWQgT3BlbkpQQUVudGl0eU1hbmFnZXIgZ2V0UE0oKSB7DQog\nICAgICAgIHJldHVybiAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsNCiAgICB9DQogICAgDQogICAgcHJvdGVjdGVkIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIGdldFBNKGJvb2xlYW4gb3B0aW1pc3RpYyxi\nb29sZWFuIHJldGFpblZhbHVlcykgew0KICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50\naXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5zZXROb250cmFuc2FjdGlvbmFs\nUmVhZCh0cnVlKTsNCiAgICAgICAgZW0uc2V0UmV0YWluU3RhdGUocmV0YWlu\nVmFsdWVzKTsNCiAgICAgICAgZW0uc2V0T3B0aW1pc3RpYyhvcHRpbWlzdGlj\nKTsNCiAgICAgICAgcmV0dXJuIGVtOw0KICAgIH0NCiAgICANCiAgICAvKioN\nCiAgICAgKiBEZWxldGUgYWxsIGluc3RhbmNlcyBvZiB0aGUgZ2l2ZW4gY2xh\nc3MuDQogICAgICovDQogICAgcHJvdGVjdGVkICBpbnQgZGVsZXRlQWxsKEJy\nb2tlciBicm9rZXIsIENsYXNzIGNsYXp6KSB7DQogICAgICAgIHJldHVybiBk\nZWxldGVBbGwoYnJva2VyLCBjbGF6eiwgdHJ1ZSk7DQogICAgfQ0KICAgIA0K\nICAgIC8qKg0KICAgICAqIERlbGV0ZSBhbGwgaW5zdGFuY2VzIG9mIHRoZSBn\naXZlbiBjbGFzcy4NCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgaW50IGRlbGV0\nZUFsbChCcm9rZXIgYnJva2VyLCBDbGFzcyBjbGF6eiwNCiAgICAgICAgICAg\nIGJvb2xlYW4gc3ViY2xhc3Nlcykgew0KICAgICAgICBmaW5hbCBib29sZWFu\nIHVzZURlbGV0ZUJ5UXVlcnkgPSBmYWxzZTsNCiAgICAgICAgDQogICAgICAg\nIGlmICh1c2VEZWxldGVCeVF1ZXJ5KSB7DQogICAgICAgICAgICBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5IHF1ZXJ5ID0gYnJva2VyLm5ld1F1\nZXJ5KA0KICAgICAgICAgICAgICAgICAgICBKUFFMUGFyc2VyLkxBTkdfSlBR\nTCwgY2xhenosICIiKTsNCiAgICAgICAgICAgIHF1ZXJ5LnNldENhbmRpZGF0\nZVR5cGUoY2xhenosIHN1YmNsYXNzZXMpOw0KICAgICAgICAgICAgcmV0dXJu\nIChpbnQpIHF1ZXJ5LmRlbGV0ZUFsbCgpOw0KICAgICAgICB9IGVsc2Ugew0K\nICAgICAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5FeHRlbnQg\nZXh0ZW50ID0NCiAgICAgICAgICAgICAgICAgICAgYnJva2VyLm5ld0V4dGVu\ndChjbGF6eiwgc3ViY2xhc3Nlcyk7DQogICAgICAgICAgICBMaXN0IGxpc3Qg\nPSBleHRlbnQubGlzdCgpOw0KICAgICAgICAgICAgaW50IHNpemUgPSBsaXN0\nLnNpemUoKTsNCiAgICAgICAgICAgIGJyb2tlci5kZWxldGVBbGwobGlzdCwg\nbnVsbCk7DQogICAgICAgICAgICByZXR1cm4gc2l6ZTsNCiAgICAgICAgfQ0K\nICAgIH0NCiAgICANCiAgICAvKioNCiAgICAgKiBEZWxldGUgYWxsIGluc3Rh\nbmNlcyBvZiB0aGUgZ2l2ZW4gY2xhc3MuDQogICAgICovDQogICAgcHJvdGVj\ndGVkIGludCBkZWxldGVBbGwoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0sIENs\nYXNzIGNsYXp6KSB7DQogICAgICAgIHJldHVybiBkZWxldGVBbGwoSlBBRmFj\nYWRlSGVscGVyLnRvQnJva2VyKHBtKSwgY2xhenopOw0KICAgIH0NCiAgICAN\nCiAgICAvKioNCiAgICAgKiBEZWxldGUgYWxsIGluc3RhbmNlcyBvZiB0aGUg\nZ2l2ZW4gY2xhc3MuDQogICAgICovDQogICAgcHJvdGVjdGVkIGludCBkZWxl\ndGVBbGwoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0sIENsYXNzIGNsYXp6LA0K\nICAgICAgICAgICAgYm9vbGVhbiBzdWJjbGFzc2VzKSB7DQogICAgICAgIHJl\ndHVybiBkZWxldGVBbGwoSlBBRmFjYWRlSGVscGVyLnRvQnJva2VyKHBtKSwg\nY2xhenosIHN1YmNsYXNzZXMpOw0KICAgIH0NCiAgICANCiAgICANCiAgICBw\ncm90ZWN0ZWQgT2JqZWN0IHBlcnNpc3QoT2JqZWN0IG9iKSB7DQogICAgICAg\nIEJyb2tlciBicm9rZXIgPSBnZXRCcm9rZXJGYWN0b3J5KCkubmV3QnJva2Vy\nKCk7DQogICAgICAgIGJyb2tlci5iZWdpbigpOw0KICAgICAgICBicm9rZXIu\ncGVyc2lzdChvYiwgbnVsbCk7DQogICAgICAgIE9iamVjdCBpZCA9IGJyb2tl\nci5nZXRPYmplY3RJZChvYik7DQogICAgICAgIGJyb2tlci5jb21taXQoKTsN\nCiAgICAgICAgYnJva2VyLmNsb3NlKCk7DQogICAgICAgIHJldHVybiBpZDsN\nCiAgICB9DQogICAgDQogICAgcHJvdGVjdGVkIFByb3BlcnRpZXMgZ2V0UHJv\ncGVydGllcygpIHsNCiAgICAgICAgcmV0dXJuIGdldFByb3BlcnRpZXMobnVs\nbCk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICAqIFJldHVybiB0aGUg\ncnVudGltZSBwcm9wZXJ0aWVzLCBvcHRpb25hbGx5IG92ZXJyaWRpbmcgb3Ig\nc2V0dGluZw0KICAgICAqIHNvbWUgdmlhIHRoZSBnaXZlbiBhcnJheSwgd2hp\nY2ggc2hvdWxkIGJlIGluIHRoZSBmb3JtDQogICAgICogeyBrZXksIHZhbCwg\na2V5LCB2YWwsIC4uLiB9Lg0KICAgICAqLw0KICAgIHByb3RlY3RlZCBzeW5j\naHJvbml6ZWQgUHJvcGVydGllcyBnZXRQcm9wZXJ0aWVzKFN0cmluZ1tdIHBy\nb3BzKSB7DQogICAgICAgIFByb3BlcnRpZXMgcCA9IG5ldyBQcm9wZXJ0aWVz\nKFN5c3RlbS5nZXRQcm9wZXJ0aWVzKCkpOw0KICAgICAgICBTdHJpbmcgc3Ry\nID0gcC5nZXRQcm9wZXJ0eSgib3BlbmpwYS5wcm9wZXJ0aWVzIiwgImtvZG8u\ncHJvcGVydGllcyIpOw0KICAgICAgICBpZiAoc3RyICE9IG51bGwgJiYgc3Ry\nLmxlbmd0aCgpID4gMCkgew0KICAgICAgICAgICAgLy8gY2FjaGUgc3lzdGVt\nIHByb3BlcnRpZXMgdG8gcmVkdWNlIGxvYWQgb24gZmlsZSBzeXN0ZW0NCiAg\nICAgICAgICAgIFByb3BlcnRpZXMgbG9hZGVkID0gKFByb3BlcnRpZXMpIF9z\neXNwcm9wcy5nZXQoc3RyKTsNCiAgICAgICAgICAgIGlmIChsb2FkZWQgPT0g\nbnVsbCkgew0KICAgICAgICAgICAgICAgIGxvYWRlZCA9IG5ldyBQcm9wZXJ0\naWVzKCk7DQogICAgICAgICAgICAgICAgQ29uZmlndXJhdGlvblByb3ZpZGVy\nIGNwID0gKENvbmZpZ3VyYXRpb25Qcm92aWRlcikgQ29uZmlndXJhdGlvbnMu\nZ2V0UHJvcGVydHkoc3RyLCBudWxsKTsNCiAgICAgICAgICAgICAgICANCiAg\nICAgICAgICAgICAgICBpZiAoY3AgIT0gbnVsbCkNCiAgICAgICAgICAgICAg\nICAgICAgbG9hZGVkLnB1dEFsbChjcC5nZXRQcm9wZXJ0aWVzKCkpOw0KICAg\nICAgICAgICAgICAgIF9zeXNwcm9wcy5wdXQoc3RyLCBsb2FkZWQpOw0KICAg\nICAgICAgICAgfQ0KICAgICAgICAgICAgcC5wdXRBbGwobG9hZGVkKTsNCiAg\nICAgICAgfQ0KICAgICAgICANCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IHBy\nb3BzICE9IG51bGwgJiYgaSA8IHByb3BzLmxlbmd0aDsgaSArPSAyKSB7DQog\nICAgICAgICAgICBpZiAocHJvcHNbaSArIDFdICE9IG51bGwpIHsNCiAgICAg\nICAgICAgICAgICAvLyByZW1vdmUgYW55IGR1cGxpY2F0ZSBrb2RvL29wZW5q\ncGEgcHJvcGVydHkgc28gd2UgZG9uJ3QgY2xhc2gNCiAgICAgICAgICAgICAg\nICBpZiAocHJvcHNbaV0uc3RhcnRzV2l0aCgib3BlbmpwYS4iKSkNCiAgICAg\nICAgICAgICAgICAgICAgcC5yZW1vdmUoIm9wZW5qcGEuIiArIHByb3BzW2ld\nLnN1YnN0cmluZyg1KSk7DQogICAgICAgICAgICAgICAgZWxzZSBpZiAocHJv\ncHNbaV0uc3RhcnRzV2l0aCgib3BlbmpwYS4iKSkNCiAgICAgICAgICAgICAg\nICAgICAgcC5yZW1vdmUoIm9wZW5qcGEuIiArIHByb3BzW2ldLnN1YnN0cmlu\nZyg4KSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcC5z\nZXRQcm9wZXJ0eShwcm9wc1tpXSwgcHJvcHNbaSArIDFdKTsNCiAgICAgICAg\nICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcC5yZW1vdmUocHJvcHNb\naV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVy\nbiBwOw0KICAgIH0NCiAgICANCiAgICANCiAgICANCiAgICANCiAgICANCn0N\nCg==\n","encoding":"base64"}

