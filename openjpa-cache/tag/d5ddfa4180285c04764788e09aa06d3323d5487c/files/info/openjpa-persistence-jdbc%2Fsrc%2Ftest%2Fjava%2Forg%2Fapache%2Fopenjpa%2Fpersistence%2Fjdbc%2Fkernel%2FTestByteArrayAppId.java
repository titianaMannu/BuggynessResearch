{"sha":"8338c354029638738a865c7c5f90ec1cdf930864","node_id":"MDQ6QmxvYjIwNjM2NDo4MzM4YzM1NDAyOTYzODczOGE4NjVjN2M1ZjkwZWMxY2RmOTMwODY0","size":13427,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8338c354029638738a865c7c5f90ec1cdf930864","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuamRiYy5rZXJuZWw7DQovKg0KICogVGVzdEJ5dGVBcnJh\neUFwcElkLmphdmENCiAqDQogKiBDcmVhdGVkIG9uIE9jdG9iZXIgMiwgMjAw\nNiwgMTA6NTYgQU0NCiAqDQogKiBUbyBjaGFuZ2UgdGhpcyB0ZW1wbGF0ZSwg\nY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFuYWdlcg0KICogYW5kIG9wZW4g\ndGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuDQogKi8NCg0KDQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuY29tbW9uLmFw\ncHMuKjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7DQoNCmltcG9ydCBqYXZh\nLnV0aWwuKjsNCg0KDQppbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uQW5u\nb3RhdGlvbjsNCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuKjsNCmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOw0KaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5Ow0KaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFu\nYWdlckZhY3Rvcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOw0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlclNQ\nSTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJOw0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLm1ldGEuTWFwcGluZ1Rvb2w7DQppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkV4dGVudDsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBl\ncnNpc3RlbmNlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nT3BlbkpQQVN0YXRlTWFuYWdlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEua2VybmVsLlF1ZXJ5Ow0KDQoNCnB1YmxpYyBjbGFzcyBUZXN0Qnl0ZUFy\ncmF5QXBwSWQgZXh0ZW5kcyBCYXNlSkRCQ1Rlc3Qgew0KICAgIA0KICAgIHBy\naXZhdGUgc3RhdGljIGJvb2xlYW4gX2luaXQgPSBmYWxzZTsNCiAgICBwcml2\nYXRlIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBfcG1mID0gbnVsbDsN\nCiAgICANCiAgICANCiAgICAvKiogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBv\nZiBUZXN0Qnl0ZUFycmF5QXBwSWQgKi8NCiAgICBwdWJsaWMgVGVzdEJ5dGVB\ncnJheUFwcElkKFN0cmluZyBuYW1lKSANCiAgICB7DQogICAgCXN1cGVyKG5h\nbWUpOw0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgYm9vbGVhbiBza2lwVGVz\ndCgpIHsNCiAgICAgICAgcmV0dXJuIGdldEN1cnJlbnRQbGF0Zm9ybSgpICE9\nIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uREIyOw0KICAgIH0NCiAgICAN\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpDQogICAgdGhyb3dzIEV4Y2VwdGlv\nbiB7DQogICAgICAgIC8vIHdlIGhhdmUgdG8gdXNlIGdldGJ5dGVzL3NldGJ5\ndGVzIGZvciBieXRlIGFycmF5cyB0byB3b3JrIHByb3Blcmx5DQogICAgICAg\nIF9wbWYgPShPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkpIGdldEVtZihn\nZXRQcm9wcygpKTsNCiAgICAgICAgDQogICAgICAgIGlmICghX2luaXQpIHsN\nCiAgICAgICAgICAgIGluaXRpYWxpemUoKEpEQkNDb25maWd1cmF0aW9uKSAo\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkgT3BlbkpQQVBlcnNp\nc3RlbmNlLmNhc3QoX3BtZikpLmdldENvbmZpZ3VyYXRpb24oKSk7DQogICAg\nICAgICAgICBfaW5pdCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgRW50\naXR5TWFuYWdlciBwbSA9IF9wbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0K\nICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgDQogICAgICAgZGVsZXRl\nQWxsKEJ5dGVBcnJheVBLUEMuY2xhc3MscG0pOw0KICAgICAgICBlbmRUeChw\nbSk7DQogICAgICAgIHBtLmNsb3NlKCk7DQogICAgICAgIHBtID0gY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAg\nICAgIEJ5dGVBcnJheVBLUEMyIHRlc3RCeXRlcyA9IG5ldyBCeXRlQXJyYXlQ\nS1BDMihuZXcgYnl0ZVtdeyAxLCAyIH0sDQogICAgICAgICAgICAgICAgImNo\naWxkIik7DQogICAgICAgIHRlc3RCeXRlcy5zZXRTdWJmaWVsZCgic3ViIik7\nDQogICAgICAgIHRlc3RCeXRlcy5zZXRQYXJlbnQobmV3IEJ5dGVBcnJheVBL\nUEMobmV3IGJ5dGVbXXsgMywgNCB9LCAicGFyZW50IikpOw0KICAgICAgICBw\nbS5wZXJzaXN0KHRlc3RCeXRlcyk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAg\nICAgICAgcG0uY2xvc2UoKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHZv\naWQgdGVhckRvd24oKQ0KICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAg\nICAvLyBjbG9zaW5nIHRoZSBwbWYgZXZlcnkgdGltZSBzbG93cyB0aGluZ3Mg\nZG93biB0b28gbXVjaCBiL2MNCiAgICAgICAgLy8gc2NoZW1hIHJlZmxlY3Rp\nb24gaXMgc28gc2xvdyBvbiBEQjINCiAgICAgICAgLy8JdHJ5IHsgX3BtZi5j\nbG9zZSAoKTsgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHt9DQogICAgICAgIA0K\nICAgICAgICBzdXBlci50ZWFyRG93bigpOw0KICAgIH0NCiAgICANCiAgICBw\ncml2YXRlIHZvaWQgaW5pdGlhbGl6ZShKREJDQ29uZmlndXJhdGlvbiBjb25m\nKQ0KICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICANCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbT0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIga2VtID0gT3BlbkpQQVBlcnNp\nc3RlbmNlLmNhc3QgKGVtKTsNCiAgICAgICAgLy9KREJDQ29uZmlndXJhdGlv\nbiBjb25mID0gKEpEQkNDb25maWd1cmF0aW9uKSBrZW0uZ2V0Q29uZmlndXJh\ndGlvbigpOyAgICAgICAgDQogICAgICAgIA0KICAgICAgICBNYXBwaW5nVG9v\nbCB0b29sID0gbmV3IE1hcHBpbmdUb29sKChKREJDQ29uZmlndXJhdGlvbikN\nCiAgICAgICAgCQkoKE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJKSBrZW0pLmdl\ndENvbmZpZ3VyYXRpb24oKSwgTWFwcGluZ1Rvb2wuQUNUSU9OX1JFRlJFU0gs\nIGZhbHNlKTsNCiAgICAgICAgdG9vbC5ydW4oQnl0ZUFycmF5UEtQQy5jbGFz\ncyk7DQogICAgICAgIHRvb2wucnVuKEJ5dGVBcnJheVBLUEMyLmNsYXNzKTsN\nCiAgICAgICAgdG9vbC5yZWNvcmQoKTsNCiAgICB9DQogICAgDQogICAgLyoq\nDQogICAgICogVGVzdHMgdGhhdCBhcHBsaWNhdGlvbiBpZGVudGl0eSBjbGFz\nc2VzIGFyZSByZXR1cm5lZCBjb3JyZWN0bHkuDQogICAgICovDQogICAgcHVi\nbGljIHZvaWQgdGVzdEdldE9iamVjdElkQ2xhc3MoKSB7DQogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW09IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAg\nICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gT3BlbkpQQVBlcnNpc3Rl\nbmNlLmNhc3QgKGVtKTsNCg0KICAgICAgICANCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKEJ5dGVBcnJheVBLUENJZC5jbGFzcywNCiAgICAgICAgICAgICAgICBw\nbS5nZXRPYmplY3RJZENsYXNzKEJ5dGVBcnJheVBLUEMuY2xhc3MpKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKEJ5dGVBcnJheVBLUENJZC5jbGFzcywNCiAg\nICAgICAgICAgICAgICBwbS5nZXRPYmplY3RJZENsYXNzKEJ5dGVBcnJheVBL\nUEMyLmNsYXNzKSk7DQogICAgICAgIHBtLmNsb3NlKCk7DQogICAgICAgIGVt\nLmNsb3NlKCk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICAqIFRlc3Rz\nIGZpbmRpbmcgYW4gaW5zdGFuY2UgYnkgYSBtYW51YWxseS1jcmVhdGVkIGlk\nIHZhbHVlLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRTdWJj\nbGFzc09iamVjdEJ5SWQoKSB7DQogICAgICAgIEJ5dGVBcnJheVBLUEMyIGJ5\ndGVzMiA9IGdldENoaWxkKCk7DQogICAgICAgIGFzc2VydE5vdE51bGwoYnl0\nZXMyKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGJ5dGVzMi5nZXRQSygp\nWzBdKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIGJ5dGVzMi5nZXRQSygp\nWzFdKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJjaGlsZCIsIGJ5dGVzMi5n\nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzdWIi\nLCBieXRlczIuZ2V0U3ViZmllbGQoKSk7DQogICAgICAgIGFzc2VydE5vdE51\nbGwoYnl0ZXMyLmdldFBhcmVudCgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDMsIGJ5dGVzMi5nZXRQYXJlbnQoKS5nZXRQSygpWzBdKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDQsIGJ5dGVzMi5nZXRQYXJlbnQoKS5nZXRQSygpWzFd\nKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJwYXJlbnQiLCBieXRlczIuZ2V0\nUGFyZW50KCkuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAgIGFzc2VydE51\nbGwoYnl0ZXMyLmdldFBhcmVudCgpLmdldFBhcmVudCgpKTsNCiAgICAgICAg\nLy9GSVhNRSBuZXh0IGxpbmUgY29tbWVudGVkIA0KICAgICAgICAvL0pET0hl\nbHBlci5nZXRQZXJzaXN0ZW5jZU1hbmFnZXIoYnl0ZXMyKS5jbG9zZSgpOw0K\nICAgIH0NCiAgICANCiAgICAvKioNCiAgICAgKiBUZXN0cyBmaW5kaW5nIGFu\nIGluc3RhbmNlIGJ5IGEgbWFudWFsbHktY3JlYXRlZCBpZCB2YWx1ZS4NCiAg\nICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0T2JqZWN0QnlJZCgpIHsN\nCiAgICAgICAgQnl0ZUFycmF5UEtQQyBieXRlcyA9IGdldFBhcmVudCgpOw0K\nICAgICAgICBhc3NlcnROb3ROdWxsKGJ5dGVzKTsNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDMsIGJ5dGVzLmdldFBLKClbMF0pOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoNCwgYnl0ZXMuZ2V0UEsoKVsxXSk7DQogICAgICAgIGFzc2VydEVx\ndWFscygicGFyZW50IiwgYnl0ZXMuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAg\nICAgIGFzc2VydE51bGwoYnl0ZXMuZ2V0UGFyZW50KCkpOw0KICAgICAgICAv\nL0ZJWE1FIG5leHQgbGluZSBjb21tZW50ZWQgDQogICAgICAgIC8vSkRPSGVs\ncGVyLmdldFBlcnNpc3RlbmNlTWFuYWdlcihieXRlcykuY2xvc2UoKTsNCiAg\nICB9DQogICAgDQogICAgLyoqDQogICAgICogVGVzdHMgdGhhdCB0aGUgb2lk\nIGluc3RhbmNlcyByZXR1cm5lZCBmcm9tIHRoZSBwbSBhcmUgY29waWVkIHRv\nDQogICAgICogcHJldmVudCBieS1yZWZlcmVuY2UgbW9kaWZpY2F0aW9uIGJ5\nIHRoZSB1c2VyLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRP\nYmplY3RJZCgpIHsNCiAgICAgICAgDQogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW09IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIGtlbSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0IChl\nbSk7DQogICAgICAgIGlmICghICgoT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkp\nIGtlbSkuZ2V0Q29uZmlndXJhdGlvbigpLmdldENvbXBhdGliaWxpdHlJbnN0\nYW5jZSgpLmdldENvcHlPYmplY3RJZHMoKSkNCiAgICAgICAgICAgIHJldHVy\nbjsNCiAgICAgICAgDQogICAgICAgIEJ5dGVBcnJheVBLUENJZCBvaWQgPSBu\nZXcgQnl0ZUFycmF5UEtQQ0lkKCk7DQogICAgICAgIG9pZC5wayA9IG5ldyBi\neXRlW117IDEsIDIgfTsNCiAgICAgICAgQnl0ZUFycmF5UEtQQyBieXRlcyA9\nIChCeXRlQXJyYXlQS1BDKSBrZW0uZ2V0T2JqZWN0SWQob2lkKTsNCiAgICAg\nICAgQnl0ZUFycmF5UEtQQ0lkIG9pZENvcHkgPSAoQnl0ZUFycmF5UEtQQ0lk\nKSBrZW0uZ2V0T2JqZWN0SWQoYnl0ZXMpOw0KICAgICAgICBhc3NlcnRUcnVl\nKCJPaWQgbm90IGNvcGllZC4iLCBvaWQgIT0gb2lkQ29weSk7DQogICAgICAg\nIGFzc2VydEVxdWFscygxLCBvaWRDb3B5LnBrWzBdKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDIsIG9pZENvcHkucGtbMV0pOw0KICAgICAgICANCiAgICAg\nICAgZW0uY2xvc2UoKTsNCiAgICAgICAga2VtLmNsb3NlKCk7DQogICAgfQ0K\nICAgIA0KICAgIC8qKg0KICAgICAqIFRlc3RzIHRoYXQgY2hhbmdpbmcgcHJp\nbWFyeSBrZXkgdmFsdWVzIHdpbGwgZmFpbC4NCiAgICAgKi8NCiAgICBwdWJs\naWMgdm9pZCB0ZXN0Q2hhbmdlSWRlbnRpdHkoKSB7DQogICAgICAgIEJ5dGVB\ncnJheVBLUEMyIGJ5dGVzID0gZ2V0Q2hpbGQoKTsNCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG0gPSBPcGVuSlBBUGVyc2lzdGVuY2UuZ2V0RW50\naXR5TWFuYWdlcihieXRlcyk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAg\nICAgICANCiAgICAgICAgLy8gbWFrZSBzdXJlIHNldHRpbmcgdG8gc2FtZSB2\nYWx1ZSBpcyBPSw0KICAgICAgICBieXRlcy5zZXRQSyhieXRlcy5nZXRQSygp\nKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGJ5dGVzLnNldFBLKG5l\ndyBieXRlW117IDUsIDYgfSk7DQogICAgICAgICAgICBmYWlsKCJBbGxvd2Vk\nIGNoYW5naW5nIG9mIHBrLiIpOw0KICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gamUpIHsNCiAgICAgICAgfQ0KICAgICAgICByb2xsYmFja1R4KHBtKTsN\nCiAgICAgICAgcG0uY2xvc2UoKTsNCiAgICB9DQogICAgDQogICAgLyoqDQog\nICAgICogVGVzdHMgdGhhdCBwayBmaWVsZHMgYXJlIHJldGFpbmVkIG9uIHN0\nYXRlIHRyYW5zaXRpb24gdG8gaG9sbG93Lg0KICAgICAqLw0KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RQS1JldGFpbigpIHsNCiAgICAgICAgQnl0ZUFycmF5UEtQ\nQzIgYnl0ZXMgPSBnZXRDaGlsZCgpOw0KICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5nZXRFbnRpdHlNYW5h\nZ2VyKGJ5dGVzKTsNCiAgICAgICAgDQogICAgICAgIC8vRklYTUUgbmV4dCBs\naW5lIGNvbW1lbnRlZCAuLi4uIG5lZWQgc3Vic3RpdHV0ZSBBUEkNCiAgICAg\nICAgLy9wbS5jdXJyZW50VHJhbnNhY3Rpb24oKS5zZXROb250cmFuc2FjdGlv\nbmFsUmVhZChmYWxzZSk7DQogICAgICAgIA0KICAgICAgICBzdGFydFR4KHBt\nKTsNCiAgICAgICAgYnl0ZXMuc2V0UGFyZW50KG51bGwpOw0KICAgICAgICBl\nbmRUeChwbSk7ICAgICAgICANCiAgICAgICAgDQogICAgICAgIC8vIGJ5dGVz\nIHNob3VsZCBzdGlsbCBhbGxvdyBhY2Nlc3MgdG8gb2lkIGZpZWxkcw0KICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgYnl0ZXMuZ2V0UEsoKVswXSk7DQogICAg\nICAgIGFzc2VydEVxdWFscygyLCBieXRlcy5nZXRQSygpWzFdKTsNCiAgICAg\nICAgdHJ5IHsNCiAgICAgICAgICAgIGJ5dGVzLmdldFBhcmVudCgpOw0KICAg\nICAgICAgICAgZmFpbCgiQWxsb3dlZCByZWFkIG9mIG5vbi1wayB2YWx1ZSBv\ndXRzaWRlIG9mIHRyYW5zYWN0aW9uLiIpOw0KICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gamUpIHsNCiAgICAgICAgfQ0KICAgICAgICB0cnkgew0KICAg\nICAgICAgICAgYnl0ZXMuc2V0UEsobmV3IGJ5dGVbXXsgNSwgNiB9KTsNCiAg\nICAgICAgICAgIGZhaWwoIkFsbG93ZWQgc2V0dGluZyBvZiBwayB2YWx1ZSBv\ndXRzaWRlIG9mIHRyYW5zYWN0aW9uLiIpOw0KICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gamUpIHsNCiAgICAgICAgfQ0KICAgICAgICBwbS5jbG9zZSgp\nOw0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlQW5k\nSW5zZXJ0KCkgew0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtPSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBrZW0gPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdCAoZW0pOw0KICAgICAg\nICANCiAgICAgICAgc3RhcnRUeChrZW0pOw0KICAgICAgIA0KICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IDIwOyBpKyspIHsNCiAgICAgICAgICAgIEJ5\ndGVBcnJheVBLUEMgYnl0ZXMgPSBuZXcgQnl0ZUFycmF5UEtQQyhuZXcgYnl0\nZVtdDQogICAgICAgICAgICB7IChieXRlKSAoaSArIDUpLCAoYnl0ZSkgKGkg\nKyA2KSB9LCBTdHJpbmcudmFsdWVPZihpKSk7DQogICAgICAgICAgICBrZW0u\ncGVyc2lzdChieXRlcyk7DQogICAgICAgIH0NCiAgICAgICAgZW5kVHgoa2Vt\nKTsgICAgICAgIA0KICAgICAgICANCiAgICAgICAga2VtLmNsb3NlKCk7DQog\nICAgICAgIA0KICAgICAgICBrZW0gPSBfcG1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsNCiAgICAgICAgc3RhcnRUeChrZW0pOw0KICAgICAgICBFeHRlbnQg\nZXh0ZW50ID0gKEV4dGVudCkga2VtLmNyZWF0ZUV4dGVudChCeXRlQXJyYXlQ\nS1BDLmNsYXNzLGZhbHNlKTsNCiAgICAgICAga2VtLmRldGFjaEFsbChleHRl\nbnQubGlzdCgpKTsNCiAgICAgICAgZXh0ZW50LmNsb3NlQWxsKCk7DQogICAg\nICAgIA0KICAgICAgICBCeXRlQXJyYXlQS1BDIG93bmVyID0gbmV3IEJ5dGVB\ncnJheVBLUEMoKTsNCiAgICAgICAga2VtLnBlcnNpc3Qob3duZXIpOw0KICAg\nICAgICBvd25lci5zZXRQSyhuZXcgYnl0ZVtdeyAxMDAsIDEwMSB9KTsNCiAg\nICAgICAgb3duZXIuc2V0U3RyaW5nRmllbGQoIm93bmVyIik7DQogICAgICAg\nIA0KICAgICAgICAvLyBtYWtlIG5ldyBpbnN0YW5jZXMgd2l0aCBzYW1lIG9p\nZHMgcGVyc2lzdGVudA0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDIw\nOyBpKyspIHsNCiAgICAgICAgICAgIEJ5dGVBcnJheVBLUEMgYnl0ZXMgPSBu\nZXcgQnl0ZUFycmF5UEtQQyhuZXcgYnl0ZVtdDQogICAgICAgICAgICB7IChi\neXRlKSAoaSArIDUpLCAoYnl0ZSkgKGkgKyA2KSB9LCBTdHJpbmcudmFsdWVP\nZihpKSk7DQogICAgICAgICAgICBrZW0ucGVyc2lzdChieXRlcyk7DQogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoYnl0ZXMsIGdldFN0YXRlTWFuYWdlcihi\neXRlcywga2VtKS5nZXRNYW5hZ2VkSW5zdGFuY2UoKSk7DQogICAgICAgICAg\nICBvd25lci5nZXRSZWxzKCkuYWRkKGJ5dGVzKTsNCiAgICAgICAgfQ0KICAg\nICAgICANCiAgICAgICAgZW5kVHgoa2VtKTsgIA0KICAgICAgICANCiAgICAg\nICAgT2JqZWN0IG9pZCA9IGtlbS5nZXRPYmplY3RJZChvd25lcik7DQogICAg\nICAgIGFzc2VydE93bmVyKGtlbSwgb2lkKTsNCiAgICAgICAga2VtLmNsb3Nl\nKCk7DQogICAgICAgIA0KICAgICAgICBrZW0gPSBfcG1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsNCiAgICAgICAgYXNzZXJ0T3duZXIoa2VtLCBvaWQpOw0K\nICAgICAgICBlbS5jbG9zZSgpOw0KICAgICAgICBrZW0uY2xvc2UoKTsNCiAg\nICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdFF1ZXJ5KCkgew0KICAg\nICAgICBFbnRpdHlNYW5hZ2VyIHBtID0gX3BtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7DQogICAgICAgIC8vRklYTUUganRob21hcyAtIHBhcnRseSBjb21t\nZW50ZWQgDQogICAgICAgIC8vUXVlcnkgcSA9IHBtLm5ld1F1ZXJ5KEJ5dGVB\ncnJheVBLUEMuY2xhc3MsICJwayA9PSBieXRlcyIpOw0KICAgICAgICBRdWVy\neSBxID1udWxsOy8vPSBwbS5uZXdRdWVyeShCeXRlQXJyYXlQS1BDLmNsYXNz\nLCAicGsgPT0gYnl0ZXMiKTsNCiAgICAgICAgcS5kZWNsYXJlUGFyYW1ldGVy\ncygiYnl0ZVtdIGJ5dGVzIik7DQogICAgICAgIC8vRklYTUUganRob21hcyAt\nIG5vIGV4ZWN1dGUgZm9yIGJ5dGUgDQogICAgICAgIC8vQ29sbGVjdGlvbiBy\nZXN1bHRzID0gKENvbGxlY3Rpb24pIHEuZXhlY3V0ZShuZXcgYnl0ZVtdeyAx\nLCAyIH0pOw0KICAgICAgICBDb2xsZWN0aW9uIHJlc3VsdHMgPW51bGw7Ly89\nIChDb2xsZWN0aW9uKSBxLmV4ZWN1dGUobmV3IGJ5dGVbXXsgMSwgMiB9KTsN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3VsdHMuc2l6ZSgpKTsNCiAg\nICAgICAgQnl0ZUFycmF5UEtQQzIgY2hpbGQgPSAoQnl0ZUFycmF5UEtQQzIp\nIHJlc3VsdHMuaXRlcmF0b3IoKS5uZXh0KCk7DQogICAgICAgIGFzc2VydEVx\ndWFscygiY2hpbGQiLCBjaGlsZC5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAg\nICAgcS5jbG9zZUFsbCgpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0N\nCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29uZmxpY3RpbmdJZHMoKSB7\nDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gX3BtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOyAgICAg\nDQogICAgICAgIA0KICAgICAgICAvLyBtYWtlIGEgYnVuY2ggb2Ygb2JqZWN0\ncyBwZXJzaXN0ZW50IHdpdGggdGhlIHNhbWUgaW5pdGlhbCBwayB2YWx1ZXMN\nCiAgICAgICAgQnl0ZUFycmF5UEtQQyBvd25lciA9IG5ldyBCeXRlQXJyYXlQ\nS1BDKCk7DQogICAgICAgIHBtLnBlcnNpc3Qob3duZXIpOw0KICAgICAgICBv\nd25lci5zZXRQSyhuZXcgYnl0ZVtdeyAxMDAsIDEwMSB9KTsNCiAgICAgICAg\nb3duZXIuc2V0U3RyaW5nRmllbGQoIm93bmVyIik7DQogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgMjA7IGkrKykgew0KICAgICAgICAgICAgQnl0ZUFy\ncmF5UEtQQyBieXRlcyA9IG5ldyBCeXRlQXJyYXlQS1BDKCk7DQogICAgICAg\nICAgICBwbS5wZXJzaXN0KGJ5dGVzKTsNCiAgICAgICAgICAgIGFzc2VydEVx\ndWFscyhieXRlcywgZ2V0U3RhdGVNYW5hZ2VyKGJ5dGVzLCBwbSkuDQogICAg\nICAgICAgICAgICAgICAgIGdldE1hbmFnZWRJbnN0YW5jZSgpKTsNCiAgICAg\nICAgICAgIGJ5dGVzLnNldFBLKG5ldyBieXRlW117IChieXRlKSAoaSArIDUp\nLCAoYnl0ZSkgKGkgKyA2KSB9KTsNCiAgICAgICAgICAgIGJ5dGVzLnNldFN0\ncmluZ0ZpZWxkKFN0cmluZy52YWx1ZU9mKGkpKTsNCiAgICAgICAgICAgIG93\nbmVyLmdldFJlbHMoKS5hZGQoYnl0ZXMpOw0KICAgICAgICB9DQogICAgICAg\nIGVuZFR4KHBtKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVj\ndElkKG93bmVyKTsNCiAgICAgICAgYXNzZXJ0T3duZXIocG0sIG9pZCk7DQog\nICAgICAgIHBtLmNsb3NlKCk7DQogICAgICAgIA0KICAgICAgICBwbSA9IF9w\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBhc3NlcnRPd25l\ncihwbSwgb2lkKTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCiAgICB9DQogICAg\nDQogICAgcHJpdmF0ZSB2b2lkIGFzc2VydE93bmVyKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtLCBPYmplY3Qgb2lkKSB7DQogICAgICAgIEJ5dGVBcnJheVBL\nUEMgb3duZXIgPSAoQnl0ZUFycmF5UEtQQykgcG0uZ2V0T2JqZWN0SWQob2lk\nKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwMCwgb3duZXIuZ2V0UEsoKVsw\nXSk7DQogICAgICAgIGFzc2VydEVxdWFscygxMDEsIG93bmVyLmdldFBLKClb\nMV0pOw0KICAgICAgICBhc3NlcnRFcXVhbHMoIm93bmVyIiwgb3duZXIuZ2V0\nU3RyaW5nRmllbGQoKSk7DQogICAgICAgIExpc3QgcmVscyA9IG93bmVyLmdl\ndFJlbHMoKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIwLCByZWxzLnNpemUo\nKSk7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmVscy5zaXplKCk7\nIGkrKykgew0KICAgICAgICAgICAgQnl0ZUFycmF5UEtQQyBieXRlcyA9IChC\neXRlQXJyYXlQS1BDKSByZWxzLmdldChpKTsNCiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhpICsgNSwgYnl0ZXMuZ2V0UEsoKVswXSk7DQogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoaSArIDYsIGJ5dGVzLmdldFBLKClbMV0pOw0KICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKFN0cmluZy52YWx1ZU9mKGkpLCBieXRl\ncy5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAN\nCiAgICBwcml2YXRlIEJ5dGVBcnJheVBLUEMgZ2V0UGFyZW50KCkgew0KICAg\nICAgICBCeXRlQXJyYXlQS1BDSWQgb2lkID0gbmV3IEJ5dGVBcnJheVBLUENJ\nZCgpOw0KICAgICAgICBvaWQucGsgPSBuZXcgYnl0ZVtdeyAzLCA0IH07DQog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gX3BtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHJldHVybiAoQnl0ZUFycmF5UEtQ\nQykgcG0uZ2V0T2JqZWN0SWQob2lkKTsNCiAgICB9DQogICAgDQogICAgcHJp\ndmF0ZSBCeXRlQXJyYXlQS1BDMiBnZXRDaGlsZCgpIHsNCiAgICAgICAgQnl0\nZUFycmF5UEtQQ0lkIG9pZCA9IG5ldyBCeXRlQXJyYXlQS1BDSWQoKTsNCiAg\nICAgICAgb2lkLnBrID0gbmV3IGJ5dGVbXXsgMSwgMiB9Ow0KICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IF9wbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOw0KICAgICAgICByZXR1cm4gKEJ5dGVBcnJheVBLUEMyKSBwbS5n\nZXRPYmplY3RJZChvaWQpOw0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgc3Rh\ndGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7DQogICAgICAgLy8gbWFp\nbigpOw0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIE1hcCBnZXRQcm9wcygp\nIHsNCiAgICAgICAgTWFwIHByb3BzPW5ldyBIYXNoTWFwKCk7DQogICAgICAg\nIHByb3BzLnB1dCgib3BlbmpwYS5qZGJjLkRCRGljdGlvbmFyeSIsICIiKTsN\nCiAgICAgICAgcHJvcHMucHV0KCJVc2VHZXRCeXRlc0ZvckJsb2JzIiwgInRy\ndWUiKTsNCiAgICAgICAgcHJvcHMucHV0KCJVc2VTZXRCeXRlc0ZvckJsb2Jz\nIiwgInRydWUiKTsNCiAgICAgICAgcHJvcHMucHV0KCJCYXRjaExpbWl0Iiwg\nIjAiKTsNCiAgICAgICAgDQogICAgICAgIHJldHVybiBwcm9wczsNCiAgICB9\nDQogICAgDQogICAgDQp9DQo=\n","encoding":"base64"}

