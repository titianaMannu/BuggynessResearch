{"sha":"0688cd92c5b493f7c4787dd06ea93ea9c12be1fb","node_id":"MDQ6QmxvYjIwNjM2NDowNjg4Y2Q5MmM1YjQ5M2Y3YzQ3ODdkZDA2ZWE5M2VhOWMxMmJlMWZi","size":10885,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0688cd92c5b493f7c4787dd06ea93ea9c12be1fb","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuamRiYy5rZXJuZWw7DQoNCg0KaW1wb3J0IGphdmEudXRp\nbC4qOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuKjsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLio7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuY29tbW9uLmFw\ncHMuKjsNCg0KDQppbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uQW5ub3Rh\ndGlvbjsNCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuKjsNCmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOw0KaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5Ow0KaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkZldGNoUGxhbjsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5U1BJOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNl\nOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJj\nLmtlcm5lbC5UZXN0U1FMTGlzdGVuZXJUZXN0Q2FzZTsgDQoNCg0KLyoqDQog\nKiBUZXN0IHZhcmlvdXMgYml0cyBvZiBlbWJlZGRlZC1maWVsZCBmdW5jdGlv\nbmFsaXR5Lg0KICogPHAvPg0KICogIyMjIyMgdGhpcyBzaG91bGQgdGVzdCBl\nbWJlZGRlZC1lbGVtZW50IGNvbGxlY3Rpb25zLCBtYXBzLCBhdCBsZWFzdCB0\nbyBlbnN1cmUNCiAqICMjIyMjIHRoYXQgdGhlIHN0YXRlIG1hbmFnZXJzIG9m\nIHZhbHVlcyBpbiBlbWJlZGRlZCBjb2xsZWN0aW9ucywgbWFwcyBkbyBub3QN\nCiAqICMjIyMjIGhhdmUgb3duZXJzLiBOb3QgcmVsZXZhbnQgaW4gMy54OyB3\naWxsIGJlIGltcG9ydGFudCBpbiA0LjAuDQogKi8NCnB1YmxpYyBjbGFzcyBU\nZXN0RW1iZWRkZWRQZXNzaW1pc3RpY0xvY2tpbmcNCiAgICBleHRlbmRzIFRl\nc3RTUUxMaXN0ZW5lclRlc3RDYXNlIHsNCg0KDQogICAgcHJpdmF0ZSBib29s\nZWFuIHN1cHBvcnRzTG9ja2luZzsNCiAgICBwcml2YXRlIE9iamVjdCBvaWQ7\nDQogICAgcHJpdmF0ZSBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgZW1m\nOw0KICAgIA0KICAgIHB1YmxpYyBUZXN0RW1iZWRkZWRQZXNzaW1pc3RpY0xv\nY2tpbmcoU3RyaW5nIG5hbWUpDQogICAgew0KICAgIAlzdXBlcihuYW1lKTsN\nCiAgICB9DQoNCglwdWJsaWMgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRp\nb257DQoJCXN1cGVyLnNldFVwKCk7DQoJCWVtZiA9IChPcGVuSlBBRW50aXR5\nTWFuYWdlckZhY3RvcnkpZ2V0RW1mKGdldFByb3BzKCkpOw0KCX0NCg0KDQoN\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcFRlc3RDYXNlKCkgew0KDQoJCUpEQkND\nb25maWd1cmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pICgoT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJKSBPcGVuSlBBUGVyc2lzdGVu\nY2UuY2FzdChlbWYpKS5nZXRDb25maWd1cmF0aW9uKCk7DQoNCiAgICAgICAg\nc3VwcG9ydHNMb2NraW5nID0gY29uZi5nZXREQkRpY3Rpb25hcnlJbnN0YW5j\nZSgpLnN1cHBvcnRzU2VsZWN0Rm9yVXBkYXRlOw0KDQogICAgICAgZGVsZXRl\nQWxsKEVtYmVkZGVkT3duZXJQQy5jbGFzcyk7DQoNCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgZW0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJy\nZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBzdGFydFR4KGVtKTsNCiAg\nICAgICAgRW1iZWRkZWRPd25lclBDIG93bmVyID0gbmV3IEVtYmVkZGVkT3du\nZXJQQygxMCwgMjApOw0KICAgICAgICBlbS5wZXJzaXN0KG93bmVyKTsNCg0K\nICAgICAgICBFbWJlZGRlZFBDIGVtYmVkZGVkID0gbmV3IEVtYmVkZGVkUEMo\nKTsNCiAgICAgICAgZW1iZWRkZWQuc2V0SW50RmllbGQoNCk7DQogICAgICAg\nIGVtYmVkZGVkLnNldFN0cmluZ0ZpZWxkKCJmb28iKTsNCiAgICAgICAgb3du\nZXIuc2V0RW1iZWRkZWQoZW1iZWRkZWQpOw0KDQogICAgICAgIEVtYmVkZGVk\nUEMgZW1iZWRkZWQyID0gbmV3IEVtYmVkZGVkUEMoKTsNCiAgICAgICAgZW1i\nZWRkZWQyLnNldEludEZpZWxkKDgpOw0KICAgICAgICBlbWJlZGRlZDIuc2V0\nU3RyaW5nRmllbGQoImJhciIpOw0KICAgICAgICBDb21wbGV4RW1iZWRkZWRQ\nQyBjb21wbGV4ID0gbmV3IENvbXBsZXhFbWJlZGRlZFBDKCk7DQogICAgICAg\nIGNvbXBsZXguc2V0U3RyaW5nRmllbGQoImNvbXBsZXgiKTsNCiAgICAgICAg\nY29tcGxleC5zZXRFbWJlZGRlZChlbWJlZGRlZDIpOw0KICAgICAgICBvd25l\nci5zZXRDb21wbGV4RW1iZWRkZWQoY29tcGxleCk7DQoNCiAgICAgICAgZW5k\nVHgoZW0pOw0KDQogICAgICAgIG9pZCA9IGVtLmdldE9iamVjdElkKG93bmVy\nKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCiAgICB9DQoNCiAgICBwcml2YXRl\nIHZvaWQgcHJlcGFyZUVNRihPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkg\nZW1mKSB7DQogICAgICAgIC8vIGRvIHRoaXMgdG8gZW5zdXJlIHRoYXQgdGhl\nIFNFTEVDVCBESVNUSU5DVCBnZXRzIHBlcmZvcm1lZCBoZXJlLg0KICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7DQoNCiAgICAgICAgLy9GSVhNRSBqdGhvbWFzIGNvbW1lbnRp\nbmcgdGhpcyBzaW5jZSBzZXRPcHRpbWlzdGljIGlzIG5vdCBhdmFpbGFibGUg\nZm9yIHVzZXJUeA0KICAgICAgICAvL2VtLmdldFRyYW5zYWN0aW9uKCkuc2V0\nT3B0aW1pc3RpYyhmYWxzZSk7DQogICAgICAgIHN0YXJ0VHgoZW0pOw0KDQog\nICAgICAgIHRyeSB7DQogICAgICAgICAgICBFbWJlZGRlZE93bmVyUEMgcGMg\nPSAoRW1iZWRkZWRPd25lclBDKSBlbS5nZXRPYmplY3RJZChvaWQpOw0KICAg\nICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgcm9sbGJhY2tUeChlbSk7\nDQogICAgICAgICAgICBlbS5jbG9zZSgpOw0KICAgICAgICB9DQogICAgfQ0K\nDQogICAgcHVibGljIHZvaWQgdGVzdEVtYmVkZGVkRmllbGRzV2l0aExvY2tl\nZFBhcmVudCgpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0g\nPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOw0KICAgICAgICBwcmVwYXJlRU1GKGVtLmdldEVudGl0eU1hbmFnZXJGYWN0\nb3J5KCkpOw0KICAgICAgICAoKEZldGNoUGxhbikgZW0uZ2V0RmV0Y2hQbGFu\nKCkpLmFkZEZpZWxkKEVtYmVkZGVkT3duZXJQQy5jbGFzcywgImVtYmVkZGVk\nIik7DQovL0ZJWE1FIGp0aG9tYXMgY29tbWVudGluZyB0aGlzIHNpbmNlIHNl\ndE9wdGltaXN0aWMgaXMgbm90IGF2YWlsYWJsZSBmb3IgdXNlclR4DQovLyAg\nICAgICAgcG0uY3VycmVudFRyYW5zYWN0aW9uKCkuc2V0T3B0aW1pc3RpYyhm\nYWxzZSk7DQogICAgICAgIHN0YXJ0VHgoZW0pOw0KICAgICAgICB0cnkgew0K\nICAgICAgICAgICAgc3FsLmNsZWFyKCk7DQogICAgICAgICAgICBFbWJlZGRl\nZE93bmVyUEMgcGMgPSAoRW1iZWRkZWRPd25lclBDKSBlbS5nZXRPYmplY3RJ\nZChvaWQpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5zaXpl\nKCkpOw0KDQogICAgICAgICAgICBwYy5nZXRFbWJlZGRlZCgpLnNldFN0cmlu\nZ0ZpZWxkDQogICAgICAgICAgICAgICAgKHBjLmdldEVtYmVkZGVkKCkuZ2V0\nU3RyaW5nRmllbGQoKSArICJiYXIiKTsNCiAgICAgICAgICAgIC8vIHNob3Vs\nZCBub3QgZ28gdG8gdGhlIGRiIGZvciBhbm90aGVyIGxvY2s7IHdlIHVzZSA8\nPSwgc2luY2UNCiAgICAgICAgICAgIC8vIHNvbWUgZGF0YWJhc2VzIChsaWtl\nIEhTUUwpIGRvbid0IHN1cHBvcnQgbG9ja2luZyBhdCBhbGwNCiAgICAgICAg\nICAgIGFzc2VydFRydWUoc3FsLnNpemUoKSA8PSAxKTsNCiAgICAgICAgfSBm\naW5hbGx5IHsNCiAgICAgICAgICAgIHJvbGxiYWNrVHgoZW0pOw0KICAgICAg\nICAgICAgZW0uY2xvc2UoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1\nYmxpYyB2b2lkIHRlc3RFbWJlZGRlZEZpZWxkc1dpdGhVbmxvY2tlZFBhcmVu\ndCgpIHsNCgkJT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPShPcGVuSlBBRW50\naXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOw0KCQlwcmVwYXJl\nRU1GKGVtLmdldEVudGl0eU1hbmFnZXJGYWN0b3J5KCkpOw0KCQkoKEZldGNo\nUGxhbikgZW0uZ2V0RmV0Y2hQbGFuKCkpLmFkZEZpZWxkKEVtYmVkZGVkT3du\nZXJQQy5jbGFzcywgImVtYmVkZGVkIik7DQoNCg0KLy9GSVhNRSBqdGhvbWFz\nIGNvbW1lbnRpbmcgdGhpcyBzaW5jZSBzZXRPcHRpbWlzdGljIGlzIG5vdCBh\ndmFpbGFibGUgZm9yIHVzZXJUeA0KLy8gICAgICAgIHBtLmN1cnJlbnRUcmFu\nc2FjdGlvbigpLnNldE9wdGltaXN0aWMoZmFsc2UpOw0KICAgICAgICBzdGFy\ndFR4KGVtKTsNCg0KICAgICAgICB0cnkgew0KDQogICAgICAgICAgICAvL0ZJ\nWE1FIGp0aG9tYXMgLSBubyBlcXVpdmFsZW50IGZvdW5kIGZvciBMb2NrTGV2\nZWxzLkxPQ0tfTk9ORQ0KICAgICAgICAgICAgLy8oKEZldGNoUGxhbikgcG0u\nZ2V0RmV0Y2hQbGFuKCkpLnNldFJlYWRMb2NrTW9kZShMb2NrTGV2ZWxzLkxP\nQ0tfTk9ORSk7DQoNCiAgICAgICAgICAgIHNxbC5jbGVhcigpOw0KICAgICAg\nICAgICAgRW1iZWRkZWRPd25lclBDIHBjID0gKEVtYmVkZGVkT3duZXJQQykg\nZW0uZ2V0T2JqZWN0SWQob2lkKTsNCiAgICAgICAgICAgIEVtYmVkZGVkUEMg\nZW1iZWRkZWQgPSBwYy5nZXRFbWJlZGRlZCgpOw0KDQogICAgICAgICAgICBh\nc3NlcnROdWxsKGdldFN0YXRlTWFuYWdlcihwYywgZW0pLmdldExvY2soKSk7\nDQogICAgICAgICAgICBhc3NlcnROdWxsKGdldFN0YXRlTWFuYWdlcihlbWJl\nZGRlZCwgZW0pLmdldExvY2soKSk7DQogICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoMSwgc3FsLnNpemUoKSk7DQogICAgICAgICAgICBzcWwuY2xlYXIoKTsN\nCg0KICAgICAgICAgICAgZW1iZWRkZWQuc2V0U3RyaW5nRmllbGQoZW1iZWRk\nZWQuZ2V0U3RyaW5nRmllbGQoKSArICJiYXIiKTsNCiAgICAgICAgICAgIC8v\nIHNob3VsZCBub3QgZ28gdG8gdGhlIGRiIGZvciBhbm90aGVyIGxvY2sgLS0g\nc2hvdWxkIGhhdmUgZ290dGVuDQogICAgICAgICAgICAvLyBvbmUgYWxvbmcg\nd2l0aCB0aGUgZW1iZWRkZWQgZmllbGQncyBsb2NrDQogICAgICAgICAgICBh\nc3NlcnRUcnVlKHNxbC5zaXplKCkgPD0gMSk7DQogICAgICAgICAgICBhc3Nl\ncnROb3ROdWxsKGdldFN0YXRlTWFuYWdlcihwYywgZW0pLmdldExvY2soKSk7\nDQoNCiAgICAgICAgICAgIC8vIGVtYmVkZGVkcyBkb24ndCBnZXQgbG9ja3Mg\nYXQgYWxsLg0KICAgICAgICAgICAgYXNzZXJ0TnVsbChnZXRTdGF0ZU1hbmFn\nZXIoZW1iZWRkZWQsIGVtKS5nZXRMb2NrKCkpOw0KDQogICAgICAgICAgICAv\nLyBvd25lciBpcyBkaXJ0aWVkIHdoZW4gZW1iZWRkZWQgcmVjb3JkIGlzIGNo\nYW5nZWQNCiAgICAgICAgICAgIGFzc2VydFRydWUoZ2V0U3RhdGVNYW5hZ2Vy\nKHBjLCBlbSkuaXNEaXJ0eSgpKTsNCiAgICAgICAgICAgIGFzc2VydFRydWUo\nZ2V0U3RhdGVNYW5hZ2VyKGVtYmVkZGVkLCBlbSkuaXNEaXJ0eSgpKTsNCg0K\nICAgICAgICAgICAgcGMuc2V0U3RyaW5nRmllbGQocGMuZ2V0U3RyaW5nRmll\nbGQoKSArICJiYXIiKTsNCiAgICAgICAgICAgIC8vIHNob3VsZCBub3QgZ28g\ndG8gdGhlIGRiIGZvciBhbm90aGVyIGxvY2suDQogICAgICAgICAgICBhc3Nl\ncnRUcnVlKHNxbC5zaXplKCkgPD0gMSk7DQogICAgICAgIH0gZmluYWxseSB7\nDQogICAgICAgICAgICByb2xsYmFja1R4KGVtKTsNCiAgICAgICAgICAgIGVt\nLmNsb3NlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0Q29tcGxleEVtYmVkZGVkRmllbGRzV2l0aExvY2tlZFBhcmVudCgp\nIHsNCg0KCQlPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9KE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQoJCXByZXBhcmVF\nTUYoZW0uZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKSk7DQoJCWVtLmdldEZl\ndGNoUGxhbigpLnNldE1heEZldGNoRGVwdGgoLTEpOw0KCQkoKEZldGNoUGxh\nbikgZW0uZ2V0RmV0Y2hQbGFuKCkpLmFkZEZpZWxkKEVtYmVkZGVkT3duZXJQ\nQy5jbGFzcywgImNvbXBsZXhFbWJlZGRlZCIpOw0KCQkoKEZldGNoUGxhbikg\nZW0uZ2V0RmV0Y2hQbGFuKCkpLmFkZEZpZWxkKFJlY3Vyc2l2ZWx5RW1iZWRk\nZWRQQy5jbGFzcywgImVtYmVkZGVkIik7DQoNCi8vRklYTUUganRob21hcyBj\nb21tZW50aW5nIHRoaXMgc2luY2Ugc2V0T3B0aW1pc3RpYyBpcyBub3QgYXZh\naWxhYmxlIGZvciB1c2VyVHgNCi8vICAgICAgICBwbS5jdXJyZW50VHJhbnNh\nY3Rpb24oKS5zZXRPcHRpbWlzdGljKGZhbHNlKTsNCiAgICAgICAgc3RhcnRU\neChlbSk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBzcWwuY2xlYXIo\nKTsNCiAgICAgICAgICAgIEVtYmVkZGVkT3duZXJQQyBwYyA9IChFbWJlZGRl\nZE93bmVyUEMpIGVtLmdldE9iamVjdElkKG9pZCk7DQogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7DQoNCiAgICAgICAgICAgIHBj\nLmdldENvbXBsZXhFbWJlZGRlZCgpLmdldEVtYmVkZGVkKCkuc2V0U3RyaW5n\nRmllbGQNCiAgICAgICAgICAgICAgICAocGMuZ2V0Q29tcGxleEVtYmVkZGVk\nKCkuZ2V0RW1iZWRkZWQoKS5nZXRTdHJpbmdGaWVsZCgpICsNCiAgICAgICAg\nICAgICAgICAgICAgImJhciIpOw0KICAgICAgICAgICAgLy8gc2hvdWxkIG5v\ndCBnbyB0byB0aGUgZGIgZm9yIGFub3RoZXIgbG9jay4NCiAgICAgICAgICAg\nIGFzc2VydFRydWUoc3FsLnNpemUoKSA8PSAxKTsNCiAgICAgICAgfSBmaW5h\nbGx5IHsNCiAgICAgICAgICAgIHJvbGxiYWNrVHgoZW0pOw0KICAgICAgICAg\nICAgZW0uY2xvc2UoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RDb21wbGV4RW1iZWRkZWRGaWVsZHNXaXRoVW5sb2NrZWRQ\nYXJlbnQoKSB7DQogICAgICAgIC8vIGRvaW5nIHRoaXMgYmVjYXVzZSBzZXR0\naW5nIHRoZSByZWFkIGxvY2sgbGV2ZWwNCiAgICAgICAgLy8gZG9lcyBub3Qg\nc2VlbSB0byBiZSBkaXNhYmxpbmcgRk9SIFVQREFURS4NCg0KDQoJCU9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIGVtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3Vy\ncmVudEVudGl0eU1hbmFnZXIoKTsNCgkJcHJlcGFyZUVNRihlbS5nZXRFbnRp\ndHlNYW5hZ2VyRmFjdG9yeSgpKTsNCgkJZW0uZ2V0RmV0Y2hQbGFuKCkuc2V0\nTWF4RmV0Y2hEZXB0aCgtMSk7DQoJCSgoRmV0Y2hQbGFuKSBlbS5nZXRGZXRj\naFBsYW4oKSkuYWRkRmllbGQoRW1iZWRkZWRPd25lclBDLmNsYXNzLCAiY29t\ncGxleEVtYmVkZGVkIik7DQoJCSgoRmV0Y2hQbGFuKSBlbS5nZXRGZXRjaFBs\nYW4oKSkuYWRkRmllbGQoUmVjdXJzaXZlbHlFbWJlZGRlZFBDLmNsYXNzLCAi\nZW1iZWRkZWQiKTsNCg0KDQoNCi8vRklYTUUganRob21hcyBjb21tZW50aW5n\nIHRoaXMgc2luY2Ugc2V0T3B0aW1pc3RpYyBpcyBub3QgYXZhaWxhYmxlIGZv\nciB1c2VyVHgNCi8vICAgICAgICBwbS5jdXJyZW50VHJhbnNhY3Rpb24oKS5z\nZXRPcHRpbWlzdGljKGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChlbSk7DQoN\nCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIC8vRklYTUUganRob21hcyBG\nZXRjaFBsYW4uTE9DS19OT05FPz8NCiAgICAgICAgICAgIC8vKChGZXRjaFBs\nYW4pIGVtLmdldEZldGNoUGxhbigpKS5zZXRSZWFkTG9ja0xldmVsDQogICAg\nICAgICAgICAvLyAgICAoRmV0Y2hQbGFuLkxPQ0tfTk9ORSk7DQoNCiAgICAg\nICAgICAgIHNxbC5jbGVhcigpOw0KICAgICAgICAgICAgRW1iZWRkZWRPd25l\nclBDIHBjID0gKEVtYmVkZGVkT3duZXJQQykgZW0uZ2V0T2JqZWN0SWQob2lk\nKTsNCiAgICAgICAgICAgIENvbXBsZXhFbWJlZGRlZFBDIGNvbXBsZXggPSBw\nYy5nZXRDb21wbGV4RW1iZWRkZWQoKTsNCiAgICAgICAgICAgIEVtYmVkZGVk\nUEMgZW1iZWRkZWQgPSBjb21wbGV4LmdldEVtYmVkZGVkKCk7DQoNCiAgICAg\nICAgICAgIGFzc2VydE51bGwoZ2V0U3RhdGVNYW5hZ2VyKHBjLCBlbSkuZ2V0\nTG9jaygpKTsNCiAgICAgICAgICAgIGFzc2VydE51bGwoZ2V0U3RhdGVNYW5h\nZ2VyKGNvbXBsZXgsIGVtKS5nZXRMb2NrKCkpOw0KICAgICAgICAgICAgYXNz\nZXJ0TnVsbChnZXRTdGF0ZU1hbmFnZXIoZW1iZWRkZWQsIGVtKS5nZXRMb2Nr\nKCkpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5zaXplKCkp\nOw0KICAgICAgICAgICAgc3FsLmNsZWFyKCk7DQoNCiAgICAgICAgICAgIGVt\nYmVkZGVkLnNldFN0cmluZ0ZpZWxkKGVtYmVkZGVkLmdldFN0cmluZ0ZpZWxk\nKCkgKyAiYmFyIik7DQogICAgICAgICAgICAvLyBzaG91bGQgbm90IGdvIHRv\nIHRoZSBkYiBmb3IgYW5vdGhlciBsb2NrIC0tIHNob3VsZCBoYXZlIGdvdHRl\nbg0KICAgICAgICAgICAgLy8gb25lIGFsb25nIHdpdGggdGhlIGVtYmVkZGVk\nIGZpZWxkJ3MgbG9jaw0KICAgICAgICAgICAgYXNzZXJ0VHJ1ZShzcWwuc2l6\nZSgpIDw9IDEpOw0KICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbChnZXRTdGF0\nZU1hbmFnZXIocGMsIGVtKS5nZXRMb2NrKCkpOw0KDQogICAgICAgICAgICAv\nLyBlbWJlZGRlZHMgZG9uJ3QgZ2V0IGxvY2tzIGF0IGFsbC4NCiAgICAgICAg\nICAgIGFzc2VydE51bGwoZ2V0U3RhdGVNYW5hZ2VyKGNvbXBsZXgsIGVtKS5n\nZXRMb2NrKCkpOw0KICAgICAgICAgICAgYXNzZXJ0TnVsbChnZXRTdGF0ZU1h\nbmFnZXIoZW1iZWRkZWQsIGVtKS5nZXRMb2NrKCkpOw0KDQogICAgICAgICAg\nICAvLyBvd25lciBpcyBkaXJ0aWVkIHdoZW4gZW1iZWRkZWQgcmVjb3JkIGlz\nIGNoYW5nZWQNCiAgICAgICAgICAgIGFzc2VydFRydWUoZ2V0U3RhdGVNYW5h\nZ2VyKHBjLCBlbSkuaXNEaXJ0eSgpKTsNCiAgICAgICAgICAgIGFzc2VydFRy\ndWUoZ2V0U3RhdGVNYW5hZ2VyKGNvbXBsZXgsIGVtKS5pc0RpcnR5KCkpOw0K\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShnZXRTdGF0ZU1hbmFnZXIoZW1iZWRk\nZWQsIGVtKS5pc0RpcnR5KCkpOw0KDQogICAgICAgICAgICBjb21wbGV4LnNl\ndFN0cmluZ0ZpZWxkKGNvbXBsZXguZ2V0U3RyaW5nRmllbGQoKSArICJiYXIi\nKTsNCiAgICAgICAgICAgIC8vIHNob3VsZCBub3QgZ28gdG8gdGhlIGRiIGZv\nciBhbm90aGVyIGxvY2suDQogICAgICAgICAgICBhc3NlcnRUcnVlKHNxbC5z\naXplKCkgPD0gMSk7DQoNCiAgICAgICAgICAgIHBjLnNldFN0cmluZ0ZpZWxk\nKHBjLmdldFN0cmluZ0ZpZWxkKCkgKyAiYmFyIik7DQogICAgICAgICAgICAv\nLyBzaG91bGQgbm90IGdvIHRvIHRoZSBkYiBmb3IgYW5vdGhlciBsb2NrLg0K\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShzcWwuc2l6ZSgpIDw9IDEpOw0KICAg\nICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgcm9sbGJhY2tUeChlbSk7\nDQogICAgICAgICAgICBlbS5jbG9zZSgpOw0KICAgICAgICB9DQogICAgfQ0K\nDQoJcHJpdmF0ZSBNYXAgZ2V0UHJvcHMoKSB7DQoJCU1hcCBwcm9wcz1uZXcg\nSGFzaE1hcCgpOw0KCQlwcm9wcy5wdXQoIm9wZW5qcGEuRGF0YUNhY2hlIiwg\nInRydWUiKTsNCgkJcHJvcHMucHV0KCJvcGVuanBhLlJlbW90ZUNvbW1pdFBy\nb3ZpZGVyIiwgInNqdm0iKTsNCgkJcHJvcHMucHV0KCJvcGVuanBhLkZsdXNo\nQmVmb3JlUXVlcmllcyIsICJ0cnVlIik7DQoJCXByb3BzLnB1dCgiamF2YXgu\namRvLm9wdGlvbi5JZ25vcmVDYWNoZSIsICJmYWxzZSIpOw0KCQkvL3Byb3Bz\nTWFwLnB1dCgib3BlbmpwYS5Ccm9rZXJJbXBsIiwgImtvZG8uZGF0YWNhY2hl\nLkNhY2hlVGVzdEJyb2tlciIpOy8vQ2FjaGVUZXN0QnJva2VyLmNsYXNzLmdl\ndE5hbWUgKCkpOw0KCQlyZXR1cm4gcHJvcHM7DQoJfQ0KDQoNCn0NCg==\n","encoding":"base64"}

