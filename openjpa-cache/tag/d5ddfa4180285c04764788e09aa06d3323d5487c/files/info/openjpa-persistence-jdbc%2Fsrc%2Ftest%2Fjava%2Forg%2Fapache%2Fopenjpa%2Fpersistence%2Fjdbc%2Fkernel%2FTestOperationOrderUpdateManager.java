{"sha":"03cdf9a1303a481cfd87e73bcac63c971803b4ab","node_id":"MDQ6QmxvYjIwNjM2NDowM2NkZjlhMTMwM2E0ODFjZmQ4N2U3M2JjYWM2M2M5NzE4MDNiNGFi","size":9842,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/03cdf9a1303a481cfd87e73bcac63c971803b4ab","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuamRiYy5rZXJuZWw7DQoNCg0KDQppbXBvcnQgamF2YS51\ndGlsLio7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuamRiYy5jb21tb24uYXBwcy4qOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5jb21tb24udXRpbHMuKjsNCg0KaW1wb3J0IGph\ndmEubGFuZy5hbm5vdGF0aW9uLkFubm90YXRpb247DQppbXBvcnQganVuaXQu\nZnJhbWV3b3JrLio7DQppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5\nTWFuYWdlcjsNCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5h\nZ2VyRmFjdG9yeTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5j\nb25mLkpEQkNDb25maWd1cmF0aW9uOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnk7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFj\ndG9yeTsNCg0KDQpwdWJsaWMgY2xhc3MgVGVzdE9wZXJhdGlvbk9yZGVyVXBk\nYXRlTWFuYWdlcg0KICAgIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2FzZSB7DQoN\nCg0KLy8JcHJpdmF0ZSBib29sZWFuICA9IHRydWU7Ly9Cb29sZWFuLnZhbHVl\nT2YoYm9vbCk7DQoNCg0KICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4gX21h\ncHBlZCA9IGZhbHNlOw0KDQogICAgcHJpdmF0ZSBFbnRpdHlNYW5hZ2VyRmFj\ndG9yeSBlbWY7DQoNCiAgICAvKnByb3RlY3RlZCBib29sZWFuIHNraXBUZXN0\nKCkgew0KICAgICAgICBpZiAoIWdldE5hbWUoKS5zdGFydHNXaXRoKCJ0ZXN0\nQXV0byIpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KDQoJCWVtZiA9\nIGdldEVtZigpOw0KDQoJCUpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSAoSkRC\nQ0NvbmZpZ3VyYXRpb24pICgoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5\nU1BJKSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChlbWYpKS5nZXRDb25maWd1\ncmF0aW9uKCk7DQogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gY29uZi5n\nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpOw0KICAgICAgICByZXR1cm4gIWRp\nY3Quc3VwcG9ydHNBdXRvQXNzaWduOw0KICAgIH0NCiovDQogICAgcHVibGlj\nIFRlc3RPcGVyYXRpb25PcmRlclVwZGF0ZU1hbmFnZXIoU3RyaW5nIG5hbWUp\nDQogICAgew0KICAgIAlzdXBlcihuYW1lKTsNCiAgICB9DQoNCiAgICBwcml2\nYXRlIHZvaWQgaW5zZXJ0VGVzdChib29sZWFuIGF1dG9Bc3NpZ24pIHsNCiAg\nICAgICAgT3BPcmRlciBvaWQgPSAoYXV0b0Fzc2lnbikgPyBpbnNlcnRBdXRv\nQXNzaWduKCkgOiBpbnNlcnQoKTsNCg0KICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCg0KICAgICAgICBPcE9y\nZGVyIHBjID0gKE9wT3JkZXIpIGVtLmZpbmQoT3BPcmRlci5jbGFzcyxvaWQu\nZ2V0SWQoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygicGMiLCBwYy5nZXRT\nZWNvbmRhcnkoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygicGNzdWIiLCBw\nYy5nZXRTdWIoKSk7DQogICAgICAgIGFzc2VydE5vdE51bGwocGMuZ2V0UmVs\nKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoInJlbCIsIHBjLmdldFJlbCgp\nLmdldFNlY29uZGFyeSgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBj\nLmdldFJlbExpc3QoKS5zaXplKCkpOw0KICAgICAgICBhc3NlcnRUcnVlKCgo\nT3BPcmRlcikgcGMuZ2V0UmVsTGlzdCgpLml0ZXJhdG9yKCkubmV4dCgpKS4N\nCiAgICAgICAgICAgIGdldFNlY29uZGFyeSgpLnN0YXJ0c1dpdGgoImNoaWxk\nIikpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0TWFwcGVkUmVs\nTGlzdCgpLnNpemUoKSk7DQogICAgICAgIGFzc2VydFRydWUoKChPcE9yZGVy\nKSBwYy5nZXRNYXBwZWRSZWxMaXN0KCkuaXRlcmF0b3IoKS5uZXh0KCkpLg0K\nICAgICAgICAgICAgZ2V0U2Vjb25kYXJ5KCkuc3RhcnRzV2l0aCgibWFwcGVk\nIikpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0SW52ZXJzZUtl\neVJlbExpc3QoKS5zaXplKCkpOw0KICAgICAgICBhc3NlcnRUcnVlKCgoT3BP\ncmRlcikgcGMuZ2V0SW52ZXJzZUtleVJlbExpc3QoKS5pdGVyYXRvcigpLg0K\nICAgICAgICAgICAgbmV4dCgpKS5nZXRTZWNvbmRhcnkoKS5zdGFydHNXaXRo\nKCJpbnZlcnNlIikpOw0KICAgICAgICBlbS5jbG9zZSgpOw0KICAgIH0NCg0K\nDQoNCiAgICBwcml2YXRlIE9wT3JkZXIgaW5zZXJ0KCkgew0KICAgICAgICBP\ncE9yZGVyUENTdWIgcGMgPSBuZXcgT3BPcmRlclBDU3ViKCk7DQogICAgICAg\nIHBjLnNldFNlY29uZGFyeSgicGMiKTsNCiAgICAgICAgcGMuc2V0U3ViKCJw\nY3N1YiIpOw0KICAgICAgICBPcE9yZGVyUENTdWIgcmVsID0gbmV3IE9wT3Jk\nZXJQQ1N1YigpOw0KICAgICAgICByZWwuc2V0U2Vjb25kYXJ5KCJyZWwiKTsN\nCiAgICAgICAgcGMuc2V0UmVsKHJlbCk7DQogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgMjsgaSsrKSB7DQogICAgICAgICAgICBPcE9yZGVyUENTdWIg\nY2hpbGQgPSBuZXcgT3BPcmRlclBDU3ViKCk7DQogICAgICAgICAgICBjaGls\nZC5zZXRTZWNvbmRhcnkoImNoaWxkIiArIGkpOw0KICAgICAgICAgICAgcGMu\nZ2V0UmVsTGlzdCgpLmFkZChjaGlsZCk7DQoNCiAgICAgICAgICAgIE9wT3Jk\nZXJQQ1N1YiBtYXBwZWQgPSBuZXcgT3BPcmRlclBDU3ViKCk7DQogICAgICAg\nICAgICBtYXBwZWQuc2V0U2Vjb25kYXJ5KCJtYXBwZWQiICsgaSk7DQogICAg\nICAgICAgICBtYXBwZWQuc2V0T3duZXIocGMpOw0KICAgICAgICAgICAgcGMu\nZ2V0TWFwcGVkUmVsTGlzdCgpLmFkZChtYXBwZWQpOw0KDQogICAgICAgICAg\nICBPcE9yZGVyUENTdWIgaW52ZXJzZSA9IG5ldyBPcE9yZGVyUENTdWIoKTsN\nCiAgICAgICAgICAgIGludmVyc2Uuc2V0U2Vjb25kYXJ5KCJpbnZlcnNlIiAr\nIGkpOw0KICAgICAgICAgICAgcGMuZ2V0SW52ZXJzZUtleVJlbExpc3QoKS5h\nZGQoaW52ZXJzZSk7DQogICAgICAgIH0NCg0KICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCgkJc3RhcnRUeChl\nbSk7DQogICAgICAgIGVtLnBlcnNpc3QocmVsKTsNCiAgICAgICAgcGVyc2lz\ndEFsbChlbSxwYy5nZXRJbnZlcnNlS2V5UmVsTGlzdCgpKTsNCiAgICAgICAg\nZW0ucGVyc2lzdChwYyk7DQogICAgICAgIGVuZFR4KGVtKTsNCiAgICAgICAg\nT3BPcmRlciBvaWQgPSBlbS5maW5kKE9wT3JkZXIuY2xhc3MscGMuZ2V0SWQo\nKSk7DQogICAgICAgIC8vZW0uZ2V0T2JqZWN0SWQocGMpOw0KICAgICAgICBl\nbS5jbG9zZSgpOw0KICAgICAgICByZXR1cm4gb2lkOw0KICAgIH0NCg0KICAg\nIHByaXZhdGUgT3BPcmRlciBpbnNlcnRBdXRvQXNzaWduKCkgew0KICAgICAg\nICBBdXRvSW5jcmVtZW50T3BPcmRlclBDU3ViIHBjID0gbmV3IEF1dG9JbmNy\nZW1lbnRPcE9yZGVyUENTdWIoKTsNCiAgICAgICAgcGMuc2V0U2Vjb25kYXJ5\nKCJwYyIpOw0KICAgICAgICBwYy5zZXRTdWIoInBjc3ViIik7DQogICAgICAg\nIEF1dG9JbmNyZW1lbnRPcE9yZGVyUENTdWIgcmVsID0gbmV3IEF1dG9JbmNy\nZW1lbnRPcE9yZGVyUENTdWIoKTsNCiAgICAgICAgcmVsLnNldFNlY29uZGFy\neSgicmVsIik7DQogICAgICAgIHBjLnNldFJlbChyZWwpOw0KICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IDI7IGkrKykgew0KICAgICAgICAgICAgQXV0\nb0luY3JlbWVudE9wT3JkZXJQQ1N1YiBjaGlsZCA9IG5ldyBBdXRvSW5jcmVt\nZW50T3BPcmRlclBDU3ViKCk7DQogICAgICAgICAgICBjaGlsZC5zZXRTZWNv\nbmRhcnkoImNoaWxkIiArIGkpOw0KICAgICAgICAgICAgcGMuZ2V0UmVsTGlz\ndCgpLmFkZChjaGlsZCk7DQoNCiAgICAgICAgICAgIEF1dG9JbmNyZW1lbnRP\ncE9yZGVyUENTdWIgbWFwcGVkID0gbmV3IEF1dG9JbmNyZW1lbnRPcE9yZGVy\nUENTdWIoKTsNCiAgICAgICAgICAgIG1hcHBlZC5zZXRTZWNvbmRhcnkoIm1h\ncHBlZCIgKyBpKTsNCiAgICAgICAgICAgIG1hcHBlZC5zZXRPd25lcihwYyk7\nDQogICAgICAgICAgICBwYy5nZXRNYXBwZWRSZWxMaXN0KCkuYWRkKG1hcHBl\nZCk7DQoNCiAgICAgICAgICAgIEF1dG9JbmNyZW1lbnRPcE9yZGVyUENTdWIg\naW52ZXJzZSA9IG5ldyBBdXRvSW5jcmVtZW50T3BPcmRlclBDU3ViKCk7DQog\nICAgICAgICAgICBpbnZlcnNlLnNldFNlY29uZGFyeSgiaW52ZXJzZSIgKyBp\nKTsNCiAgICAgICAgICAgIHBjLmdldEludmVyc2VLZXlSZWxMaXN0KCkuYWRk\nKGludmVyc2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0\nVHgoZW0pOw0KICAgICAgICBlbS5wZXJzaXN0KHJlbCk7DQogICAgICAgIHBl\ncnNpc3RBbGwoZW0scGMuZ2V0SW52ZXJzZUtleVJlbExpc3QoKSk7DQogICAg\nICAgIGVtLnBlcnNpc3QocGMpOw0KICAgICAgICBlbmRUeChlbSk7DQogICAg\nICAgIE9wT3JkZXIgb2lkID0gZW0uZmluZChBdXRvSW5jcmVtZW50T3BPcmRl\nclBDU3ViLmNsYXNzLHBjLmdldElkKCkpOw0KICAgICAgICBlbS5jbG9zZSgp\nOw0KICAgICAgICByZXR1cm4gb2lkOw0KICAgIH0NCg0KDQogICAgcHJpdmF0\nZSB2b2lkIGluc2VydENpcmN1bGFyQ29uc3RyYWludFRlc3QoYm9vbGVhbiBh\ndXRvQXNzaWduKSB7DQogICAgICAgIE9wT3JkZXIgb2lkID0gKGF1dG9Bc3Np\nZ24pID8gaW5zZXJ0Q2lyY3VsYXJBdXRvQXNzaWduKCkNCiAgICAgICAgICAg\nIDogaW5zZXJ0Q2lyY3VsYXIoKTsNCg0KICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgT3BPcmRl\nciBwYzEgPSAoT3BPcmRlcikgZW0uZmluZChPcE9yZGVyLmNsYXNzLG9pZC5n\nZXRJZCgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJwYzEiLCBwYzEuZ2V0\nU2Vjb25kYXJ5KCkpOw0KICAgICAgICBhc3NlcnROb3ROdWxsKHBjMS5nZXRS\nZWwoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygicGMyIiwgcGMxLmdldFJl\nbCgpLmdldFNlY29uZGFyeSgpKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVsbChw\nYzEuZ2V0UmVsKCkuZ2V0UmVsKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMo\ncGMxLCBwYzEuZ2V0UmVsKCkuZ2V0UmVsKCkpOw0KICAgICAgICBlbS5jbG9z\nZSgpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgT3BPcmRlciBpbnNlcnRDaXJj\ndWxhcigpIHsNCiAgICAgICAgT3BPcmRlclBDU3ViIHBjMSA9IG5ldyBPcE9y\nZGVyUENTdWIoKTsNCiAgICAgICAgcGMxLnNldFNlY29uZGFyeSgicGMxIik7\nDQogICAgICAgIHBjMS5zZXRTdWIoInBjc3ViIik7DQogICAgICAgIE9wT3Jk\nZXJQQ1N1YiBwYzIgPSBuZXcgT3BPcmRlclBDU3ViKCk7DQogICAgICAgIHBj\nMi5zZXRTZWNvbmRhcnkoInBjMiIpOw0KICAgICAgICBwYzEuc2V0UmVsKHBj\nMik7DQogICAgICAgIHBjMi5zZXRSZWwocGMxKTsNCg0KICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAg\nICAgc3RhcnRUeChlbSk7DQogICAgICAgIGVtLnBlcnNpc3QocGMxKTsNCiAg\nICAgICAgZW0ucGVyc2lzdChwYzIpOw0KICAgICAgICBlbmRUeChlbSk7DQog\nICAgICAgIE9wT3JkZXIgb2lkID0gZW0uZmluZChPcE9yZGVyLmNsYXNzLHBj\nMS5nZXRJZCgpKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCiAgICAgICAgcmV0\ndXJuIG9pZDsNCiAgICB9DQoNCiAgICBwcml2YXRlIE9wT3JkZXIgaW5zZXJ0\nQ2lyY3VsYXJBdXRvQXNzaWduKCkgew0KICAgICAgICBBdXRvSW5jcmVtZW50\nT3BPcmRlclBDU3ViIHBjMSA9IG5ldyBBdXRvSW5jcmVtZW50T3BPcmRlclBD\nU3ViKCk7DQogICAgICAgIHBjMS5zZXRTZWNvbmRhcnkoInBjMSIpOw0KICAg\nICAgICBwYzEuc2V0U3ViKCJwY3N1YiIpOw0KICAgICAgICBBdXRvSW5jcmVt\nZW50T3BPcmRlclBDU3ViIHBjMiA9IG5ldyBBdXRvSW5jcmVtZW50T3BPcmRl\nclBDU3ViKCk7DQogICAgICAgIHBjMi5zZXRTZWNvbmRhcnkoInBjMiIpOw0K\nICAgICAgICBwYzEuc2V0UmVsKHBjMik7DQogICAgICAgIHBjMi5zZXRSZWwo\ncGMxKTsNCg0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsNCiAgICAgICAgc3RhcnRUeChlbSk7DQogICAgICAg\nIGVtLnBlcnNpc3QocGMxKTsNCiAgICAgICAgZW0ucGVyc2lzdChwYzIpOw0K\nICAgICAgICBlbmRUeChlbSk7DQogICAgICAgIE9wT3JkZXIgb2lkID0gZW0u\nZmluZChPcE9yZGVyLmNsYXNzLHBjMS5nZXRJZCgpKTsNCiAgICAgICAgZW0u\nY2xvc2UoKTsNCiAgICAgICAgcmV0dXJuIG9pZDsNCiAgICB9DQoNCg0KICAg\nIHByaXZhdGUgdm9pZCBkZWxldGVDaXJjdWxhclRlc3QoYm9vbGVhbiBhdXRv\nQXNzaWduKSB7DQogICAgICAgIE9wT3JkZXIgb2lkID0gKGF1dG9Bc3NpZ24p\nID8gaW5zZXJ0Q2lyY3VsYXJBdXRvQXNzaWduKCkNCiAgICAgICAgICAgIDog\naW5zZXJ0Q2lyY3VsYXIoKTsNCg0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgc3RhcnRUeChl\nbSk7DQogICAgICAgIE9wT3JkZXIgcGMxID0gKE9wT3JkZXIpIGVtLmZpbmQo\nT3BPcmRlci5jbGFzcyxvaWQuZ2V0SWQoKSk7DQogICAgICAgIGVtLnJlbW92\nZShwYzEuZ2V0UmVsKCkpOw0KICAgICAgICBlbS5yZW1vdmUocGMxKTsNCiAg\nICAgICAgZW5kVHgoZW0pOw0KICAgICAgICBlbS5jbG9zZSgpOw0KDQovKiAg\nICAgICAgcG0gPSBfcG1mLmdldFBlcnNpc3RlbmNlTWFuYWdlcigpOw0KICAg\nICAgICBpZiAoYXV0b0Fzc2lnbikNCiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncygwLCAoKEtvZG9FeHRlbnQpIHBtLmdldEV4dGVudA0KICAgICAgICAgICAg\nICAgIChBdXRvSW5jcmVtZW50T3BPcmRlclBDU3ViLmNsYXNzLCB0cnVlKSku\nbGlzdCgpLnNpemUoKSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGFz\nc2VydEVxdWFscygwLCAoKEtvZG9FeHRlbnQpIHBtLmdldEV4dGVudChPcE9y\nZGVyUEMuY2xhc3MsDQogICAgICAgICAgICAgICAgdHJ1ZSkpLmxpc3QoKS5z\naXplKCkpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KKi8NCiAgICB9DQoNCiAg\nICBwcml2YXRlIHZvaWQgZGVsZXRlVGVzdChib29sZWFuIGF1dG9Bc3NpZ24p\nIHsNCiAgICAgICAgT3BPcmRlciBvaWQgPSAoYXV0b0Fzc2lnbikgPyBpbnNl\ncnRBdXRvQXNzaWduKCkgOiBpbnNlcnQoKTsNCg0KICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAg\nc3RhcnRUeChlbSk7DQogICAgICAgIE9wT3JkZXIgcGMgPSAoT3BPcmRlcikg\nZW0uZmluZChPcE9yZGVyLmNsYXNzLG9pZC5nZXRJZCgpKTsNCiAgICAgICAg\ncmVtb3ZlQWxsKGVtLHBjLmdldE1hcHBlZFJlbExpc3QoKSk7DQogICAgICAg\nIHJlbW92ZUFsbChlbSxwYy5nZXRJbnZlcnNlS2V5UmVsTGlzdCgpKTsNCiAg\nICAgICAgcmVtb3ZlQWxsKGVtLHBjLmdldFJlbExpc3QoKSk7DQogICAgICAg\nIGVtLnJlbW92ZShwYy5nZXRSZWwoKSk7DQogICAgICAgIGVtLnJlbW92ZShw\nYyk7DQogICAgICAgIGVuZFR4KGVtKTsNCiAgICAgICAgZW0uY2xvc2UoKTsN\nCi8qDQogICAgICAgIHBtID0gX3BtZi5nZXRQZXJzaXN0ZW5jZU1hbmFnZXIo\nKTsNCiAgICAgICAgaWYgKGF1dG9Bc3NpZ24pDQogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoMCwgKChLb2RvRXh0ZW50KSBwbS5nZXRFeHRlbnQNCiAgICAg\nICAgICAgICAgICAoQXV0b0luY3JlbWVudE9wT3JkZXJQQ1N1Yi5jbGFzcywg\ndHJ1ZSkpLmxpc3QoKS5zaXplKCkpOw0KICAgICAgICBlbHNlDQogICAgICAg\nICAgICBhc3NlcnRFcXVhbHMoMCwgKChLb2RvRXh0ZW50KSBwbS5nZXRFeHRl\nbnQoT3BPcmRlclBDLmNsYXNzLA0KICAgICAgICAgICAgICAgIHRydWUpKS5s\naXN0KCkuc2l6ZSgpKTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCiovDQogICAg\nfQ0KDQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW5zZXJ0KCkgew0KICAgICAg\nICBpbnNlcnRUZXN0KGZhbHNlKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0QXV0b0Fzc2lnbkluc2VydCgpIHsNCiAgICAgICAgaW5zZXJ0VGVz\ndCh0cnVlKTsNCiAgICB9DQoNCg0KICAgIHB1YmxpYyB2b2lkIHRlc3REZWxl\ndGVDaXJjdWxhcigpIHsNCiAgICAgICAgZGVsZXRlQ2lyY3VsYXJUZXN0KGZh\nbHNlKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0QXV0b0Fzc2ln\nbkRlbGV0ZUNpcmN1bGFyKCkgew0KICAgICAgICBkZWxldGVDaXJjdWxhclRl\nc3QodHJ1ZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdERlbGV0\nZSgpIHsNCiAgICAgICAgZGVsZXRlVGVzdChmYWxzZSk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdEF1dG9Bc3NpZ25EZWxldGUoKSB7DQogICAg\nICAgIGRlbGV0ZVRlc3QodHJ1ZSk7DQogICAgfQ0KDQoNCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0SW5zZXJ0Q2lyY3VsYXJDb25zdHJhaW50KCkgew0KICAgICAg\nICBpbnNlcnRDaXJjdWxhckNvbnN0cmFpbnRUZXN0KGZhbHNlKTsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0QXV0b0Fzc2lnbkluc2VydENpcmN1\nbGFyQ29uc3RyYWludCgpIHsNCiAgICAgICAgaW5zZXJ0Q2lyY3VsYXJDb25z\ndHJhaW50VGVzdCh0cnVlKTsNCiAgICB9DQoNCg0KDQogICAgcHJpdmF0ZSB2\nb2lkIHBlcnNpc3RBbGwoRW50aXR5TWFuYWdlciBlbSwgTGlzdCBsaXN0KSB7\nDQoNCgkJSXRlcmF0b3IgaSA9IGxpc3QuaXRlcmF0b3IoKTsNCgkJd2hpbGUo\naS5oYXNOZXh0KCkpIHsNCgkJCU9iamVjdCBvID0gaS5uZXh0KCk7DQoJCQll\nbS5wZXJzaXN0KG8pOw0KCQl9DQoJfQ0KDQoNCglwcml2YXRlIHZvaWQgcmVt\nb3ZlQWxsKEVudGl0eU1hbmFnZXIgZW0sIExpc3QgbGlzdCkgew0KDQoJCUl0\nZXJhdG9yIGkgPSBsaXN0Lml0ZXJhdG9yKCk7DQoJCXdoaWxlKGkuaGFzTmV4\ndCgpKSB7DQoJCQlPYmplY3QgbyA9IGkubmV4dCgpOw0KCQkJZW0ucmVtb3Zl\nKG8pOw0KCQl9DQoJfQ0KDQoNCg0KDQoNCg0KDQp9DQo=\n","encoding":"base64"}

