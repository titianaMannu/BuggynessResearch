{"sha":"a92a4a6e1a227f5ac4c7de8f95c1d61a0785becf","node_id":"MDQ6QmxvYjIwNjM2NDphOTJhNGE2ZTFhMjI3ZjVhYzRjN2RlOGY5NWMxZDYxYTA3ODViZWNm","size":6119,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a92a4a6e1a227f5ac4c7de8f95c1d61a0785becf","content":"DQovKg0KICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQ0KICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlDQog\nKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBp\nbmZvcm1hdGlvbg0KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAu\nICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQ0KICogdG8geW91IHVuZGVy\nIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQ0KICogIkxp\nY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4g\nY29tcGxpYW5jZQ0KICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0\nYWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAqIGh0dHA6Ly93\nd3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICoNCiAqIFVu\nbGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8g\naW4gd3JpdGluZywNCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRo\nZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuDQogKiAiQVMgSVMiIEJB\nU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkN\nCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhl\nIExpY2Vuc2UgZm9yIHRoZQ0KICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJu\naW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucw0KICogdW5kZXIgdGhl\nIExpY2Vuc2UuICAgIA0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5qZGJjLmtlcm5lbDsNCg0KDQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuY29tbW9uLmFwcHMuKjsN\nCg0KDQppbXBvcnQgamF2YS5sYW5nLmFubm90YXRpb24uQW5ub3RhdGlvbjsN\nCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuKjsNCmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOw0KaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5Ow0KDQppbXBvcnQgamF2YS5zcWwu\nKjsNCmltcG9ydCBqYXZhLnV0aWwuKjsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLkJyb2tlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNlOw0KaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5KUEFGYWNhZGVIZWxwZXI7\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkpEQkNT\ndG9yZTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVz\ndWx0U2V0UmVzdWx0Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ncm9wLlJlc3VsdE9iamVjdFByb3ZpZGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5HZW5lcmljUmVzdWx0T2JqZWN0UHJvdmlk\nZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5yb3AuUmVzdWx0\nTGlzdDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnJvcC5FYWdl\nclJlc3VsdExpc3Q7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5y\nb3AuUmVzdWx0T2JqZWN0UHJvdmlkZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmtlcm5lbC5BYnN0cmFjdFBDUmVzdWx0T2JqZWN0UHJvdmlkZXI7\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0\nYTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFT\ndGF0ZU1hbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5GZXRjaENvbmZpZ3VyYXRpb247DQovKioNCiAqDQogKi8NCg0KDQpwdWJs\naWMgY2xhc3MgVGVzdFJhd1NRTCBleHRlbmRzIEJhc2VKREJDVGVzdCB7DQog\nICAgDQogICAgLyoqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdFJh\nd1NRTCAqLw0KICAgIHByaXZhdGUgT2JqZWN0W10gX29pZHMgPSBuZXcgT2Jq\nZWN0WzNdOw0KICAgIHByaXZhdGUgU3RyaW5nW10gX3N0cmluZ3MgPSBuZXcg\nU3RyaW5nW117ICJhIiwgImIiLCAiYyIgfTsNCiAgICBwcml2YXRlIGludFtd\nIF9pbnRzID0gbmV3IGludFtdeyAxLCAyLCAzIH07DQoNCiAgICBwdWJsaWMg\nVGVzdFJhd1NRTChTdHJpbmcgdGVzdCkgew0KICAgICAgICBzdXBlcih0ZXN0\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsNCiAgICAg\nICBkZWxldGVBbGwoUmF3U1FMLmNsYXNzKTsNCiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIEJy\nb2tlciBicm9rZXIgPSBKUEFGYWNhZGVIZWxwZXIudG9Ccm9rZXIoZW0pOw0K\nDQogICAgICAgIGJyb2tlci5iZWdpbigpOw0KICAgICAgICBSYXdTUUwgcmF3\nOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9vaWRzLmxlbmd0aDsg\naSsrKSB7DQogICAgICAgICAgICByYXcgPSBuZXcgUmF3U1FMKF9zdHJpbmdz\nW2ldLCBfaW50c1tpXSk7DQogICAgICAgICAgICBicm9rZXIucGVyc2lzdChy\nYXcsIG51bGwpOw0KICAgICAgICAgICAgX29pZHNbaV0gPSBicm9rZXIuZ2V0\nVXNlck9iamVjdChyYXcpOw0KICAgICAgICB9DQogICAgICAgIGJyb2tlci5j\nb21taXQoKTsNCiAgICAgICAgYnJva2VyLmNsb3NlKCk7DQogICAgICAgIGVt\nLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdExvYWRX\naXRoUmVzdWx0KCkNCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAg\nICAgIA0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0\neU1hbmFnZXIoKTsNCiAgICAgICAgQnJva2VyIGJyb2tlciA9IEpQQUZhY2Fk\nZUhlbHBlci50b0Jyb2tlcihlbSk7DQogICAgICAgDQogICAgICAgIEpEQkNT\ndG9yZSBzdG9yZSA9IChKREJDU3RvcmUpYnJva2VyLmdldFN0b3JlTWFuYWdl\ncigpOw0KDQogICAgICAgIENvbm5lY3Rpb24gY29ubiA9IHN0b3JlLmdldENv\nbm5lY3Rpb24oKTsNCiAgICAgICAgU3RhdGVtZW50IHN0bW50ID0gY29ubi5j\ncmVhdGVTdGF0ZW1lbnQoKTsNCiAgICAgICAgUmVzdWx0U2V0IHJzID0gc3Rt\nbnQuZXhlY3V0ZVF1ZXJ5KCJTRUxFQ1QgKiBGUk9NIFJBV1NRTCAiDQogICAg\nICAgICsgIk9SREVSIEJZIElOVEZJRUxEIik7DQogICAgICAgIFJlc3VsdFNl\ndFJlc3VsdCByZXMgPSBuZXcgUmVzdWx0U2V0UmVzdWx0KHJzLA0KICAgICAg\nICBzdG9yZS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0REJEaWN0aW9uYXJ5SW5z\ndGFuY2UoKSk7DQogICAgICAgIFJlc3VsdE9iamVjdFByb3ZpZGVyIHJvcCA9\nIG5ldyBHZW5lcmljUmVzdWx0T2JqZWN0UHJvdmlkZXINCiAgICAgICAgKFJh\nd1NRTC5jbGFzcywgc3RvcmUsIG51bGwsIHJlcyk7DQogICAgICAgIFJlc3Vs\ndExpc3QgcmwgPSBuZXcgRWFnZXJSZXN1bHRMaXN0KHJvcCk7DQogICAgICAg\nIGNoZWNrKHJsLCBicm9rZXIpOw0KICAgICAgICBybC5jbG9zZSgpOw0KICAg\nICAgICBicm9rZXIuY2xvc2UoKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCiAg\nICB9DQoNCiAgICAgICAgcHVibGljIHZvaWQgdGVzdExvYWRXaXRoUENST1Ao\nKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgICAgIA0K\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsgICAgDQogICAgICAgIEJyb2tlciBicm9rZXIgPSBKUEFGYWNhZGVI\nZWxwZXIudG9Ccm9rZXIoZW0pOw0KICAgICAgICBSZXN1bHRPYmplY3RQcm92\naWRlciByb3AgPSBuZXcgQWJzdHJhY3RQQ1Jlc3VsdE9iamVjdFByb3ZpZGVy\nKGJyb2tlcikgew0KICAgICAgICAgICAgcHJpdmF0ZSBpbnQgX3JvdyA9IC0x\nOw0KDQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBzdXBwb3J0c1JhbmRv\nbUFjY2VzcygpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAg\nICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcHVibGljIGJvb2xlYW4gbmV4\ndCgpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gKytfcm93IDwgX29pZHMu\nbGVuZ3RoOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBwdWJsaWMg\nYm9vbGVhbiBhYnNvbHV0ZShpbnQgcG9zKSB7DQogICAgICAgICAgICAgICAg\nX3JvdyA9IHBvczsNCiAgICAgICAgICAgICAgICByZXR1cm4gX3JvdyA8IF9v\naWRzLmxlbmd0aDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcHVi\nbGljIGludCBzaXplKCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBfb2lk\ncy5sZW5ndGg7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHB1Ymxp\nYyB2b2lkIGNsb3NlKCkgew0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAg\nICBwdWJsaWMgdm9pZCBoYW5kbGVDaGVja2VkRXhjZXB0aW9uKEV4Y2VwdGlv\nbiBlKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNl\ncHRpb24oZS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAg\nICAgICAgcHJvdGVjdGVkIE9iamVjdCBnZXRPYmplY3RJZChDbGFzc01ldGFE\nYXRhIG1ldGEpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gX29pZHNbX3Jv\nd107DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHByb3RlY3RlZCBD\nbGFzcyBnZXRQQ1R5cGUoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIFJh\nd1NRTC5jbGFzczsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcHJv\ndGVjdGVkIHZvaWQgbG9hZChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCANCiAg\nICAgICAgICAgICAgICBGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gpIHsNCiAg\nICAgICAgICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEgPSBzbS5nZXRNZXRh\nRGF0YSgpOw0KICAgICAgICAgICAgICAgIHNtLnN0b3JlU3RyaW5nRmllbGQo\nbWV0YS5nZXRGaWVsZCgic3RyaW5nRmllbGQiKS5nZXRJbmRleCgpLA0KICAg\nICAgICAgICAgICAgICAgICBfc3RyaW5nc1tfcm93XSk7DQogICAgICAgICAg\nICAgICAgc20uc3RvcmVJbnRGaWVsZChtZXRhLmdldEZpZWxkKCJpbnRGaWVs\nZCIpLmdldEluZGV4KCksDQogICAgICAgICAgICAgICAgICAgIF9pbnRzW19y\nb3ddKTsNCg0KICAgICAgICAgICAgICAgIC8vIG5vdGUgdGhhdCB3ZSdyZSBu\nb3QgbG9hZGluZyB2ZXJzaW9uIGluZm8gaGVyZSwgc28gdGhlIHN5c3RlbQ0K\nICAgICAgICAgICAgICAgIC8vIHdpbGwgZ28gb3V0IGFuZCBnZXQgaXQgYWZ0\nZXIgdGhpcyBpbnRpYWwgbG9hZDsga2luZGEgbmVhdA0KICAgICAgICAgICAg\nfQ0KICAgICAgICB9Ow0KICAgICAgICBSZXN1bHRMaXN0IHJsID0gbmV3IEVh\nZ2VyUmVzdWx0TGlzdChyb3ApOw0KICAgICAgICBjaGVjayhybCwgYnJva2Vy\nKTsNCiAgICAgICAgcmwuY2xvc2UoKTsNCiAgICAgICAgYnJva2VyLmNsb3Nl\nKCk7DQogICAgfQ0KDQogICAgDQogICAgDQogICAgcHJpdmF0ZSB2b2lkIGNo\nZWNrKFJlc3VsdExpc3QgcmwsIEJyb2tlciBicm9rZXIpIHsNCiAgICAgICAg\nUmF3U1FMIHJhdzsNCiAgICAgICAgaW50IGkgPSAwOw0KICAgICAgICBmb3Ig\nKEl0ZXJhdG9yIGl0ciA9IHJsLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7\nIGkrKykgew0KICAgICAgICAgICAgcmF3ID0gKFJhd1NRTCkgaXRyLm5leHQo\nKTsNCiAgICAgICAgICAgIGFzc2VydFRydWUoYnJva2VyLmdldFN0YXRlTWFu\nYWdlcihyYXcpLmdldExvYWRlZCgpLmdldCgwKSk7DQogICAgICAgICAgICBh\nc3NlcnRUcnVlKGJyb2tlci5nZXRTdGF0ZU1hbmFnZXIocmF3KS5nZXRMb2Fk\nZWQoKS5nZXQoMSkpOw0KICAgICAgICAgICAgaWYgKGkgPCBfb2lkcy5sZW5n\ndGgpIHsNCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoX3N0cmluZ3Nb\naV0sIHJhdy5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoX2ludHNbaV0sIHJhdy5nZXRJbnRGaWVsZCgpKTsNCiAg\nICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBhc3NlcnRFcXVhbHMo\nX29pZHMubGVuZ3RoLCBpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKF9vaWRz\nLmxlbmd0aCwgcmwuc2l6ZSgpKTsNCiAgICB9DQogICAgDQogICAgDQp9DQo=\n","encoding":"base64"}

