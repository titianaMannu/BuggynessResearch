{"sha":"a49f8064378e3a6211b98ce057936425fac2cdf3","node_id":"MDQ6QmxvYjIwNjM2NDphNDlmODA2NDM3OGUzYTYyMTFiOThjZTA1NzkzNjQyNWZhYzJjZGYz","size":5038,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a49f8064378e3a6211b98ce057936425fac2cdf3","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuamRiYy5rZXJuZWw7DQoNCmltcG9ydCBqYXZhLnV0aWwu\nKjsNCg0KDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC4qOw0K\nDQoNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuamRiYy4qOw0K\nDQovKioNCiAqIFRlc3QgY2FzZSB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byBh\nbGwgdGhlIFNRTCB0aGF0IGlzIGV4ZWN1dGVkLg0KICoNCiAqLw0KcHVibGlj\nIGFic3RyYWN0IGNsYXNzIFRlc3RTUUxMaXN0ZW5lclRlc3RDYXNlDQogICAg\nZXh0ZW5kcyBCYXNlSkRCQ1Rlc3Qgew0KDQogICAgcHJvdGVjdGVkIHN0YXRp\nYyBmaW5hbCBDb2xsZWN0aW9uIGJyb2tlcnMgPSBuZXcgSGFzaFNldCgpOw0K\nICAgIHB1YmxpYyBzdGF0aWMgTGlzdCBzcWwgPSBuZXcgQXJyYXlMaXN0KCk7\nDQoNCiAgICBwdWJsaWMgVGVzdFNRTExpc3RlbmVyVGVzdENhc2UoKSB7DQog\nICAgfQ0KDQogICAgcHVibGljIFRlc3RTUUxMaXN0ZW5lclRlc3RDYXNlKFN0\ncmluZyBuYW1lKSB7DQogICAgICAgIHN1cGVyKG5hbWUpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyB2b2lkIHNldFVwKCkNCiAgICAgICAgdGhyb3dzIEV4Y2Vw\ndGlvbiB7DQogICAgICAgIHN1cGVyLnNldFVwKCk7DQogICAgICAgIHNldFVw\nVGVzdENhc2UoKTsNCiAgICAgICAgc3FsLmNsZWFyKCk7DQogICAgfQ0KDQog\nICAgLyoqDQogICAgICogT3ZlcnJpZGUgZm9yIHNldFVwKCkgYmVoYXZpb3Iu\nDQogICAgICovDQogICAgcHVibGljIHZvaWQgc2V0VXBUZXN0Q2FzZSgpIHsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgZmluYWwgdm9pZCB0ZWFyRG93bigpDQog\nICAgICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBzdXBlci50ZWFy\nRG93bigpOw0KICAgICAgICB0ZWFyRG93blRlc3RDYXNlKCk7DQogICAgICAg\nIHNxbC5jbGVhcigpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIE92ZXJy\naWRlIGZvciB0ZWFyRG93bigpIGJlaGF2aW9yLg0KICAgICAqLw0KICAgIHB1\nYmxpYyB2b2lkIHRlYXJEb3duVGVzdENhc2UoKSB7DQogICAgfQ0KDQogICAg\nLyoqDQogICAgICogQ29uZmlybSB0aGF0IHRoZSBzcGVjaWZpZWQgU1FMIGhh\ncyBiZWVuIGV4ZWN1dGVkLg0KICAgICAqDQogICAgICogQHBhcmFtIHNxbEV4\ncCB0aGUgU1FMIGV4cHJlc3Npb24uIEUuZy4sICJTRUxFQ1QgRk9PIC4qIg0K\nICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIGFzc2VydFNRTChTdHJpbmcgc3Fs\nRXhwKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgZm9y\nIChJdGVyYXRvciBpID0gc3FsLml0ZXJhdG9yKCk7IGkuaGFzTmV4dCgpOykg\new0KICAgICAgICAgICAgU3RyaW5nIHN0YXRlbWVudCA9IChTdHJpbmcpIGku\nbmV4dCgpOw0KICAgICAgICAgICAgaWYgKG1hdGNoZXMoc3FsRXhwLCBzdGF0\nZW1lbnQpKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0K\nDQogICAgICAgIGZhaWwoIkV4cGVjdGVkIHJlZ3VsYXIgZXhwcmVzc2lvbiA8\nIiArIHNxbEV4cCArICI+IHRvIGhhdmUiDQogICAgICAgICAgICArICIgZXhp\nc3RlZCBpbiBTUUwgc3RhdGVtZW50czogIiArIHNxbCk7DQogICAgfQ0KDQog\nICAgLyoqDQogICAgICogQ29uZmlybSB0aGF0IHRoZSBzcGVjaWZpZWQgU1FM\nIGhhcyBub3QgYmVlbiBleGVjdXRlZC4NCiAgICAgKg0KICAgICAqIEBwYXJh\nbSBzcWxFeHAgdGhlIFNRTCBleHByZXNzaW9uLiBFLmcuLCAiU0VMRUNUIEJB\nRENPTFVNTiAuKiINCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRO\nb3RTUUwoU3RyaW5nIHNxbEV4cCkNCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlv\nbiB7DQogICAgICAgIGJvb2xlYW4gZmFpbGVkID0gZmFsc2U7DQoNCiAgICAg\nICAgZm9yIChJdGVyYXRvciBpID0gc3FsLml0ZXJhdG9yKCk7IGkuaGFzTmV4\ndCgpOykgew0KICAgICAgICAgICAgU3RyaW5nIHN0YXRlbWVudCA9IChTdHJp\nbmcpIGkubmV4dCgpOw0KICAgICAgICAgICAgaWYgKG1hdGNoZXMoc3FsRXhw\nLCBzdGF0ZW1lbnQpKQ0KICAgICAgICAgICAgICAgIGZhaWxlZCA9IHRydWU7\nDQogICAgICAgIH0NCg0KICAgICAgICBpZiAoZmFpbGVkKQ0KICAgICAgICAg\nICAgZmFpbCgiUmVndWxhciBleHByZXNzaW9uIDwiICsgc3FsRXhwICsgIj4i\nDQogICAgICAgICAgICAgICAgKyAiIHNob3VsZCBub3QgaGF2ZSBiZWVuIGV4\nZWN1dGVkIGluIFNRTCBzdGF0ZW1lbnRzOiAiICsgc3FsKTsNCiAgICB9DQov\nKg0KDQogICAgcHVibGljIEtvZG9QZXJzaXN0ZW5jZU1hbmFnZXIgZ2V0UE0o\nKSB7DQogICAgICAgIEtvZG9QZXJzaXN0ZW5jZU1hbmFnZXIgcG0gPSAoS29k\nb1BlcnNpc3RlbmNlTWFuYWdlcikgZ2V0UE1GYWN0b3J5KCkuDQogICAgICAg\nICAgICBnZXRQZXJzaXN0ZW5jZU1hbmFnZXIoKTsNCiAgICAgICAgYnJva2Vy\ncy5hZGQoS29kb0pET0hlbHBlci50b0Jyb2tlcihwbSkpOw0KICAgICAgICBy\nZXR1cm4gcG07DQogICAgfQ0KDQogICAgcHVibGljIEtvZG9QZXJzaXN0ZW5j\nZU1hbmFnZXJGYWN0b3J5IGdldFBNRmFjdG9yeSgpIHsNCiAgICAgICAgcmV0\ndXJuIGdldFBNRmFjdG9yeShudWxsKTsNCiAgICB9DQogICAgcHVibGljIEJy\nb2tlckZhY3RvcnkgZ2V0QnJva2VyRmFjdG9yeShTdHJpbmdbXSBwcm9wcykg\new0KICAgICAgICBTdHJpbmdbXSBidWlsdGluID0gbmV3IFN0cmluZ1tdew0K\nICAgICAgICAgICAgIm9wZW5qcGEuamRiYy5KREJDTGlzdGVuZXJzIiwgTGlz\ndGVuZXIuY2xhc3MuZ2V0TmFtZSgpDQogICAgICAgIH07DQoNCiAgICAgICAg\naWYgKHByb3BzID09IG51bGwpDQogICAgICAgICAgICBwcm9wcyA9IGJ1aWx0\naW47DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgU3RyaW5nW10gdG1w\nID0gbmV3IFN0cmluZ1twcm9wcy5sZW5ndGggKyBidWlsdGluLmxlbmd0aF07\nDQogICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KHByb3BzLCAwLCB0bXAs\nIDAsIHByb3BzLmxlbmd0aCk7DQogICAgICAgICAgICBTeXN0ZW0uYXJyYXlj\nb3B5KGJ1aWx0aW4sIDAsIHRtcCwgcHJvcHMubGVuZ3RoLCBidWlsdGluLmxl\nbmd0aCk7DQogICAgICAgICAgICBwcm9wcyA9IHRtcDsNCiAgICAgICAgfQ0K\nDQogICAgICAgIHJldHVybiBzdXBlci5nZXRCcm9rZXJGYWN0b3J5KHByb3Bz\nKTsNCiAgICB9DQogICAgcHVibGljIEtvZG9QZXJzaXN0ZW5jZU1hbmFnZXJG\nYWN0b3J5IGdldFBNRmFjdG9yeShTdHJpbmdbXSBwcm9wcykgew0KICAgICAg\nICBTdHJpbmdbXSBidWlsdGluID0gbmV3IFN0cmluZ1tdew0KICAgICAgICAg\nICAgIm9wZW5qcGEuamRiYy5KREJDTGlzdGVuZXJzIiwgTGlzdGVuZXIuY2xh\nc3MuZ2V0TmFtZSgpDQogICAgICAgIH07DQoNCiAgICAgICAgaWYgKHByb3Bz\nID09IG51bGwpDQogICAgICAgICAgICBwcm9wcyA9IGJ1aWx0aW47DQogICAg\nICAgIGVsc2Ugew0KICAgICAgICAgICAgU3RyaW5nW10gdG1wID0gbmV3IFN0\ncmluZ1twcm9wcy5sZW5ndGggKyBidWlsdGluLmxlbmd0aF07DQogICAgICAg\nICAgICBTeXN0ZW0uYXJyYXljb3B5KHByb3BzLCAwLCB0bXAsIDAsIHByb3Bz\nLmxlbmd0aCk7DQogICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KGJ1aWx0\naW4sIDAsIHRtcCwgcHJvcHMubGVuZ3RoLCBidWlsdGluLmxlbmd0aCk7DQog\nICAgICAgICAgICBwcm9wcyA9IHRtcDsNCiAgICAgICAgfQ0KDQogICAgICAg\nIHJldHVybiBzdXBlci5nZXRQTUZhY3RvcnkocHJvcHMpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyBCcm9rZXIgZ2V0QnJva2VyKCkgew0KICAgICAgICBCcm9r\nZXIgYnJva2VyID0gZ2V0QnJva2VyRmFjdG9yeSgpLm5ld0Jyb2tlcigpOw0K\nICAgICAgICBicm9rZXJzLmFkZChicm9rZXIpOw0KICAgICAgICByZXR1cm4g\nYnJva2VyOw0KICAgIH0NCg0KICAgIHB1YmxpYyBCcm9rZXJGYWN0b3J5IGdl\ndEJyb2tlckZhY3RvcnkoKSB7DQogICAgICAgIHJldHVybiBnZXRCcm9rZXJG\nYWN0b3J5KG51bGwpOw0KICAgIH0NCg0KKi8NCg0KDQoNCiAgICBwdWJsaWMg\nc3RhdGljIGNsYXNzIExpc3RlbmVyDQogICAgICAgIGV4dGVuZHMgQWJzdHJh\nY3RKREJDTGlzdGVuZXIgew0KDQogICAgICAgIHB1YmxpYyB2b2lkIGJlZm9y\nZUV4ZWN1dGVTdGF0ZW1lbnQoSkRCQ0V2ZW50IGV2ZW50KSB7DQogICAgICAg\nICAgICBpZiAoZXZlbnQuZ2V0U1FMKCkgIT0gbnVsbCkNCiAgICAgICAgICAg\nICAgICBzcWwuYWRkKGV2ZW50LmdldFNRTCgpKTsNCgkJfQ0KCX0NCn0NCg==\n","encoding":"base64"}

