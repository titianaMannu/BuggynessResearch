{"sha":"b94ad7e9124cc64ee5864219dfff0d0c28807eab","node_id":"MDQ6QmxvYjIwNjM2NDpiOTRhZDdlOTEyNGNjNjRlZTU4NjQyMTlkZmZmMGQwYzI4ODA3ZWFi","size":33667,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b94ad7e9124cc64ee5864219dfff0d0c28807eab","content":"LyoNCiAqIFRlc3RFYWdlck91dGVyVG9NYW55Sm9pbnMuamF2YQ0KICoNCiAq\nIENyZWF0ZWQgb24gT2N0b2JlciAzLCAyMDA2LCAxMDo1MyBBTQ0KICoNCiAq\nIFRvIGNoYW5nZSB0aGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1w\nbGF0ZSBNYW5hZ2VyDQogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhl\nIGVkaXRvci4NCiAqLw0KDQoNCi8qDQogKiBMaWNlbnNlZCB0byB0aGUgQXBh\nY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lDQogKiBv\nciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0\naGUgTk9USUNFIGZpbGUNCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3Jr\nIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uDQogKiByZWdhcmRpbmcgY29w\neXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxl\nDQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9u\nIDIuMCAodGhlDQogKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhp\ncyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlDQogKiB3aXRoIHRoZSBMaWNl\nbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0\nDQogKg0KICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VO\nU0UtMi4wDQogKg0KICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUg\nbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLA0KICogc29mdHdhcmUgZGlz\ndHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24g\nYW4NCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBD\nT05ESVRJT05TIE9GIEFOWQ0KICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3Ig\naW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlDQogKiBzcGVjaWZp\nYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRp\nb25zDQogKiB1bmRlciB0aGUgTGljZW5zZS4gICAgDQogKi8NCnBhY2thZ2Ug\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMubWV0YTsNCg0K\naW1wb3J0IGphdmEudXRpbC4qOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsNCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5Ow0KaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5GZXRjaFBsYW47DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFRdWVyeTsN\nCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJj\nLmNvbW1vbi5hcHBzLio7DQoNCg0KaW1wb3J0IGphdmEubGFuZy5hbm5vdGF0\naW9uLkFubm90YXRpb247DQppbXBvcnQganVuaXQuZnJhbWV3b3JrLio7DQpp\nbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsNCmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFjdG9yeTsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsNCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5jb21tb24uYXBw\ncy5FYWdlck91dGVySm9pblBDOw0KDQoNCnB1YmxpYyBjbGFzcyBUZXN0RWFn\nZXJPdXRlclRvTWFueUpvaW5zIGV4dGVuZHMgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLmpkYmMua2VybmVsLkJhc2VKREJDVGVzdHsNCiAgICAN\nCiAgICAvKiogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBUZXN0RWFnZXJP\ndXRlclRvTWFueUpvaW5zICovDQogICAgcHVibGljIFRlc3RFYWdlck91dGVy\nVG9NYW55Sm9pbnMoU3RyaW5nIG5hbWUpIHsNCiAgICAJc3VwZXIobmFtZSk7\nDQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyBib29sZWFuIHNraXBUZXN0KCkg\new0KICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9ICgoSkRCQ0NvbmZpZ3Vy\nYXRpb24pIGdldENvbmZpZ3VyYXRpb24oKSkuDQogICAgICAgICAgICAgICAg\nZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsNCiAgICAgICAgcmV0dXJuICFk\naWN0LnN1cHBvcnRzU3Vic2VsZWN0Ow0KICAgIH0NCiAgICANCiAgICBwdWJs\naWMgdm9pZCBzZXRVcCgpIHsNCiAgICAgICAgDQogICAgICAgZGVsZXRlQWxs\nKEhlbHBlclBDLmNsYXNzKTsNCiAgICAgICBkZWxldGVBbGwoRWFnZXJPdXRl\nckpvaW5QQzIuY2xhc3MpOw0KICAgICAgIGRlbGV0ZUFsbChFYWdlck91dGVy\nSm9pblBDLmNsYXNzKTsNCiAgICB9DQogICAgDQogICAgDQogICAgcHVibGlj\nIHZvaWQgdGVzdFN0cmluZ0NvbGxlY3Rpb25CeUlkKCkgew0KICAgICAgICBz\ndHJpbmdDb2xsZWN0aW9uQnlJZFRlc3QoZmFsc2UpOw0KICAgIH0NCiAgICAN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlTdHJpbmdDb2xsZWN0aW9uQnlJ\nZCgpIHsNCiAgICAgICAgc3RyaW5nQ29sbGVjdGlvbkJ5SWRUZXN0KHRydWUp\nOw0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZvaWQgc3RyaW5nQ29sbGVj\ndGlvbkJ5SWRUZXN0KGJvb2xlYW4gZW1wdHkpIHsNCiAgICAgICAgT2JqZWN0\nIG9pZCA9IGluc2VydFN0cmluZ0NvbGxlY3Rpb24oKGVtcHR5KSA/IDEgOiAw\nKTsNCiAgICAgICAgDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIo\nKTsNCiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNoUGxhbikgcG0u\nZ2V0RmV0Y2hQbGFuKCk7DQogICAgICAgIGZldGNoLmFkZEZpZWxkKEVhZ2Vy\nT3V0ZXJKb2luUEMuY2xhc3MsICJzdHJpbmdDb2xsZWN0aW9uIik7DQogICAg\nICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykg\ncG0uZ2V0T2JqZWN0SWQob2lkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIx\nIiwgcGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgaWYgKGVtcHR5KQ0KICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS50\nb1N0cmluZygpLA0KICAgICAgICAgICAgICAgICAgICAwLCBwYy5nZXRTdHJp\nbmdDb2xsZWN0aW9uKCkuc2l6ZSgpKTsNCiAgICAgICAgZWxzZSB7DQogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMocGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigp\nLnRvU3RyaW5nKCksDQogICAgICAgICAgICAgICAgICAgIDIsIHBjLmdldFN0\ncmluZ0NvbGxlY3Rpb24oKS5zaXplKCkpOw0KICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZShwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuY29udGFpbnMoIjEuMSIp\nKTsNCiAgICAgICAgICAgIGFzc2VydFRydWUocGMuZ2V0U3RyaW5nQ29sbGVj\ndGlvbigpLmNvbnRhaW5zKCIxLjIiKSk7DQogICAgICAgIH0NCiAgICAgICAg\ncG0uY2xvc2UoKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVz\ndFN0cmluZ0NvbGxlY3Rpb25CeVF1ZXJ5KCkgew0KICAgICAgICBzdHJpbmdD\nb2xsZWN0aW9uQnlRdWVyeVRlc3QoMCk7DQogICAgfQ0KICAgIA0KICAgIHB1\nYmxpYyB2b2lkIHRlc3RFbXB0eVN0cmluZ0NvbGxlY3Rpb25CeVF1ZXJ5MSgp\nIHsNCiAgICAgICAgc3RyaW5nQ29sbGVjdGlvbkJ5UXVlcnlUZXN0KDEpOw0K\nICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlTdHJpbmdD\nb2xsZWN0aW9uQnlRdWVyeTIoKSB7DQogICAgICAgIHN0cmluZ0NvbGxlY3Rp\nb25CeVF1ZXJ5VGVzdCgyKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHZv\naWQgdGVzdEVtcHR5U3RyaW5nQ29sbGVjdGlvbkJ5UXVlcnkzKCkgew0KICAg\nICAgICBzdHJpbmdDb2xsZWN0aW9uQnlRdWVyeVRlc3QoMyk7DQogICAgfQ0K\nICAgIA0KICAgIHByaXZhdGUgdm9pZCBzdHJpbmdDb2xsZWN0aW9uQnlRdWVy\neVRlc3QoaW50IGVtcHR5KSB7DQogICAgICAgIGluc2VydFN0cmluZ0NvbGxl\nY3Rpb24oZW1wdHkpOw0KICAgICAgICANCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50\naXR5TWFuYWdlcigpOw0KICAgICAgICBGZXRjaFBsYW4gZmV0Y2ggPSAoRmV0\nY2hQbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsNCiAgICAgICAgZmV0Y2guYWRk\nRmllbGQoRWFnZXJPdXRlckpvaW5QQy5jbGFzcywgInN0cmluZ0NvbGxlY3Rp\nb24iKTsNCiAgICAgICAgZmV0Y2guc2V0RmV0Y2hCYXRjaFNpemUoLTEpOw0K\nICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZU5hdGl2ZVF1ZXJ5\nKCIiLEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MpOw0KICAgICAgICANCiAgICAg\nICAgLy9GSVhNRSBqdGhvbWFzDQogICAgICAgIC8vcS5zZXRPcmRlcmluZygi\nbmFtZSBhc2NlbmRpbmciKTsNCiAgICAgICAgQ29sbGVjdGlvbiByZXN1bHRz\nID0gKENvbGxlY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpOw0KICAgICAgICAN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHJlc3VsdHMuc2l6ZSgpKTsNCiAg\nICAgICAgSXRlcmF0b3IgaXRyID0gcmVzdWx0cy5pdGVyYXRvcigpOw0KICAg\nICAgICBFYWdlck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMp\nIGl0ci5uZXh0KCk7DQogICAgICAgIGFzc2VydEVxdWFscygiMSIsIHBjLmdl\ndE5hbWUoKSk7DQogICAgICAgIGlmICgoZW1wdHkgJiAxKSA+IDApDQogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMocGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigp\nLnRvU3RyaW5nKCksDQogICAgICAgICAgICAgICAgICAgIDAsIHBjLmdldFN0\ncmluZ0NvbGxlY3Rpb24oKS5zaXplKCkpOw0KICAgICAgICBlbHNlIHsNCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscyhwYy5nZXRTdHJpbmdDb2xsZWN0aW9u\nKCkudG9TdHJpbmcoKSwNCiAgICAgICAgICAgICAgICAgICAgMiwgcGMuZ2V0\nU3RyaW5nQ29sbGVjdGlvbigpLnNpemUoKSk7DQogICAgICAgICAgICBhc3Nl\ncnRUcnVlKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5jb250YWlucygiMS4x\nIikpOw0KICAgICAgICAgICAgYXNzZXJ0VHJ1ZShwYy5nZXRTdHJpbmdDb2xs\nZWN0aW9uKCkuY29udGFpbnMoIjEuMiIpKTsNCiAgICAgICAgfQ0KICAgICAg\nICANCiAgICAgICAgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykgaXRyLm5leHQo\nKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIyIiwgcGMuZ2V0TmFtZSgpKTsN\nCiAgICAgICAgaWYgKChlbXB0eSAmIDIpID4gMCkNCiAgICAgICAgICAgIGFz\nc2VydEVxdWFscyhwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkudG9TdHJpbmco\nKSwNCiAgICAgICAgICAgICAgICAgICAgMCwgcGMuZ2V0U3RyaW5nQ29sbGVj\ndGlvbigpLnNpemUoKSk7DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS50b1N0cmlu\nZygpLA0KICAgICAgICAgICAgICAgICAgICAyLCBwYy5nZXRTdHJpbmdDb2xs\nZWN0aW9uKCkuc2l6ZSgpKTsNCiAgICAgICAgICAgIGFzc2VydFRydWUocGMu\nZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmNvbnRhaW5zKCIyLjEiKSk7DQogICAg\nICAgICAgICBhc3NlcnRUcnVlKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5j\nb250YWlucygiMi4yIikpOw0KICAgICAgICB9DQogICAgICAgIGFzc2VydFRy\ndWUoIWl0ci5oYXNOZXh0KCkpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAg\nIH0NCiAgICANCiAgICBwcml2YXRlIE9iamVjdCBpbnNlcnRTdHJpbmdDb2xs\nZWN0aW9uKGludCBlbXB0eSkgew0KICAgICAgICBFYWdlck91dGVySm9pblBD\nIHBjMSA9IG5ldyBFYWdlck91dGVySm9pblBDKCk7DQogICAgICAgIHBjMS5z\nZXROYW1lKCIxIik7DQogICAgICAgIGlmICgoZW1wdHkgJiAxKSA9PSAwKSB7\nDQogICAgICAgICAgICBwYzEuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmFkZCgi\nMS4xIik7DQogICAgICAgICAgICBwYzEuZ2V0U3RyaW5nQ29sbGVjdGlvbigp\nLmFkZCgiMS4yIik7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIEVh\nZ2VyT3V0ZXJKb2luUEMgcGMyID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMoKTsN\nCiAgICAgICAgcGMyLnNldE5hbWUoIjIiKTsNCiAgICAgICAgaWYgKChlbXB0\neSAmIDIpID09IDApIHsNCiAgICAgICAgICAgIHBjMi5nZXRTdHJpbmdDb2xs\nZWN0aW9uKCkuYWRkKCIyLjEiKTsNCiAgICAgICAgICAgIHBjMi5nZXRTdHJp\nbmdDb2xsZWN0aW9uKCkuYWRkKCIyLjIiKTsNCiAgICAgICAgfQ0KICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIA0KICAgICAg\nICBzdGFydFR4KHBtKTs7DQogICAgICAgIHBtLnBlcnNpc3QocGMxKTsNCiAg\nICAgICAgcG0ucGVyc2lzdChwYzIpOw0KICAgICAgICBlbmRUeChwbSk7Ow0K\nICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMxKTsNCiAg\nICAgICAgcG0uY2xvc2UoKTsNCiAgICAgICAgcmV0dXJuIG9pZDsNCiAgICB9\nDQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdFN0cmluZ0xpc3RCeUlkKCkg\new0KICAgICAgICBPYmplY3Qgb2lkID0gaW5zZXJ0U3RyaW5nTGlzdCgpOw0K\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIA0K\nICAgICAgICANCiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNoUGxh\nbikgcG0uZ2V0RmV0Y2hQbGFuKCk7DQogICAgICAgIGZldGNoLmFkZEZpZWxk\nKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJzdHJpbmdMaXN0Iik7DQogICAg\nICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykg\ncG0uZ2V0T2JqZWN0SWQob2lkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIx\nIiwgcGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBj\nLmdldFN0cmluZ0xpc3QoKS5zaXplKCkpOw0KICAgICAgICBhc3NlcnRFcXVh\nbHMoIjEuMSIsIHBjLmdldFN0cmluZ0xpc3QoKS5nZXQoMCkpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoIjEuMiIsIHBjLmdldFN0cmluZ0xpc3QoKS5nZXQo\nMSkpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0NCiAgICANCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0U3RyaW5nTGlzdEJ5UXVlcnkoKSB7DQogICAgICAg\nIGluc2VydFN0cmluZ0xpc3QoKTsNCiAgICAgICAgDQogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3Vy\ncmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgRmV0Y2hQbGFuIGZldGNo\nID0gKEZldGNoUGxhbikgcG0uZ2V0RmV0Y2hQbGFuKCk7DQogICAgICAgIGZl\ndGNoLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJzdHJpbmdM\naXN0Iik7DQogICAgICAgIGZldGNoLnNldEZldGNoQmF0Y2hTaXplKC0xKTsN\nCiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5jcmVhdGVOYXRpdmVRdWVy\neSgiIixFYWdlck91dGVySm9pblBDLmNsYXNzKTsNCiAgICAgICAgLy9GSVhN\nRSBqdGhvbWFzDQogICAgICAgIC8vcS5zZXRPcmRlcmluZygibmFtZSBhc2Nl\nbmRpbmciKTsNCiAgICAgICAgQ29sbGVjdGlvbiByZXN1bHRzID0gKENvbGxl\nY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpOw0KICAgICAgICANCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIHJlc3VsdHMuc2l6ZSgpKTsNCiAgICAgICAgSXRl\ncmF0b3IgaXRyID0gcmVzdWx0cy5pdGVyYXRvcigpOw0KICAgICAgICBFYWdl\nck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIGl0ci5uZXh0\nKCk7DQogICAgICAgIGFzc2VydEVxdWFscygiMSIsIHBjLmdldE5hbWUoKSk7\nDQogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRTdHJpbmdMaXN0KCku\nc2l6ZSgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxLjEiLCBwYy5nZXRT\ndHJpbmdMaXN0KCkuZ2V0KDApKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIx\nLjIiLCBwYy5nZXRTdHJpbmdMaXN0KCkuZ2V0KDEpKTsNCiAgICAgICAgcGMg\nPSAoRWFnZXJPdXRlckpvaW5QQykgaXRyLm5leHQoKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCIyIiwgcGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDIsIHBjLmdldFN0cmluZ0xpc3QoKS5zaXplKCkpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoIjIuMSIsIHBjLmdldFN0cmluZ0xpc3QoKS5nZXQo\nMCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoIjIuMiIsIHBjLmdldFN0cmlu\nZ0xpc3QoKS5nZXQoMSkpOw0KICAgICAgICBhc3NlcnRUcnVlKCFpdHIuaGFz\nTmV4dCgpKTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCiAgICB9DQogICAgDQog\nICAgcHJpdmF0ZSBPYmplY3QgaW5zZXJ0U3RyaW5nTGlzdCgpIHsNCiAgICAg\nICAgRWFnZXJPdXRlckpvaW5QQyBwYzEgPSBuZXcgRWFnZXJPdXRlckpvaW5Q\nQygpOw0KICAgICAgICBwYzEuc2V0TmFtZSgiMSIpOw0KICAgICAgICBwYzEu\nZ2V0U3RyaW5nTGlzdCgpLmFkZCgiMS4xIik7DQogICAgICAgIHBjMS5nZXRT\ndHJpbmdMaXN0KCkuYWRkKCIxLjIiKTsNCiAgICAgICAgDQogICAgICAgIEVh\nZ2VyT3V0ZXJKb2luUEMgcGMyID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMoKTsN\nCiAgICAgICAgcGMyLnNldE5hbWUoIjIiKTsNCiAgICAgICAgcGMyLmdldFN0\ncmluZ0xpc3QoKS5hZGQoIjIuMSIpOw0KICAgICAgICBwYzIuZ2V0U3RyaW5n\nTGlzdCgpLmFkZCgiMi4yIik7DQogICAgICAgIA0KICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJl\nbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAg\nICAgICBwbS5wZXJzaXN0KHBjMSk7DQogICAgICAgIHBtLnBlcnNpc3QocGMy\nKTsNCiAgICAgICAgZW5kVHgocG0pOzsNCiAgICAgICAgT2JqZWN0IG9pZCA9\nIHBtLmdldE9iamVjdElkKHBjMSk7DQogICAgICAgIHBtLmNsb3NlKCk7DQog\nICAgICAgIHJldHVybiBvaWQ7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2\nb2lkIHRlc3RPbmVNYW55Q29sbGVjdGlvbkJ5SWQoKSB7DQogICAgICAgIG9u\nZU1hbnlDb2xsZWN0aW9uQnlJZFRlc3QoZmFsc2UpOw0KICAgIH0NCiAgICAN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlPbmVNYW55Q29sbGVjdGlvbkJ5\nSWQoKSB7DQogICAgICAgIG9uZU1hbnlDb2xsZWN0aW9uQnlJZFRlc3QodHJ1\nZSk7DQogICAgfQ0KICAgIA0KICAgIHByaXZhdGUgdm9pZCBvbmVNYW55Q29s\nbGVjdGlvbkJ5SWRUZXN0KGJvb2xlYW4gZW1wdHkpIHsNCiAgICAgICAgT2Jq\nZWN0IG9pZCA9IGluc2VydE9uZU1hbnlDb2xsZWN0aW9uKChlbXB0eSkgPyAx\nIDogMCk7DQogICAgICAgIA0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5h\nZ2VyKCk7DQogICAgICAgIEZldGNoUGxhbiBmZXRjaCA9IChGZXRjaFBsYW4p\nIHBtLmdldEZldGNoUGxhbigpOw0KICAgICAgICBmZXRjaC5hZGRGaWVsZChF\nYWdlck91dGVySm9pblBDLmNsYXNzLCAib25lTWFueUNvbGxlY3Rpb24iKTsN\nCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYyA9IChFYWdlck91dGVySm9p\nblBDKSBwbS5nZXRPYmplY3RJZChvaWQpOw0KICAgICAgICBhc3NlcnRFcXVh\nbHMoIjEiLCBwYy5nZXROYW1lKCkpOw0KICAgICAgICBpZiAoZW1wdHkpDQog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoMCwgcGMuZ2V0T25lTWFueUNvbGxl\nY3Rpb24oKS5zaXplKCkpOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgcGMuZ2V0T25lTWFueUNvbGxlY3Rpb24oKS5zaXpl\nKCkpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0NCiAgICANCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0T25lTWFueUNvbGxlY3Rpb25CeVF1ZXJ5KCkgew0K\nICAgICAgICBvbmVNYW55Q29sbGVjdGlvbkJ5UXVlcnlUZXN0KDApOw0KICAg\nIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlPbmVNYW55Q29s\nbGVjdGlvbkJ5UXVlcnkxKCkgew0KICAgICAgICBvbmVNYW55Q29sbGVjdGlv\nbkJ5UXVlcnlUZXN0KDEpOw0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RW1wdHlPbmVNYW55Q29sbGVjdGlvbkJ5UXVlcnkyKCkgew0KICAg\nICAgICBvbmVNYW55Q29sbGVjdGlvbkJ5UXVlcnlUZXN0KDIpOw0KICAgIH0N\nCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlPbmVNYW55Q29sbGVj\ndGlvbkJ5UXVlcnkzKCkgew0KICAgICAgICBvbmVNYW55Q29sbGVjdGlvbkJ5\nUXVlcnlUZXN0KDMpOw0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZvaWQg\nb25lTWFueUNvbGxlY3Rpb25CeVF1ZXJ5VGVzdChpbnQgZW1wdHkpIHsNCiAg\nICAgICAgaW5zZXJ0T25lTWFueUNvbGxlY3Rpb24oZW1wdHkpOw0KICAgICAg\nICANCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBB\nRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAg\nICBGZXRjaFBsYW4gZmV0Y2ggPSAoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBs\nYW4oKTsNCiAgICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpvaW5Q\nQy5jbGFzcywgIm9uZU1hbnlDb2xsZWN0aW9uIik7DQogICAgICAgIGZldGNo\nLnNldEZldGNoQmF0Y2hTaXplKC0xKTsNCiAgICAgICAgT3BlbkpQQVF1ZXJ5\nIHEgPSBwbS5jcmVhdGVOYXRpdmVRdWVyeSgiIixFYWdlck91dGVySm9pblBD\nLmNsYXNzKTsNCiAgICAgICAgLy9GSVhNRSBqdGhvbWFzDQogICAgICAgIC8v\ncS5zZXRPcmRlcmluZygibmFtZSBhc2NlbmRpbmciKTsNCiAgICAgICAgQ29s\nbGVjdGlvbiByZXN1bHRzID0gKENvbGxlY3Rpb24pIHEuZ2V0UmVzdWx0TGlz\ndCgpOw0KICAgICAgICANCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHJlc3Vs\ndHMuc2l6ZSgpKTsNCiAgICAgICAgSXRlcmF0b3IgaXRyID0gcmVzdWx0cy5p\ndGVyYXRvcigpOw0KICAgICAgICBFYWdlck91dGVySm9pblBDIHBjID0gKEVh\nZ2VyT3V0ZXJKb2luUEMpIGl0ci5uZXh0KCk7DQogICAgICAgIGFzc2VydEVx\ndWFscygiMSIsIHBjLmdldE5hbWUoKSk7DQogICAgICAgIGlmICgoZW1wdHkg\nJiAxKSA+IDApDQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMCwgcGMuZ2V0\nT25lTWFueUNvbGxlY3Rpb24oKS5zaXplKCkpOw0KICAgICAgICBlbHNlDQog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0T25lTWFueUNvbGxl\nY3Rpb24oKS5zaXplKCkpOw0KICAgICAgICANCiAgICAgICAgcGMgPSAoRWFn\nZXJPdXRlckpvaW5QQykgaXRyLm5leHQoKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCIyIiwgcGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgaWYgKChlbXB0eSAm\nIDIpID4gMCkNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBwYy5nZXRP\nbmVNYW55Q29sbGVjdGlvbigpLnNpemUoKSk7DQogICAgICAgIGVsc2UNCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRPbmVNYW55Q29sbGVj\ndGlvbigpLnNpemUoKSk7DQogICAgICAgIA0KICAgICAgICBhc3NlcnRUcnVl\nKCFpdHIuaGFzTmV4dCgpKTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCiAgICB9\nDQogICAgDQogICAgcHJpdmF0ZSBPYmplY3QgaW5zZXJ0T25lTWFueUNvbGxl\nY3Rpb24oaW50IGVtcHR5KSB7DQogICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMg\ncGMxID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMoKTsNCiAgICAgICAgcGMxLnNl\ndE5hbWUoIjEiKTsNCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQzIgaHBjOw0K\nICAgICAgICBpZiAoKGVtcHR5ICYgMSkgPT0gMCkgew0KICAgICAgICAgICAg\naHBjID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMyKCk7DQogICAgICAgICAgICBo\ncGMuc2V0TmFtZSgiMS4xIik7DQogICAgICAgICAgICBocGMuc2V0UmVmKHBj\nMSk7DQogICAgICAgICAgICBwYzEuZ2V0T25lTWFueUNvbGxlY3Rpb24oKS5h\nZGQoaHBjKTsNCiAgICAgICAgICAgIGhwYyA9IG5ldyBFYWdlck91dGVySm9p\nblBDMigpOw0KICAgICAgICAgICAgaHBjLnNldE5hbWUoIjEuMiIpOw0KICAg\nICAgICAgICAgaHBjLnNldFJlZihwYzEpOw0KICAgICAgICAgICAgcGMxLmdl\ndE9uZU1hbnlDb2xsZWN0aW9uKCkuYWRkKGhwYyk7DQogICAgICAgIH0NCiAg\nICAgICAgDQogICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMyID0gbmV3IEVh\nZ2VyT3V0ZXJKb2luUEMoKTsNCiAgICAgICAgcGMyLnNldE5hbWUoIjIiKTsN\nCiAgICAgICAgaWYgKChlbXB0eSAmIDIpID09IDApIHsNCiAgICAgICAgICAg\nIGhwYyA9IG5ldyBFYWdlck91dGVySm9pblBDMigpOw0KICAgICAgICAgICAg\naHBjLnNldE5hbWUoIjIuMSIpOw0KICAgICAgICAgICAgaHBjLnNldFJlZihw\nYzIpOw0KICAgICAgICAgICAgcGMyLmdldE9uZU1hbnlDb2xsZWN0aW9uKCku\nYWRkKGhwYyk7DQogICAgICAgICAgICBocGMgPSBuZXcgRWFnZXJPdXRlckpv\naW5QQzIoKTsNCiAgICAgICAgICAgIGhwYy5zZXROYW1lKCIyLjIiKTsNCiAg\nICAgICAgICAgIGhwYy5zZXRSZWYocGMyKTsNCiAgICAgICAgICAgIHBjMi5n\nZXRPbmVNYW55Q29sbGVjdGlvbigpLmFkZChocGMpOw0KICAgICAgICB9DQog\nICAgICAgIA0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQog\nICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBwbS5wZXJzaXN0KHBjMSk7\nDQogICAgICAgIHBtLnBlcnNpc3QocGMyKTsNCiAgICAgICAgZW5kVHgocG0p\nOw0KICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMxKTsN\nCiAgICAgICAgcG0uY2xvc2UoKTsNCiAgICAgICAgcmV0dXJuIG9pZDsNCiAg\nICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdE1hbnlNYW55Q29sbGVj\ndGlvbkJ5SWQoKSB7DQogICAgICAgIE9iamVjdCBvaWQgPSBpbnNlcnRNYW55\nTWFueUNvbGxlY3Rpb24oKTsNCiAgICAgICAgDQogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0g\nKEZldGNoUGxhbikgcG0uZ2V0RmV0Y2hQbGFuKCk7DQogICAgICAgIGZldGNo\nLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJtYW55TWFueUNv\nbGxlY3Rpb24iKTsNCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYyA9IChF\nYWdlck91dGVySm9pblBDKSBwbS5nZXRPYmplY3RJZChvaWQpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoIjEiLCBwYy5nZXROYW1lKCkpOw0KICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgcGMuZ2V0TWFueU1hbnlDb2xsZWN0aW9uKCkuc2l6\nZSgpKTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCiAgICB9DQogICAgDQogICAg\ncHVibGljIHZvaWQgdGVzdE1hbnlNYW55Q29sbGVjdGlvbkJ5UXVlcnkoKSB7\nDQogICAgICAgIGluc2VydE1hbnlNYW55Q29sbGVjdGlvbigpOw0KICAgICAg\nICANCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBB\nRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAg\nICBGZXRjaFBsYW4gZmV0Y2ggPSAoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBs\nYW4oKTsNCiAgICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpvaW5Q\nQy5jbGFzcywgIm1hbnlNYW55Q29sbGVjdGlvbiIpOw0KICAgICAgICBmZXRj\naC5zZXRGZXRjaEJhdGNoU2l6ZSgtMSk7DQogICAgICAgIE9wZW5KUEFRdWVy\neSBxID0gcG0uY3JlYXRlTmF0aXZlUXVlcnkoIiIsRWFnZXJPdXRlckpvaW5Q\nQy5jbGFzcyk7DQogICAgICAgIC8vRklYTUUganRob21hcw0KICAgICAgICAv\nL3Euc2V0T3JkZXJpbmcoIm5hbWUgYXNjZW5kaW5nIik7DQogICAgICAgIENv\nbGxlY3Rpb24gcmVzdWx0cyA9IChDb2xsZWN0aW9uKSBxLmdldFJlc3VsdExp\nc3QoKTsNCiAgICAgICAgDQogICAgICAgIGFzc2VydEVxdWFscygyLCByZXN1\nbHRzLnNpemUoKSk7DQogICAgICAgIEl0ZXJhdG9yIGl0ciA9IHJlc3VsdHMu\naXRlcmF0b3IoKTsNCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYyA9IChF\nYWdlck91dGVySm9pblBDKSBpdHIubmV4dCgpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoIjEiLCBwYy5nZXROYW1lKCkpOw0KICAgICAgICBhc3NlcnRFcXVh\nbHMoMiwgcGMuZ2V0TWFueU1hbnlDb2xsZWN0aW9uKCkuc2l6ZSgpKTsNCiAg\nICAgICAgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykgaXRyLm5leHQoKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCIyIiwgcGMuZ2V0TmFtZSgpKTsNCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldE1hbnlNYW55Q29sbGVjdGlvbigp\nLnNpemUoKSk7DQogICAgICAgIGFzc2VydFRydWUoIWl0ci5oYXNOZXh0KCkp\nOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0NCiAgICANCiAgICBwcml2\nYXRlIE9iamVjdCBpbnNlcnRNYW55TWFueUNvbGxlY3Rpb24oKSB7DQogICAg\nICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMxID0gbmV3IEVhZ2VyT3V0ZXJKb2lu\nUEMoKTsNCiAgICAgICAgcGMxLnNldE5hbWUoIjEiKTsNCiAgICAgICAgRWFn\nZXJPdXRlckpvaW5QQzIgaHBjID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMyKCk7\nDQogICAgICAgIGhwYy5zZXROYW1lKCIxLjEiKTsNCiAgICAgICAgcGMxLmdl\ndE1hbnlNYW55Q29sbGVjdGlvbigpLmFkZChocGMpOw0KICAgICAgICBocGMg\nPSBuZXcgRWFnZXJPdXRlckpvaW5QQzIoKTsNCiAgICAgICAgaHBjLnNldE5h\nbWUoIjEuMiIpOw0KICAgICAgICBwYzEuZ2V0TWFueU1hbnlDb2xsZWN0aW9u\nKCkuYWRkKGhwYyk7DQogICAgICAgIA0KICAgICAgICBFYWdlck91dGVySm9p\nblBDIHBjMiA9IG5ldyBFYWdlck91dGVySm9pblBDKCk7DQogICAgICAgIHBj\nMi5zZXROYW1lKCIyIik7DQogICAgICAgIGhwYyA9IG5ldyBFYWdlck91dGVy\nSm9pblBDMigpOw0KICAgICAgICBocGMuc2V0TmFtZSgiMi4xIik7DQogICAg\nICAgIHBjMi5nZXRNYW55TWFueUNvbGxlY3Rpb24oKS5hZGQoaHBjKTsNCiAg\nICAgICAgaHBjID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMyKCk7DQogICAgICAg\nIGhwYy5zZXROYW1lKCIyLjIiKTsNCiAgICAgICAgcGMyLmdldE1hbnlNYW55\nQ29sbGVjdGlvbigpLmFkZChocGMpOw0KICAgICAgICANCiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdlcilj\ndXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBtKTsN\nCiAgICAgICAgcG0ucGVyc2lzdChwYzEpOw0KICAgICAgICBwbS5wZXJzaXN0\nKHBjMik7DQogICAgICAgIGVuZFR4KHBtKTs7DQogICAgICAgIE9iamVjdCBv\naWQgPSBwbS5nZXRPYmplY3RJZChwYzEpOw0KICAgICAgICBwbS5jbG9zZSgp\nOw0KICAgICAgICByZXR1cm4gb2lkOw0KICAgIH0NCiAgICANCiAgICBwdWJs\naWMgdm9pZCB0ZXN0TWFueU1hbnlMaXN0QnlJZCgpIHsNCiAgICAgICAgbWFu\neU1hbnlMaXN0QnlJZFRlc3QoZmFsc2UpOw0KICAgIH0NCiAgICANCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RW1wdHlNYW55TWFueUxpc3RCeUlkKCkgew0KICAg\nICAgICBtYW55TWFueUxpc3RCeUlkVGVzdCh0cnVlKTsNCiAgICB9DQogICAg\nDQogICAgcHJpdmF0ZSB2b2lkIG1hbnlNYW55TGlzdEJ5SWRUZXN0KGJvb2xl\nYW4gZW1wdHkpIHsNCiAgICAgICAgT2JqZWN0IG9pZCA9IGluc2VydE1hbnlN\nYW55TGlzdCgoZW1wdHkpID8gMSA6IDApOw0KICAgICAgICANCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdl\nciljdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBGZXRjaFBsYW4g\nZmV0Y2ggPSAoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsNCiAgICAg\nICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpvaW5QQy5jbGFzcywgIm1h\nbnlNYW55TGlzdCIpOw0KICAgICAgICBFYWdlck91dGVySm9pblBDIHBjID0g\nKEVhZ2VyT3V0ZXJKb2luUEMpIHBtLmdldE9iamVjdElkKG9pZCk7DQogICAg\nICAgIGFzc2VydEVxdWFscygiMSIsIHBjLmdldE5hbWUoKSk7DQogICAgICAg\nIGlmIChlbXB0eSkNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBwYy5n\nZXRNYW55TWFueUxpc3QoKS5zaXplKCkpOw0KICAgICAgICBlbHNlIHsNCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRNYW55TWFueUxpc3Qo\nKS5zaXplKCkpOw0KICAgICAgICAgICAgRWFnZXJPdXRlckpvaW5QQzIgaHBj\nID0gKEVhZ2VyT3V0ZXJKb2luUEMyKQ0KICAgICAgICAgICAgcGMuZ2V0TWFu\neU1hbnlMaXN0KCkuZ2V0KDApOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKCIxLjEiLCBocGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgICAgIGhwYyA9IChF\nYWdlck91dGVySm9pblBDMikgcGMuZ2V0TWFueU1hbnlMaXN0KCkuZ2V0KDEp\nOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCIxLjIiLCBocGMuZ2V0TmFt\nZSgpKTsNCiAgICAgICAgfQ0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0N\nCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWFueU1hbnlMaXN0QnlRdWVy\neSgpIHsNCiAgICAgICAgbWFueU1hbnlMaXN0QnlRdWVyeVRlc3QoMCk7DQog\nICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RFbXB0eU1hbnlNYW55\nTGlzdEJ5UXVlcnkxKCkgew0KICAgICAgICBtYW55TWFueUxpc3RCeVF1ZXJ5\nVGVzdCgxKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdEVt\ncHR5TWFueU1hbnlMaXN0QnlRdWVyeTIoKSB7DQogICAgICAgIG1hbnlNYW55\nTGlzdEJ5UXVlcnlUZXN0KDIpOw0KICAgIH0NCiAgICANCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RW1wdHlNYW55TWFueUxpc3RCeVF1ZXJ5MygpIHsNCiAgICAg\nICAgbWFueU1hbnlMaXN0QnlRdWVyeVRlc3QoMyk7DQogICAgfQ0KICAgIA0K\nICAgIHByaXZhdGUgdm9pZCBtYW55TWFueUxpc3RCeVF1ZXJ5VGVzdChpbnQg\nZW1wdHkpIHsNCiAgICAgICAgaW5zZXJ0TWFueU1hbnlMaXN0KGVtcHR5KTsN\nCiAgICAgICAgDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0o\nT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsN\nCiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNoUGxhbikgcG0uZ2V0\nRmV0Y2hQbGFuKCk7DQogICAgICAgIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0\nZXJKb2luUEMuY2xhc3MsICJtYW55TWFueUxpc3QiKTsNCiAgICAgICAgZmV0\nY2guc2V0RmV0Y2hCYXRjaFNpemUoLTEpOw0KICAgICAgICBPcGVuSlBBUXVl\ncnkgcSA9IHBtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCIiLEVhZ2VyT3V0ZXJKb2lu\nUEMuY2xhc3MpOw0KICAgICAgICAvL0ZJWE1FIGp0aG9tYXMNCiAgICAgICAg\nLy9xLnNldE9yZGVyaW5nKCJuYW1lIGFzY2VuZGluZyIpOw0KICAgICAgICBD\nb2xsZWN0aW9uIHJlc3VsdHMgPSAoQ29sbGVjdGlvbikgcS5nZXRSZXN1bHRM\naXN0KCk7DQogICAgICAgIA0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcmVz\ndWx0cy5zaXplKCkpOw0KICAgICAgICBJdGVyYXRvciBpdHIgPSByZXN1bHRz\nLml0ZXJhdG9yKCk7DQogICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSAo\nRWFnZXJPdXRlckpvaW5QQykgaXRyLm5leHQoKTsNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCIxIiwgcGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgRWFnZXJPdXRl\nckpvaW5QQzIgaHBjOw0KICAgICAgICBpZiAoKGVtcHR5ICYgMSkgPiAwKQ0K\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHBjLmdldE1hbnlNYW55TGlz\ndCgpLnNpemUoKSk7DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKDIsIHBjLmdldE1hbnlNYW55TGlzdCgpLnNpemUoKSk7DQog\nICAgICAgICAgICBocGMgPSAoRWFnZXJPdXRlckpvaW5QQzIpIHBjLmdldE1h\nbnlNYW55TGlzdCgpLmdldCgwKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncygiMS4xIiwgaHBjLmdldE5hbWUoKSk7DQogICAgICAgICAgICBocGMgPSAo\nRWFnZXJPdXRlckpvaW5QQzIpIHBjLmdldE1hbnlNYW55TGlzdCgpLmdldCgx\nKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygiMS4yIiwgaHBjLmdldE5h\nbWUoKSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHBjID0gKEVh\nZ2VyT3V0ZXJKb2luUEMpIGl0ci5uZXh0KCk7DQogICAgICAgIGFzc2VydEVx\ndWFscygiMiIsIHBjLmdldE5hbWUoKSk7DQogICAgICAgIGlmICgoZW1wdHkg\nJiAyKSA+IDApDQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMCwgcGMuZ2V0\nTWFueU1hbnlMaXN0KCkuc2l6ZSgpKTsNCiAgICAgICAgZWxzZSB7DQogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0TWFueU1hbnlMaXN0KCku\nc2l6ZSgpKTsNCiAgICAgICAgICAgIGhwYyA9IChFYWdlck91dGVySm9pblBD\nMikgcGMuZ2V0TWFueU1hbnlMaXN0KCkuZ2V0KDApOw0KICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKCIyLjEiLCBocGMuZ2V0TmFtZSgpKTsNCiAgICAgICAg\nICAgIGhwYyA9IChFYWdlck91dGVySm9pblBDMikgcGMuZ2V0TWFueU1hbnlM\naXN0KCkuZ2V0KDEpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCIyLjIi\nLCBocGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAg\nICAgYXNzZXJ0VHJ1ZSghaXRyLmhhc05leHQoKSk7DQogICAgICAgIHBtLmNs\nb3NlKCk7DQogICAgfQ0KICAgIA0KICAgIHByaXZhdGUgT2JqZWN0IGluc2Vy\ndE1hbnlNYW55TGlzdChpbnQgZW1wdHkpIHsNCiAgICAgICAgRWFnZXJPdXRl\nckpvaW5QQyBwYzEgPSBuZXcgRWFnZXJPdXRlckpvaW5QQygpOw0KICAgICAg\nICBwYzEuc2V0TmFtZSgiMSIpOw0KICAgICAgICBFYWdlck91dGVySm9pblBD\nMiBocGM7DQogICAgICAgIGlmICgoZW1wdHkgJiAxKSA9PSAwKSB7DQogICAg\nICAgICAgICBocGMgPSBuZXcgRWFnZXJPdXRlckpvaW5QQzIoKTsNCiAgICAg\nICAgICAgIGhwYy5zZXROYW1lKCIxLjEiKTsNCiAgICAgICAgICAgIHBjMS5n\nZXRNYW55TWFueUxpc3QoKS5hZGQoaHBjKTsNCiAgICAgICAgICAgIGhwYyA9\nIG5ldyBFYWdlck91dGVySm9pblBDMigpOw0KICAgICAgICAgICAgaHBjLnNl\ndE5hbWUoIjEuMiIpOw0KICAgICAgICAgICAgcGMxLmdldE1hbnlNYW55TGlz\ndCgpLmFkZChocGMpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBF\nYWdlck91dGVySm9pblBDIHBjMiA9IG5ldyBFYWdlck91dGVySm9pblBDKCk7\nDQogICAgICAgIHBjMi5zZXROYW1lKCIyIik7DQogICAgICAgIGlmICgoZW1w\ndHkgJiAyKSA9PSAwKSB7DQogICAgICAgICAgICBocGMgPSBuZXcgRWFnZXJP\ndXRlckpvaW5QQzIoKTsNCiAgICAgICAgICAgIGhwYy5zZXROYW1lKCIyLjEi\nKTsNCiAgICAgICAgICAgIHBjMi5nZXRNYW55TWFueUxpc3QoKS5hZGQoaHBj\nKTsNCiAgICAgICAgICAgIGhwYyA9IG5ldyBFYWdlck91dGVySm9pblBDMigp\nOw0KICAgICAgICAgICAgaHBjLnNldE5hbWUoIjIuMiIpOw0KICAgICAgICAg\nICAgcGMyLmdldE1hbnlNYW55TGlzdCgpLmFkZChocGMpOw0KICAgICAgICB9\nDQogICAgICAgIA0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nDQogICAgICAgIHN0YXJ0VHgocG0pOzsNCiAgICAgICAgcG0ucGVyc2lzdChw\nYzEpOw0KICAgICAgICBwbS5wZXJzaXN0KHBjMik7DQogICAgICAgIGVuZFR4\nKHBtKTs7DQogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmplY3RJZChw\nYzEpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgICAgICByZXR1cm4gb2lk\nOw0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0VHdvQ29sbGVj\ndGlvbnNJbkZldGNoR3JvdXBzQnlJZCgpIHsNCiAgICAgICAgT2JqZWN0IG9p\nZCA9IGluc2VydFR3b0NvbGxlY3Rpb25zKCk7DQogICAgICAgIA0KICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIEZldGNoUGxh\nbiBmZXRjaCA9IChGZXRjaFBsYW4pIHBtLmdldEZldGNoUGxhbigpOw0KICAg\nICAgICBmZXRjaC5hZGRGaWVsZChFYWdlck91dGVySm9pblBDLmNsYXNzLCAi\nc3RyaW5nQ29sbGVjdGlvbiIpOw0KICAgICAgICBmZXRjaC5hZGRGaWVsZChF\nYWdlck91dGVySm9pblBDLmNsYXNzLCAibWFueU1hbnlMaXN0Iik7DQogICAg\nICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSAoRWFnZXJPdXRlckpvaW5QQykg\ncG0uZ2V0T2JqZWN0SWQob2lkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIx\nIiwgcGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBj\nLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5zaXplKCkpOw0KICAgICAgICBhc3Nl\ncnRUcnVlKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5jb250YWlucygiMS4x\nIikpOw0KICAgICAgICBhc3NlcnRUcnVlKHBjLmdldFN0cmluZ0NvbGxlY3Rp\nb24oKS5jb250YWlucygiMS4yIikpOw0KICAgICAgICBhc3NlcnRFcXVhbHMo\nMiwgcGMuZ2V0TWFueU1hbnlMaXN0KCkuc2l6ZSgpKTsNCiAgICAgICAgRWFn\nZXJPdXRlckpvaW5QQzIgaHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMyKQ0KICAg\nICAgICBwYy5nZXRNYW55TWFueUxpc3QoKS5nZXQoMCk7DQogICAgICAgIGFz\nc2VydEVxdWFscygiMS4xIiwgaHBjLmdldE5hbWUoKSk7DQogICAgICAgIGhw\nYyA9IChFYWdlck91dGVySm9pblBDMikgcGMuZ2V0TWFueU1hbnlMaXN0KCku\nZ2V0KDEpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoIjEuMiIsIGhwYy5nZXRO\nYW1lKCkpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0NCiAgICANCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0VHdvQ29sbGVjdGlvbnNJbkZldGNoR3JvdXBz\nQnlRdWVyeSgpIHsNCiAgICAgICAgaW5zZXJ0VHdvQ29sbGVjdGlvbnMoKTsN\nCiAgICAgICAgDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0o\nT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsN\nCiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNoUGxhbikgcG0uZ2V0\nRmV0Y2hQbGFuKCk7DQogICAgICAgIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0\nZXJKb2luUEMuY2xhc3MsICJzdHJpbmdDb2xsZWN0aW9uIik7DQogICAgICAg\nIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJtYW55\nTWFueUxpc3QiKTsNCiAgICAgICAgZmV0Y2guc2V0RmV0Y2hCYXRjaFNpemUo\nLTEpOw0KICAgICAgICANCiAgICAgICAgT3BlbkpQQVF1ZXJ5IHEgPSBwbS5j\ncmVhdGVOYXRpdmVRdWVyeSgiIixFYWdlck91dGVySm9pblBDLmNsYXNzKTsN\nCiAgICAgICAgLy9GSVhNRSBqdGhvbWFzDQogICAgICAgIC8vcS5zZXRPcmRl\ncmluZygibmFtZSBhc2NlbmRpbmciKTsNCiAgICAgICAgQ29sbGVjdGlvbiBy\nZXN1bHRzID0gKENvbGxlY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpOw0KICAg\nICAgICANCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHJlc3VsdHMuc2l6ZSgp\nKTsNCiAgICAgICAgSXRlcmF0b3IgaXRyID0gcmVzdWx0cy5pdGVyYXRvcigp\nOw0KICAgICAgICBFYWdlck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJK\nb2luUEMpIGl0ci5uZXh0KCk7DQogICAgICAgIGFzc2VydEVxdWFscygiMSIs\nIHBjLmdldE5hbWUoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5n\nZXRTdHJpbmdDb2xsZWN0aW9uKCkuc2l6ZSgpKTsNCiAgICAgICAgYXNzZXJ0\nVHJ1ZShwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuY29udGFpbnMoIjEuMSIp\nKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShwYy5nZXRTdHJpbmdDb2xsZWN0aW9u\nKCkuY29udGFpbnMoIjEuMiIpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIs\nIHBjLmdldE1hbnlNYW55TGlzdCgpLnNpemUoKSk7DQogICAgICAgIEVhZ2Vy\nT3V0ZXJKb2luUEMyIGhwYyA9IChFYWdlck91dGVySm9pblBDMikNCiAgICAg\nICAgcGMuZ2V0TWFueU1hbnlMaXN0KCkuZ2V0KDApOw0KICAgICAgICBhc3Nl\ncnRFcXVhbHMoIjEuMSIsIGhwYy5nZXROYW1lKCkpOw0KICAgICAgICBocGMg\nPSAoRWFnZXJPdXRlckpvaW5QQzIpIHBjLmdldE1hbnlNYW55TGlzdCgpLmdl\ndCgxKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIxLjIiLCBocGMuZ2V0TmFt\nZSgpKTsNCiAgICAgICAgDQogICAgICAgIHBjID0gKEVhZ2VyT3V0ZXJKb2lu\nUEMpIGl0ci5uZXh0KCk7DQogICAgICAgIGFzc2VydEVxdWFscygiMiIsIHBj\nLmdldE5hbWUoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRT\ndHJpbmdDb2xsZWN0aW9uKCkuc2l6ZSgpKTsNCiAgICAgICAgYXNzZXJ0VHJ1\nZShwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuY29udGFpbnMoIjIuMSIpKTsN\nCiAgICAgICAgYXNzZXJ0VHJ1ZShwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCku\nY29udGFpbnMoIjIuMiIpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBj\nLmdldE1hbnlNYW55TGlzdCgpLnNpemUoKSk7DQogICAgICAgIGhwYyA9IChF\nYWdlck91dGVySm9pblBDMikgcGMuZ2V0TWFueU1hbnlMaXN0KCkuZ2V0KDAp\nOw0KICAgICAgICBhc3NlcnRFcXVhbHMoIjIuMSIsIGhwYy5nZXROYW1lKCkp\nOw0KICAgICAgICBocGMgPSAoRWFnZXJPdXRlckpvaW5QQzIpIHBjLmdldE1h\nbnlNYW55TGlzdCgpLmdldCgxKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCIy\nLjIiLCBocGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgDQogICAgICAgIGFzc2Vy\ndFRydWUoIWl0ci5oYXNOZXh0KCkpOw0KICAgICAgICBwbS5jbG9zZSgpOw0K\nICAgIH0NCiAgICANCiAgICBwcml2YXRlIE9iamVjdCBpbnNlcnRUd29Db2xs\nZWN0aW9ucygpIHsNCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQyBwYzEgPSBu\nZXcgRWFnZXJPdXRlckpvaW5QQygpOw0KICAgICAgICBwYzEuc2V0TmFtZSgi\nMSIpOw0KICAgICAgICBwYzEuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmFkZCgi\nMS4xIik7DQogICAgICAgIHBjMS5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRk\nKCIxLjIiKTsNCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQzIgaHBjID0gbmV3\nIEVhZ2VyT3V0ZXJKb2luUEMyKCk7DQogICAgICAgIGhwYy5zZXROYW1lKCIx\nLjEiKTsNCiAgICAgICAgcGMxLmdldE1hbnlNYW55TGlzdCgpLmFkZChocGMp\nOw0KICAgICAgICBocGMgPSBuZXcgRWFnZXJPdXRlckpvaW5QQzIoKTsNCiAg\nICAgICAgaHBjLnNldE5hbWUoIjEuMiIpOw0KICAgICAgICBwYzEuZ2V0TWFu\neU1hbnlMaXN0KCkuYWRkKGhwYyk7DQogICAgICAgIA0KICAgICAgICBFYWdl\nck91dGVySm9pblBDIHBjMiA9IG5ldyBFYWdlck91dGVySm9pblBDKCk7DQog\nICAgICAgIHBjMi5zZXROYW1lKCIyIik7DQogICAgICAgIHBjMi5nZXRTdHJp\nbmdDb2xsZWN0aW9uKCkuYWRkKCIyLjEiKTsNCiAgICAgICAgcGMyLmdldFN0\ncmluZ0NvbGxlY3Rpb24oKS5hZGQoIjIuMiIpOw0KICAgICAgICBocGMgPSBu\nZXcgRWFnZXJPdXRlckpvaW5QQzIoKTsNCiAgICAgICAgaHBjLnNldE5hbWUo\nIjIuMSIpOw0KICAgICAgICBwYzIuZ2V0TWFueU1hbnlMaXN0KCkuYWRkKGhw\nYyk7DQogICAgICAgIGhwYyA9IG5ldyBFYWdlck91dGVySm9pblBDMigpOw0K\nICAgICAgICBocGMuc2V0TmFtZSgiMi4yIik7DQogICAgICAgIHBjMi5nZXRN\nYW55TWFueUxpc3QoKS5hZGQoaHBjKTsNCiAgICAgICAgDQogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIp\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgc3RhcnRUeChwbSk7\nOw0KICAgICAgICBwbS5wZXJzaXN0KHBjMSk7DQogICAgICAgIHBtLnBlcnNp\nc3QocGMyKTsNCiAgICAgICAgZW5kVHgocG0pOzsNCiAgICAgICAgT2JqZWN0\nIG9pZCA9IHBtLmdldE9iamVjdElkKHBjMSk7DQogICAgICAgIHBtLmNsb3Nl\nKCk7DQogICAgICAgIHJldHVybiBvaWQ7DQogICAgfQ0KICAgIA0KICAgIHB1\nYmxpYyB2b2lkIHRlc3RRdWVyeVJhbmRvbUFjY2VzcygpIHsNCiAgICAgICAg\naW5zZXJ0TWFueVN0cmluZ0xpc3QoKTsNCiAgICAgICAgDQogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIp\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgRmV0Y2hQbGFuIGZl\ndGNoID0gKEZldGNoUGxhbikgcG0uZ2V0RmV0Y2hQbGFuKCk7DQogICAgICAg\nIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJzdHJp\nbmdMaXN0Iik7DQogICAgICAgIGZldGNoLnNldEZldGNoQmF0Y2hTaXplKDMp\nOw0KICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZU5hdGl2ZVF1\nZXJ5KCIiLEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MpOw0KICAgICAgICAvL0ZJ\nWE1FIGp0aG9tYXMNCiAgICAgICAgLy9xLnNldE9yZGVyaW5nKCJuYW1lIGFz\nY2VuZGluZyIpOw0KICAgICAgICBMaXN0IHJlc3VsdHMgPSAoTGlzdCkgcS5n\nZXRSZXN1bHRMaXN0KCk7DQogICAgICAgIGFzc2VydEVxdWFscygxMCwgcmVz\ndWx0cy5zaXplKCkpOw0KICAgICAgICANCiAgICAgICAgZm9yIChpbnQgaSA9\nIDU7IGkgPCByZXN1bHRzLnNpemUoKTsgaSsrKSB7DQogICAgICAgICAgICBF\nYWdlck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIHJlc3Vs\ndHMuZ2V0KGkpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKFN0cmluZy52\nYWx1ZU9mKGkpLCBwYy5nZXROYW1lKCkpOw0KICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKDIsIHBjLmdldFN0cmluZ0xpc3QoKS5zaXplKCkpOw0KICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKGkgKyAiLjEiLCBwYy5nZXRTdHJpbmdMaXN0\nKCkuZ2V0KDApKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhpICsgIi4y\nIiwgcGMuZ2V0U3RyaW5nTGlzdCgpLmdldCgxKSk7DQogICAgICAgIH0NCiAg\nICAgICAgcS5jbG9zZUFsbCgpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAg\nIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0UXVlcnlSYW5nZSgpIHsN\nCiAgICAgICAgaW5zZXJ0TWFueVN0cmluZ0xpc3QoKTsNCiAgICAgICAgDQog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0\neU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgRmV0\nY2hQbGFuIGZldGNoID0gKEZldGNoUGxhbikgcG0uZ2V0RmV0Y2hQbGFuKCk7\nDQogICAgICAgIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0ZXJKb2luUEMuY2xh\nc3MsICJzdHJpbmdMaXN0Iik7DQogICAgICAgIGZldGNoLnNldEZldGNoQmF0\nY2hTaXplKDMpOw0KICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0\nZU5hdGl2ZVF1ZXJ5KCIiLEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MpOw0KICAg\nICAgICAvL0ZJWE1FIGp0aG9tYXMNCiAgICAgICAgLy9xLnNldE9yZGVyaW5n\nKCJuYW1lIGFzY2VuZGluZyIpOw0KICAgICAgICAvL3Euc2V0UmFuZ2UoNSwg\nMjApOw0KICAgICAgICANCiAgICAgICAgTGlzdCByZXN1bHRzID0gKExpc3Qp\nIHEuZ2V0UmVzdWx0TGlzdCgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoNSwg\ncmVzdWx0cy5zaXplKCkpOw0KICAgICAgICANCiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCByZXN1bHRzLnNpemUoKTsgaSsrKSB7DQogICAgICAgICAg\nICBFYWdlck91dGVySm9pblBDIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIHJl\nc3VsdHMuZ2V0KGkpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKFN0cmlu\nZy52YWx1ZU9mKGkgKyA1KSwgcGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgICAg\nIGFzc2VydEVxdWFscygyLCBwYy5nZXRTdHJpbmdMaXN0KCkuc2l6ZSgpKTsN\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscygoaSArIDUpICsgIi4xIiwgcGMu\nZ2V0U3RyaW5nTGlzdCgpLmdldCgwKSk7DQogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoKGkgKyA1KSArICIuMiIsIHBjLmdldFN0cmluZ0xpc3QoKS5nZXQo\nMSkpOw0KICAgICAgICB9DQogICAgICAgIHEuY2xvc2VBbGwoKTsNCiAgICAg\nICAgcG0uY2xvc2UoKTsNCiAgICB9DQogICAgDQogICAgcHJpdmF0ZSB2b2lk\nIGluc2VydE1hbnlTdHJpbmdMaXN0KCkgew0KICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRF\nbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOzsNCiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7DQogICAgICAgICAg\nICBFYWdlck91dGVySm9pblBDIHBjID0gbmV3IEVhZ2VyT3V0ZXJKb2luUEMo\nKTsNCiAgICAgICAgICAgIHBjLnNldE5hbWUoU3RyaW5nLnZhbHVlT2YoaSkp\nOw0KICAgICAgICAgICAgcGMuZ2V0U3RyaW5nTGlzdCgpLmFkZChpICsgIi4x\nIik7DQogICAgICAgICAgICBwYy5nZXRTdHJpbmdMaXN0KCkuYWRkKGkgKyAi\nLjIiKTsNCiAgICAgICAgICAgIHBtLnBlcnNpc3QocGMpOw0KICAgICAgICB9\nDQogICAgICAgIGVuZFR4KHBtKTs7DQogICAgICAgIHBtLmNsb3NlKCk7DQog\nICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RFYWdlclRvT25lVGhl\nbkVhZ2VyVG9NYW55KCkgew0KICAgICAgICBpbnNlcnRFYWdlcnMoKTsNCiAg\nICAgICAgDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNoUGxhbikgcG0uZ2V0RmV0\nY2hQbGFuKCk7DQogICAgICAgIGZldGNoLmFkZEZpZWxkKEVhZ2VyT3V0ZXJK\nb2luUEMyLmNsYXNzLCAicmVmIik7DQogICAgICAgIGZldGNoLmFkZEZpZWxk\nKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJzdHJpbmdDb2xsZWN0aW9uIik7\nDQogICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlTmF0aXZlUXVl\ncnkoIiIsRWFnZXJPdXRlckpvaW5QQzIuY2xhc3MpOw0KICAgICAgICAvL0ZJ\nWE1FIGp0aG9tYXMNCiAgICAgICAgLy9xLnNldE9yZGVyaW5nKCJuYW1lIGFz\nY2VuZGluZyIpOw0KICAgICAgICBDb2xsZWN0aW9uIHJlc3VsdHMgPSAoQ29s\nbGVjdGlvbikgcS5nZXRSZXN1bHRMaXN0KCk7DQogICAgICAgIGFzc2VydEVx\ndWFscyhuZXcgQXJyYXlMaXN0KHJlc3VsdHMpLnRvU3RyaW5nKCksIDIsIHJl\nc3VsdHMuc2l6ZSgpKTsNCiAgICAgICAgDQogICAgICAgIEl0ZXJhdG9yIGl0\nciA9IHJlc3VsdHMuaXRlcmF0b3IoKTsNCiAgICAgICAgRWFnZXJPdXRlckpv\naW5QQzIgcmVmID0gKEVhZ2VyT3V0ZXJKb2luUEMyKSBpdHIubmV4dCgpOw0K\nICAgICAgICBhc3NlcnRFcXVhbHMoInIxIiwgcmVmLmdldE5hbWUoKSk7DQog\nICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSByZWYuZ2V0UmVmKCk7DQog\nICAgICAgIGFzc2VydEVxdWFscygiMSIsIHBjLmdldE5hbWUoKSk7DQogICAg\nICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCku\nc2l6ZSgpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShwYy5nZXRTdHJpbmdDb2xs\nZWN0aW9uKCkuY29udGFpbnMoIjEuMSIpKTsNCiAgICAgICAgYXNzZXJ0VHJ1\nZShwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuY29udGFpbnMoIjEuMiIpKTsN\nCiAgICAgICAgDQogICAgICAgIHJlZiA9IChFYWdlck91dGVySm9pblBDMikg\naXRyLm5leHQoKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJyMiIsIHJlZi5n\nZXROYW1lKCkpOw0KICAgICAgICBhc3NlcnRUcnVlKHBjID09IHJlZi5nZXRS\nZWYoKSk7DQogICAgICAgIA0KICAgICAgICBhc3NlcnRUcnVlKCFpdHIuaGFz\nTmV4dCgpKTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCiAgICB9DQogICAgDQog\nICAgcHVibGljIHZvaWQgdGVzdEVhZ2VyVG9NYW55VGhlbkVhZ2VyVG9PbmUo\nKSB7DQogICAgICAgIGluc2VydEVhZ2VycygpOw0KICAgICAgICANCiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFu\nYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBGZXRjaFBs\nYW4gZmV0Y2ggPSAoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsNCiAg\nICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpvaW5QQy5jbGFzcywg\nIm1hbnlNYW55TGlzdCIpOw0KICAgICAgICBmZXRjaC5hZGRGaWVsZChFYWdl\nck91dGVySm9pblBDMi5jbGFzcywgImhlbHBlciIpOw0KICAgICAgICBPcGVu\nSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCIiLEVhZ2VyT3V0\nZXJKb2luUEMuY2xhc3MpOw0KICAgICAgICAvL0ZJWE1FIGp0aG9tYXMNCiAg\nICAgICAgLy9xLnNldE9yZGVyaW5nKCJuYW1lIGFzY2VuZGluZyIpOw0KICAg\nICAgICBDb2xsZWN0aW9uIHJlc3VsdHMgPSAoQ29sbGVjdGlvbikgcS5nZXRS\nZXN1bHRMaXN0KCk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCByZXN1bHRz\nLnNpemUoKSk7DQogICAgICAgIA0KICAgICAgICBFYWdlck91dGVySm9pblBD\nIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIHJlc3VsdHMuaXRlcmF0b3IoKS5u\nZXh0KCk7DQogICAgICAgIGFzc2VydEVxdWFscygiMSIsIHBjLmdldE5hbWUo\nKSk7DQogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRNYW55TWFueUxp\nc3QoKS5zaXplKCkpOw0KICAgICAgICBFYWdlck91dGVySm9pblBDMiByZWYg\nPSAoRWFnZXJPdXRlckpvaW5QQzIpDQogICAgICAgIHBjLmdldE1hbnlNYW55\nTGlzdCgpLmdldCgwKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJyMSIsIHJl\nZi5nZXROYW1lKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoImgxIiwgcmVm\nLmdldEhlbHBlcigpLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICByZWYg\nPSAoRWFnZXJPdXRlckpvaW5QQzIpIHBjLmdldE1hbnlNYW55TGlzdCgpLmdl\ndCgxKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJyMiIsIHJlZi5nZXROYW1l\nKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoImgyIiwgcmVmLmdldEhlbHBl\ncigpLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICANCiAgICAgICAgcG0u\nY2xvc2UoKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdEVh\nZ2VyVG9NYW55VGhlbkVhZ2VyVG9NYW55KCkgew0KICAgICAgICBpbnNlcnRF\nYWdlcnMoKTsNCiAgICAgICAgDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsNCiAgICAgICAgRmV0Y2hQbGFuIGZldGNoID0gKEZldGNoUGxh\nbikgcG0uZ2V0RmV0Y2hQbGFuKCk7DQogICAgICAgIGZldGNoLmFkZEZpZWxk\nKEVhZ2VyT3V0ZXJKb2luUEMuY2xhc3MsICJtYW55TWFueUxpc3QiKTsNCiAg\nICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpvaW5QQzIuY2xhc3Ms\nICJzdHJpbmdDb2xsZWN0aW9uIik7DQogICAgICAgIE9wZW5KUEFRdWVyeSBx\nID0gcG0uY3JlYXRlTmF0aXZlUXVlcnkoIiIsRWFnZXJPdXRlckpvaW5QQy5j\nbGFzcyk7DQogICAgICAgIC8vRklYTUUganRob21hcw0KICAgICAgICAvL3Eu\nc2V0T3JkZXJpbmcoIm5hbWUgYXNjZW5kaW5nIik7DQogICAgICAgIENvbGxl\nY3Rpb24gcmVzdWx0cyA9IChDb2xsZWN0aW9uKSBxLmdldFJlc3VsdExpc3Qo\nKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3VsdHMuc2l6ZSgpKTsN\nCiAgICAgICAgDQogICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMgcGMgPSAoRWFn\nZXJPdXRlckpvaW5QQykgcmVzdWx0cy5pdGVyYXRvcigpLm5leHQoKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCIxIiwgcGMuZ2V0TmFtZSgpKTsNCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldE1hbnlNYW55TGlzdCgpLnNpemUo\nKSk7DQogICAgICAgIEVhZ2VyT3V0ZXJKb2luUEMyIHJlZiA9IChFYWdlck91\ndGVySm9pblBDMikNCiAgICAgICAgcGMuZ2V0TWFueU1hbnlMaXN0KCkuZ2V0\nKDApOw0KICAgICAgICBhc3NlcnRFcXVhbHMoInIxIiwgcmVmLmdldE5hbWUo\nKSk7DQogICAgICAgIGFzc2VydEVxdWFscygyLCByZWYuZ2V0U3RyaW5nQ29s\nbGVjdGlvbigpLnNpemUoKSk7DQogICAgICAgIGFzc2VydFRydWUocmVmLmdl\ndFN0cmluZ0NvbGxlY3Rpb24oKS5jb250YWlucygicjEuMSIpKTsNCiAgICAg\nICAgYXNzZXJ0VHJ1ZShyZWYuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmNvbnRh\naW5zKCJyMS4yIikpOw0KICAgICAgICANCiAgICAgICAgcmVmID0gKEVhZ2Vy\nT3V0ZXJKb2luUEMyKSBwYy5nZXRNYW55TWFueUxpc3QoKS5nZXQoMSk7DQog\nICAgICAgIGFzc2VydEVxdWFscygicjIiLCByZWYuZ2V0TmFtZSgpKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDIsIHJlZi5nZXRTdHJpbmdDb2xsZWN0aW9u\nKCkuc2l6ZSgpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShyZWYuZ2V0U3RyaW5n\nQ29sbGVjdGlvbigpLmNvbnRhaW5zKCJyMi4xIikpOw0KICAgICAgICBhc3Nl\ncnRUcnVlKHJlZi5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuY29udGFpbnMoInIy\nLjIiKSk7DQogICAgICAgIA0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0N\nCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0RWFnZXJUb09uZUFuZFRvTWFu\neVRoZW5FYWdlclRvT25lKCkgew0KICAgICAgICBPYmplY3Qgb2lkID0gaW5z\nZXJ0RWFnZXJzKCk7DQogICAgICAgIA0KICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7DQogICAgICAgIEZldGNoUGxhbiBmZXRjaCA9IChGZXRj\naFBsYW4pIHBtLmdldEZldGNoUGxhbigpOw0KICAgICAgICBmZXRjaC5hZGRG\naWVsZChFYWdlck91dGVySm9pblBDLmNsYXNzLCAib25lTWFueUNvbGxlY3Rp\nb24iKTsNCiAgICAgICAgZmV0Y2guYWRkRmllbGQoRWFnZXJPdXRlckpvaW5Q\nQy5jbGFzcywgImhlbHBlciIpOw0KICAgICAgICBmZXRjaC5hZGRGaWVsZChF\nYWdlck91dGVySm9pblBDMi5jbGFzcywgImhlbHBlciIpOw0KICAgICAgICBP\ncGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCIiLEVhZ2Vy\nT3V0ZXJKb2luUEMuY2xhc3MpOw0KICAgICAgICAvL0ZJWE1FIGp0aG9tYXMN\nCiAgICAgICAgLy9xLnNldE9yZGVyaW5nKCJuYW1lIGFzY2VuZGluZyIpOw0K\nICAgICAgICBDb2xsZWN0aW9uIHJlc3VsdHMgPSAoQ29sbGVjdGlvbikgcS5n\nZXRSZXN1bHRMaXN0KCk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCByZXN1\nbHRzLnNpemUoKSk7DQogICAgICAgIA0KICAgICAgICBFYWdlck91dGVySm9p\nblBDIHBjID0gKEVhZ2VyT3V0ZXJKb2luUEMpIHJlc3VsdHMuaXRlcmF0b3Io\nKS5uZXh0KCk7DQogICAgICAgIGFzc2VydEVxdWFscygiMSIsIHBjLmdldE5h\nbWUoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygiaDMiLCBwYy5nZXRIZWxw\nZXIoKS5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDIsIHBjLmdldE9uZU1hbnlDb2xsZWN0aW9uKCkuc2l6ZSgpKTsNCiAgICAg\nICAgSXRlcmF0b3IgaXRyID0gcGMuZ2V0T25lTWFueUNvbGxlY3Rpb24oKS5p\ndGVyYXRvcigpOw0KICAgICAgICBFYWdlck91dGVySm9pblBDMiByZWYgPSAo\nRWFnZXJPdXRlckpvaW5QQzIpIGl0ci5uZXh0KCk7DQogICAgICAgIGlmICgi\ncjEiLmVxdWFscyhyZWYuZ2V0TmFtZSgpKSkgew0KICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJoMSIsIHJlZi5nZXRIZWxwZXIoKS5nZXRTdHJpbmdGaWVs\nZCgpKTsNCiAgICAgICAgICAgIHJlZiA9IChFYWdlck91dGVySm9pblBDMikg\naXRyLm5leHQoKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygicjIiLCBy\nZWYuZ2V0TmFtZSgpKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygiaDIi\nLCByZWYuZ2V0SGVscGVyKCkuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAg\nIH0gZWxzZSB7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoInIyIiwgcmVm\nLmdldE5hbWUoKSk7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoImgyIiwg\ncmVmLmdldEhlbHBlcigpLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICAg\nICAgcmVmID0gKEVhZ2VyT3V0ZXJKb2luUEMyKSBpdHIubmV4dCgpOw0KICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKCJyMSIsIHJlZi5nZXROYW1lKCkpOw0K\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJoMSIsIHJlZi5nZXRIZWxwZXIo\nKS5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAgfQ0KICAgICAgICBhc3Nl\ncnRUcnVlKCFpdHIuaGFzTmV4dCgpKTsNCiAgICAgICAgcG0uY2xvc2UoKTsN\nCiAgICB9DQogICAgDQogICAgcHJpdmF0ZSBPYmplY3QgaW5zZXJ0RWFnZXJz\nKCkgew0KICAgICAgICBFYWdlck91dGVySm9pblBDIHBjMSA9IG5ldyBFYWdl\nck91dGVySm9pblBDKCk7DQogICAgICAgIHBjMS5zZXROYW1lKCIxIik7DQog\nICAgICAgIHBjMS5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRkKCIxLjEiKTsN\nCiAgICAgICAgcGMxLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoIjEuMiIp\nOw0KICAgICAgICANCiAgICAgICAgRWFnZXJPdXRlckpvaW5QQzIgcmVmMSA9\nIG5ldyBFYWdlck91dGVySm9pblBDMigpOw0KICAgICAgICByZWYxLnNldE5h\nbWUoInIxIik7DQogICAgICAgIHJlZjEuZ2V0U3RyaW5nQ29sbGVjdGlvbigp\nLmFkZCgicjEuMSIpOw0KICAgICAgICByZWYxLmdldFN0cmluZ0NvbGxlY3Rp\nb24oKS5hZGQoInIxLjIiKTsNCiAgICAgICAgDQogICAgICAgIEVhZ2VyT3V0\nZXJKb2luUEMyIHJlZjIgPSBuZXcgRWFnZXJPdXRlckpvaW5QQzIoKTsNCiAg\nICAgICAgcmVmMi5zZXROYW1lKCJyMiIpOw0KICAgICAgICByZWYyLmdldFN0\ncmluZ0NvbGxlY3Rpb24oKS5hZGQoInIyLjEiKTsNCiAgICAgICAgcmVmMi5n\nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRkKCJyMi4yIik7DQogICAgICAgIA0K\nICAgICAgICBIZWxwZXJQQyBocGMxID0gbmV3IEhlbHBlclBDKCk7DQogICAg\nICAgIGhwYzEuc2V0U3RyaW5nRmllbGQoImgxIik7DQogICAgICAgIA0KICAg\nICAgICBIZWxwZXJQQyBocGMyID0gbmV3IEhlbHBlclBDKCk7DQogICAgICAg\nIGhwYzIuc2V0U3RyaW5nRmllbGQoImgyIik7DQogICAgICAgIA0KICAgICAg\nICBIZWxwZXJQQyBocGMzID0gbmV3IEhlbHBlclBDKCk7DQogICAgICAgIGhw\nYzMuc2V0U3RyaW5nRmllbGQoImgzIik7DQogICAgICAgIA0KICAgICAgICBw\nYzEuZ2V0TWFueU1hbnlMaXN0KCkuYWRkKHJlZjEpOw0KICAgICAgICBwYzEu\nZ2V0T25lTWFueUNvbGxlY3Rpb24oKS5hZGQocmVmMSk7DQogICAgICAgIHJl\nZjEuc2V0UmVmKHBjMSk7DQogICAgICAgIHBjMS5nZXRNYW55TWFueUxpc3Qo\nKS5hZGQocmVmMik7DQogICAgICAgIHBjMS5nZXRPbmVNYW55Q29sbGVjdGlv\nbigpLmFkZChyZWYyKTsNCiAgICAgICAgcmVmMi5zZXRSZWYocGMxKTsNCiAg\nICAgICAgDQogICAgICAgIHJlZjEuc2V0SGVscGVyKGhwYzEpOw0KICAgICAg\nICByZWYyLnNldEhlbHBlcihocGMyKTsNCiAgICAgICAgcGMxLnNldEhlbHBl\ncihocGMzKTsNCiAgICAgICAgDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsNCiAgICAgICAgc3RhcnRUeChwbSk7Ow0KICAgICAgICBwbS5w\nZXJzaXN0KHBjMSk7DQogICAgICAgIGVuZFR4KHBtKTs7DQogICAgICAgIE9i\namVjdCBvaWQgPSBwbS5nZXRPYmplY3RJZChwYzEpOw0KICAgICAgICBwbS5j\nbG9zZSgpOw0KICAgICAgICByZXR1cm4gb2lkOw0KICAgIH0NCiAgICANCiAg\nICANCn0NCg==\n","encoding":"base64"}

