{"sha":"fc104775cdadec42c2bb866335d4c2663f7899f4","node_id":"MDQ6QmxvYjIwNjM2NDpmYzEwNDc3NWNkYWRlYzQyYzJiYjg2NjMzNWQ0YzI2NjNmNzg5OWY0","size":20737,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/fc104775cdadec42c2bb866335d4c2663f7899f4","content":"LyoNCiAqIFRlc3RMUlNQcm94aWVzLmphdmENCiAqDQogKiBDcmVhdGVkIG9u\nIE9jdG9iZXIgMywgMjAwNiwgNTowMSBQTQ0KICoNCiAqIFRvIGNoYW5nZSB0\naGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2Vy\nDQogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4NCiAq\nLw0KDQovKg0KICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBG\nb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQ0KICogb3IgbW9yZSBjb250cmli\ndXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxl\nDQogKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25h\nbCBpbmZvcm1hdGlvbg0KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNo\naXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQ0KICogdG8geW91IHVu\nZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQ0KICog\nIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQg\naW4gY29tcGxpYW5jZQ0KICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkg\nb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAqIGh0dHA6\nLy93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICoNCiAq\nIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQg\ndG8gaW4gd3JpdGluZywNCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVy\nIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuDQogKiAiQVMgSVMi\nIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBB\nTlkNCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUg\ndGhlIExpY2Vuc2UgZm9yIHRoZQ0KICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292\nZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucw0KICogdW5kZXIg\ndGhlIExpY2Vuc2UuICAgIA0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLm1ldGE7DQoNCmltcG9ydCBqYXZhLnV0\naWwuKjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpE\nQkNDb25maWd1cmF0aW9uOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIuamRiYy5KREJDRXZlbnQ7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuamRiYy5jb21tb24uYXBwcy4qOw0KDQoNCmltcG9y\ndCBqYXZhLmxhbmcuYW5ub3RhdGlvbi5Bbm5vdGF0aW9uOw0KaW1wb3J0IGp1\nbml0LmZyYW1ld29yay4qOw0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eU1hbmFnZXI7DQppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5\nTWFuYWdlckZhY3Rvcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeTsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0\neU1hbmFnZXI7DQoNCg0KcHVibGljIGNsYXNzIFRlc3RMUlNQcm94aWVzIGV4\ndGVuZHMgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMua2Vy\nbmVsLkJhc2VKREJDVGVzdHsNCiAgIA0KICAgIHByaXZhdGUgT2JqZWN0IF9v\naWQgPSBudWxsOw0KICAgIHByaXZhdGUgT2JqZWN0IF9jb2lkID0gbnVsbDsN\nCiAgICANCiAgICBwdWJsaWMgVGVzdExSU1Byb3hpZXMoU3RyaW5nIGNhc2Vu\nYW1lKSB7DQogICAgICAgIHN1cGVyKGNhc2VuYW1lKTsNCiAgICB9DQogICAg\nDQogICAgDQogICAgLyoqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVz\ndExSU1Byb3hpZXMgKi8NCiAgICBwdWJsaWMgVGVzdExSU1Byb3hpZXMoKSB7\nDQogICAgfQ0KICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgew0KICAgICAgIGRl\nbGV0ZUFsbChMUlNQQy5jbGFzcyk7DQogICAgICAgZGVsZXRlQWxsKExSU0Nv\nbXBvdW5kUEMuY2xhc3MpOw0KICAgICAgICANCiAgICAgICAgTFJTUEMgcGMg\nPSBuZXcgTFJTUEMoIm1haW4iKTsNCiAgICAgICAgDQogICAgICAgIHBjLmdl\ndFN0cmluZ1NldCgpLmFkZCgidmFsMSIpOw0KICAgICAgICBwYy5nZXRTdHJp\nbmdTZXQoKS5hZGQoInZhbDIiKTsNCiAgICAgICAgcGMuZ2V0U3RyaW5nU2V0\nKCkuYWRkKCJ2YWwzIik7DQogICAgICAgIA0KICAgICAgICBwYy5nZXRSZWxT\nZXQoKS5hZGQobmV3IExSU1BDKCJzZXQxIikpOw0KICAgICAgICBwYy5nZXRS\nZWxTZXQoKS5hZGQobmV3IExSU1BDKCJzZXQyIikpOw0KICAgICAgICBwYy5n\nZXRSZWxTZXQoKS5hZGQobmV3IExSU1BDKCJzZXQzIikpOw0KICAgICAgICAN\nCiAgICAgICAgcGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmFkZCgidmFsMSIp\nOw0KICAgICAgICBwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRkKCJ2YWwy\nIik7DQogICAgICAgIHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoInZh\nbDMiKTsNCiAgICAgICAgDQogICAgICAgIHBjLmdldFJlbENvbGxlY3Rpb24o\nKS5hZGQobmV3IExSU1BDKCJzZXQxIikpOw0KICAgICAgICBwYy5nZXRSZWxD\nb2xsZWN0aW9uKCkuYWRkKG5ldyBMUlNQQygic2V0MiIpKTsNCiAgICAgICAg\ncGMuZ2V0UmVsQ29sbGVjdGlvbigpLmFkZChuZXcgTFJTUEMoInNldDMiKSk7\nDQogICAgICAgIA0KICAgICAgICBwYy5nZXRTdHJpbmdNYXAoKS5wdXQoImtl\neTEiLCAiMSIpOw0KICAgICAgICBwYy5nZXRTdHJpbmdNYXAoKS5wdXQoImtl\neTIiLCAiMiIpOw0KICAgICAgICBwYy5nZXRTdHJpbmdNYXAoKS5wdXQoImtl\neTMiLCAiMyIpOw0KICAgICAgICANCiAgICAgICAgcGMuZ2V0UmVsTWFwKCku\ncHV0KCJrZXkxIiwgbmV3IExSU1BDKCJtYXAxIikpOw0KICAgICAgICBwYy5n\nZXRSZWxNYXAoKS5wdXQoImtleTIiLCBuZXcgTFJTUEMoIm1hcDIiKSk7DQog\nICAgICAgIHBjLmdldFJlbE1hcCgpLnB1dCgia2V5MyIsIG5ldyBMUlNQQygi\nbWFwMyIpKTsNCiAgICAgICAgDQogICAgICAgIExSU0NvbXBvdW5kUEMgY3Bj\nID0gbmV3IExSU0NvbXBvdW5kUEMoIm1haW4iKTsNCiAgICAgICAgDQogICAg\nICAgIGNwYy5nZXRTdHJpbmdTZXQoKS5hZGQoInZhbDEiKTsNCiAgICAgICAg\nY3BjLmdldFN0cmluZ1NldCgpLmFkZCgidmFsMiIpOw0KICAgICAgICBjcGMu\nZ2V0U3RyaW5nU2V0KCkuYWRkKCJ2YWwzIik7DQogICAgICAgIA0KICAgICAg\nICBjcGMuZ2V0UmVsU2V0KCkuYWRkKG5ldyBMUlNDb21wb3VuZFBDKCJzZXQx\nIikpOw0KICAgICAgICBjcGMuZ2V0UmVsU2V0KCkuYWRkKG5ldyBMUlNDb21w\nb3VuZFBDKCJzZXQyIikpOw0KICAgICAgICBjcGMuZ2V0UmVsU2V0KCkuYWRk\nKG5ldyBMUlNDb21wb3VuZFBDKCJzZXQzIikpOw0KICAgICAgICANCiAgICAg\nICAgY3BjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoInZhbDEiKTsNCiAg\nICAgICAgY3BjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoInZhbDIiKTsN\nCiAgICAgICAgY3BjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5hZGQoInZhbDMi\nKTsNCiAgICAgICAgDQogICAgICAgIGNwYy5nZXRSZWxDb2xsZWN0aW9uKCku\nYWRkKG5ldyBMUlNDb21wb3VuZFBDKCJzZXQxIikpOw0KICAgICAgICBjcGMu\nZ2V0UmVsQ29sbGVjdGlvbigpLmFkZChuZXcgTFJTQ29tcG91bmRQQygic2V0\nMiIpKTsNCiAgICAgICAgY3BjLmdldFJlbENvbGxlY3Rpb24oKS5hZGQobmV3\nIExSU0NvbXBvdW5kUEMoInNldDMiKSk7DQogICAgICAgIA0KICAgICAgICBj\ncGMuZ2V0U3RyaW5nTWFwKCkucHV0KCJrZXkxIiwgIjEiKTsNCiAgICAgICAg\nY3BjLmdldFN0cmluZ01hcCgpLnB1dCgia2V5MiIsICIyIik7DQogICAgICAg\nIGNwYy5nZXRTdHJpbmdNYXAoKS5wdXQoImtleTMiLCAiMyIpOw0KICAgICAg\nICANCiAgICAgICAgY3BjLmdldFJlbE1hcCgpLnB1dCgia2V5MSIsIG5ldyBM\nUlNDb21wb3VuZFBDKCJtYXAxIikpOw0KICAgICAgICBjcGMuZ2V0UmVsTWFw\nKCkucHV0KCJrZXkyIiwgbmV3IExSU0NvbXBvdW5kUEMoIm1hcDIiKSk7DQog\nICAgICAgIGNwYy5nZXRSZWxNYXAoKS5wdXQoImtleTMiLCBuZXcgTFJTQ29t\ncG91bmRQQygibWFwMyIpKTsNCiAgICAgICAgDQogICAgICAgIA0KICAgICAg\nICANCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRFbShm\nYWxzZSwgZmFsc2UpOw0KICAgICAgICANCiAgICAgICAgc3RhcnRUeChwbSk7\nDQogICAgICAgIHBtLnBlcnNpc3QocGMpOw0KICAgICAgICBwbS5wZXJzaXN0\nKGNwYyk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgX29pZCA9IHBt\nLmdldE9iamVjdElkKHBjKTsNCiAgICAgICAgX2NvaWQgPSBwbS5nZXRPYmpl\nY3RJZChjcGMpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0NCiAgICAN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RyaW5nU2V0KCkgew0KICAgICAgICBz\ndHJpbmdDb2xsZWN0aW9uVGVzdChfb2lkLCB0cnVlLCB0cnVlKTsNCiAgICAg\nICAgc3RyaW5nQ29sbGVjdGlvblRlc3QoX2NvaWQsIHRydWUsIHRydWUpOw0K\nICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RyaW5nU2V0UmV0\nYWluKCkgew0KICAgICAgICBzdHJpbmdDb2xsZWN0aW9uVGVzdChfb2lkLCBm\nYWxzZSwgdHJ1ZSk7DQogICAgICAgIHN0cmluZ0NvbGxlY3Rpb25UZXN0KF9j\nb2lkLCBmYWxzZSwgdHJ1ZSk7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2\nb2lkIHRlc3RTdHJpbmdDb2xsZWN0aW9uKCkgew0KICAgICAgICBzdHJpbmdD\nb2xsZWN0aW9uVGVzdChfb2lkLCB0cnVlLCBmYWxzZSk7DQogICAgICAgIHN0\ncmluZ0NvbGxlY3Rpb25UZXN0KF9jb2lkLCB0cnVlLCBmYWxzZSk7DQogICAg\nfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RTdHJpbmdDb2xsZWN0aW9u\nUmV0YWluKCkgew0KICAgICAgICBzdHJpbmdDb2xsZWN0aW9uVGVzdChfb2lk\nLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICBzdHJpbmdDb2xsZWN0aW9uVGVz\ndChfY29pZCwgZmFsc2UsIGZhbHNlKTsNCiAgICB9DQogICAgDQogICAgcHJp\ndmF0ZSB2b2lkIHN0cmluZ0NvbGxlY3Rpb25UZXN0KE9iamVjdCBvaWQsIGJv\nb2xlYW4gY2xvc2UsDQogICAgICAgICAgICBib29sZWFuIGlzU2V0KSB7DQog\nICAgICAgIC8vRklYTUUganRob21hcw0KICAgICAgICAvL1BlcnNpc3RlbmNl\nTWFuYWdlciBwbSA9IGdldFBNKCFjbG9zZSwgIWNsb3NlKTsNCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPW51bGw7DQogICAgICAgIHN0YXJ0\nVHgocG0pOw0KICAgICAgICANCiAgICAgICAgTFJTUENJbnRmIHBjID0gKExS\nU1BDSW50ZikgcG0uZ2V0T2JqZWN0SWQob2lkKTsNCiAgICAgICAgDQogICAg\nICAgIC8vIGNoZWNrIHRoYXQgb3JpZyB2YWx1ZXMgYXJlIGNvcnJlY3QNCiAg\nICAgICAgQ29sbGVjdGlvbiBzZXQgPSBpc1NldCA/IHBjLmdldFN0cmluZ1Nl\ndCgpIDogcGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigpOw0KICAgICAgICBhc3Nl\ncnRFcXVhbHMoMywgc2V0LnNpemUoKSk7DQogICAgICAgIGFzc2VydFRydWUo\nc2V0LmNvbnRhaW5zKCJ2YWwxIikpOw0KICAgICAgICBhc3NlcnRUcnVlKHNl\ndC5jb250YWlucygidmFsMiIpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShzZXQu\nY29udGFpbnMoInZhbDMiKSk7DQogICAgICAgIGlmICghaXNTZXQpIHsNCiAg\nICAgICAgICAgIEl0ZXJhdG9yIGl0ciA9IHNldC5pdGVyYXRvcigpOw0KICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKCJ2YWwxIiwgaXRyLm5leHQoKSk7DQog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoInZhbDIiLCBpdHIubmV4dCgpKTsN\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscygidmFsMyIsIGl0ci5uZXh0KCkp\nOw0KICAgICAgICAgICAgLy9GSVhNRSBqdGhvbWFzDQogICAgICAgICAgICAv\nL0tvZG9KRE9IZWxwZXIuY2xvc2UoaXRyKTsNCiAgICAgICAgfQ0KICAgICAg\nICANCiAgICAgICAgLy8gZG8gc29tZSBtb2RzIHRvIHRyeSB0byBjb25mdXNl\nIHRoZSBwcm94eQ0KICAgICAgICBzZXQucmVtb3ZlKCJ2YWwxIik7DQogICAg\nICAgIHNldC5yZW1vdmUoInZhbDEiKTsNCiAgICAgICAgc2V0LmFkZCgidmFs\nNCIpOw0KICAgICAgICBzZXQucmVtb3ZlKCJ2YWw0Iik7DQogICAgICAgIHNl\ndC5hZGQoInZhbDUiKTsNCiAgICAgICAgc2V0LmFkZCgidmFsNiIpOw0KICAg\nICAgICBhc3NlcnRTdHJpbmdDb2xsZWN0aW9uQ2hhbmdlZChzZXQsIGlzU2V0\nKTsNCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAgICBpZiAoY2xvc2UpIHsN\nCiAgICAgICAgICAgIHBtLmNsb3NlKCk7DQogICAgICAgICAgICBwbSA9IGdl\ndEVtKGZhbHNlLCBmYWxzZSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAg\nICAgIC8vIHJlLXJldHJpZXZlIGFuZCBjaGVjayBzZXQNCiAgICAgICAgcGMg\nPSAoTFJTUENJbnRmKSBwbS5nZXRPYmplY3RJZChvaWQpOw0KICAgICAgICBz\nZXQgPSBpc1NldCA/IHBjLmdldFN0cmluZ1NldCgpIDogcGMuZ2V0U3RyaW5n\nQ29sbGVjdGlvbigpOw0KICAgICAgICBhc3NlcnRTdHJpbmdDb2xsZWN0aW9u\nQ2hhbmdlZChzZXQsIGlzU2V0KTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCiAg\nICB9DQogICAgDQogICAgcHJpdmF0ZSB2b2lkIGFzc2VydFN0cmluZ0NvbGxl\nY3Rpb25DaGFuZ2VkKENvbGxlY3Rpb24gc2V0LCBib29sZWFuIGlzU2V0KSB7\nDQogICAgICAgIGFzc2VydEVxdWFscyg0LCBzZXQuc2l6ZSgpKTsNCiAgICAg\nICAgYXNzZXJ0VHJ1ZSghc2V0LmNvbnRhaW5zKCJ2YWwxIikpOw0KICAgICAg\nICBhc3NlcnRUcnVlKHNldC5jb250YWlucygidmFsMiIpKTsNCiAgICAgICAg\nYXNzZXJ0VHJ1ZShzZXQuY29udGFpbnMoInZhbDMiKSk7DQogICAgICAgIGFz\nc2VydFRydWUoIXNldC5jb250YWlucygidmFsNCIpKTsNCiAgICAgICAgYXNz\nZXJ0VHJ1ZShzZXQuY29udGFpbnMoInZhbDUiKSk7DQogICAgICAgIGFzc2Vy\ndFRydWUoc2V0LmNvbnRhaW5zKCJ2YWw2IikpOw0KICAgICAgICBpZiAoIWlz\nU2V0KSB7DQogICAgICAgICAgICBJdGVyYXRvciBpdHIgPSBzZXQuaXRlcmF0\nb3IoKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygidmFsMiIsIGl0ci5u\nZXh0KCkpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJ2YWwzIiwgaXRy\nLm5leHQoKSk7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoInZhbDUiLCBp\ndHIubmV4dCgpKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygidmFsNiIs\nIGl0ci5uZXh0KCkpOw0KICAgICAgICAgICAgYXNzZXJ0VHJ1ZSghaXRyLmhh\nc05leHQoKSk7DQogICAgICAgICAgICAvL0ZJWE1FIGp0aG9tYXMNCiAgICAg\nICAgICAgIC8vS29kb0pET0hlbHBlci5jbG9zZShpdHIpOw0KICAgICAgICB9\nDQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RTdHJpbmdNYXAo\nKSB7DQogICAgICAgIHN0cmluZ01hcFRlc3QoX29pZCwgdHJ1ZSk7DQogICAg\nICAgIHN0cmluZ01hcFRlc3QoX2NvaWQsIHRydWUpOw0KICAgIH0NCiAgICAN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RyaW5nTWFwUmV0YWluKCkgew0KICAg\nICAgICBzdHJpbmdNYXBUZXN0KF9vaWQsIGZhbHNlKTsNCiAgICAgICAgc3Ry\naW5nTWFwVGVzdChfY29pZCwgZmFsc2UpOw0KICAgIH0NCiAgICANCiAgICBw\ncml2YXRlIHZvaWQgc3RyaW5nTWFwVGVzdChPYmplY3Qgb2lkLCBib29sZWFu\nIGNsb3NlKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0g\nZ2V0RW0oIWNsb3NlLCAhY2xvc2UpOw0KICAgICAgICBzdGFydFR4KHBtKTsN\nCiAgICAgICAgTFJTUENJbnRmIHBjID0gKExSU1BDSW50ZikgcG0uZ2V0T2Jq\nZWN0SWQob2lkKTsNCiAgICAgICAgDQogICAgICAgIC8vIGNoZWNrIHRoYXQg\nb3JpZyB2YWx1ZXMgYXJlIGNvcnJlY3QNCiAgICAgICAgTWFwIG1hcCA9IHBj\nLmdldFN0cmluZ01hcCgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMywgbWFw\nLnNpemUoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygiMSIsIG1hcC5nZXQo\nImtleTEiKSk7DQogICAgICAgIGFzc2VydEVxdWFscygiMiIsIG1hcC5nZXQo\nImtleTIiKSk7DQogICAgICAgIGFzc2VydEVxdWFscygiMyIsIG1hcC5nZXQo\nImtleTMiKSk7DQogICAgICAgIA0KICAgICAgICAvLyBkbyBzb21lIG1vZHMg\ndG8gdHJ5IHRvIGNvbmZ1c2UgdGhlIHByb3h5DQogICAgICAgIG1hcC5wdXQo\nImtleTEiLCAiMWEiKTsNCiAgICAgICAgbWFwLnB1dCgia2V5MSIsICIxYiIp\nOw0KICAgICAgICBtYXAucHV0KCJrZXkyIiwgIjQiKTsNCiAgICAgICAgbWFw\nLnJlbW92ZSgia2V5MiIpOw0KICAgICAgICBtYXAucmVtb3ZlKCJmb28iKTsN\nCiAgICAgICAgbWFwLnB1dCgia2V5NSIsICI1Iik7DQogICAgICAgIGFzc2Vy\ndFN0cmluZ01hcENoYW5nZWQobWFwKTsNCiAgICAgICAgZW5kVHgocG0pOw0K\nICAgICAgICANCiAgICAgICAgaWYgKGNsb3NlKSB7DQogICAgICAgICAgICBw\nbS5jbG9zZSgpOw0KICAgICAgICAgICAgcG0gPSBnZXRFbShmYWxzZSwgZmFs\nc2UpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyByZS1yZXRy\naWV2ZSBhbmQgY2hlY2sgbWFwDQogICAgICAgIHBjID0gKExSU1BDSW50Zikg\ncG0uZ2V0T2JqZWN0SWQob2lkKTsNCiAgICAgICAgbWFwID0gcGMuZ2V0U3Ry\naW5nTWFwKCk7DQogICAgICAgIGFzc2VydFN0cmluZ01hcENoYW5nZWQobWFw\nKTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCiAgICB9DQogICAgDQogICAgcHJp\ndmF0ZSB2b2lkIGFzc2VydFN0cmluZ01hcENoYW5nZWQoTWFwIG1hcCkgew0K\nICAgICAgICBhc3NlcnRFcXVhbHMoMywgbWFwLnNpemUoKSk7DQogICAgICAg\nIGFzc2VydEVxdWFscygiMWIiLCBtYXAuZ2V0KCJrZXkxIikpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoIjMiLCBtYXAuZ2V0KCJrZXkzIikpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoIjUiLCBtYXAuZ2V0KCJrZXk1IikpOw0KICAgICAg\nICBhc3NlcnROdWxsKG1hcC5nZXQoImtleTIiKSk7DQogICAgICAgIGFzc2Vy\ndFRydWUobWFwLmNvbnRhaW5zS2V5KCJrZXkxIikpOw0KICAgICAgICBhc3Nl\ncnRGYWxzZShtYXAuY29udGFpbnNLZXkoImtleTIiKSk7DQogICAgICAgIGFz\nc2VydFRydWUobWFwLmNvbnRhaW5zVmFsdWUoIjUiKSk7DQogICAgICAgIGFz\nc2VydEZhbHNlKG1hcC5jb250YWluc1ZhbHVlKCIxIikpOw0KICAgICAgICAN\nCiAgICAgICAgSXRlcmF0b3IgaXRyID0gbWFwLmVudHJ5U2V0KCkuaXRlcmF0\nb3IoKTsNCiAgICAgICAgTWFwLkVudHJ5IGVudHJ5Ow0KICAgICAgICBpbnQg\nY291bnQgPSAwOw0KICAgICAgICBmb3IgKDsgaXRyLmhhc05leHQoKTsgY291\nbnQrKykgew0KICAgICAgICAgICAgZW50cnkgPSAoTWFwLkVudHJ5KSBpdHIu\nbmV4dCgpOw0KICAgICAgICAgICAgaWYgKGVudHJ5LmdldEtleSgpLmVxdWFs\ncygia2V5MSIpKQ0KICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscygiMWIi\nLCBlbnRyeS5nZXRWYWx1ZSgpKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGVu\ndHJ5LmdldEtleSgpLmVxdWFscygia2V5MyIpKQ0KICAgICAgICAgICAgICAg\nIGFzc2VydEVxdWFscygiMyIsIGVudHJ5LmdldFZhbHVlKCkpOw0KICAgICAg\nICAgICAgZWxzZSBpZiAoZW50cnkuZ2V0S2V5KCkuZXF1YWxzKCJrZXk1Iikp\nDQogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCI1IiwgZW50cnkuZ2V0\nVmFsdWUoKSk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAg\nZmFpbCgiQmFkIGtleTogIiArIGVudHJ5LmdldEtleSgpKTsNCiAgICAgICAg\nfQ0KICAgICAgICBhc3NlcnRFcXVhbHMoMywgY291bnQpOw0KICAgICAgICAv\nL0ZJWE1FDQogICAgICAgIC8vS29kb0pET0hlbHBlci5jbG9zZShpdHIpOw0K\nICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVsU2V0KCkgew0K\nICAgICAgICByZWxDb2xsZWN0aW9uVGVzdChfb2lkLCB0cnVlLCB0cnVlKTsN\nCiAgICAgICAgcmVsQ29sbGVjdGlvblRlc3QoX2NvaWQsIHRydWUsIHRydWUp\nOw0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVsU2V0UmV0\nYWluKCkgew0KICAgICAgICByZWxDb2xsZWN0aW9uVGVzdChfb2lkLCBmYWxz\nZSwgdHJ1ZSk7DQogICAgICAgIHJlbENvbGxlY3Rpb25UZXN0KF9jb2lkLCBm\nYWxzZSwgdHJ1ZSk7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRl\nc3RSZWxDb2xsZWN0aW9uKCkgew0KICAgICAgICByZWxDb2xsZWN0aW9uVGVz\ndChfb2lkLCB0cnVlLCBmYWxzZSk7DQogICAgICAgIHJlbENvbGxlY3Rpb25U\nZXN0KF9jb2lkLCB0cnVlLCBmYWxzZSk7DQogICAgfQ0KICAgIA0KICAgIHB1\nYmxpYyB2b2lkIHRlc3RSZWxDb2xsZWN0aW9uUmV0YWluKCkgew0KICAgICAg\nICByZWxDb2xsZWN0aW9uVGVzdChfb2lkLCBmYWxzZSwgZmFsc2UpOw0KICAg\nICAgICByZWxDb2xsZWN0aW9uVGVzdChfY29pZCwgZmFsc2UsIGZhbHNlKTsN\nCiAgICB9DQogICAgDQogICAgcHJpdmF0ZSB2b2lkIHJlbENvbGxlY3Rpb25U\nZXN0KE9iamVjdCBvaWQsIGJvb2xlYW4gY2xvc2UsIGJvb2xlYW4gaXNTZXQp\nIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRFbSgh\nY2xvc2UsICFjbG9zZSk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAg\nICBMUlNQQ0ludGYgcGMgPSAoTFJTUENJbnRmKSBwbS5nZXRPYmplY3RJZChv\naWQpOw0KICAgICAgICANCiAgICAgICAgLy8gY2hlY2sgdGhhdCBvcmlnIHZh\nbHVlcyBhcmUgY29ycmVjdA0KICAgICAgICBDb2xsZWN0aW9uIHNldCA9IGlz\nU2V0ID8gcGMuZ2V0UmVsU2V0KCkgOiBwYy5nZXRSZWxDb2xsZWN0aW9uKCk7\nDQogICAgICAgIGFzc2VydEVxdWFscygzLCBzZXQuc2l6ZSgpKTsNCiAgICAg\nICAgQ29sbGVjdGlvbiBvcmRlcmVkID0gbmV3IFRyZWVTZXQoKTsNCiAgICAg\nICAgSXRlcmF0b3IgaXRyID0gc2V0Lml0ZXJhdG9yKCk7DQogICAgICAgIG9y\nZGVyZWQuYWRkKGl0ci5uZXh0KCkpOw0KICAgICAgICBvcmRlcmVkLmFkZChp\ndHIubmV4dCgpKTsNCiAgICAgICAgb3JkZXJlZC5hZGQoaXRyLm5leHQoKSk7\nDQogICAgICAgIGFzc2VydFRydWUoIWl0ci5oYXNOZXh0KCkpOw0KICAgICAg\nICAvL0ZJWE1FDQogICAgICAgIC8vS29kb0pET0hlbHBlci5jbG9zZShpdHIp\nOw0KICAgICAgICBpdHIgPSBvcmRlcmVkLml0ZXJhdG9yKCk7DQogICAgICAg\nIExSU1BDSW50ZiBzZXQxID0gKExSU1BDSW50ZikgaXRyLm5leHQoKTsNCiAg\nICAgICAgaWYgKCFpc1NldCkgew0KICAgICAgICAgICAgTFJTUENJbnRmIHNl\ndDIgPSAoTFJTUENJbnRmKSBpdHIubmV4dCgpOw0KICAgICAgICAgICAgTFJT\nUENJbnRmIHNldDMgPSAoTFJTUENJbnRmKSBpdHIubmV4dCgpOw0KICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJzZXQxIiwgc2V0MS5nZXRTdHJpbmdGaWVs\nZCgpKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygic2V0MiIsIHNldDIu\nZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nInNldDMiLCBzZXQzLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICB9DQog\nICAgICAgIGFzc2VydFRydWUoc2V0LmNvbnRhaW5zKHNldDEpKTsNCiAgICAg\nICAgYXNzZXJ0RmFsc2Uoc2V0LmNvbnRhaW5zKHBjKSk7DQogICAgICAgIA0K\nICAgICAgICAvLyBkbyBzb21lIG1vZHMgdG8gdHJ5IHRvIGNvbmZ1c2UgdGhl\nIHByb3h5DQogICAgICAgIHNldC5yZW1vdmUoc2V0MSk7DQogICAgICAgIHNl\ndC5yZW1vdmUoc2V0MSk7DQogICAgICAgIExSU1BDSW50ZiBzZXQ0ID0gcGMu\nbmV3SW5zdGFuY2UoInNldDQiKTsNCiAgICAgICAgc2V0LmFkZChzZXQ0KTsN\nCiAgICAgICAgc2V0LnJlbW92ZShzZXQ0KTsNCiAgICAgICAgTFJTUENJbnRm\nIHNldDUgPSBwYy5uZXdJbnN0YW5jZSgic2V0NSIpOw0KICAgICAgICBzZXQu\nYWRkKHNldDUpOw0KICAgICAgICBhc3NlcnRSZWxDb2xsZWN0aW9uQ2hhbmdl\nZChwYywgaXNTZXQpOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIA0K\nICAgICAgICBpZiAoY2xvc2UpIHsNCiAgICAgICAgICAgIHBtLmNsb3NlKCk7\nDQogICAgICAgICAgICBwbSA9IGdldEVtKGZhbHNlLCBmYWxzZSk7DQogICAg\nICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIHJlLXJldHJpZXZlIGFuZCBj\naGVjayBzZXQNCiAgICAgICAgcGMgPSAoTFJTUENJbnRmKSBwbS5nZXRPYmpl\nY3RJZChvaWQpOw0KICAgICAgICBhc3NlcnRSZWxDb2xsZWN0aW9uQ2hhbmdl\nZChwYywgaXNTZXQpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0NCiAg\nICANCiAgICBwcml2YXRlIHZvaWQgYXNzZXJ0UmVsQ29sbGVjdGlvbkNoYW5n\nZWQoTFJTUENJbnRmIHBjLCBib29sZWFuIGlzU2V0KSB7DQogICAgICAgIENv\nbGxlY3Rpb24gc2V0ID0gaXNTZXQgPyBwYy5nZXRSZWxTZXQoKSA6IHBjLmdl\ndFJlbENvbGxlY3Rpb24oKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIHNl\ndC5zaXplKCkpOw0KICAgICAgICBDb2xsZWN0aW9uIG9yZGVyZWQgPSBuZXcg\nVHJlZVNldCgpOw0KICAgICAgICBJdGVyYXRvciBpdHIgPSBzZXQuaXRlcmF0\nb3IoKTsNCiAgICAgICAgb3JkZXJlZC5hZGQoaXRyLm5leHQoKSk7DQogICAg\nICAgIG9yZGVyZWQuYWRkKGl0ci5uZXh0KCkpOw0KICAgICAgICBvcmRlcmVk\nLmFkZChpdHIubmV4dCgpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSghaXRyLmhh\nc05leHQoKSk7DQogICAgICAgIC8vRklYTUUNCiAgICAgICAgLy9Lb2RvSkRP\nSGVscGVyLmNsb3NlKGl0cik7DQogICAgICAgIGl0ciA9IG9yZGVyZWQuaXRl\ncmF0b3IoKTsNCiAgICAgICAgTFJTUENJbnRmIHNldDIgPSAoTFJTUENJbnRm\nKSBpdHIubmV4dCgpOw0KICAgICAgICBpZiAoIWlzU2V0KSB7DQogICAgICAg\nICAgICBMUlNQQ0ludGYgc2V0MyA9IChMUlNQQ0ludGYpIGl0ci5uZXh0KCk7\nDQogICAgICAgICAgICBMUlNQQ0ludGYgc2V0NSA9IChMUlNQQ0ludGYpIGl0\nci5uZXh0KCk7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoInNldDIiLCBz\nZXQyLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJzZXQzIiwgc2V0My5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAg\nICAgIGFzc2VydEVxdWFscygic2V0NSIsIHNldDUuZ2V0U3RyaW5nRmllbGQo\nKSk7DQogICAgICAgIH0NCiAgICAgICAgYXNzZXJ0VHJ1ZShzZXQuY29udGFp\nbnMoc2V0MikpOw0KICAgICAgICBhc3NlcnRGYWxzZShzZXQuY29udGFpbnMo\ncGMpKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdFJlbE1h\ncCgpIHsNCiAgICAgICAgcmVsTWFwVGVzdChfb2lkLCB0cnVlKTsNCiAgICAg\nICAgcmVsTWFwVGVzdChfY29pZCwgdHJ1ZSk7DQogICAgfQ0KICAgIA0KICAg\nIHB1YmxpYyB2b2lkIHRlc3RSZWxNYXBSZXRhaW4oKSB7DQogICAgICAgIHJl\nbE1hcFRlc3QoX29pZCwgZmFsc2UpOw0KICAgICAgICByZWxNYXBUZXN0KF9j\nb2lkLCBmYWxzZSk7DQogICAgfQ0KICAgIA0KICAgIHByaXZhdGUgdm9pZCBy\nZWxNYXBUZXN0KE9iamVjdCBvaWQsIGJvb2xlYW4gY2xvc2UpIHsNCiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRFbSghY2xvc2UsICFj\nbG9zZSk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBMUlNQQ0lu\ndGYgcGMgPSAoTFJTUENJbnRmKSBwbS5nZXRPYmplY3RJZChvaWQpOw0KICAg\nICAgICANCiAgICAgICAgLy8gY2hlY2sgdGhhdCBvcmlnIHZhbHVlcyBhcmUg\nY29ycmVjdA0KICAgICAgICBNYXAgbWFwID0gcGMuZ2V0UmVsTWFwKCk7DQog\nICAgICAgIGFzc2VydEVxdWFscygzLCBtYXAuc2l6ZSgpKTsNCiAgICAgICAg\nTFJTUENJbnRmIG1hcDEgPSAoTFJTUENJbnRmKSBtYXAuZ2V0KCJrZXkxIik7\nDQogICAgICAgIExSU1BDSW50ZiBtYXAyID0gKExSU1BDSW50ZikgbWFwLmdl\ndCgia2V5MiIpOw0KICAgICAgICBMUlNQQ0ludGYgbWFwMyA9IChMUlNQQ0lu\ndGYpIG1hcC5nZXQoImtleTMiKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJt\nYXAxIiwgbWFwMS5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJtYXAyIiwgbWFwMi5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJtYXAzIiwgbWFwMy5nZXRTdHJpbmdGaWVsZCgp\nKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShtYXAuY29udGFpbnNLZXkoImtleTEi\nKSk7DQogICAgICAgIGFzc2VydEZhbHNlKG1hcC5jb250YWluc0tleSgia2V5\nNCIpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShtYXAuY29udGFpbnNWYWx1ZSht\nYXAxKSk7DQogICAgICAgIGFzc2VydEZhbHNlKG1hcC5jb250YWluc1ZhbHVl\nKHBjKSk7DQogICAgICAgIA0KICAgICAgICAvLyBkbyBzb21lIG1vZHMgdG8g\ndHJ5IHRvIGNvbmZ1c2UgdGhlIHByb3h5DQogICAgICAgIExSU1BDSW50ZiBt\nYXAxYSA9IHBjLm5ld0luc3RhbmNlKCJtYXAxYSIpOw0KICAgICAgICBtYXAu\ncHV0KCJrZXkxIiwgbWFwMWEpOw0KICAgICAgICBMUlNQQ0ludGYgbWFwMWIg\nPSBwYy5uZXdJbnN0YW5jZSgibWFwMWIiKTsNCiAgICAgICAgbWFwLnB1dCgi\na2V5MSIsIG1hcDFiKTsNCiAgICAgICAgbWFwLnJlbW92ZSgia2V5MiIpOw0K\nICAgICAgICBtYXAucHV0KCJrZXk0IiwgcGMubmV3SW5zdGFuY2UoIm1hcDQi\nKSk7DQogICAgICAgIG1hcC5yZW1vdmUoImtleTQiKTsNCiAgICAgICAgbWFw\nLnJlbW92ZSgiZm9vIik7DQogICAgICAgIG1hcC5wdXQoImtleTUiLCBwYy5u\nZXdJbnN0YW5jZSgibWFwNSIpKTsNCiAgICAgICAgYXNzZXJ0UmVsTWFwQ2hh\nbmdlZChwYyk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgDQogICAg\nICAgIGlmIChjbG9zZSkgew0KICAgICAgICAgICAgcG0uY2xvc2UoKTsNCiAg\nICAgICAgICAgIHBtID0gZ2V0RW0oZmFsc2UsIGZhbHNlKTsNCiAgICAgICAg\nfQ0KICAgICAgICANCiAgICAgICAgLy8gcmUtcmV0cmlldmUgYW5kIGNoZWNr\nIG1hcA0KICAgICAgICBwYyA9IChMUlNQQ0ludGYpIHBtLmdldE9iamVjdElk\nKG9pZCk7DQogICAgICAgIGFzc2VydFJlbE1hcENoYW5nZWQocGMpOw0KICAg\nICAgICBwbS5jbG9zZSgpOw0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZv\naWQgYXNzZXJ0UmVsTWFwQ2hhbmdlZChMUlNQQ0ludGYgcGMpIHsNCiAgICAg\nICAgTWFwIG1hcCA9IHBjLmdldFJlbE1hcCgpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMywgbWFwLnNpemUoKSk7DQogICAgICAgIExSU1BDSW50ZiBtYXAx\nYiA9IChMUlNQQ0ludGYpIG1hcC5nZXQoImtleTEiKTsNCiAgICAgICAgTFJT\nUENJbnRmIG1hcDMgPSAoTFJTUENJbnRmKSBtYXAuZ2V0KCJrZXkzIik7DQog\nICAgICAgIExSU1BDSW50ZiBtYXA1ID0gKExSU1BDSW50ZikgbWFwLmdldCgi\na2V5NSIpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoIm1hcDFiIiwgbWFwMWIu\nZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygibWFw\nMyIsIG1hcDMuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAgIGFzc2VydEVx\ndWFscygibWFwNSIsIG1hcDUuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAg\nIGFzc2VydFRydWUobWFwLmNvbnRhaW5zS2V5KCJrZXkxIikpOw0KICAgICAg\nICBhc3NlcnRGYWxzZShtYXAuY29udGFpbnNLZXkoImtleTIiKSk7DQogICAg\nICAgIGFzc2VydFRydWUobWFwLmNvbnRhaW5zVmFsdWUobWFwMWIpKTsNCiAg\nICAgICAgYXNzZXJ0RmFsc2UobWFwLmNvbnRhaW5zVmFsdWUocGMpKTsNCiAg\nICAgICAgDQogICAgICAgIEl0ZXJhdG9yIGl0ciA9IG1hcC5lbnRyeVNldCgp\nLml0ZXJhdG9yKCk7DQogICAgICAgIE1hcC5FbnRyeSBlbnRyeTsNCiAgICAg\nICAgaW50IGNvdW50ID0gMDsNCiAgICAgICAgZm9yICg7IGl0ci5oYXNOZXh0\nKCk7IGNvdW50KyspIHsNCiAgICAgICAgICAgIGVudHJ5ID0gKE1hcC5FbnRy\neSkgaXRyLm5leHQoKTsNCiAgICAgICAgICAgIGlmIChlbnRyeS5nZXRLZXko\nKS5lcXVhbHMoImtleTEiKSkNCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVh\nbHMobWFwMWIsIGVudHJ5LmdldFZhbHVlKCkpOw0KICAgICAgICAgICAgZWxz\nZSBpZiAoZW50cnkuZ2V0S2V5KCkuZXF1YWxzKCJrZXkzIikpDQogICAgICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKG1hcDMsIGVudHJ5LmdldFZhbHVlKCkp\nOw0KICAgICAgICAgICAgZWxzZSBpZiAoZW50cnkuZ2V0S2V5KCkuZXF1YWxz\nKCJrZXk1IikpDQogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKG1hcDUs\nIGVudHJ5LmdldFZhbHVlKCkpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAg\nICAgICAgICAgIGZhaWwoIkJhZCBrZXk6ICIgKyBlbnRyeS5nZXRLZXkoKSk7\nDQogICAgICAgIH0NCiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIGNvdW50KTsN\nCiAgICAgICAgLy9GSVhNRQ0KICAgICAgICAvL0tvZG9KRE9IZWxwZXIuY2xv\nc2UoaXRyKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdFRy\nYW5zZmVyKCkgew0KICAgICAgICAvLyBjYW5ub3QgdHJhbnNmZXIgYW4gbHJz\nIGZyb20gb25lIGZpZWxkIHRvIGFub3RoZXINCiAgICAgICAgDQogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0RW0odHJ1ZSwgdHJ1ZSk7\nDQogICAgICAgIExSU1BDIHBjID0gKExSU1BDKSBwbS5nZXRPYmplY3RJZChf\nb2lkKTsNCiAgICAgICAgTFJTUEMgbWFwMSA9IChMUlNQQykgcGMuZ2V0UmVs\nTWFwKCkuZ2V0KCJrZXkxIik7DQogICAgICAgIGFzc2VydE5vdE51bGwobWFw\nMSk7DQogICAgICAgIA0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAg\nTWFwIG1hcCA9IHBjLmdldFJlbE1hcCgpOw0KICAgICAgICBwYy5zZXRSZWxN\nYXAobnVsbCk7DQogICAgICAgIG1hcDEuc2V0UmVsTWFwKG1hcCk7DQogICAg\nICAgIA0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgZW5kVHgocG0pOw0K\nICAgICAgICAgICAgZmFpbCgiQWxsb3dlZCB0cmFuc2ZlciBvZiBscnMgZmll\nbGQiKTsNCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGp1ZSkgew0KICAg\nICAgICB9DQogICAgICAgIGlmIChwbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0\naXZlKCkpDQogICAgICAgICAgICBwbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxi\nYWNrKCk7DQogICAgICAgIHBtLmNsb3NlKCk7DQogICAgfQ0KICAgIA0KICAg\nIHB1YmxpYyB2b2lkIHRlc3RTaGFyZSgpIHsNCiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgcG0gPSBnZXRFbSh0cnVlLCB0cnVlKTsNCiAgICAgICAg\nTFJTUEMgcGMgPSAoTFJTUEMpIHBtLmdldE9iamVjdElkKF9vaWQpOw0KICAg\nICAgICBMUlNQQyBtYXAxID0gKExSU1BDKSBwYy5nZXRSZWxNYXAoKS5nZXQo\nImtleTEiKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVsbChtYXAxKTsNCiAgICAg\nICAgDQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBNYXAgbWFwID0g\ncGMuZ2V0UmVsTWFwKCk7DQogICAgICAgIG1hcDEuc2V0UmVsTWFwKG1hcCk7\nDQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShwYy5n\nZXRSZWxNYXAoKSAhPSBtYXAxLmdldFJlbE1hcCgpKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDMsIG1hcDEuZ2V0UmVsTWFwKCkuc2l6ZSgpKTsNCiAgICAg\nICAgYXNzZXJ0VHJ1ZShtYXAxLmdldFJlbE1hcCgpLmNvbnRhaW5zVmFsdWUo\nbWFwMSkpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgICAgICANCiAgICAg\nICAgLy8gbWFrZSBzdXJlIGl0IHN0aWNrcw0KICAgICAgICBwbSA9IGdldEVt\nKHRydWUsIHRydWUpOw0KICAgICAgICBwYyA9IChMUlNQQykgcG0uZ2V0T2Jq\nZWN0SWQoX29pZCk7DQogICAgICAgIG1hcDEgPSAoTFJTUEMpIHBjLmdldFJl\nbE1hcCgpLmdldCgia2V5MSIpOw0KICAgICAgICBhc3NlcnRFcXVhbHMobWFw\nMSwgbWFwMS5nZXRSZWxNYXAoKS5nZXQoImtleTEiKSk7DQogICAgICAgIHBt\nLmNsb3NlKCk7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RS\nb2xsYmFjaygpIHsNCiAgICAgICAgLy9GSVhNRQ0KICAgICAgICAvL1BlcnNp\nc3RlbmNlTWFuYWdlckZhY3RvcnkgZmFjdG9yeSA9IGdldFBNRmFjdG9yeShu\nZXcgU3RyaW5nW117DQogICAgICAgIC8vICAgICJvcGVuanBhLlJlc3RvcmVN\ndXRhYmxlVmFsdWVzIiwgInRydWUiLA0KICAgICAgICAvL30pOw0KICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgZmFjdG9yeSA9bnVsbDsN\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBmYWN0b3J5LmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgTFJTUEMgcGMgPSAoTFJT\nUEMpIHBtLmdldE9iamVjdElkKF9vaWQpOw0KICAgICAgICBzdGFydFR4KHBt\nKTsNCiAgICAgICAgcGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLnJlbW92ZSgi\ndmFsMiIpOw0KICAgICAgICBwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRk\nKCJ2YWw0Iik7DQogICAgICAgIHJvbGxiYWNrVHgocG0pOw0KICAgICAgICBh\nc3NlcnRUcnVlKHBjLmdldFN0cmluZ0NvbGxlY3Rpb24oKS5jb250YWlucygi\ndmFsMiIpKTsNCiAgICAgICAgYXNzZXJ0RmFsc2UocGMuZ2V0U3RyaW5nQ29s\nbGVjdGlvbigpLmNvbnRhaW5zKCJ2YWw0IikpOw0KICAgICAgICBwbS5jbG9z\nZSgpOw0KICAgICAgICBmYWN0b3J5LmNsb3NlKCk7DQogICAgfQ0KICAgIA0K\nICAgIHB1YmxpYyB2b2lkIHRlc3RSZXBsYWNlKCkgew0KICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldEVtKGZhbHNlLCBmYWxzZSk7DQog\nICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBMUlNQQyBwYyA9IChMUlNQ\nQykgcG0uZ2V0T2JqZWN0SWQoX29pZCk7DQogICAgICAgIA0KICAgICAgICAv\nLyB0b3RhbGx5IHJlcGxhY2Ugc2V0DQogICAgICAgIENvbGxlY3Rpb24gc2V0\nID0gbmV3IEhhc2hTZXQoKTsNCiAgICAgICAgc2V0LmFkZCgibmV3Iik7DQog\nICAgICAgIHBjLnNldFN0cmluZ0NvbGxlY3Rpb24oc2V0KTsNCiAgICAgICAg\nDQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCiAg\nICAgICAgDQogICAgICAgIC8vIHJlLXJldHJpZXZlIGFuZCBjaGVjayBzZXQN\nCiAgICAgICAgcG0gPSBnZXRFbShmYWxzZSwgZmFsc2UpOw0KICAgICAgICBw\nYyA9IChMUlNQQykgcG0uZ2V0T2JqZWN0SWQoX29pZCk7DQogICAgICAgIA0K\nICAgICAgICBzZXQgPSBwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCk7DQogICAg\nICAgIGFzc2VydEVxdWFscygxLCBzZXQuc2l6ZSgpKTsNCiAgICAgICAgYXNz\nZXJ0VHJ1ZShzZXQuY29udGFpbnMoIm5ldyIpKTsNCiAgICAgICAgcG0uY2xv\nc2UoKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdEFkZCgp\nDQogICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQovKg0KICAgICAgICAvL0ZJWE1F\nDQogICAgICAgIC8vS29kb1BlcnNpc3RlbmNlTWFuYWdlckZhY3RvcnkgcG1m\nID0gZ2V0UE1GYWN0b3J5KG5ldyBTdHJpbmcgW117DQogICAgICAgIC8vICAg\nICJvcGVuanBhLmpkYmMuSkRCQ0xpc3RlbmVycyIsIExpc3RlbmVyLmNsYXNz\nLmdldE5hbWUoKSwNCiAgICAgICAgLy99KTsNCiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5IHBtZiA9bnVsbDsNCiAgICAgICAgSkRCQ0Nv\nbmZpZ3VyYXRpb24gY29uZiA9IChKREJDQ29uZmlndXJhdGlvbikgcG1mLmdl\ndENvbmZpZ3VyYXRpb24oKTsNCiAgICAgICAgLy9GSVhNRSBuZWVkIHRvIGZp\neCBpbm5lciBjbGFzcw0KICAgICAgICAvL0xpc3RlbmVyIGwgPSAoTGlzdGVu\nZXIpIGNvbmYuZ2V0SkRCQ0xpc3RlbmVySW5zdGFuY2VzKClbMF07DQogICAg\nICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gcG1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHN0YXJ0\nVHgocG0pOw0KICAgICAgICAgICAgTFJTUEMgcGMgPSAoTFJTUEMpIHBtLmdl\ndE9iamVjdElkKF9vaWQpOw0KICAgICAgICAgICAgbC5jb3VudCA9IDA7DQog\nICAgICAgICAgICBwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuYWRkKCJ0ZXN0\nQWRkU3RyaW5nVmFsdWUiKTsNCiAgICAgICAgICAgIGVuZFR4KHBtKTsNCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscygzLCBsLmNvdW50KTsNCiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIGlmIChwbS5n\nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpDQogICAgICAgICAgICAgICAg\ncG0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOw0KICAgICAgICAgICAg\ndGhyb3cgZTsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIHBt\nLmNsb3NlKCk7DQogICAgICAgIH0NCiAqLw0KICAgIH0NCiAgICANCiAgICBw\ncml2YXRlIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGdldEVtKGJvb2xlYW4gb3B0\naW1pc3RpYyxib29sZWFuIHJldGFpblZhbHVlcykgew0KICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlciBlbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcilj\ndXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5zZXROb250cmFu\nc2FjdGlvbmFsUmVhZCh0cnVlKTsNCiAgICAgICAgZW0uc2V0UmV0YWluU3Rh\ndGUocmV0YWluVmFsdWVzKTsNCiAgICAgICAgZW0uc2V0T3B0aW1pc3RpYyhv\ncHRpbWlzdGljKTsNCiAgICAgICAgcmV0dXJuIGVtOw0KICAgIH0NCiAgICAN\nCiAgICAvL0ZJWE1FIC0gY291bGQgbm90IGZpbmQgQWJzdHJhY3RKREJDTGlz\ndGVuZXIgYmVjYXVzZSBvZiBwYWNrYWdlIGltcG9ydHMgaW4gc291cmNlIGZp\nbGUNCi8qDQogICAgcHVibGljIHN0YXRpYyBjbGFzcyBMaXN0ZW5lciBleHRl\nbmRzIEFic3RyYWN0SkRCQ0xpc3RlbmVyIHsNCiANCiAgICAgICAgcHVibGlj\nIGludCBjb3VudCA9IDA7DQogDQogICAgICAgIHB1YmxpYyB2b2lkIGFmdGVy\nRXhlY3V0ZVN0YXRlbWVudChKREJDRXZlbnQgZXYpIHsNCiAgICAgICAgICAg\nIGNvdW50Kys7DQogICAgICAgIH0NCiAgICB9DQogKi8NCn0NCg==\n","encoding":"base64"}

