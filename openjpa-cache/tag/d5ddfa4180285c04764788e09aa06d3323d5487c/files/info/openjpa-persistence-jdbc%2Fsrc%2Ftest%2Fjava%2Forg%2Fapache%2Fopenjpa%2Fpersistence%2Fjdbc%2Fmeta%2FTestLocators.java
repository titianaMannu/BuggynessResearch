{"sha":"1b8eedca6c82dec51a0c6bb6958a5dae937c1c3a","node_id":"MDQ6QmxvYjIwNjM2NDoxYjhlZWRjYTZjODJkZWM1MWEwYzZiYjY5NThhNWRhZTkzN2MxYzNh","size":7746,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1b8eedca6c82dec51a0c6bb6958a5dae937c1c3a","content":"LyoNCiAqIFRlc3RMb2NhdG9ycy5qYXZhDQogKg0KICogQ3JlYXRlZCBvbiBP\nY3RvYmVyIDMsIDIwMDYsIDQ6MzcgUE0NCiAqDQogKiBUbyBjaGFuZ2UgdGhp\ncyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFuYWdlcg0K\nICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuDQogKi8N\nCg0KLyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0\nb3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0K\nICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwg\naW5mb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlw\nLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRl\nciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJM\naWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGlu\nIGNvbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9i\ndGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8v\nd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBV\nbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRv\nIGluIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0\naGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBC\nQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5Z\nDQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRo\nZSBMaWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVy\nbmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRo\nZSBMaWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuamRiYy5tZXRhOw0KDQppbXBvcnQgamF2YS51dGls\nLio7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJD\nQ29uZmlndXJhdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuT3JhY2xlRGljdGlvbmFyeTsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuRXh0ZW50Ow0KDQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuY29tbW9uLmFwcHMuKjsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9uLnV0\naWxzLkFic3RyYWN0VGVzdENhc2U7DQoNCmltcG9ydCBqYXZhLmxhbmcuYW5u\nb3RhdGlvbi5Bbm5vdGF0aW9uOw0KaW1wb3J0IGp1bml0LmZyYW1ld29yay4q\nOw0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7DQpp\nbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlckZhY3Rvcnk7\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5K\nUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeTsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeVNQSTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJTUEk7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJz\naXN0ZW5jZTsNCg0KDQpwdWJsaWMgY2xhc3MgVGVzdExvY2F0b3JzIGV4dGVu\nZHMgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMua2VybmVs\nLkJhc2VKREJDVGVzdHsNCiAgICANCiAgICBwcml2YXRlIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeSBwbWY7DQoNCiAgICBwdWJsaWMgVGVzdExvY2F0\nb3JzKFN0cmluZyBuYW1lKSB7DQogICAgICAgIHN1cGVyKG5hbWUpOw0KICAg\nIH0gICAgDQogICAgDQogICAgLyoqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ug\nb2YgVGVzdExvY2F0b3JzICovDQogICAgcHVibGljIFRlc3RMb2NhdG9ycygp\nIHsNCiAgICB9DQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7DQogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFn\nZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgc3RhcnRUeChw\nbSk7DQogICAgICAgIA0KICAgICAgICBFeHRlbnQgZSA9IHBtLmNyZWF0ZUV4\ndGVudChMb2NhdG9yVGVzdE9iamVjdC5jbGFzcywgdHJ1ZSk7DQogICAgICAg\nIGZvciAoSXRlcmF0b3IgaSA9IGUuaXRlcmF0b3IoKTsgaS5oYXNOZXh0KCk7\nKSB7DQogICAgICAgICAgICBwbS5yZW1vdmUoaS5uZXh0KCkpOw0KICAgICAg\nICAgICAgDQogICAgICAgIH0NCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAg\nICBwbS5jbG9zZSgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlYXJE\nb3duKCkNCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIHN1\ncGVyLnRlYXJEb3duKCk7DQoNCiAgICAgICBkZWxldGVBbGwoTG9jYXRvclRl\nc3RPYmplY3QuY2xhc3MpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRl\nc3RCTE9CcygpIHsNCiAgICAgICAgZG9CbG9iVGVzdCg1MDAwMCk7DQogICAg\nfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFNtYWxsQkxPQnMoKSB7DQogICAg\nICAgIGRvQmxvYlRlc3QoNTApOw0KDQogICAgICAgIGlmIChnZXRDdXJyZW50\nUGxhdGZvcm0oKSA9PSBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLk9SQUNM\nRSkgew0KICAgICAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShP\ncGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOw0K\nICAgICAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IChKREJDQ29u\nZmlndXJhdGlvbikNCiAgICAgICAgICAgICAgICAoKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyU1BJKSBwbSkuZ2V0Q29uZmlndXJhdGlvbigpOw0KICAgICAgICAg\nICAgT3JhY2xlRGljdGlvbmFyeSBkaWN0ID0gKE9yYWNsZURpY3Rpb25hcnkp\nDQogICAgICAgICAgICAgICAgY29uZi5nZXREQkRpY3Rpb25hcnlJbnN0YW5j\nZSgpOw0KDQogICAgICAgICAgICBpbnQgdCA9IGRpY3QubWF4RW1iZWRkZWRC\nbG9iU2l6ZTsNCiAgICAgICAgICAgIGRvQmxvYlRlc3QodCAtIDEpOw0KICAg\nICAgICAgICAgZG9CbG9iVGVzdCh0KTsNCiAgICAgICAgICAgIGRvQmxvYlRl\nc3QodCArIDEpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgZG9CbG9iVGVzdChpbnQgc2l6ZSkgew0KICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRF\nbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAg\nICBMb2NhdG9yVGVzdE9iamVjdCBvID0gbmV3IExvY2F0b3JUZXN0T2JqZWN0\nKCk7DQogICAgICAgIGJ5dGVbXSBieXRlcyA9IG5ldyBieXRlW3NpemVdOw0K\nICAgICAgICBBcnJheXMuZmlsbChieXRlcywgKGJ5dGUpICdiJyk7DQogICAg\nICAgIG8uc2V0Qnl0ZXMoYnl0ZXMpOw0KICAgICAgICBwbS5wZXJzaXN0KG8p\nOw0KICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQobyk7DQog\nICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgcG0uY2xvc2UoKTsNCg0KICAg\nICAgICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5\nTWFuYWdlcigpOw0KICAgICAgICBvID0gKExvY2F0b3JUZXN0T2JqZWN0KSBw\nbS5nZXRPYmplY3RJZChvaWQpOw0KICAgICAgICBieXRlW10gbmV3Ynl0ZXMg\nPSBvLmdldEJ5dGVzKCk7DQogICAgICAgIGFzc2VydE5vdE51bGwobmV3Ynl0\nZXMpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoYnl0ZXMubGVuZ3RoLCBuZXdi\neXRlcy5sZW5ndGgpOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJ5\ndGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nYnl0ZXNbaV0sIG5ld2J5dGVzW2ldKTsNCiAgICAgICAgfQ0KICAgIH0NCg0K\nICAgIHB1YmxpYyB2b2lkIHRlc3RTaHJpbmtCTE9CKCkgew0KICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0p\nOw0KICAgICAgICBMb2NhdG9yVGVzdE9iamVjdCBvID0gbmV3IExvY2F0b3JU\nZXN0T2JqZWN0KCk7DQogICAgICAgIGJ5dGVbXSBieXRlcyA9IG5ldyBieXRl\nWzUwMDAwXTsNCiAgICAgICAgQXJyYXlzLmZpbGwoYnl0ZXMsIChieXRlKSAn\nYicpOw0KICAgICAgICBvLnNldEJ5dGVzKGJ5dGVzKTsNCiAgICAgICAgcG0u\ncGVyc2lzdChvKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVj\ndElkKG8pOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIHBtLmNsb3Nl\nKCk7DQoNCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3Vy\ncmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgbyA9IChMb2NhdG9yVGVz\ndE9iamVjdCkgcG0uZ2V0T2JqZWN0SWQob2lkKTsNCg0KICAgICAgICBzdGFy\ndFR4KHBtKTsNCiAgICAgICAgYnl0ZXMgPSBuZXcgYnl0ZVs0MDAwMF07DQog\nICAgICAgIEFycmF5cy5maWxsKGJ5dGVzLCAoYnl0ZSkgJ2MnKTsNCiAgICAg\nICAgby5zZXRCeXRlcyhieXRlcyk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAg\nICAgICAgcG0uY2xvc2UoKTsNCg0KICAgICAgICBwbSA9IChPcGVuSlBBRW50\naXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBv\nID0gKExvY2F0b3JUZXN0T2JqZWN0KSBwbS5nZXRPYmplY3RJZChvaWQpOw0K\nICAgICAgICBieXRlW10gbmV3Ynl0ZXMgPSBvLmdldEJ5dGVzKCk7DQogICAg\nICAgIGFzc2VydEVxdWFscyhieXRlcy5sZW5ndGgsIG5ld2J5dGVzLmxlbmd0\naCk7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3Ro\nOyBpKyspIHsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhieXRlc1tpXSwg\nbmV3Ynl0ZXNbaV0pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgdGVzdENMT0JzKCkgew0KICAgICAgICBkb0Nsb2JUZXN0KDUwMDAw\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0U21hbGxDTE9Ccygp\nIHsNCiAgICAgICAgZG9DbG9iVGVzdCg1MCk7DQoNCiAgICAgICAgaWYgKGdl\ndEN1cnJlbnRQbGF0Zm9ybSgpID09IEFic3RyYWN0VGVzdENhc2UuUGxhdGZv\ncm0uT1JBQ0xFKSB7DQogICAgICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBwbSA9KE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRpdHlNYW5h\nZ2VyKCk7DQogICAgICAgICAgICBKREJDQ29uZmlndXJhdGlvbiBjb25mID0g\nKEpEQkNDb25maWd1cmF0aW9uKQ0KICAgICAgICAgICAgICAgICgoT3BlbkpQ\nQUVudGl0eU1hbmFnZXJTUEkpIHBtKS5nZXRDb25maWd1cmF0aW9uKCk7DQog\nICAgICAgICAgICBPcmFjbGVEaWN0aW9uYXJ5IGRpY3QgPSAoT3JhY2xlRGlj\ndGlvbmFyeSkNCiAgICAgICAgICAgICAgICBjb25mLmdldERCRGljdGlvbmFy\neUluc3RhbmNlKCk7DQoNCiAgICAgICAgICAgIGludCB0ID0gZGljdC5tYXhF\nbWJlZGRlZENsb2JTaXplOw0KICAgICAgICAgICAgZG9DbG9iVGVzdCh0IC0g\nMSk7DQogICAgICAgICAgICBkb0Nsb2JUZXN0KHQpOw0KICAgICAgICAgICAg\nZG9DbG9iVGVzdCh0ICsgMSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCBkb0Nsb2JUZXN0KGludCBzaXplKSB7DQogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0oT3BlbkpQQUVudGl0eU1hbmFnZXIp\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgc3RhcnRUeChwbSk7\nDQogICAgICAgIExvY2F0b3JUZXN0T2JqZWN0IG8gPSBuZXcgTG9jYXRvclRl\nc3RPYmplY3QoKTsNCiAgICAgICAgY2hhcltdIGNoYXJzID0gbmV3IGNoYXJb\nc2l6ZV07DQogICAgICAgIEFycmF5cy5maWxsKGNoYXJzLCAoY2hhcikgJ2Mn\nKTsNCiAgICAgICAgby5zZXRDbG9iU3RyaW5nKG5ldyBTdHJpbmcoY2hhcnMp\nKTsNCiAgICAgICAgcG0ucGVyc2lzdChvKTsNCiAgICAgICAgT2JqZWN0IG9p\nZCA9IHBtLmdldE9iamVjdElkKG8pOw0KICAgICAgICBlbmRUeChwbSk7DQog\nICAgICAgIHBtLmNsb3NlKCk7DQoNCiAgICAgICAgcG0gPSAoT3BlbkpQQUVu\ndGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAg\nbyA9IChMb2NhdG9yVGVzdE9iamVjdCkgcG0uZ2V0T2JqZWN0SWQob2lkKTsN\nCiAgICAgICAgY2hhcltdIG5ld2NoYXJzID0gby5nZXRDbG9iU3RyaW5nKCku\ndG9DaGFyQXJyYXkoKTsNCg0KICAgICAgICBhc3NlcnROb3ROdWxsKG5ld2No\nYXJzKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKGNoYXJzLmxlbmd0aCwgbmV3\nY2hhcnMubGVuZ3RoKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBj\naGFycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKGNoYXJzW2ldLCBuZXdjaGFyc1tpXSk7DQogICAgICAgIH0NCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2hyaW5rQ0xPQigpIHsNCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPShPcGVuSlBBRW50aXR5TWFuYWdl\nciljdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBt\nKTsNCiAgICAgICAgTG9jYXRvclRlc3RPYmplY3QgbyA9IG5ldyBMb2NhdG9y\nVGVzdE9iamVjdCgpOw0KICAgICAgICBjaGFyW10gY2hhcnMgPSBuZXcgY2hh\ncls1MDAwMF07DQogICAgICAgIEFycmF5cy5maWxsKGNoYXJzLCAoY2hhcikg\nJ2MnKTsNCiAgICAgICAgby5zZXRDbG9iU3RyaW5nKG5ldyBTdHJpbmcoY2hh\ncnMpKTsNCiAgICAgICAgcG0ucGVyc2lzdChvKTsNCiAgICAgICAgT2JqZWN0\nIG9pZCA9IHBtLmdldE9iamVjdElkKG8pOw0KICAgICAgICBlbmRUeChwbSk7\nDQogICAgICAgIHBtLmNsb3NlKCk7DQoNCiAgICAgICAgcG0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAg\nICAgbyA9IChMb2NhdG9yVGVzdE9iamVjdCkgcG0uZ2V0T2JqZWN0SWQob2lk\nKTsNCg0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgY2hhcnMgPSBu\nZXcgY2hhcls0MDAwMF07DQogICAgICAgIEFycmF5cy5maWxsKGNoYXJzLCAo\nY2hhcikgJ2QnKTsNCiAgICAgICAgby5zZXRDbG9iU3RyaW5nKG5ldyBTdHJp\nbmcoY2hhcnMpKTsNCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAgICBwbS5j\nbG9zZSgpOw0KDQogICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKWN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIG8gPSAoTG9jYXRv\nclRlc3RPYmplY3QpIHBtLmdldE9iamVjdElkKG9pZCk7DQogICAgICAgIGNo\nYXJbXSBuZXdjaGFycyA9IG8uZ2V0Q2xvYlN0cmluZygpLnRvQ2hhckFycmF5\nKCk7DQogICAgICAgIGFzc2VydEVxdWFscyhjaGFycy5sZW5ndGgsIG5ld2No\nYXJzLmxlbmd0aCk7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY2hh\ncnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhj\naGFyc1tpXSwgbmV3Y2hhcnNbaV0pOw0KICAgICAgICB9DQogICAgfQ0KICAg\nIA0KfQ0K\n","encoding":"base64"}

