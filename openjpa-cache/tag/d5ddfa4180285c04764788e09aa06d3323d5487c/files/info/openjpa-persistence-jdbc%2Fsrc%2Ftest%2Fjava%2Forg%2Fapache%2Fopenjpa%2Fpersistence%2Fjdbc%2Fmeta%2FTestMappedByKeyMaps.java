{"sha":"eca0fb46de8d3b76a8c432b7d2f44b79a1cfeb8f","node_id":"MDQ6QmxvYjIwNjM2NDplY2EwZmI0NmRlOGQzYjc2YThjNDMyYjdkMmY0NGI3OWExY2ZlYjhm","size":10953,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/eca0fb46de8d3b76a8c432b7d2f44b79a1cfeb8f","content":"LyoNCiAqIFRlc3RNYXBwZWRCeUtleU1hcHMuamF2YQ0KICoNCiAqIENyZWF0\nZWQgb24gT2N0b2JlciA0LCAyMDA2LCA5OjI2IEFNDQogKg0KICogVG8gY2hh\nbmdlIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1h\nbmFnZXINCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9y\nLg0KICovDQoNCi8qDQogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3\nYXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lDQogKiBvciBtb3JlIGNv\nbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNF\nIGZpbGUNCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRp\ndGlvbmFsIGluZm9ybWF0aW9uDQogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93\nbmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlDQogKiB0byB5\nb3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhl\nDQogKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4\nY2VwdCBpbiBjb21wbGlhbmNlDQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91\nIG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogKg0KICog\naHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQog\nKg0KICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFn\ncmVlZCB0byBpbiB3cml0aW5nLA0KICogc29mdHdhcmUgZGlzdHJpYnV0ZWQg\ndW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4NCiAqICJB\nUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05T\nIE9GIEFOWQ0KICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4g\nIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlDQogKiBzcGVjaWZpYyBsYW5ndWFn\nZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zDQogKiB1\nbmRlciB0aGUgTGljZW5zZS4gICAgDQogKi8NCnBhY2thZ2Ugb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMubWV0YTsNCg0KaW1wb3J0IGph\ndmEudXRpbC4qOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNv\nbmYuSkRCQ0NvbmZpZ3VyYXRpb247DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMubWV0YS5GaWVsZE1hcHBpbmc7DQppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHMuUmVsYXRpb25NYXBJ\nbnZlcnNlS2V5RmllbGRTdHJhdGVneTsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5tZXRhLnN0cmF0cy5SZWxhdGlvbk1hcFRhYmxlRmllbGRT\ndHJhdGVneTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5BYnN0\ncmFjdExSU1Byb3h5TWFwOw0KDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLmpkYmMuY29tbW9uLmFwcHMuKjsNCg0KDQppbXBvcnQg\namF2YS5sYW5nLmFubm90YXRpb24uQW5ub3RhdGlvbjsNCmltcG9ydCBqdW5p\ndC5mcmFtZXdvcmsuKjsNCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRp\ndHlNYW5hZ2VyOw0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1h\nbmFnZXJGYWN0b3J5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnk7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlN\nYW5hZ2VyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5PcGVuSlBBUXVlcnk7DQoNCg0KcHVibGljIGNsYXNzIFRlc3RNYXBwZWRC\neUtleU1hcHMgZXh0ZW5kcyBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuamRiYy5rZXJuZWwuQmFzZUpEQkNUZXN0DQp7DQogICAgDQogICAgLyoq\nIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdE1hcHBlZEJ5S2V5TWFw\ncyAqLw0KICAgIHB1YmxpYyBUZXN0TWFwcGVkQnlLZXlNYXBzKFN0cmluZyBu\nYW1lKSANCiAgICB7DQogICAgCXN1cGVyKG5hbWUpOw0KICAgIH0NCiAgICAN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW52ZXJzZUtleU1hcE1hcHBpbmcoKSB7\nDQogICAgICAgIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZp\nZ3VyYXRpb24pIGdldENvbmZpZ3VyYXRpb24oKTsNCiAgICAgICAgQ2xhc3NN\nYXBwaW5nIHBjID0gY29uZi5nZXRNYXBwaW5nUmVwb3NpdG9yeUluc3RhbmNl\nKCkuZ2V0TWFwcGluZw0KICAgICAgICAgICAgICAgIChJbnZlcnNlS2V5TWFw\nUEMuY2xhc3MsIG51bGwsIHRydWUpOw0KICAgICAgICBGaWVsZE1hcHBpbmcg\nbWFwID0gcGMuZ2V0RmllbGRNYXBwaW5nKCJoZWxwZXJzIik7DQogICAgICAg\nIA0KICAgICAgICBDbGFzc01hcHBpbmcgaGVscGVyID0gY29uZi5nZXRNYXBw\naW5nUmVwb3NpdG9yeUluc3RhbmNlKCkuZ2V0TWFwcGluZw0KICAgICAgICAg\nICAgICAgIChIZWxwZXJQQy5jbGFzcywgbnVsbCwgdHJ1ZSk7DQogICAgICAg\nIEZpZWxkTWFwcGluZyBzdHIgPSBoZWxwZXIuZ2V0RmllbGRNYXBwaW5nKCJz\ndHJpbmdGaWVsZCIpOw0KICAgICAgICANCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJzdHJpbmdGaWVsZCIsIG1hcC5nZXRLZXkoKS5nZXRWYWx1ZU1hcHBlZEJ5\nKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoc3RyLCBtYXAuZ2V0S2V5KCku\nZ2V0VmFsdWVNYXBwZWRCeU1ldGFEYXRhKCkpOw0KICAgICAgICBhc3NlcnRU\ncnVlKG1hcC5nZXRTdHJhdGVneSgpIGluc3RhbmNlb2YNCiAgICAgICAgICAg\nICAgICBSZWxhdGlvbk1hcEludmVyc2VLZXlGaWVsZFN0cmF0ZWd5KTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIG1hcC5nZXRLZXlNYXBwaW5nKCkuZ2V0\nQ29sdW1ucygpLmxlbmd0aCk7DQogICAgICAgIGFzc2VydEVxdWFscyhtYXAu\nZ2V0S2V5TWFwcGluZygpLmdldENvbHVtbnMoKVswXSwNCiAgICAgICAgICAg\nICAgICBzdHIuZ2V0Q29sdW1ucygpWzBdKTsNCiAgICB9DQogICAgDQogICAg\ncHVibGljIHZvaWQgdGVzdEpvaW5UYWJsZU1hcE1hcHBpbmcoKSB7DQogICAg\nICAgIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRp\nb24pIGdldENvbmZpZ3VyYXRpb24oKTsNCiAgICAgICAgQ2xhc3NNYXBwaW5n\nIHBjID0gY29uZi5nZXRNYXBwaW5nUmVwb3NpdG9yeUluc3RhbmNlKCkuZ2V0\nTWFwcGluZw0KICAgICAgICAgICAgICAgIChKb2luVGFibGVNYXBQQy5jbGFz\ncywgbnVsbCwgdHJ1ZSk7DQogICAgICAgIEZpZWxkTWFwcGluZyBtYXAgPSBw\nYy5nZXRGaWVsZE1hcHBpbmcoImhlbHBlcnMiKTsNCiAgICAgICAgDQogICAg\nICAgIENsYXNzTWFwcGluZyBoZWxwZXIgPSBjb25mLmdldE1hcHBpbmdSZXBv\nc2l0b3J5SW5zdGFuY2UoKS5nZXRNYXBwaW5nDQogICAgICAgICAgICAgICAg\nKEhlbHBlclBDLmNsYXNzLCBudWxsLCB0cnVlKTsNCiAgICAgICAgRmllbGRN\nYXBwaW5nIHN0ciA9IGhlbHBlci5nZXRGaWVsZE1hcHBpbmcoInN0cmluZ0Zp\nZWxkIik7DQogICAgICAgIA0KICAgICAgICBhc3NlcnRFcXVhbHMoInN0cmlu\nZ0ZpZWxkIiwgbWFwLmdldEtleSgpLmdldFZhbHVlTWFwcGVkQnkoKSk7DQog\nICAgICAgIGFzc2VydEVxdWFscyhzdHIsIG1hcC5nZXRLZXkoKS5nZXRWYWx1\nZU1hcHBlZEJ5TWV0YURhdGEoKSk7DQogICAgICAgIGFzc2VydFRydWUobWFw\nLmdldFN0cmF0ZWd5KCkgaW5zdGFuY2VvZiBSZWxhdGlvbk1hcFRhYmxlRmll\nbGRTdHJhdGVneSk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCBtYXAuZ2V0\nS2V5TWFwcGluZygpLmdldENvbHVtbnMoKS5sZW5ndGgpOw0KICAgICAgICBh\nc3NlcnRFcXVhbHMobWFwLmdldEtleU1hcHBpbmcoKS5nZXRDb2x1bW5zKClb\nMF0sDQogICAgICAgICAgICAgICAgc3RyLmdldENvbHVtbnMoKVswXSk7DQog\nICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RJbnZlcnNlS2V5TWFw\nKCkgew0KICAgICAgICBtYXBwZWRCeU1hcChuZXcgSW52ZXJzZUtleU1hcFBD\nKCksIGZhbHNlKTsNCiAgICAgICAgcXVlcnlNYXAobmV3IEludmVyc2VLZXlN\nYXBQQygpKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdElu\ndmVyc2VLZXlMUlNNYXAoKSB7DQogICAgICAgIG1hcHBlZEJ5TWFwKG5ldyBJ\nbnZlcnNlS2V5TWFwUEMoKSwgdHJ1ZSk7DQogICAgfQ0KICAgIA0KICAgIHB1\nYmxpYyB2b2lkIHRlc3RKb2luVGFibGVNYXAoKSB7DQogICAgICAgIG1hcHBl\nZEJ5TWFwKG5ldyBKb2luVGFibGVNYXBQQygpLCBmYWxzZSk7DQogICAgICAg\nIHF1ZXJ5TWFwKG5ldyBKb2luVGFibGVNYXBQQygpKTsNCiAgICB9DQogICAg\nDQogICAgcHVibGljIHZvaWQgdGVzdEpvaW5UYWJsZUxSU01hcCgpIHsNCiAg\nICAgICAgbWFwcGVkQnlNYXAobmV3IEpvaW5UYWJsZU1hcFBDKCksIHRydWUp\nOw0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZvaWQgbWFwcGVkQnlNYXAo\nTWFwcGVkQnlNYXBQQyBwYywgYm9vbGVhbiBscnMpIHsNCiAgICAgICBkZWxl\ndGVBbGwoSGVscGVyUEMuY2xhc3MpOw0KICAgICAgIGRlbGV0ZUFsbChwYy5n\nZXRDbGFzcygpKTsNCiAgICAgICAgDQogICAgICAgIEhlbHBlclBDIGgxID0g\nbmV3IEhlbHBlclBDKCk7DQogICAgICAgIGgxLnNldFN0cmluZ0ZpZWxkKCJo\nMSIpOw0KICAgICAgICBwYy5nZXRIZWxwZXJzKCkucHV0KGgxLmdldFN0cmlu\nZ0ZpZWxkKCksIGgxKTsNCiAgICAgICAgSGVscGVyUEMgaDIgPSBuZXcgSGVs\ncGVyUEMoKTsNCiAgICAgICAgaDIuc2V0U3RyaW5nRmllbGQoImgyIik7DQog\nICAgICAgIHBjLmdldEhlbHBlcnMoKS5wdXQoaDIuZ2V0U3RyaW5nRmllbGQo\nKSwgaDIpOw0KICAgICAgICBIZWxwZXJQQyBoMyA9IG5ldyBIZWxwZXJQQygp\nOw0KICAgICAgICBoMy5zZXRTdHJpbmdGaWVsZCgiaDMiKTsNCiAgICAgICAg\ncGMuZ2V0SGVscGVycygpLnB1dChoMy5nZXRTdHJpbmdGaWVsZCgpLCBoMyk7\nDQogICAgICAgIA0KICAgICAgICBzZXRMUlMocGMuZ2V0Q2xhc3MoKSwgbHJz\nKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWN1cnJlbnRFbnRp\ndHlNYW5hZ2VyKCk7DQogICAgICAgICAgICBzdGFydFR4KHBtKTs7DQogICAg\nICAgICAgICBwbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgICAgIGVuZFR4KHBt\nKTs7DQogICAgICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQo\ncGMpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBhc3NlcnRGYWxzZShw\nYy5nZXRIZWxwZXJzKCkuY29udGFpbnNLZXkoImZvbyIpKTsNCiAgICAgICAg\nICAgIGFzc2VydE51bGwocGMuZ2V0SGVscGVycygpLmdldCgiZm9vIikpOw0K\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIHBjLmdldEhlbHBlcnMoKS5z\naXplKCkpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGgxLCBwYy5nZXRI\nZWxwZXJzKCkuZ2V0KCJoMSIpKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncyhoMiwgcGMuZ2V0SGVscGVycygpLmdldCgiaDIiKSk7DQogICAgICAgICAg\nICBwbS5jbG9zZSgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBwbSA9\nIChPcGVuSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigp\nOzsNCiAgICAgICAgICAgIHBjID0gKE1hcHBlZEJ5TWFwUEMpIHBtLmdldE9i\namVjdElkKG9pZCk7DQogICAgICAgICAgICBpZiAobHJzKQ0KICAgICAgICAg\nICAgICAgIGFzc2VydFRydWUocGMuZ2V0SGVscGVycygpIGluc3RhbmNlb2Yg\nQWJzdHJhY3RMUlNQcm94eU1hcCk7DQogICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoMywgcGMuZ2V0SGVscGVycygpLnNpemUoKSk7DQogICAgICAgICAgICBh\nc3NlcnRGYWxzZShwYy5nZXRIZWxwZXJzKCkuY29udGFpbnNLZXkoImZvbyIp\nKTsNCiAgICAgICAgICAgIGFzc2VydE51bGwocGMuZ2V0SGVscGVycygpLmdl\ndCgiZm9vIikpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJoMSIsICgo\nSGVscGVyUEMpIHBjLmdldEhlbHBlcnMoKS5nZXQoImgxIikpLg0KICAgICAg\nICAgICAgICAgICAgICBnZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAgICAg\nIGFzc2VydEVxdWFscygiaDIiLCAoKEhlbHBlclBDKSBwYy5nZXRIZWxwZXJz\nKCkuZ2V0KCJoMiIpKS4NCiAgICAgICAgICAgICAgICAgICAgZ2V0U3RyaW5n\nRmllbGQoKSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHBtLmJlZ2lu\nKCk7DQogICAgICAgICAgICBwYy5nZXRIZWxwZXJzKCkucmVtb3ZlKCJoMSIp\nOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldEhlbHBlcnMo\nKS5zaXplKCkpOw0KICAgICAgICAgICAgYXNzZXJ0RmFsc2UocGMuZ2V0SGVs\ncGVycygpLmNvbnRhaW5zS2V5KCJoMSIpKTsNCiAgICAgICAgICAgIGFzc2Vy\ndE51bGwocGMuZ2V0SGVscGVycygpLmdldCgiaDEiKSk7DQogICAgICAgICAg\nICBIZWxwZXJQQyBoNCA9IG5ldyBIZWxwZXJQQygpOw0KICAgICAgICAgICAg\naDQuc2V0U3RyaW5nRmllbGQoImg0Iik7DQogICAgICAgICAgICBwYy5nZXRI\nZWxwZXJzKCkucHV0KCJoNCIsIGg0KTsNCiAgICAgICAgICAgIGFzc2VydFRy\ndWUocGMuZ2V0SGVscGVycygpLmNvbnRhaW5zS2V5KCJoNCIpKTsNCiAgICAg\nICAgICAgIGFzc2VydEVxdWFscyhoNCwgcGMuZ2V0SGVscGVycygpLmdldCgi\naDQiKSk7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMywgcGMuZ2V0SGVs\ncGVycygpLnNpemUoKSk7DQogICAgICAgICAgICBwbS5jb21taXQoKTsNCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscygzLCBwYy5nZXRIZWxwZXJzKCkuc2l6\nZSgpKTsNCiAgICAgICAgICAgIGFzc2VydEZhbHNlKHBjLmdldEhlbHBlcnMo\nKS5jb250YWluc0tleSgiaDEiKSk7DQogICAgICAgICAgICBhc3NlcnROdWxs\nKHBjLmdldEhlbHBlcnMoKS5nZXQoImgxIikpOw0KICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJoMiIsICgoSGVscGVyUEMpIHBjLmdldEhlbHBlcnMoKS5n\nZXQoImgyIikpLg0KICAgICAgICAgICAgICAgICAgICBnZXRTdHJpbmdGaWVs\nZCgpKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygiaDQiLCAoKEhlbHBl\nclBDKSBwYy5nZXRIZWxwZXJzKCkuZ2V0KCJoNCIpKS4NCiAgICAgICAgICAg\nICAgICAgICAgZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAgICAgICBwbS5j\nbG9zZSgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBwbSA9IChPcGVu\nSlBBRW50aXR5TWFuYWdlciljdXJyZW50RW50aXR5TWFuYWdlcigpOzsNCiAg\nICAgICAgICAgIHBjID0gKE1hcHBlZEJ5TWFwUEMpIHBtLmdldE9iamVjdElk\nKG9pZCk7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMywgcGMuZ2V0SGVs\ncGVycygpLnNpemUoKSk7DQogICAgICAgICAgICBhc3NlcnRGYWxzZShwYy5n\nZXRIZWxwZXJzKCkuY29udGFpbnNLZXkoImgxIikpOw0KICAgICAgICAgICAg\nYXNzZXJ0TnVsbChwYy5nZXRIZWxwZXJzKCkuZ2V0KCJoMSIpKTsNCiAgICAg\nICAgICAgIGFzc2VydEVxdWFscygiaDIiLCAoKEhlbHBlclBDKSBwYy5nZXRI\nZWxwZXJzKCkuZ2V0KCJoMiIpKS4NCiAgICAgICAgICAgICAgICAgICAgZ2V0\nU3RyaW5nRmllbGQoKSk7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoImg0\nIiwgKChIZWxwZXJQQykgcGMuZ2V0SGVscGVycygpLmdldCgiaDQiKSkuDQog\nICAgICAgICAgICAgICAgICAgIGdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAg\nICAgICAgDQogICAgICAgICAgICAvLyB0byB0ZXN0IGxycyBmdW5jdGlvbnMN\nCiAgICAgICAgICAgIGFzc2VydFRydWUocGMuZ2V0SGVscGVycygpLmNvbnRh\naW5zVmFsdWUNCiAgICAgICAgICAgICAgICAgICAgKHBjLmdldEhlbHBlcnMo\nKS5nZXQoImgyIikpKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgU2V0\nIGtleVNldCA9IHBjLmdldEhlbHBlcnMoKS5rZXlTZXQoKTsNCiAgICAgICAg\nICAgIFNldCBvcmRlcmVkID0gbmV3IFRyZWVTZXQoKTsNCiAgICAgICAgICAg\nIGFzc2VydEVxdWFscygzLCBrZXlTZXQuc2l6ZSgpKTsNCiAgICAgICAgICAg\nIEl0ZXJhdG9yIGl0ciA9IGtleVNldC5pdGVyYXRvcigpOw0KICAgICAgICAg\nICAgd2hpbGUgKGl0ci5oYXNOZXh0KCkpDQogICAgICAgICAgICAgICAgb3Jk\nZXJlZC5hZGQoaXRyLm5leHQoKSk7DQogICAgICAgICAgICAvL0ZJWE1FIGp0\naG9tYXMNCiAgICAgICAgICAgIC8vS29kb0pET0hlbHBlci5jbG9zZShpdHIp\nOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIG9yZGVyZWQuc2l6ZSgp\nKTsNCiAgICAgICAgICAgIGFzc2VydFRydWUob3JkZXJlZC5jb250YWlucygi\naDIiKSk7DQogICAgICAgICAgICBhc3NlcnRUcnVlKG9yZGVyZWQuY29udGFp\nbnMoImgzIikpOw0KICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvcmRlcmVkLmNv\nbnRhaW5zKCJoNCIpKTsNCiAgICAgICAgICAgIG9yZGVyZWQuY2xlYXIoKTsN\nCiAgICAgICAgICAgIA0KICAgICAgICAgICAgQ29sbGVjdGlvbiB2YWx1ZXMg\nPSBwYy5nZXRIZWxwZXJzKCkudmFsdWVzKCk7DQogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoMywgdmFsdWVzLnNpemUoKSk7DQogICAgICAgICAgICBpdHIg\nPSB2YWx1ZXMuaXRlcmF0b3IoKTsNCiAgICAgICAgICAgIHdoaWxlIChpdHIu\naGFzTmV4dCgpKSB7DQogICAgICAgICAgICAgICAgT2JqZWN0IG5leHQgPSBp\ndHIubmV4dCgpOw0KICAgICAgICAgICAgICAgIGFzc2VydFRydWUobmV4dCBp\nbnN0YW5jZW9mIEhlbHBlclBDKTsNCiAgICAgICAgICAgICAgICBvcmRlcmVk\nLmFkZCgoKEhlbHBlclBDKSBuZXh0KS5nZXRTdHJpbmdGaWVsZCgpKTsNCiAg\nICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vRklYTUUganRob21hcw0KICAg\nICAgICAgICAgLy9Lb2RvSkRPSGVscGVyLmNsb3NlKGl0cik7DQogICAgICAg\nICAgICBhc3NlcnRFcXVhbHMoMywgb3JkZXJlZC5zaXplKCkpOw0KICAgICAg\nICAgICAgYXNzZXJ0VHJ1ZShvcmRlcmVkLmNvbnRhaW5zKCJoMiIpKTsNCiAg\nICAgICAgICAgIGFzc2VydFRydWUob3JkZXJlZC5jb250YWlucygiaDMiKSk7\nDQogICAgICAgICAgICBhc3NlcnRUcnVlKG9yZGVyZWQuY29udGFpbnMoImg0\nIikpOw0KICAgICAgICAgICAgcG0uY2xvc2UoKTsNCiAgICAgICAgfSBmaW5h\nbGx5IHsNCiAgICAgICAgICAgIHVuc2V0TFJTKHBjLmdldENsYXNzKCkpOw0K\nICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIHByaXZhdGUgdm9pZCBxdWVy\neU1hcChNYXBwZWRCeU1hcFBDIHBjKSB7DQogICAgICAgIEhlbHBlclBDIGg1\nID0gbmV3IEhlbHBlclBDKCk7DQogICAgICAgIGg1LnNldFN0cmluZ0ZpZWxk\nKCJoNSIpOw0KICAgICAgICBwYy5nZXRIZWxwZXJzKCkucHV0KCJoNSIsIGg1\nKTsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAg\nICAgcG0uYmVnaW4oKTsNCiAgICAgICAgcG0ucGVyc2lzdChwYyk7DQogICAg\nICAgIHBtLmNvbW1pdCgpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgICAg\nICANCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTs7DQogICAgICAgIE9wZW5KUEFRdWVyeSBxID0g\ncG0uY3JlYXRlTmF0aXZlUXVlcnkoInN0cmluZ0ZpZWxkID09ICdoMiciLEhl\nbHBlclBDLmNsYXNzKTsNCiAgICAgICAgLy9GSVhNRSBqdGhvbWFzDQogICAg\nICAgIC8vcS5zZXRVbmlxdWUodHJ1ZSk7DQogICAgICAgIEhlbHBlclBDIGgy\nID0gKEhlbHBlclBDKSBxLmdldFNpbmdsZVJlc3VsdCgpOw0KICAgICAgICAN\nCiAgICAgICAgcSA9IHBtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJoZWxwZXJzLmNv\nbnRhaW5zS2V5ICgnaDInKSIscGMuZ2V0Q2xhc3MoKSk7DQogICAgICAgIC8v\nRklYTUUganRob21hcw0KICAgICAgICAvL3Euc2V0VW5pcXVlKHRydWUpOw0K\nICAgICAgICBwYyA9IChNYXBwZWRCeU1hcFBDKSBxLmdldFNpbmdsZVJlc3Vs\ndCgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMywgcGMuZ2V0SGVscGVycygp\nLnNpemUoKSk7DQogICAgICAgIGFzc2VydEVxdWFscyhoMiwgcGMuZ2V0SGVs\ncGVycygpLmdldCgiaDIiKSk7DQogICAgICAgIA0KICAgICAgICBxID0gcG0u\nY3JlYXRlTmF0aXZlUXVlcnkoImhlbHBlcnMuY29udGFpbnNWYWx1ZSAoOmgy\nKSIscGMuZ2V0Q2xhc3MoKSk7DQogICAgICAgIC8vRklYTUUgIGp0aG9tYXMN\nCiAgICAgICAgLy9xLnNldFVuaXF1ZSh0cnVlKTsNCiAgICAgICAgcGMgPSAo\nTWFwcGVkQnlNYXBQQykgcS5nZXRTaW5nbGVSZXN1bHQoKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDMsIHBjLmdldEhlbHBlcnMoKS5zaXplKCkpOw0KICAg\nICAgICBhc3NlcnRFcXVhbHMoaDIsIHBjLmdldEhlbHBlcnMoKS5nZXQoImgy\nIikpOw0KICAgICAgICBwbS5jbG9zZSgpOw0KICAgIH0NCiAgICANCiAgICBw\ncml2YXRlIHZvaWQgc2V0TFJTKENsYXNzIGNscywgYm9vbGVhbiBscnMpIHsN\nCiAgICAgICAgQ2xhc3NNYXBwaW5nIGNtID0gKChKREJDQ29uZmlndXJhdGlv\nbikgZ2V0Q29uZmlndXJhdGlvbigpKS4NCiAgICAgICAgICAgICAgICBnZXRN\nYXBwaW5nUmVwb3NpdG9yeUluc3RhbmNlKCkuZ2V0TWFwcGluZyhjbHMsIG51\nbGwsIHRydWUpOw0KICAgICAgICBjbS5nZXRGaWVsZE1hcHBpbmcoImhlbHBl\ncnMiKS5zZXRMUlMobHJzKTsNCiAgICB9DQogICAgDQogICAgcHJpdmF0ZSB2\nb2lkIHVuc2V0TFJTKENsYXNzIGNscykgew0KICAgICAgICBDbGFzc01hcHBp\nbmcgY20gPSAoKEpEQkNDb25maWd1cmF0aW9uKSBnZXRDb25maWd1cmF0aW9u\nKCkpLg0KICAgICAgICAgICAgICAgIGdldE1hcHBpbmdSZXBvc2l0b3J5SW5z\ndGFuY2UoKS5nZXRNYXBwaW5nKGNscywgbnVsbCwgdHJ1ZSk7DQogICAgICAg\nIGNtLmdldEZpZWxkTWFwcGluZygiaGVscGVycyIpLnNldExSUyhmYWxzZSk7\nDQogICAgfQ0KICAgIA0KfQ0K\n","encoding":"base64"}

