{"sha":"c488c072b0a15848ea33dd1f8504a72ccc2af80a","node_id":"MDQ6QmxvYjIwNjM2NDpjNDg4YzA3MmIwYTE1ODQ4ZWEzM2RkMWY4NTA0YTcyY2NjMmFmODBh","size":16093,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c488c072b0a15848ea33dd1f8504a72ccc2af80a","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2Uua2VybmVsOw0KDQppbXBvcnQgamF2YS5sYW5nLnJlZmxl\nY3QuQXJyYXk7DQppbXBvcnQgamF2YS50ZXh0LkNvbGxhdG9yOw0KaW1wb3J0\nIGphdmEudXRpbC5BcnJheXM7DQppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0\nb3I7DQppbXBvcnQgamF2YS51dGlsLkRhdGU7DQoNCg0KaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMu\nQXJyYXlzVGVzdDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7DQppbXBvcnQg\nanVuaXQuZnJhbWV3b3JrLkFzc2VydGlvbkZhaWxlZEVycm9yOw0KaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5\nTWFuYWdlcjsNCg0KLyoqDQogKiBUZXN0IHZhcnlpbmcga2luZHMgb2YgYXJy\nYXkgdmFsdWVzLg0KICoNCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4\nDQogKiBAYXV0aG9yIEFiZSBXaGl0ZQ0KICovDQpwdWJsaWMgY2xhc3MgVGVz\ndEFycmF5VmFsdWVzMiBleHRlbmRzIEJhc2VLZXJuZWxUZXN0IHsNCg0KICAg\nIHByaXZhdGUgc3RhdGljIGRvdWJsZSBET1VCTEVfUFJFQ0lTSU9OID0gMC4w\nMUQ7DQogICAgcHVibGljIHN0YXRpYyBmbG9hdCBGTE9BVF9QUkVDSVNJT04g\nPSAwLjAxRjsNCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RTdHJpbmdBcnJheSgp\nDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBpbnQgbWF4\nID0gKChpbnQpIChNYXRoLnJhbmRvbSgpICogMjApKSArIDU7DQogICAgICAg\nIFN0cmluZ1tdIGFycmF5ID0gbmV3IFN0cmluZ1ttYXhdOw0KICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IG1heDsgaSsrKQ0KICAgICAgICAgICAgYXJy\nYXlbaV0gPSByYW5kb21TdHJpbmcoKTsNCiAgICAgICAgc2F2ZUFycmF5KGFy\ncmF5LCBmYWxzZSwgZmFsc2UpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIHRlc3RMb25nQXJyYXkoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsN\nCiAgICAgICAgaW50IG1heCA9ICgoaW50KSAoTWF0aC5yYW5kb20oKSAqIDIw\nKSkgKyA1Ow0KICAgICAgICBMb25nW10gYXJyYXkgPSBuZXcgTG9uZ1ttYXhd\nOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1heDsgaSsrKQ0KICAg\nICAgICAgICAgYXJyYXlbaV0gPSByYW5kb21Mb25nKCk7DQogICAgICAgIHRy\neSB7DQogICAgICAgICAgICBzYXZlQXJyYXkoYXJyYXksIGZhbHNlLCBmYWxz\nZSk7DQogICAgICAgIH0gY2F0Y2ggKEFzc2VydGlvbkZhaWxlZEVycm9yIGFm\nZSkgew0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVz\ndExvbmdQcmltaXRpdmVBcnJheSgpDQogICAgICAgIHRocm93cyBFeGNlcHRp\nb24gew0KICAgICAgICBpbnQgbWF4ID0gKChpbnQpIChNYXRoLnJhbmRvbSgp\nICogMjApKSArIDU7DQogICAgICAgIGxvbmdbXSBhcnJheSA9IG5ldyBsb25n\nW21heF07DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWF4OyBpKysp\nDQogICAgICAgICAgICBhcnJheVtpXSA9IHJhbmRvbUxvbmcoKS5sb25nVmFs\ndWUoKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHNhdmVBcnJheShh\ncnJheSwgdHJ1ZSwgZmFsc2UpOw0KICAgICAgICB9IGNhdGNoIChBc3NlcnRp\nb25GYWlsZWRFcnJvciBhZmUpIHsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAg\nIHB1YmxpYyB2b2lkIHRlc3RTaG9ydEFycmF5KCkNCiAgICAgICAgdGhyb3dz\nIEV4Y2VwdGlvbiB7DQogICAgICAgIGludCBtYXggPSAoKGludCkgKE1hdGgu\ncmFuZG9tKCkgKiAyMCkpICsgNTsNCiAgICAgICAgU2hvcnRbXSBhcnJheSA9\nIG5ldyBTaG9ydFttYXhdOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIG1heDsgaSsrKQ0KICAgICAgICAgICAgYXJyYXlbaV0gPSByYW5kb21TaG9y\ndCgpOw0KICAgICAgICBzYXZlQXJyYXkoYXJyYXksIGZhbHNlLCBmYWxzZSk7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFNob3J0UHJpbWl0aXZl\nQXJyYXkoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAg\naW50IG1heCA9ICgoaW50KSAoTWF0aC5yYW5kb20oKSAqIDIwKSkgKyA1Ow0K\nICAgICAgICBzaG9ydFtdIGFycmF5ID0gbmV3IHNob3J0W21heF07DQogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWF4OyBpKyspDQogICAgICAgICAg\nICBhcnJheVtpXSA9IHJhbmRvbVNob3J0KCkuc2hvcnRWYWx1ZSgpOw0KICAg\nICAgICBzYXZlQXJyYXkoYXJyYXksIHRydWUsIGZhbHNlKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW50QXJyYXkoKQ0KICAgICAgICB0aHJv\nd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgaW50IG1heCA9ICgoaW50KSAoTWF0\naC5yYW5kb20oKSAqIDIwKSkgKyA1Ow0KICAgICAgICBJbnRlZ2VyW10gYXJy\nYXkgPSBuZXcgSW50ZWdlclttYXhdOw0KICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IG1heDsgaSsrKQ0KICAgICAgICAgICAgYXJyYXlbaV0gPSByYW5k\nb21JbnQoKTsNCiAgICAgICAgc2F2ZUFycmF5KGFycmF5LCBmYWxzZSwgZmFs\nc2UpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RJbnRQcmltaXRp\ndmVBcnJheSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAg\nICBpbnQgbWF4ID0gKChpbnQpIChNYXRoLnJhbmRvbSgpICogMjApKSArIDU7\nDQogICAgICAgIGludFtdIGFycmF5ID0gbmV3IGludFttYXhdOw0KICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IG1heDsgaSsrKQ0KICAgICAgICAgICAg\nYXJyYXlbaV0gPSByYW5kb21JbnQoKS5pbnRWYWx1ZSgpOw0KICAgICAgICBz\nYXZlQXJyYXkoYXJyYXksIHRydWUsIGZhbHNlKTsNCiAgICB9DQovLyBGaXhN\nZTogQm90aCB0ZXN0cyBoYW5ncyBvbiBNeXNxbA0KICAgIC8qcHVibGljIHZv\naWQgdGVzdEJ5dGVBcnJheSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24g\new0KICAgICAgICBpbnQgbWF4ID0gKChpbnQpIChNYXRoLnJhbmRvbSgpICog\nMjApKSArIDU7DQogICAgICAgIEJ5dGVbXSBhcnJheSA9IG5ldyBCeXRlW21h\neF07DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWF4OyBpKyspDQog\nICAgICAgICAgICBhcnJheVtpXSA9IHJhbmRvbUJ5dGUoKTsNCiAgICAgICAg\nc2F2ZUFycmF5KGFycmF5LCBmYWxzZSwgZmFsc2UpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyB2b2lkIHRlc3RCeXRlUHJpbWl0aXZlQXJyYXkoKQ0KICAgICAg\nICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgaW50IG1heCA9ICgoaW50\nKSAoTWF0aC5yYW5kb20oKSAqIDIwKSkgKyA1Ow0KICAgICAgICBieXRlW10g\nYXJyYXkgPSBuZXcgYnl0ZVttYXhdOw0KICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IG1heDsgaSsrKQ0KICAgICAgICAgICAgYXJyYXlbaV0gPSByYW5k\nb21CeXRlKCkuYnl0ZVZhbHVlKCk7DQogICAgICAgIHNhdmVBcnJheShhcnJh\neSwgdHJ1ZSwgZmFsc2UpOw0KICAgIH0qLw0KDQogICAgcHVibGljIHZvaWQg\ndGVzdEJvb2xlYW5BcnJheSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24g\new0KICAgICAgICBpbnQgbWF4ID0gKChpbnQpIChNYXRoLnJhbmRvbSgpICog\nMjApKSArIDU7DQogICAgICAgIEJvb2xlYW5bXSBhcnJheSA9IG5ldyBCb29s\nZWFuW21heF07DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWF4OyBp\nKyspDQogICAgICAgICAgICBhcnJheVtpXSA9IHJhbmRvbUJvb2xlYW4oKTsN\nCiAgICAgICAgc2F2ZUFycmF5KGFycmF5LCBmYWxzZSwgZmFsc2UpOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RDaGFyYWN0ZXJBcnJheSgpDQog\nICAgICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBpbnQgbWF4ID0g\nKChpbnQpIChNYXRoLnJhbmRvbSgpICogMjApKSArIDU7DQogICAgICAgIENo\nYXJhY3RlcltdIGFycmF5ID0gbmV3IENoYXJhY3RlclttYXhdOw0KICAgICAg\nICBhcnJheVswXSA9IG5ldyBDaGFyYWN0ZXIoKGNoYXIpIDEpOw0KICAgICAg\nICBmb3IgKGludCBpID0gMTsgaSA8IG1heDsgaSsrKQ0KICAgICAgICAgICAg\nYXJyYXlbaV0gPSByYW5kb21DaGFyKCk7DQogICAgICAgIHNhdmVBcnJheShh\ncnJheSwgZmFsc2UsIGZhbHNlKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0Q2hhcmFjdGVyUHJpbWl0aXZlQXJyYXkoKQ0KICAgICAgICB0aHJv\nd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgaW50IG1heCA9ICgoaW50KSAoTWF0\naC5yYW5kb20oKSAqIDIwKSkgKyA1Ow0KICAgICAgICBjaGFyW10gYXJyYXkg\nPSBuZXcgY2hhclttYXhdOw0KICAgICAgICBhcnJheVswXSA9IDE7DQogICAg\nICAgIGZvciAoaW50IGkgPSAxOyBpIDwgbWF4OyBpKyspDQogICAgICAgICAg\nICBhcnJheVtpXSA9IHJhbmRvbUNoYXIoKS5jaGFyVmFsdWUoKTsNCiAgICAg\nICAgc2F2ZUFycmF5KGFycmF5LCB0cnVlLCBmYWxzZSk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdENoYXJhY3RlclByaW1pdGl2ZUNsb2JBcnJh\neSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBpbnQg\nbWF4ID0gKChpbnQpIChNYXRoLnJhbmRvbSgpICogMjApKSArIDU7DQogICAg\nICAgIGNoYXJbXSBhcnJheSA9IG5ldyBjaGFyW21heF07DQogICAgICAgIGFy\ncmF5WzBdID0gMTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBtYXg7\nIGkrKykNCiAgICAgICAgICAgIGFycmF5W2ldID0gcmFuZG9tQ2hhcigpLmNo\nYXJWYWx1ZSgpOw0KICAgICAgICBzYXZlQXJyYXkoYXJyYXksIHRydWUsIHRy\ndWUpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RCb29sZWFuUHJp\nbWl0aXZlQXJyYXkoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAg\nICAgICAgaW50IG1heCA9ICgoaW50KSAoTWF0aC5yYW5kb20oKSAqIDIwKSkg\nKyA1Ow0KICAgICAgICBib29sZWFuW10gYXJyYXkgPSBuZXcgYm9vbGVhbltt\nYXhdOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1heDsgaSsrKQ0K\nICAgICAgICAgICAgYXJyYXlbaV0gPSByYW5kb21Cb29sZWFuKCkuYm9vbGVh\nblZhbHVlKCk7DQogICAgICAgIHNhdmVBcnJheShhcnJheSwgdHJ1ZSwgZmFs\nc2UpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RGbG9hdEFycmF5\nKCkNCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIGludCBt\nYXggPSAoKGludCkgKE1hdGgucmFuZG9tKCkgKiAyMCkpICsgNTsNCiAgICAg\nICAgRmxvYXRbXSBhcnJheSA9IG5ldyBGbG9hdFttYXhdOw0KICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IG1heDsgaSsrKQ0KICAgICAgICAgICAgYXJy\nYXlbaV0gPSByYW5kb21GbG9hdCgpOw0KICAgICAgICBzYXZlQXJyYXkoYXJy\nYXksIGZhbHNlLCBmYWxzZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\ndGVzdEZsb2F0UHJpbWl0aXZlQXJyYXkoKQ0KICAgICAgICB0aHJvd3MgRXhj\nZXB0aW9uIHsNCiAgICAgICAgaW50IG1heCA9ICgoaW50KSAoTWF0aC5yYW5k\nb20oKSAqIDIwKSkgKyA1Ow0KICAgICAgICBmbG9hdFtdIGFycmF5ID0gbmV3\nIGZsb2F0W21heF07DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWF4\nOyBpKyspDQogICAgICAgICAgICBhcnJheVtpXSA9IHJhbmRvbUZsb2F0KCku\nZmxvYXRWYWx1ZSgpOw0KICAgICAgICBzYXZlQXJyYXkoYXJyYXksIHRydWUs\nIGZhbHNlKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0RG91Ymxl\nQXJyYXkoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAg\naW50IG1heCA9ICgoaW50KSAoTWF0aC5yYW5kb20oKSAqIDIwKSkgKyA1Ow0K\nICAgICAgICBEb3VibGVbXSBhcnJheSA9IG5ldyBEb3VibGVbbWF4XTsNCiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtYXg7IGkrKykNCiAgICAgICAg\nICAgIGFycmF5W2ldID0gcmFuZG9tRG91YmxlKCk7DQogICAgICAgIHNhdmVB\ncnJheShhcnJheSwgZmFsc2UsIGZhbHNlKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCB0ZXN0RG91YmxlUHJpbWl0aXZlQXJyYXkoKQ0KICAgICAgICB0\naHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgaW50IG1heCA9ICgoaW50KSAo\nTWF0aC5yYW5kb20oKSAqIDIwKSkgKyA1Ow0KICAgICAgICBkb3VibGVbXSBh\ncnJheSA9IG5ldyBkb3VibGVbbWF4XTsNCiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBtYXg7IGkrKykNCiAgICAgICAgICAgIGFycmF5W2ldID0gcmFu\nZG9tRG91YmxlKCkuZG91YmxlVmFsdWUoKTsNCiAgICAgICAgc2F2ZUFycmF5\nKGFycmF5LCB0cnVlLCBmYWxzZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgdGVzdERhdGVBcnJheSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24g\new0KICAgICAgICBpbnQgbWF4ID0gKChpbnQpIChNYXRoLnJhbmRvbSgpICog\nMjApKSArIDU7DQogICAgICAgIERhdGVbXSBhcnJheSA9IG5ldyBEYXRlW21h\neF07DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWF4OyBpKyspDQog\nICAgICAgICAgICBhcnJheVtpXSA9IHJhbmRvbURhdGUoKTsNCiAgICAgICAg\nc2F2ZUFycmF5KGFycmF5LCBmYWxzZSwgZmFsc2UpOw0KICAgIH0NCg0KICAg\nIC8qRml4IE1lIGFva2VrZSAtIFRha2VzIGEgbG90IG9mIHRpbWUgdG8gcnVu\nICovDQovLyAgICBwdWJsaWMgdm9pZCB0ZXN0Rmlyc3RDbGFzc09iamVjdEFy\ncmF5KCl0aHJvd3MgRXhjZXB0aW9uIA0KLy8gICAgew0KLy8gICAgICAgIGlu\ndCBtYXggPSAoKGludCkgKE1hdGgucmFuZG9tKCkgKiAyMCkpICsgNTsNCi8v\nICAgICAgICBBcnJheXNUZXN0W10gYXJyYXkgPSBuZXcgQXJyYXlzVGVzdFtt\nYXhdOw0KLy8gICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWF4OyBpKysp\nDQovLyAgICAgICAgICAgIGFycmF5W2ldID0gbmV3IEFycmF5c1Rlc3QoKTsN\nCi8vICAgICAgICBzYXZlQXJyYXkoYXJyYXksIGZhbHNlLCBmYWxzZSk7DQov\nLyAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgc2F2ZUFycmF5KE9iamVjdCBh\ncnJheSwgYm9vbGVhbiBwcmltaXRpdmUsIGJvb2xlYW4gbG9iKQ0KICAgICAg\nICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAg\nICAgIHNhdmVBcnJheUludGVybmFsKGFycmF5LCBwcmltaXRpdmUsIGxvYik7\nDQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAg\nICB0aHJvdyBlOw0KICAgICAgICB9IGNhdGNoIChFcnJvciBlcnJvcikgew0K\nICAgICAgICAgICAgdGhyb3cgZXJyb3I7DQogICAgICAgIH0gZmluYWxseSB7\nDQogICAgICAgICAgICAvLw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJp\ndmF0ZSB2b2lkIHNhdmVBcnJheUludGVybmFsKE9iamVjdCB2YWxzLCBib29s\nZWFuIHByaW1pdGl2ZSwgYm9vbGVhbiBsb2IpDQogICAgICAgIHRocm93cyBF\neGNlcHRpb24gew0KICAgICAgICBPYmplY3RbXSBhcnJheTsNCiAgICAgICAg\naWYgKHByaW1pdGl2ZSkNCiAgICAgICAgICAgIGFycmF5ID0gY29udmVydFBy\naW1pdGl2ZUFycmF5KHZhbHMpOw0KICAgICAgICBlbHNlDQogICAgICAgICAg\nICBhcnJheSA9IChPYmplY3RbXSkgdmFsczsNCiAgICAgICAgQXJyYXlzLnNv\ncnQoYXJyYXksIG5ldyBUZXN0QXJyYXlTb3J0ZXIoKSk7DQoNCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPQ0KICAgICAgICAgICAgKE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAg\nICAgICBzdGFydFR4KHBtKTsNCg0KICAgICAgICBBcnJheXNUZXN0IHRlc3Qg\nPSBuZXcgQXJyYXlzVGVzdCgpOw0KICAgICAgICBwbS5wZXJzaXN0KHRlc3Qp\nOw0KICAgICAgICBpbnQgdGVzdElEID0gdGVzdC5nZXRJZCgpOw0KDQogICAg\nICAgIHNldEdldFRlc3RBcnJheSh0ZXN0LCB2YWxzLCBwcmltaXRpdmUsIGxv\nYiwgdHJ1ZSk7DQogICAgICAgIGVuZFR4KHBtKTsNCg0KICAgICAgICBwbSA9\nIChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIo\nKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIEFycmF5c1Rlc3Qg\ncmV0cmlldmVkT2JqZWN0ID0gcG0uZmluZChBcnJheXNUZXN0LmNsYXNzLCB0\nZXN0SUQpOw0KDQogICAgICAgIE9iamVjdCByZXRyaWV2ZWRWYWxzID0gc2V0\nR2V0VGVzdEFycmF5KHJldHJpZXZlZE9iamVjdCwgdmFscywNCiAgICAgICAg\nICAgIHByaW1pdGl2ZSwgbG9iLCBmYWxzZSk7DQogICAgICAgIE9iamVjdFtd\nIHJldHJpZXZlZEFycmF5Ow0KICAgICAgICBpZiAocHJpbWl0aXZlKQ0KICAg\nICAgICAgICAgcmV0cmlldmVkQXJyYXkgPSBjb252ZXJ0UHJpbWl0aXZlQXJy\nYXkocmV0cmlldmVkVmFscyk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAg\nIHJldHJpZXZlZEFycmF5ID0gKE9iamVjdFtdKSByZXRyaWV2ZWRWYWxzOw0K\nDQogICAgICAgIGFzc2VydE5vdE51bGwocmV0cmlldmVkQXJyYXkpOw0KICAg\nICAgICBhc3NlcnRUcnVlKGFycmF5Lmxlbmd0aCAhPSAwKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKGFycmF5Lmxlbmd0aCwgcmV0cmlldmVkQXJyYXkubGVu\nZ3RoKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVsbChhcnJheVswXSk7DQogICAg\nICAgIGFzc2VydE5vdE51bGwocmV0cmlldmVkQXJyYXlbMF0pOw0KDQogICAg\nICAgIC8vIG1ha2Ugc3VyZSB0aGUgY2xhc3NlcyBvZiB0aGUga2V5cyBhcmUg\ndGhlIHNhbWUuDQogICAgICAgIGFzc2VydEVxdWFscyhhcnJheVswXS5nZXRD\nbGFzcygpLCByZXRyaWV2ZWRBcnJheVswXS5nZXRDbGFzcygpKTsNCiAgICAg\nICAgQXJyYXlzLnNvcnQocmV0cmlldmVkQXJyYXksIG5ldyBUZXN0QXJyYXlT\nb3J0ZXIoKSk7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYXJyYXku\nbGVuZ3RoOyBpKyspDQogICAgICAgICAgICBhc3NlcnRDbGFzc0FuZFZhbHVl\nRXF1YWxzKGFycmF5W2ldLCByZXRyaWV2ZWRBcnJheVtpXSk7DQoNCiAgICAg\nICAgcG0ucmVtb3ZlKHJldHJpZXZlZE9iamVjdCk7DQogICAgICAgIGVuZFR4\nKHBtKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIE9iamVjdFtdIGNvbnZlcnRQ\ncmltaXRpdmVBcnJheShPYmplY3QgYXJyYXkpIHRocm93cyBFeGNlcHRpb24g\new0KICAgICAgICBpbnQgbGVuZ3RoID0gQXJyYXkuZ2V0TGVuZ3RoKGFycmF5\nKTsNCiAgICAgICAgQ2xhc3MgdHlwZSA9IEFycmF5LmdldChhcnJheSwgMCku\nZ2V0Q2xhc3MoKTsNCg0KICAgICAgICBPYmplY3RbXSBjb3B5ID0gKE9iamVj\ndFtdKSBBcnJheS5uZXdJbnN0YW5jZSh0eXBlLCBsZW5ndGgpOw0KICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKQ0KICAgICAgICAg\nICAgY29weVtpXSA9IEFycmF5LmdldChhcnJheSwgaSk7DQoNCiAgICAgICAg\ncmV0dXJuIGNvcHk7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIGFzc2Vy\ndENsYXNzQW5kVmFsdWVFcXVhbHMoT2JqZWN0IG8xLCBPYmplY3QgbzIpIHsN\nCiAgICAgICAgYXNzZXJ0VHJ1ZSgiRmlyc3Qgb2JqZWN0IHdhcyBudWxsIiwg\nbzEgIT0gbnVsbCk7DQogICAgICAgIGFzc2VydFRydWUoIlNlY29uZCBvYmpl\nY3Qgd2FzIG51bGwiLCBvMiAhPSBudWxsKTsNCg0KICAgICAgICBhc3NlcnRU\ncnVlKCJUeXBlcyBkaWQgbm90IG1hdGNoIChjbGFzczE9Ig0KICAgICAgICAg\nICAgKyBvMS5nZXRDbGFzcygpLmdldE5hbWUoKSArICIsIGNsYXNzMj0iDQog\nICAgICAgICAgICArIG8yLmdldENsYXNzKCkuZ2V0TmFtZSgpICsgIikiLA0K\nICAgICAgICAgICAgbzEuZ2V0Q2xhc3MoKS5pc0Fzc2lnbmFibGVGcm9tKG8y\nLmdldENsYXNzKCkpKTsNCg0KICAgICAgICAvLyBmbG9hdHMgYW5kIGRvdWJs\nZXMgYXJlIGEgbGl0dGxlIHNwZWNpYWw6IHdlIG9ubHkNCiAgICAgICAgLy8g\nY29tcGFyZSB0aGVtIHRvIGEgY2VydGFpbiBwcmVjaXNpb24sIGFmdGVyIHdo\naWNoDQogICAgICAgIC8vIHdlIGdpdmUgdXAuDQogICAgICAgIGlmIChvMSBp\nbnN0YW5jZW9mIERvdWJsZSkNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygo\nKERvdWJsZSkgbzEpLmRvdWJsZVZhbHVlKCksDQogICAgICAgICAgICAgICAg\nKChEb3VibGUpIG8yKS5kb3VibGVWYWx1ZSgpLA0KICAgICAgICAgICAgICAg\nIERPVUJMRV9QUkVDSVNJT04pOw0KICAgICAgICBlbHNlIGlmIChvMSBpbnN0\nYW5jZW9mIEZsb2F0KQ0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCgoRmxv\nYXQpIG8xKS5mbG9hdFZhbHVlKCksDQogICAgICAgICAgICAgICAgKChGbG9h\ndCkgbzIpLmZsb2F0VmFsdWUoKSwNCiAgICAgICAgICAgICAgICBGTE9BVF9Q\nUkVDSVNJT04pOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoIk9iamVjdCBkaWQgbm90IG1hdGNoIChjbGFzczE9Ig0KICAgICAg\nICAgICAgICAgICsgbzEuZ2V0Q2xhc3MoKS5nZXROYW1lKCkgKyAiLCBjbGFz\nczI9Ig0KICAgICAgICAgICAgICAgICsgbzIuZ2V0Q2xhc3MoKS5nZXROYW1l\nKCkgKyAiKSIsDQogICAgICAgICAgICAgICAgbzEsIG8yKTsNCiAgICB9DQoN\nCiAgICAvKioNCiAgICAgKiBHZW5lcmljIHNldHRlci9nZXR0ZXIgZm9yIHNl\ndHRpbmcgdGhlIGFycmF5Lg0KICAgICAqLw0KICAgIHByaXZhdGUgT2JqZWN0\nIHNldEdldFRlc3RBcnJheShBcnJheXNUZXN0IHRlc3QsIE9iamVjdCBhcnJh\neSwNCiAgICAgICAgYm9vbGVhbiBwcmltaXRpdmUsIGJvb2xlYW4gbG9iLCBi\nb29sZWFuIGRvU2V0KQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAg\nICAgICAgaWYgKGFycmF5ID09IG51bGwpDQogICAgICAgICAgICByZXR1cm4g\nbnVsbDsNCg0KICAgICAgICBPYmplY3QgZmlyc3QgPSBBcnJheS5nZXQoYXJy\nYXksIDApOw0KICAgICAgICBpZiAoZmlyc3QgaW5zdGFuY2VvZiBEYXRlKSB7\nDQogICAgICAgICAgICBpZiAoZG9TZXQpDQogICAgICAgICAgICAgICAgdGVz\ndC5zZXREYXRlKChEYXRlW10pIGFycmF5KTsNCiAgICAgICAgICAgIHJldHVy\nbiB0ZXN0LmdldERhdGUoKTsNCiAgICAgICAgfSBlbHNlIGlmIChmaXJzdCBp\nbnN0YW5jZW9mIFN0cmluZykgew0KICAgICAgICAgICAgaWYgKGRvU2V0KQ0K\nICAgICAgICAgICAgICAgIHRlc3Quc2V0U3RyaW5nKChTdHJpbmdbXSkgYXJy\nYXkpOw0KICAgICAgICAgICAgcmV0dXJuIHRlc3QuZ2V0U3RyaW5nKCk7DQog\nICAgICAgIH0gZWxzZSBpZiAoZmlyc3QgaW5zdGFuY2VvZiBDaGFyYWN0ZXIp\nIHsNCiAgICAgICAgICAgIGlmIChkb1NldCAmJiAhcHJpbWl0aXZlKQ0KICAg\nICAgICAgICAgICAgIHRlc3Quc2V0Q2hhcmFjdGVyKChDaGFyYWN0ZXJbXSkg\nYXJyYXkpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9TZXQgJiYgIWxvYikN\nCiAgICAgICAgICAgICAgICB0ZXN0LnNldENoYXJhY3RlclAoKGNoYXJbXSkg\nYXJyYXkpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9TZXQpDQogICAgICAg\nICAgICAgICAgdGVzdC5zZXRDaGFyYWN0ZXJQQ2xvYigoY2hhcltdKSBhcnJh\neSk7DQogICAgICAgICAgICBlbHNlIGlmICghcHJpbWl0aXZlKQ0KICAgICAg\nICAgICAgICAgIHJldHVybiB0ZXN0LmdldENoYXJhY3RlcigpOw0KICAgICAg\nICAgICAgZWxzZSBpZiAoIWxvYikNCiAgICAgICAgICAgICAgICByZXR1cm4g\ndGVzdC5nZXRDaGFyYWN0ZXJQKCk7DQogICAgICAgICAgICBlbHNlDQogICAg\nICAgICAgICAgICAgcmV0dXJuIHRlc3QuZ2V0Q2hhcmFjdGVyUENsb2IoKTsN\nCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9IGVsc2UgaWYg\nKGZpcnN0IGluc3RhbmNlb2YgRG91YmxlKSB7DQogICAgICAgICAgICBpZiAo\nZG9TZXQgJiYgIXByaW1pdGl2ZSkNCiAgICAgICAgICAgICAgICB0ZXN0LnNl\ndERvdWJsZSgoRG91YmxlW10pIGFycmF5KTsNCiAgICAgICAgICAgIGVsc2Ug\naWYgKGRvU2V0KQ0KICAgICAgICAgICAgICAgIHRlc3Quc2V0RG91YmxlUCgo\nZG91YmxlW10pIGFycmF5KTsNCiAgICAgICAgICAgIGVsc2UgaWYgKCFwcmlt\naXRpdmUpDQogICAgICAgICAgICAgICAgcmV0dXJuIHRlc3QuZ2V0RG91Ymxl\nKCk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmV0dXJu\nIHRlc3QuZ2V0RG91YmxlUCgpOw0KICAgICAgICAgICAgcmV0dXJuIG51bGw7\nDQogICAgICAgIH0gZWxzZSBpZiAoZmlyc3QgaW5zdGFuY2VvZiBCeXRlKSB7\nDQogICAgICAgICAgICBpZiAoZG9TZXQgJiYgIXByaW1pdGl2ZSkNCiAgICAg\nICAgICAgICAgICB0ZXN0LnNldEJ5dGUoKEJ5dGVbXSkgYXJyYXkpOw0KICAg\nICAgICAgICAgZWxzZSBpZiAoZG9TZXQpDQogICAgICAgICAgICAgICAgdGVz\ndC5zZXRCeXRlUCgoYnl0ZVtdKSBhcnJheSk7DQogICAgICAgICAgICBlbHNl\nIGlmICghcHJpbWl0aXZlKQ0KICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0\nLmdldEJ5dGUoKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAg\nICByZXR1cm4gdGVzdC5nZXRCeXRlUCgpOw0KICAgICAgICAgICAgcmV0dXJu\nIG51bGw7DQogICAgICAgIH0gZWxzZSBpZiAoZmlyc3QgaW5zdGFuY2VvZiBG\nbG9hdCkgew0KICAgICAgICAgICAgaWYgKGRvU2V0ICYmICFwcmltaXRpdmUp\nDQogICAgICAgICAgICAgICAgdGVzdC5zZXRGbG9hdCgoRmxvYXRbXSkgYXJy\nYXkpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9TZXQpDQogICAgICAgICAg\nICAgICAgdGVzdC5zZXRGbG9hdFAoKGZsb2F0W10pIGFycmF5KTsNCiAgICAg\nICAgICAgIGVsc2UgaWYgKCFwcmltaXRpdmUpDQogICAgICAgICAgICAgICAg\ncmV0dXJuIHRlc3QuZ2V0RmxvYXQoKTsNCiAgICAgICAgICAgIGVsc2UNCiAg\nICAgICAgICAgICAgICByZXR1cm4gdGVzdC5nZXRGbG9hdFAoKTsNCiAgICAg\nICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9IGVsc2UgaWYgKGZpcnN0\nIGluc3RhbmNlb2YgTG9uZykgew0KICAgICAgICAgICAgaWYgKGRvU2V0ICYm\nICFwcmltaXRpdmUpDQogICAgICAgICAgICAgICAgdGVzdC5zZXRMb25nKChM\nb25nW10pIGFycmF5KTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGRvU2V0KQ0K\nICAgICAgICAgICAgICAgIHRlc3Quc2V0TG9uZ1AoKGxvbmdbXSkgYXJyYXkp\nOw0KICAgICAgICAgICAgZWxzZSBpZiAoIXByaW1pdGl2ZSkNCiAgICAgICAg\nICAgICAgICByZXR1cm4gdGVzdC5nZXRMb25nKCk7DQogICAgICAgICAgICBl\nbHNlDQogICAgICAgICAgICAgICAgcmV0dXJuIHRlc3QuZ2V0TG9uZ1AoKTsN\nCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9IGVsc2UgaWYg\nKGZpcnN0IGluc3RhbmNlb2YgSW50ZWdlcikgew0KICAgICAgICAgICAgaWYg\nKGRvU2V0ICYmICFwcmltaXRpdmUpDQogICAgICAgICAgICAgICAgdGVzdC5z\nZXRJbnQoKEludGVnZXJbXSkgYXJyYXkpOw0KICAgICAgICAgICAgZWxzZSBp\nZiAoZG9TZXQpDQogICAgICAgICAgICAgICAgdGVzdC5zZXRJbnRQKChpbnRb\nXSkgYXJyYXkpOw0KICAgICAgICAgICAgZWxzZSBpZiAoIXByaW1pdGl2ZSkN\nCiAgICAgICAgICAgICAgICByZXR1cm4gdGVzdC5nZXRJbnQoKTsNCiAgICAg\nICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gdGVzdC5nZXRJ\nbnRQKCk7DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfSBl\nbHNlIGlmIChmaXJzdCBpbnN0YW5jZW9mIFNob3J0KSB7DQogICAgICAgICAg\nICBpZiAoZG9TZXQgJiYgIXByaW1pdGl2ZSkNCiAgICAgICAgICAgICAgICB0\nZXN0LnNldFNob3J0KChTaG9ydFtdKSBhcnJheSk7DQogICAgICAgICAgICBl\nbHNlIGlmIChkb1NldCkNCiAgICAgICAgICAgICAgICB0ZXN0LnNldFNob3J0\nUCgoc2hvcnRbXSkgYXJyYXkpOw0KICAgICAgICAgICAgZWxzZSBpZiAoIXBy\naW1pdGl2ZSkNCiAgICAgICAgICAgICAgICByZXR1cm4gdGVzdC5nZXRTaG9y\ndCgpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJldHVy\nbiB0ZXN0LmdldFNob3J0UCgpOw0KICAgICAgICAgICAgcmV0dXJuIG51bGw7\nDQogICAgICAgIH0gZWxzZSBpZiAoZmlyc3QgaW5zdGFuY2VvZiBCb29sZWFu\nKSB7DQogICAgICAgICAgICBpZiAoZG9TZXQgJiYgIXByaW1pdGl2ZSkNCiAg\nICAgICAgICAgICAgICB0ZXN0LnNldEJvb2xlYW4oKEJvb2xlYW5bXSkgYXJy\nYXkpOw0KICAgICAgICAgICAgZWxzZSBpZiAoZG9TZXQpDQogICAgICAgICAg\nICAgICAgdGVzdC5zZXRCb29sZWFuUCgoYm9vbGVhbltdKSBhcnJheSk7DQog\nICAgICAgICAgICBlbHNlIGlmICghcHJpbWl0aXZlKQ0KICAgICAgICAgICAg\nICAgIHJldHVybiB0ZXN0LmdldEJvb2xlYW4oKTsNCiAgICAgICAgICAgIGVs\nc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gdGVzdC5nZXRCb29sZWFuUCgp\nOw0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0gZWxzZSBp\nZiAoZmlyc3QgaW5zdGFuY2VvZiBBcnJheXNUZXN0KSB7DQogICAgICAgICAg\nICBpZiAoZG9TZXQpDQogICAgICAgICAgICAgICAgdGVzdC5zZXRBcnJheXNU\nZXN0KChBcnJheXNUZXN0W10pIGFycmF5KTsNCiAgICAgICAgICAgIHJldHVy\nbiB0ZXN0LmdldEFycmF5c1Rlc3QoKTsNCiAgICAgICAgfQ0KDQogICAgICAg\nIGZhaWwoIlVua25vd24gYXJyYXkgdHlwZSIpOw0KICAgICAgICByZXR1cm4g\nbnVsbDsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBUZXN0\nQXJyYXlTb3J0ZXINCiAgICAgICAgaW1wbGVtZW50cyBDb21wYXJhdG9yIHsN\nCg0KICAgICAgICBwcml2YXRlIENvbGxhdG9yIGNvbGxhdG9yID0gQ29sbGF0\nb3IuZ2V0SW5zdGFuY2UoKTsNCg0KICAgICAgICBwdWJsaWMgaW50IGNvbXBh\ncmUoT2JqZWN0IG8xLCBPYmplY3QgbzIpIHsNCiAgICAgICAgICAgIGlmIChv\nMS5lcXVhbHMobzIpKQ0KICAgICAgICAgICAgICAgIHJldHVybiAwOw0KDQog\nICAgICAgICAgICBpZiAobzEgaW5zdGFuY2VvZiBOdW1iZXIpIHsNCiAgICAg\nICAgICAgICAgICByZXR1cm4gKChOdW1iZXIpIG8xKS5kb3VibGVWYWx1ZSgp\nID4NCiAgICAgICAgICAgICAgICAgICAgKChOdW1iZXIpIG8yKS5kb3VibGVW\nYWx1ZSgpID8gMSA6IC0xOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChvMSBp\nbnN0YW5jZW9mIERhdGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gKChE\nYXRlKSBvMSkuYmVmb3JlKChEYXRlKSBvMikgPyAxIDogLTE7DQogICAgICAg\nICAgICB9IGVsc2UgaWYgKG8xIGluc3RhbmNlb2YgQXJyYXlzVGVzdCkgew0K\nICAgICAgICAgICAgICAgIHJldHVybiAoKEFycmF5c1Rlc3QpIG8xKS5jb21w\nYXJlVG8obzIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJu\nIGNvbGxhdG9yLmNvbXBhcmUobzEudG9TdHJpbmcoKSwgbzIudG9TdHJpbmco\nKSk7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCg==\n","encoding":"base64"}

