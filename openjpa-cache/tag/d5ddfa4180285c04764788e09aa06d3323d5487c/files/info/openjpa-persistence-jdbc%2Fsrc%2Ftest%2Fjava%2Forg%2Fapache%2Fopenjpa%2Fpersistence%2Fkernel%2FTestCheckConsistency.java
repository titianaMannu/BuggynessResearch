{"sha":"b7fcf05f4c899bdd1a0079c1e08049fbdf1a16d2","node_id":"MDQ6QmxvYjIwNjM2NDpiN2ZjZjA1ZjRjODk5YmRkMWEwMDc5YzFlMDgwNDlmYmRmMWExNmQy","size":11609,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b7fcf05f4c899bdd1a0079c1e08049fbdf1a16d2","content":"LyoNCiAqIFRlc3RDaGVja0NvbnNpc3RlbmN5LmphdmENCiAqDQogKiBDcmVh\ndGVkIG9uIE9jdG9iZXIgOSwgMjAwNiwgNjoyMyBQTQ0KICoNCiAqIFRvIGNo\nYW5nZSB0aGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBN\nYW5hZ2VyDQogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRv\nci4NCiAqLw0KDQovKg0KICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0\nd2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQ0KICogb3IgbW9yZSBj\nb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElD\nRSBmaWxlDQogKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRk\naXRpb25hbCBpbmZvcm1hdGlvbg0KICogcmVnYXJkaW5nIGNvcHlyaWdodCBv\nd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQ0KICogdG8g\neW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRo\nZQ0KICogIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBl\neGNlcHQgaW4gY29tcGxpYW5jZQ0KICogd2l0aCB0aGUgTGljZW5zZS4gIFlv\ndSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAq\nIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0K\nICoNCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBh\nZ3JlZWQgdG8gaW4gd3JpdGluZywNCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVk\nIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuDQogKiAi\nQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9O\nUyBPRiBBTlkNCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQu\nICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQ0KICogc3BlY2lmaWMgbGFuZ3Vh\nZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucw0KICog\ndW5kZXIgdGhlIExpY2Vuc2UuICAgIA0KICovDQpwYWNrYWdlIG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWw7DQoNCg0KDQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21tb24u\nYXBwcy5SdW50aW1lVGVzdDE7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuSlBBRmFjYWRlSGVscGVyOw0KaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdl\ncjsNCg0KcHVibGljIGNsYXNzIFRlc3RDaGVja0NvbnNpc3RlbmN5IGV4dGVu\nZHMgQmFzZUtlcm5lbFRlc3Qgew0KDQogICAgcHJpdmF0ZSBPYmplY3QgX29p\nZCA9IG51bGw7DQoNCiAgICAvKioNCiAgICAgKiBDcmVhdGVzIGEgbmV3IGlu\nc3RhbmNlIG9mIFRlc3RDaGVja0NvbnNpc3RlbmN5DQogICAgICovDQogICAg\ncHVibGljIFRlc3RDaGVja0NvbnNpc3RlbmN5KFN0cmluZyBuYW1lKSB7DQog\nICAgICAgIHN1cGVyKG5hbWUpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIHNldFVwKCkgew0KICAgICAgICBkZWxldGVBbGwoUnVudGltZVRlc3QxLmNs\nYXNzKTsNCg0KICAgICAgICBSdW50aW1lVGVzdDEgcGMgPSBuZXcgUnVudGlt\nZVRlc3QxKCk7DQogICAgICAgIHBjLnNldEludEZpZWxkKDEpOw0KICAgICAg\nICBwYy5zZXRJbnRGaWVsZDEoMSk7DQogICAgICAgIF9vaWQgPSBwZXJzaXN0\nKHBjKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29uc2lzdGVu\ndERhdGFzdG9yZVRyYW5zYWN0aW9uKCkgew0KDQogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgcG0uc2V0T3B0\naW1pc3RpYyhmYWxzZSk7DQogICAgICAgIHBtLnZhbGlkYXRlQ2hhbmdlcygp\nOyAgICAgICAgLy8gbm8tb3Agb3V0c2lkZSB0cmFucw0KICAgICAgICBzdGFy\ndFR4KHBtKTsNCg0KICAgICAgICBSdW50aW1lVGVzdDEgcGMgPSAoUnVudGlt\nZVRlc3QxKSBwbS5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcywgX29pZCk7DQog\nICAgICAgIHBjLnNldEludEZpZWxkMSgxMDApOw0KDQogICAgICAgIFJ1bnRp\nbWVUZXN0MSBucGMgPSBuZXcgUnVudGltZVRlc3QxKCk7DQogICAgICAgIG5w\nYy5zZXRJbnRGaWVsZCgyKTsNCiAgICAgICAgbnBjLnNldEludEZpZWxkMSgy\nKTsNCiAgICAgICAgcG0ucGVyc2lzdChucGMpOw0KICAgICAgICBwbS52YWxp\nZGF0ZUNoYW5nZXMoKTsNCg0KICAgICAgICBhc3NlcnRFcXVhbHMoMTAwLCBw\nYy5nZXRJbnRGaWVsZDEoKSk7DQogICAgICAgIGFzc2VydFRydWUocG0uaXNQ\nZXJzaXN0ZW50KG5wYykpOw0KDQogICAgICAgIHBjLnNldEludEZpZWxkMSgy\nMDApOw0KICAgICAgICBucGMuc2V0SW50RmllbGQxKDMwMCk7DQogICAgICAg\nIGVuZFR4KHBtKTsNCg0KICAgICAgICBhc3NlcnRFcXVhbHMoMjAwLCBwYy5n\nZXRJbnRGaWVsZDEoKSk7DQogICAgICAgIGFzc2VydFRydWUocG0uaXNQZXJz\naXN0ZW50KG5wYykpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMzAwLCBucGMu\nZ2V0SW50RmllbGQxKCkpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0K\nDQogICAgcHVibGljIHZvaWQgdGVzdENvbnNpc3RlbnREYXRhc3RvcmVUcmFu\nc2FjdGlvbldpdGhSb2xsYmFjaygpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBwbS5zZXRPcHRpbWlz\ndGljKGZhbHNlKTsNCiAgICAgICAgcG0udmFsaWRhdGVDaGFuZ2VzKCk7ICAg\nICAgICAvLyBuby1vcCBvdXRzaWRlIHRyYW5zDQogICAgICAgIHN0YXJ0VHgo\ncG0pOw0KDQogICAgICAgIFJ1bnRpbWVUZXN0MSBwYyA9IChSdW50aW1lVGVz\ndDEpIHBtLmZpbmQoUnVudGltZVRlc3QxLmNsYXNzLCBfb2lkKTsNCiAgICAg\nICAgcGMuc2V0SW50RmllbGQxKDEwMCk7DQoNCiAgICAgICAgUnVudGltZVRl\nc3QxIG5wYyA9IG5ldyBSdW50aW1lVGVzdDEoKTsNCiAgICAgICAgcG0ucGVy\nc2lzdChucGMpOw0KICAgICAgICBPYmplY3Qgbm9pZCA9IHBtLmdldE9iamVj\ndElkKG5wYyk7DQoNCiAgICAgICAgcG0udmFsaWRhdGVDaGFuZ2VzKCk7DQog\nICAgICAgIGFzc2VydEVxdWFscygxMDAsIHBjLmdldEludEZpZWxkMSgpKTsN\nCiAgICAgICAgYXNzZXJ0VHJ1ZShwbS5pc1BlcnNpc3RlbnQobnBjKSk7DQoN\nCiAgICAgICAgcGMuc2V0SW50RmllbGQxKDIwMCk7DQogICAgICAgIG5wYy5z\nZXRJbnRGaWVsZDEoMzAwKTsNCiAgICAgICAgcm9sbGJhY2tUeChwbSk7DQoN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBjLmdldEludEZpZWxkMSgpKTsN\nCiAgICAgICAgYXNzZXJ0RmFsc2UocG0uaXNQZXJzaXN0ZW50KG5wYykpOw0K\nICAgICAgICBhc3NlcnRFcXVhbHMoMCwgbnBjLmdldEludEZpZWxkMSgpKTsN\nCiAgICAgICAgZW5kRW0ocG0pOw0KDQogICAgICAgIHBtID0gZ2V0UE0oKTsN\nCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIFJ1bnRpbWVUZXN0MSB0ZW1w\nID0NCiAgICAgICAgICAgICAgICAoUnVudGltZVRlc3QxKSBwbS5maW5kKFJ1\nbnRpbWVUZXN0MS5jbGFzcywgbm9pZCk7DQogICAgICAgICAgICBmYWlsKCJP\nYmplY3Qgc2hvdWxkIG5vdCBleGlzdC4iICsgdGVtcC5nZXRJbnRGaWVsZCgp\nICsgIjo6IiArDQogICAgICAgICAgICAgICAgdGVtcC5nZXRJbnRGaWVsZDEo\nKSk7DQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBqb25mZSkgew0KICAg\nICAgICB9DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICAvL0ZJ\nWE1FIGp0aG9tYXMNCi8qICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RJbmNv\nbnNpc3RlbnREYXRhc3RvcmVUcmFuc2FjdGlvbigpIHsNCiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBGZXRj\naFBsYW4gZmV0Y2ggPSAoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBsYW4oKTsN\nCiAgICAgICAgcG0uc2V0T3B0aW1pc3RpYyhmYWxzZSk7DQogICAgICAgIHBt\nLnNldFJldGFpblN0YXRlKGZhbHNlKTsNCiAgICAgICAgcG0udmFsaWRhdGVD\naGFuZ2VzKCk7ICAgICAgICAvLyBuby1vcCBvdXRzaWRlIHRyYW5zDQogICAg\nICAgIHBtLmJlZ2luKCk7DQogICovDQogICAgLy9GSVhNRSBqdGhvbWFzDQog\nICAgLyoNCiAgIGZldGNoLnNldFJlYWRMb2NrTGV2ZWwocG0uTE9DS19OT05F\nKTsNCiAgIGZldGNoLnNldFdyaXRlTG9ja0xldmVsKHBtLkxPQ0tfTk9ORSk7\nDQogICAgKi8NCiAgICAvKg0KUnVudGltZVRlc3QxIHBjID0gKFJ1bnRpbWVU\nZXN0MSkgcG0uZmluZChSdW50aW1lVGVzdDEuY2xhc3MsX29pZCk7DQpwYy5z\nZXRJbnRGaWVsZCgxMDApOw0KDQpPcGVuSlBBRW50aXR5TWFuYWdlciBwbTIg\nPSBnZXRQTSgpOw0KcG0yLmJlZ2luKCk7DQpSdW50aW1lVGVzdDEgY29weSA9\nIChSdW50aW1lVGVzdDEpIHBtMi5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcyxf\nb2lkKTsNCmNvcHkuc2V0SW50RmllbGQoLTEpOw0KcG0yLmNvbW1pdCgpOw0K\ncG0yLmNsb3NlKCk7DQoNClJ1bnRpbWVUZXN0MSBucGMgPSBuZXcgUnVudGlt\nZVRlc3QxKCk7DQpwbS5wZXJzaXN0KG5wYyk7DQoNCnRyeSB7DQogICBwbS52\nYWxpZGF0ZUNoYW5nZXMoKTsNCiAgIGZhaWwoIkRpZG4ndCBmaW5kIGluY29u\nc2lzdGVuY3kuIik7DQp9IGNhdGNoIChFeGNlcHRpb24gam92ZSkgew0KICAg\nLy9GSVhNRQ0KICAgLyoNCiAgIFRocm93YWJsZVtdIHQgPSBqb3ZlLmdldE5l\nc3RlZEV4Y2VwdGlvbnMoKTsNCiAgIGFzc2VydEVxdWFscygxLCB0Lmxlbmd0\naCk7DQogICBhc3NlcnRFcXVhbHMocGMsICgoKEpET0V4Y2VwdGlvbikgdFsw\nXSkuZ2V0RmFpbGVkT2JqZWN0KCkpKTsNCiAgICAqLw0KLy8gICAgICAgIH0N\nCg0KICAgIC8qICAgICAgICBhc3NlcnRUcnVlKHBtLmdldFJvbGxiYWNrT25s\neSgpKTsNCiAgICAgICAgICAgcG0ucm9sbGJhY2soKTsNCg0KICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoLTEsIHBjLmdldEludEZpZWxkKCkpOw0KICAgICAg\nICAgICBhc3NlcnRGYWxzZShwbS5pc1BlcnNpc3RlbnQobnBjKSk7DQogICAg\nICAgICAgIGVuZEVtKHBtLCgpKTsNCiAgICAgICB9DQogICAgKi8NCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0Q29uc2lzdGVudE9wdGltaXN0aWNUcmFuc2FjdGlv\nbigpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQ\nTSgpOw0KICAgICAgICBwbS5zZXRPcHRpbWlzdGljKHRydWUpOw0KICAgICAg\nICBwbS52YWxpZGF0ZUNoYW5nZXMoKTsgICAgICAgIC8vIG5vLW9wIG91dHNp\nZGUgdHJhbnMNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIGJvb2xl\nYW4gaGFzQ29ubiA9IGhhc0Nvbm5lY3Rpb24ocG0pOw0KDQogICAgICAgIFJ1\nbnRpbWVUZXN0MSBwYyA9IChSdW50aW1lVGVzdDEpIHBtLmZpbmQoUnVudGlt\nZVRlc3QxLmNsYXNzLCBfb2lkKTsNCiAgICAgICAgcGMuc2V0SW50RmllbGQx\nKDEwMCk7DQoNCiAgICAgICAgUnVudGltZVRlc3QxIG5wYyA9IG5ldyBSdW50\naW1lVGVzdDEoKTsNCiAgICAgICAgbnBjLnNldEludEZpZWxkKDIpOw0KICAg\nICAgICBucGMuc2V0SW50RmllbGQxKDIpOw0KICAgICAgICBwbS5wZXJzaXN0\nKG5wYyk7DQoNCiAgICAgICAgcG0udmFsaWRhdGVDaGFuZ2VzKCk7DQogICAg\nICAgIGlmICghaGFzQ29ubikNCiAgICAgICAgICAgIGFzc2VydEZhbHNlKGhh\nc0Nvbm5lY3Rpb24ocG0pKTsNCg0KICAgICAgICBhc3NlcnRFcXVhbHMoMTAw\nLCBwYy5nZXRJbnRGaWVsZDEoKSk7DQogICAgICAgIGFzc2VydFRydWUocG0u\naXNQZXJzaXN0ZW50KG5wYykpOw0KDQogICAgICAgIHBjLnNldEludEZpZWxk\nMSgyMDApOw0KICAgICAgICBucGMuc2V0SW50RmllbGQxKDMwMCk7DQogICAg\nICAgIGVuZFR4KHBtKTsNCg0KICAgICAgICBhc3NlcnRFcXVhbHMoMjAwLCBw\nYy5nZXRJbnRGaWVsZDEoKSk7DQogICAgICAgIGFzc2VydFRydWUocG0uaXNQ\nZXJzaXN0ZW50KG5wYykpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMzAwLCBu\ncGMuZ2V0SW50RmllbGQxKCkpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAg\nfQ0KDQogICAgcHJpdmF0ZSBib29sZWFuIGhhc0Nvbm5lY3Rpb24oT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG0pIHsNCiAgICAgICAgcmV0dXJuIEpQQUZhY2Fk\nZUhlbHBlci50b0Jyb2tlcihwbSkuaGFzQ29ubmVjdGlvbigpOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RDb25zaXN0ZW50T3B0aW1pc3RpY1Ry\nYW5zYWN0aW9uV2l0aFJvbGxiYWNrKCkgew0KICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBwbSA9IGdldFBNKCk7DQogICAgICAgIHBtLnNldE9wdGlt\naXN0aWModHJ1ZSk7DQogICAgICAgIHBtLnZhbGlkYXRlQ2hhbmdlcygpOyAg\nICAgICAgLy8gbm8tb3Agb3V0c2lkZSB0cmFucw0KICAgICAgICBzdGFydFR4\nKHBtKTsNCiAgICAgICAgYm9vbGVhbiBoYXNDb25uID0gaGFzQ29ubmVjdGlv\nbihwbSk7DQoNCiAgICAgICAgUnVudGltZVRlc3QxIHBjID0gKFJ1bnRpbWVU\nZXN0MSkgcG0uZmluZChSdW50aW1lVGVzdDEuY2xhc3MsIF9vaWQpOw0KICAg\nICAgICBwYy5zZXRJbnRGaWVsZDEoMTAwKTsNCg0KICAgICAgICBSdW50aW1l\nVGVzdDEgbnBjID0gbmV3IFJ1bnRpbWVUZXN0MSgpOw0KICAgICAgICBwbS5w\nZXJzaXN0KG5wYyk7DQogICAgICAgIE9iamVjdCBub2lkID0gcG0uZ2V0T2Jq\nZWN0SWQobnBjKTsNCg0KICAgICAgICBwbS52YWxpZGF0ZUNoYW5nZXMoKTsN\nCiAgICAgICAgaWYgKCFoYXNDb25uKQ0KICAgICAgICAgICAgYXNzZXJ0RmFs\nc2UoaGFzQ29ubmVjdGlvbihwbSkpOw0KDQogICAgICAgIGFzc2VydEVxdWFs\ncygxMDAsIHBjLmdldEludEZpZWxkMSgpKTsNCiAgICAgICAgYXNzZXJ0VHJ1\nZShwbS5pc1BlcnNpc3RlbnQobnBjKSk7DQoNCiAgICAgICAgcGMuc2V0SW50\nRmllbGQxKDIwMCk7DQogICAgICAgIG5wYy5zZXRJbnRGaWVsZDEoMzAwKTsN\nCiAgICAgICAgcm9sbGJhY2tUeChwbSk7DQoNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIHBjLmdldEludEZpZWxkMSgpKTsNCiAgICAgICAgYXNzZXJ0RmFs\nc2UocG0uaXNQZXJzaXN0ZW50KG5wYykpOw0KICAgICAgICBhc3NlcnRFcXVh\nbHMoMCwgbnBjLmdldEludEZpZWxkMSgpKTsNCiAgICAgICAgZW5kRW0ocG0p\nOw0KDQogICAgICAgIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgdHJ5IHsNCiAg\nICAgICAgICAgIFJ1bnRpbWVUZXN0MSB0ZW1wID0NCiAgICAgICAgICAgICAg\nICAoUnVudGltZVRlc3QxKSBwbS5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcywg\nbm9pZCk7DQoNCiAgICAgICAgICAgIGZhaWwoIk9iamVjdCBzaG91bGQgbm90\nIGV4aXN0LiIgKyB0ZW1wLmdldEludEZpZWxkKCkgKyAiOjoiICsNCiAgICAg\nICAgICAgICAgICB0ZW1wLmdldEludEZpZWxkMSgpKTsNCiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGpvbmZlKSB7DQogICAgICAgIH0NCiAgICB9DQov\nL0ZJWE1FIA0KICAgIC8qDQpwdWJsaWMgdm9pZCB0ZXN0SW5jb25zaXN0ZW50\nT3B0aW1pc3RpY1RyYW5zYWN0aW9uV2l0aG91dFJlZnJlc2goKSB7DQpPcGVu\nSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7DQpwbS5zZXRSZXRhaW5T\ndGF0ZShmYWxzZSk7DQpwbS5zZXRPcHRpbWlzdGljKHRydWUpOw0KcG0udmFs\naWRhdGVDaGFuZ2VzKCk7ICAgICAgICAvLyBuby1vcCBvdXRzaWRlIHRyYW5z\nDQpwbS5iZWdpbigpOw0KDQpSdW50aW1lVGVzdDEgcGMgPSAoUnVudGltZVRl\nc3QxKSBwbS5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcyxfb2lkKTsNCnBjLnNl\ndEludEZpZWxkKDEwMCk7DQoNCk9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtMiA9\nIGdldFBNKCk7DQpwbTIuYmVnaW4oKTsNClJ1bnRpbWVUZXN0MSBjb3B5ID0g\nKFJ1bnRpbWVUZXN0MSkgcG0yLmZpbmQoUnVudGltZVRlc3QxLmNsYXNzLF9v\naWQpOw0KY29weS5zZXRJbnRGaWVsZCgtMSk7DQpwbTIuY29tbWl0KCk7DQpw\nbTIuY2xvc2UoKTsNCg0KUnVudGltZVRlc3QxIG5wYyA9IG5ldyBSdW50aW1l\nVGVzdDEoKTsNCnBtLnBlcnNpc3QobnBjKTsNCk9iamVjdCBub2lkID0gcG0u\nZ2V0T2JqZWN0SWQobnBjKTsNCg0KdHJ5IHsNCiAgIHBtLnZhbGlkYXRlQ2hh\nbmdlcygpOw0KICAgZmFpbCgiRGlkbid0IGZpbmQgaW5jb25zaXN0ZW5jeS4i\nKTsNCn0gY2F0Y2ggKEV4Y2VwdGlvbiBqb3ZlKSB7DQogICAvL0ZJWE1FIGp0\naG9tYXMNCiAgIC8qDQogICBUaHJvd2FibGVbXSB0ID0gam92ZS5nZXROZXN0\nZWRFeGNlcHRpb25zKCk7DQogICBhc3NlcnRFcXVhbHMoMSwgdC5sZW5ndGgp\nOw0KICAgYXNzZXJ0RXF1YWxzKHBjLCAoKChKRE9FeGNlcHRpb24pIHRbMF0p\nLmdldEZhaWxlZE9iamVjdCgpKSk7DQogICAgKi8NCiAgICAvLyAgICAgfQ0K\nLyogICAgIGFzc2VydEZhbHNlKHBtLmdldFJvbGxiYWNrT25seSgpKTsNCiAg\nICAgICAgDQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBwbS5jb21taXQo\nKTsNCiAgICAgICAgICAgIGZhaWwoIkNvbW1pdHRlZCBpbmNvbnNpc3RlbnQg\ndHJhbnNhY3Rpb24uIik7DQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBq\nZSkgew0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBhc3NlcnRFcXVh\nbHMoLTEsIHBjLmdldEludEZpZWxkKCkpOw0KICAgICAgICBhc3NlcnRGYWxz\nZShwbS5pc1BlcnNpc3RlbnQobnBjKSk7DQogICAgICAgIGVuZEVtKHBtLCgp\nKTsNCiAgICAgICAgDQogICAgICAgIHBtID0gZ2V0UE0oKTsNCiAgICAgICAg\ndHJ5IHsNCiAgICAgICAgICAgIHBtLmZpbmQoUnVudGltZVRlc3QxLmNsYXNz\nLG5vaWQpOw0KICAgICAgICAgICAgZmFpbCgiT2JqZWN0IHNob3VsZCBub3Qg\nZXhpc3QuIik7DQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBqb25mZSkg\new0KICAgICAgICB9DQogICAgICAgIGVuZEVtKHBtLCgpKTsNCiAgICB9DQog\nKi8NCg0KLy9GSVhNRSANCi8qICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RJ\nbmNvbnNpc3RlbnRPcHRpbWlzdGljVHJhbnNhY3Rpb25XaXRoUmVmcmVzaCgp\nIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgp\nOw0KICAgICAgICBwbS5zZXRPcHRpbWlzdGljKHRydWUpOw0KICAgICAgICBw\nbS52YWxpZGF0ZUNoYW5nZXMoKTsgICAgICAgIC8vIG5vLW9wIG91dHNpZGUg\ndHJhbnMNCiAgICAgICAgcG0uYmVnaW4oKTsNCiAgICAgICAgDQogICAgICAg\nIFJ1bnRpbWVUZXN0MSBwYyA9IHBtLmZpbmQoUnVudGltZVRlc3QxLmNsYXNz\nLF9vaWQpOw0KICAgICAgICBwYy5zZXRJbnRGaWVsZCgxMDApOw0KICAgICAg\nICANCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0yID0gZ2V0UE0o\nKTsNCiAgICAgICAgcG0yLmJlZ2luKCk7DQogICAgICAgIFJ1bnRpbWVUZXN0\nMSBjb3B5ID0gcG0yLmZpbmQoUnVudGltZVRlc3QxLmNsYXNzLF9vaWQpOw0K\nICAgICAgICBjb3B5LnNldEludEZpZWxkKC0xKTsNCiAgICAgICAgcG0yLmNv\nbW1pdCgpOw0KICAgICAgICBwbTIuY2xvc2UoKTsNCiAgICAgICAgDQogICAg\nICAgIFJ1bnRpbWVUZXN0MSBucGMgPSBuZXcgUnVudGltZVRlc3QxKCk7DQog\nICAgICAgIHBtLnBlcnNpc3QobnBjKTsNCiAgICAgICAgdHJ5IHsNCiAgICAg\nICAgICAgIHBtLnZhbGlkYXRlQ2hhbmdlcygpOw0KICAgICAgICAgICAgZmFp\nbCgiRGlkbid0IGZpbmQgaW5jb25zaXN0ZW5jeS4iKTsNCiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGpvdmUpIHsNCiAgICAgICAgICAgIC8vRklYTUUg\nanRob21hcw0KICAgICAgICAgICAgLyoNCiAgICAgICAgICAgIFRocm93YWJs\nZVtdIHQgPSBqb3ZlLmdldE5lc3RlZEV4Y2VwdGlvbnMoKTsNCiAgICAgICAg\nICAgIGFzc2VydEVxdWFscygxLCB0Lmxlbmd0aCk7DQogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMocGMsICgoKEpET0V4Y2VwdGlvbikgdFswXSkuZ2V0RmFp\nbGVkT2JqZWN0KCkpKTsNCiAgICAgICAgICAgICAqLw0KICAgIC8vICAgICAg\nfQ0KICAgIC8qICAgICAgIGFzc2VydEZhbHNlKHBtLmdldFJvbGxiYWNrT25s\neSgpKTsNCiAgICAgICAgIHBtLnJlZnJlc2gocGMpOw0KDQogICAgICAgICBh\nc3NlcnRFcXVhbHMoLTEsIHBjLmdldEludEZpZWxkKCkpOw0KICAgICAgICAg\nYXNzZXJ0VHJ1ZShwbS5pc1BlcnNpc3RlbnQobnBjKSk7DQoNCiAgICAgICAg\nIHBjLnNldEludEZpZWxkKDIwMCk7DQogICAgICAgICBucGMuc2V0SW50Rmll\nbGQoMzAwKTsNCiAgICAgICAgIHBtLmNvbW1pdCgpOw0KDQogICAgICAgICBh\nc3NlcnRFcXVhbHMoMjAwLCBwYy5nZXRJbnRGaWVsZCgpKTsNCiAgICAgICAg\nIGFzc2VydFRydWUocG0uaXNQZXJzaXN0ZW50KG5wYykpOw0KICAgICAgICAg\nYXNzZXJ0RXF1YWxzKDMwMCwgbnBjLmdldEludEZpZWxkKCkpOw0KICAgICAg\nICAgZW5kRW0ocG0sKCkpOw0KICAgICB9DQogICAgKi8NCg0KLy9GSVhNRSAN\nCg0KLyogICAgDQpwdWJsaWMgdm9pZCB0ZXN0SW5jb25zaXN0ZW50T3B0aW1p\nc3RpY1RyYW5zYWN0aW9uV2l0aFJvbGxiYWNrKCkgew0KT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KcG0uc2V0UmV0YWluU3RhdGUoZmFs\nc2UpOw0KcG0uc2V0T3B0aW1pc3RpYyh0cnVlKTsNCnBtLnZhbGlkYXRlQ2hh\nbmdlcygpOyAgICAgICAgLy8gbm8tb3Agb3V0c2lkZSB0cmFucw0KcG0uYmVn\naW4oKTsNCg0KUnVudGltZVRlc3QxIHBjID0gKFJ1bnRpbWVUZXN0MSkgcG0u\nZmluZChSdW50aW1lVGVzdDEuY2xhc3MsX29pZCk7DQpwYy5zZXRJbnRGaWVs\nZCgxMDApOw0KDQpPcGVuSlBBRW50aXR5TWFuYWdlciBwbTIgPSBnZXRQTSgp\nOw0KcG0yLmJlZ2luKCk7DQpSdW50aW1lVGVzdDEgY29weSA9IChSdW50aW1l\nVGVzdDEpIHBtMi5maW5kKFJ1bnRpbWVUZXN0MS5jbGFzcyxfb2lkKTsNCmNv\ncHkuc2V0SW50RmllbGQoLTEpOw0KcG0yLmNvbW1pdCgpOw0KcG0yLmNsb3Nl\nKCk7DQoNClJ1bnRpbWVUZXN0MSBucGMgPSBuZXcgUnVudGltZVRlc3QxKCk7\nDQpwbS5wZXJzaXN0KG5wYyk7DQpPYmplY3Qgbm9pZCA9IHBtLmdldE9iamVj\ndElkKG5wYyk7DQoNCnRyeSB7DQpwbS52YWxpZGF0ZUNoYW5nZXMoKTsNCmZh\naWwoIkRpZG4ndCBmaW5kIGluY29uc2lzdGVuY3kuIik7DQp9IGNhdGNoIChF\neGNlcHRpb24gam92ZSkgew0KLy9GSVhNRSBqdGhvbWFzDQovKg0KVGhyb3dh\nYmxlW10gdCA9IGpvdmUuZ2V0TmVzdGVkRXhjZXB0aW9ucygpOw0KYXNzZXJ0\nRXF1YWxzKDEsIHQubGVuZ3RoKTsNCmFzc2VydEVxdWFscyhwYywgKCgoSkRP\nRXhjZXB0aW9uKSB0WzBdKS5nZXRGYWlsZWRPYmplY3QoKSkpOw0KKi8NCiAg\nICAvLyAgICAgIH0NCiAgICAvKiAgICAgICBhc3NlcnRGYWxzZShwbS5nZXRS\nb2xsYmFja09ubHkoKSk7DQogICAgICAgICAgcG0ucm9sbGJhY2soKTsNCg0K\nICAgICAgICAgIGFzc2VydEVxdWFscygtMSwgcGMuZ2V0SW50RmllbGQoKSk7\nDQogICAgICAgICAgYXNzZXJ0RmFsc2UocG0uaXNQZXJzaXN0ZW50KG5wYykp\nOw0KICAgICAgICAgIGVuZEVtKHBtLCgpKTsNCg0KICAgICAgICAgIHBtID0g\nZ2V0UE0oKTsNCiAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICBwbS5m\naW5kKFJ1bnRpbWVUZXN0MS5jbGFzcyxfb2lkKTsNCiAgICAgICAgICAgICAg\nZmFpbCgiT2JqZWN0IHNob3VsZCBub3QgZXhpc3QuIik7DQogICAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGpvbmZlKSB7DQogICAgICAgICAgfQ0KICAg\nICAgICAgIGVuZEVtKHBtLCgpKTsNCiAgICAgIH0NCg0KICAgICovDQp9DQo=\n","encoding":"base64"}

