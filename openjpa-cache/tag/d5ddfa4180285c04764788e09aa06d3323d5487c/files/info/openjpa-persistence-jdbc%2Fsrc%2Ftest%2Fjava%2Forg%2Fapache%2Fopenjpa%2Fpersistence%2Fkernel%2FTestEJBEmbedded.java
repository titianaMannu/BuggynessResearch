{"sha":"e6ef66842253616f2c1d445e92d74e920ac944e3","node_id":"MDQ6QmxvYjIwNjM2NDplNmVmNjY4NDIyNTM2MTZmMmMxZDQ0NWU5MmQ3NGU5MjBhYzk0NGUz","size":7723,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e6ef66842253616f2c1d445e92d74e920ac944e3","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2Uua2VybmVsOw0KDQppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuRW50aXR5TWFuYWdlcjsNCg0KDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21tb24uYXBwcy5Db21wbGV4RW1i\nZWRkZWRQQzsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2Uua2VybmVsLmNvbW1vbi5hcHBzLkVtYmVkZGVkT3duZXJQQzsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1v\nbi5hcHBzLkVtYmVkZGVkUEM7DQoNCnB1YmxpYyBjbGFzcyBUZXN0RUpCRW1i\nZWRkZWQgZXh0ZW5kcyBCYXNlS2VybmVsVGVzdCB7DQoNCiAgICBwcml2YXRl\nIE9iamVjdCBfb2lkMSA9IG51bGw7DQogICAgcHJpdmF0ZSBPYmplY3QgX29p\nZDIgPSBudWxsOw0KDQogICAgRW1iZWRkZWRPd25lclBDLkVtYktleSBpZDE7\nDQogICAgRW1iZWRkZWRPd25lclBDLkVtYktleSBpZDI7DQoNCiAgICBwdWJs\naWMgVGVzdEVKQkVtYmVkZGVkKFN0cmluZyBuYW1lKSB7DQogICAgICAgIHN1\ncGVyKG5hbWUpOw0KICAgIH0NCg0KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1\nbmNoZWNrZWQiKQ0KICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgew0KICAgICAg\nICBkZWxldGVBbGwoRW1iZWRkZWRPd25lclBDLmNsYXNzKTsNCiAgICAgICAg\nZGVsZXRlQWxsKEVtYmVkZGVkUEMuY2xhc3MpOw0KDQogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAg\nICBzdGFydFR4KGVtKTsNCg0KICAgICAgICBFbWJlZGRlZE93bmVyUEMgcGMx\nID0gbmV3IEVtYmVkZGVkT3duZXJQQygxLCAyKTsNCiAgICAgICAgcGMxLnNl\ndFN0cmluZ0ZpZWxkKCJzdHJpbmcxIik7DQogICAgICAgIEVtYmVkZGVkUEMg\nZW1iZWQxID0gbmV3IEVtYmVkZGVkUEMoKTsNCiAgICAgICAgZW1iZWQxLnNl\ndFN0cmluZ0ZpZWxkKCJlbWJlZFN0cmluZzEiKTsNCiAgICAgICAgZW1iZWQx\nLnNldEludEZpZWxkKDEpOw0KICAgICAgICBwYzEuc2V0RW1iZWRkZWQoZW1i\nZWQxKTsNCg0KICAgICAgICBFbWJlZGRlZFBDIGVtYmVkMiA9IG5ldyBFbWJl\nZGRlZFBDKCk7DQogICAgICAgIGVtYmVkMi5zZXRTdHJpbmdGaWVsZCgiZW1i\nZWRTdHJpbmcyIik7DQogICAgICAgIGVtYmVkMi5zZXRJbnRGaWVsZCgyKTsN\nCg0KICAgICAgICBFbWJlZGRlZE93bmVyUEMgcGMyID0gbmV3IEVtYmVkZGVk\nT3duZXJQQygzLCA0KTsNCg0KICAgICAgICBlbS5wZXJzaXN0KHBjMSk7DQog\nICAgICAgIGVtLnBlcnNpc3QocGMyKTsNCg0KICAgICAgICBlbmRUeChlbSk7\nDQoNCiAgICAgICAgaWQxID0gbmV3IEVtYmVkZGVkT3duZXJQQy5FbWJLZXko\nIjE6MiIpOw0KDQogICAgICAgIGlkMiA9IG5ldyBFbWJlZGRlZE93bmVyUEMu\nRW1iS2V5KCk7DQogICAgICAgIGlkMi5pZDEgPSAzOw0KICAgICAgICBpZDIu\naWQyID0gNDsNCg0KICAgICAgICBlbmRFbShlbSk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgdGVzdEluc2VydCgpIHsNCiAgICAgICAgRW50aXR5TWFu\nYWdlciBwbSA9IGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0\nYXJ0VHgocG0pOw0KDQogICAgICAgIEVtYmVkZGVkT3duZXJQQyBwYyA9IHBt\nLmZpbmQoRW1iZWRkZWRPd25lclBDLmNsYXNzLCBpZDEpOw0KICAgICAgICBF\nbWJlZGRlZE93bmVyUEMgcGMyID0gcG0uZmluZChFbWJlZGRlZE93bmVyUEMu\nY2xhc3MsIGlkMik7DQogICAgICAgIGFzc2VydE5vdE51bGwoInBjIGlzIG51\nbGwgaW4gdGVzdEluc2VydCIsIHBjKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVs\nbCgicDIgaXMgbnVsbCBpbiB0ZXN0SW5zZXJ0IiwgcGMyKTsNCg0KICAgICAg\nICBhc3NlcnRFcXVhbHMoInN0cmluZzEiLCBwYy5nZXRTdHJpbmdGaWVsZCgp\nKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYy5nZXRFbWJlZGRlZCgpKTsN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJlbWJlZFN0cmluZzEiLCBwYy5nZXRF\nbWJlZGRlZCgpLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMSwgcGMuZ2V0RW1iZWRkZWQoKS5nZXRJbnRGaWVsZCgpKTsNCg0K\nICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlKCkgew0KICAgICAgICBF\nbnRpdHlNYW5hZ2VyIHBtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIEVtYmVkZGVkT3duZXJQQyBw\nYyA9DQogICAgICAgICAgICAoRW1iZWRkZWRPd25lclBDKSBwbS5maW5kKEVt\nYmVkZGVkT3duZXJQQy5jbGFzcywgaWQxKTsNCg0KICAgICAgICBhc3NlcnRO\nb3ROdWxsKCJwYyBpcyBudWxsIGluIHRlc3REZWxldGUiLCBwYyk7DQoNCiAg\nICAgICAgRW1iZWRkZWRQQyBlbWJlZCA9IHBjLmdldEVtYmVkZGVkKCk7DQoN\nCiAgICAgICAgcGMuc2V0RW1iZWRkZWQobnVsbCk7DQoNCiAgICAgICAgZW5k\nVHgocG0pOw0KDQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICBwbSA9\nIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0p\nOw0KICAgICAgICBwYyA9IChFbWJlZGRlZE93bmVyUEMpIHBtLmZpbmQoRW1i\nZWRkZWRPd25lclBDLmNsYXNzLCBpZDEpOw0KDQogICAgICAgIGFzc2VydEVx\ndWFscygidGhlIGV4cHQgc3RybmcgaXMgbm90IHN0cmluZzEiLCAic3RyaW5n\nMSIsDQogICAgICAgICAgICBwYy5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAg\nICAgYXNzZXJ0TnVsbCgicGMncyBlbWJlZGRlZCBpcyBudWxsIiwgcGMuZ2V0\nRW1iZWRkZWQoKSk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgZW5k\nRW0ocG0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RVcGRhdGVS\nZXRhaW4oKSB7DQogICAgICAgIEVudGl0eU1hbmFnZXIgcG0gPSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAg\nICAgRW1iZWRkZWRPd25lclBDIHBjID0NCiAgICAgICAgICAgIChFbWJlZGRl\nZE93bmVyUEMpIHBtLmZpbmQoRW1iZWRkZWRPd25lclBDLmNsYXNzLCBpZDEp\nOw0KDQogICAgICAgIGFzc2VydE5vdE51bGwoInBjIGlzIG51bGwgdGVzdFVw\nZGF0ZVJldGFpbiIsIHBjKTsNCg0KICAgICAgICBwYy5zZXRTdHJpbmdGaWVs\nZCgic3RyaW5nMiIpOw0KICAgICAgICBwYy5nZXRFbWJlZGRlZCgpLnNldFN0\ncmluZ0ZpZWxkKCJlbWJlZFN0cmluZzIiKTsNCg0KICAgICAgICBlbmRUeChw\nbSk7DQoNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzdHJpbmcyIiwgcGMuZ2V0\nU3RyaW5nRmllbGQoKSk7DQogICAgICAgIGFzc2VydE5vdE51bGwocGMuZ2V0\nRW1iZWRkZWQoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygiZW1iZWRTdHJp\nbmcyIiwgcGMuZ2V0RW1iZWRkZWQoKS5nZXRTdHJpbmdGaWVsZCgpKTsNCiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBjLmdldEVtYmVkZGVkKCkuZ2V0SW50\nRmllbGQoKSk7DQoNCiAgICAgICAgZW5kRW0ocG0pOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyB2b2lkIHRlc3RSZXBsYWNlKCkgew0KICAgICAgICBFbnRpdHlN\nYW5hZ2VyIHBtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAg\nc3RhcnRUeChwbSk7DQoNCiAgICAgICAgRW1iZWRkZWRPd25lclBDIHBjID0g\ncG0uZmluZChFbWJlZGRlZE93bmVyUEMuY2xhc3MsIGlkMSk7DQoNCiAgICAg\nICAgRW1iZWRkZWRQQyBuZXdFbWJlZCA9IG5ldyBFbWJlZGRlZFBDKCk7DQog\nICAgICAgIG5ld0VtYmVkLnNldFN0cmluZ0ZpZWxkKCJlbWJlZFN0cmluZzIi\nKTsNCiAgICAgICAgcGMuc2V0RW1iZWRkZWQobmV3RW1iZWQpOw0KDQogICAg\nICAgIENvbXBsZXhFbWJlZGRlZFBDIG5ld0NvbXBsZXhFbWJlZCA9IG5ldyBD\nb21wbGV4RW1iZWRkZWRQQygpOw0KICAgICAgICBuZXdFbWJlZCA9IG5ldyBF\nbWJlZGRlZFBDKCk7DQogICAgICAgIG5ld0VtYmVkLnNldFN0cmluZ0ZpZWxk\nKCJlbWJlZFN0cmluZzMiKTsNCiAgICAgICAgbmV3Q29tcGxleEVtYmVkLnNl\ndFN0cmluZ0ZpZWxkKCJjb21wbGV4RW1iZWRTdHJpbmczIik7DQogICAgICAg\nIG5ld0NvbXBsZXhFbWJlZC5zZXRPd25lckZpZWxkKG5ldyBFbWJlZGRlZE93\nbmVyUEMoNSwgNikpOw0KICAgICAgICBwYy5zZXRDb21wbGV4RW1iZWRkZWQo\nbmV3Q29tcGxleEVtYmVkKTsNCg0KICAgICAgICBlbmRUeChwbSk7DQogICAg\nICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICBwbSA9IGN1cnJlbnRFbnRpdHlN\nYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KDQogICAgICAgIHBj\nID0gcG0uZmluZChFbWJlZGRlZE93bmVyUEMuY2xhc3MsIGlkMSk7DQogICAg\nICAgIGFzc2VydEVxdWFscygic3RyaW5nMSIsIHBjLmdldFN0cmluZ0ZpZWxk\nKCkpOw0KICAgICAgICBhc3NlcnROb3ROdWxsKHBjLmdldEVtYmVkZGVkKCkp\nOw0KICAgICAgICBhc3NlcnRFcXVhbHMoInRoZSBleHAgc3RybmcgaXMgbm90\nIGVtYmVkU3RyaW5nMSIsICJlbWJlZFN0cmluZzEiLA0KICAgICAgICAgICAg\ncGMuZ2V0RW1iZWRkZWQoKS5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJpbnRmaWVsZCBpcyBub3QgMSIsIDEsIHBjLmdldEVt\nYmVkZGVkKCkuZ2V0SW50RmllbGQoKSk7DQoNCiAgICAgICAgZW5kVHgocG0p\nOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgdGVzdFNoYXJlKCkgew0KICAgICAgICBFbnRpdHlNYW5hZ2VyIHBtID0g\nY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgc3RhcnRUeChwbSk7\nDQoNCiAgICAgICAgRW1iZWRkZWRPd25lclBDIHBjMSA9IHBtLmZpbmQoRW1i\nZWRkZWRPd25lclBDLmNsYXNzLCBpZDEpOw0KICAgICAgICBhc3NlcnROb3RO\ndWxsKCJwYzEgaXMgbnVsbCBpbiB0ZXN0c2hhcmUiLCBwYzEpOw0KDQogICAg\nICAgIEVtYmVkZGVkT3duZXJQQyBwYzIgPSBwbS5maW5kKEVtYmVkZGVkT3du\nZXJQQy5jbGFzcywgaWQyKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVsbCgicGMy\nIGlzIG51bGwgaW4gdGVzdHNoYXJlIiwgcGMyKTsNCg0KICAgICAgICBFbWJl\nZGRlZFBDIGVtYmVkMSA9IHBjMS5nZXRFbWJlZGRlZCgpOw0KDQogICAgICAg\nIHBtLnBlcnNpc3QoZW1iZWQxKTsNCiAgICAgICAgSW50ZWdlciBvaWQgPSBu\nZXcgSW50ZWdlcigxKTsNCiAgICAgICAgZW5kVHgocG0pOw0KDQogICAgICAg\nIGFzc2VydEVxdWFscygiZW1iZWRTdHJpbmcxIiwgZW1iZWQxLmdldFN0cmlu\nZ0ZpZWxkKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoImVtYmVkU3RyaW5n\nMSIsIHBjMS5nZXRFbWJlZGRlZCgpLmdldFN0cmluZ0ZpZWxkKCkpOw0KDQog\nICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICAvLyBtYWtlIHN1cmUgdGhl\nIGNoYW5nZXMgc3RpY2sNCiAgICAgICAgcG0gPSBjdXJyZW50RW50aXR5TWFu\nYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgcGMxID0g\ncG0uZmluZChFbWJlZGRlZE93bmVyUEMuY2xhc3MsIGlkMSk7DQogICAgICAg\nIGFzc2VydE5vdE51bGwoInBjMSBpcyBudWxsIGluIHRlc3RzaGFyZSAybmQg\nZmluZCIsIHBjMSk7DQogICAgICAgIHBjMiA9IHBtLmZpbmQoRW1iZWRkZWRP\nd25lclBDLmNsYXNzLCBpZDIpOw0KICAgICAgICBhc3NlcnROb3ROdWxsKCJw\nYzIgaXMgbnVsbCBpbiB0ZXN0c2hhcmUgMm5kIGZpbmQiLCBwYzIpOw0KICAg\nICAgICBlbWJlZDEgPSBwbS5maW5kKEVtYmVkZGVkUEMuY2xhc3MsIG9pZC5p\nbnRWYWx1ZSgpKTsNCg0KICAgICAgICBpZiAoZW1iZWQxICE9IG51bGwpIHsN\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscygiZW1iZWRTdHJpbmcxIiwgZW1i\nZWQxLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJlbWJlZFN0cmluZzEiLCBwYzEuZ2V0RW1iZWRkZWQoKS5nZXRTdHJp\nbmdGaWVsZCgpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGVuZFR4KHBtKTsN\nCiAgICAgICAgZW5kRW0ocG0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIHRlc3RPcHRpbWlzdGljTG9ja2luZzIoKSB7DQogICAgICAgIEVudGl0eU1h\nbmFnZXIgcG0xID0gZ2V0UE0odHJ1ZSwgZmFsc2UpOw0KICAgICAgICBzdGFy\ndFR4KHBtMSk7DQoNCiAgICAgICAgRW1iZWRkZWRPd25lclBDIHBjMSA9IHBt\nMS5maW5kKEVtYmVkZGVkT3duZXJQQy5jbGFzcywgaWQxKTsNCiAgICAgICAg\nYXNzZXJ0Tm90TnVsbCgicGMxIGlzIG51bGwgaW4gdGVzdG9wdGxvY2syIiwg\ncGMxKTsNCg0KICAgICAgICBFbnRpdHlNYW5hZ2VyIHBtMiA9IGN1cnJlbnRF\nbnRpdHlNYW5hZ2VyKCk7DQoNCiAgICAgICAgc3RhcnRUeChwbTIpOw0KICAg\nICAgICBFbWJlZGRlZE93bmVyUEMgcGMyID0gcG0xLmZpbmQoRW1iZWRkZWRP\nd25lclBDLmNsYXNzLCBpZDEpOw0KDQogICAgICAgIGFzc2VydE5vdE51bGwo\nInBjMiBpcyBudWxsIGluIHRlc3RvcHRsb2NrMiIsIHBjMik7DQoNCiAgICAg\nICAgRW1iZWRkZWRQQyBlbWJlZDIgPSBwYzIuZ2V0RW1iZWRkZWQoKTsNCiAg\nICAgICAgZW1iZWQyLnNldFN0cmluZ0ZpZWxkKCJ4eHh4Iik7DQoNCiAgICAg\nICAgZW5kVHgocG0yKTsNCiAgICAgICAgZW5kRW0ocG0yKTsNCg0KICAgICAg\nICBFbWJlZGRlZFBDIGVtYmVkMSA9IHBjMS5nZXRFbWJlZGRlZCgpOw0KICAg\nICAgICBlbWJlZDEuc2V0U3RyaW5nRmllbGQoInl5eXkiKTsNCiAgICAgICAg\ndHJ5IHsNCiAgICAgICAgICAgIGVuZFR4KHBtMSk7DQogICAgICAgICAgICBm\nYWlsKCJTaG91bGQgaGF2ZSB0aHJvd24gYW4gT0wgZXhjZXB0aW9uLiIpOw0K\nICAgICAgICB9DQogICAgICAgIGNhdGNoIChFeGNlcHRpb24gb3ZlKSB7DQog\nICAgICAgIH0NCiAgICAgICAgZmluYWxseSB7DQogICAgICAgICAgICBlbmRF\nbShwbTEpOw0KICAgICAgICB9DQogICAgfQ0KfQ==\n","encoding":"base64"}

