{"sha":"f3dd415d16488b5b3ce423f055a00a092e2b52bd","node_id":"MDQ6QmxvYjIwNjM2NDpmM2RkNDE1ZDE2NDg4YjViM2NlNDIzZjA1NWEwMGEwOTJlMmI1MmJk","size":6547,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f3dd415d16488b5b3ce423f055a00a092e2b52bd","content":"LyoNCiAqIFRlc3RFeHRlbnRzMi5qYXZhDQogKg0KICogQ3JlYXRlZCBvbiBP\nY3RvYmVyIDEwLCAyMDA2LCA1OjMwIFBNDQogKg0KICogVG8gY2hhbmdlIHRo\naXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFnZXIN\nCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLg0KICov\nDQoNCi8qDQogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZv\ndW5kYXRpb24gKEFTRikgdW5kZXIgb25lDQogKiBvciBtb3JlIGNvbnRyaWJ1\ndG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUN\nCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFs\nIGluZm9ybWF0aW9uDQogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hp\ncC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlDQogKiB0byB5b3UgdW5k\nZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlDQogKiAi\nTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBp\nbiBjb21wbGlhbmNlDQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBv\nYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogKg0KICogaHR0cDov\nL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogKg0KICog\nVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0\nbyBpbiB3cml0aW5nLA0KICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIg\ndGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4NCiAqICJBUyBJUyIg\nQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFO\nWQ0KICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0\naGUgTGljZW5zZSBmb3IgdGhlDQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zl\ncm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zDQogKiB1bmRlciB0\naGUgTGljZW5zZS4gICAgDQogKi8NCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsNCg0KaW1wb3J0IGphdmEudXRpbC5J\ndGVyYXRvcjsNCg0KDQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLlJ1bnRpbWVUZXN0MTsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNv\nbW1vbi5hcHBzLlJ1bnRpbWVUZXN0MjsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLlJ1bnRpbWVU\nZXN0MzsNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5FeHRlbnQ7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOw0KDQpwdWJsaWMgY2xhc3MgVGVz\ndEV4dGVudHMyIGV4dGVuZHMgQmFzZUtlcm5lbFRlc3Qgew0KDQogICAgcHJp\ndmF0ZSBPYmplY3QgX29pZDEgPSBudWxsOw0KICAgIHByaXZhdGUgT2JqZWN0\nIF9vaWQyID0gbnVsbDsNCiAgICBwcml2YXRlIE9iamVjdCBfb2lkMyA9IG51\nbGw7DQoNCiAgICBwdWJsaWMgVGVzdEV4dGVudHMyKFN0cmluZyBuYW1lKSB7\nDQogICAgICAgIHN1cGVyKG5hbWUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAg\nICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdEV4dGVudHMyDQog\nICAgICovDQogICAgcHVibGljIFRlc3RFeHRlbnRzMigpIHsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsNCiAgICAgICAgZGVsZXRlQWxs\nKFJ1bnRpbWVUZXN0MS5jbGFzcyk7DQoNCiAgICAgICAgUnVudGltZVRlc3Qx\nIHRlc3QxID0gbmV3IFJ1bnRpbWVUZXN0MSgpOw0KICAgICAgICB0ZXN0MS5z\nZXRJbnRGaWVsZCgxKTsNCiAgICAgICAgUnVudGltZVRlc3QyIHRlc3QyID0g\nbmV3IFJ1bnRpbWVUZXN0MigpOw0KICAgICAgICB0ZXN0Mi5zZXRJbnRGaWVs\nZCgyKTsNCiAgICAgICAgdGVzdDIuc2V0SW50RmllbGQyKDIpOw0KICAgICAg\nICBSdW50aW1lVGVzdDMgdGVzdDMgPSBuZXcgUnVudGltZVRlc3QzKCk7DQog\nICAgICAgIHRlc3QzLnNldEludEZpZWxkKDMpOw0KICAgICAgICB0ZXN0My5z\nZXRJbnRGaWVsZDMoMyk7DQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAg\nICAgcG0ucGVyc2lzdCh0ZXN0MSk7DQogICAgICAgIHBtLnBlcnNpc3QodGVz\ndDIpOw0KICAgICAgICBwbS5wZXJzaXN0KHRlc3QzKTsNCiAgICAgICAgX29p\nZDEgPSBwbS5nZXRPYmplY3RJZCh0ZXN0MSk7DQogICAgICAgIF9vaWQyID0g\ncG0uZ2V0T2JqZWN0SWQodGVzdDIpOw0KICAgICAgICBfb2lkMyA9IHBtLmdl\ndE9iamVjdElkKHRlc3QzKTsNCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAg\nICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFBy\nb3BlcnRpZXMoKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nID0gZ2V0UE0oKTsNCiAgICAgICAgRXh0ZW50IGV4dCA9IHBtLmNyZWF0ZUV4\ndGVudChSdW50aW1lVGVzdDIuY2xhc3MsIGZhbHNlKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKHBtLCBleHQuZ2V0RW50aXR5TWFuYWdlcigpKTsNCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKFJ1bnRpbWVUZXN0Mi5jbGFzcywgZXh0LmdldEVs\nZW1lbnRDbGFzcygpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSghZXh0Lmhhc1N1\nYmNsYXNzZXMoKSk7DQoNCiAgICAgICAgZXh0ID0gcG0uY3JlYXRlRXh0ZW50\nKFJ1bnRpbWVUZXN0MS5jbGFzcywgdHJ1ZSk7DQogICAgICAgIGFzc2VydEVx\ndWFscyhwbSwgZXh0LmdldEVudGl0eU1hbmFnZXIoKSk7DQogICAgICAgIGFz\nc2VydEVxdWFscyhSdW50aW1lVGVzdDEuY2xhc3MsIGV4dC5nZXRFbGVtZW50\nQ2xhc3MoKSk7DQogICAgICAgIGFzc2VydFRydWUoZXh0Lmhhc1N1YmNsYXNz\nZXMoKSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdE5vU3ViY2xh\nc3NlcygpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBn\nZXRQTSgpOw0KICAgICAgICBFeHRlbnQgZXh0ID0gcG0uY3JlYXRlRXh0ZW50\nKFJ1bnRpbWVUZXN0MS5jbGFzcywgZmFsc2UpOw0KICAgICAgICBJdGVyYXRv\nciBpdHIgPSBleHQuaXRlcmF0b3IoKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShp\ndHIuaGFzTmV4dCgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKF9vaWQxLCBw\nbS5nZXRPYmplY3RJZChpdHIubmV4dCgpKSk7DQogICAgICAgIGFzc2VydFRy\ndWUoIWl0ci5oYXNOZXh0KCkpOw0KICAgICAgICBleHQuY2xvc2VBbGwoKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3ViY2xhc3NlcygpIHsN\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0K\nICAgICAgICBFeHRlbnQgZXh0ID0gcG0uY3JlYXRlRXh0ZW50KFJ1bnRpbWVU\nZXN0MS5jbGFzcywgdHJ1ZSk7DQoNCiAgICAgICAgaW50IHRlc3QxQ291bnQg\nPSAwOw0KICAgICAgICBpbnQgdGVzdDJDb3VudCA9IDA7DQogICAgICAgIGlu\ndCB0ZXN0M0NvdW50ID0gMDsNCiAgICAgICAgT2JqZWN0IG5leHQ7DQogICAg\nICAgIGZvciAoSXRlcmF0b3IgaXRyID0gZXh0Lml0ZXJhdG9yKCk7IGl0ci5o\nYXNOZXh0KCk7KSB7DQogICAgICAgICAgICBuZXh0ID0gcG0uZ2V0T2JqZWN0\nSWQoaXRyLm5leHQoKSk7DQogICAgICAgICAgICBpZiAoX29pZDEuZXF1YWxz\nKG5leHQpKQ0KICAgICAgICAgICAgICAgIHRlc3QxQ291bnQrKzsNCiAgICAg\nICAgICAgIGVsc2UgaWYgKF9vaWQyLmVxdWFscyhuZXh0KSkNCiAgICAgICAg\nICAgICAgICB0ZXN0MkNvdW50Kys7DQogICAgICAgICAgICBlbHNlIGlmIChf\nb2lkMy5lcXVhbHMobmV4dCkpDQogICAgICAgICAgICAgICAgdGVzdDNDb3Vu\ndCsrOw0KICAgICAgICB9DQogICAgICAgIGV4dC5jbG9zZUFsbCgpOw0KICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgdGVzdDFDb3VudCk7DQogICAgICAgIGFz\nc2VydEVxdWFscygxLCB0ZXN0MkNvdW50KTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIHRlc3QzQ291bnQpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIHRlc3RDb250YWluc05ld2x5UGVyc2lzdGVkKCkgew0KICAgICAgICBSdW50\naW1lVGVzdDEgdGVzdDEgPSBuZXcgUnVudGltZVRlc3QxKCk7DQogICAgICAg\nIFJ1bnRpbWVUZXN0MSB0ZXN0MiA9IG5ldyBSdW50aW1lVGVzdDIoKTsNCg0K\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7DQoN\nCiAgICAgICAgLy8gcGNsOiAxNCBPY3QgMjAwMzogZGVmYXVsdCBpbiAzLjAg\naXMgbm93IHRydWUsIGJ1dCB0aGlzIHRlc3QNCiAgICAgICAgLy8gYXNzdW1l\ncyBmYWxzZSBzb21ld2hlcmUuDQoNCiAgICAgICAgcG0uc2V0SWdub3JlQ2hh\nbmdlcyhmYWxzZSk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICB0\ncnkgew0KICAgICAgICAgICAgcG0ucGVyc2lzdCh0ZXN0MSk7DQogICAgICAg\nICAgICBwbS5wZXJzaXN0KHRlc3QyKTsNCiAgICAgICAgICAgIE9iamVjdCBu\nZXdPaWQgPSBwbS5nZXRPYmplY3RJZCh0ZXN0MSk7DQoNCiAgICAgICAgICAg\nIEV4dGVudCBleHQgPSBwbS5jcmVhdGVFeHRlbnQoUnVudGltZVRlc3QxLmNs\nYXNzLCBmYWxzZSk7DQogICAgICAgICAgICBib29sZWFuIGZvdW5kT2lkMSA9\nIGZhbHNlOw0KICAgICAgICAgICAgYm9vbGVhbiBmb3VuZE5ldyA9IGZhbHNl\nOw0KICAgICAgICAgICAgT2JqZWN0IG5leHQ7DQogICAgICAgICAgICBmb3Ig\nKEl0ZXJhdG9yIGl0ciA9IGV4dC5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgp\nOykgew0KICAgICAgICAgICAgICAgIG5leHQgPSBwbS5nZXRPYmplY3RJZChp\ndHIubmV4dCgpKTsNCiAgICAgICAgICAgICAgICBpZiAoX29pZDEuZXF1YWxz\nKG5leHQpKQ0KICAgICAgICAgICAgICAgICAgICBmb3VuZE9pZDEgPSB0cnVl\nOw0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5ld09pZC5lcXVhbHMobmV4\ndCkpDQogICAgICAgICAgICAgICAgICAgIGZvdW5kTmV3ID0gdHJ1ZTsNCiAg\nICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGZhaWwo\nIkJhZCBvYmplY3QgaW4gZXh0ZW50LiIpOw0KICAgICAgICAgICAgfQ0KICAg\nICAgICAgICAgZXh0LmNsb3NlQWxsKCk7DQogICAgICAgICAgICBhc3NlcnRU\ncnVlKGZvdW5kT2lkMSk7DQogICAgICAgICAgICBhc3NlcnRUcnVlKGZvdW5k\nTmV3KTsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIHJvbGxi\nYWNrVHgocG0pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgdGVzdE5vdENvbnRhaW5zTmV3bHlEZWxldGVkKCkgew0KICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7DQoNCiAgICAgICAg\nLy8gcGNsOiAxNCBPY3QgMjAwMzogZGVmYXVsdCBpbiAzLjAgaXMgbm93IHRy\ndWUsIGJ1dCB0aGlzIHRlc3QNCiAgICAgICAgLy8gYXNzdW1lcyBmYWxzZSBz\nb21ld2hlcmUuDQogICAgICAgIHBtLnNldElnbm9yZUNoYW5nZXMoZmFsc2Up\nOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgdHJ5IHsNCiAgICAg\nICAgICAgIFJ1bnRpbWVUZXN0MiB0ZXN0MiA9DQogICAgICAgICAgICAgICAg\nKFJ1bnRpbWVUZXN0MikgcG0uZmluZChSdW50aW1lVGVzdDIuY2xhc3MsIF9v\naWQyKTsNCiAgICAgICAgICAgIHBtLnJlbW92ZSh0ZXN0Mik7DQogICAgICAg\nICAgICBSdW50aW1lVGVzdDEgdGVzdDEgPSBuZXcgUnVudGltZVRlc3QxKCk7\nDQogICAgICAgICAgICBwbS5wZXJzaXN0KHRlc3QxKTsNCiAgICAgICAgICAg\nIHBtLnJlbW92ZSh0ZXN0MSk7DQoNCiAgICAgICAgICAgIEV4dGVudCBleHQg\nPSBwbS5jcmVhdGVFeHRlbnQoUnVudGltZVRlc3QxLmNsYXNzLCB0cnVlKTsN\nCiAgICAgICAgICAgIGJvb2xlYW4gZm91bmRPaWQxID0gZmFsc2U7DQogICAg\nICAgICAgICBib29sZWFuIGZvdW5kT2lkMyA9IGZhbHNlOw0KICAgICAgICAg\nICAgT2JqZWN0IG5leHQ7DQogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0\nciA9IGV4dC5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgew0KICAgICAg\nICAgICAgICAgIG5leHQgPSBwbS5nZXRPYmplY3RJZChpdHIubmV4dCgpKTsN\nCiAgICAgICAgICAgICAgICBpZiAoX29pZDEuZXF1YWxzKG5leHQpKQ0KICAg\nICAgICAgICAgICAgICAgICBmb3VuZE9pZDEgPSB0cnVlOw0KICAgICAgICAg\nICAgICAgIGVsc2UgaWYgKF9vaWQzLmVxdWFscyhuZXh0KSkNCiAgICAgICAg\nICAgICAgICAgICAgZm91bmRPaWQzID0gdHJ1ZTsNCiAgICAgICAgICAgICAg\nICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGZhaWwoIkJhZCBvYmplY3Qg\naW4gZXh0ZW50LiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZXh0\nLmNsb3NlQWxsKCk7DQogICAgICAgICAgICBhc3NlcnRUcnVlKGZvdW5kT2lk\nMSk7DQogICAgICAgICAgICBhc3NlcnRUcnVlKGZvdW5kT2lkMyk7DQogICAg\nICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICByb2xsYmFja1R4KHBtKTsN\nCiAgICAgICAgfQ0KICAgIH0NCn0NCg==\n","encoding":"base64"}

