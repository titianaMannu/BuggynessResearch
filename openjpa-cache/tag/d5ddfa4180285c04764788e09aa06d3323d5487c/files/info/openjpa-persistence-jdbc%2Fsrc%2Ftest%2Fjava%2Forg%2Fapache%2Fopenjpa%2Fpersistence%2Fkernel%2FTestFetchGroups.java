{"sha":"3b58ec63ac083462b1def2d38ed5cda50db06d77","node_id":"MDQ6QmxvYjIwNjM2NDozYjU4ZWM2M2FjMDgzNDYyYjFkZWYyZDM4ZWQ1Y2RhNTBkYjA2ZDc3","size":14172,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3b58ec63ac083462b1def2d38ed5cda50db06d77","content":"LyoNCiAqIFRlc3RGZXRjaEdyb3Vwcy5qYXZhDQogKg0KICogQ3JlYXRlZCBv\nbiBPY3RvYmVyIDEwLCAyMDA2LCA1OjQ2IFBNDQogKg0KICogVG8gY2hhbmdl\nIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFn\nZXINCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLg0K\nICovDQoNCi8qDQogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJl\nIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lDQogKiBvciBtb3JlIGNvbnRy\naWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZp\nbGUNCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlv\nbmFsIGluZm9ybWF0aW9uDQogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVy\nc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlDQogKiB0byB5b3Ug\ndW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlDQog\nKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2Vw\ndCBpbiBjb21wbGlhbmNlDQogKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1h\neSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogKg0KICogaHR0\ncDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogKg0K\nICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVl\nZCB0byBpbiB3cml0aW5nLA0KICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5k\nZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4NCiAqICJBUyBJ\nUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9G\nIEFOWQ0KICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNl\nZSB0aGUgTGljZW5zZSBmb3IgdGhlDQogKiBzcGVjaWZpYyBsYW5ndWFnZSBn\nb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zDQogKiB1bmRl\nciB0aGUgTGljZW5zZS4gICAgDQogKi8NCnBhY2thZ2Ugb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsNCg0KaW1wb3J0IGphdmEudXRp\nbC5BcnJheXM7DQppbXBvcnQgamF2YS51dGlsLkJpdFNldDsNCmltcG9ydCBq\nYXZhLnV0aWwuRGF0ZTsNCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsNCmlt\ncG9ydCBqYXZhLnV0aWwuSGFzaFNldDsNCmltcG9ydCBqYXZhLnV0aWwuTWFw\nOw0KDQoNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5rZXJuZWwuY29tbW9uLmFwcHMuQXR0YWNoQTsNCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkF0\ndGFjaEI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmtlcm5lbC5jb21tb24uYXBwcy5BdHRhY2hDOw0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMuQXR0\nYWNoRDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\na2VybmVsLmNvbW1vbi5hcHBzLkF0dGFjaEU7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21tb24uYXBwcy5BdHRh\nY2hGOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5r\nZXJuZWwuY29tbW9uLmFwcHMuRmV0Y2hHcm91cFRlc3RPYmplY3Q7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21t\nb24uYXBwcy5GZXRjaEdyb3VwVGVzdE9iamVjdENoaWxkOw0KDQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2Vy\nOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkZpZWxkTWV0YURh\ndGE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkZl\ndGNoUGxhbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neTsNCg0KcHVibGljIGNsYXNzIFRlc3RGZXRjaEdyb3VwcyBleHRlbmRzIEJh\nc2VLZXJuZWxUZXN0IHsNCg0KICAgIHByaXZhdGUgaW50IG9pZDE7DQogICAg\ncHJpdmF0ZSBpbnQgb2lkMjsNCiAgICBwcml2YXRlIGludCBvaWRjMTsNCg0K\nICAgIHB1YmxpYyBUZXN0RmV0Y2hHcm91cHMoU3RyaW5nIHMpIHsNCiAgICAg\nICAgc3VwZXIocyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQ3JlYXRl\ncyBhIG5ldyBpbnN0YW5jZSBvZiBUZXN0RmV0Y2hHcm91cHMNCiAgICAgKi8N\nCiAgICBwdWJsaWMgVGVzdEZldGNoR3JvdXBzKCkgew0KICAgIH0NCg0KICAg\nIHB1YmxpYyB2b2lkIHNldFVwKCkgew0KICAgICAgICBkZWxldGVBbGwoRmV0\nY2hHcm91cFRlc3RPYmplY3QuY2xhc3MpOw0KDQogICAgICAgIEZldGNoR3Jv\ndXBUZXN0T2JqZWN0IG8xID0gbmV3IEZldGNoR3JvdXBUZXN0T2JqZWN0KCk7\nDQogICAgICAgIC8vIHRoZSB2YWx1ZSB0aGF0ICdhJyBpcyBzZXQgdG8gaXMg\naW1wb3J0YW50IC0tIFRlc3RGZXRjaEdyb3Vwc0V4dGVudA0KICAgICAgICAv\nLyBhbmQgVGVzdEZldGNoR3JvdXBzUXVlcnkgcmVseSBvbiB0aGlzDQogICAg\nICAgIG8xLnNldEEoNSk7DQogICAgICAgIG8xLnNldEIoImZvbyIpOw0KICAg\nICAgICAvL28xLnNldEMgKG5ldyBCaWdJbnRlZ2VyICg4OSkpOw0KICAgICAg\nICBvMS5zZXREKG5ldyBEYXRlKCkpOw0KICAgICAgICBvMS5zZXRFKCJlLWZv\nbyIpOw0KICAgICAgICBvMS5zZXRGKCJmLWZvbyIpOw0KDQogICAgICAgIEZl\ndGNoR3JvdXBUZXN0T2JqZWN0IG8yID0gbmV3IEZldGNoR3JvdXBUZXN0T2Jq\nZWN0KCk7DQogICAgICAgIC8vIHRoZSB2YWx1ZSB0aGF0ICdhJyBpcyBzZXQg\ndG8gaXMgaW1wb3J0YW50IC0tIFRlc3RGZXRjaEdyb3Vwc0V4dGVudA0KICAg\nICAgICAvLyBhbmQgVGVzdEZldGNoR3JvdXBzUXVlcnkgcmVseSBvbiB0aGlz\nDQogICAgICAgIG8yLnNldEEoMyk7DQogICAgICAgIG8yLnNldEIoImJhciIp\nOw0KICAgICAgICAvL28yLnNldEMgKG5ldyBCaWdJbnRlZ2VyICgxMykpOw0K\nICAgICAgICBvMi5zZXREKG5ldyBEYXRlKCkpOw0KICAgICAgICBvMi5zZXRF\nKCJlLWJhciIpOw0KICAgICAgICBvMi5zZXRGKCJmLWJhciIpOw0KICAgICAg\nICBvMi5zZXRHKG8xKTsNCiAgICAgICAgbzIuc2V0SChvMSk7DQoNCiAgICAg\nICAgRmV0Y2hHcm91cFRlc3RPYmplY3RDaGlsZCBjMSA9IG5ldyBGZXRjaEdy\nb3VwVGVzdE9iamVjdENoaWxkKCk7DQogICAgICAgIC8vIHRoZSB2YWx1ZSB0\naGF0ICdhJyBpcyBzZXQgdG8gaXMgaW1wb3J0YW50IC0tIFRlc3RGZXRjaEdy\nb3Vwc0V4dGVudA0KICAgICAgICAvLyBhbmQgVGVzdEZldGNoR3JvdXBzUXVl\ncnkgcmVseSBvbiB0aGlzDQogICAgICAgIGMxLnNldEEoNCk7DQogICAgICAg\nIGMxLnNldEIoImNoaWxkIik7DQogICAgICAgIGMxLnNldEQobmV3IERhdGUo\nKSk7DQogICAgICAgIGMxLnNldEUoImUtYmF6Iik7DQogICAgICAgIGMxLnNl\ndEYoImYtYmF6Iik7DQogICAgICAgIGMxLnNldEcobzEpOw0KICAgICAgICBj\nMS5zZXRIKG8xKTsNCiAgICAgICAgYzEuc2V0Q2hpbGRBKDEpOw0KICAgICAg\nICBjMS5zZXRDaGlsZEIoMik7DQogICAgICAgIGMxLnNldENoaWxkQygzKTsN\nCiAgICAgICAgYzEuc2V0Q2hpbGREKDQpOw0KDQogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgc3RhcnRUeChw\nbSk7DQoNCiAgICAgICAgcG0ucGVyc2lzdChvMSk7DQogICAgICAgIHBtLnBl\ncnNpc3QobzIpOw0KICAgICAgICBwbS5wZXJzaXN0KGMxKTsNCiAgICAgICAg\nZW5kVHgocG0pOw0KDQogICAgICAgIG9pZDEgPSBvMS5nZXRJZCgpOw0KICAg\nICAgICBvaWQyID0gbzIuZ2V0SWQoKTsNCiAgICAgICAgb2lkYzEgPSBjMS5n\nZXRJZCgpOw0KDQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RmV0Y2hHcm91cHNGcm9tQ29uZmlndXJhdGlvbigp\nIHsNCiAgICAgICAgTWFwIHByb3BzID0gbmV3IEhhc2hNYXAoKTsNCiAgICAg\nICAgcHJvcHMucHV0KCJvcGVuanBhLkZldGNoR3JvdXBzIiwgImRlZmF1bHQs\nZmcxLGZnMiIpOw0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rv\ncnkgZmFjdG9yeSA9IGdldEVtZihwcm9wcyk7DQoNCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG0gPQ0KICAgICAgICAgICAgKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKSBmYWN0b3J5LmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgY2hlY2tHcm91cHMocG0sIG5ldyBTdHJpbmdbXXsgImZnMSIsICJm\nZzIiIH0pOw0KICAgICAgICBmYWN0b3J5LmNsb3NlKCk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdEZldGNoR3JvdXBzTm9Db25maWd1cmF0aW9u\nKCkgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBN\nKCk7DQoNCiAgICAgICAgRmV0Y2hHcm91cFRlc3RPYmplY3QgbzEgPSBnZXRP\nMShwbSk7DQogICAgICAgIEZldGNoR3JvdXBUZXN0T2JqZWN0IG8yID0gZ2V0\nTzIocG0pOw0KDQogICAgICAgIC8vIG9ubHkgZmllbGQgYSBzaG91bGQgYmUg\nbG9hZGVkLg0KICAgICAgICBjaGVja09iamVjdChwbSwgbzEsIHRydWUsIGZh\nbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7DQoNCiAgICAgICAg\nLy8gdXBvbiBsb2FkaW5nIGZpZWxkIGIsIGZpZWxkcyBjIGFuZCBkIHNob3Vs\nZCBhbHNvIGJlIGxvYWRlZCwNCiAgICAgICAgLy8gYnV0IGUgYW5kIGYgc2hv\ndWxkIG5vdC4NCiAgICAgICAgbzEuZ2V0QigpOw0KICAgICAgICBjaGVja09i\namVjdChwbSwgbzEsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIGZhbHNlLCBm\nYWxzZSk7DQoNCiAgICAgICAgLy8gbG9hZGluZyBmaWVsZCBoIHNob3VsZCBu\nb3QgY2F1c2UgYW55IG9mIHRoZSBvdGhlcnMgdG8gYmUgbG9hZGVkLg0KICAg\nICAgICBhc3NlcnRFcXVhbHMobzEsIG8yLmdldEgoKSk7DQogICAgICAgIGNo\nZWNrT2JqZWN0KHBtLCBvMiwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwg\nZmFsc2UsIGZhbHNlKTsNCg0KICAgICAgICAvLyBsb2FkaW5nIGZpZWxkIGcg\nc2hvdWxkIGNhdXNlIGUgYW5kIGYgdG8gYmUgbG9hZGVkLg0KICAgICAgICBh\nc3NlcnRFcXVhbHMobzEsIG8yLmdldEcoKSk7DQogICAgICAgIGNoZWNrT2Jq\nZWN0KHBtLCBvMiwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwg\ndHJ1ZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFJldHJpZXZl\nQWxsKCkgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdl\ndFBNKCk7DQoNCiAgICAgICAgRmV0Y2hHcm91cFRlc3RPYmplY3QgbzEgPSBn\nZXRPMShwbSk7DQogICAgICAgIEZldGNoR3JvdXBUZXN0T2JqZWN0IG8yID0g\nZ2V0TzIocG0pOw0KDQogICAgICAgIC8vIG9ubHkgZmllbGQgYSBzaG91bGQg\nYmUgbG9hZGVkLg0KICAgICAgICBjaGVja09iamVjdChwbSwgbzEsIHRydWUs\nIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7DQogICAgICAg\nIGNoZWNrT2JqZWN0KHBtLCBvMiwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxz\nZSwgZmFsc2UsIGZhbHNlKTsNCg0KICAgICAgICAvLyBvbmx5IGZpZWxkIGEg\nc2hvdWxkIGJlIGxvYWRlZC4NCiAgICAgICAgcG0ucmV0cmlldmUobzEpOw0K\nICAgICAgICBjaGVja09iamVjdChwbSwgbzEsIHRydWUsIGZhbHNlLCBmYWxz\nZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7DQoNCiAgICAgICAgLy8gQWRkIGdy\nb3VwcyAxIGFuZCAzIHRvIHRoZSBkZWZhdWx0IGZldGNoIGNvbmZpZ3VyYXRp\nb24uDQogICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFkZEZldGNoR3JvdXAo\nImcxIik7DQogICAgICAgIHBtLmdldEZldGNoUGxhbigpLmFkZEZldGNoR3Jv\ndXAoImczIik7DQoNCiAgICAgICAgLy8gUmV0cmlldmUgbzEncyAiREZHIiB3\naGljaCB3aWxsIGFjdHVhbGx5IGRvIGFsbCBjb25maWd1cmVkDQogICAgICAg\nIC8vIGZldGNoIGdyb3Vwcy4NCiAgICAgICAgLy8gREZHIGZpZWxkcyBhbmQg\nZmllbGRzIGluIGdyb3VwcyAxIGFuZCAzIHNob3VsZCBiZSBsb2FkZWQNCiAg\nICAgICAgcG0ucmV0cmlldmUobzEpOw0KICAgICAgICBjaGVja09iamVjdChw\nbSwgbzEsIHRydWUsIHRydWUsIHRydWUsIHRydWUsIGZhbHNlLCBmYWxzZSk7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEZldGNoR3JvdXBDb25m\naWd1cmF0aW9uKCkgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBw\nbSA9IGdldFBNKCk7DQogICAgICAgIEZldGNoUGxhbiBmZXRjaCA9IHBtLmdl\ndEZldGNoUGxhbigpOw0KDQogICAgICAgIGNoZWNrR3JvdXBzKHBtLCBuZXcg\nU3RyaW5nWzBdKTsNCg0KICAgICAgICBmZXRjaC5hZGRGZXRjaEdyb3VwKCJm\nb28iKTsNCiAgICAgICAgY2hlY2tHcm91cHMocG0sIG5ldyBTdHJpbmdbXXsg\nImZvbyIgfSk7DQoNCiAgICAgICAgZmV0Y2guYWRkRmV0Y2hHcm91cCgiYmFy\nIik7DQogICAgICAgIGZldGNoLmFkZEZldGNoR3JvdXAoImJheiIpOw0KICAg\nICAgICBjaGVja0dyb3VwcyhwbSwgbmV3IFN0cmluZ1tdeyAiZm9vIiwgImJh\nciIsICJiYXoiIH0pOw0KDQogICAgICAgIGZldGNoLmFkZEZldGNoR3JvdXAo\nImEiKTsNCiAgICAgICAgZmV0Y2guYWRkRmV0Y2hHcm91cCgiYiIpOw0KICAg\nICAgICBmZXRjaC5hZGRGZXRjaEdyb3VwKCJjIik7DQogICAgICAgIGZldGNo\nLmFkZEZldGNoR3JvdXAoImQiKTsNCiAgICAgICAgY2hlY2tHcm91cHMocG0s\nIG5ldyBTdHJpbmdbXQ0KICAgICAgICAgICAgeyAiZm9vIiwgImJhciIsICJi\nYXoiLCAiYSIsICJiIiwgImMiLCAiZCIgfSk7DQoNCiAgICAgICAgZmV0Y2gu\ncmVtb3ZlRmV0Y2hHcm91cCgiYmFyIik7DQogICAgICAgIGNoZWNrR3JvdXBz\nKHBtLCBuZXcgU3RyaW5nW117ICJmb28iLCAiYmF6IiwgImEiLCAiYiIsICJj\nIiwgImQiIH0pOw0KDQogICAgICAgIGZldGNoLnJlbW92ZUZldGNoR3JvdXAo\nImJheiIpOw0KICAgICAgICBmZXRjaC5yZW1vdmVGZXRjaEdyb3VwKCJjIik7\nDQogICAgICAgIGNoZWNrR3JvdXBzKHBtLCBuZXcgU3RyaW5nW117ICJmb28i\nLCAiYSIsICJiIiwgImQiIH0pOw0KDQogICAgICAgIGZldGNoLmNsZWFyRmV0\nY2hHcm91cHMoKS5hZGRGZXRjaEdyb3VwKEZldGNoUGxhbi5HUk9VUF9ERUZB\nVUxUKTsNCiAgICAgICAgY2hlY2tHcm91cHMocG0sIG5ldyBTdHJpbmdbMF0p\nOw0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBjaGVja0dyb3VwcyhPcGVu\nSlBBRW50aXR5TWFuYWdlciBwbSwgU3RyaW5nW10gZ3JvdXBzKSB7DQogICAg\nICAgIEhhc2hTZXQgZ3JvdXBTZXQgPSBuZXcgSGFzaFNldChBcnJheXMuYXNM\naXN0KGdyb3VwcykpOw0KICAgICAgICBncm91cFNldC5hZGQoRmV0Y2hQbGFu\nLkdST1VQX0RFRkFVTFQpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoImdyb3Vw\nU2V0IGRvbnQgbWF0Y2giLCBncm91cFNldCwNCiAgICAgICAgICAgIG5ldyBI\nYXNoU2V0KHBtLmdldEZldGNoUGxhbigpLmdldEZldGNoR3JvdXBzKCkpKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hHcm91cHNDaGls\nZFdpdGhDb25maWd1cmF0aW9uKCkgew0KICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9IGdldFBNKCk7DQogICAgICAgIHBtLmdldEZldGNoUGxh\nbigpLmFkZEZldGNoR3JvdXAoImcxIik7DQogICAgICAgIHBtLmdldEZldGNo\nUGxhbigpLmFkZEZldGNoR3JvdXAoImczIik7DQoNCiAgICAgICAgLy8gZ2V0\nIHRoaXMgc28gdGhhdCBoJ3MgdmFsdWUgaXMgbG9hZGVkIGludG8gY2FjaGUu\nDQogICAgICAgIEZldGNoR3JvdXBUZXN0T2JqZWN0IG8xID0gZ2V0TzEocG0p\nOw0KDQogICAgICAgIEZldGNoR3JvdXBUZXN0T2JqZWN0Q2hpbGQgYzEgPSBn\nZXRDMShwbSk7DQoNCiAgICAgICAgLy8gREZHIGZpZWxkcyBhbmQgZmllbGRz\nIGluIGdyb3VwcyAxIGFuZCAzIHNob3VsZCBiZSBsb2FkZWQNCiAgICAgICAg\nY2hlY2tDaGlsZE9iamVjdChwbSwgYzEsIHRydWUsIHRydWUsIHRydWUsIHRy\ndWUsIGZhbHNlLCBmYWxzZSwNCiAgICAgICAgICAgIHRydWUsIHRydWUsIGZh\nbHNlLCB0cnVlKTsNCg0KICAgICAgICAvLyB1cG9uIGFjY2Vzc2luZyBmaWVs\nZCBiLCBub3RoaW5nIHNob3VsZCBjaGFuZ2UuDQogICAgICAgIGMxLmdldEIo\nKTsNCiAgICAgICAgY2hlY2tDaGlsZE9iamVjdChwbSwgYzEsIHRydWUsIHRy\ndWUsIHRydWUsIHRydWUsIGZhbHNlLCBmYWxzZSwNCiAgICAgICAgICAgIHRy\ndWUsIHRydWUsIGZhbHNlLCB0cnVlKTsNCg0KICAgICAgICBjMS5nZXRIKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEZldGNoR3JvdXBzV2l0\naENvbmZpZ3VyYXRpb24oKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0gZ2V0UE0oKTsNCg0KICAgICAgICBwbS5nZXRGZXRjaFBsYW4o\nKS5hZGRGZXRjaEdyb3VwKCJnMSIpOw0KICAgICAgICBwbS5nZXRGZXRjaFBs\nYW4oKS5hZGRGZXRjaEdyb3VwKCJnMyIpOw0KDQogICAgICAgIEZldGNoR3Jv\ndXBUZXN0T2JqZWN0IG8xID0gZ2V0TzEocG0pOw0KICAgICAgICBGZXRjaEdy\nb3VwVGVzdE9iamVjdCBvMiA9IGdldE8yKHBtKTsNCg0KICAgICAgICAvLyBE\nRkcgZmllbGRzIGFuZCBmaWVsZHMgaW4gZ3JvdXBzIDEgYW5kIDMgc2hvdWxk\nIGJlIGxvYWRlZA0KICAgICAgICBjaGVja09iamVjdChwbSwgbzEsIHRydWUs\nIHRydWUsIHRydWUsIHRydWUsIGZhbHNlLCBmYWxzZSk7DQoNCiAgICAgICAg\nLy8gdXBvbiBhY2Nlc3NpbmcgZmllbGQgYiwgbm90aGluZyBzaG91bGQgY2hh\nbmdlLg0KICAgICAgICBvMS5nZXRCKCk7DQogICAgICAgIGNoZWNrT2JqZWN0\nKHBtLCBvMSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNl\nKTsNCg0KICAgICAgICAvLyBsb2FkaW5nIGZpZWxkIGggc2hvdWxkIG5vdCBj\nYXVzZSBhbnkgb2YgdGhlIG90aGVycyB0byBiZSBsb2FkZWQuDQogICAgICAg\nIGFzc2VydEVxdWFscyhvMSwgbzIuZ2V0SCgpKTsNCiAgICAgICAgY2hlY2tP\nYmplY3QocG0sIG8yLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCBmYWxzZSwg\nZmFsc2UpOw0KDQogICAgICAgIC8vIGxvYWRpbmcgZmllbGQgZyBzaG91bGQg\nY2F1c2UgZSBhbmQgZiB0byBiZSBsb2FkZWQuDQogICAgICAgIGFzc2VydEVx\ndWFscyhvMSwgbzIuZ2V0RygpKTsNCiAgICAgICAgY2hlY2tPYmplY3QocG0s\nIG8yLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTsNCiAg\nICB9DQoNCiAgICAvKioNCiAgICAgKiBUZXN0cyB0aGF0IHJlbGF0aW9uIGZp\nZWxkcyBhcmUgbG9hZGVkIGltbWVkaWF0ZWx5IHdoZW4NCiAgICAgKiB0aGV5\nIGFyZSBpbiBvbmUgb2YgdGhlIFBNJ3MgY29uZmlndXJlZCBmZXRjaCBncm91\ncHMuDQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVzdFJlbGF0aW9uc0xv\nYWRlZCgpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBn\nZXRQTSgpOw0KICAgICAgICBwbS5nZXRGZXRjaFBsYW4oKS5hZGRGZXRjaEdy\nb3VwKCJnMiIpOw0KDQogICAgICAgIC8vIG5vdGU6IGltcG9ydGFudCB0aGUg\nbzEgaXMgKm5vdCogaW4gcG0ncyBjYWNoZSBhdCB0aGlzIHBvaW50LCBzbyB0\naGF0DQogICAgICAgIC8vIHdlIGtub3cgaXQgdGFrZXMgYW5vdGhlciBkYXRh\nc3RvcmUgdHJpcCB0byBnZXQgbzENCg0KICAgICAgICAvLyBsb2FkIG8yIGFu\nZCByZXRyaWV2ZSBpdHMgc3RhdGUgbWFuYWdlcg0KICAgICAgICBPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtID0gZ2V0U3RhdGVNYW5hZ2VyKGdldE8yKHBtKSwg\ncG0pOw0KICAgICAgICBhc3NlcnROb3ROdWxsKCJTTSBpcyBOVUxMIiwgc20p\nOw0KDQogICAgICAgIC8vICdnJyBpcyB0aGUgbmFtZSBvZiBhIDEtMSByZWxh\ndGlvbiBmaWVsZCB0byBvMSBpbiBjb25maWd1cmVkDQogICAgICAgIC8vIGZl\ndGNoIGdyb3VwICdnMic7IG1ha2Ugc3VyZSBpdCBpcyBsb2FkZWQNCiAgICAg\nICAgaW50IGZpZWxkID0gc20uZ2V0TWV0YURhdGEoKS5nZXRGaWVsZCgiZyIp\nLmdldEluZGV4KCk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBhc3Nl\ncnRUcnVlKHNtLmdldExvYWRlZCgpLmdldChmaWVsZCkpOw0KICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKG9pZDEsDQogICAgICAgICAgICAgICAgKChGZXRj\naEdyb3VwVGVzdE9iamVjdCkgc20uZmV0Y2hPYmplY3RGaWVsZChmaWVsZCkp\nLmdldElkKCkpOw0KICAgICAgICB9IGNhdGNoIChqdW5pdC5mcmFtZXdvcmsu\nQXNzZXJ0aW9uRmFpbGVkRXJyb3IgYWZlKSB7DQogICAgICAgICAgICBidWco\nNjIzLCBhZmUsICJPbmUgdG8gb25lIG1hcHBpbmdzIGRvIG5vdCB3b3JrIHdp\ndGggY3VzdG9tICINCiAgICAgICAgICAgICAgICArICJmZXRjaCBncm91cHMi\nKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByb3RlY3RlZCB2b2lkIGNo\nZWNrT2JqZWN0KE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtLA0KICAgICAgICBG\nZXRjaEdyb3VwVGVzdE9iamVjdCBvLCBib29sZWFuIGEsIGJvb2xlYW4gYiwN\nCiAgICAgICAgYm9vbGVhbiBjLCBib29sZWFuIGQsIGJvb2xlYW4gZSwgYm9v\nbGVhbiBmKSB7DQogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBn\nZXRTdGF0ZU1hbmFnZXIobywgcG0pOw0KICAgICAgICBCaXRTZXQgbG9hZGVk\nID0gc20uZ2V0TG9hZGVkKCk7DQoNCiAgICAgICAgRmllbGRNZXRhRGF0YVtd\nIGZtZHMgPSBzbS5nZXRNZXRhRGF0YSgpLmdldEZpZWxkcygpOw0KICAgICAg\nICBpbnQgaSA9IDA7DQogICAgICAgIGZvciAoOyBpIDwgZm1kcy5sZW5ndGg7\nIGkrKykgew0KICAgICAgICAgICAgaWYgKGZtZHNbaV0uZ2V0TmFtZSgpLmVx\ndWFscygiYSIpKQ0KICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhhLCBs\nb2FkZWQuZ2V0KGkpKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGZtZHNbaV0u\nZ2V0TmFtZSgpLmVxdWFscygiYiIpKQ0KICAgICAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhiLCBsb2FkZWQuZ2V0KGkpKTsNCiAgICAgICAgICAgIGVsc2Ug\naWYgKGZtZHNbaV0uZ2V0TmFtZSgpLmVxdWFscygiYyIpKQ0KICAgICAgICAg\nICAgICAgIGFzc2VydEVxdWFscyhjLCBsb2FkZWQuZ2V0KGkpKTsNCiAgICAg\nICAgICAgIGVsc2UgaWYgKGZtZHNbaV0uZ2V0TmFtZSgpLmVxdWFscygiZCIp\nKQ0KICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhkLCBsb2FkZWQuZ2V0\nKGkpKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGZtZHNbaV0uZ2V0TmFtZSgp\nLmVxdWFscygiZSIpKQ0KICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhl\nLCBsb2FkZWQuZ2V0KGkpKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGZtZHNb\naV0uZ2V0TmFtZSgpLmVxdWFscygiZiIpKQ0KICAgICAgICAgICAgICAgIGFz\nc2VydEVxdWFscyhmLCBsb2FkZWQuZ2V0KGkpKTsNCiAgICAgICAgfQ0KICAg\nIH0NCg0KICAgIHByb3RlY3RlZCB2b2lkIGNoZWNrQ2hpbGRPYmplY3QoT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0sDQogICAgICAgIEZldGNoR3JvdXBUZXN0\nT2JqZWN0Q2hpbGQgbywgYm9vbGVhbiBhLCBib29sZWFuIGIsDQogICAgICAg\nIGJvb2xlYW4gYywgYm9vbGVhbiBkLCBib29sZWFuIGUsIGJvb2xlYW4gZiwg\nYm9vbGVhbiBjaGlsZEEsDQogICAgICAgIGJvb2xlYW4gY2hpbGRCLCBib29s\nZWFuIGNoaWxkQywgYm9vbGVhbiBjaGlsZEQpIHsNCiAgICAgICAgY2hlY2tP\nYmplY3QocG0sIG8sIGEsIGIsIGMsIGQsIGUsIGYpOw0KDQogICAgICAgIE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBnZXRTdGF0ZU1hbmFnZXIobywgcG0p\nOw0KICAgICAgICBCaXRTZXQgbG9hZGVkID0gc20uZ2V0TG9hZGVkKCk7DQoN\nCiAgICAgICAgRmllbGRNZXRhRGF0YVtdIGZtZHMgPSBzbS5nZXRNZXRhRGF0\nYSgpLmdldEZpZWxkcygpOw0KICAgICAgICBpbnQgaSA9IDA7DQogICAgICAg\nIGZvciAoOyBpIDwgZm1kcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAg\naWYgKGZtZHNbaV0uZ2V0TmFtZSgpLmVxdWFscygiY2hpbGRBIikpDQogICAg\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGNoaWxkQSwgbG9hZGVkLmdldChp\nKSk7DQogICAgICAgICAgICBlbHNlIGlmIChmbWRzW2ldLmdldE5hbWUoKS5l\ncXVhbHMoImNoaWxkQiIpKQ0KICAgICAgICAgICAgICAgIGFzc2VydEVxdWFs\ncyhjaGlsZEIsIGxvYWRlZC5nZXQoaSkpOw0KICAgICAgICAgICAgZWxzZSBp\nZiAoZm1kc1tpXS5nZXROYW1lKCkuZXF1YWxzKCJjaGlsZEMiKSkNCiAgICAg\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoY2hpbGRDLCBsb2FkZWQuZ2V0KGkp\nKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGZtZHNbaV0uZ2V0TmFtZSgpLmVx\ndWFscygiY2hpbGREIikpDQogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKGNoaWxkRCwgbG9hZGVkLmdldChpKSk7DQogICAgICAgIH0NCiAgICB9DQoN\nCiAgICBwcm90ZWN0ZWQgRmV0Y2hHcm91cFRlc3RPYmplY3QgZ2V0TzEoT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0pIHsNCiAgICAgICAgcmV0dXJuIHBtLmZp\nbmQoRmV0Y2hHcm91cFRlc3RPYmplY3QuY2xhc3MsIG9pZDEpOw0KICAgIH0N\nCg0KICAgIHByb3RlY3RlZCBGZXRjaEdyb3VwVGVzdE9iamVjdCBnZXRPMihP\ncGVuSlBBRW50aXR5TWFuYWdlciBwbSkgew0KICAgICAgICByZXR1cm4gcG0u\nZmluZChGZXRjaEdyb3VwVGVzdE9iamVjdC5jbGFzcywgb2lkMik7DQogICAg\nfQ0KDQogICAgcHJvdGVjdGVkIEZldGNoR3JvdXBUZXN0T2JqZWN0Q2hpbGQg\nZ2V0QzEoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0pIHsNCiAgICAgICAgcmV0\ndXJuIHBtLmZpbmQoRmV0Y2hHcm91cFRlc3RPYmplY3RDaGlsZC5jbGFzcywg\nb2lkYzEpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRlc3RzIHRoYXQg\nbmFtZWQgZmV0Y2ggZ3JvdXBzIGFjdHVhbGx5IGJyaW5nIGluIHRoZQ0KICAg\nICAqIG1hbmFnZWQgb2JqZWN0Lg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lk\nIHRlc3RGZXRjaEdyb3VwSW5zdGFudGlhdGVkKCkgew0KICAgICAgICBkZWxl\ndGVBbGwoQXR0YWNoQS5jbGFzcyk7DQogICAgICAgIGRlbGV0ZUFsbChBdHRh\nY2hCLmNsYXNzKTsNCiAgICAgICAgZGVsZXRlQWxsKEF0dGFjaEMuY2xhc3Mp\nOw0KICAgICAgICBkZWxldGVBbGwoQXR0YWNoRC5jbGFzcyk7DQogICAgICAg\nIGRlbGV0ZUFsbChBdHRhY2hFLmNsYXNzKTsNCiAgICAgICAgZGVsZXRlQWxs\nKEF0dGFjaEYuY2xhc3MpOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtOw0KDQogICAgICAgIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgc3Rh\ncnRUeChwbSk7DQogICAgICAgIEF0dGFjaEUgZSA9IG5ldyBBdHRhY2hFKCk7\nDQogICAgICAgIEF0dGFjaEIgYiA9IG5ldyBBdHRhY2hCKCk7DQogICAgICAg\nIGUuc2V0QihiKTsNCiAgICAgICAgcG0ucGVyc2lzdChlKTsNCg0KICAgICAg\nICBlbmRUeChwbSk7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICBP\nYmplY3Qgb2I7DQoNCiAgICAgICAgcG0gPSBnZXRQTSgpOw0KICAgICAgICBz\ndGFydFR4KHBtKTsNCiAgICAgICAgYXNzZXJ0U2l6ZSgwLCBwbS5nZXRNYW5h\nZ2VkT2JqZWN0cygpKTsNCiAgICAgICAgb2IgPSBwbS5jcmVhdGVFeHRlbnQo\nQXR0YWNoRS5jbGFzcywgdHJ1ZSkuaXRlcmF0b3IoKS5uZXh0KCk7DQogICAg\nICAgIC8vIG1ha2Ugc3VyZSByZWxhdGlvbiBpcyBub3QgbG9hZGVkDQogICAg\nICAgIGFzc2VydFNpemUoMSwgcG0uZ2V0TWFuYWdlZE9iamVjdHMoKSk7DQog\nICAgICAgIHJvbGxiYWNrVHgocG0pOw0KICAgICAgICBlbmRFbShwbSk7DQoN\nCiAgICAgICAgcG0gPSBnZXRQTSgpOw0KICAgICAgICBzdGFydFR4KHBtKTsN\nCiAgICAgICAgLy8gbm93IG1ha2Ugc3VyZSB3ZSBsb2FkIHJlbGF0aW9ucw0K\nICAgICAgICBwbS5nZXRGZXRjaFBsYW4oKS5hZGRGZXRjaEdyb3VwKCJhbGwi\nKTsNCiAgICAgICAgYXNzZXJ0U2l6ZSgwLCBwbS5nZXRNYW5hZ2VkT2JqZWN0\ncygpKTsNCiAgICAgICAgb2IgPSBwbS5jcmVhdGVFeHRlbnQoQXR0YWNoRS5j\nbGFzcywgdHJ1ZSkuaXRlcmF0b3IoKS5uZXh0KCk7DQogICAgICAgIC8vIG1h\na2Ugc3VyZSByZWxhdGlvbiBpcyBsb2FkZWQNCiAgICAgICAgYXNzZXJ0U2l6\nZSgyLCBwbS5nZXRNYW5hZ2VkT2JqZWN0cygpKTsNCiAgICAgICAgcm9sbGJh\nY2tUeChwbSk7DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQp9DQog\n","encoding":"base64"}

