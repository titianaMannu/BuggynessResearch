{"sha":"84eb02d42ab497ba9f4ed895e06de45a3e51a745","node_id":"MDQ6QmxvYjIwNjM2NDo4NGViMDJkNDJhYjQ5N2JhOWY0ZWQ4OTVlMDZkZTQ1YTNlNTFhNzQ1","size":20607,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/84eb02d42ab497ba9f4ed895e06de45a3e51a745","content":"LyoNCiAqIFRlc3RGZXRjaFBsYW4uamF2YQ0KICoNCiAqIENyZWF0ZWQgb24g\nT2N0b2JlciAxNiwgMjAwNiwgMzowMiBQTQ0KICoNCiAqIFRvIGNoYW5nZSB0\naGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0ZSBNYW5hZ2Vy\nDQogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4NCiAq\nLw0KLyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0\nb3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0K\nICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwg\naW5mb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlw\nLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRl\nciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJM\naWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGlu\nIGNvbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9i\ndGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8v\nd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBV\nbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRv\nIGluIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0\naGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBC\nQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5Z\nDQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRo\nZSBMaWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVy\nbmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRo\nZSBMaWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2Uua2VybmVsOw0KDQppbXBvcnQgamF2YS51dGlsLkl0\nZXJhdG9yOw0KaW1wb3J0IGphdmEudXRpbC5MaXN0Ow0KaW1wb3J0IGphdmEu\ndXRpbC5TZXQ7DQoNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMuUENBZGRyZXNzOw0KaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9u\nLmFwcHMuUENDb21wYW55Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMuUENDb3VudHJ5Ow0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29t\nbW9uLmFwcHMuUENEZXBhcnRtZW50Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMuUENEaXJlY3Rv\ncnk7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtl\ncm5lbC5jb21tb24uYXBwcy5QQ0VtcGxveWVlOw0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMuUENG\naWxlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5r\nZXJuZWwuY29tbW9uLmFwcHMuUENQZXJzb247DQoNCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuRmV0Y2hQbGFuOw0KaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFu\nYWdlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nT3BlbkpQQVF1ZXJ5Ow0KDQpwdWJsaWMgY2xhc3MgVGVzdEZldGNoUGxhbiBl\neHRlbmRzIEJhc2VLZXJuZWxUZXN0IHsNCg0KICAgIHN0YXRpYyBPYmplY3Qg\nX3Jvb3REaXJJZDsNCiAgICBzdGF0aWMgT2JqZWN0IF9yb290Q29tcGFueUlk\nOw0KDQogICAgc3RhdGljIGZpbmFsIGludCBNQVhfREVQVEggPSA1OyAvLyBN\nYXhpbXVtIGRlcHRoIG9mIHRoZSBkaXJlY3Rvcmllcw0KICAgIHN0YXRpYyBm\naW5hbCBpbnQgTUFYX0NISUxEID0gMzsgLy8gTWF4aW11bSBudW1iZXIgb2Yg\nZmlsZXMvZGlyZWN0b3J5DQogICAgc3RhdGljIGZpbmFsIFN0cmluZyBxdW90\nZSA9ICJcIiI7DQogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBmaXJzdFRp\nbWUgPSB0cnVlOw0KDQogICAgLyoqDQogICAgICogQ3JlYXRlcyBhIG5ldyBp\nbnN0YW5jZSBvZiBUZXN0RmV0Y2hQbGFuDQogICAgICovDQogICAgcHVibGlj\nIFRlc3RGZXRjaFBsYW4oKSB7DQogICAgfQ0KDQogICAgcHVibGljIFRlc3RG\nZXRjaFBsYW4oU3RyaW5nIG5hbWUpIHsNCiAgICAgICAgc3VwZXIobmFtZSk7\nDQogICAgfQ0KDQogICAgLyoqDQogICAgICogQ2xlYXJzIHBhc3QgZGF0YSBh\nbmQgY3JlYXRlcyBuZXcgZGF0YSBmb3IgdGVzdC4NCiAgICAgKiBDbGVhciB0\nZXN0IGRhdGEgYmVmb3JlIGFuZCBub3QgPGVtPmFmdGVyPC9lbT4gc3VjaCB0\naGF0IG9uZSBjYW4gYW5hbHl6ZQ0KICAgICAqIHRoZSBkYXRhYmFzZSBmb3Ig\ndGVzdCBmYWlsdXJlcy4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBzZXRV\ncCgpIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBpZiAoZmlyc3RUaW1l\nKSB7DQogICAgICAgICAgICBmaXJzdFRpbWUgPSBmYWxzZTsNCiAgICAgICAg\nICAgIGNsZWFyVGVzdERhdGEoKTsNCiAgICAgICAgICAgIGNyZWF0ZVRlc3RE\nYXRhKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBD\ncmVhdGUgYSBkaXJlY3RvcnkgdHJlZSBvZiBNQVhfREVQVEggd2l0aCBlYWNo\nIGRpcmVjdG9yeSBoYXZpbmcgYSBzaW5nbGUNCiAgICAgKiBkaXJlY3Rvcnkg\nYW5kIE1BWF9DSElMRCBmaWxlcy4NCiAgICAgKiBDcmVhdGVzIHR5cGljYWwg\nRW1wbG95ZWUtRGVwYXJ0bWVudC1Db21wYW55LUFkZHJlc3MgaW5zdGFuY2Vz\nLg0KICAgICAqDQogICAgICogQHJldHVybiB0aGUgcGVyc2l0ZW50IGlkZW50\naWZpZXIgb2YgdGhlIHJvb3QgZGlyZWN0b3J5Lg0KICAgICAqLw0KICAgIHZv\naWQgY3JlYXRlVGVzdERhdGEoKSB7DQogICAgICAgIC8vIGNyZWF0ZSBhIHRy\nZWUgb2YgZGlyZWN0b3JpZXMgd2l0aCBmaWxlcyBpbiB0aGVtDQogICAgICAg\nIFBDRGlyZWN0b3J5IHJvb3REaXIgPSBuZXcgUENEaXJlY3RvcnkoZ2V0RGly\nZWN0b3J5TmFtZSgwKSk7DQogICAgICAgIFBDRGlyZWN0b3J5IHBhcmVudCA9\nIHJvb3REaXI7DQogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IE1BWF9E\nRVBUSDsgaSsrKSB7DQogICAgICAgICAgICBQQ0RpcmVjdG9yeSBkaXIgPSBu\nZXcgUENEaXJlY3RvcnkoZ2V0RGlyZWN0b3J5TmFtZShpKSk7DQogICAgICAg\nICAgICBwYXJlbnQuYWRkKGRpcik7DQoNCiAgICAgICAgICAgIGZvciAoaW50\nIGogPSAwOyBqIDwgTUFYX0NISUxEOyBqKyspDQogICAgICAgICAgICAgICAg\ncGFyZW50LmFkZChnZXRGaWxlTmFtZShqKSk7DQoNCiAgICAgICAgICAgIHBh\ncmVudCA9IGRpcjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGNyZWF0ZSBh\nIGdyYXBoDQogICAgICAgIC8vICAgICAgfCAtLS1hZGRyZXNzLWNvdW50cnkN\nCiAgICAgICAgLy8gICAgICB8DQogICAgICAgIC8vICBjb21wYW55LWRlcHQt\nZW1wbG95ZWUtYWRkcmVzcy1jb3VudHJ5DQogICAgICAgIC8vDQogICAgICAg\nIFBDQ291bnRyeSBjb3VudHJ5MSA9IG5ldyBQQ0NvdW50cnkoIjEwMCIsICJF\nbXBsb3llZSAxIENvdW50cnkiKTsNCiAgICAgICAgUENDb3VudHJ5IGNvdW50\ncnkyID0gbmV3IFBDQ291bnRyeSgiMjAwIiwgIkVtcGxveWVlIDIgQ291bnRy\neSIpOw0KICAgICAgICBQQ0NvdW50cnkgY2NvdW50cnkgPSBuZXcgUENDb3Vu\ndHJ5KCIzMDAiLCAiQ29tcGFueSBDb3VudHJ5Iik7DQoNCiAgICAgICAgUEND\nb21wYW55IGNvbXBhbnkgPSBuZXcgUENDb21wYW55KCJDb21wYW55Iik7DQoN\nCiAgICAgICAgUENEZXBhcnRtZW50IGRlcHQxID0gbmV3IFBDRGVwYXJ0bWVu\ndCgiRGVwYXJ0bWVudDEiKTsNCiAgICAgICAgUENEZXBhcnRtZW50IGRlcHQy\nID0gbmV3IFBDRGVwYXJ0bWVudCgiRGVwYXJ0bWVudDIiKTsNCg0KICAgICAg\nICBQQ0VtcGxveWVlIGVtcDEgPSBuZXcgUENFbXBsb3llZSgiRW1wbG95ZWUx\nIik7DQogICAgICAgIFBDRW1wbG95ZWUgZW1wMiA9IG5ldyBQQ0VtcGxveWVl\nKCJFbXBsb3llZTIiKTsNCg0KICAgICAgICBQQ0FkZHJlc3MgYWRkcjEgPSBu\nZXcgUENBZGRyZXNzKCJTdHJlZXQxIiwgImNpdHkxIiwgY291bnRyeTEpOw0K\nICAgICAgICBQQ0FkZHJlc3MgYWRkcjIgPSBuZXcgUENBZGRyZXNzKCJTdHJl\nZXQyIiwgImNpdHkyIiwgY291bnRyeTIpOw0KICAgICAgICBQQ0FkZHJlc3Mg\nY2FkZHIgPSBuZXcgUENBZGRyZXNzKCJTdHJlZXQzIiwgImNpdHkzIiwgY2Nv\ndW50cnkpOw0KDQogICAgICAgIGRlcHQxLmFkZEVtcGxveWVlKGVtcDEpOw0K\nICAgICAgICBkZXB0Mi5hZGRFbXBsb3llZShlbXAyKTsNCg0KICAgICAgICBj\nb21wYW55LmFkZERlcGFydG1lbnQoZGVwdDEpOw0KICAgICAgICBjb21wYW55\nLmFkZERlcGFydG1lbnQoZGVwdDIpOw0KDQogICAgICAgIGNvbXBhbnkuc2V0\nQWRkcmVzcyhjYWRkcik7DQoNCiAgICAgICAgZW1wMS5zZXRBZGRyZXNzKGFk\nZHIxKTsNCiAgICAgICAgZW1wMi5zZXRBZGRyZXNzKGFkZHIyKTsNCg0KICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7DQogICAg\nICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBwbS5wZXJzaXN0KHJvb3REaXIp\nOw0KICAgICAgICBwbS5wZXJzaXN0KGNvbXBhbnkpOw0KLy8gICAgICAgIF9y\nb290RGlySWQgICAgID0gcG0uZ2V0T2JqZWN0SWQocm9vdERpcik7DQogICAg\nICAgIF9yb290RGlySWQgPSByb290RGlyLmdldElkKCk7DQogICAgICAgIGFz\nc2VydE5vdE51bGwoX3Jvb3REaXJJZCk7DQovLyAgICAgICAgX3Jvb3RDb21w\nYW55SWQgPSBwbS5nZXRPYmplY3RJZChjb21wYW55KTsNCiAgICAgICAgX3Jv\nb3RDb21wYW55SWQgPSBjb21wYW55LmdldElkKCk7DQogICAgICAgIGFzc2Vy\ndE5vdE51bGwoX3Jvb3RDb21wYW55SWQpOw0KICAgICAgICBlbmRUeChwbSk7\nDQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAg\nKiBUZXN0IHRoYXQgdGhlIHNpbmdsZSB2YWx1ZWQgZmllbGQgKF9wYXJlbnQp\nIGlzIG5vdCB0cmF2ZXJzZWQgd2hlbiB0aGUNCiAgICAgKiBmZWN0aCBncm91\ncCBzZWxlY3RzIG9ubHkgdGhlIF9uYW1lIGZpZWxkLg0KICAgICAqLw0KICAg\nIHB1YmxpYyB2b2lkIHRlc3RaZXJvUmVjdXJzaW9uRGVwdGhTaW5nbGVWYWx1\nZWRGaWVsZCgpIHsNCiAgICAgICAgZ2VuZXJpY1Rlc3RGb3JTaW5nbGVWYWx1\nZWRSZWN1cnNpdmVGaWVsZCgibmFtZSIsIDQsIDApOw0KICAgIH0NCg0KICAg\nIC8qKg0KICAgICAqIFRlc3QgdGhhdCB0aGUgc2luZ2xlIHZhbHVlZCBmaWVs\nZCAoX3BhcmVudCkgaXMgdHJhdmVyc2VkIG9uY2UgYW5kIG9ubHkNCiAgICAg\nKiBvbmNlIHdoZW4gdGhlIGZlY3RoIGdyb3VwIHNlbGVjdHMgdGhlIF9wYXJl\nbnQgZmllbGQgd2l0aCByZWN1cnNpb24gZGVwdGgNCiAgICAgKiBvZiAxIChk\nZWZhdWx0KS4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25lUmVj\ndXJzaW9uRGVwdGhTaW5nbGVWYWx1ZWRGaWVsZCgpIHsNCiAgICAgICAgZ2Vu\nZXJpY1Rlc3RGb3JTaW5nbGVWYWx1ZWRSZWN1cnNpdmVGaWVsZCgibmFtZStw\nYXJlbnQiLCA0LCAxKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUZXN0\nIHRoYXQgdGhlIHNpbmdsZSB2YWx1ZWQgZmllbGQgKF9wYXJlbnQpIGlzIHRy\nYXZlcnNlZCB0d2ljZSBhbmQgb25seQ0KICAgICAqIHR3aWNlIHdoZW4gdGhl\nIGZlY3RoIGdyb3VwIHNlbGVjdHMgdGhlIF9wYXJlbnQgZmllbGQgd2l0aCBy\nZWN1cnNpb24gZGVwdGgNCiAgICAgKiBvZiAyLg0KICAgICAqLw0KICAgIHB1\nYmxpYyB2b2lkIHRlc3RUd29SZWN1cnNpb25EZXB0aFNpbmdsZVZhbHVlZEZp\nZWxkKCkgew0KICAgICAgICBnZW5lcmljVGVzdEZvclNpbmdsZVZhbHVlZFJl\nY3Vyc2l2ZUZpZWxkKCJuYW1lK3BhcmVudCtncmFuZHBhcmVudCIsDQogICAg\nICAgICAgICA0LCAyKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nVGhyZWVSZWN1cnNpb25EZXB0aFNpbmdsZVZhbHVlZEZpZWxkKCkgew0KICAg\nICAgICBnZW5lcmljVGVzdEZvclNpbmdsZVZhbHVlZFJlY3Vyc2l2ZUZpZWxk\nDQogICAgICAgICAgICAoIm5hbWUrcGFyZW50K2dyYW5kcGFyZW50K2dyZWF0\nZ3JhbmRwYXJlbnQiLCA0LCAzKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0SW5maW5pdGVSZWN1cnNpb25EZXB0aFNpbmdsZVZhbHVlZEZpZWxk\nKCkgew0KICAgICAgICBnZW5lcmljVGVzdEZvclNpbmdsZVZhbHVlZFJlY3Vy\nc2l2ZUZpZWxkKCJhbGxwYXJlbnRzIiwgNCwgLTEpOw0KICAgIH0NCg0KICAg\nIC8qKg0KICAgICAqIEdlbmVyaWNhbGx5IHRlc3RzIHJlY3Vyc2l2ZSB0cmF2\nZXJzYWwgb2Ygc2luZ2xlLXZhbHVlZCBwYXJlbnQgZmllbGQuDQogICAgICoN\nCiAgICAgKiBAcGFyYW0gcGxhbiBhIHBsYW4gdGhhdCBmZXRjaGVzIEwgcGFy\nZW50cyBhbmQgbm8gY2hpbGRyZW4NCiAgICAgKiBAcGFyYW0gcmQgdGhlIHJl\nY3Vyc2lvbiBkZXB0aCBvZiBkaXJlY3RvcnkgZnJvbSB0aGUgcm9vdA0KICAg\nICAqIEBwYXJhbSBmZCB0aGUgZmV0Y2ggZGVwdGggPSBudW1iZXIgb2YgcGFy\nZW50cyBmZXRjaGVkDQogICAgICovDQogICAgcHVibGljIHZvaWQgZ2VuZXJp\nY1Rlc3RGb3JTaW5nbGVWYWx1ZWRSZWN1cnNpdmVGaWVsZChTdHJpbmcgcGxh\nbiwgaW50IHJkLA0KICAgICAgICBpbnQgZmQpIHsNCiAgICAgICAgUENEaXJl\nY3RvcnkgcmVzdWx0ID0gcXVlcnlEaXJlY3RvcnlXaXRoUGxhbihwbGFuLCBy\nZCwgZmQpOw0KDQogICAgICAgIGNoZWNrUGFyZW50cyhyZXN1bHQsIHJkLCBm\nZCk7DQoNCiAgICAgICAgT2JqZWN0IGNoaWxkcmVuID0gUENEaXJlY3Rvcnku\ncmVmbGVjdChyZXN1bHQsICJfY2hpbGRyZW4iKTsNCiAgICAgICAgYXNzZXJ0\nTnVsbChjaGlsZHJlbik7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUXVl\ncnkgdG8gb2J0YWluIGEgc2luZ2xlIGRpcmVjdG9yeSBhdCB0aGUgZ2l2ZW4g\nZGVwdGguDQogICAgICogVGhlIGRpcmVjdG9yeSBuYW1lIGlzIGNvbnN0cnVj\ndGVkIGJ5IHRoZSBkZXB0aCBpdCBvY2N1cnMgKGQwIGZvciByb290LA0KICAg\nICAqIGQxIGZvciBkZXB0aCAxIGFuZCBzbyBvbikuPEJSPg0KICAgICAqIENo\nZWNrcyB0aGUgcmVzdWx0IGZvciBmb3IgbWF0Y2hpbmcgbmFtZSBhbmQgc2l6\nZSBvZiB0aGUgcmVzdWx0IChtdXN0DQogICAgICogYmUgb25lKS4NCiAgICAg\nKg0KICAgICAqIEBwYXJhbSBwbGFuIG5hbWUgb2YgYSBmZXRjaCBwbGFuDQog\nICAgICogQHBhcmFtIGRlcHRoIGRlcHRoIG9mIHRoZSBkaXJlY3RvcnkgdG8g\nYmUgcXVlcmllZA0KICAgICAqIEByZXR1cm4gdGhlIHNlbGVjdGVkIGRpcmVj\ndG9yeS4NCiAgICAgKi8NCiAgICBQQ0RpcmVjdG9yeSBxdWVyeURpcmVjdG9y\neVdpdGhQbGFuKFN0cmluZyBwbGFuLCBpbnQgcmQsIGludCBmZCkgew0KICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7DQogICAg\nICAgIHBtLmdldEZldGNoUGxhbigpLmFkZEZldGNoR3JvdXAocGxhbik7DQog\nICAgICAgIGlmIChmZCAhPSAwKQ0KICAgICAgICAgICAgcG0uZ2V0RmV0Y2hQ\nbGFuKCkuc2V0TWF4RmV0Y2hEZXB0aChmZCk7DQoNCi8vICAgICAgICBTdHJp\nbmcgZmlsdGVyID0gIl9uYW1lID09ICIgKyBxdW90ZWQoZ2V0RGlyZWN0b3J5\nTmFtZShyZCkpOyAgICAgICAgDQovLyAgICAgICAgT3BlbkpQQVF1ZXJ5IHF1\nZXJ5ID0gcG0uY3JlYXRlTmF0aXZlUXVlcnkoZmlsdGVyLFBDRGlyZWN0b3J5\nLmNsYXNzKTsNCi8vICAgICAgICBMaXN0IHJlc3VsdCA9IChMaXN0KSBxdWVy\neS5nZXRSZXN1bHRMaXN0KCk7DQoNCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0g\nIlNFTEVDVCBvIEZST00gUENEaXJlY3RvcnkgbyBXSEVSRSBvLl9uYW1lID0g\nJyIgKw0KICAgICAgICAgICAgZ2V0RGlyZWN0b3J5TmFtZShyZCkgKyAiJyI7\nDQogICAgICAgIExpc3QgZnJlc3VsdCA9ICgoT3BlbkpQQVF1ZXJ5KSBwbS5j\ncmVhdGVRdWVyeShxdWVyeSkpLmdldFJlc3VsdExpc3QoKTsNCg0KICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgZnJlc3VsdC5zaXplKCkpOw0KICAgICAgICBQ\nQ0RpcmVjdG9yeSBkaXIgPSAoUENEaXJlY3RvcnkpIGZyZXN1bHQuZ2V0KDAp\nOw0KDQogICAgICAgIHJldHVybiBkaXI7DQogICAgfQ0KDQogICAgLyoqDQog\nICAgICogQXNzZXJ0cyB0aGF0DQogICAgICogPExJPiB0aGUgZ2l2ZW4gZGly\nZWN0b3J5IG5hbWUgbWF0Y2hlcyB0aGUgZGlyZWN0b3J5IG5hbWUgYXQgZGVw\ndGggRC4NCiAgICAgKiA8TEk+IHRoZSBwYXJlbnRzIHVwdG8gTCByZWN1cnNp\nb24gaXMgbm90IG51bGwgYW5kIGJleW9uZCBpcw0KICAgICAqIG51bGwuDQog\nICAgICoNCiAgICAgKiBAcGFyYW0gcmVzdWx0IGEgZGlyZWN0b3J5IHRvIHRl\nc3QNCiAgICAgKiBAcGFyYW0gRCBkZXB0aCBhdCB3aGljaCB0aGlzIGRpcmVj\ndG9yeSBhcHBlYXJzDQogICAgICogQHBhcmFtIEwgdGhlIG51bWJlciBvZiBs\naXZlIChmZXRjaGVkKSBwYXJlbnRzLiAtMSBkZW5vdGVzIGluZmluaXRlDQog\nICAgICovDQogICAgdm9pZCBjaGVja1BhcmVudHMoUENEaXJlY3RvcnkgcmVz\ndWx0LCBpbnQgRCwgaW50IEwpIHsNCg0KICAgICAgICBhc3NlcnRFcXVhbHMo\nImdlIiwgZ2V0RGlyZWN0b3J5TmFtZShEKSwNCiAgICAgICAgICAgIFBDRGly\nZWN0b3J5LnJlZmxlY3QocmVzdWx0LCAiX25hbWUiKSk7DQogICAgICAgIFBD\nRGlyZWN0b3J5W10gcGFyZW50cyA9IGdldFBhcmVudHMocmVzdWx0LCBEKTsN\nCiAgICAgICAgaW50IE4gPSAoTCA9PSAtMSkgPyBEIDogTDsNCiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspIHsNCiAgICAgICAgICAgIGFz\nc2VydE5vdE51bGwoaSArICItdGggcGFyZW50IGF0IGRlcHRoICIgKyBEICsg\nIiBpcyBudWxsIiwNCiAgICAgICAgICAgICAgICBwYXJlbnRzW2ldKTsNCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscyhnZXREaXJlY3RvcnlOYW1lKEQgLSBp\nIC0gMSksDQogICAgICAgICAgICAgICAgUENEaXJlY3RvcnkucmVmbGVjdChw\nYXJlbnRzW2ldLCAiX25hbWUiKSk7DQogICAgICAgIH0NCiAgICAgICAgZm9y\nIChpbnQgaSA9IE47IGkgPCBEOyBpKyspDQogICAgICAgICAgICBhc3NlcnRO\ndWxsKGkgKyAiLXRoIHBhcmVudCBhdCBkZXB0aCAiICsgRCArICIgaXMgbm90\nIG51bGwgIiArDQogICAgICAgICAgICAgICAgcGFyZW50c1tpXSwgcGFyZW50\nc1tpXSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2V0cyBhbiBhcnJh\neSBvZiBwYXJlbnRzIG9mIHRoZSBnaXZlbiBkaXJlY3RvcnkuIFRoZSB6ZXJv\ndGggZWxlbWVudA0KICAgICAqIGlzIHRoZSBwYXJlbnQgb2YgdGhlIGdpdmVu\nIGRpcmVjdG9yeSBhbmQgKGkrMSktdGggZWxlbWVudCBpcyB0aGUNCiAgICAg\nKiBwYXJlbnQgb2YgdGhlIGktdGggZWxlbWVudC4gVXNlcyByZWZsZWN0aW9u\nIHRvIGVuc3VyZSB0aGF0IHRoZQ0KICAgICAqIHNpZGUtZWZmZWN0IGRvZXMg\nbm90IGNhdXNlIGEgZGF0YWJhc2UgYWNjZXNzIGZvciB0aGUgZmllbGQuDQog\nICAgICoNCiAgICAgKiBAcGFyYW0gZGlyIGEgc3RhcnRpbmcgZGlyZWN0b3J5\nDQogICAgICogQHBhcmFtIGRlcHRoIGRlcHRoIHRvIHJlY3Vyc2UuIG11c3Qg\nYmUgcG9zaXRpdmUuDQogICAgICogQHJldHVybg0KICAgICAqLw0KICAgIFBD\nRGlyZWN0b3J5W10gZ2V0UGFyZW50cyhQQ0RpcmVjdG9yeSBkaXIsIGludCBk\nZXB0aCkgew0KICAgICAgICBQQ0RpcmVjdG9yeVtdIHJlc3VsdCA9IG5ldyBQ\nQ0RpcmVjdG9yeVtkZXB0aF07DQogICAgICAgIFBDRGlyZWN0b3J5IGN1cnJl\nbnQgPSBkaXI7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZGVwdGg7\nIGkrKykgew0KICAgICAgICAgICAgcmVzdWx0W2ldID0gKFBDRGlyZWN0b3J5\nKSBQQ0RpcmVjdG9yeS5yZWZsZWN0KGN1cnJlbnQsICJfcGFyZW50Iik7DQog\nICAgICAgICAgICBjdXJyZW50ID0gcmVzdWx0W2ldOw0KICAgICAgICB9DQog\nICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfQ0KDQogICAgLyoqDQogICAg\nICogQ2hlY2tzIHRoYXQgdGhlIGZpcnN0IEwgZWxlbWVudHMgb2YgdGhlIGdp\ndmVuIGFycmF5IGlzIG5vbi1udWxsIGFuZA0KICAgICAqIHRoZSByZXN0IGFy\nZSBudWxsLg0KICAgICAqDQogICAgICogQHBhcmFtIGRlcHRoDQogICAgICov\nDQogICAgdm9pZCBhc3NlcnROdWxsUGFyZW50KFBDRGlyZWN0b3J5W10gcGFy\nZW50cywgaW50IEwpIHsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBM\nOyBpKyspDQogICAgICAgICAgICBhc3NlcnROb3ROdWxsKHBhcmVudHNbaV0p\nOw0KICAgICAgICBmb3IgKGludCBpID0gTDsgaSA8IHBhcmVudHMubGVuZ3Ro\nOyBpKyspDQogICAgICAgICAgICBhc3NlcnROdWxsKHBhcmVudHNbaV0pOw0K\nICAgIH0NCg0KICAgIFN0cmluZyBnZXREaXJlY3RvcnlOYW1lKGludCBkZXB0\naCkgew0KICAgICAgICByZXR1cm4gImQiICsgZGVwdGg7DQogICAgfQ0KDQog\nICAgU3RyaW5nIGdldEZpbGVOYW1lKGludCBkZXB0aCkgew0KICAgICAgICBy\nZXR1cm4gImYiICsgZGVwdGg7DQogICAgfQ0KDQogICAgU3RyaW5nIHF1b3Rl\nZChTdHJpbmcgcykgew0KICAgICAgICByZXR1cm4gcXVvdGUgKyBzICsgcXVv\ndGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogRGVmaW5lcyBhIGZldGNo\nIHBsYW4gdGhhdCBoYXMgc2V2ZXJhbCBmZXRjaCBncm91cHMgdG8gdHJhdmVy\nc2UgYSBjaGFpbg0KICAgICAqIG9mIHJlbGF0aW9uc2hpcHMuDQogICAgICog\nQWZ0ZXIgZ2V0dGluZyB0aGUgcm9vdCBieSBhbiBleHRlbnQgcXVlcnksIGNo\nZWNrcyAoYnkgcmVmbGVjdGlvbikgdGhhdA0KICAgICAqIGFsbCB0aGUgcmVs\nYXRpb25zIGluIHRoZSBjaGFpbiBhcmUgZmV0Y2hlZC4NCiAgICAgKiBUaGUg\nZmV0Y2ggZGVwdGggaXMga2VwdCBpbmZpbml0ZSwgc28gd2hhdCB3b3VsZCBi\nZSBmZXRjaGVkIGlzIGVzc2VudGlhbGx5DQogICAgICogY29udHJvbGxlZCBi\neSB0aGUgZmV0Y2ggZ3JvdXBzLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lk\nIHRlc3RSZWxhdGlvblRyYXZlcnNhbCgpIHsNCiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBGZXRjaFBsYW4g\ncGxhbiA9IHBtLmdldEZldGNoUGxhbigpOw0KICAgICAgICBwbS5nZXRGZXRj\naFBsYW4oKS5zZXRNYXhGZXRjaERlcHRoKC0xKTsNCiAgICAgICAgcGxhbi5h\nZGRGZXRjaEdyb3VwKCJlbXBsb3llZS5kZXBhcnRtZW50Iik7DQogICAgICAg\nIHBsYW4uYWRkRmV0Y2hHcm91cCgiZGVwYXJ0bWVudC5jb21wYW55Iik7DQog\nICAgICAgIHBsYW4uYWRkRmV0Y2hHcm91cCgiY29tcGFueS5hZGRyZXNzIik7\nDQogICAgICAgIHBsYW4uYWRkRmV0Y2hHcm91cCgiYWRkcmVzcy5jb3VudHJ5\nIik7DQoNCiAgICAgICAgSXRlcmF0b3IgZW1wbG95ZWVzID0gcG0uY3JlYXRl\nRXh0ZW50KFBDRW1wbG95ZWUuY2xhc3MsIHRydWUpLml0ZXJhdG9yKCk7DQog\nICAgICAgIHdoaWxlIChlbXBsb3llZXMuaGFzTmV4dCgpKSB7DQogICAgICAg\nICAgICBQQ0VtcGxveWVlIGVtcCA9IChQQ0VtcGxveWVlKSBlbXBsb3llZXMu\nbmV4dCgpOw0KDQogICAgICAgICAgICBQQ0RlcGFydG1lbnQgZGVwdCA9IChQ\nQ0RlcGFydG1lbnQpIFBDRW1wbG95ZWUucmVmbGVjdChlbXAsDQogICAgICAg\nICAgICAgICAgImRlcGFydG1lbnQiKTsNCiAgICAgICAgICAgIGFzc2VydE5v\ndE51bGwoZGVwdCk7DQoNCiAgICAgICAgICAgIFBDQ29tcGFueSBjb21wYW55\nID0gKFBDQ29tcGFueSkgUENEZXBhcnRtZW50LnJlZmxlY3QoZGVwdCwNCiAg\nICAgICAgICAgICAgICAiY29tcGFueSIpOw0KICAgICAgICAgICAgYXNzZXJ0\nTm90TnVsbChjb21wYW55KTsNCg0KICAgICAgICAgICAgUENBZGRyZXNzIGFk\nZHIgPSAoUENBZGRyZXNzKSBQQ0NvbXBhbnkucmVmbGVjdChjb21wYW55LCAi\nYWRkcmVzcyIpOw0KICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbChhZGRyKTsN\nCg0KICAgICAgICAgICAgUENDb3VudHJ5IGNvdW50cnkgPSAoUENDb3VudHJ5\nKSBQQ0FkZHJlc3MucmVmbGVjdChhZGRyLCAiY291bnRyeSIpOw0KICAgICAg\nICAgICAgYXNzZXJ0Tm90TnVsbChjb3VudHJ5KTsNCiAgICAgICAgfQ0KICAg\nIH0NCg0KICAgIC8qKg0KICAgICAqIERlZmluZXMgYSBmZXRjaCBwbGFuIHRo\nYXQgaGFzIHNldmVyYWwgZmV0Y2ggZ3JvdXBzIHRvIHRyYXZlcnNlIGEgY2hh\naW4NCiAgICAgKiBvZiByZWxhdGlvbnNoaXBzIGJ1dCB0cnVuY2F0ZWQgYXQg\ndGhlIGxhc3QgcmVsYXRpb24uDQogICAgICogQWZ0ZXIgZ2V0dGluZyB0aGUg\ncm9vdCBieSBhbiBleHRlbnQgcXVlcnksIGNoZWNrcyAoYnkgcmVmbGVjdGlv\nbikgdGhhdA0KICAgICAqIGFsbCBidXQgdGhlIGxhc3QgcmVsYXRpb24gaW4g\ndGhlIGNoYWluIGFyZSBmZXRjaGVkLg0KICAgICAqIFRoZSBmZXRjaCBkZXB0\naCBpcyBrZXB0IGluZmluaXRlLCBzbyB3aGF0IHdvdWxkIGJlIGZldGNoZWQg\naXMgZXNzZW50aWFsbHkNCiAgICAgKiBjb250cm9sbGVkIGJ5IHRoZSBmZXRj\naCBncm91cHMuDQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVzdFJlbGF0\naW9uVHJhdmVyc2FsVHJ1bmNhdGVkKCkgew0KICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBwbSA9IGdldFBNKCk7DQogICAgICAgIEZldGNoUGxhbiBw\nbGFuID0gcG0uZ2V0RmV0Y2hQbGFuKCk7DQogICAgICAgIHBtLmdldEZldGNo\nUGxhbigpLnNldE1heEZldGNoRGVwdGgoLTEpOw0KICAgICAgICBwbGFuLmFk\nZEZldGNoR3JvdXAoImVtcGxveWVlLmRlcGFydG1lbnQiKTsNCiAgICAgICAg\ncGxhbi5hZGRGZXRjaEdyb3VwKCJkZXBhcnRtZW50LmNvbXBhbnkiKTsNCiAg\nICAgICAgcGxhbi5hZGRGZXRjaEdyb3VwKCJjb21wYW55LmFkZHJlc3MiKTsN\nCg0KICAgICAgICBJdGVyYXRvciBlbXBsb3llZXMgPSBwbS5jcmVhdGVFeHRl\nbnQoUENFbXBsb3llZS5jbGFzcywgdHJ1ZSkuaXRlcmF0b3IoKTsNCiAgICAg\nICAgd2hpbGUgKGVtcGxveWVlcy5oYXNOZXh0KCkpIHsNCiAgICAgICAgICAg\nIFBDRW1wbG95ZWUgZW1wID0gKFBDRW1wbG95ZWUpIGVtcGxveWVlcy5uZXh0\nKCk7DQoNCiAgICAgICAgICAgIFBDRGVwYXJ0bWVudCBkZXB0ID0gKFBDRGVw\nYXJ0bWVudCkgUENFbXBsb3llZS5yZWZsZWN0KGVtcCwNCiAgICAgICAgICAg\nICAgICAiZGVwYXJ0bWVudCIpOw0KICAgICAgICAgICAgYXNzZXJ0Tm90TnVs\nbChkZXB0KTsNCg0KICAgICAgICAgICAgUENDb21wYW55IGNvbXBhbnkgPSAo\nUENDb21wYW55KSBQQ0RlcGFydG1lbnQucmVmbGVjdChkZXB0LA0KICAgICAg\nICAgICAgICAgICJjb21wYW55Iik7DQogICAgICAgICAgICBhc3NlcnROb3RO\ndWxsKGNvbXBhbnkpOw0KDQogICAgICAgICAgICBQQ0FkZHJlc3MgYWRkciA9\nIChQQ0FkZHJlc3MpIFBDQ29tcGFueS5yZWZsZWN0KGNvbXBhbnksICJhZGRy\nZXNzIik7DQogICAgICAgICAgICBhc3NlcnROb3ROdWxsKGFkZHIpOw0KDQog\nICAgICAgICAgICBQQ0NvdW50cnkgY291bnRyeSA9IChQQ0NvdW50cnkpIFBD\nQWRkcmVzcy5yZWZsZWN0KGFkZHIsICJjb3VudHJ5Iik7DQogICAgICAgICAg\nICBhc3NlcnROdWxsKGNvdW50cnkpOw0KICAgICAgICB9DQogICAgfQ0KDQog\nICAgLyoqDQogICAgICogR2V0cyBhIENvbXBuYXkgb2JqZWN0IGJ5IGdldE9i\namVjdEJ5SWQoKSBtZXRob2QgYXMgb3Bwb3NlZCB0byBxdWVyeS4NCiAgICAg\nKiBUaGUgYWN0aXZlIGZldGNoIGdyb3VwcyBzaG91bGQgYnJpbmcgaW4gdGhl\nIG11bHRpLXZhbHVlZCByZWxhdGlvbnNoaXBzLg0KICAgICAqIFRoZSBhZGRy\nZXNzLT5jb3VudHJ5IHJlbGF0aW9uc2hpcCBjYW4gYmUgcmVhY2hlZCBpbiB0\nd28gYWx0ZXJuYXRlDQogICAgICogcGF0aHMgLS0gb25lIGFzIGNvbXBhbnkt\nPmFkZHJlc3MtPmNvdW50cnkgYW5kIHRoZSBvdGhlciBpcw0KICAgICAqIGNv\nbXBhbnktPmRlcGFydG1lbnQtPmVtcGxveWVlLT5hZGRyZXNzLT5jb3VudHJ5\nLg0KICAgICAqIFRob3VnaCBhY3RpdmUgZmV0Y2ggZ3JvdXBzIGFsbG93IGJv\ndGggdGhlIHBhdGhzIC0tIHRoZSBtYXggZmV0Y2ggZGVwdGgNCiAgICAgKiBp\ncyBzZXQgc3VjaCB0aGF0IHRoZSBzaG9ydGVyIHBhdGggaXMgdGFrZW4gYnV0\nIG5vdCB0aGUgbG9uZ2VyIG9uZS4NCiAgICAgKiBIZW5jZSB0aGUgY29tcGFu\neSdzIGFkZHJlc3MtPmNvdW50cnkgc2hvdWxkIGJlIGxvYWRlZCBidXQgbm90\nIHRoZQ0KICAgICAqIGVtcGxveWVlJ3MuDQogICAgICovDQogICAgcHVibGlj\nIHZvaWQgdGVzdFJlbGF0aW9uVHJhdmVyc2FsV2l0aENvbXBhbnlBc1Jvb3Qo\nKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0o\nKTsNCiAgICAgICAgRmV0Y2hQbGFuIHBsYW4gPSBwbS5nZXRGZXRjaFBsYW4o\nKTsNCg0KICAgICAgICBwbGFuLnNldE1heEZldGNoRGVwdGgoMik7DQogICAg\nICAgIHBsYW4uYWRkRmV0Y2hHcm91cCgiY29tcGFueS5kZXBhcnRtZW50cyIp\nOw0KICAgICAgICBwbGFuLmFkZEZldGNoR3JvdXAoImNvbXBhbnkuYWRkcmVz\ncyIpOw0KICAgICAgICBwbGFuLmFkZEZldGNoR3JvdXAoImRlcGFydG1lbnQu\nZW1wbG95ZWVzIik7DQogICAgICAgIHBsYW4uYWRkRmV0Y2hHcm91cCgicGVy\nc29uLmFkZHJlc3MiKTsNCiAgICAgICAgcGxhbi5hZGRGZXRjaEdyb3VwKCJh\nZGRyZXNzLmNvdW50cnkiKTsNCg0KICAgICAgICBQQ0NvbXBhbnkgY29tcGFu\neSA9DQogICAgICAgICAgICAoUENDb21wYW55KSBwbS5maW5kKFBDQ29tcGFu\neS5jbGFzcywgX3Jvb3RDb21wYW55SWQpOw0KICAgICAgICBTZXQgZGVwYXJ0\nbWVudHMgPSAoU2V0KSBQQ0NvbXBhbnkucmVmbGVjdChjb21wYW55LCAiZGVw\nYXJ0bWVudHMiKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVsbCgiZGVwYXJ0bWVu\ndCBpcyBudWxsIiwgZGVwYXJ0bWVudHMpOw0KICAgICAgICBhc3NlcnRFcXVh\nbHMoImV4cC4gZGVwYXJ0IHNpemUgaXMgbm90IDIiLCAyLCBkZXBhcnRtZW50\ncy5zaXplKCkpOw0KICAgICAgICBQQ0RlcGFydG1lbnQgZGVwdCA9IChQQ0Rl\ncGFydG1lbnQpIGRlcGFydG1lbnRzLml0ZXJhdG9yKCkubmV4dCgpOw0KICAg\nICAgICBhc3NlcnROb3ROdWxsKCJkZXB0IGlzIG51bGwiLCBkZXB0KTsNCiAg\nICAgICAgU2V0IGVtcGxveWVlcyA9IChTZXQpIFBDRGVwYXJ0bWVudC5yZWZs\nZWN0KGRlcHQsICJlbXBsb3llZXMiKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVs\nbCgiZW1wbG95ZWVzIGlzIG51bGwiLCBlbXBsb3llZXMpOw0KICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgZW1wbG95ZWVzLnNpemUoKSk7DQogICAgICAgIFBD\nRW1wbG95ZWUgZW1wID0gKFBDRW1wbG95ZWUpIGVtcGxveWVlcy5pdGVyYXRv\ncigpLm5leHQoKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVsbCgiZW1wIGlzIG5v\ndCBudWxsIiwgZW1wKTsNCiAgICAgICAgUENBZGRyZXNzIGVhZGRyID0gKFBD\nQWRkcmVzcykgUENQZXJzb24ucmVmbGVjdChlbXAsICJhZGRyZXNzIik7DQog\nICAgICAgIFBDQWRkcmVzcyBjYWRkciA9IChQQ0FkZHJlc3MpIFBDQ29tcGFu\neS5yZWZsZWN0KGNvbXBhbnksICJhZGRyZXNzIik7DQogICAgICAgIGFzc2Vy\ndE51bGwoImVhZGRyIGlzIG5vdCBudWxsIiwgZWFkZHIpOw0KICAgICAgICBh\nc3NlcnROb3ROdWxsKCJjYWRkciBpcyBudWxsIiwgY2FkZHIpOw0KICAgICAg\nICBQQ0NvdW50cnkgY291bnRyeSA9IChQQ0NvdW50cnkpIFBDQWRkcmVzcy5y\nZWZsZWN0KGNhZGRyLCAiY291bnRyeSIpOw0KICAgICAgICBhc3NlcnROb3RO\ndWxsKCJjb3VudHJ5IGlzIG51bGwiLCBjb3VudHJ5KTsNCiAgICB9DQoNCiAg\nICAvKioNCiAgICAgKiBTYW1lIGFzIGFib3ZlIGJ1dCB0aGUgcm9vdCBjb21w\nbmF5IGluc3RhbmNlIGlzIGRldGFjaGVkLg0KICAgICAqLw0KICAgIHB1Ymxp\nYyB2b2lkIHRlc3REZXRhY2hlZFJlbGF0aW9uVHJhdmVyc2FsV2l0aENvbXBh\nbnlBc1Jvb3QoKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nID0gZ2V0UE0oKTsNCiAgICAgICAgRmV0Y2hQbGFuIHBsYW4gPSBwbS5nZXRG\nZXRjaFBsYW4oKTsNCiAgICAgICAgcG0uZ2V0RmV0Y2hQbGFuKCkuc2V0TWF4\nRmV0Y2hEZXB0aCgyKTsNCiAgICAgICAgcGxhbi5hZGRGZXRjaEdyb3VwKCJj\nb21wYW55LmRlcGFydG1lbnRzIik7DQogICAgICAgIHBsYW4uYWRkRmV0Y2hH\ncm91cCgiY29tcGFueS5hZGRyZXNzIik7DQogICAgICAgIHBsYW4uYWRkRmV0\nY2hHcm91cCgiZGVwYXJ0bWVudC5lbXBsb3llZXMiKTsNCiAgICAgICAgcGxh\nbi5hZGRGZXRjaEdyb3VwKCJwZXJzb24uYWRkcmVzcyIpOw0KICAgICAgICBw\nbGFuLmFkZEZldGNoR3JvdXAoImFkZHJlc3MuY291bnRyeSIpOw0KDQogICAg\nICAgIFBDQ29tcGFueSBjb21wYW55MSA9DQogICAgICAgICAgICAoUENDb21w\nYW55KSBwbS5maW5kKFBDQ29tcGFueS5jbGFzcywgX3Jvb3RDb21wYW55SWQp\nOw0KDQogICAgICAgIFBDQ29tcGFueSBjb21wYW55ID0gKFBDQ29tcGFueSkg\ncG0uZGV0YWNoKGNvbXBhbnkxKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSgiY29t\ncGFueSBpcyBlcXVhbCBjb21wYW55MSIsIGNvbXBhbnkgIT0gY29tcGFueTEp\nOw0KICAgICAgICBTZXQgZGVwYXJ0bWVudHMgPSAoU2V0KSBQQ0NvbXBhbnku\ncmVmbGVjdChjb21wYW55LCAiZGVwYXJ0bWVudHMiKTsNCiAgICAgICAgYXNz\nZXJ0Tm90TnVsbCgiZGVwYXJ0bWVudCBpcyBudWxsIiwgZGVwYXJ0bWVudHMp\nOw0KICAgICAgICBhc3NlcnRFcXVhbHMoImRlcGFydG1lbnQgc2l6ZSBpcyBu\nb3QgMiIsIDIsIGRlcGFydG1lbnRzLnNpemUoKSk7DQogICAgICAgIFBDRGVw\nYXJ0bWVudCBkZXB0ID0gKFBDRGVwYXJ0bWVudCkgZGVwYXJ0bWVudHMuaXRl\ncmF0b3IoKS5uZXh0KCk7DQogICAgICAgIGFzc2VydE5vdE51bGwoImRlcHQg\naXMgbnVsbCIsIGRlcHQpOw0KICAgICAgICBTZXQgZW1wbG95ZWVzID0gKFNl\ndCkgUENEZXBhcnRtZW50LnJlZmxlY3QoZGVwdCwgImVtcGxveWVlcyIpOw0K\nICAgICAgICBhc3NlcnROb3ROdWxsKCJlbXBsb3llZSBpcyBudWxsIiwgZW1w\nbG95ZWVzKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJlbXBsb3llZXMgc2l6\nZSBub3QgMSIsIDEsIGVtcGxveWVlcy5zaXplKCkpOw0KICAgICAgICBQQ0Vt\ncGxveWVlIGVtcCA9IChQQ0VtcGxveWVlKSBlbXBsb3llZXMuaXRlcmF0b3Io\nKS5uZXh0KCk7DQogICAgICAgIGFzc2VydE5vdE51bGwoImVtcCBpcyBudWxs\nIiwgZW1wKTsNCiAgICAgICAgUENBZGRyZXNzIGVhZGRyID0gKFBDQWRkcmVz\ncykgUENQZXJzb24ucmVmbGVjdChlbXAsICJhZGRyZXNzIik7DQogICAgICAg\nIFBDQWRkcmVzcyBjYWRkciA9IChQQ0FkZHJlc3MpIFBDQ29tcGFueS5yZWZs\nZWN0KGNvbXBhbnksICJhZGRyZXNzIik7DQogICAgICAgIGFzc2VydE51bGwo\nImVhZGRyIGlzIG5vdCBudWxsIiwgZWFkZHIpOw0KICAgICAgICBhc3NlcnRO\nb3ROdWxsKCJjYWRkciBpcyBudWxsIiwgY2FkZHIpOw0KICAgICAgICBQQ0Nv\ndW50cnkgY291bnRyeSA9IChQQ0NvdW50cnkpIFBDQWRkcmVzcy5yZWZsZWN0\nKGNhZGRyLCAiY291bnRyeSIpOw0KICAgICAgICBhc3NlcnROb3ROdWxsKCJj\nb3VudHJ5IGlzIG51bGwiLCBjb3VudHJ5KTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCB0ZXN0RGVmYXVsdEZldGNoR3JvdXAoKSB7DQogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsNCg0KICAgICAgICBT\ndHJpbmcgc3F1ZXJ5ID0NCiAgICAgICAgICAgICJTRUxFQ1QgRElTVElOQ1Qg\nbyBGUk9NIFBDRW1wbG95ZWUgbyBXSEVSRSBvLm5hbWUgPSAnRW1wbG95ZWUx\nJyI7DQogICAgICAgIE9wZW5KUEFRdWVyeSBxID0gcG0uY3JlYXRlUXVlcnko\nc3F1ZXJ5KTsNCg0KICAgICAgICAvL0ZJWE1FIGp0aG9tYXMNCiAgICAgICAg\nUENFbXBsb3llZSBwZXJzb24gPSAoUENFbXBsb3llZSkgcS5nZXRTaW5nbGVS\nZXN1bHQoKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJFeHAuIFN0cmluZyBp\ncyBub3QgZW1wbG95ZWUxIiwgIkVtcGxveWVlMSIsDQogICAgICAgICAgICBQ\nQ1BlcnNvbi5yZWZsZWN0KHBlcnNvbiwgIm5hbWUiKSk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdERlZmF1bHRGZXRjaEdyb3VwRXhpc3RzQnlE\nZWZhdWx0KCkgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nIGdldFBNKCk7DQogICAgICAgIGFzc2VydFRydWUoInBtIGRvZXMgbm90IGNv\nbnRhaW4gZGVmYXVsdCBmZXRjaHBsYW4iLA0KICAgICAgICAgICAgcG0uZ2V0\nRmV0Y2hQbGFuKCkuZ2V0RmV0Y2hHcm91cHMoKS5jb250YWlucygNCiAgICAg\nICAgICAgICAgICBGZXRjaFBsYW4uR1JPVVBfREVGQVVMVCkpOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyB2b2lkIHRlc3REZWZhdWx0RmV0Y2hHcm91cENhbkJl\nUmVtb3ZlZCgpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPSBnZXRQTSgpOw0KICAgICAgICBhc3NlcnRUcnVlKCJkb2VzIG5vdCBjb250\nYWluIGRlZmF1bHQgZmV0Y2hwbGFuIiwNCiAgICAgICAgICAgIHBtLmdldEZl\ndGNoUGxhbigpLmdldEZldGNoR3JvdXBzKCkuY29udGFpbnMoDQogICAgICAg\nICAgICAgICAgRmV0Y2hQbGFuLkdST1VQX0RFRkFVTFQpKTsNCg0KICAgICAg\nICBwbS5nZXRGZXRjaFBsYW4oKS5yZW1vdmVGZXRjaEdyb3VwKEZldGNoUGxh\nbi5HUk9VUF9ERUZBVUxUKTsNCiAgICAgICAgYXNzZXJ0RmFsc2UoImRvZXMg\nY29udGFpbiBkZWZhdWx0IGZldGNocGxhbiIsDQogICAgICAgICAgICBwbS5n\nZXRGZXRjaFBsYW4oKS5nZXRGZXRjaEdyb3VwcygpLmNvbnRhaW5zKA0KICAg\nICAgICAgICAgICAgIEZldGNoUGxhbi5HUk9VUF9ERUZBVUxUKSk7DQoNCiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0yID0gZ2V0UE0oKTsNCiAg\nICAgICAgYXNzZXJ0VHJ1ZSgicG0yIGRvZXMgbm90IGNvbnRhaW4gZGVmYXVs\ndCBmZXRjaHBsYW4iLA0KICAgICAgICAgICAgcG0yLmdldEZldGNoUGxhbigp\nLmdldEZldGNoR3JvdXBzKCkuY29udGFpbnMoDQogICAgICAgICAgICAgICAg\nRmV0Y2hQbGFuLkdST1VQX0RFRkFVTFQpKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gew0KICAgICAg\nICBzdXBlci50ZWFyRG93bigpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9p\nZCBjbGVhclRlc3REYXRhKCkgdGhyb3dzIEV4Y2VwdGlvbiB7DQovLyAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IHBtZiA9KE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSkgZ2V0RW1mKCk7DQovLyAgICAgICAgT3Bl\nbkpQQUNvbmZpZ3VyYXRpb24gY29uZj1wbWYuZ2V0Q29uZmlndXJhdGlvbigp\nOw0KLy8gICAgICAgIA0KLy8gICAgICAgIENsYXNzLmZvck5hbWUocG1mLmdl\ndENvbmZpZ3VyYXRpb24oKS5nZXRDb25uZWN0aW9uMkRyaXZlck5hbWUoKSk7\nDQovLyAgICAgICAgU3RyaW5nIHVybD1jb25mLmdldENvbm5lY3Rpb24yVVJM\nKCk7DQovLyAgICAgICAgU3RyaW5nIHVzZXI9Y29uZi5nZXRDb25uZWN0aW9u\nMlVzZXJOYW1lKCk7DQovLyAgICAgICAgU3RyaW5nIHBhc3M9Y29uZi5nZXRD\nb25uZWN0aW9uMlBhc3N3b3JkKCk7DQovLyAgICAgICAgDQovLyAgICAgICAg\nQ29ubmVjdGlvbiBjb24gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24o\nDQovLyAgICAgICAgICAgICAgICB1cmwsDQovLyAgICAgICAgICAgICAgICB1\nc2VyLA0KLy8gICAgICAgICAgICAgICAgcGFzcyk7DQovLyAgICAgICAgY29u\nLnNldEF1dG9Db21taXQodHJ1ZSk7DQovLyAgICAgICAgY29uLnByZXBhcmVT\ndGF0ZW1lbnQoIkRFTEVURSBGUk9NIFBDRElSRUNUT1JZIikuZXhlY3V0ZVVw\nZGF0ZSgpOw0KLy8gICAgICAgIGNvbi5wcmVwYXJlU3RhdGVtZW50KCJERUxF\nVEUgRlJPTSBQQ0ZJTEUiKS5leGVjdXRlVXBkYXRlKCk7DQovLyAgICAgICAg\nY29uLnByZXBhcmVTdGF0ZW1lbnQoIkRFTEVURSBGUk9NIFBDUEVSU09OIiku\nZXhlY3V0ZVVwZGF0ZSgpOw0KLy8gICAgICAgIGNvbi5wcmVwYXJlU3RhdGVt\nZW50KCJERUxFVEUgRlJPTSBQQ0RFUEFSVE1FTlQiKS5leGVjdXRlVXBkYXRl\nKCk7DQovLyAgICAgICAgY29uLnByZXBhcmVTdGF0ZW1lbnQoIkRFTEVURSBG\nUk9NIFBDQ09NUEFOWSIpLmV4ZWN1dGVVcGRhdGUoKTsNCi8vICAgICAgICBj\nb24ucHJlcGFyZVN0YXRlbWVudCgiREVMRVRFIEZST00gUENBRERSRVNTIiku\nZXhlY3V0ZVVwZGF0ZSgpOw0KLy8gICAgICAgIGNvbi5wcmVwYXJlU3RhdGVt\nZW50KCJERUxFVEUgRlJPTSBQQ0NPVU5UUlkiKS5leGVjdXRlVXBkYXRlKCk7\nDQoNCiAgICAgICAgZGVsZXRlQWxsKFBDRGlyZWN0b3J5LmNsYXNzKTsNCiAg\nICAgICAgZGVsZXRlQWxsKFBDRmlsZS5jbGFzcyk7DQogICAgICAgIGRlbGV0\nZUFsbChQQ1BlcnNvbi5jbGFzcyk7DQogICAgICAgIGRlbGV0ZUFsbChQQ0Rl\ncGFydG1lbnQuY2xhc3MpOw0KICAgICAgICBkZWxldGVBbGwoUENDb21wYW55\nLmNsYXNzKTsNCiAgICAgICAgZGVsZXRlQWxsKFBDQWRkcmVzcy5jbGFzcyk7\nDQogICAgICAgIGRlbGV0ZUFsbChQQ0NvdW50cnkuY2xhc3MpOw0KICAgICAg\nICBkZWxldGVBbGwoUENFbXBsb3llZS5jbGFzcyk7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

