{"sha":"1dd391385afbfac69aac152ba805a33bb3a24105","node_id":"MDQ6QmxvYjIwNjM2NDoxZGQzOTEzODVhZmJmYWM2OWFhYzE1MmJhODA1YTMzYmIzYTI0MTA1","size":14508,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1dd391385afbfac69aac152ba805a33bb3a24105","content":"LyoNCiAqIFRlc3RJbmNyZW1lbnRhbEZsdXNoZXMuamF2YQ0KICoNCiAqIENy\nZWF0ZWQgb24gT2N0b2JlciAxMiwgMjAwNiwgMTE6MjQgQU0NCiAqDQogKiBU\nbyBjaGFuZ2UgdGhpcyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxh\ndGUgTWFuYWdlcg0KICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBl\nZGl0b3IuDQogKi8NCi8qDQogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNv\nZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lDQogKiBvciBtb3Jl\nIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9U\nSUNFIGZpbGUNCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBh\nZGRpdGlvbmFsIGluZm9ybWF0aW9uDQogKiByZWdhcmRpbmcgY29weXJpZ2h0\nIG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlDQogKiB0\nbyB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAo\ndGhlDQogKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxl\nIGV4Y2VwdCBpbiBjb21wbGlhbmNlDQogKiB3aXRoIHRoZSBMaWNlbnNlLiAg\nWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogKg0K\nICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4w\nDQogKg0KICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9y\nIGFncmVlZCB0byBpbiB3cml0aW5nLA0KICogc29mdHdhcmUgZGlzdHJpYnV0\nZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4NCiAq\nICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJ\nT05TIE9GIEFOWQ0KICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGll\nZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlDQogKiBzcGVjaWZpYyBsYW5n\ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zDQog\nKiB1bmRlciB0aGUgTGljZW5zZS4gICAgDQogKi8NCnBhY2thZ2Ugb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsNCg0KDQoNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1v\nbi5hcHBzLk1vZEluc3RhbmNlQ2FsbGJhY2tUZXN0czsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBz\nLk1vZFJ1bnRpbWVUZXN0MTsNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5ldmVudC5BYnN0cmFjdFRyYW5zYWN0aW9uTGlzdGVuZXI7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50LlRyYW5zYWN0aW9uRXZlbnQ7DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5QQ1N0YXRlOw0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50\naXR5TWFuYWdlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJTUEk7DQoNCnB1YmxpYyBjbGFz\ncyBUZXN0SW5jcmVtZW50YWxGbHVzaGVzIGV4dGVuZHMgQmFzZUtlcm5lbFRl\nc3Qgew0KDQogICAgcHVibGljIFRlc3RJbmNyZW1lbnRhbEZsdXNoZXMoU3Ry\naW5nIHN0cikgew0KICAgICAgICBzdXBlcihzdHIpOw0KICAgIH0NCg0KICAg\nIC8qKg0KICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgVGVzdElu\nY3JlbWVudGFsRmx1c2hlcw0KICAgICAqLw0KICAgIHB1YmxpYyBUZXN0SW5j\ncmVtZW50YWxGbHVzaGVzKCkgew0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIHNldFVwKCkgew0KICAgICAgICBkZWxldGVBbGwoTW9kUnVudGltZVRlc3Qx\nLmNsYXNzKTsNCi8vICAgICAgICBkZWxldGVBbGwoTW9kSW5zdGFuY2VDYWxs\nYmFja1Rlc3RzLmNsYXNzKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0\nZXN0QmFzaWNKZG9QcmVTdG9yZSgpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPSBnZXRQTSh0cnVlLCBmYWxzZSk7DQogICAgICAgIHN0\nYXJ0VHgocG0pOw0KICAgICAgICBNb2RJbnN0YW5jZUNhbGxiYWNrVGVzdHMg\nYSA9IG5ldyBNb2RJbnN0YW5jZUNhbGxiYWNrVGVzdHMoImZvbyIsIDEwKTsN\nCiAgICAgICAgcG0ucGVyc2lzdChhKTsNCiAgICAgICAgcG0uZmx1c2goKTsN\nCiAgICAgICAgYXNzZXJ0VHJ1ZShhLnByZVN0b3JlQ2FsbGVkKTsNCiAgICAg\nICAgZW5kVHgocG0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RO\nb0ZsdXNoKCkgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nIGdldFBNKHRydWUsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQog\nICAgICAgIE1vZEluc3RhbmNlQ2FsbGJhY2tUZXN0cyBhID0gbmV3IE1vZElu\nc3RhbmNlQ2FsbGJhY2tUZXN0cygiZm9vIiwgMTApOw0KICAgICAgICBwbS5w\nZXJzaXN0KGEpOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGFzc2Vy\ndFRydWUoYS5wcmVTdG9yZUNhbGxlZCk7DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgdGVzdEZsdXNoTm9DaGFuZ2UoKSB7DQogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0odHJ1ZSwgZmFsc2UpOw0KICAgICAg\nICBzdGFydFR4KHBtKTsNCiAgICAgICAgTW9kSW5zdGFuY2VDYWxsYmFja1Rl\nc3RzIGEgPSBuZXcgTW9kSW5zdGFuY2VDYWxsYmFja1Rlc3RzKCJmb28iLCAx\nMCk7DQogICAgICAgIHBtLnBlcnNpc3QoYSk7DQogICAgICAgIHBtLmZsdXNo\nKCk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShh\nLnByZVN0b3JlQ2FsbGVkKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwLCBh\nLmdldEludEZpZWxkKCkpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEhl\nbHBlciBtZXRob2QgZm9yIHNvbWUgY29tbW9uIHRlc3QgY2FzZXMuIFNlZSB1\ndGlsaXphdGlvbnMgb2YNCiAgICAgKiB0aGlzIGJlbG93Lg0KICAgICAqLw0K\nICAgIHByaXZhdGUgdm9pZCBiYXNpY0hlbHBlcihib29sZWFuIHVwZGF0ZSwg\nYm9vbGVhbiBtdWx0aSwgYm9vbGVhbiBkZmcsDQogICAgICAgIGJvb2xlYW4g\nbm9uREZHKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0g\nZ2V0UE0odHJ1ZSwgZmFsc2UpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCg0K\nICAgICAgICBNb2RJbnN0YW5jZUNhbGxiYWNrVGVzdHMgYSA9IG5ldyBNb2RJ\nbnN0YW5jZUNhbGxiYWNrVGVzdHMoImZvbyIsIDEwKTsNCiAgICAgICAgcG0u\ncGVyc2lzdChhKTsNCiAgICAgICAgaWYgKHVwZGF0ZSkgew0KICAgICAgICAg\nICAgZW5kVHgocG0pOw0KICAgICAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdl\ndE9iamVjdElkKGEpOw0KICAgICAgICAgICAgZW5kRW0ocG0pOw0KICAgICAg\nICAgICAgcG0gPSBnZXRQTSh0cnVlLCBmYWxzZSk7DQogICAgICAgICAgICBz\ndGFydFR4KHBtKTsNCiAgICAgICAgICAgIGEgPSAoTW9kSW5zdGFuY2VDYWxs\nYmFja1Rlc3RzKSBwbQ0KICAgICAgICAgICAgICAgIC5maW5kKE1vZEluc3Rh\nbmNlQ2FsbGJhY2tUZXN0cy5jbGFzcywgb2lkKTsNCiAgICAgICAgfSBlbHNl\nIHsNCiAgICAgICAgICAgIHBtLmZsdXNoKCk7DQogICAgICAgIH0NCg0KICAg\nICAgICBpZiAoZGZnKQ0KICAgICAgICAgICAgYS5zZXRJbnRGaWVsZCgxMSk7\nDQogICAgICAgIGlmIChub25ERkcpDQogICAgICAgICAgICBhLnNldE5vbkRG\nR0ZpZWxkKDExKTsNCg0KICAgICAgICBpZiAobXVsdGkpIHsNCiAgICAgICAg\nICAgIHBtLmZsdXNoKCk7DQoNCiAgICAgICAgICAgIGlmIChkZmcpDQogICAg\nICAgICAgICAgICAgYS5zZXRJbnRGaWVsZCgxMik7DQogICAgICAgICAgICBp\nZiAobm9uREZHKQ0KICAgICAgICAgICAgICAgIGEuc2V0Tm9uREZHRmllbGQo\nMTIpOw0KICAgICAgICB9DQoNCiAgICAgICAgZW5kVHgocG0pOw0KDQogICAg\nICAgIC8vIGlmIG5vIGNoYW5nZXMgd2VyZSBtYWRlIGFuZCB3ZSdyZSBpbiB1\ncGRhdGUgbW9kZSwgdGhlbiB0aGlzDQogICAgICAgIC8vIG9iamVjdCB3b24n\ndCBoYXZlIGhhZCBqZG9QcmVTdG9yZSgpIGNhbGxlZC4NCi8vICAgICAgICBp\nZiAoISh1cGRhdGUgJiYgKCFkZmcgJiYgIW5vbkRGRykpKQ0KLy8gICAgICAg\nICAgICBhc3NlcnRUcnVlKCJhLnByZXN0b3JlQ2FsbGVkIGlzIGZhbHNlIiwg\nYS5wcmVTdG9yZUNhbGxlZCk7DQoNCiAgICAgICAgaWYgKG11bHRpKSB7DQog\nICAgICAgICAgICBpZiAoZGZnKQ0KICAgICAgICAgICAgICAgIGFzc2VydEVx\ndWFscygiYS5nZXRJbnRGaWVsZCBpcyBub3QgMTIiLCAxMiwgYS5nZXRJbnRG\naWVsZCgpKTsNCiAgICAgICAgICAgIGlmIChub25ERkcpDQogICAgICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJhLmdldE5vbkRGR0ZpZWxkIGlzIG5vdCAx\nMiIsIDEyLA0KICAgICAgICAgICAgICAgICAgICBhLmdldE5vbkRGR0ZpZWxk\nKCkpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKGRmZykN\nCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoImEuZ2V0SW50RmllbGQg\naXMgbm90IDEyIiwgMTEsIGEuZ2V0SW50RmllbGQoKSk7DQogICAgICAgICAg\nICBpZiAobm9uREZHKQ0KICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscygi\nYS5nZXROb25ERkdGaWVsZCBpcyBub3QgMTIiLCAxMSwNCiAgICAgICAgICAg\nICAgICAgICAgYS5nZXROb25ERkdGaWVsZCgpKTsNCiAgICAgICAgfQ0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RGbHVzaFN0b3JlUHJpbWFyeURG\nR0NoYW5nZSgpIHsNCiAgICAgICAgYmFzaWNIZWxwZXIoZmFsc2UsIGZhbHNl\nLCB0cnVlLCBmYWxzZSk7DQogICAgICAgIGJhc2ljSGVscGVyKGZhbHNlLCB0\ncnVlLCB0cnVlLCBmYWxzZSk7DQogICAgICAgIGJhc2ljSGVscGVyKHRydWUs\nIGZhbHNlLCB0cnVlLCBmYWxzZSk7DQogICAgICAgIGJhc2ljSGVscGVyKHRy\ndWUsIHRydWUsIHRydWUsIGZhbHNlKTsNCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0Rmx1c2hTdG9yZVByaW1hcnlOb25ERkdDaGFuZ2UoKSB7DQog\nICAgICAgIGJhc2ljSGVscGVyKGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRydWUp\nOw0KICAgICAgICBiYXNpY0hlbHBlcihmYWxzZSwgdHJ1ZSwgZmFsc2UsIHRy\ndWUpOw0KICAgICAgICBiYXNpY0hlbHBlcih0cnVlLCBmYWxzZSwgZmFsc2Us\nIHRydWUpOw0KICAgICAgICBiYXNpY0hlbHBlcih0cnVlLCB0cnVlLCBmYWxz\nZSwgdHJ1ZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEZsdXNo\nU3RvcmVQcmltYXJ5Tm9uREZHQW5kREZHQ2hhbmdlKCkgew0KICAgICAgICBi\nYXNpY0hlbHBlcihmYWxzZSwgZmFsc2UsIHRydWUsIHRydWUpOw0KICAgICAg\nICBiYXNpY0hlbHBlcihmYWxzZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7DQogICAg\nICAgIGJhc2ljSGVscGVyKHRydWUsIGZhbHNlLCB0cnVlLCB0cnVlKTsNCiAg\nICAgICAgYmFzaWNIZWxwZXIodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEZsdXNoU3RvcmVQcmltYXJ5\nTm9DaGFuZ2VzKCkgew0KICAgICAgICBiYXNpY0hlbHBlcihmYWxzZSwgZmFs\nc2UsIGZhbHNlLCBmYWxzZSk7DQogICAgICAgIGJhc2ljSGVscGVyKGZhbHNl\nLCB0cnVlLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICBiYXNpY0hlbHBlcih0\ncnVlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgYmFzaWNIZWxw\nZXIodHJ1ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0SmRvUHJlU3RvcmVXaXRoTW9kaWZpY2F0aW9uQmVm\nb3JlRmx1c2goKSB7DQogICAgICAgIHRqcHN3bUhlbHBlcih0cnVlKTsNCiAg\nICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0SmRvUHJlU3RvcmVXaXRoTW9k\naWZpY2F0aW9uQWZ0ZXJGbHVzaCgpIHsNCiAgICAgICAgdGpwc3dtSGVscGVy\nKGZhbHNlKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgdGpwc3dtSGVs\ncGVyKGJvb2xlYW4gYmVmb3JlKSB7DQogICAgICAgIC8vIHNldCByZXRhaW52\nYWx1ZXMgdG8gZmFsc2Ugc28gdGhhdCB3ZSBjYW4gZW5zdXJlIHRoYXQgdGhl\nDQogICAgICAgIC8vIGRhdGEgaW4gdGhlIGRhdGFiYXNlIGlzIGNvcnJlY3Qs\nIGFuZCB0aGF0IHdlJ3JlIG5vdCBqdXN0DQogICAgICAgIC8vIHRlc3Rpbmcg\ndGhhdCB0aGUgSlZNIGRhdGEgaXMgY29ycmVjdC4NCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSh0cnVlLCBmYWxzZSk7DQogICAg\nICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBNb2RJbnN0YW5jZUNhbGxiYWNr\nVGVzdHMgYSA9IG5ldyBNb2RJbnN0YW5jZUNhbGxiYWNrVGVzdHMoImZvbyIs\nIDEwKTsNCiAgICAgICAgcG0ucGVyc2lzdChhKTsNCg0KICAgICAgICAvLyBi\neSBzZXR0aW5nIHRoZSBuYW1lIHRvICdiYXInLCB0aGUgamRvUHJlU3RvcmUo\nKSBpbnZvY2F0aW9uDQogICAgICAgIC8vIHdpbGwgc2V0IHRoZSBwYXJlbnQg\ndG8gYSBuZXcgb2JqZWN0LiBUaGlzIGVuc3VyZXMgdGhhdCBuZXcNCiAgICAg\nICAgLy8gb2JqZWN0cyBjcmVhdGVkIGluIGpkb1ByZVN0b3JlKCkgbWFrZSB0\naGVpciB3YXkgaW50byB0aGUgREINCiAgICAgICAgLy8gZHVyaW5nIGNvbW1p\ndC4NCiAgICAgICAgaWYgKGJlZm9yZSkgew0KICAgICAgICAgICAgYS5zZXRT\ndHJpbmdGaWVsZCgiYmFyIik7DQogICAgICAgICAgICBwbS5mbHVzaCgpOw0K\nICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcG0uZmx1c2goKTsNCiAg\nICAgICAgICAgIGEuc2V0U3RyaW5nRmllbGQoImJhciIpOw0KICAgICAgICB9\nDQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSgiYS5w\ncmVTdG9yZUNhbGxlZCBpcyBmYWxzZSIsIGEucHJlU3RvcmVDYWxsZWQpOw0K\nICAgICAgICBhc3NlcnROb3ROdWxsKCJhLmdldE9uZU9uZSBpcyBudWxsIiwg\nYS5nZXRPbmVPbmUoKSk7DQogICAgICAgIGFzc2VydFRydWUoImdldE9uZU9u\nZSgpLmdldHN0cm5nZmxkLmVxdWFscyhqZG9QcmVzdG9yZSkgaXMgZmFsc2Ui\nLA0KICAgICAgICAgICAgYS5nZXRPbmVPbmUoKS5nZXRTdHJpbmdGaWVsZCgp\nLmVxdWFscygiamRvUHJlU3RvcmUiKSk7DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgdGVzdE9uZVRvT25lQmVmb3JlKCkgew0KICAgICAgICB0b3RvSGVs\ncGVyKHRydWUsIHRydWUsIGZhbHNlKTsNCiAgICAgICAgdG90b0hlbHBlcih0\ncnVlLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICB0b3RvSGVscGVyKHRydWUs\nIHRydWUsIHRydWUpOw0KICAgICAgICB0b3RvSGVscGVyKHRydWUsIGZhbHNl\nLCB0cnVlKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25lVG9P\nbmVBZnRlcigpIHsNCiAgICAgICAgdG90b0hlbHBlcihmYWxzZSwgdHJ1ZSwg\nZmFsc2UpOw0KICAgICAgICB0b3RvSGVscGVyKGZhbHNlLCBmYWxzZSwgZmFs\nc2UpOw0KICAgICAgICB0b3RvSGVscGVyKGZhbHNlLCB0cnVlLCB0cnVlKTsN\nCiAgICAgICAgdG90b0hlbHBlcihmYWxzZSwgZmFsc2UsIHRydWUpOw0KICAg\nIH0NCg0KICAgIHByaXZhdGUgdm9pZCB0b3RvSGVscGVyKGJvb2xlYW4gYmVm\nb3JlLCBib29sZWFuIHBlcnNpc3QsDQogICAgICAgIGJvb2xlYW4gbXVsdGkp\nIHsNCiAgICAgICAgLy8gc2V0IHJldGFpbnZhbHVlcyB0byBmYWxzZSBzbyB0\naGF0IHdlIGNhbiBlbnN1cmUgdGhhdCB0aGUNCiAgICAgICAgLy8gZGF0YSBp\nbiB0aGUgZGF0YWJhc2UgaXMgY29ycmVjdCwgYW5kIHRoYXQgd2UncmUgbm90\nIGp1c3QNCiAgICAgICAgLy8gdGVzdGluZyB0aGF0IHRoZSBKVk0gZGF0YSBp\ncyBjb3JyZWN0Lg0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nIGdldFBNKHRydWUsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQog\nICAgICAgIE1vZEluc3RhbmNlQ2FsbGJhY2tUZXN0cyBhID0gbmV3IE1vZElu\nc3RhbmNlQ2FsbGJhY2tUZXN0cygiZm9vIiwgMTApOw0KICAgICAgICBwbS5w\nZXJzaXN0KGEpOw0KDQogICAgICAgIE1vZFJ1bnRpbWVUZXN0MSBwYXJlbnQg\nPSBuZXcgTW9kUnVudGltZVRlc3QxKCJiYXoiLCAxMSk7DQogICAgICAgIGlm\nICghYmVmb3JlKQ0KICAgICAgICAgICAgcG0uZmx1c2goKTsNCg0KICAgICAg\nICBpZiAocGVyc2lzdCkNCiAgICAgICAgICAgIHBtLnBlcnNpc3QocGFyZW50\nKTsNCg0KICAgICAgICBhLnNldE9uZU9uZShwYXJlbnQpOw0KDQogICAgICAg\nIGlmIChiZWZvcmUpDQogICAgICAgICAgICBwbS5mbHVzaCgpOw0KDQogICAg\nICAgIE1vZFJ1bnRpbWVUZXN0MSBvbGRQYXJlbnQgPSBudWxsOw0KICAgICAg\nICBpZiAobXVsdGkpIHsNCiAgICAgICAgICAgIG9sZFBhcmVudCA9IHBhcmVu\ndDsNCiAgICAgICAgICAgIHBhcmVudCA9IG5ldyBNb2RSdW50aW1lVGVzdDEo\nIm5ld1BhcmVudCIsIDEyKTsNCg0KICAgICAgICAgICAgaWYgKCFiZWZvcmUp\nDQogICAgICAgICAgICAgICAgcG0uZmx1c2goKTsNCg0KICAgICAgICAgICAg\naWYgKHBlcnNpc3QpDQogICAgICAgICAgICAgICAgcG0ucGVyc2lzdChwYXJl\nbnQpOw0KDQogICAgICAgICAgICBhLnNldE9uZU9uZShwYXJlbnQpOw0KDQog\nICAgICAgICAgICBpZiAoYmVmb3JlKQ0KICAgICAgICAgICAgICAgIHBtLmZs\ndXNoKCk7DQogICAgICAgIH0NCg0KICAgICAgICBlbmRUeChwbSk7DQogICAg\nICAgIGFzc2VydFRydWUoImEucHJlU3RvcmVDYWxsZWQgaXMgZmFsc2UiLCBh\nLnByZVN0b3JlQ2FsbGVkKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVsbCgiYS5n\nZXRPbmVPbmUgaXMgbnVsbCIsIGEuZ2V0T25lT25lKCkpOw0KICAgICAgICBp\nZiAoIW11bHRpKQ0KICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiYS5nZXRPbmVP\nbmUoKS5nZXRTdHJpbmdGaWVsZCgpLmVxdWFscyhiYXopIGlzIGZhbHNlIiwN\nCiAgICAgICAgICAgICAgICBhLmdldE9uZU9uZSgpLmdldFN0cmluZ0ZpZWxk\nKCkuZXF1YWxzKCJiYXoiKSk7DQogICAgICAgIGVsc2Ugew0KICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgNCiAgICAgICAgICAgICAgICAiYS5nZXRPbmVPbmUo\nKS5nZXRTdHJpbmdGaWVsZCgpLmVxdWFscyhuZXdQYXJlbnQpIGlzIGZhbHNl\nIiwNCiAgICAgICAgICAgICAgICBhLmdldE9uZU9uZSgpLmdldFN0cmluZ0Zp\nZWxkKCkuZXF1YWxzKCJuZXdQYXJlbnQiKSk7DQoNCiAgICAgICAgICAgIC8v\nIGlmIG11bHRpLCB0aGVuIHdlIHJlYWxseSBzaG91bGQgZGVsZXRlIHRoZSBi\nYXoNCiAgICAgICAgICAgIC8vIHBhcmVudC4gVGhpcyBpc24ndCBoYXBwZW5p\nbmcgcmlnaHQgbm93Lg0KICAgICAgICAgICAgLy8gIyMjIHNob3VsZCBiZSBh\nIGJ1Zw0KICAgICAgICAgICAgLy9hc3NlcnRUcnVlIChKRE9IZWxwZXIuaXNE\nZWxldGVkIChvbGRQYXJlbnQpKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAg\nIHByaXZhdGUgdm9pZCBhc3NlcnRTdGF0ZShPYmplY3QgbywgUENTdGF0ZSBz\ndGF0ZSwgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0pIHsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKHN0YXRlLCBnZXRTdGF0ZU1hbmFnZXIobywgcG0pLmdldFBD\nU3RhdGUoKSk7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIGNvbW1pdEFu\nZFRlc3REZWxldGUoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0sIE9iamVjdCBv\nKSB7DQogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmplY3RJZChvKTsN\nCiAgICAgICAgZW5kVHgocG0pOw0KDQogICAgICAgIHBtID0gZ2V0UE0oKTsN\nCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHBtLmZpbmQoT2JqZWN0LmNs\nYXNzLCBvaWQpOw0KICAgICAgICAgICAgZmFpbCgic2hvdWxkIG5vdCBiZSBh\nYmxlIHRvIGxvYWQgZGVsZXRlZCBvYmplY3QiKTsNCiAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIC8vIGV4cGVjdGVkIGNh\nc2UNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RE\nZWxldGVOZXcoKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nID0gZ2V0UE0odHJ1ZSwgZmFsc2UpOw0KICAgICAgICBzdGFydFR4KHBtKTsN\nCiAgICAgICAgTW9kUnVudGltZVRlc3QxIGEgPSBuZXcgTW9kUnVudGltZVRl\nc3QxKCJmb28iLCAxMCk7DQogICAgICAgIHBtLnBlcnNpc3QoYSk7DQogICAg\nICAgIHBtLnJlbW92ZShhKTsNCiAgICAgICAgYXNzZXJ0U3RhdGUoYSwgUENT\ndGF0ZS5QTkVXREVMRVRFRCwgcG0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2\nb2lkIHRlc3RPcHRpbWlzdGljTG9ja0dpdmVzQ29ycmVjdEVycm9yKCkgew0K\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbTEgPSBnZXRQTSh0cnVl\nLCBmYWxzZSk7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtMiA9\nIGdldFBNKHRydWUsIGZhbHNlKTsNCg0KICAgICAgICBNb2RSdW50aW1lVGVz\ndDEgYTEgPSBuZXcgTW9kUnVudGltZVRlc3QxKCJmb28iLCAxMCk7DQogICAg\nICAgIHN0YXJ0VHgocG0xKTsNCiAgICAgICAgcG0xLnBlcnNpc3QoYTEpOw0K\nICAgICAgICBlbmRUeChwbTEpOw0KDQogICAgICAgIE1vZFJ1bnRpbWVUZXN0\nMSBhMiA9IChNb2RSdW50aW1lVGVzdDEpDQogICAgICAgICAgICBwbTIuZmlu\nZChNb2RSdW50aW1lVGVzdDEuY2xhc3MsIHBtMi5nZXRPYmplY3RJZChhMSkp\nOw0KICAgICAgICBzdGFydFR4KHBtMik7DQogICAgICAgIGEyLnNldFN0cmlu\nZ0ZpZWxkKCJmb29iYXIiKTsNCiAgICAgICAgZW5kVHgocG0yKTsNCg0KICAg\nICAgICBzdGFydFR4KHBtMSk7DQogICAgICAgIGExLnNldFN0cmluZ0ZpZWxk\nKCJmb29iYXJiYXoiKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGVu\nZFR4KHBtMSk7DQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBvbGUpIHsN\nCiAgICAgICAgICAgIC8vIGV4cGVjdGVkIGNhc2UNCiAgICAgICAgfSBmaW5h\nbGx5IHsNCiAgICAgICAgICAgIHJvbGxiYWNrVHgocG0xKTsNCg0KICAgICAg\nICAgICAgcG0xLmNsb3NlKCk7DQogICAgICAgICAgICBwbTIuY2xvc2UoKTsN\nCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFZlcmlmeSB0\naGF0IGZsdXNoZXMgdG8gdGhlIGRhdGFzdG9yZSBhcmUgaXNvbGF0ZWQgZnJv\nbSBvdGhlcg0KICAgICAqIFBlcnNpc3RlbmNlTWFuYWdlcnMuIFRoaXMgaXMg\nbW9zdGx5IGEgdGVzdCBvZiB0aGUgdW5kZXJseWluZw0KICAgICAqIGRhdGFz\ndG9yZSdzIHRyYW5zYWN0aW9uYWwgaXNvbGF0aW9uIGNhcGFiaWxpdGllcy4N\nCiAgICAgKiA8cC8+DQogICAgICogRGlzYWJsZWQ6IHRoaXMgaGFuZ3Mgb24g\nU3liYXNlLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIFhYWHRlc3RGbHVz\naGVzQXJlSXNvbGF0ZWQoKSB7DQogICAgICAgIGZpbmFsIFN0cmluZyBuYW1l\nID0gInRlc3RGbHVzaGVzQXJlSXNvbGF0ZWQiOw0KDQogICAgICAgIGRlbGV0\nZUFsbChNb2RSdW50aW1lVGVzdDEuY2xhc3MpOw0KDQogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIGZsdXNoUE0gPSBnZXRQTSh0cnVlLCBmYWxzZSk7\nDQogICAgICAgIHN0YXJ0VHgoZmx1c2hQTSk7DQoNCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcmVhZFBNID0gZ2V0UE0odHJ1ZSwgZmFsc2UpOw0K\nICAgICAgICBzdGFydFR4KHJlYWRQTSk7DQoNCiAgICAgICAgYXNzZXJ0U2l6\nZSgwLCBmbHVzaFBNLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJzdHJpbmdGaWVsZCA9\nPSAnIiArIG5hbWUgKyAiJyIsDQogICAgICAgICAgICBNb2RSdW50aW1lVGVz\ndDEuY2xhc3MpKTsNCiAgICAgICAgYXNzZXJ0U2l6ZSgwLCByZWFkUE0uY3Jl\nYXRlTmF0aXZlUXVlcnkoInN0cmluZ0ZpZWxkID09ICciICsgbmFtZSArICIn\nIiwNCiAgICAgICAgICAgIE1vZFJ1bnRpbWVUZXN0MS5jbGFzcykpOw0KDQog\nICAgICAgIE1vZFJ1bnRpbWVUZXN0MSBhID0gbmV3IE1vZFJ1bnRpbWVUZXN0\nMShuYW1lLCByYW5kb21JbnQoKS5pbnRWYWx1ZSgpKTsNCg0KICAgICAgICBm\nbHVzaFBNLnBlcnNpc3QoYSk7DQoNCiAgICAgICAgYXNzZXJ0U2l6ZSgwLCBy\nZWFkUE0uY3JlYXRlTmF0aXZlUXVlcnkoIm5hbWUgPT0gJyIgKyBuYW1lICsg\nIiciLA0KICAgICAgICAgICAgTW9kUnVudGltZVRlc3QxLmNsYXNzKSk7DQoN\nCiAgICAgICAgZmx1c2hQTS5mbHVzaCgpOw0KDQogICAgICAgIC8vIG1ha2Ug\nc3VyZSB0aGUgb3RoZXIgcG0gZG9lc24ndCBzZWUgdGhlIGZsdXNoZWQgb2Jq\nZWN0DQogICAgICAgIGFzc2VydFNpemUoMCwgcmVhZFBNLmNyZWF0ZU5hdGl2\nZVF1ZXJ5KCJuYW1lID09ICciICsgbmFtZSArICInIiwNCiAgICAgICAgICAg\nIE1vZFJ1bnRpbWVUZXN0MS5jbGFzcykpOw0KDQogICAgICAgIGZsdXNoUE0u\ncmVtb3ZlKGEpOw0KDQogICAgICAgIGFzc2VydFNpemUoMCwgZmx1c2hQTS5j\ncmVhdGVOYXRpdmVRdWVyeSgibmFtZSA9PSAnIiArIG5hbWUgKyAiJyIsDQog\nICAgICAgICAgICBNb2RSdW50aW1lVGVzdDEuY2xhc3MpKTsNCiAgICAgICAg\nYXNzZXJ0U2l6ZSgwLCByZWFkUE0uY3JlYXRlTmF0aXZlUXVlcnkoIm5hbWUg\nPT0gJyIgKyBuYW1lICsgIiciLA0KICAgICAgICAgICAgTW9kUnVudGltZVRl\nc3QxLmNsYXNzKSk7DQoNCiAgICAgICAgZW5kVHgoZmx1c2hQTSk7DQogICAg\nICAgIGVuZEVtKGZsdXNoUE0pOw0KDQogICAgICAgIGVuZFR4KHJlYWRQTSk7\nDQogICAgICAgIGVuZEVtKHJlYWRQTSk7DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgdGVzdEVtcHR5Rmx1c2goKSB7DQogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgVExpc3RlbmVyIGxp\nc3RlbmVyID0gbmV3IFRMaXN0ZW5lcigpOw0KICAgICAgICAoKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyU1BJKSBwbSkuYWRkVHJhbnNhY3Rpb25MaXN0ZW5lcihs\naXN0ZW5lcik7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBNb2RS\ndW50aW1lVGVzdDEgcGMgPSBuZXcgTW9kUnVudGltZVRlc3QxKCk7DQogICAg\nICAgIHBtLnBlcnNpc3QocGMpOw0KICAgICAgICBwbS5mbHVzaCgpOw0KICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgbGlzdGVuZXIuZmx1c2hlcyk7DQogICAg\nICAgIGFzc2VydEVxdWFscygwLCBsaXN0ZW5lci5jb21taXRzKTsNCg0KICAg\nICAgICBwbS5mbHVzaCgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMSwgbGlz\ndGVuZXIuZmx1c2hlcyk7DQogICAgICAgIGFzc2VydEVxdWFscygwLCBsaXN0\nZW5lci5jb21taXRzKTsNCg0KICAgICAgICBwYy5zZXRJbnRGaWVsZCgzKTsN\nCiAgICAgICAgcG0uZmx1c2goKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIs\nIGxpc3RlbmVyLmZsdXNoZXMpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMCwg\nbGlzdGVuZXIuY29tbWl0cyk7DQoNCiAgICAgICAgZW5kVHgocG0pOw0KICAg\nICAgICBhc3NlcnRFcXVhbHMoMiwgbGlzdGVuZXIuZmx1c2hlcyk7DQogICAg\nICAgIGFzc2VydEVxdWFscygxLCBsaXN0ZW5lci5jb21taXRzKTsNCg0KICAg\nICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVz\ndEVtcHR5Um9sbGJhY2soKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgVExpc3RlbmVyIGxpc3RlbmVy\nID0gbmV3IFRMaXN0ZW5lcigpOw0KICAgICAgICAoKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyU1BJKSBwbSkuYWRkVHJhbnNhY3Rpb25MaXN0ZW5lcihsaXN0ZW5l\ncik7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBwbS5mbHVzaCgp\nOw0KICAgICAgICByb2xsYmFja1R4KHBtKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDAsIGxpc3RlbmVyLmZsdXNoZXMpOw0KICAgICAgICBhc3NlcnRFcXVh\nbHMoMCwgbGlzdGVuZXIuY29tbWl0cyk7DQogICAgICAgIGVuZEVtKHBtKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlDb21taXQoKSB7\nDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsN\nCiAgICAgICAgVExpc3RlbmVyIGxpc3RlbmVyID0gbmV3IFRMaXN0ZW5lcigp\nOw0KICAgICAgICAoKE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJKSBwbSkuYWRk\nVHJhbnNhY3Rpb25MaXN0ZW5lcihsaXN0ZW5lcik7DQogICAgICAgIHN0YXJ0\nVHgocG0pOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGFzc2VydEVx\ndWFscygwLCBsaXN0ZW5lci5mbHVzaGVzKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIGxpc3RlbmVyLmNvbW1pdHMpOw0KICAgICAgICBlbmRFbShwbSk7\nDQogICAgfQ0KDQogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgVExpc3RlbmVy\nDQogICAgICAgIGV4dGVuZHMgQWJzdHJhY3RUcmFuc2FjdGlvbkxpc3RlbmVy\nIHsNCg0KICAgICAgICBwdWJsaWMgaW50IGZsdXNoZXMgPSAwOw0KICAgICAg\nICBwdWJsaWMgaW50IGNvbW1pdHMgPSAwOw0KDQogICAgICAgIHByb3RlY3Rl\nZCB2b2lkIGV2ZW50T2NjdXJyZWQoVHJhbnNhY3Rpb25FdmVudCBldmVudCkg\new0KICAgICAgICAgICAgaWYgKGV2ZW50LmdldFR5cGUoKSA9PSBldmVudC5C\nRUZPUkVfRkxVU0gpDQogICAgICAgICAgICAgICAgZmx1c2hlcysrOw0KICAg\nICAgICAgICAgZWxzZSBpZiAoZXZlbnQuZ2V0VHlwZSgpID09IGV2ZW50LkJF\nRk9SRV9DT01NSVQpDQogICAgICAgICAgICAgICAgY29tbWl0cysrOw0KICAg\nICAgICB9DQogICAgfQ0KfQ0K\n","encoding":"base64"}

