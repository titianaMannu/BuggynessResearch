{"sha":"1c1bc63041eb5d94fd6df2680d857ae0c9e07175","node_id":"MDQ6QmxvYjIwNjM2NDoxYzFiYzYzMDQxZWI1ZDk0ZmQ2ZGYyNjgwZDg1N2FlMGM5ZTA3MTc1","size":6695,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1c1bc63041eb5d94fd6df2680d857ae0c9e07175","content":"LyoNCiAqIFRlc3RJbml0aWFsVmFsdWVGZXRjaGluZy5qYXZhDQogKg0KICog\nQ3JlYXRlZCBvbiBPY3RvYmVyIDEyLCAyMDA2LCAxMTo1OCBBTQ0KICoNCiAq\nIFRvIGNoYW5nZSB0aGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1w\nbGF0ZSBNYW5hZ2VyDQogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhl\nIGVkaXRvci4NCiAqLw0KLyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUg\nU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1v\ncmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBO\nT1RJQ0UgZmlsZQ0KICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9y\nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmln\naHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAq\nIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4w\nICh0aGUNCiAqICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZp\nbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2Uu\nICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAq\nDQogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0y\nLjANCiAqDQogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcg\nb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmli\ndXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0K\nICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJ\nVElPTlMgT0YgQU5ZDQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBs\naWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMN\nCiAqIHVuZGVyIHRoZSBMaWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsOw0KDQppbXBvcnQg\namF2YS51dGlsLkRhdGU7DQppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7DQpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7DQppbXBvcnQgamF2YS51dGlsLk1hcDsN\nCg0KDQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\na2VybmVsLmNvbW1vbi5hcHBzLlJ1bnRpbWVUZXN0MTsNCg0KaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFEYXRh\nOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVu\nSlBBRW50aXR5TWFuYWdlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5Ow0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUXVl\ncnk7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLlJl\nc3RvcmVTdGF0ZVR5cGU7DQoNCnB1YmxpYyBjbGFzcyBUZXN0SW5pdGlhbFZh\nbHVlRmV0Y2hpbmcgZXh0ZW5kcyBCYXNlS2VybmVsVGVzdCB7DQoNCiAgICAv\nKioNCiAgICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIFRlc3RJbml0\naWFsVmFsdWVGZXRjaGluZw0KICAgICAqLw0KICAgIHB1YmxpYyBUZXN0SW5p\ndGlhbFZhbHVlRmV0Y2hpbmcoU3RyaW5nIG5hbWUpIHsNCiAgICAgICAgc3Vw\nZXIobmFtZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7\nDQogICAgICAgIGRlbGV0ZUFsbChSdW50aW1lVGVzdDEuY2xhc3MpOw0KICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKCk7DQogICAg\nICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBSdW50aW1lVGVzdDEgcnQxID0g\nbmV3IFJ1bnRpbWVUZXN0MSgiVGVzdEluaXRpYWxWYWx1ZUZldGNoaW5nIiwg\nMTApOw0KICAgICAgICBwbS5wZXJzaXN0KHJ0MSk7DQoNCiAgICAgICAgcnQx\nLnNldERhdGVGaWVsZChuZXcgRGF0ZSgpKTsNCiAgICAgICAgZW5kVHgocG0p\nOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgdGVzdEluaXRpYWxWYWx1ZVN0cmluZygpIHsNCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBzdGFydFR4\nKHBtKTsNCiAgICAgICAgUnVudGltZVRlc3QxIHJ0MSA9IGdldE9iamVjdChw\nbSk7DQogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBnZXRTdGF0\nZU1hbmFnZXIocnQxLCBwbSk7DQogICAgICAgIEZpZWxkTWV0YURhdGEgZm1k\nID0gc20uZ2V0TWV0YURhdGEoKS5nZXRGaWVsZCgic3RyaW5nRmllbGQiKTsN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJUZXN0SW5pdGlhbFZhbHVlRmV0Y2hp\nbmciLA0KICAgICAgICAgICAgc20uZmV0Y2hJbml0aWFsRmllbGQoZm1kLmdl\ndEluZGV4KCkpKTsNCiAgICAgICAgcnQxLnNldFN0cmluZ0ZpZWxkKCJUZXN0\nSW5pdGlhbFZhbHVlRmV0Y2hpbmctMiIpOw0KICAgICAgICBhc3NlcnRFcXVh\nbHMoIlRlc3RJbml0aWFsVmFsdWVGZXRjaGluZyIsDQogICAgICAgICAgICBz\nbS5mZXRjaEluaXRpYWxGaWVsZChmbWQuZ2V0SW5kZXgoKSkpOw0KICAgICAg\nICBlbmRUeChwbSk7DQogICAgICAgIGFzc2VydEVxdWFscygiVGVzdEluaXRp\nYWxWYWx1ZUZldGNoaW5nLTIiLA0KICAgICAgICAgICAgc20uZmV0Y2hJbml0\naWFsRmllbGQoZm1kLmdldEluZGV4KCkpKTsNCiAgICAgICAgZW5kRW0ocG0p\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RJbml0aWFsVmFsdWVJ\nbnQoKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0\nUE0oKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIFJ1bnRpbWVU\nZXN0MSBydDEgPSBnZXRPYmplY3QocG0pOw0KICAgICAgICBPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtID0gZ2V0U3RhdGVNYW5hZ2VyKHJ0MSwgcG0pOw0KICAg\nICAgICBGaWVsZE1ldGFEYXRhIGZtZCA9IHNtLmdldE1ldGFEYXRhKCkuZ2V0\nRmllbGQoImludEZpZWxkMSIpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMTAs\nDQogICAgICAgICAgICAoKEludGVnZXIpIHNtLmZldGNoSW5pdGlhbEZpZWxk\nKGZtZC5nZXRJbmRleCgpKSkuaW50VmFsdWUoKSk7DQogICAgICAgIHJ0MS5z\nZXRJbnRGaWVsZDEoMTEpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMTAsDQog\nICAgICAgICAgICAoKEludGVnZXIpIHNtLmZldGNoSW5pdGlhbEZpZWxkKGZt\nZC5nZXRJbmRleCgpKSkuaW50VmFsdWUoKSk7DQogICAgICAgIGVuZFR4KHBt\nKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDExLA0KICAgICAgICAgICAgKChJ\nbnRlZ2VyKSBzbS5mZXRjaEluaXRpYWxGaWVsZChmbWQuZ2V0SW5kZXgoKSkp\nLmludFZhbHVlKCkpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdEluaXRpYWxWYWx1ZU11dGFibGVWYWx1ZUZh\naWx1cmVzKCkgew0KICAgICAgICBNYXAgcHJvcHMgPSBuZXcgSGFzaE1hcCgp\nOw0KICAgICAgICBwcm9wcy5wdXQoIm9wZW5qcGEuUmVzdG9yZU11dGFibGVW\nYWx1ZXMiLCAiZmFsc2UiKTsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXJGYWN0b3J5IHBtZiA9IChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkp\nDQogICAgICAgICAgICBnZXRFbWYocHJvcHMpOw0KDQogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKQ0K\nICAgICAgICAgICAgcG1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAg\nICAgUnVudGltZVRlc3QxIHJ0MSA9IGdldE9iamVjdChwbSk7DQoNCiAgICAg\nICAgRGF0ZSBkID0gcnQxLmdldERhdGVGaWVsZCgpOw0KICAgICAgICBPcGVu\nSlBBU3RhdGVNYW5hZ2VyIHNtID0gZ2V0U3RhdGVNYW5hZ2VyKHJ0MSwgcG0p\nOw0KICAgICAgICBGaWVsZE1ldGFEYXRhIGZtZCA9IHNtLmdldE1ldGFEYXRh\nKCkuZ2V0RmllbGQoImRhdGVGaWVsZCIpOw0KICAgICAgICB0cnkgew0KICAg\nICAgICAgICAgc20uZmV0Y2hJbml0aWFsRmllbGQoZm1kLmdldEluZGV4KCkp\nOw0KICAgICAgICAgICAgZmFpbCgic2hvdWxkIGdldCBhbiBleGNlcHRpb24g\naWYgUmVzdG9yZU11dGFibGVWYWx1ZXMgaXMgZmFsc2UiKTsNCiAgICAgICAg\nfSBjYXRjaCAob3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuVXNlckV4Y2VwdGlv\nbiBlKSB7DQogICAgICAgICAgICAvLyBleHBlY3RlZA0KICAgICAgICB9DQog\nICAgICAgIGVuZEVtKHBtKTsNCiAgICAgICAgcG1mLmNsb3NlKCk7DQogICAg\nfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEluaXRpYWxWYWx1ZURhdGUoKSB7\nDQogICAgICAgIE1hcCBwcm9wcyA9IG5ldyBIYXNoTWFwKCk7DQogICAgICAg\nIHByb3BzLnB1dCgib3BlbmpwYS5SZXN0b3JlU3RhdGUiLCAiYWxsIik7DQog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBwbWYgPSAoT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5KQ0KICAgICAgICAgICAgZ2V0RW1m\nKHByb3BzKTsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpDQogICAgICAgICAgICBwbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAg\nICAgUnVudGltZVRlc3QxIHJ0MSA9IGdldE9iamVjdChwbSk7DQoNCiAgICAg\nICAgRGF0ZSBkID0gcnQxLmdldERhdGVGaWVsZCgpOw0KDQogICAgICAgIE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBnZXRTdGF0ZU1hbmFnZXIocnQxLCBw\nbSk7DQogICAgICAgIEZpZWxkTWV0YURhdGEgZm1kID0gc20uZ2V0TWV0YURh\ndGEoKS5nZXRGaWVsZCgiZGF0ZUZpZWxkIik7DQogICAgICAgIGFzc2VydEVx\ndWFscyhkLCBzbS5mZXRjaEluaXRpYWxGaWVsZChmbWQuZ2V0SW5kZXgoKSkp\nOw0KDQogICAgICAgIC8vID09IHNob3VsZCBwYXNzIGhlcmUgc2luY2Ugd2Ug\naGF2ZW4ndCBtYWRlIGFueSBtb2RpZmljYXRpb25zLg0KICAgICAgICBhc3Nl\ncnRUcnVlKCJtdXRhYmxlIG9iamVjdCBmYWlscyA9PSB0ZXN0OyBzaG91bGQg\nbm90IiwNCiAgICAgICAgICAgIGQgPT0gc20uZmV0Y2hJbml0aWFsRmllbGQo\nZm1kLmdldEluZGV4KCkpKTsNCg0KICAgICAgICBEYXRlIGQyID0gbmV3IERh\ndGUoKTsNCiAgICAgICAgcnQxLnNldERhdGVGaWVsZChkMik7DQogICAgICAg\nIGFzc2VydEVxdWFscyhkLCBzbS5mZXRjaEluaXRpYWxGaWVsZChmbWQuZ2V0\nSW5kZXgoKSkpOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGFzc2Vy\ndEVxdWFscyhkMiwgc20uZmV0Y2hJbml0aWFsRmllbGQoZm1kLmdldEluZGV4\nKCkpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSgibXV0YWJsZSBvYmplY3QgcGFz\nc2VzID09IHRlc3Q7IHNob3VsZCBub3QiLA0KICAgICAgICAgICAgZDIgIT0g\nc20uZmV0Y2hJbml0aWFsRmllbGQoZm1kLmdldEluZGV4KCkpKTsNCiAgICAg\nICAgZW5kRW0ocG0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RJ\nbml0aWFsVmFsdWVFeGNlcHRpb25zKCkgew0KICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBwbSA9IGdldFBNKCk7DQogICAgICAgIHBtLnNldFJlc3Rv\ncmVTdGF0ZShSZXN0b3JlU3RhdGVUeXBlLk5PTkUpOw0KICAgICAgICBzdGFy\ndFR4KHBtKTsNCiAgICAgICAgUnVudGltZVRlc3QxIHJ0MSA9IGdldE9iamVj\ndChwbSk7DQogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBnZXRT\ndGF0ZU1hbmFnZXIocnQxLCBwbSk7DQogICAgICAgIEZpZWxkTWV0YURhdGEg\nZm1kID0gc20uZ2V0TWV0YURhdGEoKS5nZXRGaWVsZCgic3RyaW5nRmllbGQi\nKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHNtLmZldGNoSW5pdGlh\nbEZpZWxkKGZtZC5nZXRJbmRleCgpKTsNCiAgICAgICAgICAgIGZhaWwoImV4\nY2VwdGlvbiBzaG91bGQgYmUgdGhyb3duIGJ5IEtvZG9TTS5mZXRjaEluaXRp\nYWxGaWVsZCIpOw0KICAgICAgICB9IGNhdGNoIChvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5Vc2VyRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIC8vIGV4\ncGVjdGVkIGNhc2UNCiAgICAgICAgfQ0KICAgICAgICBlbmRUeChwbSk7DQog\nICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIFJ1bnRp\nbWVUZXN0MSBnZXRPYmplY3QoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0pIHsN\nCi8vICAgICAgICByZXR1cm4gKFJ1bnRpbWVUZXN0MSkgKChDb2xsZWN0aW9u\nKSANCi8vICAgICAgICAJCXBtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCAic3RyaW5n\nRmllbGQgPT0gXCJUZXN0SW5pdGlhbFZhbHVlRmV0Y2hpbmdcIiIsUnVudGlt\nZVRlc3QxLmNsYXNzKQ0KLy8gICAgICAgIC5nZXRSZXN1bHRMaXN0KCkpLml0\nZXJhdG9yKCkubmV4dCgpOw0KDQogICAgICAgIE9wZW5KUEFRdWVyeSBxID0g\ncG0uY3JlYXRlUXVlcnkoDQogICAgICAgICAgICAiU0VMRUNUIG8gRlJPTSBS\ndW50aW1lVGVzdDEgbyBXSEVSRSBvLnN0cmluZ0ZpZWxkID0gXCdUZXN0SW5p\ndGlhbFZhbHVlRmV0Y2hpbmdcJyIpOw0KICAgICAgICBMaXN0IGwgPSBxLmdl\ndFJlc3VsdExpc3QoKTsNCg0KICAgICAgICByZXR1cm4gKFJ1bnRpbWVUZXN0\nMSkgbC5pdGVyYXRvcigpLm5leHQoKTsNCiAgICB9DQp9DQo=\n","encoding":"base64"}

