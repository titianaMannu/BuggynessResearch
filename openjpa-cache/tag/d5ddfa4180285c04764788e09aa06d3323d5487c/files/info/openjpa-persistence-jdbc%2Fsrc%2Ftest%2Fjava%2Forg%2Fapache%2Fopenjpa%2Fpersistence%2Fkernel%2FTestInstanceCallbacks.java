{"sha":"fc8ec1bed9fe50bcc1846c5d4b52afc6879f9697","node_id":"MDQ6QmxvYjIwNjM2NDpmYzhlYzFiZWQ5ZmU1MGJjYzE4NDZjNWQ0YjUyYWZjNjg3OWY5Njk3","size":9750,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/fc8ec1bed9fe50bcc1846c5d4b52afc6879f9697","content":"LyoNCiAqIFRlc3RJbnN0YW5jZUNhbGxiYWNrcy5qYXZhDQogKg0KICogQ3Jl\nYXRlZCBvbiBPY3RvYmVyIDEyLCAyMDA2LCAxOjE5IFBNDQogKg0KICogVG8g\nY2hhbmdlIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRl\nIE1hbmFnZXINCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRp\ndG9yLg0KICovDQoNCi8qDQogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNv\nZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lDQogKiBvciBtb3Jl\nIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9U\nSUNFIGZpbGUNCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBh\nZGRpdGlvbmFsIGluZm9ybWF0aW9uDQogKiByZWdhcmRpbmcgY29weXJpZ2h0\nIG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlDQogKiB0\nbyB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAo\ndGhlDQogKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxl\nIGV4Y2VwdCBpbiBjb21wbGlhbmNlDQogKiB3aXRoIHRoZSBMaWNlbnNlLiAg\nWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogKg0K\nICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4w\nDQogKg0KICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9y\nIGFncmVlZCB0byBpbiB3cml0aW5nLA0KICogc29mdHdhcmUgZGlzdHJpYnV0\nZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4NCiAq\nICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJ\nT05TIE9GIEFOWQ0KICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGll\nZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlDQogKiBzcGVjaWZpYyBsYW5n\ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zDQog\nKiB1bmRlciB0aGUgTGljZW5zZS4gICAgDQogKi8NCnBhY2thZ2Ugb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbDsNCg0KDQoNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1v\nbi5hcHBzLkluc3RhbmNlQ2FsbGJhY2tzVGVzdDsNCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLlJ1\nbnRpbWVUZXN0MTsNCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuQXNzZXJ0aW9u\nRmFpbGVkRXJyb3I7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7DQoNCnB1YmxpYyBjbGFz\ncyBUZXN0SW5zdGFuY2VDYWxsYmFja3MgZXh0ZW5kcyBCYXNlS2VybmVsVGVz\ndCB7DQoNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgQ09NTUlUID0g\nMDsNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgRkxVU0ggPSAxOw0K\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBQUkVTVE9SRSA9IDI7DQoN\nCiAgICBwcml2YXRlIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIF9wbSA9IG51bGw7\nDQogICAgcHJpdmF0ZSBJbnN0YW5jZUNhbGxiYWNrc1Rlc3QgX2NhbGxiYWNr\ncyA9IG51bGw7DQoNCiAgICBwdWJsaWMgVGVzdEluc3RhbmNlQ2FsbGJhY2tz\nKFN0cmluZyBuYW1lKSB7DQogICAgICAgIHN1cGVyKG5hbWUpOw0KICAgIH0N\nCg0KICAgIC8qKg0KICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2Yg\nVGVzdEluc3RhbmNlQ2FsbGJhY2tzDQogICAgICovDQogICAgcHVibGljIFRl\nc3RJbnN0YW5jZUNhbGxiYWNrcygpIHsNCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBkZWxl\ndGVBbGwoSW5zdGFuY2VDYWxsYmFja3NUZXN0LmNsYXNzKTsNCiAgICAgICAg\nZGVsZXRlQWxsKFJ1bnRpbWVUZXN0MS5jbGFzcyk7DQogICAgICAgIF9wbSA9\nIGdldFBNKHRydWUsIHRydWUpOw0KICAgICAgICBzdGFydFR4KF9wbSk7DQog\nICAgICAgIF9jYWxsYmFja3MgPSBuZXcgSW5zdGFuY2VDYWxsYmFja3NUZXN0\nKCk7DQogICAgICAgIF9jYWxsYmFja3Muc2V0U3RyaW5nRmllbGQoImZvbyIp\nOw0KICAgICAgICBfcG0ucGVyc2lzdChfY2FsbGJhY2tzKTsNCiAgICAgICAg\nT2JqZWN0IGlkID0gX3BtLmdldE9iamVjdElkKF9jYWxsYmFja3MpOw0KICAg\nICAgICBlbmRUeChfcG0pOw0KICAgICAgICBlbmRFbShfcG0pOw0KDQogICAg\nICAgIC8vIHJlLWZpbmQgd2l0aCBkaWZmZXJlbnQgUE0NCiAgICAgICAgX3Bt\nID0gZ2V0UE0oKTsNCiAgICAgICAgX2NhbGxiYWNrcyA9DQogICAgICAgICAg\nICAoSW5zdGFuY2VDYWxsYmFja3NUZXN0KSBfcG0uZmluZChJbnN0YW5jZUNh\nbGxiYWNrc1Rlc3QuY2xhc3MsIGlkKTsNCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBy\nb2xsYmFja1R4KF9wbSk7DQogICAgICAgIGVuZEVtKF9wbSk7DQogICAgICAg\nIHN1cGVyLnRlYXJEb3duKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\ndGVzdFBvc3RMb2FkKCkgew0KICAgICAgICBfY2FsbGJhY2tzLmdldFN0cmlu\nZ0ZpZWxkKCk7DQogICAgICAgIGFzc2VydFRydWUoX2NhbGxiYWNrcy5wb3N0\nTG9hZENhbGxlZCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFBy\nZVN0b3JlKCkgew0KICAgICAgICBwcmVTdG9yZVRlc3QoQ09NTUlUKTsNCiAg\nICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0UHJlU3RvcmVXaXRoRmx1c2go\nKSB7DQogICAgICAgIHByZVN0b3JlVGVzdChGTFVTSCk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdFByZVN0b3JlV2l0aFByZVN0b3JlKCkgew0K\nICAgICAgICBwcmVTdG9yZVRlc3QoUFJFU1RPUkUpOw0KICAgIH0NCg0KICAg\nIHByaXZhdGUgdm9pZCBwcmVTdG9yZVRlc3QoaW50IGFjdGlvbikgew0KICAg\nICAgICBhc3NlcnROb0NhbGxiYWNrc0ludm9rZWQoX2NhbGxiYWNrcyk7DQov\nLyAgICAgICAgX3BtLmJlZ2luKCk7DQogICAgICAgIHN0YXJ0VHgoX3BtKTsN\nCg0KICAgICAgICBfY2FsbGJhY2tzLnNldFN0cmluZ0ZpZWxkKCJiYXIiKTsN\nCiAgICAgICAgT2JqZWN0IG9pZCA9IF9wbS5nZXRPYmplY3RJZChfY2FsbGJh\nY2tzKTsNCiAgICAgICAgaWYgKGFjdGlvbiA9PSBDT01NSVQpIHsNCiAgICAg\nICAgICAgIF9wbS5mbHVzaCgpOw0KICAgICAgICAgICAgZW5kVHgoX3BtKTsN\nCiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gRkxVU0gpDQogICAgICAg\nICAgICBfcG0uZmx1c2goKTsNCiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09\nIFBSRVNUT1JFKQ0KICAgICAgICAgICAgX3BtLnByZUZsdXNoKCk7DQogICAg\nICAgIGFzc2VydFRydWUoInByZXN0b3JlIHdhc250IGNhbGxlZCIsIF9jYWxs\nYmFja3MucHJlU3RvcmVDYWxsZWQpOw0KICAgICAgICBpZiAoYWN0aW9uICE9\nIENPTU1JVCkgew0KLy8gICAgICAgICAgICBfcG0uY29tbWl0KCk7DQogICAg\nICAgICAgICBpZiAoYWN0aW9uICE9IEZMVVNIKQ0KICAgICAgICAgICAgICAg\nIF9wbS5mbHVzaCgpOw0KICAgICAgICAgICAgZW5kVHgoX3BtKTsNCiAgICAg\nICAgfQ0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0\nUE0oKTsNCiAgICAgICAgSW5zdGFuY2VDYWxsYmFja3NUZXN0IGNhbGxiYWNr\ncyA9IChJbnN0YW5jZUNhbGxiYWNrc1Rlc3QpDQogICAgICAgICAgICBwbS5m\naW5kKEluc3RhbmNlQ2FsbGJhY2tzVGVzdC5jbGFzcywgb2lkKTsNCiAgICAg\nICAgYXNzZXJ0Tm9DYWxsYmFja3NJbnZva2VkKGNhbGxiYWNrcyk7DQogICAg\nICAgIGFzc2VydEVxdWFscygiZ2V0b25ldG9vbmUgc3RybmcgaXMgbm90IGpk\nb3ByZXN0b3JlIiwgImpkb1ByZVN0b3JlIiwNCiAgICAgICAgICAgIGNhbGxi\nYWNrcy5nZXRPbmVPbmUoKS5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAg\nZW5kRW0ocG0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RQcmVE\nZWxldGUoKSB7DQogICAgICAgIGFzc2VydE5vQ2FsbGJhY2tzSW52b2tlZChf\nY2FsbGJhY2tzKTsNCiAgICAgICAgc3RhcnRUeChfcG0pOw0KICAgICAgICBf\ncG0ucmVtb3ZlKF9jYWxsYmFja3MpOw0KICAgICAgICBhc3NlcnRUcnVlKF9j\nYWxsYmFja3MucHJlRGVsZXRlQ2FsbGVkKTsNCiAgICAgICAgZW5kVHgoX3Bt\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0UHJlRGVsZXRlUmVj\ndXJzaW9uKCkgew0KICAgICAgICBhc3NlcnROb0NhbGxiYWNrc0ludm9rZWQo\nX2NhbGxiYWNrcyk7DQogICAgICAgIHN0YXJ0VHgoX3BtKTsNCiAgICAgICAg\nX2NhbGxiYWNrcy5wcmVEZWxldGVDeWNsZSA9IDA7DQogICAgICAgIF9wbS5y\nZW1vdmUoX2NhbGxiYWNrcyk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCBf\nY2FsbGJhY2tzLnByZURlbGV0ZUN5Y2xlKTsNCiAgICAgICAgZW5kVHgoX3Bt\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2V0UmVsYXRlZFJl\nZmVyZW5jZUluUHJlU3RvcmUoKSB7DQogICAgICAgIGFzc2VydE51bGwoX2Nh\nbGxiYWNrcy5nZXRSZWxJZCgpKTsNCiAgICAgICAgSW5zdGFuY2VDYWxsYmFj\na3NUZXN0IGNhbGxiYWNrczIgPSBuZXcgSW5zdGFuY2VDYWxsYmFja3NUZXN0\nKCk7DQogICAgICAgIGNhbGxiYWNrczIuc2V0UmVsSWQoX3BtLmdldE9iamVj\ndElkKF9jYWxsYmFja3MpKTsNCiAgICAgICAgc3RhcnRUeChfcG0pOw0KICAg\nICAgICBfcG0ucGVyc2lzdChjYWxsYmFja3MyKTsNCiAgICAgICAgX3BtLmZs\ndXNoKCk7DQogICAgICAgIGVuZFR4KF9wbSk7DQogICAgICAgIGFzc2VydEVx\ndWFscyg4ODg4LCBfY2FsbGJhY2tzLmdldEludEZpZWxkKCkpOw0KICAgICAg\nICB0cnkgew0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGNhbGxiYWNrczIs\nIF9jYWxsYmFja3MuZ2V0UmVsKCkpOw0KICAgICAgICB9IGNhdGNoIChBc3Nl\ncnRpb25GYWlsZWRFcnJvciBhZmUpIHsNCiAgICAgICAgICAgIGJ1ZygxMTYy\nLCBhZmUsICJTZXR0aW5nIGEgcmVsYXRlZCBvYmplY3QgcmVmZXJlbmNlIGlu\nICINCiAgICAgICAgICAgICAgICArICJwcmVTdG9yZSBmYWlscyIpOw0KICAg\nICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEZsdXNoQ2F1\nc2VzRmx1c2goKSB7DQogICAgICAgIC8vIyMjIEpETzJNSUcgOiB0aGlzIGlz\nIGZhaWxpbmcgYmVjYXVzZSB3ZSdyZSBjb25zdW1pbmcgZXhjZXB0aW9ucw0K\nICAgICAgICAvLyB0aHJvd3MgZnJvbSBjYWxsYmFja3M7IG5lZWQgdG8gZGVj\naWRlIHdoYXQgdG8gZG8gd2l0aCB0aGVtDQogICAgICAgIGNhdXNlRmx1c2hU\nZXN0KEZMVVNIKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0UHJl\nU3RvcmVDYXVzZXNGbHVzaCgpIHsNCiAgICAgICAgLy8jIyMgSkRPMk1JRyA6\nIHRoaXMgaXMgZmFpbGluZyBiZWNhdXNlIHdlJ3JlIGNvbnN1bWluZyBleGNl\ncHRpb25zDQogICAgICAgIC8vIHRocm93cyBmcm9tIGNhbGxiYWNrczsgbmVl\nZCB0byBkZWNpZGUgd2hhdCB0byBkbyB3aXRoIHRoZW0NCiAgICAgICAgY2F1\nc2VGbHVzaFRlc3QoUFJFU1RPUkUpOw0KICAgIH0NCg0KICAgIHByaXZhdGUg\ndm9pZCBjYXVzZUZsdXNoVGVzdChpbnQgYWN0aW9uKSB7DQogICAgICAgIHN0\nYXJ0VHgoX3BtKTsNCiAgICAgICAgX2NhbGxiYWNrcy5zZXRTdHJpbmdGaWVs\nZCgic3NzIik7DQogICAgICAgIF9jYWxsYmFja3MuZmx1c2hJblByZVN0b3Jl\nID0gdHJ1ZTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChhY3Rp\nb24gPT0gRkxVU0gpDQogICAgICAgICAgICAgICAgX3BtLmZsdXNoKCk7DQog\nICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgX3BtLnByZUZsdXNo\nKCk7DQoNCiAgICAgICAgICAgIGJ1ZygxMTM5LCAiUmVjdXJzaXZlIGZsdXNo\nIGFsbG93ZWQgYmVjYXVzZSBleGNlcHRpb24gc3dhbGxvd2VkIik7DQogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBqZSkgew0KICAgICAgICB9DQogICAg\nICAgIHJvbGxiYWNrVHgoX3BtKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZv\naWQgYXNzZXJ0Tm9DYWxsYmFja3NJbnZva2VkKEluc3RhbmNlQ2FsbGJhY2tz\nVGVzdCBwYykgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nDQogICAgICAgICAgICAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRF\nbnRpdHlNYW5hZ2VyKCk7DQoNCiAgICAgICAgYXNzZXJ0RmFsc2UoIkV4cGVj\ndGVkIHByZURlbGV0ZSB0byBub3QgaGF2ZSBiZWVuIGNhbGxlZCBmb3Igb2Jq\nZWN0IElEICINCiAgICAgICAgICAgICsgcG0uZ2V0T2JqZWN0SWQocGMpLCBw\nYy5wcmVEZWxldGVDYWxsZWQpOw0KICAgICAgICBhc3NlcnRGYWxzZSgiRXhw\nZWN0ZWQgcHJlQ2xlYXIgdG8gbm90IGhhdmUgYmVlbiBjYWxsZWQgZm9yIG9i\namVjdCBJRCAiDQogICAgICAgICAgICArIHBtLmdldE9iamVjdElkKHBjKSwg\ncGMucHJlQ2xlYXJDYWxsZWQpOw0KICAgICAgICBhc3NlcnRGYWxzZSgiRXhw\nZWN0ZWQgcHJlU3RvcmUgdG8gbm90IGhhdmUgYmVlbiBjYWxsZWQgZm9yIG9i\namVjdCBJRCAiDQogICAgICAgICAgICArIHBtLmdldE9iamVjdElkKHBjKSwg\ncGMucHJlU3RvcmVDYWxsZWQpOw0KICAgIH0NCg0KICAgIC8qIA0KICAgIC8v\nIG5vIEpQQSBlcXVpdmFsZW50DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGV0\nYWNoQXR0YWNoKCkNCiAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBE\nZXRhY2hBdHRhY2hFdmVudCBwYyA9IChEZXRhY2hBdHRhY2hFdmVudCkgcG0u\nZmluZA0KICAgICAgICAgICAgICAgIChEZXRhY2hBdHRhY2hFdmVudC5jbGFz\ncyxjcmVhdGVEZXRhY2hhYmxlSWQoNCkpOw0KICAgICAgICBEZXRhY2hBdHRh\nY2hFdmVudC5FVkVOVFMuY2xlYXIoKTsNCiAgICAgICAgcGMgPSAoRGV0YWNo\nQXR0YWNoRXZlbnQpIHBtLmRldGFjaChwYyk7DQogICAgICAgIGFzc2VydERl\ndGFjaEV2ZW50cyhuZXcgU3RyaW5nW117ICJQUkVENCIsICJQT1NURDQiIH0p\nOw0KICAgICAgICBlbmRFbShwbSwoKSk7DQogICAgICAgIA0KICAgICAgICBh\nc3NlcnRUcnVlKHBtLmlzRGV0YWNoZWQocGMpKTsNCiAgICAgICAgDQogICAg\nICAgIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgc3RhcnRUeChwbSwoKSk7DQog\nICAgICAgIC8vRklYTUUganRob21hcw0KICAgICAgICANCi8vICAgICAgICBw\nbS5hZGRJbnN0YW5jZUxpZmVjeWNsZUxpc3RlbmVyKG5ldyBDcmVhdGVMaWZl\nY3ljbGVMaXN0ZW5lcigpIHsNCi8vICAgICAgICAgICAgcHVibGljIHZvaWQg\ncG9zdENyZWF0ZShJbnN0YW5jZUxpZmVjeWNsZUV2ZW50IGV2KSB7DQovLyAg\nICAgICAgICAgICAgICBmYWlsKCJObyBwb3N0IGNyZWF0ZSBuZWNlc3Nhcnki\nKTsNCi8vICAgICAgICAgICAgfQ0KLy8gICAgICAgIH0sIG51bGwpOw0KICAg\nICAgICBwbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgYXNzZXJ0RGV0YWNoRXZl\nbnRzKG5ldyBTdHJpbmdbXXsgIlBSRUE0IiwgIlBPU1RBNCIgfSk7DQogICAg\nICAgIGVuZFR4KHBtLCgpKTsNCiAgICAgICAgZW5kRW0ocG0sKCkpOw0KICAg\nIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGV0YWNoQXR0YWNoUmVs\nYXRpb25zKCkgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nIGdldFBNKCk7DQogICAgICAgIHN0YXJ0VHgocG0sKCkpOw0KICAgICAgICBE\nZXRhY2hBdHRhY2hFdmVudCBwYyA9IChEZXRhY2hBdHRhY2hFdmVudCkgcG0u\nZmluZA0KICAgICAgICAgICAgICAgIChEZXRhY2hBdHRhY2hFdmVudC5jbGFz\ncyxjcmVhdGVEZXRhY2hhYmxlSWQoMikpOw0KICAgICAgICBwYy5zZXRPbmVP\nbmUoKERldGFjaEF0dGFjaEV2ZW50KSBwbS5maW5kDQogICAgICAgICAgICAg\nICAgKERldGFjaEF0dGFjaEV2ZW50LmNsYXNzLGNyZWF0ZURldGFjaGFibGVJ\nZCg0KSkpOw0KICAgICAgICBlbmRUeChwbSwoKSk7DQogICAgICAgIERldGFj\naEF0dGFjaEV2ZW50LkVWRU5UUy5jbGVhcigpOw0KICAgICAgICBwYyA9IChE\nZXRhY2hBdHRhY2hFdmVudCkgcG0uZGV0YWNoKHBjKTsNCiAgICAgICAgZW5k\nRW0ocG0sKCkpOw0KICAgICAgICBhc3NlcnREZXRhY2hFdmVudHMoDQogICAg\nICAgICAgICAgICAgbmV3IFN0cmluZ1tdeyAiUFJFRDIiLCAiUFJFRDQiLCAi\nUE9TVEQyIiwgIlBPU1RENCIgfSk7DQogICAgICAgIA0KICAgICAgICBwbSA9\nIGdldFBNKCk7DQogICAgICAgIHN0YXJ0VHgocG0sKCkpOw0KICAgICAgICBw\nbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgYXNzZXJ0RGV0YWNoRXZlbnRzKA0K\nICAgICAgICAgICAgICAgIG5ldyBTdHJpbmdbXXsgIlBSRUEyIiwgIlBSRUE0\nIiwgIlBPU1RBMiIsICJQT1NUQTQiIH0pOw0KICAgICAgICByb2xsYmFja1R4\nKHBtLCgpKTsNCiAgICAgICAgZW5kRW0ocG0sKCkpOw0KICAgIH0NCiAgICAN\nCiAgICBwcml2YXRlIHZvaWQgYXNzZXJ0RGV0YWNoRXZlbnRzKFN0cmluZ1td\nIGV4cGVjdGVkKSB7DQogICAgICAgIENvbGxlY3Rpb24gZXZlbnRzID0gRGV0\nYWNoQXR0YWNoRXZlbnQuRVZFTlRTOw0KICAgICAgICBpZiAoZXhwZWN0ZWQu\nbGVuZ3RoICE9IGV2ZW50cy5zaXplKCkpIHsNCiAgICAgICAgICAgIFN0cmlu\nZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7DQogICAgICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGV4cGVjdGVkLmxlbmd0aDsgaSsrKQ0K\nICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoZXhwZWN0ZWRbaV0pLmFwcGVu\nZCgiLCIpOw0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiIT0iKTsNCiAgICAg\nICAgICAgIGZvciAoSXRlcmF0b3IgaXQgPSBldmVudHMuaXRlcmF0b3IoKTsg\naXQuaGFzTmV4dCgpOykNCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKGl0\nLm5leHQoKSkuYXBwZW5kKCIsIik7DQogICAgICAgICAgICBmYWlsKCJtaXNt\nYXRjaCBldmVudCBjb3VudDoiICsgYnVmKTsNCiAgICAgICAgfQ0KICAgICAg\nICBTdHJpbmcgZXZlbnQ7DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nZXhwZWN0ZWQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGlmICghZXZl\nbnRzLnJlbW92ZShleHBlY3RlZFtpXSkpDQogICAgICAgICAgICAgICAgZmFp\nbCgiRXZlbnQgbm90IGZpcmVkOiIgKyBleHBlY3RlZFtpXSk7DQogICAgICAg\nICAgICBpZiAoZXZlbnRzLmNvbnRhaW5zKGV4cGVjdGVkW2ldKSkNCiAgICAg\nICAgICAgICAgICBmYWlsKCJFdmVudCBmaXJlZCB0d2ljZToiICsgZXhwZWN0\nZWRbaV0pOw0KICAgICAgICB9DQogICAgICAgIGlmICghZXZlbnRzLmlzRW1w\ndHkoKSkNCiAgICAgICAgICAgIGZhaWwoIkV4Y2VzcyBldmVudHMgZmlyZWQ6\nIiArIGV2ZW50cyk7DQogICAgICAgIERldGFjaEF0dGFjaEV2ZW50LkVWRU5U\nUy5jbGVhcigpOw0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIE9iamVjdCBj\ncmVhdGVEZXRhY2hhYmxlSWQoaW50IGZpZWxkKSB7DQogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgc3RhcnRU\neChwbSwoKSk7DQogICAgICAgIERldGFjaEF0dGFjaEV2ZW50IHBjID0gbmV3\nIERldGFjaEF0dGFjaEV2ZW50KCk7DQogICAgICAgIHBjLnNldEludEZpZWxk\nKGZpZWxkKTsNCiAgICAgICAgcG0ucGVyc2lzdChwYyk7DQogICAgICAgIGVu\nZFR4KHBtLCgpKTsNCiAgICAgICAgZW5kRW0ocG0sKCkpOw0KLy8gICAgICAg\nIHJldHVybiBwbS5nZXRPYmplY3RJZChwYyk7DQogICAgICAgIHJldHVybiBw\nYy5nZXRJZCgpOw0KICAgIH0NCiAgICAqLw0KfQ0K\n","encoding":"base64"}

