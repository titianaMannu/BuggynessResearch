{"sha":"52757c30422daa7828e27aa960257ec63442a73d","node_id":"MDQ6QmxvYjIwNjM2NDo1Mjc1N2MzMDQyMmRhYTc4MjhlMjdhYTk2MDI1N2VjNjM0NDJhNzNk","size":9614,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/52757c30422daa7828e27aa960257ec63442a73d","content":"LyoNCiAqIFRlc3RQTU1lbW9yeS5qYXZhDQogKg0KICogQ3JlYXRlZCBvbiBP\nY3RvYmVyIDEzLCAyMDA2LCAzOjI4IFBNDQogKg0KICogVG8gY2hhbmdlIHRo\naXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFnZXIN\nCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLg0KICov\nDQovKg0KICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQ0KICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlDQog\nKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBp\nbmZvcm1hdGlvbg0KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAu\nICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQ0KICogdG8geW91IHVuZGVy\nIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQ0KICogIkxp\nY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4g\nY29tcGxpYW5jZQ0KICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0\nYWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAqIGh0dHA6Ly93\nd3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICoNCiAqIFVu\nbGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8g\naW4gd3JpdGluZywNCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRo\nZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuDQogKiAiQVMgSVMiIEJB\nU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkN\nCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhl\nIExpY2Vuc2UgZm9yIHRoZQ0KICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJu\naW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucw0KICogdW5kZXIgdGhl\nIExpY2Vuc2UuICAgIA0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5rZXJuZWw7DQoNCmltcG9ydCBqYXZhLnV0aWwuQ29s\nbGVjdGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7DQppbXBvcnQg\namF2YS51dGlsLk1hcDsNCg0KDQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLlJ1bnRpbWVUZXN0\nMTsNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVudC5BYnN0cmFj\ndFRyYW5zYWN0aW9uTGlzdGVuZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmV2ZW50LlRyYW5zYWN0aW9uRXZlbnQ7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmV2ZW50LlRyYW5zYWN0aW9uTGlzdGVuZXI7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlN\nYW5hZ2VyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnk7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFRdWVyeTsNCg0KcHVi\nbGljIGNsYXNzIFRlc3RQTU1lbW9yeSBleHRlbmRzIEJhc2VLZXJuZWxUZXN0\nIHsNCg0KICAgIC8qKg0KICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ug\nb2YgVGVzdFBNTWVtb3J5DQogICAgICovDQogICAgcHVibGljIFRlc3RQTU1l\nbW9yeSgpIHsNCiAgICB9DQoNCiAgICBwdWJsaWMgVGVzdFBNTWVtb3J5KFN0\ncmluZyBzKSB7DQogICAgICAgIHN1cGVyKHMpOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyBib29sZWFuIHNraXBUZXN0KCkgew0KICAgICAgICByZXR1cm4gdHJ1\nZTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBib29sZWFu\nIF9kb1BhdXNlID0gZmFsc2U7DQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\naW50IE5VTV9PQkpFQ1RTID0gMjAwMDsNCiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBpbnQgTlVNX0ZMVVNIRVMgPSA1Ow0KDQogICAgLy8gSGFjayB0byBy\ndW4gc3RhbmQgYWxvbmUuDQogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4o\nU3RyaW5nW10gYXJncykNCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQog\nICAgICAgIFRlc3RQTU1lbW9yeSB0ZXN0cG0gPSBuZXcgVGVzdFBNTWVtb3J5\nKCJ0ZXN0UE1NZW1vcnkiKTsNCiAgICAgICAgdGVzdHBtLnNldFVwKCk7DQog\nICAgICAgIHRlc3RwbS50ZXN0TWVtb3J5VXNlKCk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgc2V0VXAoKSB7DQogICAgICAgIFN5c3RlbS5vdXQucHJp\nbnRsbigiQWJvdXQgdG8gZGVsZXRlIGFsbCIpOw0KICAgICAgICBkZWxldGVB\nbGxTdGFnZWQoZ2V0UE0oKSwgUnVudGltZVRlc3QxLmNsYXNzKTsNCiAgICAg\nICAgLy8gZGVsZXRlQWxsIChSdW50aW1lVGVzdDEuY2xhc3MpOw0KICAgICAg\nICBTeXN0ZW0ub3V0LnByaW50bG4oIkRvbmUgZGVsZXRlIGFsbCIpOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIGRlbGV0ZUFsbFN0YWdlZChPcGVuSlBB\nRW50aXR5TWFuYWdlciBwbUFyZywgQ2xhc3MgY2xhc3NUeXBlKSB7DQogICAg\nICAgIC8qDQogICAgICAgICAgLy8gY3JlYXRlIDY0MDAwIG9iamVjdHMNCiAg\nICAgICAgICAvLyBub3cgY2FsbCB0aGlzLCBXSVRIIHRoZSBkYXRhY2FjaGUg\nb24sDQogICAgICAgICAgLy8gYW5kIGRlc3BpdGUgdXNpbmcgYSBmZXRjaEJh\ndGNoIHNpemUsDQogICAgICAgICAgLy8JCXRoaXMgX3dpbGxfIHJ1biBvdXQg\nb2YgbWVtb3J5DQogICAgICAgICAgLy8gcHJvcHM6DQogIGtvZG8uRGF0YUNh\nY2hlOiB0cnVlKENhY2hlU2l6ZT01LCBTb2Z0UmVmZXJlbmNlU2l6ZT0xKQ0K\nICBrb2RvLlJlbW90ZUNvbW1pdFByb3ZpZGVyOiBzanZtDQogICAgICAgICAg\nKi8NCiAgICAgICAgaW50IGRlbENvdW50ID0gMDsNCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG07DQoNCiAgICAgICAgYm9vbGVhbiBuZWVkVG9E\nZWxldGUgPSB0cnVlOw0KICAgICAgICB3aGlsZSAobmVlZFRvRGVsZXRlKSB7\nDQogICAgICAgICAgICBwbSA9IGdldFBNKCk7DQogICAgICAgICAgICBzdGFy\ndFR4KHBtKTsNCiAgICAgICAgICAgIC8vcG0uc2V0TGFyZ2VUcmFuc2FjdGlv\nbih0cnVlKTsNCiAgICAgICAgICAgIHBtLnNldFRyYWNrQ2hhbmdlc0J5VHlw\nZSh0cnVlKTsNCiAgICAgICAgICAgIFN0cmluZyBjc3RybmcgPSBjbGFzc1R5\ncGUuZ2V0TmFtZSgpOw0KICAgICAgICAgICAgT3BlbkpQQVF1ZXJ5IGtxID0g\ncG0uY3JlYXRlUXVlcnkoIlNFTEVDVCBvIEZST00gIiArIGNzdHJuZyArICIg\nbyIpOw0KICAgICAgICAgICAga3EuZ2V0RmV0Y2hQbGFuKCkuc2V0RmV0Y2hC\nYXRjaFNpemUoMTAwKTsNCiAgICAgICAgICAgIENvbGxlY3Rpb24gcmVzdWx0\ncyA9IChDb2xsZWN0aW9uKSBrcS5nZXRSZXN1bHRMaXN0KCk7DQogICAgICAg\nICAgICBpZiAocmVzdWx0cy5zaXplKCkgPT0gMCkgew0KICAgICAgICAgICAg\nICAgIG5lZWRUb0RlbGV0ZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGJy\nZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgU3lzdGVtLm91dC5w\ncmludGxuKCJXZSBuZWVkIHRvIGRlbGV0ZSAiICsgcmVzdWx0cy5zaXplKCkp\nOw0KICAgICAgICAgICAgSXRlcmF0b3IgaXRlciA9IHJlc3VsdHMuaXRlcmF0\nb3IoKTsNCiAgICAgICAgICAgIHdoaWxlIChpdGVyLmhhc05leHQoKSkgew0K\nICAgICAgICAgICAgICAgIHBtLnJlbW92ZShpdGVyLm5leHQoKSk7DQogICAg\nICAgICAgICAgICAgZGVsQ291bnQgKz0gMTsNCiAgICAgICAgICAgICAgICBp\nZiAoKGRlbENvdW50ICUgODAwKSA9PSAwKSB7DQogICAgICAgICAgICAgICAg\nICAgIHBtLmZsdXNoKCk7DQogICAgICAgICAgICAgICAgICAgIC8vIGlzIHRo\nZSB0cmFucyBjYWhjZSBub3cgaG9sZGluZw0KICAgICAgICAgICAgICAgICAg\nICAvLyBhbGwgdGhlc2Ugb2JqZWN0cz8NCiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAg\nICAgICAgICAgU3lzdGVtLm91dC5wcmludCgiZGVsZXRlZCAyMDAiKTsNCiAg\nICAgICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgICAgIGVuZEVtKHBtKTsN\nCiAgICAgICAgfQ0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkRvbmUg\nZGVsZXRpbmciKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgcmVwb3J0\nTWVtb3J5KCkgew0KICAgICAgICByZXBvcnRNZW1vcnkoIk1lbW9yeSB1c2Vk\nIik7DQogICAgICAgIC8qDQogICAgICBEYXRhQ2FjaGVJbXBsIGRjOw0KICAg\nICAgZGMgPSAoRGF0YUNhY2hlSW1wbCkga3BtLmdldENvbmZpZ3VyYXRpb24g\nKCkuZ2V0RGF0YUNhY2hlTWFuYWdlciAoKS4NCiAgICAgICAgICBnZXREYXRh\nQ2FjaGUgKCkNCiAgICAgIENhY2hlTWFwIGNhY2hlTWFwID0gZGMuZ2V0Q2Fj\naGVNYXAgKCk7DQogICAgICB2YWx1ZXMva2V5U2V0DQogICAgICAqLw0KICAg\nIH0NCg0KICAgIHByaXZhdGUgdm9pZCByZXBvcnRNZW1vcnkoU3RyaW5nIG1z\nZykgew0KICAgICAgICBTeXN0ZW0uZ2MoKTsNCiAgICAgICAgbG9uZyBtZW1V\nc2VkID0gUnVudGltZS5nZXRSdW50aW1lKCkudG90YWxNZW1vcnkoKTsNCiAg\nICAgICAgbG9uZyBtZW1GcmVlID0gUnVudGltZS5nZXRSdW50aW1lKCkuZnJl\nZU1lbW9yeSgpOw0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIiIgKyBt\nc2cgKyAiIDogIiArIG1lbVVzZWQgKyAiLCAiICsNCiAgICAgICAgICAgIG1l\nbUZyZWUpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgdm9pZCBwYXVzZShkb3Vi\nbGUgc2Vjb25kcykgew0KICAgICAgICBpZiAoIV9kb1BhdXNlKQ0KICAgICAg\nICAgICAgcmV0dXJuOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgVGhy\nZWFkLmN1cnJlbnRUaHJlYWQoKS55aWVsZCgpOw0KICAgICAgICAgICAgVGhy\nZWFkLmN1cnJlbnRUaHJlYWQoKS5zbGVlcCgoaW50KSBzZWNvbmRzICogMTAw\nMCk7DQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAg\nIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWVtb3J5VXNlKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7DQoNCiAgICAgICAgU3lzdGVtLm91dC5wcmlu\ndGxuKCJCYXNlbGluZSwgc3RhcnRpbmcgbWVtb3J5IGZvciBOIG9iamVjdHMg\nb2YgIiArDQogICAgICAgICAgICBOVU1fT0JKRUNUUyk7DQogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBrcG1mID0NCiAgICAgICAgICAg\nIChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkpIGdldEVtZigpOw0KICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBrcG0gPSAoT3BlbkpQQUVudGl0\neU1hbmFnZXIpDQogICAgICAgICAgICBrcG1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsNCg0KICAgICAgICBzdGFydFR4KGtwbSk7DQogICAgICAgIGludCBy\ndW5uaW5nSWQgPSBwZXJmb3JtQWRkc01vZGlmaWVzRGVsZXRlcyhrcG0sIE5V\nTV9PQkpFQ1RTLCAwKTsNCiAgICAgICAgZW5kVHgoa3BtKTsNCg0KICAgICAg\nICBTeXN0ZW0ub3V0LnByaW50bG4oIkJhc2VsaW5lLCBzdGFydGluZyBtZW1v\ncnkgIik7DQogICAgICAgIHJlcG9ydE1lbW9yeSgpOw0KDQogICAgICAgIFRy\nYW5zYWN0aW9uTGlzdGVuZXIgbCA9IG5ldyBBYnN0cmFjdFRyYW5zYWN0aW9u\nTGlzdGVuZXIoKSB7DQogICAgICAgICAgICBwdWJsaWMgdm9pZCBhZnRlckNv\nbW1pdChUcmFuc2FjdGlvbkV2ZW50IGV2KSB7DQogICAgICAgICAgICAgICAg\nU3lzdGVtLm91dC5wcmludGxuKA0KICAgICAgICAgICAgICAgICAgICAiTXkg\nTGlzdGVuZXIgaW4gYWZ0ZXJDb21taXQiKTsNCiAgICAgICAgICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oDQogICAgICAgICAgICAgICAgICAgICJOdW0g\nb2JqZWN0cyBpbiB0cmFuc2FjdGlvbiAiDQogICAgICAgICAgICAgICAgICAg\nICAgICArIGV2LmdldFRyYW5zYWN0aW9uYWxPYmplY3RzKCkuc2l6ZSgpKTsN\nCg0KICAgICAgICAgICAgICAgIC8vIHNlbmQgb3V0IGFuIGVtYWlsIGNvbmZp\ncm1pbmcgdGhhdCB0aGUNCiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlv\nbiB3YXMgYSBzdWNjZXNzDQogICAgICAgICAgICB9DQogICAgICAgIH07DQoN\nCiAgICAgICAgLy8ga3BtLnJlZ2lzdGVyTGlzdGVuZXIgKGwpOw0KDQogICAg\nICAgIC8vIGpwcm9iZSwganByb2ZpbGVyLg0KICAgICAgICAvLyBwcmVmZXIg\ndHJlZXZpZXcNCg0KICAgICAgICAvLyBSdW4gYSB0cmFuc2FjdGlvbiBmb3Ig\nYSB3aGlsdyBhbmQgcmVwb3J0IG1lbW9yeQ0KICAgICAgICBzdGFydFR4KGtw\nbSk7DQogICAgICAgIGludCBvYmpDb3VudCA9IDA7DQogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgTlVNX0ZMVVNIRVM7IGkrKykgew0KICAgICAgICAg\nICAgU3lzdGVtLm91dC5wcmludGxuKCk7DQogICAgICAgICAgICBTeXN0ZW0u\nb3V0LnByaW50bG4oIkl0ZXJhdGlvbiAjIiArIGkgKyAiIGNyZWF0ZWQgIiAr\nDQogICAgICAgICAgICAgICAgb2JqQ291bnQpOw0KICAgICAgICAgICAgcmVw\nb3J0TWVtb3J5KCk7DQogICAgICAgICAgICAvL2twbS5zZXRMYXJnZVRyYW5z\nYWN0aW9uKHRydWUpOw0KICAgICAgICAgICAga3BtLnNldFRyYWNrQ2hhbmdl\nc0J5VHlwZSh0cnVlKTsNCiAgICAgICAgICAgIHJ1bm5pbmdJZCA9IHBlcmZv\ncm1BZGRzTW9kaWZpZXNEZWxldGVzKGtwbSwgTlVNX09CSkVDVFMsIHJ1bm5p\nbmdJZCk7DQogICAgICAgICAgICBvYmpDb3VudCArPSBOVU1fT0JKRUNUUzsN\nCiAgICAgICAgICAgIGtwbS5mbHVzaCgpOw0KICAgICAgICAgICAgZ3JhYkFs\nbE1lbW9yeSgpOw0KICAgICAgICAgICAgLy8gICAgcGF1c2UoMzApOw0KICAg\nICAgICB9DQoNCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJDcmVhdGVk\nIG9iamVjdHMsIGFib3V0IHRvIGNvbW1pdCAoKSIpOw0KICAgICAgICBwYXVz\nZSg5MCk7DQogICAgICAgIGVuZFR4KGtwbSk7DQogICAgICAgIHBhdXNlKDEp\nOw0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIk5vdyBjb21taXQgKCki\nKTsNCiAgICAgICAgcmVwb3J0TWVtb3J5KCk7DQogICAgICAgIHBhdXNlKDMz\nKTsNCiAgICB9DQoNCiAgICBwcm90ZWN0ZWQgdm9pZCBncmFiQWxsTWVtb3J5\nKCkgew0KICAgICAgICAvLyBleGhhdXN0IGFsbCBtZW1vcnkgc28gdGhhdCBH\nQyBpcyBydW4uDQogICAgICAgIGludCBzaXplID0gNDA5NjsNCiAgICAgICAg\nYm9vbGVhbiBncmFiID0gdHJ1ZTsNCiAgICAgICAgaW50W10gZ2xvYjsNCiAg\nICAgICAgd2hpbGUgKGdyYWIpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAg\nICAgICAgICAgICAgZ2xvYiA9IG5ldyBpbnRbc2l6ZV07DQogICAgICAgICAg\nICAgICAgc2l6ZSAqPSAyOw0KICAgICAgICAgICAgfSBjYXRjaCAoT3V0T2ZN\nZW1vcnlFcnJvciBlKSB7DQogICAgICAgICAgICAgICAgU3lzdGVtLm91dC5w\ncmludGxuKCJNZW0gZ3JhYmJlZCAiICsgc2l6ZSk7DQogICAgICAgICAgICAg\nICAgZ3JhYiA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGdsb2IgPSBudWxs\nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGdsb2IgPSBu\ndWxsOw0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBpbnQgcGVyZm9ybUFkZHNN\nb2RpZmllc0RlbGV0ZXMoT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0sDQogICAg\nICAgIGludCBudW1PYmplY3RzLCBpbnQgcnVubmluZ0lkKSB7DQogICAgICAg\nIC8vIHBtIHNob3VsZCBiZSBhY3RpdmUuIEZ1bmN0aW9uIGRvZXMgbm90IHBl\ncmZvcm0gY29tbWl0Lg0KDQogICAgICAgIC8vIFBlcmZvcm0gYSBzZXJpZXMg\nb2YgdHJhbnNhY3Rpb25zIHRoYXQgd2lsbCB0cmlnZ2VyIGFkZHMsDQogICAg\nICAgIC8vIGRlbGV0ZXMsIGFuZCB1ZHBhdGVzDQoNCiAgICAgICAgLy8gY3Jl\nYXRlIG9iamVjdHMNCiAgICAgICAgUnVudGltZVRlc3QxW10gcGVyc2lzdGFi\nbGVzID0gbmV3IFJ1bnRpbWVUZXN0MVtudW1PYmplY3RzXTsNCiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBwZXJzaXN0YWJsZXMubGVuZ3RoOyBpKysp\nIHsNCiAgICAgICAgICAgIHBlcnNpc3RhYmxlc1tpXSA9IG5ldyBSdW50aW1l\nVGVzdDEoImZvbyAjIiArIGksIHJ1bm5pbmdJZCArIGkpOw0KICAgICAgICB9\nDQogICAgICAgIHJ1bm5pbmdJZCArPSBwZXJzaXN0YWJsZXMubGVuZ3RoOw0K\nDQogICAgICAgIC8vIGFkZCB0aGVtDQogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgcGVyc2lzdGFibGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAg\nICBwbS5wZXJzaXN0KHBlcnNpc3RhYmxlc1tpXSk7DQogICAgICAgIH0NCg0K\nICAgICAgICAvLyBtb2RpZnkgdGhlbQ0KICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IHBlcnNpc3RhYmxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAg\nICAgcGVyc2lzdGFibGVzW2ldLnNldEludEZpZWxkMShpICsgMSk7DQogICAg\nICAgIH0NCg0KLyoNCgkJLy8gZGVsZXRlIHRoZW0NCgkJZm9yIChpbnQgaSA9\nIDA7IGkgPCBwZXJzaXN0YWJsZXMubGVuZ3RoOyBpKyspDQoJCXsNCgkJCXBt\nLmRlbGV0ZVBlcnNpc3RlbnQgKHBlcnNpc3RhYmxlcyBbaV0pOw0KCQl9DQoq\nLw0KICAgICAgICByZXR1cm4gcnVubmluZ0lkICsgMTsNCiAgICB9DQoNCiAg\nICBzdGF0aWMgaW50IF9mZXRjaEdyb3VwU2VyaWFsID0gMDsNCg0KICAgIHBy\nb3RlY3RlZCBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkgY3JlYXRlRGlz\ndGluY3RGYWN0b3J5KA0KICAgICAgICBDbGFzcyBwcm92aWRlckNsYXNzLCBT\ndHJpbmcgY2xhc3NQcm9wczEpIHsNCiAgICAgICAgTWFwIHByb3BzID0gbnVs\nbDsNCg0KICAgICAgICAvL0ZJWE1FIGp0aG9tYXMNCiAgICAgICAgLyoNCiAg\nICAgICAgaWYgKHByb3ZpZGVyQ2xhc3MgIT0gbnVsbCkgew0KICAgICAgICAg\nICAgcHJvcHMgPSBuZXcgU3RyaW5nW117DQogICAgICAgICAgICAgICAgIm9w\nZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCBDb25maWd1cmF0aW9ucy5n\nZXRQbHVnaW4oDQogICAgICAgICAgICAgICAgcHJvdmlkZXJDbGFzcy5nZXRO\nYW1lY2xhc3NQcm9wczEpLA0KICAgICAgICAgICAgICAgIC8vIHVzZSB0aGlz\nIHByb3BlcnR5IHRvIGRpZmZlcmVudGlhdGUgdGhlIGZhY3RvcnkNCiAgICAg\nICAgICAgICAgICAib3BlbmpwYS5GZXRjaEdyb3VwcyIsICJkaWZmZXJlbnRp\nYXRpbmdGZXRjaEdyb3VwIiArDQogICAgICAgICAgICAgICAgX2ZldGNoR3Jv\ndXBTZXJpYWwsDQogICAgICAgICAgICB9Ow0KICAgICAgICB9IGVsc2Ugew0K\nICAgICAgICAgICAgLy8gTm8gUkNQDQogICAgICAgICAgICBwcm9wcyA9IG5l\ndyBTdHJpbmdbXXsNCiAgICAgICAgICAgICAgICAvLyB1c2UgdGhpcyBwcm9w\nZXJ0eSB0byBkaWZmZXJlbnRpYXRlIHRoZSBmYWN0b3J5DQogICAgICAgICAg\nICAgICAgIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2bSIs\nDQogICAgICAgICAgICAgICAgIm9wZW5qcGEuRmV0Y2hHcm91cHMiLCAiZGlm\nZmVyZW50aWF0aW5nRmV0Y2hHcm91cCIgKw0KICAgICAgICAgICAgICAgIF9m\nZXRjaEdyb3VwU2VyaWFsLA0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0K\nICAgICAgICBfZmV0Y2hHcm91cFNlcmlhbCArPSAxOw0KICAgICAgICAgKi8N\nCg0KICAgICAgICByZXR1cm4gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9y\neSkgZ2V0RW1mKHByb3BzKTsNCiAgICB9DQp9DQo=\n","encoding":"base64"}

