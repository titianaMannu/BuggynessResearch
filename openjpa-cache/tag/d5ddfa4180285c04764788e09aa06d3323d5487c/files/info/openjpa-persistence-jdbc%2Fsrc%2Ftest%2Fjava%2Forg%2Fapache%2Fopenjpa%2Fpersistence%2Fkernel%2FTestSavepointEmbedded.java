{"sha":"34ec684e2412acc330e6f9ca393063c7b0ddde15","node_id":"MDQ6QmxvYjIwNjM2NDozNGVjNjg0ZTI0MTJhY2MzMzBlNmY5Y2EzOTMwNjNjN2IwZGRkZTE1","size":9576,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/34ec684e2412acc330e6f9ca393063c7b0ddde15","content":"LyoNCiAqIFRlc3RTYXZlcG9pbnRFbWJlZGRlZC5qYXZhDQogKg0KICogQ3Jl\nYXRlZCBvbiBPY3RvYmVyIDE2LCAyMDA2LCAxMDoyOSBBTQ0KICoNCiAqIFRv\nIGNoYW5nZSB0aGlzIHRlbXBsYXRlLCBjaG9vc2UgVG9vbHMgfCBUZW1wbGF0\nZSBNYW5hZ2VyDQogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVk\naXRvci4NCiAqLw0KDQovKg0KICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBT\nb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQ0KICogb3IgbW9y\nZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5P\nVElDRSBmaWxlDQogKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3Ig\nYWRkaXRpb25hbCBpbmZvcm1hdGlvbg0KICogcmVnYXJkaW5nIGNvcHlyaWdo\ndCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQ0KICog\ndG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAg\nKHRoZQ0KICogIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmls\nZSBleGNlcHQgaW4gY29tcGxpYW5jZQ0KICogd2l0aCB0aGUgTGljZW5zZS4g\nIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoN\nCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIu\nMA0KICoNCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBv\nciBhZ3JlZWQgdG8gaW4gd3JpdGluZywNCiAqIHNvZnR3YXJlIGRpc3RyaWJ1\ndGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuDQog\nKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElU\nSU9OUyBPRiBBTlkNCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxp\nZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQ0KICogc3BlY2lmaWMgbGFu\nZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucw0K\nICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIA0KICovDQpwYWNrYWdlIG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWw7DQoNCmltcG9ydCBq\nYXZhLnV0aWwuUHJvcGVydGllczsNCg0KDQoNCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkVtYmVk\nZGVkT3duZXJQQzsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkVtYmVkZGVkUEM7DQoNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0\neU1hbmFnZXI7DQoNCnB1YmxpYyBjbGFzcyBUZXN0U2F2ZXBvaW50RW1iZWRk\nZWQgZXh0ZW5kcyBCYXNlS2VybmVsVGVzdCB7DQoNCiAgICBwcml2YXRlIGlu\ndCBpZCA9IDEwMDAwOw0KDQogICAgLyoqDQogICAgICogQ3JlYXRlcyBhIG5l\ndyBpbnN0YW5jZSBvZiBUZXN0U2F2ZXBvaW50RW1iZWRkZWQNCiAgICAgKi8N\nCiAgICBwdWJsaWMgVGVzdFNhdmVwb2ludEVtYmVkZGVkKFN0cmluZyBuYW1l\nKSB7DQogICAgICAgIHN1cGVyKG5hbWUpOw0KICAgIH0NCg0KICAgIHByb3Rl\nY3RlZCBTdHJpbmcgZ2V0U2F2ZXBvaW50UGx1Z2luKCkgew0KICAgICAgICBy\nZXR1cm4gImluLW1lbShQcmVGbHVzaD1mYWxzZSkiOw0KICAgIH0NCg0KICAg\nIHByb3RlY3RlZCBib29sZWFuIGV4cGVjdE5ld0VtYmVkZGVkRmFpbHVyZSgp\nIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgcHVibGlj\nIFByb3BlcnRpZXMgZ2V0UHJvcGVydGllcyhTdHJpbmdbXSBwcm9wcykgew0K\nICAgICAgICBQcm9wZXJ0aWVzIHByb3BlcnRpZXMgPSBzdXBlci5nZXRQcm9w\nZXJ0aWVzKHByb3BzKTsNCiAgICAgICAgcHJvcGVydGllcy5wdXQoIm9wZW5q\ncGEuU2F2ZXBvaW50TWFuYWdlciIsIGdldFNhdmVwb2ludFBsdWdpbigpKTsN\nCiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXM7DQogICAgfQ0KDQogICAgcHVi\nbGljIHZvaWQgc2V0VXAoKSB7DQogICAgICAgIGRlbGV0ZUFsbChFbWJlZGRl\nZE93bmVyUEMuY2xhc3MpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgRW1iZWRk\nZWRPd25lclBDIG5ld0VtYmVkZGVkT3duZXJQQygpIHsNCiAgICAgICAgcmV0\ndXJuIG5ldyBFbWJlZGRlZE93bmVyUEMoaWQrKywgaWQrKyk7DQogICAgfQ0K\nDQogICAgcHVibGljIHZvaWQgdGVzdENsZWFyTmV3KCkNCiAgICAgICAgdGhy\nb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIGRvQ2xlYXJOZXdUZXN0KHRydWUs\nIDAsIDApOw0KICAgICAgICBkb0NsZWFyTmV3VGVzdCh0cnVlLCAyLCAwKTsN\nCiAgICAgICAgZG9DbGVhck5ld1Rlc3QodHJ1ZSwgMCwgMik7DQogICAgICAg\nIGRvQ2xlYXJOZXdUZXN0KHRydWUsIDIsIDIpOw0KICAgICAgICBkb0NsZWFy\nTmV3VGVzdChmYWxzZSwgMCwgMCk7DQogICAgICAgIGRvQ2xlYXJOZXdUZXN0\nKGZhbHNlLCAyLCAwKTsNCiAgICAgICAgZG9DbGVhck5ld1Rlc3QoZmFsc2Us\nIDAsIDIpOw0KICAgICAgICBkb0NsZWFyTmV3VGVzdChmYWxzZSwgMiwgMik7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgZG9DbGVhck5ld1Rlc3QoYm9v\nbGVhbiBuZXdQQywgaW50IGJlZm9yZSwgaW50IGFmdGVyKQ0KICAgICAgICB0\naHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgZGVsZXRlQWxsKEVtYmVkZGVk\nT3duZXJQQy5jbGFzcyk7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAg\nIEVtYmVkZGVkT3duZXJQQyBwYyA9IG5ld0VtYmVkZGVkT3duZXJQQygpOw0K\nICAgICAgICBwbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgcGMuc2V0U3RyaW5n\nRmllbGQoIm9yaWciKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9i\namVjdElkKHBjKTsNCiAgICAgICAgaWYgKCFuZXdQQykgew0KICAgICAgICAg\nICAgZW5kVHgocG0pOw0KICAgICAgICAgICAgZW5kRW0ocG0pOw0KICAgICAg\nICAgICAgcG0gPSBnZXRQTSgpOw0KICAgICAgICAgICAgc3RhcnRUeChwbSk7\nDQogICAgICAgICAgICBwYyA9IChFbWJlZGRlZE93bmVyUEMpIHBtLmZpbmQo\nRW1iZWRkZWRPd25lclBDLmNsYXNzLCBvaWQpOw0KICAgICAgICB9DQogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmVmb3JlOyBpKyspIHsNCiAgICAg\nICAgICAgIHBjLnNldFN0cmluZ0ZpZWxkKCJiIiArIGkpOw0KICAgICAgICAg\nICAgcG0uc2V0U2F2ZXBvaW50KCJiIiArIGkpOw0KICAgICAgICB9DQoNCiAg\nICAgICAgcGMuc2V0U3RyaW5nRmllbGQoInRlc3QiKTsNCiAgICAgICAgcG0u\nc2V0U2F2ZXBvaW50KCJ0ZXN0Iik7DQogICAgICAgIEVtYmVkZGVkUEMgZW1i\nZWQgPSBuZXcgRW1iZWRkZWRQQygpOw0KICAgICAgICBlbWJlZC5zZXRJbnRG\naWVsZCg5OSk7DQogICAgICAgIHBjLnNldEVtYmVkZGVkKGVtYmVkKTsNCg0K\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGFmdGVyOyBpKyspIHsNCiAg\nICAgICAgICAgIHBjLnNldFN0cmluZ0ZpZWxkKCJhIiArIGkpOw0KICAgICAg\nICAgICAgcG0uc2V0U2F2ZXBvaW50KCJhIiArIGkpOw0KICAgICAgICB9DQoN\nCiAgICAgICAgcG0ucm9sbGJhY2tUb1NhdmVwb2ludCgidGVzdCIpOw0KICAg\nICAgICBpZiAobmV3UEMpDQogICAgICAgICAgICBhc3NlcnROdWxsKHBjLmdl\ndEVtYmVkZGVkKCkpOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoMCwgcGMuZ2V0RW1iZWRkZWQoKS5nZXRJbnRGaWVsZCgpKTsN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0ZXN0IiwgcGMuZ2V0U3RyaW5nRmll\nbGQoKSk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgZW5kRW0ocG0p\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RFbWJlZGRlZFJlYXNz\naWduKCkgew0KICAgICAgICBkb0VtYmVkZGVkUmVhc3NpZ25UZXN0KHRydWUs\nIDAsIDApOw0KICAgICAgICBkb0VtYmVkZGVkUmVhc3NpZ25UZXN0KHRydWUs\nIDIsIDApOw0KICAgICAgICBkb0VtYmVkZGVkUmVhc3NpZ25UZXN0KHRydWUs\nIDAsIDIpOw0KICAgICAgICBkb0VtYmVkZGVkUmVhc3NpZ25UZXN0KHRydWUs\nIDIsIDIpOw0KICAgICAgICBkb0VtYmVkZGVkUmVhc3NpZ25UZXN0KGZhbHNl\nLCAwLCAwKTsNCiAgICAgICAgZG9FbWJlZGRlZFJlYXNzaWduVGVzdChmYWxz\nZSwgMiwgMCk7DQogICAgICAgIGRvRW1iZWRkZWRSZWFzc2lnblRlc3QoZmFs\nc2UsIDAsIDIpOw0KICAgICAgICBkb0VtYmVkZGVkUmVhc3NpZ25UZXN0KGZh\nbHNlLCAyLCAyKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBkb0VtYmVk\nZGVkUmVhc3NpZ25UZXN0KGJvb2xlYW4gbmV3UEMsIGludCBiZWZvcmUsIGlu\ndCBhZnRlcikgew0KICAgICAgICBkZWxldGVBbGwoRW1iZWRkZWRPd25lclBD\nLmNsYXNzKTsNCiAgICAgICAgZGVsZXRlQWxsKEVtYmVkZGVkUEMuY2xhc3Mp\nOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0o\nKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIEVtYmVkZGVkT3du\nZXJQQyBwYyA9IG5ld0VtYmVkZGVkT3duZXJQQygpOw0KICAgICAgICBFbWJl\nZGRlZFBDIGVtYmVkID0gbmV3IEVtYmVkZGVkUEMoKTsNCiAgICAgICAgZW1i\nZWQuc2V0SW50RmllbGQxKDEwMDApOw0KICAgICAgICBwYy5zZXRTdHJpbmdG\naWVsZCgib3JpZyIpOw0KICAgICAgICBwbS5wZXJzaXN0KHBjKTsNCiAgICAg\nICAgcGMuc2V0RW1iZWRkZWQoZW1iZWQpOw0KDQogICAgICAgIE9iamVjdCBv\naWQgPSBwbS5nZXRPYmplY3RJZChwYyk7DQogICAgICAgIGlmICghbmV3UEMp\nIHsNCiAgICAgICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgICAgIGVuZEVt\nKHBtKTsNCiAgICAgICAgICAgIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgICAg\nIHN0YXJ0VHgocG0pOw0KICAgICAgICAgICAgcGMgPSAoRW1iZWRkZWRPd25l\nclBDKSBwbS5maW5kKEVtYmVkZGVkT3duZXJQQy5jbGFzcywgb2lkKTsNCiAg\nICAgICAgfQ0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJlZm9yZTsg\naSsrKSB7DQogICAgICAgICAgICBwYy5zZXRTdHJpbmdGaWVsZCgiYiIgKyBp\nKTsNCiAgICAgICAgICAgIHBtLnNldFNhdmVwb2ludCgiYiIgKyBpKTsNCiAg\nICAgICAgfQ0KDQogICAgICAgIHBtLnNldFNhdmVwb2ludCgidGVzdCIpOw0K\nICAgICAgICBlbWJlZCA9IG5ldyBFbWJlZGRlZFBDKCk7DQogICAgICAgIGVt\nYmVkLnNldEludEZpZWxkMSgyMDAwKTsNCiAgICAgICAgcGMuc2V0RW1iZWRk\nZWQoZW1iZWQpOw0KDQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYWZ0\nZXI7IGkrKykgew0KICAgICAgICAgICAgcGMuc2V0U3RyaW5nRmllbGQoImIi\nICsgaSk7DQogICAgICAgICAgICBwbS5zZXRTYXZlcG9pbnQoImEiICsgaSk7\nDQogICAgICAgIH0NCg0KICAgICAgICBwbS5yb2xsYmFja1RvU2F2ZXBvaW50\nKCJ0ZXN0Iik7DQogICAgICAgIGFzc2VydE5vdE51bGwocGMuZ2V0RW1iZWRk\nZWQoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygxMDAwLCBwYy5nZXRFbWJl\nZGRlZCgpLmdldEludEZpZWxkMSgpKTsNCiAgICAgICAgZW5kVHgocG0pOw0K\nICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\ndGVzdEVtYmVkZGVkQ2hhbmdlKCkNCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlv\nbiB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBkb0VtYmVkZGVkQ2hh\nbmdlVGVzdCh0cnVlLCAwLCAwKTsNCiAgICAgICAgICAgIGRvRW1iZWRkZWRD\naGFuZ2VUZXN0KHRydWUsIDIsIDApOw0KICAgICAgICAgICAgZG9FbWJlZGRl\nZENoYW5nZVRlc3QodHJ1ZSwgMCwgMik7DQogICAgICAgICAgICBkb0VtYmVk\nZGVkQ2hhbmdlVGVzdCh0cnVlLCAyLCAyKTsNCiAgICAgICAgfSBjYXRjaCAo\nVGhyb3dhYmxlIHQpIHsNCiAgICAgICAgICAgIGlmIChleHBlY3ROZXdFbWJl\nZGRlZEZhaWx1cmUoKSkNCiAgICAgICAgICAgICAgICBidWcoMTE0MSwgdCwg\nImNoYW5nZXMgdG8gbmV3IGVtYmVkZGVkIG5vdCBkZXRlY3RlZCIpOw0KICAg\nICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRocm93IChFeGNlcHRp\nb24pIHQ7DQogICAgICAgIH0NCiAgICAgICAgZG9FbWJlZGRlZENoYW5nZVRl\nc3QoZmFsc2UsIDAsIDApOw0KICAgICAgICBkb0VtYmVkZGVkQ2hhbmdlVGVz\ndChmYWxzZSwgMiwgMCk7DQogICAgICAgIGRvRW1iZWRkZWRDaGFuZ2VUZXN0\nKGZhbHNlLCAwLCAyKTsNCiAgICAgICAgZG9FbWJlZGRlZENoYW5nZVRlc3Qo\nZmFsc2UsIDIsIDIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGRvRW1i\nZWRkZWRDaGFuZ2VUZXN0KGJvb2xlYW4gbmV3UEMsIGludCBiZWZvcmUsIGlu\ndCBhZnRlcikgew0KICAgICAgICBkZWxldGVBbGwoRW1iZWRkZWRPd25lclBD\nLmNsYXNzKTsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBn\nZXRQTSgpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgRW1iZWRk\nZWRPd25lclBDIHBjID0gbmV3RW1iZWRkZWRPd25lclBDKCk7DQogICAgICAg\nIEVtYmVkZGVkUEMgZW1iZWQgPSBuZXcgRW1iZWRkZWRQQygpOw0KICAgICAg\nICBlbWJlZC5zZXRJbnRGaWVsZDEoMTAwMCk7DQogICAgICAgIHBjLnNldFN0\ncmluZ0ZpZWxkKCJvcmlnIik7DQogICAgICAgIHBtLnBlcnNpc3QocGMpOw0K\nICAgICAgICBwYy5zZXRFbWJlZGRlZChlbWJlZCk7DQoNCiAgICAgICAgT2Jq\nZWN0IG9pZCA9IHBtLmdldE9iamVjdElkKHBjKTsNCiAgICAgICAgaWYgKCFu\nZXdQQykgew0KICAgICAgICAgICAgZW5kVHgocG0pOw0KICAgICAgICAgICAg\nZW5kRW0ocG0pOw0KICAgICAgICAgICAgcG0gPSBnZXRQTSgpOw0KICAgICAg\nICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgICAgICBwYyA9IChFbWJlZGRl\nZE93bmVyUEMpIHBtLmZpbmQoRW1iZWRkZWRPd25lclBDLmNsYXNzLCBvaWQp\nOw0KICAgICAgICB9DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmVm\nb3JlOyBpKyspIHsNCiAgICAgICAgICAgIHBjLnNldFN0cmluZ0ZpZWxkKCJi\nIiArIGkpOw0KICAgICAgICAgICAgcG0uc2V0U2F2ZXBvaW50KCJiIiArIGkp\nOw0KICAgICAgICB9DQoNCiAgICAgICAgcG0uc2V0U2F2ZXBvaW50KCJ0ZXN0\nIik7DQogICAgICAgIHBjLmdldEVtYmVkZGVkKCkuc2V0SW50RmllbGQxKDIw\nMDApOw0KDQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYWZ0ZXI7IGkr\nKykgew0KICAgICAgICAgICAgcGMuc2V0U3RyaW5nRmllbGQoImEiICsgaSk7\nDQogICAgICAgICAgICBwbS5zZXRTYXZlcG9pbnQoImEiICsgaSk7DQogICAg\nICAgIH0NCg0KICAgICAgICBwbS5yb2xsYmFja1RvU2F2ZXBvaW50KCJ0ZXN0\nIik7DQogICAgICAgIGFzc2VydE5vdE51bGwocGMuZ2V0RW1iZWRkZWQoKSk7\nDQogICAgICAgIGFzc2VydEVxdWFscygxMDAwLCBwYy5nZXRFbWJlZGRlZCgp\nLmdldEludEZpZWxkMSgpKTsNCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAg\nICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEVt\nYmVkZGVkQ2hhbmdlMigpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0K\nICAgICAgICB0cnkgew0KICAgICAgICAgICAgZG9FbWJlZGRlZENoYW5nZVRl\nc3QyKHRydWUsIDAsIDApOw0KICAgICAgICAgICAgZG9FbWJlZGRlZENoYW5n\nZVRlc3QyKHRydWUsIDIsIDApOw0KICAgICAgICAgICAgZG9FbWJlZGRlZENo\nYW5nZVRlc3QyKHRydWUsIDAsIDIpOw0KICAgICAgICAgICAgZG9FbWJlZGRl\nZENoYW5nZVRlc3QyKHRydWUsIDIsIDIpOw0KICAgICAgICB9IGNhdGNoIChU\naHJvd2FibGUgdCkgew0KICAgICAgICAgICAgaWYgKGV4cGVjdE5ld0VtYmVk\nZGVkRmFpbHVyZSgpKQ0KICAgICAgICAgICAgICAgIGJ1ZygxMTQxLCB0LCAi\nY2hhbmdlcyB0byBuZXcgZW1iZWRkZWQgbm90IGRldGVjdGVkIik7DQogICAg\nICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhyb3cgKEV4Y2VwdGlv\nbikgdDsNCiAgICAgICAgfQ0KICAgICAgICBkb0VtYmVkZGVkQ2hhbmdlVGVz\ndDIoZmFsc2UsIDAsIDApOw0KICAgICAgICBkb0VtYmVkZGVkQ2hhbmdlVGVz\ndDIoZmFsc2UsIDIsIDApOw0KICAgICAgICBkb0VtYmVkZGVkQ2hhbmdlVGVz\ndDIoZmFsc2UsIDAsIDIpOw0KICAgICAgICBkb0VtYmVkZGVkQ2hhbmdlVGVz\ndDIoZmFsc2UsIDIsIDIpOw0KICAgIH0NCg0KICAgIC8vIHZhcmlhdGlvbiB3\naXRoIGNoYW5naW5nIGVtYmVkZGUgZmllbGRzIHZzIG93bmVyIGZpZWxkDQog\nICAgcHVibGljIHZvaWQgZG9FbWJlZGRlZENoYW5nZVRlc3QyKGJvb2xlYW4g\nbmV3UEMsIGludCBiZWZvcmUsIGludCBhZnRlcikgew0KICAgICAgICBkZWxl\ndGVBbGwoRW1iZWRkZWRPd25lclBDLmNsYXNzKTsNCiAgICAgICAgZGVsZXRl\nQWxsKEVtYmVkZGVkUEMuY2xhc3MpOw0KICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9IGdldFBNKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0K\nICAgICAgICBFbWJlZGRlZE93bmVyUEMgcGMgPSBuZXdFbWJlZGRlZE93bmVy\nUEMoKTsNCiAgICAgICAgRW1iZWRkZWRQQyBlbWJlZCA9IG5ldyBFbWJlZGRl\nZFBDKCk7DQogICAgICAgIGVtYmVkLnNldEludEZpZWxkMSgxMDAwKTsNCiAg\nICAgICAgcGMuc2V0U3RyaW5nRmllbGQoIm9yaWciKTsNCiAgICAgICAgcG0u\ncGVyc2lzdChwYyk7DQogICAgICAgIHBjLnNldEVtYmVkZGVkKGVtYmVkKTsN\nCg0KICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMpOw0K\nICAgICAgICBpZiAoIW5ld1BDKSB7DQogICAgICAgICAgICBlbmRUeChwbSk7\nDQogICAgICAgICAgICBlbmRFbShwbSk7DQogICAgICAgICAgICBwbSA9IGdl\ndFBNKCk7DQogICAgICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgICAg\nIHBjID0gKEVtYmVkZGVkT3duZXJQQykgcG0uZmluZChFbWJlZGRlZE93bmVy\nUEMuY2xhc3MsIG9pZCk7DQogICAgICAgIH0NCiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBiZWZvcmU7IGkrKykgew0KICAgICAgICAgICAgcGMuZ2V0\nRW1iZWRkZWQoKS5zZXRJbnRGaWVsZDEoaSk7DQogICAgICAgICAgICBwbS5z\nZXRTYXZlcG9pbnQoImIiICsgaSk7DQogICAgICAgIH0NCg0KICAgICAgICBw\nbS5zZXRTYXZlcG9pbnQoInRlc3QiKTsNCiAgICAgICAgcGMuZ2V0RW1iZWRk\nZWQoKS5zZXRJbnRGaWVsZDEoMjAwMCk7DQoNCiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBhZnRlcjsgaSsrKSB7DQogICAgICAgICAgICBwYy5nZXRF\nbWJlZGRlZCgpLnNldEludEZpZWxkMShpICogLTEpOw0KICAgICAgICAgICAg\ncG0uc2V0U2F2ZXBvaW50KCJhIiArIGkpOw0KICAgICAgICB9DQoNCiAgICAg\nICAgcG0ucm9sbGJhY2tUb1NhdmVwb2ludCgidGVzdCIpOw0KICAgICAgICBh\nc3NlcnROb3ROdWxsKHBjLmdldEVtYmVkZGVkKCkpOw0KICAgICAgICBpZiAo\nYmVmb3JlID09IDApDQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMTAwMCwg\ncGMuZ2V0RW1iZWRkZWQoKS5nZXRJbnRGaWVsZDEoKSk7DQogICAgICAgIGVs\nc2UNCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhiZWZvcmUgLSAxLCBwYy5n\nZXRFbWJlZGRlZCgpLmdldEludEZpZWxkMSgpKTsNCiAgICAgICAgZW5kVHgo\ncG0pOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

