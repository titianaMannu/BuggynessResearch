{"sha":"e8d0bd6d42021d87520d4ce522569c945162f676","node_id":"MDQ6QmxvYjIwNjM2NDplOGQwYmQ2ZDQyMDIxZDg3NTIwZDRjZTUyMjU2OWM5NDUxNjJmNjc2","size":17058,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e8d0bd6d42021d87520d4ce522569c945162f676","content":"LyoNCiAqIFRlc3RTYXZlcG9pbnRzLmphdmENCiAqDQogKiBDcmVhdGVkIG9u\nIE9jdG9iZXIgMTYsIDIwMDYsIDExOjE2IEFNDQogKg0KICogVG8gY2hhbmdl\nIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1hbmFn\nZXINCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9yLg0K\nICovDQovKg0KICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBG\nb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQ0KICogb3IgbW9yZSBjb250cmli\ndXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxl\nDQogKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25h\nbCBpbmZvcm1hdGlvbg0KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNo\naXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQ0KICogdG8geW91IHVu\nZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQ0KICog\nIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQg\naW4gY29tcGxpYW5jZQ0KICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkg\nb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAqIGh0dHA6\nLy93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICoNCiAq\nIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQg\ndG8gaW4gd3JpdGluZywNCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVy\nIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuDQogKiAiQVMgSVMi\nIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBB\nTlkNCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUg\ndGhlIExpY2Vuc2UgZm9yIHRoZQ0KICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292\nZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucw0KICogdW5kZXIg\ndGhlIExpY2Vuc2UuICAgIA0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWw7DQoNCmltcG9ydCBqYXZhLnV0aWwu\nSXRlcmF0b3I7DQppbXBvcnQgamF2YS51dGlsLlByb3BlcnRpZXM7DQoNCg0K\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5l\nbC5jb21tb24uYXBwcy5Nb2RSdW50aW1lVGVzdDE7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmtlcm5lbC5jb21tb24uYXBwcy5S\ndW50aW1lVGVzdDQ7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmtlcm5lbC5jb21tb24uYXBwcy5SdW50aW1lVGVzdDU7DQoNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlBDU3RhdGU7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkpQQUZhY2FkZUhl\nbHBlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nT3BlbkpQQUVudGl0eU1hbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsNCg0KcHVibGlj\nIGNsYXNzIFRlc3RTYXZlcG9pbnRzIGV4dGVuZHMgQmFzZUtlcm5lbFRlc3Qg\new0KDQogICAgLyoqDQogICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBv\nZiBUZXN0U2F2ZXBvaW50cw0KICAgICAqLw0KICAgIHB1YmxpYyBUZXN0U2F2\nZXBvaW50cyhTdHJpbmcgbmFtZSkgew0KICAgICAgICBzdXBlcihuYW1lKTsN\nCiAgICB9DQoNCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFNhdmVwb2ludFBs\ndWdpbigpIHsNCiAgICAgICAgcmV0dXJuICJpbi1tZW0iOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyBQcm9wZXJ0aWVzIGdldFByb3BlcnRpZXMoU3RyaW5nW10g\ncHJvcHMpIHsNCiAgICAgICAgUHJvcGVydGllcyBwcm9wZXJ0aWVzID0gc3Vw\nZXIuZ2V0UHJvcGVydGllcyhwcm9wcyk7DQogICAgICAgIHByb3BlcnRpZXMu\ncHV0KCJvcGVuanBhLlNhdmVwb2ludE1hbmFnZXIiLCBnZXRTYXZlcG9pbnRQ\nbHVnaW4oKSk7DQogICAgICAgIHJldHVybiBwcm9wZXJ0aWVzOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgew0KICAgICAgICBkZWxldGVB\nbGwoTW9kUnVudGltZVRlc3QxLmNsYXNzKTsNCiAgICAgICAgZGVsZXRlQWxs\nKFJ1bnRpbWVUZXN0NC5jbGFzcyk7DQogICAgICAgIGRlbGV0ZUFsbChSdW50\naW1lVGVzdDUuY2xhc3MpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRl\nc3RTaW1wbGUoKSB7DQogICAgICAgIGRvU2ltcGxlVGVzdCh0cnVlLCAwLCAw\nKTsNCiAgICAgICAgZG9TaW1wbGVUZXN0KHRydWUsIDIsIDApOw0KICAgICAg\nICBkb1NpbXBsZVRlc3QodHJ1ZSwgMCwgMik7DQogICAgICAgIGRvU2ltcGxl\nVGVzdChmYWxzZSwgMCwgMCk7DQogICAgICAgIGRvU2ltcGxlVGVzdChmYWxz\nZSwgMiwgMCk7DQogICAgICAgIGRvU2ltcGxlVGVzdChmYWxzZSwgMCwgMik7\nDQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIGRvU2ltcGxlVGVzdChib29s\nZWFuIG5ld1BDLCBpbnQgYmVmb3JlLCBpbnQgYWZ0ZXIpIHsNCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBN\nb2RSdW50aW1lVGVzdDEgcGMgPSBuZXcgTW9kUnVudGltZVRlc3QxKCk7DQog\nICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBwYy5zZXRTdHJpbmdGaWVs\nZCgib3JpZyIpOw0KICAgICAgICBwYy5zZXRJbnRGaWVsZCgtMTEpOw0KICAg\nICAgICAvL0ZJWE1FIGp0aG9tYXMgLSBzZXREYXRlRmllbGQNCiAgICAgICAg\nLy9wYy5zZXREYXRlRmllbGQocmFuZG9tRGF0ZSgpKTsNCiAgICAgICAgcG0u\ncGVyc2lzdChwYyk7DQogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmpl\nY3RJZChwYyk7DQoNCiAgICAgICAgaWYgKCFuZXdQQykgew0KICAgICAgICAg\nICAgZW5kVHgocG0pOw0KICAgICAgICAgICAgcG0gPSBnZXRQTSgpOw0KICAg\nICAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgICAgICBwYyA9IChNb2RS\ndW50aW1lVGVzdDEpIHBtLmZpbmQoTW9kUnVudGltZVRlc3QxLmNsYXNzLCBv\naWQpOw0KICAgICAgICB9DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nYmVmb3JlOyBpKyspIHsNCiAgICAgICAgICAgIHBjLnNldFN0cmluZ0ZpZWxk\nKCJiZWZvcmUiICsgaSk7DQogICAgICAgICAgICBwYy5zZXRJbnRGaWVsZChp\nKTsNCiAgICAgICAgICAgIC8vRklYTUUganRob21hcyAtIHNldERhdGVGaWVs\nZA0KICAgICAgICAgICAgLy9wYy5zZXREYXRlRmllbGQocmFuZG9tRGF0ZSgp\nKTsNCiAgICAgICAgICAgIHBtLnNldFNhdmVwb2ludCgiYmVmb3JlIiArIGkp\nOw0KICAgICAgICB9DQoNCiAgICAgICAgcGMuc2V0U3RyaW5nRmllbGQoInZh\nbHVlIik7DQogICAgICAgIHBjLnNldEludEZpZWxkKDMzMyk7DQogICAgICAg\nIC8vRklYTUUganRob21hcyAtIHNldERhdGVGaWVsZA0KICAgICAgICAvL3Bj\nLnNldERhdGVGaWVsZChyYW5kb21EYXRlKCkpOw0KICAgICAgICAvL0RhdGUg\nZGF0ZSA9IChEYXRlKSBwYy5nZXREYXRlRmllbGQoKS5jbG9uZSgpOw0KICAg\nICAgICBwbS5zZXRTYXZlcG9pbnQoInRlc3QiKTsNCg0KICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGFmdGVyOyBpKyspIHsNCiAgICAgICAgICAgIHBj\nLnNldFN0cmluZ0ZpZWxkKCJhZnRlciIgKyBpKTsNCiAgICAgICAgICAgIHBj\nLnNldEludEZpZWxkKGkgKiAxMCk7DQogICAgICAgICAgICAvL0ZJWE1FIGp0\naG9tYXMgLSBzZXREYXRlRmllbGQNCiAgICAgICAgICAgIC8vcGMuc2V0RGF0\nZUZpZWxkKHJhbmRvbURhdGUoKSk7DQogICAgICAgICAgICBwbS5zZXRTYXZl\ncG9pbnQoImFmdGVyIiArIGkpOw0KICAgICAgICB9DQoNCiAgICAgICAgcG0u\ncm9sbGJhY2tUb1NhdmVwb2ludCgidGVzdCIpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoInZhbHVlIiwgcGMuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAg\nIGFzc2VydEVxdWFscygzMzMsIHBjLmdldEludEZpZWxkKCkpOw0KICAgICAg\nICAvL0ZJWE1FIGp0aG9tYXMgLSBzZXREYXRlRmllbGQNCiAgICAgICAgLy9h\nc3NlcnRFcXVhbHMoZGF0ZSwgcGMuZ2V0RGF0ZUZpZWxkKCkpOw0KICAgICAg\nICBlbmRUeChwbSk7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICBw\nbSA9IGdldFBNKCk7DQogICAgICAgIHBjID0gKE1vZFJ1bnRpbWVUZXN0MSkg\ncG0uZmluZChNb2RSdW50aW1lVGVzdDEuY2xhc3MsIG9pZCk7DQogICAgICAg\nIGFzc2VydEVxdWFscygidmFsdWUiLCBwYy5nZXRTdHJpbmdGaWVsZCgpKTsN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDMzMywgcGMuZ2V0SW50RmllbGQoKSk7\nDQogICAgICAgIC8vRklYTUUganRob21hcyAtIHNldERhdGVGaWVsZA0KICAg\nICAgICAvL2Fzc2VydEVxdWFscyhkYXRlLCBwYy5nZXREYXRlRmllbGQoKSk7\nDQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0Q2xlYW5PcmRlcmluZygpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBNb2RSdW50aW1lVGVz\ndDEgcGMgPSBuZXcgTW9kUnVudGltZVRlc3QxKCJvcmlnIiwgMSk7DQogICAg\nICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBwbS5wZXJzaXN0KHBjKTsNCiAg\nICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElkKHBjKTsNCiAgICAg\nICAgZW5kVHgocG0pOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAgICAgICAg\ncG0gPSBnZXRQTSgpOw0KICAgICAgICBwbS5zZXRPcHRpbWlzdGljKGZhbHNl\nKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIE1vZFJ1bnRpbWVU\nZXN0MSBwYzIgPSBuZXcgTW9kUnVudGltZVRlc3QxKCJmb28iLCAyKTsNCiAg\nICAgICAgcG0ucGVyc2lzdChwYzIpOw0KICAgICAgICBwbS5zZXRTYXZlcG9p\nbnQoInMxIik7DQogICAgICAgIHBjID0gKE1vZFJ1bnRpbWVUZXN0MSkgcG0u\nZmluZChNb2RSdW50aW1lVGVzdDEuY2xhc3MsIG9pZCk7DQogICAgICAgIGFz\nc2VydFRydWUocG0uaXNUcmFuc2FjdGlvbmFsKHBjKSk7DQogICAgICAgIHBt\nLnNldFNhdmVwb2ludCgiczIiKTsNCiAgICAgICAgcGMuc2V0U3RyaW5nRmll\nbGQoImJhciIpOw0KICAgICAgICBwbS5yb2xsYmFja1RvU2F2ZXBvaW50KCJz\nMiIpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoIm9yaWciLCBwYy5nZXRTdHJp\nbmdGaWVsZCgpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShwbS5pc1RyYW5zYWN0\naW9uYWwocGMpKTsNCg0KICAgICAgICByb2xsYmFja1R4KHBtKTsNCiAgICAg\nICAgZW5kRW0ocG0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RM\nYXN0U2F2ZXBvaW50KCkgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBwbSA9IGdldFBNKCk7DQogICAgICAgIE1vZFJ1bnRpbWVUZXN0MSBwYyA9\nIG5ldyBNb2RSdW50aW1lVGVzdDEoIm9yaWciLCAxKTsNCiAgICAgICAgc3Rh\ncnRUeChwbSk7DQogICAgICAgIHBtLnBlcnNpc3QocGMpOw0KICAgICAgICBP\nYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMpOw0KICAgICAgICBlbmRU\neChwbSk7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICBwbSA9IGdl\ndFBNKCk7DQogICAgICAgIHBtLnNldE9wdGltaXN0aWMoZmFsc2UpOw0KICAg\nICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgcGMgPSAoTW9kUnVudGltZVRl\nc3QxKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0MS5jbGFzcywgb2lkKTsNCiAg\nICAgICAgcGMuc2V0U3RyaW5nRmllbGQoInMxIik7DQogICAgICAgIHBtLnNl\ndFNhdmVwb2ludCgiczEiKTsNCiAgICAgICAgcGMuc2V0U3RyaW5nRmllbGQo\nInMyIik7DQogICAgICAgIHBtLnNldFNhdmVwb2ludCgiczIiKTsNCiAgICAg\nICAgcGMuc2V0U3RyaW5nRmllbGQoImRpZmYiKTsNCiAgICAgICAgcG0ucm9s\nbGJhY2tUb1NhdmVwb2ludCgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoInMy\nIiwgcGMuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAgIHBtLnJlbGVhc2VT\nYXZlcG9pbnQoKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHBtLnJv\nbGxiYWNrVG9TYXZlcG9pbnQoInMxIik7DQogICAgICAgICAgICBmYWlsKCJF\neGhhdXN0ZWQuIik7DQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nDQogICAgICAgIH0NCiAgICAgICAgcm9sbGJhY2tUeChwbSk7DQogICAgICAg\nIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0TmV3\nUm9sbGJhY2soKSB7DQogICAgICAgIGRvTmV3Um9sbGJhY2tUZXN0KGZhbHNl\nLCAwLCAwKTsNCiAgICAgICAgZG9OZXdSb2xsYmFja1Rlc3QoZmFsc2UsIDIs\nIDApOw0KICAgICAgICBkb05ld1JvbGxiYWNrVGVzdChmYWxzZSwgMCwgMik7\nDQogICAgICAgIGRvTmV3Um9sbGJhY2tUZXN0KHRydWUsIDAsIDApOw0KICAg\nICAgICBkb05ld1JvbGxiYWNrVGVzdCh0cnVlLCAyLCAwKTsNCiAgICAgICAg\nZG9OZXdSb2xsYmFja1Rlc3QodHJ1ZSwgMCwgMik7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgZG9OZXdSb2xsYmFja1Rlc3QoYm9vbGVhbiByZXN0b3Jl\nLCBpbnQgYmVmb3JlLCBpbnQgYWZ0ZXIpIHsNCiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBwbS5zZXRSZXRh\naW5TdGF0ZShyZXN0b3JlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQoNCiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBiZWZvcmU7IGkrKykgew0KICAg\nICAgICAgICAgcG0ucGVyc2lzdChuZXcgTW9kUnVudGltZVRlc3QxKCJzIiAr\nIGksIGkpKTsNCiAgICAgICAgICAgIC8vcG0uc2V0U2F2ZXBvaW50KCJiZWZv\ncmUiICsgaSk7DQogICAgICAgIH0NCiAgICAgICAgcG0uc2V0U2F2ZXBvaW50\nKCJ0ZXN0Iik7DQoNCiAgICAgICAgTW9kUnVudGltZVRlc3QxIHBjID0gbmV3\nIE1vZFJ1bnRpbWVUZXN0MSgpOw0KICAgICAgICBwYy5zZXRTdHJpbmdGaWVs\nZCgib3JpZyIpOw0KICAgICAgICBwbS5wZXJzaXN0KHBjKTsNCiAgICAgICAg\nT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElkKHBjKTsNCg0KICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IGFmdGVyOyBpKyspIHsNCiAgICAgICAgICAg\nIHBtLnBlcnNpc3QobmV3IE1vZFJ1bnRpbWVUZXN0MSgpKTsNCiAgICAgICAg\nICAgIHBtLnNldFNhdmVwb2ludCgiYWZ0ZXIiICsgaSk7DQogICAgICAgIH0N\nCg0KICAgICAgICBwbS5yb2xsYmFja1RvU2F2ZXBvaW50KCJ0ZXN0Iik7DQog\nICAgICAgIGFzc2VydEVxdWFscygib3JpZyIsIHBjLmdldFN0cmluZ0ZpZWxk\nKCkpOw0KICAgICAgICBhc3NlcnRGYWxzZShwbS5pc1BlcnNpc3RlbnQocGMp\nKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKGJlZm9yZSwgcG0uZ2V0VHJhbnNh\nY3Rpb25hbE9iamVjdHMoKS5zaXplKCkpOw0KICAgICAgICBlbmRUeChwbSk7\nDQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICBwbSA9IGdldFBNKCk7\nDQogICAgICAgIGFzc2VydE51bGwocG0uZmluZChNb2RSdW50aW1lVGVzdDEu\nY2xhc3MsIG9pZCkpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdE5ld1JlbGF0aW9uKCkgew0KICAgICAgICBk\nb05ld1JlbGF0aW9uVGVzdCh0cnVlLCAwLCAwKTsNCiAgICAgICAgZG9OZXdS\nZWxhdGlvblRlc3QodHJ1ZSwgMiwgMCk7DQogICAgICAgIGRvTmV3UmVsYXRp\nb25UZXN0KHRydWUsIDAsIDIpOw0KICAgICAgICBkb05ld1JlbGF0aW9uVGVz\ndChmYWxzZSwgMCwgMCk7DQogICAgICAgIGRvTmV3UmVsYXRpb25UZXN0KGZh\nbHNlLCAyLCAwKTsNCiAgICAgICAgZG9OZXdSZWxhdGlvblRlc3QoZmFsc2Us\nIDAsIDIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGRvTmV3UmVsYXRp\nb25UZXN0KGJvb2xlYW4gbnVsbFJlbCwgaW50IGJlZm9yZSwgaW50IGFmdGVy\nKSB7DQogICAgICAgIGRlbGV0ZUFsbChNb2RSdW50aW1lVGVzdDEuY2xhc3Mp\nOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0o\nKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIE1vZFJ1bnRpbWVU\nZXN0MSBwYyA9IG5ldyBNb2RSdW50aW1lVGVzdDEoKTsNCiAgICAgICAgcGMu\nc2V0U3RyaW5nRmllbGQoIm9yaWciKTsNCiAgICAgICAgaWYgKCFudWxsUmVs\nKQ0KICAgICAgICAgICAgcGMuc2V0U2VsZk9uZU9uZShuZXcgTW9kUnVudGlt\nZVRlc3QxKCJvbmUiLCAxKSk7DQogICAgICAgIHBtLnBlcnNpc3QocGMpOw0K\nICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMpOw0KICAg\nICAgICBlbmRUeChwbSk7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAg\nICBwbSA9IGdldFBNKCk7DQogICAgICAgIHBtLnNldFJldGFpblN0YXRlKHRy\ndWUpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgcGMgPSAoTW9k\nUnVudGltZVRlc3QxKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0MS5jbGFzcywg\nb2lkKTsNCg0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJlZm9yZTsg\naSsrKSB7DQogICAgICAgICAgICBwYy5zZXRTZWxmT25lT25lKG5ldyBNb2RS\ndW50aW1lVGVzdDEoImJlZm9yZSIgKyBpLCBpKSk7DQogICAgICAgICAgICBw\nbS5zZXRTYXZlcG9pbnQoImJlZm9yZSIgKyBpKTsNCiAgICAgICAgfQ0KDQog\nICAgICAgIHBtLnNldFNhdmVwb2ludCgidGVzdCIpOw0KICAgICAgICBwYy5z\nZXRTZWxmT25lT25lKG5ldyBNb2RSdW50aW1lVGVzdDEoIm5ldyIsIDIpKTsN\nCiAgICAgICAgTW9kUnVudGltZVRlc3QxIHBjMiA9IHBjLmdldFNlbGZPbmVP\nbmUoKTsNCg0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGFmdGVyOyBp\nKyspIHsNCiAgICAgICAgICAgIHBjLnNldFNlbGZPbmVPbmUobmV3IE1vZFJ1\nbnRpbWVUZXN0MSgpKTsNCiAgICAgICAgICAgIHBtLnNldFNhdmVwb2ludCgi\nYWZ0ZXIiICsgaSk7DQogICAgICAgIH0NCg0KICAgICAgICBwbS5yb2xsYmFj\na1RvU2F2ZXBvaW50KCJ0ZXN0Iik7DQogICAgICAgIGFzc2VydEVxdWFscygi\nb3JpZyIsIHBjLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICBhc3NlcnRG\nYWxzZShwbS5pc1BlcnNpc3RlbnQocGMyKSk7DQogICAgICAgIGlmIChiZWZv\ncmUgPiAwKQ0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJiZWZvcmUiICsg\nKGJlZm9yZSAtIDEpLA0KICAgICAgICAgICAgICAgIHBjLmdldFNlbGZPbmVP\nbmUoKS5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAgZWxzZSB7DQogICAg\nICAgICAgICBpZiAobnVsbFJlbCkNCiAgICAgICAgICAgICAgICBhc3NlcnRO\ndWxsKHBjLmdldFNlbGZPbmVPbmUoKSk7DQogICAgICAgICAgICBlbHNlDQog\nICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJvbmUiLCBwYy5nZXRTZWxm\nT25lT25lKCkuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAgIH0NCiAgICAg\nICAgZW5kVHgocG0pOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAgICAgICAg\ncG0gPSBnZXRQTSgpOw0KICAgICAgICBwYyA9IChNb2RSdW50aW1lVGVzdDEp\nIHBtLmZpbmQoTW9kUnVudGltZVRlc3QxLmNsYXNzLCBvaWQpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoIm9yaWciLCBwYy5nZXRTdHJpbmdGaWVsZCgpKTsN\nCiAgICAgICAgaWYgKGJlZm9yZSA+IDApDQogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoImJlZm9yZSIgKyAoYmVmb3JlIC0gMSksDQogICAgICAgICAgICAg\nICAgcGMuZ2V0U2VsZk9uZU9uZSgpLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAg\nICAgICBlbHNlIHsNCiAgICAgICAgICAgIGlmIChudWxsUmVsKQ0KICAgICAg\nICAgICAgICAgIGFzc2VydE51bGwocGMuZ2V0U2VsZk9uZU9uZSgpKTsNCiAg\nICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nIm9uZSIsIHBjLmdldFNlbGZPbmVPbmUoKS5nZXRTdHJpbmdGaWVsZCgpKTsN\nCiAgICAgICAgfQ0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgdGVzdE51bGxSZWxhdGlvbigpIHsNCiAgICAgICAgZG9O\ndWxsUmVsYXRpb25UZXN0KHRydWUsIDAsIDApOw0KICAgICAgICBkb051bGxS\nZWxhdGlvblRlc3QodHJ1ZSwgMiwgMCk7DQogICAgICAgIGRvTnVsbFJlbGF0\naW9uVGVzdCh0cnVlLCAwLCAyKTsNCiAgICAgICAgZG9OdWxsUmVsYXRpb25U\nZXN0KGZhbHNlLCAwLCAwKTsNCiAgICAgICAgZG9OdWxsUmVsYXRpb25UZXN0\nKGZhbHNlLCAyLCAwKTsNCiAgICAgICAgZG9OdWxsUmVsYXRpb25UZXN0KGZh\nbHNlLCAwLCAyKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBkb051bGxS\nZWxhdGlvblRlc3QoYm9vbGVhbiByZXRhaW4sIGludCBiZWZvcmUsIGludCBh\nZnRlcikgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdl\ndFBNKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBNb2RSdW50\naW1lVGVzdDEgcGMgPSBuZXcgTW9kUnVudGltZVRlc3QxKCk7DQogICAgICAg\nIHBjLnNldFN0cmluZ0ZpZWxkKCJvcmlnIik7DQogICAgICAgIHBjLnNldFNl\nbGZPbmVPbmUobmV3IE1vZFJ1bnRpbWVUZXN0MSgib25lIiwgMSkpOw0KICAg\nICAgICBwbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9IHBt\nLmdldE9iamVjdElkKHBjKTsNCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAg\nICBlbmRFbShwbSk7DQoNCiAgICAgICAgcG0gPSBnZXRQTSgpOw0KICAgICAg\nICBwbS5zZXRSZXRhaW5TdGF0ZSh0cnVlKTsNCiAgICAgICAgc3RhcnRUeChw\nbSk7DQogICAgICAgIHBjID0gKE1vZFJ1bnRpbWVUZXN0MSkgcG0uZmluZChN\nb2RSdW50aW1lVGVzdDEuY2xhc3MsIG9pZCk7DQoNCiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBiZWZvcmU7IGkrKykgew0KICAgICAgICAgICAgcGMu\nc2V0U2VsZk9uZU9uZShuZXcgTW9kUnVudGltZVRlc3QxKCJiZWZvcmUiICsg\naSwgaSkpOw0KICAgICAgICAgICAgcG0uc2V0U2F2ZXBvaW50KCJiZWZvcmUi\nICsgaSk7DQogICAgICAgIH0NCg0KICAgICAgICBwbS5zZXRTYXZlcG9pbnQo\nInRlc3QiKTsNCiAgICAgICAgcGMuc2V0U2VsZk9uZU9uZShudWxsKTsNCg0K\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGFmdGVyOyBpKyspIHsNCiAg\nICAgICAgICAgIHBjLnNldFNlbGZPbmVPbmUobmV3IE1vZFJ1bnRpbWVUZXN0\nMSgpKTsNCiAgICAgICAgICAgIHBtLnNldFNhdmVwb2ludCgiYWZ0ZXIiICsg\naSk7DQogICAgICAgIH0NCg0KICAgICAgICBwbS5yb2xsYmFja1RvU2F2ZXBv\naW50KCJ0ZXN0Iik7DQogICAgICAgIGFzc2VydEVxdWFscygib3JpZyIsIHBj\nLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICBpZiAoYmVmb3JlID4gMCkN\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscygiYmVmb3JlIiArIChiZWZvcmUg\nLSAxKSwNCiAgICAgICAgICAgICAgICBwYy5nZXRTZWxmT25lT25lKCkuZ2V0\nU3RyaW5nRmllbGQoKSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGFz\nc2VydEVxdWFscygib25lIiwgcGMuZ2V0U2VsZk9uZU9uZSgpLmdldFN0cmlu\nZ0ZpZWxkKCkpOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGVuZEVt\nKHBtKTsNCg0KICAgICAgICBwbSA9IGdldFBNKCk7DQogICAgICAgIHBjID0g\nKE1vZFJ1bnRpbWVUZXN0MSkgcG0uZmluZChNb2RSdW50aW1lVGVzdDEuY2xh\nc3MsIG9pZCk7DQogICAgICAgIGFzc2VydEVxdWFscygib3JpZyIsIHBjLmdl\ndFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICBpZiAoYmVmb3JlID4gMCkNCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscygiYmVmb3JlIiArIChiZWZvcmUgLSAx\nKSwNCiAgICAgICAgICAgICAgICBwYy5nZXRTZWxmT25lT25lKCkuZ2V0U3Ry\naW5nRmllbGQoKSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscygib25lIiwgcGMuZ2V0U2VsZk9uZU9uZSgpLmdldFN0cmluZ0Zp\nZWxkKCkpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgcHVi\nbGljIHZvaWQgdGVzdENvbGxlY3Rpb24oKSB7DQogICAgICAgIGRvQ29sbGVj\ndGlvblRlc3QodHJ1ZSwgMCwgMCk7DQogICAgICAgIGRvQ29sbGVjdGlvblRl\nc3QodHJ1ZSwgMiwgMCk7DQogICAgICAgIGRvQ29sbGVjdGlvblRlc3QodHJ1\nZSwgMCwgMik7DQogICAgICAgIGRvQ29sbGVjdGlvblRlc3QoZmFsc2UsIDAs\nIDApOw0KICAgICAgICBkb0NvbGxlY3Rpb25UZXN0KGZhbHNlLCAyLCAwKTsN\nCiAgICAgICAgZG9Db2xsZWN0aW9uVGVzdChmYWxzZSwgMCwgMik7DQogICAg\nfQ0KDQogICAgcHVibGljIHZvaWQgZG9Db2xsZWN0aW9uVGVzdChib29sZWFu\nIG5ld1BDLCBpbnQgYmVmb3JlLCBpbnQgYWZ0ZXIpIHsNCiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBzdGFy\ndFR4KHBtKTsNCiAgICAgICAgTW9kUnVudGltZVRlc3QxIHBjID0gbmV3IE1v\nZFJ1bnRpbWVUZXN0MSgib3JpZyIsIDEpOw0KICAgICAgICBNb2RSdW50aW1l\nVGVzdDEgcGMyID0gbmV3RWxlbWVudChwYywgInBlcnNpc3QiLCAyKTsNCiAg\nICAgICAgTW9kUnVudGltZVRlc3QxIHBjMyA9IG5ld0VsZW1lbnQocGMsICJk\nZWxldGUiLCAzKTsNCiAgICAgICAgcG0ucGVyc2lzdChwYyk7DQogICAgICAg\nIHBtLnBlcnNpc3QocGMzKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdl\ndE9iamVjdElkKHBjKTsNCiAgICAgICAgTW9kUnVudGltZVRlc3QxIHRlbXA7\nDQogICAgICAgIGlmICghbmV3UEMpIHsNCiAgICAgICAgICAgIGVuZFR4KHBt\nKTsNCiAgICAgICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICAgICAgcG0g\nPSBnZXRQTSgpOw0KICAgICAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAg\nICAgICBwYyA9IChNb2RSdW50aW1lVGVzdDEpIHBtLmZpbmQoTW9kUnVudGlt\nZVRlc3QxLmNsYXNzLCBvaWQpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKDIsIHBjLmdldFNlbGZPbmVNYW55KCkuc2l6ZSgpKTsNCiAgICAgICAgICAg\nIGZvciAoSXRlcmF0b3IgaXQgPSBwYy5nZXRTZWxmT25lTWFueSgpLml0ZXJh\ndG9yKCk7IGl0Lmhhc05leHQoKTspIHsNCiAgICAgICAgICAgICAgICB0ZW1w\nID0gKE1vZFJ1bnRpbWVUZXN0MSkgaXQubmV4dCgpOw0KICAgICAgICAgICAg\nICAgIGlmICh0ZW1wLmdldEludEZpZWxkKCkgPT0gMikNCiAgICAgICAgICAg\nICAgICAgICAgcGMyID0gdGVtcDsNCiAgICAgICAgICAgICAgICBlbHNlIGlm\nICh0ZW1wLmdldEludEZpZWxkKCkgPT0gMykNCiAgICAgICAgICAgICAgICAg\nICAgcGMzID0gdGVtcDsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAg\nICAgICAgICAgICAgIGZhaWwoInVua25vd24iKTsNCiAgICAgICAgICAgIH0N\nCiAgICAgICAgfQ0KDQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmVm\nb3JlOyBpKyspIHsNCiAgICAgICAgICAgIG5ld0VsZW1lbnQocGMsICJiZWZv\ncmUiICsgaSwgKGkgKyAxKSAqIDEwKTsNCiAgICAgICAgICAgIHBtLnNldFNh\ndmVwb2ludCgiYmVmb3JlIiArIGkpOw0KICAgICAgICB9DQogICAgICAgIHBt\nLnNldFNhdmVwb2ludCgidGVzdCIpOw0KICAgICAgICBwbS5yZW1vdmUocGMz\nKTsNCiAgICAgICAgcGMuZ2V0U2VsZk9uZU1hbnkoKS5yZW1vdmUocGMyKTsN\nCg0KICAgICAgICAvLyBrb2RvIDQgaXMgbW9yZSBzdHJpbmdlbnQgb24gZGVs\nZXRlZCByZWxhdGlvbnMuDQogICAgICAgIHBjLmdldFNlbGZPbmVNYW55KCku\ncmVtb3ZlKHBjMyk7DQogICAgICAgIHBjMi5zZXRTZWxmT25lTWFueShudWxs\nKTsNCg0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGFmdGVyOyBpKysp\nIHsNCiAgICAgICAgICAgIG5ld0VsZW1lbnQocGMsICJhZnRlciIgKyBpLCAo\naSArIDEpICogLTEwKTsNCiAgICAgICAgICAgIHBtLnNldFNhdmVwb2ludCgi\nYWZ0ZXIiICsgaSk7DQogICAgICAgIH0NCg0KICAgICAgICBwbS5yb2xsYmFj\na1RvU2F2ZXBvaW50KCJ0ZXN0Iik7DQoNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJvcmlnIiwgcGMuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAgIGFzc2Vy\ndEZhbHNlKHBtLmlzUmVtb3ZlZChwYzIpKTsNCiAgICAgICAgZm9yIChJdGVy\nYXRvciBpdCA9IHBjLmdldFNlbGZPbmVNYW55KCkuaXRlcmF0b3IoKTsgaXQu\naGFzTmV4dCgpOykgew0KICAgICAgICAgICAgdGVtcCA9IChNb2RSdW50aW1l\nVGVzdDEpIGl0Lm5leHQoKTsNCiAgICAgICAgICAgIGFzc2VydEZhbHNlKHBt\nLmlzUmVtb3ZlZCh0ZW1wKSk7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMo\ncGMsIHRlbXAuZ2V0U2VsZk9uZU9uZSgpKTsNCiAgICAgICAgICAgIGlmICh0\nZW1wLmdldEludEZpZWxkKCkgPCAwKQ0KICAgICAgICAgICAgICAgIGZhaWwo\nInNob3VsZG4ndCBiZSBoZXJlOiIgKyB0ZW1wLmdldFN0cmluZ0ZpZWxkKCkp\nOw0KICAgICAgICB9DQogICAgICAgIGFzc2VydFRydWUocGMuZ2V0U2VsZk9u\nZU1hbnkoKS5jb250YWlucyhwYzIpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShw\nYy5nZXRTZWxmT25lTWFueSgpLmNvbnRhaW5zKHBjMykpOw0KICAgICAgICBh\nc3NlcnRFcXVhbHMoMiArIGJlZm9yZSwgcGMuZ2V0U2VsZk9uZU1hbnkoKS5z\naXplKCkpOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGVuZEVtKHBt\nKTsNCg0KICAgICAgICBwbSA9IGdldFBNKCk7DQogICAgICAgIHBjID0gKE1v\nZFJ1bnRpbWVUZXN0MSkgcG0uZmluZChNb2RSdW50aW1lVGVzdDEuY2xhc3Ms\nIG9pZCk7DQogICAgICAgIGFzc2VydEVxdWFscygib3JpZyIsIHBjLmdldFN0\ncmluZ0ZpZWxkKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiArIGJlZm9y\nZSwgcGMuZ2V0U2VsZk9uZU1hbnkoKS5zaXplKCkpOw0KICAgICAgICBib29s\nZWFuIGZvdW5kMiA9IGZhbHNlOw0KICAgICAgICBib29sZWFuIGZvdW5kMyA9\nIGZhbHNlOw0KICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ID0gcGMuZ2V0U2Vs\nZk9uZU1hbnkoKS5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7KSB7DQogICAg\nICAgICAgICB0ZW1wID0gKE1vZFJ1bnRpbWVUZXN0MSkgaXQubmV4dCgpOw0K\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHBjLCB0ZW1wLmdldFNlbGZPbmVP\nbmUoKSk7DQogICAgICAgICAgICBpZiAodGVtcC5nZXRJbnRGaWVsZCgpIDwg\nMCkNCiAgICAgICAgICAgICAgICBmYWlsKCJzaG91bGRuJ3QgYmUgaGVyZToi\nICsgdGVtcC5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAgICAgICAgIGVsc2Ug\naWYgKHRlbXAuZ2V0SW50RmllbGQoKSA9PSAyKQ0KICAgICAgICAgICAgICAg\nIGZvdW5kMiA9IHRydWU7DQogICAgICAgICAgICBlbHNlIGlmICh0ZW1wLmdl\ndEludEZpZWxkKCkgPT0gMykNCiAgICAgICAgICAgICAgICBmb3VuZDMgPSB0\ncnVlOw0KICAgICAgICB9DQogICAgICAgIGFzc2VydFRydWUoZm91bmQyICYm\nIGZvdW5kMyk7DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0Q2hhbmdlVHJhY2tlcigpIHsNCiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBzdGFy\ndFR4KHBtKTsNCiAgICAgICAgUnVudGltZVRlc3Q0IHBjID0gbmV3IFJ1bnRp\nbWVUZXN0NCgib3JpZyIpOw0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIDEyOyBpKyspDQogICAgICAgICAgICBwYy5nZXRSdW50aW1lVGVzdDVzKCku\nYWRkKG5ldyBSdW50aW1lVGVzdDUoImZpdmUiICsgaSkpOw0KICAgICAgICBw\nbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9i\namVjdElkKHBjKTsNCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAgICBlbmRF\nbShwbSk7DQoNCiAgICAgICAgcG0gPSBnZXRQTSgpOw0KICAgICAgICBzdGFy\ndFR4KHBtKTsNCiAgICAgICAgcGMgPSAoUnVudGltZVRlc3Q0KSBwbS5maW5k\nKFJ1bnRpbWVUZXN0NC5jbGFzcywgb2lkKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEyLCBwYy5nZXRSdW50aW1lVGVzdDVzKCkuc2l6ZSgpKTsNCiAgICAg\nICAgaW50IGNvdW50ID0gMDsNCiAgICAgICAgZm9yIChJdGVyYXRvciBpID0g\ncGMuZ2V0UnVudGltZVRlc3Q1cygpLml0ZXJhdG9yKCk7DQogICAgICAgICAg\nICBjb3VudCA8IDI7IGNvdW50KyspIHsNCiAgICAgICAgICAgIGkubmV4dCgp\nOw0KICAgICAgICAgICAgaS5yZW1vdmUoKTsNCiAgICAgICAgfQ0KICAgICAg\nICBhc3NlcnRFcXVhbHMoMTAsIHBjLmdldFJ1bnRpbWVUZXN0NXMoKS5zaXpl\nKCkpOw0KICAgICAgICBwbS5zZXRTYXZlcG9pbnQoInRlc3QiKTsNCiAgICAg\nICAgY291bnQgPSAwOw0KICAgICAgICBmb3IgKEl0ZXJhdG9yIGkgPSBwYy5n\nZXRSdW50aW1lVGVzdDVzKCkuaXRlcmF0b3IoKTsNCiAgICAgICAgICAgIGNv\ndW50IDwgMjsgY291bnQrKykgew0KICAgICAgICAgICAgaS5uZXh0KCk7DQog\nICAgICAgICAgICBpLnJlbW92ZSgpOw0KICAgICAgICB9DQogICAgICAgIGFz\nc2VydEVxdWFscyg4LCBwYy5nZXRSdW50aW1lVGVzdDVzKCkuc2l6ZSgpKTsN\nCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAg\nICAgICAgcG0gPSBnZXRQTSgpOw0KICAgICAgICBwYyA9IChSdW50aW1lVGVz\ndDQpIHBtLmZpbmQoUnVudGltZVRlc3Q0LmNsYXNzLCBvaWQpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoOCwgcGMuZ2V0UnVudGltZVRlc3Q1cygpLnNpemUo\nKSk7DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICBwcml2YXRl\nIE1vZFJ1bnRpbWVUZXN0MSBuZXdFbGVtZW50KE1vZFJ1bnRpbWVUZXN0MSBv\nbmUsIFN0cmluZyBzdHIsIGludCBpKSB7DQogICAgICAgIE1vZFJ1bnRpbWVU\nZXN0MSB0d28gPSBuZXcgTW9kUnVudGltZVRlc3QxKHN0ciwgaSk7DQogICAg\nICAgIHR3by5zZXRTZWxmT25lT25lKG9uZSk7DQogICAgICAgIG9uZS5nZXRT\nZWxmT25lTWFueSgpLmFkZCh0d28pOw0KICAgICAgICByZXR1cm4gdHdvOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyBzdGF0aWMgUENTdGF0ZSBnZXRTdGF0ZShP\nYmplY3Qgbykgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nIE9wZW5KUEFQZXJzaXN0ZW5jZS5nZXRFbnRpdHlNYW5hZ2VyKG8pOw0KDQog\nICAgICAgIGlmIChwbSA9PSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuIG51\nbGw7DQogICAgICAgIHJldHVybiBKUEFGYWNhZGVIZWxwZXIudG9Ccm9rZXIo\ncG0pLmdldFN0YXRlTWFuYWdlcihvKS5nZXRQQ1N0YXRlKCk7DQogICAgfQ0K\nfQ0K\n","encoding":"base64"}

