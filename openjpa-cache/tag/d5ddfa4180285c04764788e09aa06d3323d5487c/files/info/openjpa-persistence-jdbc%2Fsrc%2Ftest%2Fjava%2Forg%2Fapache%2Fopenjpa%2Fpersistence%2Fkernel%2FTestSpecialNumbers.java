{"sha":"5ba87df4c68a5b152197114b9416f60a8ae51eac","node_id":"MDQ6QmxvYjIwNjM2NDo1YmE4N2RmNGM2OGE1YjE1MjE5NzExNGI5NDE2ZjYwYThhZTUxZWFj","size":11959,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5ba87df4c68a5b152197114b9416f60a8ae51eac","content":"LyoNCiAqIFRlc3RTcGVjaWFsTnVtYmVycy5qYXZhDQogKg0KICogQ3JlYXRl\nZCBvbiBPY3RvYmVyIDEzLCAyMDA2LCA0OjU2IFBNDQogKg0KICogVG8gY2hh\nbmdlIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRlIE1h\nbmFnZXINCiAqIGFuZCBvcGVuIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZWRpdG9y\nLg0KICovDQovKg0KICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2Fy\nZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQ0KICogb3IgbW9yZSBjb250\ncmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBm\naWxlDQogKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRp\nb25hbCBpbmZvcm1hdGlvbg0KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25l\ncnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQ0KICogdG8geW91\nIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQ0K\nICogIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNl\ncHQgaW4gY29tcGxpYW5jZQ0KICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBt\nYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICoNCiAqIGh0\ndHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICoN\nCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3Jl\nZWQgdG8gaW4gd3JpdGluZywNCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVu\nZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuDQogKiAiQVMg\nSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBP\nRiBBTlkNCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBT\nZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQ0KICogc3BlY2lmaWMgbGFuZ3VhZ2Ug\nZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucw0KICogdW5k\nZXIgdGhlIExpY2Vuc2UuICAgIA0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWw7DQoNCmltcG9ydCBqYXZhLm1h\ndGguQmlnSW50ZWdlcjsNCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsN\nCmltcG9ydCBqYXZhLnV0aWwuRW51bVNldDsNCg0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMuQWxs\nRmllbGRUeXBlc1Rlc3Q7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmNvbW1vbi51dGlscy5BYnN0cmFjdFRlc3RDYXNlOw0KaW1w\nb3J0IGp1bml0LmZyYW1ld29yay5Bc3NlcnRpb25GYWlsZWRFcnJvcjsNCg0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBB\nRW50aXR5TWFuYWdlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuT3BlbkpQQVF1ZXJ5Ow0KDQpwdWJsaWMgY2xhc3MgVGVzdFNw\nZWNpYWxOdW1iZXJzIGV4dGVuZHMgQmFzZUtlcm5lbFRlc3Qgew0KDQogICAg\nLyoqDQogICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBUZXN0U3Bl\nY2lhbE51bWJlcnMNCiAgICAgKi8NCiAgICBwdWJsaWMgVGVzdFNwZWNpYWxO\ndW1iZXJzKCkgew0KICAgIH0NCg0KICAgIHB1YmxpYyBUZXN0U3BlY2lhbE51\nbWJlcnMoU3RyaW5nIG5hbWUpIHsNCiAgICAgICAgc3VwZXIobmFtZSk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7DQogICAgICAgIHRy\neSB7DQogICAgICAgICAgICBkZWxldGVBbGwoQWxsRmllbGRUeXBlc1Rlc3Qu\nY2xhc3MpOw0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgew0KICAg\nICAgICAgICAgLy8gY2F0Y2ggZXJyb3JzIHdoZW4gZGVsZXRpbmcgLi4uIFBv\nc3RncmVTUUwgaGFzDQogICAgICAgICAgICAvLyBhIGNvdXBsZSBwcm9ibGVt\ncyB3aXRoIHNvbWUgb2YgdGhlIHZhbHVlcyB0aGF0DQogICAgICAgICAgICAv\nLyB0cnkgdG8gZ2V0IGluc2VydGVkLg0KICAgICAgICB9DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdFNob3J0TWF4KCkgew0KICAgICAgICBBbGxG\naWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlwZXNUZXN0KCk7\nDQogICAgICAgIGFmdHQuc2V0VGVzdHNob3J0KFNob3J0Lk1BWF9WQUxVRSk7\nDQogICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdHNob3J0ID0gOnBh\ncmFtIiwgbmV3IFNob3J0KFNob3J0Lk1BWF9WQUxVRSkpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyB2b2lkIHRlc3RTaG9ydE1pbigpIHsNCiAgICAgICAgQWxs\nRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgp\nOw0KICAgICAgICBhZnR0LnNldFRlc3RzaG9ydChTaG9ydC5NSU5fVkFMVUUp\nOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFm\ndHQsICJ0ZXN0c2hvcnQgPSA6cGFyYW0iLA0KICAgICAgICAgICAgICAgIG5l\ndyBTaG9ydChTaG9ydC5NSU5fVkFMVUUpKTsNCiAgICAgICAgfSBjYXRjaCAo\nVGhyb3dhYmxlIHQpIHsNCiAgICAgICAgICAgIGJ1ZyhBYnN0cmFjdFRlc3RD\nYXNlLlBsYXRmb3JtLkVNUFJFU1MsIDg4OSwgdCwNCiAgICAgICAgICAgICAg\nICAiRW1wcmVzcyBjYW5ub3Qgc3RvcmUgbWluIHZhbHVlcyIpOw0KICAgICAg\nICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdExvbmdNYXgoKSB7\nDQogICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmll\nbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgYWZ0dC5zZXRUZXN0bG9uZyhMb25n\nLk1BWF9WQUxVRSk7DQogICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVz\ndGxvbmcgPSA6cGFyYW0iLCBuZXcgTG9uZyhMb25nLk1BWF9WQUxVRSkpOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RMb25nTWluKCkgew0KICAg\nICAgICB0cnkgew0KICAgICAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0\ndCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOw0KICAgICAgICAgICAgYWZ0\ndC5zZXRUZXN0bG9uZyhMb25nLk1JTl9WQUxVRSk7DQogICAgICAgICAgICBz\nYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3Rsb25nID0gOnBhcmFtIiwgbmV3IExv\nbmcoTG9uZy5NSU5fVkFMVUUpKTsNCiAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIHQpIHsNCiAgICAgICAgICAgIGJ1ZyhBYnN0cmFjdFRlc3RDYXNlLlBs\nYXRmb3JtLkhZUEVSU09OSUMsIDQ3NCwgdCwNCiAgICAgICAgICAgICAgICAi\nU29tZSBkYXRhYmFzZXMgY2Fubm90IHN0b3JlIExvbmcuTUlOX1ZBTFVFIik7\nDQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW50\nZWdlck1heCgpIHsNCiAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9\nIG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOw0KICAgICAgICBhZnR0LnNldFRl\nc3RpbnQoSW50ZWdlci5NQVhfVkFMVUUpOw0KICAgICAgICBzYXZlQW5kUXVl\ncnkoYWZ0dCwgInRlc3RpbnQgPSA6cGFyYW0iLA0KICAgICAgICAgICAgbmV3\nIEludGVnZXIoSW50ZWdlci5NQVhfVkFMVUUpKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0SW50ZWdlck1pbigpIHsNCiAgICAgICAgQWxsRmll\nbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOw0K\nICAgICAgICBhZnR0LnNldFRlc3RpbnQoSW50ZWdlci5NSU5fVkFMVUUpOw0K\nICAgICAgICB0cnkgew0KICAgICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQs\nICJ0ZXN0aW50ID0gOnBhcmFtIiwNCiAgICAgICAgICAgICAgICBuZXcgSW50\nZWdlcihJbnRlZ2VyLk1JTl9WQUxVRSkpOw0KICAgICAgICB9IGNhdGNoIChU\naHJvd2FibGUgdCkgew0KICAgICAgICAgICAgYnVnKEFic3RyYWN0VGVzdENh\nc2UuUGxhdGZvcm0uRU1QUkVTUywgODg5LCB0LA0KICAgICAgICAgICAgICAg\nICJFbXByZXNzIGNhbm5vdCBzdG9yZSBtaW4gdmFsdWVzIik7DQogICAgICAg\nIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmxvYXRNYXgoKSB7\nDQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBBbGxGaWVsZFR5cGVzVGVz\ndCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlwZXNUZXN0KCk7DQogICAgICAgICAg\nICBhZnR0LnNldFRlc3RmbG9hdChGbG9hdC5NQVhfVkFMVUUpOw0KICAgICAg\nICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0ZmxvYXQgPSA6cGFyYW0i\nLA0KICAgICAgICAgICAgICAgIG5ldyBGbG9hdChGbG9hdC5NQVhfVkFMVUUp\nKTsNCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAg\nICAgIGJ1ZyhFbnVtU2V0Lm9mKEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0u\nUE9TVEdSRVNRTCwNCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNl\nLlBsYXRmb3JtLkRCMiwNCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RD\nYXNlLlBsYXRmb3JtLk1ZU1FMLA0KICAgICAgICAgICAgICAgIEFic3RyYWN0\nVGVzdENhc2UuUGxhdGZvcm0uREVSQlkpLCA0OTQsIGUsDQogICAgICAgICAg\nICAgICAgIlNvbWUgZGF0YXN0b3JlcyBjYW5ub3Qgc3RvcmUgRmxvYXQuTUFY\nX1ZBTFVFIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RmxvYXRNaW4oKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAg\nICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlwZXNU\nZXN0KCk7DQogICAgICAgICAgICBhZnR0LnNldFRlc3RmbG9hdChGbG9hdC5N\nSU5fVkFMVUUpOw0KICAgICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0\nZXN0ZmxvYXQgPSA6cGFyYW0iLA0KICAgICAgICAgICAgICAgIG5ldyBGbG9h\ndChGbG9hdC5NSU5fVkFMVUUpKTsNCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsNCiAgICAgICAgICAgIGJ1ZyhFbnVtU2V0Lm9mKEFic3RyYWN0\nVGVzdENhc2UuUGxhdGZvcm0uUE9TVEdSRVNRTCwNCiAgICAgICAgICAgICAg\nICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLlNRTFNFUlZFUiwNCiAgICAg\nICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLkRCMiwNCiAg\nICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLklORk9S\nTUlYLA0KICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZv\ncm0uREVSQlkpLCA0OTQsIGUsDQogICAgICAgICAgICAgICAgIlNvbWUgZGF0\nYWJhc2VzIGNhbm5vdCBzdG9yZSBGbG9hdC5NSU5fVkFMVUUiKTsNCiAgICAg\nICAgfSBjYXRjaCAoQXNzZXJ0aW9uRmFpbGVkRXJyb3IgZSkgew0KICAgICAg\nICAgICAgYnVnKEVudW1TZXQub2YoQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9y\nbS5NWVNRTCwNCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBs\nYXRmb3JtLlNRTFNFUlZFUiksIDQ5NCwgZSwNCiAgICAgICAgICAgICAgICAi\nU29tZSBkYXRhYmFzZXMgY2Fubm90IHN0b3JlIEZsb2F0Lk1JTl9WQUxVRSIp\nOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEZs\nb2F0TmFOKCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgQWxsRmll\nbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOw0K\nICAgICAgICAgICAgYWZ0dC5zZXRUZXN0ZmxvYXQoRmxvYXQuTmFOKTsNCiAg\nICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGZsb2F0ID0gOnBh\ncmFtIiwgbmV3IEZsb2F0KEZsb2F0Lk5hTikpOw0KICAgICAgICB9IGNhdGNo\nIChUaHJvd2FibGUgdCkgew0KICAgICAgICAgICAgYnVnKDQ2MSwgdCwgIk5h\nTiBwcm9ibGVtcyIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgdGVzdEZsb2F0TmVnYXRpdmVJbmZpbml0eSgpIHsNCiAgICAgICAg\ndHJ5IHsNCiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBu\nZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgICAgIGFmdHQuc2V0\nVGVzdGZsb2F0KEZsb2F0Lk5FR0FUSVZFX0lORklOSVRZKTsNCiAgICAgICAg\nICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGZsb2F0ID0gOnBhcmFtIiwN\nCiAgICAgICAgICAgICAgICBuZXcgRmxvYXQoRmxvYXQuTkVHQVRJVkVfSU5G\nSU5JVFkpKTsNCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsNCiAg\nICAgICAgICAgIGJ1ZyhFbnVtU2V0Lm9mKEFic3RyYWN0VGVzdENhc2UuUGxh\ndGZvcm0uUE9JTlRCQVNFLA0KICAgICAgICAgICAgICAgIEFic3RyYWN0VGVz\ndENhc2UuUGxhdGZvcm0uUE9TVEdSRVNRTCwNCiAgICAgICAgICAgICAgICBB\nYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLk1ZU1FMLA0KICAgICAgICAgICAg\nICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uREIyLA0KICAgICAgICAg\nICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uT1JBQ0xFLA0KICAg\nICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uSU5GT1JN\nSVgsDQogICAgICAgICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9y\nbS5ERVJCWSwNCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBs\nYXRmb3JtLlNRTFNFUlZFUiksIDQ5NCwgZSwNCiAgICAgICAgICAgICAgICAi\nU29tZSBkYXRhYmFzZXMgY2Fubm90IHN0b3JlIEZsb2F0Lk5FR0FUSVZFX0lO\nRklOSVRZIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RmxvYXRQb3N0aXZpZUluZmluaXR5KCkgew0KICAgICAgICB0cnkg\new0KICAgICAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBB\nbGxGaWVsZFR5cGVzVGVzdCgpOw0KICAgICAgICAgICAgYWZ0dC5zZXRUZXN0\nZmxvYXQoRmxvYXQuUE9TSVRJVkVfSU5GSU5JVFkpOw0KICAgICAgICAgICAg\nc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0ZmxvYXQgPSA6cGFyYW0iLA0KICAg\nICAgICAgICAgICAgIG5ldyBGbG9hdChGbG9hdC5QT1NJVElWRV9JTkZJTklU\nWSkpOw0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgew0KICAgICAg\nICAgICAgYnVnKEVudW1TZXQub2YoQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9y\nbS5QT0lOVEJBU0UsDQogICAgICAgICAgICAgICAgQWJzdHJhY3RUZXN0Q2Fz\nZS5QbGF0Zm9ybS5QT1NUR1JFU1FMLA0KICAgICAgICAgICAgICAgIEFic3Ry\nYWN0VGVzdENhc2UuUGxhdGZvcm0uTVlTUUwsDQogICAgICAgICAgICAgICAg\nQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5EQjIsDQogICAgICAgICAgICAg\nICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5PUkFDTEUsDQogICAgICAg\nICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5JTkZPUk1JWCwN\nCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLkRF\nUkJZLA0KICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZv\ncm0uU1FMU0VSVkVSKSwgNDk0LCBlLA0KICAgICAgICAgICAgICAgICJTb21l\nIGRhdGFiYXNlcyBjYW5ub3Qgc3RvcmUgRmxvYXQuUE9TSVRJVkVfSU5GSU5J\nVFkiKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRl\nc3REb3VibGVNYXgoKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBB\nbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlwZXNUZXN0\nKCk7DQogICAgICAgICAgICBhZnR0LnNldFRlc3Rkb3VibGUoRG91YmxlLk1B\nWF9WQUxVRSk7DQogICAgICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwgInRl\nc3Rkb3VibGUgPSA6cGFyYW0iLA0KICAgICAgICAgICAgICAgIG5ldyBEb3Vi\nbGUoRG91YmxlLk1BWF9WQUxVRSkpOw0KICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgew0KICAgICAgICAgICAgYnVnKEVudW1TZXQub2YoQWJzdHJh\nY3RUZXN0Q2FzZS5QbGF0Zm9ybS5QT0lOVEJBU0UsDQogICAgICAgICAgICAg\nICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5NWVNRTCwNCiAgICAgICAg\nICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLk9SQUNMRSwNCiAg\nICAgICAgICAgICAgICBBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLlBPU1RH\nUkVTUUwsDQogICAgICAgICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0\nZm9ybS5FTVBSRVNTLA0KICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENh\nc2UuUGxhdGZvcm0uREIyLA0KICAgICAgICAgICAgICAgIEFic3RyYWN0VGVz\ndENhc2UuUGxhdGZvcm0uSU5GT1JNSVgsDQogICAgICAgICAgICAgICAgQWJz\ndHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5ERVJCWSksIDQ5NCwgZSwNCiAgICAg\nICAgICAgICAgICAiU29tZSBkYXRhYmFzZXMgY2Fubm90IHN0b3JlIERvdWJs\nZS5NQVhfVkFMVUUiKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1Ymxp\nYyB2b2lkIHRlc3REb3VibGVNaW4oKSB7DQogICAgICAgIHRyeSB7DQogICAg\nICAgICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxk\nVHlwZXNUZXN0KCk7DQogICAgICAgICAgICBhZnR0LnNldFRlc3Rkb3VibGUo\nRG91YmxlLk1JTl9WQUxVRSk7DQogICAgICAgICAgICBzYXZlQW5kUXVlcnko\nYWZ0dCwgInRlc3Rkb3VibGUgPSA6cGFyYW0iLA0KICAgICAgICAgICAgICAg\nIG5ldyBEb3VibGUoRG91YmxlLk1JTl9WQUxVRSkpOw0KICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgew0KICAgICAgICAgICAgYnVnKEVudW1TZXQu\nb2YoQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5QT1NUR1JFU1FMLA0KICAg\nICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uU1FMU0VS\nVkVSLA0KICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZv\ncm0uT1JBQ0xFLA0KICAgICAgICAgICAgICAgIEFic3RyYWN0VGVzdENhc2Uu\nUGxhdGZvcm0uRU1QUkVTUywNCiAgICAgICAgICAgICAgICBBYnN0cmFjdFRl\nc3RDYXNlLlBsYXRmb3JtLkRCMiwNCiAgICAgICAgICAgICAgICBBYnN0cmFj\ndFRlc3RDYXNlLlBsYXRmb3JtLklORk9STUlYLA0KICAgICAgICAgICAgICAg\nIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uREVSQlkpLCA0OTQsIGUsDQog\nICAgICAgICAgICAgICAgIlNvbWUgZGF0YWJhc2VzIGNhbm5vdCBzdG9yZSBE\nb3VibGUuTUlOX1ZBTFVFIik7DQogICAgICAgIH0gY2F0Y2ggKEFzc2VydGlv\nbkZhaWxlZEVycm9yIGUpIHsNCiAgICAgICAgICAgIGJ1ZyhBYnN0cmFjdFRl\nc3RDYXNlLlBsYXRmb3JtLk1ZU1FMLCA0OTQsIGUsDQogICAgICAgICAgICAg\nICAgIlNvbWUgZGF0YWJhc2VzIGNhbm5vdCBzdG9yZSBEb3VibGUuTUlOX1ZB\nTFVFIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RG91YmxlTmFOKCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAg\nQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVz\ndCgpOw0KICAgICAgICAgICAgYWZ0dC5zZXRUZXN0ZG91YmxlKERvdWJsZS5O\nYU4pOw0KICAgICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0ZG91\nYmxlID0gOnBhcmFtIiwgbmV3IERvdWJsZShEb3VibGUuTmFOKSk7DQogICAg\nICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7DQogICAgICAgICAgICBidWco\nNDYxLCB0LCAiTmFOIHByb2JsZW1zIik7DQogICAgICAgIH0NCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RG91YmxlTmVnYXRpdmVJbmZpbml0eSgp\nIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNU\nZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAg\nICAgIGFmdHQuc2V0VGVzdGRvdWJsZShEb3VibGUuTkVHQVRJVkVfSU5GSU5J\nVFkpOw0KICAgICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0ZG91\nYmxlID0gOnBhcmFtIiwNCiAgICAgICAgICAgICAgICBuZXcgRG91YmxlKERv\ndWJsZS5ORUdBVElWRV9JTkZJTklUWSkpOw0KICAgICAgICB9IGNhdGNoIChU\naHJvd2FibGUgdCkgew0KICAgICAgICAgICAgYnVnKDQ2MSwgdCwgImluZmlu\naXR5IHByb2JsZW1zIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJs\naWMgdm9pZCB0ZXN0RG91YmxlUG9zdGl2aWVJbmZpbml0eSgpIHsNCiAgICAg\nICAgdHJ5IHsNCiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQg\nPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgICAgIGFmdHQu\nc2V0VGVzdGRvdWJsZShEb3VibGUuUE9TSVRJVkVfSU5GSU5JVFkpOw0KICAg\nICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0ZG91YmxlID0gOnBh\ncmFtIiwNCiAgICAgICAgICAgICAgICBuZXcgRG91YmxlKERvdWJsZS5QT1NJ\nVElWRV9JTkZJTklUWSkpOw0KICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUg\ndCkgew0KICAgICAgICAgICAgYnVnKDQ2MSwgdCwgImluZmluaXR5IHByb2Js\nZW1zIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0\nZXN0Qnl0ZU1pbigpIHsNCiAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0\ndCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOw0KICAgICAgICBhZnR0LnNl\ndFRlc3RieXRlKEJ5dGUuTUlOX1ZBTFVFKTsNCiAgICAgICAgdHJ5IHsNCiAg\nICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGJ5dGUgPSA6cGFy\nYW0iLCBuZXcgQnl0ZShCeXRlLk1JTl9WQUxVRSkpOw0KICAgICAgICB9IGNh\ndGNoIChUaHJvd2FibGUgdCkgew0KICAgICAgICAgICAgYnVnKEFic3RyYWN0\nVGVzdENhc2UuUGxhdGZvcm0uRU1QUkVTUywgODg5LCB0LA0KICAgICAgICAg\nICAgICAgICJFbXByZXNzIGNhbm5vdCBzdG9yZSBtaW4gdmFsdWVzIik7DQog\nICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0Qnl0ZU1h\neCgpIHsNCiAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBB\nbGxGaWVsZFR5cGVzVGVzdCgpOw0KICAgICAgICBhZnR0LnNldFRlc3RieXRl\nKEJ5dGUuTUFYX1ZBTFVFKTsNCiAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQs\nICJ0ZXN0Ynl0ZSA9IDpwYXJhbSIsIG5ldyBCeXRlKEJ5dGUuTUFYX1ZBTFVF\nKSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFplcm9CaWdJbnRl\nZ2VyKCkgew0KICAgICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3\nIEFsbEZpZWxkVHlwZXNUZXN0KCk7DQogICAgICAgIGFmdHQuc2V0VGVzdEJp\nZ0ludGVnZXIoQmlnSW50ZWdlci5aRVJPKTsNCiAgICAgICAgc2F2ZUFuZFF1\nZXJ5KGFmdHQsICJ0ZXN0QmlnSW50ZWdlciA9IDpwYXJhbSIsIEJpZ0ludGVn\nZXIuWkVSTyk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdE9uZUJp\nZ0ludGVnZXIoKSB7DQogICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQg\nPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgYWZ0dC5zZXRU\nZXN0QmlnSW50ZWdlcihCaWdJbnRlZ2VyLk9ORSk7DQogICAgICAgIHNhdmVB\nbmRRdWVyeShhZnR0LCAidGVzdEJpZ0ludGVnZXIgPSA6cGFyYW0iLCBCaWdJ\nbnRlZ2VyLk9ORSk7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIHNhdmVB\nbmRRdWVyeShPYmplY3Qgb2JqLCBTdHJpbmcgcXVlcnksIE9iamVjdCBwYXJh\nbSkgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBN\nKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBwbS5wZXJzaXN0\nKG9iaik7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgZW5kRW0ocG0p\nOw0KDQogICAgICAgIHBtID0gZ2V0UE0oKTsNCiAgICAgICAgT3BlbkpQQVF1\nZXJ5IHEgPSBwbS5jcmVhdGVRdWVyeSgic2VsZWN0IG8gZnJvbSAiDQogICAg\nICAgICAgICArIG9iai5nZXRDbGFzcygpLmdldE5hbWUoKSArICIgbyB3aGVy\nZSAiICsgcXVlcnkpOw0KICAgICAgICBxLnNldFBhcmFtZXRlcigicGFyYW0i\nLCBwYXJhbSk7DQogICAgICAgIENvbGxlY3Rpb24gYyA9IChDb2xsZWN0aW9u\nKSBxLmdldFJlc3VsdExpc3QoKTsNCiAgICAgICAgYXNzZXJ0U2l6ZSgxLCBj\nKTsNCiAgICAgICAgZW5kRW0ocG0pOw0KICAgIH0NCn0NCg==\n","encoding":"base64"}

