{"sha":"ad72d7096c5e4714ed7b670e5c91e704908520f2","node_id":"MDQ6QmxvYjIwNjM2NDphZDcyZDcwOTZjNWU0NzE0ZWQ3YjY3MGU1YzkxZTcwNDkwODUyMGYy","size":10480,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ad72d7096c5e4714ed7b670e5c91e704908520f2","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2Uua2VybmVsOw0KDQppbXBvcnQgamF2YS51dGlsLkNvbGxl\nY3Rpb247DQppbXBvcnQgamF2YS51dGlsLkVudW1TZXQ7DQppbXBvcnQgamF2\nYS5tYXRoLkJpZ0ludGVnZXI7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2Uua2VybmVsLmNvbW1vbi5hcHBzLkFsbEZpZWxkVHlw\nZXNUZXN0Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsNCmltcG9ydCBqdW5p\ndC5mcmFtZXdvcmsuQXNzZXJ0Ow0KaW1wb3J0IGp1bml0LmZyYW1ld29yay5B\nc3NlcnRpb25GYWlsZWRFcnJvcjsNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVF1ZXJ5\nOw0KDQovKioNCiAqIFRlc3QgdmFyaW91cyBzcGVjaWFsIG51bWJlcnMsIHN1\nY2ggYXMgRG91YmxlLk5hTi4NCiAqDQogKiBAYXV0aG9yIDxhIGhyZWY9Im1h\naWx0bzptYXJjQHNvbGFybWV0cmljLmNvbSI+TWFyYyBQcnVkJ2hvbW1lYXV4\nPC9hPg0KICovDQpwdWJsaWMgY2xhc3MgVGVzdFNwZWNpYWxOdW1iZXJzMiBl\neHRlbmRzIEJhc2VLZXJuZWxUZXN0IHsNCg0KICAgIHB1YmxpYyBUZXN0U3Bl\nY2lhbE51bWJlcnMyKFN0cmluZyBuYW1lKSB7DQogICAgICAgIHN1cGVyKG5h\nbWUpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgew0KICAg\nICAgICB0cnkgew0KICAgICAgICAgICAgZGVsZXRlQWxsKEFsbEZpZWxkVHlw\nZXNUZXN0LmNsYXNzKTsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIC8vIGNhdGNoIGVycm9ycyB3aGVu\nIGRlbGV0aW5nIC4uLiBQb3N0Z3JlU1FMIGhhcw0KICAgICAgICAgICAgLy8g\nYSBjb3VwbGUgcHJvYmxlbXMgd2l0aCBzb21lIG9mIHRoZSB2YWx1ZXMgdGhh\ndA0KICAgICAgICAgICAgLy8gdHJ5IHRvIGdldCBpbnNlcnRlZC4NCiAgICAg\nICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RTaG9ydE1heCgp\nIHsNCiAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxG\naWVsZFR5cGVzVGVzdCgpOw0KICAgICAgICBhZnR0LnNldFRlc3RzaG9ydChT\naG9ydC5NQVhfVkFMVUUpOw0KICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwg\nInRlc3RzaG9ydCA9IiwgbmV3IFNob3J0KFNob3J0Lk1BWF9WQUxVRSkpOw0K\nICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2hvcnRNaW4oKSB7\nDQogICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmll\nbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgYWZ0dC5zZXRUZXN0c2hvcnQoU2hv\ncnQuTUlOX1ZBTFVFKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHNh\ndmVBbmRRdWVyeShhZnR0LCAidGVzdHNob3J0ID0iLA0KICAgICAgICAgICAg\nICAgICAgICBuZXcgU2hvcnQoU2hvcnQuTUlOX1ZBTFVFKSk7DQogICAgICAg\nIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7DQogICAgICAgICAgICBidWcoQWJz\ndHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5FTVBSRVNTLCA4ODksIHQsDQogICAg\nICAgICAgICAgICAgICAgICJFbXByZXNzIGNhbm5vdCBzdG9yZSBtaW4gdmFs\ndWVzIik7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcHVibGljIHZv\naWQgdGVzdExvbmdNYXgoKSB7DQogICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0\nIGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgYWZ0\ndC5zZXRUZXN0bG9uZyhMb25nLk1BWF9WQUxVRSk7DQogICAgICAgIHNhdmVB\nbmRRdWVyeShhZnR0LCAidGVzdGxvbmcgPSIsIG5ldyBMb25nKExvbmcuTUFY\nX1ZBTFVFKSk7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RM\nb25nTWluKCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgQWxsRmll\nbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOw0K\nICAgICAgICAgICAgYWZ0dC5zZXRUZXN0bG9uZyhMb25nLk1JTl9WQUxVRSk7\nDQogICAgICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3Rsb25nID0i\nLCBuZXcgTG9uZyhMb25nLk1JTl9WQUxVRSkpOw0KICAgICAgICB9IGNhdGNo\nIChUaHJvd2FibGUgdCkgew0KICAgICAgICAgICAgYnVnKEFic3RyYWN0VGVz\ndENhc2UuUGxhdGZvcm0uSFlQRVJTT05JQywgNDc0LCB0LA0KICAgICAgICAg\nICAgICAgICAgICAiU29tZSBkYXRhYmFzZXMgY2Fubm90IHN0b3JlIExvbmcu\nTUlOX1ZBTFVFIik7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcHVi\nbGljIHZvaWQgdGVzdEludGVnZXJNYXgoKSB7DQogICAgICAgIEFsbEZpZWxk\nVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAg\nICAgICAgYWZ0dC5zZXRUZXN0aW50KEludGVnZXIuTUFYX1ZBTFVFKTsNCiAg\nICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQsICJ0ZXN0aW50ID0iLA0KICAgICAg\nICAgICAgICAgIG5ldyBJbnRlZ2VyKEludGVnZXIuTUFYX1ZBTFVFKSk7DQog\nICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RJbnRlZ2VyTWluKCkg\new0KICAgICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZp\nZWxkVHlwZXNUZXN0KCk7DQogICAgICAgIGFmdHQuc2V0VGVzdGludChJbnRl\nZ2VyLk1JTl9WQUxVRSk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBz\nYXZlQW5kUXVlcnkoYWZ0dCwgInRlc3RpbnQgPSIsDQogICAgICAgICAgICAg\nICAgICAgIG5ldyBJbnRlZ2VyKEludGVnZXIuTUlOX1ZBTFVFKSk7DQogICAg\nICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7DQogICAgICAgICAgICBidWco\nQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5FTVBSRVNTLCA4ODksIHQsDQog\nICAgICAgICAgICAgICAgICAgICJFbXByZXNzIGNhbm5vdCBzdG9yZSBtaW4g\ndmFsdWVzIik7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcHVibGlj\nIHZvaWQgdGVzdEZsb2F0TWF4KCkgew0KICAgICAgICB0cnkgew0KICAgICAg\nICAJQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVz\nVGVzdCgpOw0KICAgICAgICAgICAgYWZ0dC5zZXRUZXN0ZmxvYXQoRmxvYXQu\nTUFYX1ZBTFVFKTsNCiAgICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAi\ndGVzdGZsb2F0ID0iLA0KICAgICAgICAgICAgICAgICAgICBuZXcgRmxvYXQo\nRmxvYXQuTUFYX1ZBTFVFKSk7DQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7DQogICAgICAgICAgICBidWcoZ2V0Q3VycmVudFBsYXRmb3JtKCks\nIDQ5NCwgZSwNCiAgICAgICAgICAgICAgICAgICAgIlNvbWUgZGF0YXN0b3Jl\ncyBjYW5ub3Qgc3RvcmUgRmxvYXQuTUFYX1ZBTFVFIik7DQogICAgICAgIH0N\nCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdEZsb2F0TWluKCkg\new0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgQWxsRmllbGRUeXBlc1Rl\nc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOw0KICAgICAgICAg\nICAgYWZ0dC5zZXRUZXN0ZmxvYXQoRmxvYXQuTUlOX1ZBTFVFKTsNCiAgICAg\nICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGZsb2F0ID0iLA0KICAg\nICAgICAgICAgICAgICAgICBuZXcgRmxvYXQoRmxvYXQuTUlOX1ZBTFVFKSk7\nDQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAg\nICBidWcoZ2V0Q3VycmVudFBsYXRmb3JtKCksIDQ5NCwgZSwNCiAgICAgICAg\nICAgICAgICAgICAgIlNvbWUgZGF0YWJhc2VzIGNhbm5vdCBzdG9yZSBGbG9h\ndC5NSU5fVkFMVUUiKTsNCiAgICAgICAgfSBjYXRjaCAoQXNzZXJ0aW9uRmFp\nbGVkRXJyb3IgZSkgew0KICAgICAgICAgICAgYnVnKGdldEN1cnJlbnRQbGF0\nZm9ybSgpLCA0OTQsIGUsDQogICAgICAgICAgICAgICAgICAgICJTb21lIGRh\ndGFiYXNlcyBjYW5ub3Qgc3RvcmUgRmxvYXQuTUlOX1ZBTFVFIik7DQogICAg\nICAgIH0NCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdEZsb2F0\nTmFOKCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgQWxsRmllbGRU\neXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgpOw0KICAg\nICAgICAgICAgYWZ0dC5zZXRUZXN0ZmxvYXQoRmxvYXQuTmFOKTsNCiAgICAg\nICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGZsb2F0ID0iLCBuZXcg\nRmxvYXQoRmxvYXQuTmFOKSk7DQogICAgICAgIH0gY2F0Y2ggKFRocm93YWJs\nZSB0KSB7DQogICAgICAgICAgICBidWcoNDYxLCB0LCAiTmFOIHByb2JsZW1z\nIik7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQg\ndGVzdEZsb2F0TmVnYXRpdmVJbmZpbml0eSgpIHsNCiAgICAgICAgdHJ5IHsN\nCiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxs\nRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgICAgIGFmdHQuc2V0VGVzdGZs\nb2F0KEZsb2F0Lk5FR0FUSVZFX0lORklOSVRZKTsNCiAgICAgICAgICAgIHNh\ndmVBbmRRdWVyeShhZnR0LCAidGVzdGZsb2F0ID0iLA0KICAgICAgICAgICAg\nICAgICAgICBuZXcgRmxvYXQoRmxvYXQuTkVHQVRJVkVfSU5GSU5JVFkpKTsN\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAg\nIGJ1ZyhnZXRDdXJyZW50UGxhdGZvcm0oKSwgNDk0LCBlLA0KICAgICAgICAg\nICAgICAgICAgICAiU29tZSBkYXRhYmFzZXMgY2Fubm90IHN0b3JlIEZsb2F0\nLk5FR0FUSVZFX0lORklOSVRZIik7DQogICAgICAgIH0NCiAgICB9DQogICAg\nDQogICAgcHVibGljIHZvaWQgdGVzdEZsb2F0UG9zdGl2aWVJbmZpbml0eSgp\nIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNU\nZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAg\nICAgIGFmdHQuc2V0VGVzdGZsb2F0KEZsb2F0LlBPU0lUSVZFX0lORklOSVRZ\nKTsNCiAgICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGZsb2F0\nID0iLA0KICAgICAgICAgICAgICAgICAgICBuZXcgRmxvYXQoRmxvYXQuUE9T\nSVRJVkVfSU5GSU5JVFkpKTsNCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsNCiAgICAgICAgICAgIGJ1ZyhnZXRDdXJyZW50UGxhdGZvcm0oKSwg\nNDk0LCBlLA0KICAgICAgICAgICAgICAgICAgICAiU29tZSBkYXRhYmFzZXMg\nY2Fubm90IHN0b3JlIEZsb2F0LlBPU0lUSVZFX0lORklOSVRZIik7DQogICAg\nICAgIH0NCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdERvdWJs\nZU1heCgpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIEFsbEZpZWxk\nVHlwZXNUZXN0IGFmdHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAg\nICAgICAgICAgIGFmdHQuc2V0VGVzdGRvdWJsZShEb3VibGUuTUFYX1ZBTFVF\nKTsNCiAgICAgICAgICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGRvdWJs\nZSA9IiwNCiAgICAgICAgICAgICAgICAgICAgbmV3IERvdWJsZShEb3VibGUu\nTUFYX1ZBTFVFKSk7DQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nDQogICAgICAgICAgICBidWcoZ2V0Q3VycmVudFBsYXRmb3JtKCksIDQ5NCwg\nZSwNCiAgICAgICAgICAgICAgICAgICAgIlNvbWUgZGF0YWJhc2VzIGNhbm5v\ndCBzdG9yZSBEb3VibGUuTUFYX1ZBTFVFIik7DQogICAgICAgIH0NCiAgICB9\nDQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdERvdWJsZU1pbigpIHsNCiAg\nICAgICAgdHJ5IHsNCiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFm\ndHQgPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgICAgIGFm\ndHQuc2V0VGVzdGRvdWJsZShEb3VibGUuTUlOX1ZBTFVFKTsNCiAgICAgICAg\nICAgIHNhdmVBbmRRdWVyeShhZnR0LCAidGVzdGRvdWJsZSA9IiwNCiAgICAg\nICAgICAgICAgICAgICAgbmV3IERvdWJsZShEb3VibGUuTUlOX1ZBTFVFKSk7\nDQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAg\nICBidWcoRW51bVNldC5vZihBYnN0cmFjdFRlc3RDYXNlLlBsYXRmb3JtLlBP\nU1RHUkVTUUwsDQogICAgICAgICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5Q\nbGF0Zm9ybS5TUUxTRVJWRVIsDQogICAgICAgICAgICAgICAgQWJzdHJhY3RU\nZXN0Q2FzZS5QbGF0Zm9ybS5PUkFDTEUsDQogICAgICAgICAgICAgICAgQWJz\ndHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5FTVBSRVNTLA0KICAgICAgICAgICAg\nICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uREIyLA0KICAgICAgICAg\nICAgICAgIEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uSU5GT1JNSVgsDQog\nICAgICAgICAgICAgICAgQWJzdHJhY3RUZXN0Q2FzZS5QbGF0Zm9ybS5ERVJC\nWSksIDQ5NCwgZSwNCiAgICAgICAgICAgICAgICAiU29tZSBkYXRhYmFzZXMg\nY2Fubm90IHN0b3JlIERvdWJsZS5NSU5fVkFMVUUiKTsNCiAgICAgICAgfSBj\nYXRjaCAoQXNzZXJ0aW9uRmFpbGVkRXJyb3IgZSkgew0KICAgICAgICAgICAg\nYnVnKEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uTVlTUUwsIDQ5NCwgZSwN\nCiAgICAgICAgICAgICAgICAgICAgIlNvbWUgZGF0YWJhc2VzIGNhbm5vdCBz\ndG9yZSBEb3VibGUuTUlOX1ZBTFVFIik7DQogICAgICAgIH0NCiAgICB9DQog\nICAgDQogICAgcHVibGljIHZvaWQgdGVzdERvdWJsZU5hTigpIHsNCiAgICAg\nICAgdHJ5IHsNCiAgICAgICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQg\nPSBuZXcgQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgICAgIGFmdHQu\nc2V0VGVzdGRvdWJsZShEb3VibGUuTmFOKTsNCiAgICAgICAgICAgIHNhdmVB\nbmRRdWVyeShhZnR0LCAidGVzdGRvdWJsZSA9IiwgbmV3IERvdWJsZShEb3Vi\nbGUuTmFOKSk7DQogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7DQog\nICAgICAgICAgICBidWcoNDYxLCB0LCAiTmFOIHByb2JsZW1zIik7DQogICAg\nICAgIH0NCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgdGVzdERvdWJs\nZU5lZ2F0aXZlSW5maW5pdHkoKSB7DQogICAgICAgIHRyeSB7DQogICAgICAg\nICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlw\nZXNUZXN0KCk7DQogICAgICAgICAgICBhZnR0LnNldFRlc3Rkb3VibGUoRG91\nYmxlLk5FR0FUSVZFX0lORklOSVRZKTsNCiAgICAgICAgICAgIHNhdmVBbmRR\ndWVyeShhZnR0LCAidGVzdGRvdWJsZSA9IiwNCiAgICAgICAgICAgICAgICAg\nICAgbmV3IERvdWJsZShEb3VibGUuTkVHQVRJVkVfSU5GSU5JVFkpKTsNCiAg\nICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsNCiAgICAgICAgICAgIGJ1\nZyg0NjEsIHQsICJpbmZpbml0eSBwcm9ibGVtcyIpOw0KICAgICAgICB9DQog\nICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3REb3VibGVQb3N0aXZp\nZUluZmluaXR5KCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgQWxs\nRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5ldyBBbGxGaWVsZFR5cGVzVGVzdCgp\nOw0KICAgICAgICAgICAgYWZ0dC5zZXRUZXN0ZG91YmxlKERvdWJsZS5QT1NJ\nVElWRV9JTkZJTklUWSk7DQogICAgICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0\ndCwgInRlc3Rkb3VibGUgPSIsDQogICAgICAgICAgICAgICAgICAgIG5ldyBE\nb3VibGUoRG91YmxlLlBPU0lUSVZFX0lORklOSVRZKSk7DQogICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSB0KSB7DQogICAgICAgICAgICBidWcoNDYxLCB0\nLCAiaW5maW5pdHkgcHJvYmxlbXMiKTsNCiAgICAgICAgfQ0KICAgIH0NCg0K\nICAgIHB1YmxpYyB2b2lkIHRlc3RCeXRlTWluKCkgew0KICAgICAgICBBbGxG\naWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3IEFsbEZpZWxkVHlwZXNUZXN0KCk7\nDQogICAgICAgIGFmdHQuc2V0VGVzdGJ5dGUoQnl0ZS5NSU5fVkFMVUUpOw0K\nICAgICAgICB0cnkgew0KICAgICAgICAgICAgc2F2ZUFuZFF1ZXJ5KGFmdHQs\nICJ0ZXN0Ynl0ZSA9IiwgbmV3IEJ5dGUoQnl0ZS5NSU5fVkFMVUUpKTsNCiAg\nICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsNCiAgICAgICAgICAgIC8v\nYnVnKEFic3RyYWN0VGVzdENhc2UuUGxhdGZvcm0uRU1QUkVTUywgODg5LCB0\nLCAiRW1wcmVzcyBjYW5ub3Qgc3RvcmUgbWluIHZhbHVlcyIpOw0KICAgICAg\nICAgICAgQXNzZXJ0LmZhaWwoDQogICAgICAgICAgICAgICAgIkV4Y2VwdGlv\nbiB3YXMgdGhyb3duIHdoaWxlIHN0b3JpbmcgQnl0ZS5NSU5fVkFMVUUgOiBc\nbiIgKw0KICAgICAgICAgICAgICAgICAgICBnZXRTdGFja1RyYWNlKHQpKTsN\nCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RCeXRl\nTWF4KCkgew0KICAgICAgICBBbGxGaWVsZFR5cGVzVGVzdCBhZnR0ID0gbmV3\nIEFsbEZpZWxkVHlwZXNUZXN0KCk7DQogICAgICAgIGFmdHQuc2V0VGVzdGJ5\ndGUoQnl0ZS5NQVhfVkFMVUUpOw0KICAgICAgICBzYXZlQW5kUXVlcnkoYWZ0\ndCwgInRlc3RieXRlID0iLCBuZXcgQnl0ZShCeXRlLk1BWF9WQUxVRSkpOw0K\nICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0WmVyb0JpZ0ludGVn\nZXIoKSB7DQogICAgICAgIEFsbEZpZWxkVHlwZXNUZXN0IGFmdHQgPSBuZXcg\nQWxsRmllbGRUeXBlc1Rlc3QoKTsNCiAgICAgICAgYWZ0dC5zZXRUZXN0Qmln\nSW50ZWdlcihCaWdJbnRlZ2VyLlpFUk8pOw0KICAgICAgICBzYXZlQW5kUXVl\ncnkoYWZ0dCwgInRlc3RCaWdJbnRlZ2VyID0iLCBCaWdJbnRlZ2VyLlpFUk8p\nOw0KICAgIH0NCiAgICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25lQmlnSW50\nZWdlcigpIHsNCiAgICAgICAgQWxsRmllbGRUeXBlc1Rlc3QgYWZ0dCA9IG5l\ndyBBbGxGaWVsZFR5cGVzVGVzdCgpOw0KICAgICAgICBhZnR0LnNldFRlc3RC\naWdJbnRlZ2VyKEJpZ0ludGVnZXIuT05FKTsNCiAgICAgICAgc2F2ZUFuZFF1\nZXJ5KGFmdHQsICJ0ZXN0QmlnSW50ZWdlciA9IiwgQmlnSW50ZWdlci5PTkUp\nOw0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZvaWQgc2F2ZUFuZFF1ZXJ5\nKE9iamVjdCBvYmosIFN0cmluZyBxdWVyeSwgT2JqZWN0IHBhcmFtKSB7DQog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oZmFsc2Us\nIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIHBtLnBl\ncnNpc3Qob2JqKTsNCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAgICBlbmRF\nbShwbSk7DQoNCiAgICAgICAgcG0gPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0K\nLy8gICAgICAgIFF1ZXJ5IHEgPSBwbS5uZXdRdWVyeShvYmouZ2V0Q2xhc3Nx\ndWVyeSk7DQovLyAgICAgICAgcS5kZWNsYXJlUGFyYW1ldGVycygiT2JqZWN0\nIHBhcmFtIik7DQovLyAgICAgICAgQ29sbGVjdGlvbiBjID0gKENvbGxlY3Rp\nb24pIHEuZXhlY3V0ZShwYXJhbSk7DQogICAgICAgIE9wZW5KUEFRdWVyeSBx\nID0gcG0uY3JlYXRlUXVlcnkoDQogICAgICAgICAgICAiU0VMRUNUIGEgRlJP\nTSBBbGxGaWVsZFR5cGVzVGVzdCBhIFdIRVJFIGEuIiArIHF1ZXJ5ICsgIiAi\nICsgcGFyYW0pOw0KICAgICAgICBDb2xsZWN0aW9uIGMgPSAoQ29sbGVjdGlv\nbikgcS5nZXRSZXN1bHRMaXN0KCk7DQogICAgICAgIGFzc2VydFNpemUoMSwg\nYyk7DQogICAgICAgIHBtLmNsb3NlKCk7DQogICAgfQ0KfQ0KDQoNCg==\n","encoding":"base64"}

