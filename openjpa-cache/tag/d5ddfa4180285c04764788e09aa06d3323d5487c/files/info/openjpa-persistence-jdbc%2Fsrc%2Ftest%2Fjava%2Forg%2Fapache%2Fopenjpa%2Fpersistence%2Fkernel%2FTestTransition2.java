{"sha":"2ac792e6b7d5a0b60db873c65dec81d009c2306b","node_id":"MDQ6QmxvYjIwNjM2NDoyYWM3OTJlNmI3ZDVhMGI2MGRiODczYzY1ZGVjODFkMDA5YzIzMDZi","size":27842,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2ac792e6b7d5a0b60db873c65dec81d009c2306b","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2Uua2VybmVsOw0KDQoNCg0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMuTW9kUnVu\ndGltZVRlc3QxOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5rZXJuZWwuY29tbW9uLmFwcHMuTW9kUnVudGltZVRlc3QyOw0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5rZXJuZWwuY29t\nbW9uLmFwcHMuUGVyc2lzdGVuY2VBd2FyZTsNCg0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5lbmhhbmNlLlBlcnNpc3RlbmNlQ2FwYWJsZTsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0\neU1hbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuUmVzdG9yZVN0YXRlVHlwZTsNCg0KcHVibGlj\nIGNsYXNzIFRlc3RUcmFuc2l0aW9uMiBleHRlbmRzIEJhc2VLZXJuZWxUZXN0\nIHsNCg0KICAgIHByaXZhdGUgYm9vbGVhbiBzdXBwb3J0c1Blc3NpbWlzdGlj\nID0gdHJ1ZTsNCg0KICAgIHByaXZhdGUgaW50IF9pZCA9IDA7DQoNCiAgICAv\nKioNCiAgICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIFRlc3RUcmFu\nc2l0aW9ucw0KICAgICAqLw0KICAgIHB1YmxpYyBUZXN0VHJhbnNpdGlvbjIo\nKSB7DQogICAgfQ0KDQogICAgcHVibGljIFRlc3RUcmFuc2l0aW9uMihTdHJp\nbmcgbmFtZSkgew0KICAgICAgICBzdXBlcihuYW1lKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gew0KICAg\nICAgICB0cnkgew0KICAgICAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\ncG0gPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0KICAgICAgICAgICAgc3VwcG9y\ndHNQZXNzaW1pc3RpYyA9ICFwbS5nZXRPcHRpbWlzdGljKCk7DQogICAgICAg\nICAgICBwbS5jbG9zZSgpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChF\neGNlcHRpb24gZSkgew0KICAgICAgICAgICAgc3VwcG9ydHNQZXNzaW1pc3Rp\nYyA9IGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPSBnZXRQTSgpOw0KICAgICAgICBzdGFydFR4KHBtKTsN\nCg0KICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9IGNyZWF0ZVRlc3QyKCk7\nDQogICAgICAgIHBtLnBlcnNpc3QoYik7DQogICAgICAgIF9pZCA9IGIuZ2V0\nSWQoKTsNCg0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGVuZEVtKHBt\nKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUZXN0cyBiYXNpYyBqZG8g\nZmxhZyB0cmFuc2l0aW9ucyBmcm9tIHRyYW5zaWVudCB0bw0KICAgICAqIHBl\ncnNpc3RlbnQtdHJhbnNhY3Rpb25hbCBhbmQgYmFjayB0byB0cmFuc2llbnQg\nYWZ0ZXIgcm9sbGJhY2suDQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVz\ndEZsYWdUcmFuc2l0aW9uczEoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9u\nIHsNCiAgICAgICAgaWYgKCFzdXBwb3J0c1Blc3NpbWlzdGljKQ0KICAgICAg\nICAgICAgcmV0dXJuOw0KDQogICAgICAgIE1vZFJ1bnRpbWVUZXN0MiBiID0g\nY3JlYXRlVGVzdDIoKTsNCiAgICAgICAgYXNzZXJ0VHJhbnNpZW50KGIpOw0K\nICAgICAgICBhc3NlcnRUcmFuc2llbnQoYi5nZXRTZWxmT25lT25lKCkpOw0K\nDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oZmFs\nc2UsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIHBt\nLnBlcnNpc3QoYik7DQoNCiAgICAgICAgYXNzZXJ0UGVyc2lzdGVudChiLCB0\ncnVlLCB0cnVlLCBmYWxzZSwgdHJ1ZSk7DQoNCiAgICAgICAgcm9sbGJhY2tU\neChwbSk7DQoNCiAgICAgICAgYXNzZXJ0VHJhbnNpZW50KGIpOw0KICAgICAg\nICBhc3NlcnRUcmFuc2llbnQoYi5nZXRTZWxmT25lT25lKCkpOw0KICAgICAg\nICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMg\nYmFzaWMgamRvIGZsYWcgdHJhbnNpdGlvbnMgZnJvbSB0cmFuc2llbnQgdG8N\nCiAgICAgKiBwZXJzaXN0ZW50LXRyYW5zYWN0aW9uYWwgdG8gcGVyc2lzdGVu\ndC1ub250cmFuc2FjdGlvbmFsIGFmdGVyIGNvbW1pdC4NCiAgICAgKi8NCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RmxhZ1RyYW5zaXRpb25zMigpDQogICAgICAg\nIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBpZiAoIXN1cHBvcnRzUGVz\nc2ltaXN0aWMpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgTW9k\nUnVudGltZVRlc3QyIGIgPSBjcmVhdGVUZXN0MigpOw0KICAgICAgICBhc3Nl\ncnRUcmFuc2llbnQoYik7DQogICAgICAgIGFzc2VydFRyYW5zaWVudChiLmdl\ndFNlbGZPbmVPbmUoKSk7DQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXIgcG0gPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0KICAgICAgICBzdGFydFR4\nKHBtKTsNCiAgICAgICAgcG0ucGVyc2lzdChiKTsNCg0KICAgICAgICBhc3Nl\ncnRQZXJzaXN0ZW50KGIsIHRydWUsIHRydWUsIGZhbHNlLCB0cnVlKTsNCg0K\nICAgICAgICBlbmRUeChwbSk7DQoNCiAgICAgICAgYXNzZXJ0UGVyc2lzdGVu\ndChiLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7DQogICAgICAgIGFz\nc2VydFBlcnNpc3RlbnQoYi5nZXRTZWxmT25lT25lKCksIGZhbHNlLCBmYWxz\nZSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgZW5kRW0ocG0pOw0KICAgIH0N\nCg0KICAgIC8qKg0KICAgICAqIFRlc3RzIGJhc2ljIGpkbyBmbGFnIHRyYW5z\naXRpb25zIHdoZW4gZmluZGluZyBhIHRyYW5zYWN0aW9uYWwgaW5zdGFuY2Ug\nYnkNCiAgICAgKiBpZCwgdGhlbiBjb21taXR0aW5nLg0KICAgICAqLw0KICAg\nIHB1YmxpYyB2b2lkIHRlc3RGbGFnVHJhbnNpdGlvbnMzKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7DQogICAgICAgIGlmICghc3VwcG9ydHNQZXNzaW1pc3RpYykN\nCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9IGdldFBNKGZhbHNlLCBmYWxzZSk7DQogICAgICAgIHN0\nYXJ0VHgocG0pOw0KDQogICAgICAgIE1vZFJ1bnRpbWVUZXN0MiBiID0NCiAg\nICAgICAgICAgIChNb2RSdW50aW1lVGVzdDIpIHBtLmZpbmQoTW9kUnVudGlt\nZVRlc3QyLmNsYXNzLCBfaWQpOw0KICAgICAgICBhc3NlcnRQZXJzaXN0ZW50\nKGIsIHRydWUsIGZhbHNlLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICBhc3Nl\ncnRQZXJzaXN0ZW50KGIuZ2V0U2VsZk9uZU9uZSgpLCB0cnVlLCBmYWxzZSwg\nZmFsc2UsIGZhbHNlKTsNCg0KICAgICAgICBlbmRUeChwbSk7DQoNCiAgICAg\nICAgYXNzZXJ0UGVyc2lzdGVudChiLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBm\nYWxzZSk7DQogICAgICAgIGFzc2VydFBlcnNpc3RlbnQoYi5nZXRTZWxmT25l\nT25lKCksIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTsNCiAgICAgICAg\nZW5kRW0ocG0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRlc3RzIGJh\nc2ljIGpkbyBmbGFnIHRyYW5zaXRpb25zIHdoZW4gZmluZGluZyBhIHRyYW5z\nYWN0aW9uYWwNCiAgICAgKiBpbnN0YW5jZSBieSBpZCwgdGhlbiByb2xsaW5n\nIGJhY2suDQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVzdEZsYWdUcmFu\nc2l0aW9uczQoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAg\nICAgaWYgKCFzdXBwb3J0c1Blc3NpbWlzdGljKQ0KICAgICAgICAgICAgcmV0\ndXJuOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0\nUE0oZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQoNCiAg\nICAgICAgTW9kUnVudGltZVRlc3QyIGIgPQ0KICAgICAgICAgICAgKE1vZFJ1\nbnRpbWVUZXN0MikgcG0uZmluZChNb2RSdW50aW1lVGVzdDIuY2xhc3MsIF9p\nZCk7DQogICAgICAgIGFzc2VydFBlcnNpc3RlbnQoYiwgdHJ1ZSwgZmFsc2Us\nIGZhbHNlLCBmYWxzZSk7DQogICAgICAgIGFzc2VydFBlcnNpc3RlbnQoYi5n\nZXRTZWxmT25lT25lKCksIHRydWUsIGZhbHNlLCBmYWxzZSwgZmFsc2UpOw0K\nDQogICAgICAgIHJvbGxiYWNrVHgocG0pOw0KICAgICAgICAvL3BtLmdldFRy\nYW5zYWN0aW9uKCkucm9sbGJhY2soKTsNCg0KICAgICAgICBhc3NlcnRQZXJz\naXN0ZW50KGIsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTsNCiAgICAg\nICAgYXNzZXJ0UGVyc2lzdGVudChiLmdldFNlbGZPbmVPbmUoKSwgZmFsc2Us\nIGZhbHNlLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICBlbmRFbShwbSk7DQog\nICAgfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMgamRvIGZsYWcg\ndHJhbnNpdGlvbnMgd2hlbiBmaW5kaW5nIGEgbm9uLXRyYW5zYWN0aW9uYWwN\nCiAgICAgKiBpbnN0YW5jZSBieSBpZC4NCiAgICAgKi8NCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RmxhZ1RyYW5zaXRpb25zNSgpDQogICAgICAgIHRocm93cyBF\neGNlcHRpb24gew0KICAgICAgICBpZiAoIXN1cHBvcnRzUGVzc2ltaXN0aWMp\nDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgcG0gPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0KICAgICAgICBN\nb2RSdW50aW1lVGVzdDIgYiA9DQogICAgICAgICAgICAoTW9kUnVudGltZVRl\nc3QyKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0Mi5jbGFzcywgX2lkKTsNCg0K\nICAgICAgICBhc3NlcnRQZXJzaXN0ZW50KGIsIGZhbHNlLCBmYWxzZSwgZmFs\nc2UsIGZhbHNlKTsNCiAgICAgICAgYXNzZXJ0UGVyc2lzdGVudChiLmdldFNl\nbGZPbmVPbmUoKSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpOw0KDQog\nICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBU\nZXN0cyBiYXNpYyBqZG8gZmxhZyB0cmFuc2l0aW9ucyBmcm9tIHBlcnNpc3Rl\nbnQtdHJhbnNhY3Rpb25hbA0KICAgICAqIHRvIHRyYW5zaWVudCBhZnRlciBk\nZWxldGUgYW5kIGNvbW1pdC4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RmxhZ1RyYW5zaXRpb25zNigpDQogICAgICAgIHRocm93cyBFeGNlcHRp\nb24gew0KICAgICAgICBpZiAoIXN1cHBvcnRzUGVzc2ltaXN0aWMpDQogICAg\nICAgICAgICByZXR1cm47DQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXIgcG0gPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0KICAgICAgICBzdGFydFR4\nKHBtKTsNCg0KICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9DQogICAgICAg\nICAgICAoTW9kUnVudGltZVRlc3QyKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0\nMi5jbGFzcywgX2lkKTsNCiAgICAgICAgTW9kUnVudGltZVRlc3QxIHBhcmVu\ndCA9IGIuZ2V0U2VsZk9uZU9uZSgpOw0KICAgICAgICBwbS5yZW1vdmUoYik7\nDQogICAgICAgIGFzc2VydFBlcnNpc3RlbnQoYiwgdHJ1ZSwgZmFsc2UsIHRy\ndWUsIHRydWUpOw0KICAgICAgICBhc3NlcnRQZXJzaXN0ZW50KHBhcmVudCwg\ndHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7DQoNCiAgICAgICAgZW5kVHgo\ncG0pOw0KDQogICAgICAgIGFzc2VydFRyYW5zaWVudChiKTsNCiAgICAgICAg\nYXNzZXJ0UGVyc2lzdGVudChwYXJlbnQsIGZhbHNlLCBmYWxzZSwgZmFsc2Us\nIGZhbHNlKTsNCiAgICAgICAgZW5kRW0ocG0pOw0KICAgIH0NCg0KICAgIC8q\nKg0KICAgICAqIFRlc3RzIGJhc2ljIGpkbyBmbGFnIHRyYW5zaXRpb25zIGZy\nb20gcGVyc2lzdGVudC10cmFuc2FjdGlvbmFsDQogICAgICogdG8gcGVyc2lz\ndGVudC1ub250cmFuc2FjdGlvbmFsIGFmdGVyIGRlbGV0ZSBhbmQgcm9sbGJh\nY2suDQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVzdEZsYWdUcmFuc2l0\naW9uczcoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAg\naWYgKCFzdXBwb3J0c1Blc3NpbWlzdGljKQ0KICAgICAgICAgICAgcmV0dXJu\nOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0o\nZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQoNCiAgICAg\nICAgTW9kUnVudGltZVRlc3QyIGIgPQ0KICAgICAgICAgICAgKE1vZFJ1bnRp\nbWVUZXN0MikgcG0uZmluZChNb2RSdW50aW1lVGVzdDIuY2xhc3MsIF9pZCk7\nDQogICAgICAgIE1vZFJ1bnRpbWVUZXN0MSBwYXJlbnQgPSBiLmdldFNlbGZP\nbmVPbmUoKTsNCiAgICAgICAgcG0ucmVtb3ZlKGIpOw0KICAgICAgICBhc3Nl\ncnRQZXJzaXN0ZW50KGIsIHRydWUsIGZhbHNlLCB0cnVlLCB0cnVlKTsNCiAg\nICAgICAgYXNzZXJ0UGVyc2lzdGVudChwYXJlbnQsIHRydWUsIGZhbHNlLCBm\nYWxzZSwgZmFsc2UpOw0KDQogICAgICAgIHJvbGxiYWNrVHgocG0pOw0KDQog\nICAgICAgIGFzc2VydFBlcnNpc3RlbnQoYiwgZmFsc2UsIGZhbHNlLCBmYWxz\nZSwgZmFsc2UpOw0KICAgICAgICBhc3NlcnRQZXJzaXN0ZW50KHBhcmVudCwg\nZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpOw0KICAgICAgICBlbmRFbShw\nbSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMgc3Rh\ndGUgdHJhbnNpdGlvbnMgZnJvbSB0cmFuc2llbnQgdG8NCiAgICAgKiBwZXJz\naXN0ZW50LXRyYW5zYWN0aW9uYWwgYW5kIGJhY2sgdG8gdHJhbnNpZW50IGFm\ndGVyIHJvbGxiYWNrLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHRlc3RT\ndGF0ZVRyYW5zaXRpb25zMSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24g\new0KICAgICAgICBpZiAoIXN1cHBvcnRzUGVzc2ltaXN0aWMpDQogICAgICAg\nICAgICByZXR1cm47DQoNCiAgICAgICAgTW9kUnVudGltZVRlc3QyIGIgPSBj\ncmVhdGVUZXN0MigpOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nIHBtID0gZ2V0UE0oZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChw\nbSk7DQoNCiAgICAgICAgcG0ucGVyc2lzdChiKTsNCiAgICAgICAgcG0ucGVy\nc2lzdChiLmdldFNlbGZPbmVPbmUoKSk7DQogICAgICAgIGFzc2VydFRlc3Qy\nT3JpZyhiKTsNCiAgICAgICAgY2hhbmdlVGVzdDIoYik7DQoNCiAgICAgICAg\ncm9sbGJhY2tUeChwbSk7DQoNCiAgICAgICAgYXNzZXJ0VGVzdDJPcmlnKGIp\nOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgLyoqDQogICAg\nICogVGVzdHMgYmFzaWMgc3RhdGUgdHJhbnNpdGlvbnMgZnJvbSB0cmFuc2ll\nbnQgdG8NCiAgICAgKiBwZXJzaXN0ZW50LXRyYW5zYWN0aW9uYWwgdG8gcGVy\nc2lzdGVudC1ub250cmFuc2FjdGlvbmFsIGFmdGVyIGNvbW1pdC4NCiAgICAg\nKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RhdGVUcmFuc2l0aW9uczIoKQ0K\nICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgaWYgKCFzdXBw\nb3J0c1Blc3NpbWlzdGljKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAg\nICAgIE1vZFJ1bnRpbWVUZXN0MiBiID0gY3JlYXRlVGVzdDIoKTsNCg0KICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKGZhbHNlLCBm\nYWxzZSk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KDQogICAgICAgIHBtLnBl\ncnNpc3QoYik7DQogICAgICAgIGFzc2VydFRlc3QyT3JpZyhiKTsNCiAgICAg\nICAgY2hhbmdlVGVzdDIoYik7DQoNCiAgICAgICAgZW5kVHgocG0pOw0KDQog\nICAgICAgIGFzc2VydFRlc3QyQ2hhbmdlZChiLCBmYWxzZSk7DQogICAgICAg\nIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUZXN0cyBi\nYXNpYyBzdGF0ZSB0cmFuc2l0aW9ucyB3aGVuIGZpbmRpbmcgYSB0cmFuc2Fj\ndGlvbmFsDQogICAgICogaW5zdGFuY2UgYnkgaWQsIHRoZW4gY29tbWl0dGlu\nZy4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RhdGVUcmFuc2l0\naW9uczMoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAg\naWYgKCFzdXBwb3J0c1Blc3NpbWlzdGljKQ0KICAgICAgICAgICAgcmV0dXJu\nOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0o\nZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQoNCiAgICAg\nICAgTW9kUnVudGltZVRlc3QyIGIgPQ0KICAgICAgICAgICAgKE1vZFJ1bnRp\nbWVUZXN0MikgcG0uZmluZChNb2RSdW50aW1lVGVzdDIuY2xhc3MsIF9pZCk7\nDQogICAgICAgIGNoYW5nZVRlc3QyKGIpOw0KDQogICAgICAgIGVuZFR4KHBt\nKTsNCg0KICAgICAgICBhc3NlcnRUZXN0MkNoYW5nZWQoYiwgZmFsc2UpOw0K\nICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog\nVGVzdHMgYmFzaWMgc3RhdGUgdHJhbnNpdGlvbnMgd2hlbiBmaW5kaW5nIGEg\ndHJhbnNhY3Rpb25hbA0KICAgICAqIGluc3RhbmNlIGJ5IGlkLCB0aGVuIGNv\nbW1pdHRpbmcuDQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVzdFN0YXRl\nVHJhbnNpdGlvbnMzYSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0K\nICAgICAgICBpZiAoIXN1cHBvcnRzUGVzc2ltaXN0aWMpDQogICAgICAgICAg\nICByZXR1cm47DQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0g\nPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0KICAgICAgICBzdGFydFR4KHBtKTsN\nCg0KICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9DQogICAgICAgICAgICAo\nTW9kUnVudGltZVRlc3QyKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0Mi5jbGFz\ncywgX2lkKTsNCiAgICAgICAgY2hhbmdlVGVzdDIoYik7DQoNCiAgICAgICAg\nZW5kVHgocG0pOw0KDQogICAgICAgIGFzc2VydFRlc3QyQ2hhbmdlZChiLCBm\nYWxzZSk7DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBUZXN0cyBiYXNpYyBzdGF0ZSB0cmFuc2l0aW9ucyB3aGVuIGZp\nbmRpbmcgYSB0cmFuc2FjdGlvbmFsDQogICAgICogaW5zdGFuY2UgYnkgaWQs\nIHRoZW4gcm9sbGluZyBiYWNrLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lk\nIHRlc3RTdGF0ZVRyYW5zaXRpb25zNCgpDQogICAgICAgIHRocm93cyBFeGNl\ncHRpb24gew0KICAgICAgICBpZiAoIXN1cHBvcnRzUGVzc2ltaXN0aWMpDQog\nICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1h\nbmFnZXIgcG0gPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0KICAgICAgICBzdGFy\ndFR4KHBtKTsNCg0KICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9DQogICAg\nICAgICAgICAoTW9kUnVudGltZVRlc3QyKSBwbS5maW5kKE1vZFJ1bnRpbWVU\nZXN0Mi5jbGFzcywgX2lkKTsNCiAgICAgICAgYXNzZXJ0VGVzdDJPcmlnKGIp\nOw0KICAgICAgICBjaGFuZ2VUZXN0MihiKTsNCg0KICAgICAgICByb2xsYmFj\na1R4KHBtKTsNCg0KICAgICAgICBhc3NlcnRUZXN0Mk9yaWcoYik7DQogICAg\nICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUZXN0\ncyBiYXNpYyBzdGF0ZSB0cmFuc2l0aW9ucyB3aGVuIGZpbmRpbmcgYSB0cmFu\nc2FjdGlvbmFsDQogICAgICogaW5zdGFuY2UgYnkgaWQsIHRoZW4gcm9sbGlu\nZyBiYWNrLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHRlc3RTdGF0ZVRy\nYW5zaXRpb25zNGEoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAg\nICAgICAgaWYgKCFzdXBwb3J0c1Blc3NpbWlzdGljKQ0KICAgICAgICAgICAg\ncmV0dXJuOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0g\nZ2V0UE0oZmFsc2UsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQoN\nCiAgICAgICAgTW9kUnVudGltZVRlc3QyIGIgPQ0KICAgICAgICAgICAgKE1v\nZFJ1bnRpbWVUZXN0MikgcG0uZmluZChNb2RSdW50aW1lVGVzdDIuY2xhc3Ms\nIF9pZCk7DQogICAgICAgIGFzc2VydFRlc3QyT3JpZyhiKTsNCiAgICAgICAg\nY2hhbmdlVGVzdDIoYik7DQoNCiAgICAgICAgcm9sbGJhY2tUeChwbSk7DQoN\nCiAgICAgICAgYXNzZXJ0VGVzdDJPcmlnKGIpOw0KICAgICAgICBlbmRFbShw\nbSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMgc3Rh\ndGUgdHJhbnNpdGlvbnMgZnJvbSBwZXJzaXN0ZW50LXRyYW5zYWN0aW9uYWwN\nCiAgICAgKiB0byB0cmFuc2llbnQgYWZ0ZXIgZGVsZXRlIGFuZCBjb21taXQu\nDQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVzdFN0YXRlVHJhbnNpdGlv\nbnM1KCkNCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIGlm\nICghc3VwcG9ydHNQZXNzaW1pc3RpYykNCiAgICAgICAgICAgIHJldHVybjsN\nCg0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKGZh\nbHNlLCBmYWxzZSk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KDQogICAgICAg\nIE1vZFJ1bnRpbWVUZXN0MiBiID0NCiAgICAgICAgICAgIChNb2RSdW50aW1l\nVGVzdDIpIHBtLmZpbmQoTW9kUnVudGltZVRlc3QyLmNsYXNzLCBfaWQpOw0K\nICAgICAgICBNb2RSdW50aW1lVGVzdDEgcGFyZW50ID0gYi5nZXRTZWxmT25l\nT25lKCk7DQogICAgICAgIGFzc2VydE5vdE51bGwoInBhcmVudCBpcyBudWxs\nIiwgcGFyZW50KTsNCiAgICAgICAgcG0ucmVtb3ZlKGIpOw0KDQogICAgICAg\nIGVuZFR4KHBtKTsNCg0KICAgICAgICAvLyBwYXJlbnQgc2hvdWxkIGJlIHZh\nbGlkDQogICAgICAgIGFzc2VydEVxdWFscygiUEFSRU5UIiwgcGFyZW50Lmdl\ndFN0cmluZ0ZpZWxkKCkpOw0KDQogICAgICAgIC8vICdiJyBzaG91bGQgYmUg\nY2xlYXJlZA0KICAgICAgICBhc3NlcnROdWxsKGIuZ2V0U3RyaW5nRmllbGQo\nKSk7DQogICAgICAgIGFzc2VydEVxdWFscygwLCBiLmdldEludEZpZWxkKCkp\nOw0KICAgICAgICBhc3NlcnROdWxsKGIuZ2V0U2VsZk9uZU9uZSgpKTsNCiAg\nICB9DQoNCiAgICAvKioNCiAgICAgKiBUZXN0cyBiYXNpYyBzdGF0ZSB0cmFu\nc2l0aW9ucyBmcm9tIHBlcnNpc3RlbnQtdHJhbnNhY3Rpb25hbA0KICAgICAq\nIHRvIHBlcnNpc3RlbnQtbm9udHJhbnNhY3Rpb25hbCBhZnRlciBkZWxldGUg\nYW5kIHJvbGxiYWNrLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHRlc3RT\ndGF0ZVRyYW5zaXRpb25zNigpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24g\new0KICAgICAgICBpZiAoIXN1cHBvcnRzUGVzc2ltaXN0aWMpDQogICAgICAg\nICAgICByZXR1cm47DQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\ncG0gPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0KICAgICAgICBzdGFydFR4KHBt\nKTsNCg0KICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9DQogICAgICAgICAg\nICAoTW9kUnVudGltZVRlc3QyKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0Mi5j\nbGFzcywgX2lkKTsNCiAgICAgICAgYXNzZXJ0VGVzdDJPcmlnKGIpOw0KICAg\nICAgICBwbS5yZW1vdmUoYik7DQoNCiAgICAgICAgcm9sbGJhY2tUeChwbSk7\nDQoNCiAgICAgICAgYXNzZXJ0VGVzdDJPcmlnKGIpOw0KICAgICAgICBlbmRF\nbShwbSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMg\nc3RhdGUgdHJhbnNpdGlvbnMgZnJvbSB0cmFuc2llbnQgdG8NCiAgICAgKiBw\nZXJzaXN0ZW50LXRyYW5zYWN0aW9uYWwgYW5kIGJhY2sgdG8gdHJhbnNpZW50\nIGFmdGVyIHJvbGxiYWNrLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHRl\nc3RPcHRTdGF0ZVRyYW5zaXRpb25zMSgpDQogICAgICAgIHRocm93cyBFeGNl\ncHRpb24gew0KICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9IGNyZWF0ZVRl\nc3QyKCk7DQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBn\nZXRQTSh0cnVlLCBmYWxzZSk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KDQog\nICAgICAgIHBtLnBlcnNpc3QoYik7DQogICAgICAgIHBtLnBlcnNpc3QoYi5n\nZXRTZWxmT25lT25lKCkpOw0KICAgICAgICBhc3NlcnRUZXN0Mk9yaWcoYik7\nDQogICAgICAgIGNoYW5nZVRlc3QyKGIpOw0KDQogICAgICAgIHJvbGxiYWNr\nVHgocG0pOw0KDQogICAgICAgIGFzc2VydFRlc3QyT3JpZyhiKTsNCiAgICAg\nICAgZW5kRW0ocG0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRlc3Rz\nIGJhc2ljIHN0YXRlIHRyYW5zaXRpb25zIGZyb20gdHJhbnNpZW50IHRvDQog\nICAgICogcGVyc2lzdGVudC10cmFuc2FjdGlvbmFsIHRvIHBlcnNpc3RlbnQt\nbm9udHJhbnNhY3Rpb25hbCBhZnRlciBjb21taXQuDQogICAgICovDQogICAg\ncHVibGljIHZvaWQgdGVzdE9wdFN0YXRlVHJhbnNpdGlvbnMyKCkNCiAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIE1vZFJ1bnRpbWVUZXN0\nMiBiID0gY3JlYXRlVGVzdDIoKTsNCg0KICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBwbSA9IGdldFBNKHRydWUsIGZhbHNlKTsNCiAgICAgICAgc3Rh\ncnRUeChwbSk7DQoNCiAgICAgICAgcG0ucGVyc2lzdChiKTsNCiAgICAgICAg\nYXNzZXJ0VGVzdDJPcmlnKGIpOw0KICAgICAgICBjaGFuZ2VUZXN0MihiKTsN\nCg0KICAgICAgICBlbmRUeChwbSk7DQoNCiAgICAgICAgYXNzZXJ0VGVzdDJD\naGFuZ2VkKGIsIGZhbHNlKTsNCiAgICAgICAgZW5kRW0ocG0pOw0KICAgIH0N\nCg0KICAgIC8qKg0KICAgICAqIFRlc3RzIGJhc2ljIHN0YXRlIHRyYW5zaXRp\nb25zIHdoZW4gZmluZGluZyBhIHRyYW5zYWN0aW9uYWwNCiAgICAgKiBpbnN0\nYW5jZSBieSBpZCwgdGhlbiBjb21taXR0aW5nLg0KICAgICAqLw0KICAgIHB1\nYmxpYyB2b2lkIHRlc3RPcHRTdGF0ZVRyYW5zaXRpb25zMygpDQogICAgICAg\nIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFu\nYWdlciBwbSA9IGdldFBNKHRydWUsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRU\neChwbSk7DQoNCiAgICAgICAgTW9kUnVudGltZVRlc3QyIGIgPQ0KICAgICAg\nICAgICAgKE1vZFJ1bnRpbWVUZXN0MikgcG0uZmluZChNb2RSdW50aW1lVGVz\ndDIuY2xhc3MsIF9pZCk7DQogICAgICAgIGFzc2VydFRlc3QyT3JpZyhiKTsN\nCiAgICAgICAgY2hhbmdlVGVzdDIoYik7DQoNCiAgICAgICAgZW5kVHgocG0p\nOw0KDQogICAgICAgIGFzc2VydFRlc3QyQ2hhbmdlZChiLCBmYWxzZSk7DQog\nICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBU\nZXN0cyBiYXNpYyBzdGF0ZSB0cmFuc2l0aW9ucyB3aGVuIGZpbmRpbmcgYSB0\ncmFuc2FjdGlvbmFsDQogICAgICogaW5zdGFuY2UgYnkgaWQsIHRoZW4gcm9s\nbGluZyBiYWNrLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHRlc3RPcHRT\ndGF0ZVRyYW5zaXRpb25zNCgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24g\new0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKHRy\ndWUsIGZhbHNlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQoNCiAgICAgICAg\nTW9kUnVudGltZVRlc3QyIGIgPQ0KICAgICAgICAgICAgKE1vZFJ1bnRpbWVU\nZXN0MikgcG0uZmluZChNb2RSdW50aW1lVGVzdDIuY2xhc3MsIF9pZCk7DQog\nICAgICAgIGFzc2VydFRlc3QyT3JpZyhiKTsNCiAgICAgICAgY2hhbmdlVGVz\ndDIoYik7DQoNCiAgICAgICAgcm9sbGJhY2tUeChwbSk7DQoNCiAgICAgICAg\nYXNzZXJ0VGVzdDJPcmlnKGIpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAg\nfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMgc3RhdGUgdHJhbnNp\ndGlvbnMgZnJvbSBwZXJzaXN0ZW50LXRyYW5zYWN0aW9uYWwNCiAgICAgKiB0\nbyB0cmFuc2llbnQgYWZ0ZXIgZGVsZXRlIGFuZCBjb21taXQuDQogICAgICov\nDQogICAgcHVibGljIHZvaWQgdGVzdE9wdFN0YXRlVHJhbnNpdGlvbnM1KCkN\nCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0odHJ1ZSwgZmFsc2UpOw0KICAgICAg\nICBzdGFydFR4KHBtKTsNCg0KICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9\nDQogICAgICAgICAgICAoTW9kUnVudGltZVRlc3QyKSBwbS5maW5kKE1vZFJ1\nbnRpbWVUZXN0Mi5jbGFzcywgX2lkKTsNCiAgICAgICAgTW9kUnVudGltZVRl\nc3QxIHBhcmVudCA9IGIuZ2V0U2VsZk9uZU9uZSgpOw0KICAgICAgICBhc3Nl\ncnROb3ROdWxsKCJwYXJlbnQgaXMgbnVsbCIsIHBhcmVudCk7DQogICAgICAg\nIHBtLnJlbW92ZShiKTsNCg0KICAgICAgICBlbmRUeChwbSk7DQoNCiAgICAg\nICAgLy8gcGFyZW50IHNob3VsZCBiZSB2YWxpZA0KICAgICAgICBhc3NlcnRF\ncXVhbHMoIlBBUkVOVCIsIHBhcmVudC5nZXRTdHJpbmdGaWVsZCgpKTsNCg0K\nICAgICAgICAvLyAnYicgc2hvdWxkIGJlIGNsZWFyZWQNCiAgICAgICAgYXNz\nZXJ0TnVsbChiLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMCwgYi5nZXRJbnRGaWVsZCgpKTsNCiAgICAgICAgYXNzZXJ0TnVs\nbChiLmdldFNlbGZPbmVPbmUoKSk7DQogICAgfQ0KDQogICAgLyoqDQogICAg\nICogVGVzdHMgYmFzaWMgc3RhdGUgdHJhbnNpdGlvbnMgZnJvbSBwZXJzaXN0\nZW50LXRyYW5zYWN0aW9uYWwNCiAgICAgKiB0byBwZXJzaXN0ZW50LW5vbnRy\nYW5zYWN0aW9uYWwgYWZ0ZXIgZGVsZXRlIGFuZCByb2xsYmFjay4NCiAgICAg\nKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0T3B0U3RhdGVUcmFuc2l0aW9uczYo\nKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSh0cnVlLCBmYWxzZSk7DQogICAg\nICAgIHN0YXJ0VHgocG0pOw0KDQogICAgICAgIE1vZFJ1bnRpbWVUZXN0MiBi\nID0NCiAgICAgICAgICAgIChNb2RSdW50aW1lVGVzdDIpIHBtLmZpbmQoTW9k\nUnVudGltZVRlc3QyLmNsYXNzLCBfaWQpOw0KICAgICAgICBwbS5yZW1vdmUo\nYik7DQoNCiAgICAgICAgcm9sbGJhY2tUeChwbSk7DQoNCiAgICAgICAgYXNz\nZXJ0VGVzdDJPcmlnKGIpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0K\nDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMgc3RhdGUgdHJhbnNpdGlv\nbnMgZnJvbSB0cmFuc2llbnQgdG8NCiAgICAgKiBwZXJzaXN0ZW50LXRyYW5z\nYWN0aW9uYWwgYW5kIGJhY2sgdG8gdHJhbnNpZW50IGFmdGVyIHJvbGxiYWNr\nLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHRlc3RPcHRSZXRhaW5TdGF0\nZVRyYW5zaXRpb25zMSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0K\nICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9IGNyZWF0ZVRlc3QyKCk7DQoN\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTSh0cnVl\nLCB0cnVlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQoNCiAgICAgICAgcG0u\ncGVyc2lzdChiKTsNCiAgICAgICAgcG0ucGVyc2lzdChiLmdldFNlbGZPbmVP\nbmUoKSk7DQogICAgICAgIGFzc2VydFRlc3QyT3JpZyhiKTsNCiAgICAgICAg\nY2hhbmdlVGVzdDIoYik7DQoNCiAgICAgICAgcm9sbGJhY2tUeChwbSk7DQoN\nCiAgICAgICAgYXNzZXJ0VGVzdDJPcmlnKGIpOw0KICAgICAgICBlbmRFbShw\nbSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMgc3Rh\ndGUgdHJhbnNpdGlvbnMgZnJvbSB0cmFuc2llbnQgdG8NCiAgICAgKiBwZXJz\naXN0ZW50LXRyYW5zYWN0aW9uYWwgdG8gcGVyc2lzdGVudC1ub250cmFuc2Fj\ndGlvbmFsIGFmdGVyIGNvbW1pdC4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0T3B0UmV0YWluU3RhdGVUcmFuc2l0aW9uczIoKQ0KICAgICAgICB0\naHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgTW9kUnVudGltZVRlc3QyIGIg\nPSBjcmVhdGVUZXN0MigpOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIHBtID0gZ2V0UE0odHJ1ZSwgdHJ1ZSk7DQogICAgICAgIHN0YXJ0VHgo\ncG0pOw0KDQogICAgICAgIHBtLnBlcnNpc3QoYik7DQogICAgICAgIGFzc2Vy\ndFRlc3QyT3JpZyhiKTsNCiAgICAgICAgY2hhbmdlVGVzdDIoYik7DQoNCiAg\nICAgICAgZW5kVHgocG0pOw0KDQogICAgICAgIGFzc2VydFRlc3QyQ2hhbmdl\nZChiLCB0cnVlKTsNCiAgICAgICAgZW5kRW0ocG0pOw0KICAgIH0NCg0KICAg\nIC8qKg0KICAgICAqIFRlc3RzIGJhc2ljIHN0YXRlIHRyYW5zaXRpb25zIHdo\nZW4gZmluZGluZyBhIHRyYW5zYWN0aW9uYWwNCiAgICAgKiBpbnN0YW5jZSBi\neSBpZCwgdGhlbiBjb21taXR0aW5nLg0KICAgICAqLw0KICAgIHB1YmxpYyB2\nb2lkIHRlc3RPcHRSZXRhaW5TdGF0ZVRyYW5zaXRpb25zMygpDQogICAgICAg\nIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFu\nYWdlciBwbSA9IGdldFBNKHRydWUsIHRydWUpOw0KICAgICAgICBzdGFydFR4\nKHBtKTsNCg0KICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9DQogICAgICAg\nICAgICAoTW9kUnVudGltZVRlc3QyKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0\nMi5jbGFzcywgX2lkKTsNCiAgICAgICAgYXNzZXJ0VGVzdDJPcmlnKGIpOw0K\nICAgICAgICBjaGFuZ2VUZXN0MihiKTsNCg0KICAgICAgICBlbmRUeChwbSk7\nDQoNCiAgICAgICAgYXNzZXJ0VGVzdDJDaGFuZ2VkKGIsIHRydWUpOw0KICAg\nICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVGVz\ndHMgYmFzaWMgc3RhdGUgdHJhbnNpdGlvbnMgd2hlbiBmaW5kaW5nIGEgdHJh\nbnNhY3Rpb25hbA0KICAgICAqIGluc3RhbmNlIGJ5IGlkLCB0aGVuIHJvbGxp\nbmcgYmFjay4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0T3B0UmV0\nYWluU3RhdGVUcmFuc2l0aW9uczQoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0\naW9uIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQ\nTSh0cnVlLCB0cnVlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQoNCiAgICAg\nICAgTW9kUnVudGltZVRlc3QyIGIgPQ0KICAgICAgICAgICAgKE1vZFJ1bnRp\nbWVUZXN0MikgcG0uZmluZChNb2RSdW50aW1lVGVzdDIuY2xhc3MsIF9pZCk7\nDQogICAgICAgIGFzc2VydFRlc3QyT3JpZyhiKTsNCiAgICAgICAgY2hhbmdl\nVGVzdDIoYik7DQoNCiAgICAgICAgcm9sbGJhY2tUeChwbSk7DQoNCiAgICAg\nICAgYXNzZXJ0VGVzdDJPcmlnKGIpOw0KICAgICAgICBlbmRFbShwbSk7DQog\nICAgfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMgc3RhdGUgdHJh\nbnNpdGlvbnMgZnJvbSBwZXJzaXN0ZW50LXRyYW5zYWN0aW9uYWwNCiAgICAg\nKiB0byB0cmFuc2llbnQgYWZ0ZXIgZGVsZXRlIGFuZCBjb21taXQuDQogICAg\nICovDQogICAgcHVibGljIHZvaWQgdGVzdE9wdFJldGFpblN0YXRlVHJhbnNp\ndGlvbnM1KCkNCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0odHJ1ZSwgdHJ1ZSk7\nDQogICAgICAgIHN0YXJ0VHgocG0pOw0KDQogICAgICAgIE1vZFJ1bnRpbWVU\nZXN0MiBiID0NCiAgICAgICAgICAgIChNb2RSdW50aW1lVGVzdDIpIHBtLmZp\nbmQoTW9kUnVudGltZVRlc3QyLmNsYXNzLCBfaWQpOw0KICAgICAgICBNb2RS\ndW50aW1lVGVzdDEgcGFyZW50ID0gYi5nZXRTZWxmT25lT25lKCk7DQoNCiAg\nICAgICAgYXNzZXJ0Tm90TnVsbCgicGFyZW50IGlzIG51bGwiLCBwYXJlbnQp\nOw0KICAgICAgICBwbS5yZW1vdmUoYik7DQoNCiAgICAgICAgZW5kVHgocG0p\nOw0KDQogICAgICAgIC8vIHBhcmVudCBzaG91bGQgYmUgdmFsaWQNCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJQQVJFTlQiLCBwYXJlbnQuZ2V0U3RyaW5nRmll\nbGQoKSk7DQoNCiAgICAgICAgLy8gJ2InIHNob3VsZCBiZSBjbGVhcmVkDQog\nICAgICAgIGFzc2VydE51bGwoYi5nZXRTdHJpbmdGaWVsZCgpKTsNCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDAsIGIuZ2V0SW50RmllbGQoKSk7DQogICAgICAg\nIGFzc2VydE51bGwoYi5nZXRTZWxmT25lT25lKCkpOw0KICAgIH0NCg0KICAg\nIC8qKg0KICAgICAqIFRlc3RzIGJhc2ljIHN0YXRlIHRyYW5zaXRpb25zIGZy\nb20gcGVyc2lzdGVudC10cmFuc2FjdGlvbmFsDQogICAgICogdG8gcGVyc2lz\ndGVudC1ub250cmFuc2FjdGlvbmFsIGFmdGVyIGRlbGV0ZSBhbmQgcm9sbGJh\nY2suDQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVzdE9wdFJldGFpblN0\nYXRlVHJhbnNpdGlvbnM2KCkNCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7\nDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0odHJ1\nZSwgdHJ1ZSk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KDQogICAgICAgIE1v\nZFJ1bnRpbWVUZXN0MiBiID0NCiAgICAgICAgICAgIChNb2RSdW50aW1lVGVz\ndDIpIHBtLmZpbmQoTW9kUnVudGltZVRlc3QyLmNsYXNzLCBfaWQpOw0KICAg\nICAgICBwbS5yZW1vdmUoYik7DQoNCiAgICAgICAgcm9sbGJhY2tUeChwbSk7\nDQoNCiAgICAgICAgaWYgKHBtLmdldFJlc3RvcmVTdGF0ZSgpICE9IFJlc3Rv\ncmVTdGF0ZVR5cGUuTk9ORSkNCiAgICAgICAgICAgIGFzc2VydFRlc3QyT3Jp\nZyhiKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgYXNzZXJ0TnVsbChi\nLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAg\nfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMgc3RhdGUgdHJhbnNp\ndGlvbnMgZnJvbSB0cmFuc2llbnQgdG8NCiAgICAgKiBwZXJzaXN0ZW50LXRy\nYW5zYWN0aW9uYWwgYW5kIGJhY2sgdG8gdHJhbnNpZW50IGFmdGVyIHJvbGxi\nYWNrLg0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIHRlc3RSZXRhaW5TdGF0\nZVRyYW5zaXRpb25zMSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0K\nICAgICAgICBpZiAoIXN1cHBvcnRzUGVzc2ltaXN0aWMpDQogICAgICAgICAg\nICByZXR1cm47DQoNCiAgICAgICAgTW9kUnVudGltZVRlc3QyIGIgPSBjcmVh\ndGVUZXN0MigpOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nID0gZ2V0UE0oZmFsc2UsIHRydWUpOw0KICAgICAgICBzdGFydFR4KHBtKTsN\nCg0KICAgICAgICBwbS5wZXJzaXN0KGIpOw0KICAgICAgICBwbS5wZXJzaXN0\nKGIuZ2V0U2VsZk9uZU9uZSgpKTsNCiAgICAgICAgYXNzZXJ0VGVzdDJPcmln\nKGIpOw0KICAgICAgICBjaGFuZ2VUZXN0MihiKTsNCg0KICAgICAgICByb2xs\nYmFja1R4KHBtKTsNCg0KICAgICAgICBhc3NlcnRUZXN0Mk9yaWcoYik7DQog\nICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBU\nZXN0cyBiYXNpYyBzdGF0ZSB0cmFuc2l0aW9ucyBmcm9tIHRyYW5zaWVudCB0\nbw0KICAgICAqIHBlcnNpc3RlbnQtdHJhbnNhY3Rpb25hbCB0byBwZXJzaXN0\nZW50LW5vbnRyYW5zYWN0aW9uYWwgYWZ0ZXIgY29tbWl0Lg0KICAgICAqLw0K\nICAgIHB1YmxpYyB2b2lkIHRlc3RSZXRhaW5TdGF0ZVRyYW5zaXRpb25zMigp\nDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBpZiAoIXN1\ncHBvcnRzUGVzc2ltaXN0aWMpDQogICAgICAgICAgICByZXR1cm47DQoNCiAg\nICAgICAgTW9kUnVudGltZVRlc3QyIGIgPSBjcmVhdGVUZXN0MigpOw0KDQog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oZmFsc2Us\nIHRydWUpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCg0KICAgICAgICBwbS5w\nZXJzaXN0KGIpOw0KICAgICAgICBhc3NlcnRUZXN0Mk9yaWcoYik7DQogICAg\nICAgIGNoYW5nZVRlc3QyKGIpOw0KDQogICAgICAgIGVuZFR4KHBtKTsNCg0K\nICAgICAgICBhc3NlcnRUZXN0MkNoYW5nZWQoYiwgdHJ1ZSk7DQogICAgICAg\nIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUZXN0cyBi\nYXNpYyBzdGF0ZSB0cmFuc2l0aW9ucyB3aGVuIGZpbmRpbmcgYSB0cmFuc2Fj\ndGlvbmFsDQogICAgICogaW5zdGFuY2UgYnkgaWQsIHRoZW4gY29tbWl0dGlu\nZy4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmV0YWluU3RhdGVU\ncmFuc2l0aW9uczMoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAg\nICAgICAgaWYgKCFzdXBwb3J0c1Blc3NpbWlzdGljKQ0KICAgICAgICAgICAg\ncmV0dXJuOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0g\nZ2V0UE0oZmFsc2UsIHRydWUpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCg0K\nICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9DQogICAgICAgICAgICAoTW9k\nUnVudGltZVRlc3QyKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0Mi5jbGFzcywg\nX2lkKTsNCiAgICAgICAgYXNzZXJ0VGVzdDJPcmlnKGIpOw0KICAgICAgICBj\naGFuZ2VUZXN0MihiKTsNCg0KICAgICAgICBlbmRUeChwbSk7DQoNCiAgICAg\nICAgYXNzZXJ0VGVzdDJDaGFuZ2VkKGIsIHRydWUpOw0KICAgICAgICBlbmRF\nbShwbSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMg\nc3RhdGUgdHJhbnNpdGlvbnMgd2hlbiBmaW5kaW5nIGEgdHJhbnNhY3Rpb25h\nbA0KICAgICAqIGluc3RhbmNlIGJ5IGlkLCB0aGVuIHJvbGxpbmcgYmFjay4N\nCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmV0YWluU3RhdGVUcmFu\nc2l0aW9uczQoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAg\nICAgaWYgKCFzdXBwb3J0c1Blc3NpbWlzdGljKQ0KICAgICAgICAgICAgcmV0\ndXJuOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0\nUE0oZmFsc2UsIHRydWUpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCg0KICAg\nICAgICBNb2RSdW50aW1lVGVzdDIgYiA9DQogICAgICAgICAgICAoTW9kUnVu\ndGltZVRlc3QyKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0Mi5jbGFzcywgX2lk\nKTsNCiAgICAgICAgYXNzZXJ0VGVzdDJPcmlnKGIpOw0KICAgICAgICBjaGFu\nZ2VUZXN0MihiKTsNCg0KICAgICAgICByb2xsYmFja1R4KHBtKTsNCg0KICAg\nICAgICBhc3NlcnRUZXN0Mk9yaWcoYik7DQogICAgICAgIGVuZEVtKHBtKTsN\nCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUZXN0cyBiYXNpYyBzdGF0ZSB0\ncmFuc2l0aW9ucyBmcm9tIHBlcnNpc3RlbnQtdHJhbnNhY3Rpb25hbA0KICAg\nICAqIHRvIHRyYW5zaWVudCBhZnRlciBkZWxldGUgYW5kIGNvbW1pdC4NCiAg\nICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmV0YWluU3RhdGVUcmFuc2l0\naW9uczUoKSB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgaWYgKCFzdXBw\nb3J0c1Blc3NpbWlzdGljKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAg\nICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0UE0oZmFsc2UsIHRy\ndWUpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCg0KICAgICAgICBNb2RSdW50\naW1lVGVzdDIgYiA9IChNb2RSdW50aW1lVGVzdDIpIHBtLmZpbmQoTW9kUnVu\ndGltZVRlc3QyLmNsYXNzLA0KICAgICAgICAgICAgX2lkKTsNCiAgICAgICAg\nTW9kUnVudGltZVRlc3QxIHBhcmVudCA9IGIuZ2V0U2VsZk9uZU9uZSgpOw0K\nICAgICAgICBhc3NlcnROb3ROdWxsKCJwYXJlbnQgaXMgbnVsbCIsIHBhcmVu\ndCk7DQogICAgICAgIHBtLnJlbW92ZShiKTsNCg0KICAgICAgICBlbmRUeChw\nbSk7DQoNCiAgICAgICAgLy8gcGFyZW50IHNob3VsZCBiZSB2YWxpZA0KICAg\nICAgICBhc3NlcnRFcXVhbHMoIlBBUkVOVCIsIHBhcmVudC5nZXRTdHJpbmdG\naWVsZCgpKTsNCg0KICAgICAgICAvLyAnYicgc2hvdWxkIGJlIGNsZWFyZWQN\nCiAgICAgICAgYXNzZXJ0TnVsbChiLmdldFN0cmluZ0ZpZWxkKCkpOw0KICAg\nICAgICBhc3NlcnRFcXVhbHMoMCwgYi5nZXRJbnRGaWVsZCgpKTsNCiAgICAg\nICAgYXNzZXJ0TnVsbChiLmdldFNlbGZPbmVPbmUoKSk7DQogICAgfQ0KDQog\nICAgLyoqDQogICAgICogVGVzdHMgYmFzaWMgc3RhdGUgdHJhbnNpdGlvbnMg\nZnJvbSBwZXJzaXN0ZW50LXRyYW5zYWN0aW9uYWwNCiAgICAgKiB0byBwZXJz\naXN0ZW50LW5vbnRyYW5zYWN0aW9uYWwgYWZ0ZXIgZGVsZXRlIGFuZCByb2xs\nYmFjay4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmV0YWluU3Rh\ndGVUcmFuc2l0aW9uczYoKQ0KICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsN\nCiAgICAgICAgaWYgKCFzdXBwb3J0c1Blc3NpbWlzdGljKQ0KICAgICAgICAg\nICAgcmV0dXJuOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBt\nID0gZ2V0UE0oZmFsc2UsIHRydWUpOw0KICAgICAgICBzdGFydFR4KHBtKTsN\nCg0KICAgICAgICBNb2RSdW50aW1lVGVzdDIgYiA9DQogICAgICAgICAgICAo\nTW9kUnVudGltZVRlc3QyKSBwbS5maW5kKE1vZFJ1bnRpbWVUZXN0Mi5jbGFz\ncywgX2lkKTsNCiAgICAgICAgcG0ucmVtb3ZlKGIpOw0KDQogICAgICAgIHJv\nbGxiYWNrVHgocG0pOw0KDQogICAgICAgIGFzc2VydFRlc3QyT3JpZyhiKTsN\nCiAgICAgICAgZW5kRW0ocG0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAq\nIFRlc3RzIGJhc2ljIHN0YXRlIHRyYW5zaXRpb25zIGZyb20gdHJhbnNpZW50\nIHRvDQogICAgICogdHJhbnNpZW50LWRpcnR5IGFuZCBiYWNrIHRvIHRyYW5z\naWVudCBhZnRlciByb2xsYmFjay4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0VHJhbnNpZW50U3RhdGVUcmFuc2l0aW9uczEoKQ0KICAgICAgICB0\naHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAgaWYgKCFzdXBwb3J0c1Blc3Np\nbWlzdGljKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIE1vZFJ1\nbnRpbWVUZXN0MiBiID0gY3JlYXRlVGVzdDIoKTsNCg0KICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlciBwbSA9IGdldFBNKGZhbHNlLCBmYWxzZSk7DQog\nICAgICAgIHN0YXJ0VHgocG0pOw0KDQogICAgICAgIHBtLnRyYW5zYWN0aW9u\nYWwoYiwgdHJ1ZSk7DQogICAgICAgIHBtLnRyYW5zYWN0aW9uYWwoYi5nZXRT\nZWxmT25lT25lKCksIHRydWUpOw0KICAgICAgICBjaGFuZ2VUZXN0MihiKTsN\nCg0KICAgICAgICByb2xsYmFja1R4KHBtKTsNCg0KICAgICAgICBhc3NlcnRU\nZXN0Mk9yaWcoYik7DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAg\nICAvKioNCiAgICAgKiBUZXN0cyBiYXNpYyBzdGF0ZSB0cmFuc2l0aW9ucyBm\ncm9tIHRyYW5zaWVudCB0bw0KICAgICAqIHRyYW5zaWVudC10cmFuc2FjdGlv\nbmFsIGFuZCBzdGljayBvbiBjb21taXQuDQogICAgICovDQogICAgcHVibGlj\nIHZvaWQgdGVzdFRyYW5zaWVudFN0YXRlVHJhbnNpdGlvbnMyKCkNCiAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIGlmICghc3VwcG9ydHNQ\nZXNzaW1pc3RpYykNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBN\nb2RSdW50aW1lVGVzdDIgYiA9IGNyZWF0ZVRlc3QyKCk7DQoNCiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTShmYWxzZSwgZmFsc2Up\nOw0KICAgICAgICBzdGFydFR4KHBtKTsNCg0KICAgICAgICBwbS50cmFuc2Fj\ndGlvbmFsKGIsIHRydWUpOw0KICAgICAgICBwbS50cmFuc2FjdGlvbmFsKGIu\nZ2V0U2VsZk9uZU9uZSgpLCB0cnVlKTsNCiAgICAgICAgY2hhbmdlVGVzdDIo\nYik7DQoNCiAgICAgICAgZW5kVHgocG0pOw0KDQogICAgICAgIGFzc2VydFRl\nc3QyQ2hhbmdlZChiLCBmYWxzZSk7DQogICAgICAgIGVuZEVtKHBtKTsNCiAg\nICB9DQoNCiAgICAvKioNCiAgICAgKiBUZXN0cyBzdGF0ZSB0cmFuc2l0aW9u\ncyBmcm9tIFBDbGVhbiB0byB0cmFuc2llbnQuDQogICAgICovDQogICAgcHVi\nbGljIHZvaWQgdGVzdFRyYW5zaWVudFN0YXRlVHJhbnNpdGlvbnMzKCkNCiAg\nICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIGlmICghc3VwcG9y\ndHNQZXNzaW1pc3RpYykNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAg\nICBNb2RSdW50aW1lVGVzdDIgYiA9IGNyZWF0ZVRlc3QyKCk7DQoNCiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRQTShmYWxzZSwgZmFs\nc2UpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgcG0ucGVyc2lz\ndChiKTsNCiAgICAgICAgaW50IG9pZCA9IGIuZ2V0SWQoKTsNCiAgICAgICAg\nZW5kVHgocG0pOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAgICAgICAgcG0g\nPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0KICAgICAgICAvL0ZJWE1FIGp0aG9t\nYXMNCiAgICAgICAgYiA9IChNb2RSdW50aW1lVGVzdDIpIHBtLmZpbmQoTW9k\nUnVudGltZVRlc3QyLmNsYXNzLCBvaWQpOw0KICAgICAgICBwbS5yZXRyaWV2\nZShiKTsNCiAgICAgICAgLy9GSVhNRSBqdGhvbWFzDQogICAgICAgIGVuZEVt\nKHBtKTsNCg0KICAgICAgICAvLyBub3RlIHRoYXQgYXQgdGhpcyBwb2ludCwg\ncGFyZW50IGlzIG5vdCB0cmFuc2llbnQsIGp1c3QgcmV0cmlldmVkLg0KICAg\nICAgICBhc3NlcnROb3ROdWxsKCJiIGlzIG51bGwiLCBiLmdldFNlbGZPbmVP\nbmUoKSk7DQogICAgfQ0KDQogICAgcHJpdmF0ZSBNb2RSdW50aW1lVGVzdDIg\nY3JlYXRlVGVzdDIoKSB7DQogICAgICAgIHJldHVybiBjcmVhdGVUZXN0Migi\nTkFNRSIsIDUwKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIE1vZFJ1bnRpbWVU\nZXN0MiBjcmVhdGVUZXN0MihTdHJpbmcgc3RyLCBpbnQgaSkgew0KICAgICAg\nICByZXR1cm4gY3JlYXRlVGVzdDIobmV3IE1vZFJ1bnRpbWVUZXN0MihzdHIs\nIGkpKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIE1vZFJ1bnRpbWVUZXN0MiBj\ncmVhdGVUZXN0MihNb2RSdW50aW1lVGVzdDIgYikgew0KICAgICAgICBNb2RS\ndW50aW1lVGVzdDEgcGFyZW50ID0gbmV3IE1vZFJ1bnRpbWVUZXN0MSgiUEFS\nRU5UIiwgNzApOw0KICAgICAgICBiLnNldFNlbGZPbmVPbmUocGFyZW50KTsN\nCiAgICAgICAgcmV0dXJuIGI7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lk\nIGNoYW5nZVRlc3QyKE1vZFJ1bnRpbWVUZXN0MiBiKSB7DQogICAgICAgIFBl\ncnNpc3RlbmNlQXdhcmUuc2V0TW9kVHJhbnNTdHJpbmcoYiwgIjk5OSIpOw0K\nICAgICAgICBiLnNldFN0cmluZ0ZpZWxkKCJDSEFOR0VEIik7DQogICAgICAg\nIGIuc2V0SW50RmllbGQoMTAwMCk7DQogICAgICAgIGIuZ2V0U2VsZk9uZU9u\nZSgpLnNldFN0cmluZ0ZpZWxkKCJQQ0hBTkdFRCIpOw0KICAgICAgICBiLnNl\ndFNlbGZPbmVPbmUobnVsbCk7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lk\nIGFzc2VydFRlc3QyQ2hhbmdlZChNb2RSdW50aW1lVGVzdDIgYiwgYm9vbGVh\nbiByZXRhaW5WYWx1ZXMpIHsNCiAgICAgICAgaWYgKHJldGFpblZhbHVlcykN\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscygiOTk5IiwgUGVyc2lzdGVuY2VB\nd2FyZS5nZXRNb2RUcmFuc1N0cmluZyhiKSk7DQogICAgICAgIGFzc2VydEVx\ndWFscygiQ0hBTkdFRCIsIGIuZ2V0U3RyaW5nRmllbGQoKSk7DQogICAgICAg\nIGFzc2VydEVxdWFscygxMDAwLCBiLmdldEludEZpZWxkKCkpOw0KICAgICAg\nICBhc3NlcnROdWxsKGIuZ2V0U2VsZk9uZU9uZSgpKTsNCiAgICB9DQoNCiAg\nICBwcml2YXRlIHZvaWQgYXNzZXJ0VGVzdDJPcmlnKE1vZFJ1bnRpbWVUZXN0\nMiBiKSB7DQogICAgICAgIGFzc2VydEVxdWFscygiTkFNRSIsIGIuZ2V0U3Ry\naW5nRmllbGQoKSk7DQogICAgICAgIGFzc2VydEVxdWFscyg1MCwgYi5nZXRJ\nbnRGaWVsZCgpKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVsbChiLmdldFNlbGZP\nbmVPbmUoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygiUEFSRU5UIiwgYi5n\nZXRTZWxmT25lT25lKCkuZ2V0U3RyaW5nRmllbGQoKSk7DQoNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKA0KICAgICAgICAgICAgInRyYW5zYWN0aW9uYWwgZmll\nbGQgJ3RyYW5zU3RyaW5nJyB3YXMgbm90IHRoZSAiDQogICAgICAgICAgICAg\nICAgKyAic2FtZSBhcyBpdCB3YXMgb3JpZ2luYWxseS4gRW5zdXJlIHRoYXQg\nIg0KICAgICAgICAgICAgICAgICsgIm9wZW5qcGEua2VybmVsLlBlcnNpc3Rl\nbmNlQXdhcmUgaXMgZW5oYW5jZWQuICINCiAgICAgICAgICAgICAgICArDQog\nICAgICAgICAgICAgICAgIkl0IGlzIHBlcnNpc3RlbmNlLWF3YXJlLCBzbyB3\naWxsIG5vdCBiZSBlbmhhbmNlZCBieSBjb21tYW5kcyAiDQogICAgICAgICAg\nICAgICAgKyAibGlrZSBqZG9jICQoZmluZCB0ZXN0IC1uYW1lICcqLmpkbycp\nLiIsIG51bGwsDQogICAgICAgICAgICBQZXJzaXN0ZW5jZUF3YXJlLmdldE1v\nZFRyYW5zU3RyaW5nKGIpKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBB\nc3NlcnQgdGhhdCB0aGUgZ2l2ZW4gb2JqZWN0IGlzIHBlcnNpc3RlbnQuDQog\nICAgICovDQogICAgcHVibGljIHZvaWQgYXNzZXJ0VHJhbnNpZW50KE9iamVj\ndCBhKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gY3Vy\ncmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSghcG0u\naXNQZXJzaXN0ZW50KGEpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSghcG0uaXNU\ncmFuc2FjdGlvbmFsKGEpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSghcG0uaXNO\nZXdseVBlcnNpc3RlbnQoYSkpOw0KICAgICAgICBhc3NlcnRUcnVlKCFwbS5p\nc0RpcnR5KGEpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSghcG0uaXNSZW1vdmVk\nKGEpKTsNCiAgICAgICAgYXNzZXJ0TnVsbChwbS5nZXRPYmplY3RJZChhKSk7\nDQogICAgICAgIGFzc2VydE51bGwoT3BlbkpQQVBlcnNpc3RlbmNlLmdldEVu\ndGl0eU1hbmFnZXIoYSkpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0K\nDQogICAgLyoqDQogICAgICogQXNzZXJ0IHRoYXQgdGhlIGdpdmVuIG9iamVj\ndCBpcyBwZXJzaXN0ZW50IGFuZCBpcyBpbiB0aGUgZ2l2ZW4gc3RhdGUuDQog\nICAgICovDQogICAgcHVibGljIHZvaWQgYXNzZXJ0UGVyc2lzdGVudChPYmpl\nY3QgYSwgYm9vbGVhbiBpc1RyYW5zLCBib29sZWFuIGlzTmV3LA0KICAgICAg\nICBib29sZWFuIGlzRGVsZXRlZCwgYm9vbGVhbiBpc0RpcnR5KSB7DQogICAg\nICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0NCiAgICAgICAgICAgIChP\ncGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsN\nCiAgICAgICAgYXNzZXJ0VHJ1ZShwbS5pc1BlcnNpc3RlbnQoYSkpOw0KDQog\nICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJsZSB4bWFuID0gKFBlcnNpc3RlbmNl\nQ2FwYWJsZSkgYTsNCg0KICAgICAgICBhc3NlcnRFcXVhbHMoaXNUcmFucywg\ncG0uaXNUcmFuc2FjdGlvbmFsKGEpKTsNCgkJYXNzZXJ0RXF1YWxzKGlzTmV3\nLCBwbS5pc05ld2x5UGVyc2lzdGVudChhKSk7DQoJCWFzc2VydEVxdWFscyhp\nc0RlbGV0ZWQsIHBtLmlzUmVtb3ZlZChhKSk7DQoJCWFzc2VydEVxdWFscyhp\nc0RpcnR5IHx8IGlzTmV3IHx8IGlzRGVsZXRlZCwgcG0uaXNEaXJ0eShhKSk7\nDQoJCWFzc2VydE5vdE51bGwocG0uZ2V0T2JqZWN0SWQoYSkpOw0KCQlhc3Nl\ncnROb3ROdWxsKE9wZW5KUEFQZXJzaXN0ZW5jZS5nZXRFbnRpdHlNYW5hZ2Vy\nKGEpKTsNCg0KCQllbmRFbShwbSk7DQoJfQ0KDQp9DQo=\n","encoding":"base64"}

