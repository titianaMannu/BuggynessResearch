{"sha":"ff7498a48a7be40bb0eb29709ed09ffb5046dea8","node_id":"MDQ6QmxvYjIwNjM2NDpmZjc0OThhNDhhN2JlNDBiYjBlYjI5NzA5ZWQwOWZmYjUwNDZkZWE4","size":17085,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ff7498a48a7be40bb0eb29709ed09ffb5046dea8","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5tYW5hZ2VkaW50ZXJmYWNlOw0KDQppbXBvcnQgamF2YS51dGls\nLlNldDsNCmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsNCmltcG9ydCBqYXZh\nLnV0aWwuQXJyYXlMaXN0Ow0KaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nOw0KaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsNCmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5RdWVyeTsNCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlOb3RGb3VuZEV4Y2VwdGlvbjsNCg0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOw0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBB\nRW50aXR5TWFuYWdlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuSlBBRmFjYWRlSGVscGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5FeHRlbnQ7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLnF1ZXJ5LlNpbXBsZUVudGl0eTsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOw0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5QZXJzaXN0\nZW5jZUV4Y2VwdGlvbjsNCg0KcHVibGljIGNsYXNzIFRlc3RNYW5hZ2VkSW50\nZXJmYWNlcyBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsNCg0KICAgIEBP\ndmVycmlkZQ0KICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgew0KICAgICAgICBz\ndXBlci5zZXRVcChTaW1wbGVFbnRpdHkuY2xhc3MsIE1hbmFnZWRJbnRlcmZh\nY2VFbWJlZC5jbGFzcywNCiAgICAgICAgICAgIE1hbmFnZWRJbnRlcmZhY2VT\ndXAuY2xhc3MsIE1hbmFnZWRJZmFjZS5jbGFzcywNCiAgICAgICAgICAgIE1h\nbmFnZWRJbnRlcmZhY2VPd25lci5jbGFzcywgTWl4ZWRJbnRlcmZhY2UuY2xh\nc3MsDQogICAgICAgICAgICBNaXhlZEludGVyZmFjZUltcGwuY2xhc3MsIE5v\nbk1hcHBlZEludGVyZmFjZUltcGwuY2xhc3MsDQogICAgICAgICAgICBDTEVB\nUl9UQUJMRVMpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RFbWJl\nZGRlZE1ldGFEYXRhKCkgew0KICAgICAgICBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpLmNsb3NlKCk7DQogICAgICAgIENsYXNzTWV0YURhdGEgb3duZXJN\nZXRhID0gSlBBRmFjYWRlSGVscGVyLmdldE1ldGFEYXRhKGVtZiwNCiAgICAg\nICAgICAgIE1hbmFnZWRJZmFjZS5jbGFzcyk7DQogICAgICAgIENsYXNzTWV0\nYURhdGEgZW1iZWRkZWRNZXRhID0gb3duZXJNZXRhLmdldEZpZWxkKCJlbWJl\nZCIpDQogICAgICAgICAgICAuZ2V0RGVmaW5pbmdNZXRhRGF0YSgpOw0KICAg\nICAgICBhc3NlcnRUcnVlKGVtYmVkZGVkTWV0YS5pc01hbmFnZWRJbnRlcmZh\nY2UoKSk7DQogICAgICAgIGFzc2VydFRydWUoZW1iZWRkZWRNZXRhLmlzSW50\nZXJjZXB0aW5nKCkpOw0KDQogICAgICAgIENsYXNzTWV0YURhdGEgZW1iZWRk\nYWJsZU1ldGEgPSBKUEFGYWNhZGVIZWxwZXIuZ2V0TWV0YURhdGEoZW1mLA0K\nICAgICAgICAgICAgTWFuYWdlZEludGVyZmFjZUVtYmVkLmNsYXNzKTsNCiAg\nICAgICAgYXNzZXJ0VHJ1ZShlbWJlZGRhYmxlTWV0YS5pc01hbmFnZWRJbnRl\ncmZhY2UoKSk7DQogICAgICAgIGFzc2VydFRydWUoZW1iZWRkYWJsZU1ldGEu\naXNJbnRlcmNlcHRpbmcoKSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\ndGVzdE1hbmFnZWRJbnRlcmZhY2UoKSB0aHJvd3MgRXhjZXB0aW9uIHsNCiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7DQogICAgICAgIE1hbmFnZWRJZmFjZSBwYyA9IGVtLmNyZWF0ZUlu\nc3RhbmNlKE1hbmFnZWRJZmFjZS5jbGFzcyk7DQogICAgICAgIHBjLnNldElu\ndEZpZWxkU3VwKDMpOw0KICAgICAgICBwYy5zZXRJbnRGaWVsZCg0KTsNCiAg\nICAgICAgcGMuc2V0RW1iZWQoZW0uY3JlYXRlSW5zdGFuY2UoTWFuYWdlZElu\ndGVyZmFjZUVtYmVkLmNsYXNzKSk7DQoNCiAgICAgICAgcGMuZ2V0RW1iZWQo\nKS5zZXRFbWJlZEludEZpZWxkKDUpOw0KICAgICAgICBhc3NlcnRFcXVhbHMo\nNSwgcGMuZ2V0RW1iZWQoKS5nZXRFbWJlZEludEZpZWxkKCkpOw0KICAgICAg\nICBlbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9IGVtLmdl\ndE9iamVjdElkKHBjKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCg0KICAgICAgICBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHBjID0gZW0u\nZmluZChNYW5hZ2VkSWZhY2UuY2xhc3MsIG9pZCk7DQogICAgICAgIGFzc2Vy\ndEVxdWFscygzLCBwYy5nZXRJbnRGaWVsZFN1cCgpKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDQsIHBjLmdldEludEZpZWxkKCkpOw0KICAgICAgICBhc3Nl\ncnRFcXVhbHMoNSwgcGMuZ2V0RW1iZWQoKS5nZXRFbWJlZEludEZpZWxkKCkp\nOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAg\nICAgIHBjLnNldEludEZpZWxkKDE0KTsNCiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCg0KICAg\nICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyICgpOw0KICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAgICAgIFF1ZXJ5\nIHF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBvIGZyb20gTWFuYWdl\nZElmYWNlIG8gIiArDQogICAgICAgICAgICAid2hlcmUgby5pbnRGaWVsZCA9\nIDE0Iik7DQogICAgICAgIHBjID0gKE1hbmFnZWRJZmFjZSkgcXVlcnkuZ2V0\nU2luZ2xlUmVzdWx0KCk7DQogICAgICAgIGFzc2VydEVxdWFscygxNCwgcGMu\nZ2V0SW50RmllbGQoKSk7DQogICAgICAgIGVtLnJlbW92ZShwYyk7DQogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVt\nLmNsb3NlKCk7DQoNCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgYXNzZXJ0TnVs\nbChlbS5maW5kKE1hbmFnZWRJZmFjZS5jbGFzcywgb2lkKSk7DQogICAgICAg\nIH0gY2F0Y2ggKEVudGl0eU5vdEZvdW5kRXhjZXB0aW9uIG9uZmUpIHt9DQoN\nCiAgICAgICAgZW0uY2xvc2UoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0SW50ZXJmYWNlT3duZXIoKSB7DQogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgTWFuYWdlZEludGVyZmFjZU93bmVyIHBjID0gbmV3IE1hbmFnZWRJ\nbnRlcmZhY2VPd25lcigpOw0KICAgICAgICBwYy5zZXRJRmFjZShlbS5jcmVh\ndGVJbnN0YW5jZShNYW5hZ2VkSW50ZXJmYWNlU3VwLmNsYXNzKSk7DQogICAg\nICAgIHBjLnNldEVtYmVkKGVtLmNyZWF0ZUluc3RhbmNlKE1hbmFnZWRJbnRl\ncmZhY2VFbWJlZC5jbGFzcykpOw0KICAgICAgICBwYy5nZXRJRmFjZSgpLnNl\ndEludEZpZWxkU3VwKDMpOw0KICAgICAgICBwYy5nZXRFbWJlZCgpLnNldEVt\nYmVkSW50RmllbGQoNSk7DQoNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOw0KICAgICAgICBlbS5wZXJzaXN0KHBjKTsNCiAgICAgICAg\nT2JqZWN0IG9pZCA9IGVtLmdldE9iamVjdElkKHBjKTsNCiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgcGMgPSBlbS5m\naW5kKE1hbmFnZWRJbnRlcmZhY2VPd25lci5jbGFzcywgb2lkKTsNCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDMsIHBjLmdldElGYWNlKCkuZ2V0SW50RmllbGRT\ndXAoKSk7DQogICAgICAgIGFzc2VydEVxdWFscyg1LCBwYy5nZXRFbWJlZCgp\nLmdldEVtYmVkSW50RmllbGQoKSk7DQogICAgICAgIGVtLmNsb3NlKCk7DQoN\nCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAg\nICAgICBwYyA9IGVtLmZpbmQoTWFuYWdlZEludGVyZmFjZU93bmVyLmNsYXNz\nLCBvaWQpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMywgcGMuZ2V0SUZhY2Uo\nKS5nZXRJbnRGaWVsZFN1cCgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDUs\nIHBjLmdldEVtYmVkKCkuZ2V0RW1iZWRJbnRGaWVsZCgpKTsNCiAgICAgICAg\nZW0uY2xvc2UoKTsNCg0KICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsNCiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3Qg\nbyBmcm9tIE1hbmFnZWRJbnRlcmZhY2VPd25lciBvICIgKw0KICAgICAgICAg\nICAgIndoZXJlIG8uaWZhY2UuaW50RmllbGRTdXAgPSAzIGFuZCBvLmVtYmVk\nLmVtYmVkSW50RmllbGQgPSA1Iik7DQogICAgICAgIHBjID0gKE1hbmFnZWRJ\nbnRlcmZhY2VPd25lcikgcS5nZXRTaW5nbGVSZXN1bHQoKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDMsIHBjLmdldElGYWNlKCkuZ2V0SW50RmllbGRTdXAo\nKSk7DQogICAgICAgIGFzc2VydEVxdWFscyg1LCBwYy5nZXRFbWJlZCgpLmdl\ndEVtYmVkSW50RmllbGQoKSk7DQoNCiAgICAgICAgcGMuZ2V0SUZhY2UoKS5z\nZXRJbnRGaWVsZFN1cCgxMyk7DQogICAgICAgIHBjLmdldEVtYmVkKCkuc2V0\nRW1iZWRJbnRGaWVsZCgxNSk7DQogICAgICAgIGFzc2VydEVxdWFscygxMywg\ncGMuZ2V0SUZhY2UoKS5nZXRJbnRGaWVsZFN1cCgpKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDE1LCBwYy5nZXRFbWJlZCgpLmdldEVtYmVkSW50RmllbGQo\nKSk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQog\nICAgICAgIGVtLmNsb3NlKCk7DQoNCiAgICAgICAgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYyA9IGVtLmZpbmQoTWFuYWdl\nZEludGVyZmFjZU93bmVyLmNsYXNzLCBvaWQpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMTMsIHBjLmdldElGYWNlKCkuZ2V0SW50RmllbGRTdXAoKSk7DQog\nICAgICAgIGFzc2VydEVxdWFscygxNSwgcGMuZ2V0RW1iZWQoKS5nZXRFbWJl\nZEludEZpZWxkKCkpOw0KICAgICAgICBlbS5jbG9zZSgpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyB2b2lkIHRlc3RDb2xsZWN0aW9uKCkgew0KICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsN\nCiAgICAgICAgTWFuYWdlZElmYWNlIHBjID0gZW0uY3JlYXRlSW5zdGFuY2Uo\nTWFuYWdlZElmYWNlLmNsYXNzKTsNCiAgICAgICAgU2V0IHNldCA9IG5ldyBI\nYXNoU2V0KCk7DQogICAgICAgIHNldC5hZGQobmV3IEludGVnZXIoMykpOw0K\nICAgICAgICBzZXQuYWRkKG5ldyBJbnRlZ2VyKDQpKTsNCiAgICAgICAgc2V0\nLmFkZChuZXcgSW50ZWdlcig1KSk7DQogICAgICAgIHBjLnNldFNldEludGVn\nZXIoc2V0KTsNCiAgICAgICAgZW0ucGVyc2lzdChwYyk7DQogICAgICAgIE9i\namVjdCBvaWQgPSBlbS5nZXRPYmplY3RJZChwYyk7DQogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVtLmNsb3NlKCk7\nDQoNCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0K\nICAgICAgICBwYyA9IGVtLmZpbmQoTWFuYWdlZElmYWNlLmNsYXNzLCBvaWQp\nOw0KICAgICAgICBzZXQgPSBwYy5nZXRTZXRJbnRlZ2VyKCk7DQogICAgICAg\nIGFzc2VydEVxdWFscygzLCBzZXQuc2l6ZSgpKTsNCiAgICAgICAgYXNzZXJ0\nVHJ1ZShzZXQuY29udGFpbnMobmV3IEludGVnZXIoMykpKTsNCiAgICAgICAg\nYXNzZXJ0VHJ1ZShzZXQuY29udGFpbnMobmV3IEludGVnZXIoNCkpKTsNCiAg\nICAgICAgYXNzZXJ0VHJ1ZShzZXQuY29udGFpbnMobmV3IEludGVnZXIoNSkp\nKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAg\nICAgICBzZXQucmVtb3ZlKG5ldyBJbnRlZ2VyKDQpKTsNCiAgICAgICAgc2V0\nLmFkZChuZXcgSW50ZWdlcigxNCkpOw0KICAgICAgICBzZXQuYWRkKG5ldyBJ\nbnRlZ2VyKDE1KSk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQoNCiAgICAgICAgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYyA9IGVtLmZp\nbmQoTWFuYWdlZElmYWNlLmNsYXNzLCBvaWQpOw0KICAgICAgICBzZXQgPSBw\nYy5nZXRTZXRJbnRlZ2VyKCk7DQogICAgICAgIGFzc2VydEVxdWFscyg0LCBz\nZXQuc2l6ZSgpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShzZXQuY29udGFpbnMo\nbmV3IEludGVnZXIoMykpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShzZXQuY29u\ndGFpbnMobmV3IEludGVnZXIoNSkpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShz\nZXQuY29udGFpbnMobmV3IEludGVnZXIoMTQpKSk7DQogICAgICAgIGFzc2Vy\ndFRydWUoc2V0LmNvbnRhaW5zKG5ldyBJbnRlZ2VyKDE1KSkpOw0KICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAgICAgIHBjLnNl\ndFNldEludGVnZXIobnVsbCk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQoNCiAgICAgICAg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYyA9\nIGVtLmZpbmQoTWFuYWdlZElmYWNlLmNsYXNzLCBvaWQpOw0KICAgICAgICBz\nZXQgPSBwYy5nZXRTZXRJbnRlZ2VyKCk7DQogICAgICAgIGFzc2VydFRydWUg\nKHNldCA9PSBudWxsIHx8IHNldC5zaXplKCkgPT0gMCk7DQogICAgICAgIGVt\nLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdENvbGxl\nY3Rpb25QQygpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAgICAgIE1hbmFnZWRJZmFjZSBw\nYyA9IGVtLmNyZWF0ZUluc3RhbmNlKE1hbmFnZWRJZmFjZS5jbGFzcyk7DQog\nICAgICAgIFNldCBzZXQgPSBuZXcgSGFzaFNldCgpOw0KICAgICAgICBzZXQu\nYWRkKG5ldyBTaW1wbGVFbnRpdHkoImEiLCAiMyIpKTsNCiAgICAgICAgc2V0\nLmFkZChuZXcgU2ltcGxlRW50aXR5KCJiIiwgIjQiKSk7DQogICAgICAgIHNl\ndC5hZGQobmV3IFNpbXBsZUVudGl0eSgiYyIsICI1IikpOw0KICAgICAgICBw\nYy5zZXRTZXRQQyhzZXQpOw0KICAgICAgICBlbS5wZXJzaXN0KHBjKTsNCiAg\nICAgICAgT2JqZWN0IG9pZCA9IGVtLmdldE9iamVjdElkKHBjKTsNCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0u\nY2xvc2UoKTsNCg0KICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7DQogICAgICAgIHBjID0gZW0uZmluZChNYW5hZ2VkSWZhY2UuY2xh\nc3MsIG9pZCk7DQogICAgICAgIHNldCA9IHBjLmdldFNldFBDKCk7DQogICAg\nICAgIGFzc2VydEVxdWFscygzLCBzZXQuc2l6ZSgpKTsNCiAgICAgICAgQ29s\nbGVjdGlvbiBzZWVuID0gbmV3IEFycmF5TGlzdCgpOw0KICAgICAgICBTaW1w\nbGVFbnRpdHkgcmVsOw0KICAgICAgICBTaW1wbGVFbnRpdHkgdG9SZW0gPSBu\ndWxsOw0KICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ID0gc2V0Lml0ZXJhdG9y\nKCk7IGl0Lmhhc05leHQoKTspIHsNCiAgICAgICAgICAgIHJlbCA9IChTaW1w\nbGVFbnRpdHkpIGl0Lm5leHQoKTsNCiAgICAgICAgICAgIHNlZW4uYWRkKHJl\nbC5nZXROYW1lKCkpOw0KICAgICAgICAgICAgaWYgKHJlbC5nZXRWYWx1ZSgp\nLmVxdWFscygiNCIpKQ0KICAgICAgICAgICAgICAgIHRvUmVtID0gcmVsOw0K\nICAgICAgICB9DQogICAgICAgIGFzc2VydEVxdWFscygzLCBzZWVuLnNpemUo\nKSk7DQogICAgICAgIGFzc2VydFRydWUoc2Vlbi5jb250YWlucygiYSIpKTsN\nCiAgICAgICAgYXNzZXJ0VHJ1ZShzZWVuLmNvbnRhaW5zKCJiIikpOw0KICAg\nICAgICBhc3NlcnRUcnVlKHNlZW4uY29udGFpbnMoImMiKSk7DQogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsNCiAgICAgICAgYXNzZXJ0\nTm90TnVsbCh0b1JlbSk7DQogICAgICAgIHNldC5yZW1vdmUodG9SZW0pOw0K\nICAgICAgICBzZXQuYWRkKG5ldyBTaW1wbGVFbnRpdHkoIngiLCAiMTQiKSk7\nDQogICAgICAgIHNldC5hZGQobmV3IFNpbXBsZUVudGl0eSgieSIsICIxNSIp\nKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAg\nICAgICAgZW0uY2xvc2UoKTsNCg0KICAgICAgICBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHBjID0gZW0uZmluZChNYW5hZ2Vk\nSWZhY2UuY2xhc3MsIG9pZCk7DQogICAgICAgIHNldCA9IHBjLmdldFNldFBD\nKCk7DQogICAgICAgIGFzc2VydEVxdWFscyg0LCBzZXQuc2l6ZSgpKTsNCiAg\nICAgICAgc2Vlbi5jbGVhcigpOw0KICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0\nID0gc2V0Lml0ZXJhdG9yKCk7IGl0Lmhhc05leHQoKTspIHsNCiAgICAgICAg\nICAgIHJlbCA9IChTaW1wbGVFbnRpdHkpIGl0Lm5leHQoKTsNCiAgICAgICAg\nICAgIHNlZW4uYWRkKHJlbC5nZXROYW1lKCkpOw0KICAgICAgICB9DQogICAg\nICAgIGFzc2VydEVxdWFscyg0LCBzZWVuLnNpemUoKSk7DQogICAgICAgIGFz\nc2VydFRydWUoc2Vlbi5jb250YWlucygiYSIpKTsNCiAgICAgICAgYXNzZXJ0\nVHJ1ZShzZWVuLmNvbnRhaW5zKCJjIikpOw0KICAgICAgICBhc3NlcnRUcnVl\nKHNlZW4uY29udGFpbnMoIngiKSk7DQogICAgICAgIGFzc2VydFRydWUoc2Vl\nbi5jb250YWlucygieSIpKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOw0KICAgICAgICBwYy5zZXRTZXRQQyhudWxsKTsNCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0u\nY2xvc2UoKTsNCg0KICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7DQogICAgICAgIHBjID0gZW0uZmluZChNYW5hZ2VkSWZhY2UuY2xh\nc3MsIG9pZCk7DQogICAgICAgIHNldCA9IHBjLmdldFNldFBDKCk7DQogICAg\nICAgIGFzc2VydFRydWUgKHNldCA9PSBudWxsIHx8IHNldC5zaXplKCkgPT0g\nMCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgdGVzdENvbGxlY3Rpb25JbnRlcmZhY2VzKCkgew0KICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsN\nCiAgICAgICAgTWFuYWdlZElmYWNlIHBjID0gZW0uY3JlYXRlSW5zdGFuY2Uo\nTWFuYWdlZElmYWNlLmNsYXNzKTsNCiAgICAgICAgU2V0IHNldCA9IG5ldyBI\nYXNoU2V0KCk7DQogICAgICAgIHNldC5hZGQoY3JlYXRlSW5zdGFuY2UoZW0s\nIDMpKTsNCiAgICAgICAgc2V0LmFkZChjcmVhdGVJbnN0YW5jZShlbSwgNCkp\nOw0KICAgICAgICBzZXQuYWRkKGNyZWF0ZUluc3RhbmNlKGVtLCA1KSk7DQog\nICAgICAgIHBjLnNldFNldEkoc2V0KTsNCiAgICAgICAgZW0ucGVyc2lzdChw\nYyk7DQogICAgICAgIE9iamVjdCBvaWQgPSBlbS5nZXRPYmplY3RJZChwYyk7\nDQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAg\nICAgIGVtLmNsb3NlKCk7DQoNCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOw0KICAgICAgICBwYyA9IGVtLmZpbmQoTWFuYWdlZElm\nYWNlLmNsYXNzLCBvaWQpOw0KICAgICAgICBzZXQgPSBwYy5nZXRTZXRJKCk7\nDQogICAgICAgIGFzc2VydEVxdWFscygzLCBzZXQuc2l6ZSgpKTsNCiAgICAg\nICAgQ29sbGVjdGlvbiBzZWVuID0gbmV3IEFycmF5TGlzdCgpOw0KICAgICAg\nICBNYW5hZ2VkSWZhY2UgcmVsID0gbnVsbDsNCiAgICAgICAgTWFuYWdlZElm\nYWNlIHRvUmVtID0gbnVsbDsNCiAgICAgICAgZm9yIChJdGVyYXRvciBpdCA9\nIHNldC5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7KSB7DQogICAgICAgICAg\nICByZWwgPSAoTWFuYWdlZElmYWNlKSBpdC5uZXh0KCk7DQogICAgICAgICAg\nICBzZWVuLmFkZChuZXcgSW50ZWdlcihyZWwuZ2V0SW50RmllbGQoKSkpOw0K\nICAgICAgICAgICAgaWYgKHJlbC5nZXRJbnRGaWVsZCgpID09IDQpDQogICAg\nICAgICAgICAgICAgdG9SZW0gPSByZWw7DQogICAgICAgIH0NCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDMsIHNlZW4uc2l6ZSgpKTsNCiAgICAgICAgYXNzZXJ0\nVHJ1ZShzZWVuLmNvbnRhaW5zKG5ldyBJbnRlZ2VyKDMpKSk7DQogICAgICAg\nIGFzc2VydFRydWUoc2Vlbi5jb250YWlucyhuZXcgSW50ZWdlcig0KSkpOw0K\nICAgICAgICBhc3NlcnRUcnVlKHNlZW4uY29udGFpbnMobmV3IEludGVnZXIo\nNSkpKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0K\nICAgICAgICBhc3NlcnROb3ROdWxsKHRvUmVtKTsNCiAgICAgICAgc2V0LnJl\nbW92ZSh0b1JlbSk7DQogICAgICAgIHNldC5hZGQoY3JlYXRlSW5zdGFuY2Uo\nZW0sIDE0KSk7DQogICAgICAgIHNldC5hZGQoY3JlYXRlSW5zdGFuY2UoZW0s\nIDE1KSk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nDQogICAgICAgIGVtLmNsb3NlKCk7DQoNCiAgICAgICAgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYyA9IGVtLmZpbmQoTWFu\nYWdlZElmYWNlLmNsYXNzLCBvaWQpOw0KICAgICAgICBzZXQgPSBwYy5nZXRT\nZXRJKCk7DQogICAgICAgIGFzc2VydEVxdWFscyg0LCBzZXQuc2l6ZSgpKTsN\nCiAgICAgICAgc2Vlbi5jbGVhcigpOw0KICAgICAgICBmb3IgKEl0ZXJhdG9y\nIGl0ID0gc2V0Lml0ZXJhdG9yKCk7IGl0Lmhhc05leHQoKTspIHsNCiAgICAg\nICAgICAgIHJlbCA9IChNYW5hZ2VkSWZhY2UpIGl0Lm5leHQoKTsNCiAgICAg\nICAgICAgIHNlZW4uYWRkKG5ldyBJbnRlZ2VyKHJlbC5nZXRJbnRGaWVsZCgp\nKSk7DQogICAgICAgIH0NCiAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHNlZW4u\nc2l6ZSgpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZShzZWVuLmNvbnRhaW5zKG5l\ndyBJbnRlZ2VyKDMpKSk7DQogICAgICAgIGFzc2VydFRydWUoc2Vlbi5jb250\nYWlucyhuZXcgSW50ZWdlcig1KSkpOw0KICAgICAgICBhc3NlcnRUcnVlKHNl\nZW4uY29udGFpbnMobmV3IEludGVnZXIoMTQpKSk7DQogICAgICAgIGFzc2Vy\ndFRydWUoc2Vlbi5jb250YWlucyhuZXcgSW50ZWdlcigxNSkpKTsNCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBwYy5z\nZXRTZXRQQyhudWxsKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCg0KICAgICAgICBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHBjID0gZW0u\nZmluZChNYW5hZ2VkSWZhY2UuY2xhc3MsIG9pZCk7DQogICAgICAgIHNldCA9\nIHBjLmdldFNldFBDKCk7DQogICAgICAgIGFzc2VydFRydWUgKHNldCA9PSBu\ndWxsIHx8IHNldC5zaXplKCkgPT0gMCk7DQogICAgICAgIGVtLmNsb3NlKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdE1peGVkUXVlcnkoKSB7\nDQogICAgICAgIGNyZWF0ZU1peGVkKCk7DQoNCiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0K\nICAgICAgICB0cnkgew0KICAgICAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0\nZVF1ZXJ5KCJzZWxlY3QgbyBmcm9tIE1peGVkSW50ZXJmYWNlIG8gIiArDQog\nICAgICAgICAgICAgICAgIndoZXJlIG8uaW50RmllbGQgPSA0Iik7DQogICAg\nICAgICAgICBDb2xsZWN0aW9uIGMgPSBxLmdldFJlc3VsdExpc3QoKTsNCiAg\nICAgICAgICAgIFNldCBzZWVuID0gbmV3IEhhc2hTZXQoKTsNCiAgICAgICAg\nICAgIGFzc2VydEVxdWFscygyLCBjLnNpemUoKSk7DQogICAgICAgICAgICBN\naXhlZEludGVyZmFjZSBwYzsNCiAgICAgICAgICAgIGZvciAoSXRlcmF0b3Ig\naXQgPSBjLml0ZXJhdG9yKCk7IGl0Lmhhc05leHQoKTspIHsNCiAgICAgICAg\nICAgICAgICBwYyA9IChNaXhlZEludGVyZmFjZSkgaXQubmV4dCgpOw0KICAg\nICAgICAgICAgICAgIGFzc2VydEVxdWFscyg0LCBwYy5nZXRJbnRGaWVsZCgp\nKTsNCiAgICAgICAgICAgICAgICBzZWVuLmFkZChwYy5nZXRDbGFzcygpKTsN\nCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGFzc2VydEVxdWFscygyLCBz\nZWVuLnNpemUoKSk7DQoNCiAgICAgICAgICAgIGZhaWwoIk9QRU5KUEEtNDgx\nIik7DQogICAgICAgIH0gY2F0Y2ggKFBlcnNpc3RlbmNlRXhjZXB0aW9uIGUp\nIHsNCiAgICAgICAgICAgIC8vIGV4cGVjdGVkDQogICAgICAgIH0gZmluYWxs\neSB7DQogICAgICAgICAgICBlbS5jbG9zZSgpOw0KICAgICAgICB9DQogICAg\nfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFF1ZXJ5Rm9yTWl4ZWRJbnRlcmZh\nY2VJbXBscygpIHsNCiAgICAgICAgY3JlYXRlTWl4ZWQoKTsNCg0KICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7DQogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgi\nc2VsZWN0IG8gZnJvbSBNaXhlZEludGVyZmFjZUltcGwgbyAiICsNCiAgICAg\nICAgICAgICJ3aGVyZSBvLmludEZpZWxkID0gNCIpOw0KICAgICAgICBNaXhl\nZEludGVyZmFjZSBwYyA9IChNaXhlZEludGVyZmFjZSkgcS5nZXRTaW5nbGVS\nZXN1bHQoKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIHBjLmdldEludEZp\nZWxkKCkpOw0KICAgICAgICBhc3NlcnRUcnVlKHBjIGluc3RhbmNlb2YgTWl4\nZWRJbnRlcmZhY2VJbXBsKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWl4ZWRFeHRlbnQoKSB7DQogICAg\nICAgIGNyZWF0ZU1peGVkKCk7DQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAg\nICBFeHRlbnQgZSA9IGVtLmNyZWF0ZUV4dGVudChNaXhlZEludGVyZmFjZS5j\nbGFzcywgdHJ1ZSk7DQogICAgICAgIFNldCBzZWVuID0gbmV3IEhhc2hTZXQo\nKTsNCiAgICAgICAgaW50IHNpemUgPSAwOw0KICAgICAgICBmb3IgKEl0ZXJh\ndG9yIGl0ID0gZS5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7KSB7DQogICAg\nICAgICAgICBzZWVuLmFkZChpdC5uZXh0KCkuZ2V0Q2xhc3MoKSk7DQogICAg\nICAgICAgICBzaXplKys7DQogICAgICAgIH0NCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDMsIHNpemUpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwgc2Vlbi5z\naXplKCkpOw0KDQogICAgICAgIGUgPSBlbS5jcmVhdGVFeHRlbnQoTWl4ZWRJ\nbnRlcmZhY2UuY2xhc3MsIGZhbHNlKTsNCiAgICAgICAgc2VlbiA9IG5ldyBI\nYXNoU2V0KCk7DQogICAgICAgIHNpemUgPSAwOw0KICAgICAgICBmb3IgKEl0\nZXJhdG9yIGl0ID0gZS5pdGVyYXRvcigpOyBpdC5oYXNOZXh0KCk7KSB7DQog\nICAgICAgICAgICBzZWVuLmFkZChpdC5uZXh0KCkuZ2V0Q2xhc3MoKSk7DQog\nICAgICAgICAgICBzaXplKys7DQogICAgICAgIH0NCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIHNpemUpOw0KICAgICAgICBhc3NlcnROb3RFcXVhbHMoTWl4\nZWRJbnRlcmZhY2VJbXBsLmNsYXNzLCBzZWVuLml0ZXJhdG9yKCkubmV4dCgp\nKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCiAgICB9DQoNCiAgICBwcml2YXRl\nIHZvaWQgY3JlYXRlTWl4ZWQoKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBNaXhl\nZEludGVyZmFjZSBwYyA9IGVtLmNyZWF0ZUluc3RhbmNlKE1peGVkSW50ZXJm\nYWNlLmNsYXNzKTsNCiAgICAgICAgcGMuc2V0SW50RmllbGQoNCk7DQogICAg\nICAgIGVtLnBlcnNpc3QocGMpOw0KICAgICAgICBwYyA9IG5ldyBNaXhlZElu\ndGVyZmFjZUltcGwoKTsNCiAgICAgICAgcGMuc2V0SW50RmllbGQoNCk7DQog\nICAgICAgIGVtLnBlcnNpc3QocGMpOw0KICAgICAgICBwYyA9IG5ldyBNaXhl\nZEludGVyZmFjZUltcGwoKTsNCiAgICAgICAgcGMuc2V0SW50RmllbGQoOCk7\nDQogICAgICAgIGVtLnBlcnNpc3QocGMpOw0KICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOw0KICAgICAgICBlbS5jbG9zZSgpOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RVbmltcGxlbWVudGVkVGhyb3dz\nRXhjZXB0aW9uKCkgew0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIE1hbmFn\nZWRJZmFjZSBwYyA9IGNyZWF0ZUluc3RhbmNlKGVtLCAxKTsNCiAgICAgICAg\ndHJ5IHsNCiAgICAgICAgICAgIHBjLnVuaW1wbGVtZW50ZWQoKTsNCiAgICAg\nICAgICAgIGZhaWwoIkV4Y2VwdGlvbiBleHBlY3RlZC4iKTsNCiAgICAgICAg\nfSBjYXRjaCAoVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24gdW9lKSB7\nfSAvLyBnb29kDQogICAgICAgIGVtLmNsb3NlKCk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgdGVzdE5vbk1hcHBlZENyZWF0ZUluc3RhbmNlRXhjZXB0\naW9uKCkgew0KICAgICAgICAvLyBPcGVuSlBBJ3Mgc3VwcG9ydCBvZiBub24t\nbWFwcGVkIGludGVyZmFjZXMgZGlmZmVycyBmcm9tIEpETyBzdXBwb3J0Ow0K\nICAgICAgICAvLyB0aGVyZSBpcyBubyBzcGVjaWFsIHF1ZXJ5IG9yIHJlbGF0\naW9uIHN1cHBvcnQgZm9yIG5vbi1tYXBwZWQNCiAgICAgICAgLy8gaW50ZXJm\nYWNlcyBpbiBPcGVuSlBBIGF0IHRoaXMgdGltZS4NCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgZW0gPSBudWxsOw0KICAgICAgICB0cnkgew0KICAg\nICAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAg\nICAgICAgICAgZW0uY3JlYXRlSW5zdGFuY2UoTm9uTWFwcGVkSW50ZXJmYWNl\nLmNsYXNzKTsNCiAgICAgICAgICAgIGZhaWwoIklsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbiBleHBlY3RlZCIpOw0KICAgICAgICB9IGNhdGNoIChJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24gZSkge30gLy8gZ29vZA0KICAgICAgICBpZiAo\nZW0gIT0gbnVsbCkNCiAgICAgICAgICAgIGVtLmNsb3NlKCk7DQogICAgfQ0K\nDQogICAgcHVibGljIHZvaWQgdGVzdERldGFjaCgpIHsNCiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQog\nICAgICAgIE1hbmFnZWRJZmFjZSBwYyA9IGNyZWF0ZUluc3RhbmNlKGVtLCA0\nKTsNCiAgICAgICAgZW0ucGVyc2lzdChwYyk7DQogICAgICAgIE9iamVjdCBv\naWQgPSBlbS5nZXRPYmplY3RJZChwYyk7DQogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQoNCiAg\nICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAg\nICBNYW5hZ2VkSWZhY2UgcGN4ID0gZW0uZmluZChNYW5hZ2VkSWZhY2UuY2xh\nc3MsIG9pZCk7DQogICAgICAgIHBjID0gZW0uZGV0YWNoKHBjeCk7DQogICAg\nICAgIGVtLmNsb3NlKCk7DQoNCiAgICAgICAgYXNzZXJ0VHJ1ZShlbS5pc0Rl\ndGFjaGVkKHBjKSk7DQogICAgICAgIHBjLnNldEludEZpZWxkKDcpOw0KDQog\nICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBlbS5t\nZXJnZShwYyk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQoNCiAgICAgICAgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYyA9IGVtLmZpbmQo\nTWFuYWdlZElmYWNlLmNsYXNzLCBvaWQpOw0KICAgICAgICBhc3NlcnRFcXVh\nbHMoNywgcGMuZ2V0SW50RmllbGQoKSk7DQogICAgICAgIGVtLmNsb3NlKCk7\nDQogICAgfQ0KDQogICAgcHJpdmF0ZSBNYW5hZ2VkSWZhY2UgY3JlYXRlSW5z\ndGFuY2UoT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0sIGludCBpKSB7DQogICAg\nICAgIE1hbmFnZWRJZmFjZSBwYyA9IGVtLmNyZWF0ZUluc3RhbmNlKE1hbmFn\nZWRJZmFjZS5jbGFzcyk7DQogICAgICAgIHBjLnNldEludEZpZWxkKGkpOw0K\nICAgICAgICByZXR1cm4gcGM7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

