{"sha":"737d1e795848d6ae7810879ee5b2e3a52f6f3139","node_id":"MDQ6QmxvYjIwNjM2NDo3MzdkMWU3OTU4NDhkNmFlNzgxMDg3OWVlNWIyZTNhNTJmNmYzMTM5","size":9672,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/737d1e795848d6ae7810879ee5b2e3a52f6f3139","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UubWV0YTsNCg0KaW1wb3J0IGphdmEudXRpbC5BcnJheXM7\nDQppbXBvcnQgamF2YS51dGlsLkxpc3Q7DQoNCg0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5tZXRhLmNvbW1vbi5hcHBzLk9yZGVy\nQnlQQzsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nbWV0YS5jb21tb24uYXBwcy5PcmRlckJ5UENSZWw7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLm1ldGEuY29tbW9uLmFwcHMuT3Jk\nZXJCeVBDUmVsU3ViOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5jb21tb24udXRpbHMuQWJzdHJhY3RUZXN0Q2FzZTsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuRmV0Y2hQbGFuOw0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBB\nRW50aXR5TWFuYWdlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuT3BlbkpQQVF1ZXJ5Ow0KDQovKioNCiAqIDxwPlRlc3QgdGhl\nIDxjb2RlPm9yZGVyLWJ5PC9jb2RlPiBmaWVsZCBleHRlbnNpb24uPC9wPg0K\nICoNCiAqIEBhdXRob3IgQWJlIFdoaXRlDQogKi8NCnB1YmxpYyBjbGFzcyBU\nZXN0T3JkZXJCeQ0KICAgIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2FzZSB7DQoN\nCiAgICBwdWJsaWMgVGVzdE9yZGVyQnkoU3RyaW5nIHRlc3QpIHsNCiAgICAg\nICAgc3VwZXIodGVzdCwgIm1ldGFjYWN0dXNhcHAiKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsNCiAgICAgICAgZGVsZXRlQWxsKE9y\nZGVyQnlQQ1JlbC5jbGFzcyk7DQogICAgICAgIGRlbGV0ZUFsbChPcmRlckJ5\nUEMuY2xhc3MpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RTdHJp\nbmdMaXN0KCkgew0KICAgICAgICBzdHJpbmdMaXN0VGVzdChmYWxzZSwgZmFs\nc2UpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RFYWdlclBhcmFs\nbGVsU3RyaW5nTGlzdCgpIHsNCiAgICAgICAgc3RyaW5nTGlzdFRlc3QodHJ1\nZSwgdHJ1ZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEVhZ2Vy\nSm9pblN0cmluZ0xpc3QoKSB7DQogICAgICAgIHN0cmluZ0xpc3RUZXN0KHRy\ndWUsIGZhbHNlKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZvaWQgc3RyaW5n\nTGlzdFRlc3QoYm9vbGVhbiBlYWdlciwgYm9vbGVhbiBwYXJhbGxlbCkgew0K\nICAgICAgICBTdHJpbmdbXSBzdHJzID0gbmV3IFN0cmluZ1tdew0KICAgICAg\nICAgICAgIjkiLCAiMCIsICI1IiwgIjEiLCAiMyIsICI3IiwgIjgiLCAiMiIs\nICI2IiwgIjQiLA0KICAgICAgICB9Ow0KICAgICAgICBPcmRlckJ5UEMgcGMg\nPSBuZXcgT3JkZXJCeVBDKCk7DQogICAgICAgIHBjLnNldElkKDFMKTsNCiAg\nICAgICAgcGMuZ2V0U3RyaW5nTGlzdEFzYygpLmFkZEFsbChBcnJheXMuYXNM\naXN0KHN0cnMpKTsNCg0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBw\nbSA9DQogICAgICAgICAgICAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJl\nbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAg\nICAgICBwbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgZW5kVHgocG0pOw0KICAg\nICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMpOw0KICAgICAg\nICBlbmRFbShwbSk7DQoNCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1h\nbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIGlmIChl\nYWdlcikNCiAgICAgICAgICAgICgoRmV0Y2hQbGFuKSBwbS5nZXRGZXRjaFBs\nYW4oKSkuYWRkRmllbGQoT3JkZXJCeVBDLmNsYXNzLA0KICAgICAgICAgICAg\nICAgICJzdHJpbmdMaXN0QXNjIik7DQogICAgICAgIGlmIChwYXJhbGxlbCkg\new0KDQogICAgICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IHBtLmNyZWF0ZVF1\nZXJ5KA0KICAgICAgICAgICAgICAgICJzZWxlY3QgYSBGUk9NICIgKyBPcmRl\nckJ5UEMuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpKTsNCiAgICAgICAgICAgIExp\nc3QgcmVzID0gKExpc3QpIHEuZ2V0UmVzdWx0TGlzdCgpOw0KICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIHJlcy5zaXplKCkpOw0KICAgICAgICAgICAg\ncGMgPSAoT3JkZXJCeVBDKSByZXMuZ2V0KDApOw0KICAgICAgICB9IGVsc2UN\nCiAgICAgICAgICAgIHBjID0gKE9yZGVyQnlQQykgcG0uZmluZChPcmRlckJ5\nUEMuY2xhc3MsIG9pZCk7DQogICAgICAgIExpc3Qgc3RyaW5nTGlzdCA9IHBj\nLmdldFN0cmluZ0xpc3RBc2MoKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCAxMDsgaSsrKQ0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKFN0cmlu\nZy52YWx1ZU9mKGkpLCBzdHJpbmdMaXN0LmdldChpKSk7DQogICAgICAgIGVu\nZEVtKHBtKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW50QXJy\nYXkoKSB7DQogICAgICAgIGludFtdIGludHMgPSBuZXcgaW50W117IDksIDAs\nIDUsIDEsIDMsIDcsIDgsIDIsIDYsIDQsIH07DQogICAgICAgIE9yZGVyQnlQ\nQyBwYyA9IG5ldyBPcmRlckJ5UEMoKTsNCiAgICAgICAgcGMuc2V0SWQoMUwp\nOw0KICAgICAgICBwYy5zZXRJbnRBcnJheURlc2MoaW50cyk7DQoNCiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPQ0KICAgICAgICAgICAgKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0K\nICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgcG0ucGVyc2lzdChwYyk7\nDQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9IHBt\nLmdldE9iamVjdElkKHBjKTsNCiAgICAgICAgZW5kRW0ocG0pOw0KDQogICAg\nICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5\nTWFuYWdlcigpOw0KICAgICAgICBwYyA9IChPcmRlckJ5UEMpIHBtLmZpbmQo\nT3JkZXJCeVBDLmNsYXNzLCBvaWQpOw0KICAgICAgICBpbnRbXSBpbnRBcnJh\neSA9IHBjLmdldEludEFycmF5RGVzYygpOw0KICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IDEwOyBpKyspDQogICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nOSAtIGksIGludEFycmF5W2ldKTsNCiAgICAgICAgZW5kRW0ocG0pOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RPcmRlckJ5UEsoKSB7DQogICAg\nICAgIG9yZGVyQnlQS1Rlc3QoZmFsc2UsIGZhbHNlLCBmYWxzZSk7DQogICAg\nfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEVhZ2VySm9pbk9yZGVyQnlQSygp\nIHsNCiAgICAgICAgb3JkZXJCeVBLVGVzdCh0cnVlLCBmYWxzZSwgZmFsc2Up\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RFYWdlclBhcmFsbGVs\nT3JkZXJCeVBLKCkgew0KICAgICAgICBvcmRlckJ5UEtUZXN0KHRydWUsIHRy\ndWUsIGZhbHNlKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25l\nVG9NYW55T3JkZXJCeVBLKCkgew0KICAgICAgICBvcmRlckJ5UEtUZXN0KGZh\nbHNlLCBmYWxzZSwgdHJ1ZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\ndGVzdEVhZ2VySm9pbk9uZVRvTWFueU9yZGVyQnlQSygpIHsNCiAgICAgICAg\nb3JkZXJCeVBLVGVzdCh0cnVlLCBmYWxzZSwgdHJ1ZSk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdEVhZ2VyUGFyYWxsZWxPbmVUb01hbnlPcmRl\nckJ5UEsoKSB7DQogICAgICAgIG9yZGVyQnlQS1Rlc3QodHJ1ZSwgdHJ1ZSwg\ndHJ1ZSk7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lkIG9yZGVyQnlQS1Rl\nc3QoYm9vbGVhbiBlYWdlciwgYm9vbGVhbiBwYXJhbGxlbCwNCiAgICAgICAg\nYm9vbGVhbiBvbmVUb01hbnkpIHsNCiAgICAgICAgbG9uZ1tdIGlkcyA9IG5l\ndyBsb25nW117IDksIDAsIDUsIDEsIDMsIDcsIDgsIDIsIDYsIDQsIH07DQog\nICAgICAgIE9yZGVyQnlQQyBwYyA9IG5ldyBPcmRlckJ5UEMoKTsNCiAgICAg\nICAgcGMuc2V0SWQoMUwpOw0KICAgICAgICBPcmRlckJ5UEMgcGMyID0gbmV3\nIE9yZGVyQnlQQygpOw0KICAgICAgICBwYzIuc2V0SWQoMkwpOw0KICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykgew0KICAg\nICAgICAgICAgT3JkZXJCeVBDUmVsIHJlbCA9IChpICUgMiA9PSAwKSA/IG5l\ndyBPcmRlckJ5UENSZWwoKQ0KICAgICAgICAgICAgICAgIDogbmV3IE9yZGVy\nQnlQQ1JlbFN1YigpOw0KICAgICAgICAgICAgcmVsLnNldElkKGlkc1tpXSk7\nDQogICAgICAgICAgICBpZiAob25lVG9NYW55KSB7DQogICAgICAgICAgICAg\nICAgcGMuZ2V0T25lVG9NYW55QXNjKCkuYWRkKHJlbCk7DQogICAgICAgICAg\nICAgICAgcmVsLnNldFRvT25lKHBjKTsNCiAgICAgICAgICAgIH0gZWxzZQ0K\nICAgICAgICAgICAgICAgIHBjLmdldE9yZGVyQnlQS0FzYygpLmFkZChyZWwp\nOw0KDQogICAgICAgICAgICBpZiAocGFyYWxsZWwpDQogICAgICAgICAgICAg\nICAgcGMyLmdldE9yZGVyQnlQS0FzYygpLmFkZChyZWwpOw0KICAgICAgICB9\nDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0NCiAgICAgICAg\nICAgIChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIHBtLnBlcnNp\nc3QocGMpOw0KICAgICAgICBwbS5wZXJzaXN0KHBjMik7DQogICAgICAgIGVu\nZFR4KHBtKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElk\nKHBjKTsNCiAgICAgICAgZW5kRW0ocG0pOw0KDQogICAgICAgIHBtID0gKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0K\nICAgICAgICBpZiAoZWFnZXIpDQogICAgICAgICAgICAoKEZldGNoUGxhbikg\ncG0uZ2V0RmV0Y2hQbGFuKCkpLmFkZEZpZWxkKE9yZGVyQnlQQy5jbGFzcywN\nCiAgICAgICAgICAgICAgICAib3JkZXJCeVBLQXNjIik7DQogICAgICAgIGlm\nIChwYXJhbGxlbCkgew0KDQogICAgICAgICAgICBPcGVuSlBBUXVlcnkgcSA9\nIHBtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgYSBGUk9NICIgKw0KICAgICAgICAg\nICAgICAgIE9yZGVyQnlQQy5jbGFzcy5nZXRTaW1wbGVOYW1lKCkgKyAiIHNl\nbGVjdCBvcmRlciBieSBpZCBhc2MiKTsNCiAgICAgICAgICAgIHBjID0gKE9y\nZGVyQnlQQykgKChMaXN0KSBxLmdldFJlc3VsdExpc3QoKSkuZ2V0KDApOw0K\nICAgICAgICAgICAgcS5jbG9zZUFsbCgpOw0KICAgICAgICB9IGVsc2UNCiAg\nICAgICAgICAgIHBjID0gKE9yZGVyQnlQQykgcG0uZmluZChPcmRlckJ5UEMu\nY2xhc3MsIG9pZCk7DQoNCiAgICAgICAgTGlzdCBvcmRlckJ5UEsgPSAob25l\nVG9NYW55KSA/IHBjLmdldE9uZVRvTWFueUFzYygpDQogICAgICAgICAgICA6\nIHBjLmdldE9yZGVyQnlQS0FzYygpOw0KICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IDEwOyBpKyspDQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoaSwg\nKChPcmRlckJ5UENSZWwpIG9yZGVyQnlQSy5nZXQoaSkpLmdldElkKCkpOw0K\nICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\ndGVzdE9yZGVyQnlSZWxhdGVkRmllbGQoKSB7DQogICAgICAgIFN0cmluZ1td\nIHN0cnMgPSBuZXcgU3RyaW5nW117DQogICAgICAgICAgICAiOSIsICIwIiwg\nIjUiLCAiMSIsICIzIiwgIjciLCAiOCIsICIyIiwgIjYiLCAiNCIsDQogICAg\nICAgIH07DQogICAgICAgIE9yZGVyQnlQQyBwYyA9IG5ldyBPcmRlckJ5UEMo\nKTsNCiAgICAgICAgcGMuc2V0SWQoMUwpOw0KICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IHN0cnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIE9y\nZGVyQnlQQ1JlbCByZWwgPSAoaSAlIDIgPT0gMCkgPyBuZXcgT3JkZXJCeVBD\nUmVsKCkNCiAgICAgICAgICAgICAgICA6IG5ldyBPcmRlckJ5UENSZWxTdWIo\nKTsNCiAgICAgICAgICAgIHJlbC5zZXRJZChpKTsNCiAgICAgICAgICAgIHJl\nbC5zZXRTdHJpbmcoc3Ryc1tpXSk7DQogICAgICAgICAgICBwYy5nZXRPcmRl\nckJ5U3RyaW5nRGVzYygpLmFkZChyZWwpOw0KICAgICAgICB9DQogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0NCiAgICAgICAgICAgIChPcGVu\nSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIHBtLnBlcnNpc3QocGMpOw0K\nICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIE9iamVjdCBvaWQgPSBwbS5n\nZXRPYmplY3RJZChwYyk7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAg\nICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsNCiAgICAgICAgcGMgPSAoT3JkZXJCeVBDKSBwbS5maW5kKE9y\nZGVyQnlQQy5jbGFzcywgb2lkKTsNCiAgICAgICAgTGlzdCBvcmRlckJ5UmVs\nRmllbGQgPSBwYy5nZXRPcmRlckJ5U3RyaW5nRGVzYygpOw0KICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IDEwOyBpKyspDQogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoU3RyaW5nLnZhbHVlT2YoOSAtIGkpLCAoKE9yZGVyQnlQQ1Jl\nbCkNCiAgICAgICAgICAgICAgICBvcmRlckJ5UmVsRmllbGQuZ2V0KGkpKS5n\nZXRTdHJpbmcoKSk7DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0T3JkZXJCeVBLQW5kUmVsYXRlZEZpZWxkKCkg\new0KICAgICAgICBvcmRlckJ5UEtBbmRSZWxhdGVkRmllbGRUZXN0KGZhbHNl\nLCBmYWxzZSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEVhZ2Vy\nSm9pbk9yZGVyQnlQS0FuZFJlbGF0ZWRGaWVsZCgpIHsNCiAgICAgICAgb3Jk\nZXJCeVBLQW5kUmVsYXRlZEZpZWxkVGVzdCh0cnVlLCBmYWxzZSk7DQogICAg\nfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEVhZ2VyUGFyYWxsZWxPcmRlckJ5\nUEtBbmRSZWxhdGVkRmllbGQoKSB7DQogICAgICAgIG9yZGVyQnlQS0FuZFJl\nbGF0ZWRGaWVsZFRlc3QodHJ1ZSwgdHJ1ZSk7DQogICAgfQ0KDQogICAgcHJp\ndmF0ZSB2b2lkIG9yZGVyQnlQS0FuZFJlbGF0ZWRGaWVsZFRlc3QoYm9vbGVh\nbiBlYWdlciwgYm9vbGVhbiBwYXJhbGxlbCkgew0KICAgICAgICBPcmRlckJ5\nUEMgcGMgPSBuZXcgT3JkZXJCeVBDKCk7DQogICAgICAgIHBjLnNldElkKDFM\nKTsNCiAgICAgICAgT3JkZXJCeVBDIHBjMiA9IG5ldyBPcmRlckJ5UEMoKTsN\nCiAgICAgICAgcGMuc2V0SWQoMkwpOw0KDQogICAgICAgIE9yZGVyQnlQQ1Jl\nbCByZWwxID0gbmV3IE9yZGVyQnlQQ1JlbCgpOw0KICAgICAgICByZWwxLnNl\ndElkKDFMKTsNCiAgICAgICAgcmVsMS5zZXRTdHJpbmcoIjEiKTsNCiAgICAg\nICAgT3JkZXJCeVBDUmVsIHJlbDIgPSBuZXcgT3JkZXJCeVBDUmVsU3ViKCk7\nDQogICAgICAgIHJlbDIuc2V0SWQoMkwpOw0KICAgICAgICByZWwyLnNldFN0\ncmluZygiMSIpOw0KICAgICAgICBPcmRlckJ5UENSZWwgcmVsMyA9IG5ldyBP\ncmRlckJ5UENSZWwoKTsNCiAgICAgICAgcmVsMy5zZXRJZCgzTCk7DQogICAg\nICAgIHJlbDMuc2V0U3RyaW5nKCIyIik7DQogICAgICAgIE9yZGVyQnlQQ1Jl\nbCByZWw0ID0gbmV3IE9yZGVyQnlQQ1JlbFN1YigpOw0KICAgICAgICByZWw0\nLnNldElkKDRMKTsNCiAgICAgICAgcmVsNC5zZXRTdHJpbmcoIjIiKTsNCiAg\nICAgICAgcGMuZ2V0T3JkZXJCeVN0cmluZ0FuZFBLRGVzYygpLmFkZEFsbChB\ncnJheXMuYXNMaXN0DQogICAgICAgICAgICAobmV3IE9iamVjdFtdeyByZWwx\nLCByZWwyLCByZWw0LCByZWwzLCB9KSk7DQogICAgICAgIGlmIChwYXJhbGxl\nbCkNCiAgICAgICAgICAgIHBjMi5nZXRPcmRlckJ5U3RyaW5nQW5kUEtEZXNj\nKCkuYWRkQWxsKEFycmF5cy5hc0xpc3QNCiAgICAgICAgICAgICAgICAobmV3\nIE9iamVjdFtdeyByZWwxLCByZWwyLCByZWw0LCByZWwzLCB9KSk7DQoNCiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPQ0KICAgICAgICAgICAg\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigp\nOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgcG0ucGVyc2lzdChw\nYyk7DQogICAgICAgIHBtLnBlcnNpc3QocGMyKTsNCiAgICAgICAgZW5kVHgo\ncG0pOw0KICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQocGMp\nOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAgICAgICAgcG0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAg\nICAgIGlmIChlYWdlcikNCiAgICAgICAgICAgICgoRmV0Y2hQbGFuKSBwbS5n\nZXRGZXRjaFBsYW4oKSkuYWRkRmllbGQoT3JkZXJCeVBDLmNsYXNzLA0KICAg\nICAgICAgICAgICAgICJvcmRlckJ5U3RyaW5nQW5kUEtEZXNjIik7DQogICAg\nICAgIGlmIChwYXJhbGxlbCkgew0KICAgICAgICAgICAgT3BlbkpQQVF1ZXJ5\nIHEgPSBwbS5jcmVhdGVRdWVyeSgic2VsZWN0IGEgRlJPTSAiICsNCiAgICAg\nICAgICAgICAgICBPcmRlckJ5UEMuY2xhc3MuZ2V0U2ltcGxlTmFtZSgpICsg\nIiBzZWxlY3Qgb3JkZXIgYnkgaWQgYXNjIik7DQogICAgICAgICAgICBwYyA9\nIChPcmRlckJ5UEMpICgoTGlzdCkgcS5nZXRSZXN1bHRMaXN0KCkpLmdldCgw\nKTsNCiAgICAgICAgICAgIHEuY2xvc2VBbGwoKTsNCiAgICAgICAgfSBlbHNl\nDQogICAgICAgICAgICBwYyA9IChPcmRlckJ5UEMpIHBtLmZpbmQoT3JkZXJC\neVBDLmNsYXNzLCBvaWQpOw0KICAgICAgICBMaXN0IG11bHRpT3JkZXIgPSBw\nYy5nZXRPcmRlckJ5U3RyaW5nQW5kUEtEZXNjKCk7DQogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgNDsgaSsrKQ0KICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKDQgLSBpLCAoKE9yZGVyQnlQQ1JlbCkgbXVsdGlPcmRlci5nZXQoaSkp\nLmdldElkKCkpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

