{"sha":"0e4bd761b1817a7b86d21532c83e1eb4506e08c3","node_id":"MDQ6QmxvYjIwNjM2NDowZTRiZDc2MWIxODE3YTdiODZkMjE1MzJjODNlMWViNDUwNmUwOGMz","size":13389,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0e4bd761b1817a7b86d21532c83e1eb4506e08c3","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UubWV0YTsNCg0KaW1wb3J0IGphdmEudXRpbC5IYXNoTWFw\nOw0KaW1wb3J0IGphdmEudXRpbC5NYXA7DQppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuRW50aXR5TWFuYWdlckZhY3Rvcnk7DQoNCg0KaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5tZXRhLmNvbW1vbi5hcHBzLlZh\nbHVlU3RyYXRlZ3lQQzsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0YTsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVu\ndGl0eU1hbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwu\nT3BlbkpQQUV4Y2VwdGlvbjsNCg0KLyoqDQogKiA8cD5UZXN0IHZhbHVlIGFu\nZCB1cGRhdGUgc3RyYXRlZ2llcy4gIEFsc28gdGVzdHMgdmVyc2lvbiBmaWVs\nZHMsIHdoaWNoDQogKiBhcmUgcmVwcmVzZW50ZWQgaW4gSkRPIGFzIGEgdmFs\ndWUgc3RyYXRlZ3kuPC9wPg0KICoNCiAqIEBhdXRob3IgQWJlIFdoaXRlDQog\nKi8NCnB1YmxpYyBjbGFzcyBUZXN0VmFsdWVTdHJhdGVnaWVzDQogICAgZXh0\nZW5kcyBBYnN0cmFjdFRlc3RDYXNlIHsNCg0KICAgIHB1YmxpYyBUZXN0VmFs\ndWVTdHJhdGVnaWVzKFN0cmluZyB0ZXN0KSB7DQogICAgICAgIHN1cGVyKHRl\nc3QsICJtZXRhY2FjdHVzYXBwIik7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgc2V0VXAoKSB7DQogICAgICAgIGRlbGV0ZUFsbChWYWx1ZVN0cmF0ZWd5\nUEMuY2xhc3MpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RJZ25v\ncmVVcGRhdGUoKSB7DQogICAgICAgIFZhbHVlU3RyYXRlZ3lQQyBwYyA9IG5l\ndyBWYWx1ZVN0cmF0ZWd5UEMoKTsNCiAgICAgICAgcGMuc2V0TmFtZSgicGMi\nKTsNCiAgICAgICAgcGMuc2V0SWdub3JlVXBkYXRlKDEwKTsNCg0KICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9DQogICAgICAgICAgICAoT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQog\nICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBwbS5wZXJzaXN0KHBjKTsN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwLCBwYy5nZXRJZ25vcmVVcGRhdGUo\nKSk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgT2JqZWN0IG9pZCA9\nIHBtLmdldE9iamVjdElkKHBjKTsNCiAgICAgICAgZW5kRW0ocG0pOw0KDQog\nICAgICAgIC8vcG0gPSBnZXRQTShmYWxzZSwgZmFsc2UpOw0KICAgICAgICBw\nbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsNCiAgICAgICAgcGMgPSAoVmFsdWVTdHJhdGVneVBDKSBwbS5maW5k\nKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkKTsNCiAgICAgICAgYXNzZXJ0\nTm90TnVsbChwYyk7DQogICAgICAgIGFzc2VydEVxdWFscygxMCwgcGMuZ2V0\nSWdub3JlVXBkYXRlKCkpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAg\nICAgcGMuc2V0SWdub3JlVXBkYXRlKDEwMCk7DQogICAgICAgIGFzc2VydEZh\nbHNlKHBtLmlzRGlydHkocGMpKTsNCiAgICAgICAgcG0udHJhbnNhY3Rpb25h\nbChwYywgZmFsc2UpOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGFz\nc2VydEVxdWFscygxMCwgcGMuZ2V0SWdub3JlVXBkYXRlKCkpOw0KICAgICAg\nICBlbmRFbShwbSk7DQoNCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1h\nbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHBjID0g\nKFZhbHVlU3RyYXRlZ3lQQykgcG0uZmluZChWYWx1ZVN0cmF0ZWd5UEMuY2xh\nc3MsIG9pZCk7DQogICAgICAgIGFzc2VydE5vdE51bGwocGMpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoMTAsIHBjLmdldElnbm9yZVVwZGF0ZSgpKTsNCiAg\nICAgICAgZW5kRW0ocG0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRl\nc3RSZXN0cmljdFVwZGF0ZSgpIHsNCiAgICAgICAgVmFsdWVTdHJhdGVneVBD\nIHBjID0gbmV3IFZhbHVlU3RyYXRlZ3lQQygpOw0KICAgICAgICBwYy5zZXRO\nYW1lKCJwYyIpOw0KICAgICAgICBwYy5zZXRSZXN0cmljdFVwZGF0ZSgxMCk7\nDQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPQ0KICAgICAg\nICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFu\nYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgcG0ucGVy\nc2lzdChwYyk7DQogICAgICAgIGFzc2VydEVxdWFscygxMCwgcGMuZ2V0UmVz\ndHJpY3RVcGRhdGUoKSk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAg\nT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElkKHBjKTsNCiAgICAgICAgZW5k\nRW0ocG0pOw0KDQogICAgICAgIC8vcG0gPSBnZXRQTShmYWxzZSwgZmFsc2Up\nOw0KICAgICAgICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgcGMgPSAoVmFsdWVTdHJhdGVn\neVBDKSBwbS5maW5kKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkKTsNCiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChwYyk7DQogICAgICAgIGFzc2VydEVxdWFs\ncygxMCwgcGMuZ2V0UmVzdHJpY3RVcGRhdGUoKSk7DQogICAgICAgIHN0YXJ0\nVHgocG0pOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgcGMuc2V0UmVz\ndHJpY3RVcGRhdGUoMTAwKTsNCiAgICAgICAgICAgIGZhaWwoIkFsbG93ZWQg\ndXBkYXRlIG9mIHJlc3RyaWN0ZWQgZmllbGQuIik7DQogICAgICAgIH0gY2F0\nY2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsNCiAgICAgICAgfQ0KICAgICAg\nICBlbmRUeChwbSk7DQogICAgICAgIGFzc2VydEVxdWFscygxMCwgcGMuZ2V0\nUmVzdHJpY3RVcGRhdGUoKSk7DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0VVVJRCgpIHsNCiAgICAgICAgVmFs\ndWVTdHJhdGVneVBDIHBjID0gbmV3IFZhbHVlU3RyYXRlZ3lQQygpOw0KICAg\nICAgICBWYWx1ZVN0cmF0ZWd5UEMgcGMyID0gbmV3IFZhbHVlU3RyYXRlZ3lQ\nQygpOw0KICAgICAgICBwYy5zZXROYW1lKCJwYyIpOw0KICAgICAgICBwYzIu\nc2V0TmFtZSgicGMyIik7DQogICAgICAgIGFzc2VydE51bGwocGMuZ2V0VVVJ\nRCgpKTsNCiAgICAgICAgYXNzZXJ0TnVsbChwYzIuZ2V0VVVJRCgpKTsNCiAg\nICAgICAgYXNzZXJ0TnVsbChwYy5nZXRVVUlESGV4KCkpOw0KICAgICAgICBh\nc3NlcnROdWxsKHBjMi5nZXRVVUlESGV4KCkpOw0KDQogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIHBtID0NCiAgICAgICAgICAgIChPcGVuSlBBRW50\naXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAg\ncG0uc2V0T3B0aW1pc3RpYyh0cnVlKTsNCiAgICAgICAgc3RhcnRUeChwbSk7\nDQogICAgICAgIHBtLnBlcnNpc3QocGMpOw0KICAgICAgICBwbS5wZXJzaXN0\nKHBjMik7DQogICAgICAgIFN0cmluZyBzdHIgPSBwYy5nZXRVVUlEKCk7DQog\nICAgICAgIFN0cmluZyBoZXggPSBwYy5nZXRVVUlESGV4KCk7DQogICAgICAg\nIGFzc2VydFRydWUoIXBtLmlzU3RvcmVBY3RpdmUoKSk7ICAgIC8vIG5vIGZs\ndXNoIG5lZWRlZA0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIFN0cmlu\nZyBzdHIyID0gcGMyLmdldFVVSUQoKTsNCiAgICAgICAgU3RyaW5nIGhleDIg\nPSBwYzIuZ2V0VVVJREhleCgpOw0KICAgICAgICBPYmplY3Qgb2lkID0gcG0u\nZ2V0T2JqZWN0SWQocGMpOw0KICAgICAgICBPYmplY3Qgb2lkMiA9IHBtLmdl\ndE9iamVjdElkKHBjMik7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAg\nICBhc3NlcnROb3ROdWxsKHN0cik7DQogICAgICAgIGFzc2VydE5vdE51bGwo\nc3RyMik7DQogICAgICAgIGFzc2VydFRydWUoIXN0ci5lcXVhbHMoc3RyMikp\nOw0KICAgICAgICBhc3NlcnROb3ROdWxsKGhleCk7DQogICAgICAgIGFzc2Vy\ndE5vdE51bGwoaGV4Mik7DQogICAgICAgIGFzc2VydFRydWUoIWhleC5lcXVh\nbHMoaGV4MikpOw0KDQogICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYyA9IChW\nYWx1ZVN0cmF0ZWd5UEMpIHBtLmZpbmQoVmFsdWVTdHJhdGVneVBDLmNsYXNz\nLCBvaWQpOw0KICAgICAgICBwYzIgPSAoVmFsdWVTdHJhdGVneVBDKSBwbS5m\naW5kKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkMik7DQogICAgICAgIGFz\nc2VydEVxdWFscyhzdHIsIHBjLmdldFVVSUQoKSk7DQogICAgICAgIGFzc2Vy\ndEVxdWFscyhzdHIyLCBwYzIuZ2V0VVVJRCgpKTsNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGhleCwgcGMuZ2V0VVVJREhleCgpKTsNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGhleDIsIHBjMi5nZXRVVUlESGV4KCkpOw0KICAgICAgICBzdGFy\ndFR4KHBtKTsNCiAgICAgICAgcGMuc2V0VVVJREhleCgiZm9vIik7DQogICAg\nICAgIHBjMi5zZXRVVUlESGV4KCJiYXIiKTsNCiAgICAgICAgZW5kVHgocG0p\nOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAgICAgICAgcG0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAg\nICAgIHBjID0gKFZhbHVlU3RyYXRlZ3lQQykgcG0uZmluZChWYWx1ZVN0cmF0\nZWd5UEMuY2xhc3MsIG9pZCk7DQogICAgICAgIHBjMiA9IChWYWx1ZVN0cmF0\nZWd5UEMpIHBtLmZpbmQoVmFsdWVTdHJhdGVneVBDLmNsYXNzLCBvaWQyKTsN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJmb28iLCBwYy5nZXRVVUlESGV4KCkp\nOw0KICAgICAgICBhc3NlcnRFcXVhbHMoImJhciIsIHBjMi5nZXRVVUlESGV4\nKCkpOw0KICAgICAgICBlbmRFbShwbSk7DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgdGVzdFNlcXVlbmNlKCkgew0KICAgICAgICBWYWx1ZVN0cmF0ZWd5\nUEMgcGMgPSBuZXcgVmFsdWVTdHJhdGVneVBDKCk7DQogICAgICAgIFZhbHVl\nU3RyYXRlZ3lQQyBwYzIgPSBuZXcgVmFsdWVTdHJhdGVneVBDKCk7DQogICAg\nICAgIHBjLnNldE5hbWUoInBjIik7DQogICAgICAgIHBjMi5zZXROYW1lKCJw\nYzIiKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHBjLmdldFNlcXVlbmNl\nKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMCwgcGMyLmdldFNlcXVlbmNl\nKCkpOw0KDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0NCiAg\nICAgICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0\neU1hbmFnZXIoKTsNCiAgICAgICAgcG0uc2V0T3B0aW1pc3RpYyh0cnVlKTsN\nCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIHBtLnBlcnNpc3QocGMp\nOw0KICAgICAgICBwbS5wZXJzaXN0KHBjMik7DQogICAgICAgIGludCBzZXEg\nPSBwYy5nZXRTZXF1ZW5jZSgpOw0KICAgICAgICBhc3NlcnRUcnVlKCFwbS5p\nc1N0b3JlQWN0aXZlKCkpOyAgICAvLyBubyBmbHVzaCBuZWVkZWQNCiAgICAg\nICAgZW5kVHgocG0pOw0KICAgICAgICBpbnQgc2VxMiA9IHBjMi5nZXRTZXF1\nZW5jZSgpOw0KICAgICAgICBPYmplY3Qgb2lkID0gcG0uZ2V0T2JqZWN0SWQo\ncGMpOw0KICAgICAgICBPYmplY3Qgb2lkMiA9IHBtLmdldE9iamVjdElkKHBj\nMik7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICBhc3NlcnRUcnVl\nKHNlcSA+IDApOw0KICAgICAgICBhc3NlcnRUcnVlKHNlcTIgPiAwKTsNCiAg\nICAgICAgYXNzZXJ0VHJ1ZShzZXEgIT0gc2VxMik7DQoNCiAgICAgICAgcG0g\nPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2Vy\nKCk7DQogICAgICAgIHBjID0gKFZhbHVlU3RyYXRlZ3lQQykgcG0uZmluZChW\nYWx1ZVN0cmF0ZWd5UEMuY2xhc3MsIG9pZCk7DQogICAgICAgIHBjMiA9IChW\nYWx1ZVN0cmF0ZWd5UEMpIHBtLmZpbmQoVmFsdWVTdHJhdGVneVBDLmNsYXNz\nLCBvaWQyKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKHNlcSwgcGMuZ2V0U2Vx\ndWVuY2UoKSk7DQogICAgICAgIGFzc2VydEVxdWFscyhzZXEyLCBwYzIuZ2V0\nU2VxdWVuY2UoKSk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBw\nYy5zZXRTZXF1ZW5jZSg5OSk7DQogICAgICAgIHBjMi5zZXRTZXF1ZW5jZSgx\nMDApOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGVuZEVtKHBtKTsN\nCg0KICAgICAgICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVu\ndEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgcGMgPSAoVmFsdWVTdHJhdGVn\neVBDKSBwbS5maW5kKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkKTsNCiAg\nICAgICAgcGMyID0gKFZhbHVlU3RyYXRlZ3lQQykgcG0uZmluZChWYWx1ZVN0\ncmF0ZWd5UEMuY2xhc3MsIG9pZDIpOw0KICAgICAgICBhc3NlcnRFcXVhbHMo\nOTksIHBjLmdldFNlcXVlbmNlKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMo\nMTAwLCBwYzIuZ2V0U2VxdWVuY2UoKSk7DQogICAgICAgIGVuZEVtKHBtKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0VmVyc2lvbigpIHsNCiAg\nICAgICAgdmVyc2lvblRlc3QoZ2V0RW1mKCkpOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyB2b2lkIHRlc3RWZXJzaW9uRGF0YUNhY2hlKCkgew0KDQogICAgICAg\nIE1hcCBtYXAgPSBuZXcgSGFzaE1hcCgpOw0KICAgICAgICBtYXAucHV0KCJv\ncGVuanBhLkRhdGFDYWNoZSIsICJ0cnVlIik7DQogICAgICAgIG1hcC5wdXQo\nIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2bSIpOw0KICAg\nICAgICB2ZXJzaW9uVGVzdChnZXRFbWYobWFwKSk7DQogICAgfQ0KDQogICAg\ncHJpdmF0ZSB2b2lkIHZlcnNpb25UZXN0KEVudGl0eU1hbmFnZXJGYWN0b3J5\nIHBtZikgew0KICAgICAgICBWYWx1ZVN0cmF0ZWd5UEMgcGMgPSBuZXcgVmFs\ndWVTdHJhdGVneVBDKCk7DQogICAgICAgIHBjLnNldE5hbWUoInBjIik7DQoN\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgcG0gPSAoT3BlbkpQQUVu\ndGl0eU1hbmFnZXIpDQogICAgICAgICAgICBwbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAgICAgcG0ucGVy\nc2lzdChwYyk7DQogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSA9IGdldENv\nbmZpZ3VyYXRpb24oKQ0KICAgICAgICAgICAgLmdldE1ldGFEYXRhUmVwb3Np\ndG9yeUluc3RhbmNlKCkuDQogICAgICAgICAgICBnZXRNZXRhRGF0YShwYy5n\nZXRDbGFzcygpLCBudWxsLCBmYWxzZSk7DQogICAgICAgIGFzc2VydE5vdE51\nbGwobWV0YS5nZXRWZXJzaW9uRmllbGQoKSk7DQogICAgICAgIGFzc2VydEVx\ndWFscygidmVyc2lvbiIsIG1ldGEuZ2V0VmVyc2lvbkZpZWxkKCkuZ2V0TmFt\nZSgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIHBjLmdldFZlcnNpb24o\nKSk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEsIHBjLmdldFZlcnNpb24oKSk7DQogICAgICAgIE9iamVjdCBvaWQgPSBw\nbS5nZXRPYmplY3RJZChwYyk7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAg\nICAgICAvLyBkbyBuby1vcCBjb21taXQNCiAgICAgICAgcG0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIHBtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQog\nICAgICAgIHBjID0gKFZhbHVlU3RyYXRlZ3lQQykgcG0uZmluZChWYWx1ZVN0\ncmF0ZWd5UEMuY2xhc3MsIG9pZCk7DQogICAgICAgIGFzc2VydE5vdE51bGwo\ncGMpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0VmVyc2lvbigp\nKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIHRyeSB7DQogICAg\nICAgICAgICBwYy5zZXRWZXJzaW9uKDEwKTsNCiAgICAgICAgICAgIGZhaWwo\nIkFsbG93ZWQgY2hhbmdlIHRvIHZlcnNpb24gZmllbGQuIik7DQogICAgICAg\nIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsNCiAgICAgICAgfQ0K\nICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCBw\nYy5nZXRWZXJzaW9uKCkpOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAgICAg\nICAgLy8gZG8gcmVhbCBjb21taXQNCiAgICAgICAgcG0gPSAoT3BlbkpQQUVu\ndGl0eU1hbmFnZXIpIHBtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAg\nICAgIHBjID0gKFZhbHVlU3RyYXRlZ3lQQykgcG0uZmluZChWYWx1ZVN0cmF0\nZWd5UEMuY2xhc3MsIG9pZCk7DQogICAgICAgIGFzc2VydE5vdE51bGwocGMp\nOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0VmVyc2lvbigpKTsN\nCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIHBjLnNldE5hbWUoImNo\nYW5nZWQiKTsNCiAgICAgICAgcG0uZmx1c2goKTsNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIHBjLmdldFZlcnNpb24oKSk7DQogICAgICAgIGVuZFR4KHBt\nKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJjaGFuZ2VkIiwgcGMuZ2V0TmFt\nZSgpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldFZlcnNpb24o\nKSk7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICAvLyByb2xsYmFj\naw0KICAgICAgICBwbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgcG1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgcGMgPSAoVmFsdWVTdHJh\ndGVneVBDKSBwbS5maW5kKFZhbHVlU3RyYXRlZ3lQQy5jbGFzcywgb2lkKTsN\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYyk7DQogICAgICAgIGFzc2VydEVx\ndWFscygyLCBwYy5nZXRWZXJzaW9uKCkpOw0KICAgICAgICBzdGFydFR4KHBt\nKTsNCiAgICAgICAgcGMuc2V0TmFtZSgiY2hhbmdlZDIiKTsNCiAgICAgICAg\ncG0uZmx1c2goKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBjLmdldFZl\ncnNpb24oKSk7DQogICAgICAgIHJvbGxiYWNrVHgocG0pOw0KICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgcGMuZ2V0VmVyc2lvbigpKTsNCiAgICAgICAgZW5k\nRW0ocG0pOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RWZXJzaW9u\nRGV0YWNoKCkgew0KICAgICAgICBWYWx1ZVN0cmF0ZWd5UEMgcGMgPSBuZXcg\nVmFsdWVTdHJhdGVneVBDKCk7DQogICAgICAgIFZhbHVlU3RyYXRlZ3lQQyBw\nYzIgPSBuZXcgVmFsdWVTdHJhdGVneVBDKCk7DQogICAgICAgIHBjLnNldE5h\nbWUoInBjIik7DQogICAgICAgIHBjMi5zZXROYW1lKCJwYzIiKTsNCg0KICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9DQogICAgICAgICAgICAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nDQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBwbS5wZXJzaXN0KHBj\nKTsNCiAgICAgICAgcG0ucGVyc2lzdChwYzIpOw0KICAgICAgICBlbmRUeChw\nbSk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAgICBwYy5zZXROYW1l\nKCJjaGFuZ2VkIik7DQogICAgICAgIHBjMi5zZXROYW1lKCJjaGFuZ2VkMiIp\nOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGFzc2VydEVxdWFscygy\nLCBwYy5nZXRWZXJzaW9uKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwg\ncGMyLmdldFZlcnNpb24oKSk7DQogICAgICAgIFZhbHVlU3RyYXRlZ3lQQyBk\nZXRhY2hlZCA9IChWYWx1ZVN0cmF0ZWd5UEMpIHBtLmRldGFjaChwYyk7DQog\nICAgICAgIFZhbHVlU3RyYXRlZ3lQQyBkZXRhY2hlZDIgPSAoVmFsdWVTdHJh\ndGVneVBDKSBwbS5kZXRhY2gocGMyKTsNCiAgICAgICAgZW5kRW0ocG0pOw0K\nDQogICAgICAgIC8vIGNsZWFuIGF0dGFjaA0KICAgICAgICBwbSA9IChPcGVu\nSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIHBjID0gKFZhbHVlU3RyYXRl\nZ3lQQykgcG0ubWVyZ2UoZGV0YWNoZWQpOw0KICAgICAgICBhc3NlcnRFcXVh\nbHMoMiwgcGMuZ2V0VmVyc2lvbigpKTsNCiAgICAgICAgZW5kVHgocG0pOw0K\nICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0VmVyc2lvbigpKTsNCiAg\nICAgICAgZW5kRW0ocG0pOw0KDQogICAgICAgIC8vIGRpcnR5IGF0dGFjaA0K\nICAgICAgICBkZXRhY2hlZC5zZXROYW1lKCJjaGFuZ2VkLWRldGFjaGVkIik7\nDQogICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50\nRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCiAgICAg\nICAgcGMgPSAoVmFsdWVTdHJhdGVneVBDKSBwbS5tZXJnZShkZXRhY2hlZCk7\nDQogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5nZXRWZXJzaW9uKCkpOw0K\nICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGFzc2VydEVxdWFscygzLCBw\nYy5nZXRWZXJzaW9uKCkpOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAgICAg\nICAgLy8gc3RhbGUgYXR0YWNoDQogICAgICAgIGRldGFjaGVkLnNldE5hbWUo\nInN0YWxlIik7DQogICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBt\nKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHBtLm1lcmdlKGRldGFj\naGVkKTsNCiAgICAgICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgICAgIGZh\naWwoIkNvbW1pdHRlZCBzdGFsZSB2ZXJzaW9uLiIpOw0KICAgICAgICB9IGNh\ndGNoIChPcGVuSlBBRXhjZXB0aW9uIGplKSB7DQogICAgICAgIH0NCiAgICAg\nICAgaWYgKGlzQWN0aXZlVHgocG0pKQ0KICAgICAgICAgICAgcm9sbGJhY2tU\neChwbSk7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAgICAvLyBtb2Rp\nZnkgdmVyc2lvbiBmaWVsZCBpbiBkZXRhY2hlZDsgYWxsb3cgZWl0aGVyIGV4\nY2VwdGlvbiBvcg0KICAgICAgICAvLyBhbGxvdyB0aGUgdXBkYXRlIHRvIGJl\nIGlnbm9yZWQNCiAgICAgICAgZGV0YWNoZWQyLnNldE5hbWUoImNoYW5nZWQy\nLWRldGFjaGVkIik7DQogICAgICAgIGRldGFjaGVkMi5zZXRWZXJzaW9uKDk5\nKTsNCiAgICAgICAgcG0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJl\nbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAg\nICAgICB0cnkgew0KICAgICAgICAgICAgcGMyID0gKFZhbHVlU3RyYXRlZ3lQ\nQykgcG0ubWVyZ2UoZGV0YWNoZWQyKTsNCiAgICAgICAgICAgIGFzc2VydEVx\ndWFscygyLCBwYzIuZ2V0VmVyc2lvbigpKTsNCiAgICAgICAgICAgIGVuZFR4\nKHBtKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscygzLCBwYzIuZ2V0VmVy\nc2lvbigpKTsNCiAgICAgICAgfSBjYXRjaCAoT3BlbkpQQUV4Y2VwdGlvbiBq\nZSkgew0KICAgICAgICB9DQogICAgICAgIGlmIChpc0FjdGl2ZVR4KHBtKSkN\nCiAgICAgICAgICAgIHJvbGxiYWNrVHgocG0pOw0KICAgICAgICA7DQogICAg\nICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nVmVyc2lvblJlZnJlc2goKSB7DQogICAgICAgIFZhbHVlU3RyYXRlZ3lQQyBw\nYyA9IG5ldyBWYWx1ZVN0cmF0ZWd5UEMoKTsNCiAgICAgICAgcGMuc2V0TmFt\nZSgicGMiKTsNCg0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBwbSA9\nDQogICAgICAgICAgICAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRF\nbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIHN0YXJ0VHgocG0pOw0KICAgICAg\nICBwbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgZW5kVHgocG0pOw0KICAgICAg\nICBzdGFydFR4KHBtKTsNCiAgICAgICAgcGMuc2V0TmFtZSgiY2hhbmdlZCIp\nOw0KICAgICAgICBlbmRUeChwbSk7DQogICAgICAgIGFzc2VydEVxdWFscygy\nLCBwYy5nZXRWZXJzaW9uKCkpOw0KDQogICAgICAgIC8vIGNsZWFuIHJlZnJl\nc2gNCiAgICAgICAgc3RhcnRUeChwbSk7DQogICAgICAgIHBtLnJlZnJlc2go\ncGMpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGMuZ2V0VmVyc2lvbigp\nKTsNCg0KICAgICAgICAvLyBjb25jdXJyZW50IG1vZA0KICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlciBwbTIgPQ0KICAgICAgICAgICAgKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAg\nICBzdGFydFR4KHBtMik7DQogICAgICAgIFZhbHVlU3RyYXRlZ3lQQyBwYzIg\nPSAoVmFsdWVTdHJhdGVneVBDKSBwbTIuZmluZA0KICAgICAgICAgICAgKFZh\nbHVlU3RyYXRlZ3lQQy5jbGFzcywgcG0yLmdldE9iamVjdElkKHBjKSk7DQog\nICAgICAgIHBjMi5zZXROYW1lKCJjaGFuZ2VkMiIpOw0KICAgICAgICBlbmRU\neChwbTIpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMywgcGMyLmdldFZlcnNp\nb24oKSk7DQogICAgICAgIGVuZEVtKHBtMik7DQoNCiAgICAgICAgLy8gc3Rh\nbGUgcmVmcmVzaA0KICAgICAgICBwbS5yZWZyZXNoKHBjKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDMsIHBjLmdldFZlcnNpb24oKSk7DQoNCiAgICAgICAg\nLy8gZGlydHkgcmVmcmVzaA0KICAgICAgICBwYy5zZXROYW1lKCJjaGFuZ2Vk\nLTEiKTsNCiAgICAgICAgcG0ucmVmcmVzaChwYyk7DQogICAgICAgIGFzc2Vy\ndEVxdWFscygzLCBwYy5nZXRWZXJzaW9uKCkpOw0KDQogICAgICAgIHBjLnNl\ndE5hbWUoImNoYW5nZWQtMiIpOw0KICAgICAgICBlbmRUeChwbSk7DQogICAg\nICAgIGFzc2VydEVxdWFscyg0LCBwYy5nZXRWZXJzaW9uKCkpOw0KICAgICAg\nICBlbmRFbShwbSk7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

