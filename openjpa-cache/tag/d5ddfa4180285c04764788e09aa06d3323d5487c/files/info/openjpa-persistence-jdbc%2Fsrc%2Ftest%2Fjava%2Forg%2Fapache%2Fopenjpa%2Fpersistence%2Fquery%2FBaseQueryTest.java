{"sha":"350ed33f8d10d8dacc29ccb668881e8b7cd69c62","node_id":"MDQ6QmxvYjIwNjM2NDozNTBlZDMzZjhkMTBkOGRhY2MyOWNjYjY2ODg4MWU4YjdjZDY5YzYy","size":5126,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/350ed33f8d10d8dacc29ccb668881e8b7cd69c62","content":"LyoNCiAqIEJhc2VLZXJuZWxUZXN0LmphdmENCiAqDQogKiBDcmVhdGVkIG9u\nIE9jdG9iZXIgOSwgMjAwNiwgMTI6NTYgUE0NCiAqDQogKiBUbyBjaGFuZ2Ug\ndGhpcyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVtcGxhdGUgTWFuYWdl\ncg0KICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRoZSBlZGl0b3IuDQog\nKi8NCg0KLyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUg\nRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJp\nYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmls\nZQ0KICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9u\nYWwgaW5mb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJz\naGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1\nbmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAq\nICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0\nIGluIGNvbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5\nIG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRw\nOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQog\nKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVk\nIHRvIGluIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRl\nciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElT\nIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0Yg\nQU5ZDQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2Vl\nIHRoZSBMaWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdv\ndmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVy\nIHRoZSBMaWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UucXVlcnk7DQoNCmltcG9ydCBqYXZhLnV0aWwu\nSGFzaE1hcDsNCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsNCmltcG9ydCBqYXZh\nLnV0aWwuTWFwOw0KaW1wb3J0IGphdmEudXRpbC5Qcm9wZXJ0aWVzOw0KaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7DQoNCg0KDQoN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1h\nbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5qcHFs\nLkpQUUxQYXJzZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5j\nb25mLkNvbmZpZ3VyYXRpb25Qcm92aWRlcjsNCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbnM7DQppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkpQQUZhY2FkZUhlbHBlcjsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQ\nQUVudGl0eU1hbmFnZXI7DQoNCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBCYXNl\nUXVlcnlUZXN0IGV4dGVuZHMgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLmNvbW1vbi51dGlscy5BYnN0cmFjdFRlc3RDYXNlIHsNCg0KICAgIHBy\naXZhdGUgc3RhdGljIE1hcCBfc3lzcHJvcHMgPSBuZXcgSGFzaE1hcCgpOw0K\nDQogICAgLyoqDQogICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBC\nYXNlUXVlcnlUZXN0DQogICAgICovDQogICAgcHVibGljIEJhc2VRdWVyeVRl\nc3QoU3RyaW5nIG5hbWUpIHsNCiAgICAgICAgc3VwZXIobmFtZSwgInF1ZXJ5\nY2FjdHVzYXBwIik7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIGdldEVNKCkgew0KICAgICAgICByZXR1cm4gKE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAg\nIH0NCg0KICAgIHByb3RlY3RlZCBPcGVuSlBBRW50aXR5TWFuYWdlciBnZXRF\nTShib29sZWFuIG9wdGltaXN0aWMsDQogICAgICAgIGJvb2xlYW4gcmV0YWlu\nVmFsdWVzKSB7DQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0N\nCiAgICAgICAgICAgIChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVu\ndGl0eU1hbmFnZXIoKTsNCiAgICAgICAgZW0uc2V0Tm9udHJhbnNhY3Rpb25h\nbFJlYWQodHJ1ZSk7DQogICAgICAgIGVtLnNldFJldGFpblN0YXRlKHJldGFp\nblZhbHVlcyk7DQogICAgICAgIGVtLnNldE9wdGltaXN0aWMob3B0aW1pc3Rp\nYyk7DQogICAgICAgIHJldHVybiBlbTsNCiAgICB9DQoNCiAgICAvKioNCiAg\nICAgKiBEZWxldGUgYWxsIGluc3RhbmNlcyBvZiB0aGUgZ2l2ZW4gY2xhc3Mu\nDQogICAgICovDQogICAgcHJvdGVjdGVkIGludCBkZWxldGVBbGwoQnJva2Vy\nIGJyb2tlciwgQ2xhc3MgY2xhenosDQogICAgICAgIGJvb2xlYW4gc3ViY2xh\nc3Nlcykgew0KICAgICAgICBmaW5hbCBib29sZWFuIHVzZURlbGV0ZUJ5UXVl\ncnkgPSBmYWxzZTsNCg0KICAgICAgICBpZiAodXNlRGVsZXRlQnlRdWVyeSkg\new0KICAgICAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVy\neSBxdWVyeSA9IGJyb2tlci5uZXdRdWVyeSgNCiAgICAgICAgICAgICAgICBK\nUFFMUGFyc2VyLkxBTkdfSlBRTCwgY2xhenosICIiKTsNCiAgICAgICAgICAg\nIHF1ZXJ5LnNldENhbmRpZGF0ZVR5cGUoY2xhenosIHN1YmNsYXNzZXMpOw0K\nICAgICAgICAgICAgcmV0dXJuIChpbnQpIHF1ZXJ5LmRlbGV0ZUFsbCgpOw0K\nICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5FeHRlbnQgZXh0ZW50ID0NCiAgICAgICAgICAgICAgICBi\ncm9rZXIubmV3RXh0ZW50KGNsYXp6LCBzdWJjbGFzc2VzKTsNCiAgICAgICAg\nICAgIExpc3QgbGlzdCA9IGV4dGVudC5saXN0KCk7DQogICAgICAgICAgICBp\nbnQgc2l6ZSA9IGxpc3Quc2l6ZSgpOw0KICAgICAgICAgICAgYnJva2VyLmRl\nbGV0ZUFsbChsaXN0LCBudWxsKTsNCiAgICAgICAgICAgIHJldHVybiBzaXpl\nOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIE9iamVjdCBw\nZXJzaXN0KE9iamVjdCBvYikgew0KICAgICAgICBCcm9rZXIgYnJva2VyID0g\nZ2V0QnJva2VyRmFjdG9yeSgpLm5ld0Jyb2tlcigpOw0KICAgICAgICBicm9r\nZXIuYmVnaW4oKTsNCiAgICAgICAgYnJva2VyLnBlcnNpc3Qob2IsIG51bGwp\nOw0KICAgICAgICBPYmplY3QgaWQgPSBicm9rZXIuZ2V0T2JqZWN0SWQob2Ip\nOw0KICAgICAgICBicm9rZXIuY29tbWl0KCk7DQogICAgICAgIGJyb2tlci5j\nbG9zZSgpOw0KICAgICAgICByZXR1cm4gaWQ7DQogICAgfQ0KDQogICAgcHJv\ndGVjdGVkIFByb3BlcnRpZXMgZ2V0UHJvcGVydGllcygpIHsNCiAgICAgICAg\ncmV0dXJuIGdldFByb3BlcnRpZXMobnVsbCk7DQogICAgfQ0KDQogICAgLyoq\nDQogICAgICogUmV0dXJuIHRoZSBydW50aW1lIHByb3BlcnRpZXMsIG9wdGlv\nbmFsbHkgb3ZlcnJpZGluZyBvciBzZXR0aW5nDQogICAgICogc29tZSB2aWEg\ndGhlIGdpdmVuIGFycmF5LCB3aGljaCBzaG91bGQgYmUgaW4gdGhlIGZvcm0N\nCiAgICAgKiB7IGtleSwgdmFsLCBrZXksIHZhbCwgLi4uIH0uDQogICAgICov\nDQogICAgcHJvdGVjdGVkIHN5bmNocm9uaXplZCBQcm9wZXJ0aWVzIGdldFBy\nb3BlcnRpZXMoU3RyaW5nW10gcHJvcHMpIHsNCiAgICAgICAgUHJvcGVydGll\ncyBwID0gbmV3IFByb3BlcnRpZXMoU3lzdGVtLmdldFByb3BlcnRpZXMoKSk7\nDQogICAgICAgIFN0cmluZyBzdHIgPSBwLmdldFByb3BlcnR5KCJvcGVuanBh\nLnByb3BlcnRpZXMiLCAia29kby5wcm9wZXJ0aWVzIik7DQogICAgICAgIGlm\nIChzdHIgIT0gbnVsbCAmJiBzdHIubGVuZ3RoKCkgPiAwKSB7DQogICAgICAg\nICAgICAvLyBjYWNoZSBzeXN0ZW0gcHJvcGVydGllcyB0byByZWR1Y2UgbG9h\nZCBvbiBmaWxlIHN5c3RlbQ0KICAgICAgICAgICAgUHJvcGVydGllcyBsb2Fk\nZWQgPSAoUHJvcGVydGllcykgX3N5c3Byb3BzLmdldChzdHIpOw0KICAgICAg\nICAgICAgaWYgKGxvYWRlZCA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAg\nbG9hZGVkID0gbmV3IFByb3BlcnRpZXMoKTsNCiAgICAgICAgICAgICAgICBD\nb25maWd1cmF0aW9uUHJvdmlkZXIgY3AgPQ0KICAgICAgICAgICAgICAgICAg\nICAoQ29uZmlndXJhdGlvblByb3ZpZGVyKSBDb25maWd1cmF0aW9ucw0KICAg\nICAgICAgICAgICAgICAgICAgICAgLmdldFByb3BlcnR5KHN0ciwgbnVsbCk7\nDQogICAgICAgICAgICAgICAgaWYgKGNwICE9IG51bGwpDQogICAgICAgICAg\nICAgICAgICAgIGxvYWRlZC5wdXRBbGwoY3AuZ2V0UHJvcGVydGllcygpKTsN\nCiAgICAgICAgICAgICAgICBfc3lzcHJvcHMucHV0KHN0ciwgbG9hZGVkKTsN\nCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHAucHV0QWxsKGxvYWRlZCk7\nDQogICAgICAgIH0NCg0KICAgICAgICBmb3IgKGludCBpID0gMDsgcHJvcHMg\nIT0gbnVsbCAmJiBpIDwgcHJvcHMubGVuZ3RoOyBpICs9IDIpIHsNCiAgICAg\nICAgICAgIGlmIChwcm9wc1tpICsgMV0gIT0gbnVsbCkgew0KICAgICAgICAg\nICAgICAgIC8vIHJlbW92ZSBhbnkgZHVwbGljYXRlIGtvZG8vb3BlbmpwYSBw\ncm9wZXJ0eSBzbyB3ZSBkb24ndCBjbGFzaA0KICAgICAgICAgICAgICAgIGlm\nIChwcm9wc1tpXS5zdGFydHNXaXRoKCJvcGVuanBhLiIpKQ0KICAgICAgICAg\nICAgICAgICAgICBwLnJlbW92ZSgib3BlbmpwYS4iICsgcHJvcHNbaV0uc3Vi\nc3RyaW5nKDUpKTsNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9wc1tp\nXS5zdGFydHNXaXRoKCJvcGVuanBhLiIpKQ0KICAgICAgICAgICAgICAgICAg\nICBwLnJlbW92ZSgib3BlbmpwYS4iICsgcHJvcHNbaV0uc3Vic3RyaW5nKDgp\nKTsNCg0KICAgICAgICAgICAgICAgIHAuc2V0UHJvcGVydHkocHJvcHNbaV0s\nIHByb3BzW2kgKyAxXSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAg\nICAgICAgICAgIHAucmVtb3ZlKHByb3BzW2ldKTsNCiAgICAgICAgICAgIH0N\nCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcDsNCiAgICB9DQp9DQo=\n","encoding":"base64"}

