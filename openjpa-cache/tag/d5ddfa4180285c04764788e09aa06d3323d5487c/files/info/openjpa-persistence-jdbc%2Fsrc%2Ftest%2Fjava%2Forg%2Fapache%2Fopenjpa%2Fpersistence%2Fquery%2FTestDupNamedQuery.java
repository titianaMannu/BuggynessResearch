{"sha":"630a61878ad48054b7943f4a203c4cf3af443fc4","node_id":"MDQ6QmxvYjIwNjM2NDo2MzBhNjE4NzhhZDQ4MDU0Yjc5NDNmNGEyMDNjNGNmM2FmNDQzZmM0","size":3837,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/630a61878ad48054b7943f4a203c4cf3af443fc4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnk7\nCgppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLkxpc3Q7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2Vy\nOwoKaW1wb3J0IGp1bml0LnRleHR1aS5UZXN0UnVubmVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVz\ndENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdER1cE5hbWVkUXVlcnkgZXh0ZW5k\ncyBTaW5nbGVFTUZUZXN0Q2FzZSB7CgogICAgcHVibGljIHZvaWQgc2V0VXAo\nKSB7CiAgICAgICAgc2V0VXAoU2ltcGxlRW50aXR5LmNsYXNzLCBTaW1wbGVF\nbnRpdHkyLmNsYXNzLCBDTEVBUl9UQUJMRVMpOwoKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVy\nc2lzdChuZXcgU2ltcGxlRW50aXR5KCJOYW1lIE9uZSIsICJWYWx1ZSBPbmUi\nKSk7CiAgICAgICAgZW0ucGVyc2lzdChuZXcgU2ltcGxlRW50aXR5KCJOYW1l\nIFR3byIsICJWYWx1ZSBUd28iKSk7CiAgICAgICAgZW0ucGVyc2lzdChuZXcg\nU2ltcGxlRW50aXR5MigiTmFtZTIgT25lIiwgIlZhbHVlMiBPbmUiKSk7CiAg\nICAgICAgZW0ucGVyc2lzdChuZXcgU2ltcGxlRW50aXR5MigiTmFtZTIgVHdv\nIiwgIlZhbHVlMiBUd28iKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RTaW1wbGVRdWVyeSgpIHsKICAgICAgICBzaW1wbGVR\ndWVyeShmYWxzZSwgIkZpbmRPbmUiLCAiRmluZEFsbCIsICJOYW1lIE9uZSIs\nICJWYWx1ZSBPbmUiLAogICAgICAgICAgICAiTmFtZSBUd28iLCAiVmFsdWUg\nVHdvIik7CiAgICAgICAgc2ltcGxlUXVlcnkodHJ1ZSwgIkZpbmQyT25lIiwg\nIkZpbmQyQWxsIiwgIk5hbWUyIE9uZSIsICJWYWx1ZTIgT25lIiwKICAgICAg\nICAgICAgIk5hbWUyIFR3byIsICJWYWx1ZTIgVHdvIik7CgogICAgICAgIHNp\nbXBsZVF1ZXJ5KGZhbHNlLCAiRmluZFhUd28iLCBudWxsLCAiTmFtZSBUd28i\nLCAiVmFsdWUgVHdvIiwgbnVsbCwKICAgICAgICAgICAgbnVsbCk7CiAgICB9\nCgogICAgcHJpdmF0ZSB2b2lkIHNpbXBsZVF1ZXJ5KGJvb2xlYW4gc2ltcGxl\nMiwgU3RyaW5nIGZpbmRPbmVRTmFtZSwKICAgICAgICBTdHJpbmcgZmluZEFs\nbFFOYW1lLCBTdHJpbmcgbmFtZU9uZSwgU3RyaW5nIFZhbHVlT25lLCBTdHJp\nbmcgbmFtZVR3bywKICAgICAgICBTdHJpbmcgVmFsdWVUd28pIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKCiAgICAgICAgTGlzdCBsaXN0ID0gZW0uY3JlYXRlTmFtZWRRdWVyeShm\naW5kT25lUU5hbWUpLnNldFBhcmFtZXRlcigxLCBuYW1lT25lKQogICAgICAg\nICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydE5vdE51bGwo\nbGlzdCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGxpc3Quc2l6ZSgpLCAxKTsK\nICAgICAgICBPYmplY3QgbyA9IGxpc3QuZ2V0KDApOwogICAgICAgIGFzc2Vy\ndFNhbWUoby5nZXRDbGFzcygpLCBzaW1wbGUyID8gU2ltcGxlRW50aXR5Mi5j\nbGFzcwogICAgICAgICAgICA6IFNpbXBsZUVudGl0eS5jbGFzcyk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKHNpbXBsZTIgPyAoKFNpbXBsZUVudGl0eTIpIG8p\nLmdldFZhbHVlKCkKICAgICAgICAgICAgOiAoKFNpbXBsZUVudGl0eSkgbyku\nZ2V0VmFsdWUoKSwgVmFsdWVPbmUpOwoKICAgICAgICBpZiAoZmluZEFsbFFO\nYW1lICE9IG51bGwpIHsKICAgICAgICAgICAgbGlzdCA9IGVtLmNyZWF0ZU5h\nbWVkUXVlcnkoZmluZEFsbFFOYW1lKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgICAgIGFzc2VydE5vdE51bGwobGlzdCk7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhsaXN0LnNpemUoKSwgMik7CiAgICAgICAgICAgIGZvciAoSXRl\ncmF0b3IgcmVzdWx0SXRlciA9IGxpc3QuaXRlcmF0b3IoKTsgcmVzdWx0SXRl\nci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgICAgICBvID0gcmVzdWx0SXRl\nci5uZXh0KCk7CiAgICAgICAgICAgICAgICBhc3NlcnRTYW1lKG8uZ2V0Q2xh\nc3MoKSwgc2ltcGxlMiA/IFNpbXBsZUVudGl0eTIuY2xhc3MKICAgICAgICAg\nICAgICAgICAgICA6IFNpbXBsZUVudGl0eS5jbGFzcyk7CiAgICAgICAgICAg\nICAgICBTdHJpbmcgbiA9IG51bGw7CiAgICAgICAgICAgICAgICBTdHJpbmcg\ndiA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAoc2ltcGxlMikgewogICAg\nICAgICAgICAgICAgICAgIG4gPSAoKFNpbXBsZUVudGl0eTIpIG8pLmdldE5h\nbWUoKTsKICAgICAgICAgICAgICAgICAgICB2ID0gKChTaW1wbGVFbnRpdHky\nKSBvKS5nZXRWYWx1ZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgICAgICAgICBuID0gKChTaW1wbGVFbnRpdHkpIG8pLmdldE5h\nbWUoKTsKICAgICAgICAgICAgICAgICAgICB2ID0gKChTaW1wbGVFbnRpdHkp\nIG8pLmdldFZhbHVlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICBpZiAobi5lcXVhbHMobmFtZU9uZSkpIHsKICAgICAgICAgICAgICAg\nICAgICBhc3NlcnRUcnVlKHYuZXF1YWxzKFZhbHVlT25lKSk7CiAgICAgICAg\nICAgICAgICB9IGVsc2UgaWYgKG4uZXF1YWxzKG5hbWVUd28pKSB7CiAgICAg\nICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZSh2LmVxdWFscyhWYWx1ZVR3bykp\nOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAg\nICBhc3NlcnRUcnVlKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgfQogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsK\nICAgICAgICBUZXN0UnVubmVyLnJ1bihUZXN0RHVwTmFtZWRRdWVyeS5jbGFz\ncyk7CiAgICB9Cn0K\n","encoding":"base64"}

