{"sha":"4b151e4463d566e4474a9d7219055ae8a5d971c6","node_id":"MDQ6QmxvYjIwNjM2NDo0YjE1MWU0NDYzZDU2NmU0NDc0YTlkNzIxOTA1NWFlOGE1ZDk3MWM2","size":7288,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4b151e4463d566e4474a9d7219055ae8a5d971c6","content":"LyoNCiAqIFRlc3RRdW90ZWROdW1iZXJzSW5GaWx0ZXJzLmphdmENCiAqDQog\nKiBDcmVhdGVkIG9uIE9jdG9iZXIgMTgsIDIwMDYsIDI6MjkgUE0NCiAqDQog\nKiBUbyBjaGFuZ2UgdGhpcyB0ZW1wbGF0ZSwgY2hvb3NlIFRvb2xzIHwgVGVt\ncGxhdGUgTWFuYWdlcg0KICogYW5kIG9wZW4gdGhlIHRlbXBsYXRlIGluIHRo\nZSBlZGl0b3IuDQogKi8NCi8qDQogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hl\nIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lDQogKiBvciBt\nb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUg\nTk9USUNFIGZpbGUNCiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZv\nciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uDQogKiByZWdhcmRpbmcgY29weXJp\nZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlDQog\nKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIu\nMCAodGhlDQogKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBm\naWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlDQogKiB3aXRoIHRoZSBMaWNlbnNl\nLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQog\nKg0KICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0Ut\nMi4wDQogKg0KICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3\nIG9yIGFncmVlZCB0byBpbiB3cml0aW5nLA0KICogc29mdHdhcmUgZGlzdHJp\nYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4N\nCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05E\nSVRJT05TIE9GIEFOWQ0KICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1w\nbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlDQogKiBzcGVjaWZpYyBs\nYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25z\nDQogKiB1bmRlciB0aGUgTGljZW5zZS4gICAgDQogKi8NCnBhY2thZ2Ugb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnF1ZXJ5Ow0KDQppbXBvcnQg\namF2YS51dGlsLkNvbGxlY3Rpb247DQppbXBvcnQgamF2YS51dGlsLkhhc2hN\nYXA7DQppbXBvcnQgamF2YS51dGlsLk1hcDsNCmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5RdWVyeTsNCg0KDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLnF1ZXJ5LmNvbW1vbi5hcHBzLlJ1bnRpbWVUZXN0MTsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQ\nQUVudGl0eU1hbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLk9wZW5KUEFRdWVyeTsNCg0KcHVibGljIGNsYXNzIFRlc3RR\ndW90ZWROdW1iZXJzSW5GaWx0ZXJzMiBleHRlbmRzIEJhc2VRdWVyeVRlc3Qg\new0KDQogICAgcHVibGljIFRlc3RRdW90ZWROdW1iZXJzSW5GaWx0ZXJzMihT\ndHJpbmcgbmFtZSkgew0KICAgICAgICBzdXBlcihuYW1lKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsNCiAgICAgICAgZGVsZXRlQWxs\nKFJ1bnRpbWVUZXN0MS5jbGFzcyk7DQogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIHBtID0gZ2V0RU0oKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQog\nICAgICAgIHBtLnBlcnNpc3QobmV3IFJ1bnRpbWVUZXN0MSgiZm9vIiwgMykp\nOw0KICAgICAgICBwbS5wZXJzaXN0KG5ldyBSdW50aW1lVGVzdDEoImJhciIs\nIDE1KSk7DQogICAgICAgIHBtLnBlcnNpc3QobmV3IFJ1bnRpbWVUZXN0MSgi\nYmF6IiwgLTgpKTsNCiAgICAgICAgcG0ucGVyc2lzdChuZXcgUnVudGltZVRl\nc3QxKCJiYXoyIiwgNDUpKTsgLy8gNDUgaXMgJy0nDQogICAgICAgIHBtLnBl\ncnNpc3QobmV3IFJ1bnRpbWVUZXN0MSgiMyIsIChpbnQpICc0JykpOw0KICAg\nICAgICBlbmRUeChwbSk7DQogICAgICAgIGVuZEVtKHBtKTsNCg0KICAgICAg\nICAvLyBtYWtlIHN1cmUgZXZlcnl0aGluZyBpcyB3b3JraW5nIGFzIGV4cGVj\ndGVkIGZvciB0aGUgYmFzZSBjYXNlLg0KICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgaGVscGVyKCJpbnRGaWVsZCA9IC04IikpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMSwgaGVscGVyKCJpbnRGaWVsZCA9IDE1IikpOw0KICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgaGVscGVyKCJpbnRGaWVsZCA9IDMiKSk7DQogICAg\nICAgIGFzc2VydEVxdWFscygwLCBoZWxwZXIoImludEZpZWxkID0gNTEiKSk7\nIC8vIHRoZSBpbnQgdmFsdWUgb2YgJzMnDQogICAgICAgIGFzc2VydEVxdWFs\ncygwLCBoZWxwZXIoImludEZpZWxkID0gNCIpKTsNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIGhlbHBlcigiaW50RmllbGQgPSA1MiIpKTsgLy8gdGhlIGlu\ndCB2YWx1ZSBvZiAnNCcNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBl\ncigic3RyaW5nRmllbGQgPSBcJ2Zvb1wnIikpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMSwgaGVscGVyKCJzdHJpbmdGaWVsZCA9IFwnYmFyXCciKSk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFVucXVvdGVkTnVtYmVyc1dp\ndGhFeHRyYVByZWNpc2lvbigpIHsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEs\nIGhlbHBlcigiaW50RmllbGQgPSAxNSIpKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIGhlbHBlcigiaW50RmllbGQgPSAtOCIpKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIGhlbHBlcigiaW50RmllbGQgPSAzIikpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgaGVscGVyKCJpbnRGaWVsZCA9IDQ1IikpOw0K\nDQovLyAgICB0cnkgew0KLy8gICAgICAgIC8vIHRlc3Qgd2l0aG91dCBjYXN0\naW5nIC4uLiBzb21lIERCcyBkb24ndCBsaWtlIHRoaXMNCi8vLy8gICAgICAg\nIGFzc2VydEVxdWFscygxLCBoZWxwZXIoImludEZpZWxkID0gMTUuMCIpKTsN\nCi8vLy8gICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxwZXIoImludEZpZWxk\nID0gLTguMCIpKTsNCi8vICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaGVscGVy\nKCJpbnRGaWVsZCA9IDMuMCIpKTsNCi8vICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgaGVscGVyKCJpbnRGaWVsZCA9IDQ1LjAiKSk7DQovLyAgICB9IGNhdGNo\nIChFeGNlcHRpb24gamRvZSkgew0KLy8gICAgICAgIGJ1ZyhBYnN0cmFjdFRl\nc3RDYXNlLlBsYXRmb3JtLkhZUEVSU09OSUMsIDQxNCwgamRvZSwNCi8vICAg\nICAgICAgICAgIlNvbWUgZGF0YWJhc2VzIHJlcXVpcmUgZXhwbGljaXQgY2Fz\ndHMiKTsNCi8vICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nU2luZ2xlUXVvdGVkU3RyaW5ncygpIHsNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEsIGhlbHBlcigic3RyaW5nRmllbGQgPSAnZm9vJyIpKTsNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcigic3RyaW5nRmllbGQgPSAnMyciKSk7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdERvdWJsZVF1b3RlZFN0\ncmluZ3MoKSB7DQogICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxwZXIoInN0\ncmluZ0ZpZWxkID0gXCdmb29cJyIpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEsIGhlbHBlcigic3RyaW5nRmllbGQgPSBcJzNcJyIpKTsNCiAgICB9DQoN\nCiAgICAvKioNCiAgICAgKiBLb2RvIDMuMSBhbmQgcHJpb3IgdHJlYXRlZCBz\naW5nbGUtcXVvdGVkIG51bWJlcnMgYXMgY2hhcmFjdGVyIGxpdGVyYWxzLA0K\nICAgICAqIHRvIHRoZSBkZWdyZWUgdGhhdCBwcmVwYXJlZCBzdGF0ZW1lbnQg\nc2V0SW50KCkgY2FsbHMgd2VyZSBtYWRlLg0KICAgICAqIE9ubHkgdGhlIGZp\ncnN0IGRpZ2l0IG9mIG11bHRpcGxlLWRpZ2l0IHNpbmdsZS1xdW90ZWQgbnVt\nYmVycyB3YXMgdXNlZC4NCiAgICAgKiBGSVggTUU6IGFva2VrZSAtIGNvbW1l\nbnRpbmcgdGhpcyAtLT4gYXBwbGllcyB0byBrb2RvIDMuMSBhbmQgcHJpb3IN\nCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0S29kbzMxU2luZ2xlUXVv\ndGVkTXVsdGlwbGVDaGFyYWN0ZXJCZWhhdmlvcigpIHsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDAsIGhlbHBlcjMxKCJpbnRGaWVsZCA9ICcxNSciLCB0cnVl\nKSk7IC8vIGxvb2tzIGxpa2UgJzEnDQogICAgICAgIGFzc2VydEVxdWFscygw\nLCBoZWxwZXIzMSgiaW50RmllbGQgPSAnNTInIiwgdHJ1ZSkpOyAvLyBsb29r\ncyBsaWtlICc1Jw0KICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaGVscGVyMzEo\nImludEZpZWxkID0gJzQ5JyIsIHRydWUpKTsgLy8gbG9va3MgbGlrZSAnNCcN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcjMxKCJpbnRGaWVsZCA9\nICctOCciLCB0cnVlKSk7IC8vIGxvb2tzIGxpa2UgJy0nDQoNCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDAsIGhlbHBlcjMxKCJpbnRGaWVsZCA9ICcxNSciLCBm\nYWxzZSkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMCwgaGVscGVyMzEoImlu\ndEZpZWxkID0gJzUyJyIsIGZhbHNlKSk7DQogICAgfQ0KDQogICAgLyoqDQog\nICAgICogS29kbyAzLjEgYW5kIHByaW9yIGRpZCBub3QgbWF0Y2ggbmVnYXRp\ndmUgbnVtYmVycyBvZiBkaWZmZXJlbnQgdHlwZXMNCiAgICAgKiBpbiBpbi1t\nZW0gcXVlcmllcy4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCB0ZXN0S29k\nbzMxVW5xdW90ZWRJbk1lbUJlaGF2aW9yKCkgew0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMSwgaGVscGVyMzEoImludEZpZWxkID0gMyIsIGZhbHNlKSk7DQog\nICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxwZXIzMSgiaW50RmllbGQgPSAt\nOCIsIGZhbHNlKSk7DQogICAgICAgIGFzc2VydEVxdWFscygxLCBoZWxwZXIz\nMSgiaW50RmllbGQgPSAxNSIsIGZhbHNlKSk7DQogICAgICAgIGFzc2VydEVx\ndWFscygxLCBoZWxwZXIzMSgiaW50RmllbGQgPSA0NSIsIGZhbHNlKSk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEtvZG8zMVVucXVvdGVkRGF0\nYXN0b3JlQmVoYXZpb3IoKSB7DQogICAgICAgIGFzc2VydEVxdWFscygxLCBo\nZWxwZXIzMSgiaW50RmllbGQgPSAzIiwgZmFsc2UpKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIGhlbHBlcjMxKCJpbnRGaWVsZCA9IC04IiwgZmFsc2Up\nKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhlbHBlcjMxKCJpbnRGaWVs\nZCA9IDE1IiwgZmFsc2UpKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGhl\nbHBlcjMxKCJpbnRGaWVsZCA9IDQ1IiwgZmFsc2UpKTsNCiAgICB9DQoNCiAg\nICAvKioNCiAgICAgKiBSZXR1cm5zIHRoZSAjIG9mIG1hdGNoZXMgdG8gdGhl\nIHF1ZXJ5Lg0KICAgICAqLw0KICAgIHByaXZhdGUgbG9uZyBoZWxwZXIoU3Ry\naW5nIGZpbHRlcikgew0KICAgICAgICByZXR1cm4gaGVscGVyKGZpbHRlciwg\nZmFsc2UpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJldHVybnMgdGhl\nICMgb2YgbWF0Y2hlcyB0byB0aGUgcXVlcnkuIFJldHVybnMgLTEgaWYgc2hv\ndWxkRmFpbA0KICAgICAqIGlzIHRydWUgYW5kIHRoZSBxdWVyeSByYWlzZWQg\nYW4gZXhjZXB0aW9uIGluIGJvdGggaW4tbWVtIGFuZCBkYXRhc3RvcmUNCiAg\nICAgKiBxdWVyaWVzLg0KICAgICAqLw0KICAgIHByaXZhdGUgbG9uZyBoZWxw\nZXIoU3RyaW5nIGZpbHRlciwgYm9vbGVhbiBzaG91bGRGYWlsKSB7DQogICAg\nICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0gZ2V0RU0oKTsNCg0KICAg\nICAgICBPcGVuSlBBUXVlcnkgcSA9DQogICAgICAgICAgICBwbS5jcmVhdGVR\ndWVyeSgiU0VMRUNUIHIgRlJPTSBSdW50aW1lVGVzdDEgciBXSEVSRSByLiIg\nKyBmaWx0ZXIpOw0KDQogICAgICAgIGxvbmcgZGF0YXN0b3JlID0gZ2V0UmVz\ndWx0cyhxLCBzaG91bGRGYWlsKTsNCg0KICAgICAgICBxLnNldENhbmRpZGF0\nZUNvbGxlY3Rpb24oKENvbGxlY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpKTsN\nCiAgICAgICAgbG9uZyBpbm1lbSA9IGdldFJlc3VsdHMocSwgc2hvdWxkRmFp\nbCk7DQoNCiAgICAgICAgaWYgKGRhdGFzdG9yZSAhPSBpbm1lbSkNCiAgICAg\nICAgICAgIGZhaWwoImRhdGFzdG9yZSBxdWVyeSByZXR1cm5lZCAiICsgZGF0\nYXN0b3JlICsgIiB2YWx1ZXM7ICIgKw0KICAgICAgICAgICAgICAgICJpbm1l\nbSBxdWVyeSByZXR1cm5lZCAiICsgaW5tZW0pOw0KDQogICAgICAgIGVuZEVt\nKHBtKTsNCiAgICAgICAgcmV0dXJuIGRhdGFzdG9yZTsNCiAgICB9DQoNCiAg\nICAvKioNCiAgICAgKiBSZXR1cm5zIHRoZSAjIG9mIG1hdGNoZXMgdG8gdGhl\nIHF1ZXJ5LiBQZXJmb3JtcyB0aGUgcXVlcnkgaW4gZGF0YXN0b3JlDQogICAg\nICogb3IgbWVtb3J5IGFzIGFwcHJvcHJpYXRlLg0KICAgICAqLw0KICAgIHBy\naXZhdGUgbG9uZyBoZWxwZXIzMShTdHJpbmcgZmlsdGVyLCBib29sZWFuIGRh\ndGFzdG9yZSkgew0KICAgICAgICBNYXAgcHJvcHMgPSBuZXcgSGFzaE1hcCgp\nOw0KICAgICAgICBwcm9wcy5wdXQoIm9wZW5qcGEuQ29tcGF0aWJpbGl0eSIs\nICJRdW90ZWROdW1iZXJzSW5RdWVyaWVzPXRydWUiKTsNCiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgcG0gPSBnZXRFbWYocHJvcHMpLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsNCg0KICAgICAgICB0cnkgew0KICAgICAgICAgICAg\nT3BlbkpQQVF1ZXJ5IHEgPSBwbS5jcmVhdGVRdWVyeSgNCiAgICAgICAgICAg\nICAgICAiU0VMRUNUIHIgRlJPTSBSdW50aW1lVGVzdDEgciBXSEVSRSByLiIg\nKyBmaWx0ZXIpOw0KDQogICAgICAgICAgICBpZiAoIWRhdGFzdG9yZSkNCiAg\nICAgICAgICAgICAgICBxLnNldENhbmRpZGF0ZUNvbGxlY3Rpb24oKENvbGxl\nY3Rpb24pIHEuZ2V0UmVzdWx0TGlzdCgpKTsNCiAgICAgICAgICAgIHJldHVy\nbiBnZXRSZXN1bHRzKHEsIGZhbHNlKTsNCiAgICAgICAgfQ0KICAgICAgICBm\naW5hbGx5IHsNCiAgICAgICAgICAgIGVuZEVtKHBtKTsNCiAgICAgICAgfQ0K\nICAgIH0NCg0KICAgIHByaXZhdGUgbG9uZyBnZXRSZXN1bHRzKFF1ZXJ5IHEs\nIGJvb2xlYW4gc2hvdWxkRmFpbCkgew0KICAgICAgICB0cnkgew0KDQogICAg\nICAgICAgICBJbnRlZ2VyIHJlc3VsdCA9IG5ldyBJbnRlZ2VyKHEuZ2V0UmVz\ndWx0TGlzdCgpLnNpemUoKSk7DQogICAgICAgICAgICBpZiAoc2hvdWxkRmFp\nbCkgew0KICAgICAgICAgICAgICAgIGZhaWwoInNob3VsZCBoYXZlIGZhaWxl\nZCIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gKChO\ndW1iZXIpIHJlc3VsdCkubG9uZ1ZhbHVlKCk7DQogICAgICAgIH0gY2F0Y2gg\nKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICBp\nZiAoIXNob3VsZEZhaWwpDQogICAgICAgICAgICAgICAgdGhyb3cgZTsNCiAg\nICAgICAgICAgIHJldHVybiAtMTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg==\n","encoding":"base64"}

