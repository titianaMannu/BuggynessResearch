{"sha":"f8bf6e4b96f30d488a223ef42b63ab2f8615dc80","node_id":"MDQ6QmxvYjIwNjM2NDpmOGJmNmU0Yjk2ZjMwZDQ4OGEyMjNlZjQyYjYzYWIyZjg2MTVkYzgw","size":4206,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f8bf6e4b96f30d488a223ef42b63ab2f8615dc80","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uuc2ltcGxl\nOwoKaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5SW5wdXRTdHJlYW07CmltcG9y\ndCBqYXZhLmlvLkJ5dGVBcnJheU91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEu\naW8uT2JqZWN0SW5wdXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLk9iamVjdE91\ndHB1dFN0cmVhbTsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9y\ndCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKCmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TUUxMaXN0ZW5lclRl\nc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3RGbHVzaEJlZm9yZURldGFjaCBl\neHRlbmRzIFNRTExpc3RlbmVyVGVzdENhc2UgewoKICAgIHByaXZhdGUgaW50\nIF9pZDsKICAgIAogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgIHNl\ndFVwKEl0ZW0uY2xhc3MsIm9wZW5qcGEuQ29tcGF0aWJpbGl0eSIsIAogICAg\nICAgICAgICAgICAgImRlZmF1bHQoZmx1c2hCZWZvcmVEZXRhY2g9ZmFsc2Up\nIik7CiAgICAgICAgcGVyc2lzdFNhbXBsZUVudGl0eSgpOwogICAgfQogICAg\nCiAgICBwcml2YXRlIHZvaWQgcGVyc2lzdFNhbXBsZUVudGl0eSgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgSXRlbSBpID0gbmV3IEl0ZW0oKTsKICAgICAgICBlbS5wZXJzaXN0\nKGkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAg\nICAgICAgZW0ucmVmcmVzaChpKTsKICAgICAgICBfaWQgPSBpLmdldEl0ZW1J\nZCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdENsZWFyKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgSXRlbSBpID0gZW0uZmluZChJ\ndGVtLmNsYXNzLCBfaWQpOwoKICAgICAgICBpLnNldEl0ZW1EYXRhKCJBQkNE\nIik7CgogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5yb2xsYmFjaygpOwogICAgICAgIGFzc2VydE5vdFNRTCgiVVBE\nQVRFIElURU0uKiIpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdERldGFjaCgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIEl0ZW0gaSA9\nIGVtLmZpbmQoSXRlbS5jbGFzcywgX2lkKTsKCiAgICAgICAgaS5zZXRJdGVt\nRGF0YSgiRUZHSCIpOwoKICAgICAgICBPcGVuSlBBUGVyc2lzdGVuY2UuY2Fz\ndChlbSkuZGV0YWNoKGkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\ncm9sbGJhY2soKTsKICAgICAgICBhc3NlcnROb3RTUUwoIlVQREFURSBJVEVN\nIFNFVC4qIik7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgdGVzdERldGFjaEFsbCgpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIEl0ZW0g\naSA9IGVtLmZpbmQoSXRlbS5jbGFzcywgX2lkKTsKCiAgICAgICAgaS5zZXRJ\ndGVtRGF0YSgiSUpLTCIpOwoKICAgICAgICBPcGVuSlBBUGVyc2lzdGVuY2Uu\nY2FzdChlbSkuZGV0YWNoQWxsKGkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkucm9sbGJhY2soKTsKICAgICAgICBhc3NlcnROb3RTUUwoIlVQREFU\nRSBJVEVNIFNFVC4qIik7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAg\nIAogICAgcHVibGljIHZvaWQgdGVzdERldGFjaEFsbENvbGxlY3Rpb24oKSB7\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwoKICAgICAgICBJdGVtIGkgPSBlbS5maW5kKEl0ZW0uY2xhc3MsIF9pZCk7\nCgogICAgICAgIGkuc2V0SXRlbURhdGEoIk1OT1AiKTsKCiAgICAgICAgQ29s\nbGVjdGlvbjxJdGVtPiBjID0gbmV3IEFycmF5TGlzdDxJdGVtPigpOwogICAg\nICAgIGMuYWRkKGkpOwogICAgICAgIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0\nKGVtKS5kZXRhY2hBbGwoYyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5yb2xsYmFjaygpOwogICAgICAgIGFzc2VydE5vdFNRTCgiVVBEQVRFIElU\nRU0gU0VULioiKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RTZXJpYWxpemUoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7\nCgogICAgICAgIEl0ZW0gaSA9IGVtLmZpbmQoSXRlbS5jbGFzcywgX2lkKTsK\nCiAgICAgICAgaS5zZXRJdGVtRGF0YSgiUVJTVFUiKTsKCiAgICAgICAgc2Vy\naWFsaXplT2JqZWN0KGkpOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLnJvbGxiYWNrKCk7CiAgICAgICAgYXNzZXJ0Tm90U1FMKCJVUERBVEUgSVRF\nTSBTRVQuKiIpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBIZWxwZXIgdG8gc2VyaWFsaXplIGFuIG9iamVjdCB0byBhIGJ5\ndGVbXQogICAgICovCiAgICBwcml2YXRlIE9iamVjdCBzZXJpYWxpemVPYmpl\nY3QoT2JqZWN0IG9yaWcpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIE9i\namVjdCBkZXNlcmlhbGl6ZWQgPSBudWxsOwoKICAgICAgICBCeXRlQXJyYXlP\ndXRwdXRTdHJlYW0gYmFvcyA9IG5ldyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0o\nKTsKICAgICAgICBPYmplY3RPdXRwdXRTdHJlYW0gb29zID0gbmV3IE9iamVj\ndE91dHB1dFN0cmVhbShiYW9zKTsKICAgICAgICBvb3Mud3JpdGVPYmplY3Qo\nb3JpZyk7CgogICAgICAgIEJ5dGVBcnJheUlucHV0U3RyZWFtIGJhaXMgPQog\nICAgICAgICAgICAgICAgbmV3IEJ5dGVBcnJheUlucHV0U3RyZWFtKGJhb3Mu\ndG9CeXRlQXJyYXkoKSk7CiAgICAgICAgT2JqZWN0SW5wdXRTdHJlYW0gb2lz\nID0gbmV3IE9iamVjdElucHV0U3RyZWFtKGJhaXMpOwoKICAgICAgICBkZXNl\ncmlhbGl6ZWQgPSBvaXMucmVhZE9iamVjdCgpOwogICAgICAgIHJldHVybiBk\nZXNlcmlhbGl6ZWQ7CiAgICB9Cn0K\n","encoding":"base64"}

