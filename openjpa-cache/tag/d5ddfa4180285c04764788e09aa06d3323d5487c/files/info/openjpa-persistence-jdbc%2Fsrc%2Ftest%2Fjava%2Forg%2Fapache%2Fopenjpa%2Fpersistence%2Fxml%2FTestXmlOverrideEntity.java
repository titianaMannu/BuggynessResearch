{"sha":"155993f8bece5c5e0167279eb49961db619260fb","node_id":"MDQ6QmxvYjIwNjM2NDoxNTU5OTNmOGJlY2U1YzVlMDE2NzI3OWViNDk5NjFkYjYxOTI2MGZi","size":4494,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/155993f8bece5c5e0167279eb49961db619260fb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1sOwoK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2UuUENSZWdpc3RyeTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlBlcnNpc3RlbmNlQ2Fw\nYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xh\nc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0\nYS5GaWVsZE1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1l\ndGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5t\nZXRhLk1ldGFEYXRhUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5JbnZhbGlkU3RhdGVFeGNlcHRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuSlBBRmFjYWRlSGVs\ncGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRl\nc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdFhtbE92\nZXJyaWRlRW50aXR5IGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoKICAg\nIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIENsYXNzTm90Rm91bmRFeGNl\ncHRpb24gewogICAgICAgIHNldFVwKENMRUFSX1RBQkxFUyk7CgogICAgICAg\nIC8vIG1ha2Ugc3VyZSB0aGF0IFhtbE92ZXJyaWRlRW50aXR5IGlzIHJlZ2lz\ndGVyZWQgZm9yIG91ciBtZXRhZGF0YSB0ZXN0cwogICAgICAgIENsYXNzLmZv\nck5hbWUoWG1sT3ZlcnJpZGVFbnRpdHkuY2xhc3MuZ2V0TmFtZSgpLCB0cnVl\nLAogICAgICAgICAgICBYbWxPdmVycmlkZUVudGl0eS5jbGFzcy5nZXRDbGFz\nc0xvYWRlcigpKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFBl\ncnNpc3RlbmNlVW5pdE5hbWUoKSB7CiAgICAgICAgcmV0dXJuICJ4bWwtcGVy\nc2lzdGVuY2UtdW5pdCI7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE92\nZXJyaWRlSGFwcGVuZWREdXJpbmdFbmhhbmNlbWVudCgpCiAgICAgICAgdGhy\nb3dzIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewogICAgICAgIC8vIHRoaXMg\nbW9zdGx5IHRlc3RzIG91ciB0ZXN0IGhhcm5lc3MuIFNpbmNlIFhtbE92ZXJy\naWRlRW50aXR5CiAgICAgICAgLy8gaGFzIGFubm90YXRpb24tYmFzZWQgbWV0\nYWRhdGEsIGl0IGlzIGltcG9ydGFudCB0aGF0IHRoZSBmaXJzdAogICAgICAg\nIC8vIFBVIGluIHdoaWNoIGl0IGdldHMgc2Nhbm5lZC1hbmQtZW5oYW5jZWQg\na25vd3MgYWJvdXQgb3ZlcnJpZGluZy4KICAgICAgICBhc3NlcnRUcnVlKFBl\ncnNpc3RlbmNlQ2FwYWJsZS5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKAogICAg\nICAgICAgICBYbWxPdmVycmlkZUVudGl0eS5jbGFzcykpOwogICAgICAgIGFz\nc2VydEVxdWFscygiWG1sT3ZlcnJpZGUiLAogICAgICAgICAgICBQQ1JlZ2lz\ndHJ5LmdldFR5cGVBbGlhcyhYbWxPdmVycmlkZUVudGl0eS5jbGFzcykpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RPdmVycmlkZGVuRW50aXR5TmFt\nZSgpIHsKICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEgPSBKUEFGYWNhZGVI\nZWxwZXIuZ2V0TWV0YURhdGEoZW1mLAogICAgICAgICAgICBYbWxPdmVycmlk\nZUVudGl0eS5jbGFzcyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJYbWxPdmVy\ncmlkZSIsIG1ldGEuZ2V0VHlwZUFsaWFzKCkpOwogICAgICAgIGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCkuY2xvc2UoKTsKICAgICAgICBNZXRhRGF0YVJl\ncG9zaXRvcnkgcmVwbyA9IGVtZi5nZXRDb25maWd1cmF0aW9uKCkKICAgICAg\nICAgICAgLmdldE1ldGFEYXRhUmVwb3NpdG9yeUluc3RhbmNlKCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKG1ldGEsIHJlcG8uZ2V0TWV0YURhdGEoIlhtbE92\nZXJyaWRlIiwKICAgICAgICAgICAgWG1sT3ZlcnJpZGVFbnRpdHkuY2xhc3Mu\nZ2V0Q2xhc3NMb2FkZXIoKSwgdHJ1ZSkpOwogICAgfQoKICAgIC8qKgogICAg\nICogVGVzdHMgdGhhdCB0aGUgb3B0aW9uYWwgYXR0cmlidXRlIG9uIGEgYmFz\naWMgZmllbGQgY2FuIGJlIG92ZXJyaWRlZCBieQogICAgICogYW4geG1sIGRl\nc2NyaXB0b3IuIAogICAgICogCiAgICAgKiBYbWxPdmVycmlkZUVudGl0eS5u\nYW1lIGlzIGFubm90YXRlZCB3aXRoIG9wdGlvbmFsPWZhbHNlCiAgICAgKiBY\nbWxPdmVycmlkZUVudGl0eS5kZXNjcmlwdGlvbiBpcyBhbm5vdGF0ZWQgd2l0\naCBvcHRpb25hbD10cnVlLiAKICAgICAqIAogICAgICogVGhlIG9wdGlvbmFs\nIGF0dHJpYnV0ZXMgYXJlIHJldmVyc2VkIGluIG9ybS54bWwuIAogICAgICov\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0T3B0aW9uYWxBdHRyaWJ1dGVPdmVycmlk\nZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKCiAgICAgICAgWG1sT3ZlcnJpZGVFbnRpdHkgb3B0\naW9uYWwgPSBuZXcgWG1sT3ZlcnJpZGVFbnRpdHkoKTsKCiAgICAgICAgb3B0\naW9uYWwuc2V0TmFtZShudWxsKTsKICAgICAgICBvcHRpb25hbC5zZXREZXNj\ncmlwdGlvbigiZGVzY3JpcHRpb24iKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3Qob3B0aW9uYWwp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICAgICAgb3B0aW9uYWwuc2V0RGVzY3JpcHRpb24obnVs\nbCk7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgICAgIGZhaWwoIlhtbE9ydmVycmlkZUVudGl0eS5kZXNjcmlw\ndGlvbiBzaG91bGQgbm90IGJlIG9wdGlvbmFsLiAiCiAgICAgICAgICAgICAg\nICAgICAgKyAiRXhwZWN0aW5nIGFuIEludmFsaWRTdGF0ZUV4Y2VwdGlvbi4i\nKTsKICAgICAgICB9IGNhdGNoIChJbnZhbGlkU3RhdGVFeGNlcHRpb24gZSkg\newogICAgICAgIH0KCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgIGVtLnJlbW92ZShlbS5maW5kKFhtbE92ZXJyaWRlRW50\naXR5LmNsYXNzLCBvcHRpb25hbC5nZXRJZCgpKSk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQogICAgCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RD\nb2x1bW5PdmVycmlkZSgpIHsgCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIENsYXNzTWFw\ncGluZyBtYXBwaW5nID0gZ2V0TWFwcGluZygiWG1sT3ZlcnJpZGUiKTsKICAg\nICAgICAKICAgICAgICBGaWVsZE1hcHBpbmcgZm0gPSBtYXBwaW5nLmdldEZp\nZWxkTWFwcGluZygicGljdHVyZSIpOwogICAgICAgIAogICAgICAgIENvbHVt\nbltdIGNvbHVtbnMgPSBmbS5nZXRDb2x1bW5zKCk7CiAgICAgICAgCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIGNvbHVtbnMubGVuZ3RoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoInBpY194bWwiLCBjb2x1bW5zWzBdLmdldE5hbWUoKSk7\nCiAgICAgICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KfQoK\n","encoding":"base64"}

