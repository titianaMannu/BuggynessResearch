{"sha":"932dcf8ffcbc423a132b9ab32113e88f4883c593","node_id":"MDQ6QmxvYjIwNjM2NDo5MzJkY2Y4ZmZjYmM0MjNhMTMyYjlhYjMyMTEzZTg4ZjQ4ODNjNTkz","size":5421,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/932dcf8ffcbc423a132b9ab32113e88f4883c593","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\nc2xpY2UuamRiYzsNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJu\nZWwuU3RvcmVRdWVyeTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2Vy\nbmVsLmV4cHMuUXVlcnlFeHByZXNzaW9uczsNCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEua2VybmVsLmV4cHMuVmFsdWU7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5yb3AuUmVzdWx0T2JqZWN0UHJvdmlkZXI7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnRlcm5hbEV4Y2VwdGlv\nbjsNCg0KLyoqDQogKiBBZ2dyZWdhdGVzIGluZGl2aWR1YWwgc2luZ2xlIHF1\nZXJ5IHJlc3VsdHMgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2VzLg0KICogDQog\nKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIgDQogKg0KICovDQpwdWJsaWMgY2xh\nc3MgVW5pcXVlUmVzdWx0T2JqZWN0UHJvdmlkZXIgaW1wbGVtZW50cyBSZXN1\nbHRPYmplY3RQcm92aWRlciB7DQogICAgcHJpdmF0ZSBmaW5hbCBSZXN1bHRP\nYmplY3RQcm92aWRlcltdIF9yb3BzOw0KICAgIHByaXZhdGUgZmluYWwgU3Rv\ncmVRdWVyeSBfcXVlcnk7DQogICAgcHJpdmF0ZSBmaW5hbCBRdWVyeUV4cHJl\nc3Npb25zW10gX2V4cHM7DQogICAgcHJpdmF0ZSBPYmplY3QgX3NpbmdsZTsN\nCiAgICBwcml2YXRlIGJvb2xlYW4gX29wZW5lZDsNCiAgICANCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ09VTlQgPSAiQ291bnQiOw0KICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBNQVggICA9ICJNYXgiOw0K\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBNSU4gICA9ICJNaW4i\nOw0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBTVU0gICA9ICJT\ndW0iOw0KICAgIA0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXpl\nciBfbG9jID0NCiAgICAgICAgTG9jYWxpemVyLmZvclBhY2thZ2UoVW5pcXVl\nUmVzdWx0T2JqZWN0UHJvdmlkZXIuY2xhc3MpOw0KICAgIA0KICAgIHB1Ymxp\nYyBVbmlxdWVSZXN1bHRPYmplY3RQcm92aWRlcihSZXN1bHRPYmplY3RQcm92\naWRlcltdIHJvcHMsIA0KICAgICAgICAgICAgU3RvcmVRdWVyeSBxLCBRdWVy\neUV4cHJlc3Npb25zW10gZXhwcykgew0KICAgICAgICBfcm9wcyA9IHJvcHM7\nDQogICAgICAgIF9xdWVyeSA9IHE7DQogICAgICAgIF9leHBzID0gZXhwczsN\nCiAgICB9DQogICAgDQogICAgcHVibGljIGJvb2xlYW4gYWJzb2x1dGUoaW50\nIHBvcykgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIHJldHVybiBmYWxz\nZTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHRocm93cyBF\neGNlcHRpb24gew0KICAgICAgICBfb3BlbmVkID0gZmFsc2U7DQogICAgICAg\nIGZvciAoUmVzdWx0T2JqZWN0UHJvdmlkZXIgcm9wOl9yb3BzKQ0KICAgICAg\nICAgICAgcm9wLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHVibGljIE9iamVj\ndCBnZXRSZXN1bHRPYmplY3QoKSB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAg\nICAgaWYgKCFfb3BlbmVkKQ0KICAgICAgICAgICAgdGhyb3cgbmV3IEludGVy\nbmFsRXhjZXB0aW9uKF9sb2MuZ2V0KCJub3Qtb3BlbiIpKTsNCiAgICAgICAg\ncmV0dXJuIF9zaW5nbGU7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgaGFu\nZGxlQ2hlY2tlZEV4Y2VwdGlvbihFeGNlcHRpb24gZSkgew0KICAgICAgICBf\ncm9wc1swXS5oYW5kbGVDaGVja2VkRXhjZXB0aW9uKGUpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyBib29sZWFuIG5leHQoKSB0aHJvd3MgRXhjZXB0aW9uIHsN\nCiAgICAgICAgaWYgKCFfb3BlbmVkKSB7DQogICAgICAgICAgICBvcGVuKCk7\nDQogICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICBpZiAoX3Npbmds\nZSAhPSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAg\nICANCiAgICAgICAgVmFsdWVbXSB2YWx1ZXMgPSBfZXhwc1swXS5wcm9qZWN0\naW9uczsNCiAgICAgICAgT2JqZWN0W10gc2luZ2xlID0gbmV3IE9iamVjdFt2\nYWx1ZXMubGVuZ3RoXTsgDQogICAgICAgIGZvciAoaW50IGk9MDsgaTx2YWx1\nZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIFZhbHVlIHYgPSB2YWx1\nZXNbaV07DQogICAgICAgICAgICBib29sZWFuIGlzQWdncmVnYXRlID0gdi5p\nc0FnZ3JlZ2F0ZSgpOw0KICAgICAgICAgICAgU3RyaW5nIG9wID0gdi5nZXRD\nbGFzcygpLmdldFNpbXBsZU5hbWUoKTsNCiAgICAgICAgICAgIGZvciAoUmVz\ndWx0T2JqZWN0UHJvdmlkZXIgcm9wOl9yb3BzKSB7DQogICAgICAgICAgICAg\nICAgcm9wLm5leHQoKTsNCiAgICAgICAgICAgICAgICBPYmplY3RbXSByb3cg\nPSAoT2JqZWN0W10pIHJvcC5nZXRSZXN1bHRPYmplY3QoKTsNCiAgICAgICAg\nICAgICAgICBpZiAoaXNBZ2dyZWdhdGUpIHsNCiAgICAgICAgICAgICAgICAg\nICAgaWYgKENPVU5ULmVxdWFscyhvcCkpIHsNCiAgICAgICAgICAgICAgICAg\nICAgICAgIHNpbmdsZVtpXSA9IGNvdW50KHNpbmdsZVtpXSwgcm93W2ldKTsN\nCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChNQVguZXF1YWxzKG9w\nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlW2ldID0gbWF4\nKHNpbmdsZVtpXSwgcm93W2ldKTsNCiAgICAgICAgICAgICAgICAgICAgfSBl\nbHNlIGlmIChNSU4uZXF1YWxzKG9wKSkgew0KICAgICAgICAgICAgICAgICAg\nICAgICAgc2luZ2xlW2ldID0gbWluKHNpbmdsZVtpXSwgcm93W2ldKTsNCiAg\nICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChTVU0uZXF1YWxzKG9wKSkg\new0KICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlW2ldID0gc3VtKHNp\nbmdsZVtpXSwgcm93W2ldKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNl\nIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBv\ncnRlZE9wZXJhdGlvbkV4Y2VwdGlvbg0KICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIChfbG9jLmdldCgiYWdncmVnYXRlLXVuc3VwcG9ydGVkIiwgb3Ap\nLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAg\nICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc2luZ2xl\nW2ldID0gcm93W2ldOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg\nIH0NCiAgICAgICAgfQ0KICAgICAgICBfc2luZ2xlID0gc2luZ2xlOw0KICAg\nICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQogICAgDQogICAgT2JqZWN0IGNv\ndW50KE9iamVjdCBjdXJyZW50LCBPYmplY3Qgb3RoZXIpIHsNCiAgICAgICAg\naWYgKGN1cnJlbnQgPT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVybiBvdGhl\ncjsNCiAgICAgICAgcmV0dXJuICgoTnVtYmVyKWN1cnJlbnQpLmxvbmdWYWx1\nZSgpICsgKChOdW1iZXIpb3RoZXIpLmxvbmdWYWx1ZSgpOw0KICAgIH0NCiAg\nICANCiAgICBPYmplY3QgbWF4KE9iamVjdCBjdXJyZW50LCBPYmplY3Qgb3Ro\nZXIpIHsNCiAgICAgICAgaWYgKGN1cnJlbnQgPT0gbnVsbCkNCiAgICAgICAg\nICAgIHJldHVybiBvdGhlcjsNCiAgICAgICAgDQogICAgICAgIHJldHVybiBN\nYXRoLm1heCgoKE51bWJlciljdXJyZW50KS5kb3VibGVWYWx1ZSgpLCANCiAg\nICAgICAgICAgICAgICAoKE51bWJlcilvdGhlcikuZG91YmxlVmFsdWUoKSk7\nDQogICAgfQ0KICAgIA0KICAgIE9iamVjdCBtaW4oT2JqZWN0IGN1cnJlbnQs\nIE9iamVjdCBvdGhlcikgew0KICAgICAgICBpZiAoY3VycmVudCA9PSBudWxs\nKQ0KICAgICAgICAgICAgcmV0dXJuIG90aGVyOw0KICAgICAgICByZXR1cm4g\nTWF0aC5taW4oKChOdW1iZXIpY3VycmVudCkuZG91YmxlVmFsdWUoKSwgDQog\nICAgICAgICAgICAgICAgKChOdW1iZXIpb3RoZXIpLmRvdWJsZVZhbHVlKCkp\nOw0KICAgIH0NCiAgICANCiAgICBPYmplY3Qgc3VtKE9iamVjdCBjdXJyZW50\nLCBPYmplY3Qgb3RoZXIpIHsNCiAgICAgICAgaWYgKGN1cnJlbnQgPT0gbnVs\nbCkNCiAgICAgICAgICAgIHJldHVybiBvdGhlcjsNCiAgICAgICAgcmV0dXJu\nICgoKE51bWJlciljdXJyZW50KS5kb3VibGVWYWx1ZSgpICsNCiAgICAgICAg\nICAgICAgICAoKE51bWJlcilvdGhlcikuZG91YmxlVmFsdWUoKSk7DQogICAg\nfQ0KDQoNCg0KICAgIHB1YmxpYyB2b2lkIG9wZW4oKSB0aHJvd3MgRXhjZXB0\naW9uIHsNCiAgICAgICAgZm9yIChSZXN1bHRPYmplY3RQcm92aWRlciByb3A6\nX3JvcHMpDQogICAgICAgICAgICByb3Aub3BlbigpOw0KICAgICAgICBfb3Bl\nbmVkID0gdHJ1ZTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCByZXNldCgp\nIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBfc2luZ2xlID0gbnVsbDsN\nCiAgICAgICAgZm9yIChSZXN1bHRPYmplY3RQcm92aWRlciByb3AgOiBfcm9w\ncykgew0KICAgICAgICAgICAgcm9wLnJlc2V0KCk7DQogICAgICAgIH0NCiAg\nICB9DQoNCiAgICBwdWJsaWMgaW50IHNpemUoKSB0aHJvd3MgRXhjZXB0aW9u\nIHsNCiAgICAgICAgcmV0dXJuIDE7DQogICAgfQ0KDQogICAgcHVibGljIGJv\nb2xlYW4gc3VwcG9ydHNSYW5kb21BY2Nlc3MoKSB7DQogICAgICAgICByZXR1\ncm4gZmFsc2U7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

