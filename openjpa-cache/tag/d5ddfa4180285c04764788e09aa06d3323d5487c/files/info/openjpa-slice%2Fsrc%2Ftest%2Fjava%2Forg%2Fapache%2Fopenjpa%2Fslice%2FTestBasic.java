{"sha":"6bde7d8b61e9fb0de73cbe678ef4128ee9e534f5","node_id":"MDQ6QmxvYjIwNjM2NDo2YmRlN2Q4YjYxZTlmYjBkZTczY2JlNjc4ZWY0MTI4ZWU5ZTUzNGY1","size":5895,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6bde7d8b61e9fb0de73cbe678ef4128ee9e534f5","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\nc2xpY2U7DQoNCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0Ow0KaW1wb3J0\nIGphdmEudXRpbC5MaXN0Ow0KDQppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nRW50aXR5TWFuYWdlcjsNCg0KLyoqDQogKiBUZXN0cyBiYXNpYyBjcmVhdGUs\nIHJlYWQsIHVwZGF0ZSBhbmQgZGVsZXRlIG9wZXJhdGlvbnMuDQogKiANCiAq\nIEBhdXRob3IgUGluYWtpIFBvZGRhciANCiAqDQogKi8NCnB1YmxpYyBjbGFz\ncyBUZXN0QmFzaWMgZXh0ZW5kcyBTbGljZVRlc3RDYXNlIHsNCiAgICANCiAg\nICBwcm90ZWN0ZWQgU3RyaW5nIGdldFBlcnNpc3RlbmNlVW5pdE5hbWUoKSB7\nDQogICAgICAgIHJldHVybiAic2xpY2UiOw0KICAgIH0NCg0KDQogICAgcHVi\nbGljIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsNCiAgICAgICAg\nc3VwZXIuc2V0VXAoUE9iamVjdC5jbGFzcywgUGVyc29uLmNsYXNzLCBBZGRy\nZXNzLmNsYXNzLCBDTEVBUl9UQUJMRVMpOw0KICAgIH0NCg0KICAgIC8qKg0K\nICAgICAqIFBlcnNpc3QgTiBvYmplY3RzLg0KICAgICAqLw0KICAgIExpc3Q8\nUE9iamVjdD4gY3JlYXRlKGludCBOKSB7DQogICAgICAgIExpc3Q8UE9iamVj\ndD4gcGNzID0gbmV3IEFycmF5TGlzdDxQT2JqZWN0PigpOw0KICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsN\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKykgew0KICAgICAgICAgICAg\nUE9iamVjdCBwYyA9IG5ldyBQT2JqZWN0KCk7DQogICAgICAgICAgICBwY3Mu\nYWRkKHBjKTsNCiAgICAgICAgICAgIGVtLnBlcnNpc3QocGMpOw0KICAgICAg\nICAgICAgcGMuc2V0VmFsdWUoaSk7DQogICAgICAgIH0NCiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0uY2xlYXIo\nKTsNCiAgICAgICAgcmV0dXJuIHBjczsNCiAgICB9DQoNCiAgICAvKioNCiAg\nICAgKiBDcmVhdGUgYSBzaW5nbGUgb2JqZWN0Lg0KICAgICAqLw0KICAgIFBP\nYmplY3QgY3JlYXRlKCkgew0KICAgICAgICByZXR1cm4gY3JlYXRlKDEpLmdl\ndCgwKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBEZWxldGUgYSBzaW5n\nbGUgb2JqZWN0IGJ5IEVudGl0eU1hbmFnZXIucmVtb3ZlKCkNCiAgICAgKi8N\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlKCkgew0KICAgICAgICBpbnQg\nTiA9IDEwOw0KICAgICAgICBjcmVhdGUoTik7DQogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAgICAgIGludCBi\nZWZvcmUgPSBjb3VudChQT2JqZWN0LmNsYXNzKTsNCiAgICAgICAgTGlzdCBh\nbGwgPSBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIHAgRlJPTSBQT2JqZWN0IHAi\nKS5nZXRSZXN1bHRMaXN0KCk7DQogICAgICAgIGFzc2VydEZhbHNlKGFsbC5p\nc0VtcHR5KCkpOw0KICAgICAgICBlbS5yZW1vdmUoYWxsLmdldCgwKSk7DQog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQoNCiAgICAg\nICAgaW50IGFmdGVyID0gY291bnQoUE9iamVjdC5jbGFzcyk7DQogICAgICAg\nIGFzc2VydEVxdWFscyhiZWZvcmUgLSAxLCBhZnRlcik7DQogICAgfQ0KDQog\nICAgLyoqDQogICAgICogRGVsZXRlIGluIGJ1bGsgYnkgcXVlcnkuDQogICAg\nICovDQogICAgcHVibGljIHZvaWQgdGVzdEJ1bGtEZWxldGUoKSB7DQogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQog\nICAgICAgIGludCBjID0gY291bnQoUE9iamVjdC5jbGFzcyk7DQogICAgICAg\nIGludCBkID0gZW0uY3JlYXRlUXVlcnkoIkRFTEVURSBGUk9NIFBPYmplY3Qg\ncCIpLmV4ZWN1dGVVcGRhdGUoKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKGMs\nIGQpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOw0K\nICAgICAgICBjID0gY291bnQoUE9iamVjdC5jbGFzcyk7DQogICAgICAgIGFz\nc2VydEVxdWFscygwLCBjKTsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAq\nIFN0b3JlIGFuZCBmaW5kIHRoZSBzYW1lIG9iamVjdC4NCiAgICAgKi8NCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RmluZCgpIHsNCiAgICAgICAgUE9iamVjdCBw\nYyA9IGNyZWF0ZSgpOw0KICAgICAgICBpbnQgdmFsdWUgPSBwYy5nZXRWYWx1\nZSgpOw0KDQogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7DQogICAgICAgIFBPYmplY3QgcGMyID0gZW0uZmluZChQT2Jq\nZWN0LmNsYXNzLCBwYy5nZXRJZCgpKTsNCiAgICAgICAgYXNzZXJ0Tm90TnVs\nbChwYzIpOw0KICAgICAgICBhc3NlcnROb3RFcXVhbHMocGMsIHBjMik7DQog\nICAgICAgIGFzc2VydEVxdWFscyhwYy5nZXRJZCgpLCBwYzIuZ2V0SWQoKSk7\nDQogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZSwgcGMyLmdldFZhbHVlKCkp\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RQZXJzaXN0SW5kZXBl\nbmRlbnRPYmplY3RzKCkgew0KICAgICAgICBpbnQgYmVmb3JlID0gY291bnQo\nUE9iamVjdC5jbGFzcyk7DQogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBpbnQgTiA9IDI7\nDQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsNCiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspDQogICAgICAgICAgICBl\nbS5wZXJzaXN0KG5ldyBQT2JqZWN0KCkpOw0KICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOw0KICAgICAgICBlbS5jbGVhcigpOw0KICAg\nICAgICBpbnQgYWZ0ZXIgPSBjb3VudChQT2JqZWN0LmNsYXNzKTsNCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKGJlZm9yZSArIE4sIGFmdGVyKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0UGVyc2lzdENvbm5lY3RlZE9iamVjdEdy\nYXBoKCkgew0KICAgICAgICBQZXJzb24gcDEgPSBuZXcgUGVyc29uKCJBIik7\nDQogICAgICAgIFBlcnNvbiBwMiA9IG5ldyBQZXJzb24oIkIiKTsNCiAgICAg\nICAgUGVyc29uIHAzID0gbmV3IFBlcnNvbigiQyIpOw0KICAgICAgICBBZGRy\nZXNzIGExID0gbmV3IEFkZHJlc3MoIlJvbWUiLCAxMjM0NSk7DQogICAgICAg\nIEFkZHJlc3MgYTIgPSBuZXcgQWRkcmVzcygiU2FuIEZyYW5jaXNjbyIsIDIz\nNDU2KTsNCiAgICAgICAgQWRkcmVzcyBhMyA9IG5ldyBBZGRyZXNzKCJOZXcg\nWW9yayIsIDM0NTY3KTsNCiAgICAgICAgcDEuc2V0QWRkcmVzcyhhMSk7DQog\nICAgICAgIHAyLnNldEFkZHJlc3MoYTIpOw0KICAgICAgICBwMy5zZXRBZGRy\nZXNzKGEzKTsNCg0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOw0KICAgICAgICBlbS5wZXJzaXN0KHAxKTsNCiAgICAg\nICAgZW0ucGVyc2lzdChwMik7DQogICAgICAgIGVtLnBlcnNpc3QocDMpOw0K\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOw0KDQogICAg\nICAgIGVtLmNsZWFyKCk7DQoNCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7DQogICAgICAgIExpc3Q8UGVyc29uPiBwZXJzb25zID0NCiAgICAg\nICAgICAgICAgICBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIHAgRlJPTSBQZXJz\nb24gcCBXSEVSRSBwLm5hbWU9PzEiKQ0KICAgICAgICAgICAgICAgICAgICAg\nICAgLnNldFBhcmFtZXRlcigxLCAiQSIpLmdldFJlc3VsdExpc3QoKTsNCiAg\nICAgICAgTGlzdDxBZGRyZXNzPiBhZGRyZXNzZXMgPQ0KICAgICAgICAgICAg\nICAgIGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgYSBGUk9NIEFkZHJlc3MgYSIp\nLmdldFJlc3VsdExpc3QoKTsNCiAgICAgICAgZm9yIChBZGRyZXNzIHBjIDog\nYWRkcmVzc2VzKSB7DQogICAgICAgICAgICBhc3NlcnROb3ROdWxsKHBjLmdl\ndENpdHkoKSk7DQogICAgICAgICAgICBhc3NlcnROb3ROdWxsKHBjLmdldE93\nbmVyKCkuZ2V0TmFtZSgpKTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKFBl\ncnNvbiBwYyA6IHBlcnNvbnMpIHsNCiAgICAgICAgICAgIGFzc2VydE5vdE51\nbGwocGMuZ2V0TmFtZSgpKTsNCiAgICAgICAgICAgIGFzc2VydE5vdE51bGwo\ncGMuZ2V0QWRkcmVzcygpLmdldENpdHkoKSk7DQogICAgICAgIH0NCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOw0KICAgIH0NCg0K\nICAgIC8qKg0KICAgICAqIE1lcmdlIG9ubHkgd29ya3MgaWYgdGhlIGRpc3Ry\naWJ1dGlvbiBwb2xpY3kgYXNzaWducyB0aGUgY29ycmVjdCBzbGljZQ0KICAg\nICAqIGZyb20gd2hpY2ggdGhlIGluc3RhbmNlIHdhcyBmZXRjaGVkLg0KICAg\nICAqLw0KICAgIHB1YmxpYyB2b2lkIHRlc3RNZXJnZSgpIHsNCiAgICAgICAg\nUE9iamVjdCBwYyA9IGNyZWF0ZSgxKS5nZXQoMCk7DQogICAgICAgIGludCB2\nYWx1ZSA9IHBjLmdldFZhbHVlKCk7DQogICAgICAgIHBjLnNldFZhbHVlKHZh\nbHVlICsgMSk7DQogICAgICAgIGFzc2VydE5vdE51bGwocGMpOw0KICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAg\nICAgICBQT2JqZWN0IHBjMiA9IGVtLm1lcmdlKHBjKTsNCiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0uY2xlYXIo\nKTsNCg0KICAgICAgICBhc3NlcnROb3ROdWxsKHBjMik7DQogICAgICAgIGFz\nc2VydE5vdEVxdWFscyhwYywgcGMyKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKHBjLmdldElkKCksIHBjMi5nZXRJZCgpKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKHZhbHVlICsgMSwgcGMyLmdldFZhbHVlKCkpOw0KICAgIH0NCg0KfQ0K\n","encoding":"base64"}

