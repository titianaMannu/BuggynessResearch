{"sha":"1c0875348c50b0f32503250507a8aadcc0a2a7c2","node_id":"MDQ6QmxvYjIwNjM2NDoxYzA4NzUzNDhjNTBiMGYzMjUwMzI1MDUwN2E4YWFkY2MwYTJhN2My","size":4993,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1c0875348c50b0f32503250507a8aadcc0a2a7c2","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\nc2xpY2U7DQoNCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0Ow0KaW1wb3J0\nIGphdmEudXRpbC5MaXN0Ow0KDQppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nRW50aXR5TWFuYWdlcjsNCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVy\neTsNCg0KLyoqDQogKiBUZXN0cyBxdWVyeSBvcmRlcmluZy4NCiAqIA0KICog\nQGF1dGhvciBQaW5ha2kgUG9kZGFyIA0KICoNCiAqLw0KcHVibGljIGNsYXNz\nIFRlc3RRdWVyeSBleHRlbmRzIFNsaWNlVGVzdENhc2Ugew0KICAgIHByaXZh\ndGUgaW50IFBPQkpFQ1RfQ09VTlQgPSAyNTsNCiAgICBwcml2YXRlIGludCBW\nQUxVRV9NSU4gPSAxMDA7DQogICAgcHJpdmF0ZSBpbnQgVkFMVUVfTUFYID0g\nVkFMVUVfTUlOICsgUE9CSkVDVF9DT1VOVCAtIDE7DQogICAgDQogICAgcHJv\ndGVjdGVkIFN0cmluZyBnZXRQZXJzaXN0ZW5jZVVuaXROYW1lKCkgew0KICAg\nICAgICByZXR1cm4gIm9yZGVyaW5nIjsNCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gew0KICAgICAgICBzdXBl\nci5zZXRVcChQT2JqZWN0LmNsYXNzLCBQZXJzb24uY2xhc3MsIEFkZHJlc3Mu\nY2xhc3MsIENMRUFSX1RBQkxFUyk7DQogICAgICAgIGludCBjb3VudCA9IGNv\ndW50KFBPYmplY3QuY2xhc3MpOw0KICAgICAgICBpZiAoY291bnQgPT0gMCkg\new0KICAgICAgICAgICAgY3JlYXRlKFBPQkpFQ1RfQ09VTlQpOw0KICAgICAg\nICB9DQogICAgfQ0KICAgIA0KICAgIHZvaWQgY3JlYXRlKGludCBOKSB7DQog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7\nDQogICAgICAgIGZvciAoaW50IGk9MDtpPFBPQkpFQ1RfQ09VTlQ7aSsrKSB7\nDQogICAgICAgICAgICBQT2JqZWN0IHBjID0gbmV3IFBPYmplY3QoKTsNCiAg\nICAgICAgICAgIHBjLnNldFZhbHVlKFZBTFVFX01JTiArIGkpOw0KICAgICAg\nICAgICAgZW0ucGVyc2lzdChwYyk7DQogICAgICAgICAgICBTdHJpbmcgc2xp\nY2UgPSBTbGljZVBlcnNpc3RlbmNlLmdldFNsaWNlKHBjKTsNCiAgICAgICAg\nICAgIFN0cmluZyBleHBlY3RlZCA9IChwYy5nZXRWYWx1ZSgpJTIgPT0gMCkg\nPyAiRXZlbiIgOiAiT2RkIjsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhl\neHBlY3RlZCwgc2xpY2UpOw0KICAgICAgICB9DQogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgfQ0KICAgIA0KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RRdWVyeVJlc3VsdElzT3JkZXJlZEFjcm9zc1NsaWNlKCkg\new0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOw0KICAgICAgICBRdWVyeSBxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KCJT\nRUxFQ1QgcC52YWx1ZSxwIEZST00gUE9iamVjdCBwIE9SREVSIEJZIHAudmFs\ndWUgQVNDIik7DQogICAgICAgIExpc3QgcmVzdWx0ID0gcXVlcnkuZ2V0UmVz\ndWx0TGlzdCgpOw0KICAgICAgICBJbnRlZ2VyIG9sZCA9IEludGVnZXIuTUlO\nX1ZBTFVFOw0KICAgICAgICBmb3IgKE9iamVjdCByb3cgOiByZXN1bHQpIHsN\nCiAgICAgICAgICAgIE9iamVjdFtdIGxpbmUgPSAoT2JqZWN0W10pcm93Ow0K\nICAgICAgICAgICAgaW50IHZhbHVlID0gKChJbnRlZ2VyKWxpbmVbMF0pLmlu\ndFZhbHVlKCk7DQogICAgICAgICAgICBQT2JqZWN0IHBjID0gKFBPYmplY3Qp\nbGluZVsxXTsNCiAgICAgICAgICAgIGFzc2VydFRydWUodmFsdWUgPj0gb2xk\nKTsNCiAgICAgICAgICAgIG9sZCA9IHZhbHVlOw0KICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKHZhbHVlLCBwYy5nZXRWYWx1ZSgpKTsNCiAgICAgICAgfQ0K\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7DQogICAg\nfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RBZ2dyZWdhdGVRdWVyeSgp\nIHsNCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsNCiAgICAgICAgT2JqZWN0IGNvdW50ID0gZW0uY3JlYXRlUXVlcnko\nIlNFTEVDVCBDT1VOVChwKSBGUk9NIFBPYmplY3QgcCIpLmdldFNpbmdsZVJl\nc3VsdCgpOw0KICAgICAgICBPYmplY3QgbWF4ICAgPSBlbS5jcmVhdGVRdWVy\neSgiU0VMRUNUIE1BWChwLnZhbHVlKSBGUk9NIFBPYmplY3QgcCIpLmdldFNp\nbmdsZVJlc3VsdCgpOw0KICAgICAgICBPYmplY3QgbWluICAgPSBlbS5jcmVh\ndGVRdWVyeSgiU0VMRUNUIE1JTihwLnZhbHVlKSBGUk9NIFBPYmplY3QgcCIp\nLmdldFNpbmdsZVJlc3VsdCgpOw0KICAgICAgICBPYmplY3Qgc3VtICAgPSBl\nbS5jcmVhdGVRdWVyeSgiU0VMRUNUIFNVTShwLnZhbHVlKSBGUk9NIFBPYmpl\nY3QgcCIpLmdldFNpbmdsZVJlc3VsdCgpOw0KICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLnJvbGxiYWNrKCk7DQogICAgICAgIA0KICAgICAgICBhc3Nl\ncnRFcXVhbHMoUE9CSkVDVF9DT1VOVCwgKChOdW1iZXIpY291bnQpLmludFZh\nbHVlKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoVkFMVUVfTUFYLCAoKE51\nbWJlciltYXgpLmludFZhbHVlKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMo\nVkFMVUVfTUlOLCAoKE51bWJlciltaW4pLmludFZhbHVlKCkpOw0KICAgICAg\nICBhc3NlcnRFcXVhbHMoKFZBTFVFX01JTitWQUxVRV9NQVgpKlBPQkpFQ1Rf\nQ09VTlQsIDIqKChOdW1iZXIpc3VtKS5pbnRWYWx1ZSgpKTsNCiAgICB9DQog\nICAgDQogICAgcHVibGljIHZvaWQgdGVzdFNldE1heFJlc3VsdCgpIHsNCiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7DQogICAgICAgIGludCBsaW1pdCA9IDM7DQogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsNCiAgICAgICAgTGlzdCByZXN1bHQg\nPSBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIHAudmFsdWUscCBGUk9NIFBPYmpl\nY3QgcCBPUkRFUiBCWSBwLnZhbHVlIEFTQyIpDQogICAgICAgICAgICAuc2V0\nTWF4UmVzdWx0cyhsaW1pdCkuZ2V0UmVzdWx0TGlzdCgpOw0KICAgICAgICBp\nbnQgaSA9IDA7DQogICAgICAgIGZvciAoT2JqZWN0IHJvdyA6IHJlc3VsdCkg\new0KICAgICAgICAgICAgT2JqZWN0W10gbGluZSA9IChPYmplY3RbXSlyb3c7\nDQogICAgICAgICAgICBpbnQgdmFsdWUgPSAoKEludGVnZXIpbGluZVswXSku\naW50VmFsdWUoKTsNCiAgICAgICAgICAgIFBPYmplY3QgcGMgPSAoUE9iamVj\ndClsaW5lWzFdOw0KICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKCsr\naSArICIuIiArIFNsaWNlUGVyc2lzdGVuY2UuZ2V0U2xpY2UocGMpICsgIjoi\nIA0KICAgICAgICAgICAgICAgICAgICArIHBjLmdldElkKCkgKyAiLCIgKyBw\nYy5nZXRWYWx1ZSgpKTsNCiAgICAgICAgfQ0KICAgICAgICBhc3NlcnRFcXVh\nbHMobGltaXQsIHJlc3VsdC5zaXplKCkpOw0KICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLnJvbGxiYWNrKCk7DQogICAgfQ0KICAgIA0KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RIaW50KCkgew0KICAgICAgICBMaXN0PFN0cmluZz4gdGFy\nZ2V0cyA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOw0KICAgICAgICB0YXJn\nZXRzLmFkZCgiRXZlbiIpOw0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBRdWVyeSBxdWVyeSA9IGVt\nLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgcCBGUk9NIFBPYmplY3QgcCIpOw0KICAg\nICAgICBxdWVyeS5zZXRIaW50KFByb2R1Y3REZXJpdmF0aW9uLkhJTlRfVEFS\nR0VULCAiRXZlbiIpOw0KICAgICAgICBMaXN0IHJlc3VsdCA9IHF1ZXJ5Lmdl\ndFJlc3VsdExpc3QoKTsNCiAgICAgICAgZm9yIChPYmplY3QgcGMgOiByZXN1\nbHQpIHsNCiAgICAgICAgICAgIFN0cmluZyBzbGljZSA9IFNsaWNlUGVyc2lz\ndGVuY2UuZ2V0U2xpY2UocGMpOw0KICAgICAgICAgICAgYXNzZXJ0VHJ1ZSh0\nYXJnZXRzLmNvbnRhaW5zKHNsaWNlKSk7DQogICAgICAgIH0NCiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOw0KICAgIH0NCn0NCg==\n","encoding":"base64"}

