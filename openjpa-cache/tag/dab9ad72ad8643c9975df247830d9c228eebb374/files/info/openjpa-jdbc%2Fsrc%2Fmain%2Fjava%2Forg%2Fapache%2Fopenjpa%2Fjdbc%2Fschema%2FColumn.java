{"sha":"deda088e8666cdf95fa8e8b7079371686b0fcc32","node_id":"MDQ6QmxvYjIwNjM2NDpkZWRhMDg4ZTg2NjZjZGY5NWZhOGU4YjcwNzkzNzE2ODZiMGZjYzMy","size":21752,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/deda088e8666cdf95fa8e8b7079371686b0fcc32","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGguQmln\nSW50ZWdlcjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNlTWV0YURhdGE7Cmlt\ncG9ydCBqYXZhLnNxbC5EYXRlOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1w\nb3J0IGphdmEuc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEuc3FsLlR5cGVz\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FM\nVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLlZl\ncnNpb25TdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkphdmFUeXBlczsKaW1wb3J0IHNlcnAudXRpbC5OdW1iZXJzOwoKLyoqCiAq\nIFJlcHJlc2VudHMgYSBkYXRhYmFzZSBjb2x1bW4uIENsb3NlbHkgYWxpZ25l\nZCB3aXRoIHRoZSBjb2x1bW4KICogaW5mb3JtYXRpb24gYXZhaWxhYmxlIGZy\nb20ge0BsaW5rIERhdGFiYXNlTWV0YURhdGF9LgogKgogKiBAYXV0aG9yIEFi\nZSBXaGl0ZQogKiBAYXV0aG9yIFN0ZXBoZW4gS2ltCiAqLwpwdWJsaWMgY2xh\nc3MgQ29sdW1uCiAgICBleHRlbmRzIFJlZmVyZW5jZUNvdW50ZXIgewoKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfVU5JTlNFUlRBQkxFID0g\nMiA8PCAwOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRkxBR19VTlVQ\nREFUQUJMRSA9IDIgPDwgMTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50\nIEZMQUdfRElSRUNUX0lOU0VSVCA9IDIgPDwgMjsKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgaW50IEZMQUdfRElSRUNUX1VQREFURSA9IDIgPDwgMzsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfRktfSU5TRVJUID0gMiA8\nPCA0OwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRkxBR19GS19VUERB\nVEUgPSAyIDw8IDU7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBGTEFH\nX1BLX0pPSU4gPSAyIDw8IDY7CgogICAgcHJpdmF0ZSBTdHJpbmcgX25hbWUg\nPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX2Z1bGxOYW1lID0gbnVsbDsK\nICAgIHByaXZhdGUgVGFibGUgX3RhYmxlID0gbnVsbDsKICAgIHByaXZhdGUg\nU3RyaW5nIF90YWJsZU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcg\nX3NjaGVtYU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBpbnQgX3R5cGUgPSBU\neXBlcy5PVEhFUjsKICAgIHByaXZhdGUgU3RyaW5nIF90eXBlTmFtZSA9IG51\nbGw7CiAgICBwcml2YXRlIGludCBfamF2YVR5cGUgPSBKYXZhVHlwZXMuT0JK\nRUNUOwogICAgcHJpdmF0ZSBpbnQgX3NpemUgPSAwOwogICAgcHJpdmF0ZSBp\nbnQgX2RlY2ltYWxzID0gMDsKICAgIHByaXZhdGUgU3RyaW5nIF9kZWZhdWx0\nU3RyID0gbnVsbDsKICAgIHByaXZhdGUgT2JqZWN0IF9kZWZhdWx0ID0gbnVs\nbDsKICAgIHByaXZhdGUgQm9vbGVhbiBfbm90TnVsbCA9IG51bGw7CiAgICBw\ncml2YXRlIGJvb2xlYW4gX2F1dG9Bc3NpZ24gPSBmYWxzZTsKICAgIHByaXZh\ndGUgYm9vbGVhbiBfcmVsID0gZmFsc2U7CiAgICBwcml2YXRlIFN0cmluZyBf\ndGFyZ2V0ID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF90YXJnZXRGaWVs\nZCA9IG51bGw7CiAgICBwcml2YXRlIGludCBfZmxhZ3MgPSAwOwoKICAgIHBy\naXZhdGUgaW50IF9pbmRleCA9IDA7CiAgICBwcml2YXRlIGJvb2xlYW4gX3Br\nID0gZmFsc2U7CiAgICBwcml2YXRlIFZlcnNpb25TdHJhdGVneSBfdmVyc2lv\nblN0cmF0ZWd5ID0gbnVsbDsKICAgIAogICAgLyoqCiAgICAgKiBEZWZhdWx0\nIGNvbnN0cnVjdG9yLgogICAgICovCiAgICBwdWJsaWMgQ29sdW1uKCkgewog\nICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuCiAgICAgKgogICAg\nICogQHBhcmFtIG5hbWUgdGhlIG5hbWUgb2YgdGhlIGNvbHVtbgogICAgICog\nQHBhcmFtIHRhYmxlIHRoZSBjb2x1bW4ncyB0YWJsZQogICAgICovCiAgICBw\ndWJsaWMgQ29sdW1uKFN0cmluZyBuYW1lLCBUYWJsZSB0YWJsZSkgewogICAg\nICAgIHNldE5hbWUobmFtZSk7CiAgICAgICAgaWYgKHRhYmxlICE9IG51bGwp\nIHsKICAgICAgICAgICAgc2V0VGFibGVOYW1lKHRhYmxlLmdldE5hbWUoKSk7\nCiAgICAgICAgICAgIHNldFNjaGVtYU5hbWUodGFibGUuZ2V0U2NoZW1hTmFt\nZSgpKTsKICAgICAgICB9CiAgICAgICAgX3RhYmxlID0gdGFibGU7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgY29sdW1uIGlzIHJl\nbW92ZWQgZnJvbSBpdHMgdGFibGUuIFJlbW92ZXMgdGhlIGNvbHVtbgogICAg\nICogZnJvbSBhbGwgdGFibGUgY29uc3RyYWludHMgYW5kIGluZGV4ZXMsIHRo\nZW4gaW52YWxpZGF0ZXMgaXQuCiAgICAgKi8KICAgIHZvaWQgcmVtb3ZlKCkg\newogICAgICAgIFRhYmxlIHRhYmxlID0gZ2V0VGFibGUoKTsKICAgICAgICBp\nZiAodGFibGUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAg\nICBTY2hlbWEgc2NoZW1hID0gdGFibGUuZ2V0U2NoZW1hKCk7CiAgICAgICAg\naWYgKHNjaGVtYSAhPSBudWxsICYmIHNjaGVtYS5nZXRTY2hlbWFHcm91cCgp\nICE9IG51bGwpIHsKICAgICAgICAgICAgU2NoZW1hW10gc2NoZW1hcyA9IHNj\naGVtYS5nZXRTY2hlbWFHcm91cCgpLmdldFNjaGVtYXMoKTsKICAgICAgICAg\nICAgVGFibGVbXSB0YWJzOwogICAgICAgICAgICBGb3JlaWduS2V5W10gZmtz\nOwogICAgICAgICAgICBDb2x1bW5bXSBjb2xzOwogICAgICAgICAgICBDb2x1\nbW5bXSBwa3M7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2No\nZW1hcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGFicyA9IHNj\naGVtYXNbaV0uZ2V0VGFibGVzKCk7CiAgICAgICAgICAgICAgICBmb3IgKGlu\ndCBqID0gMDsgaiA8IHRhYnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAg\nICAgICAgICBma3MgPSB0YWJzW2pdLmdldEZvcmVpZ25LZXlzKCk7CiAgICAg\nICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgPCBma3MubGVuZ3Ro\nOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29scyA9IGZrc1tr\nXS5nZXRDb2x1bW5zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBrcyA9\nIGZrc1trXS5nZXRQcmltYXJ5S2V5Q29sdW1ucygpOwogICAgICAgICAgICAg\nICAgICAgICAgICBmb3IgKGludCBsID0gMDsgbCA8IGNvbHMubGVuZ3RoOyBs\nKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lcXVh\nbHMoY29sc1tsXSkgfHwgdGhpcy5lcXVhbHMocGtzW2xdKSkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBma3Nba10ucmVtb3ZlSm9pbihjb2xz\nW2xdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHMgPSBma3Nba10u\nZ2V0Q29uc3RhbnRDb2x1bW5zKCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGZvciAoaW50IGwgPSAwOyBsIDwgY29scy5sZW5ndGg7IGwrKykKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVxdWFscyhjb2xzW2xd\nKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma3Nba10ucmVt\nb3ZlSm9pbihjb2xzW2xdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHBr\ncyA9IGZrc1trXS5nZXRDb25zdGFudFByaW1hcnlLZXlDb2x1bW5zKCk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGwgPSAwOyBsIDwgcGtz\nLmxlbmd0aDsgbCsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg\nKHRoaXMuZXF1YWxzKHBrc1tsXSkpCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgZmtzW2tdLnJlbW92ZUpvaW4ocGtzW2xdKTsKCiAgICAgICAg\nICAgICAgICAgICAgICAgIGlmIChma3Nba10uZ2V0Q29sdW1ucygpLmxlbmd0\naCA9PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBma3Nba10u\nZ2V0Q29uc3RhbnRDb2x1bW5zKCkubGVuZ3RoID09IDApCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICB0YWJzW2pdLnJlbW92ZUZvcmVpZ25LZXkoZmtz\nW2tdKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEluZGV4W10gaWR4\ncyA9IHRhYmxlLmdldEluZGV4ZXMoKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IGlkeHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmIChpZHhz\nW2ldLnJlbW92ZUNvbHVtbih0aGlzKSAmJiBpZHhzW2ldLmdldENvbHVtbnMo\nKS5sZW5ndGggPT0gMCkKICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZUlu\nZGV4KGlkeHNbaV0pOwoKICAgICAgICBVbmlxdWVbXSB1bnFzID0gdGFibGUu\nZ2V0VW5pcXVlcygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdW5x\ncy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKHVucXNbaV0ucmVtb3Zl\nQ29sdW1uKHRoaXMpICYmIHVucXNbaV0uZ2V0Q29sdW1ucygpLmxlbmd0aCA9\nPSAwKQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlVW5pcXVlKHVucXNb\naV0pOwoKICAgICAgICBQcmltYXJ5S2V5IHBrID0gdGFibGUuZ2V0UHJpbWFy\neUtleSgpOwogICAgICAgIGlmIChwayAhPSBudWxsICYmIHBrLnJlbW92ZUNv\nbHVtbih0aGlzKSAmJiBway5nZXRDb2x1bW5zKCkubGVuZ3RoID09IDApCiAg\nICAgICAgICAgIHRhYmxlLnJlbW92ZVByaW1hcnlLZXkoKTsKCiAgICAgICAg\nX3RhYmxlID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0\naGUgdGFibGUgZm9yIHRoZSBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyBU\nYWJsZSBnZXRUYWJsZSgpIHsKICAgICAgICByZXR1cm4gX3RhYmxlOwogICAg\nfQoKICAgIC8qKgogICAgICogVGhlIGNvbHVtbidzIHRhYmxlIG5hbWUuCiAg\nICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0VGFibGVOYW1lKCkgewogICAg\nICAgIHJldHVybiBfdGFibGVOYW1lOwogICAgfQoKICAgIC8qKgogICAgICog\nVGhlIGNvbHVtbidzIHRhYmxlIG5hbWUuIFlvdSBjYW4gb25seSBjYWxsIHRo\naXMgbWV0aG9kIG9uIGNvbHVtbnMKICAgICAqIHdob3NlIHRhYmxlIG9iamVj\ndCBpcyBub3Qgc2V0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRUYWJs\nZU5hbWUoU3RyaW5nIG5hbWUpIHsKICAgICAgICBpZiAoZ2V0VGFibGUoKSAh\nPSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhj\nZXB0aW9uKCk7CiAgICAgICAgX3RhYmxlTmFtZSA9IG5hbWU7CiAgICAgICAg\nX2Z1bGxOYW1lID0gbnVsbDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBS\nZXNldCB0aGUgdGFibGUgbmFtZSB3aXRoIHRoZSBmdWxseSBxdWFsaWZpZWQg\ndGFibGUgbmFtZSB3aGljaAogICAgICogaW5jbHVkZXMgdGhlIHNjaGVtYSBu\nYW1lCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlc2V0VGFibGVOYW1lKFN0\ncmluZyBuYW1lKSB7CiAgICAgICAgX3RhYmxlTmFtZSA9IG5hbWU7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUaGUgY29sdW1uJ3Mgc2NoZW1hIG5hbWUuCiAg\nICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0U2NoZW1hTmFtZSgpIHsKICAg\nICAgICByZXR1cm4gX3NjaGVtYU5hbWU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBUaGUgY29sdW1uJ3Mgc2NoZW1hIG5hbWUuIFlvdSBjYW4gb25seSBjYWxs\nIHRoaXMgbWV0aG9kIG9uIGNvbHVtbnMKICAgICAqIHdob3NlIHRhYmxlIG9i\namVjdCBpcyBub3Qgc2V0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRT\nY2hlbWFOYW1lKFN0cmluZyBuYW1lKSB7CiAgICAgICAgaWYgKGdldFRhYmxl\nKCkgIT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0\nZUV4Y2VwdGlvbigpOwogICAgICAgIF9zY2hlbWFOYW1lID0gbmFtZTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY29sdW1uJ3MgbmFtZS4K\nICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkgewogICAgICAg\nIHJldHVybiBfbmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUg\nY29sdW1uJ3MgbmFtZS4gWW91IGNhbiBvbmx5IGNhbGwgdGhpcyBtZXRob2Qg\nb24gY29sdW1ucwogICAgICogd2hvc2UgdGFibGUgb2JqZWN0IGlzIG5vdCBz\nZXQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5nIG5h\nbWUpIHsKICAgICAgICBpZiAoZ2V0VGFibGUoKSAhPSBudWxsKQogICAgICAg\nICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAgICAg\nICAgX25hbWUgPSBuYW1lOwogICAgICAgIF9mdWxsTmFtZSA9IG51bGw7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvbHVtbidzIGZ1bGwg\nbmFtZSwgaW4gdGhlIGZvcm0gJmx0O3RhYmxlJmd0Oy4mbHQ7bmFtZSZndDsu\nCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0RnVsbE5hbWUoKSB7CiAg\nICAgICAgaWYgKF9mdWxsTmFtZSA9PSBudWxsKSB7CiAgICAgICAgICAgIFN0\ncmluZyBuYW1lID0gZ2V0TmFtZSgpOwogICAgICAgICAgICBpZiAobmFtZSA9\nPSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAg\nICAgIFN0cmluZyB0bmFtZSA9IGdldFRhYmxlTmFtZSgpOwogICAgICAgICAg\nICBpZiAodG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBu\nYW1lOwogICAgICAgICAgICBfZnVsbE5hbWUgPSB0bmFtZSArICIuIiArIG5h\nbWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfZnVsbE5hbWU7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvbHVtbidzIFNRTCB0eXBl\nLiBUaGlzIHdpbGwgYmUgb25lIG9mIHRoZSB0eXBlIGNvbnN0YW50cwogICAg\nICogZGVmaW5lZCBpbiB7QGxpbmsgVHlwZXN9LgogICAgICovCiAgICBwdWJs\naWMgaW50IGdldFR5cGUoKSB7CiAgICAgICAgcmV0dXJuIF90eXBlOwogICAg\nfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBjb2x1bW4ncyBTUUwgdHlwZS4g\nVGhpcyBzaG91bGQgYmUgb25lIG9mIHRoZSB0eXBlIGNvbnN0YW50cwogICAg\nICogZGVmaW5lZCBpbiB7QGxpbmsgVHlwZXN9LgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRUeXBlKGludCBzcWxUeXBlKSB7CiAgICAgICAgX3R5cGUg\nPSBzcWxUeXBlOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGRhdGFiYXNl\nLXNwZWNpZmljIFNRTCB0eXBlIG9mIHRoaXMgY29sdW1uLgogICAgICovCiAg\nICBwdWJsaWMgU3RyaW5nIGdldFR5cGVOYW1lKCkgewogICAgICAgIHJldHVy\nbiBfdHlwZU5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGF0YWJh\nc2Utc3BlY2lmaWMgU1FMIHR5cGUgb2YgdGhpcyBjb2x1bW4uCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldFR5cGVOYW1lKFN0cmluZyB0eXBlTmFtZSkg\newogICAgICAgIF90eXBlTmFtZSA9IHR5cGVOYW1lOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIEphdmEgdHlwZSB0aGUgZGF0YSBpbiB0aGlzIGNvbHVt\nbiBpcyB0cmVhdGVkIGFzLCBmcm9tCiAgICAgKiB7QGxpbmsgSmF2YVR5cGVz\nfSBvciB7QGxpbmsgSmF2YVNRTFR5cGVzfS4KICAgICAqLwogICAgcHVibGlj\nIGludCBnZXRKYXZhVHlwZSgpIHsKICAgICAgICByZXR1cm4gX2phdmFUeXBl\nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIEphdmEgdHlwZSB0aGUgZGF0\nYSBpbiB0aGlzIGNvbHVtbiBpcyB0cmVhdGVkIGFzLCBmcm9tCiAgICAgKiB7\nQGxpbmsgSmF2YVR5cGVzfSBvciB7QGxpbmsgSmF2YVNRTFR5cGVzfS4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0SmF2YVR5cGUoaW50IHR5cGUpIHsK\nICAgICAgICBfamF2YVR5cGUgPSB0eXBlOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSBjb2x1bW4ncyBzaXplLgogICAgICovCiAgICBwdWJs\naWMgaW50IGdldFNpemUoKSB7CiAgICAgICAgcmV0dXJuIF9zaXplOwogICAg\nfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBjb2x1bW4ncyBzaXplLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXRTaXplKGludCBzaXplKSB7CiAgICAg\nICAgX3NpemUgPSBzaXplOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBudW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMgZm9yIHRoZSBjb2x1bW4s\nIGlmIGFwcGxpY2FibGUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0RGVj\naW1hbERpZ2l0cygpIHsKICAgICAgICByZXR1cm4gX2RlY2ltYWxzOwogICAg\nfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBudW1iZXIgb2YgZGVjaW1hbCBk\naWdpdHMgZm9yIHRoZSBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldERlY2ltYWxEaWdpdHMoaW50IGRpZ2l0cykgewogICAgICAgIF9kZWNp\nbWFscyA9IGRpZ2l0czsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0\naGUgZGVmYXVsdCB2YWx1ZSBzZXQgZm9yIHRoZSBjb2x1bW4sIGlmIGFueS4K\nICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXREZWZhdWx0U3RyaW5nKCkg\newogICAgICAgIHJldHVybiBfZGVmYXVsdFN0cjsKICAgIH0KCiAgICAvKioK\nICAgICAqIFNldCB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIGNvbHVtbi4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGVmYXVsdFN0cmluZyhTdHJp\nbmcgZGVmKSB7CiAgICAgICAgX2RlZmF1bHRTdHIgPSBkZWY7CiAgICAgICAg\nX2RlZmF1bHQgPSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBkZWZhdWx0IHZhbHVlIHNldCBmb3IgdGhpcyBjb2x1bW4sIGlmIGFu\neS4gSWYgb25seSBhIGRlZmF1bHQKICAgICAqIHN0cmluZyBoYXMgYmVlbiBz\nZXQsIGF0dGVtcHRzIHRvIGNvbnZlcnQgaXQgdG8gdGhlIHJpZ2h0IHR5cGUg\nYmFzZWQKICAgICAqIG9uIHRoZSBKYXZhIHR5cGUgc2V0IGZvciB0aGlzIGNv\nbHVtbi4KICAgICAqLwogICAgcHVibGljIE9iamVjdCBnZXREZWZhdWx0KCkg\newogICAgICAgIGlmIChfZGVmYXVsdCAhPSBudWxsKQogICAgICAgICAgICBy\nZXR1cm4gX2RlZmF1bHQ7CiAgICAgICAgaWYgKF9kZWZhdWx0U3RyID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBzd2l0Y2gg\nKF9qYXZhVHlwZSkgewogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09M\nRUFOOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOX09CSjoK\nICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gKCJ0cnVlIi5lcXVhbHMoX2Rl\nZmF1bHRTdHIpKSA/IEJvb2xlYW4uVFJVRQogICAgICAgICAgICAgICAgICAg\nIDogQm9vbGVhbi5GQUxTRTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5CWVRFOgogICAgICAgICAgICBjYXNl\nIEphdmFUeXBlcy5CWVRFX09CSjoKICAgICAgICAgICAgICAgIF9kZWZhdWx0\nID0gbmV3IEJ5dGUoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkNIQVI6CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkNIQVJfT0JKOgogICAgICAgICAgICAgICAg\nX2RlZmF1bHQgPSBuZXcgQ2hhcmFjdGVyKF9kZWZhdWx0U3RyLmNoYXJBdCgw\nKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuRE9VQkxFOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5E\nT1VCTEVfT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgRG91\nYmxlKF9kZWZhdWx0U3RyKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5GTE9BVDoKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuRkxPQVRfT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1\nbHQgPSBuZXcgRmxvYXQoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVDoKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UX09CSjoKICAgICAgICAgICAgICAg\nIF9kZWZhdWx0ID0gTnVtYmVycy52YWx1ZU9mKEludGVnZXIucGFyc2VJbnQo\nX2RlZmF1bHRTdHIpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICBjYXNlIEphdmFUeXBlcy5MT05HOgogICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5MT05HX09CSjoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0g\nTnVtYmVycy52YWx1ZU9mKExvbmcucGFyc2VMb25nKF9kZWZhdWx0U3RyKSk7\nCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuTlVNQkVSOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CSUdE\nRUNJTUFMOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgQmlnRGVj\naW1hbChfZGVmYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hPUlQ6CiAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLlNIT1JUX09CSjoKICAgICAgICAgICAgICAgIF9kZWZh\ndWx0ID0gbmV3IFNob3J0KF9kZWZhdWx0U3RyKTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5EQVRFOgogICAg\nICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgamF2YS51dGlsLkRhdGUoX2Rl\nZmF1bHRTdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkJJR0lOVEVHRVI6CiAgICAgICAgICAgICAgICBf\nZGVmYXVsdCA9IG5ldyBCaWdJbnRlZ2VyKF9kZWZhdWx0U3RyKTsKICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFTUUxUeXBl\ncy5TUUxfREFURToKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gRGF0ZS52\nYWx1ZU9mKF9kZWZhdWx0U3RyKTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICBjYXNlIEphdmFTUUxUeXBlcy5USU1FU1RBTVA6CiAgICAg\nICAgICAgICAgICBfZGVmYXVsdCA9IFRpbWVzdGFtcC52YWx1ZU9mKF9kZWZh\ndWx0U3RyKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBj\nYXNlIEphdmFTUUxUeXBlcy5USU1FOgogICAgICAgICAgICAgICAgX2RlZmF1\nbHQgPSBUaW1lLnZhbHVlT2YoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAg\nICBfZGVmYXVsdCA9IF9kZWZhdWx0U3RyOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gX2RlZmF1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhl\nIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBjb2x1bW4uCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldERlZmF1bHQoT2JqZWN0IGRlZikgewogICAgICAgIF9k\nZWZhdWx0ID0gZGVmOwogICAgICAgIF9kZWZhdWx0U3RyID0gKGRlZiA9PSBu\ndWxsKSA/IG51bGwgOiBkZWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0cnVlIGlmIHRoaXMgaXMgYSBOT1QgTlVMTCBjb2x1\nbW4uCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzTm90TnVsbCgpIHsK\nICAgICAgICByZXR1cm4gX25vdE51bGwgPT0gQm9vbGVhbi5UUlVFOwogICAg\nfQoKICAgIC8qKgogICAgICogU2V0IHdoZXRoZXIgdGhpcyBpcyBhIE5PVCBO\nVUxMIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Tm90TnVs\nbChib29sZWFuIG5vdE51bGwpIHsKICAgICAgICBfbm90TnVsbCA9IChub3RO\ndWxsKSA/IEJvb2xlYW4uVFJVRSA6IEJvb2xlYW4uRkFMU0U7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoZSBub3QtbnVsbCBwcm9wZXJ0eSBo\nYXMgYmVlbiBzZXQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzTm90\nTnVsbEV4cGxpY2l0KCkgewogICAgICAgIHJldHVybiBfbm90TnVsbCAhPSBu\ndWxsOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGNvbHVt\nbiBpcyBhdXRvLWFzc2lnbmVkIGEgdmFsdWUgb24gaW5zZXJ0LgogICAgICov\nCiAgICBwdWJsaWMgYm9vbGVhbiBpc0F1dG9Bc3NpZ25lZCgpIHsKICAgICAg\nICByZXR1cm4gX2F1dG9Bc3NpZ247CiAgICB9CgogICAgLyoqCiAgICAgKiBX\naGV0aGVyIHRoaXMgY29sdW1uIGlzIGF1dG8taW5jcmVtZW50aW5nLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXRBdXRvQXNzaWduZWQoYm9vbGVhbiBh\ndXRvQXNzaWduKSB7CiAgICAgICAgaWYgKGF1dG9Bc3NpZ24gIT0gX2F1dG9B\nc3NpZ24gJiYgZ2V0VGFibGUoKSAhPSBudWxsKQogICAgICAgICAgICBnZXRU\nYWJsZSgpLmNoYW5nZUF1dG9Bc3NpZ25lZCh0aGlzKTsKICAgICAgICBfYXV0\nb0Fzc2lnbiA9IGF1dG9Bc3NpZ247CiAgICB9CgogICAgLyoqCiAgICAgKiBX\naGV0aGVyIHRoaXMgY29sdW1uIHN0b3JlcyBzb21lIGZvcm0gb2Ygc2VyaWFs\naXplZCBpZGVudGl0eSB2YWx1ZSBmb3IKICAgICAqIGEgcmVsYXRlZCByZWNv\ncmQuIFRoaXMgbWFrZXMgdGhlIGNvbHVtbiBkZXBlbmRlbnQgb24gdGhlIGtu\nb3dpbmcgdGhlCiAgICAgKiBmaW5hbCBpZGVudGl0eSBvZiB0aGUgcmVsYXRp\nb24gYmVmb3JlIHRoZSBjb2x1bW4gdmFsdWUgaXMgc2V0LgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBpc1JlbGF0aW9uSWQoKSB7CiAgICAgICAgcmV0\ndXJuIF9yZWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMg\nY29sdW1uIHN0b3JlcyBzb21lIGZvcm0gb2Ygc2VyaWFsaXplZCBpZGVudGl0\neSB2YWx1ZSBmb3IKICAgICAqIGEgcmVsYXRlZCByZWNvcmQuIFRoaXMgbWFr\nZXMgdGhlIGNvbHVtbiBkZXBlbmRlbnQgb24gdGhlIGtub3dpbmcgdGhlCiAg\nICAgKiBmaW5hbCBpZGVudGl0eSBvZiB0aGUgcmVsYXRpb24gYmVmb3JlIHRo\nZSBjb2x1bW4gdmFsdWUgaXMgc2V0LgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRSZWxhdGlvbklkKGJvb2xlYW4gcmVsKSB7CiAgICAgICAgaWYgKHJl\nbCAhPSBfcmVsICYmIGdldFRhYmxlKCkgIT0gbnVsbCkKICAgICAgICAgICAg\nZ2V0VGFibGUoKS5jaGFuZ2VSZWxhdGlvbklkKHRoaXMpOwogICAgICAgIF9y\nZWwgPSByZWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFtZSBvZiB0\naGUgY29sdW1uIHRoaXMgY29sdW1uIGpvaW5zIHRvLCBpZiBhbnkuIFVzZWQg\nZm9yIG1hcHBpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0VGFy\nZ2V0KCkgewogICAgICAgIHJldHVybiBfdGFyZ2V0OwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIG5hbWUgb2YgdGhlIGNvbHVtbiB0aGlzIGNvbHVtbiBq\nb2lucyB0bywgaWYgYW55LiBVc2VkIGZvciBtYXBwaW5nLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRUYXJnZXQoU3RyaW5nIHRhcmdldCkgewogICAg\nICAgIF90YXJnZXQgPSBTdHJpbmdVdGlscy50cmltVG9OdWxsKHRhcmdldCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZmllbGQg\ndGhpcyBjb2x1bW4gam9pbnMgdG8sIGlmIGFueS4gVXNlZCBmb3IgbWFwcGlu\nZy4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRUYXJnZXRGaWVsZCgp\nIHsKICAgICAgICByZXR1cm4gX3RhcmdldEZpZWxkOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIG5hbWUgb2YgdGhlIGZpZWxkIHRoaXMgY29sdW1uIGpv\naW5zIHRvLCBpZiBhbnkuIFVzZWQgZm9yIG1hcHBpbmcuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldFRhcmdldEZpZWxkKFN0cmluZyB0YXJnZXQpIHsK\nICAgICAgICBpZiAodGFyZ2V0ICE9IG51bGwgJiYgdGFyZ2V0Lmxlbmd0aCgp\nID09IDApCiAgICAgICAgICAgIHRhcmdldCA9IG51bGw7CiAgICAgICAgX3Rh\ncmdldEZpZWxkID0gdGFyZ2V0OwogICAgfQoKICAgIC8qKgogICAgICogRmxh\nZ3MgYXJlIHVzZWQgZm9yIGJvb2trZWVwaW5nIGluZm9ybWF0aW9uLiBUaGV5\nIGFyZSBpZ25vcmVkIGF0IHJ1bnRpbWUuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGdldEZsYWcoaW50IGZsYWcpIHsKICAgICAgICByZXR1cm4gKF9m\nbGFncyAmIGZsYWcpICE9IDA7CiAgICB9CgogICAgLyoqCiAgICAgKiBGbGFn\ncyBhcmUgdXNlZCBmb3IgYm9va2tlZXBpbmcgaW5mb3JtYXRpb24uIFRoZXkg\nYXJlIGlnbm9yZWQgYXQgcnVudGltZS4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0RmxhZyhpbnQgZmxhZywgYm9vbGVhbiBvbikgewogICAgICAgIGlm\nIChvbikKICAgICAgICAgICAgX2ZsYWdzIHw9IGZsYWc7CiAgICAgICAgZWxz\nZQogICAgICAgICAgICBfZmxhZ3MgJj0gfmZsYWc7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGlzIGNvbHVtbiBiZWxvbmdzIHRv\nIHRoZSB0YWJsZSdzIHByaW1hcnkga2V5LgogICAgICovCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc1ByaW1hcnlLZXkoKSB7CiAgICAgICAgcmV0dXJuIF9wazsK\nICAgIH0KCiAgICAvKioKICAgICAqIFNldCB3aGV0aGVyIHRoaXMgY29sdW1u\nIGJlbG9uZ3MgdG8gdGhlIHRhYmxlJ3MgcHJpbWFyeSBrZXkuCiAgICAgKi8K\nICAgIHZvaWQgc2V0UHJpbWFyeUtleShib29sZWFuIHBrKSB7CiAgICAgICAg\nX3BrID0gcGs7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNv\nbHVtbidzIDAtYmFzZWQgaW5kZXggaW4gdGhlIG93bmluZyB0YWJsZS4KICAg\nICAqLwogICAgcHVibGljIGludCBnZXRJbmRleCgpIHsKICAgICAgICBpZiAo\nZ2V0VGFibGUoKSAhPSBudWxsKQogICAgICAgICAgICBnZXRUYWJsZSgpLmlu\nZGV4Q29sdW1ucygpOwogICAgICAgIHJldHVybiBfaW5kZXg7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTZXQgdGhlIGNvbHVtbidzIDAtYmFzZWQgaW5kZXgg\naW4gdGhlIG93bmluZyB0YWJsZS4KICAgICAqLwogICAgdm9pZCBzZXRJbmRl\neChpbnQgaW5kZXgpIHsKICAgICAgICBfaW5kZXggPSBpbmRleDsKICAgIH0K\nCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gaXMgYSBMT0Iu\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzTG9iKCkgewogICAgICAg\nIHN3aXRjaCAoX3R5cGUpIHsKICAgICAgICAgICAgY2FzZSBUeXBlcy5CSU5B\nUlk6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuQkxPQjoKICAgICAgICAgICAg\nY2FzZSBUeXBlcy5MT05HVkFSQklOQVJZOgogICAgICAgICAgICBjYXNlIFR5\ncGVzLlZBUkJJTkFSWToKICAgICAgICAgICAgY2FzZSBUeXBlcy5DTE9COgog\nICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGRlZmF1\nbHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgdGhpcyBjb2x1\nbW4gaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBnaXZlbiBKREJDIHR5cGUKICAg\nICAqIGZyb20ge0BsaW5rIFR5cGVzfSBhbmQgc2l6ZS4KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gaXNDb21wYXRpYmxlKGludCB0eXBlLCBTdHJpbmcg\ndHlwZU5hbWUsIGludCBzaXplLCAKICAgICAgICBpbnQgZGVjaW1hbHMpIHsK\nICAgICAgICBpZiAodHlwZSA9PSBUeXBlcy5PVEhFUiB8fCBnZXRUeXBlKCkg\nPT0gVHlwZXMuT1RIRVIpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwoKICAg\nICAgICAvLyBub3RlIHRoYXQgdGhlIGdpdmVuIHNpemUgaXMgY3VycmVudGx5\nIGlnbm9yZWQsIGJ1dCBtYXkgYmUgdXNlZnVsCiAgICAgICAgLy8gdG8gZHlu\nYW1pY2FsbHktcG9wdWxhdGluZyBzdWJjbGFzc2VzCiAgICAgICAgc3dpdGNo\nIChnZXRUeXBlKCkpIHsKICAgICAgICAgICAgY2FzZSBUeXBlcy5CSVQ6CiAg\nICAgICAgICAgIGNhc2UgVHlwZXMuVElOWUlOVDoKICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5CSUdJTlQ6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuSU5URUdF\nUjoKICAgICAgICAgICAgY2FzZSBUeXBlcy5OVU1FUklDOgogICAgICAgICAg\nICBjYXNlIFR5cGVzLlNNQUxMSU5UOgogICAgICAgICAgICBjYXNlIFR5cGVz\nLkRFQ0lNQUw6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuRE9VQkxFOgogICAg\nICAgICAgICBjYXNlIFR5cGVzLkZMT0FUOgogICAgICAgICAgICBjYXNlIFR5\ncGVzLlJFQUw6CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAg\nICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkJJVDoKICAgICAgICAgICAg\nICAgICAgICBjYXNlIFR5cGVzLlRJTllJTlQ6CiAgICAgICAgICAgICAgICAg\nICAgY2FzZSBUeXBlcy5CSUdJTlQ6CiAgICAgICAgICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5JTlRFR0VSOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlw\nZXMuTlVNRVJJQzoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLlNN\nQUxMSU5UOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuREVDSU1B\nTDoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkRPVUJMRToKICAg\nICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkZMT0FUOgogICAgICAgICAg\nICAgICAgICAgIGNhc2UgVHlwZXMuUkVBTDoKICAgICAgICAgICAgICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVs\ndDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIFR5cGVzLkJJTkFSWToK\nICAgICAgICAgICAgY2FzZSBUeXBlcy5CTE9COgogICAgICAgICAgICBjYXNl\nIFR5cGVzLkxPTkdWQVJCSU5BUlk6CiAgICAgICAgICAgIGNhc2UgVHlwZXMu\nVkFSQklOQVJZOgogICAgICAgICAgICBjYXNlIFR5cGVzLk9USEVSOgogICAg\nICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgICAg\nICAgY2FzZSBUeXBlcy5CSU5BUlk6CiAgICAgICAgICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5CTE9COgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMu\nTE9OR1ZBUkJJTkFSWToKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVz\nLlZBUkJJTkFSWToKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLk9U\nSEVSOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgIGNhc2UgVHlwZXMuQ0xPQjoKICAgICAgICAgICAgY2FzZSBUeXBlcy5D\nSEFSOgogICAgICAgICAgICBjYXNlIFR5cGVzLkxPTkdWQVJDSEFSOgogICAg\nICAgICAgICBjYXNlIFR5cGVzLlZBUkNIQVI6CiAgICAgICAgICAgICAgICBz\nd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVz\nLkNMT0I6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5DSEFSOgog\nICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuTE9OR1ZBUkNIQVI6CiAg\nICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5WQVJDSEFSOgogICAgICAg\nICAgICAgICAgICAgIGNhc2UgVHlwZXMuREFURToKICAgICAgICAgICAgICAg\nICAgICBjYXNlIFR5cGVzLlRJTUU6CiAgICAgICAgICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5USU1FU1RBTVA6CiAgICAgICAgICAgICAgICAgICAgICAgIHJl\ndHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAg\nICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgY2FzZSBUeXBlcy5EQVRFOgogICAgICAgICAg\nICBjYXNlIFR5cGVzLlRJTUU6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuVElN\nRVNUQU1QOgogICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAg\nICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5MT05HVkFSQ0hBUjoKICAgICAg\nICAgICAgICAgICAgICBjYXNlIFR5cGVzLkNMT0I6CiAgICAgICAgICAgICAg\nICAgICAgY2FzZSBUeXBlcy5WQVJDSEFSOgogICAgICAgICAgICAgICAgICAg\nIGNhc2UgVHlwZXMuREFURToKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5\ncGVzLlRJTUU6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5USU1F\nU1RBTVA6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwog\nICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiB0eXBlID09\nIGdldFR5cGUoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm5zIHRoZSBjb2x1bW4gbmFtZS4KICAgICAqLwogICAgcHVibGljIFN0\ncmluZyB0b1N0cmluZygpIHsKICAgICAgICByZXR1cm4gZ2V0TmFtZSgpOwog\nICAgfQoKICAgIC8qKgogICAgICogVXNlZnVsIGZvciBkZWJ1Z2dpbmcuCiAg\nICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGVzY3JpcHRpb24oKSB7CiAg\nICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsK\nICAgICAgICBidWYuYXBwZW5kKCJGdWxsIE5hbWU6ICIpLmFwcGVuZChnZXRG\ndWxsTmFtZSgpKS5hcHBlbmQoIlxuIik7CiAgICAgICAgYnVmLmFwcGVuZCgi\nVHlwZTogIikuYXBwZW5kKFNjaGVtYXMuZ2V0SkRCQ05hbWUoZ2V0VHlwZSgp\nKSkuCiAgICAgICAgICAgIGFwcGVuZCgiXG4iKTsKICAgICAgICBidWYuYXBw\nZW5kKCJTaXplOiAiKS5hcHBlbmQoZ2V0U2l6ZSgpKS5hcHBlbmQoIlxuIik7\nCiAgICAgICAgYnVmLmFwcGVuZCgiRGVmYXVsdDogIikuYXBwZW5kKGdldERl\nZmF1bHRTdHJpbmcoKSkuYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1Zi5hcHBl\nbmQoIk5vdCBOdWxsOiAiKS5hcHBlbmQoaXNOb3ROdWxsKCkpLmFwcGVuZCgi\nXG4iKTsKICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBUZXN0cyBjb21wYXRpYmlsaXR5LgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBlcXVhbHNDb2x1bW4oQ29sdW1uIGNvbCkgewog\nICAgICAgIGlmIChjb2wgPT0gdGhpcykKICAgICAgICAgICAgcmV0dXJuIHRy\ndWU7CiAgICAgICAgaWYgKGNvbCA9PSBudWxsKQogICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CgogICAgICAgIGlmICghZ2V0RnVsbE5hbWUoKS5lcXVhbHNJ\nZ25vcmVDYXNlKGNvbC5nZXRGdWxsTmFtZSgpKSkKICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwogICAgICAgIGlmICghaXNDb21wYXRpYmxlKGNvbC5nZXRU\neXBlKCksIGNvbC5nZXRUeXBlTmFtZSgpLCBjb2wuZ2V0U2l6ZSgpLAogICAg\nICAgICAgICBjb2wuZ2V0RGVjaW1hbERpZ2l0cygpKSkKICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChnZXRUeXBlKCkgPT0gVHlwZXMu\nVkFSQ0hBUiAmJiBnZXRTaXplKCkgPiAwICYmIGNvbC5nZXRTaXplKCkgPiAw\nCiAgICAgICAgICAgICYmIGdldFNpemUoKSAhPSBjb2wuZ2V0U2l6ZSgpKQog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDb3B5IGluZm9ybWF0aW9uIGZyb20g\ndGhlIGdpdmVuIGNvbHVtbiB0byB0aGlzIG9uZS4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgY29weShDb2x1bW4gZnJvbSkgewogICAgICAgIGlmIChmcm9t\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAoZ2V0\nTmFtZSgpID09IG51bGwpCiAgICAgICAgICAgIHNldE5hbWUoZnJvbS5nZXRO\nYW1lKCkpOwogICAgICAgIGlmIChnZXRUeXBlKCkgPT0gVHlwZXMuT1RIRVIp\nCiAgICAgICAgICAgIHNldFR5cGUoZnJvbS5nZXRUeXBlKCkpOwogICAgICAg\nIGlmIChnZXRUeXBlTmFtZSgpID09IG51bGwpCiAgICAgICAgICAgIHNldFR5\ncGVOYW1lKGZyb20uZ2V0VHlwZU5hbWUoKSk7CiAgICAgICAgaWYgKGdldEph\ndmFUeXBlKCkgPT0gSmF2YVR5cGVzLk9CSkVDVCkKICAgICAgICAgICAgc2V0\nSmF2YVR5cGUoZnJvbS5nZXRKYXZhVHlwZSgpKTsKICAgICAgICBpZiAoZ2V0\nU2l6ZSgpID09IDApCiAgICAgICAgICAgIHNldFNpemUoZnJvbS5nZXRTaXpl\nKCkpOwogICAgICAgIGlmIChnZXREZWNpbWFsRGlnaXRzKCkgPT0gMCkKICAg\nICAgICAgICAgc2V0RGVjaW1hbERpZ2l0cyhmcm9tLmdldERlY2ltYWxEaWdp\ndHMoKSk7CiAgICAgICAgaWYgKGdldERlZmF1bHRTdHJpbmcoKSA9PSBudWxs\nKQogICAgICAgICAgICBzZXREZWZhdWx0U3RyaW5nKGZyb20uZ2V0RGVmYXVs\ndFN0cmluZygpKTsKICAgICAgICBpZiAoIWlzTm90TnVsbEV4cGxpY2l0KCkg\nJiYgZnJvbS5pc05vdE51bGxFeHBsaWNpdCgpKQogICAgICAgICAgICBzZXRO\nb3ROdWxsKGZyb20uaXNOb3ROdWxsKCkpOwogICAgICAgIGlmICghaXNBdXRv\nQXNzaWduZWQoKSkKICAgICAgICAgICAgc2V0QXV0b0Fzc2lnbmVkKGZyb20u\naXNBdXRvQXNzaWduZWQoKSk7CiAgICAgICAgaWYgKCFpc1JlbGF0aW9uSWQo\nKSkKICAgICAgICAgICAgc2V0UmVsYXRpb25JZChmcm9tLmlzUmVsYXRpb25J\nZCgpKTsKICAgICAgICBpZiAoZ2V0VGFyZ2V0KCkgPT0gbnVsbCkKICAgICAg\nICAgICAgc2V0VGFyZ2V0KGZyb20uZ2V0VGFyZ2V0KCkpOwogICAgICAgIGlm\nIChnZXRUYXJnZXRGaWVsZCgpID09IG51bGwpCiAgICAgICAgICAgIHNldFRh\ncmdldEZpZWxkKGZyb20uZ2V0VGFyZ2V0RmllbGQoKSk7CiAgICAgICAgaWYg\nKF9mbGFncyA9PSAwKQogICAgICAgICAgICBfZmxhZ3MgPSBmcm9tLl9mbGFn\nczsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgY29s\ndW1uIGlzIGFuIFhNTCB0eXBlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVh\nbiBpc1hNTCgpIHsKICAgICAgICByZXR1cm4gX3R5cGVOYW1lICE9IG51bGwg\nJiYgX3R5cGVOYW1lLnN0YXJ0c1dpdGgoIlhNTCIpOwogICAgfQoKICAgIHB1\nYmxpYyBWZXJzaW9uU3RyYXRlZ3kgZ2V0VmVyc2lvblN0cmF0ZWd5KCkgewog\nICAgICAgIHJldHVybiBfdmVyc2lvblN0cmF0ZWd5OwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldFZlcnNpb25TdHJhdGVneShWZXJzaW9uU3RyYXRlZ3kg\nc3RyYXRlZ3kpIHsKICAgICAgICB0aGlzLl92ZXJzaW9uU3RyYXRlZ3kgPSBz\ndHJhdGVneTsKICAgIH0KfQo=\n","encoding":"base64"}

