{"sha":"5762523ef11b25f4e742b7ed6137a9ab11a69175","node_id":"MDQ6QmxvYjIwNjM2NDo1NzYyNTIzZWYxMWIyNWY0ZTc0MmI3ZWQ2MTM3YTlhYjExYTY5MTc1","size":30546,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5762523ef11b25f4e742b7ed6137a9ab11a69175","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWw7DQoNCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7\nDQppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsNCmltcG9ydCBqYXZhLnNx\nbC5EYXRhYmFzZU1ldGFEYXRhOw0KaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2Vw\ndGlvbjsNCmltcG9ydCBqYXZhLnNxbC5UeXBlczsNCmltcG9ydCBqYXZhLnV0\naWwuQXJyYXlzOw0KaW1wb3J0IGphdmEudXRpbC5TdHJpbmdUb2tlbml6ZXI7\nDQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5MaXQ7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuUGFyYW07DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuVmFs\nOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1\nbW47DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLklu\nZGV4Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5T\nY2hlbWE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLlNlcXVlbmNlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5UYWJsZTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkZpbHRlcnM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5K\nYXZhVHlwZXM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3Bl\nbkpQQUV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsNCg0KaW1wb3J0IHNlcnAudXRpbC5T\ndHJpbmdzOw0KDQovKioNCiAqIERpY3Rpb25hcnkgZm9yIElCTSBEQjIgZGF0\nYWJhc2UuDQogKi8NCnB1YmxpYyBjbGFzcyBEQjJEaWN0aW9uYXJ5DQogICAg\nZXh0ZW5kcyBBYnN0cmFjdERCMkRpY3Rpb25hcnkgew0KICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBh\nY2thZ2UNCiAgICAgICAgKERCMkRpY3Rpb25hcnkuY2xhc3MpOw0KDQogICAg\ncHVibGljIFN0cmluZyBvcHRpbWl6ZUNsYXVzZSA9ICJvcHRpbWl6ZSBmb3Ii\nOw0KICAgIHB1YmxpYyBTdHJpbmcgcm93Q2xhdXNlID0gInJvdyI7DQogICAg\ncHJvdGVjdGVkIGludCBkYjJTZXJ2ZXJUeXBlID0gMDsNCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIGludCBkYjJJU2VyaWVzVjVSM09yRWFybGllciA9IDE7\nDQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgZGIyVURCVjgxT3JFYXJs\naWVyID0gMjsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBkYjJaT1NW\nOHhPckxhdGVyID0gMzsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBk\nYjJVREJWODJPckxhdGVyID0gNDsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBkYjJJU2VyaWVzVjVSNE9yTGF0ZXIgPSA1Ow0KCXByaXZhdGUgc3Rh\ndGljIGZpbmFsIFN0cmluZyBmb3JVcGRhdGUgPSAiRk9SIFVQREFURSI7DQog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIHdpdGhSU0NsYXVzZSA9\nICJXSVRIIFJTIjsNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nd2l0aFJSQ2xhdXNlID0gIldJVEggUlIiOw0KICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIFN0cmluZyB1c2VLZWVwVXBkYXRlTG9ja0NsYXVzZQ0KICAgICAg\nICA9ICJVU0UgQU5EIEtFRVAgVVBEQVRFIExPQ0tTIjsNCiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgdXNlS2VlcEV4Y2x1c2l2ZUxvY2tDbGF1\nc2UNCiAgICAgICAgPSAiVVNFIEFORCBLRUVQIEVYQ0xVU0lWRSBMT0NLUyI7\nDQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIGZvclJlYWRPbmx5\nQ2xhdXNlID0gIkZPUiBSRUFEIE9OTFkiOw0KICAgIHByb3RlY3RlZCBTdHJp\nbmcgZGF0YWJhc2VQcm9kdWN0TmFtZSA9IG51bGw7DQogICAgcHJvdGVjdGVk\nIFN0cmluZyBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uID0gbnVsbDsNCiAgICBw\ncm90ZWN0ZWQgaW50IG1haiA9IDA7DQogICAgcHJvdGVjdGVkIGludCBtaW4g\nPSAwOw0KDQogICAgcHVibGljIERCMkRpY3Rpb25hcnkoKSB7DQogICAgICAg\nIHBsYXRmb3JtID0gIkRCMiI7DQogICAgICAgIHZhbGlkYXRpb25TUUwgPSAi\nU0VMRUNUIERJU1RJTkNUKENVUlJFTlQgVElNRVNUQU1QKSBGUk9NICINCiAg\nICAgICAgICAgICsgIlNZU0lCTS5TWVNUQUJMRVMiOw0KICAgICAgICBzdXBw\nb3J0c1NlbGVjdEVuZEluZGV4ID0gdHJ1ZTsNCg0KICAgICAgICBuZXh0U2Vx\ndWVuY2VRdWVyeSA9ICJWQUxVRVMgTkVYVFZBTCBGT1IgezB9IjsNCg0KICAg\nICAgICBzZXF1ZW5jZVNRTCA9ICJTRUxFQ1QgU0VRU0NIRU1BIEFTIFNFUVVF\nTkNFX1NDSEVNQSwgIg0KICAgICAgICAgICAgKyAiU0VRTkFNRSBBUyBTRVFV\nRU5DRV9OQU1FIEZST00gU1lTQ0FULlNFUVVFTkNFUyI7DQogICAgICAgIHNl\ncXVlbmNlU2NoZW1hU1FMID0gIlNFUVNDSEVNQSA9ID8iOw0KICAgICAgICBz\nZXF1ZW5jZU5hbWVTUUwgPSAiU0VRTkFNRSA9ID8iOw0KICAgICAgICBjaGFy\nYWN0ZXJDb2x1bW5TaXplID0gMjU0Ow0KDQogICAgICAgIGJpbmFyeVR5cGVO\nYW1lID0gIkJMT0IoMU0pIjsNCiAgICAgICAgbG9uZ1ZhcmJpbmFyeVR5cGVO\nYW1lID0gIkJMT0IoMU0pIjsNCiAgICAgICAgdmFyYmluYXJ5VHlwZU5hbWUg\nPSAiQkxPQigxTSkiOw0KICAgICAgICBjbG9iVHlwZU5hbWUgPSAiQ0xPQigx\nTSkiOw0KICAgICAgICBsb25nVmFyY2hhclR5cGVOYW1lID0gIkxPTkcgVkFS\nQ0hBUiI7DQogICAgICAgIGRhdGVQcmVjaXNpb24gPSBNSUNSTzsNCiAgICAg\nICAgc3RvcmVDaGFyc0FzTnVtYmVycyA9IGZhbHNlOw0KDQogICAgICAgIGZp\neGVkU2l6ZVR5cGVOYW1lU2V0LmFkZEFsbChBcnJheXMuYXNMaXN0KG5ldyBT\ndHJpbmdbXXsNCiAgICAgICAgICAgICJMT05HIFZBUkNIQVIgRk9SIEJJVCBE\nQVRBIiwgIkxPTkcgVkFSQ0hBUiIsICJMT05HIFZBUkdSQVBISUMiLA0KICAg\nICAgICB9KSk7DQogICAgICAgIHN5c3RlbVNjaGVtYXMgPSBuZXcgU3RyaW5n\nKA0KICAgICAgICAgICAgICAgICJTWVNDQVQsU1lTSUJNLFNZU1NUQVQsU1lT\nSUJNQURNLFNZU1RPT0xTIik7DQogICAgICAgIG1heENvbnN0cmFpbnROYW1l\nTGVuZ3RoID0gMTg7DQogICAgICAgIG1heEluZGV4TmFtZUxlbmd0aCA9IDE4\nOw0KICAgICAgICBtYXhDb2x1bW5OYW1lTGVuZ3RoID0gMzA7DQogICAgICAg\nIHN1cHBvcnRzRGVmZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOw0KICAgICAg\nICBzdXBwb3J0c0RlZmF1bHREZWxldGVBY3Rpb24gPSBmYWxzZTsNCiAgICAg\nICAgc3VwcG9ydHNBbHRlclRhYmxlV2l0aERyb3BDb2x1bW4gPSBmYWxzZTsN\nCg0KICAgICAgICBzdXBwb3J0c051bGxUYWJsZUZvckdldENvbHVtbnMgPSBm\nYWxzZTsNCiAgICAgICAgcmVxdWlyZXNDYXN0Rm9yTWF0aEZ1bmN0aW9ucyA9\nIHRydWU7DQogICAgICAgIHJlcXVpcmVzQ2FzdEZvckNvbXBhcmlzb25zID0g\ndHJ1ZTsNCg0KICAgICAgICByZXNlcnZlZFdvcmRTZXQuYWRkQWxsKEFycmF5\ncy5hc0xpc3QobmV3IFN0cmluZ1tdew0KICAgICAgICAgICAgIkFGVEVSIiwg\nIkFMSUFTIiwgIkFMTE9XIiwgIkFQUExJQ0FUSU9OIiwgIkFTU09DSUFURSIs\nICJBU1VUSU1FIiwNCiAgICAgICAgICAgICJBVURJVCIsICJBVVgiLCAiQVVY\nSUxJQVJZIiwgIkJFRk9SRSIsICJCSU5BUlkiLCAiQlVGRkVSUE9PTCIsDQog\nICAgICAgICAgICAiQ0FDSEUiLCAiQ0FMTCIsICJDQUxMRUQiLCAiQ0FQVFVS\nRSIsICJDQVJESU5BTElUWSIsICJDQ1NJRCIsDQogICAgICAgICAgICAiQ0xV\nU1RFUiIsICJDT0xMRUNUSU9OIiwgIkNPTExJRCIsICJDT01NRU5UIiwgIkNP\nTkNBVCIsDQogICAgICAgICAgICAiQ09ORElUSU9OIiwgIkNPTlRBSU5TIiwg\nIkNPVU5UX0JJRyIsICJDVVJSRU5UX0xDX0NUWVBFIiwNCiAgICAgICAgICAg\nICJDVVJSRU5UX1BBVEgiLCAiQ1VSUkVOVF9TRVJWRVIiLCAiQ1VSUkVOVF9U\nSU1FWk9ORSIsICJDWUNMRSIsDQogICAgICAgICAgICAiREFUQSIsICJEQVRB\nQkFTRSIsICJEQVlTIiwgIkRCMkdFTkVSQUwiLCAiREIyR0VOUkwiLCAiREIy\nU1FMIiwNCiAgICAgICAgICAgICJEQklORk8iLCAiREVGQVVMVFMiLCAiREVG\nSU5JVElPTiIsICJERVRFUk1JTklTVElDIiwgIkRJU0FMTE9XIiwNCiAgICAg\nICAgICAgICJETyIsICJEU05IQVRUUiIsICJEU1NJWkUiLCAiRFlOQU1JQyIs\nICJFQUNIIiwgIkVESVRQUk9DIiwgIkVMU0VJRiIsDQogICAgICAgICAgICAi\nRU5DT0RJTkciLCAiRU5ELUVYRUMxIiwgIkVSQVNFIiwgIkVYQ0xVRElORyIs\nICJFWElUIiwgIkZFTkNFRCIsDQogICAgICAgICAgICAiRklFTERQUk9DIiwg\nIkZJTEUiLCAiRklOQUwiLCAiRlJFRSIsICJGVU5DVElPTiIsICJHRU5FUkFM\nIiwNCiAgICAgICAgICAgICJHRU5FUkFURUQiLCAiR1JBUEhJQyIsICJIQU5E\nTEVSIiwgIkhPTEQiLCAiSE9VUlMiLCAiSUYiLA0KICAgICAgICAgICAgIklO\nQ0xVRElORyIsICJJTkNSRU1FTlQiLCAiSU5ERVgiLCAiSU5IRVJJVCIsICJJ\nTk9VVCIsICJJTlRFR1JJVFkiLA0KICAgICAgICAgICAgIklTT0JJRCIsICJJ\nVEVSQVRFIiwgIkpBUiIsICJKQVZBIiwgIkxBQkVMIiwgIkxDX0NUWVBFIiwg\nIkxFQVZFIiwNCiAgICAgICAgICAgICJMSU5LVFlQRSIsICJMT0NBTEUiLCAi\nTE9DQVRPUiIsICJMT0NBVE9SUyIsICJMT0NLIiwgIkxPQ0tNQVgiLA0KICAg\nICAgICAgICAgIkxPQ0tTSVpFIiwgIkxPTkciLCAiTE9PUCIsICJNQVhWQUxV\nRSIsICJNSUNST1NFQ09ORCIsDQogICAgICAgICAgICAiTUlDUk9TRUNPTkRT\nIiwgIk1JTlVURVMiLCAiTUlOVkFMVUUiLCAiTU9ERSIsICJNT0RJRklFUyIs\nICJNT05USFMiLA0KICAgICAgICAgICAgIk5FVyIsICJORVdfVEFCTEUiLCAi\nTk9DQUNIRSIsICJOT0NZQ0xFIiwgIk5PREVOQU1FIiwgIk5PREVOVU1CRVIi\nLA0KICAgICAgICAgICAgIk5PTUFYVkFMVUUiLCAiTk9NSU5WQUxVRSIsICJO\nT09SREVSIiwgIk5VTExTIiwgIk5VTVBBUlRTIiwgIk9CSUQiLA0KICAgICAg\nICAgICAgIk9MRCIsICJPTERfVEFCTEUiLCAiT1BUSU1JWkFUSU9OIiwgIk9Q\nVElNSVpFIiwgIk9VVCIsICJPVkVSUklESU5HIiwNCiAgICAgICAgICAgICJQ\nQUNLQUdFIiwgIlBBUkFNRVRFUiIsICJQQVJUIiwgIlBBUlRJVElPTiIsICJQ\nQVRIIiwgIlBJRUNFU0laRSIsDQogICAgICAgICAgICAiUExBTiIsICJQUklR\nVFkiLCAiUFJPR1JBTSIsICJQU0lEIiwgIlFVRVJZTk8iLCAiUkVBRFMiLCAi\nUkVDT1ZFUlkiLA0KICAgICAgICAgICAgIlJFRkVSRU5DSU5HIiwgIlJFTEVB\nU0UiLCAiUkVOQU1FIiwgIlJFUEVBVCIsICJSRVNFVCIsICJSRVNJR05BTCIs\nDQogICAgICAgICAgICAiUkVTVEFSVCIsICJSRVNVTFQiLCAiUkVTVUxUX1NF\nVF9MT0NBVE9SIiwgIlJFVFVSTiIsICJSRVRVUk5TIiwNCiAgICAgICAgICAg\nICJST1VUSU5FIiwgIlJPVyIsICJSUk4iLCAiUlVOIiwgIlNBVkVQT0lOVCIs\nICJTQ1JBVENIUEFEIiwNCiAgICAgICAgICAgICJTRUNPTkRTIiwgIlNFQ1FU\nWSIsICJTRUNVUklUWSIsICJTRU5TSVRJVkUiLCAiU0lHTkFMIiwgIlNJTVBM\nRSIsDQogICAgICAgICAgICAiU09VUkNFIiwgIlNQRUNJRklDIiwgIlNRTElE\nIiwgIlNUQU5EQVJEIiwgIlNUQVJUIiwgIlNUQVRJQyIsDQogICAgICAgICAg\nICAiU1RBWSIsICJTVE9HUk9VUCIsICJTVE9SRVMiLCAiU1RZTEUiLCAiU1VC\nUEFHRVMiLCAiU1lOT05ZTSIsDQogICAgICAgICAgICAiU1lTRlVOIiwgIlNZ\nU0lCTSIsICJTWVNQUk9DIiwgIlNZU1RFTSIsICJUQUJMRVNQQUNFIiwgIlRS\nSUdHRVIiLA0KICAgICAgICAgICAgIlRZUEUiLCAiVU5ETyIsICJVTlRJTCIs\nICJWQUxJRFBST0MiLCAiVkFSSUFCTEUiLCAiVkFSSUFOVCIsICJWQ0FUIiwN\nCiAgICAgICAgICAgICJWT0xVTUVTIiwgIldISUxFIiwgIldMTSIsICJZRUFS\nUyIsDQogICAgICAgIH0pKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVh\nbiBzdXBwb3J0c1JhbmRvbUFjY2Vzc1Jlc3VsdFNldChTZWxlY3Qgc2VsLA0K\nICAgICAgICBib29sZWFuIGZvclVwZGF0ZSkgew0KICAgICAgICByZXR1cm4g\nIWZvclVwZGF0ZQ0KICAgICAgICAgICAgJiYgc3VwZXIuc3VwcG9ydHNSYW5k\nb21BY2Nlc3NSZXN1bHRTZXQoc2VsLCBmb3JVcGRhdGUpOw0KICAgIH0NCg0K\nICAgIHByb3RlY3RlZCB2b2lkIGFwcGVuZFNlbGVjdFJhbmdlKFNRTEJ1ZmZl\nciBidWYsIGxvbmcgc3RhcnQsIGxvbmcgZW5kLA0KICAgICAgICBib29sZWFu\nIHN1YnNlbGVjdCkgew0KICAgICAgICAvLyBhcHBlbmRzIHRoZSBsaXRlcmFs\nIHJhbmdlIHN0cmluZywgc2luY2UgREIyIGlzIHVuYWJsZSB0byBoYW5kbGUN\nCiAgICAgICAgLy8gYSBib3VuZCBwYXJhbWV0ZXIgZm9yIGl0DQogICAgICAg\nIC8vIGRvIG5vdCBnZW5lcmF0ZSBGRVRDSCBGSVJTVCBjbGF1c2UgZm9yIHN1\nYnNlbGVjdA0KICAgICAgICBpZiAoIXN1YnNlbGVjdCkNCiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoIiBGRVRDSCBGSVJTVCAiKS5hcHBlbmQoTG9uZy50b1N0\ncmluZyhlbmQpKS4NCiAgICAgICAgICAgICAgICBhcHBlbmQoIiBST1dTIE9O\nTFkiKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0Q3JlYXRl\nU2VxdWVuY2VTUUwoU2VxdWVuY2Ugc2VxKSB7DQogICAgICAgIFN0cmluZ1td\nIHNxbCA9IHN1cGVyLmdldENyZWF0ZVNlcXVlbmNlU1FMKHNlcSk7DQogICAg\nICAgIGlmIChzZXEuZ2V0QWxsb2NhdGUoKSA+IDEpDQogICAgICAgICAgICBz\ncWxbMF0gKz0gIiBDQUNIRSAiICsgc2VxLmdldEFsbG9jYXRlKCk7DQogICAg\nICAgIHJldHVybiBzcWw7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIFN0cmlu\nZyBnZXRTZXF1ZW5jZXNTUUwoU3RyaW5nIHNjaGVtYU5hbWUsIFN0cmluZyBz\nZXF1ZW5jZU5hbWUpIHsNCiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5l\ndyBTdHJpbmdCdWZmZXIoKTsNCiAgICAgICAgYnVmLmFwcGVuZChzZXF1ZW5j\nZVNRTCk7DQogICAgICAgIGlmIChzY2hlbWFOYW1lICE9IG51bGwgfHwgc2Vx\ndWVuY2VOYW1lICE9IG51bGwpDQogICAgICAgICAgICBidWYuYXBwZW5kKCIg\nV0hFUkUgIik7DQogICAgICAgIGlmIChzY2hlbWFOYW1lICE9IG51bGwpIHsN\nCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoc2VxdWVuY2VTY2hlbWFTUUwpOw0K\nICAgICAgICAgICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBudWxsKQ0KICAgICAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBBTkQgIik7DQogICAgICAgIH0NCiAg\nICAgICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBudWxsKQ0KICAgICAgICAgICAg\nYnVmLmFwcGVuZChzZXF1ZW5jZU5hbWVTUUwpOw0KICAgICAgICByZXR1cm4g\nYnVmLnRvU3RyaW5nKCk7DQogICAgfQ0KDQogICAgcHVibGljIENvbm5lY3Rp\nb24gZGVjb3JhdGUoQ29ubmVjdGlvbiBjb25uKQ0KICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsNCiAgICAgICAgLy8gc29tZSB2ZXJzaW9ucyBvZiB0\naGUgREIyIGRyaXZlciBzZWVtIHRvIGRlZmF1bHQgdG8NCiAgICAgICAgLy8g\nUkVBRF9VTkNPTU1JVFRFRCwgd2hpY2ggd2lsbCBwcmV2ZW50IGxvY2tpbmcg\nZnJvbSB3b3JraW5nDQogICAgICAgIC8vIChtdWx0aXBsZSBTRUxFQ1QgLi4u\nIEZPUiBVUERBVEUgc3RhdGVtZW50cyBhcmUgYWxsb3dlZCBvbg0KICAgICAg\nICAvLyB0aGUgc2FtZSBpbnN0YW5jZSk7IGlmIHdlIGhhdmUgbm90IG92ZXJy\naWRkZW4gdGhlDQogICAgICAgIC8vIHRyYW5zYWN0aW9uIGlzb2xhdGlvbiBp\nbiB0aGUgY29uZmlndXJhdGlvbiwgZGVmYXVsdCB0bw0KICAgICAgICAvLyBU\nUkFOU0FDVElPTl9SRUFEX0NPTU1JVFRFRA0KICAgICAgICBjb25uID0gc3Vw\nZXIuZGVjb3JhdGUoY29ubik7DQoNCiAgICAgICAgaWYgKGNvbmYuZ2V0VHJh\nbnNhY3Rpb25Jc29sYXRpb25Db25zdGFudCgpID09IC0xDQogICAgICAgICAg\nICAmJiBjb25uLmdldFRyYW5zYWN0aW9uSXNvbGF0aW9uKCkgPCBjb25uLlRS\nQU5TQUNUSU9OX1JFQURfQ09NTUlUVEVEKQ0KICAgICAgICAgICAgY29ubi5z\nZXRUcmFuc2FjdGlvbklzb2xhdGlvbihjb25uLlRSQU5TQUNUSU9OX1JFQURf\nQ09NTUlUVEVEKTsNCg0KICAgICAgICByZXR1cm4gY29ubjsNCiAgICB9DQoN\nCiAgICBwcml2YXRlIGJvb2xlYW4gaXNKREJDMyhEYXRhYmFzZU1ldGFEYXRh\nIG1ldGEpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIC8vIEpEQkMz\nLW9ubHkgbWV0aG9kLCBzbyBpdCBtaWdodCB0aHJvdyBhIEFic3RyYWN0TWV0\naG9kRXJyb3INCiAgICAgICAgICAgIHJldHVybiBtZXRhLmdldEpEQkNNYWpv\nclZlcnNpb24oKSA+PSAzOw0KICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUg\ndCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgY29ubmVjdGVkQ29uZmlndXJhdGlv\nbihDb25uZWN0aW9uIGNvbm4pIHRocm93cyBTUUxFeGNlcHRpb24gew0KICAg\nIAlzdXBlci5jb25uZWN0ZWRDb25maWd1cmF0aW9uKGNvbm4pOw0KDQogICAg\nCURhdGFiYXNlTWV0YURhdGEgbWV0YURhdGEgPSBjb25uLmdldE1ldGFEYXRh\nKCk7DQogICAgICAgIGRhdGFiYXNlUHJvZHVjdE5hbWUgPSBtZXRhRGF0YS5n\nZXREYXRhYmFzZVByb2R1Y3ROYW1lKCk7DQogICAgICAgIGRhdGFiYXNlUHJv\nZHVjdFZlcnNpb24gPSBtZXRhRGF0YS5nZXREYXRhYmFzZVByb2R1Y3RWZXJz\naW9uKCk7DQogICAgICAgIA0KICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHR5\ncGUgb2YgREIyIGRhdGFiYXNlDQogICAgICAgIC8vIEZpcnN0IGNoZWNrIGZv\nciBBUy80MDANCiAgICAgICAgZ2V0UHJvZHVjdFZlcnNpb25NYWpvck1pbm9y\nRm9ySVNlcmllcygpOw0KDQogICAgICAgIGlmIChtYWogPiAwKSB7DQogICAg\nICAgICAgICBpZiAoaXNEQjJJU2VyaWVzVjVSM09yRWFybGllcigpKQ0KICAg\nICAgICAgICAgICAgIGRiMlNlcnZlclR5cGUgPSBkYjJJU2VyaWVzVjVSM09y\nRWFybGllcjsNCiAgICAgICAgICAgIGVsc2UgaWYgKGlzREIySVNlcmllc1Y1\nUjRPckxhdGVyKCkpDQogICAgICAgICAgICAgICAgZGIyU2VydmVyVHlwZSA9\nIGRiMklTZXJpZXNWNVI0T3JMYXRlcjsNCiAgICAgICAgfQ0KICAgICAgICAN\nCiAgICAJaWYgKGRiMlNlcnZlclR5cGUgPT0gMCkgew0KICAgIAkgICAgaWYg\nKGlzSkRCQzMobWV0YURhdGEpKSB7DQogICAgCSAgICAgICAgbWFqID0gbWV0\nYURhdGEuZ2V0RGF0YWJhc2VNYWpvclZlcnNpb24oKTsNCiAgICAJICAgICAg\nICBtaW4gPSBtZXRhRGF0YS5nZXREYXRhYmFzZU1pbm9yVmVyc2lvbigpOw0K\nICAgIAkgICAgfQ0KICAgIAkgICAgZWxzZQ0KICAgIAkgICAgICAgIGdldFBy\nb2R1Y3RWZXJzaW9uTWFqb3JNaW5vcigpOw0KDQogICAgCSAgICAvLyBEZXRl\ncm1pbmUgdGhlIHR5cGUgb2YgREIyIGRhdGFiYXNlIGZvciBaT1MgJiBVREIN\nCiAgICAJICAgIGlmIChpc0RCMlVEQlY4MU9yRWFybGllcigpKQ0KICAgIAkg\nICAgICAgIGRiMlNlcnZlclR5cGUgPSBkYjJVREJWODFPckVhcmxpZXI7DQog\nICAgCSAgICBlbHNlIGlmIChpc0RCMlpPU1Y4eE9yTGF0ZXIoKSkNCiAgICAJ\nICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIyWk9TVjh4T3JMYXRlcjsNCiAg\nICAJICAgIGVsc2UgaWYgKGlzREIyVURCVjgyT3JMYXRlcigpKQ0KICAgIAkg\nICAgICAgIGRiMlNlcnZlclR5cGUgPSBkYjJVREJWODJPckxhdGVyOw0KICAg\nICAgICB9DQoNCiAgICAgICAgLy8gdmVyaWZ5IHRoYXQgZGF0YWJhZSBwcm9k\ndWN0IGlzIHN1cHBvcnRlZA0KICAgICAgICBpZiAoZGIyU2VydmVyVHlwZSA9\nPSAwIHx8IG1haiA9PSAwKQ0KICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vw\ncG9ydGVkRXhjZXB0aW9uKF9sb2MuZ2V0KCJkYi1ub3Qtc3VwcG9ydGVkIiwN\nCiAgICAgICAgICAgICAgICBuZXcgT2JqZWN0W10ge2RhdGFiYXNlUHJvZHVj\ndE5hbWUsIGRhdGFiYXNlUHJvZHVjdFZlcnNpb24gfSkpOyAgICAgICAgICAg\nICAgICAgICAgDQoNCiAgICAJaWYgKG1haiA+PSA5IHx8IChtYWogPT0gOCAm\nJiBtaW4gPj0gMikpIHsNCiAgICAJICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhN\ndWx0aXBsZVRhYmxlcyA9IHRydWU7DQogICAgCSAgICBzdXBwb3J0c0xvY2tp\nbmdXaXRoSW5uZXJKb2luID0gdHJ1ZTsNCiAgICAJICAgIHN1cHBvcnRzTG9j\na2luZ1dpdGhPdXRlckpvaW4gPSB0cnVlOw0KICAgIAkgICAgZm9yVXBkYXRl\nQ2xhdXNlID0gIldJVEggUlIgVVNFIEFORCBLRUVQIFVQREFURSBMT0NLUyI7\nDQogICAgCSAgICBpZiAobWFqID49OSkNCiAgICAJICAgICAgICBzdXBwb3J0\nc1hNTENvbHVtbiA9IHRydWU7DQogICAgCX0NCg0KICAgICAgICAvLyBwbGF0\nZm9ybSBzcGVjaWZpYyBzZXR0aW5ncw0KICAgICAgICBzd2l0Y2ggKGRiMlNl\ncnZlclR5cGUpIHsNCiAgICAgICAgY2FzZSAgZGIyWk9TVjh4T3JMYXRlcjoN\nCiAgICAgICAgICAgIC8vIERCMiBaL09TIA0KICAgICAgICAgICAgY2hhcmFj\ndGVyQ29sdW1uU2l6ZSA9IDI1NTsNCiAgICAgICAgICAgIGxhc3RHZW5lcmF0\nZWRLZXlRdWVyeSA9ICJTRUxFQ1QgSURFTlRJVFlfVkFMX0xPQ0FMKCkgRlJP\nTSAiDQogICAgICAgICAgICAgICAgKyAiU1lTSUJNLlNZU0RVTU1ZMSI7DQog\nICAgICAgICAgICBuZXh0U2VxdWVuY2VRdWVyeSA9ICJTRUxFQ1QgTkVYVFZB\nTCBGT1IgezB9IEZST00gIg0KICAgICAgICAgICAgICAgICsgIlNZU0lCTS5T\nWVNEVU1NWTEiOw0KICAgICAgICAgICAgc2VxdWVuY2VTUUwgPSAiU0VMRUNU\nIFNDSEVNQSBBUyBTRVFVRU5DRV9TQ0hFTUEsICINCiAgICAgICAgICAgICAg\nICArICJOQU1FIEFTIFNFUVVFTkNFX05BTUUgRlJPTSBTWVNJQk0uU1lTU0VR\nVUVOQ0VTIjsNCiAgICAgICAgICAgIHNlcXVlbmNlU2NoZW1hU1FMID0gIlND\nSEVNQSA9ID8iOw0KICAgICAgICAgICAgc2VxdWVuY2VOYW1lU1FMID0gIk5B\nTUUgPSA/IjsNCiAgICAgICAgICAgIGlmIChtYWogPT0gOCkNCiAgICAgICAg\nICAgICAgICAvLyBEQjIgWi9PUyBWZXJzaW9uIDg6IG5vIGJpZ2ludCBzdXBw\nb3J0LCBoZW5jZSBtYXAgSmF2YQ0KICAgICAgICAgICAgICAgIC8vIGxvbmcg\ndG8gZGVjaW1hbA0KICAgICAgICAgICAgICAgIGJpZ2ludFR5cGVOYW1lID0g\nIkRFQ0lNQUwoMzEsMCkiOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAg\nIGNhc2UgZGIySVNlcmllc1Y1UjNPckVhcmxpZXI6DQogICAgICAgIGNhc2Ug\nZGIySVNlcmllc1Y1UjRPckxhdGVyOg0KICAgICAgICAgICAgdmFsaWRhdGlv\nblNRTCA9ICJTRUxFQ1QgRElTVElOQ1QoQ1VSUkVOVCBUSU1FU1RBTVApIEZS\nT00gIg0KICAgICAgICAgICAgICAgICsgIlFTWVMyLlNZU1RBQkxFUyI7DQog\nICAgICAgICAgICBzZXF1ZW5jZVNRTCA9ICJTRUxFQ1QgU0VRVUVOQ0VfU0NI\nRU1BLCAiDQogICAgICAgICAgICAgICAgKyAiU0VRVUVOQ0VfTkFNRSBGUk9N\nIFFTWVMyLlNZU1NFUVVFTkNFUyI7DQogICAgICAgICAgICBzZXF1ZW5jZVNj\naGVtYVNRTCA9ICJTRVFVRU5DRV9TQ0hFTUEgPSA/IjsNCiAgICAgICAgICAg\nIHNlcXVlbmNlTmFtZVNRTCA9ICJTRVFVRU5DRV9OQU1FID0gPyI7DQogICAg\nICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0K\nICAgICAqIEdldCB0aGUgdXBkYXRlIGNsYXVzZSBmb3IgdGhlIHF1ZXJ5IGJh\nc2VkIG9uIHRoZQ0KICAgICAqIHVwZGF0ZUNsYXVzZSBhbmQgaXNvbGF0aW9u\nTGV2ZWwgaGludHMNCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdl\ndEZvclVwZGF0ZUNsYXVzZShKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNo\nLA0KICAgICAgICBib29sZWFuIGlzRm9yVXBkYXRlLCBTZWxlY3Qgc2VsKSB7\nDQogICAgICAgIGludCBpc29sYXRpb25MZXZlbDsNCiAgICAgICAgLy8gRm9y\nIGRiMlVEQlY4MU9yRWFybGllciBhbmQgZGIySVNlcmllc1Y1UjNPckVhcmxp\nZXI6DQogICAgICAgIC8vICJvcHRpbWl6ZSBmb3IiIGNsYXVzZSBhcHBlYXJz\nIGJlZm9yZSAiZm9yIHVwZGF0ZSIgY2xhdXNlLg0KICAgICAgICBTdHJpbmdC\ndWZmZXIgZm9yVXBkYXRlU3RyaW5nID0gbmV3IFN0cmluZ0J1ZmZlcigNCiAg\nICAgICAgICAgIGdldE9wdGltaXplQ2xhdXNlKHNlbCkpOw0KICAgICAgICB0\ncnkgew0KICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpc29sYXRpb25M\nZXZlbDsgdGhlIGZldGNoDQogICAgICAgICAgICAvLyBjb25maWd1cmF0aW9u\nIGRhdGEgb3ZlcnJpZGVzIHRoZSBwZXJzaXN0ZW5jZS54bWwgdmFsdWUNCiAg\nICAgICAgICAgIGlmIChmZXRjaCAhPSBudWxsICYmIGZldGNoLmdldElzb2xh\ndGlvbigpICE9IC0xKQ0KICAgICAgICAgICAgICAgIGlzb2xhdGlvbkxldmVs\nID0gZmV0Y2guZ2V0SXNvbGF0aW9uKCk7DQogICAgICAgICAgICBlbHNlDQog\nICAgICAgICAgICAgICAgaXNvbGF0aW9uTGV2ZWwgPSBjb25mLmdldFRyYW5z\nYWN0aW9uSXNvbGF0aW9uQ29uc3RhbnQoKTsNCg0KICAgICAgICAgICAgaWYg\nKGlzRm9yVXBkYXRlKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoKGRiMlNl\ncnZlclR5cGUpIHsNCiAgICAgICAgICAgICAgICBjYXNlIGRiMklTZXJpZXNW\nNVIzT3JFYXJsaWVyOg0KICAgICAgICAgICAgICAgIGNhc2UgZGIyVURCVjgx\nT3JFYXJsaWVyOg0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNvbGF0aW9u\nTGV2ZWwgPT0gQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9TRVJJQUxJWkFCTEUp\nDQogICAgICAgICAgICAgICAgICAgICAgICBmb3JVcGRhdGVTdHJpbmcuYXBw\nZW5kKCIgIikuYXBwZW5kKGZvclVwZGF0ZUNsYXVzZSk7DQogICAgICAgICAg\nICAgICAgICAgIGVsc2UgDQogICAgICAgICAgICAgICAgICAgICAgICBmb3JV\ncGRhdGVTdHJpbmcuYXBwZW5kKCIgIikuYXBwZW5kKGZvclVwZGF0ZSkNCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5k\nKHdpdGhSU0NsYXVzZSk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0K\nICAgICAgICAgICAgICAgIGNhc2UgZGIyWk9TVjh4T3JMYXRlcjoNCiAgICAg\nICAgICAgICAgICBjYXNlIGRiMlVEQlY4Mk9yTGF0ZXI6DQogICAgICAgICAg\nICAgICAgICAgIGlmIChpc29sYXRpb25MZXZlbCA9PSBDb25uZWN0aW9uLlRS\nQU5TQUNUSU9OX1NFUklBTElaQUJMRSkgew0KICAgICAgICAgICAgICAgICAg\nICAgICAgZm9yVXBkYXRlU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JS\nZWFkT25seUNsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAu\nYXBwZW5kKCIgIikuYXBwZW5kKHdpdGhSUkNsYXVzZSkNCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtlZXBV\ncGRhdGVMb2NrQ2xhdXNlKTsgICANCiAgICAgICAgICAgICAgICAgICAgfSBl\nbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmlu\nZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yUmVhZE9ubHlDbGF1c2UpDQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh3\naXRoUlNDbGF1c2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFw\ncGVuZCgiICIpLmFwcGVuZCh1c2VLZWVwVXBkYXRlTG9ja0NsYXVzZSk7ICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAg\nICB9DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAg\nICAgIGNhc2UgZGIySVNlcmllc1Y1UjRPckxhdGVyOg0KICAgICAgICAgICAg\nICAgICAgICBpZiAoaXNvbGF0aW9uTGV2ZWwgPT0gQ29ubmVjdGlvbi5UUkFO\nU0FDVElPTl9TRVJJQUxJWkFCTEUpIHsNCiAgICAgICAgICAgICAgICAgICAg\nICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yUmVh\nZE9ubHlDbGF1c2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFw\ncGVuZCgiICIpLmFwcGVuZCh3aXRoUlJDbGF1c2UpDQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh1c2VLZWVwRXhj\nbHVzaXZlTG9ja0NsYXVzZSk7ICAgICAgIA0KICAgICAgICAgICAgICAgICAg\nICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yVXBkYXRl\nU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JSZWFkT25seUNsYXVzZSkN\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBw\nZW5kKHdpdGhSU0NsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAuYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtlZXBFeGNsdXNpdmVMb2NrQ2xh\ndXNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg\nICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9\nDQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQog\nICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpDQogICAgICAg\nICAgICAgICAgbG9nLmVycm9yKGUudG9TdHJpbmcoKSxlKTsNCiAgICAgICAg\nfQ0KICAgICAgICByZXR1cm4gZm9yVXBkYXRlU3RyaW5nLnRvU3RyaW5nKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNEQjJVREJWODJPckxh\ndGVyKCkgew0KICAgICAgICBib29sZWFuIG1hdGNoID0gZmFsc2U7DQogICAg\nICAgIGlmICgoZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCJTUUwi\nKSAhPSAtMQ0KICAgICAgICAgICAgfHwgZGF0YWJhc2VQcm9kdWN0TmFtZS5p\nbmRleE9mKCJEQjIvIikgIT0gLTEpDQogICAgICAgICAgICAmJiAoKG1haiA9\nPSA4ICYmIG1pbiA+PSAyKSB8fCAobWFqID49IDkpKSkNCiAgICAgICAgICAg\nIG1hdGNoID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIG1hdGNoOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyBib29sZWFuIGlzREIyWk9TVjh4T3JMYXRlcigpIHsN\nCiAgICAgICBib29sZWFuIG1hdGNoID0gZmFsc2U7DQogICAgICAgaWYgKChk\nYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4T2YoIkRTTiIpICE9IC0xDQog\nICAgICAgICAgIHx8IGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIy\nLyIpID09IC0xKQ0KICAgICAgICAgICAmJiBtYWogPj0gOCkNCiAgICAgICAg\nICAgbWF0Y2ggPSB0cnVlOw0KICAgICAgICByZXR1cm4gbWF0Y2g7DQogICAg\nfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNEQjJJU2VyaWVzVjVSM09yRWFy\nbGllcigpIHsNCiAgICAgICBib29sZWFuIG1hdGNoID0gZmFsc2U7DQogICAg\nICAgaWYgKGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiQVMiKSAhPSAt\nMQ0KICAgICAgICAgICAmJiAoKG1haiA9PSA1ICYmIG1pbiA8PTMpIHx8IG1h\naiA8IDUpKQ0KICAgICAgICAgICBtYXRjaCA9IHRydWU7DQogICAgICAgcmV0\ndXJuIG1hdGNoOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzREIy\nSVNlcmllc1Y1UjRPckxhdGVyKCkgew0KICAgICAgIGJvb2xlYW4gbWF0Y2gg\nPSBmYWxzZTsNCiAgICAgICBpZiAoZGF0YWJhc2VQcm9kdWN0TmFtZS5pbmRl\neE9mKCJBUyIpICE9IC0xDQogICAgICAgICAgICYmIChtYWogPj02IHx8ICht\nYWogPT0gNSAmJiBtaW4gPj00KSkpDQogICAgICAgICAgIG1hdGNoID0gdHJ1\nZTsNCiAgICAgIHJldHVybiBtYXRjaDsNCiAgICB9DQoNCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc0RCMlVEQlY4MU9yRWFybGllcigpIHsNCiAgICAgICAgYm9v\nbGVhbiBtYXRjaCA9IGZhbHNlOw0KICAgICAgICBpZiAoKGRhdGFiYXNlUHJv\nZHVjdFZlcnNpb24uaW5kZXhPZigiU1FMIikgIT0gLTEgDQogICAgICAgICAg\nIHx8IGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIyLyIpICE9IC0x\nKSAmJg0KICAgICAgICAgICAoKG1haiA9PSA4ICYmIG1pbiA8PSAxKSB8fCBt\nYWogPCA4KSkNCiAgICAgICAgICAgIG1hdGNoID0gdHJ1ZTsNCiAgICAgICAg\ncmV0dXJuIG1hdGNoOw0KICAgIH0NCg0KICAgIC8qKiBHZXQgdGhlIHZlcnNp\nb24gTWFqb3IvTWlub3IgZm9yIHRoZSBJU2VyaWVzDQogICAgICovDQogICAg\ncHJpdmF0ZSB2b2lkIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5vckZvcklT\nZXJpZXMoKSB7DQogICAgICAgIC8vIElTZXJpZXMgICAgREJQcm9kTmFtZSAg\nICAgICAgICAgICAgICAgREIyIFVEQiBmb3IgQVMvNDAwDQogICAgICAgIC8v\nICAgKFRvb2xib3gpREJQcm9kVmVyc2lvbiAgICAgICAgICAgICAgMDUuMDQu\nMDAwMCBWNVI0bTANCiAgICAgICAgLy8gSVNlcmllcyAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBEQjIgVURCIGZvciBBUy80MDANCiAgICAgICAg\nLy8gICAoTmF0aXZlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICBWNVI0\nTTANCiAgICAgICAgaWYgKGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigi\nQVMiKSAhPSAtMSkgew0KICAgICAgICAgICAgU3RyaW5nIHMgPSBkYXRhYmFz\nZVByb2R1Y3RWZXJzaW9uLnN1YnN0cmluZyhkYXRhYmFzZVByb2R1Y3RWZXJz\naW9uDQogICAgICAgICAgICAgICAgLmluZGV4T2YoJ1YnKSk7DQogICAgICAg\nICAgICBzID0gcy50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICBTdHJp\nbmdUb2tlbml6ZXIgc3RyaW5ndG9rZW5pemVyID0gbmV3IFN0cmluZ1Rva2Vu\naXplcihzLCAiVlJNIg0KICAgICAgICAgICAgICAgICwgZmFsc2UpOw0KICAg\nICAgICAgICAgaWYgKHN0cmluZ3Rva2VuaXplci5jb3VudFRva2VucygpID09\nIDMpIHsNCiAgICAgICAgICAgICAgICBTdHJpbmcgczEgPSBzdHJpbmd0b2tl\nbml6ZXIubmV4dFRva2VuKCk7DQogICAgICAgICAgICAgICAgbWFqID0gSW50\nZWdlci5wYXJzZUludChzMSk7DQogICAgICAgICAgICAgICAgU3RyaW5nIHMy\nID0gIHN0cmluZ3Rva2VuaXplci5uZXh0VG9rZW4oKTsNCiAgICAgICAgICAg\nICAgICBtaW4gPSBJbnRlZ2VyLnBhcnNlSW50KHMyKTsNCiAgICAgICAgICAg\nIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZvaWQg\nZ2V0UHJvZHVjdFZlcnNpb25NYWpvck1pbm9yKCkgew0KICAgICAgICAvLyBJ\nbmNhc2UgSkRCQyBkcml2ZXIgdmVyc2lvbiBpcyBsb3dlciB0aGFuIDMNCiAg\nICAgICAgLy8gdXNlIGZvbGxvd2luZyBpbmZvIHRvIGRldGVybWluZSBNYWpv\nciBhbmQgTWlub3IgDQogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAg\nICAgQ0xJICAgIHZzICAgICAgSkNDDQogICAgICAgIC8vIFpEQlY4IERCUHJv\nZE5hbWUgICAgICAgREIyICAgICAgICAgICAgREIyDQogICAgICAgIC8vICAg\nICAgIERCUHJvZFZlcnNpb24gICAgMDguMDEuMDAwNSAgICAgRFNOMDgwMTUN\nCiAgICAgICAgLy8gWkRCVjkgICAgICAgICAgICAgICAgICBEQjIgICAgICAg\nICAgICBEQjINCiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAw\nOS4wMS4wMDA1ICAgICBEU04wOTAxNQ0KICAgICAgICAvLyBXaW5WOSAgICAg\nICAgICAgICAgICAgIERCMi9OVCAgICAgICAgIERCMi9OVA0KICAgICAgICAv\nLyAgICAgICAgICAgICAgICAgICAgICAgIDA5LjAxLjAwMDAgICAgIFNRTDA5\nMDEwDQogICAgICAgIC8vIFNvbGFyaXNWOSAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgREIyL1NVTjY0DQogICAgICAgIC8vICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgU1FMMDkwMQ0KICAgICAgICAvLyBM\naW51eCAgICAgICAgICAgICAgICAgIERCMi9MSU5VWCAgICAgIERCMi9MSU5V\nWA0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIDA5LjAxLjAw\nMDAgICAgIFNRTDA5MDENCiAgICAgICAgaWYgKGRhdGFiYXNlUHJvZHVjdFZl\ncnNpb24uaW5kZXhPZigiMDkiKSAhPSAtMSkgew0KICAgICAgICAgICAgbWFq\nID0gOTsNCiAgICAgICAgICAgIGlmIChkYXRhYmFzZVByb2R1Y3RWZXJzaW9u\nLmluZGV4T2YoIjAxIikgIT0gLTEpIHsNCiAgICAgICAgICAgICAgICBtaW4g\nPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKGRhdGFi\nYXNlUHJvZHVjdFZlcnNpb24uaW5kZXhPZigiMDgiKSAhPSAtMSkgew0KICAg\nICAgICAgICAgbWFqID0gODsNCiAgICAgICAgICAgIG1pbiA9IDI7DQogICAg\nICAgICAgICBpZiAoZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCIw\nMSIpICE9IC0xKSB7DQogICAgICAgICAgICAgICAgbWluID0gMTsNCiAgICAg\nICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBT\ndHJpbmcgZ2V0T3B0aW1pemVDbGF1c2UoU2VsZWN0IHNlbCkgew0KICAgICAg\nICBpZiAoc2VsICE9IG51bGwgJiYgc2VsLmdldEV4cGVjdGVkUmVzdWx0Q291\nbnQoKSA+IDApIHsNCiAgICAgICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBu\nZXcgU3RyaW5nQnVmZmVyKCk7DQogICAgICAgICAgICBidWYuYXBwZW5kKCIg\nIikuYXBwZW5kKG9wdGltaXplQ2xhdXNlKS5hcHBlbmQoIiAiKQ0KICAgICAg\nICAgICAgICAgIC5hcHBlbmQoU3RyaW5nLnZhbHVlT2Yoc2VsLmdldEV4cGVj\ndGVkUmVzdWx0Q291bnQoKSkpDQogICAgICAgICAgICAgICAgLmFwcGVuZCgi\nICIpLmFwcGVuZChyb3dDbGF1c2UpOw0KICAgICAgICAgICAgcmV0dXJuIGJ1\nZi50b1N0cmluZygpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICIi\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyBPcGVuSlBBRXhjZXB0aW9uIG5ld1N0\nb3JlRXhjZXB0aW9uKFN0cmluZyBtc2csIFNRTEV4Y2VwdGlvbltdIGNhdXNl\ncywNCiAgICAgICAgT2JqZWN0IGZhaWxlZCkgew0KICAgICAgICBpZiAoY2F1\nc2VzICE9IG51bGwgJiYgY2F1c2VzLmxlbmd0aCA+IDApDQogICAgICAgICAg\nICBtc2cgPSBhcHBlbmRFeHRlbmRlZEV4Y2VwdGlvbk1zZyhtc2csIGNhdXNl\nc1swXSk7DQogICAgICAgIHJldHVybiBzdXBlci5uZXdTdG9yZUV4Y2VwdGlv\nbihtc2csIGNhdXNlcywgZmFpbGVkKTsNCiAgICB9DQoNCiAgICAvKioNCiAg\nICAgKiAgQXBwZW5kIGV4Y2VwdGlvbiBpbmZvcm1hdGlvbiBmcm9tIFNRTENB\nIHRvIHRoZSBleHNpc3RpbmcNCiAgICAgKiAgZXhjZXB0aW9uIG1lYXNzYWdl\nDQogICAgICovDQogICAgcHJpdmF0ZSBTdHJpbmcgYXBwZW5kRXh0ZW5kZWRF\neGNlcHRpb25Nc2coU3RyaW5nIG1zZywgU1FMRXhjZXB0aW9uIHNxbGUpew0K\nICAgICAgIGZpbmFsIFN0cmluZyBHRVRTUUxDQSA9ImdldFNxbGNhIjsNCiAg\nICAgICBTdHJpbmcgZXhjZXB0aW9uTXNnID0gbmV3IFN0cmluZygpOw0KICAg\nICAgIHRyeSB7DQogICAgICAgICAgICBNZXRob2Qgc3FsY2FNMiA9IHNxbGUu\nZ2V0TmV4dEV4Y2VwdGlvbigpLmdldENsYXNzKCkNCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgLmdldE1ldGhvZChHRVRTUUxDQSxudWxsKTsNCiAg\nICAgICAgICAgIE9iamVjdCBzcWxjYSA9IHNxbGNhTTIuaW52b2tlKHNxbGUu\nZ2V0TmV4dEV4Y2VwdGlvbigpLA0KICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgbmV3IE9iamVjdFtdIHt9KTsNCiAgICAgICAg\nICAgIE1ldGhvZCAgZ2V0U3FsRXJycE1ldGhkID0gc3FsY2EuZ2V0Q2xhc3Mo\nKS4NCiAgICAgICAgICAgIGdldE1ldGhvZCgiZ2V0U3FsRXJycCIsIG51bGwp\nOw0KICAgICAgICAgICAgTWV0aG9kICBnZXRTcWxXYXJuTWV0aGQgPSBzcWxj\nYS5nZXRDbGFzcygpLg0KICAgICAgICAgICAgZ2V0TWV0aG9kKCJnZXRTcWxX\nYXJuIiwgbnVsbCk7DQogICAgICAgICAgICBNZXRob2QgIGdldFNxbEVycmRN\nZXRoZCA9IHNxbGNhLmdldENsYXNzKCkuDQogICAgICAgICAgICBnZXRNZXRo\nb2QoImdldFNxbEVycmQiLCBudWxsKTsNCiAgICAgICAgICAgIFN0cmluZ0J1\nZmZlciBlcnJkU3RyID0gbmV3IFN0cmluZ0J1ZmZlcigpOw0KDQogICAgICAg\nICAgICBpbnRbXSBlcnJkcyA9IChpbnRbXSkgZ2V0U3FsRXJyZE1ldGhkLmlu\ndm9rZShzcWxjYSwgbmV3IE9iamVjdFtde30pOw0KICAgICAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBlcnJkcy5sZW5ndGg7IGkrKykNCiAgICAgICAg\nICAgICAgICBlcnJkU3RyLmFwcGVuZChlcnJkU3RyLmxlbmd0aCgpID4gMCA/\nICIsICIgOiAiIikuDQogICAgICAgICAgICAgICAgICAgIGFwcGVuZChlcnJk\nc1tpXSk7DQogICAgICAgICAgICBleGNlcHRpb25Nc2cgPSBleGNlcHRpb25N\nc2cuY29uY2F0KCAiU1FMQ0EgT1VUUFVUIiArDQogICAgICAgICAgICAgICAg\nICAgICJbRXJycD0iICsgZ2V0U3FsRXJycE1ldGhkLmludm9rZShzcWxjYSwg\nbmV3IE9iamVjdFtde30pDQogICAgICAgICAgICAgICAgICAgICsgIiwgRXJy\nZD0iICsgZXJyZFN0cik7DQoNCiAgICAgICAgICAgIFN0cmluZyBXYXJuID0g\nbmV3IFN0cmluZygoY2hhcltdKSBnZXRTcWxXYXJuTWV0aGQuDQogICAgICAg\nICAgICAgICAgICAgIGludm9rZShzcWxjYSwgbmV3IE9iamVjdFtde30pKTsN\nCiAgICAgICAgICAgIGlmKFdhcm4udHJpbSgpLmxlbmd0aCgpICE9IDApDQog\nICAgICAgICAgICAgICAgZXhjZXB0aW9uTXNnID0gZXhjZXB0aW9uTXNnLmNv\nbmNhdCgiLCBXYXJuPSIgK1dhcm4gKyAiXSIgKTsNCiAgICAgICAgICAgIGVs\nc2UNCiAgICAgICAgICAgICAgICBleGNlcHRpb25Nc2cgPSBleGNlcHRpb25N\nc2cuY29uY2F0KCAiXSIgKTsNCiAgICAgICAgICAgIG1zZyA9IG1zZy5jb25j\nYXQoZXhjZXB0aW9uTXNnKTsNCiAgICAgICAgICAgIHJldHVybiBtc2c7DQog\nICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7DQogICAgICAgICAgICBy\nZXR1cm4gc3FsZS5nZXRNZXNzYWdlKCk7DQogICAgICAgIH0NCiAgICB9DQoN\nCiAgICBwdWJsaWMgaW50IGdldERiMlNlcnZlclR5cGUoKSB7DQogICAgICAg\nIHJldHVybiBkYjJTZXJ2ZXJUeXBlOw0KICAgIH0NCiAgICANCiAgICBwcm90\nZWN0ZWQgdm9pZCBhcHBlbmRMZW5ndGgoU1FMQnVmZmVyIGJ1ZiwgaW50IHR5\ncGUpIHsNCiAgICAgICAgaWYgKHR5cGUgPT0gVHlwZXMuVkFSQ0hBUikNCiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIigiKS5hcHBlbmQoSW50ZWdlci50b1N0\ncmluZyhjaGFyYWN0ZXJDb2x1bW5TaXplKSkuDQogICAgICAgICAgICAgICAg\nYXBwZW5kKCIpIik7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogSWYgdGhp\ncyBkaWN0aW9uYXJ5IHN1cHBvcnRzIFhNTCB0eXBlLA0KICAgICAqIHVzZSB0\naGlzIG1ldGhvZCB0byBhcHBlbmQgeG1sIHByZWRpY2F0ZS4NCiAgICAgKiAN\nCiAgICAgKiBAcGFyYW0gYnVmIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRo\nZSBjb21wYXJpc29uDQogICAgICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29u\nIG9wZXJhdGlvbiB0byBwZXJmb3JtDQogICAgICogQHBhcmFtIGxocyB0aGUg\nbGVmdCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24NCiAgICAgKiBAcGFy\nYW0gcmhzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24N\nCiAgICAgKiBAcGFyYW0gbGhzeG1sIGluZGljYXRlcyB3aGV0aGVyIHRoZSBs\nZWZ0IG9wZXJhbmQgbWFwcyB0byB4bWwNCiAgICAgKiBAcGFyYW0gcmhzeG1s\nIGluZGljYXRlcyB3aGV0aGVyIHRoZSByaWdodCBvcGVyYW5kIG1hcHMgdG8g\neG1sDQogICAgICovDQogICAgcHVibGljIHZvaWQgYXBwZW5kWG1sQ29tcGFy\naXNvbihTUUxCdWZmZXIgYnVmLCBTdHJpbmcgb3AsIEZpbHRlclZhbHVlIGxo\ncywNCiAgICAgICAgRmlsdGVyVmFsdWUgcmhzLCBib29sZWFuIGxoc3htbCwg\nYm9vbGVhbiByaHN4bWwpIHsNCiAgICAgICAgc3VwZXIuYXBwZW5kWG1sQ29t\ncGFyaXNvbihidWYsIG9wLCBsaHMsIHJocywgbGhzeG1sLCByaHN4bWwpOw0K\nICAgICAgICBpZiAobGhzeG1sICYmIHJoc3htbCkNCiAgICAgICAgICAgIGFw\ncGVuZFhtbENvbXBhcmlzb24yKGJ1Ziwgb3AsIGxocywgcmhzKTsNCiAgICAg\nICAgZWxzZSBpZiAobGhzeG1sKQ0KICAgICAgICAgICAgYXBwZW5kWG1sQ29t\ncGFyaXNvbjEoYnVmLCBvcCwgbGhzLCByaHMpOw0KICAgICAgICBlbHNlIA0K\nICAgICAgICAgICAgYXBwZW5kWG1sQ29tcGFyaXNvbjEoYnVmLCBvcCwgcmhz\nLCBsaHMpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEFwcGVuZCBhbiB4\nbWwgY29tcGFyaXNvbiBwcmVkaWNhdGUuDQogICAgICoNCiAgICAgKiBAcGFy\nYW0gYnVmIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRoZSBjb21wYXJpc29u\nDQogICAgICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJhdGlvbiB0\nbyBwZXJmb3JtDQogICAgICogQHBhcmFtIGxocyB0aGUgbGVmdCBoYW5kIHNp\nZGUgb2YgdGhlIGNvbXBhcmlzb24gKG1hcHMgdG8geG1sIGNvbHVtbikNCiAg\nICAgKiBAcGFyYW0gcmhzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGNv\nbXBhcmlzb24NCiAgICAgKi8NCiAgICBwcml2YXRlIHZvaWQgYXBwZW5kWG1s\nQ29tcGFyaXNvbjEoU1FMQnVmZmVyIGJ1ZiwgU3RyaW5nIG9wLCANCiAgICAg\nICAgICAgIEZpbHRlclZhbHVlIGxocywgRmlsdGVyVmFsdWUgcmhzKSB7DQog\nICAgICAgIGJvb2xlYW4gY2FzdHJocyA9IGZhbHNlOw0KICAgICAgICBDbGFz\ncyByYyA9IEZpbHRlcnMud3JhcChyaHMuZ2V0VHlwZSgpKTsNCiAgICAgICAg\naW50IHR5cGUgPSAwOw0KICAgICAgICBpZiAocmhzLmlzQ29uc3RhbnQoKSkg\new0KICAgICAgICAgICAgdHlwZSA9IGdldEpEQkNUeXBlKEphdmFUeXBlcy5n\nZXRUeXBlQ29kZShyYyksIGZhbHNlKTsNCiAgICAgICAgICAgIGNhc3RyaHMg\nPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBhcHBlbmRY\nbWxFeGlzdHMoYnVmLCBsaHMpOw0KDQogICAgICAgIGJ1Zi5hcHBlbmQoIiAi\nKS5hcHBlbmQob3ApLmFwcGVuZCgiICIpOw0KICAgICAgICANCiAgICAgICAg\nYnVmLmFwcGVuZCgiJCIpOw0KICAgICAgICBpZiAoY2FzdHJocykNCiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIlBhcm0iKTsNCiAgICAgICAgZWxzZQ0KICAg\nICAgICAgICAgcmhzLmFwcGVuZFRvKGJ1Zik7DQogICAgICAgIA0KICAgICAg\nICBidWYuYXBwZW5kKCJdJyBQQVNTSU5HICIpOw0KICAgICAgICBhcHBlbmRY\nbWxWYXIoYnVmLCBsaHMpOw0KICAgICAgICBidWYuYXBwZW5kKCIsICIpOw0K\nICAgICAgICANCiAgICAgICAgaWYgKGNhc3RyaHMpDQogICAgICAgICAgICBh\ncHBlbmRDYXN0KGJ1ZiwgcmhzLCB0eXBlKTsNCiAgICAgICAgZWxzZQ0KICAg\nICAgICAgICAgcmhzLmFwcGVuZFRvKGJ1Zik7DQogICAgICAgIA0KICAgICAg\nICBidWYuYXBwZW5kKCIgQVMgXCIiKTsNCiAgICAgICAgaWYgKGNhc3RyaHMp\nDQogICAgICAgICAgICBidWYuYXBwZW5kKCJQYXJtIik7DQogICAgICAgIGVs\nc2UNCiAgICAgICAgICAgIHJocy5hcHBlbmRUbyhidWYpOw0KICAgICAgICBi\ndWYuYXBwZW5kKCJcIikiKTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAg\nICogQXBwZW5kIGFuIHhtbCBjb21wYXJpc29uIHByZWRpY2F0ZS4gKGJvdGgg\nb3BlcmFuZHMgbWFwIHRvIHhtbCBjb2x1bW4pDQogICAgICoNCiAgICAgKiBA\ncGFyYW0gYnVmIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRoZSBjb21wYXJp\nc29uDQogICAgICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJhdGlv\nbiB0byBwZXJmb3JtDQogICAgICogQHBhcmFtIGxocyB0aGUgbGVmdCBoYW5k\nIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24gKG1hcHMgdG8geG1sIGNvbHVtbikN\nCiAgICAgKiBAcGFyYW0gcmhzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhl\nIGNvbXBhcmlzb24gKG1hcHMgdG8geG1sIGNvbHVtbikNCiAgICAgKi8NCiAg\nICBwcml2YXRlIHZvaWQgYXBwZW5kWG1sQ29tcGFyaXNvbjIoU1FMQnVmZmVy\nIGJ1ZiwgU3RyaW5nIG9wLCANCiAgICAgICAgICAgIEZpbHRlclZhbHVlIGxo\ncywgRmlsdGVyVmFsdWUgcmhzKSB7DQogICAgICAgIGFwcGVuZFhtbEV4aXN0\ncyhidWYsIGxocyk7DQogICAgICAgIA0KICAgICAgICBidWYuYXBwZW5kKCIg\nIikuYXBwZW5kKG9wKS5hcHBlbmQoIiAiKTsNCiAgICAgICAgDQogICAgICAg\nIGJ1Zi5hcHBlbmQoIiQiKS5hcHBlbmQocmhzLmdldENvbHVtbkFsaWFzKA0K\nICAgICAgICAgICAgcmhzLmdldEZpZWxkTWFwcGluZygpLmdldENvbHVtbnMo\nKVswXSkpLg0KICAgICAgICAgICAgYXBwZW5kKCIvKi8iKTsNCiAgICAgICAg\ncmhzLmFwcGVuZFRvKGJ1Zik7DQogICAgICAgIA0KICAgICAgICBidWYuYXBw\nZW5kKCJdJyBQQVNTSU5HICIpOw0KICAgICAgICBhcHBlbmRYbWxWYXIoYnVm\nLCBsaHMpOw0KICAgICAgICBidWYuYXBwZW5kKCIsICIpOw0KICAgICAgICBh\ncHBlbmRYbWxWYXIoYnVmLCByaHMpOw0KICAgICAgICBidWYuYXBwZW5kKCIp\nIik7DQogICAgfQ0KICAgIA0KICAgIHByaXZhdGUgdm9pZCBhcHBlbmRYbWxW\nYXIoU1FMQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgdmFsKSB7DQogICAgICAg\nIGJ1Zi5hcHBlbmQodmFsLmdldENvbHVtbkFsaWFzKA0KICAgICAgICAgICAg\ndmFsLmdldEZpZWxkTWFwcGluZygpLmdldENvbHVtbnMoKVswXSkpLg0KICAg\nICAgICAgICAgYXBwZW5kKCIgQVMgIikuDQogICAgICAgICAgICBhcHBlbmQo\nIlwiIikuYXBwZW5kKHZhbC5nZXRDb2x1bW5BbGlhcygNCiAgICAgICAgICAg\nIHZhbC5nZXRGaWVsZE1hcHBpbmcoKS5nZXRDb2x1bW5zKClbMF0pKS4NCiAg\nICAgICAgICAgIGFwcGVuZCgiXCIiKTsgICAgICAgIA0KICAgIH0NCiAgICAN\nCiAgICBwcml2YXRlIHZvaWQgYXBwZW5kWG1sRXhpc3RzKFNRTEJ1ZmZlciBi\ndWYsIEZpbHRlclZhbHVlIHZhbCkgew0KICAgICAgICBidWYuYXBwZW5kKCJY\nTUxFWElTVFMoJyIpOw0KICAgICAgICBidWYuYXBwZW5kKCIkIikuYXBwZW5k\nKHZhbC5nZXRDb2x1bW5BbGlhcygNCiAgICAgICAgICAgIHZhbC5nZXRGaWVs\nZE1hcHBpbmcoKS5nZXRDb2x1bW5zKClbMF0pKS4NCiAgICAgICAgICAgIGFw\ncGVuZCgiLypbIik7DQogICAgICAgIHZhbC5hcHBlbmRUbyhidWYpOyAgICAg\nICAgDQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICAqIGFkZCBDQVNUIGZv\nciBhIHNjYWxhciBmdW5jdGlvbiB3aGVyZSBvcGVyYW5kIGlzIGEgcGFyYW0N\nCiAgICAgKiANCiAgICAgKiBAcGFyYW0gZnVuYyBvcmlnaW5hbCBzdHJpbmcN\nCiAgICAgKiBAcGFyYW0gdGFyZ2V0IHN1YnN0cmluZyB0byBsb29rIGZvcg0K\nICAgICAqIEBwYXJhbSBhc1N0cmluZyANCiAgICAgKiBAcmV0dXJuIHVwZGF0\nZWQgc3RyaW5nIChmdW5jKQ0KICAgICAqLw0KICAgIHByaXZhdGUgU3RyaW5n\nIGFkZENhc3RBc1N0cmluZyhTdHJpbmcgZnVuYywgU3RyaW5nIHRhcmdldCwg\nDQogICAgICAgICAgICBTdHJpbmcgYXNTdHJpbmcpIHsNCiAgICAgICAgU3Ry\naW5nIGZzdHJpbmcgPSBmdW5jOw0KICAgICAgICBpZiAoZnVuYy5pbmRleE9m\nKHRhcmdldCkgIT0gLTEpDQogICAgICAgICAgICBmc3RyaW5nID0gU3RyaW5n\ncy5yZXBsYWNlKA0KICAgICAgICAgICAgICAgIGZ1bmMsIHRhcmdldCwgIkNB\nU1QoIiArIHRhcmdldCArIGFzU3RyaW5nICsgIikiKTsNCiAgICAgICAgcmV0\ndXJuIGZzdHJpbmc7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogYWRkIENB\nU1QgZm9yIGEgZnVuY3Rpb24gb3BlcmF0b3Igd2hlcmUgb3BlcmFuZCBpcyBh\nIHBhcmFtDQogICAgICogDQogICAgICogQHBhcmFtIGZ1bmMgZnVuY3Rpb24g\nbmFtZQ0KICAgICAqIEBwYXJhbSB2YWwgdHlwZQ0KICAgICAqIEByZXR1cm4g\ndXBkYXRlZCBzdHJpbmcgKGZ1bmMpDQogICAgICovDQogICAgcHVibGljIFN0\ncmluZyBhZGRDYXN0QXNUeXBlKFN0cmluZyBmdW5jLCBWYWwgdmFsKSB7DQog\nICAgICAgIFN0cmluZyBmc3RyaW5nID0gbnVsbDsNCiAgICAgICAgU3RyaW5n\nIHR5cGUgPSBnZXRUeXBlTmFtZShnZXRKREJDVHlwZShKYXZhVHlwZXMuZ2V0\nVHlwZUNvZGUodmFsDQogICAgICAgICAgICAuZ2V0VHlwZSgpKSwgZmFsc2Up\nKTsNCiAgICAgICAgZnN0cmluZyA9ICJDQVNUKD8gQVMgIiArIHR5cGUgKyAi\nKSI7DQogICAgICAgIHJldHVybiBmc3RyaW5nOw0KICAgIH0NCg0KICAgIC8q\nKg0KICAgICAqIFJldHVybiB0aGUgY29ycmVjdCBDQVNUIGZ1bmN0aW9uIHN5\nbnRheA0KICAgICAqIA0KICAgICAqIEBwYXJhbSB2YWwgb3BlcmFuZCBvZiBj\nYXN0DQogICAgICogQHBhcmFtIGZ1bmMgb3JpZ2luYWwgc3RyaW5nDQogICAg\nICogQHJldHVybiBhIFN0cmluZyB3aXRoIHRoZSBjb3JyZWN0IENBU1QgZnVu\nY3Rpb24gc3ludGF4DQogICAgICovDQogICAgcHVibGljIFN0cmluZyBnZXRD\nYXN0RnVuY3Rpb24oVmFsIHZhbCwgU3RyaW5nIGZ1bmMpIHsNCiAgICAgICAg\naWYgKHZhbCBpbnN0YW5jZW9mIExpdCB8fCB2YWwgaW5zdGFuY2VvZiBQYXJh\nbSkNCiAgICAgICAgICAgIGlmIChmdW5jLmluZGV4T2YoIlZBUkNIQVIiKSA9\nPSAtMSkNCiAgICAgICAgICAgICAgICBmdW5jID0gYWRkQ2FzdEFzU3RyaW5n\nKGZ1bmMsICJ7MH0iLCAiIEFTIFZBUkNIQVIoMTAwMCkiKTsNCiAgICAgICAg\ncmV0dXJuIGZ1bmM7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgaW5kZXhP\nZihTUUxCdWZmZXIgYnVmLCBGaWx0ZXJWYWx1ZSBzdHIsIEZpbHRlclZhbHVl\nIGZpbmQsDQogICAgICAgICAgICBGaWx0ZXJWYWx1ZSBzdGFydCkgew0KICAg\nICAgICBpZiAoZmluZC5nZXRWYWx1ZSgpICE9IG51bGwpIHsgLy8gbm9uIGNv\nbnN0YW50cw0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiKExPQ0FURShDQVNU\nKCgiKTsNCiAgICAgICAgICAgIGZpbmQuYXBwZW5kVG8oYnVmKTsNCiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIikgQVMgVkFSQ0hBUigxMDAwKSksICIpOw0K\nICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gdGhpcyBpcyBhIGNv\nbnN0YW50DQogICAgICAgICAgICBidWYuYXBwZW5kKCIoTE9DQVRFKCIpOw0K\nICAgICAgICAgICAgZmluZC5hcHBlbmRUbyhidWYpOw0KICAgICAgICAgICAg\nYnVmLmFwcGVuZCgiLCAiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc3Ry\nLmdldFZhbHVlKCkgIT0gbnVsbCkgew0KICAgICAgICAgICAgYnVmLmFwcGVu\nZCgiQ0FTVCgoIik7DQogICAgICAgICAgICBzdHIuYXBwZW5kVG8oYnVmKTsN\nCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIikgQVMgVkFSQ0hBUigxMDAwKSki\nKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHN0ci5hcHBlbmRU\nbyhidWYpOw0KICAgICAgICB9DQogICAgICAgIGlmIChzdGFydCAhPSBudWxs\nKSB7DQogICAgICAgICAgICBpZiAoc3RhcnQuZ2V0VmFsdWUoKSA9PSBudWxs\nKSB7DQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiLCBDQVNUKCgiKTsN\nCiAgICAgICAgICAgICAgICBzdGFydC5hcHBlbmRUbyhidWYpOw0KICAgICAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIikgQVMgSU5URUdFUikgKyAxIik7DQog\nICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoIiwgIik7DQogICAgICAgICAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVm\nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBidWYuYXBw\nZW5kKCIpIC0gMSkiKTsNCiAgICB9DQoNCiAgICAvKiogDQogICAgICogQ2Fz\ndCB0aGUgc3BlY2lmaWVkIHZhbHVlIHRvIHRoZSBzcGVjaWZpZWQgdHlwZS4N\nCiAgICAgKg0KICAgICAqIEBwYXJhbSBidWYgdGhlIGJ1ZmZlciB0byBhcHBl\nbmQgdGhlIGNhc3QgdG8NCiAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0\nbyBjYXN0DQogICAgICogQHBhcmFtIHR5cGUgdGhlIHR5cGUgb2YgdGhlIGNh\nc2UsIGUuZy4ge0BsaW5rIFR5cGVzI05VTUVSSUN9DQogICAgICovDQogICAg\ncHVibGljIHZvaWQgYXBwZW5kQ2FzdChTUUxCdWZmZXIgYnVmLCBGaWx0ZXJW\nYWx1ZSB2YWwsIGludCB0eXBlKSB7DQoNCiAgICAgICAgLy8gQ29udmVydCB0\naGUgY2FzdCBmdW5jdGlvbjogIkNBU1QoezB9IEFTIHsxfSkiDQogICAgICAg\nIGludCBmaXJzdFBhcmFtID0gY2FzdEZ1bmN0aW9uLmluZGV4T2YoInswfSIp\nOw0KICAgICAgICBTdHJpbmcgcHJlID0gY2FzdEZ1bmN0aW9uLnN1YnN0cmlu\nZygwLCBmaXJzdFBhcmFtKTsgLy8gIkNBU1QoIg0KICAgICAgICBTdHJpbmcg\nbWlkID0gY2FzdEZ1bmN0aW9uLnN1YnN0cmluZyhmaXJzdFBhcmFtICsgMyk7\nDQogICAgICAgIGludCBzZWNvbmRQYXJhbSA9IG1pZC5pbmRleE9mKCJ7MX0i\nKTsNCiAgICAgICAgU3RyaW5nIHBvc3Q7DQogICAgICAgIGlmIChzZWNvbmRQ\nYXJhbSA+IC0xKSB7DQogICAgICAgICAgICBwb3N0ID0gbWlkLnN1YnN0cmlu\nZyhzZWNvbmRQYXJhbSArIDMpOyAvLyAiKSINCiAgICAgICAgICAgIG1pZCA9\nIG1pZC5zdWJzdHJpbmcoMCwgc2Vjb25kUGFyYW0pOyAvLyAiIEFTICINCiAg\nICAgICAgfSBlbHNlDQogICAgICAgICAgICBwb3N0ID0gIiI7DQoNCiAgICAg\nICAgLy8gTm8gbmVlZCB0byBhZGQgQ0FTVCBpZiB0aGUgdmFsdWUgaXMgYSBj\nb25zdGFudA0KICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgTGl0IHx8IHZh\nbCBpbnN0YW5jZW9mIFBhcmFtKSB7DQogICAgICAgICAgICBidWYuYXBwZW5k\nKHByZSk7DQogICAgICAgICAgICB2YWwuYXBwZW5kVG8oYnVmKTsNCiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQobWlkKTsNCiAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoZ2V0VHlwZU5hbWUodHlwZSkpOw0KICAgICAgICAgICAgYXBwZW5kTGVu\nZ3RoKGJ1ZiwgdHlwZSk7DQogICAgICAgICAgICBidWYuYXBwZW5kKHBvc3Qp\nOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdmFsLmFwcGVuZFRv\nKGJ1Zik7DQogICAgICAgICAgICBTdHJpbmcgc3FsU3RyaW5nID0gYnVmLmdl\ndFNRTChmYWxzZSk7DQogICAgICAgICAgICBpZiAoc3FsU3RyaW5nLmVuZHNX\naXRoKCI/IikpIHsNCiAgICAgICAgICAgICAgICAvLyBjYXNlICIoPyIgLSBj\nb252ZXJ0IHRvICJDQVNUKD8gQVMgdHlwZSINCiAgICAgICAgICAgICAgICBT\ndHJpbmcgdHlwZU5hbWUgPSBnZXRUeXBlTmFtZSh0eXBlKTsNCiAgICAgICAg\nICAgICAgICBpZiAoU3RyaW5nLmNsYXNzLmVxdWFscyh2YWwuZ2V0VHlwZSgp\nKSkNCiAgICAgICAgICAgICAgICAgICAgdHlwZU5hbWUgPSB0eXBlTmFtZSAr\nICIoIiArIGNoYXJhY3RlckNvbHVtblNpemUgKyAiKSI7DQogICAgICAgICAg\nICAgICAgU3RyaW5nIHN0ciA9ICJDQVNUKD8gQVMgIiArIHR5cGVOYW1lICsg\nIikiOw0KICAgICAgICAgICAgICAgIGJ1Zi5yZXBsYWNlU3FsU3RyaW5nKHNx\nbFN0cmluZy5sZW5ndGgoKSAtIDEsDQogICAgICAgICAgICAgICAgICAgICAg\nICBzcWxTdHJpbmcubGVuZ3RoKCksIHN0cik7DQogICAgICAgICAgICB9DQog\nICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBDcmVhdGUgYW4g\naW5kZXggaWYgbmVjZXNzYXJ5IGZvciBzb21lIGRhdGFiYXNlIHRhYmxlcw0K\nICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUluZGV4SWZOZWNlc3Nh\ncnkoU2NoZW1hIHNjaGVtYSwgU3RyaW5nIHRhYmxlLA0KICAgICAgICAgICAg\nQ29sdW1uIHBrQ29sdW1uKSB7DQogICAgICAgIGlmIChpc0RCMlpPU1Y4eE9y\nTGF0ZXIoKSkgew0KICAgICAgICAgICAgLy8gYnVpbGQgdGhlIGluZGV4IGZv\nciB0aGUgc2VxdWVuY2UgdGFibGVzDQogICAgICAgICAgICAvLyB0aGUgaW5k\nZXggbmFtZSB3aWxsIHRoZSBmdWxseSBxdWFsaWZpZWQgdGFibGUgbmFtZSAr\nIF9JRFgNCiAgICAgICAgICAgIFRhYmxlIHRhYiA9IHNjaGVtYS5nZXRUYWJs\nZSh0YWJsZSk7DQogICAgICAgICAgICBJbmRleCBpZHggPSB0YWIuYWRkSW5k\nZXgodGFiLmdldEZ1bGxOYW1lKCkgKyAiX0lEWCIpOw0KICAgICAgICAgICAg\naWR4LnNldFVuaXF1ZSh0cnVlKTsNCiAgICAgICAgICAgIGlkeC5hZGRDb2x1\nbW4ocGtDb2x1bW4pOw0KICAgICAgICB9DQogICAgfQ0KfQ0K\n","encoding":"base64"}

