{"sha":"4d89d3eadbbefa7144d57b337ef71aebe7e3447c","node_id":"MDQ6QmxvYjIwNjM2NDo0ZDg5ZDNlYWRiYmVmYTcxNDRkNTdiMzM3ZWY3MWFlYmU3ZTM0NDdj","size":4860,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4d89d3eadbbefa7144d57b337ef71aebe7e3447c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZjsKCmltcG9ydCBqYXZh\nLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOwppbXBvcnQg\namF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS51\ndGlsLlByb3BlcnRpZXM7CmltcG9ydCBqYXZhLnV0aWwuU3RyaW5nVG9rZW5p\nemVyOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KMkRv\nUHJpdkhlbHBlcjsKCi8qKgogKiBUaGlzIGNsYXNzIGNvbnRhaW5zIHZlcnNp\nb24gaW5mb3JtYXRpb24gZm9yIE9wZW5KUEEuIEl0IHVzZXMKICogQW50J3Mg\nZmlsdGVyIHRva2VucyB0byBjb252ZXJ0IHRoZSB0ZW1wbGF0ZSBpbnRvIGEg\namF2YQogKiBmaWxlIHdpdGggY3VycmVudCBpbmZvcm1hdGlvbi4KICoKICog\nQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgsIFBhdHJpY2sgTGluc2tleQog\nKi8KcHVibGljIGNsYXNzIE9wZW5KUEFWZXJzaW9uIHsKCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIFN0cmluZyBWRVJTSU9OX05VTUJFUjsKICAgIHB1Ymxp\nYyBzdGF0aWMgZmluYWwgU3RyaW5nIFZFUlNJT05fSUQ7CiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIFN0cmluZyBWRU5ET1JfTkFNRSA9ICJPcGVuSlBBIjsK\nICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IE1BSk9SX1JFTEVBU0U7CiAg\nICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBNSU5PUl9SRUxFQVNFOwogICAg\ncHVibGljIHN0YXRpYyBmaW5hbCBpbnQgUEFUQ0hfUkVMRUFTRTsKICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFJFTEVBU0VfU1RBVFVTOwogICAg\ncHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUkVWSVNJT05fTlVNQkVSOwoK\nICAgIHN0YXRpYyB7CiAgICAgICAgUHJvcGVydGllcyByZXZpc2lvblByb3Bz\nID0gbmV3IFByb3BlcnRpZXMoKTsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBJbnB1dFN0cmVhbSBpbiA9IE9wZW5KUEFWZXJzaW9uLmNsYXNzLmdldFJl\nc291cmNlQXNTdHJlYW0KICAgICAgICAgICAgICAgICgiL01FVEEtSU5GL29y\nZy5hcGFjaGUub3BlbmpwYS5yZXZpc2lvbi5wcm9wZXJ0aWVzIik7CiAgICAg\nICAgICAgIGlmIChpbiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgIHJldmlzaW9uUHJvcHMubG9hZChpbik7\nCiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAg\nICAgIGluLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nIH0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0K\nCiAgICAgICAgU3RyaW5nIHZlcnMgPSByZXZpc2lvblByb3BzLmdldFByb3Bl\ncnR5KCJvcGVuanBhLnZlcnNpb24iKTsKICAgICAgICBpZiAodmVycyA9PSBu\ndWxsIHx8ICIiLmVxdWFscyh2ZXJzLnRyaW0oKSkpCiAgICAgICAgICAgIHZl\ncnMgPSAiMC4wLjAiOwogICAgICAgIFZFUlNJT05fTlVNQkVSID0gdmVyczsK\nCiAgICAgICAgU3RyaW5nVG9rZW5pemVyIHRvayA9IG5ldyBTdHJpbmdUb2tl\nbml6ZXIoVkVSU0lPTl9OVU1CRVIsICIuLSIpOwogICAgICAgIGludCBtYWpv\nciwgbWlub3IsIHBhdGNoOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG1h\nam9yID0gdG9rLmhhc01vcmVUb2tlbnMoKSA/IEludGVnZXIucGFyc2VJbnQo\ndG9rLm5leHRUb2tlbigpKSA6IDA7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgbWFqb3IgPSAwOwogICAgICAgIH0KCiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgbWlub3IgPSB0b2suaGFzTW9yZVRv\na2VucygpID8gSW50ZWdlci5wYXJzZUludCh0b2submV4dFRva2VuKCkpIDog\nMDsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICBtaW5vciA9IDA7CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAg\nICAgICBwYXRjaCA9IHRvay5oYXNNb3JlVG9rZW5zKCkgPyBJbnRlZ2VyLnBh\ncnNlSW50KHRvay5uZXh0VG9rZW4oKSkgOiAwOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHBhdGNoID0gMDsKICAgICAg\nICB9CgogICAgICAgIFN0cmluZyByZXZpc2lvbiA9IHJldmlzaW9uUHJvcHMu\nZ2V0UHJvcGVydHkoInJldmlzaW9uLm51bWJlciIpOwoKICAgICAgICBNQUpP\nUl9SRUxFQVNFID0gbWFqb3I7CiAgICAgICAgTUlOT1JfUkVMRUFTRSA9IG1p\nbm9yOwogICAgICAgIFBBVENIX1JFTEVBU0UgPSBwYXRjaDsKICAgICAgICBS\nRUxFQVNFX1NUQVRVUyA9IHRvay5oYXNNb3JlVG9rZW5zKCkgPyB0b2submV4\ndFRva2VuKCIhIikgOiAiIjsKICAgICAgICBSRVZJU0lPTl9OVU1CRVIgPSBy\nZXZpc2lvbjsKICAgICAgICBWRVJTSU9OX0lEID0gIm9wZW5qcGEtIiArIFZF\nUlNJT05fTlVNQkVSICsgIi1yIiArIFJFVklTSU9OX05VTUJFUjsKICAgIH0K\nCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgW10gYXJncykg\newogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihuZXcgT3BlbkpQQVZlcnNp\nb24oKS50b1N0cmluZygpKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIHRv\nU3RyaW5nKCkgewogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3Ry\naW5nQnVmZmVyKDgwICogMzApOwogICAgICAgIGFwcGVuZE9wZW5KUEFCYW5u\nZXIoYnVmKTsKICAgICAgICBidWYuYXBwZW5kKCJcbiIpOwoKICAgICAgICBh\ncHBlbmRQcm9wZXJ0eSgib3MubmFtZSIsIGJ1ZikuYXBwZW5kKCJcbiIpOwog\nICAgICAgIGFwcGVuZFByb3BlcnR5KCJvcy52ZXJzaW9uIiwgYnVmKS5hcHBl\nbmQoIlxuIik7CiAgICAgICAgYXBwZW5kUHJvcGVydHkoIm9zLmFyY2giLCBi\ndWYpLmFwcGVuZCgiXG5cbiIpOwoKICAgICAgICBhcHBlbmRQcm9wZXJ0eSgi\namF2YS52ZXJzaW9uIiwgYnVmKS5hcHBlbmQoIlxuIik7CiAgICAgICAgYXBw\nZW5kUHJvcGVydHkoImphdmEudmVuZG9yIiwgYnVmKS5hcHBlbmQoIlxuXG4i\nKTsKCiAgICAgICAgYnVmLmFwcGVuZCgiamF2YS5jbGFzcy5wYXRoOlxuIik7\nCiAgICAgICAgU3RyaW5nVG9rZW5pemVyIHRvayA9IG5ldyBTdHJpbmdUb2tl\nbml6ZXIKICAgICAgICAgICAgKChTdHJpbmcpIEFjY2Vzc0NvbnRyb2xsZXIu\nZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIu\nZ2V0UHJvcGVydHlBY3Rpb24oImphdmEuY2xhc3MucGF0aCIpKSwKICAgICAg\nICAgICAgRmlsZS5wYXRoU2VwYXJhdG9yKTsKICAgICAgICB3aGlsZSAodG9r\nLmhhc01vcmVUb2tlbnMoKSkgewogICAgICAgICAgICBidWYuYXBwZW5kKCJc\ndCIpLmFwcGVuZCh0b2submV4dFRva2VuKCkpOwogICAgICAgICAgICBidWYu\nYXBwZW5kKCJcbiIpOwogICAgICAgIH0KICAgICAgICBidWYuYXBwZW5kKCJc\nbiIpOwoKICAgICAgICBhcHBlbmRQcm9wZXJ0eSgidXNlci5kaXIiLCBidWYp\nOwogICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBhcHBlbmRPcGVuSlBBQmFubmVyKFN0cmluZ0J1ZmZlciBi\ndWYpIHsKICAgICAgICBidWYuYXBwZW5kKFZFTkRPUl9OQU1FKS5hcHBlbmQo\nIiAiKTsKICAgICAgICBidWYuYXBwZW5kKFZFUlNJT05fTlVNQkVSKTsKICAg\nICAgICBidWYuYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1Zi5hcHBlbmQoInZl\ncnNpb24gaWQ6ICIpLmFwcGVuZChWRVJTSU9OX0lEKTsKICAgICAgICBidWYu\nYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1Zi5hcHBlbmQoIkFwYWNoZSBzdm4g\ncmV2aXNpb246ICIpLmFwcGVuZChSRVZJU0lPTl9OVU1CRVIpOwogICAgICAg\nIGJ1Zi5hcHBlbmQoIlxuIik7CiAgICB9CgogICAgcHJpdmF0ZSBTdHJpbmdC\ndWZmZXIgYXBwZW5kUHJvcGVydHkoU3RyaW5nIHByb3AsIFN0cmluZ0J1ZmZl\nciBidWYpIHsKICAgICAgICByZXR1cm4gYnVmLmFwcGVuZChwcm9wKS5hcHBl\nbmQoIjogIikKICAgICAgICAgICAgLmFwcGVuZCgoU3RyaW5nKSBBY2Nlc3ND\nb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgIEoyRG9Q\ncml2SGVscGVyLmdldFByb3BlcnR5QWN0aW9uKHByb3ApKSk7CiAgICB9Cn0K\n","encoding":"base64"}

