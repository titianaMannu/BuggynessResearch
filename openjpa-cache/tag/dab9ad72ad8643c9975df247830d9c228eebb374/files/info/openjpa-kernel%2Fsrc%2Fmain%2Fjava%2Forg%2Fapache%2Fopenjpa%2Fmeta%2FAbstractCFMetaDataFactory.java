{"sha":"c770456acc9a6f349e0dd73e9fc6834ea845fef6","node_id":"MDQ6QmxvYjIwNjM2NDpjNzcwNDU2YWNjOWE2ZjM0OWUwZGQ3M2U5ZmM2ODM0ZWE4NDVmZWY2","size":33024,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c770456acc9a6f349e0dd73e9fc6834ea845fef6","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YTsKCmltcG9ydCBqYXZh\nLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLkZpbGVOb3RGb3VuZEV4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlv\nLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJMRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuVVJMOwppbXBvcnQgamF2YS5zZWN1\ncml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Q\ncml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFy\ncmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZh\nLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwpp\nbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSXRl\ncmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRp\nbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2YS51dGls\nLnppcC5aaXBGaWxlOwppbXBvcnQgamF2YS51dGlsLnppcC5aaXBJbnB1dFN0\ncmVhbTsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdV\ndGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5DbGFz\nc0FyZ1BhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0\nYS5DbGFzc3BhdGhNZXRhRGF0YUl0ZXJhdG9yOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5tZXRhLkZpbGVNZXRhRGF0YUl0ZXJhdG9yOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLk1ldGFEYXRhRmlsdGVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLk1ldGFEYXRh\nSXRlcmF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGEu\nTWV0YURhdGFQYXJzZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLm1ldGEuTWV0YURhdGFTZXJpYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi5tZXRhLlJlc291cmNlTWV0YURhdGFJdGVyYXRvcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5VUkxNZXRhRGF0YUl0\nZXJhdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLlpp\ncEZpbGVNZXRhRGF0YUl0ZXJhdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5tZXRhLlppcFN0cmVhbU1ldGFEYXRhSXRlcmF0b3I7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuRmlsZXM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuSjJEb1ByaXZIZWxwZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuR2VuZXJhbEV4Y2VwdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRp\nb247CmltcG9ydCBzZXJwLnV0aWwuU3RyaW5nczsKCi8qKgogKiBCYXNlIGNs\nYXNzIGZvciBmYWN0b3J5IGltcGxlbWVudGF0aW9ucyBidWlsdCBhcm91bmQg\nWE1MIG1ldGFkYXRhIGZpbGVzCiAqIGluIHRoZSBjb21tb24gZm9tYXQuCiAq\nCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBzaW5jZSAwLjQuMAogKi8KcHVi\nbGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0Q0ZNZXRhRGF0YUZhY3RvcnkK\nICAgIGV4dGVuZHMgQWJzdHJhY3RNZXRhRGF0YUZhY3RvcnkgewoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVy\nLmZvclBhY2thZ2UKICAgICAgICAoQWJzdHJhY3RNZXRhRGF0YUZhY3Rvcnku\nY2xhc3MpOwoKICAgIHByb3RlY3RlZCBDb2xsZWN0aW9uIGZpbGVzID0gbnVs\nbDsKICAgIHByb3RlY3RlZCBDb2xsZWN0aW9uIHVybHMgPSBudWxsOwogICAg\ncHJvdGVjdGVkIENvbGxlY3Rpb24gcnNyY3MgPSBudWxsOwogICAgcHJvdGVj\ndGVkIENvbGxlY3Rpb24gY3BhdGggPSBudWxsOwoKICAgIHByaXZhdGUgU2V0\nIF90eXBlTmFtZXMgPSBudWxsOwoKICAgIC8qKgogICAgICogU2V0IG9mIHtA\nbGluayBGaWxlfXMgb2YgbWV0YWRhdGEgZmlsZXMgb3IgZGlyZWN0b3JpZXMg\nc3VwcGxpZWQgYnkgdXNlci4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nRmlsZXMoQ29sbGVjdGlvbiBmaWxlcykgewogICAgICAgIHRoaXMuZmlsZXMg\nPSBmaWxlczsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBvZiBzZW1pY29s\nb24tc2VwYXJhdGVkIHtAbGluayBGaWxlfXMgb2YgbWV0YWRhdGEgZmlsZXMg\nb3IKICAgICAqIGRpcmVjdG9yaWVzIHN1cHBsaWVkIGJ5IHVzZXIgdmlhIGF1\ndG8tY29uZmlndXJhdGlvbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nRmlsZXMoU3RyaW5nIGZpbGVzKSB7CiAgICAgICAgaWYgKFN0cmluZ1V0aWxz\nLmlzRW1wdHkoZmlsZXMpKQogICAgICAgICAgICB0aGlzLmZpbGVzID0gbnVs\nbDsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgU3RyaW5nW10gc3RycyA9\nIFN0cmluZ3Muc3BsaXQoZmlsZXMsICI7IiwgMCk7CiAgICAgICAgICAgIHRo\naXMuZmlsZXMgPSBuZXcgSGFzaFNldCgoaW50KSAoc3Rycy5sZW5ndGggKiAx\nLjMzICsgMSkpOwoKICAgICAgICAgICAgRmlsZSBmaWxlOwogICAgICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IHN0cnMubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgICAgIGZpbGUgPSBuZXcgRmlsZShzdHJzW2ldKTsKICAgICAg\nICAgICAgICAgIGlmICgoKEJvb2xlYW4pIEFjY2Vzc0NvbnRyb2xsZXIuZG9Q\ncml2aWxlZ2VkKAogICAgICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVy\nLmV4aXN0c0FjdGlvbihmaWxlKSkpLmJvb2xlYW5WYWx1ZSgpKQogICAgICAg\nICAgICAgICAgICAgIHRoaXMuZmlsZXMuYWRkKGZpbGUpOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2V0IG9mIHtA\nbGluayBVUkx9cyBvZiBtZXRhZGF0YSBmaWxlcyBvciBqYXJzIHN1cHBsaWVk\nIGJ5IHVzZXIuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFVSTHMoQ29s\nbGVjdGlvbiB1cmxzKSB7CiAgICAgICAgdGhpcy51cmxzID0gdXJsczsKICAg\nIH0KCiAgICAvKioKICAgICAqIFNldCBvZiBzZW1pY29sb24tc2VwYXJhdGVk\nIHtAbGluayBVUkx9cyBvZiBtZXRhZGF0YSBmaWxlcyBvciBqYXJzCiAgICAg\nKiBzdXBwbGllZCBieSB1c2VyIHZpYSBhdXRvLWNvbmZpZ3VyYXRpb24uCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFVSTHMoU3RyaW5nIHVybHMpIHsK\nICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eSh1cmxzKSkKICAgICAg\nICAgICAgdGhpcy51cmxzID0gbnVsbDsKICAgICAgICBlbHNlIHsKICAgICAg\nICAgICAgU3RyaW5nW10gc3RycyA9IFN0cmluZ3Muc3BsaXQodXJscywgIjsi\nLCAwKTsKICAgICAgICAgICAgdGhpcy51cmxzID0gbmV3IEhhc2hTZXQoKGlu\ndCkgKHN0cnMubGVuZ3RoICogMS4zMyArIDEpKTsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3Rycy5s\nZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgICAgICB0aGlzLnVybHMuYWRk\nKG5ldyBVUkwoc3Ryc1tpXSkpOwogICAgICAgICAgICB9IGNhdGNoIChNYWxm\nb3JtZWRVUkxFeGNlcHRpb24gbXVlKSB7CiAgICAgICAgICAgICAgICB0aHJv\ndyBuZXcgVXNlckV4Y2VwdGlvbihtdWUpOwogICAgICAgICAgICB9CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2V0IG9mIHJlc291cmNlIHBh\ndGhzIG9mIG1ldGFkYXRhIGZpbGVzIG9yIGphcnMgc3VwcGxpZWQgYnkgdXNl\nci4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0UmVzb3VyY2VzKENvbGxl\nY3Rpb24gcnNyY3MpIHsKICAgICAgICB0aGlzLnJzcmNzID0gcnNyY3M7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBTZXQgb2Ygc2VtaWNvbG9uLXNlcGFyYXRl\nZCByZXNvdXJjZSBwYXRocyBvZiBtZXRhZGF0YSBmaWxlcyBvciBqYXJzCiAg\nICAgKiBzdXBwbGllZCBieSB1c2VyIHZpYSBhdXRvLWNvbmZpZ3VyYXRpb24u\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFJlc291cmNlcyhTdHJpbmcg\ncnNyY3MpIHsKICAgICAgICAvLyBrZWVwIGxpc3QgbXV0YWJsZSBzbyBzdWJj\nbGFzc2VzIGNhbiBhZGQgaW1wbGljaXQgbG9jYXRpb25zCiAgICAgICAgdGhp\ncy5yc3JjcyA9IChTdHJpbmdVdGlscy5pc0VtcHR5KHJzcmNzKSkgPyBudWxs\nCiAgICAgICAgICAgIDogbmV3IEFycmF5TGlzdChBcnJheXMuYXNMaXN0KFN0\ncmluZ3Muc3BsaXQocnNyY3MsICI7IiwgMCkpKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFNldCBvZiBjbGFzc3BhdGggZGlyZWN0b3JpZXMgb3IgamFycyB0\nbyBzY2FuIGZvciBtZXRhZGF0YSBzdXBwbGllZAogICAgICogYnkgdXNlci4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Q2xhc3NwYXRoU2NhbihDb2xs\nZWN0aW9uIGNwYXRoKSB7CiAgICAgICAgdGhpcy5jcGF0aCA9IGNwYXRoOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0IG9mIGNsYXNzcGF0aCBkaXJlY3Rv\ncmllcyBvciBqYXJzIHRvIHNjYW4gZm9yIG1ldGFkYXRhIHN1cHBsaWVkCiAg\nICAgKiBieSB1c2VyIHZpYSBhdXRvLWNvbmZpZ3VyYXRpb24uCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldENsYXNzcGF0aFNjYW4oU3RyaW5nIGNwYXRo\nKSB7CiAgICAgICAgLy8ga2VlcCBsaXN0IG11dGFibGUgc28gc3ViY2xhc3Nl\ncyBjYW4gYWRkIGltcGxpY2l0IGxvY2F0aW9ucwogICAgICAgIHRoaXMuY3Bh\ndGggPSAoU3RyaW5nVXRpbHMuaXNFbXB0eShjcGF0aCkpID8gbnVsbAogICAg\nICAgICAgICA6IG5ldyBBcnJheUxpc3QoQXJyYXlzLmFzTGlzdChTdHJpbmdz\nLnNwbGl0KGNwYXRoLCAiOyIsIDApKSk7CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gc3RvcmUoQ2xhc3NNZXRhRGF0YVtdIG1ldGFzLCBRdWVyeU1ldGFE\nYXRhW10gcXVlcmllcywKICAgICAgICBTZXF1ZW5jZU1ldGFEYXRhW10gc2Vx\ncywgaW50IG1vZGUsIE1hcCBvdXRwdXQpIHsKICAgICAgICBpZiAobW9kZSA9\nPSBNT0RFX05PTkUpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nIGlmIChpc01hcHBpbmdPbmx5RmFjdG9yeSgpICYmIChtb2RlICYgTU9ERV9N\nQVBQSU5HKSA9PSAwKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAg\nICAgaWYgKCFzdHJpY3QgJiYgKG1vZGUgJiBNT0RFX01FVEEpICE9IDApCiAg\nICAgICAgICAgIG1vZGUgfD0gTU9ERV9NQVBQSU5HOwogICAgICAgIENsYXNz\nIGNscyA9IChtZXRhcy5sZW5ndGggPT0gMCkgPyBudWxsIDogbWV0YXNbMF0u\nZ2V0RGVzY3JpYmVkVHlwZSgpOwogICAgICAgIENsYXNzTG9hZGVyIGxvYWRl\nciA9IHJlcG9zLmdldENvbmZpZ3VyYXRpb24oKS4KICAgICAgICAgICAgZ2V0\nQ2xhc3NSZXNvbHZlckluc3RhbmNlKCkuZ2V0Q2xhc3NMb2FkZXIoY2xzLCBu\ndWxsKTsKICAgICAgICBNYXAgY2xzTmFtZXMgPSBuZXcgSGFzaE1hcCgoaW50\nKSAobWV0YXMubGVuZ3RoICogMS4zMyArIDEpKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IG1ldGFzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBj\nbHNOYW1lcy5wdXQobWV0YXNbaV0uZ2V0RGVzY3JpYmVkVHlwZSgpLmdldE5h\nbWUoKSwgbWV0YXNbaV0pOwoKICAgICAgICAvLyBhc3NpZ24gZGVmYXVsdCBm\naWxlcyBpZiBpbiBtZXRhZGF0YSBtb2RlIChpbiBvdGhlciBtb2RlcyB3ZSBh\nc3N1bWUKICAgICAgICAvLyB0aGUgZmlsZXMgd291bGQgaGF2ZSB0byBiZSBy\nZWFkIGFscmVhZHkgdG8gY3JlYXRlIHRoZSBtZXRhZGF0YXMpCiAgICAgICAg\nU2V0IG1ldGFGaWxlcyA9IG51bGw7CiAgICAgICAgU2V0IHF1ZXJ5RmlsZXMg\nPSBudWxsOwogICAgICAgIGlmIChpc01hcHBpbmdPbmx5RmFjdG9yeSgpIHx8\nIChtb2RlICYgTU9ERV9NRVRBKSAhPSAwKQogICAgICAgICAgICBtZXRhRmls\nZXMgPSBhc3NpZ25EZWZhdWx0TWV0YURhdGFGaWxlcyhtZXRhcywgcXVlcmll\ncywgc2VxcywgbW9kZSwKICAgICAgICAgICAgICAgIGNsc05hbWVzKTsKICAg\nICAgICBpZiAoIWlzTWFwcGluZ09ubHlGYWN0b3J5KCkgJiYgKG1vZGUgJiBN\nT0RFX1FVRVJZKSAhPSAwKQogICAgICAgICAgICBxdWVyeUZpbGVzID0gYXNz\naWduRGVmYXVsdFF1ZXJ5RmlsZXMocXVlcmllcywgY2xzTmFtZXMpOwoKICAg\nICAgICAvLyBwYXJzZSBhbGwgZmlsZXMgdG8gYmUgc3VyZSB3ZSBkb24ndCBk\nZWxldGUgZXhpc3RpbmcgbWV0YWRhdGEgd2hlbgogICAgICAgIC8vIHdyaXRp\nbmcgb3V0IG5ldyBtZXRhZGF0YSwgdGhlbiBzZXJpYWxpemUKICAgICAgICBT\nZXJpYWxpemVyIHNlcjsKICAgICAgICBQYXJzZXIgcGFyc2VyOwogICAgICAg\nIGlmIChtb2RlICE9IE1PREVfUVVFUlkpIHsKICAgICAgICAgICAgaW50IHNl\ncm1vZGUgPSAoaXNNYXBwaW5nT25seUZhY3RvcnkoKSkgPyBtb2RlIDogbW9k\nZSB8IE1PREVfTUVUQTsKICAgICAgICAgICAgaWYgKChtb2RlICYgTU9ERV9B\nTk5fTUFQUElORykgIT0gMCkKICAgICAgICAgICAgICAgIHNlciA9IG5ld0Fu\nbm90YXRpb25TZXJpYWxpemVyKCk7CiAgICAgICAgICAgIGVsc2UKICAgICAg\nICAgICAgICAgIHNlciA9IG5ld1NlcmlhbGl6ZXIoKTsKICAgICAgICAgICAg\nc2VyLnNldE1vZGUoc2VybW9kZSk7CiAgICAgICAgICAgIGlmIChtZXRhRmls\nZXMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFyc2VyID0gbmV3UGFy\nc2VyKGZhbHNlKTsKICAgICAgICAgICAgICAgIHBhcnNlci5zZXRNb2RlKHNl\ncm1vZGUpOwogICAgICAgICAgICAgICAgcGFyc2VyLnNldENsYXNzTG9hZGVy\nKGxvYWRlcik7CiAgICAgICAgICAgICAgICBwYXJzZShwYXJzZXIsIG1ldGFG\naWxlcyk7CgogICAgICAgICAgICAgICAgTWV0YURhdGFSZXBvc2l0b3J5IHBy\nID0gcGFyc2VyLmdldFJlcG9zaXRvcnkoKTsKICAgICAgICAgICAgICAgIHBy\nLnNldFNvdXJjZU1vZGUobW9kZSk7CiAgICAgICAgICAgICAgICBpZiAoaXNN\nYXBwaW5nT25seUZhY3RvcnkoKSkKICAgICAgICAgICAgICAgICAgICBwci5z\nZXRSZXNvbHZlKE1PREVfTk9ORSk7CiAgICAgICAgICAgICAgICBlbHNlCiAg\nICAgICAgICAgICAgICAgICAgcHIuc2V0UmVzb2x2ZShNT0RFX01BUFBJTkcs\nIGZhbHNlKTsKICAgICAgICAgICAgICAgIHNlci5hZGRBbGwocHIpOwogICAg\nICAgICAgICB9CgogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1l\ndGFzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgc2VyLmFkZE1ldGFE\nYXRhKG1ldGFzW2ldKTsKICAgICAgICAgICAgaWYgKChtb2RlICYgTU9ERV9N\nQVBQSU5HKSAhPSAwKQogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBzZXFzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgIHNl\nci5hZGRTZXF1ZW5jZU1ldGFEYXRhKHNlcXNbaV0pOwogICAgICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHF1ZXJpZXMubGVuZ3RoOyBpKyspCiAgICAg\nICAgICAgICAgICBpZiAocXVlcmllc1tpXS5nZXRTb3VyY2VNb2RlKCkgIT0g\nTU9ERV9RVUVSWQogICAgICAgICAgICAgICAgICAgICYmIChxdWVyaWVzW2ld\nLmdldFNvdXJjZU1vZGUoKSAmIG1vZGUpICE9IDApCiAgICAgICAgICAgICAg\nICAgICAgc2VyLmFkZFF1ZXJ5TWV0YURhdGEocXVlcmllc1tpXSk7CgogICAg\nICAgICAgICBpbnQgZmxhZ3MgPSBzZXIuUFJFVFRZOwogICAgICAgICAgICBp\nZiAoKHN0b3JlICYgU1RPUkVfVkVSQk9TRSkgIT0gMCkKICAgICAgICAgICAg\nICAgIGZsYWdzIHw9IHNlci5WRVJCT1NFOwogICAgICAgICAgICBzZXJpYWxp\nemUoc2VyLCBvdXRwdXQsIGZsYWdzKTsKICAgICAgICB9CgogICAgICAgIC8v\nIGRvIHdlIGhhdmUgYW55IHF1ZXJpZXMgc3RvcmVkIGluIHF1ZXJ5IGZpbGVz\nPwogICAgICAgIGlmICghaXNNYXBwaW5nT25seUZhY3RvcnkoKSkgewogICAg\nICAgICAgICBib29sZWFuIHFGaWxlcyA9IHF1ZXJ5RmlsZXMgIT0gbnVsbDsK\nICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7ICFxRmlsZXMgJiYgaSA8IHF1\nZXJpZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBxRmlsZXMgPSBx\ndWVyaWVzW2ldLmdldFNvdXJjZU1vZGUoKSA9PSBNT0RFX1FVRVJZOwogICAg\nICAgICAgICBpZiAocUZpbGVzKSB7CiAgICAgICAgICAgICAgICBpZiAoKG1v\nZGUgJiBNT0RFX0FOTl9NQVBQSU5HKSAhPSAwKQogICAgICAgICAgICAgICAg\nICAgIHNlciA9IG5ld0Fubm90YXRpb25TZXJpYWxpemVyKCk7CiAgICAgICAg\nICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgc2VyID0gbmV3U2Vy\naWFsaXplcigpOwogICAgICAgICAgICAgICAgc2VyLnNldE1vZGUoTU9ERV9R\nVUVSWSk7CiAgICAgICAgICAgICAgICBpZiAocXVlcnlGaWxlcyAhPSBudWxs\nKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyc2VyID0gbmV3UGFyc2VyKGZh\nbHNlKTsKICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2V0TW9kZShNT0RF\nX1FVRVJZKTsKICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2V0Q2xhc3NM\nb2FkZXIobG9hZGVyKTsKICAgICAgICAgICAgICAgICAgICBwYXJzZShwYXJz\nZXIsIHF1ZXJ5RmlsZXMpOwogICAgICAgICAgICAgICAgICAgIHNlci5hZGRB\nbGwocGFyc2VyLmdldFJlcG9zaXRvcnkoKSk7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJpZXMu\nbGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJpZXNb\naV0uZ2V0U291cmNlTW9kZSgpID09IE1PREVfUVVFUlkpCiAgICAgICAgICAg\nICAgICAgICAgICAgIHNlci5hZGRRdWVyeU1ldGFEYXRhKHF1ZXJpZXNbaV0p\nOwogICAgICAgICAgICAgICAgc2VyaWFsaXplKHNlciwgb3V0cHV0LCBzZXIu\nUFJFVFRZKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBkcm9wKENsYXNz\nW10gY2xzLCBpbnQgbW9kZSwgQ2xhc3NMb2FkZXIgZW52TG9hZGVyKSB7CiAg\nICAgICAgaWYgKG1vZGUgPT0gTU9ERV9OT05FKQogICAgICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgICAgICBpZiAoaXNNYXBwaW5nT25seUZhY3RvcnkoKSAm\nJiAobW9kZSAmIE1PREVfTUFQUElORykgPT0gMCkKICAgICAgICAgICAgcmV0\ndXJuIHRydWU7CgogICAgICAgIFBhcnNlciBwYXJzZXIgPSBuZXdQYXJzZXIo\nZmFsc2UpOwogICAgICAgIE1ldGFEYXRhUmVwb3NpdG9yeSBwciA9IHBhcnNl\nci5nZXRSZXBvc2l0b3J5KCk7CiAgICAgICAgcHIuc2V0U291cmNlTW9kZShN\nT0RFX01BUFBJTkcsIGZhbHNlKTsKICAgICAgICBwci5zZXRSZXNvbHZlKE1P\nREVfTUFQUElORywgZmFsc2UpOwoKICAgICAgICAvLyBwYXJzZSBtZXRhZGF0\nYSBmb3IgYWxsIHRoZXNlIGNsYXNzZXMKICAgICAgICBpZiAoKG1vZGUgJiAo\nTU9ERV9NRVRBIHwgTU9ERV9NQVBQSU5HKSkgIT0gMCkgewogICAgICAgICAg\nICBwYXJzZXIuc2V0TW9kZSgoaXNNYXBwaW5nT25seUZhY3RvcnkoKSkgPyBt\nb2RlCiAgICAgICAgICAgICAgICA6IE1PREVfTUVUQSB8IE1PREVfTUFQUElO\nRyB8IE1PREVfUVVFUlkpOwogICAgICAgICAgICBwYXJzZShwYXJzZXIsIGNs\ncyk7CiAgICAgICAgfQogICAgICAgIGlmICghaXNNYXBwaW5nT25seUZhY3Rv\ncnkoKSAmJiAobW9kZSAmIE1PREVfUVVFUlkpICE9IDApIHsKICAgICAgICAg\nICAgcGFyc2VyLnNldE1vZGUoTU9ERV9RVUVSWSk7CiAgICAgICAgICAgIHBh\ncnNlKHBhcnNlciwgY2xzKTsKICAgICAgICB9CgogICAgICAgIC8vIHJlbW92\nZSBtZXRhZGF0YXMgZnJvbSByZXBvc2l0b3J5IG9yIGNsZWFyIHRoZWlyIG1h\ncHBpbmdzCiAgICAgICAgU2V0IGZpbGVzID0gbmV3IEhhc2hTZXQoKTsKICAg\nICAgICBTZXQgY2xzTmFtZXMgPSBudWxsOwogICAgICAgIGlmICgobW9kZSAm\nIChNT0RFX01FVEEgfCBNT0RFX01BUFBJTkcpKSAhPSAwKSB7CiAgICAgICAg\nICAgIGNsc05hbWVzID0gbmV3IEhhc2hTZXQoKGludCkgKGNscy5sZW5ndGgg\nKiAxLjMzICsgMSkpOwogICAgICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGE7\nCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY2xzLmxlbmd0aDsg\naSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoY2xzW2ldID09IG51bGwpCiAg\nICAgICAgICAgICAgICAgICAgY2xzTmFtZXMuYWRkKG51bGwpOwogICAgICAg\nICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGNsc05hbWVzLmFk\nZChjbHNbaV0uZ2V0TmFtZSgpKTsKICAgICAgICAgICAgICAgIG1ldGEgPSBw\nci5nZXRNZXRhRGF0YShjbHNbaV0sIGVudkxvYWRlciwgZmFsc2UpOwogICAg\nICAgICAgICAgICAgaWYgKG1ldGEgIT0gbnVsbCkgewogICAgICAgICAgICAg\nICAgICAgIGlmIChnZXRTb3VyY2VGaWxlKG1ldGEpICE9IG51bGwpCiAgICAg\nICAgICAgICAgICAgICAgICAgIGZpbGVzLmFkZChnZXRTb3VyY2VGaWxlKG1l\ndGEpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoKG1vZGUgJiBNT0RFX01F\nVEEpICE9IDApCiAgICAgICAgICAgICAgICAgICAgICAgIHByLnJlbW92ZU1l\ndGFEYXRhKG1ldGEpOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFp\nc01hcHBpbmdPbmx5RmFjdG9yeSgpKQogICAgICAgICAgICAgICAgICAgICAg\nICBjbGVhck1hcHBpbmcobWV0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIHJlbW92ZSBxdWVyeSBt\nb2RlIG1ldGFkYXRhcyBzbyB3ZSBjYW4gc3RvcmUgdGhlbSBzZXBhcmF0ZWx5\nCiAgICAgICAgUXVlcnlNZXRhRGF0YVtdIHF1ZXJpZXMgPSBwci5nZXRRdWVy\neU1ldGFEYXRhcygpOwogICAgICAgIExpc3QgcXFzID0gKCFpc01hcHBpbmdP\nbmx5RmFjdG9yeSgpICYmIChtb2RlICYgTU9ERV9RVUVSWSkgPT0gMCkKICAg\nICAgICAgICAgPyBudWxsIDogbmV3IEFycmF5TGlzdCgpOwogICAgICAgIGJv\nb2xlYW4gcmVtOwogICAgICAgIENsYXNzIGRlZjsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IHF1ZXJpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgaWYgKCFpc01hcHBpbmdPbmx5RmFjdG9yeSgpICYmIHF1ZXJpZXNbaV0u\nZ2V0U291cmNlRmlsZSgpICE9IG51bGwpCiAgICAgICAgICAgICAgICBmaWxl\ncy5hZGQocXVlcmllc1tpXS5nZXRTb3VyY2VGaWxlKCkpOwogICAgICAgICAg\nICBkZWYgPSBxdWVyaWVzW2ldLmdldERlZmluaW5nVHlwZSgpOwogICAgICAg\nICAgICByZW0gPSAocXVlcmllc1tpXS5nZXRTb3VyY2VNb2RlKCkgJiBtb2Rl\nKSAhPSAwCiAgICAgICAgICAgICAgICAmJiBjbHNOYW1lcy5jb250YWlucygo\nZGVmID09IG51bGwpID8gbnVsbCA6IGRlZi5nZXROYW1lKCkpOwogICAgICAg\nICAgICBpZiAocmVtIHx8ICghaXNNYXBwaW5nT25seUZhY3RvcnkoKQogICAg\nICAgICAgICAgICAgJiYgcXVlcmllc1tpXS5nZXRTb3VyY2VNb2RlKCkgPT0g\nTU9ERV9RVUVSWSkpCiAgICAgICAgICAgICAgICBwci5yZW1vdmVRdWVyeU1l\ndGFEYXRhKHF1ZXJpZXNbaV0pOwogICAgICAgICAgICBpZiAocXFzICE9IG51\nbGwgJiYgcXVlcmllc1tpXS5nZXRTb3VyY2VNb2RlKCkgPT0gTU9ERV9RVUVS\nWSAmJiAhcmVtKQogICAgICAgICAgICAgICAgcXFzLmFkZChxdWVyaWVzW2ld\nKTsKICAgICAgICB9CgogICAgICAgIC8vIHdyaXRlIG5ldyBtZXRhZGF0YSB3\naXRob3V0IHJlbW92ZWQgaW5zdGFuY2VzCiAgICAgICAgYmFja3VwQW5kRGVs\nZXRlKGZpbGVzKTsKICAgICAgICBTZXJpYWxpemVyIHNlcjsKICAgICAgICBp\nZiAoKG1vZGUgJiAoTU9ERV9NRVRBIHwgTU9ERV9NQVBQSU5HKSkgIT0gMCkg\newogICAgICAgICAgICBzZXIgPSBuZXdTZXJpYWxpemVyKCk7CiAgICAgICAg\nICAgIHNlci5zZXRNb2RlKChpc01hcHBpbmdPbmx5RmFjdG9yeSgpKSA/IG1v\nZGUgOiBtb2RlIHwgTU9ERV9NRVRBKTsKICAgICAgICAgICAgc2VyLmFkZEFs\nbChwcik7CiAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIHNlcmlhbGl6ZXIg\ncmF0aGVyIHRoYW4gZnJvbSByZXBvc2l0b3J5IGFib3ZlIHNvIHRoYXQKICAg\nICAgICAgICAgLy8gY2FsbGluZyBjb2RlIGNhbiB0YWtlIGFkdmFudGFnZSBv\nZiBtZXRhZGF0YSBzdGlsbCBpbiByZXBvcwogICAgICAgICAgICBpZiAoaXNN\nYXBwaW5nT25seUZhY3RvcnkoKSkKICAgICAgICAgICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgY2xzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAg\nICAgIHNlci5yZW1vdmVNZXRhRGF0YShwci5nZXRNZXRhRGF0YShjbHNbaV0s\nIGVudkxvYWRlciwKICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UpKTsK\nICAgICAgICAgICAgc2VyaWFsaXplKHNlciwgbnVsbCwgc2VyLlBSRVRUWSk7\nCiAgICAgICAgfQogICAgICAgIGlmIChxcXMgIT0gbnVsbCAmJiAhcXFzLmlz\nRW1wdHkoKSkgewogICAgICAgICAgICBzZXIgPSBuZXdTZXJpYWxpemVyKCk7\nCiAgICAgICAgICAgIHNlci5zZXRNb2RlKE1PREVfUVVFUlkpOwogICAgICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IHFxcy5zaXplKCk7IGkrKykKICAg\nICAgICAgICAgICAgIHNlci5hZGRRdWVyeU1ldGFEYXRhKChRdWVyeU1ldGFE\nYXRhKSBxcXMuZ2V0KGkpKTsKICAgICAgICAgICAgc2VyaWFsaXplKHNlciwg\nbnVsbCwgc2VyLlBSRVRUWSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0\ncnVlOwogICAgfQoKICAgIC8qKgogICAgICogQXNzaWduIGRlZmF1bHQgc291\ncmNlIGZpbGVzIHRvIHRoZSBnaXZlbiBtZXRhZGF0YXMuCiAgICAgKgogICAg\nICogQHBhcmFtIGNsc05hbWVzIG1hcCBvZiBjbGFzcyBuYW1lcyB0byBtZXRh\nZGF0YXMKICAgICAqIEByZXR1cm4gc2V0IG9mIGV4aXN0aW5nIGZpbGVzIHVz\nZWQgYnkgdGhlc2UgbWV0YWRhdGFzLCBvcgogICAgICogbnVsbCBpZiBubyBl\neGlzdGluZyBmaWxlcwogICAgICovCiAgICBwcml2YXRlIFNldCBhc3NpZ25E\nZWZhdWx0TWV0YURhdGFGaWxlcyhDbGFzc01ldGFEYXRhW10gbWV0YXMsCiAg\nICAgICAgUXVlcnlNZXRhRGF0YVtdIHF1ZXJpZXMsIFNlcXVlbmNlTWV0YURh\ndGFbXSBzZXFzLCBpbnQgbW9kZSwKICAgICAgICBNYXAgY2xzTmFtZXMpIHsK\nICAgICAgICBTZXQgZmlsZXMgPSBudWxsOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgbWV0YXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYg\nKGdldFNvdXJjZUZpbGUobWV0YXNbaV0pID09IG51bGwpCiAgICAgICAgICAg\nICAgICBzZXRTb3VyY2VGaWxlKG1ldGFzW2ldLCBkZWZhdWx0U291cmNlRmls\nZShtZXRhc1tpXSkpOwogICAgICAgICAgICBpZiAoKChCb29sZWFuKSBBY2Nl\nc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlcgogICAg\nICAgICAgICAgICAgLmV4aXN0c0FjdGlvbihnZXRTb3VyY2VGaWxlKG1ldGFz\nW2ldKSkpKS5ib29sZWFuVmFsdWUoKSkgewogICAgICAgICAgICAgICAgaWYg\nKGZpbGVzID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBu\nZXcgSGFzaFNldCgpOwogICAgICAgICAgICAgICAgZmlsZXMuYWRkKGdldFNv\ndXJjZUZpbGUobWV0YXNbaV0pKTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJpZXMubGVuZ3RoOyBp\nKyspIHsKICAgICAgICAgICAgaWYgKHF1ZXJpZXNbaV0uZ2V0U291cmNlTW9k\nZSgpID09IE1PREVfUVVFUlkKICAgICAgICAgICAgICAgIHx8IChtb2RlICYg\ncXVlcmllc1tpXS5nZXRTb3VyY2VNb2RlKCkpID09IDApCiAgICAgICAgICAg\nICAgICBjb250aW51ZTsKICAgICAgICAgICAgaWYgKHF1ZXJpZXNbaV0uZ2V0\nU291cmNlRmlsZSgpID09IG51bGwpCiAgICAgICAgICAgICAgICBxdWVyaWVz\nW2ldLnNldFNvdXJjZShkZWZhdWx0U291cmNlRmlsZShxdWVyaWVzW2ldLAog\nICAgICAgICAgICAgICAgICAgIGNsc05hbWVzKSwgcXVlcmllc1tpXS5nZXRT\nb3VyY2VTY29wZSgpLAogICAgICAgICAgICAgICAgICAgIHF1ZXJpZXNbaV0u\nZ2V0U291cmNlVHlwZSgpKTsKICAgICAgICAgICAgaWYgKCgoQm9vbGVhbikg\nQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAg\nICBKMkRvUHJpdkhlbHBlci5leGlzdHNBY3Rpb24ocXVlcmllc1tpXS5nZXRT\nb3VyY2VGaWxlKCkpKSkKICAgICAgICAgICAgICAgIC5ib29sZWFuVmFsdWUo\nKSkgewogICAgICAgICAgICAgICAgaWYgKGZpbGVzID09IG51bGwpCiAgICAg\nICAgICAgICAgICAgICAgZmlsZXMgPSBuZXcgSGFzaFNldCgpOwogICAgICAg\nICAgICAgICAgZmlsZXMuYWRkKHF1ZXJpZXNbaV0uZ2V0U291cmNlRmlsZSgp\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoKG1vZGUg\nJiBNT0RFX01BUFBJTkcpICE9IDApIHsKICAgICAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBzZXFzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAg\nICBpZiAoZ2V0U291cmNlRmlsZShzZXFzW2ldKSA9PSBudWxsKQogICAgICAg\nICAgICAgICAgICAgIHNldFNvdXJjZUZpbGUoc2Vxc1tpXSwgZGVmYXVsdFNv\ndXJjZUZpbGUoc2Vxc1tpXSwKICAgICAgICAgICAgICAgICAgICAgICAgY2xz\nTmFtZXMpKTsKICAgICAgICAgICAgICAgIGlmICgoKEJvb2xlYW4pIEFjY2Vz\nc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgICAg\nIEoyRG9Qcml2SGVscGVyLmV4aXN0c0FjdGlvbihnZXRTb3VyY2VGaWxlKHNl\ncXNbaV0pKSkpCiAgICAgICAgICAgICAgICAgICAgLmJvb2xlYW5WYWx1ZSgp\nKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVzID09IG51bGwpCiAg\nICAgICAgICAgICAgICAgICAgICAgIGZpbGVzID0gbmV3IEhhc2hTZXQoKTsK\nICAgICAgICAgICAgICAgICAgICBmaWxlcy5hZGQoZ2V0U291cmNlRmlsZShz\nZXFzW2ldKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICAgICAgcmV0dXJuIGZpbGVzOwogICAgfQoKICAgIC8qKgog\nICAgICogQXNzaWduIGRlZmF1bHQgc291cmNlIGZpbGVzIHRvIHRoZSBnaXZl\nbiBxdWVyaWVzLgogICAgICoKICAgICAqIEBwYXJhbSBjbHNOYW1lcyBtYXAg\nb2YgY2xhc3MgbmFtZXMgdG8gbWV0YWRhdGFzCiAgICAgKiBAcmV0dXJuIHNl\ndCBvZiBleGlzdGluZyBmaWxlcyB1c2VkIGJ5IHRoZXNlIG1ldGFkYXRhcywg\nb3IKICAgICAqIG51bGwgaWYgbm8gZXhpc3RpbmcgZmlsZXMKICAgICAqLwog\nICAgcHJpdmF0ZSBTZXQgYXNzaWduRGVmYXVsdFF1ZXJ5RmlsZXMoUXVlcnlN\nZXRhRGF0YVtdIHF1ZXJpZXMsCiAgICAgICAgTWFwIGNsc05hbWVzKSB7CiAg\nICAgICAgU2V0IGZpbGVzID0gbnVsbDsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IHF1ZXJpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYg\nKHF1ZXJpZXNbaV0uZ2V0U291cmNlTW9kZSgpICE9IE1PREVfUVVFUlkpCiAg\nICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgaWYgKHF1ZXJp\nZXNbaV0uZ2V0U291cmNlRmlsZSgpID09IG51bGwpCiAgICAgICAgICAgICAg\nICBxdWVyaWVzW2ldLnNldFNvdXJjZShkZWZhdWx0U291cmNlRmlsZShxdWVy\naWVzW2ldLCBjbHNOYW1lcyksCiAgICAgICAgICAgICAgICAgICAgcXVlcmll\nc1tpXS5nZXRTb3VyY2VTY29wZSgpLCBxdWVyaWVzW2ldLmdldFNvdXJjZVR5\ncGUoKSk7CiAgICAgICAgICAgIGlmICgoKEJvb2xlYW4pIEFjY2Vzc0NvbnRy\nb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZI\nZWxwZXIuZXhpc3RzQWN0aW9uKHF1ZXJpZXNbaV0uZ2V0U291cmNlRmlsZSgp\nKSkpCiAgICAgICAgICAgICAgICAuYm9vbGVhblZhbHVlKCkpIHsKICAgICAg\nICAgICAgICAgIGlmIChmaWxlcyA9PSBudWxsKQogICAgICAgICAgICAgICAg\nICAgIGZpbGVzID0gbmV3IEhhc2hTZXQoKTsKICAgICAgICAgICAgICAgIGZp\nbGVzLmFkZChxdWVyaWVzW2ldLmdldFNvdXJjZUZpbGUoKSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZpbGVzOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgdGhpcyBmYWN0b3J5IGRl\nYWxzIG9ubHkgd2l0aCBtYXBwaW5nIGRhdGEsIGFuZCByZWxpZXMKICAgICAq\nIG9uIGEgc2VwYXJhdGUgZmFjdG9yeSBmb3IgbWV0YWRhdGEuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCBib29sZWFuIGlzTWFwcGluZ09ubHlGYWN0b3J5KCkg\newogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFBhcnNlIGFsbCBnaXZlbiBmaWxlcy4KICAgICAqLwogICAgcHJvdGVjdGVk\nIHZvaWQgcGFyc2UoTWV0YURhdGFQYXJzZXIgcGFyc2VyLCBDb2xsZWN0aW9u\nIGZpbGVzKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yIChJdGVy\nYXRvciBpdHIgPSBmaWxlcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykK\nICAgICAgICAgICAgICAgIHBhcnNlci5wYXJzZSgoRmlsZSkgaXRyLm5leHQo\nKSk7CiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAg\nICAgICAgIHRocm93IG5ldyBHZW5lcmFsRXhjZXB0aW9uKGlvZSk7CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogUGFyc2UgYWxsIGdpdmVuIGNs\nYXNzc2VzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBwYXJzZShNZXRh\nRGF0YVBhcnNlciBwYXJzZXIsIENsYXNzW10gY2xzKSB7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjbHMubGVuZ3Ro\nOyBpKyspCiAgICAgICAgICAgICAgICBwYXJzZXIucGFyc2UoY2xzW2ldLCBp\nc1BhcnNlVG9wRG93bigpKTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlv\nbiBpb2UpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEdlbmVyYWxFeGNlcHRp\nb24oaW9lKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0\naGVyIHRvIHBhcnNlIGNsYXNzZXMgdG9wIGRvd24uIERlZmF1bHRzIHRvIGZh\nbHNlLgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBpc1BhcnNlVG9w\nRG93bigpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUZWxsIHRoZSBnaXZlbiBzZXJpYWxpZXIgdG8gd3JpdGUgaXRz\nIG1ldGFkYXRhcy4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgc2VyaWFs\naXplKE1ldGFEYXRhU2VyaWFsaXplciBzZXIsIE1hcCBvdXRwdXQsIGludCBm\nbGFncykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmIChvdXRwdXQg\nPT0gbnVsbCkKICAgICAgICAgICAgICAgIHNlci5zZXJpYWxpemUoZmxhZ3Mp\nOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBzZXIuc2VyaWFs\naXplKG91dHB1dCwgZmxhZ3MpOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0\naW9uIGlvZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgR2VuZXJhbEV4Y2Vw\ndGlvbihpb2UpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEJh\nY2t1cCBhbmQgZGVsZXRlIHRoZSBzb3VyY2UgZmlsZXMgZm9yIHRoZSBnaXZl\nbiBtZXRhZGF0YXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGJhY2t1\ncEFuZERlbGV0ZShDb2xsZWN0aW9uIGZpbGVzKSB7CiAgICAgICAgRmlsZSBm\naWxlOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gZmlsZXMuaXRlcmF0\nb3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgZmlsZSA9IChG\naWxlKSBpdHIubmV4dCgpOwogICAgICAgICAgICBpZiAoRmlsZXMuYmFja3Vw\nKGZpbGUsIGZhbHNlKSAhPSBudWxsKQogICAgICAgICAgICAgICAgQWNjZXNz\nQ29udHJvbGxlcgogICAgICAgICAgICAgICAgICAgIC5kb1ByaXZpbGVnZWQo\nSjJEb1ByaXZIZWxwZXIuZGVsZXRlQWN0aW9uKGZpbGUpKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDbGVhciBtYXBwaW5nIGluZm9ybWF0\naW9uIGZyb20gdGhlIGdpdmVuIG1ldGFkYXRhLgogICAgICovCiAgICBwcm90\nZWN0ZWQgdm9pZCBjbGVhck1hcHBpbmcoQ2xhc3NNZXRhRGF0YSBtZXRhKSB7\nCiAgICAgICAgbWV0YS5zZXRTb3VyY2VNb2RlKE1PREVfTUFQUElORywgZmFs\nc2UpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBjdXJyZW50\nIHNvdXJjZSBmaWxlIG9mIHRoZSBnaXZlbiBtZXRhZGF0YS4KICAgICAqLwog\nICAgcHJvdGVjdGVkIEZpbGUgZ2V0U291cmNlRmlsZShDbGFzc01ldGFEYXRh\nIG1ldGEpIHsKICAgICAgICByZXR1cm4gbWV0YS5nZXRTb3VyY2VGaWxlKCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGN1cnJlbnQgc291cmNl\nIGZpbGUgb2YgdGhlIGdpdmVuIG1ldGFkYXRhLgogICAgICovCiAgICBwcm90\nZWN0ZWQgdm9pZCBzZXRTb3VyY2VGaWxlKENsYXNzTWV0YURhdGEgbWV0YSwg\nRmlsZSBzb3VyY2VGaWxlKSB7CiAgICAgICAgbWV0YS5zZXRTb3VyY2Uoc291\ncmNlRmlsZSwgbWV0YS5nZXRTb3VyY2VUeXBlKCkpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHRoZSBjdXJyZW50IHNvdXJjZSBmaWxlIG9mIHRo\nZSBnaXZlbiBtZXRhZGF0YS4KICAgICAqLwogICAgcHJvdGVjdGVkIEZpbGUg\nZ2V0U291cmNlRmlsZShTZXF1ZW5jZU1ldGFEYXRhIG1ldGEpIHsKICAgICAg\nICByZXR1cm4gbWV0YS5nZXRTb3VyY2VGaWxlKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBTZXQgdGhlIGN1cnJlbnQgc291cmNlIGZpbGUgb2YgdGhlIGdp\ndmVuIG1ldGFkYXRhLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRT\nb3VyY2VGaWxlKFNlcXVlbmNlTWV0YURhdGEgbWV0YSwgRmlsZSBzb3VyY2VG\naWxlKSB7CiAgICAgICAgbWV0YS5zZXRTb3VyY2Uoc291cmNlRmlsZSwgbWV0\nYS5nZXRTb3VyY2VTY29wZSgpLAogICAgICAgICAgICBtZXRhLmdldFNvdXJj\nZVR5cGUoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRl\nZmF1bHQgZmlsZSBmb3IgdGhlIGdpdmVuIG1ldGFkYXRhLgogICAgICovCiAg\nICBwcm90ZWN0ZWQgYWJzdHJhY3QgRmlsZSBkZWZhdWx0U291cmNlRmlsZShD\nbGFzc01ldGFEYXRhIG1ldGEpOwoKICAgIC8qKgogICAgICogUmV0dXJuIGEg\nZGVmYXVsdCBmaWxlIGZvciB0aGUgZ2l2ZW4gcXVlcnkuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBhYnN0cmFjdCBGaWxlIGRlZmF1bHRTb3VyY2VGaWxlKFF1\nZXJ5TWV0YURhdGEgcXVlcnksCiAgICAgICAgTWFwIGNsc05hbWVzKTsKCiAg\nICAvKioKICAgICAqIFJldHVybiBhIGRlZmF1bHQgZmlsZSBmb3IgdGhlIGdp\ndmVuIHNlcXVlbmNlLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qg\nRmlsZSBkZWZhdWx0U291cmNlRmlsZShTZXF1ZW5jZU1ldGFEYXRhIHNlcSwK\nICAgICAgICBNYXAgY2xzTmFtZXMpOwoKICAgIC8qKgogICAgICogQ3JlYXRl\nIGEgbmV3IG1ldGFkYXRhIHBhcnNlci4KICAgICAqCiAgICAgKiBAcGFyYW0g\nbG9hZGluZyBpZiB0cnVlLCB0aGlzIHdpbGwgYmUgdGhlIGNhY2hlZCBwYXJz\nZXIgdXNlZCBmb3IKICAgICAqIGxvYWRpbmcgbWV0YWRhdGEKICAgICAqLwog\nICAgcHJvdGVjdGVkIGFic3RyYWN0IFBhcnNlciBuZXdQYXJzZXIoYm9vbGVh\nbiBsb2FkaW5nKTsKCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyBtZXRh\nZGF0YSBzZXJpYWxpemVyLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJh\nY3QgU2VyaWFsaXplciBuZXdTZXJpYWxpemVyKCk7CgogICAgLyoqCiAgICAg\nKiBDcmVhdGUgYSBuZXcgYW5ub3RhdGlvbiBtZXRhZGF0YSBzZXJpYWxpemVy\nLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgU2VyaWFsaXplciBu\nZXdBbm5vdGF0aW9uU2VyaWFsaXplcigpOwoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSBtZXRhZGF0YSB0aGF0IGRlZmluZXMgdGhlIGdpdmVuIHF1ZXJ5\nLCBpZiBhbnkuCiAgICAgKgogICAgICogQHBhcmFtIGNsc05hbWVzIG1hcCBv\nZiBjbGFzcyBuYW1lcyB0byBtZXRhZGF0YXMKICAgICAqLwogICAgcHJvdGVj\ndGVkIENsYXNzTWV0YURhdGEgZ2V0RGVmaW5pbmdNZXRhRGF0YShRdWVyeU1l\ndGFEYXRhIHF1ZXJ5LAogICAgICAgIE1hcCBjbHNOYW1lcykgewogICAgICAg\nIENsYXNzIGRlZiA9IHF1ZXJ5LmdldERlZmluaW5nVHlwZSgpOwogICAgICAg\nIGlmIChkZWYgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIChDbGFzc01l\ndGFEYXRhKSBjbHNOYW1lcy5nZXQoZGVmLmdldE5hbWUoKSk7CgogICAgICAg\nIE1hcC5FbnRyeSBlbnRyeTsKICAgICAgICBTdHJpbmcgcGtnOwogICAgICAg\nIGZvciAoSXRlcmF0b3IgaXRyID0gY2xzTmFtZXMuZW50cnlTZXQoKS5pdGVy\nYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBlbnRyeSA9\nIChNYXAuRW50cnkpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIHBrZyA9IFN0\ncmluZ3MuZ2V0UGFja2FnZU5hbWUoKFN0cmluZykgZW50cnkuZ2V0S2V5KCkp\nOwogICAgICAgICAgICBpZiAocGtnLmxlbmd0aCgpID09IDApCiAgICAgICAg\nICAgICAgICByZXR1cm4gKENsYXNzTWV0YURhdGEpIGVudHJ5LmdldFZhbHVl\nKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAg\nIHB1YmxpYyBTZXQgZ2V0UGVyc2lzdGVudFR5cGVOYW1lcyhib29sZWFuIGRl\ndnBhdGgsIENsYXNzTG9hZGVyIGVudkxvYWRlcikgewogICAgICAgIC8vIHNv\nbWUgY29uZmlndXJlZCBsb2NhdGlvbnMgbWlnaHQgYmUgaW1wbGljaXQgaW4g\nc3BlYywgc28gcmV0dXJuCiAgICAgICAgLy8gbnVsbCBpZiB3ZSBkb24ndCBm\naW5kIGFueSBjbGFzc2VzLCByYXRoZXIgdGhhbiBpZiB3ZSBkb24ndCBoYXZl\nCiAgICAgICAgLy8gYW55IGxvY2F0aW9ucwogICAgICAgIGlmIChfdHlwZU5h\nbWVzICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiAoX3R5cGVOYW1lcy5p\nc0VtcHR5KCkpID8gbnVsbCA6IF90eXBlTmFtZXM7CgogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIENsYXNzTG9hZGVyIGxvYWRlciA9IHJlcG9zLmdldENv\nbmZpZ3VyYXRpb24oKS4KICAgICAgICAgICAgICAgIGdldENsYXNzUmVzb2x2\nZXJJbnN0YW5jZSgpLmdldENsYXNzTG9hZGVyKGdldENsYXNzKCksCiAgICAg\nICAgICAgICAgICBlbnZMb2FkZXIpOwogICAgICAgICAgICBsb25nIHN0YXJ0\nID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CgogICAgICAgICAgICBT\nZXQgbmFtZXMgPSBwYXJzZVBlcnNpc3RlbnRUeXBlTmFtZXMobG9hZGVyKTsK\nICAgICAgICAgICAgaWYgKG5hbWVzLmlzRW1wdHkoKSAmJiBkZXZwYXRoKQog\nICAgICAgICAgICAgICAgc2NhbihuZXcgQ2xhc3NwYXRoTWV0YURhdGFJdGVy\nYXRvcihudWxsLCBuZXdNZXRhRGF0YUZpbHRlcigpKSwKICAgICAgICAgICAg\nICAgICAgICBuZXdDbGFzc0FyZ1BhcnNlcigpLCBuYW1lcywgZmFsc2UsIG51\nbGwpOwogICAgICAgICAgICBlbHNlIC8vIHdlIGRvbid0IGNhY2hlIGEgZnVs\nbCBkZXYgY3Agc2NhbgogICAgICAgICAgICAgICAgX3R5cGVOYW1lcyA9IG5h\nbWVzOwoKICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQog\nICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJmb3VuZC1wY3Mi\nLCBTdHJpbmcudmFsdWVPZihuYW1lcy5zaXplKCkpLAogICAgICAgICAgICAg\nICAgICAgIFN0cmluZy52YWx1ZU9mKFN5c3RlbS5jdXJyZW50VGltZU1pbGxp\ncygpIC0gc3RhcnQpKSk7CiAgICAgICAgICAgIHJldHVybiAobmFtZXMuaXNF\nbXB0eSgpKSA/IG51bGwgOiBuYW1lczsKICAgICAgICB9IGNhdGNoIChJT0V4\nY2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEdlbmVyYWxF\neGNlcHRpb24oaW9lKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAg\nKiBQYXJzZSBwZXJzaXN0ZW50IHR5cGUgbmFtZXMuCiAgICAgKi8KICAgIHBy\naXZhdGUgU2V0IHBhcnNlUGVyc2lzdGVudFR5cGVOYW1lcyhDbGFzc0xvYWRl\nciBsb2FkZXIpCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAg\nICBDbGFzc0FyZ1BhcnNlciBjcGFyc2VyID0gbmV3Q2xhc3NBcmdQYXJzZXIo\nKTsKICAgICAgICBTdHJpbmdbXSBjbHNzOwogICAgICAgIFNldCBuYW1lcyA9\nIG5ldyBIYXNoU2V0KCk7CiAgICAgICAgaWYgKGZpbGVzICE9IG51bGwpIHsK\nICAgICAgICAgICAgRmlsZSBmaWxlOwogICAgICAgICAgICBmb3IgKEl0ZXJh\ndG9yIGl0ciA9IGZpbGVzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7\nCiAgICAgICAgICAgICAgICBmaWxlID0gKEZpbGUpIGl0ci5uZXh0KCk7CiAg\nICAgICAgICAgICAgICBpZiAoKChCb29sZWFuKSBBY2Nlc3NDb250cm9sbGVy\nLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlcgogICAgICAgICAgICAgICAg\nICAgIC5pc0RpcmVjdG9yeUFjdGlvbihmaWxlKSkpLmJvb2xlYW5WYWx1ZSgp\nKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxl\nZCgpKQogICAgICAgICAgICAgICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5n\nZXQoInNjYW5uaW5nLWRpcmVjdG9yeSIsIGZpbGUpKTsKICAgICAgICAgICAg\nICAgICAgICBzY2FuKG5ldyBGaWxlTWV0YURhdGFJdGVyYXRvcihmaWxlLCBu\nZXdNZXRhRGF0YUZpbHRlcigpKSwKICAgICAgICAgICAgICAgICAgICAgICAg\nY3BhcnNlciwgbmFtZXMsIHRydWUsIGZpbGUpOwogICAgICAgICAgICAgICAg\nfSBlbHNlIGlmIChmaWxlLmdldE5hbWUoKS5lbmRzV2l0aCgiLmphciIpKSB7\nCiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgp\nKQogICAgICAgICAgICAgICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQo\nInNjYW5uaW5nLWphciIsIGZpbGUpKTsKICAgICAgICAgICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgICAgICAgICBaaXBGaWxlIHpGaWxlID0g\nKFppcEZpbGUpIEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIC5kb1ByaXZpbGVnZWQoSjJEb1ByaXZIZWxwZXIKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAubmV3WmlwRmlsZUFjdGlvbihm\naWxlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW4obmV3IFppcEZp\nbGVNZXRhRGF0YUl0ZXJhdG9yKHpGaWxlLAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgbmV3TWV0YURhdGFGaWx0ZXIoKSksIGNwYXJzZXIsIG5hbWVz\nLCB0cnVlLCBmaWxlKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChQ\ncml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uIHBhZSkgewogICAgICAgICAgICAg\nICAgICAgICAgICB0aHJvdyAoSU9FeGNlcHRpb24pIHBhZS5nZXRFeGNlcHRp\nb24oKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVu\nYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9s\nb2MuZ2V0KCJzY2FubmluZy1maWxlIiwgZmlsZSkpOwogICAgICAgICAgICAg\nICAgICAgIGNsc3MgPSBjcGFyc2VyLnBhcnNlVHlwZU5hbWVzKG5ldyBGaWxl\nTWV0YURhdGFJdGVyYXRvcgogICAgICAgICAgICAgICAgICAgICAgICAoZmls\nZSkpOwogICAgICAgICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJs\nZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2Mu\nZ2V0KCJzY2FuLWZvdW5kLW5hbWVzIiwgY2xzcywgZmlsZSkpOwogICAgICAg\nICAgICAgICAgICAgIG5hbWVzLmFkZEFsbChBcnJheXMuYXNMaXN0KGNsc3Mp\nKTsKICAgICAgICAgICAgICAgICAgICBGaWxlIGYgPSAoRmlsZSkgQWNjZXNz\nQ29udHJvbGxlcgogICAgICAgICAgICAgICAgICAgICAgICAuZG9Qcml2aWxl\nZ2VkKEoyRG9Qcml2SGVscGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAuZ2V0QWJzb2x1dGVGaWxlQWN0aW9uKGZpbGUpKTsKICAgICAgICAgICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBtYXBQZXJz\naXN0ZW50VHlwZU5hbWVzKEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIC5kb1ByaXZpbGVnZWQoSjJEb1ByaXZIZWxwZXIu\ndG9VUkxBY3Rpb24oZikpLCBjbHNzKTsKICAgICAgICAgICAgICAgICAgICB9\nIGNhdGNoIChQcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uIHBhZSkgewogICAg\nICAgICAgICAgICAgICAgICAgICB0aHJvdyAoRmlsZU5vdEZvdW5kRXhjZXB0\naW9uKSBwYWUuZ2V0RXhjZXB0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgICAgIFVSTCB1cmw7CiAgICAgICAgaWYgKHVybHMgIT0gbnVsbCkgewog\nICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IHVybHMuaXRlcmF0b3Io\nKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgICAgIHVybCA9IChV\nUkwpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgICAgICBpZiAoImZpbGUiLmVx\ndWFscyh1cmwuZ2V0UHJvdG9jb2woKSkpIHsKICAgICAgICAgICAgICAgICAg\nICBGaWxlIGZpbGUgPSAoRmlsZSkgQWNjZXNzQ29udHJvbGxlcgogICAgICAg\nICAgICAgICAgICAgICAgICAuZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVy\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0QWJzb2x1dGVGaWxl\nQWN0aW9uKG5ldyBGaWxlKHVybC5nZXRGaWxlKCkpKSk7IAogICAgICAgICAg\nICAgICAgICAgIGlmIChmaWxlcyAhPSBudWxsICYmIGZpbGVzLmNvbnRhaW5z\nKGZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwog\nICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKChCb29sZWFuKSBBY2Nl\nc3NDb250cm9sbGVyCiAgICAgICAgICAgICAgICAgICAgICAgIC5kb1ByaXZp\nbGVnZWQoSjJEb1ByaXZIZWxwZXIuaXNEaXJlY3RvcnlBY3Rpb24oZmlsZSkp\nKQogICAgICAgICAgICAgICAgICAgICAgICAuYm9vbGVhblZhbHVlKCkpIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxl\nZCgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9s\nb2MuZ2V0KCJzY2FubmluZy1kaXJlY3RvcnkiLCBmaWxlKSk7CiAgICAgICAg\nICAgICAgICAgICAgICAgIHNjYW4oCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBuZXcgRmlsZU1ldGFEYXRhSXRlcmF0b3IoZmlsZSwgbmV3TWV0YURh\ndGFGaWx0ZXIoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcGFy\nc2VyLCBuYW1lcywgdHJ1ZSwgZmlsZSk7CiAgICAgICAgICAgICAgICAgICAg\nICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICgiamFyIi5lcXVhbHModXJs\nLmdldFByb3RvY29sKCkpCiAgICAgICAgICAgICAgICAgICAgJiYgdXJsLmdl\ndFBhdGgoKS5lbmRzV2l0aCgiIS8iKSkgewogICAgICAgICAgICAgICAgICAg\nIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAg\nICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2FubmluZy1qYXItdXJsIiwg\ndXJsKSk7CiAgICAgICAgICAgICAgICAgICAgc2NhbihuZXcgWmlwRmlsZU1l\ndGFEYXRhSXRlcmF0b3IodXJsLAogICAgICAgICAgICAgICAgICAgICAgICBu\nZXdNZXRhRGF0YUZpbHRlcigpKSwgY3BhcnNlciwgbmFtZXMsIHRydWUsIHVy\nbCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVybC5nZXRQYXRoKCku\nZW5kc1dpdGgoIi5qYXIiKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChs\nb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAg\nbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2FubmluZy1qYXItYXQtdXJsIiwgdXJs\nKSk7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nICAgICAgICAgSW5wdXRTdHJlYW0gaXMgPSAoSW5wdXRTdHJlYW0pCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBBY2Nlc3NDb250cm9sbGVyLmRvUHJp\ndmlsZWdlZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKMkRv\nUHJpdkhlbHBlci5vcGVuU3RyZWFtQWN0aW9uKHVybCkpOwogICAgICAgICAg\nICAgICAgICAgICAgICBzY2FuKG5ldyBaaXBTdHJlYW1NZXRhRGF0YUl0ZXJh\ndG9yKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFppcElucHV0\nU3RyZWFtKGlzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld01l\ndGFEYXRhRmlsdGVyKCkpLCBjcGFyc2VyLCBuYW1lcywgdHJ1ZSwgdXJsKTsK\nICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChQcml2aWxlZ2VkQWN0aW9u\nRXhjZXB0aW9uIHBhZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJv\ndyAoSU9FeGNlcHRpb24pIHBhZS5nZXRFeGNlcHRpb24oKTsKICAgICAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2Fubmlu\nZy11cmwiLCB1cmwpKTsKICAgICAgICAgICAgICAgICAgICBjbHNzID0gY3Bh\ncnNlci5wYXJzZVR5cGVOYW1lcyhuZXcgVVJMTWV0YURhdGFJdGVyYXRvcih1\ncmwpKTsKICAgICAgICAgICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFi\nbGVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy50cmFjZShfbG9j\nLmdldCgic2Nhbi1mb3VuZC1uYW1lcyIsIGNsc3MsIHVybCkpOwogICAgICAg\nICAgICAgICAgICAgIG5hbWVzLmFkZEFsbChBcnJheXMuYXNMaXN0KGNsc3Mp\nKTsKICAgICAgICAgICAgICAgICAgICBtYXBQZXJzaXN0ZW50VHlwZU5hbWVz\nKHVybCwgY2xzcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICAgICAgaWYgKHJzcmNzICE9IG51bGwpIHsKICAgICAg\nICAgICAgU3RyaW5nIHJzcmM7CiAgICAgICAgICAgIE1ldGFEYXRhSXRlcmF0\nb3IgbWl0cjsKICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSByc3Jj\ncy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICAg\nICAgcnNyYyA9IChTdHJpbmcpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgICAg\nICBpZiAocnNyYy5lbmRzV2l0aCgiLmphciIpKSB7CiAgICAgICAgICAgICAg\nICAgICAgdXJsID0gKFVSTCkgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVn\nZWQoCiAgICAgICAgICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdl\ndFJlc291cmNlQWN0aW9uKGxvYWRlciwgcnNyYykpOyAKICAgICAgICAgICAg\nICAgICAgICBpZiAodXJsICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzY2FubmluZy1q\nYXItc3RyZWFtLXVybCIsIHVybCkpOwogICAgICAgICAgICAgICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5wdXRTdHJl\nYW0gaXMgPSAoSW5wdXRTdHJlYW0pCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVy\nLm9wZW5TdHJlYW1BY3Rpb24odXJsKSk7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBzY2FuKG5ldyBaaXBTdHJlYW1NZXRhRGF0YUl0ZXJhdG9yCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5ldyBaaXBJbnB1dFN0\ncmVhbShpcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3\nTWV0YURhdGFGaWx0ZXIoKSksIGNwYXJzZXIsIG5hbWVzLCB0cnVlLAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCk7CiAgICAgICAgICAg\nICAgICAgICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRBY3Rpb25FeGNlcHRp\nb24gcGFlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAo\nSU9FeGNlcHRpb24pIHBhZS5nZXRFeGNlcHRpb24oKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZy5p\nc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgICAgICBsb2cu\ndHJhY2UoX2xvYy5nZXQoInNjYW5uaW5nLXJlc291cmNlIiwgcnNyYykpOwog\nICAgICAgICAgICAgICAgICAgIG1pdHIgPSBuZXcgUmVzb3VyY2VNZXRhRGF0\nYUl0ZXJhdG9yKHJzcmMsIGxvYWRlcik7CiAgICAgICAgICAgICAgICAgICAg\nd2hpbGUgKG1pdHIuaGFzTmV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgIHVybCA9IChVUkwpIG1pdHIubmV4dCgpOwogICAgICAgICAgICAgICAg\nICAgICAgICBjbHNzID0gY3BhcnNlci5wYXJzZVR5cGVOYW1lcyhuZXcgVVJM\nTWV0YURhdGFJdGVyYXRvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nKHVybCkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9nLmlzVHJh\nY2VFbmFibGVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cu\ndHJhY2UoX2xvYy5nZXQoInNjYW4tZm91bmQtbmFtZXMiLCBjbHNzLCByc3Jj\nKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzLmFkZEFsbChBcnJh\neXMuYXNMaXN0KGNsc3MpKTsKICAgICAgICAgICAgICAgICAgICAgICAgbWFw\nUGVyc2lzdGVudFR5cGVOYW1lcyh1cmwsIGNsc3MpOwogICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBtaXRyLmNsb3NlKCk7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAg\nICAgaWYgKGNwYXRoICE9IG51bGwpIHsKICAgICAgICAgICAgU3RyaW5nW10g\nZGlycyA9IChTdHJpbmdbXSkgY3BhdGgudG9BcnJheShuZXcgU3RyaW5nW2Nw\nYXRoLnNpemUoKV0pOwogICAgICAgICAgICBzY2FuKG5ldyBDbGFzc3BhdGhN\nZXRhRGF0YUl0ZXJhdG9yKGRpcnMsIG5ld01ldGFEYXRhRmlsdGVyKCkpLAog\nICAgICAgICAgICAgICAgY3BhcnNlciwgbmFtZXMsIHRydWUsIGRpcnMpOwog\nICAgICAgIH0KICAgICAgICBpZiAodHlwZXMgIT0gbnVsbCkKICAgICAgICAg\nICAgbmFtZXMuYWRkQWxsKHR5cGVzKTsKCiAgICAgICAgaWYgKGxvZy5pc1Ry\nYWNlRW5hYmxlZCgpKQogICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQo\nInBhcnNlLWZvdW5kLW5hbWVzIiwgbmFtZXMpKTsKICAgICAgICAKICAgICAg\nICByZXR1cm4gbmFtZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTY2FuIGZv\nciBwZXJzaXN0ZW50IHR5cGUgbmFtZXMgdXNpbmcgdGhlIGdpdmVuIG1ldGFk\nYXRhIGl0ZXJhdG9yLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgc2NhbihN\nZXRhRGF0YUl0ZXJhdG9yIG1pdHIsIENsYXNzQXJnUGFyc2VyIGNwYXJzZXIs\nIFNldCBuYW1lcywKICAgICAgICBib29sZWFuIG1hcE5hbWVzLCBPYmplY3Qg\nZGVidWdDb250ZXh0KQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgTWFwIG1hcDsKICAgICAgICB0cnkgewogICAgICAgICAgICBtYXAg\nPSBjcGFyc2VyLm1hcFR5cGVOYW1lcyhtaXRyKTsKICAgICAgICB9IGZpbmFs\nbHkgewogICAgICAgICAgICBtaXRyLmNsb3NlKCk7CiAgICAgICAgfQoKICAg\nICAgICBNYXAuRW50cnkgZW50cnk7CiAgICAgICAgZm9yIChJdGVyYXRvciBp\ndHIgPSBtYXAuZW50cnlTZXQoKS5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgp\nOykgewogICAgICAgICAgICBlbnRyeSA9IChNYXAuRW50cnkpIGl0ci5uZXh0\nKCk7CiAgICAgICAgICAgIGlmIChtYXBOYW1lcykKICAgICAgICAgICAgICAg\nIG1hcFBlcnNpc3RlbnRUeXBlTmFtZXMoZW50cnkuZ2V0S2V5KCksIChTdHJp\nbmdbXSkKICAgICAgICAgICAgICAgICAgICBlbnRyeS5nZXRWYWx1ZSgpKTsK\nICAgICAgICAgICAgTGlzdCBuZXdOYW1lcyA9IEFycmF5cy5hc0xpc3QoKFN0\ncmluZ1tdKSBlbnRyeS5nZXRWYWx1ZSgpKTsKICAgICAgICAgICAgaWYgKGxv\nZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgbG9nLnRyYWNl\nKF9sb2MuZ2V0KCJzY2FuLWZvdW5kLW5hbWVzIiwgbmV3TmFtZXMsIGRlYnVn\nQ29udGV4dCkpOwogICAgICAgICAgICBuYW1lcy5hZGRBbGwobmV3TmFtZXMp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEltcGxlbWVudCB0\naGlzIG1ldGhvZCB0byBtYXAgbWV0YWRhdGEgcmVzb3VyY2VzIHRvIHRoZSBw\nZXJzaXN0ZW50CiAgICAgKiB0eXBlcyBjb250YWluZWQgd2l0aGluIHRoZW0u\nIFRoZSBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgd2hlbgogICAgICoge0BsaW5r\nICNnZXRQZXJzaXN0ZW50VHlwZU5hbWVzfSBpcyBpbnZva2VkLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgdm9pZCBtYXBQZXJzaXN0ZW50VHlwZU5hbWVzKE9i\namVjdCByc3JjLCBTdHJpbmdbXSBuYW1lcykgewogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIGEgbWV0YWRhdGEgZmlsdGVyIHRoYXQgaWRlbnRpZmll\ncyBtZXRhZGF0YSByZXNvdXJjZXMgd2hlbgogICAgICogcGVyZm9ybWluZyBq\nYXIgYW5kIGNsYXNzcGF0aCBzY2Fucy4KICAgICAqLwogICAgcHJvdGVjdGVk\nIGFic3RyYWN0IE1ldGFEYXRhRmlsdGVyIG5ld01ldGFEYXRhRmlsdGVyKCk7\nCgogICAgcHVibGljIHZvaWQgY2xlYXIoKSB7CiAgICAgICAgc3VwZXIuY2xl\nYXIoKTsKICAgICAgICBfdHlwZU5hbWVzID0gbnVsbDsKICAgIH0KCiAgICAv\nKioKICAgICAqIEludGVybmFsIHBhcnNlciBpbnRlcmZhY2UuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgaW50ZXJmYWNlIFBhcnNlcgogICAgICAgIGV4\ndGVuZHMgTWV0YURhdGFQYXJzZXIgewoKICAgICAgICAvKioKICAgICAgICAg\nKiBSZXR1cm5zIHRoZSByZXBvc2l0b3J5IGZvciB0aGlzIHBhcnNlci4gSWYg\nbm9uZSBoYXMgYmVlbiBzZXQsCiAgICAgICAgICogY3JlYXRlcyBhIG5ldyBy\nZXBvc2l0b3J5IGFuZCBzZXRzIGl0LgogICAgICAgICAqLwogICAgICAgIHB1\nYmxpYyBNZXRhRGF0YVJlcG9zaXRvcnkgZ2V0UmVwb3NpdG9yeSgpOwoKICAg\nICAgICAvKioKICAgICAgICAgKiBUaGUgcGFyc2UgbW9kZSBhY2NvcmRpbmcg\ndG8gdGhlIGV4cGVjdGVkIGRvY3VtZW50IHR5cGUuCiAgICAgICAgICovCiAg\nICAgICAgcHVibGljIHZvaWQgc2V0TW9kZShpbnQgbW9kZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBJbnRlcm5hbCBzZXJpYWxpemVyIGludGVyZmFjZS4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyBpbnRlcmZhY2UgU2VyaWFsaXpl\ncgogICAgICAgIGV4dGVuZHMgTWV0YURhdGFTZXJpYWxpemVyIHsKCiAgICAg\nICAgLyoqCiAgICAgICAgICogVGhlIHNlcmlhbGl6YXRpb24gbW9kZSBhY2Nv\ncmRpbmcgdG8gdGhlIGV4cGVjdGVkIGRvY3VtZW50IHR5cGUuIFRoZQogICAg\nICAgICAqIG1vZGUgY29uc3RhbnRzIGFjdCBhcyBiaXQgZmxhZ3MsIGFuZCB0\naGVyZWZvcmUgY2FuIGJlIGNvbWJpbmVkLgogICAgICAgICAqLwogICAgICAg\nIHB1YmxpYyB2b2lkIHNldE1vZGUoaW50IG1vZGUpOwoKICAgICAgICAvKioK\nICAgICAgICAgKiBBZGQgYSBjbGFzcyBtZXRhIGRhdGEgdG8gdGhlIHNldCB0\nbyBiZSBzZXJpYWxpemVkLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB2\nb2lkIGFkZE1ldGFEYXRhKENsYXNzTWV0YURhdGEgbWV0YSk7CgogICAgICAg\nIC8qKgogICAgICAgICAqIFJlbW92ZSBhIGNsYXNzIG1ldGEgZGF0YSBmcm9t\nIHRoZSBzZXQgdG8gYmUgc2VyaWFsaXplZC4KICAgICAgICAgKi8KICAgICAg\nICBwdWJsaWMgYm9vbGVhbiByZW1vdmVNZXRhRGF0YShDbGFzc01ldGFEYXRh\nIG1ldGEpOwoKICAgICAgICAvKioKICAgICAgICAgKiBBZGQgYSBzZXF1ZW5j\nZSBtZXRhIGRhdGEgdG8gdGhlIHNldCB0byBiZSBzZXJpYWxpemVkLgogICAg\nICAgICAqLwogICAgICAgIHB1YmxpYyB2b2lkIGFkZFNlcXVlbmNlTWV0YURh\ndGEoU2VxdWVuY2VNZXRhRGF0YSBtZXRhKTsKCiAgICAgICAgLyoqCiAgICAg\nICAgICogQWRkIGEgcXVlcnkgbWV0YSBkYXRhIHRvIHRoZSBzZXQgdG8gYmUg\nc2VyaWFsaXplZC4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdm9pZCBh\nZGRRdWVyeU1ldGFEYXRhKFF1ZXJ5TWV0YURhdGEgbWV0YSk7CgogICAgICAg\nIC8qKgogICAgICAgICAqIEFkZCBhbGwgY29tcG9uZW50cyBpbiB0aGUgZ2l2\nZW4gcmVwb3NpdG9yeSB0byB0aGUgc2V0IHRvIGJlCiAgICAgICAgICogc2Vy\naWFsaXplZC4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdm9pZCBhZGRB\nbGwgKE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyk7CiAgICB9Cn0K\n","encoding":"base64"}

