{"sha":"53fa96c2167f28ba218a810de75e22d1ee86a412","node_id":"MDQ6QmxvYjIwNjM2NDo1M2ZhOTZjMjE2N2YyOGJhMjE4YTgxMGRlNzVlMjJkMWVlODZhNDEy","size":33781,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/53fa96c2167f28ba218a810de75e22d1ee86a412","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLmlvLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1wb3J0\nIGphdmEuc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEudXRpbC5BYnN0cmFj\ndE1hcDsKaW1wb3J0IGphdmEudXRpbC5BYnN0cmFjdFNlcXVlbnRpYWxMaXN0\nOwppbXBvcnQgamF2YS51dGlsLkFic3RyYWN0U2V0OwppbXBvcnQgamF2YS51\ndGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5DYWxlbmRhcjsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkNv\nbXBhcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsKaW1wb3J0IGphdmEu\ndXRpbC5HcmVnb3JpYW5DYWxlbmRhcjsKaW1wb3J0IGphdmEudXRpbC5IYXNo\nTWFwOwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0\naWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsKaW1w\nb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3RJdGVy\nYXRvcjsKaW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwu\nUHJvcGVydGllczsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZh\nLnV0aWwuU29ydGVkTWFwOwppbXBvcnQgamF2YS51dGlsLlNvcnRlZFNldDsK\naW1wb3J0IGphdmEudXRpbC5UaW1lWm9uZTsKaW1wb3J0IGphdmEudXRpbC5U\ncmVlU2V0OwppbXBvcnQgamF2YS51dGlsLlRyZWVNYXA7CmltcG9ydCBqYXZh\nLnV0aWwuVmVjdG9yOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGls\nLlByb3h5OwppbXBvcnQganVuaXQuZnJhbWV3b3JrLlRlc3RDYXNlOwppbXBv\ncnQganVuaXQudGV4dHVpLlRlc3RSdW5uZXI7CgovKioKICogVGVzdCBwcm94\naWVzIGdlbmVyYXRlZCBieSB0aGUgcHJveHkgbWFuYWdlci4KICoKICogQGF1\ndGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBUZXN0UHJveHlNYW5h\nZ2VyCiAgICBleHRlbmRzIFRlc3RDYXNlIHsKCiAgICBwcml2YXRlIFByb3h5\nTWFuYWdlckltcGwgX21ncjsKCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsK\nICAgICAgICBfbWdyID0gbmV3IFByb3h5TWFuYWdlckltcGwoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29weUxpc3RzKCkgewogICAgICAgIExp\nc3Qgb3JpZyA9IG5ldyBBcnJheUxpc3QoKTsKICAgICAgICBwb3B1bGF0ZShv\ncmlnKTsKICAgICAgICBhc3NlcnRMaXN0c0VxdWFsKG9yaWcsIChMaXN0KSBf\nbWdyLmNvcHlDb2xsZWN0aW9uKG9yaWcpKTsKCiAgICAgICAgb3JpZyA9IG5l\ndyBMaW5rZWRMaXN0KCk7CiAgICAgICAgcG9wdWxhdGUob3JpZyk7CiAgICAg\nICAgYXNzZXJ0TGlzdHNFcXVhbChvcmlnLCAoTGlzdCkgX21nci5jb3B5Q29s\nbGVjdGlvbihvcmlnKSk7CgogICAgICAgIG9yaWcgPSBuZXcgQ3VzdG9tTGlz\ndCgpOwogICAgICAgIHBvcHVsYXRlKG9yaWcpOwogICAgICAgIGFzc2VydExp\nc3RzRXF1YWwob3JpZywgKExpc3QpIF9tZ3IuY29weUNvbGxlY3Rpb24ob3Jp\nZykpOwogICAgfQoKICAgIC8qKgogICAgICogUG9wdWxhdGUgdGhlIGdpdmVu\nIGxpc3Qgd2l0aCBhcmJpdHJhcnkgZGF0YS4KICAgICAqLwogICAgcHJpdmF0\nZSBzdGF0aWMgdm9pZCBwb3B1bGF0ZShDb2xsZWN0aW9uIGNvbGwpIHsKICAg\nICAgICBjb2xsLmFkZChuZXcgSW50ZWdlcigxKSk7CiAgICAgICAgY29sbC5h\nZGQoImZvbyIpOwogICAgICAgIGNvbGwuYWRkKG5ldyBMb25nKDk5KSk7CiAg\nICAgICAgY29sbC5hZGQoImJhciIpOwogICAgICAgIGNvbGwuYWRkKG5ldyBT\naG9ydCgoc2hvcnQpIDUwKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBc3Nl\ncnQgdGhhdCB0aGUgZ2l2ZW4gbGlzdHMgYXJlIGV4YWN0bHkgdGhlIHNhbWUu\nCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIHZvaWQgYXNzZXJ0TGlzdHNF\ncXVhbChMaXN0IGwxLCBMaXN0IGwyKSB7CiAgICAgICAgYXNzZXJ0VHJ1ZShs\nMS5nZXRDbGFzcygpID09IGwyLmdldENsYXNzKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhsMS5zaXplKCksIGwyLnNpemUoKSk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBsMS5zaXplKCk7IGkrKykKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZShsMS5nZXQoaSkgKyAiICE9ICIgKyBsMi5nZXQoaSksIGwxLmdl\ndChpKSA9PSBsMi5nZXQoaSkpOwogICAgfSAgCgogICAgcHVibGljIHZvaWQg\ndGVzdENvcHlTZXRzKCkgewogICAgICAgIFNldCBvcmlnID0gbmV3IEhhc2hT\nZXQoKTsKICAgICAgICBwb3B1bGF0ZShvcmlnKTsKICAgICAgICBhc3NlcnRT\nZXRzRXF1YWwob3JpZywgKFNldCkgX21nci5jb3B5Q29sbGVjdGlvbihvcmln\nKSk7CiAgICAgICAgCiAgICAgICAgb3JpZyA9IG5ldyBDdXN0b21TZXQoKTsK\nICAgICAgICBwb3B1bGF0ZShvcmlnKTsKICAgICAgICBhc3NlcnRTZXRzRXF1\nYWwob3JpZywgKFNldCkgX21nci5jb3B5Q29sbGVjdGlvbihvcmlnKSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBBc3NlcnQgdGhhdCB0aGUgZ2l2ZW4gc2V0\ncyBhcmUgZXhhY3RseSB0aGUgc2FtZS4KICAgICAqLwogICAgcHJpdmF0ZSBz\ndGF0aWMgdm9pZCBhc3NlcnRTZXRzRXF1YWwoU2V0IHMxLCBTZXQgczIpIHsK\nICAgICAgICBhc3NlcnRUcnVlKHMxLmdldENsYXNzKCkgPT0gczIuZ2V0Q2xh\nc3MoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHMxLnNpemUoKSwgczIuc2l6\nZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoczEsIHMyKTsKICAgIH0gIAoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RDb3B5U29ydGVkU2V0cygpIHsKICAgICAg\nICBTb3J0ZWRTZXQgb3JpZyA9IG5ldyBUcmVlU2V0KCk7CiAgICAgICAgcG9w\ndWxhdGUob3JpZyk7CiAgICAgICAgYXNzZXJ0U29ydGVkU2V0c0VxdWFsKG9y\naWcsIChTb3J0ZWRTZXQpIF9tZ3IuY29weUNvbGxlY3Rpb24ob3JpZykpOwoK\nICAgICAgICBvcmlnID0gbmV3IFRyZWVTZXQobmV3IEN1c3RvbUNvbXBhcmF0\nb3IoKSk7CiAgICAgICAgcG9wdWxhdGUob3JpZyk7CiAgICAgICAgYXNzZXJ0\nU29ydGVkU2V0c0VxdWFsKG9yaWcsIChTb3J0ZWRTZXQpIF9tZ3IuY29weUNv\nbGxlY3Rpb24ob3JpZykpOwogICAgICAgIAogICAgICAgIG9yaWcgPSBuZXcg\nQ3VzdG9tU29ydGVkU2V0KCk7CiAgICAgICAgcG9wdWxhdGUob3JpZyk7CiAg\nICAgICAgYXNzZXJ0U29ydGVkU2V0c0VxdWFsKG9yaWcsIChTb3J0ZWRTZXQp\nIF9tZ3IuY29weUNvbGxlY3Rpb24ob3JpZykpOwoKICAgICAgICBvcmlnID0g\nbmV3IEN1c3RvbUNvbXBhcmF0b3JTb3J0ZWRTZXQobmV3IEN1c3RvbUNvbXBh\ncmF0b3IoKSk7CiAgICAgICAgcG9wdWxhdGUob3JpZyk7CiAgICAgICAgYXNz\nZXJ0U29ydGVkU2V0c0VxdWFsKG9yaWcsIChTb3J0ZWRTZXQpIF9tZ3IuY29w\neUNvbGxlY3Rpb24ob3JpZykpOwogICAgfQoKICAgIC8qKgogICAgICogUG9w\ndWxhdGUgdGhlIGdpdmVuIHNvcnRlZCBzZXQgd2l0aCBhcmJpdHJhcnkgZGF0\nYS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBwb3B1bGF0ZShT\nb3J0ZWRTZXQgY29sbCkgewogICAgICAgIGNvbGwuYWRkKG5ldyBJbnRlZ2Vy\nKDEpKTsKICAgICAgICBjb2xsLmFkZChuZXcgSW50ZWdlcig5OSkpOwogICAg\nICAgIGNvbGwuYWRkKG5ldyBJbnRlZ2VyKDUwKSk7CiAgICAgICAgY29sbC5h\nZGQobmV3IEludGVnZXIoLTUpKTsKICAgICAgICBjb2xsLmFkZChuZXcgSW50\nZWdlcigxMCkpOwogICAgfQoKICAgIC8qKgogICAgICogQXNzZXJ0IHRoYXQg\ndGhlIGdpdmVuIHNldHMgYXJlIGV4YWN0bHkgdGhlIHNhbWUuCiAgICAgKi8K\nICAgIHByaXZhdGUgc3RhdGljIHZvaWQgYXNzZXJ0U29ydGVkU2V0c0VxdWFs\nKFNvcnRlZFNldCBzMSwgU29ydGVkU2V0IHMyKSB7CiAgICAgICAgYXNzZXJ0\nVHJ1ZShzMS5nZXRDbGFzcygpID09IHMyLmdldENsYXNzKCkpOwogICAgICAg\nIGFzc2VydFNvcnRlZFNldHNFcXVhbHMoczEsIHMyKTsKICAgIH0gIAoKICAg\nIC8qKgogICAgICogQXNzZXJ0IHRoYXQgdGhlIGdpdmVuIHNldHMgYXJlIGV4\nYWN0bHkgdGhlIHNhbWUgKG1pbnVzIHRoZSBjbGFzcykuCiAgICAgKi8KICAg\nIHByaXZhdGUgc3RhdGljIHZvaWQgYXNzZXJ0U29ydGVkU2V0c0VxdWFscyhT\nb3J0ZWRTZXQgczEsIFNvcnRlZFNldCBzMikgewogICAgICAgIGFzc2VydEVx\ndWFscyhzMS5jb21wYXJhdG9yKCksIHMyLmNvbXBhcmF0b3IoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKHMxLnNpemUoKSwgczIuc2l6ZSgpKTsKICAgICAg\nICBJdGVyYXRvciBpdHIxID0gczEuaXRlcmF0b3IoKTsKICAgICAgICBJdGVy\nYXRvciBpdHIyID0gczIuaXRlcmF0b3IoKTsKICAgICAgICB3aGlsZSAoaXRy\nMS5oYXNOZXh0KCkpCiAgICAgICAgICAgIGFzc2VydFRydWUoaXRyMS5uZXh0\nKCkgPT0gaXRyMi5uZXh0KCkpOwogICAgICAgIGFzc2VydFRydWUoczEuZXF1\nYWxzKHMyKSk7CiAgICB9ICAKCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29weU51\nbGxDb2xsZWN0aW9uKCkgewogICAgICAgIGFzc2VydE51bGwoX21nci5jb3B5\nQ29sbGVjdGlvbihudWxsKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndENvcHlQcm94eUNvbGxlY3Rpb24oKSB7CiAgICAgICAgTGlzdCBvcmlnID0g\nKExpc3QpIF9tZ3IubmV3Q29sbGVjdGlvblByb3h5KEFycmF5TGlzdC5jbGFz\ncywgbnVsbCwgbnVsbCk7CiAgICAgICAgcG9wdWxhdGUob3JpZyk7CiAgICAg\nICAgYXNzZXJ0TGlzdHNFcXVhbChuZXcgQXJyYXlMaXN0KG9yaWcpLCAoTGlz\ndCkgX21nci5jb3B5Q29sbGVjdGlvbihvcmlnKSk7CgogICAgICAgIFRyZWVT\nZXQgdG9yaWcgPSAoVHJlZVNldCkgX21nci5uZXdDb2xsZWN0aW9uUHJveHko\nVHJlZVNldC5jbGFzcywgbnVsbCwgCiAgICAgICAgICAgIG5ldyBDdXN0b21D\nb21wYXJhdG9yKCkpOwogICAgICAgIGFzc2VydFRydWUodG9yaWcuY29tcGFy\nYXRvcigpIGluc3RhbmNlb2YgQ3VzdG9tQ29tcGFyYXRvcik7CiAgICAgICAg\ncG9wdWxhdGUodG9yaWcpOwogICAgICAgIGFzc2VydFNvcnRlZFNldHNFcXVh\nbChuZXcgVHJlZVNldCh0b3JpZyksIChTb3J0ZWRTZXQpIAogICAgICAgICAg\nICBfbWdyLmNvcHlDb2xsZWN0aW9uKHRvcmlnKSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdENsb25lUHJveHlDb2xsZWN0aW9uKCkgewogICAgICAg\nIC8vIExpc3QgZG9lc24ndCBzdXBwb3J0IGNsb25lKCkKICAgICAgICAKICAg\nICAgICBUcmVlU2V0IHRvcmlnID0gKFRyZWVTZXQpIF9tZ3IubmV3Q29sbGVj\ndGlvblByb3h5KFRyZWVTZXQuY2xhc3MsIG51bGwsIAogICAgICAgICAgICBu\nZXcgQ3VzdG9tQ29tcGFyYXRvcigpKTsKICAgICAgICBhc3NlcnRUcnVlKHRv\ncmlnLmNvbXBhcmF0b3IoKSBpbnN0YW5jZW9mIEN1c3RvbUNvbXBhcmF0b3Ip\nOwogICAgICAgIHBvcHVsYXRlKHRvcmlnKTsKICAgICAgICBhc3NlcnRTb3J0\nZWRTZXRzRXF1YWxzKG5ldyBUcmVlU2V0KHRvcmlnKSwgKFNvcnRlZFNldCkg\ndG9yaWcuY2xvbmUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdExp\nc3RNZXRob2RzUHJveGllZCgpIAogICAgICAgIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIENsYXNzIHByb3h5ID0gX21nci5uZXdDb2xsZWN0aW9uUHJv\neHkoQXJyYXlMaXN0LmNsYXNzLCBudWxsLCBudWxsKS4KICAgICAgICAgICAg\nZ2V0Q2xhc3MoKTsKICAgICAgICBhc3NlcnRMaXN0TWV0aG9kc1Byb3hpZWQo\ncHJveHkpOwoKICAgICAgICBwcm94eSA9IF9tZ3IubmV3Q29sbGVjdGlvblBy\nb3h5KEN1c3RvbUxpc3QuY2xhc3MsIG51bGwsIG51bGwpLgogICAgICAgICAg\nICBnZXRDbGFzcygpOwogICAgICAgIGFzc2VydExpc3RNZXRob2RzUHJveGll\nZChwcm94eSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBc3NlcnQgdGhhdCB0\naGUgbWV0aG9kcyB3ZSBuZWVkIHRvIG92ZXJyaWRlIHRvIGRpcnR5IHRoZSBj\nb2xsZWN0aW9uIGFyZQogICAgICogcHJveGllZCBhcHByb3ByaWF0ZWx5Lgog\nICAgICovCiAgICBwcml2YXRlIHZvaWQgYXNzZXJ0Q29sbGVjdGlvbk1ldGhv\nZHNQcm94aWVkKENsYXNzIGNscykgCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRo\nb2QoImFkZCIsIG5ldyBDbGFzc1tdIHtPYmplY3QuY2xhc3N9KSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRob2QoImFkZEFs\nbCIsIAogICAgICAgICAgICBuZXcgQ2xhc3NbXSB7Q29sbGVjdGlvbi5jbGFz\nc30pKTsgCiAgICAgICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRN\nZXRob2QoImNsZWFyIiwgKENsYXNzW10pIG51bGwpKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKGNscy5nZXREZWNsYXJlZE1ldGhvZCgiaXRlcmF0b3IiLCAo\nQ2xhc3NbXSkgbnVsbCkpOwogICAgICAgIGFzc2VydE5vdE51bGwoY2xzLmdl\ndERlY2xhcmVkTWV0aG9kKCJyZW1vdmUiLCAKICAgICAgICAgICAgbmV3IENs\nYXNzW10ge09iamVjdC5jbGFzc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKGNscy5nZXREZWNsYXJlZE1ldGhvZCgicmVtb3ZlQWxsIiwgCiAgICAgICAg\nICAgIG5ldyBDbGFzc1tdIHtDb2xsZWN0aW9uLmNsYXNzfSkpOwogICAgICAg\nIGFzc2VydE5vdE51bGwoY2xzLmdldERlY2xhcmVkTWV0aG9kKCJyZXRhaW5B\nbGwiLCAKICAgICAgICAgICAgbmV3IENsYXNzW10ge0NvbGxlY3Rpb24uY2xh\nc3N9KSk7CgogICAgICAgIC8vIGNoZWNrIGEgbm9uLW11dGF0aW5nIG1ldGhv\nZCB0byBtYWtlIHN1cmUgd2UncmUgbm90IGp1c3QgcHJveHlpbmcKICAgICAg\nICAvLyBldmVyeXRoaW5nIAogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNs\ncy5nZXREZWNsYXJlZE1ldGhvZCgiY29udGFpbnMiLCBuZXcgQ2xhc3NbXSB7\nT2JqZWN0LmNsYXNzfSk7CiAgICAgICAgICAgIGZhaWwoIlByb3hpZWQgbm9u\nLW11dGF0aW5nIG1ldGhvZC4iKTsKICAgICAgICB9IGNhdGNoIChOb1N1Y2hN\nZXRob2RFeGNlcHRpb24gbnNtZSkgewogICAgICAgICAgICAvLyBleHBlY3Rl\nZAogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEFzc2VydCB0aGF0\nIHRoZSBtZXRob2RzIHdlIG5lZWQgdG8gb3ZlcnJpZGUgdG8gZGlydHkgdGhl\nIGxpc3QgYXJlCiAgICAgKiBwcm94aWVkIGFwcHJvcHJpYXRlbHkuCiAgICAg\nKi8KICAgIHByaXZhdGUgdm9pZCBhc3NlcnRMaXN0TWV0aG9kc1Byb3hpZWQo\nQ2xhc3MgY2xzKSAKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBhc3NlcnRDb2xsZWN0aW9uTWV0aG9kc1Byb3hpZWQoY2xzKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKGNscy5nZXREZWNsYXJlZE1ldGhvZCgiYWRkIiwg\nCiAgICAgICAgICAgIG5ldyBDbGFzc1tdIHtpbnQuY2xhc3MsIE9iamVjdC5j\nbGFzc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGNscy5nZXREZWNsYXJl\nZE1ldGhvZCgiYWRkQWxsIiwgCiAgICAgICAgICAgIG5ldyBDbGFzc1tdIHtp\nbnQuY2xhc3MsIENvbGxlY3Rpb24uY2xhc3N9KSk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRob2QoImxpc3RJdGVyYXRvciIs\nIChDbGFzc1tdKSBudWxsKSk7IAogICAgICAgIGFzc2VydE5vdE51bGwoY2xz\nLmdldERlY2xhcmVkTWV0aG9kKCJsaXN0SXRlcmF0b3IiLCAKICAgICAgICAg\nICAgbmV3IENsYXNzW10ge2ludC5jbGFzc30pKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKGNscy5nZXREZWNsYXJlZE1ldGhvZCgicmVtb3ZlIiwgbmV3IENs\nYXNzW10ge2ludC5jbGFzc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGNs\ncy5nZXREZWNsYXJlZE1ldGhvZCgic2V0IiwgCiAgICAgICAgICAgIG5ldyBD\nbGFzc1tdIHtpbnQuY2xhc3MsIE9iamVjdC5jbGFzc30pKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0U2V0TWV0aG9kc1Byb3hpZWQoKSAKICAgICAg\nICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBDbGFzcyBwcm94eSA9IF9t\nZ3IubmV3Q29sbGVjdGlvblByb3h5KEhhc2hTZXQuY2xhc3MsIG51bGwsIG51\nbGwpLgogICAgICAgICAgICBnZXRDbGFzcygpOwogICAgICAgIGFzc2VydENv\nbGxlY3Rpb25NZXRob2RzUHJveGllZChwcm94eSk7CgogICAgICAgIHByb3h5\nID0gX21nci5uZXdDb2xsZWN0aW9uUHJveHkoQ3VzdG9tU2V0LmNsYXNzLCBu\ndWxsLCBudWxsKS5nZXRDbGFzcygpOwogICAgICAgIGFzc2VydENvbGxlY3Rp\nb25NZXRob2RzUHJveGllZChwcm94eSk7CgogICAgICAgIHByb3h5ID0gX21n\nci5uZXdDb2xsZWN0aW9uUHJveHkoQ3VzdG9tU29ydGVkU2V0LmNsYXNzLCBu\ndWxsLCBudWxsKS4KICAgICAgICAgICAgZ2V0Q2xhc3MoKTsKICAgICAgICBh\nc3NlcnRDb2xsZWN0aW9uTWV0aG9kc1Byb3hpZWQocHJveHkpOwoKICAgICAg\nICBwcm94eSA9IF9tZ3IubmV3Q29sbGVjdGlvblByb3h5KEN1c3RvbUNvbXBh\ncmF0b3JTb3J0ZWRTZXQuY2xhc3MsIG51bGwsIAogICAgICAgICAgICBuZXcg\nQ3VzdG9tQ29tcGFyYXRvcigpKS5nZXRDbGFzcygpOwogICAgICAgIGFzc2Vy\ndENvbGxlY3Rpb25NZXRob2RzUHJveGllZChwcm94eSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdFF1ZXVlTWV0aG9kc1Byb3hpZWQoKSAKICAgICAg\nICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBDbGFzcyBxdWV1ZSA9IGdl\ndFF1ZXVlQ2xhc3MoKTsKICAgICAgICBpZiAocXVldWUgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuOwoKICAgICAgICBDbGFzcyBwcm94eSA9IF9tZ3Iu\nbmV3Q29sbGVjdGlvblByb3h5KExpbmtlZExpc3QuY2xhc3MsIG51bGwsIG51\nbGwpLgogICAgICAgICAgICBnZXRDbGFzcygpOwogICAgICAgIGFzc2VydFRy\ndWUocXVldWUuaXNBc3NpZ25hYmxlRnJvbShwcm94eSkpOyAgICAgICAgCiAg\nICAgICAgYXNzZXJ0Q29sbGVjdGlvbk1ldGhvZHNQcm94aWVkKHByb3h5KTsK\nICAgICAgICBhc3NlcnROb3ROdWxsKHByb3h5LmdldERlY2xhcmVkTWV0aG9k\nKCJvZmZlciIsIAogICAgICAgICAgICBuZXcgQ2xhc3NbXSB7T2JqZWN0LmNs\nYXNzfSkpOwogICAgICAgIGFzc2VydE5vdE51bGwocHJveHkuZ2V0RGVjbGFy\nZWRNZXRob2QoInBvbGwiLCAoQ2xhc3NbXSkgbnVsbCkpOyAKICAgICAgICBh\nc3NlcnROb3ROdWxsKHByb3h5LmdldERlY2xhcmVkTWV0aG9kKCJyZW1vdmUi\nLCAoQ2xhc3NbXSkgbnVsbCkpOyAKICAgICAgICB0cnkgewogICAgICAgICAg\nICBwcm94eS5nZXREZWNsYXJlZE1ldGhvZCgicGVlayIsIChDbGFzc1tdKSBu\ndWxsKTsKICAgICAgICAgICAgZmFpbCgiUHJveGllZCBub24tbXV0YXRpbmcg\nbWV0aG9kLiIpOwogICAgICAgIH0gY2F0Y2ggKE5vU3VjaE1ldGhvZEV4Y2Vw\ndGlvbiBuc21lKSB7CiAgICAgICAgICAgIC8vIGV4cGVjdGVkCiAgICAgICAg\nfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RMaW5rZWRMaXN0TWV0aG9k\nc1Byb3hpZWQoKSAKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBDbGFzcyBwcm94eSA9IF9tZ3IubmV3Q29sbGVjdGlvblByb3h5KExpbmtl\nZExpc3QuY2xhc3MsIG51bGwsIG51bGwpLgogICAgICAgICAgICBnZXRDbGFz\ncygpOwogICAgICAgIGFzc2VydExpc3RNZXRob2RzUHJveGllZChwcm94eSk7\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChwcm94eS5nZXREZWNsYXJlZE1ldGhv\nZCgiYWRkRmlyc3QiLCAKICAgICAgICAgICAgbmV3IENsYXNzW10ge09iamVj\ndC5jbGFzc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHByb3h5LmdldERl\nY2xhcmVkTWV0aG9kKCJhZGRMYXN0IiwgCiAgICAgICAgICAgIG5ldyBDbGFz\nc1tdIHtPYmplY3QuY2xhc3N9KSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChw\ncm94eS5nZXREZWNsYXJlZE1ldGhvZCgicmVtb3ZlRmlyc3QiLCAoQ2xhc3Nb\nXSkgbnVsbCkpOyAKICAgICAgICBhc3NlcnROb3ROdWxsKHByb3h5LmdldERl\nY2xhcmVkTWV0aG9kKCJyZW1vdmVMYXN0IiwgKENsYXNzW10pIG51bGwpKTsg\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFZlY3Rvck1ldGhvZHNQcm94\naWVkKCkgCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgIENs\nYXNzIHByb3h5ID0gX21nci5uZXdDb2xsZWN0aW9uUHJveHkoVmVjdG9yLmNs\nYXNzLCBudWxsLCBudWxsKS4KICAgICAgICAgICAgZ2V0Q2xhc3MoKTsKICAg\nICAgICBhc3NlcnRMaXN0TWV0aG9kc1Byb3hpZWQocHJveHkpOwogICAgICAg\nIGFzc2VydE5vdE51bGwocHJveHkuZ2V0RGVjbGFyZWRNZXRob2QoImFkZEVs\nZW1lbnQiLCAKICAgICAgICAgICAgbmV3IENsYXNzW10ge09iamVjdC5jbGFz\nc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHByb3h5LmdldERlY2xhcmVk\nTWV0aG9kKCJpbnNlcnRFbGVtZW50QXQiLCAKICAgICAgICAgICAgbmV3IENs\nYXNzW10ge09iamVjdC5jbGFzcywgaW50LmNsYXNzfSkpOwogICAgICAgIGFz\nc2VydE5vdE51bGwocHJveHkuZ2V0RGVjbGFyZWRNZXRob2QoInJlbW92ZUFs\nbEVsZW1lbnRzIiwgCiAgICAgICAgICAgIChDbGFzc1tdKSBudWxsKSk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChwcm94eS5nZXREZWNsYXJlZE1ldGhvZCgi\ncmVtb3ZlRWxlbWVudCIsIAogICAgICAgICAgICBuZXcgQ2xhc3NbXSB7T2Jq\nZWN0LmNsYXNzfSkpOwogICAgICAgIGFzc2VydE5vdE51bGwocHJveHkuZ2V0\nRGVjbGFyZWRNZXRob2QoInJlbW92ZUVsZW1lbnRBdCIsIAogICAgICAgICAg\nICBuZXcgQ2xhc3NbXSB7aW50LmNsYXNzfSkpOwogICAgICAgIGFzc2VydE5v\ndE51bGwocHJveHkuZ2V0RGVjbGFyZWRNZXRob2QoInNldEVsZW1lbnRBdCIs\nIAogICAgICAgICAgICBuZXcgQ2xhc3NbXSB7T2JqZWN0LmNsYXNzLCBpbnQu\nY2xhc3N9KSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdExpc3RDaGFu\nZ2VUcmFja2VyKCkgewogICAgICAgIFByb3h5IGNvbGwgPSBfbWdyLm5ld0Nv\nbGxlY3Rpb25Qcm94eShBcnJheUxpc3QuY2xhc3MsIG51bGwsIG51bGwpOwog\nICAgICAgIGFzc2VydE5vdE51bGwoY29sbCk7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbChjb2xsLmdldENoYW5nZVRyYWNrZXIoKSk7CiAgICAgICAgYXNzZXJ0\nVHJ1ZShjb2xsLmdldENoYW5nZVRyYWNrZXIoKSAKICAgICAgICAgICAgaW5z\ndGFuY2VvZiBDb2xsZWN0aW9uQ2hhbmdlVHJhY2tlckltcGwpOwogICAgICAg\nIENvbGxlY3Rpb25DaGFuZ2VUcmFja2VySW1wbCBjdCA9IChDb2xsZWN0aW9u\nQ2hhbmdlVHJhY2tlckltcGwpIAogICAgICAgICAgICBjb2xsLmdldENoYW5n\nZVRyYWNrZXIoKTsKICAgICAgICBhc3NlcnRUcnVlKGN0LmFsbG93c0R1cGxp\nY2F0ZXMoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShjdC5pc09yZGVyZWQoKSk7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RTZXRDaGFuZ2VUcmFj\na2VyKCkgewogICAgICAgIFByb3h5IGNvbGwgPSBfbWdyLm5ld0NvbGxlY3Rp\nb25Qcm94eShIYXNoU2V0LmNsYXNzLCBudWxsLCBudWxsKTsKICAgICAgICBh\nc3NlcnROb3ROdWxsKGNvbGwpOwogICAgICAgIGFzc2VydE5vdE51bGwoY29s\nbC5nZXRDaGFuZ2VUcmFja2VyKCkpOwogICAgICAgIGFzc2VydFRydWUoY29s\nbC5nZXRDaGFuZ2VUcmFja2VyKCkgCiAgICAgICAgICAgIGluc3RhbmNlb2Yg\nQ29sbGVjdGlvbkNoYW5nZVRyYWNrZXJJbXBsKTsKICAgICAgICBDb2xsZWN0\naW9uQ2hhbmdlVHJhY2tlckltcGwgY3QgPSAoQ29sbGVjdGlvbkNoYW5nZVRy\nYWNrZXJJbXBsKSAKICAgICAgICAgICAgY29sbC5nZXRDaGFuZ2VUcmFja2Vy\nKCk7CiAgICAgICAgYXNzZXJ0RmFsc2UoY3QuYWxsb3dzRHVwbGljYXRlcygp\nKTsKICAgICAgICBhc3NlcnRGYWxzZShjdC5pc09yZGVyZWQoKSk7CiAgICB9\nCiAKICAgIHB1YmxpYyB2b2lkIHRlc3RDb2xsZWN0aW9uSW50ZXJmYWNlUHJv\neHkoKSB7CiAgICAgICAgUHJveHkgY29sbCA9IF9tZ3IubmV3Q29sbGVjdGlv\nblByb3h5KENvbGxlY3Rpb24uY2xhc3MsIG51bGwsIG51bGwpOwogICAgICAg\nIGFzc2VydE5vdE51bGwoY29sbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdExpc3RJbnRlcmZhY2VQcm94eSgpIHsKICAgICAgICBQcm94eSBjb2xs\nID0gX21nci5uZXdDb2xsZWN0aW9uUHJveHkoTGlzdC5jbGFzcywgbnVsbCwg\nbnVsbCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChjb2xsKTsKICAgICAgICBh\nc3NlcnRUcnVlKGNvbGwgaW5zdGFuY2VvZiBMaXN0KTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0U2V0SW50ZXJmYWNlUHJveHkoKSB7CiAgICAgICAg\nUHJveHkgY29sbCA9IF9tZ3IubmV3Q29sbGVjdGlvblByb3h5KFNldC5jbGFz\ncywgbnVsbCwgbnVsbCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChjb2xsKTsK\nICAgICAgICBhc3NlcnRUcnVlKGNvbGwgaW5zdGFuY2VvZiBTZXQpOwogICAg\nICAgIGFzc2VydEZhbHNlKGNvbGwgaW5zdGFuY2VvZiBTb3J0ZWRTZXQpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTb3J0ZWRTZXRJbnRlcmZhY2VQ\ncm94eSgpIHsKICAgICAgICBQcm94eSBjb2xsID0gX21nci5uZXdDb2xsZWN0\naW9uUHJveHkoU29ydGVkU2V0LmNsYXNzLCBudWxsLCBudWxsKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKGNvbGwpOwogICAgICAgIGFzc2VydFRydWUoY29s\nbCBpbnN0YW5jZW9mIFNvcnRlZFNldCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdFF1ZXVlSW50ZXJmYWNlUHJveHkoKSB7CiAgICAgICAgQ2xhc3Mg\ncXVldWUgPSBnZXRRdWV1ZUNsYXNzKCk7CiAgICAgICAgaWYgKHF1ZXVlID09\nIG51bGwpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgUHJveHkgY29s\nbCA9IF9tZ3IubmV3Q29sbGVjdGlvblByb3h5KHF1ZXVlLCBudWxsLCBudWxs\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGNvbGwpOwogICAgICAgIGFzc2Vy\ndFRydWUocXVldWUuaXNJbnN0YW5jZShjb2xsKSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBqYXZhLnV0aWwuUXVldWV9IGNs\nYXNzIGlmIGF2YWlhbGJsZS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMg\nQ2xhc3MgZ2V0UXVldWVDbGFzcygpIHsKICAgICAgICB0cnkgewogICAgICAg\nICAgICByZXR1cm4gQ2xhc3MuZm9yTmFtZSgiamF2YS51dGlsLlF1ZXVlIik7\nCiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RDb3B5TWFwcygpIHsKICAgICAgICBNYXAgb3JpZyA9IG5ldyBIYXNo\nTWFwKCk7CiAgICAgICAgcG9wdWxhdGUob3JpZyk7CiAgICAgICAgYXNzZXJ0\nTWFwc0VxdWFsKG9yaWcsIChNYXApIF9tZ3IuY29weU1hcChvcmlnKSk7Cgog\nICAgICAgIG9yaWcgPSBuZXcgQ3VzdG9tTWFwKCk7CiAgICAgICAgcG9wdWxh\ndGUob3JpZyk7CiAgICAgICAgYXNzZXJ0TWFwc0VxdWFsKG9yaWcsIChNYXAp\nIF9tZ3IuY29weU1hcChvcmlnKSk7CgogICAgICAgIFByb3BlcnRpZXMgcG9y\naWcgPSBuZXcgUHJvcGVydGllcygpOwogICAgICAgIHBvcmlnLnNldFByb3Bl\ncnR5KCJmb28iLCAiYmFyIik7CiAgICAgICAgcG9yaWcuc2V0UHJvcGVydHko\nImJhciIsICJiaXoiKTsKICAgICAgICBwb3JpZy5zZXRQcm9wZXJ0eSgiYml6\nIiwgImJheiIpOwogICAgICAgIGFzc2VydE1hcHNFcXVhbChvcmlnLCAoTWFw\nKSBfbWdyLmNvcHlNYXAob3JpZykpOwogICAgfQoKICAgIC8qKgogICAgICog\nUG9wdWxhdGUgdGhlIGdpdmVuIG1hcCB3aXRoIGFyYml0cmFyeSBkYXRhLgog\nICAgICovCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHBvcHVsYXRlKE1hcCBt\nYXApIHsKICAgICAgICBtYXAucHV0KG5ldyBJbnRlZ2VyKDEpLCAiMSIpOwog\nICAgICAgIG1hcC5wdXQobmV3IEludGVnZXIoOTkpLCAiOTkiKTsKICAgICAg\nICBtYXAucHV0KG5ldyBJbnRlZ2VyKC0yKSwgIi0yIik7CiAgICAgICAgbWFw\nLnB1dChuZXcgSW50ZWdlcig1MCksICI1MCIpOwogICAgfQoKICAgIC8qKgog\nICAgICogQXNzZXJ0IHRoYXQgdGhlIGdpdmVuIG1hcHMgYXJlIGV4YWN0bHkg\ndGhlIHNhbWUuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIHZvaWQgYXNz\nZXJ0TWFwc0VxdWFsKE1hcCBtMSwgTWFwIG0yKSB7CiAgICAgICAgYXNzZXJ0\nVHJ1ZShtMS5nZXRDbGFzcygpID09IG0yLmdldENsYXNzKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscyhtMS5zaXplKCksIG0yLnNpemUoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKG0xLCBtMik7CiAgICB9ICAKCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0Q29weVNvcnRlZE1hcHMoKSB7CiAgICAgICAgU29ydGVkTWFwIG9y\naWcgPSBuZXcgVHJlZU1hcCgpOwogICAgICAgIHBvcHVsYXRlKG9yaWcpOwog\nICAgICAgIGFzc2VydFNvcnRlZE1hcHNFcXVhbChvcmlnLCAoU29ydGVkTWFw\nKSBfbWdyLmNvcHlNYXAob3JpZykpOwoKICAgICAgICBvcmlnID0gbmV3IFRy\nZWVNYXAobmV3IEN1c3RvbUNvbXBhcmF0b3IoKSk7CiAgICAgICAgcG9wdWxh\ndGUob3JpZyk7CiAgICAgICAgYXNzZXJ0U29ydGVkTWFwc0VxdWFsKG9yaWcs\nIChTb3J0ZWRNYXApIF9tZ3IuY29weU1hcChvcmlnKSk7CgogICAgICAgIG9y\naWcgPSBuZXcgQ3VzdG9tU29ydGVkTWFwKCk7CiAgICAgICAgcG9wdWxhdGUo\nb3JpZyk7CiAgICAgICAgYXNzZXJ0U29ydGVkTWFwc0VxdWFsKG9yaWcsIChT\nb3J0ZWRNYXApIF9tZ3IuY29weU1hcChvcmlnKSk7CgogICAgICAgIG9yaWcg\nPSBuZXcgQ3VzdG9tQ29tcGFyYXRvclNvcnRlZE1hcChuZXcgQ3VzdG9tQ29t\ncGFyYXRvcigpKTsKICAgICAgICBwb3B1bGF0ZShvcmlnKTsKICAgICAgICBh\nc3NlcnRTb3J0ZWRNYXBzRXF1YWwob3JpZywgKFNvcnRlZE1hcCkgX21nci5j\nb3B5TWFwKG9yaWcpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFzc2VydCB0\naGF0IHRoZSBnaXZlbiBtYXBzIGFyZSBleGFjdGx5IHRoZSBzYW1lLgogICAg\nICovCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIGFzc2VydFNvcnRlZE1hcHNF\ncXVhbChTb3J0ZWRNYXAgbTEsIFNvcnRlZE1hcCBtMikgewogICAgICAgIGFz\nc2VydFRydWUobTEuZ2V0Q2xhc3MoKSA9PSBtMi5nZXRDbGFzcygpKTsKICAg\nICAgICBhc3NlcnRTb3J0ZWRNYXBzRXF1YWxzKG0xLCBtMik7CiAgICB9ICAK\nCiAgICAvKioKICAgICAqIEFzc2VydCB0aGF0IHRoZSBnaXZlbiBtYXBzIGFy\nZSBleGFjdGx5IHRoZSBzYW1lIChtaW51cyB0aGUgY2xhc3MpLgogICAgICov\nCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIGFzc2VydFNvcnRlZE1hcHNFcXVh\nbHMoU29ydGVkTWFwIG0xLCBTb3J0ZWRNYXAgbTIpIHsKICAgICAgICBhc3Nl\ncnRFcXVhbHMobTEuY29tcGFyYXRvcigpLCBtMi5jb21wYXJhdG9yKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyhtMS5zaXplKCksIG0yLnNpemUoKSk7CiAg\nICAgICAgTWFwLkVudHJ5IGVudHJ5MTsKICAgICAgICBNYXAuRW50cnkgZW50\ncnkyOwogICAgICAgIEl0ZXJhdG9yIGl0cjEgPSBtMS5lbnRyeVNldCgpLml0\nZXJhdG9yKCk7CiAgICAgICAgSXRlcmF0b3IgaXRyMiA9IG0yLmVudHJ5U2V0\nKCkuaXRlcmF0b3IoKTsKICAgICAgICB3aGlsZSAoaXRyMS5oYXNOZXh0KCkp\nIHsKICAgICAgICAgICAgZW50cnkxID0gKE1hcC5FbnRyeSkgaXRyMS5uZXh0\nKCk7CiAgICAgICAgICAgIGVudHJ5MiA9IChNYXAuRW50cnkpIGl0cjIubmV4\ndCgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGVudHJ5MS5nZXRLZXkoKSA9\nPSBlbnRyeTIuZ2V0S2V5KCkpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGVu\ndHJ5MS5nZXRWYWx1ZSgpID09IGVudHJ5Mi5nZXRWYWx1ZSgpKTsKICAgICAg\nICB9CiAgICAgICAgYXNzZXJ0VHJ1ZShtMS5lcXVhbHMobTIpKTsKICAgIH0g\nIAoKICAgIHB1YmxpYyB2b2lkIHRlc3RDb3B5TnVsbE1hcCgpIHsKICAgICAg\nICBhc3NlcnROdWxsKF9tZ3IuY29weU1hcChudWxsKSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdENvcHlQcm94eU1hcCgpIHsKICAgICAgICBNYXAg\nb3JpZyA9IChNYXApIF9tZ3IubmV3TWFwUHJveHkoSGFzaE1hcC5jbGFzcywg\nbnVsbCwgbnVsbCwgbnVsbCk7CiAgICAgICAgcG9wdWxhdGUob3JpZyk7CiAg\nICAgICAgYXNzZXJ0TWFwc0VxdWFsKG5ldyBIYXNoTWFwKG9yaWcpLCAoTWFw\nKSBfbWdyLmNvcHlNYXAob3JpZykpOwoKICAgICAgICBUcmVlTWFwIHRvcmln\nID0gKFRyZWVNYXApIF9tZ3IubmV3TWFwUHJveHkoVHJlZU1hcC5jbGFzcywg\nbnVsbCwgbnVsbCwgCiAgICAgICAgICAgIG5ldyBDdXN0b21Db21wYXJhdG9y\nKCkpOwogICAgICAgIGFzc2VydFRydWUodG9yaWcuY29tcGFyYXRvcigpIGlu\nc3RhbmNlb2YgQ3VzdG9tQ29tcGFyYXRvcik7CiAgICAgICAgcG9wdWxhdGUo\ndG9yaWcpOwogICAgICAgIGFzc2VydFNvcnRlZE1hcHNFcXVhbChuZXcgVHJl\nZU1hcCh0b3JpZyksIChTb3J0ZWRNYXApIAogICAgICAgICAgICBfbWdyLmNv\ncHlNYXAodG9yaWcpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q2xv\nbmVQcm94eU1hcCgpIHsKICAgICAgICAvLyBNYXAgZG9lcyBub3Qgc3VwcG9y\ndCBjbG9uZSgpCiAgICAgICAgCiAgICAgICAgVHJlZU1hcCB0b3JpZyA9IChU\ncmVlTWFwKSBfbWdyLm5ld01hcFByb3h5KFRyZWVNYXAuY2xhc3MsIG51bGws\nIG51bGwsIAogICAgICAgICAgICBuZXcgQ3VzdG9tQ29tcGFyYXRvcigpKTsK\nICAgICAgICBhc3NlcnRUcnVlKHRvcmlnLmNvbXBhcmF0b3IoKSBpbnN0YW5j\nZW9mIEN1c3RvbUNvbXBhcmF0b3IpOwogICAgICAgIHBvcHVsYXRlKHRvcmln\nKTsKICAgICAgICBhc3NlcnRTb3J0ZWRNYXBzRXF1YWxzKG5ldyBUcmVlTWFw\nKHRvcmlnKSwgKFNvcnRlZE1hcCkgdG9yaWcuY2xvbmUoKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdE1hcE1ldGhvZHNQcm94aWVkKCkgCiAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgQ2xhc3MgcHJveHkgPSBf\nbWdyLm5ld01hcFByb3h5KEhhc2hNYXAuY2xhc3MsIG51bGwsIG51bGwsIG51\nbGwpLgogICAgICAgICAgICBnZXRDbGFzcygpOwogICAgICAgIGFzc2VydE1h\ncE1ldGhvZHNQcm94aWVkKHByb3h5KTsKCiAgICAgICAgcHJveHkgPSBfbWdy\nLm5ld01hcFByb3h5KFRyZWVNYXAuY2xhc3MsIG51bGwsIG51bGwsIG51bGwp\nLmdldENsYXNzKCk7CiAgICAgICAgYXNzZXJ0TWFwTWV0aG9kc1Byb3hpZWQo\ncHJveHkpOwoKICAgICAgICBwcm94eSA9IF9tZ3IubmV3TWFwUHJveHkoVHJl\nZU1hcC5jbGFzcywgbnVsbCwgbnVsbCwgCiAgICAgICAgICAgIG5ldyBDdXN0\nb21Db21wYXJhdG9yKCkpLmdldENsYXNzKCk7CiAgICAgICAgYXNzZXJ0TWFw\nTWV0aG9kc1Byb3hpZWQocHJveHkpOwoKICAgICAgICBwcm94eSA9IF9tZ3Iu\nbmV3TWFwUHJveHkoQ3VzdG9tTWFwLmNsYXNzLCBudWxsLCBudWxsLCBudWxs\nKS5nZXRDbGFzcygpOwogICAgICAgIGFzc2VydE1hcE1ldGhvZHNQcm94aWVk\nKHByb3h5KTsKCiAgICAgICAgcHJveHkgPSBfbWdyLm5ld01hcFByb3h5KEN1\nc3RvbVNvcnRlZE1hcC5jbGFzcywgbnVsbCwgbnVsbCwgbnVsbCkuCiAgICAg\nICAgICAgIGdldENsYXNzKCk7CiAgICAgICAgYXNzZXJ0TWFwTWV0aG9kc1By\nb3hpZWQocHJveHkpOwoKICAgICAgICBwcm94eSA9IF9tZ3IubmV3TWFwUHJv\neHkoQ3VzdG9tQ29tcGFyYXRvclNvcnRlZE1hcC5jbGFzcywgbnVsbCwgbnVs\nbCwgCiAgICAgICAgICAgIG5ldyBDdXN0b21Db21wYXJhdG9yKCkpLmdldENs\nYXNzKCk7CiAgICAgICAgYXNzZXJ0TWFwTWV0aG9kc1Byb3hpZWQocHJveHkp\nOwogICAgfQoKICAgIC8qKgogICAgICogQXNzZXJ0IHRoYXQgdGhlIG1ldGhv\nZHMgd2UgbmVlZCB0byBvdmVycmlkZSB0byBkaXJ0eSB0aGUgY29sbGVjdGlv\nbiBhcmUKICAgICAqIHByb3hpZWQgYXBwcm9wcmlhdGVseS4KICAgICAqLwog\nICAgcHJpdmF0ZSB2b2lkIGFzc2VydE1hcE1ldGhvZHNQcm94aWVkKENsYXNz\nIGNscykgCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRob2QoInB1dCIsIAogICAg\nICAgICAgICBuZXcgQ2xhc3NbXSB7T2JqZWN0LmNsYXNzLCBPYmplY3QuY2xh\nc3N9KSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRN\nZXRob2QoInB1dEFsbCIsIG5ldyBDbGFzc1tdIHtNYXAuY2xhc3N9KSk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRob2QoImNs\nZWFyIiwgKENsYXNzW10pIG51bGwpKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKGNscy5nZXREZWNsYXJlZE1ldGhvZCgicmVtb3ZlIiwgCiAgICAgICAgICAg\nIG5ldyBDbGFzc1tdIHtPYmplY3QuY2xhc3N9KSk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRob2QoImtleVNldCIsIChDbGFz\nc1tdKSBudWxsKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVj\nbGFyZWRNZXRob2QoInZhbHVlcyIsIChDbGFzc1tdKSBudWxsKSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRob2QoImVudHJ5\nU2V0IiwgKENsYXNzW10pIG51bGwpKTsKCiAgICAgICAgLy8gY2hlY2sgYSBu\nb24tbXV0YXRpbmcgbWV0aG9kIHRvIG1ha2Ugc3VyZSB3ZSdyZSBub3QganVz\ndCBwcm94eWluZwogICAgICAgIC8vIGV2ZXJ5dGhpbmcgCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgY2xzLmdldERlY2xhcmVkTWV0aG9kKCJjb250YWlu\nc0tleSIsIG5ldyBDbGFzc1tdIHtPYmplY3QuY2xhc3N9KTsKICAgICAgICAg\nICAgZmFpbCgiUHJveGllZCBub24tbXV0YXRpbmcgbWV0aG9kLiIpOwogICAg\nICAgIH0gY2F0Y2ggKE5vU3VjaE1ldGhvZEV4Y2VwdGlvbiBuc21lKSB7CiAg\nICAgICAgICAgIC8vIGV4cGVjdGVkCiAgICAgICAgfQogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RQcm9wZXJ0aWVzTWV0aG9kc1Byb3hpZWQoKSAKICAg\nICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBDbGFzcyBwcm94eSA9\nIF9tZ3IubmV3TWFwUHJveHkoUHJvcGVydGllcy5jbGFzcywgbnVsbCwgbnVs\nbCwgbnVsbCkuCiAgICAgICAgICAgIGdldENsYXNzKCk7CiAgICAgICAgYXNz\nZXJ0TWFwTWV0aG9kc1Byb3hpZWQocHJveHkpOwogICAgICAgIGFzc2VydE5v\ndE51bGwocHJveHkuZ2V0RGVjbGFyZWRNZXRob2QoInNldFByb3BlcnR5Iiwg\nCiAgICAgICAgICAgIG5ldyBDbGFzc1tdIHtTdHJpbmcuY2xhc3MsIFN0cmlu\nZy5jbGFzc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHByb3h5LmdldERl\nY2xhcmVkTWV0aG9kKCJsb2FkIiwgCiAgICAgICAgICAgIG5ldyBDbGFzc1td\nIHtJbnB1dFN0cmVhbS5jbGFzc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKHByb3h5LmdldERlY2xhcmVkTWV0aG9kKCJsb2FkRnJvbVhNTCIsIAogICAg\nICAgICAgICBuZXcgQ2xhc3NbXSB7SW5wdXRTdHJlYW0uY2xhc3N9KSk7CiAg\nICB9IAoKICAgIHB1YmxpYyB2b2lkIHRlc3RDb3B5RGF0ZXMoKSB7CiAgICAg\nICAgRGF0ZSBvcmlnID0gbmV3IERhdGUoMTk5OSk7CiAgICAgICAgYXNzZXJ0\nRGF0ZXNFcXVhbChvcmlnLCAoRGF0ZSkgX21nci5jb3B5RGF0ZShvcmlnKSk7\nCgogICAgICAgIG9yaWcgPSBuZXcgamF2YS5zcWwuRGF0ZSgxOTk5KTsKICAg\nICAgICBhc3NlcnREYXRlc0VxdWFsKG9yaWcsIChEYXRlKSBfbWdyLmNvcHlE\nYXRlKG9yaWcpKTsKCiAgICAgICAgb3JpZyA9IG5ldyBUaW1lKDE5OTkpOwog\nICAgICAgIGFzc2VydERhdGVzRXF1YWwob3JpZywgKERhdGUpIF9tZ3IuY29w\neURhdGUob3JpZykpOwoKICAgICAgICBUaW1lc3RhbXAgdG9yaWcgPSBuZXcg\nVGltZXN0YW1wKDE5OTkpOwogICAgICAgIHRvcmlnLnNldE5hbm9zKDIwMDEp\nOwogICAgICAgIGFzc2VydERhdGVzRXF1YWwodG9yaWcsIChEYXRlKSBfbWdy\nLmNvcHlEYXRlKHRvcmlnKSk7CgogICAgICAgIHRvcmlnID0gbmV3IEN1c3Rv\nbURhdGUoMTk5OSk7CiAgICAgICAgdG9yaWcuc2V0TmFub3MoMjAwMSk7CiAg\nICAgICAgYXNzZXJ0RGF0ZXNFcXVhbCh0b3JpZywgKERhdGUpIF9tZ3IuY29w\neURhdGUodG9yaWcpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFzc2VydCB0\naGF0IHRoZSBnaXZlbiBkYXRlcyBhcmUgZXhhY3RseSB0aGUgc2FtZS4KICAg\nICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBhc3NlcnREYXRlc0VxdWFs\nKERhdGUgZDEsIERhdGUgZDIpIHsKICAgICAgICBhc3NlcnRUcnVlKGQxLmdl\ndENsYXNzKCkgPT0gZDIuZ2V0Q2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0RGF0\nZXNFcXVhbHMoZDEsIGQyKTsKICAgIH0gIAoKICAgIC8qKgogICAgICogQXNz\nZXJ0IHRoYXQgdGhlIGdpdmVuIGRhdGVzIGFyZSBleGFjdGx5IHRoZSBzYW1l\nIChtaW51cyB0aGUgY2xhc3MpLgogICAgICovCiAgICBwcml2YXRlIHN0YXRp\nYyB2b2lkIGFzc2VydERhdGVzRXF1YWxzKERhdGUgZDEsIERhdGUgZDIpIHsK\nICAgICAgICBhc3NlcnRUcnVlKGQxLmVxdWFscyhkMikpOwogICAgfSAgCgog\nICAgcHVibGljIHZvaWQgdGVzdENvcHlOdWxsRGF0ZSgpIHsKICAgICAgICBh\nc3NlcnROdWxsKF9tZ3IuY29weURhdGUobnVsbCkpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RDb3B5UHJveHlEYXRlKCkgewogICAgICAgIERhdGUg\nb3JpZyA9IChEYXRlKSBfbWdyLm5ld0RhdGVQcm94eShUaW1lLmNsYXNzKTsK\nICAgICAgICBvcmlnLnNldFRpbWUoMTk5OSk7CiAgICAgICAgYXNzZXJ0RGF0\nZXNFcXVhbChuZXcgVGltZShvcmlnLmdldFRpbWUoKSksIChEYXRlKSBfbWdy\nLmNvcHlEYXRlKG9yaWcpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nQ2xvbmVQcm94eURhdGUoKSB7CiAgICAgICAgRGF0ZSBvcmlnID0gKERhdGUp\nIF9tZ3IubmV3RGF0ZVByb3h5KFRpbWUuY2xhc3MpOwogICAgICAgIG9yaWcu\nc2V0VGltZSgxOTk5KTsKICAgICAgICBhc3NlcnREYXRlc0VxdWFscyhuZXcg\nVGltZShvcmlnLmdldFRpbWUoKSksIChEYXRlKSBvcmlnLmNsb25lKCkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3REYXRlTWV0aG9kc1Byb3hpZWQo\nKSAKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBDbGFzcyBw\ncm94eSA9IF9tZ3IubmV3RGF0ZVByb3h5KERhdGUuY2xhc3MpLmdldENsYXNz\nKCk7CiAgICAgICAgYXNzZXJ0RGF0ZU1ldGhvZHNQcm94aWVkKHByb3h5KTsK\nCiAgICAgICAgcHJveHkgPSBfbWdyLm5ld0RhdGVQcm94eShqYXZhLnNxbC5E\nYXRlLmNsYXNzKS5nZXRDbGFzcygpOwogICAgICAgIGFzc2VydERhdGVNZXRo\nb2RzUHJveGllZChwcm94eSk7CgogICAgICAgIHByb3h5ID0gX21nci5uZXdE\nYXRlUHJveHkoVGltZS5jbGFzcykuZ2V0Q2xhc3MoKTsKICAgICAgICBhc3Nl\ncnREYXRlTWV0aG9kc1Byb3hpZWQocHJveHkpOwoKICAgICAgICBwcm94eSA9\nIF9tZ3IubmV3RGF0ZVByb3h5KFRpbWVzdGFtcC5jbGFzcykuZ2V0Q2xhc3Mo\nKTsKICAgICAgICBhc3NlcnRUaW1lc3RhbXBNZXRob2RzUHJveGllZChwcm94\neSk7CgogICAgICAgIHByb3h5ID0gX21nci5uZXdEYXRlUHJveHkoQ3VzdG9t\nRGF0ZS5jbGFzcykuZ2V0Q2xhc3MoKTsKICAgICAgICBhc3NlcnRUaW1lc3Rh\nbXBNZXRob2RzUHJveGllZChwcm94eSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBBc3NlcnQgdGhhdCB0aGUgbWV0aG9kcyB3ZSBuZWVkIHRvIG92ZXJyaWRl\nIHRvIGRpcnR5IHRoZSBkYXRlIGFyZQogICAgICogcHJveGllZCBhcHByb3By\naWF0ZWx5LgogICAgICovCiAgICBwcml2YXRlIHZvaWQgYXNzZXJ0RGF0ZU1l\ndGhvZHNQcm94aWVkKENsYXNzIGNscykgCiAgICAgICAgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRN\nZXRob2QoInNldERhdGUiLCAKICAgICAgICAgICAgbmV3IENsYXNzW10ge2lu\ndC5jbGFzc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGNscy5nZXREZWNs\nYXJlZE1ldGhvZCgic2V0SG91cnMiLCAKICAgICAgICAgICAgbmV3IENsYXNz\nW10ge2ludC5jbGFzc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGNscy5n\nZXREZWNsYXJlZE1ldGhvZCgic2V0TWludXRlcyIsIAogICAgICAgICAgICBu\nZXcgQ2xhc3NbXSB7aW50LmNsYXNzfSkpOwogICAgICAgIGFzc2VydE5vdE51\nbGwoY2xzLmdldERlY2xhcmVkTWV0aG9kKCJzZXRNb250aCIsIAogICAgICAg\nICAgICBuZXcgQ2xhc3NbXSB7aW50LmNsYXNzfSkpOwogICAgICAgIGFzc2Vy\ndE5vdE51bGwoY2xzLmdldERlY2xhcmVkTWV0aG9kKCJzZXRTZWNvbmRzIiwg\nCiAgICAgICAgICAgIG5ldyBDbGFzc1tdIHtpbnQuY2xhc3N9KSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRob2QoInNldFRp\nbWUiLCAKICAgICAgICAgICAgbmV3IENsYXNzW10ge2xvbmcuY2xhc3N9KSk7\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRob2Qo\nInNldFllYXIiLCAKICAgICAgICAgICAgbmV3IENsYXNzW10ge2ludC5jbGFz\nc30pKTsKCiAgICAgICAgLy8gY2hlY2sgYSBub24tbXV0YXRpbmcgbWV0aG9k\nIHRvIG1ha2Ugc3VyZSB3ZSdyZSBub3QganVzdCBwcm94eWluZwogICAgICAg\nIC8vIGV2ZXJ5dGhpbmcgCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY2xz\nLmdldERlY2xhcmVkTWV0aG9kKCJnZXRUaW1lIiwgKENsYXNzW10pIG51bGwp\nOwogICAgICAgICAgICBmYWlsKCJQcm94aWVkIG5vbi1tdXRhdGluZyBtZXRo\nb2QuIik7CiAgICAgICAgfSBjYXRjaCAoTm9TdWNoTWV0aG9kRXhjZXB0aW9u\nIG5zbWUpIHsKICAgICAgICAgICAgLy8gZXhwZWN0ZWQKICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBBc3NlcnQgdGhhdCB0aGUgbWV0aG9kcyB3\nZSBuZWVkIHRvIG92ZXJyaWRlIHRvIGRpcnR5IHRoZSB0aW1lc3RhbXAgYXJl\nCiAgICAgKiBwcm94aWVkIGFwcHJvcHJpYXRlbHkuCiAgICAgKi8KICAgIHBy\naXZhdGUgdm9pZCBhc3NlcnRUaW1lc3RhbXBNZXRob2RzUHJveGllZChDbGFz\ncyBjbHMpIAogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGFz\nc2VydERhdGVNZXRob2RzUHJveGllZChjbHMpOwogICAgICAgIGFzc2VydE5v\ndE51bGwoY2xzLmdldERlY2xhcmVkTWV0aG9kKCJzZXROYW5vcyIsIAogICAg\nICAgICAgICBuZXcgQ2xhc3NbXSB7aW50LmNsYXNzfSkpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RDb3B5Q2FsZW5kYXJzKCkgewogICAgICAgIENh\nbGVuZGFyIG9yaWcgPSBuZXcgR3JlZ29yaWFuQ2FsZW5kYXIoKTsKICAgICAg\nICBwb3B1bGF0ZShvcmlnKTsKICAgICAgICBhc3NlcnRDYWxlbmRhcnNFcXVh\nbChvcmlnLCBfbWdyLmNvcHlDYWxlbmRhcihvcmlnKSk7CgogICAgICAgIG9y\naWcgPSBuZXcgQ3VzdG9tQ2FsZW5kYXIoKTsKICAgICAgICBwb3B1bGF0ZShv\ncmlnKTsKICAgICAgICBhc3NlcnRDYWxlbmRhcnNFcXVhbChvcmlnLCBfbWdy\nLmNvcHlDYWxlbmRhcihvcmlnKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBQ\nb3B1bGF0ZSBjYWxlbmRhciB3aXRoIGFyYml0cmFyeSBkYXRhLgogICAgICov\nCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHBvcHVsYXRlKENhbGVuZGFyIGNh\nbCkgewogICAgICAgIGNhbC5zZXRUaW1lSW5NaWxsaXMoMTk5OSk7CiAgICAg\nICAgY2FsLnNldFRpbWVab25lKFRpbWVab25lLmdldFRpbWVab25lKCJDU1Qi\nKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBc3NlcnQgdGhhdCB0aGUgZ2l2\nZW4gZGF0ZXMgYXJlIGV4YWN0bHkgdGhlIHNhbWUuCiAgICAgKi8KICAgIHBy\naXZhdGUgc3RhdGljIHZvaWQgYXNzZXJ0Q2FsZW5kYXJzRXF1YWwoQ2FsZW5k\nYXIgYzEsIENhbGVuZGFyIGMyKSB7CiAgICAgICAgYXNzZXJ0VHJ1ZShjMS5n\nZXRDbGFzcygpID09IGMyLmdldENsYXNzKCkpOwogICAgICAgIGFzc2VydENh\nbGVuZGFyc0VxdWFscyhjMSwgYzIpOwogICAgfSAgCgogICAgLyoqCiAgICAg\nKiBBc3NlcnQgdGhhdCB0aGUgZ2l2ZW4gZGF0ZXMgYXJlIGV4YWN0bHkgdGhl\nIHNhbWUgKG1pbnVzIHRoZSBjbGFzcykuCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIHZvaWQgYXNzZXJ0Q2FsZW5kYXJzRXF1YWxzKENhbGVuZGFyIGMx\nLCBDYWxlbmRhciBjMikgewogICAgICAgIGFzc2VydFRydWUoYzEuZXF1YWxz\nKGMyKSk7CiAgICB9ICAKCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29weU51bGxD\nYWxlbmRhcigpIHsKICAgICAgICBhc3NlcnROdWxsKF9tZ3IuY29weUNhbGVu\nZGFyKG51bGwpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29weVBy\nb3h5Q2FsZW5kYXIoKSB7CiAgICAgICAgQ2FsZW5kYXIgb3JpZyA9IChDYWxl\nbmRhcikgX21nci5uZXdDYWxlbmRhclByb3h5CiAgICAgICAgICAgIChHcmVn\nb3JpYW5DYWxlbmRhci5jbGFzcywgVGltZVpvbmUuZ2V0VGltZVpvbmUoIkNT\nVCIpKTsKICAgICAgICBwb3B1bGF0ZShvcmlnKTsKICAgICAgICBDYWxlbmRh\nciBjYWwgPSBuZXcgR3JlZ29yaWFuQ2FsZW5kYXIoKTsKICAgICAgICBwb3B1\nbGF0ZShjYWwpOwogICAgICAgIGFzc2VydENhbGVuZGFyc0VxdWFsKGNhbCwg\nX21nci5jb3B5Q2FsZW5kYXIob3JpZykpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RDbG9uZVByb3h5Q2FsZW5kYXIoKSB7CiAgICAgICAgQ2FsZW5k\nYXIgb3JpZyA9IChDYWxlbmRhcikgX21nci5uZXdDYWxlbmRhclByb3h5CiAg\nICAgICAgICAgIChHcmVnb3JpYW5DYWxlbmRhci5jbGFzcywgVGltZVpvbmUu\nZ2V0VGltZVpvbmUoIkNTVCIpKTsKICAgICAgICBwb3B1bGF0ZShvcmlnKTsK\nICAgICAgICBDYWxlbmRhciBjYWwgPSBuZXcgR3JlZ29yaWFuQ2FsZW5kYXIo\nKTsKICAgICAgICBwb3B1bGF0ZShjYWwpOwogICAgICAgIGFzc2VydENhbGVu\nZGFyc0VxdWFscyhjYWwsIChDYWxlbmRhcilvcmlnLmNsb25lKCkpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RDYWxlbmRhckFic3RyYWN0Q2xhc3NQ\ncm94eSgpIHsKICAgICAgICBQcm94eSBjYWwgPSBfbWdyLm5ld0NhbGVuZGFy\nUHJveHkoQ2FsZW5kYXIuY2xhc3MsIG51bGwpOwogICAgICAgIGFzc2VydE5v\ndE51bGwoY2FsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q2FsZW5k\nYXJNZXRob2RzUHJveGllZCgpIAogICAgICAgIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIENsYXNzIHByb3h5ID0gX21nci5uZXdDYWxlbmRhclByb3h5\nKEdyZWdvcmlhbkNhbGVuZGFyLmNsYXNzLAogICAgICAgICAgICBUaW1lWm9u\nZS5nZXREZWZhdWx0KCkpLmdldENsYXNzKCk7CiAgICAgICAgYXNzZXJ0Q2Fs\nZW5kYXJNZXRob2RzUHJveGllZChwcm94eSk7CgogICAgICAgIHByb3h5ID0g\nX21nci5uZXdDYWxlbmRhclByb3h5KEN1c3RvbUNhbGVuZGFyLmNsYXNzLAog\nICAgICAgICAgICBUaW1lWm9uZS5nZXREZWZhdWx0KCkpLmdldENsYXNzKCk7\nCiAgICAgICAgYXNzZXJ0Q2FsZW5kYXJNZXRob2RzUHJveGllZChwcm94eSk7\nCgogICAgICAgIHByb3h5ID0gX21nci5uZXdDYWxlbmRhclByb3h5KENhbGVu\nZGFyLmNsYXNzLAogICAgICAgICAgICBUaW1lWm9uZS5nZXREZWZhdWx0KCkp\nLmdldENsYXNzKCk7CiAgICAgICAgYXNzZXJ0Q2FsZW5kYXJNZXRob2RzUHJv\neGllZChwcm94eSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBc3NlcnQgdGhh\ndCB0aGUgbWV0aG9kcyB3ZSBuZWVkIHRvIG92ZXJyaWRlIHRvIGRpcnR5IHRo\nZSBjYWxlbmRhciBhcmUKICAgICAqIHByb3hpZWQgYXBwcm9wcmlhdGVseS4K\nICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGFzc2VydENhbGVuZGFyTWV0aG9k\nc1Byb3hpZWQoQ2xhc3MgY2xzKSAKICAgICAgICB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICBhc3NlcnROb3ROdWxsKGNscy5nZXREZWNsYXJlZE1ldGhv\nZCgic2V0IiwgCiAgICAgICAgICAgIG5ldyBDbGFzc1tdIHtpbnQuY2xhc3Ms\nIGludC5jbGFzc30pKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGNscy5nZXRE\nZWNsYXJlZE1ldGhvZCgicm9sbCIsIAogICAgICAgICAgICBuZXcgQ2xhc3Nb\nXSB7aW50LmNsYXNzLCBpbnQuY2xhc3N9KSk7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRob2QoInNldFRpbWVJbk1pbGxpcyIs\nIAogICAgICAgICAgICBuZXcgQ2xhc3NbXSB7bG9uZy5jbGFzc30pKTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKGNscy5nZXREZWNsYXJlZE1ldGhvZCgic2V0\nVGltZVpvbmUiLCAKICAgICAgICAgICAgbmV3IENsYXNzW10ge1RpbWVab25l\nLmNsYXNzfSkpOwogICAgICAgIGFzc2VydE5vdE51bGwoY2xzLmdldERlY2xh\ncmVkTWV0aG9kKCJjb21wdXRlRmllbGRzIiwgKENsYXNzW10pIG51bGwpKTsK\nCiAgICAgICAgLy8gY2hlY2sgYSBub24tbXV0YXRpbmcgbWV0aG9kIHRvIG1h\na2Ugc3VyZSB3ZSdyZSBub3QganVzdCBwcm94eWluZwogICAgICAgIC8vIGV2\nZXJ5dGhpbmcgCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY2xzLmdldERl\nY2xhcmVkTWV0aG9kKCJnZXRUaW1lSW5NaWxsaXMiLCAoQ2xhc3NbXSkgbnVs\nbCk7CiAgICAgICAgICAgIGZhaWwoIlByb3hpZWQgbm9uLW11dGF0aW5nIG1l\ndGhvZC4iKTsKICAgICAgICB9IGNhdGNoIChOb1N1Y2hNZXRob2RFeGNlcHRp\nb24gbnNtZSkgewogICAgICAgICAgICAvLyBleHBlY3RlZAogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29weUJlYW5zKCkgewogICAg\nICAgIEN1c3RvbUJlYW4gb3JpZyA9IG5ldyBDdXN0b21CZWFuKCk7CiAgICAg\nICAgcG9wdWxhdGUob3JpZyk7CiAgICAgICAgYXNzZXJ0QmVhbnNFcXVhbChv\ncmlnLCAoQ3VzdG9tQmVhbikgX21nci5jb3B5Q3VzdG9tKG9yaWcpKTsKCiAg\nICAgICAgb3JpZyA9IG5ldyBDdXN0b21Db3B5Q29uc3RydWN0b3JCZWFuKG9y\naWcpOwogICAgICAgIGFzc2VydEJlYW5zRXF1YWwob3JpZywgKEN1c3RvbUJl\nYW4pIF9tZ3IuY29weUN1c3RvbShvcmlnKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBQb3B1bGF0ZSB0aGUgZ2l2ZW4gYmVhbiB3aXRoIGFyYml0cmFyeSBk\nYXRhLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgcG9wdWxhdGUoQ3VzdG9t\nQmVhbiBiZWFuKSB7CiAgICAgICAgYmVhbi5zZXRTdHJpbmcoImZvbyIpOwog\nICAgICAgIGJlYW4uc2V0TnVtYmVyKDk5KTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0Tm9ucHJveHlhYmxlQmVhbigpIHsKICAgICAgICBOb25wcm94\neWFibGVCZWFuIG9yaWcgPSBuZXcgTm9ucHJveHlhYmxlQmVhbigxKTsKICAg\nICAgICBwb3B1bGF0ZShvcmlnKTsKICAgICAgICBhc3NlcnROdWxsKF9tZ3Iu\nY29weUN1c3RvbShvcmlnKSk7CiAgICAgICAgYXNzZXJ0TnVsbChfbWdyLm5l\nd0N1c3RvbVByb3h5KG9yaWcpKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBB\nc3NlcnQgdGhhdCB0aGUgZ2l2ZW4gYmVhbnMgYXJlIGV4YWN0bHkgdGhlIHNh\nbWUuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIHZvaWQgYXNzZXJ0QmVh\nbnNFcXVhbChDdXN0b21CZWFuIGIxLCBDdXN0b21CZWFuIGIyKSB7CiAgICAg\nICAgYXNzZXJ0VHJ1ZShiMS5nZXRDbGFzcygpID09IGIyLmdldENsYXNzKCkp\nOwogICAgICAgIGFzc2VydFRydWUoYjEuZ2V0U3RyaW5nKCkgPT0gYjIuZ2V0\nU3RyaW5nKCkpOwogICAgICAgIGFzc2VydFRydWUoYjEuZ2V0TnVtYmVyKCkg\nPT0gYjIuZ2V0TnVtYmVyKCkpOwogICAgfSAgCgogICAgcHVibGljIHZvaWQg\ndGVzdENvcHlOdWxsQmVhbigpIHsKICAgICAgICBhc3NlcnROdWxsKF9tZ3Iu\nY29weUN1c3RvbShudWxsKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndENvcHlQcm94eUJlYW4oKSB7CiAgICAgICAgQ3VzdG9tQmVhbiBvcmlnID0g\nKEN1c3RvbUJlYW4pIF9tZ3IubmV3Q3VzdG9tUHJveHkobmV3IEN1c3RvbUJl\nYW4oKSk7CiAgICAgICAgcG9wdWxhdGUob3JpZyk7CiAgICAgICAgQ3VzdG9t\nQmVhbiBjb21wID0gbmV3IEN1c3RvbUJlYW4oKTsKICAgICAgICBwb3B1bGF0\nZShjb21wKTsKICAgICAgICBhc3NlcnRCZWFuc0VxdWFsKGNvbXAsIChDdXN0\nb21CZWFuKSBfbWdyLmNvcHlDdXN0b20ob3JpZykpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RCZWFuTWV0aG9kc1Byb3hpZWQoKQogICAgICAgIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIENsYXNzIHByb3h5ID0gX21nci5u\nZXdDdXN0b21Qcm94eShuZXcgQ3VzdG9tQmVhbigpKS5nZXRDbGFzcygpOwog\nICAgICAgIGFzc2VydEJlYW5NZXRob2RzUHJveGllZChwcm94eSk7CgogICAg\nICAgIHByb3h5ID0gX21nci5uZXdDdXN0b21Qcm94eShuZXcgQ3VzdG9tQ29w\neUNvbnN0cnVjdG9yQmVhbgogICAgICAgICAgICAobmV3IEN1c3RvbUJlYW4o\nKSkpLmdldENsYXNzKCk7CiAgICAgICAgYXNzZXJ0QmVhbk1ldGhvZHNQcm94\naWVkKHByb3h5KTsKICAgIH0KCiAgICAvKioKICAgICAqIEFzc2VydCB0aGF0\nIHRoZSBtZXRob2RzIHdlIG5lZWQgdG8gb3ZlcnJpZGUgdG8gZGlydHkgdGhl\nIGJlYW4gYXJlCiAgICAgKiBwcm94aWVkIGFwcHJvcHJpYXRlbHkuCiAgICAg\nKi8KICAgIHByaXZhdGUgdm9pZCBhc3NlcnRCZWFuTWV0aG9kc1Byb3hpZWQo\nQ2xhc3MgY2xzKSAKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBhc3NlcnROb3ROdWxsKGNscy5nZXREZWNsYXJlZE1ldGhvZCgic2V0U3Ry\naW5nIiwgCiAgICAgICAgICAgIG5ldyBDbGFzc1tdIHtTdHJpbmcuY2xhc3N9\nKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChjbHMuZ2V0RGVjbGFyZWRNZXRo\nb2QoInNldE51bWJlciIsIAogICAgICAgICAgICBuZXcgQ2xhc3NbXSB7aW50\nLmNsYXNzfSkpOwoKICAgICAgICAvLyBjaGVjayBhIG5vbi1tdXRhdGluZyBt\nZXRob2QgdG8gbWFrZSBzdXJlIHdlJ3JlIG5vdCBqdXN0IHByb3h5aW5nCiAg\nICAgICAgLy8gZXZlcnl0aGluZyAKICAgICAgICB0cnkgewogICAgICAgICAg\nICBjbHMuZ2V0RGVjbGFyZWRNZXRob2QoImdldFN0cmluZyIsIChDbGFzc1td\nKSBudWxsKTsKICAgICAgICAgICAgZmFpbCgiUHJveGllZCBub24tbXV0YXRp\nbmcgbWV0aG9kLiIpOwogICAgICAgIH0gY2F0Y2ggKE5vU3VjaE1ldGhvZEV4\nY2VwdGlvbiBuc21lKSB7CiAgICAgICAgICAgIC8vIGV4cGVjdGVkCiAgICAg\nICAgfQogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmlu\nZ1tdIGFyZ3MpIHsKICAgICAgICBUZXN0UnVubmVyLnJ1bihUZXN0UHJveHlN\nYW5hZ2VyLmNsYXNzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVzZWQgdG8g\ndGVzdCBjdXN0b20gbGlzdCBoYW5kbGluZy4gIENvcHkgY29uc3RydWN0b3Ig\naW50ZW50aW9uYWxseSAKICAgICAqIG9tbWl0dGVkLgogICAgICovCiAgICBw\ndWJsaWMgc3RhdGljIGNsYXNzIEN1c3RvbUxpc3QKICAgICAgICBleHRlbmRz\nIEFic3RyYWN0U2VxdWVudGlhbExpc3QgewoKICAgICAgICBwcml2YXRlIGZp\nbmFsIExpc3QgX2RlbGVnYXRlID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAg\nIAogICAgICAgIHB1YmxpYyBpbnQgc2l6ZSgpIHsKICAgICAgICAgICAgcmV0\ndXJuIF9kZWxlZ2F0ZS5zaXplKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgTGlzdEl0ZXJhdG9yIGxpc3RJdGVyYXRvcihpbnQgaWR4KSB7CiAgICAg\nICAgICAgIHJldHVybiBfZGVsZWdhdGUubGlzdEl0ZXJhdG9yKGlkeCk7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byB0ZXN0IGN1\nc3RvbSBzZXQgaGFuZGxpbmcuICBDb3B5IGNvbnN0cnVjdG9yIGludGVudGlv\nbmFsbHkgCiAgICAgKiBvbW1pdHRlZC4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBjbGFzcyBDdXN0b21TZXQKICAgICAgICBleHRlbmRzIEFic3RyYWN0\nU2V0IHsKCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBTZXQgX2RlbGVnYXRlID0g\nbmV3IEhhc2hTZXQoKTsKICAgICAgICAKICAgICAgICBwdWJsaWMgaW50IHNp\nemUoKSB7CiAgICAgICAgICAgIHJldHVybiBfZGVsZWdhdGUuc2l6ZSgpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIEl0ZXJhdG9yIGl0ZXJhdG9yKCkg\newogICAgICAgICAgICByZXR1cm4gX2RlbGVnYXRlLml0ZXJhdG9yKCk7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBhZGQoT2JqZWN0IG8p\nIHsKICAgICAgICAgICAgcmV0dXJuIF9kZWxlZ2F0ZS5hZGQobyk7CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byB0ZXN0IGN1c3Rv\nbSBzZXQgaGFuZGxpbmcuICBDb3B5IGNvbnN0cnVjdG9yIGludGVudGlvbmFs\nbHkgCiAgICAgKiBvbW1pdHRlZC4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBjbGFzcyBDdXN0b21Tb3J0ZWRTZXQKICAgICAgICBleHRlbmRzIFRyZWVT\nZXQgewogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byB0ZXN0IGN1c3Rv\nbSBzZXQgaGFuZGxpbmcuICBDb3B5IGNvbnN0cnVjdG9yIGludGVudGlvbmFs\nbHkgCiAgICAgKiBvbW1pdHRlZC4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBjbGFzcyBDdXN0b21Db21wYXJhdG9yU29ydGVkU2V0CiAgICAgICAgZXh0\nZW5kcyBUcmVlU2V0IHsKCiAgICAgICAgcHVibGljIEN1c3RvbUNvbXBhcmF0\nb3JTb3J0ZWRTZXQoKSB7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgQ3Vz\ndG9tQ29tcGFyYXRvclNvcnRlZFNldChDb21wYXJhdG9yIGNvbXApIHsKICAg\nICAgICAgICAgc3VwZXIoY29tcCk7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogVXNlZCB0byB0ZXN0IGN1c3RvbSBtYXAgaGFuZGxpbmcuICBD\nb3B5IGNvbnN0cnVjdG9yIGludGVudGlvbmFsbHkgCiAgICAgKiBvbW1pdHRl\nZC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBjbGFzcyBDdXN0b21NYXAK\nICAgICAgICBleHRlbmRzIEFic3RyYWN0TWFwIHsKCiAgICAgICAgcHJpdmF0\nZSBmaW5hbCBNYXAgX2RlbGVnYXRlID0gbmV3IEhhc2hNYXAoKTsKCiAgICAg\nICAgcHVibGljIE9iamVjdCBwdXQoT2JqZWN0IGtleSwgT2JqZWN0IHZhbHVl\nKSB7CiAgICAgICAgICAgIHJldHVybiBfZGVsZWdhdGUucHV0KGtleSwgdmFs\ndWUpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBwdWJsaWMgU2V0IGVu\ndHJ5U2V0KCkgewogICAgICAgICAgICByZXR1cm4gX2RlbGVnYXRlLmVudHJ5\nU2V0KCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0\nbyB0ZXN0IGN1c3RvbSBtYXAgaGFuZGxpbmcuICBDb3B5IGNvbnN0cnVjdG9y\nIGludGVudGlvbmFsbHkgCiAgICAgKiBvbW1pdHRlZC4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyBjbGFzcyBDdXN0b21Tb3J0ZWRNYXAKICAgICAgICBl\neHRlbmRzIFRyZWVNYXAgewogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0\nbyB0ZXN0IGN1c3RvbSBtYXAgaGFuZGxpbmcuICBDb3B5IGNvbnN0cnVjdG9y\nIGludGVudGlvbmFsbHkgCiAgICAgKiBvbW1pdHRlZC4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyBjbGFzcyBDdXN0b21Db21wYXJhdG9yU29ydGVkTWFw\nCiAgICAgICAgZXh0ZW5kcyBUcmVlTWFwIHsKCiAgICAgICAgcHVibGljIEN1\nc3RvbUNvbXBhcmF0b3JTb3J0ZWRNYXAoKSB7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgQ3VzdG9tQ29tcGFyYXRvclNvcnRlZE1hcChDb21wYXJhdG9y\nIGNvbXApIHsKICAgICAgICAgICAgc3VwZXIoY29tcCk7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byB0ZXN0IHRyYW5zZmVyIG9m\nIGNvbXBhcmF0b3JzIHRvIHByb3hpZXMuCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIGNsYXNzIEN1c3RvbUNvbXBhcmF0b3IKICAgICAgICBpbXBsZW1l\nbnRzIENvbXBhcmF0b3IgewoKICAgICAgICBwdWJsaWMgaW50IGNvbXBhcmUo\nT2JqZWN0IG8xLCBPYmplY3QgbzIpIHsKICAgICAgICAgICAgcmV0dXJuICgo\nQ29tcGFyYWJsZSkgbzEpLmNvbXBhcmVUbyhvMik7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogVXNlZCB0byB0ZXN0IGN1c3RvbSBkYXRlIGhh\nbmRsaW5nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEN1c3Rv\nbURhdGUKICAgICAgICBleHRlbmRzIFRpbWVzdGFtcCB7CgogICAgICAgIHB1\nYmxpYyBDdXN0b21EYXRlKGxvbmcgdGltZSkgewogICAgICAgICAgICBzdXBl\ncih0aW1lKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBVc2Vk\nIHRvIHRlc3QgY3VzdG9tIGJlYW4gaGFuZGxpbmcuCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgY2xhc3MgQ3VzdG9tQmVhbiB7CiAgICAgICAgcHJpdmF0\nZSBTdHJpbmcgX3N0cmluZzsKICAgICAgICBwcml2YXRlIGludCBfbnVtYmVy\nOwoKICAgICAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmluZygpIHsKICAgICAg\nICAgICAgcmV0dXJuIF9zdHJpbmc7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCBzZXRTdHJpbmcoU3RyaW5nIHN0cikgewogICAgICAgICAgICBf\nc3RyaW5nID0gc3RyOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGludCBn\nZXROdW1iZXIoKSB7IAogICAgICAgICAgICByZXR1cm4gX251bWJlcjsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldE51bWJlcihpbnQgbnVt\nYmVyKSB7CiAgICAgICAgICAgIF9udW1iZXIgPSBudW1iZXI7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byB0ZXN0IGN1c3RvbSBi\nZWFuIGhhbmRsaW5nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNz\nIEN1c3RvbUNvcHlDb25zdHJ1Y3RvckJlYW4gCiAgICAgICAgZXh0ZW5kcyBD\ndXN0b21CZWFuIHsKCiAgICAgICAgcHVibGljIEN1c3RvbUNvcHlDb25zdHJ1\nY3RvckJlYW4oQ3VzdG9tQmVhbiBiZWFuKSB7CiAgICAgICAgICAgIHNldFN0\ncmluZyhiZWFuLmdldFN0cmluZygpKTsKICAgICAgICAgICAgc2V0TnVtYmVy\nKGJlYW4uZ2V0TnVtYmVyKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioK\nICAgICAqIFVzZWQgdG8gbm9uLXByb3h5YWJsZSBjdXN0b20gYmVhbiBoYW5k\nbGluZy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBjbGFzcyBOb25wcm94\neWFibGVCZWFuIAogICAgICAgIGV4dGVuZHMgQ3VzdG9tQmVhbiB7CgogICAg\nICAgIHB1YmxpYyBOb25wcm94eWFibGVCZWFuKGxvbmcgeCkgewogICAgICAg\nICAgICAvLyBzaW5nbGUgbm9uLWRlZmF1bHQsIG5vbi1jb3B5IGNvbnN0cnVj\ndG9yCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byB0\nZXN0IGN1c3RvbSBjYWxlbmRhciBoYW5kbGluZy4KICAgICAqLwogICAgcHVi\nbGljIHN0YXRpYyBjbGFzcyBDdXN0b21DYWxlbmRhcgogICAgICAgIGV4dGVu\nZHMgR3JlZ29yaWFuQ2FsZW5kYXIgewogICAgfQp9Cg==\n","encoding":"base64"}

