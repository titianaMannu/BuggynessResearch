{"sha":"9af0c0c5d4ef016c2df750aebb3490951628e7b8","node_id":"MDQ6QmxvYjIwNjM2NDo5YWYwYzBjNWQ0ZWYwMTZjMmRmNzUwYWViYjM0OTA5NTE2MjhlN2I4","size":5039,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9af0c0c5d4ef016c2df750aebb3490951628e7b8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZTsKCmltcG9ydCBq\nYXZhLmxhbmcuaW5zdHJ1bWVudC5JbnN0cnVtZW50YXRpb247CmltcG9ydCBq\nYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlv\nbkltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29u\nZmlndXJhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuSjJEb1ByaXZIZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnV0aWwuT3B0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLkNsYXNzUmVzb2x2ZXI7CgovKioKICogPHA+SmF2YSBhZ2VudCB0aGF0\nIG1ha2VzIHBlcnNpc3RlbnQgY2xhc3NlcyB3b3JrIHdpdGggT3BlbkpQQSBh\ndCBydW50aW1lLgogKiBUaGlzIGlzIGFjaGlldmVkIGJ5IGVpdGhlciBydW5u\naW5nIHRoZSBlbmhhbmNlciBvbiB0aGUgY2xhc3NlcyBhcyB0aGV5CiAqIGFy\nZSBsb2FkZWQsIG9yIGJ5IHJlZGVmaW5pbmcgdGhlIGNsYXNzZXMgb24gdGhl\nIGZseS4KICogVGhlIGFnZW50IGlzIGxhdW5jaGVkIGF0IEpWTSBzdGFydHVw\nIGZyb20gdGhlIGNvbW1hbmQgbGluZTo8L3A+CiAqCiAqIDxwPjxjb2RlPmph\ndmEgLWphdmFhZ2VudDpvcGVuanBhLmphcls9Jmx0O29wdGlvbnMmZ3Q7XTwv\nY29kZT4KICogIFRoZSBvcHRpb25zIHN0cmluZyBzaG91bGQgYmUgZm9ybWF0\ndGVkIGFzIGEgT3BlbkpQQSBwbHVnaW4sIGFuZCBtYXkKICogY29udGFpbiBh\nbnkgcHJvcGVydGllcyB1bmRlcnN0b29kIGJ5IHRoZSBPcGVuSlBBIGVuaGFu\nY2VyIG9yIGFueQogKiBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMuIEZvciBl\neGFtcGxlOjwvcD4KICoKICogPHA+PGNvZGU+amF2YSAtamF2YWFnZW50Om9w\nZW5qcGEuamFyPC9jb2RlPjwvcD4KICoKICogPHA+QnkgZGVmYXVsdCwgaWYg\nc3BlY2lmaWVkLCB0aGUgYWdlbnQgcnVucyB0aGUgT3BlbkpQQSBlbmhhbmNl\nciBvbgogKiBhbGwgY2xhc3NlcyBsaXN0ZWQgaW4gdGhlIGZpcnN0IHBlcnNp\nc3RlbmNlIHVuaXQgYXMgdGhleSBhcmUgbG9hZGVkLAogKiBhbmQgcmVkZWZp\nbmVzIGFsbCBvdGhlciBwZXJzaXN0ZW50IGNsYXNzZXMgd2hlbiB0aGV5IGFy\nZSBlbmNvdW50ZXJlZC4KICogVG8gZGlzYWJsZSBlbmhhbmNlbWVudCBhdCBj\nbGFzcy1sb2FkIHRpbWUgYW5kIHJlbHkgc29sZWx5IG9uIHRoZQogKiByZWRl\nZmluaXRpb24gbG9naWMsIHNldCB0aGUgQ2xhc3NMb2FkRW5oYW5jZW1lbnQg\nZmxhZyB0byBmYWxzZS4gVG8KICogZGlzYWJsZSByZWRlZmluaXRpb24gYW5k\nIHJlbHkgc29sZWx5IG9uIHByZS1kZXBsb3ltZW50IG9yIGNsYXNzLWxvYWQK\nICogZW5oYW5jZW1lbnQsIHNldCB0aGUgUnVudGltZVJlZGVmaW5pdGlvbiBm\nbGFnIHRvIGZhbHNlLgogKiA8L3A+CiAqCiAqIDxwPjxjb2RlPmphdmEgLWph\ndmFhZ2VudDpvcGVuanBhLmphcj1DbGFzc0xvYWRFbmhhbmNlbWVudD1mYWxz\nZTwvY29kZT48L3A+CiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBhdXRo\nb3IgUGF0cmljayBMaW5za2V5CiAqLwpwdWJsaWMgY2xhc3MgUENFbmhhbmNl\nckFnZW50IHsKCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgcHJlbWFpbihTdHJp\nbmcgYXJncywgSW5zdHJ1bWVudGF0aW9uIGluc3QpIHsKICAgICAgICBPcHRp\nb25zIG9wdHMgPSBDb25maWd1cmF0aW9ucy5wYXJzZVByb3BlcnRpZXMoYXJn\ncyk7CgogICAgICAgIGlmIChvcHRzLmNvbnRhaW5zS2V5KCJDbGFzc0xvYWRF\nbmhhbmNlbWVudCIpIHx8CiAgICAgICAgICAgIG9wdHMuY29udGFpbnNLZXko\nImNsYXNzTG9hZEVuaGFuY2VtZW50IikpIHsKICAgICAgICAgICAgaWYgKG9w\ndHMuZ2V0Qm9vbGVhblByb3BlcnR5KAogICAgICAgICAgICAgICAgIkNsYXNz\nTG9hZEVuaGFuY2VtZW50IiwgImNsYXNzTG9hZEVuaGFuY2VtZW50IiwgdHJ1\nZSkpCiAgICAgICAgICAgICAgICByZWdpc3RlckNsYXNzTG9hZEVuaGFuY2Vy\nKGluc3QsIG9wdHMpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChvcHRz\nLmNvbnRhaW5zS2V5KCJSdW50aW1lRW5oYW5jZW1lbnQiKSB8fAogICAgICAg\nICAgICBvcHRzLmNvbnRhaW5zS2V5KCJydW50aW1lRW5oYW5jZW1lbnQiKSkg\newogICAgICAgICAgICAvLyBEZXByZWNhdGVkIHByb3BlcnR5IHNldHRpbmcK\nICAgICAgICAgICAgaWYgKG9wdHMuZ2V0Qm9vbGVhblByb3BlcnR5KAogICAg\nICAgICAgICAgICAgIlJ1bnRpbWVFbmhhbmNlbWVudCIsICJydW50aW1lRW5o\nYW5jZW1lbnQiLCB0cnVlKSkKICAgICAgICAgICAgICAgIHJlZ2lzdGVyQ2xh\nc3NMb2FkRW5oYW5jZXIoaW5zdCwgb3B0cyk7CiAgICAgICAgfSBlbHNlIHsK\nICAgICAgICAgICAgLy8gaWYgbmVpdGhlciBpcyBzZXQsIHRoZW4gd2Ugc2hv\ndWxkIGJlIHR1cm5pbmcgaXQgb24uIFdlIG5lZWQgdGhpcwogICAgICAgICAg\nICAvLyBsb2dpYyBpbnN0ZWFkIG9mIGp1c3QgYSBnZXRCb29sZWFuUHJvcGVy\ndHkoKSBiZWNhdXNlIG9mIHRoZQogICAgICAgICAgICAvLyBiYWNrd2FyZHMt\nY29tcGF0IGxvZ2ljIGZsb3cuCiAgICAgICAgICAgIHJlZ2lzdGVyQ2xhc3NM\nb2FkRW5oYW5jZXIoaW5zdCwgb3B0cyk7CiAgICAgICAgfQoKICAgICAgICBp\nZiAob3B0cy5nZXRCb29sZWFuUHJvcGVydHkoCiAgICAgICAgICAgICJSdW50\naW1lUmVkZWZpbml0aW9uIiwgInJ1bnRpbWVSZWRlZmluaXRpb24iLCB0cnVl\nKSkgewogICAgICAgICAgICBJbnN0cnVtZW50YXRpb25GYWN0b3J5LnNldElu\nc3RydW1lbnRhdGlvbihpbnN0KTsKICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICBJbnN0cnVtZW50YXRpb25GYWN0b3J5LnNldER5bmFtaWNhbGx5SW5z\ndGFsbEFnZW50KGZhbHNlKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0\nZSBzdGF0aWMgdm9pZCByZWdpc3RlckNsYXNzTG9hZEVuaGFuY2VyKEluc3Ry\ndW1lbnRhdGlvbiBpbnN0LAogICAgICAgIE9wdGlvbnMgb3B0cykgewogICAg\nICAgIE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYgPSBuZXcgT3BlbkpQQUNv\nbmZpZ3VyYXRpb25JbXBsKCk7CiAgICAgICAgQ29uZmlndXJhdGlvbnMucG9w\ndWxhdGVDb25maWd1cmF0aW9uKGNvbmYsIG9wdHMpOwogICAgICAgIC8vIGRv\nbid0IGFsbG93IGNvbm5lY3Rpb25zCiAgICAgICAgY29uZi5zZXRDb25uZWN0\naW9uVXNlck5hbWUobnVsbCk7CiAgICAgICAgY29uZi5zZXRDb25uZWN0aW9u\nUGFzc3dvcmQobnVsbCk7CiAgICAgICAgY29uZi5zZXRDb25uZWN0aW9uVVJM\nKG51bGwpOwogICAgICAgIGNvbmYuc2V0Q29ubmVjdGlvbkRyaXZlck5hbWUo\nbnVsbCk7CiAgICAgICAgY29uZi5zZXRDb25uZWN0aW9uRmFjdG9yeU5hbWUo\nbnVsbCk7CiAgICAgICAgLy8gc2V0IHNpbmdsZSBjbGFzcyByZXNvbHZlcgog\nICAgICAgIGZpbmFsIENsYXNzTG9hZGVyIHRtcExvYWRlciA9IChDbGFzc0xv\nYWRlcikgQWNjZXNzQ29udHJvbGxlcgogICAgICAgICAgICAuZG9Qcml2aWxl\nZ2VkKEoyRG9Qcml2SGVscGVyCiAgICAgICAgICAgICAgICAubmV3VGVtcG9y\nYXJ5Q2xhc3NMb2FkZXJBY3Rpb24oKENsYXNzTG9hZGVyKSBBY2Nlc3NDb250\ncm9sbGVyCiAgICAgICAgICAgICAgICAgICAgLmRvUHJpdmlsZWdlZChKMkRv\nUHJpdkhlbHBlci5nZXRDb250ZXh0Q2xhc3NMb2FkZXJBY3Rpb24oKSkKICAg\nICAgICAgICAgICAgICAgICApKTsKICAgICAgICBjb25mLnNldENsYXNzUmVz\nb2x2ZXIobmV3IENsYXNzUmVzb2x2ZXIoKSB7CiAgICAgICAgICAgIHB1Ymxp\nYyBDbGFzc0xvYWRlciBnZXRDbGFzc0xvYWRlcihDbGFzcyBjb250ZXh0LCBD\nbGFzc0xvYWRlciBlbnYpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0bXBM\nb2FkZXI7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25m\nLnNldFJlYWRPbmx5KHRydWUpOwogICAgICAgIGNvbmYuaW5zdGFudGlhdGVB\nbGwoKTsgLy8gYXZvaWQgdGhyZWFkaW5nIGlzc3VlcwoKICAgICAgICBQQ0Ns\nYXNzRmlsZVRyYW5zZm9ybWVyIHRyYW5zZm9ybWVyID0gbmV3IFBDQ2xhc3NG\naWxlVHJhbnNmb3JtZXIKICAgICAgICAgICAgKGNvbmYubmV3TWV0YURhdGFS\nZXBvc2l0b3J5SW5zdGFuY2UoKSwgb3B0cywgdG1wTG9hZGVyKTsKICAgICAg\nICBpbnN0LmFkZFRyYW5zZm9ybWVyKHRyYW5zZm9ybWVyKTsKICAgIH0KfQo=\n","encoding":"base64"}

