{"sha":"baa7a6225c0f9a67b6deb260203834c0bddfc2e0","node_id":"MDQ6QmxvYjIwNjM2NDpiYWE3YTYyMjVjMGY5YTY3YjZkZWIyNjAyMDM4MzRjMGJkZGZjMmUw","size":5593,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/baa7a6225c0f9a67b6deb260203834c0bddfc2e0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGlzY3Jp\nbWluYXRvcjsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5h\nZ2VyOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xh\nc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0\nYS5EaXNjcmltaW5hdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1l\ndGEuSmF2YVR5cGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xhc3Mg\nVGVzdERpc2NyaW1pbmF0b3JUeXBlcyBleHRlbmRzIFNpbmdsZUVNRlRlc3RD\nYXNlIHsKCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRVcCgpIHsKICAgICAgICBz\ndXBlci5zZXRVcChDaGFyQWJzdHJhY3RFbnRpdHkuY2xhc3MsIENoYXJMZWFm\nRW50aXR5LmNsYXNzLAogICAgICAgICAgICAgICAgQ2hhclJvb3RFbnRpdHku\nY2xhc3MsIEludGVnZXJBYnN0cmFjdEVudGl0eS5jbGFzcywKICAgICAgICAg\nICAgICAgIEludGVnZXJMZWFmRW50aXR5LmNsYXNzLCBJbnRlZ2VyUm9vdEVu\ndGl0eS5jbGFzcywKICAgICAgICAgICAgICAgIFN0cmluZ0Fic3RyYWN0RW50\naXR5LmNsYXNzLCBTdHJpbmdMZWFmRW50aXR5LmNsYXNzLAogICAgICAgICAg\nICAgICAgU3RyaW5nUm9vdEVudGl0eS5jbGFzcyk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdENoYXJEaXNjcmltaW5hdG9ycygpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsg\nLy8gbG9hZCB0eXBlcwoKICAgICAgICBEaXNjcmltaW5hdG9yIGRpc2NyaW0g\nPSBnZXRNYXBwaW5nKCJDaGFyQWJzdHJhY3RFbnRpdHkiKQogICAgICAgICAg\nICAgICAgLmdldERpc2NyaW1pbmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMobmV3IENoYXJhY3RlcignQycpLCBkaXNjcmltLmdldFZhbHVlKCkpOyAv\nLyBHZW5lcmF0ZWQKICAgICAgICBhc3NlcnRFcXVhbHMoSmF2YVR5cGVzLkNI\nQVIsIGRpc2NyaW0uZ2V0SmF2YVR5cGUoKSk7CgogICAgICAgIGRpc2NyaW0g\nPSBnZXRNYXBwaW5nKCJjaHJMZWFmIikuZ2V0RGlzY3JpbWluYXRvcigpOwog\nICAgICAgIGFzc2VydEVxdWFscyhuZXcgQ2hhcmFjdGVyKCdjJyksIGRpc2Ny\naW0uZ2V0VmFsdWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEphdmFUeXBl\ncy5DSEFSLCBkaXNjcmltLmdldEphdmFUeXBlKCkpOwoKICAgICAgICBkaXNj\ncmltID0gZ2V0TWFwcGluZygiQ2hhclJvb3RFbnRpdHkiKS5nZXREaXNjcmlt\naW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ldyBDaGFyYWN0ZXIo\nJ1InKSwgZGlzY3JpbS5nZXRWYWx1ZSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoSmF2YVR5cGVzLkNIQVIsIGRpc2NyaW0uZ2V0SmF2YVR5cGUoKSk7CiAg\nICAgICAgCiAgICAgICAgQ2hhckxlYWZFbnRpdHkgbGVhZiA9IG5ldyBDaGFy\nTGVhZkVudGl0eSgpOwogICAgICAgIENoYXJSb290RW50aXR5IHJvb3QgPSBu\nZXcgQ2hhclJvb3RFbnRpdHkoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChsZWFmKTsKICAgICAg\nICBlbS5wZXJzaXN0KHJvb3QpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAgZW0ucmVmcmVzaChsZWFm\nKTsKICAgICAgICBlbS5yZWZyZXNoKHJvb3QpOwogICAgICAgIAogICAgICAg\nIGVtLmNsZWFyKCk7CiAgICAgICAgCiAgICAgICAgQ2hhckxlYWZFbnRpdHkg\nbGVhZjIgPSBlbS5maW5kKENoYXJMZWFmRW50aXR5LmNsYXNzLCBsZWFmLmdl\ndElkKCkpOwogICAgICAgIENoYXJSb290RW50aXR5IHJvb3QyID0gZW0uZmlu\nZChDaGFyUm9vdEVudGl0eS5jbGFzcywgcm9vdC5nZXRJZCgpKTsKICAgICAg\nICAKICAgICAgICBhc3NlcnROb3ROdWxsKGxlYWYyKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKHJvb3QyKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RJbnREaXNjcmltaW5hdG9ycygpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsgLy8gbG9hZCB0aGUgdHlwZXMKCiAgICAgICAgRGlzY3JpbWluYXRv\nciBkaXNjcmltID0gZ2V0TWFwcGluZygiSW50ZWdlckFic3RyYWN0RW50aXR5\nIikKICAgICAgICAgICAgICAgIC5nZXREaXNjcmltaW5hdG9yKCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKG5ldyBJbnRlZ2VyKCJJbnRlZ2VyQWJzdHJhY3RF\nbnRpdHkiLmhhc2hDb2RlKCkpLCBkaXNjcmltCiAgICAgICAgICAgICAgICAu\nZ2V0VmFsdWUoKSk7IC8vIEdlbmVyYXRlZCB2YWx1ZQogICAgICAgIGFzc2Vy\ndEVxdWFscyhKYXZhVHlwZXMuSU5ULCBkaXNjcmltLmdldEphdmFUeXBlKCkp\nOwoKICAgICAgICBkaXNjcmltID0gZ2V0TWFwcGluZygiaW50TGVhZiIpLmdl\ndERpc2NyaW1pbmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVhbHMobmV3IElu\ndGVnZXIoImludExlYWYiLmhhc2hDb2RlKCkpLCBkaXNjcmltLmdldFZhbHVl\nKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhKYXZhVHlwZXMuSU5ULCBkaXNj\ncmltLmdldEphdmFUeXBlKCkpOwoKICAgICAgICBkaXNjcmltID0gZ2V0TWFw\ncGluZygiSW50ZWdlclJvb3RFbnRpdHkiKS5nZXREaXNjcmltaW5hdG9yKCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ldyBJbnRlZ2VyKDEwMTAxKSwgZGlz\nY3JpbS5nZXRWYWx1ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSmF2YVR5\ncGVzLklOVCwgZGlzY3JpbS5nZXRKYXZhVHlwZSgpKTsKCiAgICAgICAgSW50\nZWdlckxlYWZFbnRpdHkgbGVhZiA9IG5ldyBJbnRlZ2VyTGVhZkVudGl0eSgp\nOwogICAgICAgIEludGVnZXJSb290RW50aXR5IHJvb3QgPSBuZXcgSW50ZWdl\nclJvb3RFbnRpdHkoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChsZWFmKTsKICAgICAgICBlbS5w\nZXJzaXN0KHJvb3QpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CiAgICAgICAgCiAgICAgICAgZW0ucmVmcmVzaChsZWFmKTsKICAg\nICAgICBlbS5yZWZyZXNoKHJvb3QpOwogICAgICAgIAogICAgICAgIGVtLmNs\nZWFyKCk7CgogICAgICAgIEludGVnZXJMZWFmRW50aXR5IGxlYWYyID0KICAg\nICAgICAgICAgICAgIGVtLmZpbmQoSW50ZWdlckxlYWZFbnRpdHkuY2xhc3Ms\nIGxlYWYuZ2V0SWQoKSk7CiAgICAgICAgSW50ZWdlclJvb3RFbnRpdHkgcm9v\ndDIgPQogICAgICAgICAgICAgICAgZW0uZmluZChJbnRlZ2VyUm9vdEVudGl0\neS5jbGFzcywgcm9vdC5nZXRJZCgpKTsKICAgICAgICAKICAgICAgICBhc3Nl\ncnROb3ROdWxsKGxlYWYyKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHJvb3Qy\nKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RTdHJpbmdEaXNjcmltaW5hdG9ycygpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsgLy8gbG9h\nZCB0aGUgdHlwZXMKICAgICAgICBEaXNjcmltaW5hdG9yIGRpc2NyaW0gPSBn\nZXRNYXBwaW5nKCJTdHJpbmdBYnN0cmFjdEVudGl0eSIpCiAgICAgICAgICAg\nICAgICAuZ2V0RGlzY3JpbWluYXRvcigpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiU3RyaW5nQWJzdHJhY3RFbnRpdHkiLCBkaXNjcmltLmdldFZhbHVlKCkp\nOyAvLyBHZW5lcmF0ZWQKICAgICAgICBhc3NlcnRFcXVhbHMoSmF2YVR5cGVz\nLlNUUklORywgZGlzY3JpbS5nZXRKYXZhVHlwZSgpKTsKCiAgICAgICAgZGlz\nY3JpbSA9IGdldE1hcHBpbmcoInN0ckxlYWYiKS5nZXREaXNjcmltaW5hdG9y\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzdHJMZWFmIiwgZGlzY3JpbS5n\nZXRWYWx1ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSmF2YVR5cGVzLlNU\nUklORywgZGlzY3JpbS5nZXRKYXZhVHlwZSgpKTsKCiAgICAgICAgZGlzY3Jp\nbSA9IGdldE1hcHBpbmcoIlN0cmluZ1Jvb3RFbnRpdHkiKS5nZXREaXNjcmlt\naW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJTdHJpbmdSb290Iiwg\nZGlzY3JpbS5nZXRWYWx1ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSmF2\nYVR5cGVzLlNUUklORywgZGlzY3JpbS5nZXRKYXZhVHlwZSgpKTsKICAgICAg\nICAKICAgICAgICBTdHJpbmdMZWFmRW50aXR5IGxlYWYgPSBuZXcgU3RyaW5n\nTGVhZkVudGl0eSgpOwogICAgICAgIFN0cmluZ1Jvb3RFbnRpdHkgcm9vdCA9\nIG5ldyBTdHJpbmdSb290RW50aXR5KCk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QobGVhZik7CiAg\nICAgICAgZW0ucGVyc2lzdChyb290KTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIGVtLnJlZnJlc2go\nbGVhZik7CiAgICAgICAgZW0ucmVmcmVzaChyb290KTsKICAgICAgICAKICAg\nICAgICBlbS5jbGVhcigpOwogICAgICAgIAogICAgICAgIFN0cmluZ0xlYWZF\nbnRpdHkgbGVhZjIgPSBlbS5maW5kKFN0cmluZ0xlYWZFbnRpdHkuY2xhc3Ms\nIGxlYWYuZ2V0SWQoKSk7CiAgICAgICAgU3RyaW5nUm9vdEVudGl0eSByb290\nMiA9IGVtLmZpbmQoU3RyaW5nUm9vdEVudGl0eS5jbGFzcywgcm9vdC5nZXRJ\nZCgpKTsKICAgICAgICAKICAgICAgICBhc3NlcnROb3ROdWxsKGxlYWYyKTsK\nICAgICAgICBhc3NlcnROb3ROdWxsKHJvb3QyKTsKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

