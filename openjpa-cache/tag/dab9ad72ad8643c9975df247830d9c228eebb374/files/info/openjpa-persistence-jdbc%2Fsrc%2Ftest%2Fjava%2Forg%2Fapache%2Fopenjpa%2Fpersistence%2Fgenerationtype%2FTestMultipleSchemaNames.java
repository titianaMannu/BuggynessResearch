{"sha":"94310df54b17d39e25b4fd19a39a4f5ffabb7e59","node_id":"MDQ6QmxvYjIwNjM2NDo5NDMxMGRmNTRiMTdkMzllMjViNGZkMTlhMzlhNGY1ZmZhYmI3ZTU5","size":8754,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/94310df54b17d39e25b4fd19a39a4f5ffabb7e59","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5nZW5lcmF0aW9u\ndHlwZTsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5RdWVyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdE11\nbHRpcGxlU2NoZW1hTmFtZXMgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChEb2cx\nLmNsYXNzLCBEb2cyLmNsYXNzLCBEb2dUYWJsZS5jbGFzcywgRG9nVGFibGUy\nLmNsYXNzKTsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIC8vIGNsZWFudXAgZGF0YWJhc2UgZmlyc3QK\nICAgICAgICBRdWVyeSBxcnkgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGQg\nZnJvbSBEb2cxIGQiKTsKICAgICAgICBMaXN0IHJlc3VsdCA9IHFyeS5nZXRS\nZXN1bHRMaXN0KCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5k\nZXggPCByZXN1bHQuc2l6ZSgpOyBpbmRleCsrKSB7CiAgICAgICAgICAgIERv\nZzEgT2JqID0gKERvZzEpIHJlc3VsdC5nZXQoaW5kZXgpOwogICAgICAgICAg\nICBlbS5yZW1vdmUoT2JqKTsKICAgICAgICB9CiAgICAgICAgUXVlcnkgcXJ5\nMiA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZzIgZCIpOwog\nICAgICAgIExpc3QgcmVzdWx0MiA9IHFyeTIuZ2V0UmVzdWx0TGlzdCgpOwoK\nICAgICAgICBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgcmVzdWx0Mi5z\naXplKCk7IGluZGV4KyspIHsKICAgICAgICAgICAgRG9nMiBPYmogPSAoRG9n\nMikgcmVzdWx0Mi5nZXQoaW5kZXgpOwogICAgICAgICAgICBlbS5yZW1vdmUo\nT2JqKTsKICAgICAgICB9CiAgICAgICAgUXVlcnkgcXJ5MyA9IGVtLmNyZWF0\nZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZ1RhYmxlIGQiKTsKICAgICAgICBM\naXN0IHJlc3VsdDMgPSBxcnkzLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAg\nZm9yIChpbnQgaW5kZXggPSAwOyBpbmRleCA8IHJlc3VsdDMuc2l6ZSgpOyBp\nbmRleCsrKSB7CiAgICAgICAgICAgIERvZ1RhYmxlIE9iaiA9IChEb2dUYWJs\nZSkgcmVzdWx0My5nZXQoaW5kZXgpOwogICAgICAgICAgICBlbS5yZW1vdmUo\nT2JqKTsKICAgICAgICB9CiAgICAgICAgUXVlcnkgcXJ5NCA9IGVtLmNyZWF0\nZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZ1RhYmxlMiBkIik7CiAgICAgICAg\nTGlzdCByZXN1bHQ0ID0gcXJ5NC5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAg\nIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCByZXN1bHQ0LnNpemUoKTsg\naW5kZXgrKykgewogICAgICAgICAgICBEb2dUYWJsZTIgT2JqID0gKERvZ1Rh\nYmxlMikgcmVzdWx0NC5nZXQoaW5kZXgpOwogICAgICAgICAgICBlbS5yZW1v\ndmUoT2JqKTsKICAgICAgICB9CgogICAgICAgIFF1ZXJ5IGRlbHNjaGVtYTEg\nPSBlbQogICAgICAgICAgICAgICAgLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJkZWxl\ndGUgZnJvbSBzY2hlbWExLm9wZW5qcGFfc2VxdWVuY2VfdGFibGUiKTsKICAg\nICAgICBkZWxzY2hlbWExLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICBRdWVy\neSBkZWxzY2hlbWEyID0gZW0KICAgICAgICAgICAgICAgIC5jcmVhdGVOYXRp\ndmVRdWVyeSgiZGVsZXRlIGZyb20gc2NoZW1hMi5vcGVuanBhX3NlcXVlbmNl\nX3RhYmxlIik7CiAgICAgICAgZGVsc2NoZW1hMi5leGVjdXRlVXBkYXRlKCk7\nCiAgICAgICAgUXVlcnkgZGVsZ2VudGFibGUgPSBlbS5jcmVhdGVOYXRpdmVR\ndWVyeSgiZGVsZXRlIGZyb20gc2NoZW1hMS5pZF9nZW4xIik7CiAgICAgICAg\nZGVsZ2VudGFibGUuZXhlY3V0ZVVwZGF0ZSgpOwogICAgICAgIFF1ZXJ5IGRl\nbGdlbnRhYmxlMiA9IGVtCiAgICAgICAgICAgICAgICAuY3JlYXRlTmF0aXZl\nUXVlcnkoImRlbGV0ZSBmcm9tIHNjaGVtYTIuaWRfZ2VuMiIpOwogICAgICAg\nIGRlbGdlbnRhYmxlMi5leGVjdXRlVXBkYXRlKCk7CgogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RHZW5lcmF0ZWRBVVRPKCkgewogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIGtlbSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5j\nYXN0KGVtKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7\nCgogICAgICAgIERvZzEgZG9nMSA9IG5ldyBEb2cxKCk7CiAgICAgICAgZG9n\nMS5zZXROYW1lKCJoZWxsb0RvZzEiKTsKICAgICAgICBkb2cxLnNldFByaWNl\nKDEyMDAwKTsKCiAgICAgICAgZW0ucGVyc2lzdChkb2cxKTsKICAgICAgICBE\nb2cxIGRvZzFhID0gbmV3IERvZzEoKTsKICAgICAgICBkb2cxYS5zZXROYW1l\nKCJoZWxsb0RvZzIiKTsKICAgICAgICBkb2cxYS5zZXRQcmljZSgyMjAwMCk7\nCiAgICAgICAgZW0ucGVyc2lzdChkb2cxYSk7CiAgICAgICAgLy8gYWRkIGRv\nZzIKICAgICAgICBEb2cyIGRvZzIgPSBuZXcgRG9nMigpOwogICAgICAgIGRv\nZzIuc2V0TmFtZSgiaGVsbG9Eb2czIik7CiAgICAgICAgZG9nMi5zZXRQcmlj\nZSgxNTAwMCk7CiAgICAgICAgZW0ucGVyc2lzdChkb2cyKTsKCiAgICAgICAg\nRG9nMiBkb2cyYSA9IG5ldyBEb2cyKCk7CiAgICAgICAgZG9nMmEuc2V0TmFt\nZSgiaGVsbG9Eb2c0Iik7CiAgICAgICAgZG9nMmEuc2V0UHJpY2UoMjUwMDAp\nOwogICAgICAgIGVtLnBlcnNpc3QoZG9nMmEpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CgogICAgICAgIERvZzEgZG9nMXggPSBl\nbS5maW5kKERvZzEuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cxKSk7CiAg\nICAgICAgLy8gRGVyYnkgY2FuJ3QgZ3VhcmFudGVlIHRoZSBvcmRlciBvZiB0\naGUgZ2VuZXJhdGVkIHZhbHVlLCB0aGVyZWZvcmUsCiAgICAgICAgLy8gd2Ug\nY2FuJ3QgYXNzZXJ0IHRoZSBpZCBiYXNlZCBvbiB0aGUgb3JkZXIuIEZvciBk\nYjIsIHdlIHNlZSB0aGUgaWQgCiAgICAgICAgLy8gdmFsdWUgaW4gdGhlIHJp\nZ2h0IG9yZGVyCiAgICAgICAgYXNzZXJ0VHJ1ZShkb2cxeC5nZXRJZDIoKSA9\nPSAxIHx8IGRvZzF4LmdldElkMigpID09IDIpOwogICAgICAgIGFzc2VydEVx\ndWFscyhkb2cxeC5nZXROYW1lKCksICJoZWxsb0RvZzEiKTsKICAgICAgICBk\nb2cxeC5zZXROYW1lKCJEb2cxIik7CiAgICAgICAgZG9nMXguc2V0RG9tZXN0\naWModHJ1ZSk7CiAgICAgICAgRG9nMSBkb2cxMSA9IGVtLmZpbmQoRG9nMS5j\nbGFzcywga2VtLmdldE9iamVjdElkKGRvZzFhKSk7CiAgICAgICAgYXNzZXJ0\nVHJ1ZShkb2cxMS5nZXRJZDIoKSA9PSAxIHx8IGRvZzExLmdldElkMigpID09\nIDIpOwogICAgICAgIGFzc2VydEVxdWFscyhkb2cxMS5nZXROYW1lKCksICJo\nZWxsb0RvZzIiKTsKICAgICAgICBkb2cxMS5zZXROYW1lKCJEb2cyIik7CiAg\nICAgICAgZG9nMTEuc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAgLy8gdXBk\nYXRlIGRvZzIKICAgICAgICBEb2cyIGRvZzJ4ID0gZW0uZmluZChEb2cyLmNs\nYXNzLCBrZW0uZ2V0T2JqZWN0SWQoZG9nMikpOwogICAgICAgIGFzc2VydFRy\ndWUoZG9nMnguZ2V0SWQyKCkgPT0gMSB8fCBkb2cyeC5nZXRJZDIoKSA9PSAy\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZG9nMnguZ2V0TmFtZSgpLCAiaGVs\nbG9Eb2czIik7CiAgICAgICAgZG9nMnguc2V0TmFtZSgiRG9nMyIpOwogICAg\nICAgIGRvZzJ4LnNldERvbWVzdGljKHRydWUpOwogICAgICAgIERvZzIgZG9n\nMjEgPSBlbS5maW5kKERvZzIuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cy\nYSkpOwogICAgICAgIGFzc2VydFRydWUoZG9nMjEuZ2V0SWQyKCkgPT0gMSB8\nfCBkb2cyMS5nZXRJZDIoKSA9PSAyKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nZG9nMjEuZ2V0TmFtZSgpLCAiaGVsbG9Eb2c0Iik7CiAgICAgICAgZG9nMjEu\nc2V0TmFtZSgiRG9nNCIpOwogICAgICAgIGRvZzIxLnNldERvbWVzdGljKHRy\ndWUpOwoKICAgICAgICAvLyBnZXQgdGhlIHVwZGF0ZSBkb2cgbmFtZQoKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgUXVl\ncnkgcXJ5MSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZzEg\nZCBvcmRlciBieSBkLm5hbWUiKTsKICAgICAgICBMaXN0IHJlc3VsdDEgPSBx\ncnkxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKGludCBpbmRleCA9\nIDA7IGluZGV4IDwgcmVzdWx0MS5zaXplKCk7IGluZGV4KyspIHsKICAgICAg\nICAgICAgRG9nMSBkb2c0ID0gKERvZzEpIHJlc3VsdDEuZ2V0KGluZGV4KTsK\nICAgICAgICAgICAgaW50IGkgPSBpbmRleCArIDE7CiAgICAgICAgICAgIGFz\nc2VydFRydWUoZG9nNC5nZXRJZDIoKSA9PSAxIHx8IGRvZzQuZ2V0SWQyKCkg\nPT0gMik7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhkb2c0LmdldE5hbWUo\nKSwgIkRvZyIgKyBpKTsKICAgICAgICB9CgogICAgICAgIFF1ZXJ5IHFyeTIg\nPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2cyIGQgb3JkZXIg\nYnkgZC5uYW1lIik7CiAgICAgICAgTGlzdCByZXN1bHQyID0gcXJ5Mi5nZXRS\nZXN1bHRMaXN0KCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5k\nZXggPCByZXN1bHQyLnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBE\nb2cyIGRvZzUgPSAoRG9nMikgcmVzdWx0Mi5nZXQoaW5kZXgpOwogICAgICAg\nICAgICBhc3NlcnRUcnVlKGRvZzUuZ2V0SWQyKCkgPT0gMSB8fCBkb2c1Lmdl\ndElkMigpID09IDIpOwogICAgICAgICAgICBpbnQgaiA9IGluZGV4ICsgMzsK\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRvZzUuZ2V0TmFtZSgpLCAiRG9n\nIiArIGopOwogICAgICAgIH0KCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RHZW5lcmF0ZWRUQUJMRSgpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBrZW0gPSBPcGVuSlBBUGVyc2lz\ndGVuY2UuY2FzdChlbSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwoKICAgICAgICBEb2dUYWJsZSBkb2cxID0gbmV3IERvZ1RhYmxl\nKCk7CiAgICAgICAgZG9nMS5zZXROYW1lKCJoZWxsb0RvZzEiKTsKICAgICAg\nICBkb2cxLnNldFByaWNlKDEyMDAwKTsKCiAgICAgICAgZW0ucGVyc2lzdChk\nb2cxKTsKICAgICAgICBEb2dUYWJsZSBkb2cxYSA9IG5ldyBEb2dUYWJsZSgp\nOwogICAgICAgIGRvZzFhLnNldE5hbWUoImhlbGxvRG9nMiIpOwogICAgICAg\nIGRvZzFhLnNldFByaWNlKDIyMDAwKTsKICAgICAgICBlbS5wZXJzaXN0KGRv\nZzFhKTsKICAgICAgICAvLyBhZGQgZG9nMgogICAgICAgIERvZ1RhYmxlMiBk\nb2cyID0gbmV3IERvZ1RhYmxlMigpOwogICAgICAgIGRvZzIuc2V0TmFtZSgi\naGVsbG9Eb2czIik7CiAgICAgICAgZG9nMi5zZXRQcmljZSgxNTAwMCk7CiAg\nICAgICAgZW0ucGVyc2lzdChkb2cyKTsKCiAgICAgICAgRG9nVGFibGUyIGRv\nZzJhID0gbmV3IERvZ1RhYmxlMigpOwogICAgICAgIGRvZzJhLnNldE5hbWUo\nImhlbGxvRG9nNCIpOwogICAgICAgIGRvZzJhLnNldFByaWNlKDI1MDAwKTsK\nICAgICAgICBlbS5wZXJzaXN0KGRvZzJhKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwoKICAgICAgICBEb2dUYWJsZSBkb2cxeCA9\nIGVtLmZpbmQoRG9nVGFibGUuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cx\nKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShkb2cxeC5nZXRJZDIoKSA9PSAyMCB8\nfCBkb2cxeC5nZXRJZDIoKSA9PSAyMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKGRvZzF4LmdldE5hbWUoKSwgImhlbGxvRG9nMSIpOwogICAgICAgIGRvZzF4\nLnNldE5hbWUoIkRvZzEiKTsKICAgICAgICBkb2cxeC5zZXREb21lc3RpYyh0\ncnVlKTsKICAgICAgICBEb2dUYWJsZSBkb2cxMSA9IGVtLmZpbmQoRG9nVGFi\nbGUuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cxYSkpOwogICAgICAgIGFz\nc2VydFRydWUoZG9nMTEuZ2V0SWQyKCkgPT0gMjAgfHwgZG9nMTEuZ2V0SWQy\nKCkgPT0gMjEpOwogICAgICAgIGFzc2VydEVxdWFscyhkb2cxMS5nZXROYW1l\nKCksICJoZWxsb0RvZzIiKTsKICAgICAgICBkb2cxMS5zZXROYW1lKCJEb2cy\nIik7CiAgICAgICAgZG9nMTEuc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAg\nLy8gdXBkYXRlIGRvZzIKICAgICAgICBEb2dUYWJsZTIgZG9nMnggPSBlbS5m\naW5kKERvZ1RhYmxlMi5jbGFzcywga2VtLmdldE9iamVjdElkKGRvZzIpKTsK\nICAgICAgICBhc3NlcnRUcnVlKGRvZzJ4LmdldElkMigpID09IDEwMCB8fCBk\nb2cyeC5nZXRJZDIoKSA9PSAxMDEpOwogICAgICAgIGFzc2VydEVxdWFscyhk\nb2cyeC5nZXROYW1lKCksICJoZWxsb0RvZzMiKTsKICAgICAgICBkb2cyeC5z\nZXROYW1lKCJEb2czIik7CiAgICAgICAgZG9nMnguc2V0RG9tZXN0aWModHJ1\nZSk7CiAgICAgICAgRG9nVGFibGUyIGRvZzIxID0gZW0uZmluZChEb2dUYWJs\nZTIuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cyYSkpOwogICAgICAgIGFz\nc2VydFRydWUoZG9nMnguZ2V0SWQyKCkgPT0gMTAwIHx8IGRvZzJ4LmdldElk\nMigpID09IDEwMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGRvZzIxLmdldE5h\nbWUoKSwgImhlbGxvRG9nNCIpOwogICAgICAgIGRvZzIxLnNldE5hbWUoIkRv\nZzQiKTsKICAgICAgICBkb2cyMS5zZXREb21lc3RpYyh0cnVlKTsKCiAgICAg\nICAgLy8gZ2V0IHRoZSB1cGRhdGUgZG9nIG5hbWUKCiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHFyeTEgPSBl\nbS5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2dUYWJsZSBkIG9yZGVy\nIGJ5IGQubmFtZSIpOwogICAgICAgIExpc3QgcmVzdWx0MSA9IHFyeTEuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5k\nZXggPCByZXN1bHQxLnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBE\nb2dUYWJsZSBkb2c0ID0gKERvZ1RhYmxlKSByZXN1bHQxLmdldChpbmRleCk7\nCiAgICAgICAgICAgIGFzc2VydFRydWUoZG9nNC5nZXRJZDIoKSA9PSAyMCB8\nfCBkb2c0LmdldElkMigpID09IDIxKTsKICAgICAgICAgICAgaW50IGogPSBp\nbmRleCArIDE7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhkb2c0LmdldE5h\nbWUoKSwgIkRvZyIgKyBqKTsKCiAgICAgICAgfQoKICAgICAgICBRdWVyeSBx\ncnkyID0gZW0KICAgICAgICAgICAgICAgIC5jcmVhdGVRdWVyeSgic2VsZWN0\nIGQgZnJvbSBEb2dUYWJsZTIgZCBvcmRlciBieSBkLm5hbWUiKTsKICAgICAg\nICBMaXN0IHJlc3VsdDIgPSBxcnkyLmdldFJlc3VsdExpc3QoKTsKCiAgICAg\nICAgZm9yIChpbnQgaW5kZXggPSAwOyBpbmRleCA8IHJlc3VsdDIuc2l6ZSgp\nOyBpbmRleCsrKSB7CiAgICAgICAgICAgIERvZ1RhYmxlMiBkb2c1ID0gKERv\nZ1RhYmxlMikgcmVzdWx0Mi5nZXQoaW5kZXgpOwogICAgICAgICAgICBhc3Nl\ncnRUcnVlKGRvZzUuZ2V0SWQyKCkgPT0gMTAwIHx8IGRvZzUuZ2V0SWQyKCkg\nPT0gMTAxKTsKICAgICAgICAgICAgaW50IGogPSBpbmRleCArIDM7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscyhkb2c1LmdldE5hbWUoKSwgIkRvZyIgKyBq\nKTsKICAgICAgICB9CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KfSAvLyBlbmQgb2Yg\nVGVzdE11bHRpcGxlU2NoZW1hTmFtZXMK\n","encoding":"base64"}

