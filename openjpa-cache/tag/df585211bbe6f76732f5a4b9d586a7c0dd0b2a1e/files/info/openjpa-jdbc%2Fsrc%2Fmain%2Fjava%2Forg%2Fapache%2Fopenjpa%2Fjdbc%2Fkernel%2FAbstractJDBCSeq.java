{"sha":"5064c3c61f5e70d2032e4c0a6c42b1901515f470","node_id":"MDQ6QmxvYjIwNjM2NDo1MDY0YzNjNjFmNWU3MGQyMDMyZTRjMGE2YzQyYjE5MDE1MTVmNDcw","size":7103,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5064c3c61f5e70d2032e4c0a6c42b1901515f470","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmF4LnNxbC5EYXRhU291cmNlOwppbXBvcnQg\namF2YXgudHJhbnNhY3Rpb24uVHJhbnNhY3Rpb247CmltcG9ydCBqYXZheC50\ncmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXI7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmVN\nYW5hZ2VyLlJlZkNvdW50Q29ubmVjdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNjaGVtYUdyb3VwOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEV4Y2VwdGlvbnM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlQ29udGV4dDsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RvcmVFeGNl\ncHRpb247CgovKioKICogQWJzdHJhY3Qgc2VxdWVuY2UgaW1wbGVtZW50YXRp\nb24uIEhhbmRsZXMgb2J0YWluaW5nIHRoZSBwcm9wZXIKICogY29ubmVjdGlv\nbiB0byB1c2VkIGJhc2VkIG9uIHdoZXRoZXIgdGhlIHNlcXVlbmNlIGlzIHRy\nYW5zYWN0aW9uYWwgYW5kCiAqIHdoZXRoZXIgYSBzZWNvbmQgZGF0YXNvdXJj\nZSBpcyBjb25maWd1cmVkLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8K\ncHVibGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0SkRCQ1NlcQogICAgaW1w\nbGVtZW50cyBKREJDU2VxIHsKCiAgICBwcm90ZWN0ZWQgaW50IHR5cGUgPSBU\nWVBFX0RFRkFVTFQ7CiAgICBwcm90ZWN0ZWQgT2JqZWN0IGN1cnJlbnQgPSBu\ndWxsOwoKICAgIC8qKgogICAgICogUmVjb3JkcyB0aGUgc2VxdWVuY2UgdHlw\nZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VHlwZShpbnQgdHlwZSkg\newogICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdCBuZXh0KFN0b3JlQ29udGV4dCBjdHgsIENsYXNzTWV0YURhdGEg\nbWV0YSkgewogICAgICAgIEpEQkNTdG9yZSBzdG9yZSA9IGdldFN0b3JlKGN0\neCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY3VycmVudCA9IG5leHRJ\nbnRlcm5hbChzdG9yZSwgKENsYXNzTWFwcGluZykgbWV0YSk7CiAgICAgICAg\nICAgIHJldHVybiBjdXJyZW50OwogICAgICAgIH0gY2F0Y2ggKE9wZW5KUEFF\neGNlcHRpb24ga2UpIHsKICAgICAgICAgICAgdGhyb3cga2U7CiAgICAgICAg\nfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIHRocm93\nIFNRTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoc2UsIHN0b3JlLmdldERCRGljdGlv\nbmFyeSgpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICAgICAg\nfQogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgY3VycmVudChTdG9yZUNvbnRl\neHQgY3R4LCBDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAgICAgICBKREJDU3Rv\ncmUgc3RvcmUgPSBnZXRTdG9yZShjdHgpOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIHJldHVybiBjdXJyZW50SW50ZXJuYWwoc3RvcmUsIChDbGFzc01h\ncHBpbmcpIG1ldGEpOwogICAgICAgIH0gY2F0Y2ggKE9wZW5KUEFFeGNlcHRp\nb24ga2UpIHsKICAgICAgICAgICAgdGhyb3cga2U7CiAgICAgICAgfSBjYXRj\naCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIHRocm93IFNRTEV4\nY2VwdGlvbnMuZ2V0U3RvcmUoc2UsIHN0b3JlLmdldERCRGljdGlvbmFyeSgp\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGFsbG9jYXRlKGludCBhZGRpdGlvbmFsLCBT\ndG9yZUNvbnRleHQgY3R4LCBDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAgICAg\nICBKREJDU3RvcmUgc3RvcmUgPSBnZXRTdG9yZShjdHgpOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGFsbG9jYXRlSW50ZXJuYWwoYWRkaXRpb25hbCwg\nc3RvcmUsIChDbGFzc01hcHBpbmcpIG1ldGEpOwogICAgICAgIH0gY2F0Y2gg\nKE9wZW5KUEFFeGNlcHRpb24ga2UpIHsKICAgICAgICAgICAgdGhyb3cga2U7\nCiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAg\nICAgIHRocm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoc2UsIHN0b3JlLmdl\ndERCRGljdGlvbmFyeSgpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogTm8tb3AuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIGFkZFNjaGVtYShDbGFzc01hcHBpbmcgbWFw\ncGluZywgU2NoZW1hR3JvdXAgZ3JvdXApIHsKICAgIH0KCiAgICAvKioKICAg\nICAqIE5vLW9wLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbmV4dCBzZXF1ZW5j\nZSBvYmplY3QuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBPYmpl\nY3QgbmV4dEludGVybmFsKEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBDbGFz\nc01hcHBpbmcgbWFwcGluZykKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uOwog\nICAgCiAgICAvKioKICAgICAqIFJldHVybiB0aGUge0BsaW5rIEpEQkNDb25m\naWd1cmF0aW9ufSBmb3IgdGhpcyBzZXF1ZW5jZS4KICAgICAqLwogICAgcHVi\nbGljIGFic3RyYWN0IEpEQkNDb25maWd1cmF0aW9uIGdldENvbmZpZ3VyYXRp\nb24oKTsKCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY3VycmVudCBzZXF1\nZW5jZSBvYmplY3QuIEJ5IGRlZmF1bHQgcmV0dXJucyB0aGUgbGFzdAogICAg\nICogc2VxdWVuY2UgdmFsdWUgdXNlZCwgb3IgbnVsbCBpZiBubyBzZXF1ZW5j\nZSB2YWx1ZXMgaGF2ZSBiZWVuIHJlcXVlc3RlZAogICAgICogeWV0LiBEZWZh\ndWx0IGltcGxlbWVudGF0aW9uIGlzIG5vdCB0aHJlYWRzYWZlLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgT2JqZWN0IGN1cnJlbnRJbnRlcm5hbChKREJDU3Rv\ncmUgc3RvcmUsIENsYXNzTWFwcGluZyBtYXBwaW5nKQogICAgICAgIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIHJldHVybiBjdXJyZW50OwogICAgfQoK\nICAgIC8qKgogICAgICogQWxsb2NhdGUgYWRkaXRpb25hbCBzZXF1ZW5jZSB2\nYWx1ZXMuIERvZXMgbm90aGluZyBieSBkZWZhdWx0LgogICAgICovCiAgICBw\ncm90ZWN0ZWQgdm9pZCBhbGxvY2F0ZUludGVybmFsKGludCBhZGRpdGlvbmFs\nLCBKREJDU3RvcmUgc3RvcmUsCiAgICAgICAgQ2xhc3NNYXBwaW5nIG1hcHBp\nbmcpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBFeHRyYWN0IHRoZSBzdG9yZSBmcm9tIHRoZSBnaXZlbiBjb250\nZXh0LgogICAgICovCiAgICBwcml2YXRlIEpEQkNTdG9yZSBnZXRTdG9yZShT\ndG9yZUNvbnRleHQgY3R4KSB7CiAgICAgICAgcmV0dXJuIChKREJDU3RvcmUp\nIGN0eC5nZXRTdG9yZU1hbmFnZXIoKS5nZXRJbm5lcm1vc3REZWxlZ2F0ZSgp\nOwogICAgfQoKICAgIC8qKgogICAgICogPFA+UmV0dXJuIHRoZSBjb25uZWN0\naW9uIHRvIHVzZSBiYXNlZCBvbiB0aGUgdHlwZSBvZiBzZXF1ZW5jZS4gVGhp\ncwogICAgICogY29ubmVjdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgY2xv\nc2VkOyBkbyBub3QgY2xvc2UgaXQuPC9QPgogICAgICogCiAgICAgKiBAcmV0\ndXJuIElmIHRoZSBzZXF1ZW5jZSB0eXBlIGlzIDxjb2RlPlRZUEVfVFJBTlNB\nQ1RJT05BTDwvY29kZT4gb3IgCiAgICAgKiA8Y29kZT5UWVBFX0NPTlRJR1VP\nVVM8L2NvZGU+IHRoZSBjb25uZWN0aW9uIGZyb20gdGhlIHtAbGluayBTdG9y\nZU1hbmFnZXJ9CiAgICAgKiB3aWxsIGJlIHJldHVybmVkLiAKICAgICAqIAog\nICAgICogPFA+T3RoZXJ3aXNlIGEgbmV3IGNvbm5lY3Rpb24gd2lsbCBiZSBv\nYnRhaW5lZCB1c2luZyBEYXRhU291cmNlMiBmcm9tIHRoZSAKICAgICAqIGN1\ncnJlbnQgY29uZmlndXJhdGlvbi4gSW4gdGhpcyBjYXNlIGF1dG9jb21taXQg\naXMgc2V0IHRvIGZhbHNlIHByaW9yIHRvIAogICAgICogcmV0dXJuaW5nIHRo\nZSBjb25uZWN0aW9uLjwvUD4KICAgICAqLwogICAgcHJvdGVjdGVkIENvbm5l\nY3Rpb24gZ2V0Q29ubmVjdGlvbihKREJDU3RvcmUgc3RvcmUpCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKHR5cGUgPT0gVFlQ\nRV9UUkFOU0FDVElPTkFMIHx8IHR5cGUgPT0gVFlQRV9DT05USUdVT1VTKSB7\nCiAgICAgICAgICAgIC8vIEFsc28gaW5jcmVtZW50cyByZWYgY291bnQuCiAg\nICAgICAgICAgIHJldHVybiBzdG9yZS5nZXRDb25uZWN0aW9uKCk7CiAgICAg\nICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBKREJDQ29uZmlndXJh\ndGlvbiBjb25mID0gc3RvcmUuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAg\nICAgICBEYXRhU291cmNlIGRzID0gY29uZi5nZXREYXRhU291cmNlMihzdG9y\nZS5nZXRDb250ZXh0KCkpOwogICAgICAgICAgICBDb25uZWN0aW9uIGNvbm4g\nPSBkcy5nZXRDb25uZWN0aW9uKCk7CiAgICAgICAgICAgIGlmIChjb25uLmdl\ndEF1dG9Db21taXQoKSkKICAgICAgICAgICAgICAgIGNvbm4uc2V0QXV0b0Nv\nbW1pdChmYWxzZSk7CiAgICAgICAgICAgIHJldHVybiBjb25uOwogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIENsb3NlIHRoZSBjdXJyZW50IGNv\nbm5lY3Rpb24uIElmIHRoZSBzZXF1ZW5jZSBpcwogICAgICogPGNvZGU+VFlQ\nRV9UUkFOU0FDVElPTkFMPC9jb2RlPiBvciA8Y29kZT5UWVBFX0NPTlRJR1VP\nVVM8L2NvZGU+CiAgICAgKiB3ZSB3aWxsIGRlY3JlbWVudCB0aGUgcmVmIGNv\ndW50LiBPdGhlcndpc2UgdGhlIGNvbm5lY3Rpb24gd2lsbCBiZQogICAgICog\nY29tbWl0dGVkIGFuZCB0aGVuIGNsb3NlZC4gCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCB2b2lkIGNsb3NlQ29ubmVjdGlvbihDb25uZWN0aW9uIGNvbm4pIHsK\nICAgICAgICBpZiAoY29ubiA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgaWYgKHR5cGUgPT0gVFlQRV9UUkFOU0FDVElPTkFMIHx8IHR5\ncGUgPT0gVFlQRV9DT05USUdVT1VTKSB7CiAgICAgICAgICAgIC8vIFRoZSBz\nZXEgaXMgcGFydCBvZiB0aGUgYnVzaW5lc3MgdHJhbnNhY3Rpb24gaG93ZXZl\nciB3ZSBuZWVkCiAgICAgICAgICAgIC8vIHRvIGRlY3JlbWVudCB0aGUgcmVm\nIGNvdW50IHNvIHRoYXQgdGhlIGNvbm5lY3Rpb24gbWF5IGJlIAogICAgICAg\nICAgICAvLyBjbG9zZWQgYXBwcm9wcmlhdGVseS4KICAgICAgICAgICAgCXRy\neSB7IAogICAgICAgICAgICAJCWNvbm4uY2xvc2UoKTsKICAgICAgICAgICAg\nCX0KICAgICAgICAgICAgCWNhdGNoKFNRTEV4Y2VwdGlvbiBzZSkgeyAKICAg\nICAgICAgICAgCQl0aHJvdyBTUUxFeGNlcHRpb25zLmdldFN0b3JlKHNlKTsK\nICAgICAgICAgICAgCX0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K\nICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgIGNvbm4uY29tbWl0KCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4\nY2VwdGlvbiBzZSkgewogICAgICAgICAgICAgICAgdGhyb3cgU1FMRXhjZXB0\naW9ucy5nZXRTdG9yZShzZSk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAg\nICAgICAgICAgICAgICB0cnkgeyBjb25uLmNsb3NlKCk7IH0gY2F0Y2ggKFNR\nTEV4Y2VwdGlvbiBzZSkge30KICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nIH0KICAgIAogICAgLyoqCiAgICAgKiBEZXRlY3Qgd2hldGhlciBvciBub3Qg\nT3BlbkpQQSBzaG91bGQgc3VzcGVuZCB0aGUgdHJhbnNhY3Rpb24gaW4gCiAg\nICAgKiBhIG1hbmFnZWQgZW52aXJvbm1lbnQuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBib29sZWFuIHN1c3BlbmRJbkpUQSgpIHsKICAgICAgICByZXR1cm4g\nZ2V0Q29uZmlndXJhdGlvbigpLmlzQ29ubmVjdGlvbkZhY3RvcnlNb2RlTWFu\nYWdlZCgpICYmIAogICAgICAgICAgICBnZXRDb25maWd1cmF0aW9uKCkuZ2V0\nQ29ubmVjdGlvbkZhY3RvcnkyKCkgPT0gbnVsbDsKICAgIH0KfQo=\n","encoding":"base64"}

