{"sha":"d6379b90837dd4278d8d58ac1661f6b9ad8d0586","node_id":"MDQ6QmxvYjIwNjM2NDpkNjM3OWI5MDgzN2RkNDI3OGQ4ZDU4YWMxNjYxZjZiOWFkOGQwNTg2","size":5871,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d6379b90837dd4278d8d58ac1661f6b9ad8d0586","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuQXJndW1lbnRzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5leHBzLkV4cHJlc3Np\nb25WaXNpdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5l\neHBzLlZhbHVlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xh\nc3NNZXRhRGF0YTsKCi8qKgogKiBBIGxpc3Qgb2YgYXJndW1lbnRzIHRvIGEg\nbXVsdGktYXJndW1lbnQgZnVuY3Rpb24uCiAqCiAqIEBhdXRob3IgQWJlIFdo\naXRlCiAqLwpwdWJsaWMgY2xhc3MgQXJncwogICAgZXh0ZW5kcyBBYnN0cmFj\ndFZhbAogICAgaW1wbGVtZW50cyBBcmd1bWVudHMgewoKICAgIHByaXZhdGUg\nZmluYWwgVmFsW10gX2FyZ3M7CiAgICBwcml2YXRlIENsYXNzTWV0YURhdGEg\nX21ldGEgPSBudWxsOwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuIFN1\ncHBseSB2YWx1ZXMgYmVpbmcgY29tYmluZWQuCiAgICAgKi8KICAgIHB1Ymxp\nYyBBcmdzKFZhbCB2YWwxLCBWYWwgdmFsMikgewogICAgICAgIGludCBsZW4x\nID0gKHZhbDEgaW5zdGFuY2VvZiBBcmdzKSA/ICgoQXJncykgdmFsMSkuX2Fy\nZ3MubGVuZ3RoIDogMTsKICAgICAgICBpbnQgbGVuMiA9ICh2YWwyIGluc3Rh\nbmNlb2YgQXJncykgPyAoKEFyZ3MpIHZhbDIpLl9hcmdzLmxlbmd0aCA6IDE7\nCgogICAgICAgIF9hcmdzID0gbmV3IFZhbFtsZW4xICsgbGVuMl07CiAgICAg\nICAgaWYgKHZhbDEgaW5zdGFuY2VvZiBBcmdzKQogICAgICAgICAgICBTeXN0\nZW0uYXJyYXljb3B5KCgoQXJncykgdmFsMSkuX2FyZ3MsIDAsIF9hcmdzLCAw\nLCBsZW4xKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIF9hcmdzWzBdID0g\ndmFsMTsKICAgICAgICBpZiAodmFsMiBpbnN0YW5jZW9mIEFyZ3MpCiAgICAg\nICAgICAgIFN5c3RlbS5hcnJheWNvcHkoKChBcmdzKSB2YWwyKS5fYXJncywg\nMCwgX2FyZ3MsIGxlbjEsIGxlbjIpOwogICAgICAgIGVsc2UKICAgICAgICAg\nICAgX2FyZ3NbbGVuMV0gPSB2YWwyOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIGEgZmlsdGVyIHZhbHVlIGZvciBlYWNoIGFyZ3VtZW50LgogICAg\nICovCiAgICBwdWJsaWMgRmlsdGVyVmFsdWVbXSBuZXdGaWx0ZXJWYWx1ZXMo\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIAogICAgICAgIEV4cFN0YXRl\nIHN0YXRlKSB7CiAgICAgICAgQXJnc0V4cFN0YXRlIGFzdGF0ZSA9IChBcmdz\nRXhwU3RhdGUpIHN0YXRlOyAKICAgICAgICBGaWx0ZXJWYWx1ZVtdIGZpbHRz\nID0gbmV3IEZpbHRlclZhbHVlW19hcmdzLmxlbmd0aF07CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBfYXJncy5sZW5ndGg7IGkrKykKICAgICAgICAg\nICAgZmlsdHNbaV0gPSBuZXcgRmlsdGVyVmFsdWVJbXBsKHNlbCwgY3R4LCBh\nc3RhdGUuc3RhdGVzW2ldLCAKICAgICAgICAgICAgICAgIF9hcmdzW2ldKTsg\nCiAgICAgICAgcmV0dXJuIGZpbHRzOwogICAgfQoKICAgIHB1YmxpYyBWYWx1\nZVtdIGdldFZhbHVlcygpIHsKICAgICAgICByZXR1cm4gX2FyZ3M7CiAgICB9\nCgogICAgcHVibGljIFZhbFtdIGdldFZhbHMoKSB7CiAgICAgICAgcmV0dXJu\nIF9hcmdzOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01ldGFEYXRhIGdldE1l\ndGFEYXRhKCkgewogICAgICAgIHJldHVybiBfbWV0YTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRNZXRhRGF0YShDbGFzc01ldGFEYXRhIG1ldGEpIHsK\nICAgICAgICBfbWV0YSA9IG1ldGE7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gaXNWYXJpYWJsZSgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9\nCgogICAgcHVibGljIENsYXNzIGdldFR5cGUoKSB7CiAgICAgICAgcmV0dXJu\nIE9iamVjdFtdLmNsYXNzOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc1tdIGdl\ndFR5cGVzKCkgewogICAgICAgIENsYXNzW10gYyA9IG5ldyBDbGFzc1tfYXJn\ncy5sZW5ndGhdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2FyZ3Mu\nbGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGNbaV0gPSBfYXJnc1tpXS5nZXRU\neXBlKCk7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgcHVibGljIHZv\naWQgc2V0SW1wbGljaXRUeXBlKENsYXNzIHR5cGUpIHsKICAgIH0KCiAgICBw\ndWJsaWMgRXhwU3RhdGUgaW5pdGlhbGl6ZShTZWxlY3Qgc2VsLCBFeHBDb250\nZXh0IGN0eCwgaW50IGZsYWdzKSB7CiAgICAgICAgRXhwU3RhdGVbXSBzdGF0\nZXMgPSBuZXcgRXhwU3RhdGVbX2FyZ3MubGVuZ3RoXTsKICAgICAgICBKb2lu\ncyBqb2lucyA9IG51bGw7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBf\nYXJncy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzdGF0ZXNbaV0gPSBf\nYXJnc1tpXS5pbml0aWFsaXplKHNlbCwgY3R4LCBmbGFncyk7CiAgICAgICAg\nICAgIGlmIChqb2lucyA9PSBudWxsKQogICAgICAgICAgICAgICAgam9pbnMg\nPSBzdGF0ZXNbaV0uam9pbnM7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAg\nICAgICAgIGpvaW5zID0gc2VsLmFuZChqb2lucywgc3RhdGVzW2ldLmpvaW5z\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBBcmdzRXhwU3RhdGUo\nam9pbnMsIHN0YXRlcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBFeHByZXNz\naW9uIHN0YXRlLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBB\ncmdzRXhwU3RhdGUKICAgICAgICBleHRlbmRzIEV4cFN0YXRlIHsKICAgICAg\nICAKICAgICAgICBwdWJsaWMgRXhwU3RhdGVbXSBzdGF0ZXM7CgogICAgICAg\nIHB1YmxpYyBBcmdzRXhwU3RhdGUoSm9pbnMgam9pbnMsIEV4cFN0YXRlW10g\nc3RhdGVzKSB7CiAgICAgICAgICAgIHN1cGVyKGpvaW5zKTsKICAgICAgICAg\nICAgdGhpcy5zdGF0ZXMgPSBzdGF0ZXM7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNlbGVjdChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0\neCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4gcGtzKSB7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0Q29sdW1ucyhTZWxlY3Qgc2Vs\nLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJv\nb2xlYW4gcGtzKSB7CiAgICAgICAgQXJnc0V4cFN0YXRlIGFzdGF0ZSA9IChB\ncmdzRXhwU3RhdGUpIHN0YXRlOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgX2FyZ3MubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIF9hcmdzW2ldLnNl\nbGVjdENvbHVtbnMoc2VsLCBjdHgsIGFzdGF0ZS5zdGF0ZXNbaV0sIHBrcyk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgZ3JvdXBCeShTZWxlY3Qgc2VsLCBF\neHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBvcmRlckJ5KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVhbiBhc2MpIHsKICAg\nIH0KCiAgICBwdWJsaWMgT2JqZWN0IGxvYWQoRXhwQ29udGV4dCBjdHgsIEV4\ncFN0YXRlIHN0YXRlLCBSZXN1bHQgcmVzKSB7CiAgICAgICAgcmV0dXJuIG51\nbGw7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2FsY3VsYXRlVmFsdWUoU2Vs\nZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAg\nICAgICBWYWwgb3RoZXIsIEV4cFN0YXRlIG90aGVyU3RhdGUpIHsKICAgICAg\nICBBcmdzRXhwU3RhdGUgYXN0YXRlID0gKEFyZ3NFeHBTdGF0ZSkgc3RhdGU7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfYXJncy5sZW5ndGg7IGkr\nKykKICAgICAgICAgICAgX2FyZ3NbaV0uY2FsY3VsYXRlVmFsdWUoc2VsLCBj\ndHgsIGFzdGF0ZS5zdGF0ZXNbaV0sIG51bGwsIG51bGwpOwogICAgfQoKICAg\nIHB1YmxpYyBpbnQgbGVuZ3RoKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSkgewogICAgICAgIHJldHVybiAwOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRl\neHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNx\nbCwgaW50IGluZGV4KSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5k\nSXNFbXB0eShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUg\nc3RhdGUsIAogICAgICAgIFNRTEJ1ZmZlciBzcWwpIHsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBhcHBlbmRJc05vdEVtcHR5KFNlbGVjdCBzZWwsIEV4cENv\nbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVy\nIHNxbCl7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kU2l6ZShTZWxl\nY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAg\nICAgIFNRTEJ1ZmZlciBzcWwpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBh\ncHBlbmRJc051bGwoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0\nYXRlIHN0YXRlLCAKICAgICAgICBTUUxCdWZmZXIgc3FsKSB7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgYXBwZW5kSXNOb3ROdWxsKFNlbGVjdCBzZWwsIEV4\ncENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVm\nZmVyIHNxbCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFjY2VwdFZpc2l0\nKEV4cHJlc3Npb25WaXNpdG9yIHZpc2l0b3IpIHsKICAgICAgICB2aXNpdG9y\nLmVudGVyKHRoaXMpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2Fy\nZ3MubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIF9hcmdzW2ldLmFjY2VwdFZp\nc2l0KHZpc2l0b3IpOwogICAgICAgIHZpc2l0b3IuZXhpdCh0aGlzKTsKICAg\nIH0KCiAgICBwdWJsaWMgaW50IGdldElkKCkgewogICAgICAgIHJldHVybiBW\nYWwuQVJHU19WQUw7CiAgICB9Cn0K\n","encoding":"base64"}

