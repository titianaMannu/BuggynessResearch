{"sha":"183ada1d22777cc7fd0f33ae60c98699567fa890","node_id":"MDQ6QmxvYjIwNjM2NDoxODNhZGExZDIyNzc3Y2M3ZmQwZjMzYWU2MGM5ODY5OTU2N2ZhODkw","size":7135,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/183ada1d22777cc7fd0f33ae60c98699567fa890","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLmxhbmcuTWF0aDsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRh\nLkphdmFTUUxUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuSm9pbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuUmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkZpbHRlcnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4\ncHMuRXhwcmVzc2lvblZpc2l0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5DbGFzc01ldGFEYXRhOwoKLyoqCiAqIFJldHVybnMgdGhlIG51\nbWJlciBvZiBjaGFyYWN0ZXJzIGluIGEgc3RyaW5nLgogKgogKiBAYXV0aG9y\nIE1hcmMgUHJ1ZCdob21tZWF1eAogKi8KcHVibGljIGNsYXNzIFRyaW0KICAg\nIGV4dGVuZHMgQWJzdHJhY3RWYWwgewoKICAgIHByaXZhdGUgZmluYWwgVmFs\nIF92YWw7CiAgICBwcml2YXRlIGZpbmFsIFZhbCBfdHJpbUNoYXI7CiAgICBw\ncml2YXRlIGZpbmFsIEJvb2xlYW4gX3doZXJlOwogICAgcHJpdmF0ZSBDbGFz\nc01ldGFEYXRhIF9tZXRhID0gbnVsbDsKCiAgICAvKioKICAgICAqIENvbnN0\ncnVjdG9yLiBQcm92aWRlIHRoZSBzdHJpbmcgdG8gb3BlcmF0ZSBvbi4KICAg\nICAqLwogICAgcHVibGljIFRyaW0oVmFsIHZhbCwgVmFsIHRyaW1DaGFyLCBC\nb29sZWFuIHdoZXJlKSB7CiAgICAgICAgX3ZhbCA9IHZhbDsKICAgICAgICBf\ndHJpbUNoYXIgPSB0cmltQ2hhcjsKICAgICAgICBfd2hlcmUgPSB3aGVyZTsK\nICAgIH0KCiAgICBwdWJsaWMgVmFsIGdldFZhbCgpIHsKICAgICAgICByZXR1\ncm4gX3ZhbDsKICAgIH0KCiAgICBwdWJsaWMgVmFsIGdldFRyaW1DaGFyKCkg\newogICAgICAgIHJldHVybiBfdHJpbUNoYXI7CiAgICB9CgogICAgcHVibGlj\nIEJvb2xlYW4gZ2V0V2hlcmUoKXsKICAgICAgICByZXR1cm4gX3doZXJlOwog\nICAgfQoKICAgIHB1YmxpYyBDbGFzc01ldGFEYXRhIGdldE1ldGFEYXRhKCkg\newogICAgICAgIHJldHVybiBfbWV0YTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRNZXRhRGF0YShDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAgICAgICBf\nbWV0YSA9IG1ldGE7CiAgICB9CgogICAgcHVibGljIENsYXNzIGdldFR5cGUo\nKSB7CiAgICAgICAgcmV0dXJuIFN0cmluZy5jbGFzczsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRJbXBsaWNpdFR5cGUoQ2xhc3MgdHlwZSkgewogICAg\nfQoKICAgIHB1YmxpYyBFeHBTdGF0ZSBpbml0aWFsaXplKFNlbGVjdCBzZWws\nIEV4cENvbnRleHQgY3R4LCBpbnQgZmxhZ3MpIHsKICAgICAgICBFeHBTdGF0\nZSB2YWx1ZVN0YXRlID0gIF92YWwuaW5pdGlhbGl6ZShzZWwsIGN0eCwgMCk7\nCiAgICAgICAgRXhwU3RhdGUgY2hhclN0YXRlID0gX3RyaW1DaGFyLmluaXRp\nYWxpemUoc2VsLCBjdHgsIDApOwogICAgICAgIHJldHVybiBuZXcgVHJpbUV4\ncFN0YXRlKHNlbC5hbmQodmFsdWVTdGF0ZS5qb2lucywgY2hhclN0YXRlLmpv\naW5zKSwgCiAgICAgICAgICAgIHZhbHVlU3RhdGUsIGNoYXJTdGF0ZSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBFeHByZXNzaW9uIHN0YXRlLgogICAgICov\nCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBUcmltRXhwU3RhdGUKICAgICAg\nICBleHRlbmRzIEV4cFN0YXRlIHsKCiAgICAgICAgcHVibGljIGZpbmFsIEV4\ncFN0YXRlIHZhbHVlU3RhdGU7CiAgICAgICAgcHVibGljIGZpbmFsIEV4cFN0\nYXRlIGNoYXJTdGF0ZTsKCiAgICAgICAgcHVibGljIFRyaW1FeHBTdGF0ZShK\nb2lucyBqb2lucywgRXhwU3RhdGUgdmFsdWVTdGF0ZSwgCiAgICAgICAgICAg\nIEV4cFN0YXRlIGNoYXJTdGF0ZSkgewogICAgICAgICAgICBzdXBlcihqb2lu\ncyk7CiAgICAgICAgICAgIHRoaXMudmFsdWVTdGF0ZSA9IHZhbHVlU3RhdGU7\nCiAgICAgICAgICAgIHRoaXMuY2hhclN0YXRlID0gY2hhclN0YXRlOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZWxlY3QoU2VsZWN0IHNl\nbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBi\nb29sZWFuIHBrcykgewogICAgICAgIHNlbC5zZWxlY3QobmV3U1FMQnVmZmVy\nKHNlbCwgY3R4LCBzdGF0ZSksIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNlbGVjdENvbHVtbnMoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgs\nIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBib29sZWFuIHBrcykgewogICAg\nICAgIFRyaW1FeHBTdGF0ZSB0c3RhdGUgPSAoVHJpbUV4cFN0YXRlKSBzdGF0\nZTsKICAgICAgICBfdmFsLnNlbGVjdENvbHVtbnMoc2VsLCBjdHgsIHRzdGF0\nZS52YWx1ZVN0YXRlLCB0cnVlKTsKICAgICAgICBfdHJpbUNoYXIuc2VsZWN0\nQ29sdW1ucyhzZWwsIGN0eCwgdHN0YXRlLmNoYXJTdGF0ZSwgdHJ1ZSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgZ3JvdXBCeShTZWxlY3Qgc2VsLCBFeHBD\nb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICBzZWwuZ3Jv\ndXBCeShuZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgb3JkZXJCeShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0\nIGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4gYXNjKSB7\nCiAgICAgICAgc2VsLm9yZGVyQnkobmV3U1FMQnVmZmVyKHNlbCwgY3R4LCBz\ndGF0ZSksIGFzYywgZmFsc2UpOwogICAgfQoKICAgIHByaXZhdGUgU1FMQnVm\nZmVyIG5ld1NRTEJ1ZmZlcihTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\nRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICBjYWxjdWxhdGVWYWx1ZShzZWws\nIGN0eCwgc3RhdGUsIG51bGwsIG51bGwpOwogICAgICAgIFNRTEJ1ZmZlciBi\ndWYgPSBuZXcgU1FMQnVmZmVyKGN0eC5zdG9yZS5nZXREQkRpY3Rpb25hcnko\nKSk7CiAgICAgICAgYXBwZW5kVG8oc2VsLCBjdHgsIHN0YXRlLCBidWYsIDAp\nOwogICAgICAgIHJldHVybiBidWY7CiAgICB9CgogICAgcHVibGljIE9iamVj\ndCBsb2FkKEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgUmVzdWx0\nIHJlcykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gRmlsdGVycy5jb252ZXJ0KHJlcy5nZXRPYmplY3QodGhpcywKICAg\nICAgICAgICAgSmF2YVNRTFR5cGVzLkpEQkNfREVGQVVMVCwgbnVsbCksIGdl\ndFR5cGUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2FsY3VsYXRlVmFs\ndWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRl\nLCAKICAgICAgICBWYWwgb3RoZXIsIEV4cFN0YXRlIG90aGVyU3RhdGUpIHsK\nICAgICAgICBUcmltRXhwU3RhdGUgdHN0YXRlID0gKFRyaW1FeHBTdGF0ZSkg\nc3RhdGU7CiAgICAgICAgX3ZhbC5jYWxjdWxhdGVWYWx1ZShzZWwsIGN0eCwg\ndHN0YXRlLnZhbHVlU3RhdGUsIG51bGwsIG51bGwpOwogICAgICAgIF90cmlt\nQ2hhci5jYWxjdWxhdGVWYWx1ZShzZWwsIGN0eCwgdHN0YXRlLmNoYXJTdGF0\nZSwgbnVsbCwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGludCBsZW5ndGgo\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7\nCiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBw\nZW5kVG8oU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0\nYXRlLCAKICAgICAgICBTUUxCdWZmZXIgc3FsLCBpbnQgaW5kZXgpIHsKICAg\nICAgICBEQkRpY3Rpb25hcnkgZGljdCA9IGN0eC5zdG9yZS5nZXREQkRpY3Rp\nb25hcnkoKTsKICAgICAgICBTdHJpbmcgZnVuYzsKICAgICAgICBpZiAoX3do\nZXJlID09IG51bGwpIHsKICAgICAgICAgICAgZnVuYyA9IGRpY3QudHJpbUJv\ndGhGdW5jdGlvbjsKICAgICAgICAgICAgZGljdC5hc3NlcnRTdXBwb3J0KGZ1\nbmMgIT0gbnVsbCwgIlRyaW1Cb3RoRnVuY3Rpb24iKTsKICAgICAgICB9IGVs\nc2UgaWYgKF93aGVyZS5ib29sZWFuVmFsdWUoKSkgewogICAgICAgICAgICBm\ndW5jID0gZGljdC50cmltTGVhZGluZ0Z1bmN0aW9uOwogICAgICAgICAgICBk\naWN0LmFzc2VydFN1cHBvcnQoZnVuYyAhPSBudWxsLCAiVHJpbUxlYWRpbmdG\ndW5jdGlvbiIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZ1bmMg\nPSBkaWN0LnRyaW1UcmFpbGluZ0Z1bmN0aW9uOwogICAgICAgICAgICBkaWN0\nLmFzc2VydFN1cHBvcnQoZnVuYyAhPSBudWxsLCAiVHJpbVRyYWlsaW5nRnVu\nY3Rpb24iKTsKICAgICAgICB9ICAgICAgICAKICAgICAgICBmdW5jID0gZGlj\ndC5nZXRDYXN0RnVuY3Rpb24oX3ZhbCwgZnVuYyk7CiAgICAgICAgCiAgICAg\nICAgaW50IGZyb21QYXJ0ID0gZnVuYy5pbmRleE9mKCJ7MH0iKTsKICAgICAg\nICBpbnQgY2hhclBhcnQgPSBmdW5jLmluZGV4T2YoInsxfSIpOwogICAgICAg\nIGlmIChjaGFyUGFydCA9PSAtMSkKICAgICAgICAgICAgY2hhclBhcnQgPSBm\ndW5jLmxlbmd0aCgpOwogICAgICAgIFN0cmluZyBwYXJ0MSA9IGZ1bmMuc3Vi\nc3RyaW5nKDAsIE1hdGgubWluKGZyb21QYXJ0LCBjaGFyUGFydCkpOwogICAg\nICAgIFN0cmluZyBwYXJ0MiA9IGZ1bmMuc3Vic3RyaW5nKE1hdGgubWluKGZy\nb21QYXJ0LCBjaGFyUGFydCkgKyAzLAogICAgICAgICAgICBNYXRoLm1heChm\ncm9tUGFydCwgY2hhclBhcnQpKTsKICAgICAgICBTdHJpbmcgcGFydDMgPSBu\ndWxsOwogICAgICAgIGlmIChjaGFyUGFydCAhPSBmdW5jLmxlbmd0aCgpKQog\nICAgICAgICAgICBwYXJ0MyA9IGZ1bmMuc3Vic3RyaW5nKE1hdGgubWF4KGZy\nb21QYXJ0LCBjaGFyUGFydCkgKyAzKTsKCiAgICAgICAgVHJpbUV4cFN0YXRl\nIHRzdGF0ZSA9IChUcmltRXhwU3RhdGUpIHN0YXRlOwogICAgICAgIHNxbC5h\ncHBlbmQocGFydDEpOwogICAgICAgIGlmIChmcm9tUGFydCA8IGNoYXJQYXJ0\nKQogICAgICAgICAgICBfdmFsLmFwcGVuZFRvKHNlbCwgY3R4LCB0c3RhdGUu\ndmFsdWVTdGF0ZSwgc3FsLCAwKTsKICAgICAgICBlbHNlIAogICAgICAgICAg\nICBfdHJpbUNoYXIuYXBwZW5kVG8oc2VsLCBjdHgsIHRzdGF0ZS5jaGFyU3Rh\ndGUsIHNxbCwgMCk7CiAgICAgICAgc3FsLmFwcGVuZChwYXJ0Mik7CgogICAg\nICAgIGlmIChjaGFyUGFydCAhPSBmdW5jLmxlbmd0aCgpKSB7CiAgICAgICAg\nICAgIGlmIChmcm9tUGFydCA+IGNoYXJQYXJ0KQogICAgICAgICAgICAgICAg\nX3ZhbC5hcHBlbmRUbyhzZWwsIGN0eCwgdHN0YXRlLnZhbHVlU3RhdGUsIHNx\nbCwgMCk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIF90cmlt\nQ2hhci5hcHBlbmRUbyhzZWwsIGN0eCwgdHN0YXRlLmNoYXJTdGF0ZSwgc3Fs\nLCAwKTsKICAgICAgICAgICAgc3FsLmFwcGVuZChwYXJ0Myk7CiAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgLy8gc2luY2UgdGhlIHRyaW0gc3RhdGVt\nZW50IGRpZCBub3Qgc3BlY2lmeSB0aGUgdG9rZW4gZm9yCiAgICAgICAgICAg\nIC8vIHdoZXJlIHRvIHNwZWNpZnkgdGhlIHRyaW0gY2hhciAoZGVub3RlZCBi\neSAiezF9IiksCiAgICAgICAgICAgIC8vIHdlIGRvIG5vdCBoYXZlIHRoZSBh\nYmlsaXR5IHRvIHRyaW0gb2ZmIG5vbi13aGl0ZXNwYWNlCiAgICAgICAgICAg\nIC8vIGNoYXJhY3RlcnM7IHRocm93IGFuIGV4Y2VwdGlvbiB3aGVuIHdlIGF0\ndGVtcHQgdG8gZG8gc28KICAgICAgICAgICAgaWYgKCEoX3RyaW1DaGFyIGlu\nc3RhbmNlb2YgQ29uc3QpIHx8IFN0cmluZy52YWx1ZU9mKCgoQ29uc3QpIAog\nICAgICAgICAgICAgICAgX3RyaW1DaGFyKS5nZXRWYWx1ZShjdHgsdHN0YXRl\nLmNoYXJTdGF0ZSkpLnRyaW0oKS5sZW5ndGgoKSAhPSAwKQogICAgICAgICAg\nICAgICAgZGljdC5hc3NlcnRTdXBwb3J0KGZhbHNlLCAiVHJpbU5vbldoaXRl\nc3BhY2VDaGFyYWN0ZXJzIik7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGFjY2VwdFZpc2l0KEV4cHJlc3Npb25WaXNpdG9yIHZpc2l0b3Ip\nIHsKICAgICAgICB2aXNpdG9yLmVudGVyKHRoaXMpOwogICAgICAgIF92YWwu\nYWNjZXB0VmlzaXQodmlzaXRvcik7CiAgICAgICAgX3RyaW1DaGFyLmFjY2Vw\ndFZpc2l0KHZpc2l0b3IpOwogICAgICAgIHZpc2l0b3IuZXhpdCh0aGlzKTsK\nICAgIH0KCiAgICBwdWJsaWMgaW50IGdldElkKCkgewogICAgICAgIHJldHVy\nbiBWYWwuVFJJTV9WQUw7CiAgICB9Cn0KCg==\n","encoding":"base64"}

