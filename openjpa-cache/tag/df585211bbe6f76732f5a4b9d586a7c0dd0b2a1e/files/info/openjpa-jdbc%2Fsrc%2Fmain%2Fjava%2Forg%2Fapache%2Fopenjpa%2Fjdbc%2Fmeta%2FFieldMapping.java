{"sha":"7cf3c535daf986d2581366017d5e408d49c9a788","node_id":"MDQ6QmxvYjIwNjM2NDo3Y2YzYzUzNWRhZjk4NmQyNTgxMzY2MDE3ZDVlNDA4ZDQ5YzlhNzg4","size":33231,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7cf3c535daf986d2581366017d5e408d49c9a788","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5rZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmU7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0cy5O\nb25lRmllbGRTdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zY2hlbWEuQ29sdW1uSU87CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5UYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5VbmlxdWU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLlJvdzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5Sb3dNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuU2VsZWN0RXhlY3V0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFEYXRhOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnV0aWwuSW50ZXJuYWxFeGNlcHRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5NZXRhRGF0YUV4Y2VwdGlvbjsK\nCi8qKgogKiBTcGVjaWFsaXphdGlvbiBvZiBtZXRhZGF0YSBmb3IgcmVsYXRp\nb25hbCBkYXRhYmFzZXMuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpw\ndWJsaWMgY2xhc3MgRmllbGRNYXBwaW5nCiAgICBleHRlbmRzIEZpZWxkTWV0\nYURhdGEKICAgIGltcGxlbWVudHMgVmFsdWVNYXBwaW5nLCBGaWVsZFN0cmF0\nZWd5IHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xv\nYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKEZpZWxkTWFwcGlu\nZy5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBWYWx1ZU1hcHBpbmcgX3Zh\nbDsKICAgIHByaXZhdGUgZmluYWwgVmFsdWVNYXBwaW5nIF9rZXk7CiAgICBw\ncml2YXRlIGZpbmFsIFZhbHVlTWFwcGluZyBfZWxlbTsKICAgIHByaXZhdGUg\nZmluYWwgRmllbGRNYXBwaW5nSW5mbyBfaW5mbzsKICAgIHByaXZhdGUgZmlu\nYWwgSkRCQ0NvbHVtbk9yZGVyIF9vcmRlckNvbCA9IG5ldyBKREJDQ29sdW1u\nT3JkZXIoKTsKICAgIHByaXZhdGUgRmllbGRTdHJhdGVneSBfc3RyYXRlZ3kg\nPSBudWxsOwoKICAgIHByaXZhdGUgRm9yZWlnbktleSBfZmsgPSBudWxsOwog\nICAgcHJpdmF0ZSBDb2x1bW5JTyBfaW8gPSBudWxsOwogICAgcHJpdmF0ZSBV\nbmlxdWUgX3VucSA9IG51bGw7CiAgICBwcml2YXRlIEluZGV4IF9pZHggPSBu\ndWxsOwogICAgcHJpdmF0ZSBib29sZWFuIF9vdXRlciA9IGZhbHNlOwogICAg\ncHJpdmF0ZSBpbnQgX2ZldGNoTW9kZSA9IEludGVnZXIuTUFYX1ZBTFVFOwog\nICAgcHJpdmF0ZSBVbmlxdWVbXSBfam9pblRhYmxlVW5pcXVlczsgLy8gVW5p\ncXVlIGNvbnN0cmFpbnRzIG9uIEpvaW5UYWJsZQogICAgCiAgICAvKioKICAg\nICAqIENvbnN0cnVjdG9yLgogICAgICovCiAgICBwdWJsaWMgRmllbGRNYXBw\naW5nKFN0cmluZyBuYW1lLCBDbGFzcyB0eXBlLCBDbGFzc01hcHBpbmcgb3du\nZXIpIHsKICAgICAgICBzdXBlcihuYW1lLCB0eXBlLCBvd25lcik7CiAgICAg\nICAgX2luZm8gPSBvd25lci5nZXRNYXBwaW5nUmVwb3NpdG9yeSgpLm5ld01h\ncHBpbmdJbmZvKHRoaXMpOwogICAgICAgIF92YWwgPSAoVmFsdWVNYXBwaW5n\nKSBnZXRWYWx1ZSgpOwogICAgICAgIF9rZXkgPSAoVmFsdWVNYXBwaW5nKSBn\nZXRLZXkoKTsKICAgICAgICBfZWxlbSA9IChWYWx1ZU1hcHBpbmcpIGdldEVs\nZW1lbnQoKTsKCiAgICAgICAgc2V0VXNlc0ludGVybWVkaWF0ZShmYWxzZSk7\nCiAgICAgICAgc2V0VXNlc0ltcGxEYXRhKEJvb2xlYW4uRkFMU0UpOwogICAg\nfQoKICAgIC8vLy8vLy8KICAgIC8vIE9STQogICAgLy8vLy8vLwoKICAgIC8q\nKgogICAgICogUmF3IG1hcHBpbmcgZGF0YSBhYm91dCBmaWVsZCdzIGpvaW4g\ndG8gcGFyZW50IHRhYmxlLCBhcyB3ZWxsIGFzCiAgICAgKiBtaXNjZWxsYW5l\nb3VzIHNwZWNpYWxpemVkIGNvbHVtbnMgbGlrZSBvcmRlciBjb2x1bW4uCiAg\nICAgKi8KICAgIHB1YmxpYyBGaWVsZE1hcHBpbmdJbmZvIGdldE1hcHBpbmdJ\nbmZvKCkgewogICAgICAgIHJldHVybiBfaW5mbzsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoZSBzdHJhdGVneSB1c2VkIHRvIG1hcCB0aGlzIG1hcHBpbmcu\nCiAgICAgKi8KICAgIHB1YmxpYyBGaWVsZFN0cmF0ZWd5IGdldFN0cmF0ZWd5\nKCkgewogICAgICAgIHJldHVybiBfc3RyYXRlZ3k7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgc3RyYXRlZ3kgdXNlZCB0byBtYXAgdGhpcyBtYXBwaW5n\nLiBUaGUgPGNvZGU+YWRhcHQ8L2NvZGU+CiAgICAgKiBwYXJhbWV0ZXIgZGV0\nZXJtaW5lcyB3aGV0aGVyIHRvIGFkYXB0IHdoZW4gbWFwcGluZyB0aGUgc3Ry\nYXRlZ3k7CiAgICAgKiB1c2UgbnVsbCBpZiB0aGUgc3RyYXRlZ3kgc2hvdWxk\nIG5vdCBiZSBtYXBwZWQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFN0\ncmF0ZWd5KEZpZWxkU3RyYXRlZ3kgc3RyYXRlZ3ksIEJvb2xlYW4gYWRhcHQp\nIHsKICAgICAgICAvLyBzZXQgc3RyYXRlZ3kgZmlyc3Qgc28gd2UgY2FuIGFj\nY2VzcyBpdCBkdXJpbmcgbWFwcGluZwogICAgICAgIEZpZWxkU3RyYXRlZ3kg\nb3JpZyA9IF9zdHJhdGVneTsKICAgICAgICBfc3RyYXRlZ3kgPSBzdHJhdGVn\neTsKICAgICAgICBpZiAoc3RyYXRlZ3kgIT0gbnVsbCkgewogICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICAgICAgc3RyYXRlZ3kuc2V0RmllbGRNYXBw\naW5nKHRoaXMpOwogICAgICAgICAgICAgICAgaWYgKGFkYXB0ICE9IG51bGwp\nCiAgICAgICAgICAgICAgICAgICAgc3RyYXRlZ3kubWFwKGFkYXB0LmJvb2xl\nYW5WYWx1ZSgpKTsKICAgICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2Vw\ndGlvbiByZSkgewogICAgICAgICAgICAgICAgLy8gcmVzZXQgc3RyYXRlZ3kK\nICAgICAgICAgICAgICAgIF9zdHJhdGVneSA9IG9yaWc7CiAgICAgICAgICAg\nICAgICB0aHJvdyByZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g\naWYgc2V0IHRvIHVubWFwcGVkLCBjbGVhciBkZWZpbmVkIGZpZWxkIGNhY2hl\nIGluIHBhcmVudAogICAgICAgICAgICBpZiAoIWlzTWFwcGVkKCkpCiAgICAg\nICAgICAgICAgICBnZXREZWZpbmluZ01hcHBpbmcoKS5jbGVhckRlZmluZWRG\naWVsZENhY2hlKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nVGhlIG1hcHBpbmcncyBwcmltYXJ5IHRhYmxlLgogICAgICovCiAgICBwdWJs\naWMgVGFibGUgZ2V0VGFibGUoKSB7CiAgICAgICAgaWYgKF9mayAhPSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gX2ZrLmdldFRhYmxlKCk7CiAgICAgICAg\naWYgKF92YWwuZ2V0Rm9yZWlnbktleSgpICE9IG51bGwpCiAgICAgICAgICAg\nIHJldHVybiBfdmFsLmdldEZvcmVpZ25LZXkoKS5nZXRUYWJsZSgpOwogICAg\nICAgIHJldHVybiBnZXREZWZpbmluZ01hcHBpbmcoKS5nZXRUYWJsZSgpOwog\nICAgfQoKICAgIC8qKgogICAgICogSS9PIGluZm9ybWF0aW9uIG9uIHRoZSBq\nb2luIGNvbHVtbnMuCiAgICAgKi8KICAgIHB1YmxpYyBDb2x1bW5JTyBnZXRK\nb2luQ29sdW1uSU8oKSB7CiAgICAgICAgcmV0dXJuIChfaW8gPT0gbnVsbCkg\nPyBDb2x1bW5JTy5VTlJFU1RSSUNURUQgOiBfaW87CiAgICB9CgogICAgLyoq\nCiAgICAgKiBJL08gaW5mb3JtYXRpb24gb24gdGhlIGpvaW4gY29sdW1ucy4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Sm9pbkNvbHVtbklPKENvbHVt\nbklPIGlvKSB7CiAgICAgICAgX2lvID0gaW87CiAgICB9CgogICAgLyoqCiAg\nICAgKiBGb3JlaWduIGtleSBsaW5raW5nIHRoZSBmaWVsZCB0YWJsZSB0byB0\naGUgY2xhc3MnIHByaW1hcnkgdGFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBG\nb3JlaWduS2V5IGdldEpvaW5Gb3JlaWduS2V5KCkgewogICAgICAgIHJldHVy\nbiBfZms7CiAgICB9CgogICAgLyoqCiAgICAgKiBGb3JlaWduIGtleSBsaW5r\naW5nIHRoZSBmaWVsZCB0YWJsZSB0byB0aGUgY2xhc3MnIHByaW1hcnkgdGFi\nbGUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEpvaW5Gb3JlaWduS2V5\nKEZvcmVpZ25LZXkgZmspIHsKICAgICAgICBfZmsgPSBmazsKICAgIH0KCiAg\nICAvKioKICAgICAqIFVuaXF1ZSBjb25zdHJhaW50IG9uIGpvaW4gZm9yZWln\nbiBrZXkgY29sdW1ucy4KICAgICAqLwogICAgcHVibGljIFVuaXF1ZSBnZXRK\nb2luVW5pcXVlKCkgewogICAgICAgIHJldHVybiBfdW5xOwogICAgfQoKICAg\nIC8qKgogICAgICogVW5pcXVlIGNvbnN0cmFpbnQgb24gam9pbiBmb3JlaWdu\nIGtleSBjb2x1bW5zLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRKb2lu\nVW5pcXVlKFVuaXF1ZSB1bnEpIHsKICAgICAgICBfdW5xID0gdW5xOwogICAg\nfQoKICAgIHB1YmxpYyBVbmlxdWVbXSBnZXRKb2luVGFibGVVbmlxdWVzKCkg\newogICAgCXJldHVybiBfam9pblRhYmxlVW5pcXVlczsKICAgIH0KICAgIAog\nICAgcHVibGljIHZvaWQgc2V0Sm9pblRhYmxlVW5pcXVlcyhVbmlxdWVbXSB1\nbnFzKSB7CiAgICAJX2pvaW5UYWJsZVVuaXF1ZXMgPSB1bnFzOwogICAgfQog\nICAgCiAgICAvKioKICAgICAqIEluZGV4IG9uIGpvaW4gZm9yZWlnbiBrZXkg\nY29sdW1ucy4KICAgICAqLwogICAgcHVibGljIEluZGV4IGdldEpvaW5JbmRl\neCgpIHsKICAgICAgICByZXR1cm4gX2lkeDsKICAgIH0KCiAgICAvKioKICAg\nICAqIEluZGV4IG9uIGpvaW4gZm9yZWlnbiBrZXkgY29sdW1ucy4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0Sm9pbkluZGV4KEluZGV4IGlkeCkgewog\nICAgICAgIF9pZHggPSBpZHg7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0\naGVyIHRvIHVzZSBhbiBvdXRlciBqb2luIGZyb20gdGhlIGNsYXNzJyBwcmlt\nYXJ5IHRhYmxlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0pvaW5P\ndXRlcigpIHsKICAgICAgICByZXR1cm4gX291dGVyOwogICAgfQoKICAgIC8q\nKgogICAgICogV2hldGhlciB0byB1c2UgYW4gb3V0ZXIgam9pbiBmcm9tIHRo\nZSBjbGFzcycgcHJpbWFyeSB0YWJsZS4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0Sm9pbk91dGVyKGJvb2xlYW4gb3V0ZXIpIHsKICAgICAgICBfb3V0\nZXIgPSBvdXRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIEZpZWxkIG9yZGVy\nIGNvbHVtbiwgaWYgYW55LgogICAgICovCiAgICBwdWJsaWMgQ29sdW1uIGdl\ndE9yZGVyQ29sdW1uKCkgewogICAgICAgIHJldHVybiBfb3JkZXJDb2wuZ2V0\nQ29sdW1uKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaWVsZCBvcmRlciBj\nb2x1bW4sIGlmIGFueS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0T3Jk\nZXJDb2x1bW4oQ29sdW1uIG9yZGVyKSB7CiAgICAgICAgX29yZGVyQ29sLnNl\ndENvbHVtbihvcmRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBJL08gaW5m\nb3JtYXRpb24gZm9yIG9yZGVyIGNvbHVtbi4KICAgICAqLwogICAgcHVibGlj\nIENvbHVtbklPIGdldE9yZGVyQ29sdW1uSU8oKSB7CiAgICAgICAgcmV0dXJu\nIF9vcmRlckNvbC5nZXRDb2x1bW5JTygpOwogICAgfQoKICAgIC8qKgogICAg\nICogSS9PIGluZm9ybWF0aW9uIGZvciBvcmRlciBjb2x1bW4uCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldE9yZGVyQ29sdW1uSU8oQ29sdW1uSU8gaW8p\nIHsKICAgICAgICBfb3JkZXJDb2wuc2V0Q29sdW1uSU8oaW8pOwogICAgfQoK\nICAgIC8qKgogICAgICogSW5jcmVtZW50IHRoZSByZWZlcmVuY2UgY291bnQg\nb2YgdXNlZCBzY2hlbWEgY29tcG9uZW50cy4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgcmVmU2NoZW1hQ29tcG9uZW50cygpIHsKICAgICAgICBpZiAoX2Zr\nICE9IG51bGwpIHsKICAgICAgICAgICAgX2ZrLnJlZigpOwogICAgICAgICAg\nICBfZmsucmVmQ29sdW1ucygpOwogICAgICAgIH0KICAgICAgICBpZiAoX29y\nZGVyQ29sLmdldENvbHVtbigpICE9IG51bGwpCiAgICAgICAgICAgIF9vcmRl\nckNvbC5nZXRDb2x1bW4oKS5yZWYoKTsKICAgICAgICBfdmFsLnJlZlNjaGVt\nYUNvbXBvbmVudHMoKTsKICAgICAgICBfa2V5LnJlZlNjaGVtYUNvbXBvbmVu\ndHMoKTsKICAgICAgICBfZWxlbS5yZWZTY2hlbWFDb21wb25lbnRzKCk7CiAg\nICAgICAgaWYgKF9qb2luVGFibGVVbmlxdWVzICE9IG51bGwpIHsKICAgICAg\nICAJZm9yIChVbmlxdWUgam9pblVuaXF1ZSA6IF9qb2luVGFibGVVbmlxdWVz\nKSB7CiAgICAgICAgCQlmb3IgKENvbHVtbiBjb2wgOiBqb2luVW5pcXVlLmdl\ndENvbHVtbnMoKSkgewogICAgICAgIAkJCWNvbC5yZWYoKTsKICAgICAgICAJ\nCX0KICAgICAgICAJfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIENsZWFyIG1hcHBpbmcgaW5mb3JtYXRpb24sIGluY2x1ZGluZyBzdHJhdGVn\neS4KICAgICAqLwogICAgcHVibGljIHZvaWQgY2xlYXJNYXBwaW5nKCkgewog\nICAgICAgIF9zdHJhdGVneSA9IG51bGw7CiAgICAgICAgX2ZrID0gbnVsbDsK\nICAgICAgICBfdW5xID0gbnVsbDsKICAgICAgICBfaWR4ID0gbnVsbDsKICAg\nICAgICBfb3V0ZXIgPSBmYWxzZTsKICAgICAgICBfb3JkZXJDb2wuc2V0Q29s\ndW1uKG51bGwpOwogICAgICAgIF92YWwuY2xlYXJNYXBwaW5nKCk7CiAgICAg\nICAgX2tleS5jbGVhck1hcHBpbmcoKTsKICAgICAgICBfZWxlbS5jbGVhck1h\ncHBpbmcoKTsKICAgICAgICBfaW5mby5jbGVhcigpOwogICAgICAgIHNldFJl\nc29sdmUoTU9ERV9NQVBQSU5HLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBVcGRhdGUge0BsaW5rIE1hcHBpbmdJbmZvfSB3aXRoIG91ciBjdXJy\nZW50IG1hcHBpbmcgaW5mb3JtYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHN5bmNNYXBwaW5nSW5mbygpIHsKICAgICAgICBpZiAoaXNWZXJzaW9u\nKCkpIHsKICAgICAgICAgICAgLy8gd2UgcmVseSBvbiB0aGUgZmFjdCB0aGF0\nIHRoZSB2ZXJzaW9uIHdpbGwgc2V0dXAgb3VyIG1hcHBpbmcKICAgICAgICAg\nICAgLy8gaW5mbyBjb3JyZWN0bHkgd2hlbiBpdCBpcyBzeW5jZWQKICAgICAg\nICB9IGVsc2UgaWYgKGdldE1hcHBlZEJ5TWFwcGluZygpICE9IG51bGwpIHsK\nICAgICAgICAgICAgX2luZm8uY2xlYXIoKTsKICAgICAgICAgICAgX3ZhbC5n\nZXRWYWx1ZUluZm8oKS5jbGVhcigpOwogICAgICAgICAgICBfa2V5LmdldFZh\nbHVlSW5mbygpLmNsZWFyKCk7CiAgICAgICAgICAgIF9lbGVtLmdldFZhbHVl\nSW5mbygpLmNsZWFyKCk7CgogICAgICAgICAgICBGaWVsZE1hcHBpbmcgbWFw\ncGVkID0gZ2V0TWFwcGVkQnlNYXBwaW5nKCk7CiAgICAgICAgICAgIF9pbmZv\nLnN5bmNTdHJhdGVneSh0aGlzKTsKICAgICAgICAgICAgaWYgKF9vcmRlckNv\nbC5nZXRDb2x1bW4oKSAhPSBudWxsCiAgICAgICAgICAgICAgICAmJiBtYXBw\nZWQuZ2V0T3JkZXJDb2x1bW4oKSA9PSBudWxsKQogICAgICAgICAgICAgICAg\nX2luZm8uc3luY09yZGVyQ29sdW1uKHRoaXMpOwogICAgICAgICAgICBfdmFs\nLmdldFZhbHVlSW5mbygpLnNldFVzZUNsYXNzQ3JpdGVyaWEKICAgICAgICAg\nICAgICAgIChfdmFsLmdldFVzZUNsYXNzQ3JpdGVyaWEoKSk7CiAgICAgICAg\nICAgIF9rZXkuZ2V0VmFsdWVJbmZvKCkuc2V0VXNlQ2xhc3NDcml0ZXJpYQog\nICAgICAgICAgICAgICAgKF9rZXkuZ2V0VXNlQ2xhc3NDcml0ZXJpYSgpKTsK\nICAgICAgICAgICAgX2VsZW0uZ2V0VmFsdWVJbmZvKCkuc2V0VXNlQ2xhc3ND\ncml0ZXJpYQogICAgICAgICAgICAgICAgKF9lbGVtLmdldFVzZUNsYXNzQ3Jp\ndGVyaWEoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX2luZm8u\nc3luY1dpdGgodGhpcyk7CiAgICAgICAgICAgIF92YWwuc3luY01hcHBpbmdJ\nbmZvKCk7CiAgICAgICAgICAgIF9rZXkuc3luY01hcHBpbmdJbmZvKCk7CiAg\nICAgICAgICAgIF9lbGVtLnN5bmNNYXBwaW5nSW5mbygpOwogICAgICAgIH0K\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiBmaWVsZCBj\nbGFzcyBkb2VzIG5vdCB1c2UgdGhlICJub25lIiBzdHJhdGVneSAoaW5jbHVk\naW5nCiAgICAgKiBpZiBpdCBoYXMgYSBudWxsIHN0cmF0ZWd5LCBhbmQgdGhl\ncmVmb3JlIGlzIHByb2JhYmx5IGluIHRoZSBwcm9jZXNzIG9mCiAgICAgKiBi\nZWluZyBtYXBwZWQpLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc01h\ncHBlZCgpIHsKICAgICAgICByZXR1cm4gX3N0cmF0ZWd5ICE9IE5vbmVGaWVs\nZFN0cmF0ZWd5LmdldEluc3RhbmNlKCk7CiAgICB9CgogICAgLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLwogICAgLy8gTWV0YURhdGEgaW50ZXJmYWNlCiAgICAv\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgLyoqCiAgICAgKiBUaGUgZWFn\nZXIgZmV0Y2ggbW9kZSwgYXMgb25lIG9mIHRoZSBlYWdlciBjb25zdGFudHMg\naW4KICAgICAqIHtAbGluayBKREJDRmV0Y2hDb25maWd1cmF0aW9ufS4KICAg\nICAqLwogICAgcHVibGljIGludCBnZXRFYWdlckZldGNoTW9kZSgpIHsKICAg\nICAgICBpZiAoX2ZldGNoTW9kZSA9PSBJbnRlZ2VyLk1BWF9WQUxVRSkKICAg\nICAgICAgICAgX2ZldGNoTW9kZSA9IEZldGNoQ29uZmlndXJhdGlvbi5ERUZB\nVUxUOwogICAgICAgIHJldHVybiBfZmV0Y2hNb2RlOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIGVhZ2VyIGZldGNoIG1vZGUsIGFzIG9uZSBvZiB0aGUg\nZWFnZXIgY29uc3RhbnRzIGluCiAgICAgKiB7QGxpbmsgSkRCQ0ZldGNoQ29u\nZmlndXJhdGlvbn0uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEVhZ2Vy\nRmV0Y2hNb2RlKGludCBtb2RlKSB7CiAgICAgICAgX2ZldGNoTW9kZSA9IG1v\nZGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2Qg\ndG8gcGVyZm9ybSBjYXN0IGZyb20KICAgICAqIHtAbGluayBGaWVsZE1ldGFE\nYXRhI2dldFJlcG9zaXRvcnl9CiAgICAgKi8KICAgIHB1YmxpYyBNYXBwaW5n\nUmVwb3NpdG9yeSBnZXRNYXBwaW5nUmVwb3NpdG9yeSgpIHsKICAgICAgICBy\nZXR1cm4gKE1hcHBpbmdSZXBvc2l0b3J5KSBnZXRSZXBvc2l0b3J5KCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVy\nZm9ybSBjYXN0IGZyb20KICAgICAqIHtAbGluayBGaWVsZE1ldGFEYXRhI2dl\ndERlZmluaW5nTWV0YURhdGF9CiAgICAgKi8KICAgIHB1YmxpYyBDbGFzc01h\ncHBpbmcgZ2V0RGVmaW5pbmdNYXBwaW5nKCkgewogICAgICAgIHJldHVybiAo\nQ2xhc3NNYXBwaW5nKSBnZXREZWZpbmluZ01ldGFEYXRhKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVyZm9ybSBj\nYXN0IGZyb20KICAgICAqIHtAbGluayBGaWVsZE1ldGFEYXRhI2dldERlY2xh\ncmluZ01ldGFEYXRhfQogICAgICovCiAgICBwdWJsaWMgQ2xhc3NNYXBwaW5n\nIGdldERlY2xhcmluZ01hcHBpbmcoKSB7CiAgICAgICAgcmV0dXJuIChDbGFz\nc01hcHBpbmcpIGdldERlY2xhcmluZ01ldGFEYXRhKCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVyZm9ybSBjYXN0\nIGZyb20ge0BsaW5rIEZpZWxkTWV0YURhdGEjZ2V0S2V5fQogICAgICovCiAg\nICBwdWJsaWMgVmFsdWVNYXBwaW5nIGdldEtleU1hcHBpbmcoKSB7CiAgICAg\nICAgcmV0dXJuIF9rZXk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5p\nZW5jZSBtZXRob2QgdG8gcGVyZm9ybSBjYXN0IGZyb20ge0BsaW5rIEZpZWxk\nTWV0YURhdGEjZ2V0RWxlbWVudH0KICAgICAqLwogICAgcHVibGljIFZhbHVl\nTWFwcGluZyBnZXRFbGVtZW50TWFwcGluZygpIHsKICAgICAgICByZXR1cm4g\nX2VsZW07CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRo\nb2QgdG8gcGVyZm9ybSBjYXN0IGZyb20ge0BsaW5rIEZpZWxkTWV0YURhdGEj\nZ2V0VmFsdWV9CiAgICAgKi8KICAgIHB1YmxpYyBWYWx1ZU1hcHBpbmcgZ2V0\nVmFsdWVNYXBwaW5nKCkgewogICAgICAgIHJldHVybiAoVmFsdWVNYXBwaW5n\nKSBnZXRWYWx1ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVuaWVu\nY2UgbWV0aG9kIHRvIHBlcmZvcm0gY2FzdCBmcm9tCiAgICAgKiB7QGxpbmsg\nRmllbGRNZXRhRGF0YSNnZXRNYXBwZWRCeU1ldGFEYXRhfQogICAgICovCiAg\nICBwdWJsaWMgRmllbGRNYXBwaW5nIGdldE1hcHBlZEJ5TWFwcGluZygpIHsK\nICAgICAgICByZXR1cm4gKEZpZWxkTWFwcGluZykgZ2V0TWFwcGVkQnlNZXRh\nRGF0YSgpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVuaWVuY2UgbWV0\naG9kIHRvIHBlcmZvcm0gY2FzdCBmcm9tCiAgICAgKiB7QGxpbmsgRmllbGRN\nZXRhRGF0YSNnZXRJbnZlcnNlTWV0YURhdGFzfQogICAgICovCiAgICBwdWJs\naWMgRmllbGRNYXBwaW5nW10gZ2V0SW52ZXJzZU1hcHBpbmdzKCkgewogICAg\nICAgIHJldHVybiAoRmllbGRNYXBwaW5nW10pIGdldEludmVyc2VNZXRhRGF0\nYXMoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiByZXNvbHZlKGludCBt\nb2RlKSB7CiAgICAgICAgaW50IGN1ciA9IGdldFJlc29sdmUoKTsKICAgICAg\nICBpZiAoc3VwZXIucmVzb2x2ZShtb2RlKSkKICAgICAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICAgICAgaWYgKChtb2RlICYgTU9ERV9NQVBQSU5HKSAhPSAw\nICYmIChjdXIgJiBNT0RFX01BUFBJTkcpID09IDApCiAgICAgICAgICAgIHJl\nc29sdmVNYXBwaW5nKCk7CiAgICAgICAgaWYgKChtb2RlICYgTU9ERV9NQVBQ\nSU5HX0lOSVQpICE9IDAgJiYgKGN1ciAmIE1PREVfTUFQUElOR19JTklUKSA9\nPSAwKQogICAgICAgICAgICBpbml0aWFsaXplTWFwcGluZygpOwogICAgICAg\nIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlc29sdmUg\ndGhlIG1hcHBpbmcgaW5mb3JtYXRpb24gZm9yIHRoaXMgZmllbGQuCiAgICAg\nKi8KICAgIHByaXZhdGUgdm9pZCByZXNvbHZlTWFwcGluZygpIHsKICAgICAg\nICBNYXBwaW5nUmVwb3NpdG9yeSByZXBvcyA9IGdldE1hcHBpbmdSZXBvc2l0\nb3J5KCk7CiAgICAgICAgaWYgKHJlcG9zLmdldE1hcHBpbmdEZWZhdWx0cygp\nLmRlZmF1bHRNaXNzaW5nSW5mbygpKSB7CiAgICAgICAgICAgIC8vIGNvcHkg\nZW1iZWRkZWQgdGVtcGxhdGUgbWFwcGluZyBpbmZvCiAgICAgICAgICAgIENs\nYXNzTWFwcGluZyBjbHMgPSBnZXREZWZpbmluZ01hcHBpbmcoKTsKICAgICAg\nICAgICAgaWYgKGNscy5nZXRFbWJlZGRpbmdNYXBwaW5nKCkgIT0gbnVsbCkg\newogICAgICAgICAgICAgICAgQ2xhc3NNYXBwaW5nIG9yaWcgPSByZXBvcy5n\nZXRNYXBwaW5nKGNscy5nZXREZXNjcmliZWRUeXBlKCksCiAgICAgICAgICAg\nICAgICAgICAgY2xzLmdldEVudkNsYXNzTG9hZGVyKCksIHRydWUpOwogICAg\nICAgICAgICAgICAgRmllbGRNYXBwaW5nIHRtcGxhdGUgPSBvcmlnLmdldEZp\nZWxkTWFwcGluZyhnZXROYW1lKCkpOwogICAgICAgICAgICAgICAgaWYgKHRt\ncGxhdGUgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBjb3B5TWFwcGlu\nZ0luZm8odG1wbGF0ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g\nY29weSBzdXBlcmNsYXNzIGZpZWxkIGluZm8KICAgICAgICAgICAgZWxzZSBp\nZiAoY2xzLmlzTWFwcGVkKCkgJiYgY2xzLmdldFBDU3VwZXJjbGFzcygpICE9\nIG51bGwKICAgICAgICAgICAgICAgICYmIGNscy5nZXREZXNjcmliZWRUeXBl\nKCkgIT0gZ2V0RGVjbGFyaW5nVHlwZSgpKSB7CiAgICAgICAgICAgICAgICBG\naWVsZE1hcHBpbmcgc3VwID0gY2xzLmdldFBDU3VwZXJjbGFzc01hcHBpbmco\nKS4KICAgICAgICAgICAgICAgICAgICBnZXRGaWVsZE1hcHBpbmcoZ2V0TmFt\nZSgpKTsKICAgICAgICAgICAgICAgIGlmIChzdXAgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgICAgICBjb3B5TWFwcGluZ0luZm8oc3VwKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKF9zdHJhdGVneSA9PSBudWxs\nKSB7CiAgICAgICAgICAgIGlmIChpc1ZlcnNpb24oKSkKICAgICAgICAgICAg\nICAgIF9zdHJhdGVneSA9IE5vbmVGaWVsZFN0cmF0ZWd5LmdldEluc3RhbmNl\nKCk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHJlcG9zLmdl\ndFN0cmF0ZWd5SW5zdGFsbGVyKCkuaW5zdGFsbFN0cmF0ZWd5KHRoaXMpOwog\nICAgICAgIH0KICAgICAgICBMb2cgbG9nID0gZ2V0UmVwb3NpdG9yeSgpLmdl\ndExvZygpOwogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAg\nICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJmaWVsZC1zdHJhdGVneSIs\nIGdldE5hbWUoKSwKICAgICAgICAgICAgICAgIF9zdHJhdGVneS5nZXRBbGlh\ncygpKSk7CgogICAgICAgIC8vIG1hcmsgbWFwcGVkIGNvbHVtbnMKICAgICAg\nICBpZiAoX29yZGVyQ29sLmdldENvbHVtbigpICE9IG51bGwpIHsKICAgICAg\nICAgICAgaWYgKGdldE9yZGVyQ29sdW1uSU8oKS5pc0luc2VydGFibGUoMCwg\nZmFsc2UpKQogICAgICAgICAgICAgICAgX29yZGVyQ29sLmdldENvbHVtbigp\nLnNldEZsYWcoQ29sdW1uLkZMQUdfRElSRUNUX0lOU0VSVCwgdHJ1ZSk7CiAg\nICAgICAgICAgIGlmIChnZXRPcmRlckNvbHVtbklPKCkuaXNVcGRhdGFibGUo\nMCwgZmFsc2UpKQogICAgICAgICAgICAgICAgX29yZGVyQ29sLmdldENvbHVt\nbigpLnNldEZsYWcoQ29sdW1uLkZMQUdfRElSRUNUX1VQREFURSwgdHJ1ZSk7\nCiAgICAgICAgfQogICAgICAgIGlmIChfZmsgIT0gbnVsbCkgewogICAgICAg\nICAgICBDb2x1bW5bXSBjb2xzID0gX2ZrLmdldENvbHVtbnMoKTsKICAgICAg\nICAgICAgQ29sdW1uSU8gaW8gPSBnZXRKb2luQ29sdW1uSU8oKTsKICAgICAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgICAgICBpZiAoaW8uaXNJbnNlcnRhYmxlKGksIGZhbHNl\nKSkKICAgICAgICAgICAgICAgICAgICBjb2xzW2ldLnNldEZsYWcoQ29sdW1u\nLkZMQUdfRktfSU5TRVJULCB0cnVlKTsKICAgICAgICAgICAgICAgIGlmIChp\nby5pc1VwZGF0YWJsZShpLCBmYWxzZSkpCiAgICAgICAgICAgICAgICAgICAg\nY29sc1tpXS5zZXRGbGFnKENvbHVtbi5GTEFHX0ZLX1VQREFURSwgdHJ1ZSk7\nCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF92YWwucmVzb2x2\nZShNT0RFX01BUFBJTkcpOwogICAgICAgIF9rZXkucmVzb2x2ZShNT0RFX01B\nUFBJTkcpOwogICAgICAgIF9lbGVtLnJlc29sdmUoTU9ERV9NQVBQSU5HKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIENvcHkgbWFwcGluZyBpbmZvIGZyb20g\ndGhlIGdpdmVuIGluc3RhbmNlIHRvIHRoaXMgb25lLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBjb3B5TWFwcGluZ0luZm8oRmllbGRNYXBwaW5nIGZtKSB7\nCiAgICAgICAgc2V0TWFwcGVkQnkoZm0uZ2V0TWFwcGVkQnkoKSk7CiAgICAg\nICAgX2luZm8uY29weShmbS5nZXRNYXBwaW5nSW5mbygpKTsKICAgICAgICBf\ndmFsLmNvcHlNYXBwaW5nSW5mbyhmbS5nZXRWYWx1ZU1hcHBpbmcoKSk7CiAg\nICAgICAgX2tleS5jb3B5TWFwcGluZ0luZm8oZm0uZ2V0S2V5TWFwcGluZygp\nKTsKICAgICAgICBfZWxlbS5jb3B5TWFwcGluZ0luZm8oZm0uZ2V0RWxlbWVu\ndE1hcHBpbmcoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBQcmVwYXJlIG1h\ncHBpbmcgZm9yIHJ1bnRpbWUgdXNlLgogICAgICovCiAgICBwcml2YXRlIHZv\naWQgaW5pdGlhbGl6ZU1hcHBpbmcoKSB7CiAgICAgICAgX3ZhbC5yZXNvbHZl\nKE1PREVfTUFQUElOR19JTklUKTsKICAgICAgICBfa2V5LnJlc29sdmUoTU9E\nRV9NQVBQSU5HX0lOSVQpOwogICAgICAgIF92YWwucmVzb2x2ZShNT0RFX01B\nUFBJTkdfSU5JVCk7CiAgICAgICAgaWYgKF9zdHJhdGVneSAhPSBudWxsKQog\nICAgICAgICAgICBfc3RyYXRlZ3kuaW5pdGlhbGl6ZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGNvcHkoRmllbGRNZXRhRGF0YSBmbWQpIHsKICAgICAg\nICBzdXBlci5jb3B5KGZtZCk7CiAgICAgICAgaWYgKF9mZXRjaE1vZGUgPT0g\nSW50ZWdlci5NQVhfVkFMVUUpCiAgICAgICAgICAgIF9mZXRjaE1vZGUgPSAo\nKEZpZWxkTWFwcGluZykgZm1kKS5nZXRFYWdlckZldGNoTW9kZSgpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBib29sZWFuIHZhbGlkYXRlRGF0YVN0b3JlRXh0\nZW5zaW9uUHJlZml4KFN0cmluZyBwcmVmaXgpIHsKICAgICAgICByZXR1cm4g\nImpkYmMtIi5lcXVhbHMocHJlZml4KTsKICAgIH0KCiAgICAvLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gRmllbGRTdHJhdGVneSBp\nbXBsZW1lbnRhdGlvbgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8KCiAgICBwdWJsaWMgU3RyaW5nIGdldEFsaWFzKCkgewogICAgICAg\nIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmdldEFsaWFzKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgbWFwKGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBh\nc3NlcnRTdHJhdGVneSgpLm1hcChhZGFwdCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBNYXAgdGhpcyBmaWVsZCB0byBpdHMgdGFibGUsIG9wdGlvbmFsbHkg\ncmVxdWlyaW5nIHRoYXQgaXQgYmUKICAgICAqIGluIGFub3RoZXIgdGFibGUu\nIFV0aWxpdHkgbWV0aG9kIGZvciB1c2UgYnkgbWFwcGluZyBzdHJhdGVnaWVz\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBtYXBKb2luKGJvb2xlYW4gYWRh\ncHQsIGJvb2xlYW4gam9pblJlcXVpcmVkKSB7CiAgICAgICAgVGFibGUgdGFi\nbGUgPSBfaW5mby5nZXRUYWJsZSh0aGlzLCBqb2luUmVxdWlyZWQsIGFkYXB0\nKTsKCiAgICAgICAgaWYodGFibGUgIT0gbnVsbCAmJiB0YWJsZS5lcXVhbHMo\nZ2V0RGVmaW5pbmdNYXBwaW5nKCkuZ2V0VGFibGUoKSkpIHsKICAgICAgICAg\nICAgLy8gRG9uJ3QgY3JlYXRlIGEgam9pbiBpZiB0aGUgZmllbGQncyB0YWJs\nZSBpcyB0aGUgc2FtZSBhcyB0aGUKICAgICAgICAgICAgLy8gY2xhc3MncyB0\nYWJsZS4gCiAgICAgICAgICAgIHRhYmxlID0gbnVsbDsKICAgICAgICB9Cgog\nICAgICAgIEZvcmVpZ25LZXkgam9pbiA9IG51bGw7CiAgICAgICAgaWYgKHRh\nYmxlICE9IG51bGwpCiAgICAgICAgICAgIGpvaW4gPSBfaW5mby5nZXRKb2lu\nKHRoaXMsIHRhYmxlLCBhZGFwdCk7CiAgICAgICAgaWYgKGpvaW4gPT0gbnVs\nbCAmJiBqb2luUmVxdWlyZWQpCiAgICAgICAgICAgIHRocm93IG5ldyBNZXRh\nRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgiam9pbi1yZXF1aXJlZCIsIHRoaXMp\nKTsKCiAgICAgICAgaWYgKGpvaW4gPT0gbnVsbCkgewogICAgICAgICAgICBf\naW5mby5hc3NlcnROb0pvaW4odGhpcywgdHJ1ZSk7CiAgICAgICAgICAgIF9p\nbmZvLmFzc2VydE5vRm9yZWlnbktleSh0aGlzLCAhYWRhcHQpOwogICAgICAg\nICAgICBfaW5mby5hc3NlcnROb1VuaXF1ZSh0aGlzLCAhYWRhcHQpOwogICAg\nICAgICAgICBfaW5mby5hc3NlcnROb0luZGV4KHRoaXMsICFhZGFwdCk7CiAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX2ZrID0gam9pbjsKICAgICAg\nICAgICAgX2lvID0gX2luZm8uZ2V0Q29sdW1uSU8oKTsKICAgICAgICAgICAg\nX291dGVyID0gX2luZm8uaXNKb2luT3V0ZXIoKTsKICAgICAgICAgICAgX3Vu\ncSA9IF9pbmZvLmdldEpvaW5VbmlxdWUodGhpcywgZmFsc2UsIGFkYXB0KTsK\nICAgICAgICAgICAgX2pvaW5UYWJsZVVuaXF1ZXMgPSBfaW5mby5nZXRKb2lu\nVGFibGVVbmlxdWVzKHRoaXMsIGZhbHNlLCBhZGFwdCk7CiAgICAgICAgICAg\nIF9pZHggPSBfaW5mby5nZXRKb2luSW5kZXgodGhpcywgYWRhcHQpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIE1hcHMgdGhlIHByaW1hcnkg\na2V5IG9uIHRoZSBzZWNvbmRhcnkgdGFibGUgZm9yIHRoaXMgZmllbGQsIGlm\nIHRoZQogICAgICogdXNlcidzIGRlZmF1bHRzIGNyZWF0ZSBvbmUuIFRoaXMg\nbXVzdCBiZSBjYWxsZWQgYWZ0ZXIKICAgICAqIHRoaXMgZmllbGQgaXMgbWFw\ncGVkIHNvIHRoYXQgaXQncyB0YWJsZSBoYXMgaXRzIGNvbHVtbnMgc2V0Lgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBtYXBQcmltYXJ5S2V5KGJvb2xlYW4g\nYWRhcHQpIHsKICAgICAgICBpZiAoYWRhcHQgJiYgX2ZrICE9IG51bGwgJiYg\nX2ZrLmdldFRhYmxlKCkuZ2V0UHJpbWFyeUtleSgpID09IG51bGwpCiAgICAg\nICAgICAgIGdldE1hcHBpbmdSZXBvc2l0b3J5KCkuZ2V0TWFwcGluZ0RlZmF1\nbHRzKCkuCiAgICAgICAgICAgICAgICBpbnN0YWxsUHJpbWFyeUtleSh0aGlz\nLCBfZmsuZ2V0VGFibGUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5p\ndGlhbGl6ZSgpIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmluaXRpYWxp\nemUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbnNlcnQoT3BlbkpQQVN0\nYXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJt\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGFzc2Vy\ndFN0cmF0ZWd5KCkuaW5zZXJ0KHNtLCBzdG9yZSwgcm0pOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBK\nREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS51cGRh\ndGUoc20sIHN0b3JlLCBybSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZGVs\nZXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwg\nUm93TWFuYWdlciBybSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmRlbGV0ZShzbSwgc3RvcmUsIHJt\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIERlbGV0ZSB0aGUgcm93IGZvciB0\naGlzIG9iamVjdCBpZiB0aGUgcmVmZXJlbmNlIGZvcmVpZ24ga2V5IGV4aXN0\ncy4KICAgICAqIFV0aWxpdHkgbWV0aG9kIGZvciB1c2UgYnkgbWFwcGluZyBz\ndHJhdGVnaWVzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBkZWxldGVSb3co\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLAogICAg\nICAgIFJvd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgaWYgKF9mayAhPSBudWxsKSB7CiAgICAgICAgICAgIFJv\ndyByb3cgPSBybS5nZXRSb3coZ2V0VGFibGUoKSwgUm93LkFDVElPTl9ERUxF\nVEUsIHNtLCB0cnVlKTsKICAgICAgICAgICAgcm93LndoZXJlRm9yZWlnbktl\neShfZmssIHNtKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdGhlIHJvdyB0byB1c2UgZm9yIHRoaXMgZmllbGQuIFRoaXMgbWV0\naG9kIGlzIG1lYW50IG9ubHkgZm9yCiAgICAgKiBzaW5nbGUtdmFsdWUgZmll\nbGRzIHRoYXQgbWlnaHQgcmVzaWRlIGluIGEgdGFibGUgdGhhdCBpcyBqb2lu\nZWQgdG8KICAgICAqIHRoZSBwcmltYXJ5IHRhYmxlIHRocm91Z2ggdGhlIGpv\naW4gZm9yZWlnbiBrZXkuIEl0IGlzIG5vdAogICAgICogbWVhbnQgZm9yIG11\nbHRpLXZhbHVlZCBmaWVsZHMgbGlrZSBjb2xsZWN0aW9ucyBhbmQgbWFwcy4g\nVGhlIG1ldGhvZAogICAgICogY2hlY2tzIHdoZXRoZXIgd2UncmUgdXNpbmcg\nYW4gb3V0ZXIgam9pbiBhbmQgaWYgc28gaXQgZGVsZXRlcyB0aGUKICAgICAq\nIGZpZWxkJ3MgcHJldmlvdXMgdmFsdWUsIHRoZW4gaWYgdGhlIGZpZWxkIGlz\nIG5vbi1udWxsIHJldHVybnMgYW4gaW5zZXJ0CiAgICAgKiByb3cgZm9yIHRo\nZSBuZXcgdmFsdWUuIFRoZSBqb2luIGZvcmVpZ24ga2V5IHdpbGwgYWxyZWFk\neSBiZSBzZXQgb24KICAgICAqIHRoZSByZXR1cm5lZCByb3c7IG1hcHBpbmcg\nc3RyYXRlZ2llcyBqdXN0IG5lZWQgdG8gc2V0IHRoZWlyIG93biB2YWx1ZXMu\nCiAgICAgKiBVdGlsaXR5IG1ldGhvZCBmb3IgdXNlIGJ5IG1hcHBpbmcgc3Ry\nYXRlZ2llcy4KICAgICAqLwogICAgcHVibGljIFJvdyBnZXRSb3coT3BlbkpQ\nQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2Vy\nIHJtLAogICAgICAgIGludCBhY3Rpb24pCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgUm93IHJvdyA9IG51bGw7CiAgICAgICAgYm9v\nbGVhbiBuZXdPdXRlclJvdyA9IGZhbHNlOwogICAgICAgIGlmIChfZmsgIT0g\nbnVsbCAmJiBfb3V0ZXIgJiYgYWN0aW9uICE9IFJvdy5BQ1RJT05fREVMRVRF\nKSB7CiAgICAgICAgICAgIC8vIGlmIHVwZGF0aW5nIHdpdGggb3V0ZXIgam9p\nbiwgZGVsZXRlIG9sZCB2YWx1ZSBmaXJzdCwgdGhlbiBpbnNlcnQ7CiAgICAg\nICAgICAgIC8vIHdlIGNhbid0IGp1c3QgdXBkYXRlIGIvYyB0aGUgcm93IG1p\nZ2h0IG5vdCBleGlzdAogICAgICAgICAgICBpZiAoYWN0aW9uID09IFJvdy5B\nQ1RJT05fVVBEQVRFKSB7CiAgICAgICAgICAgICAgICAvLyBtYXliZSBzb21l\nIG90aGVyIGZpZWxkIGFscmVhZHkgaXMgdXBkYXRpbmc/CiAgICAgICAgICAg\nICAgICByb3cgPSBybS5nZXRSb3coZ2V0VGFibGUoKSwgUm93LkFDVElPTl9V\nUERBVEUsIHNtLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpZiAocm93ID09\nIG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBSb3cgZGVsID0gcm0uZ2V0\nUm93KGdldFRhYmxlKCksIFJvdy5BQ1RJT05fREVMRVRFLCBzbSwKICAgICAg\nICAgICAgICAgICAgICAgICAgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAg\nZGVsLndoZXJlRm9yZWlnbktleShfZmssIHNtKTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICByb3cgPSBy\nbS5nZXRSb3coZ2V0VGFibGUoKSwgUm93LkFDVElPTl9JTlNFUlQsIHNtLCBm\nYWxzZSk7CgogICAgICAgICAgICAvLyBvbmx5IHVwZGF0ZS9pbnNlcnQgaWYg\ndGhlIHJvdyBleGlzdHMgYWxyZWFkeSBvciB0aGUgdmFsdWUgaXMKICAgICAg\nICAgICAgLy8gbm90IG51bGwvZGVmYXVsdAogICAgICAgICAgICBpZiAocm93\nID09IG51bGwgJiYgIWlzTnVsbFZhbHVlKHNtKSkgewogICAgICAgICAgICAg\nICAgcm93ID0gcm0uZ2V0Um93KGdldFRhYmxlKCksIFJvdy5BQ1RJT05fSU5T\nRVJULCBzbSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBuZXdPdXRlclJvdyA9\nIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UKICAgICAgICAg\nICAgcm93ID0gcm0uZ2V0Um93KGdldFRhYmxlKCksIGFjdGlvbiwgc20sIHRy\ndWUpOwoKICAgICAgICAvLyBzZXR1cCBmawogICAgICAgIGlmIChyb3cgIT0g\nbnVsbCAmJiBfZmsgIT0gbnVsbCkgewogICAgICAgICAgICBpZiAocm93Lmdl\ndEFjdGlvbigpID09IFJvdy5BQ1RJT05fSU5TRVJUKQogICAgICAgICAgICAg\nICAgcm93LnNldEZvcmVpZ25LZXkoX2ZrLCBfaW8sIHNtKTsKICAgICAgICAg\nICAgZWxzZQogICAgICAgICAgICAgICAgcm93LndoZXJlRm9yZWlnbktleShf\nZmssIHNtKTsKCiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBuZXcgb3V0\nZXIgam9pbmVkIHJvdywgbWFyayBpdCBpbnZhbGlkIHVudGlsCiAgICAgICAg\nICAgIC8vIHNvbWUgbWFwcGluZyBhY3R1YWxseSBzZXRzIGluZm9ybWF0aW9u\nIG9uIGl0CiAgICAgICAgICAgIGlmIChuZXdPdXRlclJvdykKICAgICAgICAg\nICAgICAgIHJvdy5zZXRWYWxpZChmYWxzZSk7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiByb3c7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdHJ1\nZSBpZiB0aGlzIGZpZWxkIGlzIG51bGwvZGVmYXVsdCBpbiB0aGUgZ2l2ZW4g\naW5zdGFuY2UuCiAgICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBpc051bGxW\nYWx1ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtKSB7CiAgICAgICAgc3dpdGNo\nIChnZXRUeXBlQ29kZSgpKSB7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLkJPT0xFQU46CiAgICAgICAgICAgICAgICByZXR1cm4gIXNtLmZldGNoQm9v\nbGVhbihnZXRJbmRleCgpKTsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQllURToKICAgICAgICAgICAgICAgIHJldHVybiBzbS5mZXRjaEJ5dGUoZ2V0\nSW5kZXgoKSkgPT0gMDsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ0hB\nUjoKICAgICAgICAgICAgICAgIHJldHVybiBzbS5mZXRjaENoYXIoZ2V0SW5k\nZXgoKSkgPT0gMDsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRE9VQkxF\nOgogICAgICAgICAgICAgICAgcmV0dXJuIHNtLmZldGNoRG91YmxlKGdldElu\nZGV4KCkpID09IDA7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkZMT0FU\nOgogICAgICAgICAgICAgICAgcmV0dXJuIHNtLmZldGNoRmxvYXQoZ2V0SW5k\nZXgoKSkgPT0gMDsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UOgog\nICAgICAgICAgICAgICAgcmV0dXJuIHNtLmZldGNoSW50KGdldEluZGV4KCkp\nID09IDA7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxPTkc6CiAgICAg\nICAgICAgICAgICByZXR1cm4gc20uZmV0Y2hMb25nKGdldEluZGV4KCkpID09\nIDA7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNIT1JUOgogICAgICAg\nICAgICAgICAgcmV0dXJuIHNtLmZldGNoU2hvcnQoZ2V0SW5kZXgoKSkgPT0g\nMDsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU1RSSU5HOgogICAgICAg\nICAgICAgICAgcmV0dXJuIHNtLmZldGNoU3RyaW5nKGdldEluZGV4KCkpID09\nIG51bGw7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBy\nZXR1cm4gc20uZmV0Y2hPYmplY3QoZ2V0SW5kZXgoKSkgPT0gbnVsbDsKICAg\nICAgICB9CiAgICB9CgogICAgcHVibGljIEJvb2xlYW4gaXNDdXN0b21JbnNl\ncnQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKSB7\nCiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuaXNDdXN0b21JbnNl\ncnQoc20sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgQm9vbGVhbiBpc0N1\nc3RvbVVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUg\nc3RvcmUpIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5pc0N1\nc3RvbVVwZGF0ZShzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyBCb29s\nZWFuIGlzQ3VzdG9tRGVsZXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpE\nQkNTdG9yZSBzdG9yZSkgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVn\neSgpLmlzQ3VzdG9tRGVsZXRlKHNtLCBzdG9yZSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgY3VzdG9tSW5zZXJ0KE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20s\nIEpEQkNTdG9yZSBzdG9yZSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmN1c3RvbUluc2VydChzbSwg\nc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGN1c3RvbVVwZGF0ZShP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRl\nZ3koKS5jdXN0b21VcGRhdGUoc20sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBjdXN0b21EZWxldGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwg\nSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuY3VzdG9tRGVsZXRlKHNtLCBz\ndG9yZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0RmllbGRNYXBwaW5n\nKEZpZWxkTWFwcGluZyBvd25lcikgewogICAgICAgIGFzc2VydFN0cmF0ZWd5\nKCkuc2V0RmllbGRNYXBwaW5nKG93bmVyKTsKICAgIH0KCiAgICBwdWJsaWMg\naW50IHN1cHBvcnRzU2VsZWN0KFNlbGVjdCBzZWwsIGludCB0eXBlLCBPcGVu\nSlBBU3RhdGVNYW5hZ2VyIHNtLAogICAgICAgIEpEQkNTdG9yZSBzdG9yZSwg\nSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCkgewogICAgICAgIHJldHVy\nbiBhc3NlcnRTdHJhdGVneSgpLnN1cHBvcnRzU2VsZWN0KHNlbCwgdHlwZSwg\nc20sIHN0b3JlLCBmZXRjaCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2Vs\nZWN0RWFnZXJQYXJhbGxlbChTZWxlY3RFeGVjdXRvciBzZWwsIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBKREJD\nRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoLCBpbnQgZWFnZXJNb2RlKSB7CiAg\nICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5zZWxlY3RFYWdlclBhcmFsbGVsKHNl\nbCwgc20sIHN0b3JlLCBmZXRjaCwgZWFnZXJNb2RlKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZWxlY3RFYWdlckpvaW4oU2VsZWN0IHNlbCwgT3BlbkpQ\nQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICBKREJDU3RvcmUgc3RvcmUsIEpE\nQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIGludCBlYWdlck1vZGUpIHsK\nICAgICAgICBhc3NlcnRTdHJhdGVneSgpLnNlbGVjdEVhZ2VySm9pbihzZWws\nIHNtLCBzdG9yZSwgZmV0Y2gsIGVhZ2VyTW9kZSk7CiAgICB9CgogICAgcHVi\nbGljIGJvb2xlYW4gaXNFYWdlclNlbGVjdFRvTWFueSgpIHsKICAgICAgICBy\nZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5pc0VhZ2VyU2VsZWN0VG9NYW55KCk7\nCiAgICB9CgogICAgcHVibGljIGludCBzZWxlY3QoU2VsZWN0IHNlbCwgT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLAogICAgICAg\nIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIGludCBlYWdlck1vZGUp\nIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5zZWxlY3Qoc2Vs\nLCBzbSwgc3RvcmUsIGZldGNoLCBlYWdlck1vZGUpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIGFueSBqb2lucyBuZWVkZWQgdG8gZ2V0IGZyb20g\ndGhlIHByaW1hcnkgdGFibGUgdG8gdGhpcyB0YWJsZS4KICAgICAqLwogICAg\ncHVibGljIEpvaW5zIGpvaW4oU2VsZWN0IHNlbCkgewogICAgICAgIGlmIChf\nZmsgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAg\nIEpvaW5zIGpvaW5zID0gc2VsLm5ld0pvaW5zKCk7CiAgICAgICAgaWYgKF9v\ndXRlcikKICAgICAgICAgICAgcmV0dXJuIGpvaW5zLm91dGVySm9pbihfZmss\nIHRydWUsIGZhbHNlKTsKICAgICAgICByZXR1cm4gam9pbnMuam9pbihfZmss\nIHRydWUsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBhIDxj\nb2RlPndoZXJlUHJpbWFyeUtleTwvY29kZT4gb3IgPGNvZGU+d2hlcmVGb3Jl\naWduS2V5PC9jb2RlPgogICAgICogY29uZGl0aW9uIHRvIHRoZSBnaXZlbiBz\nZWxlY3QsIGRlcGVuZGluZyBvbiB3aGV0aGVyIHdlIGhhdmUgYSBqb2luCiAg\nICAgKiBmb3JlaWduIGtleS4KICAgICAqLwogICAgcHVibGljIHZvaWQgd2hl\ncmVQcmltYXJ5S2V5KFNlbGVjdCBzZWwsIE9wZW5KUEFTdGF0ZU1hbmFnZXIg\nc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgaWYgKF9m\nayAhPSBudWxsKQogICAgICAgICAgICBzZWwud2hlcmVGb3JlaWduS2V5KF9m\naywgc20uZ2V0T2JqZWN0SWQoKSwgZ2V0RGVmaW5pbmdNYXBwaW5nKCksCiAg\nICAgICAgICAgICAgICBzdG9yZSk7CiAgICAgICAgZWxzZQogICAgICAgICAg\nICBzZWwud2hlcmVQcmltYXJ5S2V5KHNtLmdldE9iamVjdElkKCksIGdldERl\nZmluaW5nTWFwcGluZygpLAogICAgICAgICAgICAgICAgc3RvcmUpOwogICAg\nfQoKICAgIC8qKgogICAgICogQWRkIG9yZGVyaW5nIHRvIHRoZSBnaXZlbiBz\nZWxlY3QgZm9yIGFsbCBub24tcmVsYXRpb24gb3JkZXIgdmFsdWVzLAogICAg\nICogaW5jbHVkaW5nIHRoZSBzeW50aGV0aWMgb3JkZXIgY29sdW1uLCBpZiBh\nbnkuCiAgICAgKgogICAgICogQHBhcmFtIGVsZW0gdGhlIHJlbGF0ZWQgdHlw\nZSB3ZSdyZSBmZXRjaGluZywgb3IgbnVsbAogICAgICogQHBhcmFtIGpvaW5z\nIHRoZSBqb2lucyB0byB0aGlzIGZpZWxkJ3MgdGFibGUKICAgICAqLwogICAg\ncHVibGljIHZvaWQgb3JkZXJMb2NhbChTZWxlY3Qgc2VsLCBDbGFzc01hcHBp\nbmcgZWxlbSwgSm9pbnMgam9pbnMpIHsKICAgICAgICBfb3JkZXJDb2wub3Jk\nZXIoc2VsLCBlbGVtLCBqb2lucyk7CiAgICAgICAgSkRCQ09yZGVyW10gb3Jk\nZXJzID0gKEpEQkNPcmRlcltdKSBnZXRPcmRlcnMoKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IG9yZGVycy5sZW5ndGg7IGkrKykKICAgICAgICAg\nICAgaWYgKCFvcmRlcnNbaV0uaXNJblJlbGF0aW9uKCkpCiAgICAgICAgICAg\nICAgICBvcmRlcnNbaV0ub3JkZXIoc2VsLCBlbGVtLCBqb2lucyk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBBZGQgb3JkZXJpbmcgdG8gdGhlIGdpdmVuIHNl\nbGVjdCBmb3IgYWxsIHJlbGF0aW9uLWJhc2VkIHZhbHVlcy4KICAgICAqCiAg\nICAgKiBAcGFyYW0gZWxlbSB0aGUgcmVsYXRlZCB0eXBlIHdlJ3JlIGZldGNo\naW5nCiAgICAgKiBAcGFyYW0gam9pbnMgdGhlIGpvaW5zIGFjcm9zcyB0aGUg\ncmVsYXRpb24KICAgICAqLwogICAgcHVibGljIHZvaWQgb3JkZXJSZWxhdGlv\nbihTZWxlY3Qgc2VsLCBDbGFzc01hcHBpbmcgZWxlbSwgSm9pbnMgam9pbnMp\nIHsKICAgICAgICBKREJDT3JkZXJbXSBvcmRlcnMgPSAoSkRCQ09yZGVyW10p\nIGdldE9yZGVycygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgb3Jk\nZXJzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAob3JkZXJzW2ldLmlz\nSW5SZWxhdGlvbigpKQogICAgICAgICAgICAgICAgb3JkZXJzW2ldLm9yZGVy\nKHNlbCwgZWxlbSwgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3Qg\nbG9hZEVhZ2VyUGFyYWxsZWwoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRC\nQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24g\nZmV0Y2gsIE9iamVjdCByZXMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkubG9hZEVhZ2Vy\nUGFyYWxsZWwoc20sIHN0b3JlLCBmZXRjaCwgcmVzKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBsb2FkRWFnZXJKb2luKE9wZW5KUEFTdGF0ZU1hbmFnZXIg\nc20sIEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBKREJDRmV0Y2hDb25maWd1\ncmF0aW9uIGZldGNoLCBSZXN1bHQgcmVzKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkubG9hZEVhZ2Vy\nSm9pbihzbSwgc3RvcmUsIGZldGNoLCByZXMpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGxvYWQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3Jl\nIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gs\nIFJlc3VsdCByZXMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5sb2FkKHNtLCBzdG9yZSwgZmV0Y2gs\nIHJlcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgbG9hZChPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsCiAgICAgICAgSkRCQ0Zl\ndGNoQ29uZmlndXJhdGlvbiBmZXRjaCkKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmxvYWQoc20sIHN0\nb3JlLCBmZXRjaCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCB0b0RhdGFT\ndG9yZVZhbHVlKE9iamVjdCB2YWwsIEpEQkNTdG9yZSBzdG9yZSkgewogICAg\nICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLnRvRGF0YVN0b3JlVmFsdWUo\ndmFsLCBzdG9yZSk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCB0b0tleURh\ndGFTdG9yZVZhbHVlKE9iamVjdCB2YWwsIEpEQkNTdG9yZSBzdG9yZSkgewog\nICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLnRvS2V5RGF0YVN0b3Jl\nVmFsdWUodmFsLCBzdG9yZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBw\nZW5kSXNFbXB0eShTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2VsLCBKb2lucyBq\nb2lucykgewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuYXBwZW5kSXNFbXB0\neShzcWwsIHNlbCwgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFw\ncGVuZElzTm90RW1wdHkoU1FMQnVmZmVyIHNxbCwgU2VsZWN0IHNlbCwgSm9p\nbnMgam9pbnMpIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmFwcGVuZElz\nTm90RW1wdHkoc3FsLCBzZWwsIGpvaW5zKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBhcHBlbmRJc051bGwoU1FMQnVmZmVyIHNxbCwgU2VsZWN0IHNlbCwg\nSm9pbnMgam9pbnMpIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmFwcGVu\nZElzTnVsbChzcWwsIHNlbCwgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGFwcGVuZElzTm90TnVsbChTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2Vs\nLCBKb2lucyBqb2lucykgewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuYXBw\nZW5kSXNOb3ROdWxsKHNxbCwgc2VsLCBqb2lucyk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgYXBwZW5kU2l6ZShTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2Vs\nLCBKb2lucyBqb2lucykgewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuYXBw\nZW5kU2l6ZShzcWwsIHNlbCwgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyBK\nb2lucyBqb2luKEpvaW5zIGpvaW5zLCBib29sZWFuIGZvcmNlT3V0ZXIpIHsK\nICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5qb2luKGpvaW5zLCBm\nb3JjZU91dGVyKTsKICAgIH0KCiAgICBwdWJsaWMgSm9pbnMgam9pbktleShK\nb2lucyBqb2lucywgYm9vbGVhbiBmb3JjZU91dGVyKSB7CiAgICAgICAgcmV0\ndXJuIGFzc2VydFN0cmF0ZWd5KCkuam9pbktleShqb2lucywgZm9yY2VPdXRl\ncik7CiAgICB9CgogICAgcHVibGljIEpvaW5zIGpvaW5SZWxhdGlvbihKb2lu\ncyBqb2lucywgYm9vbGVhbiBmb3JjZU91dGVyLAogICAgICAgIGJvb2xlYW4g\ndHJhdmVyc2UpIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5q\nb2luUmVsYXRpb24oam9pbnMsIGZvcmNlT3V0ZXIsIHRyYXZlcnNlKTsKICAg\nIH0KCiAgICBwdWJsaWMgSm9pbnMgam9pbktleVJlbGF0aW9uKEpvaW5zIGpv\naW5zLCBib29sZWFuIGZvcmNlT3V0ZXIsCiAgICAgICAgYm9vbGVhbiB0cmF2\nZXJzZSkgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmpvaW5L\nZXlSZWxhdGlvbihqb2lucywgZm9yY2VPdXRlciwgdHJhdmVyc2UpOwogICAg\nfQoKICAgIC8qKgogICAgICogSm9pbnMgZnJvbSB0aGUgb3duaW5nIGNsYXNz\nJyB0YWJsZSB0byB0aGUgdGFibGUgd2hlcmUgdGhpcyBmaWVsZCBsaWVzCiAg\nICAgKiB1c2luZyB0aGUgam9pbiBmb3JlaWduIGtleS4gVXRpbGl0eSBtZXRo\nb2QgZm9yIHVzZSBieSBtYXBwaW5nIHN0cmF0ZWdpZXMuCiAgICAgKi8KICAg\nIHB1YmxpYyBKb2lucyBqb2luKEpvaW5zIGpvaW5zLCBib29sZWFuIGZvcmNl\nT3V0ZXIsIGJvb2xlYW4gdG9NYW55KSB7CiAgICAgICAgaWYgKF9mayA9PSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gam9pbnM7CiAgICAgICAgaWYgKF9v\ndXRlciB8fCBmb3JjZU91dGVyKQogICAgICAgICAgICByZXR1cm4gam9pbnMu\nb3V0ZXJKb2luKF9maywgdHJ1ZSwgdG9NYW55KTsKICAgICAgICByZXR1cm4g\nam9pbnMuam9pbihfZmssIHRydWUsIHRvTWFueSk7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCBsb2FkUHJvamVjdGlvbihKREJDU3RvcmUgc3RvcmUsIEpE\nQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsCiAgICAgICAgUmVzdWx0IHJl\ncywgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAJLy8gT1BFTkpQQS02NjI6IFZlcnNpb24gZmllbGRzIGhhdmUgTm9u\nZUZpZWxkU3RyYXRlZ3kgLS0gaGVuY2UgdGhleQogICAgCS8vIG5lZWQgc3Bl\nY2lhbCB0cmVhdG1lbnQKICAgIAlpZiAoaXNWZXJzaW9uKCkpIHsKICAgIAkJ\ncmV0dXJuIGdldERlZmluaW5nTWFwcGluZygpLmdldFZlcnNpb24oKS5sb2Fk\nKG51bGwsIHN0b3JlLCByZXMpOwogICAgCX0KICAgICAgICByZXR1cm4gYXNz\nZXJ0U3RyYXRlZ3koKS5sb2FkUHJvamVjdGlvbihzdG9yZSwgZmV0Y2gsIHJl\ncywgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbG9hZEtleVBy\nb2plY3Rpb24oSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENv\nbmZpZ3VyYXRpb24gZmV0Y2gsIFJlc3VsdCByZXMsIEpvaW5zIGpvaW5zKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBh\nc3NlcnRTdHJhdGVneSgpCiAgICAgICAgICAgIC5sb2FkS2V5UHJvamVjdGlv\nbihzdG9yZSwgZmV0Y2gsIHJlcywgam9pbnMpOwogICAgfQoKICAgIHB1Ymxp\nYyBib29sZWFuIGlzVmVyc2lvbmFibGUoKSB7CiAgICAgICAgcmV0dXJuIGFz\nc2VydFN0cmF0ZWd5KCkuaXNWZXJzaW9uYWJsZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHdoZXJlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNT\ndG9yZSBzdG9yZSwgUm93TWFuYWdlciBybSwKICAgICAgICBPYmplY3QgcHJl\ndlZhbHVlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIGFzc2VydFN0cmF0ZWd5KCkud2hlcmUoc20sIHN0b3JlLCBybSwgcHJldlZh\nbHVlKTsKICAgIH0KCiAgICBwcml2YXRlIEZpZWxkU3RyYXRlZ3kgYXNzZXJ0\nU3RyYXRlZ3koKSB7CiAgICAgICAgaWYgKF9zdHJhdGVneSA9PSBudWxsKQog\nICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAg\nICAgICByZXR1cm4gX3N0cmF0ZWd5OwogICAgfQoKICAgIC8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIFZhbHVlTWFwcGluZyBpbXBs\nZW1lbnRhdGlvbgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLwoKICAgIHB1YmxpYyBWYWx1ZU1hcHBpbmdJbmZvIGdldFZhbHVlSW5mbygp\nIHsKICAgICAgICByZXR1cm4gX3ZhbC5nZXRWYWx1ZUluZm8oKTsKICAgIH0K\nCiAgICBwdWJsaWMgVmFsdWVIYW5kbGVyIGdldEhhbmRsZXIoKSB7CiAgICAg\nICAgcmV0dXJuIF92YWwuZ2V0SGFuZGxlcigpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldEhhbmRsZXIoVmFsdWVIYW5kbGVyIGhhbmRsZXIpIHsKICAg\nICAgICBfdmFsLnNldEhhbmRsZXIoaGFuZGxlcik7CiAgICB9CgogICAgcHVi\nbGljIEZpZWxkTWFwcGluZyBnZXRGaWVsZE1hcHBpbmcoKSB7CiAgICAgICAg\ncmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIENsYXNzTWFwcGluZyBn\nZXRUeXBlTWFwcGluZygpIHsKICAgICAgICByZXR1cm4gX3ZhbC5nZXRUeXBl\nTWFwcGluZygpOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01hcHBpbmcgZ2V0\nRGVjbGFyZWRUeXBlTWFwcGluZygpIHsKICAgICAgICByZXR1cm4gX3ZhbC5n\nZXREZWNsYXJlZFR5cGVNYXBwaW5nKCk7CiAgICB9CgogICAgcHVibGljIENs\nYXNzTWFwcGluZyBnZXRFbWJlZGRlZE1hcHBpbmcoKSB7CiAgICAgICAgcmV0\ndXJuIF92YWwuZ2V0RW1iZWRkZWRNYXBwaW5nKCk7CiAgICB9CgogICAgcHVi\nbGljIEZpZWxkTWFwcGluZyBnZXRWYWx1ZU1hcHBlZEJ5TWFwcGluZygpIHsK\nICAgICAgICByZXR1cm4gX3ZhbC5nZXRWYWx1ZU1hcHBlZEJ5TWFwcGluZygp\nOwogICAgfQoKICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRDb2x1bW5zKCkgewog\nICAgICAgIC8vIHBjbDogNiBKdWx5IDIwMDc6IHRoaXMgc2VlbXMgYSBiaXQg\naGFja3ksIGJ1dCBpZiB0aGUgbWFwcGluZyBpcyBhCiAgICAgICAgLy8gdmVy\nc2lvbiwgaXQgd2lsbCBoYXZlIGEgTm9uZUZpZWxkTWFwcGluZyAoc2luY2Ug\ndGhlIHZlcnNpb24gc3RyYXRlZ3kKICAgICAgICAvLyBmb3IgdGhlIGNsYXNz\nIHRha2VzIGNhcmUgb2YgaXQncyBtYXBwaW5nKSwgYW5kIE5vbmVGaWVsZFN0\ncmF0ZWdpZXMKICAgICAgICAvLyBkbyBub3QgaGF2ZSBjb2x1bW5zLgogICAg\nICAgIGlmIChpc1ZlcnNpb24oKSkKICAgICAgICAgICAgcmV0dXJuIGdldERl\nY2xhcmluZ01hcHBpbmcoKS5nZXRWZXJzaW9uKCkuZ2V0Q29sdW1ucygpOwog\nICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIF92YWwuZ2V0Q29sdW1u\ncygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldENvbHVtbnMoQ29sdW1u\nW10gY29scykgewogICAgICAgIF92YWwuc2V0Q29sdW1ucyhjb2xzKTsKICAg\nIH0KCiAgICBwdWJsaWMgQ29sdW1uSU8gZ2V0Q29sdW1uSU8oKSB7CiAgICAg\nICAgcmV0dXJuIF92YWwuZ2V0Q29sdW1uSU8oKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzZXRDb2x1bW5JTyhDb2x1bW5JTyBpbykgewogICAgICAgIF92\nYWwuc2V0Q29sdW1uSU8oaW8pOwogICAgfQoKICAgIHB1YmxpYyBGb3JlaWdu\nS2V5IGdldEZvcmVpZ25LZXkoKSB7CiAgICAgICAgcmV0dXJuIF92YWwuZ2V0\nRm9yZWlnbktleSgpOwogICAgfQoKICAgIHB1YmxpYyBGb3JlaWduS2V5IGdl\ndEZvcmVpZ25LZXkoQ2xhc3NNYXBwaW5nIHRhcmdldCkgewogICAgICAgIHJl\ndHVybiBfdmFsLmdldEZvcmVpZ25LZXkodGFyZ2V0KTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRGb3JlaWduS2V5KEZvcmVpZ25LZXkgZmspIHsKICAg\nICAgICBfdmFsLnNldEZvcmVpZ25LZXkoZmspOwogICAgfQoKICAgIHB1Ymxp\nYyBpbnQgZ2V0Sm9pbkRpcmVjdGlvbigpIHsKICAgICAgICByZXR1cm4gX3Zh\nbC5nZXRKb2luRGlyZWN0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0Sm9pbkRpcmVjdGlvbihpbnQgZGlyZWN0aW9uKSB7CiAgICAgICAgX3Zh\nbC5zZXRKb2luRGlyZWN0aW9uKGRpcmVjdGlvbik7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0Rm9yZWlnbktleShSb3cgcm93LCBPcGVuSlBBU3RhdGVN\nYW5hZ2VyIHNtKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIF92YWwuc2V0Rm9yZWlnbktleShyb3csIHNtKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB3aGVyZUZvcmVpZ25LZXkoUm93IHJvdywgT3BlbkpQQVN0\nYXRlTWFuYWdlciBzbSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBfdmFsLndoZXJlRm9yZWlnbktleShyb3csIHNtKTsKICAgIH0K\nCiAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nW10gZ2V0SW5kZXBlbmRlbnRUeXBl\nTWFwcGluZ3MoKSB7CiAgICAgICAgcmV0dXJuIF92YWwuZ2V0SW5kZXBlbmRl\nbnRUeXBlTWFwcGluZ3MoKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFNl\nbGVjdFN1YmNsYXNzZXMoKSB7CiAgICAgICAgcmV0dXJuIF92YWwuZ2V0U2Vs\nZWN0U3ViY2xhc3NlcygpOwogICAgfQoKICAgIHB1YmxpYyBVbmlxdWUgZ2V0\nVmFsdWVVbmlxdWUoKSB7CiAgICAgICAgcmV0dXJuIF92YWwuZ2V0VmFsdWVV\nbmlxdWUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRWYWx1ZVVuaXF1\nZShVbmlxdWUgdW5xKSB7CiAgICAgICAgX3ZhbC5zZXRWYWx1ZVVuaXF1ZSh1\nbnEpOwogICAgfQoKICAgIHB1YmxpYyBJbmRleCBnZXRWYWx1ZUluZGV4KCkg\newogICAgICAgIHJldHVybiBfdmFsLmdldFZhbHVlSW5kZXgoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXRWYWx1ZUluZGV4KEluZGV4IGlkeCkgewog\nICAgICAgIF92YWwuc2V0VmFsdWVJbmRleChpZHgpOwogICAgfQoKICAgIHB1\nYmxpYyBib29sZWFuIGdldFVzZUNsYXNzQ3JpdGVyaWEoKSB7CiAgICAgICAg\ncmV0dXJuIF92YWwuZ2V0VXNlQ2xhc3NDcml0ZXJpYSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldFVzZUNsYXNzQ3JpdGVyaWEoYm9vbGVhbiBjcml0\nZXJpYSkgewogICAgICAgIF92YWwuc2V0VXNlQ2xhc3NDcml0ZXJpYShjcml0\nZXJpYSk7CiAgICB9CgogICAgcHVibGljIGludCBnZXRQb2x5bW9ycGhpYygp\nIHsKICAgICAgICByZXR1cm4gX3ZhbC5nZXRQb2x5bW9ycGhpYygpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNldFBvbHltb3JwaGljKGludCBwb2x5KSB7\nCiAgICAgICAgX3ZhbC5zZXRQb2x5bW9ycGhpYyhwb2x5KTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBtYXBDb25zdHJhaW50cyhTdHJpbmcgbmFtZSwgYm9v\nbGVhbiBhZGFwdCkgewogICAgICAgIF92YWwubWFwQ29uc3RyYWludHMobmFt\nZSwgYWRhcHQpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNvcHlNYXBwaW5n\nSW5mbyhWYWx1ZU1hcHBpbmcgdm0pIHsKICAgICAgICBfdmFsLmNvcHlNYXBw\naW5nSW5mbyh2bSk7CiAgICB9Cn0K\n","encoding":"base64"}

