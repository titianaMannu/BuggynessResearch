{"sha":"e5cf3a6b335b2ffaa2a1807f5bf6e9642fd68600","node_id":"MDQ6QmxvYjIwNjM2NDplNWNmM2E2YjMzNWIyZmZhYTJhMTgwN2Y1YmY2ZTk2NDJmZDY4NjAw","size":8821,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e5cf3a6b335b2ffaa2a1807f5bf6e9642fd68600","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwu\nUHJlcGFyZWRTdGF0ZW1lbnQ7CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkpEQkNGZXRjaENvbmZpZ3VyYXRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRC\nQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5K\nYXZhU1FMVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLlZhbHVlTWFwcGluZ0luZm87CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbC5Kb2luczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zcWwuUm93OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLlJvd01hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuU1FMQnVmZmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhLkphdmFUeXBlczsKCi8qKgogKiBCYXNlIGNsYXNzIGZv\nciBMT0JzIG9uIGRhdGFiYXNlcyB0aGF0IGxpbWl0IHRoZSBtYXggZW1iZWRk\nZWQgTE9CIHNpemUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBzaW5j\nZSAwLjQuMAogKi8KYWJzdHJhY3QgY2xhc3MgTWF4RW1iZWRkZWRMb2JGaWVs\nZFN0cmF0ZWd5CiAgICBleHRlbmRzIEFic3RyYWN0RmllbGRTdHJhdGVneSB7\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGV4cGVjdGVkIHR5cGUgb2Yg\ndGhlIGZpZWxkIGZyb20ge0BsaW5rIEphdmFUeXBlc30gb3IKICAgICAqIHtA\nbGluayBKYXZhU1FMVHlwZXN9LgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJz\ndHJhY3QgaW50IGdldEV4cGVjdGVkSmF2YVR5cGUoKTsKCiAgICAvKioKICAg\nICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIG93bmluZyBmaWVsZCBpbnRvIHRo\nZSBnaXZlbiByb3cuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2\nb2lkIHVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBSb3cgcm93KQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb247CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gd2hldGhlciB0aGlzIGlzIGEgY3VzdG9tIGluc2VydC91cGRhdGUu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBCb29sZWFuIGlzQ3Vz\ndG9tKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3Jl\nIHN0b3JlKTsKCiAgICAvKioKICAgICAqIFNldCB0aGUgZGF0YSBmcm9tIHRo\nZSBnaXZlbiBzdGF0ZSBtYW5hZ2VyIGludG8gdGhlIHJlc3VsdCBzZXQuCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIHB1dERhdGEoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgUmVzdWx0U2V0IHJzLAogICAgICAgIERC\nRGljdGlvbmFyeSBkaWN0KQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb247\nCgogICAgcHVibGljIHZvaWQgbWFwKGJvb2xlYW4gYWRhcHQpIHsKICAgICAg\nICBhc3NlcnROb3RNYXBwZWRCeSgpOwoKICAgICAgICAvLyBtYXAgam9pbiBr\nZXksIGlmIGFueQogICAgICAgIGZpZWxkLm1hcEpvaW4oYWRhcHQsIGZhbHNl\nKTsKICAgICAgICBmaWVsZC5nZXRLZXlNYXBwaW5nKCkuZ2V0VmFsdWVJbmZv\nKCkuYXNzZXJ0Tm9TY2hlbWFDb21wb25lbnRzCiAgICAgICAgICAgIChmaWVs\nZC5nZXRLZXkoKSwgIWFkYXB0KTsKICAgICAgICBmaWVsZC5nZXRFbGVtZW50\nTWFwcGluZygpLmdldFZhbHVlSW5mbygpLmFzc2VydE5vU2NoZW1hQ29tcG9u\nZW50cwogICAgICAgICAgICAoZmllbGQuZ2V0RWxlbWVudCgpLCAhYWRhcHQp\nOwoKICAgICAgICBWYWx1ZU1hcHBpbmdJbmZvIHZpbmZvID0gZmllbGQuZ2V0\nVmFsdWVJbmZvKCk7CiAgICAgICAgdmluZm8uYXNzZXJ0Tm9Kb2luKGZpZWxk\nLCB0cnVlKTsKICAgICAgICB2aW5mby5hc3NlcnROb0ZvcmVpZ25LZXkoZmll\nbGQsICFhZGFwdCk7CgogICAgICAgIC8vIGdldCB2YWx1ZSBjb2x1bW5zCiAg\nICAgICAgQ29sdW1uIHRtcENvbCA9IG5ldyBDb2x1bW4oKTsKICAgICAgICB0\nbXBDb2wuc2V0TmFtZShmaWVsZC5nZXROYW1lKCkpOwogICAgICAgIHRtcENv\nbC5zZXRKYXZhVHlwZShnZXRFeHBlY3RlZEphdmFUeXBlKCkpOwogICAgICAg\nIHRtcENvbC5zZXRTaXplKC0xKTsKICAgICAgICBDb2x1bW5bXSBjb2xzID0g\ndmluZm8uZ2V0Q29sdW1ucyhmaWVsZCwgZmllbGQuZ2V0TmFtZSgpLAogICAg\nICAgICAgICBuZXcgQ29sdW1uW117IHRtcENvbCB9LCBmaWVsZC5nZXRUYWJs\nZSgpLCBhZGFwdCk7CgogICAgICAgIGZpZWxkLnNldENvbHVtbnMoY29scyk7\nCiAgICAgICAgZmllbGQuc2V0Q29sdW1uSU8odmluZm8uZ2V0Q29sdW1uSU8o\nKSk7CiAgICAgICAgZmllbGQubWFwQ29uc3RyYWludHMoZmllbGQuZ2V0TmFt\nZSgpLCBhZGFwdCk7CiAgICAgICAgZmllbGQubWFwUHJpbWFyeUtleShhZGFw\ndCk7CiAgICB9CgogICAgcHVibGljIEJvb2xlYW4gaXNDdXN0b21JbnNlcnQo\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKSB7CiAg\nICAgICAgaWYgKCFmaWVsZC5nZXRDb2x1bW5JTygpLmlzSW5zZXJ0YWJsZSgw\nLCBmYWxzZSkpCiAgICAgICAgICAgIHJldHVybiBCb29sZWFuLkZBTFNFOwog\nICAgICAgIHJldHVybiBpc0N1c3RvbShzbSwgc3RvcmUpOwogICAgfQoKICAg\nIHB1YmxpYyBCb29sZWFuIGlzQ3VzdG9tVXBkYXRlKE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAgIGlmICghZmll\nbGQuZ2V0Q29sdW1uSU8oKS5pc1VwZGF0YWJsZSgwLCBmYWxzZSkpCiAgICAg\nICAgICAgIHJldHVybiBCb29sZWFuLkZBTFNFOwogICAgICAgIHJldHVybiBp\nc0N1c3RvbShzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGlu\nc2VydChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUs\nIFJvd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgaWYgKCFmaWVsZC5nZXRDb2x1bW5JTygpLmlzSW5zZXJ0YWJs\nZSgwLCBmYWxzZSkpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBSb3cg\ncm93ID0gZmllbGQuZ2V0Um93KHNtLCBzdG9yZSwgcm0sIFJvdy5BQ1RJT05f\nSU5TRVJUKTsKICAgICAgICBpZiAocm93ICE9IG51bGwpCiAgICAgICAgICAg\nIHVwZGF0ZShzbSwgcm93KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB1cGRh\ndGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBS\nb3dNYW5hZ2VyIHJtKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIGlmICghZmllbGQuZ2V0Q29sdW1uSU8oKS5pc1VwZGF0YWJsZSgw\nLCBmYWxzZSkpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBSb3cgcm93\nID0gZmllbGQuZ2V0Um93KHNtLCBzdG9yZSwgcm0sIFJvdy5BQ1RJT05fVVBE\nQVRFKTsKICAgICAgICBpZiAocm93ICE9IG51bGwpCiAgICAgICAgICAgIHVw\nZGF0ZShzbSwgcm93KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBkZWxldGUo\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dN\nYW5hZ2VyIHJtKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIGZpZWxkLmRlbGV0ZVJvdyhzbSwgc3RvcmUsIHJtKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBjdXN0b21JbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwgSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIGN1c3RvbVVwZGF0ZShzbSwgc3RvcmUpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGN1c3RvbVVwZGF0ZShPcGVuSlBBU3RhdGVN\nYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gc2VsZWN0IGV4aXN0aW5nIHZhbHVl\nIGZvciB1cGRhdGUKICAgICAgICBDb2x1bW4gY29sID0gZmllbGQuZ2V0Q29s\ndW1ucygpWzBdOwogICAgICAgIFNlbGVjdCBzZWwgPSBzdG9yZS5nZXRTUUxG\nYWN0b3J5KCkubmV3U2VsZWN0KCk7CiAgICAgICAgc2VsLnNlbGVjdChjb2wp\nOwogICAgICAgIGZpZWxkLndoZXJlUHJpbWFyeUtleShzZWwsIHNtLCBzdG9y\nZSk7CiAgICAgICAgU1FMQnVmZmVyIHNxbCA9IHNlbC50b1NlbGVjdCh0cnVl\nLCBzdG9yZS5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKSk7CgogICAgICAgIENv\nbm5lY3Rpb24gY29ubiA9IHN0b3JlLmdldENvbm5lY3Rpb24oKTsKICAgICAg\nICBQcmVwYXJlZFN0YXRlbWVudCBzdG1udCA9IG51bGw7CiAgICAgICAgUmVz\ndWx0U2V0IHJzID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICBz\ndG1udCA9IHNxbC5wcmVwYXJlU3RhdGVtZW50KGNvbm4sCiAgICAgICAgICAg\nICAgICBSZXN1bHRTZXQuVFlQRV9TQ1JPTExfSU5TRU5TSVRJVkUsCiAgICAg\nICAgICAgICAgICBSZXN1bHRTZXQuQ09OQ1VSX1VQREFUQUJMRSk7CiAgICAg\nICAgICAgIHJzID0gc3RtbnQuZXhlY3V0ZVF1ZXJ5KCk7CiAgICAgICAgICAg\nIHJzLm5leHQoKTsKCiAgICAgICAgICAgIHB1dERhdGEoc20sIHJzLCBzdG9y\nZS5nZXREQkRpY3Rpb25hcnkoKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgaWYgKHJzICE9IG51bGwpCiAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgIHJzLmNsb3NlKCk7CiAgICAgICAgICAg\nICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgaWYgKHN0bW50ICE9IG51bGwpCiAgICAgICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0bW50LmNsb3Nl\nKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2Up\nIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgIGNvbm4uY2xvc2UoKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIGludCBzdXBwb3J0c1NlbGVjdChTZWxlY3Qgc2Vs\nLCBpbnQgdHlwZSwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICBK\nREJDU3RvcmUgc3RvcmUsIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gp\nIHsKICAgICAgICBpZiAodHlwZSA9PSBTZWxlY3QuVFlQRV9KT0lOTEVTUyAm\nJiBzZWwuaXNTZWxlY3RlZChmaWVsZC5nZXRUYWJsZSgpKSkKICAgICAgICAg\nICAgcmV0dXJuIDE7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgcHVi\nbGljIGludCBzZWxlY3QoU2VsZWN0IHNlbCwgT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwgSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENvbmZp\nZ3VyYXRpb24gZmV0Y2gsIGludCBlYWdlck1vZGUpIHsKICAgICAgICBpZiAo\nc2VsLmlzRGlzdGluY3QoKSB8fCAKICAgICAgICAgICAgZWFnZXJNb2RlID09\nIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24uRUFHRVJfTk9ORSkKICAgICAgICAg\nICAgcmV0dXJuIC0xOwogICAgICAgIHNlbC5zZWxlY3QoZmllbGQuZ2V0Q29s\ndW1ucygpWzBdLCBmaWVsZC5qb2luKHNlbCkpOwogICAgICAgIHJldHVybiAx\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvYWQoT3BlbkpQQVN0YXRlTWFu\nYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENv\nbmZpZ3VyYXRpb24gZmV0Y2gsIFJlc3VsdCByZXMpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgQ29sdW1uIGNvbCA9IGZpZWxkLmdl\ndENvbHVtbnMoKVswXTsKICAgICAgICBpZiAocmVzLmNvbnRhaW5zKGNvbCkp\nCiAgICAgICAgICAgIHNtLnN0b3JlKGZpZWxkLmdldEluZGV4KCksIGxvYWQo\nY29sLCByZXMsIG51bGwpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2Fk\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwKICAg\nICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIENvbHVtbiBjb2wgPSBmaWVs\nZC5nZXRDb2x1bW5zKClbMF07CiAgICAgICAgU2VsZWN0IHNlbCA9IHN0b3Jl\nLmdldFNRTEZhY3RvcnkoKS5uZXdTZWxlY3QoKTsKICAgICAgICBzZWwuc2Vs\nZWN0KGNvbCk7CiAgICAgICAgZmllbGQud2hlcmVQcmltYXJ5S2V5KHNlbCwg\nc20sIHN0b3JlKTsKCiAgICAgICAgUmVzdWx0IHJlcyA9IHNlbC5leGVjdXRl\nKHN0b3JlLCBmZXRjaCk7CiAgICAgICAgT2JqZWN0IHZhbCA9IG51bGw7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHJlcy5uZXh0KCkpCiAgICAg\nICAgICAgICAgICB2YWwgPSBsb2FkKGNvbCwgcmVzLCBudWxsKTsKICAgICAg\nICB9IGZpbmFsbHkgewogICAgICAgICAgICByZXMuY2xvc2UoKTsKICAgICAg\nICB9CiAgICAgICAgc20uc3RvcmUoZmllbGQuZ2V0SW5kZXgoKSwgdmFsKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIExvYWQgdGhpcyB2YWx1ZSBmcm9tIHRo\nZSBnaXZlbiByZXN1bHQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBPYmplY3Qg\nbG9hZChDb2x1bW4gY29sLCBSZXN1bHQgcmVzLCBKb2lucyBqb2lucykKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gcmVz\nLmdldE9iamVjdChjb2wsIG51bGwsIGpvaW5zKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBhcHBlbmRJc051bGwoU1FMQnVmZmVyIHNxbCwgU2VsZWN0IHNl\nbCwgSm9pbnMgam9pbnMpIHsKICAgICAgICBqb2lucyA9IGpvaW4oam9pbnMs\nIGZhbHNlKTsKICAgICAgICBzcWwuYXBwZW5kKHNlbC5nZXRDb2x1bW5BbGlh\ncyhmaWVsZC5nZXRDb2x1bW5zKClbMF0sIGpvaW5zKSkuCiAgICAgICAgICAg\nIGFwcGVuZCgiIElTICIpLmFwcGVuZFZhbHVlKG51bGwsIGZpZWxkLmdldENv\nbHVtbnMoKVswXSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kSXNO\nb3ROdWxsKFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWwsIEpvaW5zIGpvaW5z\nKSB7CiAgICAgICAgam9pbnMgPSBqb2luKGpvaW5zLCBmYWxzZSk7CiAgICAg\nICAgc3FsLmFwcGVuZChzZWwuZ2V0Q29sdW1uQWxpYXMoZmllbGQuZ2V0Q29s\ndW1ucygpWzBdLCBqb2lucykpLgogICAgICAgICAgICBhcHBlbmQoIiBJUyBO\nT1QgIikuYXBwZW5kVmFsdWUobnVsbCwgZmllbGQuZ2V0Q29sdW1ucygpWzBd\nKTsKICAgIH0KCiAgICBwdWJsaWMgSm9pbnMgam9pbihKb2lucyBqb2lucywg\nYm9vbGVhbiBmb3JjZU91dGVyKSB7CiAgICAgICAgcmV0dXJuIGZpZWxkLmpv\naW4oam9pbnMsIGZvcmNlT3V0ZXIsIGZhbHNlKTsKICAgIH0KCiAgICBwdWJs\naWMgT2JqZWN0IGxvYWRQcm9qZWN0aW9uKEpEQkNTdG9yZSBzdG9yZSwgSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwKICAgICAgICBSZXN1bHQgcmVz\nLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gbG9hZChmaWVsZC5nZXRDb2x1bW5zKClbMF0sIHJl\ncywgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzVmVyc2lv\nbmFibGUoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHdoZXJlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNT\ndG9yZSBzdG9yZSwgUm93TWFuYWdlciBybSwKICAgICAgICBPYmplY3QgcHJl\ndlZhbHVlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgfQp9\nCg==\n","encoding":"base64"}

