{"sha":"6e6f3edfead2b7735f5ef0ea71b66ba1d827a7f3","node_id":"MDQ6QmxvYjIwNjM2NDo2ZTZmM2VkZmVhZDJiNzczNWY1ZWYwZWE3MWI2NmJhMWQ4MjdhN2Yz","size":27245,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6e6f3edfead2b7735f5ef0ea71b66ba1d827a7f3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5pby5JbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uUmVhZGVyOwpp\nbXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7CmltcG9ydCBqYXZhLm1hdGgu\nQmlnRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRlZ2VyOwppbXBv\ncnQgamF2YS5zcWwuQXJyYXk7CmltcG9ydCBqYXZhLnNxbC5CbG9iOwppbXBv\ncnQgamF2YS5zcWwuQ2xvYjsKaW1wb3J0IGphdmEuc3FsLlJlZjsKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlRpbWU7\nCmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7CmltcG9ydCBqYXZhLnV0aWwu\nQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsKaW1wb3J0IGphdmEu\ndXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBv\ncnQgamF2YS51dGlsLkxvY2FsZTsKaW1wb3J0IGphdmEudXRpbC5NYXA7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkpEQkNGZXRj\naENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMua2VybmVsLkpEQkNTdG9yZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuRmllbGRNYXBwaW5nOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlwZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkZvcmVp\nZ25LZXk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEu\nVGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuQ2xv\nc2VhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5\ncGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuVW5zdXBwb3J0\nZWRFeGNlcHRpb247CgppbXBvcnQgc2VycC51dGlsLlN0cmluZ3M7CgovKioK\nICogQSB7QGxpbmsgUmVzdWx0fSBpbXBsZW1lbnRhdGlvbiBkZXNpZ25lZCB0\nbyBiZSBzdWJjbGFzc2VkIGVhc2lseSBieQogKiBpbXBsZW1lbnRhdGlvbnMu\nIEFsbCA8Y29kZT5nZXQmbHQ7dHlwZSZndDs8L2NvZGU+IGNhbGxzIGFyZSBk\nZWxlZ2F0ZWQgdG8KICogdGhlIHtAbGluayAjZ2V0T2JqZWN0SW50ZXJuYWwo\nT2JqZWN0LGludCxPYmplY3QsSm9pbnMpfSBtZXRob2QsIHdoaWNoCiAqIHNo\nb3VsZCBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzIGFsb25nIHdpdGgg\ne0BsaW5rICNuZXh0SW50ZXJuYWx9LAogKiB7QGxpbmsgI2NvbnRhaW5zSW50\nZXJuYWx9LCBhbmQge0BsaW5rIFJlc3VsdCNzaXplfS4KICogIE1vc3Qgb2Yg\ndGhlIG1ldGhvZHMgb2YgdGhpcyBjbGFzcyB3aWxsIGFjY2VwdCByZXR1cm4g\ndmFsdWVzIGZyb20KICoge0BsaW5rICNnZXRPYmplY3RJbnRlcm5hbChPYmpl\nY3QsaW50LE9iamVjdCxKb2lucyl9IHRoYXQgYXJlIG5vdCBleGFjdGx5CiAq\nIHRoZSByaWdodCB0eXBlLiBGb3IgZXhhbXBsZSwgYW55IG51bWVyaWMgdHlw\nZSBjYW4gYmUgcmV0dXJuZWQgYXMgYW55CiAqIHtAbGluayBOdW1iZXJ9IHR5\ncGUsIGFuZCBkYXRlcywgbG9jYWxlcywgY2hhcmFjdGVycywgYW5kIGJvb2xl\nYW5zIGNhbiBiZQogKiByZXR1cm5lZCBhcyBzdHJpbmdzLgogKgogKiBAYXV0\naG9yIEFiZSBXaGl0ZQogKiBAc2VlIFJlc3VsdFNldFJlc3VsdAogKi8KcHVi\nbGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0UmVzdWx0CiAgICBpbXBsZW1l\nbnRzIFJlc3VsdCB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgSm9pbnMg\nSk9JTlMgPSBuZXcgTm9PcEpvaW5zKCk7CgogICAgcHJpdmF0ZSBNYXAgX2Vh\nZ2VyID0gbnVsbDsKICAgIHByaXZhdGUgQ2xhc3NNYXBwaW5nIF9iYXNlID0g\nbnVsbDsKICAgIHByaXZhdGUgaW50IF9pbmRleCA9IDA7CiAgICBwcml2YXRl\nIGJvb2xlYW4gX2dvdEVhZ2VyID0gZmFsc2U7CiAgICBwcml2YXRlIGJvb2xl\nYW4gX3dhc051bGwgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfbG9j\na2luZyA9IGZhbHNlOwogICAgcHJpdmF0ZSBib29sZWFuIF9pZ25vcmVOZXh0\nID0gZmFsc2U7CiAgICBwcml2YXRlIGJvb2xlYW4gX2xhc3QgPSBmYWxzZTsK\nICAgIHByaXZhdGUgRmllbGRNYXBwaW5nIF9tYXBwZWRCeUZpZWxkTWFwcGlu\nZyA9IG51bGw7CiAgICBwcml2YXRlIE9iamVjdCBfbWFwcGVkQnlWYWx1ZSA9\nIG51bGw7CgogICAgcHVibGljIE9iamVjdCBnZXRFYWdlcihGaWVsZE1hcHBp\nbmcga2V5KSB7CiAgICAgICAgTWFwIG1hcCA9IGdldEVhZ2VyTWFwKHRydWUp\nOwogICAgICAgIHJldHVybiAobWFwID09IG51bGwpID8gbnVsbCA6IG1hcC5n\nZXQoa2V5KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwdXRFYWdlcihGaWVs\nZE1hcHBpbmcga2V5LCBPYmplY3QgcmVzKSB7CiAgICAgICAgTWFwIG1hcCA9\nIGdldEVhZ2VyTWFwKGZhbHNlKTsKICAgICAgICBpZiAobWFwID09IG51bGwp\nIHsKICAgICAgICAgICAgbWFwID0gbmV3IEhhc2hNYXAoKTsKICAgICAgICAg\nICAgc2V0RWFnZXJNYXAobWFwKTsKICAgICAgICB9CiAgICAgICAgbWFwLnB1\ndChrZXksIHJlcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSYXcgZWFnZXIg\naW5mb3JtYXRpb24uIE1heSBiZSBudWxsLgogICAgICoKICAgICAqIEBwYXJh\nbSBjbGllbnQgd2hldGhlciB0aGUgY2xpZW50IGlzIGFjY2Vzc2luZyBlYWdl\nciBpbmZvcm1hdGlvbgogICAgICovCiAgICBwcm90ZWN0ZWQgTWFwIGdldEVh\nZ2VyTWFwKGJvb2xlYW4gY2xpZW50KSB7CiAgICAgICAgaWYgKGNsaWVudCkK\nICAgICAgICAgICAgX2dvdEVhZ2VyID0gdHJ1ZTsKICAgICAgICByZXR1cm4g\nX2VhZ2VyOwogICAgfQoKICAgIC8qKgogICAgICogUmF3IGVhZ2VyIGluZm9y\nbWF0aW9uLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRFYWdlck1h\ncChNYXAgZWFnZXIpIHsKICAgICAgICBfZWFnZXIgPSBlYWdlcjsKICAgIH0K\nCiAgICAvKioKICAgICAqIENsb3NlcyBhbGwgZWFnZXIgcmVzdWx0cy4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgY2xvc2VF\nYWdlck1hcChfZWFnZXIpOwogICAgICAgIF9tYXBwZWRCeUZpZWxkTWFwcGlu\nZyA9IG51bGw7CiAgICAgICAgX21hcHBlZEJ5VmFsdWUgPSBudWxsOwogICAg\nfQoKICAgIC8qKgogICAgICogQ2xvc2UgYWxsIHJlc3VsdHMgaW4gZWFnZXIg\nbWFwLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBjbG9zZUVhZ2VyTWFw\nKE1hcCBlYWdlcikgewogICAgICAgIGlmIChlYWdlciAhPSBudWxsKSB7CiAg\nICAgICAgICAgIE9iamVjdCByZXM7CiAgICAgICAgICAgIGZvciAoSXRlcmF0\nb3IgaXRyID0gZWFnZXIudmFsdWVzKCkuaXRlcmF0b3IoKTsgaXRyLmhhc05l\neHQoKTspIHsKICAgICAgICAgICAgICAgIHJlcyA9IGl0ci5uZXh0KCk7CiAg\nICAgICAgICAgICAgICBpZiAocmVzICE9IHRoaXMgJiYgcmVzIGluc3RhbmNl\nb2YgQ2xvc2VhYmxlKQogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgICgoQ2xvc2VhYmxlKSByZXMpLmNsb3NlKCk7\nCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGZhbHNlIGJ5IGRlZmF1\nbHQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIHN1cHBvcnRzUmFuZG9t\nQWNjZXNzKCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYWJz\nb2x1dGUoaW50IHJvdykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBfZ290RWFnZXIgPSBmYWxzZTsKICAgICAgICByZXR1cm4gYWJz\nb2x1dGVJbnRlcm5hbChyb3cpOwogICAgfQoKICAgIC8qKgogICAgICogVGhy\nb3dzIGFuIGV4Y2VwdGlvbiBieSBkZWZhdWx0LgogICAgICovCiAgICBwcm90\nZWN0ZWQgYm9vbGVhbiBhYnNvbHV0ZUludGVybmFsKGludCByb3cpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gbmV4dCgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgX2dvdEVhZ2VyID0gZmFsc2U7CiAgICAgICAgaWYgKF9pZ25vcmVOZXh0\nKSB7CiAgICAgICAgICAgIF9pZ25vcmVOZXh0ID0gZmFsc2U7CiAgICAgICAg\nICAgIHJldHVybiBfbGFzdDsKICAgICAgICB9CiAgICAgICAgX2xhc3QgPSBu\nZXh0SW50ZXJuYWwoKTsKICAgICAgICByZXR1cm4gX2xhc3Q7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBBZHZhbmNlIHRoaXMgcm93LgogICAgICovCiAgICBw\ncm90ZWN0ZWQgYWJzdHJhY3QgYm9vbGVhbiBuZXh0SW50ZXJuYWwoKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb247CgogICAgcHVibGljIHZvaWQgcHVz\naEJhY2soKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIF9pZ25vcmVOZXh0ID0gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybnMgYSBuby1vcCBqb2lucyBvYmplY3QgYnkgZGVmYXVsdC4KICAgICAq\nLwogICAgcHVibGljIEpvaW5zIG5ld0pvaW5zKCkgewogICAgICAgIHJldHVy\nbiBKT0lOUzsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBjb250YWlucyhP\nYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBjb250YWluc0ludGVybmFsKG9iaiwgbnVsbCk7CiAgICB9\nCgogICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNBbGwoT2JqZWN0W10gb2Jq\ncykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1\ncm4gY29udGFpbnNBbGxJbnRlcm5hbChvYmpzLCBudWxsKTsKICAgIH0KCiAg\nICBwdWJsaWMgYm9vbGVhbiBjb250YWlucyhDb2x1bW4gY29sLCBKb2lucyBq\nb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gY29udGFpbnNJbnRlcm5hbChjb2wsIGpvaW5zKTsKICAgIH0KCiAg\nICBwdWJsaWMgYm9vbGVhbiBjb250YWluc0FsbChDb2x1bW5bXSBjb2xzLCBK\nb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gY29udGFpbnNBbGxJbnRlcm5hbChjb2xzLCBqb2lucyk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIHJl\nc3VsdCBjb250YWlucyBkYXRhIGZvciB0aGUgZ2l2ZW4gaWQgb3IgY29sdW1u\nLgogICAgICogVGhlIGlkIG9yIGNvbHVtbiBoYXMgbm90IGJlZWQgcGFzc2Vk\nIHRocm91Z2gge0BsaW5rICN0cmFuc2xhdGV9LgogICAgICovCiAgICBwcm90\nZWN0ZWQgYWJzdHJhY3QgYm9vbGVhbiBjb250YWluc0ludGVybmFsKE9iamVj\ndCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb247CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIHJlc3Vs\ndCBjb250YWlucyBkYXRhIGZvciBhbGwgdGhlIGdpdmVuIGlkcyBvcgogICAg\nICogY29sdW1ucy4gVGhlIGlkcyBvciBjb2x1bW5zIGhhdmUgbm90IGJlZW4g\ncGFzc2VkIHRocm91Z2gKICAgICAqIHtAbGluayAjdHJhbnNsYXRlfS4gRGVs\nZWdhdGVzIHRvIHtAbGluayAjY29udGFpbnNJbnRlcm5hbH0gYnkgZGVmYXVs\ndC4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gY29udGFpbnNBbGxJ\nbnRlcm5hbChPYmplY3RbXSBvYmpzLCBKb2lucyBqb2lucykKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IG9ianMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmICghY29udGFp\nbnNJbnRlcm5hbChvYmpzW2ldLCBqb2lucykpCiAgICAgICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAg\ncHVibGljIENsYXNzTWFwcGluZyBnZXRCYXNlTWFwcGluZygpIHsKICAgICAg\nICAvLyBpZiB3ZSd2ZSByZXR1cm5lZCBhbiBlYWdlciByZXN1bHQgdGhpcyBj\nYWxsIG1pZ2h0IGJlIGZvciB0aGF0IGVhZ2VyCiAgICAgICAgLy8gcmVzdWx0\nIGluc3RlYWQgb2Ygb3VyIHByaW1hcnkgbWFwcGluZywgc28gcmV0dXJuIG51\nbGwKICAgICAgICByZXR1cm4gKF9nb3RFYWdlcikgPyBudWxsIDogX2Jhc2U7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0QmFzZU1hcHBpbmcoQ2xhc3NN\nYXBwaW5nIGJhc2UpIHsKICAgICAgICBfYmFzZSA9IGJhc2U7CiAgICB9Cgog\nICAgcHVibGljIEZpZWxkTWFwcGluZyBnZXRNYXBwZWRCeUZpZWxkTWFwcGlu\nZygpIHsKICAgICAgICByZXR1cm4gX21hcHBlZEJ5RmllbGRNYXBwaW5nOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1hcHBlZEJ5RmllbGRNYXBwaW5n\nKEZpZWxkTWFwcGluZyBmaWVsZE1hcHBpbmcpIHsKICAgICAgICBfbWFwcGVk\nQnlGaWVsZE1hcHBpbmcgPSBmaWVsZE1hcHBpbmc7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCBnZXRNYXBwZWRCeVZhbHVlKCkgewogICAgICAgIHJldHVy\nbiBfbWFwcGVkQnlWYWx1ZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRN\nYXBwZWRCeVZhbHVlKE9iamVjdCBtYXBwZWRCeVZhbHVlKSB7CiAgICAgICAg\nX21hcHBlZEJ5VmFsdWUgPSBtYXBwZWRCeVZhbHVlOwogICAgfQoKICAgIHB1\nYmxpYyBpbnQgaW5kZXhPZigpIHsKICAgICAgICByZXR1cm4gX2luZGV4Owog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEluZGV4T2YoaW50IGlkeCkgewog\nICAgICAgIF9pbmRleCA9IGlkeDsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0\nIGxvYWQoQ2xhc3NNYXBwaW5nIG1hcHBpbmcsIEpEQkNTdG9yZSBzdG9yZSwK\nICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBsb2FkKG1h\ncHBpbmcsIHN0b3JlLCBmZXRjaCwgbnVsbCk7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdCBsb2FkKENsYXNzTWFwcGluZyBtYXBwaW5nLCBKREJDU3RvcmUg\nc3RvcmUsCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwg\nSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuICgoSkRCQ1N0b3JlTWFuYWdlcikgc3RvcmUpLmxvYWQo\nbWFwcGluZywgZmV0Y2gsIG51bGwsIHRoaXMpOwogICAgfQoKICAgIHB1Ymxp\nYyBBcnJheSBnZXRBcnJheShPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRBcnJheUludGVybmFs\nKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJs\naWMgQXJyYXkgZ2V0QXJyYXkoQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdl\ndEFycmF5SW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7\nCiAgICB9CgogICAgcHJvdGVjdGVkIEFycmF5IGdldEFycmF5SW50ZXJuYWwo\nT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIChBcnJheSkgY2hlY2tOdWxsKGdl\ndE9iamVjdEludGVybmFsKG9iaiwKICAgICAgICAgICAgSmF2YVNRTFR5cGVz\nLlNRTF9BUlJBWSwgbnVsbCwgam9pbnMpKTsKICAgIH0KCiAgICBwdWJsaWMg\nSW5wdXRTdHJlYW0gZ2V0QXNjaWlTdHJlYW0oT2JqZWN0IG9iaikKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0QXNj\naWlTdHJlYW1JbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxsKSwgbnVsbCk7\nCiAgICB9CgogICAgcHVibGljIElucHV0U3RyZWFtIGdldEFzY2lpU3RyZWFt\nKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRBc2NpaVN0cmVhbUludGVy\nbmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAg\nIHByb3RlY3RlZCBJbnB1dFN0cmVhbSBnZXRBc2NpaVN0cmVhbUludGVybmFs\nKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiAoSW5wdXRTdHJlYW0pIGNoZWNr\nTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmosCiAgICAgICAgICAgIEphdmFT\nUUxUeXBlcy5BU0NJSV9TVFJFQU0sIG51bGwsIGpvaW5zKSk7CiAgICB9Cgog\nICAgcHVibGljIEJpZ0RlY2ltYWwgZ2V0QmlnRGVjaW1hbChPYmplY3Qgb2Jq\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiBnZXRCaWdEZWNpbWFsSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCks\nIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBCaWdEZWNpbWFsIGdldEJpZ0Rl\nY2ltYWwoQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldEJpZ0RlY2ltYWxJ\nbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgQmlnRGVjaW1hbCBnZXRCaWdEZWNpbWFsSW50ZXJu\nYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgT2JqZWN0IHZhbCA9IGNoZWNrTnVsbChn\nZXRPYmplY3RJbnRlcm5hbChvYmosCiAgICAgICAgICAgIEphdmFUeXBlcy5C\nSUdERUNJTUFMLCBudWxsLCBqb2lucykpOwogICAgICAgIGlmICh2YWwgPT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHZh\nbCBpbnN0YW5jZW9mIEJpZ0RlY2ltYWwpCiAgICAgICAgICAgIHJldHVybiAo\nQmlnRGVjaW1hbCkgdmFsOwogICAgICAgIHJldHVybiBuZXcgQmlnRGVjaW1h\nbCh2YWwudG9TdHJpbmcoKSk7CiAgICB9CgogICAgcHVibGljIEJpZ0ludGVn\nZXIgZ2V0QmlnSW50ZWdlcihPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRCaWdJbnRlZ2VySW50\nZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoKICAg\nIHB1YmxpYyBCaWdJbnRlZ2VyIGdldEJpZ0ludGVnZXIoQ29sdW1uIGNvbCwg\nSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIGdldEJpZ0ludGVnZXJJbnRlcm5hbCh0cmFuc2xhdGUo\nY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgQmln\nSW50ZWdlciBnZXRCaWdJbnRlZ2VySW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9p\nbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgT2JqZWN0IHZhbCA9IGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChv\nYmosCiAgICAgICAgICAgIEphdmFUeXBlcy5CSUdJTlRFR0VSLCBudWxsLCBq\nb2lucykpOwogICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEJpZ0lu\ndGVnZXIpCiAgICAgICAgICAgIHJldHVybiAoQmlnSW50ZWdlcikgdmFsOwog\nICAgICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcih2YWwudG9TdHJpbmcoKSk7\nCiAgICB9CgogICAgcHVibGljIElucHV0U3RyZWFtIGdldEJpbmFyeVN0cmVh\nbShPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIHJldHVybiBnZXRCaW5hcnlTdHJlYW1JbnRlcm5hbCh0cmFuc2xh\ndGUob2JqLCBudWxsKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIElucHV0\nU3RyZWFtIGdldEJpbmFyeVN0cmVhbShDb2x1bW4gY29sLCBKb2lucyBqb2lu\ncykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1\ncm4gZ2V0QmluYXJ5U3RyZWFtSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9p\nbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHVibGljIElucHV0U3RyZWFtIGdl\ndExPQlN0cmVhbShKREJDU3RvcmUgc3RvcmUsIE9iamVjdCBvYmopCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldExP\nQlN0cmVhbUludGVybmFsKHN0b3JlLCB0cmFuc2xhdGUob2JqLCBudWxsKSwg\nbnVsbCk7CiAgICB9CgogICAgcHJvdGVjdGVkIElucHV0U3RyZWFtIGdldEJp\nbmFyeVN0cmVhbUludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiAo\nSW5wdXRTdHJlYW0pIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmos\nCiAgICAgICAgICAgIEphdmFTUUxUeXBlcy5CSU5BUllfU1RSRUFNLCBudWxs\nLCBqb2lucykpOwogICAgfQoKICAgIHByb3RlY3RlZCBJbnB1dFN0cmVhbSBn\nZXRMT0JTdHJlYW1JbnRlcm5hbChKREJDU3RvcmUgc3RvcmUsIE9iamVjdCBv\nYmosCiAgICAgICAgSm9pbnMgam9pbnMpIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHJldHVybiAoSW5wdXRTdHJlYW0pIGNoZWNrTnVsbChnZXRT\ndHJlYW1JbnRlcm5hbChzdG9yZSwgb2JqLAogICAgICAgICAgICBKYXZhU1FM\nVHlwZXMuQklOQVJZX1NUUkVBTSwgbnVsbCwgam9pbnMpKTsKICAgIH0KICAg\nIAogICAgcHVibGljIEJsb2IgZ2V0QmxvYihPYmplY3Qgb2JqKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRCbG9i\nSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoK\nICAgIHB1YmxpYyBCbG9iIGdldEJsb2IoQ29sdW1uIGNvbCwgSm9pbnMgam9p\nbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0\ndXJuIGdldEJsb2JJbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIGpv\naW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgQmxvYiBnZXRCbG9iSW50ZXJu\nYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIChCbG9iKSBjaGVja051bGwo\nZ2V0T2JqZWN0SW50ZXJuYWwob2JqLCBKYXZhU1FMVHlwZXMuQkxPQiwKICAg\nICAgICAgICAgbnVsbCwgam9pbnMpKTsKICAgIH0KCiAgICBwdWJsaWMgYm9v\nbGVhbiBnZXRCb29sZWFuKE9iamVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldEJvb2xlYW5JbnRlcm5h\nbCh0cmFuc2xhdGUob2JqLCBudWxsKSwgbnVsbCk7CiAgICB9CgogICAgcHVi\nbGljIGJvb2xlYW4gZ2V0Qm9vbGVhbihDb2x1bW4gY29sLCBKb2lucyBqb2lu\ncykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1\ncm4gZ2V0Qm9vbGVhbkludGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwg\nam9pbnMpOwogICAgfQoKICAgIHByb3RlY3RlZCBib29sZWFuIGdldEJvb2xl\nYW5JbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBPYmplY3QgdmFsID0gY2hl\nY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwgSmF2YVR5cGVzLkJPT0xF\nQU4sCiAgICAgICAgICAgIG51bGwsIGpvaW5zKSk7CiAgICAgICAgaWYgKHZh\nbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\ncmV0dXJuIEJvb2xlYW4udmFsdWVPZih2YWwudG9TdHJpbmcoKSkuYm9vbGVh\nblZhbHVlKCk7CiAgICB9CgogICAgcHVibGljIGJ5dGUgZ2V0Qnl0ZShPYmpl\nY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBnZXRCeXRlSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCks\nIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBieXRlIGdldEJ5dGUoQ29sdW1u\nIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIGdldEJ5dGVJbnRlcm5hbCh0cmFuc2xhdGUo\nY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgYnl0\nZSBnZXRCeXRlSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgTnVtYmVyIHZh\nbCA9IChOdW1iZXIpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmos\nCiAgICAgICAgICAgIEphdmFUeXBlcy5CWVRFLCBudWxsLCBqb2lucykpOwog\nICAgICAgIHJldHVybiAodmFsID09IG51bGwpID8gMCA6IHZhbC5ieXRlVmFs\ndWUoKTsKICAgIH0KCiAgICBwdWJsaWMgYnl0ZVtdIGdldEJ5dGVzKE9iamVj\ndCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIGdldEJ5dGVzSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCks\nIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBieXRlW10gZ2V0Qnl0ZXMoQ29s\ndW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmV0dXJuIGdldEJ5dGVzSW50ZXJuYWwodHJhbnNs\nYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIGJ5dGVbXSBnZXRCeXRlc0ludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpv\naW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiAoYnl0ZVtdKSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2Jq\nLAogICAgICAgICAgICBKYXZhU1FMVHlwZXMuQllURVMsIG51bGwsIGpvaW5z\nKSk7CiAgICB9CgogICAgcHVibGljIENhbGVuZGFyIGdldENhbGVuZGFyKE9i\namVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIGdldENhbGVuZGFySW50ZXJuYWwodHJhbnNsYXRlKG9iaiwg\nbnVsbCksIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBDYWxlbmRhciBnZXRD\nYWxlbmRhcihDb2x1bW4gY29sLCBKb2lucyBqb2lucykKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0Q2FsZW5kYXJJ\nbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgQ2FsZW5kYXIgZ2V0Q2FsZW5kYXJJbnRlcm5hbChP\nYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICBPYmplY3QgdmFsID0gY2hlY2tOdWxsKGdldE9i\namVjdEludGVybmFsKG9iaiwgSmF2YVR5cGVzLkNBTEVOREFSLAogICAgICAg\nICAgICBudWxsLCBqb2lucykpOwogICAgICAgIGlmICh2YWwgPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHZhbCBpbnN0\nYW5jZW9mIENhbGVuZGFyKQogICAgICAgICAgICByZXR1cm4gKENhbGVuZGFy\nKSB2YWw7CgogICAgICAgIENhbGVuZGFyIGNhbCA9IENhbGVuZGFyLmdldElu\nc3RhbmNlKCk7CiAgICAgICAgY2FsLnNldFRpbWUobmV3IERhdGUodmFsLnRv\nU3RyaW5nKCkpKTsKICAgICAgICByZXR1cm4gY2FsOwogICAgfQoKICAgIHB1\nYmxpYyBjaGFyIGdldENoYXIoT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0Q2hhckludGVybmFs\nKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAgICBwdWJs\naWMgY2hhciBnZXRDaGFyKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRD\naGFySW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lucyk7CiAg\nICB9CgogICAgcHJvdGVjdGVkIGNoYXIgZ2V0Q2hhckludGVybmFsKE9iamVj\ndCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIE9iamVjdCB2YWwgPSBjaGVja051bGwoZ2V0T2JqZWN0\nSW50ZXJuYWwob2JqLCBKYXZhVHlwZXMuQ0hBUiwKICAgICAgICAgICAgbnVs\nbCwgam9pbnMpKTsKICAgICAgICBpZiAodmFsID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiAwOwogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBDaGFy\nYWN0ZXIpCiAgICAgICAgICAgIHJldHVybiAoKENoYXJhY3RlcikgdmFsKS5j\naGFyVmFsdWUoKTsKCiAgICAgICAgU3RyaW5nIHN0ciA9IHZhbC50b1N0cmlu\nZygpOwogICAgICAgIHJldHVybiAoc3RyLmxlbmd0aCgpID09IDApID8gMCA6\nIHN0ci5jaGFyQXQoMCk7CiAgICB9CgogICAgcHVibGljIFJlYWRlciBnZXRD\naGFyYWN0ZXJTdHJlYW0oT2JqZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0Q2hhcmFjdGVyU3RyZWFt\nSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoK\nICAgIHB1YmxpYyBSZWFkZXIgZ2V0Q2hhcmFjdGVyU3RyZWFtKENvbHVtbiBj\nb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHJldHVybiBnZXRDaGFyYWN0ZXJTdHJlYW1JbnRlcm5hbCh0\ncmFuc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90\nZWN0ZWQgUmVhZGVyIGdldENoYXJhY3RlclN0cmVhbUludGVybmFsKE9iamVj\ndCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIE9iamVjdCB2YWwgPSBjaGVja051bGwoZ2V0T2JqZWN0\nSW50ZXJuYWwob2JqLAogICAgICAgICAgICBKYXZhU1FMVHlwZXMuQ0hBUl9T\nVFJFQU0sIG51bGwsIGpvaW5zKSk7CiAgICAgICAgaWYgKHZhbCA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAodmFsIGlu\nc3RhbmNlb2YgUmVhZGVyKQogICAgICAgICAgICByZXR1cm4gKFJlYWRlcikg\ndmFsOwogICAgICAgIHJldHVybiBuZXcgU3RyaW5nUmVhZGVyKHZhbC50b1N0\ncmluZygpKTsKICAgIH0KCiAgICBwdWJsaWMgQ2xvYiBnZXRDbG9iKE9iamVj\ndCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIGdldENsb2JJbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxsKSwg\nbnVsbCk7CiAgICB9CgogICAgcHVibGljIENsb2IgZ2V0Q2xvYihDb2x1bW4g\nY29sLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICByZXR1cm4gZ2V0Q2xvYkludGVybmFsKHRyYW5zbGF0ZShj\nb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHByb3RlY3RlZCBDbG9i\nIGdldENsb2JJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gKENs\nb2IpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmosIEphdmFTUUxU\neXBlcy5DTE9CLAogICAgICAgICAgICBudWxsLCBqb2lucykpOwogICAgfQoK\nICAgIHB1YmxpYyBEYXRlIGdldERhdGUoT2JqZWN0IG9iaikKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RGF0ZUlu\ndGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxsKTsKICAgIH0KCiAg\nICBwdWJsaWMgRGF0ZSBnZXREYXRlKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5z\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiBnZXREYXRlSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMpLCBqb2lu\ncyk7CiAgICB9CgogICAgcHJvdGVjdGVkIERhdGUgZ2V0RGF0ZUludGVybmFs\nKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIE9iamVjdCB2YWwgPSBjaGVja051bGwoZ2V0\nT2JqZWN0SW50ZXJuYWwob2JqLCBKYXZhVHlwZXMuREFURSwKICAgICAgICAg\nICAgbnVsbCwgam9pbnMpKTsKICAgICAgICBpZiAodmFsID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmICh2YWwgaW5zdGFu\nY2VvZiBEYXRlKQogICAgICAgICAgICByZXR1cm4gKERhdGUpIHZhbDsKICAg\nICAgICByZXR1cm4gbmV3IERhdGUodmFsLnRvU3RyaW5nKCkpOwogICAgfQoK\nICAgIHB1YmxpYyBqYXZhLnNxbC5EYXRlIGdldERhdGUoT2JqZWN0IG9iaiwg\nQ2FsZW5kYXIgY2FsKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIHJldHVybiBnZXREYXRlSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwg\nbnVsbCksIGNhbCwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGphdmEuc3Fs\nLkRhdGUgZ2V0RGF0ZShDb2x1bW4gY29sLCBDYWxlbmRhciBjYWwsIEpvaW5z\nIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBnZXREYXRlSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9pbnMp\nLCBjYWwsIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgamF2YS5zcWwu\nRGF0ZSBnZXREYXRlSW50ZXJuYWwoT2JqZWN0IG9iaiwgQ2FsZW5kYXIgY2Fs\nLAogICAgICAgIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiAoamF2YS5zcWwuRGF0ZSkgY2hlY2tO\ndWxsKGdldE9iamVjdEludGVybmFsKG9iaiwKICAgICAgICAgICAgSmF2YVNR\nTFR5cGVzLlNRTF9EQVRFLCBjYWwsIGpvaW5zKSk7CiAgICB9CgogICAgcHVi\nbGljIGRvdWJsZSBnZXREb3VibGUoT2JqZWN0IG9iaikKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0RG91YmxlSW50\nZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwpOwogICAgfQoKICAg\nIHB1YmxpYyBkb3VibGUgZ2V0RG91YmxlKENvbHVtbiBjb2wsIEpvaW5zIGpv\naW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBnZXREb3VibGVJbnRlcm5hbCh0cmFuc2xhdGUoY29sLCBqb2lucyks\nIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgZG91YmxlIGdldERvdWJs\nZUludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIE51bWJlciB2YWwgPSAoTnVt\nYmVyKSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2JqLAogICAgICAg\nICAgICBKYXZhVHlwZXMuRE9VQkxFLCBudWxsLCBqb2lucykpOwogICAgICAg\nIHJldHVybiAodmFsID09IG51bGwpID8gMCA6IHZhbC5kb3VibGVWYWx1ZSgp\nOwogICAgfQoKICAgIHB1YmxpYyBmbG9hdCBnZXRGbG9hdChPYmplY3Qgb2Jq\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiBnZXRGbG9hdEludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxs\nKTsKICAgIH0KCiAgICBwdWJsaWMgZmxvYXQgZ2V0RmxvYXQoQ29sdW1uIGNv\nbCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgcmV0dXJuIGdldEZsb2F0SW50ZXJuYWwodHJhbnNsYXRlKGNv\nbCwgam9pbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVkIGZsb2F0\nIGdldEZsb2F0SW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgTnVtYmVyIHZh\nbCA9IChOdW1iZXIpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmos\nCiAgICAgICAgICAgIEphdmFUeXBlcy5GTE9BVCwgbnVsbCwgam9pbnMpKTsK\nICAgICAgICByZXR1cm4gKHZhbCA9PSBudWxsKSA/IDAgOiB2YWwuZmxvYXRW\nYWx1ZSgpOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0SW50KE9iamVjdCBv\nYmopCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0\ndXJuIGdldEludEludGVybmFsKHRyYW5zbGF0ZShvYmosIG51bGwpLCBudWxs\nKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldEludChDb2x1bW4gY29sLCBK\nb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gZ2V0SW50SW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9p\nbnMpLCBqb2lucyk7CiAgICB9CgogICAgcHJvdGVjdGVkIGludCBnZXRJbnRJ\nbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBOdW1iZXIgdmFsID0gKE51bWJl\ncikgY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwKICAgICAgICAg\nICAgSmF2YVR5cGVzLklOVCwgbnVsbCwgam9pbnMpKTsKICAgICAgICByZXR1\ncm4gKHZhbCA9PSBudWxsKSA/IDAgOiB2YWwuaW50VmFsdWUoKTsKICAgIH0K\nCiAgICBwdWJsaWMgTG9jYWxlIGdldExvY2FsZShPYmplY3Qgb2JqKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRM\nb2NhbGVJbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxsKSwgbnVsbCk7CiAg\nICB9CgogICAgcHVibGljIExvY2FsZSBnZXRMb2NhbGUoQ29sdW1uIGNvbCwg\nSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIGdldExvY2FsZUludGVybmFsKHRyYW5zbGF0ZShjb2ws\nIGpvaW5zKSwgam9pbnMpOwogICAgfQoKICAgIHByb3RlY3RlZCBMb2NhbGUg\nZ2V0TG9jYWxlSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgT2JqZWN0IHZh\nbCA9IGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChvYmosIEphdmFUeXBl\ncy5MT0NBTEUsCiAgICAgICAgICAgIG51bGwsIGpvaW5zKSk7CiAgICAgICAg\naWYgKHZhbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICBpZiAodmFsIGluc3RhbmNlb2YgTG9jYWxlKQogICAgICAgICAgICBy\nZXR1cm4gKExvY2FsZSkgdmFsOwogICAgICAgIFN0cmluZ1tdIHZhbHMgPSBT\ndHJpbmdzLnNwbGl0KHZhbC50b1N0cmluZygpLCAiXyIsIDApOwogICAgICAg\nIGlmICh2YWxzLmxlbmd0aCA8IDIpCiAgICAgICAgICAgIHRocm93IG5ldyBT\nUUxFeGNlcHRpb24odmFsLnRvU3RyaW5nKCkpOwogICAgICAgIGlmICh2YWxz\nLmxlbmd0aCA9PSAyKQogICAgICAgICAgICByZXR1cm4gbmV3IExvY2FsZSh2\nYWxzWzBdLCB2YWxzWzFdKTsKICAgICAgICByZXR1cm4gbmV3IExvY2FsZSh2\nYWxzWzBdLCB2YWxzWzFdLCB2YWxzWzJdKTsKICAgIH0KCiAgICBwdWJsaWMg\nbG9uZyBnZXRMb25nKE9iamVjdCBvYmopCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldExvbmdJbnRlcm5hbCh0cmFu\nc2xhdGUob2JqLCBudWxsKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGxv\nbmcgZ2V0TG9uZyhDb2x1bW4gY29sLCBKb2lucyBqb2lucykKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0TG9uZ0lu\ndGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwogICAgfQoK\nICAgIHByb3RlY3RlZCBsb25nIGdldExvbmdJbnRlcm5hbChPYmplY3Qgb2Jq\nLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBOdW1iZXIgdmFsID0gKE51bWJlcikgY2hlY2tOdWxsKGdldE9i\namVjdEludGVybmFsKG9iaiwKICAgICAgICAgICAgSmF2YVR5cGVzLklOVCwg\nbnVsbCwgam9pbnMpKTsKICAgICAgICByZXR1cm4gKHZhbCA9PSBudWxsKSA/\nIDAgOiB2YWwuaW50VmFsdWUoKTsKICAgIH0KCiAgICBwdWJsaWMgTnVtYmVy\nIGdldE51bWJlcihPYmplY3Qgb2JqKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBnZXROdW1iZXJJbnRlcm5hbCh0cmFu\nc2xhdGUob2JqLCBudWxsKSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIE51\nbWJlciBnZXROdW1iZXIoQ29sdW1uIGNvbCwgSm9pbnMgam9pbnMpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldE51\nbWJlckludGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgam9pbnMpOwog\nICAgfQoKICAgIHByb3RlY3RlZCBOdW1iZXIgZ2V0TnVtYmVySW50ZXJuYWwo\nT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgT2JqZWN0IHZhbCA9IGNoZWNrTnVsbChnZXRP\nYmplY3RJbnRlcm5hbChvYmosCiAgICAgICAgICAgIEphdmFUeXBlcy5OVU1C\nRVIsIG51bGwsIGpvaW5zKSk7CiAgICAgICAgaWYgKHZhbCA9PSBudWxsKQog\nICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAodmFsIGluc3Rh\nbmNlb2YgTnVtYmVyKQogICAgICAgICAgICByZXR1cm4gKE51bWJlcikgdmFs\nOwogICAgICAgIHJldHVybiBuZXcgQmlnRGVjaW1hbCh2YWwudG9TdHJpbmco\nKSk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRPYmplY3QoT2JqZWN0\nIG9iaiwgaW50IG1ldGFUeXBlLCBPYmplY3QgYXJnKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRPYmplY3RJbnRl\ncm5hbCh0cmFuc2xhdGUob2JqLCBudWxsKSwgbWV0YVR5cGUsIGFyZywgbnVs\nbCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRPYmplY3QoQ29sdW1u\nIGNvbCwgT2JqZWN0IGFyZywgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldE9iamVjdEludGVy\nbmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgY29sLmdldEphdmFUeXBlKCks\nCiAgICAgICAgICAgIGFyZywgam9pbnMpOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSB2YWx1ZSBzdG9yZWQgaW4gdGhlIGdpdmVuIGlkIG9y\nIGNvbHVtbi4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IE9iamVj\ndCBnZXRPYmplY3RJbnRlcm5hbChPYmplY3Qgb2JqLCBpbnQgbWV0YVR5cGUs\nCiAgICAgICAgT2JqZWN0IGFyZywgSm9pbnMgam9pbnMpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbjsKCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgT2Jq\nZWN0IGdldFN0cmVhbUludGVybmFsKEpEQkNTdG9yZSBzdG9yZSwgT2JqZWN0\nIG9iaiwKICAgICAgICAgICAgaW50IG1ldGFUeXBlLCBPYmplY3QgYXJnLCBK\nb2lucyBqb2lucykgdGhyb3dzIFNRTEV4Y2VwdGlvbjsKICAgIAogICAgcHVi\nbGljIE9iamVjdCBnZXRTUUxPYmplY3QoT2JqZWN0IG9iaiwgTWFwIG1hcCkK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nZ2V0U1FMT2JqZWN0SW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG1h\ncCwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRTUUxPYmpl\nY3QoQ29sdW1uIGNvbCwgTWFwIG1hcCwgSm9pbnMgam9pbnMpCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldFNRTE9i\namVjdEludGVybmFsKHRyYW5zbGF0ZShjb2wsIGpvaW5zKSwgbWFwLCBqb2lu\ncyk7CiAgICB9CgogICAgcHJvdGVjdGVkIE9iamVjdCBnZXRTUUxPYmplY3RJ\nbnRlcm5hbChPYmplY3Qgb2JqLCBNYXAgbWFwLCBKb2lucyBqb2lucykKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gY2hl\nY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwgSmF2YVNRTFR5cGVzLlNR\nTF9PQkpFQ1QsCiAgICAgICAgICAgIG1hcCwgam9pbnMpKTsKICAgIH0KCiAg\nICBwdWJsaWMgUmVmIGdldFJlZihPYmplY3Qgb2JqLCBNYXAgbWFwKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRS\nZWZJbnRlcm5hbCh0cmFuc2xhdGUob2JqLCBudWxsKSwgbWFwLCBudWxsKTsK\nICAgIH0KCiAgICBwdWJsaWMgUmVmIGdldFJlZihDb2x1bW4gY29sLCBNYXAg\nbWFwLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICByZXR1cm4gZ2V0UmVmSW50ZXJuYWwodHJhbnNsYXRlKGNv\nbCwgam9pbnMpLCBtYXAsIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQg\nUmVmIGdldFJlZkludGVybmFsKE9iamVjdCBvYmosIE1hcCBtYXAsIEpvaW5z\nIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiAoUmVmKSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2Jq\nLCBKYXZhU1FMVHlwZXMuUkVGLAogICAgICAgICAgICBtYXAsIGpvaW5zKSk7\nCiAgICB9CgogICAgcHVibGljIHNob3J0IGdldFNob3J0KE9iamVjdCBvYmop\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIGdldFNob3J0SW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVsbCksIG51bGwp\nOwogICAgfQoKICAgIHB1YmxpYyBzaG9ydCBnZXRTaG9ydChDb2x1bW4gY29s\nLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gZ2V0U2hvcnRJbnRlcm5hbCh0cmFuc2xhdGUoY29s\nLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgc2hvcnQg\nZ2V0U2hvcnRJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBOdW1iZXIgdmFs\nID0gKE51bWJlcikgY2hlY2tOdWxsKGdldE9iamVjdEludGVybmFsKG9iaiwK\nICAgICAgICAgICAgSmF2YVR5cGVzLlNIT1JULCBudWxsLCBqb2lucykpOwog\nICAgICAgIHJldHVybiAodmFsID09IG51bGwpID8gMCA6IHZhbC5zaG9ydFZh\nbHVlKCk7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRTdHJpbmcoT2Jq\nZWN0IG9iaikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICByZXR1cm4gZ2V0U3RyaW5nSW50ZXJuYWwodHJhbnNsYXRlKG9iaiwgbnVs\nbCksIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3RyaW5n\nKENvbHVtbiBjb2wsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRTdHJpbmdJbnRlcm5hbCh0\ncmFuc2xhdGUoY29sLCBqb2lucyksIGpvaW5zKTsKICAgIH0KCiAgICBwcm90\nZWN0ZWQgU3RyaW5nIGdldFN0cmluZ0ludGVybmFsKE9iamVjdCBvYmosIEpv\naW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIE9iamVjdCB2YWwgPSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwo\nb2JqLCBKYXZhVHlwZXMuU1RSSU5HLAogICAgICAgICAgICBudWxsLCBqb2lu\ncykpOwogICAgICAgIHJldHVybiAodmFsID09IG51bGwpID8gbnVsbCA6IHZh\nbC50b1N0cmluZygpOwogICAgfQoKICAgIHB1YmxpYyBUaW1lIGdldFRpbWUo\nT2JqZWN0IG9iaiwgQ2FsZW5kYXIgY2FsKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRUaW1lSW50ZXJuYWwodHJh\nbnNsYXRlKG9iaiwgbnVsbCksIGNhbCwgbnVsbCk7CiAgICB9CgogICAgcHVi\nbGljIFRpbWUgZ2V0VGltZShDb2x1bW4gY29sLCBDYWxlbmRhciBjYWwsIEpv\naW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBnZXRUaW1lSW50ZXJuYWwodHJhbnNsYXRlKGNvbCwgam9p\nbnMpLCBjYWwsIGpvaW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgVGltZSBn\nZXRUaW1lSW50ZXJuYWwoT2JqZWN0IG9iaiwgQ2FsZW5kYXIgY2FsLCBKb2lu\ncyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICByZXR1cm4gKFRpbWUpIGNoZWNrTnVsbChnZXRPYmplY3RJbnRlcm5hbChv\nYmosIEphdmFTUUxUeXBlcy5USU1FLAogICAgICAgICAgICBjYWwsIGpvaW5z\nKSk7CiAgICB9CgogICAgcHVibGljIFRpbWVzdGFtcCBnZXRUaW1lc3RhbXAo\nT2JqZWN0IG9iaiwgQ2FsZW5kYXIgY2FsKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRUaW1lc3RhbXBJbnRlcm5h\nbCh0cmFuc2xhdGUob2JqLCBudWxsKSwgY2FsLCBudWxsKTsKICAgIH0KCiAg\nICBwdWJsaWMgVGltZXN0YW1wIGdldFRpbWVzdGFtcChDb2x1bW4gY29sLCBD\nYWxlbmRhciBjYWwsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRUaW1lc3RhbXBJbnRlcm5h\nbCh0cmFuc2xhdGUoY29sLCBqb2lucyksIGNhbCwgam9pbnMpOwogICAgfQoK\nICAgIHByb3RlY3RlZCBUaW1lc3RhbXAgZ2V0VGltZXN0YW1wSW50ZXJuYWwo\nT2JqZWN0IG9iaiwgQ2FsZW5kYXIgY2FsLAogICAgICAgIEpvaW5zIGpvaW5z\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiAoVGltZXN0YW1wKSBjaGVja051bGwoZ2V0T2JqZWN0SW50ZXJuYWwob2Jq\nLAogICAgICAgICAgICBKYXZhU1FMVHlwZXMuVElNRVNUQU1QLCBjYWwsIGpv\naW5zKSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gd2FzTnVsbCgpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF93\nYXNOdWxsOwogICAgfQoKICAgIHByb3RlY3RlZCBPYmplY3QgY2hlY2tOdWxs\nKE9iamVjdCB2YWwpIHsKICAgICAgICBfd2FzTnVsbCA9ICh2YWwgPT0gbnVs\nbCk7CiAgICAgICAgcmV0dXJuIHZhbDsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRMb2NraW5nKGJvb2xlYW4gbG9ja2luZykgewogICAgICAgIF9sb2Nr\naW5nID0gbG9ja2luZzsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0xv\nY2tpbmcoKSB7CiAgICAgICAgcmV0dXJuIF9sb2NraW5nOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHN0YXJ0RGF0YVJlcXVlc3QoT2JqZWN0IG1hcHBpbmcp\nIHsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBlbmREYXRhUmVxdWVzdCgpIHsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zbGF0ZSB0aGUgdXNlci1naXZl\nbiBpZCBvciBjb2x1bW4uIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBiZWZvcmUK\nICAgICAqIGRlbGVnYXRpbmcgdG8gYW55IDxjb2RlPmdldCpJbnRlcm5hbDwv\nY29kZT4gbWV0aG9kcy4gUmV0dXJuIHRoZQogICAgICogb3JpZ2luYWwgdmFs\ndWUgYnkgZGVmYXVsdC4KICAgICAqLwogICAgcHJvdGVjdGVkIE9iamVjdCB0\ncmFuc2xhdGUoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0K\nCiAgICAvKioKICAgICAqIERvLW5vdGhpbmcgam9pbnMgaW1wbGVtZW50YXRp\nb24uCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIE5vT3BKb2lu\ncwogICAgICAgIGltcGxlbWVudHMgSm9pbnMgewoKICAgICAgICBwdWJsaWMg\nYm9vbGVhbiBpc0VtcHR5KCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzT3V0ZXIoKSB7\nCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyBKb2lucyBjcm9zc0pvaW4oVGFibGUgbG9jYWxUYWJsZSwgVGFi\nbGUgZm9yZWlnblRhYmxlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIEpvaW5zIGpvaW4oRm9yZWlnbktl\neSBmaywgYm9vbGVhbiBpbnZlcnNlLCBib29sZWFuIHRvTWFueSkgewogICAg\nICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBKb2lucyBvdXRlckpvaW4oRm9yZWlnbktleSBmaywgYm9vbGVhbiBpbnZl\ncnNlLCBib29sZWFuIHRvTWFueSkgewogICAgICAgICAgICByZXR1cm4gdGhp\nczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBKb2lucyBqb2luUmVsYXRp\nb24oU3RyaW5nIG5hbWUsIEZvcmVpZ25LZXkgZmssIAogICAgICAgICAgICBD\nbGFzc01hcHBpbmcgdGFyZ2V0LCBpbnQgc3VicywgYm9vbGVhbiBpbnZlcnNl\nLCBib29sZWFuIHRvTWFueSkgewogICAgICAgICAgICByZXR1cm4gdGhpczsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBKb2lucyBvdXRlckpvaW5SZWxh\ndGlvbihTdHJpbmcgbmFtZSwgRm9yZWlnbktleSBmaywKICAgICAgICAgICAg\nQ2xhc3NNYXBwaW5nIHRhcmdldCwgaW50IHN1YnMsIGJvb2xlYW4gaW52ZXJz\nZSwgYm9vbGVhbiB0b01hbnkpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgSm9pbnMgc2V0VmFyaWFibGUo\nU3RyaW5nIHZhcikgewogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBKb2lucyBzZXRTdWJzZWxlY3QoU3RyaW5n\nIGFsaWFzKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIHZvaWQgYXBwZW5kVG8oU1FMQnVmZmVyIGJ1Zikg\newogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

