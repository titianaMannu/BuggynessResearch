{"sha":"69091419f75113f3dfd8e0774d2043abb8d32e9a","node_id":"MDQ6QmxvYjIwNjM2NDo2OTA5MTQxOWY3NTExM2YzZGZkOGUwNzc0ZDIwNDNhYmI4ZDMyZTlh","size":33471,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/69091419f75113f3dfd8e0774d2043abb8d32e9a","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWw7DQoNCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7\nDQppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsNCmltcG9ydCBqYXZhLnNx\nbC5EYXRhYmFzZU1ldGFEYXRhOw0KaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2Vw\ndGlvbjsNCmltcG9ydCBqYXZhLnNxbC5UeXBlczsNCmltcG9ydCBqYXZhLnV0\naWwuQXJyYXlzOw0KaW1wb3J0IGphdmEudXRpbC5TdHJpbmdUb2tlbml6ZXI7\nDQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5MaXQ7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuUGFyYW07DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuVmFs\nOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1\nbW47DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLklu\nZGV4Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5T\nY2hlbWE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLlNlcXVlbmNlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5UYWJsZTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkZpbHRlcnM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5K\nYXZhVHlwZXM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3Bl\nbkpQQUV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsNCg0KaW1wb3J0IHNlcnAudXRpbC5T\ndHJpbmdzOw0KDQovKioNCiAqIERpY3Rpb25hcnkgZm9yIElCTSBEQjIgZGF0\nYWJhc2UuDQogKi8NCnB1YmxpYyBjbGFzcyBEQjJEaWN0aW9uYXJ5DQogICAg\nZXh0ZW5kcyBBYnN0cmFjdERCMkRpY3Rpb25hcnkgew0KICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBh\nY2thZ2UNCiAgICAgICAgKERCMkRpY3Rpb25hcnkuY2xhc3MpOw0KDQogICAg\ncHVibGljIFN0cmluZyBvcHRpbWl6ZUNsYXVzZSA9ICJvcHRpbWl6ZSBmb3Ii\nOw0KICAgIHB1YmxpYyBTdHJpbmcgcm93Q2xhdXNlID0gInJvdyI7DQogICAg\ncHJvdGVjdGVkIGludCBkYjJTZXJ2ZXJUeXBlID0gMDsNCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIGludCBkYjJJU2VyaWVzVjVSM09yRWFybGllciA9IDE7\nDQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgZGIyVURCVjgxT3JFYXJs\naWVyID0gMjsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBkYjJaT1NW\nOHhPckxhdGVyID0gMzsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBk\nYjJVREJWODJPckxhdGVyID0gNDsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBkYjJJU2VyaWVzVjVSNE9yTGF0ZXIgPSA1Ow0KCXByb3RlY3RlZCBz\ndGF0aWMgZmluYWwgU3RyaW5nIGZvclVwZGF0ZSA9ICJGT1IgVVBEQVRFIjsN\nCiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyB3aXRoVVJDbGF1\nc2UgPSAiV0lUSCBVUiI7DQogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBT\ndHJpbmcgd2l0aENTQ2xhdXNlID0gIldJVEggQ1MiOw0KICAgIHByb3RlY3Rl\nZCBzdGF0aWMgZmluYWwgU3RyaW5nIHdpdGhSU0NsYXVzZSA9ICJXSVRIIFJT\nIjsNCiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyB3aXRoUlJD\nbGF1c2UgPSAiV0lUSCBSUiI7DQogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5h\nbCBTdHJpbmcgdXNlS2VlcFNoYXJlTG9ja0NsYXVzZQ0KICAgICAgICA9ICJV\nU0UgQU5EIEtFRVAgU0hBUkUgTE9DS1MiOw0KICAgIHByb3RlY3RlZCBzdGF0\naWMgZmluYWwgU3RyaW5nIHVzZUtlZXBVcGRhdGVMb2NrQ2xhdXNlDQogICAg\nICAgID0gIlVTRSBBTkQgS0VFUCBVUERBVEUgTE9DS1MiOw0KICAgIHByb3Rl\nY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIHVzZUtlZXBFeGNsdXNpdmVMb2Nr\nQ2xhdXNlDQogICAgICAgID0gIlVTRSBBTkQgS0VFUCBFWENMVVNJVkUgTE9D\nS1MiOw0KICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIGZvclJl\nYWRPbmx5Q2xhdXNlID0gIkZPUiBSRUFEIE9OTFkiOw0KICAgIHByb3RlY3Rl\nZCBTdHJpbmcgZGF0YWJhc2VQcm9kdWN0TmFtZSA9ICIiOw0KICAgIHByb3Rl\nY3RlZCBTdHJpbmcgZGF0YWJhc2VQcm9kdWN0VmVyc2lvbiA9ICIiOw0KICAg\nIHByb3RlY3RlZCBpbnQgbWFqID0gMDsNCiAgICBwcm90ZWN0ZWQgaW50IG1p\nbiA9IDA7DQogICAgDQogICAgcHJpdmF0ZSBpbnQgZGVmYXVsdEJhdGNoTGlt\naXQgPSAxMDA7DQoNCiAgICBwdWJsaWMgREIyRGljdGlvbmFyeSgpIHsNCiAg\nICAgICAgcGxhdGZvcm0gPSAiREIyIjsNCiAgICAgICAgdmFsaWRhdGlvblNR\nTCA9ICJTRUxFQ1QgRElTVElOQ1QoQ1VSUkVOVCBUSU1FU1RBTVApIEZST00g\nIg0KICAgICAgICAgICAgKyAiU1lTSUJNLlNZU1RBQkxFUyI7DQogICAgICAg\nIHN1cHBvcnRzU2VsZWN0RW5kSW5kZXggPSB0cnVlOw0KDQogICAgICAgIG5l\neHRTZXF1ZW5jZVF1ZXJ5ID0gIlZBTFVFUyBORVhUVkFMIEZPUiB7MH0iOw0K\nDQogICAgICAgIHNlcXVlbmNlU1FMID0gIlNFTEVDVCBTRVFTQ0hFTUEgQVMg\nU0VRVUVOQ0VfU0NIRU1BLCAiDQogICAgICAgICAgICArICJTRVFOQU1FIEFT\nIFNFUVVFTkNFX05BTUUgRlJPTSBTWVNDQVQuU0VRVUVOQ0VTIjsNCiAgICAg\nICAgc2VxdWVuY2VTY2hlbWFTUUwgPSAiU0VRU0NIRU1BID0gPyI7DQogICAg\nICAgIHNlcXVlbmNlTmFtZVNRTCA9ICJTRVFOQU1FID0gPyI7DQogICAgICAg\nIGNoYXJhY3RlckNvbHVtblNpemUgPSAyNTQ7DQoNCiAgICAgICAgYmluYXJ5\nVHlwZU5hbWUgPSAiQkxPQigxTSkiOw0KICAgICAgICBsb25nVmFyYmluYXJ5\nVHlwZU5hbWUgPSAiQkxPQigxTSkiOw0KICAgICAgICB2YXJiaW5hcnlUeXBl\nTmFtZSA9ICJCTE9CKDFNKSI7DQogICAgICAgIGNsb2JUeXBlTmFtZSA9ICJD\nTE9CKDFNKSI7DQogICAgICAgIGxvbmdWYXJjaGFyVHlwZU5hbWUgPSAiTE9O\nRyBWQVJDSEFSIjsNCiAgICAgICAgZGF0ZVByZWNpc2lvbiA9IE1JQ1JPOw0K\nICAgICAgICBzdG9yZUNoYXJzQXNOdW1iZXJzID0gZmFsc2U7DQoNCiAgICAg\nICAgZml4ZWRTaXplVHlwZU5hbWVTZXQuYWRkQWxsKEFycmF5cy5hc0xpc3Qo\nbmV3IFN0cmluZ1tdew0KICAgICAgICAgICAgIkxPTkcgVkFSQ0hBUiBGT1Ig\nQklUIERBVEEiLCAiTE9ORyBWQVJDSEFSIiwgIkxPTkcgVkFSR1JBUEhJQyIs\nDQogICAgICAgIH0pKTsNCiAgICAgICAgc3lzdGVtU2NoZW1hcyA9IG5ldyBT\ndHJpbmcoDQogICAgICAgICAgICAgICAgIlNZU0NBVCxTWVNJQk0sU1lTU1RB\nVCxTWVNJQk1BRE0sU1lTVE9PTFMiKTsNCiAgICAgICAgbWF4Q29uc3RyYWlu\ndE5hbWVMZW5ndGggPSAxODsNCiAgICAgICAgbWF4SW5kZXhOYW1lTGVuZ3Ro\nID0gMTg7DQogICAgICAgIG1heENvbHVtbk5hbWVMZW5ndGggPSAzMDsNCiAg\nICAgICAgc3VwcG9ydHNEZWZlcnJlZENvbnN0cmFpbnRzID0gZmFsc2U7DQog\nICAgICAgIHN1cHBvcnRzRGVmYXVsdERlbGV0ZUFjdGlvbiA9IGZhbHNlOw0K\nICAgICAgICBzdXBwb3J0c0FsdGVyVGFibGVXaXRoRHJvcENvbHVtbiA9IGZh\nbHNlOw0KDQogICAgICAgIHN1cHBvcnRzTnVsbFRhYmxlRm9yR2V0Q29sdW1u\ncyA9IGZhbHNlOw0KICAgICAgICByZXF1aXJlc0Nhc3RGb3JNYXRoRnVuY3Rp\nb25zID0gdHJ1ZTsNCiAgICAgICAgcmVxdWlyZXNDYXN0Rm9yQ29tcGFyaXNv\nbnMgPSB0cnVlOw0KDQogICAgICAgIHJlc2VydmVkV29yZFNldC5hZGRBbGwo\nQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117DQogICAgICAgICAgICAiQUZU\nRVIiLCAiQUxJQVMiLCAiQUxMT1ciLCAiQVBQTElDQVRJT04iLCAiQVNTT0NJ\nQVRFIiwgIkFTVVRJTUUiLA0KICAgICAgICAgICAgIkFVRElUIiwgIkFVWCIs\nICJBVVhJTElBUlkiLCAiQkVGT1JFIiwgIkJJTkFSWSIsICJCVUZGRVJQT09M\nIiwNCiAgICAgICAgICAgICJDQUNIRSIsICJDQUxMIiwgIkNBTExFRCIsICJD\nQVBUVVJFIiwgIkNBUkRJTkFMSVRZIiwgIkNDU0lEIiwNCiAgICAgICAgICAg\nICJDTFVTVEVSIiwgIkNPTExFQ1RJT04iLCAiQ09MTElEIiwgIkNPTU1FTlQi\nLCAiQ09OQ0FUIiwNCiAgICAgICAgICAgICJDT05ESVRJT04iLCAiQ09OVEFJ\nTlMiLCAiQ09VTlRfQklHIiwgIkNVUlJFTlRfTENfQ1RZUEUiLA0KICAgICAg\nICAgICAgIkNVUlJFTlRfUEFUSCIsICJDVVJSRU5UX1NFUlZFUiIsICJDVVJS\nRU5UX1RJTUVaT05FIiwgIkNZQ0xFIiwNCiAgICAgICAgICAgICJEQVRBIiwg\nIkRBVEFCQVNFIiwgIkRBWVMiLCAiREIyR0VORVJBTCIsICJEQjJHRU5STCIs\nICJEQjJTUUwiLA0KICAgICAgICAgICAgIkRCSU5GTyIsICJERUZBVUxUUyIs\nICJERUZJTklUSU9OIiwgIkRFVEVSTUlOSVNUSUMiLCAiRElTQUxMT1ciLA0K\nICAgICAgICAgICAgIkRPIiwgIkRTTkhBVFRSIiwgIkRTU0laRSIsICJEWU5B\nTUlDIiwgIkVBQ0giLCAiRURJVFBST0MiLCAiRUxTRUlGIiwNCiAgICAgICAg\nICAgICJFTkNPRElORyIsICJFTkQtRVhFQzEiLCAiRVJBU0UiLCAiRVhDTFVE\nSU5HIiwgIkVYSVQiLCAiRkVOQ0VEIiwNCiAgICAgICAgICAgICJGSUVMRFBS\nT0MiLCAiRklMRSIsICJGSU5BTCIsICJGUkVFIiwgIkZVTkNUSU9OIiwgIkdF\nTkVSQUwiLA0KICAgICAgICAgICAgIkdFTkVSQVRFRCIsICJHUkFQSElDIiwg\nIkhBTkRMRVIiLCAiSE9MRCIsICJIT1VSUyIsICJJRiIsDQogICAgICAgICAg\nICAiSU5DTFVESU5HIiwgIklOQ1JFTUVOVCIsICJJTkRFWCIsICJJTkhFUklU\nIiwgIklOT1VUIiwgIklOVEVHUklUWSIsDQogICAgICAgICAgICAiSVNPQklE\nIiwgIklURVJBVEUiLCAiSkFSIiwgIkpBVkEiLCAiTEFCRUwiLCAiTENfQ1RZ\nUEUiLCAiTEVBVkUiLA0KICAgICAgICAgICAgIkxJTktUWVBFIiwgIkxPQ0FM\nRSIsICJMT0NBVE9SIiwgIkxPQ0FUT1JTIiwgIkxPQ0siLCAiTE9DS01BWCIs\nDQogICAgICAgICAgICAiTE9DS1NJWkUiLCAiTE9ORyIsICJMT09QIiwgIk1B\nWFZBTFVFIiwgIk1JQ1JPU0VDT05EIiwNCiAgICAgICAgICAgICJNSUNST1NF\nQ09ORFMiLCAiTUlOVVRFUyIsICJNSU5WQUxVRSIsICJNT0RFIiwgIk1PRElG\nSUVTIiwgIk1PTlRIUyIsDQogICAgICAgICAgICAiTkVXIiwgIk5FV19UQUJM\nRSIsICJOT0NBQ0hFIiwgIk5PQ1lDTEUiLCAiTk9ERU5BTUUiLCAiTk9ERU5V\nTUJFUiIsDQogICAgICAgICAgICAiTk9NQVhWQUxVRSIsICJOT01JTlZBTFVF\nIiwgIk5PT1JERVIiLCAiTlVMTFMiLCAiTlVNUEFSVFMiLCAiT0JJRCIsDQog\nICAgICAgICAgICAiT0xEIiwgIk9MRF9UQUJMRSIsICJPUFRJTUlaQVRJT04i\nLCAiT1BUSU1JWkUiLCAiT1VUIiwgIk9WRVJSSURJTkciLA0KICAgICAgICAg\nICAgIlBBQ0tBR0UiLCAiUEFSQU1FVEVSIiwgIlBBUlQiLCAiUEFSVElUSU9O\nIiwgIlBBVEgiLCAiUElFQ0VTSVpFIiwNCiAgICAgICAgICAgICJQTEFOIiwg\nIlBSSVFUWSIsICJQUk9HUkFNIiwgIlBTSUQiLCAiUVVFUllOTyIsICJSRUFE\nUyIsICJSRUNPVkVSWSIsDQogICAgICAgICAgICAiUkVGRVJFTkNJTkciLCAi\nUkVMRUFTRSIsICJSRU5BTUUiLCAiUkVQRUFUIiwgIlJFU0VUIiwgIlJFU0lH\nTkFMIiwNCiAgICAgICAgICAgICJSRVNUQVJUIiwgIlJFU1VMVCIsICJSRVNV\nTFRfU0VUX0xPQ0FUT1IiLCAiUkVUVVJOIiwgIlJFVFVSTlMiLA0KICAgICAg\nICAgICAgIlJPVVRJTkUiLCAiUk9XIiwgIlJSTiIsICJSVU4iLCAiU0FWRVBP\nSU5UIiwgIlNDUkFUQ0hQQUQiLA0KICAgICAgICAgICAgIlNFQ09ORFMiLCAi\nU0VDUVRZIiwgIlNFQ1VSSVRZIiwgIlNFTlNJVElWRSIsICJTSUdOQUwiLCAi\nU0lNUExFIiwNCiAgICAgICAgICAgICJTT1VSQ0UiLCAiU1BFQ0lGSUMiLCAi\nU1FMSUQiLCAiU1RBTkRBUkQiLCAiU1RBUlQiLCAiU1RBVElDIiwNCiAgICAg\nICAgICAgICJTVEFZIiwgIlNUT0dST1VQIiwgIlNUT1JFUyIsICJTVFlMRSIs\nICJTVUJQQUdFUyIsICJTWU5PTllNIiwNCiAgICAgICAgICAgICJTWVNGVU4i\nLCAiU1lTSUJNIiwgIlNZU1BST0MiLCAiU1lTVEVNIiwgIlRBQkxFU1BBQ0Ui\nLCAiVFJJR0dFUiIsDQogICAgICAgICAgICAiVFlQRSIsICJVTkRPIiwgIlVO\nVElMIiwgIlZBTElEUFJPQyIsICJWQVJJQUJMRSIsICJWQVJJQU5UIiwgIlZD\nQVQiLA0KICAgICAgICAgICAgIlZPTFVNRVMiLCAiV0hJTEUiLCAiV0xNIiwg\nIllFQVJTIiwNCiAgICAgICAgfSkpOw0KICAgICAgICANCiAgICAgICAgc3Vw\nZXIuc2V0QmF0Y2hMaW1pdChkZWZhdWx0QmF0Y2hMaW1pdCk7DQogICAgICAg\nIA0KICAgICAgICBzZWxlY3RXb3JkU2V0LmFkZCgiV0lUSCIpOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyBib29sZWFuIHN1cHBvcnRzUmFuZG9tQWNjZXNzUmVz\ndWx0U2V0KFNlbGVjdCBzZWwsDQogICAgICAgIGJvb2xlYW4gZm9yVXBkYXRl\nKSB7DQogICAgICAgIHJldHVybiAhZm9yVXBkYXRlDQogICAgICAgICAgICAm\nJiBzdXBlci5zdXBwb3J0c1JhbmRvbUFjY2Vzc1Jlc3VsdFNldChzZWwsIGZv\nclVwZGF0ZSk7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIHZvaWQgYXBwZW5k\nU2VsZWN0UmFuZ2UoU1FMQnVmZmVyIGJ1ZiwgbG9uZyBzdGFydCwgbG9uZyBl\nbmQsDQogICAgICAgIGJvb2xlYW4gc3Vic2VsZWN0KSB7DQogICAgICAgIC8v\nIGFwcGVuZHMgdGhlIGxpdGVyYWwgcmFuZ2Ugc3RyaW5nLCBzaW5jZSBEQjIg\naXMgdW5hYmxlIHRvIGhhbmRsZQ0KICAgICAgICAvLyBhIGJvdW5kIHBhcmFt\nZXRlciBmb3IgaXQNCiAgICAgICAgLy8gZG8gbm90IGdlbmVyYXRlIEZFVENI\nIEZJUlNUIGNsYXVzZSBmb3Igc3Vic2VsZWN0DQogICAgICAgIGlmICghc3Vi\nc2VsZWN0KQ0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiIEZFVENIIEZJUlNU\nICIpLmFwcGVuZChMb25nLnRvU3RyaW5nKGVuZCkpLg0KICAgICAgICAgICAg\nICAgIGFwcGVuZCgiIFJPV1MgT05MWSIpOw0KICAgIH0NCg0KICAgIHByb3Rl\nY3RlZCB2b2lkIGFwcGVuZFNlbGVjdChTUUxCdWZmZXIgc2VsZWN0U1FMLCBP\nYmplY3QgYWxpYXMsIFNlbGVjdCBzZWwsDQogICAgICAgIGludCBpZHgpIHsN\nCiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGxpdGVyYWwgdmFsdWUsIGFkZCBh\nIGNhc3QuLi4NCiAgICAgICAgT2JqZWN0IHZhbCA9IHNlbC5nZXRTZWxlY3Rz\nKCkuZ2V0KGlkeCk7DQogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBMaXQp\nDQogICAgICAgICAgICBzZWxlY3RTUUwuYXBwZW5kKCJDQVNUKCIpOw0KDQog\nICAgICAgIC8vIC4uLiBhbmQgYWRkIHRoZSBzZWxlY3QgcGVyIHN1cGVyJ3Mg\nYmVoYXZpb3IuLi4NCiAgICAgICAgc3VwZXIuYXBwZW5kU2VsZWN0KHNlbGVj\ndFNRTCwgYWxpYXMsIHNlbCwgaWR4KTsNCg0KICAgICAgICAvLyAuLi4gYW5k\nIGZpbmlzaCB0aGUgY2FzdA0KICAgICAgICBpZiAodmFsIGluc3RhbmNlb2Yg\nTGl0KSB7DQogICAgICAgICAgICBDbGFzcyBjID0gKChMaXQpIHZhbCkuZ2V0\nVHlwZSgpOw0KICAgICAgICAgICAgaW50IGphdmFUeXBlQ29kZSA9IEphdmFU\neXBlcy5nZXRUeXBlQ29kZShjKTsNCiAgICAgICAgICAgIGludCBqZGJjVHlw\nZUNvZGUgPSBnZXRKREJDVHlwZShqYXZhVHlwZUNvZGUsIGZhbHNlKTsNCiAg\nICAgICAgICAgIFN0cmluZyB0eXBlTmFtZSA9IGdldFR5cGVOYW1lKGpkYmNU\neXBlQ29kZSk7DQogICAgICAgICAgICBzZWxlY3RTUUwuYXBwZW5kKCIgQVMg\nIiArIHR5cGVOYW1lKTsNCg0KICAgICAgICAgICAgLy8gaWYgdGhlIGxpdGVy\nYWwgaXMgYSBzdHJpbmcsIHVzZSB0aGUgZGVmYXVsdCBjaGFyIGNvbCBzaXpl\nDQogICAgICAgICAgICAvLyBpbiB0aGUgY2FzdCBzdGF0ZW1lbnQuDQogICAg\nICAgICAgICBpZiAoU3RyaW5nLmNsYXNzLmVxdWFscyhjKSkNCiAgICAgICAg\nICAgICAgICBzZWxlY3RTUUwuYXBwZW5kKCIoIiArIGNoYXJhY3RlckNvbHVt\nblNpemUgKyAiKSIpOw0KDQogICAgICAgICAgICBzZWxlY3RTUUwuYXBwZW5k\nKCIpIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgU3RyaW5n\nW10gZ2V0Q3JlYXRlU2VxdWVuY2VTUUwoU2VxdWVuY2Ugc2VxKSB7DQogICAg\nICAgIFN0cmluZ1tdIHNxbCA9IHN1cGVyLmdldENyZWF0ZVNlcXVlbmNlU1FM\nKHNlcSk7DQogICAgICAgIGlmIChzZXEuZ2V0QWxsb2NhdGUoKSA+IDEpDQog\nICAgICAgICAgICBzcWxbMF0gKz0gIiBDQUNIRSAiICsgc2VxLmdldEFsbG9j\nYXRlKCk7DQogICAgICAgIHJldHVybiBzcWw7DQogICAgfQ0KDQogICAgcHJv\ndGVjdGVkIFN0cmluZyBnZXRTZXF1ZW5jZXNTUUwoU3RyaW5nIHNjaGVtYU5h\nbWUsIFN0cmluZyBzZXF1ZW5jZU5hbWUpIHsNCiAgICAgICAgU3RyaW5nQnVm\nZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsNCiAgICAgICAgYnVmLmFw\ncGVuZChzZXF1ZW5jZVNRTCk7DQogICAgICAgIGlmIChzY2hlbWFOYW1lICE9\nIG51bGwgfHwgc2VxdWVuY2VOYW1lICE9IG51bGwpDQogICAgICAgICAgICBi\ndWYuYXBwZW5kKCIgV0hFUkUgIik7DQogICAgICAgIGlmIChzY2hlbWFOYW1l\nICE9IG51bGwpIHsNCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoc2VxdWVuY2VT\nY2hlbWFTUUwpOw0KICAgICAgICAgICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBu\ndWxsKQ0KICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBBTkQgIik7DQog\nICAgICAgIH0NCiAgICAgICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBudWxsKQ0K\nICAgICAgICAgICAgYnVmLmFwcGVuZChzZXF1ZW5jZU5hbWVTUUwpOw0KICAg\nICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7DQogICAgfQ0KDQogICAgcHVi\nbGljIENvbm5lY3Rpb24gZGVjb3JhdGUoQ29ubmVjdGlvbiBjb25uKQ0KICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsNCiAgICAgICAgLy8gc29tZSB2\nZXJzaW9ucyBvZiB0aGUgREIyIGRyaXZlciBzZWVtIHRvIGRlZmF1bHQgdG8N\nCiAgICAgICAgLy8gUkVBRF9VTkNPTU1JVFRFRCwgd2hpY2ggd2lsbCBwcmV2\nZW50IGxvY2tpbmcgZnJvbSB3b3JraW5nDQogICAgICAgIC8vIChtdWx0aXBs\nZSBTRUxFQ1QgLi4uIEZPUiBVUERBVEUgc3RhdGVtZW50cyBhcmUgYWxsb3dl\nZCBvbg0KICAgICAgICAvLyB0aGUgc2FtZSBpbnN0YW5jZSk7IGlmIHdlIGhh\ndmUgbm90IG92ZXJyaWRkZW4gdGhlDQogICAgICAgIC8vIHRyYW5zYWN0aW9u\nIGlzb2xhdGlvbiBpbiB0aGUgY29uZmlndXJhdGlvbiwgZGVmYXVsdCB0bw0K\nICAgICAgICAvLyBUUkFOU0FDVElPTl9SRUFEX0NPTU1JVFRFRA0KICAgICAg\nICBjb25uID0gc3VwZXIuZGVjb3JhdGUoY29ubik7DQoNCiAgICAgICAgaWYg\nKGNvbmYuZ2V0VHJhbnNhY3Rpb25Jc29sYXRpb25Db25zdGFudCgpID09IC0x\nDQogICAgICAgICAgICAmJiBjb25uLmdldFRyYW5zYWN0aW9uSXNvbGF0aW9u\nKCkgPCBjb25uLlRSQU5TQUNUSU9OX1JFQURfQ09NTUlUVEVEKQ0KICAgICAg\nICAgICAgY29ubi5zZXRUcmFuc2FjdGlvbklzb2xhdGlvbihjb25uLlRSQU5T\nQUNUSU9OX1JFQURfQ09NTUlUVEVEKTsNCg0KICAgICAgICByZXR1cm4gY29u\nbjsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBjb25uZWN0ZWRDb25maWd1\ncmF0aW9uKENvbm5lY3Rpb24gY29ubikgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nDQogICAgCXN1cGVyLmNvbm5lY3RlZENvbmZpZ3VyYXRpb24oY29ubik7DQoN\nCiAgICAJRGF0YWJhc2VNZXRhRGF0YSBtZXRhRGF0YSA9IGNvbm4uZ2V0TWV0\nYURhdGEoKTsNCiAgICAgICAgZGF0YWJhc2VQcm9kdWN0TmFtZSA9IG51bGxT\nYWZlKG1ldGFEYXRhLmdldERhdGFiYXNlUHJvZHVjdE5hbWUoKSk7DQogICAg\nICAgIGRhdGFiYXNlUHJvZHVjdFZlcnNpb24gPSBudWxsU2FmZShtZXRhRGF0\nYS5nZXREYXRhYmFzZVByb2R1Y3RWZXJzaW9uKCkpOw0KICAgICAgICANCiAg\nICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIERCMiBkYXRhYmFzZQ0K\nICAgICAgICAvLyBGaXJzdCBjaGVjayBmb3IgQVMvNDAwDQogICAgICAgIGdl\ndFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5vckZvcklTZXJpZXMoKTsNCg0KICAg\nICAgICBpZiAobWFqID4gMCkgew0KICAgICAgICAgICAgaWYgKGlzREIySVNl\ncmllc1Y1UjNPckVhcmxpZXIoKSkNCiAgICAgICAgICAgICAgICBkYjJTZXJ2\nZXJUeXBlID0gZGIySVNlcmllc1Y1UjNPckVhcmxpZXI7DQogICAgICAgICAg\nICBlbHNlIGlmIChpc0RCMklTZXJpZXNWNVI0T3JMYXRlcigpKQ0KICAgICAg\nICAgICAgICAgIGRiMlNlcnZlclR5cGUgPSBkYjJJU2VyaWVzVjVSNE9yTGF0\nZXI7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgCWlmIChkYjJTZXJ2ZXJU\neXBlID09IDApIHsNCiAgICAJICAgIGlmIChpc0pEQkMzKSB7DQogICAgCSAg\nICAgICAgbWFqID0gbWV0YURhdGEuZ2V0RGF0YWJhc2VNYWpvclZlcnNpb24o\nKTsNCiAgICAJICAgICAgICBtaW4gPSBtZXRhRGF0YS5nZXREYXRhYmFzZU1p\nbm9yVmVyc2lvbigpOw0KICAgIAkgICAgfQ0KICAgIAkgICAgZWxzZQ0KICAg\nIAkgICAgICAgIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5vcigpOw0KDQog\nICAgCSAgICAvLyBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgREIyIGRhdGFiYXNl\nIGZvciBaT1MgJiBVREINCiAgICAJICAgIGlmIChpc0RCMlVEQlY4MU9yRWFy\nbGllcigpKQ0KICAgIAkgICAgICAgIGRiMlNlcnZlclR5cGUgPSBkYjJVREJW\nODFPckVhcmxpZXI7DQogICAgCSAgICBlbHNlIGlmIChpc0RCMlpPU1Y4eE9y\nTGF0ZXIoKSkNCiAgICAJICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIyWk9T\nVjh4T3JMYXRlcjsNCiAgICAJICAgIGVsc2UgaWYgKGlzREIyVURCVjgyT3JM\nYXRlcigpKQ0KICAgIAkgICAgICAgIGRiMlNlcnZlclR5cGUgPSBkYjJVREJW\nODJPckxhdGVyOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gdmVyaWZ5IHRo\nYXQgZGF0YWJhZSBwcm9kdWN0IGlzIHN1cHBvcnRlZA0KICAgICAgICBpZiAo\nZGIyU2VydmVyVHlwZSA9PSAwIHx8IG1haiA9PSAwKQ0KICAgICAgICAgICAg\ndGhyb3cgbmV3IFVuc3VwcG9ydGVkRXhjZXB0aW9uKF9sb2MuZ2V0KCJkYi1u\nb3Qtc3VwcG9ydGVkIiwNCiAgICAgICAgICAgICAgICBuZXcgT2JqZWN0W10g\ne2RhdGFiYXNlUHJvZHVjdE5hbWUsIGRhdGFiYXNlUHJvZHVjdFZlcnNpb24g\nfSkpOyAgICAgICAgICAgICAgICAgICAgDQoNCiAgICAJaWYgKG1haiA+PSA5\nIHx8IChtYWogPT0gOCAmJiBtaW4gPj0gMikpIHsNCiAgICAJICAgIHN1cHBv\ncnRzTG9ja2luZ1dpdGhNdWx0aXBsZVRhYmxlcyA9IHRydWU7DQogICAgCSAg\nICBzdXBwb3J0c0xvY2tpbmdXaXRoSW5uZXJKb2luID0gdHJ1ZTsNCiAgICAJ\nICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhPdXRlckpvaW4gPSB0cnVlOw0KICAg\nIAkgICAgZm9yVXBkYXRlQ2xhdXNlID0gIldJVEggUlIgVVNFIEFORCBLRUVQ\nIFVQREFURSBMT0NLUyI7DQogICAgCSAgICBpZiAobWFqID49OSkNCiAgICAJ\nICAgICAgICBzdXBwb3J0c1hNTENvbHVtbiA9IHRydWU7DQogICAgCX0NCg0K\nICAgICAgICAvLyBwbGF0Zm9ybSBzcGVjaWZpYyBzZXR0aW5ncw0KICAgICAg\nICBzd2l0Y2ggKGRiMlNlcnZlclR5cGUpIHsNCiAgICAgICAgY2FzZSAgZGIy\nWk9TVjh4T3JMYXRlcjoNCiAgICAgICAgICAgIC8vIERCMiBaL09TIA0KICAg\nICAgICAgICAgY2hhcmFjdGVyQ29sdW1uU2l6ZSA9IDI1NTsNCiAgICAgICAg\nICAgIGxhc3RHZW5lcmF0ZWRLZXlRdWVyeSA9ICJTRUxFQ1QgSURFTlRJVFlf\nVkFMX0xPQ0FMKCkgRlJPTSAiDQogICAgICAgICAgICAgICAgKyAiU1lTSUJN\nLlNZU0RVTU1ZMSI7DQogICAgICAgICAgICBuZXh0U2VxdWVuY2VRdWVyeSA9\nICJTRUxFQ1QgTkVYVFZBTCBGT1IgezB9IEZST00gIg0KICAgICAgICAgICAg\nICAgICsgIlNZU0lCTS5TWVNEVU1NWTEiOw0KICAgICAgICAgICAgc2VxdWVu\nY2VTUUwgPSAiU0VMRUNUIFNDSEVNQSBBUyBTRVFVRU5DRV9TQ0hFTUEsICIN\nCiAgICAgICAgICAgICAgICArICJOQU1FIEFTIFNFUVVFTkNFX05BTUUgRlJP\nTSBTWVNJQk0uU1lTU0VRVUVOQ0VTIjsNCiAgICAgICAgICAgIHNlcXVlbmNl\nU2NoZW1hU1FMID0gIlNDSEVNQSA9ID8iOw0KICAgICAgICAgICAgc2VxdWVu\nY2VOYW1lU1FMID0gIk5BTUUgPSA/IjsNCiAgICAgICAgICAgIGlmIChtYWog\nPT0gOCkNCiAgICAgICAgICAgICAgICAvLyBEQjIgWi9PUyBWZXJzaW9uIDg6\nIG5vIGJpZ2ludCBzdXBwb3J0LCBoZW5jZSBtYXAgSmF2YQ0KICAgICAgICAg\nICAgICAgIC8vIGxvbmcgdG8gZGVjaW1hbA0KICAgICAgICAgICAgICAgIGJp\nZ2ludFR5cGVOYW1lID0gIkRFQ0lNQUwoMzEsMCkiOw0KICAgICAgICAgICAg\nYnJlYWs7DQogICAgICAgIGNhc2UgZGIySVNlcmllc1Y1UjNPckVhcmxpZXI6\nDQogICAgICAgIGNhc2UgZGIySVNlcmllc1Y1UjRPckxhdGVyOg0KICAgICAg\nICAgICAgbGFzdEdlbmVyYXRlZEtleVF1ZXJ5ID0gIlNFTEVDVCBJREVOVElU\nWV9WQUxfTE9DQUwoKSBGUk9NICINCiAgICAgICAgICAgICAgICArICJTWVNJ\nQk0uU1lTRFVNTVkxIjsNCiAgICAgICAgICAgIG5leHRTZXF1ZW5jZVF1ZXJ5\nID0gIlNFTEVDVCBORVhUVkFMIEZPUiB7MH0gRlJPTSAiDQogICAgICAgICAg\nICAgICAgKyAiU1lTSUJNLlNZU0RVTU1ZMSI7DQogICAgICAgICAgICB2YWxp\nZGF0aW9uU1FMID0gIlNFTEVDVCBESVNUSU5DVChDVVJSRU5UIFRJTUVTVEFN\nUCkgRlJPTSAiDQogICAgICAgICAgICAgICAgKyAiUVNZUzIuU1lTVEFCTEVT\nIjsNCiAgICAgICAgICAgIHNlcXVlbmNlU1FMID0gIlNFTEVDVCBTRVFVRU5D\nRV9TQ0hFTUEsICINCiAgICAgICAgICAgICAgICArICJTRVFVRU5DRV9OQU1F\nIEZST00gUVNZUzIuU1lTU0VRVUVOQ0VTIjsNCiAgICAgICAgICAgIHNlcXVl\nbmNlU2NoZW1hU1FMID0gIlNFUVVFTkNFX1NDSEVNQSA9ID8iOw0KICAgICAg\nICAgICAgc2VxdWVuY2VOYW1lU1FMID0gIlNFUVVFTkNFX05BTUUgPSA/IjsN\nCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgfQ0KDQogICAg\nLyoqDQogICAgICogR2V0IHRoZSB1cGRhdGUgY2xhdXNlIGZvciB0aGUgcXVl\ncnkgYmFzZWQgb24gdGhlDQogICAgICogdXBkYXRlQ2xhdXNlIGFuZCBpc29s\nYXRpb25MZXZlbCBoaW50cw0KICAgICAqLw0KICAgIHByb3RlY3RlZCBTdHJp\nbmcgZ2V0Rm9yVXBkYXRlQ2xhdXNlKEpEQkNGZXRjaENvbmZpZ3VyYXRpb24g\nZmV0Y2gsDQogICAgICAgIGJvb2xlYW4gaXNGb3JVcGRhdGUsIFNlbGVjdCBz\nZWwpIHsNCiAgICAgICAgaW50IGlzb2xhdGlvbkxldmVsOw0KICAgICAgICAv\nLyBGb3IgZGIyVURCVjgxT3JFYXJsaWVyIGFuZCBkYjJJU2VyaWVzVjVSM09y\nRWFybGllcjoNCiAgICAgICAgLy8gIm9wdGltaXplIGZvciIgY2xhdXNlIGFw\ncGVhcnMgYmVmb3JlICJmb3IgdXBkYXRlIiBjbGF1c2UuDQogICAgICAgIFN0\ncmluZ0J1ZmZlciBmb3JVcGRhdGVTdHJpbmcgPSBuZXcgU3RyaW5nQnVmZmVy\nKA0KICAgICAgICAgICAgZ2V0T3B0aW1pemVDbGF1c2Uoc2VsKSk7DQogICAg\nICAgIHRyeSB7DQogICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGlzb2xh\ndGlvbkxldmVsOyB0aGUgZmV0Y2gNCiAgICAgICAgICAgIC8vIGNvbmZpZ3Vy\nYXRpb24gZGF0YSBvdmVycmlkZXMgdGhlIHBlcnNpc3RlbmNlLnhtbCB2YWx1\nZQ0KICAgICAgICAgICAgaWYgKGZldGNoICE9IG51bGwgJiYgZmV0Y2guZ2V0\nSXNvbGF0aW9uKCkgIT0gLTEpDQogICAgICAgICAgICAgICAgaXNvbGF0aW9u\nTGV2ZWwgPSBmZXRjaC5nZXRJc29sYXRpb24oKTsNCiAgICAgICAgICAgIGVs\nc2UNCiAgICAgICAgICAgICAgICBpc29sYXRpb25MZXZlbCA9IGNvbmYuZ2V0\nVHJhbnNhY3Rpb25Jc29sYXRpb25Db25zdGFudCgpOw0KDQogICAgICAgICAg\nICBpZiAoaXNGb3JVcGRhdGUpIHsNCiAgICAgICAgICAgICAgICBzd2l0Y2go\nZGIyU2VydmVyVHlwZSkgew0KICAgICAgICAgICAgICAgIGNhc2UgZGIySVNl\ncmllc1Y1UjNPckVhcmxpZXI6DQogICAgICAgICAgICAgICAgY2FzZSBkYjJV\nREJWODFPckVhcmxpZXI6DQogICAgICAgICAgICAgICAgICAgIGlmIChpc29s\nYXRpb25MZXZlbCA9PSBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1NFUklBTEla\nQUJMRSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmlu\nZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yVXBkYXRlQ2xhdXNlKTsNCiAgICAg\nICAgICAgICAgICAgICAgZWxzZSANCiAgICAgICAgICAgICAgICAgICAgICAg\nIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yVXBkYXRl\nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoIiAiKS5h\ncHBlbmQod2l0aFJTQ2xhdXNlKTsNCiAgICAgICAgICAgICAgICAgICAgYnJl\nYWs7DQogICAgICAgICAgICAgICAgY2FzZSBkYjJaT1NWOHhPckxhdGVyOg0K\nICAgICAgICAgICAgICAgIGNhc2UgZGIyVURCVjgyT3JMYXRlcjoNCiAgICAg\nICAgICAgICAgICAgICAgaWYgKGlzb2xhdGlvbkxldmVsID09IENvbm5lY3Rp\nb24uVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKSB7DQogICAgICAgICAgICAg\nICAgICAgICAgICBmb3JVcGRhdGVTdHJpbmcuYXBwZW5kKCIgIikuYXBwZW5k\nKGZvclJlYWRPbmx5Q2xhdXNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQod2l0aFJSQ2xhdXNlKQ0KICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQodXNl\nS2VlcFVwZGF0ZUxvY2tDbGF1c2UpOyAgIA0KICAgICAgICAgICAgICAgICAg\nICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yVXBkYXRl\nU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JSZWFkT25seUNsYXVzZSkN\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBw\nZW5kKHdpdGhSU0NsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAuYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtlZXBVcGRhdGVMb2NrQ2xhdXNl\nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAg\nICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAg\nICAgICAgICAgY2FzZSBkYjJJU2VyaWVzVjVSNE9yTGF0ZXI6DQogICAgICAg\nICAgICAgICAgICAgIGlmIChpc29sYXRpb25MZXZlbCA9PSBDb25uZWN0aW9u\nLlRSQU5TQUNUSU9OX1NFUklBTElaQUJMRSkgew0KICAgICAgICAgICAgICAg\nICAgICAgICAgZm9yVXBkYXRlU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChm\nb3JSZWFkT25seUNsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAuYXBwZW5kKCIgIikuYXBwZW5kKHdpdGhSUkNsYXVzZSkNCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtl\nZXBFeGNsdXNpdmVMb2NrQ2xhdXNlKTsgICAgICAgDQogICAgICAgICAgICAg\nICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3JV\ncGRhdGVTdHJpbmcuYXBwZW5kKCIgIikuYXBwZW5kKGZvclJlYWRPbmx5Q2xh\ndXNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoIiAi\nKS5hcHBlbmQod2l0aFJTQ2xhdXNlKQ0KICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQodXNlS2VlcEV4Y2x1c2l2ZUxv\nY2tDbGF1c2UpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAg\nICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAg\nICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsNCiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkNCiAg\nICAgICAgICAgICAgICBsb2cuZXJyb3IoZS50b1N0cmluZygpLGUpOw0KICAg\nICAgICB9DQogICAgICAgIHJldHVybiBmb3JVcGRhdGVTdHJpbmcudG9TdHJp\nbmcoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBpc0RCMlVEQlY4\nMk9yTGF0ZXIoKSB7DQogICAgICAgIHJldHVybiAoZGF0YWJhc2VQcm9kdWN0\nVmVyc2lvbi5pbmRleE9mKCJTUUwiKSAhPSAtMQ0KICAgICAgICAgICAgIHx8\nIGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIyLyIpICE9IC0xKQ0K\nICAgICAgICAgICAgICYmICgobWFqID09IDggJiYgbWluID49IDIpIHx8ICht\nYWogPj0gOSkpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzREIy\nWk9TVjh4T3JMYXRlcigpIHsNCiAgICAgICByZXR1cm4gKGRhdGFiYXNlUHJv\nZHVjdFZlcnNpb24uaW5kZXhPZigiRFNOIikgIT0gLTENCiAgICAgICAgICAg\nIHx8IGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIyLyIpID09IC0x\nKQ0KICAgICAgICAgICAgJiYgbWFqID49IDg7DQogICAgICAgICAgIA0KICAg\nIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzREIySVNlcmllc1Y1UjNPckVh\ncmxpZXIoKSB7DQogICAgICAgcmV0dXJuIChkYXRhYmFzZVByb2R1Y3ROYW1l\nLmluZGV4T2YoIkFTIikgIT0gLTENCiAgICAgICAgICAgJiYgKChtYWogPT0g\nNSAmJiBtaW4gPD0zKSB8fCBtYWogPCA1KSk7DQogICAgfQ0KDQogICAgcHVi\nbGljIGJvb2xlYW4gaXNEQjJJU2VyaWVzVjVSNE9yTGF0ZXIoKSB7DQogICAg\nICAgcmV0dXJuIGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiQVMiKSAh\nPSAtMQ0KICAgICAgICAgICAmJiAobWFqID49NiB8fCAobWFqID09IDUgJiYg\nbWluID49NCkpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzREIy\nVURCVjgxT3JFYXJsaWVyKCkgew0KICAgICAgICByZXR1cm4gKGRhdGFiYXNl\nUHJvZHVjdFZlcnNpb24uaW5kZXhPZigiU1FMIikgIT0gLTEgDQogICAgICAg\nICAgICB8fCBkYXRhYmFzZVByb2R1Y3ROYW1lLmluZGV4T2YoIkRCMi8iKSAh\nPSAtMSkgDQogICAgICAgICAgICAmJiAoKG1haiA9PSA4ICYmIG1pbiA8PSAx\nKSB8fCBtYWogPCA4KTsNCiAgICB9DQoNCiAgICAvKiogR2V0IHRoZSB2ZXJz\naW9uIE1ham9yL01pbm9yIGZvciB0aGUgSVNlcmllcw0KICAgICAqLw0KICAg\nIHByaXZhdGUgdm9pZCBnZXRQcm9kdWN0VmVyc2lvbk1ham9yTWlub3JGb3JJ\nU2VyaWVzKCkgew0KICAgICAgICAvLyBJU2VyaWVzICAgIERCUHJvZE5hbWUg\nICAgICAgICAgICAgICAgIERCMiBVREIgZm9yIEFTLzQwMA0KICAgICAgICAv\nLyAgIChUb29sYm94KURCUHJvZFZlcnNpb24gICAgICAgICAgICAgIDA1LjA0\nLjAwMDAgVjVSNG0wDQogICAgICAgIC8vIElTZXJpZXMgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgREIyIFVEQiBmb3IgQVMvNDAwDQogICAgICAg\nIC8vICAgKE5hdGl2ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgVjVS\nNE0wDQogICAgICAgIC8vIG5ldyBqY2MgICAgREJQcm9kVmVyc2lvbiAgICAg\nICAgICAgICAgUVNRMDUwNDAgb3IgUVNRMDYwMTANCiAgICAgICAgaWYgKGRh\ndGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiQVMiKSAhPSAtMSkgew0KICAg\nICAgICAgICAgLy8gZGVmYXVsdCB0byBWNVI0DQogICAgICAgICAgICBtYWog\nPSA1Ow0KICAgICAgICAgICAgbWluID0gNDsNCiAgICAgICAgICAgIGludCBp\nbmRleCA9IGRhdGFiYXNlUHJvZHVjdFZlcnNpb24uaW5kZXhPZignVicpOw0K\nICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKSB7DQogICAgICAgICAgICAg\nICAgU3RyaW5nIHMgPSBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLnN1YnN0cmlu\nZyhpbmRleCk7DQogICAgICAgICAgICAgICAgcyA9IHMudG9VcHBlckNhc2Uo\nKTsNCg0KICAgICAgICAgICAgICAgIFN0cmluZ1Rva2VuaXplciBzdHJpbmd0\nb2tlbml6ZXIgPSBuZXcgU3RyaW5nVG9rZW5pemVyKHMsICJWUk0iDQogICAg\nICAgICAgICAgICAgICAgICwgZmFsc2UpOw0KICAgICAgICAgICAgICAgIGlm\nIChzdHJpbmd0b2tlbml6ZXIuY291bnRUb2tlbnMoKSA9PSAzKSB7DQogICAg\nICAgICAgICAgICAgICAgIFN0cmluZyBzMSA9IHN0cmluZ3Rva2VuaXplci5u\nZXh0VG9rZW4oKTsNCiAgICAgICAgICAgICAgICAgICAgbWFqID0gSW50ZWdl\nci5wYXJzZUludChzMSk7DQogICAgICAgICAgICAgICAgICAgIFN0cmluZyBz\nMiA9ICBzdHJpbmd0b2tlbml6ZXIubmV4dFRva2VuKCk7DQogICAgICAgICAg\nICAgICAgICAgIG1pbiA9IEludGVnZXIucGFyc2VJbnQoczIpOw0KICAgICAg\nICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAg\nICAgICAgaW5kZXggPSBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4T2Yo\nJzAnKTsNCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHsNCiAg\nICAgICAgICAgICAgICAgICAgU3RyaW5nIHMgPSBkYXRhYmFzZVByb2R1Y3RW\nZXJzaW9uLnN1YnN0cmluZyhpbmRleCk7DQogICAgICAgICAgICAgICAgICAg\nIHMgPSBzLnRvVXBwZXJDYXNlKCk7DQoNCiAgICAgICAgICAgICAgICAgICAg\nU3RyaW5nVG9rZW5pemVyIHN0cmluZ3Rva2VuaXplciA9IG5ldyBTdHJpbmdU\nb2tlbml6ZXIocywgIjAiDQogICAgICAgICAgICAgICAgICAgICAgICAsIGZh\nbHNlKTsgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAg\nICBpZiAoc3RyaW5ndG9rZW5pemVyLmNvdW50VG9rZW5zKCkgPT0gMikgew0K\nICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHMxID0gc3RyaW5ndG9r\nZW5pemVyLm5leHRUb2tlbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAg\nbWFqID0gSW50ZWdlci5wYXJzZUludChzMSk7DQogICAgICAgICAgICAgICAg\nICAgICAgICBTdHJpbmcgczIgPSAgc3RyaW5ndG9rZW5pemVyLm5leHRUb2tl\nbigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbWluID0gSW50ZWdlci5w\nYXJzZUludChzMik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg\nICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQog\nICAgDQogICAgcHJpdmF0ZSB2b2lkIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JN\naW5vcigpIHsNCiAgICAgICAgLy8gSW5jYXNlIEpEQkMgZHJpdmVyIHZlcnNp\nb24gaXMgbG93ZXIgdGhhbiAzDQogICAgICAgIC8vIHVzZSBmb2xsb3dpbmcg\naW5mbyB0byBkZXRlcm1pbmUgTWFqb3IgYW5kIE1pbm9yIA0KICAgICAgICAv\nLyAgICAgICAgICAgICAgICAgICAgICAgIENMSSAgICB2cyAgICAgIEpDQw0K\nICAgICAgICAvLyBaREJWOCBEQlByb2ROYW1lICAgICAgIERCMiAgICAgICAg\nICAgIERCMg0KICAgICAgICAvLyAgICAgICBEQlByb2RWZXJzaW9uICAgIDA4\nLjAxLjAwMDUgICAgIERTTjA4MDE1DQogICAgICAgIC8vIFpEQlY5ICAgICAg\nICAgICAgICAgICAgREIyICAgICAgICAgICAgREIyDQogICAgICAgIC8vICAg\nICAgICAgICAgICAgICAgICAgICAgMDkuMDEuMDAwNSAgICAgRFNOMDkwMTUN\nCiAgICAgICAgLy8gV2luVjkgICAgICAgICAgICAgICAgICBEQjIvTlQgICAg\nICAgICBEQjIvTlQNCiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAg\nICAwOS4wMS4wMDAwICAgICBTUUwwOTAxMA0KICAgICAgICAvLyBTb2xhcmlz\nVjkgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERCMi9TVU42NA0KICAg\nICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIFNRTDA5MDENCiAgICAgICAgLy8gTGludXggICAgICAgICAgICAgICAgICBE\nQjIvTElOVVggICAgICBEQjIvTElOVVgNCiAgICAgICAgLy8gICAgICAgICAg\nICAgICAgICAgICAgICAwOS4wMS4wMDAwICAgICBTUUwwOTAxDQogICAgICAg\nIGlmIChkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4T2YoIjA5IikgIT0g\nLTEpIHsNCiAgICAgICAgICAgIG1haiA9IDk7DQogICAgICAgICAgICBpZiAo\nZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCIwMSIpICE9IC0xKSB7\nDQogICAgICAgICAgICAgICAgbWluID0gMTsNCiAgICAgICAgICAgIH0NCiAg\nICAgICAgfSBlbHNlIGlmIChkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4\nT2YoIjA4IikgIT0gLTEpIHsNCiAgICAgICAgICAgIG1haiA9IDg7DQogICAg\nICAgICAgICBtaW4gPSAyOw0KICAgICAgICAgICAgaWYgKGRhdGFiYXNlUHJv\nZHVjdFZlcnNpb24uaW5kZXhPZigiMDEiKSAhPSAtMSkgew0KICAgICAgICAg\nICAgICAgIG1pbiA9IDE7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAg\nICB9DQoNCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldE9wdGltaXplQ2xhdXNl\nKFNlbGVjdCBzZWwpIHsNCiAgICAgICAgaWYgKHNlbCAhPSBudWxsICYmIHNl\nbC5nZXRFeHBlY3RlZFJlc3VsdENvdW50KCkgPiAwKSB7DQogICAgICAgICAg\nICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOw0KICAg\nICAgICAgICAgYnVmLmFwcGVuZCgiICIpLmFwcGVuZChvcHRpbWl6ZUNsYXVz\nZSkuYXBwZW5kKCIgIikNCiAgICAgICAgICAgICAgICAuYXBwZW5kKFN0cmlu\nZy52YWx1ZU9mKHNlbC5nZXRFeHBlY3RlZFJlc3VsdENvdW50KCkpKQ0KICAg\nICAgICAgICAgICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQocm93Q2xhdXNlKTsN\nCiAgICAgICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsNCiAgICAgICAg\nfQ0KDQogICAgICAgIHJldHVybiAiIjsNCiAgICB9DQoNCiAgICBwdWJsaWMg\nT3BlbkpQQUV4Y2VwdGlvbiBuZXdTdG9yZUV4Y2VwdGlvbihTdHJpbmcgbXNn\nLCBTUUxFeGNlcHRpb25bXSBjYXVzZXMsDQogICAgICAgIE9iamVjdCBmYWls\nZWQpIHsNCiAgICAgICAgaWYgKGNhdXNlcyAhPSBudWxsICYmIGNhdXNlcy5s\nZW5ndGggPiAwKQ0KICAgICAgICAgICAgbXNnID0gYXBwZW5kRXh0ZW5kZWRF\neGNlcHRpb25Nc2cobXNnLCBjYXVzZXNbMF0pOw0KICAgICAgICByZXR1cm4g\nc3VwZXIubmV3U3RvcmVFeGNlcHRpb24obXNnLCBjYXVzZXMsIGZhaWxlZCk7\nDQogICAgfQ0KDQogICAgLyoqDQogICAgICogIEFwcGVuZCBleGNlcHRpb24g\naW5mb3JtYXRpb24gZnJvbSBTUUxDQSB0byB0aGUgZXhzaXN0aW5nDQogICAg\nICogIGV4Y2VwdGlvbiBtZWFzc2FnZQ0KICAgICAqLw0KICAgIHByaXZhdGUg\nU3RyaW5nIGFwcGVuZEV4dGVuZGVkRXhjZXB0aW9uTXNnKFN0cmluZyBtc2cs\nIFNRTEV4Y2VwdGlvbiBzcWxlKXsNCiAgICAgICBmaW5hbCBTdHJpbmcgR0VU\nU1FMQ0EgPSJnZXRTcWxjYSI7DQogICAgICAgU3RyaW5nIGV4Y2VwdGlvbk1z\nZyA9IG5ldyBTdHJpbmcoKTsNCiAgICAgICB0cnkgew0KICAgICAgICAgICAg\nTWV0aG9kIHNxbGNhTTIgPSBzcWxlLmdldE5leHRFeGNlcHRpb24oKS5nZXRD\nbGFzcygpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRNZXRo\nb2QoR0VUU1FMQ0EsbnVsbCk7DQogICAgICAgICAgICBPYmplY3Qgc3FsY2Eg\nPSBzcWxjYU0yLmludm9rZShzcWxlLmdldE5leHRFeGNlcHRpb24oKSwNCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBP\nYmplY3RbXSB7fSk7DQogICAgICAgICAgICBNZXRob2QgIGdldFNxbEVycnBN\nZXRoZCA9IHNxbGNhLmdldENsYXNzKCkuDQogICAgICAgICAgICBnZXRNZXRo\nb2QoImdldFNxbEVycnAiLCBudWxsKTsNCiAgICAgICAgICAgIE1ldGhvZCAg\nZ2V0U3FsV2Fybk1ldGhkID0gc3FsY2EuZ2V0Q2xhc3MoKS4NCiAgICAgICAg\nICAgIGdldE1ldGhvZCgiZ2V0U3FsV2FybiIsIG51bGwpOw0KICAgICAgICAg\nICAgTWV0aG9kICBnZXRTcWxFcnJkTWV0aGQgPSBzcWxjYS5nZXRDbGFzcygp\nLg0KICAgICAgICAgICAgZ2V0TWV0aG9kKCJnZXRTcWxFcnJkIiwgbnVsbCk7\nDQogICAgICAgICAgICBTdHJpbmdCdWZmZXIgZXJyZFN0ciA9IG5ldyBTdHJp\nbmdCdWZmZXIoKTsNCg0KICAgICAgICAgICAgaW50W10gZXJyZHMgPSAoaW50\nW10pIGdldFNxbEVycmRNZXRoZC5pbnZva2Uoc3FsY2EsIG5ldyBPYmplY3Rb\nXXt9KTsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZXJyZHMu\nbGVuZ3RoOyBpKyspDQogICAgICAgICAgICAgICAgZXJyZFN0ci5hcHBlbmQo\nZXJyZFN0ci5sZW5ndGgoKSA+IDAgPyAiLCAiIDogIiIpLg0KICAgICAgICAg\nICAgICAgICAgICBhcHBlbmQoZXJyZHNbaV0pOw0KICAgICAgICAgICAgZXhj\nZXB0aW9uTXNnID0gZXhjZXB0aW9uTXNnLmNvbmNhdCggIlNRTENBIE9VVFBV\nVCIgKw0KICAgICAgICAgICAgICAgICAgICAiW0VycnA9IiArIGdldFNxbEVy\ncnBNZXRoZC5pbnZva2Uoc3FsY2EsIG5ldyBPYmplY3RbXXt9KQ0KICAgICAg\nICAgICAgICAgICAgICArICIsIEVycmQ9IiArIGVycmRTdHIpOw0KDQogICAg\nICAgICAgICBTdHJpbmcgV2FybiA9IG5ldyBTdHJpbmcoKGNoYXJbXSkgZ2V0\nU3FsV2Fybk1ldGhkLg0KICAgICAgICAgICAgICAgICAgICBpbnZva2Uoc3Fs\nY2EsIG5ldyBPYmplY3RbXXt9KSk7DQogICAgICAgICAgICBpZiAoV2Fybi50\ncmltKCkubGVuZ3RoKCkgIT0gMCkNCiAgICAgICAgICAgICAgICBleGNlcHRp\nb25Nc2cgPSBleGNlcHRpb25Nc2cuY29uY2F0KCIsIFdhcm49IiArV2FybiAr\nICJdIiApOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGV4\nY2VwdGlvbk1zZyA9IGV4Y2VwdGlvbk1zZy5jb25jYXQoICJdIiApOw0KICAg\nICAgICAgICAgbXNnID0gbXNnLmNvbmNhdChleGNlcHRpb25Nc2cpOw0KICAg\nICAgICAgICAgDQogICAgICAgICAgICAvLyBmb3IgYmF0Y2hlZCBleGVjdXRp\nb24gZmFpbHVyZXMsIFNRTEV4Y2VwdGlvbnMgYXJlIG5lc3RlZA0KICAgICAg\nICAgICAgU1FMRXhjZXB0aW9uIHNxbGUyID0gc3FsZS5nZXROZXh0RXhjZXB0\naW9uKCk7DQogICAgICAgICAgICB3aGlsZSAoc3FsZTIgIT0gbnVsbCkgeyAg\nICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBtc2cgPSBtc2cuY29u\nY2F0KCJcbiIgKyBzcWxlMi5nZXRNZXNzYWdlKCkpOw0KICAgICAgICAgICAg\nICAgIHNxbGUyID0gc3FsZTIuZ2V0TmV4dEV4Y2VwdGlvbigpOw0KICAgICAg\nICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gbXNn\nOw0KICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgew0KICAgICAgICAg\nICAgcmV0dXJuIHNxbGUuZ2V0TWVzc2FnZSgpOw0KICAgICAgICB9DQogICAg\nfQ0KDQogICAgcHVibGljIGludCBnZXREYjJTZXJ2ZXJUeXBlKCkgew0KICAg\nICAgICByZXR1cm4gZGIyU2VydmVyVHlwZTsNCiAgICB9DQogICAgDQogICAg\ncHJvdGVjdGVkIHZvaWQgYXBwZW5kTGVuZ3RoKFNRTEJ1ZmZlciBidWYsIGlu\ndCB0eXBlKSB7DQogICAgICAgIGlmICh0eXBlID09IFR5cGVzLlZBUkNIQVIp\nDQogICAgICAgICAgICBidWYuYXBwZW5kKCIoIikuYXBwZW5kKEludGVnZXIu\ndG9TdHJpbmcoY2hhcmFjdGVyQ29sdW1uU2l6ZSkpLg0KICAgICAgICAgICAg\nICAgIGFwcGVuZCgiKSIpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIElm\nIHRoaXMgZGljdGlvbmFyeSBzdXBwb3J0cyBYTUwgdHlwZSwNCiAgICAgKiB1\nc2UgdGhpcyBtZXRob2QgdG8gYXBwZW5kIHhtbCBwcmVkaWNhdGUuDQogICAg\nICogDQogICAgICogQHBhcmFtIGJ1ZiB0aGUgU1FMIGJ1ZmZlciB0byB3cml0\nZSB0aGUgY29tcGFyaXNvbg0KICAgICAqIEBwYXJhbSBvcCB0aGUgY29tcGFy\naXNvbiBvcGVyYXRpb24gdG8gcGVyZm9ybQ0KICAgICAqIEBwYXJhbSBsaHMg\ndGhlIGxlZnQgaGFuZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uDQogICAgICog\nQHBhcmFtIHJocyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBjb21wYXJp\nc29uDQogICAgICogQHBhcmFtIGxoc3htbCBpbmRpY2F0ZXMgd2hldGhlciB0\naGUgbGVmdCBvcGVyYW5kIG1hcHMgdG8geG1sDQogICAgICogQHBhcmFtIHJo\nc3htbCBpbmRpY2F0ZXMgd2hldGhlciB0aGUgcmlnaHQgb3BlcmFuZCBtYXBz\nIHRvIHhtbA0KICAgICAqLw0KICAgIHB1YmxpYyB2b2lkIGFwcGVuZFhtbENv\nbXBhcmlzb24oU1FMQnVmZmVyIGJ1ZiwgU3RyaW5nIG9wLCBGaWx0ZXJWYWx1\nZSBsaHMsDQogICAgICAgIEZpbHRlclZhbHVlIHJocywgYm9vbGVhbiBsaHN4\nbWwsIGJvb2xlYW4gcmhzeG1sKSB7DQogICAgICAgIHN1cGVyLmFwcGVuZFht\nbENvbXBhcmlzb24oYnVmLCBvcCwgbGhzLCByaHMsIGxoc3htbCwgcmhzeG1s\nKTsNCiAgICAgICAgaWYgKGxoc3htbCAmJiByaHN4bWwpDQogICAgICAgICAg\nICBhcHBlbmRYbWxDb21wYXJpc29uMihidWYsIG9wLCBsaHMsIHJocyk7DQog\nICAgICAgIGVsc2UgaWYgKGxoc3htbCkNCiAgICAgICAgICAgIGFwcGVuZFht\nbENvbXBhcmlzb24xKGJ1Ziwgb3AsIGxocywgcmhzKTsNCiAgICAgICAgZWxz\nZSANCiAgICAgICAgICAgIGFwcGVuZFhtbENvbXBhcmlzb24xKGJ1Ziwgb3As\nIHJocywgbGhzKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBBcHBlbmQg\nYW4geG1sIGNvbXBhcmlzb24gcHJlZGljYXRlLg0KICAgICAqDQogICAgICog\nQHBhcmFtIGJ1ZiB0aGUgU1FMIGJ1ZmZlciB0byB3cml0ZSB0aGUgY29tcGFy\naXNvbg0KICAgICAqIEBwYXJhbSBvcCB0aGUgY29tcGFyaXNvbiBvcGVyYXRp\nb24gdG8gcGVyZm9ybQ0KICAgICAqIEBwYXJhbSBsaHMgdGhlIGxlZnQgaGFu\nZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uIChtYXBzIHRvIHhtbCBjb2x1bW4p\nDQogICAgICogQHBhcmFtIHJocyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRo\nZSBjb21wYXJpc29uDQogICAgICovDQogICAgcHJpdmF0ZSB2b2lkIGFwcGVu\nZFhtbENvbXBhcmlzb24xKFNRTEJ1ZmZlciBidWYsIFN0cmluZyBvcCwgDQog\nICAgICAgICAgICBGaWx0ZXJWYWx1ZSBsaHMsIEZpbHRlclZhbHVlIHJocykg\new0KICAgICAgICBib29sZWFuIGNhc3RyaHMgPSBmYWxzZTsNCiAgICAgICAg\nQ2xhc3MgcmMgPSBGaWx0ZXJzLndyYXAocmhzLmdldFR5cGUoKSk7DQogICAg\nICAgIGludCB0eXBlID0gMDsNCiAgICAgICAgaWYgKHJocy5pc0NvbnN0YW50\nKCkpIHsNCiAgICAgICAgICAgIHR5cGUgPSBnZXRKREJDVHlwZShKYXZhVHlw\nZXMuZ2V0VHlwZUNvZGUocmMpLCBmYWxzZSk7DQogICAgICAgICAgICBjYXN0\ncmhzID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgYXBw\nZW5kWG1sRXhpc3RzKGJ1ZiwgbGhzKTsNCg0KICAgICAgICBidWYuYXBwZW5k\nKCIgIikuYXBwZW5kKG9wKS5hcHBlbmQoIiAiKTsNCiAgICAgICAgDQogICAg\nICAgIGJ1Zi5hcHBlbmQoIiQiKTsNCiAgICAgICAgaWYgKGNhc3RyaHMpDQog\nICAgICAgICAgICBidWYuYXBwZW5kKCJQYXJtIik7DQogICAgICAgIGVsc2UN\nCiAgICAgICAgICAgIHJocy5hcHBlbmRUbyhidWYpOw0KICAgICAgICANCiAg\nICAgICAgYnVmLmFwcGVuZCgiXScgUEFTU0lORyAiKTsNCiAgICAgICAgYXBw\nZW5kWG1sVmFyKGJ1ZiwgbGhzKTsNCiAgICAgICAgYnVmLmFwcGVuZCgiLCAi\nKTsNCiAgICAgICAgDQogICAgICAgIGlmIChjYXN0cmhzKQ0KICAgICAgICAg\nICAgYXBwZW5kQ2FzdChidWYsIHJocywgdHlwZSk7DQogICAgICAgIGVsc2UN\nCiAgICAgICAgICAgIHJocy5hcHBlbmRUbyhidWYpOw0KICAgICAgICANCiAg\nICAgICAgYnVmLmFwcGVuZCgiIEFTIFwiIik7DQogICAgICAgIGlmIChjYXN0\ncmhzKQ0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiUGFybSIpOw0KICAgICAg\nICBlbHNlDQogICAgICAgICAgICByaHMuYXBwZW5kVG8oYnVmKTsNCiAgICAg\nICAgYnVmLmFwcGVuZCgiXCIpIik7DQogICAgfQ0KICAgIA0KICAgIC8qKg0K\nICAgICAqIEFwcGVuZCBhbiB4bWwgY29tcGFyaXNvbiBwcmVkaWNhdGUuIChi\nb3RoIG9wZXJhbmRzIG1hcCB0byB4bWwgY29sdW1uKQ0KICAgICAqDQogICAg\nICogQHBhcmFtIGJ1ZiB0aGUgU1FMIGJ1ZmZlciB0byB3cml0ZSB0aGUgY29t\ncGFyaXNvbg0KICAgICAqIEBwYXJhbSBvcCB0aGUgY29tcGFyaXNvbiBvcGVy\nYXRpb24gdG8gcGVyZm9ybQ0KICAgICAqIEBwYXJhbSBsaHMgdGhlIGxlZnQg\naGFuZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uIChtYXBzIHRvIHhtbCBjb2x1\nbW4pDQogICAgICogQHBhcmFtIHJocyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9m\nIHRoZSBjb21wYXJpc29uIChtYXBzIHRvIHhtbCBjb2x1bW4pDQogICAgICov\nDQogICAgcHJpdmF0ZSB2b2lkIGFwcGVuZFhtbENvbXBhcmlzb24yKFNRTEJ1\nZmZlciBidWYsIFN0cmluZyBvcCwgDQogICAgICAgICAgICBGaWx0ZXJWYWx1\nZSBsaHMsIEZpbHRlclZhbHVlIHJocykgew0KICAgICAgICBhcHBlbmRYbWxF\neGlzdHMoYnVmLCBsaHMpOw0KICAgICAgICANCiAgICAgICAgYnVmLmFwcGVu\nZCgiICIpLmFwcGVuZChvcCkuYXBwZW5kKCIgIik7DQogICAgICAgIA0KICAg\nICAgICBidWYuYXBwZW5kKCIkIikuYXBwZW5kKHJocy5nZXRDb2x1bW5BbGlh\ncygNCiAgICAgICAgICAgIHJocy5nZXRGaWVsZE1hcHBpbmcoKS5nZXRDb2x1\nbW5zKClbMF0pKS4NCiAgICAgICAgICAgIGFwcGVuZCgiLyovIik7DQogICAg\nICAgIHJocy5hcHBlbmRUbyhidWYpOw0KICAgICAgICANCiAgICAgICAgYnVm\nLmFwcGVuZCgiXScgUEFTU0lORyAiKTsNCiAgICAgICAgYXBwZW5kWG1sVmFy\nKGJ1ZiwgbGhzKTsNCiAgICAgICAgYnVmLmFwcGVuZCgiLCAiKTsNCiAgICAg\nICAgYXBwZW5kWG1sVmFyKGJ1ZiwgcmhzKTsNCiAgICAgICAgYnVmLmFwcGVu\nZCgiKSIpOw0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZvaWQgYXBwZW5k\nWG1sVmFyKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVlIHZhbCkgew0KICAg\nICAgICBidWYuYXBwZW5kKHZhbC5nZXRDb2x1bW5BbGlhcygNCiAgICAgICAg\nICAgIHZhbC5nZXRGaWVsZE1hcHBpbmcoKS5nZXRDb2x1bW5zKClbMF0pKS4N\nCiAgICAgICAgICAgIGFwcGVuZCgiIEFTICIpLg0KICAgICAgICAgICAgYXBw\nZW5kKCJcIiIpLmFwcGVuZCh2YWwuZ2V0Q29sdW1uQWxpYXMoDQogICAgICAg\nICAgICB2YWwuZ2V0RmllbGRNYXBwaW5nKCkuZ2V0Q29sdW1ucygpWzBdKSku\nDQogICAgICAgICAgICBhcHBlbmQoIlwiIik7ICAgICAgICANCiAgICB9DQog\nICAgDQogICAgcHJpdmF0ZSB2b2lkIGFwcGVuZFhtbEV4aXN0cyhTUUxCdWZm\nZXIgYnVmLCBGaWx0ZXJWYWx1ZSB2YWwpIHsNCiAgICAgICAgYnVmLmFwcGVu\nZCgiWE1MRVhJU1RTKCciKTsNCiAgICAgICAgYnVmLmFwcGVuZCgiJCIpLmFw\ncGVuZCh2YWwuZ2V0Q29sdW1uQWxpYXMoDQogICAgICAgICAgICB2YWwuZ2V0\nRmllbGRNYXBwaW5nKCkuZ2V0Q29sdW1ucygpWzBdKSkuDQogICAgICAgICAg\nICBhcHBlbmQoIi8qWyIpOw0KICAgICAgICB2YWwuYXBwZW5kVG8oYnVmKTsg\nICAgICAgIA0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAgKiBhZGQgQ0FT\nVCBmb3IgYSBzY2FsYXIgZnVuY3Rpb24gd2hlcmUgb3BlcmFuZCBpcyBhIHBh\ncmFtDQogICAgICogDQogICAgICogQHBhcmFtIGZ1bmMgb3JpZ2luYWwgc3Ry\naW5nDQogICAgICogQHBhcmFtIHRhcmdldCBzdWJzdHJpbmcgdG8gbG9vayBm\nb3INCiAgICAgKiBAcGFyYW0gYXNTdHJpbmcgDQogICAgICogQHJldHVybiB1\ncGRhdGVkIHN0cmluZyAoZnVuYykNCiAgICAgKi8NCiAgICBwcml2YXRlIFN0\ncmluZyBhZGRDYXN0QXNTdHJpbmcoU3RyaW5nIGZ1bmMsIFN0cmluZyB0YXJn\nZXQsIA0KICAgICAgICAgICAgU3RyaW5nIGFzU3RyaW5nKSB7DQogICAgICAg\nIFN0cmluZyBmc3RyaW5nID0gZnVuYzsNCiAgICAgICAgaWYgKGZ1bmMuaW5k\nZXhPZih0YXJnZXQpICE9IC0xKQ0KICAgICAgICAgICAgZnN0cmluZyA9IFN0\ncmluZ3MucmVwbGFjZSgNCiAgICAgICAgICAgICAgICBmdW5jLCB0YXJnZXQs\nICJDQVNUKCIgKyB0YXJnZXQgKyBhc1N0cmluZyArICIpIik7DQogICAgICAg\nIHJldHVybiBmc3RyaW5nOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIGFk\nZCBDQVNUIGZvciBhIGZ1bmN0aW9uIG9wZXJhdG9yIHdoZXJlIG9wZXJhbmQg\naXMgYSBwYXJhbQ0KICAgICAqIA0KICAgICAqIEBwYXJhbSBmdW5jIGZ1bmN0\naW9uIG5hbWUNCiAgICAgKiBAcGFyYW0gdmFsIHR5cGUNCiAgICAgKiBAcmV0\ndXJuIHVwZGF0ZWQgc3RyaW5nIChmdW5jKQ0KICAgICAqLw0KICAgIHB1Ymxp\nYyBTdHJpbmcgYWRkQ2FzdEFzVHlwZShTdHJpbmcgZnVuYywgVmFsIHZhbCkg\new0KICAgICAgICBTdHJpbmcgZnN0cmluZyA9IG51bGw7DQogICAgICAgIFN0\ncmluZyB0eXBlID0gZ2V0VHlwZU5hbWUoZ2V0SkRCQ1R5cGUoSmF2YVR5cGVz\nLmdldFR5cGVDb2RlKHZhbA0KICAgICAgICAgICAgLmdldFR5cGUoKSksIGZh\nbHNlKSk7DQogICAgICAgIGlmIChTdHJpbmcuY2xhc3MuZXF1YWxzKHZhbC5n\nZXRUeXBlKCkpKQ0KICAgICAgICAgICAgdHlwZSA9IHR5cGUgKyAiKCIgKyBj\naGFyYWN0ZXJDb2x1bW5TaXplICsgIikiOw0KICAgICAgICBmc3RyaW5nID0g\nIkNBU1QoPyBBUyAiICsgdHlwZSArICIpIjsNCiAgICAgICAgcmV0dXJuIGZz\ndHJpbmc7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmV0dXJuIHRoZSBi\nYXRjaCBsaW1pdC4gSWYgdGhlIGJhdGNoTGltaXQgaXMgLTEsIGNoYW5nZSBp\ndCB0byAxMDAgZm9yDQogICAgICogYmVzdCBwZXJmb3JtYW5jZQ0KICAgICAq\nLw0KICAgIHB1YmxpYyBpbnQgZ2V0QmF0Y2hMaW1pdCgpIHsNCiAgICAgICAg\naW50IGxpbWl0ID0gc3VwZXIuZ2V0QmF0Y2hMaW1pdCgpOw0KICAgICAgICBp\nZiAobGltaXQgPT0gVU5MSU1JVEVEKSB7DQogICAgICAgICAgICBsaW1pdCA9\nIGRlZmF1bHRCYXRjaExpbWl0Ow0KICAgICAgICAgICAgaWYgKGxvZy5pc1Ry\nYWNlRW5hYmxlZCgpKQ0KICAgICAgICAgICAgICAgIGxvZy50cmFjZShfbG9j\nLmdldCgiYmF0Y2hfdW5saW1pdCIsIFN0cmluZy52YWx1ZU9mKGxpbWl0KSkp\nOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBsaW1pdDsNCiAgICB9DQoN\nCiAgICAvKioNCiAgICAgKiBSZXR1cm4gdGhlIGNvcnJlY3QgQ0FTVCBmdW5j\ndGlvbiBzeW50YXgNCiAgICAgKiANCiAgICAgKiBAcGFyYW0gdmFsIG9wZXJh\nbmQgb2YgY2FzdA0KICAgICAqIEBwYXJhbSBmdW5jIG9yaWdpbmFsIHN0cmlu\nZw0KICAgICAqIEByZXR1cm4gYSBTdHJpbmcgd2l0aCB0aGUgY29ycmVjdCBD\nQVNUIGZ1bmN0aW9uIHN5bnRheA0KICAgICAqLw0KICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0Q2FzdEZ1bmN0aW9uKFZhbCB2YWwsIFN0cmluZyBmdW5jKSB7DQog\nICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBMaXQgfHwgdmFsIGluc3RhbmNl\nb2YgUGFyYW0pDQogICAgICAgICAgICBpZiAoZnVuYy5pbmRleE9mKCJWQVJD\nSEFSIikgPT0gLTEpDQogICAgICAgICAgICAgICAgZnVuYyA9IGFkZENhc3RB\nc1N0cmluZyhmdW5jLCAiezB9IiwgIiBBUyBWQVJDSEFSKDEwMDApIik7DQog\nICAgICAgIHJldHVybiBmdW5jOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIGluZGV4T2YoU1FMQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgc3RyLCBGaWx0\nZXJWYWx1ZSBmaW5kLA0KICAgICAgICAgICAgRmlsdGVyVmFsdWUgc3RhcnQp\nIHsNCiAgICAgICAgaWYgKGZpbmQuZ2V0VmFsdWUoKSAhPSBudWxsKSB7IC8v\nIG5vbiBjb25zdGFudHMNCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIihMT0NB\nVEUoQ0FTVCgoIik7DQogICAgICAgICAgICBmaW5kLmFwcGVuZFRvKGJ1Zik7\nDQogICAgICAgICAgICBidWYuYXBwZW5kKCIpIEFTIFZBUkNIQVIoMTAwMCkp\nLCAiKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIHRoaXMg\naXMgYSBjb25zdGFudA0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiKExPQ0FU\nRSgiKTsNCiAgICAgICAgICAgIGZpbmQuYXBwZW5kVG8oYnVmKTsNCiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIiwgIik7DQogICAgICAgIH0NCiAgICAgICAg\naWYgKHN0ci5nZXRWYWx1ZSgpICE9IG51bGwpIHsNCiAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoIkNBU1QoKCIpOw0KICAgICAgICAgICAgc3RyLmFwcGVuZFRv\nKGJ1Zik7DQogICAgICAgICAgICBidWYuYXBwZW5kKCIpIEFTIFZBUkNIQVIo\nMTAwMCkpIik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBzdHIu\nYXBwZW5kVG8oYnVmKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc3RhcnQg\nIT0gbnVsbCkgew0KICAgICAgICAgICAgaWYgKHN0YXJ0LmdldFZhbHVlKCkg\nPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiwgQ0FT\nVCgoIik7DQogICAgICAgICAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsN\nCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIpIEFTIElOVEVHRVIpICsg\nMSIpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBi\ndWYuYXBwZW5kKCIsICIpOw0KICAgICAgICAgICAgICAgIHN0YXJ0LmFwcGVu\nZFRvKGJ1Zik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAg\nYnVmLmFwcGVuZCgiKSAtIDEpIik7DQogICAgfQ0KICAgIA0KICAgIC8qKiAN\nCiAgICAgKiBDYXN0IHRoZSBzcGVjaWZpZWQgdmFsdWUgdG8gdGhlIHNwZWNp\nZmllZCB0eXBlLg0KICAgICAqDQogICAgICogQHBhcmFtIGJ1ZiB0aGUgYnVm\nZmVyIHRvIGFwcGVuZCB0aGUgY2FzdCB0bw0KICAgICAqIEBwYXJhbSB2YWwg\ndGhlIHZhbHVlIHRvIGNhc3QNCiAgICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlw\nZSBvZiB0aGUgY2FzZSwgZS5nLiB7QGxpbmsgVHlwZXMjTlVNRVJJQ30NCiAg\nICAgKi8NCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRDYXN0KFNRTEJ1ZmZlciBi\ndWYsIEZpbHRlclZhbHVlIHZhbCwgaW50IHR5cGUpIHsNCg0KICAgICAgICAv\nLyBDb252ZXJ0IHRoZSBjYXN0IGZ1bmN0aW9uOiAiQ0FTVCh7MH0gQVMgezF9\nKSINCiAgICAgICAgaW50IGZpcnN0UGFyYW0gPSBjYXN0RnVuY3Rpb24uaW5k\nZXhPZigiezB9Iik7DQogICAgICAgIFN0cmluZyBwcmUgPSBjYXN0RnVuY3Rp\nb24uc3Vic3RyaW5nKDAsIGZpcnN0UGFyYW0pOyAvLyAiQ0FTVCgiDQogICAg\nICAgIFN0cmluZyBtaWQgPSBjYXN0RnVuY3Rpb24uc3Vic3RyaW5nKGZpcnN0\nUGFyYW0gKyAzKTsNCiAgICAgICAgaW50IHNlY29uZFBhcmFtID0gbWlkLmlu\nZGV4T2YoInsxfSIpOw0KICAgICAgICBTdHJpbmcgcG9zdDsNCiAgICAgICAg\naWYgKHNlY29uZFBhcmFtID4gLTEpIHsNCiAgICAgICAgICAgIHBvc3QgPSBt\naWQuc3Vic3RyaW5nKHNlY29uZFBhcmFtICsgMyk7IC8vICIpIg0KICAgICAg\nICAgICAgbWlkID0gbWlkLnN1YnN0cmluZygwLCBzZWNvbmRQYXJhbSk7IC8v\nICIgQVMgIg0KICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgIHBvc3QgPSAi\nIjsNCg0KICAgICAgICAvLyBObyBuZWVkIHRvIGFkZCBDQVNUIGlmIHRoZSB2\nYWx1ZSBpcyBhIGNvbnN0YW50DQogICAgICAgIGlmICh2YWwgaW5zdGFuY2Vv\nZiBMaXQgfHwgdmFsIGluc3RhbmNlb2YgUGFyYW0pIHsNCiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQocHJlKTsNCiAgICAgICAgICAgIHZhbC5hcHBlbmRUbyhi\ndWYpOw0KICAgICAgICAgICAgYnVmLmFwcGVuZChtaWQpOw0KICAgICAgICAg\nICAgYnVmLmFwcGVuZChnZXRUeXBlTmFtZSh0eXBlKSk7DQogICAgICAgICAg\nICBhcHBlbmRMZW5ndGgoYnVmLCB0eXBlKTsNCiAgICAgICAgICAgIGJ1Zi5h\ncHBlbmQocG9zdCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB2\nYWwuYXBwZW5kVG8oYnVmKTsNCiAgICAgICAgICAgIFN0cmluZyBzcWxTdHJp\nbmcgPSBidWYuZ2V0U1FMKGZhbHNlKTsNCiAgICAgICAgICAgIGlmIChzcWxT\ndHJpbmcuZW5kc1dpdGgoIj8iKSkgew0KICAgICAgICAgICAgICAgIC8vIGNh\nc2UgIig/IiAtIGNvbnZlcnQgdG8gIkNBU1QoPyBBUyB0eXBlIg0KICAgICAg\nICAgICAgICAgIFN0cmluZyB0eXBlTmFtZSA9IGdldFR5cGVOYW1lKHR5cGUp\nOw0KICAgICAgICAgICAgICAgIGlmIChTdHJpbmcuY2xhc3MuZXF1YWxzKHZh\nbC5nZXRUeXBlKCkpKQ0KICAgICAgICAgICAgICAgICAgICB0eXBlTmFtZSA9\nIHR5cGVOYW1lICsgIigiICsgY2hhcmFjdGVyQ29sdW1uU2l6ZSArICIpIjsN\nCiAgICAgICAgICAgICAgICBTdHJpbmcgc3RyID0gIkNBU1QoPyBBUyAiICsg\ndHlwZU5hbWUgKyAiKSI7DQogICAgICAgICAgICAgICAgYnVmLnJlcGxhY2VT\ncWxTdHJpbmcoc3FsU3RyaW5nLmxlbmd0aCgpIC0gMSwNCiAgICAgICAgICAg\nICAgICAgICAgICAgIHNxbFN0cmluZy5sZW5ndGgoKSwgc3RyKTsNCiAgICAg\nICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAq\nIENyZWF0ZSBhbiBpbmRleCBpZiBuZWNlc3NhcnkgZm9yIHNvbWUgZGF0YWJh\nc2UgdGFibGVzDQogICAgICovDQogICAgcHVibGljIHZvaWQgY3JlYXRlSW5k\nZXhJZk5lY2Vzc2FyeShTY2hlbWEgc2NoZW1hLCBTdHJpbmcgdGFibGUsDQog\nICAgICAgICAgICBDb2x1bW4gcGtDb2x1bW4pIHsNCiAgICAgICAgaWYgKGlz\nREIyWk9TVjh4T3JMYXRlcigpKSB7DQogICAgICAgICAgICAvLyBidWlsZCB0\naGUgaW5kZXggZm9yIHRoZSBzZXF1ZW5jZSB0YWJsZXMNCiAgICAgICAgICAg\nIC8vIHRoZSBpbmRleCBuYW1lIHdpbGwgdGhlIGZ1bGx5IHF1YWxpZmllZCB0\nYWJsZSBuYW1lICsgX0lEWA0KICAgICAgICAgICAgVGFibGUgdGFiID0gc2No\nZW1hLmdldFRhYmxlKHRhYmxlKTsNCiAgICAgICAgICAgIEluZGV4IGlkeCA9\nIHRhYi5hZGRJbmRleCh0YWIuZ2V0RnVsbE5hbWUoKSArICJfSURYIik7DQog\nICAgICAgICAgICBpZHguc2V0VW5pcXVlKHRydWUpOw0KICAgICAgICAgICAg\naWR4LmFkZENvbHVtbihwa0NvbHVtbik7DQogICAgICAgIH0NCiAgICB9DQog\nICAgDQogICAgU3RyaW5nIG51bGxTYWZlKFN0cmluZyBzKSB7DQogICAgCXJl\ndHVybiBzID09IG51bGwgPyAiIiA6IHM7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

