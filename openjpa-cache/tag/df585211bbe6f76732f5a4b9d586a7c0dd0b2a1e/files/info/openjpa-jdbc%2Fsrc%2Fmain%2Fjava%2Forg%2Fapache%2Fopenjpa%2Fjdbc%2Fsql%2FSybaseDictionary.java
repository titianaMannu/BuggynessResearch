{"sha":"272ee64ea99658130a1aefa5003aa59ec5d5d567","node_id":"MDQ6QmxvYjIwNjM2NDoyNzJlZTY0ZWE5OTY1ODEzMGExYWVmYTUwMDNhYTU5ZWM1ZDVkNTY3","size":12430,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/272ee64ea99658130a1aefa5003aa59ec5d5d567","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGguQmlnSW50\nZWdlcjsKaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZh\nLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51\ndGlsLkFycmF5czsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5T\ndHJpbmdVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\nY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5QcmltYXJ5S2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc2NoZW1hLlVuaXF1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIuamRiYy5EZWxlZ2F0aW5nQ29ubmVjdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubWV0YS5KYXZhVHlwZXM7CgovKioKICogRGlj\ndGlvbmFyeSBmb3IgU3liYXNlLgogKiAgVGhlIG1haW4gcG9pbnQgb2YgaW50\nZXJlc3QgaXMgdGhhdCBieSBkZWZhdWx0LCBldmVyeSB0YWJsZQogKiB0aGF0\nIGlzIGNyZWF0ZWQgd2lsbCBoYXZlIGEgdW5pcXVlIGNvbHVtbiBuYW1lZCAi\nVU5RX0lOREVYIiBvZgogKiB0aGUgIklERU5USVRZIiB0eXBlLiBPcGVuSlBB\nIHdpbGwgbm90IGV2ZXIgdXRpbGl6ZSB0aGlzIGNvbHVtbi4gSG93ZXZlciwK\nICogZHVlIHRvIGludGVybmFsIFN5YmFzZSByZXN0cmljdGlvbnMsIHRoaXMg\nY29sdW1uIGlzIHJlcXVpcmVkCiAqIGluIG9yZGVyIHRvIHN1cHBvcnQgcGVz\nc2ltaXN0aWMgKGRhdGFzdG9yZSkgbG9ja2luZywgc2luY2UgU3liYXNlCiAq\nIHJlcXVpcmVzIHRoYXQgYW55IHRhYmxlcyBpbiBhICJTRUxFQ1QgLi4uIEZP\nUiBVUERBVEUiIGNsYXVzZSBoYXZlCiAqIGEgdW5pcXVlIGluZGV4IHRoYXQg\naXMgPHN0cm9uZz5ub3Q8L3N0cm9uZz4gaW5jbHVkZWQgaW4gdGhlIGxpc3QK\nICogb2YgY29sdW1ucywgYXMgZGVzY3JpYmVkIGluIHRoZQogKiA8YSBocmVm\nPSJodHRwOi8vd3d3LnN5YmFzZS5jb20vZGV0YWlsLzEsNjkwNCwxMDIzMDc1\nLDAwLmh0bWwiCiAqID5TeWJhc2UgZG9jdW1lbnRhdGlvbjwvYT4uIFRoaXMg\nYmVoYXZpb3IgY2FuIGJlIHN1cnByZXNzZWQgYnkgc2V0dGluZyB0aGUKICog\nZGljdGlvbmFyeSBwcm9wZXJ0eSA8Y29kZT5DcmVhdGVJZGVudGl0eUNvbHVt\nbj1mYWxzZTwvY29kZT4uIFRoZQogKiBuYW1lIG9mIHRoZSB1bmlxdWUgY29s\ndW1uIGNhbiBiZSBjaGFuZ2VkIGJ5IHNldHRpbmcgdGhlIHByb3BlcnR5CiAq\nIDxjb2RlPklkZW50aXR5Q29sdW1uTmFtZT1DT0xVTU5fTkFNRTwvY29kZT4u\nCiAqICBBIGdvb2QgU3liYXNlIHR5cGUgcmVmZXJlbmNlIGlzIGNhbiBiZSBm\nb3VuZCA8YQogKiBocmVmPSJodHRwOi8vd3d3LmlzcGlyZXIuY29tL2RvYy9z\ncWx3YXlzMzYvc3liYXNlL3N5Yl9kdHlwZXMuaHRtbCI+aGVyZTwvYT4uCiAq\nLwpwdWJsaWMgY2xhc3MgU3liYXNlRGljdGlvbmFyeQogICAgZXh0ZW5kcyBB\nYnN0cmFjdFNRTFNlcnZlckRpY3Rpb25hcnkgewoKICAgIHByaXZhdGUgc3Rh\ndGljIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAg\nICAgICAoU3liYXNlRGljdGlvbmFyeS5jbGFzcyk7CgogICAgLyoqCiAgICAg\nKiBJZiB0cnVlLCB0aGVuIHdoZW5ldmVyIHRoZSA8Y29kZT5zY2hlbWF0b29s\nPC9jb2RlPiBjcmVhdGVzIGEKICAgICAqIHRhYmxlLCBpdCB3aWxsIGFwcGVu\nZCBhbiBhZGRpdGlvbmFsIElERU5USVRZIGNvbHVtbiB0byB0aGUKICAgICAq\nIHRhYmxlJ3MgY3JlYXRpb24gU1FMLiBUaGlzIGlzIHNvIFN5YmFzZSB3aWxs\nIGJlIGFibGUgdG8KICAgICAqIHBlcmZvcm0gPGNvZGU+U0VMRUNULi4uRk9S\nIFVQREFURTwvY29kZT4gc3RhdGVtZW50cy4KICAgICAqLwogICAgcHVibGlj\nIGJvb2xlYW4gY3JlYXRlSWRlbnRpdHlDb2x1bW4gPSB0cnVlOwoKICAgIC8q\nKgogICAgICogSWYge0BsaW5rICNjcmVhdGVJZGVudGl0eUNvbHVtbn0gaXMg\ndHJ1ZSwgdGhlbiB0aGUKICAgICAqIDxjb2RlPmlkZW50aXR5Q29sdW1uTmFt\nZTwvY29kZT4gd2lsbCBiZSB0aGUgbmFtZSBvZiB0aGUKICAgICAqIGFkZGl0\naW9uYWwgdW5pcXVlIGNvbHVtbiB0aGF0IHdpbGwgYmUgY3JlYXRlZC4KICAg\nICAqLwogICAgcHVibGljIFN0cmluZyBpZGVudGl0eUNvbHVtbk5hbWUgPSAi\nVU5RX0lOREVYIjsKCiAgICBwdWJsaWMgU3liYXNlRGljdGlvbmFyeSgpIHsK\nICAgICAgICBwbGF0Zm9ybSA9ICJTeWJhc2UiOwogICAgICAgIHNjaGVtYUNh\nc2UgPSBTQ0hFTUFfQ0FTRV9QUkVTRVJWRTsKICAgICAgICBmb3JVcGRhdGVD\nbGF1c2UgPSAiRk9SIFVQREFURSBBVCBJU09MQVRJT04gU0VSSUFMSVpBQkxF\nIjsKCiAgICAgICAgc3VwcG9ydHNMb2NraW5nV2l0aERpc3RpbmN0Q2xhdXNl\nID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNOdWxsVGFibGVGb3JHZXRDb2x1\nbW5zID0gZmFsc2U7CiAgICAgICAgcmVxdWlyZXNBbGlhc0ZvclN1YnNlbGVj\ndCA9IHRydWU7CiAgICAgICAgcmVxdWlyZXNBdXRvQ29tbWl0Rm9yTWV0YURh\ndGEgPSB0cnVlOwoKICAgICAgICBtYXhUYWJsZU5hbWVMZW5ndGggPSAzMDsK\nICAgICAgICBtYXhDb2x1bW5OYW1lTGVuZ3RoID0gMzA7CiAgICAgICAgbWF4\nSW5kZXhOYW1lTGVuZ3RoID0gMzA7CiAgICAgICAgbWF4Q29uc3RyYWludE5h\nbWVMZW5ndGggPSAzMDsKCiAgICAgICAgYmlnaW50VHlwZU5hbWUgPSAiTlVN\nRVJJQygzOCkiOwogICAgICAgIGJpdFR5cGVOYW1lID0gIlRJTllJTlQiOwoK\nICAgICAgICAvLyBTeWJhc2UgZG9lc24ndCB1bmRlcnN0YW5kICJYIENST1NT\nIEpPSU4gWSIsIGJ1dCBpdCBkb2VzIHVuZGVyc3RhbmQKICAgICAgICAvLyB0\naGUgZXF1aXZhbGVudCAiWCBKT0lOIFkgT04gMSA9IDEiCiAgICAgICAgY3Jv\nc3NKb2luQ2xhdXNlID0gIkpPSU4iOwogICAgICAgIHJlcXVpcmVzQ29uZGl0\naW9uRm9yQ3Jvc3NKb2luID0gdHJ1ZTsKCiAgICAgICAgLy8gdGhlc2UgdGFi\nbGVzIHNob3VsZCBub3QgYmUgcmVmbGVjdGVkIG9uCiAgICAgICAgc3lzdGVt\nVGFibGVTZXQuYWRkQWxsKEFycmF5cy5hc0xpc3QobmV3IFN0cmluZ1tdewog\nICAgICAgICAgICAiSUpEQkNfRlVOQ1RJT05fRVNDQVBFUyIsICJKREJDX0ZV\nTkNUSU9OX0VTQ0FQRVMiLAogICAgICAgICAgICAiU1BUX0lKREJDX0NPTlZF\nUlNJT04iLCAiU1BUX0lKREJDX01EQSIsICJTUFRfSUpEQkNfVEFCTEVfVFlQ\nRVMiLAogICAgICAgICAgICAiU1BUX0pEQkNfQ09OVkVSU0lPTiIsICJTUFRf\nSkRCQ19UQUJMRV9UWVBFUyIsICJTUFRfSlRFWFQiLAogICAgICAgICAgICAi\nU1BUX0xJTUlUX1RZUEVTIiwgIlNQVF9NREEiLCAiU1BUX01PTklUT1IiLCAi\nU1BUX1ZBTFVFUyIsCiAgICAgICAgICAgICJTWUJMSUNFTlNFU0xPRyIsCiAg\nICAgICAgfSkpOwoKICAgICAgICAvLyByZXNlcnZlZCB3b3JkcyBzcGVjaWZp\nZWQgYXQ6CiAgICAgICAgLy8gaHR0cDovL21hbnVhbHMuc3liYXNlLmNvbS9v\nbmxpbmVib29rcy9ncm91cC1hcy9hc2cxMjUwZS8KICAgICAgICAvLyByZWZt\nYW4vQEdlbmVyaWNfX0Jvb2tUZXh0Vmlldy8yNjYwMwogICAgICAgIHJlc2Vy\ndmVkV29yZFNldC5hZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117\nCiAgICAgICAgICAgICJBUklUSF9PVkVSRkxPVyIsICJCUkVBSyIsICJCUk9X\nU0UiLCAiQlVMSyIsICJDSEFSX0NPTlZFUlQiLAogICAgICAgICAgICAiQ0hF\nQ0tQT0lOVCIsICJDTFVTVEVSRUQiLCAiQ09NUFVURSIsICJDT05GSVJNIiwg\nIkNPTlRST0xST1ciLAogICAgICAgICAgICAiREFUQUJBU0UiLCAiREJDQyIs\nICJERVRFUk1JTklTVElDIiwgIkRJU0sgRElTVElOQ1QiLCAiRFVNTVkiLAog\nICAgICAgICAgICAiRFVNUCIsICJFTkRUUkFOIiwgIkVSUkxWTCIsICJFUlJP\nUkRBVEEiLCAiRVJST1JFWElUIiwgIkVYQ0xVU0lWRSIsCiAgICAgICAgICAg\nICJFWElUIiwgIkVYUF9ST1dfU0laRSIsICJGSUxMRkFDVE9SIiwgIkZVTkMi\nLCAiRlVOQ1RJT04iLAogICAgICAgICAgICAiSE9MRExPQ0siLCAiSURFTlRJ\nVFlfR0FQIiwgIklERU5USVRZX0lOU0VSVCIsICJJREVOVElUWV9TVEFSVCIs\nCiAgICAgICAgICAgICJJRiIsICJJTkRFWCIsICJJTk9VVCIsICJJTlNUQUxM\nIiwgIklOVEVSU0VDVCIsICJKQVIiLCAiS0lMTCIsCiAgICAgICAgICAgICJM\nSU5FTk8iLCAiTE9BRCIsICJMT0NLIiwgIk1BWF9ST1dTX1BFUl9QQUdFIiwg\nIk1JUlJPUiIsCiAgICAgICAgICAgICJNSVJST1JFWElUIiwgIk1PRElGWSIs\nICJORVciLCAiTk9IT0xETE9DSyIsICJOT05DTFVTVEVSRUQiLAogICAgICAg\nICAgICAiTlVNRVJJQ19UUlVOQ0FUSU9OIiwgIk9GRiIsICJPRkZTRVRTIiwg\nIk9OQ0UiLCAiT05MSU5FIiwgIk9VVCIsCiAgICAgICAgICAgICJPVkVSIiwg\nIlBBUlRJVElPTiIsICJQRVJNIiwgIlBFUk1BTkVOVCIsICJQTEFOIiwgIlBS\nSU5UIiwgIlBST0MiLAogICAgICAgICAgICAiUFJPQ0VTU0VYSVQiLCAiUFJP\nWFlfVEFCTEUiLCAiUVVJRVNDRSIsICJSQUlTRVJST1IiLCAiUkVBRCIsCiAg\nICAgICAgICAgICJSRUFEUEFTVCIsICJSRUFEVEVYVCIsICJSRUNPTkZJR1VS\nRSIsICJSRUZFUkVOQ0VTIFJFTU9WRSIsICJSRU9SRyIsCiAgICAgICAgICAg\nICJSRVBMQUNFIiwgIlJFUExJQ0FUSU9OIiwgIlJFU0VSVkVQQUdFR0FQIiwg\nIlJFVFVSTiIsICJSRVRVUk5TIiwKICAgICAgICAgICAgIlJPTEUiLCAiUk9X\nQ09VTlQiLCAiUlVMRSIsICJTQVZFIiwgIlNFVFVTRVIiLCAiU0hBUkVEIiwK\nICAgICAgICAgICAgIlNIVVRET1dOIiwgIlNPTUUiLCAiU1RBVElTVElDUyIs\nICJTVFJJTkdTSVpFIiwgIlNUUklQRSIsCiAgICAgICAgICAgICJTWUJfSURF\nTlRJVFkiLCAiU1lCX1JFU1RSRUUiLCAiU1lCX1RFUk1JTkFURSIsICJURU1Q\nIiwgIlRFWFRTSVpFIiwKICAgICAgICAgICAgIlRSQU4iLCAiVFJJR0dFUiIs\nICJUUlVOQ0FURSIsICJUU0VRVUFMIiwgIlVOUEFSVElUSU9OIiwgIlVTRSIs\nCiAgICAgICAgICAgICJVU0VSX09QVElPTiIsICJXQUlURk9SIiwgIldISUxF\nIiwgIldSSVRFVEVYVCIsCiAgICAgICAgfSkpOwoKICAgICAgICAvLyBTeWJh\nc2UgZG9lcyBub3Qgc3VwcG9ydCBmb3JlaWduIGtleSBkZWxldGUvdXBkYXRl\nIGFjdGlvbiBOVUxMLCBERUZBVUxULAogICAgICAgIC8vIENBU0NBREUKICAg\nICAgICBzdXBwb3J0c051bGxEZWxldGVBY3Rpb24gPSBmYWxzZTsKICAgICAg\nICBzdXBwb3J0c0RlZmF1bHREZWxldGVBY3Rpb24gPSBmYWxzZTsKICAgICAg\nICBzdXBwb3J0c0Nhc2NhZGVEZWxldGVBY3Rpb24gPSBmYWxzZTsKICAgICAg\nICBzdXBwb3J0c051bGxVcGRhdGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBz\ndXBwb3J0c0RlZmF1bHRVcGRhdGVBY3Rpb24gPSBmYWxzZTsKICAgICAgICBz\ndXBwb3J0c0Nhc2NhZGVVcGRhdGVBY3Rpb24gPSBmYWxzZTsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGdldEpEQkNUeXBlKGludCBtZXRhVHlwZUNvZGUsIGJv\nb2xlYW4gbG9iKSB7CiAgICAgICAgc3dpdGNoIChtZXRhVHlwZUNvZGUpIHsK\nICAgICAgICAgICAgLy8gdGhlIGRlZmF1bHQgbWFwcGluZyBmb3IgQllURSBp\ncyBhIFRJTllJTlQsIGJ1dCBTeWJhc2UncyBUSU5ZSU5UCiAgICAgICAgICAg\nIC8vIHR5cGUgY2FuJ3QgaGFuZGxlIHRoZSBjb21wbGV0ZSByYW5nZSBmb3Ig\nYSBKYXZhIGJ5dGUKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQllURToK\nICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQllURV9PQko6CiAgICAgICAg\nICAgICAgICByZXR1cm4gZ2V0UHJlZmVycmVkVHlwZShUeXBlcy5TTUFMTElO\nVCk7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1\ncm4gc3VwZXIuZ2V0SkRCQ1R5cGUobWV0YVR5cGVDb2RlLCBsb2IpOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRCaWdJbnRlZ2VyKFBy\nZXBhcmVkU3RhdGVtZW50IHN0bW50LCBpbnQgaWR4LCBCaWdJbnRlZ2VyIHZh\nbCwKICAgICAgICBDb2x1bW4gY29sKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIC8vIHNldEJpZ0RlY2ltYWwgZG9lc24ndCB3b3Jr\nIGhlcmU6IGluIG9uZSBjYXNlLCBhIHN0b3JlZCB2YWx1ZQogICAgICAgIC8v\nIG9mIDc3OTk0Mzg1MTQ5MjQzNDk0NDAgdHVybnMgaW50byA3Nzk5NDM4NTE0\nOTI0MzQ5NDAwCiAgICAgICAgLy8gc2V0T2JqZWN0IGdldHMgYXJvdW5kIHRo\naXMgaW4gdGhlIFN5YmFzZSBKREJDIGRyaXZlcnMKICAgICAgICBzZXRPYmpl\nY3Qoc3RtbnQsIGlkeCwgbmV3IEJpZ0RlY2ltYWwodmFsKSwgVHlwZXMuQklH\nSU5ULCBjb2wpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRBZGRG\nb3JlaWduS2V5U1FMKEZvcmVpZ25LZXkgZmspIHsKICAgICAgICAvLyBTeWJh\nc2UgaGFzIHByb2JsZW1zIHdpdGggYWRkaW5nIGZvcmllZ24ga2V5cyB2aWEg\nQUxURVIgVEFCTEUgY29tbWFuZAogICAgICAgIHJldHVybiBuZXcgU3RyaW5n\nWzBdOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRDcmVhdGVUYWJs\nZVNRTChUYWJsZSB0YWJsZSkgewogICAgICAgIGlmICghY3JlYXRlSWRlbnRp\ndHlDb2x1bW4pCiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRDcmVhdGVU\nYWJsZVNRTCh0YWJsZSk7CgogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBu\nZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgYnVmLmFwcGVuZCgiQ1JFQVRF\nIFRBQkxFICIpLmFwcGVuZChnZXRGdWxsTmFtZSh0YWJsZSwgZmFsc2UpKS4K\nICAgICAgICAgICAgYXBwZW5kKCIgKCIpOwoKICAgICAgICBDb2x1bW5bXSBj\nb2xzID0gdGFibGUuZ2V0Q29sdW1ucygpOwogICAgICAgIGJvb2xlYW4gaGFz\nSWRlbnRpdHkgPSBmYWxzZTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBjb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChjb2xzW2ld\nLmlzQXV0b0Fzc2lnbmVkKCkpCiAgICAgICAgICAgICAgICBoYXNJZGVudGl0\neSA9IHRydWU7CgogICAgICAgICAgICBidWYuYXBwZW5kKGkgPT0gMCA/ICIi\nIDogIiwgIik7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoZ2V0RGVjbGFyZUNv\nbHVtblNRTChjb2xzW2ldLCBmYWxzZSkpOwogICAgICAgIH0KCiAgICAgICAg\nLy8gYWRkIGFuIGlkZW50aXR5IGNvbHVtbiBpZiB3ZSBkbyBub3QgYWxyZWFk\neSBoYXZlIG9uZQogICAgICAgIGlmICghaGFzSWRlbnRpdHkpCiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoIiwgIikuYXBwZW5kKGlkZW50aXR5Q29sdW1uTmFt\nZSkuCiAgICAgICAgICAgICAgICBhcHBlbmQoIiBOVU1FUklDIElERU5USVRZ\nIFVOSVFVRSIpOwoKICAgICAgICBQcmltYXJ5S2V5IHBrID0gdGFibGUuZ2V0\nUHJpbWFyeUtleSgpOwogICAgICAgIGlmIChwayAhPSBudWxsKQogICAgICAg\nICAgICBidWYuYXBwZW5kKCIsICIpLmFwcGVuZChnZXRQcmltYXJ5S2V5Q29u\nc3RyYWludFNRTChwaykpOwoKICAgICAgICBVbmlxdWVbXSB1bnFzID0gdGFi\nbGUuZ2V0VW5pcXVlcygpOwogICAgICAgIFN0cmluZyB1bnFTdHI7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCB1bnFzLmxlbmd0aDsgaSsrKSB7CiAg\nICAgICAgICAgIHVucVN0ciA9IGdldFVuaXF1ZUNvbnN0cmFpbnRTUUwodW5x\nc1tpXSk7CiAgICAgICAgICAgIGlmICh1bnFTdHIgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIiwgIikuYXBwZW5kKHVucVN0cik7CiAg\nICAgICAgfQoKICAgICAgICBidWYuYXBwZW5kKCIpIik7CiAgICAgICAgcmV0\ndXJuIG5ldyBTdHJpbmdbXXsgYnVmLnRvU3RyaW5nKCkgfTsKICAgIH0KCiAg\nICBwcm90ZWN0ZWQgU3RyaW5nIGdldERlY2xhcmVDb2x1bW5TUUwoQ29sdW1u\nIGNvbCwgYm9vbGVhbiBhbHRlcikgewogICAgICAgIFN0cmluZ0J1ZmZlciBi\ndWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgYnVmLmFwcGVuZChj\nb2wpLmFwcGVuZCgiICIpOwogICAgICAgIGJ1Zi5hcHBlbmQoZ2V0VHlwZU5h\nbWUoY29sKSk7CgogICAgICAgIC8vIGNhbid0IGFkZCBjb25zdHJhaW50cyB0\nbyBhIGNvbHVtbiB3ZSdyZSBhZGRpbmcgYWZ0ZXIgdGFibGUKICAgICAgICAv\nLyBjcmVhdGlvbiwgY2F1c2Ugc29tZSBkYXRhIG1pZ2h0IGFscmVhZHkgYmUg\naW5zZXJ0ZWQKICAgICAgICBpZiAoIWFsdGVyKSB7CiAgICAgICAgICAgIGlm\nIChjb2wuZ2V0RGVmYXVsdFN0cmluZygpICE9IG51bGwgJiYgIWNvbC5pc0F1\ndG9Bc3NpZ25lZCgpKQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiIERF\nRkFVTFQgIikuYXBwZW5kKGNvbC5nZXREZWZhdWx0U3RyaW5nKCkpOwogICAg\nICAgICAgICBpZiAoY29sLmlzQXV0b0Fzc2lnbmVkKCkpCiAgICAgICAgICAg\nICAgICBidWYuYXBwZW5kKCIgSURFTlRJVFkiKTsKICAgICAgICB9CgogICAg\nICAgIGlmIChjb2wuaXNOb3ROdWxsKCkpCiAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoIiBOT1QgTlVMTCIpOwogICAgICAgIGVsc2UgaWYgKCFjb2wuaXNQcmlt\nYXJ5S2V5KCkpIHsKICAgICAgICAgICAgLy8gc3liYXNlIGZvcmNlcyB5b3Ug\ndG8gZXhwbGljaXRseSBzcGVjaWZ5IHRoYXQKICAgICAgICAgICAgLy8geW91\nIHdpbGwgYWxsb3cgTlVMTCB2YWx1ZXMKICAgICAgICAgICAgYnVmLmFwcGVu\nZCgiIE5VTEwiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBidWYudG9T\ndHJpbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0RHJvcENv\nbHVtblNRTChDb2x1bW4gY29sdW1uKSB7CiAgICAgICAgLy8gU3liYXNlIHVz\nZXMgIkFMVEVSIFRBQkxFIERST1AgPENPTFVNTl9OQU1FPiIgcmF0aGVyIHRo\nYW4gdGhlCiAgICAgICAgLy8gdXN1YWwgIkFMVEVSIFRBQkxFIERST1AgQ09M\nVU1OIDxDT0xVTU5fTkFNRT4iCiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdb\nXXsgIkFMVEVSIFRBQkxFICIKICAgICAgICAgICAgKyBnZXRGdWxsTmFtZShj\nb2x1bW4uZ2V0VGFibGUoKSwgZmFsc2UpICsgIiBEUk9QICIgKyBjb2x1bW4g\nfTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZWZTY2hlbWFDb21wb25lbnRz\nKFRhYmxlIHRhYmxlKSB7CiAgICAgICAgLy8gbm90ZSB0aGF0IHdlIHVzZSBn\nZXRDb2x1bW5zKCkgcmF0aGVyIHRoYW4gZ2V0dGluZyB0aGUgY29sdW1uIGJ5\nIG5hbWUKICAgICAgICAvLyBiZWNhdXNlIHVuZGVyIHNvbWUgY2lyY3Vtc3Rh\nbmNlcyB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgdW5kZXIgdGhlCiAgICAgICAg\nLy8gZHluYW1pYyBzY2hlbWEgZmFjdG9yeSwgd2hlcmUgZ2V0dGluZyBhIGNv\nbHVtbiBieSBuYW1lIGNyZWF0ZXMKICAgICAgICAvLyB0aGF0IGNvbHVtbgog\nICAgICAgIENvbHVtbltdIGNvbHMgPSB0YWJsZS5nZXRDb2x1bW5zKCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKQog\nICAgICAgICAgICBpZiAoaWRlbnRpdHlDb2x1bW5OYW1lLmVxdWFsc0lnbm9y\nZUNhc2UoY29sc1tpXS5nZXROYW1lKCkpKQogICAgICAgICAgICAgICAgY29s\nc1tpXS5yZWYoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBlbmRDb25maWd1\ncmF0aW9uKCkgewogICAgICAgIHN1cGVyLmVuZENvbmZpZ3VyYXRpb24oKTsK\nCiAgICAgICAgLy8gd2FybiBhYm91dCBqZGJjIGNvbXBsaWFudCBmbGFnCiAg\nICAgICAgU3RyaW5nIHVybCA9IGNvbmYuZ2V0Q29ubmVjdGlvblVSTCgpOwog\nICAgICAgIGlmICghU3RyaW5nVXRpbHMuaXNFbXB0eSh1cmwpCiAgICAgICAg\nICAgICYmIHVybC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImpkYmM6c3liYXNl\nOnRkcyIpICE9IC0xCiAgICAgICAgICAgICYmIHVybC50b0xvd2VyQ2FzZSgp\nLmluZGV4T2YoImJlX2FzX2pkYmNfY29tcGxpYW50X2FzX3Bvc3NpYmxlPSIp\nCiAgICAgICAgICAgID09IC0xKSB7CiAgICAgICAgICAgIGxvZy53YXJuKF9s\nb2MuZ2V0KCJzeWJhc2UtY29tcGxpYW5jZSIsIHVybCkpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgQ29ubmVjdGlvbiBkZWNvcmF0ZShDb25uZWN0\naW9uIGNvbm4pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIG5ldyBTeWJhc2VDb25uZWN0aW9uKHN1cGVyLmRlY29yYXRl\nKGNvbm4pKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbm5lY3Rpb24gd3Jh\ncHBlciB0byBjYWNoZSB0aGUge0BsaW5rIENvbm5lY3Rpb24jZ2V0Q2F0YWxv\nZ30gcmVzdWx0LAogICAgICogd2hpY2ggdGFrZXMgYSB2ZXJ5IGxvbmcgdGlt\nZSB3aXRoIHRoZSBTeWJhc2UgQ29ubmVjdGlvbiAoYW5kCiAgICAgKiB3aGlj\naCB3ZSBmcmVxdWVudGx5IGludm9rZSkuCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIGNsYXNzIFN5YmFzZUNvbm5lY3Rpb24KICAgICAgICBleHRlbmRz\nIERlbGVnYXRpbmdDb25uZWN0aW9uIHsKCiAgICAgICAgcHJpdmF0ZSBTdHJp\nbmcgX2NhdGFsb2cgPSBudWxsOwoKICAgICAgICBwdWJsaWMgU3liYXNlQ29u\nbmVjdGlvbihDb25uZWN0aW9uIGNvbm4pIHsKICAgICAgICAgICAgc3VwZXIo\nY29ubik7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgU3RyaW5nIGdldENh\ndGFsb2coKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICAgICAgaWYgKF9jYXRhbG9nID09IG51bGwpCiAgICAgICAgICAgICAg\nICBfY2F0YWxvZyA9IHN1cGVyLmdldENhdGFsb2coKTsKICAgICAgICAgICAg\ncmV0dXJuIF9jYXRhbG9nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZv\naWQgc2V0QXV0b0NvbW1pdChib29sZWFuIGF1dG9jb21taXQpCiAgICAgICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICAvLyB0aGUg\nc3liYXNlIGpkYmMgZHJpdmVyIGRlbWFuZHMgdGhhdCB0aGUgQ29ubmVjdGlv\nbiBhbHdheXMKICAgICAgICAgICAgLy8gYmUgcm9sbGVkIGJhY2sgYmVmb3Jl\nIGF1dG9jb21taXQgc3RhdHVzIGNoYW5nZXMuIEZhaWx1cmUgdG8KICAgICAg\nICAgICAgLy8gZG8gc28gd2lsbCB5aWVsZCAiU0VUIENIQUlORUQgY29tbWFu\nZCBub3QgYWxsb3dlZCB3aXRoaW4KICAgICAgICAgICAgLy8gbXVsdGktc3Rh\ndGVtZW50IHRyYW5zYWN0aW9uLiIgZXhjZXB0aW9ucwogICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgc3VwZXIuc2V0QXV0b0NvbW1pdChhdXRv\nY29tbWl0KTsKICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgICAgIC8vIGZhaWxlZCBmb3Igc29tZSByZWFzb246\nIHRyeSByb2xsaW5nIGJhY2sgYW5kIHRoZW4KICAgICAgICAgICAgICAgIC8v\nIHNldHRpbmcgYXV0b2NvbW1pdCBhZ2Fpbi4KICAgICAgICAgICAgICAgIGlm\nIChhdXRvY29tbWl0KQogICAgICAgICAgICAgICAgICAgIHN1cGVyLmNvbW1p\ndCgpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAg\nIHN1cGVyLnJvbGxiYWNrKCk7CiAgICAgICAgICAgICAgICBzdXBlci5zZXRB\ndXRvQ29tbWl0KGF1dG9jb21taXQpOwogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgfQp9Cg==\n","encoding":"base64"}

