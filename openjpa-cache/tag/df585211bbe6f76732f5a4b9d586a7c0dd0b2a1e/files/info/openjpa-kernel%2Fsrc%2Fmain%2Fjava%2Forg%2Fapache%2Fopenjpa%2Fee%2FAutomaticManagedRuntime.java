{"sha":"0c072a08b73a67fb47907a41e11b01b00543add3","node_id":"MDQ6QmxvYjIwNjM2NDowYzA3MmEwOGI3M2E2N2ZiNDc5MDdhNDFlMTFiMDFiMDA1NDNhZGQz","size":10117,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0c072a08b73a67fb47907a41e11b01b00543add3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZWU7CgppbXBvcnQgamF2YS51\ndGlsLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi5Ob3RTdXBwb3J0ZWRFeGNlcHRpb247Cmlt\ncG9ydCBqYXZheC50cmFuc2FjdGlvbi5TeXN0ZW1FeGNlcHRpb247CmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXI7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYWJsZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Q\ncml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLklu\ndmFsaWRTdGF0ZUV4Y2VwdGlvbjsKCi8qKgogKiBJbXBsZW1lbnRhdGlvbiBv\nZiB0aGUge0BsaW5rIE1hbmFnZWRSdW50aW1lfSBpbnRlcmZhY2UgdGhhdCBz\nZWFyY2hlcwogKiB0aHJvdWdoIGEgc2V0IG9mIGtub3duIEpOREkgbG9jYXRp\nb25zIGFuZCBtZXRob2QgaW52b2NhdGlvbnMgdG8gbG9jYXRlIHRoZQogKiBh\ncHByb3ByaWF0ZSBtZWNoYW5pc20gZm9yIG9idGFpbmluZyBhIFRyYW5zYWN0\naW9uTWFuYWdlci4KICogIEJ1aWx0IGluIHN1cHBvcnQgaXMgcHJvdmlkZWQg\nZm9yIHRoZSBmb2xsb3dpbmcgQXBwbGljYXRpb24gU2VydmVyczoKICogPHVs\nPgogKiA8bGk+Qmx1ZXN0b25lPC9saT4KICogPGxpPkhQIEFwcGxpY2F0aW9u\nIFNlcnZlcjwvbGk+CiAqIDxsaT5KQm9zczwvbGk+CiAqIDxsaT5KUnVuPC9s\naT4KICogPGxpPk9wZW5FSkI8L2xpPgogKiA8bGk+T3JhY2xlIEFwcGxpY2F0\naW9uIFNlcnZlcjwvbGk+CiAqIDxsaT5PcmlvbjwvbGk+CiAqIDxsaT5TdW5P\nTkU8L2xpPgogKiA8bGk+V2VibG9naWM8L2xpPgogKiA8bGk+V2Vic3BoZXJl\nPC9saT4KICogPC91bD4KICoKICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVh\ndXgKICovCnB1YmxpYyBjbGFzcyBBdXRvbWF0aWNNYW5hZ2VkUnVudGltZSBl\neHRlbmRzIEFic3RyYWN0TWFuYWdlZFJ1bnRpbWUKICAgIGltcGxlbWVudHMg\nTWFuYWdlZFJ1bnRpbWUsIENvbmZpZ3VyYWJsZSB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgU3RyaW5nIFtdIEpORElfTE9DUyA9IG5ldyBTdHJpbmcg\nW117CiAgICAgICAgImphdmF4LnRyYW5zYWN0aW9uLlRyYW5zYWN0aW9uTWFu\nYWdlciIsIC8vIHdlYmxvZ2ljCiAgICAgICAgImphdmE6L1RyYW5zYWN0aW9u\nTWFuYWdlciIsIC8vIGpib3NzICYganJ1bgogICAgICAgICJqYXZhOi9EZWZh\ndWx0RG9tYWluL1RyYW5zYWN0aW9uTWFuYWdlciIsIC8vIGpydW4gdG9vCiAg\nICAgICAgImphdmE6Y29tcC9wbS9UcmFuc2FjdGlvbk1hbmFnZXIiLCAvLyBv\ncmlvbiAmIG9yYWNsZQogICAgICAgICJqYXZhOmNvbXAvVHJhbnNhY3Rpb25N\nYW5hZ2VyIiwgLy8gZ2VuZXJpYwogICAgICAgICJqYXZhOnBtL1RyYW5zYWN0\naW9uTWFuYWdlciIsIC8vIGJvcmxhbmQKICAgIH07CiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBTdHJpbmcgW10gTUVUSE9EUyA9IG5ldyBTdHJpbmdbXXsK\nICAgICAgICAiY29tLmFyanVuYS5qdGEuSlRBX1RyYW5zYWN0aW9uTWFuYWdl\nci50cmFuc2FjdGlvbk1hbmFnZXIiLCAvLyBocAogICAgICAgICJjb20uYmx1\nZXN0b25lLmp0YS5TYVRyYW5zYWN0aW9uTWFuYWdlckZhY3RvcnkuU2FHZXRU\ncmFuc2FjdGlvbk1hbmFnZXIiLAogICAgICAgICJvcmcub3BlbmVqYi5PcGVu\nRUpCLmdldFRyYW5zYWN0aW9uTWFuYWdlciIsCiAgICAgICAgImNvbS5zdW4u\nanRzLmp0YS5UcmFuc2FjdGlvbk1hbmFnZXJJbXBsLmdldFRyYW5zYWN0aW9u\nTWFuYWdlckltcGwiLAogICAgICAgICJjb20uaW5wcmlzZS52aXNpdHJhbnNh\nY3QuanRhLlRyYW5zYWN0aW9uTWFuYWdlckltcGwuIgogICAgICAgICAgICAr\nICJnZXRUcmFuc2FjdGlvbk1hbmFnZXJJbXBsIiwgLy8gYm9ybGFuZAogICAg\nfTsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBNYW5hZ2VkUnVudGltZSBS\nRUdJU1RSWTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFdMU01hbmFnZWRS\ndW50aW1lIFdMUzsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN1bk9uZU1h\nbmFnZWRSdW50aW1lIFNVTk9ORTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIFdBU01hbmFnZWRSdW50aW1lIFdBUzsKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIFdBU1JlZ2lzdHJ5TWFuYWdlZFJ1bnRpbWUgV0FTX1JFRzsKCiAgICBw\ncml2YXRlIHN0YXRpYyBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQ\nYWNrYWdlCiAgICAgICAgKEF1dG9tYXRpY01hbmFnZWRSdW50aW1lLmNsYXNz\nKTsKCiAgICBzdGF0aWMgewogICAgICAgIE1hbmFnZWRSdW50aW1lIG1yID0g\nbnVsbDsKCiAgICAgICAgbXIgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIG1yID0gKE1hbmFnZWRSdW50aW1lKSBDbGFzcy4KICAgICAgICAg\nICAgICAgIGZvck5hbWUoIm9yZy5hcGFjaGUub3BlbmpwYS5lZS5SZWdpc3Ry\neU1hbmFnZWRSdW50aW1lIikuCiAgICAgICAgICAgICAgICAgICAgbmV3SW5z\ndGFuY2UoKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAg\nICAgICAgICAvLyBtaWdodCBiZSBKVEEgdmVyc2lvbiBsb3dlciB0aGFuIDEu\nMSwgd2hpY2ggZG9lc24ndCBoYXZlIAogICAgICAgICAgICAvLyBUcmFuc2Fj\ndGlvblN5bmNocm9uaXphdGlvblJlZ2lzdHJ5CiAgICAgICAgfQogICAgICAg\nIFJFR0lTVFJZID0gbXI7CgogICAgICAgIG1yID0gbnVsbDsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBtciA9IG5ldyBXTFNNYW5hZ2VkUnVudGltZSgp\nOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgfQog\nICAgICAgIFdMUyA9IChXTFNNYW5hZ2VkUnVudGltZSkgbXI7CgogICAgICAg\nIG1yID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICBtciA9IG5l\ndyBTdW5PbmVNYW5hZ2VkUnVudGltZSgpOwogICAgICAgIH0gY2F0Y2ggKFRo\ncm93YWJsZSB0KSB7CiAgICAgICAgfQogICAgICAgIFNVTk9ORSA9IChTdW5P\nbmVNYW5hZ2VkUnVudGltZSkgbXI7CgogICAgICAgIG1yID0gbnVsbDsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBtciA9IG5ldyBXQVNNYW5hZ2VkUnVu\ndGltZSgpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAg\nICAgfQogICAgICAgIFdBUyA9IChXQVNNYW5hZ2VkUnVudGltZSkgbXI7Cgog\nICAgICAgIG1yID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICAv\nLyBJbiBhIFdlYlNwaGVyZSBlbnZpcm9ubWVudCB0aGUgdGhyZWFkJ3MgY3Vy\ncmVudCBjbGFzc2xvYWRlciBtaWdodAogICAgICAgICAgICAvLyBub3QgaGF2\nZSBhY2Nlc3MgdG8gdGhlIFdlYlNwaGVyZSBBUElzLiBIb3dldmVyIHRoZSAi\ncnVudGltZSIKICAgICAgICAgICAgLy8gY2xhc3Nsb2FkZXIgd2lsbCBoYXZl\nIGFjY2VzcyB0byB0aGVtLgogICAgICAgICAgICAKICAgICAgICAgICAgLy8g\nU2hvdWxkIG5vdCBuZWVkIGEgZG9Qcml2IGdldHRpbmcgdGhpcyBjbGFzcycg\nY2xhc3Nsb2FkZXIKICAgICAgICAgICAgQ2xhc3NMb2FkZXIgY2wgPSBBdXRv\nbWF0aWNNYW5hZ2VkUnVudGltZS5jbGFzcy5nZXRDbGFzc0xvYWRlcigpOwoK\nICAgICAgICAgICAgQ2xhc3M8V0FTUmVnaXN0cnlNYW5hZ2VkUnVudGltZT4g\nbXJDbGFzcyA9CiAgICAgICAgICAgICAgICAoQ2xhc3M8V0FTUmVnaXN0cnlN\nYW5hZ2VkUnVudGltZT4pIEoyRG9Qcml2SGVscGVyCiAgICAgICAgICAgICAg\nICAgICAgICAgIC5nZXRGb3JOYW1lQWN0aW9uKAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIFdBU1JlZ2lzdHJ5TWFuYWdlZFJ1bnRpbWUuY2xh\nc3MuZ2V0TmFtZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIHRydWUsIGNsKS5ydW4oKTsKICAgICAgICAgICAgbXIgPSBKMkRvUHJpdkhl\nbHBlci5uZXdJbnN0YW5jZUFjdGlvbihtckNsYXNzKS5ydW4oKTsKICAgICAg\nICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICAvLyBzYWZl\nIHRvIGlnbm9yZQogICAgICAgIH0KICAgICAgICBXQVNfUkVHID0gKFdBU1Jl\nZ2lzdHJ5TWFuYWdlZFJ1bnRpbWUpIG1yOwogICAgfQoKICAgIHByaXZhdGUg\nQ29uZmlndXJhdGlvbiBfY29uZiA9IG51bGw7CiAgICBwcml2YXRlIE1hbmFn\nZWRSdW50aW1lIF9ydW50aW1lID0gbnVsbDsKICAgIAogICAgcHVibGljIFRy\nYW5zYWN0aW9uTWFuYWdlciBnZXRUcmFuc2FjdGlvbk1hbmFnZXIoKQogICAg\nICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGlmIChfcnVudGltZSAh\nPSBudWxsKQogICAgICAgICAgICByZXR1cm4gX3J1bnRpbWUuZ2V0VHJhbnNh\nY3Rpb25NYW5hZ2VyKCk7CgogICAgICAgIExpc3Q8VGhyb3dhYmxlPiBlcnJv\ncnMgPSBuZXcgTGlua2VkTGlzdDxUaHJvd2FibGU+KCk7CiAgICAgICAgVHJh\nbnNhY3Rpb25NYW5hZ2VyIHRtID0gbnVsbDsKCiAgICAgICAgLy8gVHJ5IHRo\nZSByZWdpc3RyeSBleHRlbnNpb25zIGZpcnN0IHNvIHRoYXQgYW55IGFwcGxp\nY2FibGUgdmVuZG9yCiAgICAgICAgLy8gc3BlY2lmaWMgZXh0ZW5zaW9ucyBh\ncmUgdXNlZC4KICAgICAgICBpZiAoV0FTX1JFRyAhPSBudWxsKSB7CiAgICAg\nICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0bSA9IFdBU19SRUcuZ2V0\nVHJhbnNhY3Rpb25NYW5hZ2VyKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFRo\ncm93YWJsZSB0KSB7CiAgICAgICAgICAgICAgICBlcnJvcnMuYWRkKHQpOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0bSAhPSBudWxsKSB7CiAg\nICAgICAgICAgICAgICBfcnVudGltZSA9IFdBU19SRUc7CiAgICAgICAgICAg\nICAgICByZXR1cm4gdG07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAg\nICAgIC8vIFRoZW4gdHJ5IHRoZSByZWdpc3RyeSwgd2hpY2ggaXMgdGhlIG9m\nZmljaWFsIHdheSB0byBvYnRhaW4KICAgICAgICAvLyB0cmFuc2FjdGlvbiBz\neW5jaHJvbmljYXRpb24gaW4gSlRBIDEuMQogICAgICAgIGlmIChSRUdJU1RS\nWSAhPSBudWxsKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICB0bSA9IFJFR0lTVFJZLmdldFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAg\nICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICAg\nICAgZXJyb3JzLmFkZCh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBp\nZiAodG0gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgX3J1bnRpbWUgPSBS\nRUdJU1RSWTsKICAgICAgICAgICAgICAgIHJldHVybiB0bTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKFdMUyAhPSBudWxsKSB7CiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0bSA9IFdMUy5nZXRU\ncmFuc2FjdGlvbk1hbmFnZXIoKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhy\nb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIGVycm9ycy5hZGQodCk7CiAg\nICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRtICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgIF9ydW50aW1lID0gV0xTOwogICAgICAgICAgICAgICAg\ncmV0dXJuIHRtOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBp\nZiAoV0FTICE9IG51bGwpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgIFdBUy5zZXRDb25maWd1cmF0aW9uKF9jb25mKTsKICAgICAgICAg\nICAgICAgIFdBUy5zdGFydENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAg\nICAgIFdBUy5lbmRDb25maWd1cmF0aW9uKCk7CiAgICAgICAgICAgICAgICB0\nbSA9IFdBUy5nZXRUcmFuc2FjdGlvbk1hbmFnZXIoKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIGVycm9y\ncy5hZGQodCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRtICE9\nIG51bGwpIHsKICAgICAgICAgICAgICAgIF9ydW50aW1lID0gV0FTOwogICAg\nICAgICAgICAgICAgcmV0dXJuIHRtOwogICAgICAgICAgICB9CiAgICAgICAg\nfQoKICAgICAgICAvLyB0cnkgdG8gZmluZCBhIGpuZGkgcnVudGltZQogICAg\nICAgIEpORElNYW5hZ2VkUnVudGltZSBqbXIgPSBuZXcgSk5ESU1hbmFnZWRS\ndW50aW1lKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBKTkRJX0xP\nQ1MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgam1yLnNldFRyYW5zYWN0\naW9uTWFuYWdlck5hbWUoSk5ESV9MT0NTW2ldKTsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIHRtID0gam1yLmdldFRyYW5zYWN0aW9uTWFu\nYWdlcigpOwogICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewog\nICAgICAgICAgICAgICAgZXJyb3JzLmFkZCh0KTsKICAgICAgICAgICAgfQog\nICAgICAgICAgICBpZiAodG0gIT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nX3J1bnRpbWUgPSBqbXI7CiAgICAgICAgICAgICAgICByZXR1cm4gdG07CiAg\nICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIGxvb2sgZm9yIGEg\nbWV0aG9kIHJ1bnRpbWUKICAgICAgICBJbnZvY2F0aW9uTWFuYWdlZFJ1bnRp\nbWUgaW1yID0gbmV3IEludm9jYXRpb25NYW5hZ2VkUnVudGltZSgpOwogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTUVUSE9EUy5sZW5ndGg7IGkrKykg\newogICAgICAgICAgICBpbXIuc2V0Q29uZmlndXJhdGlvbihfY29uZik7CiAg\nICAgICAgICAgIGltci5zZXRUcmFuc2FjdGlvbk1hbmFnZXJNZXRob2QoTUVU\nSE9EU1tpXSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0\nbSA9IGltci5nZXRUcmFuc2FjdGlvbk1hbmFnZXIoKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIGVycm9y\ncy5hZGQodCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRtICE9\nIG51bGwpIHsKICAgICAgICAgICAgICAgIF9ydW50aW1lID0gaW1yOwogICAg\nICAgICAgICAgICAgcmV0dXJuIHRtOwogICAgICAgICAgICB9CiAgICAgICAg\nfQoKICAgICAgICBpZiAoU1VOT05FICE9IG51bGwpIHsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIHRtID0gU1VOT05FLmdldFRyYW5zYWN0\naW9uTWFuYWdlcigpOwogICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUg\ndCkgewogICAgICAgICAgICAgICAgZXJyb3JzLmFkZCh0KTsKICAgICAgICAg\nICAgfQogICAgICAgICAgICBpZiAodG0gIT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgX3J1bnRpbWUgPSBTVU5PTkU7CiAgICAgICAgICAgICAgICByZXR1\ncm4gdG07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFRocm93\nYWJsZVtdIHQgPSAoVGhyb3dhYmxlIFtdKSBlcnJvcnMudG9BcnJheSgKICAg\nICAgICAgICAgbmV3IFRocm93YWJsZSBbZXJyb3JzLnNpemUoKV0pOwogICAg\nICAgIHRocm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQo\nInRtLW5vdC1mb3VuZCIpKS4KICAgICAgICAgICAgc2V0RmF0YWwodHJ1ZSku\nc2V0TmVzdGVkVGhyb3dhYmxlcyh0KTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRDb25maWd1cmF0aW9uKENvbmZpZ3VyYXRpb24gY29uZikgewogICAg\nICAgIF9jb25mID0gY29uZjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFy\ndENvbmZpZ3VyYXRpb24oKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgZW5k\nQ29uZmlndXJhdGlvbigpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRS\nb2xsYmFja09ubHkoVGhyb3dhYmxlIGNhdXNlKQogICAgICAgIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgcnVu\ndGltZSBpcyBjYWNoZWQKICAgICAgICBpZiAoX3J1bnRpbWUgPT0gbnVsbCkK\nICAgICAgICAgICAgZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7CgogICAgICAg\nIGlmIChfcnVudGltZSAhPSBudWxsKQogICAgICAgICAgICBfcnVudGltZS5z\nZXRSb2xsYmFja09ubHkoY2F1c2UpOwogICAgfQoKICAgIHB1YmxpYyBUaHJv\nd2FibGUgZ2V0Um9sbGJhY2tDYXVzZSgpCiAgICAgICAgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIHRoZSBydW50aW1l\nIGlzIGNhY2hlZAogICAgICAgIGlmIChfcnVudGltZSA9PSBudWxsKQogICAg\nICAgICAgICBnZXRUcmFuc2FjdGlvbk1hbmFnZXIoKTsKCiAgICAgICAgaWYg\nKF9ydW50aW1lICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBfcnVudGlt\nZS5nZXRSb2xsYmFja0NhdXNlKCk7CgogICAgICAgIHJldHVybiBudWxsOwog\nICAgfQogICAgCiAgICBwdWJsaWMgT2JqZWN0IGdldFRyYW5zYWN0aW9uS2V5\nKCkgdGhyb3dzIEV4Y2VwdGlvbiwgU3lzdGVtRXhjZXB0aW9uIHsKICAgICAg\nICBpZihfcnVudGltZSA9PSBudWxsKSAKICAgICAgICAgICAgZ2V0VHJhbnNh\nY3Rpb25NYW5hZ2VyKCk7CiAgICAgICAgCiAgICAgICAgaWYoX3J1bnRpbWUg\nIT0gbnVsbCApCiAgICAgICAgICAgIHJldHVybiBfcnVudGltZS5nZXRUcmFu\nc2FjdGlvbktleSgpOwogICAgICAgIAogICAgICAgIHJldHVybiBudWxsOwog\nICAgfQoKICAgIC8qKgogICAgICogRGVsZWdhdGUgbm9uVHJhbnNhY3Rpb25h\nbCB3b3JrIHRvIHRoZSBhcHByb3ByaWF0ZSBtYW5hZ2VkIHJ1bnRpbWUuIElm\nIG5vCiAgICAgKiBtYW5hZ2VkIHJ1bnRpbWUgaXMgZm91bmQgdGhlbiBkZWxl\nZ2F0ZSB7QGxpbmsgQWJzdHJhY3RNYW5hZ2VkUnVudGltZX0uCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIGRvTm9uVHJhbnNhY3Rpb25hbFdvcmsoUnVubmFi\nbGUgcnVubmFibGUpCiAgICAgICAgICAgIHRocm93cyBOb3RTdXBwb3J0ZWRF\neGNlcHRpb24gewogICAgICAgIC8vIE9idGFpbiBhIHRyYW5zYWN0aW9uIG1h\nbmFnZXIgdG8gaW5pdGlhbGl6ZSB0aGUgcnVudGltZS4KICAgICAgICB0cnkg\newogICAgICAgICAgICBnZXRUcmFuc2FjdGlvbk1hbmFnZXIoKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBOb3RTdXBw\nb3J0ZWRFeGNlcHRpb24gbnNlID0KICAgICAgICAgICAgICAgIG5ldyBOb3RT\ndXBwb3J0ZWRFeGNlcHRpb24oX2xvYwogICAgICAgICAgICAgICAgICAgICAg\nICAuZ2V0KCJ0bS11bmF2YWlsYWJsZSIsIF9ydW50aW1lKS5nZXRNZXNzYWdl\nKCkpOwogICAgICAgICAgICBuc2UuaW5pdENhdXNlKGUpOwogICAgICAgICAg\nICB0aHJvdyBuc2U7CiAgICAgICAgfQogICAgICAgIF9ydW50aW1lLmRvTm9u\nVHJhbnNhY3Rpb25hbFdvcmsocnVubmFibGUpOwogICAgfQp9Cg==\n","encoding":"base64"}

