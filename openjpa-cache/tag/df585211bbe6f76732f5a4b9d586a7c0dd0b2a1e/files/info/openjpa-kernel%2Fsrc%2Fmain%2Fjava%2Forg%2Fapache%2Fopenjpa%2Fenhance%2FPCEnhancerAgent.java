{"sha":"8c72a7d376189d6ad6bbae552f9ff6ae726b34e3","node_id":"MDQ6QmxvYjIwNjM2NDo4YzcyYTdkMzc2MTg5ZDZhZDZiYmFlNTUyZjlmZjZhZTcyNmIzNGUz","size":5419,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8c72a7d376189d6ad6bbae552f9ff6ae726b34e3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZTsKCmltcG9ydCBq\nYXZhLmxhbmcuaW5zdHJ1bWVudC5JbnN0cnVtZW50YXRpb247CmltcG9ydCBq\nYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CmltcG9ydCBqYXZhLnV0\naWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1\ncmF0aW9uSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29u\nZi5Db25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLk9wdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5DbGFzc1Jlc29sdmVyOwoKLyoqCiAqIDxwPkphdmEg\nYWdlbnQgdGhhdCBtYWtlcyBwZXJzaXN0ZW50IGNsYXNzZXMgd29yayB3aXRo\nIE9wZW5KUEEgYXQgcnVudGltZS4KICogVGhpcyBpcyBhY2hpZXZlZCBieSBl\naXRoZXIgcnVubmluZyB0aGUgZW5oYW5jZXIgb24gdGhlIGNsYXNzZXMgYXMg\ndGhleQogKiBhcmUgbG9hZGVkLCBvciBieSByZWRlZmluaW5nIHRoZSBjbGFz\nc2VzIG9uIHRoZSBmbHkuCiAqIFRoZSBhZ2VudCBpcyBsYXVuY2hlZCBhdCBK\nVk0gc3RhcnR1cCBmcm9tIHRoZSBjb21tYW5kIGxpbmU6PC9wPgogKgogKiA8\ncD48Y29kZT5qYXZhIC1qYXZhYWdlbnQ6b3BlbmpwYS5qYXJbPSZsdDtvcHRp\nb25zJmd0O108L2NvZGU+CiAqICBUaGUgb3B0aW9ucyBzdHJpbmcgc2hvdWxk\nIGJlIGZvcm1hdHRlZCBhcyBhIE9wZW5KUEEgcGx1Z2luLCBhbmQgbWF5CiAq\nIGNvbnRhaW4gYW55IHByb3BlcnRpZXMgdW5kZXJzdG9vZCBieSB0aGUgT3Bl\nbkpQQSBlbmhhbmNlciBvciBhbnkKICogY29uZmlndXJhdGlvbiBwcm9wZXJ0\naWVzLiBGb3IgZXhhbXBsZTo8L3A+CiAqCiAqIDxwPjxjb2RlPmphdmEgLWph\ndmFhZ2VudDpvcGVuanBhLmphcjwvY29kZT48L3A+CiAqCiAqIDxwPkJ5IGRl\nZmF1bHQsIGlmIHNwZWNpZmllZCwgdGhlIGFnZW50IHJ1bnMgdGhlIE9wZW5K\nUEEgZW5oYW5jZXIgb24KICogYWxsIGNsYXNzZXMgbGlzdGVkIGluIHRoZSBm\naXJzdCBwZXJzaXN0ZW5jZSB1bml0IGFzIHRoZXkgYXJlIGxvYWRlZCwKICog\nYW5kIHJlZGVmaW5lcyBhbGwgb3RoZXIgcGVyc2lzdGVudCBjbGFzc2VzIHdo\nZW4gdGhleSBhcmUgZW5jb3VudGVyZWQuCiAqIFRvIGRpc2FibGUgZW5oYW5j\nZW1lbnQgYXQgY2xhc3MtbG9hZCB0aW1lIGFuZCByZWx5IHNvbGVseSBvbiB0\naGUKICogcmVkZWZpbml0aW9uIGxvZ2ljLCBzZXQgdGhlIENsYXNzTG9hZEVu\naGFuY2VtZW50IGZsYWcgdG8gZmFsc2UuIFRvCiAqIGRpc2FibGUgcmVkZWZp\nbml0aW9uIGFuZCByZWx5IHNvbGVseSBvbiBwcmUtZGVwbG95bWVudCBvciBj\nbGFzcy1sb2FkCiAqIGVuaGFuY2VtZW50LCBzZXQgdGhlIFJ1bnRpbWVSZWRl\nZmluaXRpb24gZmxhZyB0byBmYWxzZS4KICogPC9wPgogKgogKiA8cD48Y29k\nZT5qYXZhIC1qYXZhYWdlbnQ6b3BlbmpwYS5qYXI9Q2xhc3NMb2FkRW5oYW5j\nZW1lbnQ9ZmFsc2U8L2NvZGU+PC9wPgogKgogKiBAYXV0aG9yIEFiZSBXaGl0\nZQogKiBAYXV0aG9yIFBhdHJpY2sgTGluc2tleQogKi8KcHVibGljIGNsYXNz\nIFBDRW5oYW5jZXJBZ2VudCB7CgogICAgcHVibGljIHN0YXRpYyB2b2lkIHBy\nZW1haW4oU3RyaW5nIGFyZ3MsIEluc3RydW1lbnRhdGlvbiBpbnN0KSB7CiAg\nICAgICAgT3B0aW9ucyBvcHRzID0gQ29uZmlndXJhdGlvbnMucGFyc2VQcm9w\nZXJ0aWVzKGFyZ3MpOwoKICAgICAgICBpZiAob3B0cy5jb250YWluc0tleSgi\nQ2xhc3NMb2FkRW5oYW5jZW1lbnQiKSB8fAogICAgICAgICAgICBvcHRzLmNv\nbnRhaW5zS2V5KCJjbGFzc0xvYWRFbmhhbmNlbWVudCIpKSB7CiAgICAgICAg\nICAgIGlmIChvcHRzLmdldEJvb2xlYW5Qcm9wZXJ0eSgKICAgICAgICAgICAg\nICAgICJDbGFzc0xvYWRFbmhhbmNlbWVudCIsICJjbGFzc0xvYWRFbmhhbmNl\nbWVudCIsIHRydWUpKQogICAgICAgICAgICAgICAgcmVnaXN0ZXJDbGFzc0xv\nYWRFbmhhbmNlcihpbnN0LCBvcHRzKTsKICAgICAgICB9CiAgICAgICAgZWxz\nZSBpZiAob3B0cy5jb250YWluc0tleSgiUnVudGltZUVuaGFuY2VtZW50Iikg\nfHwKICAgICAgICAgICAgb3B0cy5jb250YWluc0tleSgicnVudGltZUVuaGFu\nY2VtZW50IikpIHsKICAgICAgICAgICAgLy8gRGVwcmVjYXRlZCBwcm9wZXJ0\neSBzZXR0aW5nCiAgICAgICAgICAgIGlmIChvcHRzLmdldEJvb2xlYW5Qcm9w\nZXJ0eSgKICAgICAgICAgICAgICAgICJSdW50aW1lRW5oYW5jZW1lbnQiLCAi\ncnVudGltZUVuaGFuY2VtZW50IiwgdHJ1ZSkpCiAgICAgICAgICAgICAgICBy\nZWdpc3RlckNsYXNzTG9hZEVuaGFuY2VyKGluc3QsIG9wdHMpOwogICAgICAg\nIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGlmIG5laXRoZXIgaXMgc2V0LCB0\naGVuIHdlIHNob3VsZCBiZSB0dXJuaW5nIGl0IG9uLiBXZSBuZWVkIHRoaXMK\nICAgICAgICAgICAgLy8gbG9naWMgaW5zdGVhZCBvZiBqdXN0IGEgZ2V0Qm9v\nbGVhblByb3BlcnR5KCkgYmVjYXVzZSBvZiB0aGUKICAgICAgICAgICAgLy8g\nYmFja3dhcmRzLWNvbXBhdCBsb2dpYyBmbG93LgogICAgICAgICAgICByZWdp\nc3RlckNsYXNzTG9hZEVuaGFuY2VyKGluc3QsIG9wdHMpOwogICAgICAgIH0K\nCiAgICAgICAgaWYgKG9wdHMuZ2V0Qm9vbGVhblByb3BlcnR5KAogICAgICAg\nICAgICAiUnVudGltZVJlZGVmaW5pdGlvbiIsICJydW50aW1lUmVkZWZpbml0\naW9uIiwgdHJ1ZSkpIHsKICAgICAgICAgICAgSW5zdHJ1bWVudGF0aW9uRmFj\ndG9yeS5zZXRJbnN0cnVtZW50YXRpb24oaW5zdCk7CiAgICAgICAgfSBlbHNl\nIHsKICAgICAgICAgICAgSW5zdHJ1bWVudGF0aW9uRmFjdG9yeS5zZXREeW5h\nbWljYWxseUluc3RhbGxBZ2VudChmYWxzZSk7CiAgICAgICAgfQogICAgfQoK\nICAgIHByaXZhdGUgc3RhdGljIHZvaWQgcmVnaXN0ZXJDbGFzc0xvYWRFbmhh\nbmNlcihJbnN0cnVtZW50YXRpb24gaW5zdCwKICAgICAgICBPcHRpb25zIG9w\ndHMpIHsKICAgIAlMaXN0PFN0cmluZz4gYW5jaG9ycyA9IENvbmZpZ3VyYXRp\nb25zLgogICAgICAgICAgICBnZXRGdWxseVF1YWxpZmllZEFuY2hvcnNJblBy\nb3BlcnRpZXNMb2NhdGlvbihvcHRzKTsKICAgIAlmb3IgKFN0cmluZyBhIDog\nYW5jaG9ycykgewogICAgCQlPcHRpb25zIGNsb25lZE9wdGlvbnMgPSAoT3B0\naW9ucykgb3B0cy5jbG9uZSgpOwogICAgCQljbG9uZWRPcHRpb25zLnNldFBy\nb3BlcnR5KCJwcm9wZXJ0aWVzIiwgYSk7CiAgICAJCU9wZW5KUEFDb25maWd1\ncmF0aW9uIGNvbmYgPSBuZXcgT3BlbkpQQUNvbmZpZ3VyYXRpb25JbXBsKCk7\nCiAgICAJCUNvbmZpZ3VyYXRpb25zLnBvcHVsYXRlQ29uZmlndXJhdGlvbihj\nb25mLCBjbG9uZWRPcHRpb25zKTsKICAgIAkJLy8gZG9uJ3QgYWxsb3cgY29u\nbmVjdGlvbnMKICAgIAkJY29uZi5zZXRDb25uZWN0aW9uVXNlck5hbWUobnVs\nbCk7CiAgICAJCWNvbmYuc2V0Q29ubmVjdGlvblBhc3N3b3JkKG51bGwpOwog\nICAgCQljb25mLnNldENvbm5lY3Rpb25VUkwobnVsbCk7CiAgICAJCWNvbmYu\nc2V0Q29ubmVjdGlvbkRyaXZlck5hbWUobnVsbCk7CiAgICAJCWNvbmYuc2V0\nQ29ubmVjdGlvbkZhY3RvcnlOYW1lKG51bGwpOwogICAgCQkvLyBzZXQgc2lu\nZ2xlIGNsYXNzIHJlc29sdmVyCiAgICAJCWZpbmFsIENsYXNzTG9hZGVyIHRt\ncExvYWRlciA9IChDbGFzc0xvYWRlcikgQWNjZXNzQ29udHJvbGxlcgogICAg\nCQkgICAgLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlcgogICAgCQkgICAg\nLm5ld1RlbXBvcmFyeUNsYXNzTG9hZGVyQWN0aW9uKChDbGFzc0xvYWRlcikg\nQWNjZXNzQ29udHJvbGxlcgogICAgCQkgICAgLmRvUHJpdmlsZWdlZChKMkRv\nUHJpdkhlbHBlci5nZXRDb250ZXh0Q2xhc3NMb2FkZXJBY3Rpb24oKSkKICAg\nIAkJICAgICkpOwogICAgCQljb25mLnNldENsYXNzUmVzb2x2ZXIobmV3IENs\nYXNzUmVzb2x2ZXIoKSB7CiAgICAJCSAgICBwdWJsaWMgQ2xhc3NMb2FkZXIg\nZ2V0Q2xhc3NMb2FkZXIoQ2xhc3MgY29udGV4dCwKICAgICAgICAgICAgICAg\nICAgICBDbGFzc0xvYWRlciBlbnYpIHsKICAgIAkJICAgICAgICByZXR1cm4g\ndG1wTG9hZGVyOwogICAgCQkgICAgfQogICAgCQl9KTsKICAgIAkJY29uZi5z\nZXRSZWFkT25seShDb25maWd1cmF0aW9uLklOSVRfU1RBVEVfRlJFRVpJTkcp\nOwogICAgCQljb25mLmluc3RhbnRpYXRlQWxsKCk7IC8vIGF2b2lkIHRocmVh\nZGluZyBpc3N1ZXMKCiAgICAJCVBDQ2xhc3NGaWxlVHJhbnNmb3JtZXIgdHJh\nbnNmb3JtZXIgPSBuZXcgUENDbGFzc0ZpbGVUcmFuc2Zvcm1lcgogICAgCQkg\nICAgKGNvbmYubmV3TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKSwgY2xv\nbmVkT3B0aW9ucywKICAgIAkJICAgIHRtcExvYWRlcik7CiAgICAJCWluc3Qu\nYWRkVHJhbnNmb3JtZXIodHJhbnNmb3JtZXIpOwogICAgCQljb25mLmNsb3Nl\nKCk7CiAgICAJfQogICAgfQp9Cg==\n","encoding":"base64"}

