{"sha":"8704a443acdeb3af91d2b0393fa188d4642bc293","node_id":"MDQ6QmxvYjIwNjM2NDo4NzA0YTQ0M2FjZGViM2FmOTFkMmIwMzkzZmExODhkNDY0MmJjMjkz","size":5022,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8704a443acdeb3af91d2b0393fa188d4642bc293","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YTsKCmltcG9ydCBvcmcu\nYXBhY2hlLmNvbW1vbnMuY29sbGVjdGlvbnMuYmlkaW1hcC5UcmVlQmlkaU1h\ncDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25m\naWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5TdHJpbmdEaXN0YW5jZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLk1ldGFEYXRhRXhjZXB0aW9uOwppbXBvcnQgc2VycC51dGlsLk51bWJl\ncnM7CgovKioKICogU3RyYXRlZ2llcyBmb3IgcGVyc2lzdGVudCB2YWx1ZSBn\nZW5lcmF0aW9uLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAc2luY2Ug\nMC40LjAKICovCnB1YmxpYyBjbGFzcyBWYWx1ZVN0cmF0ZWdpZXMgewoKICAg\nIC8qKgogICAgICogTm8gdmFsdWUgc3RyYXRlZ3kuCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgaW50IE5PTkUgPSAwOwoKICAgIC8qKgogICAg\nICogIm5hdGl2ZSIgdmFsdWUgc3RyYXRlZ3kuCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgZmluYWwgaW50IE5BVElWRSA9IDE7CgogICAgLyoqCiAgICAg\nKiAic2VxdWVuY2UiIHZhbHVlIHN0cmF0ZWd5LgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIGZpbmFsIGludCBTRVFVRU5DRSA9IDI7CgogICAgLyoqCiAg\nICAgKiAiYXV0b2Fzc2lnbmVkIiB2YWx1ZSBzdHJhdGVneS4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQVVUT0FTU0lHTiA9IDM7Cgog\nICAgLyoqCiAgICAgKiAiaW5jcmVtZW50IiB2YWx1ZSBzdHJhdGVneS4KICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgSU5DUkVNRU5UID0g\nNDsKCiAgICAvKioKICAgICAqICJ1dWlkLXN0cmluZyIgdmFsdWUgc3RyYXRl\nZ3kuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFVVSURf\nU1RSSU5HID0gNTsKCiAgICAvKioKICAgICAqICJ1dWlkLWhleCIgdmFsdWUg\nc3RyYXRlZ3kuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50\nIFVVSURfSEVYID0gNjsKCiAgICAvKioKICAgICAqICJ1dWlkLXR5cGU0LXN0\ncmluZyIgdmFsdWUgc3RyYXRlZ3kuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgaW50IFVVSURfVFlQRTRfU1RSSU5HID0gNzsKCiAgICAvKioK\nICAgICAqICJ1dWlkLXR5cGU0LWhleCIgdmFsdWUgc3RyYXRlZ3kuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFVVSURfVFlQRTRfSEVY\nID0gODsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xv\nYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFZhbHVlU3RyYXRl\nZ2llcy5jbGFzcyk7CgogICAgLy8gdGFibGUgb2YgbmFtZXMgYW5kIHN0cmF0\nZWdpZXMKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFRyZWVCaWRpTWFwIF9t\nYXAgPSBuZXcgVHJlZUJpZGlNYXAoKTsKCiAgICBzdGF0aWMgewogICAgICAg\nIF9tYXAucHV0KCJub25lIiwgTnVtYmVycy52YWx1ZU9mKE5PTkUpKTsKICAg\nICAgICBfbWFwLnB1dCgibmF0aXZlIiwgTnVtYmVycy52YWx1ZU9mKE5BVElW\nRSkpOwogICAgICAgIF9tYXAucHV0KCJzZXF1ZW5jZSIsIE51bWJlcnMudmFs\ndWVPZihTRVFVRU5DRSkpOwogICAgICAgIF9tYXAucHV0KCJhdXRvYXNzaWdu\nIiwgTnVtYmVycy52YWx1ZU9mKEFVVE9BU1NJR04pKTsKICAgICAgICBfbWFw\nLnB1dCgiaW5jcmVtZW50IiwgTnVtYmVycy52YWx1ZU9mKElOQ1JFTUVOVCkp\nOwogICAgICAgIF9tYXAucHV0KCJ1dWlkLXN0cmluZyIsIE51bWJlcnMudmFs\ndWVPZihVVUlEX1NUUklORykpOwogICAgICAgIF9tYXAucHV0KCJ1dWlkLWhl\neCIsIE51bWJlcnMudmFsdWVPZihVVUlEX0hFWCkpOwogICAgICAgIF9tYXAu\ncHV0KCJ1dWlkLXR5cGU0LXN0cmluZyIsIE51bWJlcnMudmFsdWVPZihVVUlE\nX1RZUEU0X1NUUklORykpOwogICAgICAgIF9tYXAucHV0KCJ1dWlkLXR5cGU0\nLWhleCIsIE51bWJlcnMudmFsdWVPZihVVUlEX1RZUEU0X0hFWCkpOwogICAg\nfQoKICAgIC8qKgogICAgICogQ29udmVydCB0aGUgZ2l2ZW4gc3RyYXRlZ3kg\ndG8gYSBuYW1lLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBn\nZXROYW1lKGludCBzdHJhdGVneSkgewogICAgICAgIE9iamVjdCBjb2RlID0g\nTnVtYmVycy52YWx1ZU9mKHN0cmF0ZWd5KTsKICAgICAgICBTdHJpbmcgbmFt\nZSA9IChTdHJpbmcpIF9tYXAuZ2V0S2V5KGNvZGUpOwogICAgICAgIGlmIChu\nYW1lICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBuYW1lOwogICAgICAg\nIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oY29kZS50b1N0\ncmluZygpKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIGdp\ndmVuIHN0cmF0ZWd5IG5hbWUgdG8gaXRzIGNvbnN0YW50LgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIGludCBnZXRDb2RlKFN0cmluZyB2YWwsIE9iamVj\ndCBjb250ZXh0KSB7CiAgICAgICAgaWYgKHZhbCA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gTk9ORTsKICAgICAgICBPYmplY3QgY29kZSA9IF9tYXAu\nZ2V0KHZhbCk7CiAgICAgICAgaWYgKGNvZGUgIT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuICgoTnVtYmVyKSBjb2RlKS5pbnRWYWx1ZSgpOwoKICAgICAg\nICAvLyBub3QgYSByZWNvZ25pemVkIHN0cmF0ZWd5OyBjaGVjayBmb3IgdHlw\nbwogICAgICAgIFN0cmluZyBjbG9zZXN0ID0gU3RyaW5nRGlzdGFuY2UuZ2V0\nQ2xvc2VzdExldmVuc2h0ZWluRGlzdGFuY2UodmFsLAogICAgICAgICAgICBf\nbWFwLmtleVNldCgpLCAuNUYpOwogICAgICAgIFN0cmluZyBtc2c7CiAgICAg\nICAgaWYgKGNsb3Nlc3QgIT0gbnVsbCkKICAgICAgICAgICAgbXNnID0gX2xv\nYy5nZXQoImJhZC12YWx1ZS1zdHJhdGVneS1oaW50IiwgbmV3IE9iamVjdFtd\newogICAgICAgICAgICAgICAgY29udGV4dCwgdmFsLCBjbG9zZXN0LCBfbWFw\nLmtleVNldCgpIH0pLmdldE1lc3NhZ2UoKTsKICAgICAgICBlbHNlCiAgICAg\nICAgICAgIG1zZyA9IF9sb2MuZ2V0KCJiYWQtdmFsdWUtc3RyYXRlZ3kiLCBj\nb250ZXh0LCB2YWwsIF9tYXAua2V5U2V0KCkpCiAgICAgICAgICAgICAgICAu\nZ2V0TWVzc2FnZSgpOwogICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24obXNnKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFzc2Vy\ndCB0aGF0IHRoZSBnaXZlbiBzdHJhdGVneSBpcyBzdXBwb3J0ZWQgYnkgdGhl\nIGN1cnJlbnQgcnVudGltZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2\nb2lkIGFzc2VydFN1cHBvcnRlZChpbnQgc3RyYXRlZ3ksIE1ldGFEYXRhQ29u\ndGV4dCBjb250ZXh0LAogICAgICAgIFN0cmluZyBhdHRyaWJ1dGVOYW1lKSB7\nCiAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IGNvbnRleHQu\nZ2V0UmVwb3NpdG9yeSgpLmdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBi\nb29sZWFuIHN1cHBvcnRlZCA9IHRydWU7CiAgICAgICAgc3dpdGNoIChzdHJh\ndGVneSkgewogICAgICAgICAgICBjYXNlIEFVVE9BU1NJR046CiAgICAgICAg\nICAgICAgICBzdXBwb3J0ZWQgPSBjb25mLnN1cHBvcnRlZE9wdGlvbnMoKS5j\nb250YWlucwogICAgICAgICAgICAgICAgICAgIChPcGVuSlBBQ29uZmlndXJh\ndGlvbi5PUFRJT05fVkFMVUVfQVVUT0FTU0lHTik7CiAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICAgICAgY2FzZSBJTkNSRU1FTlQ6CiAgICAgICAg\nICAgICAgICBzdXBwb3J0ZWQgPSBjb25mLnN1cHBvcnRlZE9wdGlvbnMoKS5j\nb250YWlucwogICAgICAgICAgICAgICAgICAgIChPcGVuSlBBQ29uZmlndXJh\ndGlvbi5PUFRJT05fVkFMVUVfSU5DUkVNRU5UKTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBjYXNlIE5BVElWRToKICAgICAgICAgICAg\nICAgIHN1cHBvcnRlZCA9IGNvbnRleHQgaW5zdGFuY2VvZiBDbGFzc01ldGFE\nYXRhOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAg\nIGlmICghc3VwcG9ydGVkKQogICAgICAgICAgICB0aHJvdyBuZXcgTWV0YURh\ndGFFeGNlcHRpb24oX2xvYy5nZXQoInVuc3VwcG9ydGVkLXZhbHVlLXN0cmF0\nZWd5IiwKICAgICAgICAgICAgICAgIGNvbnRleHQsIGdldE5hbWUoc3RyYXRl\nZ3kpLCBhdHRyaWJ1dGVOYW1lKSk7Cgl9Cn0K\n","encoding":"base64"}

