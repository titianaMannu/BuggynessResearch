{"sha":"8879de04bde32573ee2ecdaa251926c75b0bf7a9","node_id":"MDQ6QmxvYjIwNjM2NDo4ODc5ZGUwNGJkZTMyNTczZWUyZWNkYWEyNTE5MjZjNzViMGJmN2E5","size":4529,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8879de04bde32573ee2ecdaa251926c75b0bf7a9","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbDsNCg0KaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlOw0KDQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlJlZmVyZW5jZU1hcDsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVu\ndC5Db25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcDsNCg0KLyoqDQogKiBJZGVu\ndGl0eSBjbGFzcyBleHRlbmRlZCBieSBidWlsdGluIE9wZW5KUEEgaWRlbnRp\ndHkgb2JqZWN0cy4NCiAqDQogKiBAYXV0aG9yIFN0ZXZlIEtpbQ0KICovDQpw\ndWJsaWMgYWJzdHJhY3QgY2xhc3MgT3BlbkpQQUlkDQogICAgaW1wbGVtZW50\ncyBDb21wYXJhYmxlLCBTZXJpYWxpemFibGUgew0KDQogICAgLy8gY2FjaGUg\ndGhlIHR5cGVzJyBnZW5lcmF0ZWQgaGFzaGNvZGVzDQogICAgcHJpdmF0ZSBz\ndGF0aWMgQ29uY3VycmVudFJlZmVyZW5jZUhhc2hNYXAgX3R5cGVDYWNoZSA9\nDQogICAgICAgIG5ldyBDb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcChSZWZl\ncmVuY2VNYXAuV0VBSywgUmVmZXJlbmNlTWFwLkhBUkQpOw0KDQogICAgcHJv\ndGVjdGVkIENsYXNzIHR5cGU7DQogICAgcHJvdGVjdGVkIGJvb2xlYW4gc3Vi\ncyA9IHRydWU7DQoNCiAgICAvLyB0eXBlIGhhcyBoaXMgYmFzZWQgb24gdGhl\nIGxlYXN0LWRlcml2ZWQgbm9uLW9iamVjdCBjbGFzcyBzbyB0aGF0DQogICAg\nLy8gdXNlci1naXZlbiBpZHMgd2l0aCBub24tZXhhY3QgdHlwZXMgbWF0Y2gg\naWRzIHdpdGggZXhhY3QgdHlwZXMNCiAgICBwcml2YXRlIHRyYW5zaWVudCBp\nbnQgX3R5cGVIYXNoID0gMDsNCg0KICAgIHByb3RlY3RlZCBPcGVuSlBBSWQo\nKSB7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIE9wZW5KUEFJZChDbGFzcyB0\neXBlKSB7DQogICAgICAgIHRoaXMudHlwZSA9IHR5cGU7DQogICAgfQ0KDQog\nICAgcHJvdGVjdGVkIE9wZW5KUEFJZChDbGFzcyB0eXBlLCBib29sZWFuIHN1\nYnMpIHsNCiAgICAgICAgdGhpcy50eXBlID0gdHlwZTsNCiAgICAgICAgdGhp\ncy5zdWJzID0gc3ViczsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBSZXR1\ncm4gdGhlIHBlcnNpc3RlbnQgY2xhc3Mgd2hpY2ggdGhpcyBpZCBpbnN0YW5j\nZSByZXByZXNlbnRzLg0KICAgICAqLw0KICAgIHB1YmxpYyBDbGFzcyBnZXRU\neXBlKCkgew0KICAgICAgICByZXR1cm4gdHlwZTsNCiAgICB9DQoNCiAgICAv\nKioNCiAgICAgKiBXaGV0aGVyIHRoaXMgb2lkIG1pZ2h0IGJlIGZvciBhIHN1\nYmNsYXNzIG9mIHRoZSBnaXZlbiB0eXBlLg0KICAgICAqIERlZmF1bHRzIHRv\nIHRydWUuDQogICAgICovDQogICAgcHVibGljIGJvb2xlYW4gaGFzU3ViY2xh\nc3NlcygpIHsNCiAgICAgICAgcmV0dXJuIHN1YnM7DQogICAgfQ0KDQogICAg\nLyoqDQogICAgICogU2V0IHRoZSBleGFjdCB0eXBlIG9mIHRoZSBkZXNjcmli\nZWQgaW5zdGFuY2Ugb25jZSBpdCBpcyBrbm93bi4NCiAgICAgKi8NCiAgICBw\ndWJsaWMgdm9pZCBzZXRNYW5hZ2VkSW5zdGFuY2VUeXBlKENsYXNzIHR5cGUp\nIHsNCiAgICAgICAgc2V0TWFuYWdlZEluc3RhbmNlVHlwZSh0eXBlLCBmYWxz\nZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0IHRoZSBleGFjdCB0\neXBlIG9mIHRoZSBkZXNjcmliZWQgaW5zdGFuY2Ugb25jZSBpdCBpcyBrbm93\nbi4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBzZXRNYW5hZ2VkSW5zdGFu\nY2VUeXBlKENsYXNzIHR5cGUsIGJvb2xlYW4gc3Vicykgew0KICAgICAgICB0\naGlzLnR5cGUgPSB0eXBlOw0KICAgICAgICB0aGlzLnN1YnMgPSBzdWJzOw0K\nICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJldHVybiB0aGUgaWRlbnRpdHkg\ndmFsdWUgYXMgYW4gb2JqZWN0Lg0KICAgICAqLw0KICAgIHB1YmxpYyBhYnN0\ncmFjdCBPYmplY3QgZ2V0SWRPYmplY3QoKTsNCg0KICAgIC8qKg0KICAgICAq\nIFJldHVybiB0aGUgaWQncyBoYXNoIGNvZGUuDQogICAgICovDQogICAgcHJv\ndGVjdGVkIGFic3RyYWN0IGludCBpZEhhc2goKTsNCg0KICAgIC8qKg0KICAg\nICAqIENvbXBhcmUgdGhlIGlkIHRvIHRoZSBpZCBvZiB0aGUgZ2l2ZW4gaW5z\ndGFuY2UuDQogICAgICovDQogICAgcHJvdGVjdGVkIGFic3RyYWN0IGJvb2xl\nYW4gaWRFcXVhbHMoT3BlbkpQQUlkIG90aGVyKTsNCg0KICAgIC8qKg0KICAg\nICAqIEdlbmVyYXRlIHRoZSBoYXNoY29kZSBmb3IgdGhpcyBJZC4gIENhY2hl\nIHRoZSB0eXBlJ3MgZ2VuZXJhdGVkIGhhc2hjb2RlDQogICAgICogc28gdGhh\ndCBpdCBkb2Vzbid0IGhhdmUgdG8gYmUgZ2VuZXJhdGVkIGVhY2ggdGltZS4N\nCiAgICAgKi8NCiAgICBwdWJsaWMgaW50IGhhc2hDb2RlKCkgew0KICAgICAg\nICBpZiAoX3R5cGVIYXNoID09IDApIHsNCiAgICAgICAgICAgIEludGVnZXIg\ndHlwZUhhc2hJbnQgPSAoSW50ZWdlcikgX3R5cGVDYWNoZS5nZXQodHlwZSk7\nDQogICAgICAgICAgICBpZiAodHlwZUhhc2hJbnQgPT0gbnVsbCkgew0KICAg\nICAgICAgICAgICAgIENsYXNzIGJhc2UgPSB0eXBlOw0KICAgICAgICAgICAg\nICAgIENsYXNzIHN1cGVyY2xhc3MgPSBiYXNlLmdldFN1cGVyY2xhc3MoKTsN\nCiAgICAgICAgICAgICAgICB3aGlsZSAoc3VwZXJjbGFzcyAhPSBudWxsICYm\nIHN1cGVyY2xhc3MgIT0gT2JqZWN0LmNsYXNzKSB7DQogICAgICAgICAgICAg\nICAgICAgIGJhc2UgPSBiYXNlLmdldFN1cGVyY2xhc3MoKTsNCiAgICAgICAg\nICAgICAgICAgICAgc3VwZXJjbGFzcyA9IGJhc2UuZ2V0U3VwZXJjbGFzcygp\nOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBfdHlwZUhh\nc2ggPSBiYXNlLmhhc2hDb2RlKCk7DQogICAgICAgICAgICAgICAgX3R5cGVD\nYWNoZS5wdXQodHlwZSwgbmV3IEludGVnZXIoX3R5cGVIYXNoKSk7DQogICAg\nICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIF90eXBlSGFzaCA9\nIHR5cGVIYXNoSW50LmludFZhbHVlKCk7DQogICAgICAgICAgICB9DQogICAg\nICAgIH0NCiAgICAgICAgcmV0dXJuIF90eXBlSGFzaCBeIGlkSGFzaCgpOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGVxdWFscyhPYmplY3Qgbykg\new0KICAgICAgICBpZiAobyA9PSB0aGlzKQ0KICAgICAgICAgICAgcmV0dXJu\nIHRydWU7DQogICAgICAgIGlmIChvID09IG51bGwgfHwgZ2V0Q2xhc3MoKSAh\nPSBvLmdldENsYXNzKCkpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQoN\nCiAgICAgICAgT3BlbkpQQUlkIGlkID0gKE9wZW5KUEFJZCkgbzsNCiAgICAg\nICAgcmV0dXJuIGlkRXF1YWxzKGlkKSAmJiAoaWQudHlwZS5pc0Fzc2lnbmFi\nbGVGcm9tKHR5cGUpDQogICAgICAgICAgICB8fCAoc3VicyAmJiB0eXBlLmlz\nQXNzaWduYWJsZUZyb20oaWQudHlwZSkpKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgU3RyaW5nIHRvU3RyaW5nKCkgew0KICAgICAgICByZXR1cm4gdHlwZS5n\nZXROYW1lKCkgKyAiLSIgKyBnZXRJZE9iamVjdCgpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyBpbnQgY29tcGFyZVRvKE9iamVjdCBvdGhlcikgew0KICAgICAg\nICBpZiAob3RoZXIgPT0gdGhpcykNCiAgICAgICAgICAgIHJldHVybiAwOw0K\nICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVy\nbiAxOw0KICAgICAgICByZXR1cm4gKChDb21wYXJhYmxlKSBnZXRJZE9iamVj\ndCgpKS5jb21wYXJlVG8oKChPcGVuSlBBSWQpIG90aGVyKS4NCiAgICAgICAg\nICAgIGdldElkT2JqZWN0ICgpKTsNCgl9DQp9DQo=\n","encoding":"base64"}

