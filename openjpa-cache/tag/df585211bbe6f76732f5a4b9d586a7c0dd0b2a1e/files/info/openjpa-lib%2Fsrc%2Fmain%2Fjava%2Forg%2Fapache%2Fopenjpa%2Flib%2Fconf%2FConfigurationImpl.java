{"sha":"9cddb36180d30ef9fb6c78dfe2601b3c4020e21f","node_id":"MDQ6QmxvYjIwNjM2NDo5Y2RkYjM2MTgwZDMwZWY5ZmI2Yzc4ZGZlMjYwMWIzYzQwMjBlMjFm","size":34155,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9cddb36180d30ef9fb6c78dfe2601b3c4020e21f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\namF2YS5hd3QuKjsKaW1wb3J0IGphdmEuYmVhbnMuQmVhbkRlc2NyaXB0b3I7\nCmltcG9ydCBqYXZhLmJlYW5zLkJlYW5JbmZvOwppbXBvcnQgamF2YS5iZWFu\ncy5FdmVudFNldERlc2NyaXB0b3I7CmltcG9ydCBqYXZhLmJlYW5zLkludHJv\nc3BlY3Rpb25FeGNlcHRpb247CmltcG9ydCBqYXZhLmJlYW5zLkludHJvc3Bl\nY3RvcjsKaW1wb3J0IGphdmEuYmVhbnMuTWV0aG9kRGVzY3JpcHRvcjsKaW1w\nb3J0IGphdmEuYmVhbnMuUHJvcGVydHlDaGFuZ2VMaXN0ZW5lcjsKaW1wb3J0\nIGphdmEuYmVhbnMuUHJvcGVydHlDaGFuZ2VTdXBwb3J0OwppbXBvcnQgamF2\nYS5iZWFucy5Qcm9wZXJ0eURlc2NyaXB0b3I7CmltcG9ydCBqYXZhLmlvLkV4\ndGVybmFsaXphYmxlOwppbXBvcnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uT2JqZWN0SW5wdXQ7\nCmltcG9ydCBqYXZhLmlvLk9iamVjdE91dHB1dDsKaW1wb3J0IGphdmEuaW8u\nUHJpbnRXcml0ZXI7CmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKaW1w\nb3J0IGphdmEuaW8uU3RyaW5nV3JpdGVyOwppbXBvcnQgamF2YS5sYW5nLnJl\nZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5J\nbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uOwppbXBvcnQgamF2YS5sYW5nLnJl\nZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250\ncm9sbGVyOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsK\naW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGphdmEudXRp\nbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQg\namF2YS51dGlsLkxpbmtlZEhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuTWlz\nc2luZ1Jlc291cmNlRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLlByb3Bl\ncnRpZXM7CmltcG9ydCBqYXZhLnV0aWwuVHJlZVNldDsKCmltcG9ydCBvcmcu\nYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIubG9nLkxvZ0ZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLmxvZy5Mb2dGYWN0b3J5SW1wbDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIubG9nLk5vbmVMb2dGYWN0b3J5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkNsb3NlYWJsZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTXVsdGlDbGFz\nc0xvYWRlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Q\nYXJzZUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5TZXJ2aWNlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5TdHJpbmdEaXN0YW5jZTsKaW1wb3J0IHNlcnAudXRpbC5TdHJpbmdz\nOwoKLyoqCiAqIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIHtAbGlu\nayBDb25maWd1cmF0aW9ufSBpbnRlcmZhY2UuCiAqIFN1YmNsYXNzZXMgY2Fu\nIGNob29zZSB0byBvYnRhaW4gY29uZmlndXJhdGlvbgogKiBpbmZvcm1hdGlv\nbiBmcm9tIEpOREksIFByb3BlcnRpZXMsIGEgQmVhbi1idWlsZGVyLCBldGMu\nIFRoaXMgY2xhc3MKICogcHJvdmlkZXMgYmFzZSBjb25maWd1cmF0aW9uIGZ1\nbmN0aW9uYWxpdHksIGluY2x1ZGluZyBzZXJpYWxpemF0aW9uLAogKiB0aGUg\nPGNvZGU+ZXF1YWxzPC9jb2RlPiBhbmQgPGNvZGU+aGFzaENvZGU8L2NvZGU+\nIGNvbnRyYWN0cywgYW5kIGRlZmF1bHQKICogcHJvcGVydHkgbG9hZGluZy4K\nICogUHJvcGVydHkgZGVzY3JpcHRvcnMgZm9yIHtAbGluayBWYWx1ZX0gaW5z\ndGFuY2VzIGFyZSBjb25zdHJ1Y3RlZCBmcm9tCiAqIHRoZSB7QGxpbmsgTG9j\nYWxpemVyfSBmb3IgdGhlIHBhY2thZ2Ugb2YgdGhlIGNvbmZpZ3VyYXRpb24g\nY2xhc3MuIFRoZQogKiBmb2xsb3dpbmcgbG9jYWxpemVkIHN0cmluZ3Mgd2ls\nbCBiZSB1c2VkIGZvciBkZXNjcmliaW5nIGEgdmFsdWUsIHdoZXJlCiAqIDxl\nbT5uYW1lPC9lbT4gaXMgdGhlIGxhc3QgdG9rZW4gb2YgdGhlIHZhbHVlJ3Mg\ncHJvcGVydHkgc3RyaW5nOgogKiA8dWw+CiAqIDxsaT48ZW0+bmFtZTwvZW0+\nLW5hbWU6IFRoZSBuYW1lIHRoYXQgd2lsbCBiZSBkaXNwbGF5ZWQgZm9yIHRo\nZQogKiBvcHRpb24gaW4gYSB1c2VyIGludGVyZmFjZTsgcmVxdWlyZWQuPC9s\naT4KICogPGxpPjxlbT5uYW1lPC9lbT4tZGVzYzogQSBicmllZiBkZXNjcmlw\ndGlvbiBvZiB0aGUgb3B0aW9uOyByZXF1aXJlZC48L2xpPgogKiA8bGk+PGVt\nPm5hbWU8L2VtPi10eXBlOiBUaGUgdHlwZSBvciBjYXRlZ29yeSBuYW1lIGZv\nciB0aGlzIG9wdGlvbjsKICogcmVxdWlyZWQuPC9saT4KICogPGxpPjxlbT5u\nYW1lPC9lbT4tZXhwZXJ0OiBUcnVlIGlmIHRoaXMgaXMgYW4gZXhwZXJ0IG9w\ndGlvbiwgZmFsc2UKICogb3RoZXJ3aXNlOyBkZWZhdWx0cyB0byBmYWxzZS48\nL2xpPgogKiA8bGk+PGVtPm5hbWU8L2VtPi12YWx1ZXM6IFNldCBvZiBleHBl\nY3RlZCBvciBjb21tb24gdmFsdWVzLCBleGNsdWRpbmcKICogYWxpYXMga2V5\nczsgb3B0aW9uYWwuPC9saT4KICogPGxpPjxlbT5uYW1lPC9lbT4taW50ZXJm\nYWNlOiBUaGUgY2xhc3MgbmFtZSBvZiBhbiBpbnRlcmZhY2Ugd2hvc2UKICog\nZGlzY292ZXJhYmxlIGltcGxlbWVudGF0aW9ucyBzaG91bGQgYmUgaW5jbHVk\nZWQgaW4gdGhlIHNldCBvZiBleHBlY3RlZAogKiBvciBjb21tb24gdmFsdWVz\nOyBvcHRpb25hbC48L2xpPgogKiA8bGk+PGVtPm5hbWU8L2VtPi1jYXQ6IFRo\nZSBoaWVyYXJjaGljYWwgY2F0ZWdvcnkgZm9yIHRoZSBwcm9wZXJ0eQogKiBu\nYW1lLCBzZXBhcmF0ZWQgYnkgIi4iLgogKiA8bGk+PGVtPm5hbWU8L2VtPi1k\naXNwbGF5b3JkZXI6IFRoZSBvcmRlciBpbiB3aGljaCB0aGUgcHJvcGVydHkg\nc2hvdWxkCiAqIGJlIGRpc3BsYXllci48L2xpPgogKiA8L3VsPgogKgogKiBA\nYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIENvbmZpZ3VyYXRp\nb25JbXBsCiAgICBpbXBsZW1lbnRzIENvbmZpZ3VyYXRpb24sIEV4dGVybmFs\naXphYmxlLCBWYWx1ZUxpc3RlbmVyIHsKCiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBTdHJpbmcgU0VQID0gSjJEb1ByaXZIZWxwZXIuZ2V0TGluZVNlcGFy\nYXRvcigpOwoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBf\nbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoQ29uZmlndXJh\ndGlvbkltcGwuY2xhc3MpOwoKICAgIHB1YmxpYyBPYmplY3RWYWx1ZSBsb2dG\nYWN0b3J5UGx1Z2luOwogICAgcHVibGljIFN0cmluZ1ZhbHVlIGlkOwoKICAg\nIHByaXZhdGUgU3RyaW5nIF9wcm9kdWN0ID0gbnVsbDsKICAgIHByaXZhdGUg\naW50IF9yZWFkT25seVN0YXRlID0gSU5JVF9TVEFURV9MSVFVSUQ7CiAgICBw\ncml2YXRlIE1hcCBfcHJvcHMgPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFu\nIF9nbG9iYWxzID0gZmFsc2U7CiAgICBwcml2YXRlIFN0cmluZyBfYXV0byA9\nIG51bGw7CiAgICBwcml2YXRlIGZpbmFsIExpc3QgX3ZhbHMgPSBuZXcgQXJy\nYXlMaXN0KCk7CgogICAgLy8gcHJvcGVydHkgbGlzdGVuZXIgaGVscGVyCiAg\nICBwcml2YXRlIFByb3BlcnR5Q2hhbmdlU3VwcG9ydCBfY2hhbmdlU3VwcG9y\ndCA9IG51bGw7CgogICAgLy8gY2FjaGUgZGVzY3JpcHRvcnMKICAgIHByaXZh\ndGUgUHJvcGVydHlEZXNjcmlwdG9yW10gX3BkcyA9IG51bGw7CiAgICBwcml2\nYXRlIE1ldGhvZERlc2NyaXB0b3JbXSBfbWRzID0gbnVsbDsKCiAgICAvKioK\nICAgICAqIERlZmF1bHQgY29uc3RydWN0b3IuIEF0dGVtcHRzIHRvIGxvYWQg\nZGVmYXVsdCBwcm9wZXJ0aWVzIHRocm91Z2gKICAgICAqIHN5c3RlbSdzIGNv\nbmZpZ3VyZWQge0BsaW5rIFByb2R1Y3REZXJpdmF0aW9ufXMuCiAgICAgKi8K\nICAgIHB1YmxpYyBDb25maWd1cmF0aW9uSW1wbCgpIHsKICAgICAgICB0aGlz\nKHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuCiAg\nICAgKgogICAgICogQHBhcmFtIGxvYWRHbG9iYWxzIHdoZXRoZXIgdG8gYXR0\nZW1wdCB0byBsb2FkIHRoZSBnbG9iYWwgcHJvcGVydGllcwogICAgICovCiAg\nICBwdWJsaWMgQ29uZmlndXJhdGlvbkltcGwoYm9vbGVhbiBsb2FkR2xvYmFs\ncykgewogICAgICAgIHNldFByb2R1Y3ROYW1lKCJvcGVuanBhIik7CgogICAg\nICAgIGxvZ0ZhY3RvcnlQbHVnaW4gPSBhZGRQbHVnaW4oIkxvZyIsIHRydWUp\nOwogICAgICAgIFN0cmluZ1tdIGFsaWFzZXMgPSBuZXcgU3RyaW5nW117CiAg\nICAgICAgICAgICJ0cnVlIiwgTG9nRmFjdG9yeUltcGwuY2xhc3MuZ2V0TmFt\nZSgpLAogICAgICAgICAgICAib3BlbmpwYSIsIExvZ0ZhY3RvcnlJbXBsLmNs\nYXNzLmdldE5hbWUoKSwKICAgICAgICAgICAgImNvbW1vbnMiLCAib3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi5sb2cuQ29tbW9uc0xvZ0ZhY3RvcnkiLAogICAg\nICAgICAgICAibG9nNGoiLCAib3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cu\nTG9nNEpMb2dGYWN0b3J5IiwKICAgICAgICAgICAgIm5vbmUiLCBOb25lTG9n\nRmFjdG9yeS5jbGFzcy5nZXROYW1lKCksCiAgICAgICAgICAgICJmYWxzZSIs\nIE5vbmVMb2dGYWN0b3J5LmNsYXNzLmdldE5hbWUoKSwKICAgICAgICB9Owog\nICAgICAgIGxvZ0ZhY3RvcnlQbHVnaW4uc2V0QWxpYXNlcyhhbGlhc2VzKTsK\nICAgICAgICBsb2dGYWN0b3J5UGx1Z2luLnNldERlZmF1bHQoYWxpYXNlc1sw\nXSk7CiAgICAgICAgbG9nRmFjdG9yeVBsdWdpbi5zZXRTdHJpbmcoYWxpYXNl\nc1swXSk7CiAgICAgICAgbG9nRmFjdG9yeVBsdWdpbi5zZXRJbnN0YW50aWF0\naW5nR2V0dGVyKCJnZXRMb2dGYWN0b3J5Iik7CgogICAgICAgIGlkID0gYWRk\nU3RyaW5nKCJJZCIpOwogICAgICAgIAogICAgICAgIGlmIChsb2FkR2xvYmFs\ncykKICAgICAgICAgICAgbG9hZEdsb2JhbHMoKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEF1dG9tYXRpY2FsbHkgbG9hZCBnbG9iYWwgdmFsdWVzIGZyb20g\ndGhlIHN5c3RlbSdzCiAgICAgKiB7QGxpbmsgUHJvZHVjdERlcml2YXRpb259\ncywgYW5kIGZyb20gU3lzdGVtIHByb3BlcnRpZXMuCiAgICAgKi8KICAgIHB1\nYmxpYyBib29sZWFuIGxvYWRHbG9iYWxzKCkgewogICAgICAgIE11bHRpQ2xh\nc3NMb2FkZXIgbG9hZGVyID0gKE11bHRpQ2xhc3NMb2FkZXIpIEFjY2Vzc0Nv\nbnRyb2xsZXIKICAgICAgICAgICAgLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhl\nbHBlci5uZXdNdWx0aUNsYXNzTG9hZGVyQWN0aW9uKCkpOyAKICAgICAgICBs\nb2FkZXIuYWRkQ2xhc3NMb2FkZXIoKENsYXNzTG9hZGVyKSBBY2Nlc3NDb250\ncm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgSjJEb1ByaXZIZWxw\nZXIuZ2V0Q29udGV4dENsYXNzTG9hZGVyQWN0aW9uKCkpKTsKICAgICAgICBs\nb2FkZXIuYWRkQ2xhc3NMb2FkZXIoZ2V0Q2xhc3MoKS5nZXRDbGFzc0xvYWRl\ncigpKTsKICAgICAgICBDb25maWd1cmF0aW9uUHJvdmlkZXIgcHJvdmlkZXIg\nPSBQcm9kdWN0RGVyaXZhdGlvbnMubG9hZEdsb2JhbHMobG9hZGVyKTsKICAg\nICAgICBpZiAocHJvdmlkZXIgIT0gbnVsbCkKICAgICAgICAgICAgcHJvdmlk\nZXIuc2V0SW50byh0aGlzKTsKCiAgICAgICAgLy8gbGV0IHN5c3RlbSBwcm9w\nZXJ0aWVzIG92ZXJyaWRlIG90aGVyIGdsb2JhbHMKICAgICAgICB0cnkgewog\nICAgICAgICAgICBmcm9tUHJvcGVydGllcyhuZXcgSGFzaE1hcCgKICAgICAg\nICAgICAgICAgIChQcm9wZXJ0aWVzKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJp\ndmlsZWdlZCgKICAgICAgICAgICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5n\nZXRQcm9wZXJ0aWVzQWN0aW9uKCkpKSk7CiAgICAgICAgfSBjYXRjaCAoU2Vj\ndXJpdHlFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgLy8gc2VjdXJpdHkg\nbWFuYWdlciBtaWdodCBkaXNhbGxvdwogICAgICAgIH0KCiAgICAgICAgX2ds\nb2JhbHMgPSB0cnVlOwogICAgICAgIGlmIChwcm92aWRlciA9PSBudWxsKSB7\nCiAgICAgICAgICAgIExvZyBsb2cgPSBnZXRDb25maWd1cmF0aW9uTG9nKCk7\nCiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAg\nICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgibm8tZGVmYXVsdC1wcm92\naWRlcnMiKSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIFN0cmlu\nZyBnZXRQcm9kdWN0TmFtZSgpIHsKICAgICAgICByZXR1cm4gX3Byb2R1Y3Q7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UHJvZHVjdE5hbWUoU3RyaW5n\nIG5hbWUpIHsKICAgICAgICBfcHJvZHVjdCA9IG5hbWU7CiAgICB9CgogICAg\ncHVibGljIExvZ0ZhY3RvcnkgZ2V0TG9nRmFjdG9yeSgpIHsKICAgICAgICBp\nZiAobG9nRmFjdG9yeVBsdWdpbi5nZXQoKSA9PSBudWxsKQogICAgICAgICAg\nICBsb2dGYWN0b3J5UGx1Z2luLmluc3RhbnRpYXRlKExvZ0ZhY3RvcnkuY2xh\nc3MsIHRoaXMpOwogICAgICAgIHJldHVybiAoTG9nRmFjdG9yeSkgbG9nRmFj\ndG9yeVBsdWdpbi5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRM\nb2dGYWN0b3J5KExvZ0ZhY3RvcnkgbG9nRmFjdG9yeSkgewogICAgICAgIGxv\nZ0ZhY3RvcnlQbHVnaW4uc2V0KGxvZ0ZhY3RvcnkpOwogICAgfQoKICAgIHB1\nYmxpYyBTdHJpbmcgZ2V0TG9nKCkgewogICAgICAgIHJldHVybiBsb2dGYWN0\nb3J5UGx1Z2luLmdldFN0cmluZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldExvZyhTdHJpbmcgbG9nKSB7CiAgICAgICAgbG9nRmFjdG9yeVBsdWdp\nbi5zZXRTdHJpbmcobG9nKTsKICAgIH0KCiAgICBwdWJsaWMgTG9nIGdldExv\nZyhTdHJpbmcgY2F0ZWdvcnkpIHsKICAgICAgICByZXR1cm4gZ2V0TG9nRmFj\ndG9yeSgpLmdldExvZyhjYXRlZ29yeSk7CiAgICB9CgogICAgcHVibGljIFN0\ncmluZyBnZXRJZCgpIHsKICAgICAgICByZXR1cm4gaWQuZ2V0KCk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHNldElkKFN0cmluZyBpZCkgewogICAg\nICAgIHRoaXMuaWQuc2V0KGlkKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybnMgdGhlIGxvZ2dpbmcgY2hhbm5lbCA8Y29kZT5vcGVuanBhLlJ1bnRp\nbWU8L2NvZGU+IGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHB1YmxpYyBMb2cg\nZ2V0Q29uZmlndXJhdGlvbkxvZygpIHsKICAgICAgICByZXR1cm4gZ2V0TG9n\nKCJvcGVuanBhLlJ1bnRpbWUiKTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWVb\nXSBnZXRWYWx1ZXMoKSB7CiAgICAgICAgcmV0dXJuIChWYWx1ZVtdKSBfdmFs\ncy50b0FycmF5KG5ldyBWYWx1ZVtfdmFscy5zaXplKCldKTsKICAgIH0KCiAg\nICBwdWJsaWMgVmFsdWUgZ2V0VmFsdWUoU3RyaW5nIHByb3BlcnR5KSB7CiAg\nICAgICAgaWYgKHByb3BlcnR5ID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBudWxsOwoKICAgICAgICAvLyBzZWFyY2ggYmFja3dhcmRzIHNvIHRoYXQg\nY3VzdG9tIHZhbHVlcyBhZGRlZCBhZnRlciBjb25zdHJ1Y3Rpb24KICAgICAg\nICAvLyBhcmUgZm91bmQgcXVpY2tseSwgc2luY2UgdGhpcyB3aWxsIGJlIHRo\nZSBzdGQgd2F5IG9mIGFjY2Vzc2luZyB0aGVtCiAgICAgICAgVmFsdWUgdmFs\nOwogICAgICAgIGZvciAoaW50IGkgPSBfdmFscy5zaXplKCkgLSAxOyBpID49\nIDA7IGktLSkgewogICAgICAgICAgICB2YWwgPSAoVmFsdWUpIF92YWxzLmdl\ndChpKTsKICAgICAgICAgICAgaWYgKHZhbC5nZXRQcm9wZXJ0eSgpLmVxdWFs\ncyhwcm9wZXJ0eSkpCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsOwogICAg\nICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRSZWFkT25seShpbnQgbmV3U3RhdGUpIHsKICAgICAgICBpZiAo\nbmV3U3RhdGUgPj0gX3JlYWRPbmx5U3RhdGUpIHsKICAgICAgICAJX3JlYWRP\nbmx5U3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgaW5zdGFudGlhdGVBbGwoKSB7CiAgICAgICAgU3RyaW5nV3Jp\ndGVyIGVycnMgPSBudWxsOwogICAgICAgIFByaW50V3JpdGVyIHN0YWNrID0g\nbnVsbDsKICAgICAgICBWYWx1ZSB2YWw7CiAgICAgICAgU3RyaW5nIGdldHRl\nck5hbWU7CiAgICAgICAgTWV0aG9kIGdldHRlcjsKICAgICAgICBPYmplY3Qg\nZ2V0dGVyVGFyZ2V0OwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3Zh\nbHMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgdmFsID0gKFZhbHVlKSBf\ndmFscy5nZXQoaSk7CiAgICAgICAgICAgIGdldHRlck5hbWUgPSB2YWwuZ2V0\nSW5zdGFudGlhdGluZ0dldHRlcigpOwogICAgICAgICAgICBpZiAoZ2V0dGVy\nTmFtZSA9PSBudWxsKQogICAgICAgICAgICAgICAgY29udGludWU7CgogICAg\nICAgICAgICBnZXR0ZXJUYXJnZXQgPSB0aGlzOwogICAgICAgICAgICBpZiAo\nZ2V0dGVyTmFtZS5zdGFydHNXaXRoKCJ0aGlzLiIpKSB7CiAgICAgICAgICAg\nICAgICBnZXR0ZXJOYW1lID0gZ2V0dGVyTmFtZS5zdWJzdHJpbmcoInRoaXMu\nIi5sZW5ndGgoKSk7CiAgICAgICAgICAgICAgICBnZXR0ZXJUYXJnZXQgPSB2\nYWw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgICAgICBnZXR0ZXIgPSBnZXR0ZXJUYXJnZXQuZ2V0Q2xhc3MoKS5nZXRN\nZXRob2QoZ2V0dGVyTmFtZSwKICAgICAgICAgICAgICAgICAgICAoQ2xhc3Nb\nXSkgbnVsbCk7CiAgICAgICAgICAgICAgICBnZXR0ZXIuaW52b2tlKGdldHRl\nclRhcmdldCwgKE9iamVjdFtdKSBudWxsKTsKICAgICAgICAgICAgfSBjYXRj\naCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIGlmICh0IGluc3Rh\nbmNlb2YgSW52b2NhdGlvblRhcmdldEV4Y2VwdGlvbikKICAgICAgICAgICAg\nICAgICAgICB0ID0gKChJbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uKSB0KS5n\nZXRUYXJnZXRFeGNlcHRpb24oKTsKICAgICAgICAgICAgICAgIGlmIChlcnJz\nID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBlcnJzID0gbmV3IFN0\ncmluZ1dyaXRlcigpOwogICAgICAgICAgICAgICAgICAgIHN0YWNrID0gbmV3\nIFByaW50V3JpdGVyKGVycnMpOwogICAgICAgICAgICAgICAgfSBlbHNlCiAg\nICAgICAgICAgICAgICAgICAgZXJycy53cml0ZShTRVApOwogICAgICAgICAg\nICAgICAgdC5wcmludFN0YWNrVHJhY2Uoc3RhY2spOwogICAgICAgICAgICAg\nICAgc3RhY2suZmx1c2goKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICBpZiAoZXJycyAhPSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcg\nUnVudGltZUV4Y2VwdGlvbihfbG9jLmdldCgiZ2V0LXByb3AtZXJycyIsCiAg\nICAgICAgICAgICAgICBlcnJzLnRvU3RyaW5nKCkpLmdldE1lc3NhZ2UoKSk7\nCiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNSZWFkT25seSgpIHsKICAg\nICAgICByZXR1cm4gX3JlYWRPbmx5U3RhdGU9PUlOSVRfU1RBVEVfRlJPWkVO\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFkZFByb3BlcnR5Q2hhbmdlTGlz\ndGVuZXIoUHJvcGVydHlDaGFuZ2VMaXN0ZW5lciBsaXN0ZW5lcikgewogICAg\nICAgIGlmIChfY2hhbmdlU3VwcG9ydCA9PSBudWxsKQogICAgICAgICAgICBf\nY2hhbmdlU3VwcG9ydCA9IG5ldyBQcm9wZXJ0eUNoYW5nZVN1cHBvcnQodGhp\ncyk7CiAgICAgICAgX2NoYW5nZVN1cHBvcnQuYWRkUHJvcGVydHlDaGFuZ2VM\naXN0ZW5lcihsaXN0ZW5lcik7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVt\nb3ZlUHJvcGVydHlDaGFuZ2VMaXN0ZW5lcihQcm9wZXJ0eUNoYW5nZUxpc3Rl\nbmVyIGxpc3RlbmVyKSB7CiAgICAgICAgaWYgKF9jaGFuZ2VTdXBwb3J0ICE9\nIG51bGwpCiAgICAgICAgICAgIF9jaGFuZ2VTdXBwb3J0LnJlbW92ZVByb3Bl\ncnR5Q2hhbmdlTGlzdGVuZXIobGlzdGVuZXIpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHZhbHVlQ2hhbmdlZChWYWx1ZSB2YWwpIHsKICAgICAgICBpZiAo\nX2NoYW5nZVN1cHBvcnQgPT0gbnVsbCAmJiBfcHJvcHMgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuOwoKICAgICAgICBTdHJpbmcgbmV3U3RyaW5nID0g\ndmFsLmdldFN0cmluZygpOwogICAgICAgIGlmIChfY2hhbmdlU3VwcG9ydCAh\nPSBudWxsKQogICAgICAgICAgICBfY2hhbmdlU3VwcG9ydC5maXJlUHJvcGVy\ndHlDaGFuZ2UodmFsLmdldFByb3BlcnR5KCksIG51bGwsCiAgICAgICAgICAg\nICAgICBuZXdTdHJpbmcpOwoKICAgICAgICAvLyBrZWVwIGNhY2hlZCBwcm9w\ncyB1cCB0byBkYXRlCiAgICAgICAgaWYgKF9wcm9wcyAhPSBudWxsKSB7CiAg\nICAgICAgICAgIGlmIChuZXdTdHJpbmcgPT0gbnVsbCkKICAgICAgICAgICAg\nICAgIENvbmZpZ3VyYXRpb25zLnJlbW92ZVByb3BlcnR5KHZhbC5nZXRQcm9w\nZXJ0eSgpLCBfcHJvcHMpOwogICAgICAgICAgICBlbHNlIGlmIChDb25maWd1\ncmF0aW9ucy5jb250YWluc1Byb3BlcnR5KHZhbC5nZXRQcm9wZXJ0eSgpLCBf\ncHJvcHMpCiAgICAgICAgICAgICAgICB8fCB2YWwuZ2V0RGVmYXVsdCgpID09\nIG51bGwKICAgICAgICAgICAgICAgIHx8ICF2YWwuZ2V0RGVmYXVsdCgpLmVx\ndWFscyhuZXdTdHJpbmcpKQogICAgICAgICAgICAgICAgcHV0KF9wcm9wcywg\ndmFsLCBuZXdTdHJpbmcpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIENsb3NlcyBhbGwgY2xvc2VhYmxlIHZhbHVlcyBhbmQgcGx1Z2lucy4K\nICAgICAqLwogICAgcHVibGljIGZpbmFsIHZvaWQgY2xvc2UoKSB7CiAgICAg\nICAgUHJvZHVjdERlcml2YXRpb25zLmJlZm9yZUNsb3NlKHRoaXMpOwogICAg\nICAgIAogICAgICAgIHByZUNsb3NlKCk7CiAgICAgICAgCiAgICAgICAgT2Jq\nZWN0VmFsdWUgdmFsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3Zh\nbHMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgaWYgKF92YWxzLmdldChp\nKSBpbnN0YW5jZW9mIENsb3NlYWJsZSkgewogICAgICAgICAgICAgICAgdHJ5\nIHsgKChDbG9zZWFibGUpIF92YWxzLmdldChpKSkuY2xvc2UoKTsgfQogICAg\nICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7fSAKICAgICAgICAg\nICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBp\nZiAoIShfdmFscy5nZXQoaSkgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkpCiAg\nICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIHZhbCA9IChP\nYmplY3RWYWx1ZSkgX3ZhbHMuZ2V0KGkpOwogICAgICAgICAgICBpZiAodmFs\nLmdldCgpIGluc3RhbmNlb2YgQ2xvc2VhYmxlKSB7CiAgICAgICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICAgICAgICAgICgoQ2xvc2VhYmxlKSB2YWwu\nZ2V0KCkpLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgfQogICAgCiAgICAvKioKICAgICAqIEludm9rZWQgYnkg\nZmluYWwgbWV0aG9kIHtAbGluayAjY2xvc2V9IGFmdGVyIGludm9raW5nIHRo\nZSAKICAgICAqIHtAbGluayBQcm9kdWN0RGVyaXZhdGlvbiNiZWZvcmVDb25m\naWd1cmF0aW9uQ2xvc2V9IGNhbGxiYWNrcwogICAgICogYnV0IGJlZm9yZSBw\nZXJmb3JtaW5nIGludGVybmFsIGNsb3NlIG9wZXJhdGlvbnMuCiAgICAgKiAK\nICAgICAqIEBzaW5jZSAwLjkuNwogICAgICovCiAgICBwcm90ZWN0ZWQgdm9p\nZCBwcmVDbG9zZSgpIHsKICAgIH0KCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8KICAgIC8vIEJlYW5JbmZvIGltcGxlbWVudGF0aW9uCiAgICAv\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBwdWJsaWMgQmVhbklu\nZm9bXSBnZXRBZGRpdGlvbmFsQmVhbkluZm8oKSB7CiAgICAgICAgcmV0dXJu\nIG5ldyBCZWFuSW5mb1swXTsKICAgIH0KCiAgICBwdWJsaWMgQmVhbkRlc2Ny\naXB0b3IgZ2V0QmVhbkRlc2NyaXB0b3IoKSB7CiAgICAgICAgcmV0dXJuIG5l\ndyBCZWFuRGVzY3JpcHRvcihnZXRDbGFzcygpKTsKICAgIH0KCiAgICBwdWJs\naWMgaW50IGdldERlZmF1bHRFdmVudEluZGV4KCkgewogICAgICAgIHJldHVy\nbiAwOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0RGVmYXVsdFByb3BlcnR5\nSW5kZXgoKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgcHVibGlj\nIEV2ZW50U2V0RGVzY3JpcHRvcltdIGdldEV2ZW50U2V0RGVzY3JpcHRvcnMo\nKSB7CiAgICAgICAgcmV0dXJuIG5ldyBFdmVudFNldERlc2NyaXB0b3JbMF07\nCiAgICB9CgogICAgcHVibGljIEltYWdlIGdldEljb24oaW50IGtpbmQpIHsK\nICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hy\nb25pemVkIE1ldGhvZERlc2NyaXB0b3JbXSBnZXRNZXRob2REZXNjcmlwdG9y\ncygpIHsKICAgICAgICBpZiAoX21kcyAhPSBudWxsKQogICAgICAgICAgICBy\nZXR1cm4gX21kczsKCiAgICAgICAgUHJvcGVydHlEZXNjcmlwdG9yW10gcGRz\nID0gZ2V0UHJvcGVydHlEZXNjcmlwdG9ycygpOwogICAgICAgIExpc3QgZGVz\nY3MgPSBuZXcgQXJyYXlMaXN0KCk7IAogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgcGRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIE1ldGhvZCB3\ncml0ZSA9IHBkc1tpXS5nZXRXcml0ZU1ldGhvZCgpOwogICAgICAgICAgICBN\nZXRob2QgcmVhZCA9IHBkc1tpXS5nZXRSZWFkTWV0aG9kKCk7CiAgICAgICAg\nICAgIGlmIChyZWFkICE9IG51bGwgJiYgd3JpdGUgIT0gbnVsbCkgewogICAg\nICAgICAgICAgICAgZGVzY3MuYWRkKG5ldyBNZXRob2REZXNjcmlwdG9yKHdy\naXRlKSk7CiAgICAgICAgICAgICAgICBkZXNjcy5hZGQobmV3IE1ldGhvZERl\nc2NyaXB0b3IocmVhZCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nICAgIF9tZHMgPSAoTWV0aG9kRGVzY3JpcHRvcltdKSBkZXNjcy4KICAgICAg\nICAgICAgdG9BcnJheShuZXcgTWV0aG9kRGVzY3JpcHRvcltkZXNjcy5zaXpl\nKCldKTsKICAgICAgICByZXR1cm4gX21kczsKICAgIH0KCiAgICBwdWJsaWMg\nc3luY2hyb25pemVkIFByb3BlcnR5RGVzY3JpcHRvcltdIGdldFByb3BlcnR5\nRGVzY3JpcHRvcnMoKSB7CiAgICAgICAgaWYgKF9wZHMgIT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIF9wZHM7CgogICAgICAgIF9wZHMgPSBuZXcgUHJv\ncGVydHlEZXNjcmlwdG9yW192YWxzLnNpemUoKV07CiAgICAgICAgTGlzdCBm\nYWlsdXJlcyA9IG51bGw7CiAgICAgICAgVmFsdWUgdmFsOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgX3ZhbHMuc2l6ZSgpOyBpKyspIHsKICAgICAg\nICAgICAgdmFsID0gKFZhbHVlKSBfdmFscy5nZXQoaSk7CiAgICAgICAgICAg\nIHRyeSB7CiAgICAgICAgICAgICAgICBfcGRzW2ldID0gZ2V0UHJvcGVydHlE\nZXNjcmlwdG9yKHZhbCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKE1pc3NpbmdS\nZXNvdXJjZUV4Y2VwdGlvbiBtcmUpIHsKICAgICAgICAgICAgICAgIGlmIChm\nYWlsdXJlcyA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIGZhaWx1cmVz\nID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgICAgICAgICAgZmFpbHVyZXMu\nYWRkKHZhbC5nZXRQcm9wZXJ0eSgpKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nSW50cm9zcGVjdGlvbkV4Y2VwdGlvbiBpZSkgewogICAgICAgICAgICAgICAg\naWYgKGZhaWx1cmVzID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgZmFp\nbHVyZXMgPSBuZXcgQXJyYXlMaXN0KCk7CiAgICAgICAgICAgICAgICBmYWls\ndXJlcy5hZGQodmFsLmdldFByb3BlcnR5KCkpOwogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgICAgIGlmIChmYWlsdXJlcyAhPSBudWxsKQogICAgICAg\nICAgICB0aHJvdyBuZXcgUGFyc2VFeGNlcHRpb24oX2xvYy5nZXQoImludmFs\naWQtcHJvcGVydHktZGVzY3JpcHRvcnMiLAogICAgICAgICAgICAgICAgZmFp\nbHVyZXMpKTsKCiAgICAgICAgcmV0dXJuIF9wZHM7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDcmVhdGUgYSBwcm9wZXJ0eSBkZXNjcmlwdG9yIGZvciB0aGUg\nZ2l2ZW4gdmFsdWUuCiAgICAgKi8KICAgIHByaXZhdGUgUHJvcGVydHlEZXNj\ncmlwdG9yIGdldFByb3BlcnR5RGVzY3JpcHRvcihWYWx1ZSB2YWwpCiAgICAg\nICAgdGhyb3dzIEludHJvc3BlY3Rpb25FeGNlcHRpb24gewogICAgICAgIFN0\ncmluZyBwcm9wID0gdmFsLmdldFByb3BlcnR5KCk7CiAgICAgICAgcHJvcCA9\nIHByb3Auc3Vic3RyaW5nKHByb3AubGFzdEluZGV4T2YoJy4nKSArIDEpOwoK\nICAgICAgICAvLyBzZXQgdXAgcHJvcGVydHkgZGVzY3JpcHRvcgogICAgICAg\nIFByb3BlcnR5RGVzY3JpcHRvciBwZDsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBwZCA9IG5ldyBQcm9wZXJ0eURlc2NyaXB0b3IoSW50cm9zcGVjdG9y\nLmRlY2FwaXRhbGl6ZShwcm9wKSwgCiAgICAgICAgICAgICAgICBnZXRDbGFz\ncygpKTsKICAgICAgICB9IGNhdGNoIChJbnRyb3NwZWN0aW9uRXhjZXB0aW9u\nIGllKSB7CiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZW4ndCBhbnkgbWV0\naG9kcyBmb3IgdGhpcyB2YWx1ZShpLmUuLCBpZiBpdCdzIGEKICAgICAgICAg\nICAgLy8gZHluYW1pY2FsbHktYWRkZWQgdmFsdWUpLCB0aGVuIGFuIEludHJv\nc3BlY3Rpb25FeGNlcHRpb24gd2lsbAogICAgICAgICAgICAvLyBiZSB0aHJv\nd24uIFRyeSB0byBjcmVhdGUgYSBQRCB3aXRoIG5vIHJlYWQgb3Igd3JpdGUg\nbWV0aG9kcy4KICAgICAgICAgICAgcGQgPSBuZXcgUHJvcGVydHlEZXNjcmlw\ndG9yKEludHJvc3BlY3Rvci5kZWNhcGl0YWxpemUocHJvcCksCiAgICAgICAg\nICAgICAgICAoTWV0aG9kKSBudWxsLCAoTWV0aG9kKSBudWxsKTsKICAgICAg\nICB9CiAgICAgICAgcGQuc2V0RGlzcGxheU5hbWUoZmluZExvY2FsaXplZChw\ncm9wICsgIi1uYW1lIiwgdHJ1ZSwgdmFsLmdldFNjb3BlKCkpKTsKICAgICAg\nICBwZC5zZXRTaG9ydERlc2NyaXB0aW9uKGZpbmRMb2NhbGl6ZWQocHJvcCAr\nICItZGVzYyIsIHRydWUsCiAgICAgICAgICAgIHZhbC5nZXRTY29wZSgpKSk7\nCiAgICAgICAgcGQuc2V0RXhwZXJ0KCJ0cnVlIi5lcXVhbHMoZmluZExvY2Fs\naXplZChwcm9wICsgIi1leHBlcnQiLCBmYWxzZSwKICAgICAgICAgICAgdmFs\nLmdldFNjb3BlKCkpKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHBk\nLnNldFJlYWRNZXRob2QoZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldCIKICAg\nICAgICAgICAgICAgICsgU3RyaW5nVXRpbHMuY2FwaXRhbGl6ZShwcm9wKSwg\nKENsYXNzW10pIG51bGwpKTsKICAgICAgICAgICAgcGQuc2V0V3JpdGVNZXRo\nb2QoZ2V0Q2xhc3MoKS5nZXRNZXRob2QoInNldCIKICAgICAgICAgICAgICAg\nICsgU3RyaW5nVXRpbHMuY2FwaXRhbGl6ZShwcm9wKSwgbmV3IENsYXNzW10K\nICAgICAgICAgICAgICAgIHsgcGQuZ2V0UmVhZE1ldGhvZCgpLmdldFJldHVy\nblR5cGUoKSB9KSk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsK\nICAgICAgICAgICAgLy8gaWYgYW4gZXJyb3Igb2NjdXJzLCBpdCBtaWdodCBi\nZSBiZWNhdXNlIHRoZSB2YWx1ZSBpcyBhCiAgICAgICAgICAgIC8vIGR5bmFt\naWMgcHJvcGVydHkuCiAgICAgICAgfQoKICAgICAgICBTdHJpbmcgdHlwZSA9\nIGZpbmRMb2NhbGl6ZWQocHJvcCArICItdHlwZSIsIHRydWUsIHZhbC5nZXRT\nY29wZSgpKTsKICAgICAgICBpZiAodHlwZSAhPSBudWxsKQogICAgICAgICAg\nICBwZC5zZXRWYWx1ZShBVFRSSUJVVEVfVFlQRSwgdHlwZSk7CgogICAgICAg\nIFN0cmluZyBjYXQgPSBmaW5kTG9jYWxpemVkKHByb3AgKyAiLWNhdCIsIGZh\nbHNlLCB2YWwuZ2V0U2NvcGUoKSk7CiAgICAgICAgaWYgKGNhdCAhPSBudWxs\nKQogICAgICAgICAgICBwZC5zZXRWYWx1ZShBVFRSSUJVVEVfQ0FURUdPUlks\nIGNhdCk7CiAgICAgICAgCiAgICAgICAgcGQuc2V0VmFsdWUoQVRUUklCVVRF\nX1hNTCwgdG9YTUxOYW1lKHByb3ApKTsKCiAgICAgICAgU3RyaW5nIG9yZGVy\nID0gZmluZExvY2FsaXplZChwcm9wICsgIi1kaXNwbGF5b3JkZXIiLCBmYWxz\nZSwKICAgICAgICAgICAgdmFsLmdldFNjb3BlKCkpOwogICAgICAgIGlmIChv\ncmRlciAhPSBudWxsKQogICAgICAgICAgICBwZC5zZXRWYWx1ZShBVFRSSUJV\nVEVfT1JERVIsIG9yZGVyKTsKCiAgICAgICAgLy8gY29sbGVjdCBhbGxvd2Vk\nIHZhbHVlcyBmcm9tIGFsaWFzIGtleXMsIGxpc3RlZCB2YWx1ZXMsIGFuZAog\nICAgICAgIC8vIGludGVyZmFjZSBpbXBsZW1lbnRvcnMKICAgICAgICBDb2xs\nZWN0aW9uIGFsbG93ZWQgPSBuZXcgVHJlZVNldCgpOwogICAgICAgIExpc3Qg\nYWxpYXNlcyA9IENvbGxlY3Rpb25zLkVNUFRZX0xJU1Q7CiAgICAgICAgaWYg\nKHZhbC5nZXRBbGlhc2VzKCkgIT0gbnVsbCkgewogICAgICAgICAgICBhbGlh\nc2VzID0gQXJyYXlzLmFzTGlzdCh2YWwuZ2V0QWxpYXNlcygpKTsKICAgICAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhbGlhc2VzLnNpemUoKTsgaSAr\nPSAyKQogICAgICAgICAgICAgICAgYWxsb3dlZC5hZGQoYWxpYXNlcy5nZXQo\naSkpOwogICAgICAgIH0KICAgICAgICBTdHJpbmdbXSB2YWxzID0gU3RyaW5n\ncy5zcGxpdChmaW5kTG9jYWxpemVkKHByb3AKICAgICAgICAgICAgKyAiLXZh\nbHVlcyIsIGZhbHNlLCB2YWwuZ2V0U2NvcGUoKSksICIsIiwgMCk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2YWxzLmxlbmd0aDsgaSsrKQogICAg\nICAgICAgICBpZiAoIWFsaWFzZXMuY29udGFpbnModmFsc1tpXSkpCiAgICAg\nICAgICAgICAgICBhbGxvd2VkLmFkZCh2YWxzW2ldKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICBDbGFzcyBpbnRmID0gQ2xhc3MuZm9yTmFtZShmaW5k\nTG9jYWxpemVkKHByb3AKICAgICAgICAgICAgICAgICsgIi1pbnRlcmZhY2Ui\nLCB0cnVlLCB2YWwuZ2V0U2NvcGUoKSksIGZhbHNlLAogICAgICAgICAgICAg\nICAgZ2V0Q2xhc3MoKS5nZXRDbGFzc0xvYWRlcigpKTsKICAgICAgICAgICAg\ncGQuc2V0VmFsdWUoQVRUUklCVVRFX0lOVEVSRkFDRSwgaW50Zi5nZXROYW1l\nKCkpOwogICAgICAgICAgICBTdHJpbmdbXSBpbXBscyA9IFNlcnZpY2VzLmdl\ndEltcGxlbWVudG9ycyhpbnRmKTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBpbXBscy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIGlm\nICghYWxpYXNlcy5jb250YWlucyhpbXBsc1tpXSkpCiAgICAgICAgICAgICAg\nICAgICAgYWxsb3dlZC5hZGQoaW1wbHNbaV0pOwogICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSB0KSB7CiAgICAgICAgfQogICAgICAgIGlmICghYWxsb3dl\nZC5pc0VtcHR5KCkpCiAgICAgICAgICAgIHBkLnNldFZhbHVlKEFUVFJJQlVU\nRV9BTExPV0VEX1ZBTFVFUywgKFN0cmluZ1tdKSBhbGxvd2VkLnRvQXJyYXkK\nICAgICAgICAgICAgICAgIChuZXcgU3RyaW5nW2FsbG93ZWQuc2l6ZSgpXSkp\nOwoKICAgICAgICByZXR1cm4gcGQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBG\naW5kIHRoZSBnaXZlbiBsb2NhbGl6ZWQgc3RyaW5nLCBvciByZXR1cm4gbnVs\nbCBpZiBub3QgZm91bmQuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGZp\nbmRMb2NhbGl6ZWQoU3RyaW5nIGtleSwgYm9vbGVhbiBmYXRhbCwgQ2xhc3Mg\nc2NvcGUpIHsKICAgICAgICAvLyBmaW5kIHRoZSBsb2NhbGl6ZXIgcGFja2Fn\nZSB0aGF0IGNvbnRhaW5zIHRoaXMga2V5CiAgICAgICAgTG9jYWxpemVyIGxv\nYyA9IG51bGw7CgogICAgICAgIC8vIGNoZWNrIHRoZSBwYWNrYWdlIHRoYXQg\ndGhlIHZhbHVlIGNsYWltcyB0byBiZSBkZWZpbmVkIGluLCBpZgogICAgICAg\nIC8vIGF2YWlsYWJsZSwgYmVmb3JlIHdlIHN0YXJ0IGd1ZXNzaW5nLgogICAg\nICAgIGlmIChzY29wZSAhPSBudWxsKSB7CiAgICAgICAgICAgIGxvYyA9IExv\nY2FsaXplci5mb3JQYWNrYWdlKHNjb3BlKTsKICAgICAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgICAgIHJldHVybiBsb2MuZ2V0RmF0YWwoa2V5KS5nZXRN\nZXNzYWdlKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKE1pc3NpbmdSZXNvdXJj\nZUV4Y2VwdGlvbiBtc2UpIHsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAg\nICAgICAgZm9yIChDbGFzcyBjbHMgPSBnZXRDbGFzcygpOyBjbHMgIT0gT2Jq\nZWN0LmNsYXNzOwogICAgICAgICAgICBjbHMgPSBjbHMuZ2V0U3VwZXJjbGFz\ncygpKSB7CiAgICAgICAgICAgIGxvYyA9IExvY2FsaXplci5mb3JQYWNrYWdl\nKGNscyk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1\ncm4gbG9jLmdldEZhdGFsKGtleSkuZ2V0TWVzc2FnZSgpOwogICAgICAgICAg\nICB9IGNhdGNoIChNaXNzaW5nUmVzb3VyY2VFeGNlcHRpb24gbXNlKSB7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChmYXRhbCkKICAg\nICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdSZXNvdXJjZUV4Y2VwdGlvbihr\nZXksIGdldENsYXNzKCkuZ2V0TmFtZSgpLCBrZXkpOwogICAgICAgIHJldHVy\nbiBudWxsOwogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIFRv\nL2Zyb20gbWFwcwogICAgLy8vLy8vLy8vLy8vLy8vLwoKICAgIHB1YmxpYyBN\nYXAgdG9Qcm9wZXJ0aWVzKGJvb2xlYW4gc3RvcmVEZWZhdWx0cykgewogICAg\nICAgIC8vIGNsb25lIHByb3BlcnRpZXMgYmVmb3JlIG1ha2luZyBhbnkgbW9k\naWZpY2F0aW9uczsgd2UgbmVlZCB0byBrZWVwCiAgICAgICAgLy8gdGhlIGlu\ndGVybmFsIHByb3BlcnRpZXMgaW5zdGFuY2UgY29uc2lzdGVudCB0byBtYWlu\ndGFpbiBlcXVhbHMgYW5kCiAgICAgICAgLy8gaGFzaGNvZGUgY29udHJhY3Rz\nCiAgICAgICAgTWFwIGNsb25lOwogICAgICAgIGlmIChfcHJvcHMgPT0gbnVs\nbCkKICAgICAgICAgICAgY2xvbmUgPSBuZXcgSGFzaE1hcCgpOwogICAgICAg\nIGVsc2UgaWYgKF9wcm9wcyBpbnN0YW5jZW9mIFByb3BlcnRpZXMpCiAgICAg\nICAgICAgIGNsb25lID0gKE1hcCkgKChQcm9wZXJ0aWVzKSBfcHJvcHMpLmNs\nb25lKCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBjbG9uZSA9IG5ldyBI\nYXNoTWFwKF9wcm9wcyk7CgogICAgICAgIC8vIGlmIG5vIGV4aXN0aW5nIHBy\nb3BlcnRpZXMgb3IgdGhlIHByb3BlcnRpZXMgc2hvdWxkIGNvbnRhaW4gZW50\ncmllcwogICAgICAgIC8vIHdpdGggZGVmYXVsdCB2YWx1ZXMsIGFkZCB2YWx1\nZXMgdG8gcHJvcGVydGllcwogICAgICAgIGlmIChfcHJvcHMgPT0gbnVsbCB8\nfCBzdG9yZURlZmF1bHRzKSB7CiAgICAgICAgICAgIFZhbHVlIHZhbDsKICAg\nICAgICAgICAgU3RyaW5nIHN0cjsKICAgICAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBfdmFscy5zaXplKCk7IGkrKykgewogICAgICAgICAgICAgICAg\nLy8gaWYga2V5IGluIGV4aXN0aW5nIHByb3BlcnRpZXMsIHdlIGFscmVhZHkg\na25vdyB2YWx1ZSBpcyB1cAogICAgICAgICAgICAgICAgLy8gdG8gZGF0ZQog\nICAgICAgICAgICAgICAgdmFsID0gKFZhbHVlKSBfdmFscy5nZXQoaSk7CiAg\nICAgICAgICAgICAgICBpZiAoX3Byb3BzICE9IG51bGwgJiYgQ29uZmlndXJh\ndGlvbnMuY29udGFpbnNQcm9wZXJ0eQogICAgICAgICAgICAgICAgICAgICh2\nYWwuZ2V0UHJvcGVydHkoKSwgX3Byb3BzKSkKICAgICAgICAgICAgICAgICAg\nICBjb250aW51ZTsKCiAgICAgICAgICAgICAgICBzdHIgPSB2YWwuZ2V0U3Ry\naW5nKCk7CiAgICAgICAgICAgICAgICBpZiAoc3RyICE9IG51bGwgJiYgKHN0\nb3JlRGVmYXVsdHMKICAgICAgICAgICAgICAgICAgICB8fCAhc3RyLmVxdWFs\ncyh2YWwuZ2V0RGVmYXVsdCgpKSkpCiAgICAgICAgICAgICAgICAgICAgcHV0\nKGNsb25lLCB2YWwsIHN0cik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\naWYgKF9wcm9wcyA9PSBudWxsKQogICAgICAgICAgICAgICAgX3Byb3BzID0g\nbmV3IEhhc2hNYXAoY2xvbmUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\nY2xvbmU7CiAgICB9CgogICAgcHVibGljIHZvaWQgZnJvbVByb3BlcnRpZXMo\nTWFwIG1hcCkgewogICAgICAgIGlmIChtYXAgPT0gbnVsbCB8fCBtYXAuaXNF\nbXB0eSgpKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKGlzUmVh\nZE9ubHkoKSkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4\nY2VwdGlvbihfbG9jLmdldCgicmVhZC1vbmx5IikuZ2V0TWVzc2FnZSgpKTsK\nCiAgICAgICAgLy8gaWYgdGhlIG9ubHkgcHJldmlvdXMgY2FsbCB3YXMgdG8g\nbG9hZCBkZWZhdWx0cywgZm9yZ2V0IHRoZW0uCiAgICAgICAgLy8gdGhpcyB3\nYXkgd2UgcHJlc2VydmUgdGhlIG9yaWdpbmFsIGZvcm1hdHRpbmcgb2YgdGhl\nIHVzZXIncyBwcm9wcwogICAgICAgIC8vIGluc3RlYWQgb2YgdGhlIGRlZmF1\nbHRzLiAgdGhpcyBpcyBpbXBvcnRhbnQgZm9yIGNhY2hpbmcgb24KICAgICAg\nICAvLyBjb25maWd1cmF0aW9uIG9iamVjdHMKICAgICAgICBpZiAoX2dsb2Jh\nbHMpIHsKICAgICAgICAgICAgX3Byb3BzID0gbnVsbDsKICAgICAgICAgICAg\nX2dsb2JhbHMgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIC8vIGNvcHkg\ndGhlIGlucHV0IHRvIGF2b2lkIG11dGF0aW9uIGlzc3VlcwogICAgICAgIGlm\nIChtYXAgaW5zdGFuY2VvZiBIYXNoTWFwKQogICAgICAgICAgICBtYXAgPSAo\nTWFwKSAoKEhhc2hNYXApIG1hcCkuY2xvbmUoKTsKICAgICAgICBlbHNlIGlm\nIChtYXAgaW5zdGFuY2VvZiBQcm9wZXJ0aWVzKQogICAgICAgICAgICBtYXAg\nPSAoTWFwKSAoKFByb3BlcnRpZXMpIG1hcCkuY2xvbmUoKTsKICAgICAgICBl\nbHNlCiAgICAgICAgICAgIG1hcCA9IG5ldyBMaW5rZWRIYXNoTWFwKG1hcCk7\nCgogICAgICAgIE1hcCByZW1haW5pbmcgPSBuZXcgSGFzaE1hcChtYXApOwog\nICAgICAgIGJvb2xlYW4gc2VyID0gdHJ1ZTsKICAgICAgICBWYWx1ZSB2YWw7\nCiAgICAgICAgT2JqZWN0IG87CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBfdmFscy5zaXplKCk7IGkrKykgewogICAgICAgICAgICB2YWwgPSAoVmFs\ndWUpIF92YWxzLmdldChpKTsKICAgICAgICAgICAgbyA9IGdldChtYXAsIHZh\nbCwgdHJ1ZSk7CiAgICAgICAgICAgIGlmIChvID09IG51bGwpCiAgICAgICAg\nICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIGlmIChvIGluc3RhbmNl\nb2YgU3RyaW5nKSB7CiAgICAgICAgICAgICAgICBpZiAoIVN0cmluZ1V0aWxz\nLmVxdWFscygoU3RyaW5nKSBvLCB2YWwuZ2V0U3RyaW5nKCkpKQogICAgICAg\nICAgICAgICAgICAgIHZhbC5zZXRTdHJpbmcoKFN0cmluZykgbyk7CiAgICAg\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZXIgJj0gbyBpbnN0\nYW5jZW9mIFNlcmlhbGl6YWJsZTsKICAgICAgICAgICAgICAgIHZhbC5zZXRP\nYmplY3Qobyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgQ29uZmlndXJh\ndGlvbnMucmVtb3ZlUHJvcGVydHkodmFsLmdldFByb3BlcnR5KCksIHJlbWFp\nbmluZyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIGNvbnZlbnRp\nb24gaXMgdG8gcG9pbnQgcHJvZHVjdCBhdCBhIHJlc291cmNlIHdpdGggdGhl\nCiAgICAgICAgLy8gPHByZWZpeD4ucHJvcGVydGllcyBTeXN0ZW0gcHJvcGVy\ndHk7IHJlbW92ZSB0aGF0IHByb3BlcnR5IHNvIHdlCiAgICAgICAgLy8gd2Ug\nZG9uJ3Qgd2FybiBhYm91dCBpdAogICAgICAgIENvbmZpZ3VyYXRpb25zLnJl\nbW92ZVByb3BlcnR5KCJwcm9wZXJ0aWVzIiwgcmVtYWluaW5nKTsKCiAgICAg\nICAgLy8gbm93IHdhcm4gaWYgdGhlcmUgYXJlIGFueSByZW1haW5pbmcgcHJv\ncGVydGllcyB0aGF0IHRoZXJlCiAgICAgICAgLy8gaXMgYW4gdW5oYW5kbGVk\nIHByb3AsIGFuZCByZW1vdmUgdGhlIHVua25vd24gcHJvcGVydGllcwogICAg\nICAgIE1hcC5FbnRyeSBlbnRyeTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0\nciA9IHJlbWFpbmluZy5lbnRyeVNldCgpLml0ZXJhdG9yKCk7IGl0ci5oYXNO\nZXh0KCk7KSB7CiAgICAgICAgICAgIGVudHJ5ID0gKE1hcC5FbnRyeSkgaXRy\nLm5leHQoKTsKICAgICAgICAgICAgT2JqZWN0IGtleSA9IGVudHJ5LmdldEtl\neSgpOwogICAgICAgICAgICBpZiAoa2V5ICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgIHdhcm5JbnZhbGlkUHJvcGVydHkoKFN0cmluZykga2V5KTsKICAg\nICAgICAgICAgICAgIG1hcC5yZW1vdmUoa2V5KTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KCiAgICAgICAgLy8gY2FjaGUgcHJvcGVydGllcwogICAgICAg\nIGlmIChfcHJvcHMgPT0gbnVsbCAmJiBzZXIpCiAgICAgICAgICAgIF9wcm9w\ncyA9IG1hcDsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZHMgPGNvZGU+bzwv\nY29kZT4gdG8gPGNvZGU+bWFwPC9jb2RlPiB1bmRlciBrZXkgZm9yIDxjb2Rl\nPnZhbDwvY29kZT4uCiAgICAgKiBVc2UgdGhpcyBtZXRob2QgaW5zdGVhZCBv\nZiBhdHRlbXB0aW5nIHRvIGFkZCB0aGUgdmFsdWUgZGlyZWN0bHkgYmVjYXVz\nZSAKICAgICAqIHRoaXMgd2lsbCBhY2NvdW50IGZvciB0aGUgcHJvcGVydHkg\ncHJlZml4LgogICAgICovCiAgICBwcml2YXRlIHZvaWQgcHV0KE1hcCBtYXAs\nIFZhbHVlIHZhbCwgT2JqZWN0IG8pIHsKICAgICAgICBPYmplY3Qga2V5ID0g\ndmFsLmdldExvYWRLZXkoKTsKICAgICAgICBpZiAoa2V5ID09IG51bGwpCiAg\nICAgICAgICAgIGtleSA9ICJvcGVuanBhLiIgKyB2YWwuZ2V0UHJvcGVydHko\nKTsKICAgICAgICBtYXAucHV0KGtleSwgbyk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBMb29rIHVwIHRoZSBnaXZlbiB2YWx1ZSwgdGVzdGluZyBhbGwgYXZh\naWxhYmxlIHByZWZpeGVzLgogICAgICovCiAgICBwcml2YXRlIE9iamVjdCBn\nZXQoTWFwIG1hcCwgVmFsdWUgdmFsLCBib29sZWFuIHNldExvYWRLZXkpIHsK\nICAgICAgICBTdHJpbmcga2V5ID0gUHJvZHVjdERlcml2YXRpb25zLmdldENv\nbmZpZ3VyYXRpb25LZXkoCiAgICAgICAgICAgIHZhbC5nZXRQcm9wZXJ0eSgp\nLCBtYXApOwogICAgICAgIGlmIChtYXAuY29udGFpbnNLZXkoa2V5KSAmJiBz\nZXRMb2FkS2V5KQogICAgICAgICAgICB2YWwuc2V0TG9hZEtleShrZXkpOwog\nICAgICAgIHJldHVybiBtYXAuZ2V0KGtleSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBJc3N1ZSBhIHdhcm5pbmcgdGhhdCB0aGUgc3BlY2lmaWVkIHByb3Bl\ncnR5IGlzIG5vdCB2YWxpZC4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHdh\ncm5JbnZhbGlkUHJvcGVydHkoU3RyaW5nIHByb3BOYW1lKSB7CiAgICAgICAg\naWYgKCFpc0ludmFsaWRQcm9wZXJ0eShwcm9wTmFtZSkpCiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICBMb2cgbG9nID0gZ2V0Q29uZmlndXJhdGlvbkxv\nZygpOwogICAgICAgIGlmIChsb2cgPT0gbnVsbCB8fCAhbG9nLmlzV2FybkVu\nYWJsZWQoKSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAvLyB0cnkg\ndG8gZmluZCB0aGUgY2xvc2VzdCBzdHJpbmcgdG8gdGhlIGludmFsaWQgcHJv\ncGVydHkKICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBwcm92aWRlIGEgaGlu\ndCBpbiBjYXNlIG9mIGEgbWlzc3BlbGxpbmcKICAgICAgICBTdHJpbmcgY2xv\nc2VzdCA9IFN0cmluZ0Rpc3RhbmNlLmdldENsb3Nlc3RMZXZlbnNodGVpbkRp\nc3RhbmNlCiAgICAgICAgICAgIChwcm9wTmFtZSwgbmV3UHJvcGVydHlMaXN0\nKCksIDE1KTsKCiAgICAgICAgaWYgKGNsb3Nlc3QgPT0gbnVsbCkKICAgICAg\nICAgICAgbG9nLndhcm4oX2xvYy5nZXQoImludmFsaWQtcHJvcGVydHkiLCBw\ncm9wTmFtZSkpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgbG9nLndhcm4o\nX2xvYy5nZXQoImludmFsaWQtcHJvcGVydHktaGludCIsIHByb3BOYW1lLCBj\nbG9zZXN0KSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBjb21w\ncmVoZW5zaXZlIGxpc3Qgb2YgcmVjb2duaXplZCBtYXAga2V5cy4KICAgICAq\nLwogICAgcHJpdmF0ZSBDb2xsZWN0aW9uIG5ld1Byb3BlcnR5TGlzdCgpIHsK\nICAgICAgICBTdHJpbmdbXSBwcmVmaXhlcyA9IFByb2R1Y3REZXJpdmF0aW9u\ncy5nZXRDb25maWd1cmF0aW9uUHJlZml4ZXMoKTsKICAgICAgICBMaXN0IGwg\nPSBuZXcgQXJyYXlMaXN0KF92YWxzLnNpemUoKSAqIHByZWZpeGVzLmxlbmd0\naCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfdmFscy5zaXplKCk7\nIGkrKykgewogICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IHByZWZp\neGVzLmxlbmd0aDsgaisrKQogICAgICAgICAgICAgICAgbC5hZGQocHJlZml4\nZXNbal0gKyAiLiIgKyAoKFZhbHVlKSBfdmFscy5nZXQoaSkpLmdldFByb3Bl\ncnR5KCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbDsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIHBy\nb3BlcnR5IG5hbWUgc2hvdWxkIHJhaXNlIGEgd2FybmluZwogICAgICogaWYg\naXQgaXMgbm90IGZvdW5kIGluIHRoZSBsaXN0IG9mIGtub3duIHByb3BlcnRp\nZXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGlzSW52YWxpZFBy\nb3BlcnR5KFN0cmluZyBwcm9wTmFtZSkgewogICAgICAgIC8vIGhhbmRsZSB3\nYXJuaW5ncyBmb3Igb3BlbmpwYS5Tb21lU3RyaW5nLCBidXQgbm90IGZvcgog\nICAgICAgIC8vIG9wZW5qcGEuc29tZS5zdWJwYWNrYWdlLlNvbWVTdHJpbmcs\nIHNpbmNlIGl0IG1pZ2h0IGJlIHZhbGlkIGZvciBzb21lCiAgICAgICAgLy8g\nc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gb2YgT3BlbkpQQQogICAgICAgIFN0\ncmluZ1tdIHByZWZpeGVzID0gUHJvZHVjdERlcml2YXRpb25zLmdldENvbmZp\nZ3VyYXRpb25QcmVmaXhlcygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgcHJlZml4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHBy\nb3BOYW1lLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwcmVmaXhlc1tpXSkK\nICAgICAgICAgICAgICAgICYmIHByb3BOYW1lLmxlbmd0aCgpID4gcHJlZml4\nZXNbaV0ubGVuZ3RoKCkgKyAxCiAgICAgICAgICAgICAgICAmJiBwcm9wTmFt\nZS5pbmRleE9mKCcuJywgcHJlZml4ZXNbaV0ubGVuZ3RoKCkpIAogICAgICAg\nICAgICAgICAgPT0gcHJlZml4ZXNbaV0ubGVuZ3RoKCkKICAgICAgICAgICAg\nICAgICYmIHByb3BOYW1lLmluZGV4T2YoJy4nLCBwcmVmaXhlc1tpXS5sZW5n\ndGgoKSArIDEpID09IC0xKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAv\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBBdXRvLWNvbmZpZ3VyYXRp\nb24KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvKioKICAgICAq\nIFRoaXMgbWV0aG9kIGxvYWRzIHRoZSBuYW1lZCByZXNvdXJjZSBhcyBhIHBy\nb3BlcnRpZXMgZmlsZS4gSXQgaXMKICAgICAqIHVzZWZ1bCBmb3IgYXV0by1j\nb25maWd1cmF0aW9uIHRvb2xzIHNvIHVzZXJzIGNhbiBzcGVjaWZ5IGEKICAg\nICAqIDxjb2RlPnByb3BlcnRpZXM8L2NvZGU+IHZhbHVlIHdpdGggdGhlIG5h\nbWUgb2YgYSByZXNvdXJjZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nUHJvcGVydGllcyhTdHJpbmcgcmVzb3VyY2VOYW1lKSB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgICAgIFByb2R1Y3REZXJpdmF0aW9ucy5sb2FkKHJlc291\ncmNlTmFtZSwgbnVsbCwgCiAgICAgICAgICAgIGdldENsYXNzKCkuZ2V0Q2xh\nc3NMb2FkZXIoKSkuc2V0SW50byh0aGlzKTsKICAgICAgICBfYXV0byA9IHJl\nc291cmNlTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgbWV0aG9k\nIGxvYWRzIHRoZSBuYW1lZCBmaWxlIGFzIGEgcHJvcGVydGllcyBmaWxlLiBJ\ndCBpcwogICAgICogdXNlZnVsIGZvciBhdXRvLWNvbmZpZ3VyYXRpb24gdG9v\nbHMgc28gdXNlcnMgY2FuIHNwZWNpZnkgYQogICAgICogPGNvZGU+cHJvcGVy\ndGllc0ZpbGU8L2NvZGU+IHZhbHVlIHdpdGggdGhlIG5hbWUgb2YgYSBmaWxl\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRQcm9wZXJ0aWVzRmlsZShG\naWxlIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgUHJvZHVj\ndERlcml2YXRpb25zLmxvYWQoZmlsZSwgbnVsbCwgZ2V0Q2xhc3MoKS5nZXRD\nbGFzc0xvYWRlcigpKS4KICAgICAgICAgICAgc2V0SW50byh0aGlzKTsKICAg\nICAgICBfYXV0byA9IGZpbGUudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgcmVzb3VyY2UgdGhhdCB3YXMgc2V0IHZpYSBh\ndXRvLWNvbmZpZ3VyYXRpb24gbWV0aG9kcwogICAgICoge0BsaW5rICNzZXRQ\ncm9wZXJ0aWVzfSBvciB7QGxpbmsgI3NldFByb3BlcnRpZXNGaWxlfSwgb3Ig\nbnVsbCBpZiBub25lLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFBy\nb3BlcnRpZXNSZXNvdXJjZSgpIHsKICAgICAgICByZXR1cm4gX2F1dG87CiAg\nICB9CgogICAgLy8vLy8vLy8vLy8vLwogICAgLy8gVXRpbGl0aWVzCiAgICAv\nLy8vLy8vLy8vLy8vCgogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhbiBlcXVh\nbGl0eSBjaGVjayBiYXNlZCBvbiBlcXVhbGl0eSBvZiB2YWx1ZXMuCiAgICAg\nKiB7QGxpbmsgVmFsdWUjZXF1YWxzKE9iamVjdCkgRXF1YWxpdHl9IG9mIFZh\nbHVlcyB2YXJpZXMgaWYgdGhlIFZhbHVlIGlzCiAgICAgKiB7QGxpbmsgVmFs\ndWUjaXNEeW5hbWljKCkgZHluYW1pY30uICAKICAgICAqLwogICAgcHVibGlj\nIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewogICAgICAgIGlmIChv\ndGhlciA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg\nICBpZiAob3RoZXIgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgIGlmICghZ2V0Q2xhc3MoKS5lcXVhbHMob3RoZXIuZ2V0Q2xh\nc3MoKSkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8g\nY29tcGFyZSBwcm9wZXJ0aWVzCiAgICAgICAgQ29uZmlndXJhdGlvbkltcGwg\nY29uZiA9IChDb25maWd1cmF0aW9uSW1wbCkgb3RoZXI7CiAgICAgICAgaWYg\nKF92YWxzLnNpemUoKSAhPSBjb25mLmdldFZhbHVlcygpLmxlbmd0aCkKICAg\nICAgICAJcmV0dXJuIGZhbHNlOwogICAgICAgIEl0ZXJhdG9yIHZhbHVlcyA9\nIF92YWxzLml0ZXJhdG9yKCk7CiAgICAgICAgd2hpbGUgKHZhbHVlcy5oYXNO\nZXh0KCkpIHsKICAgICAgICAJVmFsdWUgdiA9IChWYWx1ZSl2YWx1ZXMubmV4\ndCgpOwogICAgICAgIAlWYWx1ZSB0aGF0ViA9IGNvbmYuZ2V0VmFsdWUodi5n\nZXRQcm9wZXJ0eSgpKTsKICAgICAgICAJaWYgKCF2LmVxdWFscyh0aGF0Vikp\nIHsKICAgICAgICAJCXJldHVybiBmYWxzZTsKICAgICAgICAJfQogICAgICAg\nIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAq\nIENvbXB1dGVzIGhhc2ggY29kZSBiYXNlZCBvbiB0aGUgaGFzaENvZGVzIG9m\nIHRoZSB2YWx1ZXMuCiAgICAgKiB7QGxpbmsgVmFsdWUjaGFzaENvZGUoKSBI\nYXNoQ29kZX0gb2YgYSBWYWx1ZSB2YXJpZXMgaWYgdGhlIFZhbHVlIGlzCiAg\nICAgKiB7QGxpbmsgVmFsdWUjaXNEeW5hbWljKCkgZHluYW1pY30uICAKICAg\nICAqLwogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICBJdGVy\nYXRvciB2YWx1ZXMgPSBfdmFscy5pdGVyYXRvcigpOwogICAgICAgIGludCBo\nYXNoID0gMDsKICAgICAgICB3aGlsZSAodmFsdWVzLmhhc05leHQoKSkgewog\nICAgICAgIAlWYWx1ZSB2ID0gKFZhbHVlKXZhbHVlcy5uZXh0KCk7CiAgICAg\nICAgCWhhc2ggKz0gdi5oYXNoQ29kZSgpOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gaGFzaDsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQgPGNv\nZGU+cHJvcE5hbWU8L2NvZGU+IHRvIGEgbG93ZXJjYXNlLXdpdGgtaHlwaGVu\ncy1zdHlsZSBzdHJpbmcuCiAgICAgKiBUaGlzIGFsZ29yaXRobSBpcyBvbmx5\nIGRlc2lnbmVkIGZvciBtaXhlcyBvZiB1cHBlcmNhc2UgYW5kIGxvd2VyY2Fz\nZSAKICAgICAqIGxldHRlcnMgYW5kIGxvbmUgZGlnaXRzLiBBIG1vcmUgc29w\naGlzdGljYXRlZCBjb252ZXJzaW9uIHNob3VsZCBwcm9iYWJseSAKICAgICAq\nIGJlIGhhbmRsZWQgYnkgYSBwcm9wZXIgcGFyc2VyIGdlbmVyYXRvciBvciBy\nZWd1bGFyIGV4cHJlc3Npb25zLgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIFN0cmluZyB0b1hNTE5hbWUoU3RyaW5nIHByb3BOYW1lKSB7CiAgICAgICAg\naWYgKHByb3BOYW1lID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVy\nKCk7CiAgICAgICAgY2hhciBjOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgcHJvcE5hbWUubGVuZ3RoKCk7IGkrKykgewogICAgICAgICAgICBjID0g\ncHJvcE5hbWUuY2hhckF0KGkpOwoKICAgICAgICAgICAgLy8gY29udmVydCBz\nZXF1ZW5jZXMgb2YgYWxsLWNhcHMgdG8gZG93bmNhc2Ugd2l0aCBkYXNoZXMg\nYXJvdW5kIAogICAgICAgICAgICAvLyB0aGVtLiBwdXQgYSB0cmFpbGluZyBj\nYXAgdGhhdCBpcyBmb2xsb3dlZCBieSBkb3duY2FzZSBpbnRvIHRoZQogICAg\nICAgICAgICAvLyBkb3duY2FzZSB3b3JkLgogICAgICAgICAgICBpZiAoaSAh\nPSAwICYmIENoYXJhY3Rlci5pc1VwcGVyQ2FzZShjKSAKICAgICAgICAgICAg\nICAgICYmIChDaGFyYWN0ZXIuaXNMb3dlckNhc2UocHJvcE5hbWUuY2hhckF0\nKGktMSkpCiAgICAgICAgICAgICAgICB8fCAoaSA+IDEgJiYgaSA8IHByb3BO\nYW1lLmxlbmd0aCgpIC0gMQogICAgICAgICAgICAgICAgJiYgQ2hhcmFjdGVy\nLmlzVXBwZXJDYXNlKHByb3BOYW1lLmNoYXJBdChpLTEpKSAKICAgICAgICAg\nICAgICAgICYmIENoYXJhY3Rlci5pc0xvd2VyQ2FzZShwcm9wTmFtZS5jaGFy\nQXQoaSsxKSkpKSkKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoJy0nKTsK\nICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHN1cnJvdW5kIHNlcXVlbmNl\ncyBvZiBkaWdpdHMgd2l0aCBkYXNoZXMuCiAgICAgICAgICAgIGlmIChpICE9\nIDAKICAgICAgICAgICAgICAgICYmICgoIUNoYXJhY3Rlci5pc0xldHRlcihj\nKSAmJiBDaGFyYWN0ZXIuaXNMZXR0ZXIocHJvcE5hbWUKICAgICAgICAgICAg\nICAgICAgICAuY2hhckF0KGkgLSAxKSkpIAogICAgICAgICAgICAgICAgfHwg\nKENoYXJhY3Rlci5pc0xldHRlcihjKSAmJiAhQ2hhcmFjdGVyLmlzTGV0dGVy\nKHByb3BOYW1lCiAgICAgICAgICAgICAgICAgICAgLmNoYXJBdChpIC0gMSkp\nKSkpCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCctJyk7CiAgICAgICAg\nICAgIAogICAgICAgICAgICBidWYuYXBwZW5kKENoYXJhY3Rlci50b0xvd2Vy\nQ2FzZShjKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBidWYudG9TdHJp\nbmcoKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBJbXBsZW1lbnRhdGlv\nbiBvZiB0aGUge0BsaW5rIEV4dGVybmFsaXphYmxlfSBpbnRlcmZhY2UgdG8g\ncmVhZCBmcm9tCiAgICAgKiB0aGUgcHJvcGVydGllcyB3cml0dGVuIGJ5IHtA\nbGluayAjd3JpdGVFeHRlcm5hbH0uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHJlYWRFeHRlcm5hbChPYmplY3RJbnB1dCBpbikKICAgICAgICB0aHJvd3Mg\nSU9FeGNlcHRpb24sIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewogICAgICAg\nIGZyb21Qcm9wZXJ0aWVzKChNYXApIGluLnJlYWRPYmplY3QoKSk7CiAgICAg\nICAgX3Byb3BzID0gKE1hcCkgaW4ucmVhZE9iamVjdCgpOwogICAgICAgIF9n\nbG9iYWxzID0gaW4ucmVhZEJvb2xlYW4oKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSB7QGxpbmsgRXh0ZXJuYWxpemFi\nbGV9IGludGVyZmFjZSB0byB3cml0ZQogICAgICogdGhlIHByb3BlcnRpZXMg\ncmV0dXJuZWQgYnkge0BsaW5rICN0b1Byb3BlcnRpZXN9LgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCB3cml0ZUV4dGVybmFsKE9iamVjdE91dHB1dCBvdXQp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgb3V0LndyaXRlT2JqZWN0\nKHRvUHJvcGVydGllcyh0cnVlKSk7CiAgICAgICAgb3V0LndyaXRlT2JqZWN0\nKF9wcm9wcyk7CiAgICAgICAgb3V0LndyaXRlQm9vbGVhbihfZ2xvYmFscyk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBVc2VzIHtAbGluayAjdG9Qcm9wZXJ0\naWVzfSBhbmQge0BsaW5rICNmcm9tUHJvcGVydGllc30gdG8gY2xvbmUKICAg\nICAqIGNvbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBPYmplY3Qg\nY2xvbmUoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQ29uc3RydWN0\nb3IgY29ucyA9IGdldENsYXNzKCkuZ2V0Q29uc3RydWN0b3IKICAgICAgICAg\nICAgICAgIChuZXcgQ2xhc3NbXXsgYm9vbGVhbi5jbGFzcyB9KTsKICAgICAg\nICAgICAgQ29uZmlndXJhdGlvbkltcGwgY2xvbmUgPSAoQ29uZmlndXJhdGlv\nbkltcGwpIGNvbnMubmV3SW5zdGFuY2UKICAgICAgICAgICAgICAgIChuZXcg\nT2JqZWN0W117IEJvb2xlYW4uRkFMU0UgfSk7CiAgICAgICAgICAgIGNsb25l\nLmZyb21Qcm9wZXJ0aWVzKHRvUHJvcGVydGllcyh0cnVlKSk7CiAgICAgICAg\nICAgIGNsb25lLl9wcm9wcyA9IChfcHJvcHMgPT0gbnVsbCkgPyBudWxsIDog\nbmV3IEhhc2hNYXAoX3Byb3BzKTsKICAgICAgICAgICAgY2xvbmUuX2dsb2Jh\nbHMgPSBfZ2xvYmFsczsKICAgICAgICAgICAgcmV0dXJuIGNsb25lOwogICAg\nICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAg\nICAgdGhyb3cgcmU7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXhjZXB0aW9uKGUpOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiByZW1vdmVWYWx1ZShW\nYWx1ZSB2YWwpIHsKICAgICAgICBpZiAoIV92YWxzLnJlbW92ZSh2YWwpKQog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgdmFsLnJlbW92ZUxp\nc3RlbmVyKHRoaXMpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAg\nIHB1YmxpYyBWYWx1ZSBhZGRWYWx1ZShWYWx1ZSB2YWwpIHsKICAgICAgICBf\ndmFscy5hZGQodmFsKTsKICAgICAgICB2YWwuYWRkTGlzdGVuZXIodGhpcyk7\nCiAgICAgICAgcmV0dXJuIHZhbDsKICAgIH0KCiAgICAvKioKICAgICAqIEFk\nZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIHNldCBvZiBjb25maWd1cmF0aW9u\nIHByb3BlcnRpZXMuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmdWYWx1ZSBh\nZGRTdHJpbmcoU3RyaW5nIHByb3BlcnR5KSB7CiAgICAgICAgU3RyaW5nVmFs\ndWUgdmFsID0gbmV3IFN0cmluZ1ZhbHVlKHByb3BlcnR5KTsKICAgICAgICBh\nZGRWYWx1ZSh2YWwpOwogICAgICAgIHJldHVybiB2YWw7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBzZXQgb2Yg\nY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzLgogICAgICovCiAgICBwdWJsaWMg\nRmlsZVZhbHVlIGFkZEZpbGUoU3RyaW5nIHByb3BlcnR5KSB7CiAgICAgICAg\nRmlsZVZhbHVlIHZhbCA9IG5ldyBGaWxlVmFsdWUocHJvcGVydHkpOwogICAg\nICAgIGFkZFZhbHVlKHZhbCk7CiAgICAgICAgcmV0dXJuIHZhbDsKICAgIH0K\nCiAgICAvKioKICAgICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIHNl\ndCBvZiBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMuCiAgICAgKi8KICAgIHB1\nYmxpYyBJbnRWYWx1ZSBhZGRJbnQoU3RyaW5nIHByb3BlcnR5KSB7CiAgICAg\nICAgSW50VmFsdWUgdmFsID0gbmV3IEludFZhbHVlKHByb3BlcnR5KTsKICAg\nICAgICBhZGRWYWx1ZSh2YWwpOwogICAgICAgIHJldHVybiB2YWw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBz\nZXQgb2YgY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzLgogICAgICovCiAgICBw\ndWJsaWMgRG91YmxlVmFsdWUgYWRkRG91YmxlKFN0cmluZyBwcm9wZXJ0eSkg\newogICAgICAgIERvdWJsZVZhbHVlIHZhbCA9IG5ldyBEb3VibGVWYWx1ZShw\ncm9wZXJ0eSk7CiAgICAgICAgYWRkVmFsdWUodmFsKTsKICAgICAgICByZXR1\ncm4gdmFsOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIHRoZSBnaXZlbiB2\nYWx1ZSB0byB0aGUgc2V0IG9mIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcy4K\nICAgICAqLwogICAgcHVibGljIEJvb2xlYW5WYWx1ZSBhZGRCb29sZWFuKFN0\ncmluZyBwcm9wZXJ0eSkgewogICAgICAgIEJvb2xlYW5WYWx1ZSB2YWwgPSBu\nZXcgQm9vbGVhblZhbHVlKHByb3BlcnR5KTsKICAgICAgICBhZGRWYWx1ZSh2\nYWwpOwogICAgICAgIHZhbC5zZXREZWZhdWx0KCJmYWxzZSIpOwogICAgICAg\nIHJldHVybiB2YWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdp\ndmVuIHZhbHVlIHRvIHRoZSBzZXQgb2YgY29uZmlndXJhdGlvbiBwcm9wZXJ0\naWVzLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nTGlzdFZhbHVlIGFkZFN0\ncmluZ0xpc3QoU3RyaW5nIHByb3BlcnR5KSB7CiAgICAgICAgU3RyaW5nTGlz\ndFZhbHVlIHZhbCA9IG5ldyBTdHJpbmdMaXN0VmFsdWUocHJvcGVydHkpOwog\nICAgICAgIGFkZFZhbHVlKHZhbCk7CiAgICAgICAgcmV0dXJuIHZhbDsKICAg\nIH0KCiAgICAvKioKICAgICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhl\nIHNldCBvZiBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMuCiAgICAgKi8KICAg\nIHB1YmxpYyBPYmplY3RWYWx1ZSBhZGRPYmplY3QoU3RyaW5nIHByb3BlcnR5\nKSB7CiAgICAgICAgT2JqZWN0VmFsdWUgdmFsID0gbmV3IE9iamVjdFZhbHVl\nKHByb3BlcnR5KTsKICAgICAgICBhZGRWYWx1ZSh2YWwpOwogICAgICAgIHJl\ndHVybiB2YWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVu\nIHZhbHVlIHRvIHRoZSBzZXQgb2YgY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVz\nLgogICAgICovCiAgICBwdWJsaWMgUGx1Z2luVmFsdWUgYWRkUGx1Z2luKFN0\ncmluZyBwcm9wZXJ0eSwgYm9vbGVhbiBzaW5nbGV0b24pIHsKICAgICAgICBQ\nbHVnaW5WYWx1ZSB2YWwgPSBuZXcgUGx1Z2luVmFsdWUocHJvcGVydHksIHNp\nbmdsZXRvbik7CiAgICAgICAgYWRkVmFsdWUodmFsKTsKICAgICAgICByZXR1\ncm4gdmFsOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIHRoZSBnaXZlbiB2\nYWx1ZSB0byB0aGUgc2V0IG9mIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcy4K\nICAgICAqLwogICAgcHVibGljIFBsdWdpbkxpc3RWYWx1ZSBhZGRQbHVnaW5M\naXN0KFN0cmluZyBwcm9wZXJ0eSkgewogICAgICAgIFBsdWdpbkxpc3RWYWx1\nZSB2YWwgPSBuZXcgUGx1Z2luTGlzdFZhbHVlKHByb3BlcnR5KTsKICAgICAg\nICBhZGRWYWx1ZSh2YWwpOwogICAgICAgIHJldHVybiB2YWw7CiAgICB9Cn0K\n","encoding":"base64"}

