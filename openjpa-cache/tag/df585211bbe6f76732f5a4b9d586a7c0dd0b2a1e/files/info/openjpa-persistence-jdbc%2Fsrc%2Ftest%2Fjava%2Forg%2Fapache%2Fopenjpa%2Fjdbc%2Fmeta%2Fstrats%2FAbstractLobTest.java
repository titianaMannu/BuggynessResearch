{"sha":"0745dfd2a91b4fc9d1f8781acf12a5c58219f881","node_id":"MDQ6QmxvYjIwNjM2NDowNzQ1ZGZkMmE5MWI0ZmM5ZDFmODc4MWFjZjEyYTVjNTgyMTlmODgx","size":10733,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0745dfd2a91b4fc9d1f8781acf12a5c58219f881","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KDQpwYWNrYWdlIG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLm1ldGEuc3RyYXRzOw0KDQppbXBvcnQgamF2YS5pby5JT0V4Y2Vw\ndGlvbjsNCg0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7DQppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7DQoNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlv\nbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlLkRhdGFD\nYWNoZVBDRGF0YTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5j\nb25mLkpEQkNDb25maWd1cmF0aW9uOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnk7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc3FsLk15U1FMRGljdGlvbmFyeTsNCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuT3JhY2xlRGljdGlvbmFyeTsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUG9zdGdyZXNE\naWN0aW9uYXJ5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNx\nbC5TUUxTZXJ2ZXJEaWN0aW9uYXJ5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7DQppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLkpQQUZhY2FkZUhlbHBlcjsNCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1h\nbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7DQoNCi8qKg0KICogVGhpcyBhYnN0\ncmFjdCBjbGFzcyBkZWZpbmVzIGFsbCB0aGUgdGVzdHMgZm9yIExPQlMuDQog\nKg0KICogQGF1dGhvciBJZ25hY2lvIEFuZHJldQ0KICogQHNpbmNlIDEuMS4w\nDQogKi8NCg0KcHVibGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0TG9iVGVz\ndCBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsNCg0KICAgIHB1YmxpYyB2\nb2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIHN1cGVy\nLnNldFVwKGdldExvYkVudGl0eUNsYXNzKCksIENMRUFSX1RBQkxFUywNCiAg\nICAgICAgICAgICJvcGVuanBhLkRhdGFDYWNoZSIsICJ0cnVlIiwNCiAgICAg\nICAgICAgICJvcGVuanBhLlJlbW90ZUNvbW1pdFByb3ZpZGVyIiwgInNqdm0i\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBpc0RhdGFiYXNlU3Vw\ncG9ydGVkKCkgew0KICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9ICgoSkRC\nQ0NvbmZpZ3VyYXRpb24pIGVtZi5nZXRDb25maWd1cmF0aW9uKCkpDQogICAg\nICAgICAgICAuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsNCiAgICAgICAg\naWYgKGRpY3QgaW5zdGFuY2VvZiBNeVNRTERpY3Rpb25hcnkgfHwNCiAgICAg\nICAgICAgIGRpY3QgaW5zdGFuY2VvZiBTUUxTZXJ2ZXJEaWN0aW9uYXJ5IHx8\nDQogICAgICAgICAgICBkaWN0IGluc3RhbmNlb2YgT3JhY2xlRGljdGlvbmFy\neSB8fA0KICAgICAgICAgICAgZGljdCBpbnN0YW5jZW9mIFBvc3RncmVzRGlj\ndGlvbmFyeSkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAg\nIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHB1Ymxp\nYyB2b2lkIGluc2VydChMb2JFbnRpdHkgbGUpIHsNCiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsNCiAgICAgICAgZW0u\ncGVyc2lzdChsZSk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHVi\nbGljIHZvaWQgdGVzdEluc2VydCgpIHsNCiAgICAgICAgaWYgKCFpc0RhdGFi\nYXNlU3VwcG9ydGVkKCkpIHJldHVybjsNCiAgICAgICAgaW5zZXJ0KG5ld0xv\nYkVudGl0eSgib09PT09PbyIsIDEpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0SW5zZXJ0QW5kU2VsZWN0KCkgdGhyb3dzIElPRXhjZXB0aW9u\nIHsNCiAgICAgICAgaWYgKCFpc0RhdGFiYXNlU3VwcG9ydGVkKCkpIHJldHVy\nbjsNCiAgICAgICAgU3RyaW5nIHMgPSAib29vT09Pb29vIjsNCiAgICAgICAg\naW5zZXJ0KG5ld0xvYkVudGl0eShzLCAxKSk7DQogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQoNCiAgICAgICAgUXVl\ncnkgcXVlcnkgPSBlbS5jcmVhdGVRdWVyeShnZXRTZWxlY3RRdWVyeSgpKTsN\nCiAgICAgICAgTG9iRW50aXR5IGVudGl0eSA9IChMb2JFbnRpdHkpIHF1ZXJ5\nLmdldFNpbmdsZVJlc3VsdCgpOw0KICAgICAgICBhc3NlcnROb3ROdWxsKGVu\ndGl0eS5nZXRTdHJlYW0oKSk7DQogICAgICAgIGFzc2VydEVxdWFscyhzLCBn\nZXRTdHJlYW1Db250ZW50QXNTdHJpbmcoZW50aXR5LmdldFN0cmVhbSgpKSk7\nDQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAg\nICAgIGVtLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVz\ndEluc2VydE51bGwoKSB7DQogICAgICAgIGlmICghaXNEYXRhYmFzZVN1cHBv\ncnRlZCgpKSByZXR1cm47DQogICAgICAgIGluc2VydChuZXdMb2JFbnRpdHko\nbnVsbCwgMSkpOw0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOw0KICAgICAgICBMb2JFbnRpdHkgbGUgPSAoTG9iRW50\naXR5KSBlbS5maW5kKGdldExvYkVudGl0eUNsYXNzKCksIDEpOw0KICAgICAg\nICBhc3NlcnROdWxsKGxlLmdldFN0cmVhbSgpKTsNCiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0uY2xvc2UoKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0VXBkYXRlKCkgdGhyb3dz\nIElPRXhjZXB0aW9uIHsNCiAgICAgICAgaWYgKCFpc0RhdGFiYXNlU3VwcG9y\ndGVkKCkpIHJldHVybjsNCiAgICAgICAgaW5zZXJ0KG5ld0xvYkVudGl0eSgi\nb09PT09PbyIsIDEpKTsNCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsNCiAgICAgICAgTG9iRW50aXR5IGVudGl0eSA9\nIChMb2JFbnRpdHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xhc3MoKSwgMSk7\nDQogICAgICAgIFN0cmluZyBzdHJpbmcgPSAiaUlJSUlJaSI7DQogICAgICAg\nIGNoYW5nZVN0cmVhbShlbnRpdHksIHN0cmluZyk7DQogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVtLmNsb3NlKCk7\nDQogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBl\nbnRpdHkgPSAoTG9iRW50aXR5KSBlbS5maW5kKGdldExvYkVudGl0eUNsYXNz\nKCksIDEpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoc3RyaW5nLCBnZXRTdHJl\nYW1Db250ZW50QXNTdHJpbmcoZW50aXR5LmdldFN0cmVhbSgpKSk7DQogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVt\nLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFVwZGF0\nZVdpdGhOdWxsKCkgew0KICAgICAgICBpZiAoIWlzRGF0YWJhc2VTdXBwb3J0\nZWQoKSkgcmV0dXJuOw0KICAgICAgICBpbnNlcnQobmV3TG9iRW50aXR5KCJv\nT09PT09vIiwgMSkpOw0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBMb2JFbnRpdHkgZW50aXR5ID0g\nKExvYkVudGl0eSkgZW0uZmluZChnZXRMb2JFbnRpdHlDbGFzcygpLCAxKTsN\nCiAgICAgICAgZW50aXR5LnNldFN0cmVhbShudWxsKTsNCiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0uY2xvc2Uo\nKTsNCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0K\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAgICAg\nIGVudGl0eSA9IChMb2JFbnRpdHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xh\nc3MoKSwgMSk7DQogICAgICAgIGFzc2VydE51bGwoZW50aXR5LmdldFN0cmVh\nbSgpKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsN\nCiAgICAgICAgZW0uY2xvc2UoKTsNCiAgICB9DQogICAgDQogICAgcHVibGlj\nIHZvaWQgdGVzdFVwZGF0ZUFOdWxsT2JqZWN0V2l0aG91dE51bGwoKSB0aHJv\nd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBpZiAoIWlzRGF0YWJhc2VTdXBw\nb3J0ZWQoKSkgcmV0dXJuOw0KICAgICAgICBpbnNlcnQobmV3TG9iRW50aXR5\nKG51bGwsIDEpKTsNCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsNCiAgICAgICAgTG9iRW50aXR5IGVudGl0eSA9IChM\nb2JFbnRpdHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xhc3MoKSwgMSk7DQog\nICAgICAgIFN0cmluZyBzdHJpbmcgPSAiaUlJSUlJaSI7DQogICAgICAgIGNo\nYW5nZVN0cmVhbShlbnRpdHksIHN0cmluZyk7DQogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQog\nICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBlbnRp\ndHkgPSAoTG9iRW50aXR5KSBlbS5maW5kKGdldExvYkVudGl0eUNsYXNzKCks\nIDEpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoc3RyaW5nLCBnZXRTdHJlYW1D\nb250ZW50QXNTdHJpbmcoZW50aXR5LmdldFN0cmVhbSgpKSk7DQogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVtLmNs\nb3NlKCk7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3REZWxl\ndGUoKSB7DQogICAgICAgIGlmICghaXNEYXRhYmFzZVN1cHBvcnRlZCgpKSBy\nZXR1cm47DQogICAgICAgIGluc2VydChuZXdMb2JFbnRpdHkoIm9PT09PT28i\nLCAxKSk7DQogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7DQogICAgICAgIExvYkVudGl0eSBlbnRpdHkgPSAoTG9iRW50\naXR5KSBlbS5maW5kKGdldExvYkVudGl0eUNsYXNzKCksIDEpOw0KICAgICAg\nICBlbS5yZW1vdmUoZW50aXR5KTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCiAgICAgICAg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAgICAgIFF1ZXJ5IHEgPSBl\nbS5jcmVhdGVRdWVyeShnZXRTZWxlY3RRdWVyeSgpKTsNCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDAsIHEuZ2V0UmVzdWx0TGlzdCgpLnNpemUoKSk7DQogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVt\nLmNsb3NlKCk7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RM\naWZlQ3ljbGVJbnNlcnRGbHVzaE1vZGlmeSgpIHsNCiAgICAgICAgaWYgKCFp\nc0RhdGFiYXNlU3VwcG9ydGVkKCkpIHJldHVybjsNCiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsNCiAgICAgICAgTG9i\nRW50aXR5IGxlID0gbmV3TG9iRW50aXR5KCJvT09PT09vIiwgMSk7DQogICAg\nICAgIGVtLnBlcnNpc3QobGUpOw0KICAgICAgICBlbS5mbHVzaCgpOw0KICAg\nICAgICBjaGFuZ2VTdHJlYW0obGUsICJpSUlJSUlpIik7DQogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVtLmNsb3Nl\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdExpZmVDeWNsZUxv\nYWRGbHVzaE1vZGlmeUZsdXNoKCkgew0KICAgICAgICBpZiAoIWlzRGF0YWJh\nc2VTdXBwb3J0ZWQoKSkgcmV0dXJuOw0KICAgICAgICBpbnNlcnQobmV3TG9i\nRW50aXR5KCJvT09PT09vIiwgMSkpOw0KICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBMb2JFbnRpdHkg\nZW50aXR5ID0gKExvYkVudGl0eSkgZW0uZmluZChnZXRMb2JFbnRpdHlDbGFz\ncygpLCAxKTsNCiAgICAgICAgZW0uZmx1c2goKTsNCiAgICAgICAgY2hhbmdl\nU3RyZWFtKGVudGl0eSwgImlJSUlJSWkiKTsNCiAgICAgICAgZW0uZmx1c2go\nKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAg\nICAgICAgZW0uY2xvc2UoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UmVhZGluZ011bHRpcGxlVGltZXNXaXRoQVNpbmdsZUNvbm5lY3Rpb24o\nKQ0KICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBpZiAo\nIWlzRGF0YWJhc2VTdXBwb3J0ZWQoKSkgcmV0dXJuOw0KICAgICAgICBpbnNl\ncnQobmV3TG9iRW50aXR5KCJvT09PT09vIiwgMSkpOw0KICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBM\nb2JFbnRpdHkgbGUgPSAoTG9iRW50aXR5KSBlbS5maW5kKGdldExvYkVudGl0\neUNsYXNzKCksIDEpOw0KICAgICAgICBTdHJpbmcgc3RyaW5nID0gImlJSUlJ\nSWkiOw0KICAgICAgICBjaGFuZ2VTdHJlYW0obGUsIHN0cmluZyk7DQogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVt\nLmNsb3NlKCk7DQogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0K\nICAgICAgICBsZSA9IChMb2JFbnRpdHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5\nQ2xhc3MoKSwgMSk7DQogICAgICAgIGFzc2VydE5vdE51bGwobGUuZ2V0U3Ry\nZWFtKCkpOw0KICAgICAgICBMb2JFbnRpdHkgZW50aXR5ID0gbmV3TG9iRW50\naXR5KCJvT09PT09vIiwgMik7DQogICAgICAgIGVtLnBlcnNpc3QoZW50aXR5\nKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKHN0cmluZywgZ2V0U3RyZWFtQ29u\ndGVudEFzU3RyaW5nKGxlLmdldFN0cmVhbSgpKSk7DQogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgIGVtLmNsb3NlKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdERhdGFDYWNoZSgpIHsN\nCiAgICAgICAgaWYgKCFpc0RhdGFiYXNlU3VwcG9ydGVkKCkpIHJldHVybjsN\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOw0KDQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsNCiAgICAgICAgTG9iRW50aXR5IGxlID0gbmV3TG9iRW50\naXR5KCJvT09PT09vIiwgMSk7DQogICAgICAgIGVtLnBlcnNpc3QobGUpOw0K\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOw0KICAgICAg\nICBPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mID0gZW1mLmdldENvbmZpZ3Vy\nYXRpb24oKTsNCiAgICAgICAgT2JqZWN0IG8gPSBlbS5nZXRPYmplY3RJZChs\nZSk7DQogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSA9IEpQQUZhY2FkZUhl\nbHBlci5nZXRNZXRhRGF0YShsZSk7DQogICAgICAgIE9iamVjdCBvYmplY3RJ\nZCA9IEpQQUZhY2FkZUhlbHBlci50b09wZW5KUEFPYmplY3RJZChtZXRhLCBv\nKTsNCiAgICAgICAgRGF0YUNhY2hlUENEYXRhIHBjZCA9DQogICAgICAgICAg\nICBjb25mLmdldERhdGFDYWNoZU1hbmFnZXJJbnN0YW5jZSgpDQogICAgICAg\nICAgICAgICAgLmdldFN5c3RlbURhdGFDYWNoZSgpLmdldChvYmplY3RJZCk7\nDQogICAgICAgIGFzc2VydEZhbHNlKHBjZC5pc0xvYWRlZChtZXRhLmdldEZp\nZWxkKCJzdHJlYW0iKS5nZXRJbmRleCgpKSk7DQogICAgICAgIGVtLmNsb3Nl\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdFNldFJlc2V0QW5k\nRmx1c2goKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBpZiAoIWlz\nRGF0YWJhc2VTdXBwb3J0ZWQoKSkgcmV0dXJuOw0KICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBMb2JF\nbnRpdHkgbGUgPSBuZXdMb2JFbnRpdHkoIm9PT09PT28iLCAxKTsNCiAgICAg\nICAgZW0ucGVyc2lzdChsZSk7DQogICAgICAgIGNoYW5nZVN0cmVhbShsZSwg\nImlJSUlJSWkiKTsNCiAgICAgICAgZW0uZmx1c2goKTsNCiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0uY2xvc2Uo\nKTsNCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0K\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAgICAg\nIExvYkVudGl0eSBlbnRpdHkgPSAoTG9iRW50aXR5KSBlbS5maW5kKGdldExv\nYkVudGl0eUNsYXNzKCksIDEpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoImlJ\nSUlJSWkiLCBnZXRTdHJlYW1Db250ZW50QXNTdHJpbmcoZW50aXR5LmdldFN0\ncmVhbSgpKSk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7DQogICAgICAgIGVtLmNsb3NlKCk7DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgdGVzdFNldEZsdXNoQW5kUmVzZXQoKSB0aHJvd3MgSU9FeGNlcHRp\nb24gew0KICAgICAgICBpZiAoIWlzRGF0YWJhc2VTdXBwb3J0ZWQoKSkgcmV0\ndXJuOw0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsNCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOw0KICAgICAgICBMb2JFbnRpdHkgbGUgPSBuZXdMb2JFbnRpdHko\nIm9PT09PT28iLCAxKTsNCiAgICAgICAgZW0ucGVyc2lzdChsZSk7DQogICAg\nICAgIGVtLmZsdXNoKCk7DQogICAgICAgIGNoYW5nZVN0cmVhbShsZSwgImlJ\nSUlJSWkiKTsNCiAgICAgICAgTG9iRW50aXR5IGVudGl0eSA9IChMb2JFbnRp\ndHkpIGVtLmZpbmQoZ2V0TG9iRW50aXR5Q2xhc3MoKSwgMSk7DQogICAgICAg\nIGFzc2VydEVxdWFscygiaUlJSUlJaSIsIGdldFN0cmVhbUNvbnRlbnRBc1N0\ncmluZyhlbnRpdHkuZ2V0U3RyZWFtKCkpKTsNCiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgZW0uY2xvc2UoKTsNCiAg\nICB9DQoNCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgQ2xhc3MgZ2V0TG9iRW50\naXR5Q2xhc3MoKTsNCg0KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBTdHJpbmcg\nZ2V0U3RyZWFtQ29udGVudEFzU3RyaW5nKE9iamVjdCBvKQ0KICAgICAgICB0\naHJvd3MgSU9FeGNlcHRpb247DQoNCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qg\nTG9iRW50aXR5IG5ld0xvYkVudGl0eShTdHJpbmcgcywgaW50IGlkKTsNCg0K\nICAgIHByb3RlY3RlZCBhYnN0cmFjdCBMb2JFbnRpdHkgbmV3TG9iRW50aXR5\nRm9yTG9hZENvbnRlbnQoU3RyaW5nIHMsIGludCBpZCk7DQoNCiAgICBwcm90\nZWN0ZWQgYWJzdHJhY3QgU3RyaW5nIGdldFNlbGVjdFF1ZXJ5KCk7DQoNCiAg\nICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBjaGFuZ2VTdHJlYW0oTG9iRW50\naXR5IGxlLCBTdHJpbmcgcyk7DQp9DQo=\n","encoding":"base64"}

