{"sha":"0e2b7566a515a87413a01de52eb295f000d450d6","node_id":"MDQ6QmxvYjIwNjM2NDowZTJiNzU2NmE1MTVhODc0MTNhMDFkZTUyZWIyOTVmMDAwZDQ1MGQ2","size":21753,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0e2b7566a515a87413a01de52eb295f000d450d6","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZGF0YWNhY2hlOw0KDQppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuRW50aXR5TWFuYWdlcjsNCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5Mb2NrTW9kZVR5cGU7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlckltcGw7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkVudGl0eU5vdEZvdW5kRXhjZXB0\naW9uOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5P\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEk7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nU1BJOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5T\ndG9yZUNhY2hlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5TdG9yZUNhY2hlSW1wbDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuY2FjaGUuY29tbW9uLmFwcHMuQmlkaXJlY3Rpb25h\nbE9uZTJPbmVPd25lZDsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuY2FjaGUuY29tbW9uLmFwcHMuQmlkaXJlY3Rpb25hbE9uZTJP\nbmVPd25lcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuY29tbW9uLnV0aWxzLkFic3RyYWN0VGVzdENhc2U7DQppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmRhdGFjYWNoZS5jb21tb24u\nYXBwcy5QT2JqZWN0Ow0KDQovKioNCiAqIFRlc3RzIHZhcmlvdXMgYXBwbGlj\nYXRpb24gYmVoYXZpb3Igd2l0aCBvciB3aXRob3V0IERhdGFDYWNoZS4NCiAq\nIElkZWFsbHksIGFuIGFwcGxpY2F0aW9uIHNob3VsZCBiZWhhdmUgaWRlbnRp\nY2FsbHkgaXJyZXNwZWN0aXZlIG9mIHRoZSANCiAqIERhdGFDYWNoZS4gSG93\nZXZlciwgcHVycG9zZSBvZiB0aGlzIHRlc3QgaXMgdG8gaWRlbnRpZnkgc3Bl\nY2lmaWMgc2NlbmFyaW9zDQogKiB3aGVyZSB0aGlzIGlkZWFsIGlzIHZpb2xh\ndGVkLiBUaGUgdGVzdCBjYXNlIGFsc28gZGVtb25zdHJhdGVzLCB3aGVyZXZl\ncg0KICogcG9zc2libGUsIHdoYXQgZXh0cmEgc3RlcCBhbiBhcHBsaWNhdGlv\nbiBtYXkgdGFrZSB0byBlbnN1cmUgdGhhdCBpdHMgDQogKiBiZWhhdmlvciB3\naXRoIG9yIHdpdGhvdXQgRGF0YUNhY2hlIHJlbWFpbnMgaWRlbnRpY2FsLiAg\nIA0KICogDQogKiBTbyBmYXIgZm9sbG93aW5nIHVzZSBjYXNlcyBhcmUgZm91\nbmQgdG8gZGVtb25zdHJhdGUgYmVoYXZpb3JhbCBkaWZmZXJlbmNlczoNCiAq\nIDEuIEluY29uc2lzdGVudCBiaWRpcmVjdGlvbmFsIHJlbGF0aW9uDQogKiAy\nLiBSZWZyZXNoDQogKiANCiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcg0KICog\nDQogKi8NCnB1YmxpYyBjbGFzcyBUZXN0RGF0YUNhY2hlQmVoYXZlc0lkZW50\naWNhbCBleHRlbmRzIEFic3RyYWN0VGVzdENhc2Ugew0KCXByaXZhdGUgc3Rh\ndGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSBlbWZXaXRoRGF0\nYUNhY2hlOw0KCXByaXZhdGUgc3RhdGljIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeVNQSSBlbWZXaXRob3V0RGF0YUNhY2hlOw0KCQ0KCXByaXZhdGUg\nc3RhdGljIGZpbmFsIGJvb2xlYW4gV0lUSF9EQVRBQ0FDSEUgPSB0cnVlOw0K\nCXByaXZhdGUgc3RhdGljIGZpbmFsIGJvb2xlYW4gQ09OU0lTVEVOVCA9IHRy\ndWU7DQoJcHJpdmF0ZSBzdGF0aWMgZmluYWwgYm9vbGVhbiBESVJUWSA9IHRy\ndWU7DQoJcHJpdmF0ZSBzdGF0aWMgZmluYWwgYm9vbGVhbiBSRUZSRVNIX0ZS\nT01fREFUQUNBQ0hFID0gdHJ1ZTsNCglwcml2YXRlIHN0YXRpYyBmaW5hbCBM\nb2NrTW9kZVR5cGUgTk9MT0NLID0gbnVsbDsNCglwcml2YXRlIHN0YXRpYyBm\naW5hbCBDbGFzcyBFTlRJVFlfTk9UX0ZPVU5EX0VSUk9SID0gRW50aXR5Tm90\nRm91bmRFeGNlcHRpb24uY2xhc3M7DQoJcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nQ2xhc3MgTk9fRVJST1IgPSBudWxsOw0KDQoJcHJpdmF0ZSBzdGF0aWMgZmlu\nYWwgU3RyaW5nIE1BUktFUl9EQVRBQ0FDSEUgPSAiaW4gRGF0YUNhY2hlIjsN\nCglwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgTUFSS0VSX0RBVEFCQVNF\nICA9ICJpbiBEYXRhYmFzZSI7DQoJcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3Ry\naW5nIE1BUktFUl9DQUNIRSAgICAgPSAiaW4gT2JqZWN0IENhY2hlIjsNCglw\ncml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgTUFSS0VSX0RJUlRZX0NBQ0hF\nID0gImluIE9iamVjdCBDYWNoZSAoZGlydHkpIjsNCglwcml2YXRlIHN0YXRp\nYyBsb25nIElEX0NPVU5URVIgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMo\nKTsNCgkNCg0KCS8qKg0KCSAqIFNldHMgdXAgdHdvIEVudGl0eU1hbmFnZXJG\nYWN0b3J5OiBvbmUgd2l0aCBEYXRhQ2FjaGUgYW5vdGhlciB3aXRob3V0Lg0K\nCSAqLw0KCXB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7\nDQoJCXN1cGVyLnNldFVwKCk7DQoJCWlmIChlbWZXaXRoRGF0YUNhY2hlID09\nIG51bGwpIHsNCgkJCWVtZldpdGhEYXRhQ2FjaGUgPSBjcmVhdGVFTUYoDQoJ\nCQkJCSJvcGVuanBhLmpkYmMuU3luY2hyb25pemVNYXBwaW5ncyIsCSJidWls\nZFNjaGVtYSIsIA0KCQkJCQkib3BlbmpwYS5SdW50aW1lVW5lbmhhbmNlZENs\nYXNzZXMiLAkidW5zdXBwb3J0ZWQiLCANCgkJCQkJIm9wZW5qcGEuRGF0YUNh\nY2hlIiwgInRydWUiLA0KCQkJCQkib3BlbmpwYS5SZW1vdGVDb21taXRQcm92\naWRlciIsICJzanZtIiwNCgkJCQkJIm9wZW5qcGEuamRiYy5VcGRhdGVNYW5h\nZ2VyIiwgImNvbnN0cmFpbnQiLA0KCQkJCQlQT2JqZWN0LmNsYXNzLA0KCQkJ\nCQlCaWRpcmVjdGlvbmFsT25lMk9uZU93bmVyLmNsYXNzLA0KCQkJCQlCaWRp\ncmVjdGlvbmFsT25lMk9uZU93bmVkLmNsYXNzLCBDTEVBUl9UQUJMRVMpOw0K\nCQkJZW1mV2l0aG91dERhdGFDYWNoZSA9IGNyZWF0ZUVNRigNCgkJCQkJIm9w\nZW5qcGEuUnVudGltZVVuZW5oYW5jZWRDbGFzc2VzIiwJInVuc3VwcG9ydGVk\nIiwgDQoJCQkJCSJvcGVuanBhLkRhdGFDYWNoZSIsICJmYWxzZSIsDQoJCQkJ\nCSJvcGVuanBhLmpkYmMuVXBkYXRlTWFuYWdlciIsICJjb25zdHJhaW50IiwN\nCgkJCQkJUE9iamVjdC5jbGFzcywNCgkJCQkJQmlkaXJlY3Rpb25hbE9uZTJP\nbmVPd25lZC5jbGFzcywNCgkJCQkJQmlkaXJlY3Rpb25hbE9uZTJPbmVPd25l\nci5jbGFzcywgQ0xFQVJfVEFCTEVTKTsNCg0KCQkJYXNzZXJ0Tm90TnVsbChl\nbWZXaXRoRGF0YUNhY2hlKTsNCgkJCWFzc2VydE5vdE51bGwoZW1mV2l0aG91\ndERhdGFDYWNoZSk7DQoNCgkJCS8vIFN0b3JlQ2FjaGUgaXMsIGJ5IGRlc2ln\nbiwgYWx3YXlzIG5vbi1udWxsIA0KCQkJYXNzZXJ0Tm90TnVsbChlbWZXaXRo\nRGF0YUNhY2hlLmdldFN0b3JlQ2FjaGUoKSk7DQoJCQlhc3NlcnROb3ROdWxs\nKGVtZldpdGhvdXREYXRhQ2FjaGUuZ2V0U3RvcmVDYWNoZSgpKTsNCg0KCQkJ\nLy8gaG93ZXZlciwgZm9sbG93aW5nIGRpc3Rpbmd1aXNoZXMgd2hldGhlciBE\nYXRhQ2FjaGUgaXMgYWN0aXZlICANCgkJCWFzc2VydFRydWUoaXNEYXRhQ2Fj\naGVBY3RpdmUoZW1mV2l0aERhdGFDYWNoZSkpOw0KCQkJYXNzZXJ0RmFsc2Uo\naXNEYXRhQ2FjaGVBY3RpdmUoZW1mV2l0aG91dERhdGFDYWNoZSkpOw0KCQl9\nDQoJfQ0KCQ0KCS8qKg0KCSAqIEFmZmlybXMgdmlhIGludGVybmFsIHN0cnVj\ndHVyZXMgaWYgdGhlIGdpdmVuIGZhY3RvcnkgaXMgY29uZmlndXJlZCB3aXRo\nDQoJICogYWN0aXZlIERhdGFDYWNoZS4gQmVjYXVzZSwgZXZlbiB3aGVuIERh\ndGFDYWNoZSBpcyBjb25maWd1cmVkIHRvIGJlDQoJICogZmFsc2UsIGEgbm8t\nb3AgU3RvcmVDYWNoZSBpcyBpbnN0YW50aWF0ZWQgYnkgZGVzaWduLg0KCSAq\nLw0KCWJvb2xlYW4gaXNEYXRhQ2FjaGVBY3RpdmUoT3BlbkpQQUVudGl0eU1h\nbmFnZXJGYWN0b3J5U1BJIGVtZikgew0KCQlyZXR1cm4gKChTdG9yZUNhY2hl\nSW1wbCkgZW1mLmdldFN0b3JlQ2FjaGUoKSkuZ2V0RGVsZWdhdGUoKSAhPSBu\ndWxsDQoJCSAgICAmJiBlbWYuZ2V0Q29uZmlndXJhdGlvbigpDQoJCSAgICAg\nICAgICAuZ2V0RGF0YUNhY2hlTWFuYWdlckluc3RhbmNlKCkNCgkJICAgICAg\nICAgIC5nZXRTeXN0ZW1EYXRhQ2FjaGUoKSAhPSBudWxsOw0KCX0NCg0KCS8q\nKg0KCSAqIENyZWF0ZSBvbmUtdG8tb25lIGJpZGlyZWN0aW9uYWwgcmVsYXRp\nb24gKG1heSBvciBtYXkgbm90IGJlIGNvbnNpc3RlbnQpDQoJICogYmV0d2Vl\nbiB0d28gcGFpcnMgb2YgaW5zdGFuY2VzLiBDcmVhdGVzIGZvdXIgaW5zdGFu\nY2VzIE93bmVyMSwgT3duZWQxLA0KCSAqIE93bmVyMiwgT3duZWQyLiBUaGUg\nZmlyc3QgaW5zdGFuY2UgaGFzIHRoZSBnaXZlbiBpZC4gVGhlIGlkIG9mIHRo\nZSBvdGhlcg0KCSAqIGluc3RhbmNlcyBtb25vdG9uaWNhbGx5IGluY3JlYXNl\nIGJ5IDEuIFRoZSByZWxhdGlvbnNoaXAgaXMgc2V0IGVpdGhlcg0KCSAqIGNv\nbnNpc3RlbnRseSBvciBpbmNvbnNpc3RlbnRseS4gQ29uc2lzdGVudCByZWxh\ndGlvbiBpcyB3aGVuIE93bmVyMSBwb2ludHMNCgkgKiB0byBPd25lZDEgYW5k\nIE93bmVkMSBwb2ludHMgYmFjayB0byBPd25lcjEuIEluY29uc2lzdGVudCBy\nZWxhdGlvbiBpcyB3aGVuDQoJICogT3duZXIxIHBvaW50cyB0byBPd25lZDEg\nYnV0IE93bmVkMSBwb2ludHMgdG8gT3duZXIyIGluc3RlYWQgb2YgT3duZXIx\nLg0KCSAqIA0KCSAqIA0KCSAqIEBwYXJhbSBlbQ0KCSAqICAgICAgICAgICAg\ndGhlIGVudGl0eSBtYW5hZ2VyIHRvIHBlcnNpc3QgdGhlIGluc3RhbmNlcw0K\nCSAqIEBwYXJhbSBpZA0KCSAqICAgICAgICAgICAgdGhlIGlkZW50aWZpZXIg\nb2YgdGhlIGZpcnN0IG93bmVyIGluc3RhbmNlLiBUaGUgaWRlbnRpZmllciBm\nb3INCgkgKiAgICAgICAgICAgIHRoZSBvdGhlciBpbnN0YW5jZXMgYXJlIHNl\ncXVlbnRpYWwgaW4gb3JkZXIgb2YgY3JlYXRpb24uDQoJICogQHBhcmFtIGNv\nbnNpc3RlbnQNCgkgKiAgICAgICAgICAgIGlmIHRydWUgc2V0cyB0aGUgcmVs\nYXRpb25zaGlwIGFzIGNvbnNpc3RlbnQuDQoJICovDQoJcHVibGljIHZvaWQg\nY3JlYXRlQmlkaXJlY3Rpb25hbFJlbGF0aW9uKEVudGl0eU1hbmFnZXIgZW0s\nIGxvbmcgaWQsDQoJCQlib29sZWFuIGNvbnNpc3RlbnQpIHsNCgkJQmlkaXJl\nY3Rpb25hbE9uZTJPbmVPd25lciBvd25lcjEgPSBuZXcgQmlkaXJlY3Rpb25h\nbE9uZTJPbmVPd25lcigpOw0KCQlCaWRpcmVjdGlvbmFsT25lMk9uZU93bmVk\nIG93bmVkMSA9IG5ldyBCaWRpcmVjdGlvbmFsT25lMk9uZU93bmVkKCk7DQoJ\nCUJpZGlyZWN0aW9uYWxPbmUyT25lT3duZXIgb3duZXIyID0gbmV3IEJpZGly\nZWN0aW9uYWxPbmUyT25lT3duZXIoKTsNCgkJQmlkaXJlY3Rpb25hbE9uZTJP\nbmVPd25lZCBvd25lZDIgPSBuZXcgQmlkaXJlY3Rpb25hbE9uZTJPbmVPd25l\nZCgpOw0KCQkNCgkJb3duZXIxLnNldElkKGlkKyspOw0KCQlvd25lZDEuc2V0\nSWQoaWQrKyk7DQoJCW93bmVyMi5zZXRJZChpZCsrKTsNCgkJb3duZWQyLnNl\ndElkKGlkKyspOw0KCQkNCgkJb3duZXIxLnNldE5hbWUoIk93bmVyMSIpOw0K\nCQlvd25lZDEuc2V0TmFtZSgiT3duZWQxIik7DQoJCW93bmVkMi5zZXROYW1l\nKCJPd25lZDIiKTsNCgkJb3duZXIyLnNldE5hbWUoIk93bmVyMiIpOw0KDQoJ\nCW93bmVyMS5zZXRPd25lZChvd25lZDEpOw0KCQlvd25lcjIuc2V0T3duZWQo\nb3duZWQyKTsNCg0KCQlpZiAoY29uc2lzdGVudCkgew0KCQkJb3duZWQxLnNl\ndE93bmVyKG93bmVyMSk7DQoJCQlvd25lZDIuc2V0T3duZXIob3duZXIyKTsN\nCgkJfSBlbHNlIHsNCgkJCW93bmVkMS5zZXRPd25lcihvd25lcjIpOw0KCQkJ\nb3duZWQyLnNldE93bmVyKG93bmVyMSk7DQoJCX0NCg0KCQllbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7DQoJCWVtLnBlcnNpc3Qob3duZXIxKTsNCgkJ\nZW0ucGVyc2lzdChvd25lZDEpOw0KCQllbS5wZXJzaXN0KG93bmVyMik7DQoJ\nCWVtLnBlcnNpc3Qob3duZWQyKTsNCgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsNCgkJZW0uY2xlYXIoKTsNCgl9DQoNCgkvKioNCgkgKiBWZXJp\nZmllcyB0aGF0IGJpZGlyZWN0aW9uYWxseSByZWxhdGVkIG9iamVjdHMgY2Fu\nIGJlIHBlcnNpc3RlZCANCgkgKiBhbmQgbGF0ZXIgcmV0cmlldmVkIGluIGEg\nZGlmZmVyZW50IHRyYW5zYWN0aW9uLiANCgkgKiANCgkgKiBDcmVhdGVzIGlu\ndGVycmVsYXRlZCBzZXQgb2YgZm91ciBpbnN0YW5jZXMuDQoJICogRXN0YWJs\naXNoIHRoZWlyIHJlbGF0aW9uIGVpdGhlciBjb25zaXN0ZW50bHkgb3IgaW5j\nb25zaXN0ZW50bHkgYmFzZWQNCgkgKiBvbiB0aGUgZ2l2ZW4gZmxhZy4NCgkg\nKiBQZXJzaXN0IHRoZW0gYW5kIHRoZW4gY2xlYXIgdGhlIGNvbnRleHQuIA0K\nCSAqIEZldGNoIHRoZSBpbnN0YW5jZXMgaW4gbWVtb3J5IGFnYWluIGJ5IHRo\nZWlyIGlkZW50aWZpZXJzLiANCgkgKiBDb21wYXJlIHRoZSBpbnRlcnJlbGF0\naW9ucyBiZXR3ZWVuIHRoZSBmZXRjaGVkIGluc3RhbmNlcyB3aXRoIHRoZSAN\nCgkgKiByZWxhdGlvbnMgb2YgdGhlIG9yaWdpbmFsIGluc3RhbmNlcyAod2hp\nY2ggY2FuIGJlIGNvbnNpc3RlbnQgb3IgDQoJICogaW5jb25zaXN0ZW50KS4g\nDQoJICogDQoJICogVGhlIG1hcHBpbmcgc3BlY2lmaWNhdGlvbiBpcyBzdWNo\nIHRoYXQgdGhlIGJpZGlyZWN0aW9uYWwgcmVsYXRpb24gaXMgDQoJICogc3Rv\ncmVkIGluIGRhdGFiYXNlIGJ5IGEgc2luZ2xlIGZvcmVpZ24ga2V5LiBIZW5j\nZSBkYXRhYmFzZSByZWxhdGlvbg0KCSAqIGlzIGFsd2F5cyBjb25zaXN0ZW50\nLiBIZW5jZSB0aGUgaW5zdGFuY2VzIHJldHJpZXZlZCBmcm9tIGRhdGFiYXNl\nIGFyZQ0KCSAqIGFsd2F5cyBjb25zaXN0ZW50bHkgcmVsYXRlZCBpcnJlc3Bl\nY3RpdmUgb2Ygd2hldGhlciB0aGV5IHdlcmUgY3JlYXRlZA0KCSAqIHdpdGgg\nY29uc2lzdGVudCBvciBpbmNvbnNpc3RlbnQgcmVsYXRpb24uDQoJICogSG93\nZXZlciwgd2hlbiB0aGUgaW5zdGFuY2VzIGFyZSByZXRyaWV2ZWQgZnJvbSB0\naGUgZGF0YSBjYWNoZSwgZGF0YSBjYWNoZQ0KCSAqIHdpbGwgcHJlc2VydmUg\ndGhlIGluLW1lbW9yeSByZWxhdGlvbnMgZXZlbiB3aGVuIHRoZXkgYXJlIGlu\nY29uc2lzdGVudC4NCgkgKiAgICANCgkgKiBAcGFyYW0gdXNlRGF0YUNhY2hl\nDQoJICogICAgICAgICAgICB1c2UgRGF0YUNhY2hlDQoJICogQHBhcmFtIGNv\nbnNpc3RlbnQNCgkgKiAgICAgICAgICAgIGFzc3VtZSB0aGF0IHRoZSByZWxh\ndGlvbnNoaXAgd2VyZSBjcmVhdGVkIGFzIGNvbnNpc3RlbnQuDQoJICovDQoJ\ncHVibGljIHZvaWQgdmVyaWZ5QmlkaXJlY3Rpb25hbFJlbGF0aW9uKGJvb2xl\nYW4gdXNlRGF0YUNhY2hlLA0KCQkJYm9vbGVhbiBjcmVhdGVDb25zaXN0ZW50\nLCBib29sZWFuIGV4cGVjdENvbnNpc3RlbnQpIHsNCgkJRW50aXR5TWFuYWdl\nciBlbSA9ICh1c2VEYXRhQ2FjaGUpIA0KCQkgICAgICAgICAgICAgICAgID8g\nZW1mV2l0aERhdGFDYWNoZS5jcmVhdGVFbnRpdHlNYW5hZ2VyKCkgDQoJCSAg\nICAgICAgICAgICAgICAgOiBlbWZXaXRob3V0RGF0YUNhY2hlLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsNCgkJICAgICAgICAgICAgICAgICANCgkJbG9uZyBp\nZCA9IElEX0NPVU5URVIrKzsNCgkJSURfQ09VTlRFUiArPSA0Ow0KCQljcmVh\ndGVCaWRpcmVjdGlvbmFsUmVsYXRpb24oZW0sIGlkLCBjcmVhdGVDb25zaXN0\nZW50KTsNCgkJDQoJCQ0KCQlCaWRpcmVjdGlvbmFsT25lMk9uZU93bmVyIG93\nbmVyMSA9IGVtLmZpbmQoQmlkaXJlY3Rpb25hbE9uZTJPbmVPd25lci5jbGFz\ncywgaWQpOw0KCQlCaWRpcmVjdGlvbmFsT25lMk9uZU93bmVkIG93bmVkMSA9\nIGVtLmZpbmQoQmlkaXJlY3Rpb25hbE9uZTJPbmVPd25lZC5jbGFzcywgaWQg\nKyAxKTsNCgkJQmlkaXJlY3Rpb25hbE9uZTJPbmVPd25lciBvd25lcjIgPSBl\nbS5maW5kKEJpZGlyZWN0aW9uYWxPbmUyT25lT3duZXIuY2xhc3MsIGlkICsg\nMik7DQoJCUJpZGlyZWN0aW9uYWxPbmUyT25lT3duZWQgb3duZWQyID0gZW0u\nZmluZChCaWRpcmVjdGlvbmFsT25lMk9uZU93bmVkLmNsYXNzLCBpZCArIDMp\nOw0KDQoJCWFzc2VydE5vdE51bGwob3duZXIxKTsNCgkJYXNzZXJ0Tm90TnVs\nbChvd25lcjIpOw0KCQlhc3NlcnROb3ROdWxsKG93bmVkMSk7DQoJCWFzc2Vy\ndE5vdE51bGwob3duZWQyKTsNCg0KCQlhc3NlcnRFcXVhbHMob3duZXIxLCBl\neHBlY3RDb25zaXN0ZW50IA0KCQkJCQk/IG93bmVyMS5nZXRPd25lZCgpLmdl\ndE93bmVyKCkgDQoJCQkJCTogb3duZXIyLmdldE93bmVkKCkuZ2V0T3duZXIo\nKSk7DQoJCWFzc2VydEVxdWFscyhvd25lcjIsIGV4cGVjdENvbnNpc3RlbnQg\nDQoJCQkJCT8gb3duZXIyLmdldE93bmVkKCkuZ2V0T3duZXIoKSANCgkJCQkg\nICAgOiBvd25lcjEuZ2V0T3duZWQoKS5nZXRPd25lcigpKTsNCg0KDQoJCWFz\nc2VydEVxdWFscyhvd25lZDEsIG93bmVyMS5nZXRPd25lZCgpKTsNCgkJYXNz\nZXJ0RXF1YWxzKGV4cGVjdENvbnNpc3RlbnQgPyBvd25lcjEgOiBvd25lcjIs\nIG93bmVkMS5nZXRPd25lcigpKTsNCgkJYXNzZXJ0RXF1YWxzKG93bmVkMiwg\nb3duZXIyLmdldE93bmVkKCkpOw0KCQlhc3NlcnRFcXVhbHMoZXhwZWN0Q29u\nc2lzdGVudCA/IG93bmVyMiA6IG93bmVyMSwgb3duZWQyLmdldE93bmVyKCkp\nOw0KCX0NCg0KCXB1YmxpYyB2b2lkIHRlc3RDb25zaXRlbnRCaWRpcmVjdGlv\nbmFsUmVsYXRpb25Jc1ByZXNlcnZlZFdpdGhEYXRhQ2FjaGUoKSB7DQoJCXZl\ncmlmeUJpZGlyZWN0aW9uYWxSZWxhdGlvbihXSVRIX0RBVEFDQUNIRSwgQ09O\nU0lTVEVOVCwgQ09OU0lTVEVOVCk7DQoJfQ0KDQoJcHVibGljIHZvaWQgdGVz\ndENvbnNpdGVudEJpZGlyZWN0aW9uYWxSZWxhdGlvbklzUHJlc2VydmVkV2l0\naG91dERhdGFDYWNoZSgpIHsNCgkJdmVyaWZ5QmlkaXJlY3Rpb25hbFJlbGF0\naW9uKCFXSVRIX0RBVEFDQUNIRSwgQ09OU0lTVEVOVCwgQ09OU0lTVEVOVCk7\nDQoJfQ0KDQoJcHVibGljIHZvaWQgdGVzdEluY29uc2l0ZW50QmlkaXJlY3Rp\nb25hbFJlbGF0aW9uSXNQcmVzZXJ2ZWRXaXRoRGF0YUNhY2hlKCkgew0KCQl2\nZXJpZnlCaWRpcmVjdGlvbmFsUmVsYXRpb24oV0lUSF9EQVRBQ0FDSEUsICFD\nT05TSVNURU5ULCAhQ09OU0lTVEVOVCk7DQoJfQ0KDQoJcHVibGljIHZvaWQg\ndGVzdEluY29uc2l0ZW50QmlkaXJlY3Rpb25hbFJlbGF0aW9uSXNOb3RQcmVz\nZXJ2ZWRXaXRob3V0RGF0YUNhY2hlKCkgew0KCQl2ZXJpZnlCaWRpcmVjdGlv\nbmFsUmVsYXRpb24oIVdJVEhfREFUQUNBQ0hFLCAhQ09OU0lTVEVOVCwgQ09O\nU0lTVEVOVCk7DQoJfQ0KCQ0KCS8qKg0KCSAqIFZlcmlmeSB0aGF0IHJlZnJl\nc2goKSBtYXkgZmV0Y2ggc3RhdGUgZnJvbSBlaXRoZXIgdGhlIGRhdGEgY2Fj\naGUgb3IgdGhlDQoJICogZGF0YWJhc2UgYmFzZWQgb24gZGlmZmVyZW50IGNv\nbmRpdGlvbnMuIA0KCSAqIFRoZSBjb25kaXRpb25zIHRoYXQgaW1wYWN0IGFy\nZSANCgkgKiBhKSB3aGV0aGVyIGN1cnJlbnQgbG9jayBpcyBzdHJvbmdlciB0\naGFuIE5PTkUgDQoJICogYikgd2hldGhlciB0aGUgaW5zdGFuY2UgYmVpbmcg\ncmVmcmVzaGVkIGlzIGRpcnR5DQoJICogDQoJICogQW4gaW5zdGFuY2UgaXMg\nY3JlYXRlZCB3aXRoIGRhdGEgY2FjaGUgbWFya2VyIGFuZCBwZXJzaXN0ZWQu\nIA0KCSAqIEEgbmF0aXZlIFNRTCBpcyB1c2VkIHRvIHVwZGF0ZSB0aGUgZGF0\nYWJhc2UgcmVjb3JkIHdpdGggZGF0YWJhc2UgbWFya2VyLiANCgkgKiBUaGUg\naW4tbWVtb3J5IGluc3RhbmNlIGlzIG5vdCBhd2FyZSBvZiB0aGlzIG91dC1v\nZi1iYW5kIHVwZGF0ZS4gDQoJICogVGhlbiB0aGUgaW4tbWVtb3J5IGluc3Rh\nbmNlIGlzIHJlZnJlc2hlZC4gVGhlIG1hcmtlciBvZiB0aGUgcmVmcmVzaGVk\nIA0KCSAqIGluc3RhbmNlIHRlbGxzIHdoZXRoZXIgdGhlIGluc3RhbmNlIGlz\nIHJlZnJlc2hlZCBmcm9tIHRoZSBkYXRhIGNhY2hlDQoJICogb2YgdGhlIGRh\ndGFiYXNlLiANCgkgKiANCgkgKiBAcGFyYW0gdXNlRGF0YUNhY2hlIGZsYWdz\nIGlmIGRhdGEgY2FjaGUgaXMgYWN0aXZlLiBpZiBub3QsIHRoZW4gc3VyZWx5\nDQoJICogcmVmcmVzaCBhbHdheXMgZmV0Y2ggc3RhdGUgZnJvbSB0aGUgZGF0\nYWJhc2UuDQoJICogDQoJICogQHBhcmFtIGRhdGFjYWNoZSB0aGUgbWFya2Vy\nIGZvciB0aGUgY29weSBvZiB0aGUgZGF0YSBjYWNoZWQgaW5zdGFuY2UNCgkg\nKiBAcGFyYW0gZGF0YWJhc2UgdGhlIG1hcmtlciBmb3IgdGhlIGRhdGFiYXNl\nIHJlY29yZA0KCSAqIEBwYXJhbSBsb2NrIGxvY2sgdG8gYmUgdXNlZA0KCSAq\nIEBwYXJhbSBtYWtlRGlydHlCZWZvcmVSZWZyZXNoIGZsYWdzIGlmIHRoZSBp\nbnN0YW5jZSBiZSBkaXJ0aWVkIGJlZm9yZQ0KCSAqIHJlZnJlc2goKQ0KCSAq\nIEBwYXJhbSBleHBlY3RlZCBUaGUgZXhwZWN0ZWQgbWFya2VyIGkuZS4gd2hl\ncmUgdGhlIHN0YXRlIGlzIHJlZnJlc2hlZCANCgkgKiBmcm9tLiBUaGlzIHNo\nb3VsZCBiZSBhbHdheXMgPGNvZGU+TUFSS0VSX0RBVEFCQVNFPC9jb2RlPi4N\nCgkgKiBhKSB3aGV0aGVyIERhdGFDYWNoZSBpcyBhY3RpdmUNCgkgKiBiKSB3\naGV0aGVyIGN1cnJlbnQgTG9jayBpcyBzdHJvbmdlciB0aGFuIE5PTE9DSw0K\nCSAqIGMpIHdoZXRoZXIgdGhlIG9iamVjdCB0byBiZSByZWZyZXNoZWQgaXMg\nZGlydHkNCgkgKiANCgkgKiBUaGUgZm9sbG93aW5nIHRydXRoIHRhYmxlIGVu\ndW1lcmF0ZXMgdGhlIHBvc3NpYmlsaXRpZXMNCgkgKiANCgkgKiBVc2UgQ2Fj\naGU/ICAgTG9jaz8gICBEaXJ0eT8gICAgIFRhcmdldA0KCSAqICAgIFkgICAg\nICAgICAgWSAgICAgICBZICAgICAgICAgRGF0YWJhc2UNCgkgKiAgICBZICAg\nICAgICAgIE4gICAgICAgWSAgICAgICAgIERhdGEgQ2FjaGUNCgkgKiAgICBZ\nICAgICAgICAgIFkgICAgICAgTiAgICAgICAgIERhdGEgQ2FjaGUNCgkgKiAg\nICBZICAgICAgICAgIE4gICAgICAgTiAgICAgICAgIERhdGEgQ2FjaGUNCgkg\nKiAgICANCgkgKiAgICBOICAgICAgICAgIFkgICAgICAgWSAgICAgICAgIERh\ndGFiYXNlDQoJICogICAgTiAgICAgICAgICBOICAgICAgIFkgICAgICAgICBE\nYXRhYmFzZQ0KCSAqICAgIE4gICAgICAgICAgWSAgICAgICBOICAgICAgICAg\nT2JqZWN0IENhY2hlDQoJICogICAgTiAgICAgICAgICBOICAgICAgIE4gICAg\nICAgICBPYmplY3QgQ2FjaGUNCg0KCSAqLw0KCXB1YmxpYyB2b2lkIHZlcmlm\neVJlZnJlc2goYm9vbGVhbiB1c2VEYXRhQ2FjaGUsIExvY2tNb2RlVHlwZSBs\nb2NrLCANCgkJCWJvb2xlYW4gbWFrZURpcnR5QmVmb3JlUmVmcmVzaCwgYm9v\nbGVhbiByZWZyZXNoRnJvbURhdGFDYWNoZSwgDQoJCQlTdHJpbmcgZXhwZWN0\nZWQpIHsNCgkJT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIGVtZiA9\nICh1c2VEYXRhQ2FjaGUpDQoJCQk/IGVtZldpdGhEYXRhQ2FjaGUgOiBlbWZX\naXRob3V0RGF0YUNhY2hlOw0KCQllbWYuZ2V0Q29uZmlndXJhdGlvbigpLnNl\ndFJlZnJlc2hGcm9tRGF0YUNhY2hlKHJlZnJlc2hGcm9tRGF0YUNhY2hlKTsN\nCgkJT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOw0KICAgICAgICANCgkJZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOw0KCQlQT2JqZWN0IHBjID0gbmV3IFBPYmplY3QoKTsNCgkJ\ncGMuc2V0TmFtZSh1c2VEYXRhQ2FjaGUgPyBNQVJLRVJfREFUQUNBQ0hFIDog\nTUFSS0VSX0NBQ0hFKTsNCgkJZW0ucGVyc2lzdChwYyk7DQoJCWVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7DQoJCQ0KCQlPYmplY3Qgb2lkID0gcGMu\nZ2V0SWQoKTsNCgkJU3RvcmVDYWNoZSBkYXRhQ2FjaGUgPSBlbWYuZ2V0U3Rv\ncmVDYWNoZSgpOw0KCQlhc3NlcnRFcXVhbHModXNlRGF0YUNhY2hlLCBkYXRh\nQ2FjaGUuY29udGFpbnMoUE9iamVjdC5jbGFzcywgb2lkKSk7DQoJCQ0KCQkv\nLyBNb2RpZnkgdGhlIHJlY29yZCBpbiB0aGUgZGF0YWJhc2UgaW4gYSBzZXBh\ncmF0ZSB0cmFuc2FjdGlvbiB1c2luZw0KCQkvLyBuYXRpdmUgU1FMIHNvIHRo\nYXQgdGhlIGluLW1lbW9yeSBpbnN0YW5jZSBpcyBub3QgYWx0ZXJlZCANCgkJ\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KCQlTdHJpbmcgc3FsID0g\nIlVQREFURSBQT0JKRUNUIFNFVCBOQU1FPSciKyBNQVJLRVJfREFUQUJBU0Ug\nKyInIFdIRVJFIGlkPSIrb2lkOw0KCQllbS5jcmVhdGVOYXRpdmVRdWVyeShz\ncWwpLmV4ZWN1dGVVcGRhdGUoKTsNCgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsNCgkJDQoJCWFzc2VydEVxdWFscyh1c2VEYXRhQ2FjaGUgPyBN\nQVJLRVJfREFUQUNBQ0hFIDogTUFSS0VSX0NBQ0hFLCBwYy5nZXROYW1lKCkp\nOw0KCQkNCgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KCQlpZiAo\nbWFrZURpcnR5QmVmb3JlUmVmcmVzaCkgew0KCQkJcGMuc2V0TmFtZShNQVJL\nRVJfRElSVFlfQ0FDSEUpOw0KCQl9IA0KCQlhc3NlcnRFcXVhbHMobWFrZURp\ncnR5QmVmb3JlUmVmcmVzaCwgZW0uaXNEaXJ0eShwYykpOw0KDQoJCWlmIChs\nb2NrICE9IG51bGwpIHsNCgkJCSgoRW50aXR5TWFuYWdlckltcGwpZW0pLmdl\ndEZldGNoUGxhbigpLnNldFJlYWRMb2NrTW9kZShsb2NrKTsNCgkJfQ0KCQll\nbS5yZWZyZXNoKHBjKTsNCgkJDQoJCWFzc2VydEVxdWFscyhleHBlY3RlZCwg\ncGMuZ2V0TmFtZSgpKTsNCgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsNCgl9DQoJDQoJLyoqDQoJICogVGhlIGV4cGVjdGVkIG1hcmtlciBpLmUu\nIHdoZXJlIHRoZSBzdGF0ZSBpcyByZWZyZXNoZWQgZnJvbSBkZXBlbmRzIG9u\nDQoJICogYSkgd2hldGhlciBEYXRhQ2FjaGUgaXMgYWN0aXZlDQoJICogYikg\nd2hldGhlciBjdXJyZW50IExvY2sgaXMgc3Ryb25nZXIgdGhhbiBOT0xPQ0sN\nCgkgKiBjKSB3aGV0aGVyIHRoZSBvYmplY3QgdG8gYmUgcmVmcmVzaGVkIGlz\nIGRpcnR5DQoJICogDQoJICogVGhlIGZvbGxvd2luZyB0cnV0aCB0YWJsZSBl\nbnVtZXJhdGVzIHRoZSBwb3NzaWJpbGl0aWVzDQoJICogDQoJICogVXNlIENh\nY2hlPyAgIExvY2s/ICAgRGlydHk/ICAgICBUYXJnZXQNCgkgKiAgICBZICAg\nICAgICAgIFkgICAgICAgWSAgICAgICAgIERhdGFiYXNlDQoJICogICAgWSAg\nICAgICAgICBOICAgICAgIFkgICAgICAgICBEYXRhIENhY2hlDQoJICogICAg\nWSAgICAgICAgICBZICAgICAgIE4gICAgICAgICBEYXRhIENhY2hlDQoJICog\nICAgWSAgICAgICAgICBOICAgICAgIE4gICAgICAgICBEYXRhIENhY2hlDQoJ\nICogICAgDQoJICogICAgTiAgICAgICAgICBZICAgICAgIFkgICAgICAgICBE\nYXRhYmFzZQ0KCSAqICAgIE4gICAgICAgICAgTiAgICAgICBZICAgICAgICAg\nRGF0YWJhc2UNCgkgKiAgICBOICAgICAgICAgIFkgICAgICAgTiAgICAgICAg\nIE9iamVjdCBDYWNoZQ0KCSAqICAgIE4gICAgICAgICAgTiAgICAgICBOICAg\nICAgICAgT2JqZWN0IENhY2hlDQoJICogICAgDQoJICogQHBhcmFtIGRhdGFj\nYWNoZSB0aGUgbWFya2VyIGZvciANCgkgKiBAcGFyYW0gZGF0YWJhc2UNCgkg\nKiBAcGFyYW0gdXNlRGF0YUNhY2hlDQoJICogQHBhcmFtIGxvY2sNCgkgKiBA\ncGFyYW0gbWFrZURpcnR5QmVmb3JlUmVmcmVzaA0KCSAqIEByZXR1cm4NCgkg\nKi8NCglTdHJpbmcgZ2V0RXhwZWN0ZWRNYXJrZXIoYm9vbGVhbiB1c2VEYXRh\nQ2FjaGUsIExvY2tNb2RlVHlwZSBsb2NrLCANCgkJCWJvb2xlYW4gbWFrZURp\ncnR5QmVmb3JlUmVmcmVzaCkgew0KCQlpZiAodXNlRGF0YUNhY2hlKSB7DQoJ\nCQlyZXR1cm4gKGxvY2sgIT0gbnVsbCkgPyBNQVJLRVJfREFUQUJBU0UgOiBN\nQVJLRVJfREFUQUNBQ0hFOyANCgkJfSBlbHNlIHsNCgkJCXJldHVybiBNQVJL\nRVJfREFUQUJBU0U7DQoJCX0NCgl9DQoJDQoJcHVibGljIHZvaWQgdGVzdERp\ncnR5UmVmcmVzaFdpdGhOb0xvY2tIaXRzRGF0YWJhc2UoKSB7DQoJCXZlcmlm\neVJlZnJlc2goV0lUSF9EQVRBQ0FDSEUsIE5PTE9DSywgRElSVFksICFSRUZS\nRVNIX0ZST01fREFUQUNBQ0hFLCBNQVJLRVJfREFUQUNBQ0hFKTsNCgl9DQoJ\nDQoJcHVibGljIHZvaWQgdGVzdERpcnR5UmVmcmVzaFdpdGhOb0xvY2tIaXRz\nRGF0YUNhY2hlKCkgew0KCQl2ZXJpZnlSZWZyZXNoKFdJVEhfREFUQUNBQ0hF\nLCBOT0xPQ0ssIERJUlRZLCBSRUZSRVNIX0ZST01fREFUQUNBQ0hFLCBNQVJL\nRVJfREFUQUNBQ0hFKTsNCgl9DQoJDQoJcHVibGljIHZvaWQgdGVzdENsZWFu\nUmVmcmVzaFdpdGhOb0xvY2tEb2VzTm90SGl0RGF0YWJhc2UoKSB7DQoJCXZl\ncmlmeVJlZnJlc2goV0lUSF9EQVRBQ0FDSEUsIE5PTE9DSywgIURJUlRZLCAh\nUkVGUkVTSF9GUk9NX0RBVEFDQUNIRSwgTUFSS0VSX0RBVEFDQUNIRSk7DQoJ\nfQ0KCQ0KCXB1YmxpYyB2b2lkIHRlc3RDbGVhblJlZnJlc2hXaXRoTm9Mb2Nr\nSGl0c0RhdGFDYWNoZSgpIHsNCgkJdmVyaWZ5UmVmcmVzaChXSVRIX0RBVEFD\nQUNIRSwgTk9MT0NLLCAhRElSVFksIFJFRlJFU0hfRlJPTV9EQVRBQ0FDSEUs\nIE1BUktFUl9EQVRBQ0FDSEUpOw0KCX0NCgkNCglwdWJsaWMgdm9pZCB0ZXN0\nRGlydHlSZWZyZXNoV2l0aFJlYWRMb2NrSGl0c0RhdGFiYXNlKCkgew0KCQl2\nZXJpZnlSZWZyZXNoKFdJVEhfREFUQUNBQ0hFLCBMb2NrTW9kZVR5cGUuUkVB\nRCwgRElSVFksIFJFRlJFU0hfRlJPTV9EQVRBQ0FDSEUsIE1BUktFUl9EQVRB\nQkFTRSk7DQoJCXZlcmlmeVJlZnJlc2goV0lUSF9EQVRBQ0FDSEUsIExvY2tN\nb2RlVHlwZS5SRUFELCBESVJUWSwgIVJFRlJFU0hfRlJPTV9EQVRBQ0FDSEUs\nIE1BUktFUl9EQVRBQkFTRSk7DQoJfQ0KCQ0KCXB1YmxpYyB2b2lkIHRlc3RD\nbGVhblJlZnJlc2hXaXRoUmVhZExvY2tEb2VzTm90SGl0RGF0YWJhc2UoKSB7\nDQoJCXZlcmlmeVJlZnJlc2goV0lUSF9EQVRBQ0FDSEUsIExvY2tNb2RlVHlw\nZS5SRUFELCAhRElSVFksIFJFRlJFU0hfRlJPTV9EQVRBQ0FDSEUsIE1BUktF\nUl9EQVRBQ0FDSEUpOw0KCQl2ZXJpZnlSZWZyZXNoKFdJVEhfREFUQUNBQ0hF\nLCBMb2NrTW9kZVR5cGUuUkVBRCwgIURJUlRZLCAhUkVGUkVTSF9GUk9NX0RB\nVEFDQUNIRSwgTUFSS0VSX0RBVEFDQUNIRSk7DQoJfQ0KCQ0KCXB1YmxpYyB2\nb2lkIHRlc3REaXJ0eVJlZnJlc2hXaXRoV3JpdGVMb2NrSGl0c0RhdGFiYXNl\nKCkgew0KCQl2ZXJpZnlSZWZyZXNoKFdJVEhfREFUQUNBQ0hFLCBMb2NrTW9k\nZVR5cGUuV1JJVEUsIERJUlRZLCBSRUZSRVNIX0ZST01fREFUQUNBQ0hFLCBN\nQVJLRVJfREFUQUJBU0UpOw0KCQl2ZXJpZnlSZWZyZXNoKFdJVEhfREFUQUNB\nQ0hFLCBMb2NrTW9kZVR5cGUuV1JJVEUsIERJUlRZLCAhUkVGUkVTSF9GUk9N\nX0RBVEFDQUNIRSwgTUFSS0VSX0RBVEFCQVNFKTsNCgl9DQoJDQoJcHVibGlj\nIHZvaWQgdGVzdENsZWFuUmVmcmVzaFdpdGhXcml0ZUxvY2tEb2VzTm90SGl0\nRGF0YWJhc2UoKSB7DQoJCXZlcmlmeVJlZnJlc2goV0lUSF9EQVRBQ0FDSEUs\nIExvY2tNb2RlVHlwZS5XUklURSwgIURJUlRZLCBSRUZSRVNIX0ZST01fREFU\nQUNBQ0hFLCBNQVJLRVJfREFUQUNBQ0hFKTsNCgkJdmVyaWZ5UmVmcmVzaChX\nSVRIX0RBVEFDQUNIRSwgTG9ja01vZGVUeXBlLldSSVRFLCAhRElSVFksICFS\nRUZSRVNIX0ZST01fREFUQUNBQ0hFLCBNQVJLRVJfREFUQUNBQ0hFKTsNCgl9\nDQoJDQoJcHVibGljIHZvaWQgdGVzdERpcnR5UmVmcmVzaFdpdGhvdXREYXRh\nQ2FjaGVBbHdheXNIaXRzRGF0YWJhc2UoKSB7DQoJCXZlcmlmeVJlZnJlc2go\nIVdJVEhfREFUQUNBQ0hFLCBOT0xPQ0ssIERJUlRZLCBSRUZSRVNIX0ZST01f\nREFUQUNBQ0hFLCBNQVJLRVJfREFUQUJBU0UpOw0KCQl2ZXJpZnlSZWZyZXNo\nKCFXSVRIX0RBVEFDQUNIRSwgTG9ja01vZGVUeXBlLlJFQUQsIERJUlRZLCBS\nRUZSRVNIX0ZST01fREFUQUNBQ0hFLCBNQVJLRVJfREFUQUJBU0UpOw0KCQl2\nZXJpZnlSZWZyZXNoKCFXSVRIX0RBVEFDQUNIRSwgTG9ja01vZGVUeXBlLldS\nSVRFLCBESVJUWSwgUkVGUkVTSF9GUk9NX0RBVEFDQUNIRSwgTUFSS0VSX0RB\nVEFCQVNFKTsNCgkJDQoJCXZlcmlmeVJlZnJlc2goIVdJVEhfREFUQUNBQ0hF\nLCBOT0xPQ0ssIERJUlRZLCAhUkVGUkVTSF9GUk9NX0RBVEFDQUNIRSwgTUFS\nS0VSX0RBVEFCQVNFKTsNCgkJdmVyaWZ5UmVmcmVzaCghV0lUSF9EQVRBQ0FD\nSEUsIExvY2tNb2RlVHlwZS5SRUFELCBESVJUWSwgIVJFRlJFU0hfRlJPTV9E\nQVRBQ0FDSEUsIE1BUktFUl9EQVRBQkFTRSk7DQoJCXZlcmlmeVJlZnJlc2go\nIVdJVEhfREFUQUNBQ0hFLCBMb2NrTW9kZVR5cGUuV1JJVEUsIERJUlRZLCAh\nUkVGUkVTSF9GUk9NX0RBVEFDQUNIRSwgTUFSS0VSX0RBVEFCQVNFKTsNCgl9\nDQoJDQoJcHVibGljIHZvaWQgdGVzdENsZWFuUmVmcmVzaFdpdGhvdXREYXRh\nQ2FjaGVEb2VzTm90SGl0RGF0YWJhc2UoKSB7DQoJCXZlcmlmeVJlZnJlc2go\nIVdJVEhfREFUQUNBQ0hFLCBOT0xPQ0ssICFESVJUWSwgUkVGUkVTSF9GUk9N\nX0RBVEFDQUNIRSwgTUFSS0VSX0NBQ0hFKTsNCgkJdmVyaWZ5UmVmcmVzaCgh\nV0lUSF9EQVRBQ0FDSEUsIExvY2tNb2RlVHlwZS5SRUFELCAhRElSVFksIFJF\nRlJFU0hfRlJPTV9EQVRBQ0FDSEUsICBNQVJLRVJfQ0FDSEUpOw0KCQl2ZXJp\nZnlSZWZyZXNoKCFXSVRIX0RBVEFDQUNIRSwgTG9ja01vZGVUeXBlLldSSVRF\nLCAhRElSVFksIFJFRlJFU0hfRlJPTV9EQVRBQ0FDSEUsICBNQVJLRVJfQ0FD\nSEUpOw0KCQkNCgkJdmVyaWZ5UmVmcmVzaCghV0lUSF9EQVRBQ0FDSEUsIE5P\nTE9DSywgIURJUlRZLCAhUkVGUkVTSF9GUk9NX0RBVEFDQUNIRSwgTUFSS0VS\nX0NBQ0hFKTsNCgkJdmVyaWZ5UmVmcmVzaCghV0lUSF9EQVRBQ0FDSEUsIExv\nY2tNb2RlVHlwZS5SRUFELCAhRElSVFksICFSRUZSRVNIX0ZST01fREFUQUNB\nQ0hFLCBNQVJLRVJfQ0FDSEUpOw0KCQl2ZXJpZnlSZWZyZXNoKCFXSVRIX0RB\nVEFDQUNIRSwgTG9ja01vZGVUeXBlLldSSVRFLCAhRElSVFksICFSRUZSRVNI\nX0ZST01fREFUQUNBQ0hFLCBNQVJLRVJfQ0FDSEUpOw0KCX0NCgkNCgkvKioN\nCgkgKiBWZXJpZnkgYmVoYXZpb3Igb2YgcmVmcmVzaGluZyBhbiBpbnN0YW5j\nZSB3aGljaCBoYXMgYmVlbiBkZWxldGVkIGJ5DQoJICogb3V0LW9mLWJhbmQg\ncHJvY2VzcyAoZS5nLiBhIG5hdGl2ZSBTUUwgaW4gYSBzZXBhcmF0ZSB0cmFu\nc2FjdGlvbikuDQoJICogVGhlIGJlaGF2aW9yIGRpZmZlcnMgd2hlbiByZWZy\nZXNoKCkgd2l0aG91dCBhIGxvY2sgZmV0Y2hlcyB0aGUgZGF0YSBmcm9tDQoJ\nICogRGF0YUNhY2hlIGV2ZW4gd2hlbiB0aGUgb3JpZ2luYWwgZGF0YWJhc2Ug\ncmVjb3JkIGlzIGRlbGV0ZWQuDQoJICogDQoJICogQHBhcmFtIHVzZURhdGFD\nYWNoZQ0KCSAqIEBwYXJhbSBsb2NrDQoJICovDQoJcHVibGljIHZvaWQgdmVy\naWZ5RGVsZXRlRGV0ZWN0aW9uT25SZWZyZXNoKGJvb2xlYW4gdXNlRGF0YUNh\nY2hlLCANCgkJCWJvb2xlYW4gZGlydHksIExvY2tNb2RlVHlwZSBsb2NrLCBD\nbGFzcyBleHBlY3RlZEV4Y2VwdGlvblR5cGUpIHsNCgkJT3BlbkpQQUVudGl0\neU1hbmFnZXJGYWN0b3J5U1BJIGVtZiA9ICh1c2VEYXRhQ2FjaGUpDQoJCQk/\nIGVtZldpdGhEYXRhQ2FjaGUgOiBlbWZXaXRob3V0RGF0YUNhY2hlOw0KCQkJ\nDQoJCU9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsNCiAgICAgICAgDQoJCWVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsNCgkJUE9iamVjdCBwYyA9IG5ldyBQT2JqZWN0KCk7DQoJ\nCXBjLnNldE5hbWUodXNlRGF0YUNhY2hlID8gTUFSS0VSX0RBVEFDQUNIRSA6\nIE1BUktFUl9DQUNIRSk7DQoJCWVtLnBlcnNpc3QocGMpOw0KCQllbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOw0KCQkNCgkJT2JqZWN0IG9pZCA9IHBj\nLmdldElkKCk7DQoJCVN0b3JlQ2FjaGUgZGF0YUNhY2hlID0gZW1mLmdldFN0\nb3JlQ2FjaGUoKTsNCgkJYXNzZXJ0RXF1YWxzKHVzZURhdGFDYWNoZSwgZGF0\nYUNhY2hlLmNvbnRhaW5zKFBPYmplY3QuY2xhc3MsIG9pZCkpOw0KCQkNCgkJ\nLy8gZGVsZXRlIHRoZSByZWNvcmQgaW4gdGhlIGRhdGFiYXNlIGluIGEgc2Vw\nYXJhdGUgdHJhbnNhY3Rpb24gdXNpbmcNCgkJLy8gbmF0aXZlIFNRTCBzbyB0\naGF0IHRoZSBpbi1tZW1vcnkgaW5zdGFuY2UgaXMgbm90IGFsdGVyZWQgDQoJ\nCWVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsNCgkJU3RyaW5nIHNxbCA9\nICJERUxFVEUgRlJPTSBQT0JKRUNUIFdIRVJFIGlkPSIrb2lkOw0KCQllbS5j\ncmVhdGVOYXRpdmVRdWVyeShzcWwpLmV4ZWN1dGVVcGRhdGUoKTsNCgkJZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCgkJDQoJCS8vIHRoZSBvYmpl\nY3QgY2FjaGUgZG9lcyBub3Qga25vdyB0aGF0IHRoZSByZWNvcmQgd2FzIGRl\nbGV0ZWQNCgkJYXNzZXJ0VHJ1ZShlbS5jb250YWlucyhwYykpOw0KCQkvLyBu\nb3IgZG9lcyB0aGUgZGF0YSBjYWNoZQ0KCQlhc3NlcnRFcXVhbHModXNlRGF0\nYUNhY2hlLCBkYXRhQ2FjaGUuY29udGFpbnMoUE9iamVjdC5jbGFzcywgb2lk\nKSk7DQoJCQ0KCQkvKioNCgkJICogcmVmcmVzaCBiZWhhdmlvciBubyBtb3Jl\nIGRlcGVuZHMgb24gY3VycmVudCBsb2NrLiBSZWZyZXNoDQoJCSAqIHdpbGwg\nYWx3YXlzIGF0dGVtcHQgdG8gZmV0Y2ggdGhlIGluc3RhbmNlIGZyb20gZGF0\nYWJhc2UgDQoJCSAqIHJhaXNpbmcgRW50aXR5Tm90Rm91bmRFeGNlcHRpb24u\nDQoJCSAqICAgDQoJCSAqLw0KCQllbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7DQoJCWVtLmdldEZldGNoUGxhbigpLnNldFJlYWRMb2NrTW9kZShsb2Nr\nKTsNCgkJaWYgKGRpcnR5KSANCgkJCXBjLnNldE5hbWUoIkRpcnR5IE5hbWUi\nKTsNCgkJdHJ5IHsNCgkJCWVtLnJlZnJlc2gocGMpOw0KCQkJaWYgKGV4cGVj\ndGVkRXhjZXB0aW9uVHlwZSAhPSBudWxsKSB7DQoJCQkJZmFpbCgiZXhwZWN0\nZWQgIiArIGV4cGVjdGVkRXhjZXB0aW9uVHlwZS5nZXRTaW1wbGVOYW1lKCkg\nKyANCgkJCQkJCSIgZm9yIFBPYmplY3Q6IiArIG9pZCk7DQoJCQl9DQoJCX0g\nY2F0Y2ggKEV4Y2VwdGlvbiBleCkgew0KCQkJYm9vbGVhbiBleHBlY3RlZEV4\nY2VwdGlvbiA9IGV4cGVjdGVkRXhjZXB0aW9uVHlwZSAhPSBudWxsICYmDQoJ\nCQkgICAgZXhwZWN0ZWRFeGNlcHRpb25UeXBlLmlzQXNzaWduYWJsZUZyb20o\nZXguZ2V0Q2xhc3MoKSk7DQoJCQlpZiAoIWV4cGVjdGVkRXhjZXB0aW9uKSB7\nDQoJCQkJZXgucHJpbnRTdGFja1RyYWNlKCk7DQoJCQkJU3RyaW5nIGVycm9y\nID0gKGV4cGVjdGVkRXhjZXB0aW9uVHlwZSA9PSBudWxsKSANCgkJCQkJPyAi\nbm8gZXhjZXB0aW9uIiA6IGV4cGVjdGVkRXhjZXB0aW9uVHlwZS5nZXROYW1l\nKCk7DQoJCQkJZmFpbCgiZXhwZWN0ZWQgIiArIGVycm9yICsgIiBmb3IgUE9i\namVjdDoiICsgb2lkKTsNCgkJCX0NCgkJfSBmaW5hbGx5IHsNCgkJCWVtLmdl\ndFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsNCgkJfQ0KCX0NCg0KCXB1Ymxp\nYyB2b2lkIHRlc3REZWxldGVJc05vdERldGVjdGVkT25DbGVhblJlZnJlc2hX\naXRob3V0TG9ja1dpdGhEYXRhQ2FjaGUoKSB7DQoJCXZlcmlmeURlbGV0ZURl\ndGVjdGlvbk9uUmVmcmVzaChXSVRIX0RBVEFDQUNIRSwgIURJUlRZLCBOT0xP\nQ0ssIE5PX0VSUk9SKTsNCgl9DQoJDQoJcHVibGljIHZvaWQgdGVzdERlbGV0\nZUlzRGV0ZWN0ZWRPbkNsZWFuUmVmcmVzaFdpdGhMb2NrV2l0aERhdGFDYWNo\nZSgpIHsNCgkJdmVyaWZ5RGVsZXRlRGV0ZWN0aW9uT25SZWZyZXNoKFdJVEhf\nREFUQUNBQ0hFLCAhRElSVFksIExvY2tNb2RlVHlwZS5SRUFELCBFTlRJVFlf\nTk9UX0ZPVU5EX0VSUk9SKTsNCgkJdmVyaWZ5RGVsZXRlRGV0ZWN0aW9uT25S\nZWZyZXNoKFdJVEhfREFUQUNBQ0hFLCAhRElSVFksIExvY2tNb2RlVHlwZS5X\nUklURSwgRU5USVRZX05PVF9GT1VORF9FUlJPUik7DQoJfQ0KDQoJcHVibGlj\nIHZvaWQgdGVzdERlbGV0ZUlzTm90RGV0ZWN0ZWRPbkRpcnR5UmVmcmVzaFdp\ndGhvdXRMb2NrV2l0aERhdGFDYWNoZSgpIHsNCgkJdmVyaWZ5RGVsZXRlRGV0\nZWN0aW9uT25SZWZyZXNoKFdJVEhfREFUQUNBQ0hFLCBESVJUWSwgTk9MT0NL\nLCBOT19FUlJPUik7CQ0KCX0NCgkNCglwdWJsaWMgdm9pZCB0ZXN0RGVsZXRl\nSXNEZXRlY3RlZE9uRGlydHlSZWZyZXNoV2l0aExvY2tXaXRoRGF0YUNhY2hl\nKCkgew0KCQl2ZXJpZnlEZWxldGVEZXRlY3Rpb25PblJlZnJlc2goV0lUSF9E\nQVRBQ0FDSEUsIERJUlRZLCBMb2NrTW9kZVR5cGUuUkVBRCwgRU5USVRZX05P\nVF9GT1VORF9FUlJPUik7DQoJCXZlcmlmeURlbGV0ZURldGVjdGlvbk9uUmVm\ncmVzaChXSVRIX0RBVEFDQUNIRSwgRElSVFksIExvY2tNb2RlVHlwZS5XUklU\nRSwgRU5USVRZX05PVF9GT1VORF9FUlJPUik7DQoJfQ0KCQ0KCXB1YmxpYyB2\nb2lkIHRlc3REZWxldGVJc0RldGVjdGVkT25EaXJ0eVJlZnJlc2hXaXREYXRh\nQ2FjaGUoKSB7DQoJCXZlcmlmeURlbGV0ZURldGVjdGlvbk9uUmVmcmVzaChX\nSVRIX0RBVEFDQUNIRSwgRElSVFksIExvY2tNb2RlVHlwZS5SRUFELCBFTlRJ\nVFlfTk9UX0ZPVU5EX0VSUk9SKTsNCgkJdmVyaWZ5RGVsZXRlRGV0ZWN0aW9u\nT25SZWZyZXNoKFdJVEhfREFUQUNBQ0hFLCBESVJUWSwgTG9ja01vZGVUeXBl\nLldSSVRFLCBFTlRJVFlfTk9UX0ZPVU5EX0VSUk9SKTsNCgl9DQoJDQoJcHVi\nbGljIHZvaWQgdGVzdERlbGV0ZUlzRGV0ZWN0ZWRPbkNsZWFuUmVmcmVzaFdp\ndGhvdXRMb2NrV2l0aG91dERhdGFDYWNoZSgpIHsNCgkJdmVyaWZ5RGVsZXRl\nRGV0ZWN0aW9uT25SZWZyZXNoKCFXSVRIX0RBVEFDQUNIRSwgIURJUlRZLCBO\nT0xPQ0ssIEVOVElUWV9OT1RfRk9VTkRfRVJST1IpOw0KCX0NCgkNCglwdWJs\naWMgdm9pZCB0ZXN0RGVsZXRlSXNEZXRlY3RlZE9uQ2xlYW5SZWZyZXNoV2l0\naExvY2tXaXRob3V0RGF0YUNhY2hlKCkgew0KCQl2ZXJpZnlEZWxldGVEZXRl\nY3Rpb25PblJlZnJlc2goIVdJVEhfREFUQUNBQ0hFLCAhRElSVFksIExvY2tN\nb2RlVHlwZS5SRUFELCBFTlRJVFlfTk9UX0ZPVU5EX0VSUk9SKTsNCgkJdmVy\naWZ5RGVsZXRlRGV0ZWN0aW9uT25SZWZyZXNoKCFXSVRIX0RBVEFDQUNIRSwg\nIURJUlRZLCBMb2NrTW9kZVR5cGUuV1JJVEUsIEVOVElUWV9OT1RfRk9VTkRf\nRVJST1IpOw0KCX0NCg0KfQ0K\n","encoding":"base64"}

