{"sha":"213536c0641f7fa65f07abfa664a6f07e5c3c7c8","node_id":"MDQ6QmxvYjIwNjM2NDoyMTM1MzZjMDY0MWY3ZmE2NWYwN2FiZmE2NjRhNmYwN2U1YzNjN2M4","size":5335,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/213536c0641f7fa65f07abfa664a6f07e5c3c7c8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZW5oYW5j\nZS5pZGVudGl0eTsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBq\nYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RD\nYXNlOwoKLyoqCiAqIFRlc3RzIGVudGl0aWVzIHRoYXQgdXNlIGNvbXBvdW5k\nIGtleXMgdGhhdCBpbmNsdWRlcyBlbnRpdHkgcmVsYXRpb25zaGlwIGF0CiAq\nIG1vcmUgdGhhbiBvbmUgbGV2ZWwuCiAqIAogKiBQYWdlIGhhcyBhIGNvbXBv\ndW5kIGlkZW50aXR5IHRvIEJvb2sgd2hpY2ggaXRzZWxmIHVzZXMgYSBjb21w\nb3VuZCBpZGVudGl0eSB0bwogKiBMaWJyYXJ5LgogKiAKICogVGVzdCBjYXNl\nIGFuZCBkb21haW4gY2xhc3NlcyB3ZXJlIG9yaWdpbmFsbHkgcGFydCBvZiB0\naGUgcmVwb3J0ZWQgaXNzdWUgPEEKICogaHJlZj0iaHR0cHM6Ly9pc3N1ZXMu\nYXBhY2hlLm9yZy9qaXJhL2Jyb3dzZS9PUEVOSlBBLTIwNyI+T1BFTkpQQS0y\nMDc8L0E+CiAqIAogKiBAYXV0aG9yIEplZmZyZXkgQmxhdHRtYW4KICogQGF1\ndGhvciBQaW5ha2kgUG9kZGFyCiAqIAogKi8KcHVibGljIGNsYXNzIFRlc3RN\ndWx0aXBsZUxldmVsRGVyaXZlZElkZW50aXR5IGV4dGVuZHMgU2luZ2xlRU1G\nVGVzdENhc2UgewoJcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIExJQlJBUllfTkFN\nRSA9ICJMSUIiOwoJcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIEJPT0tfTkFNRSAg\nICA9ICJmb28iOwoJcHJpdmF0ZSBzdGF0aWMgaW50ICAgIE5VTV9QQUdFUyAg\nICA9IDM7CgkKCXB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CgkJc3VwZXIuc2V0VXAoQ0xFQVJfVEFCTEVTLCBMaWJyYXJ5LmNsYXNz\nLCBCb29rLmNsYXNzLCBQYWdlLmNsYXNzLAoJCQkJIm9wZW5qcGEuUnVudGlt\nZVVuZW5oYW5jZWRDbGFzc2VzIiwgInVuc3VwcG9ydGVkIik7CgkJY3JlYXRl\nKCk7Cgl9CgkKLy8JcHVibGljIHZvaWQgdGVhckRvd24oKSB0aHJvd3MgRXhj\nZXB0aW9uIHsKLy8JCQovLwl9CgkKCXB1YmxpYyB2b2lkIHRlc3RQZXJzaXN0\nKCkgewoJCWNyZWF0ZSgpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RRdWVyeVJv\nb3RMZXZlbCgpIHsKCQlFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKCQlMaXN0PExpYnJhcnk+IGxpc3QgPSBlbS5jcmVh\ndGVRdWVyeSgiU0VMRUNUIHAgRlJPTSBMaWJyYXJ5IHAiKQoJCQkJCQkJICAg\nLmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnRGYWxzZShsaXN0LmlzRW1wdHko\nKSk7CgkJTGlicmFyeSBsaWIgPSAoTGlicmFyeSkgbGlzdC5nZXQoMCk7CgkJ\nYXNzZXJ0Tm90TnVsbChsaWIuZ2V0Qm9vayhCT09LX05BTUUpKTsKCQlhc3Nl\ncnROb3ROdWxsKGxpYi5nZXRCb29rKEJPT0tfTkFNRSkuZ2V0UGFnZSgxKSk7\nCgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RRdWVyeUludGVybWVkaWF0ZUxldmVs\nKCkgewoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwoJCUxpc3Q8Qm9vaz4gbGlzdCA9IGVtLmNyZWF0ZVF1ZXJ5KCJT\nRUxFQ1QgcCBGUk9NIEJvb2sgcCIpCgkJCQkJCQkgICAuZ2V0UmVzdWx0TGlz\ndCgpOwoJCWFzc2VydEZhbHNlKGxpc3QuaXNFbXB0eSgpKTsKCQlCb29rIGJv\nb2sgPSBsaXN0LmdldCgwKTsKCQlMaWJyYXJ5IGxpYiA9IGJvb2suZ2V0TGli\ncmFyeSgpOwoJCWZvciAoaW50IGk9MTsgaTw9TlVNX1BBR0VTOyBpKyspIHsK\nCQkJUGFnZSBwYWdlID0gYm9vay5nZXRQYWdlKGkpOwoJCQlhc3NlcnROb3RO\ndWxsKHBhZ2UpOwoJCQlhc3NlcnRFcXVhbHMoYm9vaywgcGFnZS5nZXRCb29r\nKCkpOwoJCQlhc3NlcnRFcXVhbHMobGliLCBwYWdlLmdldEJvb2soKS5nZXRM\naWJyYXJ5KCkpOwoJCQlhc3NlcnRFcXVhbHMocGFnZSwgcGFnZS5nZXRCb29r\nKCkuZ2V0UGFnZShwYWdlLmdldE51bWJlcigpKSk7CgkJfQoJfQoKCQoJcHVi\nbGljIHZvaWQgdGVzdFF1ZXJ5TGVhZkxldmVsKCkgewoJCUVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCUxpc3Q8UGFn\nZT4gbGlzdCA9IGVtLmNyZWF0ZVF1ZXJ5KCJTRUxFQ1QgcCBGUk9NIFBhZ2Ug\ncCIpCgkJCQkJCQkgICAuZ2V0UmVzdWx0TGlzdCgpOwoJCWFzc2VydEZhbHNl\nKGxpc3QuaXNFbXB0eSgpKTsKCQlCb29rIGJvb2sgPSBsaXN0LmdldCgwKS5n\nZXRCb29rKCk7CgkJTGlicmFyeSBsaWIgPSBib29rLmdldExpYnJhcnkoKTsK\nCQlmb3IgKFBhZ2UgcGFnZSA6IGxpc3QpIHsKCQkJYXNzZXJ0RXF1YWxzKGJv\nb2ssIHBhZ2UuZ2V0Qm9vaygpKTsKCQkJYXNzZXJ0RXF1YWxzKGxpYiwgcGFn\nZS5nZXRCb29rKCkuZ2V0TGlicmFyeSgpKTsKCQkJYXNzZXJ0RXF1YWxzKHBh\nZ2UsIHBhZ2UuZ2V0Qm9vaygpLmdldFBhZ2UocGFnZS5nZXROdW1iZXIoKSkp\nOwoJCX0KCX0KCglwdWJsaWMgdm9pZCB0ZXN0RmluZFJvb3ROb2RlKCkgewoJ\nCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwoJCUxpYnJhcnkgbGliID0gZW0uZmluZChMaWJyYXJ5LmNsYXNzLCBMSUJS\nQVJZX05BTUUpOwoJCWFzc2VydE5vdE51bGwobGliKTsKCQlhc3NlcnROb3RO\ndWxsKGxpYi5nZXRCb29rKEJPT0tfTkFNRSkpOwoJCWFzc2VydE5vdE51bGwo\nbGliLmdldEJvb2soQk9PS19OQU1FKS5nZXRQYWdlKDEpKTsKCX0KCQoJcHVi\nbGljIHZvaWQgdGVzdEZpbmRJbnRlcm1lZGlhdGVOb2RlKCkgewoJCUVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCQoJ\nCUJvb2tJZCBib29rSWQgPSBuZXcgQm9va0lkKCk7CgkJYm9va0lkLnNldExp\nYnJhcnkoTElCUkFSWV9OQU1FKTsKCQlib29rSWQuc2V0TmFtZShCT09LX05B\nTUUpOwoJCUJvb2sgYm9vayA9IGVtLmZpbmQoQm9vay5jbGFzcywgYm9va0lk\nKTsKCQlhc3NlcnROb3ROdWxsKGJvb2spOwoJfQoJCglwdWJsaWMgdm9pZCB0\nZXN0RmluZExlYWZOb2RlKCkgewoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCQoJCUJvb2tJZCBib29rSWQgPSBu\nZXcgQm9va0lkKCk7CgkJYm9va0lkLnNldExpYnJhcnkoTElCUkFSWV9OQU1F\nKTsKCQlib29rSWQuc2V0TmFtZShCT09LX05BTUUpOwoJCVBhZ2VJZCBwYWdl\nSWQgPSBuZXcgUGFnZUlkKCk7CgkJcGFnZUlkLnNldEJvb2soYm9va0lkKTsK\nCQlwYWdlSWQuc2V0TnVtYmVyKDIpOwoJCVBhZ2UgcGFnZSA9IGVtLmZpbmQo\nUGFnZS5jbGFzcywgcGFnZUlkKTsKCQlhc3NlcnROb3ROdWxsKHBhZ2UpOwoJ\nfQoJCglwdWJsaWMgdm9pZCB0ZXN0VXBkYXRlKCkgewoJCUVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRy\nYW5zYWN0aW9uKCkuYmVnaW4oKTsKCQlCb29rSWQgYm9va0lkID0gbmV3IEJv\nb2tJZCgpOwoJCWJvb2tJZC5zZXRMaWJyYXJ5KExJQlJBUllfTkFNRSk7CgkJ\nYm9va0lkLnNldE5hbWUoQk9PS19OQU1FKTsKCQlCb29rIGJvb2sgPSBlbS5m\naW5kKEJvb2suY2xhc3MsIGJvb2tJZCk7CgkJYXNzZXJ0Tm90TnVsbChib29r\nKTsKCQlib29rLnNldEF1dGhvcigibW9kaWZpeSBBdXRob3IiKTsKCQllbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwoJfQoJCglwdWJsaWMgdm9pZCB0\nZXN0RGVsZXRlKCkgewoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKCQlMaWJyYXJ5IGxpYiA9IGVtLmZpbmQoTGlicmFyeS5jbGFzcywgTElC\nUkFSWV9OQU1FKTsKCQllbS5yZW1vdmUobGliKTsKCQllbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwoJCQoJICAgIGFzc2VydEVxdWFscygwLCBjb3Vu\ndChMaWJyYXJ5LmNsYXNzKSk7CgkgICAgYXNzZXJ0RXF1YWxzKDAsIGNvdW50\nKEJvb2suY2xhc3MpKTsKCSAgICBhc3NlcnRFcXVhbHMoMCwgY291bnQoUGFn\nZS5jbGFzcykpOwoJfQoKCQoJLyoqCgkgKiBDcmVhdGUgYSBMaWJyYXJ5IHdp\ndGggYSBCb29rIGFuZCB0aHJlZSBQYWdlcy4KCSAqLwoJcHVibGljIHZvaWQg\nY3JlYXRlKCkgewoJCWlmIChjb3VudChMaWJyYXJ5LmNsYXNzKSA+IDApCgkJ\nCXJldHVybjsKCQkKCQlFbnRpdHlNYW5hZ2VyIGVtID0gbnVsbDsKCQllbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgkJZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwoJCQoJCUxpYnJhcnkgbGliID0gbmV3IExpYnJhcnko\nKTsKCQlsaWIuc2V0TmFtZShMSUJSQVJZX05BTUUpOwoKCQlCb29rIGJvb2sg\nPSBuZXcgQm9vaygpOwoJCWJvb2suc2V0TmFtZShCT09LX05BTUUpOwoJCWxp\nYi5hZGRCb29rKGJvb2spOwoJCWZvciAoaW50IGkgPSAxOyBpIDw9IE5VTV9Q\nQUdFUzsgaSsrKSB7CgkJCVBhZ2UgcGFnZSA9IG5ldyBQYWdlKCk7CgkJCXBh\nZ2Uuc2V0TnVtYmVyKGkpOwoJCQlib29rLmFkZFBhZ2UocGFnZSk7CgkJfQoJ\nCWVtLnBlcnNpc3QobGliKTsKCQllbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwoKCQllbS5jbGVhcigpOwoJfQp9Cg==\n","encoding":"base64"}

