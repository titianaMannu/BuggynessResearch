{"sha":"ba841886bb0ccfd310cd22cc9bd953f222df32cb","node_id":"MDQ6QmxvYjIwNjM2NDpiYTg0MTg4NmJiMGNjZmQzMTBjZDIyY2M5YmQ5NTNmMjIyZGYzMmNi","size":12243,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ba841886bb0ccfd310cd22cc9bd953f222df32cb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5nZW5lcmF0aW9u\ndHlwZTsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5RdWVyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdE11\nbHRpcGxlU2NoZW1hTmFtZXMgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChEb2cx\nLmNsYXNzLCBEb2cyLmNsYXNzLCBEb2dUYWJsZS5jbGFzcywgRG9nVGFibGUy\nLmNsYXNzLAogICAgICAgICAgICAgICAgRG9nVGFibGUzLmNsYXNzLCBEb2dU\nYWJsZTQuY2xhc3MpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgLy8gY2xlYW51cCBkYXRhYmFzZSBm\naXJzdAogICAgICAgIFF1ZXJ5IHFyeSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxl\nY3QgZCBmcm9tIERvZzEgZCIpOwogICAgICAgIExpc3QgcmVzdWx0ID0gcXJ5\nLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgZm9yIChpbnQgaW5kZXggPSAw\nOyBpbmRleCA8IHJlc3VsdC5zaXplKCk7IGluZGV4KyspIHsKICAgICAgICAg\nICAgRG9nMSBPYmogPSAoRG9nMSkgcmVzdWx0LmdldChpbmRleCk7CiAgICAg\nICAgICAgIGVtLnJlbW92ZShPYmopOwogICAgICAgIH0KICAgICAgICBRdWVy\neSBxcnkyID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRG9nMiBk\nIik7CiAgICAgICAgTGlzdCByZXN1bHQyID0gcXJ5Mi5nZXRSZXN1bHRMaXN0\nKCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCByZXN1\nbHQyLnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBEb2cyIE9iaiA9\nIChEb2cyKSByZXN1bHQyLmdldChpbmRleCk7CiAgICAgICAgICAgIGVtLnJl\nbW92ZShPYmopOwogICAgICAgIH0KICAgICAgICBRdWVyeSBxcnkzID0gZW0u\nY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRG9nVGFibGUgZCIpOwogICAg\nICAgIExpc3QgcmVzdWx0MyA9IHFyeTMuZ2V0UmVzdWx0TGlzdCgpOwoKICAg\nICAgICBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgcmVzdWx0My5zaXpl\nKCk7IGluZGV4KyspIHsKICAgICAgICAgICAgRG9nVGFibGUgT2JqID0gKERv\nZ1RhYmxlKSByZXN1bHQzLmdldChpbmRleCk7CiAgICAgICAgICAgIGVtLnJl\nbW92ZShPYmopOwogICAgICAgIH0KICAgICAgICBRdWVyeSBxcnk0ID0gZW0u\nY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRG9nVGFibGUyIGQiKTsKICAg\nICAgICBMaXN0IHJlc3VsdDQgPSBxcnk0LmdldFJlc3VsdExpc3QoKTsKCiAg\nICAgICAgZm9yIChpbnQgaW5kZXggPSAwOyBpbmRleCA8IHJlc3VsdDQuc2l6\nZSgpOyBpbmRleCsrKSB7CiAgICAgICAgICAgIERvZ1RhYmxlMiBPYmogPSAo\nRG9nVGFibGUyKSByZXN1bHQ0LmdldChpbmRleCk7CiAgICAgICAgICAgIGVt\nLnJlbW92ZShPYmopOwogICAgICAgIH0KCiAgICAgICAgUXVlcnkgcXJ5NSA9\nIGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZ1RhYmxlMyBkIik7\nCiAgICAgICAgTGlzdCByZXN1bHQ1ID0gcXJ5NS5nZXRSZXN1bHRMaXN0KCk7\nCgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCByZXN1bHQ1\nLnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBEb2dUYWJsZTMgT2Jq\nID0gKERvZ1RhYmxlMykgcmVzdWx0NS5nZXQoaW5kZXgpOwogICAgICAgICAg\nICBlbS5yZW1vdmUoT2JqKTsKICAgICAgICB9CgogICAgICAgIFF1ZXJ5IHFy\neTYgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2dUYWJsZTQg\nZCIpOwogICAgICAgIExpc3QgcmVzdWx0NiA9IHFyeTYuZ2V0UmVzdWx0TGlz\ndCgpOwoKICAgICAgICBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgcmVz\ndWx0Ni5zaXplKCk7IGluZGV4KyspIHsKICAgICAgICAgICAgRG9nVGFibGU0\nIE9iaiA9IChEb2dUYWJsZTQpIHJlc3VsdDYuZ2V0KGluZGV4KTsKICAgICAg\nICAgICAgZW0ucmVtb3ZlKE9iaik7CiAgICAgICAgfQoKICAgICAgICBRdWVy\neSBkZWxzY2hlbWExID0gZW0KICAgICAgICAgICAgICAgIC5jcmVhdGVOYXRp\ndmVRdWVyeSgiZGVsZXRlIGZyb20gc2NoZW1hMS5vcGVuanBhX3NlcXVlbmNl\nX3RhYmxlIik7CiAgICAgICAgZGVsc2NoZW1hMS5leGVjdXRlVXBkYXRlKCk7\nCiAgICAgICAgUXVlcnkgZGVsc2NoZW1hMiA9IGVtCiAgICAgICAgICAgICAg\nICAuY3JlYXRlTmF0aXZlUXVlcnkoImRlbGV0ZSBmcm9tIHNjaGVtYTIub3Bl\nbmpwYV9zZXF1ZW5jZV90YWJsZSIpOwogICAgICAgIGRlbHNjaGVtYTIuZXhl\nY3V0ZVVwZGF0ZSgpOwogICAgICAgIFF1ZXJ5IGRlbGdlbnRhYmxlID0gZW0u\nY3JlYXRlTmF0aXZlUXVlcnkoImRlbGV0ZSBmcm9tIHNjaGVtYTEuaWRfZ2Vu\nMSIpOwogICAgICAgIGRlbGdlbnRhYmxlLmV4ZWN1dGVVcGRhdGUoKTsKICAg\nICAgICBRdWVyeSBkZWxnZW50YWJsZTIgPSBlbQogICAgICAgICAgICAgICAg\nLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJkZWxldGUgZnJvbSBzY2hlbWEyLmlkX2dl\nbjIiKTsKICAgICAgICBkZWxnZW50YWJsZTIuZXhlY3V0ZVVwZGF0ZSgpOwog\nICAgICAgIFF1ZXJ5IGRlbGdlbnRhYmxlMyA9IGVtCiAgICAgICAgICAgICAg\nICAuY3JlYXRlTmF0aXZlUXVlcnkoImRlbGV0ZSBmcm9tIHNjaGVtYTNnLmlk\nX2dlbjMiKTsKICAgICAgICBkZWxnZW50YWJsZTMuZXhlY3V0ZVVwZGF0ZSgp\nOwogICAgICAgIFF1ZXJ5IGRlbGdlbnRhYmxlNCA9IGVtCiAgICAgICAgICAg\nICAgICAuY3JlYXRlTmF0aXZlUXVlcnkoImRlbGV0ZSBmcm9tIHNjaGVtYTRn\nLmlkX2dlbjQiKTsKICAgICAgICBkZWxnZW50YWJsZTQuZXhlY3V0ZVVwZGF0\nZSgpOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgICAgIGVtLmNsb3NlKCk7CgogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RHZW5lcmF0ZWRBVVRPKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIGtlbSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVt\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAg\nICAgIERvZzEgZG9nMSA9IG5ldyBEb2cxKCk7CiAgICAgICAgZG9nMS5zZXRO\nYW1lKCJoZWxsb0RvZzEiKTsKICAgICAgICBkb2cxLnNldFByaWNlKDEyMDAw\nKTsKCiAgICAgICAgZW0ucGVyc2lzdChkb2cxKTsKICAgICAgICBEb2cxIGRv\nZzFhID0gbmV3IERvZzEoKTsKICAgICAgICBkb2cxYS5zZXROYW1lKCJoZWxs\nb0RvZzIiKTsKICAgICAgICBkb2cxYS5zZXRQcmljZSgyMjAwMCk7CiAgICAg\nICAgZW0ucGVyc2lzdChkb2cxYSk7CiAgICAgICAgLy8gYWRkIGRvZzIKICAg\nICAgICBEb2cyIGRvZzIgPSBuZXcgRG9nMigpOwogICAgICAgIGRvZzIuc2V0\nTmFtZSgiaGVsbG9Eb2czIik7CiAgICAgICAgZG9nMi5zZXRQcmljZSgxNTAw\nMCk7CiAgICAgICAgZW0ucGVyc2lzdChkb2cyKTsKCiAgICAgICAgRG9nMiBk\nb2cyYSA9IG5ldyBEb2cyKCk7CiAgICAgICAgZG9nMmEuc2V0TmFtZSgiaGVs\nbG9Eb2c0Iik7CiAgICAgICAgZG9nMmEuc2V0UHJpY2UoMjUwMDApOwogICAg\nICAgIGVtLnBlcnNpc3QoZG9nMmEpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuY29tbWl0KCk7CgogICAgICAgIERvZzEgZG9nMXggPSBlbS5maW5k\nKERvZzEuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cxKSk7CiAgICAgICAg\nLy8gRGVyYnkgY2FuJ3QgZ3VhcmFudGVlIHRoZSBvcmRlciBvZiB0aGUgZ2Vu\nZXJhdGVkIHZhbHVlLCB0aGVyZWZvcmUsCiAgICAgICAgLy8gd2UgY2FuJ3Qg\nYXNzZXJ0IHRoZSBpZCBiYXNlZCBvbiB0aGUgb3JkZXIuIEZvciBkYjIsIHdl\nIHNlZSB0aGUgaWQgCiAgICAgICAgLy8gdmFsdWUgaW4gdGhlIHJpZ2h0IG9y\nZGVyCiAgICAgICAgYXNzZXJ0VHJ1ZShkb2cxeC5nZXRJZDIoKSA9PSAxIHx8\nIGRvZzF4LmdldElkMigpID09IDIpOwogICAgICAgIGFzc2VydEVxdWFscyhk\nb2cxeC5nZXROYW1lKCksICJoZWxsb0RvZzEiKTsKICAgICAgICBkb2cxeC5z\nZXROYW1lKCJEb2cxIik7CiAgICAgICAgZG9nMXguc2V0RG9tZXN0aWModHJ1\nZSk7CiAgICAgICAgRG9nMSBkb2cxMSA9IGVtLmZpbmQoRG9nMS5jbGFzcywg\na2VtLmdldE9iamVjdElkKGRvZzFhKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShk\nb2cxMS5nZXRJZDIoKSA9PSAxIHx8IGRvZzExLmdldElkMigpID09IDIpOwog\nICAgICAgIGFzc2VydEVxdWFscyhkb2cxMS5nZXROYW1lKCksICJoZWxsb0Rv\nZzIiKTsKICAgICAgICBkb2cxMS5zZXROYW1lKCJEb2cyIik7CiAgICAgICAg\nZG9nMTEuc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAgLy8gdXBkYXRlIGRv\nZzIKICAgICAgICBEb2cyIGRvZzJ4ID0gZW0uZmluZChEb2cyLmNsYXNzLCBr\nZW0uZ2V0T2JqZWN0SWQoZG9nMikpOwogICAgICAgIGFzc2VydFRydWUoZG9n\nMnguZ2V0SWQyKCkgPT0gMSB8fCBkb2cyeC5nZXRJZDIoKSA9PSAyKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoZG9nMnguZ2V0TmFtZSgpLCAiaGVsbG9Eb2cz\nIik7CiAgICAgICAgZG9nMnguc2V0TmFtZSgiRG9nMyIpOwogICAgICAgIGRv\nZzJ4LnNldERvbWVzdGljKHRydWUpOwogICAgICAgIERvZzIgZG9nMjEgPSBl\nbS5maW5kKERvZzIuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cyYSkpOwog\nICAgICAgIGFzc2VydFRydWUoZG9nMjEuZ2V0SWQyKCkgPT0gMSB8fCBkb2cy\nMS5nZXRJZDIoKSA9PSAyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZG9nMjEu\nZ2V0TmFtZSgpLCAiaGVsbG9Eb2c0Iik7CiAgICAgICAgZG9nMjEuc2V0TmFt\nZSgiRG9nNCIpOwogICAgICAgIGRvZzIxLnNldERvbWVzdGljKHRydWUpOwoK\nICAgICAgICAvLyBnZXQgdGhlIHVwZGF0ZSBkb2cgbmFtZQoKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcXJ5\nMSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZzEgZCBvcmRl\nciBieSBkLm5hbWUiKTsKICAgICAgICBMaXN0IHJlc3VsdDEgPSBxcnkxLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKGludCBpbmRleCA9IDA7IGlu\nZGV4IDwgcmVzdWx0MS5zaXplKCk7IGluZGV4KyspIHsKICAgICAgICAgICAg\nRG9nMSBkb2c0ID0gKERvZzEpIHJlc3VsdDEuZ2V0KGluZGV4KTsKICAgICAg\nICAgICAgaW50IGkgPSBpbmRleCArIDE7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUoZG9nNC5nZXRJZDIoKSA9PSAxIHx8IGRvZzQuZ2V0SWQyKCkgPT0gMik7\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhkb2c0LmdldE5hbWUoKSwgIkRv\nZyIgKyBpKTsKICAgICAgICB9CgogICAgICAgIFF1ZXJ5IHFyeTIgPSBlbS5j\ncmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2cyIGQgb3JkZXIgYnkgZC5u\nYW1lIik7CiAgICAgICAgTGlzdCByZXN1bHQyID0gcXJ5Mi5nZXRSZXN1bHRM\naXN0KCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCBy\nZXN1bHQyLnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBEb2cyIGRv\nZzUgPSAoRG9nMikgcmVzdWx0Mi5nZXQoaW5kZXgpOwogICAgICAgICAgICBh\nc3NlcnRUcnVlKGRvZzUuZ2V0SWQyKCkgPT0gMSB8fCBkb2c1LmdldElkMigp\nID09IDIpOwogICAgICAgICAgICBpbnQgaiA9IGluZGV4ICsgMzsKICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKGRvZzUuZ2V0TmFtZSgpLCAiRG9nIiArIGop\nOwogICAgICAgIH0KCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RHZW5lcmF0ZWRUQUJMRSgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlciBrZW0gPSBPcGVuSlBBUGVyc2lzdGVuY2Uu\nY2FzdChlbSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwoKICAgICAgICBEb2dUYWJsZSBkb2cxID0gbmV3IERvZ1RhYmxlKCk7CiAg\nICAgICAgZG9nMS5zZXROYW1lKCJoZWxsb0RvZzEiKTsKICAgICAgICBkb2cx\nLnNldFByaWNlKDEyMDAwKTsKCiAgICAgICAgZW0ucGVyc2lzdChkb2cxKTsK\nICAgICAgICBEb2dUYWJsZSBkb2cxYSA9IG5ldyBEb2dUYWJsZSgpOwogICAg\nICAgIGRvZzFhLnNldE5hbWUoImhlbGxvRG9nMiIpOwogICAgICAgIGRvZzFh\nLnNldFByaWNlKDIyMDAwKTsKICAgICAgICBlbS5wZXJzaXN0KGRvZzFhKTsK\nICAgICAgICAvLyBhZGQgZG9nMgogICAgICAgIERvZ1RhYmxlMiBkb2cyID0g\nbmV3IERvZ1RhYmxlMigpOwogICAgICAgIGRvZzIuc2V0TmFtZSgiaGVsbG9E\nb2czIik7CiAgICAgICAgZG9nMi5zZXRQcmljZSgxNTAwMCk7CiAgICAgICAg\nZW0ucGVyc2lzdChkb2cyKTsKCiAgICAgICAgRG9nVGFibGUyIGRvZzJhID0g\nbmV3IERvZ1RhYmxlMigpOwogICAgICAgIGRvZzJhLnNldE5hbWUoImhlbGxv\nRG9nNCIpOwogICAgICAgIGRvZzJhLnNldFByaWNlKDI1MDAwKTsKICAgICAg\nICBlbS5wZXJzaXN0KGRvZzJhKTsKCiAgICAgICAgLy8gYWRkIGRvZzMKICAg\nICAgICBEb2dUYWJsZTMgZG9nMyA9IG5ldyBEb2dUYWJsZTMoKTsKICAgICAg\nICBkb2czLnNldE5hbWUoImhlbGxvRG9nNSIpOwogICAgICAgIGRvZzMuc2V0\nUHJpY2UoMTUwMDEpOwogICAgICAgIGVtLnBlcnNpc3QoZG9nMyk7CgogICAg\nICAgIERvZ1RhYmxlMyBkb2czYSA9IG5ldyBEb2dUYWJsZTMoKTsKICAgICAg\nICBkb2czYS5zZXROYW1lKCJoZWxsb0RvZzYiKTsKICAgICAgICBkb2czYS5z\nZXRQcmljZSgyNTAwMSk7CiAgICAgICAgZW0ucGVyc2lzdChkb2czYSk7Cgog\nICAgICAgIC8vIGFkZCBkb2c0CiAgICAgICAgRG9nVGFibGU0IGRvZzQgPSBu\nZXcgRG9nVGFibGU0KCk7CiAgICAgICAgZG9nNC5zZXROYW1lKCJoZWxsb0Rv\nZzciKTsKICAgICAgICBkb2c0LnNldFByaWNlKDE1MDAyKTsKICAgICAgICBl\nbS5wZXJzaXN0KGRvZzQpOwoKICAgICAgICBEb2dUYWJsZTQgZG9nNGEgPSBu\nZXcgRG9nVGFibGU0KCk7CiAgICAgICAgZG9nNGEuc2V0TmFtZSgiaGVsbG9E\nb2c4Iik7CiAgICAgICAgZG9nNGEuc2V0UHJpY2UoMjUwMDIpOwogICAgICAg\nIGVtLnBlcnNpc3QoZG9nNGEpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7ICAgICAgICAKICAgICAgICAKICAgICAgICBEb2dUYWJs\nZSBkb2cxeCA9IGVtLmZpbmQoRG9nVGFibGUuY2xhc3MsIGtlbS5nZXRPYmpl\nY3RJZChkb2cxKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShkb2cxeC5nZXRJZDIo\nKSA9PSAyMCB8fCBkb2cxeC5nZXRJZDIoKSA9PSAyMSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKGRvZzF4LmdldE5hbWUoKSwgImhlbGxvRG9nMSIpOwogICAg\nICAgIGRvZzF4LnNldE5hbWUoIkRvZzEiKTsKICAgICAgICBkb2cxeC5zZXRE\nb21lc3RpYyh0cnVlKTsKICAgICAgICBEb2dUYWJsZSBkb2cxMSA9IGVtLmZp\nbmQoRG9nVGFibGUuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChkb2cxYSkpOwog\nICAgICAgIGFzc2VydFRydWUoZG9nMTEuZ2V0SWQyKCkgPT0gMjAgfHwgZG9n\nMTEuZ2V0SWQyKCkgPT0gMjEpOwogICAgICAgIGFzc2VydEVxdWFscyhkb2cx\nMS5nZXROYW1lKCksICJoZWxsb0RvZzIiKTsKICAgICAgICBkb2cxMS5zZXRO\nYW1lKCJEb2cyIik7CiAgICAgICAgZG9nMTEuc2V0RG9tZXN0aWModHJ1ZSk7\nCiAgICAgICAgCiAgICAgICAgLy8gdXBkYXRlIGRvZzIKICAgICAgICBEb2dU\nYWJsZTIgZG9nMnggPSBlbS5maW5kKERvZ1RhYmxlMi5jbGFzcywga2VtLmdl\ndE9iamVjdElkKGRvZzIpKTsKICAgICAgICBhc3NlcnRUcnVlKGRvZzJ4Lmdl\ndElkMigpID09IDEwMCB8fCBkb2cyeC5nZXRJZDIoKSA9PSAxMDEpOwogICAg\nICAgIGFzc2VydEVxdWFscyhkb2cyeC5nZXROYW1lKCksICJoZWxsb0RvZzMi\nKTsKICAgICAgICBkb2cyeC5zZXROYW1lKCJEb2czIik7CiAgICAgICAgZG9n\nMnguc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAgRG9nVGFibGUyIGRvZzIx\nID0gZW0uZmluZChEb2dUYWJsZTIuY2xhc3MsIGtlbS5nZXRPYmplY3RJZChk\nb2cyYSkpOwogICAgICAgIGFzc2VydFRydWUoZG9nMjEuZ2V0SWQyKCkgPT0g\nMTAwIHx8IGRvZzIxLmdldElkMigpID09IDEwMSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGRvZzIxLmdldE5hbWUoKSwgImhlbGxvRG9nNCIpOwogICAgICAg\nIGRvZzIxLnNldE5hbWUoIkRvZzQiKTsKICAgICAgICBkb2cyMS5zZXREb21l\nc3RpYyh0cnVlKTsKCiAgICAgICAgLy8gdXBkYXRlIGRvZzMKICAgICAgICBE\nb2dUYWJsZTMgZG9nM3ggPSBlbS5maW5kKERvZ1RhYmxlMy5jbGFzcywga2Vt\nLmdldE9iamVjdElkKGRvZzMpKTsKICAgICAgICBhc3NlcnRUcnVlKGRvZzN4\nLmdldElkMigpID09IDEwMCB8fCBkb2czeC5nZXRJZDIoKSA9PSAxMDEpOwog\nICAgICAgIGFzc2VydEVxdWFscyhkb2czeC5nZXROYW1lKCksICJoZWxsb0Rv\nZzUiKTsKICAgICAgICBkb2czeC5zZXROYW1lKCJEb2c1Iik7CiAgICAgICAg\nZG9nM3guc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAgRG9nVGFibGUzIGRv\nZzMxID0gZW0uZmluZChEb2dUYWJsZTMuY2xhc3MsIGtlbS5nZXRPYmplY3RJ\nZChkb2czYSkpOwogICAgICAgIGFzc2VydFRydWUoZG9nMzEuZ2V0SWQyKCkg\nPT0gMTAwIHx8IGRvZzMxLmdldElkMigpID09IDEwMSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKGRvZzMxLmdldE5hbWUoKSwgImhlbGxvRG9nNiIpOwogICAg\nICAgIGRvZzMxLnNldE5hbWUoIkRvZzYiKTsKICAgICAgICBkb2czMS5zZXRE\nb21lc3RpYyh0cnVlKTsKCiAgICAgICAgLy8gdXBkYXRlIGRvZzQKICAgICAg\nICBEb2dUYWJsZTQgZG9nNHggPSBlbS5maW5kKERvZ1RhYmxlNC5jbGFzcywg\na2VtLmdldE9iamVjdElkKGRvZzQpKTsKICAgICAgICBhc3NlcnRUcnVlKGRv\nZzR4LmdldElkMigpID09IDEwMCB8fCBkb2c0eC5nZXRJZDIoKSA9PSAxMDEp\nOwogICAgICAgIGFzc2VydEVxdWFscyhkb2c0eC5nZXROYW1lKCksICJoZWxs\nb0RvZzciKTsKICAgICAgICBkb2c0eC5zZXROYW1lKCJEb2c3Iik7CiAgICAg\nICAgZG9nNHguc2V0RG9tZXN0aWModHJ1ZSk7CiAgICAgICAgRG9nVGFibGU0\nIGRvZzQxID0gZW0uZmluZChEb2dUYWJsZTQuY2xhc3MsIGtlbS5nZXRPYmpl\nY3RJZChkb2c0YSkpOwogICAgICAgIGFzc2VydFRydWUoZG9nNDEuZ2V0SWQy\nKCkgPT0gMTAwIHx8IGRvZzQxLmdldElkMigpID09IDEwMSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKGRvZzQxLmdldE5hbWUoKSwgImhlbGxvRG9nOCIpOwog\nICAgICAgIGRvZzQxLnNldE5hbWUoIkRvZzgiKTsKICAgICAgICBkb2c0MS5z\nZXREb21lc3RpYyh0cnVlKTsKCiAgICAgICAgLy8gZ2V0IHRoZSB1cGRhdGUg\nZG9nIG5hbWUKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwogICAgICAgIFF1ZXJ5IHFyeTEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0\nIGQgZnJvbSBEb2dUYWJsZSBkIG9yZGVyIGJ5IGQubmFtZSIpOwogICAgICAg\nIExpc3QgcmVzdWx0MSA9IHFyeTEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCByZXN1bHQxLnNpemUoKTsg\naW5kZXgrKykgewogICAgICAgICAgICBEb2dUYWJsZSBkb2cxeHggPSAoRG9n\nVGFibGUpIHJlc3VsdDEuZ2V0KGluZGV4KTsKICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZShkb2cxeHguZ2V0SWQyKCkgPT0gMjAgfHwgZG9nMXh4LmdldElkMigp\nID09IDIxKTsKICAgICAgICAgICAgaW50IGogPSBpbmRleCArIDE7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscyhkb2cxeHguZ2V0TmFtZSgpLCAiRG9nIiAr\nIGopOwoKICAgICAgICB9CgogICAgICAgIFF1ZXJ5IHFyeTIgPSBlbQogICAg\nICAgICAgICAgICAgLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZ1Rh\nYmxlMiBkIG9yZGVyIGJ5IGQubmFtZSIpOwogICAgICAgIExpc3QgcmVzdWx0\nMiA9IHFyeTIuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBmb3IgKGludCBp\nbmRleCA9IDA7IGluZGV4IDwgcmVzdWx0Mi5zaXplKCk7IGluZGV4KyspIHsK\nICAgICAgICAgICAgRG9nVGFibGUyIGRvZzJ4eCA9IChEb2dUYWJsZTIpIHJl\nc3VsdDIuZ2V0KGluZGV4KTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShkb2cy\neHguZ2V0SWQyKCkgPT0gMTAwIHx8IGRvZzJ4eC5nZXRJZDIoKSA9PSAxMDEp\nOwogICAgICAgICAgICBpbnQgaiA9IGluZGV4ICsgMzsKICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKGRvZzJ4eC5nZXROYW1lKCksICJEb2ciICsgaik7CiAg\nICAgICAgfQoKICAgICAgICBRdWVyeSBxcnkzID0gZW0KICAgICAgICAgICAg\nICAgIC5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2dUYWJsZTMgZCBv\ncmRlciBieSBkLm5hbWUiKTsKICAgICAgICBMaXN0IHJlc3VsdDMgPSBxcnkz\nLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgZm9yIChpbnQgaW5kZXggPSAw\nOyBpbmRleCA8IHJlc3VsdDMuc2l6ZSgpOyBpbmRleCsrKSB7CiAgICAgICAg\nICAgIERvZ1RhYmxlMyBkb2czeHggPSAoRG9nVGFibGUzKSByZXN1bHQzLmdl\ndChpbmRleCk7CiAgICAgICAgICAgIGFzc2VydFRydWUoZG9nM3h4LmdldElk\nMigpID09IDEwMCB8fCBkb2czeHguZ2V0SWQyKCkgPT0gMTAxKTsKICAgICAg\nICAgICAgaW50IGogPSBpbmRleCArIDU7CiAgICAgICAgICAgIGFzc2VydEVx\ndWFscyhkb2czeHguZ2V0TmFtZSgpLCAiRG9nIiArIGopOwogICAgICAgIH0K\nCiAgICAgICAgUXVlcnkgcXJ5NCA9IGVtCiAgICAgICAgICAgICAgICAuY3Jl\nYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRG9nVGFibGU0IGQgb3JkZXIgYnkg\nZC5uYW1lIik7CiAgICAgICAgTGlzdCByZXN1bHQ0ID0gcXJ5NC5nZXRSZXN1\nbHRMaXN0KCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXgg\nPCByZXN1bHQ0LnNpemUoKTsgaW5kZXgrKykgewogICAgICAgICAgICBEb2dU\nYWJsZTQgZG9nNHh4ID0gKERvZ1RhYmxlNCkgcmVzdWx0NC5nZXQoaW5kZXgp\nOwogICAgICAgICAgICBhc3NlcnRUcnVlKGRvZzR4eC5nZXRJZDIoKSA9PSAx\nMDAgfHwgZG9nNHh4LmdldElkMigpID09IDEwMSk7CiAgICAgICAgICAgIGlu\ndCBqID0gaW5kZXggKyA3OwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoZG9n\nNHh4LmdldE5hbWUoKSwgIkRvZyIgKyBqKTsKICAgICAgICB9CgogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgIH0KfSAvLyBlbmQgb2YgVGVzdE11bHRpcGxlU2NoZW1hTmFt\nZXMK\n","encoding":"base64"}

