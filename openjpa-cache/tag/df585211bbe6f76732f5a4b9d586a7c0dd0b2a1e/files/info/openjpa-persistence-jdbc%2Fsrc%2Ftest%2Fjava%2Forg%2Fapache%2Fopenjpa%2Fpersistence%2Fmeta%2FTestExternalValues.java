{"sha":"c6db1d288a05f05a591e64274d3a85fefb8237b0","node_id":"MDQ6QmxvYjIwNjM2NDpjNmRiMWQyODhhMDVmMDVhNTkxZTY0Mjc0ZDNhODVmZWZiODIzN2Iw","size":6751,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c6db1d288a05f05a591e64274d3a85fefb8237b0","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UubWV0YTsNCg0KDQppbXBvcnQgamF2YS51dGlsLkxpc3Q7\nDQppbXBvcnQgamF2YS51dGlsLlVVSUQ7DQoNCmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOw0KaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLlF1ZXJ5Ow0KDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLm1ldGEuY29tbW9uLmFwcHMuRXh0ZXJuYWxWYWx1ZXM7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbW1vbi51dGls\ncy5BYnN0cmFjdFRlc3RDYXNlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5Bcmd1bWVudEV4Y2VwdGlvbjsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXI7DQoNCi8qKg0KICogPHA+VGVzdHMgdGhlIHtAbGluayBFeHRlcm5hbFZh\nbHVlc0ZpZWxkTWFwcGluZ30uPC9wPg0KICoNCiAqIEBhdXRob3IgQWJlIFdo\naXRlDQogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIgKGFkZGVkIGJpbmRpbmcg\ncXVlcnkgcGFyYW1ldGVyIHRlc3RzKSANCiAqLw0KcHVibGljIGNsYXNzIFRl\nc3RFeHRlcm5hbFZhbHVlcw0KICAgIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2Fz\nZSB7DQogICAgDQogICAgcHVibGljIFRlc3RFeHRlcm5hbFZhbHVlcyhTdHJp\nbmcgdGVzdCkgew0KICAgICAgICBzdXBlcih0ZXN0LCAibWV0YWNhY3R1c2Fw\ncCIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldFVwKCkNCiAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIGRlbGV0ZUFsbChFeHRl\ncm5hbFZhbHVlcy5jbGFzcyk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\ndGVzdEluc2VydCgpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\ncG0gPQ0KICAgICAgICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBjdXJy\nZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBtKTsNCg0K\nICAgICAgICBFeHRlcm5hbFZhbHVlcyBwYyA9IG5ldyBFeHRlcm5hbFZhbHVl\ncygpOw0KICAgICAgICBwYy5zZXRCb29sZWFuVG9TaG9ydCh0cnVlKTsNCiAg\nICAgICAgcGMuc2V0Qnl0ZVRvRG91YmxlKChieXRlKSA0KTsNCiAgICAgICAg\ncGMuc2V0SW50VG9GbG9hdCg0KTsNCiAgICAgICAgcGMuc2V0TG9uZ1RvQ2hh\ncig0KTsNCiAgICAgICAgcGMuc2V0U2hvcnRUb1N0cmluZygoc2hvcnQpIDQp\nOw0KICAgICAgICBwYy5zZXRGbG9hdFRvQm9vbGVhbig0LjVmKTsNCiAgICAg\nICAgcGMuc2V0RG91YmxlVG9CeXRlKDQuNSk7DQogICAgICAgIHBjLnNldENo\nYXJUb0ludCgnZicpOw0KICAgICAgICBwYy5zZXRTdHJpbmdUb0xvbmcoImZv\nbyIpOw0KICAgICAgICBwbS5wZXJzaXN0KHBjKTsNCiAgICAgICAgT2JqZWN0\nIG9pZCA9IHBtLmdldE9iamVjdElkKHBjKTsNCiAgICAgICAgZW5kVHgocG0p\nOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAgICAgICAgcG0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7DQogICAg\nICAgIHBjID0gKEV4dGVybmFsVmFsdWVzKSBwbS5maW5kKEV4dGVybmFsVmFs\ndWVzLmNsYXNzLCBvaWQpOw0KDQogICAgICAgIGFzc2VydFRydWUocGMuZ2V0\nQm9vbGVhblRvU2hvcnQoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygoYnl0\nZSkgNCwgcGMuZ2V0Qnl0ZVRvRG91YmxlKCkpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoNCwgcGMuZ2V0SW50VG9GbG9hdCgpKTsNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDQsIHBjLmdldExvbmdUb0NoYXIoKSk7DQogICAgICAgIGFzc2Vy\ndEVxdWFscygoc2hvcnQpIDQsIHBjLmdldFNob3J0VG9TdHJpbmcoKSk7DQog\nICAgICAgIGFzc2VydFRydWUoNC41ZiA9PSBwYy5nZXRGbG9hdFRvQm9vbGVh\nbigpKTsNCiAgICAgICAgYXNzZXJ0VHJ1ZSg0LjUgPT0gcGMuZ2V0RG91Ymxl\nVG9CeXRlKCkpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoJ2YnLCBwYy5nZXRD\naGFyVG9JbnQoKSk7DQogICAgICAgIGFzc2VydEVxdWFscygiZm9vIiwgcGMu\nZ2V0U3RyaW5nVG9Mb25nKCkpOw0KDQogICAgICAgIGVuZEVtKHBtKTsNCiAg\nICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29tcGxleFN0cmluZ3MoKSB7\nDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIHBtID0NCiAgICAgICAg\nICAgIChPcGVuSlBBRW50aXR5TWFuYWdlcikgY3VycmVudEVudGl0eU1hbmFn\nZXIoKTsNCiAgICAgICAgc3RhcnRUeChwbSk7DQoNCiAgICAgICAgRXh0ZXJu\nYWxWYWx1ZXMgcGMgPSBuZXcgRXh0ZXJuYWxWYWx1ZXMoKTsNCiAgICAgICAg\ncGMuc2V0U2hvcnRUb1N0cmluZygoc2hvcnQpIDMpOw0KICAgICAgICBwYy5z\nZXRTdHJpbmdUb0xvbmcoImxvbmcgc3RyaW5nIik7DQoNCiAgICAgICAgcG0u\ncGVyc2lzdChwYyk7DQogICAgICAgIE9iamVjdCBvaWQgPSBwbS5nZXRPYmpl\nY3RJZChwYyk7DQogICAgICAgIGVuZFR4KHBtKTsNCiAgICAgICAgZW5kRW0o\ncG0pOw0KDQogICAgICAgIHBtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBj\ndXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBwYyA9IChFeHRlcm5h\nbFZhbHVlcykgcG0uZmluZChFeHRlcm5hbFZhbHVlcy5jbGFzcywgb2lkKTsN\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDMsIHBjLmdldFNob3J0VG9TdHJpbmco\nKSk7DQogICAgICAgIGVuZEVtKHBtKTsNCiAgICB9DQoNCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0QWxsTnVsbCgpIHsNCiAgICAgICAgT3BlbkpQQUVudGl0eU1h\nbmFnZXIgcG0gPQ0KICAgICAgICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBzdGFydFR4KHBt\nKTsNCg0KICAgICAgICBFeHRlcm5hbFZhbHVlcyBwYyA9IG5ldyBFeHRlcm5h\nbFZhbHVlcygpOw0KICAgICAgICBwbS5wZXJzaXN0KHBjKTsNCiAgICAgICAg\nT2JqZWN0IG9pZCA9IHBtLmdldE9iamVjdElkKHBjKTsNCiAgICAgICAgZW5k\nVHgocG0pOw0KICAgICAgICBlbmRFbShwbSk7DQoNCiAgICAgICAgcG0gPSAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpIGN1cnJlbnRFbnRpdHlNYW5hZ2VyKCk7\nDQogICAgICAgIHBjID0gKEV4dGVybmFsVmFsdWVzKSBwbS5maW5kKEV4dGVy\nbmFsVmFsdWVzLmNsYXNzLCBvaWQpOw0KICAgICAgICBlbmRFbShwbSk7DQog\nICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RQb3NpdGlvbmFsQmlu\nZGluZ1F1ZXJ5UGFyYW1ldGVyRXF1YWxzRGVjbGFyZWRUeXBlKCkgew0KICAg\nICAgICBVVUlEIHV1aWQgPSBuZXcgVVVJRCgxLDQpOw0KICAgICAgICBjcmVh\ndGVJbnN0YW5jZSh1dWlkKTsNCiAgICAgICAgDQogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5TWFuYWdlcigpOw0KICAgICAgICBT\ndHJpbmcganBxbCA9ICJTRUxFQ1QgcCBGUk9NIEV4dGVybmFsVmFsdWVzIHAg\nV0hFUkUgcC51dWlkPT8xIjsNCiAgICAgICAgTGlzdDxFeHRlcm5hbFZhbHVl\ncz4gcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkoanBxbCkNCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKDEs\nIHV1aWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgLmdldFJlc3VsdExpc3QoKTsNCiAgICAgICAgYXNzZXJ0RmFsc2UocmVz\ndWx0LmlzRW1wdHkoKSk7DQogICAgICAgIGZvciAoRXh0ZXJuYWxWYWx1ZXMg\neDpyZXN1bHQpIHsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscyh1dWlkLCB4\nLmdldFV1aWQoKSk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcHVi\nbGljIHZvaWQgdGVzdE5hbWVkQmluZGluZ1F1ZXJ5UGFyYW1ldGVyRXF1YWxz\nRGVjbGFyZWRUeXBlKCkgew0KICAgICAgICBVVUlEIHV1aWQgPSBuZXcgVVVJ\nRCgyLDQpOw0KICAgICAgICBjcmVhdGVJbnN0YW5jZSh1dWlkKTsNCiAgICAg\nICAgDQogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50aXR5\nTWFuYWdlcigpOw0KICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgcCBG\nUk9NIEV4dGVybmFsVmFsdWVzIHAgV0hFUkUgcC51dWlkPTp1dWlkIjsNCiAg\nICAgICAgTGlzdDxFeHRlcm5hbFZhbHVlcz4gcmVzdWx0ID0gZW0uY3JlYXRl\nUXVlcnkoanBxbCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAuc2V0UGFyYW1ldGVyKCJ1dWlkIiwgdXVpZCkNCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0UmVzdWx0TGlz\ndCgpOw0KICAgICAgICBhc3NlcnRGYWxzZShyZXN1bHQuaXNFbXB0eSgpKTsN\nCiAgICAgICAgZm9yIChFeHRlcm5hbFZhbHVlcyBwYzpyZXN1bHQpIHsNCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscyh1dWlkLCBwYy5nZXRVdWlkKCkpOw0K\nICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RQ\nb3NpdGlvbmFsQmluZGluZ1F1ZXJ5UGFyYW1ldGVyTm90RXF1YWxzRXh0ZXJu\nYWxpemVkVHlwZSgpIHsNCiAgICAgICAgVVVJRCB1dWlkID0gbmV3IFVVSUQo\nMSw0KTsNCiAgICAgICAgY3JlYXRlSW5zdGFuY2UodXVpZCk7DQogICAgICAg\nIA0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gY3VycmVudEVudGl0eU1h\nbmFnZXIoKTsNCiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIHAgRlJP\nTSBFeHRlcm5hbFZhbHVlcyBwIFdIRVJFIHAudXVpZD0/MSI7DQogICAgICAg\nIFF1ZXJ5IHF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnkoanBxbCkNCiAgICAgICAg\nICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMSwgdXVpZC50b1N0cmlu\nZygpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICANCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHF1ZXJ5LmdldFJlc3Vs\ndExpc3QoKTsNCiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGVkIEFyZ3VtZW50\nRXhjZXB0aW9uIik7DQogICAgICAgfSBjYXRjaCAoQXJndW1lbnRFeGNlcHRp\nb24gZXgpIHsNCiAgICAgICAgICAgLy8gZXhwZWN0ZWQNCiAgICAgICB9DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdE5hbWVkQmluZGluZ1F1ZXJ5\nUGFyYW1ldGVyTm90RXF1YWxzRXh0ZXJuYWxpemVkVHlwZSgpIHsNCiAgICAg\nICAgVVVJRCB1dWlkID0gbmV3IFVVSUQoMiw0KTsNCiAgICAgICAgY3JlYXRl\nSW5zdGFuY2UodXVpZCk7DQogICAgICAgIA0KICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gY3VycmVudEVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgU3Ry\naW5nIGpwcWwgPSAiU0VMRUNUIHAgRlJPTSBFeHRlcm5hbFZhbHVlcyBwIFdI\nRVJFIHAudXVpZD06dXVpZCI7DQogICAgICAgIFF1ZXJ5IHF1ZXJ5ID0gZW0u\nY3JlYXRlUXVlcnkoanBxbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoInV1aWQiLCB1dWlkLnRvU3RyaW5nKCkpOw0KICAgICAg\nICB0cnkgew0KICAgICAgICAgICAgIHF1ZXJ5LmdldFJlc3VsdExpc3QoKTsN\nCiAgICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCBBcmd1bWVudEV4Y2VwdGlv\nbiIpOw0KICAgICAgICB9IGNhdGNoIChBcmd1bWVudEV4Y2VwdGlvbiBleCkg\new0KICAgICAgICAgICAgLy8gZXhwZWN0ZWQNCiAgICAgICAgfQ0KICAgIH0N\nCiAgICANCiAgICBwcml2YXRlIHZvaWQgY3JlYXRlSW5zdGFuY2UoVVVJRCB1\ndWlkKSB7DQogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBjdXJyZW50RW50\naXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7DQogICAgICAgIEV4dGVybmFsVmFsdWVzIHBjID0gbmV3IEV4dGVy\nbmFsVmFsdWVzKCk7DQogICAgICAgIHBjLnNldFV1aWQodXVpZCk7DQogICAg\nICAgIGVtLnBlcnNpc3QocGMpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmNvbW1pdCgpOw0KICAgICAgICBlbS5jbGVhcigpOw0KICAgIH0NCn0N\nCg==\n","encoding":"base64"}

